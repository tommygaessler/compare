(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{9358:(Ce,Oe,Y)=>{"use strict";function L(r){return"function"==typeof r}function W(r){const e=r(s=>{Error.call(s),s.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ne=W(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((s,l)=>`${l+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function H(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class U{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const m of e)m.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(L(s))try{s()}catch(m){t=m instanceof ne?m.errors:[m]}const{_teardowns:l}=this;if(l){this._teardowns=null;for(const m of l)try{P(m)}catch(E){t=t??[],E instanceof ne?t=[...t,...E.errors]:t.push(E)}}if(t)throw new ne(t)}}add(t){var e;if(t&&t!==this)if(this.closed)P(t);else{if(t instanceof U){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&H(e,t)}remove(t){const{_teardowns:e}=this;e&&H(e,t),t instanceof U&&t._removeParent(this)}}U.EMPTY=(()=>{const r=new U;return r.closed=!0,r})();const D=U.EMPTY;function O(r){return r instanceof U||r&&"closed"in r&&L(r.remove)&&L(r.add)&&L(r.unsubscribe)}function P(r){L(r)?r():r.unsubscribe()}const x={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(...r){const{delegate:t}=J;return(t?.setTimeout||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=J;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function ie(r){J.setTimeout(()=>{const{onUnhandledError:t}=x;if(!t)throw r;t(r)})}function te(){}const le=K("C",void 0,void 0);function K(r,t,e){return{kind:r,value:t,error:e}}let se=null;function ve(r){if(x.useDeprecatedSynchronousErrorHandling){const t=!se;if(t&&(se={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:s}=se;if(se=null,e)throw s}}else r()}class pe extends U{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,O(t)&&t.add(this)):this.destination=de}static create(t,e,s){return new be(t,e,s)}next(t){this.isStopped?re(function z(r){return K("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?re(function X(r){return K("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?re(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class be extends pe{constructor(t,e,s){let l;if(super(),L(t))l=t;else if(t){let m;({next:l,error:e,complete:s}=t),this&&x.useDeprecatedNextContext?(m=Object.create(t),m.unsubscribe=()=>this.unsubscribe()):m=t,l=l?.bind(m),e=e?.bind(m),s=s?.bind(m)}this.destination={next:l?ye(l):te,error:ye(e??ge),complete:s?ye(s):te}}}function ye(r,t){return(...e)=>{try{r(...e)}catch(s){x.useDeprecatedSynchronousErrorHandling?function De(r){x.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=r)}(s):ie(s)}}}function ge(r){throw r}function re(r,t){const{onStoppedNotification:e}=x;e&&J.setTimeout(()=>e(r,t))}const de={closed:!0,next:te,error:ge,complete:te},Te="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(r){return r}let ze=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const s=new r;return s.source=this,s.operator=e,s}subscribe(e,s,l){const m=function xt(r){return r&&r instanceof pe||function je(r){return r&&L(r.next)&&L(r.error)&&L(r.complete)}(r)&&O(r)}(e)?e:new be(e,s,l);return ve(()=>{const{operator:E,source:I}=this;m.add(E?E.call(m,I):I?this._subscribe(m):this._trySubscribe(m))}),m}_trySubscribe(e){try{return this._subscribe(e)}catch(s){e.error(s)}}forEach(e,s){return new(s=Ze(s))((l,m)=>{let E;E=this.subscribe(I=>{try{e(I)}catch(k){m(k),E?.unsubscribe()}},m,l)})}_subscribe(e){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(e)}[Te](){return this}pipe(...e){return function Ve(r){return 0===r.length?Fe:1===r.length?r[0]:function(e){return r.reduce((s,l)=>l(s),e)}}(e)(this)}toPromise(e){return new(e=Ze(e))((s,l)=>{let m;this.subscribe(E=>m=E,E=>l(E),()=>s(m))})}}return r.create=t=>new r(t),r})();function Ze(r){var t;return null!==(t=r??x.Promise)&&void 0!==t?t:Promise}const Wt=W(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ht=(()=>{class r extends ze{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const s=new qe(this,this);return s.operator=e,s}_throwIfClosed(){if(this.closed)throw new Wt}next(e){ve(()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const l of s)l.next(e)}})}error(e){ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:s}=this;for(;s.length;)s.shift().error(e)}})}complete(){ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:s,isStopped:l,observers:m}=this;return s||l?D:(m.push(e),new U(()=>H(m,e)))}_checkFinalizedStatuses(e){const{hasError:s,thrownError:l,isStopped:m}=this;s?e.error(l):m&&e.complete()}asObservable(){const e=new ze;return e.source=this,e}}return r.create=(t,e)=>new qe(t,e),r})();class qe extends ht{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,t)}error(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==s?s:D}}function Ye(r){return t=>{if(function Ue(r){return L(r?.lift)}(t))return t.lift(function(e){try{return r(e,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}class we extends pe{constructor(t,e,s,l,m){super(t),this.onFinalize=m,this._next=e?function(E){try{e(E)}catch(I){t.error(I)}}:super._next,this._error=l?function(E){try{l(E)}catch(I){t.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(E){t.error(E)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function nt(r,t){return Ye((e,s)=>{let l=0;e.subscribe(new we(s,m=>{s.next(r.call(t,m,l++))}))})}function Ht(r){return this instanceof Ht?(this.v=r,this):new Ht(r)}function $t(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=e.apply(r,t||[]),m=[];return l={},E("next"),E("throw"),E("return"),l[Symbol.asyncIterator]=function(){return this},l;function E(Le){s[Le]&&(l[Le]=function(We){return new Promise(function(it,bt){m.push([Le,We,it,bt])>1||I(Le,We)})})}function I(Le,We){try{!function k(Le){Le.value instanceof Ht?Promise.resolve(Le.value.v).then(F,ee):me(m[0][2],Le)}(s[Le](We))}catch(it){me(m[0][3],it)}}function F(Le){I("next",Le)}function ee(Le){I("throw",Le)}function me(Le,We){Le(We),m.shift(),m.length&&I(m[0][0],m[0][1])}}function Me(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function bi(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],s=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(m){e[m]=r[m]&&function(E){return new Promise(function(I,k){!function l(m,E,I,k){Promise.resolve(k).then(function(F){m({value:F,done:I})},E)}(I,k,(E=r[m](E)).done,E.value)})}}}const po=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Ss(r){return L(r?.then)}function io(r){return L(r[Te])}function Nc(r){return Symbol.asyncIterator&&L(r?.[Symbol.asyncIterator])}function Vn(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ne=function _n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dt(r){return L(r?.[Ne])}function Zt(r){return $t(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:s,done:l}=yield Ht(e.read());if(l)return yield Ht(void 0);yield yield Ht(s)}}finally{e.releaseLock()}})}function en(r){return L(r?.getReader)}function mn(r){if(r instanceof ze)return r;if(null!=r){if(io(r))return function hi(r){return new ze(t=>{const e=r[Te]();if(L(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(po(r))return function Eo(r){return new ze(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(Ss(r))return function Cs(r){return new ze(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ie)})}(r);if(Nc(r))return fo(r);if(dt(r))return function es(r){return new ze(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(en(r))return function zn(r){return fo(Zt(r))}(r)}throw Vn(r)}function fo(r){return new ze(t=>{(function wr(r,t){var e,s,l,m;return function Vr(r,t,e,s){return new(e||(e=Promise))(function(m,E){function I(ee){try{F(s.next(ee))}catch(me){E(me)}}function k(ee){try{F(s.throw(ee))}catch(me){E(me)}}function F(ee){ee.done?m(ee.value):function l(m){return m instanceof e?m:new e(function(E){E(m)})}(ee.value).then(I,k)}F((s=s.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Me(r);!(s=yield e.next()).done;)if(t.next(s.value),t.closed)return}catch(E){l={error:E}}finally{try{s&&!s.done&&(m=e.return)&&(yield m.call(e))}finally{if(l)throw l.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function Xi(r,t,e,s=0,l=!1){const m=t.schedule(function(){e(),l?r.add(this.schedule(null,s)):this.unsubscribe()},s);if(r.add(m),!l)return m}function tr(r,t,e=1/0){return L(t)?tr((s,l)=>nt((m,E)=>t(s,m,l,E))(mn(r(s,l))),e):("number"==typeof t&&(e=t),Ye((s,l)=>function lu(r,t,e,s,l,m,E,I){const k=[];let F=0,ee=0,me=!1;const Le=()=>{me&&!k.length&&!F&&t.complete()},We=bt=>F<s?it(bt):k.push(bt),it=bt=>{m&&t.next(bt),F++;let Jt=!1;mn(e(bt,ee++)).subscribe(new we(t,tn=>{l?.(tn),m?We(tn):t.next(tn)},()=>{Jt=!0},void 0,()=>{if(Jt)try{for(F--;k.length&&F<s;){const tn=k.shift();E?Xi(t,E,()=>it(tn)):it(tn)}Le()}catch(tn){t.error(tn)}}))};return r.subscribe(new we(t,We,()=>{me=!0,Le()})),()=>{I?.()}}(s,l,r,e)))}function jp(r=1/0){return tr(Fe,r)}const oE=new ze(r=>r.complete());function Uv(r){return r&&L(r.schedule)}function Vv(r){return r[r.length-1]}function jv(r){return L(Vv(r))?r.pop():void 0}function Ds(r){return Uv(Vv(r))?r.pop():void 0}function Qv(r,t=0){return Ye((e,s)=>{e.subscribe(new we(s,l=>Xi(s,r,()=>s.next(l),t),()=>Xi(s,r,()=>s.complete(),t),l=>Xi(s,r,()=>s.error(l),t)))})}function Wg(r,t=0){return Ye((e,s)=>{s.add(r.schedule(()=>e.subscribe(s),t))})}function Kg(r,t){if(!r)throw new Error("Iterable cannot be null");return new ze(e=>{Xi(e,t,()=>{const s=r[Symbol.asyncIterator]();Xi(e,t,()=>{s.next().then(l=>{l.done?e.complete():e.next(l.value)})},0,!0)})})}function dc(r,t){return t?function E0(r,t){if(null!=r){if(io(r))return function cw(r,t){return mn(r).pipe(Wg(t),Qv(t))}(r,t);if(po(r))return function uw(r,t){return new ze(e=>{let s=0;return t.schedule(function(){s===r.length?e.complete():(e.next(r[s++]),e.closed||this.schedule())})})}(r,t);if(Ss(r))return function Zs(r,t){return mn(r).pipe(Wg(t),Qv(t))}(r,t);if(Nc(r))return Kg(r,t);if(dt(r))return function Un(r,t){return new ze(e=>{let s;return Xi(e,t,()=>{s=r[Ne](),Xi(e,t,()=>{let l,m;try{({value:l,done:m}=s.next())}catch(E){return void e.error(E)}m?e.complete():e.next(l)},0,!0)}),()=>L(s?.return)&&s.return()})}(r,t);if(en(r))return function nm(r,t){return Kg(Zt(r),t)}(r,t)}throw Vn(r)}(r,t):mn(r)}function wo(...r){const t=Ds(r),e=function Kd(r,t){return"number"==typeof Vv(r)?r.pop():t}(r,1/0),s=r;return s.length?1===s.length?mn(s[0]):jp(e)(dc(s,t)):oE}function vl(r){return r<=0?()=>oE:Ye((t,e)=>{let s=0;t.subscribe(new we(e,l=>{++s<=r&&(e.next(l),r<=s&&e.complete())}))})}function du(r={}){const{connector:t=(()=>new ht),resetOnError:e=!0,resetOnComplete:s=!0,resetOnRefCountZero:l=!0}=r;return m=>{let E=null,I=null,k=null,F=0,ee=!1,me=!1;const Le=()=>{I?.unsubscribe(),I=null},We=()=>{Le(),E=k=null,ee=me=!1},it=()=>{const bt=E;We(),bt?.unsubscribe()};return Ye((bt,Jt)=>{F++,!me&&!ee&&Le();const tn=k=k??t();Jt.add(()=>{F--,0===F&&!me&&!ee&&(I=sE(it,l))}),tn.subscribe(Jt),E||(E=new be({next:Rn=>tn.next(Rn),error:Rn=>{me=!0,Le(),I=sE(We,e,Rn),tn.error(Rn)},complete:()=>{ee=!0,Le(),I=sE(We,s),tn.complete()}}),dc(bt).subscribe(E))})(m)}}function sE(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(vl(1)).subscribe(()=>r())}function Ro(r){for(let t in r)if(r[t]===Ro)return t;throw Error("Could not find renamed property on target object.")}function fn(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function xo(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(xo).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Fh(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const er=Ro({__forward_ref__:Ro});function jo(r){return r.__forward_ref__=jo,r.toString=function(){return xo(this())},r}function Gr(r){return rm(r)?r():r}function rm(r){return"function"==typeof r&&r.hasOwnProperty(er)&&r.__forward_ref__===jo}function ea(r){return r&&!!r.\u0275providers}const zg="https://g.co/ng/security#xss";class gn extends Error{constructor(t,e){super(function aE(r,t){return`NG0${Math.abs(r)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function si(r){return"string"==typeof r?r:null==r?"":String(r)}function Hv(r,t){throw new gn(-201,!1)}function Al(r,t){null==r&&function ro(r,t,e,s){throw new Error(`ASSERTION ERROR: ${r}`+(null==s?"":` [Expected=> ${e} ${s} ${t} <=Actual]`))}(t,r,null,"!=")}function vr(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Fi(r){return{providers:r.providers||[],imports:r.imports||[]}}function uE(r){return Qo(r,qg)||Qo(r,lr)}function Qo(r,t){return r.hasOwnProperty(t)?r[t]:null}function Yg(r){return r&&(r.hasOwnProperty(S0)||r.hasOwnProperty(Gv))?r[S0]:null}const qg=Ro({\u0275prov:Ro}),S0=Ro({\u0275inj:Ro}),lr=Ro({ngInjectableDef:Ro}),Gv=Ro({ngInjectorDef:Ro});var Yr=(()=>((Yr=Yr||{})[Yr.Default=0]="Default",Yr[Yr.Host=1]="Host",Yr[Yr.Self=2]="Self",Yr[Yr.SkipSelf=4]="SkipSelf",Yr[Yr.Optional=8]="Optional",Yr))();let Jg;function Nu(r){const t=Jg;return Jg=r,t}function Qn(r,t,e){const s=uE(r);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:e&Yr.Optional?null:void 0!==t?t:void Hv(xo(r))}const Ho=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hp={},I0="__NG_DI_FLAG__",Wv="ngTempTokenPath",lE=/\n/gm,zd="__source";let Gp;function Wp(r){const t=Gp;return Gp=r,t}function im(r,t=Yr.Default){if(void 0===Gp)throw new gn(-203,!1);return null===Gp?Qn(r,void 0,t):Gp.get(r,t&Yr.Optional?null:void 0,t)}function Xt(r,t=Yr.Default){return(function tN(){return Jg}()||im)(Gr(r),t)}function Ea(r,t=Yr.Default){return Xt(r,id(t))}function id(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function dE(r){const t=[];for(let e=0;e<r.length;e++){const s=Gr(r[e]);if(Array.isArray(s)){if(0===s.length)throw new gn(900,!1);let l,m=Yr.Default;for(let E=0;E<s.length;E++){const I=s[E],k=rN(I);"number"==typeof k?-1===k?l=I.token:m|=k:l=I}t.push(Xt(l,m))}else t.push(Xt(s))}return t}function Zg(r,t){return r[I0]=t,r.prototype[I0]=t,r}function rN(r){return r[I0]}function Yd(r){return{toString:r}.toString()}var od=(()=>((od=od||{})[od.OnPush=0]="OnPush",od[od.Default=1]="Default",od))(),hu=(()=>{return(r=hu||(hu={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",hu;var r})();const Pu={},$i=[],om=Ro({\u0275cmp:Ro}),hE=Ro({\u0275dir:Ro}),Kv=Ro({\u0275pipe:Ro}),dw=Ro({\u0275mod:Ro}),bl=Ro({\u0275fac:Ro}),zv=Ro({__NG_ELEMENT_ID__:Ro});let Mc=0;function ba(r){return Yd(()=>{const e=!0===r.standalone,s={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===od.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||$i,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||hu.Emulated,id:"c"+Mc++,styles:r.styles||$i,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=r.dependencies,E=r.features;return l.inputs=Yv(r.inputs,s),l.outputs=Yv(r.outputs),E&&E.forEach(I=>I(l)),l.directiveDefs=m?()=>("function"==typeof m?m():m).map(sm).filter(pw):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(xc).filter(pw):null,l})}function sm(r){return Zi(r)||Is(r)}function pw(r){return null!==r}function Hi(r){return Yd(()=>({type:r.type,bootstrap:r.bootstrap||$i,declarations:r.declarations||$i,imports:r.imports||$i,exports:r.exports||$i,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Yv(r,t){if(null==r)return Pu;const e={};for(const s in r)if(r.hasOwnProperty(s)){let l=r[s],m=l;Array.isArray(l)&&(m=l[1],l=l[0]),e[l]=s,t&&(t[l]=m)}return e}const mr=ba;function ra(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Zi(r){return r[om]||null}function Is(r){return r[hE]||null}function xc(r){return r[Kv]||null}function Bc(r){return Array.isArray(r)&&"object"==typeof r[1]}function Sl(r){return Array.isArray(r)&&!0===r[1]}function fE(r){return 0!=(4&r.flags)}function mE(r){return r.componentOffset>-1}function $d(r){return 1==(1&r.flags)}function pu(r){return null!==r.template}function T0(r){return 0!=(256&r[2])}function ia(r,t){return r.hasOwnProperty(bl)?r[bl]:null}class Xv{constructor(t,e,s){this.previousValue=t,this.currentValue=e,this.firstChange=s}isFirstChange(){return this.firstChange}}function za(){return AE}function AE(r){return r.type.prototype.ngOnChanges&&(r.setInput=uN),hm}function hm(){const r=o_(this),t=r?.current;if(t){const e=r.previous;if(e===Pu)r.previous=t;else for(let s in t)e[s]=t[s];r.current=null,this.ngOnChanges(t)}}function uN(r,t,e,s){const l=this.declaredInputs[e],m=o_(r)||function lN(r,t){return r[O0]=t}(r,{previous:Pu,current:null}),E=m.current||(m.current={}),I=m.previous,k=I[l];E[l]=new Xv(k&&k.currentValue,t,I===Pu),r[s]=t}za.ngInherit=!0;const O0="__ngSimpleChanges__";function o_(r){return r[O0]||null}function sa(r){for(;Array.isArray(r);)r=r[0];return r}function $v(r,t){return sa(t[r])}function Ya(r,t){return sa(t[r.index])}function bw(r,t){return r.data[t]}function pm(r,t){return r[t]}function Ca(r,t){const e=t[r];return Bc(e)?e:e[0]}function Hh(r){return 64==(64&r[2])}function Gh(r,t){return null==t?null:r[t]}function Zv(r){r[18]=0}function EE(r,t){r[5]+=t;let e=r,s=r[3];for(;null!==s&&(1===t&&1===e[5]||-1===t&&0===e[5]);)s[5]+=t,e=s,s=s[3]}const ci={lFrame:Am(null),bindingsEnabled:!0};function vs(){return ci.bindingsEnabled}function An(){return ci.lFrame.lView}function ar(){return ci.lFrame.tView}function Ia(r){return ci.lFrame.contextLView=r,r[8]}function Ta(r){return ci.lFrame.contextLView=null,r}function Go(){let r=tA();for(;null!==r&&64===r.type;)r=r.parent;return r}function tA(){return ci.lFrame.currentTNode}function cd(r,t){const e=ci.lFrame;e.currentTNode=r,e.isParent=t}function gm(){return ci.lFrame.isParent}function nA(){ci.lFrame.isParent=!1}function zp(){return ci.lFrame.bindingIndex++}function Bo(r){const t=ci.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function hs(r,t){const e=ci.lFrame;e.bindingIndex=e.bindingRootIndex=r,Yp(t)}function Yp(r){ci.lFrame.currentDirectiveIndex=r}function qp(r){const t=ci.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function L0(){return ci.lFrame.currentQueryIndex}function fc(r){ci.lFrame.currentQueryIndex=r}function B0(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ts(r,t,e){if(e&Yr.SkipSelf){let l=t,m=r;for(;!(l=l.parent,null!==l||e&Yr.Host||(l=B0(m),null===l||(m=m[15],10&l.type))););if(null===l)return!1;t=l,r=m}const s=ci.lFrame=iA();return s.currentTNode=t,s.lView=r,!0}function mc(r){const t=iA(),e=r[1];ci.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function iA(){const r=ci.lFrame,t=null===r?null:r.child;return null===t?Am(r):t}function Am(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function eo(){const r=ci.lFrame;return ci.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const dd=eo;function ki(){const r=eo();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Fc(){return ci.lFrame.selectedIndex}function Em(r){ci.lFrame.selectedIndex=r}function Fo(){const r=ci.lFrame;return bw(r.tView,r.selectedIndex)}function bm(){ci.lFrame.currentNamespace="svg"}function Jp(){!function F0(){ci.lFrame.currentNamespace=null}()}function Do(r,t){for(let e=t.directiveStart,s=t.directiveEnd;e<s;e++){const m=r.data[e].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:I,ngAfterViewInit:k,ngAfterViewChecked:F,ngOnDestroy:ee}=m;E&&(r.contentHooks||(r.contentHooks=[])).push(-e,E),I&&((r.contentHooks||(r.contentHooks=[])).push(e,I),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,I)),k&&(r.viewHooks||(r.viewHooks=[])).push(-e,k),F&&((r.viewHooks||(r.viewHooks=[])).push(e,F),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,F)),null!=ee&&(r.destroyHooks||(r.destroyHooks=[])).push(e,ee)}}function aA(r,t,e){Sm(r,t,3,e)}function Xp(r,t,e,s){(3&r[2])===e&&Sm(r,t,e,s)}function qa(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function Sm(r,t,e,s){const m=s??-1,E=t.length-1;let I=0;for(let k=void 0!==s?65535&r[18]:0;k<E;k++)if("number"==typeof t[k+1]){if(I=t[k],null!=s&&I>=s)break}else t[k]<0&&(r[18]+=65536),(I<m||-1==m)&&(go(r,e,t,k),r[18]=(4294901760&r[18])+k+2),k++}function go(r,t,e,s){const l=e[s]<0,m=e[s+1],I=r[l?-e[s]:e[s]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class ko{constructor(t,e,s){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=s}}function j0(r,t,e){let s=0;for(;s<e.length;){const l=e[s];if("number"==typeof l){if(0!==l)break;s++;const m=e[s++],E=e[s++],I=e[s++];r.setAttribute(t,E,I,m)}else{const m=l,E=e[++s];Ja(m)?r.setProperty(t,m,E):r.setAttribute(t,m,E),s++}}return s}function Or(r){return 3===r||4===r||6===r}function Ja(r){return 64===r.charCodeAt(0)}function hd(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let s=0;s<t.length;s++){const l=t[s];"number"==typeof l?e=l:0===e||Iw(r,e,l,null,-1===e||2===e?t[++s]:null)}}return r}function Iw(r,t,e,s,l){let m=0,E=r.length;if(-1===t)E=-1;else for(;m<r.length;){const I=r[m++];if("number"==typeof I){if(I===t){E=-1;break}if(I>t){E=m-1;break}}}for(;m<r.length;){const I=r[m];if("number"==typeof I)break;if(I===e){if(null===s)return void(null!==l&&(r[m+1]=l));if(s===r[m+1])return void(r[m+2]=l)}m++,null!==s&&m++,null!==l&&m++}-1!==E&&(r.splice(E,0,t),m=E+1),r.splice(m++,0,e),null!==s&&r.splice(m++,0,s),null!==l&&r.splice(m++,0,l)}function CE(r){return-1!==r}function IE(r){return 32767&r}function Wh(r,t){let e=function Bu(r){return r>>16}(r),s=t;for(;e>0;)s=s[15],e--;return s}let a_=!0;function Kh(r){const t=a_;return a_=r,t}let H0=0;const mu={};function Fu(r,t){const e=Im(r,t);if(-1!==e)return e;const s=t[1];s.firstCreatePass&&(r.injectorIndex=t.length,Cm(s.data,r),Cm(t,null),Cm(s.blueprint,null));const l=Ra(r,t),m=r.injectorIndex;if(CE(l)){const E=IE(l),I=Wh(l,t),k=I[1].data;for(let F=0;F<8;F++)t[m+F]=I[E+F]|k[E+F]}return t[m+8]=l,m}function Cm(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Im(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Ra(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,s=null,l=t;for(;null!==l;){if(s=W0(l),null===s)return-1;if(e++,l=l[15],-1!==s.injectorIndex)return s.injectorIndex|e<<16}return-1}function uA(r,t,e){!function Zp(r,t,e){let s;"string"==typeof e?s=e.charCodeAt(0)||0:e.hasOwnProperty(zv)&&(s=e[zv]),null==s&&(s=e[zv]=H0++);const l=255&s;t.data[r+(l>>5)]|=1<<l}(r,t,e)}function Tm(r,t,e){if(e&Yr.Optional||void 0!==r)return r;Hv()}function G0(r,t,e,s){if(e&Yr.Optional&&void 0===s&&(s=null),0==(e&(Yr.Self|Yr.Host))){const l=r[9],m=Nu(void 0);try{return l?l.get(t,s,e&Yr.Optional):Qn(t,s,e&Yr.Optional)}finally{Nu(m)}}return Tm(s,0,e)}function Vu(r,t,e,s=Yr.Default,l){if(null!==r){if(1024&t[2]){const E=function lA(r,t,e,s,l){let m=r,E=t;for(;null!==m&&null!==E&&1024&E[2]&&!(256&E[2]);){const I=Tw(m,E,e,s|Yr.Self,mu);if(I!==mu)return I;let k=m.parent;if(!k){const F=E[21];if(F){const ee=F.get(e,mu,s);if(ee!==mu)return ee}k=W0(E),E=E[15]}m=k}return l}(r,t,e,s,mu);if(E!==mu)return E}const m=Tw(r,t,e,s,mu);if(m!==mu)return m}return G0(t,e,s,l)}function Tw(r,t,e,s,l){const m=function fd(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(zv)?r[zv]:void 0;return"number"==typeof t?t>=0?255&t:qr:t}(e);if("function"==typeof m){if(!Ts(t,r,s))return s&Yr.Host?Tm(l,0,s):G0(t,e,s,l);try{const E=m(s);if(null!=E||s&Yr.Optional)return E;Hv()}finally{dd()}}else if("number"==typeof m){let E=null,I=Im(r,t),k=-1,F=s&Yr.Host?t[16][6]:null;for((-1===I||s&Yr.SkipSelf)&&(k=-1===I?Ra(r,t):t[I+8],-1!==k&&Rw(s,!1)?(E=t[1],I=IE(k),t=Wh(k,t)):I=-1);-1!==I;){const ee=t[1];if(wm(m,I,ee.data)){const me=ww(I,t,e,E,s,F);if(me!==mu)return me}k=t[I+8],-1!==k&&Rw(s,t[1].data[I+8]===F)&&wm(m,I,t)?(E=ee,I=IE(k),t=Wh(k,t)):I=-1}}return l}function ww(r,t,e,s,l,m){const E=t[1],I=E.data[r+8],ee=pd(I,E,e,null==s?mE(I)&&a_:s!=E&&0!=(3&I.type),l&Yr.Host&&m===I);return null!==ee?ef(t,E,ee,I):mu}function pd(r,t,e,s,l){const m=r.providerIndexes,E=t.data,I=1048575&m,k=r.directiveStart,ee=m>>20,Le=l?I+ee:r.directiveEnd;for(let We=s?I:I+ee;We<Le;We++){const it=E[We];if(We<k&&e===it||We>=k&&it.type===e)return We}if(l){const We=E[k];if(We&&pu(We)&&We.type===e)return k}return null}function ef(r,t,e,s){let l=r[e];const m=t.data;if(function mN(r){return r instanceof ko}(l)){const E=l;E.resolving&&function cE(r,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new gn(-200,`Circular dependency in DI detected for ${r}${e}`)}(function mo(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():si(r)}(m[e]));const I=Kh(E.canSeeViewProviders);E.resolving=!0;const k=E.injectImpl?Nu(E.injectImpl):null;Ts(r,s,Yr.Default);try{l=r[e]=E.factory(void 0,m,r,s),t.firstCreatePass&&e>=s.directiveStart&&function U0(r,t,e){const{ngOnChanges:s,ngOnInit:l,ngDoCheck:m}=t.type.prototype;if(s){const E=AE(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,E),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,E)}l&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,l),m&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,m),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,m))}(e,m[e],t)}finally{null!==k&&Nu(k),Kh(I),E.resolving=!1,dd()}}return l}function wm(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Rw(r,t){return!(r&Yr.Self||r&Yr.Host&&t)}class cr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,s){return Vu(this._tNode,this._lView,t,id(s),e)}}function qr(){return new cr(Go(),An())}function _o(r){return Yd(()=>{const t=r.prototype.constructor,e=t[bl]||TE(t),s=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==s;){const m=l[bl]||TE(l);if(m&&m!==e)return m;l=Object.getPrototypeOf(l)}return m=>new m})}function TE(r){return rm(r)?()=>{const t=TE(Gr(r));return t&&t()}:ia(r)}function W0(r){const t=r[1],e=t.type;return 2===e?t.declTNode:1===e?r[6]:null}function zh(r){return function Uu(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const s=e.length;let l=0;for(;l<s;){const m=e[l];if(Or(m))break;if(0===m)l+=2;else if("number"==typeof m)for(l++;l<s&&"string"==typeof e[l];)l++;else{if(m===t)return e[l+1];l+=2}}}return null}(Go(),r)}const ju="__parameters__";function Ii(r,t,e){return Yd(()=>{const s=function nf(r){return function(...e){if(r){const s=r(...e);for(const l in s)this[l]=s[l]}}}(t);function l(...m){if(this instanceof l)return s.apply(this,m),this;const E=new l(...m);return I.annotation=E,I;function I(k,F,ee){const me=k.hasOwnProperty(ju)?k[ju]:Object.defineProperty(k,ju,{value:[]})[ju];for(;me.length<=ee;)me.push(null);return(me[ee]=me[ee]||[]).push(E),k}}return e&&(l.prototype=Object.create(e.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class Fn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=vr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _c(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let s=r[e];Array.isArray(s)?(t===r&&(t=r.slice(0,e)),_c(s,t)):t!==r&&t.push(s)}return t}function Yh(r,t){r.forEach(e=>Array.isArray(e)?Yh(e,t):t(e))}function kE(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Tl(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function qh(r,t){const e=[];for(let s=0;s<r;s++)e.push(t);return e}function kr(r,t,e){let s=ur(r,t);return s>=0?r[1|s]=e:(s=~s,function Rm(r,t,e,s){let l=r.length;if(l==t)r.push(e,s);else if(1===l)r.push(s,r[0]),r[0]=e;else{for(l--,r.push(r[l-1],r[l]);l>t;)r[l]=r[l-2],l--;r[t]=e,r[t+1]=s}}(r,s,t,e)),s}function Om(r,t){const e=ur(r,t);if(e>=0)return r[1|e]}function ur(r,t){return function ui(r,t,e){let s=0,l=r.length>>e;for(;l!==s;){const m=s+(l-s>>1),E=r[m<<e];if(t===E)return m<<e;E>t?l=m:s=m+1}return~(l<<e)}(r,t,1)}const fi=Zg(Ii("Optional"),8),d_=Zg(Ii("SkipSelf"),4);var Vc=(()=>((Vc=Vc||{})[Vc.Important=1]="Important",Vc[Vc.DashCase=2]="DashCase",Vc))();const KE=new Map;let aC=0;const gA="__ngContext__";function zs(r,t){Bc(t)?(r[gA]=t[20],function bo(r){KE.set(r[20],r)}(t)):r[gA]=t}function gd(r,t){return undefined(r,t)}function th(r){const t=r[3];return Sl(t)?t[3]:t}function JE(r){return XE(r[13])}function g_(r){return XE(r[4])}function XE(r){for(;null!==r&&!Sl(r);)r=r[4];return r}function ep(r,t,e,s,l){if(null!=s){let m,E=!1;Sl(s)?m=s:Bc(s)&&(E=!0,s=s[0]);const I=sa(s);0===r&&null!==e?null==l?pf(t,e,I):_d(t,e,I,l||null,!0):1===r&&null!==e?_d(t,e,I,l||null,!0):2===r?function Jw(r,t,e){const s=EA(r,t);s&&function zw(r,t,e,s){r.removeChild(t,e,s)}(r,s,t,e)}(t,I,E):3===r&&t.destroyNode(I),null!=m&&function nb(r,t,e,s,l){const m=e[7];m!==sa(e)&&ep(t,r,s,m,l);for(let I=10;I<e.length;I++){const k=e[I];eb(k[1],k,r,t,s,m)}}(t,r,m,e,l)}}function Ol(r,t,e){return r.createElement(t,e)}function Gw(r,t){const e=r[9],s=e.indexOf(t),l=t[3];512&t[2]&&(t[2]&=-513,EE(l,-1)),e.splice(s,1)}function kl(r,t){if(r.length<=10)return;const e=10+t,s=r[e];if(s){const l=s[17];null!==l&&l!==r&&Gw(l,s),t>0&&(r[e-1][4]=s[4]);const m=Tl(r,10+t);!function KB(r,t){eb(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(s[1],s);const E=m[19];null!==E&&E.detachView(m[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function Pm(r,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&eb(r,t,e,3,null,null),function Qw(r){let t=r[13];if(!t)return lC(r[1],r);for(;t;){let e=null;if(Bc(t))e=t[13];else{const s=t[10];s&&(e=s)}if(!e){for(;t&&!t[4]&&t!==r;)Bc(t)&&lC(t[1],t),t=t[3];null===t&&(t=r),Bc(t)&&lC(t[1],t),e=t&&t[4]}t=e}}(t)}}function lC(r,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function Kw(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let s=0;s<e.length;s+=2){const l=t[e[s]];if(!(l instanceof ko)){const m=e[s+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const I=l[m[E]],k=m[E+1];try{k.call(I)}finally{}}else try{m.call(l)}finally{}}}}(r,t),function Ww(r,t){const e=r.cleanup,s=t[7];let l=-1;if(null!==e)for(let m=0;m<e.length-1;m+=2)if("string"==typeof e[m]){const E=e[m+3];E>=0?s[l=E]():s[l=-E].unsubscribe(),m+=2}else{const E=s[l=e[m+1]];e[m].call(E)}if(null!==s){for(let m=l+1;m<s.length;m++)(0,s[m])();t[7]=null}}(r,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Sl(t[3])){e!==t[3]&&Gw(e,t);const s=t[19];null!==s&&s.detachView(r)}!function fA(r){KE.delete(r[20])}(t)}}function AA(r,t,e){return function $E(r,t,e){let s=t;for(;null!==s&&40&s.type;)s=(t=s).parent;if(null===s)return e[0];{const{componentOffset:l}=s;if(l>-1){const{encapsulation:m}=r.data[s.directiveStart+l];if(m===hu.None||m===hu.Emulated)return null}return Ya(s,e)}}(r,t.parent,e)}function _d(r,t,e,s,l){r.insertBefore(t,e,s,l)}function pf(r,t,e){r.appendChild(t,e)}function ZE(r,t,e,s,l){null!==s?_d(r,t,e,s,l):pf(r,t,e)}function EA(r,t){return r.parentNode(t)}function EN(r,t,e){return SN(r,t,e)}let bA,Gu,SN=function bN(r,t,e){return 40&r.type?Ya(r,e):null};function hC(r,t,e,s){const l=AA(r,s,t),m=t[11],I=EN(s.parent||t[6],s,t);if(null!=l)if(Array.isArray(e))for(let k=0;k<e.length;k++)ZE(m,l,e[k],I,!1);else ZE(m,l,e,I,!1)}function A_(r,t){if(null!==t){const e=t.type;if(3&e)return Ya(t,r);if(4&e)return qw(-1,r[t.index]);if(8&e){const s=t.child;if(null!==s)return A_(r,s);{const l=r[t.index];return Sl(l)?qw(-1,l):sa(l)}}if(32&e)return gd(t,r)()||sa(r[t.index]);{const s=CN(r,t);return null!==s?Array.isArray(s)?s[0]:A_(th(r[16]),s):A_(r,t.next)}}return null}function CN(r,t){return null!==t?r[16][6].projection[t.projection]:null}function qw(r,t){const e=10+r+1;if(e<t.length){const s=t[e],l=s[1].firstChild;if(null!==l)return A_(s,l)}return t[7]}function nh(r,t,e,s,l,m,E){for(;null!=e;){const I=s[e.index],k=e.type;if(E&&0===t&&(I&&zs(sa(I),s),e.flags|=2),32!=(32&e.flags))if(8&k)nh(r,t,e.child,s,l,m,!1),ep(t,r,l,I,m);else if(32&k){const F=gd(e,s);let ee;for(;ee=F();)ep(t,r,l,ee,m);ep(t,r,l,I,m)}else 16&k?tb(r,t,s,e,l,m):ep(t,r,l,I,m);e=E?e.projectionNext:e.next}}function eb(r,t,e,s,l,m){nh(e,s,r.firstChild,t,l,m,!1)}function tb(r,t,e,s,l,m){const E=e[16],k=E[6].projection[s.projection];if(Array.isArray(k))for(let F=0;F<k.length;F++)ep(t,r,l,k[F],m);else nh(r,t,k,E[3],l,m,!0)}function Mm(r,t,e){""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function ib(r,t,e){const{mergedAttrs:s,classes:l,styles:m}=e;null!==s&&j0(r,t,s),null!==l&&Mm(r,t,l),null!==m&&function pC(r,t,e){r.setAttribute(t,"style",e)}(r,t,m)}function vd(r){return function ob(){if(void 0===bA&&(bA=null,Ho.trustedTypes))try{bA=Ho.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return bA}()?.createHTML(r)||r}class Ad{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zg})`}}class Zw extends Ad{getTypeName(){return"HTML"}}class eR extends Ad{getTypeName(){return"Style"}}class AC extends Ad{getTypeName(){return"Script"}}class tR extends Ad{getTypeName(){return"URL"}}class yC extends Ad{getTypeName(){return"ResourceURL"}}function Wc(r){return r instanceof Ad?r.changingThisBreaksApplicationSecurity:r}function Kc(r,t){const e=function mf(r){return r instanceof Ad&&r.getTypeName()||null}(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${zg})`)}return e===t}class rR{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(vd(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class iR{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const s=this.inertDocument.createElement("body");e.appendChild(s)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=vd(t),e;const s=this.inertDocument.createElement("body");return s.innerHTML=vd(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(s),s}stripCustomNsAttrs(t){const e=t.attributes;for(let l=e.length-1;0<l;l--){const E=e.item(l).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&t.removeAttribute(E)}let s=t.firstChild;for(;s;)s.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(s),s=s.nextSibling}}const oR=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function SA(r){return(r=String(r)).match(oR)?r:"unsafe:"+r}function rh(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function np(...r){const t={};for(const e of r)for(const s in e)e.hasOwnProperty(s)&&(t[s]=!0);return t}const gf=rh("area,br,col,hr,img,wbr"),CA=rh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),IA=rh("rp,rt"),TA=np(gf,np(CA,rh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),np(IA,rh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),np(IA,CA)),cb=rh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nl=np(cb,rh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sR=rh("script,style,template");class aR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,s=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?s=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,s&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let l=this.checkClobberedElement(e,e.nextSibling);if(l){e=l;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!TA.hasOwnProperty(e))return this.sanitizedSomething=!0,!sR.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const s=t.attributes;for(let l=0;l<s.length;l++){const m=s.item(l),E=m.name,I=E.toLowerCase();if(!Nl.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let k=m.value;cb[I]&&(k=SA(k)),this.buf.push(" ",E,'="',wC(k),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();TA.hasOwnProperty(e)&&!gf.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(wC(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const TC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,RN=/([^\#-~ |!])/g;function wC(r){return r.replace(/&/g,"&amp;").replace(TC,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(RN,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let E_;function RC(r,t){let e=null;try{E_=E_||function bC(r){const t=new iR(r);return function SC(){try{return!!(new window.DOMParser).parseFromString(vd(""),"text/html")}catch{return!1}}()?new rR(t):t}(r);let s=t?String(t):"";e=E_.getInertBodyElement(s);let l=5,m=s;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,s=m,m=e.innerHTML,e=E_.getInertBodyElement(s)}while(s!==m);return vd((new aR).sanitizeChildren(xm(e)||e))}finally{if(e){const s=xm(e)||e;for(;s.firstChild;)s.removeChild(s.firstChild)}}}function xm(r){return"content"in r&&function RA(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var to=(()=>((to=to||{})[to.NONE=0]="NONE",to[to.HTML=1]="HTML",to[to.STYLE=2]="STYLE",to[to.SCRIPT=3]="SCRIPT",to[to.URL=4]="URL",to[to.RESOURCE_URL=5]="RESOURCE_URL",to))();const lb=new Fn("ENVIRONMENT_INITIALIZER"),db=new Fn("INJECTOR",-1),ca=new Fn("INJECTOR_DEF_TYPES");class yd{get(t,e=Hp){if(e===Hp){const s=new Error(`NullInjectorError: No provider for ${xo(t)}!`);throw s.name="NullInjectorError",s}return e}}function Ed(...r){return{\u0275providers:ih(0,r),\u0275fromNgModule:!0}}function ih(r,...t){const e=[],s=new Set;let l;return Yh(t,m=>{const E=m;Fm(E,e,[],s)&&(l||(l=[]),l.push(E))}),void 0!==l&&ip(l,e),e}function ip(r,t){for(let e=0;e<r.length;e++){const{providers:l}=r[e];OA(l,m=>{t.push(m)})}}function Fm(r,t,e,s){if(!(r=Gr(r)))return!1;let l=null,m=Yg(r);const E=!m&&Zi(r);if(m||E){if(E&&!E.standalone)return!1;l=r}else{const k=r.ngModule;if(m=Yg(k),!m)return!1;l=k}const I=s.has(l);if(E){if(I)return!1;if(s.add(l),E.dependencies){const k="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const F of k)Fm(F,t,e,s)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let F;s.add(l);try{Yh(m.imports,ee=>{Fm(ee,t,e,s)&&(F||(F=[]),F.push(ee))})}finally{}void 0!==F&&ip(F,t)}if(!I){const F=ia(l)||(()=>new l);t.push({provide:l,useFactory:F,deps:$i},{provide:ca,useValue:l,multi:!0},{provide:lb,useValue:()=>Xt(l),multi:!0})}const k=m.providers;null==k||I||OA(k,ee=>{t.push(ee)})}}return l!==r&&void 0!==r.providers}function OA(r,t){for(let e of r)ea(e)&&(e=e.\u0275providers),Array.isArray(e)?OA(e,t):t(e)}const lR=Ro({provide:String,useValue:Ro});function DA(r){return null!==r&&"object"==typeof r&&lR in r}function op(r){return"function"==typeof r}const I_=new Fn("Set Injector scope."),T_={},ap={};let pb;function w_(){return void 0===pb&&(pb=new yd),pb}class oh{}class cp extends oh{constructor(t,e,s,l){super(),this.parent=e,this.source=s,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,NA(t,E=>this.processProvider(E)),this.records.set(db,ts(void 0,this)),l.has("environment")&&this.records.set(oh,ts(void 0,this));const m=this.records.get(I_);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(ca.multi,$i,Yr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Wp(this),s=Nu(void 0);try{return t()}finally{Wp(e),Nu(s)}}get(t,e=Hp,s=Yr.Default){this.assertNotDestroyed(),s=id(s);const l=Wp(this),m=Nu(void 0);try{if(!(s&Yr.SkipSelf)){let I=this.records.get(t);if(void 0===I){const k=function _b(r){return"function"==typeof r||"object"==typeof r&&r instanceof Fn}(t)&&uE(t);I=k&&this.injectableDefInScope(k)?ts(fb(t),T_):null,this.records.set(t,I)}if(null!=I)return this.hydrate(t,I)}return(s&Yr.Self?w_():this.parent).get(t,e=s&Yr.Optional&&e===Hp?null:e)}catch(E){if("NullInjectorError"===E.name){if((E[Wv]=E[Wv]||[]).unshift(xo(t)),l)throw E;return function e_(r,t,e,s){const l=r[Wv];throw t[zd]&&l.unshift(t[zd]),r.message=function El(r,t,e,s=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=xo(t);if(Array.isArray(t))l=t.map(xo).join(" -> ");else if("object"==typeof t){let m=[];for(let E in t)if(t.hasOwnProperty(E)){let I=t[E];m.push(E+":"+("string"==typeof I?JSON.stringify(I):xo(I)))}l=`{${m.join(", ")}}`}return`${e}${s?"("+s+")":""}[${l}]: ${r.replace(lE,"\n  ")}`}("\n"+r.message,l,e,s),r.ngTokenPath=l,r[Wv]=null,r}(E,t,"R3InjectorError",this.source)}throw E}finally{Nu(m),Wp(l)}}resolveInjectorInitializers(){const t=Wp(this),e=Nu(void 0);try{const s=this.get(lb.multi,$i,Yr.Self);for(const l of s)l()}finally{Wp(t),Nu(e)}}toString(){const t=[],e=this.records;for(const s of e.keys())t.push(xo(s));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gn(205,!1)}processProvider(t){let e=op(t=Gr(t))?t:Gr(t&&t.provide);const s=function mb(r){return DA(r)?ts(void 0,r.useValue):ts(kA(r),T_)}(t);if(op(t)||!0!==t.multi)this.records.get(e);else{let l=this.records.get(e);l||(l=ts(void 0,T_,!0),l.factory=()=>dE(l.multi),this.records.set(e,l)),e=t,l.multi.push(t)}this.records.set(e,s)}hydrate(t,e){return e.value===T_&&(e.value=ap,e.value=e.factory()),"object"==typeof e.value&&e.value&&function DC(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Gr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function fb(r){const t=uE(r),e=null!==t?t.factory:ia(r);if(null!==e)return e;if(r instanceof Fn)throw new gn(204,!1);if(r instanceof Function)return function R_(r){const t=r.length;if(t>0)throw qh(t,"?"),new gn(204,!1);const e=function yl(r){const t=r&&(r[qg]||r[lr]);if(t){const e=function rd(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new gn(204,!1)}function kA(r,t,e){let s;if(op(r)){const l=Gr(r);return ia(l)||fb(l)}if(DA(r))s=()=>Gr(r.useValue);else if(function _f(r){return!(!r||!r.useFactory)}(r))s=()=>r.useFactory(...dE(r.deps||[]));else if(function hb(r){return!(!r||!r.useExisting)}(r))s=()=>Xt(Gr(r.useExisting));else{const l=Gr(r&&(r.useClass||r.provide));if(!function gb(r){return!!r.deps}(r))return ia(l)||fb(l);s=()=>new l(...dE(r.deps))}return s}function ts(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function NA(r,t){for(const e of r)Array.isArray(e)?NA(e,t):e&&ea(e)?NA(e.\u0275providers,t):t(e)}class kC{}class vb{}class PC{resolveComponentFactory(t){throw function sh(r){const t=Error(`No component factory found for ${xo(r)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=r,t}(t)}}let O_=(()=>{class r{}return r.NULL=new PC,r})();function DN(){return vf(Go(),An())}function vf(r,t){return new Ni(Ya(r,t))}let Ni=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=DN,r})();function dR(r){return r instanceof Ni?r.nativeElement:r}class ua{}let bd=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function MC(){const r=An(),e=Ca(Go().index,r);return(Bc(e)?e:r)[11]}(),r})(),hR=(()=>{class r{}return r.\u0275prov=vr({token:r,providedIn:"root",factory:()=>null}),r})();class D_{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const yb=new D_("15.0.2"),Ku={};function Eb(r){return r.ngOriginalError}class Sd{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Eb(t);for(;e&&Eb(e);)e=Eb(e);return e||null}}function Da(r){return r.ownerDocument.defaultView}function vR(r,t,e){let s=r.length;for(;;){const l=r.indexOf(t,e);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const m=t.length;if(l+m===s||r.charCodeAt(l+m)<=32)return l}e=l+1}}const AR="ng-template";function PN(r,t,e){let s=0;for(;s<r.length;){let l=r[s++];if(e&&"class"===l){if(l=r[s],-1!==vR(l.toLowerCase(),t,0))return!0}else if(1===l){for(;s<r.length&&"string"==typeof(l=r[s++]);)if(l.toLowerCase()===t)return!0;return!1}}return!1}function yR(r){return 4===r.type&&r.value!==AR}function MN(r,t,e){return t===(4!==r.type||e?r.value:AR)}function xN(r,t,e){let s=4;const l=r.attrs||[],m=function BN(r){for(let t=0;t<r.length;t++)if(Or(r[t]))return t;return r.length}(l);let E=!1;for(let I=0;I<t.length;I++){const k=t[I];if("number"!=typeof k){if(!E)if(4&s){if(s=2|1&s,""!==k&&!MN(r,k,e)||""===k&&1===t.length){if(_u(s))return!1;E=!0}}else{const F=8&s?k:t[++I];if(8&s&&null!==r.attrs){if(!PN(r.attrs,F,e)){if(_u(s))return!1;E=!0}continue}const me=LN(8&s?"class":k,l,yR(r),e);if(-1===me){if(_u(s))return!1;E=!0;continue}if(""!==F){let Le;Le=me>m?"":l[me+1].toLowerCase();const We=8&s?Le:null;if(We&&-1!==vR(We,F,0)||2&s&&F!==Le){if(_u(s))return!1;E=!0}}}}else{if(!E&&!_u(s)&&!_u(k))return!1;if(E&&_u(k))continue;E=!1,s=k|1&s}}return _u(s)||E}function _u(r){return 0==(1&r)}function LN(r,t,e,s){if(null===t)return-1;let l=0;if(s||!e){let m=!1;for(;l<t.length;){const E=t[l];if(E===r)return l;if(3===E||6===E)m=!0;else{if(1===E||2===E){let I=t[++l];for(;"string"==typeof I;)I=t[++l];continue}if(4===E)break;if(0===E){l+=4;continue}}l+=m?1:2}return-1}return function xC(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const s=r[e];if("number"==typeof s)return-1;if(s===t)return e;e++}return-1}(t,r)}function Af(r,t,e=!1){for(let s=0;s<t.length;s++)if(xN(r,t[s],e))return!0;return!1}function bR(r,t){e:for(let e=0;e<t.length;e++){const s=t[e];if(r.length===s.length){for(let l=0;l<r.length;l++)if(r[l]!==s[l])continue e;return!0}}return!1}function LC(r,t){return r?":not("+t.trim()+")":t}function BC(r){let t=r[0],e=1,s=2,l="",m=!1;for(;e<r.length;){let E=r[e];if("string"==typeof E)if(2&s){const I=r[++e];l+="["+E+(I.length>0?'="'+I+'"':"")+"]"}else 8&s?l+="."+E:4&s&&(l+=" "+E);else""!==l&&!_u(E)&&(t+=LC(m,l),l=""),s=E,m=m||!_u(s);e++}return""!==l&&(t+=LC(m,l)),t}const ei={};function En(r){UC(ar(),An(),Fc()+r,!1)}function UC(r,t,e,s){if(!s)if(3==(3&t[2])){const m=r.preOrderCheckHooks;null!==m&&aA(t,m,e)}else{const m=r.preOrderHooks;null!==m&&Xp(t,m,0,e)}Em(e)}function Cb(r,t=null,e=null,s){const l=TR(r,t,e,s);return l.resolveInjectorInitializers(),l}function TR(r,t=null,e=null,s,l=new Set){const m=[e||$i,Ed(r)];return s=s||("object"==typeof r?void 0:xo(r)),new cp(m,t||w_(),s||null,l)}let yc=(()=>{class r{static create(e,s){if(Array.isArray(e))return Cb({name:""},s,e,"");{const l=e.name??"";return Cb({name:l},e.parent,e.providers,l)}}}return r.THROW_IF_NOT_FOUND=Hp,r.NULL=new yd,r.\u0275prov=vr({token:r,providedIn:"any",factory:()=>Xt(db)}),r.__NG_ELEMENT_ID__=-1,r})();function gt(r,t=Yr.Default){const e=An();return null===e?Xt(r,t):Vu(Go(),e,Gr(r),t)}function XC(){throw new Error("invalid")}function Hm(r,t){const e=r.contentQueries;if(null!==e)for(let s=0;s<e.length;s+=2){const l=e[s],m=e[s+1];if(-1!==m){const E=r.data[m];fc(l),E.contentQueries(2,t[m],m)}}}function Gm(r,t,e,s,l,m,E,I,k,F,ee){const me=t.blueprint.slice();return me[0]=l,me[2]=76|s,(null!==ee||r&&1024&r[2])&&(me[2]|=1024),Zv(me),me[3]=me[15]=r,me[8]=e,me[10]=E||r&&r[10],me[11]=I||r&&r[11],me[12]=k||r&&r[12]||null,me[9]=F||r&&r[9]||null,me[6]=m,me[20]=function Lw(){return aC++}(),me[21]=ee,me[16]=2==t.type?r[16]:me,me}function yf(r,t,e,s,l){let m=r.data[t];if(null===m)m=function LA(r,t,e,s,l){const m=tA(),E=gm(),k=r.data[t]=function Db(r,t,e,s,l,m){return{type:e,index:s,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,e,t,s,l);return null===r.firstChild&&(r.firstChild=k),null!==m&&(E?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k)),k}(r,t,e,s,l),function vm(){return ci.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=e,m.value=s,m.attrs=l;const E=function mm(){const r=ci.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return cd(m,!0),m}function Wm(r,t,e,s){if(0===e)return-1;const l=t.length;for(let m=0;m<e;m++)t.push(s),r.blueprint.push(s),r.data.push(null);return l}function x_(r,t,e){mc(t);try{const s=r.viewQuery;null!==s&&$n(1,s,e);const l=r.template;null!==l&&qu(r,t,l,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Hm(r,t),r.staticViewQueries&&$n(2,r.viewQuery,e);const m=r.components;null!==m&&function Rb(r,t){for(let e=0;e<t.length;e++)cI(r,t[e])}(t,m)}catch(s){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),s}finally{t[2]&=-5,ki()}}function ah(r,t,e,s){const l=t[2];if(128!=(128&l)){mc(t);try{Zv(t),function _m(r){return ci.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&qu(r,t,e,2,s);const E=3==(3&l);if(E){const F=r.preOrderCheckHooks;null!==F&&aA(t,F,null)}else{const F=r.preOrderHooks;null!==F&&Xp(t,F,0,null),qa(t,0)}if(function KN(r){for(let t=JE(r);null!==t;t=g_(t)){if(!t[2])continue;const e=t[9];for(let s=0;s<e.length;s++){const l=e[s],m=l[3];0==(512&l[2])&&EE(m,1),l[2]|=512}}}(t),function VR(r){for(let t=JE(r);null!==t;t=g_(t))for(let e=10;e<t.length;e++){const s=t[e],l=s[1];Hh(s)&&ah(l,s,l.template,s[8])}}(t),null!==r.contentQueries&&Hm(r,t),E){const F=r.contentCheckHooks;null!==F&&aA(t,F)}else{const F=r.contentHooks;null!==F&&Xp(t,F,1),qa(t,1)}!function M_(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let s=0;s<e.length;s++){const l=e[s];if(l<0)Em(~l);else{const m=l,E=e[++s],I=e[++s];hs(E,m),I(2,t[m])}}}finally{Em(-1)}}(r,t);const I=r.components;null!==I&&function xA(r,t){for(let e=0;e<t.length;e++)U_(r,t[e])}(t,I);const k=r.viewQuery;if(null!==k&&$n(2,k,s),E){const F=r.viewCheckHooks;null!==F&&aA(t,F)}else{const F=r.viewHooks;null!==F&&Xp(t,F,2),qa(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,EE(t[3],-1))}finally{ki()}}}function qu(r,t,e,s,l){const m=Fc(),E=2&s;try{Em(-1),E&&t.length>22&&UC(r,t,22,!1),e(s,l)}finally{Em(m)}}function Ob(r,t,e){if(fE(t)){const l=t.directiveEnd;for(let m=t.directiveStart;m<l;m++){const E=r.data[m];E.contentQueries&&E.contentQueries(1,e[m],m)}}}function $C(r,t,e){!vs()||(function BA(r,t,e,s){const l=e.directiveStart,m=e.directiveEnd;r.firstCreatePass||Fu(e,t),zs(s,t);const E=e.initialInputs;for(let I=l;I<m;I++){const k=r.data[I],F=pu(k);F&&sI(t,e,k);const ee=ef(t,r,I,e);zs(ee,t),null!==E&&aI(0,I-l,ee,k,0,E),F&&(Ca(e.index,t)[8]=ee)}}(r,t,e,Ya(e,t)),64==(64&e.flags)&&B_(r,t,e))}function Ef(r,t,e=Ya){const s=t.localNames;if(null!==s){let l=t.index+1;for(let m=0;m<s.length;m+=2){const E=s[m+1],I=-1===E?e(t,r):r[E];r[l++]=I}}}function Km(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=ZC(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function ZC(r,t,e,s,l,m,E,I,k,F){const ee=22+s,me=ee+l,Le=function eI(r,t){const e=[];for(let s=0;s<t;s++)e.push(s<r?null:ei);return e}(ee,me),We="function"==typeof F?F():F;return Le[1]={type:r,blueprint:Le,template:e,queries:null,viewQuery:I,declTNode:t,data:Le.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:k,consts:We,incompleteFirstPass:!1}}function PR(r,t,e,s){const l=Na(t);null===e?l.push(s):(l.push(e),r.firstCreatePass&&jr(r).push(s,l.length-1))}function kb(r,t,e,s){for(let l in r)if(r.hasOwnProperty(l)){e=null===e?{}:e;const m=r[l];null===s?MR(e,t,l,m):s.hasOwnProperty(l)&&MR(e,t,s[l],m)}return e}function MR(r,t,e,s){r.hasOwnProperty(e)?r[e].push(t,s):r[e]=[t,s]}function Jc(r,t,e,s,l,m,E,I){const k=Ya(t,e);let ee,F=t.inputs;!I&&null!=F&&(ee=F[s])?(UA(r,e,ee,s,l),mE(t)&&L_(e,t.index)):3&t.type&&(s=function nI(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(s),l=null!=E?E(l,t.value||"",s):l,m.setProperty(k,s,l))}function L_(r,t){const e=Ca(t,r);16&e[2]||(e[2]|=32)}function lp(r,t,e,s){let l=!1;if(vs()){const m=null===s?null:{"":-1},E=function GN(r,t){const e=r.directiveRegistry;let s=null,l=null;if(e)for(let m=0;m<e.length;m++){const E=e[m];if(Af(t,E.selectors,!1))if(s||(s=[]),pu(E))if(null!==E.findHostDirectiveDefs){const I=[];l=l||new Map,E.findHostDirectiveDefs(E,I,l),s.unshift(...I,E),Pb(r,t,I.length)}else s.unshift(E),Pb(r,t,0);else l=l||new Map,E.findHostDirectiveDefs?.(E,s,l),s.push(E)}return null===s?null:[s,l]}(r,e);let I,k;null===E?I=k=null:[I,k]=E,null!==I&&(l=!0,Nb(r,t,e,I,m,k)),m&&function WN(r,t,e){if(t){const s=r.localNames=[];for(let l=0;l<t.length;l+=2){const m=e[t[l+1]];if(null==m)throw new gn(-301,!1);s.push(t[l],m)}}}(e,s,m)}return e.mergedAttrs=hd(e.mergedAttrs,e.attrs),l}function Nb(r,t,e,s,l,m){for(let F=0;F<s.length;F++)uA(Fu(e,t),r,s[F].type);!function iI(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}(e,r.data.length,s.length);for(let F=0;F<s.length;F++){const ee=s[F];ee.providersResolver&&ee.providersResolver(ee)}let E=!1,I=!1,k=Wm(r,t,s.length,null);for(let F=0;F<s.length;F++){const ee=s[F];e.mergedAttrs=hd(e.mergedAttrs,ee.hostAttrs),oI(r,e,t,k,ee),UR(k,ee,l),null!==ee.contentQueries&&(e.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(e.flags|=64);const me=ee.type.prototype;!E&&(me.ngOnChanges||me.ngOnInit||me.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),E=!0),!I&&(me.ngOnChanges||me.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),I=!0),k++}!function xR(r,t,e){const l=t.directiveEnd,m=r.data,E=t.attrs,I=[];let k=null,F=null;for(let ee=t.directiveStart;ee<l;ee++){const me=m[ee],Le=e?e.get(me):null,it=Le?Le.outputs:null;k=kb(me.inputs,ee,k,Le?Le.inputs:null),F=kb(me.outputs,ee,F,it);const bt=null===k||null===E||yR(t)?null:bf(k,ee,E);I.push(bt)}null!==k&&(k.hasOwnProperty("class")&&(t.flags|=8),k.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=I,t.inputs=k,t.outputs=F}(r,e,m)}function B_(r,t,e){const s=e.directiveStart,l=e.directiveEnd,m=e.index,E=function x0(){return ci.lFrame.currentDirectiveIndex}();try{Em(m);for(let I=s;I<l;I++){const k=r.data[I],F=t[I];Yp(I),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&FR(k,F)}}finally{Em(-1),Yp(E)}}function FR(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function Pb(r,t,e){t.componentOffset=e,(r.components||(r.components=[])).push(t.index)}function UR(r,t,e){if(e){if(t.exportAs)for(let s=0;s<t.exportAs.length;s++)e[t.exportAs[s]]=r;pu(t)&&(e[""]=r)}}function oI(r,t,e,s,l){r.data[s]=l;const m=l.factory||(l.factory=ia(l.type)),E=new ko(m,pu(l),gt);r.blueprint[s]=E,e[s]=E,function rI(r,t,e,s,l){const m=l.hostBindings;if(m){let E=r.hostBindingOpCodes;null===E&&(E=r.hostBindingOpCodes=[]);const I=~t.index;(function BR(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(E)!=I&&E.push(I),E.push(e,s,m)}}(r,t,s,Wm(r,e,l.hostVars,ei),l)}function sI(r,t,e){const s=Ya(t,r),l=Km(e),m=r[10],E=br(r,Gm(r,l,null,e.onPush?32:16,s,t,m,m.createRenderer(s,e),null,null,null));r[t.index]=E}function xl(r,t,e,s,l,m){const E=Ya(r,t);!function F_(r,t,e,s,l,m,E){if(null==m)r.removeAttribute(t,l,e);else{const I=null==E?si(m):E(m,s||"",l);r.setAttribute(t,l,I,e)}}(t[11],E,m,r.value,e,s,l)}function aI(r,t,e,s,l,m){const E=m[t];if(null!==E){const I=s.setInput;for(let k=0;k<E.length;){const F=E[k++],ee=E[k++],me=E[k++];null!==I?s.setInput(e,me,F,ee):e[ee]=me}}}function bf(r,t,e){let s=null,l=0;for(;l<e.length;){const m=e[l];if(0!==m)if(5!==m){if("number"==typeof m)break;if(r.hasOwnProperty(m)){null===s&&(s=[]);const E=r[m];for(let I=0;I<E.length;I+=2)if(E[I]===t){s.push(m,E[I+1],e[l+1]);break}}l+=2}else l+=2;else l+=4}return s}function Mb(r,t,e,s){return[r,!0,!1,t,null,0,s,e,null,null]}function U_(r,t){const e=Ca(t,r);if(Hh(e)){const s=e[1];48&e[2]?ah(s,e,s.template,e[8]):e[5]>0&&FA(e)}}function FA(r){for(let s=JE(r);null!==s;s=g_(s))for(let l=10;l<s.length;l++){const m=s[l];if(Hh(m))if(512&m[2]){const E=m[1];ah(E,m,E.template,m[8])}else m[5]>0&&FA(m)}const e=r[1].components;if(null!==e)for(let s=0;s<e.length;s++){const l=Ca(e[s],r);Hh(l)&&l[5]>0&&FA(l)}}function cI(r,t){const e=Ca(t,r),s=e[1];(function As(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(s,e),x_(s,e,e[8])}function br(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function ka(r){for(;r;){r[2]|=32;const t=th(r);if(T0(r)&&!t)return r;r=t}return null}function Sf(r,t,e,s=!0){const l=t[10];l.begin&&l.begin();try{ah(r,t,r.template,e)}catch(E){throw s&&vu(t,E),E}finally{l.end&&l.end()}}function $n(r,t,e){fc(0),t(r,e)}function Na(r){return r[7]||(r[7]=[])}function jr(r){return r.cleanup||(r.cleanup=[])}function uI(r,t,e){return(null===r||pu(r))&&(e=function yw(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function vu(r,t){const e=r[9],s=e?e.get(Sd,null):null;s&&s.handleError(t)}function UA(r,t,e,s,l){for(let m=0;m<e.length;){const E=e[m++],I=e[m++],k=t[E],F=r.data[E];null!==F.setInput?F.setInput(k,l,s,I):k[I]=l}}function VA(r,t,e){let s=e?r.styles:null,l=e?r.classes:null,m=0;if(null!==t)for(let E=0;E<t.length;E++){const I=t[E];"number"==typeof I?m=I:1==m?l=Fh(l,I):2==m&&(s=Fh(s,I+": "+t[++E]+";"))}e?r.styles=s:r.stylesWithoutHost=s,e?r.classes=l:r.classesWithoutHost=l}function jA(r,t,e,s,l=!1){for(;null!==e;){const m=t[e.index];if(null!==m&&s.push(sa(m)),Sl(m))for(let I=10;I<m.length;I++){const k=m[I],F=k[1].firstChild;null!==F&&jA(k[1],k,F,s)}const E=e.type;if(8&E)jA(r,t,e.child,s);else if(32&E){const I=gd(e,t);let k;for(;k=I();)s.push(k)}else if(16&E){const I=CN(t,e);if(Array.isArray(I))s.push(...I);else{const k=th(t[16]);jA(k[1],k,I,s,!0)}}e=l?e.projectionNext:e.next}return s}class Ym{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return jA(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Sl(t)){const e=t[8],s=e?e.indexOf(this):-1;s>-1&&(kl(t,s),Tl(e,s))}this._attachedToViewContainer=!1}Pm(this._lView[1],this._lView)}onDestroy(t){PR(this._lView[1],this._lView,null,t)}markForCheck(){ka(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Sf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hf(r,t){eb(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new gn(902,!1);this._appRef=t}}class Ec extends Ym{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Sf(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class dp extends O_{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zi(t);return new QA(e,this.ngModule)}}function jR(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}class lI{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,s){s=id(s);const l=this.injector.get(t,Ku,s);return l!==Ku||e===Ku?l:this.parentInjector.get(t,e,s)}}class QA extends vb{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function FC(r){return r.map(BC).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return jR(this.componentDef.inputs)}get outputs(){return jR(this.componentDef.outputs)}create(t,e,s,l){let m=(l=l||this.ngModule)instanceof oh?l:l?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new lI(t,m):t,I=E.get(ua,null);if(null===I)throw new gn(407,!1);const k=E.get(hR,null),F=I.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",me=s?function tI(r,t,e){return r.selectRootElement(t,e===hu.ShadowDom)}(F,s,this.componentDef.encapsulation):Ol(F,ee,function zN(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(ee)),Le=this.componentDef.onPush?288:272,We=ZC(0,null,null,1,0,null,null,null,null,null),it=Gm(null,We,null,Le,null,null,I,F,k,E,null);let bt,Jt;mc(it);try{const tn=this.componentDef;let Rn,n=null;tn.findHostDirectiveDefs?(Rn=[],n=new Map,tn.findHostDirectiveDefs(tn,Rn,n),Rn.push(tn)):Rn=[tn];const i=function Jm(r,t){const e=r[1];return r[22]=t,yf(e,22,2,"#host",null)}(it,me),o=function QR(r,t,e,s,l,m,E,I){const k=l[1];!function xb(r,t,e,s){for(const l of r)t.mergedAttrs=hd(t.mergedAttrs,l.hostAttrs);null!==t.mergedAttrs&&(VA(t,t.mergedAttrs,!0),null!==e&&ib(s,e,t))}(s,r,t,E);const F=m.createRenderer(t,e),ee=Gm(l,Km(e),null,e.onPush?32:16,l[r.index],r,m,F,I||null,null,null);return k.firstCreatePass&&Pb(k,r,s.length-1),br(l,ee),l[r.index]=ee}(i,me,tn,Rn,it,I,F);Jt=bw(We,22),me&&function qN(r,t,e,s){if(s)j0(r,e,["ng-version",yb.full]);else{const{attrs:l,classes:m}=function bb(r){const t=[],e=[];let s=1,l=2;for(;s<r.length;){let m=r[s];if("string"==typeof m)2===l?""!==m&&t.push(m,r[++s]):8===l&&e.push(m);else{if(!_u(l))break;l=m}s++}return{attrs:t,classes:e}}(t.selectors[0]);l&&j0(r,e,l),m&&m.length>0&&Mm(r,e,m.join(" "))}}(F,tn,me,s),void 0!==e&&function JN(r,t,e){const s=r.projection=[];for(let l=0;l<t.length;l++){const m=e[l];s.push(null!=m?Array.from(m):null)}}(Jt,this.ngContentSelectors,e),bt=function YN(r,t,e,s,l,m){const E=Go(),I=l[1],k=Ya(E,l);Nb(I,l,E,e,null,s);for(let ee=0;ee<e.length;ee++)zs(ef(l,I,E.directiveStart+ee,E),l);B_(I,l,E),k&&zs(k,l);const F=ef(l,I,E.directiveStart+E.componentOffset,E);if(r[8]=l[8]=F,null!==m)for(const ee of m)ee(F,t);return Ob(I,E,r),F}(o,tn,Rn,n,it,[HR]),x_(We,it,null)}finally{ki()}return new qm(this.componentType,bt,vf(Jt,it),it,Jt)}}class qm extends kC{constructor(t,e,s,l,m){super(),this.location=s,this._rootLView=l,this._tNode=m,this.instance=e,this.hostView=this.changeDetectorRef=new Ec(l),this.componentType=t}setInput(t,e){const s=this._tNode.inputs;let l;if(null!==s&&(l=s[t])){const m=this._rootLView;UA(m[1],m,l,t,e),L_(m,this._tNode.index)}}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function HR(){const r=Go();Do(An()[1],r)}function Br(r){let t=function dI(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const s=[r];for(;t;){let l;if(pu(r))l=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new gn(903,!1);l=t.\u0275dir}if(l){if(e){s.push(l);const E=r;E.inputs=Lb(r.inputs),E.declaredInputs=Lb(r.declaredInputs),E.outputs=Lb(r.outputs);const I=l.hostBindings;I&&Xm(r,I);const k=l.viewQuery,F=l.contentQueries;if(k&&Id(r,k),F&&V_(r,F),fn(r.inputs,l.inputs),fn(r.declaredInputs,l.declaredInputs),fn(r.outputs,l.outputs),pu(l)&&l.data.animation){const ee=r.data;ee.animation=(ee.animation||[]).concat(l.data.animation)}}const m=l.features;if(m)for(let E=0;E<m.length;E++){const I=m[E];I&&I.ngInherit&&I(r),I===Br&&(e=!1)}}t=Object.getPrototypeOf(t)}!function hI(r){let t=0,e=null;for(let s=r.length-1;s>=0;s--){const l=r[s];l.hostVars=t+=l.hostVars,l.hostAttrs=hd(l.hostAttrs,e=hd(e,l.hostAttrs))}}(s)}function Lb(r){return r===Pu?{}:r===$i?[]:r}function Id(r,t){const e=r.viewQuery;r.viewQuery=e?(s,l)=>{t(s,l),e(s,l)}:t}function V_(r,t){const e=r.contentQueries;r.contentQueries=e?(s,l,m)=>{t(s,l,m),e(s,l,m)}:t}function Xm(r,t){const e=r.hostBindings;r.hostBindings=e?(s,l)=>{t(s,l),e(s,l)}:t}let Fb=null;function If(){if(!Fb){const r=Ho.Symbol;if(r&&r.iterator)Fb=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const s=t[e];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(Fb=s)}}}return Fb}function Zm(r){return!!WA(r)&&(Array.isArray(r)||!(r instanceof Map)&&If()in r)}function WA(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function $a(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function no(r,t,e,s){const l=An();return $a(l,zp(),t)&&(ar(),xl(Fo(),l,r,t,e,s)),no}function eg(r,t,e,s){return $a(r,zp(),e)?t+si(e)+s:ei}function dr(r,t,e,s,l,m,E,I){const k=An(),F=ar(),ee=r+22,me=F.firstCreatePass?function bI(r,t,e,s,l,m,E,I,k){const F=t.consts,ee=yf(t,r,4,E||null,Gh(F,I));lp(t,e,ee,Gh(F,k)),Do(t,ee);const me=ee.tViews=ZC(2,ee,s,l,m,t.directiveRegistry,t.pipeRegistry,null,t.schemas,F);return null!==t.queries&&(t.queries.template(t,ee),me.queries=t.queries.embeddedTView(ee)),ee}(ee,F,k,t,e,s,l,m,E):F.data[ee];cd(me,!1);const Le=k[11].createComment("");hC(F,k,Le,me),zs(Le,k),br(k,k[ee]=Mb(Le,k,Le,me)),$d(me)&&$C(F,k,me),null!=E&&Ef(k,me,I)}function ch(r){return pm(function ud(){return ci.lFrame.contextLView}(),22+r)}function Nn(r,t,e){const s=An();return $a(s,zp(),t)&&Jc(ar(),Fo(),s,r,t,s[11],e,!1),Nn}function Ub(r,t,e,s,l){const E=l?"class":"style";UA(r,e,t.inputs[E],E,s)}function Cn(r,t,e,s){const l=An(),m=ar(),E=22+r,I=l[11],k=l[E]=Ol(I,t,function Il(){return ci.lFrame.currentNamespace}()),F=m.firstCreatePass?function YR(r,t,e,s,l,m,E){const I=t.consts,F=yf(t,r,2,l,Gh(I,m));return lp(t,e,F,Gh(I,E)),null!==F.attrs&&VA(F,F.attrs,!1),null!==F.mergedAttrs&&VA(F,F.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,F),F}(E,m,l,0,t,e,s):m.data[E];return cd(F,!0),ib(I,k,F),32!=(32&F.flags)&&hC(m,l,k,F),0===function aa(){return ci.lFrame.elementDepthCount}()&&zs(k,l),function eA(){ci.lFrame.elementDepthCount++}(),$d(F)&&($C(m,l,F),Ob(m,F,l)),null!==s&&Ef(l,F),Cn}function xn(){let r=Go();gm()?nA():(r=r.parent,cd(r,!1));const t=r;!function P0(){ci.lFrame.elementDepthCount--}();const e=ar();return e.firstCreatePass&&(Do(e,r),fE(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function bE(r){return 0!=(8&r.flags)}(t)&&Ub(e,t,An(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Cw(r){return 0!=(16&r.flags)}(t)&&Ub(e,t,An(),t.stylesWithoutHost,!1),xn}function oo(r,t,e,s){return Cn(r,t,e,s),xn(),oo}function uh(r,t,e){const s=An(),l=ar(),m=r+22,E=l.firstCreatePass?function qR(r,t,e,s,l){const m=t.consts,E=Gh(m,s),I=yf(t,r,8,"ng-container",E);return null!==E&&VA(I,E,!0),lp(t,e,I,Gh(m,l)),null!==t.queries&&t.queries.elementStart(t,I),I}(m,l,s,t,e):l.data[m];cd(E,!0);const I=s[m]=s[11].createComment("");return hC(l,s,I,E),zs(I,s),$d(E)&&($C(l,s,E),Ob(l,E,s)),null!=e&&Ef(s,E),uh}function Xu(){let r=Go();const t=ar();return gm()?nA():(r=r.parent,cd(r,!1)),t.firstCreatePass&&(Do(t,r),fE(r)&&t.queries.elementEnd(r)),Xu}function G_(r,t,e){return uh(r,t,e),Xu(),G_}function $u(){return An()}function rn(r){return!!r&&"function"==typeof r.then}const SI=function JR(r){return!!r&&"function"==typeof r.subscribe};function so(r,t,e,s){const l=An(),m=ar(),E=Go();return Au(m,l,l[11],E,r,t,s),so}function JA(r,t){const e=Go(),s=An(),l=ar();return Au(l,s,uI(qp(l.data),e,s),e,r,t),JA}function Au(r,t,e,s,l,m,E){const I=$d(s),F=r.firstCreatePass&&jr(r),ee=t[8],me=Na(t);let Le=!0;if(3&s.type||E){const bt=Ya(s,t),Jt=E?E(bt):bt,tn=me.length,Rn=E?i=>E(sa(i[s.index])):s.index;let n=null;if(!E&&I&&(n=function XR(r,t,e,s){const l=r.cleanup;if(null!=l)for(let m=0;m<l.length-1;m+=2){const E=l[m];if(E===e&&l[m+1]===s){const I=t[7],k=l[m+2];return I.length>k?I[k]:null}"string"==typeof E&&(m+=2)}return null}(r,t,l,s.index)),null!==n)(n.__ngLastListenerFn__||n).__ngNextListenerFn__=m,n.__ngLastListenerFn__=m,Le=!1;else{m=Rf(s,t,ee,m,!1);const i=e.listen(Jt,l,m);me.push(m,i),F&&F.push(l,Rn,tn,tn+1)}}else m=Rf(s,t,ee,m,!1);const We=s.outputs;let it;if(Le&&null!==We&&(it=We[l])){const bt=it.length;if(bt)for(let Jt=0;Jt<bt;Jt+=2){const o=t[it[Jt]][it[Jt+1]].subscribe(m),c=me.length;me.push(m,o),F&&F.push(l,s.index,c,-(c+1))}}}function $R(r,t,e,s){try{return!1!==e(s)}catch(l){return vu(r,l),!1}}function Rf(r,t,e,s,l){return function m(E){if(E===Function)return s;ka(r.componentOffset>-1?Ca(r.index,t):t);let k=$R(t,0,s,E),F=m.__ngNextListenerFn__;for(;F;)k=$R(t,0,F,E)&&k,F=F.__ngNextListenerFn__;return l&&!1===k&&(E.preventDefault(),E.returnValue=!1),k}}function ii(r=1){return function ym(r){return(ci.lFrame.contextLView=function oA(r,t){for(;r>0;)t=t[15],r--;return t}(r,ci.lFrame.contextLView))[8]}(r)}function li(r,t){let e=null;const s=function ER(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let l=0;l<t.length;l++){const m=t[l];if("*"!==m){if(null===s?Af(r,m,!0):bR(s,m))return l}else e=l}return e}function Ys(r){const t=An()[16][6];if(!t.projection){const s=t.projection=qh(r?r.length:1,null),l=s.slice();let m=t.child;for(;null!==m;){const E=r?li(m,r):0;null!==E&&(l[E]?l[E].projectionNext=m:s[E]=m,l[E]=m),m=m.next}}}function So(r,t=0,e){const s=An(),l=ar(),m=yf(l,22+r,16,null,e||null);null===m.projection&&(m.projection=t),nA(),32!=(32&m.flags)&&function Xw(r,t,e){tb(t[11],0,t,e,AA(r,e,t),EN(e.parent||t[6],e,t))}(l,s,m)}function $A(r,t){return r<<17|t<<2}function wd(r){return r>>17&32767}function K_(r){return 2|r}function Ll(r){return(131068&r)>>2}function Za(r,t){return-131069&r|t<<2}function Of(r){return 1|r}function Hb(r,t,e,s,l){const m=r[e+1],E=null===t;let I=s?wd(m):Ll(m),k=!1;for(;0!==I&&(!1===k||E);){const ee=r[I+1];eO(r[I],t)&&(k=!0,r[I+1]=s?Of(ee):K_(ee)),I=s?wd(ee):Ll(ee)}k&&(r[e+1]=s?K_(m):Of(m))}function eO(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&ur(r,t)>=0}const zo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function OI(r){return r.substring(zo.key,zo.keyEnd)}function Gb(r,t){const e=zo.textEnd;return e===t?-1:(t=zo.keyEnd=function Pa(r,t,e){for(;t<e&&r.charCodeAt(t)>32;)t++;return t}(r,zo.key=t,e),Y_(r,t,e))}function Y_(r,t,e){for(;t<e&&r.charCodeAt(t)<=32;)t++;return t}function ys(r,t,e){return bc(r,t,e,!1),ys}function Fr(r,t){return bc(r,t,null,!0),Fr}function Bl(r,t){for(let e=function nO(r){return function z_(r){zo.key=0,zo.keyEnd=0,zo.value=0,zo.valueEnd=0,zo.textEnd=r.length}(r),Gb(r,Y_(r,0,zo.textEnd))}(t);e>=0;e=Gb(t,e))kr(r,OI(t),!0)}function bc(r,t,e,s){const l=An(),m=ar(),E=Bo(2);m.firstUpdatePass&&DI(m,r,E,s),t!==ei&&$a(l,E,t)&&aO(m,m.data[Fc()],l,l[11],r,l[E+1]=function MI(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=xo(Wc(r)))),r}(t,e),s,E)}function oO(r,t){return t>=r.expandoStartIndex}function DI(r,t,e,s){const l=r.data;if(null===l[e+1]){const m=l[Fc()],E=oO(r,e);xI(m,s)&&null===t&&!E&&(t=!1),t=function sO(r,t,e,s){const l=qp(r);let m=s?t.residualClasses:t.residualStyles;if(null===l)0===(s?t.classBindings:t.styleBindings)&&(e=ph(e=Kb(null,r,t,e,s),t.attrs,s),m=null);else{const E=t.directiveStylingLast;if(-1===E||r[E]!==l)if(e=Kb(l,r,t,e,s),null===m){let k=function Wb(r,t,e){const s=e?t.classBindings:t.styleBindings;if(0!==Ll(s))return r[wd(s)]}(r,t,s);void 0!==k&&Array.isArray(k)&&(k=Kb(null,r,t,k[1],s),k=ph(k,t.attrs,s),function ZA(r,t,e,s){r[wd(e?t.classBindings:t.styleBindings)]=s}(r,t,s,k))}else m=function kI(r,t,e){let s;const l=t.directiveEnd;for(let m=1+t.directiveStylingLast;m<l;m++)s=ph(s,r[m].hostAttrs,e);return ph(s,t.attrs,e)}(r,t,s)}return void 0!==m&&(s?t.residualClasses=m:t.residualStyles=m),e}(l,m,t,s),function RI(r,t,e,s,l,m){let E=m?t.classBindings:t.styleBindings,I=wd(E),k=Ll(E);r[s]=e;let ee,F=!1;if(Array.isArray(e)){const me=e;ee=me[1],(null===ee||ur(me,ee)>0)&&(F=!0)}else ee=e;if(l)if(0!==k){const Le=wd(r[I+1]);r[s+1]=$A(Le,I),0!==Le&&(r[Le+1]=Za(r[Le+1],s)),r[I+1]=function Qb(r,t){return 131071&r|t<<17}(r[I+1],s)}else r[s+1]=$A(I,0),0!==I&&(r[I+1]=Za(r[I+1],s)),I=s;else r[s+1]=$A(k,0),0===I?I=s:r[k+1]=Za(r[k+1],s),k=s;F&&(r[s+1]=K_(r[s+1])),Hb(r,ee,s,!0),Hb(r,ee,s,!1),function ZR(r,t,e,s,l){const m=l?r.residualClasses:r.residualStyles;null!=m&&"string"==typeof t&&ur(m,t)>=0&&(e[s+1]=Of(e[s+1]))}(t,ee,r,s,m),E=$A(I,k),m?t.classBindings=E:t.styleBindings=E}(l,m,t,e,E,s)}}function Kb(r,t,e,s,l){let m=null;const E=e.directiveEnd;let I=e.directiveStylingLast;for(-1===I?I=e.directiveStart:I++;I<E&&(m=t[I],s=ph(s,m.hostAttrs,l),m!==r);)I++;return null!==r&&(e.directiveStylingLast=I),s}function ph(r,t,e){const s=e?1:2;let l=-1;if(null!==t)for(let m=0;m<t.length;m++){const E=t[m];"number"==typeof E?l=E:l===s&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),kr(r,E,!!e||t[++m]))}return void 0===r?null:r}function aO(r,t,e,s,l,m,E,I){if(!(3&t.type))return;const k=r.data,F=k[I+1],ee=function Zu(r){return 1==(1&r)}(F)?cO(k,t,e,l,Ll(F),E):void 0;zb(ee)||(zb(m)||function wI(r){return 2==(2&r)}(F)&&(m=cO(k,null,e,l,I,E)),function rb(r,t,e,s,l){if(t)l?r.addClass(e,s):r.removeClass(e,s);else{let m=-1===s.indexOf("-")?void 0:Vc.DashCase;null==l?r.removeStyle(e,s,m):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),m|=Vc.Important),r.setStyle(e,s,l,m))}}(s,E,$v(Fc(),e),l,m))}function cO(r,t,e,s,l,m){const E=null===t;let I;for(;l>0;){const k=r[l],F=Array.isArray(k),ee=F?k[1]:k,me=null===ee;let Le=e[l+1];Le===ei&&(Le=me?$i:void 0);let We=me?Om(Le,s):ee===s?Le:void 0;if(F&&!zb(We)&&(We=Om(k,s)),zb(We)&&(I=We,E))return I;const it=r[l+1];l=E?wd(it):Ll(it)}if(null!==t){let k=m?t.residualClasses:t.residualStyles;null!=k&&(I=Om(k,s))}return I}function zb(r){return void 0!==r}function xI(r,t){return 0!=(r.flags&(t?8:16))}function Nr(r,t=""){const e=An(),s=ar(),l=r+22,m=s.firstCreatePass?yf(s,l,1,t,null):s.data[l],E=e[l]=function tp(r,t){return r.createText(t)}(e[11],t);hC(s,e,E,m),cd(m,!1)}function Rd(r){return Od("",r,""),Rd}function Od(r,t,e){const s=An(),l=eg(s,r,t,e);return l!==ei&&function Xc(r,t,e){const s=$v(t,r);!function vA(r,t,e){r.setValue(t,e)}(r[11],s,e)}(s,Fc(),l),Od}function FI(r,t,e){!function qs(r,t,e,s){const l=ar(),m=Bo(2);l.firstUpdatePass&&DI(l,null,m,s);const E=An();if(e!==ei&&$a(E,m,e)){const I=l.data[Fc()];if(xI(I,s)&&!oO(l,m)){let k=s?I.classesWithoutHost:I.stylesWithoutHost;null!==k&&(e=Fh(k,e||"")),Ub(l,I,E,e,s)}else!function PI(r,t,e,s,l,m,E,I){l===ei&&(l=$i);let k=0,F=0,ee=0<l.length?l[0]:null,me=0<m.length?m[0]:null;for(;null!==ee||null!==me;){const Le=k<l.length?l[k+1]:void 0,We=F<m.length?m[F+1]:void 0;let bt,it=null;ee===me?(k+=2,F+=2,Le!==We&&(it=me,bt=We)):null===me||null!==ee&&ee<me?(k+=2,it=ee):(F+=2,it=me,bt=We),null!==it&&aO(r,t,e,s,it,bt,E,I),ee=k<l.length?l[k]:null,me=F<m.length?m[F]:null}}(l,I,E,E[11],E[m+1],E[m+1]=function Df(r,t,e){if(null==e||""===e)return $i;const s=[],l=Wc(e);if(Array.isArray(l))for(let m=0;m<l.length;m++)r(s,l[m],!0);else if("object"==typeof l)for(const m in l)l.hasOwnProperty(m)&&r(s,m,l[m]);else"string"==typeof l&&t(s,l);return s}(r,t,e),s,m)}}(kr,Bl,eg(An(),r,t,e),!0)}function X_(r,t,e){const s=An();return $a(s,zp(),t)&&Jc(ar(),Fo(),s,r,t,s[11],e,!0),X_}function tl(r,t,e){const s=An();if($a(s,zp(),t)){const m=ar(),E=Fo();Jc(m,E,s,r,t,uI(qp(m.data),E,s),e,!0)}return tl}const _h="en-US";let Z_=_h;function Eu(r,t,e,s,l){if(r=Gr(r),Array.isArray(r))for(let m=0;m<r.length;m++)Eu(r[m],t,e,s,l);else{const m=ar(),E=An();let I=op(r)?r:Gr(r.provide),k=kA(r);const F=Go(),ee=1048575&F.providerIndexes,me=F.directiveStart,Le=F.providerIndexes>>20;if(op(r)||!r.multi){const We=new ko(k,l,gt),it=mg(I,t,l?ee:ee+Le,me);-1===it?(uA(Fu(F,E),m,I),_y(m,r,t.length),t.push(I),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),e.push(We),E.push(We)):(e[it]=We,E[it]=We)}else{const We=mg(I,t,ee+Le,me),it=mg(I,t,ee,ee+Le),bt=We>=0&&e[We],Jt=it>=0&&e[it];if(l&&!Jt||!l&&!bt){uA(Fu(F,E),m,I);const tn=function jO(r,t,e,s,l){const m=new ko(r,e,gt);return m.multi=[],m.index=t,m.componentProviders=0,fg(m,l,s&&!e),m}(l?gP:VO,e.length,l,s,k);!l&&Jt&&(e[it].providerFactory=tn),_y(m,r,t.length,0),t.push(I),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),e.push(tn),E.push(tn)}else _y(m,r,We>-1?We:it,fg(e[l?it:We],k,!l&&s));!l&&s&&Jt&&e[it].componentProviders++}}}function _y(r,t,e,s){const l=op(t),m=function sp(r){return!!r.useClass}(t);if(l||m){const k=(m?Gr(t.useClass):t).prototype.ngOnDestroy;if(k){const F=r.destroyHooks||(r.destroyHooks=[]);if(!l&&t.multi){const ee=F.indexOf(e);-1===ee?F.push(e,[s,k]):F[ee+1].push(s,k)}else F.push(e,k)}}}function fg(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function mg(r,t,e,s){for(let l=e;l<s;l++)if(t[l]===r)return l;return-1}function VO(r,t,e,s){return nS(this.multi,[])}function gP(r,t,e,s){const l=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,I=ef(e,e[1],this.providerFactory.index,s);m=I.slice(0,E),nS(l,m);for(let k=E;k<I.length;k++)m.push(I[k])}else m=[],nS(l,m);return m}function nS(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function vo(r,t=[]){return e=>{e.providersResolver=(s,l)=>function gy(r,t,e){const s=ar();if(s.firstCreatePass){const l=pu(r);Eu(e,s.data,s.blueprint,l,!0),Eu(t,s.data,s.blueprint,l,!1)}}(s,l?l(r):r,t)}}class lv{}class rS{}class bu extends lv{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dp(this);const s=function Lc(r,t){const e=r[dw]||null;if(!e&&!0===t)throw new Error(`Type ${xo(r)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function Ml(r){return r instanceof Function?r():r}(s.bootstrap),this._r3Injector=TR(t,e,[{provide:lv,useValue:this},{provide:O_,useValue:this.componentFactoryResolver}],xo(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Vo extends rS{constructor(t){super(),this.moduleType=t}create(t){return new bu(this.moduleType,t)}}function YO(r,t,e,s,l,m){const E=t+e;return $a(r,E,l)?function Td(r,t,e){return r[t]=e}(r,E+1,m?s.call(m,l):s(l)):function dv(r,t){const e=r[t];return e===ei?void 0:e}(r,E+1)}function XO(r,t,e){const s=r+22,l=An(),m=pm(l,s);return function Bf(r,t){return r[1].data[t].pure}(l,s)?YO(l,function wa(){const r=ci.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,m.transform,e,m):m.transform(e)}function d(r){return t=>{setTimeout(r,void 0,t)}}const u=class a extends ht{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,s){let l=t,m=e||(()=>null),E=s;if(t&&"object"==typeof t){const k=t;l=k.next?.bind(k),m=k.error?.bind(k),E=k.complete?.bind(k)}this.__isAsync&&(m=d(m),l&&(l=d(l)),E&&(E=d(E)));const I=super.subscribe({next:l,error:m,complete:E});return t instanceof U&&t.add(I),I}};function f(){return this._results[If()]()}class A{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=If(),s=A.prototype;s[e]||(s[e]=f)}get changes(){return this._changes||(this._changes=new u)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const s=this;s.dirty=!1;const l=_c(t);(this._changesDetected=!function Ws(r,t,e){if(r.length!==t.length)return!1;for(let s=0;s<r.length;s++){let l=r[s],m=t[s];if(e&&(l=e(l),m=e(m)),m!==l)return!1}return!0}(s._results,l,e))&&(s._results=l,s.length=l.length,s.last=l[this.length-1],s.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let S=(()=>{class r{}return r.__NG_ELEMENT_ID__=M,r})();const T=S,w=class extends T{constructor(t,e,s){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=s}createEmbeddedView(t,e){const s=this._declarationTContainer.tViews,l=Gm(this._declarationLView,s,t,16,null,s.declTNode,null,null,null,null,e||null);l[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(l[19]=E.createEmbeddedView(s)),x_(s,l,t),new Ym(l)}};function M(){return B(Go(),An())}function B(r,t){return 4&r.type?new w(t,r,vf(r,t)):null}let G=(()=>{class r{}return r.__NG_ELEMENT_ID__=Z,r})();function Z(){return Qe(Go(),An())}const ce=G,he=class extends ce{constructor(t,e,s){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=s}get element(){return vf(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ra(this._hostTNode,this._hostLView);if(CE(t)){const e=Wh(t,this._hostLView),s=IE(t);return new cr(e[1].data[s+8],e)}return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ue(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,s){let l,m;"number"==typeof s?l=s:null!=s&&(l=s.index,m=s.injector);const E=t.createEmbeddedView(e||{},m);return this.insert(E,l),E}createComponent(t,e,s,l,m){const E=t&&!function Qu(r){return"function"==typeof r}(t);let I;if(E)I=e;else{const me=e||{};I=me.index,s=me.injector,l=me.projectableNodes,m=me.environmentInjector||me.ngModuleRef}const k=E?t:new QA(Zi(t)),F=s||this.parentInjector;if(!m&&null==k.ngModule){const Le=(E?F:this.parentInjector).get(oh,null);Le&&(m=Le)}const ee=k.create(F,l,void 0,m);return this.insert(ee.hostView,I),ee}insert(t,e){const s=t._lView,l=s[1];if(function Sw(r){return Sl(r[3])}(s)){const ee=this.indexOf(t);if(-1!==ee)this.detach(ee);else{const me=s[3],Le=new he(me,me[6],me[3]);Le.detach(Le.indexOf(t))}}const m=this._adjustIndex(e),E=this._lContainer;!function Hw(r,t,e,s){const l=10+s,m=e.length;s>0&&(e[l-1][4]=t),s<m-10?(t[4]=e[l],kE(e,10+s,t)):(e.push(t),t[4]=null),t[3]=e;const E=t[17];null!==E&&e!==E&&function zB(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(E,t);const I=t[19];null!==I&&I.insertView(r),t[2]|=64}(l,s,E,m);const I=qw(m,E),k=s[11],F=EA(k,E[7]);return null!==F&&function Dl(r,t,e,s,l,m){s[0]=l,s[6]=t,eb(r,s,e,1,l,m)}(l,E[6],k,s,F,I),t.attachToViewContainerRef(),kE(Se(E),m,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ue(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),s=kl(this._lContainer,e);s&&(Tl(Se(this._lContainer),e),Pm(s[1],s))}detach(t){const e=this._adjustIndex(t,-1),s=kl(this._lContainer,e);return s&&null!=Tl(Se(this._lContainer),e)?new Ym(s):null}_adjustIndex(t,e=0){return t??this.length+e}};function ue(r){return r[8]}function Se(r){return r[8]||(r[8]=[])}function Qe(r,t){let e;const s=t[r.index];if(Sl(s))e=s;else{let l;if(8&r.type)l=sa(s);else{const m=t[11];l=m.createComment("");const E=Ya(r,t);_d(m,EA(m,E),l,function YB(r,t){return r.nextSibling(t)}(m,E),!1)}t[r.index]=e=Mb(s,t,l,r),br(t,e)}return new he(e,r,t)}class Lt{constructor(t){this.queryList=t,this.matches=null}clone(){return new Lt(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gt{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const s=null!==t.contentQueries?t.contentQueries[0]:e.length,l=[];for(let m=0;m<s;m++){const E=e.getByIndex(m);l.push(this.queries[E.indexInDeclarationView].clone())}return new Gt(l)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Hn(t,e).matches&&this.queries[e].setDirty()}}class jt{constructor(t,e,s=null){this.predicate=t,this.flags=e,this.read=s}}class wt{constructor(t=[]){this.queries=t}elementStart(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let s=0;s<this.length;s++){const l=null!==e?e.length:0,m=this.getByIndex(s).embeddedTView(t,l);m&&(m.indexInDeclarationView=s,null!==e?e.push(m):e=[m])}return null!==e?new wt(e):null}template(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class sn{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new sn(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let s=t.parent;for(;null!==s&&8&s.type&&s.index!==e;)s=s.parent;return e===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const s=this.metadata.predicate;if(Array.isArray(s))for(let l=0;l<s.length;l++){const m=s[l];this.matchTNodeWithReadOption(t,e,hn(e,m)),this.matchTNodeWithReadOption(t,e,pd(e,t,m,!1,!1))}else s===S?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,pd(e,t,s,!1,!1))}matchTNodeWithReadOption(t,e,s){if(null!==s){const l=this.metadata.read;if(null!==l)if(l===Ni||l===G||l===S&&4&e.type)this.addMatch(e.index,-2);else{const m=pd(e,t,l,!1,!1);null!==m&&this.addMatch(e.index,m)}else this.addMatch(e.index,s)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hn(r,t){const e=r.localNames;if(null!==e)for(let s=0;s<e.length;s+=2)if(e[s]===t)return e[s+1];return null}function ln(r,t,e,s){return-1===e?function vn(r,t){return 11&r.type?vf(r,t):4&r.type?B(r,t):null}(t,r):-2===e?function Qt(r,t,e){return e===Ni?vf(t,r):e===S?B(t,r):e===G?Qe(t,r):void 0}(r,t,s):ef(r,r[1],e,t)}function Bn(r,t,e,s){const l=t[19].queries[s];if(null===l.matches){const m=r.data,E=e.matches,I=[];for(let k=0;k<E.length;k+=2){const F=E[k];I.push(F<0?null:ln(t,m[F],E[k+1],e.metadata.read))}l.matches=I}return l.matches}function gr(r,t,e,s){const l=r.queries.getByIndex(e),m=l.matches;if(null!==m){const E=Bn(r,t,l,e);for(let I=0;I<m.length;I+=2){const k=m[I];if(k>0)s.push(E[I/2]);else{const F=m[I+1],ee=t[-k];for(let me=10;me<ee.length;me++){const Le=ee[me];Le[17]===Le[3]&&gr(Le[1],Le,F,s)}if(null!==ee[9]){const me=ee[9];for(let Le=0;Le<me.length;Le++){const We=me[Le];gr(We[1],We,F,s)}}}}}return s}function At(r){const t=An(),e=ar(),s=L0();fc(s+1);const l=Hn(e,s);if(r.dirty&&function hN(r){return 4==(4&r[2])}(t)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const m=l.crossesNgTemplate?gr(e,t,s,[]):Bn(e,t,l,s);r.reset(m,dR),r.notifyOnChanges()}return!0}return!1}function ut(r,t,e){const s=ar();s.firstCreatePass&&(Ut(s,new jt(r,t,e),-1),2==(2&t)&&(s.staticViewQueries=!0)),lt(s,An(),t)}function Be(r,t,e,s){const l=ar();if(l.firstCreatePass){const m=Go();Ut(l,new jt(t,e,s),m.index),function an(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(l,r),2==(2&e)&&(l.staticContentQueries=!0)}lt(l,An(),e)}function $e(){return function St(r,t){return r[19].queries[t].queryList}(An(),L0())}function lt(r,t,e){const s=new A(4==(4&e));PR(r,t,s,s.destroy),null===t[19]&&(t[19]=new Gt),t[19].queries.push(new Lt(s))}function Ut(r,t,e){null===r.queries&&(r.queries=new wt),r.queries.track(new sn(t,e))}function Hn(r,t){return r.queries.getByIndex(t)}function _r(r,t){return B(r,t)}function eD(...r){}const uF=new Fn("Application Initializer");let lT=(()=>{class r{constructor(e){this.appInits=e,this.resolve=eD,this.reject=eD,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l})}runInitializers(){if(this.initialized)return;const e=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const m=this.appInits[l]();if(rn(m))e.push(m);else if(SI(m)){const E=new Promise((I,k)=>{m.subscribe({complete:I,error:k})});e.push(E)}}Promise.all(e).then(()=>{s()}).catch(l=>{this.reject(l)}),0===e.length&&s(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(Xt(uF,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const cS=new Fn("AppId",{providedIn:"root",factory:function lF(){return`${CP()}${CP()}${CP()}`}});function CP(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dF=new Fn("Platform Initializer"),tD=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lj=new Fn("appBootstrapListener"),Sp=new Fn("AnimationModuleType"),Ih=new Fn("LocaleId",{providedIn:"root",factory:()=>Ea(Ih,Yr.Optional|Yr.SkipSelf)||function pF(){return typeof $localize<"u"&&$localize.locale||_h}()}),rD=(()=>Promise.resolve(0))();function dT(r){typeof Zone>"u"?rD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class gi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new u(!1),this.onMicrotaskEmpty=new u(!1),this.onStable=new u(!1),this.onError=new u(!1),typeof Zone>"u")throw new gn(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!s&&e,l.shouldCoalesceRunChangeDetection=s,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function jj(){let r=Ho.requestAnimationFrame,t=Ho.cancelAnimationFrame;if(typeof Zone<"u"&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Hj(r){const t=()=>{!function iD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ho,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,wP(r),r.isCheckStableRunning=!0,TP(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),wP(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,s,l,m,E,I)=>{try{return RP(r),e.invokeTask(l,m,E,I)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||r.shouldCoalesceRunChangeDetection)&&t(),OP(r)}},onInvoke:(e,s,l,m,E,I,k)=>{try{return RP(r),e.invoke(l,m,E,I,k)}finally{r.shouldCoalesceRunChangeDetection&&t(),OP(r)}},onHasTask:(e,s,l,m)=>{e.hasTask(l,m),s===l&&("microTask"==m.change?(r._hasPendingMicrotasks=m.microTask,wP(r),TP(r)):"macroTask"==m.change&&(r.hasPendingMacrotasks=m.macroTask))},onHandleError:(e,s,l,m)=>(e.handleError(l,m),r.runOutsideAngular(()=>r.onError.emit(m)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gi.isInAngularZone())throw new gn(909,!1)}static assertNotInAngularZone(){if(gi.isInAngularZone())throw new gn(909,!1)}run(t,e,s){return this._inner.run(t,e,s)}runTask(t,e,s,l){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+l,t,Qj,eD,eD);try{return m.runTask(E,e,s)}finally{m.cancelTask(E)}}runGuarded(t,e,s){return this._inner.runGuarded(t,e,s)}runOutsideAngular(t){return this._outer.run(t)}}const Qj={};function TP(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function wP(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function RP(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function OP(r){r._nesting--,TP(r)}class uS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new u,this.onMicrotaskEmpty=new u,this.onStable=new u,this.onError=new u}run(t,e,s){return t.apply(e,s)}runGuarded(t,e,s){return t.apply(e,s)}runOutsideAngular(t){return t()}runTask(t,e,s,l){return t.apply(e,s)}}const _F=new Fn(""),hT=new Fn("");let lS,pT=(()=>{class r{constructor(e,s,l){this._ngZone=e,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lS||(function Gj(r){lS=r}(l),l.addToWindow(s)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gi.assertNotInAngularZone(),dT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dT(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(e)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,s,l){let m=-1;s&&s>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),e(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:e,timeoutId:m,updateCb:l})}whenStable(e,s,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,s,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,s,l){return[]}}return r.\u0275fac=function(e){return new(e||r)(Xt(gi),Xt(pv),Xt(hT))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),pv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,s){this._applications.set(e,s)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,s=!0){return lS?.findTestabilityInTree(this,e,s)??null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Cu=null;const vF=new Fn("AllowMultipleToken"),oD=new Fn("PlatformDestroyListeners");function bF(r,t,e=[]){const s=`Platform: ${t}`,l=new Fn(s);return(m=[])=>{let E=cD();if(!E||E.injector.get(vF,!1)){const I=[...e,...m,{provide:l,useValue:!0}];r?r(I):function DP(r){if(Cu&&!Cu.get(vF,!1))throw new gn(400,!1);Cu=r;const t=r.get(NP);(function sD(r){const t=r.get(dF,null);t&&t.forEach(e=>e())})(r)}(function dS(r=[],t){return yc.create({name:t,providers:[{provide:I_,useValue:"platform"},{provide:oD,useValue:new Set([()=>Cu=null])},...r]})}(I,s))}return function Kj(r){const t=cD();if(!t)throw new gn(401,!1);return t}()}}function cD(){return Cu?.get(NP)??null}let NP=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,s){const l=function PP(r,t){let e;return e="noop"===r?new uS:("zone.js"===r?void 0:r)||new gi(t),e}(s?.ngZone,function fT(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(s)),m=[{provide:gi,useValue:l}];return l.run(()=>{const E=yc.create({providers:m,parent:this.injector,name:e.moduleType.name}),I=e.create(E),k=I.injector.get(Sd,null);if(!k)throw new gn(402,!1);return l.runOutsideAngular(()=>{const F=l.onError.subscribe({next:ee=>{k.handleError(ee)}});I.onDestroy(()=>{hS(this._modules,I),F.unsubscribe()})}),function SF(r,t,e){try{const s=e();return rn(s)?s.catch(l=>{throw t.runOutsideAngular(()=>r.handleError(l)),l}):s}catch(s){throw t.runOutsideAngular(()=>r.handleError(s)),s}}(k,l,()=>{const F=I.injector.get(lT);return F.runInitializers(),F.donePromise.then(()=>(function dg(r){Al(r,"Expected localeId to be defined"),"string"==typeof r&&(Z_=r.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ih,_h)||_h),this._moduleDoBootstrap(I),I))})})}bootstrapModule(e,s=[]){const l=uD({},s);return function Wj(r,t,e){const s=new Vo(e);return Promise.resolve(s)}(0,0,e).then(m=>this.bootstrapModuleFactory(m,l))}_moduleDoBootstrap(e){const s=e.injector.get(by);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(l=>s.bootstrap(l));else{if(!e.instance.ngDoBootstrap)throw new gn(403,!1);e.instance.ngDoBootstrap(s)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gn(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const e=this._injector.get(oD,null);e&&(e.forEach(s=>s()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(Xt(yc))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function uD(r,t){return Array.isArray(t)?t.reduce(uD,r):{...r,...t}}let by=(()=>{class r{constructor(e,s,l){this._zone=e,this._injector=s,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new ze(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new ze(I=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{gi.assertNotInAngularZone(),dT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{gi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{k.unsubscribe(),F.unsubscribe()}});this.isStable=wo(m,E.pipe(du()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,s){const l=e instanceof vb;if(!this._injector.get(lT).done)throw!l&&function sd(r){const t=Zi(r)||Is(r)||xc(r);return null!==t&&t.standalone}(e),new gn(405,false);let E;E=l?e:this._injector.get(O_).resolveComponentFactory(e),this.componentTypes.push(E.componentType);const I=function AF(r){return r.isBoundToModule}(E)?void 0:this._injector.get(lv),F=E.create(yc.NULL,[],s||E.selector,I),ee=F.location.nativeElement,me=F.injector.get(_F,null);return me?.registerApplication(ee),F.onDestroy(()=>{this.detachView(F.hostView),hS(this.components,F),me?.unregisterApplication(ee)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new gn(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const s=e;this._views.push(s),s.attachToAppRef(this)}detachView(e){const s=e;hS(this._views,s),s.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Lj,[]).concat(this._bootstrapListeners).forEach(l=>l(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>hS(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new gn(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(e){return new(e||r)(Xt(gi),Xt(oh),Xt(Sd))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function hS(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}let Ff=(()=>{class r{}return r.__NG_ELEMENT_ID__=lD,r})();function lD(r){return function xP(r,t,e){if(mE(r)&&!e){const s=Ca(r.index,t);return new Ym(s,s)}return 47&r.type?new Ym(t[16],t):null}(Go(),An(),16==(16&r))}class DF{constructor(){}supports(t){return Zm(t)}create(t){return new Jj(t)}}const kF=(r,t)=>t;class Jj{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||kF}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,s=this._removalsHead,l=0,m=null;for(;e||s;){const E=!s||e&&e.currentIndex<PF(s,l,m)?e:s,I=PF(E,l,m),k=E.currentIndex;if(E===s)l--,s=s._nextRemoved;else if(e=e._next,null==E.previousIndex)l++;else{m||(m=[]);const F=I-l,ee=k-l;if(F!=ee){for(let Le=0;Le<F;Le++){const We=Le<m.length?m[Le]:m[Le]=0,it=We+Le;ee<=it&&it<F&&(m[Le]=We+1)}m[E.previousIndex]=ee-F}}I!==k&&t(E,I,k)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zm(t))throw new gn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let l,m,E,e=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let I=0;I<this.length;I++)m=t[I],E=this._trackByFn(I,m),null!==e&&Object.is(e.trackById,E)?(s&&(e=this._verifyReinsertion(e,m,E,I)),Object.is(e.item,m)||this._addIdentityChange(e,m)):(e=this._mismatch(e,m,E,I),s=!0),e=e._next}else l=0,function KR(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[If()]();let s;for(;!(s=e.next()).done;)t(s.value)}}(t,I=>{E=this._trackByFn(l,I),null!==e&&Object.is(e.trackById,E)?(s&&(e=this._verifyReinsertion(e,I,E,l)),Object.is(e.item,I)||this._addIdentityChange(e,I)):(e=this._mismatch(e,I,E,l),s=!0),e=e._next,l++}),this.length=l;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,s,l){let m;return null===t?m=this._itTail:(m=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,m,l)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(s,l))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,m,l)):t=this._addAfter(new NF(e,s),m,l),t}_verifyReinsertion(t,e,s,l){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==m?t=this._reinsertAfter(m,t._prev,l):t.currentIndex!=l&&(t.currentIndex=l,this._addToMoves(t,l)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const l=t._prevRemoved,m=t._nextRemoved;return null===l?this._removalsHead=m:l._nextRemoved=m,null===m?this._removalsTail=l:m._prevRemoved=l,this._insertAfter(t,e,s),this._addToMoves(t,s),t}_moveAfter(t,e,s){return this._unlink(t),this._insertAfter(t,e,s),this._addToMoves(t,s),t}_addAfter(t,e,s){return this._insertAfter(t,e,s),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,s){const l=null===e?this._itHead:e._next;return t._next=l,t._prev=e,null===l?this._itTail=t:l._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new pD),this._linkedRecords.put(t),t.currentIndex=s,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,s=t._next;return null===e?this._itHead=s:e._next=s,null===s?this._itTail=e:s._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pD),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class NF{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xj{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===e||e<=s.currentIndex)&&Object.is(s.trackById,t))return s;return null}remove(t){const e=t._prevDup,s=t._nextDup;return null===e?this._head=s:e._nextDup=s,null===s?this._tail=e:s._prevDup=e,null===this._head}}class pD{constructor(){this.map=new Map}put(t){const e=t.trackById;let s=this.map.get(e);s||(s=new Xj,this.map.set(e,s)),s.add(t)}get(t,e){const l=this.map.get(t);return l?l.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PF(r,t,e){const s=r.previousIndex;if(null===s)return s;let l=0;return e&&s<e.length&&(l=e[s]),s+t+l}class MF{constructor(){}supports(t){return t instanceof Map||WA(t)}create(){return new jP}}class jP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||WA(t)))throw new gn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(s,l)=>{if(e&&e.key===l)this._maybeAddToChanges(e,s),this._appendAfter=e,e=e._next;else{const m=this._getOrCreateRecordForKey(l,s);e=this._insertBeforeOrAppend(e,m)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let s=e;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const s=t._prev;return e._next=t,e._prev=s,t._prev=e,s&&(s._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const l=this._records.get(t);this._maybeAddToChanges(l,e);const m=l._prev,E=l._next;return m&&(m._next=E),E&&(E._prev=m),l._next=null,l._prev=null,l}const s=new $j(t);return this._records.set(t,s),s.currentValue=e,this._addToAdditions(s),s}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(s=>e(t[s],s))}}class $j{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fD(){return new mD([new DF])}let mD=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(null!=s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||fD()),deps:[[r,new d_,new fi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(null!=s)return s;throw new gn(901,!1)}}return r.\u0275prov=vr({token:r,providedIn:"root",factory:fD}),r})();function QP(){return new _T([new MF])}let _T=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||QP()),deps:[[r,new d_,new fi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(s)return s;throw new gn(901,!1)}}return r.\u0275prov=vr({token:r,providedIn:"root",factory:QP}),r})();const t8=bF(null,"core",[]);let xF=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(Xt(by))},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})(),mS=null;function Uf(){return mS}class HP{}const Mi=new Fn("DocumentToken");let GP=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(){return function i8(){return Xt(LF)}()},providedIn:"platform"}),r})(),LF=(()=>{class r extends GP{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Uf().getBaseHref(this._doc)}onPopState(e){const s=Uf().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=Uf().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,l){BF()?this._history.pushState(e,s,l):this.location.hash=l}replaceState(e,s,l){BF()?this._history.replaceState(e,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:function(){return function s8(){return new LF(Xt(Mi))}()},providedIn:"platform"}),r})();function BF(){return!!window.history.pushState}function FF(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function gD(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function Th(r){return r&&"?"!==r[0]?"?"+r:r}let _D=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(){return Ea(c8)},providedIn:"root"}),r})();const a8=new Fn("appBaseHref");let c8=(()=>{class r extends _D{constructor(e,s){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??Ea(Mi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return FF(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+Th(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${s}${l}`:s}pushState(e,s,l,m){const E=this.prepareExternalUrl(l+Th(m));this._platformLocation.pushState(e,s,E)}replaceState(e,s,l,m){const E=this.prepareExternalUrl(l+Th(m));this._platformLocation.replaceState(e,s,E)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(GP),Xt(a8,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),UF=(()=>{class r{constructor(e){this._subject=new u,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const s=this._locationStrategy.getBaseHref();this._baseHref=gD(WP(s)),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+Th(s))}normalize(e){return r.stripTrailingSlash(function u8(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,WP(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,s="",l=null){this._locationStrategy.pushState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Th(s)),l)}replaceState(e,s="",l=null){this._locationStrategy.replaceState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Th(s)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(l=>l(e,s))}subscribe(e,s,l){return this._subject.subscribe({next:e,error:s,complete:l})}}return r.normalizeQueryParams=Th,r.joinWithSlash=FF,r.stripTrailingSlash=gD,r.\u0275fac=function(e){return new(e||r)(Xt(_D))},r.\u0275prov=vr({token:r,factory:function(){return function VF(){return new UF(Xt(_D))}()},providedIn:"root"}),r})();function WP(r){return r.replace(/\/index.html$/,"")}function nM(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const s=e.indexOf("="),[l,m]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(l.trim()===t)return decodeURIComponent(m)}return null}let SD=(()=>{class r{constructor(e,s,l,m){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=l,this._renderer=m,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Zm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${xo(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(l=>{s?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}}return r.\u0275fac=function(e){return new(e||r)(gt(mD),gt(_T),gt(Ni),gt(bd))},r.\u0275dir=mr({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class uU{constructor(t,e,s,l){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oM=(()=>{class r{constructor(e,s,l){this._viewContainer=e,this._template=s,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=this._viewContainer;e.forEachOperation((l,m,E)=>{if(null==l.previousIndex)s.createEmbeddedView(this._template,new uU(l.item,this._ngForOf,-1,-1),null===E?void 0:E);else if(null==E)s.remove(null===m?void 0:m);else if(null!==m){const I=s.get(m);s.move(I,E),lU(I,l)}});for(let l=0,m=s.length;l<m;l++){const I=s.get(l).context;I.index=l,I.count=m,I.ngForOf=this._ngForOf}e.forEachIdentityChange(l=>{lU(s.get(l.currentIndex),l)})}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(gt(G),gt(S),gt(mD))},r.\u0275dir=mr({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function lU(r,t){r.context.$implicit=t.item}let AS=(()=>{class r{constructor(e,s){this._viewContainer=e,this._context=new dU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){DT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){DT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(gt(G),gt(S))},r.\u0275dir=mr({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class dU{constructor(){this.$implicit=null,this.ngIf=null}}function DT(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${xo(t)}'.`)}class sM{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let kT=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const s=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||s,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),s}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let s=0;s<this._defaultViews.length;s++)this._defaultViews[s].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),r})(),NT=(()=>{class r{constructor(e,s,l){this.ngSwitch=l,l._addCase(),this._view=new sM(e,s)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(gt(G),gt(S),gt(kT,9))},r.\u0275dir=mr({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),r})(),hU=(()=>{class r{constructor(e,s,l){l._addDefault(new sM(e,s))}}return r.\u0275fac=function(e){return new(e||r)(gt(G),gt(S),gt(kT,9))},r.\u0275dir=mr({type:r,selectors:[["","ngSwitchDefault",""]],standalone:!0}),r})(),aM=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const s=this._viewContainerRef;if(this._viewRef&&s.remove(s.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:l,ngTemplateOutletContext:m,ngTemplateOutletInjector:E}=this;this._viewRef=s.createEmbeddedView(l,m,E?{injector:E}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(e){return new(e||r)(gt(G))},r.\u0275dir=mr({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[za]}),r})(),Es=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const Iu="browser";class _M{}class jf extends HP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sl extends jf{static makeCurrent(){!function r8(r){mS||(mS=r)}(new sl)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function rs(){return BT=BT||document.querySelector("base"),BT?BT.getAttribute("href"):null}();return null==e?null:function Ie(r){Iy=Iy||document.createElement("a"),Iy.setAttribute("href",r);const t=Iy.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){BT=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return nM(document.cookie,t)}}let Iy,BT=null;const Pe=new Fn("TRANSITION_ID"),xU=[{provide:uF,useFactory:function Jo(r,t,e){return()=>{e.get(lT).donePromise.then(()=>{const s=Uf(),l=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let m=0;m<l.length;m++)s.remove(l[m])})}},deps:[Pe,Mi,yc],multi:!0}];let wM=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const Tu=new Fn("EventManagerPlugins");let Ty=(()=>{class r{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,l){return this._findPluginFor(s).addEventListener(e,s,l)}addGlobalEventListener(e,s,l){return this._findPluginFor(s).addGlobalEventListener(e,s,l)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const l=this._plugins;for(let m=0;m<l.length;m++){const E=l[m];if(E.supports(e))return this._eventNameToPlugin.set(e,E),E}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Tu),Xt(gi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class ND{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const l=Uf().getGlobalEventTarget(this._doc,t);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,s)}}let oe=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),_v=(()=>{class r extends oe{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,l){e.forEach(m=>{const E=this._doc.createElement("style");E.textContent=m,l.push(s.appendChild(E))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(FT),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(e,l,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(FT))}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function FT(r){Uf().remove(r)}const RM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CS=/%COMP%/g;function UT(r,t,e){for(let s=0;s<t.length;s++){let l=t[s];Array.isArray(l)?UT(r,l,e):(l=l.replace(CS,r),e.push(l))}return e}function LD(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let IS=(()=>{class r{constructor(e,s,l){this.eventManager=e,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new VT(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case hu.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new Ld(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(e),l}case 1:case hu.ShadowDom:return new Bd(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const l=UT(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(Xt(Ty),Xt(_v),Xt(cS))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class VT{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(RM[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Ao(t)?t.content:t).appendChild(e)}insertBefore(t,e,s){t&&(Ao(t)?t.content:t).insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,l){if(l){e=l+":"+e;const m=RM[l];m?t.setAttributeNS(m,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const l=RM[s];l?t.removeAttributeNS(l,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,l){l&(Vc.DashCase|Vc.Important)?t.style.setProperty(e,s,l&Vc.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&Vc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,LD(s)):this.eventManager.addEventListener(t,e,LD(s))}}function Ao(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class Ld extends VT{constructor(t,e,s,l){super(t),this.component=s;const m=UT(l+"-"+s.id,s.styles,[]);e.addStyles(m),this.contentAttr=function MD(r){return"_ngcontent-%COMP%".replace(CS,r)}(l+"-"+s.id),this.hostAttr=function xD(r){return"_nghost-%COMP%".replace(CS,r)}(l+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class Bd extends VT{constructor(t,e,s,l){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=UT(l.id,l.styles,[]);for(let E=0;E<m.length;E++){const I=document.createElement("style");I.textContent=m[E],this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Yt=(()=>{class r extends ND{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,l){return e.addEventListener(s,l,!1),()=>this.removeEventListener(e,s,l)}removeEventListener(e,s,l){return e.removeEventListener(s,l)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const Ry=["alt","control","meta","shift"],pr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sc={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let BD=(()=>{class r extends ND{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,s,l){const m=r.parseEventName(s),E=r.eventCallback(m.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Uf().onAndCancel(e,m.domEventName,E))}static parseEventName(e){const s=e.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const m=r._normalizeKey(s.pop());let E="",I=s.indexOf("code");if(I>-1&&(s.splice(I,1),E="code."),Ry.forEach(F=>{const ee=s.indexOf(F);ee>-1&&(s.splice(ee,1),E+=F+".")}),E+=m,0!=s.length||0===m.length)return null;const k={};return k.domEventName=l,k.fullKey=E,k}static matchEventFullKeyCode(e,s){let l=pr[e.key]||e.key,m="";return s.indexOf("code.")>-1&&(l=e.code,m="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Ry.forEach(E=>{E!==l&&(0,sc[E])(e)&&(m+=E+".")}),m+=l,m===s)}static eventCallback(e,s,l){return m=>{r.matchEventFullKeyCode(m,e)&&l.runGuarded(()=>s(m))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const NM=bF(t8,"browser",[{provide:tD,useValue:Iu},{provide:dF,useValue:function n6(){sl.makeCurrent()},multi:!0},{provide:Mi,useFactory:function i6(){return function mC(r){Gu=r}(document),document},deps:[]}]),QT=new Fn(""),FU=[{provide:hT,useClass:class jl{addToWindow(t){Ho.getAngularTestability=(s,l=!0)=>{const m=t.findTestabilityInTree(s,l);if(null==m)throw new Error("Could not find testability for element.");return m},Ho.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ho.getAllAngularRootElements=()=>t.getAllRootElements(),Ho.frameworkStabilizers||(Ho.frameworkStabilizers=[]),Ho.frameworkStabilizers.push(s=>{const l=Ho.getAllAngularTestabilities();let m=l.length,E=!1;const I=function(k){E=E||k,m--,0==m&&s(E)};l.forEach(function(k){k.whenStable(I)})})}findTestabilityInTree(t,e,s){return null==e?null:t.getTestability(e)??(s?Uf().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:_F,useClass:pT,deps:[gi,pv,hT]},{provide:pT,useClass:pT,deps:[gi,pv,hT]}],HT=[{provide:I_,useValue:"root"},{provide:Sd,useFactory:function r6(){return new Sd},deps:[]},{provide:Tu,useClass:Yt,multi:!0,deps:[Mi,gi,tD]},{provide:Tu,useClass:BD,multi:!0,deps:[Mi]},{provide:IS,useClass:IS,deps:[Ty,_v,cS]},{provide:ua,useExisting:IS},{provide:oe,useExisting:_v},{provide:_v,useClass:_v,deps:[Mi]},{provide:Ty,useClass:Ty,deps:[Tu,gi]},{provide:_M,useClass:wM,deps:[]},[]];let ac=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:cS,useValue:e.appId},{provide:Pe,useExisting:cS},xU]}}}return r.\u0275fac=function(e){return new(e||r)(Xt(QT,12))},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[...HT,...FU],imports:[Es,xF]}),r})();typeof window<"u"&&window;let xM=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(e){let s=null;return s=e?new(e||r):Xt(HU),s},providedIn:"root"}),r})(),HU=(()=>{class r extends xM{constructor(e){super(),this._doc=e}sanitize(e,s){if(null==s)return null;switch(e){case to.NONE:return s;case to.HTML:return Kc(s,"HTML")?Wc(s):RC(this._doc,String(s)).toString();case to.STYLE:return Kc(s,"Style")?Wc(s):s;case to.SCRIPT:if(Kc(s,"Script"))return Wc(s);throw new Error("unsafe value used in a script context");case to.URL:return Kc(s,"URL")?Wc(s):SA(String(s));case to.RESOURCE_URL:if(Kc(s,"ResourceURL"))return Wc(s);throw new Error(`unsafe value used in a resource URL context (see ${zg})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${zg})`)}}bypassSecurityTrustHtml(e){return function EC(r){return new Zw(r)}(e)}bypassSecurityTrustStyle(e){return function nR(r){return new eR(r)}(e)}bypassSecurityTrustScript(e){return function Ns(r){return new AC(r)}(e)}bypassSecurityTrustUrl(e){return function qB(r){return new tR(r)}(e)}bypassSecurityTrustResourceUrl(e){return function IN(r){return new yC(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:function(e){let s=null;return s=e?new e:function QU(r){return new HU(r.get(Mi))}(Xt(yc)),s},providedIn:"root"}),r})();const{isArray:p6}=Array,{getPrototypeOf:GU,prototype:LM,keys:f6}=Object;function WU(r){if(1===r.length){const t=r[0];if(p6(t))return{args:t,keys:null};if(function KU(r){return r&&"object"==typeof r&&GU(r)===LM}(t)){const e=f6(t);return{args:e.map(s=>t[s]),keys:e}}}return{args:r,keys:null}}const{isArray:m6}=Array;function UD(r){return nt(t=>function zU(r,t){return m6(t)?r(...t):r(t)}(r,t))}function Cg(r,t){return r.reduce((e,s,l)=>(e[s]=t[l],e),{})}function BM(...r){const t=jv(r),{args:e,keys:s}=WU(r),l=new ze(m=>{const{length:E}=e;if(!E)return void m.complete();const I=new Array(E);let k=E,F=E;for(let ee=0;ee<E;ee++){let me=!1;mn(e[ee]).subscribe(new we(m,Le=>{me||(me=!0,F--),I[ee]=Le},()=>k--,void 0,()=>{(!k||!me)&&(F||m.next(s?Cg(s,I):I),m.complete())}))}});return t?l.pipe(UD(t)):l}let YU=(()=>{class r{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(gt(bd),gt(Ni))},r.\u0275dir=mr({type:r}),r})(),Dy=(()=>{class r extends YU{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_o(r)))(s||r)}}(),r.\u0275dir=mr({type:r,features:[Br]}),r})();const Qf=new Fn("NgValueAccessor"),_6={provide:Qf,useExisting:jo(()=>RS),multi:!0},A6=new Fn("CompositionEventMode");let RS=(()=>{class r extends YU{constructor(e,s,l){super(e,s),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function v6(){const r=Uf()?Uf().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(bd),gt(Ni),gt(A6,8))},r.\u0275dir=mr({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&so("input",function(m){return s._handleInput(m.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(m){return s._compositionEnd(m.target.value)})},features:[vo([_6]),Br]}),r})();function Tp(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function fa(r){return null!=r&&"number"==typeof r.length}const Wr=new Fn("NgValidators"),Hf=new Fn("NgAsyncValidators"),Ic=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class OS{static min(t){return function VD(r){return t=>{if(Tp(t.value)||Tp(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function jD(r){return t=>{if(Tp(t.value)||Tp(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function uo(r){return Tp(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function VM(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function qU(r){return Tp(r.value)||Ic.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function JU(r){return t=>Tp(t.value)||!fa(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function jM(r){return t=>fa(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function zi(r){if(!r)return Xs;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),s=>{if(Tp(s.value))return null;const l=s.value;return t.test(l)?null:{pattern:{requiredPattern:e,actualValue:l}}}}(t)}static nullValidator(t){return null}static compose(t){return HD(t)}static composeAsync(t){return sr(t)}}function Xs(r){return null}function QD(r){return null!=r}function XU(r){return rn(r)?dc(r):r}function $U(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function ma(r,t){return t.map(e=>e(r))}function QM(r){return r.map(t=>function No(r){return!r.validate}(t)?t:e=>t.validate(e))}function HD(r){if(!r)return null;const t=r.filter(QD);return 0==t.length?null:function(e){return $U(ma(e,t))}}function hr(r){return null!=r?HD(QM(r)):null}function sr(r){if(!r)return null;const t=r.filter(QD);return 0==t.length?null:function(e){return BM(ma(e,t).map(XU)).pipe(nt($U))}}function Ig(r){return null!=r?sr(QM(r)):null}function Gf(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function ky(r){return r._rawValidators}function DS(r){return r._rawAsyncValidators}function Ru(r){return r?Array.isArray(r)?r:[r]:[]}function xs(r,t){return Array.isArray(r)?r.includes(t):r===t}function yr(r,t){const e=Ru(t);return Ru(r).forEach(l=>{xs(e,l)||e.push(l)}),e}function GD(r,t){return Ru(t).filter(e=>!xs(r,e))}class Ls{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hr(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ig(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Er extends Ls{get formDirective(){return null}get path(){return null}}class fs extends Ls{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bs{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let iu=(()=>{class r extends Bs{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(fs,2))},r.\u0275dir=mr({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&Fr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Br]}),r})(),Bi=(()=>{class r extends Bs{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Er,10))},r.\u0275dir=mr({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&Fr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Br]}),r})();const zT="VALID",KD="INVALID",ou="PENDING",Wf="DISABLED";function To(r){return(Fa(r)?r.validators:r)||null}function Ba(r,t){return(Fa(t)?t.asyncValidators:r)||null}function Fa(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class ms{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===zT}get invalid(){return this.status===KD}get pending(){return this.status==ou}get disabled(){return this.status===Wf}get enabled(){return this.status!==Wf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(yr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(yr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(GD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(GD(t,this._rawAsyncValidators))}hasValidator(t){return xs(this._rawValidators,t)}hasAsyncValidator(t){return xs(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ou,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Wf,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zT,this._forEachChild(s=>{s.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zT||this.status===ou)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wf:zT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ou,this._hasOwnPendingAsyncValidator=!0;const e=XU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,l)=>s&&s._find(l),this)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u,this.statusChanges=new u}_calculateStatus(){return this._allControlsDisabled()?Wf:this.errors?KD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ou)?ou:this._anyControlsHaveStatus(KD)?KD:zT}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fa(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function n3(r){return Array.isArray(r)?hr(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function wp(r){return Array.isArray(r)?Ig(r):r||null}(this._rawAsyncValidators)}}class Po extends ms{constructor(t,e,s){super(To(e),Ba(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function os(r,t,e){r._forEachChild((s,l)=>{if(void 0===e[l])throw new gn(1002,"")})})(this,0,t),Object.keys(t).forEach(s=>{(function Tg(r,t,e){const s=r.controls;if(!(t?Object.keys(s):s).length)throw new gn(1e3,"");if(!s[e])throw new gn(1001,"")})(this,!0,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{const l=this.controls[s];l&&l.patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,l)=>{s.reset(t[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&t(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,l)=>((s.enabled||this.disabled)&&(e[l]=s.value),e))}_reduceChildren(t,e){let s=t;return this._forEachChild((l,m)=>{s=e(s,l,m)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const fr=Po,Fd=new Fn("CallSetDisabledState",{providedIn:"root",factory:()=>wg}),wg="always";function kS(r,t,e=wg){qT(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(r.disabled),function i3(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Dn(r,t)})}(r,t),function Ql(r,t){const e=(s,l)=>{t.valueAccessor.writeValue(s),l&&t.viewToModelUpdate(s)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function Zr(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Dn(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function Fs(r,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function YT(r,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),yv(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function zD(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function qT(r,t){const e=ky(r);null!==t.validator?r.setValidators(Gf(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const s=DS(r);null!==t.asyncValidator?r.setAsyncValidators(Gf(s,t.asyncValidator)):"function"==typeof s&&r.setAsyncValidators([s]);const l=()=>r.updateValueAndValidity();zD(t._rawValidators,l),zD(t._rawAsyncValidators,l)}function yv(r,t){let e=!1;if(null!==r){if(null!==t.validator){const l=ky(r);if(Array.isArray(l)&&l.length>0){const m=l.filter(E=>E!==t.validator);m.length!==l.length&&(e=!0,r.setValidators(m))}}if(null!==t.asyncValidator){const l=DS(r);if(Array.isArray(l)&&l.length>0){const m=l.filter(E=>E!==t.asyncValidator);m.length!==l.length&&(e=!0,r.setAsyncValidators(m))}}}const s=()=>{};return zD(t._rawValidators,s),zD(t._rawAsyncValidators,s),e}function Dn(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Ai(r,t){qT(r,t)}function Xo(r,t){r._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}const T6={provide:Er,useExisting:jo(()=>XT)},JT=(()=>Promise.resolve())();let XT=(()=>{class r extends Er{constructor(e,s,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u,this.form=new Po({},hr(e),Ig(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){JT.then(()=>{const s=this._findContainer(e.path);e.control=s.registerControl(e.name,e.control),kS(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){JT.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){JT.then(()=>{const s=this._findContainer(e.path),l=new Po({});Ai(l,e),s.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){JT.then(()=>{const s=this._findContainer(e.path);s&&s.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,s){JT.then(()=>{this.form.get(e.path).setValue(s)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Xo(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(gt(Wr,10),gt(Hf,10),gt(Fd,8))},r.\u0275dir=mr({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,s){1&e&&so("submit",function(m){return s.onSubmit(m)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vo([T6]),Br]}),r})();function YM(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function s3(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const qM=class extends ms{constructor(t=null,e,s){super(To(e),Ba(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fa(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=s3(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){YM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){YM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){s3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Dh=qM;let l3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),$T=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const qD=new Fn("NgModelWithFormControlWarning"),XD={provide:Er,useExisting:jo(()=>PS)};let PS=(()=>{class r extends Er{constructor(e,s,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return kS(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){YT(e.control||null,e,!1),function Rc(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,Xo(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,l=this.form.get(e.path);s!==l&&(YT(s||null,e),(r=>r instanceof qM)(l)&&(kS(l,e,this.callSetDisabledState),e.control=l))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);Ai(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function Ou(r,t){return yv(r,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qT(this.form,this),this._oldForm&&yv(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(gt(Wr,10),gt(Hf,10),gt(Fd,8))},r.\u0275dir=mr({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&so("submit",function(m){return s.onSubmit(m)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vo([XD]),Br,za]}),r})();const L6={provide:fs,useExisting:jo(()=>tx)};let tx=(()=>{class r extends fs{constructor(e,s,l,m,E){super(),this._ngModelWarningConfig=E,this._added=!1,this.update=new u,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(l),this.valueAccessor=function cc(r,t){if(!t)return null;let e,s,l;return Array.isArray(t),t.forEach(m=>{m.constructor===RS?e=m:function ul(r){return Object.getPrototypeOf(r.constructor)===Dy}(m)?s=m:l=m}),l||s||e||null}(0,m)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Du(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function _i(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(gt(Er,13),gt(Wr,10),gt(Hf,10),gt(Qf,10),gt(qD,8))},r.\u0275dir=mr({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[vo([L6]),Br,za]}),r})(),ux=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[$T]}),r})(),E3=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Fd,useValue:e.callSetDisabledState??wg}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[ux]}),r})(),tk=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:qD,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Fd,useValue:e.callSetDisabledState??wg}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[ux]}),r})();var W6=Y(1648),dx=Y.n(W6),hx=Y(3890),C3=Y.n(hx),I3=Y(6021);let px;try{px=typeof Intl<"u"&&Intl.v8BreakIterator}catch{px=!1}let Op,Oc=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function yU(r){return r===Iu}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!px)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(Xt(tD))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Hl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const e1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Dp(){if(Op)return Op;if("object"!=typeof document||!document)return Op=new Set(e1),Op;let r=document.createElement("input");return Op=new Set(e1.filter(t=>(r.setAttribute("type",t),r.type===t))),Op}let t1,Og,mx;function uc(r){return function fx(){if(null==t1&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>t1=!0}))}finally{t1=t1||!1}return t1}()?r:!!r.capture}function xy(){if(null==Og){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Og=!1,Og;if("scrollBehavior"in document.documentElement.style)Og=!0;else{const r=Element.prototype.scrollTo;Og=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return Og}function Ly(r){return r.composedPath?r.composedPath()[0]:r.target}function r1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function dl(...r){return dc(r,Ds(r))}function kp(r,t){return Ye((e,s)=>{let l=0;e.subscribe(new we(s,m=>r.call(t,m,l++)&&s.next(m)))})}class By{}class o1{}class Kf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const l=e.slice(0,s),m=l.toLowerCase(),E=e.slice(s+1).trim();this.maybeSetNormalizedName(l,m),this.headers.has(m)?this.headers.get(m).push(E):this.headers.set(m,[E])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let s=t[e];const l=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(l,s),this.maybeSetNormalizedName(e,l))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Kf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Kf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Kf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let s=t.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(t.name,e);const l=("a"===t.op?this.headers.get(e):void 0)||[];l.push(...s),this.headers.set(e,l);break;case"d":const m=t.value;if(m){let E=this.headers.get(e);if(!E)return;E=E.filter(I=>-1===m.indexOf(I)),0===E.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,E)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class zf{encodeKey(t){return Ax(t)}encodeValue(t){return Ax(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Y6=/%(\d[a-f0-9])/gi,vx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ax(r){return encodeURIComponent(r).replace(Y6,(t,e)=>vx[e]??t)}function LS(r){return`${r}`}class Yf{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new zf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Np(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(l=>{const m=l.indexOf("="),[E,I]=-1==m?[t.decodeKey(l),""]:[t.decodeKey(l.slice(0,m)),t.decodeValue(l.slice(m+1))],k=e.get(E)||[];k.push(I),e.set(E,k)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const s=t.fromObject[e],l=Array.isArray(s)?s.map(LS):[LS(s)];this.map.set(e,l)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(s=>{const l=t[s];Array.isArray(l)?l.forEach(m=>{e.push({param:s,value:m,op:"a"})}):e.push({param:s,value:l,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Yf({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(LS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let s=this.map.get(t.param)||[];const l=s.indexOf(LS(t.value));-1!==l&&s.splice(l,1),s.length>0?this.map.set(t.param,s):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class w3{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function nk(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function yx(r){return typeof Blob<"u"&&r instanceof Blob}function bv(r){return typeof FormData<"u"&&r instanceof FormData}class Fy{constructor(t,e,s,l){let m;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Dg(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==s?s:null,m=l):m=s,m&&(this.reportProgress=!!m.reportProgress,this.withCredentials=!!m.withCredentials,m.responseType&&(this.responseType=m.responseType),m.headers&&(this.headers=m.headers),m.context&&(this.context=m.context),m.params&&(this.params=m.params)),this.headers||(this.headers=new Kf),this.context||(this.context=new w3),this.params){const E=this.params.toString();if(0===E.length)this.urlWithParams=e;else{const I=e.indexOf("?");this.urlWithParams=e+(-1===I?"?":I<e.length-1?"&":"")+E}}else this.params=new Yf,this.urlWithParams=e}serializeBody(){return null===this.body?null:nk(this.body)||yx(this.body)||bv(this.body)||function R3(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bv(this.body)?null:yx(this.body)?this.body.type||null:nk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,s=t.url||this.url,l=t.responseType||this.responseType,m=void 0!==t.body?t.body:this.body,E=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,I=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let k=t.headers||this.headers,F=t.params||this.params;const ee=t.context??this.context;return void 0!==t.setHeaders&&(k=Object.keys(t.setHeaders).reduce((me,Le)=>me.set(Le,t.setHeaders[Le]),k)),t.setParams&&(F=Object.keys(t.setParams).reduce((me,Le)=>me.set(Le,t.setParams[Le]),F)),new Fy(e,s,m,{params:F,headers:k,context:ee,reportProgress:I,responseType:l,withCredentials:E})}}var Ua=(()=>((Ua=Ua||{})[Ua.Sent=0]="Sent",Ua[Ua.UploadProgress=1]="UploadProgress",Ua[Ua.ResponseHeader=2]="ResponseHeader",Ua[Ua.DownloadProgress=3]="DownloadProgress",Ua[Ua.Response=4]="Response",Ua[Ua.User=5]="User",Ua))();class Ex{constructor(t,e=200,s="OK"){this.headers=t.headers||new Kf,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||s,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class bx extends Ex{constructor(t={}){super(t),this.type=Ua.ResponseHeader}clone(t={}){return new bx({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class qf extends Ex{constructor(t={}){super(t),this.type=Ua.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new qf({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class O3 extends Ex{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Sx(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let rk=(()=>{class r{constructor(e){this.handler=e}request(e,s,l={}){let m;if(e instanceof Fy)m=e;else{let k,F;k=l.headers instanceof Kf?l.headers:new Kf(l.headers),l.params&&(F=l.params instanceof Yf?l.params:new Yf({fromObject:l.params})),m=new Fy(e,s,void 0!==l.body?l.body:null,{headers:k,context:l.context,params:F,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const E=dl(m).pipe(function K6(r,t){return L(t)?tr(r,t,1):tr(r,1)}(k=>this.handler.handle(k)));if(e instanceof Fy||"events"===l.observe)return E;const I=E.pipe(kp(k=>k instanceof qf));switch(l.observe||"body"){case"body":switch(m.responseType){case"arraybuffer":return I.pipe(nt(k=>{if(null!==k.body&&!(k.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return k.body}));case"blob":return I.pipe(nt(k=>{if(null!==k.body&&!(k.body instanceof Blob))throw new Error("Response is not a Blob.");return k.body}));case"text":return I.pipe(nt(k=>{if(null!==k.body&&"string"!=typeof k.body)throw new Error("Response is not a string.");return k.body}));default:return I.pipe(nt(k=>k.body))}case"response":return I;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new Yf).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,l={}){return this.request("PATCH",e,Sx(l,s))}post(e,s,l={}){return this.request("POST",e,Sx(l,s))}put(e,s,l={}){return this.request("PUT",e,Sx(l,s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(By))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function D3(r,t){return t(r)}function q6(r,t){return(e,s)=>t.intercept(e,{handle:l=>r(l,s)})}const X6=new Fn("HTTP_INTERCEPTORS"),s1=new Fn("HTTP_INTERCEPTOR_FNS");function k3(){let r=null;return(t,e)=>(null===r&&(r=(Ea(X6,{optional:!0})??[]).reduceRight(q6,D3)),r(t,e))}let N3=(()=>{class r extends By{constructor(e,s){super(),this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=Array.from(new Set(this.injector.get(s1)));this.chain=s.reduceRight((l,m)=>function J6(r,t,e){return(s,l)=>e.runInContext(()=>t(s,m=>r(m,l)))}(l,m,this.injector),D3)}return this.chain(e,s=>this.backend.handle(s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(o1),Xt(oh))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const n7=/^\)\]\}',?\n/;let M3=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ze(s=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((We,it)=>l.setRequestHeader(We,it.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const We=e.detectContentTypeHeader();null!==We&&l.setRequestHeader("Content-Type",We)}if(e.responseType){const We=e.responseType.toLowerCase();l.responseType="json"!==We?We:"text"}const m=e.serializeBody();let E=null;const I=()=>{if(null!==E)return E;const We=l.statusText||"OK",it=new Kf(l.getAllResponseHeaders()),bt=function r7(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(l)||e.url;return E=new bx({headers:it,status:l.status,statusText:We,url:bt}),E},k=()=>{let{headers:We,status:it,statusText:bt,url:Jt}=I(),tn=null;204!==it&&(tn=typeof l.response>"u"?l.responseText:l.response),0===it&&(it=tn?200:0);let Rn=it>=200&&it<300;if("json"===e.responseType&&"string"==typeof tn){const n=tn;tn=tn.replace(n7,"");try{tn=""!==tn?JSON.parse(tn):null}catch(i){tn=n,Rn&&(Rn=!1,tn={error:i,text:tn})}}Rn?(s.next(new qf({body:tn,headers:We,status:it,statusText:bt,url:Jt||void 0})),s.complete()):s.error(new O3({error:tn,headers:We,status:it,statusText:bt,url:Jt||void 0}))},F=We=>{const{url:it}=I(),bt=new O3({error:We,status:l.status||0,statusText:l.statusText||"Unknown Error",url:it||void 0});s.error(bt)};let ee=!1;const me=We=>{ee||(s.next(I()),ee=!0);let it={type:Ua.DownloadProgress,loaded:We.loaded};We.lengthComputable&&(it.total=We.total),"text"===e.responseType&&!!l.responseText&&(it.partialText=l.responseText),s.next(it)},Le=We=>{let it={type:Ua.UploadProgress,loaded:We.loaded};We.lengthComputable&&(it.total=We.total),s.next(it)};return l.addEventListener("load",k),l.addEventListener("error",F),l.addEventListener("timeout",F),l.addEventListener("abort",F),e.reportProgress&&(l.addEventListener("progress",me),null!==m&&l.upload&&l.upload.addEventListener("progress",Le)),l.send(m),s.next({type:Ua.Sent}),()=>{l.removeEventListener("error",F),l.removeEventListener("abort",F),l.removeEventListener("load",k),l.removeEventListener("timeout",F),e.reportProgress&&(l.removeEventListener("progress",me),null!==m&&l.upload&&l.upload.removeEventListener("progress",Le)),l.readyState!==l.DONE&&l.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(Xt(_M))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const ik=new Fn("XSRF_ENABLED"),x3="XSRF-TOKEN",L3=new Fn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>x3}),B3="X-XSRF-TOKEN",F3=new Fn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>B3});class U3{}let i7=(()=>{class r{constructor(e,s,l){this.doc=e,this.platform=s,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=nM(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(tD),Xt(L3))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function V3(r,t){const e=r.url.toLowerCase();if(!Ea(ik)||"GET"===r.method||"HEAD"===r.method||e.startsWith("http://")||e.startsWith("https://"))return t(r);const s=Ea(U3).getToken(),l=Ea(F3);return null!=s&&!r.headers.has(l)&&(r=r.clone({headers:r.headers.set(l,s)})),t(r)}var ga=(()=>((ga=ga||{})[ga.Interceptors=0]="Interceptors",ga[ga.LegacyInterceptors=1]="LegacyInterceptors",ga[ga.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ga[ga.NoXsrfProtection=3]="NoXsrfProtection",ga[ga.JsonpSupport=4]="JsonpSupport",ga[ga.RequestsMadeViaParent=5]="RequestsMadeViaParent",ga))();function Vy(r,t){return{\u0275kind:r,\u0275providers:t}}function j3(...r){const t=[rk,M3,N3,{provide:By,useExisting:N3},{provide:o1,useExisting:M3},{provide:s1,useValue:V3,multi:!0},{provide:ik,useValue:!0},{provide:U3,useClass:i7}];for(const e of r)t.push(...e.\u0275providers);return function ON(r){return{\u0275providers:r}}(t)}const Q3=new Fn("LEGACY_INTERCEPTOR_FN");function jy({cookieName:r,headerName:t}){const e=[];return void 0!==r&&e.push({provide:L3,useValue:r}),void 0!==t&&e.push({provide:F3,useValue:t}),Vy(ga.CustomXsrfConfiguration,e)}let u7=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[j3(Vy(ga.LegacyInterceptors,[{provide:Q3,useFactory:k3},{provide:s1,useExisting:Q3,multi:!0}]),jy({cookieName:x3,headerName:B3}))]}),r})();class Cx extends ht{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:s}=this;if(t)throw e;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}}function FS(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function gk(r,t,e){const s=L(r)||t||e?{next:r,error:t,complete:e}:r;return s?Ye((l,m)=>{var E;null===(E=s.subscribe)||void 0===E||E.call(s);let I=!0;l.subscribe(new we(m,k=>{var F;null===(F=s.next)||void 0===F||F.call(s,k),m.next(k)},()=>{var k;I=!1,null===(k=s.complete)||void 0===k||k.call(s),m.complete()},k=>{var F;I=!1,null===(F=s.error)||void 0===F||F.call(s,k),m.error(k)},()=>{var k,F;I&&(null===(k=s.unsubscribe)||void 0===k||k.call(s)),null===(F=s.finalize)||void 0===F||F.call(s)}))}):Fe}class G7 extends U{constructor(t,e){super()}schedule(t,e=0){return this}}const _k={setInterval(...r){const{delegate:t}=_k;return(t?.setInterval||setInterval)(...r)},clearInterval(r){const{delegate:t}=_k;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};class Ox extends G7{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const s=this.id,l=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(l,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(t,e,s=0){return _k.setInterval(t.flush.bind(t,this),s)}recycleAsyncId(t,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;_k.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let l,s=!1;try{this.work(t)}catch(m){s=!0,l=m||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,H(s,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Dx={now:()=>(Dx.delegate||Date).now(),delegate:void 0};class u1{constructor(t,e=u1.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,s){return new this.schedulerActionCtor(this,t).schedule(s,e)}}u1.now=Dx.now;class kx extends u1{constructor(t,e=u1.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}}const Nx=new kx(Ox),vk=Nx;function Px(r,t=Nx){return Ye((e,s)=>{let l=null,m=null,E=null;const I=()=>{if(l){l.unsubscribe(),l=null;const F=m;m=null,s.next(F)}};function k(){const F=E+r,ee=t.now();if(ee<F)return l=this.schedule(void 0,F-ee),void s.add(l);I()}e.subscribe(new we(s,F=>{m=F,E=t.now(),l||(l=t.schedule(k,r),s.add(l))},()=>{I(),s.complete()},void 0,()=>{m=l=null}))})}function oV(r){return kp((t,e)=>r<=e)}function sV(r,t=Fe){return r=r??W7,Ye((e,s)=>{let l,m=!0;e.subscribe(new we(s,E=>{const I=t(E);(m||!r(l,I))&&(m=!1,l=I,s.next(E))}))})}function W7(r,t){return r===t}function su(r){return Ye((t,e)=>{mn(r).subscribe(new we(e,()=>e.complete(),te)),!e.closed&&t.subscribe(e)})}function $s(r){return null!=r&&"false"!=`${r}`}function kg(r,t=0){return function aV(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function Ak(r){return Array.isArray(r)?r:[r]}function Va(r){return null==r?"":"string"==typeof r?r:`${r}px`}function Jf(r){return r instanceof Ni?r.nativeElement:r}let cV=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),K7=(()=>{class r{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,s)=>this._cleanupObserver(s))}observe(e){const s=Jf(e);return new ze(l=>{const E=this._observeElement(s).subscribe(l);return()=>{E.unsubscribe(),this._unobserveElement(s)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const s=new ht,l=this._mutationObserverFactory.create(m=>s.next(m));l&&l.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:l,stream:s,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:s,stream:l}=this._observedElements.get(e);s&&s.disconnect(),l.complete(),this._observedElements.delete(e)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(cV))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),z7=(()=>{class r{constructor(e,s,l){this._contentObserver=e,this._elementRef=s,this._ngZone=l,this.event=new u,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=$s(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=kg(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Px(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(gt(K7),gt(Ni),gt(gi))},r.\u0275dir=mr({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),uV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[cV]}),r})();function yk(r,t,e){r?Xi(e,r,t):t()}function Ek(...r){return function J7(){return jp(1)}()(dc(r,Ds(r)))}function US(...r){const t=Ds(r);return Ye((e,s)=>{(t?Ek(r,e,t):Ek(r,e)).subscribe(s)})}const bk=new Set;let VS,rr=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$7}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function X7(r){if(!bk.has(r))try{VS||(VS=document.createElement("style"),VS.setAttribute("type","text/css"),document.head.appendChild(VS)),VS.sheet&&(VS.sheet.insertRule(`@media ${r} {body{ }}`,0),bk.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Oc))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function $7(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let Mx=(()=>{class r{constructor(e,s){this._mediaMatcher=e,this._zone=s,this._queries=new Map,this._destroySubject=new ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return lV(Ak(e)).some(l=>this._registerQuery(l).mql.matches)}observe(e){let m=function Y7(...r){const t=Ds(r),e=jv(r),{args:s,keys:l}=WU(r);if(0===s.length)return dc([],t);const m=new ze(function q7(r,t,e=Fe){return s=>{yk(t,()=>{const{length:l}=r,m=new Array(l);let E=l,I=l;for(let k=0;k<l;k++)yk(t,()=>{const F=dc(r[k],t);let ee=!1;F.subscribe(new we(s,me=>{m[k]=me,ee||(ee=!0,I--),I||s.next(e(m.slice()))},()=>{--E||s.complete()}))},s)},s)}}(s,t,l?E=>Cg(l,E):Fe));return e?m.pipe(UD(e)):m}(lV(Ak(e)).map(E=>this._registerQuery(E).observable));return m=Ek(m.pipe(vl(1)),m.pipe(oV(1),Px(0))),m.pipe(nt(E=>{const I={matches:!1,breakpoints:{}};return E.forEach(({matches:k,query:F})=>{I.matches=I.matches||k,I.breakpoints[F]=k}),I}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const s=this._mediaMatcher.matchMedia(e),m={observable:new ze(E=>{const I=k=>this._zone.run(()=>E.next(k));return s.addListener(I),()=>{s.removeListener(I)}}).pipe(US(s),nt(({matches:E})=>({query:e,matches:E})),su(this._destroySubject)),mql:s};return this._queries.set(e,m),m}}return r.\u0275fac=function(e){return new(e||r)(Xt(rr),Xt(gi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function lV(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Ck(r,t){return(r.getAttribute(t)||"").match(/\S+/g)||[]}const dV="cdk-describedby-message",Ik="cdk-describedby-host";let xx=0,Lx=(()=>{class r{constructor(e,s){this._platform=s,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+xx++,this._document=e,this._id=Ea(cS)+"-"+xx++}describe(e,s,l){if(!this._canBeDescribed(e,s))return;const m=Bx(s,l);"string"!=typeof s?(Sv(s,this._id),this._messageRegistry.set(m,{messageElement:s,referenceCount:0})):this._messageRegistry.has(m)||this._createMessageElement(s,l),this._isElementDescribedByMessage(e,m)||this._addMessageReference(e,m)}removeDescription(e,s,l){if(!s||!this._isElementNode(e))return;const m=Bx(s,l);if(this._isElementDescribedByMessage(e,m)&&this._removeMessageReference(e,m),"string"==typeof s){const E=this._messageRegistry.get(m);E&&0===E.referenceCount&&this._deleteMessageElement(m)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Ik}="${this._id}"]`);for(let s=0;s<e.length;s++)this._removeCdkDescribedByReferenceIds(e[s]),e[s].removeAttribute(Ik);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,s){const l=this._document.createElement("div");Sv(l,this._id),l.textContent=e,s&&l.setAttribute("role",s),this._createMessagesContainer(),this._messagesContainer.appendChild(l),this._messageRegistry.set(Bx(e,s),{messageElement:l,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",s=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let m=0;m<s.length;m++)s[m].remove();const l=this._document.createElement("div");l.style.visibility="hidden",l.classList.add(e),l.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&l.setAttribute("platform","server"),this._document.body.appendChild(l),this._messagesContainer=l}_removeCdkDescribedByReferenceIds(e){const s=Ck(e,"aria-describedby").filter(l=>0!=l.indexOf(dV));e.setAttribute("aria-describedby",s.join(" "))}_addMessageReference(e,s){const l=this._messageRegistry.get(s);(function e9(r,t,e){const s=Ck(r,t);s.some(l=>l.trim()==e.trim())||(s.push(e.trim()),r.setAttribute(t,s.join(" ")))})(e,"aria-describedby",l.messageElement.id),e.setAttribute(Ik,this._id),l.referenceCount++}_removeMessageReference(e,s){const l=this._messageRegistry.get(s);l.referenceCount--,function Ng(r,t,e){const l=Ck(r,t).filter(m=>m!=e.trim());l.length?r.setAttribute(t,l.join(" ")):r.removeAttribute(t)}(e,"aria-describedby",l.messageElement.id),e.removeAttribute(Ik)}_isElementDescribedByMessage(e,s){const l=Ck(e,"aria-describedby"),m=this._messageRegistry.get(s),E=m&&m.messageElement.id;return!!E&&-1!=l.indexOf(E)}_canBeDescribed(e,s){if(!this._isElementNode(e))return!1;if(s&&"object"==typeof s)return!0;const l=null==s?"":`${s}`.trim(),m=e.getAttribute("aria-label");return!(!l||m&&m.trim()===l)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(Oc))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Bx(r,t){return"string"==typeof r?`${t||""}/${r}`:r}function Sv(r,t){r.id||(r.id=`${dV}-${t}-${xx++}`)}class Fx{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ht,this._typeaheadSubscription=U.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ht,this.change=new ht,t instanceof A&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const l=e.toArray().indexOf(this._activeItem);l>-1&&l!==this._activeItemIndex&&(this._activeItemIndex=l)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(gk(e=>this._pressedLetters.push(e)),Px(t),kp(()=>this._pressedLetters.length>0),nt(()=>this._pressedLetters.join(""))).subscribe(e=>{const s=this._getItemsArray();for(let l=1;l<s.length+1;l++){const m=(this._activeItemIndex+l)%s.length,E=s[m];if(!this._skipPredicateFn(E)&&0===E.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(m);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,l=["altKey","ctrlKey","metaKey","shiftKey"].every(m=>!t[m]||this._allowedModifierKeys.indexOf(m)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&l){this.setNextItemActive();break}return;case 38:if(this._vertical&&l){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&l){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&l){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&l){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&l){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&l){const m=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(m>0?m:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&l){const m=this._activeItemIndex+this._pageUpAndDown.delta,E=this._getItemsArray().length;this._setActiveItemByIndex(m<E?m:E-1,-1);break}return;default:return void((l||FS(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),s="number"==typeof t?t:e.indexOf(t);this._activeItem=e[s]??null,this._activeItemIndex=s}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let s=1;s<=e.length;s++){const l=(this._activeItemIndex+t*s+e.length)%e.length;if(!this._skipPredicateFn(e[l]))return void this.setActiveItem(l)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const s=this._getItemsArray();if(s[t]){for(;this._skipPredicateFn(s[t]);)if(!s[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof A?this._items.toArray():this._items}}class hV extends Fx{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Tk extends Fx{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function au(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}function Cv(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Qx=new Fn("cdk-input-modality-detector-options"),Hx={ignoreKeys:[18,17,224,91,16]},Hy=uc({passive:!0,capture:!0});let Wl=(()=>{class r{constructor(e,s,l,m){this._platform=e,this._mostRecentTarget=null,this._modality=new Cx(null),this._lastTouchMs=0,this._onKeydown=E=>{this._options?.ignoreKeys?.some(I=>I===E.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ly(E))},this._onMousedown=E=>{Date.now()-this._lastTouchMs<650||(this._modality.next(au(E)?"keyboard":"mouse"),this._mostRecentTarget=Ly(E))},this._onTouchstart=E=>{Cv(E)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ly(E))},this._options={...Hx,...m},this.modalityDetected=this._modality.pipe(oV(1)),this.modalityChanged=this.modalityDetected.pipe(sV()),e.isBrowser&&s.runOutsideAngular(()=>{l.addEventListener("keydown",this._onKeydown,Hy),l.addEventListener("mousedown",this._onMousedown,Hy),l.addEventListener("touchstart",this._onTouchstart,Hy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hy),document.removeEventListener("mousedown",this._onMousedown,Hy),document.removeEventListener("touchstart",this._onTouchstart,Hy))}}return r.\u0275fac=function(e){return new(e||r)(Xt(Oc),Xt(gi),Xt(Mi),Xt(Qx,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const zr=new Fn("liveAnnouncerElement",{providedIn:"root",factory:function o9(){return null}}),p1=new Fn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let f1=0,m1=(()=>{class r{constructor(e,s,l,m){this._ngZone=s,this._defaultOptions=m,this._document=l,this._liveElement=e||this._createLiveElement()}announce(e,...s){const l=this._defaultOptions;let m,E;return 1===s.length&&"number"==typeof s[0]?E=s[0]:[m,E]=s,this.clear(),clearTimeout(this._previousTimeout),m||(m=l&&l.politeness?l.politeness:"polite"),null==E&&l&&(E=l.duration),this._liveElement.setAttribute("aria-live",m),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(I=>this._currentResolve=I)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof E&&(this._previousTimeout=setTimeout(()=>this.clear(),E)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",s=this._document.getElementsByClassName(e),l=this._document.createElement("div");for(let m=0;m<s.length;m++)s[m].remove();return l.classList.add(e),l.classList.add("cdk-visually-hidden"),l.setAttribute("aria-atomic","true"),l.setAttribute("aria-live","polite"),l.id="cdk-live-announcer-"+f1++,this._document.body.appendChild(l),l}_exposeAnnouncerToModals(e){const s=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let l=0;l<s.length;l++){const m=s[l],E=m.getAttribute("aria-owns");E?-1===E.indexOf(e)&&m.setAttribute("aria-owns",E+" "+e):m.setAttribute("aria-owns",e)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(zr,8),Xt(gi),Xt(Mi),Xt(p1,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Iv=new Fn("cdk-focus-monitor-default-options"),wk=uc({passive:!0,capture:!0});let Rk=(()=>{class r{constructor(e,s,l,m,E){this._ngZone=e,this._platform=s,this._inputModalityDetector=l,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht,this._rootNodeFocusAndBlurListener=I=>{for(let F=Ly(I);F;F=F.parentElement)"focus"===I.type?this._onFocus(I,F):this._onBlur(I,F)},this._document=m,this._detectionMode=E?.detectionMode||0}monitor(e,s=!1){const l=Jf(e);if(!this._platform.isBrowser||1!==l.nodeType)return dl(null);const m=function _x(r){if(function gx(){if(null==mx){const r=typeof document<"u"?document.head:null;mx=!(!r||!r.createShadowRoot&&!r.attachShadow)}return mx}()){const t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(l)||this._getDocument(),E=this._elementInfo.get(l);if(E)return s&&(E.checkChildren=!0),E.subject;const I={checkChildren:s,subject:new ht,rootNode:m};return this._elementInfo.set(l,I),this._registerGlobalListeners(I),I.subject}stopMonitoring(e){const s=Jf(e),l=this._elementInfo.get(s);l&&(l.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(l))}focusVia(e,s,l){const m=Jf(e);m===this._getDocument().activeElement?this._getClosestElementsInfo(m).forEach(([I,k])=>this._originChanged(I,s,k)):(this._setOrigin(s),"function"==typeof m.focus&&m.focus(l))}ngOnDestroy(){this._elementInfo.forEach((e,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,s){e.classList.toggle("cdk-focused",!!s),e.classList.toggle("cdk-touch-focused","touch"===s),e.classList.toggle("cdk-keyboard-focused","keyboard"===s),e.classList.toggle("cdk-mouse-focused","mouse"===s),e.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(e,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,s){const l=this._elementInfo.get(s),m=Ly(e);!l||!l.checkChildren&&s!==m||this._originChanged(s,this._getFocusOrigin(m),l)}_onBlur(e,s){const l=this._elementInfo.get(s);!l||l.checkChildren&&e.relatedTarget instanceof Node&&s.contains(e.relatedTarget)||(this._setClasses(s),this._emitOrigin(l,null))}_emitOrigin(e,s){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(s))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const s=e.rootNode,l=this._rootNodeFocusListenerCount.get(s)||0;l||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,wk),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,wk)}),this._rootNodeFocusListenerCount.set(s,l+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(su(this._stopInputModalityDetector)).subscribe(m=>{this._setOrigin(m,!0)}))}_removeGlobalListeners(e){const s=e.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const l=this._rootNodeFocusListenerCount.get(s);l>1?this._rootNodeFocusListenerCount.set(s,l-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wk),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wk),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,s,l){this._setClasses(e,s),this._emitOrigin(l,s),this._lastFocusOrigin=s}_getClosestElementsInfo(e){const s=[];return this._elementInfo.forEach((l,m)=>{(m===e||l.checkChildren&&m.contains(e))&&s.push([m,l])}),s}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:s,mostRecentModality:l}=this._inputModalityDetector;if("mouse"!==l||!s||s===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const m=e.labels;if(m)for(let E=0;E<m.length;E++)if(m[E].contains(s))return!0;return!1}}return r.\u0275fac=function(e){return new(e||r)(Xt(gi),Xt(Oc),Xt(Wl),Xt(Mi,8),Xt(Iv,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Gx="cdk-high-contrast-black-on-white",Ok="cdk-high-contrast-white-on-black",Wx="cdk-high-contrast-active";let Dk=(()=>{class r{constructor(e,s){this._platform=e,this._document=s,this._breakpointSubscription=Ea(Mx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const s=this._document.defaultView||window,l=s&&s.getComputedStyle?s.getComputedStyle(e):null,m=(l&&l.backgroundColor||"").replace(/ /g,"");switch(e.remove(),m){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Wx,Gx,Ok),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?e.add(Wx,Gx):2===s&&e.add(Wx,Ok)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(Oc),Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),vV=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dk))},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[uV]}),r})();const Kx=new Fn("cdk-dir-doc",{providedIn:"root",factory:function kk(){return Ea(Mi)}}),AV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Gy=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new u,e){const l=e.documentElement?e.documentElement.dir:null;this.value=function zx(r){const t=r?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?AV.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||l||"ltr")}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Kx,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ku=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const Pk=["text"];function jS(r,t){if(1&r&&oo(0,"mat-pseudo-checkbox",5),2&r){const e=ii();Nn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function hl(r,t){if(1&r&&(Cn(0,"span",6),Nr(1),xn()),2&r){const e=ii();En(1),Od("(",e.group.label,")")}}const EV=[[["mat-icon"]],"*"],c9=["mat-icon","*"],CV=new Fn("mat-sanity-checks",{providedIn:"root",factory:function SV(){return!0}});let gs=(()=>{class r{constructor(e,s,l){this._sanityChecks=s,this._document=l,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!r1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dk),Xt(CV,8),Xt(Mi))},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[ku,ku]}),r})();function g1(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=$s(t)}}}function Mk(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const s=e||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function xk(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=$s(t)}}}function IV(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?kg(e):this.defaultTabIndex}}}function Yx(r){return class extends r{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,m=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);m!==t&&(this.errorState=m,this.stateChanges.next())}}}let qx=(()=>{class r{isErrorState(e,s){return!!(e&&e.invalid&&(e.touched||s&&s.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Jx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,gs]}),r})();class wV{constructor(t,e,s,l=!1){this._renderer=t,this.element=e,this.config=s,this._animationForciblyDisabledThroughCss=l,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Lk={enterDuration:225,exitDuration:150},Wy=uc({passive:!0}),RV=["mousedown","touchstart"],zl=["mouseup","mouseleave","touchend","touchcancel"];class S9{constructor(t,e,s,l){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,l.isBrowser&&(this._containerElement=Jf(s))}fadeInRipple(t,e,s={}){const l=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),m={...Lk,...s.animation};s.centered&&(t=l.left+l.width/2,e=l.top+l.height/2);const E=s.radius||function C9(r,t,e){const s=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),l=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(s*s+l*l)}(t,e,l),I=t-l.left,k=e-l.top,F=m.enterDuration,ee=document.createElement("div");ee.classList.add("mat-ripple-element"),ee.style.left=I-E+"px",ee.style.top=k-E+"px",ee.style.height=2*E+"px",ee.style.width=2*E+"px",null!=s.color&&(ee.style.backgroundColor=s.color),ee.style.transitionDuration=`${F}ms`,this._containerElement.appendChild(ee);const me=window.getComputedStyle(ee),We=me.transitionDuration,it="none"===me.transitionProperty||"0s"===We||"0s, 0s"===We||0===l.width&&0===l.height,bt=new wV(this,ee,s,it);ee.style.transform="scale3d(1, 1, 1)",bt.state=0,s.persistent||(this._mostRecentTransientRipple=bt);let Jt=null;return!it&&(F||m.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const tn=()=>this._finishRippleTransition(bt),Rn=()=>this._destroyRipple(bt);ee.addEventListener("transitionend",tn),ee.addEventListener("transitioncancel",Rn),Jt={onTransitionEnd:tn,onTransitionCancel:Rn}}),this._activeRipples.set(bt,Jt),(it||!F)&&this._finishRippleTransition(bt),bt}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,s={...Lk,...t.config.animation};e.style.transitionDuration=`${s.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!s.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Jf(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(RV))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zl),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:s}=t.config;t.state=1,!s&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=au(t),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!s&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Cv(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let s=0;s<e.length;s++)this.fadeInRipple(e[s].clientX,e[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Wy)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(RV.forEach(t=>{this._triggerElement.removeEventListener(t,this,Wy)}),this._pointerUpEventsRegistered&&zl.forEach(t=>{this._triggerElement.removeEventListener(t,this,Wy)}))}}const I9=new Fn("mat-ripple-global-options");let HS=(()=>{class r{constructor(e,s,l,m,E){this._elementRef=e,this._animationMode=E,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=m||{},this._rippleRenderer=new S9(this,s,e,l)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,s=0,l){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,s,{...this.rippleConfig,...l}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(gi),gt(Oc),gt(I9,8),gt(Sp,8))},r.\u0275dir=mr({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),pl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,gs]}),r})(),OV=(()=>{class r{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return r.\u0275fac=function(e){return new(e||r)(gt(Sp,8))},r.\u0275cmp=ba({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,s){2&e&&Fr("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,s){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),r})(),Ky=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs]}),r})();const zy=new Fn("MAT_OPTION_PARENT_COMPONENT"),Bk=new Fn("MatOptgroup");let Tv=0;class DV{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let kV=(()=>{class r{constructor(e,s,l,m){this._element=e,this._changeDetectorRef=s,this._parent=l,this.group=m,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Tv++,this.onSelectionChange=new u,this._stateChanges=new ht}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=$s(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,s){const l=this._getHostElement();"function"==typeof l.focus&&l.focus(s)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!FS(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new DV(this,e))}}return r.\u0275fac=function(e){XC()},r.\u0275dir=mr({type:r,viewQuery:function(e,s){if(1&e&&ut(Pk,7),2&e){let l;At(l=$e())&&(s._text=l.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),r})(),$x=(()=>{class r extends kV{constructor(e,s,l,m){super(e,s,l,m)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Ff),gt(zy,8),gt(Bk,8))},r.\u0275cmp=ba({type:r,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,s){1&e&&so("click",function(){return s._selectViaInteraction()})("keydown",function(m){return s._handleKeydown(m)}),2&e&&(X_("id",s.id),no("tabindex",s._getTabIndex())("aria-selected",s._getAriaSelected())("aria-disabled",s.disabled.toString()),Fr("mdc-list-item--selected",s.selected)("mat-mdc-option-multiple",s.multiple)("mat-mdc-option-active",s.active)("mdc-list-item--disabled",s.disabled))},exportAs:["matOption"],features:[Br],ngContentSelectors:c9,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,s){1&e&&(Ys(EV),dr(0,jS,1,2,"mat-pseudo-checkbox",0),So(1),Cn(2,"span",1,2),So(4,1),xn(),dr(5,hl,2,1,"span",3),oo(6,"div",4)),2&e&&(Nn("ngIf",s.multiple),En(5),Nn("ngIf",s.group&&s.group._inert),En(1),Nn("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},dependencies:[HS,AS,OV],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),r})(),Fk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[pl,Es,gs,Ky]}),r})();const O9=["mat-button",""],Pg=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],eL=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],lc=["mat-fab",""],Mo=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],wv=Mk(g1(xk(class{constructor(r){this._elementRef=r}})));let KS=(()=>{class r extends wv{constructor(e,s,l,m){super(e),this._platform=s,this._ngZone=l,this._animationMode=m,this._focusMonitor=Ea(Rk),this._isFab=!1;const E=e.nativeElement.classList;for(const I of Mo)this._hasHostAttributes(I.selector)&&I.mdcClasses.forEach(k=>{E.add(k)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",s){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,s):this._elementRef.nativeElement.focus(s)}_hasHostAttributes(...e){return e.some(s=>this._elementRef.nativeElement.hasAttribute(s))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return r.\u0275fac=function(e){XC()},r.\u0275dir=mr({type:r,viewQuery:function(e,s){if(1&e&&ut(HS,5),2&e){let l;At(l=$e())&&(s.ripple=l.first)}},features:[Br]}),r})(),Ha=(()=>{class r extends KS{constructor(e,s,l,m){super(e,s,l,m)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Oc),gt(gi),gt(Sp,8))},r.\u0275cmp=ba({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,s){2&e&&(no("disabled",s.disabled||null),Fr("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Br],attrs:O9,ngContentSelectors:eL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Ys(Pg),oo(0,"span",0),So(1),Cn(2,"span",1),So(3,1),xn(),So(4,2),oo(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Fr("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),En(6),Nn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[HS],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),r})();const v1=new Fn("mat-mdc-fab-default-options",{providedIn:"root",factory:Uk});function Uk(){return{color:"accent"}}const A1=Uk();let NV=(()=>{class r extends KS{constructor(e,s,l,m,E){super(e,s,l,m),this._options=E,this._isFab=!0,this._options=this._options||A1,this.color=this.defaultColor=this._options.color||A1.color}get extended(){return this._extended}set extended(e){this._extended=$s(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Oc),gt(gi),gt(Sp,8),gt(v1,8))},r.\u0275cmp=ba({type:r,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,s){2&e&&(no("disabled",s.disabled||null),Fr("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0)("mdc-fab--extended",s.extended)("mat-mdc-extended-fab",s.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Br],attrs:lc,ngContentSelectors:eL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,s){1&e&&(Ys(Pg),oo(0,"span",0),So(1),Cn(2,"span",1),So(3,1),xn(),So(4,2),oo(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Fr("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab),En(6),Nn("matRippleDisabled",s._isRippleDisabled())("matRippleTrigger",s._elementRef.nativeElement))},dependencies:[HS],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),r})(),rL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,pl,gs]}),r})();class PV{}class B9{}const Mg="*";function Rv(r,t){return{type:7,name:r,definitions:t,options:{}}}function Ov(r,t=null){return{type:4,styles:t,timings:r}}function MV(r,t=null){return{type:2,steps:r,options:t}}function fl(r){return{type:6,styles:r,offset:null}}function Pp(r,t,e){return{type:0,name:r,styles:t,options:e}}function xg(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function U9(r=null){return{type:9,options:r}}function V9(r,t,e=null){return{type:11,selector:r,animation:t,options:e}}function xV(r){Promise.resolve().then(r)}class y1{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class LV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,l=0;const m=this.players.length;0==m?xV(()=>this._onFinish()):this.players.forEach(E=>{E.onDone(()=>{++e==m&&this._onFinish()}),E.onDestroy(()=>{++s==m&&this._onDestroy()}),E.onStart(()=>{++l==m&&this._onStart()})}),this.totalTime=this.players.reduce((E,I)=>Math.max(E,I.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const l=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(l)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class E1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class oL extends E1{constructor(t,e,s,l,m){super(),this.component=t,this.viewContainerRef=e,this.injector=s,this.componentFactoryResolver=l,this.projectableNodes=m}}class b1 extends E1{constructor(t,e,s,l){super(),this.templateRef=t,this.viewContainerRef=e,this.context=s,this.injector=l}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class BV extends E1{constructor(t){super(),this.element=t instanceof Ni?t.nativeElement:t}}class Vk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof oL?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof b1?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof BV?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qS extends Vk{constructor(t,e,s,l,m){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=s,this._defaultInjector=l,this.attachDomPortal=E=>{const I=E.element,k=this._document.createComment("dom-portal");I.parentNode.insertBefore(k,I),this.outletElement.appendChild(I),this._attachedPortal=E,super.setDisposeFn(()=>{k.parentNode&&k.parentNode.replaceChild(I,k)})},this._document=m}attachComponentPortal(t){const s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let l;return t.viewContainerRef?(l=t.viewContainerRef.createComponent(s,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>l.destroy())):(l=s.create(t.injector||this._defaultInjector||yc.NULL),this._appRef.attachView(l.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(l.hostView),l.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(l)),this._attachedPortal=t,l}attachTemplatePortal(t){let e=t.viewContainerRef,s=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return s.rootNodes.forEach(l=>this.outletElement.appendChild(l)),s.detectChanges(),this.setDisposeFn(()=>{let l=e.indexOf(s);-1!==l&&e.remove(l)}),this._attachedPortal=t,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Lg=(()=>{class r extends Vk{constructor(e,s,l){super(),this._componentFactoryResolver=e,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new u,this.attachDomPortal=m=>{const E=m.element,I=this._document.createComment("dom-portal");m.setAttachedHost(this),E.parentNode.insertBefore(I,E),this._getRootNode().appendChild(E),this._attachedPortal=m,super.setDisposeFn(()=>{I.parentNode&&I.parentNode.replaceChild(E,I)})},this._document=l}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const s=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,m=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),E=s.createComponent(m,s.length,e.injector||s.injector,e.projectableNodes||void 0);return s!==this._viewContainerRef&&this._getRootNode().appendChild(E.hostView.rootNodes[0]),super.setDisposeFn(()=>E.destroy()),this._attachedPortal=e,this._attachedRef=E,this.attached.emit(E),E}attachTemplatePortal(e){e.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(gt(O_),gt(G),gt(Mi))},r.\u0275dir=mr({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Br]}),r})(),UV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const VV=["addListener","removeListener"],W9=["addEventListener","removeEventListener"],K9=["on","off"];function sL(r,t,e,s){if(L(e)&&(s=e,e=void 0),s)return sL(r,t,e).pipe(UD(s));const[l,m]=function Hk(r){return L(r.addEventListener)&&L(r.removeEventListener)}(r)?W9.map(E=>I=>r[E](t,I,e)):function Qk(r){return L(r.addListener)&&L(r.removeListener)}(r)?VV.map(jk(r,t)):function aL(r){return L(r.on)&&L(r.off)}(r)?K9.map(jk(r,t)):[];if(!l&&po(r))return tr(E=>sL(E,t,e))(mn(r));if(!l)throw new TypeError("Invalid event target");return new ze(E=>{const I=(...k)=>E.next(1<k.length?k:k[0]);return l(I),()=>m(I)})}function jk(r,t){return e=>s=>r[e](t,s)}const Yl={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:s}=Yl;s&&(t=s.requestAnimationFrame,e=s.cancelAnimationFrame);const l=t(m=>{e=void 0,r(m)});return new U(()=>e?.(l))},requestAnimationFrame(...r){const{delegate:t}=Yl;return(t?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Yl;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};new class QV extends kx{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const m=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<m&&(t=e.shift()));if(this._active=!1,s){for(;++l<m&&(t=e.shift());)t.unsubscribe();throw s}}}(class jV extends Ox{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=Yl.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(Yl.cancelAnimationFrame(e),t._scheduled=void 0)}});let S1,Y9=1;const C1={};function Gk(r){return r in C1&&(delete C1[r],!0)}const q9={setImmediate(r){const t=Y9++;return C1[t]=!0,S1||(S1=Promise.resolve()),S1.then(()=>Gk(t)&&r()),t},clearImmediate(r){Gk(r)}},{setImmediate:J9,clearImmediate:X9}=q9,I1={setImmediate(...r){const{delegate:t}=I1;return(t?.setImmediate||J9)(...r)},clearImmediate(r){const{delegate:t}=I1;return(t?.clearImmediate||X9)(r)},delegate:void 0},Wk=new class $9 extends kx{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const m=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<m&&(t=e.shift()));if(this._active=!1,s){for(;++l<m&&(t=e.shift());)t.unsubscribe();throw s}}}(class Qd extends Ox{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=I1.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(I1.clearImmediate(e),t._scheduled=void 0)}});function GV(r=0,t,e=vk){let s=-1;return null!=t&&(Uv(t)?e=t:s=t),new ze(l=>{let m=function JS(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;m<0&&(m=0);let E=0;return e.schedule(function(){l.closed||(l.next(E++),0<=s?this.schedule(void 0,s):l.complete())},m)})}function WV(r,t=vk){return function Z9(r){return Ye((t,e)=>{let s=!1,l=null,m=null,E=!1;const I=()=>{if(m?.unsubscribe(),m=null,s){s=!1;const F=l;l=null,e.next(F)}E&&e.complete()},k=()=>{m=null,E&&e.complete()};t.subscribe(new we(e,F=>{s=!0,l=F,m||mn(r(F)).subscribe(m=new we(e,I,k))},()=>{E=!0,(!s||!m||m.closed)&&e.complete()}))})}(()=>GV(r,t))}let T1=(()=>{class r{constructor(e,s,l){this._ngZone=e,this._platform=s,this._scrolled=new ht,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=l}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const s=this.scrollContainers.get(e);s&&(s.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ze(s=>{this._globalSubscription||this._addGlobalListener();const l=e>0?this._scrolled.pipe(WV(e)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{l.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dl()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(e,s){const l=this.getAncestorScrollContainers(e);return this.scrolled(s).pipe(kp(m=>!m||l.indexOf(m)>-1))}getAncestorScrollContainers(e){const s=[];return this.scrollContainers.forEach((l,m)=>{this._scrollableContainsElement(m,e)&&s.push(m)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,s){let l=Jf(s),m=e.getElementRef().nativeElement;do{if(l==m)return!0}while(l=l.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>sL(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(Xt(gi),Xt(Oc),Xt(Mi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),uL=(()=>{class r{constructor(e,s,l){this._platform=e,this._change=new ht,this._changeListener=m=>{this._change.next(m)},this._document=l,s.runOutsideAngular(()=>{if(e.isBrowser){const m=this._getWindow();m.addEventListener("resize",this._changeListener),m.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:s,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+s,height:l,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,s=this._getWindow(),l=e.documentElement,m=l.getBoundingClientRect();return{top:-m.top||e.body.scrollTop||s.scrollY||l.scrollTop||0,left:-m.left||e.body.scrollLeft||s.scrollX||l.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(WV(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(Xt(Oc),Xt(gi),Xt(Mi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),w1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})(),qV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[ku,w1,ku,w1]}),r})();const lL=xy();class aQ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Va(-this._previousScrollPosition.left),t.style.top=Va(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,s=t.style,l=this._document.body.style,m=s.scrollBehavior||"",E=l.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),lL&&(s.scrollBehavior=l.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lL&&(s.scrollBehavior=m,l.scrollBehavior=E)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,s=this._viewportRuler.getViewportSize();return e.scrollHeight>s.height||e.scrollWidth>s.width}}class JV{constructor(t,e,s,l){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=s,this._config=l,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class XV{enable(){}disable(){}attach(){}}function dL(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function $V(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class ZV{constructor(t,e,s,l){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=s,this._config=l,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:l}=this._viewportRuler.getViewportSize();dL(e,[{width:s,height:l,bottom:l,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let hL=(()=>{class r{constructor(e,s,l,m){this._scrollDispatcher=e,this._viewportRuler=s,this._ngZone=l,this.noop=()=>new XV,this.close=E=>new JV(this._scrollDispatcher,this._ngZone,this._viewportRuler,E),this.block=()=>new aQ(this._viewportRuler,this._document),this.reposition=E=>new ZV(this._scrollDispatcher,this._viewportRuler,this._ngZone,E),this._document=m}}return r.\u0275fac=function(e){return new(e||r)(Xt(T1),Xt(uL),Xt(gi),Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class R1{constructor(t){if(this.scrollStrategy=new XV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const s of e)void 0!==t[s]&&(this[s]=t[s])}}}class cQ{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Yk=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const s=this._attachedOverlays.indexOf(e);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ph=(()=>{class r extends Yk{constructor(e,s){super(e),this._ngZone=s,this._keydownListener=l=>{const m=this._attachedOverlays;for(let E=m.length-1;E>-1;E--)if(m[E]._keydownEvents.observers.length>0){const I=m[E]._keydownEvents;this._ngZone?this._ngZone.run(()=>I.next(l)):I.next(l);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(gi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),lQ=(()=>{class r extends Yk{constructor(e,s,l){super(e),this._platform=s,this._ngZone=l,this._cursorStyleIsSet=!1,this._pointerDownListener=m=>{this._pointerDownEventTarget=Ly(m)},this._clickListener=m=>{const E=Ly(m),I="click"===m.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:E;this._pointerDownEventTarget=null;const k=this._attachedOverlays.slice();for(let F=k.length-1;F>-1;F--){const ee=k[F];if(ee._outsidePointerEvents.observers.length<1||!ee.hasAttached())continue;if(ee.overlayElement.contains(E)||ee.overlayElement.contains(I))break;const me=ee._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>me.next(m)):me.next(m)}}}add(e){if(super.add(e),!this._isAttached){const s=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(s)):this._addEventListeners(s),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(Oc),Xt(gi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),e4=(()=>{class r{constructor(e,s){this._platform=s,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||r1()){const l=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let m=0;m<l.length;m++)l[m].remove()}const s=this._document.createElement("div");s.classList.add(e),r1()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(Oc))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class fL{constructor(t,e,s,l,m,E,I,k,F,ee=!1){this._portalOutlet=t,this._host=e,this._pane=s,this._config=l,this._ngZone=m,this._keyboardDispatcher=E,this._document=I,this._location=k,this._outsideClickDispatcher=F,this._animationsDisabled=ee,this._backdropElement=null,this._backdropClick=new ht,this._attachments=new ht,this._detachments=new ht,this._locationChanges=U.EMPTY,this._backdropClickHandler=me=>this._backdropClick.next(me),this._backdropTransitionendHandler=me=>{this._disposeBackdrop(me.target)},this._keydownEvents=new ht,this._outsidePointerEvents=new ht,l.scrollStrategy&&(this._scrollStrategy=l.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=l.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Va(this._config.width),t.height=Va(this._config.height),t.minWidth=Va(this._config.minWidth),t.minHeight=Va(this._config.minHeight),t.maxWidth=Va(this._config.maxWidth),t.maxHeight=Va(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,s){const l=Ak(e||[]).filter(m=>!!m);l.length&&(s?t.classList.add(...l):t.classList.remove(...l))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(su(wo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const t4="cdk-overlay-connected-position-bounding-box",mL=/([A-Za-z%]+)$/;class n4{constructor(t,e,s,l,m){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=m,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht,this._resizeSubscription=U.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(t4),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,s=this._viewportRect,l=this._containerRect,m=[];let E;for(let I of this._preferredPositions){let k=this._getOriginPoint(t,l,I),F=this._getOverlayPoint(k,e,I),ee=this._getOverlayFit(F,e,s,I);if(ee.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(I,k);this._canFitWithFlexibleDimensions(ee,F,s)?m.push({position:I,origin:k,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(k,I)}):(!E||E.overlayFit.visibleArea<ee.visibleArea)&&(E={overlayFit:ee,overlayPoint:F,originPoint:k,position:I,overlayRect:e})}if(m.length){let I=null,k=-1;for(const F of m){const ee=F.boundingBoxRect.width*F.boundingBoxRect.height*(F.position.weight||1);ee>k&&(k=ee,I=F)}return this._isPushed=!1,void this._applyPosition(I.position,I.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(E.position,E.originPoint);this._applyPosition(E.position,E.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(t4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,s){let l,m;if("center"==s.originX)l=t.left+t.width/2;else{const E=this._isRtl()?t.right:t.left,I=this._isRtl()?t.left:t.right;l="start"==s.originX?E:I}return e.left<0&&(l-=e.left),m="center"==s.originY?t.top+t.height/2:"top"==s.originY?t.top:t.bottom,e.top<0&&(m-=e.top),{x:l,y:m}}_getOverlayPoint(t,e,s){let l,m;return l="center"==s.overlayX?-e.width/2:"start"===s.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,m="center"==s.overlayY?-e.height/2:"top"==s.overlayY?0:-e.height,{x:t.x+l,y:t.y+m}}_getOverlayFit(t,e,s,l){const m=O1(e);let{x:E,y:I}=t,k=this._getOffset(l,"x"),F=this._getOffset(l,"y");k&&(E+=k),F&&(I+=F);let Le=0-I,We=I+m.height-s.height,it=this._subtractOverflows(m.width,0-E,E+m.width-s.width),bt=this._subtractOverflows(m.height,Le,We),Jt=it*bt;return{visibleArea:Jt,isCompletelyWithinViewport:m.width*m.height===Jt,fitsInViewportVertically:bt===m.height,fitsInViewportHorizontally:it==m.width}}_canFitWithFlexibleDimensions(t,e,s){if(this._hasFlexibleDimensions){const l=s.bottom-e.y,m=s.right-e.x,E=r4(this._overlayRef.getConfig().minHeight),I=r4(this._overlayRef.getConfig().minWidth),F=t.fitsInViewportHorizontally||null!=I&&I<=m;return(t.fitsInViewportVertically||null!=E&&E<=l)&&F}return!1}_pushOverlayOnScreen(t,e,s){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const l=O1(e),m=this._viewportRect,E=Math.max(t.x+l.width-m.width,0),I=Math.max(t.y+l.height-m.height,0),k=Math.max(m.top-s.top-t.y,0),F=Math.max(m.left-s.left-t.x,0);let ee=0,me=0;return ee=l.width<=m.width?F||-E:t.x<this._viewportMargin?m.left-s.left-t.x:0,me=l.height<=m.height?k||-I:t.y<this._viewportMargin?m.top-s.top-t.y:0,this._previousPushAmount={x:ee,y:me},{x:t.x+ee,y:t.y+me}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const s=this._getScrollVisibility(),l=new cQ(t,s);this._positionChanges.next(l)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,l=t.overlayY;s="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let m=0;m<e.length;m++)e[m].style.transformOrigin=`${s} ${l}`}_calculateBoundingBoxRect(t,e){const s=this._viewportRect,l=this._isRtl();let m,E,I,ee,me,Le;if("top"===e.overlayY)E=t.y,m=s.height-E+this._viewportMargin;else if("bottom"===e.overlayY)I=s.height-t.y+2*this._viewportMargin,m=s.height-I+this._viewportMargin;else{const We=Math.min(s.bottom-t.y+s.top,t.y),it=this._lastBoundingBoxSize.height;m=2*We,E=t.y-We,m>it&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.y-it/2)}if("end"===e.overlayX&&!l||"start"===e.overlayX&&l)Le=s.width-t.x+this._viewportMargin,ee=t.x-this._viewportMargin;else if("start"===e.overlayX&&!l||"end"===e.overlayX&&l)me=t.x,ee=s.right-t.x;else{const We=Math.min(s.right-t.x+s.left,t.x),it=this._lastBoundingBoxSize.width;ee=2*We,me=t.x-We,ee>it&&!this._isInitialRender&&!this._growAfterOpen&&(me=t.x-it/2)}return{top:E,left:me,bottom:I,right:Le,width:ee,height:m}}_setBoundingBoxStyles(t,e){const s=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const l={};if(this._hasExactPosition())l.top=l.left="0",l.bottom=l.right=l.maxHeight=l.maxWidth="",l.width=l.height="100%";else{const m=this._overlayRef.getConfig().maxHeight,E=this._overlayRef.getConfig().maxWidth;l.height=Va(s.height),l.top=Va(s.top),l.bottom=Va(s.bottom),l.width=Va(s.width),l.left=Va(s.left),l.right=Va(s.right),l.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",l.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",m&&(l.maxHeight=Va(m)),E&&(l.maxWidth=Va(E))}this._lastBoundingBoxSize=s,Dc(this._boundingBox.style,l)}_resetBoundingBoxStyles(){Dc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const s={},l=this._hasExactPosition(),m=this._hasFlexibleDimensions,E=this._overlayRef.getConfig();if(l){const ee=this._viewportRuler.getViewportScrollPosition();Dc(s,this._getExactOverlayY(e,t,ee)),Dc(s,this._getExactOverlayX(e,t,ee))}else s.position="static";let I="",k=this._getOffset(e,"x"),F=this._getOffset(e,"y");k&&(I+=`translateX(${k}px) `),F&&(I+=`translateY(${F}px)`),s.transform=I.trim(),E.maxHeight&&(l?s.maxHeight=Va(E.maxHeight):m&&(s.maxHeight="")),E.maxWidth&&(l?s.maxWidth=Va(E.maxWidth):m&&(s.maxWidth="")),Dc(this._pane.style,s)}_getExactOverlayY(t,e,s){let l={top:"",bottom:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,s)),"bottom"===t.overlayY?l.bottom=this._document.documentElement.clientHeight-(m.y+this._overlayRect.height)+"px":l.top=Va(m.y),l}_getExactOverlayX(t,e,s){let E,l={left:"",right:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,s)),E=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===E?l.right=this._document.documentElement.clientWidth-(m.x+this._overlayRect.width)+"px":l.left=Va(m.x),l}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),s=this._scrollables.map(l=>l.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$V(t,s),isOriginOutsideView:dL(t,s),isOverlayClipped:$V(e,s),isOverlayOutsideView:dL(e,s)}}_subtractOverflows(t,...e){return e.reduce((s,l)=>s-Math.max(l,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+t-this._viewportMargin,bottom:s.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ak(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ni)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,s=t.height||0;return{top:t.y,bottom:t.y+s,left:t.x,right:t.x+e,height:s,width:e}}}function Dc(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function r4(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(mL);return e&&"px"!==e?null:parseFloat(t)}return r||null}function O1(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const qk="cdk-global-overlay-wrapper";class $S{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(qk),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:l,height:m,maxWidth:E,maxHeight:I}=s,k=!("100%"!==l&&"100vw"!==l||E&&"100%"!==E&&"100vw"!==E),F=!("100%"!==m&&"100vh"!==m||I&&"100%"!==I&&"100vh"!==I),ee=this._xPosition,me=this._xOffset,Le="rtl"===this._overlayRef.getConfig().direction;let We="",it="",bt="";k?bt="flex-start":"center"===ee?(bt="center",Le?it=me:We=me):Le?"left"===ee||"end"===ee?(bt="flex-end",We=me):("right"===ee||"start"===ee)&&(bt="flex-start",it=me):"left"===ee||"start"===ee?(bt="flex-start",We=me):("right"===ee||"end"===ee)&&(bt="flex-end",it=me),t.position=this._cssPosition,t.marginLeft=k?"0":We,t.marginTop=F?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=k?"0":it,e.justifyContent=bt,e.alignItems=F?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,s=e.style;e.classList.remove(qk),s.justifyContent=s.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Mp=(()=>{class r{constructor(e,s,l,m){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=m}global(){return new $S}flexibleConnectedTo(e){return new n4(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(Xt(uL),Xt(Mi),Xt(Oc),Xt(e4))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),dQ=0,Dv=(()=>{class r{constructor(e,s,l,m,E,I,k,F,ee,me,Le,We){this.scrollStrategies=e,this._overlayContainer=s,this._componentFactoryResolver=l,this._positionBuilder=m,this._keyboardDispatcher=E,this._injector=I,this._ngZone=k,this._document=F,this._directionality=ee,this._location=me,this._outsideClickDispatcher=Le,this._animationsModuleType=We}create(e){const s=this._createHostElement(),l=this._createPaneElement(s),m=this._createPortalOutlet(l),E=new R1(e);return E.direction=E.direction||this._directionality.value,new fL(m,s,l,E,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const s=this._document.createElement("div");return s.id="cdk-overlay-"+dQ++,s.classList.add("cdk-overlay-pane"),e.appendChild(s),s}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(by)),new qS(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(Xt(hL),Xt(e4),Xt(O_),Xt(Mp),Xt(Ph),Xt(yc),Xt(gi),Xt(Mi),Xt(Gy),Xt(UF),Xt(lQ),Xt(Sp,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Bg=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],o4=new Fn("cdk-connected-overlay-scroll-strategy");let Jk=(()=>{class r{constructor(e){this.elementRef=e}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni))},r.\u0275dir=mr({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),r})(),gL=(()=>{class r{constructor(e,s,l,m,E){this._overlay=e,this._dir=E,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=U.EMPTY,this._attachSubscription=U.EMPTY,this._detachSubscription=U.EMPTY,this._positionSubscription=U.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u,this.positionChange=new u,this.attach=new u,this.detach=new u,this.overlayKeydown=new u,this.overlayOutsideClick=new u,this._templatePortal=new b1(s,l),this._scrollStrategyFactory=m,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=$s(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=$s(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=$s(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=$s(e)}get push(){return this._push}set push(e){this._push=$s(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Bg);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(s=>{this.overlayKeydown.next(s),27===s.keyCode&&!this.disableClose&&!FS(s)&&(s.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(s=>{this.overlayOutsideClick.next(s)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),s=new R1({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(s.width=this.width),(this.height||0===this.height)&&(s.height=this.height),(this.minWidth||0===this.minWidth)&&(s.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(s.minHeight=this.minHeight),this.backdropClass&&(s.backdropClass=this.backdropClass),this.panelClass&&(s.panelClass=this.panelClass),s}_updatePositionStrategy(e){const s=this.positions.map(l=>({originX:l.originX,originY:l.originY,overlayX:l.overlayX,overlayY:l.overlayY,offsetX:l.offsetX||this.offsetX,offsetY:l.offsetY||this.offsetY,panelClass:l.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(s).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Jk?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function sQ(r,t=!1){return Ye((e,s)=>{let l=0;e.subscribe(new we(s,m=>{const E=r(m,l++);(E||t)&&s.next(m),!E&&s.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(gt(Dv),gt(S),gt(G),gt(o4),gt(Gy,8))},r.\u0275dir=mr({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[za]}),r})();const Xk={provide:o4,deps:[Dv],useFactory:function hQ(r){return()=>r.scrollStrategies.reposition()}};let _L=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[Dv,Xk],imports:[ku,UV,qV,qV]}),r})();function D1(r,t){if(1&r){const e=$u();Cn(0,"div",2)(1,"button",3),so("click",function(){return Ia(e),Ta(ii().action())}),Nr(2),xn()()}if(2&r){const e=ii();En(2),Od(" ",e.data.action," ")}}const vL=["label"];function $k(r,t){}const pQ=Math.pow(2,31)-1;class Zk{constructor(t,e){this._overlayRef=e,this._afterDismissed=new ht,this._afterOpened=new ht,this._onAction=new ht,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,pQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const Hd=new Fn("MatSnackBarData");class ql{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let k1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),r})(),fQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),r})(),mQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),r})(),ZS=(()=>{class r{constructor(e,s){this.snackBarRef=e,this.data=s}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return r.\u0275fac=function(e){return new(e||r)(gt(Zk),gt(Hd))},r.\u0275cmp=ba({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,s){1&e&&(Cn(0,"div",0),Nr(1),xn(),dr(2,D1,3,1,"div",1)),2&e&&(En(1),Od(" ",s.data.message,"\n"),En(1),Nn("ngIf",s.hasAction))},dependencies:[AS,Ha,k1,fQ,mQ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),r})();const s4={snackBarState:Rv("state",[Pp("void, hidden",fl({transform:"scale(0.8)",opacity:0})),Pp("visible",fl({transform:"scale(1)",opacity:1})),xg("* => visible",Ov("150ms cubic-bezier(0, 0, 0.2, 1)")),xg("* => void, * => hidden",Ov("75ms cubic-bezier(0.4, 0.0, 1, 1)",fl({opacity:0})))])};let gQ=(()=>{class r extends Vk{constructor(e,s,l,m,E){super(),this._ngZone=e,this._elementRef=s,this._changeDetectorRef=l,this._platform=m,this.snackBarConfig=E,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ht,this._onExit=new ht,this._onEnter=new ht,this._animationState="void",this.attachDomPortal=I=>{this._assertNotAttached();const k=this._portalOutlet.attachDomPortal(I);return this._afterPortalAttached(),k},this._live="assertive"!==E.politeness||E.announcementMessage?"off"===E.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const s=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),s}attachTemplatePortal(e){this._assertNotAttached();const s=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),s}onAnimationEnd(e){const{fromState:s,toState:l}=e;if(("void"===l&&"void"!==s||"hidden"===l)&&this._completeExit(),"visible"===l){const m=this._onEnter;this._ngZone.run(()=>{m.next(),m.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(vl(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,s=this.snackBarConfig.panelClass;s&&(Array.isArray(s)?s.forEach(l=>e.classList.add(l)):e.classList.add(s))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),s=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&s){let l=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(l=document.activeElement),e.removeAttribute("aria-hidden"),s.appendChild(e),l?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return r.\u0275fac=function(e){return new(e||r)(gt(gi),gt(Ni),gt(Ff),gt(Oc),gt(ql))},r.\u0275dir=mr({type:r,viewQuery:function(e,s){if(1&e&&ut(Lg,7),2&e){let l;At(l=$e())&&(s._portalOutlet=l.first)}},features:[Br]}),r})(),_Q=(()=>{class r extends gQ{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,s="mdc-snackbar__label";e.classList.toggle(s,!e.querySelector(`.${s}`))}}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_o(r)))(s||r)}}(),r.\u0275cmp=ba({type:r,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,s){if(1&e&&ut(vL,7),2&e){let l;At(l=$e())&&(s._label=l.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,s){1&e&&JA("@state.done",function(m){return s.onAnimationEnd(m)}),2&e&&tl("@state",s._animationState)},features:[Br],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,s){1&e&&(Cn(0,"div",0)(1,"div",1,2)(3,"div",3),dr(4,$k,0,0,"ng-template",4),xn(),oo(5,"div"),xn()()),2&e&&(En(5),no("aria-live",s._live)("role",s._role))},dependencies:[Lg],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[s4.snackBarState]}}),r})(),e0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[_L,UV,Es,rL,gs,gs]}),r})();const a4=new Fn("mat-snack-bar-default-options",{providedIn:"root",factory:function e2(){return new ql}});let AL=(()=>{class r{constructor(e,s,l,m,E,I){this._overlay=e,this._live=s,this._injector=l,this._breakpointObserver=m,this._parentSnackBar=E,this._defaultConfig=I,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,s){return this._attach(e,s)}openFromTemplate(e,s){return this._attach(e,s)}open(e,s="",l){const m={...this._defaultConfig,...l};return m.data={message:e,action:s},m.announcementMessage===e&&(m.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,m)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,s){const m=yc.create({parent:s&&s.viewContainerRef&&s.viewContainerRef.injector||this._injector,providers:[{provide:ql,useValue:s}]}),E=new oL(this.snackBarContainerComponent,s.viewContainerRef,m),I=e.attach(E);return I.instance.snackBarConfig=s,I.instance}_attach(e,s){const l={...new ql,...this._defaultConfig,...s},m=this._createOverlay(l),E=this._attachSnackBarContainer(m,l),I=new Zk(E,m);if(e instanceof S){const k=new b1(e,null,{$implicit:l.data,snackBarRef:I});I.instance=E.attachTemplatePortal(k)}else{const k=this._createInjector(l,I),F=new oL(e,void 0,k),ee=E.attachComponentPortal(F);I.instance=ee.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(su(m.detachments())).subscribe(k=>{m.overlayElement.classList.toggle(this.handsetCssClass,k.matches)}),l.announcementMessage&&E._onAnnounce.subscribe(()=>{this._live.announce(l.announcementMessage,l.politeness)}),this._animateSnackBar(I,l),this._openedSnackBarRef=I,this._openedSnackBarRef}_animateSnackBar(e,s){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),s.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),s.duration&&s.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(s.duration))}_createOverlay(e){const s=new R1;s.direction=e.direction;let l=this._overlay.position().global();const m="rtl"===e.direction,E="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!m||"end"===e.horizontalPosition&&m,I=!E&&"center"!==e.horizontalPosition;return E?l.left("0"):I?l.right("0"):l.centerHorizontally(),"top"===e.verticalPosition?l.top("0"):l.bottom("0"),s.positionStrategy=l,this._overlay.create(s)}_createInjector(e,s){return yc.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Zk,useValue:s},{provide:Hd,useValue:e.data}]})}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dv),Xt(m1),Xt(yc),Xt(Mx),Xt(r,12),Xt(a4))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),Yy=(()=>{class r extends AL{constructor(e,s,l,m,E,I){super(e,s,l,m,E,I),this.simpleSnackBarComponent=ZS,this.snackBarContainerComponent=_Q,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return r.\u0275fac=function(e){return new(e||r)(Xt(Dv),Xt(m1),Xt(yc),Xt(Mx),Xt(r,12),Xt(a4))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:e0}),r})();const yL=["*"];class AQ{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(s=>this._trackTile(s))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new yQ(this.rowIndex,e)}_findMatchingGap(t){let e=-1,s=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(s=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)))}while(s-e<t||0==s);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let s=0;s<e.colspan;s++)this.tracker[t+s]=e.rowspan}}class yQ{constructor(t,e){this.row=t,this.col=e}}const c4=new Fn("MAT_GRID_LIST");let bL=(()=>{class r{constructor(e,s){this._element=e,this._gridList=s,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(kg(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(kg(e))}_setStyle(e,s){this._element.nativeElement.style[e]=s}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(c4,8))},r.\u0275cmp=ba({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,s){2&e&&no("rowspan",s.rowspan)("colspan",s.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:yL,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,s){1&e&&(Ys(),Cn(0,"div",0),So(1),xn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})();const N1=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class t0{constructor(){this._rows=0,this._rowspan=0}init(t,e,s,l){this._gutterSize=P1(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=s,this._direction=l}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":Jl(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,s){let l=100/this._cols,m=(this._cols-1)/this._cols;this.setColStyles(t,s,l,m),this.setRowStyles(t,e,l,m)}setColStyles(t,e,s,l){let m=this.getBaseTileSize(s,l);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(m,e)),t._setStyle("width",Jl(this.getTileSize(m,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class u4 extends t0{constructor(t){super(),this.fixedRowHeight=t}init(t,e,s,l){super.init(t,e,s,l),this.fixedRowHeight=P1(this.fixedRowHeight),N1.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Jl(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Jl(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class l4 extends t0{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,s,l){this.baseTileHeight=this.getBaseTileSize(s/this.rowHeightRatio,l),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Jl(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Jl(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class SL extends t0{setRowStyles(t,e){let m=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(m,e)),t._setStyle("height",Jl(this.getTileSize(m,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function Jl(r){return`calc(${r})`}function P1(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let d4=(()=>{class r{constructor(e,s){this._element=e,this._dir=s,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(kg(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const s=`${e??""}`;s!==this._rowHeight&&(this._rowHeight=s,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new SL:e&&e.indexOf(":")>-1?new l4(e):new u4(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new AQ);const e=this._tileCoordinator,s=this._tiles.filter(m=>!m._gridList||m._gridList===this),l=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,s),this._tileStyler.init(this.gutterSize,e,this.cols,l),s.forEach((m,E)=>{const I=e.positions[E];this._tileStyler.setStyle(m,I.row,I.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Gy,8))},r.\u0275cmp=ba({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,s,l){if(1&e&&Be(l,bL,5),2&e){let m;At(m=$e())&&(s._tiles=m)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,s){2&e&&no("cols",s.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[vo([{provide:c4,useExisting:r}])],ngContentSelectors:yL,decls:2,vars:0,template:function(e,s){1&e&&(Ys(),Cn(0,"div"),So(1),xn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})(),EQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[Jx,gs,Jx,gs]}),r})();const p4=["matFormFieldNotchedOutline",""],CL=["*"],f4=["textField"],m4=["iconPrefixContainer"],IL=["textPrefixContainer"];function g4(r,t){1&r&&oo(0,"span",19)}function _4(r,t){if(1&r){const e=$u();Cn(0,"label",17),so("cdkObserveContent",function(){return Ia(e),Ta(ii(2)._refreshOutlineNotchWidth())}),So(1,1),dr(2,g4,1,0,"span",18),xn()}if(2&r){const e=ii(2);Nn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),no("for",e._control.id)("aria-owns",e._control.id),En(2),Nn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function t2(r,t){1&r&&dr(0,_4,3,6,"label",16),2&r&&Nn("ngIf",ii()._hasFloatingLabel())}function n2(r,t){1&r&&oo(0,"div",20)}function TL(r,t){}function wL(r,t){1&r&&dr(0,TL,0,0,"ng-template",22),2&r&&(ii(2),Nn("ngTemplateOutlet",ch(1)))}function RL(r,t){if(1&r&&(Cn(0,"div",21),dr(1,wL,1,1,"ng-template",9),xn()),2&r){const e=ii();Nn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),En(1),Nn("ngIf",!e._forceDisplayInfixLabel())}}function OL(r,t){1&r&&(Cn(0,"div",23,24),So(2,2),xn())}function v4(r,t){1&r&&(Cn(0,"div",25,26),So(2,3),xn())}function DL(r,t){}function n0(r,t){1&r&&dr(0,DL,0,0,"ng-template",22),2&r&&(ii(),Nn("ngTemplateOutlet",ch(1)))}function $f(r,t){1&r&&(Cn(0,"div",27),So(1,4),xn())}function A4(r,t){1&r&&(Cn(0,"div",28),So(1,5),xn())}function qy(r,t){1&r&&oo(0,"div",29)}function Fg(r,t){1&r&&(Cn(0,"div",30),So(1,6),xn()),2&r&&Nn("@transitionMessages",ii()._subscriptAnimationState)}function kL(r,t){if(1&r&&(Cn(0,"mat-hint",34),Nr(1),xn()),2&r){const e=ii(2);Nn("id",e._hintLabelId),En(1),Rd(e.hintLabel)}}function r0(r,t){if(1&r&&(Cn(0,"div",31),dr(1,kL,2,2,"mat-hint",32),So(2,7),oo(3,"div",33),So(4,8),xn()),2&r){const e=ii();Nn("@transitionMessages",e._subscriptAnimationState),En(1),Nn("ngIf",e.hintLabel)}}const r2=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Mh=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let o2=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["mat-label"]]}),r})();const y4=new Fn("MatError");let x1=0,E4=(()=>{class r{constructor(){this.align="start",this.id="mat-mdc-hint-"+x1++}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,s){2&e&&(X_("id",s.id),no("align",null),Fr("mat-mdc-form-field-hint-end","end"===s.align))},inputs:{align:"align",id:"id"}}),r})();const NL=new Fn("MatPrefix"),b4=new Fn("MatSuffix");let PL=(()=>{class r{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni))},r.\u0275dir=mr({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[vo([{provide:b4,useExisting:r}])]}),r})(),Zf=(()=>{class r{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function CQ(r){if(null!==r.offsetParent)return r.scrollWidth;const e=r.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const s=e.scrollWidth;return e.remove(),s}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni))},r.\u0275dir=mr({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating"}}),r})();const s2="mdc-line-ripple--active",L1="mdc-line-ripple--deactivating";let S4=(()=>{class r{constructor(e,s){this._elementRef=e,this._handleTransitionEnd=l=>{const m=this._elementRef.nativeElement.classList,E=m.contains(L1);"opacity"===l.propertyName&&E&&m.remove(s2,L1)},s.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(L1),e.add(s2)}deactivate(){this._elementRef.nativeElement.classList.add(L1)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(gi))},r.\u0275dir=mr({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),r})(),C4=(()=>{class r{constructor(e,s){this._elementRef=e,this._ngZone=s,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(gi))},r.\u0275cmp=ba({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,s){2&e&&Fr("mdc-notched-outline--notched",s.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:p4,ngContentSelectors:CL,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,s){1&e&&(Ys(),oo(0,"div",0),Cn(1,"div",1),So(2),xn(),oo(3,"div",2)),2&e&&(En(1),ys("width",s._getNotchWidth()))},encapsulation:2,changeDetection:0}),r})();const IQ={transitionMessages:Rv("transitionMessages",[Pp("enter",fl({opacity:1,transform:"translateY(0%)"})),xg("void => enter",[fl({opacity:0,transform:"translateY(-5px)"}),Ov("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let ML=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=mr({type:r}),r})();const a2=new Fn("MatFormField"),T4=new Fn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Jy=0,k4=(()=>{class r{constructor(e,s,l,m,E,I,k,F){this._elementRef=e,this._changeDetectorRef=s,this._ngZone=l,this._dir=m,this._platform=E,this._defaults=I,this._animationMode=k,this._document=F,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Jy++,this._hintLabelId="mat-mdc-hint-"+Jy++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new ht,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,I&&(I.appearance&&(this.appearance=I.appearance),this._hideRequiredMarker=Boolean(I?.hideRequiredMarker),I.color&&(this.color=I.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=$s(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const s=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==s&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(su(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),wo(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(su(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(su(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const s=this._control?this._control.ngControl:null;return s&&s[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const s=this._hintChildren?this._hintChildren.find(m=>"start"===m.align):null,l=this._hintChildren?this._hintChildren.find(m=>"end"===m.align):null;s?e.push(s.id):this._hintLabel&&e.push(this._hintLabelId),l&&e.push(l.id)}else this._errorChildren&&e.push(...this._errorChildren.map(s=>s.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const s=this._iconPrefixContainer?.nativeElement,l=this._textPrefixContainer?.nativeElement,m=s?.getBoundingClientRect().width??0,E=l?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${m+E}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const s=e.getRootNode();return s&&s!==e}return document.documentElement.contains(e)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Ff),gt(gi),gt(Gy),gt(Oc),gt(T4,8),gt(Sp,8),gt(Mi))},r.\u0275cmp=ba({type:r,selectors:[["mat-form-field"]],contentQueries:function(e,s,l){if(1&e&&(Be(l,o2,5),Be(l,o2,7),Be(l,ML,5),Be(l,NL,5),Be(l,b4,5),Be(l,y4,5),Be(l,E4,5)),2&e){let m;At(m=$e())&&(s._labelChildNonStatic=m.first),At(m=$e())&&(s._labelChildStatic=m.first),At(m=$e())&&(s._formFieldControl=m.first),At(m=$e())&&(s._prefixChildren=m),At(m=$e())&&(s._suffixChildren=m),At(m=$e())&&(s._errorChildren=m),At(m=$e())&&(s._hintChildren=m)}},viewQuery:function(e,s){if(1&e&&(ut(f4,5),ut(m4,5),ut(IL,5),ut(Zf,5),ut(C4,5),ut(S4,5)),2&e){let l;At(l=$e())&&(s._textField=l.first),At(l=$e())&&(s._iconPrefixContainer=l.first),At(l=$e())&&(s._textPrefixContainer=l.first),At(l=$e())&&(s._floatingLabel=l.first),At(l=$e())&&(s._notchedOutline=l.first),At(l=$e())&&(s._lineRipple=l.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,s){2&e&&Fr("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===s._animationMode)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary","accent"!==s.color&&"warn"!==s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vo([{provide:a2,useExisting:r}])],ngContentSelectors:Mh,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,s){1&e&&(Ys(r2),dr(0,t2,1,1,"ng-template",null,0,_r),Cn(2,"div",1,2),so("click",function(m){return s._control.onContainerClick&&s._control.onContainerClick(m)}),dr(4,n2,1,0,"div",3),Cn(5,"div",4),dr(6,RL,2,3,"div",5),dr(7,OL,3,0,"div",6),dr(8,v4,3,0,"div",7),Cn(9,"div",8),dr(10,n0,1,1,"ng-template",9),So(11),xn(),dr(12,$f,2,0,"div",10),dr(13,A4,2,0,"div",11),xn(),dr(14,qy,1,0,"div",12),xn(),Cn(15,"div",13),dr(16,Fg,2,1,"div",14),dr(17,r0,5,2,"div",15),xn()),2&e&&(En(2),Fr("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),En(2),Nn("ngIf",!s._hasOutline()&&!s._control.disabled),En(2),Nn("ngIf",s._hasOutline()),En(1),Nn("ngIf",s._hasIconPrefix),En(1),Nn("ngIf",s._hasTextPrefix),En(2),Nn("ngIf",!s._hasOutline()||s._forceDisplayInfixLabel()),En(2),Nn("ngIf",s._hasTextSuffix),En(1),Nn("ngIf",s._hasIconSuffix),En(1),Nn("ngIf",!s._hasOutline()),En(1),Fr("mat-mdc-form-field-subscript-dynamic-size","dynamic"===s.subscriptSizing),Nn("ngSwitch",s._getDisplayedMessages()),En(1),Nn("ngSwitchCase","error"),En(1),Nn("ngSwitchCase","hint"))},dependencies:[AS,aM,kT,NT,z7,E4,Zf,C4,S4],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[IQ.transitionMessages]},changeDetection:0}),r})(),Ug=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,Es,uV,gs]}),r})();class RQ{constructor(t=!1,e,s=!0,l){this._multiple=t,this._emitChanges=s,this.compareWith=l,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ht,e&&e.length&&(t?e.forEach(m=>this._markSelected(m)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(s=>this._markSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(s=>this._unmarkSelected(s));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,s=new Set(t);t.forEach(m=>this._markSelected(m)),e.filter(m=>!s.has(m)).forEach(m=>this._unmarkSelected(m));const l=this._hasQueuedChanges();return this._emitChangeEvent(),l}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function B1(r,t){return Ye((e,s)=>{let l=null,m=0,E=!1;const I=()=>E&&!l&&s.complete();e.subscribe(new we(s,k=>{l?.unsubscribe();let F=0;const ee=m++;mn(r(k,ee)).subscribe(l=new we(s,me=>s.next(t?t(k,me,ee,F++):me),()=>{l=null,I()}))},()=>{E=!0,I()}))})}const kQ=["trigger"],L4=["panel"];function NQ(r,t){if(1&r&&(Cn(0,"span",10),Nr(1),xn()),2&r){const e=ii();En(1),Rd(e.placeholder)}}function xL(r,t){if(1&r&&(Cn(0,"span",14),Nr(1),xn()),2&r){const e=ii(2);En(1),Rd(e.triggerValue)}}function F1(r,t){1&r&&So(0,0,["*ngSwitchCase","true"])}function PQ(r,t){1&r&&(Cn(0,"span",11),dr(1,xL,2,1,"span",12),dr(2,F1,1,0,"ng-content",13),xn()),2&r&&(Nn("ngSwitch",!!ii().customTrigger),En(2),Nn("ngSwitchCase",!0))}function c2(r,t){if(1&r){const e=$u();bm(),Jp(),Cn(0,"div",15,16),so("@transformPanel.done",function(l){return Ia(e),Ta(ii()._panelDoneAnimatingStream.next(l.toState))})("keydown",function(l){return Ia(e),Ta(ii()._handleKeydown(l))}),So(2,1),xn()}if(2&r){const e=ii();FI("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Nn("ngClass",e.panelClass)("@transformPanel","showing"),no("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const LL=[[["mat-select-trigger"]],"*"],B4=["mat-select-trigger","*"],MQ={transformPanelWrap:Rv("transformPanelWrap",[xg("* => void",V9("@transformPanel",[U9()],{optional:!0}))]),transformPanel:Rv("transformPanel",[Pp("void",fl({opacity:0,transform:"scale(1, 0.8)"})),xg("void => showing",Ov("120ms cubic-bezier(0, 0, 0.2, 1)",fl({opacity:1,transform:"scale(1, 1)"}))),xg("* => void",Ov("100ms linear",fl({opacity:0})))])};let u2=0;const l2=new Fn("mat-select-scroll-strategy"),d2=new Fn("MAT_SELECT_CONFIG"),FL={provide:l2,deps:[Dv],useFactory:function BL(r){return()=>r.scrollStrategies.reposition()}},xQ=new Fn("MatSelectTrigger");class UL{constructor(t,e){this.source=t,this.value=e}}const V4=xk(IV(g1(Yx(class{constructor(r,t,e,s,l){this._elementRef=r,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=s,this.ngControl=l,this.stateChanges=new ht}}))));let VL=(()=>{class r extends V4{constructor(e,s,l,m,E,I,k,F,ee,me,Le,We,it,bt){super(E,m,k,F,me),this._viewportRuler=e,this._changeDetectorRef=s,this._ngZone=l,this._dir=I,this._parentFormField=ee,this._liveAnnouncer=it,this._defaultOptions=bt,this._panelOpen=!1,this._compareWith=(Jt,tn)=>Jt===tn,this._uid="mat-select-"+u2++,this._triggerAriaLabelledBy=null,this._destroy=new ht,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+u2++,this._panelDoneAnimatingStream=new ht,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function x4(r){return new ze(t=>{mn(r()).subscribe(t)})}(()=>{const Jt=this.options;return Jt?Jt.changes.pipe(US(Jt),B1(()=>wo(...Jt.map(tn=>tn.onSelectionChange)))):this._ngZone.onStable.pipe(vl(1),B1(()=>this.optionSelectionChanges))}),this.openedChange=new u,this._openedStream=this.openedChange.pipe(kp(Jt=>Jt),nt(()=>{})),this._closedStream=this.openedChange.pipe(kp(Jt=>!Jt),nt(()=>{})),this.selectionChange=new u,this.valueChange=new u,this.ngControl&&(this.ngControl.valueAccessor=this),null!=bt?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=bt.typeaheadDebounceInterval),this._scrollStrategyFactory=We,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Le)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(OS.required)??!1}set required(e){this._required=$s(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=$s(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=$s(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=kg(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new RQ(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(sV(),su(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(su(this._destroy)).subscribe(e=>{e.added.forEach(s=>s.select()),e.removed.forEach(s=>s.deselect())}),this.options.changes.pipe(US(null),su(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),s=this.ngControl;if(e!==this._triggerAriaLabelledBy){const l=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?l.setAttribute("aria-labelledby",e):l.removeAttribute("aria-labelledby")}s&&(this._previousControl!==s.control&&(void 0!==this._previousControl&&null!==s.disabled&&s.disabled!==this.disabled&&(this.disabled=s.disabled),this._previousControl=s.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(s=>s.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const s=e.keyCode,l=40===s||38===s||37===s||39===s,m=13===s||32===s,E=this._keyManager;if(!E.isTyping()&&m&&!FS(e)||(this.multiple||e.altKey)&&l)e.preventDefault(),this.open();else if(!this.multiple){const I=this.selected;E.onKeydown(e);const k=this.selected;k&&I!==k&&this._liveAnnouncer.announce(k.viewValue,1e4)}}_handleOpenKeydown(e){const s=this._keyManager,l=e.keyCode,m=40===l||38===l,E=s.isTyping();if(m&&e.altKey)e.preventDefault(),this.close();else if(E||13!==l&&32!==l||!s.activeItem||FS(e))if(!E&&this._multiple&&65===l&&e.ctrlKey){e.preventDefault();const I=this.options.some(k=>!k.disabled&&!k.selected);this.options.forEach(k=>{k.disabled||(I?k.select():k.deselect())})}else{const I=s.activeItemIndex;s.onKeydown(e),this._multiple&&m&&e.shiftKey&&s.activeItem&&s.activeItemIndex!==I&&s.activeItem._selectViaInteraction()}else e.preventDefault(),s.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(vl(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(s=>s.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(s=>this._selectOptionByValue(s)),this._sortValues();else{const s=this._selectOptionByValue(e);s?this._keyManager.updateActiveItem(s):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const s=this.options.find(l=>{if(this._selectionModel.isSelected(l))return!1;try{return null!=l.value&&this._compareWith(l.value,e)}catch{return!1}});return s&&this._selectionModel.select(s),s}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new hV(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=wo(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(su(e)).subscribe(s=>{this._onSelect(s.source,s.isUserInput),s.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),wo(...this.options.map(s=>s._stateChanges)).pipe(su(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,s){const l=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(l!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),s&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),s&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),l!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((s,l)=>this.sortComparator?this.sortComparator(s,l,e):e.indexOf(s)-e.indexOf(l)),this.stateChanges.next()}}_propagateChanges(e){let s=null;s=this.multiple?this.selected.map(l=>l.value):this.selected?this.selected.value:e,this._value=s,this.valueChange.emit(s),this._onChange(s),this.selectionChange.emit(this._getChangeEvent(s)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let s=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(s+=" "+this.ariaLabelledby),s}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return r.\u0275fac=function(e){return new(e||r)(gt(uL),gt(Ff),gt(gi),gt(qx),gt(Ni),gt(Gy,8),gt(XT,8),gt(PS,8),gt(a2,8),gt(fs,10),zh("tabindex"),gt(l2),gt(m1),gt(d2,8))},r.\u0275dir=mr({type:r,viewQuery:function(e,s){if(1&e&&(ut(kQ,5),ut(L4,5),ut(gL,5)),2&e){let l;At(l=$e())&&(s.trigger=l.first),At(l=$e())&&(s.panel=l.first),At(l=$e())&&(s._overlayDir=l.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Br,za]}),r})(),jL=(()=>{class r extends VL{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(su(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const s=this.options.toArray()[e];if(s){const l=this.panel.nativeElement,m=function Zx(r,t,e){if(e.length){let s=t.toArray(),l=e.toArray(),m=0;for(let E=0;E<r+1;E++)s[E].group&&s[E].group===l[m]&&m++;return m}return 0}(e,this.options,this.optionGroups),E=s._getHostElement();l.scrollTop=0===e&&1===m?0:function R9(r,t,e,s){return r<e?r:r+t>e+s?Math.max(0,r-s+t):e}(E.offsetTop,E.offsetHeight,l.scrollTop,l.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new UL(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Jk?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_o(r)))(s||r)}}(),r.\u0275cmp=ba({type:r,selectors:[["mat-select"]],contentQueries:function(e,s,l){if(1&e&&(Be(l,xQ,5),Be(l,$x,5),Be(l,Bk,5)),2&e){let m;At(m=$e())&&(s.customTrigger=m.first),At(m=$e())&&(s.options=m),At(m=$e())&&(s.optionGroups=m)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,s){1&e&&so("keydown",function(m){return s._handleKeydown(m)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&e&&(no("id",s.id)("tabindex",s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),Fr("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[vo([{provide:ML,useExisting:r},{provide:zy,useExisting:r}]),Br],ngContentSelectors:B4,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,s){if(1&e&&(Ys(LL),Cn(0,"div",0,1),so("click",function(){return s.toggle()}),Cn(3,"div",2),dr(4,NQ,2,1,"span",3),dr(5,PQ,3,2,"span",4),xn(),Cn(6,"div",5)(7,"div",6),bm(),Cn(8,"svg",7),oo(9,"path",8),xn()()()(),dr(10,c2,3,9,"ng-template",9),so("backdropClick",function(){return s.close()})("attach",function(){return s._onAttached()})("detach",function(){return s.close()})),2&e){const l=ch(1);no("aria-owns",s.panelOpen?s.id+"-panel":null),En(3),Nn("ngSwitch",s.empty),no("id",s._valueId),En(1),Nn("ngSwitchCase",!0),En(1),Nn("ngSwitchCase",!1),En(5),Nn("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||l)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[SD,kT,NT,hU,gL,Jk],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[MQ.transformPanel]},changeDetection:0}),r})(),BQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[FL],imports:[Es,_L,Fk,gs,w1,Ug,Fk,gs]}),r})();const h2=uc({passive:!0});let FQ=(()=>{class r{constructor(e,s){this._platform=e,this._ngZone=s,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return oE;const s=Jf(e),l=this._monitoredElements.get(s);if(l)return l.subject;const m=new ht,E="cdk-text-field-autofilled",I=k=>{"cdk-text-field-autofill-start"!==k.animationName||s.classList.contains(E)?"cdk-text-field-autofill-end"===k.animationName&&s.classList.contains(E)&&(s.classList.remove(E),this._ngZone.run(()=>m.next({target:k.target,isAutofilled:!1}))):(s.classList.add(E),this._ngZone.run(()=>m.next({target:k.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{s.addEventListener("animationstart",I,h2),s.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(s,{subject:m,unlisten:()=>{s.removeEventListener("animationstart",I,h2)}}),m}stopMonitoring(e){const s=Jf(e),l=this._monitoredElements.get(s);l&&(l.unlisten(),l.subject.complete(),s.classList.remove("cdk-text-field-autofill-monitored"),s.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(s))}ngOnDestroy(){this._monitoredElements.forEach((e,s)=>this.stopMonitoring(s))}}return r.\u0275fac=function(e){return new(e||r)(Xt(Oc),Xt(gi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Q4=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({}),r})();const jQ=new Fn("MAT_INPUT_VALUE_ACCESSOR"),H4=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let V1=0;const QQ=Yx(class{constructor(r,t,e,s){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=e,this.ngControl=s,this.stateChanges=new ht}});let G4=(()=>{class r extends QQ{constructor(e,s,l,m,E,I,k,F,ee,me){super(I,m,E,l),this._elementRef=e,this._platform=s,this._autofillMonitor=F,this._formField=me,this._uid="mat-input-"+V1++,this.focused=!1,this.stateChanges=new ht,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(it=>Dp().has(it)),this._iOSKeyupListener=it=>{const bt=it.target;!bt.value&&0===bt.selectionStart&&0===bt.selectionEnd&&(bt.setSelectionRange(1,1),bt.setSelectionRange(0,0))};const Le=this._elementRef.nativeElement,We=Le.nodeName.toLowerCase();this._inputValueAccessor=k||Le,this._previousNativeValue=this.value,this.id=this.id,s.IOS&&ee.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===We,this._isTextarea="textarea"===We,this._isInFormField=!!me,this._isNativeSelect&&(this.controlType=Le.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=$s(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(OS.required)??!1}set required(e){this._required=$s(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Dp().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=$s(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=e,e?s.setAttribute("placeholder",e):s.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){H4.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,s=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&s&&s.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Oc),gt(fs,10),gt(XT,8),gt(PS,8),gt(qx),gt(jQ,10),gt(FQ),gt(gi),gt(a2,8))},r.\u0275dir=mr({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,s){1&e&&so("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&e&&(X_("id",s.id)("disabled",s.disabled)("required",s.required),no("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),Fr("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[vo([{provide:ML,useExisting:r}]),Br,za]}),r})(),cu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,Ug,Ug,Q4,gs]}),r})();function QL(r){return Ye((t,e)=>{let m,s=null,l=!1;s=t.subscribe(new we(e,void 0,void 0,E=>{m=mn(r(E,QL(r)(t))),s?(s.unsubscribe(),s=null,m.subscribe(e)):l=!0})),l&&(s.unsubscribe(),s=null,m.subscribe(e))})}const GQ=["*"];let p2;function o0(r){return function HL(){if(void 0===p2&&(p2=null,typeof window<"u")){const r=window;void 0!==r.trustedTypes&&(p2=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return p2}()?.createHTML(r)||r}function GL(r){return Error(`Unable to find icon with the name "${r}"`)}function WL(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function KL(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class Xy{constructor(t,e,s){this.url=t,this.svgText=e,this.options=s}}let f2=(()=>{class r{constructor(e,s,l,m){this._httpClient=e,this._sanitizer=s,this._errorHandler=m,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=l}addSvgIcon(e,s,l){return this.addSvgIconInNamespace("",e,s,l)}addSvgIconLiteral(e,s,l){return this.addSvgIconLiteralInNamespace("",e,s,l)}addSvgIconInNamespace(e,s,l,m){return this._addSvgIconConfig(e,s,new Xy(l,null,m))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,s,l,m){const E=this._sanitizer.sanitize(to.HTML,l);if(!E)throw KL(l);const I=o0(E);return this._addSvgIconConfig(e,s,new Xy("",I,m))}addSvgIconSet(e,s){return this.addSvgIconSetInNamespace("",e,s)}addSvgIconSetLiteral(e,s){return this.addSvgIconSetLiteralInNamespace("",e,s)}addSvgIconSetInNamespace(e,s,l){return this._addSvgIconSetConfig(e,new Xy(s,null,l))}addSvgIconSetLiteralInNamespace(e,s,l){const m=this._sanitizer.sanitize(to.HTML,s);if(!m)throw KL(s);const E=o0(m);return this._addSvgIconSetConfig(e,new Xy("",E,l))}registerFontClassAlias(e,s=e){return this._fontCssClassesByAlias.set(e,s),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const s=this._sanitizer.sanitize(to.RESOURCE_URL,e);if(!s)throw WL(e);const l=this._cachedIconsByUrl.get(s);return l?dl(j1(l)):this._loadSvgIconFromConfig(new Xy(e,null)).pipe(gk(m=>this._cachedIconsByUrl.set(s,m)),nt(m=>j1(m)))}getNamedSvgIcon(e,s=""){const l=Y4(s,e);let m=this._svgIconConfigs.get(l);if(m)return this._getSvgFromConfig(m);if(m=this._getIconConfigFromResolvers(s,e),m)return this._svgIconConfigs.set(l,m),this._getSvgFromConfig(m);const E=this._iconSetConfigs.get(s);return E?this._getSvgFromIconSetConfigs(e,E):function HQ(r,t){const e=L(r)?r:()=>r,s=l=>l.error(e());return new ze(t?l=>t.schedule(s,0,l):s)}(GL(l))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?dl(j1(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(nt(s=>j1(s)))}_getSvgFromIconSetConfigs(e,s){const l=this._extractIconWithNameFromAnySet(e,s);return l?dl(l):BM(s.filter(E=>!E.svgText).map(E=>this._loadSvgIconSetFromConfig(E).pipe(QL(I=>{const F=`Loading icon set URL: ${this._sanitizer.sanitize(to.RESOURCE_URL,E.url)} failed: ${I.message}`;return this._errorHandler.handleError(new Error(F)),dl(null)})))).pipe(nt(()=>{const E=this._extractIconWithNameFromAnySet(e,s);if(!E)throw GL(e);return E}))}_extractIconWithNameFromAnySet(e,s){for(let l=s.length-1;l>=0;l--){const m=s[l];if(m.svgText&&m.svgText.toString().indexOf(e)>-1){const E=this._svgElementFromConfig(m),I=this._extractSvgIconFromSet(E,e,m.options);if(I)return I}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(gk(s=>e.svgText=s),nt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?dl(null):this._fetchIcon(e).pipe(gk(s=>e.svgText=s))}_extractSvgIconFromSet(e,s,l){const m=e.querySelector(`[id="${s}"]`);if(!m)return null;const E=m.cloneNode(!0);if(E.removeAttribute("id"),"svg"===E.nodeName.toLowerCase())return this._setSvgAttributes(E,l);if("symbol"===E.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(E),l);const I=this._svgElementFromString(o0("<svg></svg>"));return I.appendChild(E),this._setSvgAttributes(I,l)}_svgElementFromString(e){const s=this._document.createElement("DIV");s.innerHTML=e;const l=s.querySelector("svg");if(!l)throw Error("<svg> tag not found");return l}_toSvgElement(e){const s=this._svgElementFromString(o0("<svg></svg>")),l=e.attributes;for(let m=0;m<l.length;m++){const{name:E,value:I}=l[m];"id"!==E&&s.setAttribute(E,I)}for(let m=0;m<e.childNodes.length;m++)e.childNodes[m].nodeType===this._document.ELEMENT_NODE&&s.appendChild(e.childNodes[m].cloneNode(!0));return s}_setSvgAttributes(e,s){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),s&&s.viewBox&&e.setAttribute("viewBox",s.viewBox),e}_fetchIcon(e){const{url:s,options:l}=e,m=l?.withCredentials??!1;if(!this._httpClient)throw function K4(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const E=this._sanitizer.sanitize(to.RESOURCE_URL,s);if(!E)throw WL(s);const I=this._inProgressUrlFetches.get(E);if(I)return I;const k=this._httpClient.get(E,{responseType:"text",withCredentials:m}).pipe(nt(F=>o0(F)),function W4(r){return Ye((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}(()=>this._inProgressUrlFetches.delete(E)),du());return this._inProgressUrlFetches.set(E,k),k}_addSvgIconConfig(e,s,l){return this._svgIconConfigs.set(Y4(e,s),l),this}_addSvgIconSetConfig(e,s){const l=this._iconSetConfigs.get(e);return l?l.push(s):this._iconSetConfigs.set(e,[s]),this}_svgElementFromConfig(e){if(!e.svgElement){const s=this._svgElementFromString(e.svgText);this._setSvgAttributes(s,e.options),e.svgElement=s}return e.svgElement}_getIconConfigFromResolvers(e,s){for(let l=0;l<this._resolvers.length;l++){const m=this._resolvers[l](s,e);if(m)return q4(m)?new Xy(m.url,null,m.options):new Xy(m,null)}}}return r.\u0275fac=function(e){return new(e||r)(Xt(rk,8),Xt(xM),Xt(Mi,8),Xt(Sd))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function j1(r){return r.cloneNode(!0)}function Y4(r,t){return r+":"+t}function q4(r){return!(!r.url||!r.options)}const Vg=Mk(class{constructor(r){this._elementRef=r}}),WQ=new Fn("MAT_ICON_DEFAULT_OPTIONS"),KQ=new Fn("mat-icon-location",{providedIn:"root",factory:function zQ(){const r=Ea(Mi),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),J4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],YQ=J4.map(r=>`[${r}]`).join(", "),qQ=/^url\(['"]?#(.*?)['"]?\)$/;let JQ=(()=>{class r extends Vg{constructor(e,s,l,m,E,I){super(e),this._iconRegistry=s,this._location=m,this._errorHandler=E,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=U.EMPTY,I&&(I.color&&(this.color=this.defaultColor=I.color),I.fontSet&&(this.fontSet=I.fontSet)),l||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=$s(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const s=this._cleanupFontValue(e);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const s=this._cleanupFontValue(e);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const s=e.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let s=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){const l=e.childNodes[s];(1!==l.nodeType||"svg"===l.nodeName.toLowerCase())&&l.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,s=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(l=>l.length>0);this._previousFontSetClass.forEach(l=>e.classList.remove(l)),s.forEach(l=>e.classList.add(l)),this._previousFontSetClass=s,this.fontIcon!==this._previousFontIconClass&&!s.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const s=this._elementsWithExternalReferences;s&&s.forEach((l,m)=>{l.forEach(E=>{m.setAttribute(E.name,`url('${e}#${E.value}')`)})})}_cacheChildrenWithExternalReferences(e){const s=e.querySelectorAll(YQ),l=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let m=0;m<s.length;m++)J4.forEach(E=>{const I=s[m],k=I.getAttribute(E),F=k?k.match(qQ):null;if(F){let ee=l.get(I);ee||(ee=[],l.set(I,ee)),ee.push({name:E,value:F[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[s,l]=this._splitIconName(e);s&&(this._svgNamespace=s),l&&(this._svgName=l),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(l,s).pipe(vl(1)).subscribe(m=>this._setSvgElement(m),m=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${s}:${l}! ${m.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(f2),zh("aria-hidden"),gt(KQ),gt(Sd),gt(WQ,8))},r.\u0275cmp=ba({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,s){2&e&&(no("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Fr("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Br],ngContentSelectors:GQ,decls:1,vars:0,template:function(e,s){1&e&&(Ys(),So(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),r})(),XQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[gs,gs]}),r})();const X4=["determinateSpinner"];function $Q(r,t){if(1&r&&(bm(),Cn(0,"svg",11),oo(1,"circle",12),xn()),2&r){const e=ii();no("viewBox",e._viewBox()),En(1),ys("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),no("r",e._circleRadius())}}const ZQ=Mk(class{constructor(r){this._elementRef=r}},"primary"),eH=new Fn("mat-progress-spinner-default-options",{providedIn:"root",factory:function tH(){return{diameter:$4}}}),$4=100;let nH=(()=>{class r extends ZQ{constructor(e,s,l){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=$4,this._noopAnimations="NoopAnimations"===s&&!!l&&!l._forceAnimations,l&&(l.color&&(this.color=this.defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,kg(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=kg(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=kg(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Sp,8),gt(eH))},r.\u0275cmp=ba({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,s){if(1&e&&ut(X4,5),2&e){let l;At(l=$e())&&(s._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,s){2&e&&(no("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===s.mode?s.value:null)("mode",s.mode),ys("width",s.diameter,"px")("height",s.diameter,"px"),Fr("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===s.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Br],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,s){if(1&e&&(dr(0,$Q,2,8,"ng-template",null,0,_r),Cn(2,"div",1,2),bm(),Cn(4,"svg",3),oo(5,"circle",4),xn()(),Jp(),Cn(6,"div",5)(7,"div",6)(8,"div",7),G_(9,8),xn(),Cn(10,"div",9),G_(11,8),xn(),Cn(12,"div",10),G_(13,8),xn()()()),2&e){const l=ch(1);En(4),no("viewBox",s._viewBox()),En(1),ys("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),no("r",s._circleRadius()),En(4),Nn("ngTemplateOutlet",l),En(2),Nn("ngTemplateOutlet",l),En(2),Nn("ngTemplateOutlet",l)}},dependencies:[aM],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),s0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[Es,gs]}),r})(),m2=0;const Z4=g1(class{}),YL="mat-badge-content";let e5=(()=>{class r extends Z4{constructor(e,s,l,m,E){super(),this._ngZone=e,this._elementRef=s,this._ariaDescriber=l,this._renderer=m,this._animationMode=E,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=m2++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=$s(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=$s(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),s="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(YL),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(s)})}):e.classList.add(s),e}_updateRenderedContent(e){const s=`${e??""}`.trim();this._isInitialized&&s&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=s),this._content=s}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const s=this._elementRef.nativeElement.classList;s.remove(`mat-badge-${this._color}`),e&&s.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${YL}`);for(const s of Array.from(e))s!==this._badgeElement&&s.remove()}}return r.\u0275fac=function(e){return new(e||r)(gt(gi),gt(Ni),gt(Lx),gt(bd),gt(Sp,8))},r.\u0275dir=mr({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,s){2&e&&Fr("mat-badge-overlap",s.overlap)("mat-badge-above",s.isAbove())("mat-badge-below",!s.isAbove())("mat-badge-before",!s.isAfter())("mat-badge-after",s.isAfter())("mat-badge-small","small"===s.size)("mat-badge-medium","medium"===s.size)("mat-badge-large","large"===s.size)("mat-badge-hidden",s.hidden||!s.content)("mat-badge-disabled",s.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[Br]}),r})(),t5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({imports:[vV,gs,gs]}),r})();function qL(r,t){return t?e=>Ek(t.pipe(vl(1),function n5(){return Ye((r,t)=>{r.subscribe(new we(t,te))})}()),e.pipe(qL(r))):tr((e,s)=>r(e,s).pipe(vl(1),function r5(r){return nt(()=>r)}(e)))}function JL(r,t=Nx){const e=GV(r,t);return qL(()=>e)}const i5=["mat-menu-item",""];function o5(r,t){1&r&&(bm(),Cn(0,"svg",3),oo(1,"polygon",4),xn())}const s5=[[["mat-icon"]],"*"],a5=["mat-icon","*"];function c5(r,t){if(1&r){const e=$u();Cn(0,"div",0),so("keydown",function(l){return Ia(e),Ta(ii()._handleKeydown(l))})("click",function(){return Ia(e),Ta(ii().closed.emit("click"))})("@transformMenu.start",function(l){return Ia(e),Ta(ii()._onAnimationStart(l))})("@transformMenu.done",function(l){return Ia(e),Ta(ii()._onAnimationDone(l))}),Cn(1,"div",1),So(2),xn()()}if(2&r){const e=ii();Nn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),no("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const u5=["*"],g2=new Fn("MAT_MENU_PANEL"),l5=xk(g1(class{}));let Yi=(()=>{class r extends l5{constructor(e,s,l,m,E){super(),this._elementRef=e,this._document=s,this._focusMonitor=l,this._parentMenu=m,this._changeDetectorRef=E,this.role="menuitem",this._hovered=new ht,this._focused=new ht,this._highlighted=!1,this._triggersSubmenu=!1,m?.addItem?.(this)}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),s=e.querySelectorAll("mat-icon, .material-icons");for(let l=0;l<s.length;l++)s[l].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(Mi),gt(Rk),gt(g2,8),gt(Ff))},r.\u0275cmp=ba({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,s){1&e&&so("click",function(m){return s._checkDisabled(m)})("mouseenter",function(){return s._handleMouseEnter()}),2&e&&(no("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),Fr("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Br],attrs:i5,ngContentSelectors:a5,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,s){1&e&&(Ys(s5),So(0),Cn(1,"span",0),So(2,1),xn(),oo(3,"div",1),dr(4,o5,2,0,"svg",2)),2&e&&(En(3),Nn("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),En(1),Nn("ngIf",s._triggersSubmenu))},dependencies:[AS,HS],encapsulation:2,changeDetection:0}),r})();const d5=new Fn("MatMenuContent"),Gd={transformMenu:Rv("transformMenu",[Pp("void",fl({opacity:0,transform:"scale(0.8)"})),xg("void => enter",Ov("120ms cubic-bezier(0, 0, 0.2, 1)",fl({opacity:1,transform:"scale(1)"}))),xg("* => void",Ov("100ms 25ms linear",fl({opacity:0})))]),fadeInItems:Rv("fadeInItems",[Pp("showing",fl({opacity:1})),xg("void => *",[fl({opacity:0}),Ov("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let a0=0;const Os=new Fn("mat-menu-default-options",{providedIn:"root",factory:function h5(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Q1=(()=>{class r{constructor(e,s,l,m){this._elementRef=e,this._ngZone=s,this._defaultOptions=l,this._changeDetectorRef=m,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new A,this._classList={},this._panelAnimationState="void",this._animationDone=new ht,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new u,this.close=this.closed,this.panelId="mat-menu-panel-"+a0++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=$s(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=$s(e)}set panelClass(e){const s=this._previousPanelClass;s&&s.length&&s.split(" ").forEach(l=>{this._classList[l]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(l=>{this._classList[l]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Tk(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(US(this._directDescendantItems),B1(e=>wo(...e.map(s=>s._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const s=this._keyManager;if("enter"===this._panelAnimationState&&s.activeItem?._hasFocus()){const l=e.toArray(),m=Math.max(0,Math.min(l.length-1,s.activeItemIndex||0));l[m]&&!l[m].disabled?s.setActiveItem(m):s.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(US(this._directDescendantItems),B1(s=>wo(...s.map(l=>l._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const s=e.keyCode,l=this._keyManager;switch(s){case 27:FS(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===s||40===s)&&l.setFocusOrigin("keyboard"),void l.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(vl(1)).subscribe(()=>{let s=null;if(this._directDescendantItems.length&&(s=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!s||!s.contains(document.activeElement)){const l=this._keyManager;l.setFocusOrigin(e).setFirstItemActive(),!l.activeItem&&s&&s.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const s=Math.min(this._baseElevation+e,24),l=`${this._elevationPrefix}${s}`,m=Object.keys(this._classList).find(E=>E.startsWith(this._elevationPrefix));(!m||m===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[l]=!0,this._previousElevation=l)}setPositionClasses(e=this.xPosition,s=this.yPosition){const l=this._classList;l["mat-menu-before"]="before"===e,l["mat-menu-after"]="after"===e,l["mat-menu-above"]="above"===s,l["mat-menu-below"]="below"===s,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(US(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(s=>s._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(gi),gt(Os),gt(Ff))},r.\u0275dir=mr({type:r,contentQueries:function(e,s,l){if(1&e&&(Be(l,d5,5),Be(l,Yi,5),Be(l,Yi,4)),2&e){let m;At(m=$e())&&(s.lazyContent=m.first),At(m=$e())&&(s._allItems=m),At(m=$e())&&(s.items=m)}},viewQuery:function(e,s){if(1&e&&ut(S,5),2&e){let l;At(l=$e())&&(s.templateRef=l.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),dH=(()=>{class r extends Q1{constructor(e,s,l,m){super(e,s,l,m),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return r.\u0275fac=function(e){return new(e||r)(gt(Ni),gt(gi),gt(Os),gt(Ff))},r.\u0275cmp=ba({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,s){2&e&&no("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[vo([{provide:g2,useExisting:r}]),Br],ngContentSelectors:u5,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,s){1&e&&(Ys(),dr(0,c5,3,6,"ng-template"))},dependencies:[SD],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Gd.transformMenu,Gd.fadeInItems]},changeDetection:0}),r})();const _2=new Fn("mat-menu-scroll-strategy"),pH={provide:_2,deps:[Dv],useFactory:function hH(r){return()=>r.scrollStrategies.reposition()}},p5=uc({passive:!0});let fH=(()=>{class r{constructor(e,s,l,m,E,I,k,F,ee){this._overlay=e,this._element=s,this._viewContainerRef=l,this._menuItemInstance=I,this._dir=k,this._focusMonitor=F,this._ngZone=ee,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=U.EMPTY,this._hoverSubscription=U.EMPTY,this._menuCloseSubscription=U.EMPTY,this._handleTouchStart=me=>{Cv(me)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new u,this.onMenuOpen=this.menuOpened,this.menuClosed=new u,this.onMenuClose=this.menuClosed,this._scrollStrategy=m,this._parentMaterialMenu=E instanceof Q1?E:void 0,s.nativeElement.addEventListener("touchstart",this._handleTouchStart,p5)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(s=>{this._destroyMenu(s),("click"===s||"tab"===s)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(s)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,p5),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const s=this._createOverlay(e),l=s.getConfig(),m=l.positionStrategy;this._setPosition(e,m),l.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),s.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Q1&&(e._startAnimation(),e._directDescendantItems.changes.pipe(su(e.close)).subscribe(()=>{m.withLockedPosition(!1).reapplyLastPosition(),m.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,s):this._element.nativeElement.focus(s)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const s=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,s instanceof Q1?(s._resetAnimation(),s.lazyContent?s._animationDone.pipe(kp(l=>"void"===l.toState),vl(1),su(s.lazyContent._attached)).subscribe({next:()=>s.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),s?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let s=0,l=e.parentMenu;for(;l;)s++,l=l.parentMenu;e.setElevation(s)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const s=this._getOverlayConfig(e);this._subscribeToPositions(e,s.positionStrategy),this._overlayRef=this._overlay.create(s),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new R1({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,s){e.setPositionClasses&&s.positionChanges.subscribe(l=>{const m="start"===l.connectionPair.overlayX?"after":"before",E="top"===l.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(m,E)):e.setPositionClasses(m,E)})}_setPosition(e,s){let[l,m]="before"===e.xPosition?["end","start"]:["start","end"],[E,I]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[k,F]=[E,I],[ee,me]=[l,m],Le=0;if(this.triggersSubmenu()){if(me=l="before"===e.xPosition?"start":"end",m=ee="end"===l?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const We=this._parentMaterialMenu.items.first;this._parentInnerPadding=We?We._getHostElement().offsetTop:0}Le="bottom"===E?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(k="top"===E?"bottom":"top",F="top"===I?"bottom":"top");s.withPositions([{originX:l,originY:k,overlayX:ee,overlayY:E,offsetY:Le},{originX:m,originY:k,overlayX:me,overlayY:E,offsetY:Le},{originX:l,originY:F,overlayX:ee,overlayY:I,offsetY:-Le},{originX:m,originY:F,overlayX:me,overlayY:I,offsetY:-Le}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),s=this._overlayRef.detachments();return wo(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:dl(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(kp(E=>E!==this._menuItemInstance),kp(()=>this._menuOpen)):dl(),s)}_handleMousedown(e){au(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const s=e.keyCode;(13===s||32===s)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===s&&"ltr"===this.dir||37===s&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(kp(e=>e===this._menuItemInstance&&!e.disabled),JL(0,Wk)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Q1&&this.menu._isAnimating?this.menu._animationDone.pipe(vl(1),JL(0,Wk),su(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new b1(e.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(gt(Dv),gt(Ni),gt(G),gt(_2),gt(g2,8),gt(Yi,10),gt(Gy,8),gt(Rk),gt(gi))},r.\u0275dir=mr({type:r,hostVars:3,hostBindings:function(e,s){1&e&&so("click",function(m){return s._handleClick(m)})("mousedown",function(m){return s._handleMousedown(m)})("keydown",function(m){return s._handleKeydown(m)}),2&e&&no("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),mH=(()=>{class r extends fH{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_o(r)))(s||r)}}(),r.\u0275dir=mr({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Br]}),r})(),gH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:[pH],imports:[Es,pl,gs,_L,w1,gs]}),r})();class v2{transform(t,...e){return Array.from(t,([s,l])=>({name:s,value:l}))}static#e=this.\u0275fac=function(e){return new(e||v2)};static#t=this.\u0275pipe=ra({name:"twilio",type:v2,pure:!1})}function _H(r,t){1&r&&(Cn(0,"button",17)(1,"mat-icon"),Nr(2,"login"),xn()())}function vH(r,t){if(1&r){const e=$u();Cn(0,"form",7),so("ngSubmit",function(){Ia(e);const l=ii();return Ta(l.authorize(l.configForm.value))}),Cn(1,"mat-form-field",8)(2,"mat-label"),Nr(3,"Video SDK Provider"),xn(),Cn(4,"mat-select",9)(5,"mat-option",10),Nr(6,"Zoom Video SDK"),xn(),Cn(7,"mat-option",11),Nr(8,"Twilio Video SDK"),xn()()(),Cn(9,"mat-form-field",8)(10,"mat-label"),Nr(11,"Your Name"),xn(),oo(12,"input",12),Cn(13,"mat-icon",13),Nr(14,"face"),xn()(),Cn(15,"mat-form-field",8)(16,"mat-label"),Nr(17,"Session Name"),xn(),oo(18,"input",14),Cn(19,"mat-icon",13),Nr(20,"meeting_room"),xn()(),Cn(21,"mat-form-field",8)(22,"mat-label"),Nr(23,"Session Passcode"),xn(),oo(24,"input",15),Cn(25,"mat-icon",13),Nr(26,"vpn_key"),xn()(),dr(27,_H,3,0,"button",16),xn()}if(2&r){const e=ii();Nn("formGroup",e.configForm),En(27),Nn("ngIf",!e.session)}}function AH(r,t){if(1&r&&(Cn(0,"div",18)(1,"h1"),Nr(2),xn()()),2&r){const e=ii();En(2),Od("",e.videoSDKProvider," Video SDK")}}function m5(r,t){if(1&r){const e=$u();Cn(0,"button",22),so("click",function(){return Ia(e),Ta(ii(2).startAudio())}),Cn(1,"mat-icon"),Nr(2,"volume_off"),xn()()}}function yH(r,t){if(1&r){const e=$u();Cn(0,"button",22),so("click",function(){return Ia(e),Ta(ii(2).mute())}),Cn(1,"mat-icon"),Nr(2,"mic"),xn()()}}function EH(r,t){if(1&r){const e=$u();Cn(0,"button",22),so("click",function(){return Ia(e),Ta(ii(2).unmute())}),Cn(1,"mat-icon"),Nr(2,"mic_off"),xn()()}}function bH(r,t){if(1&r){const e=$u();Cn(0,"button",22),so("click",function(){return Ia(e),Ta(ii(2).stopCamera())}),Cn(1,"mat-icon"),Nr(2,"videocam"),xn()()}}function g5(r,t){if(1&r){const e=$u();Cn(0,"button",22),so("click",function(){return Ia(e),Ta(ii(2).startCamera())}),Cn(1,"mat-icon"),Nr(2,"videocam_off"),xn()()}}function _5(r,t){if(1&r&&(Cn(0,"button",26),Nr(1),xn()),2&r){const e=t.$implicit;En(1),Rd(e.displayName)}}function v5(r,t){if(1&r&&(uh(0),Cn(1,"button",23)(2,"mat-icon"),Nr(3,"people"),xn()(),Cn(4,"mat-menu",null,24),dr(6,_5,2,1,"button",25),xn(),Xu()),2&r){const e=ch(5),s=ii(2);En(1),Nn("matMenuTriggerFor",e)("matBadge",s.zoomVideo.getAllUser().length),En(5),Nn("ngForOf",s.zoomVideo.getAllUser())}}function A5(r,t){if(1&r&&(Cn(0,"button",26),Nr(1),xn()),2&r){const e=t.$implicit;En(1),Rd(e.value.identity)}}function SH(r,t){if(1&r&&(uh(0),Cn(1,"button",23)(2,"mat-icon"),Nr(3,"people"),xn()(),Cn(4,"mat-menu",null,24)(6,"button",26),Nr(7),xn(),dr(8,A5,2,1,"button",25),function JO(r,t){const e=ar();let s;const l=r+22;e.firstCreatePass?(s=function hv(r,t){if(t)for(let e=t.length-1;e>=0;e--){const s=t[e];if(r===s.name)return s}}(t,e.pipeRegistry),e.data[l]=s,s.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(l,s.onDestroy)):s=e.data[l];const m=s.factory||(s.factory=ia(s.type)),E=Nu(gt);try{const I=Kh(!1),k=m();return Kh(I),function qA(r,t,e,s){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=s}(e,An(),l,k),k}finally{Nu(E)}}(9,"twilio"),xn(),Xu()),2&r){const e=ch(5),s=ii(2);En(1),Nn("matMenuTriggerFor",e)("matBadge",s.twilioSession.participants.size+1),En(6),Rd(s.twilioSession.localParticipant.identity),En(1),Nn("ngForOf",XO(9,4,s.twilioSession.participants))}}function CH(r,t){if(1&r){const e=$u();Cn(0,"div",19),dr(1,m5,3,0,"button",20),dr(2,yH,3,0,"button",20),dr(3,EH,3,0,"button",20),dr(4,bH,3,0,"button",20),dr(5,g5,3,0,"button",20),dr(6,v5,7,3,"ng-container",6),dr(7,SH,10,6,"ng-container",6),Cn(8,"button",21),so("click",function(){return Ia(e),Ta(ii().leave())}),Cn(9,"mat-icon"),Nr(10,"logout"),xn()()()}if(2&r){const e=ii();En(1),Nn("ngIf",!e.mic&&!e.audio),En(1),Nn("ngIf",e.mic&&e.audio),En(1),Nn("ngIf",!e.mic&&e.audio),En(1),Nn("ngIf",e.camera),En(1),Nn("ngIf",!e.camera),En(1),Nn("ngIf","zoom"===e.videoSDKProvider),En(1),Nn("ngIf","twilio"===e.videoSDKProvider&&e.twilioSession.participants)}}function IH(r,t){1&r&&(Cn(0,"div",27),oo(1,"mat-spinner"),xn())}function y5(r,t){1&r&&oo(0,"mat-spinner")}function TH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_off"),xn())}function wH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_on"),xn())}function E5(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"volume_off"),xn())}function RH(r,t){if(1&r&&(Cn(0,"p"),dr(1,TH,2,0,"mat-icon",6),dr(2,wH,2,0,"mat-icon",6),dr(3,E5,2,0,"mat-icon",6),Nr(4),xn()),2&r){const e=ii(2);En(1),Nn("ngIf",e.audio&&!e.mic),En(1),Nn("ngIf",e.audio&&e.mic),En(1),Nn("ngIf",!e.audio),En(1),Od(" ",e.zoomVideo.getCurrentUserInfo().displayName," (me) ")}}function b5(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"sentiment_satisfied_alt"),xn())}function H1(r,t){if(1&r&&(uh(0),dr(1,RH,5,4,"p",6),dr(2,b5,2,0,"mat-icon",6),oo(3,"video",28)(4,"canvas",29),Xu()),2&r){const e=ii();En(1),Nn("ngIf",e.zoomVideo&&e.zoomVideo.getCurrentUserInfo()),En(1),Nn("ngIf",!e.camera&&!e.cameraLoading),En(1),Nn("hidden",!e.useVideoElementForZoom),En(1),Nn("hidden",!e.useCanvasElementForZoom)}}function OH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_off"),xn())}function S5(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_on"),xn())}function DH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"volume_off"),xn())}function kH(r,t){if(1&r&&(Cn(0,"p"),dr(1,OH,2,0,"mat-icon",6),dr(2,S5,2,0,"mat-icon",6),dr(3,DH,2,0,"mat-icon",6),Nr(4),xn()),2&r){const e=ii(2);En(1),Nn("ngIf",e.audio&&!e.mic),En(1),Nn("ngIf",e.audio&&e.mic),En(1),Nn("ngIf",!e.audio),En(1),Od(" ",e.twilioSession.localParticipant.identity," (me) ")}}function NH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"sentiment_satisfied_alt"),xn())}function va(r,t){if(1&r&&(uh(0),dr(1,kH,5,4,"p",6),dr(2,NH,2,0,"mat-icon",6),oo(3,"div",30),Xu()),2&r){const e=ii();En(1),Nn("ngIf",e.twilioSession),En(1),Nn("ngIf",!e.camera&&!e.cameraLoading),En(1),Nn("hidden",!e.camera)}}function c0(r,t){1&r&&(Cn(0,"p"),Nr(1,"Waiting for others to join..."),xn())}function XL(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_off"),xn())}function PH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_on"),xn())}function MH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"volume_off"),xn())}function G1(r,t){if(1&r&&(Cn(0,"p"),dr(1,XL,2,0,"mat-icon",6),dr(2,PH,2,0,"mat-icon",6),dr(3,MH,2,0,"mat-icon",6),Nr(4),xn()),2&r){const e=ii(2);En(1),Nn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),En(1),Nn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),En(1),Nn("ngIf",!e.activeSpeaker.audio),En(1),Od(" ",e.activeSpeaker.displayName," ")}}function xH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"insert_emoticon"),xn())}function u0(r,t){if(1&r&&oo(0,"canvas",32),2&r){const e=ii(2);Nn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function $y(r,t){if(1&r&&(uh(0),dr(1,G1,5,4,"p",6),dr(2,xH,2,0,"mat-icon",6),dr(3,u0,1,1,"canvas",31),Xu()),2&r){const e=ii();En(1),Nn("ngIf",e.activeSpeaker),En(1),Nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),En(1),Nn("ngIf",e.zoomVideo)}}function $L(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_off"),xn())}function Ga(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"mic_on"),xn())}function LH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"volume_off"),xn())}function BH(r,t){if(1&r&&(Cn(0,"p"),dr(1,$L,2,0,"mat-icon",6),dr(2,Ga,2,0,"mat-icon",6),dr(3,LH,2,0,"mat-icon",6),Nr(4),xn()),2&r){const e=ii(2);En(1),Nn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),En(1),Nn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),En(1),Nn("ngIf",!e.activeSpeaker.value.audioTracks.size),En(1),Od(" ",e.activeSpeaker.value.identity," ")}}function FH(r,t){1&r&&(Cn(0,"mat-icon"),Nr(1,"insert_emoticon"),xn())}function UH(r,t){if(1&r&&(uh(0),dr(1,BH,5,4,"p",6),dr(2,FH,2,0,"mat-icon",6),oo(3,"div",33),Xu()),2&r){const e=ii();En(1),Nn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),En(1),Nn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),En(1),Nn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}class l0{constructor(t,e,s,l,m){this.platform=t,this.locationStrategy=e,this.httpClient=s,this._snackBar=m,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.twilioVideo=I3,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new fr({videoSDKProvider:new Dh("zoom"),yourName:new Dh("User A"),sessionName:new Dh("testsdk"),sessionPasscode:new Dh("zoom123")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://videosdk-sample-signature.herokuapp.com",{sessionName:t.sessionName,role:0}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://twiliovideo-auth-server.herokuapp.com",{sessionName:t.sessionName,identity:t.yourName}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("http://localhost:4400",{sessionName:t.sessionName,role:"1"}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomVideo=dx().createClient(),this.zoomVideo.init("en-US","CDN"),this.zoomVideo.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(s=>{console.log(s),console.log(this.zoomVideo.getSessionInfo()),this.zoomSession=this.zoomVideo.getMediaStream(),this.sessionLoading=!1,this.session=!0,console.log(this.zoomVideo.getAllUser()),this.zoomVideo.getAllUser().length>1&&(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(l=>{console.log(l)})),console.log("active speaker",this.activeSpeaker)),this.zoomVideo.on("media-sdk-change",l=>{"audio"===l.type&&"success"===l.result&&("encode"===l.action?this.zoomAudioEncode=!0:"decode"===l.action&&(this.zoomAudioDecode=!0))}),this.zoomVideo.on("user-added",l=>{this._snackBar.open(l[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",l),console.log(this.zoomVideo.getAllUser()),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>l[0].userId===m.userId)[0])}),this.zoomVideo.on("user-updated",l=>{this.zoomVideo.getCurrentUserInfo()&&this.zoomVideo.getCurrentUserInfo().userId!==l[0].userId&&l[0].userId===this.activeSpeaker.userId&&("audio"in l[0]?this.activeSpeaker.audio=l[0].audio:"muted"in l[0]&&(this.activeSpeaker.muted=l[0].muted))}),this.zoomVideo.on("user-removed",l=>{this.activeSpeaker.userId===l[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomVideo.getAllUser().length>1?(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(s)})):this.activeSpeaker=null),this._snackBar.open(l[0].userId+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomVideo.on("active-speaker",l=>{this.activeSpeaker.userId!==l[0].userId&&this.zoomVideo.getCurrentUserInfo().userId!==l[0].userId&&(console.log("new active speaker",l),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>l[0].userId===m.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(s)}))}),this.zoomVideo.on("peer-video-state-change",l=>{(!this.activeSpeaker||l.userId===this.activeSpeaker.userId)&&("Start"===l.action?this.zoomSession.renderVideo(document.getElementById("participant-canvas"),l.userId,1920,1080,0,0,2).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(E=>l.userId===E.userId)[0]}).catch(m=>{console.log(m)}):"Stop"===l.action&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),l.userId).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(E=>l.userId===E.userId)[0]}).catch(m=>{console.log(m)}))})}).catch(s=>{console.log(s),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?this.twilioVideo.connect(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(s=>{this.twilioSession=s,console.log(`Successfully joined a Room: ${this.twilioSession}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioSession.participants),console.log(),Array.from(this.twilioSession.participants,([m,E])=>({name:m,value:E})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([m,E])=>({name:m,value:E}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioSession.participants.forEach(m=>{console.log(m),m.tracks.forEach(E=>{console.log(E),E.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(E.track.attach()),E.track.on("disabled",()=>{console.log("did I mute?")}),E.track.on("enabled",()=>{console.log("did I unmute?")}))}),m.on("trackSubscribed",E=>{console.log(E),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(E.attach())),E.on("disabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),E.on("enabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),m.on("trackUnsubscribed",E=>{console.log("a video was stopped"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantConnected",m=>{console.log(m),this._snackBar.open(m.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioSession.participants,([E,I])=>({name:E,value:I})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([E,I])=>({name:E,value:I}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),m.tracks.forEach(E=>{console.log(E),E.track&&(document.getElementById("twilio-user-view-div").appendChild(E.track.attach()),E.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(m)}),E.track.on("enabled",()=>{console.log("did I unmute? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),m.on("trackSubscribed",E=>{console.log(E),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(E.attach())),E.on("disabled",()=>{console.log("did I mute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),E.on("enabled",()=>{console.log("did I unmute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),m.on("trackUnsubscribed",E=>{console.log("a video was stopped"),console.log("removing video?"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantDisconnected",m=>{console.log("someone left",m),m.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioSession.participants,([I,k])=>({name:I,value:k}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))[0].value.track.attach()))),this._snackBar.open(m.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioSession.on("dominantSpeakerChanged",m=>{console.log(m),console.log(m.identity,m.sid),console.log(m.sid===this.activeSpeaker.value.sid),m&&m.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=m,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([I,k])=>({name:I,value:k}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioSession.localParticipant);let l=Array.from(this.twilioSession.participants,([m,E])=>({name:m,value:E}));console.log(l)}).catch(s=>{console.log(s),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient=C3().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t).then(s=>{console.log(s),this.sessionLoading=!1,this.session=!0}).catch(s=>{console.log(s),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider&&this.twilioVideo.createLocalAudioTrack().then(t=>{this.twilioSession.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack(),console.log("agora mic"),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack().setEnabled(!1),this.micLoading=!1,this.mic=!1)}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?!this.zoomSession.isSupportMultipleVideos()&&"function"==typeof OffscreenCanvas||/android/i.test(navigator.userAgent)?this.zoomSession.startVideo({videoElement:document.getElementById("self-view-video")}).then(()=>{"function"!=typeof MediaStreamTrackProcessor?this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):(this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0)}).catch(t=>{console.log(t)}):this.zoomSession.startVideo().then(()=>{this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioSession.participants),console.log(this.twilioSession.participants.values()),this.twilioVideo.createLocalVideoTrack({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioSession.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack(),this.cameraLoading=!1,this.camera=!0)}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomSession.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack().setEnabled(!1),this.cameraLoading=!1,this.camera=!1)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomVideo.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.querySelector("audio")?.remove()}),this.twilioSession.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||l0)(gt(Oc),gt(_D),gt(rk),gt(Mi),gt(Yy))};static#t=this.\u0275cmp=ba({type:l0,selectors:[["app-root"]],decls:14,vars:13,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","videoSDKProvider",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["mat-fab","","color","primary",4,"ngIf"],["mat-fab","","color","primary"],[1,"videoSDKProvider"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"]],template:function(e,s){1&e&&(dr(0,vH,28,2,"form",0),dr(1,AH,3,1,"div",1),dr(2,CH,11,7,"div",2),dr(3,IH,2,0,"div",3),Cn(4,"div",4)(5,"mat-grid-list",5),so("resize",function(m){return s.onResize(m)},0,Da),Cn(6,"mat-grid-tile"),dr(7,y5,1,0,"mat-spinner",6),dr(8,H1,5,4,"ng-container",6),dr(9,va,4,3,"ng-container",6),xn(),Cn(10,"mat-grid-tile"),dr(11,c0,2,0,"p",6),dr(12,$y,4,3,"ng-container",6),dr(13,UH,4,3,"ng-container",6),xn()()()),2&e&&(Nn("ngIf",!s.session&&!s.sessionLoading),En(1),Nn("ngIf",s.session&&!s.sessionLoading),En(1),Nn("ngIf",s.session&&!s.sessionLoading),En(1),Nn("ngIf",s.sessionLoading),En(1),ys("display",s.session?"flex":"none"),En(1),Nn("cols",s.breakpoint),En(2),Nn("ngIf",s.cameraLoading),En(1),Nn("ngIf","zoom"===s.videoSDKProvider),En(1),Nn("ngIf","twilio"===s.videoSDKProvider),En(2),Nn("ngIf",!s.activeSpeaker),En(1),Nn("ngIf","zoom"===s.videoSDKProvider),En(1),Nn("ngIf","twilio"===s.videoSDKProvider))},dependencies:[oM,AS,l3,RS,iu,Bi,PS,tx,d4,bL,k4,o2,PL,jL,$x,G4,NV,JQ,nH,e5,dH,Yi,mH,v2],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.videoSDKProvider[_ngcontent-%COMP%]{position:fixed;top:20px;display:flex;justify-content:center;width:100%;z-index:2;text-transform:capitalize}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function I5(r){return new gn(3e3,!1)}function Nv(){return typeof window<"u"&&typeof window.document<"u"}function b2(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Pv(r){switch(r.length){case 0:return new y1;case 1:return r[0];default:return new LV(r)}}function rB(r,t,e,s,l=new Map,m=new Map){const E=[],I=[];let k=-1,F=null;if(s.forEach(ee=>{const me=ee.get("offset"),Le=me==k,We=Le&&F||new Map;ee.forEach((it,bt)=>{let Jt=bt,tn=it;if("offset"!==bt)switch(Jt=t.normalizePropertyName(Jt,E),tn){case"!":tn=l.get(bt);break;case Mg:tn=m.get(bt);break;default:tn=t.normalizeStyleValue(bt,Jt,tn,E)}We.set(Jt,tn)}),Le||I.push(We),F=We,k=me}),E.length)throw function y2(r){return new gn(3502,!1)}();return I}function Lp(r,t,e,s){switch(t){case"start":r.onStart(()=>s(e&&eE(e,"start",r)));break;case"done":r.onDone(()=>s(e&&eE(e,"done",r)));break;case"destroy":r.onDestroy(()=>s(e&&eE(e,"destroy",r)))}}function eE(r,t,e){const m=Y1(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,e.totalTime??r.totalTime,!!e.disabled),E=r._data;return null!=E&&(m._data=E),m}function Y1(r,t,e,s,l="",m=0,E){return{element:r,triggerName:t,fromState:e,toState:s,phaseName:l,totalTime:m,disabled:!!E}}function ml(r,t,e){let s=r.get(t);return s||r.set(t,s=e),s}function V5(r){const t=r.indexOf(":");return[r.substring(1,t),r.slice(t+1)]}let q1=(r,t)=>!1,S2=(r,t,e)=>[],C2=null;function d0(r){const t=r.parentNode||r.host;return t===C2?null:t}(b2()||typeof Element<"u")&&(Nv()?(C2=(()=>document.documentElement)(),q1=(r,t)=>{for(;t;){if(t===r)return!0;t=d0(t)}return!1}):q1=(r,t)=>r.contains(t),S2=(r,t,e)=>{if(e)return Array.from(r.querySelectorAll(t));const s=r.querySelector(t);return s?[s]:[]});let Mv=null,iB=!1;const sB=q1,aB=S2;let cB=(()=>{class r{validateStyleProperty(e){return function oB(r){Mv||(Mv=function YH(){return typeof document<"u"?document.body:null}()||{},iB=!!Mv.style&&"WebkitAppearance"in Mv.style);let t=!0;return Mv.style&&!function Q5(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Mv.style,!t&&iB&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in Mv.style)),t}(e)}matchesElement(e,s){return!1}containsElement(e,s){return sB(e,s)}getParentElement(e){return d0(e)}query(e,s,l){return aB(e,s,l)}computeStyle(e,s,l){return l||""}animate(e,s,l,m,E,I=[],k){return new y1(l,m)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),tE=(()=>{class r{}return r.NOOP=new cB,r})();const I2="ng-enter",T2="ng-leave",w2="ng-trigger",R2=".ng-trigger",H5="ng-animating",h0=".ng-animating";function jg(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:uB(parseFloat(t[1]),t[2])}function uB(r,t){return"s"===t?1e3*r:r}function O2(r,t,e){return r.hasOwnProperty("duration")?r:function JH(r,t,e){let l,m=0,E="";if("string"==typeof r){const I=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===I)return t.push(I5()),{duration:0,delay:0,easing:""};l=uB(parseFloat(I[1]),I[2]);const k=I[3];null!=k&&(m=uB(parseFloat(k),I[4]));const F=I[5];F&&(E=F)}else l=r;if(!e){let I=!1,k=t.length;l<0&&(t.push(function A2(){return new gn(3100,!1)}()),I=!0),m<0&&(t.push(function ZL(){return new gn(3101,!1)}()),I=!0),I&&t.splice(k,0,I5())}return{duration:l,delay:m,easing:E}}(r,t,e)}function X1(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function G5(r){const t=new Map;return Object.keys(r).forEach(e=>{t.set(e,r[e])}),t}function Hg(r,t=new Map,e){if(e)for(let[s,l]of e)t.set(s,l);for(let[s,l]of r)t.set(s,l);return t}function $1(r,t,e){return e?t+":"+e+";":""}function W5(r){let t="";for(let e=0;e<r.style.length;e++){const s=r.style.item(e);t+=$1(0,s,r.style.getPropertyValue(s))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=$1(0,K5(e),r.style[e]));r.setAttribute("style",t)}function em(r,t,e){r.style&&(t.forEach((s,l)=>{const m=f0(l);e&&!e.has(l)&&e.set(l,r.style[m]),r.style[m]=s}),b2()&&W5(r))}function nE(r,t){r.style&&(t.forEach((e,s)=>{const l=f0(s);r.style[l]=""}),b2()&&W5(r))}function Z1(r){return Array.isArray(r)?1==r.length?r[0]:MV(r):r}const lB=new RegExp("{{\\s*(.+?)\\s*}}","g");function $l(r){let t=[];if("string"==typeof r){let e;for(;e=lB.exec(r);)t.push(e[1]);lB.lastIndex=0}return t}function p0(r,t,e){const s=r.toString(),l=s.replace(lB,(m,E)=>{let I=t[E];return null==I&&(e.push(function eB(r){return new gn(3003,!1)}()),I=""),I.toString()});return l==s?r:l}function ew(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const dB=/-+([a-z0-9])/g;function f0(r){return r.replace(dB,(...t)=>t[1].toUpperCase())}function K5(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zl(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw function W1(r){return new gn(3004,!1)}()}}function hB(r,t){return window.getComputedStyle(r)[t]}function pB(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(s=>function iE(r,t,e){if(":"==r[0]){const k=function fB(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(function GH(r){return new gn(3016,!1)}()),"* => *"}}(r,e);if("function"==typeof k)return void t.push(k);r=k}const s=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(function P5(r){return new gn(3015,!1)}()),t;const l=s[1],m=s[2],E=s[3];t.push(mB(l,E));"<"==m[0]&&!("*"==l&&"*"==E)&&t.push(mB(E,l))}(s,e,t)):e.push(r),e}const g0=new Set(["true","1"]),gl=new Set(["false","0"]);function mB(r,t){const e=g0.has(r)||gl.has(r),s=g0.has(t)||gl.has(t);return(l,m)=>{let E="*"==r||r==l,I="*"==t||t==m;return!E&&e&&"boolean"==typeof l&&(E=l?g0.has(r):gl.has(r)),!I&&s&&"boolean"==typeof m&&(I=m?g0.has(t):gl.has(t)),E&&I}}const q5=new RegExp("s*:selfs*,?","g");function k2(r,t,e,s){return new J5(r).build(t,e,s)}class J5{constructor(t){this._driver=t}build(t,e,s){const l=new Ti(e);return this._resetContextStyleTimingState(l),Zl(this,Z1(t),l)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,l=e.depCount=0;const m=[],E=[];return"@"==t.name.charAt(0)&&e.errors.push(function VH(){return new gn(3006,!1)}()),t.definitions.forEach(I=>{if(this._resetContextStyleTimingState(e),0==I.type){const k=I,F=k.name;F.toString().split(/\s*,\s*/).forEach(ee=>{k.name=ee,m.push(this.visitState(k,e))}),k.name=F}else if(1==I.type){const k=this.visitTransition(I,e);s+=k.queryCount,l+=k.depCount,E.push(k)}else e.errors.push(function R5(){return new gn(3007,!1)}())}),{type:7,name:t.name,states:m,transitions:E,queryCount:s,depCount:l,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),l=t.options&&t.options.params||null;if(s.containsDynamicStyles){const m=new Set,E=l||{};s.styles.forEach(I=>{I instanceof Map&&I.forEach(k=>{$l(k).forEach(F=>{E.hasOwnProperty(F)||m.add(F)})})}),m.size&&(ew(m.values()),e.errors.push(function tB(r,t){return new gn(3008,!1)}()))}return{type:0,name:t.name,style:s,options:l?{params:l}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=Zl(this,Z1(t.animation),e);return{type:1,matchers:pB(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:Lv(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>Zl(this,s,e)),options:Lv(t.options)}}visitGroup(t,e){const s=e.currentTime;let l=0;const m=t.steps.map(E=>{e.currentTime=s;const I=Zl(this,E,e);return l=Math.max(l,e.currentTime),I});return e.currentTime=l,{type:3,steps:m,options:Lv(t.options)}}visitAnimate(t,e){const s=function tG(r,t){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return N2(O2(r,t).duration,0,"");const e=r;if(e.split(/\s+/).some(m=>"{"==m.charAt(0)&&"{"==m.charAt(1))){const m=N2(0,0,"");return m.dynamic=!0,m.strValue=e,m}const l=O2(e,t);return N2(l.duration,l.delay,l.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let l,m=t.styles?t.styles:fl({});if(5==m.type)l=this.visitKeyframes(m,e);else{let E=t.styles,I=!1;if(!E){I=!0;const F={};s.easing&&(F.easing=s.easing),E=fl(F)}e.currentTime+=s.duration+s.delay;const k=this.visitStyle(E,e);k.isEmptyStep=I,l=k}return e.currentAnimateTimings=null,{type:4,timings:s,style:l,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[],l=Array.isArray(t.styles)?t.styles:[t.styles];for(let I of l)"string"==typeof I?I===Mg?s.push(I):e.errors.push(new gn(3002,!1)):s.push(G5(I));let m=!1,E=null;return s.forEach(I=>{if(I instanceof Map&&(I.has("easing")&&(E=I.get("easing"),I.delete("easing")),!m))for(let k of I.values())if(k.toString().indexOf("{{")>=0){m=!0;break}}),{type:6,styles:s,easing:E,offset:t.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let l=e.currentTime,m=e.currentTime;s&&m>0&&(m-=s.duration+s.delay),t.styles.forEach(E=>{"string"!=typeof E&&E.forEach((I,k)=>{const F=e.collectedStyles.get(e.currentQuerySelector),ee=F.get(k);let me=!0;ee&&(m!=l&&m>=ee.startTime&&l<=ee.endTime&&(e.errors.push(function QH(r,t,e,s,l){return new gn(3010,!1)}()),me=!1),m=ee.startTime),me&&F.set(k,{startTime:m,endTime:l}),e.options&&function XH(r,t,e){const s=t.params||{},l=$l(r);l.length&&l.forEach(m=>{s.hasOwnProperty(m)||e.push(function T5(r){return new gn(3001,!1)}())})}(I,e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function D5(){return new gn(3011,!1)}()),s;let m=0;const E=[];let I=!1,k=!1,F=0;const ee=t.steps.map(tn=>{const Rn=this._makeStyleAst(tn,e);let n=null!=Rn.offset?Rn.offset:function X5(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){const s=e;t=parseFloat(s.get("offset")),s.delete("offset")}});else if(r instanceof Map&&r.has("offset")){const e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Rn.styles),i=0;return null!=n&&(m++,i=Rn.offset=n),k=k||i<0||i>1,I=I||i<F,F=i,E.push(i),Rn});k&&e.errors.push(function HH(){return new gn(3012,!1)}()),I&&e.errors.push(function nB(){return new gn(3200,!1)}());const me=t.steps.length;let Le=0;m>0&&m<me?e.errors.push(function K1(){return new gn(3202,!1)}()):0==m&&(Le=1/(me-1));const We=me-1,it=e.currentTime,bt=e.currentAnimateTimings,Jt=bt.duration;return ee.forEach((tn,Rn)=>{const n=Le>0?Rn==We?1:Le*Rn:E[Rn],i=n*Jt;e.currentTime=it+bt.delay+i,bt.duration=i,this._validateStyleAst(tn,e),tn.offset=n,s.styles.push(tn)}),s}visitReference(t,e){return{type:8,animation:Zl(this,Z1(t.animation),e),options:Lv(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Lv(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Lv(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,l=t.options||{};e.queryCount++,e.currentQuery=t;const[m,E]=function _B(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(q5,"")),r=r.replace(/@\*/g,R2).replace(/@\w+/g,e=>R2+"-"+e.slice(1)).replace(/:animating/g,h0),[r,t]}(t.selector);e.currentQuerySelector=s.length?s+" "+m:m,ml(e.collectedStyles,e.currentQuerySelector,new Map);const I=Zl(this,Z1(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:m,limit:l.limit||0,optional:!!l.optional,includeSelf:E,animation:I,originalSelector:t.selector,options:Lv(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function k5(){return new gn(3013,!1)}());const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:O2(t.timings,e.errors,!0);return{type:12,animation:Zl(this,Z1(t.animation),e),timings:s,options:null}}}class Ti{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Lv(r){return r?(r=X1(r)).params&&(r.params=function eG(r){return r?X1(r):null}(r.params)):r={},r}function N2(r,t,e){return{duration:r,delay:t,easing:e}}function P2(r,t,e,s,l,m,E=null,I=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:s,duration:l,delay:m,totalTime:l+m,easing:E,subTimeline:I}}class M2{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const x2=new RegExp(":enter","g"),nG=new RegExp(":leave","g");function L2(r,t,e,s,l,m=new Map,E=new Map,I,k,F=[]){return(new wi).buildKeyframes(r,t,e,s,l,m,E,I,k,F)}class wi{buildKeyframes(t,e,s,l,m,E,I,k,F,ee=[]){F=F||new M2;const me=new B2(t,e,F,l,m,ee,[]);me.options=k;const Le=k.delay?jg(k.delay):0;me.currentTimeline.delayNextStep(Le),me.currentTimeline.setStyles([E],null,me.errors,k),Zl(this,s,me);const We=me.timelines.filter(it=>it.containsAnimation());if(We.length&&I.size){let it;for(let bt=We.length-1;bt>=0;bt--){const Jt=We[bt];if(Jt.element===e){it=Jt;break}}it&&!it.allowOnlyTimelineStyles()&&it.setStyles([I],null,me.errors,k)}return We.length?We.map(it=>it.buildKeyframes()):[P2(e,[],[],[],0,Le,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.get(e.element);if(s){const l=e.createSubContext(t.options),m=e.currentTimeline.currentTime,E=this._visitSubInstructions(s,l,l.options);m!=E&&e.transformIntoNewTimeline(E)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,s),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,s){for(const l of t){const m=l?.delay;if(m){const E="number"==typeof m?m:jg(p0(m,l?.params??{},e.errors));s.delayNextStep(E)}}}_visitSubInstructions(t,e,s){let m=e.currentTimeline.currentTime;const E=null!=s.duration?jg(s.duration):null,I=null!=s.delay?jg(s.delay):null;return 0!==E&&t.forEach(k=>{const F=e.appendInstructionToTimeline(k,E,I);m=Math.max(m,F.duration+F.delay)}),m}visitReference(t,e){e.updateOptions(t.options,!0),Zl(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let l=e;const m=t.options;if(m&&(m.params||m.delay)&&(l=e.createSubContext(m),l.transformIntoNewTimeline(),null!=m.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=rw);const E=jg(m.delay);l.delayNextStep(E)}t.steps.length&&(t.steps.forEach(E=>Zl(this,E,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>s&&l.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let l=e.currentTimeline.currentTime;const m=t.options&&t.options.delay?jg(t.options.delay):0;t.steps.forEach(E=>{const I=e.createSubContext(t.options);m&&I.delayNextStep(m),Zl(this,E,I),l=Math.max(l,I.currentTimeline.currentTime),s.push(I.currentTimeline)}),s.forEach(E=>e.currentTimeline.mergeTimelineCollectedStyles(E)),e.transformIntoNewTimeline(l),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return O2(e.params?p0(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),l=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),l.snapshotCurrentStyles());const m=t.style;5==m.type?this.visitKeyframes(m,e):(e.incrementTime(s.duration),this.visitStyle(m,e),l.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,l=e.currentAnimateTimings;!l&&s.hasCurrentStyleProperties()&&s.forwardFrame();const m=l&&l.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(m):s.setStyles(t.styles,m,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,l=e.currentTimeline.duration,m=s.duration,I=e.createSubContext().currentTimeline;I.easing=s.easing,t.styles.forEach(k=>{I.forwardTime((k.offset||0)*m),I.setStyles(k.styles,k.easing,e.errors,e.options),I.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(I),e.transformIntoNewTimeline(l+m),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,l=t.options||{},m=l.delay?jg(l.delay):0;m&&(6===e.previousNode.type||0==s&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=rw);let E=s;const I=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!l.optional,e.errors);e.currentQueryTotal=I.length;let k=null;I.forEach((F,ee)=>{e.currentQueryIndex=ee;const me=e.createSubContext(t.options,F);m&&me.delayNextStep(m),F===e.element&&(k=me.currentTimeline),Zl(this,t.animation,me),me.currentTimeline.applyStylesToKeyframe(),E=Math.max(E,me.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(E),k&&(e.currentTimeline.mergeTimelineCollectedStyles(k),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,l=e.currentTimeline,m=t.timings,E=Math.abs(m.duration),I=E*(e.currentQueryTotal-1);let k=E*e.currentQueryIndex;switch(m.duration<0?"reverse":m.easing){case"reverse":k=I-k;break;case"full":k=s.currentStaggerTime}const ee=e.currentTimeline;k&&ee.delayNextStep(k);const me=ee.currentTime;Zl(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=l.currentTime-me+(l.startTime-s.currentTimeline.startTime)}}const rw={};class B2{constructor(t,e,s,l,m,E,I,k){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=l,this._leaveClassName=m,this.errors=E,this.timelines=I,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=k||new F2(this._driver,e,0),I.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let l=this.options;null!=s.duration&&(l.duration=jg(s.duration)),null!=s.delay&&(l.delay=jg(s.delay));const m=s.params;if(m){let E=l.params;E||(E=this.options.params={}),Object.keys(m).forEach(I=>{(!e||!E.hasOwnProperty(I))&&(E[I]=p0(m[I],E,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(l=>{s[l]=e[l]})}}return t}createSubContext(t=null,e,s){const l=e||this.element,m=new B2(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,s||0));return m.previousNode=this.previousNode,m.currentAnimateTimings=this.currentAnimateTimings,m.options=this._copyOptions(),m.updateOptions(t),m.currentQueryIndex=this.currentQueryIndex,m.currentQueryTotal=this.currentQueryTotal,m.parentContext=this,this.subContextCount++,m}transformIntoNewTimeline(t){return this.previousNode=rw,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const l={duration:e??t.duration,delay:this.currentTimeline.currentTime+(s??0)+t.delay,easing:""},m=new td(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,l,t.stretchStartingKeyframe);return this.timelines.push(m),l}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,l,m,E){let I=[];if(l&&I.push(this.element),t.length>0){t=(t=t.replace(x2,"."+this._enterClassName)).replace(nG,"."+this._leaveClassName);let F=this._driver.query(this.element,t,1!=s);0!==s&&(F=s<0?F.slice(F.length+s,F.length):F.slice(0,s)),I.push(...F)}return!m&&0==I.length&&E.push(function N5(r){return new gn(3014,!1)}()),I}}class F2{constructor(t,e,s,l){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new F2(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,s]of this._globalTimelineStyles)this._backFill.set(e,s||Mg),this._currentKeyframe.set(e,Mg);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,l){e&&this._previousKeyframe.set("easing",e);const m=l&&l.params||{},E=function ej(r,t){const e=new Map;let s;return r.forEach(l=>{if("*"===l){s=s||t.keys();for(let m of s)e.set(m,Mg)}else Hg(l,e)}),e}(t,this._globalTimelineStyles);for(let[I,k]of E){const F=p0(k,m,s);this._pendingStyles.set(I,F),this._localTimelineStyles.has(I)||this._backFill.set(I,this._globalTimelineStyles.get(I)??Mg),this._updateStyle(I,F)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,s)=>{const l=this._styleSummary.get(s);(!l||e.time>l.time)&&this._updateStyle(s,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((I,k)=>{const F=Hg(I,new Map,this._backFill);F.forEach((ee,me)=>{"!"===ee?t.add(me):ee===Mg&&e.add(me)}),s||F.set("offset",k/this.duration),l.push(F)});const m=t.size?ew(t.values()):[],E=e.size?ew(e.values()):[];if(s){const I=l[0],k=new Map(I);I.set("offset",0),k.set("offset",1),l=[I,k]}return P2(this.element,l,m,E,this.duration,this.startTime,this.easing,!1)}}class td extends F2{constructor(t,e,s,l,m,E,I=!1){super(t,e,E.delay),this.keyframes=s,this.preStyleProps=l,this.postStyleProps=m,this._stretchStartingKeyframe=I,this.timings={duration:E.duration,delay:E.delay,easing:E.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:l}=this.timings;if(this._stretchStartingKeyframe&&e){const m=[],E=s+e,I=e/E,k=Hg(t[0]);k.set("offset",0),m.push(k);const F=Hg(t[0]);F.set("offset",vB(I)),m.push(F);const ee=t.length-1;for(let me=1;me<=ee;me++){let Le=Hg(t[me]);const We=Le.get("offset");Le.set("offset",vB((e+We*s)/E)),m.push(Le)}s=E,e=0,l="",t=m}return P2(this.element,t,this.preStyleProps,this.postStyleProps,s,e,l,!0)}}function vB(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class U2{}const tj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class V2 extends U2{normalizePropertyName(t,e){return f0(t)}normalizeStyleValue(t,e,s,l){let m="";const E=s.toString().trim();if(tj.has(e)&&0!==s&&"0"!==s)if("number"==typeof s)m="px";else{const I=s.match(/^[+-]?[\d\.]+([a-z]*)$/);I&&0==I[1].length&&l.push(function w5(r,t){return new gn(3005,!1)}())}return E+m}}function iw(r,t,e,s,l,m,E,I,k,F,ee,me,Le){return{type:0,element:r,triggerName:t,isRemovalTransition:l,fromState:e,fromStyles:m,toState:s,toStyles:E,timelines:I,queriedElements:k,preStyleProps:F,postStyleProps:ee,totalTime:me,errors:Le}}const j2={};class yB{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,l){return function nj(r,t,e,s,l){return r.some(m=>m(t,e,s,l))}(this.ast.matchers,t,e,s,l)}buildStyles(t,e,s){let l=this._stateStyles.get("*");return void 0!==t&&(l=this._stateStyles.get(t?.toString())||l),l?l.buildStyles(e,s):new Map}build(t,e,s,l,m,E,I,k,F,ee){const me=[],Le=this.ast.options&&this.ast.options.params||j2,it=this.buildStyles(s,I&&I.params||j2,me),bt=k&&k.params||j2,Jt=this.buildStyles(l,bt,me),tn=new Set,Rn=new Map,n=new Map,i="void"===l,o={params:Ri(bt,Le),delay:this.ast.options?.delay},c=ee?[]:L2(t,e,this.ast.animation,m,E,it,Jt,o,F,me);let h=0;if(c.forEach(p=>{h=Math.max(p.duration+p.delay,h)}),me.length)return iw(e,this._triggerName,s,l,i,it,Jt,[],[],Rn,n,h,me);c.forEach(p=>{const v=p.element,_=ml(Rn,v,new Set);p.preStyleProps.forEach(b=>_.add(b));const y=ml(n,v,new Set);p.postStyleProps.forEach(b=>y.add(b)),v!==e&&tn.add(v)});const g=ew(tn.values());return iw(e,this._triggerName,s,l,i,it,Jt,c,g,Rn,n,h)}}function Ri(r,t){const e=X1(t);for(const s in r)r.hasOwnProperty(s)&&null!=r[s]&&(e[s]=r[s]);return e}class rj{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s=new Map,l=X1(this.defaultParams);return Object.keys(t).forEach(m=>{const E=t[m];null!==E&&(l[m]=E)}),this.styles.styles.forEach(m=>{"string"!=typeof m&&m.forEach((E,I)=>{E&&(E=p0(E,l,e));const k=this.normalizer.normalizePropertyName(I,e);E=this.normalizer.normalizeStyleValue(I,k,E,e),s.set(k,E)})}),s}}class ij{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states=new Map,e.states.forEach(l=>{this.states.set(l.name,new rj(l.style,l.options&&l.options.params||{},s))}),oj(this.states,"true","1"),oj(this.states,"false","0"),e.transitions.forEach(l=>{this.transitionFactories.push(new yB(t,l,this.states))}),this.fallbackTransition=function EB(r,t,e){return new yB(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(E,I)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,l){return this.transitionFactories.find(E=>E.match(t,e,s,l))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function oj(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}const nd=new M2;class Lh{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const s=[],m=k2(this._driver,e,s,[]);if(s.length)throw function Xl(r){return new gn(3503,!1)}();this._animations.set(t,m)}_buildPlayer(t,e,s){const l=t.element,m=rB(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(l,m,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const l=[],m=this._animations.get(t);let E;const I=new Map;if(m?(E=L2(this._driver,e,m,I2,T2,new Map,new Map,s,nd,l),E.forEach(ee=>{const me=ml(I,ee.element,new Map);ee.postStyleProps.forEach(Le=>me.set(Le,null))})):(l.push(function E2(){return new gn(3300,!1)}()),E=[]),l.length)throw function x5(r){return new gn(3504,!1)}();I.forEach((ee,me)=>{ee.forEach((Le,We)=>{ee.set(We,this._driver.computeStyle(me,We,Mg))})});const F=Pv(E.map(ee=>{const me=I.get(ee.element);return this._buildPlayer(ee,new Map,me)}));return this._playersById.set(t,F),F.onDestroy(()=>this.destroy(t)),this.players.push(F),F}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function zH(r){return new gn(3301,!1)}();return e}listen(t,e,s,l){const m=Y1(e,"","","");return Lp(this._getPlayer(t),s,m,l),()=>{}}command(t,e,s,l){if("register"==s)return void this.register(t,l[0]);if("create"==s)return void this.create(t,e,l[0]||{});const m=this._getPlayer(t);switch(s){case"play":m.play();break;case"pause":m.pause();break;case"reset":m.reset();break;case"restart":m.restart();break;case"finish":m.finish();break;case"init":m.init();break;case"setPosition":m.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(t)}}}const yi="ng-animate-queued",ow="ng-animate-disabled",uj=[],ir={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_l="__ng_removed";class bB{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=function uG(r){return r??null}(s?t.value:t),s){const m=X1(t);delete m.value,this.options=m}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(l=>{null==s[l]&&(s[l]=e[l])})}}}const v0="void",SB=new bB(v0);class sG{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,us(e,this._hostClassName)}listen(t,e,s,l){if(!this._triggers.has(e))throw function L5(r,t){return new gn(3302,!1)}();if(null==s||0==s.length)throw function xp(r){return new gn(3303,!1)}();if(!function lG(r){return"start"==r||"done"==r}(s))throw function kv(r,t){return new gn(3400,!1)}();const m=ml(this._elementListeners,t,[]),E={name:e,phase:s,callback:l};m.push(E);const I=ml(this._engine.statesByElement,t,new Map);return I.has(e)||(us(t,w2),us(t,w2+"-"+e),I.set(e,SB)),()=>{this._engine.afterFlush(()=>{const k=m.indexOf(E);k>=0&&m.splice(k,1),this._triggers.has(e)||I.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Zy(r){return new gn(3401,!1)}();return e}trigger(t,e,s,l=!0){const m=this._getTrigger(e),E=new CB(this.id,e,t);let I=this._engine.statesByElement.get(t);I||(us(t,w2),us(t,w2+"-"+e),this._engine.statesByElement.set(t,I=new Map));let k=I.get(e);const F=new bB(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&k&&F.absorbOptions(k.options),I.set(e,F),k||(k=SB),F.value!==v0&&k.value===F.value){if(!function TB(r,t){const e=Object.keys(r),s=Object.keys(t);if(e.length!=s.length)return!1;for(let l=0;l<e.length;l++){const m=e[l];if(!t.hasOwnProperty(m)||r[m]!==t[m])return!1}return!0}(k.params,F.params)){const bt=[],Jt=m.matchStyles(k.value,k.params,bt),tn=m.matchStyles(F.value,F.params,bt);bt.length?this._engine.reportError(bt):this._engine.afterFlush(()=>{nE(t,Jt),em(t,tn)})}return}const Le=ml(this._engine.playersByElement,t,[]);Le.forEach(bt=>{bt.namespaceId==this.id&&bt.triggerName==e&&bt.queued&&bt.destroy()});let We=m.matchTransition(k.value,F.value,t,F.params),it=!1;if(!We){if(!l)return;We=m.fallbackTransition,it=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:We,fromState:k,toState:F,player:E,isFallbackTransition:it}),it||(us(t,yi),E.onStart(()=>{Bp(t,yi)})),E.onDone(()=>{let bt=this.players.indexOf(E);bt>=0&&this.players.splice(bt,1);const Jt=this._engine.playersByElement.get(t);if(Jt){let tn=Jt.indexOf(E);tn>=0&&Jt.splice(tn,1)}}),this.players.push(E),Le.push(E),E}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(l=>l.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,R2,!0);s.forEach(l=>{if(l[_l])return;const m=this._engine.fetchNamespacesByElement(l);m.size?m.forEach(E=>E.triggerLeaveAnimation(l,e,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(t,e,s,l){const m=this._engine.statesByElement.get(t),E=new Map;if(m){const I=[];if(m.forEach((k,F)=>{if(E.set(F,k.value),this._triggers.has(F)){const ee=this.trigger(t,F,v0,l);ee&&I.push(ee)}}),I.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,E),s&&Pv(I).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const l=new Set;e.forEach(m=>{const E=m.name;if(l.has(E))return;l.add(E);const k=this._triggers.get(E).fallbackTransition,F=s.get(E)||SB,ee=new bB(v0),me=new CB(this.id,E,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:E,transition:k,fromState:F,toState:ee,player:me,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let l=!1;if(s.totalAnimations){const m=s.players.length?s.playersByQueriedElement.get(t):[];if(m&&m.length)l=!0;else{let E=t;for(;E=E.parentNode;)if(s.statesByElement.get(E)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(t),l)s.markElementAsRemoved(this.id,t,!1,e);else{const m=t[_l];(!m||m===ir)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){us(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const l=s.player;if(l.destroyed)return;const m=s.element,E=this._elementListeners.get(m);E&&E.forEach(I=>{if(I.name==s.triggerName){const k=Y1(m,s.triggerName,s.fromState.value,s.toState.value);k._data=t,Lp(s.player,I.phase,k,I.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):e.push(s)}),this._queue=[],e.sort((s,l)=>{const m=s.transition.ast.depCount,E=l.transition.ast.depCount;return 0==m||0==E?m-E:this._engine.driver.containsElement(s.element,l.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class aG{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,m)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new sG(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList,l=this.namespacesByHostElement;if(s.length-1>=0){let E=!1,I=this.driver.getParentElement(e);for(;I;){const k=l.get(I);if(k){const F=s.indexOf(k);s.splice(F+1,0,t),E=!0;break}I=this.driver.getParentElement(I)}E||s.unshift(t)}else s.push(t);return l.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let l=this._namespaceLookup[t];l&&l.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const l=this._namespaceList.indexOf(s);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s)for(let l of s.values())if(l.namespaceId){const m=this._fetchNamespace(l.namespaceId);m&&e.add(m)}return e}trigger(t,e,s,l){if(Q2(e)){const m=this._fetchNamespace(t);if(m)return m.trigger(e,s,l),!0}return!1}insertNode(t,e,s,l){if(!Q2(e))return;const m=e[_l];if(m&&m.setForRemoval){m.setForRemoval=!1,m.setForMove=!0;const E=this.collectedLeaveElements.indexOf(e);E>=0&&this.collectedLeaveElements.splice(E,1)}if(t){const E=this._fetchNamespace(t);E&&E.insertNode(e,s)}l&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),us(t,ow)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Bp(t,ow))}removeNode(t,e,s,l){if(Q2(e)){const m=t?this._fetchNamespace(t):null;if(m?m.removeNode(e,l):this.markElementAsRemoved(t,e,!1,l),s){const E=this.namespacesByHostElement.get(e);E&&E.id!==t&&E.removeNode(e,l)}}else this._onRemovalComplete(e,l)}markElementAsRemoved(t,e,s,l,m){this.collectedLeaveElements.push(e),e[_l]={namespaceId:t,setForRemoval:l,hasAnimation:s,removedBeforeQueried:!1,previousTriggersValues:m}}listen(t,e,s,l,m){return Q2(e)?this._fetchNamespace(t).listen(e,s,l,m):()=>{}}_buildInstruction(t,e,s,l,m){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,l,t.fromState.options,t.toState.options,e,m)}destroyInnerAnimations(t){let e=this.driver.query(t,R2,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,h0,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Pv(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[_l];if(e&&e.setForRemoval){if(t[_l]=ir,e.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(e.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(ow)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,l)=>this._balanceNamespaceList(s,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)us(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let l=0;l<s.length;l++)s[l]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?Pv(e).onDone(()=>{s.forEach(l=>l())}):s.forEach(l=>l())}}reportError(t){throw function B5(r){return new gn(3402,!1)}()}_flushAnimations(t,e){const s=new M2,l=[],m=new Map,E=[],I=new Map,k=new Map,F=new Map,ee=new Set;this.disabledNodes.forEach(N=>{ee.add(N);const j=this.driver.query(N,".ng-animate-queued",!0);for(let Q=0;Q<j.length;Q++)ee.add(j[Q])});const me=this.bodyNode,Le=Array.from(this.statesByElement.keys()),We=H2(Le,this.collectedEnterElements),it=new Map;let bt=0;We.forEach((N,j)=>{const Q=I2+bt++;it.set(j,Q),N.forEach($=>us($,Q))});const Jt=[],tn=new Set,Rn=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const j=this.collectedLeaveElements[N],Q=j[_l];Q&&Q.setForRemoval&&(Jt.push(j),tn.add(j),Q.hasAnimation?this.driver.query(j,".ng-star-inserted",!0).forEach($=>tn.add($)):Rn.add(j))}const n=new Map,i=H2(Le,Array.from(tn));i.forEach((N,j)=>{const Q=T2+bt++;n.set(j,Q),N.forEach($=>us($,Q))}),t.push(()=>{We.forEach((N,j)=>{const Q=it.get(j);N.forEach($=>Bp($,Q))}),i.forEach((N,j)=>{const Q=n.get(j);N.forEach($=>Bp($,Q))}),Jt.forEach(N=>{this.processLeaveNode(N)})});const o=[],c=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(Q=>{const $=Q.player,ae=Q.element;if(o.push($),this.collectedEnterElements.length){const Ct=ae[_l];if(Ct&&Ct.setForMove){if(Ct.previousTriggersValues&&Ct.previousTriggersValues.has(Q.triggerName)){const Sn=Ct.previousTriggersValues.get(Q.triggerName),on=this.statesByElement.get(Q.element);if(on&&on.has(Q.triggerName)){const cn=on.get(Q.triggerName);cn.value=Sn,on.set(Q.triggerName,cn)}}return void $.destroy()}}const fe=!me||!this.driver.containsElement(me,ae),Ae=n.get(ae),Re=it.get(ae),tt=this._buildInstruction(Q,s,Re,Ae,fe);if(tt.errors&&tt.errors.length)return void c.push(tt);if(fe)return $.onStart(()=>nE(ae,tt.fromStyles)),$.onDestroy(()=>em(ae,tt.toStyles)),void l.push($);if(Q.isFallbackTransition)return $.onStart(()=>nE(ae,tt.fromStyles)),$.onDestroy(()=>em(ae,tt.toStyles)),void l.push($);const Tt=[];tt.timelines.forEach(Ct=>{Ct.stretchStartingKeyframe=!0,this.disabledNodes.has(Ct.element)||Tt.push(Ct)}),tt.timelines=Tt,s.append(ae,tt.timelines),E.push({instruction:tt,player:$,element:ae}),tt.queriedElements.forEach(Ct=>ml(I,Ct,[]).push($)),tt.preStyleProps.forEach((Ct,Sn)=>{if(Ct.size){let on=k.get(Sn);on||k.set(Sn,on=new Set),Ct.forEach((cn,vt)=>on.add(vt))}}),tt.postStyleProps.forEach((Ct,Sn)=>{let on=F.get(Sn);on||F.set(Sn,on=new Set),Ct.forEach((cn,vt)=>on.add(vt))})});if(c.length){const N=[];c.forEach(j=>{N.push(function z1(r,t){return new gn(3505,!1)}())}),o.forEach(j=>j.destroy()),this.reportError(N)}const h=new Map,g=new Map;E.forEach(N=>{const j=N.element;s.has(j)&&(g.set(j,j),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,h))}),l.forEach(N=>{const j=N.element;this._getPreviousPlayers(j,!1,N.namespaceId,N.triggerName,null).forEach($=>{ml(h,j,[]).push($),$.destroy()})});const p=Jt.filter(N=>wB(N,k,F)),v=new Map;lj(v,this.driver,Rn,F,Mg).forEach(N=>{wB(N,k,F)&&p.push(N)});const y=new Map;We.forEach((N,j)=>{lj(y,this.driver,new Set(N),k,"!")}),p.forEach(N=>{const j=v.get(N),Q=y.get(N);v.set(N,new Map([...Array.from(j?.entries()??[]),...Array.from(Q?.entries()??[])]))});const b=[],C=[],R={};E.forEach(N=>{const{element:j,player:Q,instruction:$}=N;if(s.has(j)){if(ee.has(j))return Q.onDestroy(()=>em(j,$.toStyles)),Q.disabled=!0,Q.overrideTotalTime($.totalTime),void l.push(Q);let ae=R;if(g.size>1){let Ae=j;const Re=[];for(;Ae=Ae.parentNode;){const tt=g.get(Ae);if(tt){ae=tt;break}Re.push(Ae)}Re.forEach(tt=>g.set(tt,ae))}const fe=this._buildAnimation(Q.namespaceId,$,h,m,y,v);if(Q.setRealPlayer(fe),ae===R)b.push(Q);else{const Ae=this.playersByElement.get(ae);Ae&&Ae.length&&(Q.parentPlayer=Pv(Ae)),l.push(Q)}}else nE(j,$.fromStyles),Q.onDestroy(()=>em(j,$.toStyles)),C.push(Q),ee.has(j)&&l.push(Q)}),C.forEach(N=>{const j=m.get(N.element);if(j&&j.length){const Q=Pv(j);N.setRealPlayer(Q)}}),l.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<Jt.length;N++){const j=Jt[N],Q=j[_l];if(Bp(j,T2),Q&&Q.hasAnimation)continue;let $=[];if(I.size){let fe=I.get(j);fe&&fe.length&&$.push(...fe);let Ae=this.driver.query(j,h0,!0);for(let Re=0;Re<Ae.length;Re++){let tt=I.get(Ae[Re]);tt&&tt.length&&$.push(...tt)}}const ae=$.filter(fe=>!fe.destroyed);ae.length?dj(this,j,ae):this.processLeaveNode(j)}return Jt.length=0,b.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const j=this.players.indexOf(N);this.players.splice(j,1)}),N.play()}),b}elementContainsData(t,e){let s=!1;const l=e[_l];return l&&l.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,l,m){let E=[];if(e){const I=this.playersByQueriedElement.get(t);I&&(E=I)}else{const I=this.playersByElement.get(t);if(I){const k=!m||m==v0;I.forEach(F=>{F.queued||!k&&F.triggerName!=l||E.push(F)})}}return(s||l)&&(E=E.filter(I=>!(s&&s!=I.namespaceId||l&&l!=I.triggerName))),E}_beforeAnimationBuild(t,e,s){const m=e.element,E=e.isRemovalTransition?void 0:t,I=e.isRemovalTransition?void 0:e.triggerName;for(const k of e.timelines){const F=k.element,ee=F!==m,me=ml(s,F,[]);this._getPreviousPlayers(F,ee,E,I,e.toState).forEach(We=>{const it=We.getRealPlayer();it.beforeDestroy&&it.beforeDestroy(),We.destroy(),me.push(We)})}nE(m,e.fromStyles)}_buildAnimation(t,e,s,l,m,E){const I=e.triggerName,k=e.element,F=[],ee=new Set,me=new Set,Le=e.timelines.map(it=>{const bt=it.element;ee.add(bt);const Jt=bt[_l];if(Jt&&Jt.removedBeforeQueried)return new y1(it.duration,it.delay);const tn=bt!==k,Rn=function hj(r){const t=[];return pj(r,t),t}((s.get(bt)||uj).map(h=>h.getRealPlayer())).filter(h=>!!h.element&&h.element===bt),n=m.get(bt),i=E.get(bt),o=rB(0,this._normalizer,0,it.keyframes,n,i),c=this._buildPlayer(it,o,Rn);if(it.subTimeline&&l&&me.add(bt),tn){const h=new CB(t,I,bt);h.setRealPlayer(c),F.push(h)}return c});F.forEach(it=>{ml(this.playersByQueriedElement,it.element,[]).push(it),it.onDone(()=>function cG(r,t,e){let s=r.get(t);if(s){if(s.length){const l=s.indexOf(e);s.splice(l,1)}0==s.length&&r.delete(t)}return s}(this.playersByQueriedElement,it.element,it))}),ee.forEach(it=>us(it,H5));const We=Pv(Le);return We.onDestroy(()=>{ee.forEach(it=>Bp(it,H5)),em(k,e.toStyles)}),me.forEach(it=>{ml(l,it,[]).push(We)}),We}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new y1(t.duration,t.delay)}}class CB{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new y1,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,s)=>{e.forEach(l=>Lp(t,s,void 0,l))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ml(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Q2(r){return r&&1===r.nodeType}function IB(r,t){const e=r.style.display;return r.style.display=t??"none",e}function lj(r,t,e,s,l){const m=[];e.forEach(k=>m.push(IB(k)));const E=[];s.forEach((k,F)=>{const ee=new Map;k.forEach(me=>{const Le=t.computeStyle(F,me,l);ee.set(me,Le),(!Le||0==Le.length)&&(F[_l]=oG,E.push(F))}),r.set(F,ee)});let I=0;return e.forEach(k=>IB(k,m[I++])),E}function H2(r,t){const e=new Map;if(r.forEach(I=>e.set(I,[])),0==t.length)return e;const l=new Set(t),m=new Map;function E(I){if(!I)return 1;let k=m.get(I);if(k)return k;const F=I.parentNode;return k=e.has(F)?F:l.has(F)?1:E(F),m.set(I,k),k}return t.forEach(I=>{const k=E(I);1!==k&&e.get(k).push(I)}),e}function us(r,t){r.classList?.add(t)}function Bp(r,t){r.classList?.remove(t)}function dj(r,t,e){Pv(e).onDone(()=>r.processLeaveNode(t))}function pj(r,t){for(let e=0;e<r.length;e++){const s=r[e];s instanceof LV?pj(s.players,t):t.push(s)}}function wB(r,t,e){const s=e.get(r);if(!s)return!1;let l=t.get(r);return l?s.forEach(m=>l.add(m)):t.set(r,s),e.delete(r),!0}class Gg{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(l,m)=>{},this._transitionEngine=new aG(t,e,s),this._timelineEngine=new Lh(t,e,s),this._transitionEngine.onRemovalComplete=(l,m)=>this.onRemovalComplete(l,m)}registerTrigger(t,e,s,l,m){const E=t+"-"+l;let I=this._triggerCache[E];if(!I){const k=[],ee=k2(this._driver,m,k,[]);if(k.length)throw function M5(r,t){return new gn(3404,!1)}();I=function Bv(r,t,e){return new ij(r,t,e)}(l,ee,this._normalizer),this._triggerCache[E]=I}this._transitionEngine.registerTrigger(e,l,I)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,l){this._transitionEngine.insertNode(t,e,s,l)}onRemove(t,e,s,l){this._transitionEngine.removeNode(t,e,l||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,l){if("@"==s.charAt(0)){const[m,E]=V5(s);this._timelineEngine.command(m,e,E,l)}else this._transitionEngine.trigger(t,e,s,l)}listen(t,e,s,l,m){if("@"==s.charAt(0)){const[E,I]=V5(s);return this._timelineEngine.listen(E,e,I,m)}return this._transitionEngine.listen(t,e,s,l,m)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let fj=(()=>{class r{constructor(e,s,l){this._element=e,this._startStyles=s,this._endStyles=l,this._state=0;let m=r.initialStylesByElement.get(e);m||r.initialStylesByElement.set(e,m=new Map),this._initialStyles=m}start(){this._state<1&&(this._startStyles&&em(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(em(this._element,this._initialStyles),this._endStyles&&(em(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(nE(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nE(this._element,this._endStyles),this._endStyles=null),em(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Bh(r){let t=null;return r.forEach((e,s)=>{(function dG(r){return"display"===r||"position"===r})(s)&&(t=t||new Map,t.set(s,e))}),t}class OB{constructor(t,e,s,l){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(s=>{e.push(Object.fromEntries(s))}),e}_triggerWebAnimation(t,e,s){return t.animate(this._convertKeyframesToObject(e),s)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((s,l)=>{"offset"!==l&&t.set(l,this._finished?s:hB(this.element,l))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class mj{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return sB(t,e)}getParentElement(t){return d0(t)}query(t,e,s){return aB(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}animate(t,e,s,l,m,E=[]){const k={duration:s,delay:l,fill:0==l?"both":"forwards"};m&&(k.easing=m);const F=new Map,ee=E.filter(We=>We instanceof OB);(function m0(r,t){return 0===r||0===t})(s,l)&&ee.forEach(We=>{We.currentSnapshot.forEach((it,bt)=>F.set(bt,it))});let me=function Qg(r){return r.length?r[0]instanceof Map?r:r.map(t=>G5(t)):[]}(e).map(We=>Hg(We));me=function D2(r,t,e){if(e.size&&t.length){let s=t[0],l=[];if(e.forEach((m,E)=>{s.has(E)||l.push(E),s.set(E,m)}),l.length)for(let m=1;m<t.length;m++){let E=t[m];l.forEach(I=>E.set(I,hB(r,I)))}}return t}(t,me,F);const Le=function RB(r,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=Bh(t[0]),t.length>1&&(s=Bh(t[t.length-1]))):t instanceof Map&&(e=Bh(t)),e||s?new fj(r,e,s):null}(t,me);return new OB(t,me,k,Le)}}let DB=(()=>{class r extends PV{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:hu.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?MV(e):e;return Ei(this._renderer,null,s,"register",[l]),new kB(s,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(Xt(ua),Xt(Mi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class kB extends B9{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new tm(this._id,t,e||{},this._renderer)}}class tm{constructor(t,e,s,l){this.id=t,this.element=e,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Ei(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ei(r,t,e,s,l){return r.setProperty(t,`@@${e}:${s}`,l)}const NB="@.disabled";let gj=(()=>{class r{constructor(e,s,l){this.delegate=e,this.engine=s,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(m,E)=>{const I=E?.parentNode(m);I&&E.removeChild(I,m)}}createRenderer(e,s){const m=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let ee=this._rendererCache.get(m);return ee||(ee=new _j("",m,this.engine,()=>this._rendererCache.delete(m)),this._rendererCache.set(m,ee)),ee}const E=s.id,I=s.id+"-"+this._currentId;this._currentId++,this.engine.register(I,e);const k=ee=>{Array.isArray(ee)?ee.forEach(k):this.engine.registerTrigger(E,I,e,ee.name,ee)};return s.data.animation.forEach(k),new hG(this,I,m,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,l){e>=0&&e<this._microtaskId?this._zone.run(()=>s(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(m=>{const[E,I]=m;E(I)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(Xt(ua),Xt(Gg),Xt(gi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class _j{constructor(t,e,s,l){this.namespaceId=t,this.delegate=e,this.engine=s,this._onDestroy=l,this.destroyNode=this.delegate.destroyNode?m=>e.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,l=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,l)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,l){this.delegate.setAttribute(t,e,s,l)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,l){this.delegate.setStyle(t,e,s,l)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==NB?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hG extends _j{constructor(t,e,s,l,m){super(e,s,l,m),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==NB?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.slice(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const l=function vj(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let m=e.slice(1),E="";return"@"!=m.charAt(0)&&([m,E]=function pG(r){const t=r.indexOf(".");return[r.substring(0,t),r.slice(t+1)]}(m)),this.engine.listen(this.namespaceId,l,m,E,I=>{this.factory.scheduleListenerCallback(I._data||-1,s,I)})}return this.delegate.listen(t,e,s)}}const PB=[{provide:PV,useClass:DB},{provide:U2,useFactory:function Aj(){return new V2}},{provide:Gg,useClass:(()=>{class r extends Gg{constructor(e,s,l,m){super(e.body,s,l)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(Xt(Mi),Xt(tE),Xt(U2),Xt(by))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})()},{provide:ua,useFactory:function yj(r,t,e){return new gj(r,t,e)},deps:[IS,Gg,gi]}],W2=[{provide:tE,useFactory:()=>new mj},{provide:Sp,useValue:"BrowserAnimations"},...PB],MB=[{provide:tE,useClass:cB},{provide:Sp,useValue:"NoopAnimations"},...PB];let Ej=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?MB:W2}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Hi({type:r}),r.\u0275inj=Fi({providers:W2,imports:[ac]}),r})();class sw{static#e=this.\u0275fac=function(e){return new(e||sw)};static#t=this.\u0275mod=Hi({type:sw,bootstrap:[l0]});static#n=this.\u0275inj=Fi({imports:[ac,Ej,Hl,E3,tk,u7,EQ,Ug,BQ,cu,rL,XQ,s0,t5,gH,e0]})}NM().bootstrapModule(sw).catch(r=>console.error(r))},1648:function(Ce,Oe,Y){Ce=Y.nmd(Ce);var L=Y(7156).default;!function(W){"use strict";function ne(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function H(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?ne(Object(u),!0).forEach(function(f){x(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):ne(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function U(a){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(a)}function D(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function O(a,d){for(var u=0;u<d.length;u++){var f=d[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function P(a,d,u){return d&&O(a.prototype,d),u&&O(a,u),a}function x(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function J(a,d){if(null==a)return{};var u,f,A=function(T,w){if(null==T)return{};var M,B,G={},Z=Object.keys(T);for(B=0;B<Z.length;B++)w.indexOf(M=Z[B])>=0||(G[M]=T[M]);return G}(a,d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);for(f=0;f<S.length;f++)d.indexOf(u=S[f])>=0||Object.prototype.propertyIsEnumerable.call(a,u)&&(A[u]=a[u])}return A}var ie=function(a,d){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var A in f)f.hasOwnProperty(A)&&(u[A]=f[A])})(a,d)};function te(a,d){function u(){this.constructor=a}ie(a,d),a.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}function le(a){return"function"==typeof a}var X=!1,z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var d=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+d.stack)}else X&&console.log("RxJS: Back to a better error behavior. Thank you. <3");X=a},get useDeprecatedSynchronousErrorHandling(){return X}};function K(a){setTimeout(function(){throw a},0)}var se={closed:!0,next:function(a){},error:function(a){if(z.useDeprecatedSynchronousErrorHandling)throw a;K(a)},complete:function(){}},ve=Array.isArray||function(a){return a&&"number"==typeof a.length};function De(a){return null!==a&&"object"==typeof a}var pe=function(){function a(d){return Error.call(this),this.message=d?d.length+" errors occurred during unsubscription:\n"+d.map(function(u,f){return f+1+") "+u.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=d,this}return a.prototype=Object.create(Error.prototype),a}(),be=function(){function a(d){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,d&&(this._ctorUnsubscribe=!0,this._unsubscribe=d)}return a.prototype.unsubscribe=function(){var d;if(!this.closed){var u=this._parentOrParents,f=this._ctorUnsubscribe,A=this._unsubscribe,S=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,u instanceof a)u.remove(this);else if(null!==u)for(var T=0;T<u.length;++T)u[T].remove(this);if(le(A)){f&&(this._unsubscribe=void 0);try{A.call(this)}catch(B){d=B instanceof pe?ye(B.errors):[B]}}if(ve(S)){T=-1;for(var w=S.length;++T<w;){var M=S[T];if(De(M))try{M.unsubscribe()}catch(B){d=d||[],B instanceof pe?d=d.concat(ye(B.errors)):d.push(B)}}}if(d)throw new pe(d)}},a.prototype.add=function(d){var u=d;if(!d)return a.EMPTY;switch(typeof d){case"function":u=new a(d);case"object":if(u===this||u.closed||"function"!=typeof u.unsubscribe)return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof a)){var f=u;(u=new a)._subscriptions=[f]}break;default:throw new Error("unrecognized teardown "+d+" added to Subscription.")}var A=u._parentOrParents;if(null===A)u._parentOrParents=this;else if(A instanceof a){if(A===this)return u;u._parentOrParents=[A,this]}else{if(-1!==A.indexOf(this))return u;A.push(this)}var S=this._subscriptions;return null===S?this._subscriptions=[u]:S.push(u),u},a.prototype.remove=function(d){var u=this._subscriptions;if(u){var f=u.indexOf(d);-1!==f&&u.splice(f,1)}},a.EMPTY=((d=new a).closed=!0,d),a;var d}();function ye(a){return a.reduce(function(d,u){return d.concat(u instanceof pe?u.errors:u)},[])}var ge="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),re=function(a){function d(u,f,A){var S=a.call(this)||this;switch(S.syncErrorValue=null,S.syncErrorThrown=!1,S.syncErrorThrowable=!1,S.isStopped=!1,arguments.length){case 0:S.destination=se;break;case 1:if(!u){S.destination=se;break}if("object"==typeof u){u instanceof d?(S.syncErrorThrowable=u.syncErrorThrowable,S.destination=u,u.add(S)):(S.syncErrorThrowable=!0,S.destination=new de(S,u));break}default:S.syncErrorThrowable=!0,S.destination=new de(S,u,f,A)}return S}return te(d,a),d.prototype[ge]=function(){return this},d.create=function(u,f,A){var S=new d(u,f,A);return S.syncErrorThrowable=!1,S},d.prototype.next=function(u){this.isStopped||this._next(u)},d.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},d.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},d.prototype._next=function(u){this.destination.next(u)},d.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},d.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},d.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},d}(be),de=function(a){function d(u,f,A,S){var T,w=a.call(this)||this;w._parentSubscriber=u;var M=w;return le(f)?T=f:f&&(T=f.next,A=f.error,S=f.complete,f!==se&&(le((M=Object.create(f)).unsubscribe)&&w.add(M.unsubscribe.bind(M)),M.unsubscribe=w.unsubscribe.bind(w))),w._context=M,w._next=T,w._error=A,w._complete=S,w}return te(d,a),d.prototype.next=function(u){if(!this.isStopped&&this._next){var f=this._parentSubscriber;z.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?this.__tryOrSetError(f,this._next,u)&&this.unsubscribe():this.__tryOrUnsub(this._next,u)}},d.prototype.error=function(u){if(!this.isStopped){var f=this._parentSubscriber,A=z.useDeprecatedSynchronousErrorHandling;if(this._error)A&&f.syncErrorThrowable?(this.__tryOrSetError(f,this._error,u),this.unsubscribe()):(this.__tryOrUnsub(this._error,u),this.unsubscribe());else if(f.syncErrorThrowable)A?(f.syncErrorValue=u,f.syncErrorThrown=!0):K(u),this.unsubscribe();else{if(this.unsubscribe(),A)throw u;K(u)}}},d.prototype.complete=function(){var u=this;if(!this.isStopped){var f=this._parentSubscriber;if(this._complete){var A=function(){return u._complete.call(u._context)};z.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable?(this.__tryOrSetError(f,A),this.unsubscribe()):(this.__tryOrUnsub(A),this.unsubscribe())}else this.unsubscribe()}},d.prototype.__tryOrUnsub=function(u,f){try{u.call(this._context,f)}catch(A){if(this.unsubscribe(),z.useDeprecatedSynchronousErrorHandling)throw A;K(A)}},d.prototype.__tryOrSetError=function(u,f,A){if(!z.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{f.call(this._context,A)}catch(S){return z.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=S,u.syncErrorThrown=!0,!0):(K(S),!0)}return!1},d.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},d}(re),Te="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(a){return a}function xe(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return Ve(a)}function Ve(a){return 0===a.length?Fe:1===a.length?a[0]:function(d){return a.reduce(function(u,f){return f(u)},d)}}var ze=function(){function a(d){this._isScalar=!1,d&&(this._subscribe=d)}return a.prototype.lift=function(d){var u=new a;return u.source=this,u.operator=d,u},a.prototype.subscribe=function(d,u,f){var A=this.operator,S=function(T,w,M){if(T){if(T instanceof re)return T;if(T[ge])return T[ge]()}return T||w||M?new re(T,w,M):new re(se)}(d,u,f);if(S.add(A?A.call(S,this.source):this.source||z.useDeprecatedSynchronousErrorHandling&&!S.syncErrorThrowable?this._subscribe(S):this._trySubscribe(S)),z.useDeprecatedSynchronousErrorHandling&&S.syncErrorThrowable&&(S.syncErrorThrowable=!1,S.syncErrorThrown))throw S.syncErrorValue;return S},a.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(u){z.useDeprecatedSynchronousErrorHandling&&(d.syncErrorThrown=!0,d.syncErrorValue=u),function(f){for(;f;){var T=f.destination;if(f.closed||f.isStopped)return!1;f=T&&T instanceof re?T:null}return!0}(d)?d.error(u):console.warn(u)}},a.prototype.forEach=function(d,u){var f=this;return new(u=Ze(u))(function(A,S){var T;T=f.subscribe(function(w){try{d(w)}catch(M){S(M),T&&T.unsubscribe()}},S,A)})},a.prototype._subscribe=function(d){var u=this.source;return u&&u.subscribe(d)},a.prototype[Te]=function(){return this},a.prototype.pipe=function(){for(var d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];return 0===d.length?this:Ve(d)(this)},a.prototype.toPromise=function(d){var u=this;return new(d=Ze(d))(function(f,A){var S;u.subscribe(function(T){return S=T},function(T){return A(T)},function(){return f(S)})})},a.create=function(d){return new a(d)},a}();function Ze(a){if(a||(a=Promise),!a)throw new Error("no Promise impl found");return a}var je=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),xt=function(a){function d(u,f){var A=a.call(this)||this;return A.subject=u,A.subscriber=f,A.closed=!1,A}return te(d,a),d.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,f=u.observers;if(this.subject=null,f&&0!==f.length&&!u.isStopped&&!u.closed){var A=f.indexOf(this.subscriber);-1!==A&&f.splice(A,1)}}},d}(be),Wt=function(a){function d(u){var f=a.call(this,u)||this;return f.destination=u,f}return te(d,a),d}(re),ht=function(a){function d(){var u=a.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return te(d,a),d.prototype[ge]=function(){return new Wt(this)},d.prototype.lift=function(u){var f=new qe(this,this);return f.operator=u,f},d.prototype.next=function(u){if(this.closed)throw new je;if(!this.isStopped)for(var f=this.observers,A=f.length,S=f.slice(),T=0;T<A;T++)S[T].next(u)},d.prototype.error=function(u){if(this.closed)throw new je;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var f=this.observers,A=f.length,S=f.slice(),T=0;T<A;T++)S[T].error(u);this.observers.length=0},d.prototype.complete=function(){if(this.closed)throw new je;this.isStopped=!0;for(var u=this.observers,f=u.length,A=u.slice(),S=0;S<f;S++)A[S].complete();this.observers.length=0},d.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},d.prototype._trySubscribe=function(u){if(this.closed)throw new je;return a.prototype._trySubscribe.call(this,u)},d.prototype._subscribe=function(u){if(this.closed)throw new je;return this.hasError?(u.error(this.thrownError),be.EMPTY):this.isStopped?(u.complete(),be.EMPTY):(this.observers.push(u),new xt(this,u))},d.prototype.asObservable=function(){var u=new ze;return u.source=this,u},d.create=function(u,f){return new qe(u,f)},d}(ze),qe=function(a){function d(u,f){var A=a.call(this)||this;return A.destination=u,A.source=f,A}return te(d,a),d.prototype.next=function(u){var f=this.destination;f&&f.next&&f.next(u)},d.prototype.error=function(u){var f=this.destination;f&&f.error&&this.destination.error(u)},d.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},d.prototype._subscribe=function(u){return this.source?this.source.subscribe(u):be.EMPTY},d}(ht),Ue=function(a){function d(u){var f=a.call(this)||this;return f._value=u,f}return te(d,a),Object.defineProperty(d.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),d.prototype._subscribe=function(u){var f=a.prototype._subscribe.call(this,u);return f&&!f.closed&&u.next(this._value),f},d.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new je;return this._value},d.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},d}(ht),Ye=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A.pending=!1,A}return te(d,a),d.prototype.schedule=function(u,f){if(void 0===f&&(f=0),this.closed)return this;this.state=u;var A=this.id,S=this.scheduler;return null!=A&&(this.id=this.recycleAsyncId(S,A,f)),this.pending=!0,this.delay=f,this.id=this.id||this.requestAsyncId(S,this.id,f),this},d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),setInterval(u.flush.bind(u,this),A)},d.prototype.recycleAsyncId=function(u,f,A){if(void 0===A&&(A=0),null!==A&&this.delay===A&&!1===this.pending)return f;clearInterval(f)},d.prototype.execute=function(u,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var A=this._execute(u,f);if(A)return A;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},d.prototype._execute=function(u,f){var A=!1,S=void 0;try{this.work(u)}catch(T){A=!0,S=!!T&&T||new Error(T)}if(A)return this.unsubscribe(),S},d.prototype._unsubscribe=function(){var u=this.id,f=this.scheduler,A=f.actions,S=A.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==S&&A.splice(S,1),null!=u&&(this.id=this.recycleAsyncId(f,u,null)),this.delay=null},d}(function(a){function d(u,f){return a.call(this)||this}return te(d,a),d.prototype.schedule=function(u,f){return this},d}(be)),we=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A}return te(d,a),d.prototype.schedule=function(u,f){return void 0===f&&(f=0),f>0?a.prototype.schedule.call(this,u,f):(this.delay=f,this.state=u,this.scheduler.flush(this),this)},d.prototype.execute=function(u,f){return f>0||this.closed?a.prototype.execute.call(this,u,f):this._execute(u,f)},d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),null!==A&&A>0||null===A&&this.delay>0?a.prototype.requestAsyncId.call(this,u,f,A):u.flush(this)},d}(Ye),nt=function(){function a(d,u){void 0===u&&(u=a.now),this.SchedulerAction=d,this.now=u}return a.prototype.schedule=function(d,u,f){return void 0===u&&(u=0),new this.SchedulerAction(this,d).schedule(f,u)},a.now=function(){return Date.now()},a}(),Dt=function(a){function d(u,f){void 0===f&&(f=nt.now);var A=a.call(this,u,function(){return d.delegate&&d.delegate!==A?d.delegate.now():f()})||this;return A.actions=[],A.active=!1,A.scheduled=void 0,A}return te(d,a),d.prototype.schedule=function(u,f,A){return void 0===f&&(f=0),d.delegate&&d.delegate!==this?d.delegate.schedule(u,f,A):a.prototype.schedule.call(this,u,f,A)},d.prototype.flush=function(u){var f=this.actions;if(this.active)f.push(u);else{var A;this.active=!0;do{if(A=u.execute(u.state,u.delay))break}while(u=f.shift());if(this.active=!1,A){for(;u=f.shift();)u.unsubscribe();throw A}}},d}(nt),zt=new(function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d}(Dt))(we),kt=zt,mt=new ze(function(a){return a.complete()});function Kn(a){return a?(d=a,new ze(function(u){return d.schedule(function(){return u.complete()})})):mt;var d}function Yn(a){return a&&"function"==typeof a.schedule}var Lr,a,Vr=function(a){return function(d){for(var u=0,f=a.length;u<f&&!d.closed;u++)d.next(a[u]);d.complete()}};function Rr(a,d){return new ze(function(u){var f=new be,A=0;return f.add(d.schedule(function(){A!==a.length?(u.next(a[A++]),u.closed||f.add(this.schedule())):u.complete()})),f})}function Tr(a,d){return d?Rr(a,d):new ze(Vr(a))}function Pn(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=a[a.length-1];return Yn(u)?(a.pop(),Rr(a,u)):Tr(a)}function bi(a,d){return new ze(d?function(u){return d.schedule(Di,0,{error:a,subscriber:u})}:function(u){return u.error(a)})}function Di(a){a.subscriber.error(a.error)}(a=Lr||(Lr={})).NEXT="N",a.ERROR="E",a.COMPLETE="C";var lo=function(){function a(d,u,f){this.kind=d,this.value=u,this.error=f,this.hasValue="N"===d}return a.prototype.observe=function(d){switch(this.kind){case"N":return d.next&&d.next(this.value);case"E":return d.error&&d.error(this.error);case"C":return d.complete&&d.complete()}},a.prototype.do=function(d,u,f){switch(this.kind){case"N":return d&&d(this.value);case"E":return u&&u(this.error);case"C":return f&&f()}},a.prototype.accept=function(d,u,f){return d&&"function"==typeof d.next?this.observe(d):this.do(d,u,f)},a.prototype.toObservable=function(){switch(this.kind){case"N":return Pn(this.value);case"E":return bi(this.error);case"C":return Kn()}throw new Error("unexpected notification kind value")},a.createNext=function(d){return void 0!==d?new a("N",d):a.undefinedValueNotification},a.createError=function(d){return new a("E",void 0,d)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function ho(a,d){return void 0===d&&(d=0),function(u){return u.lift(new yt(a,d))}}var yt=function(){function a(d,u){void 0===u&&(u=0),this.scheduler=d,this.delay=u}return a.prototype.call=function(d,u){return u.subscribe(new Ht(d,this.scheduler,this.delay))},a}(),Ht=function(a){function d(u,f,A){void 0===A&&(A=0);var S=a.call(this,u)||this;return S.scheduler=f,S.delay=A,S}return te(d,a),d.dispatch=function(u){u.notification.observe(u.destination),this.unsubscribe()},d.prototype.scheduleMessage=function(u){this.destination.add(this.scheduler.schedule(d.dispatch,this.delay,new $t(u,this.destination)))},d.prototype._next=function(u){this.scheduleMessage(lo.createNext(u))},d.prototype._error=function(u){this.scheduleMessage(lo.createError(u)),this.unsubscribe()},d.prototype._complete=function(){this.scheduleMessage(lo.createComplete()),this.unsubscribe()},d}(re),$t=function(a,d){this.notification=a,this.destination=d},Xe=function(a){function d(u,f,A){void 0===u&&(u=Number.POSITIVE_INFINITY),void 0===f&&(f=Number.POSITIVE_INFINITY);var S=a.call(this)||this;return S.scheduler=A,S._events=[],S._infiniteTimeWindow=!1,S._bufferSize=u<1?1:u,S._windowTime=f<1?1:f,f===Number.POSITIVE_INFINITY?(S._infiniteTimeWindow=!0,S.next=S.nextInfiniteTimeWindow):S.next=S.nextTimeWindow,S}return te(d,a),d.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var f=this._events;f.push(u),f.length>this._bufferSize&&f.shift()}a.prototype.next.call(this,u)},d.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new Me(this._getNow(),u)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,u)},d.prototype._subscribe=function(u){var f,A=this._infiniteTimeWindow,S=A?this._events:this._trimBufferThenGetEvents(),T=this.scheduler,w=S.length;if(this.closed)throw new je;if(this.isStopped||this.hasError?f=be.EMPTY:(this.observers.push(u),f=new xt(this,u)),T&&u.add(u=new Ht(u,T)),A)for(var M=0;M<w&&!u.closed;M++)u.next(S[M]);else for(M=0;M<w&&!u.closed;M++)u.next(S[M].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),f},d.prototype._getNow=function(){return(this.scheduler||kt).now()},d.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),f=this._bufferSize,A=this._windowTime,S=this._events,T=S.length,w=0;w<T&&!(u-S[w].time<A);)w++;return T>f&&(w=Math.max(w,T-f)),w>0&&S.splice(0,w),S},d}(ht),Me=function(a,d){this.time=a,this.value=d},st=1,kn=Promise.resolve(),dn={};function Ji(a){return a in dn&&(delete dn[a],!0)}var $o=function(a){function d(u,f){var A=a.call(this,u,f)||this;return A.scheduler=u,A.work=f,A}return te(d,a),d.prototype.requestAsyncId=function(u,f,A){return void 0===A&&(A=0),null!==A&&A>0?a.prototype.requestAsyncId.call(this,u,f,A):(u.actions.push(this),u.scheduled||(u.scheduled=(S=u.flush.bind(u,null),T=st++,dn[T]=!0,kn.then(function(){return Ji(T)&&S()}),T)));var S,T},d.prototype.recycleAsyncId=function(u,f,A){if(void 0===A&&(A=0),null!==A&&A>0||null===A&&this.delay>0)return a.prototype.recycleAsyncId.call(this,u,f,A);0===u.actions.length&&(Ji(f),u.scheduled=void 0)},d}(Ye),Zo=new(function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var f,A=this.actions,S=-1,T=A.length;u=u||A.shift();do{if(f=u.execute(u.state,u.delay))break}while(++S<T&&(u=A.shift()));if(this.active=!1,f){for(;++S<T&&(u=A.shift());)u.unsubscribe();throw f}},d}(Dt))($o),po=Zo,Ss=new Dt(Ye),io=Ss;function Nc(){}var Vn=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),_n=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}();function Ne(a,d){return function(u){if("function"!=typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return u.lift(new dt(a,d))}}var dt=function(){function a(d,u){this.project=d,this.thisArg=u}return a.prototype.call=function(d,u){return u.subscribe(new Zt(d,this.project,this.thisArg))},a}(),Zt=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.project=f,S.count=0,S.thisArg=A||S,S}return te(d,a),d.prototype._next=function(u){var f;try{f=this.project.call(this.thisArg,u,this.count++)}catch(A){return void this.destination.error(A)}this.destination.next(f)},d}(re),en=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.notifyNext=function(u,f,A,S,T){this.destination.next(f)},d.prototype.notifyError=function(u,f){this.destination.error(u)},d.prototype.notifyComplete=function(u){this.destination.complete()},d}(re),mn=function(a){function d(u,f,A){var S=a.call(this)||this;return S.parent=u,S.outerValue=f,S.outerIndex=A,S.index=0,S}return te(d,a),d.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},d.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},d}(re),hi="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Eo=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function Cs(a){return!!a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}var es=function(a){if(a&&"function"==typeof a[Te])return f=a,function(S){var T=f[Te]();if("function"!=typeof T.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return T.subscribe(S)};if(Eo(a))return Vr(a);if(Cs(a))return u=a,function(S){return u.then(function(T){S.closed||(S.next(T),S.complete())},function(T){return S.error(T)}).then(null,K),S};if(a&&"function"==typeof a[hi])return d=a,function(S){for(var T=d[hi]();;){var w=void 0;try{w=T.next()}catch(M){return S.error(M),S}if(w.done){S.complete();break}if(S.next(w.value),S.closed)break}return"function"==typeof T.return&&S.add(function(){T.return&&T.return()}),S};var d,u,f,A=De(a)?"an invalid object":"'"+a+"'";throw new TypeError("You provided "+A+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function fo(a,d,u,f,A){if(void 0===A&&(A=new mn(a,u,f)),!A.closed)return d instanceof ze?d.subscribe(A):es(d)(A)}function zn(a,d){return d?function(u,f){if(null!=u){if((A=u)&&"function"==typeof A[Te])return function(A,S){return new ze(function(T){var w=new be;return w.add(S.schedule(function(){var M=A[Te]();w.add(M.subscribe({next:function(B){w.add(S.schedule(function(){return T.next(B)}))},error:function(B){w.add(S.schedule(function(){return T.error(B)}))},complete:function(){w.add(S.schedule(function(){return T.complete()}))}}))})),w})}(u,f);if(Cs(u))return function(A,S){return new ze(function(T){var w=new be;return w.add(S.schedule(function(){return A.then(function(M){w.add(S.schedule(function(){T.next(M),w.add(S.schedule(function(){return T.complete()}))}))},function(M){w.add(S.schedule(function(){return T.error(M)}))})})),w})}(u,f);if(Eo(u))return Rr(u,f);if(function(A){return A&&"function"==typeof A[hi]}(u)||"string"==typeof u)return function(A,S){if(!A)throw new Error("Iterable cannot be null");return new ze(function(T){var w,M=new be;return M.add(function(){w&&"function"==typeof w.return&&w.return()}),M.add(S.schedule(function(){w=A[hi](),M.add(S.schedule(function(){if(!T.closed){var B,G;try{var Z=w.next();B=Z.value,G=Z.done}catch(ce){return void T.error(ce)}G?T.complete():(T.next(B),this.schedule())}}))})),M})}(u,f)}var A;throw new TypeError((null!==u&&typeof u||u)+" is not observable")}(a,d):a instanceof ze?a:new ze(es(a))}var wr=function(a){function d(u){var f=a.call(this)||this;return f.parent=u,f}return te(d,a),d.prototype._next=function(u){this.parent.notifyNext(u)},d.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},d}(re);!function(a){function d(u,f,A){var S=a.call(this)||this;return S.parent=u,S.outerValue=f,S.outerIndex=A,S}te(d,a),d.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this)},d.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},d.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(re);var Xi=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}return te(d,a),d.prototype.notifyNext=function(u){this.destination.next(u)},d.prototype.notifyError=function(u){this.destination.error(u)},d.prototype.notifyComplete=function(){this.destination.complete()},d}(re);function lu(a,d){if(!d.closed){if(a instanceof ze)return a.subscribe(d);var u;try{u=es(a)(d)}catch(f){d.error(f)}return u}}function tr(a,d,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof d?function(f){return f.pipe(tr(function(A,S){return zn(a(A,S)).pipe(Ne(function(T,w){return d(A,T,S,w)}))},u))}:("number"==typeof d&&(u=d),function(f){return f.lift(new jp(a,u))})}!function(a){function d(){return null!==a&&a.apply(this,arguments)||this}te(d,a),d.prototype.notifyNext=function(u,f,A,S){this.destination.next(f)},d.prototype.notifyError=function(u){this.destination.error(u)},d.prototype.notifyComplete=function(u){this.destination.complete()}}(re);var jp=function(){function a(d,u){void 0===u&&(u=Number.POSITIVE_INFINITY),this.project=d,this.concurrent=u}return a.prototype.call=function(d,u){return u.subscribe(new oE(d,this.project,this.concurrent))},a}(),oE=function(a){function d(u,f,A){void 0===A&&(A=Number.POSITIVE_INFINITY);var S=a.call(this,u)||this;return S.project=f,S.concurrent=A,S.hasCompleted=!1,S.buffer=[],S.active=0,S.index=0,S}return te(d,a),d.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},d.prototype._tryNext=function(u){var f,A=this.index++;try{f=this.project(u,A)}catch(S){return void this.destination.error(S)}this.active++,this._innerSub(f)},d.prototype._innerSub=function(u){var f=new wr(this),A=this.destination;A.add(f);var S=lu(u,f);S!==f&&A.add(S)},d.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},d.prototype.notifyNext=function(u){this.destination.next(u)},d.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},d}(Xi);function z2(a){return void 0===a&&(a=Number.POSITIVE_INFINITY),tr(Fe,a)}function Wa(){return z2(1)}function Uv(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return Wa()(Pn.apply(void 0,a))}function Vv(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(1===a.length){var u=a[0];if(ve(u))return jv(u,null);if(De(u)&&Object.getPrototypeOf(u)===Object.prototype){var f=Object.keys(u);return jv(f.map(function(S){return u[S]}),f)}}if("function"==typeof a[a.length-1]){var A=a.pop();return jv(a=1===a.length&&ve(a[0])?a[0]:a,null).pipe(Ne(function(S){return A.apply(void 0,S)}))}return jv(a,null)}function jv(a,d){return new ze(function(u){var f=a.length;if(0!==f)for(var A=new Array(f),S=0,T=0,w=function(B){var G=zn(a[B]),Z=!1;u.add(G.subscribe({next:function(ce){Z||(Z=!0,T++),A[B]=ce},error:function(ce){return u.error(ce)},complete:function(){++S!==f&&Z||(T===f&&u.next(d?d.reduce(function(ce,he,ue){return ce[he]=A[ue],ce},{}):A),u.complete())}}))},M=0;M<f;M++)w(M);else u.complete()})}function Ds(a,d,u,f){return le(u)&&(f=u,u=void 0),f?Ds(a,d,u).pipe(Ne(function(A){return ve(A)?f.apply(void 0,A):f(A)})):new ze(function(A){!function S(T,w,M,B,G){var Z,He;if((He=T)&&"function"==typeof He.addEventListener&&"function"==typeof He.removeEventListener){var ce=T;T.addEventListener(w,M,G),Z=function(){return ce.removeEventListener(w,M,G)}}else if(function(He){return He&&"function"==typeof He.on&&"function"==typeof He.off}(T)){var he=T;T.on(w,M),Z=function(){return he.off(w,M)}}else if(function(He){return He&&"function"==typeof He.addListener&&"function"==typeof He.removeListener}(T)){var ue=T;T.addListener(w,M),Z=function(){return ue.removeListener(w,M)}}else{if(!T||!T.length)throw new TypeError("Invalid event target");for(var Se=0,Qe=T.length;Se<Qe;Se++)S(T[Se],w,M,B,G)}B.add(Z)}(a,d,function(S){A.next(arguments.length>1?Array.prototype.slice.call(arguments):S)},A,u)})}function Kd(a,d,u){return u?Kd(a,d).pipe(Ne(function(f){return ve(f)?u.apply(void 0,f):u(f)})):new ze(function(f){var A,S=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];return f.next(1===T.length?T[0]:T)};try{A=a(S)}catch(T){return void f.error(T)}if(le(d))return function(){return d(S,A)}})}function Qv(a){return!ve(a)&&a-parseFloat(a)+1>=0}function Wg(a,d){return void 0===a&&(a=0),void 0===d&&(d=io),(!Qv(a)||a<0)&&(a=0),d&&"function"==typeof d.schedule||(d=io),new ze(function(u){return u.add(d.schedule(cw,a,{subscriber:u,counter:0,period:a})),u})}function cw(a){var d=a.subscriber,u=a.counter,f=a.period;d.next(u),this.schedule({subscriber:d,counter:u+1,period:f},f)}function Zs(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=Number.POSITIVE_INFINITY,f=null,A=a[a.length-1];return Yn(A)?(f=a.pop(),a.length>1&&"number"==typeof a[a.length-1]&&(u=a.pop())):"number"==typeof A&&(u=a.pop()),null===f&&1===a.length&&a[0]instanceof ze?a[0]:z2(u)(Tr(a,f))}function uw(a,d){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=a,u.thisArg=d,u}function Un(a,d){return function(u){return u.lift(new Kg(a,d))}}var Kg=function(){function a(d,u){this.predicate=d,this.thisArg=u}return a.prototype.call=function(d,u){return u.subscribe(new nm(d,this.predicate,this.thisArg))},a}(),nm=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.predicate=f,S.thisArg=A,S.count=0,S}return te(d,a),d.prototype._next=function(u){var f;try{f=this.predicate.call(this.thisArg,u,this.count++)}catch(A){return void this.destination.error(A)}f&&this.destination.next(u)},d}(re);function E0(a,d,u){return[Un(d,u)(new ze(es(a))),Un(uw(d,u))(new ze(es(a)))]}function dc(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(1===a.length){if(!ve(a[0]))return a[0];a=a[0]}return Tr(a,void 0).lift(new wo)}var wo=function(){function a(){}return a.prototype.call=function(d,u){return u.subscribe(new vl(d))},a}(),vl=function(a){function d(u){var f=a.call(this,u)||this;return f.hasFirst=!1,f.observables=[],f.subscriptions=[],f}return te(d,a),d.prototype._next=function(u){this.observables.push(u)},d.prototype._complete=function(){var u=this.observables,f=u.length;if(0===f)this.destination.complete();else{for(var A=0;A<f&&!this.hasFirst;A++){var S=fo(this,u[A],void 0,A);this.subscriptions&&this.subscriptions.push(S),this.add(S)}this.observables=null}},d.prototype.notifyNext=function(u,f,A){if(!this.hasFirst){this.hasFirst=!0;for(var S=0;S<this.subscriptions.length;S++)if(S!==A){var T=this.subscriptions[S];T.unsubscribe(),this.remove(T)}this.subscriptions=null}this.destination.next(f)},d}(en);function du(a,d,u){void 0===a&&(a=0);var f=-1;return Qv(d)?f=Number(d)<1?1:Number(d):Yn(d)&&(u=d),Yn(u)||(u=io),new ze(function(A){var S=Qv(a)?a:+a-u.now();return u.schedule(sE,S,{index:0,period:f,subscriber:A})})}function sE(a){var d=a.index,u=a.period,f=a.subscriber;if(f.next(d),!f.closed){if(-1===u)return f.complete();a.index=d+1,this.schedule(a,u)}}function Ro(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function fn(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?Ro(Object(u),!0).forEach(function(f){xo(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):Ro(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function xo(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function Fh(a,d){if(null==a)return{};var u,f,A=function(T,w){if(null==T)return{};var M,B,G={},Z=Object.keys(T);for(B=0;B<Z.length;B++)w.indexOf(M=Z[B])>=0||(G[M]=T[M]);return G}(a,d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);for(f=0;f<S.length;f++)d.indexOf(u=S[f])>=0||Object.prototype.propertyIsEnumerable.call(a,u)&&(A[u]=a[u])}return A}function er(a,d,u,f,A){var S={};return Object.keys(f).forEach(function(T){S[T]=f[T]}),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=u.slice().reverse().reduce(function(T,w){return w(a,d,T)||T},S),A&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(A):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(a,d,S),S=null),S}function jo(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function Gr(a,d){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);d&&(f=f.filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable})),u.push.apply(u,f)}return u}function rm(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{};d%2?Gr(Object(u),!0).forEach(function(f){jo(a,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):Gr(Object(u)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(u,f))})}return a}function ea(a){return"Minified Redux error #"+a+"; visit https://redux.js.org/Errors?code="+a+" for the full message or use the non-minified dev environment for full errors. "}var b0="function"==typeof Symbol&&Symbol.observable||"@@observable",zg=function(){return Math.random().toString(36).substring(7).split("").join(".")},gn={INIT:"@@redux/INIT"+zg(),REPLACE:"@@redux/REPLACE"+zg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zg()}};function aE(a){if("object"!=typeof a||null===a)return!1;for(var d=a;null!==Object.getPrototypeOf(d);)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(a)===d}function si(a,d,u){var f;if("function"==typeof d&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(ea(0));if("function"==typeof d&&void 0===u&&(u=d,d=void 0),void 0!==u){if("function"!=typeof u)throw new Error(ea(1));return u(si)(a,d)}if("function"!=typeof a)throw new Error(ea(2));var A=a,S=d,T=[],w=T,M=!1;function B(){w===T&&(w=T.slice())}function G(){if(M)throw new Error(ea(3));return S}function Z(Se){if("function"!=typeof Se)throw new Error(ea(4));if(M)throw new Error(ea(5));var Qe=!0;return B(),w.push(Se),function(){if(Qe){if(M)throw new Error(ea(6));Qe=!1,B();var He=w.indexOf(Se);w.splice(He,1),T=null}}}function ce(Se){if(!aE(Se))throw new Error(ea(7));if(void 0===Se.type)throw new Error(ea(8));if(M)throw new Error(ea(9));try{M=!0,S=A(S,Se)}finally{M=!1}for(var Qe=T=w,He=0;He<Qe.length;He++)(0,Qe[He])();return Se}function he(Se){if("function"!=typeof Se)throw new Error(ea(10));A=Se,ce({type:gn.REPLACE})}function ue(){var Se,Qe=Z;return(Se={subscribe:function(He){if("object"!=typeof He||null===He)throw new Error(ea(11));function Ke(){He.next&&He.next(G())}return Ke(),{unsubscribe:Qe(Ke)}}})[b0]=function(){return this},Se}return ce({type:gn.INIT}),(f={dispatch:ce,subscribe:Z,getState:G,replaceReducer:he})[b0]=ue,f}function mo(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return 0===d.length?function(f){return f}:1===d.length?d[0]:d.reduce(function(f,A){return function(){return f(A.apply(void 0,arguments))}})}function cE(a){return function(d){var u=new xB(a),f=d.lift(u);return u.caught=f}}var xB=function(){function a(d){this.selector=d}return a.prototype.call=function(d,u){return u.subscribe(new Y2(d,this.selector,this.caught))},a}(),Y2=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.selector=f,S.caught=A,S}return te(d,a),d.prototype.error=function(u){if(!this.isStopped){var f=void 0;try{f=this.selector(u,this.caught)}catch(T){return void a.prototype.error.call(this,T)}this._unsubscribeAndRecycle();var A=new wr(this);this.add(A);var S=lu(f,A);S!==A&&this.add(S)}},d}(Xi);function Hv(a){return a instanceof Date&&!isNaN(+a)}function ta(a,d){void 0===d&&(d=io);var u=Hv(a)?+a-d.now():Math.abs(a);return function(f){return f.lift(new LB(u,d))}}var LB=function(){function a(d,u){this.delay=d,this.scheduler=u}return a.prototype.call=function(d,u){return u.subscribe(new q2(d,this.delay,this.scheduler))},a}(),q2=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.delay=f,S.scheduler=A,S.queue=[],S.active=!1,S.errored=!1,S}return te(d,a),d.dispatch=function(u){for(var f=u.source,A=f.queue,S=u.scheduler,T=u.destination;A.length>0&&A[0].time-S.now()<=0;)A.shift().notification.observe(T);if(A.length>0){var w=Math.max(0,A[0].time-S.now());this.schedule(u,w)}else this.unsubscribe(),f.active=!1},d.prototype._schedule=function(u){this.active=!0,this.destination.add(u.schedule(d.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},d.prototype.scheduleNotification=function(u){if(!0!==this.errored){var f=this.scheduler,A=new J2(f.now()+this.delay,u);this.queue.push(A),!1===this.active&&this._schedule(f)}},d.prototype._next=function(u){this.scheduleNotification(lo.createNext(u))},d.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},d.prototype._complete=function(){this.scheduleNotification(lo.createComplete()),this.unsubscribe()},d}(re),J2=function(a,d){this.time=a,this.notification=d};function ri(a){return function(d){return 0===a?Kn():d.lift(new X2(a))}}var X2=function(){function a(d){if(this.total=d,this.total<0)throw new Vn}return a.prototype.call=function(d,u){return u.subscribe(new $2(d,this.total))},a}(),$2=function(a){function d(u,f){var A=a.call(this,u)||this;return A.total=f,A.count=0,A}return te(d,a),d.prototype._next=function(u){var f=this.total,A=++this.count;A<=f&&(this.destination.next(u),A===f&&(this.destination.complete(),this.unsubscribe()))},d}(re),BB=function(){function a(d){if(this.total=d,this.total<0)throw new Vn}return a.prototype.call=function(d,u){return u.subscribe(new FB(d,this.total))},a}(),FB=function(a){function d(u,f){var A=a.call(this,u)||this;return A.total=f,A.ring=new Array,A.count=0,A}return te(d,a),d.prototype._next=function(u){var f=this.ring,A=this.total,S=this.count++;f.length<A?f.push(u):f[S%A]=u},d.prototype._complete=function(){var u=this.destination,f=this.count;if(f>0)for(var A=this.count>=this.total?this.total:this.count,S=this.ring,T=0;T<A;T++){var w=f++%A;u.next(S[w])}u.complete()},d}(re);function hc(a){return function(d){return d.lift(new Pc(a))}}var Pc=function(){function a(d){this.value=d}return a.prototype.call=function(d,u){return u.subscribe(new Z2(d,this.value))},a}(),Z2=function(a){function d(u,f){var A=a.call(this,u)||this;return A.value=f,A}return te(d,a),d.prototype._next=function(u){this.destination.next(this.value)},d}(re);function UB(a,d){var u=!1;return arguments.length>=2&&(u=!0),function(f){return f.lift(new Al(a,d,u))}}var Al=function(){function a(d,u,f){void 0===f&&(f=!1),this.accumulator=d,this.seed=u,this.hasSeed=f}return a.prototype.call=function(d,u){return u.subscribe(new ro(d,this.accumulator,this.seed,this.hasSeed))},a}(),ro=function(a){function d(u,f,A,S){var T=a.call(this,u)||this;return T.accumulator=f,T._seed=A,T.hasSeed=S,T.index=0,T}return te(d,a),Object.defineProperty(d.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),d.prototype._next=function(u){if(this.hasSeed)return this._tryNext(u);this.seed=u,this.destination.next(u)},d.prototype._tryNext=function(u){var f,A=this.index++;try{f=this.accumulator(this.seed,u,A)}catch(S){this.destination.error(S)}this.seed=f,this.destination.next(f)},d}(re);function ai(a,d,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof d?tr(function(){return a},d,u):("number"==typeof d&&(u=d),tr(function(){return a},u))}function eN(a){return function(d){return d.lift(new lw(a))}}var lw=function(){function a(d){this.predicate=d}return a.prototype.call=function(d,u){return u.subscribe(new vr(d,this.predicate))},a}(),vr=function(a){function d(u,f){var A=a.call(this,u)||this;return A.predicate=f,A.skipping=!0,A.index=0,A}return te(d,a),d.prototype._next=function(u){var f=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||f.next(u)},d.prototype.tryCallPredicate=function(u){try{var f=this.predicate(u,this.index++);this.skipping=Boolean(f)}catch(A){this.destination.error(A)}},d}(re);function Qp(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var u=a[a.length-1];return Yn(u)?(a.pop(),function(f){return Uv(a,f,u)}):function(f){return Uv(a,f)}}var Fi=function(a){function d(u,f,A){void 0===f&&(f=0),void 0===A&&(A=po);var S=a.call(this)||this;return S.source=u,S.delayTime=f,S.scheduler=A,(!Qv(f)||f<0)&&(S.delayTime=0),A&&"function"==typeof A.schedule||(S.scheduler=po),S}return te(d,a),d.create=function(u,f,A){return void 0===f&&(f=0),void 0===A&&(A=po),new d(u,f,A)},d.dispatch=function(u){return this.add(u.source.subscribe(u.subscriber))},d.prototype._subscribe=function(u){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:u})},d}(ze);function uE(a,d){return void 0===d&&(d=0),function(u){return u.lift(new VB(a,d))}}var VB=function(){function a(d,u){this.scheduler=d,this.delay=u}return a.prototype.call=function(d,u){return new Fi(u,this.delay,this.scheduler).subscribe(d)},a}();function Qo(a,d){return"function"==typeof d?function(u){return u.pipe(Qo(function(f,A){return zn(a(f,A)).pipe(Ne(function(S,T){return d(f,S,A,T)}))}))}:function(u){return u.lift(new yl(a))}}var yl=function(){function a(d){this.project=d}return a.prototype.call=function(d,u){return u.subscribe(new rd(d,this.project))},a}(),rd=function(a){function d(u,f){var A=a.call(this,u)||this;return A.project=f,A.index=0,A}return te(d,a),d.prototype._next=function(u){var f,A=this.index++;try{f=this.project(u,A)}catch(S){return void this.destination.error(S)}this._innerSub(f)},d.prototype._innerSub=function(u){var f=this.innerSubscription;f&&f.unsubscribe();var A=new wr(this),S=this.destination;S.add(A),this.innerSubscription=lu(u,A),this.innerSubscription!==A&&S.add(this.innerSubscription)},d.prototype._complete=function(){var u=this.innerSubscription;u&&!u.closed||a.prototype._complete.call(this),this.unsubscribe()},d.prototype._unsubscribe=function(){this.innerSubscription=void 0},d.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},d.prototype.notifyNext=function(u){this.destination.next(u)},d}(Xi);function Yg(a,d){return void 0===d&&(d=!1),function(u){return u.lift(new qg(a,d))}}var qg=function(){function a(d,u){this.predicate=d,this.inclusive=u}return a.prototype.call=function(d,u){return u.subscribe(new S0(d,this.predicate,this.inclusive))},a}(),S0=function(a){function d(u,f,A){var S=a.call(this,u)||this;return S.predicate=f,S.inclusive=A,S.index=0,S}return te(d,a),d.prototype._next=function(u){var f,A=this.destination;try{f=this.predicate(u,this.index++)}catch(S){return void A.error(S)}this.nextOrComplete(u,f)},d.prototype.nextOrComplete=function(u,f){var A=this.destination;Boolean(f)?A.next(u):(this.inclusive&&A.next(u),A.complete())},d}(re);function lr(a,d,u){return function(f){return f.lift(new Gv(a,d,u))}}var Gv=function(){function a(d,u,f){this.nextOrObserver=d,this.error=u,this.complete=f}return a.prototype.call=function(d,u){return u.subscribe(new Yr(d,this.nextOrObserver,this.error,this.complete))},a}(),Yr=function(a){function d(u,f,A,S){var T=a.call(this,u)||this;return T._tapNext=Nc,T._tapError=Nc,T._tapComplete=Nc,T._tapError=A||Nc,T._tapComplete=S||Nc,le(f)?(T._context=T,T._tapNext=f):f&&(T._context=f,T._tapNext=f.next||Nc,T._tapError=f.error||Nc,T._tapComplete=f.complete||Nc),T}return te(d,a),d.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(f){return void this.destination.error(f)}this.destination.next(u)},d.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(f){return void this.destination.error(f)}this.destination.error(u)},d.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){return void this.destination.error(u)}return this.destination.complete()},d}(re),Jg=function(){function a(d,u,f,A){this.waitFor=d,this.absoluteTimeout=u,this.withObservable=f,this.scheduler=A}return a.prototype.call=function(d,u){return u.subscribe(new tN(d,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),tN=function(a){function d(u,f,A,S,T){var w=a.call(this,u)||this;return w.absoluteTimeout=f,w.waitFor=A,w.withObservable=S,w.scheduler=T,w.scheduleTimeout(),w}return te(d,a),d.dispatchTimeout=function(u){var f=u.withObservable;u._unsubscribeAndRecycle(),u.add(lu(f,new wr(u)))},d.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(d.dispatchTimeout,this.waitFor,this))},d.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,u)},d.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},d}(Xi);function Nu(a,d){return void 0===d&&(d=io),u=a,f=bi(new _n),void 0===(A=d)&&(A=io),function(S){var T=Hv(u),w=T?+u-A.now():Math.abs(u);return S.lift(new Jg(w,T,f,A))};var u,f,A}function Qn(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return function(u){var f;return"function"==typeof a[a.length-1]&&(f=a.pop()),u.lift(new jB(a,f))}}var jB=function(){function a(d,u){this.observables=d,this.project=u}return a.prototype.call=function(d,u){return u.subscribe(new Ho(d,this.observables,this.project))},a}(),Ho=function(a){function d(u,f,A){var S=a.call(this,u)||this;S.observables=f,S.project=A,S.toRespond=[];var T=f.length;S.values=new Array(T);for(var w=0;w<T;w++)S.toRespond.push(w);for(w=0;w<T;w++)S.add(fo(S,f[w],void 0,w));return S}return te(d,a),d.prototype.notifyNext=function(u,f,A){this.values[A]=f;var S=this.toRespond;if(S.length>0){var T=S.indexOf(A);-1!==T&&S.splice(T,1)}},d.prototype.notifyComplete=function(){},d.prototype._next=function(u){if(0===this.toRespond.length){var f=[u].concat(this.values);this.project?this._tryProject(f):this.destination.next(f)}},d.prototype._tryProject=function(u){var f;try{f=this.project.apply(this,u)}catch(A){return void this.destination.error(A)}this.destination.next(f)},d}(en),nN=function(a,d){return a===d||"function"==typeof d&&a===d.toString()},Ui=function(){for(var a=arguments.length,d=Array(a),u=0;u<a;u++)d[u]=arguments[u];return function(f){return f.pipe(Un(function(A){var S=A.type,T=d.length;if(1===T)return nN(S,d[0]);for(var w=0;w<T;w++)if(nN(S,d[w]))return!0;return!1}))}},C0=function(){function a(d,u){for(var f=0;f<u.length;f++){var A=u[f];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,A.key,A)}}return function(d,u,f){return u&&a(d.prototype,u),f&&a(d,f),d}}(),Hp=function(a){function d(u){!function(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}(this,d);var f=function(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?A:S}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return f.source=u,f}return function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}(d,ze),C0(d,null,[{key:"of",value:function(){return new this(Pn.apply(void 0,arguments))}},{key:"from",value:function(u,f){return new this(zn(u,f))}}]),C0(d,[{key:"lift",value:function(u){var f=new d(this);return f.operator=u,f}},{key:"ofType",value:function(){return Ui.apply(void 0,arguments)(this)}}]),d}(),I0=function(a){function d(u,f){!function(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}(this,d);var A=function(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?S:T}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,function(S){var T=A.__notifier.subscribe(S);return T&&!T.closed&&S.next(A.value),T}));return A.value=f,A.__notifier=new ht,A.__subscription=u.subscribe(function(S){S!==A.value&&(A.value=S,A.__notifier.next(S))}),A}return function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}(d,ze),d}(),Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function Xg(a,d){a.super_=d,a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}function lE(a,d){Object.defineProperty(this,"kind",{value:a,enumerable:!0}),d&&d.length&&Object.defineProperty(this,"path",{value:d,enumerable:!0})}"object"===(typeof global>"u"?"undefined":Wv(global))&&global&&global,Xg(function a(d,u,f){a.super_.call(this,"E",d),Object.defineProperty(this,"lhs",{value:u,enumerable:!0}),Object.defineProperty(this,"rhs",{value:f,enumerable:!0})},lE),Xg(function a(d,u){a.super_.call(this,"N",d),Object.defineProperty(this,"rhs",{value:u,enumerable:!0})},lE),Xg(function a(d,u){a.super_.call(this,"D",d),Object.defineProperty(this,"lhs",{value:u,enumerable:!0})},lE),Xg(function a(d,u,f){a.super_.call(this,"A",d),Object.defineProperty(this,"index",{value:u,enumerable:!0}),Object.defineProperty(this,"item",{value:f,enumerable:!0})},lE);var $g=function(a,d,u,f,A,S,T,w){if(!a){var M;if(void 0===d)M=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var B=[u,f,A,S,T,w],G=0;(M=new Error(d.replace(/%s/g,function(){return B[G++]}))).name="Invariant Violation"}throw M.framesToPop=1,M}},zd=function(a){return"function"==typeof a},Gp=function(a){return a.toString()},Wp=function(a){return"string"==typeof a},im=function(a){return a},Xt=function(a){return null===a};function Oo(a,d,u){void 0===d&&(d=im),$g(zd(d)||Xt(d),"Expected payloadCreator to be a function, undefined or null");var f=Xt(d)||d===im?im:function(w){for(var M=arguments.length,B=new Array(M>1?M-1:0),G=1;G<M;G++)B[G-1]=arguments[G];return w instanceof Error?w:d.apply(void 0,[w].concat(B))},A=zd(u),S=a.toString(),T=function(){var w=f.apply(void 0,arguments),M={type:a};return w instanceof Error&&(M.error=!0),void 0!==w&&(M.payload=w),A&&(M.meta=u.apply(void 0,arguments)),M};return T.toString=function(){return S},T}var Ea=function(a){if("object"!=typeof a||null===a)return!1;for(var d=a;null!==Object.getPrototypeOf(d);)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(a)===d},id=function(a){return Array.isArray(a)},dE=function(a){return null==a},Zg=function(a){return a[a.length-1]},rN=/\s/,e_=/(_|-|\.|:)/,El=/([a-z][A-Z]|[A-Z][a-z])/,Yd=/[\W_]+(.|$)/g,od=/(.)([A-Z]+)/g,oN=function(a){return function(a){return(d=a,rN.test(d)?d.toLowerCase():e_.test(d)?(u=d,u.replace(Yd,function(f,A){return A?" "+A:""})||d).toLowerCase():El.test(d)?function(u){return u.replace(od,function(f,A,S){return A+" "+S.toLowerCase().split("").join(" ")})}(d).toLowerCase():d.toLowerCase()).replace(/[\W_]+(.|$)/g,function(d,u){return u?" "+u:""}).trim();var d,u}(a).replace(/\s(\w)/g,function(d,u){return u.toUpperCase()})},hu=function(a){return-1===a.indexOf("/")?oN(a):a.split("/").map(oN).join("/")},Pu=function(a,d){return a.reduce(function(u,f){return d(u,f)},{})},$i=function(a){return typeof Map<"u"&&a instanceof Map};function om(a){if($i(a))return Array.from(a.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(a);var d=Object.getOwnPropertyNames(a);return"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(a))),d}function hE(a,d){return $i(d)?d.get(a):d[a]}var Kv=function(a){return function d(u,f,A,S){var T=void 0===f?{}:f,w=T.namespace,M=void 0===w?"/":w,B=T.prefix;return void 0===A&&(A={}),void 0===S&&(S=""),om(u).forEach(function(G){var he,Z=(he=function(he){var ue;if(!S)return he;var Se=he.toString().split("||"),Qe=S.split("||");return(ue=[]).concat.apply(ue,Qe.map(function(He){return Se.map(function(Ke){return""+He+M+Ke})})).join("||")}(G),S||!B||B&&new RegExp("^"+B+M).test(he)?he:""+B+M+he),ce=hE(G,u);a(ce)?d(ce,{namespace:M,prefix:B},A,Z):A[Z]=ce}),A}},dw=Kv(Ea);function bl(a){for(var d=1;d<arguments.length;d++){var u=null!=arguments[d]?arguments[d]:{},f=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(u).filter(function(A){return Object.getOwnPropertyDescriptor(u,A).enumerable}))),f.forEach(function(A){zv(a,A,u[A])})}return a}function zv(a,d,u){return d in a?Object.defineProperty(a,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[d]=u,a}function Mc(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=Ea(Zg(u))?u.pop():{};return $g(u.every(Wp)&&(Wp(a)||Ea(a)),"Expected optional object followed by string action types"),Wp(a)?sm([a].concat(u),A):bl({},ba(a,A),sm(u,A))}function ba(a,d){return u=hw(dw(a,d)),T=void 0===(S=(A=void 0===(f=d)?{}:f).namespace)?"/":S,w=A.prefix,M={},Object.getOwnPropertyNames(u).forEach(function(B){var G=w?B.replace(""+w+T,""):B;return function Z(ce,he,ue){var Se=hu(ue.shift());0===ue.length?he[Se]=u[ce]:(he[Se]||(he[Se]={}),Z(ce,he[Se],ue))}(B,M,G.split(T))}),M;var u,f,A,S,T,w,M}function hw(a,d){var u=void 0===d?{}:d,f=u.prefix,A=u.namespace,S=void 0===A?"/":A;return Pu(Object.keys(a),function(T,w){var M,B=a[w];$g(function(ce){if(zd(ce)||dE(ce))return!0;if(id(ce)){var he=ce[0],Se=ce[1];return zd(void 0===he?im:he)&&zd(Se)}return!1}(B),"Expected function, undefined, null, or array with payload and meta functions for "+w);var G=f?""+f+S+w:w,Z=id(B)?Oo.apply(void 0,[G].concat(B)):Oo(G,B);return bl({},T,((M={})[w]=Z,M))})}function sm(a,d){var u=hw(Pu(a,function(f,A){var S;return bl({},f,((S={})[A]=im,S))}),d);return Pu(Object.keys(u),function(f,A){var S;return bl({},f,((S={})[hu(A)]=u[A],S))})}var pw=function(){for(var a=arguments.length,d=Array(a),u=0;u<a;u++)d[u]=arguments[u];var f="function"!=typeof d[d.length-1]&&d.pop(),A=d;if(void 0===f)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(S,T){for(var w=arguments.length,M=Array(w>2?w-2:0),B=2;B<w;B++)M[B-2]=arguments[B];var G=void 0===S,Z=void 0===T;return G&&Z&&f?f:A.reduce(function(ce,he){return he.apply(void 0,[ce,T].concat(M))},G&&!Z&&f?f:S)}},Hi=Kv(function(a){return(Ea(a)||$i(a))&&(f=(u=om(a)).every(function(A){return"next"===A||"throw"===A}),!(u.length&&u.length<=2&&f));var u,f});function na(a,d,u){void 0===u&&(u={}),$g(Ea(a)||$i(a),"Expected handlers to be a plain object.");var f=Hi(a,u),A=om(f).map(function(T){return function(w,M,B){void 0===M&&(M=im);var G=Gp(w).split("||");$g(void 0!==B,"defaultState for reducer handling "+G.join(", ")+" should be defined"),$g(zd(M)||Ea(M),"Expected reducer to be a function or object with next and throw reducers");var Z=zd(M)?[M,M]:[M.next,M.throw].map(function(ue){return dE(ue)?im:ue}),ce=Z[0],he=Z[1];return function(ue,Se){void 0===ue&&(ue=B);var Qe=Se.type;return Qe&&-1!==G.indexOf(Gp(Qe))?(!0===Se.error?he:ce)(ue,Se):ue}}(T,hE(T,f),d)}),S=pw.apply(void 0,A.concat([d]));return function(T,w){return void 0===T&&(T=d),S(T,w)}}const Yv=Oo("CONNECT_ZOOM_SOCKET"),mr=Oo("CONNECT_XMPP_SOCKET"),ra=Oo("CLOSE_ZOOM_SOCKET"),Zi=Oo("CLOSE_XMPP_SOCKET"),Is=Oo("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),xc=Oo("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),sd=Oo("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),Lc=Oo("CONNECT_MAIN_SESSION_SOCKET"),Sa=Oo("CLOSE_MAIN_SESSION_SOCKET"),or=Oo("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:pi,setRwgServersList:_s,setRwgRetryCount:Mu,setXmppSocketStatus:qd,setMainSessionSocketStatus:ks,resetSocket:am}=Mc("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),ds=Oo("CONNECT_TO_MEDIA_STREAM"),qv=Oo("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:cm,setAudioDecodeStatus:vi,setVideoEncodeStatus:um,setVideoDecodeStatus:lm,setSharingEncodeStatus:pE,setSharingDecodeStatus:Jd,setMediaConstraints:Ka,setMediaEncryptKey:t_,resetMedia:dm}=Mc("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","RESET_MEDIA");function Xd(a,d){for(var u=arguments.length,f=new Array(u>2?u-2:0),A=2;A<u;A++)f[A-2]=arguments[A];return a(Hp.of(...f||[]),d,null)}function n_(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];const f=function(){for(var A=arguments.length,S=new Array(A),T=0;T<A;T++)S[T]=arguments[T];return Zs(...d.map(w=>{const M=w(...S);if(!M)throw new TypeError('combineEpics: one of the provided Epics "'.concat(w.name||"<anonymous>","\" does not return a stream. Double check you're not missing a return statement!"));return M.pipe(cE((B,G)=>(setTimeout(()=>{throw B},0),G)))}))};try{Object.defineProperty(f,"name",{value:"combineEpics(".concat(d.map(A=>A.name||"<anonymous>").join(", "),")")})}catch{}return f}function xu(){for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return n_(...d.flatMap(A=>Object.values(A)))}function Mn(a,d){return a.pipe(Ui("".concat(Is)),Un(u=>u.payload.evt===d))}function r_(a,d){return a.pipe(Ui("".concat(or)),Un(u=>u.payload.evt===d))}function Uh(a,d){return a.pipe(Ui("".concat(sd)),Un(u=>u.payload.evt===d))}function ad(a,d){return a.pipe(Ui("".concat(Is),"".concat(or)),Un(u=>u.payload.evt===d))}function Si(a,d){return a.pipe(Ui("".concat(qv)),Un(u=>Array.isArray(d)?d.indexOf(u.payload.type)>-1:u.payload.type===d))}const i_={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting"},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App."},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil."},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile."},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel."},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435."},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng."},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile."}},Vh=i_.default;let Lo,Lu,Bc;function Sl(a,d){return d in Vh?Vh[d]:a}(function(a){a[a.CONF_SUCCESS=0]="CONF_SUCCESS",a[a.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",a[a.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",a[a.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",a[a.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",a[a.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",a[a.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",a[a.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",a[a.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS"})(Lo||(Lo={})),function(a){a[a.Unknown=0]="Unknown",a[a.Normal=1]="Normal",a[a.Userrequest=2]="Userrequest",a[a.SdkConnection=3]="SdkConnection",a[a.Reconnect=5]="Reconnect",a[a.PtRequest=6]="PtRequest",a[a.KickedByHost=7]="KickedByHost",a[a.EndByHost=8]="EndByHost",a[a.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",a[a.FreeMeetingTimeout=10]="FreeMeetingTimeout",a[a.JBHTimeout=11]="JBHTimeout",a[a.EndBySingleStatus=12]="EndBySingleStatus",a[a.WebinarNeedRegister=13]="WebinarNeedRegister",a[a.ArchiveFail=14]="ArchiveFail",a[a.EndByNone=15]="EndByNone",a[a.EndByAdmin=16]="EndByAdmin"}(Lu||(Lu={})),function(a){a[a.WaitingRoomFailover=1]="WaitingRoomFailover",a[a.WebEndAndRejoin=2]="WebEndAndRejoin"}(Bc||(Bc={}));const fE={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e3},mE={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_upgrade"},$d={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610},3136:{"apac.errorcodes_require_host":3709}},pu={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_denied_email":3620},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function T0(a,d){return Object.keys(a).find(u=>a[u]===d)}let fw;function gE(a,d){const{key:u,value:f}=function(S,T){let w=!1;if(-1===S)return{key:"apac.errorcodes_offline",value:403};if(3e3===S){const G=["en-US","de-DE","es-ES","en-US","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT"];let Z={};if(fw)Z=fw;else{const ce=Object.keys($d[3e3]);G.forEach(he=>{const ue=("en-US"===(Se=he)&&(Se="default"),i_[Se]||i_.default);var Se;Z[he]={},ce.forEach(Se=>{Z[he][Se]=ue[Se]})}),fw=Z}return G.forEach(ce=>{if(w)return;const he=T0(Z[ce],T);he&&(w={key:he,value:$d[S][he]})}),w||(w={key:"apac.errorcodes_fail",value:200}),w}if(200===S){const G=T0({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},T);return w=G?{key:G,value:$d[S][G]}:{key:"apac.errorcodes_fail",value:200},w}if(void 0!==$d[S]){const G=$d[S],Z=Object.keys(G)[0];w={key:Z,value:G[Z]}}if(w)return w;const M=T0(fE,S),B=mE[M];return B?{key:B,value:S}:{key:"apac.errorcodes_fail",value:200}}(a,d),A=Sl(u,u);return u!==A?{reason:A,errorCode:f}:{reason:Vh[u],errorCode:f}}function _E(a){let d=!1;const u="number"==typeof a?a:a.body.res;if(void 0!==pu[u]){const A=pu[u],S=Object.keys(A)[0];d={key:S,value:A[S]}}if(d){const{key:A,value:S}=d,T=Sl(A,A);return Object.assign({},a,A!==T?{reason:T,errorCode:S}:{reason:Vh[A],errorCode:S})}const f=gE(u);return Object.assign({},a,{reason:f.reason,errorCode:f.errorCode})}var QB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sN(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function pc(a,d,u){return a(u={path:d,exports:{},require:function(f,A){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},u.exports),u.exports}var vE=pc(function(a,d){var u;u=typeof self<"u"?self:typeof window<"u"?window:QB,a.exports=function(A){var S,T=(A=A||{}).Base64,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=function(Qt){for(var Bn={},gr=0,At=Qt.length;gr<At;gr++)Bn[Qt.charAt(gr)]=gr;return Bn}(w),B=String.fromCharCode,G=function(Qt){if(Qt.length<2)return(Bn=Qt.charCodeAt(0))<128?Qt:Bn<2048?B(192|Bn>>>6)+B(128|63&Bn):B(224|Bn>>>12&15)+B(128|Bn>>>6&63)+B(128|63&Bn);var Bn=65536+1024*(Qt.charCodeAt(0)-55296)+(Qt.charCodeAt(1)-56320);return B(240|Bn>>>18&7)+B(128|Bn>>>12&63)+B(128|Bn>>>6&63)+B(128|63&Bn)},Z=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ce=function(Qt){return Qt.replace(Z,G)},he=function(Qt){var Bn=[0,2,1][Qt.length%3],gr=Qt.charCodeAt(0)<<16|(Qt.length>1?Qt.charCodeAt(1):0)<<8|(Qt.length>2?Qt.charCodeAt(2):0);return[w.charAt(gr>>>18),w.charAt(gr>>>12&63),Bn>=2?"=":w.charAt(gr>>>6&63),Bn>=1?"=":w.charAt(63&gr)].join("")},ue=A.btoa&&"function"==typeof A.btoa?function(Qt){return A.btoa(Qt)}:function(Qt){if(Qt.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return Qt.replace(/[\s\S]{1,3}/g,he)},Se=function(Qt){return ue(ce(String(Qt)))},Qe=function(Qt){return Qt.replace(/[+\/]/g,function(Bn){return"+"==Bn?"-":"_"}).replace(/=/g,"")},He=function(Qt,Bn){return Bn?Qe(Se(Qt)):Se(Qt)};A.Uint8Array&&(S=function(Qt,Bn){for(var gr="",At=0,ut=Qt.length;At<ut;At+=3){var $e=Qt[At+1],St=Qt[At+2],lt=Qt[At]<<16|$e<<8|St;gr+=w.charAt(lt>>>18)+w.charAt(lt>>>12&63)+(void 0!==$e?w.charAt(lt>>>6&63):"=")+(void 0!==St?w.charAt(63&lt):"=")}return Bn?Qe(gr):gr});var Ke,et=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Lt=function(Qt){switch(Qt.length){case 4:var Bn=((7&Qt.charCodeAt(0))<<18|(63&Qt.charCodeAt(1))<<12|(63&Qt.charCodeAt(2))<<6|63&Qt.charCodeAt(3))-65536;return B(55296+(Bn>>>10))+B(56320+(1023&Bn));case 3:return B((15&Qt.charCodeAt(0))<<12|(63&Qt.charCodeAt(1))<<6|63&Qt.charCodeAt(2));default:return B((31&Qt.charCodeAt(0))<<6|63&Qt.charCodeAt(1))}},Gt=function(Qt){return Qt.replace(et,Lt)},jt=function(Qt){var Bn=Qt.length,gr=Bn%4,At=(Bn>0?M[Qt.charAt(0)]<<18:0)|(Bn>1?M[Qt.charAt(1)]<<12:0)|(Bn>2?M[Qt.charAt(2)]<<6:0)|(Bn>3?M[Qt.charAt(3)]:0),ut=[B(At>>>16),B(At>>>8&255),B(255&At)];return ut.length-=[0,0,2,1][gr],ut.join("")},wt=A.atob&&"function"==typeof A.atob?function(Qt){return A.atob(Qt)}:function(Qt){return Qt.replace(/\S{1,4}/g,jt)},sn=function(Qt){return wt(String(Qt).replace(/[^A-Za-z0-9\+\/]/g,""))},hn=function(Qt){return String(Qt).replace(/[-_]/g,function(Bn){return"-"==Bn?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},vn=function(Qt){return Bn=hn(Qt),Gt(wt(Bn));var Bn};if(A.Uint8Array&&(Ke=function(Qt){return Uint8Array.from(sn(hn(Qt)),function(Bn){return Bn.charCodeAt(0)})}),A.Base64={VERSION:"2.6.4",atob:sn,btoa:ue,fromBase64:vn,toBase64:He,utob:ce,encode:He,encodeURI:function(Qt){return He(Qt,!0)},btou:Gt,decode:vn,noConflict:function(){var Qt=A.Base64;return A.Base64=T,Qt},fromUint8Array:S,toUint8Array:Ke},"function"==typeof Object.defineProperty){var ln=function(Qt){return{value:Qt,enumerable:!1,writable:!0,configurable:!0}};A.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",ln(function(){return vn(this)})),Object.defineProperty(String.prototype,"toBase64",ln(function(Qt){return He(this,Qt)})),Object.defineProperty(String.prototype,"toBase64URI",ln(function(){return He(this,!0)}))}}return A.Meteor&&(Base64=A.Base64),a.exports&&(a.exports.Base64=A.Base64),{Base64:A.Base64}}(u)});function Hs(a){return vE.Base64.encode(a,!0)}function jh(a){return vE.Base64.decode(a)}function mw(a){return vE.Base64.encode(a,!1)}const HB={"-":"+",_:"/",".":"="};function Cl(a){const d=a.replace(/[-_.]/g,u=>HB[u]);return Uint8Array.from(atob(d),u=>u.charCodeAt(0))}const aN=a=>{const d=a.charCodeAt(0);return d<=parseInt("0x7F",16)?1:d<=parseInt("0x7FF",16)?2:d<=parseInt("0xFFFF",16)?3:d<=parseInt("0x1FFFFF",16)?4:d<=parseInt("0x3FFFFFF",16)?5:6},gw=(a,d)=>Object.keys(a).find(u=>a[u]===d)||0,cN=(a,d)=>{const u=a.split(".").map(S=>Number(S)).slice(0,3),f=d.split(".").map(S=>Number(S)).slice(0,3);let A=0;for(let S=0;S<3;S++){const T=S<u.length?u[S]:0,w=S<f.length?f[S]:0;if(T<w){A=-1;break}if(T>w){A=1;break}}return A},_w=a=>{var d;let u=(new Date).getTime(),f=1e3*(null===(d=performance)||void 0===d?void 0:d.now())||0;const A="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,S=>{let T=16*Math.random();return u>0?(T=(u+T)%16|0,u=Math.floor(u/16)):(T=(f+T)%16|0,f=Math.floor(f/16)),("x"===S?T:3&T|8).toString(16)});return"string"==typeof a||"number"==typeof a?A+":"+a:A+""},Kp=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],w0={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:a=>({meetingTopic:jh(a)}),gatewayKey:a=>{const[,d,u]=a.split(".");return d&&u?{gatewayUser:{userId:Number(d),sn:u}}:{}},encryptKey:a=>({gcmSessinKey:Cl(a)})},GB=Oo("GET_MEETING_INFO"),R0=Oo("GET_INSTANT_MEETING_INFO");Oo("LOGON_ZOOM_DOMAIN"),Oo("VERIFY_ZOOM_RECAPTCHA"),Oo("LOGON_THIRD_PARTY_DOMAIN");const Jv=Oo("PING_RWC_SERVER"),ia=Oo("MEETING_FAILOVER"),Xv=Oo("LEAVE_MEETING"),za=Oo("END_MEETING");Oo("REGISTER_WEBINAR");const AE=Oo("TRIGGER_IDLE_CHECK"),{setMeetingInfo:hm,setWindownOpen:uN,setAppidSignature:O0,setZtk:o_,setZsk:lN,setTkMtkguid:D0,setPingRwcTimestamp:vw,setInMeetingInfo:oa,setMeetingAttribute:Qh,resetMeeting:k0,setIsHost:yE,setIsCohost:Aw,setMeetingIsOnHold:s_,setIsMeetingReset:sa,setAudioVideoBeforeOnHold:yw,setCurrentUserAudioBeforeReset:dN,setIsCurrentUserMutedBeforeReset:$v,setMeetingStatus:Ya,setMeetingRegion:Ew,setIsCurrentUserStartVideoBeforeReset:bw,setJoinMeetingTimeStamp:pm,setIsEnableQos:Ca,setActiveAppInfo:hN,setMeetingIdleStartTime:Hh,setSessionIdleTimeoutMinutes:Sw,setIsAudioBridgeEnabled:Gh,addDiscardedRwcHost:Zv,setSharePronounType:EE,setIsStayAwakeDuringTheSession:ci}=Mc({SET_MEETING_INFO:a=>a,SET_WINDOWN_OPEN:a=>a,SET_APPID_SIGNATURE:a=>a,SET_ZTK:a=>a,SET_ZSK:a=>a,SET_TK_MTKGUID:a=>a,SET_PING_RWC_TIMESTAMP:a=>a,SET_IN_MEETING_INFO:a=>a,SET_MEETING_ATTRIBUTE:a=>{if(Kp.some(d=>a&&void 0!==a[d])){let d=a;return Object.keys(w0).some(u=>void 0!==a[u])&&(d=Object.keys(a).reduce((u,f)=>{const A=w0[f];return"function"==typeof A?Object.assign(u,A(a[f])):"string"==typeof A&&(u[A]=a[f]),u},{})),d}return{}},SET_IS_HOST:a=>a&&a.bHost,SET_IS_COHOST:a=>a&&a.bCoHost,RESET_MEETING:a=>a,SET_MEETING_IS_ON_HOLD:a=>a,SET_IS_MEETING_RESET:a=>a,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:a=>a,SET_CURRENT_USER_AUDIO_BEFORE_RESET:a=>a,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:a=>a,SET_MEETING_STATUS:a=>a,SET_MEETING_REGION:a=>a,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:a=>a,SET_JOIN_MEETING_TIME_STAMP:a=>a,SET_IS_ENABLE_QOS:a=>a,SET_ACTIVE_APP_INFO:a=>a,SET_MEETING_IDLE_START_TIME:a=>a,SET_SESSION_IDLE_TIMEOUT_MINUTES:a=>a,SET_IS_AUDIO_BRIDGE_ENABLED:a=>a,ADD_DISCARDED_RWC_HOST:a=>a,SET_SHARE_PRONOUN_TYPE:a=>a,SET_IS_STAY_AWAKE_DURING_THE_SESSION:a=>a});let N0,pN,aa,eA,P0,vs,fm,Vi;(function(a){a[a.None=0]="None",a[a.Hand=1]="Hand",a[a.Yes=2]="Yes",a[a.No=3]="No",a[a.Fast=4]="Fast",a[a.Slow=5]="Slow",a[a.Bad=6]="Bad",a[a.Good=7]="Good",a[a.Clap=8]="Clap",a[a.Coffee=9]="Coffee",a[a.Clock=10]="Clock",a[a.Emoji=11]="Emoji"})(N0||(N0={})),function(a){a.LoginSuccess="zoomLoginSuccess",a.LoginFail="zoomLoginFail",a.CaptchaSuccess="captchaSuccess",a.CaptchaFail="captchaFail",a.SSOLoginSuccess="ssoLoginSuccess",a.SSOLoginFail="ssoLoginFail",a.JoinSuccess="joinSuccess",a.RegisterSuccess="registerSuccess"}(pN||(pN={})),function(a){a.Failover="failover",a.OnHold="on hold",a.Promote="promote",a.Depromote="depromote",a.JoinBreakoutRoom="join breakout room",a.MoveToBreakoutRoom="move to breakout room",a.BackToMainSession="back to main session"}(aa||(aa={})),W.ConnectionState=void 0,function(a){a.CDN="CDN",a.Global="Global",a.CN="CN"}(eA||(eA={})),function(a){a.Connected="Connected",a.Reconnecting="Reconnecting",a.Closed="Closed",a.Fail="Fail"}(W.ConnectionState||(W.ConnectionState={})),function(a){a.Loading="loading",a.Success="success",a.Fail="fail"}(P0||(P0={})),function(a){a.Initial="initial",a.Joined="joined",a.Closed="closed"}(vs||(vs={})),function(a){a.AudioBridgeEnable="1,2"}(fm||(fm={})),function(a){a.LocalStorage="LocalStorage",a.SessionStorage="SessionStorage",a.Memory="Memory"}(Vi||(Vi={}));const An=Hs("{}");class ar{constructor(d){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=Hs("zoom-storage-".concat(d)),this.localStorageKey=Hs("zoom-local-storage"),this.memoryCache={},this.sessionCache=JSON.parse(jh(sessionStorage.getItem(this.sessionStorageKey)||An)),this.localCache=JSON.parse(jh(localStorage.getItem(this.localStorageKey)||An))}static init(d){this.instance=new ar(d)}static get(d){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(d).value}static set(d,u,f){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(d,u,f)}static remove(d){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(d)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(d){return this.sessionCache.hasOwnProperty(d)?{value:this.sessionCache[d],type:Vi.SessionStorage}:this.localCache.hasOwnProperty(d)?{value:this.localCache[d],type:Vi.LocalStorage}:{value:this.memoryCache[d],type:Vi.Memory}}setValue(d,u,f){if(!d)throw new Error("key is null");switch(f){case Vi.SessionStorage:{const A=this.sessionCache[d];let S=u;return"function"==typeof u&&(S=u(A)),A!==S&&(this.sessionCache[d]=S,this.flushValue(Vi.SessionStorage)),S}case Vi.LocalStorage:{const A=this.localCache[d];let S=u;return"function"==typeof u&&(S=u(A)),A!==S&&(this.localCache[d]=S,this.flushValue(Vi.LocalStorage)),S}case Vi.Memory:{const A=this.memoryCache[d];let S=u;return"function"==typeof u&&(S=u(A)),this.memoryCache[d]=S,S}default:return null}}removeValue(d){const{type:u}=this.getValue(d);switch(u){case Vi.SessionStorage:delete this.sessionCache[d],this.flushValue(Vi.SessionStorage);break;case Vi.LocalStorage:delete this.localCache[d],this.flushValue(Vi.LocalStorage);break;case Vi.Memory:delete this.memoryCache[d]}}flushValue(d){d===Vi.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,Hs(JSON.stringify(this.sessionCache))):d===Vi.LocalStorage&&localStorage.setItem(this.localStorageKey,Hs(JSON.stringify(this.localCache)))}}function Ia(){const a=navigator.userAgent;let d,u=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(u[1])?(d=/\brv[ :]+(\d+)/g.exec(a)||[],"IE ".concat(d[1]||"")):"Chrome"===u[1]&&(d=a.match(/\b(OPR|Edge)\/(\d+)/),d&&d.length)?d.slice(1).join(" ").replace("OPR","Opera"):(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],(d=a.match(/version\/(\d+)/i))&&u.splice(1,1,d[1]),gm()&&(u[0]="ios-safari"),u.join(""))}function Ta(){const a=navigator.userAgent.toLowerCase();return!/opera|opr\/[\d]+/.test(a)&&/(msie|trident)/.test(a)}function Go(){return"object"==typeof WebAssembly&&"function"==typeof Worker}ar.instance=void 0;const tA=()=>"function"==typeof AudioWorklet,mm=()=>Ta(),cd=()=>{const{userAgent:a}=navigator;return!/opera|opr\/[\d]+/i.test(navigator.userAgent)&&!/edge\/(\d+)/i.test(navigator.userAgent)&&/chrome/i.test(a)&&/webkit/i.test(a)},gm=()=>{const{userAgent:a}=navigator;return/iPad|iPhone|iPod/i.test(a)||/MacIntel/i.test(navigator.platform)&&(null===(d=navigator)||void 0===d?void 0:d.maxTouchPoints)>2;var d},nA=()=>/arm/i.test(navigator.userAgent),fN=()=>/\bCrOS\b/.test(navigator.userAgent);function ud(){return _m()||gm()}const M0=()=>{var a;return!ud()&&"function"==typeof window.OffscreenCanvas&&(null===(a=navigator)||void 0===a?void 0:a.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer};function rA(){return"function"==typeof window.MediaStreamTrackProcessor}function wa(){return"function"==typeof window.OffscreenCanvas}const ld=a=>{var d;return M0()?fN()&&nA()||fN()&&!nA()?navigator.hardwareConcurrency>=4?9:4:(null===(d=navigator)||void 0===d?void 0:d.hardwareConcurrency)<4?9:25:a&&rA()&&wa()?4:1};function _m(){return/android/i.test(navigator.userAgent)}function zp(){return ud()||!navigator.mediaDevices.getSupportedConstraints().aspectRatio||/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}let Bo,vm;(function(a){a.VIDEO_ENCODE="0",a.VIDEO_DECODE="1",a.AUDIO_ENCODE="2",a.AUDIO_DECODE="3",a.SHARING_ENCODE="4",a.SHARING_DECODE="5"})(Bo||(Bo={})),function(a){a[a.NONE=0]="NONE",a[a.AES_256=1]="AES_256",a[a.AES_GCM=2]="AES_GCM"}(vm||(vm={}));const fu=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"}});let hs,x0;(function(a){a.WebclientOpt="WEB_CLIENT_OPT",a.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",a.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",a.WebclientZtk="WEB_CLIENT_ZTK",a.WebclientZsk="WEB_CLIENT_ZSK",a.WebclientTk="WEB_CLIENT_TK",a.WebclientIVState="WEB_CLIENT_IV_STATE",a.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",a.WebclientUserId="WEB_CLIENT_USER_ID",a.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",a.WebclientZoomId="WEB_CLIENT_ZOOM_ID",a.WebclientUserName="WEB_CLIENT_USER_NAME",a.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",a.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",a.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",a.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",a.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",a.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY"})(hs||(hs={})),function(a){a.WebclientDeviceId="WEBCLIENT_DEVICE_ID"}(x0||(x0={}));const Yp=(window.crypto||window.msCrypto).subtle,qp=hs.WebclientIVState,L0=Object.keys(fu).map(a=>fu[a].sessionType);let fc=(()=>{class a{constructor(u,f,A){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(u,f,A),ar.set(qp,{},Vi.SessionStorage)}static init(u,f,A){this.instance?this.instance.resetParameters(u,f,A):this.instance=new a(u,f,A)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(u,f,A){this.isGCMEnabled=!(Ta()||!Go())&&A===vm.AES_GCM,this.gcmSessionKey=Cl(f),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(u)}beginCrypto(u,f,A){const S=new Uint32Array(1);S[0]=9,S[0]+=Number(A);const T=new Uint8Array(S.buffer);let w=new Uint8Array(132);const M=Cl(f);return w.set(M,0),w.set(T,M.length),w=w.subarray(0,M.length+4),Yp.importKey("raw",u,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(B=>Yp.sign({name:"HMAC"},B,w)).then(B=>Yp.importKey("raw",B,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(u){const f=ar.get(qp);return void 0===f[u]?(f[u]=0,ar.set(qp,f,Vi.SessionStorage)):ar.set(qp,A=>fn(fn({},A),{},{[u]:A[u]+1}),Vi.SessionStorage)}resetIVState(){const u=ar.get(qp);if(void 0!==u){const f=Object.keys(u).filter(A=>L0.indexOf(A)>-1);f.length>0&&(f.forEach(A=>{u[A]+=1e6}),ar.set(qp,u,Vi.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(u){let{text:f,type:A}=u;const S=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const w=this.instance.getNextIV(A.sessionType),M=new ArrayBuffer(16),B=new Uint8Array(M);new DataView(M).setUint32(0,w,!0);let G=null;return G="BO_BROADCAST"===A.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(G,this.instance.zoomId,A.gcmType).then(Z=>{const ce=(new TextEncoder).encode(f);return Yp.encrypt({name:"AES-GCM",iv:B,additionalData:S,tagLength:128},Z,ce)}).then(Z=>{const he=new ArrayBuffer(1+B.byteLength+2+S.byteLength+4+Z.byteLength);new Uint8Array(he)[0]=B.length,new Uint8Array(he,1,B.byteLength).set(B),new DataView(he).setUint16(1+B.byteLength,S.length,!0),new Uint8Array(he,3+B.byteLength).set(S),new DataView(he).setUint32(1+B.byteLength+2+S.byteLength,Z.byteLength-16,!0),new Uint8Array(he,1+B.byteLength+2+S.byteLength+4).set(new Uint8Array(Z));const ue=new Uint8Array(he).reduce((Se,Qe)=>Se+String.fromCharCode(Qe),"");return window.btoa(ue).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(Hs(f))}static beginDecrypt(u){let{decryptedText:f,type:A,zoomId:S}=u;if(this.instance&&this.instance.isGCMEnabled){const T=function(He){let Ke;const et=He.length,Lt=new Array(et);for(Ke=0;Ke<et;++Ke)Lt[Ke]=255&He.charCodeAt(Ke);return new Uint8Array(Lt)}(atob(f.replace(/_/g,"/").replace(/-/g,"+"))),w=T[0],M=T.slice(1,w+1),B=T.slice(1+w,3+w),G=new DataView(B.buffer).getUint16(0,!0),Z=T.slice(1+w+2,1+w+2+G),ce=T.slice(1+w+2+G,1+w+2+G+4),he=new DataView(ce.buffer).getUint32(0,!0),ue=T.slice(1+w+2+G+4,1+w+2+G+4+he),Se=T.slice(1+w+2+G+4+he);let Qe=null;return Qe="BO_BROADCAST"===A.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(Qe,S,A.gcmType).then(He=>{const Ke=function(et,Lt){et=new Uint8Array(et),Lt=new Uint8Array(Lt);const Gt=new Uint8Array(et.length+Lt.length);return Gt.set(et),Gt.set(Lt,et.length),Gt}(ue,Se);return Yp.decrypt({name:"AES-GCM",iv:M,additionalData:Z,tagLength:8*Se.length},He,Ke.buffer)}).then(He=>({message:(new TextDecoder).decode(He),iv:M,aad:Z})).catch(He=>({message:"[".concat("This is an encrypted message","]"),iv:M,aad:Z}))}{const T=new TextDecoder("utf-8");return Promise.resolve({message:T.decode(Cl(f))})}}}return a.instance=void 0,a})();const B0=20234,Ts=7937,mc=7938,iA=12039,Am=16138;let eo,dd,ki,ym,oA;(function(a){a[a.NoAttendee=0]="NoAttendee",a[a.All=1]="All",a[a.AllPanelist=2]="AllPanelist",a[a.Host=3]="Host",a[a.NoOne=4]="NoOne",a[a.EveryonePublicly=5]="EveryonePublicly"})(eo||(eo={})),function(a){a[a.AllPanelist=1]="AllPanelist",a[a.Everyone=2]="Everyone",a[a.Invalid=0]="Invalid"}(dd||(dd={})),function(a){a[a.All=0]="All",a[a.Panelist=1]="Panelist",a[a.IndividualCcPanelist=2]="IndividualCcPanelist",a[a.Individual=3]="Individual",a[a.SilentModeUsers=4]="SilentModeUsers"}(ki||(ki={})),function(a){a[a.None=0]="None",a[a.Delete=1]="Delete",a[a.Modify=2]="Modify"}(ym||(ym={})),function(a){a[a.Success=0]="Success",a[a.Delete=1]="Delete",a[a.Block=3]="Block"}(oA||(oA={}));const Fc=[eo.All,eo.Host,eo.NoOne,eo.EveryonePublicly],Em=[eo.NoOne,eo.All,eo.AllPanelist],Fo={AllPanelist:11,Everyone:12},bm={[Fo.AllPanelist]:dd.AllPanelist,[Fo.Everyone]:dd.Everyone},sA={userId:ki.All,displayName:"Everyone",isHost:!1,isCoHost:!1},Jp={userId:ki.Panelist,displayName:"All panelists"},F0={userId:ki.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let Il;!function(a){a.Open="open",a.Message="message",a.Error="error",a.Close="close"}(Il||(Il={}));class U0{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.heartBeatInterval=6e4,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(d,u){let f=this.eventHandlers.get(d);f||(f=[]),f.push(u),this.eventHandlers.set(d,f)}off(d,u){const f=this.eventHandlers.get(d);if(f){const A=f.filter(S=>S!==u);this.eventHandlers.set(d,A)}}emit(d,u){const f=this.eventHandlers.get(d);f&&f instanceof Array&&f.slice(0).forEach(A=>{try{A(u)}catch(S){console.error(S)}})}sendMessageToRwg(d){this.seq+=1;const u=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(d,{seq:u}))),u}connect(d){this.websocket=new WebSocket(d),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var d;null===(d=this.websocket)||void 0===d||d.close()}addHeartBeat(){const d=setInterval(()=>{this.sendMessageToRwg({evt:0})},this.heartBeatInterval);this.intervalsToBeCleardWhenSocketClose.push(d)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(d=>clearInterval(d))}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",d=>{this.addHeartBeat(),this.emit("open",d)}),this.websocket.addEventListener("message",d=>{this.emit("message",d)}),this.websocket.addEventListener("close",d=>{this.clearIntervals(),this.emit("close",d)}),this.websocket.addEventListener("error",d=>{this.emit("error",d)}))}joinMeeting(d){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:d}})}}lockMeeting(d){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:d}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(d,u){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:d,bPause:u}})}}expel(d){return{seq:this.sendMessageToRwg({evt:4107,body:{id:d}})}}expelAttendee(d){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:d}})}}rename(d,u,f){return{seq:this.sendMessageToRwg({evt:4109,body:{id:d,dn2:u,olddn2:f}})}}assignHost(d,u){return{seq:this.sendMessageToRwg({evt:4111,body:{id:d,bCoHost:u}})}}reclaimHost(d){return{seq:this.sendMessageToRwg({evt:4133,body:{id:d,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(d){return{seq:this.sendMessageToRwg({evt:4195,body:{id:d}})}}putOnHold(d,u){return{seq:this.sendMessageToRwg({evt:4113,body:{id:d,bHold:u}})}}setMuteOnEntry(d){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:d}})}}setHoldOnEntry(d){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:d}})}}inviteCRCDevice(d,u){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:d,type:u,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(d){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:d}})}}sendCloseCaption(d){return{seq:this.sendMessageToRwg({evt:4125,body:fn({},d)})}}allowViewParticipantNumber(d){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:d}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(d,u){return{seq:this.sendMessageToRwg({evt:4131,body:{id:d,bOn:u}})}}chat(d,u,f,A){const S={text:d,destNodeID:u};return f&&Object.assign(S,{sn:f}),A&&Object.assign(S,{attendeeNodeID:A}),{seq:this.sendMessageToRwg({evt:4135,body:S})}}assignCC(d,u){return{seq:this.sendMessageToRwg({evt:4137,body:{id:d,bCCEditor:u}})}}enableLT(d){return{seq:this.sendMessageToRwg({evt:4227,body:{op:d?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}enableManualCaption(d){return{seq:this.sendMessageToRwg({evt:4291,body:{op:d?1:0}})}}setTranslationLanguage(d){return d?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:d}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(d){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:d}})}}allowAskLT(d){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:d}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(d){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:d}})}}setChatPriviledge(d){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:d}})}}setPanelistChatPrivilege(d){if(!Object.values(Fo).includes(d))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:d}})}}sendFeedback(d){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:d}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(d){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:d}})}}allowUnmuteAudio(d){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:d}})}}allowRaiseHand(d){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:d}})}}boToken(d){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:d}})}}startBO(d){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:d}})}}stopBO(d){return{seq:this.sendMessageToRwg({evt:4177,body:{status:d}})}}assignToBO(d,u){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:d,targetBID:u}})}}switchBO(d,u){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:d,targetBID:u}})}}wantJoinBO(d,u){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:d,targetBID:u}})}}joinBO(d){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:d}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(d){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:d}})}}askForHelpBO(d){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:d}})}}askForHelpResultBO(d,u){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:d,helpResult:u}})}}allowParticipantRename(d){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:d}})}}allowMessageFeedbackNotify(d,u){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:d,id:u}})}}setPlayChime(d,u){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:d,id:u}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(d,u,f){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:d,targetUserID:u,bBind:f}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(d,u,f,A){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:u,userID:f,clientCap:A,bPromote:d}})}}sendPromoteConsent(d,u){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:d,req_id:u}})}}batchCreateBOToken(d){const u=d.map((f,A)=>({topic:f,index:A}));return{seq:this.sendMessageToRwg({evt:4211,body:u})}}mute(d,u){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:u,id:d}})}}audioDrop(d){return{seq:this.sendMessageToRwg({evt:8195,body:{id:d}})}}audioDialout(d,u,f,A,S){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:d,dn2:Hs(u),bCallme:f,bPressOne:A,bGreeting:S}})}}audioCancelDialout(d,u){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:d,bCallme:u}})}}audioMuteAll(d){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:d}})}}allowToTalk(d,u){return{seq:this.sendMessageToRwg({evt:8204,body:{id:d,bAllowTalk:u}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(d,u){return{seq:this.sendMessageToRwg({evt:12297,body:{id:d,bOn:u}})}}notifyRwgIsMuteVideo(d,u){return this.muteAttendeeVideo(d,u)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(d,u){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:d,bOn:u}})}}allowViewAll(d,u){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:d,bOn:u}})}}allowVote(d,u){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:d,bOn:u}})}}allowComment(d,u){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:d,bOn:u}})}}sharingRequestRemoteControl(d,u){return{seq:this.sendMessageToRwg({evt:16389,body:{id:d,bOn:u}})}}subscribeGrabRemoteControl(d,u){return{seq:this.sendMessageToRwg({evt:16393,body:{id:d,bOn:u}})}}subscribeSharing(d,u,f){const A={id:d,size:u};return f&&Object.assign(A,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16415,body:A})}}unsubscribeSharing(d,u){const f={id:d};return u&&Object.assign(f,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:f})}}sendRWGConnectionPerformance(d){return{seq:this.sendMessageToRwg({evt:4167,body:{data:d}})}}sendSdkKeyToMonitor(d,u,f){return{seq:this.sendMessageToRwg({evt:4167,body:{data:"ZoomConferenceClient,videoapp_HTML5_sdk_web_join,".concat(f,",2,").concat(u,",").concat(d)}})}}sendDatachannelOffer(d){return{seq:this.sendMessageToRwg({evt:24321,offer:d})}}joinOrLeaveVoip(d){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:d}})}}startSharing(d,u){return{seq:this.sendMessageToRwg({evt:16409,body:fn({id:d,boOn:!1},u??{})})}}stopSharing(d){return{seq:this.sendMessageToRwg({evt:16409,body:{id:d,bOn:!0}})}}lockSharing(d){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:d}})}}startShareToBreakoutRoom(d){return{seq:this.sendMessageToRwg({evt:16425,body:{id:d,bShareToBO:!0}})}}stopShareToBreakoutRoom(d){return{seq:this.sendMessageToRwg({evt:16425,body:{id:d,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(d){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:d}})}}allowMultiplePin(d,u){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:d,bOn:u}})}}spotlightVideo(d,u){return{seq:this.sendMessageToRwg({evt:4219,body:fn({id:d},u)})}}followHostLayout(d){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:d}})}}setVideoDragLayout(d){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:d}})}}chatCmdReq(d,u){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:d,cmd:u}})}}activeAppLinkReq(d){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:d}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(d){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!d}})}}localMuteAudio(d,u){return{seq:this.sendMessageToRwg({evt:8209,body:{id:d,bMute:u}})}}changeSharePronoun(d,u){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:d,strPronoun:u}})}}sendReceivingSharingReady(d){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:d}})}}sendManualCaption(d){return{seq:this.sendMessageToRwg({evt:4289,body:fn({},d)})}}}let Do=(()=>{class a extends U0{static createAgent(){return this.rwgInstance||(this.rwgInstance=new a),this.rwgInstance}}return a.rwgInstance=null,a})(),aA=(()=>{class a extends U0{static getInstance(){return this.instance||(this.instance=new a),this.instance}}return a.instance=null,a})();const Xp=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}];let qa;!function(a){a.VideoEncode="0",a.VideoDecode="1",a.AudioEncode="2",a.AudioDecode="3",a.SharingEncode="4",a.SharingDecode="5"}(qa||(qa={}));const Sm=hs.WebclientIVState;let go=(()=>{class a{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new a),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.callbackList=[]}init(){if(!this.instance){const u={ivObj:{[Bo.AUDIO_ENCODE]:ar.get(Sm)&&ar.get(Sm)[Bo.AUDIO_ENCODE],[Bo.VIDEO_ENCODE]:ar.get(Sm)&&ar.get(Sm)[Bo.VIDEO_ENCODE],[Bo.SHARING_ENCODE]:ar.get(Sm)&&ar.get(Sm)[Bo.SHARING_ENCODE]}};this.instance=new JsMediaSDK_Instance(u),this.instance.setRWGAgent(Do.createAgent())}}setAssetsAndConstraint(u,f,A,S){var T,w,M;this.assetsPath=u,this.constraints=f,this.mediaWorkersPath=(w=this.assetsPath,M=!!A,Xp.reduce((B,G)=>{const{name:Z,alias:ce}=G;return Object.assign(B,{["".concat(ce)]:"".concat(w,"/").concat(M?"".concat("1502","_"):"").concat(Z)}),B},{})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=S,null===(T=this.instance)||void 0===T||T.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,S)}onMediaSDKCallback(u,f){this.callbackList.length>0&&this.callbackList.forEach(A=>A(u,f))}registerCallback(u){this.callbackList.push(u)}unregisterCallback(u){this.callbackList=this.callbackList.filter(f=>f!==u)}static isSupportVideoEncodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){return"function"==typeof window.OffscreenCanvas&&0==JsMediaSDK_Instance.util.AdapterWhiteListCheckForEncoder()}connect(u){var f,A,S,T,w,M;let{svcUrl:B,meetingNumber:G,conId:Z,e2eEncrypt:ce,isViewOnly:he,currentUserId:ue,isWebinar:Se,enableAudioQos:Qe,enableVideoQos:He=!1}=u;this.svcUrl=B,this.meetingNumber=G,this.confId=Z;const Ke=(gr=G,At=Z,{videoSocketAddress:"wss://".concat(Bn=B,"/wc/media/").concat(gr,"?type=v&cid=").concat(At),audioSocketAddress:"wss://".concat(Bn,"/wc/media/").concat(gr,"?type=a&cid=").concat(At),sharingSocketAddress:"wss://".concat(Bn,"/wc/media/").concat(gr,"?type=").concat(mm()?"j":"s","&cid=").concat(At)});var Bn,gr,At;this.mediaSocketAddress=Ke,this.currentUserId=ue;const et=ld(null===(f=this.mediaOptions)||void 0===f?void 0:f.enableMultiDecodeVideoWithoutSAB);var Lt,Gt,jt,wt,sn,hn,vn,ln,Qt;null===(A=this.instance)||void 0===A||A.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkletPath:Go()?null===(S=this.mediaWorkersPath)||void 0===S?void 0:S.audioWorkletPath:void 0,e2eEncrypt:ce,isEnableListenInitEvent:!0}),!0===(null===(T=this.constraints)||void 0===T?void 0:T.audio)&&Go()&&!ud()&&((Se||tA())&&(null===(Lt=this.instance)||void 0===Lt||Lt.initAudioDecode(this.mediaWorkersPath,Ke.audioSocketAddress,ue,!1,Z,G,et,Qe)),!tA()||Se&&he||null===(Gt=this.instance)||void 0===Gt||Gt.initAudioEncode(this.mediaWorkersPath,Ke.audioSocketAddress,ue,!1,Z,G,et,Qe)),!0===(null===(w=this.constraints)||void 0===w?void 0:w.video)&&Go()&&(null===(jt=this.instance)||void 0===jt||jt.initVideoDecode(this.mediaWorkersPath,Ke.videoSocketAddress,ue,!1,Z,G,et,null===(wt=null===(sn=JsMediaSDK_Instance.util)||void 0===sn?void 0:sn.isGraphicShouldUseHardwareAccelerationDecode())||void 0===wt||wt,He),Se&&he||null===(hn=this.instance)||void 0===hn||hn.initVideoEncode(this.mediaWorkersPath,Ke.videoSocketAddress,ue,!1,Z,G,et,!1,He,!0,!0)),!0===(null===(M=this.constraints)||void 0===M?void 0:M.screen)&&(Go()?(null===(vn=this.instance)||void 0===vn||vn.initSharingDecode(this.mediaWorkersPath,Ke.sharingSocketAddress,ue,!1,Z,G,et),Se&&he||null===(ln=this.instance)||void 0===ln||ln.initSharingEncode(this.mediaWorkersPath,Ke.sharingSocketAddress,ue,!1,Z,G,et)):null===(Qt=this.instance)||void 0===Qt||Qt.initSharingDecode(Ke.sharingSocketAddress))}destroy(){var u;null===(u=this.instance)||void 0===u||u.destroy(),this.instance=null,this.callbackList=[],[qa.AudioDecode,qa.AudioEncode,qa.VideoDecode,qa.VideoEncode].forEach(f=>{var A;null===(A=this.instance)||void 0===A||A.updateQosSubscription(!1,f)})}disconnect(){var u,f;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(17,{}),null===(f=this.instance)||void 0===f||f.JsMediaSDK_UnInit()}muteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(u,f,A,S,T){var w;return null===(w=this.instance)||void 0===w?void 0:w.Notify_MeidaSDK(22,fn({CaptureAudio:S,CaptureAudioInfo:{ssrc:u,AudioSelectValue:"default"===f?null:f},speakerInfo:{defaultDeviceId:A}},T?{useAudioBridge:!0,audioBridge:T}:{}))}leaveComputerAudio(){var u;return null===(u=this.instance)||void 0===u?void 0:u.Notify_MeidaSDK(21,null)}joinSharingAudio(u){var f;let{ssrc:A,microphoneDeviceId:S,speakerDeviceId:T,isCaptureAudio:w}=u;return null===(f=this.instance)||void 0===f?void 0:f.Notify_MeidaSDK(72,{CaptureAudio:w,CaptureAudioInfo:{ssrc:A,AudioSelectValue:"default"===S?null:S},speakerInfo:{defaultDeviceId:T},checkAutoplay:!1})}leaveSharingAudio(u){var f;return null===(f=this.instance)||void 0===f?void 0:f.Notify_MeidaSDK(73,{isPause:u?1:0})}changeSpeaker(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:u})}changeMicrophone(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===u?null:u})}restoreWebRTC(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===u?null:u})}renderVideo(u,f,A,S,T,w,M,B,G,Z,ce){var he;null===(he=this.instance)||void 0===he||he.Notify_MeidaSDK(1,{userId:f,width:S,height:T,x:w,y:M,quality:B,isMyself:G,canvas:u,enableWaterMark:ce,waterMarkText:Z,zone:A})}stopRenderVideo(u,f,A,S){var T;null===(T=this.instance)||void 0===T||T.Notify_MeidaSDK(2,{canvas:u,userId:f,RGBA:S,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:A})}startCaptureVideo(u,f,A,S,T,w){var M;null===(M=this.instance)||void 0===M||M.Notify_MeidaSDK(3,{ssid:u,width:A,height:S,fps:24,video:T,usingFacingMode:w,VideoSelectValue:"default"===f?null:f,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}stopCaptureVideo(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(12,{VideoSelectValue:"default"===u?null:u})}switchCanvasForVideoCapture(u){var f;let A=u;Array.isArray(u)||(A=[u]),null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(25,A)}renderSharing(u,f){var A;let S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=f,null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(23,{width:0,height:0,ssrc:u,canvas:f,enableWaterMark:S,waterMarkText:T,isFromMainSession:w})}stopRenderSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(24,{})}switchSharingSource(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(36,{ssrc:u,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(u,f){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=u,this.receivedSharingCanvas.height=f}catch{}}startRemoteControl(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(26,fn({socketURL:"wss://".concat(this.svcUrl),meetingID:this.meetingNumber,condID:this.confId,os:f,dom:u},A))}stopRemoteControl(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(41)}updateRemoteControlProperties(u){var f;const{dimension:A}=u,S=Fh(u,["dimension"]);null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(27,fn(fn({},A),S))}startDesktopSharing(u,f,A,S){var T;let w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.sharingCanvas=document.querySelector("#".concat(f));let B={};S&&(B={share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===S.cameraId?null:S.cameraId,width:S.width,height:S.height}}),null===(T=this.instance)||void 0===T||T.Notify_MeidaSDK(30,fn(fn({mode:M,ssid:u,canvas:f,video:A},B),{},{showShareAudioOption:w}))}stopDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(57,{lang:u})}changeSharingSecondCamera(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(49,{VideoSelectValue:u})}ajustmentSharingCanvas(u,f){if(this.sharingCanvas)try{this.sharingCanvas.width=u,this.sharingCanvas.height=f}catch{}}checkChromeSharingExtension(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(34,{})}enableAudioEncode(){var u,f;null===(u=this.instance)||void 0===u||u.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,!1,this.confId,this.meetingNumber,ld(null===(f=this.mediaOptions)||void 0===f?void 0:f.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(43,{userList:u,encryptKey:f})}updateRenderedSharingDimension(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(44,{width:u,height:f})}pauseOrResumeAudio(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(45,{bPause:u})}updateRenderedVideoCanvasDimension(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(46,{canvas:u,width:f,height:A})}clearVideoCanvas(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(47,{id:u,RGBA:f})}adjustRenderedVideoPosition(u,f,A,S,T,w,M,B){var G;null===(G=this.instance)||void 0===G||G.Notify_MeidaSDK(48,{userId:f,x:S,y:T,width:w,height:M,canvas:u,zone:A,RGBA:B})}mirrorVideo(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(75,{isMirrorMyVideo:u})}updateUserMediaSN(u){var f,A,S;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(80,{isFromMainSession:Number(u.isFromMainSession),mediaActionType:u.iVType,body:{add:null!==(A=u.added)&&void 0!==A?A:[],remove:null!==(S=u.removed)&&void 0!==S?S:[]}})}updateMediaParams(u){var f;const{iVType:A,isFromMainSession:S,updateParams:T}=u;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(81,{mediaActionType:A,isFromMainSession:Number(S),updateParams:T})}createMainSessionChannel(u,f){var A,S;"sharing"===u?null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(84,f):null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(85,f)}addReceivedSharingChannelType(u){var f;const{isFromMainSession:A}=u,S=Fh(u,["isFromMainSession"]);null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(82,fn({isFromMainSession:Number(A)},S))}removeReceivedSharingChannelType(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(83,{isFromMainSession:Number(u.isFromMainSession),ssrc:u.ssrc})}enableHardwareAccelerationForVideoDecode(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(70,{enable:u})}enableHardwareAccelerationForVideoEncode(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(71,{enable:u})}setSharingAudioVolume(u,f,A){var S;null===(S=this.instance)||void 0===S||S.Notify_MeidaSDK(74,{userid:u>>10,shareVolume:f?0:100,isFromMainSession:A})}subscribeToQos(u,f){u.forEach(A=>{var S;null===(S=this.instance)||void 0===S||S.updateQosSubscription(!0,A,f)})}unsubscribeFromQos(u){u.forEach(f=>{var A;null===(A=this.instance)||void 0===A||A.updateQosSubscription(!1,f)})}passThroughRWGMessage(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(40,u)}startVirtualBackgroundSetting(u,f,A,S,T,w){var M;null===(M=this.instance)||void 0===M||M.Notify_MeidaSDK(91,{canvas:u,bgdom:f,width:T,height:w,ssid:A,VideoSelectValue:"default"===S?null:S,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(92,{bgdom:u})}stopVirtualBackgroundSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(99,{enable:u})}enableShareAudioToBreakoutRoom(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(86,{enable:u})}sendUserAudioStatus(u){var f;null===(f=this.instance)||void 0===f||f.Notify_MeidaSDK(51,u)}muteOrUnmuteOtherAudio(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(50,{userId:u,volume:f?0:100})}adjustOtherAudioVolume(u,f){var A;null===(A=this.instance)||void 0===A||A.Notify_MeidaSDK(50,{userId:u,volume:f})}notifySDKMeetingReady(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(113)}}return a.agentInstance=void 0,a})();const Wo="JOIN_MEETING_FAILED";var ko;!function(a){a.ConnectionChange="connection-change",a.OnHoldChange="on-hold-change",a.UserAdd="user-added",a.UserUpdate="user-updated",a.UserRemove="user-removed",a.AttendeeUpdate="attendee-updated",a.MeetingAttributeUpdate="meeting-attribute-updated",a.PromoteAttendeeConsent="promote-attendee-consent",a.ActiveAppsUpdate="active-apps-updated",a.SharePronounTypeUpdate="share-pronoun-type-update"}(ko||(ko={}));const mN={JoinMeeting:{success:"ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",fail:[Wo]}},gN={[ko.ConnectionChange]:[{event:"JOIN_MEETING_SUCCESS",payload:()=>({state:W.ConnectionState.Connected})},{event:Wo,payload:a=>fn({state:W.ConnectionState.Fail},a)},{event:"RECONNECTING_MEETING",payload:a=>fn({state:W.ConnectionState.Reconnecting},a)},{event:"LEAVING_MEETING",payload:a=>fn({state:W.ConnectionState.Closed},a)}],[ko.OnHoldChange]:[{event:"MEETING_IN_WAITING_ROOM",payload:a=>({isOnHold:a})}],[ko.UserAdd]:[{event:"ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",payload:a=>[a]},{event:"ADD_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[ko.UserUpdate]:[{event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",payload:a=>[a]},{event:"UPDATE_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[ko.UserRemove]:[{event:"REMOVE_USER_PARTICIPANT_ATTRIBUTE",payload:a=>a}],[ko.AttendeeUpdate]:[{event:"UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",payload:a=>a},{event:"REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",payload:a=>a}],[ko.MeetingAttributeUpdate]:[{event:"UPDATE_MEETING_ATTRIBUTE",payload:()=>{}}],[ko.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:a=>{let{req_id:d,sender_id:u}=a;return{reqId:d,senderId:u}}}],[ko.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[ko.SharePronounTypeUpdate]:[{event:"SHARE_PRONOUN_TYPE_UPDATE",payload:a=>a}]};let $p;!function(a){a.ChatOnMessage="chat-on-message",a.ChatPrivilegeChange="chat-privilege-change",a.ChatDeleteMessage="chat-delete-message"}($p||($p={}));const V0={[$p.ChatOnMessage]:[{event:"CHAT_RECEIVE_MESSAGE_EVENTS",payload:a=>a}],[$p.ChatPrivilegeChange]:[{event:"CHAT_PRIVILEGE_CHANGE",payload:a=>a}],[$p.ChatDeleteMessage]:[{event:"CHAT_DELETE_MESSAGE_REPONSE",payload:a=>a}]};let bE;!function(a){a.CommandChannelStatus="command-channel-status",a.CommandChannelMessage="command-channel-message"}(bE||(bE={}));const Cw={[bE.CommandChannelStatus]:[{event:"COMMAND_STATUS_EVENTS",payload:a=>a}],[bE.CommandChannelMessage]:[{event:"COMMAND_RECEIVE_MESSAGE_EVENTS",payload:a=>a}]};let gc,SE;W.RecordingStatus=void 0,function(a){a.Recording="Recording",a.Paused="Paused",a.Stopped="Stopped"}(W.RecordingStatus||(W.RecordingStatus={})),function(a){a[a.None=0]="None",a[a.Init=1]="Init",a[a.Start=2]="Start",a[a.Pause=3]="Pause",a[a.Stop=4]="Stop"}(gc||(gc={})),function(a){a.RecordingChange="recording-change",a.LocalRecordingChange="local-recording-change"}(SE||(SE={}));const j0={[SE.RecordingChange]:[{event:"CLOUD_RECORDING_STATUS_CHANGE",payload:a=>{const{cmrServerStatus:d}=a;return d===gc.Start?W.RecordingStatus.Recording:d===gc.Pause?W.RecordingStatus.Paused:W.RecordingStatus.Stopped}}],[SE.LocalRecordingChange]:[{event:"LOCAL_RECORDING_CHANGE",payload:a=>a}]};let Or,Ja,hd;W.MutedSource=void 0,W.AudioChangeAction=void 0,W.DialoutState=void 0,function(a){a[a.InitSuccess=1]="InitSuccess",a[a.InitSuccessVideo=1.1]="InitSuccessVideo",a[a.InitSuccessAudio=1.2]="InitSuccessAudio",a[a.InitSuccessSharing=1.3]="InitSuccessSharing",a[a.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",a[a.CurrentVideoResolution=3]="CurrentVideoResolution",a[a.JpegDecThreadOk=4]="JpegDecThreadOk",a[a.JpegData=5]="JpegData",a[a.SharingPara=6]="SharingPara",a[a.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",a[a.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",a[a.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",a[a.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",a[a.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",a[a.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",a[a.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",a[a.MonitorLog=14]="MonitorLog",a[a.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",a[a.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",a[a.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",a[a.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",a[a.DataChannelOffer=19]="DataChannelOffer",a[a.AesGcmIvResponse=21]="AesGcmIvResponse",a[a.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",a[a.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",a[a.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",a[a.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",a[a.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",a[a.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",a[a.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",a[a.VbModelPreloading_3S=96]="VbModelPreloading_3S",a[a.VbModelPreloading_10S=97]="VbModelPreloading_10S",a[a.VbModelPreloadingOk=98]="VbModelPreloadingOk",a[a.InitFailed=-1]="InitFailed",a[a.InitFailedVideo=-1.1]="InitFailedVideo",a[a.InitFailedAudio=-1.2]="InitFailedAudio",a[a.InitFailedSharing=-1.3]="InitFailedSharing",a[a.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",a[a.AudioWebsocketBroken=-3]="AudioWebsocketBroken",a[a.VideoWebsocketBroken=-4]="VideoWebsocketBroken",a[a.SharingDecThreadFailed=-5]="SharingDecThreadFailed",a[a.AudioZeroData=-6]="AudioZeroData",a[a.AudioCtxSamplerate=-7]="AudioCtxSamplerate",a[a.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",a[a.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",a[a.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",a[a.StartRemoteControlFailed=-11]="StartRemoteControlFailed",a[a.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",a[a.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",a[a.UserStopDesktopSharing=-15]="UserStopDesktopSharing",a[a.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",a[a.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",a[a.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",a[a.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",a[a.DesktopSharingError=-20]="DesktopSharingError",a[a.DesktopSharingSystemError=-22]="DesktopSharingSystemError",a[a.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",a.audioQosData="AUDIO_QOS_DATA",a.videoQosData="VIDEO_QOS_DATA",a[a.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",a[a.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",a[a.VbSettingParaError=-34]="VbSettingParaError",a[a.NotifyUIFailover=-35]="NotifyUIFailover"}(Or||(Or={})),function(a){a[a.EncodeSuccess=1]="EncodeSuccess",a[a.DecodeSuccess=2]="DecodeSuccess",a[a.EncodeFailed=-1]="EncodeFailed",a[a.DecodeFailed=-2]="DecodeFailed"}(Ja||(Ja={})),function(a){a.Spotlight="Spotlight",a.Unmute="Unmute",a.AllowToTalk="Allow to talk"}(hd||(hd={})),function(a){a.Active="active",a.PassiveByMuteOne="passive(mute one)",a.PassiveByMuteAll="passive(mute all)",a.SharingAudio="sharing audio"}(W.MutedSource||(W.MutedSource={})),function(a){a.Join="join",a.Leave="leave",a.Muted="muted",a.Unmuted="unmuted"}(W.AudioChangeAction||(W.AudioChangeAction={})),function(a){a[a.Calling=1]="Calling",a[a.Ringing=2]="Ringing",a[a.Accepted=3]="Accepted",a[a.Busy=4]="Busy",a[a.NotAvailable=5]="NotAvailable",a[a.HangUp=6]="HangUp",a[a.Fail=7]="Fail",a[a.Success=8]="Success",a[a.Timeout=9]="Timeout",a[a.Canceling=10]="Canceling",a[a.Canceled=11]="Canceled",a[a.CancelFailed=12]="CancelFailed"}(W.DialoutState||(W.DialoutState={}));const Iw=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),CE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),IE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let Bu,Wh,a_,Kh,Q0,cA,c_,H0;W.ShareStatus=void 0,W.VideoQuality=void 0,W.VideoActiveState=void 0,W.VideoCapturingState=void 0,W.PassiveStopShareReason=void 0,function(a){a[a.HostGrab=0]="HostGrab",a[a.OnlyHost=1]="OnlyHost",a[a.AnyoneGrab=2]="AnyoneGrab",a[a.MultipleShare=3]="MultipleShare"}(Bu||(Bu={})),function(a){a.Sharing="sharing",a.Paused="paused",a.End="ended"}(W.ShareStatus||(W.ShareStatus={})),function(a){a[a.Video_90P=0]="Video_90P",a[a.Video_180P=1]="Video_180P",a[a.Video_360P=2]="Video_360P",a[a.Video_720P=3]="Video_720P"}(W.VideoQuality||(W.VideoQuality={})),function(a){a.Active="Active",a.Inactive="Inactive"}(W.VideoActiveState||(W.VideoActiveState={})),function(a){a.Muted="Muted",a.Unmuted="Unmuted"}(Wh||(Wh={})),function(a){a.Active="Active",a.Inactive="Inactive"}(a_||(a_={})),function(a){a.Success="Success",a.Failed="Failed",a.Initial="Initial"}(Kh||(Kh={})),function(a){a.Started="Started",a.Stopped="Stopped",a.Failed="Failed"}(W.VideoCapturingState||(W.VideoCapturingState={})),function(a){a.Approved="Approved",a.Rejected="Rejected"}(Q0||(Q0={})),function(a){a.PrivilegeChange="PrivilegeChange",a.StopScreenCapture="StopScreenCapture",a.ShareFromMainSession="ShareFromMainSession"}(W.PassiveStopShareReason||(W.PassiveStopShareReason={})),function(a){a.Muted="Muted",a.Unmuted="Unmuted",a.NoAudio="NoAudio",a.Phone="Phone"}(cA||(cA={})),function(a){a[a.ImageNotMatch=2]="ImageNotMatch",a[a.CanvasNotMatch=3]="CanvasNotMatch",a[a.VBModelNotMatch=4]="VBModelNotMatch"}(c_||(c_={})),W.MobileVideoFacingMode=void 0,function(a){a[a.NotConnect=0]="NotConnect",a[a.Connecting=1]="Connecting",a[a.ConnectSuccess=2]="ConnectSuccess",a[a.ConnectFail=3]="ConnectFail"}(H0||(H0={})),function(a){a.User="user",a.Environment="environment",a.Left="left",a.Right="right"}(W.MobileVideoFacingMode||(W.MobileVideoFacingMode={}));const mu={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},Zp={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let Fu;!function(a){a.DeviceChange="device-change",a.MediaSDKChange="media-sdk-change"}(Fu||(Fu={}));const Cm={[Fu.DeviceChange]:[{event:"MEDIA_DEVICE_CHANGE",payload:()=>({})}],[Fu.MediaSDKChange]:[{event:"AUDIO_ENCODE_SUCCESS",payload:()=>({type:"audio",action:"encode",result:"success"})},{event:"AUDIO_ENCODE_FAIL",payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:"AUDIO_DECODE_SUCCESS",payload:()=>({type:"audio",action:"decode",result:"success"})},{event:"AUDIO_DECODE_FAIL",payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:"VIDEO_ENCODE_SUCCESS",payload:()=>({type:"video",action:"encode",result:"success"})},{event:"VIDEO_ENCODE_FAIL",payload:()=>({type:"video",action:"encode",result:"fail"})},{event:"VIDEO_DECODE_SUCCESS",payload:()=>({type:"video",action:"decode",result:"success"})},{event:"VIDEO_DECODE_FAIL",payload:()=>({type:"video",action:"decode",result:"fail"})},{event:"SHARING_ENCODE_SUCCESS",payload:()=>({type:"share",action:"encode",result:"success"})},{event:"SHARING_ENCODE_FAIL",payload:()=>({type:"share",action:"encode",result:"fail"})},{event:"SHARING_DECODE_SUCCESS",payload:()=>({type:"share",action:"decode",result:"success"})},{event:"SHARING_DECODE_FAIL",payload:()=>({type:"share",action:"decode",result:"fail"})}]},Im={success:"VIDEO_CAPTURE_START_SUCCESS",fail:["CAN_NOT_DETECT_CAMERA","CAN_NOT_FIND_CAMERA","VIDEO_USER_FORBIDDEN_CAPTURE","VIDEO_ESTABLISH_STREAM_ERROR","VIDEO_CAMERA_IS_TAKEN","VIDEO_VITRUAL_BACKGROUND_FAILED"]};let Ra;!function(a){a.VideoActiveChange="video-active-change",a.PeerVideoStateChange="peer-video-state-change",a.VideoSpotlightChange="video-spotlight-change",a.VideoMutedChange="video-muted-change",a.VideoCapturingChange="video-capturing-change",a.AskForStartVideoConsent="ask-for-start-video-consent",a.VideoDimensionChange="video-dimension-change",a.VideoFollowHostOrder="video-follow-host-order-change",a.VideoHostLayoutChange="video-host-layout-change",a.VideoVBPreloadChange="video-virtual-background-preload-change",a.VideoStatisticDataChange="video-statistic-data-change",a.VideoDetailedDataChange="video-detailed-data-change"}(Ra||(Ra={}));const uA={[Ra.VideoActiveChange]:[{event:"RECEIVE_VIDEO_ACTIVE_INDICATION",payload:a=>({state:a.bVideoOn?W.VideoActiveState.Active:W.VideoActiveState.Inactive,userId:a.userId})}],[Ra.VideoCapturingChange]:[{event:"VIDEO_CAPTURE_START_SUCCESS",payload:()=>({state:W.VideoCapturingState.Started})},{event:"VIDEO_CAPTURE_STOP_RESULT",payload:a=>({state:null!=a&&a.failed?W.VideoCapturingState.Failed:W.VideoCapturingState.Stopped})}],[Ra.VideoMutedChange]:[{event:"RECEIVE_VIDEO_MUTE_INDICATION",payload:a=>({state:a.isVideoMuted?Wh.Muted:Wh.Unmuted,userId:a.id})}],[Ra.AskForStartVideoConsent]:[{event:"ASK_FOR_START_VIDEO_CONSENT",payload:a=>({state:a.isVideoMuted?Wh.Muted:Wh.Unmuted,userId:a.id})}],[Ra.VideoSpotlightChange]:[{event:"VIDEO_SPOTLIGHT_CHANGE",payload:a=>({spotlightList:a.spotlightList&&a.spotlightList.map(d=>({userId:d}))})}],[Ra.VideoDimensionChange]:[{event:"RECEIVE_VIDEO_DIMENSION_CHANGE",payload:a=>({type:"received",width:a.width,height:a.height})}],[Ra.VideoFollowHostOrder]:[{event:"VIDEO_FOLLOW_HOST_ORDER_CHANGE",payload:a=>({isFollowHostOrder:a.bOn})}],[Ra.VideoHostLayoutChange]:[{event:"VIDEO_HOST_DRAG_LAYOUT_CHANGE",payload:a=>Array.isArray(a.layout)?a.layout.map(d=>({userId:d})):[]}],[Ra.PeerVideoStateChange]:[{event:"VIDEO_NEW_USER_START",payload:a=>fn({action:"Start"},a)},{event:"VIDEO_OLD_USER_STOP",payload:a=>fn({action:"Stop"},a)}],[Ra.VideoVBPreloadChange]:[{event:"VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",payload:a=>({isReady:a})}],[Ra.VideoStatisticDataChange]:[{event:"VIDEO_STATISTIC_DATA",payload:a=>a}],[Ra.VideoDetailedDataChange]:[{event:"VIDEO_CELL_DETAILED_DATA",payload:a=>a}]};let Uu;!function(a){a.ActiveSpeaker="active-speaker",a.UnmuteAudioConsent="unmute-audio-consent",a.CurrentAudioChange="current-audio-change",a.DialoutStateChange="dialout-state-change",a.MergeAudio="merged-audio",a.AutoPlayFailed="auto-play-audio-failed",a.AllowTalkChange="allow-talk-change",a.ShareAudioChange="share-audio-change",a.AudioStatisticDataChange="audio-statistic-data-change"}(Uu||(Uu={}));const Tm={JoinComputerAudio:{success:"AUDIO_CURRENT_USER_JOIN_BY_VOIP",fail:["USER_FORBIDDEN_MICROPHONE","ESTABLISH_AUDIO_STREAM_ERROR"]},LeaveComputerAudio:{success:"AUDIO_CURRENT_USER_LEAVE_AUDIO"},JoinAudioByCallMe:{success:"AUDIO_DIALOUT_RESULT_SUCCESS",fail:["DIALOUT_FAIL"]},cancelDialOut:{success:"AUDIO_DIALOUT_CANCEL_SUCCESS",fail:["DIALOUT_CANCEL_FAIL"]},hangup:{success:"AUDIO_CURRENT_USER_LEAVE_AUDIO"}},G0={[Uu.ActiveSpeaker]:[{event:"AUDIO_ACTIVE_SPEAKER",payload:a=>a}],[Uu.UnmuteAudioConsent]:[{event:"AUDIO_UNMUTE_CONSENT",payload:a=>({reason:a})}],[Uu.CurrentAudioChange]:[{event:"AUDIO_CURRENT_USER_JOIN_BY_PHONE",payload:()=>({action:W.AudioChangeAction.Join,type:"phone"})},{event:"AUDIO_CURRENT_USER_JOIN_BY_VOIP",payload:()=>({action:W.AudioChangeAction.Join,type:"computer"})},{event:"AUDIO_CURRENT_USER_LEAVE_AUDIO",payload:()=>({action:W.AudioChangeAction.Leave})},{event:"AUDIO_CURRENT_USER_MUTED",payload:a=>{let{source:d}=a;return{action:W.AudioChangeAction.Muted,source:d}}},{event:"AUDIO_CURRENT_USER_UNMUTED",payload:a=>{let{source:d}=a;return{action:W.AudioChangeAction.Unmuted,source:d}}}],[Uu.DialoutStateChange]:[{event:"AUDIO_DIALOUT_RESULT_CODE",payload:a=>a}],[Uu.MergeAudio]:[{event:"AUDIO_MERGE_AUDIO_INDICATION",payload:a=>a}],[Uu.AutoPlayFailed]:[{event:"AUDIO_AUTO_PLAY_FAILED",payload:()=>{}}],[Uu.AllowTalkChange]:[{event:"AUDIO_ALLOW_TALK_CHANGE",payload:a=>({enabled:a})}],[Uu.ShareAudioChange]:[{event:"SHARE_AUDIO_STATE_CHANGE",payload:a=>a}],[Uu.AudioStatisticDataChange]:[{event:"AUDIO_STATISTIC_DATA",payload:a=>a}]};let Vu;!function(a){a.ShareActiveChange="active-share-change",a.ShareDimensionChange="share-content-dimension-change",a.SharePassiveStop="passively-stop-share",a.SharePeerStateChange="peer-share-state-change",a.ShareContentChange="share-content-change",a.SharePrivilegeChange="share-privilege-change",a.ShareReadReceipt="share-can-see-screen",a.RemoteControlApprovedChange="remote-control-approved-change",a.RemoteControlInControlChange="remote-control-in-control-change",a.RemoteControlClipboardChange="remote-control-clipboard-change"}(Vu||(Vu={}));const Tw={[Vu.ShareActiveChange]:[{event:"SHARE_ACTIVE_INDICATION",payload:a=>{const{isActive:d,activeUserId:u}=a;return fn({state:d?"Active":"Inactive",userId:u},Fh(a,["isActive","activeUserId"]))}}],[Vu.ShareDimensionChange]:[{event:"SHARE_DIMENSION_CHANGE",payload:a=>({type:"sended",width:a.width,height:a.height})},{event:"SHARE_RECEIVED_DIMENSION_CHANGE",payload:a=>({type:"received",width:a.width,height:a.height})}],[Vu.SharePassiveStop]:[{event:"SHARE_VIDEO_STREAMS_END",payload:()=>({reason:W.PassiveStopShareReason.StopScreenCapture})},{event:"SHARE_PASSIVE_STOP_SHARE",payload:()=>({reason:W.PassiveStopShareReason.PrivilegeChange})},{event:"SHARE_PASSIVE_BO_STOP",payload:()=>({reason:W.PassiveStopShareReason.ShareFromMainSession})}],[Vu.SharePeerStateChange]:[{event:"SHARE_NEW_USER_ADD",payload:a=>({userId:a.id,action:"Start"})},{event:"SHARE_USER_REMOVE",payload:a=>({userId:a.id,action:"Stop"})}],[Vu.ShareContentChange]:[{event:"SHARE_AUTO_CHANGE_SOURCE",payload:a=>a}],[Vu.RemoteControlApprovedChange]:[{event:"SHARE_REMOTE_CONTROL_APPROVE",payload:a=>({state:a?Q0.Approved:Q0.Rejected})}],[Vu.RemoteControlInControlChange]:[{event:"SHARE_GRAB_REMOTE_CONTROL_CHANGE",payload:a=>({isControlling:a})}],[Vu.RemoteControlClipboardChange]:[{event:"SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",payload:a=>a}],[Vu.SharePrivilegeChange]:[{event:"SHARE_PRIVILEGE_CHANGE",payload:a=>({privilege:a})}],[Vu.ShareReadReceipt]:[{event:"SHARE_READ_RECEIPT",payload:()=>{}}]};let ww,pd,ef,fd,wm;(function(a){a.LiveStart="liveStart",a.LiveEnd="liveEnd"})(ww||(ww={})),function(a){a.MakePublicView="make_question_public_view",a.Comment="comment",a.PrivateView="private",a.DeleteComment="deletecomment",a.DeleteQuestion="deletequestion",a.Reopen="reopen",a.Dismiss="dismiss",a.Upvote="upvote",a.RevokeUpvote="revokeupvote"}(pd||(pd={})),function(a){a.Question="question"}(ef||(ef={})),function(a){a.Question="question",a.UpdateQuestion="updateQuestion",a.Answer="answer",a.DeleteComment="deleteComment",a.DeleteQuestion="deleteQuestion",a.Dismiss="dismiss",a.Reopen="reopen",a.Upvote="upvote",a.AnswerLive="answerLive"}(fd||(fd={})),function(a){a.QaSettingChange="qa-setting-change",a.QaActionChange="qa-action-change"}(wm||(wm={}));const Rw={[wm.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:a=>a}],[wm.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:a=>({action:fd.Question,data:a})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:a=>({action:fd.UpdateQuestion,data:a})},{event:"QA_ANSWER_QUESTION",payload:a=>({action:fd.Answer,data:a})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:a=>({action:fd.DeleteComment,data:a})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:a=>({action:fd.DeleteQuestion,data:a})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:a=>({action:fd.Dismiss,data:a})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:a=>({action:fd.Reopen,data:a})},{event:"QA_ANSWER_VOTE_QUESTION",payload:a=>({action:fd.Upvote,data:a})},{event:"QA_ANSWER_QUESTION_LIVE",payload:a=>({action:fd.AnswerLive,data:a})}]},cr="INVALID_OPERATION",qr="INVALID_PARAMETERS";let _o;!function(a){a.InviteToJoin="invite-to-join",a.RoomCountdown="room-countdown",a.RoomTimeUp="room-time-up",a.ClosingRoomCountdown="closing-room-countdown",a.BroadcastMessage="broadcast-message",a.AskForHelp="ask-for-help",a.AskForHelpResponse="ask-for-help-response",a.RoomStateChange="room-state-change",a.MainSessionUserUpdate="main-session-user-updated"}(_o||(_o={}));const TE={[_o.InviteToJoin]:[{event:"BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",payload:a=>a}],[_o.RoomCountdown]:[{event:"BREAKOUT_ROOM_ROOM_COUTDOWN",payload:a=>a}],[_o.RoomTimeUp]:[{event:"BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",payload:a=>a}],[_o.ClosingRoomCountdown]:[{event:"BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",payload:a=>a}],[_o.BroadcastMessage]:[{event:"BREAKOUT_ROOM_BROADCAST_MESSAGE",payload:a=>a}],[_o.AskForHelp]:[{event:"BREAKOUT_ROOM_ASK_HELP_REQUEST",payload:a=>a}],[_o.AskForHelpResponse]:[{event:"BREAKOUT_ROOM_ASK_HELP_RESPONSE",payload:a=>a}],[_o.RoomStateChange]:[{event:"BREAKOUT_ROOM_ATTRIBUTE_INDICATION",payload:a=>({status:a.controlStatus})}],[_o.MainSessionUserUpdate]:[{event:"BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE",payload:()=>({})}]};var lA;!function(a){a.StatusUpdate="archiving-status-update",a.OptionsUpdate="archiving-options-update"}(lA||(lA={}));const W0={[lA.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:a=>a}],[lA.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:a=>a}]},zh=fn(fn(fn(fn(fn(fn(fn(fn(fn(fn(fn(fn(fn({},gN),{"caption-message":[{event:"LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",payload:a=>a}],"caption-status":[{event:"LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",payload:a=>a}],"caption-enable":[{event:"LIVE_TRANSCRIPTION_STATUS_CHANGE",payload:a=>a}]}),V0),Cw),j0),G0),uA),Rw),Tw),Cm),TE),W0),{"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:a=>a}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:a=>a}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:a=>a}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:a=>a},{event:"CC_STATUS_CHANGE",payload:a=>a}]}),Uc=function(a){return{all:a=a||new Map,on:function(d,u){var f=a.get(d);f?f.push(u):a.set(d,[u])},off:function(d,u){var f=a.get(d);f&&(u?f.splice(f.indexOf(u)>>>0,1):a.set(d,[]))},emit:function(d,u){var f=a.get(d);f&&f.slice().map(function(A){A(u)}),(f=a.get("*"))&&f.slice().map(function(A){A(d,u)})}}}(),ju=new Map,tf=new Array,Et=function(a){Uc.emit(a,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},nf=a=>new Promise((d,u)=>{a.fail&&a.fail.length>0?dc(Ds(Uc,a.success).pipe(ri(1)),Zs(...a.fail.map(f=>Ds(Uc,f).pipe(ri(1),tr(A=>bi({type:f,payload:A})))))).subscribe(f=>d(f),f=>{u("object"==typeof f.payload?fn({type:f.type},f.payload):void 0===f.payload?{type:f.type}:f)}):Ds(Uc,a.success).pipe(ri(1)).subscribe(f=>d(f))}),Ii=function(a,d){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((f,A)=>{let S=mt;"string"==typeof a?S=Ds(Uc,a).pipe(ri(1)):(S=Ds(Uc,a.event),a.operations&&(S=a.operations.reduce((T,w)=>T.pipe(w),S))),dc(S,du(u).pipe(ai(bi("timeout")))).subscribe(T=>{if(d){const w=d(T);"boolean"==typeof w?w?f(""):A({type:"INTERNAL_ERROR"}):0===w.ret?f(w.body):A({type:"INTERNAL_ERROR",reason:w.body})}else f(T)},()=>{A({type:"OPERATION_TIMEOUT"})})})},Gs=(a,d)=>void 0!==d?Ds(Uc,a).pipe(ri(d)):Ds(Uc,a),K0=()=>{tf.forEach(a=>{a.unsubscribe()}),tf.length=0,ju.clear()},{setAttendeesList:Fn,setIsAdmitAllSilentUsers:_N,resetParticipants:Ow,addFailoverAttendees:wE,removeFailoverAttendees:Dw,setClearRaiseHand:kw,setClearAttendeeFeedback:Nw,updateAttendeeDisplayName:u_,removeXmppAttendeeUser:vN,updateXmppAttendeeList:RE}=Mc({SET_ATTENDEES_LIST:a=>a,SET_ASSISTANT_LIST:a=>a,UPDATE_XMPP_ATTENDEE_LIST:a=>a,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:a=>a,REMOVE_FAILOVER_ATTENDEES:a=>a,ADD_FAILOVER_ATTENDEES:a=>a,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:a=>a,REMOVE_XMPP_ATTENDEE_USER:a=>a});var Uo=function(a,d){return a===d};function OE(a,d){var u,f,he,A="object"==typeof d?d:{equalityCheck:d},S=A.equalityCheck,w=A.maxSize,M=void 0===w?1:w,B=A.resultEqualityCheck,G=(he=void 0===S?Uo:S,function(ue,Se){if(null===ue||null===Se||ue.length!==Se.length)return!1;for(var Qe=ue.length,He=0;He<Qe;He++)if(!he(ue[He],Se[He]))return!1;return!0}),Z=1===M?(u=G,{get:function(he){return f&&u(f.key,he)?f.value:"NOT_FOUND"},put:function(he,ue){f={key:he,value:ue}},getEntries:function(){return f?[f]:[]},clear:function(){f=void 0}}):function(he,ue){var Se=[];function Qe(He){var Ke=Se.findIndex(function(Lt){return ue(He,Lt.key)});if(Ke>-1){var et=Se[Ke];return Ke>0&&(Se.splice(Ke,1),Se.unshift(et)),et.value}return"NOT_FOUND"}return{get:Qe,put:function(He,Ke){"NOT_FOUND"===Qe(He)&&(Se.unshift({key:He,value:Ke}),Se.length>he&&Se.pop())},getEntries:function(){return Se},clear:function(){Se=[]}}}(M,G);function ce(){var he=Z.get(arguments);if("NOT_FOUND"===he){if(he=a.apply(null,arguments),B){var Se=Z.getEntries().find(function(Qe){return B(Qe.value,he)});Se&&(he=Se.value)}Z.put(arguments,he)}return he}return ce.clearCache=function(){return Z.clear()},ce}function Qu(a){var d=Array.isArray(a[0])?a[0]:a;if(!d.every(function(f){return"function"==typeof f})){var u=d.map(function(f){return"function"==typeof f?"function "+(f.name||"unnamed")+"()":typeof f}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+u+"]")}return d}function DE(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];var A=function(){for(var S=arguments.length,T=new Array(S),w=0;w<S;w++)T[w]=arguments[w];var M,B=0,G={memoizeOptions:void 0},Z=T.pop();if("object"==typeof Z&&(G=Z,Z=T.pop()),"function"!=typeof Z)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof Z+"]");var he=G.memoizeOptions,ue=void 0===he?u:he,Se=Array.isArray(ue)?ue:[ue],Qe=Qu(T),He=a.apply(void 0,[function(){return B++,Z.apply(null,arguments)}].concat(Se)),Ke=a(function(){for(var et=[],Lt=Qe.length,Gt=0;Gt<Lt;Gt++)et.push(Qe[Gt].apply(null,arguments));return M=He.apply(null,et)});return Object.assign(Ke,{resultFunc:Z,memoizedResultFunc:He,dependencies:Qe,lastResult:function(){return M},recomputations:function(){return B},resetRecomputations:function(){return B=0}}),Ke};return A}var Ws=DE(OE);const _c=a=>{let{participants:{attendeesList:d}}=a;return d},Yh=a=>{let{meeting:{userId:d}}=a;return d},kE=a=>{let{participants:{xmppAttendeeList:d}}=a;return d};let Tl,qh,Jh;(function(a){a[a.Attendee=0]="Attendee",a[a.Host=1]="Host",a[a.Owner=4]="Owner",a[a.ViewOnly=8]="ViewOnly",a[a.HostOwner=5]="HostOwner",a[a.ViewOnlyCanTalk=24]="ViewOnlyCanTalk"})(Tl||(Tl={})),function(a){a[a.Host=10]="Host",a[a.Panelist=20]="Panelist",a[a.Attendee=30]="Attendee"}(qh||(qh={})),function(a){a[a.Client=9]="Client",a[a.Phone=5]="Phone",a[a.H323=15]="H323"}(Jh||(Jh={}));const z0=a=>(a&Tl.Host)===Tl.Host,Rm=a=>(a&Jh.Phone)===Jh.Phone,Y0=a=>a===Tl.ViewOnlyCanTalk,Xa=a=>(a&Tl.ViewOnly)===Tl.ViewOnly;let rf,kr,Om,ur,Dm;(function(a){a[a.Automatically=1]="Automatically",a[a.Manually=2]="Manually"})(rf||(rf={})),function(a){a[a.NotStarted=1]="NotStarted",a[a.InProgress=2]="InProgress",a[a.Closing=3]="Closing",a[a.Closed=4]="Closed"}(kr||(kr={})),function(a){a[a.NoToken=1]="NoToken",a[a.GotToken=2]="GotToken",a[a.Started=3]="Started",a[a.Closing=4]="Closing",a[a.Closed=5]="Closed"}(Om||(Om={})),function(a){a.Initial="initial",a.Invited="invited",a.Joining="joining",a.InRoom="in room",a.Leaving="leaving",a.TimeUp="time up",a.MainSession="main session"}(ur||(ur={})),function(a){a.Join="joinRequest",a.Switch="switchRequest",a.Leave="leaveRequest",a.Broadcast="messageText",a.HelpReq="helpRequest",a.HelpRes="helpResponse",a.CoHostWantJoinThisBo="wantJoinThisBO"}(Dm||(Dm={})),W.AskHostHelpResponse=void 0,function(a){a[a.Received=0]="Received",a[a.Busy=1]="Busy",a[a.Ignore=2]="Ignore",a[a.AlreadyInRoom=3]="AlreadyInRoom"}(W.AskHostHelpResponse||(W.AskHostHelpResponse={}));const ui=Ws([Yh,_c],(a,d)=>d.find(u=>u.userId===a)),Hu=Ws([ui],a=>a?.isHost||a?.bCoHost),q0=Ws([ui],a=>a?.isHost),dA=Ws([kE],a=>a.filter(d=>d.userRole===qh.Attendee)),J0=Ws([_c],a=>a.filter(d=>d.bHold&&!d.bid)),Ks=Ws([_c,a=>{let{breakoutRoom:d}=a;return d&&d.controlStatus},a=>{let{breakoutRoom:d}=a;return d&&d.currentRoom.status}],(a,d,u)=>a.filter(d!==kr.InProgress&&d!==kr.Closing||u!==ur.InRoom?f=>!f.bHold&&!f.bid:f=>!f.bHold)),AN=Ws([a=>{let{participants:{assistantList:d}}=a;return d}],a=>a),sf=Ws([Ks],a=>a.find(d=>d.isHost)),l_=Ws([Ks],a=>a.filter(d=>d.bCoHost)),NE=Ws([ui,Ks],(a,d)=>d.filter(u=>u.userId!==a?.userId));let fi,hA;Ws([kE],a=>a.reduce((d,u)=>{const{jid:f}=u;return Object.assign(d,{[f]:u}),d},{})),Ws([kE,a=>{let{meeting:{jid:d}}=a;return d}],(a,d)=>{var u;return null===(u=a.find(f=>f.jid===d))||void 0===u?void 0:u.userId}),function(a){a.Closed="closed",a.Connecting="connecting",a.Connected="connected"}(fi||(fi={})),function(a){a[a.SupportASL=1]="SupportASL",a[a.SidecarPhase2=2]="SidecarPhase2",a[a.SupportBroadcastVoice=8]="SupportBroadcastVoice",a[a.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",a[a.SupportVideoShare=128]="SupportVideoShare"}(hA||(hA={}));const{setAsnIds:d_,setIsCanUnmute:Pw,setDialoutSequence:Xh,setDialoutResultCode:vc,setIsAllowToTalk:Zd,setIsHostMuteAll:pA,setIsActiveOperation:af,setAudioSsrc:PE,setIsMutedUponEntry:wl,setIsUserGrantCaptureAudio:h_,setIsMicrophoneForbidden:X0,setWebrtcRestartCount:ME,setMicrophoneList:xE,setSpeakerList:$0,setActiveMicrophone:p_,setActiveSpeaker:Z0,setCanPlayAudio:f_,resetAudio:eC,setIsComputerAudioLoading:md,setIsSpeakerOnly:LE,setIsAllowToTalkAttendeeConnected:tC,setIsMuteBeforeSharingAudio:$h,addLocalShareAudioUser:yN,updateLocalShareAudioUser:cf,setIsJoinComputerAudioBeforeSharingAudio:eh,setIsShareAudioEnabled:m_,setIsShareAudioMuted:BE,setIsSharingAudio:uf,setAudioDataEncoding:nC,setAudioDataDecoding:km,addLocallyMutedAudio:FE,removeLocallyMutedAudio:Mw,updateUserAudioVolumeLocally:UE,removeLocalUserAudioVolume:VE}=Mc("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_IS_HOST_MUTE_ALL","SET_IS_ACTIVE_OPERATION","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_SPEAKER_ONLY","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME"),{setSharePrivilege:rC,setShareActiveNode:iC,setIsReceiveSharing:jE,setIsChromeExtensionInstalled:oC,setIsScreenShareForbidden:QE,setShareDimension:HE,setShareStatus:Rl,setShareSsrc:sC,setShareQuality:Vc,setReceivedShareDimension:ps,setIsRemoteControlApproved:GE,setIsGrabRemoteControl:xw,setIsVerifiedSharingRenderCanvasAfterFailover:WE,setIsVerifiedSharingCaptureCanvasAfterFailover:KE,setIsSdkGrabControl:aC,setIsReceiveSharingFromMainSession:Lw,setIsSharingToBreakoutRoom:bo,setIsSharingWithSecondCamera:jc,setShringSecondCameraId:fA,setIsRequireReadReceipt:Jr,resetShare:Qc}=Mc("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_REMOTE_CONTROL_APPROVED","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_VERIFIED_SHARING_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_SHARING_CAPTURE_CANVAS_AFTER_FAILOVER","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","RESET_SHARE"),{setVideoSsrc:mA,setActiveVideoId:zE,setCameraList:gA,setActiveCamera:zs,setIsCurrentUserStartedVideo:Ko,setSpotlightVideo:lf,setIsCaptureForbidden:Hc,setVideoMaxQuality:Bw,setCaptureCanvasList:_A,setIsVideoMuted:Gc,setIsCaptureCameraLoading:df,setIsCameraTaken:YE,setIsVerifiedVideoRenderCanvasAfterFailover:qE,setIsVerifiedVideoCaptureCanvasAfterFailover:Fw,resetVideo:Zh,setReceivedVideoDimension:Nm,addSubscribedVideoId:gd,removeSubscribedVideoId:cC,setIsFollowHostVideoLayout:uC,setHostDragLayout:Uw,addRenderedVideoId:th,removeRenderedVideoId:Vw,setIsSupportHdVideo:jw,setMaximumNumbeOfHdSubscriptions:JE,setIsCanUnmuteVideo:g_,setIsVbPreloadReady:XE,setIsVbConfiged:__,setVbImageSrc:ep,setVideoDataEncoding:tp,setVideoDataDecoding:vA,setHardwareAccelerationState:v_,setVideoCaptureCustomizedOption:Ol}=Mc("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_CAPTURE_CANVAS_LIST","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","SET_IS_VERIFIED_VIDEO_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_VIDEO_CAPTURE_CANVAS_AFTER_FAILOVER","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION"),{resetQa:Kw}=Mc("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:AA,setPanelistChatPrivilege:$E,addChatMessageHistory:_d,resetChat:pf,setIsAllowAttendeeChat:ZE,setLatestChatMessageId:zw,removeChatMessage:yA}=Mc("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE"),{setCcEditorInfo:EA,resetClosedCaption:tb}=Mc("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:nb,setBreakoutRoomAllocationPattern:rb,setBreakoutRoomSequenceId:pC,setMeetingElapsedTime:Mm,setStartRoomElapsedTime:ib,setBreakoutRoomOptions:bA,setBreakoutRoomControlStatus:ob,setBreakoutRooms:vd,setCurrentBreakoutRoom:y_,setBreakoutRoomAttendeeStatus:ff,setBreakoutRoomConfId:$w,setBreakoutRoomToken:fC,resetBreakoutRoom:Gu,setBreakoutRoomClosingRoomTime:mC,setBreakoutRoomBroadcastMessage:gC,setBreakoutRoomHostReplyType:ws,setBreakoutRoomHostReplyRequestId:sb,setMainSessionAttendeeList:_C,setIsHugeBreakoutRoom:vC,setBreakoutRoomPreAssignedRoomList:ab,setBreakoutRoomUserRoleUpdated:Ad,setBreakoutRoomMeetingOptions:Zw}=Mc("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:eR,setCloudRecordingEnable:AC,setAllowStopAutoRecording:tR,setAutomaticCloudRecordingEnable:yC,resetRecording:Wc}=Mc("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","RESET_RECORDING"),{updateCmdJid:Kc,removeCmdJid:mf,setCmdChannelConnectionStatus:EC,resetCmdChannel:nR}=Mc("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:bC}=Mc({SET_ARCHIVING_STATUS:a=>a,SET_ARCHIVING_SESSION_READY:a=>a,SET_ARCHIVING_OPTIONS:a=>a,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:rR,setLiveTranscriptionMeetingOptions:iR,setIsLiveTranscriptionManualCaptionerEnabled:SC,setLiveTranscriptionGatewayId:oR,setLiveTranscriptionSupportedLanguage:SA,setIsLiveTranscriptionSubscribed:rh,setCurrentTranscriptionLang:np,setCurrentTranslationLang:gf,addLiveTranscriptionMessage:CA,updateLiveTranscriptionMessage:IA,reduceLiveTranscriptionMessages:TN,setLiveTranscriptionEngineType:CC,removeLiveTranscriptionFailoverState:wN,setLiveTranscriptionLastCaptionMessage:TA,resetLiveTranscription:cb}=Mc("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"),wA=function(a){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:u,xmppSocketStatus:f,mainSessionSocketStatus:A},meeting:{meetingStatus:S}}=a,T=[];if(S===vs.Joined){const w=go.getInstance(),M=Do.createAgent();if(w.disconnect(),w.destroy(),a.video&&(a.video.subscribedVideoList.length>0&&a.video.subscribedVideoList.forEach(B=>{M.unsubscribeVideo(B)}),a.video.isCurrentUserStartedVideo&&Et("VIDEO_CAPTURE_STOP_RESULT")),a.share&&a.share.isReceiveSharing){const B=a.share.activeNodeId;a.share.isRemoteControlApproved&&M.sharingRequestRemoteControl(B,!1),M.unsubscribeSharing(B)}}if(d||(ar.clearSession(),[hs.WebclientTk,hs.WebclientZsk,hs.WebclientZtk].forEach(w=>{sessionStorage.removeItem(w)}),fc.destroy()),u!==fi.Closed&&T.push(ra()),f!==fi.Closed&&T.push(Zi()),A!==fi.Closed&&T.push(Sa()),d){const w=ui(a);T.push(k0({audio:w?.audio,muted:w?.muted,video:w?.bVideoOn}))}else T.push(k0({audio:!1,muted:void 0,video:!1}));return T.push(am(),dm(),Ow(),eC(d),Qc(),Zh(),Kw(),pf(),Wc(),tb(),Gu(),nR(),bC(),cb(d),Ya(vs.Closed)),T},IC=function(a){for(var d=arguments.length,u=new Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];return Ii({event:"UPDATE_USER_PARTICIPANT_ATTRIBUTE",operations:[Ne(A=>A.find(S=>S.userId===a)),Un(A=>!!A),ri(1)]},...u)};function Nl(a){return xe(Ne((d,u)=>a(d,u)),Un(d=>null!=d))}function sR(a){return xe(tr((d,u)=>a(d,u)||mt))}function aR(a){return xe(Qo((d,u)=>a(d,u)||mt))}function TC(a){return xe(tr((d,u)=>a(d,u)),tr(d=>Array.isArray(d)?zn(d):Pn(d)))}const RN=(a,d)=>{const u=performance.now();let f=0,A=!1;return setTimeout(function S(){f+=d,a();const T=performance.now()-u-f,w=setTimeout(S,Math.max(d-T,0));A&&clearTimeout(w)},d),()=>{A=!0}},wC={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},E_={["".concat(Ts)]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(a){a.add&&this.payloads.add.push(...a.add),a.update&&this.payloads.update.push(...a.update),a.remove&&this.payloads.remove.push(...a.remove)}})};function RC(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wC;return d=>new ze(u=>{const f=new Map;let A=0,S=null;const{period:T,rules:w}=a;let M=null;S||(S=RN(()=>{A=0},T));const B=Object.keys(E_),G=d.subscribe({next(Z){if(Z&&Z.evt&&null!==S){A+=1;const{evt:ce,body:he}=Z,ue=String(ce);if(B.indexOf(ue)>=0)if(M){const Se=f.get(ue);if(Se)Se.onThrottle(he);else{const Qe=E_[ue]();Qe.onThrottle(he),f.set(ue,Qe)}}else{let Se=0;if(w.forEach(Qe=>{A>Qe.peak&&(Se=Qe.throttle)}),Se>0){const Qe=E_[ue]();Qe.onThrottle(he),f.set(ue,Qe),M=setTimeout(()=>{f.forEach((He,Ke)=>{const et={evt:Number(Ke),body:He.payloads};u.next(et)}),f.clear(),M=null},Se)}else u.next(Z)}else u.next(Z)}else u.next(Z)},error(Z){u.error(Z)},complete(){u.complete()}});return()=>{G.unsubscribe(),S&&(S(),S=null),A=0}})}Ws([Ks,a=>{let{share:{isReceiveSharing:d}}=a;return d},a=>{let{share:{activeNodeId:d}}=a;return d}],function(){let u=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(f=>f.userId===u&&!0===f.sharerOn):null});const xm=Ws([Ks],a=>a.filter(d=>d.sharerOn||d.sharerPause));class RA{constructor(d){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,d&&(this._cancelError=d),this._locked=!1}acquire(){const d=this.isLocked(),u=new Promise((f,A)=>{this._queue.push({resolve:f,reject:A})});return d||this._dispatch(),u}runExclusive(d){var u=this;return L(function*(){const f=yield u.acquire();try{return yield d()}finally{f()}})()}waitForUnlock(){var d=this;return L(function*(){return d.isLocked()?new Promise(u=>d._waiters.push({resolve:u})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const d=this._currentReleaser;this._currentReleaser=void 0,d()}}cancel(){this._queue.forEach(d=>d.reject(this._cancelError)),this._queue=[]}_dispatch(){const d=this._queue.shift();if(!d)return;let u=!1;this._currentReleaser=()=>{u||(u=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,d.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(d=>d.resolve()),this._waiters=[]}}let to="zoom.us";const OC="https://dmogdx0jrul3u.cloudfront.net/".concat("2.9.0","/lib/av"),b_="https://source.zoom.us/".concat("2.9.0","/lib/av"),ub="https://jssdk.zoomus.cn/".concat("2.9.0","/lib/av"),zc=(a,d,u)=>Vv(...[d,u].map((f,A)=>{if("initial"!==f)return zn(Promise.resolve("success"===f));{const S=0===A?"ENCODE":"DECODE";return dc(Gs("".concat(a.toUpperCase(),"_").concat(S,"_SUCCESS"),1).pipe(hc(!0)),Gs("".concat(a.toUpperCase(),"_").concat(S,"_FAIL"),1).pipe(hc(!1)))}})),S_=a=>{const d=ui(a.value);return d?Pn(d):Gs("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",1).pipe(ho(Zo),Qn(a),Ne(u=>{let[,f]=u;return ui(f)}))},cR=()=>zn(navigator.mediaDevices.enumerateDevices()).pipe(Ne(a=>{const d=[],u=[],f=[];return a.forEach(A=>{const{kind:S,deviceId:T,label:w}=A;switch(S){case"audioinput":"communications"===T||/ZoomAudioDevice/i.test(w)||/Zoom-\S*/.test(w)||/CubebAggregateDevice\S*/.test(w)||d.push({deviceId:T,label:w});break;case"audiooutput":"communications"===T||/ZoomAudioDevice/i.test(w)||u.push({deviceId:T,label:w});break;case"videoinput":f.push({deviceId:T,label:w})}}),{microphones:d,speakers:u,cameras:f}}));function C_(a){if(a){let u=a;try{a.width=a.width}catch{var d;u=a.cloneNode(!0),null===(d=a.parentNode)||void 0===d||d.replaceChild(u,a)}return u}return a}function rp(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(CE)}catch{return!1}}function Wu(){var a;return null===(a=WebAssembly)||void 0===a?void 0:a.validate(IE)}function Lm(){return gm()||_m()}const uR=(()=>{const a=new RA;return{withAudioAction:d=>function(){for(var u=arguments.length,f=new Array(u),A=0;A<u;A++)f[A]=arguments[A];return new Promise(function(){var S=L(function*(T,w){let M=!1;const B=setTimeout(()=>{M=!0,w(new Error("Operation Timeout!"))},3e4);try{const G=yield a.acquire();M?G():(clearTimeout(B),T(d(...f)))}catch(G){M||(clearTimeout(B),w(G))}});return function(T,w){return S.apply(this,arguments)}}())},processAudioAction:d=>a.acquire().then(()=>d()),completeAudioAction:()=>{a.release()},cancelAllAudioAction:()=>{a.cancel()}}})();function Bm(a){const d=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(a,{get:(u,f)=>"string"==typeof f&&d.includes(f)?function(){return uR.withAudioAction(u[f].bind(u))(...arguments)}:Reflect.get(u,f)})}function lb(){var a,d;const u=cd()&&Number(null===(a=Ia())||void 0===a||null===(d=a.match(/\d+$/))||void 0===d?void 0:d[0])>=91,f=navigator.hardwareConcurrency>2;return!_m()&&rA()&&M0()&&u&&f}const db=(a,d)=>{const u=document.createElement("link");return u.rel="preload",u.href=a,u.as=d,u.crossOrigin="anonymous",u},ca=(a,d,u)=>{const f=[],A=[],S=Array.isArray(a)?a:[a];return Xp.filter(T=>S.includes(T.category)&&T.tag===d).forEach(T=>{"worker"===T.type?f.push("".concat(u).concat(T.name)):"wasm"===T.type&&A.push("".concat(u).concat(T.name))}),{workers:f,wasms:A}},yd=Do.createAgent();var ON=Object.freeze({__proto__:null,sharePrivilegeChangeEpic:(a,d)=>Mn(a,mc).pipe(Un(u=>{var f;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.lockShare)}),Qn(d),lr(u=>{let[f,A]=u;const{share:{sharePrivilege:S}}=A,{payload:{body:{lockShare:T}}}=f;S!==T&&Et("SHARE_PRIVILEGE_CHANGE",T)}),Ne(u=>{let[f]=u;return rC(f.payload.body.lockShare)})),shareSSrcEpic:a=>Mn(a,20227).pipe(Ne(d=>sC(d.payload.body.ssrc))),shareStatusChangeEpic:(a,d)=>Mn(a,20225).pipe(Qn(d),Un(u=>{let[f,A]=u;const{payload:{body:S}}=f,{share:{isReceiveSharingFromMainSession:T}}=A;return!T||T&&S.fromMainSession}),Ne(u=>{let[f,A]=u;const{share:{isReceiveSharing:S,activeNodeId:T,shareQuality:w,isReceiveSharingFromMainSession:M},breakoutRoom:B}=A,{payload:{body:G}}=f;if(S&&1===G.bStatus){let Z=!1;B?.currentRoom.status===ur.InRoom&&B.mainSessionAttendeeList.length>0&&(Z=B.mainSessionAttendeeList.findIndex(ce=>ce.userId===T)>-1),yd.unsubscribeSharing(T,Z),yd.subscribeSharing(G.activeNodeID,w,M),go.getInstance().switchSharingSource(G.ssrc,M),Et("SHARE_AUTO_CHANGE_SOURCE",{userId:G.activeNodeID})}else if(1===G.bStatus){const Z={activeUserId:G.activeNodeID,isActive:!0};M&&Object.assign(Z,{isFromMainSession:!0}),Et("SHARE_ACTIVE_INDICATION",Z)}else if(S){const Z={activeUserId:G.activeNodeID,isActive:!1};M&&Object.assign(Z,{isFromMainSession:!0}),Et("SHARE_ACTIVE_INDICATION",Z)}return iC(G)})),handleChromeExtensionEpic:a=>Si(a,Or.CheckChromeSharingExtensionResponse).pipe(Ne(d=>(Et("SHARE_CHECK_CHROME_SHARING_EXTENSION",d.payload.data),oC(d.payload.data)))),handleSDKShareSuccessEpic:(a,d)=>Si(a,[Or.SharingDesktopStreamHaveAudio,Or.SharingDesktopStreamHaveNoAudio]).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{meeting:{userId:S},share:{isSharingToBreakoutRoom:T}}=A,{payload:{type:w}}=f;return yd.startSharing(S,{bShareToBO:T,bShareAudio:w===Or.SharingDesktopStreamHaveAudio}),QE(!1)})),handleSDKShareErrorEpic:a=>Si(a,[Or.DesktopSharingError,Or.DesktopSharingChromeExtensionUninstalled,Or.DesktopSharingPermissionDenied,Or.DesktopSharingSystemError]).pipe(tr(d=>{const u=[];let f="";return[Or.DesktopSharingPermissionDenied,Or.DesktopSharingSystemError].includes(d.payload.type)&&(u.push(QE(!0)),d.payload.type===Or.DesktopSharingSystemError?/mac/i.test(navigator.platform)&&(f="To use screen share on Chrome, please allow screen recording access in system setting."):f="To use screen share, please allow the permission request."),Et("SHARE_START_DESKTOP_SHARE_FAILED",{reason:f}),zn(u)})),handleSDKShareDimensionChangeEpic:a=>Si(a,Or.CurrentDesktopSharingWidthHeight).pipe(Un(d=>!!d.payload.data),Ne(d=>{Et("SHARE_DIMENSION_CHANGE",d.payload.data);const{payload:{data:{width:u,height:f}}}=d;return go.getInstance().ajustmentSharingCanvas(u,f),HE(d.payload.data)})),handleSDKReceivedShareSizeChangeEpic:(a,d)=>Si(a,Or.SharingDecodeMaxSize).pipe(Un(u=>!!u.payload.data),Qn(d),Nl(u=>{let[f,A]=u;const{share:{shareQuality:S,activeNodeId:T,isReceiveSharingFromMainSession:w}}=A,{payload:{data:{size:M}}}=f,B=Number(M);if(S!==B)return yd.subscribeSharing(T,B,w),Vc(B)})),handleRWGShareOriginalDimensionEpic:a=>Mn(a,20226).pipe(lr(d=>{var u,f;if(Et("SHARE_RECEIVED_DIMENSION_CHANGE",null===(u=d.payload)||void 0===u?void 0:u.body),null!==(f=d.payload)&&void 0!==f&&f.body){const{payload:{body:{width:A,height:S}}}=d;go.getInstance().ajustmentReceivedSharingCanvas(A,S)}}),Ne(d=>ps(d.payload.body))),handleSDKShareOriginalDimensionEpic:a=>Si(a,Or.SharingPara).pipe(lr(d=>{var u,f;if(Et("SHARE_RECEIVED_DIMENSION_CHANGE",null===(u=d.payload.data)||void 0===u?void 0:u.body),null!==(f=d.payload.data)&&void 0!==f&&f.body){const{payload:{data:{body:{width:A,height:S}}}}=d;go.getInstance().ajustmentReceivedSharingCanvas(A,S)}}),Ne(d=>{var u;return ps(null===(u=d.payload.data)||void 0===u?void 0:u.body)})),handleSDKStopShareEpic:(a,d)=>Si(a,Or.UserStopDesktopSharing).pipe(Qn(d),Ne(u=>{let[,f]=u;const{meeting:{userId:A},share:{status:S}}=f;return S!==W.ShareStatus.End&&(yd.stopSharing(A),Et("SHARE_VIDEO_STREAMS_END")),Rl(W.ShareStatus.End)})),handleRWGCurrentUserShareChangeEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S}}=A,T=f.payload.body.update;return T&&T.length>0&&T.findIndex(w=>w.id===S&&void 0!==w.bShareOn)>-1}),tr(u=>{let[f,A]=u;const{meeting:{userId:S},share:{status:T,isReceiveSharing:w,activeNodeId:M}}=A,{payload:{body:{update:B}}}=f,G=B.find(ue=>ue.id===S&&!1===ue.bShareOn),Z=B.find(ue=>ue.id===S&&!0===ue.bShareOn),ce=[],he=go.getInstance();return G&&T!==W.ShareStatus.End&&(yd.stopSharing(S),he.stopDesktopSharing(),ce.push(Rl(W.ShareStatus.End)),Et("SHARE_PASSIVE_STOP_SHARE")),Z&&T===W.ShareStatus.End&&(w&&(he.stopRenderSharing(),yd.unsubscribeSharing(M),ce.push(jE(!1))),ce.push(Rl(W.ShareStatus.Sharing))),zn(ce)})),handleMultipleShareChangeEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S}}=A,T=f.payload.body.update;return T&&T.length>0&&T.findIndex(w=>w.id!==S&&void 0!==w.bShareOn)>-1}),tr(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{share:{activeNodeId:T,isReceiveSharing:w}}=A,M=xm(A),B=S.filter(Z=>!0===Z.bShareOn&&!1===Z.bSharePause),G=S.filter(Z=>!1===Z.bShareOn);return B.length>0&&B.forEach(Z=>{-1===M.findIndex(ce=>ce.userId===Z.id)&&Et("SHARE_NEW_USER_ADD",Z)}),G.length>0&&(G.forEach(Z=>{Et("SHARE_USER_REMOVE",Z)}),w&&G.some(Z=>Z.id===T))?dc(Mn(a,20225).pipe(ri(1),ai(mt)),du(50).pipe(ai(bi("timeout")))).pipe(cE(()=>{const{share:{activeNodeId:Z,isReceiveSharingFromMainSession:ce,shareQuality:he},audio:ue}=d.value,Se=M.filter(Qe=>Qe.userId!==Z);if(Se.length>0){const Qe=Se[0],{userId:He}=Qe;yd.unsubscribeSharing(Z,ce),yd.subscribeSharing(He,he,ce);const Ke=go.getInstance();return Ke.switchSharingSource(He,ce),ue?.localShareAudioUserMutedList.forEach(et=>{Ke.setSharingAudioVolume(He,et.userId!==He||et.muted,et.isFromMainSession)}),Et("SHARE_AUTO_CHANGE_SOURCE",{userId:He}),Pn(iC({activeNodeID:He,bStatus:1,ssrc:He}))}return mt})):mt})),handleSharingEncryptIndication:(a,d)=>Mn(a,B0).pipe(Qn(d),Qo(u=>{let[f,A]=u;const{payload:{body:{encryptKey:S,additionalType:T}}}=f,{media:{sharingDecodeStatus:w,sharingEncodeStatus:M},meeting:{confId:B,userId:G,zoomId:Z,meetingId:ce,meetingNumber:he,isWebinar:ue}}=A;return S_(d).pipe(Qo(Se=>{let Qe=M;return ue&&Se&&Xa(Se.userRole)&&(Qe="failed"),zc("sharing",Qe,w).pipe(lr(He=>{let[Ke,et]=He;const Lt=go.getInstance(),Gt={userId:G,sn:Cl(Z),confId:B,encryptKey:Cl(S),encryptType:T,meetingId:ce,meetingNumber:he};if(Ke&&Lt?.updateMediaParams({iVType:Bo.SHARING_ENCODE,isFromMainSession:!1,updateParams:Gt}),et){Lt.updateMediaParams({iVType:Bo.SHARING_DECODE,isFromMainSession:!1,updateParams:Gt});const{participants:{attendeesList:jt}}=d.value;if(jt.length>0){const wt=jt.map(sn=>({userid:sn.userId,sn:sn.zoomID&&Cl(sn.zoomID)}));Lt.updateUserMediaSN({added:wt,isFromMainSession:!1,iVType:Bo.SHARING_DECODE})}}}),ai(mt))}))})),handleSharingReceivingChannelReadyEpic:(a,d)=>ad(a,20235).pipe(Qn(d),lr(u=>{let[f,A]=u;const{media:{sharingDecodeStatus:S}}=A,{type:T,payload:{body:w}}=f,M=T==="".concat(or);zc("sharing","success",S).subscribe(B=>{let[,G]=B;G&&go.getInstance().addReceivedSharingChannelType(fn({isFromMainSession:M},w))})}),ai(mt)),handleSharingReceivingChannelCloseEpic:(a,d)=>ad(a,20236).pipe(Qn(d),lr(u=>{let[f,A]=u;const{media:{sharingDecodeStatus:S}}=A,{type:T,payload:{body:{ssrc:w}}}=f,M=T==="".concat(or);zc("sharing","success",S).subscribe(B=>{let[,G]=B;G&&go.getInstance().removeReceivedSharingChannelType({isFromMainSession:M,ssrc:w})})}),ai(mt)),handleReceiveSharingConfirmEpic:a=>Si(a,Or.SharingFirstDecodeFrameReceivedSsrc).pipe(Un(d=>!!d.payload.data),lr(d=>{const{payload:{data:{ssrc:u}}}=d;yd.sendReceivingSharingReady(u)}),ai(mt)),handleReceiveSharingFeedbackEpic:(a,d)=>Mn(a,20233).pipe(Un(()=>!!d.value.share.isRequireReadReceipt),lr(u=>{const{payload:{body:{bReceiveOk:f}}}=u;f&&Et("SHARE_READ_RECEIPT")}),ai(mt))});function Ed(a){for(var d=arguments.length,u=Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];throw Error("[Immer] minified error nr: "+a+(u.length?" "+u.map(function(A){return"'"+A+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ih(a){return!!a&&!!a[ua]}function ip(a){return!!a&&(function(d){if(!d||"object"!=typeof d)return!1;var u=Object.getPrototypeOf(d);if(null===u)return!0;var f=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return f===Object||"function"==typeof f&&Function.toString.call(f)===bd}(a)||Array.isArray(a)||!!a[dR]||!!a.constructor[dR]||DA(a)||hb(a))}function Fm(a,d,u){void 0===u&&(u=!1),0===Um(a)?(u?Object.keys:MC)(a).forEach(function(f){u&&"symbol"==typeof f||d(f,a[f],a)}):a.forEach(function(f,A){return d(A,f,a)})}function Um(a){var d=a[ua];return d?d.i>3?d.i-4:d.i:Array.isArray(a)?1:DA(a)?2:hb(a)?3:0}function OA(a,d){return 2===Um(a)?a.has(d):Object.prototype.hasOwnProperty.call(a,d)}function lR(a,d,u){var f=Um(a);2===f?a.set(d,u):3===f?(a.delete(d),a.add(u)):a[d]=u}function DA(a){return O_&&a instanceof Map}function hb(a){return DN&&a instanceof Set}function _f(a){return a.o||a.t}function op(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var d=hR(a);delete d[ua];for(var u=MC(d),f=0;f<u.length;f++){var A=u[f],S=d[A];!1===S.writable&&(S.writable=!0,S.configurable=!0),(S.get||S.set)&&(d[A]={configurable:!0,writable:!0,enumerable:S.enumerable,value:a[A]})}return Object.create(Object.getPrototypeOf(a),d)}function sp(a,d){return void 0===d&&(d=!1),T_(a)||ih(a)||!ip(a)||(Um(a)>1&&(a.set=a.add=a.clear=a.delete=I_),Object.freeze(a),d&&Fm(a,function(u,f){return sp(f,!0)},!0)),a}function I_(){Ed(2)}function T_(a){return null==a||"object"!=typeof a||Object.isFrozen(a)}function ap(a){var d=D_[a];return d||Ed(18,a),d}function pb(){return Ab}function w_(a,d){d&&(ap("Patches"),a.u=[],a.s=[],a.v=d)}function oh(a){cp(a),a.p.forEach(R_),a.p=null}function cp(a){a===Ab&&(Ab=a.l)}function fb(a){return Ab={p:[],l:Ab,h:a,m:!0,_:0}}function R_(a){var d=a[ua];0===d.i||1===d.i?d.j():d.O=!0}function mb(a,d){d._=d.p.length;var u=d.p[0],f=void 0!==a&&a!==u;return d.h.g||ap("ES5").S(d,a,f),f?(u[ua].P&&(oh(d),Ed(4)),ip(a)&&(a=kA(d,a),d.l||gb(d,a)),d.u&&ap("Patches").M(u[ua],a,d.u,d.s)):a=kA(d,u,[]),oh(d),d.u&&d.v(d.u,d.s),a!==Ni?a:void 0}function kA(a,d,u){if(T_(d))return d;var f=d[ua];if(!f)return Fm(d,function(S,T){return ts(a,f,d,S,T,u)},!0),d;if(f.A!==a)return d;if(!f.P)return gb(a,f.t,!0),f.t;if(!f.I){f.I=!0,f.A._--;var A=4===f.i||5===f.i?f.o=op(f.k):f.o;Fm(3===f.i?new Set(A):A,function(S,T){return ts(a,f,A,S,T,u)}),gb(a,A,!1),u&&a.u&&ap("Patches").R(f,u,a.u,a.s)}return f.o}function ts(a,d,u,f,A,S){if(ih(A)){var T=kA(a,A,S&&d&&3!==d.i&&!OA(d.D,f)?S.concat(f):void 0);if(lR(u,f,T),!ih(T))return;a.m=!1}if(ip(A)&&!T_(A)){if(!a.h.F&&a._<1)return;kA(a,A),d&&d.A.l||gb(a,A)}}function gb(a,d,u){void 0===u&&(u=!1),a.h.F&&a.m&&sp(d,u)}function DC(a,d){var u=a[ua];return(u?_f(u):a)[d]}function _b(a,d){if(d in a)for(var u=Object.getPrototypeOf(a);u;){var f=Object.getOwnPropertyDescriptor(u,d);if(f)return f;u=Object.getPrototypeOf(u)}}function NA(a){a.P||(a.P=!0,a.l&&NA(a.l))}function kC(a){a.o||(a.o=op(a.t))}function vb(a,d,u){var f=DA(d)?ap("MapSet").N(d,u):hb(d)?ap("MapSet").T(d,u):a.g?function(A,S){var T=Array.isArray(A),w={i:T?1:0,A:S?S.A:pb(),P:!1,I:!1,D:{},l:S,t:A,k:null,o:null,j:null,C:!1},M=w,B=yb;T&&(M=[w],B=Ku);var G=Proxy.revocable(M,B),Z=G.revoke,ce=G.proxy;return w.k=ce,w.j=Z,ce}(d,u):ap("ES5").J(d,u);return(u?u.A:pb()).p.push(f),f}function sh(a,d){switch(d){case 2:return new Map(a);case 3:return Array.from(a)}return op(a)}var NC,Ab,PC=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),O_=typeof Map<"u",DN=typeof Set<"u",vf=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",Ni=PC?Symbol.for("immer-nothing"):((NC={})["immer-nothing"]=!0,NC),dR=PC?Symbol.for("immer-draftable"):"__$immer_draftable",ua=PC?Symbol.for("immer-state"):"__$immer_state",bd=""+Object.prototype.constructor,MC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,hR=Object.getOwnPropertyDescriptors||function(a){var d={};return MC(a).forEach(function(u){d[u]=Object.getOwnPropertyDescriptor(a,u)}),d},D_={},yb={get:function(a,d){if(d===ua)return a;var A,w,M,u=_f(a);if(!OA(u,d))return A=a,(M=_b(u,d))?"value"in M?M.value:null===(w=M.get)||void 0===w?void 0:w.call(A.k):void 0;var f=u[d];return a.I||!ip(f)?f:f===DC(a.t,d)?(kC(a),a.o[d]=vb(a.A.h,f,a)):f},has:function(a,d){return d in _f(a)},ownKeys:function(a){return Reflect.ownKeys(_f(a))},set:function(a,d,u){var T,w,f=_b(_f(a),d);if(f?.set)return f.set.call(a.k,u),!0;if(!a.P){var A=DC(_f(a),d),S=A?.[ua];if(S&&S.t===u)return a.o[d]=u,a.D[d]=!1,!0;if(((T=u)===(w=A)?0!==T||1/T==1/w:T!=T&&w!=w)&&(void 0!==u||OA(a.t,d)))return!0;kC(a),NA(a)}return a.o[d]===u&&"number"!=typeof u&&(void 0!==u||d in a.o)||(a.o[d]=u,a.D[d]=!0,!0)},deleteProperty:function(a,d){return void 0!==DC(a.t,d)||d in a.t?(a.D[d]=!1,kC(a),NA(a)):delete a.D[d],a.o&&delete a.o[d],!0},getOwnPropertyDescriptor:function(a,d){var u=_f(a),f=Reflect.getOwnPropertyDescriptor(u,d);return f&&{writable:!0,configurable:1!==a.i||"length"!==d,enumerable:f.enumerable,value:u[d]}},defineProperty:function(){Ed(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){Ed(12)}},Ku={};Fm(yb,function(a,d){Ku[a]=function(){return arguments[0]=arguments[0][0],d.apply(this,arguments)}}),Ku.deleteProperty=function(a,d){return yb.deleteProperty.call(this,a[0],d)},Ku.set=function(a,d,u){return yb.set.call(this,a[0],d,u,a[0])};var Yc=new(function(){function a(u){var f=this;this.g=vf,this.F=!0,this.produce=function(A,S,T){if("function"==typeof A&&"function"!=typeof S){var w=S;S=A;var M=f;return function(he){var ue=this;void 0===he&&(he=w);for(var Se=arguments.length,Qe=Array(Se>1?Se-1:0),He=1;He<Se;He++)Qe[He-1]=arguments[He];return M.produce(he,function(Ke){var et;return(et=S).call.apply(et,[ue,Ke].concat(Qe))})}}var B;if("function"!=typeof S&&Ed(6),void 0!==T&&"function"!=typeof T&&Ed(7),ip(A)){var G=fb(f),Z=vb(f,A,void 0),ce=!0;try{B=S(Z),ce=!1}finally{ce?oh(G):cp(G)}return typeof Promise<"u"&&B instanceof Promise?B.then(function(he){return w_(G,T),mb(he,G)},function(he){throw oh(G),he}):(w_(G,T),mb(B,G))}if(!A||"object"!=typeof A)return(B=S(A))===Ni?void 0:(void 0===B&&(B=A),f.F&&sp(B,!0),B);Ed(21,A)},this.produceWithPatches=function(A,S){return"function"==typeof A?function(M){for(var B=arguments.length,G=Array(B>1?B-1:0),Z=1;Z<B;Z++)G[Z-1]=arguments[Z];return f.produceWithPatches(M,function(ce){return A.apply(void 0,[ce].concat(G))})}:[f.produce(A,S,function(M,B){T=M,w=B}),T,w];var T,w},"boolean"==typeof u?.useProxies&&this.setUseProxies(u.useProxies),"boolean"==typeof u?.autoFreeze&&this.setAutoFreeze(u.autoFreeze)}var d=a.prototype;return d.createDraft=function(u){var S;ip(u)||Ed(8),ih(u)&&(ih(S=u)||Ed(22,S),u=function T(w){if(!ip(w))return w;var M,B=w[ua],G=Um(w);if(B){if(!B.P&&(B.i<4||!ap("ES5").K(B)))return B.t;B.I=!0,M=sh(w,G),B.I=!1}else M=sh(w,G);return Fm(M,function(Z,ce){var he,ue;B&&(ue=Z,(2===Um(he=B.t)?he.get(ue):he[ue])===ce)||lR(M,Z,T(ce))}),3===G?new Set(M):M}(S));var f=fb(this),A=vb(this,u,void 0);return A[ua].C=!0,cp(f),A},d.finishDraft=function(u,f){var A=(u&&u[ua]).A;return w_(A,f),mb(void 0,A)},d.setAutoFreeze=function(u){this.F=u},d.setUseProxies=function(u){u&&!vf&&Ed(20),this.g=u},d.applyPatches=function(u,f){var A;for(A=f.length-1;A>=0;A--){var S=f[A];if(0===S.path.length&&"replace"===S.op){u=S.value;break}}A>-1&&(f=f.slice(A+1));var T=ap("Patches").$;return ih(u)?T(u,f):this.produce(u,function(w){return T(w,f)})},a}()),Pt=Yc.produce;Yc.produceWithPatches.bind(Yc),Yc.setAutoFreeze.bind(Yc),Yc.setUseProxies.bind(Yc),Yc.applyPatches.bind(Yc),Yc.createDraft.bind(Yc),Yc.finishDraft.bind(Yc);const Eb={ssrc:0,status:W.ShareStatus.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:Bu.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isRemoteControlApproved:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1},Sd=na({["".concat(rC)]:Pt((a,d)=>{let{payload:u}=d;a.sharePrivilege=u}),["".concat(iC)]:Pt((a,d)=>{let{payload:u}=d;a.isRemoteSharingActive=1===u.bStatus,a.activeNodeId=u.activeNodeID,a.activeSsrc=u.ssrc}),["".concat(jE)]:Pt((a,d)=>{let{payload:u}=d;a.isReceiveSharing=u}),["".concat(oC)]:Pt((a,d)=>{let{payload:u}=d;a.isChromeExtensionInstalled=u}),["".concat(HE)]:Pt((a,d)=>{let{payload:u}=d;a.shareDimension=fn({},u)}),["".concat(Rl)]:Pt((a,d)=>{let{payload:u}=d;a.status=u}),["".concat(sC)]:Pt((a,d)=>{let{payload:u}=d;a.ssrc=u}),["".concat(Vc)]:Pt((a,d)=>{let{payload:u}=d;a.shareQuality=u}),["".concat(ps)]:Pt((a,d)=>{let{payload:u}=d;a.receivedShareDimension=fn({},u)}),["".concat(GE)]:Pt((a,d)=>{let{payload:u}=d;a.isRemoteControlApproved=u}),["".concat(xw)]:Pt((a,d)=>{let{payload:u}=d;a.isGrabRemoteControl=u}),["".concat(WE)]:Pt((a,d)=>{let{payload:u}=d;a.isVerifiedRenderCanvasAfterFailover=u}),["".concat(KE)]:Pt((a,d)=>{let{payload:u}=d;a.isVerifiedCaptureCanvasAfterFailover=u}),["".concat(aC)]:Pt((a,d)=>{let{payload:u}=d;a.isSDKGrabControl=u}),["".concat(Lw)]:Pt((a,d)=>{let{payload:u}=d;a.isReceiveSharingFromMainSession=u}),["".concat(bo)]:Pt((a,d)=>{let{payload:u}=d;a.isSharingToBreakoutRoom=u}),["".concat(jc)]:Pt((a,d)=>{let{payload:u}=d;a.isSharingWithSecondCamera=u}),["".concat(fA)]:Pt((a,d)=>{let{payload:u}=d;a.secondCameraId=u}),["".concat(Jr)]:Pt((a,d)=>{let{payload:u}=d;a.isRequireReadReceipt=u}),["".concat(Qc)]:()=>fn(fn({},Eb),{},{isVerifiedRenderCanvasAfterFailover:!1,isVerifiedCaptureCanvasAfterFailover:!1})},Eb),pR=xu(ON),Oa=Do.createAgent();var kN=Object.freeze({__proto__:null,joinMeetingWelcomeEpic:a=>Mn(a,0).pipe(lr(d=>{var u;if("READY"===(null===(u=d.payload.body)||void 0===u?void 0:u.status)){const f=ar.get(hs.WebclientMeetingToken);f&&Oa.joinMeeting(f)}}),ai(mt)),joinMeetingSuccessfulEpic:(a,d)=>Mn(a,4098).pipe(Qn(d),aR(u=>{let[f,A]=u;const{payload:{body:{res:S,userID:T,zoomID:w,mn:M,participantID:B,hugeBO:G,elapsed:Z,disableAqos:ce,disableVqos:he,meetingtoken:ue,role:Se}}}=f,{meeting:{pingRWCTimestamp:Qe,isWebinar:He,userEmail:Ke,userName:et,isMeetingReset:Lt,meetingOptions:Gt,zlkJwtToken:jt,cv:wt,apiKey:sn,zsk:hn,signatureType:vn},media:{mediaConstraints:ln,assetsPath:Qt},breakoutRoom:Bn}=A;if(Lo.CONF_SUCCESS===S){const{WebclientParticipantId:gr,WebclientUserId:At,WebclientZoomId:ut,WebclientUserEmail:Be,WebclientUserName:$e,WebclientMeetingToken:St}=hs;ar.set(At,T,Vi.SessionStorage),ar.set(ut,w,Vi.SessionStorage),ar.set(gr,B,Vi.SessionStorage),Ke&&ar.set(Be,Ke,Vi.SessionStorage),ar.set($e,et,Vi.SessionStorage),ue&&ar.set(St,ue,Vi.SessionStorage),Oa.sendRWGConnectionPerformance("WCL_M, JMCT(".concat(performance.now()-Qe,")")),hn&&Oa.sendSdkKeyToMonitor(vn,sn,T);const lt=[oa(f.payload.body),pm(performance.now())];go.getInstance().init(),Lt&&(lt.push(sa(!1)),void 0!==ln&&void 0!==Qt&&lt.push(ds())),(jt||He)&&lt.push(mr()),Bn&&(Gt&&(lt.push(vC(G&&!0===Gt.isBO100Enabled)),lt.push(Zw({isEnableBreakoutRoom:Gt.isEnableBreakoutRoom,isEnableBOBroadcast:Gt.isEnableBOBroadcast}))),Bn.currentRoom.boConfId&&lt.push(Lc()),void 0!==Z&&lt.push(Mm(Z)));let Ut=!he;const an=!ce;return jt&&cN(wt,"1.3.0")<0&&(Ut=!1),lt.unshift(Ca({audioQos:an,videoQos:Ut})),(Se&Tl.Owner)===Tl.Owner&&(Et(Wo,{reason:"dont support assisnt join through widget",errorCode:-1}),Oa.leaveMeeting()),Et("JOIN_MEETING_SUCCESS",{meetingNumber:M}),zn(lt)}return Lo.CONF_FAIL_CONFLOCKED===S?Et(Wo,_E(S)):Lo.CONF_FAIL_CONF_USER_FULL===S?Et(Wo,Object.assign({},_E(S),{lmUrl:f.payload.body.lmURL})):(Lo.CONF_FAIL_MEETING_OVER===S||Lo.CONF_RESULT_MMR_IB_REJECT===S||Lo.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===S||[Lo.CONF_FAIL_HAS_BEEN_REMOVED,Lo.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(S),Et(Wo,_E(S))),zn(wA(A,!1))})),handleMeetingAttributeChangeEpic:(a,d)=>Mn(a,mc).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{payload:{body:S}}=f,{meeting:{zoomId:T,encType:w,gcmSessinKey:M}}=A;if(void 0!==S?.encryptKey&&fc.init(T,S.encryptKey,w),void 0!==S?.gatewayKey){const B=go.getInstance(),[,G,Z]=S.gatewayKey.split(".");B.sendUserNodeList([{userid:Number(G),sn:Z&&Cl(Z)}],M)}return Et("UPDATE_MEETING_ATTRIBUTE",S),Qh(S)})),handleMeetingEndEpic:(a,d)=>Mn(a,7939).pipe(Qn(d),tr(u=>{let[f,A]=u;const{payload:{body:S}}=f;if(void 0!==S.reason){if(Lu.Reconnect===S.reason)return Et("RECONNECTING_MEETING",Bc.WaitingRoomFailover===S.subReason?{reason:aa.OnHold}:{reason:aa.Failover}),Pn(ia());Lu.KickedByHost===S.reason?Et("LEAVING_MEETING",{reason:"kicked by host"}):[Lu.EndByHost,Lu.EndByNone,Lu.EndByAdmin,Lu.EndByHostStartAnotherMeeting].includes(S.reason)?Et("LEAVING_MEETING",{reason:"ended by host"}):Lu.FreeMeetingTimeout===S.reason&&Et("LEAVING_MEETING",{reason:"free meeting ended"})}return A.meeting.isMeetingReset?mt:zn(wA(A,!1))})),meetingFailoverEpic:(a,d)=>a.pipe(Ui("".concat(ia)),Qn(d),tr(u=>{let[,f]=u;const A=wA(f,!0);let S;if(f.meeting.zlkJwtToken){const T=function(M){if(M){const{meeting:{topic:B,passWord:G,userName:Z,zlkJwtToken:ce,lang:he,cv:ue,customerKey:Se}}=M;return{topic:B,passWord:G,userName:Z,zlkJwtToken:ce,lang:he,cv:ue,customerKey:Se}}return null}(f);S=Pn(R0({topic:T?.topic,password:T?.passWord,userName:T?.userName,zlk:T?.zlkJwtToken,lang:T?.lang,cv:T?.cv,customerKey:T?.customerKey})).pipe(ta(1e3))}else{const T=function(w){const{meeting:{apiKey:M,signature:B,signatureType:G,meetingNumber:Z,userName:ce,lang:he,passWord:ue,userEmail:Se,sdkUrl:Qe,sdkOrigin:He,proxy:Ke,cv:et,ztk:Lt,zsk:Gt,tk:jt}}=w,wt=Lt||sessionStorage.getItem(hs.WebclientZtk),sn=Gt||sessionStorage.getItem(hs.WebclientZsk);return{apiKey:M,signature:B,signatureType:G,meetingNumber:Z,userName:ce,lang:he,passWord:ue,userEmail:Se,sdkUrl:Qe,sdkOrigin:He,proxy:Ke,cv:et,ztk:wt,zsk:sn,tk:jt||sessionStorage.getItem(hs.WebclientTk),ulsm:sn?1:0}}(f);S=Pn(GB(T)).pipe(ta(1e3))}return Uv(zn(A),S)})),hostChangeEpic:a=>ad(a,7940).pipe(lr(d=>{Et("MEETING_HOST_CHANGE_INDICATION",d.payload.body.bHost)}),Ne(d=>yE(d.payload.body))),cohostChangeEpic:a=>ad(a,7941).pipe(lr(d=>{Et("MEETING_COHOST_CHANGE_INDICATION",d.payload.body.bCoHost)}),Ne(d=>Aw(d.payload.body))),setMeetingOptEpic:a=>ad(a,7945).pipe(lr(d=>{const{payload:{body:{opt:u}}}=d;ar.set(hs.WebclientOpt,u,Vi.SessionStorage)}),ai(mt)),setMeetingOnHoldEpic:(a,d)=>Mn(a,7942).pipe(lr(u=>{const{payload:{body:{bHold:f}}}=u;ar.set(hs.WebclientIsOnHold,f?1:0,Vi.SessionStorage),Et("MEETING_IN_WAITING_ROOM",f)}),Qn(d),tr(u=>{let[f,A]=u;const S=[s_(f.payload.body.bHold)];if(f.payload.body.bHold){const T=ui(A);if(T){S.push(yw({audio:T.audio,video:T.bVideoOn,muted:T.muted}));const w=go.getInstance();if("computer"===T.audio&&(w.leaveComputerAudio(),Oa.joinOrLeaveVoip(!1)),T.bVideoOn&&w.stopCaptureVideo(),T.sharerOn&&(Oa.stopSharing(T.userId),w.stopDesktopSharing(),S.push(Rl(W.ShareStatus.End))),A.video&&A.video.subscribedVideoList.length>0&&A.video.subscribedVideoList.forEach(M=>{Oa.unsubscribeVideo(M)}),A.share&&A.share.isReceiveSharing){const M=A.share.activeNodeId;A.share.isRemoteControlApproved&&(Oa.sharingRequestRemoteControl(M,!1),w.stopRemoteControl()),Oa.unsubscribeSharing(M),w.stopRenderSharing()}}}return zn(S)})),setMeetingDataCenterRegionEpic:a=>Mn(a,7954).pipe(Ne(d=>Ew(d.payload.body))),claimHostResponseEpic:a=>Mn(a,4216).pipe(lr(d=>{Et("MEETING_CLAIM_HOST_KEY_RESPONSE",d.payload.body.bresult)}),ai(mt)),leaveMeetingEpic:(a,d)=>a.pipe(Ui("".concat(Xv),"".concat(za)),Qn(d),tr(u=>{let[f,A]=u;return f.type==="".concat(Xv)?(Oa.leaveMeeting(),Et("LEAVING_MEETING",{})):f.type==="".concat(za)&&(Oa.endMeeting(),Et("LEAVING_MEETING",{})),zn(wA(A,!1))})),versionUpgradeEpic:a=>Mn(a,2).pipe(lr(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),ai(mt)),versionBlockEpic:a=>Mn(a,1).pipe(lr(d=>{const{payload:{body:{upgradeVersion:u}}}=d,f=_E(1e3);if(f&&f.reason){const A=f.reason.replace(/{(\d+)}/g,()=>u);f.reason=A}Et(Wo,f)}),ai(mt)),handleSharePronounChangeEpic:a=>Mn(a,4265).pipe(Ne(d=>{const{payload:{body:u}}=d,{nShareType:f}=u;return Et("SHARE_PRONOUN_TYPE_UPDATE",{userSharePronounType:f}),EE(f)})),handleMeetingTokenEpic:a=>Mn(a,4128).pipe(lr(d=>{const{payload:{body:{meetingtoken:u}}}=d,{WebclientMeetingToken:f}=hs;u&&ar.set(f,u,Vi.SessionStorage)}),ai(mt))});let fR,Da,mR,Pl,gu,Ml;(function(a){a[a.AttendeeToAllPanelist=1]="AttendeeToAllPanelist",a[a.PanelistToAttendee=3]="PanelistToAttendee"})(fR||(fR={})),function(a){a.Add="add",a.List="list",a.Remove="memberremove",a.rename="rename",a.update="UPDATE"}(Da||(Da={})),function(a){a.PutDownHands="putdownhands",a.LowerHand="lowerhand"}(mR||(mR={})),function(a){a.Open="open",a.Message="message",a.Error="error",a.Close="close"}(Pl||(Pl={}));let k_=(()=>{class a{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new a),this.xmppInstance}on(u,f){let A=this.eventHandlers.get(u);A||(A=[]),A.push(f),this.eventHandlers.set(u,A)}off(u,f){const A=this.eventHandlers.get(u);if(A){const S=A.filter(T=>T!==f);this.eventHandlers.set(u,S)}}emit(u,f){const A=this.eventHandlers.get(u);A&&A instanceof Array&&A.slice(0).forEach(S=>{try{S(f)}catch(T){console.error(T)}})}sendMessageToRwg(u){this.seq+=1;const f=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:f}))),f}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.emit(Pl.Open,u)}),this.websocket.addEventListener("message",u=>{const{data:f}=u;var A;if(f instanceof ArrayBuffer)0===new Uint8Array(f)[0]&&(null===(A=this.websocket)||void 0===A||A.send(f));else try{this.emit(Pl.Message,JSON.parse(f))}catch{console.warn("Unsupported format",f)}}),this.websocket.addEventListener("close",u=>{this.emit(Pl.Close,u)}),this.websocket.addEventListener("error",u=>{this.emit(Pl.Error,u)}))}join(u){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:u}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(u){return{seq:this.sendMessageToRwg({evt:24578,jids:u||[]})}}sendWebinarMseeage(u,f,A){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:u,jid:f?[f]:[],type:A,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(u,f,A){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:f.jid,question_attendeename:f.displayName,question_text:f.questionText,question_id:f.questionId,question_anonymous:f.isAnonymous,question_time:f.questionTime,text:u,isPrivate:A}})}}answerOnline(u,f){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,isLiveStart:f}})}}dismissQuestion(u){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!1}})}}deleteQuestion(u){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:u,bDelete:!0}})}}deleteComment(u){return{seq:this.sendMessageToRwg({body:{comment_id:u,bDelete:!0},evt:24616})}}reopenQuestion(u){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!0},evt:24590})}}askQuestion(u,f){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=arguments.length>3?arguments[3]:void 0;const T=_w();return{seq:this.sendMessageToRwg({body:{id:T,text:u,isAnonymous:A,bAllowAttendeeViewAllQuestion:S,name:f},evt:24592}),questionId:T}}upOrDownVote(u,f){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bUpVote:f},evt:24598})}}rename(u,f){return{seq:this.sendMessageToRwg({body:{jid:u,displayName:f},evt:24600})}}setSkinTome(u){return{seq:this.sendMessageToRwg({body:{skinTone:u},evt:24618})}}}return a.xmppInstance=null,a})();var NN=Object.freeze({__proto__:null,startIdleTimerEpic:(a,d)=>a.pipe(Ui("".concat(oa)),Qn(d),Un(u=>{let[,f]=u;return void 0!==f.meeting.zlkJwtToken}),Qo(()=>(gu&&gu.complete(),gu=new ht,Ml=Wg(6e4).pipe(Ne(()=>performance.now())).subscribe(gu),gu.pipe(Ne(u=>AE(u)))))),terminateIdleTimerEpic:a=>a.pipe(Ui("".concat(ra))).pipe(lr(()=>{gu&&(gu.complete(),Ml.unsubscribe())}),ai(mt)),idleCheckingEpic:(a,d)=>a.pipe(Ui("".concat(AE)),Qn(d),tr(u=>{var f;let[A,S]=u;const{meeting:{idleStartTime:T,sessionIdleTimeoutMins:w,isOriginHost:M},participants:{attendeesList:B,xmppAttendeeList:G},recording:Z,breakoutRoom:ce}=S,he=A.payload,ue=[];if(1===B.length&&0===G.length&&(null==ce||null===(f=ce.currentRoom)||void 0===f?void 0:f.status)!==ur.InRoom&&Z?.cmrStatus!==gc.Start)if(T){const Se=M&&z0(B[0].userRole)?w:40;he-T>60*Se*1e3&&(console.warn("No active for ".concat(Se," minutes, will end the session.")),ue.push(za()),du(500).subscribe(()=>{K0()}))}else ue.push(Hh(he));else ue.push(Hh(void 0));return zn(ue)})),resetIdleStartTimeEpic:(a,d)=>a.pipe(Ui("".concat(Is)),Un(u=>[Ts,mc].includes(u.payload.evt)&&void 0!==d.value.meeting.idleStartTime),ho(Ss),tr(()=>{var u;const{participants:{attendeesList:f,xmppAttendeeList:A},recording:S,breakoutRoom:T}=d.value,w=[];return(f.length>1||A.length>0||S?.cmrStatus===gc.Start||(null==T||null===(u=T.currentRoom)||void 0===u?void 0:u.status)===ur.InRoom)&&w.push(Hh(void 0)),zn(w)})),resetIdleStartTimeAfterLeaveMeetingEpic:a=>a.pipe(Ui("".concat(Xv),"".concat(za)),hc(Hh(void 0)))});let qc=null;var gR=Object.freeze({__proto__:null,startStayAwakeEpic:(a,d)=>a.pipe(Ui("".concat(oa)),Qn(d),Un(u=>{let[,f]=u;return!!f.meeting.stayAwake}),lr(L(function*(){try{qc&&qc.release().then(()=>{qc=null}),qc=yield navigator.wakeLock.request("screen"),qc.addEventListener("release",()=>{})}catch{}})),Qo(()=>Ds(document,"visibilitychange").pipe(tr(L(function*(){return"visible"===document.visibilityState?(qc&&qc.release().then(()=>{qc=null}),qc=yield navigator.wakeLock.request("screen")):qc&&qc.release().then(()=>{qc=null}),mt}))))),cancelStayAwakeEpic:a=>a.pipe(Ui("".concat(ra))).pipe(lr(()=>{qc&&qc.release().then(()=>{qc=null})}),ai(mt))}),_R=typeof window<"u"&&window,JB=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,vR=typeof global<"u"&&global,zu=_R||vR||JB;function AR(a,d){return void 0===d&&(d=null),new Af({method:"GET",url:a,headers:d})}function PN(a,d,u){return new Af({method:"POST",url:a,body:d,headers:u})}function yR(a,d){return new Af({method:"DELETE",url:a,headers:d})}function MN(a,d,u){return new Af({method:"PUT",url:a,body:d,headers:u})}function xN(a,d,u){return new Af({method:"PATCH",url:a,body:d,headers:u})}!function(){if(!zu)throw new Error("RxJS could not find any global context (window, self, global)")}();var _u=Ne(function(a,d){return a.response});function LN(a,d){return _u(new Af({method:"GET",url:a,responseType:"json",headers:d}))}var Af=function(a){function d(f){var A=a.call(this)||this,S={async:!0,createXHR:function(){return this.crossDomain?function(){if(zu.XMLHttpRequest)return new zu.XMLHttpRequest;if(zu.XDomainRequest)return new zu.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(zu.XMLHttpRequest)return new zu.XMLHttpRequest;var w=void 0;try{for(var M=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],B=0;B<3;B++)try{if(new zu.ActiveXObject(w=M[B]))break}catch{}return new zu.ActiveXObject(w)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof f)S.url=f;else for(var T in f)f.hasOwnProperty(T)&&(S[T]=f[T]);return A.request=S,A}var u;return te(d,a),d.prototype._subscribe=function(f){return new ER(f,this.request)},d.create=((u=function(f){return new d(f)}).get=AR,u.post=PN,u.delete=yR,u.put=MN,u.patch=xN,u.getJSON=LN,u),d}(ze),ER=function(a){function d(u,f){var A=a.call(this,u)||this;A.request=f,A.done=!1;var S=f.headers=f.headers||{};return f.crossDomain||A.getHeader(S,"X-Requested-With")||(S["X-Requested-With"]="XMLHttpRequest"),A.getHeader(S,"Content-Type")||zu.FormData&&f.body instanceof zu.FormData||void 0===f.body||(S["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),f.body=A.serializeBody(f.body,A.getHeader(f.headers,"Content-Type")),A.send(),A}return te(d,a),d.prototype.next=function(u){this.done=!0;var f,A=this.xhr,S=this.request,T=this.destination;try{f=new BN(u,A,S)}catch(w){return T.error(w)}T.next(f)},d.prototype.send=function(){var u=this.request,f=this.request,A=f.user,S=f.method,T=f.url,w=f.async,M=f.password,B=f.headers,G=f.body;try{var Z=this.xhr=u.createXHR();this.setupEvents(Z,u),A?Z.open(S,T,w,A,M):Z.open(S,T,w),w&&(Z.timeout=u.timeout,Z.responseType=u.responseType),"withCredentials"in Z&&(Z.withCredentials=!!u.withCredentials),this.setHeaders(Z,B),G?Z.send(G):Z.send()}catch(ce){this.error(ce)}},d.prototype.serializeBody=function(u,f){if(!u||"string"==typeof u||zu.FormData&&u instanceof zu.FormData)return u;if(f){var A=f.indexOf(";");-1!==A&&(f=f.substring(0,A))}switch(f){case"application/x-www-form-urlencoded":return Object.keys(u).map(function(S){return encodeURIComponent(S)+"="+encodeURIComponent(u[S])}).join("&");case"application/json":return JSON.stringify(u);default:return u}},d.prototype.setHeaders=function(u,f){for(var A in f)f.hasOwnProperty(A)&&u.setRequestHeader(A,f[A])},d.prototype.getHeader=function(u,f){for(var A in u)if(A.toLowerCase()===f.toLowerCase())return u[A]},d.prototype.setupEvents=function(u,f){var A,S,T=f.progressSubscriber;function w(G){var Z,he=w.subscriber,ue=w.progressSubscriber,Se=w.request;ue&&ue.error(G);try{Z=new LC(this,Se)}catch(Qe){Z=Qe}he.error(Z)}function M(G){}function B(G){var ce=B.subscriber,he=B.progressSubscriber,ue=B.request;if(4===this.readyState){var Se=1223===this.status?204:this.status;if(0===Se&&(Se=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),Se<400)he&&he.complete(),ce.next(G),ce.complete();else{he&&he.error(G);var He=void 0;try{He=new xC("ajax error "+Se,this,ue)}catch(Ke){He=Ke}ce.error(He)}}}u.ontimeout=w,w.request=f,w.subscriber=this,w.progressSubscriber=T,u.upload&&"withCredentials"in u&&(T&&(A=function(G){A.progressSubscriber.next(G)},zu.XDomainRequest?u.onprogress=A:u.upload.onprogress=A,A.progressSubscriber=T),u.onerror=S=function(G){var Z,he=S.progressSubscriber,ue=S.subscriber,Se=S.request;he&&he.error(G);try{Z=new xC("ajax error",this,Se)}catch(Qe){Z=Qe}ue.error(Z)},S.request=f,S.subscriber=this,S.progressSubscriber=T),u.onreadystatechange=M,M.subscriber=this,M.progressSubscriber=T,M.request=f,u.onload=B,B.subscriber=this,B.progressSubscriber=T,B.request=f},d.prototype.unsubscribe=function(){var f=this.xhr;!this.done&&f&&4!==f.readyState&&"function"==typeof f.abort&&f.abort(),a.prototype.unsubscribe.call(this)},d}(re),BN=function(a,d,u){this.originalEvent=a,this.xhr=d,this.request=u,this.status=d.status,this.responseType=d.responseType||u.responseType,this.response=bR(this.responseType,d)},xC=function(){function a(d,u,f){return Error.call(this),this.message=d,this.name="AjaxError",this.xhr=u,this.request=f,this.status=u.status,this.responseType=u.responseType||f.responseType,this.response=bR(this.responseType,u),this}return a.prototype=Object.create(Error.prototype),a}();function bR(a,d){switch(a){case"json":return"response"in(u=d)?u.responseType?u.response:JSON.parse(u.response||u.responseText||"null"):JSON.parse(u.responseText||"null");case"xml":return d.responseXML;default:return"response"in d?d.response:d.responseText}var u}var LC=function(a,d){return xC.call(this,"ajax timeout",a,d),this.name="AjaxTimeoutError",this},BC=Af.create;const FC=a=>{const{meeting:{encryptedRWC:d,encryptedGEORWC:u,discardedRwcList:f,meetingOptions:A}}=a;let S=[];return A?.isEnableGeoFenceRWC&&u&&u?.length>0?S=u.filter(T=>!f.includes(T.rwc)).reduce((T,w)=>{const{dl:M,rwc:B,rwcToken:G}=w,Z=T.find(ce=>ce.dl===M);if(Z)Z.items.push({rwc:B,rwcToken:G});else{const ce={dl:M,items:[]};ce.items.push({rwc:B,rwcToken:G}),T.push(ce)}return T},[]):d&&(S=[{dl:0,items:Object.keys(d).map(T=>({rwc:T,rwcToken:d[T]}))}]),S},bb=a=>Zs(...a.map(d=>0===d.dl?zn(d.items):du(d.dl).pipe(tr(()=>zn(d.items))))),ei=(a,d)=>a.pipe(Ui("".concat(Jv)),Qn(d),Un(u=>{let[,f]=u;return void 0!==f.meeting.encryptedRWC||void 0!==f.meeting.encryptedGEORWC&&f.meeting.encryptedGEORWC.length>0}),Qo(u=>{let[,f]=u;const{meeting:{ts:A,auth:S,meetingNumber:T,meetingOptions:w},breakoutRoom:M}=f,B=w?.isEnableGeoFenceRWC,G=FC(f);if(G.length>0){const Z={serversLength:G.reduce((he,ue)=>he+ue.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let ce;return B&&(ce=new Xe,bb(G).subscribe(he=>{var ue;return null===(ue=ce)||void 0===ue?void 0:ue.next(he)})),(B?ce:bb(G)).pipe(Yg(()=>{const{meeting:{meetingStatus:he}}=d.value,ue=he===vs.Initial&&Z.pingFailedServerList.length<Z.serversLength&&Z.serversLength>0;return!ue&&ce&&ce.complete(),ue}),lr(()=>{if(Z.pingRwcServerCounts=Z.pingRwcServerCounts+1,B&&Z.pingRwcServerCounts===Z.serversLength){const he=1e3*Math.floor(5*Math.pow(2,Z.retryCounts));Z.retryCounts=Z.retryCounts+1,du(he).pipe(Ne(()=>{const ue=FC(d.value);return Object.assign(Z,{serversLength:ue.reduce((Se,Qe)=>Se+Qe.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),ue})).subscribe(ue=>{bb(ue).subscribe(Se=>{ce.next(Se)})})}}),tr(he=>{const{rwc:ue,rwcToken:Se}=he,Qe=((He,Ke,et,Lt,Gt,jt)=>{const wt={ts:Lt,auth:Gt,rwcToken:et,dmz:1};return jt&&Object.assign(wt,{confID:jt}),"https://".concat(He,"/wc/ping/").concat(Ke,"?").concat(new URLSearchParams(wt).toString())})(ue,T,Se,A,S,M?.currentRoom.boConfId);return BC(Qe).pipe(tr(He=>{let Ke={};return Ke=He.response?fn(fn({},He.response),{},{rwc:ue,fromNginx:!1}):{rwc:ue,rwg:ue,rwcToken:Se,fromNginx:!0},zn([_s(Ke),Yv()])}),cE(()=>{const{pingFailedServerList:He,serversLength:Ke}=Z;return He.push(Qe),He.length===Ke&&(B&&ce&&ce.complete(),Et(Wo,{reason:"connection error",errorCode:-3e3})),mt}))}),Qp(vw(performance.now())))}return mt}));let En=0;const UC={meetingStatus:vs.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,enableAudioQos:!0,enableVideoQos:!0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},gatewayUserList:[]},SR=na({["".concat(hm)]:Pt((a,d)=>{let{payload:u}=d;u.customerKey=a.customerKey||u.customerKey||"",Object.assign(a,u),a.meetingStatus=vs.Initial}),["".concat(uN)]:Pt((a,d)=>{let{payload:u}=d;a.isWindowOpen=u}),["".concat(O0)]:Pt((a,d)=>{let{payload:u}=d;a.signatureType=u.useSDK?"sdk":"api",a.apiKey=u.apiKey,a.signature=u.signature,a.lang=u.language}),["".concat(o_)]:Pt((a,d)=>{let{payload:u}=d;a.ztk=u}),["".concat(lN)]:Pt((a,d)=>{let{payload:u}=d;a.zsk=u}),["".concat(D0)]:Pt((a,d)=>{let{payload:u}=d;a.tk=u.tk,a.mtkGuid=u.mtkGuid}),["".concat(vw)]:Pt((a,d)=>{let{payload:u}=d;a.pingRWCTimestamp=u}),["".concat(oa)]:Pt((a,d)=>{let{payload:u}=d;a.confId=u.confID,a.conId=u.conID,a.e2eEncrypt=u.e2eEncrypt,a.meetingNumber=parseInt(u.mn,10),a.zoomId=u.zoomID,a.meetingStatus=vs.Joined,a.jid=u.jid,a.xtoken=u.xtoken,a.groups=u.groups,a.svcUrl=u.svcUrl,a.encType=u.encType,a.userGUID=u.userGUID,a.userId=u.userID,a.role=u.role,a.participantID=u.participantID,a.reportDomain=u.reportDomain}),["".concat(Qh)]:Pt((a,d)=>{let{payload:u}=d;if(u.gatewayUser){var f;const{userId:S,sn:T}=u.gatewayUser,w=null===(f=a.gatewayUserList)||void 0===f?void 0:f.find(M=>M.userId===S);var A;w?w.sn=T:null===(A=a.gatewayUserList)||void 0===A||A.push(u.gatewayUser)}else Object.assign(a,u)}),["".concat(yE)]:Pt((a,d)=>{let{payload:u}=d;a.isHost=u}),["".concat(Aw)]:Pt((a,d)=>{let{payload:u}=d;a.isCoHost=u}),["".concat(s_)]:Pt((a,d)=>{let{payload:u}=d;a.isOnHold=u}),["".concat(sa)]:Pt((a,d)=>{let{payload:u}=d;a.isMeetingReset=u}),["".concat(yw)]:Pt((a,d)=>{let{payload:u}=d;a.audioVideoBeforeOnHold=u}),["".concat(dN)]:Pt((a,d)=>{let{payload:u}=d;a.currentUserAudioBeforeReset=u}),["".concat($v)]:Pt((a,d)=>{let{payload:u}=d;a.isCurrentUserMutedBeforeReset=u}),["".concat(Ya)]:Pt((a,d)=>{let{payload:u}=d;a.meetingStatus=u}),["".concat(Ew)]:Pt((a,d)=>{let{payload:u}=d;a.region=u.region,a.network=u.network}),["".concat(bw)]:Pt((a,d)=>{let{payload:u}=d;a.isCurrentUserStartVideoBeforeReset=u}),["".concat(pm)]:Pt((a,d)=>{let{payload:u}=d;a.joinMeetingTimeStamp=u}),["".concat(Ca)]:Pt((a,d)=>{let{payload:u}=d;a.enableAudioQos=u.audioQos,a.enableVideoQos=u.videoQos}),["".concat(hN)]:Pt((a,d)=>{let{payload:u}=d;a.activeAppInfo=u}),["".concat(Hh)]:Pt((a,d)=>{let{payload:u}=d;a.idleStartTime=u}),["".concat(Sw)]:Pt((a,d)=>{let{payload:u}=d;a.sessionIdleTimeoutMins=u}),["".concat(Gh)]:Pt((a,d)=>{let{payload:u}=d;a.isAudioBridgeEnabled=u}),["".concat(Zv)]:Pt((a,d)=>{var u,f;let{payload:A}=d;const S=null===(u=a.encryptedGEORWC)||void 0===u||null===(f=u.find(w=>w.rwc===A))||void 0===f?void 0:f.dc;if(S){var T;const w=null===(T=a.encryptedGEORWC)||void 0===T?void 0:T.filter(M=>M.dc===S);w&&a.discardedRwcList.some(M=>w?.findIndex(B=>B.rwc===M)>=0)&&a.discardedRwcList.push(...w.map(M=>M.rwc)),a.discardedRwcList.push(A)}}),["".concat(EE)]:Pt((a,d)=>{let{payload:u}=d;a.sharePronounType=u}),["".concat(ci)]:Pt((a,d)=>{let{payload:u}=d;a.stayAwake=u}),["".concat(k0)]:Pt((a,d)=>{let{payload:u}=d;Object.assign(a,fn(fn({},UC),{},{isMeetingReset:!0,currentUserAudioBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.audio:u.audio,isCurrentUserMutedBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.muted:u.muted,isCurrentUserStartVideoBeforeReset:a.audioVideoBeforeOnHold?a.audioVideoBeforeOnHold.video:u.video,apiKey:a.apiKey,signatureType:a.signatureType,signature:a.signature,meetingNumber:a.meetingNumber,userName:a.userName,lang:a.lang,passWord:a.passWord,userEmail:a.userEmail,sdkUrl:a.sdkUrl,sdkOrigin:a.sdkOrigin,proxy:1,cv:a.cv,zsk:a.zsk,ztk:a.ztk,idleStartTime:a.idleStartTime,sessionIdleTimeoutMins:a.sessionIdleTimeoutMins,customerKey:a.customerKey,stayAwake:a.stayAwake}))})},UC),VC=xu(kN,NN,gR,{meetingInfoEpic:(a,d)=>a.pipe(Ui("".concat(R0)),Qo(u=>{const f=Object.assign({},u.payload,{password:Hs(u.payload.password),topic:Hs(u.payload.topic)}),{videoSDKUrl:A}={meetingSDKUrl:"https://".concat(to,"/api/v1/wc/info"),videoSDKUrl:"https://".concat(to,"/wc/lsdk")};return function(S,T){let w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new ze(M=>{En++;const B="".concat(w).concat(En),G=document.createElement("script");Object.keys(T).forEach(Z=>null==T[Z]&&delete T[Z]),G.src="".concat(S,"?").concat(new URLSearchParams(Object.assign(T,{callback:B})).toString()),G.async=!0,G.onerror=Z=>M.error(Z),document.getElementsByTagName("head")[0].appendChild(G),window[B]=Z=>{G.parentNode&&G.parentNode.removeChild(G),delete window[B],M.next(Z),M.complete()}})}(A,f).pipe(cE(S=>Pn({status:!1,result:S.toString(),errorCode:-3e3})),tr(S=>{const[T,w]=E0(Pn(S),M=>!0===M.status&&void 0!==M.result);return w.subscribe(M=>{M.state||(3e3===M.errorCode&&"Meeting password is incorrect"===M.errorMessage?Et(Wo,gE(3004)):3e3===M.errorCode&&"The role type error"===M.errorMessage?Et(Wo,gE(3010)):-3e3===M.errorCode?Et(Wo,{reason:"connection error"}):3e3===M.errorCode?Et(Wo,{reason:M.errorMessage,errorCode:200}):300===M.errorCode?Et(Wo,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===M.errorCode&&"Parse lite sdk topic and pwd fail"===M.errorMessage?Et(Wo,{reason:"Parse topic and pwd fail",errorCode:200}):124===M.errorCode&&"The java web token is expired or more than 2 days or ineffective."===M.errorMessage?Et(Wo,{reason:"The token is expired or more than 2 days or ineffective.",errorCode:200}):124===M.errorCode&&Et(Wo,{reason:"Verify JWT failed",errorCode:200}))}),T.pipe(sR(M=>{if(!0===M.status){const{result:{mid:B,websdkClientFeatureOptions:G}}=M;ar.init(B);const Z=((ue,Se)=>{if(ue.result){const{result:{mn:Qe,ts:He,auth:Ke,track_auth:et,mid:Lt,tid:Gt,encryptedRWC:jt,encryptedGEORWC:wt,user_identity:sn,meetingOptions:hn,can_recording:vn,wcXMPPConfig:ln,call_out_country_json:Qt,isOriginalHost:Bn,support_call_out:gr,liveTranscription:At}}=ue,{lang:ut,password:Be,topic:$e,zlk:St,cv:lt,userName:Ut}=Se;return{meetingNumber:Qe,meetingId:Lt,tid:Gt,ts:He,auth:Ke,passWord:Be,trackAuth:et,customerKey:sn,encryptedRWC:JSON.parse(jt||"{}"),encryptedGEORWC:JSON.parse(wt||"{}"),meetingOptions:JSON.parse(hn||"{}"),recordingEnable:"1"===vn,topic:$e,userName:ar.get(hs.WebclientUserName)||Ut,cv:lt,zlkJwtToken:St,xmppConfig:JSON.parse(ln||"{}"),callOutCountry:JSON.parse(Qt||"{}"),lang:ut,isOriginHost:Bn,isSupportCallOut:"1"===gr,liveTranscription:JSON.parse(At||"{}")}}return ue})(M,u.payload),ce=[Pn(hm(Z)),Xd(ei,d,Jv())],he=(ue=>{const Se={["".concat(fm.AudioBridgeEnable)]:{mask:240,action:Gh}},Qe=[];if(ue){const He=ue.split("").reverse();Object.keys(fm).filter(Ke=>/\d(,\d)?/.test(fm[Ke])).forEach(Ke=>{const et=fm[Ke],Lt=et.split(",").map(wt=>He[Number(wt)-1]).reverse().join(""),Gt=parseInt(Lt,16),jt=Se[et];jt&&Qe.push(Pn(jt.action((Gt&jt.mask)>0)))})}return Qe})(G);return he.length>0&&ce.unshift(...he),Uv(...ce)}}))}))})),pingRWCEpic:ei});var jC,CR=pc(function(a,d){var u;u=function(){function f(){for(var S=0,T={};S<arguments.length;S++){var w=arguments[S];for(var M in w)T[M]=w[M]}return T}function A(S){return S.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function S(T){function w(){}function M(G,Z,ce){if(typeof document<"u"){"number"==typeof(ce=f({path:"/"},w.defaults,ce)).expires&&(ce.expires=new Date(1*new Date+864e5*ce.expires)),ce.expires=ce.expires?ce.expires.toUTCString():"";try{var he=JSON.stringify(Z);/^[\{\[]/.test(he)&&(Z=he)}catch{}Z=T.write?T.write(Z,G):encodeURIComponent(String(Z)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),G=encodeURIComponent(String(G)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var ue="";for(var Se in ce)ce[Se]&&(ue+="; "+Se,!0!==ce[Se]&&(ue+="="+ce[Se].split(";")[0]));return document.cookie=G+"="+Z+ue}}function B(G,Z){if(typeof document<"u"){for(var ce={},he=document.cookie?document.cookie.split("; "):[],ue=0;ue<he.length;ue++){var Se=he[ue].split("="),Qe=Se.slice(1).join("=");Z||'"'!==Qe.charAt(0)||(Qe=Qe.slice(1,-1));try{var He=A(Se[0]);if(Qe=(T.read||T)(Qe,He)||A(Qe),Z)try{Qe=JSON.parse(Qe)}catch{}if(ce[He]=Qe,G===He)break}catch{}}return G?ce[G]:ce}}return w.set=M,w.get=function(G){return B(G,!1)},w.getJSON=function(G){return B(G,!0)},w.remove=function(G,Z){M(G,"",f(Z,{expires:-1}))},w.defaults={},w.withConverter=S,w}(function(){})},a.exports=u()}),IR=new Uint8Array(16);function Vm(){if(!jC&&!(jC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jC(IR)}var Sb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function FN(a){return"string"==typeof a&&Sb.test(a)}for(var Ac=[],Cb=0;Cb<256;++Cb)Ac.push((Cb+256).toString(16).substr(1));function TR(a,d,u){var f=(a=a||{}).random||(a.rng||Vm)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,d){u=u||0;for(var A=0;A<16;++A)d[u+A]=f[A];return d}return function(S){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,w=(Ac[S[T+0]]+Ac[S[T+1]]+Ac[S[T+2]]+Ac[S[T+3]]+"-"+Ac[S[T+4]]+Ac[S[T+5]]+"-"+Ac[S[T+6]]+Ac[S[T+7]]+"-"+Ac[S[T+8]]+Ac[S[T+9]]+"-"+Ac[S[T+10]]+Ac[S[T+11]]+Ac[S[T+12]]+Ac[S[T+13]]+Ac[S[T+14]]+Ac[S[T+15]]).toLowerCase();if(!FN(w))throw TypeError("Stringified UUID is invalid");return w}(f)}let yc;!function(a){a[a.Unknown=0]="Unknown",a[a.Windows=1]="Windows",a[a.Mac=2]="Mac",a[a.Pad=3]="Pad",a[a.Mobile=4]="Mobile",a[a.CallIn=5]="CallIn",a[a.Linux=6]="Linux",a[a.WebClient=7]="WebClient",a[a.ChromeOs=8]="ChromeOs"}(yc||(yc={}));const{WebclientIsOnHold:UN,WebclientOpt:QC,WebclientParticipantId:HC,WebclientZoomId:VN,WebclientWebinarToken:GC,WebclientMeetingToken:wR}=hs,{WebclientDeviceId:jN}=x0;function RR(a){let{retryCount:d,rwgServerList:u,userName:f,auth:A,trackAuth:S,meetingId:T,customerKey:w,tid:M,lang:B,ts:G,bid:Z,botk:ce,confID:he,isAudioBridgeEnabled:ue}=a;const Se=CR.get("_zm_mtk_guid");let Qe=ar.get(jN);if(Qe||(Qe=TR(),ar.set(jN,Qe,Vi.LocalStorage)),u.length>d){const He=Ia(),Ke=u[d],et={dn2:Hs(f),auth:A,browser:He,trackAuth:S,mid:T,tid:M,lang:B,ts:G,"ZM-CID":Qe,_ZM_MTG_TRACK_ID:Se||"",customer_key:Hs(w),cfs:0};Ke.rwcAuth?Object.assign(et,{rwcAuth:Ke.rwcAuth}):Ke.rwcToken&&Object.assign(et,{rwcToken:Ke.rwcToken});const Lt=mm()?1:Ta()||Go()?2:0;return Object.assign(et,{as_type:Lt}),[{key:QC,queryKey:"opt"},{key:HC,queryKey:"participantID"},{key:VN,queryKey:"zoomid"}].forEach(Gt=>{const jt=ar.get(Gt.key);void 0!==jt&&(et[Gt.queryKey]=jt)}),Z&&ce&&he&&Object.assign(et,{bid:Hs(Z),botk:ce,confID:he}),ar.get(wR)&&Object.assign(et,{isdj:1}),ud()&&(Object.assign(et,{from:_m()?"android":"ios"}),ue&&Object.assign(et,{useABAudio:1})),Object.assign(et,{clientCaps:hA.SendMeetingTokenSeparately}),{queryObject:fn({},et),rwgServer:Ke}}return null}const jm=Do.createAgent();let PA;var WC=Object.freeze({__proto__:null,connectZoomSocketEpic:(a,d)=>a.pipe(Ui("".concat(Yv)),Qn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===fi.Closed}),Qo(u=>{let[,f]=u;const{socket:{retryCount:A,rwgServerList:S},meeting:T,breakoutRoom:w}=f;let M,B=fn(fn({},T),{},{retryCount:A,rwgServerList:S});if(w&&w.currentRoom.status===ur.Joining){const{currentRoom:{boId:Z,boConfId:ce,boToken:he}}=w;B=fn(fn({},B),{},{bid:Z,botk:he,confID:ce})}if(M=T.zlkJwtToken?function(Z){const ce=RR(Z);if(ce){const{queryObject:he,rwgServer:ue}=ce,{topic:Se,cv:Qe,zlkJwtToken:He,meetingNumber:Ke,passWord:et}=Z;return Object.assign(he,{topic:Hs(Se),iccv:Qe,zlkJwtToken:He}),""!==et&&Object.assign(he,{mpwd:Hs(et)}),"wss://".concat(ue.rwg,"/instantsdk/").concat(Ke,"?").concat(new URLSearchParams(he).toString())}return null}(B):function(Z){const ce=RR(Z);if(ce){const{queryObject:he,rwgServer:ue}=ce,{signatureType:Se,userEmail:Qe,ztk:He,tk:Ke,cv:et,zsk:Lt,sign:Gt,meetingNumber:jt,isHost:wt,isOriginHost:sn,passWord:hn}=Z;return Object.assign(he,{signType:Se,email:Qe,zak:He||"",tk:Ke||"",jscv:et}),wt&&sn||""===hn||Object.assign(he,{mpwd:hn}),sessionStorage.getItem(hs.WebclientZsk)||Lt?Object.assign(he,{zak:Lt}):Object.assign(he,{sign:Gt}),[{key:UN,queryKey:"cfs"},{key:GC,queryKey:"tk"}].forEach(vn=>{const ln=ar.get(vn.key);void 0!==ln&&(he[vn.queryKey]=ln)}),"wss://".concat(ue.rwg,"/wc/api/").concat(jt,"?").concat(new URLSearchParams(he).toString())}return null}(B),M){const Z=(jm.connect(M),PA=new ht,Kd(ce=>jm.on(Il.Message,ce),ce=>jm.off(Il.Message,ce),ce=>ce.data).subscribe(PA),PA);return Zs(Z.pipe(Un(ce=>"string"==typeof ce),Ne(ce=>JSON.parse(ce)),RC(),Nl(ce=>{if(0!==ce.evt||!ce.body||"invalid parameters!"!==ce.body.test)return Is(ce);Et(Wo,gE(fE.INVALID_PARAMETER))}),Qp(pi(fi.Connecting))),Z.pipe(Un(ce=>ce instanceof ArrayBuffer),Ne(ce=>xc(ce))))}return mt})),connectedZoomSocketEpic:(a,d)=>a.pipe(Ui("".concat(Yv)),Qn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===fi.Closed}),Qo(()=>{const[u,f,A]=[Il.Open,Il.Close,Il.Error].map(S=>Kd(T=>jm.on(S,T),T=>jm.on(S,T)));return Zs(u.pipe(tr(()=>Zs(Pn(pi(fi.Connected)),du(6e4).pipe(Qn(d),Un(S=>{let[,T]=S;return T.meeting.meetingStatus===vs.Initial&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia())))))),f.pipe(Qn(d),Un(S=>{let[,T]=S;return T.socket.zoomSocketStatus!==fi.Closed&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(Qn(d),tr(S=>{let[,T]=S;const{meeting:{meetingStatus:w,isMeetingReset:M},socket:{rwgServerList:B,retryCount:G}}=T,Z=[];if(w===vs.Initial&&null!=B&&B.length){const ce=B[G];return du(5e3).pipe(Un(()=>d.value.meeting.meetingStatus===vs.Initial),tr(()=>{const{socket:{rwgServerList:he,retryCount:ue}}=d.value,Se=[];return he.length>ue+1?Se.push(Mu(ue+1),ra({retry:!0})):(Et(Wo,{reason:"connection error",errorCode:-3e3}),Se.push(...wA(d.value))),zn(Se)}),Qp(Zv(ce?.rwc)))}return M||w!==vs.Joined||(Et("RECONNECTING_MEETING",{reason:aa.Failover}),Z.push(ia())),zn(Z)})))})),disconnectZoomSocketEpic:(a,d)=>a.pipe(Ui("".concat(ra)),Qo(u=>u.payload&&u.payload.retry?Pn(Yv()).pipe(ta(1e3),Qp(pi(fi.Closed))):Pn(pi(fi.Closed))),ta(100),lr(()=>{var u;d.value.socket.zoomSocketStatus===fi.Closed&&(jm.close(),null===(u=PA)||void 0===u||u.complete())}))});const Yu=k_.getInstance();let N_;var MA=Object.freeze({__proto__:null,connectXmppSocketEpic:(a,d)=>a.pipe(Ui("".concat(mr)),Qn(d),Un(u=>{let[,f]=u;return"closed"===f.socket.xmppSocketStatus}),Qo(u=>{let[,f]=u;const{meeting:{svcUrl:A,meetingNumber:S,conId:T}}=f;return(w=>(Yu.connect(w),N_=new ht,Kd(M=>Yu.on(Pl.Message,M),M=>Yu.off(Pl.Message,M)).subscribe(N_),N_))((w=A,M=S,B=T,"wss://".concat(w,"/wc/media/").concat(M,"?type=x&cid=").concat(B))).pipe(Un(w=>void 0!==w?.evt),Ne(w=>sd(w)),Qp(qd(fi.Connecting)));var w,M,B})),connectedXmppSocketEpic:(a,d)=>a.pipe(Ui("".concat(mr)),Qo(()=>{const[u,f,A]=[Pl.Open,Pl.Close,Pl.Error].map(S=>Kd(T=>Yu.on(S,T),T=>Yu.on(S,T)));return Zs(u.pipe(lr(()=>{const S=Go()&&tA()?11:10;Yu.join(S)}),hc(qd(fi.Connected))),f.pipe(ta(1e3),Qn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.xmppSocketStatus&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(ta(1e3),Qn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.xmppSocketStatus&&T.meeting.meetingStatus===vs.Joined&&!T.meeting.isMeetingReset}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))))})),disconnectCmdChannelSocketEpic:a=>a.pipe(Ui("".concat(Zi)),hc(qd(fi.Closed)),ta(100),lr(()=>{var d;Yu.close(),null===(d=N_)||void 0===d||d.complete()}))});const up=aA.getInstance();let Ib;var Tb=Object.freeze({__proto__:null,connectMainSessionSocketEpic:(a,d)=>a.pipe(Ui("".concat(Lc)),Qn(d),Un(u=>{let[,f]=u;return"closed"===f.socket.mainSessionSocketStatus}),Qo(u=>{let[,f]=u;const{meeting:{svcUrl:A,meetingNumber:S,conId:T}}=f;return(w=>(up.connect(w),Ib=new ht,Kd(M=>up.on(Il.Message,M),M=>up.off(Il.Message,M)).pipe(Ne(M=>M.data)).subscribe(Ib),Ib))((w=A,M=S,B=T,"wss://".concat(w,"/wc/media/").concat(M,"?type=m&cid=").concat(B,"&mode=2"))).pipe(Ne(w=>JSON.parse(w)),Un(w=>0!==w.evt),RC(),Ne(w=>or(w)),Qp(ks(fi.Connecting)));var w,M,B})),connectedMainSessionSocketEpic:(a,d)=>a.pipe(Ui("".concat(Lc)),Qo(()=>{const[u,f,A]=[Il.Open,Il.Close,Il.Error].map(S=>Kd(T=>up.on(S,T),T=>up.on(S,T)));return Zs(u.pipe(hc(ks(fi.Connected))),f.pipe(Qn(d),Un(S=>{let[,T]=S;return"closed"!==T.socket.zoomSocketStatus&&T.meeting.meetingStatus===vs.Joined}),Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))),A.pipe(Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia()))))})),disconnectMainSessionSocketEpic:a=>a.pipe(Ui("".concat(Sa)),hc(ks(fi.Closed)),lr(()=>{var d;up.close(),null===(d=Ib)||void 0===d||d.complete()}))});const wb={zoomSocketStatus:fi.Closed,xmppSocketStatus:fi.Closed,mainSessionSocketStatus:fi.Closed,retryCount:0,rwgServerList:[]},Qm=na({["".concat(pi)]:Pt((a,d)=>{let{payload:u}=d;a.zoomSocketStatus=u}),["".concat(_s)]:Pt((a,d)=>{let{payload:u}=d;const{rwgServerList:f}=a;f.find(A=>A.rwg===u.rwg)||f.push(u)}),["".concat(Mu)]:Pt((a,d)=>{let{payload:u}=d;a.retryCount=u}),["".concat(qd)]:Pt((a,d)=>{let{payload:u}=d;a.xmppSocketStatus=u}),["".concat(ks)]:Pt((a,d)=>{let{payload:u}=d;a.mainSessionSocketStatus=u}),["".concat(am)]:()=>wb},wb),OR=xu(WC,MA,Tb),DR={id:"userId",type:a=>Rm(a)?{userType:a,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:a},role:a=>({userRole:a,isHost:z0(a)}),dn2:a=>({displayName:jh(a)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:a=>({bLocalRecord:1===a}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT"},KC=a=>{const d={};return["add","remove","update"].forEach(u=>{null!=a[u]&&(d[u]=a[u].reduce((f,A)=>{const S=Object.keys(A).reduce((w,M)=>{const B=DR[M];return"function"==typeof B?Object.assign(w,B(A[M])):"string"==typeof B?w[B]=A[M]:w[M]=A[M],w},{}),T=f.find(w=>w.userId===S.userId);return void 0!==T?Object.assign(T,S):f.push(S),f},[]))}),d},kR={name:"displayName",node:a=>({userId:Number(a)}),role:a=>({userRole:Number(a)})},zC=a=>Object.keys(a).reduce((d,u)=>{const f=kR[u];return"function"==typeof f?Object.assign(d,f(a[u])):"string"==typeof f?d[f]=a[u]:d[u]=a[u],d},{});var NR=Object.freeze({__proto__:null,updateAttendeesEpic:(a,d)=>Mn(a,Ts).pipe(Ne(u=>KC(u.payload.body)),Qn(d),tr(u=>{let[f,A]=u,S=[Fn(f)];const{meeting:{userId:T,isWebinar:w,isOnHold:M},participants:{attendeesList:B,failoverAttendeesList:G,allowTalkAttendeesList:Z}}=A,ce=Z.map(ue=>ue.userId);if(f.add){const ue=f.add.find(Qe=>Qe.userId===T);void 0!==ue&&(Et("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",ue),void 0!==ue.bHold&&S.push(s_(ue.bHold)));const Se=f.add.filter(Qe=>Qe.userId!==T);if(Se.length>0){const Qe=Se.filter(Ke=>!Y0(Ke.userRole)).map(Ke=>{const et=G.find(Lt=>Lt.zoomID===Ke.zoomID);return et?fn(fn({},Ke),{},{source:et.isOnHold?"on hold":"failover"}):Ke}),He=Qe.filter(Ke=>!!Ke.source).map(Ke=>({zoomID:Ke.zoomID}));if(S.push(Dw(He)),Et("ADD_USER_PARTICIPANT_ATTRIBUTE",Qe),w){const Ke=Se.filter(et=>Y0(et.userRole));Ke.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Ke.map(et=>({userId:et.userId,isAllowToTalk:!0})))}}}if(f.update){const ue=f.update.find(Qe=>Qe.userId===T);void 0!==ue&&(Et("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",ue),void 0!==ue.bHold&&S.push(s_(ue.bHold)));const Se=f.update.filter(Qe=>!(Qe.userId===T||ce.includes(Qe.userId)));if(Se.length>0&&Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",Se),w){const Qe=f.update.filter(He=>He.userId!==T&&ce.includes(He.userId));Qe.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Qe)}}if(f.remove){const ue=f.remove.map(Se=>{const Qe=B.find(He=>He.userId===Se.userId);return Qe?2===Se.action&&1===Se.nUserStatus?Qe.bHold?(S.push(wE({zoomID:Qe.zoomID,isOnHold:!0})),fn(fn({},Se),{},{reason:"on hold"})):(S.push(wE({zoomID:Qe.zoomID,isOnHold:!1})),fn(fn({},Se),{},{reason:"failover"})):Se:null}).filter(Se=>!!Se);if(Et("REMOVE_USER_PARTICIPANT_ATTRIBUTE",ue),w){const Se=f.remove.filter(Qe=>ce.includes(Qe.userId));Se.length>0&&Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Se.map(Qe=>({userId:Qe.userId,isAllowToTalk:!1})))}}const he=S.filter(ue=>ue.type==="".concat(s_));if(he.length>0){const ue=he[he.length-1];S=S.filter(Se=>Se.type!=="".concat(s_)),ue.payload!==M&&(S.push(ue),Et("MEETING_IN_WAITING_ROOM",!M))}return zn(S)})),receiveUserListFromXMPPEpic:(a,d)=>Uh(a,24595).pipe(tr(u=>{const{payload:{body:{action:f,data:A}}}=u,{meeting:{jid:S},participants:{xmppAttendeeList:T}}=d.value,w=[];if(f===Da.rename){A.forEach(B=>{w.push(u_(B))});const M=A.map(B=>zC(B));Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",M)}if(f===Da.Remove){A.forEach(B=>{w.push(vN(B))});const M=A.map(B=>fn(fn({},zC(B)),{},{removed:!0}));Et("REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",M)}if([Da.Add,Da.List,Da.update].includes(f)){const M=A.map(B=>{const G=zC(B);return Object.keys(G).reduce((Z,ce)=>(""!==G[ce]&&Object.assign(Z,{[ce]:G[ce]}),Z),{})});if(Et("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",M),w.push(RE(M)),f===Da.update){const B=A.find(G=>G.jid===S);B&&void 0!==B.bRaiseHand&&T.find(Z=>Z.jid===S)?.bRaiseHand!==B.bRaiseHand&&Et("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:B.bRaiseHand})}}return zn(w)})),handleAdmitAllSilentUsersEpic:a=>Mn(a,7951).pipe(lr(d=>{!1===d.payload.body.bStarted&&Et("ADMIT_ALL_SILENT_USERS_END",d.payload.body.bStarted)}),Ne(d=>_N(d.payload.body.bStarted))),handleKVUpdateIndicationEpic:a=>Mn(a,7946).pipe(Un(d=>{var u;return["bRaiseHand","feedback"].includes(null===(u=d.payload.body)||void 0===u?void 0:u.key)&&0===d.payload.body.value}),Ne(d=>(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",{}),"bRaiseHand"===d.payload.body.key?kw():Nw())))});const YC={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},qC=na({["".concat(Fn)]:Pt((a,d)=>{let{payload:u}=d;void 0!==u.add&&u.add.length>0&&u.add.forEach(f=>{const A=a.attendeesList.find(T=>T.userId===f.userId&&51!==f.userType);if(void 0!==A)Object.assign(A,f);else if(51!==f.userType){const T=a.allowTalkAttendeesList.find(w=>w.userId===f.userId);void 0!==T?Object.assign(T,f):Y0(f.userRole)?a.allowTalkAttendeesList.push(f):a.attendeesList.push(f)}const S=a.assistantList.find(T=>T.userId===f.userId&&51===f.userType);void 0!==S?Object.assign(S,f):51===f.userType&&a.assistantList.push(f)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(f=>{const A=a.attendeesList.find(T=>T.userId===f.userId&&51!==f.userType);if(void 0!==A)Object.assign(A,f);else if(51!==f.userType){const T=a.allowTalkAttendeesList.find(w=>w.userId===f.userId);void 0!==T&&Object.assign(T,f)}const S=a.assistantList.find(T=>T.userId===f.userId&&51!==f.userType);void 0!==S&&Object.assign(S,f)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(f=>{const A=a.attendeesList.findIndex(T=>T.userId===f.userId&&51!==f.userType);if(-1!==A)a.attendeesList.splice(A,1);else if(51!==f.userType){const T=a.allowTalkAttendeesList.findIndex(w=>w.userId===f.userId);-1!==T&&a.allowTalkAttendeesList.splice(T,1)}const S=a.assistantList.findIndex(T=>T.userId===f.userId);-1!==S&&a.assistantList.splice(S,1)})}),["".concat(RE)]:Pt((a,d)=>{let{payload:u}=d;const{xmppAttendeeList:f}=a,A=f.map(S=>S.jid);u.forEach(S=>{const{jid:T}=S,w=A.indexOf(T);-1!==w?Object.assign(f[w],S):f.push(S)})}),["".concat(_N)]:Pt((a,d)=>{let{payload:u}=d;a.isAdmitAllSilentUsers=u}),["".concat(kw)]:Pt(a=>{a.attendeesList.forEach(d=>{d.bRaiseHand&&(d.bRaiseHand=!1)})}),["".concat(Nw)]:Pt(a=>{a.attendeesList.forEach(d=>{d.feedback>0&&(d.feedback=0)})}),["".concat(wE)]:Pt((a,d)=>{let{payload:u}=d;a.failoverAttendeesList.push(u)}),["".concat(Dw)]:Pt((a,d)=>{let{payload:u}=d;u.forEach(f=>{const A=a.failoverAttendeesList.findIndex(S=>S.zoomID===f.zoomID);-1!==A&&a.failoverAttendeesList.splice(A,1)})}),["".concat(u_)]:Pt((a,d)=>{let{payload:u}=d;const{jid:f,name:A}=u,S=a.xmppAttendeeList.find(T=>T.jid===f);S&&(S.displayName=A)}),["".concat(vN)]:Pt((a,d)=>{let{payload:u}=d;const{jid:f}=u,A=a.xmppAttendeeList.findIndex(S=>S.jid===f);-1!==f&&a.xmppAttendeeList.splice(A,1)}),["".concat(Ow)]:()=>YC},YC),QN=xu(NR),P_={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1},HN=na({["".concat(vi)]:Pt((a,d)=>{let{payload:u}=d;a.audioDecodeStatus=u}),["".concat(cm)]:Pt((a,d)=>{let{payload:u}=d;a.audioEncodeStatus=u}),["".concat(Jd)]:Pt((a,d)=>{let{payload:u}=d;a.sharingDecodeStatus=u}),["".concat(pE)]:Pt((a,d)=>{let{payload:u}=d;a.sharingEncodeStatus=u}),["".concat(lm)]:Pt((a,d)=>{let{payload:u}=d;a.videoDecodeStatus=u}),["".concat(um)]:Pt((a,d)=>{let{payload:u}=d;a.videoEncodeStatus=u}),["".concat(Ka)]:Pt((a,d)=>{let{payload:u}=d;a.mediaConstraints=u.mediaConstraints,a.assetsPath=u.assetsPath,a.fileWithVersion=u.fileWithVersion,a.enforceMultipleVideos=u.enforceMultipleVideos}),["".concat(t_)]:Pt((a,d)=>{let{payload:u}=d;const{type:f,encrypeKey:A,additionalType:S}=u,T={encrypeKey:A,additionalType:S};"audio"===f?a.audioEncrypt=T:"video"===f?a.videoEncrypt=T:"sharing"===f&&(a.sharingEncrypt=T)}),["".concat(dm)]:a=>fn(fn({},P_),{},{mediaConstraints:a.mediaConstraints,assetsPath:a.assetsPath,fileWithVersion:a.fileWithVersion})},P_);var JC=function(a){return a&&a.default||a}(Object.freeze({__proto__:null,default:{}})),gt=pc(function(a,d){!function(u,f){var A=function(Ft,It){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,qt){ct.__proto__=qt}||function(ct,qt){for(var bn in qt)qt.hasOwnProperty(bn)&&(ct[bn]=qt[bn])})(Ft,It)};function S(Ft,It){function ct(){this.constructor=Ft}A(Ft,It),Ft.prototype=null===It?Object.create(It):(ct.prototype=It.prototype,new ct)}var T,w=function(){return(w=Object.assign||function(Ft){for(var It,ct=1,qt=arguments.length;ct<qt;ct++)for(var bn in It=arguments[ct])Object.prototype.hasOwnProperty.call(It,bn)&&(Ft[bn]=It[bn]);return Ft}).apply(this,arguments)},M=function(Ft,It){var ct=new Uint8Array(Ft.byteLength+It.byteLength);return ct.set(new Uint8Array(Ft),0),ct.set(new Uint8Array(It),Ft.byteLength),ct.buffer};(T=u.TransformDataFormat||(u.TransformDataFormat={})).STRING="string",T.BLOB="blob",T.ARRAY_BUFFER="arraybuffer";var B=function(Ft){return Blob&&Ft instanceof Blob?"blob":ArrayBuffer&&Ft instanceof ArrayBuffer?"arrayBuffer":typeof Ft},G=[],Z=function(){for(var Ft=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],It="",ct=0;ct<32;ct++)It+=Ft[Math.round(61*Math.random())];return-1!==G.indexOf(It)?Z():(G.push(It),It)},ce=function(Ft){return Ft.arrayBuffer?Ft.arrayBuffer():new Promise(function(It,ct){var qt=new FileReader;qt.readAsArrayBuffer(Ft),qt.onload=function(bn){It(bn.target&&bn.target.result)},qt.onerror=function(bn){ct(bn)}})},he=function(Ft){return Ft.text?Ft.text():new Promise(function(It,ct){var qt=new FileReader;qt.readAsText(Ft),qt.onload=function(bn){It(bn.target&&bn.target.result)},qt.onerror=function(bn){ct(bn)}})},ue=function(Ft,It){return Promise.resolve(new Blob([new Uint8Array(Ft)],{type:It}))},Se=function(Ft,It){var ct=new Blob([Ft],{type:It||"text/plain"});return he(ct)},Qe=function(Ft,It){return Promise.resolve(new Blob([Ft],{type:It||"text/plain"}))},He=function(Ft,It){return ce(new Blob([Ft],{type:It||"text/plain"}))};function Ke(Ft){var It=(Ft||"").split(".");return It[It.length-1]||""}function et(Ft){var It=(Ft||"").lastIndexOf("/");return It<0?"":Ft.slice(0,It)}function Lt(Ft){var It=(Ft||"").lastIndexOf("/"),ct=It<0?Ft:Ft.slice(It+1),qt=(ct||"").lastIndexOf(".");return qt<0?ct:ct.slice(0,qt)}function Gt(Ft){return["png","jpg","jpeg","svg"].includes(Ke(Ft))}function jt(Ft){return"json"===Ke(Ft)}function wt(Ft){return"version"===Ke(Ft)}function hn(Ft,It){var qo,ct=It||{},qt=ct.encoding,bn=ct.blobType,Wn=ct.unZipOptions;if("blob"===B(qo=Ft)&&(qo.type.includes("compressed")||qo.type.includes("zip"))&&!Wn?.disableUnZip)return function sn(Ft,It){return f.loadAsync(Ft).then(function(ct){return Promise.all(ct.filter(function(qt,bn){return!bn.dir}).map(function(qt){var Wn,bn=jt((Wn=qt).name)?"string":Gt(Wn.name)?"base64":wt(Wn.name)?"text":"blob";return It?.setUnZipFormat&&(bn=It.setUnZipFormat(qt)||bn),qt.async(bn).then(function(Wn){var Ar=Wn,mi=Ke(qt.name),Pr="svg"===mi?"svg+xml":mi;return"base64"===bn&&Gt(qt.name)&&!Wn.startsWith("data")&&(Ar="data:image/"+Pr+";base64,"+Ar),{data:Ar,file:qt}})}))}).then(function(ct){return bn=It,ct.reduce(function(Wn,Ar){var mi,Pr=Ar.data,Pi=Ar.file,Li=Ke(Pi.name),Co=et(Pi.name),Io=Lt(Pi.name),qo=(bn?.combineExtNames||[]).includes(Li)&&"string"==typeof Pr,nc=qo?""+(Co?Co+"/"+Li:Li):Pi.name;return qo&&Wn.some(function(Vl){return Vl.path===nc&&(Vl.data[Io]=Pr,!0)})||Wn.push({path:nc,extName:Li,data:qo?(mi={},mi[Io]=Pr,mi):Pr,shouldCombine:qo}),Wn},[]).map(function(Wn){var Ar=Wn.data,mi=Wn.shouldCombine,Pr=function(Pi,Li){var Co={};for(var Io in Pi)Object.prototype.hasOwnProperty.call(Pi,Io)&&Li.indexOf(Io)<0&&(Co[Io]=Pi[Io]);if(null!=Pi&&"function"==typeof Object.getOwnPropertySymbols){var qo=0;for(Io=Object.getOwnPropertySymbols(Pi);qo<Io.length;qo++)Li.indexOf(Io[qo])<0&&Object.prototype.propertyIsEnumerable.call(Pi,Io[qo])&&(Co[Io[qo]]=Pi[Io[qo]])}return Co}(Wn,["data","shouldCombine"]);return w(w({},Pr),{data:mi?JSON.stringify(Ar):Ar})});var bn})}(Ft,Wn);if(!qt)return Promise.resolve(Ft);var Ar=B(Ft),mi="string"===Ar,Pr="blob"===Ar,Pi="arrayBuffer"===Ar;if(qt===u.TransformDataFormat.BLOB){var Li=Ft;if(mi)return he(Li);if(Pi)return ce(Li)}else if(qt===u.TransformDataFormat.ARRAY_BUFFER){var Co=Ft;if(mi)return Se(Co,bn);if(Pr)return ue(Co,bn)}else if(qt===u.TransformDataFormat.STRING){var Io=Ft;if(Pr)return Qe(Io,bn);if(Pi)return He(Io,bn)}return Promise.resolve(Ft)}function vn(Ft){var It=0,ct=!1,qt=function(){It>90||ct||(Ft(It+=(100-It)/50),requestAnimationFrame(qt))};return qt(),{finish:function(){100===It||ct||(It=100,Ft(100))},abort:function(){100===It||ct||(ct=!0)},get curProgress(){return It}}}function ln(){}function Qt(){Qt.init.call(this)}function Bn(Ft){return void 0===Ft._maxListeners?Qt.defaultMaxListeners:Ft._maxListeners}function gr(Ft,It,ct){if(It)Ft.call(ct);else for(var qt=Ft.length,bn=an(Ft,qt),Wn=0;Wn<qt;++Wn)bn[Wn].call(ct)}function At(Ft,It,ct,qt){if(It)Ft.call(ct,qt);else for(var bn=Ft.length,Wn=an(Ft,bn),Ar=0;Ar<bn;++Ar)Wn[Ar].call(ct,qt)}function ut(Ft,It,ct,qt,bn){if(It)Ft.call(ct,qt,bn);else for(var Wn=Ft.length,Ar=an(Ft,Wn),mi=0;mi<Wn;++mi)Ar[mi].call(ct,qt,bn)}function Be(Ft,It,ct,qt,bn,Wn){if(It)Ft.call(ct,qt,bn,Wn);else for(var Ar=Ft.length,mi=an(Ft,Ar),Pr=0;Pr<Ar;++Pr)mi[Pr].call(ct,qt,bn,Wn)}function $e(Ft,It,ct,qt){if(It)Ft.apply(ct,qt);else for(var bn=Ft.length,Wn=an(Ft,bn),Ar=0;Ar<bn;++Ar)Wn[Ar].apply(ct,qt)}function St(Ft,It,ct,qt){var bn,Wn,Ar,mi;if("function"!=typeof ct)throw new TypeError('"listener" argument must be a function');if((Wn=Ft._events)?(Wn.newListener&&(Ft.emit("newListener",It,ct.listener?ct.listener:ct),Wn=Ft._events),Ar=Wn[It]):(Wn=Ft._events=new ln,Ft._eventsCount=0),Ar){if("function"==typeof Ar?Ar=Wn[It]=qt?[ct,Ar]:[Ar,ct]:qt?Ar.unshift(ct):Ar.push(ct),!Ar.warned&&(bn=Bn(Ft))&&bn>0&&Ar.length>bn){Ar.warned=!0;var Pr=new Error("Possible EventEmitter memory leak detected. "+Ar.length+" "+It+" listeners added. Use emitter.setMaxListeners() to increase limit");Pr.name="MaxListenersExceededWarning",Pr.emitter=Ft,Pr.type=It,Pr.count=Ar.length,mi=Pr,"function"==typeof console.warn?console.warn(mi):console.log(mi)}}else Ar=Wn[It]=ct,++Ft._eventsCount;return Ft}function lt(Ft,It,ct){var qt=!1;function bn(){Ft.removeListener(It,bn),qt||(qt=!0,ct.apply(Ft,arguments))}return bn.listener=ct,bn}function Ut(Ft){var It=this._events;if(It){var ct=It[Ft];if("function"==typeof ct)return 1;if(ct)return ct.length}return 0}function an(Ft,It){for(var ct=new Array(It);It--;)ct[It]=Ft[It];return ct}ln.prototype=Object.create(null),Qt.EventEmitter=Qt,Qt.usingDomains=!1,Qt.prototype.domain=void 0,Qt.prototype._events=void 0,Qt.prototype._maxListeners=void 0,Qt.defaultMaxListeners=10,Qt.init=function(){this.domain=null,Qt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ln,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Qt.prototype.setMaxListeners=function(Ft){if("number"!=typeof Ft||Ft<0||isNaN(Ft))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Ft,this},Qt.prototype.getMaxListeners=function(){return Bn(this)},Qt.prototype.emit=function(Ft){var It,ct,qt,bn,Wn,Ar,mi,Pr="error"===Ft;if(Ar=this._events)Pr=Pr&&null==Ar.error;else if(!Pr)return!1;if(mi=this.domain,Pr){if(It=arguments[1],!mi){if(It instanceof Error)throw It;var Pi=new Error('Uncaught, unspecified "error" event. ('+It+")");throw Pi.context=It,Pi}return It||(It=new Error('Uncaught, unspecified "error" event')),It.domainEmitter=this,It.domain=mi,It.domainThrown=!1,mi.emit("error",It),!1}if(!(ct=Ar[Ft]))return!1;var Li="function"==typeof ct;switch(qt=arguments.length){case 1:gr(ct,Li,this);break;case 2:At(ct,Li,this,arguments[1]);break;case 3:ut(ct,Li,this,arguments[1],arguments[2]);break;case 4:Be(ct,Li,this,arguments[1],arguments[2],arguments[3]);break;default:for(bn=new Array(qt-1),Wn=1;Wn<qt;Wn++)bn[Wn-1]=arguments[Wn];$e(ct,Li,this,bn)}return!0},Qt.prototype.on=Qt.prototype.addListener=function(Ft,It){return St(this,Ft,It,!1)},Qt.prototype.prependListener=function(Ft,It){return St(this,Ft,It,!0)},Qt.prototype.once=function(Ft,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.on(Ft,lt(this,Ft,It)),this},Qt.prototype.prependOnceListener=function(Ft,It){if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');return this.prependListener(Ft,lt(this,Ft,It)),this},Qt.prototype.removeListener=function(Ft,It){var ct,qt,bn,Wn,Ar;if("function"!=typeof It)throw new TypeError('"listener" argument must be a function');if(!(qt=this._events))return this;if(!(ct=qt[Ft]))return this;if(ct===It||ct.listener&&ct.listener===It)0==--this._eventsCount?this._events=new ln:(delete qt[Ft],qt.removeListener&&this.emit("removeListener",Ft,ct.listener||It));else if("function"!=typeof ct){for(bn=-1,Wn=ct.length;Wn-- >0;)if(ct[Wn]===It||ct[Wn].listener&&ct[Wn].listener===It){Ar=ct[Wn].listener,bn=Wn;break}if(bn<0)return this;if(1===ct.length){if(ct[0]=void 0,0==--this._eventsCount)return this._events=new ln,this;delete qt[Ft]}else!function(mi,Pr){for(var Pi=Pr,Li=Pi+1,Co=mi.length;Li<Co;Pi+=1,Li+=1)mi[Pi]=mi[Li];mi.pop()}(ct,bn);qt.removeListener&&this.emit("removeListener",Ft,Ar||It)}return this},Qt.prototype.removeAllListeners=function(Ft){var It,ct;if(!(ct=this._events))return this;if(!ct.removeListener)return 0===arguments.length?(this._events=new ln,this._eventsCount=0):ct[Ft]&&(0==--this._eventsCount?this._events=new ln:delete ct[Ft]),this;if(0===arguments.length){for(var qt,bn=Object.keys(ct),Wn=0;Wn<bn.length;++Wn)"removeListener"!==(qt=bn[Wn])&&this.removeAllListeners(qt);return this.removeAllListeners("removeListener"),this._events=new ln,this._eventsCount=0,this}if("function"==typeof(It=ct[Ft]))this.removeListener(Ft,It);else if(It)do{this.removeListener(Ft,It[It.length-1])}while(It[0]);return this},Qt.prototype.listeners=function(Ft){var It,ct=this._events;return ct&&(It=ct[Ft])?"function"==typeof It?[It.listener||It]:function(qt){for(var bn=new Array(qt.length),Wn=0;Wn<bn.length;++Wn)bn[Wn]=qt[Wn].listener||qt[Wn];return bn}(It):[]},Qt.listenerCount=function(Ft,It){return"function"==typeof Ft.listenerCount?Ft.listenerCount(It):Ut.call(Ft,It)},Qt.prototype.listenerCount=Ut,Qt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Hn,_r=function(Ft){function It(ct){var qt=Ft.call(this)||this;return qt.timeout=ct?.timeout||3e4,qt}return S(It,Ft),It.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},It.prototype.startTimeoutCheck=function(){var ct=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){ct.finished||(ct.finished=!0,ct.data=null,ct.emit("timeout")),ct.clearTimeoutCheck()},this.timeout))},It}(Qt),Qr=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.uuid=Z(),qt.domParams=ct||{},qt}return S(It,Ft),It.prototype.jsonp=function(){var ct=this;if(!this.finished){var qt=this.domParams,bn=qt.url,Wn=qt.jsonpCallbackName,Ar=void 0===Wn?"callback":Wn,mi=qt.body,Pr=qt.integrity;this.script=document.createElement("script"),Pr&&(this.script.integrity=Pr,this.script.crossOrigin="anonymous");var Pi="";mi&&Object.entries(mi).forEach(function(Li){Pi+=(Pi?"&":"")+Li[0]+"="+Li[1]}),Pi+=(Pi?"&":"")+Ar+"="+this.uuid,this.script.src=bn+(bn.includes("?")?"":"?")+Pi,this.jsonpCallback(),this.progressMonitory=vn(function(Li){ct.finished||ct.emit("progressUpdated",Li)}),document.body.appendChild(this.script)}},It.prototype.clearSideEffect=function(ct){if(void 0===ct&&(ct=!1),document.body.removeChild(this.script),ct){var qt=this.uuid;window[this.uuid]=function(){window[qt]&&delete window[qt]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},It.prototype.jsonpCallback=function(){var ct=this;this.script.onerror=function(qt){var bn;ct.finished||(ct.clearSideEffect(),null===(bn=ct.progressMonitory)||void 0===bn||bn.abort(),ct.emit("error",new Error("string"==typeof qt?qt:"load jsonp script failed")))},window[this.uuid]=function(qt){var bn;if(!ct.finished){var Wn=ct.domParams,Ar=Wn.encoding,mi=Wn.blobType,Pr=Wn.unZipOptions,Pi=Wn.beforeTransformData,Li=Wn.afterTransformData;null===(bn=ct.progressMonitory)||void 0===bn||bn.finish(),ct.clearSideEffect(),(Pi?Pi(qt||""):Promise.resolve(qt||"")).then(function(Co){return hn(Co,{encoding:Ar,blobType:mi,unZipOptions:Pr}).then(function(Io){return(Li?Li(Io):Promise.resolve(Io)).then(function(qo){return ct.emit("finished",qo)})})}).catch(function(Co){return ct.emit("error",Co)})}}},It.prototype.abort=function(){this.clearSideEffect(!0)},It}(_r),tc=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.socketParams=ct||{},qt}return S(It,Ft),It.prototype.write=function(ct,qt){ct&&!this.finished&&(ct instanceof Error?this.handleError(ct):(this.data?this.appendData(ct):this.data=ct,this.handlePerCentUpdate(qt)))},It.prototype.handlePerCentUpdate=function(ct){void 0===ct||this.finished||this.emit("progressUpdated",ct)},It.prototype.handleError=function(ct){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",ct)},It.prototype.appendData=function(ct){B(ct)===B(this.data)?"string"==typeof ct?this.data+=ct:Blob&&ct instanceof Blob?this.data=new Blob([this.data,ct],{type:ct.type}):ArrayBuffer&&ct instanceof ArrayBuffer&&(this.data=M(this.data,ct)):this.handleError(new Error("every piece of the data format must be the same"))},It.prototype.end=function(ct){var qt=this;if(!this.finished){this.handlePerCentUpdate(100),ct&&this.write(ct);var bn=this.socketParams,Wn=bn.encoding,Ar=bn.blobType,mi=bn.unZipOptions,Pr=bn.beforeTransformData,Pi=bn.afterTransformData;(Pr?Pr(this.data):Promise.resolve(this.data)).then(function(Li){return hn(Li,{encoding:Wn,blobType:Ar,unZipOptions:mi}).then(function(Co){return(Pi?Pi(Co):Promise.resolve(Co)).then(function(Io){return qt.emit("finished",Io)})})}).catch(function(Li){return qt.emit("error",Li)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},It}(_r),bh=function(Ft){function It(ct){var qt=Ft.call(this,ct)||this;return qt.xhrParams=ct||{},qt.xhrParams.headers=w({},qt.xhrParams.headers||{}),qt}return S(It,Ft),It.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},It.prototype.ajax=function(){var ct=this;if(!this.finished)if(this.xhrParams.url){var qt=this.xhrParams,bn=qt.headers,Wn=void 0===bn?{}:bn,Ar=qt.url,mi=qt.body,Pr=void 0===mi?{}:mi,Pi=qt.method,Li=void 0===Pi?"POST":Pi,Co=qt.encoding,Io=qt.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var qo=this.supportFetch()?vn(function(nc){ct.finished||ct.emit("progressUpdated",nc)}):null;(this.supportFetch()?fetch(new Request(Ar,w({method:Li,headers:Wn,body:"GET"===Li?void 0:JSON.stringify(Pr),signal:this.controller.signal},Io?{integrity:Io,mode:"cors"}:{}))).then(function(nc){return nc.ok?Co===u.TransformDataFormat.STRING?nc.text():Co===u.TransformDataFormat.ARRAY_BUFFER?nc.arrayBuffer():nc.blob():Promise.reject(new Error("xhr download "+Ar+" failed!"))}):new Promise(function(nc,Vl){var ru=new XMLHttpRequest;ct.controller=ru,ru.open(Li,Ar),ru.responseType=Co===u.TransformDataFormat.STRING?"text":Co===u.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(Wn).forEach(function(rc){ru.setRequestHeader(rc[0],rc[1])}),ru.onload=function(){var rc=ru.status,Ch=ru.statusText;rc>=200&&rc<300||304===rc?nc(ru.response):Vl(new Error(rc+": "+Ch))},ru.onprogress=function(rc){var Ep=rc||{},Ch=Ep.total,bp=Ep.loaded;void 0===bp||ct.finished||(Ch?ct.emit("progressUpdated",bp/Ch*100):bp&&!qo&&(qo=vn(function(aS){ct.finished||ct.emit("progressUpdated",aS)})))},ru.onerror=function(){Vl(new Error("xhr download "+Ar+" failed!"))},ru.send(JSON.stringify(Pr))})).then(function(nc){if(!ct.finished){var Vl=ct.xhrParams,ru=Vl.encoding,rc=Vl.blobType,Ep=Vl.unZipOptions,Ch=Vl.beforeTransformData,bp=Vl.afterTransformData;qo?.finish(),ct.finished=!0,ct.clearTimeoutCheck(),(Ch?Ch(nc):Promise.resolve(nc)).then(function(aS){return hn(aS,{encoding:ru,blobType:rc,unZipOptions:Ep}).then(function(Ag){return(bp?bp(Ag):Promise.resolve(Ag)).then(function(Ey){return ct.emit("finished",Ey)})})}).catch(function(aS){return ct.emit("error",aS)})}}).catch(function(nc){ct.finished||(ct.finished=!0,ct.clearTimeoutCheck(),qo?.abort(),ct.emit("error",nc))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},It.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},It}(_r),nu=0,Cc=new Qt,Ps=function(){nu-=1,Cc.emit("ThreadPoolReady")};(Hn=u.DownloaderType||(u.DownloaderType={})).XHR="xhr",Hn.DOM="dom",Hn.SOCKET="socket";var Ma=function(Ft){function It(ct){var qt=Ft.call(this)||this;return qt.aborted=!1,qt.downloadParmas=w({type:u.DownloaderType.XHR},ct),qt.id=Z(),qt}return S(It,Ft),It.prototype.start=function(){var ct=this;nu+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var qt=this.downloadParmas,Wn=qt.xhrParams,Ar=qt.domParams,mi=qt.socketParams;switch(qt.type){case u.DownloaderType.DOM:this.downloader=new Qr(Ar),this.downloader.jsonp();break;case u.DownloaderType.SOCKET:this.downloader=new tc(mi);break;default:this.downloader=new bh(Wn),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(Pr){ct.emit("error",Pr),ct.onErrorCallback&&ct.onErrorCallback(Pr),Ps()}).on("finished",function(Pr){ct.emit("complete",Pr),ct.onCompleteCallback&&ct.onCompleteCallback(Pr),Ps()}).on("progressUpdated",function(Pr){ct.progress=Pr,ct.emit("progressUpdated",Pr),ct.onProgressUpdatedCallback&&ct.onProgressUpdatedCallback(Pr)}).on("timeout",function(){ct.emit("timeout"),ct.onTimeoutCallback&&ct.onTimeoutCallback(),Ps()}),this},It.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var ct=new Error("file download has been aborted");return this.emit("abort",ct),this.onAbortCallback&&this.onAbortCallback(ct),Ps(),this},It.prototype.onDownloadStart=function(ct){return this.onDownloadStartCallback=ct,this},It.prototype.onProgressUpdated=function(ct){return this.onProgressUpdatedCallback=ct,this},It.prototype.onError=function(ct){return this.onErrorCallback=ct,this},It.prototype.onComplete=function(ct){return this.onCompleteCallback=ct,this},It.prototype.onAbort=function(ct){return this.onAbortCallback=ct,this},It.prototype.onTimeout=function(ct){return this.onTimeoutCallback=ct,this},It.prototype.isInProgress=function(){return void 0!==this.progress},It.prototype.isFinished=function(){return 100===this.progress},It}(Qt),Sh=function(){function Ft(It){this.taskList=[],this.options=It||{};var ct=this.options.threadLimit;if((void 0===ct?6:ct)>6)throw new Error("threadLimit must be lower than 6");Cc.on("ThreadPoolReady",this.startNextTask.bind(this))}return Ft.prototype.download=function(It){var ct=new Ma(It),qt=this.removeTask.bind(this,ct);return ct.on("abort",qt),this.taskList.push(ct),this.checkTaskReady(ct),ct},Ft.prototype.startNextTask=function(){var It=this.taskList.find(function(ct){return!ct.isInProgress()});It&&this.checkTaskReady(It)},Ft.prototype.checkTaskReady=function(It){var ct=this.options.threadLimit,qt=void 0===ct?6:ct;if(!(this.taskList.findIndex(function(Wn){return!Wn.isInProgress()})>=qt||nu+1>6)){var bn=this.removeTask.bind(this,It);It.on("complete",bn),It.on("error",bn),It.on("timeout",bn),setTimeout(function(){return It.start()},0)}},Ft.prototype.removeTask=function(It){var ct=this;this.taskList.some(function(qt,bn){return qt===It&&(setTimeout(function(){return It.removeAllListeners()},0),ct.taskList.splice(bn,1),!0)})},Ft}();u.DownloadTask=Ma,u.IDownloadManager=Sh,u.appendBuffer=M,u.arrayBufferToBlob=ue,u.arrayBufferToString=Se,u.blobToArrayBuffer=ce,u.blobToText=he,u.genUuid=Z,u.getDataFormat=B,u.getExtName=Ke,u.getFileName=Lt,u.getFullPathName=et,u.isImgFile=Gt,u.isJsonFile=jt,u.isVersionFile=wt,u.monitorProgress=vn,u.sep="/",u.stringToArrayBuffer=He,u.stringToBlob=Qe,u.transformData=hn,Object.defineProperty(u,"__esModule",{value:!0})}(d,JC)});sN(gt);var XC=sN(pc(function(a,d){!function(u,f){var A=function(At,ut){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Be,$e){Be.__proto__=$e}||function(Be,$e){for(var St in $e)$e.hasOwnProperty(St)&&(Be[St]=$e[St])})(At,ut)};function S(At,ut){function Be(){this.constructor=At}A(At,ut),At.prototype=null===ut?Object.create(ut):(Be.prototype=ut.prototype,new Be)}var T=function(){return(T=Object.assign||function(At){for(var ut,Be=1,$e=arguments.length;Be<$e;Be++)for(var St in ut=arguments[Be])Object.prototype.hasOwnProperty.call(ut,St)&&(At[St]=ut[St]);return At}).apply(this,arguments)};function w(){}function M(){M.init.call(this)}function B(At){return void 0===At._maxListeners?M.defaultMaxListeners:At._maxListeners}function G(At,ut,Be){if(ut)At.call(Be);else for(var $e=At.length,St=Ke(At,$e),lt=0;lt<$e;++lt)St[lt].call(Be)}function Z(At,ut,Be,$e){if(ut)At.call(Be,$e);else for(var St=At.length,lt=Ke(At,St),Ut=0;Ut<St;++Ut)lt[Ut].call(Be,$e)}function ce(At,ut,Be,$e,St){if(ut)At.call(Be,$e,St);else for(var lt=At.length,Ut=Ke(At,lt),an=0;an<lt;++an)Ut[an].call(Be,$e,St)}function he(At,ut,Be,$e,St,lt){if(ut)At.call(Be,$e,St,lt);else for(var Ut=At.length,an=Ke(At,Ut),Hn=0;Hn<Ut;++Hn)an[Hn].call(Be,$e,St,lt)}function ue(At,ut,Be,$e){if(ut)At.apply(Be,$e);else for(var St=At.length,lt=Ke(At,St),Ut=0;Ut<St;++Ut)lt[Ut].apply(Be,$e)}function Se(At,ut,Be,$e){var St,lt,Ut,an;if("function"!=typeof Be)throw new TypeError('"listener" argument must be a function');if((lt=At._events)?(lt.newListener&&(At.emit("newListener",ut,Be.listener?Be.listener:Be),lt=At._events),Ut=lt[ut]):(lt=At._events=new w,At._eventsCount=0),Ut){if("function"==typeof Ut?Ut=lt[ut]=$e?[Be,Ut]:[Ut,Be]:$e?Ut.unshift(Be):Ut.push(Be),!Ut.warned&&(St=B(At))&&St>0&&Ut.length>St){Ut.warned=!0;var Hn=new Error("Possible EventEmitter memory leak detected. "+Ut.length+" "+ut+" listeners added. Use emitter.setMaxListeners() to increase limit");Hn.name="MaxListenersExceededWarning",Hn.emitter=At,Hn.type=ut,Hn.count=Ut.length,an=Hn,"function"==typeof console.warn?console.warn(an):console.log(an)}}else Ut=lt[ut]=Be,++At._eventsCount;return At}function Qe(At,ut,Be){var $e=!1;function St(){At.removeListener(ut,St),$e||($e=!0,Be.apply(At,arguments))}return St.listener=Be,St}function He(At){var ut=this._events;if(ut){var Be=ut[At];if("function"==typeof Be)return 1;if(Be)return Be.length}return 0}function Ke(At,ut){for(var Be=new Array(ut);ut--;)Be[ut]=At[ut];return Be}function et(At){var ut;return null===(ut=At?.path)||void 0===ut?void 0:ut.startsWith("ZipInfo:")}function Lt(At){return"string"==typeof At&&At.startsWith("ZipInfo:")}function Gt(At,ut){return(Array.isArray(At)?At:[At]).some(function(Be){if("number"!=typeof Be.version)throw new Error("file version must be an int number");return Be.version<ut})}function jt(At,ut){return At.reduce(function(Be,$e){return Be.then(function(St){return ut(St,$e)}).catch(function(){return ut(void 0,$e)})},Promise.resolve(void 0))}w.prototype=Object.create(null),M.EventEmitter=M,M.usingDomains=!1,M.prototype.domain=void 0,M.prototype._events=void 0,M.prototype._maxListeners=void 0,M.defaultMaxListeners=10,M.init=function(){this.domain=null,M.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new w,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},M.prototype.setMaxListeners=function(At){if("number"!=typeof At||At<0||isNaN(At))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=At,this},M.prototype.getMaxListeners=function(){return B(this)},M.prototype.emit=function(At){var ut,Be,$e,St,lt,Ut,an,Hn="error"===At;if(Ut=this._events)Hn=Hn&&null==Ut.error;else if(!Hn)return!1;if(an=this.domain,Hn){if(ut=arguments[1],!an){if(ut instanceof Error)throw ut;var _r=new Error('Uncaught, unspecified "error" event. ('+ut+")");throw _r.context=ut,_r}return ut||(ut=new Error('Uncaught, unspecified "error" event')),ut.domainEmitter=this,ut.domain=an,ut.domainThrown=!1,an.emit("error",ut),!1}if(!(Be=Ut[At]))return!1;var Qr="function"==typeof Be;switch($e=arguments.length){case 1:G(Be,Qr,this);break;case 2:Z(Be,Qr,this,arguments[1]);break;case 3:ce(Be,Qr,this,arguments[1],arguments[2]);break;case 4:he(Be,Qr,this,arguments[1],arguments[2],arguments[3]);break;default:for(St=new Array($e-1),lt=1;lt<$e;lt++)St[lt-1]=arguments[lt];ue(Be,Qr,this,St)}return!0},M.prototype.on=M.prototype.addListener=function(At,ut){return Se(this,At,ut,!1)},M.prototype.prependListener=function(At,ut){return Se(this,At,ut,!0)},M.prototype.once=function(At,ut){if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');return this.on(At,Qe(this,At,ut)),this},M.prototype.prependOnceListener=function(At,ut){if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');return this.prependListener(At,Qe(this,At,ut)),this},M.prototype.removeListener=function(At,ut){var Be,$e,St,lt,Ut;if("function"!=typeof ut)throw new TypeError('"listener" argument must be a function');if(!($e=this._events))return this;if(!(Be=$e[At]))return this;if(Be===ut||Be.listener&&Be.listener===ut)0==--this._eventsCount?this._events=new w:(delete $e[At],$e.removeListener&&this.emit("removeListener",At,Be.listener||ut));else if("function"!=typeof Be){for(St=-1,lt=Be.length;lt-- >0;)if(Be[lt]===ut||Be[lt].listener&&Be[lt].listener===ut){Ut=Be[lt].listener,St=lt;break}if(St<0)return this;if(1===Be.length){if(Be[0]=void 0,0==--this._eventsCount)return this._events=new w,this;delete $e[At]}else!function(an,Hn){for(var _r=Hn,Qr=_r+1,tc=an.length;Qr<tc;_r+=1,Qr+=1)an[_r]=an[Qr];an.pop()}(Be,St);$e.removeListener&&this.emit("removeListener",At,Ut||ut)}return this},M.prototype.removeAllListeners=function(At){var ut,Be;if(!(Be=this._events))return this;if(!Be.removeListener)return 0===arguments.length?(this._events=new w,this._eventsCount=0):Be[At]&&(0==--this._eventsCount?this._events=new w:delete Be[At]),this;if(0===arguments.length){for(var $e,St=Object.keys(Be),lt=0;lt<St.length;++lt)"removeListener"!==($e=St[lt])&&this.removeAllListeners($e);return this.removeAllListeners("removeListener"),this._events=new w,this._eventsCount=0,this}if("function"==typeof(ut=Be[At]))this.removeListener(At,ut);else if(ut)do{this.removeListener(At,ut[ut.length-1])}while(ut[0]);return this},M.prototype.listeners=function(At){var ut,Be=this._events;return Be&&(ut=Be[At])?"function"==typeof ut?[ut.listener||ut]:function($e){for(var St=new Array($e.length),lt=0;lt<St.length;++lt)St[lt]=$e[lt].listener||$e[lt];return St}(ut):[]},M.listenerCount=function(At,ut){return"function"==typeof At.listenerCount?At.listenerCount(ut):He.call(At,ut)},M.prototype.listenerCount=He,M.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var wt,sn=function(At){function ut(){return null!==At&&At.apply(this,arguments)||this}return S(ut,At),ut}(M),hn=function(At){function ut(Be){var Hn,$e=At.call(this)||this;if($e.ready=!1,$e.openError=!1,$e.isEnable()){var St=Be||{},Ut=St.indexDbVersion;$e.dbName="resource-manager"+((Hn=St.nameSpaceId)?"-"+Hn:"");var an=indexedDB.open($e.dbName,Ut||1);an.addEventListener("error",function(){$e.openError=!0,$e.checkReady(),$e.emit("error",new Error("failed to open indexedDB"))}),an.addEventListener("success",function(){$e.db=an.result,$e.checkReady()}),an.addEventListener("upgradeneeded",function(){$e.db=an.result,$e.handleSuccess()}),setTimeout(function(){$e.checkReady()},5e3)}else $e.checkReady();return $e}return S(ut,At),ut.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},ut.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains("resource")){var Be=this.db.createObjectStore("resource",{keyPath:"path",autoIncrement:!1});Be.createIndex("path","path"),Be.createIndex("sourceURL","sourceURL",{unique:!1})}},ut.prototype.createAction=function(Be){var $e=this.db.transaction(["resource"],Be||"readonly");return{trans:$e,store:$e.objectStore("resource")}},ut.prototype.handleAction=function(Be,$e){return new Promise(function(St,lt){var Ut=$e();Be.addEventListener("complete",function(){St(Ut.result)}),Be.addEventListener("error",function(){lt(Be.error||new Error("transaction error"))}),Be.addEventListener("abort",function(){lt(Be.error||new Error("transaction aborted"))})})},ut.prototype.put=function(){for(var Be=[],$e=0;$e<arguments.length;$e++)Be[$e]=arguments[$e];var St=this.createAction("readwrite"),Ut=St.store;return this.handleAction(St.trans,function(){return Ut.put.apply(Ut,Be)})},ut.prototype.getAllKeysFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];if(IDBObjectStore.prototype.getAllKeys){var lt=this.createAction(),an=lt.store;return this.handleAction(lt.trans,function(){var Hn;return(Hn=an.index(Be)).getAllKeys.apply(Hn,$e)})}return this.openKeyCursor(Be)},ut.prototype.getAllFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];var lt=this.createAction(),an=lt.store;return IDBObjectStore.prototype.getAll?this.handleAction(lt.trans,function(){var Hn;return(Hn=an.index(Be)).getAll.apply(Hn,$e)}):this.openCursor(Be)},ut.prototype.getFromIndex=function(Be){for(var $e=[],St=1;St<arguments.length;St++)$e[St-1]=arguments[St];var lt=this.createAction(),an=lt.store;return this.handleAction(lt.trans,function(){var Hn;return(Hn=an.index(Be)).get.apply(Hn,$e)})},ut.prototype.deleteKey=function(){for(var Be=[],$e=0;$e<arguments.length;$e++)Be[$e]=arguments[$e];var St=this.createAction("readwrite"),Ut=St.store;return this.handleAction(St.trans,function(){return Ut.delete.apply(Ut,Be)})},ut.prototype.handleCursorAction=function(Be,$e,St,lt){return new Promise(function(Ut,an){$e.addEventListener("success",function(){$e.result?(St(lt,$e.result),$e.result.continue()):Ut(lt)}),$e.addEventListener("error",function(){an(Be.error||new Error("transaction error"))})})},ut.prototype.openKeyCursor=function(Be){for(var $e,St=[],lt=1;lt<arguments.length;lt++)St[lt-1]=arguments[lt];var Ut=this.createAction("readwrite");return this.handleCursorAction(Ut.trans,($e=Ut.store.index(Be)).openKeyCursor.apply($e,St),function(_r,Qr){return _r.push(Qr.key),_r},[])},ut.prototype.openCursor=function(Be){for(var $e,St=[],lt=1;lt<arguments.length;lt++)St[lt-1]=arguments[lt];var Ut=this.createAction("readwrite");return this.handleCursorAction(Ut.trans,($e=Ut.store.index(Be)).openCursor.apply($e,St),function(_r,Qr){return _r.push(Qr.value),_r},[])},ut.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},ut.prototype.saveFile=function(Be){return this.db?this.put(Be).then(function(){return!0}):Promise.resolve(!1)},ut.prototype.removeFile=function(Be){var $e=this;return this.db?"string"==typeof Be?this.getAllKeysFromIndex("path").then(function(St){var lt=(St||[]).filter(function(Ut){return Ut===Be||Ut.startsWith(""+Be+f.sep)});return Promise.all(lt.map(function(Ut){return $e.deleteKey(Ut)}))}).then(function(){return!0}):this.deleteKey(Be.path).then(function(){return!0}):Promise.resolve(!1)},ut.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var Be=this.createAction("readwrite"),St=Be.store;return this.handleAction(Be.trans,function(){return St.clear()}).then(function(){return!0})},ut.prototype.findFileByPath=function(Be){return this.db&&Be?this.getFromIndex("path",Be):Promise.resolve(void 0)},ut.prototype.findFileBySourceURL=function(Be){return this.db&&Be?this.getAllFromIndex("sourceURL",Be):Promise.resolve([])},ut.prototype.isDirectory=function(Be){var $e=this;return this.db?new Promise(function(St){Lt(Be)?St(!1):$e.getAllKeysFromIndex("path").then(function(lt){return(lt||[]).some(function(Ut){return Ut.startsWith(""+Be+f.sep)})}).then(St).catch(function(){return St(!1)})}):Promise.resolve(!1)},ut.prototype.ls=function(Be){var $e=this;return this.db?this.getAllKeysFromIndex("path").then(function(St){var lt=[];return Promise.all((St||[]).map(function(Ut){if(Lt(Ut))return Promise.resolve(void 0);if(Be){if(Ut.startsWith(""+Be+f.sep)){var an=Ut.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Hn=""+Be+f.sep+an.split(f.sep)[0];return Hn&&!lt.includes(Hn)?(lt.push(Hn),Promise.resolve(Hn)):Promise.resolve(void 0)}return $e.getFromIndex("path",Ut)}return Promise.resolve(void 0)}if(Ut.includes(f.sep)){var _r=Ut.split(f.sep)[0]||"";return _r&&!lt.includes(_r)?(lt.push(_r),Promise.resolve(_r)):Promise.resolve(void 0)}return $e.getFromIndex("path",Ut)})).then(function(Ut){return Ut.filter(function(an){return!!an})})}):Promise.resolve([])},ut}(sn),vn=function(At){function ut(){var Be=null!==At&&At.apply(this,arguments)||this;return Be.memoryFiles=[],Be}return S(ut,At),ut.prototype.isEnable=function(){return!0},ut.prototype.saveFile=function(Be){var $e=this;return new Promise(function(St){$e.memoryFiles.some(function(lt,Ut){return lt.path===Be.path&&($e.memoryFiles.splice(Ut,1,Be),!0)})||$e.memoryFiles.push(Be),St(!0)})},ut.prototype.removeFile=function(Be){var $e=this;return new Promise(function(St){for(var lt=$e.memoryFiles.length-1;lt>=0;lt--){var Ut=$e.memoryFiles[lt];("string"==typeof Be&&(Ut.path===Be||Ut.path.startsWith(""+Be+f.sep))||Be.path===Ut.path)&&$e.memoryFiles.splice(lt,1)}St(!0)})},ut.prototype.clear=function(){var Be=this;return new Promise(function($e){Be.memoryFiles=[],$e(!0)})},ut.prototype.findFileByPath=function(Be){var $e=this;return new Promise(function(St){St($e.memoryFiles.filter(function(lt){return lt.path===Be})[0])})},ut.prototype.findFileBySourceURL=function(Be){var $e=this;return new Promise(function(St){St($e.memoryFiles.filter(function(lt){return lt.sourceURL===Be}))})},ut.prototype.isDirectory=function(Be){var $e=this;return new Promise(function(St){Lt(Be)?St(!1):St($e.memoryFiles.some(function(lt){return lt.path.startsWith(""+Be+f.sep)}))})},ut.prototype.ls=function(Be){var $e=this;return new Promise(function(St){var lt=[];$e.memoryFiles.forEach(function(Ut){if(!et(Ut))if(Be){if(Ut.path.startsWith(""+Be+f.sep)){var an=Ut.path.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Hn=""+Be+f.sep+an.split(f.sep)[0];return void(Hn&&!lt.includes(Hn)&&lt.push(Hn))}lt.push(Ut)}}else if(Ut.path.includes(f.sep)){var _r=Ut.path.split(f.sep)[0]||"";_r&&!lt.includes(_r)&&lt.push(_r)}else lt.push(Ut)}),St(lt)})},ut}(sn),ln=function(At){function ut(Be){var lt,$e=At.call(this)||this;return $e.isLocalAvaliable=void 0,$e.isEnable()&&($e.storageName="resource-manager"+((lt=(Be||{}).nameSpaceId)?"-"+lt:"")),$e}return S(ut,At),ut.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},ut.prototype.saveFile=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){var lt=$e.getLocalFile();lt.some(function(Ut,an){return Ut.path===Be.path&&(lt.splice(an,1,Be),!0)})||lt.push(Be),localStorage.setItem($e.storageName,JSON.stringify(lt)),St(!0)}):Promise.resolve(!1)},ut.prototype.getLocalFile=function(){var Be=localStorage.getItem(this.storageName),$e=[];if(Be)try{$e=JSON.parse(Be)||"[]"}catch(St){console.log(St)}return $e},ut.prototype.removeFile=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){for(var lt=$e.getLocalFile(),Ut=lt.length-1;Ut>=0;Ut--){var an=lt[Ut];("string"==typeof Be&&(an.path===Be||an.path.startsWith(""+Be+f.sep))||Be.path===an.path)&&lt.splice(Ut,1)}localStorage.setItem($e.storageName,JSON.stringify(lt)),St(!0)}):Promise.resolve(!1)},ut.prototype.clear=function(){var Be=this;return this.isEnable()?new Promise(function($e){localStorage.removeItem(Be.storageName),$e(!0)}):Promise.resolve(!1)},ut.prototype.findFileByPath=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){St($e.getLocalFile().filter(function(lt){return lt.path===Be})[0])}):Promise.resolve(void 0)},ut.prototype.findFileBySourceURL=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){St($e.getLocalFile().filter(function(lt){return lt.sourceURL===Be}))}):Promise.resolve([])},ut.prototype.isDirectory=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){Lt(Be)?St(!1):St($e.getLocalFile().some(function(lt){return lt.path.startsWith(""+Be+f.sep)}))}):Promise.resolve(!1)},ut.prototype.ls=function(Be){var $e=this;return this.isEnable()?new Promise(function(St){var lt=[];$e.getLocalFile().forEach(function(Ut){if(!et(Ut))if(Be){if(Ut.path.startsWith(""+Be+f.sep)){var an=Ut.path.split(""+Be+f.sep)[1]||"";if(an.includes(f.sep)){var Hn=""+Be+f.sep+an.split(f.sep)[0];return void(Hn&&!lt.includes(Hn)&&lt.push(Hn))}lt.push(Ut)}}else if(Ut.path.includes(f.sep)){var _r=Ut.path.split(f.sep)[0]||"";_r&&!lt.includes(_r)&&lt.push(_r)}else lt.push(Ut)}),St(lt)}):Promise.resolve([])},ut}(sn);(wt=u.FileStoreEnum||(u.FileStoreEnum={})).MEMORY="memoryStore",wt.INDEX_DB="indexedDBStore",wt.STORAGE="storageStore";var Qt=function(At){function ut(Be){var $e=At.call(this)||this;return $e.indexedDBStore=new hn(Be),$e.memoryStore=new vn,$e.storageStore=new ln(Be),$e}return S(ut,At),ut.prototype.saveFile=function(Be,$e,St){var lt=this;void 0===$e&&($e=!0);var Ut=(St||{}).forceSpecifyStore;return($e?this.findFileByPath(Be.path,St):Promise.resolve(void 0)).then(function(an){if(an?.version&&Gt(Be,an.version))throw new Error("there is an higher version file existed already");var Hn=T(T({},Be),{createTime:an&&an.createTime||Date.now(),updateTime:Date.now()});return Ut&&lt[Ut]&&lt[Ut].isEnable()&&(Ut!==u.FileStoreEnum.STORAGE||lt.isLocalStorageAvaliable(Hn))?lt[Ut].saveFile(Hn):lt[lt.saveToTargetStoreRule(Hn)].saveFile(Hn)})},ut.prototype.isLocalStorageAvaliable=function(Be){var $e=Be.data;return"string"===f.getDataFormat($e)&&$e.length<=102400&&this.storageStore.isEnable()},ut.prototype.saveToTargetStoreRule=function(Be){return this.indexedDBStore.isEnable()?u.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(Be)?u.FileStoreEnum.STORAGE:u.FileStoreEnum.MEMORY},ut.prototype.removeFile=function(Be,$e){var St=($e||{}).forceSpecifyStore;return St&&this[St]?this[St].removeFile(Be):Promise.all([this.indexedDBStore.removeFile(Be),this.storageStore.removeFile(Be),this.memoryStore.removeFile(Be)]).then(function(){return!0})},ut.prototype.clear=function(Be){var $e=(Be||{}).forceSpecifyStore;return $e&&this[$e]?this[$e].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},ut.prototype.findFileByPath=function(Be,$e){var St=this,lt=($e||{}).forceSpecifyStore;return lt&&this[lt]?this[lt].findFileByPath(Be):jt(this.searchInTargetStoreRule(),function(Ut,an){return Ut?Promise.resolve(Ut):St[an].findFileByPath(Be)})},ut.prototype.findFileBySourceURL=function(Be,$e){var St=this,lt=($e||{}).forceSpecifyStore;return lt&&this[lt]?this[lt].findFileBySourceURL(Be):jt(this.searchInTargetStoreRule(),function(Ut,an){return St[an].findFileBySourceURL(Be).then(function(Hn){return Ut?Ut.filter(function(_r){return!Hn.some(function(Qr){return Qr.path===_r.path})}).concat(Hn||[]):Hn||[]})})},ut.prototype.searchInTargetStoreRule=function(){return[u.FileStoreEnum.INDEX_DB,u.FileStoreEnum.STORAGE,u.FileStoreEnum.MEMORY]},ut.prototype.isDirectory=function(Be){var $e=this;return Be?jt(this.searchInTargetStoreRule(),function(St,lt){return St?Promise.resolve(!0):$e[lt].isDirectory(Be)}):Promise.resolve(!0)},ut.prototype.ls=function(Be){var $e=this;return this.isDirectory(Be).then(function(St){if(!St)throw new Error("path: "+Be+" is an invalid directory path");return jt($e.searchInTargetStoreRule(),function(lt,Ut){return $e[Ut].ls(Be).then(function(an){return lt?(an||[]).concat(lt.filter(function(Hn){return!an.some(function(_r){return"string"==typeof Hn?_r===Hn:"string"!=typeof _r&&_r.path===Hn.path})})):an})})})},ut}(M),Bn=function(At){function ut(){return null!==At&&At.apply(this,arguments)||this}return S(ut,At),ut}(M),gr=function(At){function ut(Be){var $e=At.call(this)||this,St=Be||{},lt=St.storeOptions;return $e.downloadManager=new f.IDownloadManager(St.downloadManagerOptions),$e.store=new Qt(lt),$e.store.indexedDBStore.on("ready",function(){return $e.emit("ready")}),$e}return S(ut,At),ut.prototype.getFile=function(Be,$e,St){var lt=this,Ut=new Bn,an=Promise.resolve(void 0),Hn=$e||{},_r=Hn.downloadOptions,tc=Hn.saveRootPath;Hn.forceDownload?an=Promise.resolve(void 0):"string"==typeof Be?an=this.store.findFileByPath(Be,St):Be?.sourceURL?an=this.store.findFileBySourceURL(Be.sourceURL):_r&&(_r.domParams||_r.socketParams||_r.xhrParams)&&(an=this.store.findFileBySourceURL(this.genSourceURL(_r)));var bh=null,nu=new Promise(function(Cc){bh=Cc});return Ut.getDownloadTask=function(){return nu},an=an.then(function(Cc){if(Cc&&(!Array.isArray(Cc)||Cc.length)){var Ps=Cc;if(Array.isArray(Ps)){var Ma=Ps.find(function(Ft){return et(Ft)});if(!Ma)return;Ps=Ps.filter(function(Ft){return!et(Ft)});var Sh=Ma.data;if("string"!=typeof Sh||!JSON.parse(Sh||"[]").every(function(Ft){return Ps.some(function(It){return It.path===Ft})}))return}if(!St?.targetVersion||!Gt(Ps,St.targetVersion))return Ut.emit("checkExpire",!1),Ps;Ut.emit("checkExpire",!0)}}).then(function(Cc){if(!Cc&&_r){var Ps=lt.downloadManager.download(_r);return bh(Ps),new Promise(function(Ma,Sh){Ps.on("complete",function(Ft){setTimeout(function(){var It=Array.isArray(Ft)?Ft.map(function(qt){var bn=qt.data,Ar=qt.extName;return{path:lt.genFilePath(tc,qt.path),sourceURL:lt.genSourceURL(_r),data:bn,fileFormat:Ar||lt.getFileFormat(_r),version:St?.targetVersion||1}}):{path:lt.genFilePath(tc,void 0),sourceURL:lt.genSourceURL(_r),data:Ft,fileFormat:lt.getFileFormat(_r),version:St?.targetVersion||1};if(Array.isArray(It)&&"string"==typeof Be&&Be){var ct=It.find(function(qt){return qt.path===Be});Ma(ct||It)}else Ma(It);Ut.emit("beforeSet",It),lt.beforeWrite(It,St).then(function(){Ut.emit("afterSet")}).catch(function(qt){return Ut.emit("afterSet",qt)})},0)}),Ps.on("abort",Sh),Ps.on("error",Sh),Ps.on("timeout",function(){return Sh(new Error("download timeout"))})})}return bh(void 0),Cc}).catch(function(Cc){return bh(void 0),Promise.reject(Cc)}),Ut.getResult=function(){return an},Ut},ut.prototype.genSourceURL=function(Be){var St=Be.type;if(St===f.DownloaderType.SOCKET)return null;var Ut=(St===f.DownloaderType.DOM?Be.domParams:Be.xhrParams)||{},an=Ut.url,Hn=void 0===an?"":an,_r=Ut.body;return _r&&Object.keys(_r).length?Hn+(Hn.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(_r):Hn},ut.prototype.updateFile=function(Be,$e){return this.saveStore(Be,!0,$e)},ut.prototype.beforeWrite=function(Be,$e){var St,lt,Ut=this;return Array.isArray(Be)?Promise.all(Be.concat((St=Be,lt=St[0].sourceURL||"",{path:"ZipInfo:"+lt,sourceURL:lt,data:JSON.stringify(St.map(function(an){return an.path}))})).map(function(an){return Ut.saveStore(an,!1,$e)})).then(function(an){return an.filter(function(Hn){return!et(Hn)})}):this.saveStore(Be,!0,$e)},ut.prototype.getFileFormat=function(Be){var $e=Be||{},St=$e.xhrParams,lt=$e.domParams,Ut=$e.socketParams,an=$e.type;return an===f.DownloaderType.DOM&&lt?.fileFormat?lt.fileFormat:an===f.DownloaderType.SOCKET&&Ut?.fileFormat?Ut.fileFormat:St?.fileFormat?St.fileFormat:"unknow"},ut.prototype.genFilePath=function(Be,$e){return $e?""+(Be||"")+(Be?f.sep:"")+$e:Be||""},ut.prototype.saveStore=function(Be,$e,St){return void 0===$e&&($e=!0),this.store.saveFile(Be,$e,St).then(function(lt){if(lt)return Be;throw new Error("fail to save file in local store")})},ut.prototype.remove=function(Be,$e){return this.store.removeFile(Be,$e)},ut.prototype.clear=function(Be){return this.store.clear(Be)},ut.prototype.list=function(Be){return this.store.ls(Be)},ut.prototype.updateVersion=function(Be,$e){var St=this;return this.store.findFileByPath(Be).then(function(lt){if(lt)return St.saveStore(T(T({},lt),{version:$e})).then(function(){});throw new Error("the target path: "+Be+" isn't existed")})},ut.prototype.updateSourceURL=function(Be,$e){var St=this;return this.store.findFileByPath(Be).then(function(lt){if(lt)return St.saveStore(T(T({},lt),{sourceURL:$e})).then(function(){});throw new Error("the target path: "+Be+" isn't existed")})},ut}(M);u.IResourceManager=gr,Object.defineProperty(u,"__esModule",{value:!0})}(d,gt)}));function M_(a,d,u,f){const{meeting:{userId:A},audio:{localShareAudioUserMutedList:S},share:{isReceiveSharingFromMainSession:T}}=f;return S.filter(w=>w.userId!==d).forEach(w=>{a.setSharingAudioVolume(w.userId,!0,w.isFromMainSession)}),a.setSharingAudioVolume(d,u,!!T),d===A?BE(u):cf({userId:d,muted:u})}function Hm(a,d,u){const{audio:{audioSsrc:f,activeMicrophone:A,activeSpeaker:S,isAllowToTalk:T,isSpeakerOnly:w},meeting:{svcUrl:M,conId:B,reportDomain:G,isAudioBridgeEnabled:Z}}=d,ce=ui(d),he=w||Xa(ce.userRole)&&!T,ue=u??!he;return Lm()&&!Z&&console.warn("Cannot start audio due to the service is not ready."),a.joinComputerAudio(f,A,S,ue,Lm()?{rwgHost:M,cid:B,nginxHost:G}:void 0)}function xA(a,d,u){return Rb.apply(this,arguments)}function Rb(){return Rb=L(function*(a,d,u){const f=[],{audio:{isJoinComputerAudioBeforeSharingAudio:A,mutedBeforeSharingAudio:S}}=u,T=ui(u);return!0===A&&(yield Hm(a,u),f.push(eh(void 0)),!1===S&&(f.push(af(!0)),d.mute(T.userId,!1)),f.push($h(void 0))),f}),Rb.apply(this,arguments)}function Gm(a,d,u){return yf.apply(this,arguments)}function yf(){return yf=L(function*(a,d,u){const{audio:{isSharingAudio:f},meeting:{userId:A}}=u,S=[];if(S.push(M_(a,A,!0,u)),f){yield a.leaveSharingAudio(!1),S.push(uf(!1));const T=yield xA(a,d,u);S.push(...T),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})},0)}return S.push(m_(!1)),S}),yf.apply(this,arguments)}function LA(a,d,u){return Wm.apply(this,arguments)}function Wm(){return Wm=L(function*(a,d,u){const{audio:{audioSsrc:f,activeMicrophone:A,activeSpeaker:S}}=u,T=ui(u),w=yield(M=L(function*(B,G){const Z=[],ce=ui(G),{audio:{isMicrophoneForbidden:he}}=G;return"computer"===ce?.audio&&(Z.push(eh(!0)),Z.push($h(ce.muted)),yield B.leaveComputerAudio(),Z.push(ME(0)),he&&Z.push(X0(!1))),Z}),function(B,G){return M.apply(this,arguments)})(a,u);var M;return yield a.leaveSharingAudio(!0),yield a.joinSharingAudio({ssrc:f,microphoneDeviceId:A,speakerDeviceId:S,isCaptureAudio:Xa(T.userRole)}),w.push(m_(!0)),w.push(uf(!0)),w.push(M_(a,T.userId,!1,u)),w.findIndex(M=>M.type==="".concat(eh)&&!0===M.payload)>-1&&(w.push(af(!0)),d.mute(u.meeting.userId,!0),Et("AUDIO_CURRENT_USER_MUTED",{source:W.MutedSource.SharingAudio})),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"on"})},0),w}),Wm.apply(this,arguments)}const x_=()=>{var a;const d=null===(a=Ia())||void 0===a?void 0:a.toLocaleLowerCase();if(d.indexOf("safari")>-1&&-1===d.indexOf("ios-safari")){var u;const f=null===(u=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===u?void 0:u[1];return cN(f||"","15.2")>=0}return!1},ah=Do.createAgent(),qu=Bm(go.getInstance()),Ob=a=>!a.muted;var $C=Object.freeze({__proto__:null,audioAsnsEpic:(a,d)=>Mn(a,12033).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{participants:{attendeesList:S,allowTalkAttendeesList:T}}=A,w=f.payload.body,M={};return w&&([...S,...T].forEach(B=>{for(let G=1;G<=3;G++){const Z="asn".concat(G),{userId:ce,displayName:he}=B;if(void 0!==w[Z]&&ce===w[Z]){M[Z]={userId:ce,displayName:he};break}}}),Et("AUDIO_ACTIVE_SPEAKER",Object.values(M))),d_(M)})),unmuteConsentAfterSpotlighted:(a,d)=>Mn(a,16135).pipe(Qn(d),lr(u=>{let[f,A]=u;const{payload:{body:{id:S,bLeadershipOn:T}}}=f,{audio:{bCanUnmute:w}}=A,M=ui(A);if(M){const{isHost:B,bCoHost:G,userId:Z,audio:ce,muted:he}=M,ue=B||G;T&&Z>>10==S>>10&&(null!==ce&&""!==ce&&!0!==he||!ue&&!w||Et("AUDIO_UNMUTE_CONSENT",hd.Spotlight))}}),ai(mt)),unmuteConsentEpic:(a,d)=>Mn(a,12037).pipe(Qn(d),lr(u=>{let[,f]=u;const A=ui(f);null!==A?.audio&&""!==A?.audio&&1==A?.muted&&Et("AUDIO_UNMUTE_CONSENT",hd.Unmute)}),ai(mt)),setAudioAttributeEpic:(a,d)=>Mn(a,mc).pipe(Un(u=>u.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(f=>void 0!==u.payload.body[f])),Nl(u=>{if(void 0!==u.payload.body.bCanUnmute)return Pw(u.payload.body.bCanUnmute);if(void 0!==u.payload.body.bMutedAll){const f=ui(d.value);if(("computer"===f?.audio||"phone"===f?.audio)&&0==f.muted)return pA(u.payload.body.bMutedAll)}return void 0!==u.payload.body.bMutedUponEntry?wl(u.payload.body.bMutedUponEntry):void 0})),currentUserAudioChangeEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===fi.Connected}),tr(u=>{let[f,A]=u;if(f.payload.body.update&&f.payload.body.update.some(S=>void 0!==S.audio||void 0!==S.muted)){const S=A.meeting.userId,T=f.payload.body.update,[w,M]=E0(zn(T),He=>He.id===S);M.subscribe(He=>{Et("AUDIO_PARTICIPANT_AUDIO_UPDATE",He)});const{audio:{isActiveOperation:B,isMutedAll:G,isSpeakerOnly:Z,isAllowToTalk:ce,isShareAudioEnabled:he,isSharingAudio:ue}}=A;let Se=ui(A);!Se&&f.payload.body.add&&f.payload.body.add.length>0&&(Se=f.payload.body.add.find(He=>He.id===S),Se&&(Se.userRole=Se.role));const Qe=Xa(Se.userRole);return w.pipe(lr(function(){var He=L(function*(Ke){var et,Lt,Gt,jt;if(Ke.audio!==(null===(et=Se)||void 0===et?void 0:et.audio))if(""===Ke.audio)Et("AUDIO_CURRENT_USER_LEAVE_AUDIO");else if("computer"===Ke.audio){const sn=Qe&&!ce||Z;ue&&Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP"),sn&&Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP")}else if("phone"===Ke.audio){var wt;"computer"===(null===(wt=Se)||void 0===wt?void 0:wt.audio)&&(yield qu.leaveComputerAudio(),ah.joinOrLeaveVoip(!1)),Et("AUDIO_CURRENT_USER_JOIN_BY_PHONE")}null!==(Lt=Se)&&void 0!==Lt&&Lt.audio&&""!==(null===(Gt=Se)||void 0===Gt?void 0:Gt.audio)&&Ke.muted!==(null===(jt=Se)||void 0===jt?void 0:jt.muted)&&(!0===Ke.muted?(Et("AUDIO_CURRENT_USER_MUTED",{source:B?W.MutedSource.Active:G?W.MutedSource.PassiveByMuteAll:W.MutedSource.PassiveByMuteOne}),he||qu.muteAudio()):!1===Ke.muted&&(Et("AUDIO_CURRENT_USER_UNMUTED",{source:B?"active":"passive"}),qu.unmuteAudio()))});return function(Ke){return He.apply(this,arguments)}}()),Un(He=>{var Ke,et;return""!==(null===(Ke=Se)||void 0===Ke?void 0:Ke.audio)&&He.muted!==(null===(et=Se)||void 0===et?void 0:et.muted)}),ai(Pn(af(!1),pA(!1))))}return mt})),handleDialOutEpic:(a,d)=>Mn(a,8198).pipe(Qn(d),Un(u=>{let[f,A]=u;return f.payload.seq==A.audio.dialout.sequence}),lr(u=>{let[f]=u;const A=f.payload.body.result;Et("AUDIO_DIALOUT_RESULT_CODE",{code:A}),A===W.DialoutState.Success?Et("AUDIO_DIALOUT_RESULT_SUCCESS"):-1===[W.DialoutState.Calling,W.DialoutState.Ringing,W.DialoutState.Accepted,W.DialoutState.Success].indexOf(A)&&Et("DIALOUT_FAIL")}),Ne(u=>{let[f]=u;return vc(f.payload.body.result)})),handleDialouCancelEpic:a=>Mn(a,8198).pipe(Un(d=>{var u;return[W.DialoutState.Canceling,W.DialoutState.Canceled,W.DialoutState.CancelFailed].includes(null===(u=d.payload.body)||void 0===u?void 0:u.result)}),lr(d=>{var u;const f=null===(u=d.payload.body)||void 0===u?void 0:u.result;Et("AUDIO_DIALOUT_RESULT_CODE",{code:f}),f===W.DialoutState.Canceled?Et("AUDIO_DIALOUT_CANCEL_SUCCESS"):f===W.DialoutState.CancelFailed&&Et("DIALOUT_CANCEL_FAIL")}),Ne(d=>vc(d.payload.body.result))),handleAllowToTalkEpic:(a,d)=>Mn(a,12036).pipe(Qn(d),tr(u=>{let[f,A]=u;const S=ui(A),{media:{audioEncodeStatus:T}}=A,{promoterID:w,bAllowTalk:M}=f.payload.body;if(S?.userId===w){if(Et("AUDIO_ALLOW_TALK_CHANGE",M),M){let B=Pn(!0);return"success"!==T&&(qu.enableAudioEncode(),B=dc(Gs("AUDIO_ENCODE_SUCCESS",1).pipe(hc(!0)),Gs("AUDIO_ENCODE_FAIL",1).pipe(hc(!1)))),B.pipe(tr(G=>(G&&Et("AUDIO_UNMUTE_CONSENT",hd.AllowToTalk),mt)),Qp(Zd(!0)))}if(ah.mute(w,!0),"computer"===S?.audio)return qu.leaveComputerAudio(),du(300).pipe(lr(L(function*(){(x_()?dc(Ds(document,"click").pipe(ri(1)),Ds(document,"touchend").pipe(ri(1))).toPromise():Promise.resolve(!0)).then(()=>{Hm(qu,A,!1)})})),ai(mt),Qp(Zd(!1)))}return mt})),handleAllowToTalkResponseEpic:a=>Mn(a,8205).pipe(lr(d=>{Et("AUDIO_ALLOW_TO_TALK_RESPONSE",d.payload.body)}),ai(mt)),handleAttendeePromoteDepromote:(a,d)=>Uh(a,24597).pipe(Qn(d),lr(u=>{let[f,A]=u;const S=ui(A);"phone"===S?.audio&&ah.audioDrop(S.userId)}),ai(mt)),setAudioSSRCEpic:(a,d)=>Mn(a,12035).pipe(Qn(d),tr(u=>{let[f,A]=u;const{meeting:{currentUserAudioBeforeReset:S},media:{audioDecodeStatus:T,audioEncodeStatus:w}}=A,{payload:{body:{ssrc:M}}}=f,B=S_(d).pipe(tr(G=>{if("computer"===S&&(null==G||!G.audio)){const Z=Xa(G.userRole);return zc("audio",Z?"success":w,T).pipe(Un(ce=>{let[he,ue]=ce;return he&&ue}),lr(()=>{(x_()?dc(Ds(document,"click").pipe(ri(1)),Ds(document,"touchend").pipe(ri(1))).toPromise():Promise.resolve(!0)).then(()=>{ah.joinOrLeaveVoip(!0),Hm(qu,d.value)});const{audio:{locallyMutedAudioList:ce,localUserAudioVolumeList:he}}=d.value;ce.length>0&&ce.forEach(ue=>{qu.muteOrUnmuteOtherAudio(ue,!0)}),he.length>0&&he.forEach(ue=>{qu.adjustOtherAudioVolume(ue.userId,ue.volume)})}),hc(dN(void 0)))}return mt}));return Zs(Pn(PE(M)),B)})),handleMergeAudioEpic:(a,d)=>Mn(a,7952).pipe(Qo(u=>Gs("AUDIO_CURRENT_USER_JOIN_BY_PHONE",1).pipe(Qn(d),lr(f=>{let[,A]=f;const{BindStatus:S,nOperatorUserId:T}=u.payload.body,w=A.participants.attendeesList.find(M=>M.userId===T);!0===S&&Et("AUDIO_MERGE_AUDIO_INDICATION",{operatorName:w?.displayName,operatorUserId:T,operatorRole:w?.userRole})})))),handleUserGrantAudioCaptureEpic:(a,d)=>Si(a,Or.UserGrantCaptureAudio).pipe(Qn(d),tr(u=>{let[,f]=u;Et("AUDIO_CURRENT_USER_JOIN_BY_VOIP");const A=ui(f),{meeting:{isCurrentUserMutedBeforeReset:S},audio:{bMutedUponEntry:T,isUserGrantCaptureAudio:w,isAllowToTalk:M}}=f,B=[h_(!0)];if(A){!0===A.muted&&!1===M&&ah.mute(A.userId,!0);const G=w||A.isHost||M;(!0===S||!G&&T)&&(ah.mute(A.userId,!0),S&&B.push($v(void 0)))}return zn(B)})),handleUserForbiddenMicrophoneEpic:a=>Si(a,Or.UserForbiddedCaptureAudio).pipe(lr(()=>{Et("USER_FORBIDDEN_MICROPHONE")}),hc(X0(!0))),handleAudioSocketErrorEpic:a=>Si(a,Or.AudioWebsocketBroken).pipe(lr(()=>{Et("ESTABLISH_AUDIO_STREAM_ERROR")}),ai(mt)),handleAudioZeroDataEpic:(a,d)=>Si(a,Or.AudioZeroData).pipe(Qn(d),Nl(u=>{let[,f]=u;const{audio:{webrtcRestartCount:A,activeMicrophone:S}}=f;if(A<3)return qu.restoreWebRTC(S),ME(A+1)})),handleAutoPlayEpic:(a,d)=>a.pipe(Ui("".concat(f_)),Un(u=>!1===u.payload),tr(()=>(Et("AUDIO_AUTO_PLAY_FAILED"),dc(Ds(document,"click").pipe(ri(1)),Ds(document,"touchend").pipe(ri(1))).pipe(lr(()=>{ah.joinOrLeaveVoip(!0),Hm(qu,d.value)}),hc(f_(!0)))))),handleAudioActionCompleteEpic:a=>Si(a,[Or.JoinComputerAudioComplete,Or.JoinSharingAudioComplete,Or.LeaveComputerAudioComplete,Or.LeaveSharingAudioComplete]).pipe(lr(()=>{uR.completeAudioAction()}),ai(mt)),handleAudioQosDataEpic:(a,d)=>Si(a,Or.audioQosData).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{meeting:{isWebinar:S},media:{audioEncodeStatus:T,audioDecodeStatus:w},participants:{xmppAttendeeList:M,allowTalkAttendeesList:B}}=A,G=ui(A),Z=NE(A);let ce=Z.length>0,he=Z.some(Ob);S&&(ce=ce||Boolean(M.length),he=he||B.some(Ob));const Se=("computer"===G?.audio||"phone"===G?.audio)&&w&&ce&&he;return f.payload.data.encoding?"computer"!==G?.audio&&"phone"!==G?.audio||!T||null!=G&&G.muted||!ce?nC(mu):(Et("AUDIO_STATISTIC_DATA",f.payload),nC(f.payload)):Se?(Et("AUDIO_STATISTIC_DATA",f.payload),km(f.payload)):km(mu)})),handleResetLocalMuteStateAfterUserLeaveEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[f,A]=u;const{payload:{body:S}}=f,{audio:{locallyMutedAudioList:T,localUserAudioVolumeList:w}}=A;return(T.length>0||w.length>0)&&S?.remove&&S.remove.length>0}),tr(u=>{let[f,A]=u;const{payload:{body:{remove:S}}}=f,{audio:{locallyMutedAudioList:T,localUserAudioVolumeList:w}}=A,M=T.concat(w.map(B=>B.userId)).filter(B=>-1!==S.indexOf(G=>G.id===B));return M.length>0?(M.forEach(B=>{qu.muteOrUnmuteOtherAudio(B,!1)}),zn(M.map(B=>[Mw(B),VE({userId:B})]).flat())):mt}))});const Ef=Do.createAgent(),Km=Bm(go.getInstance());var ZC=Object.freeze({__proto__:null,handleAddLocalShareAudioUserEpic:(a,d)=>ad(a,Ts).pipe(Un(u=>{const f=u.payload.body.update;return f&&f.length>0&&f.findIndex(A=>void 0!==A.bShareOn)>-1}),Qn(d),tr(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{audio:{localShareAudioUserMutedList:T}}=A,w=S.filter(B=>!0===B.bShareOn&&!0===B.bShareAudioOn),M=[];return w.length>0&&w.forEach(B=>{-1===T.findIndex(G=>G.userId===B.id)&&M.push(yN({userId:B.id,isFromMainSession:!!B.bShareToBORooms}))}),zn(M)})),handleShareWithAudioEpic:(a,d)=>Si(a,Or.SharingDesktopStreamHaveAudio).pipe(Qo(()=>Mn(a,Ts).pipe(Un(u=>{var f;const{payload:{body:A}}=u,{meeting:{userId:S}}=d.value;return(null==A||null===(f=A.update)||void 0===f?void 0:f.findIndex(T=>T.id===S&&!0===T.bShareOn))>-1}),ri(1),TC(L(function*(){const u=d.value;return yield LA(Km,Ef,u)})),Qp(m_(!0))))),handleMediaSDKLeaveShareAudioEpic:(a,d)=>Si(a,Or.SharingDesktopStreamHaveNoAudio).pipe(Qn(d),Un(u=>{var f;let[,A]=u;return!0===(null===(f=A.audio)||void 0===f?void 0:f.isShareAudioEnabled)}),TC(function(){var u=L(function*(f){let[,A]=f;return yield Gm(Km,Ef,A)});return function(f){return u.apply(this,arguments)}}())),handleJoinComputerAudioAfterShareAudioEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[,f]=u;return f.socket.zoomSocketStatus===fi.Connected&&!0===f.audio.isSharingAudio}),tr(u=>{var f;let[A,S]=u;if(null!==(f=A.payload.body.update)&&void 0!==f&&f.some(T=>void 0!==T.audio||void 0!==T.muted)){const{meeting:{userId:T}}=S,w=A.payload.body.update.filter(M=>M.id===T);return S_(d).pipe(tr(M=>{const B=[];return w.findIndex(G=>"computer"===G.audio)>-1&&"computer"!==M?.audio&&(B.push(eh(!0)),B.push($h(!0))),zn(B)}))}return mt})),handleShareAudioWithCurrentShareStatusChangeEpic:(a,d)=>a.pipe(Ui("".concat(Rl)),ho(Ss),Qn(d),Un(u=>{var f;let[,A]=u;return!0===(null===(f=A.audio)||void 0===f?void 0:f.isShareAudioEnabled)}),TC(function(){var u=L(function*(f){let[A,S]=f;const{payload:T}=A,{audio:{isShareAudioMuted:w,isSharingAudio:M}}=S,B=[];if(T===W.ShareStatus.End){const G=yield Gm(Km,Ef,S);B.push(...G)}else if(T===W.ShareStatus.Paused){if(!1===w&&!0===M){yield Km.leaveSharingAudio(!0),B.push(uf(!1));const G=yield xA(Km,Ef,S);B.push(...G),setTimeout(()=>{Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})},0)}}else if(T===W.ShareStatus.Sharing&&!1===w&&!1===M){const G=yield LA(Km,Ef,S);B.push(...G)}return B});return function(f){return u.apply(this,arguments)}}()))});const eI=Do.createAgent(),tI=go.getInstance();var PR=Object.freeze({__proto__:null,handleAudioBridgeTokenEpic:a=>Mn(a,4299).pipe(lr(d=>{const{payload:u}=d;tI.passThroughRWGMessage(u)}),ai(mt)),handleAudioBridgeReconnectEpic:a=>Si(a,Or.AudioBridgeReconnectStart).pipe(lr(()=>{eI.joinOrLeaveVoip(!1)}),ai(mt)),handleAudioBridgeReconnectSuccessEpic:a=>Si(a,Or.AudioBridgeReconnectEnd).pipe(lr(()=>{eI.joinOrLeaveVoip(!0)}),ai(mt)),handleSendNodeAudioStatusEpic:a=>Mn(a,Ts).pipe(Un(d=>{var u,f;return Lm()&&((null===(u=d.payload.body.update)||void 0===u?void 0:u.some(A=>void 0!==A.muted))||(null===(f=d.payload.body.remove)||void 0===f?void 0:f.length)>0)}),lr(d=>{const{payload:{body:{update:u,remove:f}}}=d;tI.sendUserAudioStatus({update:(u||[]).filter(A=>void 0!==A.muted).map(A=>({userId:A.id,muted:A.muted})),remove:(f||[]).map(A=>({userId:A.id}))})}),ai(mt)),handleAudioBridgeFailoverEpic:a=>Si(a,Or.NotifyUIFailover).pipe(Ne(()=>(Et("RECONNECTING_MEETING",{reason:aa.Failover}),ia())))});const Db={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:{sequence:0,returnCode:-1},canPlayAudio:!1,isActiveOperation:!1,isMutedAll:!1,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isSpeakerOnly:!1,localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},kb=na({["".concat(d_)]:Pt((a,d)=>{let{payload:u}=d;a.asnIds=fn({},u)}),["".concat(Pw)]:Pt((a,d)=>{let{payload:u}=d;a.bCanUnmute=u}),["".concat(Xh)]:Pt((a,d)=>{let{payload:u}=d;const{dialout:f}=a;f.sequence=u}),["".concat(vc)]:Pt((a,d)=>{let{payload:u}=d;const{dialout:f}=a;f.returnCode=u}),["".concat(Zd)]:Pt((a,d)=>{let{payload:u}=d;a.isAllowToTalk=u,a.isAllowToTalkAttendeeConnected=!1}),["".concat(af)]:Pt((a,d)=>{let{payload:u}=d;a.isActiveOperation=u}),["".concat(pA)]:Pt((a,d)=>{let{payload:u}=d;a.isMutedAll=u}),["".concat(PE)]:Pt((a,d)=>{let{payload:u}=d;a.audioSsrc=u}),["".concat(wl)]:Pt((a,d)=>{let{payload:u}=d;a.bMutedUponEntry=u}),["".concat(h_)]:Pt((a,d)=>{let{payload:u}=d;a.isUserGrantCaptureAudio=u}),["".concat(X0)]:Pt((a,d)=>{let{payload:u}=d;a.isMicrophoneForbidden=u}),["".concat(ME)]:Pt((a,d)=>{let{payload:u}=d;a.webrtcRestartCount=u}),["".concat(xE)]:Pt((a,d)=>{let{payload:u}=d;a.microphoneDevicesList=u}),["".concat($0)]:Pt((a,d)=>{let{payload:u}=d;a.speakerDevicesList=u}),["".concat(p_)]:Pt((a,d)=>{let{payload:u}=d;a.activeMicrophone=u}),["".concat(Z0)]:Pt((a,d)=>{let{payload:u}=d;a.activeSpeaker=u}),["".concat(f_)]:Pt((a,d)=>{let{payload:u}=d;a.canPlayAudio=u}),["".concat(eC)]:(a,d)=>{let{dialout:{returnCode:u},locallyMutedAudioList:f,localUserAudioVolumeList:A}=a,{payload:S}=d;return S?fn(fn({},Db),{},{dialout:fn(fn({},Db.dialout),{},{returnCode:u}),locallyMutedAudioList:f,localUserAudioVolumeList:A}):fn({},Db)},["".concat(md)]:Pt((a,d)=>{let{payload:u}=d;a.isComputerAudioLoading=u}),["".concat(LE)]:Pt((a,d)=>{let{payload:u}=d;a.isSpeakerOnly=u}),["".concat(tC)]:Pt((a,d)=>{let{payload:u}=d;a.isAllowToTalkAttendeeConnected=u}),["".concat($h)]:Pt((a,d)=>{let{payload:u}=d;a.mutedBeforeSharingAudio=u}),["".concat(uf)]:Pt((a,d)=>{let{payload:u}=d;a.isSharingAudio=u}),["".concat(BE)]:Pt((a,d)=>{let{payload:u}=d;a.isShareAudioMuted=u}),["".concat(yN)]:Pt((a,d)=>{let{payload:u}=d;const{userId:f,isFromMainSession:A}=u;-1===a.localShareAudioUserMutedList.findIndex(S=>S.userId===f)&&a.localShareAudioUserMutedList.push({userId:f,isFromMainSession:A,muted:!1})}),["".concat(cf)]:Pt((a,d)=>{let{payload:u}=d;const f=a.localShareAudioUserMutedList.find(A=>A.userId===u.userId);f&&(f.muted=u.muted)}),["".concat(eh)]:Pt((a,d)=>{let{payload:u}=d;a.isJoinComputerAudioBeforeSharingAudio=u}),["".concat(m_)]:Pt((a,d)=>{let{payload:u}=d;a.isShareAudioEnabled=u}),["".concat(nC)]:Pt((a,d)=>{let{payload:u}=d;a.statistic.encode=u.data}),["".concat(km)]:Pt((a,d)=>{let{payload:u}=d;a.statistic.decode=u.data}),["".concat(FE)]:Pt((a,d)=>{let{payload:u}=d;-1===a.locallyMutedAudioList.findIndex(f=>f===u)&&a.locallyMutedAudioList.push(u)}),["".concat(Mw)]:Pt((a,d)=>{let{payload:u}=d;const f=a.locallyMutedAudioList.findIndex(A=>A===u);-1!==f&&a.locallyMutedAudioList.splice(f,1)}),["".concat(UE)]:Pt((a,d)=>{let{payload:u}=d;const f=a.localUserAudioVolumeList.find(A=>A.userId===u.userId);f?f.volume=u.volume:a.localUserAudioVolumeList.push(u)}),["".concat(VE)]:Pt((a,d)=>{let{payload:u}=d;const f=a.localUserAudioVolumeList.findIndex(A=>A.userId===u.userId);-1!==f&&a.localUserAudioVolumeList.splice(f,1)})},Db),MR=xu($C,ZC,PR),xR=a=>4294966272&a,nI=a=>{let d={R:0,G:0,B:0,A:0};if("string"==typeof a&&a.startsWith("#")){const w=a.slice(1);try{if(3===w.length){const M=Array.from(w).map(B=>B.repeat(2)).map(B=>parseInt(B,16));d={R:M[0]/255,G:M[1]/255,B:M[2]/255,A:1}}else if(6===w.length||8===w.length){var u,f,A,S,T;const M=null===(u=w.match(/\S{2}/g))||void 0===u?void 0:u.map(B=>parseInt(B,16));d={R:(null!==(f=M?.[0])&&void 0!==f?f:0)/255,G:(null!==(A=M?.[1])&&void 0!==A?A:0)/255,B:(null!==(S=M?.[2])&&void 0!==S?S:0)/255,A:null!=M&&M[3]?(null!==(T=M?.[3])&&void 0!==T?T:0)/255:1}}}catch{console.warn("error color representation:",a)}}else"object"==typeof a&&(d={R:a.R/255,G:a.G/255,B:a.B/255,A:a.A||1});return d};function Jc(a){return void 0!==a?zn(Promise.resolve(a)):Gs("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",1).pipe(Ne(d=>d))}function L_(a,d,u){return zm.apply(this,arguments)}function zm(){return zm=L(function*(a,d,u){if("blur"===a)return"blur";{let f=a;if(d){const A=yield(S=a,new Promise((T,w)=>{try{const M=document.createElement("canvas"),B=M.getContext("2d"),G=new Image;G.src=S;const Z=16/9,ce=1280,he=Math.floor(ce/Z);M.width=ce,M.height=he,G.onload=()=>{const{width:ue,height:Se}=G,Qe=Se*Z;if(Qe>ce){const He=ue,Ke=Math.floor(ue/Z);B?.drawImage(G,0,(Se-Ke)/2,He,Ke,0,0,ce,he)}else B?.drawImage(G,(ue-Qe)/2,0,Qe,Se,0,0,ce,he);M.toBlob(He=>{T(He)})}}catch(M){M instanceof DOMException&&M.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),w(M)}}));f=URL.createObjectURL(A)}if(f){const A=Math.floor(100*Math.random()),S="".concat("__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__").concat(A),T=document.createElement("img");return T.src=f,T.id=S,T.style.display="none",T.onload=()=>{d&&URL.revokeObjectURL(f)},T.onerror=w=>{d&&URL.revokeObjectURL(f),console.error("Cannot load virtual background image.",w)},(u??document.body).appendChild(T),new Promise(w=>{T.onload=()=>{d&&URL.revokeObjectURL(f),w(S)},T.onerror=M=>{d&&URL.revokeObjectURL(f),console.error("Cannot load virtual background image.",M),w(null)}})}}var S;return null}),zm.apply(this,arguments)}function LR(a,d,u,f){return lp.apply(this,arguments)}function lp(){return lp=L(function*(a,d,u,f){var A;const S=null!==(A=f&&f.parentNode)&&void 0!==A?A:document.body,{imageUrl:T,cropped:w,captureHeight:M,captureWidth:B,cameraId:G}=a,Z=document.createElement("div");let ce;Z.style.display="none",ce=T?yield L_(T,w,Z):null;const he=Math.floor(100*Math.random());let ue="".concat("__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__").concat(he);if(f){const Qe=C_(f);Qe.id?ue=Qe.id:Qe.id=ue}else{const Qe=document.createElement("canvas");Qe.width=380,Qe.height=214,Qe.id=ue,Z.appendChild(Qe)}S?.appendChild(Z);const{video:{videoSsrc:Se}}=u;return d.startVirtualBackgroundSetting(ue,ce,Se,G,B,M),Z}),lp.apply(this,arguments)}function Nb(a,d,u){return rI.apply(this,arguments)}function rI(){return rI=L(function*(a,d,u){if(a){const f=yield L_(a,d);f&&(u.updateVirtualBackgroundImage(f),"blur"!==f&&setTimeout(()=>{var A;const S=document.getElementById(f);null==S||null===(A=S.parentNode)||void 0===A||A.removeChild(S)},0))}else u.updateVirtualBackgroundImage(null)}),rI.apply(this,arguments)}function BR(a,d){return"default"===a||d.some(u=>u.deviceId===a)||[W.MobileVideoFacingMode.Environment,W.MobileVideoFacingMode.User,W.MobileVideoFacingMode.Left,W.MobileVideoFacingMode.Right].includes(a)}const BA=Do.createAgent(),B_=go.getInstance();var FR=Object.freeze({__proto__:null,handleStartCaptureVideoSuccessEpic:(a,d)=>Si(a,Or.StartVideoCaptureSuccess).pipe(Qn(d),Nl(u=>{let[,f]=u;const{video:{cameraDevicesList:A,activeCamera:S},meeting:{userId:T}}=f;return A.length<1?(Et("CAN_NOT_DETECT_CAMERA",{reason:"Cannot detect camera devices"}),void B_.stopCaptureVideo()):BR(S,A)?void BA.muteAttendeeVideo(T,!1):(Et("CAN_NOT_FIND_CAMERA",{reason:"cannot find target camera"}),void B_.stopCaptureVideo())})),startVideoResponse:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{var f,A,S,T;let[w,M]=u;return(null==w||null===(f=w.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.id)===M.meeting.userId}),Un(u=>{var f,A,S,T;let[w]=u;return!0===(null==w||null===(f=w.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.bVideoOn)}),Nl(()=>(Et("VIDEO_CAPTURE_START_SUCCESS"),Ko(!0)))),handleForbiddenCaptureVideoEpic:a=>Si(a,Or.UserForbiddedCaptureVideo).pipe(lr(()=>Et("VIDEO_USER_FORBIDDEN_CAPTURE")),hc(Hc(!0))),handleCameraIsTakenByOtherProgramsEpic:a=>Si(a,Or.UserCameraIsTakenByOtherPrograms).pipe(lr(()=>Et("VIDEO_CAMERA_IS_TAKEN",{reason:"User camera is taken by other programs."})),hc(YE(!0))),handleVideoSocketErrorEpic:a=>Si(a,Or.VideoWebsocketBroken).pipe(lr(()=>{Et("VIDEO_ESTABLISH_STREAM_ERROR",{reason:"Video websocket broken."})}),ai(mt)),handleStopVideoCaptureFailedEpic:a=>Si(a,Or.StopVideoCaptureFailed).pipe(lr(()=>{Et("VIDEO_CAPTURE_STOP_RESULT",{failed:!0,reason:"Unknown."})}),ai(mt)),handleStopVideoCaptureSuccessEpic:(a,d)=>Si(a,Or.StopVideoCaptureSuccess).pipe(Qn(d),Nl(u=>{let[,f]=u;const{meeting:{userId:A},video:{isCurrentUserStartedVideo:S}}=f;S||Et("VIDEO_CAPTURE_STOP_RESULT"),BA.muteAttendeeVideo(A,!0)})),stopVideoResponse:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{var f,A,S,T;let[w,M]=u;return(null==w||null===(f=w.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.id)===M.meeting.userId}),Un(u=>{var f,A,S,T;let[w]=u;return!1===(null==w||null===(f=w.payload)||void 0===f||null===(A=f.body)||void 0===A||null===(S=A.update)||void 0===S||null===(T=S[0])||void 0===T?void 0:T.bVideoOn)}),Nl(()=>(Et("VIDEO_CAPTURE_STOP_RESULT"),Ko(!1)))),receiveVideoMuteIndication:(a,d)=>Mn(a,16133).pipe(Qn(d),Un(u=>{var f,A;let[S,T]=u;return(null==S||null===(f=S.payload)||void 0===f||null===(A=f.body)||void 0===A?void 0:A.id)===T.meeting.userId}),Nl(u=>{let[f]=u;const{id:A,bVideoMute:S}=f.payload.body;return Et("RECEIVE_VIDEO_MUTE_INDICATION",{id:A,isVideoMuted:S}),!0===S&&B_.stopCaptureVideo(),!1===S&&Et("ASK_FOR_START_VIDEO_CONSENT",{id:A,isVideoMuted:S}),Gc(S)})),receiveVideoActiveIndication:a=>Mn(a,16129).pipe(Ne(d=>{const{payload:{body:{id:u,bVideoOn:f}}}=d,A=xR(u);return Et("RECEIVE_VIDEO_ACTIVE_INDICATION",{bVideoOn:f,userId:A}),zE({bVideoOn:f,userId:A})})),receiveVideoSsrcIndication:(a,d)=>Mn(a,16131).pipe(Un(u=>void 0!==u.payload.body.ssrc),Qn(d),Qo(u=>{let[f,A]=u;const{meeting:{isCurrentUserStartVideoBeforeReset:S},media:{videoEncodeStatus:T},video:{isVerifiedVideoCaptureCanvasAfterFailover:w}}=A,{payload:{body:{ssrc:M}}}=f,B=S_(d).pipe(tr(G=>G&&!0===S&&!0!==G.bVideoOn?zc("video",T,"success").pipe(Un(Z=>{let[ce,he]=Z;return ce&&he}),tr(()=>{const Z=[Ko(void 0)],{video:{captureCanvasList:ce,activeCamera:he,customizedVideoOption:ue}}=d.value;return!1===w&&(Array.isArray(ce)?ce.forEach(Se=>{C_(document.querySelector("#".concat(Se)))}):C_(document.querySelector("#".concat(ce))),Z.push(Fw(!0))),go.getInstance().startCaptureVideo(M,he,ue?.captureWidth||0,ue?.captureHeight||0,ue?.videoDOMId,ud(),!(null!=ue&&ue.originalRatio)&&zp()),zn(Z)})):mt));return Zs(Pn(mA(M)),B)})),receiveVideoDecodeMaxSizeEpic:(a,d)=>Si(a,Or.VideoDecodeMaxSize).pipe(Un(u=>{var f;return null==u||null===(f=u.payload)||void 0===f?void 0:f.data}),Ne(u=>{const{size:f}=u.payload.data,{video:{renderedVideoList:A,receivedVideoMaxQuality:S}}=d.value,T=A.filter(w=>w.videoQuality===W.VideoQuality.Video_720P);return S!==f&&T.length>0&&(f!==W.VideoQuality.Video_720P&&S!==W.VideoQuality.Video_720P||T.forEach(w=>{BA.subscribeVideo(w.userId,f,!1)})),Bw(f)})),spotlightVideoResponseEpic:a=>Mn(a,16135).pipe(Ne(d=>{const{payload:{body:{bLeadershipOn:u,id:f}}}=d,A=[];return u&&A.push(xR(f)),Et("VIDEO_SPOTLIGHT_CHANGE",{spotlightList:A}),lf(A)})),handleGroupLayoutIndicationEpic:(a,d)=>Mn(a,7958).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{payload:{body:S}}=f;let T=[];S&&S.group_list&&S.group_list[0]&&(T=S.group_list[0].map(M=>M.id));const w=Ks(A);return T=T.filter(M=>w.findIndex(B=>B.userId===M)>=0),Et("VIDEO_SPOTLIGHT_CHANGE",{spotlightList:T}),lf(T)})),handleCurrentVideoResolution:a=>Si(a,Or.CurrentVideoResolution).pipe(Nl(d=>(Et("VIDEO_RENDER_START_SUCCESS"),Et("RECEIVE_VIDEO_DIMENSION_CHANGE",d.payload.data),Nm(d.payload.data)))),handleMeetingVideoAttributeEpic:a=>Mn(a,mc).pipe(Un(d=>{const{payload:{body:u}}=d;return void 0!==u?.bFollowHostVideo||void 0!==u?.VideoHd||void 0!==u?.bCanUnmuteVideo}),Ne(d=>{const{payload:{body:{bFollowHostVideo:u,VideoHd:f,bCanUnmuteVideo:A}}}=d;return void 0!==u?(Et("VIDEO_FOLLOW_HOST_ORDER_CHANGE",{bOn:u}),uC(u)):void 0!==A?g_(A):(B_.enableHardwareAccelerationForVideoEncode(!1),jw(1===f))})),handleHostDragLayoutIndicationEpic:(a,d)=>Mn(a,7957).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{video:{isFollowHostVideoLayout:S}}=A,{payload:{body:T}}=f,w=T&&T.drag_list&&T.drag_list.map(M=>M.id);return S&&Et("VIDEO_HOST_DRAG_LAYOUT_CHANGE",{layout:w}),Uw(w)})),handlePeerVideoStateChangeEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[f,A]=u;const{meeting:{userId:S},video:{subscribedVideoList:T}}=A,w=f.payload.body.update,M=f.payload.body.remove;return w&&w.length>0&&w.findIndex(B=>B.id!==S&&(void 0!==B.bVideoOn||B.bHold))>-1||M&&M.some(B=>T.includes(B.id))}),lr(u=>{let[f,A]=u;const{payload:{body:{remove:S,update:T}}}=f,{video:{subscribedVideoList:w}}=A,M=J0(A);if(S&&S.length>0&&S.filter(B=>w.includes(B.id)).forEach(B=>{Et("VIDEO_OLD_USER_STOP",{userId:B.id})}),T&&T.length>0){const B=T.filter(Z=>void 0!==Z.bVideoOn).filter(Z=>-1===M.findIndex(ce=>ce.userId===Z.id)),G=T.filter(Z=>!0===Z.bHold);G.length>0&&G.filter(Z=>w.includes(Z.id)).forEach(Z=>{Et("VIDEO_OLD_USER_STOP",{userId:Z.id})}),B.forEach(Z=>{Et(Z.bVideoOn?"VIDEO_NEW_USER_START":"VIDEO_OLD_USER_STOP",{userId:Z.id})})}}),ai(mt)),handleVideoQosDataEpic:(a,d)=>Si(a,Or.videoQosData).pipe(Qn(d),Ne(u=>{let[f,A]=u;const{video:{isCaptureForbidden:S,isCameraTaken:T},media:{videoEncodeStatus:w,videoDecodeStatus:M}}=A,B=ui(A),G=NE(A),Z=G.length>0,ce=B?.bVideoOn&&!S&&!T,he=G.some(Qe=>Qe.bVideoOn),Se=M&&Z&&he;return f.payload.data.encoding?w&&ce&&Z?(Et("VIDEO_STATISTIC_DATA",f.payload),tp(f.payload)):tp(Zp):Se?(Et("VIDEO_STATISTIC_DATA",f.payload),vA(f.payload)):vA(Zp)})),handleVideoCellChangeEpic:a=>Si(a,[66.5,66.6]).pipe(lr(d=>{const{payload:{type:u,data:f}}=d;if(66.5===u){const{ssrc:A,width:S,height:T,quality:w}=f;Et("VIDEO_CELL_DETAILED_DATA",{userId:A,width:S,height:T,quality:w})}else if(66.6===u){const{ssrc:A,fps:S}=f;Et("VIDEO_CELL_DETAILED_DATA",{userId:A,fps:S})}}),ai(mt)),handleMaximumNumberOfHDSubscriptionsEpic:a=>a.pipe(Ui("".concat(ds)),tr(L(function*(){return ud()?1:(yield go.isSupportVideoDecodeHardwareAcceleration())?4:1})),Ne(d=>JE(d)))}),GN=Object.freeze({__proto__:null,handleVBPreloadEpic:a=>Si(a,[Or.VbModelPreloadingOk,Or.VbModelPreloading_3S,Or.VbModelPreloading_10S,Or.VbSettingParaError]).pipe(tr(d=>{const{payload:{type:u,data:f}}=d,A=[];return[Or.VbModelPreloadingOk,Or.VbModelPreloading_3S,Or.VbModelPreloading_10S].includes(u)?(A.push(XE(!0)),Et("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",!0),u===Or.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):u===Or.VbSettingParaError&&(f===c_.VBModelNotMatch?(Et("VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",!1),A.push(XE(!1))):(Et("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",!1),A.push(__(!1)))),zn(A)})),handleVBSettingSuccessEpic:a=>Si(a,Or.StartVideoStreamInVbSettingSuccess).pipe(Ne(()=>(Et("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",!0),__(!0))))});const Pb={videoSsrc:0,cameraDevicesList:[],activeCamera:ud()?W.MobileVideoFacingMode.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:W.VideoQuality.Video_360P,captureCanvasList:[],subscribedVideoList:[],renderedVideoList:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,receivedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1}},WN=na({["".concat(mA)]:Pt((a,d)=>{let{payload:u}=d;a.videoSsrc=u}),["".concat(gA)]:Pt((a,d)=>{let{payload:u}=d;a.cameraDevicesList=u}),["".concat(zs)]:Pt((a,d)=>{let{payload:u}=d;a.activeCamera=u}),["".concat(zE)]:Pt((a,d)=>{let{payload:u}=d;a.activeVideoId=u.userId}),["".concat(Ko)]:Pt((a,d)=>{let{payload:u}=d;a.isCurrentUserStartedVideo=u}),["".concat(lf)]:Pt((a,d)=>{let{payload:u}=d;a.spotlightUserList=u}),["".concat(Hc)]:Pt((a,d)=>{let{payload:u}=d;a.isCaptureForbidden=u}),["".concat(Bw)]:Pt((a,d)=>{let{payload:u}=d;a.receivedVideoMaxQuality=u}),["".concat(_A)]:Pt((a,d)=>{let{payload:u}=d,f=u;Array.isArray(u)||(f=[u]),a.captureCanvasList=f}),["".concat(Gc)]:Pt((a,d)=>{let{payload:u}=d;a.isVideoMuted=u}),["".concat(df)]:Pt((a,d)=>{let{payload:u}=d;a.isCaptureCameraLoading=u}),["".concat(YE)]:Pt((a,d)=>{let{payload:u}=d;a.isCameraTaken=u}),["".concat(Fw)]:Pt((a,d)=>{let{payload:u}=d;a.isVerifiedVideoCaptureCanvasAfterFailover=u}),["".concat(qE)]:Pt((a,d)=>{let{payload:u}=d;a.isVerifiedVideoRenderCanvasAfterFailover=u}),["".concat(Nm)]:Pt((a,d)=>{let{payload:u}=d;a.receivedVideoDimension=u}),["".concat(gd)]:Pt((a,d)=>{let{payload:u}=d;a.subscribedVideoList.includes(u)||a.subscribedVideoList.push(u)}),["".concat(cC)]:Pt((a,d)=>{let{payload:u}=d;const f=a.subscribedVideoList.indexOf(u);f>=0&&a.subscribedVideoList.splice(f,1)}),["".concat(th)]:Pt((a,d)=>{let{payload:u}=d;const f=a.renderedVideoList.find(A=>A.userId===u.userId&&A.key===u.key&&A.canvasId===u.canvasId);f?f.videoQuality=u.videoQuality:a.renderedVideoList.push(fn({},u))}),["".concat(Vw)]:Pt((a,d)=>{let{payload:u}=d;const f=a.renderedVideoList.findIndex(A=>A.userId===u.userId&&A.key===u.key&&A.canvasId===u.canvasId);f>=0&&a.renderedVideoList.splice(f,1)}),["".concat(uC)]:Pt((a,d)=>{let{payload:u}=d;a.isFollowHostVideoLayout=u}),["".concat(Uw)]:Pt((a,d)=>{let{payload:u}=d;a.hostDragLayout=u}),["".concat(jw)]:Pt((a,d)=>{let{payload:u}=d;a.isSupportHDVideo=u}),["".concat(JE)]:Pt((a,d)=>{let{payload:u}=d;a.maximumNumbeOfHDSubscriptions=u}),["".concat(g_)]:Pt((a,d)=>{let{payload:u}=d;a.bCanUnmuteVideo=u}),["".concat(XE)]:Pt((a,d)=>{let{payload:u}=d;a.virtualBackground.isVBPreloadReady=u}),["".concat(__)]:Pt((a,d)=>{let{payload:u}=d;a.virtualBackground.isVBConfigured=u}),["".concat(ep)]:Pt((a,d)=>{let{payload:u}=d;a.virtualBackground.imageSrc=u.imageSrc,a.virtualBackground.cropped=u.cropped}),["".concat(v_)]:Pt((a,d)=>{let{payload:u}=d;const{encode:f,decode:A}=u;void 0!==f&&(a.hardwareAcceleration.encode=f),void 0!==A&&(a.hardwareAcceleration.decode=A)}),["".concat(tp)]:Pt((a,d)=>{let{payload:u}=d;a.statistic.encode=u.data}),["".concat(vA)]:Pt((a,d)=>{let{payload:u}=d;a.statistic.decode=u.data}),["".concat(Ol)]:Pt((a,d)=>{let{payload:u}=d;const{cameraId:f,captureWidth:A,captureHeight:S,videoDOMId:T,originalRatio:w}=u;a.activeCamera=f,a.customizedVideoOption={captureWidth:A,captureHeight:S,videoDOMId:T,originalRatio:w}}),["".concat(Zh)]:a=>fn(fn({},Pb),{},{captureCanvasList:a.captureCanvasList,activeCamera:a.activeCamera,isVerifiedVideoCaptureCanvasAfterFailover:!1,isVerifiedVideoRenderCanvasAfterFailover:!1,customizedVideoOption:a.customizedVideoOption})},Pb),UR=xu(FR,GN),{InitSuccessVideo:iI,InitSuccessAudio:oI,InitSuccessSharing:sI,InitFailedVideo:xl,InitFailedAudio:F_,InitFailedSharing:aI}=Or;let bf;const Mb=new Ue(n_(VC,OR,QN,xu(Object.freeze({__proto__:null,connectToMediaStreamEpic:(a,d)=>a.pipe(Ui("".concat(ds)),Qn(d),Un(u=>{let[,f]=u;return void 0!==f.media.assetsPath&&void 0!==f.media.mediaConstraints}),lr(u=>{let[,f]=u;const{media:{assetsPath:A,mediaConstraints:S,fileWithVersion:T,enforceMultipleVideos:w},meeting:{enableAudioQos:M,enableVideoQos:B}}=f;if(bf=go.getInstance(),bf.notifySDKMeetingReady(),A&&S){const G={};wa()&&Object.assign(G,{enableMultiDecodeVideoWithoutSAB:!!w}),lb()&&Object.assign(G,{resourceManager:XC.IResourceManager,file:[{path:"".concat(A,"/vb-resources/vbbuffer.bin"),type:"bin"},{path:"".concat(A,"/vb-resources/tf.min.js"),type:"js"}]}),bf.setAssetsAndConstraint(A,S,T,G)}S_(d).pipe(Qn(d)).subscribe(G=>{let[Z,ce]=G;const{meeting:{svcUrl:he,meetingNumber:ue,conId:Se,e2eEncrypt:Qe,userId:He,isWebinar:Ke}}=ce;var et;Z&&(null===(et=bf)||void 0===et||et.connect({svcUrl:he,meetingNumber:ue,conId:Se,e2eEncrypt:Qe,isViewOnly:Xa(Z.userRole),currentUserId:He,isWebinar:Ke,enableAudioQos:M,enableVideoQos:B}))})}),Qo(()=>Kd(u=>{var f;return null===(f=bf)||void 0===f?void 0:f.registerCallback(u)},u=>{var f;return null===(f=bf)||void 0===f?void 0:f.unregisterCallback(u)},(u,f)=>({type:u,data:f})).pipe(Ne(u=>qv(u))))),connectedMediaStreamEpic:a=>Si(a,[iI,oI,sI,xl,F_,aI]).pipe(sR(d=>{const{payload:{type:u,data:f}}=d;if(u===oI||u===F_){if(f===Ja.EncodeSuccess)return Et("AUDIO_ENCODE_SUCCESS"),Pn(cm("success"));if(f===Ja.DecodeSuccess)return Et("AUDIO_DECODE_SUCCESS"),Pn(vi("success"));if(f===Ja.EncodeFailed)return Et("AUDIO_ENCODE_FAIL"),Pn(cm("failed"));if(f===Ja.DecodeFailed)return Et("AUDIO_DECODE_FAIL"),Pn(vi("failed"))}else if(u===iI||u===xl){if(f===Ja.EncodeSuccess)return Et("VIDEO_ENCODE_SUCCESS"),Pn(um("success"));if(f===Ja.DecodeSuccess)return Et("VIDEO_DECODE_SUCCESS"),Pn(lm("success"));if(f===Ja.EncodeFailed)return Et("VIDEO_ENCODE_FAIL"),Pn(um("failed"));if(f===Ja.DecodeFailed)return Et("VIDEO_DECODE_FAIL"),Pn(lm("failed"))}else if(u===sI||u===aI){if(f===Ja.EncodeSuccess)return Et("SHARING_ENCODE_SUCCESS"),Pn(pE("success"));if(f===Ja.DecodeSuccess)return Et("SHARING_DECODE_SUCCESS"),Pn(Jd("success"));if(f===Ja.EncodeFailed)return Et("SHARING_ENCODE_FAIL"),Pn(pE("failed"));if(f===Ja.DecodeFailed)return Et("SHARING_DECODE_FAIL"),Pn(Jd("failed"));if(u===sI&&void 0===f)return Et("SHARING_DECODE_SUCCESS"),Pn(Jd("success"))}})),mediaDeviceUpdateEpic:(a,d)=>Si(a,[iI,oI]).pipe(aR(()=>{if("object"==typeof navigator.mediaDevices)return Zs(cR(),Zs(Si(a,Or.StartVideoCaptureSuccess),Ds(navigator.mediaDevices,"devicechange"),Si(a,Or.UserGrantCaptureAudio).pipe(Un(()=>!d.value.audio.isUserGrantCaptureAudio))).pipe(tr(()=>cR().pipe(lr(()=>{Et("MEDIA_DEVICE_CHANGE")}))))).pipe(Qn(d),tr(u=>{let[f,A]=u;const S=[xE(f.microphones),$0(f.speakers),gA(f.cameras)];if(A.audio){const{audio:{activeMicrophone:M,activeSpeaker:B,microphoneDevicesList:G,speakerDevicesList:Z}}=A,{microphones:ce,speakers:he}=f,ue=G.filter(Qe=>-1===ce.findIndex(He=>He.deviceId===Qe.deviceId)),Se=Z.filter(Qe=>-1===he.findIndex(He=>He.deviceId===Qe.deviceId));var T,w;ue.length>0&&ue[0].deviceId===M&&(null===(T=bf)||void 0===T||T.changeMicrophone("default"),S.push(p_("default"))),Se.length>0&&Se[0].deviceId===B&&(null===(w=bf)||void 0===w||w.changeSpeaker("default"),S.push(Z0("default")))}return zn(S)}))})),sendUserNodeListToMediaSDKEpic:(a,d)=>ad(a,Ts).pipe(lr(u=>{const{type:f,payload:{body:A}}=u,S=go.getInstance(),T=f==="".concat(or);if(A.add){const w=A.add.map(M=>({userid:M.id,sn:M.zoomID&&Cl(M.zoomID)}));if(!T){const{meeting:{gcmSessinKey:M}}=d.value;S.sendUserNodeList(w,M)}S.updateUserMediaSN({added:w,isFromMainSession:T,iVType:Bo.SHARING_DECODE}),T&&S.updateUserMediaSN({added:w,isFromMainSession:T,iVType:Bo.AUDIO_DECODE})}if(A.remove){if(!T){const{meeting:{gcmSessinKey:w}}=d.value;S.sendUserNodeList(A.remove.map(M=>({userid:M.id,bremove:!0})),w)}S.updateUserMediaSN({removed:A.remove.map(w=>w.id),isFromMainSession:T,iVType:Bo.SHARING_DECODE}),T&&S.updateUserMediaSN({removed:A.remove.map(w=>w.id),isFromMainSession:T,iVType:Bo.AUDIO_DECODE})}}),ai(mt)),handleMediaSdkGcmIVResponseEpic:a=>Si(a,Or.AesGcmIvResponse).pipe(lr(d=>{const{payload:{data:{workerType:u,iv:f}}}=d,A=ar.get(hs.WebclientIVState);if(A){const S=fn(fn({},A),{},{[u]:f});ar.set(hs.WebclientIVState,S,Vi.SessionStorage)}}),ai(mt)),handleMediaEncryptIndication:a=>a.pipe(Ui("".concat(Is)),Un(d=>[iA,Am,B0].includes(d.payload.evt)),Ne(d=>{const{payload:{evt:u,body:{encryptKey:f,additionalType:A}}}=d;return t_({type:u===iA?"audio":u===Am?"video":"sharing",encryptKey:f,additionalType:A})}))})))),VR=(a,d,u)=>Mb.pipe(tr(f=>f(a,d,u))),KN={meeting:SR,socket:Qm,participants:qC,media:HN},U_=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=new(0,zt.constructor)(zt.SchedulerAction),f=new ht,A=void 0,S=function(T){A=T;var w=(new ht).pipe(ho(u)),M=(new ht).pipe(ho(u)),B=new Hp(w),G=new I0(M,A.getState());return f.pipe(Ne(function(Z){var ce="dependencies"in a?Z(B,G,a.dependencies):Z(B,G);if(!ce)throw new TypeError('Your root Epic "'+(Z.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return ce}),tr(function(Z){return zn(Z).pipe(uE(u),ho(u))})).subscribe(A.dispatch),function(Z){return function(ce){var he=Z(ce);return M.next(A.getState()),w.next(ce),he}}};return S.run=function(T){f.next(T)},S}(),FA=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||mo;function cI(a){return function(d){for(var u=Object.keys(d),f={},A=0;A<u.length;A++){var S=u[A];"function"==typeof d[S]&&(f[S]=d[S])}var T,M,w=Object.keys(f);try{M=f,Object.keys(M).forEach(function(B){var G=M[B];if(void 0===G(void 0,{type:gn.INIT}))throw new Error(ea(12));if(void 0===G(void 0,{type:gn.PROBE_UNKNOWN_ACTION()}))throw new Error(ea(13))})}catch(M){T=M}return function(M,B){if(void 0===M&&(M={}),T)throw T;for(var G=!1,Z={},ce=0;ce<w.length;ce++){var he=w[ce],Se=M[he],Qe=(0,f[he])(Se,B);if(void 0===Qe)throw new Error(ea(14));Z[he]=Qe,G=G||Qe!==Se}return(G=G||w.length!==Object.keys(M).length)?Z:M}}(fn(fn({},KN),a))}const As=Symbol("store"),br=Symbol("getState"),ka=Symbol("dispatch"),Sf=Symbol("additionFeatures"),Xn=Symbol("mediaContext");function $n(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const{meeting:{isOnHold:M,isMeetingReset:B,meetingStatus:G}}=A.getState();if(G!==vs.Joined)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"closed"});if(B)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"reconnecting"});if(M)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"on hold"})}for(var S=arguments.length,T=new Array(S),w=0;w<S;w++)T[w]=arguments[w];return f.apply(this,T)}}function Cd(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const M=A.getState();if(!Hu(M))return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host or co-host can do the operation"})}for(var S=arguments.length,T=new Array(S),w=0;w<S;w++)T[w]=arguments[w];return f.apply(this,T)}}function Na(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const M=A.getState();if(!q0(M))return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can do the operation"})}for(var S=arguments.length,T=new Array(S),w=0;w<S;w++)T[w]=arguments[w];return f.apply(this,T)}}function jr(a){return function(d,u,f){const A=f.value;f.value=function(){const S=this[As];if(S&&void 0===S.getState()[a])return Promise.reject({type:cr,reason:"Module:".concat(a," is not enabled")});for(var T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return A.apply(this,w)}}}function uI(a){return function(d,u,f){const A=f.value;f.value=function(){const S=this[As];if(S){const{meeting:{meetingOptions:B}}=S.getState();if(!0===B[a])return Promise.reject({type:"OPERATION_LOCKED",reason:"".concat(a," is locked")})}for(var T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return A.apply(this,w)}}}let vu;function UA(a){return function(d,u,f){const A=f.value;f.value=function(S){const T=this[As];if(T){const Z=T.getState(),ce=Array.isArray(a)?a:[a];let he=Ks(Z).find(ue=>ue.userId===S);if(ce.findIndex(ue=>ue===vu.Attendee)>-1&&(he=dA(Z).find(ue=>ue.userId===S)),!he)return Promise.reject({type:qr,reason:"no matching user"});{const{meeting:{userId:ue}}=T.getState();for(let Se=0;Se<ce.length;Se++){const Qe=ce[Se];if(Qe===vu.Other&&S===ue)return Promise.reject({type:cr,reason:"operation is not applicable to self"});if(Qe===vu.Self&&S!==ue)return Promise.reject({type:cr,reason:"operation is only applicable to self "});if(Qe===vu.Client&&Rm(he.userType)||Qe===vu.Phone&&!Rm(he.userType))return Promise.reject({types:cr,reason:"improper target client"})}}}for(var w=arguments.length,M=new Array(w>1?w-1:0),B=1;B<w;B++)M[B-1]=arguments[B];const G=[S,...M];return A.apply(this,G)}}}!function(a){a.Self="Self",a.Other="Other",a.Client="Client",a.Phone="Phone",a.Attendee="Attendee"}(vu||(vu={}));class Xc{constructor(d){this[As]=void 0,this[ka]=void 0,this[br]=void 0,this[Sf]=void 0,this[As]=d,this[ka]=d.dispatch,this[br]=d.getState}}var VA,jA,Ym,Ec;const dp=Do.createAgent();let jR=(VA=UA(vu.Other),jA=UA(vu.Other),Ym=UA(vu.Other),er((Ec=class extends Xc{constructor(a){super(a),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(a,d,u){return this.useSDK=!0,this.init(a,d,u)}init(a,d,u){const{[ka]:f,[As]:A}=this;let S=b_,T=u?.fileWithVersion||!1,w="en-US",M="".concat(b_,"/").concat("1502_js_media.min.js");if(u){const{dependentAssets:B,additionalFeatures:G,constraints:Z,language:ce,webEndpoint:he}=u;if(ce&&(w=ce),he&&(to=function(Se,Qe){let He=Se;/^https?:\/\//.test(He)||(He="https://".concat(Se));try{const Ke=new URL(He);if(!Qe)return Ke.href;if(Qe.hostname)return Ke.hostname;if(Qe.path)return Ke.pathname}catch{return""}return""}(he,{hostname:!0})),B===eA.CDN||B===OC)S=OC,M="".concat(OC,"/").concat("1502_js_media.min.js"),T=!0;else if(B===eA.Global||B===b_)S=b_,M="".concat(b_,"/").concat("1502_js_media.min.js"),T=!0;else if(B===eA.CN||B===ub)S=ub,M="".concat(ub,"/").concat("1502_js_media.min.js"),T=!0;else if(B&&/^https?:\/\//.test(B)){let ue=B;"/"===ue[ue.length-1]&&(ue=ue.slice(0,length-2)),S=ue,M=T?"".concat(ue,"/").concat("1502_js_media.min.js"):"".concat(ue,"/").concat("js_media.min.js")}G&&Array.isArray(G)&&G.forEach(ue=>{if(this[Sf][ue]&&void 0===A.getState()[ue]){const{epic:Se,reducer:Qe,Client:He}=this[Sf][ue];A.injectReducer(ue,Qe),A.injectEpic(Se);const Ke=new He(A);this.modules.set(ue,Ke)}}),null!=Z&&Z.audio&&void 0===A.getState().audio&&(A.injectReducer("audio",kb),A.injectEpic(MR)),null!=Z&&Z.video&&void 0===A.getState().video&&(A.injectReducer("video",WN),A.injectEpic(UR)),null!=Z&&Z.screen&&void 0===A.getState().share&&(A.injectReducer("share",Sd),A.injectEpic(pR))}return f(O0({apiKey:a,signature:d,language:w,useSDK:this.useSDK})),f(Ka({mediaConstraints:u&&u.constraints||{},assetsPath:S,fileWithVersion:T,enforceMultipleVideos:u?.enforceMultipleVideos})),void 0!==u?.stayAwake&&f(ci(u.stayAwake)),new Promise((B,G)=>{null!=u&&u.skipJsMedia?B(""):function(Z,ce,he){const ue=document.createElement("script");ue.type="text/javascript",ue.readyState?ue.onreadystatechange=()=>{"loaded"!==ue.readyState&&"complete"!==ue.readyState||(ue.onreadystatechange=null,ce())}:(ue.onload=()=>{ce()},ue.onerror=()=>{G({type:qr,reason:"dependent assets are not accessible"})}),ue.src=Z,"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(ue):document.getElementsByTagName("head")[0].appendChild(ue)}(M,()=>{B("")})})}on(a,d){((u,f)=>{const A=zh[u];if(A){const S=ju.get(u);if(S)S.push(f),ju.set(u,S);else{ju.set(u,[f]);const w=Zs(...A.map(M=>{const{event:B,payload:G}=M;return Ds(Uc,B).pipe(Ne(Z=>G(Z)),ho(Zo))})).subscribe(M=>{const B=ju.get(u);B&&B.forEach(G=>{G(M)})});tf.push(w)}}})(a,d)}off(a,d){((u,f)=>{if(zh[u]){const A=ju.get(u);if(Array.isArray(A)){const S=A.filter(T=>T!==f);ju.set(u,S)}}})(a,d)}getFeatureModule(a){return this.modules.get(a)}leave(){const{[br]:a,[ka]:d}=this;return"connected"===a().socket.zoomSocketStatus?(d(Xv()),du(500).pipe(hc("")).toPromise()):Promise.resolve("")}end(){const{[br]:a,[ka]:d}=this;return"connected"===a().socket.zoomSocketStatus?(d(za()),du(500).pipe(lr(()=>{K0()}),hc("")).toPromise()):Promise.resolve("")}changeName(a,d){const u=this[As].getState(),{meeting:{bAllowAttendeeRename:f}}=u,A=ui(u),S=Xa(A.userRole),T=Hu(u);if(S)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"});if(d&&d!==A?.userId){if(T){const{participants:{attendeesList:w}}=u,M=w.find(B=>B.userId===d);if(M)return dp.rename(d,Hs(a),Hs(M.displayName)),IC(d,B=>B.displayName===a);{const B=dA(u).find(G=>G.userId===d);if(B){const G=k_.getInstance();return dp.rename(B.userId,Hs(a),Hs(B.displayName)),G.rename(B.jid,a),Ii("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",Z=>{const ce=Z.find(he=>he.jid===B.jid);return ce&&ce.displayName===a})}return Promise.reject({type:qr,reason:"no matching user"})}}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})}return a===A.displayName?Promise.resolve():T||f?(dp.rename(A.userId,Hs(a),Hs(A.displayName)),Ii("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",w=>w.displayName===a)):Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"host disallow rename themselves"})}makeHost(a){return dp.assignHost(a,!1),IC(a,d=>!0===d.isHost)}makeCoHost(a){const d=this[As].getState();return!0===Ks(d).find(f=>f.userId===a)?.bCoHost?Promise.reject({type:qr,reason:"user:[".concat(a,"] is already co-host ")}):(dp.assignHost(a,!0),IC(a,f=>!0===f.bCoHost))}revokeCoHost(a){const d=this[As].getState();return!1===Ks(d).find(f=>f.userId===a)?.bCoHost?Promise.reject({type:qr,reason:"user:[".concat(a,"] is not a co-host")}):(dp.revokeCoHost(a),IC(a,f=>!1===f.bCoHost))}isHost(){const a=this[As].getState(),d=ui(a);return!!d&&d.isHost}isCoHost(){const a=this[As].getState(),d=ui(a);return!!d&&!!d.bCoHost}isOriginHost(){const{meeting:{isOriginHost:a}}=this[br]();return a}getCurrentUserInfo(){const a=this[As].getState(),d=ui(a);if(d){const u={userId:d.userId,displayName:d.displayName,audio:d.audio,muted:d.muted,isHost:d.isHost,isCoHost:d.bCoHost,isGuest:d.bGuest,avatar:d.avatar,isPhoneUser:Rm(d.userType),bRaiseHand:d.bRaiseHand,bHold:d.bHold,bVideoOn:d.bVideoOn,sharerOn:d.sharerOn,sharePause:d.sharerPause,feedback:d.feedback,caps:d.caps};if(a.meeting.isWebinar&&Xa(d.userRole)){const{audio:f}=a,A=f?.isAllowToTalk;Object.assign(u,{isAllowToTalk:A})}return u}return null}getParticipantsList(){const a=this[As].getState(),{meeting:{meetingStatus:d}}=a,u=ui(a);return d===vs.Joined&&u&&!u.bHold?Ks(a).map(f=>({userId:f.userId,displayName:f.displayName,audio:f.audio,muted:f.muted,isHost:f.isHost,isCoHost:f.bCoHost,isGuest:f.bGuest,avatar:f.avatar,isPhoneUser:Rm(f.userType),bRaiseHand:f.bRaiseHand,bHold:f.bHold,bVideoOn:f.bVideoOn,sharerOn:f.sharerOn,sharePause:f.sharerPause,feedback:f.feedback,bLocalRecord:f.bLocalRecord,strPronoun:f.strPronoun,sdkKey:f.sdkKey,audioConnectionStatus:f.audioConnectionStatus,caps:f.caps})):[]}getAssistantsList(){const a=this[As].getState(),{meeting:{meetingStatus:d}}=a,u=ui(a);return d===vs.Joined&&u?AN(a).map(f=>({userId:f.userId,displayName:f.displayName,isNewAst:!0})):[]}getMeetingHost(){var a;const d=this[br]();let u=sf(d);return u||(null===(a=d.breakoutRoom)||void 0===a?void 0:a.currentRoom.status)!==ur.InRoom||(u=d.breakoutRoom.mainSessionAttendeeList.find(f=>f.isHost)),u?{userId:u.userId,displayName:u.displayName,audio:u.audio,muted:u.muted,isHost:u.isHost,isCoHost:u.bCoHost,avatar:u.avatar,isPhoneUser:Rm(u.userType),bRaiseHand:u.bRaiseHand,bHold:u.bHold,bVideoOn:u.bVideoOn,sharerOn:u.sharerOn,feedback:u.feedback}:null}getMeetingInfo(){const{meeting:{meetingStatus:a,isOnHold:d,meetingNumber:u,passWord:f,userName:A,userEmail:S,meetingTopic:T,meetingOptions:w,encType:M,region:B,network:G,topic:Z,zlkJwtToken:ce,userId:he,lang:ue,inviteEmail:Se,meetingId:Qe,participantID:He,h323Password:Ke,recordingDisclaimer:et,recordingDisclaimerForRecorder:Lt,wrInfo:Gt}}=this[br](),jt=a===vs.Joined&&!d;if(ce)return{topic:Z,password:f,userName:A,isInMeeting:jt,userId:he,meetingId:Qe};{let wt="";return 0===M?wt="None":1===M?wt="AES ECB":2===M&&(wt="AES GCM"),{meetingNumber:u,password:f,userName:A,userEmail:S,inviteEmail:Se,meetingTopic:T,encryptionType:wt,region:B,network:G,isInMeeting:jt,userId:he,lang:ue,webEndpoint:to,meetingId:Qe,participantId:He,telPwd:Ke,recordingInfo:{recordingDisclaimer:et,recordingDisclaimerForRecorder:Lt,isUserEnableRecordingReminder:w?.isUserEnableRecordingReminder},wrInfo:Gt}}}}).prototype,"end",[Na,$n],Object.getOwnPropertyDescriptor(Ec.prototype,"end"),Ec.prototype),er(Ec.prototype,"changeName",[$n],Object.getOwnPropertyDescriptor(Ec.prototype,"changeName"),Ec.prototype),er(Ec.prototype,"makeHost",[VA,Na,$n],Object.getOwnPropertyDescriptor(Ec.prototype,"makeHost"),Ec.prototype),er(Ec.prototype,"makeCoHost",[jA,Na,$n],Object.getOwnPropertyDescriptor(Ec.prototype,"makeCoHost"),Ec.prototype),er(Ec.prototype,"revokeCoHost",[Ym,Na,$n],Object.getOwnPropertyDescriptor(Ec.prototype,"revokeCoHost"),Ec.prototype),Ec);var zN=Object.freeze({__proto__:null,receiveChatMessageFromXMPPEpic:(a,d)=>Uh(a,24583).pipe(Qn(d),tr(u=>{let[f,A]=u;if(A.meeting.zlkJwtToken)return mt;const{payload:{body:{sn:S,senderName:T,senderJid:w,receiver:M,text:B,type:G}}}=f,Z=ui(A),ce=dA(A),{meeting:{jid:he,userId:ue},participants:{xmppAttendeeList:Se}}=A;return fc.beginDecrypt({decryptedText:B,type:fu.XMPP_CHAT,zoomId:S}).then(Qe=>{var He;let{message:Ke}=Qe,et=null,Lt=0,Gt="";Z&&Xa(Z.userRole)&&he===M?(et=Se.find(wt=>wt.jid===w),Lt=ue,Gt=Z.displayName):G===ki.Panelist&&(et=ce.find(wt=>wt.jid===w),Lt=ki.Panelist,Gt=Jp.displayName);const jt={message:Ke,sender:{name:T,userId:(null===(He=et)||void 0===He?void 0:He.userId)||0,avatar:""},receiver:{name:Gt,userId:Lt},timestamp:(new Date).getTime()};return Et("CHAT_RECEIVE_MESSAGE_EVENTS",jt),_d(jt)})})),receiveChatMessageFromRWGEpic:(a,d)=>Mn(a,7944).pipe(Qn(d),tr(u=>{let[f,A]=u;const{meeting:{bIbDisableChat:S,isWebinar:T},participants:{attendeesList:w}}=A,{payload:{body:{attendeeNodeID:M,sn:B,destNodeID:G,text:Z,senderName:ce,msgID:he}}}=f,ue=ui(A),Se=dA(A);if(ue){const Qe=Xa(ue?.userRole)&&M===ue.userId&&!he;if(!S&&!Qe){let He,Ke=B;if(!B){const et=w.find(Lt=>Lt.userId===G);et&&(Ke=et.zoomID)}if(M===ki.SilentModeUsers){const et=jh(Z),Lt={id:he,message:et,sender:{name:"Host",userId:G},receiver:{name:"Everyone (in Waiting Room)",userId:M},timestamp:(new Date).getTime()};He=Promise.resolve(Lt)}else He=fc.beginDecrypt({decryptedText:Z,zoomId:Ke,type:fu.RWG_CHAT}).then(et=>{let{message:Lt}=et;const Gt=w.find(sn=>sn.userId===G),jt=ce?jh(ce):Gt?.displayName;let wt="";if(M===ki.All)wt=T?"All panelists and attendees":"Everyone";else if(M===ki.Panelist)wt="All panelists";else if(T&&Se.findIndex(sn=>sn.userId===M)>-1)wt=Se.find(sn=>sn.userId===M).displayName;else{const sn=w.find(hn=>hn.userId===M);sn&&(wt=sn.displayName)}return{id:he,message:Lt,sender:{name:jt,userId:G,avatar:Gt?.avatar},receiver:{name:wt,userId:M},timestamp:(new Date).getTime()}});return He.then(et=>(Et("CHAT_RECEIVE_MESSAGE_EVENTS",et),_d(et)))}}return mt})),changeAttendeePrivilegeResponse:(a,d)=>Mn(a,mc).pipe(Un(u=>{var f,A;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.chatPriviledge)||void 0!==(null===(A=u.payload.body)||void 0===A?void 0:A.bAllowAttendeeChat)}),Qn(d),Ne(u=>{let[f,A]=u;const{payload:{body:{chatPriviledge:S,bAllowAttendeeChat:T}}}=f,{chat:{chatPrivilege:w}}=A;return void 0!==T?(Et("CHAT_PRIVILEGE_CHANGE",!0===T?{chatPrivilege:w}:{chatPrivilege:eo.NoAttendee}),ZE(T)):(Et("CHAT_PRIVILEGE_CHANGE",{chatPrivilege:S}),AA(S))})),changePanelistPrivilegeResponse:a=>Mn(a,mc).pipe(Un(d=>{var u;return void 0!==(null===(u=d.payload.body)||void 0===u?void 0:u.panelistChatPriviledge)}),Ne(d=>{const{payload:{body:{panelistChatPriviledge:u}}}=d;return Et("CHAT_PRIVILEGE_CHANGE",{panelistChatPrivilege:u}),$E(u)})),chatResponseEpic:(a,d)=>Mn(a,4136).pipe(Qn(d),tr(u=>{let[f,A]=u;const{payload:{body:{result:S,destNodeID:T,msgID:w}}}=f,{meeting:{userId:M},chat:{chatHistory:B}}=A;if(S===oA.Success){var G,Z;const ce=[];for(let ue=B.length-1;ue>=0;ue--){const Se=B[ue];if(!Se.id&&Se.sender.userId===M&&[ki.All,ki.Panelist,ki.IndividualCcPanelist,T].includes(Se.receiver.userId)&&ce.unshift(Se),Se.id)break}const he=ce.length>0&&null!==(G=null===(Z=ce[0])||void 0===Z?void 0:Z.highResTimeStampForIdentification)&&void 0!==G?G:0;return Et("CHAT_MESSAGE_RESPONSE",{msgId:w,receiverId:T,identification:he}),Pn(zw({destNodeID:T,msgID:w,userId:M}))}return S===oA.Delete||S===oA.Block?Pn(yA({msgId:w})):mt})),chatCmdResponseEpic:a=>Mn(a,4238).pipe(tr(d=>{const{payload:{body:{bSuccess:u,cmd:f,msgID:A}}}=d,S=[];return u&&f===ym.Delete&&(S.push(yA({msgId:A})),Et("CHAT_DELETE_MESSAGE_REPONSE",{id:A})),zn(S)})),chatCmdIndicationEpic:a=>Mn(a,7960).pipe(tr(d=>{const{payload:{body:{cmd:u,msgID:f}}}=d,A=[];return u===ym.Delete&&(A.push(yA({msgId:f})),Et("CHAT_DELETE_MESSAGE_REPONSE",{id:f})),zn(A)}))});const lI={chatHistory:[],chatPrivilege:eo.All,panelistChatPrivilege:dd.AllPanelist,isAllowAttendeeChat:!0},QA=na({["".concat(_d)]:Pt((a,d)=>{let{payload:u}=d;a.chatHistory.push(u)}),["".concat(AA)]:Pt((a,d)=>{let{payload:u}=d;a.chatPrivilege=u}),["".concat($E)]:Pt((a,d)=>{let{payload:u}=d;a.panelistChatPrivilege=u}),["".concat(ZE)]:Pt((a,d)=>{let{payload:u}=d;a.isAllowAttendeeChat=u}),["".concat(zw)]:Pt((a,d)=>{let{payload:u}=d;const{destNodeID:f,msgID:A,userId:S}=u,T=[];for(let w=a.chatHistory.length-1;w>=0;w--){const M=a.chatHistory[w];if(!M.id&&M.sender.userId===S&&[ki.All,ki.Panelist,f].includes(M.receiver.userId)&&T.unshift(M),M.id)break}T.length>0&&(T[0].id=A)}),["".concat(yA)]:Pt((a,d)=>{let{payload:u}=d;const{msgId:f}=u,A=a.chatHistory.findIndex(S=>S.id===f);A>=0&&a.chatHistory.splice(A,1)}),["".concat(pf)]:()=>fn({},lI)},lI);function qm(a,d,u){if(null!=u&&u.host)return[sf(a),...l_(a)].filter(f=>f?.userId!==d).map(f=>({userId:f?.userId,displayName:f?.displayName,isHost:f?.isHost,isCoHost:f?.bCoHost}));{let f=[sf(a),...l_(a),...a.participants.attendeesList.filter(A=>!(A.bCoHost||A.isHost||A.bHold))];if(null!=u&&u.includeAttendee){const A=dA(a).filter(S=>!Rm(S.userType));f=[...f,...A]}return f.filter(A=>A?.userId!==d).map(A=>({userId:A?.userId,displayName:A?.displayName,isHost:A?.isHost,isCoHost:A?.bCoHost}))}}var $c;const Jm=Do.createAgent(),QR=k_.getInstance(),xb=a=>{const{text:d,destId:u,sn:f,attendeeId:A}=a;return fc.beginEncrypt({text:d,type:fu.RWG_CHAT}).then(S=>{Jm.chat(S,u,f,A)})};let YN=(er(($c=class extends Xc{send(a,d){if(!a)return Promise.reject({type:qr,reason:"Text is empty"});const{[br]:u,[ka]:f}=this,A=u(),S=ui(A),T=function(ue,Se){if(Se===ki.All)return sA;if(Se===ki.Panelist)return Jp;if(Se===ki.SilentModeUsers)return F0;{const{meeting:{isWebinar:Qe},participants:{xmppAttendeeList:He,attendeesList:Ke}}=ue;return Qe?Ke.find(et=>et.userId===Se)||He.find(et=>et.userId===Se):Ke.find(et=>et.userId===Se)}}(A,d),w=((ue,Se,Qe)=>{const He=Se?.userId;if(null==ue||!ue.zoomID||null==Se||!Se.displayName||He===ue.userId)return{type:qr,reason:"invalid target user"};const{chat:{chatPrivilege:Ke,panelistChatPrivilege:et},meeting:{isWebinar:Lt}}=Qe,Gt=Hu(Qe),jt=Se.isHost||Se.bCoHost;let wt=!1;if(!Gt){if(Lt)if(Xa(ue.userRole))(Ke===eo.NoAttendee||Ke===eo.AllPanelist&&He!==ki.Panelist||Ke===eo.All&&He!==ki.All&&He!==ki.Panelist)&&(wt=!0);else{const sn=Xa(Se?.userRole);(et===dd.Invalid||et===dd.AllPanelist&&(sn||He===ki.All))&&(wt=!0)}else(Ke===eo.NoAttendee||Ke===eo.Host&&!jt||He===ki.SilentModeUsers||Ke===eo.EveryonePublicly&&He!==ki.All&&!jt)&&(wt=!0);if(wt)return{type:"INSUFFICIENT_PRIVILEGES",reason:"Insufficient chat privilege"}}return null})(S,T,A);if(w)return Promise.reject(w);const{meeting:{isWebinar:M,encType:B}}=A,G=B===vm.AES_GCM;let Z=Promise.resolve(),ce=!1;const he=M&&Xa(T.userRole);return d===ki.SilentModeUsers?Jm.chat(Hs(a),d):M?he?8==(8&T.clientCap)?Z=xb({text:a,destId:ki.IndividualCcPanelist,sn:S?.zoomID,attendeeId:d}):(Z=xb({text:a,destId:ki.Panelist,sn:S?.zoomID,attendeeId:d}).then(()=>(ue=>{const{text:Se,jid:Qe,isGCMEnabled:He}=ue;return fc.beginEncrypt({text:Se,type:fu.XMPP_CHAT}).then(Ke=>{QR.sendWebinarMseeage(Ke,Qe,ki.IndividualCcPanelist,He)})})({text:a,jid:T.jid,isGCMEnabled:G})),ce=!0):T&&(Z=xb({text:a,destId:T.userId,sn:S?.zoomID})):Z=xb({text:a,destId:T.userId,sn:S?.zoomID}),Z.then(()=>{const ue=(new Date).getTime(),Se=performance.now(),Qe={message:a,sender:{name:S?.displayName,userId:S?.userId,avatar:S?.avatar},receiver:{name:T?.displayName,userId:he?ki.IndividualCcPanelist:T?.userId},timestamp:ue,highResTimeStampForIdentification:Se};return f(_d(Qe)),ce?(Et("CHAT_RECEIVE_MESSAGE_EVENTS",Qe),Qe):new Promise((He,Ke)=>{Gs("CHAT_MESSAGE_RESPONSE").pipe(Nu(5e3),eN(et=>Se!==et.identification||!([et.receiverId,ki.All,ki.Panelist].includes(d)||et.receiverId===ki.IndividualCcPanelist)),ri(1)).subscribe(et=>{const{msgId:Lt}=et,Gt=fn(fn({id:Lt},Fh(Qe,["highResTimeStampForIdentification"])),he&&{receiver:{name:T?.displayName,userId:T?.userId}});Et("CHAT_RECEIVE_MESSAGE_EVENTS",Gt),He(Gt)},()=>{Ke({type:"OPERATION_TIMEOUT"})})})})}setPrivilege(a){const d=this[br](),{meeting:{isWebinar:u},chat:{chatPrivilege:f}}=d;return f===a?Promise.resolve(""):!u&&!Fc.includes(a)||u&&!Em.includes(a)?Promise.reject({type:qr,reason:"invalid privilege value of parameter"}):(Jm.setChatPriviledge(a),Ii("CHAT_PRIVILEGE_CHANGE",A=>A.chatPrivilege===a))}setPanelistPrivilege(a){const d=this[br](),{chat:{panelistChatPrivilege:u}}=d,f=bm[a];return u===f?Promise.resolve(""):Object.values(Fo).includes(a)?(Jm.setPanelistChatPrivilege(a),Ii("CHAT_PRIVILEGE_CHANGE",A=>A.panelistChatPrivilege===f)):Promise.reject({type:qr,reason:"Panelist privilege value is invalid"})}deleteMessage(a){const d=this[br](),{chat:{chatHistory:u},meeting:{meetingOptions:f,userId:A}}=d;if(null!=f&&f.isEnableDeleteChatMsg){const S=Hu(d),T=u.find(w=>w.id===a);if(T){const{sender:w}=T;if(S)Jm.chatCmdReq(a,ym.Delete);else{if(w.userId!==A)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"can not delete message"});Jm.chatCmdReq(a,ym.Delete)}return Ii("CHAT_DELETE_MESSAGE_REPONSE",M=>M.id===a).then(()=>({id:a}))}return Promise.reject({type:qr,reason:"msgId is wrong"})}return Promise.reject({type:cr,reason:"can not delete messages"})}lockChat(a){const d=this[br](),{meeting:{meetingOptions:u}}=d;return this.setPrivilege(a?eo.NoOne:null!=u&&u.isPrivateChatEnabled?eo.All:eo.EveryonePublicly)}getPrivilege(){const{chat:{chatPrivilege:a,isAllowAttendeeChat:d}}=this[br]();return d?a:eo.NoAttendee}getReceivers(){const a=this[br](),{chat:{chatPrivilege:d,panelistChatPrivilege:u,isAllowAttendeeChat:f},meeting:{isWebinar:A}}=a;if(!A&&!f)return[];const S=ui(a),T=Hu(a);if(S)if(A)if(Xa(S.userRole)){if(!f)return[];if(d===eo.All)return[Jp,sA];if(d===eo.AllPanelist)return[Jp];if(d===eo.NoOne)return[]}else{if(T||u===dd.Everyone){const w=qm(a,S.userId,{includeAttendee:!0});return[Jp,sA,...w]}if(u===dd.AllPanelist){const w=qm(a,S.userId);return[Jp,...w]}}else{const w=Hu(a);if(d===eo.All||w){const M=qm(a,S.userId);return[sA,...M]}if(d===eo.Host)return qm(a,S.userId,{host:!0});if(d===eo.EveryonePublicly){const M=qm(a,S.userId,{host:!0});return[sA,...M]}if(d===eo.NoOne)return[]}return[]}getHistory(){return this[br]().chat.chatHistory.map(a=>Fh(a,["highResTimeStampForIdentification"]))}isAllowToDeleteMessages(){const a=this[br](),{meeting:{meetingOptions:d}}=a;return d?.isEnableDeleteChatMsg}}).prototype,"send",[$n],Object.getOwnPropertyDescriptor($c.prototype,"send"),$c.prototype),er($c.prototype,"setPrivilege",[Cd,$n],Object.getOwnPropertyDescriptor($c.prototype,"setPrivilege"),$c.prototype),er($c.prototype,"setPanelistPrivilege",[Cd,$n,function(a,d,u){const f=u.value;u.value=function(){const A=this[As];if(A){const{meeting:{isWebinar:M}}=A.getState();if(!M)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"non-webinar"})}for(var S=arguments.length,T=new Array(S),w=0;w<S;w++)T[w]=arguments[w];return f.apply(this,T)}}],Object.getOwnPropertyDescriptor($c.prototype,"setPanelistPrivilege"),$c.prototype),er($c.prototype,"deleteMessage",[$n],Object.getOwnPropertyDescriptor($c.prototype,"deleteMessage"),$c.prototype),er($c.prototype,"lockChat",[Cd,$n],Object.getOwnPropertyDescriptor($c.prototype,"lockChat"),$c.prototype),$c);const qN=xu(zN);var JN=Object.freeze({__proto__:null,handleRecordingEnableEpic:a=>a.pipe(Ui("".concat(hm)),Ne(d=>{const{payload:{recordingEnable:u}}=d;return AC(u)})),receiveCloudRecordIndication:a=>Mn(a,mc).pipe(Un(d=>{var u,f,A;return void 0!==(null===(u=d.payload.body)||void 0===u?void 0:u.cmrServerStatus)||void 0!==(null===(f=d.payload.body)||void 0===f?void 0:f.disAllowClientStopAutoCmr)||void 0!==(null===(A=d.payload.body)||void 0===A?void 0:A.enableAutomicRecordingCloud)}),tr(d=>{const{cmrServerStatus:u,disAllowClientStopAutoCmr:f,enableAutomicRecordingCloud:A}=d.payload.body,S=[];return void 0!==u&&(u!==gc.Init&&Et("CLOUD_RECORDING_STATUS_CHANGE",{cmrServerStatus:u}),S.push(eR(u))),void 0!==f&&S.push(tR(!f)),void 0!==A&&S.push(yC(A)),zn(S)})),receiveLocalRecordingIndicationEpic:a=>Mn(a,Ts).pipe(Un(d=>{const{payload:{body:{update:u}}}=d;return u?.some(f=>void 0!==f.bLocalRecordStatus)}),lr(d=>{const{payload:{body:{update:u}}}=d;u.filter(f=>void 0!==f.bLocalRecordStatus).forEach(f=>{Et("LOCAL_RECORDING_CHANGE",{userId:f.id,bLocalRecord:1===f.bLocalRecordStatus})})}),ai(mt))});const HR={cmrStatus:gc.Stop,recordingEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1},dI=na({["".concat(eR)]:Pt((a,d)=>{let{payload:u}=d;a.cmrStatus=u}),["".concat(AC)]:Pt((a,d)=>{let{payload:u}=d;a.recordingEnable=u}),["".concat(tR)]:Pt((a,d)=>{let{payload:u}=d;a.allowStopAutoRecording=u}),["".concat(yC)]:Pt((a,d)=>{let{payload:u}=d;a.automaticCloudRecordingEnable=u}),["".concat(Wc)]:()=>fn({},HR)},HR);var Br,hI,Lb,Id;const V_=Do.createAgent();let Xm=(Br=jr("recording"),hI=jr("recording"),Lb=jr("recording"),er((Id=class extends Xc{startRecording(){const a=this[br](),{meeting:{bIbDisableRecording:d,recordingEnable:u},recording:{cmrStatus:f}}=a;return d?Promise.reject({type:cr,reason:"Rejected by Information Barrier"}):u?f===gc.Start?Promise.resolve(""):(V_.recordMeeting(!0,!1),Ii("CLOUD_RECORDING_STATUS_CHANGE",A=>A.cmrServerStatus===gc.Start)):Promise.reject({type:cr,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const a=this[br](),{recording:{cmrStatus:d}}=a;return d===gc.Pause?Promise.resolve(""):d!==gc.Start?Promise.reject({type:cr,reason:"Recording is not started"}):(V_.recordMeeting(!1,!0),Ii("CLOUD_RECORDING_STATUS_CHANGE",u=>u.cmrServerStatus===gc.Pause))}stopRecording(){const a=this[br](),{recording:{cmrStatus:d}}=a;return d===gc.Stop?Promise.resolve(""):(V_.recordMeeting(!1,!1),Ii("CLOUD_RECORDING_STATUS_CHANGE",u=>u.cmrServerStatus===gc.Stop))}getRecordingStatus(){const a=this[br](),{recording:{cmrStatus:d}}=a;return d===gc.Start?W.RecordingStatus.Recording:d===gc.Pause?W.RecordingStatus.Paused:W.RecordingStatus.Stopped}isRecordingEnabled(){const a=this[br](),{recording:{recordingEnable:d}}=a;return d}isAllowedToStopAutoRecording(){const a=this[br](),{recording:{allowStopAutoRecording:d}}=a;return d}isAutomaticCloudRecordingEnabled(){const a=this[br](),{recording:{automaticCloudRecordingEnable:d}}=a;return d}}).prototype,"startRecording",[Cd,$n,Br],Object.getOwnPropertyDescriptor(Id.prototype,"startRecording"),Id.prototype),er(Id.prototype,"pauseRecording",[Cd,$n,hI],Object.getOwnPropertyDescriptor(Id.prototype,"pauseRecording"),Id.prototype),er(Id.prototype,"stopRecording",[Cd,$n,Lb],Object.getOwnPropertyDescriptor(Id.prototype,"stopRecording"),Id.prototype),Id);const pI=xu(JN);let $m,HA;(function(a){a[a.All=1]="All",a[a.Private=2]="Private"})($m||($m={})),function(a){a.SUCCESS="success"}(HA||(HA={}));var GA=Object.freeze({__proto__:null,receiveCmdChannelResponseXMPPEpic:(a,d)=>Uh(a,24577).pipe(Qn(d),Nl(u=>{let[f]=u;const{payload:{body:{status:A}}}=f;if(A===HA.SUCCESS)return Et("COMMAND_STATUS_EVENTS",W.ConnectionState.Connected),EC(A)})),receiveCmdChannelMessageFromXMPPEpic:(a,d)=>Uh(a,24583).pipe(Qn(d),lr(u=>{let[f,A]=u;const{meeting:{userId:S,encType:T},cmd:{jids:w}}=A,{payload:{body:{senderName:M,senderJid:B,text:G,type:Z,receiver:ce,msgid:he,sn:ue}}}=f,Se=gw(w,ce),Qe=T===vm.AES_GCM,He=gw(w,B),Ke=(new Date).getTime();let et=Promise.resolve({message:G});return Qe&&(et=fc.beginDecrypt({decryptedText:G,type:fu.XMPP_CHAT,zoomId:ue})),et.then(Lt=>{let{message:Gt}=Lt;(Z===$m.Private&&parseInt(Se,10)===S||Z===$m.All)&&Et("COMMAND_RECEIVE_MESSAGE_EVENTS",{senderId:He,senderName:M,text:jh(Gt),timestamp:Ke,msgid:he})})}),ai(mt)),receiveUserJidUpdateFromXMPPEpic:a=>Uh(a,24595).pipe(tr(d=>{const{payload:{body:{action:u,data:f}}}=d,A=[];return[Da.List,Da.Add,Da.update].includes(u)&&f&&A.push(Kc(f)),u===Da.Remove&&f&&A.push(mf(f)),zn(A)}))});const Cf={connectionStatus:"initial",jids:{}},GR=na({["".concat(nR)]:()=>fn({},Cf),["".concat(Kc)]:Pt((a,d)=>{let{payload:u}=d;u.map(f=>{const{jid:A,node:S}=f;a.jids[S]=A})}),["".concat(mf)]:Pt((a,d)=>{let{payload:u}=d;u.map(f=>{const{jid:A}=f,S=gw(a.jids,A);delete a.jids[S]})}),["".concat(EC)]:Pt((a,d)=>{let{payload:u}=d;a.connectionStatus=u})},Cf);var Bb;const fI=k_.getInstance(),j_=(a,d,u)=>{const f=d,A=mw(a),S=f?$m.Private:$m.All;return u?fc.beginEncrypt({text:A,type:fu.XMPP_CHAT}).then(T=>{fI.sendWebinarMseeage(T,f,S,!0)}):fI.sendWebinarMseeage(A,f,S,!1)};let Fb=(er((Bb=class extends Xc{send(a,d){if(!a)return Promise.reject({type:qr,reason:"Text is empty"});if("string"!=typeof a)return Promise.reject({type:qr,reason:"Text is not a string"});if(a.length>512)return Promise.reject({type:qr,reason:"Text exceeds the max length(512)."});const{[br]:u}=this,f=u(),{socket:{xmppSocketStatus:A},meeting:{userId:S,encType:T},cmd:{connectionStatus:w}}=f,M=T===vm.AES_GCM;return A!==fi.Connected?Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"Command channel is not ready"}):(w===HA.SUCCESS?Promise.resolve(!0):Gs("COMMAND_STATUS_EVENTS",1).toPromise().then(B=>B===W.ConnectionState.Connected||Promise.reject({type:cr,reason:"Cannot establish the command channel"}))).then(()=>{if(d){const B=u(),{cmd:{jids:G}}=B;return-1!==Ks(B).findIndex(Z=>Z.userId===d)?(Object.prototype.hasOwnProperty.call(G,d)?Promise.resolve():Gs("UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE").pipe(eN(Z=>-1!==Z.findIndex(ce=>ce.userId===d)),ri(1),ho(Ss)).toPromise()).then(()=>(j_(a,G[d],M),{timestamp:(new Date).getTime(),text:a,receiverId:d,senderId:S})):Promise.reject({type:qr,reason:"Cannot find the user"})}return j_(a,"",M),{timestamp:(new Date).getTime(),text:a,receiverId:0,senderId:S}})}getJids(){const{[br]:a}=this,d=a(),{cmd:{jids:u}}=d;return u}}).prototype,"send",[$n],Object.getOwnPropertyDescriptor(Bb.prototype,"send"),Bb.prototype),Bb);const If=xu(GA),WR=(a,d,u,f)=>{const{getState:A,dispatch:S}=u,T=A(),{participants:{attendeesList:w},audio:{localShareAudioUserMutedList:M},share:{isReceiveSharingFromMainSession:B},breakoutRoom:G}=T,Z=(B?G?.mainSessionAttendeeList:w).find(ce=>ce.userId==a);if(Z){if(Z.bShareAudioOn){const ce=M.find(he=>he.userId===a);return ce&&ce.muted===!d&&S(M_(f,a,d,T)),Promise.resolve("")}return Promise.reject({type:cr,reason:"Cannot ".concat(d?"mute":"unmute"," share audio when the user's share audio is not enable.")})}return Promise.reject({type:qr,reason:"Cannot find the user"})},Zm=(a,d)=>{const{store:{getState:u},rwgAgent:f}=a,{share:{sharePrivilege:A}}=u();return A===d?Promise.resolve(""):Object.values(Bu).includes(d)?(f.lockSharing(d),Ii("UPDATE_MEETING_ATTRIBUTE",S=>S.lockShare===d)):Promise.reject({type:qr})},XN=Ws([Ks],a=>a.filter(d=>d.bVideoOn)),KR=()=>M0();var WA,KA,Td,Q_,$a,Tf,zA,Ju,no,hp,eg,pp,wf,tg,ng,rg,ig,og,mI,gI,H_,_I,vI,AI,YA,yI,EI,zR,bI,dr,qA,ch,Nn,Ub,YR,Cn,xn,oo,qR,uh,Xu,G_,$u,rn;let JR=(WA=jr("audio"),KA=jr("audio"),Td=jr("audio"),Q_=jr("audio"),$a=jr("audio"),Tf=jr("audio"),zA=jr("audio"),Ju=jr("audio"),no=jr("audio"),hp=jr("audio"),eg=jr("share"),pp=jr("audio"),wf=jr("share"),tg=jr("audio"),ng=jr("audio"),rg=jr("video"),ig=jr("video"),og=jr("video"),mI=jr("video"),gI=jr("video"),H_=jr("video"),_I=jr("video"),vI=jr("video"),AI=jr("video"),YA=jr("video"),yI=jr("video"),EI=jr("video"),zR=jr("video"),bI=jr("video"),dr=jr("video"),qA=jr("share"),ch=jr("share"),Nn=jr("share"),Ub=jr("share"),YR=jr("share"),Cn=jr("share"),xn=jr("share"),oo=jr("share"),qR=uI("isShareOptionLocked"),uh=uI("isShareOptionLocked"),Xu=jr("share"),G_=jr("share"),$u=jr("share"),er((rn=class extends Xc{constructor(a){super(a),this[As].dispatch(ds()),this[Xn]={store:a,mediaAgent:Bm(go.getInstance()),rwgAgent:Do.createAgent()}}startAudio(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S,mediaAgent:T}=d,w=f(),{speakerOnly:M,autoStartAudioInSafari:B}=u||{},G=ui(w);if("computer"===G?.audio)return Promise.resolve();if("phone"===G?.audio)return Promise.reject({type:cr,reason:"joined by phone"});{const{audio:{isAllowToTalk:Z,isComputerAudioLoading:ce,canPlayAudio:he,isSpeakerOnly:ue},media:{audioDecodeStatus:Se,audioEncodeStatus:Qe}}=w;if(ce)return Promise.reject({type:cr,reason:"Computer audio has been loading, please wait."});if(ue!==!!M&&A(LE(!!M)),!G)return Promise.reject({type:cr,reason:"Please call `startAudio` method after the `join` has been resolved"});{const{userRole:He}=G,Ke=Xa(He),et=Ke&&!Z||M||Lm()?"success":Qe,Lt=Lm()?"success":Se;if(x_()&&("success"!==Lt||"success"!==et))return Promise.reject({type:cr,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});A(md(!0)),zc("audio",et,Lt).subscribe(Gt=>{let[jt,wt]=Gt;if(jt&&wt){let sn=he||(x_()||gm())&&!B?Promise.resolve():function(){const hn=URL.createObjectURL(Iw),vn=new Audio(hn);return vn.muted=!1,gm()?new Promise((ln,Qt)=>{var Bn;vn.addEventListener("canplaythrough",()=>{vn.play().then(()=>{ln(!0)}).catch(gr=>{Qt(gr)}).finally(()=>{URL.revokeObjectURL(hn)})}),null===(Bn=vn.load)||void 0===Bn||Bn.call(vn)}):Promise.race([vn.play(),new Promise((ln,Qt)=>{window.setTimeout(()=>{Qt()},3e3)})]).finally(()=>{URL.revokeObjectURL(hn)})}();void 0===sn&&(sn=Promise.resolve()),sn.then(()=>{const hn=f(),{audio:{isSharingAudio:vn}}=hn;S.joinOrLeaveVoip(!0),vn||Hm(T,hn,!(Ke&&!Z||M)),Ke&&Z&&A(tC(!0)),A(f_(!0))}).catch(()=>{A(f_(!1)),A(md(!1))})}else A(md(!1))})}return"failed"===Qe||"failed"===Se?(A(md(!1)),Promise.reject({type:"INTERNAL_ERROR",reason:"audio encode or decode error"})):new Promise((He,Ke)=>{dc(Gs(Tm.JoinComputerAudio.success,1),Zs(...Tm.JoinComputerAudio.fail.map(et=>Gs(et,1).pipe(tr(()=>bi({type:"INSUFFICIENT_PRIVILEGES",reason:et}))))),du(45e3).pipe(tr(()=>bi({type:"OPERATION_TIMEOUT"})))).subscribe(()=>{A(md(!1)),He("")},et=>{("INSUFFICIENT_PRIVILEGES"===et.type||f().audio.canPlayAudio)&&S.joinOrLeaveVoip(!1),A(md(!1)),Ke(et)})})}})(this[Xn],a)}stopAudio(){return function(){var a=L(function*(d){const{store:{getState:u,dispatch:f},mediaAgent:A,rwgAgent:S}=d,T=u(),{audio:{isComputerAudioLoading:w,isShareAudioEnabled:M,isSharingAudio:B}}=T,G=ui(T);if(w)return Promise.reject({type:cr,reason:"Computer audio has not finished joining, please wait."});if(M){if(B)return Promise.reject({type:cr,reason:"Cannot stop audio during sharing with audio"});f(eh(void 0)),f($h(void 0))}return"computer"===G?.audio?(yield A.leaveComputerAudio(),S.joinOrLeaveVoip(!1),f(ME(0)),Ii("AUDIO_CURRENT_USER_LEAVE_AUDIO")):Promise.resolve("")});return function(d){return a.apply(this,arguments)}}()(this[Xn])}muteAudio(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S}=d,T=f(),w=ui(T);if(null==u||u===w?.userId)return""===w?.audio||null===w?.audio?Promise.reject({type:cr,reason:"no audio joined"}):!0===w?.muted?Promise.resolve(""):(T.audio.isShareAudioEnabled&&A($h(!0)),A(af(!0)),S.mute(w.userId,!0),Ii("AUDIO_CURRENT_USER_MUTED").then(()=>""));if(Hu(T)){const{participants:{allowTalkAttendeesList:M,attendeesList:B}}=T,G=M.concat(B).find(Z=>Z.userId===u);return G?""===G.audio||null===G?Promise.reject({type:cr,reason:"no audio joined"}):!1===G.muted?(S.mute(u,!0),Ii("AUDIO_PARTICIPANT_AUDIO_UPDATE",Z=>Z.id===u&&1==Z.muted)):Promise.resolve(""):Promise.reject({type:qr,reason:"no matching user"})}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})})(this[Xn],a)}unmuteAudio(a){return(d=L(function*(u,f){const{store:{getState:A,dispatch:S},rwgAgent:T,mediaAgent:w}=u,M=A(),B=ui(M);if(void 0===f||f===B?.userId){if(""===B?.audio||null===B?.audio)return Promise.reject({type:cr,reason:"no audio joined"});if(!1===B?.muted)return Promise.resolve("");if(M.audio.isShareAudioEnabled){if(M.audio.isSharingAudio)return Promise.reject({type:cr,reason:"Cannot unmute audio during sharing with audio"});S($h(!1))}if(S(af(!0)),M.audio.bCanUnmute||null!=B&&B.isHost||null!=B&&B.bCoHost){if(Xa(B.userRole)){const{audio:{isAllowToTalk:G,isAllowToTalkAttendeeConnected:Z}}=M;G?Z||(yield w.leaveComputerAudio(),yield Hm(w,M,!0),S(tC(!0))):Promise.reject({type:cr,reason:"Webinar attendee cannot unmute self audio."})}return T.mute(B.userId,!1),Ii("AUDIO_CURRENT_USER_UNMUTED").then(()=>"")}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"host not allow unmute themselves"})}if(Hu(M)){const{participants:{allowTalkAttendeesList:G,attendeesList:Z}}=M,ce=G.concat(Z).find(he=>he.userId===f);return ce?""===ce.audio||null===ce?Promise.reject({type:cr,reason:"no audio joined"}):(!0===ce.muted&&T.mute(f,!1),Promise.resolve("")):Promise.reject({type:qr,reason:"no matching user"})}return Promise.reject({type:"INSUFFICIENT_PRIVILEGES"})}),function(u,f){return d.apply(this,arguments)})(this[Xn],a);var d}dialOut(a,d,u,f){return((A,S,T,w,M)=>{const{store:{getState:B,dispatch:G},rwgAgent:Z}=A,ce=B(),{meeting:{callOutCountry:he,isSupportCallOut:ue}}=ce;if(ue&&Array.isArray(he)&&he.findIndex(Se=>Se.code===S)>-1){const{seq:Se}=Z.audioDialout(S+T,w,!(null==M||!M.callMe),!(null==M||!M.pressingOne),!(null==M||!M.greeting));return G(Xh(Se)),nf(Tm.JoinAudioByCallMe)}return Promise.reject({type:qr,reason:"no matching country code"})})(this[Xn],a,d,u,f)}cancelDialOut(a,d,u){return((f,A,S,T)=>{const{rwgAgent:w}=f;return w.audioCancelDialout(A+S,!(null==T||!T.callMe)),nf(Tm.cancelDialOut)})(this[Xn],a,d,u)}hangup(){return(a=>{const{store:{getState:d},rwgAgent:u}=a,f=d(),A=ui(f);return"phone"===A?.audio&&null!==A.userId?(u.audioDrop(A.userId),nf(Tm.hangup)):Promise.reject({type:cr,reason:"not joined audio by phone"})})(this[Xn])}switchMicrophone(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{audio:{microphoneDevicesList:T,activeMicrophone:w}}=f();return"default"!==u&&-1==T.findIndex(M=>M.deviceId===u)?Promise.reject({type:"INVALID_DEVICE_ID"}):(u!==w&&(S.changeMicrophone(u),A(p_(u))),Promise.resolve(""))})(this[Xn],a)}switchSpeaker(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{audio:{speakerDevicesList:T,activeSpeaker:w}}=f();return"default"!==u&&-1==T.findIndex(M=>M.deviceId===u)?Promise.reject({type:"INVALID_DEVICE_ID"}):(u!==w&&(S.changeSpeaker(u),A(Z0(u))),Promise.resolve(""))})(this[Xn],a)}muteShareAudio(a){return((d,u)=>{const{mediaAgent:f,rwgAgent:A,store:{getState:S,dispatch:T}}=d,w=S(),{meeting:{userId:M}}=w;if(u&&u!==M)return WR(u,!0,d.store,f);{const{audio:{isSharingAudio:G,isShareAudioEnabled:Z,isShareAudioMuted:ce}}=w;if(!Z)return Promise.reject({type:cr,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(ce)return Promise.resolve("");{A.muteShareAudio(!0);let he=Promise.resolve();var B;return G&&(he=null===(B=f.leaveSharingAudio(!0))||void 0===B?void 0:B.then(()=>xA(f,A,w).then(ue=>{ue.forEach(Se=>T(Se))}))),M_(f,M,!0,w),Promise.all([Ii({event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(ue=>void 0!==ue.bShareAudioOn),ri(1)]},ue=>!1===ue.bShareAudioOn),he]).then(()=>(T(BE(!0)),G&&(T(uf(!1)),Et("SHARE_AUDIO_STATE_CHANGE",{state:"off"})),""))}}})(this[Xn],a)}unmuteShareAudio(a){return((d,u)=>{const{mediaAgent:f,rwgAgent:A,store:{getState:S,dispatch:T}}=d,w=S(),{meeting:{userId:M}}=w;if(u&&u!==M)return WR(u,!1,d.store,f);{const{audio:{isSharingAudio:B,isShareAudioEnabled:G,isShareAudioMuted:Z},share:{status:ce}}=w;if(!G)return Promise.reject({type:cr,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===Z)return Promise.resolve("");{A.muteShareAudio(!1);let he=Promise.resolve();return!1===B&&ce===W.ShareStatus.Sharing&&(he=LA(f,A,w).then(ue=>{ue.forEach(Se=>T(Se))})),M_(f,M,!1,w),Promise.all([Ii({event:"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(ue=>void 0!==ue.bShareAudioOn),ri(1)]},ue=>!0===ue.bShareAudioOn),he]).then(()=>(T(BE(!1)),!1===B&&ce===W.ShareStatus.Sharing&&(T(uf(!0)),Et("SHARE_AUDIO_STATE_CHANGE",{state:"on"})),""))}}})(this[Xn],a)}subscribeAudioStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{getState:S}}=u,T=S(),{media:{audioDecodeStatus:w,audioEncodeStatus:M},audio:{isAllowToTalk:B}}=S(),G=ui(T),Z=!f||f.decode,ce=!f||f.encode;if(!G)return Promise.reject({type:cr,reason:"Call this function after the 'join' method resolved."});{const{userRole:he}=G,ue=Xa(he)&&!B||Lm()?"success":M,Se=Lm()?"success":w;zc("audio",ue,Se).subscribe(Qe=>{let[He,Ke]=Qe;He&&Ke&&(Z&&A.subscribeToQos([qa.AudioDecode],1e3),ce&&A.subscribeToQos([qa.AudioEncode],1e3))})}return""}),function(u,f){return d.apply(this,arguments)})(this[Xn],a);var d}unsubscribeAudioStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{dispatch:S}}=u,w=!f||f.encode;return(!f||f.decode)&&(A.unsubscribeFromQos([qa.AudioDecode]),S(nC(mu))),w&&(A.unsubscribeFromQos([qa.AudioEncode]),S(km(mu))),null}),function(u,f){return d.apply(this,arguments)})(this[Xn],a);var d}getMicList(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?[...u.audio.microphoneDevicesList]:[]})(this[Xn])}getSpeakerList(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?[...u.audio.speakerDevicesList]:[]})(this[Xn])}getAudioState(a){return((d,u)=>{let{store:{getState:f}}=d;const A=f(),{meeting:{isWebinar:S}}=A;let T=null;return null==u?T=ui(A):(T=A.participants.attendeesList.find(w=>w.userId===u),S&&!T&&(T=A.participants.xmppAttendeeList.find(w=>w.userId===u))),T?T.audio:null})(this[Xn],a)}isAudioMuted(a){return((d,u)=>{let{store:{getState:f}}=d;const A=f(),{meeting:{isWebinar:S}}=A;let T=null;return void 0===u?T=ui(A):(T=A.participants.attendeesList.find(w=>w.userId===u),S&&!T&&(T=A.participants.xmppAttendeeList.find(w=>w.userId===u))),!!T&&!!T.muted})(this[Xn],a)}getActiveMicrophone(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?u.audio.activeMicrophone:null})(this[Xn])}getActiveSpeaker(){return(a=>{let{store:{getState:d}}=a;const u=d();return u.audio?u.audio.activeSpeaker:null})(this[Xn])}isSupportCallOut(){return(a=>{let{store:{getState:d}}=a;const{meeting:{isSupportCallOut:u,callOutCountry:f}}=d();return u&&Array.isArray(f)&&f?.length>0})(this[Xn])}getDialOutStatus(){return(a=>{let{store:{getState:d}}=a;const{audio:u}=d();return u?.dialout.returnCode})(this[Xn])}getDialOutCountries(){return(a=>{let{store:{getState:d}}=a;const{meeting:{callOutCountry:u}}=d();return Array.isArray(u)?u:[]})(this[Xn])}getShareAudioStatus(){return(a=>{let{store:{getState:d}}=a;const{audio:{isShareAudioEnabled:u,isShareAudioMuted:f,isSharingAudio:A}}=d();return{isShareAudioEnabled:u,isShareAudioMuted:f,isSharingAudio:A}})(this[Xn])}isOthersShareAudioMutedLocally(a){return((d,u)=>{var f;let{store:{getState:A}}=d;const{audio:{localShareAudioUserMutedList:S}}=A();return null===(f=S.find(T=>T.userId===u))||void 0===f?void 0:f.muted})(this[Xn],a)}getAudioStatisticData(){return(a=>{let{store:{getState:d}}=a;const{audio:{statistic:u}}=d();return fn({},u)})(this[Xn])}startVideo(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{media:{videoDecodeStatus:w,videoEncodeStatus:M},video:{isCaptureCameraLoading:B,isCurrentUserStartedVideo:G,isVideoMuted:Z}}=T;return G?Promise.reject({type:cr,reason:"Video is started"}):B?Promise.reject({type:cr,reason:"Camera is starting,please wait."}):Z&&!Hu(T)?Promise.reject({type:cr,reason:"Video is muted by the host"}):!(!KR()&&wa()||_m())||null!=u&&u.videoElement?!lb()&&null!=u&&u.virtualBackground?Promise.reject({type:qr,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(A(df(!0)),zc("video",M,w).subscribe(ce=>{let[he]=ce;if(he){const ue=f(),{video:{activeCamera:Se,isSupportHDVideo:Qe,videoSsrc:He,virtualBackground:{isVBConfigured:Ke,isVBPreloadReady:et,imageSrc:Lt}}}=ue,{cameraId:Gt=Se,captureWidth:jt=0,captureHeight:wt=0,videoElement:sn,mirrored:hn,hd:vn,virtualBackground:ln,originalRatio:Qt}=u||{};let Bn;if(hn&&S.mirrorVideo(hn),sn&&(sn.id?Bn=sn.id:(Bn="__ZOOM_SDK_SELF_VIDEO_@__".replace("@","".concat(Math.floor(1e4*Math.random()))),sn.id=Bn)),vn&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://marketplace.zoom.us/docs/sdk/overview/720p for more details"),Qe&&go.isCompatibleHardwareForEncode()?go.isSupportVideoEncodeHardwareAcceleration().then(gr=>{gr?(S.enableHardwareAccelerationForVideoEncode(!0),A(v_({encode:gr}))):console.warn("Cannot capture HD video due to hardware limitation")}):console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation")),ln||void 0===ln&&Lt){const gr=ln||{imageUrl:void 0,cropped:void 0};Jc(et).subscribe(At=>{if(At){let ut;ut=Ke?gr.imageUrl!==Lt?Nb(gr.imageUrl,gr.cropped,S):Promise.resolve():LR(fn(fn({},gr),{},{captureWidth:jt,captureHeight:wt,cameraId:Gt}),S,ue).then(Be=>Gs("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",1).toPromise().then($e=>{var St;return S.stopVirtualBackgroundSetting(),$e?(null==Be||null===(St=Be.parentNode)||void 0===St||St.removeChild(Be),!0):Promise.reject("vb setting error")})),ut.then(()=>{S.startCaptureVideo(He,Gt,jt,wt,Bn),A(Ol({cameraId:Gt,captureWidth:jt,captureHeight:wt,videoDOMId:Bn,originalRatio:Qt})),A(ep({imageSrc:gr.imageUrl,cropped:gr.cropped}))}).catch(()=>{Et("VIDEO_VITRUAL_BACKGROUND_FAILED",{reason:"Cannot access the virtual background image."})})}else Et("VIDEO_VITRUAL_BACKGROUND_FAILED",{reason:"Cannot load virtual background model."})})}else Se!==Gt&&A(zs(Gt)),S.startCaptureVideo(He,Gt,jt,wt,Bn,ud(),!Qt&&zp()),A(Ol({cameraId:Gt,captureWidth:jt,captureHeight:wt,videoDOMId:Bn,originalRatio:Qt}))}else A(df(!1))}),nf(Im).then(()=>{A(YE(!1)),A(Hc(!1))}).finally(()=>{A(df(!1))})):Promise.reject({type:qr,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[Xn],a)}stopVideo(){return(a=>{const{store:{getState:d},mediaAgent:u}=a,{video:{isCaptureCameraLoading:f,isCurrentUserStartedVideo:A}}=d();return f?Promise.reject({type:cr,reason:"Camera is starting,please wait."}):A?(u.stopCaptureVideo(),Ii("VIDEO_CAPTURE_STOP_RESULT",S=>!0!==S?.failed)):Promise.reject({type:cr,reason:"camera is closed"})})(this[Xn])}switchCamera(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{video:{cameraDevicesList:w,isCurrentUserStartedVideo:M,virtualBackground:B}}=T;return BR(u,w)?((M||null!=B&&B.isVBConfigured)&&S.changeCamera(u),A(zs(u)),Promise.resolve()):Promise.reject({type:qr,reason:"Cannot find cameraDeviceId in camera devices list."})})(this[Xn],a)}renderVideo(a,d,u,f,A,S,T,w,M){return((B,G,Z,ce,he,ue,Se,Qe,He,Ke)=>{const{store:{getState:et,dispatch:Lt},mediaAgent:Gt,rwgAgent:jt}=B,wt=et(),{meeting:{userId:sn},media:{enforceMultipleVideos:hn},video:{subscribedVideoList:vn,renderedVideoList:ln}}=wt;if(!G)return Promise.reject({type:qr,reason:"Received canvas is falsy"});const Qt=ld(!!hn);if(!vn.includes(Z)&&vn.length>=Qt&&new Set(ln.map(At=>At.canvasId)).has(G.id))return Promise.reject({type:cr,reason:"subscribe video counts greater than maximum size (".concat(Qt,")")});if(-1===XN(wt).findIndex(At=>At.userId===Z))return Promise.reject({type:qr,reason:"user is not send video"});const Bn=!!Ke,{media:{videoDecodeStatus:gr}}=wt;return G.id||(G.id="__ZOOM_SDK_VIDEO_CANVAS_@__".replace("@","".concat(Math.floor(1e4*Math.random())))),zc("video","success",gr).subscribe(At=>{let[ut]=At;if(ut){const{video:{isVerifiedVideoRenderCanvasAfterFailover:Be,maximumNumbeOfHDSubscriptions:$e,isSupportHDVideo:St,renderedVideoList:lt,receivedVideoMaxQuality:Ut}}=et();let an=G;!1===Be&&(an=C_(G),Lt(qE(!0)));const Hn=Z===sn,_r=He||"__ZOOM_SDK_VIDEO_ZONE__";let Qr=Qe;if(Qe===W.VideoQuality.Video_720P)if(St){const nu=lt.filter(Ps=>Ps.videoQuality===W.VideoQuality.Video_720P).map(Ps=>Ps.userId);nu.length>=($e??1)&&(nu.includes(Z)||Hn||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),Qr=W.VideoQuality.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),Qr=W.VideoQuality.Video_360P;lt.some(nu=>nu.userId===Z&&nu.key===_r&&nu.canvasId===an.id)||Gt.renderVideo(an.id,Z,_r,ce,he,ue,Se,Qr,Hn,Ke||"",Bn);const tc=Math.max(Ut,W.VideoQuality.Video_360P),bh=Math.min(Qr,tc);jt.subscribeVideo(Z,bh,!1),vn.includes(Z)||Lt(gd(Z)),Lt(th({userId:Z,key:_r,canvasId:an.id,videoQuality:Qr}))}}),"failed"===gr?Promise.reject({type:"INTERNAL_ERROR",reason:"Video  decode status is failed"}):Promise.resolve("")})(this[Xn],a,d,u,f,A,S,T,w,M)}stopRenderVideo(a,d,u,f){return function(S,T,w,M,B){let G=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{store:{getState:Z,dispatch:ce},mediaAgent:he,rwgAgent:ue}=S,Se=Z(),{video:{subscribedVideoList:Qe,renderedVideoList:He}}=Se;if(!T||!T.id)return Promise.reject({type:qr,reason:"canvas is falsy"});if(Qe.includes(w)){const Ke=M||"__ZOOM_SDK_VIDEO_ZONE__";He.find(et=>et.userId===w&&et.key===Ke)&&(he.stopRenderVideo(T.id,w,Ke,nI(B),G),1==He.filter(et=>et.userId===w).length&&(ue.unsubscribeVideo(w),ce(cC(w))),ce(Vw({userId:w,key:Ke,canvasId:T.id})))}return Promise.resolve("")}(this[Xn],a,d,u,f,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}updateVideoCanvasDimension(a,d,u){return((f,A,S,T)=>{const{mediaAgent:w}=f;return A&&A.id?(w.updateRenderedVideoCanvasDimension(A.id,S,T),Promise.resolve("")):Promise.reject({type:qr,reason:"canvas is falsy"})})(this[Xn],a,d,u)}adjustRenderedVideoPosition(a,d,u,f,A,S,T){return((w,M,B,G,Z,ce,he,ue)=>{const{store:{getState:Se},mediaAgent:Qe}=w;if(!M||!M.id)return Promise.reject({type:qr,reason:"canvas is falsy"});const{video:{subscribedVideoList:He}}=Se();return He.includes(B)?(Qe.adjustRenderedVideoPosition(M.id,B,ue||"__ZOOM_SDK_VIDEO_ZONE__",ce,he,G,Z,nI("#000")),Promise.resolve("")):Promise.reject({type:qr,reason:"userId is not correct"})})(this[Xn],a,d,u,f,A,S,T)}clearVideoCanvas(a,d){return((u,f,A)=>{const{mediaAgent:S}=u;return f&&f.id?(S.clearVideoCanvas(f.id,nI(A)),Promise.resolve("")):Promise.reject({type:qr,reason:"canvas is falsy"})})(this[Xn],a,d)}mirrorVideo(a){return((d,u)=>{const{store:{getState:f},mediaAgent:A}=d,{video:{isCurrentUserStartedVideo:S,virtualBackground:T}}=f();return(S||null!=T&&T.isVBConfigured)&&A.mirrorVideo(u),Promise.resolve("")})(this[Xn],a)}enableHardwareAcceleration(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,{video:{isSupportHDVideo:T}}=f();if("boolean"==typeof u||void 0!==u.decode){const w="boolean"==typeof u?u:!!u.decode;return w?go.isSupportVideoDecodeHardwareAcceleration().then(M=>(M&&S.enableHardwareAccelerationForVideoDecode(M),A(v_({decode:M})),M)):(S.enableHardwareAccelerationForVideoDecode(w),A(v_({decode:w})),Promise.resolve(!0))}if("boolean"==typeof u||void 0!==u.encode){const w="boolean"==typeof u?u:!!u.encode;if(T){if(!w)return S.enableHardwareAccelerationForVideoEncode(!1),A(v_({encode:!1})),Promise.resolve(!0);if(go.isCompatibleHardwareForEncode())return go.isSupportVideoEncodeHardwareAcceleration().then(M=>(M&&S.enableHardwareAccelerationForVideoEncode(M),A(v_({encode:M})),M));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof u&&null!=u&&u.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[Xn],a)}subscribeVideoStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{getState:S}}=u,{media:{videoDecodeStatus:T,videoEncodeStatus:w}}=S(),M=!f||f.decode,B=!f||f.encode;return zc("video",w,T).subscribe(G=>{let[Z,ce]=G;M&&ce&&A.subscribeToQos([qa.VideoDecode],1e3),B&&Z&&A.subscribeToQos([qa.VideoEncode],1e3),null!=f&&f.detailed&&ce&&A.enableVideoObserver(!0)}),null}),function(u,f){return d.apply(this,arguments)})(this[Xn],a);var d}unsubscribeVideoStatisticData(a){return(d=L(function*(u,f){const{mediaAgent:A,store:{dispatch:S}}=u,w=!f||f.encode;return(!f||f.decode)&&(A.unsubscribeFromQos([qa.VideoDecode]),S(tp(Zp))),w&&(A.unsubscribeFromQos([qa.VideoEncode]),S(vA(Zp))),null!=f&&f.detailed&&A.enableVideoObserver(!1),null}),function(u,f){return d.apply(this,arguments)})(this[Xn],a);var d}previewVirtualBackground(a,d,u){return((f,A,S,T)=>{const{store:{getState:w,dispatch:M},mediaAgent:B}=f,G=w(),{video:{activeCamera:Z,virtualBackground:{isVBPreloadReady:ce},isCurrentUserStartedVideo:he}}=G;let ue;return Jc(ce).subscribe(Se=>{Se&&LR({imageUrl:S,cropped:T,captureWidth:0,captureHeight:0,cameraId:Z},B,G,A).then(Qe=>{ue=Qe})}),(he?Promise.resolve(!0).then(()=>(M(__(!0)),!0)):Gs("VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",1).toPromise()).then(Se=>{var Qe,He;return null===(Qe=ue)||void 0===Qe||null===(He=Qe.parentNode)||void 0===He||He.removeChild(ue),Se?(M(ep({imageSrc:S,cropped:T})),!0):Promise.reject({type:cr,reason:"Cannot preview virtual background"})})})(this[Xn],a,d,u)}updateVirtualBackgroundImage(a,d){return((u,f,A)=>{const{store:{getState:S,dispatch:T},mediaAgent:w}=u,M=S(),{video:{virtualBackground:{isVBConfigured:B,imageSrc:G,cropped:Z}}}=M;return B?f===G&&A===Z?Promise.resolve(!0):Nb(f,A,w).then(()=>(T(ep({imageSrc:f,cropped:A})),!0)).catch(()=>Promise.reject({type:qr,reason:"Cannot load the image"})):Promise.reject({type:cr,reason:"Cannot update vitrual background image, please preview or start video with virtual background first."})})(this[Xn],a,d)}stopPreviewVirtualBackground(){return(a=>{const{store:{getState:d},mediaAgent:u}=a,{video:{virtualBackground:{isVBConfigured:f}}}=d();return f?(u.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:cr,reason:"Cannot stop preview virtual background before start"})})(this[Xn])}isCapturingVideo(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCurrentUserStartedVideo})(this[Xn])}isCameraTaken(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCameraTaken})(this[Xn])}isCaptureForbidden(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.video&&u.video.isCaptureForbidden})(this[Xn])}getCameraList(){return(a=>{const{store:{getState:d}}=a,u=d();if(!u.video)return[];const{video:{cameraDevicesList:f}}=u;return f.map(A=>Object.assign({},A))})(this[Xn])}getActiveCamera(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.activeCamera:""})(this[Xn])}getActiveVideoId(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.activeVideoId:0})(this[Xn])}getVideoMaxQuality(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.receivedVideoMaxQuality:W.VideoQuality.Video_90P})(this[Xn])}getReceivedVideoDimension(){return(a=>{const{store:{getState:d}}=a,u=d();return u.video?u.video.receivedVideoDimension:null})(this[Xn])}isSupportMultipleVideos(){return KR()}isSupportHDVideo(){return(a=>{var d;const{store:{getState:u}}=a;return null===(d=u().video)||void 0===d?void 0:d.isSupportHDVideo})(this[Xn])}getHardwareAccelerationStatus(){return(a=>{var d;const{store:{getState:u}}=a;return null===(d=u().video)||void 0===d?void 0:d.hardwareAcceleration})(this[Xn])}getVideoStatisticData(){return(a=>{let{store:{getState:d}}=a;const{video:{statistic:u}}=d();return fn({},u)})(this[Xn])}isSupportVirtualBackground(){return lb()}getVirtualbackgroundStatus(){return(a=>{const{store:{getState:d}}=a;return fn({},d().video.virtualBackground)})(this[Xn])}startShareView(a,d,u){return((f,A,S,T)=>{const{store:{getState:w,dispatch:M},mediaAgent:B,rwgAgent:G}=f,{share:{isReceiveSharing:Z,isRemoteSharingActive:ce,activeNodeId:he,activeSsrc:ue,shareQuality:Se,status:Qe,isVerifiedRenderCanvasAfterFailover:He,isReceiveSharingFromMainSession:Ke},media:{sharingDecodeStatus:et}}=w();if(!A||S!==he)return Promise.reject({type:qr,reason:""});if(!ce||Z||Qe!==W.ShareStatus.End)return Promise.reject({type:cr,reason:""});const Lt=!!T;return zc("sharing","success",et).subscribe(Gt=>{let[,jt]=Gt;if(jt){let wt=A;!1===He&&(wt=C_(A),M(WE(!0))),M(jE(!0)),G.subscribeSharing(S,Se,Ke),B.renderSharing(ue,wt,Lt,T,Ke);const{audio:sn}=w();if(null!=sn&&sn.localShareAudioUserMutedList){const hn=sn.localShareAudioUserMutedList.find(vn=>vn.userId===S);hn&&B.setSharingAudioVolume(S,hn.muted,hn.isFromMainSession)}}}),"failed"===et?Promise.reject({type:"INTERNAL_ERROR",reason:""}):Ii("SHARE_RECEIVED_DIMENSION_CHANGE",Gt=>!!Gt,6e4)})(this[Xn],a,d,u)}stopShareView(){return(a=>{const{store:{dispatch:d,getState:u},rwgAgent:f,mediaAgent:A}=a,{share:{isReceiveSharing:S,activeNodeId:T},breakoutRoom:w}=u();if(!S)return Promise.resolve("");let M=!1;return w?.currentRoom.status===ur.InRoom&&w.mainSessionAttendeeList.length>0&&(M=w.mainSessionAttendeeList.findIndex(B=>B.userId===T)>-1),A.stopRenderSharing(),f.unsubscribeSharing(T,M),d(jE(!1)),Promise.resolve("")})(this[Xn])}switchShareView(a){return((d,u)=>{const{store:{getState:f,dispatch:A},rwgAgent:S,mediaAgent:T}=d,w=f(),{share:{isReceiveSharing:M,activeNodeId:B,isRemoteControlApproved:G,isGrabRemoteControl:Z,shareQuality:ce,isReceiveSharingFromMainSession:he},audio:ue,breakoutRoom:Se}=w;if(!M)return Promise.reject({type:cr});if(u===B)return Promise.resolve("");let Qe=[];return Qe=he?Se.mainSessionAttendeeList.filter(He=>He.bShareToBORooms&&He.sharerOn):xm(w),Qe.findIndex(He=>He.userId===B)>-1?(G&&(Z&&S.subscribeGrabRemoteControl(B,!1),S.sharingRequestRemoteControl(B,!1)),S.unsubscribeSharing(B,he),S.subscribeSharing(u,ce,he),T.switchSharingSource(u,he),ue?.localShareAudioUserMutedList.forEach(He=>{T.setSharingAudioVolume(u,He.userId!==u||He.muted,He.isFromMainSession)}),A(iC({bStatus:1,activeNodeID:u,ssrc:u})),Promise.resolve("")):Promise.reject({type:qr,reason:"no matching user id"})})(this[Xn],a)}updateSharingCanvasDimension(a,d){return((u,f,A)=>{const{store:{getState:S},mediaAgent:T}=u,w=S(),{share:{isReceiveSharing:M}}=w;return M&&T.updateRenderedSharingDimension(f,A),Promise.resolve("")})(this[Xn],a,d)}startShareScreen(a,d){return((u,f,A)=>{var S;const{store:{getState:T,dispatch:w},mediaAgent:M}=u,B=T(),{meeting:{bIbDisableShare:G,meetingOptions:Z},share:{sharePrivilege:ce,ssrc:he,isChromeExtensionInstalled:ue,isVerifiedCaptureCanvasAfterFailover:Se,isReceiveSharingFromMainSession:Qe},media:{sharingEncodeStatus:He},breakoutRoom:Ke}=B;if(G)return Promise.reject({type:cr,reason:"information barrier"});if("function"!=typeof(null===(S=navigator.mediaDevices)||void 0===S?void 0:S.getDisplayMedia))return Promise.reject({type:cr,reason:"Unable to share your screen due to the technical limitation"});if(Qe)return Promise.reject({type:cr,reason:"Unable to share your screen while someone is sharing from the main session"});if(rA()&&!(f instanceof HTMLVideoElement))return Promise.reject({type:qr,reason:"Use Video element instead of Canvas element when WebCodecs enabled"});const et=Hu(B);if(null!=A&&A.broadcastToBreakoutRoom){if(!et||Ke?.currentRoom.status===ur.InRoom)return Promise.reject(et?{type:cr,reason:"Unable to share screen to breakout room when in the room"}:{type:"INSUFFICIENT_PRIVILEGES"});w(bo(!0))}else w(bo(!1));void 0!==A?.requestReadReceipt&&w(Jr(A?.requestReadReceipt));const Lt=xm(B);if(ce===Bu.OnlyHost&&!et)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can start screen share"});if(ce===Bu.HostGrab&&!et&&Lt.length>0)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"only host can grab screen share"});if(!0===ui(B)?.sharerOn)return Promise.reject({type:cr,reason:"you have already started screen share."});let jt=Pn(!0);return cd()&&"function"!=typeof(null===(wt=navigator.mediaDevices)||void 0===wt?void 0:wt.getDisplayMedia)&&!ue&&(M.checkChromeSharingExtension(),jt=Gs("SHARE_CHECK_CHROME_SHARING_EXTENSION",1)),f.id||(f.id="__ZOOM_SDK_SHARE_CANVAS_@__".replace("@","".concat(Math.floor(1e4*Math.random())))),Vv([zc("sharing",He,"success"),jt]).subscribe(wt=>{let[sn,hn]=wt;const[vn]=sn;if(vn&&hn){!1===Se&&(C_(f),w(KE(!0)));let ln=document.querySelector("#".concat("__ZOOM_SDK_SHARING_VIDEO__"));ln&&"VIDEO"===ln.tagName||(ln=document.createElement("video"),ln.id="__ZOOM_SDK_SHARING_VIDEO__",ln.style.display="none",document.body.appendChild(ln));const Qt=null!=A&&A.secondaryCameraId?{cameraId:A.secondaryCameraId,width:A.captureWidth,height:A.captureHeight}:void 0;M.startDesktopSharing(he,f.id,"__ZOOM_SDK_SHARING_VIDEO__",Qt,null==Z||!Z.isDisableShareAudioIntoBo||!(null!=A&&A.broadcastToBreakoutRoom)),w(jc(!!Qt))}}),new Promise((wt,sn)=>{dc(Gs("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",1),Gs("SHARE_CHECK_CHROME_SHARING_EXTENSION").pipe(Un(hn=>!hn),ri(1),ai(bi({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),Gs("SHARE_START_DESKTOP_SHARE_FAILED",1).pipe(tr(hn=>bi({reason:hn.reason||"user deny screen share"})))).subscribe(hn=>{if(!0===hn.sharerOn){const{share:{isSharingToBreakoutRoom:vn},meeting:{meetingOptions:ln}}=T();M.enableShareAudioToBreakoutRoom(!(null!=ln&&ln.isDisableShareAudioIntoBo||!vn)),wt("")}else sn({type:"INTERNAL_ERROR"})},hn=>{sn(fn({type:cr},hn))})});var wt})(this[Xn],a,d)}stopShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S},meeting:{userId:T}}=d();return S===W.ShareStatus.End?Promise.resolve(""):(u(Rl(W.ShareStatus.End)),f.stopSharing(T),A.stopDesktopSharing(),Ii("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",w=>!1===w.sharerOn))})(this[Xn])}pauseShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S}}=d();return S===W.ShareStatus.Sharing?(f.pauseSharing(),A.pauseDesktopSharing(),Ii("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",T=>!0===T.sharerPause).then(()=>(u(Rl(W.ShareStatus.Paused)),""))):Promise.reject({type:cr})})(this[Xn])}resumeShareScreen(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{share:{status:S}}=d();return S===W.ShareStatus.Paused?(f.resumeSharing(),A.resumeDesktopSharing(),Ii("UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",T=>!0===T.sharerOn&&!1===T.sharerPause).then(()=>(u(Rl(W.ShareStatus.Sharing)),""))):Promise.reject({type:cr})})(this[Xn])}setSharePrivilege(a){return Zm(this[Xn],a)}lockShare(a){return Zm(this[Xn],a?Bu.OnlyHost:Bu.HostGrab)}shareToBreakoutRoom(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{meeting:{userId:S},breakoutRoom:T,share:{isSharingToBreakoutRoom:w,status:M}}=d();return M===W.ShareStatus.End?Promise.reject({type:cr,reason:"Invalid sharing status"}):w?Promise.resolve(""):T.currentRoom.status===ur.InRoom?Promise.reject({type:cr,reason:"Unable to share screen to breakout room when in the room"}):(f.startShareToBreakoutRoom(S),u(bo(!0)),A.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[Xn])}stopShareToBreakoutRoom(){return(a=>{const{store:{getState:d,dispatch:u},rwgAgent:f,mediaAgent:A}=a,{meeting:{userId:S},share:{isSharingToBreakoutRoom:T}}=d();return T&&(f.stopShareToBreakoutRoom(S),u(bo(!1)),A.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[Xn])}muteOthersScreenShare(a){return((d,u)=>{const{store:{getState:f},rwgAgent:A}=d,S=f(),{meeting:{userId:T}}=S,w=xm(S);return u===T?Promise.reject({type:cr,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===w.findIndex(M=>M.userId===u)?Promise.reject({type:qr,reason:"Target user is not sharing"}):(A.stopSharing(u),Ii("UPDATE_USER_PARTICIPANT_ATTRIBUTE",M=>M.some(B=>B.userId===u&&!1===B.sharerOn)))})(this[Xn],a)}getShareUserList(){return(a=>{const{store:{getState:d}}=a,u=d();if(!u.share)return[];const{share:{isReceiveSharingFromMainSession:f}}=u;if(f){const{breakoutRoom:{mainSessionAttendeeList:A}}=u;return A.filter(S=>S.bShareToBORooms&&(S.sharerOn||S.sharerPause)).map(S=>({userId:S.userId,displayName:S.displayName,audio:S.audio,muted:S.muted,isHost:S.isHost,isCoHost:S.bCoHost,avatar:S.avatar,bVideoOn:S.bVideoOn,sharerOn:S.sharerOn,sharePause:S.sharerPause,shareToBORooms:S.bShareToBORooms}))}return xm(u).map(A=>({userId:A.userId,displayName:A.displayName,audio:A.audio,muted:A.muted,isHost:A.isHost,isCoHost:A.bCoHost,avatar:A.avatar,bVideoOn:A.bVideoOn,sharerOn:A.sharerOn,sharePause:A.sharerPause}))})(this[Xn])}getActiveShareUserId(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share&&u.share.isRemoteSharingActive?u.share.activeNodeId:0})(this[Xn])}isReceiveSharing(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.isReceiveSharing})(this[Xn])}getShareViewDimension(){return(a=>{const{store:{getState:d}}=a,u=d();if(u.share){if(u.share.status!==W.ShareStatus.End)return fn({},u.share.shareDimension);{const{share:{receivedShareDimension:f}}=u;return{width:f.width,height:f.height}}}return null})(this[Xn])}getShareStatus(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share?u.share.status:null})(this[Xn])}isShareLocked(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.sharePrivilege===Bu.OnlyHost})(this[Xn])}isReceiveSharingFromMainSession(){return(a=>{const{store:{getState:d}}=a,u=d();return!!u.share&&u.share.isReceiveSharingFromMainSession})(this[Xn])}getSharePrivilege(){return(a=>{const{store:{getState:d}}=a,u=d();return u.share?u.share.sharePrivilege:null})(this[Xn])}}).prototype,"startAudio",[$n,WA],Object.getOwnPropertyDescriptor(rn.prototype,"startAudio"),rn.prototype),er(rn.prototype,"stopAudio",[$n,KA],Object.getOwnPropertyDescriptor(rn.prototype,"stopAudio"),rn.prototype),er(rn.prototype,"muteAudio",[$n,Td],Object.getOwnPropertyDescriptor(rn.prototype,"muteAudio"),rn.prototype),er(rn.prototype,"unmuteAudio",[$n,Q_],Object.getOwnPropertyDescriptor(rn.prototype,"unmuteAudio"),rn.prototype),er(rn.prototype,"dialOut",[$n,$a],Object.getOwnPropertyDescriptor(rn.prototype,"dialOut"),rn.prototype),er(rn.prototype,"cancelDialOut",[$n,Tf],Object.getOwnPropertyDescriptor(rn.prototype,"cancelDialOut"),rn.prototype),er(rn.prototype,"hangup",[$n,zA],Object.getOwnPropertyDescriptor(rn.prototype,"hangup"),rn.prototype),er(rn.prototype,"switchMicrophone",[$n,Ju],Object.getOwnPropertyDescriptor(rn.prototype,"switchMicrophone"),rn.prototype),er(rn.prototype,"switchSpeaker",[$n,no],Object.getOwnPropertyDescriptor(rn.prototype,"switchSpeaker"),rn.prototype),er(rn.prototype,"muteShareAudio",[$n,hp,eg],Object.getOwnPropertyDescriptor(rn.prototype,"muteShareAudio"),rn.prototype),er(rn.prototype,"unmuteShareAudio",[$n,pp,wf],Object.getOwnPropertyDescriptor(rn.prototype,"unmuteShareAudio"),rn.prototype),er(rn.prototype,"subscribeAudioStatisticData",[$n,tg],Object.getOwnPropertyDescriptor(rn.prototype,"subscribeAudioStatisticData"),rn.prototype),er(rn.prototype,"unsubscribeAudioStatisticData",[$n,ng],Object.getOwnPropertyDescriptor(rn.prototype,"unsubscribeAudioStatisticData"),rn.prototype),er(rn.prototype,"startVideo",[$n,rg],Object.getOwnPropertyDescriptor(rn.prototype,"startVideo"),rn.prototype),er(rn.prototype,"stopVideo",[$n,ig],Object.getOwnPropertyDescriptor(rn.prototype,"stopVideo"),rn.prototype),er(rn.prototype,"switchCamera",[$n,og],Object.getOwnPropertyDescriptor(rn.prototype,"switchCamera"),rn.prototype),er(rn.prototype,"renderVideo",[$n,mI],Object.getOwnPropertyDescriptor(rn.prototype,"renderVideo"),rn.prototype),er(rn.prototype,"stopRenderVideo",[$n,gI],Object.getOwnPropertyDescriptor(rn.prototype,"stopRenderVideo"),rn.prototype),er(rn.prototype,"updateVideoCanvasDimension",[$n,H_],Object.getOwnPropertyDescriptor(rn.prototype,"updateVideoCanvasDimension"),rn.prototype),er(rn.prototype,"adjustRenderedVideoPosition",[$n,_I],Object.getOwnPropertyDescriptor(rn.prototype,"adjustRenderedVideoPosition"),rn.prototype),er(rn.prototype,"clearVideoCanvas",[$n,vI],Object.getOwnPropertyDescriptor(rn.prototype,"clearVideoCanvas"),rn.prototype),er(rn.prototype,"mirrorVideo",[$n,AI],Object.getOwnPropertyDescriptor(rn.prototype,"mirrorVideo"),rn.prototype),er(rn.prototype,"enableHardwareAcceleration",[$n,YA],Object.getOwnPropertyDescriptor(rn.prototype,"enableHardwareAcceleration"),rn.prototype),er(rn.prototype,"subscribeVideoStatisticData",[$n,yI],Object.getOwnPropertyDescriptor(rn.prototype,"subscribeVideoStatisticData"),rn.prototype),er(rn.prototype,"unsubscribeVideoStatisticData",[$n,EI],Object.getOwnPropertyDescriptor(rn.prototype,"unsubscribeVideoStatisticData"),rn.prototype),er(rn.prototype,"previewVirtualBackground",[$n,zR],Object.getOwnPropertyDescriptor(rn.prototype,"previewVirtualBackground"),rn.prototype),er(rn.prototype,"updateVirtualBackgroundImage",[$n,bI],Object.getOwnPropertyDescriptor(rn.prototype,"updateVirtualBackgroundImage"),rn.prototype),er(rn.prototype,"stopPreviewVirtualBackground",[$n,dr],Object.getOwnPropertyDescriptor(rn.prototype,"stopPreviewVirtualBackground"),rn.prototype),er(rn.prototype,"startShareView",[$n,qA],Object.getOwnPropertyDescriptor(rn.prototype,"startShareView"),rn.prototype),er(rn.prototype,"stopShareView",[$n,ch],Object.getOwnPropertyDescriptor(rn.prototype,"stopShareView"),rn.prototype),er(rn.prototype,"switchShareView",[$n,Nn],Object.getOwnPropertyDescriptor(rn.prototype,"switchShareView"),rn.prototype),er(rn.prototype,"updateSharingCanvasDimension",[$n,Ub],Object.getOwnPropertyDescriptor(rn.prototype,"updateSharingCanvasDimension"),rn.prototype),er(rn.prototype,"startShareScreen",[$n,YR],Object.getOwnPropertyDescriptor(rn.prototype,"startShareScreen"),rn.prototype),er(rn.prototype,"stopShareScreen",[$n,Cn],Object.getOwnPropertyDescriptor(rn.prototype,"stopShareScreen"),rn.prototype),er(rn.prototype,"pauseShareScreen",[$n,xn],Object.getOwnPropertyDescriptor(rn.prototype,"pauseShareScreen"),rn.prototype),er(rn.prototype,"resumeShareScreen",[$n,oo],Object.getOwnPropertyDescriptor(rn.prototype,"resumeShareScreen"),rn.prototype),er(rn.prototype,"setSharePrivilege",[Cd,qR,$n],Object.getOwnPropertyDescriptor(rn.prototype,"setSharePrivilege"),rn.prototype),er(rn.prototype,"lockShare",[Cd,uh,$n],Object.getOwnPropertyDescriptor(rn.prototype,"lockShare"),rn.prototype),er(rn.prototype,"shareToBreakoutRoom",[$n,Cd,Xu],Object.getOwnPropertyDescriptor(rn.prototype,"shareToBreakoutRoom"),rn.prototype),er(rn.prototype,"stopShareToBreakoutRoom",[$n,Cd,G_],Object.getOwnPropertyDescriptor(rn.prototype,"stopShareToBreakoutRoom"),rn.prototype),er(rn.prototype,"muteOthersScreenShare",[$n,Cd,$u],Object.getOwnPropertyDescriptor(rn.prototype,"muteOthersScreenShare"),rn.prototype),rn);var SI,so,JA,XR,Au;let $R=(SI=jr("share"),so=jr("audio"),JA=jr("audio"),XR=jr("audio"),er((Au=class extends JR{switchSharingSecondaryCamera(a){return((d,u)=>{const{store:{getState:f,dispatch:A},mediaAgent:S}=d,T=f(),{video:{cameraDevicesList:w},share:{status:M,isSharingWithSecondCamera:B}}=T;return"default"!==u&&-1===w.map(G=>G.deviceId).indexOf(u)?Promise.reject({type:qr,reason:"Cannot find cameraDeviceId in camera devices list."}):(M===W.ShareStatus.Sharing&&B&&S.changeSharingSecondCamera(u),A(fA(u)),Promise.resolve())})(this[Xn],a)}muteUserAudioLocally(a){return((d,u)=>{const{mediaAgent:f,store:{getState:A,dispatch:S}}=d,T=A(),{audio:{locallyMutedAudioList:w}}=T,M=Ks(T).filter(B=>"computer"===B.audio);return w.includes(u)||-1===M.findIndex(B=>B.userId===u)||(f.muteOrUnmuteOtherAudio(u,!0),S(FE(u))),Promise.resolve("")})(this[Xn],a)}unmuteUserAudioLocally(a){return((d,u)=>{const{mediaAgent:f,store:{getState:A,dispatch:S}}=d,{audio:{locallyMutedAudioList:T}}=A();return T.includes(u)&&(f.muteOrUnmuteOtherAudio(u,!1),S(Mw(u))),Promise.resolve("")})(this[Xn],a)}adjustUserAudioVolumeLocally(a,d){return((u,f,A)=>{const{mediaAgent:S,store:{getState:T,dispatch:w}}=u,M=T();return-1!==Ks(M).findIndex(B=>B.userId===f)&&(S.adjustOtherAudioVolume(f,A),w(UE({userId:f,volume:A}))),Promise.resolve("")})(this[Xn],a,d)}isUserAudioMutedLocally(a){return((d,u)=>{let{store:{getState:f}}=d;const{audio:{locallyMutedAudioList:A}}=f();return A.includes(u)})(this[Xn],a)}getUserVolumeLocally(a){return((d,u)=>{var f,A;let{store:{getState:S}}=d;const{audio:{localUserAudioVolumeList:T,locallyMutedAudioList:w}}=S();return null!==(f=null===(A=T.find(M=>M.userId===u))||void 0===A?void 0:A.volume)&&void 0!==f?f:w.includes(u)?0:100})(this[Xn],a)}}).prototype,"switchSharingSecondaryCamera",[$n,SI],Object.getOwnPropertyDescriptor(Au.prototype,"switchSharingSecondaryCamera"),Au.prototype),er(Au.prototype,"muteUserAudioLocally",[$n,so],Object.getOwnPropertyDescriptor(Au.prototype,"muteUserAudioLocally"),Au.prototype),er(Au.prototype,"unmuteUserAudioLocally",[$n,JA],Object.getOwnPropertyDescriptor(Au.prototype,"unmuteUserAudioLocally"),Au.prototype),er(Au.prototype,"adjustUserAudioVolumeLocally",[$n,XR],Object.getOwnPropertyDescriptor(Au.prototype,"adjustUserAudioVolumeLocally"),Au.prototype),Au);const Rf={controlStatus:kr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:rf.Automatically,currentRoom:{status:ur.Initial,boStatus:Om.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},ii=na({["".concat(nb)]:Pt((a,d)=>{let{payload:u}=d;Array.isArray(u)?a.rooms.push(...u):a.rooms.push(u)}),["".concat(rb)]:Pt((a,d)=>{let{payload:u}=d;a.allocationPattern=u}),["".concat(pC)]:Pt((a,d)=>{let{payload:u}=d;a.sequenceId=u}),["".concat(Mm)]:Pt((a,d)=>{let{payload:u}=d;a.meetingElapsedTime=u}),["".concat(ib)]:Pt((a,d)=>{let{payload:u}=d;a.startRoomElapsedTime=u}),["".concat(bA)]:Pt((a,d)=>{let{payload:u}=d;const{options:f}=a;Object.assign(f,u)}),["".concat(ob)]:Pt((a,d)=>{let{payload:u}=d;a.controlStatus=u}),["".concat(vd)]:Pt((a,d)=>{let{payload:u}=d;a.rooms=u}),["".concat(y_)]:Pt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;Object.assign(f,u)}),["".concat(ff)]:Pt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.status=u}),["".concat($w)]:Pt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.boConfId=u}),["".concat(fC)]:Pt((a,d)=>{let{payload:u}=d;const{currentRoom:f}=a;f.boToken=u}),["".concat(mC)]:Pt((a,d)=>{let{payload:u}=d;a.closingRoomTime=u}),["".concat(gC)]:Pt((a,d)=>{let{payload:u}=d;a.broadcastMessage=u}),["".concat(ws)]:Pt((a,d)=>{let{payload:u}=d;a.hostReplyToQuestionerType=u}),["".concat(sb)]:Pt((a,d)=>{let{payload:u}=d;a.hostReplyToRequestId=u}),["".concat(_C)]:Pt((a,d)=>{let{payload:u}=d;void 0!==u.add&&u.add.length>0&&u.add.forEach(f=>{const A=a.mainSessionAttendeeList.find(S=>S.userId===f.userId);void 0!==A?Object.assign(A,f):Y0(f.userRole)||a.mainSessionAttendeeList.push(f)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(f=>{const A=a.mainSessionAttendeeList.find(S=>S.userId===f.userId);void 0!==A&&Object.assign(A,f)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(f=>{const A=a.mainSessionAttendeeList.findIndex(S=>S.userId===f.userId);-1!==A&&a.mainSessionAttendeeList.splice(A,1)})}),["".concat(vC)]:Pt((a,d)=>{let{payload:u}=d;a.isHugeBO=u}),["".concat(Ad)]:Pt((a,d)=>{let{payload:u}=d;a.isUserRoleUpdated=u}),["".concat(ab)]:Pt((a,d)=>{let{payload:u}=d;a.preAssignedRooms=u}),["".concat(Zw)]:Pt((a,d)=>{let{payload:u}=d;a.isEnableBreakoutRoom=u.isEnableBreakoutRoom,a.isEnableBOBroadcast=u.isEnableBOBroadcast}),["".concat(Gu)]:a=>{const{currentRoom:{status:d}}=a;return fn(fn({},Rf),{},d===ur.Joining?{preAssignedRooms:a.preAssignedRooms,currentRoom:a.currentRoom,closingRoomTime:a.closingRoomTime}:d===ur.Leaving?{preAssignedRooms:a.preAssignedRooms,closingRoomTime:a.closingRoomTime}:{preAssignedRooms:a.preAssignedRooms})}},Rf);var li=pc(function(a,d){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function f(T,w){return Object.prototype.hasOwnProperty.call(T,w)}d.assign=function(T){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var M=w.shift();if(M){if("object"!=typeof M)throw new TypeError(M+"must be non-object");for(var B in M)f(M,B)&&(T[B]=M[B])}}return T},d.shrinkBuf=function(T,w){return T.length===w?T:T.subarray?T.subarray(0,w):(T.length=w,T)};var A={arraySet:function(T,w,M,B,G){if(w.subarray&&T.subarray)T.set(w.subarray(M,M+B),G);else for(var Z=0;Z<B;Z++)T[G+Z]=w[M+Z]},flattenChunks:function(T){var w,M,B,G,Z,ce;for(B=0,w=0,M=T.length;w<M;w++)B+=T[w].length;for(ce=new Uint8Array(B),G=0,w=0,M=T.length;w<M;w++)ce.set(Z=T[w],G),G+=Z.length;return ce}},S={arraySet:function(T,w,M,B,G){for(var Z=0;Z<B;Z++)T[G+Z]=w[M+Z]},flattenChunks:function(T){return[].concat.apply([],T)}};d.setTyped=function(T){T?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,A)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,S))},d.setTyped(u)});function Ys(a){for(var d=a.length;--d>=0;)a[d]=0}var So=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],XA=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],CI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],II=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lh=new Array(576);Ys(lh);var W_=new Array(60);Ys(W_);var fp=new Array(512);Ys(fp);var sg=new Array(256);Ys(sg);var Vb=new Array(29);Ys(Vb);var TI,jb,$A,wd=new Array(30);function wI(a,d,u,f,A){this.static_tree=a,this.extra_bits=d,this.extra_base=u,this.elems=f,this.max_length=A,this.has_stree=a&&a.length}function Qb(a,d){this.dyn_tree=a,this.max_code=0,this.stat_desc=d}function K_(a){return a<256?fp[a]:fp[256+(a>>>7)]}function Ll(a,d){a.pending_buf[a.pending++]=255&d,a.pending_buf[a.pending++]=d>>>8&255}function Za(a,d,u){a.bi_valid>16-u?(a.bi_buf|=d<<a.bi_valid&65535,Ll(a,a.bi_buf),a.bi_buf=d>>16-a.bi_valid,a.bi_valid+=u-16):(a.bi_buf|=d<<a.bi_valid&65535,a.bi_valid+=u)}function Zu(a,d,u){Za(a,u[2*d],u[2*d+1])}function Of(a,d){var u=0;do{u|=1&a,a>>>=1,u<<=1}while(--d>0);return u>>>1}function $N(a,d,u){var f,A,S=new Array(16),T=0;for(f=1;f<=15;f++)S[f]=T=T+u[f-1]<<1;for(A=0;A<=d;A++){var w=a[2*A+1];0!==w&&(a[2*A]=Of(S[w]++,w))}}function ZN(a){var d;for(d=0;d<286;d++)a.dyn_ltree[2*d]=0;for(d=0;d<30;d++)a.dyn_dtree[2*d]=0;for(d=0;d<19;d++)a.bl_tree[2*d]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function RI(a){a.bi_valid>8?Ll(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function ZR(a,d,u,f){var A=2*d,S=2*u;return a[A]<a[S]||a[A]===a[S]&&f[d]<=f[u]}function Hb(a,d,u){for(var f=a.heap[u],A=u<<1;A<=a.heap_len&&(A<a.heap_len&&ZR(d,a.heap[A+1],a.heap[A],a.depth)&&A++,!ZR(d,f,a.heap[A],a.depth));)a.heap[u]=a.heap[A],u=A,A<<=1;a.heap[u]=f}function eO(a,d,u){var f,A,S,T,w=0;if(0!==a.last_lit)do{f=a.pending_buf[a.d_buf+2*w]<<8|a.pending_buf[a.d_buf+2*w+1],A=a.pending_buf[a.l_buf+w],w++,0===f?Zu(a,A,d):(Zu(a,(S=sg[A])+256+1,d),0!==(T=So[S])&&Za(a,A-=Vb[S],T),Zu(a,S=K_(--f),u),0!==(T=XA[S])&&Za(a,f-=wd[S],T))}while(w<a.last_lit);Zu(a,256,d)}function zo(a,d){var u,f,A,S=d.dyn_tree,T=d.stat_desc.static_tree,w=d.stat_desc.has_stree,M=d.stat_desc.elems,B=-1;for(a.heap_len=0,a.heap_max=573,u=0;u<M;u++)0!==S[2*u]?(a.heap[++a.heap_len]=B=u,a.depth[u]=0):S[2*u+1]=0;for(;a.heap_len<2;)S[2*(A=a.heap[++a.heap_len]=B<2?++B:0)]=1,a.depth[A]=0,a.opt_len--,w&&(a.static_len-=T[2*A+1]);for(d.max_code=B,u=a.heap_len>>1;u>=1;u--)Hb(a,S,u);A=M;do{u=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Hb(a,S,1),f=a.heap[1],a.heap[--a.heap_max]=u,a.heap[--a.heap_max]=f,S[2*A]=S[2*u]+S[2*f],a.depth[A]=(a.depth[u]>=a.depth[f]?a.depth[u]:a.depth[f])+1,S[2*u+1]=S[2*f+1]=A,a.heap[1]=A++,Hb(a,S,1)}while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],function(G,Z){var ce,he,ue,Se,Qe,He,Ke=Z.dyn_tree,et=Z.max_code,Lt=Z.stat_desc.static_tree,Gt=Z.stat_desc.has_stree,jt=Z.stat_desc.extra_bits,wt=Z.stat_desc.extra_base,sn=Z.stat_desc.max_length,hn=0;for(Se=0;Se<=15;Se++)G.bl_count[Se]=0;for(Ke[2*G.heap[G.heap_max]+1]=0,ce=G.heap_max+1;ce<573;ce++)(Se=Ke[2*Ke[2*(he=G.heap[ce])+1]+1]+1)>sn&&(Se=sn,hn++),Ke[2*he+1]=Se,he>et||(G.bl_count[Se]++,Qe=0,he>=wt&&(Qe=jt[he-wt]),G.opt_len+=(He=Ke[2*he])*(Se+Qe),Gt&&(G.static_len+=He*(Lt[2*he+1]+Qe)));if(0!==hn){do{for(Se=sn-1;0===G.bl_count[Se];)Se--;G.bl_count[Se]--,G.bl_count[Se+1]+=2,G.bl_count[sn]--,hn-=2}while(hn>0);for(Se=sn;0!==Se;Se--)for(he=G.bl_count[Se];0!==he;)(ue=G.heap[--ce])>et||(Ke[2*ue+1]!==Se&&(G.opt_len+=(Se-Ke[2*ue+1])*Ke[2*ue],Ke[2*ue+1]=Se),he--)}}(a,d),$N(S,B,a.bl_count)}function OI(a,d,u){var f,A,S=-1,T=d[1],w=0,M=7,B=4;for(0===T&&(M=138,B=3),d[2*(u+1)+1]=65535,f=0;f<=u;f++)A=T,T=d[2*(f+1)+1],++w<M&&A===T||(w<B?a.bl_tree[2*A]+=w:0!==A?(A!==S&&a.bl_tree[2*A]++,a.bl_tree[32]++):w<=10?a.bl_tree[34]++:a.bl_tree[36]++,w=0,S=A,0===T?(M=138,B=3):A===T?(M=6,B=3):(M=7,B=4))}function tO(a,d,u){var f,A,S=-1,T=d[1],w=0,M=7,B=4;for(0===T&&(M=138,B=3),f=0;f<=u;f++)if(A=T,T=d[2*(f+1)+1],!(++w<M&&A===T)){if(w<B)do{Zu(a,A,a.bl_tree)}while(0!=--w);else 0!==A?(A!==S&&(Zu(a,A,a.bl_tree),w--),Zu(a,16,a.bl_tree),Za(a,w-3,2)):w<=10?(Zu(a,17,a.bl_tree),Za(a,w-3,3)):(Zu(a,18,a.bl_tree),Za(a,w-11,7));w=0,S=A,0===T?(M=138,B=3):A===T?(M=6,B=3):(M=7,B=4)}}Ys(wd);var nO=!1;function Gb(a,d,u,f){var A,S,T;Za(a,0+(f?1:0),3),S=d,T=u,RI(A=a),Ll(A,T),Ll(A,~T),li.arraySet(A.pending_buf,A.window,S,T,A.pending),A.pending+=T}var ag,Zc={_tr_init:function(a){nO||(function(){var d,u,f,A,S,T=new Array(16);for(f=0,A=0;A<28;A++)for(Vb[A]=f,d=0;d<1<<So[A];d++)sg[f++]=A;for(sg[f-1]=A,S=0,A=0;A<16;A++)for(wd[A]=S,d=0;d<1<<XA[A];d++)fp[S++]=A;for(S>>=7;A<30;A++)for(wd[A]=S<<7,d=0;d<1<<XA[A]-7;d++)fp[256+S++]=A;for(u=0;u<=15;u++)T[u]=0;for(d=0;d<=143;)lh[2*d+1]=8,d++,T[8]++;for(;d<=255;)lh[2*d+1]=9,d++,T[9]++;for(;d<=279;)lh[2*d+1]=7,d++,T[7]++;for(;d<=287;)lh[2*d+1]=8,d++,T[8]++;for($N(lh,287,T),d=0;d<30;d++)W_[2*d+1]=5,W_[2*d]=Of(d,5);TI=new wI(lh,So,257,286,15),jb=new wI(W_,XA,0,30,15),$A=new wI(new Array(0),CI,0,19,7)}(),nO=!0),a.l_desc=new Qb(a.dyn_ltree,TI),a.d_desc=new Qb(a.dyn_dtree,jb),a.bl_desc=new Qb(a.bl_tree,$A),a.bi_buf=0,a.bi_valid=0,ZN(a)},_tr_stored_block:Gb,_tr_flush_block:function(a,d,u,f){var A,S,T=0;a.level>0?(2===a.strm.data_type&&(a.strm.data_type=function(w){var M,B=4093624447;for(M=0;M<=31;M++,B>>>=1)if(1&B&&0!==w.dyn_ltree[2*M])return 0;if(0!==w.dyn_ltree[18]||0!==w.dyn_ltree[20]||0!==w.dyn_ltree[26])return 1;for(M=32;M<256;M++)if(0!==w.dyn_ltree[2*M])return 1;return 0}(a)),zo(a,a.l_desc),zo(a,a.d_desc),T=function(w){var M;for(OI(w,w.dyn_ltree,w.l_desc.max_code),OI(w,w.dyn_dtree,w.d_desc.max_code),zo(w,w.bl_desc),M=18;M>=3&&0===w.bl_tree[2*II[M]+1];M--);return w.opt_len+=3*(M+1)+5+5+4,M}(a),(S=a.static_len+3+7>>>3)<=(A=a.opt_len+3+7>>>3)&&(A=S)):A=S=u+5,u+4<=A&&-1!==d?Gb(a,d,u,f):4===a.strategy||S===A?(Za(a,2+(f?1:0),3),eO(a,lh,W_)):(Za(a,4+(f?1:0),3),function(w,M,B,G){var Z;for(Za(w,M-257,5),Za(w,B-1,5),Za(w,G-4,4),Z=0;Z<G;Z++)Za(w,w.bl_tree[2*II[Z]+1],3);tO(w,w.dyn_ltree,M-1),tO(w,w.dyn_dtree,B-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),eO(a,a.dyn_ltree,a.dyn_dtree)),ZN(a),f&&RI(a)},_tr_tally:function(a,d,u){return a.pending_buf[a.d_buf+2*a.last_lit]=d>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&d,a.pending_buf[a.l_buf+a.last_lit]=255&u,a.last_lit++,0===d?a.dyn_ltree[2*u]++:(a.matches++,d--,a.dyn_ltree[2*(sg[u]+256+1)]++,a.dyn_dtree[2*K_(d)]++),a.last_lit===a.lit_bufsize-1},_tr_align:function(a){var d;Za(a,2,3),Zu(a,256,lh),16===(d=a).bi_valid?(Ll(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):d.bi_valid>=8&&(d.pending_buf[d.pending++]=255&d.bi_buf,d.bi_buf>>=8,d.bi_valid-=8)}},z_=function(a,d,u,f){for(var A=65535&a|0,S=a>>>16&65535|0,T=0;0!==u;){u-=T=u>2e3?2e3:u;do{S=S+(A=A+d[f++]|0)|0}while(--T);A%=65521,S%=65521}return A|S<<16|0},Y_=function(){for(var a,d=[],u=0;u<256;u++){a=u;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;d[u]=a}return d}(),Pa=function(a,d,u,f){var A=Y_,S=f+u;a^=-1;for(var T=f;T<S;T++)a=a>>>8^A[255&(a^d[T])];return-1^a},dh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function mp(a,d){return a.msg=dh[d],d}function rO(a){return(a<<1)-(a>4?9:0)}function gp(a){for(var d=a.length;--d>=0;)a[d]=0}function eu(a){var d=a.state,u=d.pending;u>a.avail_out&&(u=a.avail_out),0!==u&&(li.arraySet(a.output,d.pending_buf,d.pending_out,u,a.next_out),a.next_out+=u,d.pending_out+=u,a.total_out+=u,a.avail_out-=u,d.pending-=u,0===d.pending&&(d.pending_out=0))}function ys(a,d){Zc._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,d),a.block_start=a.strstart,eu(a.strm)}function Fr(a,d){a.pending_buf[a.pending++]=d}function yu(a,d){a.pending_buf[a.pending++]=d>>>8&255,a.pending_buf[a.pending++]=255&d}function iO(a,d){var u,f,A=a.max_chain_length,S=a.strstart,T=a.prev_length,w=a.nice_match,M=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,B=a.window,G=a.w_mask,Z=a.prev,ce=a.strstart+258,he=B[S+T-1],ue=B[S+T];a.prev_length>=a.good_match&&(A>>=2),w>a.lookahead&&(w=a.lookahead);do{if(B[(u=d)+T]===ue&&B[u+T-1]===he&&B[u]===B[S]&&B[++u]===B[S+1]){S+=2,u++;do{}while(B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&B[++S]===B[++u]&&S<ce);if(f=258-(ce-S),S=ce-258,f>T){if(a.match_start=d,T=f,f>=w)break;he=B[S+T-1],ue=B[S+T]}}}while((d=Z[d&G])>M&&0!=--A);return T<=a.lookahead?T:a.lookahead}function hh(a){var d,u,f,A,S,T,w,M,B,G,Z=a.w_size;do{if(A=a.window_size-a.lookahead-a.strstart,a.strstart>=Z+(Z-262)){li.arraySet(a.window,a.window,Z,Z,0),a.match_start-=Z,a.strstart-=Z,a.block_start-=Z,d=u=a.hash_size;do{f=a.head[--d],a.head[d]=f>=Z?f-Z:0}while(--u);d=u=Z;do{f=a.prev[--d],a.prev[d]=f>=Z?f-Z:0}while(--u);A+=Z}if(0===a.strm.avail_in)break;if(w=a.window,M=a.strstart+a.lookahead,G=void 0,(G=(T=a.strm).avail_in)>(B=A)&&(G=B),u=0===G?0:(T.avail_in-=G,li.arraySet(w,T.input,T.next_in,G,M),1===T.state.wrap?T.adler=z_(T.adler,w,G,M):2===T.state.wrap&&(T.adler=Pa(T.adler,w,G,M)),T.next_in+=G,T.total_in+=G,G),a.lookahead+=u,a.lookahead+a.insert>=3)for(a.ins_h=a.window[S=a.strstart-a.insert],a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+3-1])&a.hash_mask,a.prev[S&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=S,S++,a.insert--,!(a.lookahead+a.insert<3)););}while(a.lookahead<262&&0!==a.strm.avail_in)}function Bl(a,d){for(var u,f;;){if(a.lookahead<262){if(hh(a),a.lookahead<262&&0===d)return 1;if(0===a.lookahead)break}if(u=0,a.lookahead>=3&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==u&&a.strstart-u<=a.w_size-262&&(a.match_length=iO(a,u)),a.match_length>=3)if(f=Zc._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=3){a.match_length--;do{a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart}while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else f=Zc._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(f&&(ys(a,!1),0===a.strm.avail_out))return 1}return a.insert=a.strstart<2?a.strstart:2,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ys(a,!1),0===a.strm.avail_out)?1:2}function bc(a,d){for(var u,f,A;;){if(a.lookahead<262){if(hh(a),a.lookahead<262&&0===d)return 1;if(0===a.lookahead)break}if(u=0,a.lookahead>=3&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==u&&a.prev_length<a.max_lazy_match&&a.strstart-u<=a.w_size-262&&(a.match_length=iO(a,u),a.match_length<=5&&(1===a.strategy||3===a.match_length&&a.strstart-a.match_start>4096)&&(a.match_length=2)),a.prev_length>=3&&a.match_length<=a.prev_length){A=a.strstart+a.lookahead-3,f=Zc._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do{++a.strstart<=A&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,u=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart)}while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,f&&(ys(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((f=Zc._tr_tally(a,0,a.window[a.strstart-1]))&&ys(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(f=Zc._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<2?a.strstart:2,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(ys(a,!1),0===a.strm.avail_out)?1:2}function qs(a,d,u,f,A){this.good_length=a,this.max_lazy=d,this.nice_length=u,this.max_chain=f,this.func=A}function oO(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new li.Buf16(1146),this.dyn_dtree=new li.Buf16(122),this.bl_tree=new li.Buf16(78),gp(this.dyn_ltree),gp(this.dyn_dtree),gp(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new li.Buf16(16),this.heap=new li.Buf16(573),gp(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new li.Buf16(573),gp(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function DI(a){var d;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=2,(d=a.state).pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?42:113,a.adler=2===d.wrap?0:1,d.last_flush=0,Zc._tr_init(d),0):mp(a,-2)}function sO(a){var u,d=DI(a);return 0===d&&((u=a.state).window_size=2*u.w_size,gp(u.head),u.max_lazy_match=ag[u.level].max_lazy,u.good_match=ag[u.level].good_length,u.nice_match=ag[u.level].nice_length,u.max_chain_length=ag[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=2,u.match_available=0,u.ins_h=0),d}function Wb(a,d,u,f,A,S){if(!a)return-2;var T=1;if(-1===d&&(d=6),f<0?(T=0,f=-f):f>15&&(T=2,f-=16),A<1||A>9||8!==u||f<8||f>15||d<0||d>9||S<0||S>4)return mp(a,-2);8===f&&(f=9);var w=new oO;return a.state=w,w.strm=a,w.wrap=T,w.gzhead=null,w.w_bits=f,w.w_size=1<<w.w_bits,w.w_mask=w.w_size-1,w.hash_bits=A+7,w.hash_size=1<<w.hash_bits,w.hash_mask=w.hash_size-1,w.hash_shift=~~((w.hash_bits+3-1)/3),w.window=new li.Buf8(2*w.w_size),w.head=new li.Buf16(w.hash_size),w.prev=new li.Buf16(w.w_size),w.lit_bufsize=1<<A+6,w.pending_buf_size=4*w.lit_bufsize,w.pending_buf=new li.Buf8(w.pending_buf_size),w.d_buf=1*w.lit_bufsize,w.l_buf=3*w.lit_bufsize,w.level=d,w.strategy=S,w.method=u,sO(a)}ag=[new qs(0,0,0,0,function(a,d){var u=65535;for(u>a.pending_buf_size-5&&(u=a.pending_buf_size-5);;){if(a.lookahead<=1){if(hh(a),0===a.lookahead&&0===d)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var f=a.block_start+u;if((0===a.strstart||a.strstart>=f)&&(a.lookahead=a.strstart-f,a.strstart=f,ys(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(ys(a,!1),0===a.strm.avail_out))return 1}return a.insert=0,4===d?(ys(a,!0),0===a.strm.avail_out?3:4):(a.strstart>a.block_start&&ys(a,!1),1)}),new qs(4,4,8,4,Bl),new qs(4,5,16,8,Bl),new qs(4,6,32,32,Bl),new qs(4,4,16,16,bc),new qs(8,16,32,32,bc),new qs(8,16,128,128,bc),new qs(8,32,128,256,bc),new qs(32,128,258,1024,bc),new qs(32,258,258,4096,bc)];var ZA={deflateInit:function(a,d){return Wb(a,d,8,15,8,0)},deflateInit2:Wb,deflateReset:sO,deflateResetKeep:DI,deflateSetHeader:function(a,d){return a&&a.state?2!==a.state.wrap?-2:(a.state.gzhead=d,0):-2},deflate:function(a,d){var u,f,A,S;if(!a||!a.state||d>5||d<0)return a?mp(a,-2):-2;if(f=a.state,!a.output||!a.input&&0!==a.avail_in||666===f.status&&4!==d)return mp(a,0===a.avail_out?-5:-2);if(f.strm=a,u=f.last_flush,f.last_flush=d,42===f.status)if(2===f.wrap)a.adler=0,Fr(f,31),Fr(f,139),Fr(f,8),f.gzhead?(Fr(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Fr(f,255&f.gzhead.time),Fr(f,f.gzhead.time>>8&255),Fr(f,f.gzhead.time>>16&255),Fr(f,f.gzhead.time>>24&255),Fr(f,9===f.level?2:f.strategy>=2||f.level<2?4:0),Fr(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Fr(f,255&f.gzhead.extra.length),Fr(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=Pa(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,0),Fr(f,9===f.level?2:f.strategy>=2||f.level<2?4:0),Fr(f,3),f.status=113);else{var T=8+(f.w_bits-8<<4)<<8;T|=(f.strategy>=2||f.level<2?0:f.level<6?1:6===f.level?2:3)<<6,0!==f.strstart&&(T|=32),T+=31-T%31,f.status=113,yu(f,T),0!==f.strstart&&(yu(f,a.adler>>>16),yu(f,65535&a.adler)),a.adler=1}if(69===f.status)if(f.gzhead.extra){for(A=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),eu(a),A=f.pending,f.pending!==f.pending_buf_size));)Fr(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(73===f.status)if(f.gzhead.name){A=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),eu(a),A=f.pending,f.pending===f.pending_buf_size)){S=1;break}S=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Fr(f,S)}while(0!==S);f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),0===S&&(f.gzindex=0,f.status=91)}else f.status=91;if(91===f.status)if(f.gzhead.comment){A=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),eu(a),A=f.pending,f.pending===f.pending_buf_size)){S=1;break}S=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Fr(f,S)}while(0!==S);f.gzhead.hcrc&&f.pending>A&&(a.adler=Pa(a.adler,f.pending_buf,f.pending-A,A)),0===S&&(f.status=103)}else f.status=103;if(103===f.status&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&eu(a),f.pending+2<=f.pending_buf_size&&(Fr(f,255&a.adler),Fr(f,a.adler>>8&255),a.adler=0,f.status=113)):f.status=113),0!==f.pending){if(eu(a),0===a.avail_out)return f.last_flush=-1,0}else if(0===a.avail_in&&rO(d)<=rO(u)&&4!==d)return mp(a,-5);if(666===f.status&&0!==a.avail_in)return mp(a,-5);if(0!==a.avail_in||0!==f.lookahead||0!==d&&666!==f.status){var w=2===f.strategy?function(M,B){for(var G;;){if(0===M.lookahead&&(hh(M),0===M.lookahead)){if(0===B)return 1;break}if(M.match_length=0,G=Zc._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,G&&(ys(M,!1),0===M.strm.avail_out))return 1}return M.insert=0,4===B?(ys(M,!0),0===M.strm.avail_out?3:4):M.last_lit&&(ys(M,!1),0===M.strm.avail_out)?1:2}(f,d):3===f.strategy?function(M,B){for(var G,Z,ce,he,ue=M.window;;){if(M.lookahead<=258){if(hh(M),M.lookahead<=258&&0===B)return 1;if(0===M.lookahead)break}if(M.match_length=0,M.lookahead>=3&&M.strstart>0&&(Z=ue[ce=M.strstart-1])===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]){he=M.strstart+258;do{}while(Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&Z===ue[++ce]&&ce<he);M.match_length=258-(he-ce),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=3?(G=Zc._tr_tally(M,1,M.match_length-3),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(G=Zc._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),G&&(ys(M,!1),0===M.strm.avail_out))return 1}return M.insert=0,4===B?(ys(M,!0),0===M.strm.avail_out?3:4):M.last_lit&&(ys(M,!1),0===M.strm.avail_out)?1:2}(f,d):ag[f.level].func(f,d);if(3!==w&&4!==w||(f.status=666),1===w||3===w)return 0===a.avail_out&&(f.last_flush=-1),0;if(2===w&&(1===d?Zc._tr_align(f):5!==d&&(Zc._tr_stored_block(f,0,0,!1),3===d&&(gp(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),eu(a),0===a.avail_out))return f.last_flush=-1,0}return 4!==d?0:f.wrap<=0?1:(2===f.wrap?(Fr(f,255&a.adler),Fr(f,a.adler>>8&255),Fr(f,a.adler>>16&255),Fr(f,a.adler>>24&255),Fr(f,255&a.total_in),Fr(f,a.total_in>>8&255),Fr(f,a.total_in>>16&255),Fr(f,a.total_in>>24&255)):(yu(f,a.adler>>>16),yu(f,65535&a.adler)),eu(a),f.wrap>0&&(f.wrap=-f.wrap),0!==f.pending?0:1)},deflateEnd:function(a){var d;return a&&a.state?42!==(d=a.state.status)&&69!==d&&73!==d&&91!==d&&103!==d&&113!==d&&666!==d?mp(a,-2):(a.state=null,113===d?mp(a,-3):0):-2},deflateSetDictionary:function(a,d){var u,f,A,S,T,w,M,B,G=d.length;if(!a||!a.state||2===(S=(u=a.state).wrap)||1===S&&42!==u.status||u.lookahead)return-2;for(1===S&&(a.adler=z_(a.adler,d,G,0)),u.wrap=0,G>=u.w_size&&(0===S&&(gp(u.head),u.strstart=0,u.block_start=0,u.insert=0),B=new li.Buf8(u.w_size),li.arraySet(B,d,G-u.w_size,u.w_size,0),d=B,G=u.w_size),T=a.avail_in,w=a.next_in,M=a.input,a.avail_in=G,a.next_in=0,a.input=d,hh(u);u.lookahead>=3;){f=u.strstart,A=u.lookahead-2;do{u.ins_h=(u.ins_h<<u.hash_shift^u.window[f+3-1])&u.hash_mask,u.prev[f&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=f,f++}while(--A);u.strstart=f,u.lookahead=2,hh(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,a.next_in=w,a.input=M,a.avail_in=T,u.wrap=S,0},deflateInfo:"pako deflate (from Nodeca project)"},kI=!0,Kb=!0;try{String.fromCharCode.apply(null,[0])}catch{kI=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Kb=!1}for(var ph=new li.Buf8(256),Df=0;Df<256;Df++)ph[Df]=Df>=252?6:Df>=248?5:Df>=240?4:Df>=224?3:Df>=192?2:1;function NI(a,d){if(d<65534&&(a.subarray&&Kb||!a.subarray&&kI))return String.fromCharCode.apply(null,li.shrinkBuf(a,d));for(var u="",f=0;f<d;f++)u+=String.fromCharCode(a[f]);return u}ph[254]=ph[254]=1;var PI=function(a){var d,u,f,A,S,T=a.length,w=0;for(A=0;A<T;A++)55296==(64512&(u=a.charCodeAt(A)))&&A+1<T&&56320==(64512&(f=a.charCodeAt(A+1)))&&(u=65536+(u-55296<<10)+(f-56320),A++),w+=u<128?1:u<2048?2:u<65536?3:4;for(d=new li.Buf8(w),S=0,A=0;S<w;A++)55296==(64512&(u=a.charCodeAt(A)))&&A+1<T&&56320==(64512&(f=a.charCodeAt(A+1)))&&(u=65536+(u-55296<<10)+(f-56320),A++),u<128?d[S++]=u:u<2048?(d[S++]=192|u>>>6,d[S++]=128|63&u):u<65536?(d[S++]=224|u>>>12,d[S++]=128|u>>>6&63,d[S++]=128|63&u):(d[S++]=240|u>>>18,d[S++]=128|u>>>12&63,d[S++]=128|u>>>6&63,d[S++]=128|63&u);return d},aO=function(a){return NI(a,a.length)},cO=function(a,d){var u,f,A,S,T=d||a.length,w=new Array(2*T);for(f=0,u=0;u<T;)if((A=a[u++])<128)w[f++]=A;else if((S=ph[A])>4)w[f++]=65533,u+=S-1;else{for(A&=2===S?31:3===S?15:7;S>1&&u<T;)A=A<<6|63&a[u++],S--;S>1?w[f++]=65533:A<65536?w[f++]=A:(w[f++]=55296|(A-=65536)>>10&1023,w[f++]=56320|1023&A)}return NI(w,f)},zb=function(a,d){var u;for((d=d||a.length)>a.length&&(d=a.length),u=d-1;u>=0&&128==(192&a[u]);)u--;return u<0||0===u?d:u+ph[a[u]]>d?u:d},MI=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},xI=Object.prototype.toString;function Nr(a){if(!(this instanceof Nr))return new Nr(a);this.options=li.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MI,this.strm.avail_out=0;var u=ZA.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(0!==u)throw new Error(dh[u]);if(d.header&&ZA.deflateSetHeader(this.strm,d.header),d.dictionary){var f;if(f="string"==typeof d.dictionary?PI(d.dictionary):"[object ArrayBuffer]"===xI.call(d.dictionary)?new Uint8Array(d.dictionary):d.dictionary,0!==(u=ZA.deflateSetDictionary(this.strm,f)))throw new Error(dh[u]);this._dict_set=!0}}function Rd(a,d){var u=new Nr(d);if(u.push(a,!0),u.err)throw u.msg||dh[u.err];return u.result}Nr.prototype.push=function(a,d){var u,f,A=this.strm,S=this.options.chunkSize;if(this.ended)return!1;f=d===~~d?d:!0===d?4:0,A.input="string"==typeof a?PI(a):"[object ArrayBuffer]"===xI.call(a)?new Uint8Array(a):a,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new li.Buf8(S),A.next_out=0,A.avail_out=S),1!==(u=ZA.deflate(A,f))&&0!==u)return this.onEnd(u),this.ended=!0,!1;0!==A.avail_out&&(0!==A.avail_in||4!==f&&2!==f)||this.onData("string"===this.options.to?aO(li.shrinkBuf(A.output,A.next_out)):li.shrinkBuf(A.output,A.next_out))}while((A.avail_in>0||0===A.avail_out)&&1!==u);return 4===f?(u=ZA.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,0===u):2!==f||(this.onEnd(0),A.avail_out=0,!0)},Nr.prototype.onData=function(a){this.chunks.push(a)},Nr.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):li.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var Od={Deflate:Nr,deflate:Rd,deflateRaw:function(a,d){return(d=d||{}).raw=!0,Rd(a,d)},gzip:function(a,d){return(d=d||{}).gzip=!0,Rd(a,d)}},ey=function(a,d){var u,f,A,S,T,w,M,B,G,Z,ce,he,ue,Se,Qe,He,Ke,et,Lt,Gt,jt,wt,sn,hn,vn;hn=a.input,A=(f=a.next_in)+(a.avail_in-5),vn=a.output,T=(S=a.next_out)-(d-a.avail_out),w=S+(a.avail_out-257),M=(u=a.state).dmax,B=u.wsize,G=u.whave,Z=u.wnext,ce=u.window,he=u.hold,ue=u.bits,Se=u.lencode,Qe=u.distcode,He=(1<<u.lenbits)-1,Ke=(1<<u.distbits)-1;e:do{ue<15&&(he+=hn[f++]<<ue,he+=hn[f++]<<(ue+=8),ue+=8),et=Se[he&He];t:for(;;){if(he>>>=Lt=et>>>24,ue-=Lt,0==(Lt=et>>>16&255))vn[S++]=65535&et;else{if(!(16&Lt)){if(0==(64&Lt)){et=Se[(65535&et)+(he&(1<<Lt)-1)];continue t}if(32&Lt){u.mode=12;break e}a.msg="invalid literal/length code",u.mode=30;break e}Gt=65535&et,(Lt&=15)&&(ue<Lt&&(he+=hn[f++]<<ue,ue+=8),Gt+=he&(1<<Lt)-1,he>>>=Lt,ue-=Lt),ue<15&&(he+=hn[f++]<<ue,he+=hn[f++]<<(ue+=8),ue+=8),et=Qe[he&Ke];n:for(;;){if(he>>>=Lt=et>>>24,ue-=Lt,!(16&(Lt=et>>>16&255))){if(0==(64&Lt)){et=Qe[(65535&et)+(he&(1<<Lt)-1)];continue n}a.msg="invalid distance code",u.mode=30;break e}if(jt=65535&et,ue<(Lt&=15)&&(he+=hn[f++]<<ue,(ue+=8)<Lt&&(he+=hn[f++]<<ue,ue+=8)),(jt+=he&(1<<Lt)-1)>M){a.msg="invalid distance too far back",u.mode=30;break e}if(he>>>=Lt,ue-=Lt,jt>(Lt=S-T)){if((Lt=jt-Lt)>G&&u.sane){a.msg="invalid distance too far back",u.mode=30;break e}if(wt=0,sn=ce,0===Z){if(wt+=B-Lt,Lt<Gt){Gt-=Lt;do{vn[S++]=ce[wt++]}while(--Lt);wt=S-jt,sn=vn}}else if(Z<Lt){if(wt+=B+Z-Lt,(Lt-=Z)<Gt){Gt-=Lt;do{vn[S++]=ce[wt++]}while(--Lt);if(wt=0,Z<Gt){Gt-=Lt=Z;do{vn[S++]=ce[wt++]}while(--Lt);wt=S-jt,sn=vn}}}else if(wt+=Z-Lt,Lt<Gt){Gt-=Lt;do{vn[S++]=ce[wt++]}while(--Lt);wt=S-jt,sn=vn}for(;Gt>2;)vn[S++]=sn[wt++],vn[S++]=sn[wt++],vn[S++]=sn[wt++],Gt-=3;Gt&&(vn[S++]=sn[wt++],Gt>1&&(vn[S++]=sn[wt++]))}else{wt=S-jt;do{vn[S++]=vn[wt++],vn[S++]=vn[wt++],vn[S++]=vn[wt++],Gt-=3}while(Gt>2);Gt&&(vn[S++]=vn[wt++],Gt>1&&(vn[S++]=vn[wt++]))}break}}break}}while(f<A&&S<w);f-=Gt=ue>>3,he&=(1<<(ue-=Gt<<3))-1,a.next_in=f,a.next_out=S,a.avail_in=f<A?A-f+5:5-(f-A),a.avail_out=S<w?w-S+257:257-(S-w),u.hold=he,u.bits=ue},LI=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ty=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],uO=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],lO=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],el=function(a,d,u,f,A,S,T,w){var M,B,G,Z,ce,he,ue,Se,Qe,He=w.bits,Ke=0,et=0,Lt=0,Gt=0,jt=0,wt=0,sn=0,hn=0,vn=0,ln=0,Qt=null,Bn=0,gr=new li.Buf16(16),At=new li.Buf16(16),ut=null,Be=0;for(Ke=0;Ke<=15;Ke++)gr[Ke]=0;for(et=0;et<f;et++)gr[d[u+et]]++;for(jt=He,Gt=15;Gt>=1&&0===gr[Gt];Gt--);if(jt>Gt&&(jt=Gt),0===Gt)return A[S++]=20971520,A[S++]=20971520,w.bits=1,0;for(Lt=1;Lt<Gt&&0===gr[Lt];Lt++);for(jt<Lt&&(jt=Lt),hn=1,Ke=1;Ke<=15;Ke++)if(hn<<=1,(hn-=gr[Ke])<0)return-1;if(hn>0&&(0===a||1!==Gt))return-1;for(At[1]=0,Ke=1;Ke<15;Ke++)At[Ke+1]=At[Ke]+gr[Ke];for(et=0;et<f;et++)0!==d[u+et]&&(T[At[d[u+et]]++]=et);if(0===a?(Qt=ut=T,he=19):1===a?(Qt=LI,Bn-=257,ut=ty,Be-=257,he=256):(Qt=uO,ut=lO,he=-1),ln=0,et=0,Ke=Lt,ce=S,wt=jt,sn=0,G=-1,Z=(vn=1<<jt)-1,1===a&&vn>852||2===a&&vn>592)return 1;for(;;){ue=Ke-sn,T[et]<he?(Se=0,Qe=T[et]):T[et]>he?(Se=ut[Be+T[et]],Qe=Qt[Bn+T[et]]):(Se=96,Qe=0),M=1<<Ke-sn,Lt=B=1<<wt;do{A[ce+(ln>>sn)+(B-=M)]=ue<<24|Se<<16|Qe|0}while(0!==B);for(M=1<<Ke-1;ln&M;)M>>=1;if(0!==M?(ln&=M-1,ln+=M):ln=0,et++,0==--gr[Ke]){if(Ke===Gt)break;Ke=d[u+T[et]]}if(Ke>jt&&(ln&Z)!==G){for(0===sn&&(sn=jt),ce+=Lt,hn=1<<(wt=Ke-sn);wt+sn<Gt&&!((hn-=gr[wt+sn])<=0);)wt++,hn<<=1;if(vn+=1<<wt,1===a&&vn>852||2===a&&vn>592)return 1;A[G=ln&Z]=jt<<24|wt<<16|ce-S|0}}return 0!==ln&&(A[ce+ln]=Ke-sn<<24|64<<16|0),w.bits=jt,0};function BI(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function dO(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new li.Buf16(320),this.work=new li.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function FI(a){var d;return a&&a.state?(a.total_in=a.total_out=(d=a.state).total=0,a.msg="",d.wrap&&(a.adler=1&d.wrap),d.mode=1,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new li.Buf32(852),d.distcode=d.distdyn=new li.Buf32(592),d.sane=1,d.back=-1,0):-2}function hO(a){var d;return a&&a.state?((d=a.state).wsize=0,d.whave=0,d.wnext=0,FI(a)):-2}function pO(a,d){var u,f;return a&&a.state?(f=a.state,d<0?(u=0,d=-d):(u=1+(d>>4),d<48&&(d&=15)),d&&(d<8||d>15)?-2:(null!==f.window&&f.wbits!==d&&(f.window=null),f.wrap=u,f.wbits=d,hO(a))):-2}function fO(a,d){var u,f;return a?(f=new dO,a.state=f,f.window=null,0!==(u=pO(a,d))&&(a.state=null),u):-2}var UI,q_,mO=!0;function gO(a){if(mO){var d;for(UI=new li.Buf32(512),q_=new li.Buf32(32),d=0;d<144;)a.lens[d++]=8;for(;d<256;)a.lens[d++]=9;for(;d<280;)a.lens[d++]=7;for(;d<288;)a.lens[d++]=8;for(el(1,a.lens,0,288,UI,0,a.work,{bits:9}),d=0;d<32;)a.lens[d++]=5;el(2,a.lens,0,32,q_,0,a.work,{bits:5}),mO=!1}a.lencode=UI,a.lenbits=9,a.distcode=q_,a.distbits=5}function ny(a,d,u,f){var A,S=a.state;return null===S.window&&(S.wsize=1<<S.wbits,S.wnext=0,S.whave=0,S.window=new li.Buf8(S.wsize)),f>=S.wsize?(li.arraySet(S.window,d,u-S.wsize,S.wsize,0),S.wnext=0,S.whave=S.wsize):((A=S.wsize-S.wnext)>f&&(A=f),li.arraySet(S.window,d,u-f,A,S.wnext),(f-=A)?(li.arraySet(S.window,d,u-f,f,0),S.wnext=f,S.whave=S.wsize):(S.wnext+=A,S.wnext===S.wsize&&(S.wnext=0),S.whave<S.wsize&&(S.whave+=A))),0}var kf={inflateReset:hO,inflateReset2:pO,inflateResetKeep:FI,inflateInit:function(a){return fO(a,15)},inflateInit2:fO,inflate:function(a,d){var u,f,A,S,T,w,M,B,G,Z,ce,he,ue,Se,Qe,He,Ke,et,Lt,Gt,jt,wt,sn,hn,vn=0,ln=new li.Buf8(4),Qt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;12===(u=a.state).mode&&(u.mode=13),T=a.next_out,A=a.output,S=a.next_in,f=a.input,B=u.hold,G=u.bits,Z=w=a.avail_in,ce=M=a.avail_out,wt=0;e:for(;;)switch(u.mode){case 1:if(0===u.wrap){u.mode=13;break}for(;G<16;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(2&u.wrap&&35615===B){u.check=0,ln[0]=255&B,ln[1]=B>>>8&255,u.check=Pa(u.check,ln,2,0),B=0,G=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&B)<<8)+(B>>8))%31){a.msg="incorrect header check",u.mode=30;break}if(8!=(15&B)){a.msg="unknown compression method",u.mode=30;break}if(G-=4,jt=8+(15&(B>>>=4)),0===u.wbits)u.wbits=jt;else if(jt>u.wbits){a.msg="invalid window size",u.mode=30;break}u.dmax=1<<jt,a.adler=u.check=1,u.mode=512&B?10:12,B=0,G=0;break;case 2:for(;G<16;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(u.flags=B,8!=(255&u.flags)){a.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){a.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=B>>8&1),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Pa(u.check,ln,2,0)),B=0,G=0,u.mode=3;case 3:for(;G<32;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.head&&(u.head.time=B),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,ln[2]=B>>>16&255,ln[3]=B>>>24&255,u.check=Pa(u.check,ln,4,0)),B=0,G=0,u.mode=4;case 4:for(;G<16;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.head&&(u.head.xflags=255&B,u.head.os=B>>8),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Pa(u.check,ln,2,0)),B=0,G=0,u.mode=5;case 5:if(1024&u.flags){for(;G<16;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.length=B,u.head&&(u.head.extra_len=B),512&u.flags&&(ln[0]=255&B,ln[1]=B>>>8&255,u.check=Pa(u.check,ln,2,0)),B=0,G=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&((he=u.length)>w&&(he=w),he&&(u.head&&(jt=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),li.arraySet(u.head.extra,f,S,he,jt)),512&u.flags&&(u.check=Pa(u.check,f,he,S)),w-=he,S+=he,u.length-=he),u.length))break e;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(0===w)break e;he=0;do{jt=f[S+he++],u.head&&jt&&u.length<65536&&(u.head.name+=String.fromCharCode(jt))}while(jt&&he<w);if(512&u.flags&&(u.check=Pa(u.check,f,he,S)),w-=he,S+=he,jt)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(0===w)break e;he=0;do{jt=f[S+he++],u.head&&jt&&u.length<65536&&(u.head.comment+=String.fromCharCode(jt))}while(jt&&he<w);if(512&u.flags&&(u.check=Pa(u.check,f,he,S)),w-=he,S+=he,jt)break e}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;G<16;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(B!==(65535&u.check)){a.msg="header crc mismatch",u.mode=30;break}B=0,G=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),a.adler=u.check=0,u.mode=12;break;case 10:for(;G<32;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}a.adler=u.check=BI(B),B=0,G=0,u.mode=11;case 11:if(0===u.havedict)return a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=w,u.hold=B,u.bits=G,2;a.adler=u.check=1,u.mode=12;case 12:if(5===d||6===d)break e;case 13:if(u.last){B>>>=7&G,G-=7&G,u.mode=27;break}for(;G<3;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}switch(u.last=1&B,G-=1,3&(B>>>=1)){case 0:u.mode=14;break;case 1:if(gO(u),u.mode=20,6===d){B>>>=2,G-=2;break e}break;case 2:u.mode=17;break;case 3:a.msg="invalid block type",u.mode=30}B>>>=2,G-=2;break;case 14:for(B>>>=7&G,G-=7&G;G<32;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if((65535&B)!=(B>>>16^65535)){a.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&B,B=0,G=0,u.mode=15,6===d)break e;case 15:u.mode=16;case 16:if(he=u.length){if(he>w&&(he=w),he>M&&(he=M),0===he)break e;li.arraySet(A,f,S,he,T),w-=he,S+=he,M-=he,T+=he,u.length-=he;break}u.mode=12;break;case 17:for(;G<14;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(u.nlen=257+(31&B),G-=5,u.ndist=1+(31&(B>>>=5)),G-=5,u.ncode=4+(15&(B>>>=5)),B>>>=4,G-=4,u.nlen>286||u.ndist>30){a.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;G<3;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.lens[Qt[u.have++]]=7&B,B>>>=3,G-=3}for(;u.have<19;)u.lens[Qt[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,wt=el(0,u.lens,0,19,u.lencode,0,u.work,sn={bits:u.lenbits}),u.lenbits=sn.bits,wt){a.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;He=(vn=u.lencode[B&(1<<u.lenbits)-1])>>>16&255,Ke=65535&vn,!((Qe=vn>>>24)<=G);){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(Ke<16)B>>>=Qe,G-=Qe,u.lens[u.have++]=Ke;else{if(16===Ke){for(hn=Qe+2;G<hn;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(B>>>=Qe,G-=Qe,0===u.have){a.msg="invalid bit length repeat",u.mode=30;break}jt=u.lens[u.have-1],he=3+(3&B),B>>>=2,G-=2}else if(17===Ke){for(hn=Qe+3;G<hn;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}G-=Qe,jt=0,he=3+(7&(B>>>=Qe)),B>>>=3,G-=3}else{for(hn=Qe+7;G<hn;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}G-=Qe,jt=0,he=11+(127&(B>>>=Qe)),B>>>=7,G-=7}if(u.have+he>u.nlen+u.ndist){a.msg="invalid bit length repeat",u.mode=30;break}for(;he--;)u.lens[u.have++]=jt}}if(30===u.mode)break;if(0===u.lens[256]){a.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,wt=el(1,u.lens,0,u.nlen,u.lencode,0,u.work,sn={bits:u.lenbits}),u.lenbits=sn.bits,wt){a.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,wt=el(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,sn={bits:u.distbits}),u.distbits=sn.bits,wt){a.msg="invalid distances set",u.mode=30;break}if(u.mode=20,6===d)break e;case 20:u.mode=21;case 21:if(w>=6&&M>=258){a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=w,u.hold=B,u.bits=G,ey(a,ce),T=a.next_out,A=a.output,M=a.avail_out,S=a.next_in,f=a.input,w=a.avail_in,B=u.hold,G=u.bits,12===u.mode&&(u.back=-1);break}for(u.back=0;He=(vn=u.lencode[B&(1<<u.lenbits)-1])>>>16&255,Ke=65535&vn,!((Qe=vn>>>24)<=G);){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(He&&0==(240&He)){for(et=Qe,Lt=He,Gt=Ke;He=(vn=u.lencode[Gt+((B&(1<<et+Lt)-1)>>et)])>>>16&255,Ke=65535&vn,!(et+(Qe=vn>>>24)<=G);){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}B>>>=et,G-=et,u.back+=et}if(B>>>=Qe,G-=Qe,u.back+=Qe,u.length=Ke,0===He){u.mode=26;break}if(32&He){u.back=-1,u.mode=12;break}if(64&He){a.msg="invalid literal/length code",u.mode=30;break}u.extra=15&He,u.mode=22;case 22:if(u.extra){for(hn=u.extra;G<hn;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.length+=B&(1<<u.extra)-1,B>>>=u.extra,G-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;He=(vn=u.distcode[B&(1<<u.distbits)-1])>>>16&255,Ke=65535&vn,!((Qe=vn>>>24)<=G);){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(0==(240&He)){for(et=Qe,Lt=He,Gt=Ke;He=(vn=u.distcode[Gt+((B&(1<<et+Lt)-1)>>et)])>>>16&255,Ke=65535&vn,!(et+(Qe=vn>>>24)<=G);){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}B>>>=et,G-=et,u.back+=et}if(B>>>=Qe,G-=Qe,u.back+=Qe,64&He){a.msg="invalid distance code",u.mode=30;break}u.offset=Ke,u.extra=15&He,u.mode=24;case 24:if(u.extra){for(hn=u.extra;G<hn;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}u.offset+=B&(1<<u.extra)-1,B>>>=u.extra,G-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){a.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(0===M)break e;if(u.offset>(he=ce-M)){if((he=u.offset-he)>u.whave&&u.sane){a.msg="invalid distance too far back",u.mode=30;break}ue=he>u.wnext?u.wsize-(he-=u.wnext):u.wnext-he,he>u.length&&(he=u.length),Se=u.window}else Se=A,ue=T-u.offset,he=u.length;he>M&&(he=M),M-=he,u.length-=he;do{A[T++]=Se[ue++]}while(--he);0===u.length&&(u.mode=21);break;case 26:if(0===M)break e;A[T++]=u.length,M--,u.mode=21;break;case 27:if(u.wrap){for(;G<32;){if(0===w)break e;w--,B|=f[S++]<<G,G+=8}if(a.total_out+=ce-=M,u.total+=ce,ce&&(a.adler=u.check=u.flags?Pa(u.check,A,ce,T-ce):z_(u.check,A,ce,T-ce)),ce=M,(u.flags?B:BI(B))!==u.check){a.msg="incorrect data check",u.mode=30;break}B=0,G=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;G<32;){if(0===w)break e;w--,B+=f[S++]<<G,G+=8}if(B!==(4294967295&u.total)){a.msg="incorrect length check",u.mode=30;break}B=0,G=0}u.mode=29;case 29:wt=1;break e;case 30:wt=-3;break e;case 31:return-4;default:return-2}return a.next_out=T,a.avail_out=M,a.next_in=S,a.avail_in=w,u.hold=B,u.bits=G,(u.wsize||ce!==a.avail_out&&u.mode<30&&(u.mode<27||4!==d))&&ny(a,a.output,a.next_out,ce-a.avail_out),ce-=a.avail_out,a.total_in+=Z-=a.avail_in,a.total_out+=ce,u.total+=ce,u.wrap&&ce&&(a.adler=u.check=u.flags?Pa(u.check,A,ce,a.next_out-ce):z_(u.check,A,ce,a.next_out-ce)),a.data_type=u.bits+(u.last?64:0)+(12===u.mode?128:0)+(20===u.mode||15===u.mode?256:0),(0===Z&&0===ce||4===d)&&0===wt&&(wt=-5),wt},inflateEnd:function(a){if(!a||!a.state)return-2;var d=a.state;return d.window&&(d.window=null),a.state=null,0},inflateGetHeader:function(a,d){var u;return a&&a.state?0==(2&(u=a.state).wrap)?-2:(u.head=d,d.done=!1,0):-2},inflateSetDictionary:function(a,d){var u,f=d.length;return a&&a.state?0!==(u=a.state).wrap&&11!==u.mode?-2:11===u.mode&&z_(1,d,f,0)!==u.check?-3:ny(a,d,f,f)?(u.mode=31,-4):(u.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},Rs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},eP=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},_O=Object.prototype.toString;function cg(a){if(!(this instanceof cg))return new cg(a);this.options=li.assign({chunkSize:16384,windowBits:0,to:""},a||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15)),!(d.windowBits>=0&&d.windowBits<16)||a&&a.windowBits||(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&0==(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MI,this.strm.avail_out=0;var u=kf.inflateInit2(this.strm,d.windowBits);if(u!==Rs.Z_OK)throw new Error(dh[u]);if(this.header=new eP,kf.inflateGetHeader(this.strm,this.header),d.dictionary&&("string"==typeof d.dictionary?d.dictionary=PI(d.dictionary):"[object ArrayBuffer]"===_O.call(d.dictionary)&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(u=kf.inflateSetDictionary(this.strm,d.dictionary))!==Rs.Z_OK))throw new Error(dh[u])}function VI(a,d){var u=new cg(d);if(u.push(a,!0),u.err)throw u.msg||dh[u.err];return u.result}cg.prototype.push=function(a,d){var u,f,A,S,T,w=this.strm,M=this.options.chunkSize,B=this.options.dictionary,G=!1;if(this.ended)return!1;f=d===~~d?d:!0===d?Rs.Z_FINISH:Rs.Z_NO_FLUSH,w.input="string"==typeof a?function(Z){for(var ce=new li.Buf8(Z.length),he=0,ue=ce.length;he<ue;he++)ce[he]=Z.charCodeAt(he);return ce}(a):"[object ArrayBuffer]"===_O.call(a)?new Uint8Array(a):a,w.next_in=0,w.avail_in=w.input.length;do{if(0===w.avail_out&&(w.output=new li.Buf8(M),w.next_out=0,w.avail_out=M),(u=kf.inflate(w,Rs.Z_NO_FLUSH))===Rs.Z_NEED_DICT&&B&&(u=kf.inflateSetDictionary(this.strm,B)),u===Rs.Z_BUF_ERROR&&!0===G&&(u=Rs.Z_OK,G=!1),u!==Rs.Z_STREAM_END&&u!==Rs.Z_OK)return this.onEnd(u),this.ended=!0,!1;w.next_out&&(0!==w.avail_out&&u!==Rs.Z_STREAM_END&&(0!==w.avail_in||f!==Rs.Z_FINISH&&f!==Rs.Z_SYNC_FLUSH)||("string"===this.options.to?(A=zb(w.output,w.next_out),S=w.next_out-A,T=cO(w.output,A),w.next_out=S,w.avail_out=M-S,S&&li.arraySet(w.output,w.output,A,S,0),this.onData(T)):this.onData(li.shrinkBuf(w.output,w.next_out)))),0===w.avail_in&&0===w.avail_out&&(G=!0)}while((w.avail_in>0||0===w.avail_out)&&u!==Rs.Z_STREAM_END);return u===Rs.Z_STREAM_END&&(f=Rs.Z_FINISH),f===Rs.Z_FINISH?(u=kf.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Rs.Z_OK):f!==Rs.Z_SYNC_FLUSH||(this.onEnd(Rs.Z_OK),w.avail_out=0,!0)},cg.prototype.onData=function(a){this.chunks.push(a)},cg.prototype.onEnd=function(a){a===Rs.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):li.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var ry={};(0,li.assign)(ry,Od,{Inflate:cg,inflate:VI,inflateRaw:function(a,d){return(d=d||{}).raw=!0,VI(a,d)},ungzip:VI},Rs);var vO=ry;const{WebclientBreakoutRoomAttendeeStatus:Nf,WebclientBreakoutRoomCommand:Yb}=hs;function fh(a,d){let u=0;for(;u<a.length;u++){const f=a[u],{attendeeGuidList:A}=f;if(null!=A&&A.includes(d))break}return u<a.length?a[u]:void 0}function _p(){ar.remove(Nf),ar.remove(Yb)}function qb(){return Do.createAgent().leaveBO(1),Et("RECONNECTING_MEETING",{reason:aa.BackToMainSession}),_p(),[ff(ur.Leaving),ia()]}function ug(a,d){return Et("RECONNECTING_MEETING",{reason:aa.JoinBreakoutRoom,roomName:a}),d===ur.InRoom&&Do.createAgent().leaveBO(1),[ff(ur.Joining),ia()]}function lg(a){return Et("RECONNECTING_MEETING",{reason:aa.MoveToBreakoutRoom,roomName:a}),Do.createAgent().leaveBO(1),[ff(ur.Joining),ia()]}function Pf(a){const u=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?ur.InRoom:ur.Invited;return ar.set(Nf,JSON.stringify({status:u,boId:a.boId}),Vi.SessionStorage),y_({status:u,boId:a.boId,name:a.name,boStatus:a.boStatus})}function J_(a){const{breakoutRoom:{isUserRoleUpdated:d,currentRoom:{boConfId:u}}}=a.value,f=ui(a.value);return f&&(!u||u&&d)?Pn(f.isHost):(u?Gs("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",1):Gs("ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",2).pipe(function(A){return A.lift(new BB(1))})).pipe(ho(Zo),Qn(a),Ne(A=>{let[,S]=A;return ui(S).isHost}))}function X_(a){return Vv({boIdList:Gs("BREAKOUT_ROOM_ADD_TOKEN").pipe(UB((d,u)=>[...d,u],[]),ri(a))}).pipe(Nu(1e4))}const tl=Do.createAgent(),vp=["userRole","bCoHost","bCCEditor","bHold"];var nP=Object.freeze({__proto__:null,addRoomEpic:a=>Mn(a,4174).pipe(lr(d=>{Et("BREAKOUT_ROOM_ADD_TOKEN",d.payload.body.bid)}),ai(mt)),handleBoAttributeIndicationEpic:(a,d)=>ad(a,7950).pipe(Qn(d),Qo(u=>{let[f,A]=u;const{payload:{body:{proto:S}}}=f,{breakoutRoom:{isHugeBO:T,currentRoom:{status:w,boId:M}},meeting:{userGUID:B}}=A;let G=S;T&&(G=vO.ungzip(Cl(S),{to:"string"}));const ce=JSON.parse(jh(G)),he=[];let ue;const{ControlStatus:Se,NameIndex:Qe,IsAutoJoinEnabled:He,IsBackToMainSessionEnabled:Ke,IsTimerEnabled:et,TimerDuration:Lt,IsTimerAutoEndEnabled:Gt,WaitSeconds:jt,StartTimeOnMMR:wt,ItemList:sn}=ce,hn={isAutoJoinRoom:He,isBackToMainSessionEnabled:Ke,isTimerEnabled:et,timerDuration:Lt,isTimerAutoEnabled:Gt,waitSeconds:jt};he.push(bA(hn)),he.push(ib(wt)),he.push(pC(Qe)),he.push(ob(Se));const vn=sn&&sn.map(ln=>({boId:ln.BID,name:ln.MeetingTitle,boStatus:ln.Status,hostId:ln.HostID,attendeeGuidList:ln.ParticipantList||[]}))||[];switch(he.push(vd(vn)),Et("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",{controlStatus:Se,roomList:vn}),Se){case kr.InProgress:if(w!==ur.InRoom&&w!==ur.Joining){const ln=function(Qt,Bn){const{meeting:{isHost:gr,userGUID:At}}=Bn.value,ut=ar.get(Nf),Be=[];if(ut){const{status:$e,boId:St}=JSON.parse(ut);if($e===ur.Invited)if(gr)_p();else{const lt=fh(Qt,At);lt&&(Be.push(Pf(lt)),Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:lt.boId,name:lt.name}))}else if($e===ur.InRoom){let lt;if(lt=gr?Qt.find(Ut=>Ut.boId===St):fh(Qt,At),lt){Be.push(Pf(lt));const Ut=lt.boId;S_(Bn).subscribe(()=>{Do.createAgent().joinBO(Ut)})}_p()}}return Be}(vn,d);if(0===ln.length){const Qt=fh(vn,B);Qt&&he.push(Pf(Qt))}else he.push(...ln)}else if(w===ur.InRoom&&f.type==="".concat(or)){const ln=fh(vn,B);ln&&J_(d).subscribe(Qt=>{M===ln.boId||Qt||tl.joinBO(ln.boId)})}hn.isTimerEnabled&&hn.timerDuration>0&&(Qt=hn.timerDuration,Bn=wt,ue=J_(ln=d).pipe(Qn(ln),Qo(gr=>{let[At,ut]=gr;const{breakoutRoom:{currentRoom:{status:Be},meetingElapsedTime:$e},meeting:{joinMeetingTimeStamp:St}}=ut,lt=St-1e3*$e+1e3*Bn+1e3*Qt;if(performance.now()<lt){if(At)return Wg(1e3).pipe(Ne(()=>Math.floor((lt-performance.now())/1e3)),Qn(ln),Yg(Ut=>{let[an,Hn]=Ut;const{breakoutRoom:{controlStatus:_r,currentRoom:{status:Qr}},socket:{zoomSocketStatus:tc},meeting:{isHost:bh}}=Hn;return an>=0&&bh&&_r===kr.InProgress&&(Qr===ur.InRoom||Qr===ur.MainSession||Qr===ur.Initial)&&tc===fi.Connected}),lr(Ut=>{let[an]=Ut;Et("BREAKOUT_ROOM_ROOM_COUTDOWN",{countdown:an})}),Un(Ut=>{let[an]=Ut;return 0===an}),lr(Ut=>{let[,an]=Ut;const{breakoutRoom:{options:Hn}}=an;Hn.isTimerAutoEnabled?Do.createAgent().stopBO(kr.Closing):Et("BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP")}),ai(mt));if(Be===ur.InRoom)return Wg(1e3).pipe(Ne(()=>Math.floor((lt-performance.now())/1e3)),Qn(ln),Yg(Ut=>{let[an,Hn]=Ut;const{breakoutRoom:{currentRoom:{status:_r}},meeting:{isHost:Qr},socket:{zoomSocketStatus:tc}}=Hn;return an>=0&&_r===ur.InRoom&&!Qr&&tc===fi.Connected}),lr(Ut=>{let[an]=Ut;Et("BREAKOUT_ROOM_ROOM_COUTDOWN",{countdown:an})}),ai(mt))}return mt})));break;case kr.Closing:ue=J_(d).pipe(Un(ln=>ln),tr(()=>{const ln=[],{breakoutRoom:{closingRoomTime:Qt,currentRoom:{status:Bn}},participants:{attendeesList:gr}}=A;let At=hn.waitSeconds;if(0!==Qt&&hn.waitSeconds>0){const ut=Math.floor((performance.now()-Qt)/1e3);At=Math.max(hn.waitSeconds-ut,0)}if(0===At)return tl.stopBO(kr.Closed),mt;{if(Bn!==ur.InRoom&&gr.length>1&&gr.every(Be=>!Be.bid))return tl.stopBO(kr.Closed),mt;Qt||ln.push(mC(performance.now()));const ut=performance.now()+1e3*At;return Zs(zn(ln),Wg(1e3).pipe(Ne(()=>Math.floor((ut-performance.now())/1e3)),Qn(d),Yg(Be=>{let[$e,St]=Be;const{breakoutRoom:{controlStatus:lt},meeting:{isHost:Ut},socket:{zoomSocketStatus:an}}=St;return $e>=0&&lt===kr.Closing&&an===fi.Connected&&Ut}),lr(Be=>{let[$e]=Be;$e>=0&&Et("BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",{countdown:$e})}),Un(Be=>{let[$e]=Be;return 0===$e}),lr(()=>{tl.stopBO(kr.Closed)}),ai(mt)))}}));break;case kr.Closed:he.push(mC(0)),w===ur.Leaving?he.push(ff(ur.MainSession)):w===ur.Invited?he.push(ff(ur.Initial)):w!==ur.InRoom&&w!==ur.Joining||he.push(...qb()),_p()}var ln,Qt,Bn;return ue?Zs(zn(he),ue):zn(he)})),handleBoJoinResponseEpic:(a,d)=>ad(a,4194).pipe(Qn(d),Qo(u=>{let[f,A]=u;const{payload:{body:{bid:S,botoken:T,confID:w}}}=f,{meeting:{isHost:M},breakoutRoom:{rooms:B,currentRoom:{status:G}}}=A,Z=[],ce=B.find(he=>he.boId===S);return ce&&(Z.push(Pf(ce,M)),Z.push($w(w)),Z.push(fC(T)),M||G!==ur.InRoom?Z.push(...ug(ce.name,G)):Z.push(...lg(ce.name))),Et("BREAKOUT_ROOM_JOIN_BO_RESPONSE",{boId:S}),zn(Z)})),handleBoCommandIndicationEpic:(a,d)=>a.pipe(Ui("".concat(Is),"".concat(or)),Un(u=>7949===u.payload.evt),Qn(d),tr(u=>{let[f,A]=u;const{payload:{body:S}}=f,{meeting:{userGUID:T},breakoutRoom:{rooms:w,options:{isAutoJoinRoom:M},currentRoom:{status:B}}}=A,{commandType:G}=S,Z=[];let ce;switch(G){case Dm.Join:{const{targetBID:ue,botoken:Se,confID:Qe}=S,He=fh(w,T);He&&He.boId===ue&&(Z.push($w(Qe)),Z.push(fC(Se)),M?Z.push(...ug(He.name)):(ar.set(hs.WebclientBreakoutRoomCommand,G,Vi.SessionStorage),Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:ue,name:He.name})));break}case Dm.Switch:{const{targetBID:ue,botoken:Se,confID:Qe}=S,He=fh(w,T);He&&He.boId===ue&&(Z.push(y_({boId:He.boId,boToken:Se,boConfId:Qe,name:He.name})),B===ur.Invited?(ar.set(hs.WebclientBreakoutRoomCommand,G,Vi.SessionStorage),M?Z.push(...ug(He.name)):Et("BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",{roomId:ue,name:He.name})):Z.push(...lg(He.name)));break}case Dm.Leave:{const{waitTime:ue}=S;if((he=B)!==ur.InRoom&&he!==ur.Joining&&he!==ur.Leaving)Z.push(y_({boId:"",boToken:"",boConfId:"",status:ur.Initial}));else{const Se=Number(ue);if(Se>0){const Qe=performance.now()+1e3*Se;ce=Wg(1e3).pipe(Ne(()=>Math.floor((Qe-performance.now())/1e3)),Qn(d),Yg(He=>{let[Ke,et]=He;const{breakoutRoom:{controlStatus:Lt,currentRoom:{status:Gt}},meeting:{isHost:jt},socket:{zoomSocketStatus:wt}}=et;return Ke>=0&&wt===fi.Connected&&Lt===kr.Closing&&Gt===ur.InRoom&&!jt}),lr(He=>{let[Ke]=He;Ke>=0&&Et("BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",{countdown:Ke})}),ai(mt))}else Z.push(...qb());_p()}break}case Dm.Broadcast:{const{textContent:ue}=S;if(ue){const{meeting:{encType:Se},participants:{attendeesList:Qe},breakoutRoom:{mainSessionAttendeeList:He}}=A;let Ke="";if(Se===vm.AES_GCM){const et=Qe.concat(He).find(Lt=>z0(Lt.userRole));et&&(Ke=et.zoomID)}ce=zn(fc.beginDecrypt({decryptedText:ue,type:fu.BO_BROADCAST,zoomId:Ke}).then(et=>{let{message:Lt}=et;return Et("BREAKOUT_ROOM_BROADCAST_MESSAGE",{message:Lt}),gC(Lt)}))}break}case Dm.HelpReq:{const{requestID:ue}=S,{breakoutRoom:{mainSessionAttendeeList:Se,rooms:Qe,currentRoom:{boId:He},hostReplyToQuestionerType:Ke,hostReplyToRequestId:et},participants:{attendeesList:Lt}}=A;if(ue){if(B===ur.InRoom){const Gt=Se.find(jt=>jt.userId===ue);if(Gt&&Gt.bid===He){tl.askForHelpResultBO(ue,W.AskHostHelpResponse.AlreadyInRoom);break}}if(Ke===W.AskHostHelpResponse.Received&&et!==ue)tl.askForHelpResultBO(ue,W.AskHostHelpResponse.Busy);else{tl.askForHelpResultBO(ue,W.AskHostHelpResponse.Received),Z.push(ws(W.AskHostHelpResponse.Received),sb(ue));const Gt=(B===ur.InRoom?Se:Lt).find(jt=>jt.userId===ue);if(Gt){const jt=Gt.bid,wt=Qe.find(sn=>sn.boId===jt);wt&&Et("BREAKOUT_ROOM_ASK_HELP_REQUEST",{userId:ue,displayName:Gt.displayName,roomName:wt.name,roomId:wt.boId})}}}break}case Dm.HelpRes:{const{helpResult:ue}=S;Et("BREAKOUT_ROOM_ASK_HELP_RESPONSE",{result:Number(ue)});break}}var he;return ce?Zs(zn(Z),ce):zn(Z)})),handleMainSessionJoinResponseEpic:(a,d)=>r_(a,4098).pipe(Qn(d),Qo(u=>{let[f,A]=u;const{payload:{body:{res:S,elapsed:T}}}=f,w=[];return S===Lo.CONF_FAIL_MEETING_HAS_CLOSED||S===Lo.CONF_FAIL_HAS_BEEN_REMOVED?(_p(),w.push(...wA(A,!1))):S===Lo.CONF_SUCCESS&&(w.push(Mm(T)),w.push(ff(ur.InRoom)),ar.set(hs.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:ur.InRoom,boId:A.breakoutRoom.currentRoom.boId}),Vi.SessionStorage)),zn(w)})),handleMainSessionRosterUpdateResponse:(a,d)=>r_(a,Ts).pipe(Ne(u=>KC(u.payload.body)),Qn(d),tr(u=>{let[f,A]=u;const S=[_C(f)],{participants:{attendeesList:T},breakoutRoom:{mainSessionAttendeeList:w,isUserRoleUpdated:M},meeting:{userId:B}}=A;let G=[];return["add","update"].forEach(Z=>f[Z]&&G.push(...f[Z])),G=G.filter(Z=>vp.some(ce=>void 0!==Z[ce])).map(Z=>{const ce=w.find(he=>he.userId===Z.userId);if(ce){const he=T.find(ue=>ue.zoomID===ce.zoomID);if(he)return void 0===Z.userRole||M||he.userId!==B||(S.push(Ad(!0)),Et("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",Z)),void 0!==Z.bCCEditor&&S.push(EA({editorId:he.userId,isEditor:!!Z.bCCEditor,editorZoomId:he.zoomID})),delete Z.bRaiseHand,delete Z.bCapsPinMultiVideo,fn(fn({},Z),{},{userId:he.userId})}return null}).filter(Z=>!!Z),G.length>0&&(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",G),S.push(Fn({update:G}))),Et("BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE"),zn(S)})),handleMainSessionMeetingAttributeEpic:a=>r_(a,mc).pipe(Un(d=>{const{payload:{body:u}}=d;return void 0!==u?.bAllowAttendeeRename||void 0!==u?.chatPriviledge||void 0!==u?.lockShare}),Ne(d=>{const{payload:{body:u}}=d;return void 0!==u.bAllowAttendeeRename?Qh(d.payload.body):void 0!==u.chatPriviledge?AA(u.chatPriviledge):void 0!==u.lockShare?rC(u.lockShare):void 0})),handleClosingRoomAttendeeUpdateEpic:(a,d)=>Mn(a,Ts).pipe(Qn(d),Un(u=>{let[,f]=u;const{meeting:{isHost:A},breakoutRoom:{controlStatus:S,currentRoom:{status:T}}}=f;return A&&S===kr.Closing&&T!==ur.InRoom}),ho(Zo),lr(()=>{const{participants:{attendeesList:u}}=d.value;u.every(f=>!f.bid)&&u.length>1&&tl.stopBO(kr.Closed)}),ai(mt)),handlePreAssignedRoomRespEpic:(a,d)=>Mn(a,4214).pipe(Qn(d),Qo(u=>{let[f,A]=u;const{payload:{body:{proto:S}}}=f,{breakoutRoom:{rooms:T,isHugeBO:w}}=A;try{const M=JSON.parse(jh(S)),B=[];if(M&&M.PreAssignBoList&&Array.isArray(M.PreAssignBoList)){const G=M.PreAssignBoList.map(ce=>({name:ce.BoName,emails:ce.email}));if(B.push(ab(G)),T.length+G.length<(w?100:50)){const ce=G.map(he=>he.name);return tl.batchCreateBOToken(ce),Zs(zn(B),X_(ce.length).pipe(Qn(d),tr(he=>{let[{boIdList:ue},Se]=he;const Qe=Ks(Se),He=G.map((et,Lt)=>{const{emails:Gt,name:jt}=et;let wt=[];return Gt&&Array.isArray(Gt)&&(wt=Gt.map(sn=>Qe.filter(hn=>hn.userEmail===sn).map(hn=>hn.userGUID)).reduce((sn,hn)=>[...sn,...hn],[])),{boId:ue[Lt],name:jt,attendeeGuidList:wt}}),Ke=He.map((et,Lt)=>({roomId:et.boId,name:et.name,emails:G[Lt].emails}));return Et("BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",{rooms:Ke}),zn([vd(He),ab(Ke)])})))}return zn(B)}}catch{console.error("pre assign proto is not valid")}return mt})),handlePreAssignedUserJoinMeetingEpic:(a,d)=>ad(a,Ts).pipe(Qn(d),Un(u=>{let[f,A]=u;const{meeting:{isHost:S,meetingStatus:T,meetingOptions:w},breakoutRoom:{controlStatus:M}}=A,{payload:{body:B}}=f;return T===vs.Joined&&w?.isAllowBreakoutRoomPreAssign&&S&&(M===kr.NotStarted||M===kr.InProgress)&&Array.isArray(B.add)}),tr(u=>{let[f,A]=u;const{breakoutRoom:{controlStatus:S,rooms:T,preAssignedRooms:w,currentRoom:{status:M}},participants:{failoverAttendeesList:B}}=A,G=w?.filter(he=>T.findIndex(ue=>ue.boId===he.roomId)>-1),{payload:{body:{add:Z}}}=f,ce=[];return G.length>0&&Z.filter(he=>he.userEmail&&he.userGUID).filter(he=>-1===B.findIndex(ue=>ue.zoomID===he.zoomID)).forEach(he=>{if(!fh(T,he.userGUID))for(let ue=0;ue<G?.length;ue++){const Se=G[ue];if(Se.emails.includes(he.userEmail)){if(S===kr.NotStarted){const Qe=Pt(T,He=>{He.find(et=>et.boId===Se.roomId)?.attendeeGuidList.push(he.userGUID)});ce.push(vd(Qe))}else S===kr.InProgress&&(M===ur.InRoom&&f.type==="".concat(or)?tl.assignToBO(he.id,String(Se.roomId)):M!==ur.Initial&&M!==ur.MainSession||tl.assignToBO(he.id,String(Se.roomId)));break}}}),zn(ce)})),handleInconsistentPropertiesInBOUserEpic:(a,d)=>Mn(a,Ts).pipe(Un(u=>{const{breakoutRoom:{mainSessionAttendeeList:f}}=d.value,{payload:{body:A}}=u;return f.length>0&&(void 0!==A.add||void 0!==A.update)}),ho(Ss),Ne(u=>KC(u.payload.body)),tr(u=>{const{breakoutRoom:{mainSessionAttendeeList:f,isUserRoleUpdated:A},participants:{attendeesList:S}}=d.value;let T=[];const w=[];["add","update"].forEach(G=>u[G]&&T.push(...u[G]));const M=[...vp,"isHost"];T=T.filter(G=>M.some(Z=>void 0!==G[Z]));const B=T.filter(G=>void 0!==G.zoomID);return T=T.map(G=>{var Z,ce,he,ue;const Se=null!==(Z=null!==(ce=G.zoomID)&&void 0!==ce?ce:null===(he=B.find(Qe=>Qe.userId===G.userId))||void 0===he?void 0:he.zoomID)&&void 0!==Z?Z:null===(ue=S.find(Qe=>Qe.userId===G.userId))||void 0===ue?void 0:ue.zoomID;if(Se){const Qe=f.find(He=>He.zoomID===Se);if(Qe)return A||(w.push(Ad(!0)),Et("BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",Qe)),Object.keys(G).filter(He=>Object.prototype.hasOwnProperty.call(G,He)).filter(He=>M.includes(He)).reduce((He,Ke)=>(void 0===Qe[Ke]&&"bCoHost"!==Ke||Object.assign(He,{[Ke]:"boolean"==typeof G[Ke]?!!Qe[Ke]:Qe[Ke]}),He),{userId:G.userId})}}).filter(Boolean),T.length>0&&(Et("UPDATE_USER_PARTICIPANT_ATTRIBUTE",T),w.push(Fn({update:T}))),zn(w)}))});const AO=Do.createAgent();var Mf=Object.freeze({__proto__:null,handleMainSessionReceivingSharingEpic:(a,d)=>r_(a,Ts).pipe(Un(u=>{var f;const{payload:{body:A}}=u;return null==A||null===(f=A.update)||void 0===f?void 0:f.some(S=>void 0!==S.bShareToBORooms||void 0!==S.bShareOn)}),Qn(d),Ne(u=>{let[f,A]=u;const{payload:{body:{update:S}}}=f,{breakoutRoom:{mainSessionAttendeeList:T}}=A,w=S.filter(G=>G.bShareOn&&G.bShareToBORooms),M=S.filter(G=>!G.bShareOn||!G.bShareToBORooms),B=T.filter(G=>G.sharerOn&&G.bShareToBORooms);return w.length>0&&w.forEach(G=>{-1===B.findIndex(Z=>Z.userId===G.id)&&Et("SHARE_NEW_USER_ADD",fn(fn({},G),{},{isFromMainSession:!0}))}),M.length>0&&M.forEach(G=>{Et("SHARE_USER_REMOVE",fn(fn({},G),{},{isFromMainSession:!0}))}),S.map(G=>{if(G.bShareOn&&G.bShareToBORooms){if(0===T.filter(Z=>Z.sharerOn&&Z.bShareToBORooms&&Z.userId!==G.id).length)return{activeNodeID:G.id,bStatus:1,ssrc:G.shareSsrc};{const Z=T.find(ce=>ce.userId===G.id);if(null!=Z&&Z.isHost)return{activeNodeID:G.id,bStatus:1,ssrc:G.shareSsrc}}}else if(!G.bShareOn||!G.bShareToBORooms){const Z=T.filter(ce=>ce.bShareToBORooms&&ce.sharerOn);if(1===Z.length&&Z[0].userId===G.id)return{activeNodeID:G.id,bStatus:0,ssrc:0};{const ce=Z.filter(ue=>ue.userId!==G.id),he=ce.find(ue=>ue.isHost);if(he)return{activeNodeID:he.userId,bStatus:1,ssrc:he.shareSsrc};{const ue=ce[0];if(ue)return{activeNodeID:ue.userId,bStatus:1,ssrc:ue.shareSsrc}}}}}).filter(Boolean)}),tr(u=>{const{share:{status:f},meeting:{userId:A}}=d.value,S=go.getInstance(),T=[];return u.map(w=>{const{activeNodeID:M,bStatus:B,ssrc:G}=w,Z=1===B;T.push(Lw(Z)),Z&&f!==W.ShareStatus.End&&(AO.stopSharing(A),S.stopDesktopSharing(),T.push(Rl(W.ShareStatus.End)),Et("SHARE_PASSIVE_BO_STOP"));let ce={activeNodeID:M,bStatus:B,ssrc:G,fromMainSession:!0};if(!Z){const{participants:{attendeesList:he}}=d.value,ue=he.filter(Se=>Se.sharerOn);if(ue.length>0){const Se=ue[0];ce={activeNodeID:Se.userId,bStatus:1,ssrc:Se.shareSsrc||0}}}T.push(Is({evt:20225,body:ce}))}),zn(T)})),handleMainSessionCreateExtraChannelEpic:(a,d)=>r_(a,4098).pipe(Qo(u=>{const{payload:{body:{userID:f,confID:A}}}=u;return Zs(...["sharing","audio"].map(S=>{return M=d,B=f,G=A,r_(a,"audio"===(T=S)?iA:B0).pipe(ri(1),lr(Z=>{const{payload:{body:{encryptKey:ce,additionalType:he}}}=Z,{media:{sharingDecodeStatus:ue,audioDecodeStatus:Se},meeting:{svcUrl:Qe,meetingNumber:He,conId:Ke,zoomId:et,meetingId:Lt}}=M.value;zc(T,"success","audio"===T?Se:ue).subscribe(Gt=>{let[,jt]=Gt;const wt=go.getInstance();if(jt){const sn="wss://".concat(Qe,"/wc/media/").concat(He,"?type=").concat("audio"===T?"ma":"ms","&cid=").concat(Ke,"&mode=1");wt.createMainSessionChannel(T,sn),wt.updateMediaParams({iVType:"audio"===T?Bo.AUDIO_DECODE:Bo.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:B,sn:Cl(et),confId:G,encryptType:he,encryptKey:Cl(ce),meetingId:Lt,meetingNumber:He}});const{breakoutRoom:{mainSessionAttendeeList:hn}}=M.value;if(hn?.length>0){const vn=hn.map(ln=>({userid:ln.userId,sn:ln.zoomID&&Cl(ln.zoomID)}));wt.updateUserMediaSN({added:vn,isFromMainSession:!0,iVType:"audio"===T?Bo.AUDIO_DECODE:Bo.SHARING_DECODE})}}})}),ai(mt));var T,M,B,G}))}))});const rP=Ws([a=>{let{breakoutRoom:{controlStatus:d}}=a;return d},a=>{let{breakoutRoom:{currentRoom:{status:d}}}=a;return d},a=>{let{breakoutRoom:{currentRoom:{boId:d}}}=a;return d}],(a,d,u)=>!(a!==kr.InProgress&&a!==kr.Closing||d!==ur.InRoom&&d!==ur.TimeUp||!u)),ec=Ws([a=>{let{breakoutRoom:{rooms:d}}=a;return d},_c,a=>{let{meeting:{zoomId:d}}=a;return d},a=>{let{breakoutRoom:{mainSessionAttendeeList:d}}=a;return d},rP,a=>{let{breakoutRoom:{isHugeBO:d}}=a;return d}],(a,d,u,f,A,S)=>{const T=a.reduce((w,M)=>{const{attendeeGuidList:B}=M;return w.concat(B)},[]);return(A?f:d).filter(w=>{return!(w.bHold||w.isHost||w.zoomID===u||w.bid||T.includes(w.userGUID)||S&&(M=w.caps,4!=(4&M)));var M})});var Gi;const tu=Do.createAgent();let yO=(er((Gi=class extends Xc{createRooms(a,d){const u=this[br](),f=this[ka],{breakoutRoom:{isHugeBO:A,sequenceId:S,rooms:T,controlStatus:w,isEnableBreakoutRoom:M}}=u;if(!M)return Promise.reject({type:cr,reason:"Breakout room feature is not enabled."});if(w===kr.InProgress||w===kr.Closing)return Promise.resolve({type:cr,reason:"breakout room has started!"});let B;return B="string"==typeof a?[a]:"number"==typeof a?Array.from({length:a}).map((Z,ce)=>"".concat("Subsession"," ").concat(ce+S)):a,B.length<1||T.length+B.length>(A?100:50)?Promise.reject({type:qr,reason:"exceed maximum size"}):(tu.batchCreateBOToken(B),new Promise((Z,ce)=>{X_(B.length).subscribe(he=>{let{boIdList:ue}=he,Se=ue.map((He,Ke)=>({boId:He,name:B[Ke]}));if(d===rf.Automatically){const He=ec(u),Ke=Se.length,et=He.length;Se=Se.map((Lt,Gt)=>{const jt=[];let wt=Gt;for(;wt<et;)jt.push(He[wt]),wt+=Ke;return fn(fn({},Lt),{},{attendeeList:jt})})}const Qe=Se.map(He=>{let{boId:Ke,name:et,attendeeList:Lt}=He;return{boId:Ke,name:et,attendeeGuidList:Lt&&Lt.map(Gt=>Gt.userGUID)}});if(f(nb(Qe)),f(rb(d)),f(pC(S+Se.length)),d===rf.Automatically){const He=Se.map(Ke=>({roomId:Ke.boId,name:Ke.name,attendeeList:Ke.attendeeList.map(et=>({userId:et.userId,avatar:et.avatar,displayName:et.displayName}))}));Z(He)}else Z(Se.map(He=>({roomId:He.boId,name:He.name,attendeeList:[]})))},()=>{ce({type:"INTERNAL_ERROR"})})}))}openRooms(a,d){const u=this[br](),f={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:A,rooms:S,sequenceId:T,isHugeBO:w}}=u;if(A===kr.InProgress||A===kr.Closing)return Promise.resolve({type:cr,reason:"breakout room has started!"});if(a.some(ue=>-1===S.findIndex(Se=>Se.boId===ue.roomId)))return Promise.reject({type:qr,reason:"roomId is wrong"});const M=Ks(u);if(a.reduce((ue,Se)=>ue.concat(Se.attendeeList),[]).some(ue=>-1===M.findIndex(Se=>Se.userId===ue.userId)))return Promise.reject({type:qr,reason:"bad user"});const B=a.map(ue=>{const{attendeeList:Se}=ue,Qe=Se.map(He=>M.find(et=>et.userId===He.userId)?.userGUID);return{BID:ue.roomId,MeetingTitle:ue.name,MeetingToken:void 0,Status:Om.Started,HostID:"",ParticipantList:Qe}}),G=d?fn(fn({},f),d):f;let ce=mw(JSON.stringify({ControlStatus:kr.InProgress,NameIndex:T,IsAutoJoinEnabled:+G.isAutoJoinRoom,IsBackToMainSessionEnabled:+G.isBackToMainSessionEnabled,IsTimerEnabled:+G.isTimerEnabled,TimerDuration:G.timerDuration,IsTimerAutoEndEnabled:+G.isTimerAutoEnabled,WaitSeconds:G.waitSeconds<0?0:G.waitSeconds,StartTimeOnMMR:void 0,ItemList:B}));return w&&(ce=vE.Base64.fromUint8Array(vO.gzip(ce))),tu.startBO(ce),Ii("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",ue=>ue.controlStatus===kr.InProgress)}joinRoom(a){const d=this[br](),u=ui(d),{breakoutRoom:{controlStatus:f,rooms:A,mainSessionAttendeeList:S,currentRoom:{status:T,boId:w}},meeting:{userGUID:M}}=d;if(f!==kr.InProgress)return Promise.reject({type:"IMPROPER_MEETING_STATE",reason:"breakout room is not started"});if(null!=u&&u.isHost){const B=A.find(G=>G.boId===a);if(!B)return Promise.reject({type:qr,reason:"room id is not correct"});tu.joinBO(B.boId)}else if(null!=u&&u.bCoHost&&T===ur.InRoom){if(!A.find(B=>B.boId===a))return Promise.reject({type:qr,reason:"room id is not correct"});{const B=S.find(G=>G.isHost);B&&tu.wantJoinBO(B?.userId,a)}}else{if(T===ur.InRoom&&w===a)return Promise.reject({type:cr,reason:"You are in room"});{const B=fh(A,M);if(!B||B.boId!==a)return Promise.reject({type:qr,reason:"room id is not correct"});tu.joinBO(B.boId)}}return Ii("BREAKOUT_ROOM_JOIN_BO_RESPONSE",B=>B.boId===a)}leaveRoom(){const a=this[br](),d=this[ka],{breakoutRoom:{controlStatus:u,options:f,currentRoom:{status:A}}}=a;if(u!==kr.InProgress&&u!==kr.Closing||A!==ur.InRoom)return Promise.reject({type:cr});{const S=Hu(a);if(!f.isBackToMainSessionEnabled&&!S)return Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"can not return main session during the breakout room"});qb().forEach(T=>d(T))}return Promise.resolve("")}askForHelp(){const a=this[br](),{breakoutRoom:{controlStatus:d,mainSessionAttendeeList:u,currentRoom:{status:f}},participants:{attendeesList:A}}=a,S=Hu(a);if(d!==kr.InProgress||f!==ur.InRoom)return Promise.reject({type:cr,reason:"you are not in breakout room"});if(S)return Promise.reject({type:cr,reason:"host or co-host can not ask for help"});{const T=u.find(w=>w.isHost);if(T){if(A.findIndex(w=>w.zoomID===T.zoomID)>-1)return Promise.reject({type:cr,reason:"host is in room"});tu.askForHelpBO(T.userId)}}return Ii("BREAKOUT_ROOM_ASK_HELP_RESPONSE",T=>T.result===W.AskHostHelpResponse.Received)}postponeHelping(a){const d=this[br](),u=this[ka],{breakoutRoom:{mainSessionAttendeeList:f,currentRoom:{status:A}},participants:{attendeesList:S}}=d;let T=S;return A===ur.InRoom&&(T=f),T.findIndex(w=>w.userId===a)>-1?(tu.askForHelpResultBO(a,W.AskHostHelpResponse.Ignore),u(ws(W.AskHostHelpResponse.Ignore)),Promise.resolve("")):Promise.reject({type:qr,reason:"user id is not correct"})}broadcast(a){const{breakoutRoom:{isEnableBOBroadcast:d}}=this[br]();return d?a?fc.beginEncrypt({text:a,type:fu.BO_BROADCAST}).then(u=>(tu.broadcastBO(u),Promise.resolve(""))):Promise.reject({type:qr,reason:"content empty"}):Promise.reject({type:cr,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(a,d){const u=this[br](),{breakoutRoom:{rooms:f}}=u,A=ec(u).find(S=>S.userId===a);return A&&f.findIndex(S=>S.boId===d)>-1?(tu.assignToBO(a,d),Ii("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",S=>{const{controlStatus:T,roomList:w}=S,M=w.find(B=>B.boId===d);return T===kr.InProgress&&M&&M.attendeeGuidList.includes(A.userGUID)})):Promise.reject({type:qr,reason:""})}moveUserToRoom(a,d){const u=this[br](),{breakoutRoom:{rooms:f,mainSessionAttendeeList:A},participants:{attendeesList:S}}=u,T=(rP(u)?A:S).find(w=>w.userId===a);if(!T)return Promise.reject({type:qr,reason:"user id not correct"});{const w=fh(f,T.userGUID);if(!w)return Promise.reject({type:cr,reason:"user not in a room"});if(w.boId===d)return Promise.reject({type:cr,reason:"user already in the target room"});{const M=f.find(B=>B.boId===d);if(!M)return Promise.reject({type:qr,reason:"invalid room id"});tu.switchBO(a,M.boId)}}return Ii("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",w=>{const{controlStatus:M,roomList:B}=w,G=B.find(Z=>Z.boId===d);return M===kr.InProgress&&G&&G.attendeeGuidList.includes(T.userGUID)})}closeRoom(){const a=this[br](),{breakoutRoom:{controlStatus:d}}=a;return d!==kr.InProgress?Promise.reject({type:cr,reason:"room is not started"}):(tu.stopBO(kr.Closing),Ii("BREAKOUT_ROOM_ATTRIBUTE_INDICATION",u=>u.controlStatus===kr.Closing))}loadPreAssignedRooms(){const a=this[br](),{meeting:{meetingOptions:d},breakoutRoom:{controlStatus:u}}=a;return!d.isAllowBreakoutRoomPreAssign||u!==kr.NotStarted&&u!==kr.Closed?Promise.reject({type:cr}):(tu.preAssignBreakoutRoom(),Ii("BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS"))}getUnassignedAttendeeList(){const a=this[br](),{meeting:{isHost:d}}=a;return d?ec(a):[]}getRoomList(){const a=this[br](),{breakoutRoom:{rooms:d,currentRoom:{status:u,boId:f},mainSessionAttendeeList:A},participants:{attendeesList:S}}=a,T=ui(a);if(T&&(T.isHost||u===ur.InRoom&&T.bCoHost)){const w=u===ur.InRoom,M=w?A:S;return d.map(B=>{const{attendeeGuidList:G,boId:Z,name:ce}=B,he=(G||[]).map(ue=>M.find(Se=>Se.userGUID===ue)).filter(ue=>!!ue&&ue.userGUID!==T.userGUID);return w&&T.isHost&&Z===f&&he.unshift(T),{roomId:Z,name:ce,attendeeList:he.filter(ue=>!!ue).map(ue=>({userId:ue.userId,displayName:ue.displayName,avatar:ue.avatar,isInRoom:ue.bid===Z}))}})}return a.breakoutRoom.rooms.map(w=>{const{boId:M,name:B}=w;return{roomId:M,name:B,attendeeList:[]}})}getAttendeeStatus(){return this[br]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[br]().breakoutRoom.controlStatus}getCurrentRoom(){const a=this[br](),{breakoutRoom:{currentRoom:{status:d,name:u,boId:f}}}=a;return{attendeeStatus:d,name:u,roomId:f}}getRoomOptions(){const a=this[br](),{breakoutRoom:{options:d}}=a;return fn({},d)}}).prototype,"createRooms",[$n,Na],Object.getOwnPropertyDescriptor(Gi.prototype,"createRooms"),Gi.prototype),er(Gi.prototype,"openRooms",[$n,Na],Object.getOwnPropertyDescriptor(Gi.prototype,"openRooms"),Gi.prototype),er(Gi.prototype,"joinRoom",[$n],Object.getOwnPropertyDescriptor(Gi.prototype,"joinRoom"),Gi.prototype),er(Gi.prototype,"leaveRoom",[$n],Object.getOwnPropertyDescriptor(Gi.prototype,"leaveRoom"),Gi.prototype),er(Gi.prototype,"askForHelp",[$n],Object.getOwnPropertyDescriptor(Gi.prototype,"askForHelp"),Gi.prototype),er(Gi.prototype,"postponeHelping",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"postponeHelping"),Gi.prototype),er(Gi.prototype,"broadcast",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"broadcast"),Gi.prototype),er(Gi.prototype,"assignUserToRoom",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"assignUserToRoom"),Gi.prototype),er(Gi.prototype,"moveUserToRoom",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"moveUserToRoom"),Gi.prototype),er(Gi.prototype,"closeRoom",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"closeRoom"),Gi.prototype),er(Gi.prototype,"loadPreAssignedRooms",[Na,$n],Object.getOwnPropertyDescriptor(Gi.prototype,"loadPreAssignedRooms"),Gi.prototype),Gi);const XB=xu(nP,Mf);let nr,Sc,mh,gh;W.LiveTranscriptionMessageSource=void 0,function(a){a[a.Ready=0]="Ready",a[a.UserSub=1]="UserSub",a[a.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",a[a.ManualCaptionerDisabled=3]="ManualCaptionerDisabled"}(nr||(nr={})),function(a){a[a.Unspecified=-1]="Unspecified",a[a.English=0]="English",a[a["Chinese (Simplified)"]=1]="Chinese (Simplified)",a[a.Japanese=2]="Japanese",a[a.German=3]="German",a[a.French=4]="French",a[a.Russian=5]="Russian",a[a.Portuguese=6]="Portuguese",a[a.Spanish=7]="Spanish",a[a.Korean=8]="Korean",a[a.Italian=9]="Italian",a[a.Reserved=10]="Reserved",a[a.Vietnamese=11]="Vietnamese",a[a.Dutch=12]="Dutch",a[a.Ukrainian=13]="Ukrainian",a[a.Arabic=14]="Arabic",a[a.Bengali=15]="Bengali",a[a["Chinese (Traditional)"]=16]="Chinese (Traditional)",a[a.Czech=17]="Czech",a[a.Estonian=18]="Estonian",a[a.Finnish=19]="Finnish",a[a.Greek=20]="Greek",a[a.Hebrew=21]="Hebrew",a[a.Hindi=22]="Hindi",a[a.Hungarian=23]="Hungarian",a[a.Indonesian=24]="Indonesian",a[a.Malay=25]="Malay",a[a.Persian=26]="Persian",a[a.Polish=27]="Polish",a[a.Romanian=28]="Romanian",a[a.Swedish=29]="Swedish",a[a.Tamil=30]="Tamil",a[a.Telugu=31]="Telugu",a[a.Tagalog=32]="Tagalog",a[a.Turkish=33]="Turkish",a[a.NoTranslation=400]="NoTranslation",a[a.DefaultManualInput=401]="DefaultManualInput",a[a.Customized=500]="Customized"}(Sc||(Sc={})),function(a){a[a.Unknown=0]="Unknown",a[a.Close=1]="Close",a[a.New=2]="New",a[a.Insert=3]="Insert",a[a.Delete=4]="Delete",a[a.Reset=5]="Reset",a[a.Audiodesc=6]="Audiodesc",a[a.Speaker=7]="Speaker",a[a.Error=8]="Error"}(mh||(mh={})),function(a){a[a.TranslateNotSupport=1]="TranslateNotSupport"}(gh||(gh={})),function(a){a[a.Unspecified=0]="Unspecified",a[a.InMeetingManual=1]="InMeetingManual",a[a.ExternalCaptioner=2]="ExternalCaptioner",a[a.ASR=4]="ASR"}(W.LiveTranscriptionMessageSource||(W.LiveTranscriptionMessageSource={}));const _h={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},$_=Object.keys(Sc).filter(a=>/\d+/.test(Sc[a])).reduce((a,d)=>fn(fn({},a),{},{["".concat(Sc[d])]:d}),{}),iy=Object.keys(_h).reduce((a,d)=>(Object.assign(a,{["".concat(_h["".concat(d)])]:d}),a),{});let vh;function ao(a){const d=a===Sc.Unspecified?Sc.Reserved:a;go.getInstance().selectLanguageChannelForNewLTT(d)}function EO(a,d){return a===d||a!=a&&d!=d}function Z_(a,d){for(var u=a.length;u--;)if(EO(a[u][0],d))return u;return-1}W.LiveTranscriptionLanguageCode=void 0,W.LiveTranscriptionLanguage=void 0,function(a){a[a.Unknown=0]="Unknown",a[a.ZoomKits=1]="ZoomKits",a[a.AISense=2]="AISense"}(vh||(vh={})),function(a){a[a.English=0]="English",a[a.Chinese=1]="Chinese",a[a.Japanese=2]="Japanese",a[a.German=3]="German",a[a.French=4]="French",a[a.Russian=5]="Russian",a[a.Portuguese=6]="Portuguese",a[a.Spanish=7]="Spanish",a[a.Korean=8]="Korean",a[a.Italian=9]="Italian",a[a.Reserved=10]="Reserved",a[a.Vietnamese=11]="Vietnamese",a[a.Dutch=12]="Dutch",a[a.Ukrainian=13]="Ukrainian",a[a.Arabic=14]="Arabic",a[a.Bengali=15]="Bengali",a[a["Chinese (Traditional)"]=16]="Chinese (Traditional)",a[a.Czech=17]="Czech",a[a.Estonian=18]="Estonian",a[a.Finnish=19]="Finnish",a[a.Greek=20]="Greek",a[a.Hebrew=21]="Hebrew",a[a.Hindi=22]="Hindi",a[a.Hungarian=23]="Hungarian",a[a.Indonesian=24]="Indonesian",a[a.Malay=25]="Malay",a[a.Persian=26]="Persian",a[a.Polish=27]="Polish",a[a.Romanian=28]="Romanian",a[a.Swedish=29]="Swedish",a[a.Tamil=30]="Tamil",a[a.Telugu=31]="Telugu",a[a.Tagalog=32]="Tagalog",a[a.Turkish=33]="Turkish",a[a.NoTranslation=400]="NoTranslation",a[a.DefaultManualInput=401]="DefaultManualInput"}(W.LiveTranscriptionLanguageCode||(W.LiveTranscriptionLanguageCode={})),function(a){a.English="en",a["Chinese (Simplified)"]="zh",a.Japanese="ja",a.German="de",a.French="fr",a.Russian="ru",a.Portuguese="pt",a.Spanish="es",a.Korean="ko",a.Italian="it",a.Reserved="en1",a.Vietnamese="vi",a.Dutch="nl",a.Ukrainian="uk",a.Arabic="ar",a.Bengali="bn",a["Chinese (Traditional)"]="zh-hant",a.Czech="cs",a.Estonian="et",a.Finnish="fi",a.Greek="el",a.Hebrew="he",a.Hindi="hi",a.Hungarian="hu",a.Indonesian="id",a.Malay="ms",a.Persian="fa",a.Polish="pl",a.Romanian="ro",a.Swedish="sv",a.Tamil="ta",a.Telugu="te",a.Tagalog="tl",a.Turkish="tr"}(W.LiveTranscriptionLanguage||(W.LiveTranscriptionLanguage={}));var dg=Array.prototype.splice;function Dd(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}Dd.prototype.clear=function(){this.__data__=[],this.size=0},Dd.prototype.delete=function(a){var d=this.__data__,u=Z_(d,a);return!(u<0||(u==d.length-1?d.pop():dg.call(d,u,1),--this.size,0))},Dd.prototype.get=function(a){var d=this.__data__,u=Z_(d,a);return u<0?void 0:d[u][1]},Dd.prototype.has=function(a){return Z_(this.__data__,a)>-1},Dd.prototype.set=function(a,d){var u=this.__data__,f=Z_(u,a);return f<0?(++this.size,u.push([a,d])):u[f][1]=d,this};var jI="object"==typeof global&&global&&global.Object===Object&&global,QI="object"==typeof self&&self&&self.Object===Object&&self,Ah=jI||QI||Function("return this")(),Ap=Ah.Symbol,HI=Object.prototype,iP=HI.hasOwnProperty,ev=HI.toString,yp=Ap?Ap.toStringTag:void 0,oP=Object.prototype.toString,bO=Ap?Ap.toStringTag:void 0;function tv(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":bO&&bO in Object(a)?function(d){var u=iP.call(d,yp),f=d[yp];try{d[yp]=void 0;var A=!0}catch{}var S=ev.call(d);return A&&(u?d[yp]=f:delete d[yp]),S}(a):oP.call(a)}function oy(a){var d=typeof a;return null!=a&&("object"==d||"function"==d)}function sy(a){if(!oy(a))return!1;var d=tv(a);return"[object Function]"==d||"[object GeneratorFunction]"==d||"[object AsyncFunction]"==d||"[object Proxy]"==d}var Jb,Xb=Ah["__core-js_shared__"],GI=(Jb=/[^.]+$/.exec(Xb&&Xb.keys&&Xb.keys.IE_PROTO||""))?"Symbol(src)_1."+Jb:"",ay=Function.prototype.toString;function kd(a){if(null!=a){try{return ay.call(a)}catch{}try{return a+""}catch{}}return""}var sP=/^\[object .+?Constructor\]$/,WI=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fl(a,d){var f,A,u=a?.[d];return oy(f=u)&&(A=f,!GI||!(GI in A))&&(sy(f)?WI:sP).test(kd(f))?u:void 0}var nv=Fl(Ah,"Map"),cy=Fl(Object,"create"),uP=Object.prototype.hasOwnProperty,$B=Object.prototype.hasOwnProperty;function rv(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}function KI(a,d){var u,f,A=a.__data__;return("string"==(f=typeof(u=d))||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u)?A["string"==typeof d?"string":"hash"]:A.map}function hg(a){var d=-1,u=null==a?0:a.length;for(this.clear();++d<u;){var f=a[d];this.set(f[0],f[1])}}function pg(a){var d=this.__data__=new Dd(a);this.size=d.size}function zI(a){var d=-1,u=null==a?0:a.length;for(this.__data__=new hg;++d<u;)this.add(a[d])}function IO(a,d){for(var u=-1,f=null==a?0:a.length;++u<f;)if(d(a[u],u,a))return!0;return!1}function uy(a,d,u,f,A,S){var T=1&u,w=a.length,M=d.length;if(w!=M&&!(T&&M>w))return!1;var B=S.get(a),G=S.get(d);if(B&&G)return B==d&&G==a;var Z=-1,ce=!0,he=2&u?new zI:void 0;for(S.set(a,d),S.set(d,a);++Z<w;){var ue=a[Z],Se=d[Z];if(f)var Qe=T?f(Se,ue,Z,d,a,S):f(ue,Se,Z,a,d,S);if(void 0!==Qe){if(Qe)continue;ce=!1;break}if(he){if(!IO(d,function(He,Ke){if(!he.has(Ke)&&(ue===He||A(ue,He,u,f,S)))return he.push(Ke)})){ce=!1;break}}else if(ue!==Se&&!A(ue,Se,u,f,S)){ce=!1;break}}return S.delete(a),S.delete(d),ce}rv.prototype.clear=function(){this.__data__=cy?cy(null):{},this.size=0},rv.prototype.delete=function(a){var d=this.has(a)&&delete this.__data__[a];return this.size-=d?1:0,d},rv.prototype.get=function(a){var d=this.__data__;if(cy){var u=d[a];return"__lodash_hash_undefined__"===u?void 0:u}return uP.call(d,a)?d[a]:void 0},rv.prototype.has=function(a){var d=this.__data__;return cy?void 0!==d[a]:$B.call(d,a)},rv.prototype.set=function(a,d){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=cy&&void 0===d?"__lodash_hash_undefined__":d,this},hg.prototype.clear=function(){this.size=0,this.__data__={hash:new rv,map:new(nv||Dd),string:new rv}},hg.prototype.delete=function(a){var d=KI(this,a).delete(a);return this.size-=d?1:0,d},hg.prototype.get=function(a){return KI(this,a).get(a)},hg.prototype.has=function(a){return KI(this,a).has(a)},hg.prototype.set=function(a,d){var u=KI(this,a),f=u.size;return u.set(a,d),this.size+=u.size==f?0:1,this},pg.prototype.clear=function(){this.__data__=new Dd,this.size=0},pg.prototype.delete=function(a){var d=this.__data__,u=d.delete(a);return this.size=d.size,u},pg.prototype.get=function(a){return this.__data__.get(a)},pg.prototype.has=function(a){return this.__data__.has(a)},pg.prototype.set=function(a,d){var u=this.__data__;if(u instanceof Dd){var f=u.__data__;if(!nv||f.length<199)return f.push([a,d]),this.size=++u.size,this;u=this.__data__=new hg(f)}return u.set(a,d),this.size=u.size,this},zI.prototype.add=zI.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},zI.prototype.has=function(a){return this.__data__.has(a)};var TO=Ah.Uint8Array;function wO(a){var d=-1,u=Array(a.size);return a.forEach(function(f,A){u[++d]=[A,f]}),u}function YI(a){var d=-1,u=Array(a.size);return a.forEach(function(f){u[++d]=f}),u}var iv=Ap?Ap.prototype:void 0,ov=iv?iv.valueOf:void 0,sv=Array.isArray,RO=Object.prototype.propertyIsEnumerable,ly=Object.getOwnPropertySymbols,OO=ly?function(a){return null==a?[]:(a=Object(a),function(d,u){for(var f=-1,A=null==d?0:d.length,S=0,T=[];++f<A;){var w=d[f];u(w)&&(T[S++]=w)}return T}(ly(a),function(d){return RO.call(a,d)}))}:function(){return[]};function av(a){return null!=a&&"object"==typeof a}function qI(a){return av(a)&&"[object Arguments]"==tv(a)}var DO=Object.prototype,cv=DO.hasOwnProperty,kO=DO.propertyIsEnumerable,NO=qI(function(){return arguments}())?qI:function(a){return av(a)&&cv.call(a,"callee")&&!kO.call(a,"callee")},JI="object"==typeof W&&W&&!W.nodeType&&W,XI=JI&&Ce&&!Ce.nodeType&&Ce,PO=XI&&XI.exports===JI?Ah.Buffer:void 0,dy=(PO?PO.isBuffer:void 0)||function(){return!1},lP=/^(?:0|[1-9]\d*)$/;function $b(a,d){var u=typeof a;return!!(d=d??9007199254740991)&&("number"==u||"symbol"!=u&&lP.test(a))&&a>-1&&a%1==0&&a<d}function MO(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991}var Yo={};Yo["[object Float32Array]"]=Yo["[object Float64Array]"]=Yo["[object Int8Array]"]=Yo["[object Int16Array]"]=Yo["[object Int32Array]"]=Yo["[object Uint8Array]"]=Yo["[object Uint8ClampedArray]"]=Yo["[object Uint16Array]"]=Yo["[object Uint32Array]"]=!0,Yo["[object Arguments]"]=Yo["[object Array]"]=Yo["[object ArrayBuffer]"]=Yo["[object Boolean]"]=Yo["[object DataView]"]=Yo["[object Date]"]=Yo["[object Error]"]=Yo["[object Function]"]=Yo["[object Map]"]=Yo["[object Number]"]=Yo["[object Object]"]=Yo["[object RegExp]"]=Yo["[object Set]"]=Yo["[object String]"]=Yo["[object WeakMap]"]=!1;var $I,ZI="object"==typeof W&&W&&!W.nodeType&&W,hy=ZI&&Ce&&!Ce.nodeType&&Ce,eT=hy&&hy.exports===ZI&&jI.process,uv=function(){try{return hy&&hy.require&&hy.require("util").types||eT&&eT.binding&&eT.binding("util")}catch{}}(),tT=uv&&uv.isTypedArray,Zb=tT?($I=tT,function(a){return $I(a)}):function(a){return av(a)&&MO(a.length)&&!!Yo[tv(a)]},dP=Object.prototype.hasOwnProperty,xO=Object.prototype,hP=function(a,d){return function(u){return a(d(u))}}(Object.keys,Object),pP=Object.prototype.hasOwnProperty;function BO(a){return f=OO,A=function LO(a){return null!=(d=a)&&MO(d.length)&&!sy(d)?function(u,f){var A=sv(u),S=!A&&NO(u),T=!A&&!S&&dy(u),w=!A&&!S&&!T&&Zb(u),M=A||S||T||w,B=M?function(ce,he){for(var ue=-1,Se=Array(ce);++ue<ce;)Se[ue]=he(ue);return Se}(u.length,String):[],G=B.length;for(var Z in u)!dP.call(u,Z)||M&&("length"==Z||T&&("offset"==Z||"parent"==Z)||w&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||$b(Z,G))||B.push(Z);return B}(a):function(u){if(A=(f=u)&&f.constructor,f!==("function"==typeof A&&A.prototype||xO))return hP(u);var f,A,S=[];for(var T in Object(u))pP.call(u,T)&&"constructor"!=T&&S.push(T);return S}(a);var d}(d=a),sv(d)?A:function(S,T){for(var w=-1,M=T.length,B=S.length;++w<M;)S[B+w]=T[w];return S}(A,f(d));var d,f,A}var fP=Object.prototype.hasOwnProperty,eS=Fl(Ah,"DataView"),tS=Fl(Ah,"Promise"),py=Fl(Ah,"Set"),fy=Fl(Ah,"WeakMap"),mP=kd(eS),FO=kd(nv),my=kd(tS),UO=kd(py),gy=kd(fy),Eu=tv;(eS&&"[object DataView]"!=Eu(new eS(new ArrayBuffer(1)))||nv&&"[object Map]"!=Eu(new nv)||tS&&"[object Promise]"!=Eu(tS.resolve())||py&&"[object Set]"!=Eu(new py)||fy&&"[object WeakMap]"!=Eu(new fy))&&(Eu=function(a){var d=tv(a),u="[object Object]"==d?a.constructor:void 0,f=u?kd(u):"";if(f)switch(f){case mP:return"[object DataView]";case FO:return"[object Map]";case my:return"[object Promise]";case UO:return"[object Set]";case gy:return"[object WeakMap]"}return d});var _y=Eu,fg="[object Object]",mg=Object.prototype.hasOwnProperty;function VO(a,d,u,f,A){return a===d||(null==a||null==d||!av(a)&&!av(d)?a!=a&&d!=d:function(S,T,w,M,B,G){var Z=sv(S),ce=sv(T),he=Z?"[object Array]":_y(S),ue=ce?"[object Array]":_y(T),Se=(he="[object Arguments]"==he?fg:he)==fg,Qe=(ue="[object Arguments]"==ue?fg:ue)==fg,He=he==ue;if(He&&dy(S)){if(!dy(T))return!1;Z=!0,Se=!1}if(He&&!Se)return G||(G=new pg),Z||Zb(S)?uy(S,T,w,M,B,G):function(jt,wt,sn,hn,vn,ln,Qt){switch(sn){case"[object DataView]":if(jt.byteLength!=wt.byteLength||jt.byteOffset!=wt.byteOffset)return!1;jt=jt.buffer,wt=wt.buffer;case"[object ArrayBuffer]":return!(jt.byteLength!=wt.byteLength||!ln(new TO(jt),new TO(wt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return EO(+jt,+wt);case"[object Error]":return jt.name==wt.name&&jt.message==wt.message;case"[object RegExp]":case"[object String]":return jt==wt+"";case"[object Map]":var Bn=wO;case"[object Set]":if(Bn||(Bn=YI),jt.size!=wt.size&&!(1&hn))return!1;var At=Qt.get(jt);if(At)return At==wt;hn|=2,Qt.set(jt,wt);var ut=uy(Bn(jt),Bn(wt),hn,vn,ln,Qt);return Qt.delete(jt),ut;case"[object Symbol]":if(ov)return ov.call(jt)==ov.call(wt)}return!1}(S,T,he,w,M,B,G);if(!(1&w)){var Ke=Se&&mg.call(S,"__wrapped__"),et=Qe&&mg.call(T,"__wrapped__");if(Ke||et){var Lt=Ke?S.value():S,Gt=et?T.value():T;return G||(G=new pg),B(Lt,Gt,w,M,G)}}return!!He&&(G||(G=new pg),function(jt,wt,sn,hn,vn,ln){var Qt=1&sn,Bn=BO(jt),gr=Bn.length;if(gr!=BO(wt).length&&!Qt)return!1;for(var At=gr;At--;){var ut=Bn[At];if(!(Qt?ut in wt:fP.call(wt,ut)))return!1}var Be=ln.get(jt),$e=ln.get(wt);if(Be&&$e)return Be==wt&&$e==jt;var St=!0;ln.set(jt,wt),ln.set(wt,jt);for(var lt=Qt;++At<gr;){var Ut=jt[ut=Bn[At]],an=wt[ut];if(hn)var Hn=Qt?hn(an,Ut,ut,wt,jt,ln):hn(Ut,an,ut,jt,wt,ln);if(!(void 0===Hn?Ut===an||vn(Ut,an,sn,hn,ln):Hn)){St=!1;break}lt||(lt="constructor"==ut)}if(St&&!lt){var _r=jt.constructor,Qr=wt.constructor;_r==Qr||!("constructor"in jt)||!("constructor"in wt)||"function"==typeof _r&&_r instanceof _r&&"function"==typeof Qr&&Qr instanceof Qr||(St=!1)}return ln.delete(jt),ln.delete(wt),St}(S,T,w,M,B,G))}(a,d,u,f,VO,A))}const gP=DE(OE,function(a,d){return VO(a,d)})([Ks,a=>{let{meeting:{gatewayUserList:d}}=a;return d}],(a,d)=>{const u={};return a.forEach(f=>{Object.assign(u,{["".concat(f.userId)]:f.zoomID})}),d?.forEach(f=>{Object.assign(u,{["".concat(f.userId)]:f.sn})}),u}),nS=Ws([Ks],a=>a.find(d=>!0===d.bCCEditor)),jO=Ws([Ks,Yh],(a,d)=>a.some(u=>!0===u.bCCEditor&&u.userId===d)),vo=Do.createAgent();var lv=Object.freeze({__proto__:null,handleLiveTranscriptionMeetingOptionEpic:a=>a.pipe(Ui("".concat(hm)),Ne(d=>{const{payload:{liveTranscription:u}}=d;return iR(u)})),handleLiveTranscriptionEnableEpic:(a,d)=>Mn(a,mc).pipe(Un(u=>{var f,A;return void 0!==(null===(f=u.payload.body)||void 0===f?void 0:f.NewLttAvaliable)||void 0!==(null===(A=u.payload.body)||void 0===A?void 0:A.LiveTransEngineType)}),Ne(u=>{const{payload:{body:{NewLttAvaliable:f,LiveTransEngineType:A}}}=u,{liveTranscription:{isEnableAutomatedCaptions:S}}=d.value;return void 0!==f?(Et("LIVE_TRANSCRIPTION_STATUS_CHANGE",!!f),rR(S&&!!f)):CC(A)})),handleLiveTranscriptionStatusEpic:(a,d)=>Mn(a,7982).pipe(tr(u=>{const{payload:{body:{status:f,gwId:A}}}=u,S=[];switch(f){case nr.Ready:S.push(oR(A));break;case nr.ManualCaptionerEnabled:Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!1}),S.push(SC(!0));break;case nr.ManualCaptionerDisabled:Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!0}),S.push(SC(!1));break;case nr.UserSub:{Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:d.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:w}}=d.value;if(null!=w&&w.isLiveTranscriptionSubscribed){var T;vo.enableNewLLT();const M=null!==(T=w.currentTranscriptionLang)&&void 0!==T?T:Sc.Unspecified;ao(M),S.push(np(M)),void 0!==w.currentTranslationLang&&vo.setTranslationLanguage(w.currentTranslationLang),S.push(wN())}break}}return zn(S)})),handleLiveTranscriptionSupportedLanguageEpic:a=>Mn(a,7984).pipe(Ne(d=>{const{payload:{body:{langs:u}}}=d;return SA(u)})),handleLiveTranscriptionSubStatusEpic:a=>Mn(a,7985).pipe(Un(d=>{var u;return!0===(null===(u=d.payload.body)||void 0===u?void 0:u.success)}),tr(d=>{const{payload:{body:{src:u,lang:f,success:A}}}=d,S=[];return A&&S.push(rh(!0)),u===W.LiveTranscriptionMessageSource.ASR?(S.push(gf(f===Sc.NoTranslation?void 0:f)),Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!0,lang:f})):[W.LiveTranscriptionMessageSource.InMeetingManual,W.LiveTranscriptionMessageSource.ExternalCaptioner].includes(u)&&Et("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",{autoCaption:!1}),zn(S)})),handleLiveTranscriptionSpeakingLanguageChangeEpic:(a,d)=>Mn(a,7986).pipe(Qn(d),tr(u=>{let[f,A]=u;const S=ui(A),{liveTranscription:{currentTranscriptionLang:T}}=A,{payload:{body:w}}=f,M=[];if(void 0!==w?.lang){const{lang:B}=w;"computer"===S?.audio&&T!==B&&ao(B),M.push(np(B))}return zn(M)})),handleComputerAudioCompleteChangeLTLanguageEpic:(a,d)=>Si(a,Or.JoinComputerAudioComplete).pipe(Un(()=>d.value.liveTranscription.isLiveTranscriptionSubscribed),lr(()=>{const{liveTranscription:{currentTranscriptionLang:u}}=d.value;u&&ao(u)}),ai(mt)),handleLiveTranscriptionTextEpic:(a,d)=>Mn(a,7983).pipe(Un(u=>void 0!==u.payload.body),tr(u=>{const{payload:{body:{msgType:f,errorCode:A,language:S,source:T,content:w,keyNodeId:M,msgId:B,nodeId:G,pos:Z,size:ce,audioLanguage:he}}}=u;if(f===mh.Error){if(A===gh.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:ue}}=d.value;ue&&Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",{error:gh.TranslateNotSupport,errorMessage:"".concat($_[he]," to ").concat($_[ue]," translation is not supported!")})}}else{const ue=d.value,Se=Ks(ue),{liveTranscription:{isManualCaptionerEnabled:Qe}}=ue;if(Qe&&T===W.LiveTranscriptionMessageSource.ASR)return Promise.resolve();if(function(He,Ke){const{liveTranscription:{isEnableTranslatedCaptions:et,isLiveTranscriptionEnabled:Lt},meeting:{meetingOptions:Gt}}=Ke,{isEnableManualCaptions:jt,isEnableAllowHostAssignTypeCC:wt,isEnableClosedCaption:sn,isEnableAllowThirdPartyCCToken:hn}=Gt;return He===W.LiveTranscriptionMessageSource.ASR?et||Lt:He===W.LiveTranscriptionMessageSource.InMeetingManual?jt&&wt||void 0===jt&&sn:He===W.LiveTranscriptionMessageSource.ExternalCaptioner?hn:void 0}(T,ue)&&w&&M){const He=gP(ue)[M];if(He)return fc.beginDecrypt({decryptedText:w,type:fu.CC_MESSAGE,zoomId:He}).then(Ke=>{let{message:et}=Ke;const{liveTranscription:{messageRecords:Lt}}=d.value,Gt=[],jt=Lt.find(wt=>wt.msgId===B);if(jt){const{text:wt}=jt,sn=((vn,ln)=>{if(!vn||0===ln)return"";let Qt=0;for(let Bn=0;Bn<vn.length;Bn++)if(Qt+=aN(vn[Bn]),Qt===ln)return vn.slice(0,Bn+1);return vn})(wt,Z);let hn;f===mh.Insert&&0===ce||f===mh.Delete&&0===ce?hn=fn(fn({},jt),{},{text:sn+et,msgType:f}):f===mh.Close&&(hn=fn(fn({},jt),{},{text:et,msgType:f,done:!0})),hn&&(Gt.push(IA(hn)),Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",hn))}else if([mh.New,mh.Close].includes(f)||Qe&&f===mh.Insert){const wt=Se.find(hn=>hn.userId===G),sn={msgId:B,userId:G,displayName:wt?.displayName,avatar:wt?.avatar,text:et,source:T,language:S,timestamp:(new Date).getTime(),done:f===mh.Close};Gt.push(CA(fn(fn({},sn),{},{msgType:f}))),Et("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",sn)}return Gt})}}return Promise.resolve()}),tr(u=>Array.isArray(u)?zn(u):mt)),handlePersistLargeRecordsEpic:(a,d)=>a.pipe(Ui("".concat(CA)),ho(Zo),tr(()=>{const{liveTranscription:{messageRecords:u}}=d.value;return u.length>=1e5?function(f){const{meeting:{meetingId:A},liveTranscription:{messageRecords:S,reducedRecordsCount:T}}=f;return void 0!==window.indexedDB?new Promise(w=>{const M=window.indexedDB.open("zoom-sdk-live-trasncription",1);M.addEventListener("upgradeneeded",()=>{const B=M.result;if(!B.objectStoreNames.contains("live-trasncription")){const G=B.createObjectStore("live-trasncription",{keyPath:["startIndex","mid"],autoIncrement:!1});G.createIndex("mid","mid",{unique:!1}),G.transaction.oncomplete=()=>{console.log("Create objectStore [".concat("live-trasncription","] complete"))}}}),M.addEventListener("success",()=>{const B=M.result,G=S.length,Z=.9*G,ce=G-Z,he=S.slice(0,Z),ue=T+he.length,Se=B.transaction(["live-trasncription"],"readwrite");Se.objectStore("live-trasncription").put({startIndex:T,mid:A,records:he}),Se.oncomplete=()=>{w(TN({remains:ce,reducedRecordsCount:ue})),B.close()},Se.onerror=()=>{w(""),B.close()}})}):Promise.resolve("")}(d.value):Promise.resolve("")}),Un(u=>"object"==typeof u)),handleClearRecordsInDBEpic:(a,d)=>a.pipe(Ui("".concat(Xv),"".concat(za)),Un(()=>d.value.liveTranscription.isRecordsReduced),lr(()=>{!function(){if(void 0!==window.indexedDB){const u=window.indexedDB.open("zoom-sdk-live-trasncription",1);u.addEventListener("success",()=>{const f=u.result;f.objectStoreNames.contains("live-trasncription")&&(window.indexedDB.deleteDatabase("zoom-sdk-live-trasncription"),f.close())})}}()}),ai(mt))});const rS={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},nT=na({["".concat(rR)]:Pt((a,d)=>{let{payload:u}=d;a.isLiveTranscriptionEnabled=u}),["".concat(iR)]:Pt((a,d)=>{let{payload:u}=d;const{transcriptionLang:f,translatedSetting:A}=u,S=Fh(u,["transcriptionLang","translatedSetting"]);f&&(a.transcriptionLang=f.split(";").map(T=>{const w=T&&_h[T];return void 0!==w?{lang:T,code:w}:null}).filter(Boolean)),A&&(a.translatedSetting=Object.keys(A).map(T=>{const w=A[T];if(w){const M=w.split(";").map(B=>{const G=B&&_h[B];return void 0!==G?{lang:B,code:G}:null}).filter(Boolean);return{lang:T,code:_h[T],translatedToLanguage:M}}return null}).filter(Boolean)),Object.assign(a,S)}),["".concat(SC)]:Pt((a,d)=>{let{payload:u}=d;a.isManualCaptionerEnabled=u}),["".concat(oR)]:Pt((a,d)=>{let{payload:u}=d;a.gatewayId=u}),["".concat(SA)]:Pt((a,d)=>{let{payload:u}=d;a.supportedTranscriptionLanguage=u}),["".concat(np)]:Pt((a,d)=>{let{payload:u}=d;a.currentTranscriptionLang=u}),["".concat(gf)]:Pt((a,d)=>{let{payload:u}=d;a.currentTranslationLang=u}),["".concat(CA)]:Pt((a,d)=>{let{payload:u}=d;a.messageRecords.push(u)}),["".concat(IA)]:Pt((a,d)=>{let{payload:u}=d;const f=a.messageRecords.find(A=>A.msgId===u.msgId);f&&Object.assign(f,u)}),["".concat(TN)]:Pt((a,d)=>{let{payload:u}=d;const{remains:f,reducedRecordsCount:A}=u,S=a.messageRecords.length-f;a.isRecordsReduced=!0,a.reducedRecordsCount=A,a.messageRecords.splice(0,S)}),["".concat(rh)]:Pt((a,d)=>{let{payload:u}=d;a.isLiveTranscriptionSubscribed=u}),["".concat(CC)]:Pt((a,d)=>{let{payload:u}=d;a.liveTransEngineType=u}),["".concat(wN)]:Pt(a=>{a.stateBeforeFailover=void 0}),["".concat(TA)]:Pt((a,d)=>{let{payload:u}=d;a.lastManualCaption=u}),["".concat(cb)]:Pt((a,d)=>{let{payload:u}=d;return u?fn(fn({},rS),{},{stateBeforeFailover:{currentTranscriptionLang:a.currentTranscriptionLang,currentTranslationLang:a.currentTranslationLang,isLiveTranscriptionSubscribed:a.isLiveTranscriptionSubscribed},messageRecords:a.messageRecords,isRecordsReduced:a.isRecordsReduced,reducedRecordsCount:a.reducedRecordsCount}):fn({},rS)})},rS),_P={userId:0,displayName:"everyone",zoomID:"",isHost:!1,bCoHost:!1},bu={userId:1,displayName:"All panelists",zoomID:"",isHost:!1,bCoHost:!1};var Vo;const yh=Do.createAgent();let rT=(er((Vo=class extends Xc{startLiveTranscription(){const{[br]:a,[ka]:d}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:f,isLiveTranscriptionSubscribed:A,isHostLockSpeakingLanguage:S}}=a();return A?Promise.resolve(""):u?(yh.enableNewLLT(),Ii("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE").then(()=>{S?yh.setSpokenLanguage(Sc.English):ao(Sc.Unspecified),d(np(Sc.English)),f&&yh.setTranslationLanguage()})):Promise.reject({type:cr,reason:"Live transcription is not enabled."})}setSpeakingLanguage(a){const{[br]:d,[ka]:u}=this,{liveTranscription:{isLiveTranscriptionSubscribed:f,isHostLockSpeakingLanguage:A,transcriptionLang:S}}=d(),T=S.find(w=>w.lang===a);if(T){const{code:w}=T;return f?(A?yh.setSpokenLanguage(w):ao(w),u(np(w)),Promise.resolve("")):Promise.reject({type:cr,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:qr,reason:"Unsupported transcription language"})}setTranslationLanguage(a){const{[br]:d,[ka]:u}=this,f=d(),{liveTranscription:{isEnableTranslatedCaptions:A,isLiveTranscriptionSubscribed:S,translatedSetting:T,currentTranscriptionLang:w}}=f;if(!A)return Promise.reject({type:cr,reason:"Live translation is not enabled."});if(!S)return Promise.reject({type:cr,reason:"Cannot set translation language before starting live transcription"});if(a){const M=T?.find(B=>B.code===w);if(M){const{translatedToLanguage:B}=M,G=B.find(Z=>Z.lang===a);if(G)return yh.setTranslationLanguage(G.code),Ii({event:"LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",operations:[Un(Z=>!0===Z.autoCaption&&Z.lang===G.code),ri(1)]},Z=>{let{lang:ce}=Z;return ce===G.code})}return Promise.reject({type:cr,reason:"Cannot support translating ".concat($_[w||0]," to ").concat(a)})}return yh.setTranslationLanguage(),u(gf(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[br]:a}=this,{meeting:{meetingOptions:d},liveTranscription:{isManualCaptionerEnabled:u}}=a(),{isEnableManualCaptions:f,isEnableClosedCaption:A}=d;return f??A?u?Promise.resolve():(yh.enableManualCaption(!0),Ii("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",S=>{let{autoCaption:T}=S;return!1===T})):Promise.reject({type:cr,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[br]:a}=this,{liveTranscription:{isManualCaptionerEnabled:d}}=a();return d?(yh.enableManualCaption(!1),Ii("LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",u=>{let{autoCaption:f}=u;return!0===f})):Promise.resolve()}assignManualCaption(a){var d;const{[br]:u}=this,f=u(),{liveTranscription:{isManualCaptionerEnabled:A},participants:{attendeesList:S},meeting:{userId:T}}=f;return A?(null===(d=nS(f))||void 0===d?void 0:d.userId)===a?Promise.resolve(""):S.find(w=>w.userId===a)?(yh.assignCC(a,!0),Ii({event:T===a?"UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE":"UPDATE_USER_PARTICIPANT_ATTRIBUTE",operations:[Un(w=>w.userId===a),ri(1)]},w=>!0===w.bCCEditor)):Promise.reject({type:qr,reason:"Cannot find the user"}):Promise.reject({type:cr,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(a,d){var u;const{[br]:f,[ka]:A}=this,S=f(),{liveTranscription:{lastManualCaption:T},meeting:{userId:w}}=S,M=ui(S);let B=Promise.resolve();const G=null===(u=nS(S))||void 0===u?void 0:u.userId;return null!=M&&M.isHost&&G!==w&&(B=this.assignManualCaption(w)),B.then(()=>jO(f())?function(Z,ce,he){const ue=Z.length,Se=[];var Qe;if(he)Se.push({op:"close",text:Z,msgId:null!==(Qe=ce?.msgId)&&void 0!==Qe?Qe:_w()});else if(ce){const He=ce.text.length;let Ke=0,et=0;for(;Z[Ke]===ce.text[Ke]&&Ke<ue;)et+=aN(Z[Ke]),Ke+=1;Ke===He&&Ke===ue?Se.push({op:"same"}):Ke===He&&Ke<ue?Se.push({op:"insert",text:Z.slice(Ke),size:0,pos:et,msgId:ce.msgId}):Ke<He&&Ke===ue?Se.push({op:"delete",size:0,pos:et,msgId:ce.msgId}):(Se.push({op:"delete",size:0,pos:et,msgId:ce.msgId}),Se.push({op:"insert",text:Z.slice(Ke),pos:et,msgId:ce.msgId}))}else ue>0&&Se.push({op:"start",text:Z,pos:0,size:0,msgId:_w()});return Se.filter(He=>"same"!==He.op)}(a,T,d):Promise.reject({type:"INSUFFICIENT_PRIVILEGES",reason:"Cannot type caption "})).then(Z=>Array.isArray(Z)?(Z.forEach(ce=>{const{text:he}=ce,ue=Fh(ce,["text"]);fc.beginEncrypt({text:he??"",type:fu.CC_MESSAGE}).then(Se=>{yh.sendManualCaption(fn({text:Se},ue)),A(TA(d?void 0:{text:he,msgId:ce.msgId}))})}),Ii("LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",ce=>ce.source===W.LiveTranscriptionMessageSource.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[br]:a}=this,{liveTranscription:{isLiveTranscriptionEnabled:d,isEnableTranslatedCaptions:u,isManualCaptionerEnabled:f,transcriptionLang:A,translatedSetting:S}}=a();return{isLiveTranscriptionEnabled:d,isLiveTranslationEnabled:u,isManualCaptionerEnabled:f,transcriptionLanguage:A.map(T=>T.lang).join(";"),translationLanguage:S?.map(T=>({speakingLanguage:T.lang,translatedToLanguage:T.translatedToLanguage.map(w=>w.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[br]:a}=this,{meeting:{meetingOptions:d}}=a(),{isEnableManualCaptions:u,isEnableLiveTranscription:f,isEnableClosedCaption:A,isEnableAllowThirdPartyCCToken:S,isEnableViewFullTranscript:T}=d||{};return{isEnableManualCaptions:u,isEnableLiveTranscription:f,isEnableClosedCaption:A,isEnableAllowThirdPartyCCToken:S,isEnableViewFullTranscript:T}}getCurrentTranscriptionLanguage(){const{[br]:a}=this,{liveTranscription:{currentTranscriptionLang:d}}=a();return void 0!==d?{code:iy[d],name:$_[d]}:null}getCurrentTranslationLanguage(){const{[br]:a}=this,{liveTranscription:{currentTranslationLang:d}}=a();return void 0!==d?{code:iy[d],name:$_[d]}:null}getLatestTranscription(){const{[br]:a}=this,{liveTranscription:{messageRecords:d,isManualCaptionerEnabled:u}}=a(),f=u?Sc.DefaultManualInput:Sc.NoTranslation,A=d.filter(S=>S.language===f);return A.length?A[A.length-1].text:""}getLatestTranslation(){const{[br]:a}=this,{liveTranscription:{messageRecords:d,currentTranslationLang:u,isEnableTranslatedCaptions:f}}=a();if(f||void 0!==u){const A=d.filter(S=>S.language===u);return A.length?A[A.length-1].text:""}return""}getFullTranscriptionHistory(){const{[br]:a}=this,d=a(),{liveTranscription:{messageRecords:u,isRecordsReduced:f}}=d;return f?(A=d,void 0!==window.indexedDB?new Promise(S=>{const T=window.indexedDB.open("zoom-sdk-live-trasncription",1);T.addEventListener("success",()=>{const w=T.result;if(w.objectStoreNames.contains("live-trasncription")){const M=w.transaction(["live-trasncription"],"readonly").objectStore("live-trasncription"),B=[],G=A.meeting.meetingId,Z=M.openCursor();Z.onsuccess=()=>{const ce=Z.result;ce?(ce.value.mid===G&&B.push(...ce.value.records),ce.continue()):(S(B),w.close())}}else S("")})}):Promise.resolve("")).then(A=>Array.isArray(A)?A.concat(u):[...u]):[...u];var A}getManualCaptionEditor(){const{[br]:a}=this,d=a(),{closedCaption:{editorId:u}}=d;let f;if(!u)return{};if(f=((G,Z)=>{let ce;if("string"==typeof Z)ce=G.participants.xmppAttendeeList.find(he=>he.jid===Z);else{if(Z===ki.All)return _P;if(Z===ki.Panelist)return bu;ce=G.participants.attendeesList.find(he=>he.userId===Z)||G.participants.xmppAttendeeList.find(he=>he.userId===Z)}return ce||{}})(d,u),!f)return{};const{userId:A,isHost:S,displayName:T,avatar:w,bCoHost:M,zoomID:B}=f;return{userId:A,isHost:S,displayName:T,avatar:w,bCoHost:M,zoomID:B}}getManualCaptionUrl(){const{[br]:a}=this,{meeting:{meetingOptions:d,ccUrl:u}}=a(),{isEnableManualCaptions:f}=d||{};return f?u:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[$n],Object.getOwnPropertyDescriptor(Vo.prototype,"startLiveTranscription"),Vo.prototype),er(Vo.prototype,"setSpeakingLanguage",[$n],Object.getOwnPropertyDescriptor(Vo.prototype,"setSpeakingLanguage"),Vo.prototype),er(Vo.prototype,"setTranslationLanguage",[$n],Object.getOwnPropertyDescriptor(Vo.prototype,"setTranslationLanguage"),Vo.prototype),er(Vo.prototype,"enableManualCaptioner",[Na,$n],Object.getOwnPropertyDescriptor(Vo.prototype,"enableManualCaptioner"),Vo.prototype),er(Vo.prototype,"disableManualCaptioner",[Na,$n],Object.getOwnPropertyDescriptor(Vo.prototype,"disableManualCaptioner"),Vo.prototype),er(Vo.prototype,"assignManualCaption",[$n,Na],Object.getOwnPropertyDescriptor(Vo.prototype,"assignManualCaption"),Vo.prototype),er(Vo.prototype,"sendCaptionTextManually",[$n],Object.getOwnPropertyDescriptor(Vo.prototype,"sendCaptionTextManually"),Vo.prototype),er(Vo.prototype,"getManualCaptionUrl",[$n,Na],Object.getOwnPropertyDescriptor(Vo.prototype,"getManualCaptionUrl"),Vo.prototype),Vo);var iS;const vP={chat:{epic:qN,reducer:QA,Client:YN},recording:{epic:pI,reducer:dI,Client:Xm},cmd:{epic:If,reducer:GR,Client:Fb},breakoutRoom:{epic:XB,reducer:ii,Client:yO},liveTranscription:{epic:xu(lv),reducer:nT,Client:rT}},oS=Do.createAgent();let QO=(er((iS=class extends jR{constructor(a){super(a),this.mediaStream=void 0,this[Sf]=vP}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new $R(this[As])),this.mediaStream}joinInstant(a,d,u,f,A,S){const{[br]:T,[ka]:w}=this,{meeting:{lang:M,meetingStatus:B},socket:{zoomSocketStatus:G}}=T();return d?B!==vs.Joined&&G===fi.Closed?(w(R0({topic:a,password:A||"",userName:u,zlk:d,lang:M,cv:f})),S&&w(Sw(S)),nf(mN.JoinMeeting)):Promise.reject({type:cr,reason:"duplicated operation"}):Promise.reject({type:cr,reason:"invalid  signature"})}removeUser(a){const d=this[As].getState(),{participants:{attendeesList:u}}=d;return u.find(f=>f.userId===a)?(oS.expel(a),Ii("REMOVE_USER_PARTICIPANT_ATTRIBUTE",f=>f.some(A=>A.userId===a))):Promise.reject({type:qr,reason:"no matched user"})}}).prototype,"removeUser",[Cd,$n],Object.getOwnPropertyDescriptor(iS.prototype,"removeUser"),iS.prototype),iS);class iT{constructor(d){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=d,this.mic=null,this.script=d.createScriptProcessor(2048,1,1),this.script.onaudioprocess=u=>{const f=u.inputBuffer.getChannelData(0);let A,S=0;for(A=0;A<f.length;++A)S+=f[A]*f[A];this.instant=Math.sqrt(S/f.length)}}connectToSource(d){console.log("InputMicDetector is listening");try{var u;this.mic=this.context.createMediaStreamSource(d),this.mic.connect(this.script),null===(u=this.script)||void 0===u||u.connect(this.context.destination)}catch(f){console.error(f)}}stop(){var d,u;console.log("Audio Previewer stopped"),null===(d=this.mic)||void 0===d||d.disconnect(),this.mic=null,null===(u=this.script)||void 0===u||u.disconnect(),this.script=null}getMicVolume(){return this.instant}}const HO="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class GO{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(d){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:f,sampleAudioUrl:A=HO,onAnalyseFrequency:S}=d||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(u=this.sampleAudio)||void 0===u?void 0:u.url)===A&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(A).then(w=>w.arrayBuffer()).then(w=>this.audioCtx.decodeAudioData(w)).then(w=>(this.sampleAudio={url:A,data:w},w))).then(w=>{var M,B,G;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=w,this.sourceNode.loop=!0,f&&null!==(M=this.audioPlayer)&&void 0!==M&&M.setSinkId&&this.audioPlayer.setSinkId(f),S?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=S,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(B=this.audioCtx)||void 0===B?void 0:B.state)&&(null===(G=this.audioCtx)||void 0===G||G.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const T=()=>{var w;this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0),null!==(w=this.destinationNode)&&void 0!==w&&w.stream&&(this.destinationNode.stream.getAudioTracks().forEach(M=>{M.stop()}),this.destinationNode=void 0)};return{stop:T,destroy:()=>{var w;T(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(w=this.audioCtx)||void 0===w||w.close(),this.audioCtx=void 0}}}testMicrophone(d){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(u=navigator.mediaDevices)||void 0===u?void 0:u.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:f,speakerId:A,recordAndPlay:S,maxRecordDuration:T,onAnalyseFrequency:w,onStartRecording:M,onStopRecording:B,onStartPlayRecording:G,onStopPlayRecording:Z}=d||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const ce=()=>{S&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!f||{deviceId:f}}).then(ue=>{var Se,Qe,He,Ke;this.mAudioStream=ue,this.mSourceNode=null===(Se=this.audioCtx)||void 0===Se?void 0:Se.createMediaStreamSource(ue),this.audioPlayer.muted=!0,w?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=w,this.initAnalyserNode(),this.analyserNode&&(null===(He=this.mSourceNode)||void 0===He||He.connect(this.analyserNode))):this.analyserCallback=void 0,S&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=et=>{et.data&&this.recorderChunks.push(et.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),B?.(),this.recorderChunks.length>0){var et;const Lt=new Blob(this.recorderChunks,{type:(null===(et=this.recorderChunks[0])||void 0===et?void 0:et.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(Lt),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,A,G,Z),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,M?.(),this.maximumRecordingTimer=window.setTimeout(()=>{ce()},T||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(Qe=this.audioCtx)||void 0===Qe?void 0:Qe.state)&&(null===(Ke=this.audioCtx)||void 0===Ke||Ke.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const he=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(w&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(ue=>{ue.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:he,stopRecording:ce,destroy:()=>{var ue;he(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(ue=this.audioCtx)||void 0===ue||ue.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let d=0;for(const f of this.analyserNodeBufferDataArray)d+=f;this.analyserCallback(d/this.analyserNodeBufferDataArray.length)}}playRecording(d,u,f,A){this.recorderPlayer=new Audio,this.recorderPlayer.src=d,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&u&&this.recorderPlayer.setSinkId(u);const S=()=>{A?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};this.recorderPlayer.onpause=()=>{S()},this.recorderPlayer.onended=()=>{S()},f?.(),this.recorderPlayer.play().finally(()=>{window.URL.revokeObjectURL(d)})}}class oT{constructor(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=d,this.tester=new GO}start(){var d=this;return L(function*(){if(d.audioStream||d.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const u=yield navigator.mediaDevices.getUserMedia(d.getAudioConstraints());d.audioStream=u,d.isAudioStarted=!0}catch(u){throw u}})()}unmute(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");if(d.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return d.toggleMicIsMuted(!0)})()}mute(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");if(!d.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return d.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var d=this;return L(function*(){if(!d.audioStream||!d.isAudioStarted)throw new Error("AudioNotStartedError");d.audioStream.getAudioTracks().forEach(u=>u.stop()),d.audioStream=null,d.isAudioStarted=!1})()}toggleMicIsMuted(d){var u=this;return L(function*(){if(d){if(!u.audioContext){const f=window.AudioContext||window.webkitAudioContext;u.audioContext=new f}u.inputMicDetector=new iT(u.audioContext),u.inputMicDetector.connectToSource(u.audioStream)}else u.inputMicDetector&&u.inputMicDetector.stop(),u.inputMicDetector=null;u.isMicUnmuted=d})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(d){return this.tester.testSpeaker(d)}testMicrophone(d){return this.tester.testMicrophone(d)}}const sT={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class AP{constructor(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.isVideoStarted=!1,this.videoStream=null,this.deviceId=d}start(d){var u=this;return L(function*(){if(!d)throw new Error("Video DOM element is falsy");if(u.isVideoStarted||u.videoStream)throw new Error("VideoAlreadyStartedError");const f=function(){var A=L(function*(S){if(!S||"OverconstrainedError"!==S.name&&"ConstraintNotSatisfiedError"!==S.name)throw S;console.log("Warning: detected ".concat(S.name," -- trying to fall back to lower aspect ratio"));try{const T=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints(!0));return u.tryPlayVideo(d,T)}catch(T){throw T}});return function(T){return A.apply(this,arguments)}}();try{const A=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints());return u.tryPlayVideo(d,A)}catch(A){return f(A)}})()}stop(){var d=this;return L(function*(){if(!d.videoStream||!d.isVideoStarted)throw new Error("VideoNotStartedError");d.videoStream.getVideoTracks().forEach(u=>u.stop()),d.videoStream=null,d.isVideoStarted=!1})()}getVideoConstraints(){let d=sT;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?d=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(d.deviceId=this.deviceId),{audio:!1,video:d}}tryPlayVideo(d,u){var f=this;return L(function*(){if(!d)throw new Error("Video DOM element is falsy");try{f.videoStream=u,d.srcObject=f.videoStream,yield d.play(),f.isVideoStarted=!0}catch(A){throw A}})()}}class Nd{static createClient(){if(!this.meetingClient){const d=function(){const u=[U_],f=si(cI(),FA(function(){for(var A=arguments.length,S=new Array(A),T=0;T<A;T++)S[T]=arguments[T];return function(w){return function(){var M=w.apply(void 0,arguments),B=function(){throw new Error(ea(15))},G={getState:M.getState,dispatch:function(){return B.apply(void 0,arguments)}},Z=S.map(function(ce){return ce(G)});return B=mo.apply(void 0,Z)(M.dispatch),rm(rm({},M),{},{dispatch:B})}}}(...u)));return f.asyncReducers={},f.injectReducer=(A,S)=>{void 0===f.asyncReducers[A]&&(f.asyncReducers[A]=S,f.replaceReducer(cI(f.asyncReducers)))},f.injectEpic=A=>{Mb.next(A)},U_.run(VR),f}();this.meetingClient=new QO(d)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{du(500).subscribe(()=>{K0()})}),this.meetingClient=null)}static checkSystemRequirements(){var d;return{audio:Go()&&tA(),video:Go()&&void 0!==navigator.mediaDevices,screen:Go()&&"function"==typeof(null===(d=navigator.mediaDevices)||void 0===d?void 0:d.getDisplayMedia)}}static getDevices(d){return d?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(u=>(u.getTracks().forEach(f=>f.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new oT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new AP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(d){var u;(u=L(function*(f){var A;const S=f||b_,T="".concat(S,"/").concat("js_media.min.js"),w=[],M=[],B="".concat(S,"/");if(Wu()){const{workers:ce,wasms:he}=ca("audio","simd",B);w.push(...ce),M.push(...he)}else{const{workers:ce,wasms:he}=ca("audio","",B);w.push(...ce),M.push(...he)}if(Wu()&&rp()){const{workers:ce,wasms:he}=ca(["video","sharing"],"simd,thread",B);w.push(...ce),M.push(...he)}else if(rp()){const{workers:ce,wasms:he}=ca(["video","sharing"],"thread",B);w.push(...ce),M.push(...he)}else if(Wu()){const{workers:ce,wasms:he}=ca(["video","sharing"],"simd",B);w.push(...ce),M.push(...he)}else{const{workers:ce,wasms:he}=ca(["video","sharing"],"",B);w.push(...ce),M.push(...he)}const G=[db(T,"script")];w.forEach(ce=>{G.push(db(ce,"fetch"))});let Z=!1;if(null!==(A=window.indexedDB)&&void 0!==A&&A.databases)try{const ce=yield window.indexedDB.databases(),he='"audio:1613;video:1574"'.split(";").map(ue=>{const[Se,Qe]=ue.split(":");return{["".concat(Se)]:Number(Qe)}}).reduce((ue,Se)=>fn(fn({},ue),Se),{});he&&(Z=["AUDIO_FILE","VIDEO_FILE"].every(ue=>{const Se="AUDIO_FILE"===ue?he.audio:he.video;return-1!==ce.findIndex(Qe=>Qe.name===ue&&Qe.version===Se)}))}catch{}Z||M.forEach(ce=>{G.push(db(ce,"fetch"))});try{document.head.append(...G)}catch{}}),function(f){return u.apply(this,arguments)})(d)}}Nd.meetingClient=void 0,Nd.VERSION="2.9.0";var gg,WO,vy,Su,Ul,_g,xf,aT="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat("1.5.5","/lib"),KO="https://source.zoom.us/videosdk/".concat("1.5.5","/lib"),zO="https://jssdk.zoomus.cn/videosdk/".concat("1.5.5","/lib"),Zn=Symbol("stream"),vg=function(){function a(d){D(this,a),this[Zn]=void 0,this[Zn]=d}return P(a,[{key:"startAudio",value:function(d){return this[Zn].startAudio(d)}},{key:"stopAudio",value:function(){return this[Zn].stopAudio()}},{key:"muteAudio",value:function(d){return this[Zn].muteAudio(d)}},{key:"unmuteAudio",value:function(d){return this[Zn].unmuteAudio(d)}},{key:"inviteByPhone",value:function(d,u,f,A){return this[Zn].dialOut(d,u,f,A)}},{key:"cancelInviteByPhone",value:function(d,u,f){return this[Zn].cancelDialOut(d,u,f)}},{key:"hangup",value:function(){return this[Zn].hangup()}},{key:"muteShareAudio",value:function(d){return this[Zn].muteShareAudio(d)}},{key:"unmuteShareAudio",value:function(d){return this[Zn].unmuteShareAudio(d)}},{key:"subscribeAudioStatisticData",value:function(d){return this[Zn].subscribeAudioStatisticData(d)}},{key:"unsubscribeAudioStatisticData",value:function(d){return this[Zn].unsubscribeAudioStatisticData(d)}},{key:"muteUserAudioLocally",value:function(d){return this[Zn].muteUserAudioLocally(d)}},{key:"unmuteUserAudioLocally",value:function(d){return this[Zn].unmuteUserAudioLocally(d)}},{key:"adjustUserAudioVolumeLocally",value:function(d,u){return this[Zn].adjustUserAudioVolumeLocally(d,u)}},{key:"isAudioMuted",value:function(d){return this[Zn].isAudioMuted(d)}},{key:"getMicList",value:function(){return this[Zn].getMicList()}},{key:"getSpeakerList",value:function(){return this[Zn].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[Zn].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[Zn].getActiveSpeaker()}},{key:"switchMicrophone",value:function(d){return this[Zn].switchMicrophone(d)}},{key:"switchSpeaker",value:function(d){return this[Zn].switchSpeaker(d)}},{key:"isSupportPhoneFeature",value:function(){return this[Zn].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[Zn].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[Zn].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[Zn].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(d){return this[Zn].isOthersShareAudioMutedLocally(d)}},{key:"getAudioStatisticData",value:function(){return this[Zn].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(d){return this[Zn].isUserAudioMutedLocally(d)}},{key:"getUserVolumeLocally",value:function(d){return this[Zn].getUserVolumeLocally(d)}},{key:"startVideo",value:function(d){return this[Zn].startVideo(d)}},{key:"stopVideo",value:function(){return this[Zn].stopVideo()}},{key:"renderVideo",value:function(d,u,f,A,S,T,w,M){return this[Zn].renderVideo(d,u,f,A,S,T,w,M)}},{key:"stopRenderVideo",value:function(d,u,f,A){return this[Zn].stopRenderVideo(d,u,f,A,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"updateVideoCanvasDimension",value:function(d,u,f){return this[Zn].updateVideoCanvasDimension(d,u,f)}},{key:"adjustRenderedVideoPosition",value:function(d,u,f,A,S,T,w){return this[Zn].adjustRenderedVideoPosition(d,u,f,A,S,T,w)}},{key:"clearVideoCanvas",value:function(d,u){return this[Zn].clearVideoCanvas(d,u)}},{key:"mirrorVideo",value:function(d){return this[Zn].mirrorVideo(d)}},{key:"enableHardwareAcceleration",value:function(d){return this[Zn].enableHardwareAcceleration(d)}},{key:"previewVirtualBackground",value:function(d,u,f){return this[Zn].previewVirtualBackground(d,u,f)}},{key:"updateVirtualBackgroundImage",value:function(d,u){return this[Zn].updateVirtualBackgroundImage(d,u)}},{key:"stopPreviewVirtualBackground",value:function(){return this[Zn].stopPreviewVirtualBackground()}},{key:"switchCamera",value:function(d){return this[Zn].switchCamera(d)}},{key:"subscribeVideoStatisticData",value:function(d){return this[Zn].subscribeVideoStatisticData(d)}},{key:"unsubscribeVideoStatisticData",value:function(d){return this[Zn].unsubscribeVideoStatisticData(d)}},{key:"isCapturingVideo",value:function(){return this[Zn].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[Zn].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[Zn].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[Zn].getActiveCamera()}},{key:"getCameraList",value:function(){return this[Zn].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[Zn].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[Zn].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[Zn].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[Zn].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[Zn].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[Zn].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[Zn].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[Zn].getVideoStatisticData()}},{key:"startShareView",value:function(d,u){return this[Zn].startShareView(d,u)}},{key:"stopShareView",value:function(){return this[Zn].stopShareView()}},{key:"switchShareView",value:function(d){return this[Zn].switchShareView(d)}},{key:"startShareScreen",value:function(d,u){return void 0!==u?.broadcastToSubsession&&Object.assign(u||{},{broadcastToBreakoutRoom:u?.broadcastToSubsession}),this[Zn].startShareScreen(d,u)}},{key:"pauseShareScreen",value:function(){return this[Zn].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[Zn].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[Zn].stopShareScreen()}},{key:"lockShare",value:function(d){return this[Zn].lockShare(d)}},{key:"updateSharingCanvasDimension",value:function(d,u){return this[Zn].updateSharingCanvasDimension(d,u)}},{key:"switchSharingSecondaryCamera",value:function(d){return this[Zn].switchSharingSecondaryCamera(d)}},{key:"setSharePrivilege",value:function(d){return this[Zn].setSharePrivilege(d)}},{key:"shareToSubsession",value:function(){return this[Zn].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[Zn].stopShareToBreakoutRoom()}},{key:"isShareLocked",value:function(){return this[Zn].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[Zn].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[Zn].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[Zn].getShareStatus()}},{key:"getShareUserList",value:function(){return this[Zn].getShareUserList()}}]),a}(),Ay=["isCoHost"],nl=Symbol("chat"),cT=function(){function a(d){D(this,a),this[nl]=void 0,this[nl]=d}return P(a,[{key:"send",value:function(d,u){return this[nl].send(d,u)}},{key:"sendToAll",value:function(d){return this[nl].send(d,ki.All)}},{key:"setPrivilege",value:function(d){return this[nl].setPrivilege(d)}},{key:"getPrivilege",value:function(){return this[nl].getPrivilege()}},{key:"getReceivers",value:function(){return this[nl].getReceivers().map(function(d){return H({isManager:d.isCoHost},J(d,Ay))})}},{key:"getHistory",value:function(){return this[nl].getHistory()}}]),a}(),Eh=Symbol("recording"),uT=function(){function a(d){D(this,a),this[Eh]=void 0,this[Eh]=d}return P(a,[{key:"canStartRecording",value:function(){return this[Eh].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[Eh].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[Eh].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[Eh].startRecording()}},{key:"stopCloudRecording",value:function(){return this[Eh].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[Eh].getRecordingStatus()}}]),a}(),sS=Symbol("command"),dv=function(){function a(d){D(this,a),this[sS]=void 0,this[sS]=d}return P(a,[{key:"send",value:function(d,u){return this[sS].send(d,u)}}]),a}(),YO=["isInRoom"],qO=["isAutoJoinRoom"],la=Symbol("breakout-room"),Lf=function(){function a(d){D(this,a),this[la]=void 0,this[la]=d}return P(a,[{key:"createSubsessions",value:function(d,u){return this[la].createRooms(d,u).then(function(f){return f.map(function(A){return{subsessionId:A.roomId,subsessionName:A.name,userList:A.attendeeList}})})}},{key:"openSubsessions",value:function(d,u){var f=u?H(H({},u),{},{isAutoJoinRoom:u.isAutoJoinSubsession}):void 0,A=d.map(function(S){return{roomId:S.subsessionId,name:S.subsessionName,attendeeList:S.userList}});return this[la].openRooms(A,f)}},{key:"joinSubsession",value:function(d){return this[la].joinRoom(d)}},{key:"leaveSubsession",value:function(){return this[la].leaveRoom()}},{key:"askForHelp",value:function(){return this[la].askForHelp()}},{key:"postponeHelping",value:function(d){return this[la].postponeHelping(d)}},{key:"broadcast",value:function(d){return this[la].broadcast(d)}},{key:"assignUserToSubsession",value:function(d,u){return this[la].assignUserToRoom(d,u)}},{key:"moveUserToSubsession",value:function(d,u){return this[la].moveUserToRoom(d,u)}},{key:"closeAllSubsessions",value:function(){return this[la].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[la].getUnassignedAttendeeList()}},{key:"getSubsessionList",value:function(){return this[la].getRoomList().map(function(d){return{subsessionId:d.roomId,subsessionName:d.name,userList:d.attendeeList.map(function(u){return H({isInSubsession:u.isInRoom},J(u,YO))})}})}},{key:"getUserStatus",value:function(){return this[la].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[la].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var d=this[la].getCurrentRoom();return{userStatus:d.attendeeStatus,subsessionName:d.name,subsessionId:d.roomId}}},{key:"getSubsessionOptions",value:function(){var d=this[la].getRoomOptions();return H({isAutoJoinSubsession:d.isAutoJoinRoom},J(d,qO))}}]),a}(),rl=Symbol("liveTranscription"),JO=function(){function a(d){D(this,a),this[rl]=void 0,this[rl]=d}return P(a,[{key:"startLiveTranscription",value:function(){return this[rl].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(d){return this[rl].setSpeakingLanguage(d)}},{key:"setTranslationLanguage",value:function(d){return this[rl].setTranslationLanguage(d)}},{key:"getLiveTranscriptionStatus",value:function(){return this[rl].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[rl].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[rl].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[rl].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[rl].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[rl].getFullTranscriptionHistory()}}]),a}(),hv=function(a){return"string"==typeof a&&a.length>0},yP=function(a){var d="";switch(a){case"Global":d=KO;break;case"CN":d=zO;break;case"CDN":d=aT;break;default:d=a}return d},XO=["roomName"],$O=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(a){var d=a.roomName,u=J(a,XO);return d?H(H({},u),{},{subsessionName:d}):a}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(a){return{subsessionId:a.roomId,subsessionName:a.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(a){return{userId:a.userId,displayName:a.displayName,subsessionId:a.roomId,subsessionName:a.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],co=Symbol("Client"),yy=new WeakMap,ZO=function(){function a(){D(this,a),this[co]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this[co]=Nd.createClient(),yy.set(this,new Map)}return P(a,[{key:"init",value:function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",f=arguments.length>2?arguments[2]:void 0,A=yP(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),this[co].init("","",{language:d,dependentAssets:A,constraints:H(H({},Nd.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":U(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription"],webEndpoint:f?.webEndpoint||"zoom.us",skipJsMedia:f?.skipJsMedia,enforceMultipleVideos:f?.enforceMultipleVideos})}},{key:"join",value:function(d,u,f,A,S){return hv(d)&&hv(u)&&hv(f)?d.length>200?Promise.reject({type:"INVALID_PARAMETERS",reason:"the max length of topic is 200"}):f.length>200?Promise.reject({type:"INVALID_PARAMETERS",reason:"the max length of username is 200"}):!A||hv(A)&&!void/^([!@#$%^&*?=]|\w|\d){1,10}$/gi.test(A)?this[co].joinInstant(d,u,f,"1.5.5",A,S):Promise.reject({type:"INVALID_PARAMETERS",reason:"Password can contain English characters, numbers and special characters like !@#$%^&*?=, and the max length of password is 10"}):Promise.reject({type:"INVALID_PARAMETERS",reason:"topic, token and userName must be string and required"})}},{key:"leave",value:function(){var d;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(d=yy.get(this))||void 0===d||d.clear(),this[co].end()):this[co].leave()}},{key:"getSessionInfo",value:function(){var d=this[co].getMeetingInfo();return{isInMeeting:d.isInMeeting||!1,password:d.password||"",topic:d.topic,userName:d.userName,userId:d.userId,sessionId:d.meetingId}}},{key:"on",value:function(d,u){var f=$O.find(function(B){return B.event===d});if(f){var A=f.originalEvent,S=f.payloadTransform;if(S){var T=function(B){var G=S(B);u(G)};this[co].on(A,T);var w=yy.get(this);w&&(w.has(d)||w.set(d,[]),w.get(d)?.push({originalCb:u,newCb:T}))}else this[co].on(A,u)}else this[co].on(d,u)}},{key:"off",value:function(d,u){var f=$O.find(function(B){return B.event===d});if(f){var A=f.originalEvent;if(f.payloadTransform){var S=yy.get(this);if(S){var T=S.get(d),w=T?.find(function(B){return B.originalCb===u});if(w&&T){this[co].off(A,w.newCb);var M=T?.filter(function(B){return B.originalCb!==u});S.set(d,M)}}}else this[co].off(A,u)}else this[co].off(d,u)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new vg(this[co].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new cT(this[co].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new uT(this[co].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new dv(this[co].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new Lf(this[co].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new JO(this[co].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"coverntUser",value:function(d){return{userId:d.userId,avatar:d.avatar||"",displayName:d.displayName,isHost:d.isHost,isManager:d.isCoHost||!1,audio:d.audio,muted:d.muted,bVideoOn:d.bVideoOn,sharerOn:d.sharerOn,sharerPause:d.sharerPause}}},{key:"getCurrentUserInfo",value:function(){var d=this[co].getCurrentUserInfo();if(d)return this.coverntUser(d)}},{key:"getUser",value:function(d){var u=this[co].getParticipantsList().find(function(f){return f.userId===d});if(u)return this.coverntUser(u)}},{key:"getAllUser",value:function(){var d=this;return this[co].getParticipantsList().map(function(u){return d.coverntUser(u)})}},{key:"changeName",value:function(d,u){return this[co].changeName(d,u)}},{key:"makeHost",value:function(d){return this[co].makeHost(d)}},{key:"removeUser",value:function(d){return this[co].removeUser(d)}},{key:"isHost",value:function(){return this[co].isHost()}},{key:"getSessionHost",value:function(){var d=this[co].getMeetingHost();return d?this.coverntUser(d):void 0}},{key:"makeManager",value:function(d){return this[co].makeCoHost(d)}},{key:"revokeManager",value:function(d){return this[co].revokeCoHost(d)}},{key:"isManager",value:function(){return this[co].isCoHost()}}]),a}(),Bf=function(){function a(){D(this,a)}return P(a,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new ZO),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return Nd.checkSystemRequirements()}},{key:"getDevices",value:function(d){return Nd.getDevices(d)}},{key:"createLocalAudioTrack",value:function(){return Nd.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return Nd.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){Nd.preloadDependentAssets(yP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),a}();Bf.videoClient=void 0,Bf.VERSION="1.5.5",W.ChatPrivilege=void 0,(gg=W.ChatPrivilege||(W.ChatPrivilege={}))[gg.All=1]="All",gg[gg.NoOne=4]="NoOne",gg[gg.EveryonePublicly=5]="EveryonePublicly",W.ChatMsgType=void 0,(WO=W.ChatMsgType||(W.ChatMsgType={}))[WO.All=0]="All",W.SubsessionAllocationPattern=void 0,(vy=W.SubsessionAllocationPattern||(W.SubsessionAllocationPattern={}))[vy.Automatically=rf.Automatically]="Automatically",vy[vy.Manually=rf.Manually]="Manually",W.SubsessionUserStatus=void 0,(Su=W.SubsessionUserStatus||(W.SubsessionUserStatus={}))[Su.Initial=ur.Initial]="Initial",Su[Su.Invited=ur.Invited]="Invited",Su[Su.Joining=ur.Joining]="Joining",Su[Su.InSubsession=ur.InRoom]="InSubsession",Su[Su.Leaving=ur.Leaving]="Leaving",Su[Su.MainSession=ur.MainSession]="MainSession",W.SubsessionStatus=void 0,(Ul=W.SubsessionStatus||(W.SubsessionStatus={}))[Ul.NotStarted=kr.NotStarted]="NotStarted",Ul[Ul.InProgress=kr.InProgress]="InProgress",Ul[Ul.Closing=kr.Closing]="Closing",Ul[Ul.Closed=kr.Closed]="Closed",W.ReconnectReason=void 0,(_g=W.ReconnectReason||(W.ReconnectReason={}))[_g.Failover=aa.Failover]="Failover",_g[_g.JoinSubsession=aa.JoinBreakoutRoom]="JoinSubsession",_g[_g.MoveToSubsession=aa.MoveToBreakoutRoom]="MoveToSubsession",_g[_g.BackToMainSession=aa.BackToMainSession]="BackToMainSession",W.SharePrivilege=void 0,(xf=W.SharePrivilege||(W.SharePrivilege={}))[xf.Unlocked=Bu.HostGrab]="Unlocked",xf[xf.Locked=Bu.OnlyHost]="Locked",xf[xf.MultipleShare=Bu.MultipleShare]="MultipleShare",W.default=Bf,Object.defineProperty(W,"__esModule",{value:!0})}(Oe)},3890:function(Ce,Oe,Y){var L=Y(7156).default;Ce.exports=function(){"use strict";var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne=function(n){return n&&n.Math==Math&&n},H=ne("object"==typeof globalThis&&globalThis)||ne("object"==typeof window&&window)||ne("object"==typeof self&&self)||ne("object"==typeof W&&W)||function(){return this}()||Function("return this")(),U={},D=function(n){try{return!!n()}catch{return!0}},O=!D(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),P=!D(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),J=Function.prototype.call,ie=P?J.bind(J):function(){return J.apply(J,arguments)},te={},le={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,z=X&&!le.call({1:2},1);te.f=z?function(n){var i=X(this,n);return!!i&&i.enumerable}:le;var K,se,ve=function(n,i){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:i}},De=P,pe=Function.prototype,ye=pe.call,ge=De&&pe.bind.bind(ye,ye),re=De?function(n){return n&&ge(n)}:function(n){return n&&function(){return ye.apply(n,arguments)}},de=re,Te=de({}.toString),Fe=de("".slice),xe=function(n){return Fe(Te(n),8,-1)},ze=D,Ze=xe,je=H.Object,xt=re("".split),Wt=ze(function(){return!je("z").propertyIsEnumerable(0)})?function(n){return"String"==Ze(n)?xt(n,""):je(n)}:je,ht=H.TypeError,qe=function(n){if(null==n)throw ht("Can't call method on "+n);return n},Ue=Wt,Ye=qe,we=function(n){return Ue(Ye(n))},nt=function(n){return"function"==typeof n},Dt=nt,zt=function(n){return"object"==typeof n?null!==n:Dt(n)},kt=H,mt=nt,Kn=function(n){return mt(n)?n:void 0},Yn=function(n,i){return arguments.length<2?Kn(kt[n]):kt[n]&&kt[n][i]},Lr=re({}.isPrototypeOf),Vr=Yn("navigator","userAgent")||"",Tr=Vr,Pn=H.process,bi=H.Deno,Di=Pn&&Pn.versions||bi&&bi.version,lo=Di&&Di.v8;lo&&(se=(K=lo.split("."))[0]>0&&K[0]<4?1:+(K[0]+K[1])),!se&&Tr&&(!(K=Tr.match(/Edge\/(\d+)/))||K[1]>=74)&&(K=Tr.match(/Chrome\/(\d+)/))&&(se=+K[1]);var ho=se,yt=ho,$t=!!Object.getOwnPropertySymbols&&!D(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&yt&&yt<41}),Xe=$t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Me=Yn,st=nt,kn=Lr,Ji=H.Object,$o=Xe?function(n){return"symbol"==typeof n}:function(n){var i=Me("Symbol");return st(i)&&kn(i.prototype,Ji(n))},Zo=H.String,po=function(n){try{return Zo(n)}catch{return"Object"}},Ss=nt,io=po,Nc=H.TypeError,Vn=function(n){if(Ss(n))return n;throw Nc(io(n)+" is not a function")},_n=Vn,Ne=function(n,i){var o=n[i];return null==o?void 0:_n(o)},dt=ie,Zt=nt,en=zt,mn=H.TypeError,hi={exports:{}},Eo=H,Cs=Object.defineProperty,es=function(n,i){try{Cs(Eo,n,{value:i,configurable:!0,writable:!0})}catch{Eo[n]=i}return i},zn="__core-js_shared__",wr=H[zn]||es(zn,{}),Xi=wr;(hi.exports=function(n,i){return Xi[n]||(Xi[n]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var lu=qe,tr=H.Object,jp=function(n){return tr(lu(n))},oE=jp,z2=re({}.hasOwnProperty),Wa=Object.hasOwn||function(n,i){return z2(oE(n),i)},Uv=re,Vv=0,jv=Math.random(),Ds=Uv(1..toString),Kd=function(n){return"Symbol("+(void 0===n?"":n)+")_"+Ds(++Vv+jv,36)},Qv=H,cw=Wa,Zs=Kd,uw=$t,Un=Xe,Kg=(0,hi.exports)("wks"),nm=Qv.Symbol,E0=nm&&nm.for,dc=Un?nm:nm&&nm.withoutSetter||Zs,wo=function(n){if(!cw(Kg,n)||!uw&&"string"!=typeof Kg[n]){var i="Symbol."+n;Kg[n]=uw&&cw(nm,n)?nm[n]:Un&&E0?E0(i):dc(i)}return Kg[n]},vl=ie,du=zt,sE=$o,Ro=Ne,Fh=H.TypeError,er=wo("toPrimitive"),jo=function(n,i){if(!du(n)||sE(n))return n;var o,c=Ro(n,er);if(c){if(void 0===i&&(i="default"),o=vl(c,n,i),!du(o)||sE(o))return o;throw Fh("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(n,i){var o,c;if("string"===i&&Zt(o=n.toString)&&!en(c=dt(o,n))||Zt(o=n.valueOf)&&!en(c=dt(o,n))||"string"!==i&&Zt(o=n.toString)&&!en(c=dt(o,n)))return c;throw mn("Can't convert object to primitive value")}(n,i)},Gr=$o,rm=function(n){var i=jo(n,"string");return Gr(i)?i:i+""},ea=zt,b0=H.document,zg=ea(b0)&&ea(b0.createElement),gn=function(n){return zg?b0.createElement(n):{}},aE=gn,si=!O&&!D(function(){return 7!=Object.defineProperty(aE("div"),"a",{get:function(){return 7}}).a}),cE=ie,xB=te,Y2=ve,Hv=we,ta=rm,LB=Wa,q2=si,J2=Object.getOwnPropertyDescriptor;U.f=O?J2:function(n,i){if(n=Hv(n),i=ta(i),q2)try{return J2(n,i)}catch{}if(LB(n,i))return Y2(!cE(xB.f,n,i),n[i])};var ri={},X2=O&&D(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),BB=zt,FB=H.String,hc=H.TypeError,Pc=function(n){if(BB(n))return n;throw hc(FB(n)+" is not an object")},UB=si,ro=Pc,ai=rm,eN=H.TypeError,lw=Object.defineProperty,vr=Object.getOwnPropertyDescriptor;ri.f=O?X2?function(n,i,o){if(ro(n),i=ai(i),ro(o),"function"==typeof n&&"prototype"===i&&"value"in o&&"writable"in o&&!o.writable){var c=vr(n,i);c&&c.writable&&(n[i]=o.value,o={configurable:"configurable"in o?o.configurable:c.configurable,enumerable:"enumerable"in o?o.enumerable:c.enumerable,writable:!1})}return lw(n,i,o)}:lw:function(n,i,o){if(ro(n),i=ai(i),ro(o),UB)try{return lw(n,i,o)}catch{}if("get"in o||"set"in o)throw eN("Accessors not supported");return"value"in o&&(n[i]=o.value),n};var VB=ri,Qo=ve,yl=O?function(n,i,o){return VB.f(n,i,Qo(1,o))}:function(n,i,o){return n[i]=o,n},rd={exports:{}},Yg=nt,qg=wr,S0=re(Function.toString);Yg(qg.inspectSource)||(qg.inspectSource=function(n){return S0(n)});var lr,Gv,Yr,Jg=qg.inspectSource,Nu=Jg,Qn=H.WeakMap,jB=nt(Qn)&&/native code/.test(Nu(Qn)),nN=Kd,Ui=(0,hi.exports)("keys"),C0=function(n){return Ui[n]||(Ui[n]=nN(n))},Hp={},Xg=re,lE=zt,$g=yl,zd=Wa,Wp=C0,im=Hp,Xt="Object already initialized",Oo=H.TypeError;if(jB||wr.state){var id=wr.state||(wr.state=new(0,H.WeakMap)),dE=Xg(id.get),Zg=Xg(id.has),rN=Xg(id.set);lr=function(n,i){if(Zg(id,n))throw new Oo(Xt);return i.facade=n,rN(id,n,i),i},Gv=function(n){return dE(id,n)||{}},Yr=function(n){return Zg(id,n)}}else{var e_=Wp("state");im[e_]=!0,lr=function(n,i){if(zd(n,e_))throw new Oo(Xt);return i.facade=n,$g(n,e_,i),i},Gv=function(n){return zd(n,e_)?n[e_]:{}},Yr=function(n){return zd(n,e_)}}var El={set:lr,get:Gv,has:Yr,enforce:function(n){return Yr(n)?Gv(n):lr(n,{})},getterFor:function(n){return function(i){var o;if(!lE(i)||(o=Gv(i)).type!==n)throw Oo("Incompatible receiver, "+n+" required");return o}}},Yd=O,iN=Function.prototype,oN=Yd&&Object.getOwnPropertyDescriptor,hu=Wa(iN,"name"),Pu={EXISTS:hu,PROPER:hu&&"something"===function(){}.name,CONFIGURABLE:hu&&(!Yd||Yd&&oN(iN,"name").configurable)},$i=H,om=nt,hE=Wa,Kv=yl,dw=es,bl=Jg,zv=Pu.CONFIGURABLE,Mc=El.get,ba=El.enforce,hw=String(String).split("String");(rd.exports=function(n,i,o,c){var h,g=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,_=c&&void 0!==c.name?c.name:i;om(o)&&("Symbol("===String(_).slice(0,7)&&(_="["+String(_).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hE(o,"name")||zv&&o.name!==_)&&Kv(o,"name",_),(h=ba(o)).source||(h.source=hw.join("string"==typeof _?_:""))),n!==$i?(g?!v&&n[i]&&(p=!0):delete n[i],p?n[i]=o:Kv(n,i,o)):p?n[i]=o:dw(i,o)})(Function.prototype,"toString",function(){return om(this)&&Mc(this).source||bl(this)});var sm={},pw=Math.ceil,Hi=Math.floor,na=function(n){var i=+n;return i!=i||0===i?0:(i>0?Hi:pw)(i)},Yv=na,mr=Math.max,ra=Math.min,Zi=function(n,i){var o=Yv(n);return o<0?mr(o+i,0):ra(o,i)},Is=na,xc=Math.min,sd=function(n){return n>0?xc(Is(n),9007199254740991):0},Lc=sd,Sa=function(n){return Lc(n.length)},or=we,pi=Zi,_s=Sa,Mu=function(n){return function(i,o,c){var h,g=or(i),p=_s(g),v=pi(c,p);if(n&&o!=o){for(;p>v;)if((h=g[v++])!=h)return!0}else for(;p>v;v++)if((n||v in g)&&g[v]===o)return n||v||0;return!n&&-1}},qd={includes:Mu(!0),indexOf:Mu(!1)},ks=Wa,am=we,ds=qd.indexOf,qv=Hp,cm=re([].push),vi=function(n,i){var o,c=am(n),h=0,g=[];for(o in c)!ks(qv,o)&&ks(c,o)&&cm(g,o);for(;i.length>h;)ks(c,o=i[h++])&&(~ds(g,o)||cm(g,o));return g},um=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],lm=vi,pE=um.concat("length","prototype");sm.f=Object.getOwnPropertyNames||function(n){return lm(n,pE)};var Jd={};Jd.f=Object.getOwnPropertySymbols;var Ka=Yn,t_=sm,dm=Jd,Xd=Pc,n_=re([].concat),xu=Ka("Reflect","ownKeys")||function(n){var i=t_.f(Xd(n)),o=dm.f;return o?n_(i,o(n)):i},Mn=Wa,r_=xu,Uh=U,ad=ri,Si=function(n,i,o){for(var c=r_(i),h=ad.f,g=Uh.f,p=0;p<c.length;p++){var v=c[p];Mn(n,v)||o&&Mn(o,v)||h(n,v,g(i,v))}},i_=D,Vh=nt,Lo=/#|\.prototype\./,Lu=function(n,i){var o=Sl[Bc(n)];return o==mE||o!=fE&&(Vh(i)?i_(i):!!i)},Bc=Lu.normalize=function(n){return String(n).replace(Lo,".").toLowerCase()},Sl=Lu.data={},fE=Lu.NATIVE="N",mE=Lu.POLYFILL="P",$d=Lu,pu=H,T0=U.f,fw=yl,gE=rd.exports,_E=es,QB=Si,sN=$d,pc=function(n,i){var o,c,h,g,p,v=n.target,_=n.global,y=n.stat;if(o=_?pu:y?pu[v]||_E(v,{}):(pu[v]||{}).prototype)for(c in i){if(g=i[c],h=n.noTargetGet?(p=T0(o,c))&&p.value:o[c],!sN(_?c:v+(y?".":"#")+c,n.forced)&&void 0!==h){if(typeof g==typeof h)continue;QB(g,h)}(n.sham||h&&h.sham)&&fw(g,"sham",!0),gE(o,c,g,n)}},vE=H.Promise,Hs=rd.exports,jh=function(n,i,o){for(var c in i)Hs(n,c,i[c],o);return n},HB=nt,Cl=H.String,aN=H.TypeError,gw=re,cN=Pc,Kp=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,o={};try{(n=gw(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),i=o instanceof Array}catch{}return function(c,h){return cN(c),function(n){if("object"==typeof n||HB(n))return n;throw aN("Can't set "+Cl(n)+" as a prototype")}(h),i?n(c,h):c.__proto__=h,c}}():void 0),w0=ri.f,GB=Wa,R0=wo("toStringTag"),Jv=function(n,i,o){n&&!o&&(n=n.prototype),n&&!GB(n,R0)&&w0(n,R0,{configurable:!0,value:i})},ia=Yn,Xv=ri,za=O,AE=wo("species"),hm=function(n){var i=ia(n);za&&i&&!i[AE]&&(0,Xv.f)(i,AE,{configurable:!0,get:function(){return this}})},uN=Lr,O0=H.TypeError,o_=function(n,i){if(uN(i,n))return n;throw O0("Incorrect invocation")},lN=Vn,D0=P,vw=re(re.bind),oa=function(n,i){return lN(n),void 0===i?n:D0?vw(n,i):function(){return n.apply(i,arguments)}},Qh={},k0=Qh,yE=wo("iterator"),Aw=Array.prototype,s_=function(n){return void 0!==n&&(k0.Array===n||Aw[yE]===n)},sa={};sa[wo("toStringTag")]="z";var yw=H,dN="[object z]"===String(sa),$v=nt,Ya=xe,Ew=wo("toStringTag"),bw=yw.Object,pm="Arguments"==Ya(function(){return arguments}()),Ca=dN?Ya:function(n){var i,o,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(o=function(h,g){try{return h[g]}catch{}}(i=bw(n),Ew))?o:pm?Ya(i):"Object"==(c=Ya(i))&&$v(i.callee)?"Arguments":c},hN=Ca,Hh=Ne,Sw=Qh,Gh=wo("iterator"),Zv=function(n){if(null!=n)return Hh(n,Gh)||Hh(n,"@@iterator")||Sw[hN(n)]},EE=ie,ci=Vn,N0=Pc,pN=po,aa=Zv,eA=H.TypeError,P0=function(n,i){var o=arguments.length<2?aa(n):i;if(ci(o))return N0(EE(o,n));throw eA(pN(n)+" is not iterable")},vs=ie,fm=Pc,Vi=Ne,An=oa,ar=ie,Ia=Pc,Ta=po,Go=s_,tA=Sa,mm=Lr,cd=P0,gm=Zv,nA=function(n,i,o){var c,h;fm(n);try{if(!(c=Vi(n,"return"))){if("throw"===i)throw o;return o}c=vs(c,n)}catch(g){h=!0,c=g}if("throw"===i)throw o;if(h)throw c;return fm(c),o},fN=H.TypeError,ud=function(n,i){this.stopped=n,this.result=i},M0=ud.prototype,rA=wo("iterator"),wa=!1;try{var ld=0,_m={next:function(){return{done:!!ld++}},return:function(){wa=!0}};_m[rA]=function(){return this},Array.from(_m,function(){throw 2})}catch{}var zp=function(n,i){if(!i&&!wa)return!1;var o=!1;try{var c={};c[rA]=function(){return{next:function(){return{done:o=!0}}}},n(c)}catch{}return o},Bo=re,vm=D,fu=nt,hs=Ca,x0=Jg,Yp=function(){},qp=[],L0=Yn("Reflect","construct"),fc=/^\s*(?:class|function)\b/,B0=Bo(fc.exec),Ts=!fc.exec(Yp),mc=function(n){if(!fu(n))return!1;try{return L0(Yp,qp,n),!0}catch{return!1}},iA=function(n){if(!fu(n))return!1;switch(hs(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ts||!!B0(fc,x0(n))}catch{return!0}};iA.sham=!0;var Am,eo,dd,ki,ym=!L0||vm(function(){var n;return mc(mc.call)||!mc(Object)||!mc(function(){n=!0})||n})?iA:mc,oA=ym,Fc=po,Em=H.TypeError,Fo=function(n){if(oA(n))return n;throw Em(Fc(n)+" is not a constructor")},bm=Pc,sA=Fo,Jp=wo("species"),F0=function(n,i){var o,c=bm(n).constructor;return void 0===c||null==(o=bm(c)[Jp])?i:sA(o)},U0=Function.prototype,Do=U0.apply,aA=U0.call,Xp="object"==typeof Reflect&&Reflect.apply||(P?aA.bind(Do):function(){return aA.apply(Do,arguments)}),qa=Yn("document","documentElement"),Sm=re([].slice),go=/(?:ipad|iphone|ipod).*applewebkit/i.test(Vr),Wo="process"==xe(H.process),ko=H,mN=Xp,gN=oa,$p=nt,V0=Wa,bE=D,Cw=qa,gc=Sm,SE=gn,j0=go,Or=Wo,Ja=ko.setImmediate,hd=ko.clearImmediate,Iw=ko.process,CE=ko.Dispatch,IE=ko.Function,Bu=ko.MessageChannel,Wh=ko.String,a_=0,Kh={};try{Am=ko.location}catch{}var cA=function(n){if(V0(Kh,n)){var i=Kh[n];delete Kh[n],i()}},c_=function(n){return function(){cA(n)}},H0=function(n){cA(n.data)},mu=function(n){ko.postMessage(Wh(n),Am.protocol+"//"+Am.host)};Ja&&hd||(Ja=function(n){var i=gc(arguments,1);return Kh[++a_]=function(){mN($p(n)?n:IE(n),void 0,i)},eo(a_),a_},hd=function(n){delete Kh[n]},Or?eo=function(n){Iw.nextTick(c_(n))}:CE&&CE.now?eo=function(n){CE.now(c_(n))}:Bu&&!j0?(ki=(dd=new Bu).port2,dd.port1.onmessage=H0,eo=gN(ki.postMessage,ki)):ko.addEventListener&&$p(ko.postMessage)&&!ko.importScripts&&Am&&"file:"!==Am.protocol&&!bE(mu)?(eo=mu,ko.addEventListener("message",H0,!1)):eo="onreadystatechange"in SE("script")?function(n){Cw.appendChild(SE("script")).onreadystatechange=function(){Cw.removeChild(this),cA(n)}}:function(n){setTimeout(c_(n),0)});var Zp,Fu,Cm,Im,Ra,uA,Uu,Tm,G0={set:Ja,clear:hd},Vu=H,Tw=/ipad|iphone|ipod/i.test(Vr)&&void 0!==Vu.Pebble,ww=/web0s(?!.*chrome)/i.test(Vr),pd=H,ef=oa,wm=G0.set,Rw=go,cr=Tw,qr=ww,_o=Wo,TE=pd.MutationObserver||pd.WebKitMutationObserver,lA=pd.document,W0=pd.process,zh=pd.Promise,Uc=(0,U.f)(pd,"queueMicrotask"),ju=Uc&&Uc.value;ju||(Zp=function(){var n,i;for(_o&&(n=W0.domain)&&n.exit();Fu;){i=Fu.fn,Fu=Fu.next;try{i()}catch(o){throw Fu?Im():Cm=void 0,o}}Cm=void 0,n&&n.enter()},Rw||_o||qr||!TE||!lA?!cr&&zh&&zh.resolve?((Uu=zh.resolve(void 0)).constructor=zh,Tm=ef(Uu.then,Uu),Im=function(){Tm(Zp)}):_o?Im=function(){W0.nextTick(Zp)}:(wm=ef(wm,pd),Im=function(){wm(Zp)}):(Ra=!0,uA=lA.createTextNode(""),new TE(Zp).observe(uA,{characterData:!0}),Im=function(){uA.data=Ra=!Ra}));var tf=ju||function(n){var i={fn:n,next:void 0};Cm&&(Cm.next=i),Fu||(Fu=i,Im()),Cm=i},Et={},nf=Vn,Ii=function(n){var i,o;this.promise=new n(function(c,h){if(void 0!==i||void 0!==o)throw TypeError("Bad Promise constructor");i=c,o=h}),this.resolve=nf(i),this.reject=nf(o)};Et.f=function(n){return new Ii(n)};var Gs=Pc,K0=zt,Fn=Et,WB=function(n,i){if(Gs(n),K0(i)&&i.constructor===n)return i;var o=Fn.f(n);return(0,o.resolve)(i),o.promise},_N=H,Ow=function(){this.head=null,this.tail=null};Ow.prototype={add:function(n){var i={item:n,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var wE,Dw,kw,Nw,vN="object"==typeof window,RE=pc,Uo=H,OE=Yn,Qu=ie,DE=vE,Ws=rd.exports,_c=jh,Yh=Kp,kE=Jv,Tl=hm,qh=Vn,Jh=nt,z0=zt,Rm=o_,Y0=Jg,Xa=function(n,i,o){var c,h,g,p,v,_,y,C=!(!o||!o.AS_ENTRIES),R=!(!o||!o.IS_ITERATOR),N=!(!o||!o.INTERRUPTED),j=An(i,o&&o.that),Q=function(ae){return c&&nA(c,"normal",ae),new ud(!0,ae)},$=function(ae){return C?(Ia(ae),N?j(ae[0],ae[1],Q):j(ae[0],ae[1])):N?j(ae,Q):j(ae)};if(R)c=n;else{if(!(h=gm(n)))throw fN(Ta(n)+" is not iterable");if(Go(h)){for(g=0,p=tA(n);p>g;g++)if((v=$(n[g]))&&mm(M0,v))return v;return new ud(!1)}c=cd(n,h)}for(_=c.next;!(y=ar(_,c)).done;){try{v=$(y.value)}catch(ae){nA(c,"throw",ae)}if("object"==typeof v&&v&&mm(M0,v))return v}return new ud(!1)},rf=zp,kr=F0,Om=G0.set,ur=tf,Dm=WB,Hu=Et,q0=function(n){try{return{error:!1,value:n()}}catch(i){return{error:!0,value:i}}},dA=Ow,J0=El,Ks=$d,AN=vN,sf=Wo,l_=ho,NE=wo("species"),fi="Promise",hA=J0.getterFor(fi),d_=J0.set,Pw=J0.getterFor(fi),Xh=DE&&DE.prototype,vc=DE,Zd=Xh,pA=Uo.TypeError,af=Uo.document,PE=Uo.process,wl=Hu.f,h_=wl,X0=!!(af&&af.createEvent&&Uo.dispatchEvent),ME=Jh(Uo.PromiseRejectionEvent),xE="unhandledrejection",$0=!1,p_=Ks(fi,function(){var n=Y0(vc),i=n!==String(vc);if(!i&&66===l_)return!0;if(l_>=51&&/native code/.test(n))return!1;var o=new vc(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(o.constructor={})[NE]=c,!($0=o.then(function(){})instanceof c)||!i&&AN&&!ME}),Z0=p_||!rf(function(n){vc.all(n).catch(function(){})}),f_=function(n){var i;return!(!z0(n)||!Jh(i=n.then))&&i},eC=function(n,i){var o,c,h,g=i.value,p=1==i.state,v=p?n.ok:n.fail,_=n.resolve,y=n.reject,b=n.domain;try{v?(p||(2===i.rejection&&yN(i),i.rejection=1),!0===v?o=g:(b&&b.enter(),o=v(g),b&&(b.exit(),h=!0)),o===n.promise?y(pA("Promise-chain cycle")):(c=f_(o))?Qu(c,o,_,y):_(o)):y(g)}catch(C){b&&!h&&b.exit(),y(C)}},md=function(n,i){n.notified||(n.notified=!0,ur(function(){for(var o,c=n.reactions;o=c.get();)eC(o,n);n.notified=!1,i&&!n.rejection&&tC(n)}))},LE=function(n,i,o){var c,h;X0?((c=af.createEvent("Event")).promise=i,c.reason=o,c.initEvent(n,!1,!0),Uo.dispatchEvent(c)):c={promise:i,reason:o},!ME&&(h=Uo["on"+n])?h(c):n===xE&&function(n,i){var o=_N.console;o&&o.error&&(1==arguments.length?o.error(n):o.error(n,i))}("Unhandled promise rejection",o)},tC=function(n){Qu(Om,Uo,function(){var i,o=n.facade,c=n.value;if($h(n)&&(i=q0(function(){sf?PE.emit("unhandledRejection",c,o):LE(xE,o,c)}),n.rejection=sf||$h(n)?2:1,i.error))throw i.value})},$h=function(n){return 1!==n.rejection&&!n.parent},yN=function(n){Qu(Om,Uo,function(){var i=n.facade;sf?PE.emit("rejectionHandled",i):LE("rejectionhandled",i,n.value)})},cf=function(n,i,o){return function(c){n(i,c,o)}},eh=function(n,i,o){n.done||(n.done=!0,o&&(n=o),n.value=i,n.state=2,md(n,!0))},m_=function(n,i,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===i)throw pA("Promise can't be resolved itself");var c=f_(i);c?ur(function(){var h={done:!1};try{Qu(c,i,cf(m_,h,n),cf(eh,h,n))}catch(g){eh(h,g,n)}}):(n.value=i,n.state=1,md(n,!1))}catch(h){eh({done:!1},h,n)}}};if(p_&&(Zd=(vc=function(n){Rm(this,Zd),qh(n),Qu(wE,this);var i=hA(this);try{n(cf(m_,i),cf(eh,i))}catch(o){eh(i,o)}}).prototype,(wE=function(n){d_(this,{type:fi,done:!1,notified:!1,parent:!1,reactions:new dA,rejection:!1,state:0,value:void 0})}).prototype=_c(Zd,{then:function(n,i){var o=Pw(this),c=wl(kr(this,vc));return o.parent=!0,c.ok=!Jh(n)||n,c.fail=Jh(i)&&i,c.domain=sf?PE.domain:void 0,0==o.state?o.reactions.add(c):ur(function(){eC(c,o)}),c.promise},catch:function(n){return this.then(void 0,n)}}),Dw=function(){var n=new wE,i=hA(n);this.promise=n,this.resolve=cf(m_,i),this.reject=cf(eh,i)},Hu.f=wl=function(n){return n===vc||n===kw?new Dw(n):h_(n)},Jh(DE)&&Xh!==Object.prototype)){Nw=Xh.then,$0||(Ws(Xh,"then",function(n,i){var o=this;return new vc(function(c,h){Qu(Nw,o,c,h)}).then(n,i)},{unsafe:!0}),Ws(Xh,"catch",Zd.catch,{unsafe:!0}));try{delete Xh.constructor}catch{}Yh&&Yh(Xh,Zd)}RE({global:!0,wrap:!0,forced:p_},{Promise:vc}),kE(vc,fi,!1),Tl(fi),kw=OE(fi),RE({target:fi,stat:!0,forced:p_},{reject:function(n){var i=wl(this);return Qu(i.reject,void 0,n),i.promise}}),RE({target:fi,stat:!0,forced:p_},{resolve:function(n){return Dm(this,n)}}),RE({target:fi,stat:!0,forced:Z0},{all:function(n){var i=this,o=wl(i),c=o.resolve,h=o.reject,g=q0(function(){var p=qh(i.resolve),v=[],_=0,y=1;Xa(n,function(b){var C=_++,R=!1;y++,Qu(p,i,b).then(function(N){R||(R=!0,v[C]=N,--y||c(v))},h)}),--y||c(v)});return g.error&&h(g.value),o.promise},race:function(n){var i=this,o=wl(i),c=o.reject,h=q0(function(){var g=qh(i.resolve);Xa(n,function(p){Qu(g,i,p).then(o.resolve,c)})});return h.error&&c(h.value),o.promise}});var BE=pc,nC=Xp,km=re,FE=D,Mw=H.Array,UE=Yn("JSON","stringify"),VE=km(/./.exec),rC=km("".charAt),iC=km("".charCodeAt),jE=km("".replace),oC=km(1..toString),QE=/[\uD800-\uDFFF]/g,HE=/^[\uD800-\uDBFF]$/,Rl=/^[\uDC00-\uDFFF]$/,sC=function(n,i,o){var c=rC(o,i-1),h=rC(o,i+1);return VE(HE,n)&&!VE(Rl,h)||VE(Rl,n)&&!VE(HE,c)?"\\u"+oC(iC(n,0),16):n},Vc=FE(function(){return'"\\udf06\\ud834"'!==UE("\udf06\ud834")||'"\\udead"'!==UE("\udead")});UE&&BE({target:"JSON",stat:!0,forced:Vc},{stringify:function(n,i,o){for(var c=0,h=arguments.length,g=Mw(h);c<h;c++)g[c]=arguments[c];var p=nC(UE,null,g);return"string"==typeof p?jE(p,QE,sC):p}});var ps=function(n){try{return!!n()}catch{return!0}},GE=!ps(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),xw=GE,WE=Function.prototype,aC=WE.call,Lw=xw&&WE.bind.bind(aC,aC),bo=xw?function(n){return n&&Lw(n)}:function(n){return n&&function(){return aC.apply(n,arguments)}},jc=bo({}.isPrototypeOf),fA=function(n){return n&&n.Math==Math&&n},Jr=fA("object"==typeof globalThis&&globalThis)||fA("object"==typeof window&&window)||fA("object"==typeof self&&self)||fA("object"==typeof W&&W)||function(){return this}()||Function("return this")(),mA=Function.prototype,zE=mA.apply,gA=mA.call,zs="object"==typeof Reflect&&Reflect.apply||(GE?gA.bind(zE):function(){return gA.apply(zE,arguments)}),Ko=function(n){return"function"==typeof n},lf={},Hc=!ps(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),_A=Function.prototype.call,Gc=GE?_A.bind(_A):function(){return _A.apply(_A,arguments)},df={},YE={}.propertyIsEnumerable,qE=Object.getOwnPropertyDescriptor,Fw=qE&&!YE.call({1:2},1);df.f=Fw?function(n){var i=qE(this,n);return!!i&&i.enumerable}:YE;var Zh,Nm,gd=function(n,i){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:i}},cC=bo,uC=cC({}.toString),Uw=cC("".slice),th=function(n){return Uw(uC(n),8,-1)},jw=ps,JE=th,g_=Jr.Object,XE=bo("".split),__=jw(function(){return!g_("z").propertyIsEnumerable(0)})?function(n){return"String"==JE(n)?XE(n,""):g_(n)}:g_,ep=Jr.TypeError,tp=function(n){if(null==n)throw ep("Can't call method on "+n);return n},vA=__,v_=tp,Ol=function(n){return vA(v_(n))},KB=Ko,Dl=function(n){return"object"==typeof n?null!==n:KB(n)},hf={},Qw=hf,Hw=Jr,zB=Ko,Gw=function(n){return zB(n)?n:void 0},kl=function(n,i){return arguments.length<2?Gw(Qw[n])||Gw(Hw[n]):Qw[n]&&Qw[n][i]||Hw[n]&&Hw[n][i]},Pm=kl("navigator","userAgent")||"",Ww=Pm,Kw=Jr.process,AA=Jr.Deno,$E=Kw&&Kw.versions||AA&&AA.version,_d=$E&&$E.v8;_d&&(Nm=(Zh=_d.split("."))[0]>0&&Zh[0]<4?1:+(Zh[0]+Zh[1])),!Nm&&Ww&&(!(Zh=Ww.match(/Edge\/(\d+)/))||Zh[1]>=74)&&(Zh=Ww.match(/Chrome\/(\d+)/))&&(Nm=+Zh[1]);var pf=Nm,ZE=pf,yA=!!Object.getOwnPropertySymbols&&!ps(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&ZE&&ZE<41}),EA=yA&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,YB=kl,EN=Ko,bN=jc,Yw=Jr.Object,dC=EA?function(n){return"symbol"==typeof n}:function(n){var i=YB("Symbol");return EN(i)&&bN(i.prototype,Yw(n))},hC=Jr.String,A_=function(n){try{return hC(n)}catch{return"Object"}},CN=Ko,qw=A_,Jw=Jr.TypeError,nh=function(n){if(CN(n))return n;throw Jw(qw(n)+" is not a function")},eb=nh,Xw=function(n,i){var o=n[i];return null==o?void 0:eb(o)},tb=Gc,nb=Ko,rb=Dl,pC=Jr.TypeError,Mm={exports:{}},ib=Jr,bA=Object.defineProperty,vd="__core-js_shared__",y_=Jr[vd]||function(n,i){try{bA(ib,n,{value:i,configurable:!0,writable:!0})}catch{ib[n]=i}return i}(vd,{}),ff=y_;(Mm.exports=function(n,i){return ff[n]||(ff[n]=void 0!==i?i:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var $w=tp,fC=Jr.Object,Gu=function(n){return fC($w(n))},mC=Gu,gC=bo({}.hasOwnProperty),ws=Object.hasOwn||function(n,i){return gC(mC(n),i)},sb=bo,_C=0,vC=Math.random(),ab=sb(1..toString),Ad=function(n){return"Symbol("+(void 0===n?"":n)+")_"+ab(++_C+vC,36)},Zw=Jr,AC=ws,tR=Ad,yC=yA,Wc=EA,Kc=(0,Mm.exports)("wks"),mf=Zw.Symbol,EC=mf&&mf.for,nR=Wc?mf:mf&&mf.withoutSetter||tR,Ns=function(n){if(!AC(Kc,n)||!yC&&"string"!=typeof Kc[n]){var i="Symbol."+n;Kc[n]=yC&&AC(mf,n)?mf[n]:Wc&&EC?EC(i):nR(i)}return Kc[n]},qB=Gc,IN=Dl,bC=dC,rR=Xw,oR=Jr.TypeError,SA=Ns("toPrimitive"),rh=function(n,i){if(!IN(n)||bC(n))return n;var o,c=rR(n,SA);if(c){if(void 0===i&&(i="default"),o=qB(c,n,i),!IN(o)||bC(o))return o;throw oR("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(n,i){var o,c;if("string"===i&&nb(o=n.toString)&&!rb(c=tb(o,n))||nb(o=n.valueOf)&&!rb(c=tb(o,n))||"string"!==i&&nb(o=n.toString)&&!rb(c=tb(o,n)))return c;throw pC("Can't convert object to primitive value")}(n,i)},np=dC,gf=function(n){var i=rh(n,"string");return np(i)?i:i+""},CA=Dl,IA=Jr.document,TN=CA(IA)&&CA(IA.createElement),CC=function(n){return TN?IA.createElement(n):{}},wN=CC,TA=!Hc&&!ps(function(){return 7!=Object.defineProperty(wN("div"),"a",{get:function(){return 7}}).a}),wA=Gc,IC=df,Nl=gd,sR=Ol,aR=gf,TC=ws,RN=TA,wC=Object.getOwnPropertyDescriptor;lf.f=Hc?wC:function(n,i){if(n=sR(n),i=aR(i),RN)try{return wC(n,i)}catch{}if(TC(n,i))return Nl(!wA(IC.f,n,i),n[i])};var E_=ps,RC=Ko,xm=/#|\.prototype\./,RA=function(n,i){var o=OC[to(n)];return o==ub||o!=b_&&(RC(i)?E_(i):!!i)},to=RA.normalize=function(n){return String(n).replace(xm,".").toLowerCase()},OC=RA.data={},b_=RA.NATIVE="N",ub=RA.POLYFILL="P",zc=RA,S_=nh,cR=GE,C_=bo(bo.bind),rp=function(n,i){return S_(n),void 0===i?n:cR?C_(n,i):function(){return n.apply(i,arguments)}},Wu={},Lm=Hc&&ps(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Bm=Dl,lb=Jr.String,db=Jr.TypeError,ca=function(n){if(Bm(n))return n;throw db(lb(n)+" is not an object")},ON=TA,ih=ca,ip=gf,Fm=Jr.TypeError,Um=Object.defineProperty,OA=Object.getOwnPropertyDescriptor;Wu.f=Hc?Lm?function(n,i,o){if(ih(n),i=ip(i),ih(o),"function"==typeof n&&"prototype"===i&&"value"in o&&"writable"in o&&!o.writable){var c=OA(n,i);c&&c.writable&&(n[i]=o.value,o={configurable:"configurable"in o?o.configurable:c.configurable,enumerable:"enumerable"in o?o.enumerable:c.enumerable,writable:!1})}return Um(n,i,o)}:Um:function(n,i,o){if(ih(n),i=ip(i),ih(o),ON)try{return Um(n,i,o)}catch{}if("get"in o||"set"in o)throw Fm("Accessors not supported");return"value"in o&&(n[i]=o.value),n};var _f=Wu,op=gd,sp=Hc?function(n,i,o){return _f.f(n,i,op(1,o))}:function(n,i,o){return n[i]=o,n},I_=Jr,T_=zs,ap=bo,pb=Ko,w_=lf.f,oh=zc,cp=hf,fb=rp,R_=sp,mb=ws,kA=function(n){var i=function(o,c,h){if(this instanceof i){switch(arguments.length){case 0:return new n;case 1:return new n(o);case 2:return new n(o,c)}return new n(o,c,h)}return T_(n,this,arguments)};return i.prototype=n.prototype,i},ts=function(n,i){var o,c,h,g,p,v,_,y,b=n.target,C=n.global,R=n.stat,N=n.proto,j=C?I_:R?I_[b]:(I_[b]||{}).prototype,Q=C?cp:cp[b]||R_(cp,b,{})[b],$=Q.prototype;for(h in i)o=!oh(C?h:b+(R?".":"#")+h,n.forced)&&j&&mb(j,h),p=Q[h],o&&(v=n.noTargetGet?(y=w_(j,h))&&y.value:j[h]),g=o&&v?v:i[h],o&&typeof p==typeof g||(_=n.bind&&o?fb(g,I_):n.wrap&&o?kA(g):N&&pb(g)?ap(g):g,(n.sham||g&&g.sham||p&&p.sham)&&R_(_,"sham",!0),R_(Q,h,_),N&&(mb(cp,c=b+"Prototype")||R_(cp,c,{}),R_(cp[c],h,g),n.real&&$&&!$[h]&&R_($,h,g)))},gb=Math.ceil,DC=Math.floor,_b=function(n){var i=+n;return i!=i||0===i?0:(i>0?DC:gb)(i)},NA=_b,kC=Math.min,sh=function(n){return function(n){return n>0?kC(NA(n),9007199254740991):0}(n.length)},NC=nh,Ab=Gu,PC=__,O_=sh,DN=Jr.TypeError,vf=function(n){return function(i,o,c,h){NC(o);var g=Ab(i),p=PC(g),v=O_(g),_=n?v-1:0,y=n?-1:1;if(c<2)for(;;){if(_ in p){h=p[_],_+=y;break}if(_+=y,n?_<0:v<=_)throw DN("Reduce of empty array with no initial value")}for(;n?_>=0:v>_;_+=y)_ in p&&(h=o(h,p[_],_,g));return h}},Ni={left:vf(!1),right:vf(!0)},dR=ps,ua=function(n,i){var o=[][n];return!!o&&dR(function(){o.call(null,i||function(){throw 1},1)})},bd="process"==th(Jr.process),MC=Ni.left,hR=pf,D_=bd;ts({target:"Array",proto:!0,forced:!ua("reduce")||!D_&&hR>79&&hR<83},{reduce:function(n){var i=arguments.length;return MC(this,n,i,i>1?arguments[1]:void 0)}});var yb=hf,Ku=function(n){return yb[n+"Prototype"]},Yc=Ku("Array").reduce,Pt=jc,Eb=Yc,Sd=Array.prototype,pR=function(n){var i=n.reduce;return n===Sd||Pt(Sd,n)&&i===Sd.reduce?Eb:i},Oa=pR,kN=Ca,fR=H.String,Da=function(n){if("Symbol"===kN(n))throw TypeError("Cannot convert a Symbol value to a string");return fR(n)},mR=Pc,Pl=function(){var n=mR(this),i="";return n.global&&(i+="g"),n.ignoreCase&&(i+="i"),n.multiline&&(i+="m"),n.dotAll&&(i+="s"),n.unicode&&(i+="u"),n.sticky&&(i+="y"),i},gu=D,Ml=H.RegExp,k_=gu(function(){var n=Ml("a","y");return n.lastIndex=2,null!=n.exec("abcd")}),NN=k_||gu(function(){return!Ml("a","y").sticky}),qc={BROKEN_CARET:k_||gu(function(){var n=Ml("^r","gy");return n.lastIndex=2,null!=n.exec("str")}),MISSED_STICKY:NN,UNSUPPORTED_Y:k_},gR={},_R=vi,JB=um,PN=ri,yR=Pc,MN=we,xN=Object.keys||function(n){return _R(n,JB)};gR.f=O&&!X2?Object.defineProperties:function(n,i){yR(n);for(var o,c=MN(i),h=xN(i),g=h.length,p=0;g>p;)PN.f(n,o=h[p++],c[o]);return n};var _u,LN=Pc,Af=gR,ER=um,BN=Hp,xC=qa,bR=gn,LC=C0("IE_PROTO"),BC=function(){},FC=function(n){return"<script>"+n+"<\/script>"},bb=function(n){n.write(FC("")),n.close();var i=n.parentWindow.Object;return n=null,i},ei=function(){try{_u=new ActiveXObject("htmlfile")}catch{}var n,i;ei=typeof document<"u"?document.domain&&_u?bb(_u):((i=bR("iframe")).style.display="none",xC.appendChild(i),i.src=String("javascript:"),(n=i.contentWindow.document).open(),n.write(FC("document.F=Object")),n.close(),n.F):bb(_u);for(var o=ER.length;o--;)delete ei.prototype[ER[o]];return ei()};BN[LC]=!0;var n,i,En=Object.create||function(n,i){var o;return null!==n?(BC.prototype=LN(n),o=new BC,BC.prototype=null,o[LC]=n):o=ei(),void 0===i?o:Af.f(o,i)},SR=H.RegExp,VC=D(function(){var n=SR(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}),CR=H.RegExp,IR=D(function(){var n=CR("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}),Vm=ie,Sb=re,FN=Da,Ac=Pl,Cb=qc,yc=En,UN=El.get,QC=VC,HC=IR,VN=(0,hi.exports)("native-string-replace",String.prototype.replace),GC=RegExp.prototype.exec,wR=GC,jN=Sb("".charAt),RR=Sb("".indexOf),jm=Sb("".replace),PA=Sb("".slice),WC=(i=/b*/g,Vm(GC,n=/a/,"a"),Vm(GC,i,"a"),0!==n.lastIndex||0!==i.lastIndex),Yu=Cb.BROKEN_CARET,N_=void 0!==/()??/.exec("")[1];(WC||N_||Yu||QC||HC)&&(wR=function(n){var i,o,c,h,g,p,v,_=this,y=UN(_),b=FN(n),C=y.raw;if(C)return C.lastIndex=_.lastIndex,i=Vm(wR,C,b),_.lastIndex=C.lastIndex,i;var R=y.groups,N=Yu&&_.sticky,j=Vm(Ac,_),Q=_.source,$=0,ae=b;if(N&&(j=jm(j,"y",""),-1===RR(j,"g")&&(j+="g"),ae=PA(b,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==jN(b,_.lastIndex-1))&&(Q="(?: "+Q+")",ae=" "+ae,$++),o=new RegExp("^(?:"+Q+")",j)),N_&&(o=new RegExp("^"+Q+"$(?!\\s)",j)),WC&&(c=_.lastIndex),h=Vm(GC,N?o:_,ae),N?h?(h.input=PA(h.input,$),h[0]=PA(h[0],$),h.index=_.lastIndex,_.lastIndex+=h[0].length):_.lastIndex=0:WC&&h&&(_.lastIndex=_.global?h.index+h[0].length:c),N_&&h&&h.length>1&&Vm(VN,h[0],o,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(h[g]=void 0)}),h&&R)for(h.groups=p=yc(null),g=0;g<R.length;g++)p[(v=R[g])[0]]=h[v[1]];return h});var MA=wR;pc({target:"RegExp",proto:!0,forced:/./.exec!==MA},{exec:MA});var up=En,Ib=ri,Tb=wo("unscopables"),wb=Array.prototype;null==wb[Tb]&&Ib.f(wb,Tb,{configurable:!0,value:up(null)});var Qm,OR,DR,KC=!D(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),kR=H,zC=Wa,NR=nt,YC=jp,qC=KC,QN=C0("IE_PROTO"),P_=kR.Object,HN=P_.prototype,JC=qC?P_.getPrototypeOf:function(n){var i=YC(n);if(zC(i,QN))return i[QN];var o=i.constructor;return NR(o)&&i instanceof o?o.prototype:i instanceof P_?HN:null},gt=D,XC=nt,M_=JC,Hm=rd.exports,xA=wo("iterator"),Rb=!1;[].keys&&("next"in(DR=[].keys())?(OR=M_(M_(DR)))!==Object.prototype&&(Qm=OR):Rb=!0),(null==Qm||gt(function(){var n={};return Qm[xA].call(n)!==n}))&&(Qm={}),XC(Qm[xA])||Hm(Qm,xA,function(){return this});var Gm={IteratorPrototype:Qm,BUGGY_SAFARI_ITERATORS:Rb},yf=Gm.IteratorPrototype,LA=En,Wm=ve,x_=Jv,ah=Qh,qu=function(){return this},Ob=pc,$C=ie,Km=nt,eI=JC,tI=Kp,PR=Jv,Db=yl,kb=rd.exports,MR=Qh,xR=Pu.PROPER,nI=Pu.CONFIGURABLE,Jc=Gm.IteratorPrototype,L_=Gm.BUGGY_SAFARI_ITERATORS,zm=wo("iterator"),lp="values",Nb="entries",rI=function(){return this},BR=we,BA=function(n){wb[Tb][n]=!0},B_=Qh,GN=ri.f,WN=O,UR="Array Iterator",iI=El.set,oI=El.getterFor(UR),sI=function(n,i,o,c,h,g,p){!function(n,i,o,c){var h=i+" Iterator";n.prototype=LA(yf,{next:Wm(+!c,o)}),x_(n,h,!1),ah[h]=qu}(o,i,c);var v,_,y,b=function(ae){if(ae===h&&Q)return Q;if(!L_&&ae in N)return N[ae];switch(ae){case"keys":case lp:case Nb:return function(){return new o(this,ae)}}return function(){return new o(this)}},C=i+" Iterator",R=!1,N=n.prototype,j=N[zm]||N["@@iterator"]||h&&N[h],Q=!L_&&j||b(h),$="Array"==i&&N.entries||j;if($&&(v=eI($.call(new n)))!==Object.prototype&&v.next&&(eI(v)!==Jc&&(tI?tI(v,Jc):Km(v[zm])||kb(v,zm,rI)),PR(v,C,!0)),xR&&h==lp&&j&&j.name!==lp&&(nI?Db(N,"name",lp):(R=!0,Q=function(){return $C(j,this)})),h)if(_={values:b(lp),keys:g?Q:b("keys"),entries:b(Nb)},p)for(y in _)(L_||R||!(y in N))&&kb(N,y,_[y]);else Ob({target:i,proto:!0,forced:L_||R},_);return N[zm]!==Q&&kb(N,zm,Q,{name:h}),MR[i]=Q,_}(Array,"Array",function(n,i){iI(this,{type:UR,target:BR(n),index:0,kind:i})},function(){var n=oI(this),i=n.target,o=n.kind,c=n.index++;return!i||c>=i.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:c,done:!1}:"values"==o?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),xl=B_.Arguments=B_.Array;if(BA("keys"),BA("values"),BA("entries"),WN&&"values"!==xl.name)try{GN(xl,"name",{value:"values"})}catch{}var F_=gn("span").classList,aI=F_&&F_.constructor&&F_.constructor.prototype,Mb=H,VR={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},KN=aI===Object.prototype?void 0:aI,U_=sI,FA=yl,cI=wo,As=cI("iterator"),br=cI("toStringTag"),ka=U_.values,Sf=function(n,i){if(n){if(n[As]!==ka)try{FA(n,As,ka)}catch{n[As]=ka}if(n[br]||FA(n,br,i),VR[i])for(var o in U_)if(n[o]!==U_[o])try{FA(n,o,U_[o])}catch{n[o]=U_[o]}}};for(var Xn in VR)Sf(Mb[Xn]&&Mb[Xn].prototype,Xn);Sf(KN,"DOMTokenList");var $n=nt,Cd=zt,Na=Kp,jr=function(n,i,o){var c,h;return Na&&$n(c=i.constructor)&&c!==o&&Cd(h=c.prototype)&&h!==o.prototype&&Na(n,h),n},uI=Da,vu=function(n,i){return void 0===n?arguments.length<2?"":i:uI(n)},UA=zt,Xc=yl,VA=re("".replace),jA=String(Error("zxcasd").stack),Ym=/\n\s*at [^:]*:[^\n]*/,Ec=Ym.test(jA),dp=function(n,i){if(Ec&&"string"==typeof n)for(;i--;)n=VA(n,Ym,"");return n},jR=ve,zN=!D(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",jR(1,7)),7!==n.stack)}),lI=Yn,QA=Wa,qm=yl,$c=Lr,Jm=Kp,QR=Si,xb=jr,YN=vu,qN=function(n,i){UA(i)&&"cause"in i&&Xc(n,"cause",i.cause)},JN=dp,HR=zN,dI=pc,Br=Xp,hI=function(n,i,o,c){var h=c?2:1,g=n.split("."),p=g[g.length-1],v=lI.apply(null,g);if(v){var _=v.prototype;if(QA(_,"cause")&&delete _.cause,!o)return v;var y=lI("Error"),b=i(function(C,R){var N=YN(c?R:C,void 0),j=c?new v(C):new v;return void 0!==N&&qm(j,"message",N),HR&&qm(j,"stack",JN(j.stack,2)),this&&$c(_,this)&&xb(j,this,b),arguments.length>h&&qN(j,arguments[h]),j});b.prototype=_,"Error"!==p&&(Jm?Jm(b,y):QR(b,y,{name:!0})),QR(b,v);try{_.name!==p&&qm(_,"name",p),_.constructor=b}catch{}return b}},Id=H.WebAssembly,V_=7!==Error("e",{cause:7}).cause,Xm=function(n,i){var o={};o[n]=hI(n,i,V_),dI({global:!0,forced:V_},o)},pI=function(n,i){if(Id&&Id[n]){var o={};o[n]=hI("WebAssembly."+n,i,V_),dI({target:"WebAssembly",stat:!0,forced:V_},o)}};Xm("Error",function(n){return function(i){return Br(n,this,arguments)}}),Xm("EvalError",function(n){return function(i){return Br(n,this,arguments)}}),Xm("RangeError",function(n){return function(i){return Br(n,this,arguments)}}),Xm("ReferenceError",function(n){return function(i){return Br(n,this,arguments)}}),Xm("SyntaxError",function(n){return function(i){return Br(n,this,arguments)}}),Xm("TypeError",function(n){return function(i){return Br(n,this,arguments)}}),Xm("URIError",function(n){return function(i){return Br(n,this,arguments)}}),pI("CompileError",function(n){return function(i){return Br(n,this,arguments)}}),pI("LinkError",function(n){return function(i){return Br(n,this,arguments)}}),pI("RuntimeError",function(n){return function(i){return Br(n,this,arguments)}});let $m=!0,HA=!0;function GA(n,i,o){const c=n.match(i);return c&&c.length>=o&&parseInt(c[o],10)}function Cf(n,i,o){if(!n.RTCPeerConnection)return;const c=n.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(p,v){if(p!==i)return h.apply(this,arguments);const _=y=>{const b=o(y);b&&(v.handleEvent?v.handleEvent(b):v(b))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(v,_),h.apply(this,[p,_])};const g=c.removeEventListener;c.removeEventListener=function(p,v){if(p!==i||!this._eventMap||!this._eventMap[i])return g.apply(this,arguments);if(!this._eventMap[i].has(v))return g.apply(this,arguments);const _=this._eventMap[i].get(v);return this._eventMap[i].delete(v),0===this._eventMap[i].size&&delete this._eventMap[i],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[p,_])},Object.defineProperty(c,"on"+i,{get(){return this["_on"+i]},set(p){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),p&&this.addEventListener(i,this["_on"+i]=p)},enumerable:!0,configurable:!0})}function GR(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):($m=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Bb(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(HA=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function fI(){if("object"==typeof window){if($m)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function j_(n,i){HA&&console.warn(n+" is deprecated, please use "+i+" instead.")}function Fb(n){const i={browser:null,version:null};if(void 0===n||!n.navigator)return i.browser="Not a browser.",i;const{navigator:o}=n;if(o.mozGetUserMedia)i.browser="firefox",i.version=GA(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)i.browser="chrome",i.version=GA(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(o.mediaDevices&&o.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=GA(o.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=GA(o.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return i}function If(n){return"[object Object]"===Object.prototype.toString.call(n)}function WR(n){var i;return If(n)?Oa(i=Object.keys(n)).call(i,function(o,c){const h=If(n[c]),g=h?WR(n[c]):n[c],p=h&&!Object.keys(g).length;return void 0===g||p?o:Object.assign(o,{[c]:g})},{}):n}function Zm(n,i,o){const c=o?"outbound-rtp":"inbound-rtp",h=new Map;if(null===i)return h;const g=[];return n.forEach(p=>{"track"===p.type&&p.trackIdentifier===i.id&&g.push(p)}),g.forEach(p=>{n.forEach(v=>{v.type===c&&v.trackId===p.id&&function _(y,b,C){b&&!C.has(b.id)&&(C.set(b.id,b),Object.keys(b).forEach(R=>{R.endsWith("Id")?_(y,y.get(b[R]),C):R.endsWith("Ids")&&b[R].forEach(N=>{_(y,y.get(N),C)})}))}(n,v,h)})}),h}var KR=Ad,WA=(0,Mm.exports)("keys"),KA=function(n){return WA[n]||(WA[n]=KR(n))},Td=!ps(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),Q_=Jr,$a=ws,Tf=Ko,zA=Gu,Ju=Td,no=KA("IE_PROTO"),hp=Q_.Object,eg=hp.prototype,pp=Ju?hp.getPrototypeOf:function(n){var i=zA(n);if($a(i,no))return i[no];var o=i.constructor;return Tf(o)&&i instanceof o?o.prototype:i instanceof hp?eg:null},tg=Ko,ng=Jr.String,rg=Jr.TypeError,ig=bo,og=ca,gI=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,o={};try{(n=ig(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),i=o instanceof Array}catch{}return function(c,h){return og(c),function(n){if("object"==typeof n||tg(n))return n;throw rg("Can't set "+ng(n)+" as a prototype")}(h),i?n(c,h):c.__proto__=h,c}}():void 0),H_={},_I=_b,vI=Math.max,AI=Math.min,YA=function(n,i){var o=_I(n);return o<0?vI(o+i,0):AI(o,i)},yI=Ol,EI=YA,zR=sh,bI=function(n){return function(i,o,c){var h,g=yI(i),p=zR(g),v=EI(c,p);if(n&&o!=o){for(;p>v;)if((h=g[v++])!=h)return!0}else for(;p>v;v++)if((n||v in g)&&g[v]===o)return n||v||0;return!n&&-1}},dr={includes:bI(!0),indexOf:bI(!1)},qA={},ch=ws,Nn=Ol,Ub=dr.indexOf,YR=qA,Cn=bo([].push),xn=function(n,i){var o,c=Nn(n),h=0,g=[];for(o in c)!ch(YR,o)&&ch(c,o)&&Cn(g,o);for(;i.length>h;)ch(c,o=i[h++])&&(~Ub(g,o)||Cn(g,o));return g},oo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qR=xn,uh=oo.concat("length","prototype");H_.f=Object.getOwnPropertyNames||function(n){return qR(n,uh)};var Xu={};Xu.f=Object.getOwnPropertySymbols;var G_=kl,$u=H_,rn=Xu,JR=ca,SI=bo([].concat),so=G_("Reflect","ownKeys")||function(n){var i=$u.f(JR(n)),o=rn.f;return o?SI(i,o(n)):i},JA=ws,XR=so,Au=lf,$R=Wu,Rf={},ii=xn,li=oo,Ys=Object.keys||function(n){return ii(n,li)},CI=Wu,II=ca,lh=Ol,W_=Ys;Rf.f=Hc&&!Lm?Object.defineProperties:function(n,i){II(n);for(var o,c=lh(i),h=W_(i),g=h.length,p=0;g>p;)CI.f(n,o=h[p++],c[o]);return n};var fp,sg=kl("document","documentElement"),Vb=ca,TI=Rf,jb=oo,$A=qA,wd=sg,wI=CC,Qb=KA("IE_PROTO"),K_=function(){},Ll=function(n){return"<script>"+n+"<\/script>"},Za=function(n){n.write(Ll("")),n.close();var i=n.parentWindow.Object;return n=null,i},Zu=function(){try{fp=new ActiveXObject("htmlfile")}catch{}var n,i;Zu=typeof document<"u"?document.domain&&fp?Za(fp):((i=wI("iframe")).style.display="none",wd.appendChild(i),i.src=String("javascript:"),(n=i.contentWindow.document).open(),n.write(Ll("document.F=Object")),n.close(),n.F):Za(fp);for(var o=jb.length;o--;)delete Zu.prototype[jb[o]];return Zu()};$A[Qb]=!0;var Of=Object.create||function(n,i){var o;return null!==n?(K_.prototype=Vb(n),o=new K_,K_.prototype=null,o[Qb]=n):o=Zu(),void 0===i?o:TI.f(o,i)},$N=bo("".replace),ZN=String(Error("zxcasd").stack),RI=/\n\s*at [^:]*:[^\n]*/,ZR=RI.test(ZN),Hb=Dl,eO=sp,zo={},OI=zo,tO=Ns("iterator"),nO=Array.prototype,Gb=function(n){return void 0!==n&&(OI.Array===n||nO[tO]===n)},ag={};ag[Ns("toStringTag")]="z";var Zc="[object z]"===String(ag),z_=Jr,Y_=Zc,Pa=Ko,dh=th,mp=Ns("toStringTag"),rO=z_.Object,gp="Arguments"==dh(function(){return arguments}()),eu=Y_?dh:function(n){var i,o,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(o=function(h,g){try{return h[g]}catch{}}(i=rO(n),mp))?o:gp?dh(i):"Object"==(c=dh(i))&&Pa(i.callee)?"Arguments":c},ys=eu,Fr=Xw,yu=zo,iO=Ns("iterator"),hh=function(n){if(null!=n)return Fr(n,iO)||Fr(n,"@@iterator")||yu[ys(n)]},Bl=Gc,bc=nh,qs=ca,oO=A_,DI=hh,sO=Jr.TypeError,Wb=function(n,i){var o=arguments.length<2?DI(n):i;if(bc(o))return qs(Bl(o,n));throw sO(oO(n)+" is not iterable")},ZA=Gc,kI=ca,Kb=Xw,ph=function(n,i,o){var c,h;kI(n);try{if(!(c=Kb(n,"return"))){if("throw"===i)throw o;return o}c=ZA(c,n)}catch(g){h=!0,c=g}if("throw"===i)throw o;if(h)throw c;return kI(c),o},Df=rp,NI=Gc,PI=ca,aO=A_,cO=Gb,zb=sh,MI=jc,xI=Wb,Nr=hh,Rd=ph,Od=Jr.TypeError,ey=function(n,i){this.stopped=n,this.result=i},LI=ey.prototype,ty=function(n,i,o){var c,h,g,p,v,_,y,C=!(!o||!o.AS_ENTRIES),R=!(!o||!o.IS_ITERATOR),N=!(!o||!o.INTERRUPTED),j=Df(i,o&&o.that),Q=function(ae){return c&&Rd(c,"normal",ae),new ey(!0,ae)},$=function(ae){return C?(PI(ae),N?j(ae[0],ae[1],Q):j(ae[0],ae[1])):N?j(ae,Q):j(ae)};if(R)c=n;else{if(!(h=Nr(n)))throw Od(aO(n)+" is not iterable");if(cO(h)){for(g=0,p=zb(n);p>g;g++)if((v=$(n[g]))&&MI(LI,v))return v;return new ey(!1)}c=xI(n,h)}for(_=c.next;!(y=NI(_,c)).done;){try{v=$(y.value)}catch(ae){Rd(c,"throw",ae)}if("object"==typeof v&&v&&MI(LI,v))return v}return new ey(!1)},uO=eu,lO=Jr.String,el=function(n){if("Symbol"===uO(n))throw TypeError("Cannot convert a Symbol value to a string");return lO(n)},BI=el,dO=gd,FI=!ps(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",dO(1,7)),7!==n.stack)}),hO=ts,pO=Jr,fO=jc,UI=pp,q_=gI,gO=Of,ny=sp,kf=gd,Rs=function(n,i){if(ZR&&"string"==typeof n)for(;i--;)n=$N(n,RI,"");return n},eP=function(n,i){Hb(i)&&"cause"in i&&eO(n,"cause",i.cause)},_O=ty,cg=function(n,i){return void 0===n?arguments.length<2?"":i:BI(n)},VI=FI,tP=Ns("toStringTag"),ry=pO.Error,vO=[].push,Nf=function(n,i){var o,c=arguments.length>2?arguments[2]:void 0,h=fO(Yb,this);q_?o=q_(new ry,h?UI(this):Yb):(o=h?this:gO(Yb),ny(o,tP,"Error")),void 0!==i&&ny(o,"message",cg(i)),VI&&ny(o,"stack",Rs(o.stack,1)),eP(o,c);var g=[];return _O(n,vO,{that:g}),ny(o,"errors",g),o};q_?q_(Nf,ry):function(n,i,o){for(var c=XR(i),h=$R.f,g=Au.f,p=0;p<c.length;p++){var v=c[p];JA(n,v)||o&&JA(o,v)||h(n,v,g(i,v))}}(Nf,ry,{name:!0});var Yb=Nf.prototype=gO(ry.prototype,{constructor:kf(1,Nf),message:kf(1,""),name:kf(1,"AggregateError")});hO({global:!0},{AggregateError:Nf});var fh=Ko,_p=y_,qb=bo(Function.toString);fh(_p.inspectSource)||(_p.inspectSource=function(n){return qb(n)});var ug,lg,Pf,J_=_p.inspectSource,tl=J_,vp=Jr.WeakMap,nP=Ko(vp)&&/native code/.test(tl(vp)),Mf=bo,rP=Dl,ec=sp,Gi=ws,yO=KA,XB=qA,nr="Object already initialized",Sc=Jr.TypeError;if(nP||y_.state){var gh=y_.state||(y_.state=new(0,Jr.WeakMap)),_h=Mf(gh.get),$_=Mf(gh.has),iy=Mf(gh.set);ug=function(n,i){if($_(gh,n))throw new Sc(nr);return i.facade=n,iy(gh,n,i),i},lg=function(n){return _h(gh,n)||{}},Pf=function(n){return $_(gh,n)}}else{var vh=yO("state");XB[vh]=!0,ug=function(n,i){if(Gi(n,vh))throw new Sc(nr);return i.facade=n,ec(n,vh,i),i},lg=function(n){return Gi(n,vh)?n[vh]:{}},Pf=function(n){return Gi(n,vh)}}var ao,EO,Z_,dg={set:ug,get:lg,has:Pf,enforce:function(n){return Pf(n)?lg(n):ug(n,{})},getterFor:function(n){return function(i){var o;if(!rP(i)||(o=lg(i)).type!==n)throw Sc("Incompatible receiver, "+n+" required");return o}}},Dd=Hc,QI=Function.prototype,Ah=Dd&&Object.getOwnPropertyDescriptor,Ap=ws(QI,"name"),HI={EXISTS:Ap,PROPER:Ap&&"something"===function(){}.name,CONFIGURABLE:Ap&&(!Dd||Dd&&Ah(QI,"name").configurable)},iP=sp,ev=function(n,i,o,c){c&&c.enumerable?n[i]=o:iP(n,i,o)},yp=ps,oP=Ko,bO=Of,tv=pp,oy=ev,sy=Ns("iterator"),Jb=!1;[].keys&&("next"in(Z_=[].keys())?(EO=tv(tv(Z_)))!==Object.prototype&&(ao=EO):Jb=!0);var Xb=null==ao||yp(function(){var n={};return ao[sy].call(n)!==n});oP((ao=Xb?{}:bO(ao))[sy])||oy(ao,sy,function(){return this});var GI={IteratorPrototype:ao,BUGGY_SAFARI_ITERATORS:Jb},ay=eu,sP=Zc,aP=Wu.f,cP=sp,SO=ws,CO=Zc?{}.toString:function(){return"[object "+ay(this)+"]"},WI=Ns("toStringTag"),Fl=function(n,i,o,c){if(n){var h=o?n:n.prototype;SO(h,WI)||aP(h,WI,{configurable:!0,value:i}),c&&!sP&&cP(h,"toString",CO)}},nv=GI.IteratorPrototype,cy=Of,uP=gd,$B=Fl,rv=zo,KI=function(){return this},hg=function(n,i,o,c){var h=i+" Iterator";return n.prototype=cy(nv,{next:uP(+!c,o)}),$B(n,h,!1,!0),rv[h]=KI,n},pg=ts,zI=Gc,IO=hg,uy=pp,TO=Fl,wO=ev,YI=zo,iv=HI.PROPER,ov=GI.BUGGY_SAFARI_ITERATORS,sv=Ns("iterator"),ly="values",OO="entries",av=function(){return this},qI=function(n,i,o,c,h,g,p){IO(o,i,c);var v,_,y,b=function(ae){if(ae===h&&Q)return Q;if(!ov&&ae in N)return N[ae];switch(ae){case"keys":case ly:case OO:return function(){return new o(this,ae)}}return function(){return new o(this)}},C=i+" Iterator",R=!1,N=n.prototype,j=N[sv]||N["@@iterator"]||h&&N[h],Q=!ov&&j||b(h),$="Array"==i&&N.entries||j;if($&&(v=uy($.call(new n)))!==Object.prototype&&v.next&&(TO(v,C,!0,!0),YI[C]=av),iv&&h==ly&&j&&j.name!==ly&&(R=!0,Q=function(){return zI(j,this)}),h)if(_={values:b(ly),keys:g?Q:b("keys"),entries:b(OO)},p)for(y in _)(ov||R||!(y in N))&&wO(N,y,_[y]);else pg({target:i,proto:!0,forced:ov||R},_);return p&&N[sv]!==Q&&wO(N,sv,Q,{name:h}),YI[i]=Q,_},DO=Ol,cv=zo,NO=qI,JI="Array Iterator",XI=dg.set,PO=dg.getterFor(JI);NO(Array,"Array",function(n,i){XI(this,{type:JI,target:DO(n),index:0,kind:i})},function(){var n=PO(this),i=n.target,o=n.kind,c=n.index++;return!i||c>=i.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:c,done:!1}:"values"==o?{value:i[c],done:!1}:{value:[c,i[c]],done:!1}},"values"),cv.Arguments=cv.Array;var dy=Jr.Promise,lP=ev,$b=function(n,i,o){for(var c in i)o&&o.unsafe&&n[c]?n[c]=i[c]:lP(n,c,i[c],o);return n},MO=kl,Yo=Wu,$I=Hc,ZI=Ns("species"),hy=jc,eT=Jr.TypeError,uv=function(n,i){if(hy(i,n))return n;throw eT("Incorrect invocation")},tT=Ns("iterator"),Zb=!1;try{var dP=0,xO={next:function(){return{done:!!dP++}},return:function(){Zb=!0}};xO[tT]=function(){return this},Array.from(xO,function(){throw 2})}catch{}var hP=bo,pP=ps,LO=Ko,BO=eu,fP=J_,eS=function(){},tS=[],py=kl("Reflect","construct"),fy=/^\s*(?:class|function)\b/,mP=hP(fy.exec),FO=!fy.exec(eS),my=function(n){if(!LO(n))return!1;try{return py(eS,tS,n),!0}catch{return!1}},UO=function(n){if(!LO(n))return!1;switch(BO(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return FO||!!mP(fy,fP(n))}catch{return!0}};UO.sham=!0;var gy,Eu,_y,fg,mg=!py||pP(function(){var n;return my(my.call)||!my(Object)||!my(function(){n=!0})||n})?UO:my,VO=mg,gP=A_,nS=Jr.TypeError,jO=ca,lv=Ns("species"),rS=function(n,i){var o,c=jO(n).constructor;return void 0===c||null==(o=jO(c)[lv])?i:function(n){if(VO(n))return n;throw nS(gP(n)+" is not a constructor")}(o)},nT=bo([].slice),_P=/(?:ipad|iphone|ipod).*applewebkit/i.test(Pm),bu=Jr,Vo=zs,yh=rp,rT=Ko,iS=ws,vP=ps,oS=sg,QO=nT,iT=CC,HO=_P,GO=bd,oT=bu.setImmediate,sT=bu.clearImmediate,AP=bu.process,Nd=bu.Dispatch,gg=bu.Function,WO=bu.MessageChannel,vy=bu.String,Su=0,Ul={};try{gy=bu.location}catch{}var xf=function(n){if(iS(Ul,n)){var i=Ul[n];delete Ul[n],i()}},aT=function(n){return function(){xf(n)}},KO=function(n){xf(n.data)},zO=function(n){bu.postMessage(vy(n),gy.protocol+"//"+gy.host)};oT&&sT||(oT=function(n){var i=QO(arguments,1);return Ul[++Su]=function(){Vo(rT(n)?n:gg(n),void 0,i)},Eu(Su),Su},sT=function(n){delete Ul[n]},GO?Eu=function(n){AP.nextTick(aT(n))}:Nd&&Nd.now?Eu=function(n){Nd.now(aT(n))}:WO&&!HO?(fg=(_y=new WO).port2,_y.port1.onmessage=KO,Eu=yh(fg.postMessage,fg)):bu.addEventListener&&rT(bu.postMessage)&&!bu.importScripts&&gy&&"file:"!==gy.protocol&&!vP(zO)?(Eu=zO,bu.addEventListener("message",KO,!1)):Eu="onreadystatechange"in iT("script")?function(n){oS.appendChild(iT("script")).onreadystatechange=function(){oS.removeChild(this),xf(n)}}:function(n){setTimeout(aT(n),0)});var Zn,vg,Ay,nl,cT,Eh,uT,sS,dv={set:oT,clear:sT},YO=Jr,qO=/ipad|iphone|ipod/i.test(Pm)&&void 0!==YO.Pebble,la=/web0s(?!.*chrome)/i.test(Pm),Lf=Jr,rl=rp,hv=dv.set,yP=_P,XO=qO,$O=la,co=bd,yy=Lf.MutationObserver||Lf.WebKitMutationObserver,ZO=Lf.document,Bf=Lf.process,a=Lf.Promise,d=(0,lf.f)(Lf,"queueMicrotask"),u=d&&d.value;u||(Zn=function(){var n,i;for(co&&(n=Bf.domain)&&n.exit();vg;){i=vg.fn,vg=vg.next;try{i()}catch(o){throw vg?nl():Ay=void 0,o}}Ay=void 0,n&&n.enter()},yP||co||$O||!yy||!ZO?!XO&&a&&a.resolve?((uT=a.resolve(void 0)).constructor=a,sS=rl(uT.then,uT),nl=function(){sS(Zn)}):co?nl=function(){Bf.nextTick(Zn)}:(hv=rl(hv,Lf),nl=function(){hv(Zn)}):(cT=!0,Eh=ZO.createTextNode(""),new yy(Zn).observe(Eh,{characterData:!0}),nl=function(){Eh.data=cT=!cT}));var f=u||function(n){var i={fn:n,next:void 0};Ay&&(Ay.next=i),vg||(vg=i,nl()),Ay=i},A={},S=nh,T=function(n){var i,o;this.promise=new n(function(c,h){if(void 0!==i||void 0!==o)throw TypeError("Bad Promise constructor");i=c,o=h}),this.resolve=S(i),this.reject=S(o)};A.f=function(n){return new T(n)};var w=ca,M=Dl,B=A,G=function(n,i){if(w(n),M(i)&&i.constructor===n)return i;var o=B.f(n);return(0,o.resolve)(i),o.promise},Z=Jr,ce=function(n){try{return{error:!1,value:n()}}catch(i){return{error:!0,value:i}}},he=function(){this.head=null,this.tail=null};he.prototype={add:function(n){var i={item:n,next:null};this.head?this.tail.next=i:this.head=i,this.tail=i},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var ue,Se,Qe,He="object"==typeof window,Ke=ts,et=Jr,Lt=kl,Gt=Gc,jt=dy,wt=$b,sn=Fl,vn=nh,ln=Ko,Qt=Dl,Bn=uv,gr=J_,At=ty,Be=rS,$e=dv.set,St=f,lt=G,an=A,Hn=ce,_r=he,Qr=dg,tc=zc,bh=He,nu=bd,Cc=pf,Ps=Ns("species"),Ma="Promise",Sh=Qr.getterFor(Ma),Ft=Qr.set,It=Qr.getterFor(Ma),qt=jt,bn=jt&&jt.prototype,Wn=et.TypeError,Ar=et.document,mi=et.process,Pr=an.f,Pi=Pr,Li=!!(Ar&&Ar.createEvent&&et.dispatchEvent),Co=ln(et.PromiseRejectionEvent),Io="unhandledrejection",qo=tc(Ma,function(){var n=gr(qt),i=n!==String(qt);if(!i&&66===Cc||!bn.finally)return!0;if(Cc>=51&&/native code/.test(n))return!1;var o=new qt(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(o.constructor={})[Ps]=c,!(o.then(function(){})instanceof c)||!i&&bh&&!Co}),nc=qo||!function(n,i){if(!i&&!Zb)return!1;var o=!1;try{var c={};c[tT]=function(){return{next:function(){return{done:o=!0}}}},n(c)}catch{}return o}(function(n){qt.all(n).catch(function(){})}),Vl=function(n){var i;return!(!Qt(n)||!ln(i=n.then))&&i},ru=function(n,i){var o,c,h,g=i.value,p=1==i.state,v=p?n.ok:n.fail,_=n.resolve,y=n.reject,b=n.domain;try{v?(p||(2===i.rejection&&aS(i),i.rejection=1),!0===v?o=g:(b&&b.enter(),o=v(g),b&&(b.exit(),h=!0)),o===n.promise?y(Wn("Promise-chain cycle")):(c=Vl(o))?Gt(c,o,_,y):_(o)):y(g)}catch(C){b&&!h&&b.exit(),y(C)}},rc=function(n,i){n.notified||(n.notified=!0,St(function(){for(var o,c=n.reactions;o=c.get();)ru(o,n);n.notified=!1,i&&!n.rejection&&Ch(n)}))},Ep=function(n,i,o){var c,h;Li?((c=Ar.createEvent("Event")).promise=i,c.reason=o,c.initEvent(n,!1,!0),et.dispatchEvent(c)):c={promise:i,reason:o},!Co&&(h=et["on"+n])?h(c):n===Io&&function(n,i){var o=Z.console;o&&o.error&&(1==arguments.length?o.error(n):o.error(n,i))}("Unhandled promise rejection",o)},Ch=function(n){Gt($e,et,function(){var i,o=n.facade,c=n.value;if(bp(n)&&(i=Hn(function(){nu?mi.emit("unhandledRejection",c,o):Ep(Io,o,c)}),n.rejection=nu||bp(n)?2:1,i.error))throw i.value})},bp=function(n){return 1!==n.rejection&&!n.parent},aS=function(n){Gt($e,et,function(){var i=n.facade;nu?mi.emit("rejectionHandled",i):Ep("rejectionhandled",i,n.value)})},Ag=function(n,i,o){return function(c){n(i,c,o)}},Ey=function(n,i,o){n.done||(n.done=!0,o&&(n=o),n.value=i,n.state=2,rc(n,!0))},EP=function(n,i,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===i)throw Wn("Promise can't be resolved itself");var c=Vl(i);c?St(function(){var h={done:!1};try{Gt(c,i,Ag(EP,h,n),Ag(Ey,h,n))}catch(g){Ey(h,g,n)}}):(n.value=i,n.state=1,rc(n,!1))}catch(h){Ey({done:!1},h,n)}}};qo&&(bn=(qt=function(n){Bn(this,bn),vn(n),Gt(ue,this);var i=Sh(this);try{n(Ag(EP,i),Ag(Ey,i))}catch(o){Ey(i,o)}}).prototype,(ue=function(n){Ft(this,{type:Ma,done:!1,notified:!1,parent:!1,reactions:new _r,rejection:!1,state:0,value:void 0})}).prototype=wt(bn,{then:function(n,i){var o=It(this),c=Pr(Be(this,qt));return o.parent=!0,c.ok=!ln(n)||n,c.fail=ln(i)&&i,c.domain=nu?mi.domain:void 0,0==o.state?o.reactions.add(c):St(function(){ru(c,o)}),c.promise},catch:function(n){return this.then(void 0,n)}}),Se=function(){var n=new ue,i=Sh(n);this.promise=n,this.resolve=Ag(EP,i),this.reject=Ag(Ey,i)},an.f=Pr=function(n){return n===qt||n===Qe?new Se(n):Pi(n)}),Ke({global:!0,wrap:!0,forced:qo},{Promise:qt}),sn(qt,Ma,!1,!0),function(n){var i=MO(n);$I&&i&&!i[ZI]&&(0,Yo.f)(i,ZI,{configurable:!0,get:function(){return this}})}(Ma),Qe=Lt(Ma),Ke({target:Ma,stat:!0,forced:qo},{reject:function(n){var i=Pr(this);return Gt(i.reject,void 0,n),i.promise}}),Ke({target:Ma,stat:!0,forced:!0},{resolve:function(n){return lt(this===Qe?qt:this,n)}}),Ke({target:Ma,stat:!0,forced:nc},{all:function(n){var i=this,o=Pr(i),c=o.resolve,h=o.reject,g=Hn(function(){var p=vn(i.resolve),v=[],_=0,y=1;At(n,function(b){var C=_++,R=!1;y++,Gt(p,i,b).then(function(N){R||(R=!0,v[C]=N,--y||c(v))},h)}),--y||c(v)});return g.error&&h(g.value),o.promise},race:function(n){var i=this,o=Pr(i),c=o.reject,h=Hn(function(){var g=vn(i.resolve);At(n,function(p){Gt(g,i,p).then(o.resolve,c)})});return h.error&&c(h.value),o.promise}});var Ij=Gc,Tj=nh,ZB=A,eF=ce,wj=ty;ts({target:"Promise",stat:!0},{allSettled:function(n){var i=this,o=ZB.f(i),c=o.resolve,h=o.reject,g=eF(function(){var p=Tj(i.resolve),v=[],_=0,y=1;wj(n,function(b){var C=_++,R=!1;y++,Ij(p,i,b).then(function(N){R||(R=!0,v[C]={status:"fulfilled",value:N},--y||c(v))},function(N){R||(R=!0,v[C]={status:"rejected",reason:N},--y||c(v))})}),--y||c(v)});return g.error&&h(g.value),o.promise}});var tF=nh,nF=kl,Rj=Gc,Oj=A,rF=ce,Dj=ty,bP="No one promise resolved";ts({target:"Promise",stat:!0},{any:function(n){var i=this,o=nF("AggregateError"),c=Oj.f(i),h=c.resolve,g=c.reject,p=rF(function(){var v=tF(i.resolve),_=[],y=0,b=1,C=!1;Dj(n,function(R){var N=y++,j=!1;b++,Rj(v,i,R).then(function(Q){j||C||(C=!0,h(Q))},function(Q){j||C||(j=!0,_[N]=Q,--b||g(new o(_,bP)))})}),--b||g(new o(_,bP))});return p.error&&g(p.value),c.promise}});var SP=dy,iF=kl,oF=Ko,kj=rS,sF=G;ts({target:"Promise",proto:!0,real:!0,forced:!!SP&&ps(function(){SP.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var i=kj(this,iF("Promise")),o=oF(n);return this.then(o?function(c){return sF(i,n()).then(function(){return c})}:n,o?function(c){return sF(i,n()).then(function(){throw c})}:n)}});var aF=bo,cF=_b,yG=el,EG=tp,bG=aF("".charAt),Nj=aF("".charCodeAt),SG=aF("".slice),Pj=function(n){return function(i,o){var c,h,g=yG(EG(i)),p=cF(o),v=g.length;return p<0||p>=v?n?"":void 0:(c=Nj(g,p))<55296||c>56319||p+1===v||(h=Nj(g,p+1))<56320||h>57343?n?bG(g,p):c:n?SG(g,p,p+2):h-56320+(c-55296<<10)+65536}},Mj={codeAt:Pj(!1),charAt:Pj(!0)},CG=Mj.charAt,eD=el,uF=qI,lT="String Iterator",cS=dg.set,lF=dg.getterFor(lT);uF(String,"String",function(n){cS(this,{type:lT,string:eD(n),index:0})},function(){var n,i=lF(this),o=i.string,c=i.index;return c>=o.length?{value:void 0,done:!0}:(n=CG(o,c),i.index+=n.length,{value:n,done:!1})});var IG=hf.Promise,dF=Jr,tD=eu,Lj=sp,Bj=zo,Sp=Ns("toStringTag");for(var hF in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var pF=dF[hF],Ih=pF&&pF.prototype;Ih&&tD(Ih)!==Sp&&Lj(Ih,Sp,hF),Bj[hF]=Bj.Array}var fF=IG,jn=fF,TG=Wo,wG=O,RG=Pc,Uj=En,Vj=vu,nD=Error.prototype.toString,mF=D(function(){if(wG){var n=Uj(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==nD.call(n))return!0}return"2: 1"!==nD.call({message:1,name:2})||"Error"!==nD.call({})})?function(){var n=RG(this),i=Vj(n.name,"Error"),o=Vj(n.message);return i?o?i+": "+o:i:o}:nD,IP={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},OG=pc,rD=Yn,dT=D,jj=En,gF=ve,gi=ri.f,Qj=gR.f,TP=rd.exports,iD=Wa,Hj=o_,wP=Pc,RP=mF,OP=vu,uS=IP,_F=dp,hT=El,pT=O,pv="DOMException",lS=rD("Error"),Cu=rD(pv)||function(){try{(new(rD("MessageChannel")||function(n){try{if(TG)return Function('return require("'+n+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(n){if("DATA_CLONE_ERR"==n.name&&25==n.code)return n.constructor}}(),oD=lS.prototype,yg=hT.set,Wj=hT.getterFor(pv),DG="stack"in lS(pv),AF=function(n){return iD(uS,n)&&uS[n].m?uS[n].c:0},yF=function(){Hj(this,DP);var n=arguments.length,i=OP(n<1?void 0:arguments[0]),o=OP(n<2?void 0:arguments[1],"Error"),c=AF(o);if(yg(this,{type:pv,name:o,message:i,code:c}),pT||(this.name=o,this.message=i,this.code=c),DG){var h=lS(i);h.name=pv,gi(this,"stack",gF(1,_F(h.stack,1)))}},DP=yF.prototype=jj(oD),EF=function(n){return{enumerable:!0,configurable:!0,get:n}},sD=function(n){return EF(function(){return Wj(this)[n]})};pT&&Qj(DP,{name:sD("name"),message:sD("message"),code:sD("code")}),gi(DP,"constructor",gF(1,yF));var aD=dT(function(){return!(new Cu instanceof lS)}),bF=aD||dT(function(){return oD.toString!==RP||"2: 1"!==String(new Cu(1,2))}),Kj=aD||dT(function(){return 25!==new Cu(1,"DataCloneError").code});OG({global:!0,forced:aD},{DOMException:aD?yF:Cu});var dS=rD(pv),kP=dS.prototype;for(var cD in bF&&Cu===dS&&TP(kP,"toString",RP),Kj&&pT&&Cu===dS&&gi(kP,"code",EF(function(){return AF(wP(this).name)})),uS)if(iD(uS,cD)){var NP=uS[cD],fT=NP.s,PP=gF(6,NP.c);iD(dS,fT)||gi(dS,fT,PP),iD(kP,fT)||gi(kP,fT,PP)}var SF=pc,uD=Yn,by=ve,hS=ri.f,MP=Wa,zj=o_,kG=jr,Yj=vu,CF=IP,NG=dp,mT="DOMException",Ff=uD("Error"),lD=uD(mT),xP=function(){zj(this,PG);var n=arguments.length,i=Yj(n<1?void 0:arguments[0]),o=Yj(n<2?void 0:arguments[1],"Error"),c=new lD(i,o),h=Ff(i);return h.name=mT,hS(c,"stack",by(1,NG(h.stack,1))),kG(c,this,xP),c},PG=xP.prototype=lD.prototype,MG="stack"in Ff(mT),xG="stack"in new lD(1,2),qj=MG&&!xG;SF({global:!0,forced:qj},{DOMException:qj?xP:lD});var dD=uD(mT),IF=dD.prototype;if(IF.constructor!==dD)for(var gT in hS(IF,"constructor",by(1,dD)),CF)if(MP(CF,gT)){var TF=CF[gT],wF=TF.s;MP(dD,wF)||hS(dD,wF,by(6,TF.c))}var LP="DOMException";Jv(Yn(LP),LP);var fv=re,BP=rd.exports,FP=MA,hD=D,RF=wo,UP=yl,VP=RF("species"),pS=RegExp.prototype,OF=re,LG=na,BG=Da,FG=qe,DF=OF("".charAt),kF=OF("".charCodeAt),Jj=OF("".slice),NF=function(n){return function(i,o){var c,h,g=BG(FG(i)),p=LG(o),v=g.length;return p<0||p>=v?n?"":void 0:(c=kF(g,p))<55296||c>56319||p+1===v||(h=kF(g,p+1))<56320||h>57343?n?DF(g,p):c:n?Jj(g,p,p+2):h-56320+(c-55296<<10)+65536}},Xj=(NF(!1),NF(!0)),pD=re,PF=jp,MF=Math.floor,jP=pD("".charAt),$j=pD("".replace),fD=pD("".slice),mD=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,UG=/\$([$&'`]|\d{1,2})/g,QP=ie,_T=Pc,Zj=nt,e8=xe,VG=MA,jG=H.TypeError,t8=Xp,xF=ie,fS=re,HG=D,GG=Pc,WG=nt,KG=na,n8=sd,vT=Da,zG=qe,YG=function(n,i,o){return i+(o?Xj(n,i).length:1)},qG=Ne,JG=function(n,i,o,c,h,g){var p=o+n.length,v=c.length,_=UG;return void 0!==h&&(h=PF(h),_=mD),$j(g,_,function(y,b){var C;switch(jP(b,0)){case"$":return"$";case"&":return n;case"`":return fD(i,0,o);case"'":return fD(i,p);case"<":C=h[fD(b,1,-1)];break;default:var R=+b;if(0===R)return y;if(R>v){var N=MF(R/10);return 0===N?y:N<=v?void 0===c[N-1]?jP(b,1):c[N-1]+jP(b,1):y}C=c[R-1]}return void 0===C?"":C})},XG=function(n,i){var o=n.exec;if(Zj(o)){var c=QP(o,n,i);return null!==c&&_T(c),c}if("RegExp"===e8(n))return QP(VG,n,i);throw jG("RegExp#exec called on incompatible receiver")},mS=wo("replace"),Uf=Math.max,$G=Math.min,r8=fS([].concat),HP=fS([].push),Mi=fS("".indexOf),GP=fS("".slice),i8="$0"==="a".replace(/./,"$0"),o8=!!/./[mS]&&""===/./[mS]("a","$0");!function(n,i,o,c){var h=RF(n),g=!hD(function(){var y={};return y[h]=function(){return 7},7!=""[n](y)}),p=g&&!hD(function(){var y=!1,b=/a/;return"split"===n&&((b={}).constructor={},b.constructor[VP]=function(){return b},b.flags="",b[h]=/./[h]),b.exec=function(){return y=!0,null},b[h](""),!y});if(!g||!p||o){var v=fv(/./[h]),_=i(h,""[n],function(y,b,C,R,N){var j=fv(y),Q=b.exec;return Q===FP||Q===pS.exec?g&&!N?{done:!0,value:v(b,C,R)}:{done:!0,value:j(C,b,R)}:{done:!1}});BP(String.prototype,n,_[0]),BP(pS,h,_[1])}c&&UP(pS[h],"sham",!0)}("replace",function(n,i,o){var c=o8?"$":"$0";return[function(h,g){var p=zG(this),v=null==h?void 0:qG(h,mS);return v?xF(v,h,p,g):xF(i,vT(p),h,g)},function(h,g){var p=GG(this),v=vT(h);if("string"==typeof g&&-1===Mi(g,c)&&-1===Mi(g,"$<")){var _=o(i,p,v,g);if(_.done)return _.value}var y=WG(g);y||(g=vT(g));var b=p.global;if(b){var C=p.unicode;p.lastIndex=0}for(var R=[];;){var N=XG(p,v);if(null===N||(HP(R,N),!b))break;""===vT(N[0])&&(p.lastIndex=YG(v,n8(p.lastIndex),C))}for(var j,Q="",$=0,ae=0;ae<R.length;ae++){for(var fe=vT((N=R[ae])[0]),Ae=Uf($G(KG(N.index),v.length),0),Re=[],tt=1;tt<N.length;tt++)HP(Re,void 0===(j=N[tt])?j:String(j));var Tt=N.groups;if(y){var Mt=r8([fe],Re,Ae,v);void 0!==Tt&&HP(Mt,Tt);var Ct=vT(t8(g,void 0,Mt))}else Ct=JG(fe,v,Ae,Re,Tt,g);Ae>=$&&(Q+=GP(v,$,Ae)+Ct,$=Ae+fe.length)}return Q+GP(v,$)}]},!!HG(function(){var n=/./;return n.exec=function(){var i=[];return i.groups={a:"7"},i},"7"!=="".replace(n,"$<a>")})||!i8||o8);var LF=zt,BF=xe,s8=wo("match"),FF=O,gD=H,Th=re,_D=$d,a8=jr,c8=yl,ZG=ri.f,UF=sm.f,VF=Lr,WP=Da,jF=Pl,il=qc,xa=rd.exports,da=D,Wi=Wa,Ms=El.enforce,Xr=hm,l8=VC,QF=IR,d8=wo("match"),Eg=gD.RegExp,gS=Eg.prototype,h8=gD.SyntaxError,eW=Th(jF),tW=Th(gS.exec),Sy=Th("".charAt),AT=Th("".replace),yT=Th("".indexOf),wh=Th("".slice),KP=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,_S=/a/g,HF=/a/g,nW=new Eg(_S)!==_S,GF=il.MISSED_STICKY,p8=il.UNSUPPORTED_Y;if(_D("RegExp",FF&&(!nW||GF||l8||QF||da(function(){return HF[d8]=!1,Eg(_S)!=_S||Eg(HF)==HF||"/a/i"!=Eg(_S,"i")})))){for(var mv=function(n,i){var o,c,h,g,p,v,_=VF(gS,this),y=function(n){var i;return LF(n)&&(void 0!==(i=n[s8])?!!i:"RegExp"==BF(n))}(n),b=void 0===i,C=[],R=n;if(!_&&y&&b&&n.constructor===mv)return n;if((y||VF(gS,n))&&(n=n.source,b&&(i="flags"in R?R.flags:eW(R))),n=void 0===n?"":WP(n),i=void 0===i?"":WP(i),R=n,l8&&"dotAll"in _S&&(c=!!i&&yT(i,"s")>-1)&&(i=AT(i,/s/g,"")),o=i,GF&&"sticky"in _S&&(h=!!i&&yT(i,"y")>-1)&&p8&&(i=AT(i,/y/g,"")),QF&&(n=(g=function(N){for(var j,Q=N.length,$=0,ae="",fe=[],Ae={},Re=!1,tt=!1,Tt=0,Mt="";$<=Q;$++){if("\\"===(j=Sy(N,$)))j+=Sy(N,++$);else if("]"===j)Re=!1;else if(!Re)switch(!0){case"["===j:Re=!0;break;case"("===j:tW(KP,wh(N,$+1))&&($+=2,tt=!0),ae+=j,Tt++;continue;case">"===j&&tt:if(""===Mt||Wi(Ae,Mt))throw new h8("Invalid capture group name");Ae[Mt]=!0,fe[fe.length]=[Mt,Tt],tt=!1,Mt="";continue}tt?Mt+=j:ae+=j}return[ae,fe]}(n))[0],C=g[1]),p=a8(Eg(n,i),_?this:gS,mv),(c||h||C.length)&&(v=Ms(p),c&&(v.dotAll=!0,v.raw=mv(function(N){for(var j,Q=N.length,$=0,ae="",fe=!1;$<=Q;$++)"\\"!==(j=Sy(N,$))?fe||"."!==j?("["===j?fe=!0:"]"===j&&(fe=!1),ae+=j):ae+="[\\s\\S]":ae+=j+Sy(N,++$);return ae}(n),o)),h&&(v.sticky=!0),C.length&&(v.groups=C)),n!==R)try{c8(p,"source",""===R?"(?:)":R)}catch{}return p},f8=function(n){n in mv||ZG(mv,n,{configurable:!0,get:function(){return Eg[n]},set:function(i){Eg[n]=i}})},m8=UF(Eg),Pd=0;m8.length>Pd;)f8(m8[Pd++]);gS.constructor=mv,mv.prototype=gS,xa(gD,"RegExp",mv)}Xr("RegExp");var v8=xe,ET=El.get,KF=RegExp.prototype,ic=H.TypeError;O&&VC&&(0,ri.f)(KF,"dotAll",{configurable:!0,get:function(){if(this!==KF){if("RegExp"===v8(this))return!!ET(this).dotAll;throw ic("Incompatible receiver, RegExp required")}}});const ti=fI;function Oi(n,i){const o=n&&n.navigator;if(!o.mediaDevices)return;const c=function(p){if("object"!=typeof p||p.mandatory||p.optional)return p;const v={};return Object.keys(p).forEach(_=>{if("require"===_||"advanced"===_||"mediaSource"===_)return;const y="object"==typeof p[_]?p[_]:{ideal:p[_]};void 0!==y.exact&&"number"==typeof y.exact&&(y.min=y.max=y.exact);const b=function(C,R){return C?C+R.charAt(0).toUpperCase()+R.slice(1):"deviceId"===R?"sourceId":R};if(void 0!==y.ideal){v.optional=v.optional||[];let C={};"number"==typeof y.ideal?(C[b("min",_)]=y.ideal,v.optional.push(C),C={},C[b("max",_)]=y.ideal,v.optional.push(C)):(C[b("",_)]=y.ideal,v.optional.push(C))}void 0!==y.exact&&"number"!=typeof y.exact?(v.mandatory=v.mandatory||{},v.mandatory[b("",_)]=y.exact):["min","max"].forEach(C=>{void 0!==y[C]&&(v.mandatory=v.mandatory||{},v.mandatory[b(C,_)]=y[C])})}),p.advanced&&(v.optional=(v.optional||[]).concat(p.advanced)),v},h=function(p,v){if(i.version>=61)return v(p);if((p=JSON.parse(JSON.stringify(p)))&&"object"==typeof p.audio){const _=function(y,b,C){b in y&&!(C in y)&&(y[C]=y[b],delete y[b])};_((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),_(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=c(p.audio)}if(p&&"object"==typeof p.video){let _=p.video.facingMode;_=_&&("object"==typeof _?_:{ideal:_});const y=i.version<66;if(_&&("user"===_.exact||"environment"===_.exact||"user"===_.ideal||"environment"===_.ideal)&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||y)){let b;if(delete p.video.facingMode,"environment"===_.exact||"environment"===_.ideal?b=["back","rear"]:"user"!==_.exact&&"user"!==_.ideal||(b=["front"]),b)return o.mediaDevices.enumerateDevices().then(C=>{let R=(C=C.filter(N=>"videoinput"===N.kind)).find(N=>b.some(j=>N.label.toLowerCase().includes(j)));return!R&&C.length&&b.includes("back")&&(R=C[C.length-1]),R&&(p.video.deviceId=_.exact?{exact:R.deviceId}:{ideal:R.deviceId}),p.video=c(p.video),ti("chrome: "+JSON.stringify(p)),v(p)})}p.video=c(p.video)}return ti("chrome: "+JSON.stringify(p)),v(p)},g=function(p){return i.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=function(p,v,_){h(p,y=>{o.webkitGetUserMedia(y,v,b=>{_&&_(g(b))})})}.bind(o),o.mediaDevices.getUserMedia){const p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(v){return h(v,_=>p(_).then(y=>{if(_.audio&&!y.getAudioTracks().length||_.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return y},y=>jn.reject(g(y))))}}}function zF(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function bT(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=h,g.transceiver={receiver:h},g.streams=[o.stream],this.dispatchEvent(g)}),o.stream.getTracks().forEach(c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=h,g.transceiver={receiver:h},g.streams=[o.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else Cf(n,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function Vf(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const i=function(h,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?h.createDTMFSender(g):null),this._dtmf},_pc:h}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,v){let _=h.apply(this,arguments);return _||(_=i(this,p),this._senders.push(_)),_};const g=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){g.apply(this,arguments);const v=this._senders.indexOf(p);-1!==v&&this._senders.splice(v,1)}}const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],o.apply(this,[h]),h.getTracks().forEach(g=>{this._senders.push(i(this,g))})};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],c.apply(this,[h]),h.getTracks().forEach(g=>{const p=this._senders.find(v=>v.track===g);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=i.apply(this,[]);return o.forEach(c=>c._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function ST(n){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,c,h]=arguments;if(arguments.length>0&&"function"==typeof o)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof o))return i.apply(this,[]);const g=function(v){const _={};return v.result().forEach(y=>{const b={id:y.id,timestamp:y.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[y.type]||y.type};y.names().forEach(C=>{b[C]=y.stat(C)}),_[b.id]=b}),_},p=function(v){return new Map(Object.keys(v).map(_=>[_,v[_]]))};return arguments.length>=2?i.apply(this,[function(_){c(p(g(_)))},o]):new jn((v,_)=>{i.apply(this,[function(y){v(p(g(y)))},_])}).then(c,h)}}function Rh(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const h=o.apply(this,[]);return h.forEach(g=>g._pc=this),h});const c=n.RTCPeerConnection.prototype.addTrack;c&&(n.RTCPeerConnection.prototype.addTrack=function(){const h=c.apply(this,arguments);return h._pc=this,h}),n.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(g=>Zm(g,h.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const c=o.apply(this,[]);return c.forEach(h=>h._pc=this),c}),Cf(n,"track",c=>(c.receiver._pc=c.srcElement,c)),n.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>Zm(h,c.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let c,h,g;return this.getSenders().forEach(p=>{p.track===o&&(c?g=!0:c=p)}),this.getReceivers().forEach(p=>(p.track===o&&(h?g=!0:h=p),p.track===o)),g||c&&h?jn.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():jn.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function YF(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(g,p){if(!p)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=i.apply(this,arguments);return this._shimmedLocalStreams[p.id]?-1===this._shimmedLocalStreams[p.id].indexOf(v)&&this._shimmedLocalStreams[p.id].push(v):this._shimmedLocalStreams[p.id]=[p,v],v};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(_=>{if(this.getSenders().find(y=>y.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();o.apply(this,arguments);const v=this.getSenders().filter(_=>-1===p.indexOf(_));this._shimmedLocalStreams[g.id]=[g].concat(v)};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const v=this._shimmedLocalStreams[p].indexOf(g);-1!==v&&this._shimmedLocalStreams[p].splice(v,1),1===this._shimmedLocalStreams[p].length&&delete this._shimmedLocalStreams[p]}),h.apply(this,arguments)}}function ha(n,i){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&i.version>=65)return YF(n);const o=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const y=o.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(b=>this._reverseStreams[b.id])};const c=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const b=new n.MediaStream(y.getTracks());this._streams[y.id]=b,this._reverseStreams[b.id]=y,y=b}c.apply(this,[y])};const h=n.RTCPeerConnection.prototype.removeStream;function g(y,b){let C=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(R=>{const N=y._reverseStreams[R];C=C.replace(new RegExp(y._streams[N.id].id,"g"),N.id)}),new RTCSessionDescription({type:b.type,sdp:C})}function p(y,b){let C=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(R=>{const N=y._reverseStreams[R],j=y._streams[N.id];C=C.replace(new RegExp(N.id,"g"),j.id)}),new RTCSessionDescription({type:b.type,sdp:C})}n.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},n.RTCPeerConnection.prototype.addTrack=function(y,b){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const C=[].slice.call(arguments,1);if(1!==C.length||!C[0].getTracks().find(j=>j===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const N=this._streams[b.id];if(N)N.addTrack(y),jn.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new n.MediaStream([y]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===y)},["createOffer","createAnswer"].forEach(function(y){const b=n.RTCPeerConnection.prototype[y],C={[y](){const R=arguments;return arguments.length&&"function"==typeof arguments[0]?b.apply(this,[N=>{const j=g(this,N);R[0].apply(null,[j])},N=>{R[1]&&R[1].apply(null,N)},arguments[2]]):b.apply(this,arguments).then(N=>g(this,N))}};n.RTCPeerConnection.prototype[y]=C[y]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const _=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const y=_.get.apply(this);return""===y.type?y:g(this,y)}}),n.RTCPeerConnection.prototype.removeTrack=function(y){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(y._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let b;this._streams=this._streams||{},Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(R=>y.track===R)&&(b=this._streams[C])}),b&&(1===b.getTracks().length?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function YP(n,i){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=n.RTCPeerConnection.prototype[o],h={[o](){return arguments[0]=new("addIceCandidate"===o?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=h[o]})}function ns(n,i){Cf(n,"negotiationneeded",o=>{const c=o.target;if(!(i.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return o})}var qF=Object.freeze({__proto__:null,shimMediaStream:zF,shimOnTrack:bT,shimGetSendersWithDtmf:Vf,shimGetStats:ST,shimSenderReceiverGetStats:Rh,shimAddTrackRemoveTrackWithNative:YF,shimAddTrackRemoveTrack:ha,shimPeerConnection:YP,fixNegotiationNeeded:ns,shimGetUserMedia:Oi,shimGetDisplayMedia:function(n,i){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&("function"==typeof i?n.navigator.mediaDevices.getDisplayMedia=function(o){return i(o).then(c=>{const h=o.video&&o.video.width,g=o.video&&o.video.height;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:o.video&&o.video.frameRate||3}},h&&(o.video.mandatory.maxWidth=h),g&&(o.video.mandatory.maxHeight=g),n.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),CT={exports:{}};!function(n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(o){return o.trim().split("\n").map(function(c){return c.trim()})},i.splitSections=function(o){return o.split("\nm=").map(function(c,h){return(h>0?"m="+c:c).trim()+"\r\n"})},i.getDescription=function(o){var c=i.splitSections(o);return c&&c[0]},i.getMediaSections=function(o){var c=i.splitSections(o);return c.shift(),c},i.matchPrefix=function(o,c){return i.splitLines(o).filter(function(h){return 0===h.indexOf(c)})},i.parseCandidate=function(o){for(var c,h={foundation:(c=0===o.indexOf("a=candidate:")?o.substring(12).split(" "):o.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},i.writeCandidate=function(o){var c=[];c.push(o.foundation),c.push(o.component),c.push(o.protocol.toUpperCase()),c.push(o.priority),c.push(o.address||o.ip),c.push(o.port);var h=o.type;return c.push("typ"),c.push(h),"host"!==h&&o.relatedAddress&&o.relatedPort&&(c.push("raddr"),c.push(o.relatedAddress),c.push("rport"),c.push(o.relatedPort)),o.tcpType&&"tcp"===o.protocol.toLowerCase()&&(c.push("tcptype"),c.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(c.push("ufrag"),c.push(o.usernameFragment||o.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(o){return o.substr(14).split(" ")},i.parseRtpMap=function(o){var c=o.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},i.writeRtpMap=function(o){var c=o.payloadType;void 0!==o.preferredPayloadType&&(c=o.preferredPayloadType);var h=o.channels||o.numChannels||1;return"a=rtpmap:"+c+" "+o.name+"/"+o.clockRate+(1!==h?"/"+h:"")+"\r\n"},i.parseExtmap=function(o){var c=o.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&"sendrecv"!==o.direction?"/"+o.direction:"")+" "+o.uri+"\r\n"},i.parseFmtp=function(o){for(var c,h={},g=o.substr(o.indexOf(" ")+1).split(";"),p=0;p<g.length;p++)h[(c=g[p].trim().split("="))[0].trim()]=c[1];return h},i.writeFmtp=function(o){var c="",h=o.payloadType;if(void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){var g=[];Object.keys(o.parameters).forEach(function(p){g.push(o.parameters[p]?p+"="+o.parameters[p]:p)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(o){var c=o.substr(o.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(o){var c="",h=o.payloadType;return void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(o){var c=o.indexOf(" "),h={ssrc:parseInt(o.substr(7,c-7),10)},g=o.indexOf(":",c);return g>-1?(h.attribute=o.substr(c+1,g-c-1),h.value=o.substr(g+1)):h.attribute=o.substr(c+1),h},i.parseSsrcGroup=function(o){var c=o.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},i.getMid=function(o){var c=i.matchPrefix(o,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(o){var c=o.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(o,c){return{role:"auto",fingerprints:i.matchPrefix(o+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(o,c){var h="a=setup:"+c+"\r\n";return o.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},i.getIceParameters=function(o,c){var h=i.splitLines(o);return{usernameFragment:(h=h.concat(i.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:h.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(o){return"a=ice-ufrag:"+o.usernameFragment+"\r\na=ice-pwd:"+o.password+"\r\n"},i.parseRtpParameters=function(o){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=i.splitLines(o)[0].split(" "),g=3;g<h.length;g++){var p=h[g],v=i.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(v){var _=i.parseRtpMap(v),y=i.matchPrefix(o,"a=fmtp:"+p+" ");switch(_.parameters=y.length?i.parseFmtp(y[0]):{},_.rtcpFeedback=i.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(o,"a=extmap:").forEach(function(b){c.headerExtensions.push(i.parseExtmap(b))}),c},i.writeRtpDescription=function(o,c){var h="";h+="m="+o+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(p){return void 0!==p.preferredPayloadType?p.preferredPayloadType:p.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(p){h+=i.writeRtpMap(p),h+=i.writeFmtp(p),h+=i.writeRtcpFb(p)});var g=0;return c.codecs.forEach(function(p){p.maxptime>g&&(g=p.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(p){h+=i.writeExtmap(p)}),h},i.parseRtpEncodingParameters=function(o){var c,h=[],g=i.parseRtpParameters(o),p=-1!==g.fecMechanisms.indexOf("RED"),v=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(o,"a=ssrc:").map(function(R){return i.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),y=_.length>0&&_[0].ssrc,b=i.matchPrefix(o,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(N){return parseInt(N,10)})});b.length>0&&b[0].length>1&&b[0][0]===y&&(c=b[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var N={ssrc:y,codecPayloadType:parseInt(R.parameters.apt,10)};y&&c&&(N.rtx={ssrc:c}),h.push(N),p&&((N=JSON.parse(JSON.stringify(N))).fec={ssrc:y,mechanism:v?"red+ulpfec":"red"},h.push(N))}}),0===h.length&&y&&h.push({ssrc:y});var C=i.matchPrefix(o,"b=");return C.length&&(C=0===C[0].indexOf("b=TIAS:")?parseInt(C[0].substr(7),10):0===C[0].indexOf("b=AS:")?1e3*parseInt(C[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=C})),h},i.parseRtcpParameters=function(o){var c={},h=i.matchPrefix(o,"a=ssrc:").map(function(v){return i.parseSsrcMedia(v)}).filter(function(v){return"cname"===v.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=i.matchPrefix(o,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var p=i.matchPrefix(o,"a=rtcp-mux");return c.mux=p.length>0,c},i.parseMsid=function(o){var c,h=i.matchPrefix(o,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(o,"a=ssrc:").map(function(p){return i.parseSsrcMedia(p)}).filter(function(p){return"msid"===p.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(o,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(o||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(o,c,h,g){var p=i.writeRtpDescription(o.kind,c);if(p+=i.writeIceParameters(o.iceGatherer.getLocalParameters()),p+=i.writeDtlsParameters(o.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),p+="a=mid:"+o.mid+"\r\n",p+=o.direction?"a="+o.direction+"\r\n":o.rtpSender&&o.rtpReceiver?"a=sendrecv\r\n":o.rtpSender?"a=sendonly\r\n":o.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",o.rtpSender){var v="msid:"+g.id+" "+o.rtpSender.track.id+"\r\n";p+="a="+v,p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" "+v,o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" "+v,p+="a=ssrc-group:FID "+o.sendEncodingParameters[0].ssrc+" "+o.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",o.rtpSender&&o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),p},i.getDirection=function(o,c){for(var h=i.splitLines(o),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(o){return i.splitLines(o)[0].split(" ")[0].substr(2)},i.isRejected=function(o){return"0"===o.split(" ",2)[1]},i.parseMLine=function(o){var c=i.splitLines(o)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(o){var c=i.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(o){if("string"!=typeof o||0===o.length)return!1;for(var c=i.splitLines(o),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=i}(CT);var oi=CT.exports;function IT(n,i,o,c,h){var g=oi.writeRtpDescription(n.kind,i);if(g+=oi.writeIceParameters(n.iceGatherer.getLocalParameters()),g+=oi.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),"offer"===o?"actpass":h||"active"),g+="a=mid:"+n.mid+"\r\n",g+=n.rtpSender&&n.rtpReceiver?"a=sendrecv\r\n":n.rtpSender?"a=sendonly\r\n":n.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",n.rtpSender){var p=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=p;var v="msid:"+(c?c.id:"-")+" "+p+"\r\n";g+="a="+v,g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+v,n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+v,g+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+oi.localCName+"\r\n",n.rtpSender&&n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+oi.localCName+"\r\n"),g}function vD(n,i){var o={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,p){g=parseInt(g,10);for(var v=0;v<p.length;v++)if(p[v].payloadType===g||p[v].preferredPayloadType===g)return p[v]},h=function(g,p,v,_){var y=c(g.parameters.apt,v),b=c(p.parameters.apt,_);return y&&b&&y.name.toLowerCase()===b.name.toLowerCase()};return n.codecs.forEach(function(g){for(var p=0;p<i.codecs.length;p++){var v=i.codecs[p];if(g.name.toLowerCase()===v.name.toLowerCase()&&g.clockRate===v.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&v.parameters.apt&&!h(g,v,n.codecs,i.codecs))continue;(v=JSON.parse(JSON.stringify(v))).numChannels=Math.min(g.numChannels,v.numChannels),o.codecs.push(v),v.rtcpFeedback=v.rtcpFeedback.filter(function(_){for(var y=0;y<g.rtcpFeedback.length;y++)if(g.rtcpFeedback[y].type===_.type&&g.rtcpFeedback[y].parameter===_.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(g){for(var p=0;p<i.headerExtensions.length;p++){var v=i.headerExtensions[p];if(g.uri===v.uri){o.headerExtensions.push(v);break}}}),o}function qP(n,i,o){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[i][n].indexOf(o)}function TT(n,i){var o=n.getRemoteCandidates().find(function(c){return i.foundation===c.foundation&&i.ip===c.ip&&i.port===c.port&&i.priority===c.priority&&i.protocol===c.protocol&&i.type===c.type});return o||n.addRemoteCandidate(i),!o}function oc(n,i){var o=new Error(i);return o.name=n,o.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],o}function JF(n){const i=n&&n.navigator,o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(c){return o(c).catch(h=>{return jn.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=h).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function XP(n){"getDisplayMedia"in n.navigator&&n.navigator.mediaDevices&&(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function $P(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(c){return c}),n.RTCSessionDescription||(n.RTCSessionDescription=function(c){return c}),i.version<15025)){const c=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(h){c.set.call(this,h);const g=new Event("enabled");g.enabled=h,this.dispatchEvent(g)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const o=function(n,i){function o(p,v){v.addTrack(p),v.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:p}))}function c(p,v,_,y){var b=new Event("track");b.track=v,b.receiver=_,b.transceiver={receiver:_},b.streams=y,n.setTimeout(function(){p._dispatchEvent("track",b)})}var h=function(p){var b,C,R,v=this,_=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(b){v[b]=_[b].bind(_)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",p=JSON.parse(JSON.stringify(p||{})),this.usingBundle="max-bundle"===p.bundlePolicy,"negotiate"===p.rtcpMuxPolicy)throw oc("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(p.rtcpMuxPolicy||(p.rtcpMuxPolicy="require"),p.iceTransportPolicy){case"all":case"relay":break;default:p.iceTransportPolicy="all"}switch(p.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:p.bundlePolicy="balanced"}if(p.iceServers=(b=p.iceServers||[],C=i,R=!1,(b=JSON.parse(JSON.stringify(b))).filter(function(N){if(N&&(N.urls||N.url)){var j=N.urls||N.url;N.url&&!N.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var Q="string"==typeof j;return Q&&(j=[j]),j=j.filter(function($){return 0!==$.indexOf("turn:")||-1===$.indexOf("transport=udp")||-1!==$.indexOf("turn:[")||R?0===$.indexOf("stun:")&&C>=14393&&-1===$.indexOf("?transport=udp"):(R=!0,!0)}),delete N.url,N.urls=Q?j[0]:j,!!j.length}})),this._iceGatherers=[],p.iceCandidatePoolSize)for(var y=p.iceCandidatePoolSize;y>0;y--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:p.iceServers,gatherPolicy:p.iceTransportPolicy}));else p.iceCandidatePoolSize=0;this._config=p,this.transceivers=[],this._sdpSessionId=oi.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(h.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(h.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(p,v){this._isClosed||(this.dispatchEvent(v),"function"==typeof this["on"+p]&&this["on"+p](v))},h.prototype._emitGatheringStateChange=function(){var p=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",p)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(p,v){var y={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:p,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)y.iceTransport=this.transceivers[0].iceTransport,y.dtlsTransport=this.transceivers[0].dtlsTransport;else{var b=this._createIceAndDtlsTransports();y.iceTransport=b.iceTransport,y.dtlsTransport=b.dtlsTransport}return v||this.transceivers.push(y),y},h.prototype.addTrack=function(p,v){if(this._isClosed)throw oc("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var _;if(this.transceivers.find(function(b){return b.track===p}))throw oc("InvalidAccessError","Track already exists.");for(var y=0;y<this.transceivers.length;y++)this.transceivers[y].track||this.transceivers[y].kind!==p.kind||(_=this.transceivers[y]);return _||(_=this._createTransceiver(p.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(v)&&this.localStreams.push(v),_.track=p,_.stream=v,_.rtpSender=new n.RTCRtpSender(p,_.dtlsTransport),_.rtpSender},h.prototype.addStream=function(p){var v=this;if(i>=15025)p.getTracks().forEach(function(y){v.addTrack(y,p)});else{var _=p.clone();p.getTracks().forEach(function(y,b){var C=_.getTracks()[b];y.addEventListener("enabled",function(R){C.enabled=R.enabled})}),_.getTracks().forEach(function(y){v.addTrack(y,_)})}},h.prototype.removeTrack=function(p){if(this._isClosed)throw oc("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(p instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var v=this.transceivers.find(function(y){return y.rtpSender===p});if(!v)throw oc("InvalidAccessError","Sender was not created by this connection.");var _=v.stream;v.rtpSender.stop(),v.rtpSender=null,v.track=null,v.stream=null,-1===this.transceivers.map(function(y){return y.stream}).indexOf(_)&&this.localStreams.indexOf(_)>-1&&this.localStreams.splice(this.localStreams.indexOf(_),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(p){var v=this;p.getTracks().forEach(function(_){var y=v.getSenders().find(function(b){return b.track===_});y&&v.removeTrack(y)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(p){return!!p.rtpSender}).map(function(p){return p.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(p){return!!p.rtpReceiver}).map(function(p){return p.rtpReceiver})},h.prototype._createIceGatherer=function(p,v){var _=this;if(v&&p>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var y=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(y,"state",{value:"new",writable:!0}),this.transceivers[p].bufferedCandidateEvents=[],this.transceivers[p].bufferCandidates=function(b){var C=!b.candidate||0===Object.keys(b.candidate).length;y.state=C?"completed":"gathering",null!==_.transceivers[p].bufferedCandidateEvents&&_.transceivers[p].bufferedCandidateEvents.push(b)},y.addEventListener("localcandidate",this.transceivers[p].bufferCandidates),y},h.prototype._gather=function(p,v){var _=this,y=this.transceivers[v].iceGatherer;if(!y.onlocalcandidate){var b=this.transceivers[v].bufferedCandidateEvents;this.transceivers[v].bufferedCandidateEvents=null,y.removeEventListener("localcandidate",this.transceivers[v].bufferCandidates),y.onlocalcandidate=function(C){if(!(_.usingBundle&&v>0)){var R=new Event("icecandidate");R.candidate={sdpMid:p,sdpMLineIndex:v};var N=C.candidate,j=!N||0===Object.keys(N).length;if(j)"new"!==y.state&&"gathering"!==y.state||(y.state="completed");else{"new"===y.state&&(y.state="gathering"),N.component=1,N.ufrag=y.getLocalParameters().usernameFragment;var Q=oi.writeCandidate(N);R.candidate=Object.assign(R.candidate,oi.parseCandidate(Q)),R.candidate.candidate=Q,R.candidate.toJSON=function(){return{candidate:R.candidate.candidate,sdpMid:R.candidate.sdpMid,sdpMLineIndex:R.candidate.sdpMLineIndex,usernameFragment:R.candidate.usernameFragment}}}var $=oi.getMediaSections(_._localDescription.sdp);$[R.candidate.sdpMLineIndex]+=j?"a=end-of-candidates\r\n":"a="+R.candidate.candidate+"\r\n",_._localDescription.sdp=oi.getDescription(_._localDescription.sdp)+$.join("");var ae=_.transceivers.every(function(fe){return fe.iceGatherer&&"completed"===fe.iceGatherer.state});"gathering"!==_.iceGatheringState&&(_.iceGatheringState="gathering",_._emitGatheringStateChange()),j||_._dispatchEvent("icecandidate",R),ae&&(_._dispatchEvent("icecandidate",new Event("icecandidate")),_.iceGatheringState="complete",_._emitGatheringStateChange())}},n.setTimeout(function(){b.forEach(function(C){y.onlocalcandidate(C)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var p=this,v=new n.RTCIceTransport(null);v.onicestatechange=function(){p._updateIceConnectionState(),p._updateConnectionState()};var _=new n.RTCDtlsTransport(v);return _.ondtlsstatechange=function(){p._updateConnectionState()},_.onerror=function(){Object.defineProperty(_,"state",{value:"failed",writable:!0}),p._updateConnectionState()},{iceTransport:v,dtlsTransport:_}},h.prototype._disposeIceAndDtlsTransports=function(p){var v=this.transceivers[p].iceGatherer;v&&(delete v.onlocalcandidate,delete this.transceivers[p].iceGatherer);var _=this.transceivers[p].iceTransport;_&&(delete _.onicestatechange,delete this.transceivers[p].iceTransport);var y=this.transceivers[p].dtlsTransport;y&&(delete y.ondtlsstatechange,delete y.onerror,delete this.transceivers[p].dtlsTransport)},h.prototype._transceive=function(p,v,_){var y=vD(p.localCapabilities,p.remoteCapabilities);v&&p.rtpSender&&(y.encodings=p.sendEncodingParameters,y.rtcp={cname:oi.localCName,compound:p.rtcpParameters.compound},p.recvEncodingParameters.length&&(y.rtcp.ssrc=p.recvEncodingParameters[0].ssrc),p.rtpSender.send(y)),_&&p.rtpReceiver&&y.codecs.length>0&&("video"===p.kind&&p.recvEncodingParameters&&i<15019&&p.recvEncodingParameters.forEach(function(b){delete b.rtx}),y.encodings=p.recvEncodingParameters.length?p.recvEncodingParameters:[{}],y.rtcp={compound:p.rtcpParameters.compound},p.rtcpParameters.cname&&(y.rtcp.cname=p.rtcpParameters.cname),p.sendEncodingParameters.length&&(y.rtcp.ssrc=p.sendEncodingParameters[0].ssrc),p.rtpReceiver.receive(y))},h.prototype.setLocalDescription=function(p){var v,_,y=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(oc("TypeError",'Unsupported type "'+p.type+'"'));if(!qP("setLocalDescription",p.type,y.signalingState)||y._isClosed)return Promise.reject(oc("InvalidStateError","Can not set local "+p.type+" in state "+y.signalingState));if("offer"===p.type)v=oi.splitSections(p.sdp),_=v.shift(),v.forEach(function(C,R){var N=oi.parseRtpParameters(C);y.transceivers[R].localCapabilities=N}),y.transceivers.forEach(function(C,R){y._gather(C.mid,R)});else if("answer"===p.type){v=oi.splitSections(y._remoteDescription.sdp),_=v.shift();var b=oi.matchPrefix(_,"a=ice-lite").length>0;v.forEach(function(C,R){var N=y.transceivers[R],j=N.iceGatherer,Q=N.iceTransport,$=N.dtlsTransport,ae=N.localCapabilities,fe=N.remoteCapabilities;if(!(oi.isRejected(C)&&0===oi.matchPrefix(C,"a=bundle-only").length||N.rejected)){var Ae=oi.getIceParameters(C,_),Re=oi.getDtlsParameters(C,_);b&&(Re.role="server"),y.usingBundle&&0!==R||(y._gather(N.mid,R),"new"===Q.state&&Q.start(j,Ae,b?"controlling":"controlled"),"new"===$.state&&$.start(Re));var tt=vD(ae,fe);y._transceive(N,tt.codecs.length>0,!1)}})}return y._localDescription={type:p.type,sdp:p.sdp},y._updateSignalingState("offer"===p.type?"have-local-offer":"stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(p){var v=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(oc("TypeError",'Unsupported type "'+p.type+'"'));if(!qP("setRemoteDescription",p.type,v.signalingState)||v._isClosed)return Promise.reject(oc("InvalidStateError","Can not set remote "+p.type+" in state "+v.signalingState));var _={};v.remoteStreams.forEach(function(Q){_[Q.id]=Q});var y=[],b=oi.splitSections(p.sdp),C=b.shift(),R=oi.matchPrefix(C,"a=ice-lite").length>0,N=oi.matchPrefix(C,"a=group:BUNDLE ").length>0;v.usingBundle=N;var j=oi.matchPrefix(C,"a=ice-options:")[0];return v.canTrickleIceCandidates=!!j&&j.substr(14).split(" ").indexOf("trickle")>=0,b.forEach(function(Q,$){var ae=oi.splitLines(Q),fe=oi.getKind(Q),Ae=oi.isRejected(Q)&&0===oi.matchPrefix(Q,"a=bundle-only").length,Re=ae[0].substr(2).split(" ")[2],tt=oi.getDirection(Q,C),Tt=oi.parseMsid(Q),Mt=oi.getMid(Q)||oi.generateIdentifier();if(Ae||"application"===fe&&("DTLS/SCTP"===Re||"UDP/DTLS/SCTP"===Re))v.transceivers[$]={mid:Mt,kind:fe,protocol:Re,rejected:!0};else{var Ct,Sn,on,cn,vt,Ge,ot,_t,yn;!Ae&&v.transceivers[$]&&v.transceivers[$].rejected&&(v.transceivers[$]=v._createTransceiver(fe,!0));var Je,at,Rt=oi.parseRtpParameters(Q);Ae||(Je=oi.getIceParameters(Q,C),(at=oi.getDtlsParameters(Q,C)).role="client"),ot=oi.parseRtpEncodingParameters(Q);var un=oi.parseRtcpParameters(Q),wn=oi.matchPrefix(Q,"a=end-of-candidates",C).length>0,Vt=oi.matchPrefix(Q,"a=candidate:").map(function(ke){return oi.parseCandidate(ke)}).filter(function(ke){return 1===ke.component});if(("offer"===p.type||"answer"===p.type)&&!Ae&&N&&$>0&&v.transceivers[$]&&(v._disposeIceAndDtlsTransports($),v.transceivers[$].iceGatherer=v.transceivers[0].iceGatherer,v.transceivers[$].iceTransport=v.transceivers[0].iceTransport,v.transceivers[$].dtlsTransport=v.transceivers[0].dtlsTransport,v.transceivers[$].rtpSender&&v.transceivers[$].rtpSender.setTransport(v.transceivers[0].dtlsTransport),v.transceivers[$].rtpReceiver&&v.transceivers[$].rtpReceiver.setTransport(v.transceivers[0].dtlsTransport)),"offer"!==p.type||Ae)"answer"===p.type&&!Ae&&(Sn=(Ct=v.transceivers[$]).iceGatherer,on=Ct.iceTransport,cn=Ct.dtlsTransport,vt=Ct.rtpReceiver,Ge=Ct.sendEncodingParameters,_t=Ct.localCapabilities,v.transceivers[$].recvEncodingParameters=ot,v.transceivers[$].remoteCapabilities=Rt,v.transceivers[$].rtcpParameters=un,Vt.length&&"new"===on.state&&(!R&&!wn||N&&0!==$?Vt.forEach(function(ke){TT(Ct.iceTransport,ke)}):on.setRemoteCandidates(Vt)),N&&0!==$||("new"===on.state&&on.start(Sn,Je,"controlling"),"new"===cn.state&&cn.start(at)),!vD(Ct.localCapabilities,Ct.remoteCapabilities).codecs.filter(function(ke){return"rtx"===ke.name.toLowerCase()}).length&&Ct.sendEncodingParameters[0].rtx&&delete Ct.sendEncodingParameters[0].rtx,v._transceive(Ct,"sendrecv"===tt||"recvonly"===tt,"sendrecv"===tt||"sendonly"===tt),!vt||"sendrecv"!==tt&&"sendonly"!==tt?delete Ct.rtpReceiver:(yn=vt.track,Tt?(_[Tt.stream]||(_[Tt.stream]=new n.MediaStream),o(yn,_[Tt.stream]),y.push([yn,vt,_[Tt.stream]])):(_.default||(_.default=new n.MediaStream),o(yn,_.default),y.push([yn,vt,_.default]))));else{(Ct=v.transceivers[$]||v._createTransceiver(fe)).mid=Mt,Ct.iceGatherer||(Ct.iceGatherer=v._createIceGatherer($,N)),Vt.length&&"new"===Ct.iceTransport.state&&(!wn||N&&0!==$?Vt.forEach(function(ke){TT(Ct.iceTransport,ke)}):Ct.iceTransport.setRemoteCandidates(Vt)),_t=n.RTCRtpReceiver.getCapabilities(fe),i<15019&&(_t.codecs=_t.codecs.filter(function(ke){return"rtx"!==ke.name})),Ge=Ct.sendEncodingParameters||[{ssrc:1001*(2*$+2)}];var V,_e=!1;"sendrecv"===tt||"sendonly"===tt?(_e=!Ct.rtpReceiver,vt=Ct.rtpReceiver||new n.RTCRtpReceiver(Ct.dtlsTransport,fe),_e&&(yn=vt.track,Tt&&"-"===Tt.stream||(Tt?(_[Tt.stream]||(_[Tt.stream]=new n.MediaStream,Object.defineProperty(_[Tt.stream],"id",{get:function(){return Tt.stream}})),Object.defineProperty(yn,"id",{get:function(){return Tt.track}}),V=_[Tt.stream]):(_.default||(_.default=new n.MediaStream),V=_.default)),V&&(o(yn,V),Ct.associatedRemoteMediaStreams.push(V)),y.push([yn,vt,V]))):Ct.rtpReceiver&&Ct.rtpReceiver.track&&(Ct.associatedRemoteMediaStreams.forEach(function(ke){var In,Ir,Nt=ke.getTracks().find(function(In){return In.id===Ct.rtpReceiver.track.id});Nt&&((Ir=ke).removeTrack(In=Nt),Ir.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:In})))}),Ct.associatedRemoteMediaStreams=[]),Ct.localCapabilities=_t,Ct.remoteCapabilities=Rt,Ct.rtpReceiver=vt,Ct.rtcpParameters=un,Ct.sendEncodingParameters=Ge,Ct.recvEncodingParameters=ot,v._transceive(v.transceivers[$],!1,_e)}}}),void 0===v._dtlsRole&&(v._dtlsRole="offer"===p.type?"active":"passive"),v._remoteDescription={type:p.type,sdp:p.sdp},v._updateSignalingState("offer"===p.type?"have-remote-offer":"stable"),Object.keys(_).forEach(function(Q){var $=_[Q];if($.getTracks().length){if(-1===v.remoteStreams.indexOf($)){v.remoteStreams.push($);var ae=new Event("addstream");ae.stream=$,n.setTimeout(function(){v._dispatchEvent("addstream",ae)})}y.forEach(function(fe){$.id===fe[2].id&&c(v,fe[0],fe[1],[$])})}}),y.forEach(function(Q){Q[2]||c(v,Q[0],Q[1],[])}),n.setTimeout(function(){v&&v.transceivers&&v.transceivers.forEach(function(Q){Q.iceTransport&&"new"===Q.iceTransport.state&&Q.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Q.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(p){p.iceTransport&&p.iceTransport.stop(),p.dtlsTransport&&p.dtlsTransport.stop(),p.rtpSender&&p.rtpSender.stop(),p.rtpReceiver&&p.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(p){this.signalingState=p;var v=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",v)},h.prototype._maybeFireNegotiationNeeded=function(){var p=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,n.setTimeout(function(){if(p.needNegotiation){p.needNegotiation=!1;var v=new Event("negotiationneeded");p._dispatchEvent("negotiationneeded",v)}},0))},h.prototype._updateIceConnectionState=function(){var p,v={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&!y.rejected&&v[y.iceTransport.state]++}),p="new",v.failed>0?p="failed":v.checking>0?p="checking":v.disconnected>0?p="disconnected":v.new>0?p="new":v.connected>0?p="connected":v.completed>0&&(p="completed"),p!==this.iceConnectionState){this.iceConnectionState=p;var _=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",_)}},h.prototype._updateConnectionState=function(){var p,v={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&y.dtlsTransport&&!y.rejected&&(v[y.iceTransport.state]++,v[y.dtlsTransport.state]++)}),v.connected+=v.completed,p="new",v.failed>0?p="failed":v.connecting>0?p="connecting":v.disconnected>0?p="disconnected":v.new>0?p="new":v.connected>0&&(p="connected"),p!==this.connectionState){this.connectionState=p;var _=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",_)}},h.prototype.createOffer=function(){var p=this;if(p._isClosed)return Promise.reject(oc("InvalidStateError","Can not call createOffer after close"));var v=p.transceivers.filter(function(R){return"audio"===R.kind}).length,_=p.transceivers.filter(function(R){return"video"===R.kind}).length,y=arguments[0];if(y){if(y.mandatory||y.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==y.offerToReceiveAudio&&(v=!0===y.offerToReceiveAudio?1:!1===y.offerToReceiveAudio?0:y.offerToReceiveAudio),void 0!==y.offerToReceiveVideo&&(_=!0===y.offerToReceiveVideo?1:!1===y.offerToReceiveVideo?0:y.offerToReceiveVideo)}for(p.transceivers.forEach(function(R){"audio"===R.kind?--v<0&&(R.wantReceive=!1):"video"===R.kind&&--_<0&&(R.wantReceive=!1)});v>0||_>0;)v>0&&(p._createTransceiver("audio"),v--),_>0&&(p._createTransceiver("video"),_--);var b=oi.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.transceivers.forEach(function(R,N){var j=R.track,Q=R.kind,$=R.mid||oi.generateIdentifier();R.mid=$,R.iceGatherer||(R.iceGatherer=p._createIceGatherer(N,p.usingBundle));var ae=n.RTCRtpSender.getCapabilities(Q);i<15019&&(ae.codecs=ae.codecs.filter(function(Ae){return"rtx"!==Ae.name})),ae.codecs.forEach(function(Ae){"H264"===Ae.name&&void 0===Ae.parameters["level-asymmetry-allowed"]&&(Ae.parameters["level-asymmetry-allowed"]="1"),R.remoteCapabilities&&R.remoteCapabilities.codecs&&R.remoteCapabilities.codecs.forEach(function(Re){Ae.name.toLowerCase()===Re.name.toLowerCase()&&Ae.clockRate===Re.clockRate&&(Ae.preferredPayloadType=Re.payloadType)})}),ae.headerExtensions.forEach(function(Ae){(R.remoteCapabilities&&R.remoteCapabilities.headerExtensions||[]).forEach(function(Re){Ae.uri===Re.uri&&(Ae.id=Re.id)})});var fe=R.sendEncodingParameters||[{ssrc:1001*(2*N+1)}];j&&i>=15019&&"video"===Q&&!fe[0].rtx&&(fe[0].rtx={ssrc:fe[0].ssrc+1}),R.wantReceive&&(R.rtpReceiver=new n.RTCRtpReceiver(R.dtlsTransport,Q)),R.localCapabilities=ae,R.sendEncodingParameters=fe}),"max-compat"!==p._config.bundlePolicy&&(b+="a=group:BUNDLE "+p.transceivers.map(function(R){return R.mid}).join(" ")+"\r\n"),b+="a=ice-options:trickle\r\n",p.transceivers.forEach(function(R,N){b+=IT(R,R.localCapabilities,"offer",R.stream,p._dtlsRole),b+="a=rtcp-rsize\r\n",!R.iceGatherer||"new"===p.iceGatheringState||0!==N&&p.usingBundle||(R.iceGatherer.getLocalCandidates().forEach(function(j){j.component=1,b+="a="+oi.writeCandidate(j)+"\r\n"}),"completed"===R.iceGatherer.state&&(b+="a=end-of-candidates\r\n"))});var C=new n.RTCSessionDescription({type:"offer",sdp:b});return Promise.resolve(C)},h.prototype.createAnswer=function(){var p=this;if(p._isClosed)return Promise.reject(oc("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==p.signalingState&&"have-local-pranswer"!==p.signalingState)return Promise.reject(oc("InvalidStateError","Can not call createAnswer in signalingState "+p.signalingState));var v=oi.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.usingBundle&&(v+="a=group:BUNDLE "+p.transceivers.map(function(b){return b.mid}).join(" ")+"\r\n"),v+="a=ice-options:trickle\r\n";var _=oi.getMediaSections(p._remoteDescription.sdp).length;p.transceivers.forEach(function(b,C){if(!(C+1>_)){if(b.rejected)return"application"===b.kind?v+="DTLS/SCTP"===b.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+b.protocol+" webrtc-datachannel\r\n":"audio"===b.kind?v+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===b.kind&&(v+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(v+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+b.mid+"\r\n");var R;b.stream&&("audio"===b.kind?R=b.stream.getAudioTracks()[0]:"video"===b.kind&&(R=b.stream.getVideoTracks()[0]),R&&i>=15019&&"video"===b.kind&&!b.sendEncodingParameters[0].rtx&&(b.sendEncodingParameters[0].rtx={ssrc:b.sendEncodingParameters[0].ssrc+1}));var N=vD(b.localCapabilities,b.remoteCapabilities);!N.codecs.filter(function(j){return"rtx"===j.name.toLowerCase()}).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,v+=IT(b,N,"answer",b.stream,p._dtlsRole),b.rtcpParameters&&b.rtcpParameters.reducedSize&&(v+="a=rtcp-rsize\r\n")}});var y=new n.RTCSessionDescription({type:"answer",sdp:v});return Promise.resolve(y)},h.prototype.addIceCandidate=function(p){var v,_=this;return p&&void 0===p.sdpMLineIndex&&!p.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(y,b){if(!_._remoteDescription)return b(oc("InvalidStateError","Can not add ICE candidate without a remote description"));if(p&&""!==p.candidate){var C=p.sdpMLineIndex;if(p.sdpMid)for(var R=0;R<_.transceivers.length;R++)if(_.transceivers[R].mid===p.sdpMid){C=R;break}var N=_.transceivers[C];if(!N)return b(oc("OperationError","Can not add ICE candidate"));if(N.rejected)return y();var j=Object.keys(p.candidate).length>0?oi.parseCandidate(p.candidate):{};if("tcp"===j.protocol&&(0===j.port||9===j.port)||j.component&&1!==j.component)return y();if((0===C||C>0&&N.iceTransport!==_.transceivers[0].iceTransport)&&!TT(N.iceTransport,j))return b(oc("OperationError","Can not add ICE candidate"));var Q=p.candidate.trim();0===Q.indexOf("a=")&&(Q=Q.substr(2)),(v=oi.getMediaSections(_._remoteDescription.sdp))[C]+="a="+(j.type?Q:"end-of-candidates")+"\r\n",_._remoteDescription.sdp=oi.getDescription(_._remoteDescription.sdp)+v.join("")}else for(var $=0;$<_.transceivers.length&&(_.transceivers[$].rejected||(_.transceivers[$].iceTransport.addRemoteCandidate({}),(v=oi.getMediaSections(_._remoteDescription.sdp))[$]+="a=end-of-candidates\r\n",_._remoteDescription.sdp=oi.getDescription(_._remoteDescription.sdp)+v.join(""),!_.usingBundle));$++);y()})},h.prototype.getStats=function(p){if(p&&p instanceof n.MediaStreamTrack){var v=null;if(this.transceivers.forEach(function(y){y.rtpSender&&y.rtpSender.track===p?v=y.rtpSender:y.rtpReceiver&&y.rtpReceiver.track===p&&(v=y.rtpReceiver)}),!v)throw oc("InvalidAccessError","Invalid selector.");return v.getStats()}var _=[];return this.transceivers.forEach(function(y){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(b){y[b]&&_.push(y[b].getStats())})}),Promise.all(_).then(function(y){var b=new Map;return y.forEach(function(C){C.forEach(function(R){b.set(R.id,R)})}),b})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(p){var v=n[p];if(v&&v.prototype&&v.prototype.getStats){var _=v.prototype.getStats;v.prototype.getStats=function(){return _.apply(this).then(function(y){var b=new Map;return Object.keys(y).forEach(function(C){var R;y[C].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(R=y[C]).type]||R.type,b.set(C,y[C])}),b})}}});var g=["createOffer","createAnswer"];return g.forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[0]||"function"==typeof _[1]?v.apply(this,[arguments[2]]).then(function(y){"function"==typeof _[0]&&_[0].apply(null,[y])},function(y){"function"==typeof _[1]&&_[1].apply(null,[y])}):v.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[1]||"function"==typeof _[2]?v.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)},function(y){"function"==typeof _[2]&&_[2].apply(null,[y])}):v.apply(this,arguments)}}),["getStats"].forEach(function(p){var v=h.prototype[p];h.prototype[p]=function(){var _=arguments;return"function"==typeof _[1]?v.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)}):v.apply(this,arguments)}}),h}(n,i.version);n.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(h,g){let p=!1;return(h=JSON.parse(JSON.stringify(h))).filter(v=>{if(v&&(v.urls||v.url)){let _=v.urls||v.url;v.url&&!v.urls&&j_("RTCIceServer.url","RTCIceServer.urls");const y="string"==typeof _;return y&&(_=[_]),_=_.filter(b=>{if(0===b.indexOf("stun:"))return!1;const C=b.startsWith("turn")&&!b.startsWith("turn:[")&&b.includes("transport=udp");return C&&!p?(p=!0,!0):C&&!p}),delete v.url,v.urls=y?_[0]:_,!!_.length}})}(c.iceServers),fI("ICE servers after filtering:",c.iceServers)),new o(c)},n.RTCPeerConnection.prototype=o.prototype}function XF(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}var $F=Object.freeze({__proto__:null,shimPeerConnection:$P,shimReplaceTrack:XF,shimGetUserMedia:JF,shimGetDisplayMedia:XP}),vS=vE,ZP=Yn,wT=nt,RT=F0,ZF=WB,b8=rd.exports;if(pc({target:"Promise",proto:!0,real:!0,forced:!!vS&&D(function(){vS.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var i=RT(this,ZP("Promise")),o=wT(n);return this.then(o?function(c){return ZF(i,n()).then(function(){return c})}:n,o?function(c){return ZF(i,n()).then(function(){throw c})}:n)}}),wT(vS)){var AD=ZP("Promise").prototype.finally;vS.prototype.finally!==AD&&b8(vS.prototype,"finally",AD,{unsafe:!0})}function eM(n,i){const o=n&&n.navigator,c=n&&n.MediaStreamTrack;if(o.getUserMedia=function(h,g,p){j_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(h).then(g,p)},!(i.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const h=function(p,v,_){v in p&&!(_ in p)&&(p[_]=p[v],delete p[v])},g=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(p){return"object"==typeof p&&"object"==typeof p.audio&&(p=JSON.parse(JSON.stringify(p)),h(p.audio,"autoGainControl","mozAutoGainControl"),h(p.audio,"noiseSuppression","mozNoiseSuppression")),g(p)},c&&c.prototype.getSettings){const p=c.prototype.getSettings;c.prototype.getSettings=function(){const v=p.apply(this,arguments);return h(v,"mozAutoGainControl","autoGainControl"),h(v,"mozNoiseSuppression","noiseSuppression"),v}}if(c&&c.prototype.applyConstraints){const p=c.prototype.applyConstraints;c.prototype.applyConstraints=function(v){return"audio"===this.kind&&"object"==typeof v&&(v=JSON.parse(JSON.stringify(v)),h(v,"autoGainControl","mozAutoGainControl"),h(v,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[v])}}}}function eU(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function OT(n,i){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const g=n.RTCPeerConnection.prototype[h],p={[h](){return arguments[0]=new("addIceCandidate"===h?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};n.RTCPeerConnection.prototype[h]=p[h]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[h,g,p]=arguments;return c.apply(this,[h||null]).then(v=>{if(i.version<53&&!g)try{v.forEach(_=>{_.type=o[_.type]||_.type})}catch(_){if("TypeError"!==_.name)throw _;v.forEach((y,b)=>{v.set(b,Object.assign({},y,{type:o[y.type]||y.type}))})}return v}).then(g,p)}}function tU(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const c=i.apply(this,[]);return c.forEach(h=>h._pc=this),c});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const c=o.apply(this,arguments);return c._pc=this,c}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):jn.resolve(new Map)}}function nU(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=i.apply(this,[]);return o.forEach(c=>c._pc=this),o}),Cf(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function rU(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(i){j_("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&i.getTracks().includes(o.track)&&this.removeTrack(o)})})}function yD(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function iU(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.addTransceiver;i&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const o=arguments[1],c=o&&"sendEncodings"in o;c&&o.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=i.apply(this,arguments);if(c){const{sender:g}=h,p=g.getParameters();(!("encodings"in p)||1===p.encodings.length&&0===Object.keys(p.encodings[0]).length)&&(p.encodings=o.sendEncodings,g.sendEncodings=o.sendEncodings,this.setParametersPromises.push(g.setParameters(p).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return h})}function oU(n){if("object"!=typeof n||!n.RTCRtpSender)return;const i=n.RTCRtpSender.prototype.getParameters;i&&(n.RTCRtpSender.prototype.getParameters=function(){const o=i.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function sU(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?jn.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function ED(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?jn.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var bD=Object.freeze({__proto__:null,shimOnTrack:eU,shimPeerConnection:OT,shimSenderGetStats:tU,shimReceiverGetStats:nU,shimRemoveStream:rU,shimRTCDataChannel:yD,shimAddTransceiver:iU,shimGetParameters:oU,shimCreateOffer:sU,shimCreateAnswer:ED,shimGetUserMedia:eM,shimGetDisplayMedia:function(n,i){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,jn.reject(c)}return!0===o.video?o.video={mediaSource:i}:o.video.mediaSource=i,n.navigator.mediaDevices.getUserMedia(o)})}});function tM(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(c=>i.call(this,c,o)),o.getVideoTracks().forEach(c=>i.call(this,c,o))},n.RTCPeerConnection.prototype.addTrack=function(o){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];return h&&h.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),i.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(i);if(-1===o)return;this._localStreams.splice(o,1);const c=i.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function aU(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,this.dispatchEvent(g)})})}});const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(h)>=0)return;o._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,o.dispatchEvent(g)})}),i.apply(o,arguments)}}}function S8(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype,o=i.createOffer,c=i.createAnswer,h=i.setLocalDescription,g=i.setRemoteDescription,p=i.addIceCandidate;i.createOffer=function(_,y){const C=o.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(C.then(_,y),jn.resolve()):C},i.createAnswer=function(_,y){const C=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return y?(C.then(_,y),jn.resolve()):C};let v=function(_,y,b){const C=h.apply(this,[_]);return b?(C.then(y,b),jn.resolve()):C};i.setLocalDescription=v,v=function(_,y,b){const C=g.apply(this,[_]);return b?(C.then(y,b),jn.resolve()):C},i.setRemoteDescription=v,v=function(_,y,b){const C=p.apply(this,[_]);return b?(C.then(y,b),jn.resolve()):C},i.addIceCandidate=v}function nM(n){const i=n&&n.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const o=i.mediaDevices,c=o.getUserMedia.bind(o);i.mediaDevices.getUserMedia=h=>c(SD(h))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(o,c,h){i.mediaDevices.getUserMedia(o).then(c,h)}.bind(i))}function SD(n){return n&&void 0!==n.video?Object.assign({},n,{video:WR(n.video)}):n}function cU(n){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection;n.RTCPeerConnection=function(o,c){if(o&&o.iceServers){const h=[];for(let g=0;g<o.iceServers.length;g++){let p=o.iceServers[g];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(j_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,h.push(p)):h.push(o.iceServers[g])}o.iceServers=h}return new i(o,c)},n.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>i.generateCertificate})}function rM(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function iM(n){const i=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){void 0!==o.offerToReceiveAudio&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===o.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==o.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==o.offerToReceiveVideo&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const h=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===o.offerToReceiveVideo&&h?"sendrecv"===h.direction?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":"recvonly"===h.direction&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):!0!==o.offerToReceiveVideo||h||this.addTransceiver("video")}return i.apply(this,arguments)}}function uU(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var oM=Object.freeze({__proto__:null,shimLocalStreamsAPI:tM,shimRemoteStreamsAPI:aU,shimCallbacksAPI:S8,shimGetUserMedia:nM,shimConstraints:SD,shimRTCIceServerUrls:cU,shimTrackEventTransceiver:rM,shimCreateOfferLegacy:iM,shimAudioContext:uU}),C8=tp,AS=el,dU=bo("".replace),DT="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",sM=RegExp("^"+DT+DT+"*"),kT=RegExp(DT+DT+"*$"),NT=function(n){return function(i){var o=AS(C8(i));return 1&n&&(o=dU(o,sM,"")),2&n&&(o=dU(o,kT,"")),o}},hU={start:NT(1),end:NT(2),trim:NT(3)},rW=HI.PROPER,pU=ps,fU="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",I8=hU.trim;ts({target:"String",proto:!0,forced:function(n){return pU(function(){return!!fU[n]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[n]()||rW&&fU[n].name!==n})}("trim")},{trim:function(){return I8(this)}});var aM=Ku("String").trim,iW=jc,Ip=aM,cM=String.prototype,Cy=function(n){var i=n.trim;return"string"==typeof n||n===cM||iW(cM,n)&&i===cM.trim?Ip:i},T8=ie;pc({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return T8(URL.prototype.toString,this)}});var mU={exports:{}};!function(n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(o){return Cy(o).call(o).split("\n").map(function(c){return Cy(c).call(c)})},i.splitSections=function(o){return o.split("\nm=").map(function(c,h){var g;return Cy(g=h>0?"m="+c:c).call(g)+"\r\n"})},i.getDescription=function(o){var c=i.splitSections(o);return c&&c[0]},i.getMediaSections=function(o){var c=i.splitSections(o);return c.shift(),c},i.matchPrefix=function(o,c){return i.splitLines(o).filter(function(h){return 0===h.indexOf(c)})},i.parseCandidate=function(o){for(var c,h={foundation:(c=0===o.indexOf("a=candidate:")?o.substring(12).split(" "):o.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},i.writeCandidate=function(o){var c=[];c.push(o.foundation),c.push(o.component),c.push(o.protocol.toUpperCase()),c.push(o.priority),c.push(o.address||o.ip),c.push(o.port);var h=o.type;return c.push("typ"),c.push(h),"host"!==h&&o.relatedAddress&&o.relatedPort&&(c.push("raddr"),c.push(o.relatedAddress),c.push("rport"),c.push(o.relatedPort)),o.tcpType&&"tcp"===o.protocol.toLowerCase()&&(c.push("tcptype"),c.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(c.push("ufrag"),c.push(o.usernameFragment||o.ufrag)),"candidate:"+c.join(" ")},i.parseIceOptions=function(o){return o.substr(14).split(" ")},i.parseRtpMap=function(o){var c=o.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},i.writeRtpMap=function(o){var c=o.payloadType;void 0!==o.preferredPayloadType&&(c=o.preferredPayloadType);var h=o.channels||o.numChannels||1;return"a=rtpmap:"+c+" "+o.name+"/"+o.clockRate+(1!==h?"/"+h:"")+"\r\n"},i.parseExtmap=function(o){var c=o.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},i.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&"sendrecv"!==o.direction?"/"+o.direction:"")+" "+o.uri+"\r\n"},i.parseFmtp=function(o){for(var c,h={},g=o.substr(o.indexOf(" ")+1).split(";"),p=0;p<g.length;p++){var v,_;c=Cy(v=g[p]).call(v).split("="),h[Cy(_=c[0]).call(_)]=c[1]}return h},i.writeFmtp=function(o){var c="",h=o.payloadType;if(void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){var g=[];Object.keys(o.parameters).forEach(function(p){g.push(o.parameters[p]?p+"="+o.parameters[p]:p)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},i.parseRtcpFb=function(o){var c=o.substr(o.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},i.writeRtcpFb=function(o){var c="",h=o.payloadType;return void 0!==o.preferredPayloadType&&(h=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},i.parseSsrcMedia=function(o){var c=o.indexOf(" "),h={ssrc:parseInt(o.substr(7,c-7),10)},g=o.indexOf(":",c);return g>-1?(h.attribute=o.substr(c+1,g-c-1),h.value=o.substr(g+1)):h.attribute=o.substr(c+1),h},i.parseSsrcGroup=function(o){var c=o.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},i.getMid=function(o){var c=i.matchPrefix(o,"a=mid:")[0];if(c)return c.substr(6)},i.parseFingerprint=function(o){var c=o.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},i.getDtlsParameters=function(o,c){return{role:"auto",fingerprints:i.matchPrefix(o+c,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(o,c){var h="a=setup:"+c+"\r\n";return o.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},i.parseCryptoLine=function(o){var c=o.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},i.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+("object"==typeof o.keyParams?i.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(o){if(0!==o.indexOf("inline:"))return null;var c=o.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},i.getCryptoParameters=function(o,c){return i.matchPrefix(o+c,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(o,c){var h=i.matchPrefix(o+c,"a=ice-ufrag:")[0],g=i.matchPrefix(o+c,"a=ice-pwd:")[0];return h&&g?{usernameFragment:h.substr(12),password:g.substr(10)}:null},i.writeIceParameters=function(o){return"a=ice-ufrag:"+o.usernameFragment+"\r\na=ice-pwd:"+o.password+"\r\n"},i.parseRtpParameters=function(o){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=i.splitLines(o)[0].split(" "),g=3;g<h.length;g++){var p=h[g],v=i.matchPrefix(o,"a=rtpmap:"+p+" ")[0];if(v){var _=i.parseRtpMap(v),y=i.matchPrefix(o,"a=fmtp:"+p+" ");switch(_.parameters=y.length?i.parseFmtp(y[0]):{},_.rtcpFeedback=i.matchPrefix(o,"a=rtcp-fb:"+p+" ").map(i.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return i.matchPrefix(o,"a=extmap:").forEach(function(b){c.headerExtensions.push(i.parseExtmap(b))}),c},i.writeRtpDescription=function(o,c){var h="";h+="m="+o+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(p){return void 0!==p.preferredPayloadType?p.preferredPayloadType:p.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(p){h+=i.writeRtpMap(p),h+=i.writeFmtp(p),h+=i.writeRtcpFb(p)});var g=0;return c.codecs.forEach(function(p){p.maxptime>g&&(g=p.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(p){h+=i.writeExtmap(p)}),h},i.parseRtpEncodingParameters=function(o){var c,h=[],g=i.parseRtpParameters(o),p=-1!==g.fecMechanisms.indexOf("RED"),v=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=i.matchPrefix(o,"a=ssrc:").map(function(R){return i.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),y=_.length>0&&_[0].ssrc,b=i.matchPrefix(o,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(N){return parseInt(N,10)})});b.length>0&&b[0].length>1&&b[0][0]===y&&(c=b[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var N={ssrc:y,codecPayloadType:parseInt(R.parameters.apt,10)};y&&c&&(N.rtx={ssrc:c}),h.push(N),p&&((N=JSON.parse(JSON.stringify(N))).fec={ssrc:y,mechanism:v?"red+ulpfec":"red"},h.push(N))}}),0===h.length&&y&&h.push({ssrc:y});var C=i.matchPrefix(o,"b=");return C.length&&(C=0===C[0].indexOf("b=TIAS:")?parseInt(C[0].substr(7),10):0===C[0].indexOf("b=AS:")?1e3*parseInt(C[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=C})),h},i.parseRtcpParameters=function(o){var c={},h=i.matchPrefix(o,"a=ssrc:").map(function(v){return i.parseSsrcMedia(v)}).filter(function(v){return"cname"===v.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=i.matchPrefix(o,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var p=i.matchPrefix(o,"a=rtcp-mux");return c.mux=p.length>0,c},i.parseMsid=function(o){var c,h=i.matchPrefix(o,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=i.matchPrefix(o,"a=ssrc:").map(function(p){return i.parseSsrcMedia(p)}).filter(function(p){return"msid"===p.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},i.parseSctpDescription=function(o){var c,h=i.parseMLine(o),g=i.matchPrefix(o,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var p=i.matchPrefix(o,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:h.fmt,maxMessageSize:c};if(i.matchPrefix(o,"a=sctpmap:").length>0){var v=i.matchPrefix(o,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(v[0],10),protocol:v[1],maxMessageSize:c}}},i.writeSctpDescription=function(o,c){var h=[];return h="DTLS/SCTP"!==o.protocol?["m="+o.kind+" 9 "+o.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+o.kind+" 9 "+o.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&h.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),h.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(o,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(o||i.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(o,c,h,g){var p=i.writeRtpDescription(o.kind,c);if(p+=i.writeIceParameters(o.iceGatherer.getLocalParameters()),p+=i.writeDtlsParameters(o.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),p+="a=mid:"+o.mid+"\r\n",p+=o.direction?"a="+o.direction+"\r\n":o.rtpSender&&o.rtpReceiver?"a=sendrecv\r\n":o.rtpSender?"a=sendonly\r\n":o.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",o.rtpSender){var v="msid:"+g.id+" "+o.rtpSender.track.id+"\r\n";p+="a="+v,p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" "+v,o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" "+v,p+="a=ssrc-group:FID "+o.sendEncodingParameters[0].ssrc+" "+o.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return p+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",o.rtpSender&&o.sendEncodingParameters[0].rtx&&(p+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),p},i.getDirection=function(o,c){for(var h=i.splitLines(o),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?i.getDirection(c):"sendrecv"},i.getKind=function(o){return i.splitLines(o)[0].split(" ")[0].substr(2)},i.isRejected=function(o){return"0"===o.split(" ",2)[1]},i.parseMLine=function(o){var c=i.splitLines(o)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},i.parseOLine=function(o){var c=i.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},i.isValidSDP=function(o){if("string"!=typeof o||0===o.length)return!1;for(var c=i.splitLines(o),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=i}(mU);var CD=mU.exports;function ID(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const i=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if("object"==typeof o&&o.candidate&&0===o.candidate.indexOf("a=")&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const c=new i(o),h=CD.parseCandidate(o.candidate),g=Object.assign(c,h);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new i(o)},n.RTCIceCandidate.prototype=i.prototype,Cf(n,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new n.RTCIceCandidate(o.candidate),writable:"false"}),o))}function PT(n,i){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const o=function(v){if(!v||!v.sdp)return!1;const _=CD.splitSections(v.sdp);return _.shift(),_.some(y=>{const b=CD.parseMLine(y);return b&&"application"===b.kind&&-1!==b.protocol.indexOf("SCTP")})},c=function(v){const _=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===_||_.length<2)return-1;const y=parseInt(_[1],10);return y!=y?-1:y},h=function(v){let _=65536;return"firefox"===i.browser&&(_=i.version<57?-1===v?16384:2147483637:i.version<60?57===i.version?65535:65536:2147483637),_},g=function(v,_){let y=65536;"firefox"===i.browser&&57===i.version&&(y=65535);const b=CD.matchPrefix(v.sdp,"a=max-message-size:");return b.length>0?y=parseInt(b[0].substr(19),10):"firefox"===i.browser&&-1!==_&&(y=2147483637),y},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===i.browser&&i.version>=76){const{sdpSemantics:v}=this.getConfiguration();"plan-b"===v&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const v=c(arguments[0]),_=h(v),y=g(arguments[0],v);let b;b=0===_&&0===y?Number.POSITIVE_INFINITY:0===_||0===y?Math.max(_,y):Math.min(_,y);const C={};Object.defineProperty(C,"maxMessageSize",{get:()=>b}),this._sctp=C}return p.apply(this,arguments)}}function MT(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function i(c,h){const g=c.send;c.send=function(){const p=arguments[0];if("open"===c.readyState&&h.sctp&&(p.length||p.size||p.byteLength)>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const o=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const c=o.apply(this,arguments);return i(c,this),c},Cf(n,"datachannel",c=>(i(c.channel,c.target),c))}function uM(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const c=i[o];i[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const g=h.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const p=new Event("connectionstatechange",h);g.dispatchEvent(p)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function lM(n,i){if(!n.RTCPeerConnection||"chrome"===i.browser&&i.version>=71||"safari"===i.browser&&i.version>=605)return;const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const h=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==Cy(g).call(g)).join("\n");n.RTCSessionDescription&&c instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return o.apply(this,arguments)}}function TD(n,i){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.addIceCandidate;o&&0!==o.length&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===i.browser&&i.version<78||"firefox"===i.browser&&i.version<68||"safari"===i.browser)&&arguments[0]&&""===arguments[0].candidate?jn.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),jn.resolve())})}var w8=Object.freeze({__proto__:null,shimRTCIceCandidate:ID,shimMaxMessageSize:PT,shimSendThrowTypeError:MT,shimConnectionState:uM,removeExtmapAllowMixed:lM,shimAddIceCandidateNullOrEmpty:TD});let pa,xi;(function(){let{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const o=fI,c=Fb(n),h={browserDetails:c,commonShim:w8,extractVersion:GA,disableLog:GR,disableWarnings:Bb};switch(c.browser){case"chrome":if(!qF||!YP||!i.shimChrome)return o("Chrome shim is not included in this adapter release."),h;if(null===c.version)return o("Chrome shim can not determine version, not shimming."),h;o("adapter.js shimming chrome."),h.browserShim=qF,TD(n,c),Oi(n,c),zF(n),YP(n,c),bT(n),ha(n,c),Vf(n),ST(n),Rh(n),ns(n,c),ID(n),uM(n),PT(n,c),MT(n),lM(n,c);break;case"firefox":if(!bD||!OT||!i.shimFirefox)return o("Firefox shim is not included in this adapter release."),h;o("adapter.js shimming firefox."),h.browserShim=bD,TD(n,c),eM(n,c),OT(n,c),eU(n),rU(n),tU(n),nU(n),yD(n),iU(n),oU(n),sU(n),ED(n),ID(n),uM(n),PT(n,c),MT(n);break;case"edge":if(!$F||!$P||!i.shimEdge)return o("MS edge shim is not included in this adapter release."),h;o("adapter.js shimming edge."),h.browserShim=$F,JF(n),XP(n),$P(n,c),XF(n),PT(n,c),MT(n);break;case"safari":if(!oM||!i.shimSafari)return o("Safari shim is not included in this adapter release."),h;o("adapter.js shimming safari."),h.browserShim=oM,TD(n,c),cU(n),iM(n),S8(n),tM(n),aU(n),rM(n),nM(n),uU(n),ID(n),PT(n,c),MT(n),lM(n,c);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(pa||(pa={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(xi||(xi={}));var dM={exports:{}};!function(n,i){!function(o,c){var h="function",g="object",p="string",v="model",_="name",y="type",b="vendor",C="version",R="architecture",N="console",j="mobile",Q="tablet",$="smarttv",ae="wearable",fe="embedded",Ae={extend:function(on,cn){var vt={};for(var Ge in on)vt[Ge]=cn[Ge]&&cn[Ge].length%2==0?cn[Ge].concat(on[Ge]):on[Ge];return vt},has:function(on,cn){return typeof on===p&&-1!==cn.toLowerCase().indexOf(on.toLowerCase())},lowerize:function(on){return on.toLowerCase()},major:function(on){return typeof on===p?on.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(on,cn){return on=on.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===cn?on:on.substring(0,255)}},Re={rgx:function(on,cn){for(var vt,Ge,ot,_t,yn,Je,at=0;at<cn.length&&!yn;){var Rt=cn[at],un=cn[at+1];for(vt=Ge=0;vt<Rt.length&&!yn;)if(yn=Rt[vt++].exec(on))for(ot=0;ot<un.length;ot++)Je=yn[++Ge],typeof(_t=un[ot])===g&&_t.length>0?2==_t.length?this[_t[0]]=typeof _t[1]==h?_t[1].call(this,Je):_t[1]:3==_t.length?this[_t[0]]=typeof _t[1]!==h||_t[1].exec&&_t[1].test?Je?Je.replace(_t[1],_t[2]):c:Je?_t[1].call(this,Je,_t[2]):c:4==_t.length&&(this[_t[0]]=Je?_t[3].call(this,Je.replace(_t[1],_t[2])):c):this[_t]=Je||c;at+=2}},str:function(on,cn){for(var vt in cn)if(typeof cn[vt]===g&&cn[vt].length>0){for(var Ge=0;Ge<cn[vt].length;Ge++)if(Ae.has(cn[vt][Ge],on))return"?"===vt?c:vt}else if(Ae.has(cn[vt],on))return"?"===vt?c:vt;return on}},tt={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[C,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[C,[_,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[_,C],[/opios[\/\s]+([\w\.]+)/i],[C,[_,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[C,[_,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,C],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[C,[_,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[C,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[C,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[C,[_,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[C,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[C,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure Browser"],C],[/focus\/([\w\.]+)/i],[C,[_,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[C,[_,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[C,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[C,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[C,[_,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[C,[_,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[C,[_,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[_,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 Browser"],C],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],C],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[_,C],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[_],[/;fbav\/([\w\.]+);/i],[C,[_,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[_,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[_,C],[/\bgsa\/([\w\.]+)\s.*safari\//i],[C,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[C,[_,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[_,"Chrome WebView"],C],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[C,[_,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[_,C],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[C,[_,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[C,_],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[_,[C,Re.str,tt.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[_,C],[/(navigator|netscape)\/([\w\.-]+)/i],[[_,"Netscape"],C],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[C,[_,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[_,C]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,Ae.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[R,/ower/,"",Ae.lowerize]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,Ae.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[v,[b,"Samsung"],[y,Q]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[v,[b,"Samsung"],[y,j]],[/\((ip(?:hone|od)[\s\w]*);/i],[v,[b,"Apple"],[y,j]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[b,"Apple"],[y,Q]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[v,[b,"Huawei"],[y,Q]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[v,[b,"Huawei"],[y,j]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[v,/_/g," "],[b,"Xiaomi"],[y,j]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[v,/_/g," "],[b,"Xiaomi"],[y,Q]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[v,[b,"OPPO"],[y,j]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[v,[b,"Vivo"],[y,j]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[v,[b,"Realme"],[y,j]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[v,[b,"Motorola"],[y,j]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[v,[b,"Motorola"],[y,Q]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[v,[b,"LG"],[y,Q]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[v,[b,"LG"],[y,j]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[v,[b,"Lenovo"],[y,Q]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[v,/_/g," "],[b,"Nokia"],[y,j]],[/droid.+;\s(pixel\sc)[\s)]/i],[v,[b,"Google"],[y,Q]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[v,[b,"Google"],[y,j]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[b,"Sony"],[y,j]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[v,"Xperia Tablet"],[b,"Sony"],[y,Q]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[v,[b,"OnePlus"],[y,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[v,[b,"Amazon"],[y,Q]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[v,"Fire Phone"],[b,"Amazon"],[y,j]],[/\((playbook);[\w\s\),;-]+(rim)/i],[v,b,[y,Q]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[v,[b,"BlackBerry"],[y,j]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[v,[b,"ASUS"],[y,Q]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[v,[b,"ASUS"],[y,j]],[/(nexus\s9)/i],[v,[b,"HTC"],[y,Q]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[b,[v,/_/g," "],[y,j]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[v,[b,"Acer"],[y,Q]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[v,[b,"Meizu"],[y,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[b,v,[y,j]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[b,v,[y,Q]],[/\s(surface\sduo)\s/i],[v,[b,"Microsoft"],[y,Q]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[v,[b,"Fairphone"],[y,j]],[/\s(u304aa)\sbuild/i],[v,[b,"AT&T"],[y,j]],[/sie-(\w*)/i],[v,[b,"Siemens"],[y,j]],[/[;\/]\s?(rct\w+)\sbuild/i],[v,[b,"RCA"],[y,Q]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[v,[b,"Dell"],[y,Q]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[v,[b,"Verizon"],[y,Q]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[v,[b,"Barnes & Noble"],[y,Q]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[v,[b,"NuVision"],[y,Q]],[/;\s(k88)\sbuild/i],[v,[b,"ZTE"],[y,Q]],[/;\s(nx\d{3}j)\sbuild/i],[v,[b,"ZTE"],[y,j]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[v,[b,"Swiss"],[y,j]],[/[;\/]\s?(zur\d{3})\sbuild/i],[v,[b,"Swiss"],[y,Q]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[v,[b,"Zeki"],[y,Q]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[b,"Dragon Touch"],v,[y,Q]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[v,[b,"Insignia"],[y,Q]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[v,[b,"NextBook"],[y,Q]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[b,"Voice"],v,[y,j]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[b,"LvTel"],v,[y,j]],[/;\s(ph-1)\s/i],[v,[b,"Essential"],[y,j]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[v,[b,"Envizen"],[y,Q]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[v,[b,"MachSpeed"],[y,Q]],[/[;\/]\s?tu_(1491)\sbuild/i],[v,[b,"Rotor"],[y,Q]],[/(shield[\w\s]+)\sbuild/i],[v,[b,"Nvidia"],[y,Q]],[/(sprint)\s(\w+)/i],[b,v,[y,j]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[b,"Microsoft"],[y,j]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[b,"Zebra"],[y,Q]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[b,"Zebra"],[y,j]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[b,v,[y,N]],[/droid.+;\s(shield)\sbuild/i],[v,[b,"Nvidia"],[y,N]],[/(playstation\s[345portablevi]+)/i],[v,[b,"Sony"],[y,N]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[v,[b,"Microsoft"],[y,N]],[/smart-tv.+(samsung)/i],[b,[y,$]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[b,"Samsung"],[y,$]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[b,"LG"],[y,$]],[/(apple)\s?tv/i],[b,[v,"Apple TV"],[y,$]],[/crkey/i],[[v,"Chromecast"],[b,"Google"],[y,$]],[/droid.+aft([\w])(\sbuild\/|\))/i],[v,[b,"Amazon"],[y,$]],[/\(dtv[\);].+(aquos)/i],[v,[b,"Sharp"],[y,$]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[b,Ae.trim],[v,Ae.trim],[y,$]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[y,$]],[/((pebble))app\/[\d\.]+\s/i],[b,v,[y,ae]],[/droid.+;\s(glass)\s\d/i],[v,[b,"Google"],[y,ae]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[v,[b,"Zebra"],[y,ae]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[b,[y,fe]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[v,[y,j]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[v,[y,Q]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[y,Ae.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[v,[b,"Generic"]],[/(phone)/i],[[y,j]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[C,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[C,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[_,C],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[C,_]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[_,C],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[_,[C,Re.str,tt.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[_,"Windows"],[C,Re.str,tt.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[C,/_/g,"."],[_,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[_,"Mac OS"],[C,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[_,C],[/\(bb(10);/i],[C,[_,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[C,[_,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[_,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[C,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[C,[_,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[_,"Chromium OS"],C],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[_,C],[/(sunos)\s?([\w\.\d]*)/i],[[_,"Solaris"],C],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[_,C]]},Mt=function(on,cn){if("object"==typeof on&&(cn=on,on=c),!(this instanceof Mt))return new Mt(on,cn).getResult();var vt=on||(void 0!==o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),Ge=cn?Ae.extend(Tt,cn):Tt;return this.getBrowser=function(){var ot={name:c,version:c};return Re.rgx.call(ot,vt,Ge.browser),ot.major=Ae.major(ot.version),ot},this.getCPU=function(){var ot={architecture:c};return Re.rgx.call(ot,vt,Ge.cpu),ot},this.getDevice=function(){var ot={vendor:c,model:c,type:c};return Re.rgx.call(ot,vt,Ge.device),ot},this.getEngine=function(){var ot={name:c,version:c};return Re.rgx.call(ot,vt,Ge.engine),ot},this.getOS=function(){var ot={name:c,version:c};return Re.rgx.call(ot,vt,Ge.os),ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return vt},this.setUA=function(ot){return vt=typeof ot===p&&ot.length>255?Ae.trim(ot,255):ot,this},this.setUA(vt),this};Mt.VERSION="0.7.28",Mt.BROWSER={NAME:_,MAJOR:"major",VERSION:C},Mt.CPU={ARCHITECTURE:R},Mt.DEVICE={MODEL:v,VENDOR:b,TYPE:y,CONSOLE:N,MOBILE:j,SMARTTV:$,TABLET:Q,WEARABLE:ae,EMBEDDED:fe},Mt.ENGINE={NAME:_,VERSION:C},Mt.OS={NAME:_,VERSION:C},n.exports&&(i=n.exports=Mt),i.UAParser=Mt;var Ct=void 0!==o&&(o.jQuery||o.Zepto);if(Ct&&!Ct.ua){var Sn=new Mt;Ct.ua=Sn.getResult(),Ct.ua.get=function(){return Sn.getUA()},Ct.ua.set=function(on){Sn.setUA(on);var cn=Sn.getResult();for(var vt in cn)Ct.ua[vt]=cn[vt]}}}("object"==typeof window?window:W)}(dM,dM.exports);const hM=new dM.exports;let bg=hM.getResult();function Ki(n){return n&&hM.setUA(n),bg=hM.getResult(),{name:R8(bg),version:gU(bg),os:O8(bg),osVersion:bg.os.version}}function R8(n){if("Blink"===n.engine.name&&"WeChat"!==n.browser.name)return xi.CHROME;switch(n.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return xi.CHROME;case"Safari":case"Mobile Safari":return xi.SAFARI;case"Edge":return xi.EDGE;case"Firefox":return xi.FIREFOX;case"QQBrowser":return xi.QQ;case"Opera":return xi.OPERA;case"WeChat":return xi.WECHAT;default:return n.browser.name||""}}function gU(n){let i;return i="Blink"===n.engine.name?n.engine.version||"":n.browser.version||"",i.split(".")[0]}function O8(n){return"Windows"===n.os.name?n.os.version?n.os.name+" "+n.os.version:n.os.name:n.os.name||""}function _U(){return Ki().os}function wD(){const n=Ki();return!!("WebKit"===bg.engine.name&&n.os===pa.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==xi.SAFARI||Iu()&&n.name!==xi.SAFARI)}function mM(){return Ki().name===xi.CHROME}function Md(){return Ki().name===xi.SAFARI}function Es(){return Ki().name===xi.FIREFOX}function Iu(){return Ki().os===pa.IOS}function vU(){const n=Ki();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 13===Number(i[0])}function yS(){const n=Ki();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])}function AU(){const n=Ki();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&0===Number(i[1])}function yU(){const n=Ki();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=1}function EU(){const n=Ki();if(n.os!==pa.IOS||!n.osVersion)return!1;const i=n.osVersion.split(".");return 15===Number(i[0])&&Number(i[1])>=2}function gv(){return Md()&&navigator.maxTouchPoints>0}function D8(){return Ki().name===xi.WECHAT}function k8(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function xT(){const n=Ki();return n.name!==xi.EDGE&&n.name!==xi.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function N8(){return Ki().os===pa.ANDROID}var gM={exports:{}},_M=Wu.f;ts({target:"Object",stat:!0,forced:Object.defineProperty!==_M,sham:!Hc},{defineProperty:_M});var M8=hf.Object,vM=gM.exports=function(n,i,o){return M8.defineProperty(n,i,o)};M8.defineProperty.sham&&(vM.sham=!0);var x8=gM.exports;function q(n,i,o){return i in n?x8(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}var AM={exports:{}},bU=function(n,i){return function(){for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];return n.apply(i,o)}},SU=bU,Sg=Object.prototype.toString;function CU(n){return"[object Array]"===Sg.call(n)}function IU(n){return null!==n&&"object"==typeof n}function B8(n){return"[object Function]"===Sg.call(n)}function RD(n,i){if(null!=n)if("object"!=typeof n&&(n=[n]),CU(n))for(var o=0,c=n.length;o<c;o++)i.call(null,n[o],o,n);else for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&i.call(null,n[h],h,n)}var xd={isArray:CU,isArrayBuffer:function(n){return"[object ArrayBuffer]"===Sg.call(n)},isBuffer:function(n){return null!=n&&null!=n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)},isFormData:function(n){return typeof FormData<"u"&&n instanceof FormData},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n},isObject:IU,isUndefined:function(n){return void 0===n},isDate:function(n){return"[object Date]"===Sg.call(n)},isFile:function(n){return"[object File]"===Sg.call(n)},isBlob:function(n){return"[object Blob]"===Sg.call(n)},isFunction:B8,isStream:function(n){return IU(n)&&B8(n.pipe)},isURLSearchParams:function(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:RD,merge:function n(){var i={};function o(g,p){i[p]="object"==typeof i[p]&&"object"==typeof g?n(i[p],g):g}for(var c=0,h=arguments.length;c<h;c++)RD(arguments[c],o);return i},deepMerge:function n(){var i={};function o(g,p){i[p]="object"==typeof i[p]&&"object"==typeof g?n(i[p],g):"object"==typeof g?n({},g):g}for(var c=0,h=arguments.length;c<h;c++)RD(arguments[c],o);return i},extend:function(n,i,o){return RD(i,function(c,h){n[h]=o&&"function"==typeof c?SU(c,o):c}),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")}},ES=xd;function TU(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var F8=function(n,i,o){if(!i)return n;var c;if(o)c=o(i);else if(ES.isURLSearchParams(i))c=i.toString();else{var h=[];ES.forEach(i,function(p,v){null!=p&&(ES.isArray(p)?v+="[]":p=[p],ES.forEach(p,function(_){ES.isDate(_)?_=_.toISOString():ES.isObject(_)&&(_=JSON.stringify(_)),h.push(TU(v)+"="+TU(_))}))}),c=h.join("&")}if(c){var g=n.indexOf("#");-1!==g&&(n=n.slice(0,g)),n+=(-1===n.indexOf("?")?"?":"&")+c}return n},U8=xd;function OD(){this.handlers=[]}OD.prototype.use=function(n,i){return this.handlers.push({fulfilled:n,rejected:i}),this.handlers.length-1},OD.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},OD.prototype.forEach=function(n){U8.forEach(this.handlers,function(i){null!==i&&n(i)})};var V8=OD,j8=xd,Q8=function(n){return!(!n||!n.__CANCEL__)},H8=xd,wU=function(n,i,o,c,h){return function(n,i,o,c,h){return n.config=i,o&&(n.code=o),n.request=c,n.response=h,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}(new Error(n),i,o,c,h)},W8=wU,RU=xd,K8=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],La=xd,sW=La.isStandardBrowserEnv()?function(){var n,i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function c(h){var g=h;return i&&(o.setAttribute("href",g),g=o.href),o.setAttribute("href",g),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return n=c(window.location.href),function(h){var g=La.isString(h)?c(h):h;return g.protocol===n.protocol&&g.host===n.host}}():function(){return!0},yM=xd,aW=yM.isStandardBrowserEnv()?{write:function(n,i,o,c,h,g){var p=[];p.push(n+"="+encodeURIComponent(i)),yM.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),yM.isString(c)&&p.push("path="+c),yM.isString(h)&&p.push("domain="+h),!0===g&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},OU=xd,uW=F8,lW=sW,DU=wU,ol=xd,kU=function(n,i){H8.forEach(n,function(o,c){c!==i&&c.toUpperCase()===i.toUpperCase()&&(n[i]=o,delete n[c])})},Y8={"Content-Type":"application/x-www-form-urlencoded"};function DD(n,i){!ol.isUndefined(n)&&ol.isUndefined(n["Content-Type"])&&(n["Content-Type"]=i)}var bS,EM={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(bS=function(n){return new Promise(function(i,o){var c=n.data,h=n.headers;OU.isFormData(c)&&delete h["Content-Type"];var g=new XMLHttpRequest;if(n.auth&&(h.Authorization="Basic "+btoa((n.auth.username||"")+":"+(n.auth.password||""))),g.open(n.method.toUpperCase(),uW(n.url,n.params,n.paramsSerializer),!0),g.timeout=n.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var b="getAllResponseHeaders"in g?function(n){var i,o,c,h={};return n&&RU.forEach(n.split("\n"),function(g){if(c=g.indexOf(":"),i=RU.trim(g.substr(0,c)).toLowerCase(),o=RU.trim(g.substr(c+1)),i){if(h[i]&&K8.indexOf(i)>=0)return;h[i]="set-cookie"===i?(h[i]?h[i]:[]).concat([o]):h[i]?h[i]+", "+o:o}}),h}(g.getAllResponseHeaders()):null;(function(n,i,o){var c=o.config.validateStatus;!c||c(o.status)?n(o):i(W8("Request failed with status code "+o.status,o.config,null,o.request,o))})(i,o,{data:n.responseType&&"text"!==n.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:b,config:n,request:g}),g=null}},g.onabort=function(){g&&(o(DU("Request aborted",n,"ECONNABORTED",g)),g=null)},g.onerror=function(){o(DU("Network Error",n,null,g)),g=null},g.ontimeout=function(){o(DU("timeout of "+n.timeout+"ms exceeded",n,"ECONNABORTED",g)),g=null},OU.isStandardBrowserEnv()){var _=aW,y=(n.withCredentials||lW(n.url))&&n.xsrfCookieName?_.read(n.xsrfCookieName):void 0;y&&(h[n.xsrfHeaderName]=y)}if("setRequestHeader"in g&&OU.forEach(h,function(b,C){void 0===c&&"content-type"===C.toLowerCase()?delete h[C]:g.setRequestHeader(C,b)}),n.withCredentials&&(g.withCredentials=!0),n.responseType)try{g.responseType=n.responseType}catch(b){if("json"!==n.responseType)throw b}"function"==typeof n.onDownloadProgress&&g.addEventListener("progress",n.onDownloadProgress),"function"==typeof n.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then(function(b){g&&(g.abort(),o(b),g=null)}),void 0===c&&(c=null),g.send(c)})}),bS),transformRequest:[function(n,i){return kU(i,"Accept"),kU(i,"Content-Type"),ol.isFormData(n)||ol.isArrayBuffer(n)||ol.isBuffer(n)||ol.isStream(n)||ol.isFile(n)||ol.isBlob(n)?n:ol.isArrayBufferView(n)?n.buffer:ol.isURLSearchParams(n)?(DD(i,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):ol.isObject(n)?(DD(i,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch{}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ol.forEach(["delete","get","head"],function(n){EM.headers[n]={}}),ol.forEach(["post","put","patch"],function(n){EM.headers[n]=ol.merge(Y8)});var q8=EM,bM=xd,kD=function(n,i,o){return j8.forEach(o,function(c){n=c(n,i)}),n},J8=Q8,NU=q8;function PU(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var SS=xd,X8=function(n,i){i=i||{};var o={};return SS.forEach(["url","method","params","data"],function(c){void 0!==i[c]&&(o[c]=i[c])}),SS.forEach(["headers","auth","proxy"],function(c){SS.isObject(i[c])?o[c]=SS.deepMerge(n[c],i[c]):void 0!==i[c]?o[c]=i[c]:SS.isObject(n[c])?o[c]=SS.deepMerge(n[c]):void 0!==n[c]&&(o[c]=n[c])}),SS.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==i[c]?o[c]=i[c]:void 0!==n[c]&&(o[c]=n[c])}),o},SM=xd,fW=F8,$8=V8,mW=function(n){return PU(n),n.baseURL&&!function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}(n.url)&&(n.url=function(n,i){return i?n.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):n}(n.baseURL,n.url)),n.headers=n.headers||{},n.data=kD(n.data,n.headers,n.transformRequest),n.headers=bM.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),bM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete n.headers[i]}),(n.adapter||NU.adapter)(n).then(function(i){return PU(n),i.data=kD(i.data,i.headers,n.transformResponse),i},function(i){return J8(i)||(PU(n),i&&i.response&&(i.response.data=kD(i.response.data,i.response.headers,n.transformResponse))),Promise.reject(i)})},Z8=X8;function LT(n){this.defaults=n,this.interceptors={request:new $8,response:new $8}}LT.prototype.request=function(n){"string"==typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=Z8(this.defaults,n)).method=n.method?n.method.toLowerCase():"get";var i=[mW,void 0],o=Promise.resolve(n);for(this.interceptors.request.forEach(function(c){i.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){i.push(c.fulfilled,c.rejected)});i.length;)o=o.then(i.shift(),i.shift());return o},LT.prototype.getUri=function(n){return n=Z8(this.defaults,n),fW(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},SM.forEach(["delete","get","head","options"],function(n){LT.prototype[n]=function(i,o){return this.request(SM.merge(o||{},{method:n,url:i}))}}),SM.forEach(["post","put","patch"],function(n){LT.prototype[n]=function(i,o,c){return this.request(SM.merge(c||{},{method:n,url:i,data:o}))}});var gW=LT;function CM(n){this.message=n}CM.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},CM.prototype.__CANCEL__=!0;var MU=CM,_W=MU;function IM(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(c){i=c});var o=this;n(function(c){o.reason||(o.reason=new _W(c),i(o.reason))})}IM.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},IM.source=function(){var n;return{token:new IM(function(i){n=i}),cancel:n}};var vW=IM,e6=xd,AW=bU,TM=gW,yW=X8;function t6(n){var i=new TM(n),o=AW(TM.prototype.request,i);return e6.extend(o,TM.prototype,i),e6.extend(o,i),o}var jf=t6(q8);jf.Axios=TM,jf.create=function(n){return t6(yW(jf.defaults,n))},jf.Cancel=MU,jf.CancelToken=vW,jf.isCancel=Q8,jf.all=function(n){return Promise.all(n)},jf.spread=function(n){return function(i){return n.apply(null,i)}},AM.exports=jf,AM.exports.default=jf;var sl=AM.exports;class BT{constructor(i){q(this,"logger",void 0),q(this,"prefixLists",[]),this.logger=i}debug(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.debug(...this.prefixLists,...o)}info(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.info(...this.prefixLists,...o)}warning(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.warning(...this.prefixLists,...o)}error(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];this.logger.error(...this.prefixLists,...o)}prefix(i){return this.prefixLists.push(i),this}popPrefix(){return this.prefixLists.pop(),this}}class rs{constructor(){q(this,"_events",{}),q(this,"addListener",this.on)}getListeners(i){return this._events[i]?this._events[i].map(o=>o.listener):[]}on(i,o){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,o)&&c.push({listener:o,once:!1})}once(i,o){this._events[i]||(this._events[i]=[]);const c=this._events[i];-1===this._indexOfListener(c,o)&&c.push({listener:o,once:!0})}off(i,o){if(!this._events[i])return;const c=this._events[i],h=this._indexOfListener(c,o);-1!==h&&c.splice(h,1),0===this._events[i].length&&delete this._events[i]}removeAllListeners(i){i?delete this._events[i]:this._events={}}emit(i){this._events[i]||(this._events[i]=[]);const o=this._events[i].map(p=>p);for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];for(let p=0;p<o.length;p+=1){const v=o[p];v.once&&this.off(i,v.listener),v.listener.apply(this,h||[])}}_indexOfListener(i,o){let c=i.length;for(;c--;)if(i[c].listener===o)return c;return-1}}const Iy=new class extends rs{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let Ie;!function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(Ie||(Ie={}));class Pe extends Error{constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(o),q(this,"code",void 0),q(this,"message",void 0),q(this,"data",void 0),q(this,"name","AgoraRTCException"),this.code=i,this.message="AgoraRTCError ".concat(this.code,": ").concat(o),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===i&&oe.error(this.toString()),"warning"===i&&oe.warning(this.toString()),this}throw(){throw this.print(),this}}const Jo={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function xU(n,i){const o=Math.floor(i.timeout*Math.pow(i.timeoutFactor,n));return Math.min(i.maxRetryTimeout,o)}function jl(n,i,o,c){const h=Object.assign({},Jo,c);let g=h.timeout;const p=function(){var y=L(function*(){var b;yield(b=g,new jn(C=>{window.setTimeout(C,b)})),g*=h.timeoutFactor,g=Math.min(h.maxRetryTimeout,g)});return function(){return y.apply(this,arguments)}}();let v=!1;const _=new jn(function(){var y=L(function*(b,C){i=i||(()=>!1),o=o||(()=>!0);for(let R=0;R<h.maxRetryCount;R+=1){if(v)return C(new Pe(Ie.OPERATION_ABORTED));try{const N=yield n();if(!i(N,R)||R+1===h.maxRetryCount)return b(N);yield p()}catch(N){if(!o(N,R)||R+1===h.maxRetryCount)return C(N);yield p()}}});return function(b,C){return y.apply(this,arguments)}}());return _.cancel=()=>v=!0,_}function wM(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Tu={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Ty=Date.now(),ND=n=>{for(const i in Tu)if(Object.prototype.hasOwnProperty.call(Tu,i)&&Tu[i]===n)return i;return"DEFAULT"},oe=new class{constructor(){q(this,"proxyServerURL",void 0),q(this,"logLevel",Tu.DEBUG),q(this,"uploadState","collecting"),q(this,"uploadLogWaitingList",[]),q(this,"uploadLogUploadingList",[]),q(this,"uploadErrorCount",0),q(this,"currentLogID",0),q(this,"url",void 0),q(this,"extLog",(n,i)=>{this.appendLogToWaitingList(n,i)})}debug(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Tu.DEBUG].concat(i);this.log.apply(this,c)}info(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Tu.INFO].concat(i);this.log.apply(this,c)}warning(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Tu.WARNING].concat(i);this.log.apply(this,c)}error(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Tu.ERROR].concat(i);this.log.apply(this,c)}upload(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const c=[Tu.DEBUG].concat(i);this.uploadLog.apply(this,c)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){ac("UPLOAD_LOG",!0)}disableLogUpload(){ac("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new BT(this).prefix(n)}log(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(Date.now()-Ty<100)return void setTimeout(()=>{this.log(...i)},Date.now()-Ty);const c=Math.max(0,Math.min(4,i[0]));if(i[0]=wM()+" Agora-SDK [".concat(ND(c),"]:"),this.appendLogToWaitingList(c,i),c<this.logLevel)return;const h=wM()+" %cAgora-SDK [".concat(ND(c),"]:");let g=[];if(!Bt("USE_NEW_LOG"))switch(c){case Tu.DEBUG:g=[h,"color: #64B5F6;"].concat(i.slice(1)),console.log.apply(console,g);break;case Tu.INFO:g=[h,"color: #1E88E5; font-weight: bold;"].concat(i.slice(1)),console.log.apply(console,g);break;case Tu.WARNING:g=[h,"color: #FB8C00; font-weight: bold;"].concat(i.slice(1)),console.warn.apply(console,g);break;case Tu.ERROR:g=[h,"color: #B00020; font-weight: bold;"].concat(i.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(Date.now()-Ty<100)return void setTimeout(()=>{this.uploadLog(...i)},Date.now()-Ty);const c=Math.max(0,Math.min(4,i[0]));i[0]=wM()+" Agora-SDK [".concat(ND(c),"]:"),this.appendLogToWaitingList(c,i)}appendLogToWaitingList(n){if(!Bt("UPLOAD_LOG"))return;let i="";for(var o=arguments.length,c=new Array(o>1?o-1:0),h=1;h<o;h++)c[h-1]=arguments[h];c.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),i+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:n,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var n=this;return L(function*(){const i=n.uploadLogUploadingList,o={sdk_version:al,process_id:Bt("PROCESS_ID"),payload:JSON.stringify(i)};return jl(L(function*(){const c=yield sl.post(n.url||(n.proxyServerURL?"https://".concat(n.proxyServerURL,"/ls/?h=").concat(Bt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Bt("LOG_UPLOAD_SERVER"),"/upload/v1")),o,{responseType:"text"});if("OK"!==c.data){const h=new Error("unexpected upload log response");throw h.response=c,h}}),()=>(n.uploadLogUploadingList=[],!1),c=>(Iy.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:Bt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Bt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Bt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},_v={debug:console.log,info:console.log,warning:console.warn,error:console.error},FT={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},RM={debug:0,info:1,warning:2,error:3},CS=[];let PD,OM=0,LU=0,BU=!1;function MD(){const n=new Date;return[n.getTime(),n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()]}function xD(n){if(!Bt("UPLOAD_LOG"))return;let i;switch(n.type){case zi.MISC:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.msg]];break;case zi.INTERNAL_EVENT:case zi.PUBLIC_EVENT:case zi.WEB_EVENT:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.event,n.msg]];break;case zi.INTERNAL_API:case zi.PUBLIC_API:case zi.WEB_API:i=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.api,n.args,n.result]]}CS.push(i)}function UT(n,i){const[o,c]=MD(),h="warning",g="".concat(c," %cAgora-SDK [").concat(h,"] [INTERNAL API]:"),p={[zi.WEB_API]:"logWebAPI",[zi.PUBLIC_API]:"logPublicAPI",[zi.INTERNAL_API]:"logInternalAPI",[zi.WEB_EVENT]:"logWebEvent",[zi.PUBLIC_EVENT]:"logPublicEvent",[zi.INTERNAL_EVENT]:"logInternalEvent",[zi.MISC]:"logMisc"}[n],v=[g,FT.warning,"Log.".concat(p),i];Bt("USE_NEW_LOG")&&(DM(h)&&_v.warning.apply(console,v),xD({timestamp:o,level:h,module:"Log",instanceId:void 0,type:zi.INTERNAL_API,api:p,args:void 0,result:i.toString()}))}function LD(n){if(Array.isArray(n)){let[c,h]=n;return c||(c="Global"),{module:c,instanceId:h}}let i,o;if("string"!=typeof n.__moduleName)throw new Error("Cannot get __moduleName from log instance.");i=n.__moduleName;try{o=n.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:i,instanceId:o}}function DM(n){return RM[n]>=LU}function IS(n,i,o,c,h,g){if(n===zi.PUBLIC_API||n===zi.WEB_API||n===zi.INTERNAL_API)try{const{module:p,instanceId:v}=LD(o);h=h&&JSON.stringify(h),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[_,y]=MD(),b=["".concat(y," %cAgora-SDK [").concat(i,"] [").concat({[zi.PUBLIC_API]:"PUBLIC API",[zi.WEB_API]:"WEB API",[zi.INTERNAL_API]:"INTERNAL API"}[n],"]:"),FT[i],"".concat(p).concat(v?"<".concat(v,">"):"",".").concat(c),h,g];Bt("USE_NEW_LOG")&&(DM(i)&&_v[i].apply(console,b),xD({timestamp:_,level:i,module:p,instanceId:v,type:n,api:c,args:h,result:g}))}catch(p){UT(n,p)}}function VT(n,i,o,c,h){if(n===zi.WEB_EVENT||n===zi.INTERNAL_EVENT||n===zi.PUBLIC_EVENT)try{const{module:g,instanceId:p}=LD(o);"string"!=typeof h&&(h=h instanceof Error?h.toString():JSON.stringify(h));const[v,_]=MD(),y=["".concat(_," %cAgora-SDK [").concat(i,"] [").concat({[zi.WEB_EVENT]:"WEB EVENT",[zi.PUBLIC_EVENT]:"PUBLIC EVENT",[zi.INTERNAL_EVENT]:"INTERNAL EVENT"}[n],"]:"),FT[i],"".concat(g).concat(p?"<".concat(p,">"):"",".on(").concat(c,")"),h||""];Bt("USE_NEW_LOG")&&(DM(i)&&_v[i].apply(console,y),xD({timestamp:v,level:i,module:g,instanceId:p,type:n,event:c,msg:h}))}catch(g){UT(n,g)}}function wy(n){PD=n}function Ln(n,i,o){try{const{module:c,instanceId:h}=LD(i),[g,p]=MD(),v=["".concat(p," %cAgora-SDK [").concat(n,"] [MISC]:"),FT[n],"".concat(c).concat(h?"<".concat(h,">"):""),'"'.concat(o,'"')];Bt("USE_NEW_LOG")&&(DM(n)&&_v[n].apply(console,v),xD({timestamp:g,level:n,module:c,instanceId:h,type:zi.MISC,msg:o}))}catch(c){Yt("warning",["log"],"logMisc",void 0,c)}}function Ao(n,i,o,c){VT(zi.INTERNAL_EVENT,n,i,o,c)}function Ld(n,i,o,c){VT(zi.PUBLIC_EVENT,n,i,o,c)}function Bd(n,i,o,c){VT(zi.WEB_EVENT,n,i,o,c)}function Yt(n,i,o,c,h){IS(zi.INTERNAL_API,n,i,o,c,h)}function Ry(n,i,o,c,h){IS(zi.WEB_API,n,i,o,c,h)}function pr(n,i,o,c,h){IS(zi.PUBLIC_API,n,i,o,c,h)}function sc(n,i){return function(o){return class extends o{get __moduleName(){return n}get __instanceId(){if(i){if("function"==typeof this[i])return this[i]();{const c=i.split(".");return c.length>0?Oa(c).call(c,(h,g)=>{try{return h&&h[g]}catch{return}},this):this[i]}}}}}}function BD(n){return jT.apply(this,arguments)}function jT(){return jT=L(function*(n){if(!n&&BU)return;if(BU=!0,!Bt("UPLOAD_LOG"))return void setTimeout(()=>BD(!0),Bt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===CS.length)return void setTimeout(()=>BD(!0),Bt("UPLOAD_LOG_INTERVAL"));const i=CS.slice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME")),o={sdk_version:al,log_version:Bt("LOG_VERSION"),process_id:Bt("PROCESS_ID"),index:OM,logs:JSON.stringify(i)};yield jl(L(function*(){const c=yield sl.post(PD?"https://".concat(PD,"/ls/?h=").concat(Bt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Bt("LOG_UPLOAD_SERVER"),"/upload/v1"),o,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:Bt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Bt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),CS.splice(0,Bt("UPLOAD_LOG_LENGTH_EACH_TIME")),OM+=i.length,setTimeout(()=>BD(!0),Bt("UPLOAD_LOG_INTERVAL"))}),jT.apply(this,arguments)}const kM="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",al=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const i=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(i&&i[1]&&i[2]){const h=i[2];return"".concat(i[1],".").concat(h)}const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(o&&o[1]&&o[2]){const h=o[2];return"".concat(o[1],".").concat(100*(Number(h)+1))}return"4.0.0.999"}("4.12.1"),FD=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Js={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},n6={"90p":ni(160,90),"90p_1":ni(160,90),"120p":ni(160,120,15,30,65),"120p_1":ni(160,120,15,30,65),"120p_3":ni(120,120,15,30,50),"120p_4":ni(212,120),"180p":ni(320,180,15,30,140),"180p_1":ni(320,180,15,30,140),"180p_3":ni(180,180,15,30,100),"180p_4":ni(240,180,15,30,120),"240p":ni(320,240,15,40,200),"240p_1":ni(320,240,15,40,200),"240p_3":ni(240,240,15,40,140),"240p_4":ni(424,240,15,40,220),"360p":ni(640,360,15,80,400),"360p_1":ni(640,360,15,80,400),"360p_3":ni(360,360,15,80,260),"360p_4":ni(640,360,30,80,600),"360p_6":ni(360,360,30,80,400),"360p_7":ni(480,360,15,80,320),"360p_8":ni(480,360,30,80,490),"360p_9":ni(640,360,15,80,800),"360p_10":ni(640,360,24,80,800),"360p_11":ni(640,360,24,80,1e3),"480p":ni(640,480,15,100,500),"480p_1":ni(640,480,15,100,500),"480p_2":ni(640,480,30,100,1e3),"480p_3":ni(480,480,15,100,400),"480p_4":ni(640,480,30,100,750),"480p_6":ni(480,480,30,100,600),"480p_8":ni(848,480,15,100,610),"480p_9":ni(848,480,30,100,930),"480p_10":ni(640,480,10,100,400),"720p":ni(1280,720,15,120,1130),"720p_1":ni(1280,720,15,120,1130),"720p_2":ni(1280,720,30,120,2e3),"720p_3":ni(1280,720,30,120,1710),"720p_5":ni(960,720,15,120,910),"720p_6":ni(960,720,30,120,1380),"1080p":ni(1920,1080,15,120,2080),"1080p_1":ni(1920,1080,15,120,2080),"1080p_2":ni(1920,1080,30,120,3e3),"1080p_3":ni(1920,1080,30,120,3150),"1080p_5":ni(1920,1080,60,120,4780),"1440p":ni(2560,1440,30,120,4850),"1440p_1":ni(2560,1440,30,120,4850),"1440p_2":ni(2560,1440,60,120,7350),"4k":ni(3840,2160,30,120,8910),"4k_1":ni(3840,2160,30,120,8910),"4k_3":ni(3840,2160,60,120,13500)},r6={"480p":Oh(640,480,5),"480p_1":Oh(640,480,5),"480p_2":Oh(640,480,30),"480p_3":Oh(640,480,15),"720p":Oh(1280,720,5),"720p_1":Oh(1280,720,5),"720p_2":Oh(1280,720,30),"720p_3":Oh(1280,720,15),"1080p":Oh(1920,1080,5),"1080p_1":Oh(1920,1080,5),"1080p_2":Oh(1920,1080,30),"1080p_3":Oh(1920,1080,15)},i6={"1SL1TL":PM(1,1),"3SL3TL":PM(3,3),"2SL3TL":PM(2,3)};function Oy(n){return"string"==typeof n?Object.assign({},n6[n]):n}function NM(n){return"string"==typeof n?Object.assign({},r6[n]):n}function QT(n){return"string"==typeof n?Object.assign({},i6[n]):n}const FU={speech_low_quality:GT(16e3,!1),speech_standard:GT(32e3,!1,18),music_standard:GT(48e3,!1),standard_stereo:GT(48e3,!0,56),high_quality:GT(48e3,!1,128),high_quality_stereo:GT(48e3,!0,192)};function HT(n){return"string"==typeof n?Object.assign({},FU[n]):n}function ac(n,i,o){Object.keys(wu).includes(n)&&(!o&&Object.keys(UU).includes(n)||(wu[n]=i))}function Bt(n){return wu[n]}const wu={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},UU={};function GT(n,i,o){return{sampleRate:n,stereo:i,bitrate:o}}function ni(n,i,o,c,h){return{width:n,height:i,frameRate:o,bitrateMin:c,bitrateMax:h}}function Oh(n,i,o,c,h){return{width:{max:n},height:{max:i},frameRate:o,bitrateMin:c,bitrateMax:h}}function PM(n,i){return{numSpatialLayers:n,numTemporalLayers:i}}FD||(wu.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],wu.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],wu.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],wu.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],wu.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],wu.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],wu.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",wu.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",wu.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",wu.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",wu.AREAS=["NORTH_AMERICA","OVERSEA"]);const EW=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],WT=[],TS=[];var vv=gf,o6=Wu,s6=gd,wS=function(n,i,o){var c=vv(i);c in n?o6.f(n,c,s6(0,o)):n[c]=o},MM=YA,bW=sh,SW=wS,CW=Jr.Array,a6=Math.max,VU=function(n,i,o){for(var c=bW(n),h=MM(i,c),g=MM(void 0===o?c:o,c),p=CW(a6(g-h,0)),v=0;h<g;h++,v++)SW(p,v,n[h]);return p.length=v,p},c6=VU,IW=Math.floor,jU=function(n,i){var o=n.length,c=IW(o/2);return o<8?TW(n,i):u6(n,jU(c6(n,0,c),i),jU(c6(n,c),i),i)},TW=function(n,i){for(var o,c,h=n.length,g=1;g<h;){for(c=g,o=n[g];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==g++&&(n[c]=o)}return n},u6=function(n,i,o,c){for(var h=i.length,g=o.length,p=0,v=0;p<h||v<g;)n[p+v]=p<h&&v<g?c(i[p],o[v])<=0?i[p++]:o[v++]:p<h?i[p++]:o[v++];return n},l6=jU,d6=Pm.match(/firefox\/(\d+)/i),wW=!!d6&&+d6[1],RW=/MSIE|Trident/.test(Pm),h6=Pm.match(/AppleWebKit\/(\d+)\./),xM=ts,QU=bo,HU=nh,DW=Gu,p6=sh,GU=el,LM=ps,f6=l6,WU=ua,KU=wW,m6=RW,zU=pf,UD=!!h6&&+h6[1],Cg=[],BM=QU(Cg.sort),YU=QU(Cg.push),Dy=LM(function(){Cg.sort(void 0)}),Qf=LM(function(){Cg.sort(null)}),g6=WU("sort"),FM=!LM(function(){if(zU)return zU<70;if(!(KU&&KU>3)){if(m6)return!0;if(UD)return UD<603;var n,i,o,c,h="";for(n=65;n<76;n++){switch(i=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(c=0;c<47;c++)Cg.push({k:i+c,v:o})}for(Cg.sort(function(g,p){return p.v-g.v}),c=0;c<Cg.length;c++)i=Cg[c].k.charAt(0),h.charAt(h.length-1)!==i&&(h+=i);return"DGBEFHACIJK"!==h}});xM({target:"Array",proto:!0,forced:Dy||!Qf||!g6||!FM},{sort:function(n){void 0!==n&&HU(n);var i=DW(this);if(FM)return void 0===n?BM(i):BM(i,n);var o,c,h=[],g=p6(i);for(c=0;c<g;c++)c in i&&YU(h,i[c]);for(f6(h,function(p){return function(v,_){return void 0===_?-1:void 0===v?1:void 0!==p?+p(v,_)||0:GU(v)>GU(_)?1:-1}}(n)),o=h.length,c=0;c<o;)i[c]=h[c++];for(;c<g;)delete i[c++];return i}});var _6=Ku("Array").sort,v6=jc,A6=_6,RS=Array.prototype,UM=function(n){var i=n.sort;return n===RS||v6(RS,n)&&i===RS.sort?A6:i};function Tp(n,i){if("boolean"!=typeof n)throw new Pe(Ie.INVALID_PARAMS,"Invalid ".concat(i,": The value is of the boolean type."))}function fa(n,i,o){if(!o.includes(n))throw new Pe(Ie.INVALID_PARAMS,"".concat(i," can only be set as ").concat(JSON.stringify(o)))}function Wr(n,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(n<o||n>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!qU(n))throw new Pe(Ie.INVALID_PARAMS,"invalid ".concat(i,": the value range is [").concat(o,", ").concat(c,"]. integer only"))}function Hf(n,i){if("number"!=typeof n){if(!(n.min||n.max||n.ideal||n.exact))throw new Pe(Ie.INVALID_PARAMS,"".concat(i," is not a valid ConstrainLong"));void 0!==n.min&&Wr(n.min,"".concat(i,".min"),0,1/0),void 0!==n.max&&Wr(n.max,"".concat(i,".max"),1,1/0),void 0!==n.exact&&Wr(n.exact,"".concat(i,".exact"),1,1/0),void 0!==n.ideal&&Wr(n.ideal,"".concat(i,".ideal"),1,1/0)}else Wr(n,i,1,1/0)}function Ic(n,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==n)throw new Pe(Ie.INVALID_PARAMS,"".concat(i||"param"," cannot be empty"));if(!VM(n,o,c,h))throw new Pe(Ie.INVALID_PARAMS,"Invalid ".concat(i||"string param",": Length of the string: [").concat(o,",").concat(c,"].").concat(h?" ASCII characters only.":""))}function OS(n,i){if(!Array.isArray(n))throw new Pe(Ie.INVALID_PARAMS,"".concat(i," should be an array"))}function VD(n){if("string"!=typeof n||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw oe.error("Invalid Channel Name ".concat(n)),new Pe(Ie.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function jD(n){if(!("number"==typeof(i=n)&&Math.floor(i)===i&&0<=i&&i<=4294967295||VM(n,1,255)))throw oe.error("Invalid UID ".concat(n," ").concat(typeof n)),new Pe(Ie.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var i;"string"==typeof n&&oe.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function uo(n){return null==n}function VM(n){return"string"==typeof n&&n.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&n.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||JU(n))}function qU(n){return"number"==typeof n&&n%1==0}function JU(n){if("string"!=typeof n)return!1;for(let i=0;i<n.length;i+=1){const o=n.charCodeAt(i);if(o<0||o>255)return!1}return!0}let jM,zi,Xs;(function(n){n.FREE="free",n.UPLOADING="uploading"})(jM||(jM={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(zi||(zi={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Xs||(Xs={}));const QD={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function XU(n){return Ic(n.reportId,"params.reportId",0,100,!1),Ic(n.category,"params.category",0,100,!1),Ic(n.event,"params.event",0,100,!1),Ic(n.label,"params.label",0,100,!1),Wr(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const $U={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let ma,No,QM,HD,hr,sr,Ig,Gf,ky,DS,Ru,xs,yr,GD,Ls,Er,fs,Bs,$r,di,iu,Bi,WD,Tc;function ZU(n){return Wr(n.timeout,"config.timeout",0,1e5),Wr(n.timeoutFactor,"config.timeoutFactor",0,100,!1),Wr(n.maxRetryCount,"config.maxRetryConfig",0,1/0),Wr(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function HM(n){return fa(n.codec,"config.codec",["vp8","vp9","av1","h264"]),fa(n.mode,"config.mode",["rtc","live"]),void 0!==n.audioCodec&&fa(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==n.proxyServer&&Ic(n.proxyServer,"config.proxyServer",1,1e4),void 0!==n.turnServer&&y6(n.turnServer),void 0!==n.httpRetryConfig&&ZU(n.httpRetryConfig),void 0!==n.websocketRetryConfig&&ZU(n.websocketRetryConfig),!0}function GM(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(i=>{if(!i.urls)throw Error()})}catch{return!1}return!0}function y6(n){return Ic(n.turnServerURL,"turnServerURL"),Ic(n.username,"username"),Ic(n.password,"password"),n.udpport&&Wr(n.udpport,"udpport",1,99999,!0),n.forceturn&&Tp(n.forceturn,"forceturn"),n.security&&Tp(n.security,"security"),n.tcpport&&Wr(n.tcpport,"tcpport",1,99999,!0),!0}function E6(n){return void 0!==n.level&&fa(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics"})(ma||(ma={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(No||(No={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(QM||(QM={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(HD||(HD={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(hr||(hr={})),function(n){n.TRACER="tracer"}(sr||(sr={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(Ig||(Ig={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Gf||(Gf={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(ky||(ky={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(DS||(DS={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ru||(Ru={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(xs||(xs={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(yr||(yr={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(GD||(GD={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK"}(Ls||(Ls={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result"}(Er||(Er={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(fs||(fs={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Bs||(Bs={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response"}($r||($r={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile"}(di||(di={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats"}(iu||(iu={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Bi||(Bi={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(WD||(WD={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(Tc||(Tc={}));const e3={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},t3={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},b6={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},kW={uplinkNetworkQuality:0,downlinkNetworkQuality:0},S6={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Mr,is,Av;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(Mr||(Mr={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(is||(is={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Av||(Av={}));const C6={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},WM={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function KT(n,i){Ic(n.url,"".concat(i,".url"),1,1e3,!1),uo(n.x)||Wr(n.x,"".concat(i,".x"),0,1e4),uo(n.y)||Wr(n.y,"".concat(i,".y"),0,1e4),uo(n.width)||Wr(n.width,"".concat(i,".width"),0,1e4),uo(n.height)||Wr(n.height,"".concat(i,".height"),0,1e4),uo(n.zOrder)||Wr(n.zOrder,"".concat(i,".zOrder"),0,255),uo(n.alpha)||Wr(n.alpha,"".concat(i,".alpha"),0,1,!1)}const zT={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},KD={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let ou,Wf,To,n3,Ba,wp,Fa,Tg,os,ms,Po,fr,wc,KM,r3,Fd,wg,_i;function kS(n){if(!n.channelName)throw new Pe(Ie.INVALID_PARAMS,"invalid channelName in info");if(!n.uid||"number"!=typeof n.uid)throw new Pe(Ie.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Ic(n.token,"info.token",1,2047),jD(n.uid),VD(n.channelName),!0}function YT(n){return fa(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(ou||(ou={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Wf||(Wf={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(To||(To={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(n3||(n3={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Ba||(Ba={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(wp||(wp={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Fa||(Fa={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Tg||(Tg={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(os||(os={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response"}(ms||(ms={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Po||(Po={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(fr||(fr={})),function(n){n.SCREEN_TRACK="screen_track",n.LOW_STREAM="low_stream"}(wc||(wc={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(KM||(KM={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(r3||(r3={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Fd||(Fd={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(wg||(wg={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(_i||(_i={}));const zD=[_i.AFRICA,_i.ASIA,_i.CHINA,_i.EUROPE,_i.GLOBAL,_i.INDIA,_i.JAPAN,_i.NORTH_AMERICA,_i.OCEANIA,_i.OVERSEA,_i.SOUTH_AMERICA];let Fs;!function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(Fs||(Fs={}));const qT={CHINA:{},ASIA:{CODE:Fs.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Fs.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Fs.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Fs.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Fs.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Fs.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Fs.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Fs.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Fs.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Fs.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Fs.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Fs.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Fs.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let yv,i3,Zr,Dn,Ql,Ai,Ou,NS;FD&&(qT.CHINA={CODE:Fs.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(yv||(yv={}));class o3 extends rs{constructor(i,o){super(),q(this,"onICEConnectionStateChange",void 0),q(this,"onConnectionStateChange",void 0),q(this,"onDTLSTransportStateChange",void 0),q(this,"onDTLSTransportError",void 0),q(this,"onICETransportStateChange",void 0),q(this,"onFirstAudioReceived",void 0),q(this,"onFirstVideoReceived",void 0),q(this,"onFirstAudioDecoded",void 0),q(this,"onFirstVideoDecoded",void 0),q(this,"onSelectedLocalCandidateChanged",void 0),q(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(i3||(i3={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(Zr||(Zr={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Dn||(Dn={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(Ql||(Ql={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter"}(Ai||(Ai={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Ou||(Ou={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(NS||(NS={}));const zM={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let Ud,cl,Du,ul,Xo;(function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"})(Ud||(Ud={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(cl||(cl={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Du||(Du={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(ul||(ul={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Xo||(Xo={}));const cc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Rc(){return cc}var I6=typeof ArrayBuffer<"u"&&typeof DataView<"u",T6=na,JT=sd,XT=H.RangeError,YM=function(n){if(void 0===n)return 0;var i=T6(n),o=JT(i);if(i!==o)throw XT("Wrong length or index");return o},s3=H.Array,qM=Math.abs,Dh=Math.pow,w6=Math.floor,a3=Math.log,NW=Math.LN2,MW=jp,R6=Zi,O6=Sa,c3=rm,D6=ri,u3=ve,JM=Zi,l3=Sa,k6=function(n,i,o){var c=c3(i);c in n?D6.f(n,c,u3(0,o)):n[c]=o},d3=H.Array,N6=Math.max,P6=function(n,i,o){for(var c=l3(n),h=JM(i,c),g=JM(void 0===o?c:o,c),p=d3(N6(g-h,0)),v=0;h<g;h++,v++)k6(p,v,n[h]);return p.length=v,p},XM=re,YD=O,M6=I6,qD=yl,h3=jh,JD=D,XD=o_,PS=na,x6=sd,MS=YM,p3_pack=function(n,i,o){var c,h,g,p=s3(o),v=8*o-i-1,_=(1<<v)-1,y=_>>1,b=23===i?Dh(2,-24)-Dh(2,-77):0,C=n<0||0===n&&1/n<0?1:0,R=0;for((n=qM(n))!=n||n===1/0?(h=n!=n?1:0,c=_):(c=w6(a3(n)/NW),n*(g=Dh(2,-c))<1&&(c--,g*=2),(n+=c+y>=1?b/g:b*Dh(2,1-y))*g>=2&&(c++,g/=2),c+y>=_?(h=0,c=_):c+y>=1?(h=(n*g-1)*Dh(2,i),c+=y):(h=n*Dh(2,y-1)*Dh(2,i),c=0));i>=8;)p[R++]=255&h,h/=256,i-=8;for(c=c<<i|h,v+=i;v>0;)p[R++]=255&c,c/=256,v-=8;return p[--R]|=128*C,p},p3_unpack=function(n,i){var o,c=n.length,h=8*c-i-1,g=(1<<h)-1,p=g>>1,v=h-7,_=c-1,y=n[_--],b=127&y;for(y>>=7;v>0;)b=256*b+n[_--],v-=8;for(o=b&(1<<-v)-1,b>>=-v,v+=i;v>0;)o=256*o+n[_--],v-=8;if(0===b)b=1-p;else{if(b===g)return o?NaN:y?-1/0:1/0;o+=Dh(2,i),b-=p}return(y?-1:1)*o*Dh(2,b-i)},ZM=JC,ex=Kp,L6=sm.f,tx=ri.f,f3=P6,m3=Jv,nx=Pu.PROPER,g3=Pu.CONFIGURABLE,xS=El.get,rx=El.set,ix="ArrayBuffer",$D="Wrong index",Rp=H.ArrayBuffer,kh=Rp,Ny=kh&&kh.prototype,ll=H.DataView,Py=ll&&ll.prototype,ox=Object.prototype,F6=H.Array,ZT=H.RangeError,U6=XM(function(n){for(var i=MW(this),o=O6(i),c=arguments.length,h=R6(c>1?arguments[1]:void 0,o),g=c>2?arguments[2]:void 0,p=void 0===g?o:R6(g,o);p>h;)i[h++]=n;return i}),V6=XM([].reverse),ZD=p3_pack,sx=p3_unpack,_3=function(n){return[255&n]},ax=function(n){return[255&n,n>>8&255]},v3=function(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]},cx=function(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},j6=function(n){return ZD(n,23,4)},A3=function(n){return ZD(n,52,8)},ek=function(n,i){tx(n.prototype,i,{get:function(){return xS(this)[i]}})},Rg=function(n,i,o,c){var h=MS(o),g=xS(n);if(h+i>g.byteLength)throw ZT($D);var p=xS(g.buffer).bytes,v=h+g.byteOffset,_=f3(p,v,v+i);return c?_:V6(_)},My=function(n,i,o,c,h,g){var p=MS(o),v=xS(n);if(p+i>v.byteLength)throw ZT($D);for(var _=xS(v.buffer).bytes,y=p+v.byteOffset,b=c(+h),C=0;C<i;C++)_[y+C]=b[g?C:i-C-1]};if(M6){var Q6=nx&&Rp.name!==ix;if(JD(function(){Rp(1)})&&JD(function(){new Rp(-1)})&&!JD(function(){return new Rp,new Rp(1.5),new Rp(NaN),Q6&&!g3}))Q6&&g3&&qD(Rp,"name",ix);else{(kh=function(n){return XD(this,Ny),new Rp(MS(n))}).prototype=Ny;for(var y3,ux=L6(Rp),E3=0;ux.length>E3;)(y3=ux[E3++])in kh||qD(kh,y3,Rp[y3]);Ny.constructor=kh}ex&&ZM(Py)!==ox&&ex(Py,ox);var tk=new ll(new kh(2)),b3=XM(Py.setInt8);tk.setInt8(0,2147483648),tk.setInt8(1,2147483649),!tk.getInt8(0)&&tk.getInt8(1)||h3(Py,{setInt8:function(n,i){b3(this,n,i<<24>>24)},setUint8:function(n,i){b3(this,n,i<<24>>24)}},{unsafe:!0})}else Ny=(kh=function(n){XD(this,Ny);var i=MS(n);rx(this,{bytes:U6(F6(i),0),byteLength:i}),YD||(this.byteLength=i)}).prototype,Py=(ll=function(n,i,o){XD(this,Py),XD(n,Ny);var c=xS(n).byteLength,h=PS(i);if(h<0||h>c)throw ZT("Wrong offset");if(h+(o=void 0===o?c-h:x6(o))>c)throw ZT("Wrong length");rx(this,{buffer:n,byteLength:o,byteOffset:h}),YD||(this.buffer=n,this.byteLength=o,this.byteOffset=h)}).prototype,YD&&(ek(kh,"byteLength"),ek(ll,"buffer"),ek(ll,"byteLength"),ek(ll,"byteOffset")),h3(Py,{getInt8:function(n){return Rg(this,1,n)[0]<<24>>24},getUint8:function(n){return Rg(this,1,n)[0]},getInt16:function(n){var i=Rg(this,2,n,arguments.length>1?arguments[1]:void 0);return(i[1]<<8|i[0])<<16>>16},getUint16:function(n){var i=Rg(this,2,n,arguments.length>1?arguments[1]:void 0);return i[1]<<8|i[0]},getInt32:function(n){return cx(Rg(this,4,n,arguments.length>1?arguments[1]:void 0))},getUint32:function(n){return cx(Rg(this,4,n,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(n){return sx(Rg(this,4,n,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(n){return sx(Rg(this,8,n,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(n,i){My(this,1,n,_3,i)},setUint8:function(n,i){My(this,1,n,_3,i)},setInt16:function(n,i){My(this,2,n,ax,i,arguments.length>2?arguments[2]:void 0)},setUint16:function(n,i){My(this,2,n,ax,i,arguments.length>2?arguments[2]:void 0)},setInt32:function(n,i){My(this,4,n,v3,i,arguments.length>2?arguments[2]:void 0)},setUint32:function(n,i){My(this,4,n,v3,i,arguments.length>2?arguments[2]:void 0)},setFloat32:function(n,i){My(this,4,n,j6,i,arguments.length>2?arguments[2]:void 0)},setFloat64:function(n,i){My(this,8,n,A3,i,arguments.length>2?arguments[2]:void 0)}});m3(kh,ix),m3(ll,"DataView");var lx={ArrayBuffer:kh,DataView:ll},LW=pc,S3=re,BW=D,H6=Pc,G6=Zi,FW=sd,W6=F0,dx=lx.ArrayBuffer,hx=lx.DataView,C3=hx.prototype,I3=S3(dx.prototype.slice),px=S3(C3.getUint8),Oc=S3(C3.setUint8);LW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:BW(function(){return!new dx(2).slice(1,void 0).byteLength})},{slice:function(n,i){if(I3&&void 0===i)return I3(H6(this),n);for(var o=H6(this).byteLength,c=G6(n,o),h=G6(void 0===i?o:i,o),g=new(W6(this,dx))(FW(h-c)),p=new hx(this),v=new hx(g),_=0;c<h;)Oc(v,_++,px(p,c++));return g}});var Hl,Op,e1,Dp={exports:{}},t1=I6,fx=O,uc=H,n1=nt,Og=zt,xy=Wa,T3=Ca,mx=po,gx=yl,_x=rd.exports,UW=ri.f,Ly=Lr,r1=JC,dl=Kp,K6=wo,kp=Kd,By=uc.Int8Array,o1=By&&By.prototype,Kf=uc.Uint8ClampedArray,z6=Kf&&Kf.prototype,zf=By&&r1(By),Np=o1&&r1(o1),Y6=Object.prototype,vx=uc.TypeError,Ax=K6("toStringTag"),LS=kp("TYPED_ARRAY_TAG"),Yf=kp("TYPED_ARRAY_CONSTRUCTOR"),Ev=t1&&!!dl&&"Opera"!==T3(uc.opera),w3=!1,Dg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},nk={BigInt64Array:8,BigUint64Array:8},yx=function(n){if(!Og(n))return!1;var i=T3(n);return xy(Dg,i)||xy(nk,i)};for(Hl in Dg)(e1=(Op=uc[Hl])&&Op.prototype)?gx(e1,Yf,Op):Ev=!1;for(Hl in nk)(e1=(Op=uc[Hl])&&Op.prototype)&&gx(e1,Yf,Op);if((!Ev||!n1(zf)||zf===Function.prototype)&&(zf=function(){throw vx("Incorrect invocation")},Ev))for(Hl in Dg)uc[Hl]&&dl(uc[Hl],zf);if((!Ev||!Np||Np===Y6)&&(Np=zf.prototype,Ev))for(Hl in Dg)uc[Hl]&&dl(uc[Hl].prototype,Np);if(Ev&&r1(z6)!==Np&&dl(z6,Np),fx&&!xy(Np,Ax))for(Hl in w3=!0,UW(Np,Ax,{get:function(){return Og(this)?this[LS]:void 0}}),Dg)uc[Hl]&&gx(uc[Hl],LS,Hl);var bv={NATIVE_ARRAY_BUFFER_VIEWS:Ev,TYPED_ARRAY_CONSTRUCTOR:Yf,TYPED_ARRAY_TAG:w3&&LS,aTypedArray:function(n){if(yx(n))return n;throw vx("Target is not a typed array")},aTypedArrayConstructor:function(n){if(n1(n)&&(!dl||Ly(zf,n)))return n;throw vx(mx(n)+" is not a typed array constructor")},exportTypedArrayMethod:function(n,i,o,c){if(fx){if(o)for(var h in Dg){var g=uc[h];if(g&&xy(g.prototype,n))try{delete g.prototype[n]}catch{try{g.prototype[n]=i}catch{}}}Np[n]&&!o||_x(Np,n,o?i:Ev&&o1[n]||i,c)}},exportTypedArrayStaticMethod:function(n,i,o){var c,h;if(fx){if(dl){if(o)for(c in Dg)if((h=uc[c])&&xy(h,n))try{delete h[n]}catch{}if(zf[n]&&!o)return;try{return _x(zf,n,o?i:Ev&&zf[n]||i)}catch{}}for(c in Dg)!(h=uc[c])||h[n]&&!o||_x(h,n,i)}},isView:function(n){if(!Og(n))return!1;var i=T3(n);return"DataView"===i||xy(Dg,i)||xy(nk,i)},isTypedArray:yx,TypedArray:zf,TypedArrayPrototype:Np},Fy=D,Ua=zp,bx=H.ArrayBuffer,qf=H.Int8Array,O3=!bv.NATIVE_ARRAY_BUFFER_VIEWS||!Fy(function(){qf(1)})||!Fy(function(){new qf(-1)})||!Ua(function(n){new qf,new qf(null),new qf(1.5),new qf(n)},!0)||Fy(function(){return 1!==new qf(new bx(2),1,void 0).length}),Sx=zt,rk=Math.floor,D3=Number.isInteger||function(n){return!Sx(n)&&isFinite(n)&&rk(n)===n},q6=na,J6=H.RangeError,s1=H.RangeError,k3=function(n,i){var o=function(n){var i=q6(n);if(i<0)throw J6("The argument can't be less than 0");return i}(n);if(o%i)throw s1("Wrong offset");return o},N3=oa,VW=ie,jW=Fo,QW=jp,HW=Sa,GW=P0,WW=Zv,$6=s_,Z6=bv.aTypedArrayConstructor,P3=xe,e7=H,t7=Array.isArray||function(n){return"Array"==P3(n)},n7=ym,r7=zt,M3=wo("species"),ik=e7.Array,L3=oa,B3=Wt,F3=jp,U3=Sa,i7=function(n,i){return new(function(n){var i;return t7(n)&&(n7(i=n.constructor)&&(i===ik||t7(i.prototype))||r7(i)&&null===(i=i[M3]))&&(i=void 0),void 0===i?ik:i}(n))(0===i?0:i)},V3=re([].push),Uy=function(n){var i=1==n,o=2==n,c=3==n,h=4==n,g=6==n,p=7==n,v=5==n||g;return function(_,y,b,C){for(var R,N,j=F3(_),Q=B3(j),$=L3(y,b),ae=U3(Q),fe=0,Ae=C||i7,Re=i?Ae(_,ae):o||p?Ae(_,0):void 0;ae>fe;fe++)if((v||fe in Q)&&(N=$(R=Q[fe],fe,j),n))if(i)Re[fe]=N;else if(N)switch(n){case 3:return!0;case 5:return R;case 6:return fe;case 2:V3(Re,R)}else switch(n){case 4:return!1;case 7:V3(Re,R)}return g?-1:c||h?h:Re}},ga={forEach:Uy(0),map:Uy(1),filter:Uy(2),some:Uy(3),every:Uy(4),find:Uy(5),findIndex:Uy(6),filterReject:Uy(7)},Vy=pc,j3=H,o7=ie,s7=O3,c7=o_,KW=ve,a1=yl,u7=D3,zW=sd,l7=YM,Cx=k3,d7=rm,ok=Wa,h7=Ca,H3=zt,sk=$o,p7=En,f7=Lr,ak=Kp,YW=sm.f,m7=function(n){var i,o,c,h,g,p,v=jW(this),_=QW(n),y=arguments.length,b=y>1?arguments[1]:void 0,C=void 0!==b,R=WW(_);if(R&&!$6(R))for(p=(g=GW(_,R)).next,_=[];!(h=VW(p,g)).done;)_.push(h.value);for(C&&y>2&&(b=N3(b,arguments[2])),o=HW(_),c=new(Z6(v))(o),i=0;o>i;i++)c[i]=C?b(_[i],i):_[i];return c},G3=ga.forEach,ck=hm,W3=ri,g7=jr,Ix=El.get,uk=El.set,BS=W3.f,lk=U.f,dk=Math.round,z3=j3.RangeError,_7=lx.ArrayBuffer,qW=_7.prototype,JW=lx.DataView,hk=bv.NATIVE_ARRAY_BUFFER_VIEWS,XW=bv.TYPED_ARRAY_CONSTRUCTOR,v7=bv.TYPED_ARRAY_TAG,A7=bv.TypedArray,pk=bv.TypedArrayPrototype,$W=bv.aTypedArrayConstructor,Y3=bv.isTypedArray,Tx="BYTES_PER_ELEMENT",q3="Wrong length",J3=function(n,i){$W(n);for(var o=0,c=i.length,h=new n(c);c>o;)h[o]=i[o++];return h},wx=function(n,i){BS(n,i,{get:function(){return Ix(this)[i]}})},y7=function(n){var i;return f7(qW,n)||"ArrayBuffer"==(i=h7(n))||"SharedArrayBuffer"==i},E7=function(n,i){return Y3(n)&&!sk(i)&&i in n&&u7(+i)&&i>=0},b7=function(n,i){return i=d7(i),E7(n,i)?KW(2,n[i]):lk(n,i)},Rx=function(n,i,o){return i=d7(i),!(E7(n,i)&&H3(o)&&ok(o,"value"))||ok(o,"get")||ok(o,"set")||o.configurable||ok(o,"writable")&&!o.writable||ok(o,"enumerable")&&!o.enumerable?BS(n,i,o):(n[i]=o.value,n)};O?(hk||(U.f=b7,W3.f=Rx,wx(pk,"buffer"),wx(pk,"byteOffset"),wx(pk,"byteLength"),wx(pk,"length")),Vy({target:"Object",stat:!0,forced:!hk},{getOwnPropertyDescriptor:b7,defineProperty:Rx}),Dp.exports=function(n,i,o){var c=n.match(/\d+$/)[0]/8,h=n+(o?"Clamped":"")+"Array",g="get"+n,p="set"+n,v=j3[h],_=v,y=_&&_.prototype,b={},C=function(R,N){BS(R,N,{get:function(){return Q=N,($=Ix(this)).view[g](Q*c+$.byteOffset,!0);var Q,$},set:function(j){return $=N,ae=j,fe=Ix(this),o&&(ae=(ae=dk(ae))<0?0:ae>255?255:255&ae),void fe.view[p]($*c+fe.byteOffset,ae,!0);var $,ae,fe},enumerable:!0})};hk?s7&&(_=i(function(R,N,j,Q){return c7(R,y),g7(H3(N)?y7(N)?void 0!==Q?new v(N,Cx(j,c),Q):void 0!==j?new v(N,Cx(j,c)):new v(N):Y3(N)?J3(_,N):o7(m7,_,N):new v(l7(N)),R,_)}),ak&&ak(_,A7),G3(YW(v),function(R){R in _||a1(_,R,v[R])}),_.prototype=y):(_=i(function(R,N,j,Q){c7(R,y);var $,ae,fe,Ae=0,Re=0;if(H3(N)){if(!y7(N))return Y3(N)?J3(_,N):o7(m7,_,N);$=N,Re=Cx(j,c);var tt=N.byteLength;if(void 0===Q){if(tt%c||(ae=tt-Re)<0)throw z3(q3)}else if((ae=zW(Q)*c)+Re>tt)throw z3(q3);fe=ae/c}else fe=l7(N),$=new _7(ae=fe*c);for(uk(R,{buffer:$,byteOffset:Re,byteLength:ae,length:fe,view:new JW($)});Ae<fe;)C(R,Ae++)}),ak&&ak(_,A7),y=_.prototype=p7(pk)),y.constructor!==_&&a1(y,"constructor",_),a1(y,XW,_),v7&&a1(y,v7,h),b[h]=_,Vy({global:!0,forced:_!=v,sham:!hk},b),Tx in _||a1(_,Tx,c),Tx in y||a1(y,Tx,c),ck(h)}):Dp.exports=function(){},(0,Dp.exports)("Uint8",function(n){return function(i,o,c){return n(this,i,o,c)}});var ZW=Sa,eK=na,tK=bv.aTypedArray;(0,bv.exportTypedArrayMethod)("at",function(n){var i=tK(this),o=ZW(i),c=eK(n),h=c>=0?c:o+c;return h<0||h>=o?void 0:i[h]});var C7=ie,X3=bv,nK=Sa,rK=k3,iK=jp,I7=D,oK=H.RangeError,$3=H.Int8Array,T7=$3&&$3.prototype,w7=T7&&T7.set,sK=X3.aTypedArray,aK=X3.exportTypedArrayMethod,Z3=!I7(function(){var n=new Uint8ClampedArray(2);return C7(w7,n,{length:1,0:3},1),3!==n[1]}),cK=Z3&&X3.NATIVE_ARRAY_BUFFER_VIEWS&&I7(function(){var n=new $3(2);return n.set(1),n.set("2",1),0!==n[0]||2!==n[1]});aK("set",function(n){sK(this);var i=rK(arguments.length>1?arguments[1]:void 0,1),o=iK(n);if(Z3)return C7(w7,this,o,i);var c=this.length,h=nK(o),g=0;if(h+i>c)throw oK("Wrong length");for(;g<h;)this[i+g]=o[g++]},!Z3||cK);var R7=P6,uK=Math.floor,eV=function(n,i){var o=n.length,c=uK(o/2);return o<8?lK(n,i):dK(n,eV(R7(n,0,c),i),eV(R7(n,c),i),i)},lK=function(n,i){for(var o,c,h=n.length,g=1;g<h;){for(c=g,o=n[g];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==g++&&(n[c]=o)}return n},dK=function(n,i,o,c){for(var h=i.length,g=o.length,p=0,v=0;p<h||v<g;)n[p+v]=p<h&&v<g?c(i[p],o[v])<=0?i[p++]:o[v++]:p<h?i[p++]:o[v++];return n},hK=eV,tV=Vr.match(/firefox\/(\d+)/i),O7=!!tV&&+tV[1],pK=/MSIE|Trident/.test(Vr),D7=Vr.match(/AppleWebKit\/(\d+)\./),nV=D,gK=Vn,_K=hK,P7=O7,vK=pK,M7=ho,x7=!!D7&&+D7[1],AK=H.Array,yK=bv.aTypedArray,EK=bv.exportTypedArrayMethod,fk=H.Uint16Array,c1=fk&&re(fk.prototype.sort),bK=!(!c1||nV(function(){c1(new fk(2),null)})&&nV(function(){c1(new fk(2),{})})),L7=!!c1&&!nV(function(){if(M7)return M7<74;if(P7)return P7<67;if(vK)return!0;if(x7)return x7<602;var n,i,o=new fk(516),c=AK(516);for(n=0;n<516;n++)i=n%4,o[n]=515-n,c[n]=n-2*i+3;for(c1(o,function(h,g){return(h/4|0)-(g/4|0)}),n=0;n<516;n++)if(o[n]!==c[n])return!0});EK("sort",function(n){return void 0!==n&&gK(n),L7?c1(this,n):_K(yK(this),function(i){return function(o,c){return void 0!==i?+i(o,c)||0:c!=c?-1:o!=o?1:0===o&&0===c?1/o>0&&1/c<0?1:-1:o>c}}(n))},!L7||bK);var SK=hm,B7=lx.ArrayBuffer;let Us;pc({global:!0,forced:H.ArrayBuffer!==B7},{ArrayBuffer:B7}),SK("ArrayBuffer"),function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(Us||(Us={}));var IK=th,mk=Array.isArray||function(n){return"Array"==IK(n)},TK=Jr,F7=mk,wK=mg,RK=Dl,OK=Ns("species"),U7=TK.Array,V7=function(n,i){return new(function(n){var i;return F7(n)&&(wK(i=n.constructor)&&(i===U7||F7(i.prototype))||RK(i)&&null===(i=i[OK]))&&(i=void 0),void 0===i?U7:i}(n))(0===i?0:i)},kK=rp,NK=__,PK=Gu,MK=sh,xK=V7,j7=bo([].push),Qy=function(n){var i=1==n,o=2==n,c=3==n,h=4==n,g=6==n,p=7==n,v=5==n||g;return function(_,y,b,C){for(var R,N,j=PK(_),Q=NK(j),$=kK(y,b),ae=MK(Q),fe=0,Ae=C||xK,Re=i?Ae(_,ae):o||p?Ae(_,0):void 0;ae>fe;fe++)if((v||fe in Q)&&(N=$(R=Q[fe],fe,j),n))if(i)Re[fe]=N;else if(N)switch(n){case 3:return!0;case 5:return R;case 6:return fe;case 2:j7(Re,R)}else switch(n){case 4:return!1;case 7:j7(Re,R)}return g?-1:c||h?h:Re}},Q7={forEach:Qy(0),map:Qy(1),filter:Qy(2),some:Qy(3),every:Qy(4),find:Qy(5),findIndex:Qy(6),filterReject:Qy(7)},LK=Q7.forEach,H7=ua("forEach")?[].forEach:function(n){return LK(this,n,arguments.length>1?arguments[1]:void 0)};ts({target:"Array",proto:!0,forced:[].forEach!=H7},{forEach:H7});var BK=Ku("Array").forEach,FK=eu,UK=ws,VK=jc,jK=BK,rV=Array.prototype,QK={DOMTokenList:!0,NodeList:!0},GK=Gu,iV=Ys;ts({target:"Object",stat:!0,forced:ps(function(){iV(1)})},{keys:function(n){return iV(GK(n))}});var FS=hf.Object.keys,gk=pR,G7=ts,_k=mk,Ox=bo([].reverse),Dx=[1,2];G7({target:"Array",proto:!0,forced:String(Dx)===String(Dx.reverse())},{reverse:function(){return _k(this)&&(this.length=this.length),Ox(this)}});var u1=Ku("Array").reverse,kx=jc,Nx=u1,vk=Array.prototype,oV=ps,sV=pf,W7=Ns("species"),su=function(n){return sV>=51||!oV(function(){var i=[];return(i.constructor={})[W7]=function(){return{foo:1}},1!==i[n](Boolean).foo})},$s=ts,kg=Jr,aV=mk,Ak=mg,Va=Dl,Jf=YA,WK=sh,cV=Ol,K7=wS,z7=Ns,uV=nT,Y7=su("slice"),q7=z7("species"),yk=kg.Array,J7=Math.max;$s({target:"Array",proto:!0,forced:!Y7},{slice:function(n,i){var o,c,h,g=cV(this),p=WK(g),v=Jf(n,p),_=Jf(void 0===i?p:i,p);if(aV(g)&&((Ak(o=g.constructor)&&(o===yk||aV(o.prototype))||Va(o)&&null===(o=o[q7]))&&(o=void 0),o===yk||void 0===o))return uV(g,v,_);for(c=new(void 0===o?yk:o)(J7(_-v,0)),h=0;v<_;v++,h++)v in g&&K7(c,h,g[v]);return c.length=h,c}});var Ek=Ku("Array").slice,US=jc,KK=Ek,bk=Array.prototype;function rr(n,i,o,c,h){var g,p,v,_={};return function(n){var i=n.forEach;return n===rV||VK(rV,n)&&i===rV.forEach||UK(QK,FK(n))?jK:i}(g=FS(c)).call(g,function(y){_[y]=c[y]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=gk(p=function(n){var i=n.reverse;return n===vk||kx(vk,n)&&i===vk.reverse?Nx:i}(v=function(n){var i=n.slice;return n===bk||US(bk,n)&&i===bk.slice?KK:i}(o).call(o)).call(v)).call(p,function(y,b){return b(n,i,y)||y},_),h&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(h):void 0,_.initializer=void 0),void 0===_.initializer&&(x8(n,i,_),_=null),_}var X7=Ku("Array").values,$7=eu,Mx=ws,lV=jc,Z7=X7,Sk=Array.prototype,e9={DOMTokenList:!0,NodeList:!0},Ng=function(n){var i=n.values;return n===Sk||lV(Sk,n)&&i===Sk.values||Mx(e9,$7(n))?Z7:i},Ck=Ku("Array").keys,zK=eu,dV=ws,Ik=jc,xx=Ck,Lx=Array.prototype,Bx={DOMTokenList:!0,NodeList:!0},Sv=function(n){var i=n.keys;return n===Lx||Ik(Lx,n)&&i===Lx.keys||dV(Bx,zK(n))?xx:i};function Fx(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function hV(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?Fx(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Fx(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Tk=0,pV=0;function Vd(n,i,o){return new jn((c,h)=>{i.timeout=i.timeout||Bt("HTTP_CONNECT_TIMEOUT"),i.responseType=i.responseType||"json",i.data&&!o?(i.data=JSON.stringify(i.data),Tk+=_1(i.data)):o&&(i.data.size?Tk+=i.data.size:i.data instanceof FormData?Tk+=function(g){let p=0;return/DingTalk/i.test(navigator.userAgent)&&g.realFormData&&(g=g.realFormData),g.forEach(v=>{p+="string"==typeof v?_1(v):v.size}),p+138}(i.data):Tk+=_1(JSON.stringify(i.data))),i.headers=i.headers||{},i.headers["Content-Type"]=i.headers["Content-Type"]||"application/json",i.method="POST",i.url=n,sl.request(i).then(g=>{"string"==typeof g.data?pV+=_1(g.data):g.data instanceof ArrayBuffer||g.data instanceof Uint8Array?pV+=g.data.byteLength:pV+=_1(JSON.stringify(g.data)),c(g.data)}).catch(g=>{sl.isCancel(g)?h(new Pe(Ie.OPERATION_ABORTED,"cancel token canceled")):h("ECONNABORTED"===g.code?new Pe(Ie.NETWORK_TIMEOUT,g.message):g.response?new Pe(Ie.NETWORK_RESPONSE_ERROR,g.response.status):new Pe(Ie.NETWORK_ERROR,g.message))})})}function YK(n,i){return fV.apply(this,arguments)}function fV(){return fV=L(function*(n,i){const o=new Blob([i.data],{type:"buffer"});return yield Vd(n,hV(hV({},i),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}),fV.apply(this,arguments)}const Vs=new class extends rs{set networkState(n){oe.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(NS.NETWORK_STATE_CHANGE,n,this._networkState),n===Ou.ONLINE?this.emit(NS.ONLINE):n===Ou.OFFLINE&&(this.onlineWaiter=new jn(i=>{this.once(NS.ONLINE,()=>{this.onlineWaiter=void 0,i(Ou.ONLINE)})}),this.emit(NS.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),q(this,"_moduleName","network-indicator"),q(this,"_networkState",Ou.ONLINE),q(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Ou.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Ou.OFFLINE})}};let Ux=!1;const Gl=new class extends rs{constructor(){super(...arguments),q(this,"onAutoplayFailed",void 0),q(this,"onAudioAutoplayFailed",void 0)}};function mV(){const n=Ki();if(!Ux){const i=o=>{o.preventDefault(),Ux=!1,"Android"!==n.os||"Chrome"!==n.name&&n.name!==xi.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0)};Ux=!0,"Android"!==n.os||"Chrome"!==n.name&&n.name!==xi.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),oe.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Gl.onAutoplayFailed?Gl.onAutoplayFailed():oe.warning(Gl.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Gl.emit("autoplay-failed")}}function Vx(n){return(new TextEncoder).encode(n)}const jx=function(n,i){const o=new Uint8Array(n.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o},qK=function(){var n=L(function*(i){return function(o,c){let h="";return new Uint8Array(o).forEach(g=>{h+=g.toString(16).padStart(2,"0")}),h}(yield crypto.subtle.digest("SHA-256",Vx(i)))});return function(o){return n.apply(this,arguments)}}();var t9;function n9(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Kr(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?n9(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):n9(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function l1(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Kt};return function(i,o,c){const h=i[o];if("function"==typeof h){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=function(){for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const y=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(o),options:v,tag:sr.TRACER,reportResult:n.reportResult});try{const b=h.apply(this,v);return y.onSuccess(n.reportResult&&b),b}catch(b){throw y.onError(b),b}}}return c}}function d1(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Kt};return function(i,o,c){const h=i[o];if("function"==typeof h){const g="AgoraRTCClient"===i.constructor.name?"Client":i.constructor.name;c.value=L(function*(){for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const y=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(o),options:v,tag:sr.TRACER});try{const b=yield h.apply(this,v);return y.onSuccess(),b}catch(b){throw y.onError(b),b}})}return c}}const Kt=new(sc("AgoraRTCEventReport")(t9=class{constructor(){var n=this;q(this,"baseInfoMap",new Map),q(this,"proxyServer",void 0),q(this,"clientList",WT),q(this,"eventUploadTimer",void 0),q(this,"setSessionIdTimer",void 0),q(this,"url",void 0),q(this,"backupUrl",void 0),q(this,"_appId",void 0),q(this,"keyEventUploadPendingItems",[]),q(this,"normalEventUploadPendingItems",[]),q(this,"apiInvokeUploadPendingItems",[]),q(this,"apiInvokeCount",0),q(this,"ltsList",[]),q(this,"lastSendNormalEventTime",Date.now()),q(this,"customReportCounterTimer",void 0),q(this,"customReportCount",0),q(this,"extApiInvoke",function(){var i=L(function*(o){for(const c of o){const h=Kr(Kr({},c),{},{sid:null,invokeId:++n.apiInvokeCount,tag:sr.TRACER});n.sendApiInvoke(h)}});return function(o){return i.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Bt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Bt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return oe.error("adjust session ".concat(n," start time, sid is not exist or info is undefined")),void Yt("error",this,"adjustSessionStartTime","adjust session ".concat(n," start time, sid is not exist or info is undefined"));const i=this.baseInfoMap.get(n),o=Date.now(),c=i.startTime;i.startTime=o,oe.debug("rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-c,"ms")),Yt("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-c,"ms")),this.baseInfoMap.set(n,i)}setAppId(n){this._appId=n}reportApiInvoke(n,i,o){i.timeout=i.timeout||6e4,i.reportResult=void 0===i.reportResult||i.reportResult;const c=Date.now();this.apiInvokeCount+=1;const h=this.apiInvokeCount,g=()=>({tag:i.tag,invokeId:h,sid:n,name:i.name,apiInvokeTime:c,options:i.options,states:i.states||null}),p=!!Bt("SHOW_REPORT_INVOKER_LOG");p&&oe.info("".concat(i.name," start"),i.options);let v=!1;lc(i.timeout).then(()=>{v||(this.sendApiInvoke(Kr(Kr({},g()),{},{error:Ie.API_INVOKE_TIMEOUT,success:!1})),oe.debug("".concat(i.name," timeout")))});const _=new Pe(Ie.UNEXPECTED_ERROR,"".concat(i.name,": this api invoke is end"));return{onSuccess:y=>{const b=()=>{if(v)throw _;return v=!0,this.sendApiInvoke(Kr(Kr({},g()),{},{success:!0},i.reportResult&&{result:y})),p&&oe.info("".concat(i.name," onSuccess")),y};return o?NV(b,i.name+"Success",o,()=>v=!0):b()},onError:y=>{const b=()=>{if(v)throw y;v=!0,this.sendApiInvoke(Kr(Kr({},g()),{},{success:!1,error:y})),p&&oe.info("".concat(i.name," onFailure"),y.toString())};return o?NV(b,i.name+"Error",o,()=>v=!0):b()}}}sessionInit(n,i){if(this.baseInfoMap.has(n))return;const o=Date.now(),c=this.createBaseInfo(n,o);c.cname=i.cname;const h=Object.assign({},{willUploadConsoleLog:Bt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:FD?"global":"oversea",areas:Bt("AREAS")&&Bt("AREAS").join(",")},i.extend),g=Date.now(),p=Kr(Kr({},c),{},{eventType:ma.SESSION_INIT,appid:i.appid,browser:navigator.userAgent,build:kM,lts:g,elapse:g-o,extend:JSON.stringify(h),mode:i.mode,process:Bt("PROCESS_ID"),success:!0,version:al});this.send({type:No.SESSION,data:p},!0)}joinChooseServer(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.JOIN_CHOOSE_SERVER,lts:h,eventElapse:h-i.lts,chooseServerAddr:i.csAddr,errorCode:i.ec,elapse:h-o.startTime,success:i.succ,chooseServerAddrList:JSON.stringify(i.serverList),uid:i.uid?parseInt(i.uid):null,cid:i.cid?parseInt(i.cid):null,chooseServerIp:i.csIp||"",opid:i.opid,unilbsServerIds:i.unilbsServerIds,extend:i.extend||void 0});this.send({type:No.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.REQ_USER_ACCOUNT,lts:h,success:i.success,serverAddress:i.serverAddr,stringUid:i.stringUid,uid:i.uid,errorCode:i.errorCode,elapse:h-o.startTime,eventElapse:h-i.lts,extend:JSON.stringify(i.extend)});this.send({type:No.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info;i.vid&&(c.vid=i.vid),c.uid=i.uid,c.cid=i.cid;const h=Date.now(),{firstSuccess:g,avoidJoinStartTime:p,isProxy:v,addr:_}=i,y=h-(g&&p?p:o.startTime),b=Kr(Kr({},c),{},{eventType:ma.JOIN_GATEWAY,lts:h,gatewayAddr:i.addr,success:i.succ,errorCode:i.ec,elapse:y,eventElapse:h-i.lts,firstSuccess:g}),C=b.success?1:0;if(i.succ&&(o.lastJoinSuccessTime=h),g)this.send({type:No.JOIN_GATEWAY,data:b},!0);else{let R;if(_)if(v){const j=_.match(/h=(\d{1,3}-){3}\d{1,3}/g),Q=_.match(/p=[0-9]{1,6}/g);R={isSuccess:C,gatewayIp:j&&j.length?j[0].split("=")[1].replace(/-/g,"."):"",port:Q&&Q.length?Q[0].split("=")[1]:"",isProxy:v?1:0}}else{const j=_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),Q=_.match(/:[0-9]{1,6}/g);R={isSuccess:C,gatewayIp:j&&j.length?j[0].split("//")[1].replace(/-/g,"."):"",port:Q&&Q.length?Q[0].split(":")[1]:"",isProxy:v?1:0}}else R={isSuccess:C,gatewayIp:"",port:"",isProxy:v?1:0};delete b.success,delete b.eventType,delete b.firstSuccess,b.vid=Number(b.vid);const N=Object.assign({},b,R,{eventType:ma.REJOIN_GATEWAY});this.send({type:No.RE_JOIN_GATEWAY,data:N},!0)}}joinChannelTimeout(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=Date.now(),h=Kr(Kr({},o.info),{},{lts:c,timeout:i,elapse:c-o.startTime});this.send({type:No.JOIN_CHANNEL_TIMEOUT,data:h},!0)}publish(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.PUBLISH,lts:h,eventElapse:i.eventElapse,elapse:h-o.startTime,success:i.succ,errorCode:i.ec,videoName:i.videoName,audioName:i.audioName,screenName:i.screenName,screenshare:i.screenshare,audio:i.audio,video:i.video,p2pid:i.p2pid,publishRequestid:i.publishRequestid});this.send({type:No.PUBLISH,data:g},!0)}subscribe(n,i,o){const c=this.baseInfoMap.get(n);if(!c)return;const h=c.info,g=Date.now(),p=Kr(Kr({},h),{},{eventType:ma.SUBSCRIBE,lts:g,eventElapse:i.eventElapse,elapse:g-c.startTime,success:i.succ,errorCode:i.ec,video:i.video,audio:i.audio,subscribeRequestid:i.subscribeRequestid,p2pid:i.p2pid},o&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof i.peerid?p.peerSuid=i.peerid:p.peer=i.peerid,this.send({type:No.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var i;const o=[...Sv(i=this.baseInfoMap).call(i)],h=this.baseInfoMap.get(o.length?o[0]:"UnableToGetSid");if(!h)return;const g=h.info,p=Date.now(),v=Kr(Kr({},g),{},{eventType:ma.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-h.startTime,status:n.status?1:2});this.send({type:No.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteFrame(n,i,o,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=Kr(Kr(Kr({},g),c),{},{elapse:p-h.startTime,eventType:i,lts:p});this.send({type:o,data:v},!0)}onGatewayStream(n,i,o,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=Kr(Kr(Kr({},g),c),{},{eventType:i,lts:p});this.send({type:o,data:v},!0)}streamSwitch(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.STREAM_SWITCH,lts:h,isDual:i.isdual,elapse:h-o.startTime,success:i.succ});this.send({type:No.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.REQUEST_PROXY_APPCENTER,lts:h,eventElapse:h-i.lts,elapse:h-o.startTime,APAddr:i.APAddr,workerManagerList:i.workerManagerList,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:No.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{eventType:ma.REQUEST_PROXY_WORKER_MANAGER,lts:h,eventElapse:h-i.lts,elapse:h-o.startTime,workerManagerAddr:i.workerManagerAddr,response:i.response,errorCode:i.ec,success:i.succ});this.send({type:No.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(n){this.proxyServer=n,oe.debug(n?"reportProxyServerurl: ".concat(n):"disable reportProxyServerurl: ".concat(n)),Yt("debug",this,"setProxyServer",n)}peerPublishStatus(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr({},c),{},{subscribeElapse:i.subscribeElapse,peer:i.peer,peerPublishDuration:Math.max(i.audioPublishDuration,i.videoPublishDuration),audiotag:i.audioPublishDuration>0?1:-1,videotag:i.videoPublishDuration>0?1:-1,lts:h,elapse:h-o.startTime,joinChannelSuccessElapse:h-(o.lastJoinSuccessTime||h)});this.send({type:No.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now();(function(g,p,v){const _=g[p];if(!_||"string"!=typeof _)return[g];g[p]="";const y=_1(JSON.stringify(g));let b=0;const C=[];let R=0;for(let N=0;N<_.length;N++)R+=_.charCodeAt(N)<=127?1:3,R<=1300-y||(C[C.length]=GS(GS({},g),{},{[p]:_.substring(b,N)}),b=N,R=_.charCodeAt(N)<=127?1:3);return b!==_.length-1&&(C[C.length]=GS(GS({},g),{},{[p]:_.substring(b)})),C})(Kr(Kr(Kr({},c),i),{},{elapse:h-o.startTime,lts:h,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:No.WORKER_EVENT,data:g},!0))}apworkerEvent(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr(Kr({},c),i),{},{elapse:h-o.startTime,lts:h});this.send({type:No.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr(Kr({},c),i),{},{elapse:h-o.startTime,lts:h,extend:i.extend||void 0});this.send({type:No.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(n,i){const o=this.baseInfoMap.get(n);if(!o)return;const c=o.info,h=Date.now(),g=Kr(Kr(Kr({},c),i),{},{elapse:h-o.startTime,lts:h});this.send({type:No.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(n,i){var o=this;return L(function*(){if(o.customReportCount+=i.length,o.customReportCount>Bt("CUSTOM_REPORT_LIMIT"))throw new Pe(Ie.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);o.customReportCounterTimer||(o.customReportCounterTimer=window.setInterval(()=>{o.customReportCount=0},5e3));const c=i.map(h=>({type:No.USER_ANALYTICS,data:Kr({sid:n},h)}));try{Bt("NEW_REPORT_SERVER")?yield o.postDataToStatsCollector2(c):yield o.postDataToStatsCollector(c)}catch(h){throw oe.error("send custom report message failed",h.toString()),new Pe(Ie.CUSTOM_REPORT_SEND_FAILED,h.message)}})()}autoplayFailed(n,i,o,c){if(!n)return;const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,p=Date.now(),v=Kr(Kr({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:p,elapse:p-h.startTime,cbRegistered:Gl.onAutoplayFailed||Gl.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:i,trackId:c,extend:void 0});this.send({type:No.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const i=Bt("NOT_REPORT_EVENT");if(n.tag&&i.includes&&i.includes(n.tag))return!1;if(null===n.sid)return this.apiInvokeUploadPendingItems.push(n),!1;const o=this.baseInfoMap.get(n.sid);if(!o)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:c,uid:h,cid:g}=o.info;let p;if(n.lts=n.lts||Date.now(),n.error)if(n.error instanceof Pe){const{code:_,message:y}=n.error;p=_||y||n.error.toString()}else p=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:c,cid:g,uid:h,lts:n.lts,success:n.success,elapse:n.lts-o.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:No.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const i=this.apiInvokeUploadPendingItems.length;for(let o=0;o<i;o++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=n._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(n,i){if(i)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>Bt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,i){const o=[],c=[];for(;n.length;){const g=n.shift();o.length<20?o.push(g):c.push(g)}n.push(...c);for(const g of[...o]){var h;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),UM(h=this.ltsList).call(h,(p,v)=>p-v))}return i||(this.lastSendNormalEventTime=Date.now()),o.length&&(Bt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((g=>p=>{Bt("EVENT_REPORT_RETRY")&&(i?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>Bt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Bt("NORMAL_EVENT_QUEUE_CAPACITY")),oe.warning("report: drop normal events"))))})(o)),n}postDataToStatsCollector2(n){var i=this;return L(function*(){Vs.networkState===Ou.OFFLINE&&(yield jn.race([Vs.onlineWaiter,lc(2*Jo.maxRetryTimeout)]));const o=g=>{let p=new Uint8Array;return g.forEach(v=>{const _=Vx(JSON.stringify(v.data)),y=new ArrayBuffer(5),b=(R=>{let N=0;return Object.entries(No).forEach(j=>{let[Q,$]=j;$===R.type&&(N=HD[Q])}),N})(v),C=new DataView(y);C.setUint16(0,_.byteLength,!0),C.setUint8(2,255&b),C.setUint8(3,b>>>8&255),C.setUint8(4,b>>>16&255),p=jx(p,new Uint8Array(y)),p=jx(p,_)}),p},c="event";let h=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(Bt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(Bt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(h=i.proxyServer?"https://".concat(i.proxyServer,"/rs/?h=").concat(Bt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(Bt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield Vd(h,{timeout:1e4,data:o(n),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:i._appId,"Content-Type":"application/octet-stream"}},!0)}catch(p){if(1===g)throw p;continue}return}})()}postDataToStatsCollector(n){var i=arguments,o=this;return L(function*(){let c=i.length>1&&void 0!==i[1]&&i[1];const h={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(v=>JSON.stringify(v)),vid:(v=>{const _=v&&v.data.sid&&o.baseInfoMap.get(v.data.sid);return _&&_.info.vid&&+_.info.vid||0})(n[0])};Vs.networkState===Ou.OFFLINE&&(yield jn.race([Vs.onlineWaiter,lc(2*Jo.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let p=o.url||(o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Bt("EVENT_REPORT_DOMAIN"),"&p=").concat(Bt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Bt("EVENT_REPORT_DOMAIN"),":").concat(Bt("STATS_COLLECTOR_PORT")).concat(g));for(let v=0;v<2;v+=1){1===v&&(p=o.backupUrl||(o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Bt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Bt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Bt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Bt("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield YK(p,{timeout:1e4,data:h}):yield Vd(p,{timeout:1e4,data:h})}catch(_){if(1===v)throw _;continue}return}})()}createBaseInfo(n,i){const o=Object.assign({},$U);return o.sid=n,this.baseInfoMap.set(n,{info:o,startTime:i}),o}reportResourceTiming(n,i){const o=performance.getEntriesByName(n),c=o[o.length-1];c&&this.reportApiInvoke(i,{name:"Client.resourceTiming",options:c,tag:sr.TRACER}).onSuccess()}})||t9);Iy.on("REPORT_LOG_UPLOAD",n=>{n.networkState=Vs.networkState,Kt.reportApiInvoke(null,{name:"logUploadError",options:n,tag:sr.TRACER})});class r9 extends rs{constructor(i,o){super(),q(this,"trackMediaType",void 0),q(this,"_ID",void 0),q(this,"_hints",[]),q(this,"_isClosed",!1),q(this,"_originMediaStreamTrack",void 0),q(this,"_mediaStreamTrack",void 0),q(this,"_external",{}),this._ID=o||as(8,"track-"),this._originMediaStreamTrack=i,this._mediaStreamTrack=i,TS.includes(this)||TS.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(i){if(!i){Kt.reportApiInvoke(null,{name:hr.GET_MEDIA_STREAM_TRACK,options:[],tag:sr.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(i){const o=TS.indexOf(i);-1!==o&&TS.splice(o,1)}(this),this.emit(Fd.CLOSED)}}let js,gV,i9,JK=1;class au{constructor(i){q(this,"lockingPromise",jn.resolve()),q(this,"locks",0),q(this,"name",""),q(this,"lockId",void 0),this.lockId=JK++,i&&(this.name=i),oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(i){let o;this.locks+=1,oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:""));const c=new jn(g=>{o=()=>{this.locks-=1,oe.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof i?i:"")),g()}}),h=this.lockingPromise.then(()=>o);return this.lockingPromise=this.lockingPromise.then(()=>c),h}}function Cv(n,i){return function(o,c,h){const g=o[c];if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return h.value=L(function*(){const p=this[i];if(!p)throw new Error("mutex property key ".concat(i," doesn't exist on ").concat(n));const v=yield p.lock("From ".concat(n,".").concat(c));try{for(var _=arguments.length,y=new Array(_),b=0;b<_;b++)y[b]=arguments[b];return yield g.apply(this,y)}finally{v()}}),h}}class Qx extends r9{get muted(){return this._muted}get enabled(){return this._enabled}constructor(i,o){super(i,o),q(this,"_enabled",!0),q(this,"_muted",!1),q(this,"_isClosed",!1),q(this,"_trackProcessors",[]),q(this,"_enabledMutex",void 0),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new au("".concat(o)),i.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(i=>i.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,oe.debug("[".concat(this.getTrackId(),"] close")),Yt("debug",this,"close"),this.emit(fr.NEED_CLOSE),super.close())}_registerTrackProcessor(i){var o=this;return L(function*(){if(-1!==o._trackProcessors.indexOf(i))return;const c=o._trackProcessors[o._trackProcessors.length-1];o._trackProcessors.push(i),i.onOutputChange=L(function*(){o._mediaStreamTrack=i.output||o._originMediaStreamTrack,o._updatePlayerSource(),yield Mo(o,fr.NEED_REPLACE_TRACK,o)}),c?(c.onOutputChange=L(function*(){c.output&&(yield i.setInput(c.output))}),yield i.setInput(c.output||c.input||o._originMediaStreamTrack)):yield i.setInput(o._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const i=this._trackProcessors[this._trackProcessors.length-1];return i.output||i.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(i,o){var c=this;return L(function*(){if(i!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),o&&c._originMediaStreamTrack.stop(),i.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=i,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(i);const h=c._getOutputFromProcessors();c._mediaStreamTrack=h}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield Mo(c,fr.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}stateCheck(i,o){if(oe.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(i,": ").concat(o,"]")),Yt("debug",this,"stateCheck",{stateName:i,state:o,muted:this._muted,enabled:this._enabled}),Tp(o,i),this._enabled&&this._muted&&"enabled"===i&&!1===o)throw new Pe(Ie.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===i&&!0===o)throw new Pe(Ie.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(n){n.IOS_15_INTERRUPTION_START="ios15-interruption-start",n.IOS_15_INTERRUPTION_END="ios15-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(js||(js={})),function(n){n.AUDIO_CONTEXT_CREATED="audio_context_created"}(gV||(gV={})),function(n){n.AIDenoiser="AIDenoiser"}(i9||(i9={}));const Hx={audioContextInitOptions:{}},h1=new class extends rs{constructor(){super(),q(this,"registeredPlugins",[])}setOptions(n,i){Hx[n]&&(Hx[n]=i)}getOptions(n){return Hx[n]}installPlugin(n){n instanceof Object&&n.name&&this.registeredPlugins.push(n.name)}},Hy=window.AudioContext||window.webkitAudioContext;let Wl=null;const zr=new class extends rs{constructor(){var n;super(...arguments),n=this,q(this,"prevState",void 0),q(this,"curState",void 0),q(this,"currentTime",void 0),q(this,"currentTimeStuckAt",void 0),q(this,"interruptDetectorTrack",void 0),q(this,"onLocalAudioTrackMute",()=>{oe.info("ios15-interruption-start"),Ao("info",["WebAudio"],"ios15-interruption-start"),this.emit(js.IOS_15_INTERRUPTION_START)}),q(this,"onLocalAudioTrackUnmute",L(function*(){oe.info("ios15-interruption-end"),Ao("info",["WebAudio"],"ios15-interruption-end"),"running"!==n.curState||n.duringInterruption?oe.info("ios15-interruption-end-canceled"):(Wl&&(yield Wl.suspend()),n.emit(js.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(n){oe.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),Yt("debug",["WebAudio"],"bindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){oe.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),Yt("debug",["WebAudio"],"unbindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function p1(){if(!Wl){if(function o9(){if(!Hy)return oe.error("your browser is not support web audio"),void Ln("error",["WebAudio"],"your browser is not support web audio");oe.info("create audio context"),Ry("info",["WebAudio"],"WebAudioContext");const n=h1.getOptions("audioContextInitOptions");oe.debug("audio content init option:",JSON.stringify(n)),Wl=new Hy(n),h1.emit(gV.AUDIO_CONTEXT_CREATED,Wl),zr.curState=Wl.state,Wl.onstatechange=()=>{zr.prevState=zr.curState,zr.curState=Wl?Wl.state:void 0,(Iu()||gv())&&"running"===zr.prevState&&"interrupted"===zr.curState&&(oe.info("ios-interruption-start"),Ao("info",["AudioState"],"ios-interruption-start"),zr.emit(js.IOS_INTERRUPTION_START)),(Iu()||gv())&&"interrupted"===zr.prevState&&"running"===zr.curState&&(oe.info("ios-interruption-end"),Ao("info",["AudioState"],"ios-interruption-end"),zr.emit(js.IOS_INTERRUPTION_END)),zr.prevState!==zr.curState&&(oe.debug("AudioContext State Change","".concat(zr.prevState,"=>").concat(zr.curState)),Bd("debug",["AudioContext",void 0],"statechange","".concat(zr.prevState,"=>").concat(zr.curState)),zr.emit(js.STATE_CHANGE))},setInterval(()=>{var i;const o=null===(i=Wl)||void 0===i?void 0:i.currentTime;zr.currentTime!==o?(zr.currentTimeStuckAt&&(oe.debug("AudioContext current time resume at ".concat(o)),zr.currentTimeStuckAt=void 0),zr.currentTime=o):(o!==zr.currentTimeStuckAt&&oe.warning("AudioContext current time stuck at ".concat(o)),zr.currentTimeStuckAt=o)},5e3),function(){var i=L(function*(o){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let h,g=!1,p=!1,v=!1;function _(ae){"running"===o.state?y(!1):Iu()||gv()?"suspended"===o.state&&(y(!0),ae&&o.resume().then(C,C)):"closed"!==o.state&&(y(!0),ae&&o.resume().then(C,C))}function y(ae){if(g!==ae){g=ae;for(let fe=0,Ae=c;fe<Ae.length;fe+=1){const Re=Ae[fe];ae?window.addEventListener(Re,R,{capture:!0,passive:!0}):window.removeEventListener(Re,R,{capture:!0,passive:!0})}}}function C(){_(!1)}function R(){_(!0)}function N(ae){if(!v)if(h.paused)if(ae){let fe;j(!1),v=!0;try{fe=h.play(),fe?fe.then(Q,Q):(h.addEventListener("playing",Q),h.addEventListener("abort",Q),h.addEventListener("error",Q))}catch{Q()}}else j(!0);else j(!1)}function j(ae){if(p!==ae){p=ae;for(let fe=0,Ae=c;fe<Ae.length;fe++){const Re=Ae[fe];ae?window.addEventListener(Re,$,{capture:!0,passive:!0}):window.removeEventListener(Re,$,{capture:!0,passive:!0})}}}function Q(){h.removeEventListener("playing",Q),h.removeEventListener("abort",Q),h.removeEventListener("error",Q),v=!1,N(!1)}function $(){N(!0)}if(Iu()){const ae=o.createMediaStreamDestination(),fe=document.createElement("div");fe.innerHTML="<audio x-webkit-airplay='deny'></audio>",h=fe.children.item(0),h.controls=!1,h.disableRemotePlayback=!0,h.preload="auto",h.srcObject=ae.stream,N(!0)}zr.on(js.STATE_CHANGE,function b(){_(!0)}),_(!1)});return function(o){return i.apply(this,arguments)}}()(Wl)}(),!Wl)throw new Pe(Ie.NOT_SUPPORTED,"can not create audio context");return Wl}return Wl}function f1(n){if(function(){if(null!==m1)return m1;const c=p1(),h=c.createBufferSource(),g=c.createGain(),p=c.createGain();h.connect(g),h.connect(p),h.disconnect(g);let v=!1;try{h.disconnect(g)}catch{v=!0}return h.disconnect(),m1=v,v}())return;Yt("debug",["WebAudio"],"polyfillAudioNode");const i=n.connect,o=n.disconnect;n.connect=(c,h,g)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(c)||(c instanceof AudioNode?(n._inputNodes.push(c),i.call(n,c,h,g)):i.call(n,c,h)),n),n.disconnect=(c,h,g)=>{o.call(n),c?nL(n._inputNodes,c):n._inputNodes=[];for(const p of n._inputNodes)i.call(n,p)}}let m1=null;function _V(n,i){const o=1/i,c=p1();let h=c.createGain();h.gain.value=0,h.connect(c.destination);let g=!1;const p=()=>{if(g)return void(h=null);const v=c.createOscillator();v.onended=p,v.connect(h),v.start(0),v.stop(c.currentTime+o),n(c.currentTime)};return p(),()=>{g=!0}}const Iv=oe.prefix("[inject-node]");class wk{constructor(){q(this,"nodeLists",[]),q(this,"prevNode",void 0),q(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(i,o){Iv.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),i.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(o),this.nodeLists.forEach((c,h)=>{const g=this.nodeLists[h+1];g&&c.connect(g)})):i.connect(o),this.nextNode=o,this.prevNode=i}disconnect(){var i;Iv.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(o=>{o.disconnect()}),null===(i=this.prevNode)||void 0===i||i.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(i){Iv.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(Iv.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(i),i.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(i),i.connect(this.nextNode)),this.nodeLists.push(i)):Iv.debug("add node is called before inject node connected")}removeNode(i){Iv.debug("remove node in inject node, current list:",this.nodeLists.length);const o=this.nodeLists.indexOf(i);if(-1===o)return void Iv.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[o+1],h=this.nodeLists[o-1];0===o&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(i),this.prevNode.connect(c||this.nextNode)),o===this.nodeLists.length-1&&this.nextNode&&h&&(h.disconnect(i),h.connect(this.nextNode)),0!==o&&o!==this.nodeLists.length-1&&(h.disconnect(i),h.connect(c)),Iv.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class Rk extends rs{get processSourceNode(){return this.sourceNode}set processedNode(i){var o;if(!this.isDestroyed&&this._processedNode!==i){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(o=this._processedNode)||void 0===o||o.disconnect(),this._processedNode=i,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),q(this,"outputNode",void 0),q(this,"outputTrack",void 0),q(this,"isPlayed",!1),q(this,"sourceNode",void 0),q(this,"analyserNode",void 0),q(this,"context",void 0),q(this,"audioBufferNode",void 0),q(this,"destNode",void 0),q(this,"injectNode",void 0),q(this,"audioOutputLevel",0),q(this,"_processedNode",void 0),q(this,"playNode",void 0),q(this,"isDestroyed",!1),q(this,"onNoAudioInput",void 0),q(this,"isNoAudioInput",!1),q(this,"_noAudioInputCount",0),this.context=p1(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),f1(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new wk}startGetAudioBuffer(i){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(i),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(Tc.ON_AUDIO_BUFFER,function(c){for(let h=0;h<c.outputBuffer.numberOfChannels;h+=1){const g=c.outputBuffer.getChannelData(h);for(let p=0;p<g.length;p+=1)g[p]=0}return c.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Rc().webAudioMediaStreamDest)throw new Pe(Ie.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(i){"running"!==this.context.state&&Nh(()=>{zr.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=i||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||Iu()||gv()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const i=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(i);let o=0;for(let c=0;c<i.length;c++)o+=c<64?Math.abs(10*i[c]):Math.abs(6*i[c]/15);return o/i.length/255}checkHasAudioInput(){var i=arguments,o=this;return L(function*(){let c=i.length>0&&void 0!==i[0]?i[0]:0;if(c>5)return o.isNoAudioInput=!0,o.onNoAudioInput&&o.onNoAudioInput(),!1;if(Iu()||gv()?"suspended"===o.context.state&&o.context.resume():"running"!==o.context.state&&o.context.resume(),!o.analyserNode)return!1;const h=new Uint8Array(o.analyserNode.frequencyBinCount);o.analyserNode.getByteFrequencyData(h);let g=!1;for(let p=0;p<h.length;p++)0!==h[p]&&(g=!0);return g?(o.isNoAudioInput=!1,!0):(yield lc(200),(yield o.checkHasAudioInput(c?c+1:1))&&g)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(i){this.outputNode.gain.setValueAtTime(i,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(i){this.injectNode.addNode(i)}removeAudioNode(i){this.injectNode.removeNode(i)}disconnect(){var i,o;null===(i=this.processedNode)||void 0===i||i.disconnect(),null===(o=this.sourceNode)||void 0===o||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var i;this.processedNode?null===(i=this.processedNode)||void 0===i||i.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class s9 extends Rk{get isFreeze(){return!1}constructor(i,o){var c,h;if(super(),c=this,q(this,"sourceNode",void 0),q(this,"track",void 0),q(this,"audioElement",void 0),q(this,"isCurrentTrackCloned",!1),q(this,"isRemoteTrack",!1),q(this,"rebuildWebAudio",L(function*(){if(oe.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void oe.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>oe.info("resume success")),oe.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const v=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?v.stop():c.isCurrentTrackCloned=!0;const _=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(_),f1(c.sourceNode),c.analyserNode=c.context.createAnalyser();const y=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(y,c.context.currentTime),f1(c.outputNode),c.emit(Tc.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=_,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==i.kind)throw new Pe(Ie.UNEXPECTED_ERROR);this.track=i;const g=new MediaStream([this.track]);this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(g),f1(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=g;const p=Ki();o&&p.os===pa.IOS&&Number(null===(h=p.osVersion)||void 0===h?void 0:h.split(".")[0])<15&&(zr.on(js.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(i){this.sourceNode.disconnect(),this.track=i,this.isCurrentTrackCloned=!1;const o=new MediaStream([i]);this.sourceNode=this.context.createMediaStreamSource(o),f1(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Tc.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),zr.off("state-change",this.rebuildWebAudio),super.destroy()}}function Gx(n,i){return Ok.apply(this,arguments)}function Ok(){return Ok=L(function*(n,i){const o=(h,g)=>h?"number"!=typeof h?h.max||h.exact||h.ideal||h.min||g:h:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:o(i.height,1080),maxWidth:o(i.width,1920)}}};return i.frameRate&&"number"!=typeof i.frameRate?(c.video.mandatory.maxFrameRate=i.frameRate.max,c.video.mandatory.minFrameRate=i.frameRate.min):"number"==typeof i.frameRate&&(c.video.mandatory.maxFrameRate=i.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),Ok.apply(this,arguments)}function Wx(n){return Dk.apply(this,arguments)}function Dk(){return Dk=L(function*(n){const i=yield vV(n.mediaSource),o=yield(c=i,new jn((h,g)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const _=document.createElement("div");_.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",_.setAttribute("style","height: 12%;");const y=document.createElement("div");y.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const b=document.createElement("div");b.setAttribute("style","text-align: right; padding: 16px 0;");const C=document.createElement("button");C.innerHTML="cancel",C.setAttribute("style","width: 85px;"),C.onclick=()=>{document.body.removeChild(R);const N=new Error("NotAllowedError");N.name="NotAllowedError",g(N)},b.appendChild(C),v.appendChild(_),v.appendChild(y),v.appendChild(b);const R=document.createElement("div");R.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),R.appendChild(p),R.appendChild(v),document.body.appendChild(R),c.map(N=>{if(N.id){const j=document.createElement("div");j.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let Q=N.thumbnail;const{width:$}=Q.getSize();$>1920&&(Q=Q.resize({width:1920})),j.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+Q.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+N.name.replace(/[\u00A0-\u9999<>\&]/g,function(ae){return"&#"+ae.charCodeAt(0)+";"})+"</span>",j.onclick=()=>{document.body.removeChild(R),h(N.id)},y.appendChild(j)}})}));var c;return yield Gx(o,n)}),Dk.apply(this,arguments)}function vV(n){return Kx.apply(this,arguments)}function Kx(){return Kx=L(function*(n){let i=["window","screen"];"application"!==n&&"window"!==n||(i=["window"]),"screen"===n&&(i=["screen"]);const o=AV();if(!o)throw new Pe(Ie.ELECTRON_IS_NULL);let c=null;try{c=o.desktopCapturer.getSources({types:i})}catch{c=null}c&&c.then||(c=new jn((h,g)=>{o.desktopCapturer.getSources({types:i},(p,v)=>{p?g(p):h(v)})}));try{return yield c}catch(h){throw new Pe(Ie.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}),Kx.apply(this,arguments)}let kk=null;function AV(){if(kk)return kk;try{return kk=window.require("electron"),kk}catch{return null}}const zx=new au("safari");let Gy=!1,a9=!1;function ku(n,i){return Nk.apply(this,arguments)}function Nk(){return Nk=L(function*(n,i){let o=0,c=null;for(;o<2;)try{c=yield XK(n,i,o>0);break}catch(h){if(h instanceof Pe)throw oe.error("[".concat(i,"] ").concat(h.toString())),Yt("error",[],"getLocalStream",{config:n,id:i},h.toString()),h;const g=Pk(h.name||h.code||h,h.message);if(g.code===Ie.MEDIA_OPTION_INVALID){oe.debug("[".concat(i,"] detect media option invalid, retry")),Ln("debug",[],"[".concat(i,"] detect media option invalid, retry")),o+=1,yield lc(500);continue}throw oe.error("[".concat(i,"] ").concat(g.toString())),Yt("error",[],"getLocalStream",{config:n,id:i},g.toString()),g}if(!c)throw new Pe(Ie.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),Nk.apply(this,arguments)}function XK(n,i,o){return yV.apply(this,arguments)}function yV(){return yV=L(function*(n,i,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Pe(Ie.NOT_SUPPORTED,"can not find getUserMedia");o&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const c=Rc(),h=new MediaStream;if(n.audioSource&&h.addTrack(n.audioSource),n.videoSource&&h.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return oe.debug("Using Video Source/ Audio Source"),Ln("debug",[],"Using Video Source/ Audio Source"),h;if(n.screen)if(AV())jS(h,n.screen.sourceId?yield Gx(n.screen.sourceId,n.screen):yield Wx(n.screen));else if(mM()&&n.screen.extensionId&&n.screen.mandatory){if(!c.getStreamFromExtension)throw new Pe(Ie.NOT_SUPPORTED,"This browser does not support screen sharing");oe.debug("[".concat(i,'] Screen access on chrome stable, looking for extension"')),Ln("debug",[],"[".concat(i,'] Screen access on chrome stable, looking for extension"'));const C=yield(g=n.screen.extensionId,p=i,new jn((R,N)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},j=>{if(!j||!j.streamId)return oe.error("[".concat(p,"] No response from Chrome Plugin. Plugin not installed properly"),j),Yt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:p},"No response from Chrome Plugin. Plugin not installed properly, ".concat(j)),void N(new Pe(Ie.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));R(j.streamId)})}catch(j){oe.error("[".concat(p,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),j.toString()),Yt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:p},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(j.toString())),N(new Pe(Ie.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=C,jS(h,yield navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(c.getDisplayMedia){n.screen.mediaSource&&YT(n.screen.mediaSource);const C={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:"screen"===n.screen.mediaSource?"monitor":n.screen.mediaSource};oe.debug("[".concat(i,"] getDisplayMedia:"),JSON.stringify({video:C,audio:!!n.screenAudio})),Ry("debug",["mediaDevices",i],"getDisplayMedia",{video:C,audio:!!n.screenAudio,trackId:i}),jS(h,yield navigator.mediaDevices.getDisplayMedia({video:C,audio:!!n.screenAudio}))}else{if(!Es())throw oe.error("[".concat(i,"] This browser does not support screenSharing")),new Pe(Ie.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&YT(n.screen.mediaSource);const C={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};oe.debug("[".concat(i,"] getUserMedia: ").concat(JSON.stringify(C))),Ry("debug",["mediaDevices",i],"getUserMedia",C),jS(h,yield navigator.mediaDevices.getUserMedia(C))}}var g,p;if(!n.video&&!n.audio)return h;let v={video:n.video,audio:n.audio},_=Bt("MEDIA_DEVICE_CONSTRAINTS");if(_)try{"string"==typeof _&&(_=JSON.parse(_)),v=function C(R,N){if(!x9(R)||!x9(N)||Array.isArray(R)&&!Array.isArray(N)||!Array.isArray(R)&&Array.isArray(N))return N;if(Array.isArray(N)&&Array.isArray(R)){const j=[...R];for(let Q=0;Q<N.length;Q++)j[Q]=C(R[Q],N[Q]);return j}{const j=GS({},R);for(const Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&(j[Q]=Object.prototype.hasOwnProperty.call(R,Q)?C(R[Q],N[Q]):N[Q]);return j}}(v,_),Ln("debug",["mediaDevices",i],"merge configConstraints ".concat(JSON.stringify(_)))}catch{}oe.debug("[".concat(i,"] GetUserMedia"),JSON.stringify(v)),Ry("debug",["mediaDevices",i],"getUserMedia",v),Ki();let y,b=null;(Md()||Iu()||wD())&&(b=yield zx.lock());try{y=yield navigator.mediaDevices.getUserMedia(v)}catch(C){throw b&&b(),C}return v.audio&&(Gy=!0),v.video&&(a9=!0),jS(h,y),b&&b(),h}),yV.apply(this,arguments)}function Pk(n,i){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Pe(Ie.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(i));case"NotFoundError":case"DevicesNotFoundError":return new Pe(Ie.DEVICE_NOT_FOUND,"".concat(n,": ").concat(i));case"NotSupportedError":return new Pe(Ie.NOT_SUPPORTED,"".concat(n,": ").concat(i));case"NotReadableError":return new Pe(Ie.NOT_READABLE,"".concat(n,": ").concat(i));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Pe(Ie.PERMISSION_DENIED,"".concat(n,": ").concat(i));case"ConstraintNotSatisfiedError":return new Pe(Ie.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(i));default:return oe.error("getUserMedia unexpected error",n),Yt("error",[],"handleGetUserMediaError",void 0,n),new Pe(Ie.UNEXPECTED_ERROR,"".concat(n,": ").concat(i))}}function jS(n,i){const o=n.getVideoTracks()[0],c=n.getAudioTracks()[0],h=i.getVideoTracks()[0],g=i.getAudioTracks()[0];g&&(c&&n.removeTrack(c),n.addTrack(g)),h&&(o&&n.removeTrack(o),n.addTrack(h))}const hl=new class extends rs{get state(){return this._state}set state(n){n!==this._state&&(this.emit(Gf.STATE_CHANGE,n),this._state=n)}constructor(){super(),q(this,"_state",Ig.IDLE),q(this,"isAccessMicrophonePermission",!1),q(this,"isAccessCameraPermission",!1),q(this,"lastAccessMicrophonePermission",!1),q(this,"lastAccessCameraPermission",!1),q(this,"checkdeviceMatched",!1),q(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Bt("ENUMERATE_DEVICES_INTERVAL")||N8()&&xT())&&this.updateDevicesInfo()},Bt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>oe.error(n.toString()))}enumerateDevices(n,i){var o=arguments,c=this;return L(function*(){let h=o.length>2&&void 0!==o[2]&&o[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Pe(Ie.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),p=c.checkMediaDeviceInfoIsOk(g);let v=!c.isAccessMicrophonePermission&&n,_=!c.isAccessCameraPermission&&i;p.audio&&(v=!1),p.video&&(_=!1);let y=null,b=null,C=null;if(!h&&(v||_)){if(zx.isLocked&&(oe.debug("[device manager] wait GUM lock"),(yield zx.lock())(),oe.debug("[device manager] GUM unlock")),Gy&&(v=!1,c.isAccessMicrophonePermission=!0),a9&&(_=!1,c.isAccessCameraPermission=!0),oe.debug("[device manager] check media device permissions",n,i,v,_),v&&_){try{C=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(R){const N=Pk(R.name||R.code||R,R.message);if(N.code===Ie.PERMISSION_DENIED)throw N;oe.warning("getUserMedia failed in getDevices",N)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(v){try{y=yield navigator.mediaDevices.getUserMedia({audio:n})}catch(R){const N=Pk(R.name||R.code||R,R.message);if(N.code===Ie.PERMISSION_DENIED)throw N;oe.warning("getUserMedia failed in getDevices",N)}c.isAccessMicrophonePermission=!0}else if(_){try{b=yield navigator.mediaDevices.getUserMedia({video:i})}catch(R){const N=Pk(R.name||R.code||R,R.message);if(N.code===Ie.PERMISSION_DENIED)throw N;oe.warning("getUserMedia failed in getDevices",N)}c.isAccessCameraPermission=!0}oe.debug("[device manager] mic permission",n,"cam permission",i)}try{const R=yield navigator.mediaDevices.enumerateDevices();return y&&y.getTracks().forEach(N=>N.stop()),b&&b.getTracks().forEach(N=>N.stop()),C&&C.getTracks().forEach(N=>N.stop()),y=null,b=null,C=null,R}catch(R){return y&&y.getTracks().forEach(N=>N.stop()),b&&b.getTracks().forEach(N=>N.stop()),C&&C.getTracks().forEach(N=>N.stop()),y=null,b=null,C=null,new Pe(Ie.ENUMERATE_DEVICES_FAILED,R.toString()).throw()}})()}getRecordingDevices(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!0,!1,o)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!1,!0,o)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0];return(yield i.enumerateDevices(!0,!1,o)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(n){let i=null;return this.deviceInfoMap.forEach(o=>{o.device.label===n&&(i=o.device.deviceId)}),i}getDeviceById(n){var i=this;return L(function*(){const o=(yield i.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===n);if(!o)throw new Pe(Ie.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return o})()}init(){var n=this;return L(function*(){n.state=Ig.INITING;try{yield n.updateDevicesInfo(),n.state=Ig.INITEND}catch(i){throw oe.warning("Device Detection functionality cannot start properly.",i.toString()),n.state=Ig.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new Pe(Ie.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),i}})()}updateDevicesInfo(){var n=this;return L(function*(){const i=yield n.enumerateDevices(!0,!0,!0),o=Date.now(),c=[];if(i[0]&&i[0].label&&!1===n.checkdeviceMatched){n.checkdeviceMatched=!0;const g=i.find(v=>"audioinput"===v.kind&&"default"===v.deviceId),p=i.find(v=>"audiooutput"===v.kind&&"default"===v.deviceId);g&&p?p.groupId===g.groupId?oe.debug("[device-check] default input ".concat(g.label," and output ").concat(p.label," is the same group")):oe.warning("[device-check] default input ".concat(g.label," and output ").concat(p.label," is not the same group")):oe.debug("[device-check] default input or output not found")}const h=n.checkMediaDeviceInfoIsOk(i);if(i.forEach(g=>{if(!g.deviceId)return;const p=n.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(p?p.state:"INACTIVE")){const v={initAt:o,updateAt:o,device:g,state:"ACTIVE"};n.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),v),c.push(v)}p&&(p.updateAt=o)}),n.deviceInfoMap.forEach((g,p)=>{"ACTIVE"===g.state&&g.updateAt!==o&&(g.state="INACTIVE",c.push(g))}),n.state!==Ig.INITEND)return h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),void(h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(Gf.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":n.lastAccessCameraPermission&&n.isAccessCameraPermission&&n.emit(Gf.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(Gf.PLAYOUT_DEVICE_CHANGED,g)}}),h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(n){const i=n.filter(h=>"audioinput"===h.kind),o=n.filter(h=>"videoinput"===h.kind),c={audio:!1,video:!1};for(const h of i)if(h.label&&h.deviceId){c.audio=!0;break}for(const h of o)if(h.label&&h.deviceId){c.video=!0;break}return c}};var EV;let c9=sc("AudioElementPlayCenter")(EV=class{constructor(){q(this,"onAutoplayFailed",void 0),q(this,"elementMap",new Map),q(this,"elementStateMap",new Map),q(this,"elementsNeedToResume",[]),q(this,"sinkIdMap",new Map),q(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,o]=n;const c=this.elementStateMap.get(i),h=o.srcObject.getAudioTracks()[0];yS()?h&&"live"===h.readyState&&"running"===zr.curState&&(oe.debug("auto resume after interruption for iOS 15"),Ln("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS15"),o.pause(),o.play()):c&&"paused"===c&&h&&"live"===h.readyState&&"running"===zr.curState&&(oe.debug("auto resume after interruption for iOS"),Ln("debug",["AudioElementPlayCenter",i],"auto resume after interruption for iOS"),o.play())})}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,o]=n;const c=o.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(oe.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),Yt("debug",["AudioElementPlayCenter",i],"autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),zr.on(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zr.on(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),zr.on(js.STATE_CHANGE,()=>{Iu()&&"suspended"===zr.prevState&&"running"===zr.curState&&this.autoResumeAfterInterruption()})}setSinkID(n,i){var o=this;return L(function*(){const c=o.elementMap.get(n);if(o.sinkIdMap.set(n,i),c)try{yield c.setSinkId(i)}catch(h){throw new Pe(Ie.PERMISSION_DENIED,"can not set sink id: "+h.toString())}})()}play(n,i,o,c){if(this.elementMap.has(i))return;const h=document.createElement("audio");h.autoplay=!0,h.srcObject=new MediaStream([n]),this.bindAudioElementEvents(i,h),this.elementMap.set(i,h),this.elementStateMap.set(i,Xs.INIT),this.setVolume(i,o);const g=this.sinkIdMap.get(i);if(g)try{h.setSinkId(g).catch(v=>{oe.warning("[".concat(i,"] set sink id failed"),v.toString()),Ry("warning",["HTMLAudioElement",i],"setSinkId",v.toString())})}catch(v){oe.warning("[".concat(i,"] set sink id failed"),v.toString())}const p=h.play();p&&p.then&&p.catch(v=>{c&&Kt.autoplayFailed(c,"audio",v.message,i),oe.warning("audio element play warning",v.toString()),Ry("warning",["HTMLAudioElement",i],"play",v.toString()),this.elementMap.has(i)&&"NotAllowedError"===v.name&&(oe.warning("detected audio element autoplay failed"),Yt("warning",["AudioElementPlayCenter",i],"play",v.toString()),this.elementsNeedToResume.push(h),Nh(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),mV()}))})}updateTrack(n,i){const o=this.elementMap.get(n);o&&(o.srcObject=new MediaStream([i]))}isPlaying(n){return this.elementMap.has(n)}setVolume(n,i){const o=this.elementMap.get(n);o&&(i=Math.max(0,Math.min(100,i)),o.volume=i/100)}stop(n){const i=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!i)return;const o=this.elementsNeedToResume.indexOf(i);this.elementsNeedToResume.splice(o,1),i.srcObject=null,i.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,i){bV.forEach(o=>{i.addEventListener(o,c=>{const h=this.elementStateMap.get(n),g="pause"===c.type?"paused":c.type;oe.debug("[".concat(n,"] audio-element-status change ").concat(h," => ").concat(g)),Bd("debug",["HTMLAudioElement",n],"statusChange","".concat(h," => ").concat(g)),this.elementStateMap.set(n,g)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(i=>{i.play().then(o=>{oe.debug("Auto resume audio element success"),Yt("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(o=>{oe.warning("Auto resume audio element failed!",o),Yt("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",o.toString())})}),this.elementsNeedToResume=[]};new jn(i=>{document.body?i():window.addEventListener("load",()=>i())}).then(()=>{const i=Ki();"Android"!==i.os||"Chrome"!==i.name&&i.name!==xi.WECHAT?(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)):document.body.addEventListener("click",n,!0)})}})||EV;const bV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],Kl=new c9;function ss(){return function(n,i,o){const c=n[i];"function"==typeof c&&(o.value=function(){this._isClosed&&new Pe(Ie.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var h=arguments.length,g=new Array(h),p=0;p<h;p++)g[p]=arguments[p];const v=c.apply(this,g);return v instanceof jn?new jn((_,y)=>{v.then(_).catch(y)}):v})}}var SV,CV,gs,u9,l9,d9,g1,Mk,xk,IV,Yx,h9,_a,TV,p9,f9,m9,g9,QS,_9,v9,A9,y9,qx,E9,b9,ja,Jx;function wV(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Lk(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?wV(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wV(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Qa=(SV=sc("LocalAudioTrack","getTrackId"),CV=ss(),gs=Cv("LocalAudioTrack","_enabledMutex"),u9=ss(),l9=Cv("LocalAudioTrack","_enabledMutex"),d9=ss(),g1=d1({report:Kt}),Mk=ss(),xk=ss(),IV=ss(),Yx=ss(),SV((rr((_a=class extends Qx{get isPlaying(){return this._useAudioElement?Kl.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,i,o){super(n,o),q(this,"trackMediaType","audio"),q(this,"_encoderConfig",void 0),q(this,"_source",void 0),q(this,"_enabled",!0),q(this,"_volume",100),q(this,"_useAudioElement",!1),q(this,"_bypassWebAudio",!1),q(this,"processor",void 0),q(this,"processorContext",void 0),q(this,"processorDestination",void 0),this._encoderConfig=i,this._source=new s9(n),Bt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new C9(this._source.context,this.getTrackId()),this.processorDestination=new S9(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Tc.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(n){Wr(n,"volume",0,1e3);const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&Kl.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return oe.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void i.onSuccess();const o=this._source.createOutputTrack();this._mediaStreamTrack!==o&&(this._mediaStreamTrack=o,Mo(this,fr.NEED_REPLACE_TRACK,this).then(()=>{oe.debug("[".concat(this.getTrackId(),"] replace web audio track success")),Ln("debug",this,"replace web audio track success")}).catch(c=>{oe.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),Ln("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}i.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),n]});if(!i._useAudioElement)throw new Pe(Ie.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Kl.setSinkID(i.getTrackId(),n)}catch(c){throw o.onError(c),c}o.onSuccess()})()}setEnabled(n,i,o){var c=this;return L(function*(){if(!o){if(n===c._enabled)return;c.stateCheck("enabled",n)}if(oe.info("[".concat(c.getTrackId(),"] start setEnabled"),n),Yt("info",c,"setEnabled",n),n){c._originMediaStreamTrack.enabled=!0;try{o||(c._enabled=!0),yield Mo(c,fr.NEED_ENABLE_TRACK,c),oe.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(n," success")),Yt("info",c,"setEnabled",n,"success")}catch(h){throw o||(c._enabled=!1),oe.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Yt("error",c,"setEnabled",n,h.toString()),h}}else{c._originMediaStreamTrack.enabled=!1,o||(c._enabled=!1);try{yield Mo(c,fr.NEED_DISABLE_TRACK,c)}catch(h){throw o||(c._enabled=!0),oe.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Yt("info",c,"setEnabled",n,h.toString()),h}}})()}setMuted(n){var i=this;return L(function*(){n!==i._muted&&(i.stateCheck("muted",n),i._muted=n,i._originMediaStreamTrack.enabled=!n,oe.debug("[".concat(i.getTrackId(),"] start set muted: ").concat(n)),Yt("debug",i,"setMuted",n),n?yield Mo(i,fr.NEED_MUTE_TRACK,i):yield Mo(i,fr.NEED_UNMUTE_TRACK,i))})()}getStats(){return v1(()=>{oe.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),Ln("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),wv(this,fr.GET_STATS)||Lk({},e3)}setAudioFrameCallback(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Tc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(Tc.ON_AUDIO_BUFFER),this._source.on(Tc.ON_AUDIO_BUFFER,o=>n(o))}play(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] start audio playback")),Yt("debug",this,"play"),this._useAudioElement?(oe.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Ln("debug",this,"start audio playback in element"),Kl.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),n.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] stop audio playback")),Yt("debug",this,"stop"),this._useAudioElement?Kl.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Kl.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(n,i){var o=this;return L(function*(){o._originMediaStreamTrack!==n&&(o._originMediaStreamTrack.removeEventListener("ended",o._handleTrackEnded),n.addEventListener("ended",o._handleTrackEnded),i&&o._originMediaStreamTrack.stop(),o._originMediaStreamTrack=n,o.processor&&o.processor.updateInput({track:n,context:o.processorContext}),o._mediaStreamTrack!==o._source.outputTrack?(o._mediaStreamTrack=o._originMediaStreamTrack,o._updatePlayerSource(),yield Mo(o,fr.NEED_REPLACE_TRACK,o)):o._source.updateTrack(o._originMediaStreamTrack))})()}renewMediaStreamTrack(n){return jn.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new Pe(Ie.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new Pe(Ie.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const i=this.processor;null===(n=this._source.processSourceNode)||void 0===n||n.disconnect(),this.processor._source=!1,this.processor=void 0,i.reset()}bindProcessorDestinationEvents(){var n=this;this.processorDestination.on(Ud.ON_TRACK,function(){var i=L(function*(o){o?o!==n._mediaStreamTrack&&(n._mediaStreamTrack=o,n._updatePlayerSource(),yield Mo(n,fr.NEED_REPLACE_TRACK,n)):n._mediaStreamTrack!==n._originMediaStreamTrack&&(n._mediaStreamTrack=n._originMediaStreamTrack,n._updatePlayerSource(),yield Mo(n,fr.NEED_REPLACE_TRACK,n))});return function(o){return i.apply(this,arguments)}}()),this.processorDestination.on(Ud.ON_NODE,i=>{this._source.processedNode=i})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Ud.ON_TRACK),this.processorDestination.removeAllListeners(Ud.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(cl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(cl.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[CV],Object.getOwnPropertyDescriptor(_a.prototype,"setPlaybackDevice"),_a.prototype),rr(_a.prototype,"setEnabled",[gs,u9],Object.getOwnPropertyDescriptor(_a.prototype,"setEnabled"),_a.prototype),rr(_a.prototype,"setMuted",[l9,d9,g1],Object.getOwnPropertyDescriptor(_a.prototype,"setMuted"),_a.prototype),rr(_a.prototype,"getStats",[Mk],Object.getOwnPropertyDescriptor(_a.prototype,"getStats"),_a.prototype),rr(_a.prototype,"setAudioFrameCallback",[xk],Object.getOwnPropertyDescriptor(_a.prototype,"setAudioFrameCallback"),_a.prototype),rr(_a.prototype,"play",[IV],Object.getOwnPropertyDescriptor(_a.prototype,"play"),_a.prototype),rr(_a.prototype,"stop",[Yx],Object.getOwnPropertyDescriptor(_a.prototype,"stop"),_a.prototype),h9=_a))||h9),Wy=(TV=sc("MicrophoneAudioTrack","getTrackId"),p9=ss(),f9=Cv("MicrophoneAudioTrack","_enabledMutex"),m9=ss(),TV((rr((QS=class extends Qa{constructor(n,i,o,c){super(n,i.encoderConfig?HT(i.encoderConfig):{},c),q(this,"_config",void 0),q(this,"_deviceName","default"),q(this,"_constraints",void 0),q(this,"_originalConstraints",void 0),q(this,"_enabled",!0),pr("info",this,"constructor",{trackId:c,deviceId:n.label,constraints:o}),this._config=i,this._constraints=o,this._originalConstraints=o,this._deviceName=n.label,"boolean"==typeof i.bypassWebAudio&&(this._bypassWebAudio=i.bypassWebAudio),yS()&&zr.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.MIC_AUDIO_TRACK_SET_DEVICE,options:[i.getTrackId(),n]});if(oe.info("[".concat(i.getTrackId(),"] start set device to ").concat(n)),Yt("info",i,"setDevice",n),i._enabled)try{const c=yield hl.getDeviceById(n),h={};h.audio=Lk({},i._constraints),h.audio.deviceId={exact:n},i._originMediaStreamTrack.stop();let g=null;try{g=yield ku(h,i.getTrackId())}catch(p){throw oe.error("[".concat(i.getTrackId(),"] setDevice failed"),p.toString()),Yt("error",i,"setDevice",n,p.toString()),g=yield ku({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),p}yield i._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),i._deviceName=c.label,i._config.microphoneId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}else try{const c=yield hl.getDeviceById(n);i._deviceName=c.label,i._config.microphoneId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}o.onSuccess(),oe.info("[".concat(i.getTrackId(),"] set device to ").concat(n," success")),Yt("info",i,"setDevice",n,"success")})()}setEnabled(n,i,o){var c=()=>super.setEnabled,h=this;return L(function*(){if(i)return oe.debug("[".concat(h.getTrackId,"] setEnabled false (do not close microphone)")),Ln("debug",h,"setEnabled false (do not close microphone)"),yield c().call(h,n);if(!o){if(n===h._enabled)return;h.stateCheck("enabled",n)}if(oe.info("[".concat(h.getTrackId(),"] start setEnabled"),n),Yt("info",h,"setEnabled",n),!n){h._originMediaStreamTrack.onended=null,h._originMediaStreamTrack.stop(),o||(h._enabled=!1);try{yield Mo(h,fr.NEED_DISABLE_TRACK,h)}catch(v){throw oe.error("[".concat(h.getTrackId(),"] setEnabled false failed"),v.toString()),Yt("error",h,"setEnabled",n,v.toString()),v}return}const g=Lk({},h._constraints),p=hl.searchDeviceIdByName(h._deviceName);p&&!g.deviceId&&(g.deviceId=p);try{o||(h._enabled=!0);const v=yield ku({audio:h._constraints},h.getTrackId());yield h._updateOriginMediaStreamTrack(v.getAudioTracks()[0],!1),yield Mo(h,fr.NEED_ENABLE_TRACK,h)}catch(v){throw o||(h._enabled=!1),oe.error("[".concat(h.getTrackId(),"] setEnabled true failed"),v.toString()),Yt("error",h,"setEnabled",n,v.toString()),v}oe.info("[".concat(h.getTrackId(),"] setEnabled success")),Yt("info",h,"setEnabled",n,"success")})()}close(){super.close(),yS()&&zr.unbindInterruptDetectorTrack(this)}onTrackEnded(){var n=this;if((Iu()||gv())&&this._enabled&&!this._isClosed&&zr.duringInterruption){const i=function(){var o=L(function*(){zr.off(js.IOS_INTERRUPTION_END,i),n._enabled&&!n._isClosed&&(oe.debug("[".concat(n.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),Ln("debug",n,"try capture microphone media device for interrupted iOS device"),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return o.apply(this,arguments)}}();zr.on(js.IOS_INTERRUPTION_END,i)}else oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}renewMediaStreamTrack(n){var i=this;return L(function*(){const o=n||i._constraints,c=hl.searchDeviceIdByName(i._deviceName);c&&!o.deviceId&&(o.deviceId=c),i._constraints=o,i._originMediaStreamTrack.stop();const h=yield ku({audio:i._constraints},i.getTrackId());yield i._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var n=this;this.processorContext.on(cl.REQUEST_UPDATE_CONSTRAINTS,function(){var i=L(function*(o,c,h){try{const g=Object.assign({},n._originalConstraints,...o);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this.processorContext.on(cl.REQUEST_CONSTRAINTS,function(){var i=L(function*(o){o(n._originMediaStreamTrack.getSettings())});return function(o){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[p9],Object.getOwnPropertyDescriptor(QS.prototype,"setDevice"),QS.prototype),rr(QS.prototype,"setEnabled",[f9,m9],Object.getOwnPropertyDescriptor(QS.prototype,"setEnabled"),QS.prototype),g9=QS))||g9),RV=(_9=sc("BufferSourceAudioTrack","getTrackId"),v9=ss(),A9=ss(),y9=ss(),qx=ss(),E9=ss(),_9((rr((ja=class extends Qa{constructor(n,i,o,c){super(i.createOutputTrack(),o,c),q(this,"source",void 0),q(this,"_bufferSource",void 0),pr("info",this,"constructor",{trackId:c}),this.source=n,this._bufferSource=i,this._bufferSource.on(Tc.AUDIO_SOURCE_STATE_CHANGE,h=>{this.emit(Fd.SOURCE_STATE_CHANGE,h)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),n,this.duration]});n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer(),i.onSuccess()}pauseProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),n.onSuccess()}seekAudioBuffer(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(n),i.onSuccess()}resumeProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),n.onSuccess()}stopProcessAudioBuffer(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),n.onSuccess()}}).prototype,"startProcessAudioBuffer",[v9],Object.getOwnPropertyDescriptor(ja.prototype,"startProcessAudioBuffer"),ja.prototype),rr(ja.prototype,"pauseProcessAudioBuffer",[A9],Object.getOwnPropertyDescriptor(ja.prototype,"pauseProcessAudioBuffer"),ja.prototype),rr(ja.prototype,"seekAudioBuffer",[y9],Object.getOwnPropertyDescriptor(ja.prototype,"seekAudioBuffer"),ja.prototype),rr(ja.prototype,"resumeProcessAudioBuffer",[qx],Object.getOwnPropertyDescriptor(ja.prototype,"resumeProcessAudioBuffer"),ja.prototype),rr(ja.prototype,"stopProcessAudioBuffer",[E9],Object.getOwnPropertyDescriptor(ja.prototype,"stopProcessAudioBuffer"),ja.prototype),b9=ja))||b9),zl=sc("MixingAudioTrack","getTrackId")(Jx=class extends Qa{get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=p1().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,as(8,"track-mix-")),q(this,"trackList",void 0),q(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return-1!==this.trackList.indexOf(n)}addAudioTrack(n){if(-1!==this.trackList.indexOf(n))return oe.debug("track ".concat(n.getTrackId()," is already added")),void Ln("debug",this,"track already added");oe.debug("add ".concat(n.getTrackId()," to mixing track")),Yt("debug",this,"addAudioTrack",n.getTrackId()),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()}removeAudioTrack(n){if(-1!==this.trackList.indexOf(n)){oe.debug("remove ".concat(n.getTrackId()," from mixing track")),Yt("debug",this,"removeAudioTrack",n.getTrackId());try{n._source.outputNode.disconnect(this.destNode)}catch{}nL(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}})||Jx;class S9 extends rs{constructor(i){super(),q(this,"name","AudioProcessorDestination"),q(this,"ID","0"),q(this,"inputTrack",void 0),q(this,"inputNode",void 0),q(this,"audioProcessorContext",void 0),q(this,"_source",void 0),this.audioProcessorContext=i}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Pe(Ie.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Pe(Ie.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(Ud.ON_TRACK,void 0),this.emit(Ud.ON_NODE,void 0)}updateInput(i){if(i.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");i.track&&this.inputTrack!==i.track&&(this.inputTrack=i.track,this.emit(Ud.ON_TRACK,this.inputTrack)),i.node&&this.inputNode!==i.node&&(this.inputNode=i.node,this.emit(Ud.ON_NODE,this.inputNode))}}class C9 extends rs{constructor(i,o){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"audioContext",void 0),q(this,"trackId",void 0),this.audioContext=i,this.trackId=o}getConstraints(){var i=this;return L(function*(){return jd(i,cl.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(i,o){var c=this;return L(function*(){var h;return oe.info("processor ".concat(o.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(o,i),Mo(c,cl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ng(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(i){var o=this;return L(function*(){var c;if(o.constraintsMap.has(i))return o.constraintsMap.delete(i),Mo(o,cl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ng(c=o.constraintsMap).call(c)))})()}registerStats(i,o,c){this.statsRegistry.find(h=>h.processorID===i.ID&&h.processorName===i.name&&h.type===o)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:o,cb:c})}unregisterStats(i,o){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:o,processorName:c,type:h,cb:g}=i;return{processorID:o,processorName:c,type:h,stats:g()}})}}class I9 extends rs{constructor(){super(...arguments),q(this,"resultStorage",new Map)}setLocalAudioStats(i,o,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",i,this.checkAudioInputLevel(c,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",i,this.checkSendAudioBitrate(c,o))}setLocalVideoStats(i,o,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",i,this.checkSendVideoBitrate(c,o)),this.record("FRAMERATE_INPUT_TOO_LOW",i,this.checkFramerateInput(c,o)),this.record("FRAMERATE_SENT_TOO_LOW",i,this.checkFramerateSent(c))}setRemoteAudioStats(i,o){const c=i.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(o))}setRemoteVideoStats(i,o){const c=i.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(o))}record(i,o,c){this.resultStorage.has(i)||this.resultStorage.set(i,{result:[],isPrevNormal:!0});const h=this.resultStorage.get(i);if(h&&(h.result.push(c),h.result.length>=5)){const g=h.result.includes(!0);h.isPrevNormal&&!g&&this.emit("exception",HS[i],i,o),!h.isPrevNormal&&g&&this.emit("exception",HS[i]+2e3,i+"_RECOVER",o),h.isPrevNormal=g,h.result=[]}}checkAudioOutputLevel(i){return!(i.receiveBitrate>0&&0===i.receiveLevel)}checkAudioInputLevel(i,o){return o instanceof zl&&!o.isActive||!!o.muted||0!==i.sendVolumeLevel}checkFramerateInput(i,o){let c=null;o._encoderConfig&&o._encoderConfig.frameRate&&(c=Tv(o._encoderConfig.frameRate));const h=i.captureFrameRate;return!c||!h||!(c>10&&h<5||c<10&&c>=5&&h<=1)}checkFramerateSent(i){return!(i.captureFrameRate&&i.sendFrameRate&&i.captureFrameRate>5&&i.sendFrameRate<=1)}checkSendVideoBitrate(i,o){return!!o.muted||0!==i.sendBitrate}checkSendAudioBitrate(i,o){return o instanceof zl&&!o.isActive||!!o.muted||0!==i.sendBitrate}checkVideoDecode(i){return 0===i.receiveBitrate||0!==i.decodeFrameRate}}const HS={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},pl=new class{markSubscribeStart(n,i){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(i))}markPublishStart(n,i){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(i))}measureFromSubscribeStart(n,i){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(i));if(o.length>0){const c=o[o.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(n,i){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(i));if(o.length>0){const c=o[o.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function OV(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Ky(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?OV(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):OV(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class zy{constructor(i){q(this,"store",void 0),q(this,"onStatsException",void 0),q(this,"onUploadPublishDuration",void 0),q(this,"localStats",new Map),q(this,"remoteStats",new Map),q(this,"updateStatsInterval",void 0),q(this,"trafficStats",void 0),q(this,"trafficStatsPeerList",[]),q(this,"uplinkStats",void 0),q(this,"exceptionMonitor",void 0),q(this,"p2pChannel",void 0),q(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=i,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new I9,this.exceptionMonitor.on("exception",(o,c,h)=>{this.onStatsException&&this.onStatsException(o,c,h)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Dn.LocalAudioTrack)||Ky({},e3)}getLocalVideoTrackStats(){return this.localStats.get(Dn.LocalVideoTrack)||Ky({},t3)}getRemoteAudioTrackStats(i){const o=(g,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return v&&(p.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},c={};if(i){var h;const g=null===(h=this.remoteStats.get(i))||void 0===h?void 0:h.audioStats;g&&(c[i]=o(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[p,{audioStats:v}]=g;v&&(c[p]=o(p,v))});return c}getRemoteNetworkQualityStats(i){const o={};if(i){var c;const h=null===(c=this.remoteStats.get(i))||void 0===c?void 0:c.networkStats;h&&(o[i]=h)}else Array.from(this.remoteStats.entries()).forEach(h=>{let[g,{networkStats:p}]=h;p&&(o[g]=p)});return o}getRemoteVideoTrackStats(i){const o=(g,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return v&&(p.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},c={};if(i){var h;const g=null===(h=this.remoteStats.get(i))||void 0===h?void 0:h.videoStats;g&&(c[i]=o(i,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[p,{videoStats:v}]=g;v&&(c[p]=o(p,v))});return c}getRTCStats(){let i=0,o=0,c=0,h=0;const g=this.localStats.get(Dn.LocalAudioTrack);g&&(i+=g.sendBytes,o+=g.sendBitrate);const p=this.localStats.get(Dn.LocalVideoTrack);p&&(i+=p.sendBytes,o+=p.sendBitrate);const v=this.localStats.get(Dn.LocalVideoLowTrack);v&&(i+=v.sendBytes,o+=v.sendBitrate),this.remoteStats.forEach(y=>{let{audioStats:b,videoStats:C}=y;b&&(c+=b.receiveBytes,h+=b.receiveBitrate),C&&(c+=C.receiveBytes,h+=C.receiveBitrate)});let _=1;return this.trafficStats&&(_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:_,SendBitrate:o,SendBytes:i,RecvBytes:c,RecvBitrate:h,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(i){this.localStats.set(i,void 0)}removeLocalStats(i){i?this.localStats.delete(i):this.localStats.clear()}addRemoteStats(i){this.remoteStats.set(i,{})}removeRemoteStats(i){i?this.remoteStats.delete(i):this.remoteStats.clear()}addP2PChannel(i){this.p2pChannel=i}updateTrafficStats(i){i.peer_delay=i.peer_delay.filter(o=>void 0!==o.B_ppad||void 0!==o.B_ppvd),i.peer_delay.filter(o=>-1===this.trafficStatsPeerList.indexOf(o.peer_uid)).forEach(o=>{var c;const h=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(o.peer_uid),g=null!=h&&h.videoSSRC?pl.measureFromSubscribeStart(this.store.clientId,h.videoSSRC):0,p=null!=h&&h.audioSSRC?pl.measureFromSubscribeStart(this.store.clientId,h.audioSSRC):0;void 0!==o.B_ppad&&void 0!==o.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,g>p?g:p),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=i}updateUplinkStats(i){this.uplinkStats&&this.uplinkStats.B_fir!==i.B_fir&&oe.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(i.B_fir)),this.uplinkStats=i}static isRemoteVideoFreeze(i,o,c){return!!i&&(!!c&&o.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||o.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(i){return!!i&&i._isFreeze()}isLocalVideoFreeze(i){return!(!i.inputFrame||!i.sentFrame)&&i.inputFrame.frameRate>5&&i.sentFrame.frameRate<3}updateLocalStats(i){Array.from(this.localStats.entries()).forEach(o=>{let[c,h]=o;switch(c){case Dn.LocalVideoTrack:case Dn.LocalVideoLowTrack:{const g=h,p=Ky({},t3),v=i.getStats(),_=i.getLocalMedia(c);if(v){const y=v.videoSend.find(b=>b.ssrc===_?.ssrcs[0].ssrcId);if(y){const b=i.getLocalVideoSize(),C=i.getEncoderConfig(Dn.LocalVideoTrack);"H264"!==y.codec&&"VP8"!==y.codec&&"VP9"!==y.codec&&"AV1X"!==y.codec&&"AV1"!==y.codec||(p.codecType=y.codec),p.sendBytes=y.bytes,p.sendBitrate=g?8*Math.max(0,p.sendBytes-g.sendBytes):0,y.inputFrame?(p.captureFrameRate=y.inputFrame.frameRate,p.captureResolutionHeight=y.inputFrame.height,p.captureResolutionWidth=y.inputFrame.width):b&&(p.captureResolutionWidth=b.width,p.captureResolutionHeight=b.height),y.sentFrame?(p.sendFrameRate=y.sentFrame.frameRate,p.sendResolutionHeight=y.sentFrame.height,p.sendResolutionWidth=y.sentFrame.width):b&&(p.sendResolutionWidth=b.width,p.sendResolutionHeight=b.height),y.avgEncodeMs&&(p.encodeDelay=y.avgEncodeMs),C&&C.bitrateMax&&(p.targetSendBitrate=1e3*C.bitrateMax),p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.totalDuration=g?g.totalDuration+1:1,p.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(p.totalFreezeTime+=1)}this.trafficStats&&(p.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,p),p&&_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,_.track,p);break}case Dn.LocalAudioTrack:{const g=h,p=Ky({},e3),v=i.getStats(),_=i.getLocalMedia(c);if(v){const y=v.audioSend.find(b=>b.ssrc===_?.ssrcs[0].ssrcId);if(y){if("opus"!==y.codec&&"aac"!==y.codec&&"PCMU"!==y.codec&&"PCMA"!==y.codec&&"G722"!==y.codec||(p.codecType=y.codec),y.inputLevel)p.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const b=i.getLocalAudioVolume();b&&(p.sendVolumeLevel=Math.round(32767*b))}p.sendBytes=y.bytes,p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.sendBitrate=g?8*Math.max(0,p.sendBytes-g.sendBytes):0}}this.trafficStats&&(p.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Dn.LocalAudioTrack,p),p&&_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,_.track,p);break}}})}updateRemoteStats(i){Array.from(this.remoteStats.entries()).forEach(o=>{let[c,{videoStats:h,audioStats:g,videoPcStats:p}]=o;const v=g,_=h,y=p,b=Ky({},b6),C=Ky({},S6),R=Ky({},kW),{audioTrack:N,videoTrack:j,audioSSRC:Q,videoSSRC:$}=i.getRemoteMedia(c),ae=i.getStats(),fe=ae?.audioRecv.find(tt=>tt.ssrc===Q),Ae=ae?.videoRecv.find(tt=>tt.ssrc===$),Re=this.trafficStats&&this.trafficStats.peer_delay.find(tt=>tt.peer_uid===c);if(fe&&("opus"!==fe.codec&&"aac"!==fe.codec&&"PCMU"!==fe.codec&&"PCMA"!==fe.codec&&"G722"!==fe.codec||(b.codecType=fe.codec),fe.outputLevel?b.receiveLevel=Math.round(32767*fe.outputLevel):N&&(b.receiveLevel=Math.round(32767*N.getVolumeLevel())),b.receiveBytes=fe.bytes,b.receivePackets=fe.packets,b.receivePacketsLost=fe.packetsLost,b.packetLossRate=b.receivePacketsLost/(b.receivePackets+b.receivePacketsLost),b.receiveBitrate=v?8*Math.max(0,b.receiveBytes-v.receiveBytes):0,b.totalDuration=v?v.totalDuration+1:1,b.totalFreezeTime=v?v.totalFreezeTime:0,b.freezeRate=b.totalFreezeTime/b.totalDuration,b.receiveDelay=fe.jitterBufferMs,b.totalDuration>10&&zy.isRemoteAudioFreeze(N)&&(b.totalFreezeTime+=1)),Ae){"H264"!==Ae.codec&&"VP8"!==Ae.codec&&"VP9"!==Ae.codec&&"AV1X"!==Ae.codec&&"AV1"!==Ae.codec||(C.codecType=Ae.codec),C.receiveBytes=Ae.bytes,C.receiveBitrate=_?8*Math.max(0,C.receiveBytes-_.receiveBytes):0,C.decodeFrameRate=Ae.decodeFrameRate<0?0:Ae.decodeFrameRate,C.renderFrameRate=Ae.decodeFrameRate<0?0:Ae.decodeFrameRate,Ae.outputFrame&&(C.renderFrameRate=Ae.outputFrame.frameRate),Ae.receivedFrame?(C.receiveFrameRate=Ae.receivedFrame.frameRate,C.receiveResolutionHeight=Ae.receivedFrame.height,C.receiveResolutionWidth=Ae.receivedFrame.width):j&&(C.receiveResolutionHeight=j._videoHeight||0,C.receiveResolutionWidth=j._videoWidth||0),void 0!==Ae.framesRateFirefox&&(C.receiveFrameRate=Math.round(Ae.framesRateFirefox)),C.receivePackets=Ae.packets,C.receivePacketsLost=Ae.packetsLost,C.packetLossRate=C.receivePacketsLost/(C.receivePackets+C.receivePacketsLost),C.totalDuration=_?_.totalDuration+1:1,C.totalFreezeTime=_?_.totalFreezeTime:0,C.receiveDelay=Ae.jitterBufferMs||0;const tt=!!$&&i.getRemoteVideoIsReady($);j&&tt&&zy.isRemoteVideoFreeze(j,Ae,y)&&(C.totalFreezeTime+=1),C.freezeRate=C.totalFreezeTime/C.totalDuration}Re&&(b.end2EndDelay=Re.B_ad,C.end2EndDelay=Re.B_vd,b.transportDelay=Re.B_ed,C.transportDelay=Re.B_ed,b.currentPacketLossRate=Re.B_ealr4/100,C.currentPacketLossRate=Re.B_evlr4/100,R.uplinkNetworkQuality=Re.B_punq?Re.B_punq:0,R.downlinkNetworkQuality=Re.B_pdnq?Re.B_pdnq:0),this.remoteStats.set(c,{audioStats:b,videoStats:C,videoPcStats:Ae,networkStats:R}),N&&this.exceptionMonitor.setRemoteAudioStats(N,b),j&&this.exceptionMonitor.setRemoteVideoStats(j,C)})}}function T9(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Xx(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?T9(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):T9(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function $K(n){if(!n.address||!n.tcp)throw new Pe(Ie.UNEXPECTED_RESPONSE,"Invalid address format ".concat(n));return n.address.match(/^[\.\:\d]+$/)?"".concat(n.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(oe.info("Cannot recognized as IP address ".concat(n.address,". Used As Host instead")),"".concat(n.address,":").concat(n.tcp))}function Bk(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(Bt("TURN_DOMAIN")):(oe.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function w9(n,i){const o=Bt("GATEWAY_DOMAINS");let c=o[1]&&-1!==i.indexOf(o[1])?1:0;return n.addresses=n.addresses||[],{gatewayAddrs:n.addresses.map(h=>h.domain_prefix?{address:"".concat(h.domain_prefix,".").concat(o[c++%o.length],":").concat(h.port)}:h.ip.match(/^[\.\:\d]+$/)?{ip:h.ip,port:h.port,address:"".concat(h.ip.replace(/[^\d]/g,"-"),".").concat(o[c++%o.length],":").concat(h.port)}:(oe.info("Cannot recognized as IP address ".concat(h.ip,". Used As Host instead")),{ip:h.ip,port:h.port,address:"".concat(h.ip,":").concat(h.port)})),uid:n.uid,cid:n.cid,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function Tv(n){return"number"==typeof n?n:n.exact||n.ideal||n.max||n.min||0}function DV(n){const i=n._encoderConfig;if(!i)return{};const o={resolution:i.width&&i.height?"".concat(Tv(i.width),"x").concat(Tv(i.height)):void 0,maxVideoBW:i.bitrateMax,minVideoBW:i.bitrateMin};return"number"==typeof i.frameRate?(o.maxFrameRate=i.frameRate,o.minFrameRate=i.frameRate):i.frameRate&&(o.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||i.frameRate.min,o.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||i.frameRate.max),o}function kV(n,i,o){var c;const h=i.videoSend.find(v=>v.ssrc===n);if(!h)return null;const g=null==o||null===(c=o.videoSend.find(v=>v.ssrc===n))||void 0===c?void 0:c.inputFrame,p={id:as(10,""),timestamp:new Date(i.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:h.ssrc.toString()};return h.inputFrame&&(g&&h.inputFrame.height===g.height||(p.A_fhi=h.inputFrame.height?h.inputFrame.height.toString():"0"),g&&h.inputFrame.width===g.width||(p.A_fwi=h.inputFrame.width?h.inputFrame.width.toString():"0"),g&&h.inputFrame.frameRate===g.frameRate||(p.A_fri=h.inputFrame.frameRate?h.inputFrame.frameRate.toString():"0")),p}function $x(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function Zx(n,i){let o,c,h;switch(i){case Us.CHOOSE_SERVER:o=4096,c="choose server";break;case Us.CLOUD_PROXY:o=1048576,c="proxy";break;case Us.CLOUD_PROXY_5:o=4194304,c="proxy5";break;case Us.CLOUD_PROXY_FALLBACK:o=4194310,c="proxy fallback";break;default:throw new Pe(Ie.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(g=>{g.buffer&&g.buffer.flag===o&&(h={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(p=>Xx(Xx({},p),{},{ticket:g.buffer.cert})),server_ts:n.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:Xx(Xx({},g.buffer.detail),n.detail),flag:g.buffer.flag,opid:n.opid})}),!h)throw new Pe(Ie.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return h}function R9(n,i){return Fk.apply(this,arguments)}function Fk(){return Fk=L(function*(n,i){return yield jn.all(n.addresses.map(function(){var o=L(function*(c){return{address:Bk(c.ip),tcpport:c.port,udpport:c.port,username:i&&Bt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?i.toString():Js.username,password:i&&Bt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield qK(i.toString()):Js.password}});return function(c){return o.apply(this,arguments)}}()))}),Fk.apply(this,arguments)}function O9(n,i){const o=i._videoHeight||i.getMediaStreamTrack(!0).getSettings().height;return o?o/Tv(n.height):4}function Pg(n){let{candidateType:i,relayProtocol:o,type:c,address:h,port:g,protocol:p}=n;return"local-candidate"===c?{candidateType:i,relayProtocol:o,protocol:p}:{candidateType:i,relayProtocol:o,address:h,port:g,protocol:p}}function eL(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function GS(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?eL(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):eL(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function _1(n){return window.TextEncoder?(new TextEncoder).encode(n).length:n.length}function lc(n){return new jn(i=>{window.setTimeout(i,n)})}function ZK(n){const i=new Pe(Ie.TIMEOUT,"timeout");return new jn((o,c)=>{window.setTimeout(()=>c(i),n)})}function as(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,i=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,n).toLowerCase();return o.length===n?"".concat(i).concat(o):"".concat(i).concat(o)+as(n-o.length,"")}function D9(){return as(32,"").toUpperCase()}const tL=()=>{};function k9(n){return new jn((i,o)=>{let c=!1;const h=document.createElement("video");h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.muted=!0,h.autoplay=!0,h.setAttribute("playsinline",""),h.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(h);const g=Iu()?"canplay":"playing";h.addEventListener(g,()=>{const p=h.videoWidth,v=h.videoHeight;!p&&Es()||(c=!0,h.srcObject=null,h.remove(),i([p,v]))}),h.srcObject=new MediaStream([n]),h.play().catch(tL),setTimeout(()=>{c||(h.srcObject=null,h.remove(),i([h.videoWidth,h.videoHeight]))},4e3)})}function WS(n){return jn.all(n.map(i=>i.then(o=>{throw o},o=>o))).then(i=>{throw i},i=>i)}function jd(n,i){for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return 0===n.getListeners(i).length?jn.reject(new Pe(Ie.UNEXPECTED_ERROR,"can not emit promise")):new jn((g,p)=>{n.emit(i,...c,g,p)})}function Mo(n,i){if(0===n.getListeners(i).length)return jn.resolve();for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return jd(n,i,...c)}function wv(n,i){if(0===n.getListeners(i).length)return null;for(var o=arguments.length,c=new Array(o>2?o-2:0),h=2;h<o;h++)c[h-2]=arguments[h];return KS(n,i,...c)}function KS(n,i){let o=null,c=null;for(var h=arguments.length,g=new Array(h>2?h-2:0),p=2;p<h;p++)g[p-2]=arguments[p];if(n.emit(i,...g,v=>{o=v},v=>{c=v}),null!==c)throw c;if(null===o)throw new Pe(Ie.UNEXPECTED_ERROR,"handler is not sync");return o}function nL(n,i){const o=n.indexOf(i);-1!==o&&n.splice(o,1)}function N9(n){const i=[];return n.forEach(o=>{-1===i.indexOf(o)&&i.push(o)}),i}function Nh(n){jn.resolve().then(n)}function Ha(n){return JSON.parse(JSON.stringify(n))}const P9={};function v1(n,i){P9[i]||(P9[i]=!0,n())}function Uk(n){const i=window.atob(n),o=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c+=1)o[c]=i.charCodeAt(c);return o}function A1(n){let i="";for(let o=0;o<n.length;o+=1)i+=String.fromCharCode(n[o]);return window.btoa(i)}const M9=new class{constructor(){q(this,"fnMap",new Map)}throttleByKey(n,i,o,c){for(var h=arguments.length,g=new Array(h>4?h-4:0),p=4;p<h;p++)g[p-4]=arguments[p];if(this.fnMap.has(i)){const v=this.fnMap.get(i);if(v.threshold!==o){v.fn(...v.args),clearTimeout(v.timer);const _=window.setTimeout(()=>{const y=this.fnMap.get(i);y&&y.fn(...y.args),this.fnMap.delete(i)},o);this.fnMap.set(i,{fn:n,threshold:o,timer:_,args:g,skipFn:c})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(i,GS(GS({},v),{},{fn:n,args:g,skipFn:c}))}else{const v=window.setTimeout(()=>{const _=this.fnMap.get(i);_&&_.fn(..._.args),this.fnMap.delete(i)},o);this.fnMap.set(i,{fn:n,threshold:o,timer:v,args:g,skipFn:c})}}},NV=M9.throttleByKey.bind(M9),zS=function(){var n=L(function*(i){let{fragementLength:o,referenceList:c,asyncMapHandler:h,allFailedhandler:g,promisesCollector:p}=i,v=0;const _=o;let y,b=0;const C=function(){var R=L(function*(){const N=(()=>{const j=v*_;return c.slice(j,j+_).map(h)})();p&&p.push(...N);try{y=yield WS(N)}catch(j){if(b+=_,v++,!(b>=c.length))return void(yield C());g(j)}N.forEach(j=>j.cancel())});return function(){return R.apply(this,arguments)}}();return yield C(),y});return function(o){return n.apply(this,arguments)}}();function x9(n){return"object"==typeof n&&null!==n&&!(n instanceof RegExp)}var ez=ps,tz=Ns("iterator"),L9=!ez(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),i=n.searchParams,o="";return n.pathname="c%20d",i.forEach(function(c,h){i.delete("b"),o+=h+c}),!n.toJSON||!i.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==i.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!i[tz]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}),rL=Hc,B9=Gc,Mg=ps,Rv=Ys,Ov=Xu,nz=df,MV=Gu,fl=__,Pp=Object.assign,F9=Object.defineProperty,xg=bo([].concat),rz=!Pp||Mg(function(){if(rL&&1!==Pp({b:1},Pp(F9({},"a",{enumerable:!0,get:function(){F9(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},i={},o=Symbol(),c="abcdefghijklmnopqrst";return n[o]=7,c.split("").forEach(function(h){i[h]=h}),7!=Pp({},n)[o]||Rv(Pp({},i)).join("")!=c})?function(n,i){for(var o=MV(n),c=arguments.length,h=1,g=Ov.f,p=nz.f;c>h;)for(var v,_=fl(arguments[h++]),y=g?xg(Rv(_),g(_)):Rv(_),b=y.length,C=0;b>C;)v=y[C++],rL&&!B9(p,_,v)||(o[v]=_[v]);return o}:Pp,U9=ca,iz=ph,V9=rp,oz=Gc,xV=Gu,y1=function(n,i,o,c){try{return c?i(U9(o)[0],o[1]):i(o)}catch(h){iz(n,"throw",h)}},LV=Gb,iL=mg,sz=sh,j9=wS,az=Wb,cz=hh,Q9=Jr.Array,YS=bo,E1=2147483647,oL=/[^\0-\u007E]/,b1=/[.\u3002\uFF0E\uFF61]/g,BV="Overflow: input needs wider integers to process",Vk=Jr.RangeError,uz=YS(b1.exec),qS=Math.floor,FV=String.fromCharCode,H9=YS("".charCodeAt),G9=YS([].join),Lg=YS([].push),lz=YS("".replace),UV=YS("".split),dz=YS("".toLowerCase),VV=function(n){return n+22+75*(n<26)},W9=function(n,i,o){var c=0;for(n=o?qS(n/700):n>>1,n+=qS(n/i);n>455;)n=qS(n/35),c+=36;return qS(c+36*n/(n+38))},K9=function(n){var i,o,c=[],h=(n=function(ae){for(var fe=[],Ae=0,Re=ae.length;Ae<Re;){var tt=H9(ae,Ae++);if(tt>=55296&&tt<=56319&&Ae<Re){var Tt=H9(ae,Ae++);56320==(64512&Tt)?Lg(fe,((1023&tt)<<10)+(1023&Tt)+65536):(Lg(fe,tt),Ae--)}else Lg(fe,tt)}return fe}(n)).length,g=128,p=0,v=72;for(i=0;i<n.length;i++)(o=n[i])<128&&Lg(c,FV(o));var _=c.length,y=_;for(_&&Lg(c,"-");y<h;){var b=E1;for(i=0;i<n.length;i++)(o=n[i])>=g&&o<b&&(b=o);var C=y+1;if(b-g>qS((E1-p)/C))throw Vk(BV);for(p+=(b-g)*C,g=b,i=0;i<n.length;i++){if((o=n[i])<g&&++p>E1)throw Vk(BV);if(o==g){for(var R=p,N=36;;){var j=N<=v?1:N>=v+26?26:N-v;if(R<j)break;var Q=R-j,$=36-j;Lg(c,FV(VV(j+Q%$))),R=qS(Q/$),N+=36}Lg(c,FV(VV(R))),v=W9(p,C,y==_),p=0,y++}}p++,g++}return G9(c,"")},sL=Jr.TypeError,jk=ts,Qk=Jr,aL=kl,Hk=Gc,Yl=bo,jV=L9,QV=ev,z9=$b,hz=Fl,Y9=hg,S1=dg,C1=uv,Gk=Ko,q9=ws,pz=rp,J9=eu,X9=ca,I1=Dl,Qd=el,$9=Of,Wk=gd,HV=Wb,Z9=hh,JS=function(n,i){if(n<i)throw sL("Not enough arguments");return n},GV=l6,WV=Ns("iterator"),cL="URLSearchParams",eQ="URLSearchParamsIterator",tQ=S1.set,Xf=S1.getterFor(cL),fz=S1.getterFor(eQ),nQ=aL("fetch"),Kk=aL("Request"),T1=aL("Headers"),KV=Kk&&Kk.prototype,zV=T1&&T1.prototype,uL=Qk.RegExp,mz=Qk.TypeError,rQ=Qk.decodeURIComponent,gz=Qk.encodeURIComponent,_z=Yl("".charAt),iQ=Yl([].join),XS=Yl([].push),YV=Yl("".replace),vz=Yl([].shift),oQ=Yl([].splice),w1=Yl("".split),qV=Yl("".slice),sQ=/\+/g,lL=Array(4),aQ=function(n){return lL[n-1]||(lL[n-1]=uL("((?:%[\\da-f]{2}){"+n+"})","gi"))},Az=function(n){try{return rQ(n)}catch{return n}},JV=function(n){var i=YV(n,sQ," "),o=4;try{return rQ(i)}catch{for(;o;)i=YV(i,aQ(o--),Az);return i}},XV=/[!'()~]|%20/g,dL={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$V=function(n){return dL[n]},ZV=function(n){return YV(gz(n),XV,$V)},hL=Y9(function(n,i){tQ(this,{type:eQ,iterator:HV(Xf(n).entries),kind:i})},"Iterator",function(){var n=fz(this),i=n.kind,o=n.iterator.next(),c=o.value;return o.done||(o.value="keys"===i?c.key:"values"===i?c.value:[c.key,c.value]),o},!0),R1=function(n){this.entries=[],this.url=null,void 0!==n&&(I1(n)?this.parseObject(n):this.parseQuery("string"==typeof n?"?"===_z(n,0)?qV(n,1):n:Qd(n)))};R1.prototype={type:cL,bindURL:function(n){this.url=n,this.update()},parseObject:function(n){var i,o,c,h,g,p,v,_=Z9(n);if(_)for(o=(i=HV(n,_)).next;!(c=Hk(o,i)).done;){if(g=(h=HV(X9(c.value))).next,(p=Hk(g,h)).done||(v=Hk(g,h)).done||!Hk(g,h).done)throw mz("Expected sequence with length 2");XS(this.entries,{key:Qd(p.value),value:Qd(v.value)})}else for(var y in n)q9(n,y)&&XS(this.entries,{key:y,value:Qd(n[y])})},parseQuery:function(n){if(n)for(var i,o,c=w1(n,"&"),h=0;h<c.length;)(i=c[h++]).length&&(o=w1(i,"="),XS(this.entries,{key:JV(vz(o)),value:JV(iQ(o,"="))}))},serialize:function(){for(var n,i=this.entries,o=[],c=0;c<i.length;)n=i[c++],XS(o,ZV(n.key)+"="+ZV(n.value));return iQ(o,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pL=function(){C1(this,zk),tQ(this,new R1(arguments.length>0?arguments[0]:void 0))},zk=pL.prototype;if(z9(zk,{append:function(n,i){JS(arguments.length,2);var o=Xf(this);XS(o.entries,{key:Qd(n),value:Qd(i)}),o.updateURL()},delete:function(n){JS(arguments.length,1);for(var i=Xf(this),o=i.entries,c=Qd(n),h=0;h<o.length;)o[h].key===c?oQ(o,h,1):h++;i.updateURL()},get:function(n){JS(arguments.length,1);for(var i=Xf(this).entries,o=Qd(n),c=0;c<i.length;c++)if(i[c].key===o)return i[c].value;return null},getAll:function(n){JS(arguments.length,1);for(var i=Xf(this).entries,o=Qd(n),c=[],h=0;h<i.length;h++)i[h].key===o&&XS(c,i[h].value);return c},has:function(n){JS(arguments.length,1);for(var i=Xf(this).entries,o=Qd(n),c=0;c<i.length;)if(i[c++].key===o)return!0;return!1},set:function(n,i){JS(arguments.length,1);for(var o,c=Xf(this),h=c.entries,g=!1,p=Qd(n),v=Qd(i),_=0;_<h.length;_++)(o=h[_]).key===p&&(g?oQ(h,_--,1):(g=!0,o.value=v));g||XS(h,{key:p,value:v}),c.updateURL()},sort:function(){var n=Xf(this);GV(n.entries,function(i,o){return i.key>o.key?1:-1}),n.updateURL()},forEach:function(n){for(var i,o=Xf(this).entries,c=pz(n,arguments.length>1?arguments[1]:void 0),h=0;h<o.length;)c((i=o[h++]).value,i.key,this)},keys:function(){return new hL(this,"keys")},values:function(){return new hL(this,"values")},entries:function(){return new hL(this,"entries")}},{enumerable:!0}),QV(zk,WV,zk.entries,{name:"entries"}),QV(zk,"toString",function(){return Xf(this).serialize()},{enumerable:!0}),hz(pL,cL),jk({global:!0,forced:!jV},{URLSearchParams:pL}),!jV&&Gk(T1)){var cQ=Yl(zV.has),yz=Yl(zV.set),uQ=function(n){if(I1(n)){var i,o=n.body;if(J9(o)===cL)return i=n.headers?new T1(n.headers):new T1,cQ(i,"content-type")||yz(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$9(n,{body:Wk(0,Qd(o)),headers:Wk(0,i)})}return n};if(Gk(nQ)&&jk({global:!0,enumerable:!0,forced:!0},{fetch:function(n){return nQ(n,arguments.length>1?uQ(arguments[1]):{})}}),Gk(Kk)){var Yk=function(n){return C1(this,KV),new Kk(n,arguments.length>1?uQ(arguments[1]):{})};KV.constructor=Yk,Yk.prototype=KV,jk({global:!0,forced:!0},{Request:Yk})}}var Ph,e4=ts,fL=Hc,t4=L9,mL=Jr,n4=rp,Dc=bo,r4=Rf.f,O1=ev,Ez=uv,i4=ws,qk=rz,$S=function(n){var i=xV(n),o=iL(this),c=arguments.length,h=c>1?arguments[1]:void 0,g=void 0!==h;g&&(h=V9(h,c>2?arguments[2]:void 0));var p,v,_,y,b,C,R=cz(i),N=0;if(!R||this==Q9&&LV(R))for(p=sz(i),v=o?new this(p):Q9(p);p>N;N++)C=g?h(i[N],N):i[N],j9(v,N,C);else for(b=(y=az(i,R)).next,v=o?new this:[];!(_=oz(b,y)).done;N++)C=g?y1(y,h,[_.value,N],!0):_.value,j9(v,N,C);return v.length=N,v},Mp=VU,dQ=Mj.codeAt,Bg=el,o4=Fl,Jk={URLSearchParams:pL,getState:Xf},hQ=dg.set,Xk=dg.getterFor("URL"),_L=Jk.URLSearchParams,bz=Jk.getState,D1=mL.URL,vL=mL.TypeError,$k=mL.parseInt,pQ=Math.floor,Zk=Math.pow,Hd=Dc("".charAt),ql=Dc(/./.exec),k1=Dc([].join),fQ=Dc(1..toString),mQ=Dc([].pop),ZS=Dc([].push),s4=Dc("".replace),gQ=Dc([].shift),_Q=Dc("".split),e0=Dc("".slice),e2=Dc("".toLowerCase),a4=Dc([].unshift),AL="Invalid scheme",Yy="Invalid host",yL="Invalid port",vQ=/[a-z]/i,Sz=/[\d+-.a-z]/i,EL=/\d/,AQ=/^0x/i,yQ=/^[0-7]+$/,c4=/^\d+$/,bL=/^[\da-f]+$/i,Cz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Iz=/[\0\t\n\r #/:<>?@[\\\]^|]/,Tz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,wz=/[\t\n\r]/g,N1=function(n){var i,o,c,h;if("number"==typeof n){for(i=[],o=0;o<4;o++)a4(i,n%256),n=pQ(n/256);return k1(i,".")}if("object"==typeof n){for(i="",c=function(g){for(var p=null,v=1,_=null,y=0,b=0;b<8;b++)0!==g[b]?(y>v&&(p=_,v=y),_=null,y=0):(null===_&&(_=b),++y);return y>v&&(p=_,v=y),p}(n),o=0;o<8;o++)h&&0===n[o]||(h&&(h=!1),c===o?(i+=o?":":"::",h=!0):(i+=fQ(n[o],16),o<7&&(i+=":")));return"["+i+"]"}return n},t0={},u4=qk({},t0,{" ":1,'"':1,"<":1,">":1,"`":1}),l4=qk({},u4,{"#":1,"?":1,"{":1,"}":1}),SL=qk({},l4,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Jl=function(n,i){var o=dQ(n,0);return o>32&&o<127&&!i4(i,n)?n:encodeURIComponent(n)},P1={ftp:21,file:null,http:80,https:443,ws:80,wss:443},M1=function(n,i){var o;return 2==n.length&&ql(vQ,Hd(n,0))&&(":"==(o=Hd(n,1))||!i&&"|"==o)},d4=function(n){var i;return n.length>1&&M1(e0(n,0,2))&&(2==n.length||"/"===(i=Hd(n,2))||"\\"===i||"?"===i||"#"===i)},EQ=function(n){return"."===n||"%2e"===e2(n)},h4={},p4={},CL={},f4={},m4={},IL={},g4={},_4={},t2={},n2={},TL={},wL={},RL={},OL={},v4={},DL={},n0={},$f={},A4={},qy={},Fg={},kL=function(n,i,o){var c,h,g,p=Bg(n);if(i){if(h=this.parse(p))throw vL(h);this.searchParams=null}else{if(void 0!==o&&(c=new kL(o,!0)),h=this.parse(p,null,c))throw vL(h);(g=bz(new _L)).bindURL(this),this.searchParams=g}};kL.prototype={type:"URL",parse:function(n,i,o){var c,h,g,p,v,_=this,y=i||h4,b=0,C="",R=!1,N=!1,j=!1;for(n=Bg(n),i||(_.scheme="",_.username="",_.password="",_.host=null,_.port=null,_.path=[],_.query=null,_.fragment=null,_.cannotBeABaseURL=!1,n=s4(n,Tz,"")),n=s4(n,wz,""),c=$S(n);b<=c.length;){switch(h=c[b],y){case h4:if(!h||!ql(vQ,h)){if(i)return AL;y=CL;continue}C+=e2(h),y=p4;break;case p4:if(h&&(ql(Sz,h)||"+"==h||"-"==h||"."==h))C+=e2(h);else{if(":"!=h){if(i)return AL;C="",y=CL,b=0;continue}if(i&&(_.isSpecial()!=i4(P1,C)||"file"==C&&(_.includesCredentials()||null!==_.port)||"file"==_.scheme&&!_.host))return;if(_.scheme=C,i)return void(_.isSpecial()&&P1[_.scheme]==_.port&&(_.port=null));C="","file"==_.scheme?y=OL:_.isSpecial()&&o&&o.scheme==_.scheme?y=f4:_.isSpecial()?y=_4:"/"==c[b+1]?(y=m4,b++):(_.cannotBeABaseURL=!0,ZS(_.path,""),y=A4)}break;case CL:if(!o||o.cannotBeABaseURL&&"#"!=h)return AL;if(o.cannotBeABaseURL&&"#"==h){_.scheme=o.scheme,_.path=Mp(o.path),_.query=o.query,_.fragment="",_.cannotBeABaseURL=!0,y=Fg;break}y="file"==o.scheme?OL:IL;continue;case f4:if("/"!=h||"/"!=c[b+1]){y=IL;continue}y=t2,b++;break;case m4:if("/"==h){y=n2;break}y=$f;continue;case IL:if(_.scheme=o.scheme,h==Ph)_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mp(o.path),_.query=o.query;else if("/"==h||"\\"==h&&_.isSpecial())y=g4;else if("?"==h)_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mp(o.path),_.query="",y=qy;else{if("#"!=h){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mp(o.path),_.path.length--,y=$f;continue}_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,_.path=Mp(o.path),_.query=o.query,_.fragment="",y=Fg}break;case g4:if(!_.isSpecial()||"/"!=h&&"\\"!=h){if("/"!=h){_.username=o.username,_.password=o.password,_.host=o.host,_.port=o.port,y=$f;continue}y=n2}else y=t2;break;case _4:if(y=t2,"/"!=h||"/"!=Hd(C,b+1))continue;b++;break;case t2:if("/"!=h&&"\\"!=h){y=n2;continue}break;case n2:if("@"==h){R&&(C="%40"+C),R=!0,g=$S(C);for(var Q=0;Q<g.length;Q++){var $=g[Q];if(":"!=$||j){var ae=Jl($,SL);j?_.password+=ae:_.username+=ae}else j=!0}C=""}else if(h==Ph||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(R&&""==C)return"Invalid authority";b-=$S(C).length+1,C="",y=TL}else C+=h;break;case TL:case wL:if(i&&"file"==_.scheme){y=DL;continue}if(":"!=h||N){if(h==Ph||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(_.isSpecial()&&""==C)return Yy;if(i&&""==C&&(_.includesCredentials()||null!==_.port))return;if(p=_.parseHost(C))return p;if(C="",y=n0,i)return;continue}"["==h?N=!0:"]"==h&&(N=!1),C+=h}else{if(""==C)return Yy;if(p=_.parseHost(C))return p;if(C="",y=RL,i==wL)return}break;case RL:if(!ql(EL,h)){if(h==Ph||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()||i){if(""!=C){var fe=$k(C,10);if(fe>65535)return yL;_.port=_.isSpecial()&&fe===P1[_.scheme]?null:fe,C=""}if(i)return;y=n0;continue}return yL}C+=h;break;case OL:if(_.scheme="file","/"==h||"\\"==h)y=v4;else{if(!o||"file"!=o.scheme){y=$f;continue}if(h==Ph)_.host=o.host,_.path=Mp(o.path),_.query=o.query;else if("?"==h)_.host=o.host,_.path=Mp(o.path),_.query="",y=qy;else{if("#"!=h){d4(k1(Mp(c,b),""))||(_.host=o.host,_.path=Mp(o.path),_.shortenPath()),y=$f;continue}_.host=o.host,_.path=Mp(o.path),_.query=o.query,_.fragment="",y=Fg}}break;case v4:if("/"==h||"\\"==h){y=DL;break}o&&"file"==o.scheme&&!d4(k1(Mp(c,b),""))&&(M1(o.path[0],!0)?ZS(_.path,o.path[0]):_.host=o.host),y=$f;continue;case DL:if(h==Ph||"/"==h||"\\"==h||"?"==h||"#"==h){if(!i&&M1(C))y=$f;else if(""==C){if(_.host="",i)return;y=n0}else{if(p=_.parseHost(C))return p;if("localhost"==_.host&&(_.host=""),i)return;C="",y=n0}continue}C+=h;break;case n0:if(_.isSpecial()){if(y=$f,"/"!=h&&"\\"!=h)continue}else if(i||"?"!=h)if(i||"#"!=h){if(h!=Ph&&(y=$f,"/"!=h))continue}else _.fragment="",y=Fg;else _.query="",y=qy;break;case $f:if(h==Ph||"/"==h||"\\"==h&&_.isSpecial()||!i&&("?"==h||"#"==h)){if(".."===(v=e2(v=C))||"%2e."===v||".%2e"===v||"%2e%2e"===v?(_.shortenPath(),"/"==h||"\\"==h&&_.isSpecial()||ZS(_.path,"")):EQ(C)?"/"==h||"\\"==h&&_.isSpecial()||ZS(_.path,""):("file"==_.scheme&&!_.path.length&&M1(C)&&(_.host&&(_.host=""),C=Hd(C,0)+":"),ZS(_.path,C)),C="","file"==_.scheme&&(h==Ph||"?"==h||"#"==h))for(;_.path.length>1&&""===_.path[0];)gQ(_.path);"?"==h?(_.query="",y=qy):"#"==h&&(_.fragment="",y=Fg)}else C+=Jl(h,l4);break;case A4:"?"==h?(_.query="",y=qy):"#"==h?(_.fragment="",y=Fg):h!=Ph&&(_.path[0]+=Jl(h,t0));break;case qy:i||"#"!=h?h!=Ph&&("'"==h&&_.isSpecial()?_.query+="%27":_.query+="#"==h?"%23":Jl(h,t0)):(_.fragment="",y=Fg);break;case Fg:h!=Ph&&(_.fragment+=Jl(h,u4))}b++}},parseHost:function(n){var i,o,c;if("["==Hd(n,0)){if("]"!=Hd(n,n.length-1)||!(i=function(h){var g,p,v,_,y,b,C,R=[0,0,0,0,0,0,0,0],N=0,j=null,Q=0,$=function(){return Hd(h,Q)};if(":"==$()){if(":"!=Hd(h,1))return;Q+=2,j=++N}for(;$();){if(8==N)return;if(":"!=$()){for(g=p=0;p<4&&ql(bL,$());)g=16*g+$k($(),16),Q++,p++;if("."==$()){if(0==p||(Q-=p,N>6))return;for(v=0;$();){if(_=null,v>0){if(!("."==$()&&v<4))return;Q++}if(!ql(EL,$()))return;for(;ql(EL,$());){if(y=$k($(),10),null===_)_=y;else{if(0==_)return;_=10*_+y}if(_>255)return;Q++}R[N]=256*R[N]+_,2!=++v&&4!=v||N++}if(4!=v)return;break}if(":"==$()){if(Q++,!$())return}else if($())return;R[N++]=g}else{if(null!==j)return;Q++,j=++N}}if(null!==j)for(b=N-j,N=7;0!=N&&b>0;)C=R[N],R[N--]=R[j+b-1],R[j+--b]=C;else if(8!=N)return;return R}(e0(n,1,-1))))return Yy;this.host=i}else if(this.isSpecial()){if(n=function(n){var i,o,c=[],h=UV(lz(dz(n),b1,"."),".");for(i=0;i<h.length;i++)Lg(c,uz(oL,o=h[i])?"xn--"+K9(o):o);return G9(c,".")}(n),ql(Cz,n)||null===(i=function(h){var g,p,v,_,y,b,C,R=_Q(h,".");if(R.length&&""==R[R.length-1]&&R.length--,(g=R.length)>4)return h;for(p=[],v=0;v<g;v++){if(""==(_=R[v]))return h;if(y=10,_.length>1&&"0"==Hd(_,0)&&(y=ql(AQ,_)?16:8,_=e0(_,8==y?1:2)),""===_)b=0;else{if(!ql(10==y?c4:8==y?yQ:bL,_))return h;b=$k(_,y)}ZS(p,b)}for(v=0;v<g;v++)if(b=p[v],v==g-1){if(b>=Zk(256,5-g))return null}else if(b>255)return null;for(C=mQ(p),v=0;v<p.length;v++)C+=p[v]*Zk(256,3-v);return C}(n)))return Yy;this.host=i}else{if(ql(Iz,n))return Yy;for(i="",o=$S(n),c=0;c<o.length;c++)i+=Jl(o[c],t0);this.host=i}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return i4(P1,this.scheme)},shortenPath:function(){var n=this.path,i=n.length;!i||"file"==this.scheme&&1==i&&M1(n[0],!0)||n.length--},serialize:function(){var n=this,i=n.scheme,o=n.username,c=n.password,h=n.host,g=n.port,p=n.path,v=n.query,_=n.fragment,y=i+":";return null!==h?(y+="//",n.includesCredentials()&&(y+=o+(c?":"+c:"")+"@"),y+=N1(h),null!==g&&(y+=":"+g)):"file"==i&&(y+="//"),y+=n.cannotBeABaseURL?p[0]:p.length?"/"+k1(p,"/"):"",null!==v&&(y+="?"+v),null!==_&&(y+="#"+_),y},setHref:function(n){var i=this.parse(n);if(i)throw vL(i);this.searchParams.update()},getOrigin:function(){var n=this.scheme,i=this.port;if("blob"==n)try{return new r0(n.path[0]).origin}catch{return"null"}return"file"!=n&&this.isSpecial()?n+"://"+N1(this.host)+(null!==i?":"+i:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(n){this.parse(Bg(n)+":",h4)},getUsername:function(){return this.username},setUsername:function(n){var i=$S(Bg(n));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var o=0;o<i.length;o++)this.username+=Jl(i[o],SL)}},getPassword:function(){return this.password},setPassword:function(n){var i=$S(Bg(n));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var o=0;o<i.length;o++)this.password+=Jl(i[o],SL)}},getHost:function(){var n=this.host,i=this.port;return null===n?"":null===i?N1(n):N1(n)+":"+i},setHost:function(n){this.cannotBeABaseURL||this.parse(n,TL)},getHostname:function(){var n=this.host;return null===n?"":N1(n)},setHostname:function(n){this.cannotBeABaseURL||this.parse(n,wL)},getPort:function(){var n=this.port;return null===n?"":Bg(n)},setPort:function(n){this.cannotHaveUsernamePasswordPort()||(""==(n=Bg(n))?this.port=null:this.parse(n,RL))},getPathname:function(){var n=this.path;return this.cannotBeABaseURL?n[0]:n.length?"/"+k1(n,"/"):""},setPathname:function(n){this.cannotBeABaseURL||(this.path=[],this.parse(n,n0))},getSearch:function(){var n=this.query;return n?"?"+n:""},setSearch:function(n){""==(n=Bg(n))?this.query=null:("?"==Hd(n,0)&&(n=e0(n,1)),this.query="",this.parse(n,qy)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var n=this.fragment;return n?"#"+n:""},setHash:function(n){""!=(n=Bg(n))?("#"==Hd(n,0)&&(n=e0(n,1)),this.fragment="",this.parse(n,Fg)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var r0=function(n){var i=Ez(this,r2),c=hQ(i,new kL(n,!1,arguments.length>1?arguments[1]:void 0));fL||(i.href=c.serialize(),i.origin=c.getOrigin(),i.protocol=c.getProtocol(),i.username=c.getUsername(),i.password=c.getPassword(),i.host=c.getHost(),i.hostname=c.getHostname(),i.port=c.getPort(),i.pathname=c.getPathname(),i.search=c.getSearch(),i.searchParams=c.getSearchParams(),i.hash=c.getHash())},r2=r0.prototype,Mh=function(n,i){return{get:function(){return Xk(this)[n]()},set:i&&function(o){return Xk(this)[i](o)},configurable:!0,enumerable:!0}};if(fL&&r4(r2,{href:Mh("serialize","setHref"),origin:Mh("getOrigin"),protocol:Mh("getProtocol","setProtocol"),username:Mh("getUsername","setUsername"),password:Mh("getPassword","setPassword"),host:Mh("getHost","setHost"),hostname:Mh("getHostname","setHostname"),port:Mh("getPort","setPort"),pathname:Mh("getPathname","setPathname"),search:Mh("getSearch","setSearch"),searchParams:Mh("getSearchParams"),hash:Mh("getHash","setHash")}),O1(r2,"toJSON",function(){return Xk(this).serialize()},{enumerable:!0}),O1(r2,"toString",function(){return Xk(this).serialize()},{enumerable:!0}),D1){var o2=D1.createObjectURL,bQ=D1.revokeObjectURL;o2&&O1(r0,"createObjectURL",n4(o2,D1)),bQ&&O1(r0,"revokeObjectURL",n4(bQ,D1))}o4(r0,"URL"),e4({global:!0,forced:!t4,sham:!fL},{URL:r0});var y4=hf.URL;const Rz={[ky.ACCESS_POINT]:{[xs.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[xs.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[xs.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[xs.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[xs.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[xs.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[xs.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[ky.UNILBS]:{[Ru.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ru.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ru.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ru.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ru.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ru.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ru.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ru.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ru.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ru.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ru.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ru.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[ky.STRING_UID_ALLOCATOR]:{[DS.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[DS.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[DS.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function x1(n){const i=Rz[Math.floor(n/1e4)];if(!i)return{desc:"unkonw error",retry:!1};const o=i[n%1e4];if(!o){if(Math.floor(n/1e4)===ky.ACCESS_POINT){const c=n%1e4;if("1"===c.toString()[0])return{desc:n.toString(),retry:!1};if("2"===c.toString()[0])return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return o}const E4={[yr.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[yr.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[yr.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[yr.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[yr.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[yr.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[yr.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[yr.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[yr.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[yr.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[yr.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[yr.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[yr.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[yr.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[yr.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[yr.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[yr.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[yr.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[yr.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[yr.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[yr.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[yr.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[yr.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[yr.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[yr.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[yr.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[yr.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[yr.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[yr.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[yr.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[yr.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[yr.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[yr.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[yr.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[yr.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[yr.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[yr.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[yr.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[yr.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[yr.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[yr.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[yr.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[yr.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[yr.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[yr.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[yr.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[yr.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[yr.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[yr.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[yr.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[yr.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[yr.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[yr.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[yr.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[yr.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[yr.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[yr.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[yr.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function NL(n){return E4[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}var SQ={exports:{}};(function(n,i){n.exports=function(){var o={d:function(pt,Ee){for(var rt in Ee)o.o(Ee,rt)&&!o.o(pt,rt)&&Object.defineProperty(pt,rt,{enumerable:!0,get:Ee[rt]})},o:function(pt,Ee){return Object.prototype.hasOwnProperty.call(pt,Ee)},r:function(pt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(pt,"__esModule",{value:!0})}},c={};o.r(c),o.d(c,{DataViewIndexOutOfBoundsError:function(){return Nt},DecodeError:function(){return Re},Decoder:function(){return Sr},EXT_TIMESTAMP:function(){return tt},Encoder:function(){return _t},ExtData:function(){return fe},ExtensionCodec:function(){return vt},decode:function(){return ji},decodeArrayStream:function(){return Vp},decodeAsync:function(){return Wd},decodeMulti:function(){return kc},decodeMultiStream:function(){return bs},decodeStream:function(){return vG},decodeTimestampExtension:function(){return on},decodeTimestampToTimeSpec:function(){return Sn},encode:function(){return Je},encodeDateToTimeSpec:function(){return Mt},encodeTimeSpecToTimestamp:function(){return Tt},encodeTimestampExtension:function(){return Ct}});var h=4294967295;function g(pt,Ee,rt){var Ot=Math.floor(rt/4294967296),ft=rt;pt.setUint32(Ee,Ot),pt.setUint32(Ee+4,ft)}function p(pt,Ee){return 4294967296*pt.getInt32(Ee)+pt.getUint32(Ee+4)}var v=function(pt,Ee){var rt="function"==typeof Symbol&&pt[Symbol.iterator];if(!rt)return pt;var Ot,ft,pn=rt.call(pt),nn=[];try{for(;(void 0===Ee||Ee-- >0)&&!(Ot=pn.next()).done;)nn.push(Ot.value)}catch(Gn){ft={error:Gn}}finally{try{Ot&&!Ot.done&&(rt=pn.return)&&rt.call(pn)}finally{if(ft)throw ft.error}}return nn},_=function(pt,Ee){for(var rt=0,Ot=Ee.length,ft=pt.length;rt<Ot;rt++,ft++)pt[ft]=Ee[rt];return pt},y=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function b(pt){for(var Ee=pt.length,rt=0,Ot=0;Ot<Ee;){var ft=pt.charCodeAt(Ot++);if(0!=(4294967168&ft))if(0==(4294965248&ft))rt+=2;else{if(ft>=55296&&ft<=56319&&Ot<Ee){var pn=pt.charCodeAt(Ot);56320==(64512&pn)&&(++Ot,ft=((1023&ft)<<10)+(1023&pn)+65536)}rt+=0==(4294901760&ft)?3:4}else rt++}return rt}var C=y?new TextEncoder:void 0,R=y?typeof process<"u"?200:0:h,N=C?.encodeInto?function(pt,Ee,rt){C.encodeInto(pt,Ee.subarray(rt))}:function(pt,Ee,rt){Ee.set(C.encode(pt),rt)};function j(pt,Ee,rt){for(var Ot=Ee,ft=Ot+rt,pn=[],nn="";Ot<ft;){var Gn=pt[Ot++];if(0==(128&Gn))pn.push(Gn);else if(192==(224&Gn)){var Dr=63&pt[Ot++];pn.push((31&Gn)<<6|Dr)}else if(224==(240&Gn)){Dr=63&pt[Ot++];var Hr=63&pt[Ot++];pn.push((31&Gn)<<12|Dr<<6|Hr)}else if(240==(248&Gn)){var Tn=(7&Gn)<<18|(Dr=63&pt[Ot++])<<12|(Hr=63&pt[Ot++])<<6|63&pt[Ot++];Tn>65535&&(pn.push((Tn-=65536)>>>10&1023|55296),Tn=56320|1023&Tn),pn.push(Tn)}else pn.push(Gn);pn.length>=4096&&(nn+=String.fromCharCode.apply(String,_([],v(pn))),pn.length=0)}return pn.length>0&&(nn+=String.fromCharCode.apply(String,_([],v(pn)))),nn}var Q,$=y?new TextDecoder:null,ae=y?typeof process<"u"?200:0:h,fe=function(pt,Ee){this.type=pt,this.data=Ee},Ae=(Q=function(pt,Ee){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,Ot){rt.__proto__=Ot}||function(rt,Ot){for(var ft in Ot)Object.prototype.hasOwnProperty.call(Ot,ft)&&(rt[ft]=Ot[ft])})(pt,Ee)},function(pt,Ee){if("function"!=typeof Ee&&null!==Ee)throw new TypeError("Class extends value "+String(Ee)+" is not a constructor or null");function rt(){this.constructor=pt}Q(pt,Ee),pt.prototype=null===Ee?Object.create(Ee):(rt.prototype=Ee.prototype,new rt)}),Re=function(pt){function Ee(rt){var Ot=pt.call(this,rt)||this,ft=Object.create(Ee.prototype);return Object.setPrototypeOf(Ot,ft),Object.defineProperty(Ot,"name",{configurable:!0,enumerable:!1,value:Ee.name}),Ot}return Ae(Ee,pt),Ee}(Error),tt=-1;function Tt(pt){var Ee,rt=pt.sec,Ot=pt.nsec;if(rt>=0&&Ot>=0&&rt<=17179869183){if(0===Ot&&rt<=4294967295){var ft=new Uint8Array(4);return(Ee=new DataView(ft.buffer)).setUint32(0,rt),ft}var pn=rt/4294967296,nn=4294967295&rt;return ft=new Uint8Array(8),(Ee=new DataView(ft.buffer)).setUint32(0,Ot<<2|3&pn),Ee.setUint32(4,nn),ft}return ft=new Uint8Array(12),(Ee=new DataView(ft.buffer)).setUint32(0,Ot),g(Ee,4,rt),ft}function Mt(pt){var Ee=pt.getTime(),rt=Math.floor(Ee/1e3),Ot=1e6*(Ee-1e3*rt),ft=Math.floor(Ot/1e9);return{sec:rt+ft,nsec:Ot-1e9*ft}}function Ct(pt){return pt instanceof Date?Tt(Mt(pt)):null}function Sn(pt){var Ee=new DataView(pt.buffer,pt.byteOffset,pt.byteLength);switch(pt.byteLength){case 4:return{sec:Ee.getUint32(0),nsec:0};case 8:var rt=Ee.getUint32(0);return{sec:4294967296*(3&rt)+Ee.getUint32(4),nsec:rt>>>2};case 12:return{sec:p(Ee,4),nsec:Ee.getUint32(0)};default:throw new Re("Unrecognized data size for timestamp (expected 4, 8, or 12): "+pt.length)}}function on(pt){var Ee=Sn(pt);return new Date(1e3*Ee.sec+Ee.nsec/1e6)}var cn={type:tt,encode:Ct,decode:on},vt=function(){function pt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(cn)}return pt.prototype.register=function(Ee){var rt=Ee.type,Ot=Ee.encode,ft=Ee.decode;if(rt>=0)this.encoders[rt]=Ot,this.decoders[rt]=ft;else{var pn=1+rt;this.builtInEncoders[pn]=Ot,this.builtInDecoders[pn]=ft}},pt.prototype.tryToEncode=function(Ee,rt){for(var Ot=0;Ot<this.builtInEncoders.length;Ot++)if(null!=(ft=this.builtInEncoders[Ot])&&null!=(pn=ft(Ee,rt)))return new fe(-1-Ot,pn);for(Ot=0;Ot<this.encoders.length;Ot++){var ft,pn;if(null!=(ft=this.encoders[Ot])&&null!=(pn=ft(Ee,rt)))return new fe(Ot,pn)}return Ee instanceof fe?Ee:null},pt.prototype.decode=function(Ee,rt,Ot){var ft=rt<0?this.builtInDecoders[-1-rt]:this.decoders[rt];return ft?ft(Ee,rt,Ot):new fe(rt,Ee)},pt.defaultCodec=new pt,pt}();function Ge(pt){return pt instanceof Uint8Array?pt:ArrayBuffer.isView(pt)?new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength):pt instanceof ArrayBuffer?new Uint8Array(pt):Uint8Array.from(pt)}var ot=function(pt){var Ee="function"==typeof Symbol&&Symbol.iterator,rt=Ee&&pt[Ee],Ot=0;if(rt)return rt.call(pt);if(pt&&"number"==typeof pt.length)return{next:function(){return pt&&Ot>=pt.length&&(pt=void 0),{value:pt&&pt[Ot++],done:!pt}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=function(){function pt(Ee,rt,Ot,ft,pn,nn,Gn,Dr){void 0===Ee&&(Ee=vt.defaultCodec),void 0===rt&&(rt=void 0),void 0===Ot&&(Ot=100),void 0===ft&&(ft=2048),void 0===pn&&(pn=!1),void 0===nn&&(nn=!1),void 0===Gn&&(Gn=!1),void 0===Dr&&(Dr=!1),this.extensionCodec=Ee,this.context=rt,this.maxDepth=Ot,this.initialBufferSize=ft,this.sortKeys=pn,this.forceFloat32=nn,this.ignoreUndefined=Gn,this.forceIntegerToFloat=Dr,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return pt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},pt.prototype.reinitializeState=function(){this.pos=0},pt.prototype.encode=function(Ee){return this.reinitializeState(),this.doEncode(Ee,1),this.getUint8Array()},pt.prototype.doEncode=function(Ee,rt){if(rt>this.maxDepth)throw new Error("Too deep objects in depth "+rt);null==Ee?this.encodeNil():"boolean"==typeof Ee?this.encodeBoolean(Ee):"number"==typeof Ee?this.encodeNumber(Ee):"string"==typeof Ee?this.encodeString(Ee):this.encodeObject(Ee,rt)},pt.prototype.ensureBufferSizeToWrite=function(Ee){var rt=this.pos+Ee;this.view.byteLength<rt&&this.resizeBuffer(2*rt)},pt.prototype.resizeBuffer=function(Ee){var rt=new ArrayBuffer(Ee),Ot=new Uint8Array(rt),ft=new DataView(rt);Ot.set(this.bytes),this.view=ft,this.bytes=Ot},pt.prototype.encodeNil=function(){this.writeU8(192)},pt.prototype.encodeBoolean=function(Ee){this.writeU8(!1===Ee?194:195)},pt.prototype.encodeNumber=function(Ee){Number.isSafeInteger(Ee)&&!this.forceIntegerToFloat?Ee>=0?Ee<128?this.writeU8(Ee):Ee<256?(this.writeU8(204),this.writeU8(Ee)):Ee<65536?(this.writeU8(205),this.writeU16(Ee)):Ee<4294967296?(this.writeU8(206),this.writeU32(Ee)):(this.writeU8(207),this.writeU64(Ee)):Ee>=-32?this.writeU8(224|Ee+32):Ee>=-128?(this.writeU8(208),this.writeI8(Ee)):Ee>=-32768?(this.writeU8(209),this.writeI16(Ee)):Ee>=-2147483648?(this.writeU8(210),this.writeI32(Ee)):(this.writeU8(211),this.writeI64(Ee)):this.forceFloat32?(this.writeU8(202),this.writeF32(Ee)):(this.writeU8(203),this.writeF64(Ee))},pt.prototype.writeStringHeader=function(Ee){if(Ee<32)this.writeU8(160+Ee);else if(Ee<256)this.writeU8(217),this.writeU8(Ee);else if(Ee<65536)this.writeU8(218),this.writeU16(Ee);else{if(!(Ee<4294967296))throw new Error("Too long string: "+Ee+" bytes in UTF-8");this.writeU8(219),this.writeU32(Ee)}},pt.prototype.encodeString=function(Ee){if(Ee.length>R){var rt=b(Ee);this.ensureBufferSizeToWrite(5+rt),this.writeStringHeader(rt),N(Ee,this.bytes,this.pos),this.pos+=rt}else rt=b(Ee),this.ensureBufferSizeToWrite(5+rt),this.writeStringHeader(rt),function(Ot,ft,pn){for(var nn=Ot.length,Gn=pn,Dr=0;Dr<nn;){var Hr=Ot.charCodeAt(Dr++);if(0!=(4294967168&Hr)){if(0==(4294965248&Hr))ft[Gn++]=Hr>>6&31|192;else{if(Hr>=55296&&Hr<=56319&&Dr<nn){var Tn=Ot.charCodeAt(Dr);56320==(64512&Tn)&&(++Dr,Hr=((1023&Hr)<<10)+(1023&Tn)+65536)}0==(4294901760&Hr)?(ft[Gn++]=Hr>>12&15|224,ft[Gn++]=Hr>>6&63|128):(ft[Gn++]=Hr>>18&7|240,ft[Gn++]=Hr>>12&63|128,ft[Gn++]=Hr>>6&63|128)}ft[Gn++]=63&Hr|128}else ft[Gn++]=Hr}}(Ee,this.bytes,this.pos),this.pos+=rt},pt.prototype.encodeObject=function(Ee,rt){var Ot=this.extensionCodec.tryToEncode(Ee,this.context);if(null!=Ot)this.encodeExtension(Ot);else if(Array.isArray(Ee))this.encodeArray(Ee,rt);else if(ArrayBuffer.isView(Ee))this.encodeBinary(Ee);else{if("object"!=typeof Ee)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(Ee));this.encodeMap(Ee,rt)}},pt.prototype.encodeBinary=function(Ee){var rt=Ee.byteLength;if(rt<256)this.writeU8(196),this.writeU8(rt);else if(rt<65536)this.writeU8(197),this.writeU16(rt);else{if(!(rt<4294967296))throw new Error("Too large binary: "+rt);this.writeU8(198),this.writeU32(rt)}var Ot=Ge(Ee);this.writeU8a(Ot)},pt.prototype.encodeArray=function(Ee,rt){var Ot,ft,pn=Ee.length;if(pn<16)this.writeU8(144+pn);else if(pn<65536)this.writeU8(220),this.writeU16(pn);else{if(!(pn<4294967296))throw new Error("Too large array: "+pn);this.writeU8(221),this.writeU32(pn)}try{for(var nn=ot(Ee),Gn=nn.next();!Gn.done;Gn=nn.next())this.doEncode(Gn.value,rt+1)}catch(Hr){Ot={error:Hr}}finally{try{Gn&&!Gn.done&&(ft=nn.return)&&ft.call(nn)}finally{if(Ot)throw Ot.error}}},pt.prototype.countWithoutUndefined=function(Ee,rt){var Ot,ft,pn=0;try{for(var nn=ot(rt),Gn=nn.next();!Gn.done;Gn=nn.next())void 0!==Ee[Gn.value]&&pn++}catch(Dr){Ot={error:Dr}}finally{try{Gn&&!Gn.done&&(ft=nn.return)&&ft.call(nn)}finally{if(Ot)throw Ot.error}}return pn},pt.prototype.encodeMap=function(Ee,rt){var Ot,ft,pn=Object.keys(Ee);this.sortKeys&&pn.sort();var nn=this.ignoreUndefined?this.countWithoutUndefined(Ee,pn):pn.length;if(nn<16)this.writeU8(128+nn);else if(nn<65536)this.writeU8(222),this.writeU16(nn);else{if(!(nn<4294967296))throw new Error("Too large map object: "+nn);this.writeU8(223),this.writeU32(nn)}try{for(var Gn=ot(pn),Dr=Gn.next();!Dr.done;Dr=Gn.next()){var Hr=Dr.value,Tn=Ee[Hr];this.ignoreUndefined&&void 0===Tn||(this.encodeString(Hr),this.doEncode(Tn,rt+1))}}catch(Jn){Ot={error:Jn}}finally{try{Dr&&!Dr.done&&(ft=Gn.return)&&ft.call(Gn)}finally{if(Ot)throw Ot.error}}},pt.prototype.encodeExtension=function(Ee){var rt=Ee.data.length;if(1===rt)this.writeU8(212);else if(2===rt)this.writeU8(213);else if(4===rt)this.writeU8(214);else if(8===rt)this.writeU8(215);else if(16===rt)this.writeU8(216);else if(rt<256)this.writeU8(199),this.writeU8(rt);else if(rt<65536)this.writeU8(200),this.writeU16(rt);else{if(!(rt<4294967296))throw new Error("Too large extension object: "+rt);this.writeU8(201),this.writeU32(rt)}this.writeI8(Ee.type),this.writeU8a(Ee.data)},pt.prototype.writeU8=function(Ee){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,Ee),this.pos++},pt.prototype.writeU8a=function(Ee){var rt=Ee.length;this.ensureBufferSizeToWrite(rt),this.bytes.set(Ee,this.pos),this.pos+=rt},pt.prototype.writeI8=function(Ee){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,Ee),this.pos++},pt.prototype.writeU16=function(Ee){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,Ee),this.pos+=2},pt.prototype.writeI16=function(Ee){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,Ee),this.pos+=2},pt.prototype.writeU32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,Ee),this.pos+=4},pt.prototype.writeI32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,Ee),this.pos+=4},pt.prototype.writeF32=function(Ee){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,Ee),this.pos+=4},pt.prototype.writeF64=function(Ee){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,Ee),this.pos+=8},pt.prototype.writeU64=function(Ee){var rt,Ot,ft,nn;this.ensureBufferSizeToWrite(8),nn=ft=Ee,(rt=this.view).setUint32(Ot=this.pos,ft/4294967296),rt.setUint32(Ot+4,nn),this.pos+=8},pt.prototype.writeI64=function(Ee){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,Ee),this.pos+=8},pt}(),yn={};function Je(pt,Ee){return void 0===Ee&&(Ee=yn),new _t(Ee.extensionCodec,Ee.context,Ee.maxDepth,Ee.initialBufferSize,Ee.sortKeys,Ee.forceFloat32,Ee.ignoreUndefined,Ee.forceIntegerToFloat).encode(pt)}function at(pt){return(pt<0?"-":"")+"0x"+Math.abs(pt).toString(16).padStart(2,"0")}var Rt=function(){function pt(Ee,rt){void 0===Ee&&(Ee=16),void 0===rt&&(rt=16),this.maxKeyLength=Ee,this.maxLengthPerKey=rt,this.hit=0,this.miss=0,this.caches=[];for(var Ot=0;Ot<this.maxKeyLength;Ot++)this.caches.push([])}return pt.prototype.canBeCached=function(Ee){return Ee>0&&Ee<=this.maxKeyLength},pt.prototype.find=function(Ee,rt,Ot){var ft,pn,nn=this.caches[Ot-1];try{e:for(var Gn=function(Cr){var Ci="function"==typeof Symbol&&Symbol.iterator,ls=Ci&&Cr[Ci],uu=0;if(ls)return ls.call(Cr);if(Cr&&"number"==typeof Cr.length)return{next:function(){return Cr&&uu>=Cr.length&&(Cr=void 0),{value:Cr&&Cr[uu++],done:!Cr}}};throw new TypeError(Ci?"Object is not iterable.":"Symbol.iterator is not defined.")}(nn),Dr=Gn.next();!Dr.done;Dr=Gn.next()){for(var Hr=Dr.value,Tn=Hr.bytes,Jn=0;Jn<Ot;Jn++)if(Tn[Jn]!==Ee[rt+Jn])continue e;return Hr.str}}catch(Cr){ft={error:Cr}}finally{try{Dr&&!Dr.done&&(pn=Gn.return)&&pn.call(Gn)}finally{if(ft)throw ft.error}}return null},pt.prototype.store=function(Ee,rt){var Ot=this.caches[Ee.length-1],ft={bytes:Ee,str:rt};Ot.length>=this.maxLengthPerKey?Ot[Math.random()*Ot.length|0]=ft:Ot.push(ft)},pt.prototype.decode=function(Ee,rt,Ot){var ft=this.find(Ee,rt,Ot);if(null!=ft)return this.hit++,ft;this.miss++;var pn=j(Ee,rt,Ot),nn=Uint8Array.prototype.slice.call(Ee,rt,rt+Ot);return this.store(nn,pn),pn},pt}(),un=function(pt,Ee){var rt,Ot,ft,pn,nn={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return pn={next:Gn(0),throw:Gn(1),return:Gn(2)},"function"==typeof Symbol&&(pn[Symbol.iterator]=function(){return this}),pn;function Gn(Dr){return function(Hr){return function(Tn){if(rt)throw new TypeError("Generator is already executing.");for(;nn;)try{if(rt=1,Ot&&(ft=2&Tn[0]?Ot.return:Tn[0]?Ot.throw||((ft=Ot.return)&&ft.call(Ot),0):Ot.next)&&!(ft=ft.call(Ot,Tn[1])).done)return ft;switch(Ot=0,ft&&(Tn=[2&Tn[0],ft.value]),Tn[0]){case 0:case 1:ft=Tn;break;case 4:return nn.label++,{value:Tn[1],done:!1};case 5:nn.label++,Ot=Tn[1],Tn=[0];continue;case 7:Tn=nn.ops.pop(),nn.trys.pop();continue;default:if(!((ft=(ft=nn.trys).length>0&&ft[ft.length-1])||6!==Tn[0]&&2!==Tn[0])){nn=0;continue}if(3===Tn[0]&&(!ft||Tn[1]>ft[0]&&Tn[1]<ft[3])){nn.label=Tn[1];break}if(6===Tn[0]&&nn.label<ft[1]){nn.label=ft[1],ft=Tn;break}if(ft&&nn.label<ft[2]){nn.label=ft[2],nn.ops.push(Tn);break}ft[2]&&nn.ops.pop(),nn.trys.pop();continue}Tn=Ee.call(pt,nn)}catch(Jn){Tn=[6,Jn],Ot=0}finally{rt=ft=0}if(5&Tn[0])throw Tn[1];return{value:Tn[0]?Tn[1]:void 0,done:!0}}([Dr,Hr])}}},wn=function(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,rt=pt[Symbol.asyncIterator];return rt?rt.call(pt):(pt="function"==typeof __values?__values(pt):pt[Symbol.iterator](),Ee={},Ot("next"),Ot("throw"),Ot("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Ot(ft){Ee[ft]=pt[ft]&&function(pn){return new Promise(function(nn,Gn){var Dr,Hr,Tn;Dr=nn,Hr=Gn,Tn=(pn=pt[ft](pn)).done,Promise.resolve(pn.value).then(function(Cr){Dr({value:Cr,done:Tn})},Hr)})}}},Vt=function(pt){return this instanceof Vt?(this.v=pt,this):new Vt(pt)},V=function(pt,Ee,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,ft=rt.apply(pt,Ee||[]),pn=[];return Ot={},nn("next"),nn("throw"),nn("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot;function nn(Jn){ft[Jn]&&(Ot[Jn]=function(Cr){return new Promise(function(Ci,ls){pn.push([Jn,Cr,Ci,ls])>1||Gn(Jn,Cr)})})}function Gn(Jn,Cr){try{(Ci=ft[Jn](Cr)).value instanceof Vt?Promise.resolve(Ci.value.v).then(Dr,Hr):Tn(pn[0][2],Ci)}catch(ls){Tn(pn[0][3],ls)}var Ci}function Dr(Jn){Gn("next",Jn)}function Hr(Jn){Gn("throw",Jn)}function Tn(Jn,Cr){Jn(Cr),pn.shift(),pn.length&&Gn(pn[0][0],pn[0][1])}},_e=new DataView(new ArrayBuffer(0)),ke=new Uint8Array(_e.buffer),Nt=function(){try{_e.getInt8(0)}catch(pt){return pt.constructor}throw new Error("never reached")}(),In=new Nt("Insufficient data"),Ir=new Rt,Sr=function(){function pt(Ee,rt,Ot,ft,pn,nn,Gn,Dr){void 0===Ee&&(Ee=vt.defaultCodec),void 0===rt&&(rt=void 0),void 0===Ot&&(Ot=h),void 0===ft&&(ft=h),void 0===pn&&(pn=h),void 0===nn&&(nn=h),void 0===Gn&&(Gn=h),void 0===Dr&&(Dr=Ir),this.extensionCodec=Ee,this.context=rt,this.maxStrLength=Ot,this.maxBinLength=ft,this.maxArrayLength=pn,this.maxMapLength=nn,this.maxExtLength=Gn,this.keyDecoder=Dr,this.totalPos=0,this.pos=0,this.view=_e,this.bytes=ke,this.headByte=-1,this.stack=[]}return pt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},pt.prototype.setBuffer=function(Ee){this.bytes=Ge(Ee),this.view=function(rt){if(rt instanceof ArrayBuffer)return new DataView(rt);var Ot=Ge(rt);return new DataView(Ot.buffer,Ot.byteOffset,Ot.byteLength)}(this.bytes),this.pos=0},pt.prototype.appendBuffer=function(Ee){if(-1!==this.headByte||this.hasRemaining(1)){var rt=this.bytes.subarray(this.pos),Ot=Ge(Ee),ft=new Uint8Array(rt.length+Ot.length);ft.set(rt),ft.set(Ot,rt.length),this.setBuffer(ft)}else this.setBuffer(Ee)},pt.prototype.hasRemaining=function(Ee){return this.view.byteLength-this.pos>=Ee},pt.prototype.createExtraByteError=function(Ee){var rt=this.view;return new RangeError("Extra "+(rt.byteLength-this.pos)+" of "+rt.byteLength+" byte(s) found at buffer["+Ee+"]")},pt.prototype.decode=function(Ee){this.reinitializeState(),this.setBuffer(Ee);var rt=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return rt},pt.prototype.decodeMulti=function(Ee){return un(this,function(rt){switch(rt.label){case 0:this.reinitializeState(),this.setBuffer(Ee),rt.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return rt.sent(),[3,1];case 3:return[2]}})},pt.prototype.decodeAsync=function(Ee){var rt,Ot,ft,pn,nn,Dr,Hr;return nn=this,void 0,Hr=function(){var Tn,Jn,Cr,Ci,ls,uu,On,qn;return un(this,function(Ur){switch(Ur.label){case 0:Tn=!1,Ur.label=1;case 1:Ur.trys.push([1,6,7,12]),rt=wn(Ee),Ur.label=2;case 2:return[4,rt.next()];case 3:if((Ot=Ur.sent()).done)return[3,5];if(Cr=Ot.value,Tn)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Cr);try{Jn=this.doDecodeSync(),Tn=!0}catch(Qi){if(!(Qi instanceof Nt))throw Qi}this.totalPos+=this.pos,Ur.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Ci=Ur.sent(),ft={error:Ci},[3,12];case 7:return Ur.trys.push([7,,10,11]),Ot&&!Ot.done&&(pn=rt.return)?[4,pn.call(rt)]:[3,9];case 8:Ur.sent(),Ur.label=9;case 9:return[3,11];case 10:if(ft)throw ft.error;return[7];case 11:return[7];case 12:if(Tn){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Jn]}throw uu=(ls=this).headByte,On=ls.pos,qn=ls.totalPos,new RangeError("Insufficient data in parsing "+at(uu)+" at "+qn+" ("+On+" in the current buffer)")}})},new((Dr=void 0)||(Dr=Promise))(function(Tn,Jn){function Cr(uu){try{ls(Hr.next(uu))}catch(On){Jn(On)}}function Ci(uu){try{ls(Hr.throw(uu))}catch(On){Jn(On)}}function ls(uu){var On;uu.done?Tn(uu.value):(On=uu.value,On instanceof Dr?On:new Dr(function(qn){qn(On)})).then(Cr,Ci)}ls((Hr=Hr.apply(nn,[])).next())})},pt.prototype.decodeArrayStream=function(Ee){return this.decodeMultiAsync(Ee,!0)},pt.prototype.decodeStream=function(Ee){return this.decodeMultiAsync(Ee,!1)},pt.prototype.decodeMultiAsync=function(Ee,rt){return V(this,arguments,function(){var Ot,ft,pn,nn,Gn,Dr,Hr,Tn,Jn;return un(this,function(Cr){switch(Cr.label){case 0:Ot=rt,ft=-1,Cr.label=1;case 1:Cr.trys.push([1,13,14,19]),pn=wn(Ee),Cr.label=2;case 2:return[4,Vt(pn.next())];case 3:if((nn=Cr.sent()).done)return[3,12];if(Gn=nn.value,rt&&0===ft)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Gn),Ot&&(ft=this.readArraySize(),Ot=!1,this.complete()),Cr.label=4;case 4:Cr.trys.push([4,9,,10]),Cr.label=5;case 5:return[4,Vt(this.doDecodeSync())];case 6:return[4,Cr.sent()];case 7:return Cr.sent(),0==--ft?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((Dr=Cr.sent())instanceof Nt))throw Dr;return[3,10];case 10:this.totalPos+=this.pos,Cr.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Hr=Cr.sent(),Tn={error:Hr},[3,19];case 14:return Cr.trys.push([14,,17,18]),nn&&!nn.done&&(Jn=pn.return)?[4,Vt(Jn.call(pn))]:[3,16];case 15:Cr.sent(),Cr.label=16;case 16:return[3,18];case 17:if(Tn)throw Tn.error;return[7];case 18:return[7];case 19:return[2]}})})},pt.prototype.doDecodeSync=function(){e:for(;;){var Ee=this.readHeadByte(),rt=void 0;if(Ee>=224)rt=Ee-256;else if(Ee<192)if(Ee<128)rt=Ee;else if(Ee<144){if(0!=(ft=Ee-128)){this.pushMapState(ft),this.complete();continue e}rt={}}else if(Ee<160){if(0!=(ft=Ee-144)){this.pushArrayState(ft),this.complete();continue e}rt=[]}else{var Ot=Ee-160;rt=this.decodeUtf8String(Ot,0)}else if(192===Ee)rt=null;else if(194===Ee)rt=!1;else if(195===Ee)rt=!0;else if(202===Ee)rt=this.readF32();else if(203===Ee)rt=this.readF64();else if(204===Ee)rt=this.readU8();else if(205===Ee)rt=this.readU16();else if(206===Ee)rt=this.readU32();else if(207===Ee)rt=this.readU64();else if(208===Ee)rt=this.readI8();else if(209===Ee)rt=this.readI16();else if(210===Ee)rt=this.readI32();else if(211===Ee)rt=this.readI64();else if(217===Ee)Ot=this.lookU8(),rt=this.decodeUtf8String(Ot,1);else if(218===Ee)Ot=this.lookU16(),rt=this.decodeUtf8String(Ot,2);else if(219===Ee)Ot=this.lookU32(),rt=this.decodeUtf8String(Ot,4);else if(220===Ee){if(0!==(ft=this.readU16())){this.pushArrayState(ft),this.complete();continue e}rt=[]}else if(221===Ee){if(0!==(ft=this.readU32())){this.pushArrayState(ft),this.complete();continue e}rt=[]}else if(222===Ee){if(0!==(ft=this.readU16())){this.pushMapState(ft),this.complete();continue e}rt={}}else if(223===Ee){if(0!==(ft=this.readU32())){this.pushMapState(ft),this.complete();continue e}rt={}}else if(196===Ee){var ft=this.lookU8();rt=this.decodeBinary(ft,1)}else if(197===Ee)ft=this.lookU16(),rt=this.decodeBinary(ft,2);else if(198===Ee)ft=this.lookU32(),rt=this.decodeBinary(ft,4);else if(212===Ee)rt=this.decodeExtension(1,0);else if(213===Ee)rt=this.decodeExtension(2,0);else if(214===Ee)rt=this.decodeExtension(4,0);else if(215===Ee)rt=this.decodeExtension(8,0);else if(216===Ee)rt=this.decodeExtension(16,0);else if(199===Ee)ft=this.lookU8(),rt=this.decodeExtension(ft,1);else if(200===Ee)ft=this.lookU16(),rt=this.decodeExtension(ft,2);else{if(201!==Ee)throw new Re("Unrecognized type byte: "+at(Ee));ft=this.lookU32(),rt=this.decodeExtension(ft,4)}this.complete();for(var pn=this.stack;pn.length>0;){var nn=pn[pn.length-1];if(0===nn.type){if(nn.array[nn.position]=rt,nn.position++,nn.position!==nn.size)continue e;pn.pop(),rt=nn.array}else{if(1===nn.type){if("string"!=(Gn=typeof rt)&&"number"!==Gn)throw new Re("The type of key must be string or number but "+typeof rt);if("__proto__"===rt)throw new Re("The key __proto__ is not allowed");nn.key=rt,nn.type=2;continue e}if(nn.map[nn.key]=rt,nn.readCount++,nn.readCount!==nn.size){nn.key=null,nn.type=1;continue e}pn.pop(),rt=nn.map}}return rt}var Gn},pt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},pt.prototype.complete=function(){this.headByte=-1},pt.prototype.readArraySize=function(){var Ee=this.readHeadByte();switch(Ee){case 220:return this.readU16();case 221:return this.readU32();default:if(Ee<160)return Ee-144;throw new Re("Unrecognized array type byte: "+at(Ee))}},pt.prototype.pushMapState=function(Ee){if(Ee>this.maxMapLength)throw new Re("Max length exceeded: map length ("+Ee+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:Ee,key:null,readCount:0,map:{}})},pt.prototype.pushArrayState=function(Ee){if(Ee>this.maxArrayLength)throw new Re("Max length exceeded: array length ("+Ee+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:Ee,array:new Array(Ee),position:0})},pt.prototype.decodeUtf8String=function(Ee,rt){var Ot;if(Ee>this.maxStrLength)throw new Re("Max length exceeded: UTF-8 byte length ("+Ee+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+rt+Ee)throw In;var ft,Gn,Hr,pn=this.pos+rt;return ft=this.stateIsMapKey()&&(null===(Ot=this.keyDecoder)||void 0===Ot?void 0:Ot.canBeCached(Ee))?this.keyDecoder.decode(this.bytes,pn,Ee):Ee>ae?(Hr=this.bytes.subarray(Gn=pn,Gn+Ee),$.decode(Hr)):j(this.bytes,pn,Ee),this.pos+=rt+Ee,ft},pt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},pt.prototype.decodeBinary=function(Ee,rt){if(Ee>this.maxBinLength)throw new Re("Max length exceeded: bin length ("+Ee+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(Ee+rt))throw In;var Ot=this.pos+rt,ft=this.bytes.subarray(Ot,Ot+Ee);return this.pos+=rt+Ee,ft},pt.prototype.decodeExtension=function(Ee,rt){if(Ee>this.maxExtLength)throw new Re("Max length exceeded: ext length ("+Ee+") > maxExtLength ("+this.maxExtLength+")");var Ot=this.view.getInt8(this.pos+rt),ft=this.decodeBinary(Ee,rt+1);return this.extensionCodec.decode(ft,Ot,this.context)},pt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},pt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},pt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},pt.prototype.readU8=function(){var Ee=this.view.getUint8(this.pos);return this.pos++,Ee},pt.prototype.readI8=function(){var Ee=this.view.getInt8(this.pos);return this.pos++,Ee},pt.prototype.readU16=function(){var Ee=this.view.getUint16(this.pos);return this.pos+=2,Ee},pt.prototype.readI16=function(){var Ee=this.view.getInt16(this.pos);return this.pos+=2,Ee},pt.prototype.readU32=function(){var Ee=this.view.getUint32(this.pos);return this.pos+=4,Ee},pt.prototype.readI32=function(){var Ee=this.view.getInt32(this.pos);return this.pos+=4,Ee},pt.prototype.readU64=function(){var Ee,rt,Ot=4294967296*(Ee=this.view).getUint32(rt=this.pos)+Ee.getUint32(rt+4);return this.pos+=8,Ot},pt.prototype.readI64=function(){var Ee=p(this.view,this.pos);return this.pos+=8,Ee},pt.prototype.readF32=function(){var Ee=this.view.getFloat32(this.pos);return this.pos+=4,Ee},pt.prototype.readF64=function(){var Ee=this.view.getFloat64(this.pos);return this.pos+=8,Ee},pt}(),xr={};function ji(pt,Ee){return void 0===Ee&&(Ee=xr),new Sr(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decode(pt)}function kc(pt,Ee){return void 0===Ee&&(Ee=xr),new Sr(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeMulti(pt)}var Aa=function(pt,Ee){var rt,Ot,ft,pn,nn={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return pn={next:Gn(0),throw:Gn(1),return:Gn(2)},"function"==typeof Symbol&&(pn[Symbol.iterator]=function(){return this}),pn;function Gn(Dr){return function(Hr){return function(Tn){if(rt)throw new TypeError("Generator is already executing.");for(;nn;)try{if(rt=1,Ot&&(ft=2&Tn[0]?Ot.return:Tn[0]?Ot.throw||((ft=Ot.return)&&ft.call(Ot),0):Ot.next)&&!(ft=ft.call(Ot,Tn[1])).done)return ft;switch(Ot=0,ft&&(Tn=[2&Tn[0],ft.value]),Tn[0]){case 0:case 1:ft=Tn;break;case 4:return nn.label++,{value:Tn[1],done:!1};case 5:nn.label++,Ot=Tn[1],Tn=[0];continue;case 7:Tn=nn.ops.pop(),nn.trys.pop();continue;default:if(!((ft=(ft=nn.trys).length>0&&ft[ft.length-1])||6!==Tn[0]&&2!==Tn[0])){nn=0;continue}if(3===Tn[0]&&(!ft||Tn[1]>ft[0]&&Tn[1]<ft[3])){nn.label=Tn[1];break}if(6===Tn[0]&&nn.label<ft[1]){nn.label=ft[1],ft=Tn;break}if(ft&&nn.label<ft[2]){nn.label=ft[2],nn.ops.push(Tn);break}ft[2]&&nn.ops.pop(),nn.trys.pop();continue}Tn=Ee.call(pt,nn)}catch(Jn){Tn=[6,Jn],Ot=0}finally{rt=ft=0}if(5&Tn[0])throw Tn[1];return{value:Tn[0]?Tn[1]:void 0,done:!0}}([Dr,Hr])}}},yo=function(pt){return this instanceof yo?(this.v=pt,this):new yo(pt)},qi=function(pt,Ee,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot,ft=rt.apply(pt,Ee||[]),pn=[];return Ot={},nn("next"),nn("throw"),nn("return"),Ot[Symbol.asyncIterator]=function(){return this},Ot;function nn(Jn){ft[Jn]&&(Ot[Jn]=function(Cr){return new Promise(function(Ci,ls){pn.push([Jn,Cr,Ci,ls])>1||Gn(Jn,Cr)})})}function Gn(Jn,Cr){try{(Ci=ft[Jn](Cr)).value instanceof yo?Promise.resolve(Ci.value.v).then(Dr,Hr):Tn(pn[0][2],Ci)}catch(ls){Tn(pn[0][3],ls)}var Ci}function Dr(Jn){Gn("next",Jn)}function Hr(Jn){Gn("throw",Jn)}function Tn(Jn,Cr){Jn(Cr),pn.shift(),pn.length&&Gn(pn[0][0],pn[0][1])}};function Qs(pt){if(null==pt)throw new Error("Assertion Failure: value must not be null nor undefined")}function Up(pt){return null!=pt[Symbol.asyncIterator]?pt:function(Ee){return qi(this,arguments,function(){var rt,Ot,pn;return Aa(this,function(nn){switch(nn.label){case 0:rt=Ee.getReader(),nn.label=1;case 1:nn.trys.push([1,,9,10]),nn.label=2;case 2:return[4,yo(rt.read())];case 3:return Ot=nn.sent(),pn=Ot.value,Ot.done?[4,yo(void 0)]:[3,5];case 4:return[2,nn.sent()];case 5:return Qs(pn),[4,yo(pn)];case 6:return[4,nn.sent()];case 7:return nn.sent(),[3,2];case 8:return[3,10];case 9:return rt.releaseLock(),[7];case 10:return[2]}})})}(pt)}function Wd(pt,Ee){return void 0===Ee&&(Ee=xr),rt=this,void 0,pn=function(){var nn;return function(Gn,Dr){var Hr,Tn,Jn,Cr,Ci={label:0,sent:function(){if(1&Jn[0])throw Jn[1];return Jn[1]},trys:[],ops:[]};return Cr={next:ls(0),throw:ls(1),return:ls(2)},"function"==typeof Symbol&&(Cr[Symbol.iterator]=function(){return this}),Cr;function ls(uu){return function(On){return function(qn){if(Hr)throw new TypeError("Generator is already executing.");for(;Ci;)try{if(Hr=1,Tn&&(Jn=2&qn[0]?Tn.return:qn[0]?Tn.throw||((Jn=Tn.return)&&Jn.call(Tn),0):Tn.next)&&!(Jn=Jn.call(Tn,qn[1])).done)return Jn;switch(Tn=0,Jn&&(qn=[2&qn[0],Jn.value]),qn[0]){case 0:case 1:Jn=qn;break;case 4:return Ci.label++,{value:qn[1],done:!1};case 5:Ci.label++,Tn=qn[1],qn=[0];continue;case 7:qn=Ci.ops.pop(),Ci.trys.pop();continue;default:if(!((Jn=(Jn=Ci.trys).length>0&&Jn[Jn.length-1])||6!==qn[0]&&2!==qn[0])){Ci=0;continue}if(3===qn[0]&&(!Jn||qn[1]>Jn[0]&&qn[1]<Jn[3])){Ci.label=qn[1];break}if(6===qn[0]&&Ci.label<Jn[1]){Ci.label=Jn[1],Jn=qn;break}if(Jn&&Ci.label<Jn[2]){Ci.label=Jn[2],Ci.ops.push(qn);break}Jn[2]&&Ci.ops.pop(),Ci.trys.pop();continue}qn=Dr.call(Gn,Ci)}catch(Ur){qn=[6,Ur],Tn=0}finally{Hr=Jn=0}if(5&qn[0])throw qn[1];return{value:qn[0]?qn[1]:void 0,done:!0}}([uu,On])}}}(this,function(Gn){return nn=Up(pt),[2,new Sr(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeAsync(nn)]})},new((ft=void 0)||(ft=Promise))(function(nn,Gn){function Dr(Jn){try{Tn(pn.next(Jn))}catch(Cr){Gn(Cr)}}function Hr(Jn){try{Tn(pn.throw(Jn))}catch(Cr){Gn(Cr)}}function Tn(Jn){var Cr;Jn.done?nn(Jn.value):(Cr=Jn.value,Cr instanceof ft?Cr:new ft(function(Ci){Ci(Cr)})).then(Dr,Hr)}Tn((pn=pn.apply(rt,[])).next())});var rt,ft,pn}function Vp(pt,Ee){void 0===Ee&&(Ee=xr);var rt=Up(pt);return new Sr(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeArrayStream(rt)}function bs(pt,Ee){void 0===Ee&&(Ee=xr);var rt=Up(pt);return new Sr(Ee.extensionCodec,Ee.context,Ee.maxStrLength,Ee.maxBinLength,Ee.maxArrayLength,Ee.maxMapLength,Ee.maxExtLength).decodeStream(rt)}function vG(pt,Ee){return void 0===Ee&&(Ee=xr),bs(pt,Ee)}return c}()})(SQ),(0,Dp.exports)("Int8",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Int16",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Int32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Uint16",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Uint32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Float32",function(n){return function(i,o,c){return n(this,i,o,c)}}),(0,Dp.exports)("Float64",function(n){return function(i,o,c){return n(this,i,o,c)}});const b4=()=>function(n){const i=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(o=>o.charCodeAt(0));return new Uint8Array(i,0,i.length/Uint8Array.BYTES_PER_ELEMENT)}();let PL,Zf;function s2(){return s2=L(function*(){if(PL)return PL;const n={};let i,o={};for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i]);let c=!1,h=!1;c="object"==typeof window,h="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||h)&&(h?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),n.print||console.log.bind(console);const p=n.printErr||console.warn.bind(console);for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i]);let v;o=null,"object"!=typeof WebAssembly&&tt("no native wasm support detected");let _=!1;function y(Je){const at=n["_"+Je];return at||tt("Assertion failed: Cannot call unknown function "+Je+", make sure it is exported"),at}function b(Je,at,Rt,un,wn){const Vt={string:function(In){let Ir=0;if(null!=In&&0!==In){const Sr=1+(In.length<<2);Ir=_t(Sr),function(Aa,yo,qi,Qs){if(!(Qs>0))return 0;const Wd=qi+Qs-1;for(let Vp=0;Vp<Aa.length;++Vp){let bs=Aa.charCodeAt(Vp);if(bs>=55296&&bs<=57343&&(bs=65536+((1023&bs)<<10)|1023&Aa.charCodeAt(++Vp)),bs<=127){if(qi>=Wd)break;yo[qi++]=bs}else if(bs<=2047){if(qi+1>=Wd)break;yo[qi++]=192|bs>>6,yo[qi++]=128|63&bs}else if(bs<=65535){if(qi+2>=Wd)break;yo[qi++]=224|bs>>12,yo[qi++]=128|bs>>6&63,yo[qi++]=128|63&bs}else{if(qi+3>=Wd)break;yo[qi++]=240|bs>>18,yo[qi++]=128|bs>>12&63,yo[qi++]=128|bs>>6&63,yo[qi++]=128|63&bs}}yo[qi]=0}(In,N,Ir,Sr)}return Ir},array:function(In){const Ir=_t(In.length);return R.set(In,Ir),Ir}},V=y(Je),_e=[];let ke=0;if(un)for(let In=0;In<un.length;In++){const Ir=Vt[Rt[In]];Ir?(0===ke&&(ke=Ge()),_e[In]=Ir(un[In])):_e[In]=un[In]}let Nt=V.apply(null,_e);return In=Nt,Nt="string"===at?(Ir=In)?function(xr,ji,kc){const Aa=ji+undefined;let yo=ji,qi="";for(;xr[yo]&&!(yo>=Aa);)++yo;if(yo-ji>16&&xr.subarray&&C)return C.decode(xr.subarray(ji,yo));for(;ji<yo;){let Qs=xr[ji++];if(!(128&Qs)){qi+=String.fromCharCode(Qs);continue}const Up=63&xr[ji++];if(192==(224&Qs)){qi+=String.fromCharCode((31&Qs)<<6|Up);continue}const Wd=63&xr[ji++];if(Qs=224==(240&Qs)?(15&Qs)<<12|Up<<6|Wd:(7&Qs)<<18|Up<<12|Wd<<6|63&xr[ji++],Qs<65536)qi+=String.fromCharCode(Qs);else{const Vp=Qs-65536;qi+=String.fromCharCode(55296|Vp>>10,56320|1023&Vp)}}return qi}(N,Ir):"":"boolean"===at?Boolean(In):In,0!==ke&&ot(ke),Nt;var In,Ir}const C=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let R,N,j;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const Q=[],$=[],ae=[],fe=[];$.push({func:function(){on()}});let Ae=0,Re=null;function tt(Je){throw n.onAbort&&n.onAbort(Je),p(Je+=""),_=!0,Je="abort("+Je+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(Je)}n.preloadedImages={},n.preloadedAudios={};let Tt="deflate.wasm";var Je;function Ct(Je){for(;Je.length>0;){const at=Je.shift();if("function"==typeof at){at(n);continue}const Rt=at.func;"number"==typeof Rt?void 0===at.arg?j.get(Rt)():j.get(Rt)(at.arg):Rt(void 0===at.arg?null:at.arg)}}Tt.startsWith("data:application/octet-stream;base64,")||(Je=Tt,Tt=n.locateFile?n.locateFile(Je,g):g+Je);const Sn={emscripten_memcpy_big:function(Je,at,Rt){N.copyWithin(Je,at,at+Rt)},emscripten_resize_heap:function(Je){tt("OOM")}};yield L(function*(){const Je={env:Sn,wasi_snapshot_preview1:Sn};function at(wn,Vt){var _e;n.asm=wn.exports,v=n.asm.memory,_e=v.buffer,n.HEAP8=R=new Int8Array(_e),n.HEAP16=new Int16Array(_e),n.HEAP32=new Int32Array(_e),n.HEAPU8=N=new Uint8Array(_e),n.HEAPU16=new Uint16Array(_e),n.HEAPU32=new Uint32Array(_e),n.HEAPF32=new Float32Array(_e),n.HEAPF64=new Float64Array(_e),j=n.asm.__indirect_function_table,function(ke){if(Ae--,n.monitorRunDependencies&&n.monitorRunDependencies(Ae),0==Ae&&Re){const Nt=Re;Re=null,Nt()}}()}if(Ae++,n.monitorRunDependencies&&n.monitorRunDependencies(Ae),n.instantiateWasm)try{return n.instantiateWasm(Je,at)}catch(wn){return p("Module.instantiateWasm callback failed with error: "+wn),!1}return yield function un(wn){return new jn((Vt,V)=>{Vt(b4().buffer)}).then(function(Vt){return WebAssembly.instantiate(Vt,Je)}).then(wn,function(Vt){p("failed to asynchronously prepare wasm: "+Vt),tt(Vt)})}(function Rt(wn){at(wn.instance)}),{}})();let on=n.___wasm_call_ctors=function(){return(on=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},cn=n._malloc=function(){return(cn=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n.___errno_location=function(){return(n.___errno_location=n.asm.__errno_location).apply(null,arguments)},n._zlibCompress=function(){return(n._zlibCompress=n.asm.zlibCompress).apply(null,arguments)};let vt,Ge=n.stackSave=function(){return(Ge=n.stackSave=n.asm.stackSave).apply(null,arguments)},ot=n.stackRestore=function(){return(ot=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},_t=n.stackAlloc=function(){return(_t=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};function yn(Je){function at(){vt||(vt=!0,n.calledRun=!0,_||(Ct($),Ct(ae),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)Rt=n.postRun.shift(),fe.unshift(Rt);var Rt;Ct(fe)}()))}Ae>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)Rt=n.preRun.shift(),Q.unshift(Rt);var Rt;Ct(Q)}(),Ae>0||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),at()},1)):at()))}if(n.ccall=b,n.cwrap=function(Je,at,Rt,un){const wn=(Rt=Rt||[]).every(function(Vt){return"number"===Vt});return"string"!==at&&wn&&!un?y(Je):function(){return b(Je,at,Rt,arguments)}},n.allocate=function(Je,at){let Rt;return Rt=1==at?_t(Je.length):cn(Je.length),N.set(Je.subarray||Je.slice?Je:new Uint8Array(Je),Rt),Rt},Re=function Je(){vt||yn(),vt||(Re=Je)},n.run=yn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return yn(),PL=n,n}),s2.apply(this,arguments)}const L1=Uint8Array.BYTES_PER_ELEMENT,S4={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},C4={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},IQ={_message:"m",_type:"t",_id:"id"},ML={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let I4;class Oz{constructor(){q(this,"zlibCompress",void 0)}init(){var i=this;return L(function*(){I4||(I4=(yield L(function*(){return Zf||(Zf=yield function CQ(){return s2.apply(this,arguments)}()),{zlibCompress:c=>{const h=new Uint8Array(c),g=L1*h.byteLength,p=Zf._malloc(g),v=Zf._malloc(3*g);for(let b=0;b<g;b++)Zf.HEAP8[p/L1+b]=h[b];const _=Zf._zlibCompress(p,g,v),y=new Uint8Array(Zf.HEAP8.slice(v,v+_));return Zf._free(p),Zf._free(v),y}}})()).zlibCompress),i.zlibCompress=I4})()}msgPackCompress(i){return SQ.exports.encode(i)}compress(i){const o=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(i))),h=this.msgPackCompress(c),g=this.zlibCompress(h),p=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},i),originLength:JSON.stringify(i).length,shortKeyAndValue:c,msgpackSer:h,compressed:p,compressedLength:p.length,time:Date.now()-o}}compressKeyAndValue(i){return this._ObjectKeyCompress(this._typeCompress(i))}_typeCompress(i){const o=i._type;return o?(i._type=ML[o]||o,i):i}_ObjectKeyCompress(i){const o=i._message;if(o){const c=o.stats;c&&(o.stats=this._statsCompress(c)),i._message=this._messageCompress(o)}return this._reportCompress(i)}_statsCompress(i){return this._keyCompress(i,S4)}_messageCompress(i){return this._keyCompress(i,C4)}_reportCompress(i){return this._keyCompress(i,IQ)}_keyCompress(i,o){const c={},h=Object.keys(i);return Oa(h).call(h,(g,p)=>{const v=i[p];return o[p]?c[o[p]]=v:c[p]=v,c},c),c}}class Dz extends rs{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(i){super(),q(this,"lowPriorityQueue",[]),q(this,"highPriorityQueue",[]),q(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=i}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(i){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(i):this.lowPriorityQueue.push(i),this.sendMessage()}sendMessage(){const i=this.queue.length;let o=0;o=i<5?15*i:60+3*(i-4),setTimeout(()=>{this._sendMessage()},o)}_sendMessage(){if(!this.queue.length)return;const i=this.AgoraWebSocketManager.getConnection();if(!i||1!==i.readyState)return;const o=this.queue.shift();return this.lowPriorityQueue.includes(o)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),i.send(o.compressed),o}}var a2;function T4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}let Jy=sc("AgoraWebSocketManager","connectionID")(a2=class extends rs{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){["tryNext","recover"].includes(n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,"reconnecting"===this._state?this.emit(Mr.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Mr.CONNECTED):"closed"===this._state?this.emit(Mr.CLOSED):"failed"===this._state&&this.emit(Mr.FAILED))}resetReconnectCount(n){oe.debug("websocket reset reconnect count, reason: "+n),Yt("debug",this,"resetReconnectCount",n,"websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,i){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),q(this,"connectionID",0),q(this,"currentURLIndex",0),q(this,"urls",void 0),q(this,"_reconnectMode","tryNext"),q(this,"reconnectReason",void 0),q(this,"_initMutex",new au("websocket")),q(this,"name",void 0),q(this,"_state","closed"),q(this,"reconnectInterrupter",void 0),q(this,"websocket",void 0),q(this,"retryConfig",void 0),q(this,"reconnectCount",0),q(this,"forceCloseTimeout",5e3),q(this,"onlineReconnectListener",void 0),q(this,"compressor",new Oz),q(this,"compressorInitStatus","initializing"),q(this,"compress",void 0),q(this,"messageSender",void 0),q(this,"useCompress",void 0),q(this,"tryDoubleDomain",!1),q(this,"wsInflateLength",0),q(this,"wsDeflateLength",0),q(this,"closeEstablishingWs",()=>{}),q(this,"store",void 0),q(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(b){for(var C=1;C<arguments.length;C++){var R=null!=arguments[C]?arguments[C]:{};C%2?T4(Object(R),!0).forEach(function(N){q(b,N,R[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(R)):T4(Object(R)).forEach(function(N){Object.defineProperty(b,N,Object.getOwnPropertyDescriptor(R,N))})}return b}({},i),this.useCompress=o,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:p}=i,v=Math.max(300,Math.floor(3*g/5)),_=Math.max(1.2,Math.floor(8*p)/10);Ou.ONLINE&&(this.retryConfig.timeout=v,this.retryConfig.timeoutFactor=_),Vs.on(NS.NETWORK_STATE_CHANGE,(b,C)=>{b!==C&&(this.resetReconnectCount("network state change: ".concat(C," -> ").concat(b)),b===Ou.ONLINE?(this.retryConfig.timeout=v,this.retryConfig.timeoutFactor=_):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=p))});const y=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const b=Date.now()-y;oe.debug("websocket compressor initialized successfully in ".concat(b,"ms")),Yt("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(b,"ms")),Kt.wsCompressorInit({status:!0,ec:null,eventElapse:b}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(b=>{this.compressorInitStatus="failed";const C=b?b.message||b.toString():"Empty Error";oe.debug("websocket compressor failed to initialize because of ".concat(C)),Yt("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(C)),Kt.wsCompressorInit({status:!1,ec:C,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(n){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const o=(c,h)=>{this.urls=n;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Dz(this),this.createWebSocketConnection(g).then(c).catch(h),this.once(Mr.CLOSED,()=>h(new Pe(Ie.WS_DISCONNECT))),this.once(Mr.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new jn((h,g)=>{o(h,g)}).then(()=>{c()}).catch(()=>{c()}))}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const o=this.websocket;i?setTimeout(()=>o.close(),500):o.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,i){if(!this.websocket)return oe.warning("[".concat(this.name,"] can not reconnect, no websocket")),void Yt("warning",this,"reconnect","can not reconnect, no websocket");var o;void 0!==n&&(this.reconnectMode=n),oe.debug("[".concat(this.name,"] reconnect is triggered initiative")),Yt("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(o=this.store)||void 0===o||o.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:i})}sendMessageWithJSON(n){const i=JSON.stringify(n);return{compressed:i,compressedLength:i.length,origin:n}}sendMessageWithUint8Array(n){return{compressed:n,compressedLength:n.byteLength,origin:n}}sendMessage(n){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Pe(Ie.WS_ABORT,"websocket is not ready");try{let c=null;if(o)c=this.sendMessageWithUint8Array(n);else if("initialized"===this.compressorInitStatus&&this.useCompress&&Bt("WEBSOCKET_COMPRESS"))try{c=this.compress(n),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(n)}else c=this.sendMessageWithJSON(n);i?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new Pe(Ie.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(n,i){var o=this;return L(function*(){return o.connectionID+=1,o.joinChannelServiceRecordIndex=void 0,new jn((c,h)=>{var g;const p=()=>{oe.debug("[".concat(o.name,"] websocket opened:"),n),Bd("debug",["WebSocket",o.connectionID],"open",n),o.reconnectMode="retry",o.state="connected",o.resetReconnectCount("opened"),c()},v=function(){var b=L(function*(C){if(oe.debug("[".concat(o.name,"] websocket close ").concat(o.websocket&&o.websocket.url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(o.reconnectMode)),Bd("debug",["WebSocket",o.connectionID],"close",{code:C.code,reason:C.reason,url:o.websocket&&o.websocket.url,reconnectMode:o.reconnectMode}),o.reconnectCount<o.retryConfig.maxRetryCount){"connected"===o.state&&(o.reconnectReason=C.reason,o.state="reconnecting");const R=wv(o,Mr.WILL_RECONNECT,o.reconnectMode)||o.reconnectMode,N=yield o.reconnectWithAction(R);if("closed"===o.state)return oe.debug("[".concat(o.connectionID,"] ws is closed, no need to reconnect")),void Ln("debug",o,"ws is closed, no need to reconnect");if(!N)return h(new Pe(Ie.WS_DISCONNECT,"websocket reconnect failed: ".concat(C.code))),void o.close(!0);c()}else h(new Pe(Ie.WS_DISCONNECT,"websocket close: ".concat(C.code))),o.close()});return function(R){return b.apply(this,arguments)}}(),_=b=>{o.emit(Mr.ON_MESSAGE,b)};o.websocket&&(o.websocket.onclose=null,o.websocket.close()),Bt("GATEWAY_WSS_ADDRESS")&&o.name.startsWith("gateway")&&(n=Bt("GATEWAY_WSS_ADDRESS")),oe.debug("[".concat(o.name,"] start connect, url: ").concat(n)),Ln("debug",o,"start connect, url: ".concat(n));const y=null===(g=o.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});o.chooseBestWebsocketConnection(n,!!i,y).then(b=>{var C;o.websocket=b,p&&p(),b.onclose=v,b.onmessage=_,null===(C=o.store)||void 0===C||C.recordJoinChannelService({endTs:Date.now(),status:"success"},y),o.joinChannelServiceRecordIndex=y}).catch(b=>{var C;if(null===(C=o.store)||void 0===C||C.recordJoinChannelService({endTs:Date.now(),status:b instanceof Pe&&b.code===Ie.WS_ABORT?"aborted":"error",errors:[b]},y),"closed"!==o.state){if(b instanceof Pe&&b.code===Ie.WS_ERR){const R=new Pe(Ie.WS_ERR,"init websocket failed! Error: ".concat(b.toString()));return oe.error("[".concat(o.name,"]").concat(R)),Yt("error",o,"chooseBestWebsocketConnection",void 0,b.toString()),void h(R)}v&&v(b)}else h(new Pe(Ie.WS_DISCONNECT,"websocket is closed: ".concat(b.toString())))})})})()}reconnectWithAction(n){var i=arguments,o=this;return L(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];if(o.reconnectCount>=o.retryConfig.maxRetryCount||!o.urls||"closed"===o.state)return!1;o.onlineReconnectListener||Vs.networkState!==Ou.OFFLINE||(o.onlineReconnectListener=Vs.onlineWaiter&&Vs.onlineWaiter.then(()=>{o.onlineReconnectListener=void 0}));let h=!0;if(o.reconnectInterrupter=()=>{h=!1},c){const p=xU(o.reconnectCount,o.retryConfig);oe.debug("[".concat(o.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(n)),Yt("debug",o,"reconnectWithAction",{timeout:p,action:n}),yield jn.race([lc(p),o.onlineReconnectListener||new jn(()=>{})])}if("closed"===o.state||!h)return!1;o.reconnectCount+=1;const g=function(){var p=L(function*(v,_){o.emit(Mr.RECONNECT_CREATE_CONNECTION,_),yield o.createWebSocketConnection(v)});return function(_,y){return p.apply(this,arguments)}}();try{if("retry"===n){const p=o.urls[o.currentURLIndex];o.emit(Mr.RECONNECT_WAITTING_FINISH,n),yield g(p,n)}else if("tryNext"===n){if(o.currentURLIndex+=1,o.currentURLIndex>=o.urls.length)return yield o.reconnectWithAction("recover",!1);oe.debug("[".concat(o.name,"] websocket url length: ").concat(o.urls.length," current index: ").concat(o.currentURLIndex)),Ln("debug",o,"websocket url length: ".concat(o.urls.length," current index: ").concat(o.currentURLIndex));const p=o.urls[o.currentURLIndex];o.emit(Mr.RECONNECT_WAITTING_FINISH,n),yield g(p,n)}else if("recover"===n){oe.debug("[".concat(o.name,"] request new urls")),Ln("debug",o,"request new urls"),o.resetReconnectCount("recover mode"),o.emit(Mr.RECONNECT_WAITTING_FINISH,n),o.urls=yield jd(o,Mr.REQUEST_NEW_URLS),o.currentURLIndex=0;const p=o.urls[o.currentURLIndex];yield g(p,n)}return!0}catch(p){return oe.error("[".concat(o.name,"] reconnect failed"),p.toString()),Yt("error",o,"reconnectWithAction",void 0,p.toString()),yield o.reconnectWithAction(n,c)}})()}chooseBestWebsocketConnection(n,i,o){var c=this;return L(function*(){return new jn((h,g)=>{let p=!1;const v=[];c.closeEstablishingWs=()=>{oe.debug("[choose-best-ws] close establishing websockets"),v.forEach(Q=>{Q.onclose=null,Q.onopen=null,Q.onmessage=null,Q.close()}),g(new Pe(Ie.WS_ABORT,"choose best websocket aborted"))};const _=Bt("GATEWAY_DOMAINS");let y;const b=n.indexOf("?h="),C=_.find(Q=>-1!==b?n.includes(Q,b):n.includes(Q));oe.debug("[choose-best-ws] currentDomain: ",C,", domains: ",_),Yt("debug",c,"chooseBestWebsocketConnection",{currentDomain:C,domains:_});let R=!c.tryDoubleDomain||i||!C;if(!R&&C){var N;const Q=Date.now();try{_.forEach($=>{const ae=-1===b?n.replace(C,$):n.substr(0,b)+n.substr(b).replace(C,$),fe=new WebSocket(ae);fe.binaryType="arraybuffer",v.push(fe),oe.debug("[choose-best-ws] ws is connecting:",fe.url),Ln("debug",c,"ws is connecting: ".concat(fe.url))})}catch{for(oe.debug("[choose-best-ws] ws create failed, fallback to single url"),Ln("debug",c,"ws create failed, fallback to single url"),v.forEach(ae=>ae.close());v.length;)v.pop();R=!0}null===(N=c.store)||void 0===N||N.recordJoinChannelService({urls:v.map($=>$.url),service:"gateway"},o),v.forEach($=>{$.onopen=()=>{if(p)return;const ae=Date.now()-Q;oe.debug("[choose-best-ws] ws open cost ".concat(ae,"ms")),v.filter(fe=>fe!==$).forEach(fe=>{oe.debug("[choose-best-ws]close backup websocket: ".concat(fe.url)),Ln("debug",c,"close backup websocket: ".concat(fe.url)),fe.close()}),p=!0,h($)},$.onclose=ae=>{y=ae,!p&&(v.find(fe=>!(fe.readyState===WebSocket.CLOSED||fe.readyState===WebSocket.CLOSING))||(oe.debug("[choose-best-ws] all websocket is closed"),Ln("debug",c,"all websocket is closed"),p=!0,g(y)))},$.onmessage=ae=>{oe.debug("[choose-best-ws]".concat($.url," onmessage: ").concat(ae.data)),Ln("debug",c,"".concat($.url," onmessage: ").concat(ae.data))}}),lc(c.forceCloseTimeout).then(()=>{v.forEach($=>{$.readyState!==WebSocket.OPEN&&$.close()})})}if(R){var j;let Q;oe.debug("[choose-best-ws] use single url: ",n),Ln("debug",c,"use single url: ".concat(n)),null===(j=c.store)||void 0===j||j.recordJoinChannelService({urls:[n],service:"gateway"},o);try{Q=new WebSocket(n),v.push(Q),Q.binaryType="arraybuffer"}catch($){const ae=new Pe(Ie.WS_ERR,"init websocket failed! Error: ".concat($.toString()));return oe.error("[".concat(c.name,"]").concat(ae)),Yt("error",c,"chooseBestWebsocketConnection",void 0,$.toString()),void g(ae)}Q.onopen=()=>{h(Q)},Q.onclose=$=>{g($)},Q.onmessage=$=>{oe.debug("[choose-best-ws]".concat(Q.url," onmessage: ").concat($.data)),Ln("debug",c,"".concat(Q.url," onmessage: ").concat($.data))},lc(c.forceCloseTimeout).then(()=>{Q&&Q.readyState!==WebSocket.OPEN&&Q.close()})}}).then(h=>(c.closeEstablishingWs=void 0,h)).catch(h=>{throw c.closeEstablishingWs=void 0,h})})()}})||a2;class w4{constructor(i){q(this,"input",[]),q(this,"size",void 0),this.size=i}add(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)}mean(){var i;return 0===this.input.length?0:Oa(i=this.input).call(i,(o,c)=>o+c)/this.input.length}}var R4;let O4=sc("AgoraRTCSignal","websocket.connectionID")(R4=class extends rs{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===Bs.CONNECTED?this.emit($r.WS_CONNECTED):n===Bs.RECONNECTING?this.emit($r.WS_RECONNECTING,this._websocketReconnectReason):n===Bs.CLOSED&&this.emit($r.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),q(this,"_disconnectedReason",void 0),q(this,"_websocketReconnectReason",void 0),q(this,"_connectionState",Bs.CLOSED),q(this,"reconnectToken",void 0),q(this,"websocket",void 0),q(this,"openConnectionTime",void 0),q(this,"clientId",void 0),q(this,"lastMsgTime",Date.now()),q(this,"uploadCache",[]),q(this,"uploadCacheInterval",void 0),q(this,"rttRolling",new w4(5)),q(this,"pingpongTimer",void 0),q(this,"wsInflateDataTimer",void 0),q(this,"pingpongTimeoutCount",0),q(this,"joinResponse",void 0),q(this,"multiIpOption",void 0),q(this,"initError",void 0),q(this,"spec",void 0),q(this,"store",void 0),q(this,"onWebsocketMessage",o=>{if(o.data instanceof ArrayBuffer)return void this.emit($r.ON_BINARY_DATA,o.data);const c=JSON.parse(o.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Bi.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Bi.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(Ls.UID_BANNED);break;case 15:this.close(Ls.IP_BANNED);break;case 16:this.close(Ls.CHANNEL_BANNED)}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new Jy("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Bs.CONNECTED&&this.reconnect("retry",fs.OFFLINE)})}request(n,i,o,c){var h=this;return L(function*(){const g=as(6,""),p={_id:g,_type:n,_message:i},v=h.websocket.connectionID,_=()=>new jn((j,Q)=>{if(h.connectionState===Bs.CONNECTED)return j();const $=()=>{h.off($r.WS_CLOSED,ae),j()},ae=()=>{h.off($r.WS_CONNECTED,$),Q(new Pe(Ie.WS_ABORT))};h.once($r.WS_CONNECTED,$),h.once($r.WS_CLOSED,ae),n!==di.PUBLISH&&n!==di.SUBSCRIBE&&n!==di.UNSUBSCRIBE&&n!==di.UNPUBLISH&&n!==di.CONTROL||h.once($r.DISCONNECT_P2P,()=>{Q(new Pe(Ie.DISCONNECT_P2P))}),n===di.PUBLISH&&h.once($r.ABORT_P2P_EXECUTION,()=>{Q(new Pe(Ie.DISCONNECT_P2P))})});if(h.connectionState!==Bs.CONNECTING&&h.connectionState!==Bs.RECONNECTING||n===di.JOIN||n===di.REJOIN||(yield _()),h.websocket.sendMessage(p,!0),c)return;const y=new jn((j,Q)=>{let $=!1;const ae=(Ae,Re)=>{$=!0,j({isSuccess:"success"===Ae,message:Re||{}}),h.off($r.WS_CLOSED,fe),h.off($r.WS_RECONNECTING,fe),h.emit($r.REQUEST_SUCCESS,n,i)};h.once("res-@".concat(g),ae);const fe=()=>{Q(new Pe(Ie.WS_ABORT,"type: ".concat(n))),h.off($r.WS_CLOSED,fe),h.off($r.WS_RECONNECTING,fe),h.off("res-@".concat(g),ae)};h.once($r.WS_CLOSED,fe),h.once($r.WS_RECONNECTING,fe),lc(Bt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==v||$||(oe.warning("ws request timeout, type: ".concat(n)),Ln("warning",h,"ws request timeout, type: ".concat(n)),h.emit($r.REQUEST_TIMEOUT,n,i))})});let b=null;try{b=yield y}catch(j){if(h.connectionState===Bs.CLOSED||n===di.LEAVE)throw new Pe(Ie.WS_ABORT);return!h.spec.forceWaitGatewayResponse||o?j.throw():n===di.JOIN||n===di.REJOIN?null:(yield _(),yield h.request(n,i))}if(b.isSuccess)return b.message;const C=Number(b.message.error_code||b.message.code),R=NL(C),N=new Pe(Ie.UNEXPECTED_RESPONSE,"".concat(R.desc,": ").concat(b.message.error_str),{code:C,data:b.message});return"success"===R.action?b.message:(oe.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(C,", message: ").concat(R.desc,", action: ").concat(R.action)),Ln("warning",h,"unexpected response from type ".concat(n,", error_code: ").concat(C,", message: ").concat(R.desc,", action: ").concat(R.action)),C===yr.ERR_TOO_MANY_BROADCASTERS?((n===di.JOIN||n===di.REJOIN)&&(h.initError=N,h.close()),N.throw()):"failed"===R.action?N.throw():"quit"===R.action?(h.initError=N,h.close(),N.throw()):(C===yr.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=b.message.option,oe.warning("[".concat(h.clientId,"] detect multi ip, recover")),Ln("warning",h,"detect multi ip, recover"),h.reconnect("recover",fs.MULTI_IP)):h.reconnect(R.action,fs.SERVER_ERROR),n===di.JOIN||n===di.REJOIN?null:yield h.request(n,i)))})()}waitMessage(n,i){return new jn(o=>{const c=h=>{(!i||i(h))&&(this.off(n,c),o(h))};this.on(n,c)})}upload(n,i){const o={_type:n,_message:i};try{this.websocket.sendMessage(o)}catch{const h=Bt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(o),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Bs.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},Bt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){this.websocket.sendMessage({_type:n,_message:i})}init(n,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new jn((o,c)=>{this.once($r.WS_CONNECTED,()=>o(this.joinResponse)),this.once($r.WS_CLOSED,()=>c(this.initError||new Pe(Ie.WS_ABORT))),this.connectionState=Bs.CONNECTING,this.websocket.init(n).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&void 0===this.openConnectionTime&&(oe.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new Pe(Ie.INIT_WEBSOCKET_TIMEOUT)))},Bt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||Ls.LEAVE,this.connectionState=Bs.CLOSED,oe.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===Ls.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new Jy("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var n=this;return L(function*(){if(!n.joinResponse){n.emit($r.ABORT_P2P_EXECUTION);const i=yield jd(n,$r.REQUEST_JOIN_INFO),o=yield n.request(di.JOIN,i);if(!o)return n.emit($r.REPORT_JOIN_GATEWAY,Ie.TIMEOUT,n.url||""),!1;n.joinResponse=o,n.emit($r.JOIN_RESPONSE,n.joinResponse),n.reconnectToken=n.joinResponse.rejoin_token}return n.connectionState=Bs.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),!0})()}rejoin(){var n=this;return L(function*(){if(!n.reconnectToken)throw new Pe(Ie.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const i=KS(n,$r.REQUEST_REJOIN_INFO);i.token=n.reconnectToken;const o=yield n.request(di.REJOIN,i);return!!o&&(n.connectionState=Bs.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),o.peers&&o.peers.forEach(c=>{n.emit(Bi.ON_USER_ONLINE,{uid:c.uid}),c.audio&&n.emit(Bi.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&n.emit(Bi.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),n.emit(c.audio_mute?Bi.MUTE_AUDIO:Bi.UNMUTE_AUDIO,{uid:c.uid}),n.emit(c.video_mute?Bi.MUTE_VIDEO:Bi.UNMUTE_VIDEO,{uid:c.uid}),n.emit(c.audio_enable_local?Bi.ENABLE_LOCAL_AUDIO:Bi.DISABLE_LOCAL_AUDIO,{uid:c.uid}),n.emit(c.video_enable_local?Bi.ENABLE_LOCAL_VIDEO:Bi.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||n.emit(Bi.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleNotification(n){oe.debug("[".concat(this.clientId,"] receive notification: "),n),Yt("debug",this,"handleNotification",n);const i=NL(n.code);if("success"!==i.action)return"failed"===i.action?(oe.error("[".concat(this.clientId,"] ignore error: "),i.desc),void Ln("error",this,"ignore error: ".concat(i.desc))):"quit"===i.action?("ERR_REPEAT_JOIN_CHANNEL"===i.desc&&this.close(Ls.UID_BANNED),void this.close()):void this.reconnect(i.action,fs.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Bt("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(oe.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),Ln("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Bt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",fs.TIMEOUT):this.request(di.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const o=Date.now()-i;this.rttRolling.add(o),Bt("REPORT_STATS")&&this.send(di.PING_BACK,{pingpongElapse:o})}).catch(o=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:i}=this.websocket.getWsInflateData();0!==n&&0!==i&&this.upload(iu.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(Mr.RECONNECT_WAITTING_FINISH,n=>{this.emit($r.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(Mr.RECONNECT_CREATE_CONNECTION,n=>{this.emit($r.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Mr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Mr.CLOSED,()=>{this.connectionState=Bs.CLOSED}),this.websocket.on(Mr.FAILED,()=>{this._disconnectedReason=Ls.NETWORK_ERROR,this.connectionState=Bs.CLOSED}),this.websocket.on(Mr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState=this.connectionState===Bs.CONNECTED?Bs.RECONNECTING:Bs.CONNECTING}),this.websocket.on(Mr.WILL_RECONNECT,(n,i)=>{if(KS(this,$r.IS_P2P_DISCONNECTED)&&"retry"===n)return oe.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),Ln("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit($r.NEED_RENEW_SESSION),this.emit($r.DISCONNECT_P2P),i("tryNext");"retry"!==n&&(oe.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),Ln("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit($r.NEED_RENEW_SESSION),this.emit($r.DISCONNECT_P2P)),i(n)}),this.websocket.on(Mr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{oe.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),Yt("warning",this,"rejoin",void 0,n.toString()),this.reconnect("tryNext",fs.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit($r.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof Pe&&n.code===Ie.UNEXPECTED_RESPONSE&&n.data.code===yr.ERR_NO_AUTHORIZED)return oe.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),Ln("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",fs.SERVER_ERROR);oe.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),Yt("error",this,"join",void 0,n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",fs.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(Mr.REQUEST_NEW_URLS,(n,i)=>{jd(this,$r.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)})}})||R4;var D4;function k4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Ug(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?k4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):k4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}const N4=new Map;let kz=sc("AgoraRTCGateway","store.clientId")(D4=class extends rs{get state(){return this._state}set state(n){if(n===this._state)return;const i=this._state;this._state=n,"DISCONNECTED"===n&&this._disconnectedReason?this.emit(ms.CONNECTION_STATE_CHANGE,n,i,this._disconnectedReason):this.emit(ms.CONNECTION_STATE_CHANGE,n,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){oe.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),Yt("debug",this,"joinGatewayStartTime",n,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,i){super(),q(this,"store",void 0),q(this,"joinInfo",void 0),q(this,"key",void 0),q(this,"signal",void 0),q(this,"role",void 0),q(this,"inChannelInfo",{joinAt:null,duration:0}),q(this,"spec",void 0),q(this,"_state","DISCONNECTED"),q(this,"_statsCollector",void 0),q(this,"_disconnectedReason",void 0),q(this,"isSignalRecover",!1),q(this,"hasChangeBGPAddress",!1),q(this,"trafficStatsInterval",void 0),q(this,"networkQualityInterval",void 0),q(this,"_joinGatewayStartTime",0),q(this,"_signalTimeout",!1),q(this,"_clientRoleOptions",void 0),q(this,"_isProactiveJoin",!1),this.store=n,this.spec=i,this.signal=new O4(Ug(Ug({},i),{},{retryConfig:i.websocketRetryConfig}),n),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}join(n,i,o){var c=this;return L(function*(){c.store.joinGatewayStart(),"disabled"!==n.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const h=Date.now();let g=N4.get(n.cname);if(g||(g=new Map,N4.set(n.cname,g)),c._isProactiveJoin=!0,g.has(n.uid)){const y=new Pe(Ie.UID_CONFLICT);throw Kt.joinGateway(n.sid,{lts:h,succ:!1,ec:y.message,addr:null,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!n.proxyServer}),c._isProactiveJoin=!1,y}g.set(n.uid,!0),c.joinInfo=n,c.key=i;const p=n.proxyServer,v=n.gatewayAddrs.map(p?y=>{const b=y.address.split(":");return"wss://".concat(p,"/ws/?h=").concat(b[0],"&p=").concat(b[1])}:y=>"wss://".concat(y.address));let _=0;c.joinGatewayStartTime=h;try{_=(yield c.signal.init(v,o)).uid}catch(y){throw y&&y.code===Ie.INIT_WEBSOCKET_TIMEOUT?(oe.warning("[".concat(c.store.clientId,"] User join failed"),y.toString()),y):(oe.error("[".concat(c.store.clientId,"] User join failed"),y.toString()),Yt("error",c,"join",void 0,y.toString()),Kt.joinGateway(n.sid,{lts:h,succ:!1,ec:y.message,addr:c.signal.url,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!p}),c._isProactiveJoin=!1,g.delete(n.uid),c.signal.close(),y)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),oe.debug("[".concat(c.store.clientId,"] Connected to gateway server")),Yt("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(y=>{oe.warning("[".concat(c.store.clientId,"] get traffic stats error"),y.toString()),Yt("warning",c,"trafficStatsInterval",void 0,y.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(ms.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(ms.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:$x(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:$x(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),_})()}leave(){var n=arguments,i=this;return L(function*(){let o=n.length>0&&void 0!==n[0]&&n[0],c=n.length>1?n[1]:void 0;if("DISCONNECTED"!==i.state){c!==Ls.FALLBACK&&(i.state="DISCONNECTING");try{o||i.signal.connectionState!==Bs.CONNECTED||(yield(h=i.signal.request(di.LEAVE,void 0,!0),3e3,jn.race([h,ZK(3e3)])))}catch(h){oe.warning("[".concat(i.store.clientId,"] leave request failed, ignore"),h),Ln("warning",i,"leave request failed, ignore, ".concat(h.toString()))}i.signal.close(c),c!==Ls.FALLBACK&&(i.state="DISCONNECTED"),i.reset()}var h})()}publish(n,i,o){var c=this;return L(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Pe(Ie.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const h={state:"offer",p2p_id:c.store.p2pId,ortc:i,mode:c.spec.mode,extend:Bt("PUB_EXTEND")};try{return(yield c.signal.request(di.PUBLISH,h,!0))._message}catch(g){if(o&&g.data&&g.data.code===yr.ERR_PUBLISH_REQUEST_INVALID)return oe.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),Ln("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(n,i),c.publish(n,i,!1);throw g}})()}unpublish(n,i){var o=this;return L(function*(){try{if("CONNECTED"!==o.state&&"RECONNECTING"!==o.state)throw new Pe(Ie.INVALID_OPERATION,"can not publish when connection state is ".concat(o.state));yield o.signal.request(di.UNPUBLISH,{stream_id:i,ortc:n},!0)}catch(c){oe.warning("unpublish warning: ",c),Yt("warning",o,"unpublish",void 0,c.toString())}})()}subscribe(n,i,o){var c=this;return L(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new Pe(Ie.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const h={stream_id:n,stream_type:i.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!Bt("SUBSCRIBE_TCC"),extend:Bt("SUB_EXTEND"),ssrcId:i.ssrcId};try{return(yield c.signal.request(di.SUBSCRIBE,h,!0))._message}catch(g){if(o&&g.data&&g.data.code===yr.ERR_SUBSCRIBE_REQUEST_INVALID)return oe.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),Ln("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(n,i),yield c.subscribe(n,i,!1);throw g}})()}subscribeAll(n,i){var o=this;return L(function*(){if("CONNECTED"!==o.state&&"RECONNECTING"!==o.state)throw new Pe(Ie.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(o.state));const c={p2p_id:o.store.p2pId,users:n,dtx:!1};try{return yield o.signal.request(di.SUBSCRIBE_STREAMS,c,!0)}catch(h){if(i&&h.data&&h.data.code===yr.ERR_SUBSCRIBE_REQUEST_INVALID)return oe.warning("[".concat(o.store.clientId,"] receiver massSubscribe error code, retry"),h.toString()),Ln("warning",o,"receiver massSubscribe error code, retry"),yield o.tryMassUnsubBeforeResub(n),yield o.subscribeAll(n,!1);throw h}})()}setVideoProfile(n){var i=this;return L(function*(){const o=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let h=c.frameRate,g=c.width,p=c.height,v=!0;return"number"!=typeof h&&(h=h.exact||h.ideal||h.max||h.min||0,h||(v=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(v=!1)),"number"!=typeof p&&(p=p.exact||p.ideal||p.max||p.min||0,h||(v=!1)),v?{stream_type:0,width:g,height:p,fps:h,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(n);return o?i.signal.request(di.SET_VIDEO_PROFILE,o):(oe.debug("[".concat(i.store.clientId,"] encoder config is not complete, do not report to gateway")),void Ln("debug",i,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(n,i){var o=this;return L(function*(){try{yield o.signal.request(di.UNSUBSCRIBE,{p2p_id:o.store.p2pId,ortc:n,stream_id:i},!0)}catch(c){oe.warning("unsubscribe warning: ",c),Yt("warning",o,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(n){var i=this;return L(function*(){try{yield i.signal.request(di.UNSUBSCRIBE_STREAMS,n,!0)}catch(o){oe.warning("unsubscribeAll warning: ",o),Yt("warning",i,"unsubscribeAll",void 0,o.toString())}})()}reconnectPC(n){var i=this;return L(function*(){const{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}=n,g=yield i.signal.request(di.CONNECT_PC,{p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}},!0),p=i.getGatewayIpPort();return{gatewayEstablishParams:g,gatewayIP:p?.ip,gatewayPort:p?.port}})()}getGatewayInfo(){return this.signal.request(di.GATEWAY_INFO)}renewToken(n){return this.signal.request(di.RENEW_TOKEN,n)}setClientRole(n,i){var o=this;return L(function*(){if(i&&(o._clientRoleOptions=Object.assign({},i)),"CONNECTED"!==o.state)return void(o.role=n);let c;c="audience"===n?o._clientRoleOptions&&o._clientRoleOptions.level?o._clientRoleOptions.level:2:0,yield o.signal.request(di.SET_CLIENT_ROLE,{role:n,level:c,client_ts:Date.now()}),o.role=n})()}setRemoteVideoStreamType(n,i){var o=this;return L(function*(){yield o.signal.request(di.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:i})})()}setDefaultRemoteVideoStreamType(n){var i=this;return L(function*(){yield i.signal.request(di.DEFAULT_VIDEO_STREAM,{stream_type:n})})()}setStreamFallbackOption(n,i){var o=this;return L(function*(){yield o.signal.request(di.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:i})})()}pickSVCLayer(n,i){var o=this;return L(function*(){yield o.signal.request(di.PICK_SVC_LAYER,{stream_id:n,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Ug({},this.inChannelInfo)}getGatewayVersion(){var n=this;return L(function*(){return(yield n.signal.request(di.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=N4.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(i){const o=i.match(/(wss\:\/\/)?([^:]+):(\d+)/);return o?{username:Js.username,password:Js.password,turnServerURL:o[2],tcpport:parseInt(o[3])+30,udpport:parseInt(o[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Ug(Ug({},Js),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var n=this;return L(function*(){if("CONNECTED"!==n.state)return;const i=yield n.signal.request(di.TRAFFIC_STATS,void 0,!0);i.timestamp=Date.now(),i.peer_delay.forEach(o=>{const c=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find(h=>h.peer_uid===o.peer_uid);c&&c.B_st!==o.B_st&&Nh(()=>{n.emit(ms.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),n._statsCollector.updateTrafficStats(i)})()}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new Pe(Ie.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let o=Bt("REPORT_APP_SCENARIO");if("string"!=typeof o)try{o=JSON.stringify(o)}catch{o=void 0}o&&o.length>128&&(o=void 0);const c=Ug({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:al,browser:navigator.userAgent,process_id:Bt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:Bt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:o,attributes:{userAttributes:{enablePublishedUserList:Bt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Bt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,Bt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new Pe(Ie.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var n=this;this.signal.on($r.WS_RECONNECT_WAITTING_FINISH,i=>{["tryNext","recover"].includes(i)&&this.joinInfo&&Kt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on($r.WS_RECONNECT_CREATE_CONNECTION,i=>{this.joinGatewayStartTime=Date.now()}),this.signal.on($r.WS_RECONNECTING,i=>{this.joinInfo&&Kt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i||fs.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Kt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on($r.WS_CLOSED,i=>{let o;switch(i){case Ls.LEAVE:o=fs.LEAVE;break;case Ls.UID_BANNED:case Ls.IP_BANNED:case Ls.CHANNEL_BANNED:case Ls.SERVER_ERROR:o=fs.SERVER_ERROR;break;case Ls.FALLBACK:o=fs.FALLBACK;break;default:o=fs.NETWORK_ERROR}oe.debug("[signal] websocket closed, reason: ".concat(o||"undefined -> "+fs.NETWORK_ERROR)),Ao("debug",this,"ws_closed","reason: ".concat(i)),this.joinInfo&&Kt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:i===Ls.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=i,i!==Ls.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on($r.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(oe.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),Ln("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Kt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const i=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!i)return oe.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(i)),void Ln("error",this,"set local access point after joined failed: ".concat(i));ac("EVENT_REPORT_DOMAIN",i[1]),ac("EVENT_REPORT_BACKUP_DOMAIN",i[1]),ac("LOG_UPLOAD_SERVER","".concat(i[1],":6444"))}}),this.signal.on(Bi.ON_UPLINK_STATS,i=>{this._statsCollector.updateUplinkStats(i)}),this.signal.on($r.REQUEST_RECOVER,(i,o,c)=>{if(!this.joinInfo)return c(new Pe(Ie.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));i&&(this.joinInfo.multiIP=i,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,jd(this,ms.REQUEST_NEW_GATEWAY_LIST).then(o).catch(c)}),this.signal.on($r.REQUEST_JOIN_INFO,function(){var i=L(function*(o){var c;n.updateTurnConfigFromSignal();const{iceParameters:h,dtlsParameters:g,rtpCapabilities:p}=yield jd(n,ms.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=n.joinInfo)||void 0===c?void 0:c.turnServer});o(n.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:g,rtpCapabilities:p,version:"2"}}))});return function(o){return i.apply(this,arguments)}}()),this.signal.on($r.REQUEST_REJOIN_INFO,i=>{i(this.getRejoinMessage())}),this.signal.on($r.REPORT_JOIN_GATEWAY,(i,o)=>{this.joinInfo&&(Kt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:i,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on($r.IS_P2P_DISCONNECTED,i=>{i(KS(this,ms.IS_P2P_DISCONNECTED))}),this.signal.on($r.DISCONNECT_P2P,()=>{this.emit(ms.DISCONNECT_P2P)}),this.signal.on($r.NEED_RENEW_SESSION,()=>{this.emit(ms.NEED_RENEW_SESSION)}),this.signal.on($r.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on($r.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on($r.JOIN_RESPONSE,i=>{const o=this.getGatewayIpPort();o?this.emit(ms.JOIN_RESPONSE,i,o.ip,o.port):this.emit(ms.JOIN_RESPONSE,i)})}tryUnsubBeforeResub(n,i){var o=this;return L(function*(){try{yield o.signal.request(di.UNSUBSCRIBE,{p2p_id:o.store.p2pId,stream_id:n,ortc:[i]},!0)}catch(c){throw oe.warning("unsubscribe warning",c),Yt("warning",o,"tryUnsubBeforeResub",n,c.toString()),c}})()}tryUnpubBeforeRepub(n,i){var o=this;return L(function*(){try{yield o.signal.request(di.UNPUBLISH,{stream_id:n,ortc:i},!0)}catch(c){throw oe.warning("unpublish warning: ",c),Yt("warning",o,"tryUnpubBeforeRepub",n,c.toString()),c}})()}tryMassUnsubBeforeResub(n){var i=this;return L(function*(){const o={users:n.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield i.signal.request(di.UNSUBSCRIBE_STREAMS,o,!0)}catch(c){throw oe.warning("massUnsubscribe warning",c),Yt("warning",i,"tryUnsubAllBeforeResub",n.map(h=>h.stream_id),c.toString()),c}})()}muteLocal(n,i){var o=this;return L(function*(){const c={action:n.find(h=>h.stream_type===os.Audio)?"mute_local_audio":"mute_local_video",p2p_id:o.store.p2pId,ortc:n,stream_id:i};try{yield o.signal.request(di.CONTROL,c,!0,!0)}catch(h){throw oe.warning("gateway unmuteLocal warning: ",h),Yt("warning",o,"muteLocal",i,h.toString()),h}})()}unmuteLocal(n,i){var o=this;return L(function*(){const c={action:n.find(h=>h.stream_type===os.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:o.store.p2pId,ortc:n,stream_id:i};try{yield o.signal.request(di.CONTROL,c,!0,!0)}catch(h){throw oe.warning("gateway muteLocal warning: ",h),Yt("warning",o,"unmuteLocal",i,h.toString()),h}})()}uploadStats(n,i){this.signal.upload(n,i)}getSignalRTT(){return this.signal.rtt}restartICE(n){var i=this;return L(function*(){const o={p2p_id:i.store.p2pId,stream_id:i.store.uid,ortc:n};try{const c=yield i.signal.request(di.RESTART_ICE,o,!0),h=i.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:h?.ip,gatewayPort:h?.port}}catch(c){throw oe.warning("P2PChannel.restartICE warning: ",c),Yt("warning",i,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,fs.P2P_FAILED)}getGatewayIpPort(){var n;if(!Bt("GATEWAY_WSS_ADDRESS")&&null!==(n=this.joinInfo)&&void 0!==n&&n.gatewayAddrs){const i=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(i.ip||i.ip6)&&i.port?i.ip6?{ip:i.ip6,port:i.port}:{ip:i.ip,port:i.port}:void 0}}})||D4;function TQ(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function wQ(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?TQ(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):TQ(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}!function(){var n;function i(Je){var at=0;return function(){return at<Je.length?{done:!1,value:Je[at++]}:{done:!0}}}var c,o="function"==typeof Object.defineProperties?Object.defineProperty:function(Je,at,Rt){return Je==Array.prototype||Je==Object.prototype||(Je[at]=Rt.value),Je},h=function(Je){Je=["object"==typeof globalThis&&globalThis,Je,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof W&&W];for(var at=0;at<Je.length;++at){var Rt=Je[at];if(Rt&&Rt.Math==Math)return Rt}throw Error("Cannot find global object")}(this);function g(Je,at){if(at)e:{var Rt=h;Je=Je.split(".");for(var un=0;un<Je.length-1;un++){var wn=Je[un];if(!(wn in Rt))break e;Rt=Rt[wn]}(at=at(un=Rt[Je=Je[Je.length-1]]))!=un&&null!=at&&o(Rt,Je,{configurable:!0,writable:!0,value:at})}}function p(Je){return(Je={next:Je})[Symbol.iterator]=function(){return this},Je}function v(Je){var at=typeof Symbol<"u"&&Symbol.iterator&&Je[Symbol.iterator];return at?at.call(Je):{next:i(Je)}}if(g("Symbol",function(Je){function at(wn,Vt){this.A=wn,o(this,"description",{configurable:!0,writable:!0,value:Vt})}if(Je)return Je;at.prototype.toString=function(){return this.A};var Rt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",un=0;return function wn(Vt){if(this instanceof wn)throw new TypeError("Symbol is not a constructor");return new at(Rt+(Vt||"")+"_"+un++,Vt)}}),g("Symbol.iterator",function(Je){if(Je)return Je;Je=Symbol("Symbol.iterator");for(var at="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Rt=0;Rt<at.length;Rt++){var un=h[at[Rt]];"function"==typeof un&&"function"!=typeof un.prototype[Je]&&o(un.prototype,Je,{configurable:!0,writable:!0,value:function(){return p(i(this))}})}return Je}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var _;e:{var y={};try{y.__proto__={a:!0},_=y.a;break e}catch{}_=!1}c=_?function(Je,at){if(Je.__proto__=at,Je.__proto__!==at)throw new TypeError(Je+" is not extensible");return Je}:null}var b=c;function C(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function R(Je){if(Je.m)throw new TypeError("Generator is already running");Je.m=!0}function N(Je,at){return Je.h=3,{value:at}}function j(Je){this.g=new C,this.G=Je}function Q(Je,at,Rt,un){try{var wn=at.call(Je.g.j,Rt);if(!(wn instanceof Object))throw new TypeError("Iterator result "+wn+" is not an object");if(!wn.done)return Je.g.m=!1,wn;var Vt=wn.value}catch(V){return Je.g.j=null,Je.g.s(V),$(Je)}return Je.g.j=null,un.call(Je.g,Vt),$(Je)}function $(Je){for(;Je.g.h;)try{var at=Je.G(Je.g);if(at)return Je.g.m=!1,{value:at.value,done:!1}}catch(Rt){Je.g.v=void 0,Je.g.s(Rt)}if(Je.g.m=!1,Je.g.l){if(at=Je.g.l,Je.g.l=null,at.F)throw at.D;return{value:at.return,done:!0}}return{value:void 0,done:!0}}function ae(Je){this.next=function(at){return Je.o(at)},this.throw=function(at){return Je.s(at)},this.return=function(at){return function(Rt,un){R(Rt.g);var wn=Rt.g.j;return wn?Q(Rt,"return"in wn?wn.return:function(Vt){return{value:Vt,done:!0}},un,Rt.g.return):(Rt.g.return(un),$(Rt))}(Je,at)},this[Symbol.iterator]=function(){return this}}function fe(Je,at){return at=new ae(new j(at)),b&&Je.prototype&&b(at,Je.prototype),at}if(C.prototype.o=function(Je){this.v=Je},C.prototype.s=function(Je){this.l={D:Je,F:!0},this.h=this.C||this.u},C.prototype.return=function(Je){this.l={return:Je},this.h=this.u},j.prototype.o=function(Je){return R(this.g),this.g.j?Q(this,this.g.j.next,Je,this.g.o):(this.g.o(Je),$(this))},j.prototype.s=function(Je){return R(this.g),this.g.j?Q(this,this.g.j.throw,Je,this.g.o):(this.g.s(Je),$(this))},g("Array.prototype.entries",function(Je){return Je||function(){return function(at,Rt){at instanceof String&&(at+="");var un=0,wn=!1,Vt={next:function(){if(!wn&&un<at.length){var V=un++;return{value:Rt(V,at[V]),done:!1}}return wn=!0,{done:!0,value:void 0}}};return Vt[Symbol.iterator]=function(){return Vt},Vt}(this,function(at,Rt){return[at,Rt]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Ae=function(Je,at){for(var Rt=0;Rt<Je.length;Rt++)at(Je[Rt])},Re=function(Je){return Je.replace(/\r?\n|\r/g,"\r\n")},tt=function(Je,at,Rt){return at instanceof Blob?(Rt=void 0!==Rt?String(Rt+""):"string"==typeof at.name?at.name:"blob",at.name===Rt&&"[object Blob]"!==Object.prototype.toString.call(at)||(at=new File([at],Rt)),[String(Je),at]):[String(Je),String(at)]},Tt=function(Je,at){if(Je.length<at)throw new TypeError(at+" argument required, but only "+Je.length+" present.")},Mt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Ct=Mt.FormData,Sn=Mt.XMLHttpRequest&&Mt.XMLHttpRequest.prototype.send,on=Mt.Request&&Mt.fetch,cn=Mt.navigator&&Mt.navigator.sendBeacon,vt=Mt.Element&&Mt.Element.prototype,Ge=Mt.Symbol&&Symbol.toStringTag;Ge&&(Blob.prototype[Ge]||(Blob.prototype[Ge]="Blob"),"File"in Mt&&!File.prototype[Ge]&&(File.prototype[Ge]="File"));try{new File([],"")}catch{Mt.File=function(at,Rt,un){return at=new Blob(at,un||{}),Object.defineProperties(at,{name:{value:Rt},lastModified:{value:+(un&&void 0!==un.lastModified?new Date(un.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Ge&&Object.defineProperty(at,Ge,{value:"File"}),at}}var ot=function(Je){return Je.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},_t=function(Je){this.i=[];var at=this;Je&&Ae(Je.elements,function(Rt){if(Rt.name&&!Rt.disabled&&"submit"!==Rt.type&&"button"!==Rt.type&&!Rt.matches("form fieldset[disabled] *"))if("file"===Rt.type){var un=Rt.files&&Rt.files.length?Rt.files:[new File([],"",{type:"application/octet-stream"})];Ae(un,function(wn){at.append(Rt.name,wn)})}else"select-multiple"===Rt.type||"select-one"===Rt.type?Ae(Rt.options,function(wn){!wn.disabled&&wn.selected&&at.append(Rt.name,wn.value)}):"checkbox"===Rt.type||"radio"===Rt.type?Rt.checked&&at.append(Rt.name,Rt.value):(un="textarea"===Rt.type?Re(Rt.value):Rt.value,at.append(Rt.name,un))})};if((n=_t.prototype).append=function(Je,at,Rt){Tt(arguments,2),this.i.push(tt(Je,at,Rt))},n.delete=function(Je){Tt(arguments,1);var at=[];Je=String(Je),Ae(this.i,function(Rt){Rt[0]!==Je&&at.push(Rt)}),this.i=at},n.entries=function Je(){var at,Rt=this;return fe(Je,function(un){if(1==un.h&&(at=0),3!=un.h)return at<Rt.i.length?un=N(un,Rt.i[at]):(un.h=0,un=void 0),un;at++,un.h=2})},n.forEach=function(Je,at){Tt(arguments,1);for(var Rt=v(this),un=Rt.next();!un.done;un=Rt.next()){var wn=v(un.value);un=wn.next().value,wn=wn.next().value,Je.call(at,wn,un,this)}},n.get=function(Je){Tt(arguments,1);var at=this.i;Je=String(Je);for(var Rt=0;Rt<at.length;Rt++)if(at[Rt][0]===Je)return at[Rt][1];return null},n.getAll=function(Je){Tt(arguments,1);var at=[];return Je=String(Je),Ae(this.i,function(Rt){Rt[0]===Je&&at.push(Rt[1])}),at},n.has=function(Je){Tt(arguments,1),Je=String(Je);for(var at=0;at<this.i.length;at++)if(this.i[at][0]===Je)return!0;return!1},n.keys=function Je(){var at,Rt,Vt=this;return fe(Je,function(V){if(1==V.h&&(at=v(Vt),Rt=at.next()),3!=V.h)return Rt.done?void(V.h=0):N(V,v(Rt.value).next().value);Rt=at.next(),V.h=2})},n.set=function(Je,at,Rt){Tt(arguments,2),Je=String(Je);var un=[],wn=tt(Je,at,Rt),Vt=!0;Ae(this.i,function(V){V[0]===Je?Vt&&(Vt=!un.push(wn)):un.push(V)}),Vt&&un.push(wn),this.i=un},n.values=function Je(){var at,Rt,wn,Vt=this;return fe(Je,function(V){if(1==V.h&&(at=v(Vt),Rt=at.next()),3!=V.h)return Rt.done?void(V.h=0):((wn=v(Rt.value)).next(),N(V,wn.next().value));Rt=at.next(),V.h=2})},_t.prototype._asNative=function(){for(var Je=new Ct,at=v(this),Rt=at.next();!Rt.done;Rt=at.next()){var un=v(Rt.value);Rt=un.next().value,un=un.next().value,Je.append(Rt,un)}return Je},_t.prototype._blob=function(){var Je="----formdata-polyfill-"+Math.random(),at=[],Rt="--"+Je+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(un,wn){return"string"==typeof un?at.push(Rt+ot(Re(wn))+'"\r\n\r\n'+Re(un)+"\r\n"):at.push(Rt+ot(Re(wn))+'"; filename="'+ot(un.name)+'"\r\nContent-Type: '+(un.type||"application/octet-stream")+"\r\n\r\n",un,"\r\n")}),at.push("--"+Je+"--"),new Blob(at,{type:"multipart/form-data; boundary="+Je})},_t.prototype[Symbol.iterator]=function(){return this.entries()},_t.prototype.toString=function(){return"[object FormData]"},vt&&!vt.matches&&(vt.matches=vt.matchesSelector||vt.mozMatchesSelector||vt.msMatchesSelector||vt.oMatchesSelector||vt.webkitMatchesSelector||function(Je){for(var at=(Je=(this.document||this.ownerDocument).querySelectorAll(Je)).length;0<=--at&&Je.item(at)!==this;);return-1<at}),Ge&&(_t.prototype[Ge]="FormData"),Sn){var yn=Mt.XMLHttpRequest.prototype.setRequestHeader;Mt.XMLHttpRequest.prototype.setRequestHeader=function(Je,at){yn.call(this,Je,at),"content-type"===Je.toLowerCase()&&(this.B=!0)},Mt.XMLHttpRequest.prototype.send=function(Je){Je instanceof _t?(Je=Je._blob(),this.B||this.setRequestHeader("Content-Type",Je.type),Sn.call(this,Je)):Sn.call(this,Je)}}on&&(Mt.fetch=function(Je,at){return at&&at.body&&at.body instanceof _t&&(at.body=at.body._blob()),on.call(this,Je,at)}),cn&&(Mt.navigator.sendBeacon=function(Je,at){return at instanceof _t&&(at=at._asNative()),cn.call(this,Je,at)}),Mt.FormData=_t}}();let P4=1;function RQ(n,i,o,c,h){P4+=1;const g={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:P4,requestId:P4,version:al,cname:o.cname},p={service_name:i,json_body:JSON.stringify(g)};let v,_,y=n[0];return jl(L(function*(){v=Date.now();const b=yield Vd(y,{data:p,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(_=Date.now()-v,0!==b.code){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"live streaming ap error, code"+b.code,{retry:!0,responseTime:_});throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,N.toString()),N}const C=JSON.parse(b.json_body);if(200!==C.code){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(C.code,", reason: ").concat(C.reason),{code:C.code,responseTime:_});throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,N.toString()),N}if(!C.servers||0===C.servers.length){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:C.code,responseTime:_});throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,N.toString()),N}const R=(j=i,{addressList:(N=C).servers.map(Q=>"wss://".concat(Q.address.replace(/\./g,"-"),".").concat(Bt("WORKER_DOMAIN"),":").concat(Q.wss,"?serviceName=").concat(encodeURIComponent(j))),workerToken:N.workerToken,vid:N.vid});var N,j;return Bt("LIVE_STREAMING_ADDRESS")&&(R.addressList=Bt("LIVE_STREAMING_ADDRESS")instanceof Array?Bt("LIVE_STREAMING_ADDRESS"):[Bt("LIVE_STREAMING_ADDRESS")]),wQ(wQ({},R),{},{responseTime:_})}),(b,C)=>(Kt.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:i,responseDetail:JSON.stringify(b.addressList),firstSuccess:0===C,responseTime:_,serverIp:n[C%n.length]}),!1),(b,C)=>(Kt.apworkerEvent(o.sid,{success:!1,sc:b.data&&b.data.code||200,serviceName:i,responseTime:_,serverIp:n[C%n.length]}),!!(b.code!==Ie.OPERATION_ABORTED&&b.code!==Ie.UNEXPECTED_RESPONSE||b.data&&b.data.retry)&&(y=n[(C+1)%n.length],!0)),h)}let M4=1;function OQ(n,i,o,c){let{url:h,areaCode:g}=n;Yt("debug",["AjaxAPI",i.clientId],"requestChooseServer",{url:h,areaCode:g});const p=Date.now(),[v,_]=L4(i,g,[Us.CHOOSE_SERVER]);let y=Vs.networkState;return jl(L(function*(){y&&Vs.networkState===Ou.OFFLINE&&Vs.onlineWaiter&&(yield jn.race([Vs.onlineWaiter,lc(c&&c.maxRetryTimeout||Jo.maxRetryTimeout)])),y=Vs.networkState;const b=yield Vd(h,{data:v,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0);Kt.reportResourceTiming(h,i.sid),x4(b,h,i,p,[Us.CHOOSE_SERVER]);const C=Zx(b,Us.CHOOSE_SERVER);return B1(C),w9(C,h)}),b=>(b&&Kt.joinChooseServer(i.sid,{lts:p,succ:!0,csAddr:h,opid:_,serverList:b.gatewayAddrs.map(C=>C.address),ec:null,cid:b.cid.toString(),uid:b.uid.toString(),csIp:b.csIp,unilbsServerIds:[Us.CHOOSE_SERVER].toString()}),!1),b=>b.code!==Ie.OPERATION_ABORTED&&(b.code===Ie.CAN_NOT_GET_GATEWAY_SERVER?b.data.retry:(Kt.joinChooseServer(i.sid,{lts:p,succ:!1,csAddr:h,serverList:null,opid:_,ec:b.code,csIp:b.data&&b.data.csIp,unilbsServerIds:[Us.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:y})}),oe.warning("[".concat(i.clientId,"] Choose server network error, retry"),b),Ln("warning",["AjaxAPI",i.clientId],"Choose server network error, retry, ".concat(b)),!0)),c)}function DQ(n,i,o,c){let{url:h,areaCode:g,serviceIds:p}=n;Yt("debug",["AjaxAPI",i.clientId],"requestMultiUnilbs",{url:h,areaCode:g,serviceIds:p});const v=Date.now(),[_,y]=L4(i,g,p);let b;return jl(L(function*(){b&&Vs.networkState===Ou.OFFLINE&&Vs.onlineWaiter&&(yield jn.race([Vs.onlineWaiter,lc(c&&c.maxRetryTimeout||Jo.maxRetryTimeout)])),b=Vs.networkState;const C=yield Vd(h,{data:_,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0);Kt.reportResourceTiming(h,i.sid),x4(C,h,i,v,p);const R=Zx(C,Us.CHOOSE_SERVER),N=Zx(C,"proxy5"===i.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===i.cloudProxyServer||"proxy4"===i.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK);return B1(R),{gatewayInfo:w9(R,h),proxyInfo:N,url:h}}),C=>(C.gatewayInfo&&Kt.joinChooseServer(i.sid,{lts:v,succ:!0,csAddr:h,serverList:C.gatewayInfo.gatewayAddrs.map(R=>R.address),ec:null,opid:y,cid:C.gatewayInfo.cid.toString(),uid:C.gatewayInfo.uid.toString(),csIp:C.gatewayInfo.csIp,unilbsServerIds:p.toString()}),C.proxyInfo&&Kt.joinWebProxyAP(i.sid,{lts:v,sucess:1,apServerAddr:h,turnServerAddrList:C.proxyInfo.addresses.map(R=>R.ip).join(","),errorCode:null,eventType:i.cloudProxyServer,unilbsServerIds:p.toString()}),!1),C=>C.code!==Ie.OPERATION_ABORTED&&(C.code===Ie.CAN_NOT_GET_GATEWAY_SERVER?C.data.retry:(Kt.joinWebProxyAP(i.sid,{lts:v,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:C.code,eventType:i.cloudProxyServer,unilbsServerIds:p.toString(),extend:JSON.stringify({networkState:b})}),oe.warning("[".concat(i.clientId,"] multi unilbs network error, retry"),C),Ln("warning",["AjaxAPI",i.clientId],"multi unilbs network error, retry, ".concat(C)),!0)),c)}const x4=(n,i,o,c,h)=>{const g=[],p=v=>{4096===v.flag?Kt.joinChooseServer(o.sid,{lts:c,succ:!1,csAddr:i,opid:n.opid,serverList:null,ec:v.error.message,csIp:v.error.data&&v.error.data.csIp,unilbsServerIds:h.toString()}):1048576!==v.flag&&4194304!==v.flag&&4194310!==v.flag||Kt.joinWebProxyAP(o.sid,{lts:c,sucess:0,apServerAddr:i,turnServerAddrList:null,errorCode:v.error.code,eventType:o.cloudProxyServer,unilbsServerIds:h.toString()})};if(n.response_body.forEach(v=>{const _=v.buffer.code;if(23===v.uri&&0===_&&!v.buffer.edges_services)if(4194310===v.buffer.flag)oe.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),v.buffer.edges_services=[];else{const y={error:new Pe(Ie.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:v.buffer.flag};g.push(y),p(y)}if(0!==_){const y=x1(_),b={error:new Pe(Ie.CAN_NOT_GET_GATEWAY_SERVER,y.desc,{retry:y.retry,csIp:n.detail[502]}),flag:v.buffer.flag};4194310===v.buffer.flag?oe.warning(b.error.toString()):g.push(b),p(b)}}),g.length)throw oe.warning("[".concat(o.clientId,"] multi unilbs ").concat(i," failed, ").concat(g.map(v=>"flag: ".concat(v.flag,", message: ").concat(v.error.message,", retry: ").concat(v.error.data.retry)).join(" | "))),Yt("warning",["AjaxAPI",o.clientId],"checkMultiUnilbsResponseValid",{url:i},g.map(v=>({flag:v.flag,message:v.error.message,retry:v.error.data.retry}))),new Pe(Ie.CAN_NOT_GET_GATEWAY_SERVER,g.map(v=>"flag: ".concat(v.flag,", message: ").concat(v.error.message)).join(" | "),{retry:!!g.find(v=>v.error.data.retry),csIp:n.detail[502]})},B1=n=>{if(n.addresses&&0===n.addresses.length&&0===n.code)throw new Pe(Ie.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(Bt("GATEWAY_ADDRESS")&&Bt("GATEWAY_ADDRESS").length>0){oe.debug("assign gateway address to",Bt("GATEWAY_ADDRESS")),Ln("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(Bt("GATEWAY_ADDRESS"))));const i=Bt("GATEWAY_ADDRESS").map(o=>({ip:o.ip,port:o.port,ticket:n.addresses[0]&&n.addresses[0].ticket}));n.addresses=i}},kQ=(n,i)=>{if(n.response_body&&n.response_body.length){const o=n.response_body[0];if(0!==o.buffer.code){const c=x1(o.buffer.code);throw new Pe(Ie.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return o.buffer.ticket}throw oe.debug("update ticket request received ap response without response body:",i),Ln("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(i)),new Pe(Ie.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},L4=(n,i,o)=>{const c=Math.floor(1e12*Math.random()),h={appid:n.appId,client_ts:Date.now(),opid:c,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:i,12:Bt("USE_NEW_TOKEN")?"1":void 0},key:n.token,service_ids:o,uid:n.uid||0}}]};h.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(h)),[g,c]},NQ=(n,i)=>{const o=Math.floor(1e12*Math.random()),c={appid:n.appId,client_ts:Date.now(),opid:o,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:i,uid:n.uid||0,edges_services:n.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},h=new FormData;return h.append("request",JSON.stringify(c)),[h,o]};let xL=0;const F1=()=>{const n=Bt("AREAS");return 0===n.length&&n.push(_i.GLOBAL),Oa(n).call(n,(i,o,c)=>{const h=PQ(o);return h?0===c?h:"".concat(i,",").concat(h):i},"")},PQ=n=>n===_i.OVERSEA?"".concat(Fs.ASIA,",").concat(Fs.EUROPE,",").concat(Fs.AFRICA,",").concat(Fs.NORTH_AMERICA,",").concat(Fs.SOUTH_AMERICA,",").concat(Fs.OCEANIA):Fs[n],c2={GLOBAL:{ASIA:[_i.CHINA,_i.JAPAN,_i.INDIA,_i.KOREA,_i.HKMC],EUROPE:[],NORTH_AMERICA:[_i.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},LL=Object.keys(c2[_i.GLOBAL]),B4=[_i.CHINA,_i.NORTH_AMERICA,_i.EUROPE,_i.ASIA,_i.JAPAN,_i.INDIA,_i.OCEANIA,_i.SOUTH_AMERICA,_i.AFRICA,_i.KOREA,_i.HKMC,_i.US];function U1(n,i,o,c){return F4.apply(this,arguments)}function F4(){return F4=L(function*(n,i,o,c){return{gatewayInfo:yield(g=L(function*(p,v,_,y){let b=null;const C=[],R=function(){var j=L(function*(){const Q=Bt("WEBCS_DOMAIN").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(fe=>({url:p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat(fe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(fe,"/api/v2/transpond/webrtc?v=2"),areaCode:F1()})),$=y.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:Q.map(fe=>fe.url)}),ae=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:Q,asyncMapHandler:fe=>(oe.debug("[".concat(p.clientId,"] Connect to choose_server:"),fe.url),OQ(fe,p,v,_)),allFailedhandler:fe=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:fe},$),fe[0]},promisesCollector:C});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},$),ae});return function(){return j.apply(this,arguments)}}(),N=function(){var j=L(function*(){if(yield lc(1e3),null!==b)return b;const Q=Bt("WEBCS_DOMAIN_BACKUP_LIST").map(fe=>({url:p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat(fe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(fe,"/api/v2/transpond/webrtc?v=2"),areaCode:F1()})),$=y.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:Q.map(fe=>fe.url)}),ae=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:Q,asyncMapHandler:fe=>(oe.debug("[".concat(p.clientId,"] Connect to backup choose_server:"),fe.url),OQ(fe,p,v,_)),allFailedhandler:fe=>{throw y.recordJoinChannelService({endTs:Date.now(),status:"error",errors:fe},$),fe[0]},promisesCollector:C});return y.recordJoinChannelService({endTs:Date.now(),status:"success"},$),ae});return function(){return j.apply(this,arguments)}}();try{return b=yield WS([R(),N()]),C.length&&C.forEach(j=>j.cancel&&"function"==typeof j.cancel&&j.cancel()),b}catch(j){throw j[0]}}),function(p,v,_,y){return g.apply(this,arguments)})(n,i,o,c)};var g}),F4.apply(this,arguments)}function U4(n,i,o,c,h){return u2.apply(this,arguments)}function u2(){return u2=L(function*(n,i,o,c,h){const g=n.cloudProxyServer;if("disabled"===g){if(!c)return;if(n.useLocalAccessPoint)return yield U1(n,i,o,h);if(Bt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:v,proxyInfo:_}=yield V4(n,i,o,h);return n.turnServer&&"auto"!==n.turnServer.mode?(Ln("debug",["Server",n.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:v}):(n.turnServer={mode:"manual",servers:_.map(y=>({turnServerURL:y.address,tcpport:y.tcpport||Js.tcpport,udpport:y.udpport||Js.udpport,username:y.username||Js.username,password:y.password||Js.password,forceturn:Bt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:v})}return yield U1(n,i,o,h)}let p;if(["443only","normal"].includes(g)){let v;c?"normal"!==g?[v,p]=yield jn.all([d2(n,i,o),U1(n,i,o,h)]):(v=yield d2(n,i,o),n.proxyServer=v.addresses[0],Kt.setProxyServer(n.proxyServer),oe.setProxyServer(n.proxyServer),wy(n.proxyServer),p=yield U1(n,i,o,h)):(p=void 0,"normal"!==g?v=yield d2(n,i,o):(v=yield d2(n,i,o),n.proxyServer=v.addresses[0],Kt.setProxyServer(n.proxyServer),oe.setProxyServer(n.proxyServer),wy(n.proxyServer))),n.turnServer={mode:"manual",servers:v.addresses.map(_=>({turnServerURL:_,tcpport:v.serverResponse.tcpport?v.serverResponse.tcpport:Js.tcpport,udpport:v.serverResponse.udpport?v.serverResponse.udpport:Js.udpport,username:v.serverResponse.username||Js.username,password:v.serverResponse.password||Js.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:v,gatewayInfo:_}=yield V4(n,i,o,h);p={gatewayInfo:_},n.turnServer={mode:"manual",servers:v.map(y=>({turnServerURL:y.address,tcpport:"proxy3"===g?void 0:y.tcpport?y.tcpport:Js.tcpport,udpport:"proxy4"===g?void 0:y.udpport?y.udpport:Js.udpport,username:y.username||Js.username,password:y.password||Js.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))}}return oe.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(g)),Yt("debug",["Server",n.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:n.proxyServer,mode:n.cloudProxyServer}),p}),u2.apply(this,arguments)}function l2(n,i,o,c,h){return BL.apply(this,arguments)}function BL(){return BL=L(function*(n,i,o,c,h){let p=[];p=Bt("ACCOUNT_REGISTER").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(i.proxyServer?_=>"https://".concat(i.proxyServer,"/ap/?url=").concat(_+"/api/v1"):_=>"https://".concat(_,"/api/v1"));const v=h?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const _=yield(y=L(function*(b,C,R,N,j){const Q=Date.now(),$={sid:R.sid,opid:10,appid:R.appId,string_uid:C};let ae=b[0];const fe=yield jl(()=>Vd(ae+"".concat(-1===ae.indexOf("?")?"?":"&","action=stringuid"),{data:$,cancelToken:N,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Ae,Re)=>{if(0===Ae.code){if(Ae.uid<=0||Ae.uid>=Math.pow(2,32))throw oe.error("Invalid Uint Uid ".concat(C," => ").concat(Ae.uid),Ae),Yt("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(C," => ").concat(Ae.uid,", ").concat(Ae)),Kt.reqUserAccount($.sid,{lts:Q,success:!1,serverAddr:ae,stringUid:$.string_uid,uid:Ae.uid,errorCode:Ie.INVALID_UINT_UID_FROM_STRING_UID,extend:$}),new Pe(Ie.INVALID_UINT_UID_FROM_STRING_UID);return Kt.reqUserAccount($.sid,{lts:Q,success:!0,serverAddr:ae,stringUid:$.string_uid,uid:Ae.uid,errorCode:null,extend:$}),!1}const tt=x1(Ae.code);return tt.retry&&(ae=b[(Re+1)%b.length]),Kt.reqUserAccount($.sid,{lts:Q,success:!1,serverAddr:ae,stringUid:$.string_uid,uid:Ae.uid,errorCode:tt.desc,extend:$}),tt.retry},(Ae,Re)=>Ae.code!==Ie.OPERATION_ABORTED&&(Kt.reqUserAccount($.sid,{lts:Q,success:!1,serverAddr:ae,stringUid:$.string_uid,uid:null,errorCode:Ae.code,extend:$}),ae=b[(Re+1)%b.length],!0),j);if(0!==fe.code){const Ae=x1(fe.code);throw new Pe(Ie.UNEXPECTED_RESPONSE,Ae.desc)}return fe}),function(b,C,R,N,j){return y.apply(this,arguments)})(p,n,i,o,c);return h?.recordJoinChannelService({status:"success",endTs:Date.now()},v),_.uid}catch(_){throw h?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[_]},v),_}var y}),BL.apply(this,arguments)}function d2(n,i,o){return FL.apply(this,arguments)}function FL(){return FL=L(function*(n,i,o){let c=Date.now();const h=n.cloudProxyServer,g=Bt("normal"===h?"PROXY_CS":"WEBCS_DOMAIN").map(b=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(b+"/api/v1"):"https://".concat(b,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(h)){const b=g.map(N=>({url:N,areaCode:F1()}));let C=null;C=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:b,asyncMapHandler:N=>function(j,Q,$,ae){let{url:fe,areaCode:Ae}=j;const Re=Date.now(),tt={opid:133,flag:"proxy5"===Q.cloudProxyServer?4194304:1048576,ts:+new Date,key:Q.token,cname:Q.cname,sid:Q.sid,detail:{6:Q.stringUid,11:Ae},uid:Q.uid||0};return jl(L(function*(){return yield Vd(fe,{data:tt,cancelToken:$,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),Tt=>{if(0===Tt.code)return Kt.joinWebProxyAP(Q.sid,{lts:Re,sucess:1,apServerAddr:fe,turnServerAddrList:Tt.addresses.map(Ct=>Ct.ip).join(","),errorCode:null,eventType:Q.cloudProxyServer}),!1;const Mt=x1(Tt.code);throw new Pe(Ie.CAN_NOT_GET_GATEWAY_SERVER,Mt.desc,{retry:Mt.retry})},Tt=>Tt.code!==Ie.OPERATION_ABORTED&&(Tt.code===Ie.CAN_NOT_GET_GATEWAY_SERVER?(Kt.joinWebProxyAP(tt.sid,{lts:Re,sucess:0,apServerAddr:fe,turnServerAddrList:null,errorCode:Tt.code,eventType:Q.cloudProxyServer}),oe.warning("[".concat(Q.clientId,"] proxy ap server ").concat(fe," failed, message: ").concat(Tt.message,", retry: ").concat(Tt.data.retry)),Ln("warning",["AjaxAPI",Q.clientId],"proxy ap server ".concat(fe," failed, message: ").concat(Tt.message,", retry: ").concat(Tt.data.retry)),Tt.data.retry):(Kt.joinWebProxyAP(tt.sid,{lts:Re,sucess:0,apServerAddr:fe,turnServerAddrList:null,errorCode:Tt.code,eventType:Q.cloudProxyServer}),!0)),ae)}(N,n,i,o),allFailedhandler:()=>{throw oe.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new Pe(Ie.CAN_NOT_GET_PROXY_SERVER)}});const R=C.addresses;if(!R||0===R.length)throw oe.error("[".concat(n.clientId,"] can not get proxy server, empty proxy server list")),new Pe(Ie.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:R.map(N=>N.ip).map(Bk),serverResponse:{tcpport:R[0].port||443,udpport:R[0].port||Js.udpport,username:Js.username,password:Js.password}}}let p=null;p=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:b=>function(C,R,N,j){const Q=Date.now(),$={command:"convergeAllocateEdge",sid:R.sid,appId:R.appId,token:R.token,uid:R.uid,cname:R.cname,ts:Math.floor(Date.now()/1e3),version:al,seq:0,requestId:1};return jl(L(function*(){return{res:yield Vd(C,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify($)},cancelToken:N,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:C}}),ae=>{if(!ae.res.json_body)throw oe.debug("[".concat(R.clientId,"] Get proxy server failed: no json_body")),Yt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new Pe(Ie.UNEXPECTED_RESPONSE,JSON.stringify(ae.res));const fe=JSON.parse(ae.res.json_body);if(200!==fe.code)throw oe.debug("[".concat(R.clientId,"] Get proxy server failed: response code [").concat(fe.code,"], reason [").concat(fe.reason,"]")),Yt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(fe.code,"], reason [").concat(fe.reason,"]")),new Pe(Ie.UNEXPECTED_RESPONSE,JSON.stringify(ae.res));return oe.debug("[".concat(R.clientId,"] App return server length"),fe.servers.length),Yt("debug",["AjaxAPI",R.clientId],"requestProxyServerList","",{length:fe.servers.length}),!1},ae=>ae.code!==Ie.OPERATION_ABORTED&&(Kt.requestProxyAppCenter($.sid,{lts:Q,succ:!1,APAddr:C,workerManagerList:null,ec:ae.code,response:ae.message}),!0),j)}(b,n,i,o),allFailedhandler:()=>{throw oe.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new Pe(Ie.CAN_NOT_GET_PROXY_SERVER)}});const v=JSON.parse(p.res.json_body).servers.map($K);if("443only"===n.cloudProxyServer)return{addresses:v,serverResponse:{tcpport:443,udpport:Js.udpport,username:Js.username,password:Js.password}};Kt.requestProxyAppCenter(n.sid,{lts:c,succ:!0,APAddr:p.url,workerManagerList:JSON.stringify(v),ec:null,response:JSON.stringify(p.res)}),c=Date.now();const _=v.map(b=>function(C,R,N,j){const Q=Date.now();let $=C;C.startsWith("http")||($="https://".concat(C,":4000/v2/machine"));const ae={command:"request",gatewayType:"http",appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sdkVersion:"2.3.1",sid:R.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sid:R.sid}};return jl(L(function*(){return{res:yield Vd($,{data:ae,cancelToken:N}),url:C}}),fe=>{if(!fe.res.serverResponse)throw new Pe(Ie.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},fe=>fe.code!==Ie.OPERATION_ABORTED&&(Kt.requestProxyWorkerManager(ae.sid,{lts:Q,succ:!1,workerManagerAddr:C,ec:fe.code,response:fe.message}),!0),j)}(b,n,i,o));let y=null;try{y=yield WS(_)}catch{throw oe.error("[".concat(n.clientId,"] can not get worker manager after trying several times")),new Pe(Ie.CAN_NOT_GET_PROXY_SERVER)}return _.forEach(b=>b.cancel()),Kt.requestProxyWorkerManager(n.sid,{lts:c,succ:!0,workerManagerAddr:y.url,ec:null,response:JSON.stringify(y.res)}),{addresses:[y.url],serverResponse:y.res.serverResponse}}),FL.apply(this,arguments)}function UL(){return UL=L(function*(n,i,o){const c=Bt("CDS_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(_,y,b,C){const R=Ki(),N={flag:64,cipher_method:0,features:{device:R.name,system:R.os,system_general:navigator.userAgent,vendor:y.appId,version:al,cname:y.cname,sid:y.sid,session_id:y.sid,detail:"",proxyServer:y.proxyServer}};return jl(()=>Vd(_,{data:N,timeout:1e3,cancelToken:b,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,j=>j.code!==Ie.OPERATION_ABORTED,C)}(v,n,i,o));let h=null,g=null,p={};try{h=yield WS(c)}catch(v){if(v.code===Ie.OPERATION_ABORTED)throw v;g=v}if(c.forEach(v=>v.cancel()),Kt.reportApiInvoke(n.sid,{name:hr.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:h}}).onSuccess(),h&&h.test_tags)try{p=function(v){if(!v.test_tags)return{};const _=v.test_tags,y=Object.keys(_),b={};return y.forEach(C=>{var R;const N=Cy(R=C.slice(4)).call(R),j=JSON.parse(_[C])[1];b[N]=j}),b}(h)}catch{}return p}),UL.apply(this,arguments)}function V4(n,i,o,c){return VL.apply(this,arguments)}function VL(){return VL=L(function*(n,i,o,c){const h=Bt("PROXY_SERVER_TYPE3"),g=(N,j)=>{let Q=h;return Array.isArray(Q)&&(Q=j%2==0?h[1]:h[0]),"https://".concat(Q,"/ap/?url=").concat(N)};let p=null;const v=[],_=function(){var N=L(function*(){const j=Bt("WEBCS_DOMAIN").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map((ae,fe)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(ae,"/api/v2/transpond/webrtc?v=2"):g("".concat(ae,"/api/v2/transpond/webrtc?v=2"),fe),areaCode:F1(),serviceIds:[Us.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK]})),Q=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(ae=>ae.url)}),$=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:ae=>(oe.debug("[".concat(n.clientId,"] Connect to choose_server:"),ae.url),DQ(ae,n,i,o)),allFailedhandler:ae=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ae},Q),ae[0]},promisesCollector:v});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},Q),$});return function(){return N.apply(this,arguments)}}(),y=function(){var N=L(function*(){if(yield lc(1e3),null!==p)return p;const j=Bt("WEBCS_DOMAIN_BACKUP_LIST").map((ae,fe)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(ae,"/api/v2/transpond/webrtc?v=2"):g("".concat(ae,"/api/v2/transpond/webrtc?v=2"),fe),areaCode:F1(),serviceIds:[Us.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?Us.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?Us.CLOUD_PROXY:Us.CLOUD_PROXY_FALLBACK]})),Q=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(ae=>ae.url)}),$=yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:ae=>(oe.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),ae.url),DQ(ae,n,i,o)),allFailedhandler:ae=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ae},Q),ae[0]},promisesCollector:v});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},Q),$});return function(){return N.apply(this,arguments)}}();let b,C,R;try{({gatewayInfo:b,proxyInfo:C,url:R}=yield WS([_(),y()]))}catch(N){throw N[0]}if(v.length&&v.forEach(N=>N.cancel&&"function"==typeof N.cancel&&N.cancel()),!b||!C)throw new Pe(Ie.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=R,"disabled"!==n.cloudProxyServer&&Array.isArray(h)&&R){const N=new y4(R).host;h.includes(N)&&(n.proxyServer=N,oe.setProxyServer(N),Kt.setProxyServer(N),wy(N))}return p={gatewayInfo:b,proxyInfo:yield R9(C,b.uid)},p}),VL.apply(this,arguments)}function LQ(n,i,o,c){return jL.apply(this,arguments)}function jL(){return jL=L(function*(n,i,o,c){const h=Bt("UAP_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(g=>i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield RQ(h,n,i,o,c)}),jL.apply(this,arguments)}function h2(){return h2=L(function*(n,i,o){const c=Bt("UAP_AP").slice(0,Bt("AJAX_REQUEST_CONCURRENT")).map(h=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap")).map(h=>function(g,p,v,_){const y={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:al,cname:p.cname,uid:p.uid.toString(),requestId:M4,seq:M4};M4+=1;const b={service_name:"tele_channel",json_body:JSON.stringify(y)};return jl(L(function*(){const C=yield Vd(g,{data:b,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==C.code){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"cross channel ap error, code"+C.code,{retry:!0});throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,N.toString()),N}const R=JSON.parse(C.json_body);if(200!==R.code){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(R.code,", reason: ").concat(R.reason));throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,N.toString()),N}if(!R.servers||0===R.servers.length){const N=new Pe(Ie.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw oe.error(N.toString()),Yt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,N.toString()),N}return{vid:R.vid,workerToken:R.workerToken,addressList:R.servers.map(N=>"wss://".concat(N.address.replace(/\./g,"-"),".").concat(Bt("WORKER_DOMAIN"),":").concat(N.wss))}}),void 0,C=>!!(C.code!==Ie.OPERATION_ABORTED&&C.code!==Ie.UNEXPECTED_RESPONSE||C.data&&C.data.retry),_)}(h,n,i,o));try{const h=yield WS(c);return c.forEach(g=>g.cancel()),h}catch(h){throw h[0]}}),h2.apply(this,arguments)}function j4(){return j4=L(function*(n,i,o){let c=null;const h=[],g=function(){var p=L(function*(v){const _=Bt(v?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(y=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(y+"/api/v2/transpond/webrtc?v=2"):"https://".concat(y,"/api/v2/transpond/webrtc?v=2"));return v&&(yield lc(1e3),null!==c)?c:yield zS({fragementLength:Bt("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:y=>(oe.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(v?"backup":""," choose_server:"),y),function(b,C,R,N){const[j]=NQ(C,[Us.CHOOSE_SERVER]);let Q=Vs.networkState;return jl(L(function*(){Q&&Vs.networkState===Ou.OFFLINE&&Vs.onlineWaiter&&(yield jn.race([Vs.onlineWaiter,lc(N&&N.maxRetryTimeout||Jo.maxRetryTimeout)])),Q=Vs.networkState;const $=yield Vd(b,{data:j,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return kQ($,b)}),()=>!1,$=>$.code!==Ie.OPERATION_ABORTED&&($.code===Ie.UPDATE_TICKET_FAILED?$.data.retry:(oe.warning("[".concat(C.clientId,"] update ticket network error, retry"),$),Ln("warning",["AjaxAPI",C.clientId],"update ticket network error, retry, ".concat($)),!0)),N)}(y,n,i,o)),allFailedhandler:y=>{throw y[0]},promisesCollector:h})});return function(_){return p.apply(this,arguments)}}();try{return c=yield WS([g(!1),g(!0)]),h.length&&h.forEach(p=>p.cancel&&"function"==typeof p.cancel&&p.cancel()),c}catch(p){throw p[0]}}),j4.apply(this,arguments)}var UQ;function Q4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function VQ(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?Q4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Q4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let jQ=sc("ConfigDistributeManager")(UQ=class extends rs{constructor(){super(),q(this,"configs",void 0),q(this,"joinInfo",void 0),q(this,"cancelToken",void 0),q(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),q(this,"interval",void 0),q(this,"mutex",new au("config-distribute")),q(this,"mutableParamsRead",!1)}startGetConfigDistribute(n,i){this.joinInfo=n,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Bt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var n=this;return L(function*(){!n.mutex.isLocked||(yield n.mutex.lock())()})()}updateConfigDistribute(){var n=this;return L(function*(){if(n.mutableParamsRead||(n.mutableParamsRead=!0,Kt.reportApiInvoke(null,{options:void 0,name:hr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:sr.TRACER}).onSuccess(JSON.stringify(UU))),!n.joinInfo||!n.cancelToken||!n.retryConfig)return oe.debug("[config-distribute] get config distribute interrupted have no joininfo"),void Yt("debug",n,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let i;const o=yield n.mutex.lock();try{i=yield function xQ(n,i,o){return UL.apply(this,arguments)}(n.joinInfo,n.cancelToken,n.retryConfig),oe.debug("[config-distribute] get config distribute",JSON.stringify(i)),Yt("debug",n,"updateConfigDistribute",i),i.limit_bitrate&&n.handleBitrateLimit(i.limit_bitrate),n.cacheGlobalParameterConfig(i),n.configs=i}catch(c){const h=new Pe(Ie.NETWORK_RESPONSE_ERROR,c);oe.warning("[config-distribute] ".concat(h.toString())),Yt("warning",n,"updateConfigDistribute",void 0,c.toString())}finally{o()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(n){var i;(i=n)&&i.uplink&&i.id&&void 0!==i.uplink.max_bitrate&&void 0!==i.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==n.id&&this.emit(yv.UPDATE_BITRATE_LIMIT,n):this.emit(yv.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&VQ({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(n){var i;const o=UM(i=Object.keys(n).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(i);for(let h=0;h<o.length;h++)for(let g=o.length-1;g>h;g--){const p=o[g];if("number"==typeof n[p].__priority){const v=n[p].__priority,_=o[g-1];if("number"==typeof n[_].__priority){if(!(v>n[_].__priority))continue;{const y=p;o[g]=o[g-1],o[g-1]=y}}else{const y=p;o[g]=o[g-1],o[g-1]=y}}}const c={};o.forEach(h=>{const g=n[h],p=g.__expires;Object.keys(g).forEach(v=>{"__priority"===v||"__expires"===v||Object.prototype.hasOwnProperty.call(c,v)||(c[v]=VQ({value:g[v]},p&&{expires:p}))})});try{const h=JSON.stringify(c),g=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",g),oe.debug("Caching global parameters ".concat(h)),Yt("debug",this,"cacheGlobalParameterConfig",h)}catch(h){oe.error("Error caching global parameters:",h.message),Yt("error",this,"cacheGlobalParameterConfig",void 0,h.message)}}})||UQ;function H4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function V1(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?H4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):H4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class QQ extends rs{constructor(i,o,c,h){super(),q(this,"spec",void 0),q(this,"token",void 0),q(this,"websocket",void 0),q(this,"pingpongTimer",void 0),q(this,"reconnectMode","retry"),q(this,"serviceMode",void 0),q(this,"reqId",0),q(this,"commandReqId",0),q(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),q(this,"handleWebSocketMessage",g=>{if(!g.data)return;const p=JSON.parse(g.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===is.INJECT?this.emit(ou.INJECT_STREAM_STATUS,p):(Kt.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===is.TRANSCODE?1:2}),this.emit(ou.PUBLISH_STREAM_STATUS,p))}),this.spec=o,this.token=i,this.serviceMode=h,this.websocket=new Jy("live-streaming",c),this.websocket.on(Mr.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Mr.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Mr.REQUEST_NEW_URLS,(g,p)=>{jd(this,ou.REQUEST_NEW_ADDRESS).then(g).catch(p)}),this.websocket.on(Mr.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(i){return this.websocket.init(i)}request(i,o,c,h){var g=this;return L(function*(){g.reqId+=1,"request"===i&&(g.commandReqId+=1);const p=g.commandReqId,v=g.reqId;if(!v||!g.websocket)throw new Pe(Ie.UNEXPECTED_ERROR);const _=V1({command:i,sdkVersion:"4.12.1"===al?"0.0.1":al,seq:v,requestId:v,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if("closed"===g.websocket.state)throw new Pe(Ie.WS_DISCONNECT);const y=()=>new jn((N,j)=>{g.websocket.once(Mr.CLOSED,()=>j(new Pe(Ie.WS_ABORT))),g.websocket.once(Mr.CONNECTED,N)});"connected"!==g.websocket.state&&(yield y()),_.clientRequest&&(_.clientRequest.workerToken=g.token);const b=new jn((N,j)=>{const Q=()=>{j(new Pe(Ie.WS_ABORT))};g.websocket.once(Mr.RECONNECTING,Q),g.websocket.once(Mr.CLOSED,Q),g.once("@".concat(v,"-").concat(g.spec.sid),$=>{N($)})});h&&Kt.workerEvent(g.spec.sid,V1(V1({},h),{},{requestId:p,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const C=Date.now();g.websocket.sendMessage(_);let R=null;try{R=yield b}catch(N){if("closed"===g.websocket.state)throw N;return yield y(),yield g.request(i,o,c)}return h&&Kt.workerEvent(g.spec.sid,V1(V1({},h),{},{requestId:p,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:200===R.code,responseTime:Date.now()-C})),200!==R.code&&g.handleResponseError(R),R})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const i="4.12.1"===al?"0.0.1":al;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:i,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(i){switch(i.code){case To.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void oe.warning("live stream response already exists stream");case To.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case To.LIVE_STREAM_RESPONSE_BAD_STREAM:case To.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Pe(Ie.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:i.code}).throw();case To.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case To.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Pe(Ie.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:i.code}).throw();case To.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new Pe(Ie.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ou.WARNING,o,i.serverResponse.url)}case To.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new Pe(Ie.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ou.WARNING,o,i.serverResponse.url)}case To.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case To.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Pe(Ie.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:i.code}).throw();case To.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new Pe(Ie.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ou.WARNING,o,i.serverResponse.url)}case To.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code}).throw();case To.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case To.LIVE_STREAM_RESPONSE_WORKER_LOST:case To.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;throw new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case To.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===i.serverResponse.command||"UninjectStream"===i.serverResponse.command)return;if("UpdateTranscoding"===i.serverResponse.command||"ControlStream"===i.serverResponse.command)return new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:i.code}).throw();throw new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case To.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Pe(Ie.LIVE_STREAMING_CDN_ERROR,"",{code:i.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(tL)},6e3)}}function G4(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function cu(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?G4(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):G4(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class HQ extends rs{constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jo;super(),q(this,"onLiveStreamWarning",void 0),q(this,"onLiveStreamError",void 0),q(this,"onInjectStatusChange",void 0),q(this,"spec",void 0),q(this,"retryTimeout",1e4),q(this,"connection",void 0),q(this,"httpRetryConfig",void 0),q(this,"wsRetryConfig",void 0),q(this,"streamingTasks",new Map),q(this,"isStartingStreamingTask",!1),q(this,"taskMutex",new au("live-streaming")),q(this,"cancelToken",sl.CancelToken.source()),q(this,"transcodingConfig",void 0),q(this,"injectConfig",cu({},KD)),q(this,"injectLoopTimes",0),q(this,"uapResponse",void 0),q(this,"lastTaskId",1),q(this,"statusError",new Map),this.spec=i,this.httpRetryConfig=c,this.wsRetryConfig=o}setTranscodingConfig(i){var o=this;return L(function*(){const c=cu(cu({},zT),i);var v;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(oe.debug("[".concat(o.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(v=>cu(cu(cu({},C6),v),{},{zOrder:v.zOrder?v.zOrder+1:1}))),uo((v=c).width)||Wr(v.width,"config.width",0,1e4),uo(v.height)||Wr(v.height,"config.height",0,1e4),uo(v.videoBitrate)||Wr(v.videoBitrate,"config.videoBitrate",1,1e6),uo(v.videoFrameRate)||Wr(v.videoFrameRate,"config.videoFrameRate"),uo(v.lowLatency)||Tp(v.lowLatency,"config.lowLatency"),uo(v.audioSampleRate)||fa(v.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),uo(v.audioBitrate)||Wr(v.audioBitrate,"config.audioBitrate",1,128),uo(v.audioChannels)||fa(v.audioChannels,"config.audioChannels",[1,2,3,4,5]),uo(v.videoGop)||Wr(v.videoGop,"config.videoGop"),uo(v.videoCodecProfile)||fa(v.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),uo(v.userCount)||Wr(v.userCount,"config.userCount",0,17),uo(v.backgroundColor)||Wr(v.backgroundColor,"config.backgroundColor",0,16777215),uo(v.userConfigExtraInfo)||Ic(v.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),v.transcodingUsers&&!uo(v.transcodingUsers)&&(OS(v.transcodingUsers,"config.transcodingUsers"),v.transcodingUsers.forEach((_,y)=>{jD(_.uid),uo(_.x)||Wr(_.x,"transcodingUser[".concat(y,"].x"),0,1e4),uo(_.y)||Wr(_.y,"transcodingUser[".concat(y,"].y"),0,1e4),uo(_.width)||Wr(_.width,"transcodingUser[".concat(y,"].width"),0,1e4),uo(_.height)||Wr(_.height,"transcodingUser[".concat(y,"].height"),0,1e4),uo(_.zOrder)||Wr(_.zOrder-1,"transcodingUser[".concat(y,"].zOrder"),0,100),uo(_.alpha)||Wr(_.alpha,"transcodingUser[".concat(y,"].alpha"),0,1,!1)})),uo(v.watermark)||KT(v.watermark,"watermark"),uo(v.backgroundImage)||KT(v.backgroundImage,"backgroundImage"),v.images&&!uo(v.images)&&(OS(v.images,"config.images"),v.images.forEach((_,y)=>{KT(_,"images[".concat(y,"]"))}));const h=[];c.images&&h.push(...c.images.map(v=>cu(cu(cu({},WM),v),{},{zOrder:255}))),c.backgroundImage&&(h.push(cu(cu(cu({},WM),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(h.push(cu(cu(cu({},WM),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=h,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(v=>cu({},v)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(v=>"number"==typeof v.uid?jn.resolve(v.uid):l2(v.uid,o.spec,o.cancelToken.token,o.httpRetryConfig));if((yield jn.all(g)).forEach((v,_)=>{c.userConfigs&&c.userConfigs[_]&&(c.userConfigs[_].uid=v)}),o.transcodingConfig=c,o.connection)try{var p;const v=yield o.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:o.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Ng(p=o.streamingTasks).call(p)).map(_=>_.taskId).join("#")});oe.debug("[".concat(o.spec.clientId,"] update live transcoding config success, code: ").concat(v.code,", config:"),JSON.stringify(o.transcodingConfig))}catch(v){if(!v.data||!v.data.retry)throw v;v.data.changeAddress&&o.connection.tryNextAddress(),o.streamingTasks.forEach(_=>{oe.warning("[".concat(o.spec.clientId,"] live streaming receive error"),v.toString(),"try to republish",_.url),o.startLiveStreamingTask(_.url,_.mode,v).then(()=>{oe.debug("[".concat(o.spec.clientId,"] live streaming republish ").concat(_.url," success"))}).catch(y=>{oe.error("[".concat(o.spec.clientId,"] live streaming republish failed"),_.url,y.toString()),o.onLiveStreamError&&o.onLiveStreamError(_.url,y)})})}})()}setInjectStreamConfig(i,o){this.injectConfig=Object.assign({},this.injectConfig,i),this.injectLoopTimes=o}startLiveStreamingTask(i,o,c){var h=this;return L(function*(){var g;if(Array.from(Ng(g=h.streamingTasks).call(g)).find(y=>y.mode===is.INJECT)&&o===is.INJECT)return new Pe(Ie.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!h.transcodingConfig&&o===is.TRANSCODE)throw new Pe(Ie.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let p={command:"PublishStream",ts:Date.now(),url:i,uid:h.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};oe.debug("[".concat(h.spec.clientId,"] start live streaming ").concat(i,", mode: ").concat(o));const v=yield h.taskMutex.lock();if(!h.connection&&c)return void v();if(h.streamingTasks.get(i)&&!c)return v(),new Pe(Ie.LIVE_STREAMING_TASK_CONFLICT).throw();try{h.connection||(h.connection=yield h.connect(o))}catch(y){throw v(),y}switch(o){case is.TRANSCODE:p.transcodingConfig=cu({},h.transcodingConfig);break;case is.RAW:break;case is.INJECT:p={cname:h.spec.cname,command:"InjectStream",sid:h.spec.sid,transcodingConfig:h.injectConfig,ts:Date.now(),url:i,loopTimes:h.injectLoopTimes}}h.uapResponse&&h.uapResponse.vid&&(p.vid=h.uapResponse.vid),h.isStartingStreamingTask=!0;const _=h.lastTaskId++;try{const y=new jn((C,R)=>{lc(h.retryTimeout).then(()=>{if(c)return R(c);const N=h.statusError.get(i);return N?(h.statusError.delete(i),R(N)):void 0})}),b=yield jn.race([h.connection.request("request",{clientRequest:p},!0,{url:i,command:"PublishStream",workerType:o===is.TRANSCODE?1:2,requestByUser:!c,tid:_.toString()}),y]);h.isStartingStreamingTask=!1,oe.debug("[".concat(h.spec.clientId,"] live streaming started, code: ").concat(b.code)),h.streamingTasks.set(i,{clientRequest:p,mode:o,url:i,taskId:_}),v()}catch(y){if(v(),h.isStartingStreamingTask=!1,!y.data||!y.data.retry||c)throw y;return y.data.changeAddress?(h.connection.tryNextAddress(),yield h.startLiveStreamingTask(i,o,y)):yield h.startLiveStreamingTask(i,o,y)}})()}stopLiveStreamingTask(i){return new jn((o,c)=>{const h=this.streamingTasks.get(i);if(!h||!this.connection)return new Pe(Ie.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=h.mode;h.abortTask=()=>{oe.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(i),o()},this.connection.request("request",{clientRequest:{command:g===is.INJECT?"UninjectStream":"UnpublishStream",url:h.url}},!1,{url:i,command:"UnPublishStream",workerType:g===is.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{oe.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(i),0===this.streamingTasks.size&&g!==is.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),o(),g===is.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,i)}).catch(c)})}controlInjectStream(i,o,c,h){var g=this;return L(function*(){const p=g.streamingTasks.get(i);if(!p||!g.connection||p.mode!==is.INJECT)throw new Pe(Ie.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:i,control:o,audioVolume:c,position:h}})).serverResponse})()}resetAllTask(){var i;const o=Array.from(Ng(i=this.streamingTasks).call(i));this.terminate();for(const c of o)this.startLiveStreamingTask(c.url,c.mode).catch(h=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,h)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=sl.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(i){var o=this;return L(function*(){if(o.connection)throw new Pe(Ie.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield jd(o,Wf.REQUEST_WORKER_MANAGER_LIST,i);return o.uapResponse=c,o.connection=new QQ(c.workerToken,o.spec,o.wsRetryConfig,i),o.connection.on(ou.WARNING,(h,g)=>o.onLiveStreamWarning&&o.onLiveStreamWarning(g,h)),o.connection.on(ou.PUBLISH_STREAM_STATUS,h=>o.handlePublishStreamServer(h)),o.connection.on(ou.INJECT_STREAM_STATUS,h=>o.handleInjectStreamServerStatus(h)),o.connection.on(ou.REQUEST_NEW_ADDRESS,(h,g)=>{if(!o.connection)return g(new Pe(Ie.UNEXPECTED_ERROR,"can not get new live streaming address list"));jd(o,Wf.REQUEST_WORKER_MANAGER_LIST,i).then(p=>{o.uapResponse=p,h(p.addressList)}).catch(g)}),yield o.connection.init(c.addressList),o.connection})()}handlePublishStreamServer(i){const o=i.serverStatus&&i.serverStatus.url||"empty_url",c=this.streamingTasks.get(o),h=i.reason;switch(i.code){case To.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case To.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new Pe(Ie.LIVE_STREAMING_CDN_ERROR,"",{code:i.code});if(c)return oe.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,p);if(!this.isStartingStreamingTask)return;this.statusError.set(o,p)}case To.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new Pe(Ie.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,h);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,p)}case To.LIVE_STREAM_RESPONSE_WORKER_LOST:case To.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(Ng(g=this.streamingTasks).call(g));for(const v of p)v.abortTask?v.abortTask():(oe.warning("[".concat(this.spec.clientId,"] publish stream status code"),i.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Pe(Ie.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:i.code})).then(()=>{oe.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(_=>{oe.error(_.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,_)}));return}}}handleInjectStreamServerStatus(i){const o=Number(i.uid),c=i.serverStatus&&i.serverStatus.url;switch(i.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_START_SUCCESS,o,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,o,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_START_UNAUTHORIZED,o,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_BROKEN,o,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Av.INJECT_STREAM_STATUS_START_TIMEOUT,o,c),void this.streamingTasks.delete(c);default:return void oe.debug("inject stream server status",i)}}hasUrl(i){return this.streamingTasks.has(i)}}class QL{constructor(){q(this,"destChannelMediaInfos",new Map),q(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(i){kS(i),this.srcChannelMediaInfo=i}addDestChannelInfo(i){kS(i),this.destChannelMediaInfos.set(i.channelName,i)}removeDestChannelInfo(i){VD(i),this.destChannelMediaInfos.delete(i)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function W4(n){if(!(n instanceof QL))return new Pe(Ie.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const i=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfo();return i?0===o.size?new Pe(Ie.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Pe(Ie.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class GQ extends rs{constructor(i,o,c){super(),q(this,"ws",void 0),q(this,"requestId",1),q(this,"heartBeatTimer",void 0),q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),q(this,"onClose",h=>{this.emit("close"),this.dispose()}),q(this,"onMessage",h=>{const g=JSON.parse(h.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=i,this.clientId=o,this.ws=new Jy("cross-channel-".concat(this.clientId),c),this.ws.on(Mr.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Mr.CONNECTED,this.onOpen),this.ws.on(Mr.ON_MESSAGE,this.onMessage),this.ws.on(Mr.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(i){const o=this.requestId++;return i.requestId=o,i.seq=o,this.ws.sendMessage(i),o}waitStatus(i){return new jn((o,c)=>{const h=window.setTimeout(()=>{c(new Pe(Ie.TIMEOUT,"wait status timeout, status: ".concat(i)))},5e3);this.once(i,g=>{window.clearTimeout(h),g.state&&0!==g.state?c(new Pe(Ie.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(i))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(h),c(new Pe(Ie.WS_ABORT))})})}request(i){var o=this;return L(function*(){if("closed"===o.ws.state)throw new Pe(Ie.WS_DISCONNECT);"connected"!==o.ws.state&&(yield new jn((v,_)=>{o.ws.once(Mr.CLOSED,()=>_(new Pe(Ie.WS_ABORT))),o.ws.once(Mr.CONNECTED,v)}));const h=o.sendMessage(i),g=new jn((v,_)=>{const y=()=>{_(new Pe(Ie.WS_ABORT))};o.ws.once(Mr.RECONNECTING,y),o.ws.once(Mr.CLOSED,y),o.once("req_".concat(h),v),lc(3e3).then(()=>{o.removeAllListeners("req_".concat(h)),o.ws.off(Mr.RECONNECTING,y),o.ws.off(Mr.CLOSED,y),_(new Pe(Ie.TIMEOUT,"cross channel ws request timeout"))})}),p=yield g;if(!p||200!==p.code)throw new Pe(Ie.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(p)));return p})()}connect(i){var o=this;return L(function*(){o.ws.removeAllListeners(Mr.REQUEST_NEW_URLS),o.ws.on(Mr.REQUEST_NEW_URLS,c=>{c(i)}),yield o.ws.init(i)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(i){const o=this.requestId++;return i.requestId=o,this.ws.sendMessage(i),o}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class p2 extends rs{set state(i){i!==this._state&&(i!==Fa.RELAY_STATE_FAILURE&&(this.errorCode=Tg.RELAY_OK),this.emit("state",i,this.errorCode),this._state=i)}get state(){return this._state}constructor(i,o,c,h){var g;super(),g=this,q(this,"joinInfo",void 0),q(this,"clientId",void 0),q(this,"cancelToken",sl.CancelToken.source()),q(this,"workerToken",void 0),q(this,"requestId",0),q(this,"signal",void 0),q(this,"prevChannelMediaConfig",void 0),q(this,"httpRetryConfig",void 0),q(this,"_state",Fa.RELAY_STATE_IDLE),q(this,"errorCode",Tg.RELAY_OK),q(this,"onStatus",p=>{oe.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&("onAudioPacketReceived"===p.command&&this.emit("event",wp.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===p.command&&this.emit("event",wp.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===p.command&&(this.errorCode=Tg.SRC_TOKEN_EXPIRED,this.state=Fa.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===p.command&&(this.errorCode=Tg.DEST_TOKEN_EXPIRED,this.state=Fa.RELAY_STATE_FAILURE))}),q(this,"onReconnect",L(function*(){oe.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",wp.NETWORK_DISCONNECTED),g.state=Fa.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(p=>{g.state!==Fa.RELAY_STATE_IDLE&&(oe.error("auto restart channel media relay failed",p.toString()),g.errorCode=Tg.SERVER_CONNECTION_LOST,g.state=Fa.RELAY_STATE_FAILURE)})})),this.joinInfo=i,this.clientId=o,this.signal=new GQ(this.joinInfo,this.clientId,c),this.httpRetryConfig=h}startChannelMediaRelay(i){var o=this;return L(function*(){if(o.state!==Fa.RELAY_STATE_IDLE)throw new Pe(Ie.INVALID_OPERATION);o.state=Fa.RELAY_STATE_CONNECTING,yield o.connect(),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: connect success"));try{yield o.sendStartRelayMessage(i)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new Pe(Ie.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new Pe(Ie.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new Pe(Ie.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}o.prevChannelMediaConfig=i})()}updateChannelMediaRelay(i){var o=this;return L(function*(){if(o.state!==Fa.RELAY_STATE_RUNNING)throw new Pe(Ie.INVALID_OPERATION);yield o.sendUpdateMessage(i),o.prevChannelMediaConfig=i})()}stopChannelMediaRelay(){var i=this;return L(function*(){yield i.sendStopRelayMessage(),oe.debug("[".concat(i.clientId,"] stopChannelMediaRelay: send stop message success")),i.state=Fa.RELAY_STATE_IDLE,i.dispose()})()}dispose(){oe.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=sl.CancelToken.source(),this.state=Fa.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var i=this;return L(function*(){const o=yield function BQ(n,i,o){return h2.apply(this,arguments)}(i.joinInfo,i.cancelToken.token,i.httpRetryConfig);i.workerToken=o.workerToken,yield i.signal.connect(o.addressList),i.emit("event",wp.NETWORK_CONNECTED),i.signal.on("status",i.onStatus),i.signal.on("reconnecting",i.onReconnect)})()}sendStartRelayMessage(i){var o=this;return L(function*(){const c=o.genMessage(Ba.StopPacketTransfer);yield o.signal.request(c),yield o.signal.waitStatus("Normal Quit"),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const h=o.genMessage(Ba.SetSdkProfile,i);yield o.signal.request(h),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=o.genMessage(Ba.SetSourceChannel,i);yield o.signal.request(g),yield o.signal.waitStatus("SetSourceChannelStatus"),o.emit("event",wp.PACKET_JOINED_SRC_CHANNEL),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const p=o.genMessage(Ba.SetSourceUserId,i);yield o.signal.request(p),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const v=o.genMessage(Ba.SetDestChannel,i);yield o.signal.request(v),yield o.signal.waitStatus("SetDestChannelStatus"),o.emit("event",wp.PACKET_JOINED_DEST_CHANNEL),oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: SetDestChannel success"));const _=o.genMessage(Ba.StartPacketTransfer,i);yield o.signal.request(_),o.emit("event",wp.PACKET_SENT_TO_DEST_CHANNEL),o.state=Fa.RELAY_STATE_RUNNING,oe.debug("[".concat(o.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(i){var o=this;return L(function*(){const c=o.genMessage(Ba.UpdateDestChannel,i);yield o.signal.request(c),o.emit("event",wp.PACKET_UPDATE_DEST_CHANNEL),oe.debug("[".concat(o.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var i=this;return L(function*(){const o=i.genMessage(Ba.StopPacketTransfer);yield i.signal.request(o),oe.debug("[".concat(i.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(i,o){const c=[],h=[],g=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:al,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===p.sdkVersion&&(p.sdkVersion="0.0.1");let v=null,_=null;switch(i){case Ba.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Ba.SetSourceChannel:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Pe(Ie.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:_.channelName,token:_.token||this.joinInfo.appId},p;case Ba.SetSourceUserId:if(_=o&&o.getSrcChannelMediaInfo(),!_)throw new Pe(Ie.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:_.uid+""},p;case Ba.SetDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Pe(Ie.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:c,uid:h,token:g},p;case Ba.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Ba.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Ba.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Ba.UpdateDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Pe(Ie.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(y=>{c.push(y.channelName),h.push(y.uid+""),g.push(y.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:c,uid:h,token:g},p}return p}}const HL=n=>{const i=document.createElement("canvas");return i.width=2,i.height=2,new jn((o,c)=>{i.toBlob(function(){var h=L(function*(g){if(i.remove(),g){const p=yield o0(g);o({buffer:p,width:i.width,height:i.height})}else c(new Pe(Ie.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return h.apply(this,arguments)}}(),n,1)})},o0=function(){var n=L(function*(i){const o=yield i.arrayBuffer();return new Uint8Array(o)});return function(o){return n.apply(this,arguments)}}();var GL;let K4=sc("AgoraRTCPlayer","trackId")(GL=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(oe.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),Bd("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}constructor(n){q(this,"trackId",void 0),q(this,"config",void 0),q(this,"onFirstVideoFrameDecoded",void 0),q(this,"freezeTimeCounterList",[]),q(this,"timeUpdatedCount",0),q(this,"freezeTime",0),q(this,"playbackTime",0),q(this,"lastTimeUpdatedTime",0),q(this,"videoTrack",void 0),q(this,"container",void 0),q(this,"videoElement",void 0),q(this,"videoElementCheckInterval",void 0),q(this,"_videoElementStatus",Xs.NONE),q(this,"slot",void 0),q(this,"isGettingVideoDimensions",!1),q(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Xs.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Xs.CANPLAY;break;case"stalled":this.videoElementStatus=Xs.STALLED;break;case"suspend":this.videoElementStatus=Xs.SUSPEND;break;case"pause":this.videoElementStatus=Xs.PAUSED,!Iu()&&!gv()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),Ln("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Xs.WAITING;break;case"abort":this.videoElementStatus=Xs.ABORT;break;case"ended":this.videoElementStatus=Xs.ENDED;break;case"emptied":this.videoElementStatus=Xs.EMPTIED;break;case"timeupdate":{const o=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=o);const c=o-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=o,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),q(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return oe.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),Yt("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),q(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===zr.curState&&(EU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):yU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):AU()&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),q(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(EU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):yU()?(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):AU()&&(oe.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=n.element,this.trackId=n.trackId,this.updateConfig(n),zr.on(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zr.on(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(n){this.config=n,this.trackId=n.trackId;const i=n.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){if(this.videoElement){const i=this.videoElement.play();i&&i.catch&&i.catch(c=>{n&&Kt.autoplayFailed(n,"video",c.message,this.trackId),Yt("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(oe.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):oe.warning("[".concat(this.trackId,"] play warning: "),c)});const o=Ki();if(("Safari"===o.name&&15===Number(o.version)||yS())&&i&&i.then&&i.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");if(!i)return oe.error("create canvas context failed!"),Yt("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,n.width,n.height);const o=i.getImageData(0,0,n.width,n.height);return n.remove(),o}getCurrentFrameToUint8Array(n){var i=arguments,o=this;return L(function*(){let c=i.length>1&&void 0!==i[1]?i[1]:1;if(!o.videoElement)return yield HL(n);const h=document.createElement("canvas");h.width=o.videoElement.videoWidth,h.height=o.videoElement.videoHeight;const g=h.getContext("2d");return g?(g.drawImage(o.videoElement,0,0,h.width,h.height),new jn((p,v)=>{h.toBlob(function(){var _=L(function*(y){if(h.remove(),y){const b=yield o0(y);p({buffer:b,width:h.width,height:h.height})}else v(new Pe(Ie.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(y){return _.apply(this,arguments)}}(),n,c<0?.1:c>1?1:c)})):yield HL(n)})()}destroy(){if(zr.off(js.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zr.off(js.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Xs.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Xs.ERROR,this.container&&this.container.appendChild(this.videoElement),WL.forEach(o=>{this.videoElement&&this.videoElement.addEventListener(o,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Xs.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const n=Ki();"Safari"===n.name&&15===Number(n.version)||yS()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Es()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Es()&&this.videoElement.load());const i=this.videoElement.play();void 0!==i&&i.catch(o=>{oe.debug("[".concat(this.trackId,"] playback interrupted"),o.toString()),Ln("debug",this,"play back interrupted: ".concat(o.toString()))})}removeVideoElement(){if(this.videoElement){WL.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=Xs.NONE}}handleAutoPlayFailed(){const n=Ki();if(this.videoElement){const i=o=>{o.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{oe.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),Ln("debug",this,"video element autoplay resumed")}).catch(c=>{oe.error(c)}),"Android"!==n.os||"Chrome"!==n.name&&n.name!==xi.WECHAT?(document.body.removeEventListener("touchstart",i,!0),document.body.removeEventListener("mousedown",i,!0)):document.body.removeEventListener("click",i,!0))};"Android"!==n.os||"Chrome"!==n.name&&n.name!==xi.WECHAT?(document.body.addEventListener("touchstart",i,!0),document.body.addEventListener("mousedown",i,!0)):document.body.addEventListener("click",i,!0),mV()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||GL;const WL=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var z4,KL={exports:{}};function Xy(n,i,o){const c=n.createShader(o);if(!c)return new Pe(Ie.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(n.shaderSource(c,i),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){const h=n.getShaderInfoLog(c);return n.deleteShader(c),new Pe(Ie.WEBGL_INTERNAL_ERROR,"error compiling shader:"+h).throw()}return c}(function(n,i){n.exports=(()=>{var o={3476:(p,v,_)=>{p.exports=_(7460)},4341:(p,v,_)=>{p.exports=_(3685)},3536:(p,v,_)=>{var y=_(1910);p.exports=y},8171:(p,v,_)=>{_(6450);var y=_(4058).Object,b=p.exports=function(C,R,N){return y.defineProperty(C,R,N)};y.defineProperty.sham&&(b.sham=!0)},2956:(p,v,_)=>{_(7627),_(6274),_(5967),_(8881),_(4560),_(7206),_(4349),_(7971);var y=_(4058);p.exports=y.Promise},3685:(p,v,_)=>{var y=_(3536);p.exports=y},4883:(p,v,_)=>{var y=_(1899),b=_(7475),C=_(9826),R=y.TypeError;p.exports=function(N){if(b(N))return N;throw R(C(N)+" is not a function")}},174:(p,v,_)=>{var y=_(1899),b=_(4284),C=_(9826),R=y.TypeError;p.exports=function(N){if(b(N))return N;throw R(C(N)+" is not a constructor")}},1851:(p,v,_)=>{var y=_(1899),b=_(7475),C=y.String,R=y.TypeError;p.exports=function(N){if("object"==typeof N||b(N))return N;throw R("Can't set "+C(N)+" as a prototype")}},8479:p=>{p.exports=function(){}},5743:(p,v,_)=>{var y=_(1899),b=_(7046),C=y.TypeError;p.exports=function(R,N){if(b(N,R))return R;throw C("Incorrect invocation")}},6059:(p,v,_)=>{var y=_(1899),b=_(941),C=y.String,R=y.TypeError;p.exports=function(N){if(b(N))return N;throw R(C(N)+" is not an object")}},1692:(p,v,_)=>{var y=_(4529),b=_(9413),C=_(623),R=function(N){return function(j,Q,$){var ae,fe=y(j),Ae=C(fe),Re=b($,Ae);if(N&&Q!=Q){for(;Ae>Re;)if((ae=fe[Re++])!=ae)return!0}else for(;Ae>Re;Re++)if((N||Re in fe)&&fe[Re]===Q)return N||Re||0;return!N&&-1}};p.exports={includes:R(!0),indexOf:R(!1)}},3765:(p,v,_)=>{var y=_(5329);p.exports=y([].slice)},1385:(p,v,_)=>{var y=_(9813)("iterator"),b=!1;try{var C=0,R={next:function(){return{done:!!C++}},return:function(){b=!0}};R[y]=function(){return this},Array.from(R,function(){throw 2})}catch{}p.exports=function(N,j){if(!j&&!b)return!1;var Q=!1;try{var $={};$[y]=function(){return{next:function(){return{done:Q=!0}}}},N($)}catch{}return Q}},2532:(p,v,_)=>{var y=_(5329),b=y({}.toString),C=y("".slice);p.exports=function(R){return C(b(R),8,-1)}},9697:(p,v,_)=>{var y=_(1899),b=_(2885),C=_(7475),R=_(2532),N=_(9813)("toStringTag"),j=y.Object,Q="Arguments"==R(function(){return arguments}());p.exports=b?R:function($){var ae,fe,Ae;return void 0===$?"Undefined":null===$?"Null":"string"==typeof(fe=function(Re,tt){try{return Re[tt]}catch{}}(ae=j($),N))?fe:Q?R(ae):"Object"==(Ae=R(ae))&&C(ae.callee)?"Arguments":Ae}},8694:(p,v,_)=>{var y=_(5329)("".replace),b=String(Error("zxcasd").stack),C=/\n\s*at [^:]*:[^\n]*/,R=C.test(b);p.exports=function(N,j){if(R&&"string"==typeof N)for(;j--;)N=y(N,C,"");return N}},3489:(p,v,_)=>{var y=_(953),b=_(1136),C=_(9677),R=_(5988);p.exports=function(N,j,Q){for(var $=b(j),ae=R.f,fe=C.f,Ae=0;Ae<$.length;Ae++){var Re=$[Ae];y(N,Re)||Q&&y(Q,Re)||ae(N,Re,fe(j,Re))}}},4160:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){function b(){}return b.prototype.constructor=null,Object.getPrototypeOf(new b)!==b.prototype})},1046:(p,v,_)=>{var y=_(5143).IteratorPrototype,b=_(9290),C=_(1887),R=_(904),N=_(2077),j=function(){return this};p.exports=function(Q,$,ae,fe){var Ae=$+" Iterator";return Q.prototype=b(y,{next:C(+!fe,ae)}),R(Q,Ae,!1,!0),N[Ae]=j,Q}},2029:(p,v,_)=>{var y=_(5746),b=_(5988),C=_(1887);p.exports=y?function(R,N,j){return b.f(R,N,C(1,j))}:function(R,N,j){return R[N]=j,R}},1887:p=>{p.exports=function(v,_){return{enumerable:!(1&v),configurable:!(2&v),writable:!(4&v),value:_}}},7771:(p,v,_)=>{var y=_(6887),b=_(8834),C=_(2529),R=_(9417),N=_(7475),j=_(1046),Q=_(249),$=_(8929),ae=_(904),fe=_(2029),Ae=_(9754),Re=_(9813),tt=_(2077),Tt=_(5143),Mt=R.PROPER,Ct=R.CONFIGURABLE,Sn=Tt.IteratorPrototype,on=Tt.BUGGY_SAFARI_ITERATORS,cn=Re("iterator"),Ge="values",ot="entries",_t=function(){return this};p.exports=function(yn,Je,at,Rt,un,wn,Vt){j(at,Je,Rt);var V,_e,ke,Nt=function(Aa){if(Aa===un&&ji)return ji;if(!on&&Aa in Sr)return Sr[Aa];switch(Aa){case"keys":case Ge:case ot:return function(){return new at(this,Aa)}}return function(){return new at(this)}},In=Je+" Iterator",Ir=!1,Sr=yn.prototype,xr=Sr[cn]||Sr["@@iterator"]||un&&Sr[un],ji=!on&&xr||Nt(un),kc="Array"==Je&&Sr.entries||xr;if(kc&&(V=Q(kc.call(new yn)))!==Object.prototype&&V.next&&(C||Q(V)===Sn||($?$(V,Sn):N(V[cn])||Ae(V,cn,_t)),ae(V,In,!0,!0),C&&(tt[In]=_t)),Mt&&un==Ge&&xr&&xr.name!==Ge&&(!C&&Ct?fe(Sr,"name",Ge):(Ir=!0,ji=function(){return b(xr,this)})),un)if(_e={values:Nt(Ge),keys:wn?ji:Nt("keys"),entries:Nt(ot)},Vt)for(ke in _e)(on||Ir||!(ke in Sr))&&Ae(Sr,ke,_e[ke]);else y({target:Je,proto:!0,forced:on||Ir},_e);return C&&!Vt||Sr[cn]===ji||Ae(Sr,cn,ji,{name:un}),tt[Je]=ji,_e}},5746:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(p,v,_)=>{var y=_(1899),b=_(941),C=y.document,R=b(C)&&b(C.createElement);p.exports=function(N){return R?C.createElement(N):{}}},3281:p=>{p.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:p=>{p.exports="object"==typeof window},4470:(p,v,_)=>{var y=_(2861),b=_(1899);p.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==b.Pebble},2749:(p,v,_)=>{var y=_(2861);p.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},6049:(p,v,_)=>{var y=_(2532),b=_(1899);p.exports="process"==y(b.process)},8045:(p,v,_)=>{var y=_(2861);p.exports=/web0s(?!.*chrome)/i.test(y)},2861:(p,v,_)=>{var y=_(626);p.exports=y("navigator","userAgent")||""},3385:(p,v,_)=>{var y,b,C=_(1899),R=_(2861),N=C.process,j=C.Deno,Q=N&&N.versions||j&&j.version,$=Q&&Q.v8;$&&(b=(y=$.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!b&&R&&(!(y=R.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=R.match(/Chrome\/(\d+)/))&&(b=+y[1]),p.exports=b},6759:p=>{p.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(p,v,_)=>{var y=_(5981),b=_(1887);p.exports=!y(function(){var C=Error("a");return!("stack"in C)||(Object.defineProperty(C,"stack",b(1,7)),7!==C.stack)})},6887:(p,v,_)=>{var y=_(1899),b=_(9730),C=_(5329),R=_(7475),N=_(9677).f,j=_(7252),Q=_(4058),$=_(6843),ae=_(2029),fe=_(953),Ae=function(Re){var tt=function(Tt,Mt,Ct){if(this instanceof tt){switch(arguments.length){case 0:return new Re;case 1:return new Re(Tt);case 2:return new Re(Tt,Mt)}return new Re(Tt,Mt,Ct)}return b(Re,this,arguments)};return tt.prototype=Re.prototype,tt};p.exports=function(Re,tt){var Tt,Mt,Ct,Sn,on,cn,vt,Ge,ot=Re.target,_t=Re.global,yn=Re.stat,Je=Re.proto,at=_t?y:yn?y[ot]:(y[ot]||{}).prototype,Rt=_t?Q:Q[ot]||ae(Q,ot,{})[ot],un=Rt.prototype;for(Ct in tt)Tt=!j(_t?Ct:ot+(yn?".":"#")+Ct,Re.forced)&&at&&fe(at,Ct),on=Rt[Ct],Tt&&(cn=Re.noTargetGet?(Ge=N(at,Ct))&&Ge.value:at[Ct]),Sn=Tt&&cn?cn:tt[Ct],Tt&&typeof on==typeof Sn||(vt=Re.bind&&Tt?$(Sn,y):Re.wrap&&Tt?Ae(Sn):Je&&R(Sn)?C(Sn):Sn,(Re.sham||Sn&&Sn.sham||on&&on.sham)&&ae(vt,"sham",!0),ae(Rt,Ct,vt),Je&&(fe(Q,Mt=ot+"Prototype")||ae(Q,Mt,{}),ae(Q[Mt],Ct,Sn),Re.real&&un&&!un[Ct]&&ae(un,Ct,Sn)))}},5981:p=>{p.exports=function(v){try{return!!v()}catch{return!0}}},9730:(p,v,_)=>{var y=_(8285),b=Function.prototype,C=b.apply,R=b.call;p.exports="object"==typeof Reflect&&Reflect.apply||(y?R.bind(C):function(){return R.apply(C,arguments)})},6843:(p,v,_)=>{var y=_(5329),b=_(4883),C=_(8285),R=y(y.bind);p.exports=function(N,j){return b(N),void 0===j?N:C?R(N,j):function(){return N.apply(j,arguments)}}},8285:(p,v,_)=>{var y=_(5981);p.exports=!y(function(){var b=function(){}.bind();return"function"!=typeof b||b.hasOwnProperty("prototype")})},8834:(p,v,_)=>{var y=_(8285),b=Function.prototype.call;p.exports=y?b.bind(b):function(){return b.apply(b,arguments)}},9417:(p,v,_)=>{var y=_(5746),b=_(953),C=Function.prototype,R=y&&Object.getOwnPropertyDescriptor,N=b(C,"name"),j=N&&"something"===function(){}.name,Q=N&&(!y||y&&R(C,"name").configurable);p.exports={EXISTS:N,PROPER:j,CONFIGURABLE:Q}},5329:(p,v,_)=>{var y=_(8285),b=Function.prototype,R=b.call,N=y&&b.bind.bind(R,R);p.exports=y?function(j){return j&&N(j)}:function(j){return j&&function(){return R.apply(j,arguments)}}},626:(p,v,_)=>{var y=_(4058),b=_(1899),C=_(7475),R=function(N){return C(N)?N:void 0};p.exports=function(N,j){return arguments.length<2?R(y[N])||R(b[N]):y[N]&&y[N][j]||b[N]&&b[N][j]}},2902:(p,v,_)=>{var y=_(9697),b=_(4229),C=_(2077),R=_(9813)("iterator");p.exports=function(N){if(null!=N)return b(N,R)||b(N,"@@iterator")||C[y(N)]}},429:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(4883),R=_(6059),N=_(9826),j=_(2902),Q=y.TypeError;p.exports=function($,ae){var fe=arguments.length<2?j($):ae;if(C(fe))return R(b(fe,$));throw Q(N($)+" is not iterable")}},4229:(p,v,_)=>{var y=_(4883);p.exports=function(b,C){var R=b[C];return null==R?void 0:y(R)}},1899:(p,v,_)=>{var y=function(b){return b&&b.Math==Math&&b};p.exports=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},953:(p,v,_)=>{var y=_(5329),b=_(9678),C=y({}.hasOwnProperty);p.exports=Object.hasOwn||function(R,N){return C(b(R),N)}},7748:p=>{p.exports={}},4845:(p,v,_)=>{var y=_(1899);p.exports=function(b,C){var R=y.console;R&&R.error&&(1==arguments.length?R.error(b):R.error(b,C))}},5463:(p,v,_)=>{var y=_(626);p.exports=y("document","documentElement")},2840:(p,v,_)=>{var y=_(5746),b=_(5981),C=_(1333);p.exports=!y&&!b(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})},7026:(p,v,_)=>{var y=_(1899),b=_(5329),C=_(5981),R=_(2532),N=y.Object,j=b("".split);p.exports=C(function(){return!N("z").propertyIsEnumerable(0)})?function(Q){return"String"==R(Q)?j(Q,""):N(Q)}:N},1302:(p,v,_)=>{var y=_(5329),b=_(7475),C=_(3030),R=y(Function.toString);b(C.inspectSource)||(C.inspectSource=function(N){return R(N)}),p.exports=C.inspectSource},3794:(p,v,_)=>{var y=_(941),b=_(2029);p.exports=function(C,R){y(R)&&"cause"in R&&b(C,"cause",R.cause)}},5402:(p,v,_)=>{var y,b,C,R=_(8019),N=_(1899),j=_(5329),Q=_(941),$=_(2029),ae=_(953),fe=_(3030),Ae=_(4262),Re=_(7748),tt="Object already initialized",Tt=N.TypeError;if(R||fe.state){var Ct=fe.state||(fe.state=new(0,N.WeakMap)),Sn=j(Ct.get),on=j(Ct.has),cn=j(Ct.set);y=function(Ge,ot){if(on(Ct,Ge))throw new Tt(tt);return ot.facade=Ge,cn(Ct,Ge,ot),ot},b=function(Ge){return Sn(Ct,Ge)||{}},C=function(Ge){return on(Ct,Ge)}}else{var vt=Ae("state");Re[vt]=!0,y=function(Ge,ot){if(ae(Ge,vt))throw new Tt(tt);return ot.facade=Ge,$(Ge,vt,ot),ot},b=function(Ge){return ae(Ge,vt)?Ge[vt]:{}},C=function(Ge){return ae(Ge,vt)}}p.exports={set:y,get:b,has:C,enforce:function(Ge){return C(Ge)?b(Ge):y(Ge,{})},getterFor:function(Ge){return function(ot){var _t;if(!Q(ot)||(_t=b(ot)).type!==Ge)throw Tt("Incompatible receiver, "+Ge+" required");return _t}}}},6782:(p,v,_)=>{var y=_(9813),b=_(2077),C=y("iterator"),R=Array.prototype;p.exports=function(N){return void 0!==N&&(b.Array===N||R[C]===N)}},7475:p=>{p.exports=function(v){return"function"==typeof v}},4284:(p,v,_)=>{var y=_(5329),b=_(5981),C=_(7475),R=_(9697),N=_(626),j=_(1302),Q=function(){},$=[],ae=N("Reflect","construct"),fe=/^\s*(?:class|function)\b/,Ae=y(fe.exec),Re=!fe.exec(Q),tt=function(Mt){if(!C(Mt))return!1;try{return ae(Q,$,Mt),!0}catch{return!1}},Tt=function(Mt){if(!C(Mt))return!1;switch(R(Mt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Re||!!Ae(fe,j(Mt))}catch{return!0}};Tt.sham=!0,p.exports=!ae||b(function(){var Mt;return tt(tt.call)||!tt(Object)||!tt(function(){Mt=!0})||Mt})?Tt:tt},7252:(p,v,_)=>{var y=_(5981),b=_(7475),C=/#|\.prototype\./,R=function(ae,fe){var Ae=j[N(ae)];return Ae==$||Ae!=Q&&(b(fe)?y(fe):!!fe)},N=R.normalize=function(ae){return String(ae).replace(C,".").toLowerCase()},j=R.data={},Q=R.NATIVE="N",$=R.POLYFILL="P";p.exports=R},941:(p,v,_)=>{var y=_(7475);p.exports=function(b){return"object"==typeof b?null!==b:y(b)}},2529:p=>{p.exports=!0},6664:(p,v,_)=>{var y=_(1899),b=_(626),C=_(7475),R=_(7046),N=_(2302),j=y.Object;p.exports=N?function(Q){return"symbol"==typeof Q}:function(Q){var $=b("Symbol");return C($)&&R($.prototype,j(Q))}},3091:(p,v,_)=>{var y=_(1899),b=_(6843),C=_(8834),R=_(6059),N=_(9826),j=_(6782),Q=_(623),$=_(7046),ae=_(429),fe=_(2902),Ae=_(7609),Re=y.TypeError,tt=function(Mt,Ct){this.stopped=Mt,this.result=Ct},Tt=tt.prototype;p.exports=function(Mt,Ct,Sn){var on,cn,vt,Ge,ot,_t,yn,at=!(!Sn||!Sn.AS_ENTRIES),Rt=!(!Sn||!Sn.IS_ITERATOR),un=!(!Sn||!Sn.INTERRUPTED),wn=b(Ct,Sn&&Sn.that),Vt=function(_e){return on&&Ae(on,"normal",_e),new tt(!0,_e)},V=function(_e){return at?(R(_e),un?wn(_e[0],_e[1],Vt):wn(_e[0],_e[1])):un?wn(_e,Vt):wn(_e)};if(Rt)on=Mt;else{if(!(cn=fe(Mt)))throw Re(N(Mt)+" is not iterable");if(j(cn)){for(vt=0,Ge=Q(Mt);Ge>vt;vt++)if((ot=V(Mt[vt]))&&$(Tt,ot))return ot;return new tt(!1)}on=ae(Mt,cn)}for(_t=on.next;!(yn=C(_t,on)).done;){try{ot=V(yn.value)}catch(_e){Ae(on,"throw",_e)}if("object"==typeof ot&&ot&&$(Tt,ot))return ot}return new tt(!1)}},7609:(p,v,_)=>{var y=_(8834),b=_(6059),C=_(4229);p.exports=function(R,N,j){var Q,$;b(R);try{if(!(Q=C(R,"return"))){if("throw"===N)throw j;return j}Q=y(Q,R)}catch(ae){$=!0,Q=ae}if("throw"===N)throw j;if($)throw Q;return b(Q),j}},5143:(p,v,_)=>{var y,b,C,R=_(5981),N=_(7475),j=_(9290),Q=_(249),$=_(9754),ae=_(9813),fe=_(2529),Ae=ae("iterator"),Re=!1;[].keys&&("next"in(C=[].keys())?(b=Q(Q(C)))!==Object.prototype&&(y=b):Re=!0),null==y||R(function(){var tt={};return y[Ae].call(tt)!==tt})?y={}:fe&&(y=j(y)),N(y[Ae])||$(y,Ae,function(){return this}),p.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:Re}},2077:p=>{p.exports={}},623:(p,v,_)=>{var y=_(3057);p.exports=function(b){return y(b.length)}},6132:(p,v,_)=>{var y,b,C,R,N,j,Q,$,ae=_(1899),fe=_(6843),Ae=_(9677).f,Re=_(2941).set,tt=_(2749),Tt=_(4470),Mt=_(8045),Ct=_(6049),Sn=ae.MutationObserver||ae.WebKitMutationObserver,on=ae.document,cn=ae.process,vt=ae.Promise,Ge=Ae(ae,"queueMicrotask"),ot=Ge&&Ge.value;ot||(y=function(){var _t,yn;for(Ct&&(_t=cn.domain)&&_t.exit();b;){yn=b.fn,b=b.next;try{yn()}catch(Je){throw b?R():C=void 0,Je}}C=void 0,_t&&_t.enter()},tt||Ct||Mt||!Sn||!on?!Tt&&vt&&vt.resolve?((Q=vt.resolve(void 0)).constructor=vt,$=fe(Q.then,Q),R=function(){$(y)}):Ct?R=function(){cn.nextTick(y)}:(Re=fe(Re,ae),R=function(){Re(y)}):(N=!0,j=on.createTextNode(""),new Sn(y).observe(j,{characterData:!0}),R=function(){j.data=N=!N})),p.exports=ot||function(_t){var yn={fn:_t,next:void 0};C&&(C.next=yn),b||(b=yn,R()),C=yn}},9297:(p,v,_)=>{var y=_(1899);p.exports=y.Promise},2497:(p,v,_)=>{var y=_(3385),b=_(5981);p.exports=!!Object.getOwnPropertySymbols&&!b(function(){var C=Symbol();return!String(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&y&&y<41})},8019:(p,v,_)=>{var y=_(1899),b=_(7475),C=_(1302),R=y.WeakMap;p.exports=b(R)&&/native code/.test(C(R))},9520:(p,v,_)=>{var y=_(4883),b=function(C){var R,N;this.promise=new C(function(j,Q){if(void 0!==R||void 0!==N)throw TypeError("Bad Promise constructor");R=j,N=Q}),this.resolve=y(R),this.reject=y(N)};p.exports.f=function(C){return new b(C)}},4649:(p,v,_)=>{var y=_(5803);p.exports=function(b,C){return void 0===b?arguments.length<2?"":C:y(b)}},9290:(p,v,_)=>{var y,b=_(6059),C=_(9938),R=_(6759),N=_(7748),j=_(5463),Q=_(1333),$=_(4262)("IE_PROTO"),ae=function(){},fe=function(tt){return"<script>"+tt+"<\/script>"},Ae=function(tt){tt.write(fe("")),tt.close();var Tt=tt.parentWindow.Object;return tt=null,Tt},Re=function(){try{y=new ActiveXObject("htmlfile")}catch{}var tt,Tt;Re=typeof document<"u"?document.domain&&y?Ae(y):((Tt=Q("iframe")).style.display="none",j.appendChild(Tt),Tt.src=String("javascript:"),(tt=Tt.contentWindow.document).open(),tt.write(fe("document.F=Object")),tt.close(),tt.F):Ae(y);for(var Mt=R.length;Mt--;)delete Re.prototype[R[Mt]];return Re()};N[$]=!0,p.exports=Object.create||function(tt,Tt){var Mt;return null!==tt?(ae.prototype=b(tt),Mt=new ae,ae.prototype=null,Mt[$]=tt):Mt=Re(),void 0===Tt?Mt:C.f(Mt,Tt)}},9938:(p,v,_)=>{var y=_(5746),b=_(3937),C=_(5988),R=_(6059),N=_(4529),j=_(4771);v.f=y&&!b?Object.defineProperties:function(Q,$){R(Q);for(var ae,fe=N($),Ae=j($),Re=Ae.length,tt=0;Re>tt;)C.f(Q,ae=Ae[tt++],fe[ae]);return Q}},5988:(p,v,_)=>{var y=_(1899),b=_(5746),C=_(2840),R=_(3937),N=_(6059),j=_(3894),Q=y.TypeError,$=Object.defineProperty,ae=Object.getOwnPropertyDescriptor;v.f=b?R?function(fe,Ae,Re){if(N(fe),Ae=j(Ae),N(Re),"function"==typeof fe&&"prototype"===Ae&&"value"in Re&&"writable"in Re&&!Re.writable){var tt=ae(fe,Ae);tt&&tt.writable&&(fe[Ae]=Re.value,Re={configurable:"configurable"in Re?Re.configurable:tt.configurable,enumerable:"enumerable"in Re?Re.enumerable:tt.enumerable,writable:!1})}return $(fe,Ae,Re)}:$:function(fe,Ae,Re){if(N(fe),Ae=j(Ae),N(Re),C)try{return $(fe,Ae,Re)}catch{}if("get"in Re||"set"in Re)throw Q("Accessors not supported");return"value"in Re&&(fe[Ae]=Re.value),fe}},9677:(p,v,_)=>{var y=_(5746),b=_(8834),C=_(6760),R=_(1887),N=_(4529),j=_(3894),Q=_(953),$=_(2840),ae=Object.getOwnPropertyDescriptor;v.f=y?ae:function(fe,Ae){if(fe=N(fe),Ae=j(Ae),$)try{return ae(fe,Ae)}catch{}if(Q(fe,Ae))return R(!b(C.f,fe,Ae),fe[Ae])}},946:(p,v,_)=>{var y=_(5629),b=_(6759).concat("length","prototype");v.f=Object.getOwnPropertyNames||function(C){return y(C,b)}},7857:(p,v)=>{v.f=Object.getOwnPropertySymbols},249:(p,v,_)=>{var y=_(1899),b=_(953),C=_(7475),R=_(9678),N=_(4262),j=_(4160),Q=N("IE_PROTO"),$=y.Object,ae=$.prototype;p.exports=j?$.getPrototypeOf:function(fe){var Ae=R(fe);if(b(Ae,Q))return Ae[Q];var Re=Ae.constructor;return C(Re)&&Ae instanceof Re?Re.prototype:Ae instanceof $?ae:null}},7046:(p,v,_)=>{var y=_(5329);p.exports=y({}.isPrototypeOf)},5629:(p,v,_)=>{var y=_(5329),b=_(953),C=_(4529),R=_(1692).indexOf,N=_(7748),j=y([].push);p.exports=function(Q,$){var ae,fe=C(Q),Ae=0,Re=[];for(ae in fe)!b(N,ae)&&b(fe,ae)&&j(Re,ae);for(;$.length>Ae;)b(fe,ae=$[Ae++])&&(~R(Re,ae)||j(Re,ae));return Re}},4771:(p,v,_)=>{var y=_(5629),b=_(6759);p.exports=Object.keys||function(C){return y(C,b)}},6760:(p,v)=>{var _={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b=y&&!_.call({1:2},1);v.f=b?function(C){var R=y(this,C);return!!R&&R.enumerable}:_},8929:(p,v,_)=>{var y=_(5329),b=_(6059),C=_(1851);p.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,N=!1,j={};try{(R=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(j,[]),N=j instanceof Array}catch{}return function(Q,$){return b(Q),C($),N?R(Q,$):Q.__proto__=$,Q}}():void 0)},5623:(p,v,_)=>{var y=_(2885),b=_(9697);p.exports=y?{}.toString:function(){return"[object "+b(this)+"]"}},9811:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(7475),R=_(941),N=y.TypeError;p.exports=function(j,Q){var $,ae;if("string"===Q&&C($=j.toString)&&!R(ae=b($,j))||C($=j.valueOf)&&!R(ae=b($,j))||"string"!==Q&&C($=j.toString)&&!R(ae=b($,j)))return ae;throw N("Can't convert object to primitive value")}},1136:(p,v,_)=>{var y=_(626),b=_(5329),C=_(946),R=_(7857),N=_(6059),j=b([].concat);p.exports=y("Reflect","ownKeys")||function(Q){var $=C.f(N(Q)),ae=R.f;return ae?j($,ae(Q)):$}},4058:p=>{p.exports={}},2:p=>{p.exports=function(v){try{return{error:!1,value:v()}}catch(_){return{error:!0,value:_}}}},6584:(p,v,_)=>{var y=_(6059),b=_(941),C=_(9520);p.exports=function(R,N){if(y(R),b(N)&&N.constructor===R)return N;var j=C.f(R);return(0,j.resolve)(N),j.promise}},8397:p=>{var v=function(){this.head=null,this.tail=null};v.prototype={add:function(_){var y={item:_,next:null};this.head?this.tail.next=y:this.head=y,this.tail=y},get:function(){var _=this.head;if(_)return this.head=_.next,this.tail===_&&(this.tail=null),_.item}},p.exports=v},7524:(p,v,_)=>{var y=_(9754);p.exports=function(b,C,R){for(var N in C)R&&R.unsafe&&b[N]?b[N]=C[N]:y(b,N,C[N],R);return b}},9754:(p,v,_)=>{var y=_(2029);p.exports=function(b,C,R,N){N&&N.enumerable?b[C]=R:y(b,C,R)}},8219:(p,v,_)=>{var y=_(1899).TypeError;p.exports=function(b){if(null==b)throw y("Can't call method on "+b);return b}},4911:(p,v,_)=>{var y=_(1899),b=Object.defineProperty;p.exports=function(C,R){try{b(y,C,{value:R,configurable:!0,writable:!0})}catch{y[C]=R}return R}},4431:(p,v,_)=>{var y=_(626),b=_(5988),C=_(9813),R=_(5746),N=C("species");p.exports=function(j){var Q=y(j);R&&Q&&!Q[N]&&(0,b.f)(Q,N,{configurable:!0,get:function(){return this}})}},904:(p,v,_)=>{var y=_(2885),b=_(5988).f,C=_(2029),R=_(953),N=_(5623),j=_(9813)("toStringTag");p.exports=function(Q,$,ae,fe){if(Q){var Ae=ae?Q:Q.prototype;R(Ae,j)||b(Ae,j,{configurable:!0,value:$}),fe&&!y&&C(Ae,"toString",N)}}},4262:(p,v,_)=>{var y=_(8726),b=_(9418),C=y("keys");p.exports=function(R){return C[R]||(C[R]=b(R))}},3030:(p,v,_)=>{var y=_(1899),b=_(4911),C="__core-js_shared__",R=y[C]||b(C,{});p.exports=R},8726:(p,v,_)=>{var y=_(2529),b=_(3030);(p.exports=function(C,R){return b[C]||(b[C]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:y?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(p,v,_)=>{var y=_(6059),b=_(174),C=_(9813)("species");p.exports=function(R,N){var j,Q=y(R).constructor;return void 0===Q||null==(j=y(Q)[C])?N:b(j)}},4620:(p,v,_)=>{var y=_(5329),b=_(2435),C=_(5803),R=_(8219),N=y("".charAt),j=y("".charCodeAt),Q=y("".slice),$=function(ae){return function(fe,Ae){var Re,tt,Tt=C(R(fe)),Mt=b(Ae),Ct=Tt.length;return Mt<0||Mt>=Ct?ae?"":void 0:(Re=j(Tt,Mt))<55296||Re>56319||Mt+1===Ct||(tt=j(Tt,Mt+1))<56320||tt>57343?ae?N(Tt,Mt):Re:ae?Q(Tt,Mt,Mt+2):tt-56320+(Re-55296<<10)+65536}};p.exports={codeAt:$(!1),charAt:$(!0)}},2941:(p,v,_)=>{var y,b,C,R,N=_(1899),j=_(9730),Q=_(6843),$=_(7475),ae=_(953),fe=_(5981),Ae=_(5463),Re=_(3765),tt=_(1333),Tt=_(2749),Mt=_(6049),Ct=N.setImmediate,Sn=N.clearImmediate,on=N.process,cn=N.Dispatch,vt=N.Function,Ge=N.MessageChannel,ot=N.String,_t=0,yn={};try{y=N.location}catch{}var Je=function(wn){if(ae(yn,wn)){var Vt=yn[wn];delete yn[wn],Vt()}},at=function(wn){return function(){Je(wn)}},Rt=function(wn){Je(wn.data)},un=function(wn){N.postMessage(ot(wn),y.protocol+"//"+y.host)};Ct&&Sn||(Ct=function(wn){var Vt=Re(arguments,1);return yn[++_t]=function(){j($(wn)?wn:vt(wn),void 0,Vt)},b(_t),_t},Sn=function(wn){delete yn[wn]},Mt?b=function(wn){on.nextTick(at(wn))}:cn&&cn.now?b=function(wn){cn.now(at(wn))}:Ge&&!Tt?(R=(C=new Ge).port2,C.port1.onmessage=Rt,b=Q(R.postMessage,R)):N.addEventListener&&$(N.postMessage)&&!N.importScripts&&y&&"file:"!==y.protocol&&!fe(un)?(b=un,N.addEventListener("message",Rt,!1)):b="onreadystatechange"in tt("script")?function(wn){Ae.appendChild(tt("script")).onreadystatechange=function(){Ae.removeChild(this),Je(wn)}}:function(wn){setTimeout(at(wn),0)}),p.exports={set:Ct,clear:Sn}},9413:(p,v,_)=>{var y=_(2435),b=Math.max,C=Math.min;p.exports=function(R,N){var j=y(R);return j<0?b(j+N,0):C(j,N)}},4529:(p,v,_)=>{var y=_(7026),b=_(8219);p.exports=function(C){return y(b(C))}},2435:p=>{var v=Math.ceil,_=Math.floor;p.exports=function(y){var b=+y;return b!=b||0===b?0:(b>0?_:v)(b)}},3057:(p,v,_)=>{var y=_(2435),b=Math.min;p.exports=function(C){return C>0?b(y(C),9007199254740991):0}},9678:(p,v,_)=>{var y=_(1899),b=_(8219),C=y.Object;p.exports=function(R){return C(b(R))}},6935:(p,v,_)=>{var y=_(1899),b=_(8834),C=_(941),R=_(6664),N=_(4229),j=_(9811),Q=_(9813),$=y.TypeError,ae=Q("toPrimitive");p.exports=function(fe,Ae){if(!C(fe)||R(fe))return fe;var Re,tt=N(fe,ae);if(tt){if(void 0===Ae&&(Ae="default"),Re=b(tt,fe,Ae),!C(Re)||R(Re))return Re;throw $("Can't convert object to primitive value")}return void 0===Ae&&(Ae="number"),j(fe,Ae)}},3894:(p,v,_)=>{var y=_(6935),b=_(6664);p.exports=function(C){var R=y(C,"string");return b(R)?R:R+""}},2885:(p,v,_)=>{var y={};y[_(9813)("toStringTag")]="z",p.exports="[object z]"===String(y)},5803:(p,v,_)=>{var y=_(1899),b=_(9697),C=y.String;p.exports=function(R){if("Symbol"===b(R))throw TypeError("Cannot convert a Symbol value to a string");return C(R)}},9826:(p,v,_)=>{var y=_(1899).String;p.exports=function(b){try{return y(b)}catch{return"Object"}}},9418:(p,v,_)=>{var y=_(5329),b=0,C=Math.random(),R=y(1..toString);p.exports=function(N){return"Symbol("+(void 0===N?"":N)+")_"+R(++b+C,36)}},2302:(p,v,_)=>{var y=_(2497);p.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(p,v,_)=>{var y=_(5746),b=_(5981);p.exports=y&&b(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(p,v,_)=>{var y=_(1899),b=_(8726),C=_(953),R=_(9418),N=_(2497),j=_(2302),Q=b("wks"),$=y.Symbol,ae=$&&$.for,fe=j?$:$&&$.withoutSetter||R;p.exports=function(Ae){if(!C(Q,Ae)||!N&&"string"!=typeof Q[Ae]){var Re="Symbol."+Ae;Q[Ae]=N&&C($,Ae)?$[Ae]:j&&ae?ae(Re):fe(Re)}return Q[Ae]}},7627:(p,v,_)=>{var y=_(6887),b=_(1899),C=_(7046),R=_(249),N=_(8929),j=_(3489),Q=_(9290),$=_(2029),ae=_(1887),fe=_(8694),Ae=_(3794),Re=_(3091),tt=_(4649),Tt=_(9813),Mt=_(8780),Ct=Tt("toStringTag"),Sn=b.Error,on=[].push,cn=function(Ge,ot){var _t,yn=arguments.length>2?arguments[2]:void 0,Je=C(vt,this);N?_t=N(new Sn,Je?R(this):vt):(_t=Je?this:Q(vt),$(_t,Ct,"Error")),void 0!==ot&&$(_t,"message",tt(ot)),Mt&&$(_t,"stack",fe(_t.stack,1)),Ae(_t,yn);var at=[];return Re(Ge,on,{that:at}),$(_t,"errors",at),_t};N?N(cn,Sn):j(cn,Sn,{name:!0});var vt=cn.prototype=Q(Sn.prototype,{constructor:ae(1,cn),message:ae(1,""),name:ae(1,"AggregateError")});y({global:!0},{AggregateError:cn})},6274:(p,v,_)=>{var y=_(4529),b=_(8479),C=_(2077),R=_(5402),N=_(5988).f,j=_(7771),Q=_(2529),$=_(5746),ae="Array Iterator",fe=R.set,Ae=R.getterFor(ae);p.exports=j(Array,"Array",function(tt,Tt){fe(this,{type:ae,target:y(tt),index:0,kind:Tt})},function(){var tt=Ae(this),Tt=tt.target,Mt=tt.kind,Ct=tt.index++;return!Tt||Ct>=Tt.length?(tt.target=void 0,{value:void 0,done:!0}):"keys"==Mt?{value:Ct,done:!1}:"values"==Mt?{value:Tt[Ct],done:!1}:{value:[Ct,Tt[Ct]],done:!1}},"values");var Re=C.Arguments=C.Array;if(b("keys"),b("values"),b("entries"),!Q&&$&&"values"!==Re.name)try{N(Re,"name",{value:"values"})}catch{}},6450:(p,v,_)=>{var y=_(6887),b=_(5746),C=_(5988).f;y({target:"Object",stat:!0,forced:Object.defineProperty!==C,sham:!b},{defineProperty:C})},5967:()=>{},4560:(p,v,_)=>{var y=_(6887),b=_(8834),C=_(4883),R=_(9520),N=_(2),j=_(3091);y({target:"Promise",stat:!0},{allSettled:function(Q){var $=this,ae=R.f($),fe=ae.resolve,Ae=ae.reject,Re=N(function(){var tt=C($.resolve),Tt=[],Mt=0,Ct=1;j(Q,function(Sn){var on=Mt++,cn=!1;Ct++,b(tt,$,Sn).then(function(vt){cn||(cn=!0,Tt[on]={status:"fulfilled",value:vt},--Ct||fe(Tt))},function(vt){cn||(cn=!0,Tt[on]={status:"rejected",reason:vt},--Ct||fe(Tt))})}),--Ct||fe(Tt)});return Re.error&&Ae(Re.value),ae.promise}})},7206:(p,v,_)=>{var y=_(6887),b=_(4883),C=_(626),R=_(8834),N=_(9520),j=_(2),Q=_(3091),$="No one promise resolved";y({target:"Promise",stat:!0},{any:function(ae){var fe=this,Ae=C("AggregateError"),Re=N.f(fe),tt=Re.resolve,Tt=Re.reject,Mt=j(function(){var Ct=b(fe.resolve),Sn=[],on=0,cn=1,vt=!1;Q(ae,function(Ge){var ot=on++,_t=!1;cn++,R(Ct,fe,Ge).then(function(yn){_t||vt||(vt=!0,tt(yn))},function(yn){_t||vt||(_t=!0,Sn[ot]=yn,--cn||Tt(new Ae(Sn,$)))})}),--cn||Tt(new Ae(Sn,$))});return Mt.error&&Tt(Mt.value),Re.promise}})},4349:(p,v,_)=>{var y=_(6887),b=_(2529),C=_(9297),R=_(5981),N=_(626),j=_(7475),Q=_(487),$=_(6584),ae=_(9754);if(y({target:"Promise",proto:!0,real:!0,forced:!!C&&R(function(){C.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Ae){var Re=Q(this,N("Promise")),tt=j(Ae);return this.then(tt?function(Tt){return $(Re,Ae()).then(function(){return Tt})}:Ae,tt?function(Tt){return $(Re,Ae()).then(function(){throw Tt})}:Ae)}}),!b&&j(C)){var fe=N("Promise").prototype.finally;C.prototype.finally!==fe&&ae(C.prototype,"finally",fe,{unsafe:!0})}},8881:(p,v,_)=>{var y,b,C,R,N=_(6887),j=_(2529),Q=_(1899),$=_(626),ae=_(8834),fe=_(9297),Ae=_(9754),Re=_(7524),tt=_(8929),Tt=_(904),Mt=_(4431),Ct=_(4883),Sn=_(7475),on=_(941),cn=_(5743),vt=_(1302),Ge=_(3091),ot=_(1385),_t=_(487),yn=_(2941).set,Je=_(6132),at=_(6584),Rt=_(4845),un=_(9520),wn=_(2),Vt=_(8397),V=_(5402),_e=_(7252),ke=_(9813),Nt=_(3321),In=_(6049),Ir=_(3385),Sr=ke("species"),xr="Promise",ji=V.getterFor(xr),kc=V.set,Aa=V.getterFor(xr),yo=fe&&fe.prototype,qi=fe,Qs=yo,Up=Q.TypeError,Wd=Q.document,Vp=Q.process,bs=un.f,vG=bs,pt=!!(Wd&&Wd.createEvent&&Q.dispatchEvent),Ee=Sn(Q.PromiseRejectionEvent),rt="unhandledrejection",Ot=!1,ft=_e(xr,function(){var On=vt(qi),qn=On!==String(qi);if(!qn&&66===Ir||j&&!Qs.finally)return!0;if(Ir>=51&&/native code/.test(On))return!1;var Ur=new qi(function(ya){ya(1)}),Qi=function(ya){ya(function(){},function(){})};return(Ur.constructor={})[Sr]=Qi,!(Ot=Ur.then(function(){})instanceof Qi)||!qn&&Nt&&!Ee}),pn=ft||!ot(function(On){qi.all(On).catch(function(){})}),nn=function(On){var qn;return!(!on(On)||!Sn(qn=On.then))&&qn},Gn=function(On,qn){var Ur,Qi,ya,Fv=qn.value,K2=1==qn.state,aw=K2?On.ok:On.fail,bj=On.resolve,A0=On.reject,y0=On.domain;try{aw?(K2||(2===qn.rejection&&Cr(qn),qn.rejection=1),!0===aw?Ur=Fv:(y0&&y0.enter(),Ur=aw(Fv),y0&&(y0.exit(),ya=!0)),Ur===On.promise?A0(Up("Promise-chain cycle")):(Qi=nn(Ur))?ae(Qi,Ur,bj,A0):bj(Ur)):A0(Fv)}catch(AG){y0&&!ya&&y0.exit(),A0(AG)}},Dr=function(On,qn){On.notified||(On.notified=!0,Je(function(){for(var Ur,Qi=On.reactions;Ur=Qi.get();)Gn(Ur,On);On.notified=!1,qn&&!On.rejection&&Tn(On)}))},Hr=function(On,qn,Ur){var Qi,ya;pt?((Qi=Wd.createEvent("Event")).promise=qn,Qi.reason=Ur,Qi.initEvent(On,!1,!0),Q.dispatchEvent(Qi)):Qi={promise:qn,reason:Ur},!Ee&&(ya=Q["on"+On])?ya(Qi):On===rt&&Rt("Unhandled promise rejection",Ur)},Tn=function(On){ae(yn,Q,function(){var qn,Ur=On.facade,Qi=On.value;if(Jn(On)&&(qn=wn(function(){In?Vp.emit("unhandledRejection",Qi,Ur):Hr(rt,Ur,Qi)}),On.rejection=In||Jn(On)?2:1,qn.error))throw qn.value})},Jn=function(On){return 1!==On.rejection&&!On.parent},Cr=function(On){ae(yn,Q,function(){var qn=On.facade;In?Vp.emit("rejectionHandled",qn):Hr("rejectionhandled",qn,On.value)})},Ci=function(On,qn,Ur){return function(Qi){On(qn,Qi,Ur)}},ls=function(On,qn,Ur){On.done||(On.done=!0,Ur&&(On=Ur),On.value=qn,On.state=2,Dr(On,!0))},uu=function(On,qn,Ur){if(!On.done){On.done=!0,Ur&&(On=Ur);try{if(On.facade===qn)throw Up("Promise can't be resolved itself");var Qi=nn(qn);Qi?Je(function(){var ya={done:!1};try{ae(Qi,qn,Ci(uu,ya,On),Ci(ls,ya,On))}catch(Fv){ls(ya,Fv,On)}}):(On.value=qn,On.state=1,Dr(On,!1))}catch(ya){ls({done:!1},ya,On)}}};if(ft&&(Qs=(qi=function(On){cn(this,Qs),Ct(On),ae(y,this);var qn=ji(this);try{On(Ci(uu,qn),Ci(ls,qn))}catch(Ur){ls(qn,Ur)}}).prototype,(y=function(On){kc(this,{type:xr,done:!1,notified:!1,parent:!1,reactions:new Vt,rejection:!1,state:0,value:void 0})}).prototype=Re(Qs,{then:function(On,qn){var Ur=Aa(this),Qi=bs(_t(this,qi));return Ur.parent=!0,Qi.ok=!Sn(On)||On,Qi.fail=Sn(qn)&&qn,Qi.domain=In?Vp.domain:void 0,0==Ur.state?Ur.reactions.add(Qi):Je(function(){Gn(Qi,Ur)}),Qi.promise},catch:function(On){return this.then(void 0,On)}}),b=function(){var On=new y,qn=ji(On);this.promise=On,this.resolve=Ci(uu,qn),this.reject=Ci(ls,qn)},un.f=bs=function(On){return On===qi||On===C?new b(On):vG(On)},!j&&Sn(fe)&&yo!==Object.prototype)){R=yo.then,Ot||(Ae(yo,"then",function(On,qn){var Ur=this;return new qi(function(Qi,ya){ae(R,Ur,Qi,ya)}).then(On,qn)},{unsafe:!0}),Ae(yo,"catch",Qs.catch,{unsafe:!0}));try{delete yo.constructor}catch{}tt&&tt(yo,Qs)}N({global:!0,wrap:!0,forced:ft},{Promise:qi}),Tt(qi,xr,!1,!0),Mt(xr),C=$(xr),N({target:xr,stat:!0,forced:ft},{reject:function(On){var qn=bs(this);return ae(qn.reject,void 0,On),qn.promise}}),N({target:xr,stat:!0,forced:j||ft},{resolve:function(On){return at(j&&this===C?qi:this,On)}}),N({target:xr,stat:!0,forced:pn},{all:function(On){var qn=this,Ur=bs(qn),Qi=Ur.resolve,ya=Ur.reject,Fv=wn(function(){var K2=Ct(qn.resolve),aw=[],bj=0,A0=1;Ge(On,function(y0){var AG=bj++,Lz=!1;A0++,ae(K2,qn,y0).then(function(Fz){Lz||(Lz=!0,aw[AG]=Fz,--A0||Qi(aw))},ya)}),--A0||Qi(aw)});return Fv.error&&ya(Fv.value),Ur.promise},race:function(On){var qn=this,Ur=bs(qn),Qi=Ur.reject,ya=wn(function(){var Fv=Ct(qn.resolve);Ge(On,function(K2){ae(Fv,qn,K2).then(Ur.resolve,Qi)})});return ya.error&&Qi(ya.value),Ur.promise}})},7971:(p,v,_)=>{var y=_(4620).charAt,b=_(5803),C=_(5402),R=_(7771),N="String Iterator",j=C.set,Q=C.getterFor(N);R(String,"String",function($){j(this,{type:N,string:b($),index:0})},function(){var $,ae=Q(this),fe=ae.string,Ae=ae.index;return Ae>=fe.length?{value:void 0,done:!0}:($=y(fe,Ae),ae.index+=$.length,{value:$,done:!1})})},7634:(p,v,_)=>{_(6274);var y=_(3281),b=_(1899),C=_(9697),R=_(2029),N=_(2077),j=_(9813)("toStringTag");for(var Q in y){var $=b[Q],ae=$&&$.prototype;ae&&C(ae)!==j&&R(ae,j,Q),N[Q]=N.Array}},1910:(p,v,_)=>{var y=_(8171);p.exports=y},7460:(p,v,_)=>{var y=_(2956);_(7634),p.exports=y},9662:(p,v,_)=>{var y=_(7854),b=_(614),C=_(6330),R=y.TypeError;p.exports=function(N){if(b(N))return N;throw R(C(N)+" is not a function")}},6077:(p,v,_)=>{var y=_(7854),b=_(614),C=y.String,R=y.TypeError;p.exports=function(N){if("object"==typeof N||b(N))return N;throw R("Can't set "+C(N)+" as a prototype")}},1223:(p,v,_)=>{var y=_(5112),b=_(30),C=_(3070),R=y("unscopables"),N=Array.prototype;null==N[R]&&C.f(N,R,{configurable:!0,value:b(null)}),p.exports=function(j){N[R][j]=!0}},9670:(p,v,_)=>{var y=_(7854),b=_(111),C=y.String,R=y.TypeError;p.exports=function(N){if(b(N))return N;throw R(C(N)+" is not an object")}},1318:(p,v,_)=>{var y=_(5656),b=_(1400),C=_(6244),R=function(N){return function(j,Q,$){var ae,fe=y(j),Ae=C(fe),Re=b($,Ae);if(N&&Q!=Q){for(;Ae>Re;)if((ae=fe[Re++])!=ae)return!0}else for(;Ae>Re;Re++)if((N||Re in fe)&&fe[Re]===Q)return N||Re||0;return!N&&-1}};p.exports={includes:R(!0),indexOf:R(!1)}},4326:(p,v,_)=>{var y=_(1702),b=y({}.toString),C=y("".slice);p.exports=function(R){return C(b(R),8,-1)}},648:(p,v,_)=>{var y=_(7854),b=_(1694),C=_(614),R=_(4326),N=_(5112)("toStringTag"),j=y.Object,Q="Arguments"==R(function(){return arguments}());p.exports=b?R:function($){var ae,fe,Ae;return void 0===$?"Undefined":null===$?"Null":"string"==typeof(fe=function(Re,tt){try{return Re[tt]}catch{}}(ae=j($),N))?fe:Q?R(ae):"Object"==(Ae=R(ae))&&C(ae.callee)?"Arguments":Ae}},7741:(p,v,_)=>{var y=_(1702)("".replace),b=String(Error("zxcasd").stack),C=/\n\s*at [^:]*:[^\n]*/,R=C.test(b);p.exports=function(N,j){if(R&&"string"==typeof N)for(;j--;)N=y(N,C,"");return N}},9920:(p,v,_)=>{var y=_(2597),b=_(3887),C=_(1236),R=_(3070);p.exports=function(N,j,Q){for(var $=b(j),ae=R.f,fe=C.f,Ae=0;Ae<$.length;Ae++){var Re=$[Ae];y(N,Re)||Q&&y(Q,Re)||ae(N,Re,fe(j,Re))}}},8544:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){function b(){}return b.prototype.constructor=null,Object.getPrototypeOf(new b)!==b.prototype})},4994:(p,v,_)=>{var y=_(3383).IteratorPrototype,b=_(30),C=_(9114),R=_(8003),N=_(7497),j=function(){return this};p.exports=function(Q,$,ae,fe){var Ae=$+" Iterator";return Q.prototype=b(y,{next:C(+!fe,ae)}),R(Q,Ae,!1,!0),N[Ae]=j,Q}},8880:(p,v,_)=>{var y=_(9781),b=_(3070),C=_(9114);p.exports=y?function(R,N,j){return b.f(R,N,C(1,j))}:function(R,N,j){return R[N]=j,R}},9114:p=>{p.exports=function(v,_){return{enumerable:!(1&v),configurable:!(2&v),writable:!(4&v),value:_}}},654:(p,v,_)=>{var y=_(2109),b=_(6916),C=_(1913),R=_(6530),N=_(614),j=_(4994),Q=_(9518),$=_(7674),ae=_(8003),fe=_(8880),Ae=_(1320),Re=_(5112),tt=_(7497),Tt=_(3383),Mt=R.PROPER,Ct=R.CONFIGURABLE,Sn=Tt.IteratorPrototype,on=Tt.BUGGY_SAFARI_ITERATORS,cn=Re("iterator"),Ge="values",ot="entries",_t=function(){return this};p.exports=function(yn,Je,at,Rt,un,wn,Vt){j(at,Je,Rt);var V,_e,ke,Nt=function(Aa){if(Aa===un&&ji)return ji;if(!on&&Aa in Sr)return Sr[Aa];switch(Aa){case"keys":case Ge:case ot:return function(){return new at(this,Aa)}}return function(){return new at(this)}},In=Je+" Iterator",Ir=!1,Sr=yn.prototype,xr=Sr[cn]||Sr["@@iterator"]||un&&Sr[un],ji=!on&&xr||Nt(un),kc="Array"==Je&&Sr.entries||xr;if(kc&&(V=Q(kc.call(new yn)))!==Object.prototype&&V.next&&(C||Q(V)===Sn||($?$(V,Sn):N(V[cn])||Ae(V,cn,_t)),ae(V,In,!0,!0),C&&(tt[In]=_t)),Mt&&un==Ge&&xr&&xr.name!==Ge&&(!C&&Ct?fe(Sr,"name",Ge):(Ir=!0,ji=function(){return b(xr,this)})),un)if(_e={values:Nt(Ge),keys:wn?ji:Nt("keys"),entries:Nt(ot)},Vt)for(ke in _e)(on||Ir||!(ke in Sr))&&Ae(Sr,ke,_e[ke]);else y({target:Je,proto:!0,forced:on||Ir},_e);return C&&!Vt||Sr[cn]===ji||Ae(Sr,cn,ji,{name:un}),tt[Je]=ji,_e}},9781:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(p,v,_)=>{var y=_(7854),b=_(111),C=y.document,R=b(C)&&b(C.createElement);p.exports=function(N){return R?C.createElement(N):{}}},8324:p=>{p.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(p,v,_)=>{var y=_(317)("span").classList,b=y&&y.constructor&&y.constructor.prototype;p.exports=b===Object.prototype?void 0:b},8113:(p,v,_)=>{var y=_(5005);p.exports=y("navigator","userAgent")||""},7392:(p,v,_)=>{var y,b,C=_(7854),R=_(8113),N=C.process,j=C.Deno,Q=N&&N.versions||j&&j.version,$=Q&&Q.v8;$&&(b=(y=$.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!b&&R&&(!(y=R.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=R.match(/Chrome\/(\d+)/))&&(b=+y[1]),p.exports=b},748:p=>{p.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(p,v,_)=>{var y=_(7293),b=_(9114);p.exports=!y(function(){var C=Error("a");return!("stack"in C)||(Object.defineProperty(C,"stack",b(1,7)),7!==C.stack)})},2109:(p,v,_)=>{var y=_(7854),b=_(1236).f,C=_(8880),R=_(1320),N=_(3505),j=_(9920),Q=_(4705);p.exports=function($,ae){var fe,Ae,Re,tt,Tt,Mt=$.target,Ct=$.global,Sn=$.stat;if(fe=Ct?y:Sn?y[Mt]||N(Mt,{}):(y[Mt]||{}).prototype)for(Ae in ae){if(tt=ae[Ae],Re=$.noTargetGet?(Tt=b(fe,Ae))&&Tt.value:fe[Ae],!Q(Ct?Ae:Mt+(Sn?".":"#")+Ae,$.forced)&&void 0!==Re){if(typeof tt==typeof Re)continue;j(tt,Re)}($.sham||Re&&Re.sham)&&C(tt,"sham",!0),R(fe,Ae,tt,$)}}},7293:p=>{p.exports=function(v){try{return!!v()}catch{return!0}}},2104:(p,v,_)=>{var y=_(4374),b=Function.prototype,C=b.apply,R=b.call;p.exports="object"==typeof Reflect&&Reflect.apply||(y?R.bind(C):function(){return R.apply(C,arguments)})},4374:(p,v,_)=>{var y=_(7293);p.exports=!y(function(){var b=function(){}.bind();return"function"!=typeof b||b.hasOwnProperty("prototype")})},6916:(p,v,_)=>{var y=_(4374),b=Function.prototype.call;p.exports=y?b.bind(b):function(){return b.apply(b,arguments)}},6530:(p,v,_)=>{var y=_(9781),b=_(2597),C=Function.prototype,R=y&&Object.getOwnPropertyDescriptor,N=b(C,"name"),j=N&&"something"===function(){}.name,Q=N&&(!y||y&&R(C,"name").configurable);p.exports={EXISTS:N,PROPER:j,CONFIGURABLE:Q}},1702:(p,v,_)=>{var y=_(4374),b=Function.prototype,R=b.call,N=y&&b.bind.bind(R,R);p.exports=y?function(j){return j&&N(j)}:function(j){return j&&function(){return R.apply(j,arguments)}}},5005:(p,v,_)=>{var y=_(7854),b=_(614),C=function(R){return b(R)?R:void 0};p.exports=function(R,N){return arguments.length<2?C(y[R]):y[R]&&y[R][N]}},8173:(p,v,_)=>{var y=_(9662);p.exports=function(b,C){var R=b[C];return null==R?void 0:y(R)}},7854:(p,v,_)=>{var y=function(b){return b&&b.Math==Math&&b};p.exports=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},2597:(p,v,_)=>{var y=_(1702),b=_(7908),C=y({}.hasOwnProperty);p.exports=Object.hasOwn||function(R,N){return C(b(R),N)}},3501:p=>{p.exports={}},490:(p,v,_)=>{var y=_(5005);p.exports=y("document","documentElement")},4664:(p,v,_)=>{var y=_(9781),b=_(7293),C=_(317);p.exports=!y&&!b(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})},8361:(p,v,_)=>{var y=_(7854),b=_(1702),C=_(7293),R=_(4326),N=y.Object,j=b("".split);p.exports=C(function(){return!N("z").propertyIsEnumerable(0)})?function(Q){return"String"==R(Q)?j(Q,""):N(Q)}:N},9587:(p,v,_)=>{var y=_(614),b=_(111),C=_(7674);p.exports=function(R,N,j){var Q,$;return C&&y(Q=N.constructor)&&Q!==j&&b($=Q.prototype)&&$!==j.prototype&&C(R,$),R}},2788:(p,v,_)=>{var y=_(1702),b=_(614),C=_(5465),R=y(Function.toString);b(C.inspectSource)||(C.inspectSource=function(N){return R(N)}),p.exports=C.inspectSource},8340:(p,v,_)=>{var y=_(111),b=_(8880);p.exports=function(C,R){y(R)&&"cause"in R&&b(C,"cause",R.cause)}},9909:(p,v,_)=>{var y,b,C,R=_(8536),N=_(7854),j=_(1702),Q=_(111),$=_(8880),ae=_(2597),fe=_(5465),Ae=_(6200),Re=_(3501),tt="Object already initialized",Tt=N.TypeError;if(R||fe.state){var Ct=fe.state||(fe.state=new(0,N.WeakMap)),Sn=j(Ct.get),on=j(Ct.has),cn=j(Ct.set);y=function(Ge,ot){if(on(Ct,Ge))throw new Tt(tt);return ot.facade=Ge,cn(Ct,Ge,ot),ot},b=function(Ge){return Sn(Ct,Ge)||{}},C=function(Ge){return on(Ct,Ge)}}else{var vt=Ae("state");Re[vt]=!0,y=function(Ge,ot){if(ae(Ge,vt))throw new Tt(tt);return ot.facade=Ge,$(Ge,vt,ot),ot},b=function(Ge){return ae(Ge,vt)?Ge[vt]:{}},C=function(Ge){return ae(Ge,vt)}}p.exports={set:y,get:b,has:C,enforce:function(Ge){return C(Ge)?b(Ge):y(Ge,{})},getterFor:function(Ge){return function(ot){var _t;if(!Q(ot)||(_t=b(ot)).type!==Ge)throw Tt("Incompatible receiver, "+Ge+" required");return _t}}}},614:p=>{p.exports=function(v){return"function"==typeof v}},4705:(p,v,_)=>{var y=_(7293),b=_(614),C=/#|\.prototype\./,R=function(ae,fe){var Ae=j[N(ae)];return Ae==$||Ae!=Q&&(b(fe)?y(fe):!!fe)},N=R.normalize=function(ae){return String(ae).replace(C,".").toLowerCase()},j=R.data={},Q=R.NATIVE="N",$=R.POLYFILL="P";p.exports=R},111:(p,v,_)=>{var y=_(614);p.exports=function(b){return"object"==typeof b?null!==b:y(b)}},1913:p=>{p.exports=!1},2190:(p,v,_)=>{var y=_(7854),b=_(5005),C=_(614),R=_(7976),N=_(3307),j=y.Object;p.exports=N?function(Q){return"symbol"==typeof Q}:function(Q){var $=b("Symbol");return C($)&&R($.prototype,j(Q))}},3383:(p,v,_)=>{var y,b,C,R=_(7293),N=_(614),j=_(30),Q=_(9518),$=_(1320),ae=_(5112),fe=_(1913),Ae=ae("iterator"),Re=!1;[].keys&&("next"in(C=[].keys())?(b=Q(Q(C)))!==Object.prototype&&(y=b):Re=!0),null==y||R(function(){var tt={};return y[Ae].call(tt)!==tt})?y={}:fe&&(y=j(y)),N(y[Ae])||$(y,Ae,function(){return this}),p.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:Re}},7497:p=>{p.exports={}},6244:(p,v,_)=>{var y=_(7466);p.exports=function(b){return y(b.length)}},133:(p,v,_)=>{var y=_(7392),b=_(7293);p.exports=!!Object.getOwnPropertySymbols&&!b(function(){var C=Symbol();return!String(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&y&&y<41})},8536:(p,v,_)=>{var y=_(7854),b=_(614),C=_(2788),R=y.WeakMap;p.exports=b(R)&&/native code/.test(C(R))},6277:(p,v,_)=>{var y=_(1340);p.exports=function(b,C){return void 0===b?arguments.length<2?"":C:y(b)}},30:(p,v,_)=>{var y,b=_(9670),C=_(6048),R=_(748),N=_(3501),j=_(490),Q=_(317),$=_(6200)("IE_PROTO"),ae=function(){},fe=function(tt){return"<script>"+tt+"<\/script>"},Ae=function(tt){tt.write(fe("")),tt.close();var Tt=tt.parentWindow.Object;return tt=null,Tt},Re=function(){try{y=new ActiveXObject("htmlfile")}catch{}var tt,Tt;Re=typeof document<"u"?document.domain&&y?Ae(y):((Tt=Q("iframe")).style.display="none",j.appendChild(Tt),Tt.src=String("javascript:"),(tt=Tt.contentWindow.document).open(),tt.write(fe("document.F=Object")),tt.close(),tt.F):Ae(y);for(var Mt=R.length;Mt--;)delete Re.prototype[R[Mt]];return Re()};N[$]=!0,p.exports=Object.create||function(tt,Tt){var Mt;return null!==tt?(ae.prototype=b(tt),Mt=new ae,ae.prototype=null,Mt[$]=tt):Mt=Re(),void 0===Tt?Mt:C.f(Mt,Tt)}},6048:(p,v,_)=>{var y=_(9781),b=_(3353),C=_(3070),R=_(9670),N=_(5656),j=_(1956);v.f=y&&!b?Object.defineProperties:function(Q,$){R(Q);for(var ae,fe=N($),Ae=j($),Re=Ae.length,tt=0;Re>tt;)C.f(Q,ae=Ae[tt++],fe[ae]);return Q}},3070:(p,v,_)=>{var y=_(7854),b=_(9781),C=_(4664),R=_(3353),N=_(9670),j=_(4948),Q=y.TypeError,$=Object.defineProperty,ae=Object.getOwnPropertyDescriptor;v.f=b?R?function(fe,Ae,Re){if(N(fe),Ae=j(Ae),N(Re),"function"==typeof fe&&"prototype"===Ae&&"value"in Re&&"writable"in Re&&!Re.writable){var tt=ae(fe,Ae);tt&&tt.writable&&(fe[Ae]=Re.value,Re={configurable:"configurable"in Re?Re.configurable:tt.configurable,enumerable:"enumerable"in Re?Re.enumerable:tt.enumerable,writable:!1})}return $(fe,Ae,Re)}:$:function(fe,Ae,Re){if(N(fe),Ae=j(Ae),N(Re),C)try{return $(fe,Ae,Re)}catch{}if("get"in Re||"set"in Re)throw Q("Accessors not supported");return"value"in Re&&(fe[Ae]=Re.value),fe}},1236:(p,v,_)=>{var y=_(9781),b=_(6916),C=_(5296),R=_(9114),N=_(5656),j=_(4948),Q=_(2597),$=_(4664),ae=Object.getOwnPropertyDescriptor;v.f=y?ae:function(fe,Ae){if(fe=N(fe),Ae=j(Ae),$)try{return ae(fe,Ae)}catch{}if(Q(fe,Ae))return R(!b(C.f,fe,Ae),fe[Ae])}},8006:(p,v,_)=>{var y=_(6324),b=_(748).concat("length","prototype");v.f=Object.getOwnPropertyNames||function(C){return y(C,b)}},5181:(p,v)=>{v.f=Object.getOwnPropertySymbols},9518:(p,v,_)=>{var y=_(7854),b=_(2597),C=_(614),R=_(7908),N=_(6200),j=_(8544),Q=N("IE_PROTO"),$=y.Object,ae=$.prototype;p.exports=j?$.getPrototypeOf:function(fe){var Ae=R(fe);if(b(Ae,Q))return Ae[Q];var Re=Ae.constructor;return C(Re)&&Ae instanceof Re?Re.prototype:Ae instanceof $?ae:null}},7976:(p,v,_)=>{var y=_(1702);p.exports=y({}.isPrototypeOf)},6324:(p,v,_)=>{var y=_(1702),b=_(2597),C=_(5656),R=_(1318).indexOf,N=_(3501),j=y([].push);p.exports=function(Q,$){var ae,fe=C(Q),Ae=0,Re=[];for(ae in fe)!b(N,ae)&&b(fe,ae)&&j(Re,ae);for(;$.length>Ae;)b(fe,ae=$[Ae++])&&(~R(Re,ae)||j(Re,ae));return Re}},1956:(p,v,_)=>{var y=_(6324),b=_(748);p.exports=Object.keys||function(C){return y(C,b)}},5296:(p,v)=>{var _={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b=y&&!_.call({1:2},1);v.f=b?function(C){var R=y(this,C);return!!R&&R.enumerable}:_},7674:(p,v,_)=>{var y=_(1702),b=_(9670),C=_(6077);p.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,N=!1,j={};try{(R=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(j,[]),N=j instanceof Array}catch{}return function(Q,$){return b(Q),C($),N?R(Q,$):Q.__proto__=$,Q}}():void 0)},2140:(p,v,_)=>{var y=_(7854),b=_(6916),C=_(614),R=_(111),N=y.TypeError;p.exports=function(j,Q){var $,ae;if("string"===Q&&C($=j.toString)&&!R(ae=b($,j))||C($=j.valueOf)&&!R(ae=b($,j))||"string"!==Q&&C($=j.toString)&&!R(ae=b($,j)))return ae;throw N("Can't convert object to primitive value")}},3887:(p,v,_)=>{var y=_(5005),b=_(1702),C=_(8006),R=_(5181),N=_(9670),j=b([].concat);p.exports=y("Reflect","ownKeys")||function(Q){var $=C.f(N(Q)),ae=R.f;return ae?j($,ae(Q)):$}},1320:(p,v,_)=>{var y=_(7854),b=_(614),C=_(2597),R=_(8880),N=_(3505),j=_(2788),Q=_(9909),$=_(6530).CONFIGURABLE,ae=Q.get,fe=Q.enforce,Ae=String(String).split("String");(p.exports=function(Re,tt,Tt,Mt){var Ct,Sn=!!Mt&&!!Mt.unsafe,on=!!Mt&&!!Mt.enumerable,cn=!!Mt&&!!Mt.noTargetGet,vt=Mt&&void 0!==Mt.name?Mt.name:tt;b(Tt)&&("Symbol("===String(vt).slice(0,7)&&(vt="["+String(vt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!C(Tt,"name")||$&&Tt.name!==vt)&&R(Tt,"name",vt),(Ct=fe(Tt)).source||(Ct.source=Ae.join("string"==typeof vt?vt:""))),Re!==y?(Sn?!cn&&Re[tt]&&(on=!0):delete Re[tt],on?Re[tt]=Tt:R(Re,tt,Tt)):on?Re[tt]=Tt:N(tt,Tt)})(Function.prototype,"toString",function(){return b(this)&&ae(this).source||j(this)})},2261:(p,v,_)=>{var y,b,C=_(6916),R=_(1702),N=_(1340),j=_(7066),Q=_(2999),$=_(2309),ae=_(30),fe=_(9909).get,Ae=_(9441),Re=_(7168),tt=$("native-string-replace",String.prototype.replace),Tt=RegExp.prototype.exec,Mt=Tt,Ct=R("".charAt),Sn=R("".indexOf),on=R("".replace),cn=R("".slice),vt=(b=/b*/g,C(Tt,y=/a/,"a"),C(Tt,b,"a"),0!==y.lastIndex||0!==b.lastIndex),Ge=Q.BROKEN_CARET,ot=void 0!==/()??/.exec("")[1];(vt||ot||Ge||Ae||Re)&&(Mt=function(_t){var yn,Je,at,Rt,un,wn,Vt,V=this,_e=fe(V),ke=N(_t),Nt=_e.raw;if(Nt)return Nt.lastIndex=V.lastIndex,yn=C(Mt,Nt,ke),V.lastIndex=Nt.lastIndex,yn;var In=_e.groups,Ir=Ge&&V.sticky,Sr=C(j,V),xr=V.source,ji=0,kc=ke;if(Ir&&(Sr=on(Sr,"y",""),-1===Sn(Sr,"g")&&(Sr+="g"),kc=cn(ke,V.lastIndex),V.lastIndex>0&&(!V.multiline||V.multiline&&"\n"!==Ct(ke,V.lastIndex-1))&&(xr="(?: "+xr+")",kc=" "+kc,ji++),Je=new RegExp("^(?:"+xr+")",Sr)),ot&&(Je=new RegExp("^"+xr+"$(?!\\s)",Sr)),vt&&(at=V.lastIndex),Rt=C(Tt,Ir?Je:V,kc),Ir?Rt?(Rt.input=cn(Rt.input,ji),Rt[0]=cn(Rt[0],ji),Rt.index=V.lastIndex,V.lastIndex+=Rt[0].length):V.lastIndex=0:vt&&Rt&&(V.lastIndex=V.global?Rt.index+Rt[0].length:at),ot&&Rt&&Rt.length>1&&C(tt,Rt[0],Je,function(){for(un=1;un<arguments.length-2;un++)void 0===arguments[un]&&(Rt[un]=void 0)}),Rt&&In)for(Rt.groups=wn=ae(null),un=0;un<In.length;un++)wn[(Vt=In[un])[0]]=Rt[Vt[1]];return Rt}),p.exports=Mt},7066:(p,v,_)=>{var y=_(9670);p.exports=function(){var b=y(this),C="";return b.global&&(C+="g"),b.ignoreCase&&(C+="i"),b.multiline&&(C+="m"),b.dotAll&&(C+="s"),b.unicode&&(C+="u"),b.sticky&&(C+="y"),C}},2999:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp,C=y(function(){var j=b("a","y");return j.lastIndex=2,null!=j.exec("abcd")}),R=C||y(function(){return!b("a","y").sticky}),N=C||y(function(){var j=b("^r","gy");return j.lastIndex=2,null!=j.exec("str")});p.exports={BROKEN_CARET:N,MISSED_STICKY:R,UNSUPPORTED_Y:C}},9441:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp;p.exports=y(function(){var C=b(".","s");return!(C.dotAll&&C.exec("\n")&&"s"===C.flags)})},7168:(p,v,_)=>{var y=_(7293),b=_(7854).RegExp;p.exports=y(function(){var C=b("(?<a>b)","g");return"b"!==C.exec("b").groups.a||"bc"!=="b".replace(C,"$<a>c")})},4488:(p,v,_)=>{var y=_(7854).TypeError;p.exports=function(b){if(null==b)throw y("Can't call method on "+b);return b}},3505:(p,v,_)=>{var y=_(7854),b=Object.defineProperty;p.exports=function(C,R){try{b(y,C,{value:R,configurable:!0,writable:!0})}catch{y[C]=R}return R}},8003:(p,v,_)=>{var y=_(3070).f,b=_(2597),C=_(5112)("toStringTag");p.exports=function(R,N,j){R&&!j&&(R=R.prototype),R&&!b(R,C)&&y(R,C,{configurable:!0,value:N})}},6200:(p,v,_)=>{var y=_(2309),b=_(9711),C=y("keys");p.exports=function(R){return C[R]||(C[R]=b(R))}},5465:(p,v,_)=>{var y=_(7854),b=_(3505),C="__core-js_shared__",R=y[C]||b(C,{});p.exports=R},2309:(p,v,_)=>{var y=_(1913),b=_(5465);(p.exports=function(C,R){return b[C]||(b[C]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:y?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(p,v,_)=>{var y=_(9303),b=Math.max,C=Math.min;p.exports=function(R,N){var j=y(R);return j<0?b(j+N,0):C(j,N)}},5656:(p,v,_)=>{var y=_(8361),b=_(4488);p.exports=function(C){return y(b(C))}},9303:p=>{var v=Math.ceil,_=Math.floor;p.exports=function(y){var b=+y;return b!=b||0===b?0:(b>0?_:v)(b)}},7466:(p,v,_)=>{var y=_(9303),b=Math.min;p.exports=function(C){return C>0?b(y(C),9007199254740991):0}},7908:(p,v,_)=>{var y=_(7854),b=_(4488),C=y.Object;p.exports=function(R){return C(b(R))}},7593:(p,v,_)=>{var y=_(7854),b=_(6916),C=_(111),R=_(2190),N=_(8173),j=_(2140),Q=_(5112),$=y.TypeError,ae=Q("toPrimitive");p.exports=function(fe,Ae){if(!C(fe)||R(fe))return fe;var Re,tt=N(fe,ae);if(tt){if(void 0===Ae&&(Ae="default"),Re=b(tt,fe,Ae),!C(Re)||R(Re))return Re;throw $("Can't convert object to primitive value")}return void 0===Ae&&(Ae="number"),j(fe,Ae)}},4948:(p,v,_)=>{var y=_(7593),b=_(2190);p.exports=function(C){var R=y(C,"string");return b(R)?R:R+""}},1694:(p,v,_)=>{var y={};y[_(5112)("toStringTag")]="z",p.exports="[object z]"===String(y)},1340:(p,v,_)=>{var y=_(7854),b=_(648),C=y.String;p.exports=function(R){if("Symbol"===b(R))throw TypeError("Cannot convert a Symbol value to a string");return C(R)}},6330:(p,v,_)=>{var y=_(7854).String;p.exports=function(b){try{return y(b)}catch{return"Object"}}},9711:(p,v,_)=>{var y=_(1702),b=0,C=Math.random(),R=y(1..toString);p.exports=function(N){return"Symbol("+(void 0===N?"":N)+")_"+R(++b+C,36)}},3307:(p,v,_)=>{var y=_(133);p.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(p,v,_)=>{var y=_(9781),b=_(7293);p.exports=y&&b(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(p,v,_)=>{var y=_(7854),b=_(2309),C=_(2597),R=_(9711),N=_(133),j=_(3307),Q=b("wks"),$=y.Symbol,ae=$&&$.for,fe=j?$:$&&$.withoutSetter||R;p.exports=function(Ae){if(!C(Q,Ae)||!N&&"string"!=typeof Q[Ae]){var Re="Symbol."+Ae;Q[Ae]=N&&C($,Ae)?$[Ae]:j&&ae?ae(Re):fe(Re)}return Q[Ae]}},9191:(p,v,_)=>{var y=_(5005),b=_(2597),C=_(8880),R=_(7976),N=_(7674),j=_(9920),Q=_(9587),$=_(6277),ae=_(8340),fe=_(7741),Ae=_(2914),Re=_(1913);p.exports=function(tt,Tt,Mt,Ct){var Sn=Ct?2:1,on=tt.split("."),cn=on[on.length-1],vt=y.apply(null,on);if(vt){var Ge=vt.prototype;if(!Re&&b(Ge,"cause")&&delete Ge.cause,!Mt)return vt;var ot=y("Error"),_t=Tt(function(yn,Je){var at=$(Ct?Je:yn,void 0),Rt=Ct?new vt(yn):new vt;return void 0!==at&&C(Rt,"message",at),Ae&&C(Rt,"stack",fe(Rt.stack,2)),this&&R(Ge,this)&&Q(Rt,this,_t),arguments.length>Sn&&ae(Rt,arguments[Sn]),Rt});if(_t.prototype=Ge,"Error"!==cn&&(N?N(_t,ot):j(_t,ot,{name:!0})),j(_t,vt),!Re)try{Ge.name!==cn&&C(Ge,"name",cn),Ge.constructor=_t}catch{}return _t}}},6992:(p,v,_)=>{var y=_(5656),b=_(1223),C=_(7497),R=_(9909),N=_(3070).f,j=_(654),Q=_(1913),$=_(9781),ae="Array Iterator",fe=R.set,Ae=R.getterFor(ae);p.exports=j(Array,"Array",function(tt,Tt){fe(this,{type:ae,target:y(tt),index:0,kind:Tt})},function(){var tt=Ae(this),Tt=tt.target,Mt=tt.kind,Ct=tt.index++;return!Tt||Ct>=Tt.length?(tt.target=void 0,{value:void 0,done:!0}):"keys"==Mt?{value:Ct,done:!1}:"values"==Mt?{value:Tt[Ct],done:!1}:{value:[Ct,Tt[Ct]],done:!1}},"values");var Re=C.Arguments=C.Array;if(b("keys"),b("values"),b("entries"),!Q&&$&&"values"!==Re.name)try{N(Re,"name",{value:"values"})}catch{}},1703:(p,v,_)=>{var y=_(2109),b=_(7854),C=_(2104),R=_(9191),N=b.WebAssembly,j=7!==Error("e",{cause:7}).cause,Q=function(ae,fe){var Ae={};Ae[ae]=R(ae,fe,j),y({global:!0,forced:j},Ae)},$=function(ae,fe){if(N&&N[ae]){var Ae={};Ae[ae]=R("WebAssembly."+ae,fe,j),y({target:"WebAssembly",stat:!0,forced:j},Ae)}};Q("Error",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("EvalError",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("RangeError",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("ReferenceError",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("SyntaxError",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("TypeError",function(ae){return function(fe){return C(ae,this,arguments)}}),Q("URIError",function(ae){return function(fe){return C(ae,this,arguments)}}),$("CompileError",function(ae){return function(fe){return C(ae,this,arguments)}}),$("LinkError",function(ae){return function(fe){return C(ae,this,arguments)}}),$("RuntimeError",function(ae){return function(fe){return C(ae,this,arguments)}})},4916:(p,v,_)=>{var y=_(2109),b=_(2261);y({target:"RegExp",proto:!0,forced:/./.exec!==b},{exec:b})},3948:(p,v,_)=>{var y=_(7854),b=_(8324),C=_(8509),R=_(6992),N=_(8880),j=_(5112),Q=j("iterator"),$=j("toStringTag"),ae=R.values,fe=function(Re,tt){if(Re){if(Re[Q]!==ae)try{N(Re,Q,ae)}catch{Re[Q]=ae}if(Re[$]||N(Re,$,tt),b[tt])for(var Tt in R)if(Re[Tt]!==R[Tt])try{N(Re,Tt,R[Tt])}catch{Re[Tt]=R[Tt]}}};for(var Ae in b)fe(y[Ae]&&y[Ae].prototype,Ae);fe(C,"DOMTokenList")}},c={};function h(p){var v=c[p];if(void 0!==v)return v.exports;var _=c[p]={exports:{}};return o[p](_,_.exports,h),_.exports}h.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return h.d(v,{a:v}),v},h.d=(p,v)=>{for(var _ in v)h.o(v,_)&&!h.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:v[_]})},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),h.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),h.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var g={};return(()=>{h.r(g),h.d(g,{AudioExtension:()=>Sn,AudioProcessor:()=>Mt,Extension:()=>Ct,Ticker:()=>cn,VideoProcessor:()=>Tt,logger:()=>Q,reporter:()=>fe});var p=h(4341);function v(vt,Ge,ot){return Ge in vt?p(vt,Ge,{value:ot,enumerable:!0,configurable:!0,writable:!0}):vt[Ge]=ot,vt}h(1703),h(6992),h(3948);var _=h(3476),y=h.n(_);function b(){let vt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,Ge=arguments.length>1?arguments[1]:void 0;const ot=Math.random().toString(16).substr(2,vt).toLowerCase();return ot.length===vt?"".concat(Ge).concat(ot):"".concat(Ge).concat(ot)+b(vt-ot.length,"")}h(4916);const C=Date.now(),R={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function N(){const vt=new Date;return vt.toTimeString().split(" ")[0]+":"+vt.getMilliseconds()}const j=vt=>{for(const Ge in R)if(Object.prototype.hasOwnProperty.call(R,Ge)&&R[Ge]===vt)return Ge;return"DEFAULT"},Q=new class{constructor(){v(this,"logLevel",R.DEBUG),v(this,"hookLog",void 0)}debug(){for(var vt=arguments.length,Ge=new Array(vt),ot=0;ot<vt;ot++)Ge[ot]=arguments[ot];const _t=[R.DEBUG].concat(Ge);this.log.apply(this,_t)}info(){for(var vt=arguments.length,Ge=new Array(vt),ot=0;ot<vt;ot++)Ge[ot]=arguments[ot];const _t=[R.INFO].concat(Ge);this.log.apply(this,_t)}warning(){for(var vt=arguments.length,Ge=new Array(vt),ot=0;ot<vt;ot++)Ge[ot]=arguments[ot];const _t=[R.WARNING].concat(Ge);this.log.apply(this,_t)}error(){for(var vt=arguments.length,Ge=new Array(vt),ot=0;ot<vt;ot++)Ge[ot]=arguments[ot];const _t=[R.ERROR].concat(Ge);this.log.apply(this,_t)}log(){for(var vt,Ge=arguments.length,ot=new Array(Ge),_t=0;_t<Ge;_t++)ot[_t]=arguments[_t];if(Date.now()-C<100)return void setTimeout(()=>{this.log(...ot)},Date.now()-C);const yn=Math.max(0,Math.min(4,ot[0]));if(ot[0]=N()+" Agora-Extension [".concat(j(yn),"]:"),yn<this.logLevel)return;const Je=N()+" %cAgora-Extension [".concat(j(yn),"]:");let at=[];switch(yn){case R.DEBUG:at=[Je,"color: #64B5F6;"].concat(ot.slice(1)),console.log.apply(console,at);break;case R.INFO:at=[Je,"color: #1E88E5; font-weight: bold;"].concat(ot.slice(1)),console.log.apply(console,at);break;case R.WARNING:at=[Je,"color: #FB8C00; font-weight: bold;"].concat(ot.slice(1)),console.warn.apply(console,at);break;case R.ERROR:at=[Je,"color: #B00020; font-weight: bold;"].concat(ot.slice(1)),console.error.apply(console,at)}null===(vt=this.hookLog)||void 0===vt||vt.call(this,yn,at)}};function $(vt,Ge){var ot=Object.keys(vt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(vt);Ge&&(_t=_t.filter(function(yn){return Object.getOwnPropertyDescriptor(vt,yn).enumerable})),ot.push.apply(ot,_t)}return ot}function ae(vt){for(var Ge=1;Ge<arguments.length;Ge++){var ot=null!=arguments[Ge]?arguments[Ge]:{};Ge%2?$(Object(ot),!0).forEach(function(_t){v(vt,_t,ot[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(ot)):$(Object(ot)).forEach(function(_t){Object.defineProperty(vt,_t,Object.getOwnPropertyDescriptor(ot,_t))})}return vt}const fe=new class{constructor(){v(this,"apiInvokeMsgQueue",[]),v(this,"hookApiInvoke",void 0)}reportApiInvoke(vt){vt.timeout=vt.timeout||6e4,vt.reportResult=void 0===vt.reportResult||vt.reportResult;const Ge=Date.now(),ot=()=>({name:vt.name,apiInvokeTime:Ge,options:vt.options});let _t=!1;var yn;(yn=vt.timeout,new(y())(at=>{window.setTimeout(at,yn)})).then(()=>{_t||(this.sendApiInvoke(ae(ae({},ot()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),Q.debug("".concat(vt.name," timeout")))});const Je=new Error("".concat(vt.name,": this api invoke is end"));return{onSuccess:at=>{if(_t)throw Je;_t=!0,this.sendApiInvoke(ae(ae({},ot()),{},{success:!0},vt.reportResult&&{result:at}))},onError:at=>{if(_t)throw at;_t=!0,this.sendApiInvoke(ae(ae({},ot()),{},{success:!1,error:at.toString()}))}}}sendApiInvoke(vt){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,vt]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(vt)}};function Ae(vt,Ge){var ot=Object.keys(vt);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(vt);Ge&&(_t=_t.filter(function(yn){return Object.getOwnPropertyDescriptor(vt,yn).enumerable})),ot.push.apply(ot,_t)}return ot}function Re(vt){for(var Ge=1;Ge<arguments.length;Ge++){var ot=null!=arguments[Ge]?arguments[Ge]:{};Ge%2?Ae(Object(ot),!0).forEach(function(_t){v(vt,_t,ot[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(ot)):Ae(Object(ot)).forEach(function(_t){Object.defineProperty(vt,_t,Object.getOwnPropertyDescriptor(ot,_t))})}return vt}class tt extends class{constructor(){v(this,"_events",{}),v(this,"addListener",this.on)}getListeners(Ge){return this._events[Ge]?this._events[Ge].map(ot=>ot.listener):[]}on(Ge,ot){this._events[Ge]||(this._events[Ge]=[]);const _t=this._events[Ge];-1===this._indexOfListener(_t,ot)&&_t.push({listener:ot,once:!1})}once(Ge,ot){this._events[Ge]||(this._events[Ge]=[]);const _t=this._events[Ge];-1===this._indexOfListener(_t,ot)&&_t.push({listener:ot,once:!0})}off(Ge,ot){if(!this._events[Ge])return;const _t=this._events[Ge],yn=this._indexOfListener(_t,ot);-1!==yn&&_t.splice(yn,1),0===this._events[Ge].length&&delete this._events[Ge]}removeAllListeners(Ge){Ge?delete this._events[Ge]:this._events={}}emit(Ge){this._events[Ge]||(this._events[Ge]=[]);const ot=this._events[Ge].map(at=>at);for(var _t=arguments.length,yn=new Array(_t>1?_t-1:0),Je=1;Je<_t;Je++)yn[Je-1]=arguments[Je];for(let at=0;at<ot.length;at+=1){const Rt=ot[at];Rt.once&&this.off(Ge,Rt.listener),Rt.listener.apply(this,yn||[])}}_indexOfListener(Ge,ot){let _t=Ge.length;for(;_t--;)if(Ge[_t].listener===ot)return _t;return-1}emitAsPromise(Ge){for(var ot=arguments.length,_t=new Array(ot>1?ot-1:0),yn=1;yn<ot;yn++)_t[yn-1]=arguments[yn];return 0===this.getListeners(Ge).length?y().reject(new Error("No promise event handler.")):new(y())((Je,at)=>{this.emit(Ge,..._t,Je,at)})}emitAsPromiseNoResponse(Ge){for(var ot=arguments.length,_t=new Array(ot>1?ot-1:0),yn=1;yn<ot;yn++)_t[yn-1]=arguments[yn];return 0===this.getListeners(Ge).length?y().resolve():new(y())((Je,at)=>{this.emit(Ge,..._t,Je,at)})}}{get enabled(){return this._enabled}output(Ge,ot){if(this.outputTrack===Ge)return;const _t=fe.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:Ge?.toString()}});this.outputTrack=Ge,this.destination&&this.destination.updateInput({track:Ge,context:ot}),_t.onSuccess()}constructor(){super(),v(this,"inputTrack",void 0),v(this,"outputTrack",void 0),v(this,"_enabled",!0),v(this,"_source",void 0),v(this,"ID",b(6,"")),v(this,"destination",void 0),v(this,"context",void 0),v(this,"name",void 0)}enable(){if(this._enabled)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});Q.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var ot;const _t=null===(ot=this.onEnableChange)||void 0===ot?void 0:ot.call(this,this._enabled);if(_t instanceof y())return _t.then(()=>{Ge.onSuccess()}).catch(yn=>{throw Ge.onError(yn),yn});Ge.onSuccess()}catch(_t){throw Ge.onError(_t),_t}}disable(){if(!this._enabled)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});Q.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var ot;const _t=null===(ot=this.onEnableChange)||void 0===ot?void 0:ot.call(this,this._enabled);if(_t instanceof y())return _t.then(()=>{Ge.onSuccess()}).catch(yn=>{throw Ge.onError(yn),yn});Ge.onSuccess()}catch(_t){throw Ge.onError(_t),_t}}}class Tt extends tt{get kind(){return"video"}pipe(Ge){const ot=fe.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ge.name}});if(this.destination===Ge)return ot.onSuccess(),Ge;if(Ge._source){const _t=new Error("Processor ".concat(Ge.name," already piped, please call unpipe beforehand."));throw ot.onError(_t),_t}return this.destination&&this.unpipe(),this.destination=Ge,Ge._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),ot.onSuccess(),Ge}unpipe(){if(!this.destination)return;const Ge=fe.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});Q.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const ot=this.destination;this.destination._source=void 0,this.destination=void 0,ot.reset()}finally{Ge.onSuccess()}}updateInput(Ge){var ot,_t;Ge.context!==this.context&&(this.context=Ge.context,null===(ot=this.onPiped)||void 0===ot||ot.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:Ge.context})),Ge.track&&this.inputTrack!==Ge.track&&(this.inputTrack=Ge.track,null===(_t=this.onTrack)||void 0===_t||_t.call(this,Ge.track,this.context))}reset(){var Ge;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(Ge=this.onUnpiped)||void 0===Ge||Ge.call(this),this.destination&&this.destination.reset()}}class Mt extends tt{constructor(){super(...arguments),v(this,"inputNode",void 0),v(this,"outputNode",void 0),v(this,"destination",void 0),v(this,"context",void 0)}get kind(){return"audio"}pipe(Ge){const ot=fe.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:Ge.name}});if(this.destination===Ge)return ot.onSuccess(),Ge;if(Ge._source){const _t=new Error("Processor ".concat(Ge.name," already piped, please call unpipe beforehand."));throw ot.onError(_t),_t}return this.destination&&this.unpipe(),this.destination=Ge,Ge._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),ot.onSuccess(),Ge}unpipe(){if(!this.destination)return;Q.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const Ge=fe.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var ot;let _t=this.destination;null===(ot=this.outputNode)||void 0===ot||ot.disconnect(),this.destination._source=void 0,this.destination=void 0,_t.reset()}finally{Ge.onSuccess()}}output(Ge,ot){if(Ge instanceof MediaStreamTrack)super.output(Ge,ot);else if(Ge instanceof AudioNode){if(this.outputNode===Ge)return;const _t=fe.reportApiInvoke({name:"".concat(this.name,".output"),options:Re(Re({},Ge instanceof MediaStreamTrack&&{track:Ge.toString()}),Ge instanceof AudioNode&&{audioNode:Ge.toString()})});this.outputNode=Ge,this.destination&&this.destination.updateInput({node:Ge,context:ot}),_t.onSuccess()}}updateInput(Ge){var ot,_t,yn;Ge.context!==this.context&&(this.context=Ge.context,null===(ot=this.onPiped)||void 0===ot||ot.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:Ge.context})),Ge.track&&this.inputTrack!==Ge.track&&(this.inputTrack=Ge.track,null===(_t=this.onTrack)||void 0===_t||_t.call(this,Ge.track,this.context)),Ge.node&&this.inputNode!==Ge.node&&(this.inputNode=Ge.node,null===(yn=this.onNode)||void 0===yn||yn.call(this,Ge.node,this.context))}reset(){var Ge;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(Ge=this.onUnpiped)||void 0===Ge||Ge.call(this),this.destination&&this.destination.reset()}}class Ct{constructor(){v(this,"__registered__",!1),v(this,"logger",Q),v(this,"reporter",fe),v(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class Sn extends Ct{}let on;class cn{get running(){return this._running}constructor(Ge,ot){if(v(this,"type",void 0),v(this,"interval",void 0),v(this,"fn",void 0),v(this,"_running",!1),v(this,"_osc",void 0),!Ge)throw new Error;if(ot<=0)throw new Error;this.type=Ge,this.interval=ot}add(Ge){this.fn=Ge}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const Ge=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&Ge()},this.interval)};Ge();break}case"RAF":{const Ge=ot=>{requestAnimationFrame(_t=>{_t-ot<this.interval?this._running&&Ge(ot):(this.fn&&this.fn(),this._running&&Ge(_t))})};Ge(performance.now());break}case"Oscillator":{on||(on=new AudioContext);const Ge=on.createGain();let ot;Ge.gain.value=0,Ge.connect(on.destination);const _t=()=>{this.fn&&this.fn(),ot&&ot.disconnect(),ot=on.createOscillator(),this._osc=ot,ot.connect(Ge),this._running&&(ot.onended=_t,ot.start(0),ot.stop(on.currentTime+this.interval/1e3))};_t();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),g})()})(KL),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(z4=HTMLCanvasElement.prototype.getContext,function(){let n=arguments;return"webgl"===n[0]&&(n=[].slice.call(arguments),n[0]="experimental-webgl"),z4.apply(null,n)}));const Nz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function j1(n){const i=new Uint8Array([99,114,121,112,116,105,105]),o=i.length,c=n,h=c.length,g=new Uint8Array(h),p=new Uint8Array(256);for(let C=0;C<256;C++)p[C]=C;let v=0;for(let C=0;C<256;C++)v=(v+p[C]+i[C%o])%256,[p[C],p[v]]=[p[v],p[C]];let _,y=0;v=0;for(let C=0;C<0+h;C++)y=(y+1)%256,v=(v+p[y])%256,[p[y],p[v]]=[p[v],p[y]],_=p[(p[y]+p[v])%256],C>=0&&(g[C-0]=c[C-0]^_);const b=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+b+"`")()}const Y4=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class q4{constructor(i,o){q(this,"program",void 0),q(this,"gl",void 0),q(this,"kernel",void 0),this.gl=i,this.kernel=o||Y4,this.program=function(c,h){const g=j1(h),p=function f2(n,i,o,c){const h=[];for(let g=0;g<i.length;++g)h.push(Xy(n,i[g],0===g?n.VERTEX_SHADER:n.FRAGMENT_SHADER));return function(g,p,v,_){const y=g.createProgram();if(!y)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(p.forEach(b=>{g.attachShader(y,b)}),v&&v.forEach((b,C)=>{g.bindAttribLocation(y,_?_[C]:C,b)}),g.linkProgram(y),!g.getProgramParameter(y,g.LINK_STATUS)){const b=g.getProgramInfoLog(y);throw g.deleteProgram(y),new Pe(Ie.WEBGL_INTERNAL_ERROR,"error in program linking:"+b)}return y}(n,h,o,c)}(c,[j1(Nz),g]);{const v=c.getAttribLocation(p,"a_position"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(v),c.vertexAttribPointer(v,2,c.FLOAT,!1,0,0)}{const v=c.getAttribLocation(p,"a_texCoord"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(v),c.vertexAttribPointer(v,2,c.FLOAT,!1,0,0)}return p}(this.gl,this.kernel)}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(i,1)}}class Vg extends q4{constructor(i,o,c,h){super(i,o),q(this,"xOffset",void 0),q(this,"yOffset",void 0),q(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/h}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),o=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(o,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(i,1)}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel)}setSize(i,o){this.xOffset=1/i,this.yOffset=1/o}}const WQ=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class KQ extends Vg{constructor(i,o,c){super(i,WQ,o,c)}}const zQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class J4 extends Vg{constructor(i,o,c){super(i,zQ,o,c)}}const YQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class qQ extends Vg{constructor(i,o,c){super(i,YQ,o,c)}}const JQ=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],XQ=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],X4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],$Q=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class ZQ extends Vg{constructor(i,o,c,h){super(i,JQ,c,h),q(this,"inputTexture",void 0),q(this,"lightLevel",.1),q(this,"rednessLevel",.5),q(this,"mskin_he_max",175/180*3.141593),q(this,"mskin_he_min",115/180*3.141593),q(this,"mskin_hc_max",173/180*3.141593),q(this,"mskin_hc_min",116/180*3.141593),q(this,"mskin_hc_axis",2.04203545),q(this,"mfacts_rotate_c",0),q(this,"mfacts_rotate_le",0),q(this,"mfacts_rotate_ge",0),q(this,"tab_addr",null),q(this,"lutTextures",[]),this.inputTexture=o,this.init()}setUniforms(){const i=this.gl.getUniformLocation(this.program,"u_flipY"),o=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(o,this.denoiseLevel),this.gl.uniform1f(i,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const h=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(h,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),p=this.gl.getUniformLocation(this.program,"skin_he_min"),v=this.gl.getUniformLocation(this.program,"skin_hc_max"),_=this.gl.getUniformLocation(this.program,"skin_hc_min"),y=this.gl.getUniformLocation(this.program,"skin_hc_axis"),b=this.gl.getUniformLocation(this.program,"facts_rotate_c"),C=this.gl.getUniformLocation(this.program,"facts_rotate_le"),R=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(p,this.mskin_he_min),this.gl.uniform1f(v,this.mskin_hc_max),this.gl.uniform1f(_,this.mskin_hc_min),this.gl.uniform1f(y,this.mskin_hc_axis),this.gl.uniform1f(b,this.mfacts_rotate_c),this.gl.uniform1f(C,this.mfacts_rotate_le),this.gl.uniform1f(R,this.mfacts_rotate_ge);const N=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(N,2);const j=["lighten_lut"],Q=[this.gl.TEXTURE3];for(let $=0;$<j.length;$++){const ae=this.gl.getUniformLocation(this.program,j[$]);this.gl.activeTexture(Q[$]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[$]),this.gl.uniform1i(ae,$+3)}}setParameters(i){void 0!==i.denoiseLevel&&(this.denoiseLevel=i.denoiseLevel),void 0!==i.lightLevel&&(this.lightLevel=i.lightLevel),void 0!==i.rednessLevel&&(this.rednessLevel=i.rednessLevel,this.updateRedness(this.rednessLevel)),i.lighteningContrastLevel&&this.updateLut(i.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(X4);const i=[this.tab_addr],o=[256],c=[1];for(let h=0;h<i.length;h++){const g=this.gl.createTexture();if(!g)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,o[h],c[h],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,i[h]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(i){let c,h,g=i,p=g;g>1&&(g=1),g<0&&(g=0),p>1&&(p=1),p<0&&(p=0),this.mfacts_rotate_c=.8*g,p<.8&&(p=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*p)/180*3.141593,this.mskin_hc_min=(116-4*p)/180*3.141593,this.mskin_hc_axis=(117-4*p)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,h=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,h=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c}updateLut(i){let o=null;if(0===i&&(o=X4),1===i&&(o=$Q),2===i&&(o=XQ),!o)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+i);this.tab_addr=new Uint8Array(o);const c=[this.tab_addr],h=[256],g=[1];for(let p=0;p<c.length;p++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[p]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,h[p],g[p],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[p])}}class eH{constructor(){q(this,"gl",null),q(this,"canvas",null),q(this,"programs",[]),q(this,"commonProgram",null),q(this,"inputTexture",null),q(this,"outputTextures",[]),q(this,"fbos",[]),q(this,"originalFrameWidth",0),q(this,"originalFrameHeight",0),q(this,"enableBeauty",!1),q(this,"denoiseLevel",5),q(this,"lightLevel",.35),q(this,"rednessLevel",.5),q(this,"lighteningContrastLevel",1)}setEnableBeauty(i){this.enableBeauty=!!i}init(i,o,c){if(!Rc().supportWebGL)throw new Pe(Ie.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(i,o),!this.inputTexture)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new q4(this.gl)),this.programs.push(new KQ(this.gl,i,o)),this.programs.push(new J4(this.gl,i,o)),this.programs.push(new qQ(this.gl,i,o)),this.programs.push(new ZQ(this.gl,this.inputTexture,i,o)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(i){if(!this.gl||!this.commonProgram||!this.canvas)return void oe.warning("video effect manager is not init!");let o=0;if(this.originalFrameHeight===i.videoWidth&&this.originalFrameWidth===i.videoHeight)o=2;else if(this.originalFrameHeight!==i.videoHeight||this.originalFrameWidth!==i.videoWidth){if(oe.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(i.videoWidth,"x").concat(i.videoHeight)),0===i.videoHeight||0===i.videoWidth)return void oe.debug("beauty effect: skip 0 resolution frame");this.canvas.width=i.videoWidth,this.canvas.height=i.videoHeight,i.setAttribute("width",i.videoWidth.toString()),i.setAttribute("height",i.videoHeight.toString()),this.release(),this.init(i.videoWidth,i.videoHeight,this.canvas)}this.gl.viewport(0,0,i.videoWidth,i.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const p=this.programs[g].program;this.gl.useProgram(p);const v=this.gl.getUniformLocation(p,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[o+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[o+g%2]),this.gl.uniform1i(v,0)}this.gl.useProgram(this.commonProgram);const h=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(h,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(i){this.programs.forEach(o=>{o instanceof Vg&&o.setParameters({denoiseLevel:i})}),this.denoiseLevel=i}setLightLevel(i){this.programs.forEach(o=>{o instanceof Vg&&o.setParameters({lightLevel:i})}),this.lightLevel=i}setRednessLevel(i){this.programs.forEach(o=>{o instanceof Vg&&o.setParameters({rednessLevel:i})}),this.rednessLevel=i}setContrastLevel(i){this.programs.forEach(o=>{o instanceof Vg&&o.setParameters({lighteningContrastLevel:i})}),this.lighteningContrastLevel=i}setSize(i,o){this.programs.forEach(c=>{c instanceof Vg&&c.setSize(i,o)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(i,o){if(!this.gl)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const h=this.gl.createTexture();if(!h)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,o,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,o,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new Pe(Ie.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,h,0),this.outputTextures.push(h),this.fbos.push(g)}this.gl.viewport(0,0,i,o),this.originalFrameWidth=i,this.originalFrameHeight=o}}class tH{constructor(){q(this,"targetFrameRate",0),q(this,"recordedFrameCount",0),q(this,"recordingTime",2),q(this,"recordID",void 0)}startRecordBeautyEffectOutput(i){var o=arguments,c=this;return L(function*(){let h=o.length>1&&void 0!==o[1]?o[1]:4;if(c.recordID)throw new Pe(Ie.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=as(6,"");return c.recordID=g,c.targetFrameRate=i,c.recordedFrameCount=0,c.recordingTime=h,yield lc(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(oe.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(oe.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class $4 extends KL.exports.VideoProcessor{constructor(){super(),q(this,"name","BeautyProcessor"),q(this,"fps",15),q(this,"canvas",void 0),q(this,"video",void 0),q(this,"manager",void 0),q(this,"overloadDetector",new tH),q(this,"stopChromeBackgroundLoop",null),q(this,"onOverload",void 0),q(this,"stopLoop",void 0),q(this,"lastRenderTime",0),this.fps=30,this.manager=new eH,this._enabled=!1}onEnableChange(i){var o=this;return L(function*(){o.manager.setEnableBeauty(i),o.context&&o.inputTrack&&(i?yield o.startEffect(o.inputTrack,o.context):yield o.stopEffect(o.inputTrack,o.context))})()}setBeautyEffectOptions(i){var o=this;return L(function*(){if(void 0!==(c=i).smoothnessLevel&&Wr(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&Wr(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&Wr(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&fa(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==i.smoothnessLevel){const c=Math.max(.1,10*i.smoothnessLevel);o.manager.setDenoiseLevel(c)}var c;if(void 0!==i.lighteningLevel){const c=Math.max(.1,i.lighteningLevel/2);o.manager.setLightLevel(c)}if(void 0!==i.rednessLevel){const c=Math.max(.01,i.rednessLevel);o.manager.setRednessLevel(c)}void 0!==i.lighteningContrastLevel&&o.manager.setContrastLevel(i.lighteningContrastLevel)})()}onTrack(i,o){var c=this;return L(function*(){var h;c.video&&c.enabled&&(null===(h=c.stopLoop)||void 0===h||h.call(c),yield c.stopEffect(i,o)),yield c.startEffect(i,o)})()}startEffect(i,o){var c=this;return L(function*(){if(!c.enabled)return;const h=Ki(),g=yield c.renderWithWebGL(i);c.output(g,o),oe.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(_=>{_||c.onOverload&&c.onOverload()});let p=!1;c.stopLoop=()=>{p=!0};const v=()=>{c.enabled&&!p&&requestAnimationFrame(v);const _=Date.now(),y=1e3/c.fps,b=c.lastRenderTime?_-c.lastRenderTime:y;b<y||(c.lastRenderTime=_-(b-y),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(v),h.name===xi.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=_V(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(i){var o=this;return L(function*(){o.canvas&&(o.canvas.remove(),o.canvas=void 0),o.video&&(o.video.remove(),o.video=void 0),o.canvas=document.createElement("canvas"),o.video=document.createElement("video"),o.video.setAttribute("autoplay",""),o.video.setAttribute("muted",""),o.video.muted=!0,o.video.setAttribute("playsinline",""),o.video.setAttribute("style","display:none"),o.video.srcObject=new MediaStream([i]);const c=new jn(_=>{const y=()=>{o.video&&o.video.removeEventListener("playing",y),_(void 0)};o.video&&o.video.addEventListener("playing",y)});o.video.play(),yield c;const h=i.getSettings(),g=h.width||o.video.videoWidth,p=h.height||o.video.videoHeight;if(h.frameRate&&o.fps!==h.frameRate&&(o.fps=h.frameRate,oe.debug("beauty video processor: set fps to",o.fps)),oe.debug("beauty video processor: width ".concat(g," height ").concat(p)),!g||!p)throw new Pe(Ie.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");o.canvas.width=g,o.canvas.height=p,o.video.setAttribute("width",g.toString()),o.video.setAttribute("height",p.toString()),o.manager.init(g,p,o.canvas);const v=Rc();return o.canvas.captureStream(v.supportRequestFrame?0:o.fps).getVideoTracks()[0]})()}stopEffect(i,o){var c=this;return L(function*(){oe.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(i,o)})()}}function zL(n){const i={};if(n.facingMode&&(i.facingMode=n.facingMode),n.cameraId&&(i.deviceId={exact:n.cameraId}),!n.encoderConfig)return i;const o=Oy(n.encoderConfig);return i.width=o.width,i.height=o.height,!k8()&&o.frameRate&&(i.frameRate=o.frameRate),Ki().name===xi.EDGE&&"object"==typeof i.frameRate&&(i.frameRate.max=60),Es()&&(i.frameRate={ideal:30,max:30}),i}function nH(n){const i={};n.screenSourceType&&(i.mediaSource=n.screenSourceType),n.extensionId&&mM()&&(i.extensionId=n.extensionId),n.electronScreenSourceId&&(i.sourceId=n.electronScreenSourceId);const o=n.encoderConfig?NM(n.encoderConfig):null;return i.mandatory={chromeMediaSource:"desktop",maxWidth:o?o.width:void 0,maxHeight:o?o.height:void 0},o&&o.frameRate&&("number"==typeof o.frameRate?(i.mandatory.maxFrameRate=o.frameRate,i.mandatory.minFrameRate=o.frameRate):(i.mandatory.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||void 0,i.mandatory.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||void 0),i.frameRate=o.frameRate),o&&o.width&&(i.width=o.width),o&&o.height&&(i.height=o.height),i}function rH(n){const i={};if(k8()||(void 0!==n.AGC&&(i.autoGainControl=n.AGC),void 0!==n.AEC&&(i.echoCancellation=n.AEC),void 0!==n.ANS&&(i.noiseSuppression=n.ANS,mM()&&n.ANS&&(i.googHighpassFilter=n.ANS))),n.encoderConfig){const o=HT(n.encoderConfig);i.channelCount=o.stereo?2:1,i.sampleRate=o.sampleRate,i.sampleSize=o.sampleSize}return n.microphoneId&&(i.deviceId={exact:n.microphoneId}),N8()&&(i.sampleRate=void 0),i}var s0,m2;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(s0||(s0={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(m2||(m2={}));var Z4,YL,e5,t5,n5,r5,qL,JL,i5,o5,s5,a5,c5,u5,g2,l5,Yi,iH,oH,sH,d5,aH,cH,Gd,uH=new class{constructor(){q(this,"_clientSize",null),q(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),q(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),q(this,"getStyle",n=>window.getComputedStyle(n,null)),q(this,"checkCssVisibleProperty",n=>{let i=!0;const o=this.getStyle(n),{display:c,visibility:h,opacity:g,filter:p}=o;return("none"===c||["hidden","collapse"].includes(h)||Number(g)<.1)&&(i=!1),!!i&&(p&&p.split(" ").filter(v=>{const _=v.split("(")[0];return["brightness","blur","opacity"].includes(_)}).map(v=>{const[_,y]=v.split(/\(|\)/);return[_,Number(y.match(/^[0-9\.]+/))]}).forEach(v=>{const[_,y]=v;switch(_){case"brightness":(y<.1||y>3)&&(i=!1);break;case"blur":y>3&&(i=!1);break;case"opacity":y<.1&&(i=!1)}}),i)}),q(this,"checkPropertyUpToAllParentNodes",(n,i)=>{let o=!0,c=!0;let g=n;for(;g&&c;)i(g)||(o=!1,c=!1),g=g.parentElement,g||(c=!1);return o}),q(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),q(this,"getSizeAboutClient",n=>{const{width:i,height:o,left:c,right:h,top:g,bottom:p}=n.getBoundingClientRect(),v=this.getClientWidth(),_=this.getClientHeight();return{width:i,height:o,left:c,right:h,top:g,bottom:p,clientWidth:v,clientHeight:_,clientMin:Math.min(v,_)}}),q(this,"checkActualSize",()=>{const{width:n,height:i,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(n,i,o)}),q(this,"elementFromPoint",(n,i)=>document.elementFromPoint?document.elementFromPoint(n,i):null),q(this,"checkCoverForAPoint",(n,i,o)=>{const c=this.elementFromPoint(n,i);return null!==c&&c!==o}),q(this,"getPointPositionList",()=>{const{width:n,height:i,left:o,top:c}=this._clientSize,h=n/6,g=i/6,p=[],v=10**6;for(let _=0;_<5;_++)for(let y=0;y<5;y++)p.push({x:(o*v+(0===_?.1:4===_?(h*_*v-1e5)/v:h*_)*v)/v,y:(c*v+(0===y?.1:4===y?(g*y*v-1e5)/v:g*y)*v)/v});return[...p]}),q(this,"checkElementCover",n=>this.getPointPositionList().map(i=>this.checkCoverForAPoint(i.x,i.y,n)).filter(i=>!!i).length>6),q(this,"checkSizeIsVisible",(n,i,o)=>(n>50||o/n<=10)&&(i>50||o/i<=10)),q(this,"checkSizeOfPartInClient",()=>{const{left:n,right:i,top:o,bottom:c,clientHeight:h,clientWidth:g,clientMin:p}=this._clientSize;let v,_,y,b;if(n<0)v=0;else{if(!(n<g))return!1;v=n}if(i<0)return!1;if(_=i<g?i:g,o<0)y=0;else{if(!(o<h))return!1;y=o}return!(c<0)&&(b=c<h?c:h,this.checkSizeIsVisible(_-v,b-y,p))}),q(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),q(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(s0.COVERED);{const i=this.checkActualSize(),o=this.checkSizeOfPartInClient();return i&&!o?this.returnHiddenResult(s0.POSITION):i?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(s0.SIZE)}}return this.returnHiddenResult(s0.STYLE)}return this.returnHiddenResult(m2.UNMOUNTED)}return this.returnHiddenResult(m2.INVALID_HTML_ELEMENT)}),q(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,i=>"HTML"!==i.nodeName.toUpperCase()?null!==i.parentElement:!!document.documentElement))}};function lH(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function a0(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?lH(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):lH(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let Os=(Z4=sc("LocalVideoTrack","getTrackId"),YL=ss(),e5=Cv("LocalVideoTrack","_enabledMutex"),t5=ss(),n5=Cv("LocalVideoTrack","_enabledMutex"),r5=ss(),qL=d1({report:Kt}),JL=ss(),i5=ss(),o5=ss(),s5=ss(),a5=ss(),c5=ss(),u5=ss(),g2=ss(),Z4((rr((Yi=class Bz extends Qx{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xs.PLAYING)}constructor(i,o,c,h,g,p){super(i,g),q(this,"trackMediaType","video"),q(this,"_player",void 0),q(this,"_videoBeautyProcessor",void 0),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"_encoderConfig",void 0),q(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),q(this,"_optimizationMode",void 0),q(this,"_videoHeight",void 0),q(this,"_videoWidth",void 0),q(this,"_forceBitrateLimit",void 0),q(this,"_enabled",!0),q(this,"processorDestination",void 0),q(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=o,this._scalabiltyMode=c,this._optimizationMode=h,this._hints=p||[],-1===this._hints.indexOf(wc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new dH(this.getTrackId()),this.processorDestination=new Q1(this.processorContext),this.bindProcessorDestinationEvents()}play(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof i?i:"HTMLElement",o]});if("string"==typeof i){const g=document.getElementById(i);g?i=g:(oe.warning("[".concat(this.getTrackId(),'] can not find "#').concat(i,'" element, use document.body')),Ln("warning",this,'can not find "#'.concat(i,'" element, use document.body')),i=document.body)}oe.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(o)),Yt("debug",this,"play",o);const h=a0(a0(a0({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:i});this._player?this._player.updateConfig(h):(this._player=new K4(h),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(Fd.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch{}},Bt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return i.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oe.debug("[".concat(this.getTrackId(),"] stop video playback")),Yt("debug",this,"stop"),i.onSuccess()}setEnabled(i,o){var c=this;return L(function*(){if(!o){if(i===c._enabled)return;c.stateCheck("enabled",i)}if(oe.info("[".concat(c.getTrackId(),"] start setEnabled"),i),Yt("info",c,"setEnabled",i),!i){c._originMediaStreamTrack.enabled=!1;try{yield Mo(c,fr.NEED_DISABLE_TRACK,c)}catch(h){throw oe.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),Yt("error",c,"setEnabled",i,h.toString()),h}return o||(c._enabled=!1),oe.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void Yt("info",c,"setEnabled",i,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Mo(c,fr.NEED_ENABLE_TRACK,c)}catch(h){throw oe.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),Yt("error",c,"setEnabled",i,h.toString()),h}oe.info("[".concat(c.getTrackId(),"] setEnabled to true success")),Yt("info",c,"setEnabled",i,"success"),o||(c._enabled=!0)})()}setMuted(i){var o=this;return L(function*(){i!==o._muted&&(o.stateCheck("muted",i),o._muted=i,o._originMediaStreamTrack.enabled=!i,oe.debug("[".concat(o.getTrackId(),"] start set muted: ").concat(i)),Yt("debug",o,"setMuted",i),i?yield Mo(o,fr.NEED_MUTE_TRACK,o):yield Mo(o,fr.NEED_UNMUTE_TRACK,o))})()}getStats(){return v1(()=>{oe.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),Ln("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),wv(this,fr.GET_STATS)||a0({},t3)}setBeautyEffect(i){var o=arguments,c=this;return L(function*(){let h=o.length>1&&void 0!==o[1]?o[1]:{};const g=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),i,h]});if(i||c._videoBeautyProcessor){if(_U()===pa.IOS||_U()===pa.ANDROID){const p=new Pe(Ie.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(p),p}if(!c._enabled&&i){const p=new Pe(Ie.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(p),p}if(oe.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),i,JSON.stringify(h)),Yt("info",c,"setBeautyEffect",[i,h]),c._videoBeautyProcessor||i){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new $4,c.processor){const p=c.processor;c.pipe(c._videoBeautyProcessor).pipe(p)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(h),i?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(p){throw oe.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),p.toString()),Yt("info",c,"setBeautyEffect",[i,h]),g.onError(p),p}oe.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),Yt("info",c,"setBeautyEffect",[i,h],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(i){var o=arguments,c=this;return L(function*(){return c._player?c._player.getCurrentFrameToUint8Array(i,o.length>1&&void 0!==o[1]?o[1]:1):yield HL(i)})()}clone(i,o,c,h){const g=this._mediaStreamTrack.clone();return new Bz(g,i,o,c,h)}setBitrateLimit(i){var o=this;return L(function*(){if(oe.debug("[".concat(o.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(i))),Yt("debug",o,"setBitrateLimit",i),i){o._forceBitrateLimit=i,o._encoderConfig&&(o._encoderConfig.bitrateMax=o._encoderConfig.bitrateMax&&o._encoderConfig.bitrateMax<i.max_bitrate?o._encoderConfig.bitrateMax:i.max_bitrate,o._encoderConfig.bitrateMin=i.min_bitrate);try{yield Mo(o,fr.NEED_UPDATE_VIDEO_ENCODER,o)}catch(c){return c.throw()}}})()}setOptimizationMode(i){var o=this;return L(function*(){if("motion"!==i&&"detail"!==i&&"balanced"!==i)return oe.error(Ie.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void Yt("error",o,"setOptimizationMode",i,Ie.INVALID_PARAMS);const c=o._optimizationMode;try{o._optimizationMode=i,yield Mo(o,fr.SET_OPTIMIZATION_MODE,o)}catch(h){throw o._optimizationMode=c,oe.error("[".concat(o.getTrackId(),"] set optimization mode failed"),h.toString()),Yt("error",o,"setOptimizationMode",i,h.toString()),h}oe.info("[".concat(o.getTrackId(),"] set optimization mode success (").concat(i,")")),Yt("info",o,"setOptimizationMode",i,"success")})()}setScalabiltyMode(i){if(1===i.numSpatialLayers&&1!==i.numTemporalLayers)return oe.error(Ie.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),Yt("error",this,"setScalabiltyMode",i,Ie.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=i,oe.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(i,")")),Yt("info",this,"setScalabiltyMode",i,"success")}updateMediaStreamTrackResolution(){k9(this._originMediaStreamTrack).then(i=>{let[o,c]=i;this._videoHeight=c,this._videoWidth=o}).catch(tL)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:i,height:o,frameRate:c}=this.getMediaStreamTrackSettings();if(!i||!o||!c)return;const[h,g]=function(p,v,_){const y=Bt("BITRATE_ADAPTER_TYPE");let b;const C=200*Math.pow(_/15,.6)*Math.pow(p*v/640/360,.75),R=C;if("STANDARD_BITRATE"===y)b=4*C;else{if("COMPATIABLE_BITRATE"!==y)return;b=2*C}return[Math.floor(b),Math.floor(R)]}(i,o,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=h,oe.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(i,", h: ").concat(o,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")),Yt("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(i,", h: ").concat(o,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var i,o;const c=null==this||null===(i=this._player)||void 0===i?void 0:i.getContainerElement(),h={track:this,element:null==this||null===(o=this._player)||void 0===o?void 0:o.getVideoElement(),slot:c?.parentElement},{element:g,slot:p}=h;if(this.isPlaying&&g instanceof HTMLVideoElement&&p instanceof HTMLElement){const v=uH.checkOneElementVisible(g),_=Object.assign({},v);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(_.visible?"Video is visible":"Invisible because of ".concat(_.reason))}return _}return}catch(c){throw new Pe(Ie.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(i){return L(function*(){})()}pipe(i){if(this._videoBeautyProcessor&&i!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(i);if(this.processor===i)return i;if(i._source)throw new Pe(Ie.INVALID_OPERATION,"Processor ".concat(i.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=i,this.processor._source=this,i.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),i}unpipe(){if(!this.processor)return;const i=this.processor;this.processor._source=void 0,this.processor=void 0,i.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var i=this;this.processorDestination.on(Ud.ON_TRACK,function(){var o=L(function*(c){c?c!==i._mediaStreamTrack&&(i._mediaStreamTrack=c,i._updatePlayerSource(),yield Mo(i,fr.NEED_REPLACE_TRACK,i)):i._mediaStreamTrack!==i._originMediaStreamTrack&&(i._mediaStreamTrack=i._originMediaStreamTrack,i._updatePlayerSource(),yield Mo(i,fr.NEED_REPLACE_TRACK,i))});return function(c){return o.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Ud.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(cl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(cl.REQUEST_CONSTRAINTS)}}).prototype,"play",[YL],Object.getOwnPropertyDescriptor(Yi.prototype,"play"),Yi.prototype),rr(Yi.prototype,"setEnabled",[e5,t5],Object.getOwnPropertyDescriptor(Yi.prototype,"setEnabled"),Yi.prototype),rr(Yi.prototype,"setMuted",[n5,r5,qL],Object.getOwnPropertyDescriptor(Yi.prototype,"setMuted"),Yi.prototype),rr(Yi.prototype,"getStats",[JL],Object.getOwnPropertyDescriptor(Yi.prototype,"getStats"),Yi.prototype),rr(Yi.prototype,"setBeautyEffect",[i5],Object.getOwnPropertyDescriptor(Yi.prototype,"setBeautyEffect"),Yi.prototype),rr(Yi.prototype,"getCurrentFrameData",[o5],Object.getOwnPropertyDescriptor(Yi.prototype,"getCurrentFrameData"),Yi.prototype),rr(Yi.prototype,"getCurrentFrameImage",[s5],Object.getOwnPropertyDescriptor(Yi.prototype,"getCurrentFrameImage"),Yi.prototype),rr(Yi.prototype,"setBitrateLimit",[a5],Object.getOwnPropertyDescriptor(Yi.prototype,"setBitrateLimit"),Yi.prototype),rr(Yi.prototype,"setOptimizationMode",[c5],Object.getOwnPropertyDescriptor(Yi.prototype,"setOptimizationMode"),Yi.prototype),rr(Yi.prototype,"setScalabiltyMode",[u5],Object.getOwnPropertyDescriptor(Yi.prototype,"setScalabiltyMode"),Yi.prototype),rr(Yi.prototype,"updateMediaStreamTrackResolution",[g2],Object.getOwnPropertyDescriptor(Yi.prototype,"updateMediaStreamTrackResolution"),Yi.prototype),l5=Yi))||l5),h5=(iH=sc("CameraVideoTrack","getTrackId"),oH=ss(),sH=Cv("CameraVideoTrack","_enabledMutex"),d5=ss(),aH=ss(),iH((rr((Gd=class extends Os{constructor(n,i,o,c,h,g){var p;super(n,i.encoderConfig?Oy(i.encoderConfig):{},c,h,g),p=this,q(this,"_config",void 0),q(this,"_originalConstraints",void 0),q(this,"_constraints",void 0),q(this,"_enabled",!0),q(this,"_deviceName","default"),q(this,"tryResumeVideoForIOS15WeChat",L(function*(){yS()&&!EU()&&D8()&&p._enabled&&!p._isClosed&&(oe.debug("[".concat(p.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield p.renewMediaStreamTrack())})),pr("info",this,"constructor",{trackId:g,deviceId:n.label,constraints:o,config:i}),this._config=i,this._originalConstraints=o,this._constraints=o,this._deviceName=n.label,this._config.encoderConfig&&(this._encoderConfig=Oy(this._config.encoderConfig)),zr.on(js.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),zr.on(js.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CAM_VIDEO_TRACK_SET_DEVICE,options:[i.getTrackId(),n]});if(oe.info("[".concat(i.getTrackId(),"] set device to ").concat(n)),Yt("info",i,"setDevice",n),i._enabled)try{const c=yield hl.getDeviceById(n),h={};h.video=a0({},i._constraints),h.video.deviceId={exact:n},h.video.facingMode=void 0,i._originMediaStreamTrack.stop();let g=null;try{g=yield ku(h,i.getTrackId())}catch(p){throw oe.error("[".concat(i.getTrackId(),"] setDevice failed"),p.toString()),Yt("error",i,"setDevice",n,p.toString()),g=yield ku({video:i._constraints},i.getTrackId()),yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),p}yield i._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),i.updateMediaStreamTrackResolution(),i._deviceName=c.label,i._config.cameraId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}else try{const c=yield hl.getDeviceById(n);i._deviceName=c.label,i._config.cameraId=n,i._constraints.deviceId={exact:n}}catch(c){throw o.onError(c),oe.error("[".concat(i.getTrackId(),"] setDevice error"),c.toString()),Yt("error",i,"setDevice",n,c.toString()),c}oe.info("[".concat(i.getTrackId(),"] setDevice success")),Yt("info",i,"setDevice",n,"success"),o.onSuccess()})()}setEnabled(n,i){var o=this;return L(function*(){if(!i){if(n===o._enabled)return;o.stateCheck("enabled",n)}if(oe.info("[".concat(o.getTrackId(),"] start setEnabled"),n),Yt("info",o,"setEnabled",n),!n){o._originMediaStreamTrack.onended=null,o._originMediaStreamTrack.stop(),i||(o._enabled=!1);try{yield Mo(o,fr.NEED_DISABLE_TRACK,o)}catch(g){throw oe.error("[".concat(o.getTrackId(),"] setEnabled to false error"),g.toString()),Yt("error",o,"setEnabled",n,g.toString()),g}return oe.info("[".concat(o.getTrackId(),"] setEnabled to false success")),void Yt("info",o,"setEnabled",n,"success")}const c=a0({},o._constraints),h=hl.searchDeviceIdByName(o._deviceName);h&&!c.deviceId&&(c.deviceId={exact:h});try{const g=yield ku({video:o._constraints},o.getTrackId());yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield Mo(o,fr.NEED_ENABLE_TRACK,o)}catch(g){throw oe.error("[".concat(o.getTrackId(),"] setEnabled true error"),g.toString()),Yt("error",o,"setEnabled",n,g.toString()),g}o.updateMediaStreamTrackResolution(),oe.info("[".concat(o.getTrackId(),"] setEnabled to true success")),Yt("info",o,"setEnabled",n,"success"),i||(o._enabled=!0)})()}setEncoderConfiguration(n,i){var o=this;return L(function*(){const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[o.getTrackId(),n]});if(!o._enabled){const p=new Pe(Ie.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(p),p}n=Oy(n),o._forceBitrateLimit&&(n.bitrateMax=o._forceBitrateLimit.max_bitrate?o._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=o._forceBitrateLimit.min_bitrate?o._forceBitrateLimit.min_bitrate:n.bitrateMin);const h=Ha(o._config);h.encoderConfig=n;const g=zL(h);(Md()||Iu()||gv())&&(g.deviceId=void 0),oe.debug("[".concat(o.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(g)),Yt("debug",o,"setEncoderConfiguration",n);try{yield o._originMediaStreamTrack.applyConstraints(g),o.updateMediaStreamTrackResolution()}catch(p){const v=new Pe(Ie.UNEXPECTED_ERROR,p.toString());throw oe.error("[".concat(o.getTrackId(),"] applyConstraints error"),v.toString()),Yt("error",o,"setEncoderConfiguration",p.toString()),c.onError(v),v}o._config=h,o._constraints=g,o._originalConstraints=g,o._encoderConfig=n,-1===o._hints.indexOf(wc.SCREEN_TRACK)&&o.updateBitrateFromProfile();try{yield Mo(o,fr.NEED_UPDATE_VIDEO_ENCODER,o)}catch(p){return c.onError(p),p.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var n=this;if((Iu()||gv())&&this._enabled&&!this._isClosed&&zr.duringInterruption){const i=function(){var o=L(function*(){zr.off(js.IOS_INTERRUPTION_END,i),n._enabled&&!n._isClosed&&(oe.debug("[".concat(n.getTrackId(),"] try capture camera media device for interrupted iOS device.")),Ln("debug",n,"try capture camera media device for interrupted iOS device."),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return o.apply(this,arguments)}}();zr.on(js.IOS_INTERRUPTION_END,i)}else oe.debug("[".concat(this.getTrackId(),"] track ended")),Bd("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Fd.TRACK_ENDED)}renewMediaStreamTrack(n){var i=this;return L(function*(){const o=n||i._constraints,c=hl.searchDeviceIdByName(i._deviceName);c&&!o.deviceId&&(o.deviceId={exact:c});const h=yield ku({video:o},i.getTrackId());i._constraints=o,yield i._updateOriginMediaStreamTrack(h.getVideoTracks()[0],!0),i.updateMediaStreamTrackResolution()})()}close(){super.close(),zr.off(js.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),zr.off(js.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var n=this;this.processorContext.on(cl.REQUEST_UPDATE_CONSTRAINTS,function(){var i=L(function*(o,c,h){try{const g=Object.assign({},n._originalConstraints,...o);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this.processorContext.on(cl.REQUEST_CONSTRAINTS,function(){var i=L(function*(o){o(n._originMediaStreamTrack.getSettings())});return function(o){return i.apply(this,arguments)}}())}}).prototype,"setDevice",[oH],Object.getOwnPropertyDescriptor(Gd.prototype,"setDevice"),Gd.prototype),rr(Gd.prototype,"setEnabled",[sH,d5],Object.getOwnPropertyDescriptor(Gd.prototype,"setEnabled"),Gd.prototype),rr(Gd.prototype,"setEncoderConfiguration",[aH],Object.getOwnPropertyDescriptor(Gd.prototype,"setEncoderConfiguration"),Gd.prototype),cH=Gd))||cH);class Q1 extends rs{constructor(i){super(),q(this,"name","VideoProcessorDestination"),q(this,"ID","0"),q(this,"_source",void 0),q(this,"videoContext",void 0),q(this,"inputTrack",void 0),this.videoContext=i}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Pe(Ie.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Pe(Ie.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(i){if(i.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");i.track&&i.track!==this.inputTrack&&(this.inputTrack=i.track,this.emit(Ud.ON_TRACK,i.track))}reset(){this.inputTrack=void 0,this.emit(Ud.ON_TRACK,void 0)}}class dH extends rs{constructor(i){super(),q(this,"constraintsMap",new Map),q(this,"statsRegistry",[]),q(this,"trackId",void 0),this.trackId=i}getConstraints(){var i=this;return L(function*(){return yield jd(i,cl.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(i,o){var c=this;return L(function*(){var h;return oe.info("processor ".concat(o.name," requestApplyConstraints for ").concat(c.trackId)),i&&c.constraintsMap.set(o,i),Mo(c,cl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ng(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(i){var o=this;return L(function*(){var c;if(o.constraintsMap.has(i))return oe.info("processor ".concat(i.name," requestRevertConstraints for ").concat(o.trackId)),o.constraintsMap.delete(i),Mo(o,cl.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ng(c=o.constraintsMap).call(c)))})()}registerStats(i,o,c){this.statsRegistry.find(h=>h.processorID===i.ID&&h.processorName===i.name&&h.type===o)||this.statsRegistry.push({processorName:i.name,processorID:i.ID,type:o,cb:c})}unregisterStats(i,o){}gatherStats(){return this.statsRegistry.map(i=>{let{processorID:o,processorName:c,type:h,cb:g}=i;return{processorID:o,processorName:c,type:h,stats:g()}})}}class _2{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(i,o){q(this,"uid",void 0),q(this,"_uintid",void 0),q(this,"_trust_in_room_",!0),q(this,"_trust_audio_enabled_state_",!0),q(this,"_trust_video_enabled_state_",!0),q(this,"_trust_audio_mute_state_",!0),q(this,"_trust_video_mute_state_",!0),q(this,"_audio_muted_",!1),q(this,"_video_muted_",!1),q(this,"_audio_enabled_",!0),q(this,"_video_enabled_",!0),q(this,"_audio_added_",!1),q(this,"_video_added_",!1),q(this,"_trust_video_stream_added_state_",!0),q(this,"_trust_audio_stream_added_state_",!0),q(this,"_audioTrack",void 0),q(this,"_videoTrack",void 0),q(this,"_audioSSRC",void 0),q(this,"_videoSSRC",void 0),q(this,"_audioOrtc",void 0),q(this,"_videoOrtc",void 0),q(this,"_cname",void 0),q(this,"_rtxSsrcId",void 0),this.uid=i,this._uintid=o}}var hH=fF,pH=A,p5=ce;ts({target:"Promise",stat:!0},{try:function(n){var i=pH.f(this),o=p5(n);return(o.error?i.reject:i.resolve)(o.value),i.promise}});var f5=hH,fH=ts,mH=Jr,gH=ps,v2=mk,_H=Dl,vH=Gu,AH=sh,m5=wS,yH=V7,EH=su,bH=pf,g5=Ns("isConcatSpreadable"),_5=9007199254740991,v5="Maximum allowed index exceeded",A5=mH.TypeError,SH=bH>=51||!gH(function(){var n=[];return n[g5]=!1,n.concat()[0]!==n}),CH=EH("concat"),IH=function(n){if(!_H(n))return!1;var i=n[g5];return void 0!==i?!!i:v2(n)};fH({target:"Array",proto:!0,forced:!SH||!CH},{concat:function(n){var i,o,c,h,g,p=vH(this),v=yH(p,0),_=0;for(i=-1,c=arguments.length;i<c;i++)if(IH(g=-1===i?p:arguments[i])){if(_+(h=AH(g))>_5)throw A5(v5);for(o=0;o<h;o++,_++)o in g&&m5(v,_,g[o])}else{if(_>=_5)throw A5(v5);m5(v,_++,g)}return v.length=_,v}});var y5={},TH=th,wH=Ol,E5=H_.f,RH=VU,b5="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];y5.f=function(n){return b5&&"Window"==TH(n)?function(i){try{return E5(i)}catch{return RH(b5)}}(n):E5(wH(n))};var H1={};H1.f=Ns;var S5=hf,DH=ws,kH=H1,NH=Wu.f,va=function(n){var i=S5.Symbol||(S5.Symbol={});DH(i,n)||NH(i,n,{value:kH.f(n)})},c0=ts,XL=Jr,PH=kl,MH=zs,G1=Gc,xH=bo,u0=Hc,$y=yA,$L=ps,Ga=ws,LH=mk,BH=Ko,FH=Dl,UH=jc,l0=dC,C5=ca,I5=Gu,A2=Ol,ZL=gf,T5=el,eB=gd,W1=Of,w5=Ys,VH=H_,R5=y5,tB=Xu,O5=lf,jH=Wu,QH=Rf,D5=df,HH=nT,nB=ev,K1=Mm.exports,k5=qA,N5=Ad,P5=Ns,GH=H1,WH=va,KH=Fl,M5=dg,y2=Q7.forEach,Xl=KA("hidden"),E2="Symbol",x5=P5("toPrimitive"),zH=M5.set,L5=M5.getterFor(E2),xp=Object.prototype,kv=XL.Symbol,Zy=kv&&kv.prototype,B5=XL.TypeError,F5=XL.QObject,z1=PH("JSON","stringify"),U5=O5.f,Nv=jH.f,b2=R5.f,Pv=D5.f,rB=xH([].push),Lp=K1("symbols"),eE=K1("op-symbols"),Y1=K1("string-to-symbol-registry"),ml=K1("symbol-to-string-registry"),V5=K1("wks"),q1=!F5||!F5.prototype||!F5.prototype.findChild,S2=u0&&$L(function(){return 7!=W1(Nv({},"a",{get:function(){return Nv(this,"a",{value:7}).a}})).a})?function(n,i,o){var c=U5(xp,i);c&&delete xp[i],Nv(n,i,o),c&&n!==xp&&Nv(xp,i,c)}:Nv,C2=function(n,i){var o=Lp[n]=W1(Zy);return zH(o,{type:E2,tag:n,description:i}),u0||(o.description=i),o},d0=function(n,i,o){n===xp&&d0(eE,i,o),C5(n);var c=ZL(i);return C5(o),Ga(Lp,c)?(o.enumerable?(Ga(n,Xl)&&n[Xl][c]&&(n[Xl][c]=!1),o=W1(o,{enumerable:eB(0,!1)})):(Ga(n,Xl)||Nv(n,Xl,eB(1,{})),n[Xl][c]=!0),S2(n,c,o)):Nv(n,c,o)},j5=function(n,i){C5(n);var o=A2(i),c=w5(o).concat(oB(o));return y2(c,function(h){u0&&!G1(Q5,o,h)||d0(n,h,o[h])}),n},Q5=function(n){var i=ZL(n),o=G1(Pv,this,i);return!(this===xp&&Ga(Lp,i)&&!Ga(eE,i))&&(!(o||!Ga(this,i)||!Ga(Lp,i)||Ga(this,Xl)&&this[Xl][i])||o)},Mv=function(n,i){var o=A2(n),c=ZL(i);if(o!==xp||!Ga(Lp,c)||Ga(eE,c)){var h=U5(o,c);return!h||!Ga(Lp,c)||Ga(o,Xl)&&o[Xl][c]||(h.enumerable=!0),h}},iB=function(n){var i=b2(A2(n)),o=[];return y2(i,function(c){Ga(Lp,c)||Ga(k5,c)||rB(o,c)}),o},oB=function(n){var i=n===xp,o=b2(i?eE:A2(n)),c=[];return y2(o,function(h){!Ga(Lp,h)||i&&!Ga(xp,h)||rB(c,Lp[h])}),c};if($y||(nB(Zy=(kv=function(){if(UH(Zy,this))throw B5("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?T5(arguments[0]):void 0,i=N5(n),o=function(c){this===xp&&G1(o,eE,c),Ga(this,Xl)&&Ga(this[Xl],i)&&(this[Xl][i]=!1),S2(this,i,eB(1,c))};return u0&&q1&&S2(xp,i,{configurable:!0,set:o}),C2(i,n)}).prototype,"toString",function(){return L5(this).tag}),nB(kv,"withoutSetter",function(n){return C2(N5(n),n)}),D5.f=Q5,jH.f=d0,QH.f=j5,O5.f=Mv,VH.f=R5.f=iB,tB.f=oB,GH.f=function(n){return C2(P5(n),n)},u0&&Nv(Zy,"description",{configurable:!0,get:function(){return L5(this).description}})),c0({global:!0,wrap:!0,forced:!$y,sham:!$y},{Symbol:kv}),y2(w5(V5),function(n){WH(n)}),c0({target:E2,stat:!0,forced:!$y},{for:function(n){var i=T5(n);if(Ga(Y1,i))return Y1[i];var o=kv(i);return Y1[i]=o,ml[o]=i,o},keyFor:function(n){if(!l0(n))throw B5(n+" is not a symbol");if(Ga(ml,n))return ml[n]},useSetter:function(){q1=!0},useSimple:function(){q1=!1}}),c0({target:"Object",stat:!0,forced:!$y,sham:!u0},{create:function(n,i){return void 0===i?W1(n):j5(W1(n),i)},defineProperty:d0,defineProperties:j5,getOwnPropertyDescriptor:Mv}),c0({target:"Object",stat:!0,forced:!$y},{getOwnPropertyNames:iB,getOwnPropertySymbols:oB}),c0({target:"Object",stat:!0,forced:$L(function(){tB.f(1)})},{getOwnPropertySymbols:function(n){return tB.f(I5(n))}}),z1&&c0({target:"JSON",stat:!0,forced:!$y||$L(function(){var n=kv();return"[null]"!=z1([n])||"{}"!=z1({a:n})||"{}"!=z1(Object(n))})},{stringify:function(n,i,o){var c=HH(arguments),h=i;if((FH(i)||void 0!==n)&&!l0(n))return LH(i)||(i=function(g,p){if(BH(h)&&(p=G1(h,this,g,p)),!l0(p))return p}),c[1]=i,MH(z1,null,c)}}),!Zy[x5]){var Pz=Zy.valueOf;nB(Zy,x5,function(n){return G1(Pz,this)})}KH(kv,E2),k5[Xl]=!0,va("asyncIterator"),va("hasInstance"),va("isConcatSpreadable"),va("iterator"),va("match"),va("matchAll"),va("replace"),va("search"),va("species"),va("split"),va("toPrimitive"),va("toStringTag"),va("unscopables"),Fl(Jr.JSON,"JSON",!0);var YH=hf.Symbol;va("asyncDispose"),va("dispose"),va("matcher"),va("metadata"),va("observable"),va("patternMatch"),va("replaceAll");var sB=YH,aB=H1.f("asyncIterator");function cB(n){this.wrapped=n}function tE(n){var i,o;function c(g,p){try{var v=n[g](p),_=v.value,y=_ instanceof cB;f5.resolve(y?_.wrapped:_).then(function(b){y?c("return"===g?"return":"next",b):h(v.done?"return":"normal",b)},function(b){c("throw",b)})}catch(b){h("throw",b)}}function h(g,p){switch(g){case"return":i.resolve({value:p,done:!0});break;case"throw":i.reject(p);break;default:i.resolve({value:p,done:!1})}(i=i.next)?c(i.key,i.arg):o=null}this._invoke=function(g,p){return new f5(function(v,_){var y={key:g,arg:p,resolve:v,reject:_,next:null};o?o=o.next=y:(i=o=y,c(g,p))})},"function"!=typeof n.return&&(this.return=void 0)}function J1(n){return function(){return new tE(n.apply(this,arguments))}}function cs(n){return new cB(n)}tE.prototype["function"==typeof sB&&aB||"@@asyncIterator"]=function(){return this},tE.prototype.next=function(n){return this._invoke("next",n)},tE.prototype.throw=function(n){return this._invoke("throw",n)},tE.prototype.return=function(n){return this._invoke("return",n)};var qH=H1.f("iterator");function I2(n,i){var o={},c=!1;function h(g,p){return c=!0,p=new f5(function(v){v(n[g](p))}),{done:!1,value:i(p)}}return o[void 0!==sB&&qH||"@@iterator"]=function(){return this},o.next=function(g){return c?(c=!1,g):h("next",g)},"function"==typeof n.throw&&(o.throw=function(g){if(c)throw c=!1,g;return h("throw",g)}),"function"==typeof n.return&&(o.return=function(g){return c?(c=!1,g):h("return",g)}),o}var T2=aB,w2=pc,h0=re,jg=Wa,O2=Lr,JH=Da,X1=ri.f,G5=Si,Qg=H.Symbol,xv=Qg&&Qg.prototype;if(O&&nt(Qg)&&(!("description"in xv)||void 0!==Qg().description)){var Hg={},$1=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:JH(arguments[0]),i=O2(xv,this)?new Qg(n):void 0===n?Qg():Qg(n);return""===n&&(Hg[i]=!0),i};G5($1,Qg),$1.prototype=xv,xv.constructor=$1;var W5="Symbol(test)"==String(Qg("test")),em=h0(xv.toString),nE=h0(xv.valueOf),Z1=/^Symbol\((.*)\)[^)]+$/,XH=h0("".replace),lB=h0("".slice);X1(xv,"description",{configurable:!0,get:function(){var n=nE(this),i=em(n);if(jg(Hg,n))return"";var o=W5?lB(i,7,-1):XH(i,Z1,"$1");return""===o?void 0:o}}),w2({global:!0,forced:!0},{Symbol:$1})}var $l={exports:{}};function p0(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function ew(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?p0(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):p0(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function dB(n,i,o,c,h,g){let p=[],v=[],_=[],y=[],b=!1,C=!1;if($l.exports.parse(n).mediaDescriptions.forEach(R=>{g&&g!==R.attributes.direction||("video"!==R.media.mediaType||b||(v=R.attributes.payloads,y=R.attributes.extmaps,b=!0),"audio"!==R.media.mediaType||C||(p=R.attributes.payloads,_=R.attributes.extmaps,C=!0))}),!y||0===v.length)throw new Error("Cannot get video capabilities from SDP.");if(!_||0===p.length)throw new Error("Cannot get audio capabilities from SDP.");return v.forEach(R=>{var N;null!==(N=R.rtpMap)&&void 0!==N&&N.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),p.forEach(R=>{var N;null!==(N=R.rtpMap)&&void 0!==N&&N.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),i&&(p=p.filter(R=>{var N;return"rtx"!==(null===(N=R.rtpMap)||void 0===N?void 0:N.encodingName.toLowerCase())}),v=v.filter(R=>{var N;return"rtx"!==(null===(N=R.rtpMap)||void 0===N?void 0:N.encodingName.toLowerCase())})),o&&(v=v.filter(R=>{var N;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(N=R.rtpMap)||void 0===N?void 0:N.encodingName)||"")})),c&&c?.length>0&&(p=p.filter(R=>{var N;return c.includes((null===(N=R.rtpMap)||void 0===N?void 0:N.encodingName.toLowerCase())||"")})),h&&h?.length>0&&(v=v.filter(R=>{var N;return h.includes((null===(N=R.rtpMap)||void 0===N?void 0:N.encodingName.toLowerCase())||"")})),{audioCodecs:p,videoCodecs:v,audioExtensions:_,videoExtensions:y}}function f0(n){const i=$l.exports.parse(n);let o,c;for(const h of i.mediaDescriptions){if(!o){const g=h.attributes.iceUfrag,p=h.attributes.icePwd;if(!g||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:g,icePwd:p}}if(!c){const g=h.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&i.attributes.fingerprints.length>0&&(c={fingerprints:i.attributes.fingerprints}),!c||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:c}}function K5(n,i,o){const{cname:c}=n;let h;void 0!==i&&void 0!==o?(h=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:i,port:o.toString(),type:"host",extension:{}}],oe.debug("Using remote candidate from AP ".concat(i,":").concat(o)),Ln("debug",[],"Using remote candidate from AP ".concat(i,":").concat(o))):h=n.iceParameters.candidates.map(_=>({foundation:_.foundation,componentId:"1",transport:_.protocol,priority:_.priority.toString(),connectionAddress:_.ip,port:_.port.toString(),type:_.type,extension:{}}));const g={fingerprints:n.dtlsParameters.fingerprints.map(_=>({hashFunction:_.algorithm,fingerprint:_.fingerprint}))},p={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let v;switch(n.dtlsParameters.role){case"server":v="passive";break;case"client":v="active";break;case"auto":v="actpass"}return{dtlsParameters:g,iceParameters:p,candidates:h,rtpCapabilities:z5(n.rtpCapabilities),setup:v,cname:c}}function m0(n,i,o){const c=[],h=[];return n.forEach(g=>{let{ssrcId:p,rtx:v}=g;const _=as(8,"track-"),y={ssrcId:p,attributes:ew({label:_,mslabel:o=o||as(10,""),msid:"".concat(o," ").concat(_)},i&&{cname:i})};if(c.push(y),void 0!==v){const b={ssrcId:v,attributes:ew({label:_,mslabel:o,msid:"".concat(o," ").concat(_)},i&&{cname:i})};c.push(b),h.push({semantic:"FID",ssrcIds:[p,v]})}}),n.length>1&&h.push({semantic:"SIM",ssrcIds:n.map(g=>{let{ssrcId:p}=g;return p})}),{ssrcs:c,ssrcGroups:h}}function D2(n,i){i instanceof Qa&&n.attributes.payloads.forEach(o=>{var c;const h=null===(c=o.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!h||-1===["opus","pcmu","pcma","g722"].indexOf(h))return;o.fmtp||(o.fmtp={parameters:{}}),o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const g=i._encoderConfig;g&&("pcmu"!==h&&"pcma"!==h&&"g722"!==h&&(g.bitrate&&!Es()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate))),g.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1"))})}function Zl(n){const i=n.attributes.unrecognized.findIndex(o=>"x-google-flag"===o.attField&&"conference"===o.attValue);-1!==i&&n.attributes.unrecognized.splice(i,1)}function hB(n,i){if(!(i instanceof Os&&i._encoderConfig&&-1===i._hints.indexOf(wc.SCREEN_TRACK)))return;const o=i._encoderConfig;Rc().supportMinBitrate&&o.bitrateMin&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(o.bitrateMin))}),Rc().supportMinBitrate&&!i._hints.includes(wc.LOW_STREAM)&&o.bitrateMax&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(Bt("X_GOOGLE_START_BITRATE")||Math.floor(o.bitrateMax)))})}function tw(n,i,o){if(!i)return;let c,h;if("video"===n.media.mediaType?(c=o.videoExtensions,h=o.videoCodecs):(c=o.audioExtensions,h=o.audioCodecs),!0===i.tcc){const g=c.find(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName);g&&(n.attributes.extmaps.find(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(p=h,v=n.attributes.payloads,v.filter(_=>!!p.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(b=>"transport-cc"===b.type)))).forEach(p=>{p.rtcpFeedbacks.find(v=>"transport-cc"===v.type)||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===i.tcc){const g=n.attributes.extmaps.findIndex(p=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===p.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(_=>"transport-cc"===_.type);-1!==v&&p.rtcpFeedbacks.splice(v,1)})}var p,v;if(!0===i.remb){const g=c.find(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName);g&&(n.attributes.extmaps.find(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,v){return v.filter(_=>!!p.find(y=>y.payloadType===_.payloadType&&!!y.rtcpFeedbacks.find(b=>"goog-remb"===b.type)))}(h,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>"goog-remb"===v.type)||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===i.remb){const g=n.attributes.extmaps.findIndex(p=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===p.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(_=>"goog-remb"===_.type);-1!==v&&p.rtcpFeedbacks.splice(v,1)})}}function rE(n,i,o,c,h,g){if("videoExtensions"===o||"audioExtensions"===o){const p=[];return n[o].forEach(v=>{i[o].some((_,y)=>{if(v.entry===_.entry&&v.extensionName===_.extensionName)return p.push(y),!0})?g[o].push(v):c[o].push(v)}),void i[o].forEach((v,_)=>{-1===p.indexOf(_)&&h[o].push(v)})}if("videoCodecs"===o||"audioCodecs"===o){const p=[];return n[o].forEach(v=>{i[o].some((_,y)=>{if(v.payloadType===_.payloadType&&JSON.stringify(v)===JSON.stringify(_))return p.push(y),!0})?g[o].push(v):c[o].push(v)}),void i[o].forEach((v,_)=>{-1===p.indexOf(_)&&h[o].push(v)})}}function z5(n){const{send:i,recv:o,sendrecv:c}=n;if(!c){if(!i||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:i,recv:o}}let h,g;return i?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...i.audioCodecs,...c.audioCodecs],h.videoCodecs=[...i.videoCodecs,...c.videoCodecs],h.audioExtensions=[...i.audioExtensions,...c.audioExtensions],h.videoExtensions=[...i.videoExtensions,...c.videoExtensions]):h=c,o?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...o.audioCodecs,...c.audioCodecs],g.videoCodecs=[...o.videoCodecs,...c.videoCodecs],g.audioExtensions=[...o.audioExtensions,...c.audioExtensions],g.videoExtensions=[...o.videoExtensions,...c.videoExtensions]):g=c,{send:h,recv:g}}!function(n,i){n.exports=(()=>{var o={8:(g,p,v)=>{v.r(p),v.d(p,{Parser:()=>cn,Printer:()=>yn,parse:()=>un,print:()=>wn});const _="\n",y="".concat("\r").concat(_),b=" ";let C;function R(Vt){return Vt>="0"&&Vt<="9"}function N(Vt){return Vt>="!"&&Vt<="~"}function j(Vt){return N(Vt)||Vt>="\x80"&&Vt<="\xff"}function Q(Vt){return"!"===Vt||Vt>="#"&&Vt<="'"||Vt>="*"&&Vt<="+"||Vt>="-"&&Vt<="."||Vt>="0"&&Vt<="9"||Vt>="A"&&Vt<="Z"||Vt>="^"&&Vt<="~"}function $(Vt){return Vt>="1"&&Vt<="9"}function ae(Vt){return Vt>="A"&&Vt<="Z"||Vt>="a"&&Vt<="z"}function fe(Vt){return"d"===Vt||"h"===Vt||"m"===Vt||"s"===Vt}function Ae(Vt){return Vt>"\x01"&&Vt<"\t"||Vt>"\v"&&Vt<"\f"||Vt>"\x0e"&&Vt<"\xff"}function Re(Vt){return ae(Vt)||R(Vt)||"+"===Vt||"/"===Vt}function tt(Vt){return R(Vt)||ae(Vt)||"+"===Vt||"/"===Vt||"-"===Vt||"_"===Vt}function Tt(Vt){return ae(Vt)||R(Vt)||"+"===Vt||"/"===Vt}function Mt(Vt,V){var _e=Object.keys(Vt);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Vt);V&&(ke=ke.filter(function(Nt){return Object.getOwnPropertyDescriptor(Vt,Nt).enumerable})),_e.push.apply(_e,ke)}return _e}function Ct(Vt){for(var V=1;V<arguments.length;V++){var _e=null!=arguments[V]?arguments[V]:{};V%2?Mt(Object(_e),!0).forEach(function(ke){Sn(Vt,ke,_e[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(_e)):Mt(Object(_e)).forEach(function(ke){Object.defineProperty(Vt,ke,Object.getOwnPropertyDescriptor(_e,ke))})}return Vt}function Sn(Vt,V,_e){return V in Vt?Object.defineProperty(Vt,V,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Vt[V]=_e,Vt}var Vt;(Vt=C||(C={})).VERSION="v",Vt.ORIGIN="o",Vt.SESSION_NAME="s",Vt.INFORMATION="i",Vt.URI="u",Vt.EMAIL="e",Vt.PHONE="p",Vt.CONNECTION="c",Vt.BANDWIDTH="b",Vt.TIME="t",Vt.REPEAT="r",Vt.ZONE_ADJUSTMENTS="z",Vt.KEY="k",Vt.ATTRIBUTE="a",Vt.MEDIA="m";class on{consumeText(V,_e){let ke=_e;for(;ke<V.length;){const Nt=V[ke];if("\0"===Nt||"\r"===Nt||Nt===_)break;ke+=1}if(ke-_e==0)throw new Error("Invalid text, at ".concat(V));return ke}consumeUnicastAddress(V,_e,ke){return this.consumeTill(V,_e,b)}consumeOneOrMore(V,_e,ke){let Nt=_e;for(;ke(V[Nt]);)Nt++;if(Nt-_e==0)throw new Error("Invalid rule at ".concat(_e,"."));return Nt}consumeSpace(V,_e){if(V[_e]===b)return _e+1;throw new Error("Invalid space at ".concat(_e,"."))}consumeIP4Address(V,_e){let ke=_e;for(let Nt=0;Nt<4;Nt++)if(ke=this.consumeDecimalUChar(V,ke),3!==Nt){if("."!==V[ke])throw new Error("Invalid IP4 address.");ke++}return ke}consumeDecimalUChar(V,_e){let ke=_e;for(let In=0;In<3&&R(V[ke]);In++,ke++);if(ke-_e==0)throw new Error("Invalid decimal uchar.");const Nt=parseInt(V.slice(_e,ke));if(Nt>=0&&Nt<=255)return ke;throw new Error("Invalid decimal uchar")}consumeIP6Address(V,_e){let ke=this.consumeHexpart(V,_e);return":"===V[ke]&&(ke+=1,ke=this.consumeIP4Address(V,ke)),ke}consumeHexpart(V,_e){let ke=_e;if(":"===V[ke]&&":"===V[ke+1]){ke+=2;try{ke=this.consumeHexseq(V,ke)}catch{}return ke}if(ke=this.consumeHexseq(V,ke),":"===V[ke]&&":"===V[ke+1]){ke+=2;try{ke=this.consumeHexseq(V,ke)}catch{}return ke}return ke}consumeHexseq(V,_e){let ke=_e;for(;ke=this.consumeHex4(V,ke),":"===V[ke]&&":"!==V[ke+1];)ke+=1;return ke}consumeHex4(V,_e){let ke=0;for(;ke<4;ke++)if(!((Nt=V[_e+ke])>="0"&&Nt<="9"||Nt>="a"&&Nt<="f"||Nt>="A"&&Nt<="F")){if(0===ke)throw new Error("Invalid hex 4");break}var Nt;return _e+ke}consumeFQDN(V,_e){let ke=_e;for(;R(V[ke])||ae(V[ke])||"-"===V[ke]||"."===V[ke];)ke+=1;if(ke-_e<4)throw new Error("Invalid FQDN");return ke}consumeExtnAddr(V,_e){return this.consumeOneOrMore(V,_e,j)}consumeMulticastAddress(V,_e,ke){switch(ke){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(V,_e);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(V,_e);default:try{return this.consumeFQDN(V,_e)}catch{return this.consumeExtnAddr(V,_e)}}}consumeIP6MulticastAddress(V,_e){const ke=this.consumeHexpart(V,_e);return"/"===V[ke]?this.consumeInteger(V,ke+1):ke}consumeIP4MulticastAddress(V,_e){let ke=_e+3;const Nt=V.slice(_e,ke),In=parseInt(Nt);if(In<224||In>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Ir=0;Ir<3;Ir++){if("."!==V[ke])throw new Error("Invalid IP4 multicast address.");ke+=1,ke=this.consumeDecimalUChar(V,ke)}return"/"===V[ke]&&(ke+=1),ke=this.consumeTTL(V,ke),"/"===V[ke]&&(ke=this.consumeInteger(V,ke)),ke}consumeInteger(V,_e){if(!$(V[_e]))throw new Error("Invalid integer.");for(_e+=1;R(V[_e]);)_e+=1;return _e}consumeTTL(V,_e){if("0"===V[_e])return _e+1;if(!$(V[_e]))throw new Error("Invalid TTL.");_e+=1;for(let ke=0;ke<2&&R(V[_e]);ke++)_e+=1;return _e}consumeToken(V,_e){return this.consumeOneOrMore(V,_e,Q)}consumeTime(V,_e){let ke=_e;if("0"===V[ke])return ke+1;for($(V[ke])&&(ke+=1);R(V[ke]);)ke++;if(ke-_e<10)throw new Error("Invalid time");return ke}consumeAddress(V,_e){return this.consumeTill(V,_e,b)}consumeTypedTime(V,_e){let ke=_e;return ke=this.consumeOneOrMore(V,ke,R),fe(V[ke])?ke+1:ke}consumeRepeatInterval(V,_e){if(!$(V[_e]))throw new Error("Invalid repeat interval");for(_e+=1;R(V[_e]);)_e+=1;return fe(V[_e])&&(_e+=1),_e}consumePort(V,_e){return this.consumeOneOrMore(V,_e,R)}consume(V,_e,ke){for(let Nt=0;Nt<ke.length;Nt++){if(_e+Nt>=V.length)throw new Error("consume exceeding value length");if(V[_e+Nt]!==ke[Nt])throw new Error("consume ".concat(ke," failed at ").concat(Nt))}return _e+ke.length}consumeTill(V,_e,ke){let Nt=_e;for(;Nt<V.length&&("string"!=typeof ke||V[Nt]!==ke)&&("function"!=typeof ke||!ke(V[Nt]));)Nt++;return Nt}}class cn extends on{constructor(){super(),Sn(this,"records",[]),Sn(this,"currentLine",0)}parse(V){const _e=this.probeEOL(V);this.records=V.split(_e).filter(Wd=>!!Wd.trim()).map(this.parseLine),this.currentLine=0;const ke=this.parseVersion(),Nt=this.parseOrigin(),In=this.parseSessionName(),Ir=this.parseInformation(),Sr=this.parseUri(),xr=this.parseEmail(),ji=this.parsePhone(),kc=this.parseConnection(),Aa=this.parseBandWidth(),yo=this.parseTimeFields(),qi=this.parseKey(),Qs=this.parseSessionAttribute(),Up=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:ke,origin:Nt,sessionName:In,information:Ir,uri:Sr,emails:xr,phones:ji,connection:kc,bandwidths:Aa,timeFields:yo,key:qi,attributes:Qs,mediaDescriptions:Up}}getCurrentRecord(){const V=this.records[this.currentLine];if(!V)throw new Error("Record doesn't exit.");return V}probeEOL(V){for(let _e=0;_e<V.length;_e++)if(V[_e]===_)return"\r"===V[_e-1]?y:_;throw new Error("Invalid newline character.")}parseLine(V,_e){if(V.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const ke=V[0];if("="!==V[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:ke,value:V.slice(2),line:_e,cur:0}}parseSessionAttribute(){const V=new Ge;for(;this.currentLine<this.records.length;){const _e=this.getCurrentRecord();if(_e.type!==C.ATTRIBUTE)break;const ke={attField:this.extractOneOrMore(_e,Nt=>Q(Nt)&&":"!==Nt),_cur:0};":"===_e.value[_e.cur]&&(_e.cur+=1,ke.attValue=this.extractOneOrMore(_e,Ae)),V.parse(ke),this.currentLine++}return V.digest()}parseMediaAttributes(V){const _e=new ot(V);for(;this.currentLine<this.records.length;){const ke=this.getCurrentRecord();if(ke.type!==C.ATTRIBUTE)break;const Nt={attField:this.extractOneOrMore(ke,In=>Q(In)&&":"!==In),_cur:0};":"===ke.value[ke.cur]&&(ke.cur+=1,Nt.attValue=this.extractOneOrMore(ke,Ae)),_e.parse(Nt),this.currentLine++}return _e.digest()}parseKey(){const V=this.getCurrentRecord();if(V.type===C.KEY){if("prompt"===V.value||"clear:"===V.value||"base64:"===V.value||"uri:"===V.value)return V.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const V=this.getCurrentRecord();if(V.type===C.ZONE_ADJUSTMENTS){const _e=[];for(;;)try{const ke=this.extract(V,this.consumeTime);this.consumeSpaceForRecord(V);let Nt=!1;"-"===V.value[V.cur]&&(Nt=!0,V.cur+=1);const In=this.extract(V,this.consumeTypedTime);_e.push({time:ke,typedTime:In,back:Nt})}catch{break}if(0===_e.length)throw new Error("Invalid zone adjustments");return this.currentLine++,_e}return[]}parseRepeat(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.REPEAT)break;{const ke=this.extract(_e,this.consumeRepeatInterval),Nt=this.parseTypedTime(_e);V.push({repeatInterval:ke,typedTimes:Nt}),this.currentLine++}}return V}parseTypedTime(V){const _e=[];for(;;)try{this.consumeSpaceForRecord(V),_e.push(this.extract(V,this.consumeTypedTime))}catch{break}if(0===_e.length)throw new Error("Invalid typed time.");return _e}parseTime(){const V=this.getCurrentRecord(),_e=this.extract(V,this.consumeTime);this.consumeSpaceForRecord(V);const ke=this.extract(V,this.consumeTime);return this.currentLine++,{startTime:_e,stopTime:ke}}parseBandWidth(){const V=[];for(;this.currentLine<this.records.length;){const _e=this.getCurrentRecord();if(_e.type!==C.BANDWIDTH)break;{const ke=this.extractOneOrMore(_e,Q);if(":"!==_e.value[_e.cur])throw new Error("Invalid bandwidth field.");_e.cur++;const Nt=this.extractOneOrMore(_e,R);V.push({bwtype:ke,bandwidth:Nt}),this.currentLine++}}return V}parseVersion(){const V=this.getCurrentRecord();if(V.type!==C.VERSION)throw new Error("first sdp record must be version");const _e=V.value.slice(0,this.consumeOneOrMore(V.value,0,R));if(_e.length!==V.value.length)throw new Error('invalid proto version, "v='.concat(V.value,'"'));return this.currentLine++,_e}parseOrigin(){const V=this.getCurrentRecord();if(V.type!==C.ORIGIN)throw new Error("second line of sdp must be origin");const _e=this.extractOneOrMore(V,j);this.consumeSpaceForRecord(V);const ke=this.extractOneOrMore(V,R);this.consumeSpaceForRecord(V);const Nt=this.extractOneOrMore(V,R);this.consumeSpaceForRecord(V);const In=this.extractOneOrMore(V,Q);this.consumeSpaceForRecord(V);const Ir=this.extractOneOrMore(V,Q);this.consumeSpaceForRecord(V);const Sr=this.extract(V,this.consumeUnicastAddress);return this.currentLine++,{username:_e,sessId:ke,sessVersion:Nt,nettype:In,addrtype:Ir,unicastAddress:Sr}}parseSessionName(){const V=this.getCurrentRecord();if(V.type===C.SESSION_NAME){const _e=this.extract(V,this.consumeText);return this.currentLine++,_e}}parseInformation(){const V=this.getCurrentRecord();if(V.type!==C.INFORMATION)return;const _e=this.extract(V,this.consumeText);return this.currentLine++,_e}parseUri(){const V=this.getCurrentRecord();if(V.type===C.URI)return this.currentLine++,V.value}parseEmail(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.EMAIL)break;V.push(_e.value),this.currentLine++}return V}parsePhone(){const V=[];for(;;){const _e=this.getCurrentRecord();if(_e.type!==C.PHONE)break;V.push(_e.value),this.currentLine++}return V}parseConnection(){const V=this.getCurrentRecord();if(V.type===C.CONNECTION){const _e=this.extractOneOrMore(V,Q);this.consumeSpaceForRecord(V);const ke=this.extractOneOrMore(V,Q);this.consumeSpaceForRecord(V);const Nt=this.extract(V,this.consumeAddress);return this.currentLine++,{nettype:_e,addrtype:ke,address:Nt}}}parseMedia(){const V=this.getCurrentRecord(),_e=this.extract(V,this.consumeToken);this.consumeSpaceForRecord(V);let ke=this.extract(V,this.consumePort);"/"===V.value[V.cur]&&(V.cur+=1,ke+=this.extract(V,this.consumeInteger)),this.consumeSpaceForRecord(V);const Nt=[];for(Nt.push(this.extract(V,this.consumeToken));"/"===V.value[V.cur];)V.cur+=1,Nt.push(this.extract(V,this.consumeToken));if(0===Nt.length)throw new Error("Invalid proto");const In=this.parseFmt(V);return this.currentLine++,{mediaType:_e,port:ke,protos:Nt,fmts:In}}parseTimeFields(){const V=[];for(;this.getCurrentRecord().type===C.TIME;){const _e=this.parseTime(),ke=this.parseRepeat(),Nt=this.parseZone();V.push({time:_e,repeats:ke,zones:Nt})}return V}parseMediaDescription(){const V=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===C.MEDIA;){const _e=this.parseMedia(),ke=this.parseInformation(),Nt=this.parseConnections(),In=this.parseBandWidth(),Ir=this.parseKey(),Sr=this.parseMediaAttributes(_e);V.push({media:_e,information:ke,connections:Nt,bandwidths:In,key:Ir,attributes:Sr})}return V}parseConnections(){const V=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===C.CONNECTION;)V.push(this.parseConnection());return V}parseFmt(V){const _e=[];for(;;)try{this.consumeSpaceForRecord(V),_e.push(this.extract(V,this.consumeToken))}catch{break}if(0===_e.length)throw new Error("Invalid fmts");return _e}extract(V,_e,...ke){const Nt=_e.call(this,V.value,V.cur,...ke),In=V.value.slice(V.cur,Nt);return V.cur=Nt,In}extractOneOrMore(V,_e){const ke=this.consumeOneOrMore(V.value,V.cur,_e),Nt=V.value.slice(V.cur,ke);return V.cur=ke,Nt}consumeSpaceForRecord(V){if(V.value[V.cur]!==b)throw new Error("Invalid space at ".concat(V.cur,"."));V.cur+=1}}class vt extends on{constructor(...V){super(...V),Sn(this,"attributes",void 0),Sn(this,"digested",!1)}extractOneOrMore(V,_e,ke){const Nt=this.consumeOneOrMore(V.attValue,V._cur,_e),In=V.attValue.slice(V._cur,Nt),[Ir,Sr]=ke||[];if("number"==typeof Ir&&In.length<Ir)throw new Error("error in length, should be more or equal than ".concat(Ir," characters."));if("number"==typeof Sr&&In.length>Sr)throw new Error("error in length, should be less or equal than ".concat(Sr," characters."));return V._cur=Nt,In}consumeAttributeSpace(V){if(V.attValue[V._cur]!==b)throw new Error("Invalid space at ".concat(V._cur,"."));V._cur+=1}extract(V,_e,...ke){if(!V.attValue)throw new Error("Nothing to extract from attValue.");const Nt=_e.call(this,V.attValue,V._cur,...ke),In=V.attValue.slice(V._cur,Nt);return V._cur=Nt,In}atEnd(V){if(!V.attValue)throw new Error;return V._cur>=V.attValue.length}peekChar(V){if(!V.attValue)throw new Error;return V.attValue[V._cur]}peek(V,_e){if(!V.attValue)throw new Error;for(let ke=0;ke<_e.length;ke++)if(_e[ke]!==V.attValue[V._cur+ke])return!1;return!0}parseIceUfrag(V){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(V,Re,[4,256])}parseIcePwd(V){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(V,Re,[22,256])}parseIceOptions(V){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const _e=[];for(;!this.atEnd(V);){_e.push(this.extractOneOrMore(V,Re));try{this.consumeAttributeSpace(V)}catch(ke){if(this.atEnd(V))break;throw ke}}this.attributes.iceOptions=_e}parseFingerprint(V){const _e=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill);this.attributes.fingerprints.push({hashFunction:_e,fingerprint:ke})}parseExtmap(V){const _e=this.extractOneOrMore(V,R);let ke;"/"===this.peekChar(V)&&(this.extract(V,this.consume,"/"),ke=this.extract(V,this.consumeToken)),this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeTill,b),In=Ct(Ct({entry:parseInt(_e,10)},ke&&{direction:ke}),{},{extensionName:Nt});this.peekChar(V)===b&&(this.consumeAttributeSpace(V),In.extensionAttributes=this.extract(V,this.consumeTill)),this.attributes.extmaps.push(In)}parseSetup(V){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const _e=this.extract(V,this.consumeTill);if("active"!==_e&&"passive"!==_e&&"actpass"!==_e&&"holdconn"!==_e)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=_e}}class Ge extends vt{constructor(...V){super(...V),Sn(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(V){if(this.digested)throw new Error("already digested");try{switch(V.attField){case"group":this.parseGroup(V);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(V);break;case"ice-pwd":this.parseIcePwd(V);break;case"ice-options":this.parseIceOptions(V);break;case"fingerprint":this.parseFingerprint(V);break;case"setup":this.parseSetup(V);break;case"tls-id":this.parseTlsId(V);break;case"identity":this.parseIdentity(V);break;case"extmap":this.parseExtmap(V);break;case"msid-semantic":this.parseMsidSemantic(V);break;default:V.ignored=!0,this.attributes.unrecognized.push(V)}}catch(_e){throw console.error("parsing session attribute ".concat(V.attField,' error, "a=').concat(V.attField,":").concat(V.attValue,'"')),_e}if(!V.ignored&&V.attValue&&!this.atEnd(V))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(V){const _e=this.extract(V,this.consumeToken),ke=[];for(;!this.atEnd(V)&&this.peekChar(V)===b;)this.consumeAttributeSpace(V),ke.push(this.extract(V,this.consumeToken));this.attributes.groups.push({semantic:_e,identificationTag:ke})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(V){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(V,tt)}parseIdentity(V){const _e=this.extractOneOrMore(V,Tt),ke=[];for(;!this.atEnd(V)&&this.peekChar(V)===b;){this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeToken);this.extract(V,this.consume,"=");const In=this.extractOneOrMore(V,Ir=>Ir!==b&&Ae(Ir));ke.push({name:Nt,value:In})}this.attributes.identities.push({assertionValue:_e,extensions:ke})}parseMsidSemantic(V){this.peekChar(V)===b&&this.consumeAttributeSpace(V);const _e={semantic:this.extract(V,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(V)}catch{break}if("*"===this.peekChar(V)){this.extract(V,this.consume,"*"),_e.applyForAll=!0;break}{const ke=this.extract(V,this.consumeTill,b);_e.identifierList.push(ke)}}this.attributes.msidSemantic=_e}}class ot extends vt{constructor(V){super(),Sn(this,"attributes",void 0),-1!==V.protos.indexOf("RTP")||V.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(V){if(this.digested)throw new Error("already digested");try{switch(V.attField){case"extmap":this.parseExtmap(V);break;case"setup":this.parseSetup(V);break;case"ice-ufrag":this.parseIceUfrag(V);break;case"ice-pwd":this.parseIcePwd(V);break;case"ice-options":this.parseIceOptions(V);break;case"candidate":this.parseCandidate(V);break;case"remote-candidate":this.parseRemoteCandidate(V);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(V);break;case"rtpmap":this.parseRtpmap(V);break;case"ptime":this.parsePtime(V);break;case"maxptime":this.parseMaxPtime(V);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(V);break;case"ssrc":this.parseSSRC(V);break;case"fmtp":this.parseFmtp(V);break;case"rtcp-fb":this.parseRtcpFb(V);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(V);break;case"mid":this.parseMid(V);break;case"msid":this.parseMsid(V);break;case"imageattr":this.parseImageAttr(V);break;case"rid":this.parseRid(V);break;case"simulcast":this.parseSimulcast(V);break;case"sctp-port":this.parseSctpPort(V);break;case"max-message-size":this.parseMaxMessageSize(V);break;case"ssrc-group":this.parseSSRCGroup(V);break;default:V.ignored=!0,this.attributes.unrecognized.push(V)}}catch(_e){throw console.error("parsing media attribute ".concat(V.attField,' error, "a=').concat(V.attField,":").concat(V.attValue,'"')),_e}if(!V.ignored&&V.attValue&&!this.atEnd(V))throw new Error("attribute parsing error")}parseCandidate(V){const _e=this.extractOneOrMore(V,Re,[1,32]);this.consumeAttributeSpace(V);const ke=this.extractOneOrMore(V,R,[1,5]);this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const In=this.extractOneOrMore(V,R,[1,10]);this.consumeAttributeSpace(V);const Ir=this.extract(V,this.consumeAddress);this.consumeAttributeSpace(V);const Sr=this.extract(V,this.consumePort);this.consumeAttributeSpace(V),this.extract(V,this.consume,"typ"),this.consumeAttributeSpace(V);const xr={foundation:_e,componentId:ke,transport:Nt,priority:In,connectionAddress:Ir,port:Sr,type:this.extract(V,this.consumeToken),extension:{}};for(this.peek(V," raddr")&&(this.extract(V,this.consume," raddr"),this.consumeAttributeSpace(V),xr.relAddr=this.extract(V,this.consumeAddress)),this.peek(V," rport")&&(this.extract(V,this.consume," rport"),this.consumeAttributeSpace(V),xr.relPort=this.extract(V,this.consumePort));this.peekChar(V)===b;){this.consumeAttributeSpace(V);const ji=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V),xr.extension[ji]=this.extractOneOrMore(V,N)}this.attributes.candidates.push(xr)}parseRemoteCandidate(V){const _e=[];for(;;){const ke=this.extractOneOrMore(V,R,[1,5]);this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeAddress);this.consumeAttributeSpace(V);const In=this.extract(V,this.consumePort);_e.push({componentId:ke,connectionAddress:Nt,port:In});try{this.consumeAttributeSpace(V)}catch{break}}this.attributes.remoteCandidatesList.push(_e)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(V){const _e=this.extract(V,this.consumeToken);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,"/");this.extract(V,this.consume,"/");const Nt={encodingName:ke,clockRate:this.extractOneOrMore(V,R)};this.atEnd(V)||"/"!==this.peekChar(V)||(this.extract(V,this.consume,"/"),Nt.encodingParameters=parseInt(this.extract(V,this.consumeTill),10));const In=this.attributes.payloads.find(Ir=>Ir.payloadType===parseInt(_e,10));In?In.rtpMap=Nt:this.attributes.payloads.push({payloadType:parseInt(_e,10),rtpMap:Nt,rtcpFeedbacks:[]})}parsePtime(V){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(V,this.consumeTill)}parseMaxPtime(V){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(V,this.consumeTill)}parseDirection(V){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=V.attField}parseSSRC(V){const _e=this.extractOneOrMore(V,R);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,":");let Nt;":"===this.peekChar(V)&&(this.extract(V,this.consume,":"),Nt=this.extract(V,this.consumeTill));const In=this.attributes.ssrcs.find(Ir=>Ir.ssrcId===parseInt(_e,10));In?In.attributes[ke]=Nt:this.attributes.ssrcs.push({ssrcId:parseInt(_e,10),attributes:{[ke]:Nt}})}parseFmtp(V){const _e=this.extract(V,this.consumeTill,b);this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill),Nt={};ke.split(";").forEach(Ir=>{let[Sr,xr]=Ir.split("=");Sr=Sr.trim(),xr="string"==typeof xr?xr.trim():xr,"string"==typeof Sr&&Sr.length>0&&(Nt[Sr]=xr)});const In=this.attributes.payloads.find(Ir=>Ir.payloadType===parseInt(_e,10));In?In.fmtp={parameters:Nt}:this.attributes.payloads.push({payloadType:parseInt(_e,10),rtcpFeedbacks:[],fmtp:{parameters:Nt}})}parseFmtParameters(V){const _e={},ke=this.extract(V,this.consumeTill,"=");V._cur++;const Nt=this.extract(V,this.consumeTill,";");for(_e[ke]=Nt;";"===V.attValue[V._cur];){const In=this.extract(V,this.consumeTill,"=");V._cur++;const Ir=this.extract(V,this.consumeTill,";");_e[In]=Ir}return _e}parseRtcpFb(V){let _e="";_e="*"===this.peekChar(V)?this.extract(V,this.consume,"*"):this.extract(V,this.consumeTill,b),this.consumeAttributeSpace(V);const ke=this.extract(V,this.consumeTill,b);let Nt;if("trr-int"===ke)Nt={type:ke,interval:this.extract(V,this.consumeTill)};else{const In={type:ke};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),In.parameter=this.extract(V,this.consumeToken),this.peekChar(V)===b&&(In.additional=this.extract(V,this.consumeTill))),Nt=In}if("*"===_e)this.attributes.rtcpFeedbackWildcards.push(Nt);else{const In=this.attributes.payloads.find(Ir=>Ir.payloadType===parseInt(_e,10));In?In.rtcpFeedbacks.push(Nt):this.attributes.payloads.push({payloadType:parseInt(_e,10),rtcpFeedbacks:[Nt]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(V){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const _e={port:this.extract(V,this.consumePort)};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),_e.netType=this.extractOneOrMore(V,Q),this.consumeAttributeSpace(V),_e.addressType=this.extractOneOrMore(V,Q),this.consumeAttributeSpace(V),_e.address=this.extract(V,this.consumeAddress)),this.attributes.rtcp=_e}parseMsid(V){const _e={id:this.extractOneOrMore(V,Q,[1,64])};this.peekChar(V)===b&&(this.consumeAttributeSpace(V),_e.appdata=this.extractOneOrMore(V,Q,[1,64])),this.attributes.msids.push(_e)}parseImageAttr(V){this.attributes.imageattr.push(V.attValue)}parseRid(V){const _e=this.extractOneOrMore(V,Nt=>ae(Nt)||R(Nt)||"_"===Nt||"-"===Nt);this.consumeAttributeSpace(V);const ke={id:_e,direction:this.extract(V,this.consumeToken),params:[]};if(this.peekChar(V)===b){if(this.consumeAttributeSpace(V),this.peek(V,"pt=")){this.extract(V,this.consume,"pt=");const Nt=[];for(;;){const In=this.extract(V,this.consumeToken);Nt.push(In);try{this.extract(V,this.consume,",")}catch{break}}ke.payloads=Nt,this.peekChar(V)===b&&this.extract(V,this.consume,b)}for(;;){const Nt=this.extract(V,this.consumeToken);switch(Nt){case"depend":{const In={type:Nt,rids:this.extract(V,this.consume,"=").split(",")};ke.params.push(In);break}default:{const In={type:Nt};"="===this.peekChar(V)&&(this.extract(V,this.consume,"="),In.val=this.extract(V,this.consumeTill,";")),ke.params.push(In)}}try{this.extract(V,this.consume,";")}catch{break}}}this.attributes.rids.push(ke)}parseSimulcast(V){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=V.attValue,this.extract(V,this.consumeTill)}parseSctpPort(V){this.attributes.sctpPort=this.extractOneOrMore(V,R,[1,5])}parseMaxMessageSize(V){this.attributes.maxMessageSize=this.extractOneOrMore(V,R,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(V){this.attributes.mid=this.extract(V,this.consumeToken)}parseSSRCGroup(V){const _e=this.extract(V,this.consumeToken),ke=[];for(;;)try{this.consumeAttributeSpace(V);const Nt=this.extract(V,this.consumeInteger);ke.push(parseInt(Nt,10))}catch{break}this.attributes.ssrcGroups.push({semantic:_e,ssrcIds:ke})}}function _t(Vt,V,_e){return V in Vt?Object.defineProperty(Vt,V,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Vt[V]=_e,Vt}class yn{constructor(){_t(this,"eol",y)}print(V,_e){let ke="";return _e&&(this.eol=_e),ke+=this.printVersion(V.version),ke+=this.printOrigin(V.origin),ke+=this.printSessionName(V.sessionName),ke+=this.printInformation(V.information),ke+=this.printUri(V.uri),ke+=this.printEmail(V.emails),ke+=this.printPhone(V.phones),ke+=this.printConnection(V.connection),ke+=this.printBandwidth(V.bandwidths),ke+=this.printTimeFields(V.timeFields),ke+=this.printKey(V.key),ke+=this.printSessionAttributes(V.attributes),ke+=this.printMediaDescription(V.mediaDescriptions),ke}printVersion(V){return"v=".concat(V).concat(this.eol)}printOrigin(V){return"o=".concat(V.username," ").concat(V.sessId," ").concat(V.sessVersion," ").concat(V.nettype," ").concat(V.addrtype," ").concat(V.unicastAddress).concat(this.eol)}printSessionName(V){return V?"s=".concat(V).concat(this.eol):""}printInformation(V){return V?"i=".concat(V).concat(this.eol):""}printUri(V){return V?"u=".concat(V).concat(this.eol):""}printEmail(V){let _e="";for(const ke of V)_e+="e=".concat(ke).concat(this.eol);return _e}printPhone(V){let _e="";for(const ke of V)_e+="e=".concat(ke).concat(this.eol);return _e}printConnection(V){return V?"c=".concat(V.nettype," ").concat(V.addrtype," ").concat(V.address).concat(this.eol):""}printBandwidth(V){let _e="";for(const ke of V)_e+="b=".concat(ke.bwtype,":").concat(ke.bandwidth).concat(this.eol);return _e}printTimeFields(V){let _e="";for(const ke of V){_e+="t=".concat(ke.time.startTime," ").concat(ke.time.startTime).concat(this.eol);for(const Nt of ke.repeats)_e+="r=".concat(Nt.repeatInterval," ").concat(Nt.typedTimes.join(" ")).concat(this.eol);ke.zoneAdjustments&&(_e+="z=",_e+="z=".concat(ke.zoneAdjustments.map(Nt=>"".concat(Nt.time," ").concat(Nt.back?"-":""," ").concat(Nt.typedTime)).join(" ")).concat(this.eol),_e+=this.eol)}return _e}printKey(V){return V?"k=".concat(V).concat(this.eol):""}printAttributes(V){let _e="";for(const ke of V)_e+="a=".concat(ke.attField).concat(ke.attValue?":".concat(ke.attValue):"").concat(this.eol);return _e}printMediaDescription(V){let _e="";for(const ke of V)_e+=this.printMedia(ke.media),_e+=this.printInformation(ke.information),_e+=this.printConnections(ke.connections),_e+=this.printBandwidth(ke.bandwidths),_e+=this.printKey(ke.key),_e+=this.printMediaAttributes(ke);return _e}printConnections(V){let _e="";for(const ke of V)_e+=this.printConnection(ke);return _e}printMedia(V){return"m=".concat(V.mediaType," ").concat(V.port," ").concat(V.protos.join("/")," ").concat(V.fmts.join(" ")).concat(this.eol)}printSessionAttributes(V){return new at(this.eol).print(V)}printMediaAttributes(V){return new Rt(this.eol).print(V)}}class Je{constructor(V){_t(this,"eol",void 0),this.eol=V}printIceUfrag(V){return void 0===V?"":"a=ice-ufrag:".concat(V).concat(this.eol)}printIcePwd(V){return void 0===V?"":"a=ice-pwd:".concat(V).concat(this.eol)}printIceOptions(V){return void 0===V?"":"a=ice-options:".concat(V.join(b)).concat(this.eol)}printFingerprints(V){return V.length>0?V.map(_e=>"a=fingerprint:".concat(_e.hashFunction).concat(b).concat(_e.fingerprint)).join(this.eol)+this.eol:""}printExtmap(V){return V.map(_e=>"a=extmap:".concat(_e.entry).concat(_e.direction?"/".concat(_e.direction):"").concat(b).concat(_e.extensionName).concat(_e.extensionAttributes?"".concat(b).concat(_e.extensionAttributes):"").concat(this.eol)).join("")}printSetup(V){return void 0===V?"":"a=setup:".concat(V).concat(this.eol)}printUnrecognized(V){return V.map(_e=>"a=".concat(_e.attField).concat(_e.attValue?":".concat(_e.attValue):"").concat(this.eol)).join("")}}class at extends Je{print(V){let _e="";return _e+=this.printGroups(V.groups),_e+=this.printMsidSemantic(V.msidSemantic),_e+=this.printIceLite(V.iceLite),_e+=this.printIceUfrag(V.iceUfrag),_e+=this.printIcePwd(V.icePwd),_e+=this.printIceOptions(V.iceOptions),_e+=this.printFingerprints(V.fingerprints),_e+=this.printSetup(V.setup),_e+=this.printTlsId(V.tlsId),_e+=this.printIdentity(V.identities),_e+=this.printExtmap(V.extmaps),_e+=this.printUnrecognized(V.unrecognized),_e}printGroups(V){let _e="";return V.length>0&&(_e+=V.map(ke=>"a=group:".concat(ke.semantic).concat(ke.identificationTag.map(Nt=>"".concat(b).concat(Nt)).join("")).concat(this.eol)).join("")),_e}printIceLite(V){return void 0===V?"":"a=ice-lite"+this.eol}printTlsId(V){return V?"a=tls-id:".concat(V).concat(this.eol):""}printIdentity(V){return 0===V.length?"":V.map(_e=>"a=identity:".concat(_e.assertionValue).concat(_e.extensions.map(ke=>"".concat(b).concat(ke.name).concat(ke.value?"=".concat(ke.value):"")))).join(this.eol)+this.eol}printMsidSemantic(V){if(!V)return"";let _e="a=msid-semantic:".concat(V.semantic);return V.applyForAll?_e+="".concat(b,"*"):V.identifierList.length>0&&(_e+=V.identifierList.map(ke=>"".concat(b).concat(ke))),_e+this.eol}}class Rt extends Je{print(V){const _e=V.attributes;let ke="";return ke+=this.printRTCP(_e.rtcp),ke+=this.printIceUfrag(_e.iceUfrag),ke+=this.printIcePwd(_e.icePwd),ke+=this.printIceOptions(_e.iceOptions),ke+=this.printCandidates(_e.candidates),ke+=this.printRemoteCandidatesList(_e.remoteCandidatesList),ke+=this.printEndOfCandidates(_e.endOfCandidates),ke+=this.printFingerprints(_e.fingerprints),ke+=this.printSetup(_e.setup),ke+=this.printMid(_e.mid),ke+=this.printExtmap(_e.extmaps),ke+=this.printRTPRelated(_e),ke+=this.printPtime(_e.ptime),ke+=this.printMaxPtime(_e.maxPtime),ke+=this.printDirection(_e.direction),ke+=this.printSSRCGroups(_e.ssrcGroups),ke+=this.printSSRC(_e.ssrcs),ke+=this.printRTCPMux(_e.rtcpMux),ke+=this.printRTCPMuxOnly(_e.rtcpMuxOnly),ke+=this.printRTCPRsize(_e.rtcpRsize),ke+=this.printMSId(_e.msids),ke+=this.printImageattr(_e.imageattr),ke+=this.printRid(_e.rids),ke+=this.printSimulcast(_e.simulcast),ke+=this.printSCRPPort(_e.sctpPort),ke+=this.printMaxMessageSize(_e.maxMessageSize),ke+=this.printUnrecognized(_e.unrecognized),ke}printCandidates(V){return V.map(_e=>"a=candidate:".concat(_e.foundation).concat(b).concat(_e.componentId).concat(b).concat(_e.transport).concat(b).concat(_e.priority).concat(b).concat(_e.connectionAddress).concat(b).concat(_e.port).concat(b,"typ").concat(b).concat(_e.type).concat(_e.relAddr?"".concat(b,"raddr").concat(b).concat(_e.relAddr):"").concat(_e.relPort?"".concat(b,"rport").concat(b).concat(_e.relPort):"").concat(Object.keys(_e.extension).map(ke=>"".concat(b).concat(ke).concat(b).concat(_e.extension[ke])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(V){return V.map(_e=>"a=remote-candidates:".concat(_e.join(b)).concat(this.eol)).join("")}printEndOfCandidates(V){return void 0===V?"":"a=end-of-candidates"+this.eol}printRTPRelated(V){if(!V.payloads)return"";const _e=V.payloads;let ke="";ke+=V.rtcpFeedbackWildcards.map(Nt=>this.printRTCPFeedback("*",Nt)).join("");for(const Nt of _e)ke+=this.printRtpMap(Nt.payloadType,Nt.rtpMap),ke+=this.printFmtp(Nt.payloadType,Nt.fmtp),ke+=Nt.rtcpFeedbacks.map(In=>this.printRTCPFeedback(Nt.payloadType,In)).join("");return ke}printFmtp(V,_e){if(!_e)return"";const ke=Object.keys(_e.parameters);return 1===ke.length&&void 0===_e.parameters[ke[0]]?"a=fmtp:".concat(V).concat(b).concat(ke[0]).concat(this.eol):"a=fmtp:".concat(V).concat(b).concat(Object.keys(_e.parameters).map(Nt=>"".concat(Nt,"=").concat(_e.parameters[Nt])).join(";")).concat(this.eol)}printRtpMap(V,_e){return _e?"a=rtpmap:".concat(V).concat(b).concat(_e.encodingName,"/").concat(_e.clockRate).concat(_e.encodingParameters?"/".concat(_e.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(V,_e){let ke="a=rtcp-fb:".concat(V).concat(b),Nt=_e;return"trr-int"===Nt.type?ke+="ttr-int".concat(b).concat(Nt.interval):(ke+="".concat(Nt.type),Nt.parameter&&(ke+="".concat(b).concat(Nt.parameter),Nt.additional&&(ke+="".concat(b).concat(Nt.additional)))),ke+this.eol}printPtime(V){return void 0===V?"":"a=ptime:".concat(V).concat(this.eol)}printMaxPtime(V){return void 0===V?"":"a=maxptime:".concat(V).concat(this.eol)}printDirection(V){return void 0===V?"":"a=".concat(V).concat(this.eol)}printSSRC(V){return V.map(_e=>Object.keys(_e.attributes).map(ke=>"a=ssrc:".concat(_e.ssrcId.toString(10)).concat(b).concat(ke).concat(_e.attributes[ke]?":".concat(_e.attributes[ke]):"").concat(this.eol)).join("")).join("")}printRTCPMux(V){return void 0===V?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(V){return void 0===V?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(V){return void 0===V?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(V){if(void 0===V)return"";let _e="a=rtcp:".concat(V.port);return V.netType&&(_e+="".concat(b).concat(V.netType)),V.addressType&&(_e+="".concat(b).concat(V.addressType)),V.address&&(_e+="".concat(b).concat(V.address)),_e+this.eol}printMSId(V){return V.map(_e=>"a=msid:".concat(_e.id).concat(_e.appdata?"".concat(b).concat(_e.appdata):"").concat(this.eol)).join("")}printImageattr(V){return V.map(_e=>"a=imageattr:".concat(_e).concat(this.eol)).join("")}printRid(V){return V.map(_e=>{let ke="a=rid:".concat(_e.id).concat(b).concat(_e.direction);return _e.payloads&&(ke+="".concat(b,"pt=").concat(_e.payloads.join(","))),_e.params.length>0&&(ke+="".concat(b).concat(_e.params.map(Nt=>"depend"===Nt.type?"depend=".concat(Nt.rids.join(",")):"".concat(Nt.type,"=").concat(Nt.val)).join(";"))),ke+this.eol}).join("")}printSimulcast(V){return void 0===V?"":"a=simulcast:".concat(V).concat(this.eol)}printSCRPPort(V){return void 0===V?"":"a=sctp-port:".concat(V).concat(this.eol)}printMaxMessageSize(V){return void 0===V?"":"a=max-message-size:".concat(V)}printMid(V){return void 0===V?"":"a=mid:".concat(V).concat(this.eol)}printSSRCGroups(V){return V.map(_e=>"a=ssrc-group:".concat(_e.semantic).concat(_e.ssrcIds.map(ke=>"".concat(b).concat(ke.toString(10))).join("")).concat(this.eol)).join("")}}function un(Vt){return(new cn).parse(Vt)}function wn(Vt,V){return(new yn).print(Vt,V)}}},c={};function h(g){if(c[g])return c[g].exports;var p=c[g]={exports:{}};return o[g](p,p.exports,h),p.exports}return h.d=(g,p)=>{for(var v in p)h.o(p,v)&&!h.o(g,v)&&Object.defineProperty(g,v,{enumerable:!0,get:p[v]})},h.o=(g,p)=>Object.prototype.hasOwnProperty.call(g,p),h.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h(8)})()}($l);class $H{constructor(i){q(this,"sessionDesc",void 0),q(this,"localCapabilities",void 0),q(this,"rtpCapabilities",void 0),q(this,"candidates",void 0),q(this,"iceParameters",void 0),q(this,"dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),i=Ha(i);const{remoteIceParameters:o,remoteDtlsParameters:c,candidates:h,remoteRTPCapabilities:g,remoteSetup:p,localCapabilities:v,sdkCodec:_,cname:y}=i,b=$l.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=h,this.iceParameters=o,this.dtlsParameters=c,this.setup=p,this.localCapabilities=v,this.cname=y;for(let C=0;C<b.mediaDescriptions.length;C++){const R=b.mediaDescriptions[C];if(R.attributes.iceUfrag=o.iceUfrag,R.attributes.icePwd=o.icePwd,R.attributes.fingerprints=c.fingerprints,R.attributes.candidates=h,R.attributes.setup=p,"video"===R.media.mediaType){R.media.fmts=g.videoCodecs.map(j=>j.payloadType.toString(10));const N=g.videoCodecs.filter(j=>{var Q;return null===(Q=j.rtpMap)||void 0===Q?void 0:Q.encodingName.toLowerCase().includes(_)});if(0===N.length)throw new Error("Codec ".concat(_," not supported by remote SDP."));R.attributes.payloads=N,R.attributes.extmaps=g.videoExtensions}"audio"===R.media.mediaType&&(R.media.fmts=g.audioCodecs.map(N=>N.payloadType.toString(10)),R.attributes.payloads=g.audioCodecs,R.attributes.extmaps=g.audioExtensions),b.mediaDescriptions[C]=this.mungMediaDesc(R)}this.sessionDesc=b,this.currentMidIndex=b.mediaDescriptions.length-1}toString(){return $l.exports.print(this.sessionDesc)}send(i,o,c){const{ssrcs:h,ssrcGroups:g}=m0(o,this.cname),p=this.sessionDesc.mediaDescriptions.find(y=>i===Zr.VIDEO?"video"===y.media.mediaType:"audio"===y.media.mediaType),v=h[0].attributes.label,_=h[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(h),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(g),{id:v,mslabel:_}}batchSend(i){return i.map(o=>{let{kind:c,ssrcMsg:h}=o;return this.send(c,h,void 0)})}stopSending(i){this.sessionDesc.mediaDescriptions.forEach(o=>{const c=[],h=[],g=[];o.attributes.ssrcs.forEach(p=>{i.includes(p.attributes.label||"")?g.push(p):c.push(p)}),o.attributes.ssrcGroups.forEach(p=>{g.map(v=>v.ssrcId).includes(p.ssrcIds[0])||h.push(p)}),o.attributes.ssrcs=c,o.attributes.ssrcGroups=h})}mute(i){const o=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!o)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(i){const o=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===i);if(!o)throw new Error("mediaDescription not found with ".concat(i," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(i,o,c){i.forEach((h,g)=>{const p=h._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(y=>y.attributes.mid===p.kind),_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],h);this.sessionDesc.mediaDescriptions[v]=_})}stopReceiving(i){}restartICE(i,o){i=Ha(i),o=Ha(o),this.iceParameters=i,this.candidates=o,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=i.iceUfrag,c.attributes.icePwd=i.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(i){const o=[];for(let c=0;c<i;c++)o.push((this.currentMidIndex+c+1).toString(10));return o}mungRecvMediaDsec(i,o){const c=Ha(i);return D2(c,o),hB(c,o),c}updateRecvMedia(i,o){const c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===i);if(-1!==c){const h=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],o);this.sessionDesc.mediaDescriptions[c]=h}}bumpMid(i){this.currentMidIndex+=i}updateTrackLabel(i,o,c){const h=this.sessionDesc.mediaDescriptions.find(p=>i===Zr.VIDEO?"video"===p.attributes.mid:"audio"===p.attributes.mid);if(h){const p=h.attributes.ssrcs.find(v=>v.attributes.label===o);var g;p&&(p.attributes.label=c,null===(g=p.attributes.msid)||void 0===g||g.replace(o,c))}}mungMediaDesc(i){const o=Ha(i);return Zl(o),function(c){const h=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);h&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(h),1),c.attributes.payloads.forEach(g=>{const p=g.rtcpFeedbacks.findIndex(v=>"transport-cc"===v.type);-1!==p&&g.rtcpFeedbacks.splice(p,1)})}(o),o}getSSRC(i){for(const o of this.sessionDesc.mediaDescriptions)for(const c of o.attributes.ssrcs)if(c.attributes.label===i)return[c]}}function xh(n){if(Array.isArray(n))return n.map(function(c){return c});if(!ZH(n))return n;var i={};for(var o in n)i[o]=ZH(n[o])||Array.isArray(n[o])?xh(n[o]):n[o];return i}function ZH(n){return!("object"!=typeof n||Array.isArray(n)||!n)}var Y5=function(){function n(i){this.input=[],this.size=i}return n.prototype.add=function(i){this.input.push(i),this.input.length>this.size&&this.input.splice(0,1)},n.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},n}(),nw=function(n,i){return(nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)c.hasOwnProperty(h)&&(o[h]=c[h])})(n,i)};function pB(n,i){function o(){this.constructor=n}nw(n,i),n.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}var iE=function(){return(iE=Object.assign||function(n){for(var i,o=1,c=arguments.length;o<c;o++)for(var h in i=arguments[o])Object.prototype.hasOwnProperty.call(i,h)&&(n[h]=i[h]);return n}).apply(this,arguments)};function fB(n,i,o,c){return new(o||(o=Promise))(function(h,g){function p(y){try{_(c.next(y))}catch(b){g(b)}}function v(y){try{_(c.throw(y))}catch(b){g(b)}}function _(y){y.done?h(y.value):new o(function(b){b(y.value)}).then(p,v)}_((c=c.apply(n,i||[])).next())})}function g0(n,i){var o,c,h,g,p={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return g={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function v(_){return function(y){return function(b){if(o)throw new TypeError("Generator is already executing.");for(;p;)try{if(o=1,c&&(h=2&b[0]?c.return:b[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,b[1])).done)return h;switch(c=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return p.label++,{value:b[1],done:!1};case 5:p.label++,c=b[1],b=[0];continue;case 7:b=p.ops.pop(),p.trys.pop();continue;default:if(!((h=(h=p.trys).length>0&&h[h.length-1])||6!==b[0]&&2!==b[0])){p=0;continue}if(3===b[0]&&(!h||b[1]>h[0]&&b[1]<h[3])){p.label=b[1];break}if(6===b[0]&&p.label<h[1]){p.label=h[1],h=b;break}if(h&&p.label<h[2]){p.label=h[2],p.ops.push(b);break}h[2]&&p.ops.pop(),p.trys.pop();continue}b=i.call(n,p)}catch(C){b=[6,C],c=0}finally{o=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([_,y])}}}var gl,mB={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},_0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:mB,remoteCandidate:mB}},q5={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},k2={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},gB={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},J5={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},_B=function(){function n(i,o){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=xh(_0),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=i,this.options=o,this.intervalTimer=window.setInterval(function(){return fB(c,void 0,void 0,function(){return g0(this,function(h){return this.updateStats(),[2]})})},this.options.updateInterval)}return n.prototype.getStats=function(){return this.stats},n.prototype.setVideoIsReady=function(i){this.videoIsReady=i},n.prototype.setVideoIsReady2=function(i,o){this.videoIsReady2[i]=o},n.prototype.getVideoIsReady=function(i){return this.videoIsReady2[i]||!1},n.prototype.setIsFirstAudioDecoded=function(i){},n.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},n.prototype.calcLossRate=function(i){var o=this;this.lossRateWindowStats.push(i),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,h=0,g=0,p=0,v=0,_=function(C){i[C].forEach(function(R,N){if(o.lossRateWindowStats[c-1][C][N]&&o.lossRateWindowStats[0][C][N]){var j=o.lossRateWindowStats[c-1][C][N].packets-o.lossRateWindowStats[0][C][N].packets,Q=o.lossRateWindowStats[c-1][C][N].packetsLost-o.lossRateWindowStats[0][C][N].packetsLost;"videoSend"===C||"audioSend"===C?(h+=j,p+=Q):(g+=j,v+=Q),R.packetLostRate=Number.isNaN(j)||Number.isNaN(j)||j<=0||Q<=0?0:Q/(j+Q)}})},y=0,b=["videoSend","audioSend","videoRecv","audioRecv"];y<b.length;y++)_(b[y]);i.sendPacketLossRate=h<=0||p<=0?0:p/(h+p),i.recvPacketLossRate=g<=0||v<=0?0:v/(g+v)},n}(),eG=function(n){function i(){var o=null!==n&&n.apply(this,arguments)||this;return o._stats=_0,o.lastDecodeVideoReceiverStats=new Map,o}return pB(i,n),i.prototype.updateStats=function(){return fB(this,void 0,void 0,function(){var o,c,h,g;return g0(this,function(p){switch(p.label){case 0:return[4,this._getStats()];case 1:return o=p.sent(),c=this.statsResponsesToObjects(o),this._stats=xh(_0),h=c.filter(function(v){return"ssrc"===v.type}),this.processSSRCStats(h),(g=c.find(function(v){return"VideoBwe"===v.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processBandwidthStats=function(o){this._stats.bitrate={actualEncoded:Number(o.googActualEncBitrate),targetEncoded:Number(o.googTargetEncBitrate),retransmit:Number(o.googRetransmitBitrate),transmit:Number(o.googTransmitBitrate)},this._stats.sendBandwidth=Number(o.googAvailableSendBandwidth)},i.prototype.processSSRCStats=function(o){var c=this;o.forEach(function(h){var g=h.id.includes("send");switch(h.mediaType+"_"+(g?"send":"recv")){case"video_send":var p=xh(k2);p.codec=h.googCodecName,p.adaptionChangeReason="none",h.googCpuLimitedResolution&&(p.adaptionChangeReason="cpu"),h.googBandwidthLimitedResolution&&(p.adaptionChangeReason="bandwidth"),p.avgEncodeMs=Number(h.googAvgEncodeMs),p.inputFrame={width:Number(h.googFrameWidthInput)||Number(h.googFrameWidthSent),height:Number(h.googFrameHeightInput)||Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},p.sentFrame={width:Number(h.googFrameWidthSent),height:Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},p.firsCount=Number(h.googFirReceived),p.nacksCount=Number(h.googNacksReceived),p.plisCount=Number(h.googPlisReceived),p.frameCount=Number(h.framesEncoded),p.bytes=Number(h.bytesSent),p.packets=Number(h.packetsSent),p.packetsLost=Number(h.packetsLost),p.ssrc=Number(h.ssrc),p.rttMs=Number(h.googRtt||0),c._stats.videoSend.push(p),c._stats.rtt=p.rttMs;break;case"video_recv":var v=xh(q5),_=c.lastDecodeVideoReceiverStats.get(Number(h.ssrc));if(v.codec=h.googCodecName,v.targetDelayMs=Number(h.googTargetDelayMs),v.renderDelayMs=Number(h.googRenderDelayMs),v.currentDelayMs=Number(h.googCurrentDelayMs),v.minPlayoutDelayMs=Number(h.googMinPlayoutDelayMs),v.decodeMs=Number(h.googDecodeMs),v.maxDecodeMs=Number(h.googMaxDecodeMs),v.receivedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateReceived)},v.decodedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateDecoded)},v.outputFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateOutput)},v.jitterBufferMs=Number(h.googJitterBufferMs),v.firsCount=Number(h.googFirsSent),v.nacksCount=Number(h.googNacksSent),v.plisCount=Number(h.googPlisSent),v.framesDecodeCount=Number(h.framesDecoded),v.bytes=Number(h.bytesReceived),v.packets=Number(h.packetsReceived),v.packetsLost=Number(h.packetsLost),v.ssrc=Number(h.ssrc),v.packets>0&&!c.isFirstVideoReceived[v.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(v.ssrc),c.isFirstVideoReceived[v.ssrc]=!0),v.framesDecodeCount>0&&!c.isFirstVideoDecoded[v.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(v.ssrc,v.decodedFrame.width,v.decodedFrame.height),c.isFirstVideoDecoded[v.ssrc]=!0),_){var y=_.stats,b=Date.now()-_.lts;v.framesDecodeFreezeTime=y.framesDecodeFreezeTime,v.framesDecodeInterval=y.framesDecodeInterval,v.framesDecodeCount>y.framesDecodeCount&&c.isFirstVideoDecoded?(_.lts=Date.now(),v.framesDecodeInterval=b,v.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(h.ssrc,10))?v.framesDecodeFreezeTime+=v.framesDecodeInterval:c.setVideoIsReady2(parseInt(h.ssrc,10),!0))):v.framesDecodeCount<_.stats.framesDecodeCount&&(v.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(v.ssrc,{stats:iE({},v),lts:Date.now()}),c._stats.videoRecv.push(v);break;case"audio_recv":var C=xh(J5);C.codec=h.googCodecName,C.outputLevel=Math.abs(Number(h.audioOutputLevel))/32767,C.decodingCNG=Number(h.googDecodingCNG),C.decodingCTN=Number(h.googDecodingCTN),C.decodingCTSG=Number(h.googDecodingCTSG),C.decodingNormal=Number(h.googDecodingNormal),C.decodingPLC=Number(h.googDecodingPLC),C.decodingPLCCNG=Number(h.googDecodingPLCCNG),C.expandRate=Number(h.googExpandRate),C.accelerateRate=Number(h.googAccelerateRate),C.preemptiveExpandRate=Number(h.googPreemptiveExpandRate),C.secondaryDecodedRate=Number(h.googSecondaryDecodedRate),C.speechExpandRate=Number(h.googSpeechExpandRate),C.preferredJitterBufferMs=Number(h.googPreferredJitterBufferMs),C.jitterBufferMs=Number(h.googJitterBufferMs),C.jitterMs=Number(h.googJitterReceived),C.bytes=Number(h.bytesReceived),C.packets=Number(h.packetsReceived),C.packetsLost=Number(h.packetsLost),C.ssrc=Number(h.ssrc),C.receivedFrames=Number(h.googDecodingCTN)||Number(h.packetsReceived),C.droppedFrames=Number(h.googDecodingPLC)+Number(h.googDecodingPLCCNG)||Number(h.packetsLost),C.receivedFrames>0&&!c.isFirstAudioReceived[C.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(C.ssrc),c.isFirstAudioReceived[C.ssrc]=!0),C.decodingNormal>0&&!c.isFirstAudioDecoded[C.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(C.ssrc),c.isFirstAudioDecoded[C.ssrc]=!0),c._stats.audioRecv.push(C);break;case"audio_send":var R=xh(gB);R.codec=h.googCodecName,R.inputLevel=Math.abs(Number(h.audioInputLevel))/32767,R.aecReturnLoss=Number(h.googEchoCancellationReturnLoss||0),R.aecReturnLossEnhancement=Number(h.googEchoCancellationReturnLossEnhancement||0),R.residualEchoLikelihood=Number(h.googResidualEchoLikelihood||0),R.residualEchoLikelihoodRecentMax=Number(h.googResidualEchoLikelihoodRecentMax||0),R.bytes=Number(h.bytesSent),R.packets=Number(h.packetsSent),R.packetsLost=Number(h.packetsLost),R.ssrc=Number(h.ssrc),R.rttMs=Number(h.googRtt||0),c._stats.rtt=R.rttMs,c._stats.audioSend.push(R)}})},i.prototype._getStats=function(){var o=this;return new Promise(function(c,h){o.pc.getStats(c,h)})},i.prototype.statsResponsesToObjects=function(o){var c=[];return o.result().forEach(function(h){var g={id:h.id,timestamp:h.timestamp.valueOf().toString(),type:h.type};h.names().forEach(function(p){g[p]=h.stat(p)}),c.push(g)}),c},i}(_B);!function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(gl||(gl={}));var Ti,X5=function(n){function i(){var o=null!==n&&n.apply(this,arguments)||this;return o._stats=_0,o.lastDecodeVideoReceiverStats=new Map,o.lastVideoFramesRecv=new Map,o.lastVideoFramesSent=new Map,o.lastVideoFramesDecode=new Map,o.lastVideoJBDelay=new Map,o.lastAudioJBDelay=new Map,o.mediaBytesSent=new Map,o.mediaBytesRetransmit=new Map,o.mediaBytesTargetEncode=new Map,o.lastEncoderMs=new Map,o}return pB(i,n),i.prototype.updateStats=function(){return fB(this,void 0,void 0,function(){var o,c=this;return g0(this,function(h){switch(h.label){case 0:return o=this,[4,this.pc.getStats()];case 1:return o.report=h.sent(),this._stats=xh(_0),this.report.forEach(function(g){switch(g.type){case gl.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case gl.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case gl.TRANSPORT:var p=c.report.get(g.selectedCandidatePairId);p&&c.processCandidatePairStats(p);break;case gl.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},i.prototype.processCandidatePairStats=function(o){if(this._stats.sendBandwidth=o.availableOutgoingBitrate||0,o.currentRoundTripTime&&(this._stats.rtt=1e3*o.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&o.currentRoundTripTime&&(g.rttMs=1e3*o.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&o.currentRoundTripTime&&(g.rttMs=1e3*o.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=o.id,o.localCandidateId){var c=this.report.get(o.localCandidateId);c&&this.processCandidateStats(c)}if(o.remoteCandidateId){var h=this.report.get(o.remoteCandidateId);h&&this.processCandidateStats(h)}},i.prototype.processCandidateStats=function(o){var c;o.type===gl.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),o.type===gl.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=o.type,c.id=o.id,o.address&&(c.address=o.address),o.candidateType&&(c.candidateType=o.candidateType),o.port&&(c.port=o.port),o.priority&&(c.priority=o.priority),o.protocol&&(c.protocol=o.protocol),o.relayProtocol&&(c.relayProtocol=o.relayProtocol),o.type===gl.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(iE({},c),iE({},this.stats.selectedCandidatePair.localCandidate)),o.type===gl.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(iE({},c),iE({},this.stats.selectedCandidatePair.remoteCandidate)))},i.prototype.processAudioInboundStats=function(o){var c=this._stats.audioRecv.find(function(h){return h.ssrc===o.ssrc});c||(c=xh(J5),this._stats.audioRecv.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsReceived,c.packetsLost=o.packetsLost,c.bytes=o.bytesReceived,c.jitterMs=1e3*o.jitter,o.trackId&&this.processAudioTrackReceiverStats(o.trackId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),c.receivedFrames||(c.receivedFrames=o.packetsReceived),c.droppedFrames||(c.droppedFrames=o.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},i.prototype.processVideoInboundStats=function(o){var c=this._stats.videoRecv.find(function(C){return C.ssrc===o.ssrc});c||(c=xh(q5),this._stats.videoRecv.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsReceived,c.packetsLost=o.packetsLost,c.bytes=o.bytesReceived,c.firsCount=o.firCount,c.nacksCount=o.nackCount,c.plisCount=o.pliCount,c.framesDecodeCount=o.framesDecoded;var h=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),p=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),h){var y=h.stats,b=p-h.lts;c.framesDecodeFreezeTime=y.framesDecodeFreezeTime,c.framesDecodeInterval=y.framesDecodeInterval,c.framesDecodeCount>y.framesDecodeCount&&this.isFirstVideoDecoded?(h.lts=Date.now(),c.framesDecodeInterval=b,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(o.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(o.ssrc,10),!0))):c.framesDecodeCount<y.framesDecodeCount&&(c.framesDecodeInterval=0),o.framesDecoded&&o.qpSum&&(c.qpSumPerFrame=h.stats.framesDecodeCount>o.framesDecoded?o.qpSum/o.framesDecoded:(o.qpSum-h.qpSum)/(o.framesDecoded-h.stats.framesDecodeCount))}g&&p-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((p-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:p,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:p,rate:0}),o.totalDecodeTime&&(c.decodeMs=1e3*o.totalDecodeTime),o.trackId&&this.processVideoTrackReceiverStats(o.trackId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.framerateMean&&(c.framesRateFirefox=o.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:iE({},c),lts:h?h.lts:Date.now(),qpSum:o.qpSum})},i.prototype.processVideoOutboundStats=function(o){var c=this._stats.videoSend.find(function(R){return R.ssrc===o.ssrc});c||(c=xh(k2),this._stats.videoSend.push(c));var h,g=this.mediaBytesSent.get(o.ssrc);if(g?g.add(o.bytesSent):((v=new Y5(10)).add(o.bytesSent),this.mediaBytesSent.set(o.ssrc,v)),void 0!==o.retransmittedBytesSent){var p=this.mediaBytesRetransmit.get(o.ssrc);p?p.add(o.retransmittedBytesSent):((v=new Y5(10)).add(o.retransmittedBytesSent),this.mediaBytesRetransmit.set(o.ssrc,v))}if(o.totalEncodedBytesTarget){var v,_=this.mediaBytesTargetEncode.get(o.ssrc);_?_.add(o.totalEncodedBytesTarget):((v=new Y5(10)).add(o.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(o.ssrc,v))}if(c.ssrc=o.ssrc,c.bytes=o.bytesSent,c.packets=o.packetsSent,c.firsCount=o.firCount,c.nacksCount=o.nackCount,c.plisCount=o.pliCount,c.frameCount=o.framesEncoded,c.adaptionChangeReason=o.qualityLimitationReason,o.totalEncodeTime&&o.framesEncoded&&(c.avgEncodeMs=!(h=this.lastEncoderMs.get(o.ssrc))||h.lastFrameCount>o.framesEncoded?1e3*o.totalEncodeTime/o.framesEncoded:1e3*(o.totalEncodeTime-h.lastEncoderTime)/(o.framesEncoded-h.lastFrameCount)),o.framesEncoded&&o.qpSum&&(c.qpSumPerFrame=!(h=this.lastEncoderMs.get(o.ssrc))||h.lastFrameCount>o.framesEncoded?o.qpSum/o.framesEncoded:(o.qpSum-h.lastQpSum)/(o.framesEncoded-h.lastFrameCount)),this.lastEncoderMs.set(o.ssrc,{lastFrameCount:o.framesEncoded,lastEncoderTime:o.totalEncodeTime,lastQpSum:o.qpSum,lts:Date.now()}),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.mediaSourceId&&this.processVideoMediaSource(o.mediaSourceId,c),o.trackId&&this.processVideoTrackSenderStats(o.trackId,c),o.remoteId)this.processRemoteInboundStats(o.remoteId,c);else{var C=this.findRemoteStatsId(o.ssrc,gl.REMOTE_INBOUND);C&&this.processRemoteInboundStats(C,c)}},i.prototype.processAudioOutboundStats=function(o){var c=this._stats.audioSend.find(function(g){return g.ssrc===o.ssrc});if(c||(c=xh(gB),this._stats.audioSend.push(c)),c.ssrc=o.ssrc,c.packets=o.packetsSent,c.bytes=o.bytesSent,o.mediaSourceId&&this.processAudioMediaSource(o.mediaSourceId,c),o.codecId&&(c.codec=this.getCodecFromCodecStats(o.codecId)),o.trackId&&this.processAudioTrackSenderStats(o.trackId,c),o.remoteId)this.processRemoteInboundStats(o.remoteId,c);else{var h=this.findRemoteStatsId(o.ssrc,gl.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,c)}},i.prototype.findRemoteStatsId=function(o,c){var h=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===o});return h?h.id:null},i.prototype.processVideoMediaSource=function(o,c){var h=this.report.get(o);h&&h.width&&h.height&&h.framesPerSecond&&(c.inputFrame={width:h.width,height:h.height,frameRate:h.framesPerSecond})},i.prototype.processAudioMediaSource=function(o,c){var h=this.report.get(o);h&&(c.inputLevel=h.audioLevel)},i.prototype.processVideoTrackSenderStats=function(o,c){var h=this.report.get(o);if(h){var g=0,p=Date.now(),v=this.lastVideoFramesSent.get(c.ssrc);v&&p-v.lts>=800?(g=Math.round((h.framesSent-v.count)/((p-v.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:p,rate:g})):v?g=v.rate:this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:p,rate:0}),c.sentFrame={width:h.frameWidth,height:h.frameHeight,frameRate:g}}},i.prototype.processVideoTrackReceiverStats=function(o,c){var h=this.report.get(o);if(h){var g=this.lastVideoFramesRecv.get(c.ssrc),p=Date.now();c.framesReceivedCount=h.framesReceived;var v=0;if(g&&p-g.lts>=800?(v=Math.round((h.framesReceived-g.count)/((p-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:p,rate:v})):g?v=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:p,rate:0}),c.receivedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:v||0},c.decodedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},h.jitterBufferDelay&&h.jitterBufferEmittedCount){var _=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),_||(_={jitterBufferDelay:0,jitterBufferEmittedCount:0});var y=1e3*(h.jitterBufferDelay-_.jitterBufferDelay)/(h.jitterBufferEmittedCount-_.jitterBufferEmittedCount);c.jitterBufferMs=y,c.currentDelayMs=Math.round(y)}}},i.prototype.processAudioTrackSenderStats=function(o,c){var h=this.report.get(o);h&&(c.aecReturnLoss=h.echoReturnLoss||0,c.aecReturnLossEnhancement=h.echoReturnLossEnhancement||0)},i.prototype.processAudioTrackReceiverStats=function(o,c){var h=this.report.get(o);if(h){if(h.removedSamplesForAcceleration&&h.totalSamplesReceived&&(c.accelerateRate=h.removedSamplesForAcceleration/h.totalSamplesReceived),h.jitterBufferDelay&&h.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(h.jitterBufferDelay-g.jitterBufferDelay)/(h.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=h.audioLevel;var v=1920;h.totalSamplesDuration&&h.totalSamplesReceived&&(v=h.totalSamplesReceived/h.totalSamplesDuration/50,c.receivedFrames=Math.round(h.totalSamplesReceived/v)),h.concealedSamples&&(c.droppedFrames=Math.round(h.concealedSamples/v))}},i.prototype.processRemoteInboundStats=function(o,c){var h=this.report.get(o);h&&(c.packetsLost=h.packetsLost,h.roundTripTime&&(c.rttMs=1e3*h.roundTripTime))},i.prototype.getCodecFromCodecStats=function(o){var c=this.report.get(o);if(!c)return"";var h=c.mimeType.match(/\/(.*)$/);return h&&h[1]?h[1]:""},i.prototype.updateSendBitrate=function(){var o=0,c=null,h=null;this.mediaBytesSent.forEach(function(p){o+=p.diffMean()}),this.mediaBytesRetransmit.forEach(function(p){c=null===c?p.diffMean():c+p.diffMean()}),this.mediaBytesTargetEncode.forEach(function(p){h=null===h?p.diffMean():h+p.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?o-c:o)/(this.options.updateInterval/1e3),transmit:8*o/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==h&&(this._stats.bitrate.targetEncoded=8*h/(this.options.updateInterval/1e3))},i}(_B),tG=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return pB(i,n),i.prototype.updateStats=function(){return Promise.resolve()},i}(_B);function Lv(n,i,o,c){void 0===i&&(i=250),void 0===o&&(o=8),void 0===c&&(c=500);var h,g=(h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&h[0]?Number(h[0].split("/")[1]):null;return g?g<76?new eG(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):new X5(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):window.RTCStatsReport&&n.getStats()instanceof Promise?new X5(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c}):new tG(n,{updateInterval:i,lossRateInterval:o,freezeRateLimit:c})}function N2(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function P2(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?N2(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):N2(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let M2=(rr((Ti=class Sj extends o3{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(i,o){super(i,o),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",!1),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new au("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(Sj.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=Lv(this.peerConnection,void 0,void 0,Es()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return L(function*(){try{const o=yield i.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=f0(o.sdp),h=dB(o.sdp,!i.useRTX,!1,["opus"]);return i.localCapabilities=h,i.initialOffer=o,P2(P2({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:h},offerSDP:o.sdp})}catch(o){throw new Pe(Ie.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}})()}connect(i,o,c,h,g,p){var v=this;return L(function*(){try{if(!v.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");v.remoteSDP=new $H({remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h.send,remoteSetup:g,localCapabilities:v.localCapabilities,sdkCodec:v.store.codec,cname:p});const _=v.remoteSDP.toString();yield v.peerConnection.setLocalDescription(v.initialOffer),yield v.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,o){var c=this;return J1(function*(){const h=yield cs(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=i.map(R=>c.peerConnection.addTrack(R._mediaStreamTrack)),p=yield cs(c.peerConnection.createOffer()),v=$l.exports.parse(p.sdp),_=i.map(R=>{const N=R._mediaStreamTrack,j=v.mediaDescriptions.find(Q=>Q.attributes.mid===N.kind);if(!j)throw new Error("Cannot extract ssrc from mediaDescription.");return function(Q,$,ae){const fe=Q.attributes.ssrcs.filter(Re=>Re.attributes.label===$),Ae=Q.attributes.ssrcGroups;if(0===fe.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Ae&&fe.length>1){const Re=Ae.find(tt=>-1!==tt.ssrcIds.indexOf(fe[0].ssrcId));return Re?[{ssrcId:Re.ssrcIds[0],rtx:ae?Re.ssrcIds[1]:void 0}]:[{ssrcId:fe[0].ssrcId}]}return[{ssrcId:fe[0].ssrcId}]}(j,N.id,c.useRTX)});let y;try{y=yield _}catch(R){throw g.forEach(N=>{Md()&&N.replaceTrack(null),c.peerConnection.removeTrack(N)}),R}const b=c.mungSendOfferSDP(p.sdp,i);c.remoteSDP.receive(i,o,y);const C=c.remoteSDP.toString();return yield cs(c.peerConnection.setLocalDescription({type:"offer",sdp:b})),yield cs(c.applySendEncodings(g,i)),yield cs(c.peerConnection.setRemoteDescription({type:"answer",sdp:C})),i.map((R,N)=>({localSSRC:_[N],id:R._mediaStreamTrack.id}))}catch(g){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{h()}})()}stopSending(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=o.peerConnection.getSenders().filter(p=>{var v;return-1!==i.indexOf((null===(v=p.track)||void 0===v?void 0:v.id)||"")});if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(p=>{Md()&&p.replaceTrack(null),o.peerConnection.removeTrack(p)});const h=yield o.peerConnection.createOffer();yield o.peerConnection.setLocalDescription(h),o.remoteSDP.stopReceiving(i);const g=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(i,o,c,h){var g=this;return L(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{id:p,mslabel:v}=g.remoteSDP.send(i,o,h),_=new jn((C,R)=>{const N=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(p)))},1e4),j=Q=>{const $=Ki();if(("Safari"===$.name&&11===Number($.version)||Iu())&&Q.track.id!==p&&Q.streams[0].id===v){var ae;const fe=Q.streams[0].getTracks()[0];return null===(ae=g.remoteSDP)||void 0===ae||ae.updateTrackLabel(i,p,Q.track.id),g.peerConnection.removeEventListener("track",j),clearTimeout(N),void C(fe)}if(Q.track.id===p)return g.peerConnection.removeEventListener("track",j),clearTimeout(N),void C(Q.track)};g.peerConnection.addEventListener("track",j)}),y=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const b=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(b),{track:yield _,id:p}}catch(p){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(p.toString()))}})()}stopReceiving(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");o.remoteSDP.stopSending(i);const c=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const h=yield o.peerConnection.createAnswer();yield o.peerConnection.setLocalDescription(h)}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){return L(function*(){})()}unmuteRemote(i){return L(function*(){})()}muteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=o.peerConnection.getSenders().filter(h=>{var g;return-1!==i.indexOf((null===(g=h.track)||void 0===g?void 0:g.id)||"")});if(c.length!==i.length)throw new Error("sender' length doesn't match mids' length.");c.map(h=>{if(Md()&&h.track)h.track.enabled=!1;else{const g=h.getParameters();g.encodings.forEach(p=>p.active=!1),h.setParameters(g)}})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=o.peerConnection.getSenders().filter(p=>{var v;return-1!==i.indexOf((null===(v=p.track)||void 0===v?void 0:v.id)||"")});if(c.length!==i.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var p=L(function*(v){if(Md()&&v.track)v.track.enabled=!0;else{const _=v.getParameters();_.encodings.forEach(y=>y.active=!0),yield v.setParameters(_)}});return function(v){return p.apply(this,arguments)}}());const h=yield o.peerConnection.createOffer();yield o.peerConnection.setLocalDescription(h);const g=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return L(function*(){const o=yield i.peerConnection.createOffer({iceRestart:!0});if(!o.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:f0(o.sdp).iceParameters,restartICE:(c=L(function*(h,g){return i.restartICE(o,h,g)}),function(g,p){return c.apply(this,arguments)}),restartOfferSDP:o.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,o){var c=this;return L(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[o]);c.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const p=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(h){throw new Pe(Ie.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(i,o){var c=this;return L(function*(){const h=c.peerConnection.getSenders().filter(g=>{var p;return(null===(p=g.track)||void 0===p?void 0:p.id)===i});1===h.length&&(yield c.applySendEncodings(h,[o]))})()}setStatsRemoteVideoIsReady(i,o){this.statsFilter.setVideoIsReady2(i,o)}replaceTrack(i,o){var c=this;return L(function*(){const h=c.peerConnection.getSenders().find(g=>{var p;return(null===(p=g.track)||void 0===p?void 0:p.id)===o});h&&(yield h.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,o,c){var h=this;return L(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(o,c);const g=h.remoteSDP.toString();yield h.peerConnection.setLocalDescription(i),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Bt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const o={iceServers:[],sdpSemantics:"plan-b"};return i.iceServers?o.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(GM(i.turnServer.servers)?o.iceServers=i.turnServer.servers:(o.iceServers&&o.iceServers.push(...Sj.turnServerConfigToIceServers(i.turnServer.servers)),Bt("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&i.turnServer.serversFromGateway&&o.iceServers.push(...Sj.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(i){const o=[];return i.forEach(c=>{c.security?c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),o}applySendEncodings(i,o){return L(function*(){try{if(!Rc().supportSetRtpSenderParameters||i.length!==o.length)return;for(let h=0;h<i.length;h++){var c;const g=i[h],p=o[h];if(!p)continue;const v={},_={};if(p instanceof Os)switch(p._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(Bt("DSCP_TYPE")&&xT()){const C=Bt("DSCP_TYPE");["very-low","low","medium","high"].includes(C)&&(_.networkPriority=C)}const y=g.getParameters(),b=null===(c=y.encodings)||void 0===c?void 0:c[0];b&&Object.assign(b,_),Object.assign(y,v),yield g.setParameters(y)}}catch{oe.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,o){const c=$l.exports.parse(i);return o.forEach((h,g)=>{const p=h._mediaStreamTrack,v=c.mediaDescriptions.find(_=>_.attributes.mid===p.kind);v&&D2(v,h)}),$l.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var o;null===(o=this.onFirstAudioReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var o;null===(o=this.onFirstVideoReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var o;null===(o=this.onFirstAudioDecoded)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,o,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,i,o,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=o.remoteSDP.batchSend(i).map((p,v)=>{let{id:_,mslabel:y}=p;const{kind:b}=i[v];return new jn((C,R)=>{const N=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(_)))},1e4),j=Q=>{const $=Ki();if("Safari"===$.name&&11===Number($.version)&&Q.track.id!==_&&Q.streams[0].id===y){var ae;const fe=Q.streams[0].getTracks()[0];return null===(ae=o.remoteSDP)||void 0===ae||ae.updateTrackLabel(b,_,Q.track.id),o.peerConnection.removeEventListener("track",j),clearTimeout(N),void C({track:fe,id:_})}if(Q.track.id===_)return o.peerConnection.removeEventListener("track",j),clearTimeout(N),void C({track:Q.track,id:_})};o.peerConnection.addEventListener("track",j)})}),h=o.remoteSDP.toString();yield o.peerConnection.setRemoteDescription({type:"offer",sdp:h});const g=yield o.peerConnection.createAnswer();return yield o.peerConnection.setLocalDescription(g),yield jn.all(c)}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"connect"),Ti.prototype),rr(Ti.prototype,"stopSending",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"stopSending"),Ti.prototype),rr(Ti.prototype,"receive",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"receive"),Ti.prototype),rr(Ti.prototype,"stopReceiving",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"stopReceiving"),Ti.prototype),rr(Ti.prototype,"muteRemote",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"muteRemote"),Ti.prototype),rr(Ti.prototype,"unmuteRemote",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"unmuteRemote"),Ti.prototype),rr(Ti.prototype,"muteLocal",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"muteLocal"),Ti.prototype),rr(Ti.prototype,"unmuteLocal",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"unmuteLocal"),Ti.prototype),rr(Ti.prototype,"reEstablish",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"reEstablish"),Ti.prototype),rr(Ti.prototype,"close",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"close"),Ti.prototype),rr(Ti.prototype,"updateEncoderConfig",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"updateEncoderConfig"),Ti.prototype),rr(Ti.prototype,"updateSendParameters",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"updateSendParameters"),Ti.prototype),rr(Ti.prototype,"replaceTrack",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"replaceTrack"),Ti.prototype),rr(Ti.prototype,"restartICE",[ed],Object.getOwnPropertyDescriptor(Ti.prototype,"restartICE"),Ti.prototype),Ti);function ed(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("Locking from P2PConnection.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}var $5;let nG=sc("RemoteSDP")($5=class{get localCapabilities(){return Ha(this._localCapabilities)}get rtpCapabilities(){return Ha(this._rtpCapabilities)}get candidates(){return Ha(this._candidates)}get iceParameters(){return Ha(this._iceParameters)}get dtlsParameters(){return Ha(this._dtlsParameters)}constructor(n){q(this,"sessionDesc",void 0),q(this,"_localCapabilities",void 0),q(this,"_rtpCapabilities",void 0),q(this,"_candidates",void 0),q(this,"_iceParameters",void 0),q(this,"_dtlsParameters",void 0),q(this,"setup",void 0),q(this,"currentMidIndex",void 0),q(this,"cname",void 0),q(this,"firefoxSsrcMidMap",new Map),n=Ha(n);const{remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:p,cname:v}=n,_=$l.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=h,this._candidates=c,this._iceParameters=i,this._dtlsParameters=o,this._localCapabilities=p,this.setup=g,this.cname=v;const y=this.rtpCapabilities.send;for(const b of _.mediaDescriptions){if(b.attributes.iceUfrag=i.iceUfrag,b.attributes.icePwd=i.icePwd,b.attributes.fingerprints=o.fingerprints,b.attributes.candidates=c,b.attributes.setup=g,"video"===b.media.mediaType&&(b.media.fmts=y.videoCodecs.map(C=>C.payloadType.toString(10)),b.attributes.payloads=y.videoCodecs,b.attributes.extmaps=y.videoExtensions,Bt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:C,ssrcGroups:R}=m0([{ssrcId:4e4,rtx:Bt("USE_RTX")?40001:void 0}],this.cname);b.attributes.ssrcs=C,b.attributes.ssrcGroups=R}if("audio"===b.media.mediaType&&(b.media.fmts=y.audioCodecs.map(C=>C.payloadType.toString(10)),b.attributes.payloads=y.audioCodecs,b.attributes.extmaps=y.audioExtensions,Bt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:C,ssrcGroups:R}=m0([{ssrcId:2e4}],this.cname);b.attributes.ssrcs=C,b.attributes.ssrcGroups=R}}this.sessionDesc=_,this.currentMidIndex=_.mediaDescriptions.length-1}preloadRemoteMedia(){const n=Bt("PRELOAD_MEDIA_COUNT");Yt("debug",this,"preloadRemoteMedia",n);const i=this.candidates,o=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<n;g++){const p=2*g+2e4,v=2*g+4e4,{ssrcs:_,ssrcGroups:y}=m0([{ssrcId:p}],this.cname),{ssrcs:b,ssrcGroups:C}=m0([{ssrcId:v,rtx:Bt("USE_RTX")?v+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:h.videoExtensions,fingerprints:o.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:b,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:i,extmaps:h.audioExtensions,fingerprints:o.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return $l.exports.print(this.sessionDesc)}send(n,i,o,c){const{ssrcs:h,ssrcGroups:g}=m0(i,this.cname,o),p=this.findPreloadMediaDesc(h);if(p){if(Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,p.attributes.mid),c&&(c.tcc||c.remb)){const v=this.sessionDesc.mediaDescriptions.indexOf(p);return this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(p,c),{mid:p.attributes.mid,needExchangeSDP:!0}}return{mid:p.attributes.mid,needExchangeSDP:!1}}{const v=this.findAvailableMediaIndex(n,h);if(Md()||vU()){if(-1!==v&&1!==v){const _=Ha(this.sessionDesc.mediaDescriptions[v]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(_,c),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),{mid:_.attributes.mid,needExchangeSDP:!0}}}if(-1!==v){const _=Ha(this.sessionDesc.mediaDescriptions[v]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[v]=this.mungSendMediaDesc(_,c),Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),Es()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}}}batchSend(n){const i=n.map(h=>{let{kind:g,ssrcMsg:p,mslabel:v}=h;return this.send(g,p,v)}),o=[];let c=!1;return i.forEach(h=>{let{mid:g,needExchangeSDP:p}=h;p&&(c=!0),o.push(g)}),{mids:o,needExchangeSDP:c}}stopSending(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>o.attributes.mid&&-1!==n.indexOf(o.attributes.mid));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(o=>{"0"===o.attributes.mid||Es()||Md()||vU()?o.attributes.ssrcs=[]:(o.attributes.ssrcs=[],o.attributes.direction="inactive",o.media.port="0")}),this.updateBundleMids()}mute(n){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>n.includes(o.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(o=>{o.attributes.direction="inactive"})}unmuteRemote(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>n.includes(o.attributes.mid||""));if(i.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(o=>{o.attributes.direction="recvonly"})}receive(n,i,o,c){n.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",i,o,c[g])}),this.updateBundleMids()}stopReceiving(n){const i=this.sessionDesc.mediaDescriptions.filter(o=>-1!==n.indexOf(o.attributes.mid));if(i.length!==n.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(o=>{o.media.port="0",o.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(n,i){n=Ha(n),i=Ha(i),this._iceParameters=n,this._candidates=i,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=n.iceUfrag,o.attributes.icePwd=n.icePwd,o.attributes.candidates=this.candidates})}predictReceivingMids(n){const i=[];for(let o=0;o<n;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}findAvailableMediaIndex(n,i){return this.sessionDesc.mediaDescriptions.findIndex(o=>{const c=o.media.mediaType===n&&"0"!==o.media.port&&("sendonly"===o.attributes.direction||"sendrecv"===o.attributes.direction)&&0===o.attributes.ssrcs.length;if(Es()){if(c){const h=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(h||"0"!==o.attributes.mid&&"1"!==o.attributes.mid)||!(!h||h!==o.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(n,i,o,c,h,g){const p=n._mediaStreamTrack.kind,v=this.rtpCapabilities.recv,_=this.localCapabilities.send;let y=[];if(p===Zr.VIDEO){var b,C;if(Bt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(y=v.videoCodecs.filter($=>{var ae,fe;return((null===(ae=$.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes(c)&&(null==$||null===(fe=$.fmtp)||void 0===fe?void 0:fe.parameters["profile-level-id"])===Bt("H264_PROFILE_LEVEL_ID")})),!y||0===(null===(b=y)||void 0===b?void 0:b.length)){const $=_.videoCodecs.filter(ae=>{var fe;return((null===(fe=ae.rtpMap)||void 0===fe?void 0:fe.encodingName.toLowerCase())||"").includes(c)});0!==$.length&&(y=v.videoCodecs.filter(ae=>$.some(fe=>fe.payloadType===ae.payloadType)))}if(Bt("USE_RTX")){const $=y.map(fe=>fe.payloadType.toString()),ae=v.videoCodecs.filter(fe=>{var Ae,Re;return"rtx"===(null===(Ae=fe.rtpMap)||void 0===Ae?void 0:Ae.encodingName)&&$.includes((null===(Re=fe.fmtp)||void 0===Re?void 0:Re.parameters.apt)||"")});y=[...y,...ae]}0===y.length&&(oe.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(C=v.videoCodecs[0].rtpMap)||void 0===C?void 0:C.encodingName)),y=v.videoCodecs)}else y=v.audioCodecs.filter($=>{var ae;return((null===(ae=$.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes(h)}),0===y.length&&(oe.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=v.audioCodecs.filter($=>{var ae;return((null===(ae=$.rtpMap)||void 0===ae?void 0:ae.encodingName.toLowerCase())||"").includes("opus")}));const R=p===Zr.VIDEO?v.videoExtensions:v.audioExtensions;this.currentMidIndex+=1;const N="".concat(this.currentMidIndex);let j={media:{mediaType:p,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map($=>$.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:R,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:o,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(N)}};j=this.mungRecvMediaDsec(j,n,g);const Q=this.findFirstClosedMedia(p);if(Q){const $=this.sessionDesc.mediaDescriptions.indexOf(Q);this.sessionDesc.mediaDescriptions[$]=j}else this.sessionDesc.mediaDescriptions.push(j);return j}createOrRecycleSendMedia(n,i,o,c,h){const g=this.rtpCapabilities.send,p=n===Zr.VIDEO?g.videoCodecs:g.audioCodecs,v=n===Zr.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const _="".concat(this.currentMidIndex);let y={media:{mediaType:n,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(C=>C.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:o,rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};y=this.mungSendMediaDesc(y,h);const b=this.findFirstClosedMedia(n);if(b){const C=this.sessionDesc.mediaDescriptions.indexOf(b);this.sessionDesc.mediaDescriptions[C]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(n=>"0"!==n.media.port).map(n=>n.attributes.mid)}mungRecvMediaDsec(n,i,o){const c=Ha(n);return Zl(c),D2(c,i),hB(c,i),function(h){if("video"!==h.media.mediaType)return;const g=Ki();if(g.name!==xi.SAFARI&&g.os!==pa.IOS)return;const p=h.attributes.extmaps.findIndex(v=>/video-orientation/g.test(v.extensionName));-1!==p&&h.attributes.extmaps.splice(p,1)}(c),tw(c,o,this.localCapabilities.send),c}mungSendMediaDesc(n,i){const o=Ha(n);return tw(o,i,this.localCapabilities.recv),o}updateRecvMedia(n,i){const o=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===n);if(-1!==o){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=c}}bumpMid(n){this.currentMidIndex+=n}findFirstClosedMedia(n){return this.sessionDesc.mediaDescriptions.find(i=>Es()?"0"===i.media.port&&i.media.mediaType===n:"0"===i.media.port)}findPreloadMediaDesc(n){return this.sessionDesc.mediaDescriptions.find(i=>{var o,c;return(null===(o=i.attributes)||void 0===o||null===(c=o.ssrcs[0])||void 0===c?void 0:c.ssrcId)===n[0].ssrcId})}getSSRC(n){var i;return null===(i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n))||void 0===i?void 0:i.attributes.ssrcs}})||$5;var L2,wi;function rw(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function B2(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?rw(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):rw(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let F2=sc("P2PConnection","store.p2pId")((rr((wi=class Cj extends o3{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(i,o){super(i,o),q(this,"store",void 0),q(this,"peerConnection",void 0),q(this,"remoteSDP",void 0),q(this,"initialOffer",void 0),q(this,"transportEventReceiver",void 0),q(this,"statsFilter",void 0),q(this,"useRTX",Bt("USE_RTX")),q(this,"localCapabilities",void 0),q(this,"localCandidateCount",0),q(this,"allCandidatesReceived",!1),q(this,"mutex",new au("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(Cj.resolvePCConfiguration(i),{optional:[{googDscp:!0}]}),this.statsFilter=Lv(this.peerConnection,void 0,void 0,Es()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var i=this;return L(function*(){try{i.peerConnection.addTransceiver("video",{direction:"recvonly"}),i.peerConnection.addTransceiver("audio",{direction:"recvonly"});const o=yield i.peerConnection.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=f0(o.sdp),h=yield(g=L(function*(p,v,_,y){const b=new RTCPeerConnection;b.addTransceiver("video",{direction:"sendonly"}),b.addTransceiver("audio",{direction:"sendonly"}),b.addTransceiver("video",{direction:"recvonly"}),b.addTransceiver("audio",{direction:"recvonly"});const C=(yield b.createOffer()).sdp,R=dB(C,p,v,_,y,"sendonly"),N=dB(C,p,v,_,y,"recvonly"),j={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},Q={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},$={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(rE(R,N,"videoExtensions",j,Q,$),rE(R,N,"videoCodecs",j,Q,$),rE(R,N,"audioExtensions",j,Q,$),rE(R,N,"audioCodecs",j,Q,$),Bt("RAISE_H264_BASELINE_PRIORITY")){const ae=$.videoCodecs.findIndex(fe=>{var Ae,Re;return"h264"===(null===(Ae=fe.rtpMap)||void 0===Ae?void 0:Ae.encodingName.toLocaleLowerCase())&&"42001f"===(null===(Re=fe.fmtp)||void 0===Re?void 0:Re.parameters["profile-level-id"])});if(-1!==ae){const fe=$.videoCodecs.findIndex(Ae=>{var Re;return"h264"===(null===(Re=Ae.rtpMap)||void 0===Re?void 0:Re.encodingName.toLocaleLowerCase())});if(fe<ae){oe.debug("raising H264 baseline profile priority");const Ae=$.videoCodecs[ae];$.videoCodecs.splice(ae,1),$.videoCodecs.splice(fe,0,Ae)}-1!==fe&&(Q.videoCodecs=Q.videoCodecs.filter(Ae=>{var Re,tt;return!("h264"===(null===(Re=Ae.rtpMap)||void 0===Re?void 0:Re.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(tt=Ae.fmtp)||void 0===tt?void 0:tt.parameters["profile-level-id"]))})),-1!==fe&&Bt("FILTER_SEND_H264_BASELINE")&&(j.videoCodecs=j.videoCodecs.filter(Ae=>{var Re,tt;return!("h264"===(null===(Re=Ae.rtpMap)||void 0===Re?void 0:Re.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(tt=Ae.fmtp)||void 0===tt?void 0:tt.parameters["profile-level-id"]))}))}}try{b.close()}catch{}return{send:j,recv:Q,sendrecv:$}}),function(p,v,_,y){return g.apply(this,arguments)})(!i.useRTX,!1);return i.localCapabilities=z5(h),i.initialOffer=o,B2(B2({},c),{},{rtpCapabilities:h,offerSDP:o.sdp})}catch(o){throw new Pe(Ie.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}var g})()}connect(i,o,c,h,g,p){var v=this;return L(function*(){try{if(!v.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");v.remoteSDP=new nG({remoteIceParameters:i,remoteDtlsParameters:o,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:v.localCapabilities,cname:p});const _=v.remoteSDP.toString(),y=v.logSDPExchange(v.initialOffer.sdp||"","offer","local","connect");yield v.peerConnection.setLocalDescription(v.initialOffer),y?.(_),yield v.peerConnection.setRemoteDescription({type:"answer",sdp:_});const b=v.peerConnection.getTransceivers()[0];if(null!=b&&b.receiver&&v.tryBindTransportEvents(b.receiver),Bt("PRELOAD_MEDIA_COUNT")>0){v.remoteSDP.preloadRemoteMedia();const C=v.remoteSDP.toString();yield v.peerConnection.setRemoteDescription({type:"offer",sdp:C});const R=yield v.peerConnection.createAnswer();yield v.peerConnection.setLocalDescription(R)}}catch(_){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(i,o,c){var h=this;return J1(function*(){const g=yield cs(h.mutex.lock());try{if(!h.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];i.forEach(Q=>{const $=h.peerConnection.addTransceiver(Q._mediaStreamTrack,{direction:"sendonly"});p.push($)}),Es()&&!0===Bt("SIMULCAST")&&(Ln("debug",h,"apply simulcast for firefox"),yield cs(h.applySimulcastForFirefox(p,i)));const v=yield cs(h.peerConnection.createOffer()),_=h.remoteSDP.predictReceivingMids(i.length),y=h.mungSendOfferSDP(v.sdp,i,_),b=$l.exports.parse(y),C=_.map(Q=>{const $=b.mediaDescriptions.find(ae=>ae.attributes.mid===Q);if(!$)throw new Error("Cannot extract ssrc from mediaDescription.");return function(ae,fe){const Ae=[],Re=ae.attributes.ssrcGroups.filter(Mt=>"FID"===Mt.semantic),tt=ae.attributes.ssrcGroups.find(Mt=>"SIM"===Mt.semantic),Tt=ae.attributes.ssrcs;if(tt)tt.ssrcIds.forEach(Mt=>{var Ct;const Sn=null===(Ct=Re.find(on=>on.ssrcIds[0]===Mt))||void 0===Ct?void 0:Ct.ssrcIds[1];Ae.push({ssrcId:Mt,rtx:fe?Sn:void 0})});else if(Re.length>0){const Ct=Re[0].ssrcIds[1];Ae.push({ssrcId:Re[0].ssrcIds[0],rtx:fe?Ct:void 0})}else{if(0===Tt.length)throw new Error("No ssrcs found on local media description.");Ae.push({ssrcId:Tt[0].ssrcId})}return Ae}($,h.useRTX)});let R;try{R=yield C}catch(Q){R=[],h.remoteSDP.receive(i,o,c,R);const $=h.remoteSDP.toString();throw yield cs(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield cs(h.peerConnection.setRemoteDescription({type:"answer",sdp:$})),yield cs(h.stopSending(_,!0)),Q}h.remoteSDP.receive(i,o,c,R);const N=h.remoteSDP.toString(),j=h.logSDPExchange(y,"offer","local","send");return yield cs(h.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield cs(h.applySimulcastEncodings(p,i)),yield cs(h.applySendEncodings(p,i)),j?.(N),yield cs(h.peerConnection.setRemoteDescription({type:"answer",sdp:N})),p.map((Q,$)=>({localSSRC:C[$],id:_[$],transceiver:Q}))}catch(p){throw p instanceof Pe?p:new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{g()}})()}stopSending(i,o){var c=this;return L(function*(){const h=o?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(y=>-1!==i.indexOf(y.mid));if(g.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(y=>{var b;y.direction="inactive",null===(b=y.stop)||void 0===b||b.call(y)});const p=yield c.peerConnection.createOffer(),v=c.logSDPExchange(p.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(p),c.remoteSDP.stopReceiving(i);const _=c.remoteSDP.toString();v?.(_),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(g){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(i,o,c,h){var g=this;return L(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(i," before remoteSDP created."));const{mid:p,needExchangeSDP:v}=g.remoteSDP.send(i,o,c,h);if(v){const y=g.remoteSDP.toString(),b=g.logSDPExchange(y,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:y});const C=yield g.peerConnection.createAnswer();b?.(C.sdp||""),yield g.peerConnection.setLocalDescription(C),oe.debug("[P2PConnection] receive ".concat(i," by exchanging SDP."))}else oe.debug("[P2PConnection] receive ".concat(i," no need to exchange SDP."));const _=g.peerConnection.getTransceivers().find(y=>y.mid===p);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:p}}catch(p){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(p.toString()))}})()}batchReceive(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=o.remoteSDP.batchSend(i);if(h){const g=o.remoteSDP.toString(),p=o.logSDPExchange(g,"offer","remote","receive");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:g});const v=yield o.peerConnection.createAnswer();p?.(v.sdp||""),yield o.peerConnection.setLocalDescription(v),oe.debug("[P2PConnection] batchReceive by exchanging SDP.")}else oe.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const p=o.peerConnection.getTransceivers().find(v=>v.mid===g);if(!p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,id:g}})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");o.remoteSDP.stopSending(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","stopReceiving");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(i," before remote SDP created."));o.remoteSDP.mute(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","muteRemote");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(i," before remote SDP created."));o.remoteSDP.unmute(i);const c=o.remoteSDP.toString(),h=o.logSDPExchange(c,"offer","remote","unmuteRemote");yield o.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield o.peerConnection.createAnswer();h?.(g.sdp||""),yield o.peerConnection.setLocalDescription(g)}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=o.peerConnection.getTransceivers().filter(v=>v.mid&&-1!==i.indexOf(v.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(v=>{v.direction="inactive"});const h=yield o.peerConnection.createOffer(),g=o.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield o.peerConnection.setLocalDescription(h),o.remoteSDP.muteRemote(i);const p=o.remoteSDP.toString();g?.(p),yield o.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(i){var o=this;return L(function*(){try{if(!o.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=o.peerConnection.getTransceivers().filter(v=>v.mid&&-1!==i.indexOf(v.mid));if(c.length!==i.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var v=L(function*(_,y){_.direction="sendonly"});return function(_,y){return v.apply(this,arguments)}}());const h=yield o.peerConnection.createOffer(),g=o.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield o.peerConnection.setLocalDescription(h),o.remoteSDP.unmuteRemote(i);const p=o.remoteSDP.toString();g?.(p),yield o.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(c){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var i=this;return L(function*(){const o=yield i.peerConnection.createOffer({iceRestart:!0});if(!o.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:f0(o.sdp).iceParameters,restartICE:(c=L(function*(h,g){return i.restartICE(o,h,g)}),function(g,p){return c.apply(this,arguments)}),restartOfferSDP:o.sdp};var c})()}close(){var i;this.peerConnection.close(),null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(i){return this.statsFilter.getVideoIsReady(i)}updateEncoderConfig(i,o){var c=this;return L(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[o],[i]);c.remoteSDP.updateRecvMedia(i,o);const p=c.remoteSDP.toString(),v=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),v?.(p),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(h){throw new Pe(Ie.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(i,o){var c=this;return L(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===i);1===h.length&&(c.isVP8Simulcast(o)?Es()||(yield c.applySimulcastEncodings(h,[o])):yield c.applySendEncodings(h,[o]))})()}setStatsRemoteVideoIsReady(i,o){this.statsFilter.setVideoIsReady2(i,o)}replaceTrack(i,o){var c=this;return L(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===o);h&&(yield h.sender.replaceTrack(i._mediaStreamTrack))})()}restartICE(i,o,c){var h=this;return L(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(o,c);const g=h.remoteSDP.toString(),p=h.logSDPExchange(i.sdp||"","offer","local","restartICE");yield h.peerConnection.setLocalDescription(i),p?.(g),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new Pe(Ie.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var i;null===(i=this.onICEConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var i;null===(i=this.onConnectionStateChange)||void 0===i||i.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=i=>{i.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oe.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Bt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(i){const o={iceServers:[]};return i.iceServers?o.iceServers=i.iceServers:i.turnServer&&"off"!==i.turnServer.mode&&(GM(i.turnServer.servers)?o.iceServers=i.turnServer.servers:(o.iceServers&&o.iceServers.push(...Cj.turnServerConfigToIceServers(i.turnServer.servers)),Bt("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&i.turnServer.serversFromGateway&&o.iceServers.push(...Cj.turnServerConfigToIceServers(i.turnServer.serversFromGateway)),i.turnServer.servers.concat(i.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(i){const o=[];return i.forEach(c=>{c.security?c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Bk(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&o.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),o}tryBindTransportEvents(i){i.transport&&(this.transportEventReceiver=i,i.transport.onstatechange=()=>{var o,c;null!==(o=i.transport)&&void 0!==o&&o.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,i.transport.state))},i.transport.onerror=o=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,o.error)},i.transport.iceTransport&&(i.transport.iceTransport.onstatechange=()=>{var o,c,h;null!==(o=i.transport)&&void 0!==o&&o.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(h=i.transport)||void 0===h?void 0:h.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(i,o){var c=this;return L(function*(){try{if(!Rc().supportSetRtpSenderParameters||i.length!==o.length)return;for(let b=0;b<i.length;b++){const C=i[b],R=o[b];if(R&&R instanceof Os){var h,g;if(c.isVP8Simulcast(R))continue;const N={},j={};switch(R._optimizationMode){case"motion":N.degradationPreference="maintain-framerate";break;case"detail":N.degradationPreference="maintain-resolution";break;default:N.degradationPreference="balanced"}var p,v,_,y;if(null!==(h=R._encoderConfig)&&void 0!==h&&h.bitrateMax&&(j.maxBitrate=1e3*(null===(p=R._encoderConfig)||void 0===p?void 0:p.bitrateMax)),R._hints.includes(wc.LOW_STREAM)&&(null!==(v=R._encoderConfig)&&void 0!==v&&v.frameRate&&(j.maxFramerate=Tv(R._encoderConfig.frameRate)),null!==(_=R._encoderConfig)&&void 0!==_&&_.scaleResolutionDownBy&&(null===(y=R._encoderConfig)||void 0===y?void 0:y.scaleResolutionDownBy)>1&&(j.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),Bt("DSCP_TYPE")&&xT()){const ae=Bt("DSCP_TYPE");["very-low","low","medium","high"].includes(ae)&&(j.networkPriority=ae)}const Q=C.sender.getParameters(),$=null===(g=Q.encodings)||void 0===g?void 0:g[0];Es()&&!$&&(N.encodings=[j]),$&&Object.assign($,j),Object.assign(Q,N),yield C.sender.setParameters(Q)}}}catch{oe.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(i,o,c){const h=$l.exports.parse(i);return o.forEach((g,p)=>{const v=c[p],_=h.mediaDescriptions.find(y=>y.attributes.mid===v);_&&(D2(_,g),function(y,b,C){if(Es()||"video"!==y.media.mediaType||!(b instanceof Os)||"vp9"!==C&&"vp8"!==C||"vp8"===C&&!Bt("SIMULCAST")||void 0===b._scalabiltyMode||b._scalabiltyMode.numSpatialLayers<=1)return;const R="vp8"===C?2:b._scalabiltyMode.numSpatialLayers,N=y.attributes.ssrcs[0],j=y.attributes.ssrcGroups.find($=>"FID"===$.semantic&&$.ssrcIds[0]===N.ssrcId),Q={semantic:"SIM",ssrcIds:[N.ssrcId]};for(let $=1;$<R;$++)y.attributes.ssrcs.push({ssrcId:N.ssrcId+$,attributes:Ha(N.attributes)}),Q.ssrcIds.push(N.ssrcId+$),j&&(y.attributes.ssrcs.push({ssrcId:j.ssrcIds[1]+$,attributes:Ha(N.attributes)}),y.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[N.ssrcId+$,j.ssrcIds[1]+$]}));y.attributes.ssrcGroups.unshift(Q)}(_,g,this.store.codec))}),$l.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=i=>{var o;null===(o=this.onFirstAudioReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoReceived=i=>{var o;null===(o=this.onFirstVideoReceived)||void 0===o||o.call(this,i)},this.statsFilter.onFirstAudioDecoded=i=>{var o;null===(o=this.onFirstAudioDecoded)||void 0===o||o.call(this,i)},this.statsFilter.onFirstVideoDecoded=(i,o,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,i,o,c)},this.statsFilter.onSelectedLocalCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,i,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(i,o)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,i,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(i,o){var c=this;return L(function*(){if(i.length===o.length)for(let _=0;_<i.length;_++){var h,g,p,v;const y=i[_],b=o[_];if(b instanceof Os&&!b._hints.includes(wc.LOW_STREAM)&&null!==(h=b._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=b._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(p=b._scalabiltyMode)&&void 0!==p&&p.numSpatialLayers&&(null===(v=b._scalabiltyMode)||void 0===v?void 0:v.numSpatialLayers)>1&&"vp8"===c.store.codec){const C={},R={high:1e3*(b._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const N=y.sender.getParameters();yield y.sender.setParameters(Object.assign(N,C))}}})()}applySimulcastEncodings(i,o){var c=this;return L(function*(){if(!Es()&&i.length===o.length)for(let h=0;h<i.length;h++){const g=o[h];if(g instanceof Os&&c.isVP8Simulcast(g)){const p=i[h],v={},_={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};v.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const y=p.sender.getParameters();yield p.sender.setParameters(Object.assign(y,v))}}})()}isVP8Simulcast(i){var o,c,h,g;return!!(i instanceof Os&&Bt("SIMULCAST")&&"vp8"===this.store.codec&&!i._hints.includes(wc.LOW_STREAM)&&null!==(o=i._encoderConfig)&&void 0!==o&&o.bitrateMax&&(null===(c=i._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=i._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=i._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(i,o,c,h){if(Bt("SDP_LOGGING"))return oe.upload("exchanging ".concat(c," ").concat(o," SDP during P2PConnection.").concat(h,"\n"),i),"offer"===o?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(i){if(this.remoteSDP)return this.remoteSDP.getSSRC(i)?.[0].ssrcId}}).prototype,"connect",[td],Object.getOwnPropertyDescriptor(wi.prototype,"connect"),wi.prototype),rr(wi.prototype,"receive",[td],Object.getOwnPropertyDescriptor(wi.prototype,"receive"),wi.prototype),rr(wi.prototype,"batchReceive",[td],Object.getOwnPropertyDescriptor(wi.prototype,"batchReceive"),wi.prototype),rr(wi.prototype,"stopReceiving",[td],Object.getOwnPropertyDescriptor(wi.prototype,"stopReceiving"),wi.prototype),rr(wi.prototype,"muteRemote",[td],Object.getOwnPropertyDescriptor(wi.prototype,"muteRemote"),wi.prototype),rr(wi.prototype,"unmuteRemote",[td],Object.getOwnPropertyDescriptor(wi.prototype,"unmuteRemote"),wi.prototype),rr(wi.prototype,"muteLocal",[td],Object.getOwnPropertyDescriptor(wi.prototype,"muteLocal"),wi.prototype),rr(wi.prototype,"unmuteLocal",[td],Object.getOwnPropertyDescriptor(wi.prototype,"unmuteLocal"),wi.prototype),rr(wi.prototype,"reEstablish",[td],Object.getOwnPropertyDescriptor(wi.prototype,"reEstablish"),wi.prototype),rr(wi.prototype,"close",[td],Object.getOwnPropertyDescriptor(wi.prototype,"close"),wi.prototype),rr(wi.prototype,"updateEncoderConfig",[td],Object.getOwnPropertyDescriptor(wi.prototype,"updateEncoderConfig"),wi.prototype),rr(wi.prototype,"updateSendParameters",[td],Object.getOwnPropertyDescriptor(wi.prototype,"updateSendParameters"),wi.prototype),rr(wi.prototype,"replaceTrack",[td],Object.getOwnPropertyDescriptor(wi.prototype,"replaceTrack"),wi.prototype),rr(wi.prototype,"restartICE",[td],Object.getOwnPropertyDescriptor(wi.prototype,"restartICE"),wi.prototype),L2=wi))||L2;function td(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("From P2PConnection.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}function vB(n,i){let o=document.createElement("video"),c=document.createElement("canvas");o.setAttribute("style","display:none"),c.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),c.width=Tv(i.width),c.height=Tv(i.height);const h=Tv(i.framerate||15);document.body.append(o),document.body.append(c);let g=n._mediaStreamTrack;o.srcObject=new MediaStream([g]),o.play();const p=c.getContext("2d");if(!p)throw new Pe(Ie.UNEXPECTED_ERROR,"can not get canvas context");const v=Rc(),_=c.captureStream(v.supportRequestFrame?0:h).getVideoTracks()[0],y=_V(()=>(()=>{if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const N=c.width*(o.videoHeight/o.videoWidth);Math.abs(N-c.height)>=2&&(oe.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(N)),c.height=N)}p.drawImage(o,0,0,c.width,c.height),_.requestFrame&&_.requestFrame(),g!==n._mediaStreamTrack&&(g=n._mediaStreamTrack,o.srcObject=new MediaStream([g]))})(),h),b=_.stop;return _.stop=()=>{b.call(_),y(),o&&(o.remove(),o=null),c&&(c.width=0,c.remove(),c=null),oe.debug("clean low stream renderer")},_}var ej,rG;function U2(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function AB(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?U2(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):U2(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class tj extends r9{getUserId(){return this._userId}constructor(i,o,c,h){super(i,"track-".concat(i.kind,"-").concat(o,"-").concat(h.clientId,"_").concat(as(5,""))),q(this,"_userId",void 0),q(this,"_uintId",void 0),q(this,"_isDestroyed",!1),q(this,"store",void 0),this._userId=o,this._uintId=c,this.store=h}_updateOriginMediaStreamTrack(i){this._originMediaStreamTrack=i,this._mediaStreamTrack=i,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,oe.info("[".concat(this.getTrackId(),"] is destroyed")),Yt("info",this,"_destroy"),this.stop(),super.close()}}let V2=sc("RemoteVideoTrack","getTrackId")(ej=class extends tj{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xs.PLAYING)}constructor(n,i,o,c){super(n,i,o,c),q(this,"_videoVisibleTimer",null),q(this,"_previousVideoVisibleStatus",void 0),q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),q(this,"trackMediaType","video"),q(this,"_videoWidth",void 0),q(this,"_videoHeight",void 0),q(this,"_player",void 0),Yt("info",this,"constructor",{userId:i}),this.updateMediaStreamTrackResolution()}getStats(){return v1(()=>{oe.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),Ln("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),wv(this,fr.GET_STATS)||AB({},S6)}play(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof n?n:"HTMLElement",i]});if("string"==typeof n){const h=document.getElementById(n);h?n=h:(oe.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),Ln("warning",this,'can not find "#'.concat(n,'" element, use document.body')),n=document.body)}oe.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(i)),Yt("debug",this,"play",i);const c=AB(AB({fit:"cover"},i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(c):(this._player=new K4(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(wg.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const h=this.getVideoElementVisibleStatus();this.emit(wg.VIDEO_ELEMENT_VISIBLE_STATUS,h)}catch{}},Bt("CHECK_VIDEO_VISIBLE_INTERVAL")),o.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return n.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oe.debug("[".concat(this.getTrackId(),"] stop video playback")),Yt("debug",this,"stop"),n.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){k9(this._originMediaStreamTrack).then(n=>{let[i,o]=n;this._videoHeight=o,this._videoWidth=i}).catch(tL)}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,i;const o=null==this||null===(n=this._player)||void 0===n?void 0:n.getContainerElement(),c={track:this,element:null==this||null===(i=this._player)||void 0===i?void 0:i.getVideoElement(),slot:o?.parentElement},{element:h,slot:g}=c;if(this.isPlaying&&h instanceof HTMLVideoElement&&g instanceof HTMLElement){const p=uH.checkOneElementVisible(h),v=Object.assign({},p);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(v.visible?"Video is visible":"Invisible because of ".concat(v.reason))}return v}return}catch(o){throw new Pe(Ie.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}})||ej,iw=sc("RemoteAudioTrack","getTrackId")(rG=class extends tj{get isPlaying(){return this._useAudioElement?Kl.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,i,o,c){super(n,i,o,c),q(this,"trackMediaType","audio"),q(this,"_source",void 0),q(this,"_useAudioElement",!0),q(this,"_volume",100),Yt("info",this,"constructor",{userId:i}),Bt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new s9(n,!0),this._source.once(Tc.RECEIVE_TRACK_BUFFER,()=>{this.emit(wg.FIRST_FRAME_DECODED)})}setAudioFrameCallback(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Tc.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(i),this._source.removeAllListeners(Tc.ON_AUDIO_BUFFER),this._source.on(Tc.ON_AUDIO_BUFFER,o=>n(o))}setVolume(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._useAudioElement?Kl.setVolume(this.getTrackId(),n):this._source.setVolume(n/100),i.onSuccess()}setPlaybackDevice(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[i.getTrackId(),n]});if(!i._useAudioElement)throw new Pe(Ie.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Kl.setSinkID(i.getTrackId(),n)}catch(c){throw o.onError(c),c}o.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return v1(()=>{oe.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),Ln("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),wv(this,fr.GET_STATS)||AB({},b6)}play(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] start audio playback")),Yt("debug",this,"play"),this._useAudioElement?(oe.debug("[".concat(this.getTrackId(),"] use audio element to play")),Ln("debug",this,"use audio element to play"),Kl.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),n.onSuccess()}stop(){const n=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});oe.debug("[".concat(this.getTrackId(),"] stop audio playback")),Yt("debug",this,"stop"),this._useAudioElement?Kl.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){oe.debug("[".concat(this.getTrackId(),"] update player source track")),Yt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Kl.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||rG;function j2(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function yB(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?j2(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):j2(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}class xz extends rs{constructor(){super(),q(this,"uplinkStatsUploadInterval",void 0),q(this,"uplinkStatsUploadSlowInterval",void 0),q(this,"uplinkRelatedStatsUploadInterval",void 0),q(this,"uplinkDenoiserStatsUploadInterval",void 0),q(this,"transportStatsUploadInterval",void 0),q(this,"extensionStatsUploadInterval",void 0),q(this,"downlinkStatsUploadInterval",void 0),q(this,"downlinkStatsUploadSlowInterval",void 0),q(this,"downlinkRelatedStatsUploadInterval",void 0),q(this,"lastStats",void 0),q(this,"uploadUnplinkStarted",!1),q(this,"uploadDownlinkStarted",!1),q(this,"uploadTransportStarted",!1),q(this,"requestStats",void 0),q(this,"requestLocalMedia",void 0),q(this,"requestRemoteMedia",void 0),q(this,"requestAllTracks",void 0),q(this,"requestVideoIsReady",void 0),q(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadTransportStats(o)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadUplinkStats(o,this.lastStats),this.lastStats=o)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadSlowUplinkStats(o)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadRelatedUplinkStats(o,this.lastStats),this.lastStats=o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);o&&this.uploadDenoiserStats(o)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestAllTracks)||void 0===i?void 0:i.call(this);o&&this.uploadExtensionStats(o)},2e3))}uploadTransportStats(i){Nh(()=>{var o;null===(o=this.requestUpload)||void 0===o||o.call(this,iu.TRANSPORT_STATS,function(c){const h={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(h.connectionType=101),"tcp"===g&&(h.connectionType=103),"tls"===g&&(h.connectionType=104)}return h}(i))})}uploadUplinkStats(i,o){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,{track:p,ssrcs:v}]=h;switch(g){case Dn.LocalVideoLowTrack:case Dn.LocalVideoTrack:{const y=function(C,R,N){var j;const Q=R.videoSend.find(ae=>ae.ssrc===C);if(!Q)return null;const $={id:as(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Q.ssrc.toString()};switch($.A_vstd=N._originMediaStreamTrack&&!N._originMediaStreamTrack.enabled||!N._mediaStreamTrack.enabled?"1":"0",Q.sentFrame&&($.A_fhs=Q.sentFrame.height.toString(),$.A_frs=Q.sentFrame.frameRate.toString(),$.A_fws=Q.sentFrame.width.toString()),Q.adaptionChangeReason){case"none":$.A_ac="0";break;case"cpu":$.A_ac="1";break;case"bandwidth":$.A_ac="2";break;case"other":$.A_ac="3"}return $.A_lvps=QD[N._player?N._player.videoElementStatus:"uninit"].toString(),$.A_nr=null===(j=Q.nacksCount)||void 0===j?void 0:j.toString(),Q.avgEncodeMs&&($.A_aem=Q.avgEncodeMs.toFixed(0).toString()),$}(v[0].ssrcId,i,p),b=kV(v[0].ssrcId,i,o);y&&Nh(()=>{var C;return null===(C=this.requestUpload)||void 0===C?void 0:C.call(this,iu.PUBLISH_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:yB(yB({},y),b)})});break}case Dn.LocalAudioTrack:{const y=function(b,C,R){const N=C.audioSend.find(Q=>Q.ssrc===b);if(!N)return null;const j={id:as(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:N.ssrc.toString()};return j.A_astd=R._originMediaStreamTrack.enabled&&R._mediaStreamTrack.enabled?"0":"1",j.A_ail=N.inputLevel?Math.round(100*N.inputLevel).toString():Math.round(100*R._source.getAccurateVolumeLevel()).toString(),j.A_apil=Math.round(100*R._source.getAccurateVolumeLevel()).toString(),N.aecReturnLoss&&(j.A_ecrl=Math.round(N.aecReturnLoss).toString()),N.aecReturnLossEnhancement&&(j.A_ecrle=Math.round(N.aecReturnLossEnhancement).toString()),j}(v[0].ssrcId,i,p);y&&Nh(()=>{var b;return null===(b=this.requestUpload)||void 0===b?void 0:b.call(this,iu.PUBLISH_STATS,{stream_type:"high",stats:y})});break}}const _=function(y){const b={id:"bweforvideo",timestamp:new Date(y.timestamp).toISOString(),type:"VideoBwe"};return y.bitrate.retransmit&&(b.A_rb=y.bitrate.retransmit.toString()),y.bitrate.targetEncoded&&(b.A_teb=y.bitrate.targetEncoded.toString()),b.A_aeb=y.bitrate.actualEncoded.toString(),b.A_tb=y.bitrate.transmit.toString(),void 0!==y.sendBandwidth&&(b.A_asb=y.sendBandwidth.toString()),b}(i);_&&Nh(()=>{var y;return null===(y=this.requestUpload)||void 0===y?void 0:y.call(this,iu.PUBLISH_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:_})})})}uploadSlowUplinkStats(i){var o;((null===(o=this.requestLocalMedia)||void 0===o?void 0:o.call(this))||[]).filter(c=>{let[h]=c;return h===Dn.LocalVideoLowTrack||h===Dn.LocalVideoTrack}).forEach(c=>{let[h,{ssrcs:g}]=c;const p=kV(g[0].ssrcId,i);p&&Nh(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,iu.PUBLISH_STATS,{stream_type:h===Dn.LocalVideoLowTrack?"low":"high",stats:p})})})}uploadRelatedUplinkStats(i,o){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(h=>{let[g]=h;return g===Dn.LocalVideoLowTrack||g===Dn.LocalVideoTrack}).forEach(h=>{let[g,{ssrcs:p}]=h;const v=function(_,y){const b=y.videoSend.find(C=>C.ssrc===_);return b?{mediaType:"video",isVideoMute:!1,frameRateInput:b.inputFrame&&b.inputFrame.frameRate.toString(),frameRateSent:b.sentFrame&&b.sentFrame.frameRate.toString(),googRtt:b.rttMs.toString(),qpSumPerFrame:Math.floor(b.qpSumPerFrame).toString()}:null}(p[0].ssrcId,i);v&&Nh(()=>{var _;null===(_=this.requestUpload)||void 0===_||_.call(this,iu.PUBLISH_RELATED_STATS,{stream_type:g===Dn.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(i){for(let g=0;g<i.length;g++){const p=i[g];if(p instanceof Wy){var o,c,h;const v=null===(o=(c=p._external).getDenoiserStats)||void 0===o?void 0:o.call(c);return void(v&&(null===(h=this.requestUpload)||void 0===h||h.call(this,iu.DENOISER_STATS,v)))}}}uploadExtensionStats(i){for(let o=0;o<i.length;o++){const c=i[o];if(c instanceof Wy)return void c.getProcessorStats().forEach(h=>{var g;h.type===iu.DENOISER_STATS&&(null===(g=this.requestUpload)||void 0===g||g.call(this,iu.DENOISER_STATS,h.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadDownlinkStats(o,this.lastStats),this.lastStats=o)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&this.uploadSlowDownlinkStats(o)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var i;const o=null===(i=this.requestStats)||void 0===i?void 0:i.call(this);o&&(this.uploadRelatedDownlinkStats(o,this.lastStats),this.lastStats=o)},1e3))}uploadDownlinkStats(i,o){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,p]=h;if(p.has(Zr.VIDEO)&&g.videoTrack){const v=g.videoTrack?function(_,y,b){const C=y.videoRecv.find(Q=>Q.ssrc===_);if(!C)return null;const R={id:as(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:C.ssrc.toString()};var N,j;return R.bytesReceived=C.bytes.toString(),R.packetsLost=C.packetsLost.toString(),R.packetsReceived=C.packets.toString(),C.framesRateFirefox&&(R.A_frr=C.framesRateFirefox.toString()),C.receivedFrame?(R.A_frr=C.receivedFrame.frameRate.toString(),R.A_fhr=C.receivedFrame.height.toString(),R.A_fwr=C.receivedFrame.width.toString()):(R.A_fhr=null===(N=b._videoHeight)||void 0===N?void 0:N.toString(),R.A_fwr=null===(j=b._videoWidth)||void 0===j?void 0:j.toString()),R.A_frd=C.decodeFrameRate.toString(),C.outputFrame&&(R.A_fro=C.outputFrame.frameRate.toString()),void 0!==C.jitterBufferMs&&(R.A_jbm=Math.floor(C.jitterBufferMs).toString()),void 0!==C.currentDelayMs&&(R.A_cdm=Math.floor(C.currentDelayMs).toString()),R.A_fs=C.firsCount.toString(),R.A_ns=C.nacksCount.toString(),R.A_ps=C.plisCount.toString(),b&&(R.A_vrtd=b._originMediaStreamTrack.enabled&&b._mediaStreamTrack.enabled?"0":"1"),b._player&&b._player.freezeTimeCounterList.length>0&&(R.A_vrft=b._player.freezeTimeCounterList.splice(0,1)[0].toString()),R.A_rvps=QD[b._player?b._player.videoElementStatus:"uninit"].toString(),R}(g._videoSSRC,i,g.videoTrack):void 0;v&&Nh(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,iu.SUBSCRIBE_STATS,{stream_id:g.uid,stats:v})})}if(p.has(Zr.AUDIO)&&g.audioTrack){const v=g.audioTrack?function(_,y,b){const C=y.audioRecv.find(N=>N.ssrc===_);if(!C)return null;const R={id:as(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:C.ssrc.toString()};return R.bytesReceived=C.bytes.toString(),R.packetsLost=C.packetsLost.toString(),R.packetsReceived=C.packets.toString(),R.A_aol=C.outputLevel?Math.round(100*C.outputLevel).toString():Math.round(100*b._source.getAccurateVolumeLevel()).toString(),R.A_apol=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),b&&(R.A_artd=b._originMediaStreamTrack.enabled&&b._mediaStreamTrack.enabled?"0":"1"),R.A_jr=C.jitterMs.toString(),R.A_jbm=Math.floor(C.jitterBufferMs).toString(),R.A_cdm=Math.floor(C.jitterBufferMs).toString(),R.A_raps=QD[Kl.getPlayerState(b.getTrackId())].toString(),R}(g._audioSSRC,i,g.audioTrack):void 0;v&&Nh(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,iu.SUBSCRIBE_STATS,{stream_id:g.uid,stats:v})})}})}uploadSlowDownlinkStats(i){}uploadRelatedDownlinkStats(i,o){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,p]=h;if(p.has(Zr.VIDEO)&&g.videoTrack){var v;const _=!0===(g._videoSSRC&&(null===(v=this.requestVideoIsReady)||void 0===v?void 0:v.call(this,g._videoSSRC))||!1),y=function(b,C,R,N,j,Q){const $=R.videoRecv.find(Re=>Re.ssrc===b),ae=j?j.videoRecv.find(Re=>Re.ssrc===b):void 0;if(!$)return null;const fe=zy.isRemoteVideoFreeze(Q,$,ae)&&C,Ae={mediaType:"video",isVideoMute:!1,peerId:N,frameRateReceived:$.receivedFrame&&$.receivedFrame.frameRate.toString(),frameRateDecoded:$.decodedFrame&&$.decodedFrame.frameRate.toString(),isFreeze:fe,bytesReceived:$.bytes.toString(),packetsReceived:$.packets.toString(),packetsLost:$.packetsLost.toString(),qpSumPerFrame:Math.floor($.qpSumPerFrame).toString()};return $.framesRateFirefox&&(Ae.frameRateDecoded=$.framesRateFirefox.toString(),Ae.frameRateReceived=$.framesRateFirefox.toString()),Ae}(g._videoSSRC,_,i,g.uid,o,g.videoTrack);y&&Nh(()=>{var b;null===(b=this.requestUpload)||void 0===b||b.call(this,iu.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:y})})}if(p.has(Zr.AUDIO)&&g.audioTrack){const _=function(y,b,C,R){const N=b.audioRecv.find(Q=>Q.ssrc===y);if(!N)return null;const j=zy.isRemoteAudioFreeze(R);return{mediaType:"audio",isAudioMute:!1,peerId:C,googJitterReceived:N.jitterMs.toString(),isFreeze:j,bytesReceived:N.bytes.toString(),packetsReceived:N.packets.toString(),packetsLost:N.packetsLost.toString(),frameReceived:N.receivedFrames.toString(),frameDropped:N.droppedFrames.toString()}}(g._audioSSRC,i,g.uid,g.audioTrack);_&&Nh(()=>{var y;null===(y=this.requestUpload)||void 0===y||y.call(this,iu.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:_})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var nj,Ri;function rj(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function Bv(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?rj(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):rj(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function ij(n){var i,o,c,h=2;for(typeof Symbol<"u"&&(o=T2,c=Symbol.iterator);h--;){if(o&&null!=(i=n[o]))return i.call(n);if(c&&null!=(i=n[c]))return new EB(i.call(n));o="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function EB(n){function i(o){if(Object(o)!==o)return jn.reject(new TypeError(o+" is not an object."));var c=o.done;return jn.resolve(o.value).then(function(h){return{value:h,done:c}})}return(EB=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(o){var c=this.s.return;return void 0===c?jn.resolve({value:o,done:!0}):i(c.apply(this.s,arguments))},throw:function(o){var c=this.s.return;return void 0===c?jn.reject(o):i(c.apply(this.s,arguments))}},new EB(n)}let oj=sc("P2PChannel","store.p2pId")((rr((Ri=class extends rs{get state(){return this._state}set state(n){const i=this._state;this._state=n,this.emit(Ai.StateChange,i,this._state)}constructor(n,i){var o;super(),o=this,q(this,"store",void 0),q(this,"statsUploader",void 0),q(this,"connection",void 0),q(this,"localTrackMap",new Map),q(this,"remoteUserMap",new Map),q(this,"pendingLocalTracks",[]),q(this,"pendingRemoteTracks",[]),q(this,"statsCollector",void 0),q(this,"isPlanB",!1),q(this,"iceFailedCount",0),q(this,"dtlsFailedCount",0),q(this,"mutex",new au("P2PChannel-mutex")),q(this,"_state",Ql.Disconnected),q(this,"handleMuteLocalTrack",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!o.connection)return void p(new Pe(Ie.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));Yt("debug",o,"handleMuteLocalTrack",h.getTrackId()),yield o.waitTillConnected();const _=o.filterTobeMutedTracks(h);if(0===_.length)return void g();const y=_.find(C=>"videoLowTrack"===C[0]);y&&y[1].track._originMediaStreamTrack.stop(),yield o.connection.muteLocal(_.map(C=>{let[,{id:R}]=C;return R}));const b=o.createMuteMessage(_);yield Mo(o,Ai.RequestMuteLocal,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleUnmuteLocalTrack",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!o.connection)return void p(new Pe(Ie.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));Yt("debug",o,"handleUnmuteLocalTrack",h.getTrackId()),yield o.waitTillConnected();const _=o.filterTobeUnmutedTracks(h);if(0===_.length)return void g();const y=_.find(C=>"videoLowTrack"===C[0]);if(y){const C=y[1];if(C.track._originMediaStreamTrack.stop(),Rc().supportDualStreamEncoding){const R=h._mediaStreamTrack.clone();C.track._mediaStreamTrack=R,C.track._originMediaStreamTrack=R}else{const R=vB(h,KS(o,Ai.RequestLowStreamParameter));C.track._mediaStreamTrack=R,C.track._originMediaStreamTrack=R}yield new jn((R,N)=>{o.handleReplaceTrack(C.track,R,N,!0)})}yield o.connection.unmuteLocal(_.map(C=>{let[,{id:R}]=C;return R}));const b=o.createUnmuteMessage(_);yield Mo(o,Ai.RequestUnmuteLocal,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleUpdateVideoEncoder",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const _=o.localTrackMap.get(Dn.LocalVideoTrack);if(!o.connection||!_||_.track!==h)return void g();yield o.waitTillConnected();const{id:y,track:b}=_;yield o.connection.updateSendParameters(y,b),yield o.connection.updateEncoderConfig(y,b),o.emit(Ai.UpdateVideoEncoder,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleSetOptimizationMode",function(){var c=L(function*(h,g,p){const v=yield o.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const _=o.localTrackMap.get(Dn.LocalVideoTrack);if(!o.connection||!_||_.track!==h)return;yield o.waitTillConnected();const{id:y,track:b}=_;yield o.connection.updateSendParameters(y,b),g()}catch(_){p(_)}finally{v()}});return function(h,g,p){return c.apply(this,arguments)}}()),q(this,"handleReplaceTrack",function(){var c=L(function*(h,g,p,v){let _;oe.debug("P2PChannel handleReplaceTrack for [track-id-".concat(h.getTrackId(),"]")),"boolean"==typeof v&&v||(_=yield o.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var y;const C=Array.from(o.localTrackMap.entries()).find(R=>{let[,{track:N}]=R;return h===N});if(!o.connection||!C)return void g();if(yield o.waitTillConnected(),yield null===(y=o.connection)||void 0===y?void 0:y.replaceTrack(h,C[1].id),o.isPlanB){const R=C[1];R.id=h._mediaStreamTrack.id,o.localTrackMap.set(C[0],R)}if(C[0]===Dn.LocalVideoTrack&&Rc().supportDualStreamEncoding){const R=o.localTrackMap.get(Dn.LocalVideoLowTrack);if(R){const N=h._mediaStreamTrack.clone();R.track._originMediaStreamTrack.stop(),R.track._mediaStreamTrack=N,R.track._originMediaStreamTrack=N,yield new jn((j,Q)=>{o.handleReplaceTrack(R.track,j,Q,!0)})}}g()}catch(C){p(C)}finally{var b;null===(b=_)||void 0===b||b()}});return function(h,g,p,v){return c.apply(this,arguments)}}()),q(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),q(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),q(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),q(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=n,this.statsCollector=i,this.statsCollector.addP2PChannel(this),this.statsUploader=new xz,this.bindStatsUploaderEvents(),this.isPlanB=!Rc().supportUnifiedPlan||Bt("CHROME_FORCE_PLAN_B")&&xT()}startP2PConnection(n){var i=this;return L(function*(){return i.state=Ql.New,i.connection=i.isPlanB?new M2(n,i.store):new F2(n,i.store),i.bindConnectionEvents(i.connection),i.connection.establish()})()}connect(n,i,o,c,h,g){var p=this;return L(function*(){if(!p.connection)throw new Pe(Ie.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");p.store.peerConnectionStart(),yield p.connection.connect(n,i,o,c,h,g),p.statsUploader.startUploadTransportStats(),p.state=Ql.Connected})()}publish(n,i,o){var c=this;return J1(function*(){const h=yield cs(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===Ql.Disconnected)throw new Pe(Ie.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(n);const p=n.filter(v=>-1===c.pendingLocalTracks.indexOf(v));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(p))}c.store.pubId=c.store.pubId+1,pl.markPublishStart(c.store.clientId,c.store.pubId),yield cs(c.waitTillConnected());const g=c.filterTobePublishedTracks(n,i,o);if(0===g.length)return void(yield cs(c.tryToUnmuteAudio(n)));yield*I2(ij(c.doPublish(c.connection,g)),cs)}finally{h()}})()}doPublish(n,i){var o=this;return J1(function*(){i.forEach(y=>{let{track:b,type:C}=y;const R=performance.now();o.store.publish(b.getTrackId(),C===Dn.LocalAudioTrack?"audio":"video",R)}),o.bindLocalTrackEvents(i);const c=yield cs(n.send(i.map(y=>{let{track:b}=y;return b}),o.store.codec,o.store.audioCodec)),h=(yield cs(c.next())).value,g=o.createGatewayPublishMessage(i,h);let p;try{p=yield g}catch(y){throw Ln("error",o,"doPublish yield error: ".concat(y.toString())),c.throw(y),y?.code===Ie.WS_ABORT&&i.forEach(b=>{let{track:C}=b;-1===o.pendingLocalTracks.indexOf(C)&&o.pendingLocalTracks.push(C)}),o.unbindLocalTrackEvents(i),y}const v=o.mapPubResToRemoteConfig(g,p);Yt("debug",o,"doPublish",{remoteConfigs:v,tracks:i.map(y=>{let{track:b}=y;return b.getTrackId()}),pubMsg:g,pubAns:p});const _=(yield cs(c.next(v))).value;i.forEach(y=>{let{type:b}=y;o.statsCollector.addLocalStats(b)}),o.assignLocalTracks(i,_),o.statsUploader.startUploadUplinkStats(),i.forEach(y=>{let{track:b,type:C}=y;const R=performance.now();o.store.publish(b.getTrackId(),C===Dn.LocalAudioTrack?"audio":"video",void 0,R)})})()}publishLowStream(n){var i=this;return J1(function*(){if(!i.connection)return;Yt("debug",i,"publishLowStream",n);const o=yield cs(i.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const h=i.localTrackMap.get(Dn.LocalVideoTrack);if(!h)throw new Pe(Ie.UNEXPECTED_ERROR,"Could not find high stream");if(i.localTrackMap.has(Dn.LocalVideoLowTrack))throw new Pe(Ie.UNEXPECTED_ERROR,"[".concat(i.store.clientId,"] Can't publish low stream when stream already publish"));yield cs(i.waitTillConnected());const g=[{track:i.getLowVideoTrack(h.track,n),type:Dn.LocalVideoLowTrack}];if(yield*I2(ij(i.doPublish(i.connection,g)),cs),h.track.muted||!h.track.enabled){var c;const p=null===(c=i.localTrackMap.get(Dn.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==p&&(yield cs(i.connection.muteLocal([p])))}}finally{o()}})()}republish(){var n=this;return L(function*(){n.pendingLocalTracks.length>0&&(oe.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),Yt("debug",n,"republish",n.pendingLocalTracks.map(i=>i.getTrackId())),yield jd(n,Ai.RequestRePublish,n.pendingLocalTracks),n.emit(Ai.MediaReconnectEnd,n.store.uid),n.pendingLocalTracks=[])})()}reSubscribe(n){var i=this;return L(function*(){Yt("debug",i,"reSubscribe",i.pendingRemoteTracks.map(o=>{let{user:c}=o;return c.uid}));for(let o=i.pendingRemoteTracks.length-1;o>=0;o--){const{user:c,kind:h}=i.pendingRemoteTracks[o];(h!==Zr.AUDIO||c._audio_added_&&c._audioSSRC)&&(h!==Zr.VIDEO||c._video_added_&&c._videoSSRC)||i.pendingRemoteTracks.splice(o,1)}if(n)yield jd(i,Ai.RequestReSubscribe,i.pendingRemoteTracks);else for(const{user:o,kind:c}of i.pendingRemoteTracks)yield i.subscribe(o,c,c===Zr.VIDEO?o._videoSSRC:o._audioSSRC);i.pendingRemoteTracks.forEach(o=>{let{user:c}=o;i.emit(Ai.MediaReconnectEnd,c.uid)}),i.pendingRemoteTracks=[]})()}unpublish(n){var i=this;return L(function*(){if(!i.connection)return void n.forEach(h=>{const g=i.pendingLocalTracks.indexOf(h);-1!==g&&i.pendingLocalTracks.splice(g,1)});yield i.waitTillConnected();const o=i.filterTobeUnpublishedTracks(n);if(0===o.length)return;const c=o.find(h=>"videoLowTrack"===h[0]);return c&&c[1].track.close(),Yt("debug",i,"unpublish"),i.doUnpublish(i.connection,o)})()}unpublishLowStream(){var n=this;return L(function*(){if(!n.connection)return;Yt("debug",n,"unpublishLowStream");const i=n.localTrackMap.get(Dn.LocalVideoLowTrack);return i?(yield n.waitTillConnected(),i.track.close(),n.doUnpublish(n.connection,[[Dn.LocalVideoLowTrack,i]])):void 0})()}doUnpublish(n,i){var o=this;return L(function*(){const c=o.createGatewayUnpublishMessage(i);return yield n.stopSending(i.map(h=>{let[,{id:g}]=h;return g})),o.withdrawLocalTracks(i),o.unbindLocalTrackEvents(i.map(h=>{let[g,{track:p}]=h;return{type:g,track:p}})),i.forEach(h=>{let[g]=h;o.statsCollector.removeLocalStats(g)}),0===o.localTrackMap.size&&o.statsUploader.stopUploadUplinkStats(),c})()}subscribe(n,i,o,c,h){var g=this;return L(function*(){var p;if(!g.connection)throw new Pe(Ie.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(Yt("debug",g,"subscribe",{uid:n.uid,mediaType:i,ssrcId:o}),null!==(p=g.remoteUserMap.get(n))&&void 0!==p&&p.has(i))return;let v,_;if(yield g.waitTillConnected(),h){const C=h.find(N=>{let{stream_type:j}=N;return j===i});if(!C)throw new Pe(Ie.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(i," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(i,"."));const R=yield g.connection.receive(i,C.ssrcs,String(n._uintid),C.attributes);v=R.track,_=R.id}else{const C=yield g.connection.receive(i,[{ssrcId:o,rtx:c}],String(n._uintid),void 0);v=C.track,_=C.id}i===Zr.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(v):(n._audioTrack=new iw(v,n.uid,n._uintid,g.store),oe.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(v):(n._videoTrack=new V2(v,n.uid,n._uintid,g.store),oe.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._videoTrack));const y=g.remoteUserMap.get(n);y?y.set(i,_):g.remoteUserMap.set(n,new Map([[i,_]])),g.statsCollector.addRemoteStats(n.uid),g.statsUploader.startUploadDownlinkStats();const b=g.pendingRemoteTracks.findIndex(C=>{let{user:R,kind:N}=C;return R.uid===n.uid&&i===N});-1!==b&&(g.pendingRemoteTracks.splice(b,1),g.emit(Ai.MediaReconnectEnd,n.uid))})()}massSubscribe(n){var i=this;return L(function*(){return i.massSubscribeNoLock(n)})()}massSubscribeNoLock(n){var i=this;return L(function*(){if(!i.connection)throw new Pe(Ie.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");Yt("debug",i,"subscribeAll",n.map(c=>{let{user:h,mediaType:g,ssrcId:p}=c;return{uid:h.uid,mediaType:g,ssrcId:p}})),n=n.filter(c=>{var h;let{user:g,mediaType:p}=c;return!(null!==(h=i.remoteUserMap.get(g))&&void 0!==h&&h.has(p))}),yield i.waitTillConnected();const o=yield i.connection.batchReceive(n.map(c=>{let{user:h,mediaType:g,ssrcId:p,rtxSsrcId:v}=c;return{kind:g,ssrcMsg:[{ssrcId:p,rtx:v}],mslabel:String(h._uintid)}}));n.forEach((c,h)=>{let{user:g,mediaType:p}=c;const{track:v,id:_}=o[h];p===Zr.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(v):(g._audioTrack=new iw(v,g.uid,g._uintid,i.store),oe.info("[".concat(i.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(v):(g._videoTrack=new V2(v,g.uid,g._uintid,i.store),oe.info("[".concat(i.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),i.bindRemoteTrackEvents(g,g._videoTrack));const y=i.remoteUserMap.get(g);y?y.set(p,_):i.remoteUserMap.set(g,new Map([[p,_]])),i.statsCollector.addRemoteStats(g.uid),i.statsUploader.startUploadDownlinkStats();const b=i.pendingRemoteTracks.findIndex(C=>{let{user:R,kind:N}=C;return R.uid===g.uid&&p===N});-1!==b&&(i.pendingRemoteTracks.splice(b,1),i.emit(Ai.MediaReconnectEnd,g.uid))})})()}unsubscribe(n,i,o){var c=this;return L(function*(){const h=c.pendingRemoteTracks.filter(v=>{let{user:_,kind:y}=v;return void 0!==i?_.uid===n.uid&&i===y:_.uid===n.uid});if(h.forEach(v=>{const _=c.pendingRemoteTracks.indexOf(v);c.pendingRemoteTracks.splice(_,1)}),!c.connection)return void h.forEach(v=>{let{kind:_}=v;var y;if(_===Zr.AUDIO)null===(y=n._audioTrack)||void 0===y||y._destroy(),n._audioTrack=void 0;else if(_===Zr.VIDEO){var b;null===(b=n._videoTrack)||void 0===b||b._destroy(),n._videoTrack=void 0}});Yt("debug",c,"unsubscribe",{uid:n.uid,mediaType:i});const g=c.filterTobeUnSubscribedTracks(n,i);if(0===g.length)return;yield c.connection.stopReceiving(g.map(v=>{let[,{id:_}]=v;return _}));const p=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(v=>{let[_,{kind:y}]=v;var b,C;if(y===Zr.VIDEO&&_._videoSSRC&&(null===(b=c.connection)||void 0===b||b.setStatsRemoteVideoIsReady(_._videoSSRC,!1)),y===Zr.VIDEO)c.unbindRemoteTrackEvents(_._videoTrack),o||(null===(C=_._videoTrack)||void 0===C||C._destroy(),_._videoTrack=void 0);else if(y===Zr.AUDIO){var R;c.unbindRemoteTrackEvents(_._audioTrack),!o&&(null===(R=_._audioTrack)||void 0===R||R._destroy(),_._audioTrack=void 0)}}),p})()}massUnsubscribe(n){var i=this;return L(function*(){return i.massUnsubscribeNoLock(n)})()}massUnsubscribeNoLock(n){var i=this;return L(function*(){let o=[];for(const{user:g,mediaType:p}of n){const v=i.pendingRemoteTracks.filter(_=>{let{user:y,kind:b}=_;return void 0!==p?y.uid===g.uid&&p===b:y.uid===g.uid});v.forEach(_=>{const y=i.pendingRemoteTracks.indexOf(_);i.pendingRemoteTracks.splice(y,1)}),o=o.concat(v)}if(!i.connection)return void o.forEach(g=>{let{user:p,kind:v}=g;var _;if(v===Zr.AUDIO)null===(_=p._audioTrack)||void 0===_||_._destroy(),p._audioTrack=void 0;else if(v===Zr.VIDEO){var y;null===(y=p._videoTrack)||void 0===y||y._destroy(),p._videoTrack=void 0}});Yt("debug",i,"batchUnsubscribe",n.map(g=>{let{user:p,mediaType:v}=g;return{uid:p.uid,mediaType:v}}));const c=Oa(n).call(n,(g,p)=>{let{user:v,mediaType:_}=p;const y=i.filterTobeUnSubscribedTracks(v,_);return g.concat(y)},[]);if(0===c.length)return;yield i.connection.stopReceiving(c.map(g=>{let[,{id:p}]=g;return p}));const h=i.createUnsubscribeAllMessage(c);return i.withdrawRemoteTracks(c),0===i.remoteUserMap.size&&i.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[p,{kind:v}]=g;var _,y;if(v===Zr.VIDEO&&p._videoSSRC&&(null===(_=i.connection)||void 0===_||_.setStatsRemoteVideoIsReady(p._videoSSRC,!1)),v===Zr.VIDEO)i.unbindRemoteTrackEvents(p._videoTrack),null===(y=p._videoTrack)||void 0===y||y._destroy(),p._videoTrack=void 0;else if(v===Zr.AUDIO){var b;i.unbindRemoteTrackEvents(p._audioTrack),null===(b=p._audioTrack)||void 0===b||b._destroy(),p._audioTrack=void 0}}),h})()}muteRemote(n,i){var o=this;return L(function*(){if(!o.connection)return;Yt("debug",o,"muteRemote",{uid:n.uid,kind:i});const c=o.remoteUserMap.get(n);if(!c)return oe.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid,".")),void Ln("warning",o,"P2PChannel.muteRemote has no remote user ".concat(n.uid,"."));if(!c.get(i))return oe.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(i,".")),void Ln("warning",o,"P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(i,"."));const h=i===Zr.VIDEO?n._videoSSRC:n._audioSSRC;void 0!==h&&o.connection.setStatsRemoteVideoIsReady(h,!1)})()}unmuteRemote(n,i){var o=this;return L(function*(){return o.unmuteRemoteNoLock(n,i)})()}unmuteRemoteNoLock(n,i){var o=this;return L(function*(){if(!o.connection)return;Yt("debug",o,"unmuteRemote",{uid:n.uid,kind:i});const c=o.remoteUserMap.get(n);return c?c.get(i)?void 0:(oe.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid," media type ").concat(i,".")),void Ln("warning",o,"unmuteRemote has no remote user ".concat(n.uid," media type ").concat(i))):(oe.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid,".")),void Ln("warning",o,"unmuteRemote has no remote user ".concat(n.uid)))})()}getAllTracks(n){const i=this.localTrackMap.get(Dn.LocalAudioTrack);if(i?.track instanceof zl){const o=i.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[h]=c;return h!==Dn.LocalAudioTrack}).filter(c=>{let[h]=c;return!(n&&h===Dn.LocalVideoLowTrack)}).map(c=>{let[,{track:h}]=c;return h}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[c]=o;return!(n&&c===Dn.LocalVideoLowTrack)}).map(o=>{let[,{track:c}]=o;return c})}reportPublishEvent(n,i,o,c,h){if(n){const p=this.localTrackMap.get(Dn.LocalAudioTrack),v=this.localTrackMap.get(c?Dn.LocalVideoLowTrack:Dn.LocalVideoTrack);Kt.publish(this.store.sessionId,{eventElapse:pl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:i,audioName:p?.track.getTrackLabel(),videoName:v?.track.getTrackLabel(),screenshare:-1!==v?.track._hints.indexOf(wc.SCREEN_TRACK),audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}else{var g;o||(o=[]);const p=o.find(_=>_ instanceof Qa),v=c?null===(g=this.localTrackMap.get(Dn.LocalVideoTrack))||void 0===g?void 0:g.track:o.find(_=>_ instanceof Os);Kt.publish(this.store.sessionId,{eventElapse:pl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:i,audioName:p?.getTrackLabel(),videoName:v?.getTrackLabel(),screenshare:-1!==v?._hints.indexOf(wc.SCREEN_TRACK),audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}}reportSubscribeEvent(n,i,o,c){const h=c===Zr.VIDEO?o._videoSSRC:o._audioSSRC;h&&Kt.subscribe(this.store.sessionId,{succ:n,ec:i,video:c===Zr.VIDEO,audio:c===Zr.AUDIO,peerid:o.uid,subscribeRequestid:c===Zr.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:pl.measureFromSubscribeStart(this.store.clientId,h)})}reset(){oe.debug("P2PChannel.reset"),this.mutex=new au("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Ql.Disconnected}getStats(){var n;return null===(n=this.connection)||void 0===n?void 0:n.getStats()}getRemoteVideoIsReady(n){var i;return(null===(i=this.connection)||void 0===i?void 0:i.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Dn.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Dn.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const i=this.localTrackMap.get(n);return i&&i.track instanceof Os||i&&i.track instanceof Qa?i.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,i){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!i||o.has(i))}hasRemoteMediaWithLock(n,i){var o=this;return L(function*(){if(!n)return o.remoteUserMap.size>0;const c=o.remoteUserMap.get(n);return!!c&&(!i||c.has(i))})()}getRemoteMedia(n){var i;const o=Array.from(Sv(i=this.remoteUserMap).call(i)).find(c=>c.uid===n);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(o=>{let[c]=o;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const i=this.localTrackMap.get(Dn.LocalAudioTrack);return i&&n.push({level:100*i.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=UM(n).call(n,(o,c)=>o.level-c.level),n}disconnectForReconnect(){var n=this;return L(function*(){n.connection&&(Yt("debug",n,"disconnectForReconnect"),oe.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),n.state=Ql.Reconnecting,n.connection.close(),n.unbindConnectionEvents(n.connection),n.connection=void 0,0!==n.localTrackMap.size&&(Array.from(n.localTrackMap.entries()).forEach(i=>{let[o,{track:c}]=i;switch(o){case Dn.LocalVideoTrack:c._hints.includes(wc.LOW_STREAM)?c.close():n.pendingLocalTracks.push(c);break;case Dn.LocalAudioTrack:c instanceof zl?n.pendingLocalTracks=n.pendingLocalTracks.concat(c.trackList):n.pendingLocalTracks.push(c)}}),n.emit(Ai.MediaReconnectStart,n.store.uid)),n.unbindLocalTrackEvents(),n.localTrackMap.clear(),0!==n.remoteUserMap.size&&Array.from(n.remoteUserMap.entries()).forEach(i=>{let[o,c]=i;Array.from(Sv(c).call(c)).forEach(h=>{n.setPendingRemoteMedia(o,h)}),n.emit(Ai.MediaReconnectStart,o.uid)}),n.unbindAllRemoteTrackEvents(),n.remoteUserMap.clear(),n.statsUploader.stopUploadUplinkStats(),n.statsUploader.stopUploadDownlinkStats(),n.statsUploader.stopUploadTransportStats(),oe.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(n,i){for(const o of this.pendingRemoteTracks){const{user:c,kind:h}=o;if((n instanceof _2?n.uid:n)===c.uid&&i===h)return!0}return!1}setPendingRemoteMedia(n,i){this.hasPendingRemoteMedia(n,i)||this.pendingRemoteTracks.push({user:n,kind:i})}reEstablish(){var n=this;return L(function*(){if(n.connection)return n.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),i=this.localTrackMap.get(Dn.LocalVideoTrack),o=this.localTrackMap.get(Dn.LocalAudioTrack),c=n.videoSend.find(N=>N.ssrc===i?.ssrcs[0].ssrcId),h=n.audioSend.find(N=>N.ssrc===o?.ssrcs[0].ssrcId);if(!c||!h)return 1;const g=wv(this,Ai.NeedSignalRTT),p=c?c.rttMs:void 0,v=h?h.rttMs:void 0,_=p&&v?(p+v)/2:p||v,b=100*n.sendPacketLossRate*.7/50+.3*((_&&g?(_+g)/2:_||g)||0)/1500,C=b<.17?1:b<.36?2:b<.59?3:b<.1?4:5,R=i?.track;if(R&&R._encoderConfig&&-1===R._hints.indexOf(wc.SCREEN_TRACK)){const N=R._encoderConfig.bitrateMax,j=n.bitrate.actualEncoded;if(N&&j){const Q=(1e3*N-j)/(1e3*N);return EW[Q<.15?0:Q<.3?1:Q<.45?2:Q<.6?3:4][C]}}return C}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let i=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[c]=o;const h=c._audioSSRC,g=c._videoSSRC,p=n.audioRecv.find(j=>j.ssrc===h),v=n.videoRecv.find(j=>j.ssrc===g);if(!p&&!v)return void(i+=1);const _=wv(this,Ai.NeedSignalRTT),y=n.rtt,b=(y&&_?(y+_)/2:y||_)||0,C=p?p.jitterMs:void 0,R=n.recvPacketLossRate;let N=.7*R*100/50+.3*b/1500;C&&(N=.6*R*100/50+.2*b/1500+.2*C/400),i+=N<.1?1:N<.17?2:N<.36?3:N<.59?4:5}),this.remoteUserMap.size>0?Math.round(i/this.remoteUserMap.size):i}muteLocalTrack(n){var i=this;return L(function*(){return new jn((o,c)=>{i.handleMuteLocalTrack(n,o,c)})})()}filterTobePublishedTracks(n,i,o){const c=[],h=Rc(),g=this.getAllTracks();n=N9(n=n.filter(_=>-1===g.indexOf(_)));let p=!1,v=!1;for(const _ of n){if(_ instanceof Os&&(this.localTrackMap.has(Dn.LocalVideoTrack)||p?new Pe(Ie.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:_,type:Dn.LocalVideoTrack}),p=!0),i)){const y=this.getLowVideoTrack(_,o);c.push({track:y,type:Dn.LocalVideoLowTrack})}if(_ instanceof Qa){const y=this.localTrackMap.get(Dn.LocalAudioTrack);if(y){if(!(y.track instanceof zl))throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0)}else if(v){const b=c.find(C=>{let{type:R}=C;return R===Dn.LocalAudioTrack});if(!(b.track instanceof zl))throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");b.track.addAudioTrack(_)}else{if(!h.webAudioMediaStreamDest||_ instanceof zl||_._bypassWebAudio)c.push({track:_,type:Dn.LocalAudioTrack});else{const b=new zl;b.addAudioTrack(_),c.push({track:b,type:Dn.LocalAudioTrack})}v=!0}}}return c}filterTobeUnpublishedTracks(n){const i=[],o=this.getAllTracks();n=N9(n=n.filter(c=>-1!==o.indexOf(c)));for(const c of n){if(c instanceof Qa){const h=this.localTrackMap.get(Dn.LocalAudioTrack);if(!h)continue;h.track instanceof zl?(h.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===h.track.trackList.length&&(i.push([Dn.LocalAudioTrack,h]),h.track.close())):i.push([Dn.LocalAudioTrack,h])}if(c instanceof Os){const h=this.localTrackMap.get(Dn.LocalVideoTrack);if(!h)continue;i.push([Dn.LocalVideoTrack,h]);const g=this.localTrackMap.get(Dn.LocalVideoLowTrack);g&&i.push([Dn.LocalVideoLowTrack,g])}}return i}bindLocalTrackEvents(n){n.forEach(i=>{let{track:o,type:c}=i;switch(c){case Dn.LocalVideoTrack:o.addListener(fr.GET_STATS,this.handleGetLocalVideoStats),o.addListener(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(fr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(fr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.addListener(fr.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Dn.LocalAudioTrack:this.bindLocalAudioTrackEvents(o)}})}bindLocalAudioTrackEvents(n,i){n instanceof zl?n.trackList.forEach(o=>{o.addListener(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(fr.GET_STATS,this.handleGetLocalAudioStats),o.addListener(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(fr.GET_STATS,this.handleGetLocalAudioStats),n.addListener(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),i||n.addListener(fr.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(i=>{let[o,{track:c}]=i;return{track:c,type:o}})),n.forEach(i=>{let{track:o,type:c}=i;switch(c){case Dn.LocalVideoTrack:o.off(fr.GET_STATS,this.handleGetLocalVideoStats),o.off(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(fr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(fr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.off(fr.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Dn.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o)}})}unbindLocalAudioTrackEvents(n){n instanceof zl?n.trackList.forEach(i=>{i.off(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(fr.GET_STATS,this.handleGetLocalAudioStats),i.off(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(fr.GET_STATS,this.handleGetLocalAudioStats),n.off(fr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(fr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(fr.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(fr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(fr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,i){i instanceof V2&&i.addListener(fr.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(n))}),i instanceof iw&&i.addListener(fr.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(fr.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[i,o]=n;o.has(Zr.AUDIO)&&this.unbindRemoteTrackEvents(i._audioTrack),o.has(Zr.VIDEO)&&this.unbindRemoteTrackEvents(i._videoTrack)})}createGatewayPublishMessage(n,i){return n.map((o,c)=>{let h,g,{track:p,type:v}=o;switch(v){case Dn.LocalAudioTrack:h=os.Audio,g={dtx:p instanceof Wy&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Dn.LocalVideoTrack:h=p._hints.includes(wc.SCREEN_TRACK)?os.Screen:os.High,g=Bv(Bv({},DV(p)),{},{codec:this.store.codec});break;case Dn.LocalVideoLowTrack:h=os.Low,g=Bv(Bv({},DV(p)),{},{codec:this.store.codec})}return{stream_type:h,attributes:g,ssrcs:i[c]}})}createGatewayUnpublishMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalVideoTrack:o=h._hints.includes(wc.SCREEN_TRACK)?os.Screen:os.High;break;case Dn.LocalAudioTrack:o=os.Audio;break;case Dn.LocalVideoLowTrack:o=os.Low}return{stream_type:o,ssrcs:g,mid:p}})}assignLocalTracks(n,i){n.forEach((o,c)=>{let{track:h,type:g}=o;this.localTrackMap.set(g,{track:h,id:i[c].id,ssrcs:i[c].localSSRC})})}withdrawLocalTracks(n){n.forEach(i=>{let[o]=i;this.localTrackMap.delete(o)})}waitTillConnected(){var n=this;return L(function*(){return new jn((i,o)=>{switch(n.state){case Ql.New:case Ql.Reconnecting:{const c=(h,g)=>g===Ql.Disconnected?(n.off(Ai.StateChange,c),void o(new Pe(Ie.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===Ql.Connected?(n.off(Ai.StateChange,c),void i(void 0)):void 0;n.on(Ai.StateChange,c);break}case Ql.Connected:i(void 0);break;case Ql.Disconnected:o(new Pe(Ie.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(n){var i=this;n.onConnectionStateChange=function(){var o=L(function*(c){oe.info("[p2pId: ".concat(i.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),Ao("info",i,"connectionStateChange",c),i.emit(Ai.PeerConnectionStateChange,c),"connected"!==c||i.store.keyMetrics.peerConnectionEnd||i.store.peerConnectionEnd(),"failed"===c&&(yield i.requestReconnect())});return function(c){return o.apply(this,arguments)}}(),n.onICEConnectionStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(o,")")),Ao("info",this,"iceConnectionStateChange",o),Kt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:o,tag:sr.TRACER}).onSuccess(),this.emit(Ai.IceConnectionStateChange,o)},n.onICETransportStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(o,")")),Ao("info",this,"ICETransportStateChange",o)},n.onDTLSTransportStateChange=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(o,")")),Ao("info",this,"DTLSTransportStateChange",o)},n.onDTLSTransportError=o=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(o,")")),Ao("info",this,"DTLSTransportError",o)},n.onFirstAudioDecoded=o=>{var c;const h=Array.from(Sv(c=this.remoteUserMap).call(c)).find(p=>p._audioSSRC===o);var g;h&&(null===(g=h.audioTrack)||void 0===g||g.emit(wg.FIRST_FRAME_DECODED),Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_AUDIO_DECODE,No.FIRST_AUDIO_DECODE,{peer:h._uintid,subscribeElapse:pl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=o=>{var c;const h=Array.from(Sv(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===o);h&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_AUDIO_RECEIVED,No.FIRST_AUDIO_RECEIVED,{peer:h._uintid,subscribeElapse:pl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(o,c,h)=>{var g;const p=Array.from(Sv(g=this.remoteUserMap).call(g)).find(v=>v._videoSSRC===o);p&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_VIDEO_DECODE,No.FIRST_VIDEO_DECODE,{peer:p._uintid,videowidth:c,videoheight:h,subscribeElapse:pl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onFirstVideoReceived=o=>{var c;const h=Array.from(Sv(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===o);h&&Kt.firstRemoteFrame(this.store.sessionId,ma.FIRST_VIDEO_RECEIVED,No.FIRST_VIDEO_RECEIVED,{peer:h._uintid,subscribeElapse:pl.measureFromSubscribeStart(this.store.clientId,o),subscribeRequestid:o,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(o,c)=>{const h="relay"===o.candidateType;"unknown"!==c.candidateType&&h===("relay"===c.candidateType)||this.emit(Ai.ConnectionTypeChange,h),oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Pg(c))," -> ").concat(JSON.stringify(Pg(o)),")")),Ao("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(Pg(c))," -> ").concat(JSON.stringify(Pg(o))))},n.onSelectedRemoteCandidateChanged=(o,c)=>{oe.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Pg(c))," -> ").concat(JSON.stringify(Pg(o)),")")),Ao("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(Pg(c))," -> ").concat(JSON.stringify(Pg(o))))}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(n){const i=[];if(-1===this.getAllTracks().indexOf(n))return i;const o=this.localTrackMap.get(Dn.LocalAudioTrack);if(n instanceof Qa&&o?.track instanceof zl)return o.track.isActive||i.push([Dn.LocalAudioTrack,o]),i;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c&&(i.push(c),c[0]===Dn.LocalVideoTrack)){const h=this.localTrackMap.get(Dn.LocalVideoLowTrack);h&&i.push([Dn.LocalVideoLowTrack,h])}return i}filterTobeUnmutedTracks(n){const i=[],o=this.localTrackMap.get(Dn.LocalAudioTrack);if(n instanceof Qa&&o?.track instanceof zl)return o.track.isActive&&i.push([Dn.LocalAudioTrack,o]),i;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c)if(c[0]===Dn.LocalVideoTrack){i.push(c);const h=this.localTrackMap.get(Dn.LocalVideoLowTrack);h&&i.push([Dn.LocalVideoLowTrack,h])}else i.push(c);return i}createMuteMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalAudioTrack:o=os.Audio;break;case Dn.LocalVideoTrack:o=h._hints.includes(wc.SCREEN_TRACK)?os.Screen:os.High;break;case Dn.LocalVideoLowTrack:o=os.Low}return{stream_type:o,ssrcs:g,mid:p}})}createUnmuteMessage(n){return n.map(i=>{let o,[c,{track:h,ssrcs:g,id:p}]=i;switch(c){case Dn.LocalAudioTrack:o=os.Audio;break;case Dn.LocalVideoTrack:o=h._hints.includes(wc.SCREEN_TRACK)?os.Screen:os.High;break;case Dn.LocalVideoLowTrack:o=os.Low}return{stream_type:o,ssrcs:g,mid:p}})}filterTobeUnSubscribedTracks(n,i){const o=[],c=this.remoteUserMap.get(n);if(!c)return o;if(i){const h=c.get(i);if(!h)return o;o.push([n,{kind:i,id:h}])}else Array.from(c.entries()).forEach(h=>{let[g,p]=h;o.push([n,{kind:g,id:p}])});return o}createUnsubscribeMessage(n){const i=[];return n.forEach(o=>{let[c,{kind:h}]=o;switch(h){case Zr.VIDEO:return void(c._videoSSRC&&i.push({stream_type:Zr.VIDEO,ssrcId:c._videoSSRC}));case Zr.AUDIO:return void(c._audioSSRC&&i.push({stream_type:Zr.AUDIO,ssrcId:c._audioSSRC}))}}),i}createUnsubscribeAllMessage(n){const i=new Map;return n.forEach(o=>{let[c,{kind:h}]=o;if(i.has(c)){let g=i.get(c);g|=h===Zr.VIDEO?Po.Video:Po.Audio,i.set(c,g)}else i.set(c,h===Zr.VIDEO?Po.Video:Po.Audio)}),{users:Array.from(i.entries()).map(o=>{let[c,h]=o;return{stream_id:c.uid,stream_type:h}})}}withdrawRemoteTracks(n){n.forEach(i=>{let[o,{kind:c}]=i;const h=this.remoteUserMap.get(o);h&&(h.delete(c),0===Array.from(h.entries()).length&&this.remoteUserMap.delete(o))})}updateBitrateLimit(n){var i=this;return L(function*(){const o=i.localTrackMap.get(Dn.LocalVideoTrack),c=i.localTrackMap.get(Dn.LocalVideoLowTrack);o&&(yield o.track.setBitrateLimit(n.uplink)),c&&n.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(n,i){return n.map((o,c)=>{var h;let{stream_type:g}=o;return null===(h=i.find(p=>{let{stream_type:v}=p;return g===v}))||void 0===h?void 0:h.attributes})}tryToUnmuteAudio(n){var i=this;return L(function*(){for(let c=0;c<n.length;c++)if(n[c]instanceof Qa){var o;const h=i.filterTobeUnmutedTracks(n[c]);if(0===h.length)continue;yield null===(o=i.connection)||void 0===o?void 0:o.unmuteLocal(h.map(p=>{let[,{id:v}]=p;return v}));const g=i.createUnmuteMessage(h);return void(yield Mo(i,Ai.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var i;return!(null===(i=this.connection)||void 0===i||!i.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,i)=>this.emit(Ai.RequestUploadStats,n,i),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var n=this;return L(function*(){n.dtlsFailedCount+=1,yield lc(xU(n.dtlsFailedCount,Jo)),n.emit(Ai.RequestReconnect)})()}reconnectP2P(){var n=this;return L(function*(){const i=Array.from(n.localTrackMap.entries()),o=n.createGatewayUnpublishMessage(i);Array.from(n.remoteUserMap.entries()),o.length>0&&(yield jd(n,Ai.RequestUnpublishForReconnectPC,o)),n.disconnectForReconnect(),n.emit(Ai.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(Dn.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof Os)}throwIfTrackTypeNotMatch(n){if(n.filter(i=>i instanceof Os).length>1)throw new Pe(Ie.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(i=>i instanceof Qa).length>1&&(n.some(i=>i instanceof Qa&&i._bypassWebAudio)||!Rc().webAudioMediaStreamDest))throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const i of n){if(i instanceof Os&&this.pendingLocalTracks.some(o=>o instanceof Os))throw new Pe(Ie.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(i instanceof Qa&&this.pendingLocalTracks.some(o=>o instanceof Qa)&&(!Rc().webAudioMediaStreamDest||i._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof Qa&&o._bypassWebAudio)))throw new Pe(Ie.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,i){const o=Rc().supportDualStreamEncoding,c=Bv(Bv({},{width:160,height:120,framerate:15,bitrate:50}),i);let h;h=o?n._mediaStreamTrack.clone():vB(n,c);const g=new Os(h,Bv(Bv({},o&&{scaleResolutionDownBy:O9(c,n)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(wc.LOW_STREAM),n.addListener(fr.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var n=this;return L(function*(){return n.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(n,i,o){if(!this.connection)return!1;const c=this.remoteUserMap.get(n);if(!c)return!1;const h=c.get(i);if(!h)return!1;const g=this.connection.getRemoteSSRC(h);return void 0!==g&&g!==o}}).prototype,"startP2PConnection",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"startP2PConnection"),Ri.prototype),rr(Ri.prototype,"connect",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"connect"),Ri.prototype),rr(Ri.prototype,"unpublish",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"unpublish"),Ri.prototype),rr(Ri.prototype,"unpublishLowStream",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"unpublishLowStream"),Ri.prototype),rr(Ri.prototype,"subscribe",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"subscribe"),Ri.prototype),rr(Ri.prototype,"massSubscribe",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"massSubscribe"),Ri.prototype),rr(Ri.prototype,"unsubscribe",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"unsubscribe"),Ri.prototype),rr(Ri.prototype,"massUnsubscribe",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"massUnsubscribe"),Ri.prototype),rr(Ri.prototype,"muteRemote",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"muteRemote"),Ri.prototype),rr(Ri.prototype,"unmuteRemote",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"unmuteRemote"),Ri.prototype),rr(Ri.prototype,"hasRemoteMediaWithLock",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"hasRemoteMediaWithLock"),Ri.prototype),rr(Ri.prototype,"disconnectForReconnect",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"disconnectForReconnect"),Ri.prototype),rr(Ri.prototype,"reEstablish",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"reEstablish"),Ri.prototype),rr(Ri.prototype,"updateBitrateLimit",[nd],Object.getOwnPropertyDescriptor(Ri.prototype,"updateBitrateLimit"),Ri.prototype),nj=Ri))||nj;function nd(n,i,o){const c=n[i];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return o.value=L(function*(){const h=this.mutex,g=yield h.lock("From P2PChannel.".concat(i));try{for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return yield c.apply(this,v)}finally{g()}}),o}function Lh(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var yi,sj="function"==typeof Symbol&&Symbol.observable||"@@observable",ow=function(){return Math.random().toString(36).substring(7).split("").join(".")},aj={INIT:"@@redux/INIT"+ow(),REPLACE:"@@redux/REPLACE"+ow(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ow()}};function iG(n){if("object"!=typeof n||null===n)return!1;for(var i=n;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}function cj(n,i,o){var c;if("function"==typeof i&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error(Lh(0));if("function"==typeof i&&void 0===o&&(o=i,i=void 0),void 0!==o){if("function"!=typeof o)throw new Error(Lh(1));return o(cj)(n,i)}if("function"!=typeof n)throw new Error(Lh(2));var h=n,g=i,p=[],v=p,_=!1;function y(){v===p&&(v=p.slice())}function b(){if(_)throw new Error(Lh(3));return g}function C(Q){if("function"!=typeof Q)throw new Error(Lh(4));if(_)throw new Error(Lh(5));var $=!0;return y(),v.push(Q),function(){if($){if(_)throw new Error(Lh(6));$=!1,y();var ae=v.indexOf(Q);v.splice(ae,1),p=null}}}function R(Q){if(!iG(Q))throw new Error(Lh(7));if(void 0===Q.type)throw new Error(Lh(8));if(_)throw new Error(Lh(9));try{_=!0,g=h(g,Q)}finally{_=!1}for(var $=p=v,ae=0;ae<$.length;ae++)(0,$[ae])();return Q}function N(Q){if("function"!=typeof Q)throw new Error(Lh(10));h=Q,R({type:aj.REPLACE})}function j(){var Q,$=C;return(Q={subscribe:function(ae){if("object"!=typeof ae||null===ae)throw new Error(Lh(11));function fe(){ae.next&&ae.next(b())}return fe(),{unsubscribe:$(fe)}}})[sj]=function(){return this},Q}return R({type:aj.INIT}),(c={dispatch:R,subscribe:C,getState:b,replaceReducer:N})[sj]=j,c}function uj(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function ir(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?uj(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):uj(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}!function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS"}(yi||(yi={}));class oG{constructor(i,o,c,h){q(this,"store",void 0),q(this,"reducer",void 0);const g={codec:i,audioCodec:o,mode:c,clientId:h,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,v=arguments.length>1?arguments[1]:void 0;switch(v.type){case yi.SET_SESSION_ID:return ir(ir({},p),{},{sessionId:v.sessionId});case yi.SET_P2P_ID:return ir(ir({},p),{},{p2pId:v.p2pId});case yi.SET_UID:return ir(ir({},p),{},{uid:v.uid});case yi.SET_PUB_ID:return ir(ir({},p),{},{pubId:v.pubId});case yi.KEY_METRIC_CLIENT_CREATED:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{clientCreated:v.metric})});case yi.KEY_METRIC_JOIN_START:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{joinStart:v.metric})});case yi.AVOID_JOIN_START:return ir(ir({},p),{},{avoidJoinStart:v.avoidJoinStart});case yi.KEY_METRIC_JOIN_END:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{joinEnd:v.metric})});case yi.KEY_METRIC_REQUEST_AP_START:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{requestAPStart:v.metric})});case yi.KEY_METRIC_REQUEST_AP_END:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{requestAPEnd:v.metric})});case yi.KEY_METRIC_JOIN_GATEWAY_START:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{joinGatewayStart:v.metric})});case yi.KEY_METRIC_JOIN_GATEWAY_END:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{joinGatewayEnd:v.metric})});case yi.KEY_METRIC_PEER_CONNECTION_START:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{peerConnectionStart:v.metric})});case yi.KEY_METRIC_PEER_CONNECTION_END:return ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{peerConnectionEnd:v.metric})});case yi.KEY_METRIC_PUBLISH:{const _=p.keyMetrics.publish,y=_.findIndex(b=>b.trackId===v.metric.trackId);return-1!==y?(_[y]=ir(ir({},_[y]),v.metric),ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{publish:[..._]})})):ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{publish:[...p.keyMetrics.publish,v.metric]})})}case yi.KEY_METRIC_SUBSCRIBE:{const _=p.keyMetrics.subscribe,y=_.findIndex(b=>b.userId===v.metric.userId&&b.type===v.metric.type);return-1!==y?(_[y]=ir(ir({},_[y]),v.metric),ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{subscribe:[..._]})})):ir(ir({},p),{},{keyMetrics:ir(ir({},p.keyMetrics),{},{subscribe:[...p.keyMetrics.subscribe,v.metric]})})}case yi.SET_CLOUD_PROXY_SERVER_MODE:return p.cloudProxyServerMode=v.mode,p;case yi.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof v.index?p.joinChannelServiceRecords=[...p.joinChannelServiceRecords,v.record]:(p.joinChannelServiceRecords[v.index]=ir(ir({},p.joinChannelServiceRecords[v.index]),v.record),p.joinChannelServiceRecords=[...p.joinChannelServiceRecords]),p;case yi.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return p.joinChannelServiceRecords=[],p;case yi.RESET_KEY_METRICS:return p.keyMetrics={publish:[],subscribe:[]},p;default:return p}},this.store=cj(this.reducer)}set sessionId(i){this.store.dispatch({type:yi.SET_SESSION_ID,sessionId:i})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(i){this.store.dispatch({type:yi.SET_P2P_ID,p2pId:i})}get p2pId(){return this.store.getState().p2pId}set uid(i){this.store.dispatch({type:yi.SET_UID,uid:i})}get uid(){return this.store.getState().uid}set pubId(i){this.store.dispatch({type:yi.SET_PUB_ID,pubId:i})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(i){this.store.dispatch({type:yi.SET_CLOUD_PROXY_SERVER_MODE,mode:i})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:yi.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:yi.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(i){this.store.dispatch({type:yi.AVOID_JOIN_START,avoidJoinStart:i})}joinEnd(){this.store.dispatch({type:yi.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:yi.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:yi.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:yi.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:yi.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:yi.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:yi.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(i,o,c,h){this.store.dispatch({type:yi.KEY_METRIC_PUBLISH,metric:ir(ir({trackId:i,type:o},c&&{publishStart:c}),h&&{publishEnd:h})})}subscribe(i,o,c,h,g){this.store.dispatch({type:yi.KEY_METRIC_SUBSCRIBE,metric:ir(ir(ir({userId:i,type:o},c&&{subscribeStart:c}),h&&{subscribeEnd:h}),g&&{firstFrame:g})})}massSubscribe(i,o,c,h){i.forEach(g=>{this.store.dispatch({type:yi.KEY_METRIC_SUBSCRIBE,metric:ir(ir(ir({userId:g.userId,type:g.type},o&&{subscribeStart:o}),c&&{subscribeEnd:c}),h&&{firstFrame:h})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(i,o){"gateway"===i.service&&Array.isArray(i.urls)&&(i.urls=i.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof o?(this.store.dispatch({type:yi.RECORD_JOIN_CHANNEL_SERVICE,record:ir(ir({},i),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(o<0||o>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:yi.RECORD_JOIN_CHANNEL_SERVICE,record:i,index:o}),o)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:yi.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:yi.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let _l;const v0=()=>void 0!==window.isSecureContext;class SB{constructor(i,o){q(this,"time",void 0),q(this,"sequence",void 0),q(this,"name",void 0),q(this,"elapse",void 0),this.name=i,this.time=performance.now(),this.sequence=zM[o].indexOf(i)}setElapse(i){this.elapse=i}}const sG=new Map;class aG{constructor(i,o){q(this,"records",[]),q(this,"_id",void 0),q(this,"_group",void 0),q(this,"_localTimeStamp",void 0),q(this,"_performanceTimeStamp",void 0),this._id=i,this._group=o,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(i){const o=new SB(i,this._group);-1===o.sequence&&oe.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(o);const c=this.records.find(h=>h.sequence===o.sequence-1);c&&o.setElapse(o.time-c.time)}getRecord(i){return this.records.find(o=>o&&o.name===i)}resetRecords(){this.records.length=0}}function uG(n){let i={};e:for(;!wB(n);){let o=tm(n);switch(o>>>3){case 0:break e;case 1:i.requestId=fj(n,tm(n));break;case 2:i.requestType=tm(n)>>>0;break;case 3:i.scorePorn=DB(n);break;case 4:i.scoreSexy=DB(n);break;case 5:i.scoreNeutral=DB(n);break;case 6:i.requestScene=tm(n)>>>0;break;case 7:i.scene=tm(n)>>>0;break;default:IB(n,7&o)}}return i}function Q2(n,i){let o=n.service;void 0!==o&&(Ei(i,8),Ei(i,o));let c=n.vendor;void 0!==c&&(Ei(i,16),Ei(i,c));let h=n.token;void 0!==h&&(Ei(i,26),Bh(i,h));let g=n.callbackUrl;void 0!==g&&(Ei(i,34),Bh(i,g))}function lG(n){let i=tm(n),o=n.limit;return n.limit=n.offset+i,o}function IB(n,i){switch(i){case 0:for(;128&OB(n););break;case 2:TB(n,tm(n));break;case 5:TB(n,4);break;case 1:TB(n,8);break;default:throw new Error("Unimplemented type: "+i)}}let lj=new Float32Array(1);new Uint8Array(lj.buffer);let H2=new Float64Array(1),us=new Uint8Array(H2.buffer);function Bp(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let dj=[];function hj(){const n=dj.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function pj(n){dj.push(n)}function TB(n,i){if(n.offset+i>n.limit)throw new Error("Skip past limit");n.offset+=i}function wB(n){return n.offset>=n.limit}function Gg(n,i){let o=n.bytes,c=n.offset,h=n.limit,g=c+i;if(g>o.length){let p=new Uint8Array(2*g);p.set(o),n.bytes=p}return n.offset=g,g>h&&(n.limit=g),c}function RB(n,i){let o=n.offset;if(o+i>n.limit)throw new Error("Read past limit");return n.offset+=i,o}function fj(n,i){let o=RB(n,i),c=String.fromCharCode,h=n.bytes,g="\ufffd",p="";for(let v=0;v<i;v++){let _,y,b,C,R=h[v+o];0==(128&R)?p+=c(R):192==(224&R)?v+1>=i?p+=g:(_=h[v+o+1],128!=(192&_)?p+=g:(C=(31&R)<<6|63&_,C<128?p+=g:(p+=c(C),v++))):224==(240&R)?v+2>=i?p+=g:(_=h[v+o+1],y=h[v+o+2],32896!=(49344&(_|y<<8))?p+=g:(C=(15&R)<<12|(63&_)<<6|63&y,C<2048||C>=55296&&C<=57343?p+=g:(p+=c(C),v+=2))):240==(248&R)?v+3>=i?p+=g:(_=h[v+o+1],y=h[v+o+2],b=h[v+o+3],8421504!=(12632256&(_|y<<8|b<<16))?p+=g:(C=(7&R)<<18|(63&_)<<12|(63&y)<<6|63&b,C<65536||C>1114111?p+=g:(C-=65536,p+=c(55296+(C>>10),56320+(1023&C)),v+=3))):p+=g}return p}function Bh(n,i){let o=i.length,c=0;for(let p=0;p<o;p++){let v=i.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+i.charCodeAt(++p)-56613888),c+=v<128?1:v<2048?2:v<65536?3:4}Ei(n,c);let h=Gg(n,c),g=n.bytes;for(let p=0;p<o;p++){let v=i.charCodeAt(p);v>=55296&&v<=56319&&p+1<o&&(v=(v<<10)+i.charCodeAt(++p)-56613888),v<128?g[h++]=v:(v<2048?g[h++]=v>>6&31|192:(v<65536?g[h++]=v>>12&15|224:(g[h++]=v>>18&7|240,g[h++]=v>>12&63|128),g[h++]=v>>6&63|128),g[h++]=63&v|128)}}function dG(n,i){let o=Gg(n,i.limit),c=n.bytes,h=i.bytes;for(let g=0,p=i.limit;g<p;g++)c[g+o]=h[g]}function OB(n){return n.bytes[RB(n,1)]}function mj(n,i){let o=Gg(n,1);n.bytes[o]=i}function DB(n){let i=RB(n,8),o=n.bytes;return us[0]=o[i++],us[1]=o[i++],us[2]=o[i++],us[3]=o[i++],us[4]=o[i++],us[5]=o[i++],us[6]=o[i++],us[7]=o[i++],H2[0]}function kB(n,i){let o=Gg(n,8),c=n.bytes;H2[0]=i,c[o++]=us[0],c[o++]=us[1],c[o++]=us[2],c[o++]=us[3],c[o++]=us[4],c[o++]=us[5],c[o++]=us[6],c[o++]=us[7]}function tm(n){let i,o=0,c=0;do{i=OB(n),o<32&&(c|=(127&i)<<o),o+=7}while(128&i);return c}function Ei(n,i){for(i>>>=0;i>=128;)mj(n,127&i|128),i>>>=7;mj(n,i)}function Fp(n,i){let o=i.low>>>0,c=(i.low>>>28|i.high<<4)>>>0,h=i.high>>>24,g=0===h?0===c?o<16384?o<128?1:2:o<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:h<128?9:10,p=Gg(n,g),v=n.bytes;switch(g){case 10:v[p+9]=h>>>7&1;case 9:v[p+8]=9!==g?128|h:127&h;case 8:v[p+7]=8!==g?c>>>21|128:c>>>21&127;case 7:v[p+6]=7!==g?c>>>14|128:c>>>14&127;case 6:v[p+5]=6!==g?c>>>7|128:c>>>7&127;case 5:v[p+4]=5!==g?128|c:127&c;case 4:v[p+3]=4!==g?o>>>21|128:o>>>21&127;case 3:v[p+2]=3!==g?o>>>14|128:o>>>14&127;case 2:v[p+1]=2!==g?o>>>7|128:o>>>7&127;case 1:v[p]=1!==g?128|o:127&o}}var NB={};Object.defineProperty(NB,"__esModule",{value:!0});var gj=function(){function n(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return n.hashStr=function(i,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendStr(i).end(o)},n.hashAsciiStr=function(i,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendAsciiStr(i).end(o)},n._hex=function(i){var o,c,h,g,p=n.hexChars,v=n.hexOut;for(g=0;g<4;g+=1)for(c=8*g,o=i[g],h=0;h<8;h+=2)v[c+1+h]=p.charAt(15&o),v[c+0+h]=p.charAt(15&(o>>>=4)),o>>>=4;return v.join("")},n._md5cycle=function(i,o){var c=i[0],h=i[1],g=i[2],p=i[3];h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[0]-680876936|0)<<7|c>>>25)+h|0)&h|~c&g)+o[1]-389564586|0)<<12|p>>>20)+c|0)&c|~p&h)+o[2]+606105819|0)<<17|g>>>15)+p|0)&p|~g&c)+o[3]-1044525330|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[4]-176418897|0)<<7|c>>>25)+h|0)&h|~c&g)+o[5]+1200080426|0)<<12|p>>>20)+c|0)&c|~p&h)+o[6]-1473231341|0)<<17|g>>>15)+p|0)&p|~g&c)+o[7]-45705983|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[8]+1770035416|0)<<7|c>>>25)+h|0)&h|~c&g)+o[9]-1958414417|0)<<12|p>>>20)+c|0)&c|~p&h)+o[10]-42063|0)<<17|g>>>15)+p|0)&p|~g&c)+o[11]-1990404162|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&g|~h&p)+o[12]+1804603682|0)<<7|c>>>25)+h|0)&h|~c&g)+o[13]-40341101|0)<<12|p>>>20)+c|0)&c|~p&h)+o[14]-1502002290|0)<<17|g>>>15)+p|0)&p|~g&c)+o[15]+1236535329|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[1]-165796510|0)<<5|c>>>27)+h|0)&g|h&~g)+o[6]-1069501632|0)<<9|p>>>23)+c|0)&h|c&~h)+o[11]+643717713|0)<<14|g>>>18)+p|0)&c|p&~c)+o[0]-373897302|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[5]-701558691|0)<<5|c>>>27)+h|0)&g|h&~g)+o[10]+38016083|0)<<9|p>>>23)+c|0)&h|c&~h)+o[15]-660478335|0)<<14|g>>>18)+p|0)&c|p&~c)+o[4]-405537848|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[9]+568446438|0)<<5|c>>>27)+h|0)&g|h&~g)+o[14]-1019803690|0)<<9|p>>>23)+c|0)&h|c&~h)+o[3]-187363961|0)<<14|g>>>18)+p|0)&c|p&~c)+o[8]+1163531501|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h&p|g&~p)+o[13]-1444681467|0)<<5|c>>>27)+h|0)&g|h&~g)+o[2]-51403784|0)<<9|p>>>23)+c|0)&h|c&~h)+o[7]+1735328473|0)<<14|g>>>18)+p|0)&c|p&~c)+o[12]-1926607734|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[5]-378558|0)<<4|c>>>28)+h|0)^h^g)+o[8]-2022574463|0)<<11|p>>>21)+c|0)^c^h)+o[11]+1839030562|0)<<16|g>>>16)+p|0)^p^c)+o[14]-35309556|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[1]-1530992060|0)<<4|c>>>28)+h|0)^h^g)+o[4]+1272893353|0)<<11|p>>>21)+c|0)^c^h)+o[7]-155497632|0)<<16|g>>>16)+p|0)^p^c)+o[10]-1094730640|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[13]+681279174|0)<<4|c>>>28)+h|0)^h^g)+o[0]-358537222|0)<<11|p>>>21)+c|0)^c^h)+o[3]-722521979|0)<<16|g>>>16)+p|0)^p^c)+o[6]+76029189|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((p=((p+=((c=((c+=(h^g^p)+o[9]-640364487|0)<<4|c>>>28)+h|0)^h^g)+o[12]-421815835|0)<<11|p>>>21)+c|0)^c^h)+o[15]+530742520|0)<<16|g>>>16)+p|0)^p^c)+o[2]-995338651|0)<<23|h>>>9)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[0]-198630844|0)<<6|c>>>26)+h|0)|~g))+o[7]+1126891415|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[14]-1416354905|0)<<15|g>>>17)+p|0)|~c))+o[5]-57434055|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[12]+1700485571|0)<<6|c>>>26)+h|0)|~g))+o[3]-1894986606|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[10]-1051523|0)<<15|g>>>17)+p|0)|~c))+o[1]-2054922799|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[8]+1873313359|0)<<6|c>>>26)+h|0)|~g))+o[15]-30611744|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[6]-1560198380|0)<<15|g>>>17)+p|0)|~c))+o[13]+1309151649|0)<<21|h>>>11)+g|0,h=((h+=((p=((p+=(h^((c=((c+=(g^(h|~p))+o[4]-145523070|0)<<6|c>>>26)+h|0)|~g))+o[11]-1120210379|0)<<10|p>>>22)+c|0)^((g=((g+=(c^(p|~h))+o[2]+718787259|0)<<15|g>>>17)+p|0)|~c))+o[9]-343485551|0)<<21|h>>>11)+g|0,i[0]=c+i[0]|0,i[1]=h+i[1]|0,i[2]=g+i[2]|0,i[3]=p+i[3]|0},n.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this},n.prototype.appendStr=function(i){var o,c,h=this._buffer8,g=this._buffer32,p=this._bufferLength;for(c=0;c<i.length;c+=1){if((o=i.charCodeAt(c))<128)h[p++]=o;else if(o<2048)h[p++]=192+(o>>>6),h[p++]=63&o|128;else if(o<55296||o>56319)h[p++]=224+(o>>>12),h[p++]=o>>>6&63|128,h[p++]=63&o|128;else{if((o=1024*(o-55296)+(i.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");h[p++]=240+(o>>>18),h[p++]=o>>>12&63|128,h[p++]=o>>>6&63|128,h[p++]=63&o|128}p>=64&&(this._dataLength+=64,n._md5cycle(this._state,g),p-=64,g[0]=g[16])}return this._bufferLength=p,this},n.prototype.appendAsciiStr=function(i){for(var o,c=this._buffer8,h=this._buffer32,g=this._bufferLength,p=0;;){for(o=Math.min(i.length-p,64-g);o--;)c[g++]=i.charCodeAt(p++);if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.appendByteArray=function(i){for(var o,c=this._buffer8,h=this._buffer32,g=this._bufferLength,p=0;;){for(o=Math.min(i.length-p,64-g);o--;)c[g++]=i[p++];if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.getState=function(){var i=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[i[0],i[1],i[2],i[3]]}},n.prototype.setState=function(i){var o,c=i.buffer,h=i.state,g=this._state;for(this._dataLength=i.length,this._bufferLength=i.buflen,g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],o=0;o<c.length;o+=1)this._buffer8[o]=c.charCodeAt(o)},n.prototype.end=function(i){void 0===i&&(i=!1);var o=this._bufferLength,c=this._buffer8,h=this._buffer32,g=1+(o>>2);this._dataLength+=o;var p=8*this._dataLength;if(c[o]=128,c[o+1]=c[o+2]=c[o+3]=0,h.set(n.buffer32Identity.subarray(g),g),o>55&&(n._md5cycle(this._state,h),h.set(n.buffer32Identity)),p<=4294967295)h[14]=p;else{var v=p.toString(16).match(/(.*?)(.{0,8})$/);if(null===v)return;var _=parseInt(v[2],16),y=parseInt(v[1],16)||0;h[14]=_,h[15]=y}return n._md5cycle(this._state,h),i?this._state:n._hex(this._state)},n.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),n.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.hexChars="0123456789abcdef",n.hexOut=[],n.onePassHasher=new n,n}(),_j=NB.Md5=gj;if("5d41402abc4b2a76b9719d911017c592"!==gj.hashStr("hello"))throw new Error("Md5 self test failed.");const hG=function(){var n=L(function*(i,o,c){return yield(h=L(function*(g,p,v){const y=new Uint8Array(_j.hashStr(""+p+v,!0).buffer).slice(0,16),b=y.slice(0,12),C=yield window.crypto.subtle.importKey("raw",y,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:b},C,g))}),function(g,p,v){return h.apply(this,arguments)})(i.buffer,o,c);var h});return function(o,c,h){return n.apply(this,arguments)}}();function vj(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}const pG=new Map([["moderation",1],["supervise",2],["all",3]]);class G2 extends rs{get connectionState(){return this._connectionState}set connectionState(i){if(this._connectionState===i)return;const o=this._connectionState;this._connectionState=i,this.emit(Xo.CONNECTION_STATE_CHANGE,o,i)}get quality(){return this._quality}set quality(i){this._quality=i>1?1:i<.1?.1:i,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(i){super(),q(this,"name","AgoraRTCVideoContentInspect"),q(this,"_connectionState",Du.CONNECTING),q(this,"_innerConnectionState",void 0),q(this,"sequence",0),q(this,"inspectStartTime",void 0),q(this,"workerManagerConnection",void 0),q(this,"workerConnection",void 0),q(this,"workerMessageLengthLimit",void 0),q(this,"inspectIntervalMinimum",void 0),q(this,"qualityRatio",void 0),q(this,"_connectInfo",void 0),q(this,"_cancelTokenSource",sl.CancelToken.source()),q(this,"_retryConfig",void 0),q(this,"wmSequence",0),q(this,"inspectInterval",void 0),q(this,"inspectTimer",null),q(this,"ossFilePrefix",void 0),q(this,"extraInfo",void 0),q(this,"inspectType","all"),q(this,"_quality",1),q(this,"qualityTimer",null),q(this,"_inspectId",void 0),q(this,"_needWorkUrlOnly",!1),q(this,"inspectImage",()=>{if(this.connectionState!==Du.CONNECTED)throw new Pe(Ie.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==Du.CONNECTED)return oe.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void Ln("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=as(5,"inspect-"),this.workerMessageLengthLimit=Bt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Bt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Bt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=i.interval,this.ossFilePrefix=i.ossFilePrefix,this.extraInfo=i.extraInfo,this.inspectType=i.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Jy("worker-manager-"+this._inspectId,Jo),this.on(Xo.STATE_CHANGE,(o,c)=>{this._innerConnectionState=o,oe.debug("[".concat(this._inspectId,"] Inspect operation :").concat(ul[o]," ").concat(c||"")),Bd("debug",["Inspect",this._inspectId],Xo.STATE_CHANGE,"".concat(ul[o]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new Jy("worker-"+this._inspectId,Jo),this.handleWorkerEvents()}init(i,o){var c=this;return L(function*(){c.emit(Xo.STATE_CHANGE,ul.CONNECT_AP),c._connectInfo=i;const h=c._cancelTokenSource.token;return c._retryConfig=o,new jn((g,p)=>{c.on(Xo.CONNECTION_STATE_CHANGE,(v,_)=>{_===Du.CONNECTED&&g()}),c.requestAP(i,h,o).then(v=>{c.connectWorkerManager(v)}).catch(v=>{p(v)})})})()}requestAP(i,o,c){var h=this;return L(function*(){const g=Bt("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),p=yield function(_,y,b,C){let{appId:R,areaCode:N,cname:j,sid:Q,token:$,uid:ae}=y;xL++;const fe="image_moderation_api",Ae={service_name:fe,json_body:JSON.stringify({appId:R,areaCode:N,cname:j,command:"allocateEdge",requestId:xL,seq:xL,sid:Q,token:$,ts:Date.now(),uid:ae+""})};let Re,tt,Tt=_[0];return jl(L(function*(){Re=Date.now();const Mt=yield Vd(Tt,{data:Ae,cancelToken:b,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(tt=Date.now()-Re,0!==Mt.code){const cn=new Pe(Ie.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Mt.code,{retry:!0,responseTime:tt});throw oe.error(cn.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}const Ct=JSON.parse(Mt.json_body);if(200!==Ct.code){const cn=new Pe(Ie.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Ct.code,", reason: ").concat(Ct.reason),{code:Ct.code,responseTime:tt});throw oe.error(cn.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}if(!Ct.servers||!Array.isArray(Ct.servers)||0===Ct.servers.length){const cn=new Pe(Ie.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Ct.code,responseTime:tt});throw oe.error(cn.toString()),Yt("error",["AjaxAPI"],"requestImageInspectAP",void 0,cn.toString()),cn}const Sn=Bt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),on=Bt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Ct.servers.map(cn=>{let{address:vt,wss:Ge}=cn;if(vt&&Ge)return"wss://".concat(vt.replace(/\./g,"-"),".").concat(Sn,":").concat(on||Ge)}).filter(cn=>!!cn),workerToken:Ct.workerToken,vid:Ct.vid,responseTime:tt}}),(Mt,Ct)=>(Kt.apworkerEvent(Q,{success:!0,sc:200,serviceName:fe,responseDetail:JSON.stringify(Mt.addressList),firstSuccess:0===Ct,responseTime:tt,serverIp:_[Ct%_.length]}),!1),(Mt,Ct)=>(Kt.apworkerEvent(Q,{success:!1,sc:Mt.data&&Mt.data.code||200,serviceName:fe,responseTime:tt,serverIp:_[Ct%_.length]}),!!(Mt.code!==Ie.OPERATION_ABORTED&&Mt.code!==Ie.UNEXPECTED_RESPONSE||Mt.data&&Mt.data.retry)&&(Tt=_[(Ct+1)%_.length],!0)),C)}(g,i,o,c);h.emit(Xo.STATE_CHANGE,ul.AP_CONNECTED);const{addressList:v}=p;return h.wmSequence++,v})()}connectWorkerManager(i){var o=arguments,c=this;return L(function*(){c._needWorkUrlOnly=o.length>1&&void 0!==o[1]&&o[1],c.emit(Xo.STATE_CHANGE,ul.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(i,1e4)})()}connectWorker(i){var o=this;return L(function*(){yield o.workerConnection.init([i])})()}handleWorkerManagerEvents(){var i=this;this.workerManagerConnection.on(Mr.CONNECTED,L(function*(){i.emit(Xo.STATE_CHANGE,ul.WORKER_MANAGER_CONNECTED,i.workerManagerConnection.url),i.workerManagerConnection.sendMessage({appId:i._connectInfo.appId,cname:i._connectInfo.cname,uid:i._connectInfo.uid+"",sdkVersion:"4.12.1",sid:i._connectInfo.sid,seq:i.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Mr.CLOSED,()=>{this._innerConnectionState<ul.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Mr.FAILED,()=>{this._innerConnectionState<ul.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Mr.RECONNECTING,()=>{this._innerConnectionState<ul.GET_WORKER_MANAGER_RESPONSE&&(oe.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),Bd("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Mr.ON_MESSAGE,function(){var o=L(function*(c){i.emit(Xo.STATE_CHANGE,ul.GET_WORKER_MANAGER_RESPONSE);const h=i.workerManagerConnection.url;i.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw oe.error("[".concat(i._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),Ln("error",i,"Unexpected code ".concat(g.code," from worker manager")),new Pe(Ie.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&h))throw oe.error("[".concat(i._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),Ln("error",i,"Unexpected content from worker manager : "+JSON.stringify(g)),new Pe(Ie.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const p=Bt("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,v=h.replace(/:\d+\/?$/,":".concat(p));i.emit(Xo.STATE_CHANGE,ul.CONNECT_WORKER,v),i._needWorkUrlOnly?i.emit(Xo.REQUEST_NEW_WORKER_URL,v):yield i.connectWorker(v)}});return function(c){return o.apply(this,arguments)}}()),this.workerManagerConnection.on(Mr.WILL_RECONNECT,(o,c)=>{c(o)}),this.workerManagerConnection.on(Mr.REQUEST_NEW_URLS,(o,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(o).catch(c)})}handleWorkerEvents(){var i=this;this.workerConnection.on(Mr.CONNECTED,L(function*(){i.emit(Xo.STATE_CHANGE,ul.WORKER_CONNECTED,i.workerConnection.url),i.connectionState=Du.CONNECTED})),this.workerConnection.on(Mr.ON_MESSAGE,function(){var o=L(function*(c){if(c.data instanceof ArrayBuffer){const g=function cG(n){return function(o){let c={};e:for(;!wB(o);){let h=tm(o);switch(h>>>3){case 0:break e;case 1:c.code=tm(o);break;case 2:c.msg=fj(o,tm(o));break;case 3:{let g=lG(o);c.data=uG(o),o.limit=g;break}default:IB(o,7&h)}}return c}({bytes:i=n,offset:0,limit:i.length});var i}(new Uint8Array(c.data));if(Bt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&oe.debug("[".concat(i._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if("supervise"===i.inspectType)return void i.emit(Xo.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var h;const p={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},v=Oa(h=Object.keys(p)).call(h,(y,b)=>p[y]>p[b]?y:b,"porn"),_=Object.keys(p).find(y=>y===v);i.emit(Xo.INSPECT_RESULT,_)}else i.emit(Xo.INSPECT_RESULT,void 0,new Pe(Ie.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else i.emit(Xo.INSPECT_RESULT,void 0,new Pe(Ie.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else oe.error("[".concat(i._inspectId,"] Unexpected message type from worker")),Ln("error",i,"Unexpected message type from worker"),i.emit(Xo.INSPECT_RESULT,void 0,new Pe(Ie.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return o.apply(this,arguments)}}()),this.workerConnection.on(Mr.CLOSED,()=>{this.connectionState=Du.CLOSED}),this.workerConnection.on(Mr.FAILED,()=>{this.connectionState=Du.CLOSED}),this.workerConnection.on(Mr.RECONNECTING,()=>{this.connectionState=this.connectionState===Du.CONNECTED?Du.RECONNECTING:Du.CONNECTING}),this.workerConnection.on(Mr.WILL_RECONNECT,(o,c)=>{"recover"===o&&c(o),c("tryNext")}),this.workerConnection.on(Mr.REQUEST_NEW_URLS,(o,c)=>{this.workerManagerConnection.close(),this.once(Xo.REQUEST_NEW_WORKER_URL,h=>{o([h])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(h=>{this.connectWorkerManager(h,!0)}).catch(h=>{c(h)})})}static intToLong(i){return{low:i|=0,high:i>>31,unsigned:i>=0}}requestToInspectImage(){var i=this;return L(function*(){i.sequence++;const o=wv(i,Xo.CLIENT_LOCAL_VIDEO_TRACK),c={appId:i._connectInfo.appId,cname:i._connectInfo.cname,cid:i._connectInfo.cid,sid:i._connectInfo.sid,uid:i._connectInfo.uid,vid:i._connectInfo.vid};if(o){if(!o.isPlaying)return void i.emit(Xo.INSPECT_RESULT,void 0,new Pe(Ie.INVALID_OPERATION,"Only the track being played can be inspected"));const h=yield i.generateRequestData(o,c);i.workerConnection.sendMessage(h,!0,!0)}else i.emit(Xo.INSPECT_RESULT,void 0,new Pe(Ie.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(i,o){var c=this;return L(function*(){let{appId:h,cname:g,cid:p,vid:v,sid:_,uid:y}=o;const b=Date.now(),C=yield i.getCurrentFrameImage("image/jpeg",c.quality),R=yield hG(C,h,g),N=c.sequence+"-"+p+"-"+y+"-"+b+"-"+as(12,""),j={appId:h,cid:p,cname:g,deviceId:"",elapse:G2.intToLong(Number(b-c.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:C.height,width:C.width,jpg:R,networkType:6,osType:7,requestId:N,sdkVersion:"4.12.1",sequence:c.sequence,sid:_,timestamp:G2.intToLong(b),uid:y,vid:v,service:pG.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete j.callbackData,void 0===c.ossFilePrefix&&delete j.ossFilePrefix;const Q=function CB(n){let i=hj();return function(o,c){let h=o.appId;void 0!==h&&(Ei(c,10),Bh(c,h));let g=o.cid;void 0!==g&&(Ei(c,16),Ei(c,g));let p=o.cname;void 0!==p&&(Ei(c,26),Bh(c,p));let v=o.deviceId;void 0!==v&&(Ei(c,34),Bh(c,v));let _=o.elapse;void 0!==_&&(Ei(c,40),Fp(c,_));let y=o.fileSize;void 0!==y&&(Ei(c,48),Fp(c,Bp(y)));let b=o.height;void 0!==b&&(Ei(c,56),Fp(c,Bp(b)));let C=o.jpg;void 0!==C&&(Ei(c,66),Ei(c,C.length),function(yn,Je){let at=Gg(yn,Je.length);yn.bytes.set(Je,at)}(c,C));let R=o.networkType;void 0!==R&&(Ei(c,72),Fp(c,Bp(R)));let N=o.osType;void 0!==N&&(Ei(c,80),Fp(c,Bp(N)));let j=o.requestId;void 0!==j&&(Ei(c,90),Bh(c,j));let Q=o.sdkVersion;void 0!==Q&&(Ei(c,98),Bh(c,Q));let $=o.sequence;void 0!==$&&(Ei(c,104),Fp(c,Bp($)));let ae=o.sid;void 0!==ae&&(Ei(c,114),Bh(c,ae));let fe=o.timestamp;void 0!==fe&&(Ei(c,120),Fp(c,fe));let Ae=o.uid;void 0!==Ae&&(Ei(c,128),Ei(c,Ae));let Re=o.vid;void 0!==Re&&(Ei(c,136),Ei(c,Re));let tt=o.width;void 0!==tt&&(Ei(c,144),Fp(c,Bp(tt)));let Tt=o.service;void 0!==Tt&&(Ei(c,152),Ei(c,Tt));let Mt=o.callbackData;void 0!==Mt&&(Ei(c,162),Bh(c,Mt));let Ct=o.jpgEncryption;void 0!==Ct&&(Ei(c,168),Ei(c,Ct));let Sn=o.requestType;void 0!==Sn&&(Ei(c,176),Ei(c,Sn));let on=o.scorePorn;void 0!==on&&(Ei(c,185),kB(c,on));let cn=o.scoreSexy;void 0!==cn&&(Ei(c,193),kB(c,cn));let vt=o.scoreNeutral;void 0!==vt&&(Ei(c,201),kB(c,vt));let Ge=o.scene;void 0!==Ge&&(Ei(c,208),Ei(c,Ge));let ot=o.ossFilePrefix;void 0!==ot&&(Ei(c,218),Bh(c,ot));let _t=o.serviceVendor;if(void 0!==_t)for(let yn of _t){Ei(c,226);let Je=hj();Q2(yn,Je),Ei(c,Je.limit),dG(c,Je),pj(Je)}}(n,i),function(o){let c=o.bytes,h=o.limit;return c.length===h?c:c.subarray(0,h)}(i)}(j);if(Q.byteLength<c.workerMessageLengthLimit){if(Bt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const $=function(ae){for(var fe=1;fe<arguments.length;fe++){var Ae=null!=arguments[fe]?arguments[fe]:{};fe%2?vj(Object(Ae),!0).forEach(function(Re){q(ae,Re,Ae[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(Ae)):vj(Object(Ae)).forEach(function(Re){Object.defineProperty(ae,Re,Object.getOwnPropertyDescriptor(Ae,Re))})}return ae}({},j);delete $.jpg,oe.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify($)),Ln("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify($)))}return Q}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(i,{appId:h,cname:g,cid:p,vid:v,sid:_,uid:y})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=sl.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Du.CLOSED,this.emit(Xo.STATE_CHANGE,ul.CLOSED)}}var Aj,yj,PB,W2,MB,Ej,fG,mG,gG,sw,_G,r;function t(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function e(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?t(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}let s=(Aj=sc("AgoraRTCClient","store.clientId"),yj=l1({report:Kt}),PB=l1(),W2=l1({report:Kt}),MB=d1(),Ej=l1({report:Kt}),fG=d1({report:Kt}),mG=d1({report:Kt}),gG=d1({report:Kt}),sw=l1({reportResult:!0,report:Kt}),Aj((rr((r=class extends rs{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(n){var i;let o;if(super(),i=this,q(this,"store",void 0),q(this,"_uid",void 0),q(this,"_channelName",void 0),q(this,"_uintUid",void 0),q(this,"_users",[]),q(this,"_codec",void 0),q(this,"_mode",void 0),q(this,"_config",void 0),q(this,"_clientId",void 0),q(this,"_appId",void 0),q(this,"_sessionId",null),q(this,"_key",void 0),q(this,"_joinInfo",void 0),q(this,"_gateway",void 0),q(this,"_statsCollector",void 0),q(this,"_configDistribute",void 0),q(this,"_leaveMutex",new au("client-leave")),q(this,"_publishMutex",new au("client-publish")),q(this,"_renewTokenMutex",new au("client-renewtoken")),q(this,"_subscribeMutex",new au("client-subscribe")),q(this,"_encryptionMode","none"),q(this,"_encryptionSecret",null),q(this,"_encryptionSalt",null),q(this,"_proxyServer",void 0),q(this,"_performanceRecorder",void 0),q(this,"_turnServer",{servers:[],mode:"auto"}),q(this,"_cloudProxyServerMode","disabled"),q(this,"_isDualStreamEnabled",!1),q(this,"_defaultStreamFallbackType",void 0),q(this,"_lowStreamParameter",void 0),q(this,"_streamFallbackTypeCacheMap",new Map),q(this,"_remoteStreamTypeCacheMap",new Map),q(this,"_axiosCancelSource",sl.CancelToken.source()),q(this,"_audioVolumeIndicationInterval",void 0),q(this,"_networkQualityInterval",void 0),q(this,"_userOfflineTimeout",void 0),q(this,"_streamRemovedTimeout",void 0),q(this,"_injectStreamingClient",void 0),q(this,"_liveTranscodeStreamingClient",void 0),q(this,"_liveRawStreamingClient",void 0),q(this,"_channelMediaRelayClient",void 0),q(this,"_networkQualitySensitivity","normal"),q(this,"_p2pChannel",void 0),q(this,"_useLocalAccessPoint",!1),q(this,"_joinAndNotLeaveYet",!1),q(this,"_numberOfJoinCount",0),q(this,"_remoteDefaultVideoStreamType",void 0),q(this,"_inspect",void 0),q(this,"_handleLocalTrackEnable",(c,h,g)=>{this.publish(c,!1).then(h).catch(g)}),q(this,"_handleLocalTrackDisable",(c,h,g)=>{this.unpublish(c).then(h).catch(g)}),q(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(oe.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),Ln("error",this,"StringUID is Mixed with UintUID"));const h=this._users.find(g=>g.uid===c.uid);if(h)h._trust_in_room_=!0;else{const g=new _2(c.uid,c.uint_id||c.uid);this._users.push(g),oe.debug("[".concat(this._clientId,"] user online"),c.uid),Ld("info",this,"user-joined",{uid:c.uid}),this.emit(Er.USER_JOINED,g)}}),q(this,"_handleUserOffline",c=>{const h=this._users.find(g=>g.uid===c.uid);h&&(this._handleRemoveStream(c),nL(this._users,h),this._remoteStreamTypeCacheMap.delete(h.uid),this._streamFallbackTypeCacheMap.delete(h.uid),oe.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),Ld("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(Er.USER_LEAVED,h,c.reason))}),q(this,"_handleAddAudioOrVideoStream",(c,h,g,p,v,_,y)=>{const b=this._users.find(R=>R.uid===h);if(!b)return oe.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void Ao("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");oe.debug("[".concat(this._clientId,"] stream added with uid ").concat(h,", type ").concat(c)),Ao("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:h,mediaType:c});const C="audio"===c?b.hasAudio:b.hasVideo;b._uintid||(b._uintid=v||h),"audio"===c?b._trust_audio_stream_added_state_=!0:b._trust_video_stream_added_state_=!0,"audio"===c?(b._audio_added_=!0,void 0!==g&&(b._audioSSRC=g),void 0!==p&&(b._cname=p),_&&(b._audioOrtc=_)):(b._video_added_=!0,void 0!==g&&(b._videoSSRC=g),void 0!==p&&(b._cname=p),void 0!==y&&(b._rtxSsrcId=y),_&&(b._videoOrtc=_)),("audio"===c?b.hasAudio:b.hasVideo)&&!C&&(oe.info("[".concat(this._clientId,"] remote user ").concat(b.uid," published ").concat(c)),Ln("info",this,"remote user ".concat(b.uid," published ").concat(c)),Ld("info",this,"user-published",{uid:b.uid,mediaType:c}),this.emit(Er.USER_PUBLISHED,b,c)),"video"===c?Kt.onGatewayStream(this._sessionId,ma.ON_ADD_VIDEO_STREAM,No.ON_ADD_VIDEO_STREAM,{peer:v||h}):Kt.onGatewayStream(this._sessionId,ma.ON_ADD_AUDIO_STREAM,No.ON_ADD_AUDIO_STREAM,{peer:v||h}),this._p2pChannel.remoteMediaSsrcChanged(b,c,g)&&this._p2pChannel.unsubscribe(b,c,!0).then(()=>{oe.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(b.uid," after rejoin because SSRC id changed.")),this._subscribe(b,c,!0).catch(R=>{oe.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),Ln("error",this,"resubscribe error: ".concat(R.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(b,c)&&(oe.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(b.uid," after reconnect.")),this._subscribe(b,c,!0).catch(R=>{oe.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),Ln("error",this,"resubscribe error: ".concat(R.toString()))}))}),q(this,"_handleRemoveStream",c=>{const h=this._users.find(p=>p.uid===c.uid);if(!h)return oe.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void Ao("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});oe.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),Ao("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};h.hasAudio&&h.hasVideo?g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(Er.USER_UNPUBLISHED,h,"audio"),oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(Er.USER_UNPUBLISHED,h,"video")}:h.hasVideo?g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(Er.USER_UNPUBLISHED,h,"video")}:h.hasAudio&&(g=()=>{oe.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Ld("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(Er.USER_UNPUBLISHED,h,"audio")}),h._trust_audio_stream_added_state_=!0,h._trust_video_stream_added_state_=!0,h._audio_added_=!1,h._video_added_=!1,this._p2pChannel.unsubscribe(h).then(p=>{if(p)return this._gateway.unsubscribe(p,h.uid)}),h._audioSSRC=void 0,h._videoSSRC=void 0,h._audioOrtc=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0,Kt.onGatewayStream(this._sessionId,ma.ON_REMOVE_STREAM,No.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),q(this,"_handleSetStreamLocalEnable",(c,h,g)=>{const p=this._users.find(y=>y.uid===h);if(!p)return oe.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void Ao("error",this,"disable_local_video","can not find target user!(disable_local)");oe.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h)),Ao("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h));const v="audio"===c?p.hasAudio:p.hasVideo;if("audio"===c){p._trust_audio_enabled_state_=!0;const y=p._audio_enabled_;if(p._audio_enabled_=g,p._audio_enabled_===y)return;{const b=p._audio_enabled_?"enable-local-audio":"disable-local-audio";oe.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(h,", msg: ").concat(b)),pr("debug",this,"user-info-updated",{uid:h,msg:b}),this.emit(Er.USER_INFO_UPDATED,h,b)}}else{p._trust_video_enabled_state_=!0;const y=p._video_enabled_;if(p._video_enabled_=g,p._video_enabled_===y)return;{const b=p._video_enabled_?"enable-local-video":"disable-local-video";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(h,", msg: ").concat(b)),pr("debug",this,"user-info-updated",{uid:h,msg:b}),this.emit(Er.USER_INFO_UPDATED,h,b)}}const _="audio"===c?p.hasAudio:p.hasVideo;return v!==_?!v&&_?(oe.info("[".concat(this._clientId,"] remote user ").concat(h," published ").concat(c)),Ld("info",this,"user-published",{uid:h,mediaType:c}),void this.emit(Er.USER_PUBLISHED,p,c)):("video"===c&&p._videoTrack&&p._videoTrack._destroy(),this._p2pChannel.muteRemote(p,c),oe.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished ").concat(c)),Ld("info",this,"user-unpublished",{uid:h,mediaType:c}),void this.emit(Er.USER_UNPUBLISHED,p,c)):void 0}),q(this,"_handleMuteStream",(c,h,g)=>{oe.debug("[".concat(this._clientId,"] receive mute message"),c,h,g),Ao("debug",this,"mute_".concat(h),g);const p=this._users.find(y=>y.uid===c);if(!p)return oe.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void Ao("warning",this,"mute_".concat(h),"can not find remote user, ignore mute event, uid: ".concat(c));const v="audio"===h?p.hasAudio:p.hasVideo;if("audio"===h){p._trust_audio_mute_state_=!0;const y=p._audio_muted_;if(p._audio_muted_=g,p._audio_muted_===y)return;{const b=p._audio_muted_?"mute-audio":"unmute-audio";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(b)),pr("debug",this,"user-info-updated",{uid:c,msg:b}),this.emit(Er.USER_INFO_UPDATED,c,b)}}else{p._trust_video_mute_state_=!0;const y=p._video_muted_;if(p._video_muted_=g,p._video_muted_===y)return;{const b=p._video_muted_?"mute-video":"unmute-video";oe.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(b)),pr("debug",this,"user-info-updated",{uid:c,msg:b}),this.emit(Er.USER_INFO_UPDATED,c,b)}}const _="audio"===h?p.hasAudio:p.hasVideo;if(v!==_){if(!v&&_)return("audio"===h?p._audioSSRC:p._videoSSRC)?(oe.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(h)),Ld("info",this,"user-published",{uid:p.uid,mediaType:h}),void this.emit(Er.USER_PUBLISHED,p,h)):void oe.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(h," unmute message  before add stream message, ").concat(h," SSRC doesn't exist yet."));"video"===h&&p._videoTrack&&p._videoTrack._destroy(),this._p2pChannel.muteRemote(p,h),oe.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(h)),Ld("info",this,"user-unpublished",{uid:c,mediaType:h}),this.emit(Er.USER_UNPUBLISHED,p,h)}}),q(this,"_handleP2PLost",function(){var c=L(function*(h){if(oe.debug("[".concat(i._clientId,"] receive p2p lost"),h),Ao("debug",i,"p2p_lost",h),parseInt(h.p2pid,10)!==i.store.p2pId)return oe.warning("P2PLost stream not found",h),void Ao("warning",i,"p2p_lost","P2PLost stream not found, ".concat(h));yield i._p2pChannel.requestReconnect()});return function(h){return c.apply(this,arguments)}}()),q(this,"_handleTokenWillExpire",()=>{oe.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),Ao("debug",this,"token_privilege_will_expire"),this.emit(Er.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),q(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),oe.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),Bd("info",["window",this.store.clientId],Md()?"beforeunload":"pagehide"))}),q(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Er.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Er.NETWORK_QUALITY,c)}),this._codec=n.codec,this._mode=n.mode,this._clientId=as(5,"client-"),this.store=new oG(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),oe.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(al," build: ").concat(kM,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),pr("info",this,"constructor",{version:al,build:kM,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,h){const g=new aG(c,"join");return sG.set(c,g),g}(this._clientId),n.clientRoleOptions)try{E6(n.clientRoleOptions),o=Object.assign({},n.clientRoleOptions)}catch(c){oe.warning("[".concat(this._clientId,"] ").concat(c.toString())),Ln("warning",this,c.toString())}this._statsCollector=new zy(this.store),this._statsCollector.onStatsException=(c,h,g)=>{oe.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(h,", uid: ").concat(g)),Ld("debug",this,Er.EXCEPTION,{code:c,message:h,uid:g}),this.emit(Er.EXCEPTION,{code:c,msg:h,uid:g})},this._statsCollector.onUploadPublishDuration=(c,h,g,p)=>{const v=this._users.find(_=>_.uid===c);v&&Kt.peerPublishStatus(this._sessionId,{subscribeElapse:p,audioPublishDuration:h,videoPublishDuration:g,peer:v._uintid})},this._gateway=new kz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:n.websocketRetryConfig||Jo,httpRetryConfig:n.httpRetryConfig||Jo,forceWaitGatewayResponse:void 0===n.forceWaitGatewayResponse||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:o}),this._config=n,this._configDistribute=new jQ,this._p2pChannel=new oj(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(n,i,o,c,h){var g=this;return L(function*(){const p=++g._numberOfJoinCount;g._performanceRecorder.checkPoint("startJoin"),g.store.joinStart(),c&&(g.store.uid=c);const v="HTTPS"===(_l||_l||(_l=(window.location.protocol.split(":")[0]||"").toUpperCase(),_l)),_=v0()?window.isSecureContext:"Browser Not Support";if(!v0()&&!v||!window.isSecureContext){const j="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";oe.warning(j),Yt("warning",g,j)}const y=D9();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),oe.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),Yt("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const b=Kt.reportApiInvoke(y,{name:hr.JOIN,options:[n,i,o,c],states:{isHttps:v,isSecureContext:_},tag:sr.TRACER});Kt.setAppId(n);try{if(!o&&null!==o)throw new Pe(Ie.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&Ic(o,"token",1,2047),Ic(n,"appid",1,2047),VD(i),c&&jD(c),h&&Ic(h,"optionalInfo",1,2047)}catch(j){throw b.onError(j),j}if(oe.info("[".concat(g._clientId,"] start join channel ").concat(i,", join number: ").concat(p)),pr("info",g,"join",{channel:i}),g._leaveMutex.isLocked&&(oe.debug("[".concat(g._clientId,"] join: waiting leave operation")),Ln("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),oe.debug("[".concat(g._clientId,"] join: continue")),Ln("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const j=new Pe(Ie.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw b.onError(j),j}g._sessionId||(g._sessionId=y,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const C=e({clientId:g._clientId,appId:n,sid:g._sessionId,cname:i,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:o||n,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:h,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if("string"==typeof c&&(C.stringUid=c,g._uintUid?(C.uid=g._uintUid,g._uintUid=void 0):C.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(C.aesmode=g._encryptionMode,C.aespassword=yield(j=L(function*(Q){const $=Uk("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),ae=yield window.crypto.subtle.importKey("spki",$,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),fe=Vx(Q),Ae=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},ae,fe);return A1(new Uint8Array(Ae))}),function(Q){return j.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new Pe(Ie.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(C.aessalt=g._encryptionSalt)}var j;g._startSession(g._sessionId,{channel:i,appId:n});const R=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&R===g._sessionId&&Kt.joinChannelTimeout(g._sessionId,5)},5e3);try{let j;const Q=C.cloudProxyServer;if("443only"===Q)C.proxyServer=Bt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(Q)){const fe=Bt("PROXY_SERVER_TYPE3");C.proxyServer=Array.isArray(fe)?fe[0]:fe}if(Kt.setProxyServer(C.proxyServer),oe.setProxyServer(C.proxyServer),wy(C.proxyServer),g._performanceRecorder.checkPoint("startRequestAp"),g.store.requestAPStart(),C.stringUid&&!C.uid&&"normal"===Q){yield U4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,!1,g.store);const fe=yield l2(C.stringUid,C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,g.store);oe.debug("getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),Ln("debug",g,"getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),C.uid=fe,j=yield U1(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,g.store)}else if(C.stringUid&&!C.uid){const fe=yield l2(C.stringUid,C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,g.store);oe.debug("getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),Ln("debug",g,"getUserAccount Success ".concat(C.stringUid," => ").concat(fe)),C.uid=fe,j=yield U4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,!0,g.store)}else j=yield U4(C,g._axiosCancelSource.token,g._config.httpRetryConfig||Jo,!0,g.store);if(!g._joinAndNotLeaveYet)throw new Pe(Ie.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),g._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(C,g._axiosCancelSource.token),g._configDistribute.on(yv.UPDATE_BITRATE_LIMIT,fe=>{g._p2pChannel.updateBitrateLimit(fe)})},0),g._key=o||n;const $=j.gatewayInfo;g._joinInfo=e(e({},C),{},{cid:$.cid,uid:C.uid?C.uid:$.uid,vid:$.vid,apResponse:$.res,uni_lbs_ip:$.uni_lbs_ip,gatewayAddrs:$.gatewayAddrs});const ae=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new Pe(Ie.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return b.onSuccess(ae),g._appId=n,g._channelName=C.cname,g._uid=ae,g.store.uid=ae,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(Md()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),oe.info("[".concat(g._clientId,"] Joining channel success: ").concat(i)),pr("info",g,"join",i,"success"),setTimeout(()=>{Bt("USE_NEW_LOG")?BD():oe.startUpload()},5e3),g._performanceRecorder.checkPoint("finishJoin"),g.store.joinEnd(),WT.includes(N=g)||WT.push(N),ae}catch(j){const Q=Array.isArray(j)?j[0]:j;throw oe.error("[".concat(g._clientId,"] join number: ").concat(p,", Joining channel failed, rollback"),Q),pr("error",g,"join",i,Q.toString()),Q.code!==Ie.OPERATION_ABORTED&&g._numberOfJoinCount===p&&(g._gateway.state="DISCONNECTED",g._reset()),b.onError(Q),Q}var N})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new Pe(Ie.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!Bt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===Ie.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Ls.FALLBACK);throw n}).then(n=>{if(n)return n;if(oe.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Pe(Ie.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const i=Bt("PROXY_SERVER_TYPE3");if(Array.isArray(i))if(this._joinInfo.apUrl){const o=new y4(this._joinInfo.apUrl).host.split("."),c=o.slice(o.length-2).join(".");i.forEach(h=>{this._joinInfo&&h.includes(c)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=i[0])}else this._joinInfo.proxyServer=i[0];else this._joinInfo.proxyServer=i;return oe.setProxyServer(this._joinInfo.proxyServer),Kt.setProxyServer(this._joinInfo.proxyServer),wy(this._joinInfo.proxyServer),Kt.reportApiInvoke(this._sessionId,{name:hr.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:sr.TRACER}).onSuccess(),this.emit(Er.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(n=>n)}leave(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.LEAVE,options:[],tag:sr.TRACER});oe.info("[".concat(n._clientId,"] Leaving channel")),pr("info",n,"leave"),window.removeEventListener(Md()?"beforeunload":"pagehide",n._handleBeforeUnload),n._reset(),function(c){const h=WT.indexOf(c);-1!==h&&WT.splice(h,1)}(n);const o=yield n._leaveMutex.lock();if("DISCONNECTED"===n.connectionState)return oe.info("[".concat(n._clientId,"] Leaving channel repeated, success")),o(),i.onSuccess();yield n._gateway.leave("CONNECTED"!==n.connectionState),oe.info("[".concat(n._clientId,"] Leaving channel success")),pr("info",n,"leave",void 0,"success"),n._joinAndNotLeaveYet=!1,n.store.resetJoinChannelServiceRecords(),o(),i.onSuccess()})()}publish(n){var i=arguments,o=this;return L(function*(){let c=!(i.length>1&&void 0!==i[1])||i[1];Array.isArray(n)||(n=[n]);const h=Kt.reportApiInvoke(o._sessionId,{name:hr.PUBLISH,options:n.map(p=>p?Object(p).toString():"null"),tag:sr.TRACER});if(0===n.length){const p=new Pe(Ie.INVALID_PARAMS,"track list is empty");return h.onError(p),p.throw()}if("audience"===o._gateway.role){const p=new Pe(Ie.INVALID_OPERATION,"audience can not publish stream");return h.onError(p),p.throw()}for(const p of n){if(!(p instanceof Qx)){const v=new Pe(Ie.INVALID_PARAMS,"parameter is not local track");return h.onError(v),v.throw()}if(!p._enabled&&c){const v=new Pe(Ie.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(p.getTrackId()));return h.onError(v),v.throw()}}oe.info("[".concat(o._clientId,"] Publishing tracks, id ").concat(n.map(p=>"".concat(p.getTrackId()," ")))),pr("info",o,"publish",n.map(p=>"".concat(p.getTrackId()))),yield o._configDistribute.awaitConfigDistributeComplete(),c&&n.forEach(p=>{const v=o._configDistribute.getBitrateLimit();p instanceof Os&&v&&p.setBitrateLimit(v.uplink)});const g=yield o._publishMutex.lock();try{yield o._publishHighStream(n),h.onSuccess(n.map(p=>p.trackMediaType+":"+p.getTrackLabel()).toString()),oe.info("[".concat(o._clientId,"] Publish success, id ").concat(n.map(p=>"".concat(p.getTrackId()," ")))),pr("info",o,"publish",n.map(p=>"".concat(p.getTrackId())),"success")}catch(p){throw h.onError(p),oe.error("[".concat(o._clientId,"] publish error"),p.toString()),pr("error",o,"publish",void 0,p.toString()),p}finally{g()}})()}unpublish(n){var i=this;return L(function*(){if(!i._joinInfo||void 0===i._uid)throw new Pe(Ie.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=i._p2pChannel.getAllTracks(!0);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UNPUBLISH,options:n.map(h=>h.getTrackId()),tag:sr.TRACER});oe.info("[".concat(i._clientId,"] Unpublish tracks, tracks ").concat(n.map(h=>"".concat(h.getTrackId()," "))," ")),pr("info",i,"unpublish",n.map(h=>"".concat(h.getTrackId())));const c=yield i._publishMutex.lock();try{const h=yield i._p2pChannel.unpublish(n);h&&(yield i._gateway.unpublish(h,i._uid)),oe.info("[".concat(i._clientId,"] Unpublish success,tracks ").concat(n.map(g=>"".concat(g.getTrackId())))),pr("info",i,"unpublish",n.map(g=>"".concat(g.getTrackId())),"success"),o.onSuccess()}catch(h){throw o.onError(h),oe.error("[".concat(i._clientId,"] unpublish error"),h.toString()),pr("error",i,"unpublish",void 0,h.toString()),h}finally{c&&c()}})()}subscribe(n,i){var o=this;return L(function*(){return o._subscribe(n,i)})()}_subscribe(n,i,o){var c=this;return L(function*(){fa(i,"mediaType",["audio","video"]);const h=Kt.reportApiInvoke(c._sessionId,{name:hr.SUBSCRIBE,options:[n.uid,i],tag:sr.TRACER});if(!c._joinInfo){const b=new Pe(Ie.INVALID_OPERATION,"Can't subscribe stream, not joined");throw h.onError(b),b}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const b=new Pe(Ie.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw h.onError(b),b}if(!c._users.find(b=>b===n)){const b=new Pe(Ie.INVALID_REMOTE_USER,"user is not in the channel");throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),pr("error",c,"subscribe",n.uid,"this user is not in the channel"),h.onError(b),b}if(!n.hasAudio&&!n.hasVideo){const b=new Pe(Ie.INVALID_REMOTE_USER,"user is not published");throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),pr("error",c,"subscribe",n.uid,"this user is not published"),h.onError(b),b}if(!(o||("audio"!==i||n.hasAudio&&void 0!==n._audioSSRC)&&("video"!==i||n.hasVideo&&void 0!==n._videoSSRC))){const b=new Pe(Ie.REMOTE_USER_IS_NOT_PUBLISHED);throw oe.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(i,", remote track is not published")),pr("error",c,"subscribe",n.uid,"mediaType ".concat(i,", remote track is not published")),h.onError(b),b}const g="audio"===i?n._audioSSRC:n._videoSSRC,p="audio"===i?n._audioOrtc:n._videoOrtc,v="video"===i?n._rtxSsrcId:void 0,_={stream_type:"audio"===i?Zr.AUDIO:Zr.VIDEO,ssrcId:g},y=yield c._subscribeMutex.lock();oe.info("[".concat(c._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(i)),pr("info",c,"subscribe",{uid:n.uid,mediaType:i});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(n,i))yield c._p2pChannel.unmuteRemote(n,i);else try{pl.markSubscribeStart(c.store.clientId,g),c.store.subscribe(n.uid,i,performance.now()),yield c._p2pChannel.subscribe(n,i,g,v,p);try{yield c._gateway.subscribe(n.uid,_,!0)}catch(C){throw yield c._p2pChannel.unsubscribe(n,i),C}c.store.subscribe(n.uid,i,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,n,i)}catch(C){throw c._p2pChannel.reportSubscribeEvent(!1,C?.code,n,i),C}oe.info("[".concat(c._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(i)),pr("info",c,"subscribe",{uid:n.uid,mediaType:i},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(n.uid,c._defaultStreamFallbackType).catch(C=>{oe.warning("[".concat(c._clientId,"] auto set fallback failed"),C),Ln("warning",c,"auto set fallback failed, ".concat(C.toString()))});const b="audio"===i?n._audioTrack:n._videoTrack;if(!b){const C=new Pe(Ie.UNEXPECTED_ERROR,"can not find remote track in user object");return h.onError(C),C.throw()}return h.onSuccess(b.getTrackId()),b}catch(b){throw h.onError(b),oe.error("[".concat(c._clientId,"] subscribe user ").concat(n.uid," error"),b),pr("error",c,"subscribe",{uid:n.uid,mediaType:i},b.toString()),b}finally{y()}})()}massSubscribe(n){var i=this;return L(function*(){OS(n,"subscribeList");const o=Kt.reportApiInvoke(i._sessionId,{name:hr.MASS_SUBSCRIBE,options:n.map(y=>{let{user:b,mediaType:C}=y;return[b?.uid,C]}),tag:sr.TRACER});if(!i._joinInfo){const y=new Pe(Ie.INVALID_OPERATION,"Can't subscribe stream, not joined");throw o.onError(y),y}if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState){const y=new Pe(Ie.INVALID_OPERATION,"Can't subscribe stream in ".concat(i.connectionState," state"));throw o.onError(y),y}const c=performance.now(),h=new Map,g=yield i._subscribeMutex.lock();oe.info("[".concat(i._clientId,"]start massSubscribe user ").concat(n.map(y=>{let{user:b,mediaType:C}=y;return"user: ".concat(b?.uid,", mediaType: ").concat(C)}).join("; "))),pr("info",i,"massSubscribe",n);const p=(n=[...n]).map(y=>{let{user:b,mediaType:C}=y;return{user:b,mediaType:C}}),v=yield i._p2pChannel.globalLock();try{var _;for(let b=n.length-1;b>=0;b--){const C=n[b],{user:R,mediaType:N}=C;if(fa(N,"mediaType",["audio","video"]),!R){const $=new Pe(Ie.INVALID_PARAMS,"user property does not exist in subscribeList item");throw oe.error("[".concat(i._clientId,"] user property does not exist in subscribeList item")),o.onError($),$}if(!i._users.find($=>$===R)){const $=new Pe(Ie.INVALID_REMOTE_USER,"user is not in the channel");oe.error("[".concat(i._clientId,"] can not massSubscribe ").concat(R.uid,", this user is not in the channel")),pr("error",i,"massSubscribe",R.uid,"this user is not in the channel"),p[b].error=$,n.splice(b,1);continue}if("audio"===N&&(!R.hasAudio||void 0===R._audioSSRC)||"video"===N&&(!R.hasVideo||void 0===R._videoSSRC)){const $=new Pe(Ie.REMOTE_USER_IS_NOT_PUBLISHED);oe.error("[".concat(i._clientId,"] can not subscribe ").concat(R.uid," with mediaType ").concat(N,", remote user is not published")),pr("error",i,"subscribe",R.uid,"mediaType ".concat(N,", remote user is not published")),p[b].error=$,n.splice(b,1);continue}const j=Po.Video|Po.LwoVideo,Q=h.get(R);if(Q){if("video"===N?Q&j:Q&Po.Audio){n.splice(b,1),oe.warning("repeat massSubscribe user:".concat(R.uid,", mediaType:").concat(N," twice"));continue}h.set(R,Q|("video"===N?j:Po.Audio))}else h.set(R,"video"===N?j:Po.Audio)}for(let b=n.length-1;b>=0;b--){const C=n[b],{user:R,mediaType:N}=C,j=Po.Video|Po.LwoVideo;if(i._p2pChannel.hasRemoteMedia(R,N)){yield i._p2pChannel.unmuteRemoteNoLock(R,N);const Q=h.get(R);h.set(R,"video"===N?Q^j:Q^Po.Audio),n.splice(b,1)}}i.store.massSubscribe(n.map(b=>({userId:b.user.uid,type:b.mediaType})),c);const y=Oa(_=Array.from(h.entries())).call(_,(b,C)=>{let[R,N]=C;if(0===N)return b;const j={stream_id:R.uid,stream_type:N};return N&Po.Audio&&(j.audio_ssrc=R._audioSSRC),N&Po.Video&&(j.video_ssrc=R._videoSSRC),b.push(j),b},[]);try{n.length>0&&(yield i._p2pChannel.massSubscribeNoLock(n.map(C=>{let{user:R,mediaType:N}=C;return{user:R,mediaType:N,ssrcId:N===Zr.VIDEO?R._videoSSRC:R._audioSSRC,rtxSsrcId:R._rtxSsrcId}})));const b=new Map;if(y.length>0&&((yield i._gateway.subscribeAll(y,!0))?.users||[]).forEach(R=>{let{stream_id:N,video_error_code:j,audio_error_code:Q,error_code:$}=R;(j||Q||$)&&b.set(N,{video_error_code:j,audio_error_code:Q,error_code:$})}),Array.from(b.entries()).length>0){const C=Array.from(b.entries()).map(R=>{let N,[j,Q]=R;return Q.error_code||Q.video_error_code&&Q.audio_error_code?N=void 0:Q.video_error_code?N=Zr.VIDEO:Q.audio_error_code&&(N=Zr.AUDIO),{user:i.remoteUsers.find($=>$.uid===j),mediaType:N}});yield i._p2pChannel.massUnsubscribeNoLock(C)}for(const C of p){const R=b.get(C.user.uid);if(R){const N=R.error_code||"audio"===C.mediaType&&R.audio_error_code||"video"===C.mediaType&&R.video_error_code;if(N){const j=NL(N);oe.error("user:".concat(C.user.uid," mediaType:").concat(C.mediaType," has massSubscribe error ").concat(j.desc)),C.error=new Pe(Ie.SUBSCRIBE_FAILED,"code ".concat(N,": ").concat(j.desc))}}C.error||(C.track="video"===C.mediaType?C.user.videoTrack:C.user.audioTrack)}return i.store.massSubscribe(p.filter(C=>!C.error).map(C=>({userId:C.user.uid,type:C.mediaType})),void 0,performance.now()),p.forEach(C=>{var R;Kt.subscribe(i.store.sessionId,{succ:!!C.error,ec:(null===(R=C.error)||void 0===R?void 0:R.code)||null,video:C.mediaType===Zr.VIDEO,audio:C.mediaType===Zr.AUDIO,peerid:C.user.uid,subscribeRequestid:C.mediaType===Zr.VIDEO?C.user._videoSSRC:C.user._audioSSRC,p2pid:i.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),o.onSuccess(),oe.info("[".concat(i._clientId,"] massSubscribe success ").concat(n.map(C=>{let{user:R,mediaType:N}=C;return"user: ".concat(R?.uid,", mediaType: ").concat(N)}).join("; "))),pr("info",i,"massSubscribe",n,"success"),p}catch(b){throw yield i._p2pChannel.massUnsubscribeNoLock(n),o.onError(b),b}}finally{v(),g()}})()}unsubscribe(n,i){var o=this;return L(function*(){if(i&&fa(i,"mediaType",["audio","video"]),!o._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=Kt.reportApiInvoke(o._sessionId,{name:hr.UNSUBSCRIBE,options:[n.uid,i],tag:sr.TRACER});if(!o._users.find(h=>h===n)){const h=new Pe(Ie.INVALID_REMOTE_USER,"user is not in the channel");throw oe.error("[".concat(o._clientId,"] can not subscribe ").concat(n.uid,", user is not in the channel")),pr("error",o,"unsubscribe",{uid:n.uid,mediaType:i},"user is not in the channel"),c.onError(h),h}oe.info("[".concat(o._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(i)),pr("info",o,"unsubscribe",{uid:n.uid,mediaType:i});try{const h=yield o._p2pChannel.unsubscribe(n,i);h&&(yield o._gateway.unsubscribe(h,n.uid)),oe.info("[".concat(o._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(i)),pr("info",o,"unsubscribe",{uid:n.uid,mediaType:i},"success"),c.onSuccess()}catch(h){if(h.code===Ie.DISCONNECT_P2P)return oe.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw oe.error("[".concat(o._clientId,"] unsubscribe user ").concat(n.uid," error"),h.toString()),pr("error",o,"unsubscribe",{uid:n.uid,mediaType:i},h.toString()),c.onError(h),h}})()}massUnsubscribe(n){var i=this;return L(function*(){OS(n,"unsubscribeList");const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UNSUBSCRIBE,options:n.map(h=>{let{user:g,mediaType:p}=h;return{uid:g?.uid,mediaType:p}}),tag:sr.TRACER});if(!i._joinInfo){const h=new Pe(Ie.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw o.onError(h),h}oe.info("[".concat(i._clientId,"] start massUnsubscribe ").concat(n.map(h=>{let{user:g,mediaType:p}=h;return"user: ".concat(g?.uid,", mediaType: ").concat(p,";")}).join())),pr("info",i,"massUnsubscribe",n),n=[...n];const c=new Map;for(let h=n.length-1;h>=0;h--){const{user:g,mediaType:p}=n[h];if(!g){const _=new Pe(Ie.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw oe.error("[".concat(i._clientId,"] user property does not exist in unsubscribeList item")),o.onError(_),_}if(fa(p,"mediaType",["video","audio",void 0]),!i._users.find(_=>_===g)){oe.warning("[".concat(i._clientId,"] can not subscribe ").concat(g.uid,", user is not in the channel")),pr("error",i,"unsubscribe",{uid:g.uid,mediaType:p},"user is not in the channel"),n.splice(h,1);continue}const v=Po.Video|Po.LwoVideo;if(c.has(g)){const _=c.get(g);let y;switch(p){case"video":y=_&v;break;case"audio":y=_&Po.Audio;break;default:y=_&(Po.Audio|v)}if(y){oe.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(p," twice.")),n.splice(h,1);continue}p?"audio"===p?c.set(g,_|Po.Audio):"video"===p&&c.set(g,_|v):c.set(g,_|Po.Audio|v)}else p?"audio"===p?c.set(g,Po.Audio):"video"===p&&c.set(g,v):c.set(g,Po.Audio|v)}try{const h=yield i._p2pChannel.massUnsubscribe(n);h&&(yield i._gateway.massUnsubscribe(h)),oe.info("[".concat(i._clientId,"] massUnsubscribe success ").concat(n.map(g=>{let{user:p,mediaType:v}=g;return"user: ".concat(p?.uid,", mediaType: ").concat(v,";")}).join())),pr("info",i,"massUnsubscribe",n,"success"),o.onSuccess()}catch(h){if(h.code===Ie.DISCONNECT_P2P)return oe.warning("disconnecting p2p, abort unsubscribe request."),void o.onSuccess();throw oe.error("[".concat(i._clientId,"] massUnsubscribe error"),h.toString()),pr("error",i,"massUnsubscribe",n,h.toString()),o.onError(h),h}})()}setLowStreamParameter(n){!function(c){if(!c)throw new Pe(Ie.INVALID_PARAMS);uo(c.width)||Hf(c.width,"streamParameter.width"),uo(c.height)||Hf(c.height,"streamParameter.height"),uo(c.framerate)||Hf(c.framerate,"streamParameter.framerate"),uo(c.bitrate)||Wr(c.bitrate,"streamParameter.bitrate")}(n);const i=Kt.reportApiInvoke(this._sessionId,{name:hr.SET_LOW_STREAM_PARAMETER,options:[n],tag:sr.TRACER});(!n.width&&n.height||n.width&&!n.height)&&(oe.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Ln("warning",this,"The width and height parameters take effect only when both are set")),oe.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n)),pr("info",this,"setLowStreamParameter",n);const o=this._configDistribute.getLowStreamConfigDistribute();o&&o.bitrate&&n.bitrate&&o.bitrate<n.bitrate&&(n.bitrate=o.bitrate),this._lowStreamParameter=n,i.onSuccess()}enableDualStream(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.ENABLE_DUAL_STREAM,options:[],tag:sr.TRACER});if(!Rc().supportDualStream){Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const o=new Pe(Ie.NOT_SUPPORTED,"Your browser is not support dual stream");throw i.onError(o),o}if(n._isDualStreamEnabled){const o=new Pe(Ie.INVALID_OPERATION,"Dual stream is already enabled");throw i.onError(o),o}if(n._p2pChannel.canPublishLowStream())try{yield n._publishLowStream()}catch(o){throw Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),i.onError(o),o}n._isDualStreamEnabled=!0,Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),oe.info("[".concat(n._clientId,"] enable dual stream")),pr("info",n,"enableDualStream"),i.onSuccess()})()}disableDualStream(){var n=this;return L(function*(){if(!n._isDualStreamEnabled)return;if(!n._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const i=Kt.reportApiInvoke(n._sessionId,{name:hr.DISABLE_DUAL_STREAM,options:[],tag:sr.TRACER});if(n._p2pChannel.getLocalMedia(Dn.LocalVideoLowTrack))try{const o=yield n._p2pChannel.unpublishLowStream();o&&(yield n._gateway.unpublish(o,n._joinInfo.stringUid||n._joinInfo.uid))}catch(o){throw Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),i.onError(o),o}n._isDualStreamEnabled=!1,Kt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),oe.info("[".concat(n._clientId,"] disable dual stream")),pr("info",n,"disableDualStream"),i.onSuccess()})()}setClientRole(n,i){var o=this;return L(function*(){var h;fa(h=n,"role",["audience","host"]),i&&E6(i);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_CLIENT_ROLE,options:[n,i],tag:sr.TRACER});if("rtc"===o._mode){oe.warning("[".concat(o._clientId,"]rtc mode can not use setClientRole")),pr("warning",o,"setClientRole",n,"rtc mode can not use setClientRole");const h=new Pe(Ie.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(h),h.throw()}if(i&&i.level&&"host"===n){const h=new Pe(Ie.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(h),h.throw()}try{if("audience"===n&&o._p2pChannel.hasLocalMedia()){const h=new Pe(Ie.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(h),h.throw()}yield o._gateway.setClientRole(n,i),oe.info("[".concat(o._clientId,"] set client role to ").concat(n,", level: ").concat(i&&i.level)),pr("info",o,"setClientRole",{role:n,level:i&&i.level}),c.onSuccess()}catch(h){throw c.onError(h),h}})()}setProxyServer(n,i){if(Ic(n,"proxyServer"),!i){if("DISCONNECTED"!==this.connectionState)throw new Pe(Ie.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Pe(Ie.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Kt.setProxyServer(this._proxyServer),oe.setProxyServer(this._proxyServer),wy(this._proxyServer),oe.info("[".concat(this._clientId,"] Set proxy server ").concat(i?"by initialize call":""," success.")),pr("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(n,i){if(Array.isArray(n)||(n=[n]),!i){if("DISCONNECTED"!==this.connectionState)throw new Pe(Ie.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Pe(Ie.INVALID_OPERATION,"You have already set the proxy")}if(GM(n))return this._turnServer={servers:n,mode:"original-manual"},oe.info("[".concat(this._clientId,"] Set original turnserver ").concat(i?"by initialize call":""," success: ").concat(n.map(o=>o.urls).join(","),".")),void pr("info",this,"setOriginalTurnServer",[...arguments],"success");n.forEach(o=>y6(o)),this._turnServer={servers:n,mode:"manual"},oe.info("[".concat(this._clientId,"] Set turnserver ").concat(i?"by initialize call":""," success.")),pr("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.START_PROXY_SERVER,options:[],tag:sr.TRACER});if("DISCONNECTED"!==this.connectionState){const h=new Pe(Ie.INVALID_OPERATION,"Start proxy server before join channel");throw i.onError(h),h}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const h=new Pe(Ie.INVALID_OPERATION,"You have already set the proxy");throw i.onError(h),h}const o=[1,2,3,4,5];let c;switch(void 0===n&&(n=1),n){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const h=new Pe(Ie.INVALID_PARAMS,"proxy server mode must be ".concat(o.join("|")));throw i.onError(h),h}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,oe.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),pr("info",this,"startProxyServer",this._cloudProxyServerMode),i.onSuccess()}stopProxyServer(){const n=Kt.reportApiInvoke(this._sessionId,{name:hr.STOP_PROXY_SERVER,options:[],tag:sr.TRACER});if("DISCONNECTED"!==this.connectionState)throw new Pe(Ie.INVALID_OPERATION,"Stop proxy server after leave channel");Kt.setProxyServer(),oe.setProxyServer(),wy(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",oe.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),pr("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},n.onSuccess()}setLocalAccessPoints(n,i){if(OS(n,"serverList"),Ic(i,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Pe(Ie.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(c=>o.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(i):c),this._useLocalAccessPoint=!0,ac("WEBCS_DOMAIN",n),ac("WEBCS_DOMAIN_BACKUP_LIST",n),ac("GATEWAY_DOMAINS",[i]),ac("EVENT_REPORT_DOMAIN",n[0]),ac("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),ac("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),oe.info("set local access point success"),pr("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(n){var i=this;return L(function*(){if(fa(n,"streamType",[0,1]),i._remoteDefaultVideoStreamType=n,i._joinInfo)try{yield i._gateway.setDefaultRemoteVideoStreamType(n),i._joinInfo.defaultVideoStream=i._remoteDefaultVideoStreamType}catch(o){throw oe.error("[".concat(i._clientId,"] set default remote video stream type error"),o.toString()),o}else oe.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(n))})()}setRemoteVideoStreamType(n,i){var o=this;return L(function*(){fa(i,"streamType",[0,1]);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_REMOTE_VIDEO_STREAM_TYPE,options:[n,i],tag:sr.TRACER});try{yield o._gateway.setRemoteVideoStreamType(n,i),setTimeout(()=>{const h=o._users.find(g=>g.uid===n);h&&h.videoTrack&&h.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(h){throw c.onError(h),oe.error("[".concat(o._clientId,"] set remote video stream type error"),h.toString()),pr("error",o,"setRemoteVideoStreamType",void 0,h.toString()),h}oe.info("[".concat(o._clientId,"] set remote ").concat(n," video stream type to ").concat(i)),pr("info",o,"setRemoteVideoStreamType",{uid:n,streamType:i}),o._remoteStreamTypeCacheMap.set(n,i),c.onSuccess()})()}setStreamFallbackOption(n,i){var o=this;return L(function*(){fa(i,"fallbackType",[0,1,2]);const c=Kt.reportApiInvoke(o._sessionId,{name:hr.SET_STREAM_FALLBACK_OPTION,options:["too long to show",i],tag:sr.TRACER});try{yield o._gateway.setStreamFallbackOption(n,i)}catch(h){throw c.onError(h),oe.error("[".concat(o._clientId,"] set stream fallback option"),h.toString()),pr("error",o,"setStreamFallbackOption",void 0,h.toString()),h}oe.info("[".concat(o._clientId,"] set remote ").concat(n," stream fallback type to ").concat(i)),pr("info",o,"setStreamFallbackOption",{uid:n,fallbackType:i}),o._streamFallbackTypeCacheMap.set(n,i),c.onSuccess()})()}setEncryptionConfig(n,i,o){if(fa(n,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),Ic(i,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!o||!(o instanceof Uint8Array&&32===o.length))throw new Pe(Ie.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new Pe(Ie.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(i)||(oe.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),Ln("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=n,this._encryptionSecret=i,o&&(this._encryptionSalt=A1(o))}renewToken(n){var i=this;return L(function*(){Ic(n,"token",1,2047);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.RENEW_TOKEN,options:[n],tag:sr.TRACER});if(!i._key||!i._joinInfo){const g=new Pe(Ie.INVALID_OPERATION,"renewToken should not be called before user join");return o.onError(g),g.throw()}const c=i._key;i._key=n,i._joinInfo&&(i._joinInfo.token=n);const h=yield i._renewTokenMutex.lock();try{if(Bt("USE_NEW_TOKEN")){oe.debug("start renew token with ticket from unilbs"),pr("debug",i,"renewToken","unilbs");const g=yield function FQ(n,i,o){return j4.apply(this,arguments)}(i._joinInfo,i._axiosCancelSource.token,i._config.httpRetryConfig||Jo);oe.debug("[".concat(i._clientId,"] get ticket from unilbs success")),pr("debug",i,"renewToken","unilbs","success"),yield i._gateway.renewToken({token:n,ticket:g})}else oe.debug("start renew token without ticket"),pr("debug",i,"renewToken"),yield i._gateway.renewToken({token:n});oe.debug("[".concat(i._clientId,"] renewToken success")),pr("debug",i,"renewToken",void 0,"success"),o.onSuccess()}catch(g){throw i._key=c,i._joinInfo.token=c,o.onError(g),oe.error("[".concat(i._clientId,"] renewToken failed"),g.toString()),pr("error",i,"renewToken",void 0,g.toString()),g}finally{h()}})()}enableAudioVolumeIndicator(){const n=Kt.reportApiInvoke(this._sessionId,{name:hr.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:sr.TRACER});if(this._audioVolumeIndicationInterval)return oe.warning("you have already enabled audio volume indicator!"),pr("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),n.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const i=this._p2pChannel.getAudioLevels();this.emit(Er.VOLUME_INDICATOR,i)},Bt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),n.onSuccess()}getRTCStats(){const n=this._statsCollector.getRTCStats(),i=this._gateway.getInChannelInfo();return n.Duration=Math.round(i.duration/1e3),n}startLiveStreaming(n,i){const o=Kt.reportApiInvoke(this._sessionId,{name:hr.START_LIVE_STREAMING,options:[n,i],tag:sr.TRACER});if(!i){if("h264"!==this._codec){const h=new Pe(Ie.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return o.onError(h),jn.reject(h)}if(!this._p2pChannel.hasLocalMedia()){const h=new Pe(Ie.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return o.onError(h),jn.reject(h)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n)){const h=new Pe(Ie.LIVE_STREAMING_TASK_CONFLICT);return o.onError(h),jn.reject(h)}const c=i?is.TRANSCODE:is.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(n,c).then(()=>o.onSuccess()).catch(h=>{throw o.onError(h),h})}setLiveTranscoding(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.SET_LIVE_TRANSCODING,options:[n],tag:sr.TRACER});return this._createLiveStreamingClient(is.TRANSCODE).setTranscodingConfig(n).then(()=>i.onSuccess()).catch(o=>{throw i.onError(o),o})}stopLiveStreaming(n){const i=Kt.reportApiInvoke(this._sessionId,{name:hr.STOP_LIVE_STREAMING,options:[n],tag:sr.TRACER}),o=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(n));if(!o.length){const c=new Pe(Ie.INVALID_PARAMS,"can not find live streaming url to stop");return i.onError(c),jn.reject(c)}return jn.all(o.map(c=>c&&c.stopLiveStreamingTask(n))).then(()=>i.onSuccess()).catch(c=>{throw i.onError(c),c})}addInjectStreamUrl(n,i){var o=this;return L(function*(){const c=Kt.reportApiInvoke(o._sessionId,{name:hr.ADD_INJECT_STREAM_URL,options:[n,i],tag:sr.TRACER});try{if(!o._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const h=o._createLiveStreamingClient(is.INJECT);h.setInjectStreamConfig(i,0),yield h.startLiveStreamingTask(n,is.INJECT)}catch(h){throw c.onError(h),h}c.onSuccess()})()}removeInjectStreamUrl(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.REMOVE_INJECT_STREAM_URL,options:[],tag:sr.TRACER});try{var o;const c=n._createLiveStreamingClient(is.INJECT),h=Array.from(Ng(o=c.streamingTasks).call(o)).find(g=>g.mode===is.INJECT);if(!n._joinInfo||!h)throw new Pe(Ie.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(h.url)}catch(c){throw i.onError(c),c}i.onSuccess()})()}startChannelMediaRelay(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(i._sessionId,{name:hr.START_CHANNEL_MEDIA_RELAY,options:[n],tag:sr.TRACER});try{W4(n),yield i._createChannelMediaRelayClient().startChannelMediaRelay(n)}catch(c){return o.onError(c),c.throw()}o.onSuccess()})()}updateChannelMediaRelay(n){var i=this;return L(function*(){const o=Kt.reportApiInvoke(i._sessionId,{name:hr.UPDATE_CHANNEL_MEDIA_RELAY,options:[n],tag:sr.TRACER});try{W4(n),yield i._createChannelMediaRelayClient().updateChannelMediaRelay(n)}catch(c){return o.onError(c),c.throw()}o.onSuccess()})()}stopChannelMediaRelay(){var n=this;return L(function*(){const i=Kt.reportApiInvoke(n._sessionId,{name:hr.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:sr.TRACER});try{yield n._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(o){return i.onError(o),o.throw()}i.onSuccess()})()}sendStreamMessage(n){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof n&&(n=(new TextEncoder).encode(n)),new Blob([n]).size>1024)throw new Pe(Ie.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(di.DATA_STREAM,{payload:A1(n)},!i)}sendMetadata(n){if(!this._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new Pe(Ie.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(di.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:A1(n)})}sendCustomReportMessage(n){var i=this;return L(function*(){Array.isArray(n)||(n=[n]),n.forEach(XU);const o=Kt.reportApiInvoke(i._sessionId,{name:hr.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(n)],tag:sr.TRACER});if(!i._joinInfo){const c=new Pe(Ie.INVALID_OPERATION,"can not send custom report, not joined");return o.onError(c),c.throw()}yield Kt.sendCustomReportMessage(i._joinInfo.sid,n),o.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(n,i){var o=this;return L(function*(){fa(i.spatialLayer,"spatialLayer",[0,1,2,3]),fa(i.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield o._gateway.pickSVCLayer(n,i)}catch(c){throw oe.error("[".concat(o._clientId,"] pick SVC layer failed"),c.toString()),Yt("error",o,"pickSVCLayer",i,c.toString()),c}})()}_reset(){if(oe.debug("[".concat(this._clientId,"] reset client")),Yt("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=sl.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new au("client-publish"),this._subscribeMutex=new au("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(n,i){const o=n||D9();oe.debug(n?"[".concat(this._clientId,"] new Session ").concat(o):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(o)),Yt("debug",this,"_startSession",{newSid:o,sid:this._sessionId}),this._sessionId=o,this.store.sessionId=o,i?Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:i.channel,appid:i.appId,mode:this._mode}):this._joinInfo?Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Kt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}_publishHighStream(n){var i=this;return L(function*(){if(!i._joinInfo||void 0===i._uid)throw new Pe(Ie.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==i.connectionState&&"RECONNECTING"!==i.connectionState)throw new Pe(Ie.INVALID_OPERATION,"can not publish stream in ".concat(i.connectionState," state"));if("auto"===i._turnServer.mode&&Bt("FORCE_TURN")&&!Bt("TURN_ENABLE_TCP")&&!Bt("TURN_ENABLE_UDP"))throw new Pe(Ie.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");oe.debug("[".concat(i._clientId,"] publish high stream")),Yt("debug",i,"_publishHighStream");try{const c=yield i._p2pChannel.publish(n,i._isDualStreamEnabled,i._lowStreamParameter),h=(yield c.next()).value;if(h){var o;let g;try{g=yield i._gateway.publish(i._uid,h,!0)}catch(p){if(p.code!==Ie.DISCONNECT_P2P)throw c.throw(p),p}yield c.next((null===(o=g)||void 0===o?void 0:o.ortc)||[])}i._p2pChannel.reportPublishEvent(!0,null);for(const g of n)g instanceof Os&&g._encoderConfig&&i._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield i._p2pChannel.muteLocalTrack(g))}catch(c){if(i._p2pChannel.reportPublishEvent(!1,c?.code,n),c?.code===Ie.WS_ABORT)return;throw c}})()}_publishLowStream(){var n=this;return L(function*(){if(!n._joinInfo||void 0===n._uid)throw new Pe(Ie.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState)throw new Pe(Ie.INVALID_OPERATION,"can not publish stream in ".concat(n.connectionState," state"));oe.debug("[".concat(n._clientId,"] publish low stream")),Yt("debug",n,"_publishLowStream");const i=n._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&(n._lowStreamParameter||(n._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),n._lowStreamParameter&&n._lowStreamParameter.bitrate&&i.bitrate<n._lowStreamParameter.bitrate&&(n._lowStreamParameter.bitrate=i.bitrate));try{const c=yield n._p2pChannel.publishLowStream(n._lowStreamParameter),h=(yield c.next()).value;if(h){var o;let g;try{g=yield n._gateway.publish(n._uid,h,!0)}catch(p){if(p.code!==Ie.DISCONNECT_P2P)throw c.throw(p),p}c.next((null===(o=g)||void 0===o?void 0:o.ortc)||[]),n._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(n._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===Ie.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new Pe(Ie.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const i=()=>new HQ(this._joinInfo,this._config.websocketRetryConfig||Jo,this._config.httpRetryConfig||Jo),o=c=>{c.onLiveStreamError=(h,g)=>{Kt.reportApiInvoke(this._sessionId,{name:hr.ON_LIVE_STREAM_ERROR,options:[h,g],tag:sr.TRACER}).onSuccess(),this.emit(Er.LIVE_STREAMING_ERROR,h,g)},c.onLiveStreamWarning=(h,g)=>{Kt.reportApiInvoke(this._sessionId,{name:hr.ON_LIVE_STREAM_WARNING,options:[h,g],tag:sr.TRACER}).onSuccess(),this.emit(Er.LIVE_STREAMING_WARNING,h,g)},c.on(Wf.REQUEST_WORKER_MANAGER_LIST,(h,g,p)=>{if(!this._joinInfo)return p(new Pe(Ie.INVALID_OPERATION,"can not find join info to get worker manager"));LQ(h,this._joinInfo,this._axiosCancelSource.token,Jo).then(g).catch(p)})};switch(n){case is.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=i(),o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case is.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=i(),o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case is.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=i(),this._injectStreamingClient.on(Wf.REQUEST_WORKER_MANAGER_LIST,(c,h,g)=>{if(!this._joinInfo)return g(new Pe(Ie.INVALID_OPERATION,"can not find join info to get worker manager"));LQ(c,this._joinInfo,this._axiosCancelSource.token,Jo).then(h).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,h,g)=>{this.emit(Er.INJECT_STREAM_STATUS,c,h,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new p2(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Jo,this._config.httpRetryConfig||Jo),this._channelMediaRelayClient.on("state",n=>{n===Fa.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Er.CHANNEL_MEDIA_RELAY_STATE,n)}),this._channelMediaRelayClient.on("event",n=>{this.emit(Er.CHANNEL_MEDIA_RELAY_EVENT,n)})),this._channelMediaRelayClient):new Pe(Ie.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var n=this;this._gateway.on(ms.DISCONNECT_P2P,L(function*(){yield n._p2pChannel.disconnectForReconnect()})),this._gateway.on(ms.CONNECTION_STATE_CHANGE,(i,o,c)=>{var h;if(c===Ls.FALLBACK)return;const g=()=>{this.emit(Er.CONNECTION_STATE_CHANGE,i,o,c)};if(Kt.reportApiInvoke(this._sessionId||(null===(h=this._gateway.joinInfo)||void 0===h?void 0:h.sid)||null,{name:hr.CONNECTION_STATE_CHANGE,options:[i,o,c],tag:sr.TRACER}).onSuccess(JSON.stringify({cur:i,prev:o,reason:c})),oe.info("[".concat(this._clientId,"] connection state change: ").concat(o," -> ").concat(i)),Ao("info",this,"connection-state-change","".concat(o," -> ").concat(i)),"DISCONNECTED"===i)return this._reset(),void g();if("RECONNECTING"===i)this._users.forEach(v=>{v._trust_in_room_=!1,v._trust_audio_enabled_state_=!1,v._trust_video_enabled_state_=!1,v._trust_audio_mute_state_=!1,v._trust_video_mute_state_=!1,v._trust_audio_stream_added_state_=!1,v._trust_video_stream_added_state_=!1,v._audioSSRC=void 0,v._videoSSRC=void 0,v._videoOrtc=void 0,v._audioOrtc=void 0,v._cname=void 0,v._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===i){var p;this._streamFallbackTypeCacheMap.forEach((v,_)=>{this._gateway.setStreamFallbackOption(_,v).catch(y=>{oe.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),y),Ln("warning",this,"auto set stream fallback option failed, ".concat(y.toString()))})}),this._remoteStreamTypeCacheMap.forEach((v,_)=>{this._gateway.setRemoteVideoStreamType(_,v).catch(y=>{oe.warning("[".concat(this._clientId,"] auto set remote stream type failed"),y),Ln("warning",this,"auto set remote stream type failed, ".concat(y.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(p=this._joinInfo)||void 0===p?void 0:p.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{oe.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(v=>{oe.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(v))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(v=>!v._trust_in_room_).forEach(v=>{oe.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(v.uid)),Ln("debug",this,"user offline timeout, emit user offline ".concat(v.uid)),this._handleUserOffline({uid:v.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(v=>{v._trust_audio_mute_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(v.uid)),Ln("debug",this,"auto dispatch audio unmute event ".concat(v.uid)),this._handleMuteStream(v.uid,"audio",!1)),v._trust_video_mute_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(v.uid)),Ln("debug",this,"auto dispatch video unmute event ".concat(v.uid)),this._handleMuteStream(v.uid,"video",!1)),v._trust_audio_enabled_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(v.uid)),Ln("debug",this,"auto dispatch enable local audio ".concat(v.uid)),this._handleSetStreamLocalEnable("audio",v.uid,!0)),v._trust_video_enabled_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(v.uid)),Ln("debug",this,"auto dispatch enable local video ".concat(v.uid)),this._handleSetStreamLocalEnable("video",v.uid,!0)),v._trust_video_stream_added_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(v.uid)),this._handleResetAddStream(v,"video")),v._trust_audio_stream_added_state_||(oe.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(v.uid)),this._handleResetAddStream(v,"audio")),v._video_added_||v._audio_added_||(oe.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(v.uid)),Ln("debug",this,"auto dispatch stream remove ".concat(v.uid)),this._handleRemoveStream({uid:v.uid,uint_id:v._uintid}))}))},1e3)}g()}),this._gateway.on(ms.REQUEST_NEW_GATEWAY_LIST,(i,o)=>{if(!this._joinInfo)return o(new Pe(Ie.UNEXPECTED_ERROR,"can not recover, no join info"));U1(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Jo,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),i(c.gatewayInfo.gatewayAddrs.map(h=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=h.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(h.address)}))}).catch(o)}),this._gateway.on(ms.NETWORK_QUALITY,i=>{"normal"===this._networkQualitySensitivity&&this.emit(Er.NETWORK_QUALITY,i)}),this._gateway.on(ms.STREAM_TYPE_CHANGE,(i,o)=>{this.emit(Er.STREAM_TYPE_CHANGED,i,o),Kt.reportApiInvoke(this._sessionId,{name:hr.STREAM_TYPE_CHANGE,options:[i,o],tag:sr.TRACER}).onSuccess(JSON.stringify({uid:i,streamType:o}))}),this._gateway.on(ms.IS_P2P_DISCONNECTED,i=>{this._p2pChannel.isP2PDisconnected()?i(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?i(!1):i(!0)}),this._gateway.on(ms.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(ms.REQUEST_P2P_CONNECTION_PARAMS,function(){var i=L(function*(o,c,h){try{c(yield n._p2pChannel.startP2PConnection(o))}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this._gateway.on(ms.JOIN_RESPONSE,(i,o,c)=>{const{dtlsParameters:h,iceParameters:g,candidates:p,rtpCapabilities:v,setup:_,cname:y}=K5(i.ortc,o,c);this._p2pChannel.connect(g,h,p,v,_,y)}),this._gateway.signal.on(Bi.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Bi.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Bi.ON_ADD_AUDIO_STREAM,i=>this._handleAddAudioOrVideoStream("audio",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc)),this._gateway.signal.on(Bi.ON_ADD_VIDEO_STREAM,i=>this._handleAddAudioOrVideoStream("video",i.uid,i.ssrcId,i.cname,i.uint_id,i.ortc,i.rtxSsrcId)),this._gateway.signal.on(Bi.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Bi.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Bi.MUTE_AUDIO,i=>(Ao("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!0))),this._gateway.signal.on(Bi.UNMUTE_AUDIO,i=>(Ao("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:i.uid}),this._handleMuteStream(i.uid,"audio",!1))),this._gateway.signal.on(Bi.MUTE_VIDEO,i=>(Ao("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!0))),this._gateway.signal.on(Bi.UNMUTE_VIDEO,i=>(Ao("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:i.uid}),this._handleMuteStream(i.uid,"video",!1))),this._gateway.signal.on(Bi.RECEIVE_METADATA,i=>{const o=Uk(i.metadata);this.emit(Er.RECEIVE_METADATA,i.uid,o)}),this._gateway.signal.on(Bi.ON_DATA_STREAM,i=>{i.seq&&delete i.seq,i.payload=Uk(i.payload),this.emit(Er.STREAM_MESSAGE,i.uid,i.payload),this.onStreamMessage&&this.onStreamMessage(i)}),this._gateway.signal.on(Bi.ON_CRYPT_ERROR,()=>{v1(()=>{oe.warning("[".concat(this._clientId,"] on crypt error")),Ao("warning",this,"crypt_error"),this.emit(Er.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Bi.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Bi.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{oe.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),Ao("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(Er.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Bi.ON_STREAM_FALLBACK_UPDATE,i=>{oe.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(i.stream_id,", attr: ").concat(i.stream_type)),Ao("debug",this,"stream_fallback_update",{peerId:i.stream_id,attr:i.stream_type}),this.emit(Er.STREAM_FALLBACK,i.stream_id,1===i.stream_type?"fallback":"recover")}),this._gateway.signal.on(Bi.ON_PUBLISH_STREAM,i=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:i.proxy})),oe.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(i))),Ao("info",this,"publish_stream",i))}),this._gateway.signal.on(Bi.ENABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!0)}),this._gateway.signal.on(Bi.DISABLE_LOCAL_VIDEO,i=>{this._handleSetStreamLocalEnable("video",i.uid,!1)}),this._gateway.signal.on($r.REQUEST_TIMEOUT,(i,o)=>{if(this._joinInfo)switch(i){case di.PUBLISH:{if(!o)return;const v=o.ortc;if(v){var c,h,g,p;const _=v.some(C=>{let{stream_type:R}=C;return R===os.Audio}),y=v.some(C=>{let{stream_type:R}=C;return R!==os.Audio}),b=v.some(C=>{let{stream_type:R}=C;return R===os.Screen||R===os.ScreenLow});"offer"===o.state&&Kt.publish(this._joinInfo.sid,{eventElapse:pl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Ie.TIMEOUT,audio:_,video:y,p2pid:o.p2p_id,publishRequestid:this.store.pubId,screenshare:b,audioName:_?null===(c=v.find(C=>{let{stream_type:R}=C;return R===os.Audio}))||void 0===c||null===(h=c.ssrcs[0])||void 0===h?void 0:h.ssrcId.toString():void 0,videoName:y?null===(g=v.find(C=>{let{stream_type:R}=C;return R!==os.Audio}))||void 0===g||null===(p=g.ssrcs[0])||void 0===p?void 0:p.ssrcId.toString():void 0})}break}case di.SUBSCRIBE:o&&Kt.subscribe(this._joinInfo.sid,{succ:!1,ec:Ie.TIMEOUT,audio:o.stream_type===Zr.AUDIO,video:o.stream_type===Zr.VIDEO,peerid:o.stream_id,subscribeRequestid:o.ssrcId,p2pid:this.store.p2pId,eventElapse:pl.measureFromSubscribeStart(this.store.clientId,o.ssrcId)})}}),this._gateway.signal.on(Bi.ON_P2P_OK,i=>{}),this._gateway.signal.on(Bi.ON_PUBLISHED_USER_LIST,i=>{if(null==i||!i.users)return;const o=[],c=[];for(const h of i.users){let g=this._users.find(b=>b.uid===h.stream_id);g?g._trust_in_room_=!0:(g=new _2(h.stream_id,h.stream_id),this._users.push(g),0===this.getListeners(Er.PUBLISHED_USER_LIST).length&&(oe.debug("[".concat(this._clientId,"] user online"),h.stream_id),Ld("info",this,"user-joined",{uid:h.stream_id}),this.emit(Er.USER_JOINED,g)));const p=Po.Audio&h.stream_type,v=(Po.Video|Po.LwoVideo)&h.stream_type,_=p&&g.hasAudio,y=v&&g.hasVideo;v&&(g._trust_video_stream_added_state_=!0,g._video_added_=!0,g._videoSSRC=h.video_ssrc),p&&(g._trust_audio_stream_added_state_=!0,g._audio_added_=!0,g._audioSSRC=h.audio_ssrc),p&&!_&&0===this.getListeners(Er.PUBLISHED_USER_LIST).length&&(oe.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published audio")),Ln("info",this,"remote user ".concat(g.uid," published audio")),this.emit(Er.USER_PUBLISHED,g,"audio")),v&&!y&&0===this.getListeners(Er.PUBLISHED_USER_LIST).length&&(oe.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published video")),Ln("info",this,"remote user ".concat(g.uid," published video")),this.emit(Er.USER_PUBLISHED,g,"video")),(p&&!_||v&&!y)&&o.push(g),v&&this._p2pChannel.hasPendingRemoteMedia(g,"video")&&c.push({user:g,mediaType:"video"}),p&&this._p2pChannel.hasPendingRemoteMedia(g,"audio")&&c.push({user:g,mediaType:"audio"})}c.length>0&&(oe.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(h=>"user: ".concat(h.user.uid,", mediaType: ").concat(h.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(h=>{oe.error("[".concat(this._clientId,"] mass resubscribe error"),h.toString())})),this.getListeners(Er.PUBLISHED_USER_LIST).length>0?(oe.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(o.map(h=>h.uid).join(", "))),this.emit(Er.PUBLISHED_USER_LIST,o)):oe.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(o.map(h=>h.uid).join(", ")))})}_handleP2PChannelEvents(){var n=this;this._p2pChannel.on(Ai.RequestMuteLocal,function(){var i=L(function*(o,c,h){if(n._joinInfo)try{yield n._gateway.muteLocal(o,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===Ie.DISCONNECT_P2P?c():h(g)}else c()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(Ai.RequestUnmuteLocal,function(){var i=L(function*(o,c,h){if(n._joinInfo)try{yield n._gateway.unmuteLocal(o,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===Ie.DISCONNECT_P2P?c():h(g)}else c()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(Ai.RequestRePublish,(i,o,c)=>{this.publish(i,!1).then(o).catch(c)}),this._p2pChannel.on(Ai.RequestReSubscribe,function(){var i=L(function*(o,c,h){try{for(const{user:g,kind:p}of o)p===Zr.VIDEO?yield n.subscribe(g,"video"):yield n.subscribe(g,"audio");c()}catch(g){h(g)}});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(Ai.RequestUploadStats,(i,o)=>{this._gateway.uploadStats(i,o)}),this._p2pChannel.on(Ai.MediaReconnectStart,i=>{this.emit(Er.MEDIA_RECONNECT_START,i)}),this._p2pChannel.on(Ai.MediaReconnectEnd,i=>{this.emit(Er.MEDIA_RECONNECT_END,i)}),this._p2pChannel.on(Ai.NeedSignalRTT,i=>{i(this._gateway.getSignalRTT())}),this._p2pChannel.on(Ai.RequestRestartICE,L(function*(){const i=yield n._p2pChannel.reEstablish();if(i){const{restartICEResponse:o,gatewayIP:c,gatewayPort:h}=yield n._gateway.restartICE({iceParameters:i.iceParameters}),{candidates:g,iceParameters:p}=function(v,_,y){const b=v.iceParameters;let C;return void 0!==_&&void 0!==y?(C=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_,port:y.toString(),type:"host",extension:{}}],oe.debug("Using remote candidate from AP ".concat(_,":").concat(y)),Ln("debug",[],"Using remote candidate from AP ".concat(_,":").concat(y))):C=b.candidates.map(R=>({foundation:R.foundation,componentId:"1",transport:R.protocol,priority:R.priority.toString(),connectionAddress:R.ip,port:R.port.toString(),type:R.type,extension:{}})),{candidates:C,iceParameters:{iceUfrag:b.iceUfrag,icePwd:b.icePwd}}}(o,c,h);yield i.restartICE(p,g)}})),this._p2pChannel.on(Ai.RequestReconnect,L(function*(){n._gateway.reconnect()})),this._p2pChannel.on(Ai.RequestReconnectPC,L(function*(){var i;const{iceParameters:o,dtlsParameters:c,rtpCapabilities:h}=yield n._p2pChannel.startP2PConnection({turnServer:null===(i=n._joinInfo)||void 0===i?void 0:i.turnServer}),{gatewayEstablishParams:g,gatewayIP:p,gatewayPort:v}=yield n._gateway.reconnectPC({iceParameters:o,dtlsParameters:c,rtpCapabilities:h}),{dtlsParameters:_,iceParameters:y,candidates:b,rtpCapabilities:C,setup:R,cname:N}=K5(g,p,v);yield n._p2pChannel.connect(y,_,b,C,R,N),yield n._p2pChannel.republish(),yield n._p2pChannel.reSubscribe()})),this._p2pChannel.on(Ai.RequestUnpublishForReconnectPC,function(){var i=L(function*(o,c,h){n._joinInfo&&void 0!==n._uid?(yield n._gateway.unpublish(o,n._uid),c()):h()});return function(o,c,h){return i.apply(this,arguments)}}()),this._p2pChannel.on(Ai.P2PLost,()=>{this.emit(Er.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Ai.UpdateVideoEncoder,i=>{i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig)}),this._p2pChannel.on(Ai.ConnectionTypeChange,i=>{this.emit(Er.IS_USING_CLOUD_PROXY,i)}),this._p2pChannel.on(Ai.RequestLowStreamParameter,i=>{i(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(n){var i=this;return L(function*(){if("CONNECTED"!==i.connectionState||!i._joinInfo)throw new Pe(Ie.INVALID_OPERATION,"[".concat(i._clientId,"] Client did not join channel"));if(i._inspect)throw new Pe(Ie.INVALID_OPERATION,"[".concat(i._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new Pe(Ie.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig is necessary"));if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new Pe(Ie.INVALID_PARAMS,"[".concat(i._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const o=new G2(n);i._inspect=o,i.handleVideoInspectEvents(i._inspect),yield o.init({appId:i._joinInfo.appId,areaCode:"",cname:i._joinInfo.cname,sid:i._joinInfo.sid,token:i._joinInfo.token,uid:i._joinInfo.uid,cid:i._joinInfo.cid,vid:i._joinInfo.vid?Number(i._joinInfo.vid):0},Jo)}catch(o){throw Array.isArray(o)?o[0]:o}})()}disableContentInspect(){var n=this;return L(function*(){if(!n._inspect)throw new Pe(Ie.INVALID_OPERATION,"[".concat(n._clientId,"] inspectVideoContent not started"));try{n._inspect.close(),n._inspect=void 0}catch(i){throw Array.isArray(i)?i[0]:i}})()}handleVideoInspectEvents(n){n.on(Xo.CONNECTION_STATE_CHANGE,(i,o)=>{if(this.emit(Er.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,i,o),o===Du.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(Er.CONTENT_INSPECT_ERROR,new Pe(Ie.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(Xo.INSPECT_RESULT,(i,o)=>{var c;if(o?.code===Ie.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return oe.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(Er.CONTENT_INSPECT_RESULT,i,o)}),n.on(Xo.CLIENT_LOCAL_VIDEO_TRACK,i=>{i(this.localTracks.filter(o=>"video"===o.trackMediaType)[0])})}getJoinChannelServiceRecords(){return oe.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(n,i){switch(i){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[yj],Object.getOwnPropertyDescriptor(r.prototype,"setProxyServer"),r.prototype),rr(r.prototype,"setTurnServer",[PB],Object.getOwnPropertyDescriptor(r.prototype,"setTurnServer"),r.prototype),rr(r.prototype,"setLocalAccessPoints",[W2],Object.getOwnPropertyDescriptor(r.prototype,"setLocalAccessPoints"),r.prototype),rr(r.prototype,"setRemoteDefaultVideoStreamType",[MB],Object.getOwnPropertyDescriptor(r.prototype,"setRemoteDefaultVideoStreamType"),r.prototype),rr(r.prototype,"setEncryptionConfig",[Ej],Object.getOwnPropertyDescriptor(r.prototype,"setEncryptionConfig"),r.prototype),rr(r.prototype,"pickSVCLayer",[fG],Object.getOwnPropertyDescriptor(r.prototype,"pickSVCLayer"),r.prototype),rr(r.prototype,"enableContentInspect",[mG],Object.getOwnPropertyDescriptor(r.prototype,"enableContentInspect"),r.prototype),rr(r.prototype,"disableContentInspect",[gG],Object.getOwnPropertyDescriptor(r.prototype,"disableContentInspect"),r.prototype),rr(r.prototype,"getJoinChannelServiceRecords",[sw],Object.getOwnPropertyDescriptor(r.prototype,"getJoinChannelServiceRecords"),r.prototype),_G=r))||_G);class l extends Rk{set currentState(i){i!==this._currentState&&(this._currentState=i,this.emit(Tc.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),q(this,"audioBuffer",void 0),q(this,"sourceNode",void 0),q(this,"startPlayTime",0),q(this,"startPlayOffset",0),q(this,"pausePlayTime",0),q(this,"options",void 0),q(this,"currentLoopCount",0),q(this,"_currentState","stopped"),this.audioBuffer=i,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(i){"stopped"===this.currentState?(this.options=i,this.startPlayOffset=this.options.startPlayTime||0):oe.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(i){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=i,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=i))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const i=this.context.createBufferSource();return i.buffer=this.audioBuffer,i.loop=!!this.options.loop,i.connect(this.outputNode),i}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const m=new Map;function I(){return I=L(function*(n,i){let o=null;if("string"==typeof n){const h=m.get(n);if(h)return oe.debug("use cached audio resource: ",n),h;try{o=(yield jl(()=>sl.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new Pe(Ie.FETCH_AUDIO_FILE_FAILED,g.toString())}}else o=yield new jn((g,p)=>{const v=new FileReader;v.onload=_=>{_.target?g(_.target.result):p(new Pe(Ie.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{p(new Pe(Ie.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const c=yield function(h){const g=p1();return new jn((p,v)=>{g.decodeAudioData(h,_=>{p(_)},_=>{v(new Pe(Ie.DECODE_AUDIO_FILE_FAILED,_.toString()))})})}(o);return"string"==typeof n&&i&&m.set(n,c),c}),I.apply(this,arguments)}function k(n,i){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);i&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),o.push.apply(o,c)}return o}function F(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?k(Object(o),!0).forEach(function(c){q(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function ee(n,i,o,c){o.optimizationMode&&(c&&c.width&&c.height?(o.encoderConfig=F(F({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==o.optimizationMode&&"detail"!==o.optimizationMode||(i.contentHint=o.optimizationMode,i.contentHint===o.optimizationMode?(oe.debug("[".concat(n,"] set content hint to"),o.optimizationMode),pr("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,o,c])):(oe.debug("[".concat(n,"] set content hint failed")),pr("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,o,c],"failed")))):(oe.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")),Ln("warning",["AgoraRTC"],"[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const me=Ki().name;function Le(n,i,o,c){let h,g=0,p=null;return new jn((v,_)=>{setTimeout(()=>{h&&(h(),v(g))},i),h=_V(()=>{!function(){g>c&&h&&(h(),v(g));const y=o.getContext("2d");if(!y){const R=new Pe(Ie.UNEXPECTED_ERROR,"can not get canvas 2d context.");return oe.error(R.toString()),void _(R)}y.drawImage(n,0,0,160,120);const b=y.getImageData(0,0,o.width,o.height),C=Math.floor(b.data.length/3);if(p){for(let R=0;R<C;R+=3)if(b.data[R]!==p[R])return g+=1,void(p=b.data);p=b.data}else p=b.data}()},30)})}class We{constructor(i,o){q(this,"id",0),q(this,"element",void 0),q(this,"peerPair",void 0),q(this,"context",void 0),q(this,"audioPlayerElement",void 0),q(this,"audioTrack",void 0),We.count+=1,this.id=We.count,this.element=i,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=i=>{const o=document.createElement("audio");o.srcObject=new MediaStream([i.track]),o.play(),this.audioPlayerElement=o}}switchSdp(){var i=this;return L(function*(){if(!i.peerPair)return;const o=function(){var h=L(function*(g,p){const v="offer"===p?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(v),"complete"===g.iceGatheringState?g.localDescription:new jn(_=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&_(g.localDescription)}})});return function(p,v){return h.apply(this,arguments)}}(),c=function(){var h=L(function*(g,p){return yield g.setRemoteDescription(p)});return function(p,v){return h.apply(this,arguments)}}();try{const h=yield o(i.peerPair[0],"offer");yield c(i.peerPair[1],h);const g=yield o(i.peerPair[1],"answer");yield c(i.peerPair[0],g)}catch(h){throw new Pe(Ie.LOCAL_AEC_ERROR,h.toString()).print()}})()}getTracksFromMediaElement(i){var o=this;return L(function*(){if(o.audioTrack)return o.audioTrack;let c;try{i instanceof HTMLVideoElement&&(i.captureStream?i.captureStream():i.mozCaptureStream()),c=o.context.createMediaStreamDestination(),o.context.createMediaElementSource(i).connect(c)}catch(g){throw new Pe(Ie.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new Pe(Ie.LOCAL_AEC_ERROR,"no dest node when local aec").print();const h=c.stream.getAudioTracks()[0];return o.audioTrack=h,h})()}getElement(){return this.element}startEchoCancellation(){var i=this;return L(function*(){i.context.resume(),i.peerPair&&i.close(),i.initPeers();const o=i.element,c=yield i.getTracksFromMediaElement(o);i.peerPair&&i.peerPair[0].addTrack(c),yield i.switchSdp()})()}close(){oe.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(i=>{i.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var it,bt;q(We,"count",0);const Jt=window.AudioContext||window.webkitAudioContext,tn=new(it=l1({report:Kt}),rr((bt=class{constructor(){q(this,"units",[]),q(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return oe.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Jt);let i=this.units.find(o=>o&&o.getElement()===n);return i||(i=new We(n,this.context),this.units.push(i)),i.startEchoCancellation(),oe.debug("start processing local audio echo cancellation, id is",i.id),i.id}_doesEnvironmentNeedAEC(){return Ki().name!==xi.SAFARI}}).prototype,"processExternalMediaAEC",[it],Object.getOwnPropertyDescriptor(bt.prototype,"processExternalMediaAEC"),bt.prototype),bt);ac("PROCESS_ID","process-".concat(as(8,""),"-").concat(as(4,""),"-").concat(as(4,""),"-").concat(as(4,""),"-").concat(as(12,""))),function(){const n=Ki();cc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),cc.getStreamFromExtension=n.name===xi.CHROME&&Number(n.version)>34,cc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const i=new RTCPeerConnection;let o=!1;try{i.addTransceiver("audio"),o=!0}catch{}return i.close(),o}(),cc.supportMinBitrate=n.name===xi.CHROME||n.name===xi.EDGE,cc.supportSetRtpSenderParameters=function(){const i=Ki();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!xT()||!(!Md()&&!wD())||i.name===xi.FIREFOX&&Number(i.version)>=64)}(),n.name===xi.SAFARI&&(cc.supportDualStream=Number(n.version)>=14),cc.webAudioMediaStreamDest=function(){const i=Ki();return!(i.name===xi.SAFARI&&Number(i.version)<12)}(),cc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,cc.supportWebGL=typeof WebGLRenderingContext<"u",cc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,xT()||(cc.webAudioWithAEC=!0),cc.supportShareAudio=function(){const i=Ki();return(i.os===pa.WIN_10||i.os===pa.WIN_81||i.os===pa.WIN_7||i.os===pa.LINUX||i.os===pa.MAC_OS)&&i.name===xi.CHROME&&Number(i.version)>=74}(),cc.supportDualStreamEncoding=function(){const i=Ki();return"Safari"===i.name&&Number(i.version)>=14}(),oe.info("browser compatibility",JSON.stringify(cc),JSON.stringify(n)),Yt("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:cc,browserInfo:n})}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(i){return void oe.error("Error loading sdk config",i.message)}if(n)try{const i=JSON.parse(window.atob(n)),o=Date.now();oe.debug("Loading global parameters from cache",i),Yt("debug",[],"loadConfigFromLocalStorage",i),Object.keys(i).forEach(c=>{if(Object.prototype.hasOwnProperty.call(wu,c)){const{value:h,expires:g}=i[c];if(g&&g<=o)return;UU[c]=h,wu[c]=h}})}catch(i){oe.error("Error loading mutableParamsCache: ".concat(n),i.message)}}();const Rn={__CLIENT_LIST__:WT,__TRACK_LIST__:TS,VERSION:al,BUILD:kM,setParameter:ac,getParameter:Bt,getSupportedCodec:function(){var n=L(function*(){let i={audio:[],video:[]};try{let o=new RTCPeerConnection;o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"});const c=(yield o.createOffer()).sdp;if(!c)return i;o.close(),o=null,i=function(h){const g={video:[],audio:[]};return h.match(/ VP8/i)&&g.video.push("VP8"),h.match(/ VP9/i)&&g.video.push("VP9"),h.match(/ AV1/i)&&g.video.push("AV1"),h.match(/ H264/i)&&g.video.push("H264"),h.match(/ opus/i)&&g.audio.push("OPUS"),h.match(/ PCMU/i)&&g.audio.push("PCMU"),h.match(/ PCMA/i)&&g.audio.push("PCMA"),h.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(o){throw new Pe(Ie.CREATE_OFFER_FAILED,o.toString&&o.toString()).print()}return i});return function(){return n.apply(this,arguments)}}(),checkSystemRequirements:function(){const n=Kt.reportApiInvoke(null,{name:hr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:sr.TRACER});let i=!1;try{const g=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;i=!!(g&&p&&v)}catch(g){return oe.error("check system requirement failed: ",g),!1}let o=!1;const c=Ki();c.name===xi.CHROME&&Number(c.version)>=58&&(!function fM(){return"WebKit"===bg.engine.name}()||function pM(){const n=Ki();if(wD()){if(n.os===pa.MAC_OS)return!0;if(n.os===pa.IOS){const i=bg.os.version&&bg.os.version.split(".");if(i&&14===Number(i[0])&&i[1]&&Number(i[1])>=3||i&&Number(i[0])>14)return!0}}return!1}())&&(o=!0),c.name===xi.FIREFOX&&Number(c.version)>=56&&(o=!0),c.name===xi.OPERA&&Number(c.version)>=45&&(o=!0),c.name===xi.SAFARI&&Number(c.version)>=11&&(o=!0),(D8()||Ki().name===xi.QQ)&&(o=!0),oe.debug("checkSystemRequirements, api:",i,"browser",o);const h=i&&o;return n.onSuccess(h),h},getDevices:function(n){return hl.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return hl.getRecordingDevices(n)},getCameras:function(n){return hl.getCamerasDevices(n)},getElectronScreenSources:vV,getPlaybackDevices:function(n){return hl.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=Kt.reportApiInvoke(null,{name:hr.CREATE_CLIENT,options:[n],tag:sr.TRACER});try{HM(n)}catch(o){throw i.onError(o),o}return void 0===n.audioCodec&&(n.audioCodec="opus"),i.onSuccess(),new s(e(e({forceWaitGatewayResponse:!0},n),{},{role:"rtc"===n.mode?"host":n.role}))},createCameraVideoTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CAM_VIDEO_TRACK,options:[F({},i)]}),c=zL(i),h=as(8,"track-cam-");let g=null;oe.info("start create camera video track with config",JSON.stringify(i),"trackId",h),pr("info",["AgoraRTC"],"createCameraVideoTrack",i);try{g=(yield ku({video:c},h)).getVideoTracks()[0]||null}catch(v){throw o.onError(v),v}if(!g){const v=new Pe(Ie.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(v),v.throw()}i.optimizationMode&&ee(h,g,i,i.encoderConfig&&Oy(i.encoderConfig));const p=new h5(g,i,c,i.scalabiltyMode?QT(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,h);return o.onSuccess(p.getTrackId()),oe.info("create camera video success, trackId:",h),pr("info",["AgoraRTC"],"createCameraVideoTrack",void 0,h),p});return function(){return n.apply(this,arguments)}}(),createCustomVideoTrack:function(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),o=new Os(n.mediaStreamTrack,{bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?QT(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode);return i.onSuccess(o.getTrackId()),oe.info("create custom video track success with config",n,"trackId",o.getTrackId()),pr("info",["AgoraRTC"],"createCustomVideoTrack",n,o.getTrackId()),o},createScreenVideoTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_SCREEN_VIDEO_TRACK,options:[F({},i),o]});i.encoderConfig?"string"==typeof i.encoderConfig||i.encoderConfig.width&&i.encoderConfig.height||(i.encoderConfig.width={max:1920},i.encoderConfig.height={max:1080}):i.encoderConfig="1080p_2";const h=nH(i),g=as(8,"track-scr");let p=null,v=null;const _=Rc();if(!_.supportShareAudio&&"enable"===o){const C=new Pe(Ie.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(C),C.throw()}oe.info("start create screen video track with config",i,"withAudio",o,"trackId",g),pr("info",["AgoraRTC"],"createScreenVideoTrack",[i,o]);try{const C=yield ku({screen:h,screenAudio:"auto"===o?_.supportShareAudio:"enable"===o},g);p=C.getVideoTracks()[0]||null,v=C.getAudioTracks()[0]||null}catch(C){throw c.onError(C),C}if(!p){const C=new Pe(Ie.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(C),C.throw()}if(!v&&"enable"===o){p&&p.stop();const C=new Pe(Ie.SHARE_AUDIO_NOT_ALLOWED);return c.onError(C),C.throw()}i.optimizationMode||(i.optimizationMode="detail"),i.optimizationMode&&(ee(g,p,i,i.encoderConfig&&NM(i.encoderConfig)),i.encoderConfig&&"string"!=typeof i.encoderConfig&&(i.encoderConfig.bitrateMin=i.encoderConfig.bitrateMax));const y=new Os(p,i.encoderConfig?NM(i.encoderConfig):{},i.scalabiltyMode?QT(i.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},i.optimizationMode,g,[wc.SCREEN_TRACK]);if(!v)return c.onSuccess(y.getTrackId()),oe.info("create screen video track success","video:",y.getTrackId()),pr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId()}),y;const b=new Qa(v);return c.onSuccess([y.getTrackId(),b.getTrackId()]),oe.info("create screen video track success","video:",y.getTrackId(),"audio:",b.getTrackId()),pr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:y.getTrackId(),audioTrack:b.getTrackId()}),[y,b]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_MIC_AND_CAM_TRACKS,options:[i,o]}),h=zL(o),g=rH(i),p=as(8,"track-mic-"),v=as(8,"track-cam-");let _=null,y=null;oe.info("start create camera video track(".concat(v,") and microphone audio track(").concat(p,") with config, audio: ").concat(JSON.stringify(i),", video: ").concat(JSON.stringify(o))),pr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:o,audioConfig:i});try{const R=yield ku({audio:g,video:h},"".concat(p,"-").concat(v));_=R.getAudioTracks()[0],y=R.getVideoTracks()[0]}catch(R){throw c.onError(R),R}if(!_||!y){const R=new Pe(Ie.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(R),R.throw()}o.optimizationMode&&ee(v,y,o,o.encoderConfig&&Oy(o.encoderConfig));const b=new Wy(_,i,g,p),C=new h5(y,o,h,o.scalabiltyMode?QT(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,v);return c.onSuccess([b.getTrackId(),C.getTrackId()]),oe.info("create camera video track(".concat(v,") and microphone audio track(").concat(p,") success")),pr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:v,audioTrackId:p}),[b,C]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var n=L(function*(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_MIC_AUDIO_TRACK,options:[i]}),c=rH(i),h=as(8,"track-mic-");let g=null;oe.info("start create microphone audio track with config",JSON.stringify(i),"trackId",h),pr("info",["AgoraRTC"],"createMicrophoneAudioTrack",i);try{g=(yield ku({audio:c},h)).getAudioTracks()[0]||null}catch(v){throw o.onError(v),v}if(!g){const v=new Pe(Ie.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(v),v.throw()}const p=new Wy(g,i,c,h);return o.onSuccess(p.getTrackId()),oe.info("create microphone audio track success, trackId:",h),pr("info",["AgoraRTC"],"createMicrophoneAudioTrack",i,h),p});return function(){return n.apply(this,arguments)}}(),createCustomAudioTrack:function(n){const i=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),o=new Qa(n.mediaStreamTrack,n.encoderConfig?HT(n.encoderConfig):{});return oe.info("create custom audio track success with config",n,"trackId",o.getTrackId()),pr("info",["AgoraRTC"],"createCustomAudioTrack",n,o.getTrackId()),i.onSuccess(o.getTrackId()),o},createBufferSourceAudioTrack:function(){var n=L(function*(i){const o=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CREATE_BUFFER_AUDIO_TRACK,options:[i]}),c=as(8,"track-buf-");oe.info("start create buffer source audio track with config",JSON.stringify(i),"trackId",c),pr("info",[],"createBufferSourceAudioTrack",i);const h=i.source;if(!(i.source instanceof AudioBuffer))try{i.source=yield function E(n,i){return I.apply(this,arguments)}(i.source,i.cacheOnlineFile)}catch(v){return o.onError(v),v.throw()}const g=new l(i.source),p=new RV(h,g,i.encoderConfig?HT(i.encoderConfig):{},c);return oe.info("create buffer source audio track success, trackId:",c),pr("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),o.onSuccess(p.getTrackId()),p});return function(o){return n.apply(this,arguments)}}(),setLogLevel:function(n){Bt("USE_NEW_LOG")?function(i){i=Math.min(Math.max(0,i),4),LU=i}(n):oe.setLogLevel(n)},enableLogUpload:function(){Bt("USE_NEW_LOG")?ac("UPLOAD_LOG",!0):oe.enableLogUpload()},disableLogUpload:function(){Bt("USE_NEW_LOG")?ac("UPLOAD_LOG",!1):oe.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new QL},checkAudioTrackIsActive:function(){var n=L(function*(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[o]});if(!(i instanceof Qa||i instanceof iw)){const y=new Pe(Ie.INVALID_TRACK,"the parameter is not a audio track");return c.onError(y),y.throw()}o&&o<1e3&&(o=1e3);const h=i instanceof Qa?i.getTrackLabel():"remote_track",g=i.getVolumeLevel();let p=g,v=g;const _=Date.now();return new jn(y=>{const b=setInterval(()=>{const C=i.getVolumeLevel();p=C>p?C:p,v=C<v?C:v;const R=p-v>1e-4,N=Date.now()-_;if(R||N>o){clearInterval(b);const j=R,Q={duration:N,deviceLabel:h,maxVolumeLevel:p,result:j};oe.info("[track-".concat(i.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(Q))),c.onSuccess(Q),y(j)}},200)})});return function(o){return n.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var n=L(function*(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Kt.reportApiInvoke(null,{tag:sr.TRACER,name:hr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[o]});if(!(i instanceof Os||i instanceof V2)){const N=new Pe(Ie.INVALID_TRACK,"the parameter is not a video track");return c.onError(N),N.throw()}const h=4;o&&o<1e3&&(o=1e3);const g=i instanceof Os?i.getTrackLabel():"remote_track",p=i.getMediaStreamTrack(!0),v=document.createElement("video");v.style.width="1px",v.style.height="1px",v.setAttribute("muted",""),v.muted=!0,v.setAttribute("playsinline",""),v.controls=!1,(Md()||wD())&&(v.style.opacity="0.01",v.style.position="fixed",v.style.left="0",v.style.top="0",document.body.appendChild(v)),v.srcObject=new MediaStream([p]),v.play();const _=document.createElement("canvas");_.width=160,_.height=120;let y=0,b=0;try{const N=Date.now();y=yield Le(v,o,_,h),b=Date.now()-N}catch(N){throw c.onError(N),N}me===xi.SAFARI&&(v.pause(),v.remove()),v.srcObject=null;const C=y>h,R={duration:b,changedPicNum:y,deviceLabel:g,result:C};return oe.info("[track-".concat(i.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),c.onSuccess(R),C});return function(o){return n.apply(this,arguments)}}(),setArea:function(n){const i=Kt.reportApiInvoke(null,{name:hr.SET_AREA,options:n,tag:sr.TRACER});try{let o=[];if("string"==typeof n&&(o=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!zD.includes(h))throw new Pe(Ie.INVALID_PARAMS,"invalid area code")}),o=n),"[object Object]"===Object.prototype.toString.call(n)){const{areaCode:h,excludedArea:g}=n;if(!h)throw new Pe(Ie.INVALID_PARAMS,"area code is needed");let p=h;"string"==typeof h&&(p=[h]),o=g?function(n,i){let o=[];if(n.includes(_i.GLOBAL)){const g=[_i.GLOBAL,_i.OVERSEA],p=Object.keys(qT);if(i===_i.GLOBAL)throw new Pe(Ie.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(i===_i.CHINA)o=[_i.OVERSEA];else if(LL.includes(i)){const v=c2[_i.GLOBAL][i]||[],_=[...g,i,...v];o=p.filter(y=>!_.includes(y))}else if(function(v){let _=!1;return LL.forEach(y=>{c2[_i.GLOBAL][y].includes(v)&&(_=!0)}),_}(i)){const v=function(y){let b;return LL.forEach(C=>{c2[_i.GLOBAL][C].includes(y)&&(b=C)}),b}(i),_=[...g,v,i];o=p.filter(y=>!_.includes(y))}else o=n;o=function(v){const _=[];return B4.forEach(y=>{v.includes(y)&&_.push(y)}),_.concat(v.filter(y=>!B4.includes(y)))}(o)}else o=n;return o}(p,g):p}ac("AREAS",o);const c=(h=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return h.map(p=>{const v=qT[p],_=Object.keys(v);_&&_.map(y=>{"CODE"!==y&&(g[y]=g[y].concat(v[y]))})}),g})(o);Object.keys(c).map(h=>{ac(h,"LOG_UPLOAD_SERVER"===h||"EVENT_REPORT_DOMAIN"===h||"EVENT_REPORT_BACKUP_DOMAIN"===h||"PROXY_SERVER_TYPE3"===h?c[h][0]:c[h])}),oe.debug("set area success:",o.join(","))}catch(o){throw i.onError(o),o}i.onSuccess()},loadModule:function(){var n=L(function*(i,o){if(oe.debug("loadModule: ".concat(i.name,", loadOption: ").concat(JSON.stringify(o))),!i.moduleInit)throw oe.debug("Invalid Plugin"),new Pe(Ie.INVALID_PLUGIN,"invalid plugin");try{h1.installPlugin(i),yield i.moduleInit({logger:oe,report:Kt,pluginCenter:h1,getParameter:Bt},o)}catch(c){throw new Pe(Ie.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(o,c){return n.apply(this,arguments)}}(),audioElementPlayCenter:Kl,processExternalMediaAEC:function(n){tn.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(i=>{const o=i;o.__registered__=!0,o.logger.hookLog=oe.extLog,o.reporter.hookApiInvoke=Kt.extApiInvoke,o.parameters&&Object.keys(o.parameters).forEach(c=>{o.parameters[c]=Bt(c)})})},ChannelMediaRelayError:Tg,ChannelMediaRelayEvent:wp,ChannelMediaRelayState:Fa,RemoteStreamFallbackType:r3,RemoteStreamType:KM,ConnectionDisconnectedReason:Ls,AudienceLatencyLevelType:GD,AREAS:_i};return Object.defineProperties(Rn,{onAudioAutoplayFailed:{get:()=>Gl.onAudioAutoplayFailed,set:n=>{Gl.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Gl.onAutoplayFailed,set:n=>{Gl.onAutoplayFailed=n}}}),hl.on(Gf.CAMERA_DEVICE_CHANGED,n=>{oe.info("camera device changed",JSON.stringify(n)),Rn.onCameraChanged&&Rn.onCameraChanged(n)}),hl.on(Gf.RECORDING_DEVICE_CHANGED,n=>{oe.info("microphone device changed",JSON.stringify(n)),Rn.onMicrophoneChanged&&Rn.onMicrophoneChanged(n)}),hl.on(Gf.PLAYOUT_DEVICE_CHANGED,n=>{oe.debug("playout device changed",JSON.stringify(n)),Rn.onPlaybackDeviceChanged&&Rn.onPlaybackDeviceChanged(n)}),Kl.onAutoplayFailed=()=>{oe.info("detect audio element autoplay failed"),Gl.onAudioAutoplayFailed&&Gl.onAudioAutoplayFailed()},zr.on("autoplay-failed",()=>{oe.info("detect webaudio autoplay failed"),Gl.onAudioAutoplayFailed&&Gl.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Rn),Rn}()},9069:Ce=>{"use strict";var L,Oe="object"==typeof Reflect?Reflect:null,Y=Oe&&"function"==typeof Oe.apply?Oe.apply:function(pe,be,ye){return Function.prototype.apply.call(pe,be,ye)};L=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(pe){return Object.getOwnPropertyNames(pe).concat(Object.getOwnPropertySymbols(pe))}:function(pe){return Object.getOwnPropertyNames(pe)};var ne=Number.isNaN||function(pe){return pe!=pe};function H(){H.init.call(this)}Ce.exports=H,Ce.exports.once=function K(De,pe){return new Promise(function(be,ye){function ge(de){De.removeListener(pe,re),ye(de)}function re(){"function"==typeof De.removeListener&&De.removeListener("error",ge),be([].slice.call(arguments))}ve(De,pe,re,{once:!0}),"error"!==pe&&function se(De,pe,be){"function"==typeof De.on&&ve(De,"error",pe,be)}(De,ge,{once:!0})})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var U=10;function D(De){if("function"!=typeof De)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof De)}function O(De){return void 0===De._maxListeners?H.defaultMaxListeners:De._maxListeners}function P(De,pe,be,ye){var ge,re,de;if(D(be),void 0===(re=De._events)?(re=De._events=Object.create(null),De._eventsCount=0):(void 0!==re.newListener&&(De.emit("newListener",pe,be.listener?be.listener:be),re=De._events),de=re[pe]),void 0===de)de=re[pe]=be,++De._eventsCount;else if("function"==typeof de?de=re[pe]=ye?[be,de]:[de,be]:ye?de.unshift(be):de.push(be),(ge=O(De))>0&&de.length>ge&&!de.warned){de.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+String(pe)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=De,Te.type=pe,Te.count=de.length,function W(De){console&&console.warn&&console.warn(De)}(Te)}return De}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(De,pe,be){var ye={fired:!1,wrapFn:void 0,target:De,type:pe,listener:be},ge=x.bind(ye);return ge.listener=be,ye.wrapFn=ge,ge}function ie(De,pe,be){var ye=De._events;if(void 0===ye)return[];var ge=ye[pe];return void 0===ge?[]:"function"==typeof ge?be?[ge.listener||ge]:[ge]:be?function z(De){for(var pe=new Array(De.length),be=0;be<pe.length;++be)pe[be]=De[be].listener||De[be];return pe}(ge):le(ge,ge.length)}function te(De){var pe=this._events;if(void 0!==pe){var be=pe[De];if("function"==typeof be)return 1;if(void 0!==be)return be.length}return 0}function le(De,pe){for(var be=new Array(pe),ye=0;ye<pe;++ye)be[ye]=De[ye];return be}function ve(De,pe,be,ye){if("function"==typeof De.on)ye.once?De.once(pe,be):De.on(pe,be);else{if("function"!=typeof De.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof De);De.addEventListener(pe,function ge(re){ye.once&&De.removeEventListener(pe,ge),be(re)})}}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(De){if("number"!=typeof De||De<0||ne(De))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+De+".");U=De}}),H.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(pe){if("number"!=typeof pe||pe<0||ne(pe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+pe+".");return this._maxListeners=pe,this},H.prototype.getMaxListeners=function(){return O(this)},H.prototype.emit=function(pe){for(var be=[],ye=1;ye<arguments.length;ye++)be.push(arguments[ye]);var ge="error"===pe,re=this._events;if(void 0!==re)ge=ge&&void 0===re.error;else if(!ge)return!1;if(ge){var de;if(be.length>0&&(de=be[0]),de instanceof Error)throw de;var Te=new Error("Unhandled error."+(de?" ("+de.message+")":""));throw Te.context=de,Te}var Fe=re[pe];if(void 0===Fe)return!1;if("function"==typeof Fe)Y(Fe,this,be);else{var xe=Fe.length,Ve=le(Fe,xe);for(ye=0;ye<xe;++ye)Y(Ve[ye],this,be)}return!0},H.prototype.on=H.prototype.addListener=function(pe,be){return P(this,pe,be,!1)},H.prototype.prependListener=function(pe,be){return P(this,pe,be,!0)},H.prototype.once=function(pe,be){return D(be),this.on(pe,J(this,pe,be)),this},H.prototype.prependOnceListener=function(pe,be){return D(be),this.prependListener(pe,J(this,pe,be)),this},H.prototype.off=H.prototype.removeListener=function(pe,be){var ye,ge,re,de,Te;if(D(be),void 0===(ge=this._events))return this;if(void 0===(ye=ge[pe]))return this;if(ye===be||ye.listener===be)0==--this._eventsCount?this._events=Object.create(null):(delete ge[pe],ge.removeListener&&this.emit("removeListener",pe,ye.listener||be));else if("function"!=typeof ye){for(re=-1,de=ye.length-1;de>=0;de--)if(ye[de]===be||ye[de].listener===be){Te=ye[de].listener,re=de;break}if(re<0)return this;0===re?ye.shift():function X(De,pe){for(;pe+1<De.length;pe++)De[pe]=De[pe+1];De.pop()}(ye,re),1===ye.length&&(ge[pe]=ye[0]),void 0!==ge.removeListener&&this.emit("removeListener",pe,Te||be)}return this},H.prototype.removeAllListeners=function(pe){var be,ye,ge;if(void 0===(ye=this._events))return this;if(void 0===ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ye[pe]&&(0==--this._eventsCount?this._events=Object.create(null):delete ye[pe]),this;if(0===arguments.length){var de,re=Object.keys(ye);for(ge=0;ge<re.length;++ge)"removeListener"!==(de=re[ge])&&this.removeAllListeners(de);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(be=ye[pe]))this.removeListener(pe,be);else if(void 0!==be)for(ge=be.length-1;ge>=0;ge--)this.removeListener(pe,be[ge]);return this},H.prototype.listeners=function(pe){return ie(this,pe,!0)},H.prototype.rawListeners=function(pe){return ie(this,pe,!1)},H.listenerCount=function(De,pe){return"function"==typeof De.listenerCount?De.listenerCount(pe):te.call(De,pe)},H.prototype.listenerCount=te,H.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},302:(Ce,Oe,Y)=>{"use strict";var L=Y(8126);Ce.exports=function W(ne,H,U,D){var O,P=new Error("Canceled");return new L(function(J,ie,te){var le;ne(function(z){return te()?L.reject(P):(le=H(z),U(le).then(function(se){if(te())throw P;return O=se()}))}).then(function(z){if(te())throw z.disconnect(),P;J(D(le,z))}).catch(function(z){ie(z)})},function(){O&&O.cancel()})}},5769:(Ce,Oe,Y)=>{"use strict";var L=Y(1647).MediaStreamTrack,W=Y(7627),ne=W.guessBrowser,H=W.guessBrowserVersion,U=Y(302),D=Y(8130),O=Y(3383),P=Y(3744),x=Y(4920),J=Y(7379),ie=J.LocalAudioTrack,te=J.LocalDataTrack,le=J.LocalVideoTrack,X=Y(4621),z=Y(7406),K=Y(448),se=Y(9739),ve=se.asLocalTrack,De=se.buildLogLevels,pe=se.filterObject,be=se.isNonArrayObject,ye=Y(8701),ge=ye.DEFAULT_ENVIRONMENT,re=ye.DEFAULT_LOG_LEVEL,de=ye.DEFAULT_LOGGER_NAME,Te=ye.DEFAULT_REALM,Fe=ye.DEFAULT_REGION,xe=ye.WS_SERVER,Ve=ye.SDK_NAME,ze=ye.SDK_VERSION,Ze=ye.typeErrors,je=Y(8126),xt=Y(8606),Wt=Y(1458),ht=Y(1501).kG,qe="safari"===ne()&&H(),Ue=0,Ye=!1,we=!1;if(qe){var nt=qe.major;we=nt<12||12===nt&&qe.minor<1}var zt=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),kt=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function yt(kn,dn,Ji){Ji.forEach(function($o){var Zo=$o.didWarn,po=$o.name,Ss=$o.newName,io=$o.shouldDelete;po in kn&&typeof kn[po]<"u"&&(Ss&&io&&(kn[Ss]=kn[po]),io&&delete kn[po],!Zo&&!["error","off"].includes(dn.level)&&(dn.warn('The ConnectOptions "'+po+'" is '+(Ss?'deprecated and scheduled for removal. Please use "'+Ss+'" instead.':"no longer applicable and will be ignored.")),$o.didWarn=!0))})}function Ht(kn,dn,Ji,$o,Zo,po){var Ss=kn.createLocalParticipantSignaling(Ji,$o);return dn.debug("Creating a new LocalParticipant:",Ss),new Zo.LocalParticipant(Ss,po,Zo)}function $t(kn,dn,Ji){var $o=new z(dn,Ji,kn),Zo=kn.log;return Zo.debug("Creating a new Room:",$o),Ji.on("stateChanged",function po(Ss){"disconnected"===Ss&&(Zo.info("Disconnected from Room:",$o.toString()),Ji.removeListener("stateChanged",po))}),$o}function Xe(kn,dn,Ji,$o,Zo,po){return dn.log.debug("Creating a new RoomSignaling"),Ji.connect(po._signaling,kn,$o,Zo,dn)}function Me(kn,dn){var Ji=kn.log;return kn.shouldStopLocalTracks=!kn.tracks,kn.shouldStopLocalTracks?Ji.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(Ji.info("Getting LocalTracks"),Ji.debug("Options:",kn)),kn.createLocalTracks(kn).then(function(Zo){var po=dn(Zo);return po.catch(function(){kn.shouldStopLocalTracks&&(Ji.info("The automatically acquired LocalTracks will now be stopped"),Zo.forEach(function(io){io.stop()}))}),po})}function st(kn){var dn="string"==typeof kn?{codec:kn}:kn;switch(dn.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},dn);case"vp8":return Object.assign({simulcast:!1},dn);default:return dn}}Ce.exports=function mt(kn,dn){if(typeof dn>"u"&&(dn={}),!be(dn))return je.reject(Ze.INVALID_TYPE("options","object"));var io,Ji=dn.Log||Wt,$o=dn.loggerName||de,Zo=dn.logLevel||re,po=De(Zo),Ss="[connect #"+ ++Ue+"]";try{io=new Ji("default",Ss,po,$o)}catch(wr){return je.reject(wr)}yt(dn,io,zt);var Nc="auto"===dn.preferredVideoCodecs;if(Nc&&(dn.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),dn.maxVideoBitrate&&Nc)return io.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),je.reject(Ze.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var Vn={};"string"==typeof(dn=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:ge,eventListener:null,insights:!0,LocalAudioTrack:ie,LocalDataTrack:te,LocalParticipant:O,LocalVideoTrack:le,Log:Ji,MediaStreamTrack:L,loggerName:$o,logLevel:Zo,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:Te,region:Fe,signaling:K},pe(dn))).wsServerInsights&&(Vn.gateway=dn.wsServerInsights);var Ne=new(dn.insights?P:x)(kn,Ve,ze,dn.environment,dn.realm,Vn),dt=xe(dn.environment,dn.region),Zt=new xt(Ne,Date.now(),io,dn.eventListener);if((dn=Object.assign({eventObserver:Zt,wsServer:dt},dn)).log=io,we&&!Ye&&"error"!==io.logLevel&&"off"!==io.logLevel&&(Ye=!0,io.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof kn)return je.reject(Ze.INVALID_TYPE("token","string"));var en=Object.assign({},dn);if(delete en.name,"tracks"in dn){if(!Array.isArray(dn.tracks))return je.reject(Ze.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{dn.tracks=dn.tracks.map(function(wr){return ve(wr,en)})}catch(wr){return je.reject(wr)}}var mn=ht(dn.bandwidthProfile);if(mn)return je.reject(mn);dn.clientTrackSwitchOffControl="disabled",dn.contentPreferencesMode="disabled",dn.bandwidthProfile&&(dn.clientTrackSwitchOffControl="auto",dn.contentPreferencesMode="auto",dn.bandwidthProfile.video&&(yt(dn.bandwidthProfile.video,io,kt),dn.clientTrackSwitchOffControl="maxTracks"in dn.bandwidthProfile.video?"disabled":"manual"===dn.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",dn.contentPreferencesMode="renderDimensions"in dn.bandwidthProfile.video?"disabled":"manual"===dn.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var Eo=new(0,dn.signaling)(dn.wsServer,dn);io.info("Connecting to a Room"),io.debug("Options:",dn);var Cs=new D({maxAudioBitrate:dn.maxAudioBitrate,maxVideoBitrate:dn.maxVideoBitrate},Nc),es={audio:dn.preferredAudioCodecs.map(st),video:dn.preferredVideoCodecs.map(st)},fo=new X(be(dn.networkQuality)?dn.networkQuality:{}),zn=U(Me.bind(null,dn),Ht.bind(null,Eo,io,Cs,fo,dn),Xe.bind(null,kn,dn,Eo,Cs,es),$t.bind(null,dn));return zn.then(function(wr){return Ne.connect(wr.sid,wr.localParticipant.sid),io.info("Connected to Room:",wr.toString()),io.info("Room name:",wr.name),io.debug("Room:",wr),wr.once("disconnected",function(){return Ne.disconnect()}),wr},function(wr){Ne.disconnect(),zn._isCanceled?io.info("Attempt to connect to a Room was canceled"):io.info("Error while connecting to a Room:",wr)}),zn}},8765:(Ce,Oe,Y)=>{"use strict";var L=Y(8701),W=L.DEFAULT_LOG_LEVEL,ne=L.DEFAULT_LOGGER_NAME;function H(O,P){P=Object.assign({loggerName:ne,logLevel:W},P);var x={};x.loggerName=P.loggerName,x.logLevel=P.logLevel,delete P.loggerName,delete P.logLevel;var J=P.createLocalTracks;return delete P.createLocalTracks,x[O]=!(Object.keys(P).length>0)||P,J(x).then(function(ie){return ie[0]})}Ce.exports={audio:function U(O){return H("audio",O)},video:function D(O){return H("video",O)}}},7124:function(Ce,Oe,Y){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function(ge){for(var re,de=1,Te=arguments.length;de<Te;de++)for(var Fe in re=arguments[de])Object.prototype.hasOwnProperty.call(re,Fe)&&(ge[Fe]=re[Fe]);return ge},L.apply(this,arguments)},W=this&&this.__awaiter||function(ge,re,de,Te){return new(de||(de=Promise))(function(xe,Ve){function ze(xt){try{je(Te.next(xt))}catch(Wt){Ve(Wt)}}function Ze(xt){try{je(Te.throw(xt))}catch(Wt){Ve(Wt)}}function je(xt){xt.done?xe(xt.value):function Fe(xe){return xe instanceof de?xe:new de(function(Ve){Ve(xe)})}(xt.value).then(ze,Ze)}je((Te=Te.apply(ge,re||[])).next())})},ne=this&&this.__generator||function(ge,re){var Te,Fe,xe,Ve,de={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Ve={next:ze(0),throw:ze(1),return:ze(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function ze(je){return function(xt){return function Ze(je){if(Te)throw new TypeError("Generator is already executing.");for(;de;)try{if(Te=1,Fe&&(xe=2&je[0]?Fe.return:je[0]?Fe.throw||((xe=Fe.return)&&xe.call(Fe),0):Fe.next)&&!(xe=xe.call(Fe,je[1])).done)return xe;switch(Fe=0,xe&&(je=[2&je[0],xe.value]),je[0]){case 0:case 1:xe=je;break;case 4:return de.label++,{value:je[1],done:!1};case 5:de.label++,Fe=je[1],je=[0];continue;case 7:je=de.ops.pop(),de.trys.pop();continue;default:if(!(xe=(xe=de.trys).length>0&&xe[xe.length-1])&&(6===je[0]||2===je[0])){de=0;continue}if(3===je[0]&&(!xe||je[1]>xe[0]&&je[1]<xe[3])){de.label=je[1];break}if(6===je[0]&&de.label<xe[1]){de.label=xe[1],xe=je;break}if(xe&&de.label<xe[2]){de.label=xe[2],de.ops.push(je);break}xe[2]&&de.ops.pop(),de.trys.pop();continue}je=re.call(ge,de)}catch(xt){je=[6,xt],Fe=0}finally{Te=xe=0}if(5&je[0])throw je[1];return{value:je[0]?je[1]:void 0,done:!0}}([je,xt])}}},H=this&&this.__read||function(ge,re){var de="function"==typeof Symbol&&ge[Symbol.iterator];if(!de)return ge;var Fe,Ve,Te=de.call(ge),xe=[];try{for(;(void 0===re||re-- >0)&&!(Fe=Te.next()).done;)xe.push(Fe.value)}catch(ze){Ve={error:ze}}finally{try{Fe&&!Fe.done&&(de=Te.return)&&de.call(Te)}finally{if(Ve)throw Ve.error}}return xe},U=this&&this.__spreadArray||function(ge,re){for(var de=0,Te=re.length,Fe=ge.length;de<Te;de++,Fe++)ge[Fe]=re[de];return ge};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.createLocalTracks=void 0;var D=Y(9739),O=D.asLocalTrack,P=D.buildLogLevels,x=Y(1647),J=x.getUserMedia,ie=x.MediaStreamTrack,te=Y(7379),le=te.LocalAudioTrack,X=te.LocalDataTrack,z=te.LocalVideoTrack,K=Y(1458),se=Y(8701),ve=se.DEFAULT_LOG_LEVEL,De=se.DEFAULT_LOGGER_NAME,pe=Y(3830),be=0;Oe.createLocalTracks=function ye(ge){return W(this,void 0,void 0,function(){var re,de,Te,Fe,xe,Ve,ze,Ze,je,xt,Wt,ht;return ne(this,function(qe){switch(qe.label){case 0:if(de=L({audio:re=!(ge&&("audio"in ge||"video"in ge)),getUserMedia:J,loggerName:De,logLevel:ve,LocalAudioTrack:le,LocalDataTrack:X,LocalVideoTrack:z,MediaStreamTrack:ie,Log:K,video:re},ge),Te="[createLocalTracks #"+ ++be+"]",Fe=P(de.logLevel),xe=new de.Log("default",Te,Fe,de.loggerName),delete(Ve=Object.assign({log:xe},de)).name,!1===de.audio&&!1===de.video)return xe.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(de.tracks)return xe.info("Adding user-provided LocalTracks"),xe.debug("LocalTracks:",de.tracks),[2,de.tracks];(ze={audio:"object"==typeof de.audio&&de.audio.name?{name:de.audio.name}:{},video:"object"==typeof de.video&&de.video.name?{name:de.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,ze.video.isCreatedByCreateLocalTracks=!0,"object"==typeof de.audio&&"boolean"==typeof de.audio.workaroundWebKitBug1208516&&(ze.audio.workaroundWebKitBug1208516=de.audio.workaroundWebKitBug1208516),"object"==typeof de.video&&"boolean"==typeof de.video.workaroundWebKitBug1208516&&(ze.video.workaroundWebKitBug1208516=de.video.workaroundWebKitBug1208516),"object"==typeof de.audio&&delete de.audio.name,"object"==typeof de.video&&delete de.video.name,Ze={audio:de.audio,video:de.video},je="object"==typeof de.audio&&de.audio.workaroundWebKitBug180748,qe.label=1;case 1:return qe.trys.push([1,3,,4]),[4,je?pe(xe,de.getUserMedia,Ze):de.getUserMedia(Ze)];case 2:return xt=qe.sent(),Wt=U(U([],H(xt.getAudioTracks())),H(xt.getVideoTracks())),xe.info("Call to getUserMedia successful; got MediaStreamTracks:",Wt),[2,Wt.map(function(Ue){return O(Ue,L(L({},ze[Ue.kind]),Ve))})];case 3:throw ht=qe.sent(),xe.warn("Call to getUserMedia failed:",ht),ht;case 4:return[2]}})})}},2498:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(5295),ne=Y(9020),H=function(U){function D(O){var P=U.call(this,O.label,O.maxPacketLifeTime,O.maxRetransmits,O.ordered)||this;return Object.defineProperties(P,{_dataChannel:{value:O}}),O.binaryType="arraybuffer",O.addEventListener("message",function(x){P.emit("message",x.data)}),O.addEventListener("close",function(){P.emit("close")}),P}return L(D,U),D.prototype.stop=function(){this._dataChannel.close(),U.prototype.stop.call(this)},D.prototype.toDataTransport=function(){return new ne(this._dataChannel)},D}(W);Ce.exports=H},1866:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(5295),ne=Y(9739).makeUUID,H=function(U){function D(O,P,x){var J=U.call(this,ne(),O,P,x)||this;return Object.defineProperties(J,{_clones:{value:new Set},_dataChannels:{value:new Set}}),J}return L(D,U),D.prototype._addClone=function(O){this._clones.add(O)},D.prototype.removeClone=function(O){this._clones.delete(O)},D.prototype.addDataChannel=function(O){return this._dataChannels.add(O),this},D.prototype.clone=function(){var O=this,P=new D(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(P),P.once("stopped",function(){return O.removeClone(P)}),P},D.prototype.removeDataChannel=function(O){return this._dataChannels.delete(O),this},D.prototype.send=function(O){return this._dataChannels.forEach(function(P){try{P.send(O)}catch{}}),this._clones.forEach(function(P){try{P.send(O)}catch{}}),this},D.prototype.stop=function(){this._dataChannels.forEach(function(O){return O.close()}),this._clones.forEach(function(O){return O.stop()}),U.prototype.stop.call(this)},D}(W);Ce.exports=H},5295:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x){var J=H.call(this,D,"data")||this;return Object.defineProperties(J,{maxPacketLifeTime:{enumerable:!0,value:O},maxRetransmits:{enumerable:!0,value:P},ordered:{enumerable:!0,value:x}}),J}return L(U,H),U}(Y(4605));Ce.exports=ne},9020:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D){var O=H.call(this)||this;return Object.defineProperties(O,{_dataChannel:{value:D},_messageQueue:{value:[]}}),D.addEventListener("open",function(){O._messageQueue.splice(0).forEach(function(P){return O._publish(P)})}),D.addEventListener("message",function(P){var x=P.data;try{var J=JSON.parse(x);O.emit("message",J)}catch{}}),O.publish({type:"ready"}),O}return L(U,H),U.prototype._publish=function(D){var O=JSON.stringify(D);try{this._dataChannel.send(O)}catch{}},U.prototype.publish=function(D){var O=this._dataChannel;return"closing"!==O.readyState&&"closed"!==O.readyState&&("connecting"===O.readyState?(this._messageQueue.push(D),!0):(this._publish(D),!0))},U}(Y(9069).EventEmitter);Ce.exports=ne},8130:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this)||this;return D=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},D),Object.defineProperties(P,{maxAudioBitrate:{value:D.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:D.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:O}}),P}return L(U,H),U.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},U.prototype.update=function(D){var O=this;D=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},D),["maxAudioBitrate","maxVideoBitrate"].reduce(function(x,J){return O[J]!==D[J]&&(O[J]=D[J],x=!0),x},!1)&&this.emit("changed")},U}(Y(9069).EventEmitter);Ce.exports=ne},133:(Ce,Oe,Y)=>{"use strict";var L=Y(9069).EventEmitter,W=Y(9739).hidePrivateAndCertainPublicPropertiesInClass;Ce.exports=W(L,["domain"])},6021:function(Ce,Oe,Y){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function(X){for(var z,K=1,se=arguments.length;K<se;K++)for(var ve in z=arguments[K])Object.prototype.hasOwnProperty.call(z,ve)&&(X[ve]=z[ve]);return X},L.apply(this,arguments)};Object.defineProperty(Oe,"__esModule",{value:!0});var W=Y(7124),ne=Y(8682),H={connect:Y(5769),createLocalAudioTrack:Y(8765).audio,createLocalVideoTrack:Y(8765).video,isSupported:Y(8592)(),version:Y(1730).version,Logger:Y(7846),LocalAudioTrack:Y(7379).LocalAudioTrack,LocalDataTrack:Y(7379).LocalDataTrack,LocalVideoTrack:Y(7379).LocalVideoTrack};Ce.exports={connect:function U(X,z){var K=L({createLocalTracks:W.createLocalTracks},z);return H.connect(X,K)},createLocalAudioTrack:function D(X){var z=L({createLocalTracks:W.createLocalTracks},X);return H.createLocalAudioTrack(z)},createLocalVideoTrack:function O(X){var z=L({createLocalTracks:W.createLocalTracks},X);return H.createLocalVideoTrack(z)},createLocalTracks:W.createLocalTracks,runPreflight:ne.runPreflight,isSupported:H.isSupported,version:H.version,Logger:H.Logger,LocalAudioTrack:H.LocalAudioTrack,LocalVideoTrack:H.LocalVideoTrack,LocalDataTrack:H.LocalDataTrack}},3383:function(Ce,Oe,Y){"use strict";var be,L=this&&this.__extends||(be=function(ye,ge){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,de){re.__proto__=de}||function(re,de){for(var Te in de)Object.prototype.hasOwnProperty.call(de,Te)&&(re[Te]=de[Te])})(ye,ge)},function(ye,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function re(){this.constructor=ye}be(ye,ge),ye.prototype=null===ge?Object.create(ge):(re.prototype=ge.prototype,new re)}),W=Y(1647).MediaStreamTrack,ne=Y(9739),H=ne.asLocalTrack,U=ne.asLocalTrackPublication,D=ne.trackClass,O=Y(8701),P=O.typeErrors,x=O.trackPriority,J=Y(1501).Wv,ie=Y(7379),te=ie.LocalAudioTrack,le=ie.LocalDataTrack,X=ie.LocalVideoTrack,z=Y(3925),K=Y(5229),se=Y(9565),De=function(be){function ye(ge,re,de){var Te=this,Fe=(de=Object.assign({LocalAudioTrack:te,LocalVideoTrack:X,LocalDataTrack:le,MediaStreamTrack:W,LocalAudioTrackPublication:z,LocalVideoTrackPublication:se,LocalDataTrackPublication:K,shouldStopLocalTracks:!1,tracks:re},de)).shouldStopLocalTracks?new Set(re.filter(function(xe){return"data"!==xe.kind})):new Set;return Te=be.call(this,ge,de)||this,Object.defineProperties(Te,{_eventObserver:{value:de.eventObserver},_LocalAudioTrack:{value:de.LocalAudioTrack},_LocalDataTrack:{value:de.LocalDataTrack},_LocalVideoTrack:{value:de.LocalVideoTrack},_MediaStreamTrack:{value:de.MediaStreamTrack},_LocalAudioTrackPublication:{value:de.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:de.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:de.LocalVideoTrackPublication},_tracksToStop:{value:Fe},signalingRegion:{enumerable:!0,get:function(){return ge.signalingRegion}}}),Te._handleTrackSignalingEvents(),Te}return L(ye,be),ye.prototype._addTrack=function(ge,re,de){var Te=be.prototype._addTrack.call(this,ge,re);return Te&&"disconnected"!==this.state&&this._addLocalTrack(ge,de),Te},ye.prototype._addLocalTrack=function(ge,re){this._signaling.addTrack(ge._trackSender,ge.name,re),this._log.info("Added a new "+D(ge,!0)+":",ge.id),this._log.debug(D(ge,!0)+":",ge)},ye.prototype._removeTrack=function(ge,re){var de=be.prototype._removeTrack.call(this,ge,re);return de&&"disconnected"!==this.state&&(this._signaling.removeTrack(ge._trackSender),this._log.info("Removed a "+D(ge,!0)+":",ge.id),this._log.debug(D(ge,!0)+":",ge)),de},ye.prototype._getTrackEvents=function(){return be.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},ye.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},ye.prototype._handleTrackSignalingEvents=function(){var ge=this,re=this._log;if("disconnected"!==this.state){var de=this._signaling;this.on("trackDisabled",Te),this.on("trackEnabled",Fe),this.on("trackStopped",xe),this._tracks.forEach(function(ze){ge._addLocalTrack(ze,x.PRIORITY_STANDARD),ge._getOrCreateLocalTrackPublication(ze).catch(function(Ze){re.warn("Failed to get or create LocalTrackPublication for "+ze+":",Ze)})});var Ve=this;de.on("stateChanged",function ze(Ze){re.debug("Transitioned to state:",Ze),"disconnected"===Ze?(re.debug("Removing LocalTrack event listeners"),de.removeListener("stateChanged",ze),Ve.removeListener("trackDisabled",Te),Ve.removeListener("trackEnabled",Fe),Ve.removeListener("trackStopped",xe),Ve._tracks.forEach(function(je){var xt=xe(je);xt&&je._trackSender.removeClone(xt._trackTransceiver)}),re.info("LocalParticipant disconnected. Stopping "+Ve._tracksToStop.size+" automatically-acquired LocalTracks"),Ve._tracksToStop.forEach(function(je){je.stop()})):"connected"===Ze&&(re.info("reconnected"),setTimeout(function(){return Ve.emit("reconnected")},0))})}function Te(ze){var Ze=de.getPublication(ze._trackSender);Ze&&(Ze.disable(),re.debug("Disabled the "+D(ze,!0)+":",ze.id))}function Fe(ze){var Ze=de.getPublication(ze._trackSender);Ze&&(Ze.enable(),re.debug("Enabled the "+D(ze,!0)+":",ze.id))}function xe(ze){var Ze=de.getPublication(ze._trackSender);return Ze&&Ze.stop(),Ze}},ye.prototype._getOrCreateLocalTrackPublication=function(ge){var re=pe(this.tracks,ge);if(re)return Promise.resolve(re);var de=this._log,Te=this,Fe=this._signaling.getPublication(ge._trackSender);if(!Fe)return Promise.reject(new Error("Unexpected error: The "+ge+" cannot be published"));function xe(Ve){Te.unpublishTrack(Ve.track)}return new Promise(function(Ve,ze){Fe.on("updated",function Ze(){var je=Fe.error;if(je)return Fe.removeListener("updated",Ze),de.warn("Failed to publish the "+D(ge,!0)+": "+je.message),Te._removeTrack(ge,ge.id),setTimeout(function(){Te.emit("trackPublicationFailed",je,ge)}),void ze(je);if(!Te._tracks.has(ge.id))return Fe.removeListener("updated",Ze),void ze(new Error("The "+ge+" was unpublished"));if(Fe.sid){Fe.removeListener("updated",Ze);var Wt={log:de,LocalAudioTrackPublication:Te._LocalAudioTrackPublication,LocalDataTrackPublication:Te._LocalDataTrackPublication,LocalVideoTrackPublication:Te._LocalVideoTrackPublication};(re=pe(Te.tracks,ge))||(re=U(ge,Fe,xe,Wt),Te._addTrackPublication(re));var ht=Te._signaling.state;("connected"===ht||"connecting"===ht)&&(ge._processorEventObserver&&ge._processorEventObserver.on("event",function(qe){Te._eventObserver.emit("event",{name:qe.name,payload:qe.data,group:"video-processor",level:"info"})}),ge.processedTrack&&(ge._captureFrames(),ge._setSenderMediaStreamTrack(!0))),"connected"===ht&&setTimeout(function(){Te.emit("trackPublished",re)}),Ve(re)}})})},ye.prototype.publishTrack=function(ge,re){var Te,de=pe(this.tracks,ge);if(de)return Promise.resolve(de);re=Object.assign({log:this._log,priority:x.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},re);try{Te=H(ge,re)}catch(Ve){return Promise.reject(Ve)}var Fe=Object.values(x);if(!Fe.includes(re.priority))return Promise.reject(P.INVALID_VALUE("LocalTrackPublishOptions.priority",Fe));var xe=this._addTrack(Te,Te.id,re.priority)||this._tracks.get(Te.id);return this._getOrCreateLocalTrackPublication(xe)},ye.prototype.publishTracks=function(ge){if(!Array.isArray(ge))throw P.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(ge.map(this.publishTrack,this))},ye.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},ye.prototype.setNetworkQualityConfiguration=function(ge){if("object"!=typeof ge||null===ge)throw P.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(re){if(re in ge&&("number"!=typeof ge[re]||isNaN(ge[re])))throw P.INVALID_TYPE("networkQualityConfiguration."+re,"number")}),this._signaling.setNetworkQualityConfiguration(ge),this},ye.prototype.setParameters=function(ge){if(typeof ge<"u"&&"object"!=typeof ge)throw P.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(ge){if(this._signaling.getParameters().adaptiveSimulcast&&ge.maxVideoBitrate)throw P.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(re){if(typeof ge[re]<"u"&&"number"!=typeof ge[re]&&null!==ge[re])throw P.INVALID_TYPE("encodingParameters."+re,"number, null or undefined")})}else null===ge&&(ge={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(ge),this},ye.prototype.unpublishTrack=function(ge){J(ge,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var re=this._tracks.get(ge.id);if(!re)return null;if(this._signaling.getPublication(re._trackSender).publishFailed(new Error("The "+re+" was unpublished")),!(re=this._removeTrack(re,re.id)))return null;var Te=pe(this.tracks,re);return Te&&this._removeTrackPublication(Te),Te},ye.prototype.unpublishTracks=function(ge){var re=this;if(!Array.isArray(ge))throw P.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return ge.reduce(function(de,Te){var Fe=re.unpublishTrack(Te);return Fe?de.concat(Fe):de},[])},ye}(Y(9218));function pe(be,ye){return Array.from(be.values()).find(function(ge){return ge.track===ye||ge.track.mediaStreamTrack===ye})||null}Ce.exports=De},1534:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D,O)||this}return L(U,H),U.prototype._start=function(){H.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},U.prototype.attach=function(){return H.prototype.attach.apply(this,arguments)},U.prototype.detach=function(){return H.prototype.detach.apply(this,arguments)},U}(Y(5366));Ce.exports=ne},7379:(Ce,Oe,Y)=>{"use strict";Ce.exports={LocalAudioTrack:Y(2954),LocalVideoTrack:Y(1),LocalDataTrack:Y(1560)}},2954:(Ce,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(6213);function ne(H,U){var D=new W(H,U);return Object.setPrototypeOf(D,ne.prototype),D}L(ne,W),Ce.exports=ne},1560:(Ce,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(212);function ne(H){var U=new W(H);return Object.setPrototypeOf(U,ne.prototype),U}L(ne,W),Ce.exports=ne},1:(Ce,Oe,Y)=>{"use strict";var L=Y(1905),W=Y(4847);function ne(H,U){var D=new W(H,U);return Object.setPrototypeOf(D,ne.prototype),D}L(ne,W),Ce.exports=ne},1703:function(Ce,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(133),ne=Y(9739),H=ne.buildLogLevels,U=ne.valueToJSON,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),P=0,x=function(J){function ie(te,le,X){var z;X=Object.assign({name:te,log:null,logLevel:D},X),z=J.call(this)||this;var K=String(X.name),se=H(X.logLevel),ve=X.log?X.log.createLog("media",z):new O("media",z,se,X.loggerName);return Object.defineProperties(z,{_instanceId:{value:++P},_log:{value:ve},kind:{enumerable:!0,value:le},name:{enumerable:!0,value:K}}),z}return L(ie,J),ie.prototype.toJSON=function(){return U(this)},ie}(W);Ce.exports=x},6213:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(1534),U=function(D){function O(P,x){return D.call(this,P,x)||this}return L(O,D),O.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},O.prototype.attach=function(P){return(P=D.prototype.attach.call(this,P)).muted=!0,P},O.prototype._end=function(){return D.prototype._end.apply(this,arguments)},O.prototype.disable=function(){return D.prototype.disable.apply(this,arguments)},O.prototype.enable=function(){return D.prototype.enable.apply(this,arguments)},O.prototype.restart=function(){return D.prototype.restart.apply(this,arguments)},O.prototype.stop=function(){return D.prototype.stop.apply(this,arguments)},O}(Y(8275)(W));Ce.exports=U},3925:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x){return H.call(this,D,O,P,x)||this}return L(U,H),U.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ce.exports=ne},212:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(1703),ne=Y(1866),H=function(U){function D(O){var P,J=new(0,(O=Object.assign({DataTrackSender:ne,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},O)).DataTrackSender)(O.maxPacketLifeTime,O.maxRetransmits,O.ordered);return P=U.call(this,J.id,"data",O)||this,Object.defineProperties(P,{_trackSender:{value:J},id:{enumerable:!0,value:J.id},maxPacketLifeTime:{enumerable:!0,value:O.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:O.maxRetransmits},ordered:{enumerable:!0,value:O.ordered},reliable:{enumerable:!0,value:null===O.maxPacketLifeTime&&null===O.maxRetransmits}}),P}return L(D,U),D.prototype.send=function(O){this._trackSender.send(O)},D}(W);Ce.exports=H},5229:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x){return H.call(this,D,O,P,x)||this}return L(U,H),U.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ce.exports=ne},8275:function(Ce,Oe,Y){"use strict";var be,L=this&&this.__extends||(be=function(ye,ge){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,de){re.__proto__=de}||function(re,de){for(var Te in de)Object.prototype.hasOwnProperty.call(de,Te)&&(re[Te]=de[Te])})(ye,ge)},function(ye,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function re(){this.constructor=ye}be(ye,ge),ye.prototype=null===ge?Object.create(ge):(re.prototype=ge.prototype,new re)}),W=Y(1647).getUserMedia,ne=Y(7627),H=ne.guessBrowser,U=ne.isIOSChrome,D=Y(9739),O=D.capitalize,P=D.defer,x=D.isUserMediaTrack,J=D.waitForSometime,ie=D.waitForEvent,te=Y(8701).typeErrors.ILLEGAL_INVOKE,le=Y(9059),X=Y(1741),z=Y(2181),K=Y(6396),se=Y(3830),ve=Y(808);function pe(be){var ye=be._log,ge=be.kind,re={audio:le,video:X}[ge],de=be._dummyEl,Te=be.mediaStreamTrack,Fe=null;function ze(){return Promise.race([ie(Te,"unmute"),J(50)]).then(function(){return function Ve(){var Ue=be.mediaStreamTrack.muted,Ye=be.isStopped&&!!be._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!Fe&&(Ue||Ye||function xe(){return de.play().then(function(){return re(de)}).then(function(ht){return ht?ye.warn("Silence detected"):ye.info("Non-silence detected"),ht}).catch(function(ht){ye.warn("Failed to detect silence:",ht)}).finally(function(){de.pause()})}())})}()}).then(function(ht){return ht&&!Fe&&(Fe=P(),be._restart().finally(function(){de=be._dummyEl,xt(),Te=be.mediaStreamTrack,je(),Fe.resolve(),Fe=null}).catch(function(Ue){ye.error("failed to restart track: ",Ue)})),(Fe&&Fe.promise||Promise.resolve()).finally(function(){return K.resolveDeferred(ge)})}).catch(function(ht){ye.error("error in maybeRestart: "+ht.message)})}function Ze(){var ht=be._log,qe=be.kind;ht.info("Muted"),ht.debug("LocalMediaTrack:",be),K.startDeferred(qe)}function je(){Te.addEventListener("ended",ze),Te.addEventListener("mute",Ze),Te.addEventListener("unmute",ze)}function xt(){Te.removeEventListener("ended",ze),Te.removeEventListener("mute",Ze),Te.removeEventListener("unmute",ze)}var Wt=function(ht){return!!ht&&ze()};return z.onVisibilityChange(1,Wt),je(),function(){z.offVisibilityChange(1,Wt),xt()}}Ce.exports=function De(be){return function(ye){function ge(re,de){var Te=this,Fe=("safari"===H()||U())&&x(re)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;de=Object.assign({getUserMedia:W,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:Fe,gUMSilentTrackWorkaround:se},de);var xe=new ve(re),Ve=xe.kind;return Te=ye.call(this,xe,de)||this,Object.defineProperties(Te,{_constraints:{value:"object"==typeof de[Ve]?de[Ve]:{},writable:!0},_getUserMedia:{value:de.getUserMedia},_gUMSilentTrackWorkaround:{value:de.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:de.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:de.isCreatedByCreateLocalTracks},_trackSender:{value:xe},id:{enumerable:!0,value:xe.id},isEnabled:{enumerable:!0,get:function(){return xe.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===xe.readyState}}}),Te._workaroundWebKitBug1208516&&(Te._workaroundWebKitBug1208516Cleanup=pe(Te)),Te}return L(ge,ye),ge.prototype._end=function(){this._didCallEnd||(ye.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},ge.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),ye.prototype._initialize.call(this)},ge.prototype._reacquireTrack=function(re){var de,Fe=this._getUserMedia,xe=this._gUMSilentTrackWorkaround,Ve=this._log,ze=this.mediaStreamTrack.kind;Ve.info("Re-acquiring the MediaStreamTrack"),Ve.debug("Constraints:",re);var Ze=Object.assign({audio:!1,video:!1},((de={})[ze]=re,de));return(this._workaroundWebKitBug1208516Cleanup?xe(Ve,Fe,Ze):Fe(Ze)).then(function(xt){return xt.getTracks()[0]})},ge.prototype._restart=function(re){var de=this,Te=this._log;return re=re||this._constraints,this._stop(),this._reacquireTrack(re).catch(function(Fe){throw Te.error("Failed to re-acquire the MediaStreamTrack:",{error:Fe,constraints:re}),Fe}).then(function(Fe){return Te.info("Re-acquired the MediaStreamTrack"),Te.debug("MediaStreamTrack:",Fe),de._constraints=Object.assign({},re),de._setMediaStreamTrack(Fe)})},ge.prototype._setMediaStreamTrack=function(re){var de=this;return re.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){de._unprocessedTrack=re}):this._trackSender.setMediaStreamTrack(re).catch(function(Te){de._log.warn("setMediaStreamTrack failed:",{error:Te,mediaStreamTrack:re})})).then(function(){de._initialize(),de._getAllAttachedElements().forEach(function(Te){return de._attach(Te)})})},ge.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},ge.prototype.enable=function(re){return(re="boolean"!=typeof re||re)!==this.mediaStreamTrack.enabled&&(this._log.info((re?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=re,this.emit(re?"enabled":"disabled",this)),this},ge.prototype.disable=function(){return this.enable(!1)},ge.prototype.restart=function(re){var de=this,Te=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(te("restart","can only be called on a Local"+O(Te)+"Track that is created using createLocalTracks or createLocal"+O(Te)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var Fe=this._restart(re);return this._workaroundWebKitBug1208516&&(Fe=Fe.finally(function(){de._workaroundWebKitBug1208516Cleanup=pe(de)})),Fe},ge.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},ge}(be)}},3335:function(Ce,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(P,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=P}O(P,x),P.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(9222),ne=Y(8701),H=ne.typeErrors,U=ne.trackPriority,D=function(O){function P(x,J,ie,te){var le=O.call(this,J.name,x.sid,te)||this;return Object.defineProperties(le,{_reemitTrackEvent:{value:function(){return le.emit(le.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:x},_unpublish:{value:ie},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:J.kind},priority:{enumerable:!0,get:function(){return x.updatedPriority}},track:{enumerable:!0,value:J}}),J.on("disabled",le._reemitTrackEvent),J.on("enabled",le._reemitTrackEvent),le}return L(P,O),P.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},P.prototype.setPriority=function(x){var J=Object.values(U);if(!J.includes(x))throw H.INVALID_VALUE("priority",J);return this._signaling.setPriority(x),this},P.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},P}(W);Ce.exports=D},4847:function(Ce,Oe,Y){"use strict";var te,L=this&&this.__extends||(te=function(le,X){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,K){z.__proto__=K}||function(z,K){for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&(z[se]=K[se])})(le,X)},function(le,X){if("function"!=typeof X&&null!==X)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function z(){this.constructor=le}te(le,X),le.prototype=null===X?Object.create(X):(z.prototype=X.prototype,new z)}),W=Y(7627),ne=W.guessBrowser,H=W.isIOSChrome,U=Y(1741),D=Y(8275),O=Y(4332),P=Y(9739).isUserMediaTrack,J=function(te){function le(X,z){var K=this;return z=Object.assign({workaroundSilentLocalVideo:("safari"===ne()||H())&&P(X)&&typeof document<"u"&&"function"==typeof document.createElement},z),K=te.call(this,X,z)||this,Object.defineProperties(K,{_workaroundSilentLocalVideo:{value:z.workaroundSilentLocalVideo?ie:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),K._workaroundSilentLocalVideo&&(K._workaroundSilentLocalVideoCleanup=K._workaroundSilentLocalVideo(K,document)),K}return L(le,te),le.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},le.prototype._checkIfCanCaptureFrames=function(){return te.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},le.prototype._end=function(){return te.prototype._end.apply(this,arguments)},le.prototype._setSenderMediaStreamTrack=function(X){var z=this,K=this.mediaStreamTrack,se=X?this.processedTrack:K;return this._trackSender.setMediaStreamTrack(se).catch(function(ve){return z._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:ve,mediaStreamTrack:se})}).then(function(){z._unprocessedTrack=X?K:null})},le.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var X=te.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),X):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},le.prototype.removeProcessor=function(){var X=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var z=te.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return X._updateElementsMediaStreamTrack()}),z},le.prototype.disable=function(){var X=te.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),X},le.prototype.enable=function(X){void 0===X&&(X=!0);var z=te.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=X,X&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),z},le.prototype.restart=function(){var X=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var z=te.prototype.restart.apply(this,arguments);return this.processor&&z.then(function(){X._restartProcessor()}),this._workaroundSilentLocalVideo&&z.finally(function(){X._workaroundSilentLocalVideoCleanup=X._workaroundSilentLocalVideo(X,document)}),z},le.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),te.prototype.stop.apply(this,arguments)},le}(D(O));function ie(te,le){var X=te._log,z=te._dummyEl,K=te.mediaStreamTrack;function se(){!te.isEnabled||(X.info("Unmuted, checking silence"),z.play().then(function(){return U(z,le)}).then(function(ve){if(ve)return X.warn("Silence detected, restarting"),te._stop(),te._restart();X.info("Non-silent frames detected, so no need to restart")}).catch(function(ve){X.warn("Failed to detect silence and restart:",ve)}).finally(function(){(z=te._dummyEl).paused||z.pause(),K.removeEventListener("unmute",se),(K=te.mediaStreamTrack).addEventListener("unmute",se)}))}return K.addEventListener("unmute",se),function(){K.removeEventListener("unmute",se)}}Ce.exports=J},9565:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x){return H.call(this,D,O,P,x)||this}return L(U,H),U.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(3335));Ce.exports=ne},5366:function(Ce,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=Y(7627),ne=W.guessBrowser,H=W.isIOSChrome,U=Y(1647).MediaStream,D=Y(9739),O=D.waitForEvent,P=D.waitForSometime,x=Y(6396),ie=function(X){function z(K,se){var ve=this;se=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===ne()||H())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},se),ve=X.call(this,K.id,K.kind,se)||this;var De=!1;return se=Object.assign({MediaStream:U},se),Object.defineProperties(ve,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return De},set:function(pe){De=pe}},_playPausedElementsIfNotBackgrounded:{value:se.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:se.workaroundWebKitBug212780||se.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:se.MediaStream},isStarted:{enumerable:!0,get:function(){return De}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||K.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),ve._initialize(),ve}return L(z,X),z.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},z.prototype._initialize=function(){var K=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function se(){K._end(),K.mediaStreamTrack.removeEventListener("ended",se)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},z.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},z.prototype.attach=function(K){var se=this;if("string"==typeof K?K=this._selectElement(K):K||(K=this._createElement()),this._log.debug("Attempting to attach to element:",K),K=this._attach(K),this._shouldShimAttachedElements&&!this._elShims.has(K)){var ve=this._playPausedElementsIfNotBackgrounded?function(){return function te(X,z){var K=X.tagName.toLowerCase();z.warn("Unintentionally paused:",X),Promise.race([O(document,"visibilitychange"),P(1e3)]).then(function(){"visible"===document.visibilityState&&x.whenResolved("audio").then(function(){return z.info("Playing unintentionally paused <"+K+"> element"),z.debug("Element:",X),X.play()}).then(function(){z.info("Successfully played unintentionally paused <"+K+"> element"),z.debug("Element:",X)}).catch(function(se){z.warn("Error while playing unintentionally paused <"+K+"> element:",{error:se,el:X})})})}(K,se._log)}:null;this._elShims.set(K,function le(X,z){void 0===z&&(z=null);var K=X.pause,se=X.play,ve=!1;X.pause=function(){return ve=!0,K.call(X)},X.play=function(){return ve=!1,se.call(X)};var De=z?function(){ve||z()}:null;return De&&X.addEventListener("pause",De),{pausedIntentionally:function(){return ve},unShim:function(){X.pause=K,X.play=se,De&&X.removeEventListener("pause",De)}}}(K,ve))}return K},z.prototype._attach=function(K,se){void 0===se&&(se=this.processedTrack||this.mediaStreamTrack);var ve=K.srcObject;return ve instanceof this._MediaStream||(ve=new this._MediaStream),ve["audio"===se.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(pe){ve.removeTrack(pe)}),ve.addTrack(se),K.srcObject=ve,K.autoplay=!0,K.playsInline=!0,this._attachments.has(K)||this._attachments.add(K),K},z.prototype._selectElement=function(K){var se=document.querySelector(K);if(!se)throw new Error("Selector matched no element: "+K);return se},z.prototype._updateElementsMediaStreamTrack=function(){var K=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(se){return K._attach(se)})},z.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},z.prototype.detach=function(K){var se;return se="string"==typeof K?[this._selectElement(K)]:K?[K]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",se),this._detachElements(se),K?se[0]:se},z.prototype._detachElements=function(K){return K.map(this._detachElement.bind(this))},z.prototype._detachElement=function(K){if(!this._attachments.has(K))return K;var se=K.srcObject;return se instanceof this._MediaStream&&se.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(K),this._shouldShimAttachedElements&&this._elShims.has(K)&&(this._elShims.get(K).unShim(),this._elShims.delete(K)),K},z.prototype._getAllAttachedElements=function(){var K=[];return this._attachments.forEach(function(se){K.push(se)}),K},z}(Y(1703));Ce.exports=ie},3501:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D,O)||this}return L(U,H),U}(Y(1639));Ce.exports=ne},8797:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(1534),U=function(D){function O(P,x,J,ie,te,le,X){return D.call(this,P,x,J,ie,te,le,X)||this}return L(O,D),O.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},O.prototype.setPriority=function(P){return D.prototype.setPriority.call(this,P)},O}(Y(1628)(W));Ce.exports=U},8661:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D,O)||this}return L(U,H),U.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ce.exports=ne},5606:function(Ce,Oe,Y){"use strict";var x,L=this&&this.__extends||(x=function(J,ie){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,le){te.__proto__=le}||function(te,le){for(var X in le)Object.prototype.hasOwnProperty.call(le,X)&&(te[X]=le[X])})(J,ie)},function(J,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function te(){this.constructor=J}x(J,ie),J.prototype=null===ie?Object.create(ie):(te.prototype=ie.prototype,new te)}),W=this&&this.__read||function(x,J){var ie="function"==typeof Symbol&&x[Symbol.iterator];if(!ie)return x;var le,z,te=ie.call(x),X=[];try{for(;(void 0===J||J-- >0)&&!(le=te.next()).done;)X.push(le.value)}catch(K){z={error:K}}finally{try{le&&!le.done&&(ie=te.return)&&ie.call(te)}finally{if(z)throw z.error}}return X},ne=this&&this.__spreadArray||function(x,J){for(var ie=0,te=J.length,le=x.length;ie<te;ie++,le++)x[le]=J[ie];return x},H=Y(1703),U=Y(8701),D=U.typeErrors,O=U.trackPriority,P=function(x){function J(ie,te,le){var X=x.call(this,te.id,"data",le)||this;return Object.defineProperties(X,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:te.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:te.maxRetransmits},ordered:{enumerable:!0,value:te.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===te.maxPacketLifeTime&&null===te.maxRetransmits},sid:{enumerable:!0,value:ie}}),te.on("message",function(z){X.emit("message",z,X)}),X}return L(J,x),J.prototype.setPriority=function(ie){var te=ne([null],W(Object.values(O)));if(!te.includes(ie))throw D.INVALID_VALUE("priority",te);return this._priority=ie,this},J.prototype._setEnabled=function(){},J.prototype._setSwitchedOff=function(ie){this._isSwitchedOff!==ie&&(this._isSwitchedOff=ie,this.emit(ie?"switchedOff":"switchedOn",this))},J}(H);Ce.exports=P},8459:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D,O)||this}return L(U,H),U.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ce.exports=ne},1628:function(Ce,Oe,Y){"use strict";var le,L=this&&this.__extends||(le=function(X,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,se){K.__proto__=se}||function(K,se){for(var ve in se)Object.prototype.hasOwnProperty.call(se,ve)&&(K[ve]=se[ve])})(X,z)},function(X,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function K(){this.constructor=X}le(X,z),X.prototype=null===z?Object.create(z):(K.prototype=z.prototype,new K)}),W=this&&this.__read||function(le,X){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var se,De,K=z.call(le),ve=[];try{for(;(void 0===X||X-- >0)&&!(se=K.next()).done;)ve.push(se.value)}catch(pe){De={error:pe}}finally{try{se&&!se.done&&(z=K.return)&&z.call(K)}finally{if(De)throw De.error}}return ve},ne=this&&this.__spreadArray||function(le,X){for(var z=0,K=X.length,se=le.length;z<K;z++,se++)le[se]=X[z];return le},H=Y(8701),U=H.typeErrors,D=H.trackPriority,O=Y(7627),P=O.guessBrowser,x=O.isIOSChrome,J=Y(2181);Ce.exports=function ie(le){return function(X){function z(K,se,ve,De,pe,be,ye){var ge=this;return ye=Object.assign({workaroundWebKitBug212780:("safari"===P()||x())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ye),ge=X.call(this,se,ye)||this,Object.defineProperties(ge,{_isEnabled:{value:ve,writable:!0},_isSwitchedOff:{value:De,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:pe},_setRenderHint:{value:function(re){ge._log.debug("updating render hint:",re),be(re)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:K},_workaroundWebKitBug212780:{value:ye.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),ge}return L(z,X),z.prototype.setPriority=function(K){var se=ne([null],W(Object.values(D)));if(!se.includes(K))throw U.INVALID_VALUE("priority",se);return this._priority!==K&&(this._priority=K,this._setPriority(K)),this},z.prototype._setEnabled=function(K){this._isEnabled!==K&&(this._isEnabled=K,this.emit(this._isEnabled?"enabled":"disabled",this))},z.prototype._setSwitchedOff=function(K){this._isSwitchedOff!==K&&(this._isSwitchedOff=K,this.emit(K?"switchedOff":"switchedOn",this))},z.prototype.attach=function(K){var se=X.prototype.attach.call(this,K);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function te(le){var X=le._log,z=le.kind;function K(se){!se||le._attachments.forEach(function(ve){var De=le._elShims.get(ve);ve.paused&&De&&!De.pausedIntentionally()&&(X.info("Playing inadvertently paused <"+z+"> element"),X.debug("Element:",ve),X.debug("RemoteMediaTrack:",le),ve.play().then(function(){X.info("Successfully played inadvertently paused <"+z+"> element"),X.debug("Element:",ve),X.debug("RemoteMediaTrack:",le)}).catch(function(be){X.warn("Error while playing inadvertently paused <"+z+"> element:",{err:be,el:ve,remoteMediaTrack:le})}))})}return J.onVisibilityChange(2,K),function(){J.offVisibilityChange(2,K)}}(this)),se},z.prototype.detach=function(K){var se=X.prototype.detach.call(this,K);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),se},z}(le)}},1521:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D.name,D.sid,O)||this;Object.defineProperties(P,{_signaling:{value:D},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return D.isEnabled}},kind:{enumerable:!0,value:D.kind},publishPriority:{enumerable:!0,get:function(){return D.priority}},track:{enumerable:!0,get:function(){return this._track}}});var x=D.error,J=D.isEnabled,ie=D.isSwitchedOff,te=D.priority;return D.on("updated",function(){if(x!==D.error)return x=D.error,void P.emit("subscriptionFailed",D.error);J!==D.isEnabled&&(J=D.isEnabled,P.track&&P.track._setEnabled(D.isEnabled),P.emit(D.isEnabled?"trackEnabled":"trackDisabled")),ie!==D.isSwitchedOff&&(P._log.debug(P.trackSid+": "+(ie?"OFF":"ON")+" => "+(D.isSwitchedOff?"OFF":"ON")),ie=D.isSwitchedOff,P.track?(P.track._setSwitchedOff(D.isSwitchedOff),P.emit(ie?"trackSwitchedOff":"trackSwitchedOn",P.track)):ie&&P._log.warn("Track was not subscribed when switched Off.")),te!==D.priority&&P.emit("publishPriorityChanged",te=D.priority)}),P}return L(U,H),U.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U.prototype._subscribed=function(D){!this._track&&D&&(this._track=D,this.emit("subscribed",D))},U.prototype._unsubscribe=function(){if(this._track){var D=this._track;this._track=null,this.emit("unsubscribed",D)}},U}(Y(9222));Ce.exports=ne},1629:function(Ce,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(be){pe={error:be}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},ne=Y(1628),H=Y(4332),U=Y(2181),D=Y(5318).NullObserver,O=Y(6543),J=function(X){function z(K,se,ve,De,pe,be,ye){var ge=this;return ye=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},ye),ye=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==ye.clientTrackSwitchOffControl?D:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==ye.contentPreferencesMode?D:ResizeObserver},ye),ge=X.call(this,K,se,ve,De,pe,be,ye)||this,Object.defineProperties(ge,{_enableDocumentVisibilityTurnOff:{value:!0===ye.enableDocumentVisibilityTurnOff&&"auto"===ye.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:ye.clientTrackSwitchOffControl},_contentPreferencesMode:{value:ye.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new O(function(){ge._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new ye.ResizeObserver(function(re){re.find(function(Te){return!ge._invisibleElements.has(Te.target)})&&le(ge)})},_intersectionObserver:{value:new ye.IntersectionObserver(function(re){var de=!1;re.forEach(function(Te){!ge._invisibleElements.has(Te.target)!==Te.isIntersecting&&(Te.isIntersecting?(ge._log.debug("intersectionObserver detected: Off => On"),ge._invisibleElements.delete(Te.target)):(ge._log.debug("intersectionObserver detected: On => Off"),ge._invisibleElements.add(Te.target)),de=!0)}),de&&(te(ge),le(ge))},{threshold:.25})}}),ge}return L(z,X),z.prototype._start=function(K){var se=X.prototype._start.call(this,K);return te(this),se},z.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},z.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},z.prototype.setContentPreferences=function(K){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return K.renderDimensions&&this._setRenderHint({renderDimensions:K.renderDimensions}),this},z.prototype._unObservePip=function(K){var se=this._elToPipCallbacks.get(K);se&&(K.removeEventListener("enterpictureinpicture",se.onEnterPip),K.removeEventListener("leavepictureinpicture",se.onLeavePip),this._elToPipCallbacks.delete(K))},z.prototype._observePip=function(K){var se=this;if(!this._elToPipCallbacks.get(K)){var De=function(ye){return se._onEnterPip(ye,K)},pe=function(ye){return se._onLeavePip(ye,K)};K.addEventListener("enterpictureinpicture",De),K.addEventListener("leavepictureinpicture",pe),this._elToPipCallbacks.set(K,{onEnterPip:De,onLeavePip:pe,onResizePip:function(ye){return se._onResizePip(ye,K)}})}},z.prototype._onEnterPip=function(K,se){this._log.debug("onEnterPip");var ve=K.pictureInPictureWindow;this._elToPipWindows.set(se,ve);var De=this._elToPipCallbacks.get(se).onResizePip;ve.addEventListener("resize",De),te(this)},z.prototype._onLeavePip=function(K,se){this._log.debug("onLeavePip"),this._elToPipWindows.delete(se);var ve=this._elToPipCallbacks.get(se).onResizePip;K.pictureInPictureWindow.removeEventListener("resize",ve),te(this)},z.prototype._onResizePip=function(){le(this)},z.prototype.attach=function(K){var se=X.prototype.attach.call(this,K);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(se),this._intersectionObserver.observe(se),this._resizeObserver.observe(se),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function ie(X){function z(){te(X)}return U.onVisibilityChange(1,z),function(){U.offVisibilityChange(1,z)}}(this)),this._observePip(se),se},z.prototype.detach=function(K){var se=this,ve=X.prototype.detach.call(this,K);return(Array.isArray(ve)?ve:[ve]).forEach(function(pe){se._intersectionObserver.unobserve(pe),se._resizeObserver.unobserve(pe),se._invisibleElements.delete(pe),se._unObservePip(pe)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),te(this),le(this),ve},z.prototype.addProcessor=function(){return X.prototype.addProcessor.apply(this,arguments)},z.prototype.removeProcessor=function(){return X.prototype.removeProcessor.apply(this,arguments)},z.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},z.prototype.setPriority=function(K){return X.prototype.setPriority.call(this,K)},z}(ne(H));function te(X){if("auto"===X._clientTrackSwitchOffControl){var z=X._getAllAttachedElements().filter(function(ve){return!X._invisibleElements.has(ve)});!0==(X._getAllAttachedElements().filter(function(ve){return X._elToPipWindows.has(ve)}).length>0||"visible"===document.visibilityState&&z.length>0)?(X._turnOffTimer.clear(),X._setRenderHint({enabled:!0})):X._turnOffTimer.isSet||X._turnOffTimer.start()}}function le(X){if("auto"===X._contentPreferencesMode){var z=X._getAllAttachedElements().filter(function(ge){return!X._invisibleElements.has(ge)}),K=X._getAllAttachedElements().map(function(ge){var re=X._elToPipWindows.get(ge);return re?{clientHeight:re.height,clientWidth:re.width}:{clientHeight:0,clientWidth:0}}),se=z.concat(K);if(se.length>0){var De=W(se.sort(function(ge,re){return re.clientHeight+re.clientWidth-ge.clientHeight-ge.clientWidth-1}),1)[0];X._setRenderHint({renderDimensions:{height:De.clientHeight,width:De.clientWidth}})}}}Ce.exports=J},1768:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D,O)||this}return L(U,H),U.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},U}(Y(1521));Ce.exports=ne},808:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=this&&this.__read||function(U,D){var O="function"==typeof Symbol&&U[Symbol.iterator];if(!O)return U;var x,ie,P=O.call(U),J=[];try{for(;(void 0===D||D-- >0)&&!(x=P.next()).done;)J.push(x.value)}catch(te){ie={error:te}}finally{try{x&&!x.done&&(O=P.return)&&O.call(P)}finally{if(ie)throw ie.error}}return J},H=function(U){function D(O){var P=U.call(this,O.id,O)||this;return Object.defineProperties(P,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),P}return L(D,U),D.prototype.clone=function(){var O=new D(this.track.clone());return this._clones.add(O),O},D.prototype.removeClone=function(O){this._clones.delete(O)},D.prototype.setMediaStreamTrack=function(O){var P=this,x=Array.from(this._clones),J=Array.from(this._senders);return Promise.all(x.map(function(ie){return ie.setMediaStreamTrack(O.clone())}).concat(J.map(function(ie){return P._replaceTrack(ie,O)}))).finally(function(){P._track=O})},D.prototype.addSender=function(O,P){return this._senders.add(O),P&&this._senderToPublisherHintCallbacks.set(O,P),this},D.prototype.removeSender=function(O){return this._senders.delete(O),this._senderToPublisherHintCallbacks.delete(O),this},D.prototype.setPublisherHint=function(O){var x=W(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return x?x(O):Promise.resolve("COULD_NOT_APPLY_HINT")},D.prototype._replaceTrack=function(O,P){var x=this;return O.replaceTrack(P).then(function(J){return x.setPublisherHint(null).catch(function(){}),x.emit("replaced"),J})},D}(Y(1639));Ce.exports=H},9222:function(Ce,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(133),ne=Y(9739),H=ne.buildLogLevels,U=ne.valueToJSON,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),P=0,x=function(J){function ie(te,le,X){var z=J.call(this)||this;X=Object.assign({logLevel:D},X);var K=H(X.logLevel);return Object.defineProperties(z,{_instanceId:{value:P++},_log:{value:X.log?X.log.createLog("default",z):new O("default",z,K,X.loggerName)},trackName:{enumerable:!0,value:te},trackSid:{enumerable:!0,value:le}}),z}return L(ie,J),ie.prototype.toJSON=function(){return U(this)},ie.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},ie}(W);Ce.exports=x},1639:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,O.kind)||this;return Object.defineProperties(P,{_track:{value:O,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),P}return L(U,H),U.prototype.stop=function(){this.track.stop(),H.prototype.stop.call(this)},U}(Y(4605));Ce.exports=ne},9062:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(9069).EventEmitter,ne=Y(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,H=function(U){function D(O){var P=U.call(this)||this;return Object.defineProperties(P,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:O},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),P.on("add",function(x){P._lastStatsSaveTime=Date.now(),P._lastStatsPublishTime=Date.now(),P._processorInfo=x,P._stats=[],P._reemitEvent("add",P._getEventData())}),P.on("remove",function(){var x=P._getEventData();P._lastStatsSaveTime=null,P._lastStatsPublishTime=null,P._processorInfo=null,P._stats=null,P._reemitEvent("remove",x)}),P.on("start",function(){P._reemitEvent("start",P._getEventData())}),P.on("stop",function(x){P._reemitEvent("stop",Object.assign({message:x},P._getEventData()))}),P.on("stats",function(){return P._maybeEmitStats()}),P}return L(D,U),D.prototype._getEventData=function(){if(!this._processorInfo)return{};var O=this._processorInfo,P=O.processor,le={captureHeight:O.captureHeight,captureWidth:O.captureWidth,inputFrameRate:O.inputFrameRate,isRemoteVideoTrack:O.isRemoteVideoTrack};return le.name=P._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(X){var z=P["_"+X];typeof z<"u"&&(le[X]=z)}),Object.keys(le).forEach(function(X){var z=le[X];"boolean"==typeof z&&(le[X]=z?"true":"false")}),le},D.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var O=this._processorInfo.processor._benchmark;if(O){var P=Date.now();if(!(P-this._lastStatsSaveTime<1e3)){var x={outputFrameRate:O.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(te){x[te]=O.getAverageDelay(te)}),this._lastStatsSaveTime=P,this._stats.push(x),!(P-this._lastStatsPublishTime<ne)){this._lastStatsPublishTime=P;var ie=this._stats.splice(0).reduce(function(te,le,X){return Object.keys(x).forEach(function(z){te[z]||(te[z]=0),te[z]=(te[z]*X+le[z])/(X+1)}),te},{});Object.keys(ie).forEach(function(te){ie[te]=parseFloat(ie[te].toFixed(2))}),this._reemitEvent("stats",Object.assign({},ie,this._getEventData()))}}}}},D.prototype._reemitEvent=function(O,P){this._log.debug("VideoProcessor:"+O,P),this.emit("event",{name:O,data:P})},D}(W);Ce.exports=H},4332:function(Ce,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(P,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=P}O(P,x),P.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(5366),ne=Y(9062),H=Y(8701).DEFAULT_FRAME_RATE,U=function(O){function P(x,J){var ie=O.call(this,x,J)||this;return Object.defineProperties(ie,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),ie._processorEventObserver=new(J.VideoProcessorEventObserver||ne)(ie._log),ie}return L(P,O),P.prototype._checkIfCanCaptureFrames=function(x){void 0===x&&(x=!1);var J=!0,ie="",te=this.mediaStreamTrack;return te.enabled||(J=!1,ie="MediaStreamTrack is disabled"),"ended"===te.readyState&&(J=!1,ie="MediaStreamTrack is ended"),this.processor||(J=!1,ie="VideoProcessor not detected."),!this._attachments.size&&!x&&(J=!1,ie="VideoTrack is not publishing and there is no attached element."),ie&&this._log.debug(ie),{canCaptureFrames:J,message:ie}},P.prototype._captureFrames=function(){var x=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var ie,J=Date.now();this._dummyEl.play().then(function(){var te=function(X){clearTimeout(x._captureTimeoutId);var z=x.mediaStreamTrack.getSettings().frameRate,ve=Math.floor(1e3/(void 0===z?H:z))-ie;(ve<0||"number"!=typeof ie)&&(ve=0),x._captureTimeoutId=setTimeout(X,ve)},le=function(){var X=x._checkIfCanCaptureFrames();if(!X.canCaptureFrames)return x._isCapturing=!1,x._processorEventObserver.emit("stop",X.message),void x._log.debug("Cannot capture frames. Stopping capturing frames.");J=Date.now();var z=x.mediaStreamTrack.getSettings(),K=z.width,se=void 0===K?0:K,ve=z.height,De=void 0===ve?0:ve;x._inputFrame.width!==se&&(x._inputFrame.width=se,x._inputFrame.height=De,x._outputFrame&&(x._outputFrame.width=se,x._outputFrame.height=De)),x._inputFrame.getContext("2d").drawImage(x._dummyEl,0,0,se,De);var pe=null;try{pe=x.processor.processFrame(x._inputFrame,x._outputFrame)}catch(be){x._log.debug("Exception detected after calling processFrame.",be)}(pe instanceof Promise?pe:Promise.resolve(pe)).then(function(){x._outputFrame&&(x.processedTrack.requestFrame(),x._processorEventObserver.emit("stats"))}).finally(function(){ie=Date.now()-J,te(le)})};te(le)}).catch(function(te){return x._log.error("Video element cannot be played",{error:te,track:x})})}},P.prototype._initialize=function(){var x=this;O.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){D(x,x._dummyEl)&&(x.dimensions.width=x._dummyEl.videoWidth,x.dimensions.height=x._dummyEl.videoHeight)},this._dummyEl.onresize=function(){D(x,x._dummyEl)&&(x.dimensions.width=x._dummyEl.videoWidth,x.dimensions.height=x._dummyEl.videoHeight,x.isStarted&&(x._log.debug("Dimensions changed:",x.dimensions),x.emit(P.DIMENSIONS_CHANGED,x)))})},P.prototype._restartProcessor=function(){var x=this.processor;x&&(this.removeProcessor(x),this.addProcessor(x))},P.prototype._start=function(x){return this.dimensions.width=x.videoWidth,this.dimensions.height=x.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(P.DIMENSIONS_CHANGED,this),O.prototype._start.call(this,x)},P.prototype.addProcessor=function(x){var J=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!x||"function"!=typeof x.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",x),this._unmuteHandler||(this._unmuteHandler=function(){J._log.debug("mediaStreamTrack unmuted"),J.processedTrack.muted&&(J._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),J._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var ie=this.mediaStreamTrack.getSettings(),te=ie.width,le=void 0===te?0:te,X=ie.height,z=void 0===X?0:X,K=ie.frameRate,se=void 0===K?H:K;return this._inputFrame=new OffscreenCanvas(le,z),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=le,this._outputFrame.height=z,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=x,this._processorEventObserver.emit("add",{processor:x,captureHeight:z,captureWidth:le,inputFrameRate:se,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},P.prototype.attach=function(){var x=O.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),x},P.prototype.detach=function(){return O.prototype.detach.apply(this,arguments)},P.prototype.removeProcessor=function(x){if(!x)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(x!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",x),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},P}(W);function D(O,P){return O.dimensions.width!==P.videoWidth||O.dimensions.height!==P.videoHeight}U.DIMENSIONS_CHANGED="dimensionsChanged",Ce.exports=U},4621:function(Ce,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=this&&this.__read||function(J,ie){var te="function"==typeof Symbol&&J[Symbol.iterator];if(!te)return J;var X,K,le=te.call(J),z=[];try{for(;(void 0===ie||ie-- >0)&&!(X=le.next()).done;)z.push(X.value)}catch(se){K={error:se}}finally{try{X&&!X.done&&(te=le.return)&&te.call(le)}finally{if(K)throw K.error}}return z},ne=Y(9069).EventEmitter,H=Y(8701),U=H.DEFAULT_NQ_LEVEL_LOCAL,D=H.DEFAULT_NQ_LEVEL_REMOTE,O=H.MAX_NQ_LEVEL,P=Y(9739).inRange,x=function(J){function ie(te){var le=J.call(this)||this;return te=Object.assign({local:U,remote:D},te),Object.defineProperties(le,{local:{value:P(te.local,U,O)?te.local:U,writable:!0},remote:{value:P(te.remote,D,O)?te.remote:D,writable:!0}}),le}return L(ie,J),ie.prototype.update=function(te){var le=this;te=Object.assign({local:this.local,remote:this.remote},te),[["local",U,3],["remote",D,3]].forEach(function(X){var z=W(X,3),K=z[0],se=z[1];le[K]="number"==typeof te[K]&&P(te[K],se,z[2])?te[K]:se})},ie}(ne);Ce.exports=x},9218:function(Ce,Oe,Y){"use strict";var ve,L=this&&this.__extends||(ve=function(De,pe){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,ye){be.__proto__=ye}||function(be,ye){for(var ge in ye)Object.prototype.hasOwnProperty.call(ye,ge)&&(be[ge]=ye[ge])})(De,pe)},function(De,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function be(){this.constructor=De}ve(De,pe),De.prototype=null===pe?Object.create(pe):(be.prototype=pe.prototype,new be)}),W=this&&this.__read||function(ve,De){var pe="function"==typeof Symbol&&ve[Symbol.iterator];if(!pe)return ve;var ye,re,be=pe.call(ve),ge=[];try{for(;(void 0===De||De-- >0)&&!(ye=be.next()).done;)ge.push(ye.value)}catch(de){re={error:de}}finally{try{ye&&!ye.done&&(pe=be.return)&&pe.call(be)}finally{if(re)throw re.error}}return ge},ne=this&&this.__spreadArray||function(ve,De){for(var pe=0,be=De.length,ye=ve.length;pe<be;pe++,ye++)ve[ye]=De[pe];return ve},H=Y(133),U=Y(8797),D=Y(8661),O=Y(5606),P=Y(8459),x=Y(1629),J=Y(1768),ie=Y(9739),te=0,le=function(ve){function De(pe,be){var ye=ve.call(this)||this,ge=function X(ve){var De=ve.map(function(ge){return[ge.id,ge]}),pe=De.filter(function(ge){return"audio"===ge[1].kind}),be=De.filter(function(ge){return"video"===ge[1].kind}),ye=De.filter(function(ge){return"data"===ge[1].kind});return{audioTracks:pe,dataTracks:ye,tracks:De,videoTracks:be}}((be=Object.assign({RemoteAudioTrack:U,RemoteAudioTrackPublication:D,RemoteDataTrack:O,RemoteDataTrackPublication:P,RemoteVideoTrack:x,RemoteVideoTrackPublication:J,tracks:[]},be)).tracks),re=be.log.createLog("default",ye),de=new Map(ge.audioTracks),Te=new Map(ge.dataTracks),Fe=new Map(ge.tracks),xe=new Map(ge.videoTracks);return Object.defineProperties(ye,{_RemoteAudioTrack:{value:be.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:be.RemoteAudioTrackPublication},_RemoteDataTrack:{value:be.RemoteDataTrack},_RemoteDataTrackPublication:{value:be.RemoteDataTrackPublication},_RemoteVideoTrack:{value:be.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:be.RemoteVideoTrackPublication},_audioTracks:{value:de},_dataTracks:{value:Te},_instanceId:{value:++te},_clientTrackSwitchOffControl:{value:be.clientTrackSwitchOffControl},_contentPreferencesMode:{value:be.contentPreferencesMode},_log:{value:re},_signaling:{value:pe},_tracks:{value:Fe},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:xe},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return pe.identity}},networkQualityLevel:{enumerable:!0,get:function(){return pe.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return pe.networkQualityStats}},sid:{enumerable:!0,get:function(){return pe.sid}},state:{enumerable:!0,get:function(){return pe.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),ye._tracks.forEach(K.bind(null,ye)),pe.on("networkQualityLevelChanged",function(){return ye.emit("networkQualityLevelChanged",ye.networkQualityLevel,ye.networkQualityStats&&(ye.networkQualityStats.audio||ye.networkQualityStats.video)?ye.networkQualityStats:null)}),function z(ve,De){var pe=ve._log;"disconnected"!==ve.state&&De.on("stateChanged",function be(ye){pe.debug("Transitioned to state:",ye),ve.emit(ye,ve),"disconnected"===ye&&(pe.debug("Removing Track event reemitters"),De.removeListener("stateChanged",be),ve._tracks.forEach(function(ge){var re=ve._trackEventReemitters.get(ge.id);ge&&re&&re.forEach(function(de,Te){ge.removeListener(Te,de)})}),De.tracks.forEach(function(ge){var re=ve._tracks.get(ge.id),de=ve._trackEventReemitters.get(ge.id);re&&de&&de.forEach(function(Te,Fe){re.removeListener(Fe,Te)})}),ve._trackEventReemitters.clear(),ve.tracks.forEach(function(ge){ve._trackPublicationEventReemitters.get(ge.trackSid).forEach(function(re,de){ge.removeListener(de,re)})}),ve._trackPublicationEventReemitters.clear())})}(ye,pe),re.info("Created a new Participant"+(ye.identity?": "+ye.identity:"")),ye}return L(De,ve),De.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},De.prototype._getTrackPublicationEvents=function(){return[]},De.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},De.prototype._addTrack=function(pe,be){var ye=this._log;return this._tracks.has(be)?null:(this._tracks.set(be,pe),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[pe.kind].set(be,pe),K(this,pe,be),ye.info("Added a new "+ie.trackClass(pe)+":",be),ye.debug(ie.trackClass(pe)+":",pe),pe)},De.prototype._addTrackPublication=function(pe){var be=this._log;return this.tracks.has(pe.trackSid)?null:(this.tracks.set(pe.trackSid,pe),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[pe.kind].set(pe.trackSid,pe),function se(ve,De){var pe=new Map;"disconnected"!==ve.state&&(ve._getTrackPublicationEvents().forEach(function(be){var ye=W(be,2),ge=ye[0],re=ye[1];pe.set(ge,function(){for(var de=[],Te=0;Te<arguments.length;Te++)de[Te]=arguments[Te];ve.emit.apply(ve,ne(ne([re],W(de)),[De]))}),De.on(ge,pe.get(ge))}),ve._trackPublicationEventReemitters.set(De.trackSid,pe))}(this,pe),be.info("Added a new "+ie.trackPublicationClass(pe)+":",pe.trackSid),be.debug(ie.trackPublicationClass(pe)+":",pe),pe)},De.prototype._handleTrackSignalingEvents=function(){var be=this._log,ye=this._clientTrackSwitchOffControl,ge=this._contentPreferencesMode,re=this;if("disconnected"!==this.state){var de=this._RemoteAudioTrack,Te=this._RemoteAudioTrackPublication,Fe=this._RemoteVideoTrack,xe=this._RemoteVideoTrackPublication,Ve=this._RemoteDataTrack,ze=this._RemoteDataTrackPublication,Ze=this._signaling;Ze.on("trackAdded",je),Ze.on("trackRemoved",xt),Ze.tracks.forEach(je),Ze.on("stateChanged",function qe(Ue){"disconnected"===Ue?(be.debug("Removing event listeners"),Ze.removeListener("stateChanged",qe),Ze.removeListener("trackAdded",je),Ze.removeListener("trackRemoved",xt)):"connected"===Ue&&(be.info("reconnected"),setTimeout(function(){return re.emit("reconnected")},0))})}function je(qe){var Ye=new(0,{audio:Te,data:ze,video:xe}[qe.kind])(qe,{log:be});re._addTrackPublication(Ye);var we=qe.isSubscribed;we&&Wt(qe),re._trackSignalingUpdatedEventCallbacks.set(qe.sid,function(){if(we!==qe.isSubscribed){if(we=qe.isSubscribed)return void Wt(qe);!function ht(qe){var Ue=W(Array.from(re._tracks.entries()).find(function(Dt){return W(Dt,2)[1].sid===qe.sid}),2),Ye=Ue[0],we=Ue[1],nt=re.tracks.get(qe.sid);we&&re._removeTrack(we,nt,Ye)}(qe)}}),qe.on("updated",re._trackSignalingUpdatedEventCallbacks.get(qe.sid))}function xt(qe){qe.isSubscribed&&qe.setTrackTransceiver(null);var Ue=re._trackSignalingUpdatedEventCallbacks.get(qe.sid);Ue&&(qe.removeListener("updated",Ue),re._trackSignalingUpdatedEventCallbacks.delete(qe.sid));var Ye=re.tracks.get(qe.sid);Ye&&re._removeTrackPublication(Ye)}function Wt(qe){var Ue=qe.isEnabled,Ye=qe.name,we=qe.kind,nt=qe.sid,Dt=qe.trackTransceiver,zt=qe.isSwitchedOff,kt={audio:de,video:Fe,data:Ve}[we],mt=re.tracks.get(nt);if(kt&&we===Dt.kind){var Kn={log:be,name:Ye,clientTrackSwitchOffControl:ye,contentPreferencesMode:ge},Vr="data"===we?new kt(nt,Dt,Kn):new kt(nt,Dt,Ue,zt,function(Rr){return Ze.updateSubscriberTrackPriority(nt,Rr)},function(Rr){qe.isSubscribed&&Ze.updateTrackRenderHint(nt,Rr)},Kn);re._addTrack(Vr,mt,Dt.id)}}},De.prototype._removeTrack=function(pe,be){if(!this._tracks.has(be))return null;this._tracks.delete(be),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[pe.kind].delete(be),(this._trackEventReemitters.get(be)||new Map).forEach(function(de,Te){pe.removeListener(Te,de)});var re=this._log;return re.info("Removed a "+ie.trackClass(pe)+":",be),re.debug(ie.trackClass(pe)+":",pe),pe},De.prototype._removeTrackPublication=function(pe){if(!(pe=this.tracks.get(pe.trackSid)))return null;this.tracks.delete(pe.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[pe.kind].delete(pe.trackSid),(this._trackPublicationEventReemitters.get(pe.trackSid)||new Map).forEach(function(re,de){pe.removeListener(de,re)});var ge=this._log;return ge.info("Removed a "+ie.trackPublicationClass(pe)+":",pe.trackSid),ge.debug(ie.trackPublicationClass(pe)+":",pe),pe},De.prototype.toJSON=function(){return ie.valueToJSON(this)},De}(H);function K(ve,De,pe){var be=new Map;"disconnected"!==ve.state&&(ve._getTrackEvents().forEach(function(ye){var ge=ye[0],re=ye[1];be.set(ge,function(){var de=[re].concat([].slice.call(arguments));return ve.emit.apply(ve,ne([],W(de)))}),De.on(ge,be.get(ge))}),ve._trackEventReemitters.set(pe,be))}Ce.exports=le},9305:function(Ce,Oe){"use strict";var Y=this&&this.__awaiter||function(O,P,x,J){return new(x||(x=Promise))(function(te,le){function X(se){try{K(J.next(se))}catch(ve){le(ve)}}function z(se){try{K(J.throw(se))}catch(ve){le(ve)}}function K(se){se.done?te(se.value):function ie(te){return te instanceof x?te:new x(function(le){le(te)})}(se.value).then(X,z)}K((J=J.apply(O,P||[])).next())})},L=this&&this.__generator||function(O,P){var J,ie,te,le,x={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return le={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(le[Symbol.iterator]=function(){return this}),le;function X(K){return function(se){return function z(K){if(J)throw new TypeError("Generator is already executing.");for(;x;)try{if(J=1,ie&&(te=2&K[0]?ie.return:K[0]?ie.throw||((te=ie.return)&&te.call(ie),0):ie.next)&&!(te=te.call(ie,K[1])).done)return te;switch(ie=0,te&&(K=[2&K[0],te.value]),K[0]){case 0:case 1:te=K;break;case 4:return x.label++,{value:K[1],done:!1};case 5:x.label++,ie=K[1],K=[0];continue;case 7:K=x.ops.pop(),x.trys.pop();continue;default:if(!(te=(te=x.trys).length>0&&te[te.length-1])&&(6===K[0]||2===K[0])){x=0;continue}if(3===K[0]&&(!te||K[1]>te[0]&&K[1]<te[3])){x.label=K[1];break}if(6===K[0]&&x.label<te[1]){x.label=te[1],te=K;break}if(te&&x.label<te[2]){x.label=te[2],x.ops.push(K);break}te[2]&&x.ops.pop(),x.trys.pop();continue}K=P.call(O,x)}catch(se){K=[6,se],ie=0}finally{J=te=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([K,se])}}},W=this&&this.__read||function(O,P){var x="function"==typeof Symbol&&O[Symbol.iterator];if(!x)return O;var ie,le,J=x.call(O),te=[];try{for(;(void 0===P||P-- >0)&&!(ie=J.next()).done;)te.push(ie.value)}catch(X){le={error:X}}finally{try{ie&&!ie.done&&(x=J.return)&&x.call(J)}finally{if(le)throw le.error}}return te};function ne(O,P,x,J){var ie=[];return O.forEach(function(te){(0===J.length||J.includes(te.type))&&(0===x.length||x.includes(te.kind))&&"number"==typeof te[P]&&ie.push(te[P])}),ie}function U(O){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(x,J){var ie=[J.key];J.altKeys&&(ie=ie.concat(J.altKeys));var te=ie.find(function(le){return le in O});return te&&typeof O[te]===J.type&&(x[J.key]=O[te]),x},{})}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getCombinedConnectionStats=void 0,Oe.getCombinedConnectionStats=function H(O){var P=O.publisher,x=O.subscriber;return Y(this,void 0,void 0,function(){var J,ie,te,le,X,z,K,se,ve,De,pe,be,ye,ge,re;return L(this,function(de){switch(de.label){case 0:return[4,Promise.all([P,x].map(function(Te){return Te.getStats()}))];case 1:return J=W.apply(void 0,[de.sent(),2]),ie=J[0],le=ne(te=J[1],"timestamp",["audio"],["inbound-rtp"]),X=le.length>0?le[0]:0,z=ne(te,"jitter",["audio"],["inbound-rtp"]).reduce(function(Te,Fe){return Math.max(Te,Fe)},0),K=ne(te,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(Te,Fe){return Te+Fe},0),se=ne(te,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(Te,Fe){return Te+Fe},0),ve=ne(ie,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(Te,Fe){return Math.max(Te,Fe)},0),De=ne(te,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(Te,Fe){return Math.max(Te,Fe)},0),pe=1e3*(De||ve),be=ne(ie,"bytesSent",[],["candidate-pair"]).reduce(function(Te,Fe){return Te+Fe},0),ye=ne(te,"bytesReceived",[],["candidate-pair"]).reduce(function(Te,Fe){return Te+Fe},0),ge=function D(O){var P=null,x=[];O.forEach(function(X){"transport"===X.type&&X.selectedCandidatePairId?P=X.selectedCandidatePairId:"candidate-pair"===X.type&&x.push(X)});var J=x.find(function(X){return X.selected||P&&X.id===P});if(!J)return null;var ie=J,te=O.get(ie.localCandidateId),le=O.get(ie.remoteCandidateId);return te&&le?{localCandidate:U(te),remoteCandidate:U(le)}:null}(te),re=[],te.forEach(function(Te){("local-candidate"===Te.type||"remote-candidate"===Te.type)&&re.push(U(Te))}),[2,{timestamp:X,jitter:z,packets:K,packetsLost:se,roundTripTime:pe,bytesSent:be,bytesReceived:ye,selectedIceCandidatePairStats:ge,iceCandidateStats:re}]}})})}},2449:(Ce,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getTurnCredentials=void 0;var L=Y(5330),W=Y(8701).ICE_VERSION,ne=Y(8380),H=ne.createTwilioError,U=ne.SignalingConnectionError,D=Y(9069);Oe.getTurnCredentials=function O(P,x){return new Promise(function(J,ie){var te=new D.EventEmitter,X=new L(x,{networkMonitor:null,eventObserver:te,helloBody:{edge:"roaming",preflight:!0,token:P,type:"ice",version:W}}),z=!1;X.once("close",function(){z||(z=!0,ie(new U))}),X.on("message",function(K){var se=K.code,ve=K.message,pe=K.type;("iced"===pe||"error"===pe)&&!z&&(z=!0,"iced"===pe?J(K.ice_servers):ie(H(se,ve)),X.close())})})}},5359:function(Ce,Oe){"use strict";var Y=this&&this.__read||function(ne,H){var U="function"==typeof Symbol&&ne[Symbol.iterator];if(!U)return ne;var O,x,D=U.call(ne),P=[];try{for(;(void 0===H||H-- >0)&&!(O=D.next()).done;)P.push(O.value)}catch(J){x={error:J}}finally{try{O&&!O.done&&(U=D.return)&&U.call(D)}finally{if(x)throw x.error}}return P},L=this&&this.__spreadArray||function(ne,H){for(var U=0,D=H.length,O=ne.length;U<D;U++,O++)ne[O]=H[U];return ne};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.makeStat=void 0,Oe.makeStat=function W(ne){return ne&&ne.length?{min:Math.min.apply(Math,L([],Y(ne))),max:Math.max.apply(Math,L([],Y(ne))),average:ne.reduce(function(O,P){return O+P},0)/ne.length}:null}},2436:(Ce,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.mosToScore=Oe.calculateMOS=void 0;var Y=94.768;Oe.calculateMOS=function L(ne,H,U){var D=ne+2*H+10,O=0;switch(!0){case D<160:O=Y-D/40;break;case D<1e3:O=Y-(D-120)/10}return 1+.035*(O=1==U<=O/2.5?Math.max(O-2.5*U,6.52):0)+7e-6*O*(O-60)*(100-O)},Oe.mosToScore=function W(ne){return ne?ne>4.2?5:ne>4?4:ne>3.6?3:ne>3?2:1:0}},8682:function(Ce,Oe,Y){"use strict";var Wt,L=this&&this.__extends||(Wt=function(ht,qe){return(Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ue,Ye){Ue.__proto__=Ye}||function(Ue,Ye){for(var we in Ye)Object.prototype.hasOwnProperty.call(Ye,we)&&(Ue[we]=Ye[we])})(ht,qe)},function(ht,qe){if("function"!=typeof qe&&null!==qe)throw new TypeError("Class extends value "+String(qe)+" is not a constructor or null");function Ue(){this.constructor=ht}Wt(ht,qe),ht.prototype=null===qe?Object.create(qe):(Ue.prototype=qe.prototype,new Ue)}),W=this&&this.__assign||function(){return W=Object.assign||function(Wt){for(var ht,qe=1,Ue=arguments.length;qe<Ue;qe++)for(var Ye in ht=arguments[qe])Object.prototype.hasOwnProperty.call(ht,Ye)&&(Wt[Ye]=ht[Ye]);return Wt},W.apply(this,arguments)},ne=this&&this.__awaiter||function(Wt,ht,qe,Ue){return new(qe||(qe=Promise))(function(we,nt){function Dt(mt){try{kt(Ue.next(mt))}catch(Kn){nt(Kn)}}function zt(mt){try{kt(Ue.throw(mt))}catch(Kn){nt(Kn)}}function kt(mt){mt.done?we(mt.value):function Ye(we){return we instanceof qe?we:new qe(function(nt){nt(we)})}(mt.value).then(Dt,zt)}kt((Ue=Ue.apply(Wt,ht||[])).next())})},H=this&&this.__generator||function(Wt,ht){var Ue,Ye,we,nt,qe={label:0,sent:function(){if(1&we[0])throw we[1];return we[1]},trys:[],ops:[]};return nt={next:Dt(0),throw:Dt(1),return:Dt(2)},"function"==typeof Symbol&&(nt[Symbol.iterator]=function(){return this}),nt;function Dt(kt){return function(mt){return function zt(kt){if(Ue)throw new TypeError("Generator is already executing.");for(;qe;)try{if(Ue=1,Ye&&(we=2&kt[0]?Ye.return:kt[0]?Ye.throw||((we=Ye.return)&&we.call(Ye),0):Ye.next)&&!(we=we.call(Ye,kt[1])).done)return we;switch(Ye=0,we&&(kt=[2&kt[0],we.value]),kt[0]){case 0:case 1:we=kt;break;case 4:return qe.label++,{value:kt[1],done:!1};case 5:qe.label++,Ye=kt[1],kt=[0];continue;case 7:kt=qe.ops.pop(),qe.trys.pop();continue;default:if(!(we=(we=qe.trys).length>0&&we[we.length-1])&&(6===kt[0]||2===kt[0])){qe=0;continue}if(3===kt[0]&&(!we||kt[1]>we[0]&&kt[1]<we[3])){qe.label=kt[1];break}if(6===kt[0]&&qe.label<we[1]){qe.label=we[1],we=kt;break}if(we&&qe.label<we[2]){qe.label=we[2],qe.ops.push(kt);break}we[2]&&qe.ops.pop(),qe.trys.pop();continue}kt=ht.call(Wt,qe)}catch(mt){kt=[6,mt],Ye=0}finally{Ue=we=0}if(5&kt[0])throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}([kt,mt])}}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.runPreflight=Oe.PreflightTest=void 0;var U=Y(8701),D=Y(1567),O=Y(2436),P=Y(9305),x=Y(2449),J=Y(5359),ie=Y(5237),te=Y(3519),le=Y(9739),X=Y(8701).WS_SERVER,z=Y(1458),K=Y(133),se=Y(8218),ve=Y(8606),De=Y(3744),pe=Y(8066),be=pe.createSID,ye=pe.sessionSID,ge=Y(8380),re=ge.SignalingConnectionTimeoutError,de=ge.MediaConnectionError;function Ve(Wt){return null!==Wt&&typeof Wt<"u"}var ze=0,Ze=function(Wt){function ht(qe,Ue){var Ye=Wt.call(this)||this;Ye._testTiming=new D.Timer,Ye._dtlsTiming=new D.Timer,Ye._iceTiming=new D.Timer,Ye._peerConnectionTiming=new D.Timer,Ye._mediaTiming=new D.Timer,Ye._connectTiming=new D.Timer,Ye._sentBytesMovingAverage=new se,Ye._packetLossMovingAverage=new se,Ye._progressEvents=[],Ye._receivedBytesMovingAverage=new se;var nt=Ue.environment,Dt=void 0===nt?"prod":nt,zt=Ue.region,mt=Ue.duration,Kn=void 0===mt?1e4:mt,Yn=Ue.wsServer||X(Dt,void 0===zt?"gll":zt);return Ye._log=new z("default",Ye,U.DEFAULT_LOG_LEVEL,U.DEFAULT_LOGGER_NAME),Ye._testDuration=Kn,Ye._instanceId=ze++,Ye._testTiming.start(),Ye._runPreflightTest(qe,Dt,Yn),Ye}return L(ht,Wt),ht.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},ht.prototype.stop=function(){this._stopped=!0},ht.prototype._generatePreflightReport=function(qe){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:J.makeStat(qe?.jitter),rtt:J.makeStat(qe?.rtt),packetLoss:J.makeStat(qe?.packetLoss)},selectedIceCandidatePairStats:qe?qe.selectedIceCandidatePairStats:null,iceCandidateStats:qe?qe.iceCandidateStats:[],progressEvents:this._progressEvents,mos:J.makeStat(qe?.mos)}},ht.prototype._executePreflightStep=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var we,nt,Dt,zt;return H(this,function(mt){switch(mt.label){case 0:if(this._log.debug("Executing step: ",qe),we=this._testDuration+1e4,this._stopped)throw new Error("stopped");nt=Promise.resolve().then(Ue),Dt=null,zt=new Promise(function(Kn,Yn){Dt=setTimeout(function(){Yn(Ye||new Error(qe+" timeout."))},we)}),mt.label=1;case 1:return mt.trys.push([1,,3,4]),[4,Promise.race([zt,nt])];case 2:return[2,mt.sent()];case 3:return null!==Dt&&clearTimeout(Dt),[7];case 4:return[2]}})})},ht.prototype._collectNetworkTimings=function(qe){var Ue=this;return new Promise(function(Ye){var we;qe.addEventListener("iceconnectionstatechange",function(){"checking"===qe.iceConnectionState&&Ue._iceTiming.start(),"connected"===qe.iceConnectionState&&(Ue._iceTiming.stop(),Ue._updateProgress("iceConnected"),(!we||we&&"connected"===we.state)&&Ye())}),qe.addEventListener("connectionstatechange",function(){"connecting"===qe.connectionState&&Ue._peerConnectionTiming.start(),"connected"===qe.connectionState&&(Ue._peerConnectionTiming.stop(),Ue._updateProgress("peerConnectionConnected"))});var Dt=qe.getSenders().map(function(zt){return zt.transport}).find(Ve);typeof Dt<"u"&&(we=Dt).addEventListener("statechange",function(){"connecting"===we.state&&Ue._dtlsTiming.start(),"connected"===we.state&&(Ue._dtlsTiming.stop(),Ue._updateProgress("dtlsConnected"),"connected"===qe.iceConnectionState&&Ye())})})},ht.prototype._setupInsights=function(qe){var Ye=qe.environment,nt=qe.realm,kt=new De(qe.token,U.SDK_NAME,U.SDK_VERSION,void 0===Ye?U.DEFAULT_ENVIRONMENT:Ye,void 0===nt?U.DEFAULT_REALM:nt,{});kt.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var mt=new ve(kt,Date.now(),this._log),Kn=void 0;return{reportToInsights:function(Yn){var Lr,Vr,Rr=Yn.report,Tr=Rr.stats.jitter||Kn,Pn=Rr.stats.rtt||Kn,bi=Rr.stats.packetLoss||Kn,Di=Rr.mos||Kn,lo=new Map;Rr.iceCandidateStats.forEach(function(Ht){if(Ht.candidateType&&Ht.protocol){var $t=lo.get(Ht.candidateType)||[];$t.indexOf(Ht.protocol)<0&&$t.push(Ht.protocol),lo.set(Ht.candidateType,$t)}});var ho=JSON.stringify(Object.fromEntries(lo)),yt={name:"report",group:"preflight",level:Rr.error?"error":"info",payload:{sessionSID:ye,preflightSID:be("PF"),progressEvents:JSON.stringify(Rr.progressEvents),testTiming:Rr.testTiming,dtlsTiming:Rr.networkTiming.dtls,iceTiming:Rr.networkTiming.ice,peerConnectionTiming:Rr.networkTiming.peerConnection,connectTiming:Rr.networkTiming.connect,mediaTiming:Rr.networkTiming.media,selectedLocalCandidate:null===(Lr=Rr.selectedIceCandidatePairStats)||void 0===Lr?void 0:Lr.localCandidate,selectedRemoteCandidate:null===(Vr=Rr.selectedIceCandidatePairStats)||void 0===Vr?void 0:Vr.remoteCandidate,iceCandidateStats:ho,jitterStats:Tr,rttStats:Pn,packetLossStats:bi,mosStats:Di,error:Rr.error}};mt.emit("event",yt),setTimeout(function(){return kt.disconnect()},2e3)}}},ht.prototype._runPreflightTest=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var we,nt,Dt,zt,kt,mt,Kn,Yn,Lr,Vr,Rr,Tr,Pn=this;return H(this,function(bi){switch(bi.label){case 0:we=[],nt=[],Dt=this._setupInsights({token:qe,environment:Ue}).reportToInsights,bi.label=1;case 1:return bi.trys.push([1,8,9,10]),zt=[],[4,this._executePreflightStep("Acquire media",function(){return[ie.syntheticAudio(),te.syntheticVideo({width:640,height:480})]})];case 2:return we=bi.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:we}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return x.getTurnCredentials(qe,Ye)},new re)];case 3:return kt=bi.sent(),this._connectTiming.stop(),this._updateProgress("connected"),mt=new RTCPeerConnection({iceServers:kt,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Kn=new RTCPeerConnection({iceServers:kt,bundlePolicy:"max-bundle"}),nt.push(mt),nt.push(Kn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return ne(Pn,void 0,void 0,function(){var Di,lo,ho,yt;return H(this,function(Ht){switch(Ht.label){case 0:return mt.addEventListener("icecandidate",function($t){return $t.candidate&&Kn.addIceCandidate($t.candidate)}),Kn.addEventListener("icecandidate",function($t){return $t.candidate&&mt.addIceCandidate($t.candidate)}),we.forEach(function($t){return mt.addTrack($t)}),Di=new Promise(function($t){var Xe=[];Kn.addEventListener("track",function(Me){Xe.push(Me.track),Xe.length===we.length&&$t(Xe)})}),[4,mt.createOffer()];case 1:return lo=Ht.sent(),[4,mt.setLocalDescription(ho=lo)];case 2:return Ht.sent(),[4,Kn.setRemoteDescription(ho)];case 3:return Ht.sent(),[4,Kn.createAnswer()];case 4:return yt=Ht.sent(),[4,Kn.setLocalDescription(yt)];case 5:return Ht.sent(),[4,mt.setRemoteDescription(yt)];case 6:return Ht.sent(),[4,this._collectNetworkTimings(mt)];case 7:return Ht.sent(),[2,Di]}})})},new de)];case 4:return Yn=bi.sent(),this.emit("debug",{remoteTracks:Yn}),Yn.forEach(function(Di){Di.addEventListener("ended",function(){return Pn._log.warn(Di.kind+":ended")}),Di.addEventListener("mute",function(){return Pn._log.warn(Di.kind+":muted")}),Di.addEventListener("unmute",function(){return Pn._log.warn(Di.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(Di){var lo=document.createElement("video");lo.autoplay=!0,lo.playsInline=!0,lo.muted=!0,lo.srcObject=new MediaStream(Yn),zt.push(lo),Pn.emit("debugElement",lo),lo.oncanplay=Di})},new de)];case 5:return bi.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return Pn._collectRTCStatsForDuration(Pn._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},mt,Kn)})];case 6:return Lr=bi.sent(),[4,this._executePreflightStep("Generate report",function(){return Pn._generatePreflightReport(Lr)})];case 7:return Vr=bi.sent(),Dt({report:Vr}),this.emit("completed",Vr),[3,10];case 8:return Rr=bi.sent(),Tr=this._generatePreflightReport(),Dt({report:W(W({},Tr),{error:Rr?.toString()})}),this.emit("failed",Rr,Tr),[3,10];case 9:return nt.forEach(function(Di){return Di.close()}),we.forEach(function(Di){return Di.stop()}),[7];case 10:return[2]}})})},ht.prototype._collectRTCStats=function(qe,Ue,Ye){return ne(this,void 0,void 0,function(){var we,nt,Dt,zt,kt,mt,Kn,Yn,Lr,Vr,Rr,Tr,Pn,bi;return H(this,function(Di){switch(Di.label){case 0:return[4,P.getCombinedConnectionStats({publisher:Ue,subscriber:Ye})];case 1:return we=Di.sent(),nt=we.timestamp,Dt=we.bytesSent,zt=we.bytesReceived,kt=we.packets,mt=we.packetsLost,Kn=we.roundTripTime,Lr=we.selectedIceCandidatePairStats,Vr=we.iceCandidateStats,Rr=qe.jitter.length>0,qe.jitter.push(Yn=we.jitter),qe.rtt.push(Kn),this._sentBytesMovingAverage.putSample(Dt,nt),this._receivedBytesMovingAverage.putSample(zt,nt),this._packetLossMovingAverage.putSample(mt,kt),Rr&&(qe.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),qe.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),Tr=this._packetLossMovingAverage.get(),Pn=Math.min(100,100*Tr),qe.packetLoss.push(Pn),bi=O.calculateMOS(Kn,Yn,Tr),qe.mos.push(bi)),qe.selectedIceCandidatePairStats||(qe.selectedIceCandidatePairStats=Lr),0===qe.iceCandidateStats.length&&(qe.iceCandidateStats=Vr),[2]}})})},ht.prototype._collectRTCStatsForDuration=function(qe,Ue,Ye,we){return ne(this,void 0,void 0,function(){var nt,Dt,zt;return H(this,function(kt){switch(kt.label){case 0:return nt=Date.now(),Dt=Math.min(1e3,qe),[4,le.waitForSometime(Dt)];case 1:return kt.sent(),[4,this._collectRTCStats(Ue,Ye,we)];case 2:return kt.sent(),(zt=qe-(Date.now()-nt))>0?[4,this._collectRTCStatsForDuration(zt,Ue,Ye,we)]:[3,4];case 3:Ue=kt.sent(),kt.label=4;case 4:return[2,Ue]}})})},ht.prototype._updateProgress=function(qe){var Ue=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:Ue,name:qe}),this.emit("progress",qe)},ht}(K);Oe.PreflightTest=Ze,Oe.runPreflight=function xt(Wt,ht){return void 0===ht&&(ht={}),new Ze(Wt,ht)}},5237:(Ce,Oe,Y)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticAudio=void 0,Oe.syntheticAudio=function L(){var W=Y(7708),ne={},H=W.getOrCreate(ne),U=H.createOscillator(),D=U.connect(H.createMediaStreamDestination());U.start();var O=D.stream.getAudioTracks()[0],P=O.stop;return O.stop=function(){P.call(O),W.release(ne)},O}},3519:(Ce,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.syntheticVideo=void 0,Oe.syntheticVideo=function Y(L){var W=void 0===L?{}:L,ne=W.width,H=void 0===ne?640:ne,U=W.height,D=void 0===U?480:U,O=Object.assign(document.createElement("canvas"),{width:H,height:D}),P=O.getContext("2d");P.fillStyle="green",P.fillRect(0,0,O.width,O.height);var x=!1;requestAnimationFrame(function le(){if(!x){var X=Math.round(255*Math.random()),z=Math.round(255*Math.random()),K=Math.round(255*Math.random()),se=Math.round(255*Math.random());P.fillStyle="rgba("+X+", "+z+", "+K+", "+se+")",P.fillRect(Math.random()*H,Math.random()*D,50,50),requestAnimationFrame(le)}});var ie=O.captureStream(30).getTracks()[0],te=ie.stop;return ie.stop=function(){x=!0,te.call(ie)},ie}},1567:(Ce,Oe)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Timer=void 0;var Y=function(){function L(){this._end=void 0,this.start()}return L.prototype.start=function(){return this._start=Date.now(),this},L.prototype.stop=function(){return this._end=Date.now(),this},L.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},L}();Oe.Timer=Y},7772:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=this&&this.__read||function(D,O){var P="function"==typeof Symbol&&D[Symbol.iterator];if(!P)return D;var J,te,x=P.call(D),ie=[];try{for(;(void 0===O||O-- >0)&&!(J=x.next()).done;)ie.push(J.value)}catch(le){te={error:le}}finally{try{J&&!J.done&&(P=x.return)&&P.call(x)}finally{if(te)throw te.error}}return ie},ne=this&&this.__spreadArray||function(D,O){for(var P=0,x=O.length,J=D.length;P<x;P++,J++)D[J]=O[P];return D},U=function(D){function O(){var P=D.call(this)||this;return Object.defineProperties(P,{_queuedEvents:{value:new Map}}),P}return L(O,D),O.prototype.dequeue=function(P){var x=this,J=!0;if(!P)return this._queuedEvents.forEach(function(te,le){J=this.dequeue(le)&&J},this),J;var ie=this._queuedEvents.get(P)||[];return this._queuedEvents.delete(P),ie.reduce(function(te,le){return x.emit.apply(x,ne([],W([P].concat(le))))&&te},J)},O.prototype.queue=function(){var P=[].slice.call(arguments);if(this.emit.apply(this,ne([],W(P))))return!0;var x=P[0];return this._queuedEvents.has(x)||this._queuedEvents.set(x,[]),this._queuedEvents.get(x).push(P.slice(1)),!1},O}(Y(9069).EventEmitter);Ce.exports=U},3609:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=this&&this.__read||function(D,O){var P="function"==typeof Symbol&&D[Symbol.iterator];if(!P)return D;var J,te,x=P.call(D),ie=[];try{for(;(void 0===O||O-- >0)&&!(J=x.next()).done;)ie.push(J.value)}catch(le){te={error:le}}finally{try{J&&!J.done&&(P=x.return)&&P.call(x)}finally{if(te)throw te.error}}return ie},ne=this&&this.__spreadArray||function(D,O){for(var P=0,x=O.length,J=D.length;P<x;P++,J++)D[J]=O[P];return D},U=function(D){function O(P,x){var J=D.call(this,P,x)||this;return J._handleTrackSignalingEvents(),J.once("disconnected",J._unsubscribeTracks.bind(J)),J}return L(O,D),O.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},O.prototype._addTrack=function(P,x,J){return D.prototype._addTrack.call(this,P,J)?(x._subscribed(P),this.emit("trackSubscribed",P,x),P):null},O.prototype._addTrackPublication=function(P){var x=D.prototype._addTrackPublication.call(this,P);return x?(this.emit("trackPublished",x),x):null},O.prototype._getTrackPublicationEvents=function(){return ne(ne([],W(D.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},O.prototype._unsubscribeTracks=function(){var P=this;this.tracks.forEach(function(x){if(x.isSubscribed){var J=x.track;x._unsubscribe(),P.emit("trackUnsubscribed",J,x)}})},O.prototype._removeTrack=function(P,x,J){var ie=this._tracks.get(J);return ie?(D.prototype._removeTrack.call(this,ie,J),x._unsubscribe(),this.emit("trackUnsubscribed",ie,x),ie):null},O.prototype._removeTrackPublication=function(P){this._signaling.clearTrackHint(P.trackSid);var x=D.prototype._removeTrackPublication.call(this,P);return x?(this.emit("trackUnpublished",x),x):null},O}(Y(9218));Ce.exports=U},7406:function(Ce,Oe,Y){"use strict";var X,L=this&&this.__extends||(X=function(z,K){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,ve){se.__proto__=ve}||function(se,ve){for(var De in ve)Object.prototype.hasOwnProperty.call(ve,De)&&(se[De]=ve[De])})(z,K)},function(z,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function se(){this.constructor=z}X(z,K),z.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)}),W=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(be){pe={error:be}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},ne=this&&this.__spreadArray||function(X,z){for(var K=0,se=z.length,ve=X.length;K<se;K++,ve++)X[ve]=z[K];return X},H=Y(133),U=Y(3609),D=Y(7805),O=Y(9739).valueToJSON,P=0,x=function(X){function z(K,se,ve){var De=X.call(this)||this,pe=ve.log.createLog("default",De),be=new Map;return Object.defineProperties(De,{_log:{value:pe},_clientTrackSwitchOffControl:{value:ve.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:ve.contentPreferencesMode||"disabled"},_instanceId:{value:++P},_options:{value:ve},_participants:{value:be},_signaling:{value:se},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(se.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return se.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:K},name:{enumerable:!0,value:se.name},participants:{enumerable:!0,value:be},sid:{enumerable:!0,value:se.sid},state:{enumerable:!0,get:function(){return se.state}},mediaRegion:{enumerable:!0,value:se.mediaRegion}}),function te(X,z){z.on("updated",function(){var se=z.isEnabled;X._log.info("Recording "+(se?"started":"stopped")),X.emit("recording"+(se?"Started":"Stopped"))})}(De,se.recording),function le(X,z){var K=X._log;K.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),z.participants.forEach(ie.bind(null,X)),K.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),z.on("participantConnected",ie.bind(null,X)),z.on("dominantSpeakerChanged",function(){return X.emit("dominantSpeakerChanged",X.dominantSpeaker)}),z.on("stateChanged",function se(ve,De){switch(K.info("Transitioned to state:",ve),ve){case"disconnected":X.participants.forEach(function(pe){pe._unsubscribeTracks()}),X.emit(ve,X,De),X.localParticipant.tracks.forEach(function(pe){pe.unpublish()}),z.removeListener("stateChanged",se);break;case"reconnecting":setTimeout(function(){return X.emit("reconnecting",De)},0);break;default:setTimeout(function(){return X.emit("reconnected")},0)}})}(De,se),pe.info("Created a new Room:",De.name),pe.debug("Initial RemoteParticipants:",Array.from(De._participants.values())),De}return L(z,X),z.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},z.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},z.prototype.getStats=function(){var K=this;return this._signaling.getStats().then(function(se){return Array.from(se).map(function(ve){var De=W(ve,2),be=De[1];return new D(De[0],Object.assign({},be,{localAudioTrackStats:J(K,be.localAudioTrackStats),localVideoTrackStats:J(K,be.localVideoTrackStats)}))})})},z.prototype.toJSON=function(){return O(this)},z}(H);function J(X,z){var K=X.localParticipant._signaling;return z.reduce(function(se,ve){var De=K.tracks.get(ve.trackId),pe=K.getSender(De);return pe?[Object.assign({},ve,{trackId:pe.id})].concat(se):se},[])}function ie(X,z){var K=X._log,De=new U(z,{log:K,clientTrackSwitchOffControl:X._clientTrackSwitchOffControl,contentPreferencesMode:X._contentPreferencesMode});K.info("A new RemoteParticipant connected:",De),X._participants.set(De.sid,De),X.emit("participantConnected",De);var pe=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(be){var ye=W(Array.isArray(be)?be:[be,be],2),ge=ye[0],re=ye[1];function de(){var Te=[].slice.call(arguments);Te.unshift(re),Te.push(De),X.emit.apply(X,ne([],W(Te)))}return De.on(ge,de),[ge,de]});De.once("disconnected",function(){var ye=X.dominantSpeaker;K.info("RemoteParticipant disconnected:",De),X._participants.delete(De.sid),pe.forEach(function(ge){De.removeListener(ge[0],ge[1])}),X.emit("participantDisconnected",De),De===ye&&X.emit("dominantSpeakerChanged",X.dominantSpeaker)})}Ce.exports=x},8043:function(Ce,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(P,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=P}O(P,x),P.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=Y(9285),ne=Y(8343),H=Y(8675),U={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},D=function(O){function P(){return O.call(this,"closed",U)||this}return L(P,O),P.prototype._close=function(x){return this.transition("closing",x),this.transition("closed",x),Promise.resolve(this)},P.prototype._connect=function(x,J,ie,te,le){x.connect("PA00000000000000000000000000000000","test");var z=Promise.resolve(new ne(x,"RM00000000000000000000000000000000",le));return z.cancel=function(){},z},P.prototype._open=function(x){return this.transition("opening",x),this.transition("open",x),Promise.resolve(this)},P.prototype.close=function(){var x=this;return this.bracket("close",function(J){switch(x.state){case"closed":return x;case"open":return x._close(J);default:throw new Error('Unexpected Signaling state "'+x.state+'"')}})},P.prototype.connect=function(x,J,ie,te,le){var X=this;return this.bracket("connect",function z(K){switch(X.state){case"closed":return X._open(K).then(z.bind(null,K));case"open":return X.releaseLockCompletely(K),X._connect(x,J,ie,te,le);default:throw new Error('Unexpected Signaling state "'+X.state+'"')}})},P.prototype.createLocalParticipantSignaling=function(){return new W},P.prototype.open=function(){var x=this;return this.bracket("open",function(J){switch(x.state){case"closed":return x._open(J);case"open":return x;default:throw new Error('Unexpected Signaling state "'+x.state+'"')}})},P}(H);Ce.exports=D},5677:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(){var D=H.call(this)||this;return Object.defineProperties(D,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),D}return L(U,H),U.prototype.addTrack=function(D,O,P){var x=this._createLocalTrackPublicationSignaling(D,O,P);return this._trackSendersToPublications.set(D,x),this._publicationsToTrackSenders.set(x,D),H.prototype.addTrack.call(this,x),this},U.prototype.getPublication=function(D){return this._trackSendersToPublications.get(D)||null},U.prototype.getSender=function(D){return this._publicationsToTrackSenders.get(D)||null},U.prototype.removeTrack=function(D){var O=this._trackSendersToPublications.get(D);return O?(this._trackSendersToPublications.delete(D),this._publicationsToTrackSenders.delete(O),H.prototype.removeTrack.call(this,O)&&O.stop(),O):null},U}(Y(9285));Ce.exports=ne},3157:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),ne=function(U){function D(O,P,x){var J=this;return O=O.clone(),(J=U.call(this,P,O.kind,"data"===O.kind||O.track.enabled,x)||this).setTrackTransceiver(O),Object.defineProperties(J,{_updatedPriority:{value:x,writable:!0},id:{enumerable:!0,value:O.id}}),J}return L(D,U),Object.defineProperty(D.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),D.prototype.enable=function(O){return this.trackTransceiver.track.enabled=O="boolean"!=typeof O||O,U.prototype.enable.call(this,O)},D.prototype.publishFailed=function(O){return function H(U,D){return null===U._sid&&!U._error&&(U._error=D,!0)}(this,O)&&this.emit("updated"),this},D.prototype.setPriority=function(O){return this._updatedPriority!==O&&(this._updatedPriority=O,this.emit("updated")),this},D.prototype.setSid=function(O){return this._error?this:U.prototype.setSid.call(this,O)},D.prototype.stop=function(){this.trackTransceiver.stop()},D}(Y(8194));Ce.exports=ne},9285:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(8675),ne=Y(669),H={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},U=function(D){function O(){var P=D.call(this,"connecting",H)||this;return Object.defineProperties(P,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),P}return L(O,D),Object.defineProperty(O.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),O.prototype.addTrack=function(P){return this.tracks.set(P.id||P.sid,P),this.emit("trackAdded",P),this},O.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},O.prototype.removeTrack=function(P){var x=this.tracks.get(P.id||P.sid);return this.tracks.delete(P.id||P.sid),x&&this.emit("trackRemoved",P),x||null},O.prototype.setNetworkQualityLevel=function(P,x){this._networkQualityLevel!==P&&(this._networkQualityLevel=P,this._networkQualityStats=x&&(x.audio||x.video)?new ne(x):null,this.emit("networkQualityLevelChanged"))},O.prototype.connect=function(P,x){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=P),this._identity||(this._identity=x),this.preempt("connected"),!0)},O.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},O}(W);Ce.exports=U},9987:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(){var D=H.call(this)||this;return Object.defineProperties(D,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),D}return L(U,H),U.prototype.disable=function(){return this.enable(!1)},U.prototype.enable=function(D){return this.isEnabled!==(D="boolean"!=typeof D||D)&&(this._isEnabled=D,this.emit("updated")),this},U}(Y(9069).EventEmitter);Ce.exports=ne},2184:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this)||this;return P.connect(D,O),P}return L(U,H),U}(Y(9285));Ce.exports=ne},8956:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x,J,ie){var te=H.call(this,O,P,x,J)||this;return Object.defineProperties(te,{_isSwitchedOff:{value:ie,writable:!0}}),te.setSid(D),te}return L(U,H),Object.defineProperty(U.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),U.prototype.subscribeFailed=function(D){return this.error||(this._error=D,this.emit("updated")),this},U.prototype.setPriority=function(D){return this._priority!==D&&(this._priority=D,this.emit("updated")),this},U.prototype.setSwitchedOff=function(D){return this._isSwitchedOff!==D&&(this._isSwitchedOff=D,this.emit("updated")),this},U}(Y(8194));Ce.exports=ne},8343:function(Ce,Oe,Y){"use strict";var K,L=this&&this.__extends||(K=function(se,ve){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,pe){De.__proto__=pe}||function(De,pe){for(var be in pe)Object.prototype.hasOwnProperty.call(pe,be)&&(De[be]=pe[be])})(se,ve)},function(se,ve){if("function"!=typeof ve&&null!==ve)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function De(){this.constructor=se}K(se,ve),se.prototype=null===ve?Object.create(ve):(De.prototype=ve.prototype,new De)}),W=Y(9987),ne=Y(8675),H=Y(6543),U=Y(9739).buildLogLevels,D=Y(8701).DEFAULT_LOG_LEVEL,O=Y(1458),P=Y(8380),x=P.MediaConnectionError,J=P.MediaDTLSTransportFailedError,ie=P.SignalingConnectionDisconnectedError,te=0,le={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},X=function(K){function se(ve,De,pe,be){var ye=this;be=Object.assign({logLevel:D,RecordingSignaling:W,Timeout:H},be);var ge=U(be.logLevel);ye=K.call(this,"connected",le)||this;var re=be.RecordingSignaling,de=new be.Timeout(function(){ye._disconnect(ye._reconnectingError)},be.sessionTimeout,!1);return Object.defineProperties(ye,{_instanceId:{value:te++},_log:{value:be.log?be.log.createLog("default",ye):new O("default",ye,ge,be.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:be},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:de},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:ve},name:{enumerable:!0,value:pe},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new re},sid:{enumerable:!0,value:De}}),ye.on("connectionStateChanged",function(){"failed"===ye.connectionState&&!["disconnected","failed"].includes(ye.iceConnectionState)&&ye._disconnect(new J)}),ye.on("iceConnectionStateChanged",function(){return z(ye)}),ye.on("signalingConnectionStateChanged",function(){return z(ye)}),setTimeout(function(){return z(ye)}),ye}return L(se,K),se.prototype._disconnect=function(ve){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[ve]),!0)},se.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},se.prototype.connectParticipant=function(ve){var De=this;return"disconnected"!==ve.state&&!this.participants.has(ve.sid)&&(this.participants.set(ve.sid,ve),ve.on("stateChanged",function pe(be){"disconnected"===be&&(ve.removeListener("stateChanged",pe),De.participants.delete(ve.sid),De.emit("participantDisconnected",ve))}),this.emit("participantConnected",ve),!0)},se.prototype.disconnect=function(){return this._disconnect()},se.prototype.setDominantSpeaker=function(ve){this.dominantSpeakerSid=ve,this.emit("dominantSpeakerChanged")},se}(ne);function z(K){var se;"disconnected"!==K.state&&"disconnected"!==K.signalingConnectionState?("reconnecting"===K.signalingConnectionState?se=K.signalingConnectionState:"failed"===K.iceConnectionState?(K._mediaConnectionIsReconnecting=!0,se="reconnecting"):"new"===K.iceConnectionState||"checking"===K.iceConnectionState?se=K._mediaConnectionIsReconnecting?"reconnecting":"connected":(K._mediaConnectionIsReconnecting=!1,K._reconnectingError=null,K._sessionTimeout.clear(),se="connected"),se!==K.state&&("reconnecting"===se?(K._reconnectingError="reconnecting"===K.signalingConnectionState?new ie:new x,K._sessionTimeout.start(),K.preempt(se,null,[K._reconnectingError])):K.preempt(se))):K._sessionTimeout.clear()}Ce.exports=X},8194:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P,x){var J=H.call(this)||this,ie=null;return Object.defineProperties(J,{_error:{value:null,writable:!0},_isEnabled:{value:P,writable:!0},_priority:{value:x,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return ie},set:function(te){null===ie&&(ie=te)}},kind:{enumerable:!0,value:O},name:{enumerable:!0,value:D}}),J}return L(U,H),Object.defineProperty(U.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),U.prototype.disable=function(){return this.enable(!1)},U.prototype.enable=function(D){return this.isEnabled!==(D="boolean"!=typeof D||D)&&(this._isEnabled=D,this.emit("updated")),this},U.prototype.setTrackTransceiver=function(D){return this.trackTransceiver!==(D=D||null)&&(this._trackTransceiver=D,this.emit("updated")),this},U.prototype.setSid=function(D){return null===this.sid&&(this._sid=D,this.emit("updated")),this},U}(Y(9069).EventEmitter);Ce.exports=ne},7697:(Ce,Oe,Y)=>{"use strict";var L=Y(8126),W=Y(6603),ne=Y(2112),H=Y(4892),U=Y(8380),D=U.SignalingConnectionDisconnectedError,O=U.SignalingIncomingMessageInvalidError,P=Y(9739),x=P.flatMap,J=P.createRoomConnectEventPayload;Ce.exports=function ie(te,le,X,z,K,se){se=Object.assign({PeerConnectionManager:W,RoomV2:ne,Transport:H},se);var ve=K.video[0]&&!0===K.video[0].adaptiveSimulcast,pe=se.RoomV2,be=se.Transport,ye=se.iceServers,ge=se.log,re=new(0,se.PeerConnectionManager)(z,K,se),de=x(X.tracks,function(Ve){return[Ve.trackTransceiver]});re.setTrackSenders(de);var Fe,Te=new Error("Canceled"),xe=new L(function(Ve,ze,Ze){var Wt=se.bandwidthProfile,Ue=se.eventObserver,nt=se.name,Vr=Object.assign({adaptiveSimulcast:ve,automaticSubscription:se.automaticSubscription,dominantSpeaker:se.dominantSpeaker,environment:se.environment,eventObserver:Ue,loggerName:se.loggerName,logLevel:se.logLevel,networkMonitor:se.networkMonitor,networkQuality:se.networkQuality,iceServers:ye,onIced:function(Tr){return Ze()?(ze(Te),Promise.reject(Te)):(ge.debug("Got ICE servers:",Tr),se.iceServers=Tr,re.setConfiguration(se),re.createAndOffer().then(function(){if(Ze())throw ze(Te),Te;ge.debug("createAndOffer() succeeded."),re.dequeue("description")}).catch(function(Pn){throw ge.error("createAndOffer() failed:",Pn),ze(Pn),Pn}))},realm:se.realm,renderHints:!!Wt&&("disabled"!==se.clientTrackSwitchOffControl||"disabled"!==se.contentPreferencesMode),sdpSemantics:se.sdpSemantics,trackPriority:!!Wt,trackSwitchOff:!!Wt},Wt?{bandwidthProfile:Wt}:{});Fe=new be(nt,te,X,re,le,Vr);var Rr=J(se);Ue.emit("event",Rr),Fe.once("connected",function(Tr){ge.debug("Transport connected:",Tr),Ze()?ze(Te):Tr.participant?(X.setSignalingRegion(Tr.options.signaling_region),Ve(new pe(X,Tr,Fe,re,se))):ze(new O)}),Fe.once("stateChanged",function(Tr,Pn){"disconnected"===Tr?(Fe=null,ze(Pn||new D)):ge.debug("Transport state changed:",Tr)})},function(){Fe&&(Fe.disconnect(),Fe=null)});return xe.catch(function(){Fe&&(Fe.disconnect(),Fe=null),re.close()}),xe}},2314:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,"active_speaker",O)||this;return Object.defineProperties(P,{_loudestParticipantSid:{value:null,writable:!0}}),P.on("ready",function(x){x.on("message",function(J){"active_speaker"===J.type&&P._setLoudestParticipantSid(J.participant)})}),P}return L(U,H),Object.defineProperty(U.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),U.prototype._setLoudestParticipantSid=function(D){this.loudestParticipantSid!==D&&(this._loudestParticipantSid=D,this.emit("updated"))},U}(Y(4071));Ce.exports=ne},380:(Ce,Oe,Y)=>{"use strict";var L=Y(3826),W=function(){function ne(){Object.defineProperties(this,{_filter:{value:new L({getKey:function(U){return U.ufrag},isLessThanOrEqualTo:function(U,D){return U.revision<=D.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return ne.prototype.setUfrag=function(H){this._ufrag=H;var U=this._filter.toMap().get(H);return U?U.candidates:[]},ne.prototype.update=function(H){H.candidates=H.candidates||[];var U=this._filter.toMap().get(H.ufrag),D=U?U.candidates:[];return this._filter.update(H)&&this._ufrag===H.ufrag?H.candidates.slice(D.length):[]},ne}();Ce.exports=W},2282:(Ce,Oe,Y)=>{"use strict";var L=Y(8701),W=L.ICE_ACTIVITY_CHECK_PERIOD_MS,ne=L.ICE_INACTIVITY_THRESHOLD_MS,H=function(){function U(D,O){O=Object.assign({activityCheckPeriodMs:W,inactivityThresholdMs:ne},O),Object.defineProperties(this,{_activityCheckPeriodMs:{value:O.activityCheckPeriodMs},_inactivityThresholdMs:{value:O.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:D},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return U.prototype._getActivePairStat=function(D){return Array.from(D.values()).find(function(x){return"candidate-pair"===x.type&&x.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},U.prototype._getIceConnectionStats=function(){var D=this;return this._peerConnection.getStats().then(function(O){return D._getActivePairStat(O)}).catch(function(){return null})},U.prototype._scheduleInactivityCallback=function(D){var O=this;D&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===O._peerConnection.iceConnectionState&&D()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!D&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},U.prototype.start=function(D){var O=this;this.stop(),this._timer=setInterval(function(){O._getIceConnectionStats().then(function(P){!P||((!O._lastActivity||O._lastActivity.bytesReceived!==P.bytesReceived)&&(O._lastActivity=P,O._scheduleInactivityCallback(null)),P.timestamp-O._lastActivity.timestamp>=O._inactivityThresholdMs&&("disconnected"===O._peerConnection.iceConnectionState?D():null===O._onIceConnectionStateChanged&&O._scheduleInactivityCallback(D)))})},this._activityCheckPeriodMs)},U.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},U}();Ce.exports=H},448:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(7697),ne=Y(523),U=function(D){function O(P,x){var J;return x=Object.assign({createCancelableRoomSignalingPromise:W},x),J=D.call(this)||this,Object.defineProperties(J,{_createCancelableRoomSignalingPromise:{value:x.createCancelableRoomSignalingPromise},_options:{value:x},_wsServer:{value:P}}),J}return L(O,D),O.prototype._connect=function(P,x,J,ie,te){return te=Object.assign({},this._options,te),this._createCancelableRoomSignalingPromise.bind(null,x,this._wsServer,P,J,ie,te)},O.prototype.createLocalParticipantSignaling=function(P,x){return new ne(P,x)},O}(Y(8043));Ce.exports=U},523:function(Ce,Oe,Y){"use strict";var J,L=this&&this.__extends||(J=function(ie,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,X){le.__proto__=X}||function(le,X){for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(le[z]=X[z])})(ie,te)},function(ie,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function le(){this.constructor=ie}J(ie,te),ie.prototype=null===te?Object.create(te):(le.prototype=te.prototype,new le)}),W=Y(5677),ne=Y(5771),H=Y(8701).DEFAULT_LOG_LEVEL,U=Y(1458),D=Y(9739),O=D.buildLogLevels,P=D.isDeepEqual,x=function(J){function ie(te,le,X){var z;X=Object.assign({logLevel:H,LocalTrackPublicationV2:ne},X),z=J.call(this)||this;var K=O(X.logLevel);return Object.defineProperties(z,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:te},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:X.LocalTrackPublicationV2},_log:{value:X.log?X.log.createLog("default",z):new U("default",z,K,X.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:le},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),z}return L(ie,J),ie.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},ie.prototype.setSignalingRegion=function(te){this._signalingRegion||(this._signalingRegion=te)},ie.prototype.setBandwidthProfile=function(te){P(this._bandwidthProfile,te)||(this._bandwidthProfile=JSON.parse(JSON.stringify(te)),this._bandwidthProfileRevision++,this.didUpdate())},ie.prototype.getParameters=function(){return this._encodingParameters},ie.prototype.setParameters=function(te){return this._encodingParameters.update(te),this},ie.prototype.update=function(te){return this._publishedRevision>=te.revision||(this._publishedRevision=te.revision,te.tracks.forEach(function(le){var X=this.tracks.get(le.id);X&&X.update(le)},this)),this},ie.prototype._createLocalTrackPublicationSignaling=function(te,le,X){return new this._LocalTrackPublicationV2(te,le,X)},ie.prototype.addTrack=function(te,le,X){var z=this;J.prototype.addTrack.call(this,te,le,X);var K=this.getPublication(te),se=K.isEnabled,ve=K.updatedPriority,De=function(){(se!==K.isEnabled||ve!==K.updatedPriority)&&(z.didUpdate(),se=K.isEnabled,ve=K.updatedPriority)};return K.on("updated",De),this._removeListener(K),this._removeListeners.set(K,function(){return K.removeListener("updated",De)}),this.didUpdate(),this},ie.prototype._removeListener=function(te){var le=this._removeListeners.get(te);le&&le()},ie.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(te){return te.getState()})}},ie.prototype.didUpdate=function(){this._revision++,this.emit("updated")},ie.prototype.removeTrack=function(te){var le=J.prototype.removeTrack.call(this,te);return le&&(te.removeClone(le.trackTransceiver),this._removeListener(le),this.didUpdate()),le},ie.prototype.setNetworkQualityConfiguration=function(te){this.networkQualityConfiguration.update(te)},ie.prototype.setPublisherHint=function(te,le){var X=Array.from(this.tracks.values()).find(function(z){return z.sid===te});return X?X.trackTransceiver.setPublisherHint(le):(this._log.warn("track:"+te+" not found"),Promise.resolve("UNKNOWN_TRACK"))},ie}(W);Ce.exports=x},5771:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(3157),ne=Y(8380).createTwilioError,H=function(U){function D(O,P,x){return U.call(this,O,P,x)||this}return L(D,U),D.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},D.prototype.update=function(O){switch(O.state){case"ready":this.setSid(O.sid);break;case"failed":var P=O.error;this.publishFailed(ne(P.code,P.message))}return this},D}(W);Ce.exports=H},4071:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(9069),ne=0,H=function(U){function D(O,P,x){var J=U.call(this)||this;return Object.defineProperties(J,{_instanceId:{value:ne++},channel:{value:P},_log:{value:x.log.createLog("default",J)},_getReceiver:{value:O},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),J}return L(D,U),Object.defineProperty(D.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),D.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},D.prototype.setup=function(O){var P=this;this._teardown(),this._log.info("setting up msp transport for id:",O);var x=this._getReceiver(O).then(function(J){if("data"!==J.kind&&P._log.error("Expected a DataTrackReceiver"),P._receiverPromise===x){try{P._transport=J.toDataTransport(),P.emit("ready",P._transport)}catch(ie){P._log.error("Failed to toDataTransport: "+ie.message)}J.once("close",function(){return P._teardown()})}});this._receiverPromise=x},D.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},D}(W);Ce.exports=H},9056:function(Ce,Oe,Y){"use strict";var O,L=this&&this.__extends||(O=function(P,x){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,ie){J.__proto__=ie}||function(J,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(J[te]=ie[te])})(P,x)},function(P,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function J(){this.constructor=P}O(P,x),P.prototype=null===x?Object.create(x):(J.prototype=x.prototype,new J)}),W=this&&this.__read||function(O,P){var x="function"==typeof Symbol&&O[Symbol.iterator];if(!x)return O;var ie,le,J=x.call(O),te=[];try{for(;(void 0===P||P-- >0)&&!(ie=J.next()).done;)te.push(ie.value)}catch(X){le={error:X}}finally{try{ie&&!ie.done&&(x=J.return)&&x.call(J)}finally{if(le)throw le.error}}return te},ne=Y(9069),H=Y(8753),U=function(O){function P(x,J){var ie=O.call(this)||this;return Object.defineProperties(ie,{_factories:{value:new WeakMap},_manager:{value:x},_signaling:{value:J}}),J.on("updated",function(){return ie.emit("updated")}),ie}return L(P,O),Object.defineProperty(P.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),P.prototype.start=function(){var x=this;this.stop();var J=setTimeout(function(){x._timeout===J&&function D(O){var ie=(O._manager._peerConnections?Array.from(O._manager._peerConnections.values()):[]).map(function(te){return te._peerConnection}).filter(function(te){return"closed"!==te.signalingState}).map(function(te){if(O._factories.has(te))return O._factories.get(te);var le=new H(te);return O._factories.set(te,le),le}).map(function(te){return te.next().catch(function(){return null})});return Promise.all(ie).then(function(te){return te.filter(function(le){return le}).map(function(le){return le.summarize()})})}(x).then(function(ie){if(x._timeout===J){if(ie.length){var te=W(ie,1);x._signaling.put(te[0])}x.start()}})},200);this._timeout=J},P.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},P}(ne);Ce.exports=U},5775:function(Ce,Oe,Y){"use strict";var P,L=this&&this.__extends||(P=function(x,J){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,te){ie.__proto__=te}||function(ie,te){for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(ie[le]=te[le])})(x,J)},function(x,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ie(){this.constructor=x}P(x,J),x.prototype=null===J?Object.create(J):(ie.prototype=J.prototype,new ie)}),W=Y(4071),ne=Y(6412),H=Y(6543),D=function(P){function x(J,ie,te){var le=P.call(this,J,"network_quality",te)||this;return Object.defineProperties(le,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new ne},_resendTimer:{value:new H(function(){le._resendTimer.setDelay(1.5*le._resendTimer.delay),le._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:ie.local,remoteReportLevel:ie.remote}}}}),le.on("ready",function(X){X.on("message",function(z){"network_quality"===(le._log.debug("Incoming: ",z),z.type)&&le._handleNetworkQualityMessage(z)})}),le._sendNetworkQualityInputs(),le}return L(x,P),Object.defineProperty(x.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),x.prototype._handleNetworkQualityMessage=function(J){var ie=this,te=!1,le=null,X=J?J.local:null;"number"==typeof X?(le=X,this._levels=null):"object"==typeof X&&X&&(this._levels=X,le="number"==typeof X.level?X.level:Math.min(X.audio.send,X.audio.recv,X.video.send,X.video.recv)),null!==le&&this.level!==le&&(this._level=le,te=!0),this._remoteLevels=J&&J.remotes?J.remotes.reduce(function(z,K){return(ie._remoteLevels.get(K.sid)||{}).level!==K.level&&(te=!0),z.set(K.sid,K)},new Map):this._remoteLevels,te&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return ie._sendNetworkQualityInputs()},1e3)},x.prototype._sendNetworkQualityInputs=function(){var J=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(ie){J._transport&&J._transport.publish(function O(P,x){return Object.assign({type:"network_quality"},P,x)}(ie,J._networkQualityReportLevels))}).finally(function(){J._resendTimer.start()})},x.prototype.put=function(J){this._networkQualityInputs.put(J)},x}(W);Ce.exports=D},1058:function(Ce,Oe,Y){"use strict";var Vn,L=this&&this.__extends||(Vn=function(_n,Ne){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Zt){dt.__proto__=Zt}||function(dt,Zt){for(var en in Zt)Object.prototype.hasOwnProperty.call(Zt,en)&&(dt[en]=Zt[en])})(_n,Ne)},function(_n,Ne){if("function"!=typeof Ne&&null!==Ne)throw new TypeError("Class extends value "+String(Ne)+" is not a constructor or null");function dt(){this.constructor=_n}Vn(_n,Ne),_n.prototype=null===Ne?Object.create(Ne):(dt.prototype=Ne.prototype,new dt)}),W=this&&this.__read||function(Vn,_n){var Ne="function"==typeof Symbol&&Vn[Symbol.iterator];if(!Ne)return Vn;var Zt,mn,dt=Ne.call(Vn),en=[];try{for(;(void 0===_n||_n-- >0)&&!(Zt=dt.next()).done;)en.push(Zt.value)}catch(hi){mn={error:hi}}finally{try{Zt&&!Zt.done&&(Ne=dt.return)&&Ne.call(dt)}finally{if(mn)throw mn.error}}return en},ne=this&&this.__spreadArray||function(Vn,_n){for(var Ne=0,dt=_n.length,Zt=Vn.length;Ne<dt;Ne++,Zt++)Vn[Zt]=_n[Ne];return Vn},H=Y(2606),U=Y(1647),D=U.RTCIceCandidate,O=U.RTCPeerConnection,P=U.RTCSessionDescription,x=U.getStats,J=Y(7627),ie=Y(8701),te=ie.DEFAULT_ICE_GATHERING_TIMEOUT_MS,le=ie.DEFAULT_LOG_LEVEL,X=ie.DEFAULT_SESSION_TIMEOUT_SEC,z=ie.iceRestartBackoffConfig,K=Y(3898),se=K.addOrRewriteNewTrackIds,ve=K.addOrRewriteTrackIds,De=K.createCodecMapForMediaSection,pe=K.disableRtx,be=K.enableDtxForOpus,ye=K.filterLocalCodecs,ge=K.getMediaSections,re=K.removeSSRCAttributes,de=K.revertSimulcast,Te=K.setCodecPreferences,Fe=K.setSimulcast,xe=Y(6543),Ve=Y(8380),ze=Ve.MediaClientLocalDescFailedError,Ze=Ve.MediaClientRemoteDescFailedError,je=Y(9739),xt=je.buildLogLevels,Wt=je.getPlatform,ht=je.isChromeScreenShareTrack,qe=je.oncePerTick,Ue=je.defer,Ye=Y(380),we=Y(2282),nt=Y(2498),Dt=Y(3501),zt=Y(8675),kt=Y(1458),mt=Y(1057),Kn=Y(3073),Yn=J.guessBrowser(),Lr=Wt(),Vr=/android/.test(Lr),Rr="chrome"===Yn,Tr="firefox"===Yn,Pn="safari"===Yn,bi=0,Di={open:["closed","updating"],updating:["closed","open"],closed:[]},lo=function(Vn){function _n(Ne,dt,Zt,en){var mn=Vn.call(this,"open",Di)||this,hi=Xe(en=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:ht,iceServers:[],logLevel:le,offerOptions:{},revertSimulcast:de,sessionTimeout:1e3*X,setCodecPreferences:Te,setSimulcast:Fe,Backoff:H,IceConnectionMonitor:we,RTCIceCandidate:D,RTCPeerConnection:O,RTCSessionDescription:P,Timeout:xe},en)),Eo=xt(en.logLevel),Cs=en.RTCPeerConnection;!0===en.enableDscp&&(en.chromeSpecificConstraints=en.chromeSpecificConstraints||{},en.chromeSpecificConstraints.optional=en.chromeSpecificConstraints.optional||[],en.chromeSpecificConstraints.optional.push({googDscp:!0}));var es=en.log?en.log.createLog("webrtc",mn):new kt("webrtc",mn,Eo,en.loggerName),fo=new Cs(hi,en.chromeSpecificConstraints);en.dummyAudioMediaStreamTrack&&fo.addTrack(en.dummyAudioMediaStreamTrack),Object.defineProperties(mn,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:en.enableDscp},_encodingParameters:{value:dt},_isChromeScreenShareTrack:{value:en.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new en.Timeout(function(){return mn._handleIceGatheringTimeout()},te,!1)},_iceRestartBackoff:{value:new en.Backoff(z)},_instanceId:{value:++bi},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:es},_eventObserver:{value:en.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new en.IceConnectionMonitor(fo)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:en.offerOptions},_onEncodingParametersChanged:{value:qe(function(){mn._needsAnswer||Ss(mn)})},_peerConnection:{value:fo},_preferredAudioCodecs:{value:Zt.audio},_preferredVideoCodecs:{value:Zt.video},_shouldApplyDtx:{value:Zt.audio.every(function(wr){return"opus"!==wr.codec})||Zt.audio.some(function(wr){return"opus"===wr.codec&&wr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new en.Timeout(function(){es.debug("ICE reconnect timed out"),mn.close()},en.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new Ye},_setCodecPreferences:{value:Tr&&Vr&&Zt.video[0]&&"h264"!==Zt.video[0].codec.toLowerCase()?function(wr){return wr}:en.setCodecPreferences},_setSimulcast:{value:en.setSimulcast},_revertSimulcast:{value:en.revertSimulcast},_RTCIceCandidate:{value:en.RTCIceCandidate},_RTCPeerConnection:{value:en.RTCPeerConnection},_RTCSessionDescription:{value:en.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:Ne}}),dt.on("changed",mn._onEncodingParametersChanged),fo.addEventListener("connectionstatechange",mn._handleConnectionStateChange.bind(mn)),fo.addEventListener("datachannel",mn._handleDataChannelEvent.bind(mn)),fo.addEventListener("icecandidate",mn._handleIceCandidateEvent.bind(mn)),fo.addEventListener("iceconnectionstatechange",mn._handleIceConnectionStateChange.bind(mn)),fo.addEventListener("icegatheringstatechange",mn._handleIceGatheringStateChange.bind(mn)),fo.addEventListener("signalingstatechange",mn._handleSignalingStateChange.bind(mn)),fo.addEventListener("track",mn._handleTrackEvent.bind(mn));var zn=mn;return mn.on("stateChanged",function wr(Xi){"closed"===Xi&&(zn.removeListener("stateChanged",wr),zn._dataChannels.forEach(function(lu,tr){zn.removeDataTrackSender(tr)}))}),mn}return L(_n,Vn),_n.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},_n.prototype.setEffectiveAdaptiveSimulcast=function(Ne){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",Ne),this._preferredVideoCodecs.forEach(function(dt){"adaptiveSimulcast"in dt&&(dt.adaptiveSimulcast=Ne)})},Object.defineProperty(_n.prototype,"_shouldApplySimulcast",{get:function(){return!(!Rr&&!Pn)&&this._preferredVideoCodecs.some(function(dt){return"vp8"===dt.codec.toLowerCase()&&dt.simulcast&&!1!==dt.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(_n.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(_n.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(_n.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&ge(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_n.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var Ne=this._preferredVideoCodecs.find(function(dt){return"adaptiveSimulcast"in dt});return Ne&&!0===Ne.adaptiveSimulcast},enumerable:!1,configurable:!0}),_n.prototype._maybeUpdateEncodings=function(Ne,dt,Zt){if(void 0===Zt&&(Zt=!1),"video"!==Ne.kind||"ended"===Ne.readyState)return!1;var en=J.guessBrowser();return!!("safari"===en||"chrome"===en&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(Ne,dt,Zt),!0)},_n.prototype._updateEncodings=function(Ne,dt,Zt){if(this._isChromeScreenShareTrack(Ne)){var en=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];dt.forEach(function(wr,Xi){var lu=en[Xi];lu?(wr.scaleResolutionDownBy=lu.scaleResolutionDownBy,Zt&&delete wr.active):(wr.active=!1,delete wr.scaleResolutionDownBy)})}else{var mn=Ne.getSettings(),es=mn.width*mn.height,fo=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(wr){return es>=wr.pixels}),zn=Math.min(dt.length,fo.maxActiveLayers);dt.forEach(function(wr,Xi){Xi<zn?(wr.scaleResolutionDownBy=1<<zn-Xi-1,Zt&&(wr.active=!0)):(wr.active=!1,delete wr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",dt.map(function(wr,Xi){return"["+Xi+": "+wr.active+", "+(wr.scaleResolutionDownBy||0)+"]"}).join(", "))},_n.prototype._addIceCandidate=function(Ne){var dt=this;return Promise.resolve().then(function(){return Ne=new dt._RTCIceCandidate(Ne),dt._peerConnection.addIceCandidate(Ne)}).catch(function(Zt){dt._log.warn("Failed to add RTCIceCandidate "+(Ne?'"'+Ne.candidate+'"':"null")+": "+Zt.message)})},_n.prototype._addIceCandidates=function(Ne){return Promise.all(Ne.map(this._addIceCandidate,this)).then(function(){})},_n.prototype._addOrUpdateTransceiver=function(Ne){var dt=this,Zt=function dn(Vn,_n){var Ne={audio:Vn._preferredAudioCodecs.map(function(mn){return mn.codec.toLowerCase()}),video:Vn._preferredVideoCodecs.map(function(mn){return mn.codec.toLowerCase()})}[_n],dt=Vn._recycledTransceivers[_n],Zt=Ne.find(function(mn){return Vn._localCodecs.has(mn)});if(!Zt)return dt.shift();var en=dt.find(function(mn){var hi=Vn._remoteCodecMaps.get(mn.mid);return hi&&hi.has(Zt)});return en&&dt.splice(dt.indexOf(en),1),en}(this,Ne.kind);if(Zt&&Zt.sender){var en=Zt.sender.track?Zt.sender.track.id:null;return en&&this._log.warn("Reusing transceiver: "+Zt.mid+"] "+en+" => "+Ne.id),this._replaceTrackPromises.set(Zt,Zt.sender.replaceTrack(Ne).then(function(){Zt.direction="sendrecv"},function(){}).finally(function(){dt._replaceTrackPromises.delete(Zt)})),Zt}return this._peerConnection.addTransceiver(Ne)},_n.prototype._checkIceBox=function(Ne){var dt=$t(Ne);if(!dt)return Promise.resolve();var Zt=this._remoteCandidates.setUfrag(dt);return this._addIceCandidates(Zt)},_n.prototype._answer=function(Ne){var dt=this;return Promise.resolve().then(function(){return dt._negotiationRole||(dt._negotiationRole="answerer"),dt._setRemoteDescription(Ne)}).catch(function(){throw new Ze}).then(function(){return dt._peerConnection.createAnswer()}).then(function(Zt){Zt=Tr?new dt._RTCSessionDescription({sdp:pe(Zt.sdp),type:Zt.type}):Kn(Zt);var en=re(Zt.sdp,["mslabel","label"]);if(dt._shouldApplySimulcast){var mn=en;en=dt._setSimulcast(mn,dt._trackIdsToAttributes),en=dt._revertSimulcast(en,mn,Ne.sdp)}return en=en.replace(/42e015/g,"42e01f"),dt._setLocalDescription({type:Zt.type,sdp:en})}).then(function(){return dt._checkIceBox(Ne)}).then(function(){return dt._queuedDescription&&dt._updateDescription(dt._queuedDescription)}).then(function(){return dt._queuedDescription=null,dt._maybeReoffer(dt._peerConnection.localDescription)}).catch(function(Zt){var en=Zt instanceof Ze?Zt:new ze;throw dt._publishMediaWarning({message:"Failed to _answer",code:en.code,error:Zt}),en})},_n.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},_n.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},_n.prototype._handleDataChannelEvent=function(Ne){var dt=this,Zt=Ne.channel,en=new nt(Zt);this._dataTrackReceivers.add(en),Zt.addEventListener("close",function(){dt._dataTrackReceivers.delete(en)}),this.emit("trackAdded",en)},_n.prototype._handleGlare=function(Ne){var dt=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return dt._trackIdsToAttributes=new Map(dt._appliedTrackIdsToAttributes),dt._setLocalDescription({type:"rollback"})}).then(function(){return dt._needsAnswer=!1,dt._answer(Ne)}).then(function(Zt){return Zt?Promise.resolve():dt._offer()})},_n.prototype._publishMediaWarning=function(Ne){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:Ne.message,code:Ne.code,context:JSON.stringify({error:Ne.error.message,sdp:Ne.sdp})}})},_n.prototype._handleIceCandidateEvent=function(Ne){Ne.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(Ne.candidate));var dt={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};Ne.candidate||(dt.ice.complete=!0),this._isIceLite&&Ne.candidate||(dt.ice.revision=this._localCandidatesRevision++,this.emit("candidates",dt))},_n.prototype._handleIceConnectionStateChange=function(){var Ne=this,dt=this._peerConnection.iceConnectionState,Zt=["connected","completed"].includes(dt),en=this._log;en.debug('ICE connection state is "'+dt+'"'),Zt&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==dt||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&Zt&&en.debug("ICE reconnected"):(en.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===dt?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){Ne._iceConnectionMonitor.stop(),!Ne._shouldRestartIce&&!Ne._isRestartingIce&&(en.warn("ICE Connection Monitor detected inactivity"),Ne._isIceConnectionInactive=!0,Ne._initiateIceRestartBackoff(),Ne.emit("iceConnectionStateChanged"),Ne.emit("connectionStateChanged"))})):["disconnected","completed"].includes(dt)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=dt,this.emit("iceConnectionStateChanged")},_n.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},_n.prototype._handleIceGatheringStateChange=function(){var Ne=this._peerConnection.iceGatheringState,dt=this._log;dt.debug('ICE gathering state is "'+Ne+'"');var Zt=this._iceGatheringTimeout;"gathering"===Ne&&!this._didGenerateLocalCandidates&&!Zt.isSet&&(dt.debug("Starting ICE gathering timeout: "+Zt.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},_n.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},_n.prototype._handleTrackEvent=function(Ne){var dt=this,Zt=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new mt,this._trackMatcher.update(Zt);var en=Ne.track,mn=this._trackMatcher.match(Ne)||en.id,hi=new Dt(mn,en);this._mediaTrackReceivers.forEach(function(Eo){Eo.track.id===hi.track.id&&dt._mediaTrackReceivers.delete(Eo)}),this._mediaTrackReceivers.add(hi),en.addEventListener("ended",function(){return dt._mediaTrackReceivers.delete(hi)}),this.emit("trackAdded",hi)},_n.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var Ne=this._log;Ne.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var dt=this._iceReconnectTimeout;dt.isSet||(Ne.debug("Starting ICE reconnect timeout: "+dt.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(mn){Ne.error("offer failed in _initiateIceRestart with: "+mn.message)})}},_n.prototype._initiateIceRestartBackoff=function(){var Ne=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return Ne._initiateIceRestart()}))},_n.prototype._maybeReoffer=function(Ne){var dt=this._shouldOffer;if(Ne&&Ne.sdp){var Zt=this._peerConnection.getSenders().filter(function(Cs){return Cs.track});dt=["audio","video"].reduce(function(Cs,es){var fo=ge(Ne.sdp,es,"(sendrecv|sendonly)"),zn=Zt.filter(Me.bind(null,es));return Cs||fo.length<zn.length},dt);var en=this._dataChannels.size>0,mn=ge(Ne.sdp,"application").length>0;dt=dt||en&&!mn}return(dt?this._offer():Promise.resolve()).then(function(){return dt})},_n.prototype._offer=function(){var Ne=this,dt=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,dt.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return Ne._peerConnection.createOffer(dt)}).catch(function(Zt){var en=new ze;throw Ne._publishMediaWarning({message:"Failed to create offer",code:en.code,error:Zt}),en}).then(function(Zt){Zt=Tr?new Ne._RTCSessionDescription({sdp:pe(Zt.sdp),type:Zt.type}):Kn(Zt);var en=re(Zt.sdp,["mslabel","label"]);en=Ne._peerConnection.remoteDescription?ye(en,Ne._peerConnection.remoteDescription.sdp):en;var mn=Ne._setCodecPreferences(en,Ne._preferredAudioCodecs,Ne._preferredVideoCodecs);return Ne._shouldOffer=!1,Ne._negotiationRole||(Ne._negotiationRole="offerer"),Ne._shouldApplySimulcast&&(Ne._localDescriptionWithoutSimulcast={type:"offer",sdp:mn},mn=Ne._setSimulcast(mn,Ne._trackIdsToAttributes)),Ne._setLocalDescription({type:"offer",sdp:mn})})},_n.prototype._getMediaTrackSenderId=function(Ne){var dt=Array.from(this._rtpSenders.keys()).find(function(Zt){return Zt.track.id===Ne});return dt?dt.id:Ne},_n.prototype._addOrRewriteLocalTrackIds=function(Ne){var dt=this,en=this._peerConnection.getTransceivers().filter(function(zn){var wr=zn.sender;return!zn.stopped&&wr&&wr.track}),mn=en.filter(function(zn){return zn.mid}),hi=new Map(mn.map(function(zn){return[zn.mid,dt._getMediaTrackSenderId(zn.sender.track.id)]})),Eo=ve(Ne.sdp,hi),Cs=en.filter(function(zn){return!zn.mid}),es=new Map(["audio","video"].map(function(zn){return[zn,Cs.filter(function(wr){return wr.sender.track.kind===zn}).map(function(wr){return dt._getMediaTrackSenderId(wr.sender.track.id)})]})),fo=se(Eo,hi,es);return new this._RTCSessionDescription({sdp:fo,type:Ne.type})},_n.prototype._rollbackAndApplyOffer=function(Ne){var dt=this;return this._setLocalDescription({type:"rollback"}).then(function(){return dt._setLocalDescription(Ne)})},_n.prototype._setLocalDescription=function(Ne){var dt=this;return"rollback"!==Ne.type&&this._shouldApplyDtx&&(Ne=new this._RTCSessionDescription({sdp:be(Ne.sdp),type:Ne.type})),this._peerConnection.setLocalDescription(Ne).catch(function(Zt){dt._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+Ne.type+'" failed with the error "'+Zt.message+'".',Zt);var en=new ze,mn={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+Ne.type+'" failed',code:en.code,error:Zt};throw Ne.sdp&&(dt._log.warn("The SDP was "+Ne.sdp),mn.sdp=Ne.sdp),dt._publishMediaWarning(mn),en}).then(function(){"rollback"!==Ne.type&&(dt._localDescription=dt._addOrRewriteLocalTrackIds(Ne),dt._shouldApplyDtx&&(dt._localDescription=new dt._RTCSessionDescription({sdp:be(dt._localDescription.sdp,[]),type:dt._localDescription.type})),dt._localCandidates=[],"offer"===Ne.type?dt._descriptionRevision++:"answer"===Ne.type&&(dt._lastStableDescriptionRevision=dt._descriptionRevision,po(dt)),dt._localUfrag=$t(Ne),dt.emit("description",dt.getState()))})},_n.prototype._setRemoteDescription=function(Ne){var dt=this;return Ne.sdp&&(Ne.sdp=this._setCodecPreferences(Ne.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),Ne.sdp=this._shouldApplyDtx?be(Ne.sdp):be(Ne.sdp,[]),Tr&&(Ne.sdp=function st(Vn){return Vn.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(Ne.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(Ne.sdp))),Ne=new this._RTCSessionDescription(Ne),Promise.resolve().then(function(){if("answer"===Ne.type&&dt._localDescriptionWithoutSimulcast){var Zt=dt._preferredVideoCodecs.find(function(hi){return"adaptiveSimulcast"in hi}),mn=dt._revertSimulcast(dt._localDescription.sdp,dt._localDescriptionWithoutSimulcast.sdp,Ne.sdp,!!Zt&&!1===Zt.adaptiveSimulcast);if(dt._localDescriptionWithoutSimulcast=null,mn!==dt._localDescription.sdp)return dt._rollbackAndApplyOffer({type:dt._localDescription.type,sdp:mn})}}).then(function(){return dt._peerConnection.setRemoteDescription(Ne)}).then(function(){"answer"===Ne.type&&(dt._isRestartingIce&&(dt._log.debug("An ICE restart was in-progress and is now completed"),dt._isRestartingIce=!1),po(dt))},function(Zt){throw dt._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+Ne.type+'" failed with the error "'+Zt.message+'".',Zt),Ne.sdp&&dt._log.warn("The SDP was "+Ne.sdp),Zt})},_n.prototype._updateDescription=function(Ne){var dt=this;switch(Ne.type){case"answer":case"pranswer":if(Ne.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=Ne.revision;break;case"close":return this._close();case"create-offer":return Ne.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=Ne,Promise.resolve()):(this._descriptionRevision=Ne.revision,this._offer());case"offer":return Ne.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=Ne,Promise.resolve()):(this._descriptionRevision=Ne.revision,this._handleGlare(Ne)):(this._descriptionRevision=Ne.revision,this._answer(Ne).then(function(){}))}var Zt=Ne.revision;return Promise.resolve().then(function(){return dt._setRemoteDescription(Ne)}).catch(function(en){var mn=new Ze;throw dt._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+Ne.type+'" failed',code:mn.code,error:en,sdp:Ne.sdp}),mn}).then(function(){return dt._lastStableDescriptionRevision=Zt,dt._needsAnswer=!1,dt._checkIceBox(Ne)}).then(function(){return dt._queuedDescription&&dt._updateDescription(dt._queuedDescription)}).then(function(){return dt._queuedDescription=null,dt._maybeReoffer(dt._peerConnection.localDescription).then(function(){})})},_n.prototype._updateIce=function(Ne){var dt=this._remoteCandidates.update(Ne);return this._addIceCandidates(dt)},_n.prototype.addDataTrackSender=function(Ne){if(!this._dataChannels.has(Ne))try{var dt={ordered:Ne.ordered};null!==Ne.maxPacketLifeTime&&(dt.maxPacketLifeTime=Ne.maxPacketLifeTime),null!==Ne.maxRetransmits&&(dt.maxRetransmits=Ne.maxRetransmits);var Zt=this._peerConnection.createDataChannel(Ne.id,dt);Ne.addDataChannel(Zt),this._dataChannels.set(Ne,Zt)}catch(en){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+Ne.id+'": '+en.message)}},_n.prototype._handleQueuedPublisherHints=function(){var Ne=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(dt,Zt){var en=dt.deferred,mn=dt.encodings;Ne._mediaTrackSenderToPublisherHints.delete(Zt),Ne._setPublisherHint(Zt,mn).then(function(hi){return en.resolve(hi)}).catch(function(hi){return en.reject(hi)})})},_n.prototype._setPublisherHint=function(Ne,dt){var Zt=this;if(Tr)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(Ne)&&(this._mediaTrackSenderToPublisherHints.get(Ne).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(Ne));var mn=this._rtpSenders.get(Ne);if(!mn)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var hi=Ue();return this._mediaTrackSenderToPublisherHints.set(Ne,{deferred:hi,encodings:dt}),hi.promise}var Eo=mn.getParameters();return null!==dt&&dt.forEach(function(Cs){var es=Cs.enabled,fo=Cs.layer_index;Eo.encodings.length>fo?(Zt._log.debug("layer:"+fo+", active:"+Eo.encodings[fo].active+" => "+es),Eo.encodings[fo].active=es):Zt._log.warn("invalid layer:"+fo+", active:"+es)}),this._maybeUpdateEncodings(mn.track,Eo.encodings,null===dt),mn.setParameters(Eo).then(function(){return"OK"}).catch(function(Cs){return Zt._log.error("Failed to apply publisher hints:",Cs),"COULD_NOT_APPLY_HINT"})},_n.prototype.addMediaTrackSender=function(Ne){var dt=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(Ne)){var en=this._addOrUpdateTransceiver(Ne.track).sender;Ne.addSender(en,function(mn){return dt._setPublisherHint(Ne,mn)}),this._rtpNewSenders.add(en),this._rtpSenders.set(Ne,en)}},_n.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},_n.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},_n.prototype.getState=function(){if(!this._localDescription)return null;var dt={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(dt.sdp=this._localDescription.sdp),{description:dt,id:this.id}},_n.prototype.offer=function(){var Ne=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(dt){return Ne.transition("updating",dt),(Ne._needsAnswer||Ne._isRestartingIce?Promise.resolve():Ne._offer()).then(function(){Ne.tryTransition("open",dt)},function(en){throw Ne.tryTransition("open",dt),en})})},_n.prototype.removeDataTrackSender=function(Ne){var dt=this._dataChannels.get(Ne);dt&&(Ne.removeDataChannel(dt),this._dataChannels.delete(Ne),dt.close())},_n.prototype.removeMediaTrackSender=function(Ne){var dt=this._rtpSenders.get(Ne);dt&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(dt),Ne.removeSender(dt),this._mediaTrackSenderToPublisherHints.has(Ne)&&(this._mediaTrackSenderToPublisherHints.get(Ne).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(Ne)),this._rtpNewSenders.delete(dt),this._rtpSenders.delete(Ne))},_n.prototype.setConfiguration=function(Ne){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(Xe(Ne))},_n.prototype.setIceReconnectTimeout=function(Ne){return this._iceReconnectTimeout.setDelay(Ne),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},_n.prototype.update=function(Ne){var dt=this;return this.bracket("updating",function(Zt){if("closed"===dt.state)return Promise.resolve();dt.transition("updating",Zt);var en=[];return Ne.ice&&en.push(dt._updateIce(Ne.ice)),Ne.description&&en.push(dt._updateDescription(Ne.description)),Promise.all(en).then(function(){dt.tryTransition("open",Zt)},function(mn){throw dt.tryTransition("open",Zt),mn})})},_n.prototype.getStats=function(){var Ne=this;return x(this._peerConnection).then(function(dt){return function Ht(Vn,_n){return Object.assign(_n,{remoteAudioTrackStats:_n.remoteAudioTrackStats.map(function(Ne){return yt(Vn,Ne)}),remoteVideoTrackStats:_n.remoteVideoTrackStats.map(function(Ne){return yt(Vn,Ne)}),localAudioTrackStats:_n.localAudioTrackStats.map(function(Ne){return ho(Vn,Ne)}),localVideoTrackStats:_n.localVideoTrackStats.map(function(Ne){return ho(Vn,Ne)})})}(Ne,dt)})},_n}(zt);function ho(Vn,_n){var Ne=Vn._getMediaTrackSenderId(_n.trackId);return Object.assign(_n,{trackId:Ne})}function yt(Vn,_n){var Ne=ne([],W(Vn._mediaTrackReceivers)).find(function(Zt){return Zt.track.id===_n.trackId});return Object.assign(_n,{trackId:Ne?Ne.id:null})}function $t(Vn){if(Vn.sdp){var _n=Vn.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(_n)return _n[1]}return null}function Xe(Vn){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},Vn)}function Me(Vn,_n){var Ne=_n.track;return Ne&&Ne.kind===Vn&&"ended"!==Ne.readyState}function po(Vn){(function Zo(Vn){Vn._recycledTransceivers.audio=[],Vn._recycledTransceivers.video=[],Vn._peerConnection.getTransceivers().forEach(function(_n){(function kn(Vn,_n){return!Vn.stopped&&!_n._replaceTrackPromises.has(Vn)&&["inactive","recvonly"].includes(Vn.direction)})(_n,Vn)&&Vn._recycledTransceivers[_n.receiver.track.kind].push(_n)})})(Vn),function Ji(Vn){var _n=Vn._peerConnection.localDescription;!_n||!_n.sdp||ge(_n.sdp).forEach(function(Ne){De(Ne).forEach(function(Zt,en){return Vn._localCodecs.add(en)})})}(Vn),function $o(Vn){var _n=Vn._peerConnection.remoteDescription;!_n||!_n.sdp||ge(_n.sdp).forEach(function(Ne){var dt=Ne.match(/^a=mid:(.+)$/m);if(dt&&dt[1]){var Zt=dt[1],en=De(Ne);Vn._remoteCodecMaps.set(Zt,en)}})}(Vn),Ss(Vn).then(function(){Vn._handleQueuedPublisherHints()})}function Ss(Vn){var _n=Vn._encodingParameters,Zt=new Map([["audio",_n.maxAudioBitrate],["video",_n.maxVideoBitrate]]),en=[];return Vn._peerConnection.getSenders().filter(function(mn){return mn.track}).forEach(function(mn){var hi=Zt.get(mn.track.kind),Eo=mn.getParameters();null===hi||0===hi?function io(Vn){Array.isArray(Vn.encodings)&&Vn.encodings.forEach(function(_n){return delete _n.maxBitrate})}(Eo):Vn._isChromeScreenShareTrack(mn.track)?Vn._log.warn("Not setting maxBitrate for "+mn.track.kind+" Track "+mn.track.id+" because it appears to be screen share track: "+mn.track.label):function Nc(Vn,_n){Tr?Vn.encodings=[{maxBitrate:_n}]:Vn.encodings.forEach(function(Ne){Ne.maxBitrate=_n})}(Eo,hi),!Tr&&Vn._enableDscp&&Eo.encodings.length>0&&(Eo.encodings[0].networkPriority="high");var Cs=Vn._rtpNewSenders.has(mn);Vn._maybeUpdateEncodings(mn.track,Eo.encodings,Cs),Vn._rtpNewSenders.delete(mn);var es=mn.setParameters(Eo).catch(function(fo){Vn._log.warn("Error while setting encodings parameters for "+mn.track.kind+" Track "+mn.track.id+": "+(fo.message||fo.name))});en.push(es)}),Promise.all(en)}Ce.exports=lo},6603:function(Ce,Oe,Y){"use strict";var ge,L=this&&this.__extends||(ge=function(re,de){return(ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Te,Fe){Te.__proto__=Fe}||function(Te,Fe){for(var xe in Fe)Object.prototype.hasOwnProperty.call(Fe,xe)&&(Te[xe]=Fe[xe])})(re,de)},function(re,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function Te(){this.constructor=re}ge(re,de),re.prototype=null===de?Object.create(de):(Te.prototype=de.prototype,new Te)}),W=this&&this.__read||function(ge,re){var de="function"==typeof Symbol&&ge[Symbol.iterator];if(!de)return ge;var Fe,Ve,Te=de.call(ge),xe=[];try{for(;(void 0===re||re-- >0)&&!(Fe=Te.next()).done;)xe.push(Fe.value)}catch(ze){Ve={error:ze}}finally{try{Fe&&!Fe.done&&(de=Te.return)&&de.call(Te)}finally{if(Ve)throw Ve.error}}return xe},ne=this&&this.__spreadArray||function(ge,re){for(var de=0,Te=re.length,Fe=ge.length;de<Te;de++,Fe++)ge[Fe]=re[de];return ge},H=Y(7627).guessBrowser,U=Y(1058),D=Y(808),O=Y(7772),P=Y(9739),x=Y(8380).MediaConnectionError,J="firefox"===H(),ie=function(ge){function re(de,Te,Fe){var xe=ge.call(this)||this,Ve=(Fe=Object.assign({audioContextFactory:J?Y(7708):null,PeerConnectionV2:U},Fe)).audioContextFactory?Fe.audioContextFactory.getOrCreate(xe):null,ze=Ve?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(xe,{_audioContextFactory:{value:Fe.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:P.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:Ve?new D(te(Ve)):null},_encodingParameters:{value:de},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:ze},_peerConnections:{value:new Map},_preferredCodecs:{value:Te},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:Fe.PeerConnectionV2}}),xe}return L(re,ge),re.prototype.setEffectiveAdaptiveSimulcast=function(de){this._peerConnections.forEach(function(Te){return Te.setEffectiveAdaptiveSimulcast(de)}),this._preferredCodecs.video.forEach(function(Te){"adaptiveSimulcast"in Te&&(Te.adaptiveSimulcast=de)})},Object.defineProperty(re.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),re.prototype._closeAbsentPeerConnections=function(de){var Te=new Set(de.map(function(Fe){return Fe.id}));return this._peerConnections.forEach(function(Fe){Te.has(Fe.id)||Fe._close()}),this},re.prototype._getConfiguration=function(){return this._configurationDeferred.promise},re.prototype._getOrCreate=function(de,Te){var Fe=this,xe=this,Ve=this._peerConnections.get(de);if(!Ve){var ze=this._PeerConnectionV2,Ze=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},Te);try{Ve=new ze(de,this._encodingParameters,this._preferredCodecs,Ze)}catch{throw new x}this._peerConnections.set(Ve.id,Ve),Ve.on("candidates",this.queue.bind(this,"candidates")),Ve.on("description",this.queue.bind(this,"description")),Ve.on("trackAdded",this.queue.bind(this,"trackAdded")),Ve.on("stateChanged",function je(xt){"closed"===xt&&(Ve.removeListener("stateChanged",je),xe._dataTrackSenders.forEach(function(Wt){return Ve.removeDataTrackSender(Wt)}),xe._mediaTrackSenders.forEach(function(Wt){return Ve.removeMediaTrackSender(Wt)}),xe._peerConnections.delete(Ve.id),xe._closedPeerConnectionIds.add(Ve.id),ye(xe),be(xe))}),Ve.on("connectionStateChanged",function(){return ye(Fe)}),Ve.on("iceConnectionStateChanged",function(){return be(Fe)}),this._dataTrackSenders.forEach(Ve.addDataTrackSender,Ve),this._mediaTrackSenders.forEach(Ve.addMediaTrackSender,Ve),be(this)}return Ve},re.prototype.close=function(){return this._peerConnections.forEach(function(de){de.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),be(this),this},re.prototype.createAndOffer=function(){var de=this;return this._getConfiguration().then(function(Te){var Fe;do{Fe=P.makeUUID()}while(de._peerConnections.has(Fe));return de._getOrCreate(Fe,Te)}).then(function(Te){return Te.offer()}).then(function(){return de})},re.prototype.getTrackReceivers=function(){return P.flatMap(this._peerConnections,function(de){return de.getTrackReceivers()})},re.prototype.getStates=function(){var de=[];return this._peerConnections.forEach(function(Te){var Fe=Te.getState();Fe&&de.push(Fe)}),de},re.prototype.setConfiguration=function(de){return this._configuration&&(this._configurationDeferred=P.defer(),this._peerConnections.forEach(function(Te){Te.setConfiguration(de)})),this._configuration=de,this._configurationDeferred.resolve(de),this},re.prototype.setIceReconnectTimeout=function(de){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(Te){Te.setIceReconnectTimeout(de)}),this._sessionTimeout=de),this},re.prototype.setTrackSenders=function(de){var Te=new Set(de.filter(function(Ve){return"data"===Ve.kind})),Fe=new Set(de.filter(function(Ve){return Ve&&("audio"===Ve.kind||"video"===Ve.kind)})),xe=function z(ge,re,de){return{data:X(ge,re),media:K(ge,de)}}(this,Te,Fe);return this._dataTrackSenders=Te,this._mediaTrackSenders=Fe,function le(ge,re){(re.data.add.size||re.data.remove.size||re.media.add.size||re.media.remove.size)&&ge._peerConnections.forEach(function(de){re.data.remove.forEach(de.removeDataTrackSender,de),re.media.remove.forEach(de.removeMediaTrackSender,de),re.data.add.forEach(de.addDataTrackSender,de),re.media.add.forEach(de.addMediaTrackSender,de),(re.media.add.size||re.media.remove.size||re.data.add.size&&!de.isApplicationSectionNegotiated)&&de.offer()})}(this,xe),this},re.prototype.update=function(de,Te){var Fe=this;return void 0===Te&&(Te=!1),Te&&this._closeAbsentPeerConnections(de),this._getConfiguration().then(function(xe){return Promise.all(de.map(function(Ve){return Fe._closedPeerConnectionIds.has(Ve.id)?null:Fe._getOrCreate(Ve.id,xe).update(Ve)}))}).then(function(){return Fe})},re.prototype.getStats=function(){var de=Array.from(this._peerConnections.values());return Promise.all(de.map(function(Te){return Te.getStats().then(function(Fe){return[Te.id,Fe]})})).then(function(Te){return new Map(Te)})},re}(O);function te(ge){return ge.createMediaStreamDestination().stream.getAudioTracks()[0]}function X(ge,re){return{add:P.difference(re,ge._dataTrackSenders),remove:P.difference(ge._dataTrackSenders,re)}}function K(ge,re){return{add:P.difference(re,ge._mediaTrackSenders),remove:P.difference(ge._mediaTrackSenders,re)}}var ve,se={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function pe(ge){return ge.length?(ve=ve||function De(){return Object.keys(se).reduce(function(ge,re){var de;return Object.assign(ge,((de={})[se[re]]=re,de))},{})}(),ge.reduce(function(re,de){return ve[Math.max(se[re],se[de])]})):"new"}function be(ge){ge._lastIceConnectionState=ge.iceConnectionState,ge._iceConnectionState=pe(ne([],W(ge._peerConnections.values())).map(function(re){return re.iceConnectionState})),ge.iceConnectionState!==ge._lastIceConnectionState&&ge.emit("iceConnectionStateChanged")}function ye(ge){ge._lastConnectionState=ge.connectionState,ge._connectionState=pe(ne([],W(ge._peerConnections.values())).map(function(re){return re.connectionState})),ge.connectionState!==ge._lastConnectionState&&ge.emit("connectionStateChanged")}Ce.exports=ie},8069:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(4071),ne=1,H=function(U){function D(O,P){var x=U.call(this,O,"publisher_hints",P)||this;return x.on("ready",function(J){x._log.debug("publisher_hints transport ready:",J),J.on("message",function(ie){"publisher_hints"===(x._log.debug("Incoming: ",ie),ie.type)?ie.publisher&&ie.publisher.hints&&ie.publisher.id&&x._processPublisherHints(ie.publisher.hints,ie.publisher.id):x._log.warn("Unknown message type: ",ie.type)})}),x}return L(D,U),D.prototype.sendTrackReplaced=function(O){if(this._transport){var x={type:"client_reset",track:O.trackSid,id:ne++};this._log.debug("Outgoing: ",x),this._transport.publish(x)}},D.prototype.sendHintResponse=function(O){if(this._transport){var J={type:"publisher_hints",id:O.id,hints:O.hints};this._log.debug("Outgoing: ",J),this._transport.publish(J)}},D.prototype._processPublisherHints=function(O,P){try{this.emit("updated",O,P)}catch(x){this._log.error("error processing hints:",x)}},D}(W);Ce.exports=H},8930:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(){var D=H.call(this)||this;return Object.defineProperties(D,{_revision:{value:1,writable:!0}}),D}return L(U,H),U.prototype.update=function(D){return D.revision<this._revision?this:(this._revision=D.revision,this.enable(D.is_recording))},U}(Y(9987));Ce.exports=ne},1118:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(2184),ne=Y(467),H=function(U){function D(O,P,x,J,ie,te){var le=U.call(this,O.sid,O.identity)||this;return te=Object.assign({RemoteTrackPublicationV2:ne},te),Object.defineProperties(le,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:te.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:P},updateSubscriberTrackPriority:{value:function(X,z){return x(X,z)}},updateTrackRenderHint:{value:function(X,z){return J(X,z)}},clearTrackHint:{value:function(X){return ie(X)}},revision:{enumerable:!0,get:function(){return this._revision}}}),le.update(O)}return L(D,U),D.prototype._getOrCreateTrack=function(O){var P=this._RemoteTrackPublicationV2,x=this.tracks.get(O.sid);return x||(x=new P(O,this._getInitialTrackSwitchOffState(O.sid)),this.addTrack(x)),x},D.prototype.update=function(O){var P=this;if(null!==this.revision&&O.revision<=this.revision)return this;this._revision=O.revision;var x=new Set;switch(O.tracks.forEach(function(J){var ie=P._getOrCreateTrack(J);ie.update(J),x.add(ie)}),this.tracks.forEach(function(J){x.has(J)||P.removeTrack(J)}),O.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},D}(W);Ce.exports=H},467:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){return H.call(this,D.sid,D.name,D.kind,D.enabled,D.priority,O)||this}return L(U,H),U.prototype.update=function(D){return this.enable(D.enabled),this.setPriority(D.priority),this},U}(Y(8956));Ce.exports=ne},7818:function(Ce,Oe,Y){"use strict";var P,L=this&&this.__extends||(P=function(x,J){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,te){ie.__proto__=te}||function(ie,te){for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(ie[le]=te[le])})(x,J)},function(x,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ie(){this.constructor=x}P(x,J),x.prototype=null===J?Object.create(J):(ie.prototype=J.prototype,new ie)}),W=Y(4071),ne=Y(6543),H=Y(9739).isDeepEqual,D=1,O=function(P){function x(J,ie){var te=P.call(this,J,"render_hints",ie)||this;return Object.defineProperties(te,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new ne(function(){te._sendAllHints(),te._responseTimer.setDelay(2*te._responseTimer.delay)},2e3,!1)}}),te.on("ready",function(le){le.on("message",function(X){"render_hints"===(te._log.debug("Incoming: ",X),X.type)?te._processHintResults(X&&X.subscriber&&X.subscriber.hints||[]):te._log.warn("Unknown message type: ",X.type)}),te._sendAllHints()}),te}return L(x,P),x.prototype._sendAllHints=function(){var J=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(ie){var te=J._trackSidsToRenderHints.get(ie);te.renderDimensions&&(te.isDimensionDirty=!0),"enabled"in te&&(te.isEnabledDirty=!0)}),this._sendHints()},x.prototype._processHintResults=function(J){var ie=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),J.forEach(function(te){"OK"!==te.result&&ie._log.debug("Server error processing hint:",te)}),this._sendHints()},x.prototype._sendHints=function(){var J=this;if(this._transport&&!this._responseTimer.isSet){var ie=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(le){var X=J._trackSidsToRenderHints.get(le);if(X.isEnabledDirty||X.isDimensionDirty){var z={track:le};X.isEnabledDirty&&(z.enabled=X.enabled,X.isEnabledDirty=!1),X.isDimensionDirty&&(z.render_dimensions=X.renderDimensions,X.isDimensionDirty=!1),ie.push(z)}}),ie.length>0){var te={type:"render_hints",subscriber:{id:D++,hints:ie}};this._log.debug("Outgoing: ",te),this._transport.publish(te),this._responseTimer.start()}}},x.prototype.setTrackHint=function(J,ie){var te=this._trackSidsToRenderHints.get(J)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in ie&&te.enabled!==ie.enabled&&(te.enabled=!!ie.enabled,te.isEnabledDirty=!0),ie.renderDimensions&&!H(ie.renderDimensions,te.renderDimensions)&&(te.renderDimensions=ie.renderDimensions,te.isDimensionDirty=!0),this._trackSidsToRenderHints.set(J,te),this._sendHints()},x.prototype.clearTrackHint=function(J){this._trackSidsToRenderHints.delete(J)},x}(W);Ce.exports=O},2112:function(Ce,Oe,Y){"use strict";var Ue,L=this&&this.__extends||(Ue=function(Ye,we){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,Dt){nt.__proto__=Dt}||function(nt,Dt){for(var zt in Dt)Object.prototype.hasOwnProperty.call(Dt,zt)&&(nt[zt]=Dt[zt])})(Ye,we)},function(Ye,we){if("function"!=typeof we&&null!==we)throw new TypeError("Class extends value "+String(we)+" is not a constructor or null");function nt(){this.constructor=Ye}Ue(Ye,we),Ye.prototype=null===we?Object.create(we):(nt.prototype=we.prototype,new nt)}),W=this&&this.__read||function(Ue,Ye){var we="function"==typeof Symbol&&Ue[Symbol.iterator];if(!we)return Ue;var Dt,kt,nt=we.call(Ue),zt=[];try{for(;(void 0===Ye||Ye-- >0)&&!(Dt=nt.next()).done;)zt.push(Dt.value)}catch(mt){kt={error:mt}}finally{try{Dt&&!Dt.done&&(we=nt.return)&&we.call(nt)}finally{if(kt)throw kt.error}}return zt},ne=Y(2314),H=Y(9056),U=Y(5775),D=Y(8930),O=Y(8343),P=Y(1118),x=Y(7805),J=Y(8004),ie=Y(5210),te=Y(7818),le=Y(8069),X=Y(9739),z=X.constants.DEFAULT_SESSION_TIMEOUT_SEC,K=X.createBandwidthProfilePayload,se=X.defer,ve=X.difference,De=X.filterObject,pe=X.flatMap,be=X.oncePerTick,ye=Y(8218),ge=Y(8380).createTwilioError,de=function(Ue){function Ye(we,nt,Dt,zt,kt){var mt=this;nt.options=Object.assign({session_timeout:z},nt.options),kt=Object.assign({DominantSpeakerSignaling:ne,NetworkQualityMonitor:H,NetworkQualitySignaling:U,RecordingSignaling:D,RemoteParticipantV2:P,TrackPrioritySignaling:J,TrackSwitchOffSignaling:ie,bandwidthProfile:null,sessionTimeout:1e3*nt.options.session_timeout,statsPublishIntervalMs:1e4},kt),we.setBandwidthProfile(kt.bandwidthProfile),zt.setIceReconnectTimeout(kt.sessionTimeout);var Kn=function(Lr){return mt._getTrackReceiver(Lr)},Yn=(mt=Ue.call(this,we,nt.sid,nt.name,kt)||this)._log;return Object.defineProperties(mt,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:kt.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:we.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:we.networkQualityConfiguration},_peerConnectionManager:{value:zt},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:kt.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new kt.DominantSpeakerSignaling(Kn,{log:Yn})},_networkQualitySignaling:{value:new kt.NetworkQualitySignaling(Kn,we.networkQualityConfiguration,{log:Yn})},_renderHintsSignaling:{value:new te(Kn,{log:Yn})},_publisherHintsSignaling:{value:new le(Kn,{log:Yn})},_trackPrioritySignaling:{value:new kt.TrackPrioritySignaling(Kn,{log:Yn})},_trackSwitchOffSignaling:{value:new kt.TrackSwitchOffSignaling(Kn,{log:Yn})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Dt},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:nt.options.media_region||null}}),mt._initTrackSwitchOffSignaling(),mt._initDominantSpeakerSignaling(),mt._initNetworkQualityMonitorSignaling(),mt._initPublisherHintSignaling(),function Ve(Ue,Ye){var we=be(function(){Ue._publishNewLocalParticipantState()}),nt=be(function(){var Dt=pe(Ye.tracks,function(zt){return zt.trackTransceiver});Ue._peerConnectionManager.setTrackSenders(Dt)});Ye.on("trackAdded",nt),Ye.on("trackRemoved",nt),Ye.on("updated",we),Ue.on("stateChanged",function Dt(zt){"disconnected"===zt&&(Ye.removeListener("trackAdded",nt),Ye.removeListener("trackRemoved",nt),Ye.removeListener("updated",we),Ue.removeListener("stateChanged",Dt),Ye.disconnect())}),Ue.on("signalingConnectionStateChanged",function(){var Dt=Ue.localParticipant,kt=Dt.identity,mt=Dt.sid;switch(Ue.signalingConnectionState){case"connected":Dt.connect(mt,kt);break;case"reconnecting":Dt.reconnecting()}})}(mt,we),function ze(Ue,Ye){Ye.on("description",function(nt){Ue._publishPeerConnectionState(nt)}),Ye.dequeue("description"),Ye.on("candidates",function(nt){Ue._publishPeerConnectionState(nt)}),Ye.dequeue("candidates"),Ye.on("trackAdded",Ue._addTrackReceiver.bind(Ue)),Ye.dequeue("trackAdded"),Ye.getTrackReceivers().forEach(Ue._addTrackReceiver,Ue),Ye.on("connectionStateChanged",function(){Ue.emit("connectionStateChanged")}),Ye.on("iceConnectionStateChanged",function(){Ue.emit("iceConnectionStateChanged"),"failed"===Ue.iceConnectionState&&(null!==Ue.localParticipant.networkQualityLevel&&Ue.localParticipant.setNetworkQualityLevel(0),Ue.participants.forEach(function(we){null!==we.networkQualityLevel&&we.setNetworkQualityLevel(0)}))})}(mt,zt),function Ze(Ue,Ye){Ye.on("message",Ue._update.bind(Ue)),Ye.on("stateChanged",function we(nt,Dt){"disconnected"===nt&&("disconnected"!==Ue.state&&Ue._disconnect(Dt),Ye.removeListener("stateChanged",we)),Ue.emit("signalingConnectionStateChanged")})}(mt,Dt),function je(Ue,Ye,we){var nt=new Map,Dt=!1,zt=setInterval(function(){Ue.getStats().then(function(kt){Dt=!Dt,kt.forEach(function(mt,Kn){var Yn=new x(Kn,mt,!0);Ye.publishEvent("quality","stats-report","info",{audioTrackStats:Yn.remoteAudioTrackStats.map(function(Tr,Pn){return ht(Tr,mt.remoteAudioTrackStats[Pn],nt)}),localAudioTrackStats:Yn.localAudioTrackStats.map(function(Tr,Pn){return Wt(Tr,mt.localAudioTrackStats[Pn],nt)}),localVideoTrackStats:Yn.localVideoTrackStats.map(function(Tr,Pn){return Wt(Tr,mt.localVideoTrackStats[Pn],nt)}),peerConnectionId:Yn.peerConnectionId,videoTrackStats:Yn.remoteVideoTrackStats.map(function(Tr,Pn){return ht(Tr,mt.remoteVideoTrackStats[Pn],nt)})});var Lr=pe(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Tr){return Yn[Tr].map(function(Pn){return Pn.trackSid+"+"+Pn.ssrc})});if(ve(Array.from(nt.keys()),Lr).forEach(function(Tr){return nt.delete(Tr)}),Dt){var Rr=function qe(Ue,Ye){return(Ue=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:Ye,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},De(Ue||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},De(Ue.localCandidate||{},null)),Ue.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},De(Ue.remoteCandidate||{},null)),Ue}(mt.activeIceCandidatePair,Yn.peerConnectionId);Ye.publishEvent("quality","active-ice-candidate-pair","info",Rr)}})},function(){})},we);Ue.on("stateChanged",function kt(mt){"disconnected"===mt&&(clearInterval(zt),Ue.removeListener("stateChanged",kt))})}(mt,Dt,kt.statsPublishIntervalMs),mt._update(nt),mt._peerConnectionManager.setEffectiveAdaptiveSimulcast(mt._publisherHintsSignaling.isSetup),mt}return L(Ye,Ue),Object.defineProperty(Ye.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),Ye.prototype._deleteTrackReceiverDeferred=function(we){return this._trackReceiverDeferreds.delete(we)},Ye.prototype._getOrCreateTrackReceiverDeferred=function(we){var nt=this._trackReceiverDeferreds.get(we)||se(),zt=this._peerConnectionManager.getTrackReceivers().find(function(kt){return kt.id===we&&"ended"!==kt.readyState});return zt?nt.resolve(zt):this._trackReceiverDeferreds.set(we,nt),nt},Ye.prototype._addTrackReceiver=function(we){return this._getOrCreateTrackReceiverDeferred(we.id).resolve(we),this},Ye.prototype._disconnect=function(we){var nt=Ue.prototype._disconnect.call(this,we);return nt&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Dt){Dt.publishFailed(we||new Error("LocalParticipant disconnected"))}),nt},Ye.prototype._getTrackReceiver=function(we){var nt=this;return this._getOrCreateTrackReceiverDeferred(we).promise.then(function(Dt){return nt._deleteTrackReceiverDeferred(we),Dt})},Ye.prototype._getInitialTrackSwitchOffState=function(we){var nt=this._pendingSwitchOffStates.get(we)||!1;return this._pendingSwitchOffStates.delete(we),nt&&this._log.warn("["+we+"] was initially switched off! "),nt},Ye.prototype._getTrackSidsToTrackSignalings=function(){var we=pe(this.participants,function(nt){return Array.from(nt.tracks)});return new Map(we)},Ye.prototype._getOrCreateRemoteParticipant=function(we){var nt=this,Dt=this._RemoteParticipantV2,zt=this.participants.get(we.sid),kt=this;return zt||((zt=new Dt(we,function(mt){return nt._getInitialTrackSwitchOffState(mt)},function(mt,Kn){return nt._trackPrioritySignaling.sendTrackPriorityUpdate(mt,"subscribe",Kn)},function(mt,Kn){return nt._renderHintsSignaling.setTrackHint(mt,Kn)},function(mt){return nt._renderHintsSignaling.clearTrackHint(mt)})).on("stateChanged",function mt(Kn){"disconnected"===Kn&&(zt.removeListener("stateChanged",mt),kt.participants.delete(zt.sid),kt._disconnectedParticipantRevisions.set(zt.sid,zt.revision))}),this.connectParticipant(zt)),zt},Ye.prototype._getState=function(){return{participant:this.localParticipant.getState()}},Ye.prototype._maybeAddBandwidthProfile=function(we){var nt=this.localParticipant,Dt=nt.bandwidthProfile,zt=nt.bandwidthProfileRevision;return Dt&&this._lastBandwidthProfileRevision<zt?(this._lastBandwidthProfileRevision=zt,Object.assign({bandwidth_profile:K(Dt)},we)):we},Ye.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},Ye.prototype._publishPeerConnectionState=function(we){this._transport.publish(Object.assign({peer_connections:[we]},this._getState()))},Ye.prototype._update=function(we){var nt=this;if(we.subscribed&&we.subscribed.revision>this._subscribedRevision){this._subscribedRevision=we.subscribed.revision,we.subscribed.tracks.forEach(function(kt){kt.id?(nt._subscriptionFailures.delete(kt.sid),nt._subscribed.set(kt.sid,kt.id)):kt.error&&!nt._subscriptionFailures.has(kt.sid)&&nt._subscriptionFailures.set(kt.sid,kt.error)});var Dt=new Set(we.subscribed.tracks.filter(function(kt){return!!kt.id}).map(function(kt){return kt.sid}));this._subscribed.forEach(function(kt,mt){Dt.has(mt)||nt._subscribed.delete(mt)})}var zt=new Set;return(we.participants||[]).forEach(function(kt){if(kt.sid!==nt.localParticipant.sid){var mt=nt._disconnectedParticipantRevisions.get(kt.sid);if(!(mt&&kt.revision<=mt)){mt&&nt._disconnectedParticipantRevisions.delete(kt.sid);var Kn=nt._getOrCreateRemoteParticipant(kt);Kn.update(kt),zt.add(Kn)}}}),"synced"===we.type&&this.participants.forEach(function(kt){zt.has(kt)||kt.disconnect()}),function xt(Ue){var Ye=Ue._getTrackSidsToTrackSignalings();Ue._subscriptionFailures.forEach(function(we,nt){var Dt=Ye.get(nt);Dt&&(Ue._subscriptionFailures.delete(nt),Dt.subscribeFailed(ge(we.code,we.message)))}),Ye.forEach(function(we){var nt=Ue._subscribed.get(we.sid);(!nt||we.isSubscribed&&we.trackTransceiver.id!==nt)&&we.setTrackTransceiver(null),nt&&Ue._getTrackReceiver(nt).then(function(Dt){return we.setTrackTransceiver(Dt)})})}(this),we.peer_connections&&this._peerConnectionManager.update(we.peer_connections,"synced"===we.type),we.recording&&this.recording.update(we.recording),we.published&&we.published.revision>this._publishedRevision&&(this._publishedRevision=we.published.revision,we.published.tracks.forEach(function(kt){kt.sid&&nt._published.set(kt.id,kt.sid)}),this.localParticipant.update(we.published)),we.participant&&this.localParticipant.connect(we.participant.sid,we.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(kt){var mt=kt.channel;!kt.isSetup&&we.media_signaling&&we.media_signaling[mt]&&we.media_signaling[mt].transport&&"data-channel"===we.media_signaling[mt].transport.type&&kt.setup(we.media_signaling[mt].transport.label)}),this},Ye.prototype._initPublisherHintSignaling=function(){var we=this;this._publisherHintsSignaling.on("updated",function(Dt,zt){Promise.all(Dt.map(function(kt){return we.localParticipant.setPublisherHint(kt.track,kt.encodings).then(function(mt){return{track:kt.track,result:mt}})})).then(function(kt){we._publisherHintsSignaling.sendHintResponse({id:zt,hints:kt})})});var nt=function(Dt){"video"===Dt.kind&&Dt.trackTransceiver.on("replaced",function(){we._publisherHintsSignaling.sendTrackReplaced({trackSid:Dt.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Dt){return nt(Dt)}),this.localParticipant.on("trackAdded",function(Dt){return nt(Dt)})},Ye.prototype._initTrackSwitchOffSignaling=function(){var we=this;this._trackSwitchOffSignaling.on("updated",function(nt,Dt){try{we._log.debug("received trackSwitch: ",{tracksOn:Dt,tracksOff:nt});var zt=new Map;Dt.forEach(function(kt){return zt.set(kt,!0)}),nt.forEach(function(kt){zt.get(kt)&&we._log.warn(kt+" is DUPLICATED in both tracksOff and tracksOn list"),zt.set(kt,!1)}),we.participants.forEach(function(kt){kt.tracks.forEach(function(mt){var Kn=zt.get(mt.sid);typeof Kn<"u"&&(mt.setSwitchedOff(!Kn),zt.delete(mt.sid))})}),zt.forEach(function(kt,mt){return we._pendingSwitchOffStates.set(mt,!kt)})}catch(kt){we._log.error("error processing track switch off:",kt)}})},Ye.prototype._initDominantSpeakerSignaling=function(){var we=this;this._dominantSpeakerSignaling.on("updated",function(){return we.setDominantSpeaker(we._dominantSpeakerSignaling.loudestParticipantSid)})},Ye.prototype._initNetworkQualityMonitorSignaling=function(){var we=this;this._networkQualitySignaling.on("ready",function(){var nt=new we._NetworkQualityMonitor(we._peerConnectionManager,we._networkQualitySignaling);we._networkQualityMonitor=nt,nt.on("updated",function(){"failed"!==we.iceConnectionState&&(we.localParticipant.setNetworkQualityLevel(nt.level,nt.levels),we.participants.forEach(function(Dt){var zt=nt.remoteLevels.get(Dt.sid);zt&&Dt.setNetworkQualityLevel(zt.level,zt)}))}),nt.start()}),this._networkQualitySignaling.on("teardown",function(){return we._teardownNetworkQualityMonitor()})},Ye.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},Ye.prototype.getStats=function(){var we=this;return this._peerConnectionManager.getStats().then(function(nt){return new Map(Array.from(nt).map(function(Dt){var zt=W(Dt,2),mt=zt[1];return[zt[0],Object.assign({},mt,{localAudioTrackStats:Fe(we,mt.localAudioTrackStats),localVideoTrackStats:Fe(we,mt.localVideoTrackStats),remoteAudioTrackStats:xe(we,mt.remoteAudioTrackStats),remoteVideoTrackStats:xe(we,mt.remoteVideoTrackStats)})]}))})},Ye}(O);function Te(Ue,Ye){return Ye.reduce(function(we,nt){var Dt=Ue.get(nt.trackId);return Dt?[Object.assign({},nt,{trackSid:Dt})].concat(we):we},[])}function Fe(Ue,Ye){return Te(Ue._published,Ye)}function xe(Ue,Ye){return Te(new Map(Array.from(Ue._subscribed.entries()).map(function(nt){var Dt=W(nt,2);return[Dt[1],Dt[0]]})),Ye)}function Wt(Ue,Ye,we){var nt=Ye.framesEncoded,Dt=Ye.packetsSent,zt=Ye.totalEncodeTime,kt=Ye.totalPacketSendDelay,mt=Object.assign({},Ue),Kn=Ue.trackSid+"+"+Ue.ssrc,Yn=we.get(Kn)||new Map;if("number"==typeof zt&&"number"==typeof nt){var Lr=Yn.get("avgEncodeDelay")||new ye;Lr.putSample(1e3*zt,nt),mt.avgEncodeDelay=Math.round(Lr.get()),Yn.set("avgEncodeDelay",Lr)}if("number"==typeof kt&&"number"==typeof Dt){var Vr=Yn.get("avgPacketSendDelay")||new ye;Vr.putSample(1e3*kt,Dt),mt.avgPacketSendDelay=Math.round(Vr.get()),Yn.set("avgPacketSendDelay",Vr)}return we.set(Kn,Yn),mt}function ht(Ue,Ye,we){var nt=Ye.estimatedPlayoutTimestamp,Dt=Ye.framesDecoded,zt=Ye.jitterBufferDelay,kt=Ye.jitterBufferEmittedCount,mt=Ye.totalDecodeTime,Kn=Object.assign({},Ue),Yn=Ue.trackSid+"+"+Ue.ssrc,Lr=we.get(Yn)||new Map;if("number"==typeof nt&&(Kn.estimatedPlayoutTimestamp=nt),"number"==typeof Dt&&"number"==typeof mt){var Vr=Lr.get("avgDecodeDelay")||new ye;Vr.putSample(1e3*mt,Dt),Kn.avgDecodeDelay=Math.round(Vr.get()),Lr.set("avgDecodeDelay",Vr)}if("number"==typeof zt&&"number"==typeof kt){var Rr=Lr.get("avgJitterBufferDelay")||new ye;Rr.putSample(1e3*zt,kt),Kn.avgJitterBufferDelay=Math.round(Rr.get()),Lr.set("avgJitterBufferDelay",Rr)}return we.set(Yn,Lr),Kn}Ce.exports=de},8004:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,"track_priority",O)||this;return Object.defineProperties(P,{_enqueuedPriorityUpdates:{value:new Map}}),P.on("ready",function(x){Array.from(P._enqueuedPriorityUpdates.keys()).forEach(function(J){x.publish({type:"track_priority",track:J,subscribe:P._enqueuedPriorityUpdates.get(J)})})}),P}return L(U,H),U.prototype.sendTrackPriorityUpdate=function(D,O,P){if("subscribe"!==O)throw new Error("only subscribe priorities are supported, found: "+O);this._enqueuedPriorityUpdates.set(D,P),this._transport&&this._transport.publish({type:"track_priority",track:D,subscribe:P})},U}(Y(4071));Ce.exports=ne},5210:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,"track_switch_off",O)||this;return P.on("ready",function(x){x.on("message",function(J){"track_switch_off"===J.type&&P._setTrackSwitchOffUpdates(J.off||[],J.on||[])})}),P}return L(U,H),U.prototype._setTrackSwitchOffUpdates=function(D,O){this.emit("updated",D,O)},U}(Y(4071));Ce.exports=ne},4892:function(Ce,Oe,Y){"use strict";var Ve,L=this&&this.__extends||(Ve=function(ze,Ze){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(je,xt){je.__proto__=xt}||function(je,xt){for(var Wt in xt)Object.prototype.hasOwnProperty.call(xt,Wt)&&(je[Wt]=xt[Wt])})(ze,Ze)},function(ze,Ze){if("function"!=typeof Ze&&null!==Ze)throw new TypeError("Class extends value "+String(Ze)+" is not a constructor or null");function je(){this.constructor=ze}Ve(ze,Ze),ze.prototype=null===Ze?Object.create(Ze):(je.prototype=Ze.prototype,new je)}),W=Y(8675),ne=Y(5330),H=Y(2606),U=Y(8701).reconnectBackoffConfig,D=Y(6543),O=Y(8701),P=O.SDK_NAME,x=O.SDK_VERSION,J=O.SDP_FORMAT,ie=Y(9739),te=ie.createBandwidthProfilePayload,le=ie.createMediaSignalingPayload,X=ie.createSubscribePayload,z=ie.getUserAgent,K=ie.isNonArrayObject,se=Y(8380),ve=se.createTwilioError,De=se.RoomCompletedError,pe=se.SignalingConnectionError,be=se.SignalingServerBusyError,re={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},de=function(Ve){function ze(Ze,je,xt,Wt,ht,qe){var Ue;return qe=Object.assign({Backoff:H,TwilioConnection:ne,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:z()},qe),Ue=Ve.call(this,"connecting",re)||this,Object.defineProperties(Ue,{_accessToken:{value:je},_automaticSubscription:{value:qe.automaticSubscription},_bandwidthProfile:{value:qe.bandwidthProfile},_dominantSpeaker:{value:qe.dominantSpeaker},_adaptiveSimulcast:{value:qe.adaptiveSimulcast},_eventObserver:{value:qe.eventObserver,writable:!1},_renderHints:{value:qe.renderHints},_iceServersStatus:{value:Array.isArray(qe.iceServers)?"overrode":"acquire"},_localParticipant:{value:xt},_name:{value:Ze},_networkQuality:{value:K(qe.networkQuality)||qe.networkQuality},_options:{value:qe},_peerConnectionManager:{value:Wt},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new qe.Backoff(U)},_session:{value:null,writable:!0},_trackPriority:{value:qe.trackPriority},_trackSwitchOff:{value:qe.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:qe.userAgent},_wsServer:{value:ht}}),function xe(Ve){function ze(){if("disconnected"!==Ve.state){Ve._twilioConnection&&Ve._twilioConnection.removeListener("message",je);var Ye=Ve._options,Dt=Ye.TwilioConnection,zt=new Dt(Ve._wsServer,Object.assign({helloBody:"connecting"===Ve.state&&"acquire"===Ve._iceServersStatus?Ve._createIceMessage():Ve._createConnectOrSyncOrDisconnectMessage()},Ye));zt.once("close",function(kt){kt===Dt.CloseReason.LOCAL?Ze():Ze(new Error(kt))}),zt.on("message",je),Ve._twilioConnection=zt}}function Ze(Ue){if("disconnected"!==Ve.state){if(!Ue)return void Ve.disconnect();var Ye=Ve._getReconnectTimer();if(!Ye){var we=Ue.message===ne.CloseReason.BUSY?new be:new pe;return void Ve.disconnect(we)}"connected"===Ve.state&&Ve.preempt("syncing"),Ye.then(ze)}}function je(Ue){if("disconnected"!==Ve.state){if("error"===Ue.type)return void Ve.disconnect(ve(Ue.code,Ue.message));switch(Ve.state){case"connected":switch(Ue.type){case"connected":case"synced":case"update":return void Ve.emit("message",Ue);case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}case"connecting":switch(Ue.type){case"iced":return void Ve._options.onIced(Ue.ice_servers).then(function(){Ve._sendConnectOrSyncOrDisconnectMessage()});case"connected":return Ve._setSession(Ue.session,Ue.options.session_timeout),Ve.emit("connected",Ue),void Ve.preempt("connected");case"synced":case"update":return void Ve._updatesReceived.push(Ue);case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}case"syncing":switch(Ue.type){case"connected":case"update":return void Ve._updatesReceived.push(Ue);case"synced":return Ve._clearReconnectTimer(),Ve.emit("message",Ue),void Ve.preempt("connected");case"disconnected":return void Ve.disconnect("completed"===Ue.status?new De:null);default:return}default:return}}}Ve.on("stateChanged",function Ue(Ye){switch(Ye){case"connected":var we=Ve._updatesToSend.splice(0);return we.length&&Ve.publish(function Fe(Ve){return Ve.reduce(function(ze,Ze){return(!ze.participant&&Ze.participant||ze.participant&&Ze.participant&&Ze.participant.revision>ze.participant.revision)&&(ze.participant=Ze.participant),!ze.peer_connections&&Ze.peer_connections?ze.peer_connections=Te(Ze.peer_connections):ze.peer_connections&&Ze.peer_connections&&(ze.peer_connections=Te(ze.peer_connections.concat(Ze.peer_connections))),ze},{})}(we)),void Ve._updatesReceived.splice(0).forEach(function(nt){return Ve.emit("message",nt)});case"disconnected":return Ve._twilioConnection.removeListener("message",je),void Ve.removeListener("stateChanged",Ue);default:return}});var xt=Ve._options;"overrode"===Ve._iceServersStatus?(0,xt.onIced)(xt.iceServers).then(ze):ze()}(Ue),Ue}return L(ze,Ve),ze.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Ze={connecting:"connect",syncing:"sync"}[this.state],je={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Ze,version:2};return"connect"===je.type?(je.ice_servers=this._iceServersStatus,je.publisher={name:P,sdk_version:x,user_agent:this._userAgent},this._bandwidthProfile&&(je.bandwidth_profile=te(this._bandwidthProfile)),je.media_signaling=le(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),je.subscribe=X(this._automaticSubscription),je.format=J,je.token=this._accessToken):"sync"===je.type?(je.session=this._session,je.token=this._accessToken):"update"===je.type&&(je.session=this._session),je},ze.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},ze.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Ze=this._createConnectOrSyncOrDisconnectMessage();Ze&&this._twilioConnection.sendMessage(Ze)},ze.prototype.disconnect=function(Ze){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Ze]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},ze.prototype.publish=function(Ze){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Ze)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Ze),!0;default:return!1}},ze.prototype.publishEvent=function(Ze,je,xt,Wt){this._eventObserver.emit("event",{group:Ze,name:je,level:xt,payload:Wt})},ze.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},ze.prototype._setSession=function(Ze,je){this._session=Ze,this._sessionTimeoutMS=1e3*je},ze.prototype._getReconnectTimer=function(){var Ze=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new D(function(){Ze._sessionTimer&&(Ze._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(je){Ze._reconnectBackoff.backoff(je)}))},ze.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},ze}(W);function Te(Ve){return Array.from(Ve.reduce(function(ze,Ze){var je=ze.get(Ze.id)||Ze;return(!je.description&&Ze.description||je.description&&Ze.description&&Ze.description.revision>je.description.revision)&&(je.description=Ze.description),(!je.ice&&Ze.ice||je.ice&&Ze.ice&&Ze.ice.revision>je.ice.revision)&&(je.ice=Ze.ice),ze.set(je.id,je),ze},new Map).values())}Ce.exports=de},8675:function(Ce,Oe,Y){"use strict";var le,L=this&&this.__extends||(le=function(X,z){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,se){K.__proto__=se}||function(K,se){for(var ve in se)Object.prototype.hasOwnProperty.call(se,ve)&&(K[ve]=se[ve])})(X,z)},function(X,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function K(){this.constructor=X}le(X,z),X.prototype=null===z?Object.create(z):(K.prototype=z.prototype,new K)}),W=this&&this.__read||function(le,X){var z="function"==typeof Symbol&&le[Symbol.iterator];if(!z)return le;var se,De,K=z.call(le),ve=[];try{for(;(void 0===X||X-- >0)&&!(se=K.next()).done;)ve.push(se.value)}catch(pe){De={error:pe}}finally{try{se&&!se.done&&(z=K.return)&&z.call(K)}finally{if(De)throw De.error}}return ve},ne=this&&this.__spreadArray||function(le,X){for(var z=0,K=X.length,se=le.length;z<K;z++,se++)le[se]=X[z];return le},H=Y(9069).EventEmitter,U=Y(9739),D=function(le){function X(z,K){var se=le.call(this)||this,ve=null,De=z;return K=function ie(le){var X=new Map;for(var z in le)X.set(z,new Set(le[z]));return X}(K),Object.defineProperties(se,{_lock:{get:function(){return ve},set:function(pe){ve=pe}},_reachableStates:{value:x(K)},_state:{get:function(){return De},set:function(pe){De=pe}},_states:{value:K},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==ve}},state:{enumerable:!0,get:function(){return De}}}),se.on("stateChanged",function(pe){se._whenDeferreds.forEach(function(be){be.when(pe,be.resolve,be.reject)})}),se}return L(X,le),X.prototype._whenPromise=function(z){var K=this;if("function"!=typeof z)return Promise.reject(new Error("when() executor must be a function"));var se=U.defer();return se.when=z,this._whenDeferreds.add(se),se.promise.then(function(ve){return K._whenDeferreds.delete(se),ve},function(ve){throw K._whenDeferreds.delete(se),ve})},X.prototype.bracket=function(z,K){var se,ve=this;function De(pe){if(ve.hasLock(se)&&ve.releaseLockCompletely(se),pe)throw pe}return this.takeLock(z).then(function(be){return K(se=be)}).then(function(be){return De(),be},De)},X.prototype.hasLock=function(z){return this._lock===z},X.prototype.preempt=function(z,K,se){if(!O(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');var ve;this.isLocked&&(ve=this._lock,this._lock=null);var De=null;K&&(De=this.takeLockSync(K));var pe=De?null:this.takeLockSync("preemption");return this.transition(z,De||pe,se),ve&&ve.resolve(),pe&&this.releaseLock(pe),De},X.prototype.releaseLock=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");0===z.depth?(this._lock=null,z.resolve()):z.depth--},X.prototype.releaseLockCompletely=function(z){if(!this.isLocked)throw new Error("Could not release the lock for "+z.name+" because the StateMachine is not locked");if(!this.hasLock(z))throw new Error("Could not release the lock for "+z.name+" because "+this._lock.name+" has the lock");z.depth=0,this._lock=null,z.resolve()},X.prototype.takeLock=function(z){var K=this;if("object"==typeof z){var se=z;return new Promise(function(pe){pe(K.takeLockSync(se))})}var ve=z;if(this.isLocked){var De=this.takeLock.bind(this,ve);return this._lock.promise.then(De)}return Promise.resolve(this.takeLockSync(ve))},X.prototype.takeLockSync=function(z){var K="string"==typeof z?null:z,se=K?K.name:z;if(K&&!this.hasLock(K)||!K&&this.isLocked)throw new Error("Could not take the lock for "+se+" because the lock for "+this._lock.name+" was not released");if(K)return K.depth++,K;var ve=function P(le){var X=U.defer();return X.name=le,X.depth=0,X}(se);return this._lock=ve,ve},X.prototype.transition=function(z,K,se){if(se=se||[],this.isLocked){if(!K)throw new Error("You must provide the key in order to transition");if(!this.hasLock(K))throw new Error("Could not transition using the key for "+K.name+" because "+this._lock.name+" has the lock")}else if(K)throw new Error("Key provided for "+K.name+", but the StateMachine was not locked (possibly due to preemption)");if(!O(this._states,this.state,z))throw new Error('Cannot transition from "'+this.state+'" to "'+z+'"');this._state=z,this.emit.apply(this,ne([],W(["stateChanged",z].concat(se))))},X.prototype.tryTransition=function(z,K,se){try{this.transition(z,K,se)}catch{return!1}return!0},X.prototype.when=function(z){var K=this;return this.state===z?Promise.resolve(this):O(this._reachableStates,this.state,z)?this._whenPromise(function(se,ve,De){se===z?ve(K):O(K._reachableStates,se,z)||De(te(se,z))}):Promise.reject(te(this.state,z))},X}(H);function O(le,X,z){return le.get(X).has(z)}function x(le){return Array.from(le.keys()).reduce(function(X,z){return X.set(z,J(le,z))},new Map)}function J(le,X,z){return z=z||new Set,le.get(X).forEach(function(K){z.has(K)||(z.add(K),J(le,K,z).forEach(z.add,z))}),z}function te(le,X){return new Error('"'+X+'" cannot be reached from "'+le+'"')}Ce.exports=D},7704:Ce=>{"use strict";Ce.exports=function Oe(Y){return(Y=Y.filter(function(L){return"number"==typeof L})).length<1?void 0:Y.reduce(function(L,W){return W+L})/Y.length}},4239:Ce=>{"use strict";var Oe=function(){function Y(L,W,ne,H){Object.defineProperties(this,{availableSend:{enumerable:!0,value:ne},recv:{enumerable:!0,value:W},rtt:{enumerable:!0,value:H},send:{enumerable:!0,value:L}})}return Y.of=function(L,W){var ne=(W.timestamp-L.timestamp)/1e3;return new Y(ne>0?(W.bytesSent-L.bytesSent)/ne*8:0,ne>0?(W.bytesReceived-L.bytesReceived)/ne*8:0,W.availableOutgoingBitrate,W.currentRoundTripTime)},Y}();Ce.exports=Oe},2483:(Ce,Oe,Y)=>{"use strict";var L=Y(4239),W=function(){function ne(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new L(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return ne.prototype.next=function(H){var U=this.lastStats;if(this.lastStats=H,U){var D=U.id===H.id?L.of(U,H):new L(0,0);this.lastReport=D}return this.lastReport},ne}();Ce.exports=W},6719:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P){var x=H.call(this,D,O,P)||this;return Object.defineProperties(x,{audioLevel:{value:"number"==typeof O.audioInputLevel?O.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),x}return L(U,H),U}(Y(3840));Ce.exports=ne},3840:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P){var x=H.call(this,D,O)||this;return Object.defineProperties(x,{bytesSent:{value:"number"==typeof O.bytesSent?O.bytesSent:P?0:null,enumerable:!0},packetsSent:{value:"number"==typeof O.packetsSent?O.packetsSent:P?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof O.roundTripTime?O.roundTripTime:P?0:null,enumerable:!0}}),x}return L(U,H),U}(Y(9078));Ce.exports=ne},1371:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O,P){var x=H.call(this,D,O,P)||this,J=null;"number"==typeof O.frameWidthInput&&"number"==typeof O.frameHeightInput&&(J={},Object.defineProperties(J,{width:{value:O.frameWidthInput,enumerable:!0},height:{value:O.frameHeightInput,enumerable:!0}}));var ie=null;return"number"==typeof O.frameWidthSent&&"number"==typeof O.frameHeightSent&&(ie={},Object.defineProperties(ie,{width:{value:O.frameWidthSent,enumerable:!0},height:{value:O.frameHeightSent,enumerable:!0}})),Object.defineProperties(x,{captureDimensions:{value:J,enumerable:!0},dimensions:{value:ie,enumerable:!0},captureFrameRate:{value:"number"==typeof O.frameRateInput?O.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateSent?O.frameRateSent:null,enumerable:!0}}),x}return L(U,H),U}(Y(3840));Ce.exports=ne},1908:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D){return H.call(this,D)||this}return L(U,H),U}(Y(4976));Ce.exports=ne},4661:Ce=>{"use strict";Ce.exports=function Y(L){var W=L.actual,H=L.available,D=L.level;Object.defineProperties(this,{actual:{value:void 0===W?null:W,enumerable:!0},available:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===D?null:D,enumerable:!0}})}},2165:Ce=>{"use strict";Ce.exports=function Y(L){var W=L.fractionLost,H=L.level;Object.defineProperties(this,{fractionLost:{value:void 0===W?null:W,enumerable:!0},level:{value:void 0===H?null:H,enumerable:!0}})}},2590:Ce=>{"use strict";Ce.exports=function Y(L){var W=L.jitter,H=L.rtt,D=L.level;Object.defineProperties(this,{jitter:{value:void 0===W?null:W,enumerable:!0},rtt:{value:void 0===H?null:H,enumerable:!0},level:{value:void 0===D?null:D,enumerable:!0}})}},4976:(Ce,Oe,Y)=>{"use strict";var L=Y(220),W=Y(5206);Ce.exports=function H(U){var P=U.sendStats,x=void 0===P?null:P,J=U.recvStats,ie=void 0===J?null:J;Object.defineProperties(this,{send:{value:U.send,enumerable:!0},recv:{value:U.recv,enumerable:!0},sendStats:{value:x?new L(x):null,enumerable:!0},recvStats:{value:ie?new W(ie):null,enumerable:!0}})}},5206:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D){return H.call(this,D)||this}return L(U,H),U}(Y(4236));Ce.exports=ne},4236:(Ce,Oe,Y)=>{"use strict";var L=Y(4661),W=Y(2165),ne=Y(2590);Ce.exports=function U(D){var O=D.bandwidth,P=void 0===O?null:O,x=D.fractionLost,J=void 0===x?null:x,ie=D.latency,te=void 0===ie?null:ie;Object.defineProperties(this,{bandwidth:{value:P?new L(P):null,enumerable:!0},fractionLost:{value:J?new W(J):null,enumerable:!0},latency:{value:te?new ne(te):null,enumerable:!0}})}},220:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D){return H.call(this,D)||this}return L(U,H),U}(Y(4236));Ce.exports=ne},669:(Ce,Oe,Y)=>{"use strict";var L=Y(1908),W=Y(2003);Ce.exports=function H(U){var O=U.audio,P=U.video;Object.defineProperties(this,{level:{value:U.level,enumerable:!0},audio:{value:O?new L(O):null,enumerable:!0},video:{value:P?new W(P):null,enumerable:!0}})}},2003:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D){return H.call(this,D)||this}return L(U,H),U}(Y(4976));Ce.exports=ne},5055:(Ce,Oe,Y)=>{"use strict";var L=Y(8020),W=Y(775),ne=function(){function H(U,D,O){Object.defineProperties(this,{ice:{enumerable:!0,value:U},audio:{enumerable:!0,value:D},video:{enumerable:!0,value:O}})}return H.prototype.summarize=function(){var U=this.audio.send.concat(this.video.send),D=W.summarize(U),O=this.audio.recv.concat(this.video.recv),P=L.summarize(O);return{ice:this.ice,send:D,recv:P,audio:{send:W.summarize(this.audio.send),recv:L.summarize(this.audio.recv)},video:{send:W.summarize(this.video.send),recv:L.summarize(this.video.recv)}}},H}();Ce.exports=ne},8753:function(Ce,Oe,Y){"use strict";var L=this&&this.__read||function(re,de){var Te="function"==typeof Symbol&&re[Symbol.iterator];if(!Te)return re;var xe,ze,Fe=Te.call(re),Ve=[];try{for(;(void 0===de||de-- >0)&&!(xe=Fe.next()).done;)Ve.push(xe.value)}catch(Ze){ze={error:Ze}}finally{try{xe&&!xe.done&&(Te=Fe.return)&&Te.call(Fe)}finally{if(ze)throw ze.error}}return Ve},W=this&&this.__spreadArray||function(re,de){for(var Te=0,Fe=de.length,xe=re.length;Te<Fe;Te++,xe++)re[xe]=de[Te];return re},ne=this&&this.__values||function(re){var de="function"==typeof Symbol&&Symbol.iterator,Te=de&&re[de],Fe=0;if(Te)return Te.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Fe>=re.length&&(re=void 0),{value:re&&re[Fe++],done:!re}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")},H=Y(7627).guessBrowser,U=Y(2483),D=Y(5055),O=Y(1013),P=Y(1031),x=function(){function re(de){Object.defineProperties(this,{pc:{enumerable:!0,value:de},ice:{enumerable:!0,value:new U},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return re.prototype.next=function(){var de=this,Te="firefox"===H()?function ye(re){var de=re.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/send/)&&Fe.sender.track}).map(function(Fe){return Fe.sender}),Te=re.pc.getTransceivers().filter(function(Fe){return Fe.currentDirection&&Fe.currentDirection.match(/recv/)}).map(function(Fe){return Fe.receiver});return Promise.all([J(de),J(Te),re.pc.getStats()]).then(function(Fe){var xe=L(Fe,3),Ve=xe[0],ze=xe[1],Ze=xe[2],je=te(re),xt=K(re);Ve.forEach(function(qe,Ue){return ve(re,qe,xt,Ue)}),pe(je,xt);var Wt=le(re),ht=se(re);ze.forEach(function(qe,Ue){return De(re,qe,ht,Ue)}),pe(Wt,ht),be(re.ice,Ze)})}(this):function ge(re){return re.pc.getStats().then(function(de){var Te=te(re),Fe=K(re);ve(re,de,Fe),pe(Te,Fe);var xe=le(re),Ve=se(re);De(re,de,Ve),pe(xe,Ve),be(re.ice,de)})}(this);return Te.then(function(){var Fe=W([],L(de.audio.send.values())),xe=W([],L(de.video.send.values())),Ve=W([],L(de.audio.recv.values())),ze=W([],L(de.video.recv.values())),Ze=new D(de.ice.lastReport,{send:Fe.map(function(je){return je.lastReport}).filter(function(je){return je}),recv:Ve.map(function(je){return je.lastReport}).filter(function(je){return je})},{send:xe.map(function(je){return je.lastReport}).filter(function(je){return je}),recv:ze.map(function(je){return je.lastReport}).filter(function(je){return je})});return de.lastReport=Ze,Ze})},re}();function J(re){return Promise.all(re.map(function(de){var Te=de.track.id;return de.getStats().then(function(Fe){var xe,Ve;try{for(var ze=ne(Fe.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;"inbound-rtp"===je.type&&(je.id=Te+"-"+je.id)}}catch(xt){xe={error:xt}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}return[Te,Fe]})})).then(function(de){return new Map(de)})}function ie(re,de,Te,Fe,xe){var Ve=de[Fe.mediaType];if(!xe){var ze=Te.get(Fe.trackId);ze&&(xe=ze.trackIdentifier)}if(Ve&&xe){if(Ve.has(Fe.id))return Ve.get(Fe.id);var Ze=new re(xe,Fe);Ve.set(Fe.id,Ze)}return null}function te(re){return{audio:re.audio.send,video:re.video.send}}function le(re){return{audio:re.audio.recv,video:re.video.recv}}function X(re,de,Te,Fe){return ie(P,te(re),de,Te,Fe)}function z(re,de,Te,Fe){return ie(O,le(re),de,Te,Fe)}function K(re){return{audio:new Set(re.audio.send.keys()),video:new Set(re.video.send.keys())}}function se(re){return{audio:new Set(re.audio.recv.keys()),video:new Set(re.video.recv.keys())}}function ve(re,de,Te,Fe){var xe,Ve;try{for(var ze=ne(de.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;if("outbound-rtp"===je.type&&!je.isRemote){if("firefox"!==H()&&!je.trackId)continue;var xt=Te[je.mediaType];xt&&xt.delete(je.id);var Wt=X(re,de,je,Fe);if(Wt){var ht=de.get(je.remoteId);Wt.next(Fe||Wt.trackId,je,ht)}}}}catch(qe){xe={error:qe}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}}function De(re,de,Te,Fe){var xe,Ve;try{for(var ze=ne(de.values()),Ze=ze.next();!Ze.done;Ze=ze.next()){var je=Ze.value;if("inbound-rtp"===je.type&&!je.isRemote){var xt=Te[je.mediaType];xt&&xt.delete(je.id);var Wt=z(re,de,je,Fe);Wt&&Wt.next(Fe||Wt.trackId,je)}}}catch(ht){xe={error:ht}}finally{try{Ze&&!Ze.done&&(Ve=ze.return)&&Ve.call(ze)}finally{if(xe)throw xe.error}}}function pe(re,de){var Te=function(xe){var Ve=re[xe];de[xe].forEach(function(Ze){return Ve.delete(Ze)})};for(var Fe in de)Te(Fe)}function be(re,de){var Te,Fe,xe,Ve,ze;try{for(var Ze=ne(de.values()),je=Ze.next();!je.done;je=Ze.next())"transport"===(xt=je.value).type&&(ze=de.get(xt.selectedCandidatePairId))}catch(qe){Te={error:qe}}finally{try{je&&!je.done&&(Fe=Ze.return)&&Fe.call(Ze)}finally{if(Te)throw Te.error}}if(ze)re.next(ze);else try{for(var Wt=ne(de.values()),ht=Wt.next();!ht.done;ht=Wt.next()){var xt;"candidate-pair"===(xt=ht.value).type&&xt.nominated&&(!("selected"in xt)||xt.selected)&&re.next(xt)}}catch(qe){xe={error:qe}}finally{try{ht&&!ht.done&&(Ve=Wt.return)&&Ve.call(Wt)}finally{if(xe)throw xe.error}}}Ce.exports=x},8020:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(7704),ne=Y(7176),H=Y(7483),U=function(D){function O(P,x,J,ie,te,le,X){var z=D.call(this,P,x,J)||this;return Object.defineProperties(z,{deltaPacketsLost:{enumerable:!0,value:ie},deltaPacketsReceived:{enumerable:!0,value:te},fractionLost:{enumerable:!0,value:le},jitter:{enumerable:!0,value:X},phonyFractionLost:{enumerable:!0,value:te>0?ie/te:0}}),z}return L(O,D),O.of=function(P,x,J){if(x.id!==J.id)throw new Error("RTCStats IDs must match");var ie=(J.timestamp-x.timestamp)/1e3,le=ie>0?(J.bytesReceived-x.bytesReceived)/ie*8:0,X=Math.max(J.packetsLost-x.packetsLost,0);return new O(x.id,P,le,X,J.packetsReceived-x.packetsReceived,J.fractionLost,J.jitter)},O.summarize=function(P){var x=P.map(function(le){return le.summarize()});return{bitrate:H(x.map(function(le){return le.bitrate})),fractionLost:W(x.map(function(le){return le.fractionLost})),jitter:W(x.map(function(le){return le.jitter}))}},O.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},O}(ne);Ce.exports=U},1013:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(8020),H=function(U){function D(O,P){var x=U.call(this,P.id,O,P)||this;return Object.defineProperties(x,{lastReport:{enumerable:!0,value:null,writable:!0}}),x}return L(D,U),D.prototype.next=function(O,P){var x=this.lastStats;this.lastStats=P,this.trackId=O;var J=W.of(O,x,P);return this.lastReport=J,J},D}(Y(6986));Ce.exports=H},5180:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,O)||this;return Object.defineProperties(P,{audioLevel:{value:"number"==typeof O.audioOutputLevel?O.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),P}return L(U,H),U}(Y(2613));Ce.exports=ne},2613:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,O)||this;return Object.defineProperties(P,{bytesReceived:{value:"number"==typeof O.bytesReceived?O.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof O.packetsReceived?O.packetsReceived:null,enumerable:!0}}),P}return L(U,H),U}(Y(9078));Ce.exports=ne},993:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this,D,O)||this,x=null;return"number"==typeof O.frameWidthReceived&&"number"==typeof O.frameHeightReceived&&(x={},Object.defineProperties(x,{width:{value:O.frameWidthReceived,enumerable:!0},height:{value:O.frameHeightReceived,enumerable:!0}})),Object.defineProperties(P,{dimensions:{value:x,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateReceived?O.frameRateReceived:null,enumerable:!0}}),P}return L(U,H),U}(Y(2613));Ce.exports=ne},7176:Ce=>{"use strict";Ce.exports=function Y(L,W,ne){Object.defineProperties(this,{id:{enumerable:!0,value:L},trackId:{enumerable:!0,value:W},bitrate:{enumerable:!0,value:ne}})}},6986:Ce=>{"use strict";Ce.exports=function Y(L,W,ne){Object.defineProperties(this,{id:{enumerable:!0,value:L,writable:!0},trackId:{enumerable:!0,value:W,writable:!0},lastStats:{enumerable:!0,value:ne,writable:!0}})}},775:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(7704),ne=Y(7176),H=Y(7483),U=function(D){function O(P,x,J,ie){var te=D.call(this,P,x,J)||this;return Object.defineProperties(te,{rtt:{enumerable:!0,value:ie}}),te}return L(O,D),O.of=function(P,x,J,ie){if(x.id!==J.id)throw new Error("RTCStats IDs must match");var te=(J.timestamp-x.timestamp)/1e3;return new O(x.id,P,te>0?(J.bytesSent-x.bytesSent)/te*8:0,ie&&"number"==typeof ie.roundTripTime?ie.roundTripTime/1e3:void 0)},O.summarize=function(P){return{bitrate:H(P.map(function(ie){return ie.bitrate})),rtt:W(P.map(function(ie){return ie.rtt}))}},O}(ne);Ce.exports=U},1031:function(Ce,Oe,Y){"use strict";var U,L=this&&this.__extends||(U=function(D,O){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,x){P.__proto__=x}||function(P,x){for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&(P[J]=x[J])})(D,O)},function(D,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function P(){this.constructor=D}U(D,O),D.prototype=null===O?Object.create(O):(P.prototype=O.prototype,new P)}),W=Y(6986),ne=Y(775),H=function(U){function D(O,P){var x=U.call(this,P.id,O,P)||this;return Object.defineProperties(x,{lastReport:{enumerable:!0,value:null,writable:!0}}),x}return L(D,U),D.prototype.next=function(O,P,x){var J=this.lastStats;this.lastStats=P,this.trackId=O;var ie=ne.of(O,J,P,x);return this.lastReport=ie,ie},D}(W);Ce.exports=H},7805:(Ce,Oe,Y)=>{"use strict";var L=Y(6719),W=Y(1371),ne=Y(5180),H=Y(993);Ce.exports=function D(O,P,x){if("string"!=typeof O)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:O,enumerable:!0},localAudioTrackStats:{value:P.localAudioTrackStats.map(function(J){return new L(J.trackId,J,x)}),enumerable:!0},localVideoTrackStats:{value:P.localVideoTrackStats.map(function(J){return new W(J.trackId,J,x)}),enumerable:!0},remoteAudioTrackStats:{value:P.remoteAudioTrackStats.map(function(J){return new ne(J.trackId,J)}),enumerable:!0},remoteVideoTrackStats:{value:P.remoteVideoTrackStats.map(function(J){return new H(J.trackId,J)}),enumerable:!0}})}},7483:Ce=>{"use strict";Ce.exports=function Oe(Y){return Y.reduce(function(L,W){return"number"==typeof W?W+L:L},0)}},9078:Ce=>{"use strict";Ce.exports=function Y(L,W){if("string"!=typeof L)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:L,enumerable:!0},trackSid:{value:W.trackSid,enumerable:!0},timestamp:{value:W.timestamp,enumerable:!0},ssrc:{value:W.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof W.packetsLost?W.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof W.codecName?W.codecName:null,enumerable:!0}})}},4605:function(Ce,Oe,Y){"use strict";var H,L=this&&this.__extends||(H=function(U,D){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var x in P)Object.prototype.hasOwnProperty.call(P,x)&&(O[x]=P[x])})(U,D)},function(U,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function O(){this.constructor=U}H(U,D),U.prototype=null===D?Object.create(D):(O.prototype=D.prototype,new O)}),ne=function(H){function U(D,O){var P=H.call(this)||this;return Object.defineProperties(P,{id:{enumerable:!0,value:D},kind:{enumerable:!0,value:O}}),P}return L(U,H),U.prototype.stop=function(){this.emit("stopped")},U}(Y(9069).EventEmitter);Ce.exports=ne},5330:function(Ce,Oe,Y){"use strict";var ht,L=this&&this.__extends||(ht=function(qe,Ue){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ye,we){Ye.__proto__=we}||function(Ye,we){for(var nt in we)Object.prototype.hasOwnProperty.call(we,nt)&&(Ye[nt]=we[nt])})(qe,Ue)},function(qe,Ue){if("function"!=typeof Ue&&null!==Ue)throw new TypeError("Class extends value "+String(Ue)+" is not a constructor or null");function Ye(){this.constructor=qe}ht(qe,Ue),qe.prototype=null===Ue?Object.create(Ue):(Ye.prototype=Ue.prototype,new Ye)}),W=this&&this.__read||function(ht,qe){var Ue="function"==typeof Symbol&&ht[Symbol.iterator];if(!Ue)return ht;var we,Dt,Ye=Ue.call(ht),nt=[];try{for(;(void 0===qe||qe-- >0)&&!(we=Ye.next()).done;)nt.push(we.value)}catch(zt){Dt={error:zt}}finally{try{we&&!we.done&&(Ue=Ye.return)&&Ue.call(Ye)}finally{if(Dt)throw Dt.error}}return nt},ne=this&&this.__spreadArray||function(ht,qe){for(var Ue=0,Ye=qe.length,we=ht.length;Ue<Ye;Ue++,we++)ht[we]=qe[Ue];return ht},H=Y(8675),U=Y(9739),D=U.buildLogLevels,O=U.makeUUID,P=Y(1458),x=Y(2643),J=Y(6543),ie=0,te={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},le={closed:"close",open:"open",waiting:"waiting"},ze=globalThis,Ze=ze.WebSocket?ze.WebSocket:Y(3332),je={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},xt=new Map([[3e3,je.TIMEOUT],[3001,je.TIMEOUT],[3002,je.FAILED],[3003,je.FAILED],[3004,je.TIMEOUT],[3006,je.BUSY],[3007,je.TIMEOUT]]),Wt=function(ht){function qe(Ue,Ye){var we=ht.call(this,"early",te)||this;Ye=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:P,WebSocket:Ze},Ye);var nt=D(Ye.logLevel),Dt=new Ye.Log("default",we,nt,Ye.loggerName),zt=Ye.networkMonitor?new x(function(){var mt=zt.type,Kn="Network changed"+(mt?" to "+mt:"");Dt.debug(Kn),we._close({code:3004,reason:Kn})}):null;Object.defineProperties(we,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:Ye.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:Ye.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++ie},_log:{value:Dt},_messageQueue:{value:[]},_networkMonitor:{value:zt},_options:{value:Ye},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:Ue},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var kt={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return we.on("stateChanged",function(mt){for(var Kn=[],Yn=1;Yn<arguments.length;Yn++)Kn[Yn-1]=arguments[Yn];mt in le&&we.emit.apply(we,ne([le[mt]],W(Kn)));var Lr={name:mt,group:"signaling",level:kt[we.state]};if("closed"===mt){var Vr=W(Kn,1),Rr=Vr[0];Lr.payload={reason:Rr},Lr.level=Rr===je.LOCAL?"info":"error"}we._eventObserver.emit("event",Lr)}),we._eventObserver.emit("event",{name:we.state,group:"signaling",level:kt[we.state]}),we._connect(),we}return L(qe,ht),qe.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},qe.prototype._close=function(Ue){var Ye=Ue.code,we=Ue.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==Ye&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var nt=this._log;1e3===Ye?(nt.debug("Closed"),this.transition("closed",null,[je.LOCAL])):(nt.warn("Closed: "+Ye+" - "+we),3005!==Ye&&this.transition("closed",null,[xt.get(Ye)||je.REMOTE]));var Dt=this._ws.readyState,zt=this._options.WebSocket;Dt!==zt.CLOSING&&Dt!==zt.CLOSED&&this._ws.close(Ye,we)}},qe.prototype._connect=function(){var Ue=this,Ye=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void Ye.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var we=this._ws;Ye.debug("Created a new WebSocket:",we),we.addEventListener("close",function(Dt){return Ue._close(Dt)});var nt=this._options.openTimeout;this._openTimeout=new J(function(){Ue._close({code:3007,reason:"Failed to open in "+nt+" ms"})},nt),we.addEventListener("open",function(){Ye.debug("WebSocket opened:",we),Ue._openTimeout.clear(),Ue._startHandshake(),Ue._networkMonitor&&Ue._networkMonitor.start()}),we.addEventListener("message",function(Dt){Ye.debug("Incoming: "+Dt.data);try{Dt=JSON.parse(Dt.data)}catch(zt){return void Ue.emit("error",zt)}switch(Dt.type){case"bad":Ue._handleBad(Dt);break;case"busy":Ue._handleBusy(Dt);break;case"bye":break;case"msg":Ue._handleMessage(Dt);case"heartbeat":Ue._handleHeartbeat();break;case"welcome":Ue._handleWelcome(Dt);break;default:Ue._log.debug("Unknown message type: "+Dt.type),Ue.emit("error",new Error("Unknown message type: "+Dt.type))}})},qe.prototype._handleBad=function(Ue){var Ye=Ue.reason,we=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(we.warn("Closing: 3002 - "+Ye),void this._close({code:3002,reason:Ye})):(we.debug("Error: "+Ye),void this.emit("error",new Error(Ye)));we.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},qe.prototype._handleBusy=function(Ue){var Ye=this,we=Ue.cookie,nt=Ue.keepAlive,Dt=Ue.retryAfter,zt=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var kt=Dt<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Dt+" ms";if(Dt<0)return zt.warn("Closing: 3006 - "+kt),void this._close({code:3006,reason:kt});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=we||null,nt?(zt.warn(kt),this._busyWaitTimeout=new J(function(){return Ye._startHandshake()},Dt)):(zt.warn("Closing: 3005 - "+kt),this._close({code:3005,reason:kt}),this._busyWaitTimeout=new J(function(){return Ye._connect()},Dt)),this.transition("waiting",null,[nt,Dt])}else zt.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},qe.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},qe.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var Ue=this._log,Ye=this._options.maxConsecutiveMissedHeartbeats;Ue.debug("Consecutive heartbeats missed: "+Ye);var we="Missed "+Ye+' "heartbeat" messages';Ue.warn("Closing: 3001 - "+we),this._close({code:3001,reason:we})}},qe.prototype._handleMessage=function(Ue){"open"===this.state?this.emit("message",Ue.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},qe.prototype._handleWelcome=function(Ue){var Ye=this,we=Ue.negotiatedTimeout,nt=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(nt.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var zt=we*this._options.maxConsecutiveMissedHeartbeats,kt=we-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new J(function(){return Ye._handleHeartbeatTimeout()},zt),this._messageQueue.splice(0).forEach(function(mt){return Ye._send(mt)}),this._sendHeartbeatTimeout=new J(function(){return Ye._sendHeartbeat()},kt),this.transition("open")}else nt.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},qe.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var Ue=this._log;if(this._hellosLeft<=0){var Ye="All handshake attempts failed";return Ue.warn("Closing: 3000 - "+Ye),void this._close({code:3e3,reason:Ye})}Ue.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},qe.prototype._send=function(Ue){if(this._ws.readyState===this._options.WebSocket.OPEN){var nt=JSON.stringify(Ue);this._log.debug("Outgoing: "+nt);try{this._ws.send(nt),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Dt="Failed to send message";this._log.warn("Closing: 3003 - "+Dt),this._close({code:3003,reason:Dt})}}},qe.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},qe.prototype._sendHello=function(){var Ue=this._options,Ye=Ue.helloBody,we=Ue.requestedHeartbeatTimeout,nt={id:O(),timeout:we,type:"hello",version:2};this._cookie&&(nt.cookie=this._cookie),Ye&&(nt.body=Ye),this._send(nt)},qe.prototype._sendOrEnqueue=function(Ue){var Ye=this;"closed"!==this.state&&("open"===this.state?function(nt){return Ye._send(nt)}:function(nt){return Ye._messageQueue.push(nt)})(Ue)},qe.prototype._startHandshake=function(){var Ue=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new J(function(){return Ue._handleWelcomeTimeout()},this._options.welcomeTimeout))},qe.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},qe.prototype.sendMessage=function(Ue){this._sendOrEnqueue({body:Ue,type:"msg"})},qe}(H);Wt.CloseReason=je,Ce.exports=Wt},6412:(Ce,Oe,Y)=>{"use strict";var L=Y(9739).defer,W=function(){function ne(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return ne.prototype.put=function(H){this._hasValue=!0,this._value=H;var U=this._deferreds.shift();return U&&U.resolve(H),this},ne.prototype.take=function(){var H=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var U=L();return this._deferreds.push(U),U.promise.then(function(D){return H._hasValue=!1,D})},ne}();Ce.exports=W},2606:Ce=>{var Oe=function(){function Y(L){Object.defineProperties(this,{_min:{value:L.min||100},_max:{value:L.max||1e4},_jitter:{value:L.jitter>0&&L.jitter<=1?L.jitter:0},_factor:{value:L.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var W=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var ne=Math.random(),H=Math.floor(ne*this._jitter*W);W=0==(1&Math.floor(10*ne))?W-H:W+H}return 0|Math.min(W,this._max)}},_timeoutID:{value:null,writable:!0}})}return Y.prototype.backoff=function(L){var W=this,ne=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){W._attempts++,L()},ne)},Y.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},Y}();Ce.exports=Oe},3948:function(Ce){"use strict";var Oe=this&&this.__read||function(J,ie){var te="function"==typeof Symbol&&J[Symbol.iterator];if(!te)return J;var X,K,le=te.call(J),z=[];try{for(;(void 0===ie||ie-- >0)&&!(X=le.next()).done;)z.push(X.value)}catch(se){K={error:se}}finally{try{X&&!X.done&&(te=le.return)&&te.call(le)}finally{if(K)throw K.error}}return z};function W(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}Ce.exports={isAndroid:function Y(){return/Android/.test(navigator.userAgent)},isIOS:function L(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function ne(){return W()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function H(){return W()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function U(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function D(J){return"chrome"===J&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function P(J){return"safari"!==J?null:"brave"in navigator?"brave":["edge","edg"].find(function(ie){return navigator.userAgent.toLowerCase().includes(ie)})||null},rebrandedChromeBrowser:function O(J){if("chrome"!==J)return null;if("brave"in navigator)return"brave";var ie=function x(J){for(var ie=[],te=[],le=0;le<J.length;le++)if("("===J[le])ie.push(le);else if(")"===J[le]&&ie.length>0){var X=ie.pop();0===ie.length&&te.push(J.substring(X,le+1))}return te}(navigator.userAgent),le=ie.reduce(function(K,se){return K.replace(se,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Oe(le.map(function(K){return K.split("/")[0].toLowerCase()})).slice(2).find(function(K){return!["chrome","mobile","safari"].includes(K)})||null}}},8126:function(Ce){"use strict";var Oe=this&&this.__read||function(W,ne){var H="function"==typeof Symbol&&W[Symbol.iterator];if(!H)return W;var D,P,U=H.call(W),O=[];try{for(;(void 0===ne||ne-- >0)&&!(D=U.next()).done;)O.push(D.value)}catch(x){P={error:x}}finally{try{D&&!D.done&&(H=U.return)&&H.call(U)}finally{if(P)throw P.error}}return O},Y=this&&this.__spreadArray||function(W,ne){for(var H=0,U=ne.length,D=W.length;H<U;H++,D++)W[D]=ne[H];return W},L=function(){function W(ne,H){var U=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:H}}),Object.defineProperty(this,"_promise",{value:new Promise(function(D,O){ne(function(P){U._isCancelable=!1,D(P)},function(P){U._isCancelable=!1,O(P)},function(){return U._isCanceled})})})}return W.reject=function(ne){return new W(function(U,D){D(ne)},function(){})},W.resolve=function(ne){return new W(function(U){U(ne)},function(){})},W.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},W.prototype.catch=function(){var ne=[].slice.call(arguments),H=this._promise;return new W(function(D,O){H.catch.apply(H,Y([],Oe(ne))).then(D,O)},this._onCancel)},W.prototype.then=function(){var ne=[].slice.call(arguments),H=this._promise;return new W(function(D,O){H.then.apply(H,Y([],Oe(ne))).then(D,O)},this._onCancel)},W.prototype.finally=function(){var ne=[].slice.call(arguments),H=this._promise;return new W(function(D,O){H.finally.apply(H,Y([],Oe(ne))).then(D,O)},this._onCancel)},W}();Ce.exports=L},8701:(Ce,Oe,Y)=>{"use strict";var L=Y(1730);Ce.exports.SDK_NAME=L.name+".js",Ce.exports.SDK_VERSION=L.version,Ce.exports.SDP_FORMAT="unified",Ce.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},Ce.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},Ce.exports.DEFAULT_ENVIRONMENT="prod",Ce.exports.DEFAULT_REALM="us1",Ce.exports.DEFAULT_REGION="gll",Ce.exports.DEFAULT_LOG_LEVEL="warn",Ce.exports.DEFAULT_LOGGER_NAME="twilio-video",Ce.exports.WS_SERVER=function(ne,H){return H="gll"===H?"global":encodeURIComponent(H),"prod"===ne?"wss://"+H+".vss.twilio.com/signaling":"wss://"+H+".vss."+ne+".twilio.com/signaling"},Ce.exports.PUBLISH_MAX_ATTEMPTS=5,Ce.exports.PUBLISH_BACKOFF_JITTER=10,Ce.exports.PUBLISH_BACKOFF_MS=20,Ce.exports.typeErrors={ILLEGAL_INVOKE:function(ne,H){return new TypeError("Illegal call to "+ne+": "+H)},INVALID_TYPE:function(ne,H){return new TypeError(ne+" must be "+function W(ne){return["a","e","i","o","u"].includes(ne.toLowerCase()[0])?"an":"a"}(H)+" "+H)},INVALID_VALUE:function(ne,H){return new RangeError(ne+" must be one of "+H.join(", "))},REQUIRED_ARGUMENT:function(ne){return new TypeError(ne+" must be specified")}},Ce.exports.DEFAULT_FRAME_RATE=24,Ce.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,Ce.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,Ce.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,Ce.exports.DEFAULT_NQ_LEVEL_LOCAL=1,Ce.exports.DEFAULT_NQ_LEVEL_REMOTE=0,Ce.exports.MAX_NQ_LEVEL=3,Ce.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,Ce.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,Ce.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*Ce.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},Ce.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},Ce.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},Ce.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},Ce.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},Ce.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},Ce.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(Ce,Oe,Y)=>{"use strict";var L=Y(4687);Ce.exports=function H(U){var D=Y(7708),O={},P=D.getOrCreate(O),x=3;return function J(){return x--,L(P,U.srcObject,250).then(function(ie){return!!ie&&(!(x>0)||J())}).catch(function(){return!0})}().finally(function(){D.release(O)})}},1741:Ce=>{"use strict";var Oe=null;Ce.exports=function U(D){return Oe=Oe||document.createElement("canvas"),new Promise(function(O){var P=3;setTimeout(function x(){return P--,function H(D){try{var O=Oe.getContext("2d");O.drawImage(D,0,0,50,50);var x=O.getImageData(0,0,50,50).data.filter(function(ie,te){return(te+1)%4});return 0===Math.max.apply(Math,x)}catch(ie){return console.log("Error checking silence: ",ie),!1}}(D)?P>0?setTimeout(x,250):O(!0):O(!1)},250)})}},2181:Ce=>{"use strict";var Oe=function(){function Y(L){var W=this;void 0===L&&(L=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){W._emitVisible("visible"===document.visibilityState)}}});for(var ne=0;ne<L;ne++)this._listeners.push([])}return Y.prototype.clear=function(){for(var L=this._listeners.length,W=0;W<L;W++)this._listeners[W]=[]},Y.prototype._listenerCount=function(){return this._listeners.reduce(function(L,W){return L+W.length},0)},Y.prototype._emitVisible=function(L){for(var W=this,ne=Promise.resolve(),H=function(D){ne=ne.then(function(){return W._emitVisiblePhase(D,L)})},U=1;U<=this._listeners.length;U++)H(U);return ne},Y.prototype._emitVisiblePhase=function(L,W){return Promise.all(this._listeners[L-1].map(function(H){var U=H(W);return U instanceof Promise?U:Promise.resolve(U)}))},Y.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},Y.prototype.onVisibilityChange=function(L,W){if("number"!=typeof L||L<=0||L>this._listeners.length)throw new Error("invalid phase: ",L);return this._listeners[L-1].push(W),1===this._listenerCount()&&this._start(),this},Y.prototype.offVisibilityChange=function(L,W){if("number"!=typeof L||L<=0||L>this._listeners.length)throw new Error("invalid phase: ",L);var ne=this._listeners[L-1],H=ne.indexOf(W);return-1!==H&&(ne.splice(H,1),0===this._listenerCount()&&this._stop()),this},Y}();Ce.exports=new Oe(2)},8606:function(Ce,Oe,Y){"use strict";var D,L=this&&this.__extends||(D=function(O,P){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,J){x.__proto__=J}||function(x,J){for(var ie in J)Object.prototype.hasOwnProperty.call(J,ie)&&(x[ie]=J[ie])})(O,P)},function(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function x(){this.constructor=O}D(O,P),O.prototype=null===P?Object.create(P):(x.prototype=P.prototype,new x)}),W=Y(9069).EventEmitter,ne=["signaling","room","media","quality","video-processor","preflight"],H=["debug","error","info","warning"],U=function(D){function O(P,x,J,ie){void 0===ie&&(ie=null);var te=D.call(this)||this;return te.on("event",function(le){var X=le.name,z=le.group,K=le.level,se=le.payload;if("string"!=typeof X)throw J.error("Unexpected name: ",X),new Error("Unexpected name: ",X);if(!ne.includes(z))throw J.error("Unexpected group: ",z),new Error("Unexpected group: ",z);if(!H.includes(K))throw J.error("Unexpected level: ",K),new Error("Unexpected level: ",K);var ve=Date.now(),De=ve-x,pe=Object.assign({elapsedTime:De,level:K},se||{});P.publish(z,X,pe);var be=Object.assign({elapsedTime:De,group:z,level:K,name:X,timestamp:ve},se?{payload:se}:{});J[{debug:"debug",error:"error",info:"info",warning:"warn"}[K]]("event",be),ie&&"signaling"===z&&ie.emit("event",be)}),te}return L(O,D),O}(W);Ce.exports=U},3826:Ce=>{"use strict";var Oe=function(){function Y(L){L=Object.assign({getKey:function(ne){return ne},getValue:function(ne){return ne},isLessThanOrEqualTo:function(ne,H){return ne<=H}},L),Object.defineProperties(this,{_getKey:{value:L.getKey},_getValue:{value:L.getValue},_isLessThanOrEqualTo:{value:L.isLessThanOrEqualTo},_map:{value:new Map}})}return Y.prototype.toMap=function(){return new Map(this._map)},Y.prototype.updateAndFilter=function(L){return L.filter(this.update,this)},Y.prototype.update=function(L){var W=this._getKey(L),ne=this._getValue(L);return!(this._map.has(W)&&this._isLessThanOrEqualTo(ne,this._map.get(W))||(this._map.set(W,ne),0))},Y}();Ce.exports=Oe},9739:function(Ce,Oe,Y){"use strict";var yt,L=this&&this.__extends||(yt=function(Ht,$t){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Me){Xe.__proto__=Me}||function(Xe,Me){for(var st in Me)Object.prototype.hasOwnProperty.call(Me,st)&&(Xe[st]=Me[st])})(Ht,$t)},function(Ht,$t){if("function"!=typeof $t&&null!==$t)throw new TypeError("Class extends value "+String($t)+" is not a constructor or null");function Xe(){this.constructor=Ht}yt(Ht,$t),Ht.prototype=null===$t?Object.create($t):(Xe.prototype=$t.prototype,new Xe)}),W=this&&this.__read||function(yt,Ht){var $t="function"==typeof Symbol&&yt[Symbol.iterator];if(!$t)return yt;var Me,kn,Xe=$t.call(yt),st=[];try{for(;(void 0===Ht||Ht-- >0)&&!(Me=Xe.next()).done;)st.push(Me.value)}catch(dn){kn={error:dn}}finally{try{Me&&!Me.done&&($t=Xe.return)&&$t.call(Xe)}finally{if(kn)throw kn.error}}return st},ne=this&&this.__spreadArray||function(yt,Ht){for(var $t=0,Xe=Ht.length,Me=yt.length;$t<Xe;$t++,Me++)yt[Me]=Ht[$t];return yt},H=Y(8701),U=H.typeErrors,D=H.trackPriority,O=Y(7627),P=Y(8066).sessionSID;function K(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function ge(yt,Ht,$t,Xe){if(!(Xe in Ht)&&!Xe.match(/^on[a-z]+$/)){var Me;try{Me=typeof yt[Xe]}catch{}"function"===Me&&(Ht[Xe]=function(){for(var st,kn=[],dn=0;dn<arguments.length;dn++)kn[dn]=arguments[dn];return(st=this[$t])[Xe].apply(st,ne([],W(kn)))})}}function Te(yt){return"object"==typeof yt&&!Array.isArray(yt)}function xt(yt){Object.getOwnPropertyNames(yt).forEach(function(Ht){Ht.startsWith("_")&&ht(yt,Ht)})}function ht(yt,Ht){var $t=Object.getOwnPropertyDescriptor(yt,Ht);$t.enumerable=!1,Object.defineProperty(yt,Ht,$t)}function qe(yt,Ht){void 0===Ht&&(Ht=[]),Ht.forEach(function($t){yt.hasOwnProperty($t)&&ht(yt,$t)})}function Ue(yt){return yt.map(Dt)}function Dt(yt){return Array.isArray(yt)?Ue(yt):yt instanceof Set?function Ye(yt){return Ue(ne([],W(yt)))}(yt):yt instanceof Map?function we(yt){return ne([],W(yt.entries())).reduce(function(Ht,$t){var Xe,Me=W($t,2);return Object.assign(((Xe={})[Me[0]]=Dt(Me[1]),Xe),Ht)},{})}(yt):yt&&"object"==typeof yt?function nt(yt){return Object.entries(yt).reduce(function(Ht,$t){var Xe,Me=W($t,2);return Object.assign(((Xe={})[Me[0]]=Dt(Me[1]),Xe),Ht)},{})}(yt):yt}function mt(yt){return Vr(yt,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Lr},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function Yn(yt){return Vr(yt,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Lr(yt){return Vr(yt,[{prop:D.PRIORITY_HIGH,type:"object",transform:Yn},{prop:D.PRIORITY_LOW,type:"object",transform:Yn},{prop:D.PRIORITY_STANDARD,type:"object",transform:Yn}])}function Vr(yt,Ht){return Ht.reduce(function($t,Xe){var Me,st=Xe.prop,dn=Xe.payloadProp,$o=Xe.transform;return typeof yt[st]===Xe.type?Object.assign(((Me={})[void 0===dn?st:dn]=(void 0===$o?function(po){return po}:$o)(yt[st]),Me),$t):$t},{})}Oe.constants=H,Oe.createBandwidthProfilePayload=function kt(yt){return Vr(yt,[{prop:"video",type:"object",transform:mt}])},Oe.createMediaSignalingPayload=function Kn(yt,Ht,$t,Xe,Me,st){var kn={transports:[{type:"data-channel"}]};return Object.assign(yt?{active_speaker:kn}:{},Ht?{network_quality:kn}:{},st?{render_hints:kn}:{},Me?{publisher_hints:kn}:{},$t?{track_priority:kn}:{},Xe?{track_switch_off:kn}:{})},Oe.createRoomConnectEventPayload=function zt(yt){function Ht(Me){return Me?"true":"false"}var $t={sessionSID:P,iceServers:(yt.iceServers||[]).length,audioTracks:(yt.tracks||[]).filter(function(Me){return"audio"===Me.kind}).length,videoTracks:(yt.tracks||[]).filter(function(Me){return"video"===Me.kind}).length,dataTracks:(yt.tracks||[]).filter(function(Me){return"data"===Me.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];$t[dn=dn||kn]=Ht(!!yt[kn])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];dn=dn||kn,"number"==typeof yt[kn]?$t[dn]=yt[kn]:isNaN(Number(yt[kn]))||($t[dn]=Number(yt[kn]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Me){var st=W(Me,2),kn=st[0],dn=st[1];dn=dn||kn,"string"==typeof yt[kn]?$t[dn]=yt[kn]:"number"==typeof yt[kn]&&"name"===kn&&($t[dn]=yt[kn].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Me){Me in yt&&($t[Me]=JSON.stringify(yt[Me]))}),"networkQuality"in yt&&($t.networkQualityConfiguration={},Te(yt.networkQuality)?["local","remote"].forEach(function(Me){"number"==typeof yt.networkQuality[Me]&&($t.networkQualityConfiguration[Me]=yt.networkQuality[Me])}):($t.networkQualityConfiguration.remote=0,$t.networkQualityConfiguration.local=yt.networkQuality?1:0)),yt.bandwidthProfile&&yt.bandwidthProfile.video){var Xe=yt.bandwidthProfile.video||{};$t.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Me){"number"==typeof Xe[Me]||"string"==typeof Xe[Me]?$t.bandwidthProfileOptions[Me]=Xe[Me]:"boolean"==typeof Xe[Me]?$t.bandwidthProfileOptions[Me]=Ht(Xe[Me]):"object"==typeof Xe[Me]&&($t.bandwidthProfileOptions[Me]=JSON.stringify(Xe[Me]))})}return{group:"room",name:"connect",level:"info",payload:$t}},Oe.createSubscribePayload=function Rr(yt){return{rules:[{type:yt?"include":"exclude",all:!0}],revision:1}},Oe.asLocalTrack=function x(yt,Ht){if(yt instanceof Ht.LocalAudioTrack||yt instanceof Ht.LocalVideoTrack||yt instanceof Ht.LocalDataTrack)return yt;if(yt instanceof Ht.MediaStreamTrack)return"audio"===yt.kind?new Ht.LocalAudioTrack(yt,Ht):new Ht.LocalVideoTrack(yt,Ht);throw U.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Oe.asLocalTrackPublication=function J(yt,Ht,$t,Xe){return new(0,{audio:Xe.LocalAudioTrackPublication,video:Xe.LocalVideoTrackPublication,data:Xe.LocalDataTrackPublication}[yt.kind])(Ht,yt,$t,Xe)},Oe.capitalize=function ie(yt){return yt[0].toUpperCase()+yt.slice(1)},Oe.deprecateEvents=function te(yt,Ht,$t,Xe){var Me=new Set;Ht.on("newListener",function st(kn){$t.has(kn)&&!Me.has(kn)&&(Xe.deprecated(yt+"#"+kn+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+($t.get(kn)?" Use "+yt+"#"+$t.get(kn)+" instead.":"")),Me.add(kn)),Me.size>=$t.size&&Ht.removeListener("newListener",st)})},Oe.difference=function le(yt,Ht){yt=Array.isArray(yt)?new Set(yt):new Set(yt.values()),Ht=Array.isArray(Ht)?new Set(Ht):new Set(Ht.values());var $t=new Set;return yt.forEach(function(Xe){Ht.has(Xe)||$t.add(Xe)}),$t},Oe.filterObject=function X(yt,Ht){return Object.keys(yt).reduce(function($t,Xe){return yt[Xe]!==Ht&&($t[Xe]=yt[Xe]),$t},{})},Oe.flatMap=function z(yt,Ht){var $t=yt instanceof Map||yt instanceof Set?Array.from(yt.values()):yt;return Ht=Ht||function(Me){return Me},$t.reduce(function(Xe,Me){var st=Ht(Me);return Xe.concat(st)},[])},Oe.getPlatform=function se(){var yt=K(),$t=W(yt.match(/\(([^)]+)\)/)||[],2)[1];return W((void 0===$t?"unknown":$t).split(";").map(function(kn){return kn.trim()}),1)[0].toLowerCase()},Oe.getUserAgent=K,Oe.hidePrivateProperties=xt,Oe.hidePrivateAndCertainPublicPropertiesInClass=function Wt(yt,Ht){return function($t){function Xe(){for(var Me=[],st=0;st<arguments.length;st++)Me[st]=arguments[st];var kn=$t.apply(this,ne([],W(Me)))||this;return xt(kn),qe(kn,Ht),kn}return L(Xe,$t),Xe}(yt)},Oe.isDeepEqual=function de(yt,Ht){if(yt===Ht)return!0;if(typeof yt!=typeof Ht)return!1;if(null===yt)return null===Ht;if(null===Ht)return!1;if(Array.isArray(yt))return Array.isArray(Ht)&&yt.length===Ht.length&&yt.every(function(Me,st){return de(Me,Ht[st])});if("object"==typeof yt){var $t=Object.keys(yt).sort(),Xe=Object.keys(Ht).sort();return!Array.isArray(Ht)&&de($t,Xe)&&$t.every(function(Me){return de(yt[Me],Ht[Me])})}return!1},Oe.isNonArrayObject=Te,Oe.inRange=function Pn(yt,Ht,$t){return Ht<=yt&&yt<=$t},Oe.makeUUID=function ve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(yt){var Ht=16*Math.random()|0;return("x"===yt?Ht:3&Ht|8).toString(16)})},Oe.oncePerTick=function De(yt){var Ht=null;function $t(){Ht=null,yt()}return function(){Ht&&clearTimeout(Ht),Ht=setTimeout($t)}},Oe.promiseFromEvents=function pe(yt,Ht,$t,Xe){return new Promise(function(Me,st){function kn(){var Ji=[].slice.call(arguments);Xe&&Ht.removeListener(Xe,dn),Me.apply(void 0,ne([],W(Ji)))}function dn(){var Ji=[].slice.call(arguments);Ht.removeListener($t,kn),st.apply(void 0,ne([],W(Ji)))}Ht.once($t,kn),Xe&&Ht.once(Xe,dn),yt()})},Oe.getOrNull=function be(yt,Ht){return Ht.split(".").reduce(function($t,Xe){return $t?$t[Xe]:null},yt)},Oe.defer=function ye(){var yt={};return yt.promise=new Promise(function(Ht,$t){yt.resolve=Ht,yt.reject=$t}),yt},Oe.delegateMethods=function re(yt,Ht,$t){for(var Xe in yt)ge(yt,Ht,$t,Xe)},Oe.proxyProperties=function Fe(yt,Ht,$t){Object.getOwnPropertyNames(yt).forEach(function(Xe){!function xe(yt,Ht,$t,Xe){if(!(Xe in Ht)){if(Xe.match(/^on[a-z]+$/))return Object.defineProperty(Ht,Xe,{value:null,writable:!0}),void $t.addEventListener(Xe.slice(2),function(){for(var Me=[],st=0;st<arguments.length;st++)Me[st]=arguments[st];Ht.dispatchEvent.apply(Ht,ne([],W(Me)))});Object.defineProperty(Ht,Xe,{enumerable:!0,get:function(){return $t[Xe]}})}}(0,Ht,$t,Xe)})},Oe.legacyPromise=function Ve(yt,Ht,$t){return Ht?yt.then(function(Xe){Ht(Xe)},function(Xe){$t(Xe)}):yt},Oe.buildLogLevels=function ze(yt){return"string"==typeof yt?{default:yt,media:yt,signaling:yt,webrtc:yt}:yt},Oe.trackClass=function Ze(yt,Ht){return(Ht=Ht?"Local":"")+(yt.kind||"").replace(/\w{1}/,function($t){return $t.toUpperCase()})+"Track"},Oe.trackPublicationClass=function je(yt,Ht){return(Ht=Ht?"Local":"")+(yt.kind||"").replace(/\w{1}/,function($t){return $t.toUpperCase()})+"TrackPublication"},Oe.valueToJSON=Dt,Oe.withJitter=function Tr(yt,Ht){var $t=Math.random();return yt-Ht+Math.floor(2*Ht*$t+.5)},Oe.isChromeScreenShareTrack=function bi(yt){return"chrome"===O.guessBrowser()&&"video"===yt.kind&&"displaySurface"in yt.getSettings()},Oe.isUserMediaTrack=function Di(yt){return"string"==typeof yt.getSettings().deviceId},Oe.waitForSometime=function lo(yt){return void 0===yt&&(yt=10),new Promise(function(Ht){return setTimeout(Ht,yt)})},Oe.waitForEvent=function ho(yt,Ht){return new Promise(function($t){yt.addEventListener(Ht,function Xe(Me){yt.removeEventListener(Ht,Xe),$t(Me)})})}},3744:function(Ce,Oe,Y){"use strict";var pe,L=this&&this.__extends||(pe=function(be,ye){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,re){ge.__proto__=re}||function(ge,re){for(var de in re)Object.prototype.hasOwnProperty.call(re,de)&&(ge[de]=re[de])})(be,ye)},function(be,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Class extends value "+String(ye)+" is not a constructor or null");function ge(){this.constructor=be}pe(be,ye),be.prototype=null===ye?Object.create(ye):(ge.prototype=ye.prototype,new ge)}),W=this&&this.__assign||function(){return W=Object.assign||function(pe){for(var be,ye=1,ge=arguments.length;ye<ge;ye++)for(var re in be=arguments[ye])Object.prototype.hasOwnProperty.call(be,re)&&(pe[re]=be[re]);return pe},W.apply(this,arguments)},ne=Y(9069).EventEmitter,H=Y(9739).getUserAgent,P=globalThis,x=P.WebSocket?P.WebSocket:Y(3332),J=Y(8701),ie=J.hardwareDevicePublisheriPad,te=J.hardwareDevicePublisheriPhone,le=Y(9739),X=Y(3948),z=function(pe){function be(ye,ge,re,de,Te,Fe){var xe=pe.call(this)||this;return Fe=Object.assign({gateway:se(de,Te)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:H(),WebSocket:x},Fe),Object.defineProperties(xe,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:le.defer()},_reconnectAttemptsLeft:{value:Fe.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:Fe.WebSocket}}),xe._readyToConnect.promise.then(function(Ve){var ze=Ve.roomSid,Ze=Ve.participantSid,je=xe;xe.on("disconnected",function xt(Wt){if(je._session=null,Wt&&je._reconnectAttemptsLeft>0)return je.emit("reconnecting"),void function De(pe,be,ye,ge,re,de,Te){var Fe=Date.now()-pe._connectTimestamp,xe=Te.reconnectIntervalMs-Fe;xe>0?setTimeout(function(){K(pe,be,ye,ge,re,de,Te)},xe):K(pe,be,ye,ge,re,de,Te)}(je,ye,ge,re,ze,Ze,Fe);je.removeListener("disconnected",xt)}),K(xe,ye,ge,re,ze,Ze,Fe)}).catch(function(){}),xe}return L(be,pe),be.prototype.connect=function(ye,ge){this._readyToConnect.resolve({roomSid:ye,participantSid:ge})},be.prototype._publish=function(ye){ye.session=this._session,this._ws.send(JSON.stringify(ye))},be.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},be.prototype.publish=function(ye,ge,re){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:ye,name:ge,payload:re,timestamp:Date.now(),type:"event",version:1}),!0)},be}(ne);function K(pe,be,ye,ge,re,de,Te){pe._connectTimestamp=Date.now(),pe._reconnectAttemptsLeft--,pe._ws=new Te.WebSocket(Te.gateway);var Fe=pe._ws;Fe.addEventListener("close",function(xe){1e3!==xe.code?pe.emit("disconnected",new Error("WebSocket Error "+xe.code+": "+xe.reason)):pe.emit("disconnected")}),Fe.addEventListener("message",function(xe){!function ve(pe,be,ye){switch(be.type){case"connected":pe._session=be.session,pe._reconnectAttemptsLeft=ye.maxReconnectAttempts,pe._eventQueue.splice(0).forEach(pe._publish,pe),pe.emit("connected");break;case"error":pe._ws.close(),pe.emit("disconnected",new Error(be.message))}}(pe,JSON.parse(xe.data),Te)}),Fe.addEventListener("open",function(){var xe={type:"connect",token:be,version:1};xe.publisher={name:ye,sdkVersion:ge,userAgent:Te.userAgent,participantSid:de,roomSid:re},X.isIpad()?xe.publisher=W(W({},xe.publisher),ie):X.isIphone()&&(xe.publisher=W(W({},xe.publisher),te)),Fe.send(JSON.stringify(xe))})}function se(pe,be){return"prod"===pe?"wss://sdkgw."+be+".twilio.com":"wss://sdkgw."+pe+"-"+be+".twilio.com"}Ce.exports=z},4920:Ce=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return Y.prototype.connect=function(){},Y.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},Y.prototype.publish=function(){return this._connected},Y}();Ce.exports=Oe},6396:(Ce,Oe,Y)=>{"use strict";var L=Y(9739).defer,W=function(){function ne(){Object.defineProperties(this,{_audio:{value:L(),writable:!0},_video:{value:L(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return ne.prototype.resolveDeferred=function(H){"audio"===H?this._audio.resolve():this._video.resolve()},ne.prototype.startDeferred=function(H){"audio"===H?this._audio=L():this._video=L()},ne.prototype.whenResolved=function(H){return"audio"===H?this._audio.promise:this._video.promise},ne}();Ce.exports=new W},1458:function(Ce,Oe,Y){"use strict";var P,L=this&&this.__read||function(K,se){var ve="function"==typeof Symbol&&K[Symbol.iterator];if(!ve)return K;var pe,ye,De=ve.call(K),be=[];try{for(;(void 0===se||se-- >0)&&!(pe=De.next()).done;)be.push(pe.value)}catch(ge){ye={error:ge}}finally{try{pe&&!pe.done&&(ve=De.return)&&ve.call(De)}finally{if(ye)throw ye.error}}return be},W=this&&this.__spreadArray||function(K,se){for(var ve=0,De=se.length,pe=K.length;ve<De;ve++,pe++)K[pe]=se[ve];return K},ne=Y(7846).getLogger,H=Y(8701),U=H.DEFAULT_LOG_LEVEL,D=H.DEFAULT_LOGGER_NAME,O=Y(8701).typeErrors,J=function(){function K(se,ve,De,pe,be){if("string"!=typeof se)throw O.INVALID_TYPE("moduleName","string");if(!ve)throw O.REQUIRED_ARGUMENT("component");"object"!=typeof De&&(De={}),be=be||ne,z(De),Object.defineProperties(this,{_component:{value:ve},_logLevels:{value:De},_warnings:{value:new Set},_loggerName:{get:function(){var ge=pe&&"string"==typeof pe?pe:D;return this._logLevelsEqual||(ge=ge+"-"+se),ge}},_logger:{get:function(){var ge=be(this._loggerName),re=this._logLevels[se]||U;return ge.setDefaultLevel(re="off"===re?"silent":re),ge}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return K.getLevelByName(De[se]||U)}},name:{get:ve.toString.bind(ve)}})}return K.getLevelByName=function(se){return isNaN(se)?(X(se=se.toUpperCase()),K[se]):parseInt(se,10)},K.prototype.createLog=function(se,ve){var De=this._loggerName;return this._logLevelsEqual||(De=De.substring(0,De.lastIndexOf("-"))),new K(se,ve,this._logLevels,De)},K.prototype.setLevels=function(se){return z(se),Object.assign(this._logLevels,se),this},K.prototype.log=function(se,ve){var De=K._levels[se];if(!De)throw O.INVALID_VALUE("logLevel",te);De=De.toLowerCase();var pe=[(new Date).toISOString(),De,this.name];return(this._logger[De]||function(){}).apply(void 0,W([],L(pe.concat(ve)))),this},K.prototype.debug=function(){return this.log(K.DEBUG,[].slice.call(arguments))},K.prototype.deprecated=function(se){var ve=function x(K){if((P=P||new Map).has(K))return P.get(K);var se=new Set;return P.set(K,se),se}(this._component.constructor);return ve.has(se)?this:(ve.add(se),this.warn(se))},K.prototype.info=function(){return this.log(K.INFO,[].slice.call(arguments))},K.prototype.warn=function(){return this.log(K.WARN,[].slice.call(arguments))},K.prototype.warnOnce=function(se){return this._warnings.has(se)?this:(this._warnings.add(se),this.warn(se))},K.prototype.error=function(){return this.log(K.ERROR,[].slice.call(arguments))},K.prototype.throw=function(se,ve){throw se.clone&&(se=se.clone(ve)),this.log(K.ERROR,se),se},K}();Object.defineProperties(J,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var ie={},te=[],le=J._levels.map(function(K,se){return ie[K]=!0,te.push(se),K});function X(K){if(!(K in ie))throw O.INVALID_VALUE("level",le)}function z(K){Object.keys(K).forEach(function(se){X(K[se].toUpperCase())})}Ce.exports=J},8218:Ce=>{"use strict";var Oe=function(){function Y(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return Y.prototype.get=function(){var L=this._samples;return(L[1].numerator-L[0].numerator)/(L[1].denominator-L[0].denominator||1/0)},Y.prototype.putSample=function(L,W){var ne=this._samples;ne.shift(),ne.push({denominator:W,numerator:L})},Y}();Ce.exports=Oe},2643:Ce=>{"use strict";var Oe=function(){function Y(L,W){var ne=this,H=(W=Object.assign({navigator,window},W)).navigator,U=H.connection||{type:null},D=U.type,O=U.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var ie=D!==ne.type&&ne.isOnline;D=ne.type,ie&&L()}},_target:{value:U}}:{_events:{value:["online"]},_listener:{value:L},_target:{value:W.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof H.onLine||H.onLine}},type:{enumerable:!0,get:function(){return U.type||null}},_listener:O._listener,_events:O._events,_target:O._target})}return Y.prototype.start=function(){var L=this;this._events.forEach(function(W){L._target.addEventListener(W,L._listener)})},Y.prototype.stop=function(){var L=this;this._events.forEach(function(W){L._target.removeEventListener(W,L._listener)})},Y}();Ce.exports=Oe},5318:function(Ce){"use strict";var ne,Oe=this&&this.__extends||(ne=function(H,U){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(D[P]=O[P])})(H,U)},function(H,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function D(){this.constructor=H}ne(H,U),H.prototype=null===U?Object.create(U):(D.prototype=U.prototype,new D)}),Y=function(){function ne(H){Object.defineProperties(this,{_callback:{value:H}})}return ne.prototype.observe=function(){},ne.prototype.unobserve=function(){},ne.prototype.makeVisible=function(H){var U=this._makeFakeEntry(H,!0);this._callback([U])},ne.prototype.makeInvisible=function(H){var U=this._makeFakeEntry(H,!1);this._callback([U])},ne.prototype._makeFakeEntry=function(H,U){return{target:H,isIntersecting:U}},ne}(),L=function(ne){function H(){return null!==ne&&ne.apply(this,arguments)||this}return Oe(H,ne),H}(Y),W=function(ne){function H(){return null!==ne&&ne.apply(this,arguments)||this}return Oe(H,ne),H.prototype.resize=function(U){var D=this._makeFakeEntry(U,!0);this._callback([D])},H}(Y);Ce.exports={NullIntersectionObserver:L,NullResizeObserver:W,NullObserver:Y}},3898:function(Ce,Oe,Y){"use strict";var L=this&&this.__read||function(xe,Ve){var ze="function"==typeof Symbol&&xe[Symbol.iterator];if(!ze)return xe;var je,Wt,Ze=ze.call(xe),xt=[];try{for(;(void 0===Ve||Ve-- >0)&&!(je=Ze.next()).done;)xt.push(je.value)}catch(ht){Wt={error:ht}}finally{try{je&&!je.done&&(ze=Ze.return)&&ze.call(Ze)}finally{if(Wt)throw Wt.error}}return xt},W=Y(9739),ne=W.difference,H=W.flatMap,U=Y(570),D={0:"PCMU",8:"PCMA"};function O(xe){return Array.from(x(xe)).reduce(function(Ve,ze){var Ze=ze[0],je=ze[1],xt=Ve.get(je)||[];return Ve.set(je,xt.concat(Ze))},new Map)}function P(xe){return te(xe).reduce(function(Ve,ze){var Ze=ie(ze);return Ze?Ve.set(Ze,ze):Ve},new Map)}function x(xe){return le(xe).reduce(function(Ve,ze){var Ze=new RegExp("a=rtpmap:"+ze+" ([^/]+)"),je=xe.match(Ze),xt=je?je[1].toLowerCase():D[ze]?D[ze].toLowerCase():"";return Ve.set(ze,xt)},new Map)}function J(xe,Ve){var ze=new RegExp("^a=fmtp:"+xe+" (.+)$","m"),Ze=Ve.match(ze);return Ze&&Ze[1].split(";").reduce(function(je,xt){var Wt=L(xt.split("="),2),qe=Wt[1];return je[Wt[0]]=isNaN(qe)?qe:parseInt(qe,10),je},{})}function ie(xe){var Ve=xe.match(/^a=mid:(.+)$/m);return Ve&&Ve[1]}function te(xe,Ve,ze){return xe.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(Ze){return"m="+Ze}).filter(function(Ze){var je=new RegExp("m="+(Ve||".*"),"gm"),xt=new RegExp("a="+(ze||".*"),"gm");return je.test(Ze)&&xt.test(Ze)})}function le(xe){var ze=xe.split("\r\n")[0].match(/([0-9]+)/g);return ze?ze.slice(1).map(function(Ze){return parseInt(Ze,10)}):[]}function z(xe,Ve){var ze=Ve.split("\r\n"),Ze=ze[0],je=ze.slice(1);return[Ze=Ze.replace(/([0-9]+\s?)+$/,xe.join(" "))].concat(je).join("\r\n")}function ge(xe,Ve){var ze=te(xe);return[xe.split("\r\nm=")[0]].concat(ze.map(function(je){if(!/^m=(audio|video)/.test(je))return je;var xt=ie(je);if(!xt)return je;var Wt=Ve.get(xt);if(!Wt)return je;var ht=(je.match(/^a=msid:(.+)$/m)||[])[1];if(!ht)return je;var qe=L(ht.split(" "),2),Ue=qe[0],Ye=qe[1],we=new RegExp("msid:"+Ue+(Ye?" "+Ye:"")+"$","gm");return je.replace(we,"msid:"+Ue+" "+Wt)})).join("\r\n")}function Te(xe,Ve){return"a=fmtp:"+xe+" "+Object.entries(Ve).map(function(Ze){var je=L(Ze,2);return je[0]+"="+je[1]}).join(";")}Oe.addOrRewriteNewTrackIds=function ye(xe,Ve,ze){var Ze=Array.from(ze).reduce(function(je,xt){var Wt=L(xt,2),qe=Wt[1];return te(xe,Wt[0],"send(only|recv)").map(ie).filter(function(we){return!Ve.has(we)}).forEach(function(we,nt){return je.set(we,qe[nt])}),je},new Map);return ge(xe,Ze)},Oe.addOrRewriteTrackIds=ge,Oe.createCodecMapForMediaSection=O,Oe.createPtToCodecName=x,Oe.disableRtx=function de(xe){var Ve=te(xe);return[xe.split("\r\nm=")[0]].concat(Ve.map(function(Ze){if(!/^m=video/.test(Ze))return Ze;var xt=O(Ze).get("rtx");if(!xt)return Ze;var Wt=new Set(le(Ze));xt.forEach(function(Ye){return Wt.delete(Ye)});var ht=Ze.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),qe=ht&&ht[1],Ue=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(qe?[new RegExp("^a=ssrc:"+qe+" .+$")]:[]);return Ze=Ze.split("\r\n").filter(function(Ye){return Ue.every(function(we){return!we.test(Ye)})}).join("\r\n"),z(Array.from(Wt),Ze)})).join("\r\n")},Oe.enableDtxForOpus=function Fe(xe,Ve){var ze=te(xe),Ze=xe.split("\r\nm=")[0];return Ve=Ve||ze.filter(function(je){return/^m=audio/.test(je)}).map(ie),[Ze].concat(ze.map(function(je){if(!/^m=audio/.test(je))return je;var Wt=O(je).get("opus");if(!Wt)return je;var ht=J(Wt,je);if(!ht)return je;var qe=Te(Wt,ht),Ue=new RegExp(qe),Ye=ie(je);Ve.includes(Ye)?ht.usedtx=1:delete ht.usedtx;var we=Te(Wt,ht);return je.replace(Ue,we)})).join("\r\n")},Oe.filterLocalCodecs=function pe(xe,Ve){var ze=te(xe),Ze=xe.split("\r\nm=")[0],je=P(Ve);return[Ze].concat(ze.map(function(xt){return function De(xe,Ve,ze){if(!/^m=(audio|video)/.test(xe))return xe;var Ze=ie(xe),je=Ze&&Ve.get(Ze);if(!je)return xe;var xt=x(je),Wt=O(xe),ht=H(Array.from(xt),function(we){var nt=L(we,2),Dt=nt[0],zt=nt[1];return"rtx"===zt||ze.includes(zt)?[]:function ve(xe,Ve,ze,Ze,je){var xt=ze.get(xe)||[];if(xt.length<=1)return xt;var Wt=J(Ve,je);if(!Wt)return xt;var ht=xt.find(function(qe){var Ue=J(qe,Ze);return Ue&&Object.keys(Wt).every(function(Ye){return Wt[Ye]===Ue[Ye]})});return"number"==typeof ht?[ht]:xt}(zt,Dt,Wt,xe,je)}),qe=Wt.get("rtx")||[];ht=ht.concat(qe.filter(function(we){var nt=J(we,xe);return nt&&ht.includes(nt.apt)}));var Ue=xe.split("\r\n").filter(function(we){var nt=we.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Dt=nt&&nt[2];return!nt||Dt&&ht.includes(parseInt(Dt,10))});return z(le(xe).filter(function(we){return ht.includes(we)}),Ue.join("\r\n"))}(xt,je,[])})).join("\r\n")},Oe.getMediaSections=te,Oe.removeSSRCAttributes=function re(xe,Ve){return xe.split("\r\n").filter(function(ze){return!Ve.find(function(Ze){return new RegExp("a=ssrc:.*"+Ze+":","g").test(ze)})}).join("\r\n")},Oe.revertSimulcast=function be(xe,Ve,ze,Ze){void 0===Ze&&(Ze=!1);var je=P(ze),xt=P(Ve),Wt=te(xe);return[xe.split("\r\nm=")[0]].concat(Wt.map(function(qe){if(qe=qe.replace(/\r\n$/,""),!/^m=video/.test(qe))return qe;var Ue=qe.match(/^a=mid:(.+)$/m),Ye=Ue&&Ue[1];if(!Ye)return qe;var we=je.get(Ye),nt=x(we),Dt=le(we),zt=Dt.length&&"vp8"===nt.get(Dt[0]);return Ze||!zt?xt.get(Ye).replace(/\r\n$/,""):qe})).concat("").join("\r\n")},Oe.setCodecPreferences=function K(xe,Ve,ze){var Ze=te(xe);return[xe.split("\r\nm=")[0]].concat(Ze.map(function(xt){if(!/^m=(audio|video)/.test(xt))return xt;var Wt=xt.match(/^m=(audio|video)/)[1],ht=O(xt),Ue=function X(xe,Ve){Ve=Ve.map(function(xt){return xt.codec.toLowerCase()});var ze=H(Ve,function(xt){return xe.get(xt)||[]}),Ze=ne(Array.from(xe.keys()),Ve),je=H(Ze,function(xt){return xe.get(xt)});return ze.concat(je)}(ht,"audio"===Wt?Ve:ze),Ye=z(Ue,xt),we=ht.get("pcma")||[],nt=ht.get("pcmu")||[];return("audio"===Wt?new Set(we.concat(nt)):new Set).has(Ue[0])?Ye.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):Ye})).join("\r\n")},Oe.setSimulcast=function se(xe,Ve){var ze=te(xe);return[xe.split("\r\nm=")[0]].concat(ze.map(function(je){if(je=je.replace(/\r\n$/,""),!/^m=video/.test(je))return je;var xt=O(je),Wt=le(je),ht=new Set(xt.get("vp8")||[]);return Wt.some(function(Ue){return ht.has(Ue)})?U(je,Ve):je})).concat("").join("\r\n")}},3073:(Ce,Oe,Y)=>{"use strict";var L=Y(1647).RTCSessionDescription,W=Y(3898),ne=W.createPtToCodecName,H=W.getMediaSections;function O(z){var K=ne(z);z=function P(z,K){return Array.from(K.keys()).reduce(function(se,ve){var De=new RegExp("^a=rtpmap:"+ve+" rtx.+$","gm");return(se.match(De)||[]).slice("rtx"===K.get(ve)?1:0).reduce(function(pe,be){var ye=new RegExp("\r\n"+be),ge=new RegExp("\r\na=fmtp:"+ve+" apt=[0-9]+");return pe.replace(ye,"").replace(ge,"")},se)},z)}(z,K);var se=function x(z){var K=new Map;return z.forEach(function(se,ve){var De=K.get(se)||new Set;return K.set(se,De.add(ve))}),K}(K),ve=se.get("rtx")||new Set,De=new Set,pe=function J(z,K,se,ve){return Array.from(se).reduce(function(De,pe){var be=new RegExp("a=fmtp:"+pe+" apt=(\\d+)"),ye=z.match(be);if(!ye)return ve.add(pe),De;var ge=Number.parseInt(ye[1]);return K.has(ge)?"rtx"===K.get(ge)?(ve.add(pe),De):De.set(pe,ge):(ve.add(pe),De)},new Map)}(z,K,ve,De),be=function ie(z,K){var se=Array.from(z).reduce(function(ve,De){var pe=De[0],be=De[1],ye=ve.get(be)||new Set;return ve.set(be,ye.add(pe))},new Map);return Array.from(se).reduce(function(ve,De){var pe=De[0],be=Array.from(De[1]);return be.length>1?(be.forEach(function(ye){K.add(ye)}),ve):ve.set(pe,be[0])},new Map)}(pe,De),ye=Array.from(De);return["h264","vp8","vp9"].reduce(function(de,Te){var Fe=se.get(Te)||new Set;return Array.from(Fe).reduce(function(xe,Ve){return be.has(Ve)?xe:xe.add(Ve)},de)},new Set).forEach(function(de){if(ye.length){var Te=ye.shift();z=function X(z,K,se){return z.endsWith("\r\n")?z+"a=fmtp:"+K+" apt="+se+"\r\n":z+"\r\na=fmtp:"+K+" apt="+se}(z=te(z,Te),Te,de)}}),ye.forEach(function(de){z=function le(z,K){var se=new RegExp("a=rtpmap:"+K+".*\r\n","gm");return z.replace(se,"")}(z=te(z,de),de)}),z}function te(z,K){var se=new RegExp("a=fmtp:"+K+".*\r\n","gm");return z.replace(se,"")}Ce.exports=function U(z){var K={type:z.type};return"rollback"!==z.type&&(K.sdp=function D(z){var K=H(z);return[z.split("\r\nm=")[0]].concat(K.map(O)).join("\r\n")}(z.sdp)),new L(K)}},570:function(Ce,Oe,Y){"use strict";var L=this&&this.__read||function(X,z){var K="function"==typeof Symbol&&X[Symbol.iterator];if(!K)return X;var ve,pe,se=K.call(X),De=[];try{for(;(void 0===z||z-- >0)&&!(ve=se.next()).done;)De.push(ve.value)}catch(be){pe={error:be}}finally{try{ve&&!ve.done&&(K=se.return)&&K.call(se)}finally{if(pe)throw pe.error}}return De},W=Y(9739),ne=W.difference,H=W.flatMap;function U(){return String(Math.floor(4294967295*Math.random()))}var D=function(){function X(z,K,se){Object.defineProperties(this,{cName:{enumerable:!0,value:se},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:K},trackId:{enumerable:!0,value:z}})}return X.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var z=[U(),U()];z.forEach(function(K){this.primarySSRCs.add(K)},this),this.rtxPairs.size&&z.forEach(function(K){this.rtxPairs.set(U(),K)},this)}},X.prototype.addSSRC=function(z,K,se){K?this.rtxPairs.set(z,K):this.primarySSRCs.add(z),this.isSimulcastEnabled=this.isSimulcastEnabled||se},X.prototype.toSdpLines=function(z){var K=this,se=z?[]:Array.from(this.rtxPairs.entries()).map(function(ge){return ge.reverse()}),ve=Array.from(this.primarySSRCs.values()),De=se.length?H(se):ve,pe=H(De,function(ge){return["a=ssrc:"+ge+" cname:"+K.cName,"a=ssrc:"+ge+" msid:"+K.streamId+" "+K.trackId]}),be=se.map(function(ge){return"a=ssrc-group:FID "+ge.join(" ")}),ye=["a=ssrc-group:SIM "+ve.join(" ")];return be.concat(pe).concat(ye)},X}();function O(X,z){return(X.match(new RegExp(z,"gm"))||[]).map(function(se){return(se.match(new RegExp(z))||[]).slice(1)})}Ce.exports=function le(X,z){var K=function te(X){var z=function P(X){return new Set(H(O(X,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(X),K=function J(X){return new Map(O(X,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(K){return K.reverse()}))}(X),se=function ie(X){var z=L(H(O(X,"^a=msid:(.+) (.+)$")),2),K=z[0],se=z[1];return H(O(X,"^a=ssrc:(.+) cname:.+$")).map(function(De){return[De,K,se]})}(X);return se.reduce(function(ve,De){var pe=De[0],be=De[1],ye=De[2],ge=ve.get(ye)||new D(ye,be,function x(X,z,K){return X.match(new RegExp("a=ssrc:"+z+" "+K+":(.+)"))[1]}(X,pe,"cname")),re=K.get(pe)||null;return ge.addSSRC(pe,re,z.has(pe)),ve.set(ye,ge)},new Map)}(X),se=Array.from(K.keys()),ve=Array.from(z.keys()),De=ne(se,ve),pe=ne(ve,se);H(De,function(xe){return K.get(xe)}).forEach(function(xe){xe.addSimulcastSSRCs(),z.set(xe.trackId,xe)}),ve=Array.from(z.keys());var ye=ne(ve,pe),ge=H(ye,function(xe){return z.get(xe)}),re=!X.match(/a=rtpmap:[0-9]+ rtx/),de=H(ge,function(xe){return xe.toSdpLines(re)}),Te=H(new Set(X.split("\r\n").concat(de))),Fe="a=x-google-flag:conference";return X.match(Fe)||Te.push(Fe),Te.join("\r\n")}},1057:(Ce,Oe,Y)=>{"use strict";var L=Y(3898).getMediaSections,W=function(){function ne(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return ne.prototype.match=function(H){return this._midsToTrackIds.get(H.transceiver.mid)||null},ne.prototype.update=function(H){var U=L(H,"(audio|video)");this._midsToTrackIds=U.reduce(function(D,O){var P=O.match(/^a=mid:(.+)$/m)||[],x=O.match(/^a=msid:.+ (.+)$/m)||[],J=P[1],ie=x[1];return J&&ie?D.set(J,ie):D},this._midsToTrackIds)},ne}();Ce.exports=W},8066:(Ce,Oe)=>{var Y="1234567890abcdef";function W(ne){for(var H="",U=0;U<32;U++)H+=Y.charAt(Math.floor(Math.random()*Y.length));return""+ne+H}Oe.sessionSID=W("SS"),Oe.createSID=W},8592:(Ce,Oe,Y)=>{"use strict";var L=Y(7627),W=L.guessBrowser,ne=L.support,H=Y(3948),U=H.isAndroid,D=H.isMobile,O=H.isNonChromiumEdge,P=H.rebrandedChromeBrowser,x=H.mobileWebKitBrowser,J=["crios","edg","edge","electron","headlesschrome"],ie=["chrome","firefox"],te=["chrome","safari"],le=[];Ce.exports=function X(){var z=W();if(!z)return!1;var K=P(z),se=x(z),ve=U()?ie:te;return!!z&&ne()&&(!K||J.includes(K))&&!O(z)&&(!se||le.includes(se))&&(!D()||ve.includes(z))}},6543:Ce=>{"use strict";var Oe=function(){function Y(L,W,ne){void 0===ne&&(ne=!0),Object.defineProperties(this,{_delay:{value:W,writable:!0},_fn:{value:L},_timeout:{value:null,writable:!0}}),ne&&this.start()}return Object.defineProperty(Y.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),Y.prototype.setDelay=function(L){this._delay=L},Y.prototype.start=function(){var L=this;this.isSet||(this._timeout=setTimeout(function(){var W=L._fn;L.clear(),W()},this._delay))},Y.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},Y.prototype.reset=function(){this.clear(),this.start()},Y}();Ce.exports=Oe},8380:function(Ce,Oe,Y){"use strict";var Xe,L=this&&this.__extends||(Xe=function(Me,st){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kn,dn){kn.__proto__=dn}||function(kn,dn){for(var Ji in dn)Object.prototype.hasOwnProperty.call(dn,Ji)&&(kn[Ji]=dn[Ji])})(Me,st)},function(Me,st){if("function"!=typeof st&&null!==st)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");function kn(){this.constructor=Me}Xe(Me,st),Me.prototype=null===st?Object.create(st):(kn.prototype=st.prototype,new kn)}),W=Y(9318),ne={};Oe.createTwilioError=function(Me,st){return st="string"==typeof st&&st?st:"Unknown error",ne[Me="number"==typeof Me?Me:0]?new ne[Me]:new W(Me,st)};var H=function(Xe){function Me(){var st=Xe.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenInvalidError=H,Object.defineProperty(ne,20101,{value:H});var U=function(Xe){function Me(){var st=Xe.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenHeaderInvalidError=U,Object.defineProperty(ne,20102,{value:U});var D=function(Xe){function Me(){var st=Xe.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenIssuerInvalidError=D,Object.defineProperty(ne,20103,{value:D});var O=function(Xe){function Me(){var st=Xe.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenExpiredError=O,Object.defineProperty(ne,20104,{value:O});var P=function(Xe){function Me(){var st=Xe.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenNotYetValidError=P,Object.defineProperty(ne,20105,{value:P});var x=function(Xe){function Me(){var st=Xe.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenGrantsInvalidError=x,Object.defineProperty(ne,20106,{value:x});var J=function(Xe){function Me(){var st=Xe.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.AccessTokenSignatureInvalidError=J,Object.defineProperty(ne,20107,{value:J});var ie=function(Xe){function Me(){var st=Xe.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionError=ie,Object.defineProperty(ne,53e3,{value:ie});var te=function(Xe){function Me(){var st=Xe.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionDisconnectedError=te,Object.defineProperty(ne,53001,{value:te});var le=function(Xe){function Me(){var st=Xe.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingConnectionTimeoutError=le,Object.defineProperty(ne,53002,{value:le});var X=function(Xe){function Me(){var st=Xe.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingIncomingMessageInvalidError=X,Object.defineProperty(ne,53003,{value:X});var z=function(Xe){function Me(){var st=Xe.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingOutgoingMessageInvalidError=z,Object.defineProperty(ne,53004,{value:z});var K=function(Xe){function Me(){var st=Xe.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.SignalingServerBusyError=K,Object.defineProperty(ne,53006,{value:K});var se=function(Xe){function Me(){var st=Xe.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameInvalidError=se,Object.defineProperty(ne,53100,{value:se});var ve=function(Xe){function Me(){var st=Xe.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameTooLongError=ve,Object.defineProperty(ne,53101,{value:ve});var De=function(Xe){function Me(){var st=Xe.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNameCharsInvalidError=De,Object.defineProperty(ne,53102,{value:De});var pe=function(Xe){function Me(){var st=Xe.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomCreateFailedError=pe,Object.defineProperty(ne,53103,{value:pe});var be=function(Xe){function Me(){var st=Xe.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomConnectFailedError=be,Object.defineProperty(ne,53104,{value:be});var ye=function(Xe){function Me(){var st=Xe.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMaxParticipantsExceededError=ye,Object.defineProperty(ne,53105,{value:ye});var ge=function(Xe){function Me(){var st=Xe.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomNotFoundError=ge,Object.defineProperty(ne,53106,{value:ge});var re=function(Xe){function Me(){var st=Xe.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMaxParticipantsOutOfRangeError=re,Object.defineProperty(ne,53107,{value:re});var de=function(Xe){function Me(){var st=Xe.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTypeInvalidError=de,Object.defineProperty(ne,53108,{value:de});var Te=function(Xe){function Me(){var st=Xe.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTimeoutOutOfRangeError=Te,Object.defineProperty(ne,53109,{value:Te});var Fe=function(Xe){function Me(){var st=Xe.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusCallbackMethodInvalidError=Fe,Object.defineProperty(ne,53110,{value:Fe});var xe=function(Xe){function Me(){var st=Xe.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusCallbackInvalidError=xe,Object.defineProperty(ne,53111,{value:xe});var Ve=function(Xe){function Me(){var st=Xe.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomStatusInvalidError=Ve,Object.defineProperty(ne,53112,{value:Ve});var ze=function(Xe){function Me(){var st=Xe.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomRoomExistsError=ze,Object.defineProperty(ne,53113,{value:ze});var Ze=function(Xe){function Me(){var st=Xe.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomInvalidParametersError=Ze,Object.defineProperty(ne,53114,{value:Ze});var je=function(Xe){function Me(){var st=Xe.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMediaRegionInvalidError=je,Object.defineProperty(ne,53115,{value:je});var xt=function(Xe){function Me(){var st=Xe.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomMediaRegionUnavailableError=xt,Object.defineProperty(ne,53116,{value:xt});var Wt=function(Xe){function Me(){var st=Xe.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomSubscriptionOperationNotSupportedError=Wt,Object.defineProperty(ne,53117,{value:Wt});var ht=function(Xe){function Me(){var st=Xe.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomCompletedError=ht,Object.defineProperty(ne,53118,{value:ht});var qe=function(Xe){function Me(){var st=Xe.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomAudioOnlyFlagNotSupportedError=qe,Object.defineProperty(ne,53124,{value:qe});var Ue=function(Xe){function Me(){var st=Xe.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.RoomTrackKindNotSupportedError=Ue,Object.defineProperty(ne,53125,{value:Ue});var Ye=function(Xe){function Me(){var st=Xe.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityInvalidError=Ye,Object.defineProperty(ne,53200,{value:Ye});var we=function(Xe){function Me(){var st=Xe.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityTooLongError=we,Object.defineProperty(ne,53201,{value:we});var nt=function(Xe){function Me(){var st=Xe.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantIdentityCharsInvalidError=nt,Object.defineProperty(ne,53202,{value:nt});var Dt=function(Xe){function Me(){var st=Xe.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantMaxTracksExceededError=Dt,Object.defineProperty(ne,53203,{value:Dt});var zt=function(Xe){function Me(){var st=Xe.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantNotFoundError=zt,Object.defineProperty(ne,53204,{value:zt});var kt=function(Xe){function Me(){var st=Xe.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ParticipantDuplicateIdentityError=kt,Object.defineProperty(ne,53205,{value:kt});var mt=function(Xe){function Me(){var st=Xe.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackInvalidError=mt,Object.defineProperty(ne,53300,{value:mt});var Kn=function(Xe){function Me(){var st=Xe.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameInvalidError=Kn,Object.defineProperty(ne,53301,{value:Kn});var Yn=function(Xe){function Me(){var st=Xe.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameTooLongError=Yn,Object.defineProperty(ne,53302,{value:Yn});var Lr=function(Xe){function Me(){var st=Xe.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameCharsInvalidError=Lr,Object.defineProperty(ne,53303,{value:Lr});var Vr=function(Xe){function Me(){var st=Xe.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackNameIsDuplicatedError=Vr,Object.defineProperty(ne,53304,{value:Vr});var Rr=function(Xe){function Me(){var st=Xe.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.TrackServerTrackCapacityReachedError=Rr,Object.defineProperty(ne,53305,{value:Rr});var Tr=function(Xe){function Me(){var st=Xe.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaClientLocalDescFailedError=Tr,Object.defineProperty(ne,53400,{value:Tr});var Pn=function(Xe){function Me(){var st=Xe.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaServerLocalDescFailedError=Pn,Object.defineProperty(ne,53401,{value:Pn});var bi=function(Xe){function Me(){var st=Xe.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaClientRemoteDescFailedError=bi,Object.defineProperty(ne,53402,{value:bi});var Di=function(Xe){function Me(){var st=Xe.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaServerRemoteDescFailedError=Di,Object.defineProperty(ne,53403,{value:Di});var lo=function(Xe){function Me(){var st=Xe.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaNoSupportedCodecError=lo,Object.defineProperty(ne,53404,{value:lo});var ho=function(Xe){function Me(){var st=Xe.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaConnectionError=ho,Object.defineProperty(ne,53405,{value:ho});var yt=function(Xe){function Me(){var st=Xe.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.MediaDTLSTransportFailedError=yt,Object.defineProperty(ne,53407,{value:yt});var Ht=function(Xe){function Me(){var st=Xe.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ConfigurationAcquireFailedError=Ht,Object.defineProperty(ne,53500,{value:Ht});var $t=function(Xe){function Me(){var st=Xe.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(st,Me.prototype),st}return L(Me,Xe),Me}(W);Oe.ConfigurationAcquireTurnFailedError=$t,Object.defineProperty(ne,53501,{value:$t})},9318:function(Ce){"use strict";var ne,Oe=this&&this.__extends||(ne=function(H,U){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(D[P]=O[P])})(H,U)},function(H,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function D(){this.constructor=H}ne(H,U),H.prototype=null===U?Object.create(U):(D.prototype=U.prototype,new D)}),Y=this&&this.__read||function(ne,H){var U="function"==typeof Symbol&&ne[Symbol.iterator];if(!U)return ne;var O,x,D=U.call(ne),P=[];try{for(;(void 0===H||H-- >0)&&!(O=D.next()).done;)P.push(O.value)}catch(J){x={error:J}}finally{try{O&&!O.done&&(U=D.return)&&U.call(D)}finally{if(x)throw x.error}}return P},L=this&&this.__spreadArray||function(ne,H){for(var U=0,D=H.length,O=ne.length;U<D;U++,O++)ne[O]=H[U];return ne},W=function(ne){function H(U){var D=this,O=[].slice.call(arguments,1);D=ne.apply(this,L([],Y(O)))||this,Object.setPrototypeOf(D,H.prototype);var P=Error.apply(D,O);return P.name="TwilioError",Object.defineProperty(D,"code",{value:U,enumerable:!0}),Object.getOwnPropertyNames(P).forEach(function(x){Object.defineProperty(this,x,{value:P[x],enumerable:!0})},D),D}return Oe(H,ne),H.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},H}(Error);Ce.exports=W},1501:(Ce,Oe,Y)=>{"use strict";var W=Y(9739).isNonArrayObject,ne=Y(8701),H=ne.typeErrors,U=ne.clientTrackSwitchOffControl,D=ne.videoContentPreferencesMode,O=ne.subscriptionMode,P=ne.trackPriority,x=ne.trackSwitchOffMode;function te(X,z,K){return void 0===K&&(K=[]),typeof X>"u"?null:null!==X&&W(X)?K.reduce(function(se,ve){var De=ve.prop,pe=ve.type,be=ve.values;if(se||!(De in X))return se;var ye=X[De];return pe&&typeof ye!==pe||"number"===pe&&isNaN(ye)?H.INVALID_TYPE(z+"."+De,pe):Array.isArray(be)&&!be.includes(ye)?H.INVALID_VALUE(z+"."+De,be):se},null):H.INVALID_TYPE(z,"object")}Oe.kG=function J(X){var z=te(X,"options.bandwidthProfile");return!X||z||(z=te(X.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(D)},{prop:"dominantSpeakerPriority",values:Object.values(P)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(O)},{prop:"clientTrackSwitchOffControl",values:Object.values(U)},{prop:"trackSwitchOffMode",values:Object.values(x)}]))?z:X.video?"maxTracks"in X.video&&"clientTrackSwitchOffControl"in X.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in X.video&&"contentPreferencesMode"in X.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function le(X){var z="options.bandwidthProfile.video.renderDimensions",K=te(X,z);return X?K||Object.values(P).reduce(function(se,ve){return se||te(X[ve],z+"."+ve,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):K}(X.video.renderDimensions):null},Oe.Wv=function ie(X,z){if(!(X instanceof z.LocalAudioTrack||X instanceof z.LocalDataTrack||X instanceof z.LocalVideoTrack||X instanceof z.MediaStreamTrack))throw H.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:Ce=>{Ce.exports=function(Y,L){if(Y&&L)if(Y.super_=L,"function"==typeof Object.create)Y.prototype=Object.create(L.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}});else{var W=function ne(){};W.prototype=L.prototype,Y.prototype=new W,Y.prototype.constructor=Y}}},7846:Ce=>{var Oe=function(){},Y="undefined",L=typeof window!==Y&&typeof window.navigator!==Y&&/Trident\/|MSIE /.test(window.navigator.userAgent),W=["trace","debug","info","warn","error"];function ne(le,X){var z=le[X];if("function"==typeof z.bind)return z.bind(le);try{return Function.prototype.bind.call(z,le)}catch{return function(){return Function.prototype.apply.apply(z,[le,arguments])}}}function H(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function U(le){return"debug"===le&&(le="log"),typeof console!==Y&&("trace"===le&&L?H:void 0!==console[le]?ne(console,le):void 0!==console.log?ne(console,"log"):Oe)}function D(le,X){for(var z=0;z<W.length;z++){var K=W[z];this[K]=z<le?Oe:this.methodFactory(K,le,X)}this.log=this.debug}function O(le,X,z){return function(){typeof console!==Y&&(D.call(this,X,z),this[le].apply(this,arguments))}}function P(le,X,z){return U(le)||O.apply(this,arguments)}function x(le,X,z){var se,K=this,ve="loglevel";function pe(){var ye;if(typeof window!==Y&&ve){try{ye=window.localStorage[ve]}catch{}if(typeof ye===Y)try{var ge=window.document.cookie,re=ge.indexOf(encodeURIComponent(ve)+"=");-1!==re&&(ye=/^([^;]+)/.exec(ge.slice(re))[1])}catch{}return void 0===K.levels[ye]&&(ye=void 0),ye}}"string"==typeof le?ve+=":"+le:"symbol"==typeof le&&(ve=void 0),K.name=le,K.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},K.methodFactory=z||P,K.getLevel=function(){return se},K.setLevel=function(ye,ge){if("string"==typeof ye&&void 0!==K.levels[ye.toUpperCase()]&&(ye=K.levels[ye.toUpperCase()]),!("number"==typeof ye&&ye>=0&&ye<=K.levels.SILENT))throw"log.setLevel() called with invalid level: "+ye;if(se=ye,!1!==ge&&function De(ye){var ge=(W[ye]||"silent").toUpperCase();if(typeof window!==Y&&ve){try{return void(window.localStorage[ve]=ge)}catch{}try{window.document.cookie=encodeURIComponent(ve)+"="+ge+";"}catch{}}}(ye),D.call(K,ye,le),typeof console===Y&&ye<K.levels.SILENT)return"No console available for logging"},K.setDefaultLevel=function(ye){pe()||K.setLevel(ye,!1)},K.enableAll=function(ye){K.setLevel(K.levels.TRACE,ye)},K.disableAll=function(ye){K.setLevel(K.levels.SILENT,ye)};var be=pe();null==be&&(be=X??"WARN"),K.setLevel(be,!1)}var J=new x,ie={};J.getLogger=function(X){if("symbol"!=typeof X&&"string"!=typeof X||""===X)throw new TypeError("You must supply a name when creating a logger.");var z=ie[X];return z||(z=ie[X]=new x(X,J.getLevel(),J.methodFactory)),z};var te=typeof window!==Y?window.log:void 0;J.noConflict=function(){return typeof window!==Y&&window.log===J&&(window.log=te),J},J.getLoggers=function(){return ie},J.default=J,Ce.exports=J},7708:Ce=>{"use strict";var Oe=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,Y=function(){function L(W){W=Object.assign({AudioContext:Oe},W),Object.defineProperties(this,{_AudioContext:{value:W.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:L}})}return L.prototype.getOrCreate=function(W){if(!this._holders.has(W)&&(this._holders.add(W),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},L.prototype.release=function(W){this._holders.has(W)&&(this._holders.delete(W),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},L}();Ce.exports=new Y},4687:Ce=>{"use strict";Ce.exports=function Y(L,W,ne){ne="number"==typeof ne?ne:250;var H=L.createMediaStreamSource(W),U=L.createAnalyser();U.fftSize=2048,H.connect(U);var D=new Uint8Array(U.fftSize),O=!1;return setTimeout(function(){O=!0},ne),function P(){return O?Promise.resolve(!0):(U.getByteTimeDomainData(D),D.some(function(x){return 128!==x&&0!==x})?Promise.resolve(!1):function Oe(L){return L="number"==typeof L?L:0,new Promise(function(W){return setTimeout(W,L)})}().then(P))}().then(function(x){return H.disconnect(),x},function(x){throw H.disconnect(),x})}},3830:(Ce,Oe,Y)=>{"use strict";var L=Y(4687);Ce.exports=function W(ne,H,U,D,O){D="number"==typeof D?D:3;var P=0,x=Y(7708),J={},ie=x.getOrCreate(J);return function te(){return H(U).then(function(le){return(U.audio?L(ie,le,O).catch(function(z){return ne.warn("Encountered an error while detecting silence",z),!0}):Promise.resolve(!1)).then(function(z){return z?D<=0?(ne.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),le):(ne.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++P+"."),le.getTracks().forEach(function(K){return K.stop()}),D--,te()):(ne.info("Got a non-silent audio MediaStreamTrack; returning it."),le)})})}().then(function(le){return x.release(J),le},function(le){throw x.release(J),le})}},9611:(Ce,Oe,Y)=>{"use strict";var L=Y(7627).flatMap,W=Y(7627).guessBrowser,ne=Y(7627).guessBrowserVersion,H=Y(3236).getSdpFormat,U=W(),D=ne(),O="chrome"===U,P="firefox"===U,x="safari"===U,J=O?D.major:null;function z(re){var de=Array.from(re.values()).find(function(je){return"candidate-pair"===je.type&&je.nominated});if(!de)return null;var Te=re.get(de.localCandidateId),Fe=re.get(de.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Ve=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),ze=Te?Ve.reduce(function(je,xt){return je[xt.key]=typeof Te[xt.key]===xt.type?Te[xt.key]:"deleted"!==xt.key&&null,je},{}):null,Ze=Fe?xe.reduce(function(je,xt){return je[xt.key]=typeof Fe[xt.key]===xt.type?Fe[xt.key]:null,je},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(je){return"inprogress"===je?"in-progress":je}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(je,xt){return je[xt.key]=typeof de[xt.key]===xt.type?xt.fixup?xt.fixup(de[xt.key]):de[xt.key]:null,je},{localCandidate:ze,remoteCandidate:Ze})}function K(re){var de=Array.from(re.values()).find(function(xt){return"candidate-pair"===xt.type&&xt.nominated});if(!de)return null;var Te=re.get(de.localCandidateId),Fe=re.get(de.remoteCandidateId),xe=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Ve=xe.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),ze={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},Ze=Te?Ve.reduce(function(xt,Wt){var ht=Wt.ffKeys&&Wt.ffKeys.find(function(qe){return qe in Te})||Wt.key;return xt[Wt.key]=typeof Te[ht]===Wt.type?"candidateType"===ht&&ze[Te[ht]]||Te[ht]:"deleted"!==ht&&null,xt},{}):null,je=Fe?xe.reduce(function(xt,Wt){var ht=Wt.ffKeys&&Wt.ffKeys.find(function(qe){return qe in Fe})||Wt.key;return xt[Wt.key]=typeof Fe[ht]===Wt.type?"candidateType"===ht&&ze[Fe[ht]]||Fe[ht]:null,xt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(xt,Wt){return xt[Wt.key]=typeof de[Wt.key]===Wt.type?de[Wt.key]:null,xt},{localCandidate:Ze,remoteCandidate:je})}function se(re,de,Te){var Fe="local"===Te?"getSenders":"getReceivers";return re[Fe]?re[Fe]().map(function(Ve){return Ve.track}).filter(function(Ve){return Ve&&Ve.kind===de}):L(re["local"===Te?"getLocalStreams":"getRemoteStreams"](),function(Ve){return Ve["audio"===de?"getAudioTracks":"getVideoTracks"]()})}function De(re,de){return new Promise(function(Te,Fe){J&&J<67?re.getStats(function(xe){Te([be(xe,de)])},null,Fe):re.getStats(de).then(function(xe){Te(function ye(re){var de=null,Te=[],Fe=null,xe=null,Ve=null,ze=null,Ze=null;re.forEach(function(qe){switch(qe.type){case"inbound-rtp":de=qe;break;case"outbound-rtp":Te.push(qe);break;case"media-source":Ze=qe;break;case"track":Ve=qe;break;case"codec":ze=qe;break;case"remote-inbound-rtp":Fe=qe;break;case"remote-outbound-rtp":xe=qe}});var je=Ve&&Ve.remoteSource,Wt=[],ht=je?xe:Fe;return(je?[de]:Te).forEach(function(qe){var Ue={},Ye=[qe,Ze,Ve,ze,ht&&ht.ssrc===qe.ssrc?ht:null];function we(kn){var dn=Ye.find(function(Ji){return Ji&&typeof Ji[kn]<"u"})||null;return dn?dn[kn]:null}var nt=we("ssrc");"number"==typeof nt&&(Ue.ssrc=String(nt));var Dt=we("timestamp");Ue.timestamp=Math.round(Dt);var zt=we("mimeType");"string"==typeof zt&&(zt=zt.split("/"),Ue.codecName=zt[zt.length-1]);var kt=we("roundTripTime");"number"==typeof kt&&(Ue.roundTripTime=Math.round(1e3*kt));var mt=we("jitter");"number"==typeof mt&&(Ue.jitter=Math.round(1e3*mt));var Kn=we("frameWidth");"number"==typeof Kn&&(je?Ue.frameWidthReceived=Kn:(Ue.frameWidthSent=Kn,Ue.frameWidthInput=Ve.frameWidth));var Yn=we("frameHeight");"number"==typeof Yn&&(je?Ue.frameHeightReceived=Yn:(Ue.frameHeightSent=Yn,Ue.frameHeightInput=Ve.frameHeight));var Lr=we("framesPerSecond");"number"==typeof Lr&&(Ue[je?"frameRateReceived":"frameRateSent"]=Lr);var Vr=we("bytesReceived");"number"==typeof Vr&&(Ue.bytesReceived=Vr);var Rr=we("bytesSent");"number"==typeof Rr&&(Ue.bytesSent=Rr);var Tr=we("packetsLost");"number"==typeof Tr&&(Ue.packetsLost=Tr);var Pn=we("packetsReceived");"number"==typeof Pn&&(Ue.packetsReceived=Pn);var bi=we("packetsSent");"number"==typeof bi&&(Ue.packetsSent=bi);var Di=we("audioLevel");"number"==typeof Di&&(Di=Math.round(32767*Di),je?Ue.audioOutputLevel=Di:Ue.audioInputLevel=Di);var lo=we("totalPacketSendDelay");"number"==typeof lo&&(Ue.totalPacketSendDelay=lo);var ho=we("totalEncodeTime");"number"==typeof ho&&(Ue.totalEncodeTime=ho);var yt=we("framesEncoded");"number"==typeof yt&&(Ue.framesEncoded=yt);var Ht=we("estimatedPlayoutTimestamp");"number"==typeof Ht&&(Ue.estimatedPlayoutTimestamp=Ht);var $t=we("totalDecodeTime");"number"==typeof $t&&(Ue.totalDecodeTime=$t);var Xe=we("framesDecoded");"number"==typeof Xe&&(Ue.framesDecoded=Xe);var Me=we("jitterBufferDelay");"number"==typeof Me&&(Ue.jitterBufferDelay=Me);var st=we("jitterBufferEmittedCount");"number"==typeof st&&(Ue.jitterBufferEmittedCount=st),Wt.push(Ue)}),Wt}(xe))},Fe)})}function be(re,de){var Te=re.result().find(function(xe){return"ssrc"===xe.type&&xe.stat("googTrackId")===de.id}),Fe={};return Te&&(Fe.timestamp=Math.round(Number(Te.timestamp)),Fe=Te.names().reduce(function(xe,Ve){switch(Ve){case"googCodecName":xe.codecName=Te.stat(Ve);break;case"googRtt":xe.roundTripTime=Number(Te.stat(Ve));break;case"googJitterReceived":xe.jitter=Number(Te.stat(Ve));break;case"googFrameWidthInput":xe.frameWidthInput=Number(Te.stat(Ve));break;case"googFrameHeightInput":xe.frameHeightInput=Number(Te.stat(Ve));break;case"googFrameWidthSent":xe.frameWidthSent=Number(Te.stat(Ve));break;case"googFrameHeightSent":xe.frameHeightSent=Number(Te.stat(Ve));break;case"googFrameWidthReceived":xe.frameWidthReceived=Number(Te.stat(Ve));break;case"googFrameHeightReceived":xe.frameHeightReceived=Number(Te.stat(Ve));break;case"googFrameRateInput":xe.frameRateInput=Number(Te.stat(Ve));break;case"googFrameRateSent":xe.frameRateSent=Number(Te.stat(Ve));break;case"googFrameRateReceived":xe.frameRateReceived=Number(Te.stat(Ve));break;case"ssrc":xe[Ve]=Te.stat(Ve);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":xe[Ve]=Number(Te.stat(Ve))}return xe},Fe)),Fe}function ge(re,de){var Te=null,Fe=null;(re=re||new Map).forEach(function(Pn){if(!Pn.isRemote)switch(Pn.type){case"inbound-rtp":Te=Pn,Fe=re.get(Pn.remoteId);break;case"outbound-rtp":Fe=Pn,Te=re.get(Pn.remoteId)}});var xe=de?Te:Fe,Ve=de?Fe:Te;function ze(Pn){return xe&&typeof xe[Pn]<"u"?xe[Pn]:Ve&&typeof Ve[Pn]<"u"?Ve[Pn]:null}var Ze={},je=ze("timestamp");Ze.timestamp=Math.round(je);var xt=ze("ssrc");"number"==typeof xt&&(Ze.ssrc=String(xt));var Wt=ze("bytesSent");"number"==typeof Wt&&(Ze.bytesSent=Wt);var ht=ze("packetsLost");"number"==typeof ht&&(Ze.packetsLost=ht);var qe=ze("packetsSent");"number"==typeof qe&&(Ze.packetsSent=qe);var Ue=ze("roundTripTime");"number"==typeof Ue&&(Ze.roundTripTime=Math.round(1e3*Ue));var Ye=ze("jitter");"number"==typeof Ye&&(Ze.jitter=Math.round(1e3*Ye));var we=ze("framerateMean");"number"==typeof we&&(Ze.frameRateSent=Math.round(we));var nt=ze("bytesReceived");"number"==typeof nt&&(Ze.bytesReceived=nt);var Dt=ze("packetsReceived");"number"==typeof Dt&&(Ze.packetsReceived=Dt);var zt=ze("framerateMean");"number"==typeof zt&&(Ze.frameRateReceived=Math.round(zt));var kt=ze("totalPacketSendDelay");"number"==typeof kt&&(Ze.totalPacketSendDelay=kt);var mt=ze("totalEncodeTime");"number"==typeof mt&&(Ze.totalEncodeTime=mt);var Kn=ze("framesEncoded");"number"==typeof Kn&&(Ze.framesEncoded=Kn);var Yn=ze("estimatedPlayoutTimestamp");"number"==typeof Yn&&(Ze.estimatedPlayoutTimestamp=Yn);var Lr=ze("totalDecodeTime");"number"==typeof Lr&&(Ze.totalDecodeTime=Lr);var Vr=ze("framesDecoded");"number"==typeof Vr&&(Ze.framesDecoded=Vr);var Rr=ze("jitterBufferDelay");"number"==typeof Rr&&(Ze.jitterBufferDelay=Rr);var Tr=ze("jitterBufferEmittedCount");return"number"==typeof Tr&&(Ze.jitterBufferEmittedCount=Tr),Ze}Ce.exports=function te(re,de){return re&&"function"==typeof re.getStats?function le(re,de){var Te=se(re,"audio","local"),Fe=se(re,"video","local"),xe=se(re,"audio"),Ve=se(re,"video"),ze={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},Ze=L([[Te,"localAudioTrackStats",!1],[Fe,"localVideoTrackStats",!1],[xe,"remoteAudioTrackStats",!0],[Ve,"remoteVideoTrackStats",!0]],function(je){var Wt=je[1],ht=je[2];return je[0].map(function(qe){return function ve(re,de,Te){return typeof(Te=Te||{}).testForChrome<"u"||O?De(re,de):typeof Te.testForFirefox<"u"||P?function pe(re,de,Te){return new Promise(function(Fe,xe){re.getStats(de).then(function(Ve){Fe([ge(Ve,Te)])},xe)})}(re,de,Te.isRemote):typeof Te.testForSafari<"u"||x?typeof Te.testForSafari<"u"||"unified"===H()?De(re,de):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(re,qe,Object.assign({isRemote:ht},de)).then(function(Ue){Ue.forEach(function(Ye){Ye.trackId=qe.id,ze[Wt].push(Ye)})})})});return Promise.all(Ze).then(function(){return function X(re,de){return typeof(de=de||{}).testForChrome<"u"||O||typeof de.testForSafari<"u"||x?re.getStats().then(z):typeof de.testForFirefox<"u"||P?re.getStats().then(K):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(re,de)}).then(function(je){return ze.activeIceCandidatePair=je,ze})}(re,de):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:Ce=>{"use strict";Ce.exports=function Oe(Y){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(Y=Y||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(Y)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(Ce,Oe,Y)=>{"use strict";var L={};Object.defineProperties(L,{getStats:{enumerable:!0,value:Y(9611)},getUserMedia:{enumerable:!0,value:Y(7370)},MediaStream:{enumerable:!0,value:Y(4946)},MediaStreamTrack:{enumerable:!0,value:Y(6240)},RTCIceCandidate:{enumerable:!0,value:Y(5219)},RTCPeerConnection:{enumerable:!0,value:Y(7061)},RTCSessionDescription:{enumerable:!0,value:Y(5481)}}),Ce.exports=L},4946:Ce=>{"use strict";Ce.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:Ce=>{"use strict";Ce.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:Ce=>{"use strict";Ce.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(Ce,Oe,Y)=>{"use strict";var L=Y(4326),W=Y(7590),ne=Y(1905),H=Y(3688),U=Y(4946),D=Y(7121),O=Y(3236),P=Y(7627),x=Y(7627).isIOSChrome,J="unified"===O.getSdpFormat();function ie(pe,be){if(!(this instanceof ie))return new ie(pe,be);W.call(this),pe=pe||{};var ye=Object.assign(pe.iceTransportPolicy?{iceTransports:pe.iceTransportPolicy}:{},pe);P.interceptEvent(this,"datachannel"),P.interceptEvent(this,"signalingstatechange");var ge=O.getSdpFormat(ye.sdpSemantics),re=new RTCPeerConnection(ye,be);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new U},_peerConnection:{value:re},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:ge},_senders:{value:new Map},_signalingStateLatch:{value:new H},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:re.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:re.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":re.signalingState}}});var de=this;re.addEventListener("datachannel",function(Fe){ve(Fe.channel),de.dispatchEvent(Fe)}),re.addEventListener("signalingstatechange",function(){"stable"===re.signalingState&&(de._appliedTracksToSSRCs=new Map(de._tracksToSSRCs)),!de._pendingLocalOffer&&!de._pendingRemoteOffer&&de.dispatchEvent.apply(de,arguments)}),re.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&re.addStream(this._localStream),P.proxyProperties(RTCPeerConnection.prototype,this,re)}function te(pe,be,ye){var Ve,de=be?pe._pendingLocalOffer:pe._pendingRemoteOffer,Fe=be?"have-local-offer":"have-remote-offer",xe=be?"setLocalDescription":"setRemoteDescription";if(!be&&(be?pe._pendingRemoteOffer:pe._pendingLocalOffer)&&"answer"===ye.type)Ve=function le(pe,be){return pe._peerConnection.setLocalDescription(pe._pendingLocalOffer).then(function(){return pe._pendingLocalOffer=null,pe.setRemoteDescription(be)}).then(function(){pe._signalingStateLatch.lower()})}(pe,ye);else if("offer"===ye.type){if(pe.signalingState!==Fe&&"stable"!==pe.signalingState)return Promise.reject(new Error("Cannot set "+(be?"local":"remote")+" offer in state "+pe.signalingState));!de&&"low"===pe._signalingStateLatch.state&&pe._signalingStateLatch.raise();var ze=pe.signalingState;(function ge(Ze){be?pe._pendingLocalOffer=Ze:pe._pendingRemoteOffer=Ze})(z(ye)),Ve=Promise.resolve(),pe.signalingState!==ze&&Ve.then(function(){pe.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===ye.type&&(pe.signalingState!==Fe?Ve=Promise.reject(new Error("Cannot rollback "+(be?"local":"remote")+" description in "+pe.signalingState)):(function re(){be?pe._pendingLocalOffer=null:pe._pendingRemoteOffer=null}(),pe._rolledBackTracksToSSRCs=new Map(pe._tracksToSSRCs),pe._tracksToSSRCs=new Map(pe._appliedTracksToSSRCs),(Ve=Promise.resolve()).then(function(){pe.dispatchEvent(new Event("signalingstatechange"))})));return Ve||pe._peerConnection[xe](z(ye))}function X(pe,be){return!!pe.getTransceivers().find(function(ye){return ye.receiver&&ye.receiver.track&&ye.receiver.track.kind===be})}function z(pe){return pe instanceof L&&pe._description?pe._description:new RTCSessionDescription(pe)}function K(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function ve(pe){return Object.defineProperty(pe,"maxRetransmits",{value:65535===pe.maxRetransmits?null:pe.maxRetransmits}),K()&&Object.defineProperty(pe,"maxPacketLifeTime",{value:65535===pe.maxRetransmitTime?null:pe.maxRetransmitTime}),pe}function De(pe,be,ye){return"unified"===pe?O.updateUnifiedPlanTrackIdsToSSRCs(be,ye):O.updatePlanBTrackIdsToSSRCs(be,ye)}ne(ie,W),"function"!=typeof RTCPeerConnection.prototype.addTrack?(ie.prototype.addTrack=function(){var be=[].slice.call(arguments),ye=be[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+ye.id+", "+ye.kind+"]: RTCPeerConnection is closed");var ge=this._senders.get(ye);if(ge&&ge.track)throw new Error("Cannot add MediaStreamTrack ["+ye.id+", "+ye.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(ye),this._peerConnection.addStream(this._localStream),ge=new D(ye),this._senders.set(ye,ge),ge},ie.prototype.removeTrack=function(be){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var ye=be.track;!ye||(be=this._senders.get(ye))&&be.track&&(be.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(ye),this._peerConnection.addStream(this._localStream))},ie.prototype.getSenders=function(){return Array.from(this._senders.values())}):ie.prototype.removeTrack=function(be){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(be)}catch{}},ie.prototype.addIceCandidate=function(be){var ge,ye=[].slice.call(arguments),re=this;return ge="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return re._peerConnection.addIceCandidate(be)}):this._peerConnection.addIceCandidate(be),ye.length>1?P.legacyPromise(ge,ye[1],ye[2]):ge},ie.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},ie.prototype.createAnswer=function(){var ye,be=[].slice.call(arguments),ge=this;return ye=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return ge._signalingStateLatch.lower(),ge._peerConnection.createAnswer()}).then(function(de){return ge._pendingRemoteOffer=null,ge._rolledBackTracksToSSRCs.clear(),new L({type:"answer",sdp:De(ge._sdpFormat,ge._tracksToSSRCs,de.sdp)})},function(de){throw ge._pendingRemoteOffer=null,de}):this._peerConnection.createAnswer().then(function(re){return ge._rolledBackTracksToSSRCs.clear(),new L({type:"answer",sdp:De(ge._sdpFormat,ge._tracksToSSRCs,re.sdp)})}),be.length>1?P.legacyPromise(ye,be[0],be[1]):ye},ie.prototype.createOffer=function(){var be=[].slice.call(arguments),ye=(be.length>1?be[2]:be[0])||{},ge=this;if(x()){if(ye.offerToReceiveVideo&&!this._audioTransceiver&&(!J||!X(this,"audio"))){delete ye.offerToReceiveAudio;try{this._audioTransceiver=J?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(de){return Promise.reject(de)}}if(ye.offerToReceiveVideo&&!this._videoTransceiver&&(!J||!X(this,"video"))){delete ye.offerToReceiveVideo;try{this._videoTransceiver=J?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(de){return Promise.reject(de)}}}var re=this._peerConnection.createOffer(ye).then(function(de){return ge._rolledBackTracksToSSRCs.clear(),new L({type:de.type,sdp:De(ge._sdpFormat,ge._tracksToSSRCs,de.sdp)})});return be.length>1?P.legacyPromise(re,be[0],be[1]):re},ie.prototype.createDataChannel=function(be,ye){ye=function se(pe){return pe=Object.assign({},pe),K()&&"maxPacketLifeTime"in pe&&(pe.maxRetransmitTime=pe.maxPacketLifeTime),pe}(ye);var ge=this._peerConnection.createDataChannel(be,ye);return ve(ge),ge},ie.prototype.setLocalDescription=function(){var be=[].slice.call(arguments),ye=be[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ge=te(this,!0,ye);return be.length>1?P.legacyPromise(ge,be[1],be[2]):ge},ie.prototype.setRemoteDescription=function(){var be=[].slice.call(arguments),ye=be[0];this._rolledBackTracksToSSRCs.clear();var ge=te(this,!1,ye);return be.length>1?P.legacyPromise(ge,be[1],be[2]):ge},P.delegateMethods(RTCPeerConnection.prototype,ie.prototype,"_peerConnection"),Ce.exports=ie},7111:(Ce,Oe,Y)=>{"use strict";var L=Y(7590),W=Y(3657),ne=Y(1905),H=Y(3236).updateUnifiedPlanTrackIdsToSSRCs,U=Y(7627),D="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function O(ie){if(!(this instanceof O))return new O(ie);L.call(this),U.interceptEvent(this,"signalingstatechange");var te=new RTCPeerConnection(ie);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:te},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return J(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var X,le=this;te.addEventListener("signalingstatechange",function(){if(!le._rollingBack&&le.signalingState!==X){X=le.signalingState;var K=le.dispatchEvent.apply.bind(le.dispatchEvent,le,arguments);le._isClosed?setTimeout(K):K()}}),U.proxyProperties(RTCPeerConnection.prototype,this,te)}function P(ie,te,le){var X=te?"setLocalDescription":"setRemoteDescription";return ie._rollingBack=!0,ie._peerConnection[X](new W({type:"rollback"})).then(le).then(function(K){return ie._rollingBack=!1,K},function(K){throw ie._rollingBack=!1,K})}function x(ie,te,le){if(!ie._initiallyNegotiatedDtlsRole&&"offer"!==te.type){var X=te.sdp.match(/a=setup:([a-z]+)/);if(X){var z=X[1];ie._initiallyNegotiatedDtlsRole=le?{active:"passive",passive:"active"}[z]:z}}}function J(ie,te){return ie&&"answer"===ie.type&&te?new W({type:ie.type,sdp:ie.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+te)}):ie}ne(O,L),Object.defineProperty(O.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),D&&(O.prototype.addTrack=function(){var te=arguments[0],le=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return le.replaceTrack(te),le}),O.prototype.createAnswer=function(){var le,te=[].slice.call(arguments),X=this;return le=this._peerConnection.createAnswer().then(function(K){return x(X,K),J(K,X._initiallyNegotiatedDtlsRole)}),"function"==typeof te[0]?U.legacyPromise(le,te[0],te[1]):le},O.prototype.createOffer=function(){var X,te=[].slice.call(arguments),le=(te.length>1?te[2]:te[0])||{},z=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var K="have-local-offer"===this.signalingState;X=P(this,K,function(){return z.createOffer(le)})}else X=z._peerConnection.createOffer(le);return X=X.then(function(se){return new W({type:se.type,sdp:H(z._tracksToSSRCs,se.sdp)})}),te.length>1?U.legacyPromise(X,te[0],te[1]):X},O.prototype.setLocalDescription=function(){var X,te=[].slice.call(arguments),le=te[0];return le&&"answer"===le.type&&"have-local-offer"===this.signalingState&&(X=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),X?te.length>1?U.legacyPromise(X,te[1],te[2]):X:this._peerConnection.setLocalDescription.apply(this._peerConnection,te)},O.prototype.setRemoteDescription=function(){var X,te=[].slice.call(arguments),le=te[0],z=this;return le&&"have-remote-offer"===this.signalingState&&("answer"===le.type?X=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===le.type&&(X=P(this,!1,function(){return z._peerConnection.setRemoteDescription(le)}))),X||(X=this._peerConnection.setRemoteDescription(le)),X=X.then(function(){x(z,le,!0)}),te.length>1?U.legacyPromise(X,te[1],te[2]):X},O.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},U.delegateMethods(RTCPeerConnection.prototype,O.prototype,"_peerConnection"),Ce.exports=O},7061:(Ce,Oe,Y)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,Y(7627).guessBrowser)()){case"chrome":Ce.exports=Y(5431);break;case"firefox":Ce.exports=Y(7111);break;case"safari":Ce.exports=Y(7548);break;default:Ce.exports=RTCPeerConnection}else Ce.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(Ce,Oe,Y)=>{"use strict";var L=Y(7590),W=Y(1905),ne=Y(3688),H=Y(3236),U=Y(7627),D="unified"===H.getSdpFormat(),O=D?H.updateUnifiedPlanTrackIdsToSSRCs:H.updatePlanBTrackIdsToSSRCs;function P(le){if(!(this instanceof P))return new P(le);L.call(this),U.interceptEvent(this,"datachannel"),U.interceptEvent(this,"iceconnectionstatechange"),U.interceptEvent(this,"signalingstatechange"),U.interceptEvent(this,"track");var X=new RTCPeerConnection(le);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:X},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new ne},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var z=this;X.addEventListener("datachannel",function(se){te(se.channel),z.dispatchEvent(se)}),X.addEventListener("iceconnectionstatechange",function(){z._isClosed||z.dispatchEvent.apply(z,arguments)}),X.addEventListener("signalingstatechange",function(){z._isClosed||("stable"===X.signalingState&&(z._appliedTracksToSSRCs=new Map(z._tracksToSSRCs)),!z._pendingLocalOffer&&!z._pendingRemoteOffer&&z.dispatchEvent.apply(z,arguments))}),X.addEventListener("track",function(se){z._pendingRemoteOffer=null,z.dispatchEvent(se)}),U.proxyProperties(RTCPeerConnection.prototype,this,X)}function x(le,X,z){var ve=X?le._pendingLocalOffer:le._pendingRemoteOffer,pe=X?"have-local-offer":"have-remote-offer",be=X?"setLocalDescription":"setRemoteDescription";if(!X&&(X?le._pendingRemoteOffer:le._pendingLocalOffer)&&"answer"===z.type)return function J(le,X){return le._peerConnection.setLocalDescription(le._pendingLocalOffer).then(function(){return le._pendingLocalOffer=null,le.setRemoteDescription(X)}).then(function(){le._signalingStateLatch.lower()})}(le,z);if("offer"===z.type){if(le.signalingState!==pe&&"stable"!==le.signalingState)return Promise.reject(new Error("Cannot set "+(X?"local":"remote")+" offer in state "+le.signalingState));!ve&&"low"===le._signalingStateLatch.state&&le._signalingStateLatch.raise();var ye=le.signalingState;return function K(ge){X?le._pendingLocalOffer=ge:le._pendingRemoteOffer=ge}(z),le.signalingState!==ye?Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===z.type?le.signalingState!==pe?Promise.reject(new Error("Cannot rollback "+(X?"local":"remote")+" description in "+le.signalingState)):(function se(){X?le._pendingLocalOffer=null:le._pendingRemoteOffer=null}(),le._rolledBackTracksToSSRCs=new Map(le._tracksToSSRCs),le._tracksToSSRCs=new Map(le._appliedTracksToSSRCs),Promise.resolve().then(function(){le.dispatchEvent(new Event("signalingstatechange"))})):le._peerConnection[be](z)}function ie(le,X){return!!le.getTransceivers().find(function(z){return z.receiver&&z.receiver.track&&z.receiver.track.kind===X})}function te(le){return Object.defineProperties(le,{maxPacketLifeTime:{value:65535===le.maxPacketLifeTime?null:le.maxPacketLifeTime},maxRetransmits:{value:65535===le.maxRetransmits?null:le.maxRetransmits}})}W(P,L),P.prototype.addIceCandidate=function(X){var z=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return z._peerConnection.addIceCandidate(X)}):this._peerConnection.addIceCandidate(X)},P.prototype.createOffer=function(X){X=Object.assign({},X);var z=this;if(X.offerToReceiveVideo&&!this._audioTransceiver&&(!D||!ie(this,"audio"))){delete X.offerToReceiveAudio;try{this._audioTransceiver=D?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(K){return Promise.reject(K)}}if(X.offerToReceiveVideo&&!this._videoTransceiver&&(!D||!ie(this,"video"))){delete X.offerToReceiveVideo;try{this._videoTransceiver=D?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(K){return Promise.reject(K)}}return this._peerConnection.createOffer(X).then(function(K){return z._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:K.type,sdp:O(z._tracksToSSRCs,K.sdp)})})},P.prototype.createAnswer=function(X){var z=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return z._signalingStateLatch.lower(),z._peerConnection.createAnswer()}).then(function(se){return z._pendingRemoteOffer=null,z._rolledBackTracksToSSRCs.clear(),D?new RTCSessionDescription({type:se.type,sdp:O(z._tracksToSSRCs,se.sdp)}):se},function(se){throw z._pendingRemoteOffer=null,se}):this._peerConnection.createAnswer(X).then(function(se){return z._rolledBackTracksToSSRCs.clear(),D?new RTCSessionDescription({type:se.type,sdp:O(z._tracksToSSRCs,se.sdp)}):se})},P.prototype.createDataChannel=function(X,z){var K=this._peerConnection.createDataChannel(X,z);return te(K),K},P.prototype.removeTrack=function(X){X.replaceTrack(null),this._peerConnection.removeTrack(X)},P.prototype.setLocalDescription=function(X){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),x(this,!0,X)},P.prototype.setRemoteDescription=function(X){return this._rolledBackTracksToSSRCs.clear(),x(this,!1,X)},P.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var X=this;setTimeout(function(){X.dispatchEvent(new Event("iceconnectionstatechange")),X.dispatchEvent(new Event("signalingstatechange"))})}},U.delegateMethods(RTCPeerConnection.prototype,P.prototype,"_peerConnection"),Ce.exports=P},7121:Ce=>{"use strict";Ce.exports=function Oe(Y){Object.defineProperties(this,{track:{enumerable:!0,value:Y,writable:!0}})}},4326:Ce=>{"use strict";Ce.exports=function Oe(Y){if(!(this instanceof Oe))return new Oe(Y);var L=Y&&"rollback"===Y.type?null:new RTCSessionDescription(Y);Object.defineProperties(this,{_description:{get:function(){return L}},sdp:{enumerable:!0,value:L?L.sdp:Y.sdp},type:{enumerable:!0,value:L?L.type:Y.type}})}},3657:Ce=>{"use strict";Ce.exports=RTCSessionDescription},5481:(Ce,Oe,Y)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,Y(7627).guessBrowser)()){case"chrome":Ce.exports=Y(4326);break;case"firefox":Ce.exports=Y(3657);break;default:Ce.exports=RTCSessionDescription}else Ce.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(Ce,Oe,Y)=>{"use strict";var L=Y(9069).EventEmitter;function W(){Object.defineProperties(this,{_eventEmitter:{value:new L}})}W.prototype.dispatchEvent=function(H){return this._eventEmitter.emit(H.type,H)},W.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},W.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},Ce.exports=W},7627:(Ce,Oe)=>{"use strict";function L(z,K,se,ve){if(!(ve in K)&&!ve.match(/^on[a-z]+$/)){var De=!1;try{var pe=Object.getOwnPropertyDescriptor(z,ve);De=pe&&!!pe.get}catch{}if(!De){var be;try{be=typeof z[ve]}catch{}"function"===be&&(K[ve]=function(){return this[se][ve].apply(this[se],arguments)})}}}function U(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function D(z){return typeof z>"u"&&(z=U()),/Chrome|CriOS/.test(z)?"chrome":/Firefox|FxiOS/.test(z)?"firefox":/Safari|iPhone|iPad|iPod/.test(z)?"safari":null}Oe.defer=function Y(){var z={};return z.promise=new Promise(function(K,se){z.resolve=K,z.reject=se}),z},Oe.delegateMethods=function W(z,K,se){for(var ve in z)L(z,K,se,ve)},Oe.difference=function ne(z,K){z=Array.isArray(z)?new Set(z):new Set(z.values()),K=Array.isArray(K)?new Set(K):new Set(K.values());var se=new Set;return z.forEach(function(ve){K.has(ve)||se.add(ve)}),se},Oe.flatMap=function H(z,K){return(z instanceof Map||z instanceof Set?Array.from(z.values()):z).reduce(function(ve,De){var pe=K(De);return ve.concat(pe)},[])},Oe.guessBrowser=D,Oe.guessBrowserVersion=function O(z){typeof z>"u"&&(z=U());var K={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[D(z)];if(!K)return null;var se=new RegExp("("+K+")/([^\\s]+)"),ve=(z.match(se)||[])[2];if(!ve)return null;var De=ve.split(".").map(Number);return{major:isNaN(De[0])?null:De[0],minor:isNaN(De[1])?null:De[1]}},Oe.isIOSChrome=function P(z){return typeof z>"u"&&(z=U()),/Mobi/.test(z)&&"chrome"===D()&&/iPad|iPhone|iPod/.test(z)},Oe.interceptEvent=function x(z,K){var se=null;Object.defineProperty(z,"on"+K,{get:function(){return se},set:function(ve){se&&this.removeEventListener(K,se),"function"==typeof ve?this.addEventListener(K,se=ve):se=null}})},Oe.legacyPromise=function J(z,K,se){return K?z.then(function(ve){K(ve)},function(ve){se(ve)}):z},Oe.makeUUID=function ie(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var K=16*Math.random()|0;return("x"===z?K:3&K|8).toString(16)})},Oe.proxyProperties=function te(z,K,se){Object.getOwnPropertyNames(z).forEach(function(ve){!function le(z,K,se,ve){if(!(ve in K)){if(ve.match(/^on[a-z]+$/))return Object.defineProperty(K,ve,{value:null,writable:!0}),void se.addEventListener(ve.slice(2),function(){K.dispatchEvent.apply(K,arguments)});Object.defineProperty(K,ve,{enumerable:!0,get:function(){return se[ve]}})}}(0,K,se,ve)})},Oe.support=function X(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(Ce,Oe,Y)=>{"use strict";var L=Y(7627).defer,W={high:new Set(["low"]),low:new Set(["high"])};function ne(U){if(!(this instanceof ne))return new ne(U);var D=U||"low";Object.defineProperties(this,{_state:{set:function(O){if(D!==O){var P=this._whenDeferreds.get(D=O);P.forEach(function(x){x.resolve(this)},this),P.clear()}},get:function(){return D}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function H(U,D){return new Error('Cannot transition from "'+U+'" to "'+D+'"')}ne.prototype.lower=function(){return this.transition("low")},ne.prototype.raise=function(){return this.transition("high")},ne.prototype.transition=function(D){if(!W[this.state].has(D))throw H(this.state,D);return this._state=D,this},ne.prototype.when=function(D){if(this.state===D)return Promise.resolve(this);if(!W[this.state].has(D))return Promise.reject(H(this.state,D));var O=L();return this._whenDeferreds.get(D).add(O),O.promise},Ce.exports=ne},3236:(Ce,Oe,Y)=>{"use strict";var L=Y(7627).flatMap,W=Y(7627).guessBrowser,ne=null,U=null;function O(re){return re&&function H(){if("boolean"==typeof ne)return ne;if(typeof RTCPeerConnection>"u")return ne=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),ne=!1}catch{ne=!0}return ne}()?{"plan-b":"planb","unified-plan":"unified"}[re]:function D(){if(!U)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),U="unified"}catch{U="planb"}else U="planb";return U}()}function J(re,de){return(de.match(new RegExp(re,"gm"))||[]).reduce(function(Fe,xe){var Ve=xe.match(new RegExp(re));return Ve?Fe.add(Ve[1]):Fe},new Set)}function ie(re,de){return J(re,de)}function te(re){return ie("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",re)}function le(re){return ie("^a=msid:.+ +(.+) *$",re)}function X(re,de){return J("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+de+" *$",re)}function z(re,de,Te){return de=de||".*",Te=Te||".*",re.split("\r\nm=").slice(1).map(function(Fe){return"m="+Fe}).filter(function(Fe){var xe=new RegExp("m="+de,"gm"),Ve=new RegExp("a="+Te,"gm");return xe.test(Fe)&&Ve.test(Fe)})}function K(re){return Array.from(J("^a=ssrc:([0-9]+) +.*$",re))}function se(re,de){var Te=z(re),Fe=new RegExp("^a=msid:[^ ]+ +"+de+" *$","gm"),xe=Te.filter(function(Ve){return Ve.match(Fe)});return new Set(L(xe,K))}function ve(re,de,Te){return new Map(Array.from(re(Te)).map(function(Fe){return[Fe,de(Te,Fe)]}))}function De(re){return ve(te,X,re)}function pe(re){return ve(le,se,re)}function be(re,de,Te){var Fe=re(Te),xe=new Map;Fe.forEach(function(Ze,je){if(de.has(je)){var xt=Array.from(de.get(je)),Wt=Array.from(Ze);xt.forEach(function(ht,qe){var Ue=Wt[qe];xe.set(Ue,ht);var we="a=ssrc:"+ht+" $1";Te=Te.replace(new RegExp("^a=ssrc:"+Ue+" (.*)$","gm"),we)})}else de.set(je,Ze)});var Ve="^(a=ssrc-group:[^ ]+ +)(.*)$";return(Te.match(new RegExp(Ve,"gm"))||[]).forEach(function(Ze){var je=Ze.match(new RegExp(Ve));if(je){var xt=je[1],ht=je[2].split(" ").map(function(qe){return xe.get(qe)||qe}).join(" ");Te=Te.replace(je[0],xt+ht)}}),Te}Oe.getSdpFormat=function x(re){return{chrome:O(re),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[W()]||null},Oe.getMediaSections=z,Oe.getPlanBTrackIds=te,Oe.getUnifiedPlanTrackIds=le,Oe.getPlanBSSRCs=X,Oe.getUnifiedPlanSSRCs=se,Oe.updatePlanBTrackIdsToSSRCs=function ye(re,de){return be(De,re,de)},Oe.updateUnifiedPlanTrackIdsToSSRCs=function ge(re,de){return be(pe,re,de)}},3332:Ce=>{Ce.exports=WebSocket},7156:Ce=>{function Oe(L,W,ne,H,U,D,O){try{var P=L[D](O),x=P.value}catch(J){return void ne(J)}P.done?W(x):Promise.resolve(x).then(H,U)}Ce.exports=function Y(L){return function(){var W=this,ne=arguments;return new Promise(function(H,U){var D=L.apply(W,ne);function O(x){Oe(D,H,U,O,P,"next",x)}function P(x){Oe(D,H,U,O,P,"throw",x)}O(void 0)})}},Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},1730:Ce=>{"use strict";Ce.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},Ce=>{Ce(Ce.s=9358)}]);