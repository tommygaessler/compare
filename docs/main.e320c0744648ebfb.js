(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{9358:(Re,Pe,$)=>{"use strict";function V(r){return"function"==typeof r}function Y(r){const e=r(a=>{Error.call(a),a.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const se=Y(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((a,d)=>`${d+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function z(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class H{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const m of e)m.remove(this);else e.remove(this);const{initialTeardown:a}=this;if(V(a))try{a()}catch(m){t=m instanceof se?m.errors:[m]}const{_teardowns:d}=this;if(d){this._teardowns=null;for(const m of d)try{L(m)}catch(b){t=t??[],b instanceof se?t=[...t,...b.errors]:t.push(b)}}if(t)throw new se(t)}}add(t){var e;if(t&&t!==this)if(this.closed)L(t);else{if(t instanceof H){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&z(e,t)}remove(t){const{_teardowns:e}=this;e&&z(e,t),t instanceof H&&t._removeParent(this)}}H.EMPTY=(()=>{const r=new H;return r.closed=!0,r})();const N=H.EMPTY;function k(r){return r instanceof H||r&&"closed"in r&&V(r.remove)&&V(r.add)&&V(r.unsubscribe)}function L(r){V(r)?r():r.unsubscribe()}const U={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ee={setTimeout(...r){const{delegate:t}=ee;return(t?.setTimeout||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=ee;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function ae(r){ee.setTimeout(()=>{const{onUnhandledError:t}=U;if(!t)throw r;t(r)})}function de(){}const he=q("C",void 0,void 0);function q(r,t,e){return{kind:r,value:t,error:e}}let ce=null;function Ee(r){if(U.useDeprecatedSynchronousErrorHandling){const t=!ce;if(t&&(ce={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:a}=ce;if(ce=null,e)throw a}}else r()}class fe extends H{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,k(t)&&t.add(this)):this.destination=pe}static create(t,e,a){return new we(t,e,a)}next(t){this.isStopped?ue(function J(r){return q("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ue(function te(r){return q("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ue(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class we extends fe{constructor(t,e,a){let d;if(super(),V(t))d=t;else if(t){let m;({next:d,error:e,complete:a}=t),this&&U.useDeprecatedNextContext?(m=Object.create(t),m.unsubscribe=()=>this.unsubscribe()):m=t,d=d?.bind(m),e=e?.bind(m),a=a?.bind(m)}this.destination={next:d?Se(d):de,error:Se(e??ge),complete:a?Se(a):de}}}function Se(r,t){return(...e)=>{try{r(...e)}catch(a){U.useDeprecatedSynchronousErrorHandling?function Oe(r){U.useDeprecatedSynchronousErrorHandling&&ce&&(ce.errorThrown=!0,ce.error=r)}(a):ae(a)}}}function ge(r){throw r}function ue(r,t){const{onStoppedNotification:e}=U;e&&ee.setTimeout(()=>e(r,t))}const pe={closed:!0,next:de,error:ge,complete:de},Ie="function"==typeof Symbol&&Symbol.observable||"@@observable";function je(r){return r}let $e=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const a=new r;return a.source=this,a.operator=e,a}subscribe(e,a,d){const m=function Qt(r){return r&&r instanceof fe||function Me(r){return r&&V(r.next)&&V(r.error)&&V(r.complete)}(r)&&k(r)}(e)?e:new we(e,a,d);return Ee(()=>{const{operator:b,source:T}=this;m.add(b?b.call(m,T):T?this._subscribe(m):this._trySubscribe(m))}),m}_trySubscribe(e){try{return this._subscribe(e)}catch(a){e.error(a)}}forEach(e,a){return new(a=Xe(a))((d,m)=>{let b;b=this.subscribe(T=>{try{e(T)}catch(M){m(M),b?.unsubscribe()}},m,d)})}_subscribe(e){var a;return null===(a=this.source)||void 0===a?void 0:a.subscribe(e)}[Ie](){return this}pipe(...e){return function Qe(r){return 0===r.length?je:1===r.length?r[0]:function(e){return r.reduce((a,d)=>d(a),e)}}(e)(this)}toPromise(e){return new(e=Xe(e))((a,d)=>{let m;this.subscribe(b=>m=b,b=>d(b),()=>a(m))})}}return r.create=t=>new r(t),r})();function Xe(r){var t;return null!==(t=r??U.Promise)&&void 0!==t?t:Promise}const Wt=Y(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let St=(()=>{class r extends $e{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const a=new Ke(this,this);return a.operator=e,a}_throwIfClosed(){if(this.closed)throw new Wt}next(e){Ee(()=>{if(this._throwIfClosed(),!this.isStopped){const a=this.observers.slice();for(const d of a)d.next(e)}})}error(e){Ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:a}=this;for(;a.length;)a.shift().error(e)}})}complete(){Ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:a,isStopped:d,observers:m}=this;return a||d?N:(m.push(e),new H(()=>z(m,e)))}_checkFinalizedStatuses(e){const{hasError:a,thrownError:d,isStopped:m}=this;a?e.error(d):m&&e.complete()}asObservable(){const e=new $e;return e.source=this,e}}return r.create=(t,e)=>new Ke(t,e),r})();class Ke extends St{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,a;null===(a=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===a||a.call(e,t)}error(t){var e,a;null===(a=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===a||a.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,a;return null!==(a=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==a?a:N}}function We(r){return t=>{if(function Fe(r){return V(r?.lift)}(t))return t.lift(function(e){try{return r(e,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}class De extends fe{constructor(t,e,a,d,m){super(t),this.onFinalize=m,this._next=e?function(b){try{e(b)}catch(T){t.error(T)}}:super._next,this._error=d?function(b){try{d(b)}catch(T){t.error(T)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function et(r,t){return We((e,a)=>{let d=0;e.subscribe(new De(a,m=>{a.next(r.call(t,m,d++))}))})}function Ht(r){return this instanceof Ht?(this.v=r,this):new Ht(r)}function sn(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,a=e.apply(r,t||[]),m=[];return d={},b("next"),b("throw"),b("return"),d[Symbol.asyncIterator]=function(){return this},d;function b(Ue){a[Ue]&&(d[Ue]=function(Ge){return new Promise(function(st,Rt){m.push([Ue,Ge,st,Rt])>1||T(Ue,Ge)})})}function T(Ue,Ge){try{!function M(Ue){Ue.value instanceof Ht?Promise.resolve(Ue.value.v).then(j,re):_e(m[0][2],Ue)}(a[Ue](Ge))}catch(st){_e(m[0][3],st)}}function j(Ue){T("next",Ue)}function re(Ue){T("throw",Ue)}function _e(Ue,Ge){Ue(Ge),m.shift(),m.length&&T(m[0][0],m[0][1])}}function xe(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function Bi(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],a=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e);function a(m){e[m]=r[m]&&function(b){return new Promise(function(T,M){!function d(m,b,T,M){Promise.resolve(M).then(function(j){m({value:j,done:T})},b)}(T,M,(b=r[m](b)).done,b.value)})}}}const To=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function xs(r){return V(r?.then)}function Ro(r){return V(r[Ie])}function fl(r){return Symbol.asyncIterator&&V(r?.[Symbol.asyncIterator])}function jn(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Je=function pn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pt(r){return V(r?.[Je])}function gt(r){return sn(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:a,done:d}=yield Ht(e.read());if(d)return yield Ht(void 0);yield yield Ht(a)}}finally{e.releaseLock()}})}function an(r){return V(r?.getReader)}function gn(r){if(r instanceof $e)return r;if(null!=r){if(Ro(r))return function di(r){return new $e(t=>{const e=r[Ie]();if(V(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(To(r))return function Oo(r){return new $e(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(xs(r))return function Es(r){return new $e(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ae)})}(r);if(fl(r))return Ao(r);if(pt(r))return function js(r){return new $e(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(an(r))return function lo(r){return Ao(gt(r))}(r)}throw jn(r)}function Ao(r){return new $e(t=>{(function Tr(r,t){var e,a,d,m;return function xr(r,t,e,a){return new(e||(e=Promise))(function(m,b){function T(re){try{j(a.next(re))}catch(_e){b(_e)}}function M(re){try{j(a.throw(re))}catch(_e){b(_e)}}function j(re){re.done?m(re.value):function d(m){return m instanceof e?m:new e(function(b){b(m)})}(re.value).then(T,M)}j((a=a.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=xe(r);!(a=yield e.next()).done;)if(t.next(a.value),t.closed)return}catch(b){d={error:b}}finally{try{a&&!a.done&&(m=e.return)&&(yield m.call(e))}finally{if(d)throw d.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function Dn(r,t,e,a=0,d=!1){const m=t.schedule(function(){e(),d?r.add(this.schedule(null,a)):this.unsubscribe()},a);if(r.add(m),!d)return m}function Lu(r,t,e=1/0){return V(t)?Lu((a,d)=>et((m,b)=>t(a,m,d,b))(gn(r(a,d))),e):("number"==typeof t&&(e=t),We((a,d)=>function ru(r,t,e,a,d,m,b,T){const M=[];let j=0,re=0,_e=!1;const Ue=()=>{_e&&!M.length&&!j&&t.complete()},Ge=Rt=>j<a?st(Rt):M.push(Rt),st=Rt=>{m&&t.next(Rt),j++;let nn=!1;gn(e(Rt,re++)).subscribe(new De(t,cn=>{d?.(cn),m?Ge(cn):t.next(cn)},()=>{nn=!0},void 0,()=>{if(nn)try{for(j--;M.length&&j<a;){const cn=M.shift();b?Dn(t,b,()=>st(cn)):st(cn)}Ue()}catch(cn){t.error(cn)}}))};return r.subscribe(new De(t,Ge,()=>{_e=!0,Ue()})),()=>{T?.()}}(a,d,r,e)))}function Xl(r=1/0){return Lu(je,r)}const zn=new $e(r=>r.complete());function z1(r){return r&&V(r.schedule)}function Y1(r){return r[r.length-1]}function Uy(r){return V(Y1(r))?r.pop():void 0}function pg(r){return z1(Y1(r))?r.pop():void 0}function Ya(r,t=0){return We((e,a)=>{e.subscribe(new De(a,d=>Dn(a,r,()=>a.next(d),t),()=>Dn(a,r,()=>a.complete(),t),d=>Dn(a,r,()=>a.error(d),t)))})}function q1(r,t=0){return We((e,a)=>{a.add(r.schedule(()=>e.subscribe(a),t))})}function bs(r,t){if(!r)throw new Error("Iterable cannot be null");return new $e(e=>{Dn(e,t,()=>{const a=r[Symbol.asyncIterator]();Dn(e,t,()=>{a.next().then(d=>{d.done?e.complete():e.next(d.value)})},0,!0)})})}function gg(r,t){return t?function En(r,t){if(null!=r){if(Ro(r))return function Np(r,t){return gn(r).pipe(q1(t),Ya(t))}(r,t);if(To(r))return function fg(r,t){return new $e(e=>{let a=0;return t.schedule(function(){a===r.length?e.complete():(e.next(r[a++]),e.closed||this.schedule())})})}(r,t);if(xs(r))return function gS(r,t){return gn(r).pipe(q1(t),Ya(t))}(r,t);if(fl(r))return bs(r,t);if(pt(r))return function Vk(r,t){return new $e(e=>{let a;return Dn(e,t,()=>{a=r[Je](),Dn(e,t,()=>{let d,m;try{({value:d,done:m}=a.next())}catch(b){return void e.error(b)}m?e.complete():e.next(d)},0,!0)}),()=>V(a?.return)&&a.return()})}(r,t);if(an(r))return function mg(r,t){return bs(gt(r),t)}(r,t)}throw jn(r)}(r,t):gn(r)}function No(...r){const t=pg(r),e=function ov(r,t){return"number"==typeof Y1(r)?r.pop():t}(r,1/0),a=r;return a.length?1===a.length?gn(a[0]):Xl(e)(gg(a,t)):zn}function ml(r){return r<=0?()=>zn:We((t,e)=>{let a=0;t.subscribe(new De(e,d=>{++a<=r&&(e.next(d),r<=a&&e.complete())}))})}function Zl(r={}){const{connector:t=(()=>new St),resetOnError:e=!0,resetOnComplete:a=!0,resetOnRefCountZero:d=!0}=r;return m=>{let b=null,T=null,M=null,j=0,re=!1,_e=!1;const Ue=()=>{T?.unsubscribe(),T=null},Ge=()=>{Ue(),b=M=null,re=_e=!1},st=()=>{const Rt=b;Ge(),Rt?.unsubscribe()};return We((Rt,nn)=>{j++,!_e&&!re&&Ue();const cn=M=M??t();nn.add(()=>{j--,0===j&&!_e&&!re&&(T=_S(st,d))}),cn.subscribe(nn),b||(b=new we({next:Mn=>cn.next(Mn),error:Mn=>{_e=!0,Ue(),T=_S(Ge,e,Mn),cn.error(Mn)},complete:()=>{re=!0,Ue(),T=_S(Ge,a),cn.complete()}}),gg(Rt).subscribe(b))})(m)}}function _S(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(ml(1)).subscribe(()=>r())}function Wo(r){for(let t in r)if(r[t]===Wo)return t;throw Error("Could not find renamed property on target object.")}function _c(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function Ko(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ko).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function vS(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const $t=Wo({__forward_ref__:Wo});function Zo(r){return r.__forward_ref__=Zo,r.toString=function(){return Ko(this())},r}function Or(r){return kn(r)?r():r}function kn(r){return"function"==typeof r&&r.hasOwnProperty($t)&&r.__forward_ref__===Zo}function em(r){return r&&!!r.\u0275providers}const Vy="https://g.co/ng/security#xss";class vn extends Error{constructor(t,e){super(function wa(r,t){return`NG0${Math.abs(r)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function si(r){return"string"==typeof r?r:null==r?"":String(r)}function jy(r,t){throw new vn(-201,!1)}function zo(r,t){null==r&&function io(r,t,e,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${e} ${a} ${t} <=Actual]`))}(t,r,null,"!=")}function fr(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Pi(r){return{providers:r.providers||[],imports:r.imports||[]}}function yS(r){return Mh(r,oo)||Mh(r,Qy)}function Mh(r,t){return r.hasOwnProperty(t)?r[t]:null}function Wk(r){return r&&(r.hasOwnProperty(J1)||r.hasOwnProperty(Hy))?r[J1]:null}const oo=Wo({\u0275prov:Wo}),J1=Wo({\u0275inj:Wo}),Qy=Wo({ngInjectableDef:Wo}),Hy=Wo({ngInjectorDef:Wo});var Xr=(()=>((Xr=Xr||{})[Xr.Default=0]="Default",Xr[Xr.Host=1]="Host",Xr[Xr.Self=2]="Self",Xr[Xr.SkipSelf=4]="SkipSelf",Xr[Xr.Optional=8]="Optional",Xr))();let Fd;function td(r){const t=Fd;return Fd=r,t}function ir(r,t,e){const a=yS(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:e&Xr.Optional?null:void 0!==t?t:void jy(Ko(r))}const es=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Un={},X1="__NG_DI_FLAG__",Gy="ngTempTokenPath",Zr=/\n/gm,Wy="__source";let _g;function sv(r){const t=_g;return _g=r,t}function bS(r,t=Xr.Default){if(void 0===_g)throw new vn(-203,!1);return null===_g?ir(r,void 0,t):_g.get(r,t&Xr.Optional?null:void 0,t)}function rn(r,t=Xr.Default){return(function wL(){return Fd}()||bS)(Or(r),t)}function ma(r,t=Xr.Default){return rn(r,Ud(t))}function Ud(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function SS(r){const t=[];for(let e=0;e<r.length;e++){const a=Or(r[e]);if(Array.isArray(a)){if(0===a.length)throw new vn(900,!1);let d,m=Xr.Default;for(let b=0;b<a.length;b++){const T=a[b],M=vg(T);"number"==typeof M?-1===M?d=T.token:m|=M:d=T}t.push(rn(d,m))}else t.push(rn(a))}return t}function Vd(r,t){return r[X1]=t,r.prototype[X1]=t,r}function vg(r){return r[X1]}function gl(r){return{toString:r}.toString()}var vc=(()=>((vc=vc||{})[vc.OnPush=0]="OnPush",vc[vc.Default=1]="Default",vc))(),qa=(()=>{return(r=qa||(qa={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",qa;var r})();const nd={},po=[],Ky=Wo({\u0275cmp:Wo}),Z1=Wo({\u0275dir:Wo}),CS=Wo({\u0275pipe:Wo}),Yk=Wo({\u0275mod:Wo}),Mp=Wo({\u0275fac:Wo}),zy=Wo({__NG_ELEMENT_ID__:Wo});let RL=0;function Ta(r){return gl(()=>{const e=!0===r.standalone,a={},d={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===vc.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||po,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||qa.Emulated,id:"c"+RL++,styles:r.styles||po,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=r.dependencies,b=r.features;return d.inputs=eT(r.inputs,a),d.outputs=eT(r.outputs),b&&b.forEach(T=>T(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(tm).filter(Yy):null,d.pipeDefs=m?()=>("function"==typeof m?m():m).map(ou).filter(Yy):null,d})}function tm(r){return so(r)||fo(r)}function Yy(r){return null!==r}function Ni(r){return gl(()=>({type:r.type,bootstrap:r.bootstrap||po,declarations:r.declarations||po,imports:r.imports||po,exports:r.exports||po,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function eT(r,t){if(null==r)return nd;const e={};for(const a in r)if(r.hasOwnProperty(a)){let d=r[a],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),e[d]=a,t&&(t[d]=m)}return e}const pr=Ta;function Ja(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function so(r){return r[Ky]||null}function fo(r){return r[Z1]||null}function ou(r){return r[CS]||null}function Vu(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ls(r){return Array.isArray(r)&&!0===r[1]}function Zn(r){return 0!=(4&r.flags)}function Bp(r){return r.componentOffset>-1}function Hd(r){return 1==(1&r.flags)}function Bs(r){return null!==r.template}function Ei(r){return 0!=(256&r[2])}function Sg(r,t){return r.hasOwnProperty(Mp)?r[Mp]:null}class eE{constructor(t,e,a){this.previousValue=t,this.currentValue=e,this.firstChange=a}isFirstChange(){return this.firstChange}}function Al(){return tE}function tE(r){return r.type.prototype.ngOnChanges&&(r.setInput=DS),Cg}function Cg(){const r=Ig(this),t=r?.current;if(t){const e=r.previous;if(e===nd)r.previous=t;else for(let a in t)e[a]=t[a];r.current=null,this.ngOnChanges(t)}}function DS(r,t,e,a){const d=this.declaredInputs[e],m=Ig(r)||function kL(r,t){return r[t2]=t}(r,{previous:nd,current:null}),b=m.current||(m.current={}),T=m.previous,M=T[d];b[d]=new eE(M&&M.currentValue,t,T===nd),r[a]=t}Al.ngInherit=!0;const t2="__ngSimpleChanges__";function Ig(r){return r[t2]||null}function Da(r){for(;Array.isArray(r);)r=r[0];return r}function PS(r,t){return Da(t[r])}function yc(r,t){return Da(t[r.index])}function NS(r,t){return r.data[t]}function im(r,t){return r[t]}function $a(r,t){const e=t[r];return Vu(e)?e:e[0]}function Bh(r){return 64==(64&r[2])}function Up(r,t){return null==t?null:r[t]}function rE(r){r[18]=0}function MS(r,t){r[5]+=t;let e=r,a=r[3];for(;null!==a&&(1===t&&1===e[5]||-1===t&&0===e[5]);)a[5]+=t,e=a,a=a[3]}const ai={lFrame:Vp(null),bindingsEnabled:!0};function hv(){return ai.bindingsEnabled}function yn(){return ai.lFrame.lView}function Hi(){return ai.lFrame.tView}function Ec(r){return ai.lFrame.contextLView=r,r[8]}function bc(r){return ai.lFrame.contextLView=null,r}function Xa(){let r=iE();for(;null!==r&&64===r.type;)r=r.parent;return r}function iE(){return ai.lFrame.currentTNode}function Wd(r,t){const e=ai.lFrame;e.currentTNode=r,e.isParent=t}function Zs(){return ai.lFrame.isParent}function oE(){ai.lFrame.isParent=!1}function sm(){return ai.lFrame.bindingIndex++}function Dr(r){const t=ai.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function l2(r,t){const e=ai.lFrame;e.bindingIndex=e.bindingRootIndex=r,cE(t)}function cE(r){ai.lFrame.currentDirectiveIndex=r}function LS(r){const t=ai.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function Tg(){return ai.lFrame.currentQueryIndex}function od(r){ai.lFrame.currentQueryIndex=r}function BS(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Kd(r,t,e){if(e&Xr.SkipSelf){let d=t,m=r;for(;!(d=d.parent,null!==d||e&Xr.Host||(d=BS(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;t=d,r=m}const a=ai.lFrame=FS();return a.currentTNode=t,a.lView=r,!0}function Fh(r){const t=FS(),e=r[1];ai.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function FS(){const r=ai.lFrame,t=null===r?null:r.child;return null===t?Vp(r):t}function Vp(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function zd(){const r=ai.lFrame;return ai.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const uE=zd;function pv(){const r=zd();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ts(){return ai.lFrame.selectedIndex}function Gi(r){ai.lFrame.selectedIndex=r}function Lo(){const r=ai.lFrame;return NS(r.tView,r.selectedIndex)}function Yd(){ai.lFrame.currentNamespace="svg"}function lT(){!function ju(){ai.lFrame.currentNamespace=null}()}function Do(r,t){for(let e=t.directiveStart,a=t.directiveEnd;e<a;e++){const m=r.data[e].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:M,ngAfterViewChecked:j,ngOnDestroy:re}=m;b&&(r.contentHooks||(r.contentHooks=[])).push(-e,b),T&&((r.contentHooks||(r.contentHooks=[])).push(e,T),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,T)),M&&(r.viewHooks||(r.viewHooks=[])).push(-e,M),j&&((r.viewHooks||(r.viewHooks=[])).push(e,j),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,j)),null!=re&&(r.destroyHooks||(r.destroyHooks=[])).push(e,re)}}function Sc(r,t,e){VS(r,t,3,e)}function jp(r,t,e,a){(3&r[2])===e&&VS(r,t,e,a)}function lE(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function VS(r,t,e,a){const m=a??-1,b=t.length-1;let T=0;for(let M=void 0!==a?65535&r[18]:0;M<b;M++)if("number"==typeof t[M+1]){if(T=t[M],null!=a&&T>=a)break}else t[M]<0&&(r[18]+=65536),(T<m||-1==m)&&(ko(r,e,t,M),r[18]=(4294901760&r[18])+M+2),M++}function ko(r,t,e,a){const d=e[a]<0,m=e[a+1],T=r[d?-e[a]:e[a]];if(d){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{m.call(T)}finally{}}}else try{m.call(T)}finally{}}class Wr{constructor(t,e,a){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=a}}function pT(r,t,e){let a=0;for(;a<e.length;){const d=e[a];if("number"==typeof d){if(0!==d)break;a++;const m=e[a++],b=e[a++],T=e[a++];r.setAttribute(t,b,T,m)}else{const m=d,b=e[++a];hE(m)?r.setProperty(t,m,b):r.setAttribute(t,m,b),a++}}return a}function yl(r){return 3===r||4===r||6===r}function hE(r){return 64===r.charCodeAt(0)}function mo(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let a=0;a<t.length;a++){const d=t[a];"number"==typeof d?e=d:0===e||h2(r,e,d,null,-1===e||2===e?t[++a]:null)}}return r}function h2(r,t,e,a,d){let m=0,b=r.length;if(-1===t)b=-1;else for(;m<r.length;){const T=r[m++];if("number"==typeof T){if(T===t){b=-1;break}if(T>t){b=m-1;break}}}for(;m<r.length;){const T=r[m];if("number"==typeof T)break;if(T===e){if(null===a)return void(null!==d&&(r[m+1]=d));if(a===r[m+1])return void(r[m+2]=d)}m++,null!==a&&m++,null!==d&&m++}-1!==b&&(r.splice(b,0,t),m=b+1),r.splice(m++,0,e),null!==a&&r.splice(m++,0,a),null!==d&&r.splice(m++,0,d)}function pE(r){return-1!==r}function fE(r){return 32767&r}function GS(r,t){let e=function p2(r){return r>>16}(r),a=t;for(;e>0;)a=a[15],e--;return a}let Qs=!0;function El(r){const t=Qs;return Qs=r,t}let fT=0;const ka={};function Ic(r,t){const e=um(r,t);if(-1!==e)return e;const a=t[1];a.firstCreatePass&&(r.injectorIndex=t.length,cm(a.data,r),cm(t,null),cm(a.blueprint,null));const d=Hs(r,t),m=r.injectorIndex;if(pE(d)){const b=fE(d),T=GS(d,t),M=T[1].data;for(let j=0;j<8;j++)t[m+j]=T[b+j]|M[b+j]}return t[m+8]=d,m}function cm(r,t){r.push(0,0,0,0,0,0,0,0,t)}function um(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Hs(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,a=null,d=t;for(;null!==d;){if(a=gT(d),null===a)return-1;if(e++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|e<<16}return-1}function Za(r,t,e){!function Og(r,t,e){let a;"string"==typeof e?a=e.charCodeAt(0)||0:e.hasOwnProperty(zy)&&(a=e[zy]),null==a&&(a=e[zy]=fT++);const d=255&a;t.data[r+(d>>5)]|=1<<d}(r,t,e)}function mE(r,t,e){if(e&Xr.Optional||void 0!==r)return r;jy()}function gE(r,t,e,a){if(e&Xr.Optional&&void 0===a&&(a=null),0==(e&(Xr.Self|Xr.Host))){const d=r[9],m=td(void 0);try{return d?d.get(t,a,e&Xr.Optional):ir(t,a,e&Xr.Optional)}finally{td(m)}}return mE(a,0,e)}function mT(r,t,e,a=Xr.Default,d){if(null!==r){if(1024&t[2]){const b=function vv(r,t,e,a,d){let m=r,b=t;for(;null!==m&&null!==b&&1024&b[2]&&!(256&b[2]);){const T=bl(m,b,e,a|Xr.Self,ka);if(T!==ka)return T;let M=m.parent;if(!M){const j=b[21];if(j){const re=j.get(e,ka,a);if(re!==ka)return re}M=gT(b),b=b[15]}m=M}return d}(r,t,e,a,ka);if(b!==ka)return b}const m=bl(r,t,e,a,ka);if(m!==ka)return m}return gE(t,e,a,d)}function bl(r,t,e,a,d){const m=function Vh(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(zy)?r[zy]:void 0;return"number"==typeof t?t>=0?255&t:_v:t}(e);if("function"==typeof m){if(!Kd(t,r,a))return a&Xr.Host?mE(d,0,a):gE(t,e,a,d);try{const b=m(a);if(null!=b||a&Xr.Optional)return b;jy()}finally{uE()}}else if("number"==typeof m){let b=null,T=um(r,t),M=-1,j=a&Xr.Host?t[16][6]:null;for((-1===T||a&Xr.SkipSelf)&&(M=-1===T?Hs(r,t):t[T+8],-1!==M&&f2(a,!1)?(b=t[1],T=fE(M),t=GS(M,t)):T=-1);-1!==T;){const re=t[1];if(_E(m,T,re.data)){const _e=ML(T,t,e,b,a,j);if(_e!==ka)return _e}M=t[T+8],-1!==M&&f2(a,t[1].data[T+8]===j)&&_E(m,T,t)?(b=re,T=fE(M),t=GS(M,t)):T=-1}}return d}function ML(r,t,e,a,d,m){const b=t[1],T=b.data[r+8],re=Uh(T,b,e,null==a?Bp(T)&&Qs:a!=b&&0!=(3&T.type),d&Xr.Host&&m===T);return null!==re?qd(t,b,re,T):ka}function Uh(r,t,e,a,d){const m=r.providerIndexes,b=t.data,T=1048575&m,M=r.directiveStart,re=m>>20,Ue=d?T+re:r.directiveEnd;for(let Ge=a?T:T+re;Ge<Ue;Ge++){const st=b[Ge];if(Ge<M&&e===st||Ge>=M&&st.type===e)return Ge}if(d){const Ge=b[M];if(Ge&&Bs(Ge)&&Ge.type===e)return M}return null}function qd(r,t,e,a){let d=r[e];const m=t.data;if(function mv(r){return r instanceof Wr}(d)){const b=d;b.resolving&&function AS(r,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new vn(-200,`Circular dependency in DI detected for ${r}${e}`)}(function ho(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():si(r)}(m[e]));const T=El(b.canSeeViewProviders);b.resolving=!0;const M=b.injectImpl?td(b.injectImpl):null;Kd(r,a,Xr.Default);try{d=r[e]=b.factory(void 0,m,r,a),t.firstCreatePass&&e>=a.directiveStart&&function US(r,t,e){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:m}=t.type.prototype;if(a){const b=tE(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,b),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,b)}d&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,d),m&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,m),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,m))}(e,m[e],t)}finally{null!==M&&td(M),El(T),b.resolving=!1,uE()}}return d}function _E(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function f2(r,t){return!(r&Xr.Self||r&Xr.Host&&t)}class jh{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,a){return mT(this._tNode,this._lView,t,Ud(a),e)}}function _v(){return new jh(Xa(),yn())}function Gs(r){return gl(()=>{const t=r.prototype.constructor,e=t[Mp]||Dg(t),a=Object.prototype;let d=Object.getPrototypeOf(r.prototype).constructor;for(;d&&d!==a;){const m=d[Mp]||Dg(d);if(m&&m!==e)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Dg(r){return kn(r)?()=>{const t=Dg(Or(r));return t&&t()}:Sg(r)}function gT(r){const t=r[1],e=t.type;return 2===e?t.declTNode:1===e?r[6]:null}function Qp(r){return function lm(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const a=e.length;let d=0;for(;d<a;){const m=e[d];if(yl(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<a&&"string"==typeof e[d];)d++;else{if(m===t)return e[d+1];d+=2}}}return null}(Xa(),r)}const Qh="__parameters__";function Gp(r,t,e){return gl(()=>{const a=function dm(r){return function(...e){if(r){const a=r(...e);for(const d in a)this[d]=a[d]}}}(t);function d(...m){if(this instanceof d)return a.apply(this,m),this;const b=new d(...m);return T.annotation=b,T;function T(M,j,re){const _e=M.hasOwnProperty(Qh)?M[Qh]:Object.defineProperty(M,Qh,{value:[]})[Qh];for(;_e.length<=re;)_e.push(null);return(_e[re]=_e[re]||[]).push(b),M}}return e&&(d.prototype=Object.create(e.prototype)),d.prototype.ngMetadataName=r,d.annotationCls=d,d})}class Hn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=fr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function su(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let a=r[e];Array.isArray(a)?(t===r&&(t=r.slice(0,e)),su(a,t)):t!==r&&t.push(a)}return t}function Wp(r,t){r.forEach(e=>Array.isArray(e)?Wp(e,t):t(e))}function kg(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Ev(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Kp(r,t){const e=[];for(let a=0;a<r;a++)e.push(t);return e}function au(r,t,e){let a=qp(r,t);return a>=0?r[1|a]=e:(a=~a,function ec(r,t,e,a){let d=r.length;if(d==t)r.push(e,a);else if(1===d)r.push(a,r[0]),r[0]=e;else{for(d--,r.push(r[d-1],r[d]);d>t;)r[d]=r[d-2],d--;r[t]=e,r[t+1]=a}}(r,a,t,e)),a}function yE(r,t){const e=qp(r,t);if(e>=0)return r[1|e]}function qp(r,t){return function _T(r,t,e){let a=0,d=r.length>>e;for(;d!==a;){const m=a+(d-a>>1),b=r[m<<e];if(t===b)return m<<e;b>t?d=m:a=m+1}return~(d<<e)}(r,t,1)}const Uc=Vd(Gp("Optional"),8),Iv=Vd(Gp("SkipSelf"),4);var uu=(()=>((uu=uu||{})[uu.Important=1]="Important",uu[uu.DashCase=2]="DashCase",uu))();const sC=new Map;let gm=0;const NE="__ngContext__";function na(r,t){Vu(t)?(r[NE]=t[20],function Fi(r){sC.set(r[20],r)}(t)):r[NE]=t}function Gh(r,t){return undefined(r,t)}function Pa(r){const t=r[3];return Ls(t)?t[3]:t}function Pn(r){return hC(r[13])}function Cl(r){return hC(r[4])}function hC(r){for(;null!==r&&!Ls(r);)r=r[4];return r}function Jd(r,t,e,a,d){if(null!=a){let m,b=!1;Ls(a)?m=a:Vu(a)&&(b=!0,a=a[0]);const T=Da(a);0===r&&null!==e?null==d?$d(t,e,T):_m(t,e,T,d||null,!0):1===r&&null!==e?_m(t,e,T,d||null,!0):2===r?function LE(r,t,e){const a=Xd(r,t);a&&function w2(r,t,e,a){r.removeChild(t,e,a)}(r,a,t,e)}(t,T,b):3===r&&t.destroyNode(T),null!=m&&function vC(r,t,e,a,d){const m=e[7];m!==Da(e)&&Jd(t,r,a,m,d);for(let T=10;T<e.length;T++){const M=e[T];xv(M[1],M,r,t,a,m)}}(t,r,m,e,d)}}function Il(r,t,e){return r.createElement(t,e)}function fC(r,t){const e=r[9],a=e.indexOf(t),d=t[3];512&t[2]&&(t[2]&=-513,MS(d,-1)),e.splice(a,1)}function Gu(r,t){if(r.length<=10)return;const e=10+t,a=r[e];if(a){const d=a[17];null!==d&&d!==r&&fC(d,a),t>0&&(r[e-1][4]=a[4]);const m=Ev(r,10+t);!function RT(r,t){xv(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(a[1],a);const b=m[19];null!==b&&b.detachView(m[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Kh(r,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&xv(r,t,e,3,null,null),function pC(r){let t=r[13];if(!t)return xE(r[1],r);for(;t;){let e=null;if(Vu(t))e=t[13];else{const a=t[10];a&&(e=a)}if(!e){for(;t&&!t[4]&&t!==r;)Vu(t)&&xE(t[1],t),t=t[3];null===t&&(t=r),Vu(t)&&xE(t[1],t),e=t&&t[4]}t=e}}(t)}}function xE(r,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function sd(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let a=0;a<e.length;a+=2){const d=t[e[a]];if(!(d instanceof Wr)){const m=e[a+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=d[m[b]],M=m[b+1];try{M.call(T)}finally{}}else try{m.call(d)}finally{}}}}(r,t),function mC(r,t){const e=r.cleanup,a=t[7];let d=-1;if(null!==e)for(let m=0;m<e.length-1;m+=2)if("string"==typeof e[m]){const b=e[m+3];b>=0?a[d=b]():a[d=-b].unsubscribe(),m+=2}else{const b=a[d=e[m+1]];e[m].call(b)}if(null!==a){for(let m=d+1;m<a.length;m++)(0,a[m])();t[7]=null}}(r,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Ls(t[3])){e!==t[3]&&fC(e,t);const a=t[19];null!==a&&a.detachView(r)}!function aC(r){sC.delete(r[20])}(t)}}function OT(r,t,e){return function kv(r,t,e){let a=t;for(;null!==a&&40&a.type;)a=(t=a).parent;if(null===a)return e[0];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:m}=r.data[a.directiveStart+d];if(m===qa.None||m===qa.Emulated)return null}return yc(a,e)}}(r,t.parent,e)}function _m(r,t,e,a,d){r.insertBefore(t,e,a,d)}function $d(r,t,e){r.appendChild(t,e)}function DT(r,t,e,a,d){null!==a?_m(r,t,e,a,d):$d(r,t,e)}function Xd(r,t){return r.parentNode(t)}function _t(r,t,e){return _i(r,t,e)}let FE,va,_i=function Pv(r,t,e){return 40&r.type?yc(r,e):null};function Bg(r,t,e,a){const d=OT(r,a,t),m=t[11],T=_t(a.parent||t[6],a,t);if(null!=d)if(Array.isArray(e))for(let M=0;M<e.length;M++)DT(m,d,e[M],T,!1);else DT(m,d,e,T,!1)}function Mv(r,t){if(null!==t){const e=t.type;if(3&e)return yc(t,r);if(4&e)return gC(-1,r[t.index]);if(8&e){const a=t.child;if(null!==a)return Mv(r,a);{const d=r[t.index];return Ls(d)?gC(-1,d):Da(d)}}if(32&e)return Gh(t,r)()||Da(r[t.index]);{const a=PT(r,t);return null!==a?Array.isArray(a)?a[0]:Mv(Pa(r[16]),a):Mv(r,t.next)}}return null}function PT(r,t){return null!==t?r[16][6].projection[t.projection]:null}function gC(r,t){const e=10+r+1;if(e<t.length){const a=t[e],d=a[1].firstChild;if(null!==d)return Mv(a,d)}return t[7]}function ad(r,t,e,a,d,m,b){for(;null!=e;){const T=a[e.index],M=e.type;if(b&&0===t&&(T&&na(Da(T),a),e.flags|=2),32!=(32&e.flags))if(8&M)ad(r,t,e.child,a,d,m,!1),Jd(t,r,d,T,m);else if(32&M){const j=Gh(e,a);let re;for(;re=j();)Jd(t,r,d,re,m);Jd(t,r,d,T,m)}else 16&M?BE(r,t,a,e,d,m):Jd(t,r,d,T,m);e=b?e.projectionNext:e.next}}function xv(r,t,e,a,d,m){ad(e,a,r.firstChild,t,d,m,!1)}function BE(r,t,e,a,d,m){const b=e[16],M=b[6].projection[a.projection];if(Array.isArray(M))for(let j=0;j<M.length;j++)Jd(t,r,d,M[j],m);else ad(r,t,M,b[3],d,m,!0)}function vm(r,t,e){""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function MT(r,t,e){const{mergedAttrs:a,classes:d,styles:m}=e;null!==a&&pT(r,t,a),null!==d&&vm(r,t,d),null!==m&&function NT(r,t,e){r.setAttribute(t,"style",e)}(r,t,m)}function ef(r){return function xT(){if(void 0===FE&&(FE=null,es.trustedTypes))try{FE=es.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return FE}()?.createHTML(r)||r}class Qr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vy})`}}class yC extends Qr{getTypeName(){return"HTML"}}class hr extends Qr{getTypeName(){return"Style"}}class nf extends Qr{getTypeName(){return"Script"}}class Kr extends Qr{getTypeName(){return"URL"}}class Wu extends Qr{getTypeName(){return"ResourceURL"}}function Ku(r){return r instanceof Qr?r.changingThisBreaksApplicationSecurity:r}function rc(r,t){const e=function Fg(r){return r instanceof Qr&&r.getTypeName()||null}(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Vy})`)}return e===t}class Ug{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(ef(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class R2{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const a=this.inertDocument.createElement("body");e.appendChild(a)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ef(t),e;const a=this.inertDocument.createElement("body");return a.innerHTML=ef(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(t){const e=t.attributes;for(let d=e.length-1;0<d;d--){const b=e.item(d).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&t.removeAttribute(b)}let a=t.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const D2=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Bv(r){return(r=String(r)).match(D2)?r:"unsafe:"+r}function Zd(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function Vg(...r){const t={};for(const e of r)for(const a in e)e.hasOwnProperty(a)&&(t[a]=!0);return t}const Yh=Zd("area,br,col,hr,img,wbr"),bC=Zd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jE=Zd("rp,rt"),QE=Vg(Yh,Vg(bC,Zd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vg(jE,Zd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vg(jE,bC)),CC=Zd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fv=Vg(CC,Zd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),N2=Zd("script,style,template");class jg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,a=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?a=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,a&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let d=this.checkClobberedElement(e,e.nextSibling);if(d){e=d;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!QE.hasOwnProperty(e))return this.sanitizedSomething=!0,!N2.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const a=t.attributes;for(let d=0;d<a.length;d++){const m=a.item(d),b=m.name,T=b.toLowerCase();if(!Fv.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let M=m.value;CC[T]&&(M=Bv(M)),this.buf.push(" ",b,'="',rf(M),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();QE.hasOwnProperty(e)&&!Yh.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rf(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const M2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,UT=/([^\#-~ |!])/g;function rf(r){return r.replace(/&/g,"&amp;").replace(M2,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(UT,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let HE;function VT(r,t){let e=null;try{HE=HE||function ao(r){const t=new R2(r);return function O2(){try{return!!(new window.DOMParser).parseFromString(ef(""),"text/html")}catch{return!1}}()?new Ug(t):t}(r);let a=t?String(t):"";e=HE.getInertBodyElement(a);let d=5,m=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=m,m=e.innerHTML,e=HE.getInertBodyElement(a)}while(a!==m);return ef((new jg).sanitizeChildren(ym(e)||e))}finally{if(e){const a=ym(e)||e;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function ym(r){return"content"in r&&function Em(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var $i=(()=>(($i=$i||{})[$i.NONE=0]="NONE",$i[$i.HTML=1]="HTML",$i[$i.STYLE=2]="STYLE",$i[$i.SCRIPT=3]="SCRIPT",$i[$i.URL=4]="URL",$i[$i.RESOURCE_URL=5]="RESOURCE_URL",$i))();const QT=new Hn("ENVIRONMENT_INITIALIZER"),eh=new Hn("INJECTOR",-1),hu=new Hn("INJECTOR_DEF_TYPES");class RC{get(t,e=Un){if(e===Un){const a=new Error(`NullInjectorError: No provider for ${Ko(t)}!`);throw a.name="NullInjectorError",a}return e}}function WL(...r){return{\u0275providers:WE(0,r),\u0275fromNgModule:!0}}function WE(r,...t){const e=[],a=new Set;let d;return Wp(t,m=>{const b=m;DC(b,e,[],a)&&(d||(d=[]),d.push(b))}),void 0!==d&&OC(d,e),e}function OC(r,t){for(let e=0;e<r.length;e++){const{providers:d}=r[e];kC(d,m=>{t.push(m)})}}function DC(r,t,e,a){if(!(r=Or(r)))return!1;let d=null,m=Wk(r);const b=!m&&so(r);if(m||b){if(b&&!b.standalone)return!1;d=r}else{const M=r.ngModule;if(m=Wk(M),!m)return!1;d=M}const T=a.has(d);if(b){if(T)return!1;if(a.add(d),b.dependencies){const M="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const j of M)DC(j,t,e,a)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let j;a.add(d);try{Wp(m.imports,re=>{DC(re,t,e,a)&&(j||(j=[]),j.push(re))})}finally{}void 0!==j&&OC(j,t)}if(!T){const j=Sg(d)||(()=>new d);t.push({provide:d,useFactory:j,deps:po},{provide:hu,useValue:d,multi:!0},{provide:QT,useValue:()=>rn(d),multi:!0})}const M=m.providers;null==M||T||kC(M,re=>{t.push(re)})}}return d!==r&&void 0!==r.providers}function kC(r,t){for(let e of r)em(e)&&(e=e.\u0275providers),Array.isArray(e)?kC(e,t):t(e)}const KE=Wo({provide:String,useValue:Wo});function PC(r){return null!==r&&"object"==typeof r&&KE in r}function Jh(r){return"function"==typeof r}const $h=new Hn("Set Injector scope."),zE={},U2={};let NC;function jv(){return void 0===NC&&(NC=new RC),NC}class af{}class Xh extends af{constructor(t,e,a,d){super(),this.parent=e,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,LC(t,b=>this.processProvider(b)),this.records.set(eh,as(void 0,this)),d.has("environment")&&this.records.set(af,as(void 0,this));const m=this.records.get($h);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(hu.multi,po,Xr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=sv(this),a=td(void 0);try{return t()}finally{sv(e),td(a)}}get(t,e=Un,a=Xr.Default){this.assertNotDestroyed(),a=Ud(a);const d=sv(this),m=td(void 0);try{if(!(a&Xr.SkipSelf)){let T=this.records.get(t);if(void 0===T){const M=function xC(r){return"function"==typeof r||"object"==typeof r&&r instanceof Hn}(t)&&yS(t);T=M&&this.injectableDefInScope(M)?as(YE(t),zE):null,this.records.set(t,T)}if(null!=T)return this.hydrate(t,T)}return(a&Xr.Self?jv():this.parent).get(t,e=a&Xr.Optional&&e===Un?null:e)}catch(b){if("NullInjectorError"===b.name){if((b[Gy]=b[Gy]||[]).unshift(Ko(t)),d)throw b;return function Ag(r,t,e,a){const d=r[Gy];throw t[Wy]&&d.unshift(t[Wy]),r.message=function Bu(r,t,e,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let d=Ko(t);if(Array.isArray(t))d=t.map(Ko).join(" -> ");else if("object"==typeof t){let m=[];for(let b in t)if(t.hasOwnProperty(b)){let T=t[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):Ko(T)))}d=`{${m.join(", ")}}`}return`${e}${a?"("+a+")":""}[${d}]: ${r.replace(Zr,"\n  ")}`}("\n"+r.message,d,e,a),r.ngTokenPath=d,r[Gy]=null,r}(b,t,"R3InjectorError",this.source)}throw b}finally{td(m),sv(d)}}resolveInjectorInitializers(){const t=sv(this),e=td(void 0);try{const a=this.get(QT.multi,po,Xr.Self);for(const d of a)d()}finally{sv(t),td(e)}}toString(){const t=[],e=this.records;for(const a of e.keys())t.push(Ko(a));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new vn(205,!1)}processProvider(t){let e=Jh(t=Or(t))?t:Or(t&&t.provide);const a=function KT(r){return PC(r)?as(void 0,r.useValue):as(V2(r),zE)}(t);if(Jh(t)||!0!==t.multi)this.records.get(e);else{let d=this.records.get(e);d||(d=as(void 0,zE,!0),d.factory=()=>SS(d.multi),this.records.set(e,d)),e=t,d.multi.push(t)}this.records.set(e,a)}hydrate(t,e){return e.value===zE&&(e.value=U2,e.value=e.factory()),"object"==typeof e.value&&e.value&&function zT(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Or(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function YE(r){const t=yS(r),e=null!==t?t.factory:Sg(r);if(null!==e)return e;if(r instanceof Hn)throw new vn(204,!1);if(r instanceof Function)return function bm(r){const t=r.length;if(t>0)throw Kp(t,"?"),new vn(204,!1);const e=function ed(r){const t=r&&(r[oo]||r[Qy]);if(t){const e=function Bd(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new vn(204,!1)}function V2(r,t,e){let a;if(Jh(r)){const d=Or(r);return Sg(d)||YE(d)}if(PC(r))a=()=>Or(r.useValue);else if(function WT(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...SS(r.deps||[]));else if(function GT(r){return!(!r||!r.useExisting)}(r))a=()=>rn(Or(r.useExisting));else{const d=Or(r&&(r.useClass||r.provide));if(!function MC(r){return!!r.deps}(r))return Sg(d)||YE(d);a=()=>new d(...SS(r.deps))}return a}function as(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function LC(r,t){for(const e of r)Array.isArray(e)?LC(e,t):e&&em(e)?LC(e.\u0275providers,t):t(e)}class j2{}class YT{}class Q2{resolveComponentFactory(t){throw function Zh(r){const t=Error(`No component factory found for ${Ko(r)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=r,t}(t)}}let Qg=(()=>{class r{}return r.NULL=new Q2,r})();function H2(){return Sm(Xa(),yn())}function Sm(r,t){return new Oi(yc(r,t))}let Oi=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=H2,r})();function G2(r){return r instanceof Oi?r.nativeElement:r}class cf{}let pu=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function qE(){const r=yn(),e=$a(Xa().index,r);return(Vu(e)?e:r)[11]}(),r})(),JE=(()=>{class r{}return r.\u0275prov=fr({token:r,providedIn:"root",factory:()=>null}),r})();class uf{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Qv=new uf("15.0.2"),th={};function Hv(r){return r.ngOriginalError}class Yu{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Hv(t);for(;e&&Hv(e);)e=Hv(e);return e||null}}function lf(r){return r.ownerDocument.defaultView}function JL(r,t,e){let a=r.length;for(;;){const d=r.indexOf(t,e);if(-1===d)return d;if(0===d||r.charCodeAt(d-1)<=32){const m=t.length;if(d+m===a||r.charCodeAt(d+m)<=32)return d}e=d+1}}const BC="ng-template";function z2(r,t,e){let a=0;for(;a<r.length;){let d=r[a++];if(e&&"class"===d){if(d=r[a],-1!==JL(d.toLowerCase(),t,0))return!0}else if(1===d){for(;a<r.length&&"string"==typeof(d=r[a++]);)if(d.toLowerCase()===t)return!0;return!1}}return!1}function XE(r){return 4===r.type&&r.value!==BC}function Y2(r,t,e){return t===(4!==r.type||e?r.value:BC)}function q2(r,t,e){let a=4;const d=r.attrs||[],m=function XV(r){for(let t=0;t<r.length;t++)if(yl(r[t]))return t;return r.length}(d);let b=!1;for(let T=0;T<t.length;T++){const M=t[T];if("number"!=typeof M){if(!b)if(4&a){if(a=2|1&a,""!==M&&!Y2(r,M,e)||""===M&&1===t.length){if(fu(a))return!1;b=!0}}else{const j=8&a?M:t[++T];if(8&a&&null!==r.attrs){if(!z2(r.attrs,j,e)){if(fu(a))return!1;b=!0}continue}const _e=FC(8&a?"class":M,d,XE(r),e);if(-1===_e){if(fu(a))return!1;b=!0;continue}if(""!==j){let Ue;Ue=_e>m?"":d[_e+1].toLowerCase();const Ge=8&a?Ue:null;if(Ge&&-1!==JL(Ge,j,0)||2&a&&j!==Ue){if(fu(a))return!1;b=!0}}}}else{if(!b&&!fu(a)&&!fu(M))return!1;if(b&&fu(M))continue;b=!1,a=M|1&a}}return fu(a)||b}function fu(r){return 0==(1&r)}function FC(r,t,e,a){if(null===t)return-1;let d=0;if(a||!e){let m=!1;for(;d<t.length;){const b=t[d];if(b===r)return d;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=t[++d];for(;"string"==typeof T;)T=t[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=m?1:2}return-1}return function ZV(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const a=r[e];if("number"==typeof a)return-1;if(a===t)return e;e++}return-1}(t,r)}function ZT(r,t,e=!1){for(let a=0;a<t.length;a++)if(q2(r,t[a],e))return!0;return!1}function e4(r,t){e:for(let e=0;e<t.length;e++){const a=t[e];if(r.length===a.length){for(let d=0;d<r.length;d++)if(r[d]!==a[d])continue e;return!0}}return!1}function J2(r,t){return r?":not("+t.trim()+")":t}function $2(r){let t=r[0],e=1,a=2,d="",m=!1;for(;e<r.length;){let b=r[e];if("string"==typeof b)if(2&a){const T=r[++e];d+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!fu(b)&&(t+=J2(m,d),d=""),a=b,m=m||!fu(a);e++}return""!==d&&(t+=J2(m,d)),t}const ci={};function Cn(r){eB(Hi(),yn(),ts()+r,!1)}function eB(r,t,e,a){if(!a)if(3==(3&t[2])){const m=r.preOrderCheckHooks;null!==m&&Sc(t,m,e)}else{const m=r.preOrderHooks;null!==m&&jp(t,m,0,e)}Gi(e)}function nR(r,t=null,e=null,a){const d=rR(r,t,e,a);return d.resolveInjectorInitializers(),d}function rR(r,t=null,e=null,a,d=new Set){const m=[e||po,WL(r)];return a=a||("object"==typeof r?void 0:Ko(r)),new Xh(m,t||jv(),a||null,d)}let ic=(()=>{class r{static create(e,a){if(Array.isArray(e))return nR({name:""},a,e,"");{const d=e.name??"";return nR({name:d},e.parent,e.providers,d)}}}return r.THROW_IF_NOT_FOUND=Un,r.NULL=new RC,r.\u0275prov=fr({token:r,providedIn:"any",factory:()=>rn(eh)}),r.__NG_ELEMENT_ID__=-1,r})();function yt(r,t=Xr.Default){const e=yn();return null===e?rn(r,t):mT(Xa(),e,Or(r),t)}function rb(){throw new Error("invalid")}function dR(r,t){const e=r.contentQueries;if(null!==e)for(let a=0;a<e.length;a+=2){const d=e[a],m=e[a+1];if(-1!==m){const b=r.data[m];od(d),b.contentQueries(2,t[m],m)}}}function pf(r,t,e,a,d,m,b,T,M,j,re){const _e=t.blueprint.slice();return _e[0]=d,_e[2]=76|a,(null!==re||r&&1024&r[2])&&(_e[2]|=1024),rE(_e),_e[3]=_e[15]=r,_e[8]=e,_e[10]=b||r&&r[10],_e[11]=T||r&&r[11],_e[12]=M||r&&r[12]||null,_e[9]=j||r&&r[9]||null,_e[6]=m,_e[20]=function CT(){return gm++}(),_e[21]=re,_e[16]=2==t.type?r[16]:_e,_e}function wm(r,t,e,a,d){let m=r.data[t];if(null===m)m=function JC(r,t,e,a,d){const m=iE(),b=Zs(),M=r.data[t]=function uB(r,t,e,a,d,m){return{type:e,index:a,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,e,t,a,d);return null===r.firstChild&&(r.firstChild=M),null!==m&&(b?null==m.child&&null!==M.parent&&(m.child=M):null===m.next&&(m.next=M)),M}(r,t,e,a,d),function uT(){return ai.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=e,m.value=a,m.attrs=d;const b=function wg(){const r=ai.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return Wd(m,!0),m}function zv(r,t,e,a){if(0===e)return-1;const d=t.length;for(let m=0;m<e;m++)t.push(a),r.blueprint.push(a),r.data.push(null);return d}function $C(r,t,e){Fh(t);try{const a=r.viewQuery;null!==a&&Jg(1,a,e);const d=r.template;null!==d&&hR(r,t,d,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&dR(r,t),r.staticViewQueries&&Jg(2,r.viewQuery,e);const m=r.components;null!==m&&function Kv(r,t){for(let e=0;e<t.length;e++)qg(r,t[e])}(t,m)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{t[2]&=-5,pv()}}function ib(r,t,e,a){const d=t[2];if(128!=(128&d)){Fh(t);try{rE(t),function wi(r){return ai.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&hR(r,t,e,2,a);const b=3==(3&d);if(b){const j=r.preOrderCheckHooks;null!==j&&Sc(t,j,null)}else{const j=r.preOrderHooks;null!==j&&jp(t,j,0,null),lE(t,0)}if(function mR(r){for(let t=Pn(r);null!==t;t=Cl(t)){if(!t[2])continue;const e=t[9];for(let a=0;a<e.length;a++){const d=e[a],m=d[3];0==(512&d[2])&&MS(m,1),d[2]|=512}}}(t),function iI(r){for(let t=Pn(r);null!==t;t=Cl(t))for(let e=10;e<t.length;e++){const a=t[e],d=a[1];Bh(a)&&ib(d,a,d.template,a[8])}}(t),null!==r.contentQueries&&dR(r,t),b){const j=r.contentCheckHooks;null!==j&&Sc(t,j)}else{const j=r.contentHooks;null!==j&&jp(t,j,1),lE(t,1)}!function lR(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let a=0;a<e.length;a++){const d=e[a];if(d<0)Gi(~d);else{const m=d,b=e[++a],T=e[++a];l2(b,m),T(2,t[m])}}}finally{Gi(-1)}}(r,t);const T=r.components;null!==T&&function qC(r,t){for(let e=0;e<t.length;e++)Yg(r,t[e])}(t,T);const M=r.viewQuery;if(null!==M&&Jg(2,M,a),b){const j=r.viewCheckHooks;null!==j&&Sc(t,j)}else{const j=r.viewHooks;null!==j&&jp(t,j,2),lE(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,MS(t[3],-1))}finally{pv()}}}function hR(r,t,e,a,d){const m=ts(),b=2&a;try{Gi(-1),b&&t.length>22&&eB(r,t,22,!1),e(a,d)}finally{Gi(m)}}function XC(r,t,e){if(Zn(t)){const d=t.directiveEnd;for(let m=t.directiveStart;m<d;m++){const b=r.data[m];b.contentQueries&&b.contentQueries(1,e[m],m)}}}function iP(r,t,e){!hv()||(function ZC(r,t,e,a){const d=e.directiveStart,m=e.directiveEnd;r.firstCreatePass||Ic(e,t),na(a,t);const b=e.initialInputs;for(let T=d;T<m;T++){const M=r.data[T],j=Bs(M);j&&cP(t,e,M);const re=qd(t,r,T,e);na(re,t),null!==b&&nI(0,T-d,re,M,0,b),j&&($a(e.index,t)[8]=re)}}(r,t,e,yc(e,t)),64==(64&e.flags)&&fR(r,t,e))}function pR(r,t,e=yc){const a=t.localNames;if(null!==a){let d=t.index+1;for(let m=0;m<a.length;m+=2){const b=a[m+1],T=-1===b?e(t,r):r[b];r[d++]=T}}}function oB(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=oP(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function oP(r,t,e,a,d,m,b,T,M,j){const re=22+a,_e=re+d,Ue=function sB(r,t){const e=[];for(let a=0;a<t;a++)e.push(a<r?null:ci);return e}(re,_e),Ge="function"==typeof j?j():j;return Ue[1]={type:r,blueprint:Ue,template:e,queries:null,viewQuery:T,declTNode:t,data:Ue.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:M,consts:Ge,incompleteFirstPass:!1}}function cB(r,t,e,a){const d=db(t);null===e?d.push(a):(d.push(e),r.firstCreatePass&&$v(r).push(a,d.length-1))}function ff(r,t,e,a){for(let d in r)if(r.hasOwnProperty(d)){e=null===e?{}:e;const m=r[d];null===a?ob(e,t,d,m):a.hasOwnProperty(d)&&ob(e,t,a[d],m)}return e}function ob(r,t,e,a){r.hasOwnProperty(e)?r[e].push(t,a):r[e]=[t,a]}function mu(r,t,e,a,d,m,b,T){const M=yc(t,e);let re,j=t.inputs;!T&&null!=j&&(re=j[a])?(gf(r,e,re,a,d),Bp(t)&&Gg(e,t.index)):3&t.type&&(a=function sP(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),d=null!=b?b(d,t.value||"",a):d,m.setProperty(M,a,d))}function Gg(r,t){const e=$a(t,r);16&e[2]||(e[2]|=32)}function Wg(r,t,e,a){let d=!1;if(hv()){const m=null===a?null:{"":-1},b=function eI(r,t){const e=r.directiveRegistry;let a=null,d=null;if(e)for(let m=0;m<e.length;m++){const b=e[m];if(ZT(t,b.selectors,!1))if(a||(a=[]),Bs(b))if(null!==b.findHostDirectiveDefs){const T=[];d=d||new Map,b.findHostDirectiveDefs(b,T,d),a.unshift(...T,b),cb(r,t,T.length)}else a.unshift(b),cb(r,t,0);else d=d||new Map,b.findHostDirectiveDefs?.(b,a,d),a.push(b)}return null===a?null:[a,d]}(r,e);let T,M;null===b?T=M=null:[T,M]=b,null!==T&&(d=!0,sb(r,t,e,T,m,M)),m&&function qv(r,t,e){if(t){const a=r.localNames=[];for(let d=0;d<t.length;d+=2){const m=e[t[d+1]];if(null==m)throw new vn(-301,!1);a.push(t[d],m)}}}(e,a,m)}return e.mergedAttrs=mo(e.mergedAttrs,e.attrs),d}function sb(r,t,e,a,d,m){for(let j=0;j<a.length;j++)Za(Ic(e,t),r,a[j].type);!function qu(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}(e,r.data.length,a.length);for(let j=0;j<a.length;j++){const re=a[j];re.providersResolver&&re.providersResolver(re)}let b=!1,T=!1,M=zv(r,t,a.length,null);for(let j=0;j<a.length;j++){const re=a[j];e.mergedAttrs=mo(e.mergedAttrs,re.hostAttrs),Jv(r,e,t,M,re),tI(M,re,d),null!==re.contentQueries&&(e.flags|=4),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(e.flags|=64);const _e=re.type.prototype;!b&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),b=!0),!T&&(_e.ngOnChanges||_e.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),T=!0),M++}!function mf(r,t,e){const d=t.directiveEnd,m=r.data,b=t.attrs,T=[];let M=null,j=null;for(let re=t.directiveStart;re<d;re++){const _e=m[re],Ue=e?e.get(_e):null,st=Ue?Ue.outputs:null;M=ff(_e.inputs,re,M,Ue?Ue.inputs:null),j=ff(_e.outputs,re,j,st);const Rt=null===M||null===b||XE(t)?null:zg(M,re,b);T.push(Rt)}null!==M&&(M.hasOwnProperty("class")&&(t.flags|=8),M.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=T,t.inputs=M,t.outputs=j}(r,e,m)}function fR(r,t,e){const a=e.directiveStart,d=e.directiveEnd,m=e.index,b=function aE(){return ai.lFrame.currentDirectiveIndex}();try{Gi(m);for(let T=a;T<d;T++){const M=r.data[T],j=t[T];cE(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&ab(M,j)}}finally{Gi(-1),cE(b)}}function ab(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function cb(r,t,e){t.componentOffset=e,(r.components||(r.components=[])).push(t.index)}function tI(r,t,e){if(e){if(t.exportAs)for(let a=0;a<t.exportAs.length;a++)e[t.exportAs[a]]=r;Bs(t)&&(e[""]=r)}}function Jv(r,t,e,a,d){r.data[a]=d;const m=d.factory||(d.factory=Sg(d.type)),b=new Wr(m,Bs(d),yt);r.blueprint[a]=b,e[a]=b,function aP(r,t,e,a,d){const m=d.hostBindings;if(m){let b=r.hostBindingOpCodes;null===b&&(b=r.hostBindingOpCodes=[]);const T=~t.index;(function Yv(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(b)!=T&&b.push(T),b.push(e,a,m)}}(r,t,a,zv(r,e,d.hostVars,ci),d)}function cP(r,t,e){const a=yc(t,r),d=oB(e),m=r[10],b=ub(r,pf(r,d,null,e.onPush?32:16,a,t,m,m.createRenderer(a,e),null,null,null));r[t.index]=b}function jc(r,t,e,a,d,m){const b=yc(r,t);!function Kg(r,t,e,a,d,m,b){if(null==m)r.removeAttribute(t,d,e);else{const T=null==b?si(m):b(m,a||"",d);r.setAttribute(t,d,T,e)}}(t[11],b,m,r.value,e,a,d)}function nI(r,t,e,a,d,m){const b=m[t];if(null!==b){const T=a.setInput;for(let M=0;M<b.length;){const j=b[M++],re=b[M++],_e=b[M++];null!==T?a.setInput(e,_e,j,re):e[re]=_e}}}function zg(r,t,e){let a=null,d=0;for(;d<e.length;){const m=e[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(r.hasOwnProperty(m)){null===a&&(a=[]);const b=r[m];for(let T=0;T<b.length;T+=2)if(b[T]===t){a.push(m,b[T+1],e[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function rI(r,t,e,a){return[r,!0,!1,t,null,0,a,e,null,null]}function Yg(r,t){const e=$a(t,r);if(Bh(e)){const a=e[1];48&e[2]?ib(a,e,a.template,e[8]):e[5]>0&&tp(e)}}function tp(r){for(let a=Pn(r);null!==a;a=Cl(a))for(let d=10;d<a.length;d++){const m=a[d];if(Bh(m))if(512&m[2]){const b=m[1];ib(b,m,b.template,m[8])}else m[5]>0&&tp(m)}const e=r[1].components;if(null!==e)for(let a=0;a<e.length;a++){const d=$a(e[a],r);Bh(d)&&d[5]>0&&tp(d)}}function qg(r,t){const e=$a(t,r),a=e[1];(function wl(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(a,e),$C(a,e,e[8])}function ub(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function gu(r){for(;r;){r[2]|=32;const t=Pa(r);if(Ei(r)&&!t)return r;r=t}return null}function np(r,t,e,a=!0){const d=t[10];d.begin&&d.begin();try{ib(r,t,r.template,e)}catch(b){throw a&&$g(t,b),b}finally{d.end&&d.end()}}function Jg(r,t,e){od(0),t(r,e)}function db(r){return r[7]||(r[7]=[])}function $v(r){return r.cleanup||(r.cleanup=[])}function oI(r,t,e){return(null===r||Bs(r))&&(e=function NL(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function $g(r,t){const e=r[9],a=e?e.get(Yu,null):null;a&&a.handleError(t)}function gf(r,t,e,a,d){for(let m=0;m<e.length;){const b=e[m++],T=e[m++],M=t[b],j=r.data[b];null!==j.setInput?j.setInput(M,d,a,T):M[T]=d}}function Xv(r,t,e){let a=e?r.styles:null,d=e?r.classes:null,m=0;if(null!==t)for(let b=0;b<t.length;b++){const T=t[b];"number"==typeof T?m=T:1==m?d=vS(d,T):2==m&&(a=vS(a,T+": "+t[++b]+";"))}e?r.styles=a:r.stylesWithoutHost=a,e?r.classes=d:r.classesWithoutHost=d}function sI(r,t,e,a,d=!1){for(;null!==e;){const m=t[e.index];if(null!==m&&a.push(Da(m)),Ls(m))for(let T=10;T<m.length;T++){const M=m[T],j=M[1].firstChild;null!==j&&sI(M[1],M,j,a)}const b=e.type;if(8&b)sI(r,t,e.child,a);else if(32&b){const T=Gh(e,t);let M;for(;M=T();)a.push(M)}else if(16&b){const T=PT(t,e);if(Array.isArray(T))a.push(...T);else{const M=Pa(t[16]);sI(M[1],M,T,a,!0)}}e=d?e.projectionNext:e.next}return a}class Rm{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return sI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ls(t)){const e=t[8],a=e?e.indexOf(this):-1;a>-1&&(Gu(t,a),Ev(e,a))}this._attachedToViewContainer=!1}Kh(this._lView[1],this._lView)}onDestroy(t){cB(this._lView[1],this._lView,null,t)}markForCheck(){gu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){np(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new vn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wh(r,t){xv(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new vn(902,!1);this._appRef=t}}class rp extends Rm{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;np(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class hb extends Qg{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=so(t);return new Zv(e,this.ngModule)}}function aI(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}class uI{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,a){a=Ud(a);const d=this.injector.get(t,th,a);return d!==th||e===th?d:this.parentInjector.get(t,e,a)}}class Zv extends YT{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function XL(r){return r.map($2).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return aI(this.componentDef.inputs)}get outputs(){return aI(this.componentDef.outputs)}create(t,e,a,d){let m=(d=d||this.ngModule)instanceof af?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new uI(t,m):t,T=b.get(cf,null);if(null===T)throw new vn(407,!1);const M=b.get(JE,null),j=T.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",_e=a?function aB(r,t,e){return r.selectRootElement(t,e===qa.ShadowDom)}(j,a,this.componentDef.encapsulation):Il(j,re,function cI(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(re)),Ue=this.componentDef.onPush?288:272,Ge=oP(0,null,null,1,0,null,null,null,null,null),st=pf(null,Ge,null,Ue,null,null,T,j,M,b,null);let Rt,nn;Fh(st);try{const cn=this.componentDef;let Mn,n=null;cn.findHostDirectiveDefs?(Mn=[],n=new Map,cn.findHostDirectiveDefs(cn,Mn,n),Mn.push(cn)):Mn=[cn];const o=function pb(r,t){const e=r[1];return r[22]=t,wm(e,22,2,"#host",null)}(st,_e),s=function _R(r,t,e,a,d,m,b,T){const M=d[1];!function lI(r,t,e,a){for(const d of r)t.mergedAttrs=mo(t.mergedAttrs,d.hostAttrs);null!==t.mergedAttrs&&(Xv(t,t.mergedAttrs,!0),null!==e&&MT(a,e,t))}(a,r,t,b);const j=m.createRenderer(t,e),re=pf(d,oB(e),null,e.onPush?32:16,d[r.index],r,m,j,T||null,null,null);return M.firstCreatePass&&cb(M,r,a.length-1),ub(d,re),d[r.index]=re}(o,_e,cn,Mn,st,T,j);nn=NS(Ge,22),_e&&function lP(r,t,e,a){if(a)pT(r,e,["ng-version",Qv.full]);else{const{attrs:d,classes:m}=function ZL(r){const t=[],e=[];let a=1,d=2;for(;a<r.length;){let m=r[a];if("string"==typeof m)2===d?""!==m&&t.push(m,r[++a]):8===d&&e.push(m);else{if(!fu(d))break;d=m}a++}return{attrs:t,classes:e}}(t.selectors[0]);d&&pT(r,e,d),m&&m.length>0&&vm(r,e,m.join(" "))}}(j,cn,_e,a),void 0!==e&&function AR(r,t,e){const a=r.projection=[];for(let d=0;d<t.length;d++){const m=e[d];a.push(null!=m?Array.from(m):null)}}(nn,this.ngContentSelectors,e),Rt=function vR(r,t,e,a,d,m){const b=Xa(),T=d[1],M=yc(b,d);sb(T,d,b,e,null,a);for(let re=0;re<e.length;re++)na(qd(d,T,b.directiveStart+re,b),d);fR(T,d,b),M&&na(M,d);const j=qd(d,T,b.directiveStart+b.componentOffset,b);if(r[8]=d[8]=j,null!==m)for(const re of m)re(j,t);return XC(T,b,r),j}(s,cn,Mn,n,st,[yR]),$C(Ge,st,null)}finally{pv()}return new gR(this.componentType,Rt,Sm(nn,st),st,nn)}}class gR extends j2{constructor(t,e,a,d,m){super(),this.location=a,this._rootLView=d,this._tNode=m,this.instance=e,this.hostView=this.changeDetectorRef=new rp(d),this.componentType=t}setInput(t,e){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[t])){const m=this._rootLView;gf(m[1],m,d,t,e),Gg(m,this._tNode.index)}}get injector(){return new jh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function yR(){const r=Xa();Do(yn()[1],r)}function Lr(r){let t=function fb(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const a=[r];for(;t;){let d;if(Bs(r))d=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new vn(903,!1);d=t.\u0275dir}if(d){if(e){a.push(d);const b=r;b.inputs=Xg(r.inputs),b.declaredInputs=Xg(r.declaredInputs),b.outputs=Xg(r.outputs);const T=d.hostBindings;T&&Zg(r,T);const M=d.viewQuery,j=d.contentQueries;if(M&&dI(r,M),j&&hI(r,j),_c(r.inputs,d.inputs),_c(r.declaredInputs,d.declaredInputs),_c(r.outputs,d.outputs),Bs(d)&&d.data.animation){const re=r.data;re.animation=(re.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(r),T===Lr&&(e=!1)}}t=Object.getPrototypeOf(t)}!function ER(r){let t=0,e=null;for(let a=r.length-1;a>=0;a--){const d=r[a];d.hostVars=t+=d.hostVars,d.hostAttrs=mo(d.hostAttrs,e=mo(e,d.hostAttrs))}}(a)}function Xg(r){return r===nd?{}:r===po?[]:r}function dI(r,t){const e=r.viewQuery;r.viewQuery=e?(a,d)=>{t(a,d),e(a,d)}:t}function hI(r,t){const e=r.contentQueries;r.contentQueries=e?(a,d,m)=>{t(a,d,m),e(a,d,m)}:t}function Zg(r,t){const e=r.hostBindings;r.hostBindings=e?(a,d)=>{t(a,d),e(a,d)}:t}let Om=null;function Dm(){if(!Om){const r=es.Symbol;if(r&&r.iterator)Om=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const a=t[e];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Om=a)}}}return Om}function Et(r){return!!mI(r)&&(Array.isArray(r)||!(r instanceof Map)&&Dm()in r)}function mI(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function qo(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function Xi(r,t,e,a){const d=yn();return qo(d,sm(),t)&&(Hi(),jc(Lo(),d,r,t,e,a)),Xi}function tA(r,t,e,a){return qo(r,sm(),e)?t+si(e)+a:ci}function ar(r,t,e,a,d,m,b,T){const M=yn(),j=Hi(),re=r+22,_e=j.firstCreatePass?function vP(r,t,e,a,d,m,b,T,M){const j=t.consts,re=wm(t,r,4,b||null,Up(j,T));Wg(t,e,re,Up(j,M)),Do(t,re);const _e=re.tViews=oP(2,re,a,d,m,t.directiveRegistry,t.pipeRegistry,null,t.schemas,j);return null!==t.queries&&(t.queries.template(t,re),_e.queries=t.queries.embeddedTView(re)),re}(re,j,M,t,e,a,d,m,b):j.data[re];Wd(_e,!1);const Ue=M[11].createComment("");Bg(j,M,Ue,_e),na(Ue,M),ub(M,M[re]=rI(Ue,M,Ue,_e)),Hd(_e)&&iP(j,M,_e),null!=b&&pR(M,_e,T)}function sh(r){return im(function om(){return ai.lFrame.contextLView}(),22+r)}function Vn(r,t,e){const a=yn();return qo(a,sm(),t)&&mu(Hi(),Lo(),a,r,t,a[11],e,!1),Vn}function CR(r,t,e,a,d){const b=d?"class":"style";gf(r,e,t.inputs[b],b,a)}function wn(r,t,e,a){const d=yn(),m=Hi(),b=22+r,T=d[11],M=d[b]=Il(T,t,function dT(){return ai.lFrame.currentNamespace}()),j=m.firstCreatePass?function fB(r,t,e,a,d,m,b){const T=t.consts,j=wm(t,r,2,d,Up(T,m));return Wg(t,e,j,Up(T,b)),null!==j.attrs&&Xv(j,j.attrs,!1),null!==j.mergedAttrs&&Xv(j,j.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,j),j}(b,m,d,0,t,e,a):m.data[b];return Wd(j,!0),MT(T,M,j),32!=(32&j.flags)&&Bg(m,d,M,j),0===function o2(){return ai.lFrame.elementDepthCount}()&&na(M,d),function s2(){ai.lFrame.elementDepthCount++}(),Hd(j)&&(iP(m,d,j),XC(m,j,d)),null!==a&&pR(d,j),wn}function Qn(){let r=Xa();Zs()?oE():(r=r.parent,Wd(r,!1));const t=r;!function a2(){ai.lFrame.elementDepthCount--}();const e=Hi();return e.firstCreatePass&&(Do(e,r),Zn(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function QS(r){return 0!=(8&r.flags)}(t)&&CR(e,t,yn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function d2(r){return 0!=(16&r.flags)}(t)&&CR(e,t,yn(),t.stylesWithoutHost,!1),Qn}function Eo(r,t,e,a){return wn(r,t,e,a),Qn(),Eo}function Di(r,t,e){const a=yn(),d=Hi(),m=r+22,b=d.firstCreatePass?function Jo(r,t,e,a,d){const m=t.consts,b=Up(m,a),T=wm(t,r,8,"ng-container",b);return null!==b&&Xv(T,b,!0),Wg(t,e,T,Up(m,d)),null!==t.queries&&t.queries.elementStart(t,T),T}(m,d,a,t,e):d.data[m];Wd(b,!0);const T=a[m]=a[11].createComment("");return Bg(d,a,T,b),na(T,a),Hd(b)&&(iP(d,a,b),XC(d,b,a)),null!=e&&pR(a,b),Di}function Qc(){let r=Xa();const t=Hi();return Zs()?oE():(r=r.parent,Wd(r,!1)),t.firstCreatePass&&(Do(t,r),Zn(r)&&t.queries.elementEnd(r)),Qc}function vu(r,t,e){return Di(r,t,e),Qc(),vu}function Fo(){return yn()}function sA(r){return!!r&&"function"==typeof r.then}const _b=function IR(r){return!!r&&"function"==typeof r.subscribe};function co(r,t,e,a){const d=yn(),m=Hi(),b=Xa();return AP(m,d,d[11],b,r,t,a),co}function aA(r,t){const e=Xa(),a=yn(),d=Hi();return AP(d,a,oI(LS(d.data),e,a),e,r,t),aA}function AP(r,t,e,a,d,m,b){const T=Hd(a),j=r.firstCreatePass&&$v(r),re=t[8],_e=db(t);let Ue=!0;if(3&a.type||b){const Rt=yc(a,t),nn=b?b(Rt):Rt,cn=_e.length,Mn=b?o=>b(Da(o[a.index])):a.index;let n=null;if(!b&&T&&(n=function wR(r,t,e,a){const d=r.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const b=d[m];if(b===e&&d[m+1]===a){const T=t[7],M=d[m+2];return T.length>M?T[M]:null}"string"==typeof b&&(m+=2)}return null}(r,t,d,a.index)),null!==n)(n.__ngLastListenerFn__||n).__ngNextListenerFn__=m,n.__ngLastListenerFn__=m,Ue=!1;else{m=$u(a,t,re,m,!1);const o=e.listen(nn,d,m);_e.push(m,o),j&&j.push(d,Mn,cn,cn+1)}}else m=$u(a,t,re,m,!1);const Ge=a.outputs;let st;if(Ue&&null!==Ge&&(st=Ge[d])){const Rt=st.length;if(Rt)for(let nn=0;nn<Rt;nn+=2){const s=t[st[nn]][st[nn+1]].subscribe(m),c=_e.length;_e.push(m,s),j&&j.push(d,a.index,c,-(c+1))}}}function _I(r,t,e,a){try{return!1!==e(a)}catch(d){return $g(r,d),!1}}function $u(r,t,e,a,d){return function m(b){if(b===Function)return a;gu(r.componentOffset>-1?$a(r.index,t):t);let M=_I(t,0,a,b),j=m.__ngNextListenerFn__;for(;j;)M=_I(t,0,j,b)&&M,j=j.__ngNextListenerFn__;return d&&!1===M&&(b.preventDefault(),b.returnValue=!1),M}}function ii(r=1){return function ga(r){return(ai.lFrame.contextLView=function Rg(r,t){for(;r>0;)t=t[15],r--;return t}(r,ai.lFrame.contextLView))[8]}(r)}function TR(r,t){let e=null;const a=function $L(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let d=0;d<t.length;d++){const m=t[d];if("*"!==m){if(null===a?ZT(r,m,!0):e4(a,m))return d}else e=d}return e}function Hc(r){const t=yn()[16][6];if(!t.projection){const a=t.projection=Kp(r?r.length:1,null),d=a.slice();let m=t.child;for(;null!==m;){const b=r?TR(m,r):0;null!==b&&(d[b]?d[b].projectionNext=m:a[b]=m,d[b]=m),m=m.next}}}function bo(r,t=0,e){const a=yn(),d=Hi(),m=wm(d,22+r,16,null,e||null);null===m.projection&&(m.projection=t),oE(),32!=(32&m.flags)&&function _C(r,t,e){BE(t[11],0,t,e,OT(r,e,t),_t(e.parent||t[6],e,t))}(d,a,m)}function yI(r,t){return r<<17|t<<2}function _f(r){return r>>17&32767}function uA(r){return 2|r}function vf(r){return(131068&r)>>2}function Mm(r,t){return-131069&r|t<<2}function r_(r){return 1|r}function op(r,t,e,a,d){const m=r[e+1],b=null===t;let T=a?_f(m):vf(m),M=!1;for(;0!==T&&(!1===M||b);){const re=r[T+1];TP(r[T],t)&&(M=!0,r[T+1]=a?r_(re):uA(re)),T=a?_f(re):vf(re)}M&&(r[e+1]=a?uA(m):r_(m))}function TP(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&qp(r,t)>=0}const cs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Xu(r){return r.substring(cs.key,cs.keyEnd)}function lA(r,t){const e=cs.textEnd;return e===t?-1:(t=cs.keyEnd=function gB(r,t,e){for(;t<e&&r.charCodeAt(t)>32;)t++;return t}(r,cs.key=t,e),i_(r,t,e))}function i_(r,t,e){for(;t<e&&r.charCodeAt(t)<=32;)t++;return t}function el(r,t,e){return Ol(r,t,e,!1),el}function go(r,t){return Ol(r,t,null,!0),go}function cd(r,t){for(let e=function bb(r){return function OR(r){cs.key=0,cs.keyEnd=0,cs.value=0,cs.valueEnd=0,cs.textEnd=r.length}(r),lA(r,i_(r,0,cs.textEnd))}(t);e>=0;e=lA(t,e))au(r,Xu(t),!0)}function Ol(r,t,e,a){const d=yn(),m=Hi(),b=Dr(2);m.firstUpdatePass&&ch(m,r,b,a),t!==ci&&qo(d,b,t)&&NR(m,m.data[ts()],d,d[11],r,d[b+1]=function wI(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Ko(Ku(r)))),r}(t,e),a,b)}function DR(r,t){return t>=r.expandoStartIndex}function ch(r,t,e,a){const d=r.data;if(null===d[e+1]){const m=d[ts()],b=DR(r,e);xR(m,a)&&null===t&&!b&&(t=!1),t=function hA(r,t,e,a){const d=LS(r);let m=a?t.residualClasses:t.residualStyles;if(null===d)0===(a?t.classBindings:t.styleBindings)&&(e=Af(e=xm(null,r,t,e,a),t.attrs,a),m=null);else{const b=t.directiveStylingLast;if(-1===b||r[b]!==d)if(e=xm(d,r,t,e,a),null===m){let M=function pA(r,t,e){const a=e?t.classBindings:t.styleBindings;if(0!==vf(a))return r[_f(a)]}(r,t,a);void 0!==M&&Array.isArray(M)&&(M=xm(null,r,t,M[1],a),M=Af(M,t.attrs,a),function SI(r,t,e,a){r[_f(e?t.classBindings:t.styleBindings)]=a}(r,t,a,M))}else m=function CI(r,t,e){let a;const d=t.directiveEnd;for(let m=1+t.directiveStylingLast;m<d;m++)a=Af(a,r[m].hostAttrs,e);return Af(a,t.attrs,e)}(r,t,a)}return void 0!==m&&(a?t.residualClasses=m:t.residualStyles=m),e}(d,m,t,a),function Eb(r,t,e,a,d,m){let b=m?t.classBindings:t.styleBindings,T=_f(b),M=vf(b);r[a]=e;let re,j=!1;if(Array.isArray(e)){const _e=e;re=_e[1],(null===re||qp(_e,re)>0)&&(j=!0)}else re=e;if(d)if(0!==M){const Ue=_f(r[T+1]);r[a+1]=yI(Ue,T),0!==Ue&&(r[Ue+1]=Mm(r[Ue+1],a)),r[T+1]=function IP(r,t){return 131071&r|t<<17}(r[T+1],a)}else r[a+1]=yI(T,0),0!==T&&(r[T+1]=Mm(r[T+1],a)),T=a;else r[a+1]=yI(M,0),0===T?T=a:r[M+1]=Mm(r[M+1],a),M=a;j&&(r[a+1]=uA(r[a+1])),op(r,re,a,!0),op(r,re,a,!1),function mB(r,t,e,a,d){const m=d?r.residualClasses:r.residualStyles;null!=m&&"string"==typeof t&&qp(m,t)>=0&&(e[a+1]=r_(e[a+1]))}(t,re,r,a,m),b=yI(T,M),m?t.classBindings=b:t.styleBindings=b}(d,m,t,e,b,a)}}function xm(r,t,e,a,d){let m=null;const b=e.directiveEnd;let T=e.directiveStylingLast;for(-1===T?T=e.directiveStart:T++;T<b&&(m=t[T],a=Af(a,m.hostAttrs,d),m!==r);)T++;return null!==r&&(e.directiveStylingLast=T),a}function Af(r,t,e){const a=e?1:2;let d=-1;if(null!==t)for(let m=0;m<t.length;m++){const b=t[m];"number"==typeof b?d=b:d===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),au(r,b,!!e||t[++m]))}return void 0===r?null:r}function NR(r,t,e,a,d,m,b,T){if(!(3&t.type))return;const M=r.data,j=M[T+1],re=function yb(r){return 1==(1&r)}(j)?MR(M,t,e,d,vf(j),b):void 0;Ib(re)||(Ib(m)||function CP(r){return 2==(2&r)}(j)&&(m=MR(M,null,e,d,T,b)),function AC(r,t,e,a,d){if(t)d?r.addClass(e,a):r.removeClass(e,a);else{let m=-1===a.indexOf("-")?void 0:uu.DashCase;null==d?r.removeStyle(e,a,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=uu.Important),r.setStyle(e,a,d,m))}}(a,b,PS(ts(),e),d,m))}function MR(r,t,e,a,d,m){const b=null===t;let T;for(;d>0;){const M=r[d],j=Array.isArray(M),re=j?M[1]:M,_e=null===re;let Ue=e[d+1];Ue===ci&&(Ue=_e?po:void 0);let Ge=_e?yE(Ue,a):re===a?Ue:void 0;if(j&&!Ib(Ge)&&(Ge=yE(M,a)),Ib(Ge)&&(T=Ge,b))return T;const st=r[d+1];d=b?_f(st):vf(st)}if(null!==t){let M=m?t.residualClasses:t.residualStyles;null!=M&&(T=yE(M,a))}return T}function Ib(r){return void 0!==r}function xR(r,t){return 0!=(r.flags&(t?8:16))}function Ur(r,t=""){const e=yn(),a=Hi(),d=r+22,m=a.firstCreatePass?wm(a,d,1,t,null):a.data[d],b=e[d]=function Ir(r,t){return r.createText(t)}(e[11],t);Bg(a,e,b,m),Wd(m,!1)}function yf(r){return uh("",r,""),yf}function uh(r,t,e){const a=yn(),d=tA(a,r,t,e);return d!==ci&&function ih(r,t,e){const a=PS(t,r);!function C2(r,t,e){r.setValue(t,e)}(r[11],a,e)}(a,ts(),d),uh}function DP(r,t,e){!function ah(r,t,e,a){const d=Hi(),m=Dr(2);d.firstUpdatePass&&ch(d,null,m,a);const b=yn();if(e!==ci&&qo(b,m,e)){const T=d.data[ts()];if(xR(T,a)&&!DR(d,m)){let M=a?T.classesWithoutHost:T.stylesWithoutHost;null!==M&&(e=vS(M,e||"")),CR(d,T,b,e,a)}else!function II(r,t,e,a,d,m,b,T){d===ci&&(d=po);let M=0,j=0,re=0<d.length?d[0]:null,_e=0<m.length?m[0]:null;for(;null!==re||null!==_e;){const Ue=M<d.length?d[M+1]:void 0,Ge=j<m.length?m[j+1]:void 0;let Rt,st=null;re===_e?(M+=2,j+=2,Ue!==Ge&&(st=_e,Rt=Ge)):null===_e||null!==re&&re<_e?(M+=2,st=re):(j+=2,st=_e,Rt=Ge),null!==st&&NR(r,t,e,a,st,Rt,b,T),re=M<d.length?d[M]:null,_e=j<m.length?m[j]:null}}(d,T,b,b[11],b[m+1],b[m+1]=function kR(r,t,e){if(null==e||""===e)return po;const a=[],d=Ku(e);if(Array.isArray(d))for(let m=0;m<d.length;m++)r(a,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&r(a,m,d[m]);else"string"==typeof d&&t(a,d);return a}(r,t,e),a,m)}}(au,cd,tA(yn(),r,t,e),!0)}function a_(r,t,e){const a=yn();return qo(a,sm(),t)&&mu(Hi(),Lo(),a,r,t,a[11],e,!0),a_}function Ob(r,t,e){const a=yn();if(qo(a,sm(),t)){const m=Hi(),b=Lo();mu(m,b,a,r,t,oI(LS(m.data),b,a),e,!0)}return Ob}const Gc="en-US";let CA=Gc;function Qm(r,t,e,a,d){if(r=Or(r),Array.isArray(r))for(let m=0;m<r.length;m++)Qm(r[m],t,e,a,d);else{const m=Hi(),b=yn();let T=Jh(r)?r:Or(r.provide),M=V2(r);const j=Xa(),re=1048575&j.providerIndexes,_e=j.directiveStart,Ue=j.providerIndexes>>20;if(Jh(r)||!r.multi){const Ge=new Wr(M,d,yt),st=Hm(T,t,d?re:re+Ue,_e);-1===st?(Za(Ic(j,b),m,T),RA(m,r,t.length),t.push(T),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),e.push(Ge),b.push(Ge)):(e[st]=Ge,b[st]=Ge)}else{const Ge=Hm(T,t,re+Ue,_e),st=Hm(T,t,re,re+Ue),Rt=Ge>=0&&e[Ge],nn=st>=0&&e[st];if(d&&!nn||!d&&!Rt){Za(Ic(j,b),m,T);const cn=function ZP(r,t,e,a,d){const m=new Wr(r,e,yt);return m.multi=[],m.index=t,m.componentProviders=0,jI(m,d,a&&!e),m}(d?XP:LB,e.length,d,a,M);!d&&nn&&(e[st].providerFactory=cn),RA(m,r,t.length,0),t.push(T),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),e.push(cn),b.push(cn)}else RA(m,r,Ge>-1?Ge:st,jI(e[d?st:Ge],M,!d&&a));!d&&a&&nn&&e[st].componentProviders++}}}function RA(r,t,e,a){const d=Jh(t),m=function sf(r){return!!r.useClass}(t);if(d||m){const M=(m?Or(t.useClass):t).prototype.ngOnDestroy;if(M){const j=r.destroyHooks||(r.destroyHooks=[]);if(!d&&t.multi){const re=j.indexOf(e);-1===re?j.push(e,[a,M]):j[re+1].push(a,M)}else j.push(e,M)}}}function jI(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function Hm(r,t,e,a){for(let d=e;d<a;d++)if(t[d]===r)return d;return-1}function LB(r,t,e,a){return sO(this.multi,[])}function XP(r,t,e,a){const d=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=qd(e,e[1],this.providerFactory.index,a);m=T.slice(0,b),sO(d,m);for(let M=b;M<T.length;M++)m.push(T[M])}else m=[],sO(d,m);return m}function sO(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function So(r,t=[]){return e=>{e.providersResolver=(a,d)=>function Ub(r,t,e){const a=Hi();if(a.firstCreatePass){const d=Bs(r);Qm(e,a.data,a.blueprint,d,!0),Qm(t,a.data,a.blueprint,d,!1)}}(a,d?d(r):r,t)}}class OA{}class QI{}class xa extends OA{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hb(this);const a=function Fu(r,t){const e=r[Yk]||null;if(!e&&!0===t)throw new Error(`Type ${Ko(r)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function ep(r){return r instanceof Function?r():r}(a.bootstrap),this._r3Injector=rR(t,e,[{provide:OA,useValue:this},{provide:Qg,useValue:this.componentFactoryResolver}],Ko(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Qb extends QI{constructor(t){super(),this.moduleType=t}create(t){return new xa(this.moduleType,t)}}function gO(r,t,e,a,d,m){const b=t+e;return qo(r,b,d)?function ip(r,t,e){return r[t]=e}(r,b+1,m?a.call(m,d):a(d)):function up(r,t){const e=r[t];return e===ci?void 0:e}(r,b+1)}function rN(r,t,e){const a=r+22,d=yn(),m=im(d,a);return function fh(r,t){return r[1].data[t].pure}(d,a)?gO(d,function ea(){const r=ai.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,m.transform,e,m):m.transform(e)}function zI(r){return t=>{setTimeout(r,void 0,t)}}const Zi=class xA extends St{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,a){let d=t,m=e||(()=>null),b=a;if(t&&"object"==typeof t){const M=t;d=M.next?.bind(M),m=M.error?.bind(M),b=M.complete?.bind(M)}this.__isAsync&&(m=zI(m),d&&(d=zI(d)),b&&(b=zI(b)));const T=super.subscribe({next:d,error:m,complete:b});return t instanceof H&&t.add(T),T}};function sN(){return this._results[Dm()]()}class ud{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Dm(),a=ud.prototype;a[e]||(a[e]=sN)}get changes(){return this._changes||(this._changes=new Zi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const a=this;a.dirty=!1;const d=su(t);(this._changesDetected=!function zS(r,t,e){if(r.length!==t.length)return!1;for(let a=0;a<r.length;a++){let d=r[a],m=t[a];if(e&&(d=e(d),m=e(m)),m!==d)return!1}return!0}(a._results,d,e))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tl=(()=>{class r{}return r.__NG_ELEMENT_ID__=cN,r})();const FB=tl,aN=class extends FB{constructor(t,e,a){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=a}createEmbeddedView(t,e){const a=this._declarationTContainer.tViews,d=pf(this._declarationLView,a,t,16,null,a.declTNode,null,null,null,null,e||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(a)),$C(a,d,t),new Rm(d)}};function cN(){return Kb(Xa(),yn())}function Kb(r,t){return 4&r.type?new aN(t,r,Sm(r,t)):null}let nl=(()=>{class r{}return r.__NG_ELEMENT_ID__=UB,r})();function UB(){return m_(Xa(),yn())}const zb=nl,YI=class extends zb{constructor(t,e,a){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=a}get element(){return Sm(this._hostTNode,this._hostLView)}get injector(){return new jh(this._hostTNode,this._hostLView)}get parentInjector(){const t=Hs(this._hostTNode,this._hostLView);if(pE(t)){const e=GS(t,this._hostLView),a=fE(t);return new jh(e[1].data[a+8],e)}return new jh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Yb(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,a){let d,m;"number"==typeof a?d=a:null!=a&&(d=a.index,m=a.injector);const b=t.createEmbeddedView(e||{},m);return this.insert(b,d),b}createComponent(t,e,a,d,m){const b=t&&!function Fc(r){return"function"==typeof r}(t);let T;if(b)T=e;else{const _e=e||{};T=_e.index,a=_e.injector,d=_e.projectableNodes,m=_e.environmentInjector||_e.ngModuleRef}const M=b?t:new Zv(so(t)),j=a||this.parentInjector;if(!m&&null==M.ngModule){const Ue=(b?j:this.parentInjector).get(af,null);Ue&&(m=Ue)}const re=M.create(j,d,void 0,m);return this.insert(re.hostView,T),re}insert(t,e){const a=t._lView,d=a[1];if(function r2(r){return Ls(r[3])}(a)){const re=this.indexOf(t);if(-1!==re)this.detach(re);else{const _e=a[3],Ue=new YI(_e,_e[6],_e[3]);Ue.detach(Ue.indexOf(t))}}const m=this._adjustIndex(e),b=this._lContainer;!function ME(r,t,e,a){const d=10+a,m=e.length;a>0&&(e[d-1][4]=t),a<m-10?(t[4]=e[d],kg(e,10+a,t)):(e.push(t),t[4]=null),t[3]=e;const b=t[17];null!==b&&e!==b&&function Dv(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(b,t);const T=t[19];null!==T&&T.insertView(r),t[2]|=64}(d,a,b,m);const T=gC(m,b),M=a[11],j=Xd(M,b[7]);return null!==j&&function du(r,t,e,a,d,m){a[0]=d,a[6]=t,xv(r,a,e,1,d,m)}(d,b[6],M,a,j,T),t.attachToViewContainerRef(),kg(qb(b),m,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Yb(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),a=Gu(this._lContainer,e);a&&(Ev(qb(this._lContainer),e),Kh(a[1],a))}detach(t){const e=this._adjustIndex(t,-1),a=Gu(this._lContainer,e);return a&&null!=Ev(qb(this._lContainer),e)?new Rm(a):null}_adjustIndex(t,e=0){return t??this.length+e}};function Yb(r){return r[8]}function qb(r){return r[8]||(r[8]=[])}function m_(r,t){let e;const a=t[r.index];if(Ls(a))e=a;else{let d;if(8&r.type)d=Da(a);else{const m=t[11];d=m.createComment("");const b=yc(r,t);_m(m,Xd(m,b),d,function kT(r,t){return r.nextSibling(t)}(m,b),!1)}t[r.index]=e=rI(a,t,d,r),ub(t,e)}return new YI(e,r,t)}class g_{constructor(t){this.queryList=t,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class ld{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const a=null!==t.contentQueries?t.contentQueries[0]:e.length,d=[];for(let m=0;m<a;m++){const b=e.getByIndex(m);d.push(this.queries[b.indexInDeclarationView].clone())}return new ld(d)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==hp(t,e).matches&&this.queries[e].setDirty()}}class $b{constructor(t,e,a=null){this.predicate=t,this.flags=e,this.read=a}}class qI{constructor(t=[]){this.queries=t}elementStart(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let a=0;a<this.length;a++){const d=null!==e?e.length:0,m=this.getByIndex(a).embeddedTView(t,d);m&&(m.indexInDeclarationView=a,null!==e?e.push(m):e=[m])}return null!==e?new qI(e):null}template(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Xb{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Xb(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let a=t.parent;for(;null!==a&&8&a.type&&a.index!==e;)a=a.parent;return e===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const m=a[d];this.matchTNodeWithReadOption(t,e,VB(e,m)),this.matchTNodeWithReadOption(t,e,Uh(e,t,m,!1,!1))}else a===tl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Uh(e,t,a,!1,!1))}matchTNodeWithReadOption(t,e,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Oi||d===nl||d===tl&&4&e.type)this.addMatch(e.index,-2);else{const m=Uh(e,t,d,!1,!1);null!==m&&this.addMatch(e.index,m)}else this.addMatch(e.index,a)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function VB(r,t){const e=r.localNames;if(null!==e)for(let a=0;a<e.length;a+=2)if(e[a]===t)return e[a+1];return null}function JI(r,t,e,a){return-1===e?function yO(r,t){return 11&r.type?Sm(r,t):4&r.type?Kb(r,t):null}(t,r):-2===e?function uN(r,t,e){return e===Oi?Sm(t,r):e===tl?Kb(t,r):e===nl?m_(t,r):void 0}(r,t,a):qd(r,r[1],e,t)}function lN(r,t,e,a){const d=t[19].queries[a];if(null===d.matches){const m=r.data,b=e.matches,T=[];for(let M=0;M<b.length;M+=2){const j=b[M];T.push(j<0?null:JI(t,m[j],b[M+1],e.metadata.read))}d.matches=T}return d.matches}function __(r,t,e,a){const d=r.queries.getByIndex(e),m=d.matches;if(null!==m){const b=lN(r,t,d,e);for(let T=0;T<m.length;T+=2){const M=m[T];if(M>0)a.push(b[T/2]);else{const j=m[T+1],re=t[-M];for(let _e=10;_e<re.length;_e++){const Ue=re[_e];Ue[17]===Ue[3]&&__(Ue[1],Ue,j,a)}if(null!==re[9]){const _e=re[9];for(let Ue=0;Ue<_e.length;Ue++){const Ge=_e[Ue];__(Ge[1],Ge,j,a)}}}}}return a}function Co(r){const t=yn(),e=Hi(),a=Tg();od(a+1);const d=hp(e,a);if(r.dirty&&function n2(r){return 4==(4&r[2])}(t)===(2==(2&d.metadata.flags))){if(null===d.matches)r.reset([]);else{const m=d.crossesNgTemplate?__(e,t,a,[]):lN(e,t,d,a);r.reset(m,G2),r.notifyOnChanges()}return!0}return!1}function Kc(r,t,e){const a=Hi();a.firstCreatePass&&(LA(a,new $b(r,t,e),-1),2==(2&t)&&(a.staticViewQueries=!0)),dp(a,yn(),t)}function ra(r,t,e,a){const d=Hi();if(d.firstCreatePass){const m=Xa();LA(d,new $b(t,e,a),m.index),function Zb(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(d,r),2==(2&e)&&(d.staticContentQueries=!0)}dp(d,yn(),e)}function eo(){return function EO(r,t){return r[19].queries[t].queryList}(yn(),Tg())}function dp(r,t,e){const a=new ud(4==(4&e));cB(r,t,a,a.destroy),null===t[19]&&(t[19]=new ld),t[19].queries.push(new g_(a))}function LA(r,t,e){null===r.queries&&(r.queries=new qI),r.queries.track(new Xb(t,e))}function hp(r,t){return r.queries.getByIndex(t)}function pp(r,t){return Kb(r,t)}function jA(...r){}const uw=new Hn("Application Initializer");let QA=(()=>{class r{constructor(e){this.appInits=e,this.resolve=jA,this.reject=jA,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const e=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(sA(m))e.push(m);else if(_b(m)){const b=new Promise((T,M)=>{m.subscribe({complete:T,error:M})});e.push(b)}}Promise.all(e).then(()=>{a()}).catch(d=>{this.reject(d)}),0===e.length&&a(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(rn(uw,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const E_=new Hn("AppId",{providedIn:"root",factory:function NO(){return`${MO()}${MO()}${MO()}`}});function MO(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const SN=new Hn("Platform Initializer"),lw=new Hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WB=new Hn("appBootstrapListener"),Ki=new Hn("AnimationModuleType"),bu=new Hn("LocaleId",{providedIn:"root",factory:()=>ma(bu,Xr.Optional|Xr.SkipSelf)||function zc(){return typeof $localize<"u"&&$localize.locale||Gc}()}),o0=(()=>Promise.resolve(0))();function Os(r){typeof Zone>"u"?o0.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class oi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zi(!1),this.onMicrotaskEmpty=new Zi(!1),this.onStable=new Zi(!1),this.onError=new Zi(!1),typeof Zone>"u")throw new vn(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&e,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function S_(){let r=es.requestAnimationFrame,t=es.cancelAnimationFrame;if(typeof Zone<"u"&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const a=t[Zone.__symbol__("OriginalDelegate")];a&&(t=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function YB(r){const t=()=>{!function Ym(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(es,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,BO(r),r.isCheckStableRunning=!0,LO(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),BO(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,a,d,m,b,T)=>{try{return La(r),e.invokeTask(d,m,b,T)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||r.shouldCoalesceRunChangeDetection)&&t(),qm(r)}},onInvoke:(e,a,d,m,b,T,M)=>{try{return La(r),e.invoke(d,m,b,T,M)}finally{r.shouldCoalesceRunChangeDetection&&t(),qm(r)}},onHasTask:(e,a,d,m)=>{e.hasTask(d,m),a===d&&("microTask"==m.change?(r._hasPendingMicrotasks=m.microTask,BO(r),LO(r)):"macroTask"==m.change&&(r.hasPendingMacrotasks=m.macroTask))},onHandleError:(e,a,d,m)=>(e.handleError(d,m),r.runOutsideAngular(()=>r.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oi.isInAngularZone())throw new vn(909,!1)}static assertNotInAngularZone(){if(oi.isInAngularZone())throw new vn(909,!1)}run(t,e,a){return this._inner.run(t,e,a)}runTask(t,e,a,d){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+d,t,wN,jA,jA);try{return m.runTask(b,e,a)}finally{m.cancelTask(b)}}runGuarded(t,e,a){return this._inner.runGuarded(t,e,a)}runOutsideAngular(t){return this._outer.run(t)}}const wN={};function LO(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function BO(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function La(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function qm(r){r._nesting--,LO(r)}class HA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zi,this.onMicrotaskEmpty=new Zi,this.onStable=new Zi,this.onError=new Zi}run(t,e,a){return t.apply(e,a)}runGuarded(t,e,a){return t.apply(e,a)}runOutsideAngular(t){return t()}runTask(t,e,a,d){return t.apply(e,a)}}const s0=new Hn(""),a0=new Hn("");let C_,c0=(()=>{class r{constructor(e,a,d){this._ngZone=e,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,C_||(function dw(r){C_=r}(d),d.addToWindow(a)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oi.assertNotInAngularZone(),Os(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Os(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(e)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,a,d){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),e(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:e,timeoutId:m,updateCb:d})}whenStable(e,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,a,d){return[]}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(ac),rn(a0))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})(),ac=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,a){this._applications.set(e,a)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,a=!0){return C_?.findTestabilityInTree(this,e,a)??null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Rc=null;const hw=new Hn("AllowMultipleToken"),u0=new Hn("PlatformDestroyListeners");function ON(r,t,e=[]){const a=`Platform: ${t}`,d=new Hn(a);return(m=[])=>{let b=l0();if(!b||b.injector.get(hw,!1)){const T=[...e,...m,{provide:d,useValue:!0}];r?r(T):function UO(r){if(Rc&&!Rc.get(hw,!1))throw new vn(400,!1);Rc=r;const t=r.get(fw);(function GA(r){const t=r.get(SN,null);t&&t.forEach(e=>e())})(r)}(function I_(r=[],t){return ic.create({name:t,providers:[{provide:$h,useValue:"platform"},{provide:u0,useValue:new Set([()=>Rc=null])},...r]})}(T,a))}return function qB(r){const t=l0();if(!t)throw new vn(401,!1);return t}()}}function l0(){return Rc?.get(fw)??null}let fw=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,a){const d=function mw(r,t){let e;return e="noop"===r?new HA:("zone.js"===r?void 0:r)||new oi(t),e}(a?.ngZone,function WA(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(a)),m=[{provide:oi,useValue:d}];return d.run(()=>{const b=ic.create({providers:m,parent:this.injector,name:e.moduleType.name}),T=e.create(b),M=T.injector.get(Yu,null);if(!M)throw new vn(402,!1);return d.runOutsideAngular(()=>{const j=d.onError.subscribe({next:re=>{M.handleError(re)}});T.onDestroy(()=>{KA(this._modules,T),j.unsubscribe()})}),function QO(r,t,e){try{const a=e();return sA(a)?a.catch(d=>{throw t.runOutsideAngular(()=>r.handleError(d)),d}):a}catch(a){throw t.runOutsideAngular(()=>r.handleError(a)),a}}(M,d,()=>{const j=T.injector.get(QA);return j.runInitializers(),j.donePromise.then(()=>(function Sf(r){zo(r,"Expected localeId to be defined"),"string"==typeof r&&(CA=r.toLowerCase().replace(/_/g,"-"))}(T.injector.get(bu,Gc)||Gc),this._moduleDoBootstrap(T),T))})})}bootstrapModule(e,a=[]){const d=Ea({},a);return function TN(r,t,e){const a=new Qb(e);return Promise.resolve(a)}(0,0,e).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(e){const a=e.injector.get(hd);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!e.instance.ngDoBootstrap)throw new vn(403,!1);e.instance.ngDoBootstrap(a)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new vn(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const e=this._injector.get(u0,null);e&&(e.forEach(a=>a()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(rn(ic))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Ea(r,t){return Array.isArray(t)?t.reduce(Ea,r):{...r,...t}}let hd=(()=>{class r{constructor(e,a,d){this._zone=e,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new $e(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new $e(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{oi.assertNotInAngularZone(),Os(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{oi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),j.unsubscribe()}});this.isStable=No(m,b.pipe(Zl()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,a){const d=e instanceof YT;if(!this._injector.get(QA).done)throw!d&&function jd(r){const t=so(r)||fo(r)||ou(r);return null!==t&&t.standalone}(e),new vn(405,false);let b;b=d?e:this._injector.get(Qg).resolveComponentFactory(e),this.componentTypes.push(b.componentType);const T=function RN(r){return r.isBoundToModule}(b)?void 0:this._injector.get(OA),j=b.create(ic.NULL,[],a||b.selector,T),re=j.location.nativeElement,_e=j.injector.get(s0,null);return _e?.registerApplication(re),j.onDestroy(()=>{this.detachView(j.hostView),KA(this.components,j),_e?.unregisterApplication(re)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new vn(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const a=e;this._views.push(a),a.attachToAppRef(this)}detachView(e){const a=e;KA(this._views,a),a.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(WB,[]).concat(this._bootstrapListeners).forEach(d=>d(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>KA(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new vn(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(af),rn(Yu))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function KA(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}let pd=(()=>{class r{}return r.__NG_ELEMENT_ID__=_w,r})();function _w(r){return function vw(r,t,e){if(Bp(r)&&!e){const a=$a(r.index,t);return new Rm(a,a)}return 47&r.type?new Rm(t[16],t):null}(Xa(),yn(),16==(16&r))}class JO{constructor(){}supports(t){return Et(t)}create(t){return new DN(t)}}const $O=(r,t)=>t;class DN{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||$O}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,a=this._removalsHead,d=0,m=null;for(;e||a;){const b=!a||e&&e.currentIndex<ZO(a,d,m)?e:a,T=ZO(b,d,m),M=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(e=e._next,null==b.previousIndex)d++;else{m||(m=[]);const j=T-d,re=M-d;if(j!=re){for(let Ue=0;Ue<j;Ue++){const Ge=Ue<m.length?m[Ue]:m[Ue]=0,st=Ge+Ue;re<=st&&st<j&&(m[Ue]=Ge+1)}m[b.previousIndex]=re-j}}T!==M&&t(b,T,M)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Et(t))throw new vn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let d,m,b,e=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let T=0;T<this.length;T++)m=t[T],b=this._trackByFn(T,m),null!==e&&Object.is(e.trackById,b)?(a&&(e=this._verifyReinsertion(e,m,b,T)),Object.is(e.item,m)||this._addIdentityChange(e,m)):(e=this._mismatch(e,m,b,T),a=!0),e=e._next}else d=0,function hB(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[Dm()]();let a;for(;!(a=e.next()).done;)t(a.value)}}(t,T=>{b=this._trackByFn(d,T),null!==e&&Object.is(e.trackById,b)?(a&&(e=this._verifyReinsertion(e,T,b,d)),Object.is(e.item,T)||this._addIdentityChange(e,T)):(e=this._mismatch(e,T,b,d),a=!0),e=e._next,d++}),this.length=d;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,a,d){let m;return null===t?m=this._itTail:(m=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,m,d)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,m,d)):t=this._addAfter(new XO(e,a),m,d),t}_verifyReinsertion(t,e,a,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?t=this._reinsertAfter(m,t._prev,d):t.currentIndex!=d&&(t.currentIndex=d,this._addToMoves(t,d)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const d=t._prevRemoved,m=t._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(t,e,a),this._addToMoves(t,a),t}_moveAfter(t,e,a){return this._unlink(t),this._insertAfter(t,e,a),this._addToMoves(t,a),t}_addAfter(t,e,a){return this._insertAfter(t,e,a),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,a){const d=null===e?this._itHead:e._next;return t._next=d,t._prev=e,null===d?this._itTail=t:d._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new p0),this._linkedRecords.put(t),t.currentIndex=a,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,a=t._next;return null===e?this._itHead=a:e._next=a,null===a?this._itTail=e:a._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new p0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class XO{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kN{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===e||e<=a.currentIndex)&&Object.is(a.trackById,t))return a;return null}remove(t){const e=t._prevDup,a=t._nextDup;return null===e?this._head=a:e._nextDup=a,null===a?this._tail=e:a._prevDup=e,null===this._head}}class p0{constructor(){this.map=new Map}put(t){const e=t.trackById;let a=this.map.get(e);a||(a=new kN,this.map.set(e,a)),a.add(t)}get(t,e){const d=this.map.get(t);return d?d.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZO(r,t,e){const a=r.previousIndex;if(null===a)return a;let d=0;return e&&a<e.length&&(d=e[a]),a+t+d}class eD{constructor(){}supports(t){return t instanceof Map||mI(t)}create(){return new ww}}class ww{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mI(t)))throw new vn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(a,d)=>{if(e&&e.key===d)this._maybeAddToChanges(e,a),this._appendAfter=e,e=e._next;else{const m=this._getOrCreateRecordForKey(d,a);e=this._insertBeforeOrAppend(e,m)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let a=e;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const a=t._prev;return e._next=t,e._prev=a,t._prev=e,a&&(a._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const d=this._records.get(t);this._maybeAddToChanges(d,e);const m=d._prev,b=d._next;return m&&(m._next=b),b&&(b._prev=m),d._next=null,d._prev=null,d}const a=new PN(t);return this._records.set(t,a),a.currentValue=e,this._addToAdditions(a),a}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(a=>e(t[a],a))}}class PN{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function f0(){return new m0([new JO])}let m0=(()=>{class r{constructor(e){this.factories=e}static create(e,a){if(null!=a){const d=a.factories.slice();e=e.concat(d)}return new r(e)}static extend(e){return{provide:r,useFactory:a=>r.create(e,a||f0()),deps:[[r,new Iv,new Uc]]}}find(e){const a=this.factories.find(d=>d.supports(e));if(null!=a)return a;throw new vn(901,!1)}}return r.\u0275prov=fr({token:r,providedIn:"root",factory:f0}),r})();function Tw(){return new $A([new eD])}let $A=(()=>{class r{constructor(e){this.factories=e}static create(e,a){if(a){const d=a.factories.slice();e=e.concat(d)}return new r(e)}static extend(e){return{provide:r,useFactory:a=>r.create(e,a||Tw()),deps:[[r,new Iv,new Uc]]}}find(e){const a=this.factories.find(d=>d.supports(e));if(a)return a;throw new vn(901,!1)}}return r.\u0275prov=fr({token:r,providedIn:"root",factory:Tw}),r})();const xN=ON(null,"core",[]);let tD=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(rn(hd))},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})(),R_=null;function _h(){return R_}class Rw{}const bi=new Hn("DocumentToken");let Ow=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:function(){return function Jt(){return rn(rl)}()},providedIn:"platform"}),r})(),rl=(()=>{class r extends Ow{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _h().getBaseHref(this._doc)}onPopState(e){const a=_h().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",e,!1),()=>a.removeEventListener("popstate",e)}onHashChange(e){const a=_h().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",e,!1),()=>a.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,a,d){Pf()?this._history.pushState(e,a,d):this.location.hash=d}replaceState(e,a,d){Pf()?this._history.replaceState(e,a,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:function(){return function fF(){return new rl(rn(bi))}()},providedIn:"platform"}),r})();function Pf(){return!!window.history.pushState}function nD(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function g0(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function Nl(r){return r&&"?"!==r[0]?"?"+r:r}let _0=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:function(){return ma(rD)},providedIn:"root"}),r})();const il=new Hn("appBaseHref");let rD=(()=>{class r extends _0{constructor(e,a){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=a??this._platformLocation.getBaseHrefFromDOM()??ma(bi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return nD(this._baseHref,e)}path(e=!1){const a=this._platformLocation.pathname+Nl(this._platformLocation.search),d=this._platformLocation.hash;return d&&e?`${a}${d}`:a}pushState(e,a,d,m){const b=this.prepareExternalUrl(d+Nl(m));this._platformLocation.pushState(e,a,b)}replaceState(e,a,d,m){const b=this.prepareExternalUrl(d+Nl(m));this._platformLocation.replaceState(e,a,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(Ow),rn(il,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),FN=(()=>{class r{constructor(e){this._subject=new Zi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const a=this._locationStrategy.getBaseHref();this._baseHref=g0(vh(a)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,a=""){return this.path()==this.normalize(e+Nl(a))}normalize(e){return r.stripTrailingSlash(function mF(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,vh(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,a="",d=null){this._locationStrategy.pushState(d,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nl(a)),d)}replaceState(e,a="",d=null){this._locationStrategy.replaceState(d,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nl(a)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)})),()=>{const a=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(a,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",a){this._urlChangeListeners.forEach(d=>d(e,a))}subscribe(e,a,d){return this._subject.subscribe({next:e,error:a,complete:d})}}return r.normalizeQueryParams=Nl,r.joinWithSlash=nD,r.stripTrailingSlash=g0,r.\u0275fac=function(e){return new(e||r)(rn(_0))},r.\u0275prov=fr({token:r,factory:function(){return function v0(){return new FN(rn(_0))}()},providedIn:"root"}),r})();function vh(r){return r.replace(/\/index.html$/,"")}function uD(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const a=e.indexOf("="),[d,m]=-1==a?[e,""]:[e.slice(0,a),e.slice(a+1)];if(d.trim()===t)return decodeURIComponent(m)}return null}let Lw=(()=>{class r{constructor(e,a,d,m){this._iterableDiffers=e,this._keyValueDiffers=a,this._ngEl=d,this._renderer=m,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Et(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachChangedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachRemovedItem(a=>{a.previousValue&&this._toggleClass(a.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(a=>{if("string"!=typeof a.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ko(a.item)}`);this._toggleClass(a.item,!0)}),e.forEachRemovedItem(a=>this._toggleClass(a.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!0)):Object.keys(e).forEach(a=>this._toggleClass(a,!!e[a])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!1)):Object.keys(e).forEach(a=>this._toggleClass(a,!1)))}_toggleClass(e,a){(e=e.trim())&&e.split(/\s+/g).forEach(d=>{a?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return r.\u0275fac=function(e){return new(e||r)(yt(m0),yt($A),yt(Oi),yt(pu))},r.\u0275dir=pr({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class Bw{constructor(t,e,a,d){this.$implicit=t,this.ngForOf=e,this.index=a,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _d=(()=>{class r{constructor(e,a,d){this._viewContainer=e,this._template=a,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const a=this._viewContainer;e.forEachOperation((d,m,b)=>{if(null==d.previousIndex)a.createEmbeddedView(this._template,new Bw(d.item,this._ngForOf,-1,-1),null===b?void 0:b);else if(null==b)a.remove(null===m?void 0:m);else if(null!==m){const T=a.get(m);a.move(T,b),XN(T,d)}});for(let d=0,m=a.length;d<m;d++){const T=a.get(d).context;T.index=d,T.count=m,T.ngForOf=this._ngForOf}e.forEachIdentityChange(d=>{XN(a.get(d.currentIndex),d)})}static ngTemplateContextGuard(e,a){return!0}}return r.\u0275fac=function(e){return new(e||r)(yt(nl),yt(tl),yt(m0))},r.\u0275dir=pr({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function XN(r,t){r.context.$implicit=t.item}let Oc=(()=>{class r{constructor(e,a){this._viewContainer=e,this._context=new Ep,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Uo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Uo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,a){return!0}}return r.\u0275fac=function(e){return new(e||r)(yt(nl),yt(tl))},r.\u0275dir=pr({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class Ep{constructor(){this.$implicit=null,this.ngIf=null}}function Uo(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Ko(t)}'.`)}class Fw{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let w0=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const a=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||a,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),a}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let a=0;a<this._defaultViews.length;a++)this._defaultViews[a].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),r})(),hy=(()=>{class r{constructor(e,a,d){this.ngSwitch=d,d._addCase(),this._view=new Fw(e,a)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(yt(nl),yt(tl),yt(w0,9))},r.\u0275dir=pr({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),r})(),dD=(()=>{class r{constructor(e,a,d){d._addDefault(new Fw(e,a))}}return r.\u0275fac=function(e){return new(e||r)(yt(nl),yt(tl),yt(w0,9))},r.\u0275dir=pr({type:r,selectors:[["","ngSwitchDefault",""]],standalone:!0}),r})(),Vw=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const a=this._viewContainerRef;if(this._viewRef&&a.remove(a.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:m,ngTemplateOutletInjector:b}=this;this._viewRef=a.createEmbeddedView(d,m,b?{injector:b}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(e){return new(e||r)(yt(nl))},r.\u0275dir=pr({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Al]}),r})(),ps=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const Dc="browser";class Sh{}class C extends Rw{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class I extends C{static makeCurrent(){!function BN(r){R_||(R_=r)}(new I)}onAndCancel(t,e,a){return t.addEventListener(e,a,!1),()=>{t.removeEventListener(e,a,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function D(){return O=O||document.querySelector("base"),O?O.getAttribute("href"):null}();return null==e?null:function P(r){B=B||document.createElement("a"),B.setAttribute("href",r);const t=B.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){O=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return uD(document.cookie,t)}}let B,O=null;const F=new Hn("TRANSITION_ID"),ie=[{provide:uw,useFactory:function Z(r,t,e){return()=>{e.get(QA).donePromise.then(()=>{const a=_h(),d=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let m=0;m<d.length;m++)a.remove(d[m])})}},deps:[F,bi,ic],multi:!0}];let ve=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();const Ae=new Hn("EventManagerPlugins");let Te=(()=>{class r{constructor(e,a){this._zone=a,this._eventNameToPlugin=new Map,e.forEach(d=>d.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,a,d){return this._findPluginFor(a).addEventListener(e,a,d)}addGlobalEventListener(e,a,d){return this._findPluginFor(a).addGlobalEventListener(e,a,d)}getZone(){return this._zone}_findPluginFor(e){const a=this._eventNameToPlugin.get(e);if(a)return a;const d=this._plugins;for(let m=0;m<d.length;m++){const b=d[m];if(b.supports(e))return this._eventNameToPlugin.set(e,b),b}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(rn(Ae),rn(oi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();class Be{constructor(t){this._doc=t}addGlobalEventListener(t,e,a){const d=_h().getGlobalEventTarget(this._doc,t);if(!d)throw new Error(`Unsupported event target ${d} for event ${e}`);return this.addEventListener(d,e,a)}}let Q=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const a=new Set;e.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),a.add(d))}),this.onStylesAdded(a)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})(),tt=(()=>{class r extends Q{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,a,d){e.forEach(m=>{const b=this._doc.createElement("style");b.textContent=m,d.push(a.appendChild(b))})}addHost(e){const a=[];this._addStylesToHost(this._stylesSet,e,a),this._hostNodes.set(e,a)}removeHost(e){const a=this._hostNodes.get(e);a&&a.forEach(dt),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((a,d)=>{this._addStylesToHost(e,d,a)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(dt))}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();function dt(r){_h().remove(r)}const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ft=/%COMP%/g;function Dt(r,t,e){for(let a=0;a<t.length;a++){let d=t[a];Array.isArray(d)?Dt(r,d,e):(d=d.replace(ft,r),e.push(d))}return e}function at(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let nt=(()=>{class r{constructor(e,a,d){this.eventManager=e,this.sharedStylesHost=a,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new Tt(e)}createRenderer(e,a){if(!e||!a)return this.defaultRenderer;switch(a.encapsulation){case qa.Emulated:{let d=this.rendererByCompId.get(a.id);return d||(d=new Tn(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,d)),d.applyToHost(e),d}case 1:case qa.ShadowDom:return new Yn(this.eventManager,this.sharedStylesHost,e,a);default:if(!this.rendererByCompId.has(a.id)){const d=Dt(a.id,a.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(rn(Te),rn(tt),rn(E_))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();class Tt{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(it[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Yt(t)?t.content:t).appendChild(e)}insertBefore(t,e,a){t&&(Yt(t)?t.content:t).insertBefore(e,a)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let a="string"==typeof t?document.querySelector(t):t;if(!a)throw new Error(`The selector "${t}" did not match any elements`);return e||(a.textContent=""),a}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,a,d){if(d){e=d+":"+e;const m=it[d];m?t.setAttributeNS(m,e,a):t.setAttribute(e,a)}else t.setAttribute(e,a)}removeAttribute(t,e,a){if(a){const d=it[a];d?t.removeAttributeNS(d,e):t.removeAttribute(`${a}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,a,d){d&(uu.DashCase|uu.Important)?t.style.setProperty(e,a,d&uu.Important?"important":""):t.style[e]=a}removeStyle(t,e,a){a&uu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,a){t[e]=a}setValue(t,e){t.nodeValue=e}listen(t,e,a){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,at(a)):this.eventManager.addEventListener(t,e,at(a))}}function Yt(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class Tn extends Tt{constructor(t,e,a,d){super(t),this.component=a;const m=Dt(d+"-"+a.id,a.styles,[]);e.addStyles(m),this.contentAttr=function _n(r){return"_ngcontent-%COMP%".replace(ft,r)}(d+"-"+a.id),this.hostAttr=function Gn(r){return"_nghost-%COMP%".replace(ft,r)}(d+"-"+a.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const a=super.createElement(t,e);return super.setAttribute(a,this.contentAttr,""),a}}class Yn extends Tt{constructor(t,e,a,d){super(t),this.sharedStylesHost=e,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=Dt(d.id,d.styles,[]);for(let b=0;b<m.length;b++){const T=document.createElement("style");T.textContent=m[b],this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,a){return super.insertBefore(this.nodeOrShadowRoot(t),e,a)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let wt=(()=>{class r extends Be{constructor(e){super(e)}supports(e){return!0}addEventListener(e,a,d){return e.addEventListener(a,d,!1),()=>this.removeEventListener(e,a,d)}removeEventListener(e,a,d){return e.removeEventListener(a,d)}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();const Sa=["alt","control","meta","shift"],Wn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},no={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let Ys=(()=>{class r extends Be{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,a,d){const m=r.parseEventName(a),b=r.eventCallback(m.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_h().onAndCancel(e,m.domEventName,b))}static parseEventName(e){const a=e.toLowerCase().split("."),d=a.shift();if(0===a.length||"keydown"!==d&&"keyup"!==d)return null;const m=r._normalizeKey(a.pop());let b="",T=a.indexOf("code");if(T>-1&&(a.splice(T,1),b="code."),Sa.forEach(j=>{const re=a.indexOf(j);re>-1&&(a.splice(re,1),b+=j+".")}),b+=m,0!=a.length||0===m.length)return null;const M={};return M.domEventName=d,M.fullKey=b,M}static matchEventFullKeyCode(e,a){let d=Wn[e.key]||e.key,m="";return a.indexOf("code.")>-1&&(d=e.code,m="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),Sa.forEach(b=>{b!==d&&(0,no[b])(e)&&(m+=b+".")}),m+=d,m===a)}static eventCallback(e,a,d){return m=>{r.matchEventFullKeyCode(m,e)&&d.runGuarded(()=>a(m))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();const qn=ON(xN,"browser",[{provide:lw,useValue:Dc},{provide:SN,useValue:function Bt(){I.makeCurrent()},multi:!0},{provide:bi,useFactory:function on(){return function BT(r){va=r}(document),document},deps:[]}]),cr=new Hn(""),ri=[{provide:a0,useClass:class oe{addToWindow(t){es.getAngularTestability=(a,d=!0)=>{const m=t.findTestabilityInTree(a,d);if(null==m)throw new Error("Could not find testability for element.");return m},es.getAllAngularTestabilities=()=>t.getAllTestabilities(),es.getAllAngularRootElements=()=>t.getAllRootElements(),es.frameworkStabilizers||(es.frameworkStabilizers=[]),es.frameworkStabilizers.push(a=>{const d=es.getAllAngularTestabilities();let m=d.length,b=!1;const T=function(M){b=b||M,m--,0==m&&a(b)};d.forEach(function(M){M.whenStable(T)})})}findTestabilityInTree(t,e,a){return null==e?null:t.getTestability(e)??(a?_h().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:s0,useClass:c0,deps:[oi,ac,a0]},{provide:c0,useClass:c0,deps:[oi,ac,a0]}],Yr=[{provide:$h,useValue:"root"},{provide:Yu,useFactory:function ot(){return new Yu},deps:[]},{provide:Ae,useClass:wt,multi:!0,deps:[bi,oi,lw]},{provide:Ae,useClass:Ys,multi:!0,deps:[bi]},{provide:nt,useClass:nt,deps:[Te,tt,E_]},{provide:cf,useExisting:nt},{provide:Q,useExisting:tt},{provide:tt,useClass:tt,deps:[bi]},{provide:Te,useClass:Te,deps:[Ae,oi]},{provide:Sh,useClass:ve,deps:[]},[]];let kr=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:E_,useValue:e.appId},{provide:F,useExisting:E_},ie]}}}return r.\u0275fac=function(e){return new(e||r)(rn(cr,12))},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[...Yr,...ri],imports:[ps,tD]}),r})();typeof window<"u"&&window;let MF=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:function(e){let a=null;return a=e?new(e||r):rn(w4),a},providedIn:"root"}),r})(),w4=(()=>{class r extends MF{constructor(e){super(),this._doc=e}sanitize(e,a){if(null==a)return null;switch(e){case $i.NONE:return a;case $i.HTML:return rc(a,"HTML")?Ku(a):VT(this._doc,String(a)).toString();case $i.STYLE:return rc(a,"Style")?Ku(a):a;case $i.SCRIPT:if(rc(a,"Script"))return Ku(a);throw new Error("unsafe value used in a script context");case $i.URL:return rc(a,"URL")?Ku(a):Bv(String(a));case $i.RESOURCE_URL:if(rc(a,"ResourceURL"))return Ku(a);throw new Error(`unsafe value used in a resource URL context (see ${Vy})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${Vy})`)}}bypassSecurityTrustHtml(e){return function Ks(r){return new yC(r)}(e)}bypassSecurityTrustStyle(e){return function HL(r){return new hr(r)}(e)}bypassSecurityTrustScript(e){return function Rs(r){return new nf(r)}(e)}bypassSecurityTrustUrl(e){return function T2(r){return new Kr(r)}(e)}bypassSecurityTrustResourceUrl(e){return function EC(r){return new Wu(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:function(e){let a=null;return a=e?new e:function I4(r){return new w4(r.get(bi))}(rn(ic)),a},providedIn:"root"}),r})();const{isArray:m7}=Array,{getPrototypeOf:T4,prototype:xF,keys:g7}=Object;function R4(r){if(1===r.length){const t=r[0];if(m7(t))return{args:t,keys:null};if(function O4(r){return r&&"object"==typeof r&&T4(r)===xF}(t)){const e=g7(t);return{args:e.map(a=>t[a]),keys:e}}}return{args:r,keys:null}}const{isArray:_7}=Array;function pM(r){return et(t=>function D4(r,t){return _7(t)?r(...t):r(t)}(r,t))}function F_(r,t){return r.reduce((e,a,d)=>(e[a]=t[d],e),{})}function LF(...r){const t=Uy(r),{args:e,keys:a}=R4(r),d=new $e(m=>{const{length:b}=e;if(!b)return void m.complete();const T=new Array(b);let M=b,j=b;for(let re=0;re<b;re++){let _e=!1;gn(e[re]).subscribe(new De(m,Ue=>{_e||(_e=!0,j--),T[re]=Ue},()=>M--,void 0,()=>{(!M||!_e)&&(j||m.next(a?F_(a,T):T),m.complete())}))}});return t?d.pipe(pM(t)):d}let k4=(()=>{class r{constructor(e,a){this._renderer=e,this._elementRef=a,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(e,a){this._renderer.setProperty(this._elementRef.nativeElement,e,a)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(yt(pu),yt(Oi))},r.\u0275dir=pr({type:r}),r})(),j0=(()=>{class r extends k4{}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Gs(r)))(a||r)}}(),r.\u0275dir=pr({type:r,features:[Lr]}),r})();const Zm=new Hn("NgValueAccessor"),A7={provide:Zm,useExisting:Zo(()=>e1),multi:!0},E7=new Hn("CompositionEventMode");let e1=(()=>{class r extends k4{constructor(e,a,d){super(e,a),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y7(){const r=_h()?_h().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(yt(pu),yt(Oi),yt(E7,8))},r.\u0275dir=pr({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,a){1&e&&co("input",function(m){return a._handleInput(m.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(m){return a._compositionEnd(m.target.value)})},features:[So([A7]),Lr]}),r})();function Uf(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function ja(r){return null!=r&&"number"==typeof r.length}const qr=new Hn("NgValidators"),eg=new Hn("NgAsyncValidators"),Jc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class t1{static min(t){return function fM(r){return t=>{if(Uf(t.value)||Uf(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function mM(r){return t=>{if(Uf(t.value)||Uf(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function vo(r){return Uf(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function UF(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function P4(r){return Uf(r.value)||Jc.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function N4(r){return t=>Uf(t.value)||!ja(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function VF(r){return t=>ja(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Yi(r){if(!r)return Ca;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),a=>{if(Uf(a.value))return null;const d=a.value;return t.test(d)?null:{pattern:{requiredPattern:e,actualValue:d}}}}(t)}static nullValidator(t){return null}static compose(t){return _M(t)}static composeAsync(t){return or(t)}}function Ca(r){return null}function gM(r){return null!=r}function M4(r){return sA(r)?gg(r):r}function x4(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Qa(r,t){return t.map(e=>e(r))}function jF(r){return r.map(t=>function jo(r){return!r.validate}(t)?t:e=>t.validate(e))}function _M(r){if(!r)return null;const t=r.filter(gM);return 0==t.length?null:function(e){return x4(Qa(e,t))}}function ur(r){return null!=r?_M(jF(r)):null}function or(r){if(!r)return null;const t=r.filter(gM);return 0==t.length?null:function(e){return LF(Qa(e,t).map(M4)).pipe(et(x4))}}function U_(r){return null!=r?or(jF(r)):null}function tg(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function Q0(r){return r._rawValidators}function n1(r){return r._rawAsyncValidators}function ll(r){return r?Array.isArray(r)?r:[r]:[]}function sa(r,t){return Array.isArray(r)?r.includes(t):r===t}function mr(r,t){const e=ll(t);return ll(r).forEach(d=>{sa(e,d)||e.push(d)}),e}function vM(r,t){return ll(t).filter(e=>!sa(r,e))}class aa{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ur(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=U_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class _r extends aa{get formDirective(){return null}get path(){return null}}class Ps extends aa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ca{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Du=(()=>{class r extends ca{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(yt(Ps,2))},r.\u0275dir=pr({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,a){2&e&&go("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[Lr]}),r})(),Li=(()=>{class r extends ca{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(yt(_r,10))},r.\u0275dir=pr({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,a){2&e&&go("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[Lr]}),r})();const wD="VALID",yM="INVALID",ku="PENDING",ng="DISABLED";function Po(r){return(uc(r)?r.validators:r)||null}function cc(r,t){return(uc(t)?t.asyncValidators:r)||null}function uc(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Ns{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===wD}get invalid(){return this.status===yM}get pending(){return this.status==ku}get disabled(){return this.status===ng}get enabled(){return this.status!==ng}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(mr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(vM(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(vM(t,this._rawAsyncValidators))}hasValidator(t){return sa(this._rawValidators,t)}hasAsyncValidator(t){return sa(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ku,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ng,this.errors=null,this._forEachChild(a=>{a.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wD,this._forEachChild(a=>{a.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wD||this.status===ku)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ng:wD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ku,this._hasOwnPendingAsyncValidator=!0;const e=M4(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((a,d)=>a&&a._find(d),this)}getError(t,e){const a=e?this.get(e):this;return a&&a.errors?a.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Zi,this.statusChanges=new Zi}_calculateStatus(){return this._allControlsDisabled()?ng:this.errors?yM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ku)?ku:this._anyControlsHaveStatus(yM)?yM:wD}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){uc(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function U4(r){return Array.isArray(r)?ur(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Vf(r){return Array.isArray(r)?U_(r):r||null}(this._rawAsyncValidators)}}class Qo extends Ns{constructor(t,e,a){super(Po(e),cc(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,a={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,a={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function ms(r,t,e){r._forEachChild((a,d)=>{if(void 0===e[d])throw new vn(1002,"")})})(this,0,t),Object.keys(t).forEach(a=>{(function V_(r,t,e){const a=r.controls;if(!(t?Object.keys(a):a).length)throw new vn(1e3,"");if(!a[e])throw new vn(1001,"")})(this,!0,a),this.controls[a].setValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(a=>{const d=this.controls[a];d&&d.patchValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((a,d)=>{a.reset(t[d],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,a)=>(t[a]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,a)=>!!a._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const a=this.controls[e];a&&t(a,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,a]of Object.entries(this.controls))if(this.contains(e)&&t(a))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,a,d)=>((a.enabled||this.disabled)&&(e[d]=a.value),e))}_reduceChildren(t,e){let a=t;return this._forEachChild((d,m)=>{a=e(a,d,m)}),a}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const lr=Qo,wh=new Hn("CallSetDisabledState",{providedIn:"root",factory:()=>j_}),j_="always";function r1(r,t,e=j_){RD(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(r.disabled),function j4(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Bn(r,t)})}(r,t),function bd(r,t){const e=(a,d)=>{t.valueAccessor.writeValue(a),d&&t.viewToModelUpdate(a)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function ti(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Bn(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function ua(r,t){if(t.valueAccessor.setDisabledState){const e=a=>{t.valueAccessor.setDisabledState(a)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function TD(r,t,e=!0){const a=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(a),t.valueAccessor.registerOnTouched(a)),yy(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function EM(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function RD(r,t){const e=Q0(r);null!==t.validator?r.setValidators(tg(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const a=n1(r);null!==t.asyncValidator?r.setAsyncValidators(tg(a,t.asyncValidator)):"function"==typeof a&&r.setAsyncValidators([a]);const d=()=>r.updateValueAndValidity();EM(t._rawValidators,d),EM(t._rawAsyncValidators,d)}function yy(r,t){let e=!1;if(null!==r){if(null!==t.validator){const d=Q0(r);if(Array.isArray(d)&&d.length>0){const m=d.filter(b=>b!==t.validator);m.length!==d.length&&(e=!0,r.setValidators(m))}}if(null!==t.asyncValidator){const d=n1(r);if(Array.isArray(d)&&d.length>0){const m=d.filter(b=>b!==t.asyncValidator);m.length!==d.length&&(e=!0,r.setAsyncValidators(m))}}}const a=()=>{};return EM(t._rawValidators,a),EM(t._rawAsyncValidators,a),e}function Bn(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function pi(r,t){RD(r,t)}function rs(r,t){r._syncPendingControls(),t.forEach(e=>{const a=e.control;"submit"===a.updateOn&&a._pendingChange&&(e.viewToModelUpdate(a._pendingValue),a._pendingChange=!1)})}const R7={provide:_r,useExisting:Zo(()=>DD)},OD=(()=>Promise.resolve())();let DD=(()=>{class r extends _r{constructor(e,a,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Zi,this.form=new Qo({},ur(e),U_(a))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){OD.then(()=>{const a=this._findContainer(e.path);e.control=a.registerControl(e.name,e.control),r1(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){OD.then(()=>{const a=this._findContainer(e.path);a&&a.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){OD.then(()=>{const a=this._findContainer(e.path),d=new Qo({});pi(d,e),a.registerControl(e.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){OD.then(()=>{const a=this._findContainer(e.path);a&&a.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,a){OD.then(()=>{this.form.get(e.path).setValue(a)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,rs(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(yt(qr,10),yt(eg,10),yt(wh,8))},r.\u0275dir=pr({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,a){1&e&&co("submit",function(m){return a.onSubmit(m)})("reset",function(){return a.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[So([R7]),Lr]}),r})();function zF(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function H4(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const YF=class extends Ns{constructor(t=null,e,a){super(Po(e),cc(a,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=H4(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){zF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){zF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){H4(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Ip=YF;let z4=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),kD=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const SM=new Hn("NgModelWithFormControlWarning"),IM={provide:_r,useExisting:Zo(()=>s1)};let s1=(()=>{class r extends _r{constructor(e,a,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Zi,this._setValidators(e),this._setAsyncValidators(a)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const a=this.form.get(e.path);return r1(a,e,this.callSetDisabledState),a.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),a}getControl(e){return this.form.get(e.path)}removeControl(e){TD(e.control||null,e,!1),function Zc(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,a){this.form.get(e.path).setValue(a)}onSubmit(e){return this.submitted=!0,rs(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const a=e.control,d=this.form.get(e.path);a!==d&&(TD(a||null,e),(r=>r instanceof YF)(d)&&(r1(d,e,this.callSetDisabledState),e.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const a=this.form.get(e.path);pi(a,e),a.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const a=this.form.get(e.path);a&&function dl(r,t){return yy(r,t)}(a,e)&&a.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RD(this.form,this),this._oldForm&&yy(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(yt(qr,10),yt(eg,10),yt(wh,8))},r.\u0275dir=pr({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,a){1&e&&co("submit",function(m){return a.onSubmit(m)})("reset",function(){return a.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[So([IM]),Lr,Al]}),r})();const F7={provide:Ps,useExisting:Zo(()=>e3)};let e3=(()=>{class r extends Ps{constructor(e,a,d,m,b){super(),this._ngModelWarningConfig=b,this._added=!1,this.update=new Zi,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(a),this._setAsyncValidators(d),this.valueAccessor=function kc(r,t){if(!t)return null;let e,a,d;return Array.isArray(t),t.forEach(m=>{m.constructor===e1?e=m:function Hl(r){return Object.getPrototypeOf(r.constructor)===j0}(m)?a=m:d=m}),d||a||e||null}(0,m)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function hl(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function li(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(yt(_r,13),yt(qr,10),yt(eg,10),yt(Zm,10),yt(SM,8))},r.\u0275dir=pr({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[So([F7]),Lr,Al]}),r})(),c3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[kD]}),r})(),i5=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:wh,useValue:e.callSetDisabledState??j_}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[c3]}),r})(),OM=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:SM,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:wh,useValue:e.callSetDisabledState??j_}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[c3]}),r})();var z7=$(1648),l3=$.n(z7),d3=$(3890),a5=$.n(d3),c5=$(6021);let h3;try{h3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{h3=!1}let Qf,eu=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function eM(r){return r===Dc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!h3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(rn(lw))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Sd=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const ND=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Hf(){if(Qf)return Qf;if("object"!=typeof document||!document)return Qf=new Set(ND),Qf;let r=document.createElement("input");return Qf=new Set(ND.filter(t=>(r.setAttribute("type",t),r.type===t))),Qf}let MD,H_,f3;function Pc(r){return function p3(){if(null==MD&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>MD=!0}))}finally{MD=MD||!1}return MD}()?r:!!r.capture}function K0(){if(null==H_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return H_=!1,H_;if("scrollBehavior"in document.documentElement.style)H_=!0;else{const r=Element.prototype.scrollTo;H_=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return H_}function z0(r){return r.composedPath?r.composedPath()[0]:r.target}function LD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Wl(...r){return gg(r,pg(r))}function Gf(r,t){return We((e,a)=>{let d=0;e.subscribe(new De(a,m=>r.call(t,m,d++)&&a.next(m)))})}class Y0{}class BD{}class rg{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const a=e.indexOf(":");if(a>0){const d=e.slice(0,a),m=d.toLowerCase(),b=e.slice(a+1).trim();this.maybeSetNormalizedName(d,m),this.headers.has(m)?this.headers.get(m).push(b):this.headers.set(m,[b])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let a=t[e];const d=e.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(this.headers.set(d,a),this.maybeSetNormalizedName(e,d))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof rg?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new rg;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof rg?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let a=t.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(t.name,e);const d=("a"===t.op?this.headers.get(e):void 0)||[];d.push(...a),this.headers.set(e,d);break;case"d":const m=t.value;if(m){let b=this.headers.get(e);if(!b)return;b=b.filter(T=>-1===m.indexOf(T)),0===b.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,b)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ig{encodeKey(t){return v3(t)}encodeValue(t){return v3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const J7=/%(\d[a-f0-9])/gi,_3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function v3(r){return encodeURIComponent(r).replace(J7,(t,e)=>_3[e]??t)}function u1(r){return`${r}`}class og{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ig,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Wf(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(d=>{const m=d.indexOf("="),[b,T]=-1==m?[t.decodeKey(d),""]:[t.decodeKey(d.slice(0,m)),t.decodeValue(d.slice(m+1))],M=e.get(b)||[];M.push(T),e.set(b,M)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const a=t.fromObject[e],d=Array.isArray(a)?a.map(u1):[u1(a)];this.map.set(e,d)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(a=>{const d=t[a];Array.isArray(d)?d.forEach(m=>{e.push({param:a,value:m,op:"a"})}):e.push({param:a,value:d,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(a=>e+"="+this.encoder.encodeValue(a)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new og({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(u1(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let a=this.map.get(t.param)||[];const d=a.indexOf(u1(t.value));-1!==d&&a.splice(d,1),a.length>0?this.map.set(t.param,a):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class l5{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function DM(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function A3(r){return typeof Blob<"u"&&r instanceof Blob}function by(r){return typeof FormData<"u"&&r instanceof FormData}class q0{constructor(t,e,a,d){let m;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function G_(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==a?a:null,m=d):m=a,m&&(this.reportProgress=!!m.reportProgress,this.withCredentials=!!m.withCredentials,m.responseType&&(this.responseType=m.responseType),m.headers&&(this.headers=m.headers),m.context&&(this.context=m.context),m.params&&(this.params=m.params)),this.headers||(this.headers=new rg),this.context||(this.context=new l5),this.params){const b=this.params.toString();if(0===b.length)this.urlWithParams=e;else{const T=e.indexOf("?");this.urlWithParams=e+(-1===T?"?":T<e.length-1?"&":"")+b}}else this.params=new og,this.urlWithParams=e}serializeBody(){return null===this.body?null:DM(this.body)||A3(this.body)||by(this.body)||function d5(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof og?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||by(this.body)?null:A3(this.body)?this.body.type||null:DM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof og?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,a=t.url||this.url,d=t.responseType||this.responseType,m=void 0!==t.body?t.body:this.body,b=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,T=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let M=t.headers||this.headers,j=t.params||this.params;const re=t.context??this.context;return void 0!==t.setHeaders&&(M=Object.keys(t.setHeaders).reduce((_e,Ue)=>_e.set(Ue,t.setHeaders[Ue]),M)),t.setParams&&(j=Object.keys(t.setParams).reduce((_e,Ue)=>_e.set(Ue,t.setParams[Ue]),j)),new q0(e,a,m,{params:j,headers:M,context:re,reportProgress:T,responseType:d,withCredentials:b})}}var lc=(()=>((lc=lc||{})[lc.Sent=0]="Sent",lc[lc.UploadProgress=1]="UploadProgress",lc[lc.ResponseHeader=2]="ResponseHeader",lc[lc.DownloadProgress=3]="DownloadProgress",lc[lc.Response=4]="Response",lc[lc.User=5]="User",lc))();class y3{constructor(t,e=200,a="OK"){this.headers=t.headers||new rg,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||a,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class E3 extends y3{constructor(t={}){super(t),this.type=lc.ResponseHeader}clone(t={}){return new E3({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class sg extends y3{constructor(t={}){super(t),this.type=lc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new sg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class h5 extends y3{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function b3(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let kM=(()=>{class r{constructor(e){this.handler=e}request(e,a,d={}){let m;if(e instanceof q0)m=e;else{let M,j;M=d.headers instanceof rg?d.headers:new rg(d.headers),d.params&&(j=d.params instanceof og?d.params:new og({fromObject:d.params})),m=new q0(e,a,void 0!==d.body?d.body:null,{headers:M,context:d.context,params:j,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const b=Wl(m).pipe(function Y7(r,t){return V(t)?Lu(r,t,1):Lu(r,1)}(M=>this.handler.handle(M)));if(e instanceof q0||"events"===d.observe)return b;const T=b.pipe(Gf(M=>M instanceof sg));switch(d.observe||"body"){case"body":switch(m.responseType){case"arraybuffer":return T.pipe(et(M=>{if(null!==M.body&&!(M.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return M.body}));case"blob":return T.pipe(et(M=>{if(null!==M.body&&!(M.body instanceof Blob))throw new Error("Response is not a Blob.");return M.body}));case"text":return T.pipe(et(M=>{if(null!==M.body&&"string"!=typeof M.body)throw new Error("Response is not a string.");return M.body}));default:return T.pipe(et(M=>M.body))}case"response":return T;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(e,a={}){return this.request("DELETE",e,a)}get(e,a={}){return this.request("GET",e,a)}head(e,a={}){return this.request("HEAD",e,a)}jsonp(e,a){return this.request("JSONP",e,{params:(new og).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,a={}){return this.request("OPTIONS",e,a)}patch(e,a,d={}){return this.request("PATCH",e,b3(d,a))}post(e,a,d={}){return this.request("POST",e,b3(d,a))}put(e,a,d={}){return this.request("PUT",e,b3(d,a))}}return r.\u0275fac=function(e){return new(e||r)(rn(Y0))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();function p5(r,t){return t(r)}function $7(r,t){return(e,a)=>t.intercept(e,{handle:d=>r(d,a)})}const Z7=new Hn("HTTP_INTERCEPTORS"),FD=new Hn("HTTP_INTERCEPTOR_FNS");function f5(){let r=null;return(t,e)=>(null===r&&(r=(ma(Z7,{optional:!0})??[]).reduceRight($7,p5)),r(t,e))}let m5=(()=>{class r extends Y0{constructor(e,a){super(),this.backend=e,this.injector=a,this.chain=null}handle(e){if(null===this.chain){const a=Array.from(new Set(this.injector.get(FD)));this.chain=a.reduceRight((d,m)=>function X7(r,t,e){return(a,d)=>e.runInContext(()=>t(a,m=>r(m,d)))}(d,m,this.injector),p5)}return this.chain(e,a=>this.backend.handle(a))}}return r.\u0275fac=function(e){return new(e||r)(rn(BD),rn(af))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();const i9=/^\)\]\}',?\n/;let _5=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $e(a=>{const d=this.xhrFactory.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((Ge,st)=>d.setRequestHeader(Ge,st.join(","))),e.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Ge=e.detectContentTypeHeader();null!==Ge&&d.setRequestHeader("Content-Type",Ge)}if(e.responseType){const Ge=e.responseType.toLowerCase();d.responseType="json"!==Ge?Ge:"text"}const m=e.serializeBody();let b=null;const T=()=>{if(null!==b)return b;const Ge=d.statusText||"OK",st=new rg(d.getAllResponseHeaders()),Rt=function o9(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(d)||e.url;return b=new E3({headers:st,status:d.status,statusText:Ge,url:Rt}),b},M=()=>{let{headers:Ge,status:st,statusText:Rt,url:nn}=T(),cn=null;204!==st&&(cn=typeof d.response>"u"?d.responseText:d.response),0===st&&(st=cn?200:0);let Mn=st>=200&&st<300;if("json"===e.responseType&&"string"==typeof cn){const n=cn;cn=cn.replace(i9,"");try{cn=""!==cn?JSON.parse(cn):null}catch(o){cn=n,Mn&&(Mn=!1,cn={error:o,text:cn})}}Mn?(a.next(new sg({body:cn,headers:Ge,status:st,statusText:Rt,url:nn||void 0})),a.complete()):a.error(new h5({error:cn,headers:Ge,status:st,statusText:Rt,url:nn||void 0}))},j=Ge=>{const{url:st}=T(),Rt=new h5({error:Ge,status:d.status||0,statusText:d.statusText||"Unknown Error",url:st||void 0});a.error(Rt)};let re=!1;const _e=Ge=>{re||(a.next(T()),re=!0);let st={type:lc.DownloadProgress,loaded:Ge.loaded};Ge.lengthComputable&&(st.total=Ge.total),"text"===e.responseType&&!!d.responseText&&(st.partialText=d.responseText),a.next(st)},Ue=Ge=>{let st={type:lc.UploadProgress,loaded:Ge.loaded};Ge.lengthComputable&&(st.total=Ge.total),a.next(st)};return d.addEventListener("load",M),d.addEventListener("error",j),d.addEventListener("timeout",j),d.addEventListener("abort",j),e.reportProgress&&(d.addEventListener("progress",_e),null!==m&&d.upload&&d.upload.addEventListener("progress",Ue)),d.send(m),a.next({type:lc.Sent}),()=>{d.removeEventListener("error",j),d.removeEventListener("abort",j),d.removeEventListener("load",M),d.removeEventListener("timeout",j),e.reportProgress&&(d.removeEventListener("progress",_e),null!==m&&d.upload&&d.upload.removeEventListener("progress",Ue)),d.readyState!==d.DONE&&d.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(rn(Sh))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();const PM=new Hn("XSRF_ENABLED"),v5="XSRF-TOKEN",A5=new Hn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>v5}),y5="X-XSRF-TOKEN",E5=new Hn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>y5});class b5{}let s9=(()=>{class r{constructor(e,a,d){this.doc=e,this.platform=a,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=uD(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(lw),rn(A5))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();function S5(r,t){const e=r.url.toLowerCase();if(!ma(PM)||"GET"===r.method||"HEAD"===r.method||e.startsWith("http://")||e.startsWith("https://"))return t(r);const a=ma(b5).getToken(),d=ma(E5);return null!=a&&!r.headers.has(d)&&(r=r.clone({headers:r.headers.set(d,a)})),t(r)}var Ha=(()=>((Ha=Ha||{})[Ha.Interceptors=0]="Interceptors",Ha[Ha.LegacyInterceptors=1]="LegacyInterceptors",Ha[Ha.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ha[Ha.NoXsrfProtection=3]="NoXsrfProtection",Ha[Ha.JsonpSupport=4]="JsonpSupport",Ha[Ha.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ha))();function $0(r,t){return{\u0275kind:r,\u0275providers:t}}function C5(...r){const t=[kM,_5,m5,{provide:Y0,useExisting:m5},{provide:BD,useExisting:_5},{provide:FD,useValue:S5,multi:!0},{provide:PM,useValue:!0},{provide:b5,useClass:s9}];for(const e of r)t.push(...e.\u0275providers);return function HT(r){return{\u0275providers:r}}(t)}const I5=new Hn("LEGACY_INTERCEPTOR_FN");function X0({cookieName:r,headerName:t}){const e=[];return void 0!==r&&e.push({provide:A5,useValue:r}),void 0!==t&&e.push({provide:E5,useValue:t}),$0(Ha.CustomXsrfConfiguration,e)}let d9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[C5($0(Ha.LegacyInterceptors,[{provide:I5,useFactory:f5},{provide:FD,useExisting:I5,multi:!0}]),X0({cookieName:v5,headerName:y5}))]}),r})();class S3 extends St{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:a}=this;if(t)throw e;return this._throwIfClosed(),a}next(t){super.next(this._value=t)}}function d1(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function GM(r,t,e){const a=V(r)||t||e?{next:r,error:t,complete:e}:r;return a?We((d,m)=>{var b;null===(b=a.subscribe)||void 0===b||b.call(a);let T=!0;d.subscribe(new De(m,M=>{var j;null===(j=a.next)||void 0===j||j.call(a,M),m.next(M)},()=>{var M;T=!1,null===(M=a.complete)||void 0===M||M.call(a),m.complete()},M=>{var j;T=!1,null===(j=a.error)||void 0===j||j.call(a,M),m.error(M)},()=>{var M,j;T&&(null===(M=a.unsubscribe)||void 0===M||M.call(a)),null===(j=a.finalize)||void 0===j||j.call(a)}))}):je}class K9 extends H{constructor(t,e){super()}schedule(t,e=0){return this}}const WM={setInterval(...r){const{delegate:t}=WM;return(t?.setInterval||setInterval)(...r)},clearInterval(r){const{delegate:t}=WM;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};class R3 extends K9{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const a=this.id,d=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(d,a,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(d,this.id,e),this}requestAsyncId(t,e,a=0){return WM.setInterval(t.flush.bind(t,this),a)}recycleAsyncId(t,e,a=0){if(null!=a&&this.delay===a&&!1===this.pending)return e;WM.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const a=this._execute(t,e);if(a)return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let d,a=!1;try{this.work(t)}catch(m){a=!0,d=m||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:a}=e;this.work=this.state=this.scheduler=null,this.pending=!1,z(a,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const O3={now:()=>(O3.delegate||Date).now(),delegate:void 0};class jD{constructor(t,e=jD.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,a){return new this.schedulerActionCtor(this,t).schedule(a,e)}}jD.now=O3.now;class D3 extends jD{constructor(t,e=jD.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let a;this._active=!0;do{if(a=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,a){for(;t=e.shift();)t.unsubscribe();throw a}}}const k3=new D3(R3),KM=k3;function P3(r,t=k3){return We((e,a)=>{let d=null,m=null,b=null;const T=()=>{if(d){d.unsubscribe(),d=null;const j=m;m=null,a.next(j)}};function M(){const j=b+r,re=t.now();if(re<j)return d=this.schedule(void 0,j-re),void a.add(d);T()}e.subscribe(new De(a,j=>{m=j,b=t.now(),d||(d=t.schedule(M,r),a.add(d))},()=>{T(),a.complete()},void 0,()=>{m=d=null}))})}function Q5(r){return Gf((t,e)=>r<=e)}function H5(r,t=je){return r=r??z9,We((e,a)=>{let d,m=!0;e.subscribe(new De(a,b=>{const T=t(b);(m||!r(d,T))&&(m=!1,d=T,a.next(b))}))})}function z9(r,t){return r===t}function Pu(r){return We((t,e)=>{gn(r).subscribe(new De(e,()=>e.complete(),de)),!e.closed&&t.subscribe(e)})}function Ia(r){return null!=r&&"false"!=`${r}`}function W_(r,t=0){return function G5(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function zM(r){return Array.isArray(r)?r:[r]}function dc(r){return null==r?"":"string"==typeof r?r:`${r}px`}function ag(r){return r instanceof Oi?r.nativeElement:r}let W5=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Y9=(()=>{class r{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,a)=>this._cleanupObserver(a))}observe(e){const a=ag(e);return new $e(d=>{const b=this._observeElement(a).subscribe(d);return()=>{b.unsubscribe(),this._unobserveElement(a)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const a=new St,d=this._mutationObserverFactory.create(m=>a.next(m));d&&d.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:d,stream:a,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:a,stream:d}=this._observedElements.get(e);a&&a.disconnect(),d.complete(),this._observedElements.delete(e)}}}return r.\u0275fac=function(e){return new(e||r)(rn(W5))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),q9=(()=>{class r{constructor(e,a,d){this._contentObserver=e,this._elementRef=a,this._ngZone=d,this.event=new Zi,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ia(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=W_(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(P3(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(yt(Y9),yt(Oi),yt(oi))},r.\u0275dir=pr({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),K5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[W5]}),r})();function YM(r,t,e){r?Dn(e,r,t):t()}function qM(...r){return function X9(){return Xl(1)}()(gg(r,pg(r)))}function h1(...r){const t=pg(r);return We((e,a)=>{(t?qM(r,e,t):qM(r,e)).subscribe(a)})}const JM=new Set;let p1,tr=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):eQ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Z9(r){if(!JM.has(r))try{p1||(p1=document.createElement("style"),p1.setAttribute("type","text/css"),document.head.appendChild(p1)),p1.sheet&&(p1.sheet.insertRule(`@media ${r} {body{ }}`,0),JM.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(eu))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function eQ(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let N3=(()=>{class r{constructor(e,a){this._mediaMatcher=e,this._zone=a,this._queries=new Map,this._destroySubject=new St}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return z5(zM(e)).some(d=>this._registerQuery(d).mql.matches)}observe(e){let m=function J9(...r){const t=pg(r),e=Uy(r),{args:a,keys:d}=R4(r);if(0===a.length)return gg([],t);const m=new $e(function $9(r,t,e=je){return a=>{YM(t,()=>{const{length:d}=r,m=new Array(d);let b=d,T=d;for(let M=0;M<d;M++)YM(t,()=>{const j=gg(r[M],t);let re=!1;j.subscribe(new De(a,_e=>{m[M]=_e,re||(re=!0,T--),T||a.next(e(m.slice()))},()=>{--b||a.complete()}))},a)},a)}}(a,t,d?b=>F_(d,b):je));return e?m.pipe(pM(e)):m}(z5(zM(e)).map(b=>this._registerQuery(b).observable));return m=qM(m.pipe(ml(1)),m.pipe(Q5(1),P3(0))),m.pipe(et(b=>{const T={matches:!1,breakpoints:{}};return b.forEach(({matches:M,query:j})=>{T.matches=T.matches||M,T.breakpoints[j]=M}),T}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const a=this._mediaMatcher.matchMedia(e),m={observable:new $e(b=>{const T=M=>this._zone.run(()=>b.next(M));return a.addListener(T),()=>{a.removeListener(T)}}).pipe(h1(a),et(({matches:b})=>({query:e,matches:b})),Pu(this._destroySubject)),mql:a};return this._queries.set(e,m),m}}return r.\u0275fac=function(e){return new(e||r)(rn(tr),rn(oi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function z5(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function XM(r,t){return(r.getAttribute(t)||"").match(/\S+/g)||[]}const Y5="cdk-describedby-message",ZM="cdk-describedby-host";let M3=0,x3=(()=>{class r{constructor(e,a){this._platform=a,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+M3++,this._document=e,this._id=ma(E_)+"-"+M3++}describe(e,a,d){if(!this._canBeDescribed(e,a))return;const m=L3(a,d);"string"!=typeof a?(Sy(a,this._id),this._messageRegistry.set(m,{messageElement:a,referenceCount:0})):this._messageRegistry.has(m)||this._createMessageElement(a,d),this._isElementDescribedByMessage(e,m)||this._addMessageReference(e,m)}removeDescription(e,a,d){if(!a||!this._isElementNode(e))return;const m=L3(a,d);if(this._isElementDescribedByMessage(e,m)&&this._removeMessageReference(e,m),"string"==typeof a){const b=this._messageRegistry.get(m);b&&0===b.referenceCount&&this._deleteMessageElement(m)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${ZM}="${this._id}"]`);for(let a=0;a<e.length;a++)this._removeCdkDescribedByReferenceIds(e[a]),e[a].removeAttribute(ZM);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,a){const d=this._document.createElement("div");Sy(d,this._id),d.textContent=e,a&&d.setAttribute("role",a),this._createMessagesContainer(),this._messagesContainer.appendChild(d),this._messageRegistry.set(L3(e,a),{messageElement:d,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",a=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let m=0;m<a.length;m++)a[m].remove();const d=this._document.createElement("div");d.style.visibility="hidden",d.classList.add(e),d.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&d.setAttribute("platform","server"),this._document.body.appendChild(d),this._messagesContainer=d}_removeCdkDescribedByReferenceIds(e){const a=XM(e,"aria-describedby").filter(d=>0!=d.indexOf(Y5));e.setAttribute("aria-describedby",a.join(" "))}_addMessageReference(e,a){const d=this._messageRegistry.get(a);(function nQ(r,t,e){const a=XM(r,t);a.some(d=>d.trim()==e.trim())||(a.push(e.trim()),r.setAttribute(t,a.join(" ")))})(e,"aria-describedby",d.messageElement.id),e.setAttribute(ZM,this._id),d.referenceCount++}_removeMessageReference(e,a){const d=this._messageRegistry.get(a);d.referenceCount--,function K_(r,t,e){const d=XM(r,t).filter(m=>m!=e.trim());d.length?r.setAttribute(t,d.join(" ")):r.removeAttribute(t)}(e,"aria-describedby",d.messageElement.id),e.removeAttribute(ZM)}_isElementDescribedByMessage(e,a){const d=XM(e,"aria-describedby"),m=this._messageRegistry.get(a),b=m&&m.messageElement.id;return!!b&&-1!=d.indexOf(b)}_canBeDescribed(e,a){if(!this._isElementNode(e))return!1;if(a&&"object"==typeof a)return!0;const d=null==a?"":`${a}`.trim(),m=e.getAttribute("aria-label");return!(!d||m&&m.trim()===d)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(eu))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function L3(r,t){return"string"==typeof r?`${t||""}/${r}`:r}function Sy(r,t){r.id||(r.id=`${Y5}-${t}-${M3++}`)}class B3{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new St,this._typeaheadSubscription=H.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new St,this.change=new St,t instanceof ud&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const d=e.toArray().indexOf(this._activeItem);d>-1&&d!==this._activeItemIndex&&(this._activeItemIndex=d)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(GM(e=>this._pressedLetters.push(e)),P3(t),Gf(()=>this._pressedLetters.length>0),et(()=>this._pressedLetters.join(""))).subscribe(e=>{const a=this._getItemsArray();for(let d=1;d<a.length+1;d++){const m=(this._activeItemIndex+d)%a.length,b=a[m];if(!this._skipPredicateFn(b)&&0===b.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(m);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,d=["altKey","ctrlKey","metaKey","shiftKey"].every(m=>!t[m]||this._allowedModifierKeys.indexOf(m)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&d){this.setNextItemActive();break}return;case 38:if(this._vertical&&d){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&d){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&d){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&d){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&d){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&d){const m=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(m>0?m:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&d){const m=this._activeItemIndex+this._pageUpAndDown.delta,b=this._getItemsArray().length;this._setActiveItemByIndex(m<b?m:b-1,-1);break}return;default:return void((d||d1(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),a="number"==typeof t?t:e.indexOf(t);this._activeItem=e[a]??null,this._activeItemIndex=a}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let a=1;a<=e.length;a++){const d=(this._activeItemIndex+t*a+e.length)%e.length;if(!this._skipPredicateFn(e[d]))return void this.setActiveItem(d)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const a=this._getItemsArray();if(a[t]){for(;this._skipPredicateFn(a[t]);)if(!a[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof ud?this._items.toArray():this._items}}class q5 extends B3{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class ex extends B3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function Nu(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}function Cy(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const j3=new Hn("cdk-input-modality-detector-options"),Q3={ignoreKeys:[18,17,224,91,16]},eS=Pc({passive:!0,capture:!0});let Id=(()=>{class r{constructor(e,a,d,m){this._platform=e,this._mostRecentTarget=null,this._modality=new S3(null),this._lastTouchMs=0,this._onKeydown=b=>{this._options?.ignoreKeys?.some(T=>T===b.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=z0(b))},this._onMousedown=b=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Nu(b)?"keyboard":"mouse"),this._mostRecentTarget=z0(b))},this._onTouchstart=b=>{Cy(b)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=z0(b))},this._options={...Q3,...m},this.modalityDetected=this._modality.pipe(Q5(1)),this.modalityChanged=this.modalityDetected.pipe(H5()),e.isBrowser&&a.runOutsideAngular(()=>{d.addEventListener("keydown",this._onKeydown,eS),d.addEventListener("mousedown",this._onMousedown,eS),d.addEventListener("touchstart",this._onTouchstart,eS)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,eS),document.removeEventListener("mousedown",this._onMousedown,eS),document.removeEventListener("touchstart",this._onTouchstart,eS))}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(oi),rn(bi),rn(j3,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const $r=new Hn("liveAnnouncerElement",{providedIn:"root",factory:function aQ(){return null}}),WD=new Hn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let KD=0,zD=(()=>{class r{constructor(e,a,d,m){this._ngZone=a,this._defaultOptions=m,this._document=d,this._liveElement=e||this._createLiveElement()}announce(e,...a){const d=this._defaultOptions;let m,b;return 1===a.length&&"number"==typeof a[0]?b=a[0]:[m,b]=a,this.clear(),clearTimeout(this._previousTimeout),m||(m=d&&d.politeness?d.politeness:"polite"),null==b&&d&&(b=d.duration),this._liveElement.setAttribute("aria-live",m),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(T=>this._currentResolve=T)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof b&&(this._previousTimeout=setTimeout(()=>this.clear(),b)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",a=this._document.getElementsByClassName(e),d=this._document.createElement("div");for(let m=0;m<a.length;m++)a[m].remove();return d.classList.add(e),d.classList.add("cdk-visually-hidden"),d.setAttribute("aria-atomic","true"),d.setAttribute("aria-live","polite"),d.id="cdk-live-announcer-"+KD++,this._document.body.appendChild(d),d}_exposeAnnouncerToModals(e){const a=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let d=0;d<a.length;d++){const m=a[d],b=m.getAttribute("aria-owns");b?-1===b.indexOf(e)&&m.setAttribute("aria-owns",b+" "+e):m.setAttribute("aria-owns",e)}}}return r.\u0275fac=function(e){return new(e||r)(rn($r,8),rn(oi),rn(bi),rn(WD,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Iy=new Hn("cdk-focus-monitor-default-options"),tx=Pc({passive:!0,capture:!0});let nx=(()=>{class r{constructor(e,a,d,m,b){this._ngZone=e,this._platform=a,this._inputModalityDetector=d,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St,this._rootNodeFocusAndBlurListener=T=>{for(let j=z0(T);j;j=j.parentElement)"focus"===T.type?this._onFocus(T,j):this._onBlur(T,j)},this._document=m,this._detectionMode=b?.detectionMode||0}monitor(e,a=!1){const d=ag(e);if(!this._platform.isBrowser||1!==d.nodeType)return Wl(null);const m=function g3(r){if(function m3(){if(null==f3){const r=typeof document<"u"?document.head:null;f3=!(!r||!r.createShadowRoot&&!r.attachShadow)}return f3}()){const t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(d)||this._getDocument(),b=this._elementInfo.get(d);if(b)return a&&(b.checkChildren=!0),b.subject;const T={checkChildren:a,subject:new St,rootNode:m};return this._elementInfo.set(d,T),this._registerGlobalListeners(T),T.subject}stopMonitoring(e){const a=ag(e),d=this._elementInfo.get(a);d&&(d.subject.complete(),this._setClasses(a),this._elementInfo.delete(a),this._removeGlobalListeners(d))}focusVia(e,a,d){const m=ag(e);m===this._getDocument().activeElement?this._getClosestElementsInfo(m).forEach(([T,M])=>this._originChanged(T,a,M)):(this._setOrigin(a),"function"==typeof m.focus&&m.focus(d))}ngOnDestroy(){this._elementInfo.forEach((e,a)=>this.stopMonitoring(a))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,a){e.classList.toggle("cdk-focused",!!a),e.classList.toggle("cdk-touch-focused","touch"===a),e.classList.toggle("cdk-keyboard-focused","keyboard"===a),e.classList.toggle("cdk-mouse-focused","mouse"===a),e.classList.toggle("cdk-program-focused","program"===a)}_setOrigin(e,a=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&a,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,a){const d=this._elementInfo.get(a),m=z0(e);!d||!d.checkChildren&&a!==m||this._originChanged(a,this._getFocusOrigin(m),d)}_onBlur(e,a){const d=this._elementInfo.get(a);!d||d.checkChildren&&e.relatedTarget instanceof Node&&a.contains(e.relatedTarget)||(this._setClasses(a),this._emitOrigin(d,null))}_emitOrigin(e,a){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(a))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const a=e.rootNode,d=this._rootNodeFocusListenerCount.get(a)||0;d||this._ngZone.runOutsideAngular(()=>{a.addEventListener("focus",this._rootNodeFocusAndBlurListener,tx),a.addEventListener("blur",this._rootNodeFocusAndBlurListener,tx)}),this._rootNodeFocusListenerCount.set(a,d+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pu(this._stopInputModalityDetector)).subscribe(m=>{this._setOrigin(m,!0)}))}_removeGlobalListeners(e){const a=e.rootNode;if(this._rootNodeFocusListenerCount.has(a)){const d=this._rootNodeFocusListenerCount.get(a);d>1?this._rootNodeFocusListenerCount.set(a,d-1):(a.removeEventListener("focus",this._rootNodeFocusAndBlurListener,tx),a.removeEventListener("blur",this._rootNodeFocusAndBlurListener,tx),this._rootNodeFocusListenerCount.delete(a))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,a,d){this._setClasses(e,a),this._emitOrigin(d,a),this._lastFocusOrigin=a}_getClosestElementsInfo(e){const a=[];return this._elementInfo.forEach((d,m)=>{(m===e||d.checkChildren&&m.contains(e))&&a.push([m,d])}),a}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:a,mostRecentModality:d}=this._inputModalityDetector;if("mouse"!==d||!a||a===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const m=e.labels;if(m)for(let b=0;b<m.length;b++)if(m[b].contains(a))return!0;return!1}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(eu),rn(Id),rn(bi,8),rn(Iy,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const H3="cdk-high-contrast-black-on-white",rx="cdk-high-contrast-white-on-black",G3="cdk-high-contrast-active";let ix=(()=>{class r{constructor(e,a){this._platform=e,this._document=a,this._breakpointSubscription=ma(N3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const a=this._document.defaultView||window,d=a&&a.getComputedStyle?a.getComputedStyle(e):null,m=(d&&d.backgroundColor||"").replace(/ /g,"");switch(e.remove(),m){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(G3,H3,rx),this._hasCheckedHighContrastMode=!0;const a=this.getHighContrastMode();1===a?e.add(G3,H3):2===a&&e.add(G3,rx)}}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),tj=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(rn(ix))},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[K5]}),r})();const W3=new Hn("cdk-dir-doc",{providedIn:"root",factory:function ox(){return ma(bi)}}),nj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let tS=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new Zi,e){const d=e.documentElement?e.documentElement.dir:null;this.value=function K3(r){const t=r?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?nj.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(rn(W3,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),pl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const ax=["text"];function f1(r,t){if(1&r&&Eo(0,"mat-pseudo-checkbox",5),2&r){const e=ii();Vn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function Kl(r,t){if(1&r&&(wn(0,"span",6),Ur(1),Qn()),2&r){const e=ii();Cn(1),uh("(",e.group.label,")")}}const ij=[[["mat-icon"]],"*"],lQ=["mat-icon","*"],aj=new Hn("mat-sanity-checks",{providedIn:"root",factory:function sj(){return!0}});let Ms=(()=>{class r{constructor(e,a,d){this._sanityChecks=a,this._document=d,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!LD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return r.\u0275fac=function(e){return new(e||r)(rn(ix),rn(aj,8),rn(bi))},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[pl,pl]}),r})();function YD(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ia(t)}}}function cx(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const a=e||this.defaultColor;a!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),a&&this._elementRef.nativeElement.classList.add(`mat-${a}`),this._color=a)}}}function ux(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ia(t)}}}function cj(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?W_(e):this.defaultTabIndex}}}function z3(r){return class extends r{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,m=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);m!==t&&(this.errorState=m,this.stateChanges.next())}}}let Y3=(()=>{class r{isErrorState(e,a){return!!(e&&e.invalid&&(e.touched||a&&a.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),q3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,Ms]}),r})();class lj{constructor(t,e,a,d=!1){this._renderer=t,this.element=e,this.config=a,this._animationForciblyDisabledThroughCss=d,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const lx={enterDuration:225,exitDuration:150},nS=Pc({passive:!0}),dj=["mousedown","touchstart"],Td=["mouseup","mouseleave","touchend","touchcancel"];class IQ{constructor(t,e,a,d){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,d.isBrowser&&(this._containerElement=ag(a))}fadeInRipple(t,e,a={}){const d=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),m={...lx,...a.animation};a.centered&&(t=d.left+d.width/2,e=d.top+d.height/2);const b=a.radius||function wQ(r,t,e){const a=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),d=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(a*a+d*d)}(t,e,d),T=t-d.left,M=e-d.top,j=m.enterDuration,re=document.createElement("div");re.classList.add("mat-ripple-element"),re.style.left=T-b+"px",re.style.top=M-b+"px",re.style.height=2*b+"px",re.style.width=2*b+"px",null!=a.color&&(re.style.backgroundColor=a.color),re.style.transitionDuration=`${j}ms`,this._containerElement.appendChild(re);const _e=window.getComputedStyle(re),Ge=_e.transitionDuration,st="none"===_e.transitionProperty||"0s"===Ge||"0s, 0s"===Ge||0===d.width&&0===d.height,Rt=new lj(this,re,a,st);re.style.transform="scale3d(1, 1, 1)",Rt.state=0,a.persistent||(this._mostRecentTransientRipple=Rt);let nn=null;return!st&&(j||m.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const cn=()=>this._finishRippleTransition(Rt),Mn=()=>this._destroyRipple(Rt);re.addEventListener("transitionend",cn),re.addEventListener("transitioncancel",Mn),nn={onTransitionEnd:cn,onTransitionCancel:Mn}}),this._activeRipples.set(Rt,nn),(st||!j)&&this._finishRippleTransition(Rt),Rt}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,a={...lx,...t.config.animation};e.style.transitionDuration=`${a.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!a.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ag(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(dj))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Td),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:a}=t.config;t.state=1,!a&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Nu(t),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!a&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Cy(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let a=0;a<e.length;a++)this.fadeInRipple(e[a].clientX,e[a].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,nS)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(dj.forEach(t=>{this._triggerElement.removeEventListener(t,this,nS)}),this._pointerUpEventsRegistered&&Td.forEach(t=>{this._triggerElement.removeEventListener(t,this,nS)}))}}const TQ=new Hn("mat-ripple-global-options");let g1=(()=>{class r{constructor(e,a,d,m,b){this._elementRef=e,this._animationMode=b,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=m||{},this._rippleRenderer=new IQ(this,a,e,d)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,a=0,d){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,a,{...this.rippleConfig,...d}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(oi),yt(eu),yt(TQ,8),yt(Ki,8))},r.\u0275dir=pr({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,a){2&e&&go("mat-ripple-unbounded",a.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),zl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,Ms]}),r})(),hj=(()=>{class r{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return r.\u0275fac=function(e){return new(e||r)(yt(Ki,8))},r.\u0275cmp=Ta({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,a){2&e&&go("mat-pseudo-checkbox-indeterminate","indeterminate"===a.state)("mat-pseudo-checkbox-checked","checked"===a.state)("mat-pseudo-checkbox-disabled",a.disabled)("_mat-animation-noopable","NoopAnimations"===a._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,a){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),r})(),rS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms]}),r})();const iS=new Hn("MAT_OPTION_PARENT_COMPONENT"),dx=new Hn("MatOptgroup");let wy=0;class pj{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let fj=(()=>{class r{constructor(e,a,d,m){this._element=e,this._changeDetectorRef=a,this._parent=d,this.group=m,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+wy++,this.onSelectionChange=new Zi,this._stateChanges=new St}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Ia(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,a){const d=this._getHostElement();"function"==typeof d.focus&&d.focus(a)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!d1(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new pj(this,e))}}return r.\u0275fac=function(e){rb()},r.\u0275dir=pr({type:r,viewQuery:function(e,a){if(1&e&&Kc(ax,7),2&e){let d;Co(d=eo())&&(a._text=d.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),r})(),$3=(()=>{class r extends fj{constructor(e,a,d,m){super(e,a,d,m)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(pd),yt(iS,8),yt(dx,8))},r.\u0275cmp=Ta({type:r,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,a){1&e&&co("click",function(){return a._selectViaInteraction()})("keydown",function(m){return a._handleKeydown(m)}),2&e&&(a_("id",a.id),Xi("tabindex",a._getTabIndex())("aria-selected",a._getAriaSelected())("aria-disabled",a.disabled.toString()),go("mdc-list-item--selected",a.selected)("mat-mdc-option-multiple",a.multiple)("mat-mdc-option-active",a.active)("mdc-list-item--disabled",a.disabled))},exportAs:["matOption"],features:[Lr],ngContentSelectors:lQ,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,a){1&e&&(Hc(ij),ar(0,f1,1,2,"mat-pseudo-checkbox",0),bo(1),wn(2,"span",1,2),bo(4,1),Qn(),ar(5,Kl,2,1,"span",3),Eo(6,"div",4)),2&e&&(Vn("ngIf",a.multiple),Cn(5),Vn("ngIf",a.group&&a.group._inert),Cn(1),Vn("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disabled||a.disableRipple))},dependencies:[g1,Oc,hj],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),r})(),hx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[zl,ps,Ms,rS]}),r})();const kQ=["mat-button",""],z_=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Z3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Nc=["mat-fab",""],Ho=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Ty=cx(YD(ux(class{constructor(r){this._elementRef=r}})));let A1=(()=>{class r extends Ty{constructor(e,a,d,m){super(e),this._platform=a,this._ngZone=d,this._animationMode=m,this._focusMonitor=ma(nx),this._isFab=!1;const b=e.nativeElement.classList;for(const T of Ho)this._hasHostAttributes(T.selector)&&T.mdcClasses.forEach(M=>{b.add(M)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",a){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,a):this._elementRef.nativeElement.focus(a)}_hasHostAttributes(...e){return e.some(a=>this._elementRef.nativeElement.hasAttribute(a))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return r.\u0275fac=function(e){rb()},r.\u0275dir=pr({type:r,viewQuery:function(e,a){if(1&e&&Kc(g1,5),2&e){let d;Co(d=eo())&&(a.ripple=d.first)}},features:[Lr]}),r})(),fc=(()=>{class r extends A1{constructor(e,a,d,m){super(e,a,d,m)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(eu),yt(oi),yt(Ki,8))},r.\u0275cmp=Ta({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,a){2&e&&(Xi("disabled",a.disabled||null),go("_mat-animation-noopable","NoopAnimations"===a._animationMode)("mat-unthemed",!a.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Lr],attrs:kQ,ngContentSelectors:Z3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,a){1&e&&(Hc(z_),Eo(0,"span",0),bo(1),wn(2,"span",1),bo(3,1),Qn(),bo(4,2),Eo(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(go("mdc-button__ripple",!a._isFab)("mdc-fab__ripple",a._isFab),Cn(6),Vn("matRippleDisabled",a._isRippleDisabled())("matRippleTrigger",a._elementRef.nativeElement))},dependencies:[g1],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),r})();const JD=new Hn("mat-mdc-fab-default-options",{providedIn:"root",factory:px});function px(){return{color:"accent"}}const $D=px();let mj=(()=>{class r extends A1{constructor(e,a,d,m,b){super(e,a,d,m),this._options=b,this._isFab=!0,this._options=this._options||$D,this.color=this.defaultColor=this._options.color||$D.color}get extended(){return this._extended}set extended(e){this._extended=Ia(e)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(eu),yt(oi),yt(Ki,8),yt(JD,8))},r.\u0275cmp=Ta({type:r,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,a){2&e&&(Xi("disabled",a.disabled||null),go("_mat-animation-noopable","NoopAnimations"===a._animationMode)("mat-unthemed",!a.color)("mat-mdc-button-base",!0)("mdc-fab--extended",a.extended)("mat-mdc-extended-fab",a.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Lr],attrs:Nc,ngContentSelectors:Z3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,a){1&e&&(Hc(z_),Eo(0,"span",0),bo(1),wn(2,"span",1),bo(3,1),Qn(),bo(4,2),Eo(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(go("mdc-button__ripple",!a._isFab)("mdc-fab__ripple",a._isFab),Cn(6),Vn("matRippleDisabled",a._isRippleDisabled())("matRippleTrigger",a._elementRef.nativeElement))},dependencies:[g1],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),r})(),nU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,zl,Ms]}),r})();class gj{}class UQ{}const Y_="*";function Ry(r,t){return{type:7,name:r,definitions:t,options:{}}}function Oy(r,t=null){return{type:4,styles:t,timings:r}}function _j(r,t=null){return{type:2,steps:r,options:t}}function Yl(r){return{type:6,styles:r,offset:null}}function Kf(r,t,e){return{type:0,name:r,styles:t,options:e}}function q_(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function jQ(r=null){return{type:9,options:r}}function QQ(r,t,e=null){return{type:11,selector:r,animation:t,options:e}}function vj(r){Promise.resolve().then(r)}class XD{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vj(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class Aj{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,a=0,d=0;const m=this.players.length;0==m?vj(()=>this._onFinish()):this.players.forEach(b=>{b.onDone(()=>{++e==m&&this._onFinish()}),b.onDestroy(()=>{++a==m&&this._onDestroy()}),b.onStart(()=>{++d==m&&this._onStart()})}),this.totalTime=this.players.reduce((b,T)=>Math.max(b,T.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(a=>{const d=a.totalTime?Math.min(1,e/a.totalTime):1;a.setPosition(d)})}getPosition(){const t=this.players.reduce((e,a)=>null===e||a.totalTime>e.totalTime?a:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class ZD{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class iU extends ZD{constructor(t,e,a,d,m){super(),this.component=t,this.viewContainerRef=e,this.injector=a,this.componentFactoryResolver=d,this.projectableNodes=m}}class ek extends ZD{constructor(t,e,a,d){super(),this.templateRef=t,this.viewContainerRef=e,this.context=a,this.injector=d}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class yj extends ZD{constructor(t){super(),this.element=t instanceof Oi?t.nativeElement:t}}class fx{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof iU?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ek?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof yj?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class b1 extends fx{constructor(t,e,a,d,m){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=a,this._defaultInjector=d,this.attachDomPortal=b=>{const T=b.element,M=this._document.createComment("dom-portal");T.parentNode.insertBefore(M,T),this.outletElement.appendChild(T),this._attachedPortal=b,super.setDisposeFn(()=>{M.parentNode&&M.parentNode.replaceChild(T,M)})},this._document=m}attachComponentPortal(t){const a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let d;return t.viewContainerRef?(d=t.viewContainerRef.createComponent(a,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>d.destroy())):(d=a.create(t.injector||this._defaultInjector||ic.NULL),this._appRef.attachView(d.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(d.hostView),d.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(d)),this._attachedPortal=t,d}attachTemplatePortal(t){let e=t.viewContainerRef,a=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return a.rootNodes.forEach(d=>this.outletElement.appendChild(d)),a.detectChanges(),this.setDisposeFn(()=>{let d=e.indexOf(a);-1!==d&&e.remove(d)}),this._attachedPortal=t,a}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let J_=(()=>{class r extends fx{constructor(e,a,d){super(),this._componentFactoryResolver=e,this._viewContainerRef=a,this._isInitialized=!1,this.attached=new Zi,this.attachDomPortal=m=>{const b=m.element,T=this._document.createComment("dom-portal");m.setAttachedHost(this),b.parentNode.insertBefore(T,b),this._getRootNode().appendChild(b),this._attachedPortal=m,super.setDisposeFn(()=>{T.parentNode&&T.parentNode.replaceChild(b,T)})},this._document=d}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const a=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,m=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),b=a.createComponent(m,a.length,e.injector||a.injector,e.projectableNodes||void 0);return a!==this._viewContainerRef&&this._getRootNode().appendChild(b.hostView.rootNodes[0]),super.setDisposeFn(()=>b.destroy()),this._attachedPortal=e,this._attachedRef=b,this.attached.emit(b),b}attachTemplatePortal(e){e.setAttachedHost(this);const a=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=a,this.attached.emit(a),a}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(yt(Qg),yt(nl),yt(bi))},r.\u0275dir=pr({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Lr]}),r})(),bj=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const Sj=["addListener","removeListener"],zQ=["addEventListener","removeEventListener"],YQ=["on","off"];function oU(r,t,e,a){if(V(e)&&(a=e,e=void 0),a)return oU(r,t,e).pipe(pM(a));const[d,m]=function _x(r){return V(r.addEventListener)&&V(r.removeEventListener)}(r)?zQ.map(b=>T=>r[b](t,T,e)):function gx(r){return V(r.addListener)&&V(r.removeListener)}(r)?Sj.map(mx(r,t)):function sU(r){return V(r.on)&&V(r.off)}(r)?YQ.map(mx(r,t)):[];if(!d&&To(r))return Lu(b=>oU(b,t,e))(gn(r));if(!d)throw new TypeError("Invalid event target");return new $e(b=>{const T=(...M)=>b.next(1<M.length?M:M[0]);return d(T),()=>m(T)})}function mx(r,t){return e=>a=>r[e](t,a)}const Rd={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:a}=Rd;a&&(t=a.requestAnimationFrame,e=a.cancelAnimationFrame);const d=t(m=>{e=void 0,r(m)});return new H(()=>e?.(d))},requestAnimationFrame(...r){const{delegate:t}=Rd;return(t?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Rd;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};new class Ij extends D3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let a,d=-1;t=t||e.shift();const m=e.length;do{if(a=t.execute(t.state,t.delay))break}while(++d<m&&(t=e.shift()));if(this._active=!1,a){for(;++d<m&&(t=e.shift());)t.unsubscribe();throw a}}}(class Cj extends R3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,a=0){return null!==a&&a>0?super.requestAsyncId(t,e,a):(t.actions.push(this),t._scheduled||(t._scheduled=Rd.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,a=0){if(null!=a&&a>0||null==a&&this.delay>0)return super.recycleAsyncId(t,e,a);0===t.actions.length&&(Rd.cancelAnimationFrame(e),t._scheduled=void 0)}});let tk,JQ=1;const nk={};function vx(r){return r in nk&&(delete nk[r],!0)}const $Q={setImmediate(r){const t=JQ++;return nk[t]=!0,tk||(tk=Promise.resolve()),tk.then(()=>vx(t)&&r()),t},clearImmediate(r){vx(r)}},{setImmediate:XQ,clearImmediate:ZQ}=$Q,rk={setImmediate(...r){const{delegate:t}=rk;return(t?.setImmediate||XQ)(...r)},clearImmediate(r){const{delegate:t}=rk;return(t?.clearImmediate||ZQ)(r)},delegate:void 0},Ax=new class eH extends D3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let a,d=-1;t=t||e.shift();const m=e.length;do{if(a=t.execute(t.state,t.delay))break}while(++d<m&&(t=e.shift()));if(this._active=!1,a){for(;++d<m&&(t=e.shift());)t.unsubscribe();throw a}}}(class Dh extends R3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,a=0){return null!==a&&a>0?super.requestAsyncId(t,e,a):(t.actions.push(this),t._scheduled||(t._scheduled=rk.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,a=0){if(null!=a&&a>0||null==a&&this.delay>0)return super.recycleAsyncId(t,e,a);0===t.actions.length&&(rk.clearImmediate(e),t._scheduled=void 0)}});function Tj(r=0,t,e=KM){let a=-1;return null!=t&&(z1(t)?e=t:a=t),new $e(d=>{let m=function S1(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;m<0&&(m=0);let b=0;return e.schedule(function(){d.closed||(d.next(b++),0<=a?this.schedule(void 0,a):d.complete())},m)})}function Rj(r,t=KM){return function tH(r){return We((t,e)=>{let a=!1,d=null,m=null,b=!1;const T=()=>{if(m?.unsubscribe(),m=null,a){a=!1;const j=d;d=null,e.next(j)}b&&e.complete()},M=()=>{m=null,b&&e.complete()};t.subscribe(new De(e,j=>{a=!0,d=j,m||gn(r(j)).subscribe(m=new De(e,T,M))},()=>{b=!0,(!a||!m||m.closed)&&e.complete()}))})}(()=>Tj(r,t))}let ik=(()=>{class r{constructor(e,a,d){this._ngZone=e,this._platform=a,this._scrolled=new St,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const a=this.scrollContainers.get(e);a&&(a.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new $e(a=>{this._globalSubscription||this._addGlobalListener();const d=e>0?this._scrolled.pipe(Rj(e)).subscribe(a):this._scrolled.subscribe(a);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Wl()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,a)=>this.deregister(a)),this._scrolled.complete()}ancestorScrolled(e,a){const d=this.getAncestorScrollContainers(e);return this.scrolled(a).pipe(Gf(m=>!m||d.indexOf(m)>-1))}getAncestorScrollContainers(e){const a=[];return this.scrollContainers.forEach((d,m)=>{this._scrollableContainsElement(m,e)&&a.push(m)}),a}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,a){let d=ag(a),m=e.getElementRef().nativeElement;do{if(d==m)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>oU(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(eu),rn(bi,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),cU=(()=>{class r{constructor(e,a,d){this._platform=e,this._change=new St,this._changeListener=m=>{this._change.next(m)},this._document=d,a.runOutsideAngular(()=>{if(e.isBrowser){const m=this._getWindow();m.addEventListener("resize",this._changeListener),m.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:a,height:d}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+d,right:e.left+a,height:d,width:a}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,a=this._getWindow(),d=e.documentElement,m=d.getBoundingClientRect();return{top:-m.top||e.body.scrollTop||a.scrollY||d.scrollTop||0,left:-m.left||e.body.scrollLeft||a.scrollX||d.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Rj(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(oi),rn(bi,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ok=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})(),Pj=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[pl,ok,pl,ok]}),r})();const uU=K0();class uH{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=dc(-this._previousScrollPosition.left),t.style.top=dc(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,a=t.style,d=this._document.body.style,m=a.scrollBehavior||"",b=d.scrollBehavior||"";this._isEnabled=!1,a.left=this._previousHTMLStyles.left,a.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),uU&&(a.scrollBehavior=d.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),uU&&(a.scrollBehavior=m,d.scrollBehavior=b)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,a=this._viewportRuler.getViewportSize();return e.scrollHeight>a.height||e.scrollWidth>a.width}}class Nj{constructor(t,e,a,d){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=a,this._config=d,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Mj{enable(){}disable(){}attach(){}}function lU(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function xj(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class Lj{constructor(t,e,a,d){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=a,this._config=d,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:a,height:d}=this._viewportRuler.getViewportSize();lU(e,[{width:a,height:d,bottom:d,right:a,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let dU=(()=>{class r{constructor(e,a,d,m){this._scrollDispatcher=e,this._viewportRuler=a,this._ngZone=d,this.noop=()=>new Mj,this.close=b=>new Nj(this._scrollDispatcher,this._ngZone,this._viewportRuler,b),this.block=()=>new uH(this._viewportRuler,this._document),this.reposition=b=>new Lj(this._scrollDispatcher,this._viewportRuler,this._ngZone,b),this._document=m}}return r.\u0275fac=function(e){return new(e||r)(rn(ik),rn(cU),rn(oi),rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class sk{constructor(t){if(this.scrollStrategy=new Mj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const a of e)void 0!==t[a]&&(this[a]=t[a])}}}class lH{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let bx=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const a=this._attachedOverlays.indexOf(e);a>-1&&this._attachedOverlays.splice(a,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Rp=(()=>{class r extends bx{constructor(e,a){super(e),this._ngZone=a,this._keydownListener=d=>{const m=this._attachedOverlays;for(let b=m.length-1;b>-1;b--)if(m[b]._keydownEvents.observers.length>0){const T=m[b]._keydownEvents;this._ngZone?this._ngZone.run(()=>T.next(d)):T.next(d);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(oi,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),hH=(()=>{class r extends bx{constructor(e,a,d){super(e),this._platform=a,this._ngZone=d,this._cursorStyleIsSet=!1,this._pointerDownListener=m=>{this._pointerDownEventTarget=z0(m)},this._clickListener=m=>{const b=z0(m),T="click"===m.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:b;this._pointerDownEventTarget=null;const M=this._attachedOverlays.slice();for(let j=M.length-1;j>-1;j--){const re=M[j];if(re._outsidePointerEvents.observers.length<1||!re.hasAttached())continue;if(re.overlayElement.contains(b)||re.overlayElement.contains(T))break;const _e=re._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_e.next(m)):_e.next(m)}}}add(e){if(super.add(e),!this._isAttached){const a=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(a)):this._addEventListeners(a),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=a.style.cursor,a.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(eu),rn(oi,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Bj=(()=>{class r{constructor(e,a){this._platform=a,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||LD()){const d=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let m=0;m<d.length;m++)d[m].remove()}const a=this._document.createElement("div");a.classList.add(e),LD()?a.setAttribute("platform","test"):this._platform.isBrowser||a.setAttribute("platform","server"),this._document.body.appendChild(a),this._containerElement=a}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(eu))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class pU{constructor(t,e,a,d,m,b,T,M,j,re=!1){this._portalOutlet=t,this._host=e,this._pane=a,this._config=d,this._ngZone=m,this._keyboardDispatcher=b,this._document=T,this._location=M,this._outsideClickDispatcher=j,this._animationsDisabled=re,this._backdropElement=null,this._backdropClick=new St,this._attachments=new St,this._detachments=new St,this._locationChanges=H.EMPTY,this._backdropClickHandler=_e=>this._backdropClick.next(_e),this._backdropTransitionendHandler=_e=>{this._disposeBackdrop(_e.target)},this._keydownEvents=new St,this._outsidePointerEvents=new St,d.scrollStrategy&&(this._scrollStrategy=d.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=d.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ml(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=dc(this._config.width),t.height=dc(this._config.height),t.minWidth=dc(this._config.minWidth),t.minHeight=dc(this._config.minHeight),t.maxWidth=dc(this._config.maxWidth),t.maxHeight=dc(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,a){const d=zM(e||[]).filter(m=>!!m);d.length&&(a?t.classList.add(...d):t.classList.remove(...d))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Pu(No(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Fj="cdk-overlay-connected-position-bounding-box",fU=/([A-Za-z%]+)$/;class Uj{constructor(t,e,a,d,m){this._viewportRuler=e,this._document=a,this._platform=d,this._overlayContainer=m,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St,this._resizeSubscription=H.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Fj),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,a=this._viewportRect,d=this._containerRect,m=[];let b;for(let T of this._preferredPositions){let M=this._getOriginPoint(t,d,T),j=this._getOverlayPoint(M,e,T),re=this._getOverlayFit(j,e,a,T);if(re.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(T,M);this._canFitWithFlexibleDimensions(re,j,a)?m.push({position:T,origin:M,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(M,T)}):(!b||b.overlayFit.visibleArea<re.visibleArea)&&(b={overlayFit:re,overlayPoint:j,originPoint:M,position:T,overlayRect:e})}if(m.length){let T=null,M=-1;for(const j of m){const re=j.boundingBoxRect.width*j.boundingBoxRect.height*(j.position.weight||1);re>M&&(M=re,T=j)}return this._isPushed=!1,void this._applyPosition(T.position,T.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(b.position,b.originPoint);this._applyPosition(b.position,b.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Fj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,a){let d,m;if("center"==a.originX)d=t.left+t.width/2;else{const b=this._isRtl()?t.right:t.left,T=this._isRtl()?t.left:t.right;d="start"==a.originX?b:T}return e.left<0&&(d-=e.left),m="center"==a.originY?t.top+t.height/2:"top"==a.originY?t.top:t.bottom,e.top<0&&(m-=e.top),{x:d,y:m}}_getOverlayPoint(t,e,a){let d,m;return d="center"==a.overlayX?-e.width/2:"start"===a.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,m="center"==a.overlayY?-e.height/2:"top"==a.overlayY?0:-e.height,{x:t.x+d,y:t.y+m}}_getOverlayFit(t,e,a,d){const m=ak(e);let{x:b,y:T}=t,M=this._getOffset(d,"x"),j=this._getOffset(d,"y");M&&(b+=M),j&&(T+=j);let Ue=0-T,Ge=T+m.height-a.height,st=this._subtractOverflows(m.width,0-b,b+m.width-a.width),Rt=this._subtractOverflows(m.height,Ue,Ge),nn=st*Rt;return{visibleArea:nn,isCompletelyWithinViewport:m.width*m.height===nn,fitsInViewportVertically:Rt===m.height,fitsInViewportHorizontally:st==m.width}}_canFitWithFlexibleDimensions(t,e,a){if(this._hasFlexibleDimensions){const d=a.bottom-e.y,m=a.right-e.x,b=Vj(this._overlayRef.getConfig().minHeight),T=Vj(this._overlayRef.getConfig().minWidth),j=t.fitsInViewportHorizontally||null!=T&&T<=m;return(t.fitsInViewportVertically||null!=b&&b<=d)&&j}return!1}_pushOverlayOnScreen(t,e,a){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const d=ak(e),m=this._viewportRect,b=Math.max(t.x+d.width-m.width,0),T=Math.max(t.y+d.height-m.height,0),M=Math.max(m.top-a.top-t.y,0),j=Math.max(m.left-a.left-t.x,0);let re=0,_e=0;return re=d.width<=m.width?j||-b:t.x<this._viewportMargin?m.left-a.left-t.x:0,_e=d.height<=m.height?M||-T:t.y<this._viewportMargin?m.top-a.top-t.y:0,this._previousPushAmount={x:re,y:_e},{x:t.x+re,y:t.y+_e}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const a=this._getScrollVisibility(),d=new lH(t,a);this._positionChanges.next(d)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let a,d=t.overlayY;a="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let m=0;m<e.length;m++)e[m].style.transformOrigin=`${a} ${d}`}_calculateBoundingBoxRect(t,e){const a=this._viewportRect,d=this._isRtl();let m,b,T,re,_e,Ue;if("top"===e.overlayY)b=t.y,m=a.height-b+this._viewportMargin;else if("bottom"===e.overlayY)T=a.height-t.y+2*this._viewportMargin,m=a.height-T+this._viewportMargin;else{const Ge=Math.min(a.bottom-t.y+a.top,t.y),st=this._lastBoundingBoxSize.height;m=2*Ge,b=t.y-Ge,m>st&&!this._isInitialRender&&!this._growAfterOpen&&(b=t.y-st/2)}if("end"===e.overlayX&&!d||"start"===e.overlayX&&d)Ue=a.width-t.x+this._viewportMargin,re=t.x-this._viewportMargin;else if("start"===e.overlayX&&!d||"end"===e.overlayX&&d)_e=t.x,re=a.right-t.x;else{const Ge=Math.min(a.right-t.x+a.left,t.x),st=this._lastBoundingBoxSize.width;re=2*Ge,_e=t.x-Ge,re>st&&!this._isInitialRender&&!this._growAfterOpen&&(_e=t.x-st/2)}return{top:b,left:_e,bottom:T,right:Ue,width:re,height:m}}_setBoundingBoxStyles(t,e){const a=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));const d={};if(this._hasExactPosition())d.top=d.left="0",d.bottom=d.right=d.maxHeight=d.maxWidth="",d.width=d.height="100%";else{const m=this._overlayRef.getConfig().maxHeight,b=this._overlayRef.getConfig().maxWidth;d.height=dc(a.height),d.top=dc(a.top),d.bottom=dc(a.bottom),d.width=dc(a.width),d.left=dc(a.left),d.right=dc(a.right),d.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",d.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",m&&(d.maxHeight=dc(m)),b&&(d.maxWidth=dc(b))}this._lastBoundingBoxSize=a,tu(this._boundingBox.style,d)}_resetBoundingBoxStyles(){tu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const a={},d=this._hasExactPosition(),m=this._hasFlexibleDimensions,b=this._overlayRef.getConfig();if(d){const re=this._viewportRuler.getViewportScrollPosition();tu(a,this._getExactOverlayY(e,t,re)),tu(a,this._getExactOverlayX(e,t,re))}else a.position="static";let T="",M=this._getOffset(e,"x"),j=this._getOffset(e,"y");M&&(T+=`translateX(${M}px) `),j&&(T+=`translateY(${j}px)`),a.transform=T.trim(),b.maxHeight&&(d?a.maxHeight=dc(b.maxHeight):m&&(a.maxHeight="")),b.maxWidth&&(d?a.maxWidth=dc(b.maxWidth):m&&(a.maxWidth="")),tu(this._pane.style,a)}_getExactOverlayY(t,e,a){let d={top:"",bottom:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,a)),"bottom"===t.overlayY?d.bottom=this._document.documentElement.clientHeight-(m.y+this._overlayRect.height)+"px":d.top=dc(m.y),d}_getExactOverlayX(t,e,a){let b,d={left:"",right:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,a)),b=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===b?d.right=this._document.documentElement.clientWidth-(m.x+this._overlayRect.width)+"px":d.left=dc(m.x),d}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),a=this._scrollables.map(d=>d.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xj(t,a),isOriginOutsideView:lU(t,a),isOverlayClipped:xj(e,a),isOverlayOutsideView:lU(e,a)}}_subtractOverflows(t,...e){return e.reduce((a,d)=>a-Math.max(d,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+t-this._viewportMargin,bottom:a.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&zM(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Oi)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,a=t.height||0;return{top:t.y,bottom:t.y+a,left:t.x,right:t.x+e,height:a,width:e}}}function tu(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function Vj(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(fU);return e&&"px"!==e?null:parseFloat(t)}return r||null}function ak(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const Sx="cdk-global-overlay-wrapper";class I1{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Sx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),{width:d,height:m,maxWidth:b,maxHeight:T}=a,M=!("100%"!==d&&"100vw"!==d||b&&"100%"!==b&&"100vw"!==b),j=!("100%"!==m&&"100vh"!==m||T&&"100%"!==T&&"100vh"!==T),re=this._xPosition,_e=this._xOffset,Ue="rtl"===this._overlayRef.getConfig().direction;let Ge="",st="",Rt="";M?Rt="flex-start":"center"===re?(Rt="center",Ue?st=_e:Ge=_e):Ue?"left"===re||"end"===re?(Rt="flex-end",Ge=_e):("right"===re||"start"===re)&&(Rt="flex-start",st=_e):"left"===re||"start"===re?(Rt="flex-start",Ge=_e):("right"===re||"end"===re)&&(Rt="flex-end",st=_e),t.position=this._cssPosition,t.marginLeft=M?"0":Ge,t.marginTop=j?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=M?"0":st,e.justifyContent=Rt,e.alignItems=j?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,a=e.style;e.classList.remove(Sx),a.justifyContent=a.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let zf=(()=>{class r{constructor(e,a,d,m){this._viewportRuler=e,this._document=a,this._platform=d,this._overlayContainer=m}global(){return new I1}flexibleConnectedTo(e){return new Uj(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(rn(cU),rn(bi),rn(eu),rn(Bj))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),pH=0,Dy=(()=>{class r{constructor(e,a,d,m,b,T,M,j,re,_e,Ue,Ge){this.scrollStrategies=e,this._overlayContainer=a,this._componentFactoryResolver=d,this._positionBuilder=m,this._keyboardDispatcher=b,this._injector=T,this._ngZone=M,this._document=j,this._directionality=re,this._location=_e,this._outsideClickDispatcher=Ue,this._animationsModuleType=Ge}create(e){const a=this._createHostElement(),d=this._createPaneElement(a),m=this._createPortalOutlet(d),b=new sk(e);return b.direction=b.direction||this._directionality.value,new pU(m,a,d,b,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const a=this._document.createElement("div");return a.id="cdk-overlay-"+pH++,a.classList.add("cdk-overlay-pane"),e.appendChild(a),a}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(hd)),new b1(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(rn(dU),rn(Bj),rn(Qg),rn(zf),rn(Rp),rn(ic),rn(oi),rn(bi),rn(tS),rn(FN),rn(hH),rn(Ki,8))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const $_=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Qj=new Hn("cdk-connected-overlay-scroll-strategy");let Cx=(()=>{class r{constructor(e){this.elementRef=e}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi))},r.\u0275dir=pr({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),r})(),mU=(()=>{class r{constructor(e,a,d,m,b){this._overlay=e,this._dir=b,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=H.EMPTY,this._attachSubscription=H.EMPTY,this._detachSubscription=H.EMPTY,this._positionSubscription=H.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Zi,this.positionChange=new Zi,this.attach=new Zi,this.detach=new Zi,this.overlayKeydown=new Zi,this.overlayOutsideClick=new Zi,this._templatePortal=new ek(a,d),this._scrollStrategyFactory=m,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ia(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Ia(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Ia(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Ia(e)}get push(){return this._push}set push(e){this._push=Ia(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=$_);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(a=>{this.overlayKeydown.next(a),27===a.keyCode&&!this.disableClose&&!d1(a)&&(a.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(a=>{this.overlayOutsideClick.next(a)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),a=new sk({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(a.width=this.width),(this.height||0===this.height)&&(a.height=this.height),(this.minWidth||0===this.minWidth)&&(a.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(a.minHeight=this.minHeight),this.backdropClass&&(a.backdropClass=this.backdropClass),this.panelClass&&(a.panelClass=this.panelClass),a}_updatePositionStrategy(e){const a=this.positions.map(d=>({originX:d.originX,originY:d.originY,overlayX:d.overlayX,overlayY:d.overlayY,offsetX:d.offsetX||this.offsetX,offsetY:d.offsetY||this.offsetY,panelClass:d.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(a).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Cx?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function cH(r,t=!1){return We((e,a)=>{let d=0;e.subscribe(new De(a,m=>{const b=r(m,d++);(b||t)&&a.next(m),!b&&a.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(yt(Dy),yt(tl),yt(nl),yt(Qj),yt(tS,8))},r.\u0275dir=pr({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Al]}),r})();const Ix={provide:Qj,deps:[Dy],useFactory:function fH(r){return()=>r.scrollStrategies.reposition()}};let gU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[Dy,Ix],imports:[pl,bj,Pj,Pj]}),r})();function ck(r,t){if(1&r){const e=Fo();wn(0,"div",2)(1,"button",3),co("click",function(){return Ec(e),bc(ii().action())}),Ur(2),Qn()()}if(2&r){const e=ii();Cn(2),uh(" ",e.data.action," ")}}const _U=["label"];function wx(r,t){}const mH=Math.pow(2,31)-1;class Tx{constructor(t,e){this._overlayRef=e,this._afterDismissed=new St,this._afterOpened=new St,this._onAction=new St,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,mH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const kh=new Hn("MatSnackBarData");class Od{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let uk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),r})(),gH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),r})(),_H=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),r})(),w1=(()=>{class r{constructor(e,a){this.snackBarRef=e,this.data=a}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return r.\u0275fac=function(e){return new(e||r)(yt(Tx),yt(kh))},r.\u0275cmp=Ta({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,a){1&e&&(wn(0,"div",0),Ur(1),Qn(),ar(2,ck,3,1,"div",1)),2&e&&(Cn(1),uh(" ",a.data.message,"\n"),Cn(1),Vn("ngIf",a.hasAction))},dependencies:[Oc,fc,uk,gH,_H],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),r})();const Hj={snackBarState:Ry("state",[Kf("void, hidden",Yl({transform:"scale(0.8)",opacity:0})),Kf("visible",Yl({transform:"scale(1)",opacity:1})),q_("* => visible",Oy("150ms cubic-bezier(0, 0, 0.2, 1)")),q_("* => void, * => hidden",Oy("75ms cubic-bezier(0.4, 0.0, 1, 1)",Yl({opacity:0})))])};let vH=(()=>{class r extends fx{constructor(e,a,d,m,b){super(),this._ngZone=e,this._elementRef=a,this._changeDetectorRef=d,this._platform=m,this.snackBarConfig=b,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new St,this._onExit=new St,this._onEnter=new St,this._animationState="void",this.attachDomPortal=T=>{this._assertNotAttached();const M=this._portalOutlet.attachDomPortal(T);return this._afterPortalAttached(),M},this._live="assertive"!==b.politeness||b.announcementMessage?"off"===b.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const a=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),a}attachTemplatePortal(e){this._assertNotAttached();const a=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),a}onAnimationEnd(e){const{fromState:a,toState:d}=e;if(("void"===d&&"void"!==a||"hidden"===d)&&this._completeExit(),"visible"===d){const m=this._onEnter;this._ngZone.run(()=>{m.next(),m.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ml(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,a=this.snackBarConfig.panelClass;a&&(Array.isArray(a)?a.forEach(d=>e.classList.add(d)):e.classList.add(a))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),a=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&a){let d=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(d=document.activeElement),e.removeAttribute("aria-hidden"),a.appendChild(e),d?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return r.\u0275fac=function(e){return new(e||r)(yt(oi),yt(Oi),yt(pd),yt(eu),yt(Od))},r.\u0275dir=pr({type:r,viewQuery:function(e,a){if(1&e&&Kc(J_,7),2&e){let d;Co(d=eo())&&(a._portalOutlet=d.first)}},features:[Lr]}),r})(),AH=(()=>{class r extends vH{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,a="mdc-snackbar__label";e.classList.toggle(a,!e.querySelector(`.${a}`))}}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Gs(r)))(a||r)}}(),r.\u0275cmp=Ta({type:r,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,a){if(1&e&&Kc(_U,7),2&e){let d;Co(d=eo())&&(a._label=d.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,a){1&e&&aA("@state.done",function(m){return a.onAnimationEnd(m)}),2&e&&Ob("@state",a._animationState)},features:[Lr],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,a){1&e&&(wn(0,"div",0)(1,"div",1,2)(3,"div",3),ar(4,wx,0,0,"ng-template",4),Qn(),Eo(5,"div"),Qn()()),2&e&&(Cn(5),Xi("aria-live",a._live)("role",a._role))},dependencies:[J_],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Hj.snackBarState]}}),r})(),T1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[gU,bj,ps,nU,Ms,Ms]}),r})();const Gj=new Hn("mat-snack-bar-default-options",{providedIn:"root",factory:function Rx(){return new Od}});let vU=(()=>{class r{constructor(e,a,d,m,b,T){this._overlay=e,this._live=a,this._injector=d,this._breakpointObserver=m,this._parentSnackBar=b,this._defaultConfig=T,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,a){return this._attach(e,a)}openFromTemplate(e,a){return this._attach(e,a)}open(e,a="",d){const m={...this._defaultConfig,...d};return m.data={message:e,action:a},m.announcementMessage===e&&(m.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,m)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,a){const m=ic.create({parent:a&&a.viewContainerRef&&a.viewContainerRef.injector||this._injector,providers:[{provide:Od,useValue:a}]}),b=new iU(this.snackBarContainerComponent,a.viewContainerRef,m),T=e.attach(b);return T.instance.snackBarConfig=a,T.instance}_attach(e,a){const d={...new Od,...this._defaultConfig,...a},m=this._createOverlay(d),b=this._attachSnackBarContainer(m,d),T=new Tx(b,m);if(e instanceof tl){const M=new ek(e,null,{$implicit:d.data,snackBarRef:T});T.instance=b.attachTemplatePortal(M)}else{const M=this._createInjector(d,T),j=new iU(e,void 0,M),re=b.attachComponentPortal(j);T.instance=re.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Pu(m.detachments())).subscribe(M=>{m.overlayElement.classList.toggle(this.handsetCssClass,M.matches)}),d.announcementMessage&&b._onAnnounce.subscribe(()=>{this._live.announce(d.announcementMessage,d.politeness)}),this._animateSnackBar(T,d),this._openedSnackBarRef=T,this._openedSnackBarRef}_animateSnackBar(e,a){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),a.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),a.duration&&a.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(a.duration))}_createOverlay(e){const a=new sk;a.direction=e.direction;let d=this._overlay.position().global();const m="rtl"===e.direction,b="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!m||"end"===e.horizontalPosition&&m,T=!b&&"center"!==e.horizontalPosition;return b?d.left("0"):T?d.right("0"):d.centerHorizontally(),"top"===e.verticalPosition?d.top("0"):d.bottom("0"),a.positionStrategy=d,this._overlay.create(a)}_createInjector(e,a){return ic.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Tx,useValue:a},{provide:kh,useValue:e.data}]})}}return r.\u0275fac=function(e){return new(e||r)(rn(Dy),rn(zD),rn(ic),rn(N3),rn(r,12),rn(Gj))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})(),oS=(()=>{class r extends vU{constructor(e,a,d,m,b,T){super(e,a,d,m,b,T),this.simpleSnackBarComponent=w1,this.snackBarContainerComponent=AH,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return r.\u0275fac=function(e){return new(e||r)(rn(Dy),rn(zD),rn(ic),rn(N3),rn(r,12),rn(Gj))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:T1}),r})();const AU=["*"];class EH{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(a=>this._trackTile(a))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new bH(this.rowIndex,e)}_findMatchingGap(t){let e=-1,a=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),a=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(a=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),a=this._findGapEndIndex(e)))}while(a-e<t||0==a);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let a=0;a<e.colspan;a++)this.tracker[t+a]=e.rowspan}}class bH{constructor(t,e){this.row=t,this.col=e}}const Wj=new Hn("MAT_GRID_LIST");let EU=(()=>{class r{constructor(e,a){this._element=e,this._gridList=a,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(W_(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(W_(e))}_setStyle(e,a){this._element.nativeElement.style[e]=a}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(Wj,8))},r.\u0275cmp=Ta({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,a){2&e&&Xi("rowspan",a.rowspan)("colspan",a.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:AU,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,a){1&e&&(Hc(),wn(0,"div",0),bo(1),Qn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})();const lk=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class R1{constructor(){this._rows=0,this._rowspan=0}init(t,e,a,d){this._gutterSize=dk(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=a,this._direction=d}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":Dd(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,a){let d=100/this._cols,m=(this._cols-1)/this._cols;this.setColStyles(t,a,d,m),this.setRowStyles(t,e,d,m)}setColStyles(t,e,a,d){let m=this.getBaseTileSize(a,d);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(m,e)),t._setStyle("width",Dd(this.getTileSize(m,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class Kj extends R1{constructor(t){super(),this.fixedRowHeight=t}init(t,e,a,d){super.init(t,e,a,d),this.fixedRowHeight=dk(this.fixedRowHeight),lk.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Dd(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Dd(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class zj extends R1{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,a,d){this.baseTileHeight=this.getBaseTileSize(a/this.rowHeightRatio,d),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Dd(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Dd(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class bU extends R1{setRowStyles(t,e){let m=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(m,e)),t._setStyle("height",Dd(this.getTileSize(m,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function Dd(r){return`calc(${r})`}function dk(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let Yj=(()=>{class r{constructor(e,a){this._element=e,this._dir=a,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(W_(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const a=`${e??""}`;a!==this._rowHeight&&(this._rowHeight=a,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new bU:e&&e.indexOf(":")>-1?new zj(e):new Kj(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new EH);const e=this._tileCoordinator,a=this._tiles.filter(m=>!m._gridList||m._gridList===this),d=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,a),this._tileStyler.init(this.gutterSize,e,this.cols,d),a.forEach((m,b)=>{const T=e.positions[b];this._tileStyler.setStyle(m,T.row,T.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(tS,8))},r.\u0275cmp=Ta({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,a,d){if(1&e&&ra(d,EU,5),2&e){let m;Co(m=eo())&&(a._tiles=m)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,a){2&e&&Xi("cols",a.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[So([{provide:Wj,useExisting:r}])],ngContentSelectors:AU,decls:2,vars:0,template:function(e,a){1&e&&(Hc(),wn(0,"div"),bo(1),Qn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})(),SH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[q3,Ms,q3,Ms]}),r})();const Jj=["matFormFieldNotchedOutline",""],SU=["*"],$j=["textField"],Xj=["iconPrefixContainer"],CU=["textPrefixContainer"];function Zj(r,t){1&r&&Eo(0,"span",19)}function e8(r,t){if(1&r){const e=Fo();wn(0,"label",17),co("cdkObserveContent",function(){return Ec(e),bc(ii(2)._refreshOutlineNotchWidth())}),bo(1,1),ar(2,Zj,1,0,"span",18),Qn()}if(2&r){const e=ii(2);Vn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),Xi("for",e._control.id)("aria-owns",e._control.id),Cn(2),Vn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function Ox(r,t){1&r&&ar(0,e8,3,6,"label",16),2&r&&Vn("ngIf",ii()._hasFloatingLabel())}function Dx(r,t){1&r&&Eo(0,"div",20)}function IU(r,t){}function wU(r,t){1&r&&ar(0,IU,0,0,"ng-template",22),2&r&&(ii(2),Vn("ngTemplateOutlet",sh(1)))}function TU(r,t){if(1&r&&(wn(0,"div",21),ar(1,wU,1,1,"ng-template",9),Qn()),2&r){const e=ii();Vn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Cn(1),Vn("ngIf",!e._forceDisplayInfixLabel())}}function RU(r,t){1&r&&(wn(0,"div",23,24),bo(2,2),Qn())}function t8(r,t){1&r&&(wn(0,"div",25,26),bo(2,3),Qn())}function OU(r,t){}function O1(r,t){1&r&&ar(0,OU,0,0,"ng-template",22),2&r&&(ii(),Vn("ngTemplateOutlet",sh(1)))}function ug(r,t){1&r&&(wn(0,"div",27),bo(1,4),Qn())}function n8(r,t){1&r&&(wn(0,"div",28),bo(1,5),Qn())}function sS(r,t){1&r&&Eo(0,"div",29)}function X_(r,t){1&r&&(wn(0,"div",30),bo(1,6),Qn()),2&r&&Vn("@transitionMessages",ii()._subscriptAnimationState)}function DU(r,t){if(1&r&&(wn(0,"mat-hint",34),Ur(1),Qn()),2&r){const e=ii(2);Vn("id",e._hintLabelId),Cn(1),yf(e.hintLabel)}}function D1(r,t){if(1&r&&(wn(0,"div",31),ar(1,DU,2,2,"mat-hint",32),bo(2,7),Eo(3,"div",33),bo(4,8),Qn()),2&r){const e=ii();Vn("@transitionMessages",e._subscriptAnimationState),Cn(1),Vn("ngIf",e.hintLabel)}}const kx=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Op=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Px=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["mat-label"]]}),r})();const r8=new Hn("MatError");let pk=0,i8=(()=>{class r{constructor(){this.align="start",this.id="mat-mdc-hint-"+pk++}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,a){2&e&&(a_("id",a.id),Xi("align",null),go("mat-mdc-form-field-hint-end","end"===a.align))},inputs:{align:"align",id:"id"}}),r})();const kU=new Hn("MatPrefix"),o8=new Hn("MatSuffix");let PU=(()=>{class r{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi))},r.\u0275dir=pr({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[So([{provide:o8,useExisting:r}])]}),r})(),lg=(()=>{class r{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function wH(r){if(null!==r.offsetParent)return r.scrollWidth;const e=r.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const a=e.scrollWidth;return e.remove(),a}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi))},r.\u0275dir=pr({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,a){2&e&&go("mdc-floating-label--float-above",a.floating)},inputs:{floating:"floating"}}),r})();const Nx="mdc-line-ripple--active",fk="mdc-line-ripple--deactivating";let s8=(()=>{class r{constructor(e,a){this._elementRef=e,this._handleTransitionEnd=d=>{const m=this._elementRef.nativeElement.classList,b=m.contains(fk);"opacity"===d.propertyName&&b&&m.remove(Nx,fk)},a.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(fk),e.add(Nx)}deactivate(){this._elementRef.nativeElement.classList.add(fk)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(oi))},r.\u0275dir=pr({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),r})(),a8=(()=>{class r{constructor(e,a){this._elementRef=e,this._ngZone=a,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(oi))},r.\u0275cmp=Ta({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,a){2&e&&go("mdc-notched-outline--notched",a.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Jj,ngContentSelectors:SU,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,a){1&e&&(Hc(),Eo(0,"div",0),wn(1,"div",1),bo(2),Qn(),Eo(3,"div",2)),2&e&&(Cn(1),el("width",a._getNotchWidth()))},encapsulation:2,changeDetection:0}),r})();const TH={transitionMessages:Ry("transitionMessages",[Kf("enter",Yl({opacity:1,transform:"translateY(0%)"})),q_("void => enter",[Yl({opacity:0,transform:"translateY(-5px)"}),Oy("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let NU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=pr({type:r}),r})();const Mx=new Hn("MatFormField"),u8=new Hn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let aS=0,f8=(()=>{class r{constructor(e,a,d,m,b,T,M,j){this._elementRef=e,this._changeDetectorRef=a,this._ngZone=d,this._dir=m,this._platform=b,this._defaults=T,this._animationMode=M,this._document=j,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+aS++,this._hintLabelId="mat-mdc-hint-"+aS++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new St,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,T&&(T.appearance&&(this.appearance=T.appearance),this._hideRequiredMarker=Boolean(T?.hideRequiredMarker),T.color&&(this.color=T.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ia(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const a=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==a&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Pu(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),No(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Pu(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Pu(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const a=this._control?this._control.ngControl:null;return a&&a[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const a=this._hintChildren?this._hintChildren.find(m=>"start"===m.align):null,d=this._hintChildren?this._hintChildren.find(m=>"end"===m.align):null;a?e.push(a.id):this._hintLabel&&e.push(this._hintLabelId),d&&e.push(d.id)}else this._errorChildren&&e.push(...this._errorChildren.map(a=>a.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const a=this._iconPrefixContainer?.nativeElement,d=this._textPrefixContainer?.nativeElement,m=a?.getBoundingClientRect().width??0,b=d?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${m+b}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const a=e.getRootNode();return a&&a!==e}return document.documentElement.contains(e)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(pd),yt(oi),yt(tS),yt(eu),yt(u8,8),yt(Ki,8),yt(bi))},r.\u0275cmp=Ta({type:r,selectors:[["mat-form-field"]],contentQueries:function(e,a,d){if(1&e&&(ra(d,Px,5),ra(d,Px,7),ra(d,NU,5),ra(d,kU,5),ra(d,o8,5),ra(d,r8,5),ra(d,i8,5)),2&e){let m;Co(m=eo())&&(a._labelChildNonStatic=m.first),Co(m=eo())&&(a._labelChildStatic=m.first),Co(m=eo())&&(a._formFieldControl=m.first),Co(m=eo())&&(a._prefixChildren=m),Co(m=eo())&&(a._suffixChildren=m),Co(m=eo())&&(a._errorChildren=m),Co(m=eo())&&(a._hintChildren=m)}},viewQuery:function(e,a){if(1&e&&(Kc($j,5),Kc(Xj,5),Kc(CU,5),Kc(lg,5),Kc(a8,5),Kc(s8,5)),2&e){let d;Co(d=eo())&&(a._textField=d.first),Co(d=eo())&&(a._iconPrefixContainer=d.first),Co(d=eo())&&(a._textPrefixContainer=d.first),Co(d=eo())&&(a._floatingLabel=d.first),Co(d=eo())&&(a._notchedOutline=d.first),Co(d=eo())&&(a._lineRipple=d.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,a){2&e&&go("mat-mdc-form-field-label-always-float",a._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",a._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",a._hasIconSuffix)("mat-form-field-invalid",a._control.errorState)("mat-form-field-disabled",a._control.disabled)("mat-form-field-autofilled",a._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===a._animationMode)("mat-form-field-appearance-fill","fill"==a.appearance)("mat-form-field-appearance-outline","outline"==a.appearance)("mat-form-field-hide-placeholder",a._hasFloatingLabel()&&!a._shouldLabelFloat())("mat-focused",a._control.focused)("mat-primary","accent"!==a.color&&"warn"!==a.color)("mat-accent","accent"===a.color)("mat-warn","warn"===a.color)("ng-untouched",a._shouldForward("untouched"))("ng-touched",a._shouldForward("touched"))("ng-pristine",a._shouldForward("pristine"))("ng-dirty",a._shouldForward("dirty"))("ng-valid",a._shouldForward("valid"))("ng-invalid",a._shouldForward("invalid"))("ng-pending",a._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[So([{provide:Mx,useExisting:r}])],ngContentSelectors:Op,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,a){1&e&&(Hc(kx),ar(0,Ox,1,1,"ng-template",null,0,pp),wn(2,"div",1,2),co("click",function(m){return a._control.onContainerClick&&a._control.onContainerClick(m)}),ar(4,Dx,1,0,"div",3),wn(5,"div",4),ar(6,TU,2,3,"div",5),ar(7,RU,3,0,"div",6),ar(8,t8,3,0,"div",7),wn(9,"div",8),ar(10,O1,1,1,"ng-template",9),bo(11),Qn(),ar(12,ug,2,0,"div",10),ar(13,n8,2,0,"div",11),Qn(),ar(14,sS,1,0,"div",12),Qn(),wn(15,"div",13),ar(16,X_,2,1,"div",14),ar(17,D1,5,2,"div",15),Qn()),2&e&&(Cn(2),go("mdc-text-field--filled",!a._hasOutline())("mdc-text-field--outlined",a._hasOutline())("mdc-text-field--no-label",!a._hasFloatingLabel())("mdc-text-field--disabled",a._control.disabled)("mdc-text-field--invalid",a._control.errorState),Cn(2),Vn("ngIf",!a._hasOutline()&&!a._control.disabled),Cn(2),Vn("ngIf",a._hasOutline()),Cn(1),Vn("ngIf",a._hasIconPrefix),Cn(1),Vn("ngIf",a._hasTextPrefix),Cn(2),Vn("ngIf",!a._hasOutline()||a._forceDisplayInfixLabel()),Cn(2),Vn("ngIf",a._hasTextSuffix),Cn(1),Vn("ngIf",a._hasIconSuffix),Cn(1),Vn("ngIf",!a._hasOutline()),Cn(1),go("mat-mdc-form-field-subscript-dynamic-size","dynamic"===a.subscriptSizing),Vn("ngSwitch",a._getDisplayedMessages()),Cn(1),Vn("ngSwitchCase","error"),Cn(1),Vn("ngSwitchCase","hint"))},dependencies:[Oc,Vw,w0,hy,q9,i8,lg,a8,s8],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[TH.transitionMessages]},changeDetection:0}),r})(),Z_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,ps,K5,Ms]}),r})();class DH{constructor(t=!1,e,a=!0,d){this._multiple=t,this._emitChanges=a,this.compareWith=d,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new St,e&&e.length&&(t?e.forEach(m=>this._markSelected(m)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(a=>this._markSelected(a));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(a=>this._unmarkSelected(a));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,a=new Set(t);t.forEach(m=>this._markSelected(m)),e.filter(m=>!a.has(m)).forEach(m=>this._unmarkSelected(m));const d=this._hasQueuedChanges();return this._emitChangeEvent(),d}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function mk(r,t){return We((e,a)=>{let d=null,m=0,b=!1;const T=()=>b&&!d&&a.complete();e.subscribe(new De(a,M=>{d?.unsubscribe();let j=0;const re=m++;gn(r(M,re)).subscribe(d=new De(a,_e=>a.next(t?t(M,_e,re,j++):_e),()=>{d=null,T()}))},()=>{b=!0,T()}))})}const NH=["trigger"],A8=["panel"];function MH(r,t){if(1&r&&(wn(0,"span",10),Ur(1),Qn()),2&r){const e=ii();Cn(1),yf(e.placeholder)}}function MU(r,t){if(1&r&&(wn(0,"span",14),Ur(1),Qn()),2&r){const e=ii(2);Cn(1),yf(e.triggerValue)}}function gk(r,t){1&r&&bo(0,0,["*ngSwitchCase","true"])}function xH(r,t){1&r&&(wn(0,"span",11),ar(1,MU,2,1,"span",12),ar(2,gk,1,0,"ng-content",13),Qn()),2&r&&(Vn("ngSwitch",!!ii().customTrigger),Cn(2),Vn("ngSwitchCase",!0))}function xx(r,t){if(1&r){const e=Fo();Yd(),lT(),wn(0,"div",15,16),co("@transformPanel.done",function(d){return Ec(e),bc(ii()._panelDoneAnimatingStream.next(d.toState))})("keydown",function(d){return Ec(e),bc(ii()._handleKeydown(d))}),bo(2,1),Qn()}if(2&r){const e=ii();DP("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Vn("ngClass",e.panelClass)("@transformPanel","showing"),Xi("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const xU=[[["mat-select-trigger"]],"*"],y8=["mat-select-trigger","*"],LH={transformPanelWrap:Ry("transformPanelWrap",[q_("* => void",QQ("@transformPanel",[jQ()],{optional:!0}))]),transformPanel:Ry("transformPanel",[Kf("void",Yl({opacity:0,transform:"scale(1, 0.8)"})),q_("void => showing",Oy("120ms cubic-bezier(0, 0, 0.2, 1)",Yl({opacity:1,transform:"scale(1, 1)"}))),q_("* => void",Oy("100ms linear",Yl({opacity:0})))])};let Lx=0;const Bx=new Hn("mat-select-scroll-strategy"),Fx=new Hn("MAT_SELECT_CONFIG"),BU={provide:Bx,deps:[Dy],useFactory:function LU(r){return()=>r.scrollStrategies.reposition()}},BH=new Hn("MatSelectTrigger");class FU{constructor(t,e){this.source=t,this.value=e}}const S8=ux(cj(YD(z3(class{constructor(r,t,e,a,d){this._elementRef=r,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=a,this.ngControl=d,this.stateChanges=new St}}))));let UU=(()=>{class r extends S8{constructor(e,a,d,m,b,T,M,j,re,_e,Ue,Ge,st,Rt){super(b,m,M,j,_e),this._viewportRuler=e,this._changeDetectorRef=a,this._ngZone=d,this._dir=T,this._parentFormField=re,this._liveAnnouncer=st,this._defaultOptions=Rt,this._panelOpen=!1,this._compareWith=(nn,cn)=>nn===cn,this._uid="mat-select-"+Lx++,this._triggerAriaLabelledBy=null,this._destroy=new St,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Lx++,this._panelDoneAnimatingStream=new St,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function v8(r){return new $e(t=>{gn(r()).subscribe(t)})}(()=>{const nn=this.options;return nn?nn.changes.pipe(h1(nn),mk(()=>No(...nn.map(cn=>cn.onSelectionChange)))):this._ngZone.onStable.pipe(ml(1),mk(()=>this.optionSelectionChanges))}),this.openedChange=new Zi,this._openedStream=this.openedChange.pipe(Gf(nn=>nn),et(()=>{})),this._closedStream=this.openedChange.pipe(Gf(nn=>!nn),et(()=>{})),this.selectionChange=new Zi,this.valueChange=new Zi,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Rt?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Rt.typeaheadDebounceInterval),this._scrollStrategyFactory=Ge,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Ue)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(t1.required)??!1}set required(e){this._required=Ia(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Ia(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Ia(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=W_(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new DH(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(H5(),Pu(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Pu(this._destroy)).subscribe(e=>{e.added.forEach(a=>a.select()),e.removed.forEach(a=>a.deselect())}),this.options.changes.pipe(h1(null),Pu(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),a=this.ngControl;if(e!==this._triggerAriaLabelledBy){const d=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?d.setAttribute("aria-labelledby",e):d.removeAttribute("aria-labelledby")}a&&(this._previousControl!==a.control&&(void 0!==this._previousControl&&null!==a.disabled&&a.disabled!==this.disabled&&(this.disabled=a.disabled),this._previousControl=a.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(a=>a.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const a=e.keyCode,d=40===a||38===a||37===a||39===a,m=13===a||32===a,b=this._keyManager;if(!b.isTyping()&&m&&!d1(e)||(this.multiple||e.altKey)&&d)e.preventDefault(),this.open();else if(!this.multiple){const T=this.selected;b.onKeydown(e);const M=this.selected;M&&T!==M&&this._liveAnnouncer.announce(M.viewValue,1e4)}}_handleOpenKeydown(e){const a=this._keyManager,d=e.keyCode,m=40===d||38===d,b=a.isTyping();if(m&&e.altKey)e.preventDefault(),this.close();else if(b||13!==d&&32!==d||!a.activeItem||d1(e))if(!b&&this._multiple&&65===d&&e.ctrlKey){e.preventDefault();const T=this.options.some(M=>!M.disabled&&!M.selected);this.options.forEach(M=>{M.disabled||(T?M.select():M.deselect())})}else{const T=a.activeItemIndex;a.onKeydown(e),this._multiple&&m&&e.shiftKey&&a.activeItem&&a.activeItemIndex!==T&&a.activeItem._selectViaInteraction()}else e.preventDefault(),a.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(ml(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(a=>a.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(a=>this._selectOptionByValue(a)),this._sortValues();else{const a=this._selectOptionByValue(e);a?this._keyManager.updateActiveItem(a):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const a=this.options.find(d=>{if(this._selectionModel.isSelected(d))return!1;try{return null!=d.value&&this._compareWith(d.value,e)}catch{return!1}});return a&&this._selectionModel.select(a),a}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new q5(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=No(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Pu(e)).subscribe(a=>{this._onSelect(a.source,a.isUserInput),a.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),No(...this.options.map(a=>a._stateChanges)).pipe(Pu(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,a){const d=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(d!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),a&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),a&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),d!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((a,d)=>this.sortComparator?this.sortComparator(a,d,e):e.indexOf(a)-e.indexOf(d)),this.stateChanges.next()}}_propagateChanges(e){let a=null;a=this.multiple?this.selected.map(d=>d.value):this.selected?this.selected.value:e,this._value=a,this.valueChange.emit(a),this._onChange(a),this.selectionChange.emit(this._getChangeEvent(a)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let a=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(a+=" "+this.ariaLabelledby),a}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return r.\u0275fac=function(e){return new(e||r)(yt(cU),yt(pd),yt(oi),yt(Y3),yt(Oi),yt(tS,8),yt(DD,8),yt(s1,8),yt(Mx,8),yt(Ps,10),Qp("tabindex"),yt(Bx),yt(zD),yt(Fx,8))},r.\u0275dir=pr({type:r,viewQuery:function(e,a){if(1&e&&(Kc(NH,5),Kc(A8,5),Kc(mU,5)),2&e){let d;Co(d=eo())&&(a.trigger=d.first),Co(d=eo())&&(a.panel=d.first),Co(d=eo())&&(a._overlayDir=d.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Lr,Al]}),r})(),VU=(()=>{class r extends UU{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Pu(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const a=this.options.toArray()[e];if(a){const d=this.panel.nativeElement,m=function X3(r,t,e){if(e.length){let a=t.toArray(),d=e.toArray(),m=0;for(let b=0;b<r+1;b++)a[b].group&&a[b].group===d[m]&&m++;return m}return 0}(e,this.options,this.optionGroups),b=a._getHostElement();d.scrollTop=0===e&&1===m?0:function DQ(r,t,e,a){return r<e?r:r+t>e+a?Math.max(0,r-a+t):e}(b.offsetTop,b.offsetHeight,d.scrollTop,d.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new FU(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Cx?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Gs(r)))(a||r)}}(),r.\u0275cmp=Ta({type:r,selectors:[["mat-select"]],contentQueries:function(e,a,d){if(1&e&&(ra(d,BH,5),ra(d,$3,5),ra(d,dx,5)),2&e){let m;Co(m=eo())&&(a.customTrigger=m.first),Co(m=eo())&&(a.options=m),Co(m=eo())&&(a.optionGroups=m)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,a){1&e&&co("keydown",function(m){return a._handleKeydown(m)})("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()}),2&e&&(Xi("id",a.id)("tabindex",a.tabIndex)("aria-controls",a.panelOpen?a.id+"-panel":null)("aria-expanded",a.panelOpen)("aria-label",a.ariaLabel||null)("aria-required",a.required.toString())("aria-disabled",a.disabled.toString())("aria-invalid",a.errorState)("aria-activedescendant",a._getAriaActiveDescendant()),go("mat-mdc-select-disabled",a.disabled)("mat-mdc-select-invalid",a.errorState)("mat-mdc-select-required",a.required)("mat-mdc-select-empty",a.empty)("mat-mdc-select-multiple",a.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[So([{provide:NU,useExisting:r},{provide:iS,useExisting:r}]),Lr],ngContentSelectors:y8,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,a){if(1&e&&(Hc(xU),wn(0,"div",0,1),co("click",function(){return a.toggle()}),wn(3,"div",2),ar(4,MH,2,1,"span",3),ar(5,xH,3,2,"span",4),Qn(),wn(6,"div",5)(7,"div",6),Yd(),wn(8,"svg",7),Eo(9,"path",8),Qn()()()(),ar(10,xx,3,9,"ng-template",9),co("backdropClick",function(){return a.close()})("attach",function(){return a._onAttached()})("detach",function(){return a.close()})),2&e){const d=sh(1);Xi("aria-owns",a.panelOpen?a.id+"-panel":null),Cn(3),Vn("ngSwitch",a.empty),Xi("id",a._valueId),Cn(1),Vn("ngSwitchCase",!0),Cn(1),Vn("ngSwitchCase",!1),Cn(5),Vn("cdkConnectedOverlayPanelClass",a._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",a._scrollStrategy)("cdkConnectedOverlayOrigin",a._preferredOverlayOrigin||d)("cdkConnectedOverlayOpen",a.panelOpen)("cdkConnectedOverlayPositions",a._positions)("cdkConnectedOverlayWidth",a._overlayWidth)}},dependencies:[Lw,w0,hy,dD,mU,Cx],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[LH.transformPanel]},changeDetection:0}),r})(),UH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[BU],imports:[ps,gU,hx,Ms,ok,Z_,hx,Ms]}),r})();const Ux=Pc({passive:!0});let VH=(()=>{class r{constructor(e,a){this._platform=e,this._ngZone=a,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return zn;const a=ag(e),d=this._monitoredElements.get(a);if(d)return d.subject;const m=new St,b="cdk-text-field-autofilled",T=M=>{"cdk-text-field-autofill-start"!==M.animationName||a.classList.contains(b)?"cdk-text-field-autofill-end"===M.animationName&&a.classList.contains(b)&&(a.classList.remove(b),this._ngZone.run(()=>m.next({target:M.target,isAutofilled:!1}))):(a.classList.add(b),this._ngZone.run(()=>m.next({target:M.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{a.addEventListener("animationstart",T,Ux),a.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(a,{subject:m,unlisten:()=>{a.removeEventListener("animationstart",T,Ux)}}),m}stopMonitoring(e){const a=ag(e),d=this._monitoredElements.get(a);d&&(d.unlisten(),d.subject.complete(),a.classList.remove("cdk-text-field-autofill-monitored"),a.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(a))}ngOnDestroy(){this._monitoredElements.forEach((e,a)=>this.stopMonitoring(a))}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(oi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),I8=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({}),r})();const HH=new Hn("MAT_INPUT_VALUE_ACCESSOR"),w8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let vk=0;const GH=z3(class{constructor(r,t,e,a){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=e,this.ngControl=a,this.stateChanges=new St}});let T8=(()=>{class r extends GH{constructor(e,a,d,m,b,T,M,j,re,_e){super(T,m,b,d),this._elementRef=e,this._platform=a,this._autofillMonitor=j,this._formField=_e,this._uid="mat-input-"+vk++,this.focused=!1,this.stateChanges=new St,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(st=>Hf().has(st)),this._iOSKeyupListener=st=>{const Rt=st.target;!Rt.value&&0===Rt.selectionStart&&0===Rt.selectionEnd&&(Rt.setSelectionRange(1,1),Rt.setSelectionRange(0,0))};const Ue=this._elementRef.nativeElement,Ge=Ue.nodeName.toLowerCase();this._inputValueAccessor=M||Ue,this._previousNativeValue=this.value,this.id=this.id,a.IOS&&re.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ge,this._isTextarea="textarea"===Ge,this._isInFormField=!!_e,this._isNativeSelect&&(this.controlType=Ue.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=Ia(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(t1.required)??!1}set required(e){this._required=Ia(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Hf().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ia(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=e,e?a.setAttribute("placeholder",e):a.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){w8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,a=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&a&&a.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(eu),yt(Ps,10),yt(DD,8),yt(s1,8),yt(Y3),yt(HH,10),yt(VH),yt(oi),yt(Mx,8))},r.\u0275dir=pr({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,a){1&e&&co("focus",function(){return a._focusChanged(!0)})("blur",function(){return a._focusChanged(!1)})("input",function(){return a._onInput()}),2&e&&(a_("id",a.id)("disabled",a.disabled)("required",a.required),Xi("name",a.name||null)("readonly",a.readonly&&!a._isNativeSelect||null)("aria-invalid",a.empty&&a.required?null:a.errorState)("aria-required",a.required)("id",a.id),go("mat-input-server",a._isServer)("mat-mdc-form-field-textarea-control",a._isInFormField&&a._isTextarea)("mat-mdc-form-field-input-control",a._isInFormField)("mdc-text-field__input",a._isInFormField)("mat-mdc-native-select-inline",a._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[So([{provide:NU,useExisting:r}]),Lr,Al]}),r})(),Mu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,Z_,Z_,I8,Ms]}),r})();function jU(r){return We((t,e)=>{let m,a=null,d=!1;a=t.subscribe(new De(e,void 0,void 0,b=>{m=gn(r(b,jU(r)(t))),a?(a.unsubscribe(),a=null,m.subscribe(e)):d=!0})),d&&(a.unsubscribe(),a=null,m.subscribe(e))})}const KH=["*"];let Vx;function k1(r){return function QU(){if(void 0===Vx&&(Vx=null,typeof window<"u")){const r=window;void 0!==r.trustedTypes&&(Vx=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Vx}()?.createHTML(r)||r}function HU(r){return Error(`Unable to find icon with the name "${r}"`)}function GU(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function WU(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class cS{constructor(t,e,a){this.url=t,this.svgText=e,this.options=a}}let jx=(()=>{class r{constructor(e,a,d,m){this._httpClient=e,this._sanitizer=a,this._errorHandler=m,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=d}addSvgIcon(e,a,d){return this.addSvgIconInNamespace("",e,a,d)}addSvgIconLiteral(e,a,d){return this.addSvgIconLiteralInNamespace("",e,a,d)}addSvgIconInNamespace(e,a,d,m){return this._addSvgIconConfig(e,a,new cS(d,null,m))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,a,d,m){const b=this._sanitizer.sanitize($i.HTML,d);if(!b)throw WU(d);const T=k1(b);return this._addSvgIconConfig(e,a,new cS("",T,m))}addSvgIconSet(e,a){return this.addSvgIconSetInNamespace("",e,a)}addSvgIconSetLiteral(e,a){return this.addSvgIconSetLiteralInNamespace("",e,a)}addSvgIconSetInNamespace(e,a,d){return this._addSvgIconSetConfig(e,new cS(a,null,d))}addSvgIconSetLiteralInNamespace(e,a,d){const m=this._sanitizer.sanitize($i.HTML,a);if(!m)throw WU(a);const b=k1(m);return this._addSvgIconSetConfig(e,new cS("",b,d))}registerFontClassAlias(e,a=e){return this._fontCssClassesByAlias.set(e,a),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const a=this._sanitizer.sanitize($i.RESOURCE_URL,e);if(!a)throw GU(e);const d=this._cachedIconsByUrl.get(a);return d?Wl(Ak(d)):this._loadSvgIconFromConfig(new cS(e,null)).pipe(GM(m=>this._cachedIconsByUrl.set(a,m)),et(m=>Ak(m)))}getNamedSvgIcon(e,a=""){const d=k8(a,e);let m=this._svgIconConfigs.get(d);if(m)return this._getSvgFromConfig(m);if(m=this._getIconConfigFromResolvers(a,e),m)return this._svgIconConfigs.set(d,m),this._getSvgFromConfig(m);const b=this._iconSetConfigs.get(a);return b?this._getSvgFromIconSetConfigs(e,b):function WH(r,t){const e=V(r)?r:()=>r,a=d=>d.error(e());return new $e(t?d=>t.schedule(a,0,d):a)}(HU(d))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Wl(Ak(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(et(a=>Ak(a)))}_getSvgFromIconSetConfigs(e,a){const d=this._extractIconWithNameFromAnySet(e,a);return d?Wl(d):LF(a.filter(b=>!b.svgText).map(b=>this._loadSvgIconSetFromConfig(b).pipe(jU(T=>{const j=`Loading icon set URL: ${this._sanitizer.sanitize($i.RESOURCE_URL,b.url)} failed: ${T.message}`;return this._errorHandler.handleError(new Error(j)),Wl(null)})))).pipe(et(()=>{const b=this._extractIconWithNameFromAnySet(e,a);if(!b)throw HU(e);return b}))}_extractIconWithNameFromAnySet(e,a){for(let d=a.length-1;d>=0;d--){const m=a[d];if(m.svgText&&m.svgText.toString().indexOf(e)>-1){const b=this._svgElementFromConfig(m),T=this._extractSvgIconFromSet(b,e,m.options);if(T)return T}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(GM(a=>e.svgText=a),et(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Wl(null):this._fetchIcon(e).pipe(GM(a=>e.svgText=a))}_extractSvgIconFromSet(e,a,d){const m=e.querySelector(`[id="${a}"]`);if(!m)return null;const b=m.cloneNode(!0);if(b.removeAttribute("id"),"svg"===b.nodeName.toLowerCase())return this._setSvgAttributes(b,d);if("symbol"===b.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(b),d);const T=this._svgElementFromString(k1("<svg></svg>"));return T.appendChild(b),this._setSvgAttributes(T,d)}_svgElementFromString(e){const a=this._document.createElement("DIV");a.innerHTML=e;const d=a.querySelector("svg");if(!d)throw Error("<svg> tag not found");return d}_toSvgElement(e){const a=this._svgElementFromString(k1("<svg></svg>")),d=e.attributes;for(let m=0;m<d.length;m++){const{name:b,value:T}=d[m];"id"!==b&&a.setAttribute(b,T)}for(let m=0;m<e.childNodes.length;m++)e.childNodes[m].nodeType===this._document.ELEMENT_NODE&&a.appendChild(e.childNodes[m].cloneNode(!0));return a}_setSvgAttributes(e,a){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),a&&a.viewBox&&e.setAttribute("viewBox",a.viewBox),e}_fetchIcon(e){const{url:a,options:d}=e,m=d?.withCredentials??!1;if(!this._httpClient)throw function O8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const b=this._sanitizer.sanitize($i.RESOURCE_URL,a);if(!b)throw GU(a);const T=this._inProgressUrlFetches.get(b);if(T)return T;const M=this._httpClient.get(b,{responseType:"text",withCredentials:m}).pipe(et(j=>k1(j)),function R8(r){return We((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}(()=>this._inProgressUrlFetches.delete(b)),Zl());return this._inProgressUrlFetches.set(b,M),M}_addSvgIconConfig(e,a,d){return this._svgIconConfigs.set(k8(e,a),d),this}_addSvgIconSetConfig(e,a){const d=this._iconSetConfigs.get(e);return d?d.push(a):this._iconSetConfigs.set(e,[a]),this}_svgElementFromConfig(e){if(!e.svgElement){const a=this._svgElementFromString(e.svgText);this._setSvgAttributes(a,e.options),e.svgElement=a}return e.svgElement}_getIconConfigFromResolvers(e,a){for(let d=0;d<this._resolvers.length;d++){const m=this._resolvers[d](a,e);if(m)return P8(m)?new cS(m.url,null,m.options):new cS(m,null)}}}return r.\u0275fac=function(e){return new(e||r)(rn(kM,8),rn(MF),rn(bi,8),rn(Yu))},r.\u0275prov=fr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Ak(r){return r.cloneNode(!0)}function k8(r,t){return r+":"+t}function P8(r){return!(!r.url||!r.options)}const ev=cx(class{constructor(r){this._elementRef=r}}),zH=new Hn("MAT_ICON_DEFAULT_OPTIONS"),YH=new Hn("mat-icon-location",{providedIn:"root",factory:function qH(){const r=ma(bi),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),N8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],JH=N8.map(r=>`[${r}]`).join(", "),$H=/^url\(['"]?#(.*?)['"]?\)$/;let XH=(()=>{class r extends ev{constructor(e,a,d,m,b,T){super(e),this._iconRegistry=a,this._location=m,this._errorHandler=b,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=H.EMPTY,T&&(T.color&&(this.color=this.defaultColor=T.color),T.fontSet&&(this.fontSet=T.fontSet)),d||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ia(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const a=this._cleanupFontValue(e);a!==this._fontSet&&(this._fontSet=a,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const a=this._cleanupFontValue(e);a!==this._fontIcon&&(this._fontIcon=a,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const a=e.split(":");switch(a.length){case 1:return["",a[0]];case 2:return a;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const a=this._location.getPathname();a!==this._previousPath&&(this._previousPath=a,this._prependPathToReferences(a))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let a=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();a--;){const d=e.childNodes[a];(1!==d.nodeType||"svg"===d.nodeName.toLowerCase())&&d.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,a=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(d=>d.length>0);this._previousFontSetClass.forEach(d=>e.classList.remove(d)),a.forEach(d=>e.classList.add(d)),this._previousFontSetClass=a,this.fontIcon!==this._previousFontIconClass&&!a.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const a=this._elementsWithExternalReferences;a&&a.forEach((d,m)=>{d.forEach(b=>{m.setAttribute(b.name,`url('${e}#${b.value}')`)})})}_cacheChildrenWithExternalReferences(e){const a=e.querySelectorAll(JH),d=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let m=0;m<a.length;m++)N8.forEach(b=>{const T=a[m],M=T.getAttribute(b),j=M?M.match($H):null;if(j){let re=d.get(T);re||(re=[],d.set(T,re)),re.push({name:b,value:j[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[a,d]=this._splitIconName(e);a&&(this._svgNamespace=a),d&&(this._svgName=d),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(d,a).pipe(ml(1)).subscribe(m=>this._setSvgElement(m),m=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${a}:${d}! ${m.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(jx),Qp("aria-hidden"),yt(YH),yt(Yu),yt(zH,8))},r.\u0275cmp=Ta({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,a){2&e&&(Xi("data-mat-icon-type",a._usingFontIcon()?"font":"svg")("data-mat-icon-name",a._svgName||a.fontIcon)("data-mat-icon-namespace",a._svgNamespace||a.fontSet)("fontIcon",a._usingFontIcon()?a.fontIcon:null),go("mat-icon-inline",a.inline)("mat-icon-no-color","primary"!==a.color&&"accent"!==a.color&&"warn"!==a.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Lr],ngContentSelectors:KH,decls:1,vars:0,template:function(e,a){1&e&&(Hc(),bo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),r})(),ZH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[Ms,Ms]}),r})();const M8=["determinateSpinner"];function eG(r,t){if(1&r&&(Yd(),wn(0,"svg",11),Eo(1,"circle",12),Qn()),2&r){const e=ii();Xi("viewBox",e._viewBox()),Cn(1),el("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Xi("r",e._circleRadius())}}const tG=cx(class{constructor(r){this._elementRef=r}},"primary"),nG=new Hn("mat-progress-spinner-default-options",{providedIn:"root",factory:function rG(){return{diameter:x8}}}),x8=100;let iG=(()=>{class r extends tG{constructor(e,a,d){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=x8,this._noopAnimations="NoopAnimations"===a&&!!d&&!d._forceAnimations,d&&(d.color&&(this.color=this.defaultColor=d.color),d.diameter&&(this.diameter=d.diameter),d.strokeWidth&&(this.strokeWidth=d.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,W_(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=W_(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=W_(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(Ki,8),yt(nG))},r.\u0275cmp=Ta({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,a){if(1&e&&Kc(M8,5),2&e){let d;Co(d=eo())&&(a._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,a){2&e&&(Xi("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===a.mode?a.value:null)("mode",a.mode),el("width",a.diameter,"px")("height",a.diameter,"px"),go("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===a.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Lr],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,a){if(1&e&&(ar(0,eG,2,8,"ng-template",null,0,pp),wn(2,"div",1,2),Yd(),wn(4,"svg",3),Eo(5,"circle",4),Qn()(),lT(),wn(6,"div",5)(7,"div",6)(8,"div",7),vu(9,8),Qn(),wn(10,"div",9),vu(11,8),Qn(),wn(12,"div",10),vu(13,8),Qn()()()),2&e){const d=sh(1);Cn(4),Xi("viewBox",a._viewBox()),Cn(1),el("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),Xi("r",a._circleRadius()),Cn(4),Vn("ngTemplateOutlet",d),Cn(2),Vn("ngTemplateOutlet",d),Cn(2),Vn("ngTemplateOutlet",d)}},dependencies:[Vw],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),P1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[ps,Ms]}),r})(),Qx=0;const L8=YD(class{}),zU="mat-badge-content";let B8=(()=>{class r extends L8{constructor(e,a,d,m,b){super(),this._ngZone=e,this._elementRef=a,this._ariaDescriber=d,this._renderer=m,this._animationMode=b,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=Qx++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=Ia(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=Ia(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),a="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(zU),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(a)})}):e.classList.add(a),e}_updateRenderedContent(e){const a=`${e??""}`.trim();this._isInitialized&&a&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=a),this._content=a}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const a=this._elementRef.nativeElement.classList;a.remove(`mat-badge-${this._color}`),e&&a.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${zU}`);for(const a of Array.from(e))a!==this._badgeElement&&a.remove()}}return r.\u0275fac=function(e){return new(e||r)(yt(oi),yt(Oi),yt(x3),yt(pu),yt(Ki,8))},r.\u0275dir=pr({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,a){2&e&&go("mat-badge-overlap",a.overlap)("mat-badge-above",a.isAbove())("mat-badge-below",!a.isAbove())("mat-badge-before",!a.isAfter())("mat-badge-after",a.isAfter())("mat-badge-small","small"===a.size)("mat-badge-medium","medium"===a.size)("mat-badge-large","large"===a.size)("mat-badge-hidden",a.hidden||!a.content)("mat-badge-disabled",a.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[Lr]}),r})(),F8=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({imports:[tj,Ms,Ms]}),r})();function YU(r,t){return t?e=>qM(t.pipe(ml(1),function U8(){return We((r,t)=>{r.subscribe(new De(t,de))})}()),e.pipe(YU(r))):Lu((e,a)=>r(e,a).pipe(ml(1),function V8(r){return et(()=>r)}(e)))}function qU(r,t=k3){const e=Tj(r,t);return YU(()=>e)}const j8=["mat-menu-item",""];function Q8(r,t){1&r&&(Yd(),wn(0,"svg",3),Eo(1,"polygon",4),Qn())}const H8=[[["mat-icon"]],"*"],G8=["mat-icon","*"];function W8(r,t){if(1&r){const e=Fo();wn(0,"div",0),co("keydown",function(d){return Ec(e),bc(ii()._handleKeydown(d))})("click",function(){return Ec(e),bc(ii().closed.emit("click"))})("@transformMenu.start",function(d){return Ec(e),bc(ii()._onAnimationStart(d))})("@transformMenu.done",function(d){return Ec(e),bc(ii()._onAnimationDone(d))}),wn(1,"div",1),bo(2),Qn()()}if(2&r){const e=ii();Vn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Xi("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const K8=["*"],Hx=new Hn("MAT_MENU_PANEL"),z8=ux(YD(class{}));let qi=(()=>{class r extends z8{constructor(e,a,d,m,b){super(),this._elementRef=e,this._document=a,this._focusMonitor=d,this._parentMenu=m,this._changeDetectorRef=b,this.role="menuitem",this._hovered=new St,this._focused=new St,this._highlighted=!1,this._triggersSubmenu=!1,m?.addItem?.(this)}focus(e,a){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,a):this._getHostElement().focus(a),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),a=e.querySelectorAll("mat-icon, .material-icons");for(let d=0;d<a.length;d++)a[d].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(bi),yt(nx),yt(Hx,8),yt(pd))},r.\u0275cmp=Ta({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,a){1&e&&co("click",function(m){return a._checkDisabled(m)})("mouseenter",function(){return a._handleMouseEnter()}),2&e&&(Xi("role",a.role)("tabindex",a._getTabIndex())("aria-disabled",a.disabled)("disabled",a.disabled||null),go("mat-mdc-menu-item-highlighted",a._highlighted)("mat-mdc-menu-item-submenu-trigger",a._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Lr],attrs:j8,ngContentSelectors:G8,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,a){1&e&&(Hc(H8),bo(0),wn(1,"span",0),bo(2,1),Qn(),Eo(3,"div",1),ar(4,Q8,2,0,"svg",2)),2&e&&(Cn(3),Vn("matRippleDisabled",a.disableRipple||a.disabled)("matRippleTrigger",a._getHostElement()),Cn(1),Vn("ngIf",a._triggersSubmenu))},dependencies:[Oc,g1],encapsulation:2,changeDetection:0}),r})();const Y8=new Hn("MatMenuContent"),Ph={transformMenu:Ry("transformMenu",[Kf("void",Yl({opacity:0,transform:"scale(0.8)"})),q_("void => enter",Oy("120ms cubic-bezier(0, 0, 0.2, 1)",Yl({opacity:1,transform:"scale(1)"}))),q_("* => void",Oy("100ms 25ms linear",Yl({opacity:0})))]),fadeInItems:Ry("fadeInItems",[Kf("showing",Yl({opacity:1})),q_("void => *",[Yl({opacity:0}),Oy("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let N1=0;const qs=new Hn("mat-menu-default-options",{providedIn:"root",factory:function q8(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yk=(()=>{class r{constructor(e,a,d,m){this._elementRef=e,this._ngZone=a,this._defaultOptions=d,this._changeDetectorRef=m,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new ud,this._classList={},this._panelAnimationState="void",this._animationDone=new St,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Zi,this.close=this.closed,this.panelId="mat-menu-panel-"+N1++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Ia(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ia(e)}set panelClass(e){const a=this._previousPanelClass;a&&a.length&&a.split(" ").forEach(d=>{this._classList[d]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(d=>{this._classList[d]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ex(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(h1(this._directDescendantItems),mk(e=>No(...e.map(a=>a._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const a=this._keyManager;if("enter"===this._panelAnimationState&&a.activeItem?._hasFocus()){const d=e.toArray(),m=Math.max(0,Math.min(d.length-1,a.activeItemIndex||0));d[m]&&!d[m].disabled?a.setActiveItem(m):a.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(h1(this._directDescendantItems),mk(a=>No(...a.map(d=>d._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const a=e.keyCode,d=this._keyManager;switch(a){case 27:d1(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===a||40===a)&&d.setFocusOrigin("keyboard"),void d.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(ml(1)).subscribe(()=>{let a=null;if(this._directDescendantItems.length&&(a=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!a||!a.contains(document.activeElement)){const d=this._keyManager;d.setFocusOrigin(e).setFirstItemActive(),!d.activeItem&&a&&a.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const a=Math.min(this._baseElevation+e,24),d=`${this._elevationPrefix}${a}`,m=Object.keys(this._classList).find(b=>b.startsWith(this._elevationPrefix));(!m||m===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[d]=!0,this._previousElevation=d)}setPositionClasses(e=this.xPosition,a=this.yPosition){const d=this._classList;d["mat-menu-before"]="before"===e,d["mat-menu-after"]="after"===e,d["mat-menu-above"]="above"===a,d["mat-menu-below"]="below"===a,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(h1(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(a=>a._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(oi),yt(qs),yt(pd))},r.\u0275dir=pr({type:r,contentQueries:function(e,a,d){if(1&e&&(ra(d,Y8,5),ra(d,qi,5),ra(d,qi,4)),2&e){let m;Co(m=eo())&&(a.lazyContent=m.first),Co(m=eo())&&(a._allItems=m),Co(m=eo())&&(a.items=m)}},viewQuery:function(e,a){if(1&e&&Kc(tl,5),2&e){let d;Co(d=eo())&&(a.templateRef=d.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),pG=(()=>{class r extends yk{constructor(e,a,d,m){super(e,a,d,m),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return r.\u0275fac=function(e){return new(e||r)(yt(Oi),yt(oi),yt(qs),yt(pd))},r.\u0275cmp=Ta({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,a){2&e&&Xi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[So([{provide:Hx,useExisting:r}]),Lr],ngContentSelectors:K8,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,a){1&e&&(Hc(),ar(0,W8,3,6,"ng-template"))},dependencies:[Lw],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Ph.transformMenu,Ph.fadeInItems]},changeDetection:0}),r})();const Gx=new Hn("mat-menu-scroll-strategy"),mG={provide:Gx,deps:[Dy],useFactory:function fG(r){return()=>r.scrollStrategies.reposition()}},J8=Pc({passive:!0});let gG=(()=>{class r{constructor(e,a,d,m,b,T,M,j,re){this._overlay=e,this._element=a,this._viewContainerRef=d,this._menuItemInstance=T,this._dir=M,this._focusMonitor=j,this._ngZone=re,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=H.EMPTY,this._hoverSubscription=H.EMPTY,this._menuCloseSubscription=H.EMPTY,this._handleTouchStart=_e=>{Cy(_e)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Zi,this.onMenuOpen=this.menuOpened,this.menuClosed=new Zi,this.onMenuClose=this.menuClosed,this._scrollStrategy=m,this._parentMaterialMenu=b instanceof yk?b:void 0,a.nativeElement.addEventListener("touchstart",this._handleTouchStart,J8)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(a=>{this._destroyMenu(a),("click"===a||"tab"===a)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(a)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,J8),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const a=this._createOverlay(e),d=a.getConfig(),m=d.positionStrategy;this._setPosition(e,m),d.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),a.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof yk&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Pu(e.close)).subscribe(()=>{m.withLockedPosition(!1).reapplyLastPosition(),m.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,a){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,a):this._element.nativeElement.focus(a)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const a=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,a instanceof yk?(a._resetAnimation(),a.lazyContent?a._animationDone.pipe(Gf(d=>"void"===d.toState),ml(1),Pu(a.lazyContent._attached)).subscribe({next:()=>a.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),a?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let a=0,d=e.parentMenu;for(;d;)a++,d=d.parentMenu;e.setElevation(a)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const a=this._getOverlayConfig(e);this._subscribeToPositions(e,a.positionStrategy),this._overlayRef=this._overlay.create(a),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new sk({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,a){e.setPositionClasses&&a.positionChanges.subscribe(d=>{const m="start"===d.connectionPair.overlayX?"after":"before",b="top"===d.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(m,b)):e.setPositionClasses(m,b)})}_setPosition(e,a){let[d,m]="before"===e.xPosition?["end","start"]:["start","end"],[b,T]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[M,j]=[b,T],[re,_e]=[d,m],Ue=0;if(this.triggersSubmenu()){if(_e=d="before"===e.xPosition?"start":"end",m=re="end"===d?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Ge=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ge?Ge._getHostElement().offsetTop:0}Ue="bottom"===b?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(M="top"===b?"bottom":"top",j="top"===T?"bottom":"top");a.withPositions([{originX:d,originY:M,overlayX:re,overlayY:b,offsetY:Ue},{originX:m,originY:M,overlayX:_e,overlayY:b,offsetY:Ue},{originX:d,originY:j,overlayX:re,overlayY:T,offsetY:-Ue},{originX:m,originY:j,overlayX:_e,overlayY:T,offsetY:-Ue}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),a=this._overlayRef.detachments();return No(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Wl(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Gf(b=>b!==this._menuItemInstance),Gf(()=>this._menuOpen)):Wl(),a)}_handleMousedown(e){Nu(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const a=e.keyCode;(13===a||32===a)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===a&&"ltr"===this.dir||37===a&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Gf(e=>e===this._menuItemInstance&&!e.disabled),qU(0,Ax)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof yk&&this.menu._isAnimating?this.menu._animationDone.pipe(ml(1),qU(0,Ax),Pu(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new ek(e.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(yt(Dy),yt(Oi),yt(nl),yt(Gx),yt(Hx,8),yt(qi,10),yt(tS,8),yt(nx),yt(oi))},r.\u0275dir=pr({type:r,hostVars:3,hostBindings:function(e,a){1&e&&co("click",function(m){return a._handleClick(m)})("mousedown",function(m){return a._handleMousedown(m)})("keydown",function(m){return a._handleKeydown(m)}),2&e&&Xi("aria-haspopup",a.menu?"menu":null)("aria-expanded",a.menuOpen)("aria-controls",a.menuOpen?a.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),_G=(()=>{class r extends gG{}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Gs(r)))(a||r)}}(),r.\u0275dir=pr({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Lr]}),r})(),vG=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:[mG],imports:[ps,zl,Ms,gU,ok,Ms]}),r})();class Wx{transform(t,...e){return Array.from(t,([a,d])=>({name:a,value:d}))}static#e=this.\u0275fac=function(e){return new(e||Wx)};static#t=this.\u0275pipe=Ja({name:"twilio",type:Wx,pure:!1})}function AG(r,t){1&r&&(wn(0,"button",17)(1,"mat-icon"),Ur(2,"login"),Qn()())}function yG(r,t){if(1&r){const e=Fo();wn(0,"form",7),co("ngSubmit",function(){Ec(e);const d=ii();return bc(d.authorize(d.configForm.value))}),wn(1,"mat-form-field",8)(2,"mat-label"),Ur(3,"Video SDK Provider"),Qn(),wn(4,"mat-select",9)(5,"mat-option",10),Ur(6,"Zoom Video SDK"),Qn(),wn(7,"mat-option",11),Ur(8,"Twilio Video SDK"),Qn()()(),wn(9,"mat-form-field",8)(10,"mat-label"),Ur(11,"Your Name"),Qn(),Eo(12,"input",12),wn(13,"mat-icon",13),Ur(14,"face"),Qn()(),wn(15,"mat-form-field",8)(16,"mat-label"),Ur(17,"Session Name"),Qn(),Eo(18,"input",14),wn(19,"mat-icon",13),Ur(20,"meeting_room"),Qn()(),wn(21,"mat-form-field",8)(22,"mat-label"),Ur(23,"Session Passcode"),Qn(),Eo(24,"input",15),wn(25,"mat-icon",13),Ur(26,"vpn_key"),Qn()(),ar(27,AG,3,0,"button",16),Qn()}if(2&r){const e=ii();Vn("formGroup",e.configForm),Cn(27),Vn("ngIf",!e.session)}}function EG(r,t){if(1&r&&(wn(0,"div",18)(1,"h1"),Ur(2),Qn()()),2&r){const e=ii();Cn(2),uh("",e.videoSDKProvider," Video SDK")}}function X8(r,t){if(1&r){const e=Fo();wn(0,"button",22),co("click",function(){return Ec(e),bc(ii(2).startAudio())}),wn(1,"mat-icon"),Ur(2,"volume_off"),Qn()()}}function bG(r,t){if(1&r){const e=Fo();wn(0,"button",22),co("click",function(){return Ec(e),bc(ii(2).mute())}),wn(1,"mat-icon"),Ur(2,"mic"),Qn()()}}function SG(r,t){if(1&r){const e=Fo();wn(0,"button",22),co("click",function(){return Ec(e),bc(ii(2).unmute())}),wn(1,"mat-icon"),Ur(2,"mic_off"),Qn()()}}function CG(r,t){if(1&r){const e=Fo();wn(0,"button",22),co("click",function(){return Ec(e),bc(ii(2).stopCamera())}),wn(1,"mat-icon"),Ur(2,"videocam"),Qn()()}}function Z8(r,t){if(1&r){const e=Fo();wn(0,"button",22),co("click",function(){return Ec(e),bc(ii(2).startCamera())}),wn(1,"mat-icon"),Ur(2,"videocam_off"),Qn()()}}function e6(r,t){if(1&r&&(wn(0,"button",26),Ur(1),Qn()),2&r){const e=t.$implicit;Cn(1),yf(e.displayName)}}function t6(r,t){if(1&r&&(Di(0),wn(1,"button",23)(2,"mat-icon"),Ur(3,"people"),Qn()(),wn(4,"mat-menu",null,24),ar(6,e6,2,1,"button",25),Qn(),Qc()),2&r){const e=sh(5),a=ii(2);Cn(1),Vn("matMenuTriggerFor",e)("matBadge",a.zoomVideo.getAllUser().length),Cn(5),Vn("ngForOf",a.zoomVideo.getAllUser())}}function n6(r,t){if(1&r&&(wn(0,"button",26),Ur(1),Qn()),2&r){const e=t.$implicit;Cn(1),yf(e.value.identity)}}function IG(r,t){if(1&r&&(Di(0),wn(1,"button",23)(2,"mat-icon"),Ur(3,"people"),Qn()(),wn(4,"mat-menu",null,24)(6,"button",26),Ur(7),Qn(),ar(8,n6,2,1,"button",25),function nN(r,t){const e=Hi();let a;const d=r+22;e.firstCreatePass?(a=function Tf(r,t){if(t)for(let e=t.length-1;e>=0;e--){const a=t[e];if(r===a.name)return a}}(t,e.pipeRegistry),e.data[d]=a,a.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(d,a.onDestroy)):a=e.data[d];const m=a.factory||(a.factory=Sg(a.type)),b=td(yt);try{const T=El(!1),M=m();return El(T),function gb(r,t,e,a){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=a}(e,yn(),d,M),M}finally{td(b)}}(9,"twilio"),Qn(),Qc()),2&r){const e=sh(5),a=ii(2);Cn(1),Vn("matMenuTriggerFor",e)("matBadge",a.twilioSession.participants.size+1),Cn(6),yf(a.twilioSession.localParticipant.identity),Cn(1),Vn("ngForOf",rN(9,4,a.twilioSession.participants))}}function wG(r,t){if(1&r){const e=Fo();wn(0,"div",19),ar(1,X8,3,0,"button",20),ar(2,bG,3,0,"button",20),ar(3,SG,3,0,"button",20),ar(4,CG,3,0,"button",20),ar(5,Z8,3,0,"button",20),ar(6,t6,7,3,"ng-container",6),ar(7,IG,10,6,"ng-container",6),wn(8,"button",21),co("click",function(){return Ec(e),bc(ii().leave())}),wn(9,"mat-icon"),Ur(10,"logout"),Qn()()()}if(2&r){const e=ii();Cn(1),Vn("ngIf",!e.mic&&!e.audio),Cn(1),Vn("ngIf",e.mic&&e.audio),Cn(1),Vn("ngIf",!e.mic&&e.audio),Cn(1),Vn("ngIf",e.camera),Cn(1),Vn("ngIf",!e.camera),Cn(1),Vn("ngIf","zoom"===e.videoSDKProvider),Cn(1),Vn("ngIf","twilio"===e.videoSDKProvider&&e.twilioSession.participants)}}function TG(r,t){1&r&&(wn(0,"div",27),Eo(1,"mat-spinner"),Qn())}function r6(r,t){1&r&&Eo(0,"mat-spinner")}function RG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_off"),Qn())}function OG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_on"),Qn())}function i6(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"volume_off"),Qn())}function DG(r,t){if(1&r&&(wn(0,"p"),ar(1,RG,2,0,"mat-icon",6),ar(2,OG,2,0,"mat-icon",6),ar(3,i6,2,0,"mat-icon",6),Ur(4),Qn()),2&r){const e=ii(2);Cn(1),Vn("ngIf",e.audio&&!e.mic),Cn(1),Vn("ngIf",e.audio&&e.mic),Cn(1),Vn("ngIf",!e.audio),Cn(1),uh(" ",e.zoomVideo.getCurrentUserInfo().displayName," (me) ")}}function o6(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"sentiment_satisfied_alt"),Qn())}function Ek(r,t){if(1&r&&(Di(0),ar(1,DG,5,4,"p",6),ar(2,o6,2,0,"mat-icon",6),Eo(3,"video",28)(4,"canvas",29),Qc()),2&r){const e=ii();Cn(1),Vn("ngIf",e.zoomVideo&&e.zoomVideo.getCurrentUserInfo()),Cn(1),Vn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Vn("hidden",!e.useVideoElementForZoom),Cn(1),Vn("hidden",!e.useCanvasElementForZoom)}}function kG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_off"),Qn())}function s6(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_on"),Qn())}function PG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"volume_off"),Qn())}function NG(r,t){if(1&r&&(wn(0,"p"),ar(1,kG,2,0,"mat-icon",6),ar(2,s6,2,0,"mat-icon",6),ar(3,PG,2,0,"mat-icon",6),Ur(4),Qn()),2&r){const e=ii(2);Cn(1),Vn("ngIf",e.audio&&!e.mic),Cn(1),Vn("ngIf",e.audio&&e.mic),Cn(1),Vn("ngIf",!e.audio),Cn(1),uh(" ",e.twilioSession.localParticipant.identity," (me) ")}}function MG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"sentiment_satisfied_alt"),Qn())}function Wa(r,t){if(1&r&&(Di(0),ar(1,NG,5,4,"p",6),ar(2,MG,2,0,"mat-icon",6),Eo(3,"div",30),Qc()),2&r){const e=ii();Cn(1),Vn("ngIf",e.twilioSession),Cn(1),Vn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Vn("hidden",!e.camera)}}function M1(r,t){1&r&&(wn(0,"p"),Ur(1,"Waiting for others to join..."),Qn())}function JU(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_off"),Qn())}function xG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_on"),Qn())}function LG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"volume_off"),Qn())}function bk(r,t){if(1&r&&(wn(0,"p"),ar(1,JU,2,0,"mat-icon",6),ar(2,xG,2,0,"mat-icon",6),ar(3,LG,2,0,"mat-icon",6),Ur(4),Qn()),2&r){const e=ii(2);Cn(1),Vn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),Cn(1),Vn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),Cn(1),Vn("ngIf",!e.activeSpeaker.audio),Cn(1),uh(" ",e.activeSpeaker.displayName," ")}}function BG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"insert_emoticon"),Qn())}function x1(r,t){if(1&r&&Eo(0,"canvas",32),2&r){const e=ii(2);Vn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function uS(r,t){if(1&r&&(Di(0),ar(1,bk,5,4,"p",6),ar(2,BG,2,0,"mat-icon",6),ar(3,x1,1,1,"canvas",31),Qc()),2&r){const e=ii();Cn(1),Vn("ngIf",e.activeSpeaker),Cn(1),Vn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),Cn(1),Vn("ngIf",e.zoomVideo)}}function $U(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_off"),Qn())}function mc(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"mic_on"),Qn())}function FG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"volume_off"),Qn())}function UG(r,t){if(1&r&&(wn(0,"p"),ar(1,$U,2,0,"mat-icon",6),ar(2,mc,2,0,"mat-icon",6),ar(3,FG,2,0,"mat-icon",6),Ur(4),Qn()),2&r){const e=ii(2);Cn(1),Vn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),Cn(1),Vn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),Cn(1),Vn("ngIf",!e.activeSpeaker.value.audioTracks.size),Cn(1),uh(" ",e.activeSpeaker.value.identity," ")}}function VG(r,t){1&r&&(wn(0,"mat-icon"),Ur(1,"insert_emoticon"),Qn())}function jG(r,t){if(1&r&&(Di(0),ar(1,UG,5,4,"p",6),ar(2,VG,2,0,"mat-icon",6),Eo(3,"div",33),Qc()),2&r){const e=ii();Cn(1),Vn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),Cn(1),Vn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),Cn(1),Vn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}class L1{constructor(t,e,a,d,m){this.platform=t,this.locationStrategy=e,this.httpClient=a,this._snackBar=m,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.twilioVideo=c5,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new lr({videoSDKProvider:new Ip("zoom"),yourName:new Ip("User A"),sessionName:new Ip("testsdk"),sessionPasscode:new Ip("zoom123")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://or116ttpz8.execute-api.us-west-1.amazonaws.com/default/videosdk",JSON.stringify({sessionName:t.sessionName,role:0})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://twiliovideo-auth-server.herokuapp.com",{sessionName:t.sessionName,identity:t.yourName}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("http://localhost:4400",{sessionName:t.sessionName,role:"1"}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomVideo=l3().createClient(),this.zoomVideo.init("en-US","CDN"),this.zoomVideo.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(a=>{console.log(a),console.log(this.zoomVideo.getSessionInfo()),this.zoomSession=this.zoomVideo.getMediaStream(),this.sessionLoading=!1,this.session=!0,console.log(this.zoomVideo.getAllUser()),this.zoomVideo.getAllUser().length>1&&(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(d=>{console.log(d)})),console.log("active speaker",this.activeSpeaker)),this.zoomVideo.on("media-sdk-change",d=>{"audio"===d.type&&"success"===d.result&&("encode"===d.action?this.zoomAudioEncode=!0:"decode"===d.action&&(this.zoomAudioDecode=!0))}),this.zoomVideo.on("user-added",d=>{this._snackBar.open(d[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",d),console.log(this.zoomVideo.getAllUser()),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>d[0].userId===m.userId)[0])}),this.zoomVideo.on("user-updated",d=>{this.zoomVideo.getCurrentUserInfo()&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&d[0].userId===this.activeSpeaker.userId&&("audio"in d[0]?this.activeSpeaker.audio=d[0].audio:"muted"in d[0]&&(this.activeSpeaker.muted=d[0].muted))}),this.zoomVideo.on("user-removed",d=>{this.activeSpeaker.userId===d[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomVideo.getAllUser().length>1?(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(a)})):this.activeSpeaker=null),this._snackBar.open(d[0].userId+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomVideo.on("active-speaker",d=>{this.activeSpeaker.userId!==d[0].userId&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&(console.log("new active speaker",d),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>d[0].userId===m.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(a)}))}),this.zoomVideo.on("peer-video-state-change",d=>{(!this.activeSpeaker||d.userId===this.activeSpeaker.userId)&&("Start"===d.action?this.zoomSession.renderVideo(document.getElementById("participant-canvas"),d.userId,1920,1080,0,0,2).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(m=>{console.log(m)}):"Stop"===d.action&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),d.userId).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(m=>{console.log(m)}))})}).catch(a=>{console.log(a),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?this.twilioVideo.connect(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(a=>{this.twilioSession=a,console.log(`Successfully joined a Room: ${this.twilioSession}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioSession.participants),console.log(),Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioSession.participants.forEach(m=>{console.log(m),m.tracks.forEach(b=>{console.log(b),b.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute?")}),b.track.on("enabled",()=>{console.log("did I unmute?")}))}),m.on("trackSubscribed",b=>{console.log(b),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),b.on("enabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),m.on("trackUnsubscribed",b=>{console.log("a video was stopped"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantConnected",m=>{console.log(m),this._snackBar.open(m.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioSession.participants,([b,T])=>({name:b,value:T})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([b,T])=>({name:b,value:T}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),m.tracks.forEach(b=>{console.log(b),b.track&&(document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(m)}),b.track.on("enabled",()=>{console.log("did I unmute? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),m.on("trackSubscribed",b=>{console.log(b),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{console.log("did I mute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),b.on("enabled",()=>{console.log("did I unmute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),m.on("trackUnsubscribed",b=>{console.log("a video was stopped"),console.log("removing video?"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantDisconnected",m=>{console.log("someone left",m),m.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioSession.participants,([T,M])=>({name:T,value:M}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([T,M])=>({name:T,value:M}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([T,M])=>({name:T,value:M}))[0].value.track.attach()))),this._snackBar.open(m.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioSession.on("dominantSpeakerChanged",m=>{console.log(m),console.log(m.identity,m.sid),console.log(m.sid===this.activeSpeaker.value.sid),m&&m.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=m,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([T,M])=>({name:T,value:M}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([T,M])=>({name:T,value:M}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioSession.localParticipant);let d=Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b}));console.log(d)}).catch(a=>{console.log(a),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient=a5().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t).then(a=>{console.log(a),this.sessionLoading=!1,this.session=!0}).catch(a=>{console.log(a),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider&&this.twilioVideo.createLocalAudioTrack().then(t=>{this.twilioSession.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack(),console.log("agora mic"),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack().setEnabled(!1),this.micLoading=!1,this.mic=!1)}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?this.zoomSession.isRenderSelfViewWithVideoElement()?this.zoomSession.startVideo({videoElement:document.getElementById("self-view-video")}).then(()=>{this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):this.zoomSession.startVideo().then(()=>{this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioSession.participants),console.log(this.twilioSession.participants.values()),this.twilioVideo.createLocalVideoTrack({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioSession.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack(),this.cameraLoading=!1,this.camera=!0)}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomSession.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack().setEnabled(!1),this.cameraLoading=!1,this.camera=!1)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomVideo.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.querySelector("audio")?.remove()}),this.twilioSession.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||L1)(yt(eu),yt(_0),yt(kM),yt(bi),yt(oS))};static#t=this.\u0275cmp=Ta({type:L1,selectors:[["app-root"]],decls:14,vars:13,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","videoSDKProvider",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["mat-fab","","color","primary",4,"ngIf"],["mat-fab","","color","primary"],[1,"videoSDKProvider"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"]],template:function(e,a){1&e&&(ar(0,yG,28,2,"form",0),ar(1,EG,3,1,"div",1),ar(2,wG,11,7,"div",2),ar(3,TG,2,0,"div",3),wn(4,"div",4)(5,"mat-grid-list",5),co("resize",function(m){return a.onResize(m)},0,lf),wn(6,"mat-grid-tile"),ar(7,r6,1,0,"mat-spinner",6),ar(8,Ek,5,4,"ng-container",6),ar(9,Wa,4,3,"ng-container",6),Qn(),wn(10,"mat-grid-tile"),ar(11,M1,2,0,"p",6),ar(12,uS,4,3,"ng-container",6),ar(13,jG,4,3,"ng-container",6),Qn()()()),2&e&&(Vn("ngIf",!a.session&&!a.sessionLoading),Cn(1),Vn("ngIf",a.session&&!a.sessionLoading),Cn(1),Vn("ngIf",a.session&&!a.sessionLoading),Cn(1),Vn("ngIf",a.sessionLoading),Cn(1),el("display",a.session?"flex":"none"),Cn(1),Vn("cols",a.breakpoint),Cn(2),Vn("ngIf",a.cameraLoading),Cn(1),Vn("ngIf","zoom"===a.videoSDKProvider),Cn(1),Vn("ngIf","twilio"===a.videoSDKProvider),Cn(2),Vn("ngIf",!a.activeSpeaker),Cn(1),Vn("ngIf","zoom"===a.videoSDKProvider),Cn(1),Vn("ngIf","twilio"===a.videoSDKProvider))},dependencies:[_d,Oc,z4,e1,Du,Li,s1,e3,Yj,EU,f8,Px,PU,VU,$3,T8,mj,XH,iG,B8,pG,qi,_G,Wx],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.videoSDKProvider[_ngcontent-%COMP%]{position:fixed;top:20px;display:flex;justify-content:center;width:100%;z-index:2;text-transform:capitalize}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function c6(r){return new vn(3e3,!1)}function Py(){return typeof window<"u"&&typeof window.document<"u"}function qx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ny(r){switch(r.length){case 0:return new XD;case 1:return r[0];default:return new Aj(r)}}function nV(r,t,e,a,d=new Map,m=new Map){const b=[],T=[];let M=-1,j=null;if(a.forEach(re=>{const _e=re.get("offset"),Ue=_e==M,Ge=Ue&&j||new Map;re.forEach((st,Rt)=>{let nn=Rt,cn=st;if("offset"!==Rt)switch(nn=t.normalizePropertyName(nn,b),cn){case"!":cn=d.get(Rt);break;case Y_:cn=m.get(Rt);break;default:cn=t.normalizeStyleValue(Rt,nn,cn,b)}Ge.set(nn,cn)}),Ue||T.push(Ge),j=Ge,M=_e}),b.length)throw function zx(r){return new vn(3502,!1)}();return T}function qf(r,t,e,a){switch(t){case"start":r.onStart(()=>a(e&&dS(e,"start",r)));break;case"done":r.onDone(()=>a(e&&dS(e,"done",r)));break;case"destroy":r.onDestroy(()=>a(e&&dS(e,"destroy",r)))}}function dS(r,t,e){const m=wk(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,e.totalTime??r.totalTime,!!e.disabled),b=r._data;return null!=b&&(m._data=b),m}function wk(r,t,e,a,d="",m=0,b){return{element:r,triggerName:t,fromState:e,toState:a,phaseName:d,totalTime:m,disabled:!!b}}function ql(r,t,e){let a=r.get(t);return a||r.set(t,a=e),a}function S6(r){const t=r.indexOf(":");return[r.substring(1,t),r.slice(t+1)]}let Tk=(r,t)=>!1,Jx=(r,t,e)=>[],$x=null;function B1(r){const t=r.parentNode||r.host;return t===$x?null:t}(qx()||typeof Element<"u")&&(Py()?($x=(()=>document.documentElement)(),Tk=(r,t)=>{for(;t;){if(t===r)return!0;t=B1(t)}return!1}):Tk=(r,t)=>r.contains(t),Jx=(r,t,e)=>{if(e)return Array.from(r.querySelectorAll(t));const a=r.querySelector(t);return a?[a]:[]});let My=null,rV=!1;const oV=Tk,sV=Jx;let aV=(()=>{class r{validateStyleProperty(e){return function iV(r){My||(My=function JG(){return typeof document<"u"?document.body:null}()||{},rV=!!My.style&&"WebkitAppearance"in My.style);let t=!0;return My.style&&!function I6(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in My.style,!t&&rV&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in My.style)),t}(e)}matchesElement(e,a){return!1}containsElement(e,a){return oV(e,a)}getParentElement(e){return B1(e)}query(e,a,d){return sV(e,a,d)}computeStyle(e,a,d){return d||""}animate(e,a,d,m,b,T=[],M){return new XD(d,m)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})(),hS=(()=>{class r{}return r.NOOP=new aV,r})();const Xx="ng-enter",Zx="ng-leave",eL="ng-trigger",tL=".ng-trigger",w6="ng-animating",F1=".ng-animating";function tv(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:cV(parseFloat(t[1]),t[2])}function cV(r,t){return"s"===t?1e3*r:r}function nL(r,t,e){return r.hasOwnProperty("duration")?r:function XG(r,t,e){let d,m=0,b="";if("string"==typeof r){const T=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===T)return t.push(c6()),{duration:0,delay:0,easing:""};d=cV(parseFloat(T[1]),T[2]);const M=T[3];null!=M&&(m=cV(parseFloat(M),T[4]));const j=T[5];j&&(b=j)}else d=r;if(!e){let T=!1,M=t.length;d<0&&(t.push(function Kx(){return new vn(3100,!1)}()),T=!0),m<0&&(t.push(function XU(){return new vn(3101,!1)}()),T=!0),T&&t.splice(M,0,c6())}return{duration:d,delay:m,easing:b}}(r,t,e)}function Ok(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function T6(r){const t=new Map;return Object.keys(r).forEach(e=>{t.set(e,r[e])}),t}function rv(r,t=new Map,e){if(e)for(let[a,d]of e)t.set(a,d);for(let[a,d]of r)t.set(a,d);return t}function Dk(r,t,e){return e?t+":"+e+";":""}function R6(r){let t="";for(let e=0;e<r.style.length;e++){const a=r.style.item(e);t+=Dk(0,a,r.style.getPropertyValue(a))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=Dk(0,O6(e),r.style[e]));r.setAttribute("style",t)}function dg(r,t,e){r.style&&(t.forEach((a,d)=>{const m=V1(d);e&&!e.has(d)&&e.set(d,r.style[m]),r.style[m]=a}),qx()&&R6(r))}function pS(r,t){r.style&&(t.forEach((e,a)=>{const d=V1(a);r.style[d]=""}),qx()&&R6(r))}function kk(r){return Array.isArray(r)?1==r.length?r[0]:_j(r):r}const uV=new RegExp("{{\\s*(.+?)\\s*}}","g");function Pd(r){let t=[];if("string"==typeof r){let e;for(;e=uV.exec(r);)t.push(e[1]);uV.lastIndex=0}return t}function U1(r,t,e){const a=r.toString(),d=a.replace(uV,(m,b)=>{let T=t[b];return null==T&&(e.push(function ZU(r){return new vn(3003,!1)}()),T=""),T.toString()});return d==a?r:d}function Pk(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const lV=/-+([a-z0-9])/g;function V1(r){return r.replace(lV,(...t)=>t[1].toUpperCase())}function O6(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nd(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw function Sk(r){return new vn(3004,!1)}()}}function dV(r,t){return window.getComputedStyle(r)[t]}function hV(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(a=>function mS(r,t,e){if(":"==r[0]){const M=function pV(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,a)=>parseFloat(a)>parseFloat(e);case":decrement":return(e,a)=>parseFloat(a)<parseFloat(e);default:return t.push(function KG(r){return new vn(3016,!1)}()),"* => *"}}(r,e);if("function"==typeof M)return void t.push(M);r=M}const a=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return e.push(function g6(r){return new vn(3015,!1)}()),t;const d=a[1],m=a[2],b=a[3];t.push(fV(d,b));"<"==m[0]&&!("*"==d&&"*"==b)&&t.push(fV(b,d))}(a,e,t)):e.push(r),e}const Q1=new Set(["true","1"]),Jl=new Set(["false","0"]);function fV(r,t){const e=Q1.has(r)||Jl.has(r),a=Q1.has(t)||Jl.has(t);return(d,m)=>{let b="*"==r||r==d,T="*"==t||t==m;return!b&&e&&"boolean"==typeof d&&(b=d?Q1.has(r):Jl.has(r)),!T&&a&&"boolean"==typeof m&&(T=m?Q1.has(t):Jl.has(t)),b&&T}}const P6=new RegExp("s*:selfs*,?","g");function iL(r,t,e,a){return new N6(r).build(t,e,a)}class N6{constructor(t){this._driver=t}build(t,e,a){const d=new Si(e);return this._resetContextStyleTimingState(d),Nd(this,kk(t),d)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let a=e.queryCount=0,d=e.depCount=0;const m=[],b=[];return"@"==t.name.charAt(0)&&e.errors.push(function QG(){return new vn(3006,!1)}()),t.definitions.forEach(T=>{if(this._resetContextStyleTimingState(e),0==T.type){const M=T,j=M.name;j.toString().split(/\s*,\s*/).forEach(re=>{M.name=re,m.push(this.visitState(M,e))}),M.name=j}else if(1==T.type){const M=this.visitTransition(T,e);a+=M.queryCount,d+=M.depCount,b.push(M)}else e.errors.push(function d6(){return new vn(3007,!1)}())}),{type:7,name:t.name,states:m,transitions:b,queryCount:a,depCount:d,options:null}}visitState(t,e){const a=this.visitStyle(t.styles,e),d=t.options&&t.options.params||null;if(a.containsDynamicStyles){const m=new Set,b=d||{};a.styles.forEach(T=>{T instanceof Map&&T.forEach(M=>{Pd(M).forEach(j=>{b.hasOwnProperty(j)||m.add(j)})})}),m.size&&(Pk(m.values()),e.errors.push(function eV(r,t){return new vn(3008,!1)}()))}return{type:0,name:t.name,style:a,options:d?{params:d}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const a=Nd(this,kk(t.animation),e);return{type:1,matchers:hV(t.expr,e.errors),animation:a,queryCount:e.queryCount,depCount:e.depCount,options:Ly(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(a=>Nd(this,a,e)),options:Ly(t.options)}}visitGroup(t,e){const a=e.currentTime;let d=0;const m=t.steps.map(b=>{e.currentTime=a;const T=Nd(this,b,e);return d=Math.max(d,e.currentTime),T});return e.currentTime=d,{type:3,steps:m,options:Ly(t.options)}}visitAnimate(t,e){const a=function rW(r,t){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return oL(nL(r,t).duration,0,"");const e=r;if(e.split(/\s+/).some(m=>"{"==m.charAt(0)&&"{"==m.charAt(1))){const m=oL(0,0,"");return m.dynamic=!0,m.strValue=e,m}const d=nL(e,t);return oL(d.duration,d.delay,d.easing)}(t.timings,e.errors);e.currentAnimateTimings=a;let d,m=t.styles?t.styles:Yl({});if(5==m.type)d=this.visitKeyframes(m,e);else{let b=t.styles,T=!1;if(!b){T=!0;const j={};a.easing&&(j.easing=a.easing),b=Yl(j)}e.currentTime+=a.duration+a.delay;const M=this.visitStyle(b,e);M.isEmptyStep=T,d=M}return e.currentAnimateTimings=null,{type:4,timings:a,style:d,options:null}}visitStyle(t,e){const a=this._makeStyleAst(t,e);return this._validateStyleAst(a,e),a}_makeStyleAst(t,e){const a=[],d=Array.isArray(t.styles)?t.styles:[t.styles];for(let T of d)"string"==typeof T?T===Y_?a.push(T):e.errors.push(new vn(3002,!1)):a.push(T6(T));let m=!1,b=null;return a.forEach(T=>{if(T instanceof Map&&(T.has("easing")&&(b=T.get("easing"),T.delete("easing")),!m))for(let M of T.values())if(M.toString().indexOf("{{")>=0){m=!0;break}}),{type:6,styles:a,easing:b,offset:t.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(t,e){const a=e.currentAnimateTimings;let d=e.currentTime,m=e.currentTime;a&&m>0&&(m-=a.duration+a.delay),t.styles.forEach(b=>{"string"!=typeof b&&b.forEach((T,M)=>{const j=e.collectedStyles.get(e.currentQuerySelector),re=j.get(M);let _e=!0;re&&(m!=d&&m>=re.startTime&&d<=re.endTime&&(e.errors.push(function GG(r,t,e,a,d){return new vn(3010,!1)}()),_e=!1),m=re.startTime),_e&&j.set(M,{startTime:m,endTime:d}),e.options&&function ZG(r,t,e){const a=t.params||{},d=Pd(r);d.length&&d.forEach(m=>{a.hasOwnProperty(m)||e.push(function u6(r){return new vn(3001,!1)}())})}(T,e.options,e.errors)})})}visitKeyframes(t,e){const a={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function p6(){return new vn(3011,!1)}()),a;let m=0;const b=[];let T=!1,M=!1,j=0;const re=t.steps.map(cn=>{const Mn=this._makeStyleAst(cn,e);let n=null!=Mn.offset?Mn.offset:function M6(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){const a=e;t=parseFloat(a.get("offset")),a.delete("offset")}});else if(r instanceof Map&&r.has("offset")){const e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Mn.styles),o=0;return null!=n&&(m++,o=Mn.offset=n),M=M||o<0||o>1,T=T||o<j,j=o,b.push(o),Mn});M&&e.errors.push(function WG(){return new vn(3012,!1)}()),T&&e.errors.push(function tV(){return new vn(3200,!1)}());const _e=t.steps.length;let Ue=0;m>0&&m<_e?e.errors.push(function Ck(){return new vn(3202,!1)}()):0==m&&(Ue=1/(_e-1));const Ge=_e-1,st=e.currentTime,Rt=e.currentAnimateTimings,nn=Rt.duration;return re.forEach((cn,Mn)=>{const n=Ue>0?Mn==Ge?1:Ue*Mn:b[Mn],o=n*nn;e.currentTime=st+Rt.delay+o,Rt.duration=o,this._validateStyleAst(cn,e),cn.offset=n,a.styles.push(cn)}),a}visitReference(t,e){return{type:8,animation:Nd(this,kk(t.animation),e),options:Ly(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ly(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ly(t.options)}}visitQuery(t,e){const a=e.currentQuerySelector,d=t.options||{};e.queryCount++,e.currentQuery=t;const[m,b]=function gV(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(P6,"")),r=r.replace(/@\*/g,tL).replace(/@\w+/g,e=>tL+"-"+e.slice(1)).replace(/:animating/g,F1),[r,t]}(t.selector);e.currentQuerySelector=a.length?a+" "+m:m,ql(e.collectedStyles,e.currentQuerySelector,new Map);const T=Nd(this,kk(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=a,{type:11,selector:m,limit:d.limit||0,optional:!!d.optional,includeSelf:b,animation:T,originalSelector:t.selector,options:Ly(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function f6(){return new vn(3013,!1)}());const a="full"===t.timings?{duration:0,delay:0,easing:"full"}:nL(t.timings,e.errors,!0);return{type:12,animation:Nd(this,kk(t.animation),e),timings:a,options:null}}}class Si{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ly(r){return r?(r=Ok(r)).params&&(r.params=function nW(r){return r?Ok(r):null}(r.params)):r={},r}function oL(r,t,e){return{duration:r,delay:t,easing:e}}function sL(r,t,e,a,d,m,b=null,T=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:a,duration:d,delay:m,totalTime:d+m,easing:b,subTimeline:T}}class aL{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let a=this._map.get(t);a||this._map.set(t,a=[]),a.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const cL=new RegExp(":enter","g"),iW=new RegExp(":leave","g");function uL(r,t,e,a,d,m=new Map,b=new Map,T,M,j=[]){return(new Ci).buildKeyframes(r,t,e,a,d,m,b,T,M,j)}class Ci{buildKeyframes(t,e,a,d,m,b,T,M,j,re=[]){j=j||new aL;const _e=new lL(t,e,j,d,m,re,[]);_e.options=M;const Ue=M.delay?tv(M.delay):0;_e.currentTimeline.delayNextStep(Ue),_e.currentTimeline.setStyles([b],null,_e.errors,M),Nd(this,a,_e);const Ge=_e.timelines.filter(st=>st.containsAnimation());if(Ge.length&&T.size){let st;for(let Rt=Ge.length-1;Rt>=0;Rt--){const nn=Ge[Rt];if(nn.element===e){st=nn;break}}st&&!st.allowOnlyTimelineStyles()&&st.setStyles([T],null,_e.errors,M)}return Ge.length?Ge.map(st=>st.buildKeyframes()):[sL(e,[],[],[],0,Ue,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const a=e.subInstructions.get(e.element);if(a){const d=e.createSubContext(t.options),m=e.currentTimeline.currentTime,b=this._visitSubInstructions(a,d,d.options);m!=b&&e.transformIntoNewTimeline(b)}e.previousNode=t}visitAnimateRef(t,e){const a=e.createSubContext(t.options);a.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,a),this.visitReference(t.animation,a),e.transformIntoNewTimeline(a.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,a){for(const d of t){const m=d?.delay;if(m){const b="number"==typeof m?m:tv(U1(m,d?.params??{},e.errors));a.delayNextStep(b)}}}_visitSubInstructions(t,e,a){let m=e.currentTimeline.currentTime;const b=null!=a.duration?tv(a.duration):null,T=null!=a.delay?tv(a.delay):null;return 0!==b&&t.forEach(M=>{const j=e.appendInstructionToTimeline(M,b,T);m=Math.max(m,j.duration+j.delay)}),m}visitReference(t,e){e.updateOptions(t.options,!0),Nd(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const a=e.subContextCount;let d=e;const m=t.options;if(m&&(m.params||m.delay)&&(d=e.createSubContext(m),d.transformIntoNewTimeline(),null!=m.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=xk);const b=tv(m.delay);d.delayNextStep(b)}t.steps.length&&(t.steps.forEach(b=>Nd(this,b,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>a&&d.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const a=[];let d=e.currentTimeline.currentTime;const m=t.options&&t.options.delay?tv(t.options.delay):0;t.steps.forEach(b=>{const T=e.createSubContext(t.options);m&&T.delayNextStep(m),Nd(this,b,T),d=Math.max(d,T.currentTimeline.currentTime),a.push(T.currentTimeline)}),a.forEach(b=>e.currentTimeline.mergeTimelineCollectedStyles(b)),e.transformIntoNewTimeline(d),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const a=t.strValue;return nL(e.params?U1(a,e.params,e.errors):a,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const a=e.currentAnimateTimings=this._visitTiming(t.timings,e),d=e.currentTimeline;a.delay&&(e.incrementTime(a.delay),d.snapshotCurrentStyles());const m=t.style;5==m.type?this.visitKeyframes(m,e):(e.incrementTime(a.duration),this.visitStyle(m,e),d.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const a=e.currentTimeline,d=e.currentAnimateTimings;!d&&a.hasCurrentStyleProperties()&&a.forwardFrame();const m=d&&d.easing||t.easing;t.isEmptyStep?a.applyEmptyStep(m):a.setStyles(t.styles,m,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const a=e.currentAnimateTimings,d=e.currentTimeline.duration,m=a.duration,T=e.createSubContext().currentTimeline;T.easing=a.easing,t.styles.forEach(M=>{T.forwardTime((M.offset||0)*m),T.setStyles(M.styles,M.easing,e.errors,e.options),T.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(T),e.transformIntoNewTimeline(d+m),e.previousNode=t}visitQuery(t,e){const a=e.currentTimeline.currentTime,d=t.options||{},m=d.delay?tv(d.delay):0;m&&(6===e.previousNode.type||0==a&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=xk);let b=a;const T=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!d.optional,e.errors);e.currentQueryTotal=T.length;let M=null;T.forEach((j,re)=>{e.currentQueryIndex=re;const _e=e.createSubContext(t.options,j);m&&_e.delayNextStep(m),j===e.element&&(M=_e.currentTimeline),Nd(this,t.animation,_e),_e.currentTimeline.applyStylesToKeyframe(),b=Math.max(b,_e.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(b),M&&(e.currentTimeline.mergeTimelineCollectedStyles(M),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const a=e.parentContext,d=e.currentTimeline,m=t.timings,b=Math.abs(m.duration),T=b*(e.currentQueryTotal-1);let M=b*e.currentQueryIndex;switch(m.duration<0?"reverse":m.easing){case"reverse":M=T-M;break;case"full":M=a.currentStaggerTime}const re=e.currentTimeline;M&&re.delayNextStep(M);const _e=re.currentTime;Nd(this,t.animation,e),e.previousNode=t,a.currentStaggerTime=d.currentTime-_e+(d.startTime-a.currentTimeline.startTime)}}const xk={};class lL{constructor(t,e,a,d,m,b,T,M){this._driver=t,this.element=e,this.subInstructions=a,this._enterClassName=d,this._leaveClassName=m,this.errors=b,this.timelines=T,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xk,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=M||new dL(this._driver,e,0),T.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const a=t;let d=this.options;null!=a.duration&&(d.duration=tv(a.duration)),null!=a.delay&&(d.delay=tv(a.delay));const m=a.params;if(m){let b=d.params;b||(b=this.options.params={}),Object.keys(m).forEach(T=>{(!e||!b.hasOwnProperty(T))&&(b[T]=U1(m[T],b,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const a=t.params={};Object.keys(e).forEach(d=>{a[d]=e[d]})}}return t}createSubContext(t=null,e,a){const d=e||this.element,m=new lL(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,a||0));return m.previousNode=this.previousNode,m.currentAnimateTimings=this.currentAnimateTimings,m.options=this._copyOptions(),m.updateOptions(t),m.currentQueryIndex=this.currentQueryIndex,m.currentQueryTotal=this.currentQueryTotal,m.parentContext=this,this.subContextCount++,m}transformIntoNewTimeline(t){return this.previousNode=xk,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,a){const d={duration:e??t.duration,delay:this.currentTimeline.currentTime+(a??0)+t.delay,easing:""},m=new xd(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,d,t.stretchStartingKeyframe);return this.timelines.push(m),d}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,a,d,m,b){let T=[];if(d&&T.push(this.element),t.length>0){t=(t=t.replace(cL,"."+this._enterClassName)).replace(iW,"."+this._leaveClassName);let j=this._driver.query(this.element,t,1!=a);0!==a&&(j=a<0?j.slice(j.length+a,j.length):j.slice(0,a)),T.push(...j)}return!m&&0==T.length&&b.push(function m6(r){return new vn(3014,!1)}()),T}}class dL{constructor(t,e,a,d){this._driver=t,this.element=e,this.startTime=a,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new dL(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,a]of this._globalTimelineStyles)this._backFill.set(e,a||Y_),this._currentKeyframe.set(e,Y_);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,a,d){e&&this._previousKeyframe.set("easing",e);const m=d&&d.params||{},b=function B6(r,t){const e=new Map;let a;return r.forEach(d=>{if("*"===d){a=a||t.keys();for(let m of a)e.set(m,Y_)}else rv(d,e)}),e}(t,this._globalTimelineStyles);for(let[T,M]of b){const j=U1(M,m,a);this._pendingStyles.set(T,j),this._localTimelineStyles.has(T)||this._backFill.set(T,this._globalTimelineStyles.get(T)??Y_),this._updateStyle(T,j)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,a)=>{const d=this._styleSummary.get(a);(!d||e.time>d.time)&&this._updateStyle(a,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,a=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((T,M)=>{const j=rv(T,new Map,this._backFill);j.forEach((re,_e)=>{"!"===re?t.add(_e):re===Y_&&e.add(_e)}),a||j.set("offset",M/this.duration),d.push(j)});const m=t.size?Pk(t.values()):[],b=e.size?Pk(e.values()):[];if(a){const T=d[0],M=new Map(T);T.set("offset",0),M.set("offset",1),d=[T,M]}return sL(this.element,d,m,b,this.duration,this.startTime,this.easing,!1)}}class xd extends dL{constructor(t,e,a,d,m,b,T=!1){super(t,e,b.delay),this.keyframes=a,this.preStyleProps=d,this.postStyleProps=m,this._stretchStartingKeyframe=T,this.timings={duration:b.duration,delay:b.delay,easing:b.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:a,easing:d}=this.timings;if(this._stretchStartingKeyframe&&e){const m=[],b=a+e,T=e/b,M=rv(t[0]);M.set("offset",0),m.push(M);const j=rv(t[0]);j.set("offset",_V(T)),m.push(j);const re=t.length-1;for(let _e=1;_e<=re;_e++){let Ue=rv(t[_e]);const Ge=Ue.get("offset");Ue.set("offset",_V((e+Ge*a)/b)),m.push(Ue)}a=b,e=0,d="",t=m}return sL(this.element,t,this.preStyleProps,this.postStyleProps,a,e,d,!0)}}function _V(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class hL{}const F6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pL extends hL{normalizePropertyName(t,e){return V1(t)}normalizeStyleValue(t,e,a,d){let m="";const b=a.toString().trim();if(F6.has(e)&&0!==a&&"0"!==a)if("number"==typeof a)m="px";else{const T=a.match(/^[+-]?[\d\.]+([a-z]*)$/);T&&0==T[1].length&&d.push(function l6(r,t){return new vn(3005,!1)}())}return b+m}}function Lk(r,t,e,a,d,m,b,T,M,j,re,_e,Ue){return{type:0,element:r,triggerName:t,isRemovalTransition:d,fromState:e,fromStyles:m,toState:a,toStyles:b,timelines:T,queriedElements:M,preStyleProps:j,postStyleProps:re,totalTime:_e,errors:Ue}}const fL={};class AV{constructor(t,e,a){this._triggerName=t,this.ast=e,this._stateStyles=a}match(t,e,a,d){return function U6(r,t,e,a,d){return r.some(m=>m(t,e,a,d))}(this.ast.matchers,t,e,a,d)}buildStyles(t,e,a){let d=this._stateStyles.get("*");return void 0!==t&&(d=this._stateStyles.get(t?.toString())||d),d?d.buildStyles(e,a):new Map}build(t,e,a,d,m,b,T,M,j,re){const _e=[],Ue=this.ast.options&&this.ast.options.params||fL,st=this.buildStyles(a,T&&T.params||fL,_e),Rt=M&&M.params||fL,nn=this.buildStyles(d,Rt,_e),cn=new Set,Mn=new Map,n=new Map,o="void"===d,s={params:Ii(Rt,Ue),delay:this.ast.options?.delay},c=re?[]:uL(t,e,this.ast.animation,m,b,st,nn,s,j,_e);let h=0;if(c.forEach(f=>{h=Math.max(f.duration+f.delay,h)}),_e.length)return Lk(e,this._triggerName,a,d,o,st,nn,[],[],Mn,n,h,_e);c.forEach(f=>{const A=f.element,v=ql(Mn,A,new Set);f.preStyleProps.forEach(S=>v.add(S));const E=ql(n,A,new Set);f.postStyleProps.forEach(S=>E.add(S)),A!==e&&cn.add(A)});const g=Pk(cn.values());return Lk(e,this._triggerName,a,d,o,st,nn,c,g,Mn,n,h)}}function Ii(r,t){const e=Ok(t);for(const a in r)r.hasOwnProperty(a)&&null!=r[a]&&(e[a]=r[a]);return e}class V6{constructor(t,e,a){this.styles=t,this.defaultParams=e,this.normalizer=a}buildStyles(t,e){const a=new Map,d=Ok(this.defaultParams);return Object.keys(t).forEach(m=>{const b=t[m];null!==b&&(d[m]=b)}),this.styles.styles.forEach(m=>{"string"!=typeof m&&m.forEach((b,T)=>{b&&(b=U1(b,d,e));const M=this.normalizer.normalizePropertyName(T,e);b=this.normalizer.normalizeStyleValue(T,M,b,e),a.set(M,b)})}),a}}class j6{constructor(t,e,a){this.name=t,this.ast=e,this._normalizer=a,this.transitionFactories=[],this.states=new Map,e.states.forEach(d=>{this.states.set(d.name,new V6(d.style,d.options&&d.options.params||{},a))}),Q6(this.states,"true","1"),Q6(this.states,"false","0"),e.transitions.forEach(d=>{this.transitionFactories.push(new AV(t,d,this.states))}),this.fallbackTransition=function yV(r,t,e){return new AV(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(b,T)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,a,d){return this.transitionFactories.find(b=>b.match(t,e,a,d))||null}matchStyles(t,e,a){return this.fallbackTransition.buildStyles(t,e,a)}}function Q6(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}const Ld=new aL;class kp{constructor(t,e,a){this.bodyNode=t,this._driver=e,this._normalizer=a,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const a=[],m=iL(this._driver,e,a,[]);if(a.length)throw function kd(r){return new vn(3503,!1)}();this._animations.set(t,m)}_buildPlayer(t,e,a){const d=t.element,m=nV(0,this._normalizer,0,t.keyframes,e,a);return this._driver.animate(d,m,t.duration,t.delay,t.easing,[],!0)}create(t,e,a={}){const d=[],m=this._animations.get(t);let b;const T=new Map;if(m?(b=uL(this._driver,e,m,Xx,Zx,new Map,new Map,a,Ld,d),b.forEach(re=>{const _e=ql(T,re.element,new Map);re.postStyleProps.forEach(Ue=>_e.set(Ue,null))})):(d.push(function Yx(){return new vn(3300,!1)}()),b=[]),d.length)throw function v6(r){return new vn(3504,!1)}();T.forEach((re,_e)=>{re.forEach((Ue,Ge)=>{re.set(Ge,this._driver.computeStyle(_e,Ge,Y_))})});const j=Ny(b.map(re=>{const _e=T.get(re.element);return this._buildPlayer(re,new Map,_e)}));return this._playersById.set(t,j),j.onDestroy(()=>this.destroy(t)),this.players.push(j),j}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const a=this.players.indexOf(e);a>=0&&this.players.splice(a,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function qG(r){return new vn(3301,!1)}();return e}listen(t,e,a,d){const m=wk(e,"","","");return qf(this._getPlayer(t),a,m,d),()=>{}}command(t,e,a,d){if("register"==a)return void this.register(t,d[0]);if("create"==a)return void this.create(t,e,d[0]||{});const m=this._getPlayer(t);switch(a){case"play":m.play();break;case"pause":m.pause();break;case"reset":m.reset();break;case"restart":m.restart();break;case"finish":m.finish();break;case"init":m.init();break;case"setPosition":m.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(t)}}}const fi="ng-animate-queued",Bk="ng-animate-disabled",K6=[],nr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},aW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$l="__ng_removed";class EV{constructor(t,e=""){this.namespaceId=e;const a=t&&t.hasOwnProperty("value");if(this.value=function dW(r){return r??null}(a?t.value:t),a){const m=Ok(t);delete m.value,this.options=m}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const a=this.options.params;Object.keys(e).forEach(d=>{null==a[d]&&(a[d]=e[d])})}}}const G1="void",bV=new EV(G1);class cW{constructor(t,e,a){this.id=t,this.hostElement=e,this._engine=a,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,As(e,this._hostClassName)}listen(t,e,a,d){if(!this._triggers.has(e))throw function A6(r,t){return new vn(3302,!1)}();if(null==a||0==a.length)throw function Yf(r){return new vn(3303,!1)}();if(!function hW(r){return"start"==r||"done"==r}(a))throw function ky(r,t){return new vn(3400,!1)}();const m=ql(this._elementListeners,t,[]),b={name:e,phase:a,callback:d};m.push(b);const T=ql(this._engine.statesByElement,t,new Map);return T.has(e)||(As(t,eL),As(t,eL+"-"+e),T.set(e,bV)),()=>{this._engine.afterFlush(()=>{const M=m.indexOf(b);M>=0&&m.splice(M,1),this._triggers.has(e)||T.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function lS(r){return new vn(3401,!1)}();return e}trigger(t,e,a,d=!0){const m=this._getTrigger(e),b=new SV(this.id,e,t);let T=this._engine.statesByElement.get(t);T||(As(t,eL),As(t,eL+"-"+e),this._engine.statesByElement.set(t,T=new Map));let M=T.get(e);const j=new EV(a,this.id);if(!(a&&a.hasOwnProperty("value"))&&M&&j.absorbOptions(M.options),T.set(e,j),M||(M=bV),j.value!==G1&&M.value===j.value){if(!function IV(r,t){const e=Object.keys(r),a=Object.keys(t);if(e.length!=a.length)return!1;for(let d=0;d<e.length;d++){const m=e[d];if(!t.hasOwnProperty(m)||r[m]!==t[m])return!1}return!0}(M.params,j.params)){const Rt=[],nn=m.matchStyles(M.value,M.params,Rt),cn=m.matchStyles(j.value,j.params,Rt);Rt.length?this._engine.reportError(Rt):this._engine.afterFlush(()=>{pS(t,nn),dg(t,cn)})}return}const Ue=ql(this._engine.playersByElement,t,[]);Ue.forEach(Rt=>{Rt.namespaceId==this.id&&Rt.triggerName==e&&Rt.queued&&Rt.destroy()});let Ge=m.matchTransition(M.value,j.value,t,j.params),st=!1;if(!Ge){if(!d)return;Ge=m.fallbackTransition,st=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Ge,fromState:M,toState:j,player:b,isFallbackTransition:st}),st||(As(t,fi),b.onStart(()=>{Jf(t,fi)})),b.onDone(()=>{let Rt=this.players.indexOf(b);Rt>=0&&this.players.splice(Rt,1);const nn=this._engine.playersByElement.get(t);if(nn){let cn=nn.indexOf(b);cn>=0&&nn.splice(cn,1)}}),this.players.push(b),Ue.push(b),b}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,a)=>{this._elementListeners.set(a,e.filter(d=>d.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(a=>a.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const a=this._engine.driver.query(t,tL,!0);a.forEach(d=>{if(d[$l])return;const m=this._engine.fetchNamespacesByElement(d);m.size?m.forEach(b=>b.triggerLeaveAnimation(d,e,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>a.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(t,e,a,d){const m=this._engine.statesByElement.get(t),b=new Map;if(m){const T=[];if(m.forEach((M,j)=>{if(b.set(j,M.value),this._triggers.has(j)){const re=this.trigger(t,j,G1,d);re&&T.push(re)}}),T.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,b),a&&Ny(T).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),a=this._engine.statesByElement.get(t);if(e&&a){const d=new Set;e.forEach(m=>{const b=m.name;if(d.has(b))return;d.add(b);const M=this._triggers.get(b).fallbackTransition,j=a.get(b)||bV,re=new EV(G1),_e=new SV(this.id,b,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:b,transition:M,fromState:j,toState:re,player:_e,isFallbackTransition:!0})})}}removeNode(t,e){const a=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let d=!1;if(a.totalAnimations){const m=a.players.length?a.playersByQueriedElement.get(t):[];if(m&&m.length)d=!0;else{let b=t;for(;b=b.parentNode;)if(a.statesByElement.get(b)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(t),d)a.markElementAsRemoved(this.id,t,!1,e);else{const m=t[$l];(!m||m===nr)&&(a.afterFlush(()=>this.clearElementCache(t)),a.destroyInnerAnimations(t),a._onRemovalComplete(t,e))}}insertNode(t,e){As(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(a=>{const d=a.player;if(d.destroyed)return;const m=a.element,b=this._elementListeners.get(m);b&&b.forEach(T=>{if(T.name==a.triggerName){const M=wk(m,a.triggerName,a.fromState.value,a.toState.value);M._data=t,qf(a.player,T.phase,M,T.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):e.push(a)}),this._queue=[],e.sort((a,d)=>{const m=a.transition.ast.depCount,b=d.transition.ast.depCount;return 0==m||0==b?m-b:this._engine.driver.containsElement(a.element,d.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(a=>a.element===t)||e,e}}class uW{constructor(t,e,a){this.bodyNode=t,this.driver=e,this._normalizer=a,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,m)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(a=>{a.queued&&t.push(a)})}),t}createNamespace(t,e){const a=new cW(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(a,e):(this.newHostElements.set(e,a),this.collectEnterElement(e)),this._namespaceLookup[t]=a}_balanceNamespaceList(t,e){const a=this._namespaceList,d=this.namespacesByHostElement;if(a.length-1>=0){let b=!1,T=this.driver.getParentElement(e);for(;T;){const M=d.get(T);if(M){const j=a.indexOf(M);a.splice(j+1,0,t),b=!0;break}T=this.driver.getParentElement(T)}b||a.unshift(t)}else a.push(t);return d.set(e,t),t}register(t,e){let a=this._namespaceLookup[t];return a||(a=this.createNamespace(t,e)),a}registerTrigger(t,e,a){let d=this._namespaceLookup[t];d&&d.register(e,a)&&this.totalAnimations++}destroy(t,e){if(!t)return;const a=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(a.hostElement),delete this._namespaceLookup[t];const d=this._namespaceList.indexOf(a);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>a.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,a=this.statesByElement.get(t);if(a)for(let d of a.values())if(d.namespaceId){const m=this._fetchNamespace(d.namespaceId);m&&e.add(m)}return e}trigger(t,e,a,d){if(mL(e)){const m=this._fetchNamespace(t);if(m)return m.trigger(e,a,d),!0}return!1}insertNode(t,e,a,d){if(!mL(e))return;const m=e[$l];if(m&&m.setForRemoval){m.setForRemoval=!1,m.setForMove=!0;const b=this.collectedLeaveElements.indexOf(e);b>=0&&this.collectedLeaveElements.splice(b,1)}if(t){const b=this._fetchNamespace(t);b&&b.insertNode(e,a)}d&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),As(t,Bk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Jf(t,Bk))}removeNode(t,e,a,d){if(mL(e)){const m=t?this._fetchNamespace(t):null;if(m?m.removeNode(e,d):this.markElementAsRemoved(t,e,!1,d),a){const b=this.namespacesByHostElement.get(e);b&&b.id!==t&&b.removeNode(e,d)}}else this._onRemovalComplete(e,d)}markElementAsRemoved(t,e,a,d,m){this.collectedLeaveElements.push(e),e[$l]={namespaceId:t,setForRemoval:d,hasAnimation:a,removedBeforeQueried:!1,previousTriggersValues:m}}listen(t,e,a,d,m){return mL(e)?this._fetchNamespace(t).listen(e,a,d,m):()=>{}}_buildInstruction(t,e,a,d,m){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,a,d,t.fromState.options,t.toState.options,e,m)}destroyInnerAnimations(t){let e=this.driver.query(t,tL,!0);e.forEach(a=>this.destroyActiveAnimationsForElement(a)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,F1,!0),e.forEach(a=>this.finishActiveQueriedAnimationOnElement(a)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(a=>{a.queued?a.markedForDestroy=!0:a.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(a=>a.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ny(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[$l];if(e&&e.setForRemoval){if(t[$l]=nr,e.namespaceId){this.destroyInnerAnimations(t);const a=this._fetchNamespace(e.namespaceId);a&&a.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Bk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(a=>{this.markElementAsDisabled(a,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((a,d)=>this._balanceNamespaceList(a,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let a=0;a<this.collectedEnterElements.length;a++)As(this.collectedEnterElements[a],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const a=[];try{e=this._flushAnimations(a,t)}finally{for(let d=0;d<a.length;d++)a[d]()}}else for(let a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(a=>a()),this._flushFns=[],this._whenQuietFns.length){const a=this._whenQuietFns;this._whenQuietFns=[],e.length?Ny(e).onDone(()=>{a.forEach(d=>d())}):a.forEach(d=>d())}}reportError(t){throw function y6(r){return new vn(3402,!1)}()}_flushAnimations(t,e){const a=new aL,d=[],m=new Map,b=[],T=new Map,M=new Map,j=new Map,re=new Set;this.disabledNodes.forEach(x=>{re.add(x);const W=this.driver.query(x,".ng-animate-queued",!0);for(let K=0;K<W.length;K++)re.add(W[K])});const _e=this.bodyNode,Ue=Array.from(this.statesByElement.keys()),Ge=gL(Ue,this.collectedEnterElements),st=new Map;let Rt=0;Ge.forEach((x,W)=>{const K=Xx+Rt++;st.set(W,K),x.forEach(ne=>As(ne,K))});const nn=[],cn=new Set,Mn=new Set;for(let x=0;x<this.collectedLeaveElements.length;x++){const W=this.collectedLeaveElements[x],K=W[$l];K&&K.setForRemoval&&(nn.push(W),cn.add(W),K.hasAnimation?this.driver.query(W,".ng-star-inserted",!0).forEach(ne=>cn.add(ne)):Mn.add(W))}const n=new Map,o=gL(Ue,Array.from(cn));o.forEach((x,W)=>{const K=Zx+Rt++;n.set(W,K),x.forEach(ne=>As(ne,K))}),t.push(()=>{Ge.forEach((x,W)=>{const K=st.get(W);x.forEach(ne=>Jf(ne,K))}),o.forEach((x,W)=>{const K=n.get(W);x.forEach(ne=>Jf(ne,K))}),nn.forEach(x=>{this.processLeaveNode(x)})});const s=[],c=[];for(let x=this._namespaceList.length-1;x>=0;x--)this._namespaceList[x].drainQueuedTransitions(e).forEach(K=>{const ne=K.player,le=K.element;if(s.push(ne),this.collectedEnterElements.length){const kt=le[$l];if(kt&&kt.setForMove){if(kt.previousTriggersValues&&kt.previousTriggersValues.has(K.triggerName)){const Sn=kt.previousTriggersValues.get(K.triggerName),ln=this.statesByElement.get(K.element);if(ln&&ln.has(K.triggerName)){const dn=ln.get(K.triggerName);dn.value=Sn,ln.set(K.triggerName,dn)}}return void ne.destroy()}}const me=!_e||!this.driver.containsElement(_e,le),be=n.get(le),ke=st.get(le),Ze=this._buildInstruction(K,a,ke,be,me);if(Ze.errors&&Ze.errors.length)return void c.push(Ze);if(me)return ne.onStart(()=>pS(le,Ze.fromStyles)),ne.onDestroy(()=>dg(le,Ze.toStyles)),void d.push(ne);if(K.isFallbackTransition)return ne.onStart(()=>pS(le,Ze.fromStyles)),ne.onDestroy(()=>dg(le,Ze.toStyles)),void d.push(ne);const Nt=[];Ze.timelines.forEach(kt=>{kt.stretchStartingKeyframe=!0,this.disabledNodes.has(kt.element)||Nt.push(kt)}),Ze.timelines=Nt,a.append(le,Ze.timelines),b.push({instruction:Ze,player:ne,element:le}),Ze.queriedElements.forEach(kt=>ql(T,kt,[]).push(ne)),Ze.preStyleProps.forEach((kt,Sn)=>{if(kt.size){let ln=M.get(Sn);ln||M.set(Sn,ln=new Set),kt.forEach((dn,It)=>ln.add(It))}}),Ze.postStyleProps.forEach((kt,Sn)=>{let ln=j.get(Sn);ln||j.set(Sn,ln=new Set),kt.forEach((dn,It)=>ln.add(It))})});if(c.length){const x=[];c.forEach(W=>{x.push(function Ik(r,t){return new vn(3505,!1)}())}),s.forEach(W=>W.destroy()),this.reportError(x)}const h=new Map,g=new Map;b.forEach(x=>{const W=x.element;a.has(W)&&(g.set(W,W),this._beforeAnimationBuild(x.player.namespaceId,x.instruction,h))}),d.forEach(x=>{const W=x.element;this._getPreviousPlayers(W,!1,x.namespaceId,x.triggerName,null).forEach(ne=>{ql(h,W,[]).push(ne),ne.destroy()})});const f=nn.filter(x=>wV(x,M,j)),A=new Map;z6(A,this.driver,Mn,j,Y_).forEach(x=>{wV(x,M,j)&&f.push(x)});const E=new Map;Ge.forEach((x,W)=>{z6(E,this.driver,new Set(x),M,"!")}),f.forEach(x=>{const W=A.get(x),K=E.get(x);A.set(x,new Map([...Array.from(W?.entries()??[]),...Array.from(K?.entries()??[])]))});const S=[],w=[],R={};b.forEach(x=>{const{element:W,player:K,instruction:ne}=x;if(a.has(W)){if(re.has(W))return K.onDestroy(()=>dg(W,ne.toStyles)),K.disabled=!0,K.overrideTotalTime(ne.totalTime),void d.push(K);let le=R;if(g.size>1){let be=W;const ke=[];for(;be=be.parentNode;){const Ze=g.get(be);if(Ze){le=Ze;break}ke.push(be)}ke.forEach(Ze=>g.set(Ze,le))}const me=this._buildAnimation(K.namespaceId,ne,h,m,E,A);if(K.setRealPlayer(me),le===R)S.push(K);else{const be=this.playersByElement.get(le);be&&be.length&&(K.parentPlayer=Ny(be)),d.push(K)}}else pS(W,ne.fromStyles),K.onDestroy(()=>dg(W,ne.toStyles)),w.push(K),re.has(W)&&d.push(K)}),w.forEach(x=>{const W=m.get(x.element);if(W&&W.length){const K=Ny(W);x.setRealPlayer(K)}}),d.forEach(x=>{x.parentPlayer?x.syncPlayerEvents(x.parentPlayer):x.destroy()});for(let x=0;x<nn.length;x++){const W=nn[x],K=W[$l];if(Jf(W,Zx),K&&K.hasAnimation)continue;let ne=[];if(T.size){let me=T.get(W);me&&me.length&&ne.push(...me);let be=this.driver.query(W,F1,!0);for(let ke=0;ke<be.length;ke++){let Ze=T.get(be[ke]);Ze&&Ze.length&&ne.push(...Ze)}}const le=ne.filter(me=>!me.destroyed);le.length?Y6(this,W,le):this.processLeaveNode(W)}return nn.length=0,S.forEach(x=>{this.players.push(x),x.onDone(()=>{x.destroy();const W=this.players.indexOf(x);this.players.splice(W,1)}),x.play()}),S}elementContainsData(t,e){let a=!1;const d=e[$l];return d&&d.setForRemoval&&(a=!0),this.playersByElement.has(e)&&(a=!0),this.playersByQueriedElement.has(e)&&(a=!0),this.statesByElement.has(e)&&(a=!0),this._fetchNamespace(t).elementContainsData(e)||a}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,a,d,m){let b=[];if(e){const T=this.playersByQueriedElement.get(t);T&&(b=T)}else{const T=this.playersByElement.get(t);if(T){const M=!m||m==G1;T.forEach(j=>{j.queued||!M&&j.triggerName!=d||b.push(j)})}}return(a||d)&&(b=b.filter(T=>!(a&&a!=T.namespaceId||d&&d!=T.triggerName))),b}_beforeAnimationBuild(t,e,a){const m=e.element,b=e.isRemovalTransition?void 0:t,T=e.isRemovalTransition?void 0:e.triggerName;for(const M of e.timelines){const j=M.element,re=j!==m,_e=ql(a,j,[]);this._getPreviousPlayers(j,re,b,T,e.toState).forEach(Ge=>{const st=Ge.getRealPlayer();st.beforeDestroy&&st.beforeDestroy(),Ge.destroy(),_e.push(Ge)})}pS(m,e.fromStyles)}_buildAnimation(t,e,a,d,m,b){const T=e.triggerName,M=e.element,j=[],re=new Set,_e=new Set,Ue=e.timelines.map(st=>{const Rt=st.element;re.add(Rt);const nn=Rt[$l];if(nn&&nn.removedBeforeQueried)return new XD(st.duration,st.delay);const cn=Rt!==M,Mn=function q6(r){const t=[];return J6(r,t),t}((a.get(Rt)||K6).map(h=>h.getRealPlayer())).filter(h=>!!h.element&&h.element===Rt),n=m.get(Rt),o=b.get(Rt),s=nV(0,this._normalizer,0,st.keyframes,n,o),c=this._buildPlayer(st,s,Mn);if(st.subTimeline&&d&&_e.add(Rt),cn){const h=new SV(t,T,Rt);h.setRealPlayer(c),j.push(h)}return c});j.forEach(st=>{ql(this.playersByQueriedElement,st.element,[]).push(st),st.onDone(()=>function lW(r,t,e){let a=r.get(t);if(a){if(a.length){const d=a.indexOf(e);a.splice(d,1)}0==a.length&&r.delete(t)}return a}(this.playersByQueriedElement,st.element,st))}),re.forEach(st=>As(st,w6));const Ge=Ny(Ue);return Ge.onDestroy(()=>{re.forEach(st=>Jf(st,w6)),dg(M,e.toStyles)}),_e.forEach(st=>{ql(d,st,[]).push(Ge)}),Ge}_buildPlayer(t,e,a){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,a):new XD(t.duration,t.delay)}}class SV{constructor(t,e,a){this.namespaceId=t,this.triggerName=e,this.element=a,this._player=new XD,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,a)=>{e.forEach(d=>qf(t,a,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ql(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function mL(r){return r&&1===r.nodeType}function CV(r,t){const e=r.style.display;return r.style.display=t??"none",e}function z6(r,t,e,a,d){const m=[];e.forEach(M=>m.push(CV(M)));const b=[];a.forEach((M,j)=>{const re=new Map;M.forEach(_e=>{const Ue=t.computeStyle(j,_e,d);re.set(_e,Ue),(!Ue||0==Ue.length)&&(j[$l]=aW,b.push(j))}),r.set(j,re)});let T=0;return e.forEach(M=>CV(M,m[T++])),b}function gL(r,t){const e=new Map;if(r.forEach(T=>e.set(T,[])),0==t.length)return e;const d=new Set(t),m=new Map;function b(T){if(!T)return 1;let M=m.get(T);if(M)return M;const j=T.parentNode;return M=e.has(j)?j:d.has(j)?1:b(j),m.set(T,M),M}return t.forEach(T=>{const M=b(T);1!==M&&e.get(M).push(T)}),e}function As(r,t){r.classList?.add(t)}function Jf(r,t){r.classList?.remove(t)}function Y6(r,t,e){Ny(e).onDone(()=>r.processLeaveNode(t))}function J6(r,t){for(let e=0;e<r.length;e++){const a=r[e];a instanceof Aj?J6(a.players,t):t.push(a)}}function wV(r,t,e){const a=e.get(r);if(!a)return!1;let d=t.get(r);return d?a.forEach(m=>d.add(m)):t.set(r,a),e.delete(r),!0}class iv{constructor(t,e,a){this.bodyNode=t,this._driver=e,this._normalizer=a,this._triggerCache={},this.onRemovalComplete=(d,m)=>{},this._transitionEngine=new uW(t,e,a),this._timelineEngine=new kp(t,e,a),this._transitionEngine.onRemovalComplete=(d,m)=>this.onRemovalComplete(d,m)}registerTrigger(t,e,a,d,m){const b=t+"-"+d;let T=this._triggerCache[b];if(!T){const M=[],re=iL(this._driver,m,M,[]);if(M.length)throw function _6(r,t){return new vn(3404,!1)}();T=function By(r,t,e){return new j6(r,t,e)}(d,re,this._normalizer),this._triggerCache[b]=T}this._transitionEngine.registerTrigger(e,d,T)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,a,d){this._transitionEngine.insertNode(t,e,a,d)}onRemove(t,e,a,d){this._transitionEngine.removeNode(t,e,d||!1,a)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,a,d){if("@"==a.charAt(0)){const[m,b]=S6(a);this._timelineEngine.command(m,e,b,d)}else this._transitionEngine.trigger(t,e,a,d)}listen(t,e,a,d,m){if("@"==a.charAt(0)){const[b,T]=S6(a);return this._timelineEngine.listen(b,e,T,m)}return this._transitionEngine.listen(t,e,a,d,m)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $6=(()=>{class r{constructor(e,a,d){this._element=e,this._startStyles=a,this._endStyles=d,this._state=0;let m=r.initialStylesByElement.get(e);m||r.initialStylesByElement.set(e,m=new Map),this._initialStyles=m}start(){this._state<1&&(this._startStyles&&dg(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dg(this._element,this._initialStyles),this._endStyles&&(dg(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(pS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pS(this._element,this._endStyles),this._endStyles=null),dg(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Pp(r){let t=null;return r.forEach((e,a)=>{(function pW(r){return"display"===r||"position"===r})(a)&&(t=t||new Map,t.set(a,e))}),t}class RV{constructor(t,e,a,d){this.element=t,this.keyframes=e,this.options=a,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=a.duration,this._delay=a.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(a=>{e.push(Object.fromEntries(a))}),e}_triggerWebAnimation(t,e,a){return t.animate(this._convertKeyframesToObject(e),a)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((a,d)=>{"offset"!==d&&t.set(d,this._finished?a:dV(this.element,d))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class X6{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return oV(t,e)}getParentElement(t){return B1(t)}query(t,e,a){return sV(t,e,a)}computeStyle(t,e,a){return window.getComputedStyle(t)[e]}animate(t,e,a,d,m,b=[]){const M={duration:a,delay:d,fill:0==d?"both":"forwards"};m&&(M.easing=m);const j=new Map,re=b.filter(Ge=>Ge instanceof RV);(function j1(r,t){return 0===r||0===t})(a,d)&&re.forEach(Ge=>{Ge.currentSnapshot.forEach((st,Rt)=>j.set(Rt,st))});let _e=function nv(r){return r.length?r[0]instanceof Map?r:r.map(t=>T6(t)):[]}(e).map(Ge=>rv(Ge));_e=function rL(r,t,e){if(e.size&&t.length){let a=t[0],d=[];if(e.forEach((m,b)=>{a.has(b)||d.push(b),a.set(b,m)}),d.length)for(let m=1;m<t.length;m++){let b=t[m];d.forEach(T=>b.set(T,dV(r,T)))}}return t}(t,_e,j);const Ue=function TV(r,t){let e=null,a=null;return Array.isArray(t)&&t.length?(e=Pp(t[0]),t.length>1&&(a=Pp(t[t.length-1]))):t instanceof Map&&(e=Pp(t)),e||a?new $6(r,e,a):null}(t,_e);return new RV(t,_e,M,Ue)}}let OV=(()=>{class r extends gj{constructor(e,a){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(a.body,{id:"0",encapsulation:qa.None,styles:[],data:{animation:[]}})}build(e){const a=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(e)?_j(e):e;return mi(this._renderer,null,a,"register",[d]),new DV(a,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(rn(cf),rn(bi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();class DV extends UQ{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new hg(this._id,t,e||{},this._renderer)}}class hg{constructor(t,e,a,d){this.id=t,this.element=e,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",a)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return mi(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mi(r,t,e,a,d){return r.setProperty(t,`@@${e}:${a}`,d)}const kV="@.disabled";let Z6=(()=>{class r{constructor(e,a,d){this.delegate=e,this.engine=a,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),a.onRemovalComplete=(m,b)=>{const T=b?.parentNode(m);T&&b.removeChild(T,m)}}createRenderer(e,a){const m=this.delegate.createRenderer(e,a);if(!(e&&a&&a.data&&a.data.animation)){let re=this._rendererCache.get(m);return re||(re=new e7("",m,this.engine,()=>this._rendererCache.delete(m)),this._rendererCache.set(m,re)),re}const b=a.id,T=a.id+"-"+this._currentId;this._currentId++,this.engine.register(T,e);const M=re=>{Array.isArray(re)?re.forEach(M):this.engine.registerTrigger(b,T,e,re.name,re)};return a.data.animation.forEach(M),new fW(this,T,m,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,a,d){e>=0&&e<this._microtaskId?this._zone.run(()=>a(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(m=>{const[b,T]=m;b(T)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(rn(cf),rn(iv),rn(oi))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})();class e7{constructor(t,e,a,d){this.namespaceId=t,this.delegate=e,this.engine=a,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?m=>e.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,a,d=!0){this.delegate.insertBefore(t,e,a),this.engine.onInsert(this.namespaceId,e,t,d)}removeChild(t,e,a){this.engine.onRemove(this.namespaceId,e,this.delegate,a)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,a,d){this.delegate.setAttribute(t,e,a,d)}removeAttribute(t,e,a){this.delegate.removeAttribute(t,e,a)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,a,d){this.delegate.setStyle(t,e,a,d)}removeStyle(t,e,a){this.delegate.removeStyle(t,e,a)}setProperty(t,e,a){"@"==e.charAt(0)&&e==kV?this.disableAnimations(t,!!a):this.delegate.setProperty(t,e,a)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,a){return this.delegate.listen(t,e,a)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class fW extends e7{constructor(t,e,a,d,m){super(e,a,d,m),this.factory=t,this.namespaceId=e}setProperty(t,e,a){"@"==e.charAt(0)?"."==e.charAt(1)&&e==kV?this.disableAnimations(t,a=void 0===a||!!a):this.engine.process(this.namespaceId,t,e.slice(1),a):this.delegate.setProperty(t,e,a)}listen(t,e,a){if("@"==e.charAt(0)){const d=function t7(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let m=e.slice(1),b="";return"@"!=m.charAt(0)&&([m,b]=function mW(r){const t=r.indexOf(".");return[r.substring(0,t),r.slice(t+1)]}(m)),this.engine.listen(this.namespaceId,d,m,b,T=>{this.factory.scheduleListenerCallback(T._data||-1,a,T)})}return this.delegate.listen(t,e,a)}}const PV=[{provide:gj,useClass:OV},{provide:hL,useFactory:function n7(){return new pL}},{provide:iv,useClass:(()=>{class r extends iv{constructor(e,a,d,m){super(e.body,a,d)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(rn(bi),rn(hS),rn(hL),rn(hd))},r.\u0275prov=fr({token:r,factory:r.\u0275fac}),r})()},{provide:cf,useFactory:function r7(r,t,e){return new Z6(r,t,e)},deps:[nt,iv,oi]}],vL=[{provide:hS,useFactory:()=>new X6},{provide:Ki,useValue:"BrowserAnimations"},...PV],NV=[{provide:hS,useClass:aV},{provide:Ki,useValue:"NoopAnimations"},...PV];let i7=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?NV:vL}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Ni({type:r}),r.\u0275inj=Pi({providers:vL,imports:[kr]}),r})();class Fk{static#e=this.\u0275fac=function(e){return new(e||Fk)};static#t=this.\u0275mod=Ni({type:Fk,bootstrap:[L1]});static#n=this.\u0275inj=Pi({imports:[kr,i7,Sd,i5,OM,d9,SH,Z_,UH,Mu,nU,ZH,P1,F8,vG,T1]})}qn().bootstrapModule(Fk).catch(r=>console.error(r))},1648:function(Re,Pe,$){Re=$.nmd(Re);var V=$(7156).default;!function(Y){"use strict";function se(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),u.push.apply(u,p)}return u}function z(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?se(Object(u),!0).forEach(function(p){U(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):se(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function H(i){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(i)}function N(i,l){if(!(i instanceof l))throw new TypeError("Cannot call a class as a function")}function k(i,l){for(var u=0;u<l.length;u++){var p=l[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,ae(p.key),p)}}function L(i,l,u){return l&&k(i.prototype,l),u&&k(i,u),Object.defineProperty(i,"prototype",{writable:!1}),i}function U(i,l,u){return(l=ae(l))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i}function ee(i,l){if(null==i)return{};var u,p,_=function(C,I){if(null==C)return{};var O,D,B={},P=Object.keys(C);for(D=0;D<P.length;D++)I.indexOf(O=P[D])>=0||(B[O]=C[O]);return B}(i,l);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);for(p=0;p<y.length;p++)l.indexOf(u=y[p])>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(_[u]=i[u])}return _}function ae(i){var l=function(u,p){if("object"!=typeof u||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var y=_.call(u,p);if("object"!=typeof y)return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(i,"string");return"symbol"==typeof l?l:String(l)}var de=function(i,l){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var _ in p)p.hasOwnProperty(_)&&(u[_]=p[_])})(i,l)};function he(i,l){function u(){this.constructor=i}de(i,l),i.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}function te(i){return"function"==typeof i}var J=!1,q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){if(i){var l=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+l.stack)}else J&&console.log("RxJS: Back to a better error behavior. Thank you. <3");J=i},get useDeprecatedSynchronousErrorHandling(){return J}};function ce(i){setTimeout(function(){throw i},0)}var Ee={closed:!0,next:function(i){},error:function(i){if(q.useDeprecatedSynchronousErrorHandling)throw i;ce(i)},complete:function(){}},Oe=Array.isArray||function(i){return i&&"number"==typeof i.length};function fe(i){return null!==i&&"object"==typeof i}var Se=function(){function i(l){return Error.call(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map(function(u,p){return p+1+") "+u.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l,this}return i.prototype=Object.create(Error.prototype),i}(),ge=function(){function i(l){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}return i.prototype.unsubscribe=function(){var l;if(!this.closed){var u=this,p=u._parentOrParents,_=u._ctorUnsubscribe,y=u._unsubscribe,C=u._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,p instanceof i)p.remove(this);else if(null!==p)for(var I=0;I<p.length;++I)p[I].remove(this);if(te(y)){_&&(this._unsubscribe=void 0);try{y.call(this)}catch(B){l=B instanceof Se?ue(B.errors):[B]}}if(Oe(C)){I=-1;for(var O=C.length;++I<O;){var D=C[I];if(fe(D))try{D.unsubscribe()}catch(B){l=l||[],B instanceof Se?l=l.concat(ue(B.errors)):l.push(B)}}}if(l)throw new Se(l)}},i.prototype.add=function(l){var u=l;if(!l)return i.EMPTY;switch(typeof l){case"function":u=new i(l);case"object":if(u===this||u.closed||"function"!=typeof u.unsubscribe)return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof i)){var p=u;(u=new i)._subscriptions=[p]}break;default:throw new Error("unrecognized teardown "+l+" added to Subscription.")}var _=u._parentOrParents;if(null===_)u._parentOrParents=this;else if(_ instanceof i){if(_===this)return u;u._parentOrParents=[_,this]}else{if(-1!==_.indexOf(this))return u;_.push(this)}var y=this._subscriptions;return null===y?this._subscriptions=[u]:y.push(u),u},i.prototype.remove=function(l){var u=this._subscriptions;if(u){var p=u.indexOf(l);-1!==p&&u.splice(p,1)}},i.EMPTY=((l=new i).closed=!0,l),i;var l}();function ue(i){return i.reduce(function(l,u){return l.concat(u instanceof Se?u.errors:u)},[])}var pe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ie=function(i){function l(u,p,_){var y=i.call(this)||this;switch(y.syncErrorValue=null,y.syncErrorThrown=!1,y.syncErrorThrowable=!1,y.isStopped=!1,arguments.length){case 0:y.destination=Ee;break;case 1:if(!u){y.destination=Ee;break}if("object"==typeof u){u instanceof l?(y.syncErrorThrowable=u.syncErrorThrowable,y.destination=u,u.add(y)):(y.syncErrorThrowable=!0,y.destination=new je(y,u));break}default:y.syncErrorThrowable=!0,y.destination=new je(y,u,p,_)}return y}return he(l,i),l.prototype[pe]=function(){return this},l.create=function(u,p,_){var y=new l(u,p,_);return y.syncErrorThrowable=!1,y},l.prototype.next=function(u){this.isStopped||this._next(u)},l.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},l.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},l.prototype._next=function(u){this.destination.next(u)},l.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},l.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},l}(ge),je=function(i){function l(u,p,_,y){var C,I=i.call(this)||this;I._parentSubscriber=u;var O=I;return te(p)?C=p:p&&(C=p.next,_=p.error,y=p.complete,p!==Ee&&(te((O=Object.create(p)).unsubscribe)&&I.add(O.unsubscribe.bind(O)),O.unsubscribe=I.unsubscribe.bind(I))),I._context=O,I._next=C,I._error=_,I._complete=y,I}return he(l,i),l.prototype.next=function(u){if(!this.isStopped&&this._next){var p=this._parentSubscriber;q.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable?this.__tryOrSetError(p,this._next,u)&&this.unsubscribe():this.__tryOrUnsub(this._next,u)}},l.prototype.error=function(u){if(!this.isStopped){var p=this._parentSubscriber,_=q.useDeprecatedSynchronousErrorHandling;if(this._error)_&&p.syncErrorThrowable?(this.__tryOrSetError(p,this._error,u),this.unsubscribe()):(this.__tryOrUnsub(this._error,u),this.unsubscribe());else if(p.syncErrorThrowable)_?(p.syncErrorValue=u,p.syncErrorThrown=!0):ce(u),this.unsubscribe();else{if(this.unsubscribe(),_)throw u;ce(u)}}},l.prototype.complete=function(){var u=this;if(!this.isStopped){var p=this._parentSubscriber;if(this._complete){var _=function(){return u._complete.call(u._context)};q.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable?(this.__tryOrSetError(p,_),this.unsubscribe()):(this.__tryOrUnsub(_),this.unsubscribe())}else this.unsubscribe()}},l.prototype.__tryOrUnsub=function(u,p){try{u.call(this._context,p)}catch(_){if(this.unsubscribe(),q.useDeprecatedSynchronousErrorHandling)throw _;ce(_)}},l.prototype.__tryOrSetError=function(u,p,_){if(!q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{p.call(this._context,_)}catch(y){return q.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=y,u.syncErrorThrown=!0,!0):(ce(y),!0)}return!1},l.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},l}(Ie),Le="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qe(i){return i}function $e(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return Xe(i)}function Xe(i){return 0===i.length?Qe:1===i.length?i[0]:function(l){return i.reduce(function(u,p){return p(u)},l)}}var Me=function(){function i(l){this._isScalar=!1,l&&(this._subscribe=l)}return i.prototype.lift=function(l){var u=new i;return u.source=this,u.operator=l,u},i.prototype.subscribe=function(l,u,p){var _=this.operator,y=function(C,I,O){if(C){if(C instanceof Ie)return C;if(C[pe])return C[pe]()}return C||I||O?new Ie(C,I,O):new Ie(Ee)}(l,u,p);if(y.add(_?_.call(y,this.source):this.source||q.useDeprecatedSynchronousErrorHandling&&!y.syncErrorThrowable?this._subscribe(y):this._trySubscribe(y)),q.useDeprecatedSynchronousErrorHandling&&y.syncErrorThrowable&&(y.syncErrorThrowable=!1,y.syncErrorThrown))throw y.syncErrorValue;return y},i.prototype._trySubscribe=function(l){try{return this._subscribe(l)}catch(u){q.useDeprecatedSynchronousErrorHandling&&(l.syncErrorThrown=!0,l.syncErrorValue=u),function(p){for(;p;){var C=p.destination;if(p.closed||p.isStopped)return!1;p=C&&C instanceof Ie?C:null}return!0}(l)?l.error(u):console.warn(u)}},i.prototype.forEach=function(l,u){var p=this;return new(u=Qt(u))(function(_,y){var C;C=p.subscribe(function(I){try{l(I)}catch(O){y(O),C&&C.unsubscribe()}},y,_)})},i.prototype._subscribe=function(l){var u=this.source;return u&&u.subscribe(l)},i.prototype[Le]=function(){return this},i.prototype.pipe=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return 0===l.length?this:Xe(l)(this)},i.prototype.toPromise=function(l){var u=this;return new(l=Qt(l))(function(p,_){var y;u.subscribe(function(C){return y=C},function(C){return _(C)},function(){return p(y)})})},i.create=function(l){return new i(l)},i}();function Qt(i){if(i||(i=Promise),!i)throw new Error("no Promise impl found");return i}var Wt=function(){function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i}(),St=function(i){function l(u,p){var _=i.call(this)||this;return _.subject=u,_.subscriber=p,_.closed=!1,_}return he(l,i),l.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,p=u.observers;if(this.subject=null,p&&0!==p.length&&!u.isStopped&&!u.closed){var _=p.indexOf(this.subscriber);-1!==_&&p.splice(_,1)}}},l}(ge),Ke=function(i){function l(u){var p=i.call(this,u)||this;return p.destination=u,p}return he(l,i),l}(Ie),Fe=function(i){function l(){var u=i.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return he(l,i),l.prototype[pe]=function(){return new Ke(this)},l.prototype.lift=function(u){var p=new We(this,this);return p.operator=u,p},l.prototype.next=function(u){if(this.closed)throw new Wt;if(!this.isStopped)for(var p=this.observers,_=p.length,y=p.slice(),C=0;C<_;C++)y[C].next(u)},l.prototype.error=function(u){if(this.closed)throw new Wt;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var p=this.observers,_=p.length,y=p.slice(),C=0;C<_;C++)y[C].error(u);this.observers.length=0},l.prototype.complete=function(){if(this.closed)throw new Wt;this.isStopped=!0;for(var u=this.observers,p=u.length,_=u.slice(),y=0;y<p;y++)_[y].complete();this.observers.length=0},l.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},l.prototype._trySubscribe=function(u){if(this.closed)throw new Wt;return i.prototype._trySubscribe.call(this,u)},l.prototype._subscribe=function(u){if(this.closed)throw new Wt;return this.hasError?(u.error(this.thrownError),ge.EMPTY):this.isStopped?(u.complete(),ge.EMPTY):(this.observers.push(u),new St(this,u))},l.prototype.asObservable=function(){var u=new Me;return u.source=this,u},l.create=function(u,p){return new We(u,p)},l}(Me),We=function(i){function l(u,p){var _=i.call(this)||this;return _.destination=u,_.source=p,_}return he(l,i),l.prototype.next=function(u){var p=this.destination;p&&p.next&&p.next(u)},l.prototype.error=function(u){var p=this.destination;p&&p.error&&this.destination.error(u)},l.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},l.prototype._subscribe=function(u){return this.source?this.source.subscribe(u):ge.EMPTY},l}(Fe),De=function(i){function l(u){var p=i.call(this)||this;return p._value=u,p}return he(l,i),Object.defineProperty(l.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(u){var p=i.prototype._subscribe.call(this,u);return p&&!p.closed&&u.next(this._value),p},l.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Wt;return this._value},l.prototype.next=function(u){i.prototype.next.call(this,this._value=u)},l}(Fe),et=function(i){function l(u,p){var _=i.call(this,u,p)||this;return _.scheduler=u,_.work=p,_.pending=!1,_}return he(l,i),l.prototype.schedule=function(u,p){if(void 0===p&&(p=0),this.closed)return this;this.state=u;var _=this.id,y=this.scheduler;return null!=_&&(this.id=this.recycleAsyncId(y,_,p)),this.pending=!0,this.delay=p,this.id=this.id||this.requestAsyncId(y,this.id,p),this},l.prototype.requestAsyncId=function(u,p,_){return void 0===_&&(_=0),setInterval(u.flush.bind(u,this),_)},l.prototype.recycleAsyncId=function(u,p,_){if(void 0===_&&(_=0),null!==_&&this.delay===_&&!1===this.pending)return p;clearInterval(p)},l.prototype.execute=function(u,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var _=this._execute(u,p);if(_)return _;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(u,p){var _=!1,y=void 0;try{this.work(u)}catch(C){_=!0,y=!!C&&C||new Error(C)}if(_)return this.unsubscribe(),y},l.prototype._unsubscribe=function(){var u=this.id,p=this.scheduler,_=p.actions,y=_.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==y&&_.splice(y,1),null!=u&&(this.id=this.recycleAsyncId(p,u,null)),this.delay=null},l}(function(i){function l(u,p){return i.call(this)||this}return he(l,i),l.prototype.schedule=function(u,p){return this},l}(ge)),Ut=function(i){function l(u,p){var _=i.call(this,u,p)||this;return _.scheduler=u,_.work=p,_}return he(l,i),l.prototype.schedule=function(u,p){return void 0===p&&(p=0),p>0?i.prototype.schedule.call(this,u,p):(this.delay=p,this.state=u,this.scheduler.flush(this),this)},l.prototype.execute=function(u,p){return p>0||this.closed?i.prototype.execute.call(this,u,p):this._execute(u,p)},l.prototype.requestAsyncId=function(u,p,_){return void 0===_&&(_=0),null!==_&&_>0||null===_&&this.delay>0?i.prototype.requestAsyncId.call(this,u,p,_):u.flush(this)},l}(et),Zt=function(){function i(l,u){void 0===u&&(u=i.now),this.SchedulerAction=l,this.now=u}return i.prototype.schedule=function(l,u,p){return void 0===u&&(u=0),new this.SchedulerAction(this,l).schedule(p,u)},i.now=function(){return Date.now()},i}(),Mt=function(i){function l(u,p){void 0===p&&(p=Zt.now);var _=i.call(this,u,function(){return l.delegate&&l.delegate!==_?l.delegate.now():p()})||this;return _.actions=[],_.active=!1,_.scheduled=void 0,_}return he(l,i),l.prototype.schedule=function(u,p,_){return void 0===p&&(p=0),l.delegate&&l.delegate!==this?l.delegate.schedule(u,p,_):i.prototype.schedule.call(this,u,p,_)},l.prototype.flush=function(u){var p=this.actions;if(this.active)p.push(u);else{var _;this.active=!0;do{if(_=u.execute(u.state,u.delay))break}while(u=p.shift());if(this.active=!1,_){for(;u=p.shift();)u.unsubscribe();throw _}}},l}(Zt),tn=new(function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l}(Mt))(Ut),Jn=tn,qt=new Me(function(i){return i.complete()});function Mr(i){return i?(l=i,new Me(function(u){return l.schedule(function(){return u.complete()})})):qt;var l}function xr(i){return i&&"function"==typeof i.schedule}var wr,i,Cr=function(i){return function(l){for(var u=0,p=i.length;u<p&&!l.closed;u++)l.next(i[u]);l.complete()}};function Sr(i,l){return new Me(function(u){var p=new ge,_=0;return p.add(l.schedule(function(){_!==i.length?(u.next(i[_++]),u.closed||p.add(this.schedule())):u.complete()})),p})}function Bi(i,l){return l?Sr(i,l):new Me(Cr(i))}function rr(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=i[i.length-1];return xr(u)?(i.pop(),Sr(i,u)):Bi(i)}function Qi(i,l){return new Me(l?function(u){return l.schedule(fa,0,{error:i,subscriber:u})}:function(u){return u.error(i)})}function fa(i){i.subscriber.error(i.error)}(i=wr||(wr={})).NEXT="N",i.ERROR="E",i.COMPLETE="C";var Ct=function(){function i(l,u,p){this.kind=l,this.value=u,this.error=p,this.hasValue="N"===l}return i.prototype.observe=function(l){switch(this.kind){case"N":return l.next&&l.next(this.value);case"E":return l.error&&l.error(this.error);case"C":return l.complete&&l.complete()}},i.prototype.do=function(l,u,p){switch(this.kind){case"N":return l&&l(this.value);case"E":return u&&u(this.error);case"C":return p&&p()}},i.prototype.accept=function(l,u,p){return l&&"function"==typeof l.next?this.observe(l):this.do(l,u,p)},i.prototype.toObservable=function(){switch(this.kind){case"N":return rr(this.value);case"E":return Qi(this.error);case"C":return Mr()}throw new Error("unexpected notification kind value")},i.createNext=function(l){return void 0!==l?new i("N",l):i.undefinedValueNotification},i.createError=function(l){return new i("E",void 0,l)},i.createComplete=function(){return i.completeNotification},i.completeNotification=new i("C"),i.undefinedValueNotification=new i("N",void 0),i}();function Ht(i,l){return void 0===l&&(l=0),function(u){return u.lift(new sn(i,l))}}var sn=function(){function i(l,u){void 0===u&&(u=0),this.scheduler=l,this.delay=u}return i.prototype.call=function(l,u){return u.subscribe(new ze(l,this.scheduler,this.delay))},i}(),ze=function(i){function l(u,p,_){void 0===_&&(_=0);var y=i.call(this,u)||this;return y.scheduler=p,y.delay=_,y}return he(l,i),l.dispatch=function(u){u.notification.observe(u.destination),this.unsubscribe()},l.prototype.scheduleMessage=function(u){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new xe(u,this.destination)))},l.prototype._next=function(u){this.scheduleMessage(Ct.createNext(u))},l.prototype._error=function(u){this.scheduleMessage(Ct.createError(u)),this.unsubscribe()},l.prototype._complete=function(){this.scheduleMessage(Ct.createComplete()),this.unsubscribe()},l}(Ie),xe=function(i,l){this.notification=i,this.destination=l},ut=function(i){function l(u,p,_){void 0===u&&(u=Number.POSITIVE_INFINITY),void 0===p&&(p=Number.POSITIVE_INFINITY);var y=i.call(this)||this;return y.scheduler=_,y._events=[],y._infiniteTimeWindow=!1,y._bufferSize=u<1?1:u,y._windowTime=p<1?1:p,p===Number.POSITIVE_INFINITY?(y._infiniteTimeWindow=!0,y.next=y.nextInfiniteTimeWindow):y.next=y.nextTimeWindow,y}return he(l,i),l.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var p=this._events;p.push(u),p.length>this._bufferSize&&p.shift()}i.prototype.next.call(this,u)},l.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new Fn(this._getNow(),u)),this._trimBufferThenGetEvents()),i.prototype.next.call(this,u)},l.prototype._subscribe=function(u){var p,_=this._infiniteTimeWindow,y=_?this._events:this._trimBufferThenGetEvents(),C=this.scheduler,I=y.length;if(this.closed)throw new Wt;if(this.isStopped||this.hasError?p=ge.EMPTY:(this.observers.push(u),p=new St(this,u)),C&&u.add(u=new ze(u,C)),_)for(var O=0;O<I&&!u.closed;O++)u.next(y[O]);else for(O=0;O<I&&!u.closed;O++)u.next(y[O].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),p},l.prototype._getNow=function(){return(this.scheduler||Jn).now()},l.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),p=this._bufferSize,_=this._windowTime,y=this._events,C=y.length,I=0;I<C&&!(u-y[I].time<_);)I++;return C>p&&(I=Math.max(I,C-p)),I>0&&y.splice(0,I),y},l}(Fe),Fn=function(i,l){this.time=i,this.value=l},fn=1,ro=Promise.resolve(),Go={};function Js(i){return i in Go&&(delete Go[i],!0)}var To=function(i){function l(u,p){var _=i.call(this,u,p)||this;return _.scheduler=u,_.work=p,_}return he(l,i),l.prototype.requestAsyncId=function(u,p,_){return void 0===_&&(_=0),null!==_&&_>0?i.prototype.requestAsyncId.call(this,u,p,_):(u.actions.push(this),u.scheduled||(u.scheduled=(y=u.flush.bind(u,null),C=fn++,Go[C]=!0,ro.then(function(){return Js(C)&&y()}),C)));var y,C},l.prototype.recycleAsyncId=function(u,p,_){if(void 0===_&&(_=0),null!==_&&_>0||null===_&&this.delay>0)return i.prototype.recycleAsyncId.call(this,u,p,_);0===u.actions.length&&(Js(p),u.scheduled=void 0)},l}(et),xs=new(function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var p,_=this.actions,y=-1,C=_.length;u=u||_.shift();do{if(p=u.execute(u.state,u.delay))break}while(++y<C&&(u=_.shift()));if(this.active=!1,p){for(;++y<C&&(u=_.shift());)u.unsubscribe();throw p}},l}(Mt))(To),Ro=xs,fl=new Mt(et),jn=fl;function pn(){}var Je=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),pt=function(){function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return i.prototype=Object.create(Error.prototype),i}();function gt(i,l){return function(u){if("function"!=typeof i)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return u.lift(new an(i,l))}}var an=function(){function i(l,u){this.project=l,this.thisArg=u}return i.prototype.call=function(l,u){return u.subscribe(new gn(l,this.project,this.thisArg))},i}(),gn=function(i){function l(u,p,_){var y=i.call(this,u)||this;return y.project=p,y.count=0,y.thisArg=_||y,y}return he(l,i),l.prototype._next=function(u){var p;try{p=this.project.call(this.thisArg,u,this.count++)}catch(_){return void this.destination.error(_)}this.destination.next(p)},l}(Ie),di=function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.notifyNext=function(u,p,_,y,C){this.destination.next(p)},l.prototype.notifyError=function(u,p){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()},l}(Ie),Oo=function(i){function l(u,p,_){var y=i.call(this)||this;return y.parent=u,y.outerValue=p,y.outerIndex=_,y.index=0,y}return he(l,i),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},l.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},l}(Ie),Es="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",js=function(i){return i&&"number"==typeof i.length&&"function"!=typeof i};function Ao(i){return!!i&&"function"!=typeof i.subscribe&&"function"==typeof i.then}var lo=function(i){if(i&&"function"==typeof i[Le])return p=i,function(y){var C=p[Le]();if("function"!=typeof C.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return C.subscribe(y)};if(js(i))return Cr(i);if(Ao(i))return u=i,function(y){return u.then(function(C){y.closed||(y.next(C),y.complete())},function(C){return y.error(C)}).then(null,ce),y};if(i&&"function"==typeof i[Es])return l=i,function(y){for(var C=l[Es]();;){var I=void 0;try{I=C.next()}catch(O){return y.error(O),y}if(I.done){y.complete();break}if(y.next(I.value),y.closed)break}return"function"==typeof C.return&&y.add(function(){C.return&&C.return()}),y};var l,u,p,_=fe(i)?"an invalid object":"'"+i+"'";throw new TypeError("You provided "+_+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Tr(i,l,u,p,_){if(void 0===_&&(_=new Oo(i,u,p)),!_.closed)return l instanceof Me?l.subscribe(_):lo(l)(_)}function Dn(i,l){return l?function(u,p){if(null!=u){if((_=u)&&"function"==typeof _[Le])return function(_,y){return new Me(function(C){var I=new ge;return I.add(y.schedule(function(){var O=_[Le]();I.add(O.subscribe({next:function(D){I.add(y.schedule(function(){return C.next(D)}))},error:function(D){I.add(y.schedule(function(){return C.error(D)}))},complete:function(){I.add(y.schedule(function(){return C.complete()}))}}))})),I})}(u,p);if(Ao(u))return function(_,y){return new Me(function(C){var I=new ge;return I.add(y.schedule(function(){return _.then(function(O){I.add(y.schedule(function(){C.next(O),I.add(y.schedule(function(){return C.complete()}))}))},function(O){I.add(y.schedule(function(){return C.error(O)}))})})),I})}(u,p);if(js(u))return Sr(u,p);if(function(_){return _&&"function"==typeof _[Es]}(u)||"string"==typeof u)return function(_,y){if(!_)throw new Error("Iterable cannot be null");return new Me(function(C){var I,O=new ge;return O.add(function(){I&&"function"==typeof I.return&&I.return()}),O.add(y.schedule(function(){I=_[Es](),O.add(y.schedule(function(){if(!C.closed){var D,B;try{var P=I.next();D=P.value,B=P.done}catch(F){return void C.error(F)}B?C.complete():(C.next(D),this.schedule())}}))})),O})}(u,p)}var _;throw new TypeError((null!==u&&typeof u||u)+" is not observable")}(i,l):i instanceof Me?i:new Me(lo(i))}var ru=function(i){function l(u){var p=i.call(this)||this;return p.parent=u,p}return he(l,i),l.prototype._next=function(u){this.parent.notifyNext(u)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},l}(Ie);!function(i){function l(u,p,_){var y=i.call(this)||this;return y.parent=u,y.outerValue=p,y.outerIndex=_,y}he(l,i),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(Ie);var Lu=function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(){this.destination.complete()},l}(Ie);function Xl(i,l){if(!l.closed){if(i instanceof Me)return i.subscribe(l);var u;try{u=lo(i)(l)}catch(p){l.error(p)}return u}}function zn(i,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?function(p){return p.pipe(zn(function(_,y){return Dn(i(_,y)).pipe(gt(function(C,I){return l(_,C,y,I)}))},u))}:("number"==typeof l&&(u=l),function(p){return p.lift(new MV(i,u))})}!function(i){function l(){return null!==i&&i.apply(this,arguments)||this}he(l,i),l.prototype.notifyNext=function(u,p,_,y){this.destination.next(p)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()}}(Ie);var MV=function(){function i(l,u){void 0===u&&(u=Number.POSITIVE_INFINITY),this.project=l,this.concurrent=u}return i.prototype.call=function(l,u){return u.subscribe(new gc(l,this.project,this.concurrent))},i}(),gc=function(i){function l(u,p,_){void 0===_&&(_=Number.POSITIVE_INFINITY);var y=i.call(this,u)||this;return y.project=p,y.concurrent=_,y.hasCompleted=!1,y.buffer=[],y.active=0,y.index=0,y}return he(l,i),l.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},l.prototype._tryNext=function(u){var p,_=this.index++;try{p=this.project(u,_)}catch(y){return void this.destination.error(y)}this.active++,this._innerSub(p)},l.prototype._innerSub=function(u){var p=new ru(this),_=this.destination;_.add(p);var y=Xl(u,p);y!==p&&_.add(y)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},l}(Lu);function z1(i){return void 0===i&&(i=Number.POSITIVE_INFINITY),zn(Qe,i)}function Y1(){return z1(1)}function Uy(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return Y1()(rr.apply(void 0,i))}function pg(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(1===i.length){var u=i[0];if(Oe(u))return ov(u,null);if(fe(u)&&Object.getPrototypeOf(u)===Object.prototype){var p=Object.keys(u);return ov(p.map(function(y){return u[y]}),p)}}if("function"==typeof i[i.length-1]){var _=i.pop();return ov(i=1===i.length&&Oe(i[0])?i[0]:i,null).pipe(gt(function(y){return _.apply(void 0,y)}))}return ov(i,null)}function ov(i,l){return new Me(function(u){var p=i.length;if(0!==p)for(var _=new Array(p),y=0,C=0,I=function(D){var B=Dn(i[D]),P=!1;u.add(B.subscribe({next:function(F){P||(P=!0,C++),_[D]=F},error:function(F){return u.error(F)},complete:function(){++y!==p&&P||(C===p&&u.next(l?l.reduce(function(F,Z,ie){return F[Z]=_[ie],F},{}):_),u.complete())}}))},O=0;O<p;O++)I(O);else u.complete()})}function Ya(i,l,u,p){return te(u)&&(p=u,u=void 0),p?Ya(i,l,u).pipe(gt(function(_){return Oe(_)?p.apply(void 0,_):p(_)})):new Me(function(_){q1(i,l,function(y){_.next(arguments.length>1?Array.prototype.slice.call(arguments):y)},_,u)})}function q1(i,l,u,p,_){var y,P;if((P=i)&&"function"==typeof P.addEventListener&&"function"==typeof P.removeEventListener){var C=i;i.addEventListener(l,u,_),y=function(){return C.removeEventListener(l,u,_)}}else if(function(P){return P&&"function"==typeof P.on&&"function"==typeof P.off}(i)){var I=i;i.on(l,u),y=function(){return I.off(l,u)}}else if(function(P){return P&&"function"==typeof P.addListener&&"function"==typeof P.removeListener}(i)){var O=i;i.addListener(l,u),y=function(){return O.removeListener(l,u)}}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(var D=0,B=i.length;D<B;D++)q1(i[D],l,u,p,_)}p.add(y)}function Np(i,l,u){return u?Np(i,l).pipe(gt(function(p){return Oe(p)?u.apply(void 0,p):u(p)})):new Me(function(p){var _,y=function(){for(var C=[],I=0;I<arguments.length;I++)C[I]=arguments[I];return p.next(1===C.length?C[0]:C)};try{_=i(y)}catch(C){return void p.error(C)}if(te(l))return function(){return l(y,_)}})}function gS(i){return!Oe(i)&&i-parseFloat(i)+1>=0}function fg(i,l){return void 0===i&&(i=0),void 0===l&&(l=jn),(!gS(i)||i<0)&&(i=0),l&&"function"==typeof l.schedule||(l=jn),new Me(function(u){return u.add(l.schedule(Vk,i,{subscriber:u,counter:0,period:i})),u})}function Vk(i){var l=i.subscriber,u=i.counter,p=i.period;l.next(u),this.schedule({subscriber:l,counter:u+1,period:p},p)}function bs(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=Number.POSITIVE_INFINITY,p=null,_=i[i.length-1];return xr(_)?(p=i.pop(),i.length>1&&"number"==typeof i[i.length-1]&&(u=i.pop())):"number"==typeof _&&(u=i.pop()),null===p&&1===i.length&&i[0]instanceof Me?i[0]:z1(u)(Bi(i,p))}function mg(i,l){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=i,u.thisArg=l,u}function En(i,l){return function(u){return u.lift(new gg(i,l))}}var gg=function(){function i(l,u){this.predicate=l,this.thisArg=u}return i.prototype.call=function(l,u){return u.subscribe(new No(l,this.predicate,this.thisArg))},i}(),No=function(i){function l(u,p,_){var y=i.call(this,u)||this;return y.predicate=p,y.thisArg=_,y.count=0,y}return he(l,i),l.prototype._next=function(u){var p;try{p=this.predicate.call(this.thisArg,u,this.count++)}catch(_){return void this.destination.error(_)}p&&this.destination.next(u)},l}(Ie);function ml(i,l,u){return[En(l,u)(new Me(lo(i))),En(mg(l,u))(new Me(lo(i)))]}function Zl(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(1===i.length){if(!Oe(i[0]))return i[0];i=i[0]}return Bi(i,void 0).lift(new _S)}var _S=function(){function i(){}return i.prototype.call=function(l,u){return u.subscribe(new Wo(l))},i}(),Wo=function(i){function l(u){var p=i.call(this,u)||this;return p.hasFirst=!1,p.observables=[],p.subscriptions=[],p}return he(l,i),l.prototype._next=function(u){this.observables.push(u)},l.prototype._complete=function(){var u=this.observables,p=u.length;if(0===p)this.destination.complete();else{for(var _=0;_<p&&!this.hasFirst;_++){var y=Tr(this,u[_],void 0,_);this.subscriptions&&this.subscriptions.push(y),this.add(y)}this.observables=null}},l.prototype.notifyNext=function(u,p,_){if(!this.hasFirst){this.hasFirst=!0;for(var y=0;y<this.subscriptions.length;y++)if(y!==_){var C=this.subscriptions[y];C.unsubscribe(),this.remove(C)}this.subscriptions=null}this.destination.next(p)},l}(di);function _c(i,l,u){void 0===i&&(i=0);var p=-1;return gS(l)?p=Number(l)<1?1:Number(l):xr(l)&&(u=l),xr(u)||(u=jn),new Me(function(_){var y=gS(i)?i:+i-u.now();return u.schedule(Ko,y,{index:0,period:p,subscriber:_})})}function Ko(i){var l=i.index,u=i.period,p=i.subscriber;if(p.next(l),!p.closed){if(-1===u)return p.complete();i.index=l+1,this.schedule(i,u)}}function vS(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),u.push.apply(u,p)}return u}function $t(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?vS(Object(u),!0).forEach(function(p){Zo(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):vS(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function Zo(i,l,u){return(l="symbol"==typeof(_=function(y,C){if("object"!=typeof y||null===y)return y;var I=y[Symbol.toPrimitive];if(void 0!==I){var O=I.call(y,"string");if("object"!=typeof O)return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(l))?_:String(_))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i;var _}function Or(i,l){if(null==i)return{};var u,p,_=function(C,I){if(null==C)return{};var O,D,B={},P=Object.keys(C);for(D=0;D<P.length;D++)I.indexOf(O=P[D])>=0||(B[O]=C[O]);return B}(i,l);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);for(p=0;p<y.length;p++)l.indexOf(u=y[p])>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(_[u]=i[u])}return _}function kn(i,l,u,p,_){var y={};return Object.keys(p).forEach(function(C){y[C]=p[C]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=u.slice().reverse().reduce(function(C,I){return I(i,l,C)||C},y),_&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(_):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(i,l,y),y=null),y}function em(i){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(i)}function jk(i,l,u){return _=function(y,C){if("object"!==em(y)||null===y)return y;var I=y[Symbol.toPrimitive];if(void 0!==I){var O=I.call(y,"string");if("object"!==em(O))return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(l),(l="symbol"===em(_)?_:String(_))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i;var _}function Vy(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),u.push.apply(u,p)}return u}function vn(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?Vy(Object(u),!0).forEach(function(p){jk(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Vy(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function wa(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var si="function"==typeof Symbol&&Symbol.observable||"@@observable",ho=function(){return Math.random().toString(36).substring(7).split("").join(".")},AS={INIT:"@@redux/INIT"+ho(),REPLACE:"@@redux/REPLACE"+ho(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ho()}};function xV(i){if("object"!=typeof i||null===i)return!1;for(var l=i;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(i)===l}function Qk(i,l,u){var p;if("function"==typeof l&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(wa(0));if("function"==typeof l&&void 0===u&&(u=l,l=void 0),void 0!==u){if("function"!=typeof u)throw new Error(wa(1));return u(Qk)(i,l)}if("function"!=typeof i)throw new Error(wa(2));var _=i,y=l,C=[],I=C,O=!1;function D(){I===C&&(I=C.slice())}function B(){if(O)throw new Error(wa(3));return y}function P(oe){if("function"!=typeof oe)throw new Error(wa(4));if(O)throw new Error(wa(5));var ve=!0;return D(),I.push(oe),function(){if(ve){if(O)throw new Error(wa(6));ve=!1,D();var Ae=I.indexOf(oe);I.splice(Ae,1),C=null}}}function F(oe){if(!xV(oe))throw new Error(wa(7));if(void 0===oe.type)throw new Error(wa(8));if(O)throw new Error(wa(9));try{O=!0,y=_(y,oe)}finally{O=!1}for(var ve=C=I,Ae=0;Ae<ve.length;Ae++)(0,ve[Ae])();return oe}function Z(oe){if("function"!=typeof oe)throw new Error(wa(10));_=oe,F({type:AS.REPLACE})}function ie(){var oe,ve=P;return(oe={subscribe:function(Ae){if("object"!=typeof Ae||null===Ae)throw new Error(wa(11));function Te(){Ae.next&&Ae.next(B())}return Te(),{unsubscribe:ve(Te)}}})[si]=function(){return this},oe}return F({type:AS.INIT}),(p={dispatch:F,subscribe:P,getState:B,replaceReducer:Z})[si]=ie,p}function jy(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return 0===l.length?function(p){return p}:1===l.length?l[0]:l.reduce(function(p,_){return function(){return p(_.apply(void 0,arguments))}})}function Mc(i){return function(l){var u=new LV(i),p=l.lift(u);return u.caught=p}}var LV=function(){function i(l){this.selector=l}return i.prototype.call=function(l,u){return u.subscribe(new yL(l,this.selector,this.caught))},i}(),yL=function(i){function l(u,p,_){var y=i.call(this,u)||this;return y.selector=p,y.caught=_,y}return he(l,i),l.prototype.error=function(u){if(!this.isStopped){var p=void 0;try{p=this.selector(u,this.caught)}catch(C){return void i.prototype.error.call(this,C)}this._unsubscribeAndRecycle();var _=new ru(this);this.add(_);var y=Xl(p,_);y!==_&&this.add(y)}},l}(Lu);function Hk(i){return i instanceof Date&&!isNaN(+i)}function yo(i,l){void 0===l&&(l=jn);var u=Hk(i)?+i-l.now():Math.abs(i);return function(p){return p.lift(new EL(u,l))}}var EL=function(){function i(l,u){this.delay=l,this.scheduler=u}return i.prototype.call=function(l,u){return u.subscribe(new bL(l,this.delay,this.scheduler))},i}(),bL=function(i){function l(u,p,_){var y=i.call(this,u)||this;return y.delay=p,y.scheduler=_,y.queue=[],y.active=!1,y.errored=!1,y}return he(l,i),l.dispatch=function(u){for(var p=u.source,_=p.queue,y=u.scheduler,C=u.destination;_.length>0&&_[0].time-y.now()<=0;)_.shift().notification.observe(C);if(_.length>0){var I=Math.max(0,_[0].time-y.now());this.schedule(u,I)}else this.unsubscribe(),p.active=!1},l.prototype._schedule=function(u){this.active=!0,this.destination.add(u.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},l.prototype.scheduleNotification=function(u){if(!0!==this.errored){var p=this.scheduler,_=new BV(p.now()+this.delay,u);this.queue.push(_),!1===this.active&&this._schedule(p)}},l.prototype._next=function(u){this.scheduleNotification(Ct.createNext(u))},l.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.scheduleNotification(Ct.createComplete()),this.unsubscribe()},l}(Ie),BV=function(i,l){this.time=i,this.notification=l};function is(i){return function(l){return 0===i?Mr():l.lift(new SL(i))}}var SL=function(){function i(l){if(this.total=l,this.total<0)throw new Je}return i.prototype.call=function(l,u){return u.subscribe(new iu(l,this.total))},i}(),iu=function(i){function l(u,p){var _=i.call(this,u)||this;return _.total=p,_.count=0,_}return he(l,i),l.prototype._next=function(u){var p=this.total,_=++this.count;_<=p&&(this.destination.next(u),_===p&&(this.destination.complete(),this.unsubscribe()))},l}(Ie),CL=function(){function i(l){if(this.total=l,this.total<0)throw new Je}return i.prototype.call=function(l,u){return u.subscribe(new FV(l,this.total))},i}(),FV=function(i){function l(u,p){var _=i.call(this,u)||this;return _.total=p,_.ring=new Array,_.count=0,_}return he(l,i),l.prototype._next=function(u){var p=this.ring,_=this.total,y=this.count++;p.length<_?p.push(u):p[y%_]=u},l.prototype._complete=function(){var u=this.destination,p=this.count;if(p>0)for(var _=this.count>=this.total?this.total:this.count,y=this.ring,C=0;C<_;C++){var I=p++%_;u.next(y[I])}u.complete()},l}(Ie);function zo(i){return function(l){return l.lift(new io(i))}}var io=function(){function i(l){this.value=l}return i.prototype.call=function(l,u){return u.subscribe(new IL(l,this.value))},i}(),IL=function(i){function l(u,p){var _=i.call(this,u)||this;return _.value=p,_}return he(l,i),l.prototype._next=function(u){this.destination.next(this.value)},l}(Ie);function UV(i,l){var u=!1;return arguments.length>=2&&(u=!0),function(p){return p.lift(new Gk(i,l,u))}}var Gk=function(){function i(l,u,p){void 0===p&&(p=!1),this.accumulator=l,this.seed=u,this.hasSeed=p}return i.prototype.call=function(l,u){return u.subscribe(new fr(l,this.accumulator,this.seed,this.hasSeed))},i}(),fr=function(i){function l(u,p,_,y){var C=i.call(this,u)||this;return C.accumulator=p,C._seed=_,C.hasSeed=y,C.index=0,C}return he(l,i),Object.defineProperty(l.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),l.prototype._next=function(u){if(this.hasSeed)return this._tryNext(u);this.seed=u,this.destination.next(u)},l.prototype._tryNext=function(u){var p,_=this.index++;try{p=this.accumulator(this.seed,u,_)}catch(y){this.destination.error(y)}this.seed=p,this.destination.next(p)},l}(Ie);function Gr(i,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?zn(function(){return i},l,u):("number"==typeof l&&(u=l),zn(function(){return i},u))}function Pi(i){return function(l){return l.lift(new yS(i))}}var yS=function(){function i(l){this.predicate=l}return i.prototype.call=function(l,u){return u.subscribe(new VV(l,this.predicate))},i}(),VV=function(i){function l(u,p){var _=i.call(this,u)||this;return _.predicate=p,_.skipping=!0,_.index=0,_}return he(l,i),l.prototype._next=function(u){var p=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||p.next(u)},l.prototype.tryCallPredicate=function(u){try{var p=this.predicate(u,this.index++);this.skipping=Boolean(p)}catch(_){this.destination.error(_)}},l}(Ie);function Mh(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=i[i.length-1];return xr(u)?(i.pop(),function(p){return Uy(i,p,u)}):function(p){return Uy(i,p)}}var ed=function(i){function l(u,p,_){void 0===p&&(p=0),void 0===_&&(_=Ro);var y=i.call(this)||this;return y.source=u,y.delayTime=p,y.scheduler=_,(!gS(p)||p<0)&&(y.delayTime=0),_&&"function"==typeof _.schedule||(y.scheduler=Ro),y}return he(l,i),l.create=function(u,p,_){return void 0===p&&(p=0),void 0===_&&(_=Ro),new l(u,p,_)},l.dispatch=function(u){return this.add(u.source.subscribe(u.subscriber))},l.prototype._subscribe=function(u){return this.scheduler.schedule(l.dispatch,this.delayTime,{source:this.source,subscriber:u})},l}(Me);function Bd(i,l){return void 0===l&&(l=0),function(u){return u.lift(new Wk(i,l))}}var Wk=function(){function i(l,u){this.scheduler=l,this.delay=u}return i.prototype.call=function(l,u){return new ed(u,this.delay,this.scheduler).subscribe(l)},i}();function oo(i,l){return"function"==typeof l?function(u){return u.pipe(oo(function(p,_){return Dn(i(p,_)).pipe(gt(function(y,C){return l(p,y,_,C)}))}))}:function(u){return u.lift(new J1(i))}}var J1=function(){function i(l){this.project=l}return i.prototype.call=function(l,u){return u.subscribe(new Qy(l,this.project))},i}(),Qy=function(i){function l(u,p){var _=i.call(this,u)||this;return _.project=p,_.index=0,_}return he(l,i),l.prototype._next=function(u){var p,_=this.index++;try{p=this.project(u,_)}catch(y){return void this.destination.error(y)}this._innerSub(p)},l.prototype._innerSub=function(u){var p=this.innerSubscription;p&&p.unsubscribe();var _=new ru(this),y=this.destination;y.add(_),this.innerSubscription=Xl(u,_),this.innerSubscription!==_&&y.add(this.innerSubscription)},l.prototype._complete=function(){var u=this.innerSubscription;u&&!u.closed||i.prototype._complete.call(this),this.unsubscribe()},l.prototype._unsubscribe=function(){this.innerSubscription=void 0},l.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&i.prototype._complete.call(this)},l.prototype.notifyNext=function(u){this.destination.next(u)},l}(Lu),Hy=function(){function i(l){this.notifier=l}return i.prototype.call=function(l,u){var p=new Xr(l),_=Xl(this.notifier,new ru(p));return _&&!p.seenValue?(p.add(_),u.subscribe(p)):p},i}(),Xr=function(i){function l(u){var p=i.call(this,u)||this;return p.seenValue=!1,p}return he(l,i),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l}(Lu);function Fd(i,l){return void 0===l&&(l=!1),function(u){return u.lift(new wL(i,l))}}var wL=function(){function i(l,u){this.predicate=l,this.inclusive=u}return i.prototype.call=function(l,u){return u.subscribe(new td(l,this.predicate,this.inclusive))},i}(),td=function(i){function l(u,p,_){var y=i.call(this,u)||this;return y.predicate=p,y.inclusive=_,y.index=0,y}return he(l,i),l.prototype._next=function(u){var p,_=this.destination;try{p=this.predicate(u,this.index++)}catch(y){return void _.error(y)}this.nextOrComplete(u,p)},l.prototype.nextOrComplete=function(u,p){var _=this.destination;Boolean(p)?_.next(u):(this.inclusive&&_.next(u),_.complete())},l}(Ie);function ir(i,l,u){return function(p){return p.lift(new jV(i,l,u))}}var jV=function(){function i(l,u,p){this.nextOrObserver=l,this.error=u,this.complete=p}return i.prototype.call=function(l,u){return u.subscribe(new es(l,this.nextOrObserver,this.error,this.complete))},i}(),es=function(i){function l(u,p,_,y){var C=i.call(this,u)||this;return C._tapNext=pn,C._tapError=pn,C._tapComplete=pn,C._tapError=_||pn,C._tapComplete=y||pn,te(p)?(C._context=C,C._tapNext=p):p&&(C._context=p,C._tapNext=p.next||pn,C._tapError=p.error||pn,C._tapComplete=p.complete||pn),C}return he(l,i),l.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(p){return void this.destination.error(p)}this.destination.next(u)},l.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(p){return void this.destination.error(p)}this.destination.error(u)},l.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){return void this.destination.error(u)}return this.destination.complete()},l}(Ie),QV=function(){function i(l,u,p,_){this.waitFor=l,this.absoluteTimeout=u,this.withObservable=p,this.scheduler=_}return i.prototype.call=function(l,u){return u.subscribe(new TL(l,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},i}(),TL=function(i){function l(u,p,_,y,C){var I=i.call(this,u)||this;return I.absoluteTimeout=p,I.waitFor=_,I.withObservable=y,I.scheduler=C,I.scheduleTimeout(),I}return he(l,i),l.dispatchTimeout=function(u){var p=u.withObservable;u._unsubscribeAndRecycle(),u.add(Xl(p,new ru(u)))},l.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(l.dispatchTimeout,this.waitFor,this))},l.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),i.prototype._next.call(this,u)},l.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},l}(Lu);function $1(i,l){return void 0===l&&(l=jn),u=i,p=Qi(new pt),void 0===(_=l)&&(_=jn),function(y){var C=Hk(u),I=C?+u-_.now():Math.abs(u);return y.lift(new QV(I,C,p,_))};var u,p,_}function Un(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return function(u){var p;return"function"==typeof i[i.length-1]&&(p=i.pop()),u.lift(new X1(i,p))}}var X1=function(){function i(l,u){this.observables=l,this.project=u}return i.prototype.call=function(l,u){return u.subscribe(new Gy(l,this.observables,this.project))},i}(),Gy=function(i){function l(u,p,_){var y=i.call(this,u)||this;y.observables=p,y.project=_,y.toRespond=[];var C=p.length;y.values=new Array(C);for(var I=0;I<C;I++)y.toRespond.push(I);for(I=0;I<C;I++)y.add(Tr(y,p[I],void 0,I));return y}return he(l,i),l.prototype.notifyNext=function(u,p,_){this.values[_]=p;var y=this.toRespond;if(y.length>0){var C=y.indexOf(_);-1!==C&&y.splice(C,1)}},l.prototype.notifyComplete=function(){},l.prototype._next=function(u){if(0===this.toRespond.length){var p=[u].concat(this.values);this.project?this._tryProject(p):this.destination.next(p)}},l.prototype._tryProject=function(u){var p;try{p=this.project.apply(this,u)}catch(_){return void this.destination.error(_)}this.destination.next(p)},l}(di),ES=function(i,l){return i===l||"function"==typeof l&&i===l.toString()},Zr=function(){for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return function(p){return p.pipe(En(function(_){var y=_.type,C=l.length;if(1===C)return ES(y,l[0]);for(var I=0;I<C;I++)if(ES(y,l[I]))return!0;return!1}))}},Kk=function(){function i(l,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(l,_.key,_)}}return function(l,u,p){return u&&i(l.prototype,u),p&&i(l,p),l}}(),Wy=function(i){function l(u){!function(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}(this,l);var p=function(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?_:y}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return p.source=u,p}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(l,Me),Kk(l,null,[{key:"of",value:function(){return new this(rr.apply(void 0,arguments))}},{key:"from",value:function(u,p){return new this(Dn(u,p))}}]),Kk(l,[{key:"lift",value:function(u){var p=new l(this);return p.operator=u,p}},{key:"ofType",value:function(){return Zr.apply(void 0,arguments)(this)}}]),l}(),_g=function(i){function l(u,p){!function(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}(this,l);var _=function(y,C){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?y:C}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,function(y){var C=_.__notifier.subscribe(y);return C&&!C.closed&&y.next(_.value),C}));return _.value=p,_.__notifier=new Fe,_.__subscription=u.subscribe(function(y){y!==_.value&&(_.value=y,_.__notifier.next(y))}),_}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(l,Me),l}(),sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function bS(i,l){i.super_=l,i.prototype=Object.create(l.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}function rn(i,l){Object.defineProperty(this,"kind",{value:i,enumerable:!0}),l&&l.length&&Object.defineProperty(this,"path",{value:l,enumerable:!0})}"object"===(typeof global>"u"?"undefined":sv(global))&&global&&global,bS(function i(l,u,p){i.super_.call(this,"E",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0}),Object.defineProperty(this,"rhs",{value:p,enumerable:!0})},rn),bS(function i(l,u){i.super_.call(this,"N",l),Object.defineProperty(this,"rhs",{value:u,enumerable:!0})},rn),bS(function i(l,u){i.super_.call(this,"D",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0})},rn),bS(function i(l,u,p){i.super_.call(this,"A",l),Object.defineProperty(this,"index",{value:u,enumerable:!0}),Object.defineProperty(this,"item",{value:p,enumerable:!0})},rn);const xh=!1;var ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ud(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function SS(i){if(i.__esModule)return i;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(u){var p=Object.getOwnPropertyDescriptor(i,u);Object.defineProperty(l,u,p.get?p:{enumerable:!0,get:function(){return i[u]}})}),l}var Vd=function(i,l,u,p,_,y,C,I){if(!i){var O;if(void 0===l)O=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var D=[u,p,_,y,C,I],B=0;(O=new Error(l.replace(/%s/g,function(){return D[B++]}))).name="Invariant Violation"}throw O.framesToPop=1,O}},vg=function(i){return"function"==typeof i},Ag=function(i){return i.toString()},Bu=function(i){return"string"==typeof i},vc=function(i){return i},zk=function(i){return null===i};function Ss(i,l,u){void 0===l&&(l=vc),Vd(vg(l)||zk(l),"Expected payloadCreator to be a function, undefined or null");var p=zk(l)||l===vc?vc:function(I){for(var O=arguments.length,D=new Array(O>1?O-1:0),B=1;B<O;B++)D[B-1]=arguments[B];return I instanceof Error?I:l.apply(void 0,[I].concat(D))},_=vg(u),y=i.toString(),C=function(){var I=p.apply(void 0,arguments),O={type:i};return I instanceof Error&&(O.error=!0),void 0!==I&&(O.payload=I),_&&(O.meta=u.apply(void 0,arguments)),O};return C.toString=function(){return y},C}var qa=function(i){if("object"!=typeof i||null===i)return!1;for(var l=i;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(i)===l},nd=function(i){return Array.isArray(i)},po=function(i){return null==i},Ky=function(i){return i[i.length-1]},Z1=/\s/,CS=/(_|-|\.|:)/,Yk=/([a-z][A-Z]|[A-Z][a-z])/,Mp=/[\W_]+(.|$)/g,zy=/(.)([A-Z]+)/g,Ta=function(i){return(l=i,function(i){return Z1.test(i)?i.toLowerCase():CS.test(i)?(l=i,l.replace(Mp,function(u,p){return p?" "+p:""})||i).toLowerCase():Yk.test(i)?function(l){return l.replace(zy,function(u,p,_){return p+" "+_.toLowerCase().split("").join(" ")})}(i).toLowerCase():i.toLowerCase();var l}(l).replace(/[\W_]+(.|$)/g,function(u,p){return p?" "+p:""}).trim()).replace(/\s(\w)/g,function(l,u){return u.toUpperCase()});var l},qk=function(i){return-1===i.indexOf("/")?Ta(i):i.split("/").map(Ta).join("/")},tm=function(i,l){return i.reduce(function(u,p){return l(u,p)},{})},Yy=function(i){return typeof Map<"u"&&i instanceof Map};function Ni(i){if(Yy(i))return Array.from(i.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(i);var l=Object.getOwnPropertyNames(i);return"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(i))),l}function xp(i,l){return Yy(l)?l.get(i):l[i]}var eT=function(i){return function l(u,p,_,y){var C=void 0===p?{}:p,I=C.namespace,O=void 0===I?"/":I,D=C.prefix;return void 0===_&&(_={}),void 0===y&&(y=""),Ni(u).forEach(function(B){var Z,P=(Z=function(Z){var ie;if(!y)return Z;var oe=Z.toString().split("||"),ve=y.split("||");return(ie=[]).concat.apply(ie,ve.map(function(Ae){return oe.map(function(Te){return""+Ae+O+Te})})).join("||")}(B),y||!D||D&&new RegExp("^"+D+O).test(Z)?Z:""+D+O+Z),F=xp(B,u);i(F)?l(F,{namespace:O,prefix:D},_,P):_[P]=F}),_}},pr=eT(qa);function Ja(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{},p=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(p=p.concat(Object.getOwnPropertySymbols(u).filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable}))),p.forEach(function(_){so(i,_,u[_])})}return i}function so(i,l,u){return l in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i}function fo(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];var _=qa(Ky(u))?u.pop():{};return Vd(u.every(Bu)&&(Bu(i)||qa(i)),"Expected optional object followed by string action types"),Bu(i)?Fu([i].concat(u),_):Ja({},ou(i,_),Fu(u,_))}function ou(i,l){return function(u,p){var _=void 0===p?{}:p,y=_.namespace,C=void 0===y?"/":y,I=_.prefix;function O(B,P,F){var Z=qk(F.shift());0===F.length?P[Z]=u[B]:(P[Z]||(P[Z]={}),O(B,P[Z],F))}var D={};return Object.getOwnPropertyNames(u).forEach(function(B){var P=I?B.replace(""+I+C,""):B;return O(B,D,P.split(C))}),D}(jd(pr(i,l)),l)}function jd(i,l){var u=void 0===l?{}:l,p=u.prefix,_=u.namespace,y=void 0===_?"/":_;return tm(Object.keys(i),function(C,I){var O,D=i[I];Vd(function(F){if(vg(F)||po(F))return!0;if(nd(F)){var Z=F[0],oe=F[1];return vg(void 0===Z?vc:Z)&&vg(oe)}return!1}(D),"Expected function, undefined, null, or array with payload and meta functions for "+I);var B=p?""+p+y+I:I,P=nd(D)?Ss.apply(void 0,[B].concat(D)):Ss(B,D);return Ja({},C,((O={})[I]=P,O))})}function Fu(i,l){var u=jd(tm(i,function(p,_){var y;return Ja({},p,((y={})[_]=vc,y))}),l);return tm(Object.keys(u),function(p,_){var y;return Ja({},p,((y={})[qk(_)]=u[_],y))})}var Ac=function(){for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];var p="function"!=typeof l[l.length-1]&&l.pop(),_=l;if(void 0===p)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(y,C){for(var I=arguments.length,O=Array(I>2?I-2:0),D=2;D<I;D++)O[D-2]=arguments[D];var B=void 0===y,P=void 0===C;return B&&P&&p?p:_.reduce(function(F,Z){return Z.apply(void 0,[F,C].concat(O))},B&&!P&&p?p:y)}},dr=eT(function(i){return(qa(i)||Yy(i))&&(p=(u=Ni(i)).every(function(_){return"next"===_||"throw"===_}),!(u.length&&u.length<=2&&p));var u,p});function Fr(i,l,u){void 0===u&&(u={}),Vd(qa(i)||Yy(i),"Expected handlers to be a plain object.");var p=dr(i,u),_=Ni(p).map(function(C){return function(I,O,D){void 0===O&&(O=vc);var B=Ag(I).split("||");Vd(void 0!==D,"defaultState for reducer handling "+B.join(", ")+" should be defined"),Vd(vg(O)||qa(O),"Expected reducer to be a function or object with next and throw reducers");var P=vg(O)?[O,O]:[O.next,O.throw].map(function(ie){return po(ie)?vc:ie}),F=P[0],Z=P[1];return function(ie,oe){void 0===ie&&(ie=D);var ve=oe.type;return ve&&-1!==B.indexOf(Ag(ve))?(!0===oe.error?Z:F)(ie,oe):ie}}(C,xp(C,p),l)}),y=Ac.apply(void 0,_.concat([l]));return function(C,I){return void 0===C&&(C=l),y(C,I)}}const os=Ss("CONNECT_ZOOM_SOCKET"),Uu=Ss("CONNECT_XMPP_SOCKET"),Qd=Ss("CLOSE_ZOOM_SOCKET"),Ra=Ss("CLOSE_XMPP_SOCKET"),rd=Ss("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),$s=Ss("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),qy=Ss("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),yg=Ss("CONNECT_MAIN_SESSION_SOCKET"),gi=Ss("CLOSE_MAIN_SESSION_SOCKET"),_l=Ss("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:Lh,setRwgServersList:tT,setRwgRetryCount:nm,setXmppSocketStatus:Oa,setMainSessionSocketStatus:rm,resetSocket:Eg}=fo("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),vl=Ss("CONNECT_TO_MEDIA_STREAM"),av=Ss("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:IS,setAudioDecodeStatus:Mo,setVideoEncodeStatus:nT,setVideoDecodeStatus:cv,setSharingEncodeStatus:wS,setSharingDecodeStatus:Lp,setMediaConstraints:Jy,setMediaEncryptKey:bg,resetMedia:xc}=fo("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","RESET_MEDIA");function $y(i,l){for(var u=arguments.length,p=new Array(u>2?u-2:0),_=2;_<u;_++)p[_-2]=arguments[_];return i(Wy.of(...p||[]),l,null)}function Vu(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];const p=function(){for(var _=arguments.length,y=new Array(_),C=0;C<_;C++)y[C]=arguments[C];return bs(...l.map(I=>{const O=I(...y);if(!O)throw new TypeError(`combineEpics: one of the provided Epics "${I.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return O.pipe(Mc((D,B)=>(setTimeout(()=>{throw D},0),B)))}))};try{Object.defineProperty(p,"name",{value:`combineEpics(${l.map(_=>_.name||"<anonymous>").join(", ")})`})}catch{}return p}function Ls(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return Vu(...l.flatMap(_=>Object.values(_)))}function Zn(i,l){return i.pipe(Zr(`${rd}`),En(u=>u.payload.evt===l))}function Bp(i,l){return i.pipe(Zr(`${_l}`),En(u=>u.payload.evt===l))}function Hd(i,l){return i.pipe(Zr(`${qy}`),En(u=>u.payload.evt===l))}function Bs(i,l){return i.pipe(Zr(`${rd}`,`${_l}`),En(u=>u.payload.evt===l))}function Ei(i,l){return i.pipe(Zr(`${av}`),En(u=>Array.isArray(l)?l.indexOf(u.payload.type)>-1:u.payload.type===l))}var TS={exports:{}};function Xs(i){return TS.exports.Base64.encode(i,!0)}function Fp(i){return TS.exports.Base64.decode(i)}function OL(i){return TS.exports.Base64.encode(i,!1)}!function(i,l){var u;u=typeof self<"u"?self:typeof window<"u"?window:ma,i.exports=function(_){var y,C=(_=_||{}).Base64,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=function(Ot){for(var _n={},Gn=0,Dt=Ot.length;Gn<Dt;Gn++)_n[Ot.charAt(Gn)]=Gn;return _n}(I),D=String.fromCharCode,B=function(Ot){if(Ot.length<2)return(_n=Ot.charCodeAt(0))<128?Ot:_n<2048?D(192|_n>>>6)+D(128|63&_n):D(224|_n>>>12&15)+D(128|_n>>>6&63)+D(128|63&_n);var _n=65536+1024*(Ot.charCodeAt(0)-55296)+(Ot.charCodeAt(1)-56320);return D(240|_n>>>18&7)+D(128|_n>>>12&63)+D(128|_n>>>6&63)+D(128|63&_n)},P=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,F=function(Ot){return Ot.replace(P,B)},Z=function(Ot){var _n=[0,2,1][Ot.length%3],Gn=Ot.charCodeAt(0)<<16|(Ot.length>1?Ot.charCodeAt(1):0)<<8|(Ot.length>2?Ot.charCodeAt(2):0);return[I.charAt(Gn>>>18),I.charAt(Gn>>>12&63),_n>=2?"=":I.charAt(Gn>>>6&63),_n>=1?"=":I.charAt(63&Gn)].join("")},ie=_.btoa&&"function"==typeof _.btoa?function(Ot){return _.btoa(Ot)}:function(Ot){if(Ot.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return Ot.replace(/[\s\S]{1,3}/g,Z)},oe=function(Ot){return ie(F(String(Ot)))},ve=function(Ot){return Ot.replace(/[+\/]/g,function(_n){return"+"==_n?"-":"_"}).replace(/=/g,"")},Ae=function(Ot,_n){return _n?ve(oe(Ot)):oe(Ot)};_.Uint8Array&&(y=function(Ot,_n){for(var Gn="",Dt=0,at=Ot.length;Dt<at;Dt+=3){var nt=Ot[Dt+1],Tt=Ot[Dt+2],ht=Ot[Dt]<<16|nt<<8|Tt;Gn+=I.charAt(ht>>>18)+I.charAt(ht>>>12&63)+(void 0!==nt?I.charAt(ht>>>6&63):"=")+(void 0!==Tt?I.charAt(63&ht):"=")}return _n?ve(Gn):Gn});var Te,Be=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Q=function(Ot){switch(Ot.length){case 4:var _n=((7&Ot.charCodeAt(0))<<18|(63&Ot.charCodeAt(1))<<12|(63&Ot.charCodeAt(2))<<6|63&Ot.charCodeAt(3))-65536;return D(55296+(_n>>>10))+D(56320+(1023&_n));case 3:return D((15&Ot.charCodeAt(0))<<12|(63&Ot.charCodeAt(1))<<6|63&Ot.charCodeAt(2));default:return D((31&Ot.charCodeAt(0))<<6|63&Ot.charCodeAt(1))}},tt=function(Ot){return Ot.replace(Be,Q)},dt=function(Ot){var _n=Ot.length,Gn=_n%4,Dt=(_n>0?O[Ot.charAt(0)]<<18:0)|(_n>1?O[Ot.charAt(1)]<<12:0)|(_n>2?O[Ot.charAt(2)]<<6:0)|(_n>3?O[Ot.charAt(3)]:0),at=[D(Dt>>>16),D(Dt>>>8&255),D(255&Dt)];return at.length-=[0,0,2,1][Gn],at.join("")},it=_.atob&&"function"==typeof _.atob?function(Ot){return _.atob(Ot)}:function(Ot){return Ot.replace(/\S{1,4}/g,dt)},ft=function(Ot){return it(String(Ot).replace(/[^A-Za-z0-9\+\/]/g,""))},Kt=function(Ot){return String(Ot).replace(/[-_]/g,function(_n){return"-"==_n?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},en=function(Ot){return _n=Kt(Ot),tt(it(_n));var _n};if(_.Uint8Array&&(Te=function(Ot){return Uint8Array.from(ft(Kt(Ot)),function(_n){return _n.charCodeAt(0)})}),_.Base64={VERSION:"2.6.4",atob:ft,btoa:ie,fromBase64:en,toBase64:Ae,utob:F,encode:Ae,encodeURI:function(Ot){return Ae(Ot,!0)},btou:tt,decode:en,noConflict:function(){var Ot=_.Base64;return _.Base64=C,Ot},fromUint8Array:y,toUint8Array:Te},"function"==typeof Object.defineProperty){var zt=function(Ot){return{value:Ot,enumerable:!1,writable:!0,configurable:!0}};_.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",zt(function(){return en(this)})),Object.defineProperty(String.prototype,"toBase64",zt(function(Ot){return Ae(this,Ot)})),Object.defineProperty(String.prototype,"toBase64URI",zt(function(){return Ae(this,!0)}))}}return _.Meteor&&(Base64=_.Base64),i.exports&&(i.exports.Base64=_.Base64),{Base64:_.Base64}}(u)}(TS);const HV={"-":"+",_:"/",".":"="};function Cs(i){const l=i.replace(/[-_.]/g,u=>HV[u]);return Uint8Array.from(atob(l),u=>u.charCodeAt(0))}const Jk=i=>{const l=i.charCodeAt(0);return l<=parseInt("0x7F",16)?1:l<=parseInt("0x7FF",16)?2:l<=parseInt("0xFFFF",16)?3:l<=parseInt("0x1FFFFF",16)?4:l<=parseInt("0x3FFFFFF",16)?5:6};function $k(i,l){return Object.keys(i).find(u=>i[u]===l)}const Xk=(i,l)=>{const u=i.split(".").map(y=>Number(y)).slice(0,3),p=l.split(".").map(y=>Number(y)).slice(0,3);let _=0;for(let y=0;y<3;y++){const C=y<u.length?u[y]:0,I=y<p.length?p[y]:0;if(C<I){_=-1;break}if(C>I){_=1;break}}return _},rT=i=>{var l;let u=(new Date).getTime(),p=1e3*(null===(l=performance)||void 0===l?void 0:l.now())||0;const _="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{let C=16*Math.random();return u>0?(C=(u+C)%16|0,u=Math.floor(u/16)):(C=(p+C)%16|0,p=Math.floor(p/16)),("x"===y?C:3&C|8).toString(16)});return"string"==typeof i||"number"==typeof i?_+":"+i:_+""},Zk=(i,l)=>i>>10==l>>10,e2={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_host_email_as_attendee":"Host email as attendee","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_host_inactive":"Meeting host is inactive.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting","apac.errorcodes_no_response_from_web":"No response from web, try again later.","apac.errorcodes_host_email":"Please use host/alternative host to start the webinar."},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App."},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil."},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile."},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel."},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435."},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng."},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile."}},iT=e2.default,oT=-3e3;let id,Lc,OS;function DL(i,l){return l in iT?iT[l]:i}(function(i){i[i.CONF_SUCCESS=0]="CONF_SUCCESS",i[i.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",i[i.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",i[i.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",i[i.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",i[i.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",i[i.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",i[i.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",i[i.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS"})(id||(id={})),function(i){i[i.Unknown=0]="Unknown",i[i.Normal=1]="Normal",i[i.Userrequest=2]="Userrequest",i[i.SdkConnection=3]="SdkConnection",i[i.Reconnect=5]="Reconnect",i[i.PtRequest=6]="PtRequest",i[i.KickedByHost=7]="KickedByHost",i[i.EndByHost=8]="EndByHost",i[i.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",i[i.FreeMeetingTimeout=10]="FreeMeetingTimeout",i[i.JBHTimeout=11]="JBHTimeout",i[i.EndBySingleStatus=12]="EndBySingleStatus",i[i.WebinarNeedRegister=13]="WebinarNeedRegister",i[i.ArchiveFail=14]="ArchiveFail",i[i.EndByNone=15]="EndByNone",i[i.EndByAdmin=16]="EndByAdmin"}(Lc||(Lc={})),function(i){i[i.WaitingRoomFailover=1]="WaitingRoomFailover",i[i.WebEndAndRejoin=2]="WebEndAndRejoin"}(OS||(OS={}));const Zy={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e4},Sg={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_upgrade"},eE={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3129:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},1001:{"apac.errorcodes_host_inactive":3625},3136:{"apac.errorcodes_zak":3623,"apac.errorcodes_host_email":3624,"apac.errorcodes_zak2":3265,"apac.errorcodes_require_host":3709},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610}},Al={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3027:{"apac.errorcodes_host_email_as_attendee":3627},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_no_response_from_web":3621},131005:{"apac.errorcodes_no_response_from_web":3621},1001:{"apac.errorcodes_host_inactive":3625},131001:{"apac.errorcodes_host_inactive":3625},131013:{"meeting ended":4004},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};let tE;function Cg(i,l){const{key:u,value:p}=function(y,C){let I=!1;if(-1===y)return{key:"apac.errorcodes_offline",value:403};if(3e3===y){const B=["en-US","de-DE","es-ES","en-US","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT"];let P={};if(tE)P=tE;else{const F=Object.keys(eE[3e3]);B.forEach(Z=>{const ie=("en-US"===(oe=Z)&&(oe="default"),e2[oe]||e2.default);var oe;P[Z]={},F.forEach(oe=>{P[Z][oe]=ie[oe]})}),tE=P}return B.forEach(F=>{if(I)return;const Z=$k(P[F],C);Z&&(I={key:Z,value:eE[y][Z]})}),I||(I={key:"apac.errorcodes_fail",value:200}),I}if(200===y){const B=$k({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},C);return I=B?{key:B,value:eE[y][B]}:{key:"apac.errorcodes_fail",value:200},I}if(void 0!==eE[y]){const B=eE[y],P=Object.keys(B)[0];I={key:P,value:B[P]}}if(I)return I;const O=$k(Zy,y),D=Sg[O];return D?{key:D,value:y}:{key:"apac.errorcodes_fail",value:200}}(i,l),_=DL(u,u);return u!==_?{reason:_,errorCode:p}:{reason:iT[u],errorCode:p}}function DS(i){let l=!1;const u="number"==typeof i?i:i.body.res;if(void 0!==Al[u]){const _=Al[u],y=Object.keys(_)[0];l={key:y,value:_[y]}}if(l){const{key:_,value:y}=l,C=DL(_,_);return Object.assign({},i,_!==C?{reason:C,errorCode:y}:{reason:iT[_],errorCode:y})}const p=Cg(u);return Object.assign({},i,{reason:p.reason,errorCode:p.errorCode})}const t2=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],Ig={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:i=>({meetingTopic:Fp(i)}),gatewayKey:i=>{const[,l,u]=i.split(".");return l&&u?{gatewayUser:{userId:Number(l),sn:u}}:{}},encryptKey:i=>({gcmSessinKey:Cs(i)})},kL=Ss("GET_MEETING_INFO"),nE=Ss("GET_INSTANT_MEETING_INFO");Ss("LOGON_ZOOM_DOMAIN"),Ss("VERIFY_ZOOM_RECAPTCHA"),Ss("LOGON_THIRD_PARTY_DOMAIN");const sT=Ss("PING_RWC_SERVER"),wo=Ss("MEETING_FAILOVER"),Gd=Ss("LEAVE_MEETING"),uv=Ss("END_MEETING");Ss("REGISTER_WEBINAR");const kS=Ss("TRIGGER_IDLE_CHECK"),{setMeetingInfo:lv,setWindownOpen:PL,setAppidSignature:Da,setZtk:NL,setZsk:GV,setTkMtkguid:PS,setPingRwcTimestamp:yc,setInMeetingInfo:dv,setMeetingAttribute:NS,resetMeeting:im,setIsHost:$a,setIsCohost:n2,setMeetingIsOnHold:Bh,setIsMeetingReset:r2,setAudioVideoBeforeOnHold:Up,setCurrentUserAudioBeforeReset:rE,setIsCurrentUserMutedBeforeReset:MS,setMeetingStatus:ai,setMeetingRegion:aT,setIsCurrentUserStartVideoBeforeReset:WV,setJoinMeetingTimeStamp:o2,setIsEnableQos:s2,setActiveAppInfo:a2,setMeetingIdleStartTime:hv,setSessionIdleTimeoutMinutes:cT,setIsAudioBridgeEnabled:c2,addDiscardedRwcHost:yn,setSharePronounType:Hi,setIsStayAwakeDuringTheSession:Ec,setMeetingJoinSuccessTimestamp:bc,resetFailoverRecord:Xa,setFailoverReason:iE}=fo({SET_MEETING_INFO:i=>i,SET_WINDOWN_OPEN:i=>i,SET_APPID_SIGNATURE:i=>i,SET_ZTK:i=>i,SET_ZSK:i=>i,SET_TK_MTKGUID:i=>i,SET_PING_RWC_TIMESTAMP:i=>i,SET_IN_MEETING_INFO:i=>i,SET_MEETING_ATTRIBUTE:i=>{if(t2.some(l=>i&&void 0!==i[l])){let l=i;return Object.keys(Ig).some(u=>void 0!==i[u])&&(l=Object.keys(i).reduce((u,p)=>{const _=Ig[p];return"function"==typeof _?Object.assign(u,_(i[p])):"string"==typeof _&&(u[_]=i[p]),u},{})),l}return{}},SET_IS_HOST:i=>i&&i.bHost,SET_IS_COHOST:i=>i&&i.bCoHost,RESET_MEETING:i=>i,SET_MEETING_IS_ON_HOLD:i=>i,SET_IS_MEETING_RESET:i=>i,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:i=>i,SET_CURRENT_USER_AUDIO_BEFORE_RESET:i=>i,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:i=>i,SET_MEETING_STATUS:i=>i,SET_MEETING_REGION:i=>i,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:i=>i,SET_JOIN_MEETING_TIME_STAMP:i=>i,SET_IS_ENABLE_QOS:i=>i,SET_ACTIVE_APP_INFO:i=>i,SET_MEETING_IDLE_START_TIME:i=>i,SET_SESSION_IDLE_TIMEOUT_MINUTES:i=>i,SET_IS_AUDIO_BRIDGE_ENABLED:i=>i,ADD_DISCARDED_RWC_HOST:i=>i,SET_SHARE_PRONOUN_TYPE:i=>i,SET_IS_STAY_AWAKE_DURING_THE_SESSION:i=>i,SET_MEETING_JOIN_SUCCESS_TIMESTAMP:i=>i,RESET_FAILOVER_RECORD:i=>i,SET_FAILOVER_REASON:i=>i});let wg,Wd,Zs;(function(i){i[i.None=0]="None",i[i.Hand=1]="Hand",i[i.Yes=2]="Yes",i[i.No=3]="No",i[i.Fast=4]="Fast",i[i.Slow=5]="Slow",i[i.Bad=6]="Bad",i[i.Good=7]="Good",i[i.Clap=8]="Clap",i[i.Coffee=9]="Coffee",i[i.Clock=10]="Clock",i[i.Emoji=11]="Emoji"})(wg||(wg={})),function(i){i.LoginSuccess="zoomLoginSuccess",i.LoginFail="zoomLoginFail",i.CaptchaSuccess="captchaSuccess",i.CaptchaFail="captchaFail",i.SSOLoginSuccess="ssoLoginSuccess",i.SSOLoginFail="ssoLoginFail",i.JoinSuccess="joinSuccess",i.RegisterSuccess="registerSuccess"}(Wd||(Wd={})),function(i){i.Failover="failover",i.OnHold="on hold",i.Promote="promote",i.Depromote="depromote",i.JoinBreakoutRoom="join breakout room",i.MoveToBreakoutRoom="move to breakout room",i.BackToMainSession="back to main session"}(Zs||(Zs={}));const oE="js_media.min.js",xS="1502_js_media.min.js";let om,u2,Is,ea,xo,wi;Y.ConnectionState=void 0,function(i){i.CDN="CDN",i.Global="Global",i.CN="CN"}(om||(om={})),function(i){i.Connected="Connected",i.Reconnecting="Reconnecting",i.Closed="Closed",i.Fail="Fail"}(Y.ConnectionState||(Y.ConnectionState={})),function(i){i.Loading="loading",i.Success="success",i.Fail="fail"}(u2||(u2={})),function(i){i.Initial="initial",i.Joined="joined",i.Closed="closed"}(Is||(Is={})),function(i){i.AudioBridgeEnable="1,2"}(ea||(ea={})),function(i){i[i.NormalCase=-1]="NormalCase",i[i.NoHeartbeat=0]="NoHeartbeat",i[i.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",i[i.NetworkChange=2]="NetworkChange",i[i.NotifyUiFailover=3]="NotifyUiFailover",i[i.InvalidParameters=4]="InvalidParameters",i[i.OnError=5]="OnError",i[i.OnErrorMChannel=6]="OnErrorMChannel",i[i.Disconnect=7]="Disconnect",i[i.DisconnectMChannel=8]="DisconnectMChannel",i[i.DisconnectXmpp=9]="DisconnectXmpp",i[i.RefreshPage=10]="RefreshPage"}(xo||(xo={})),function(i){i.LocalStorage="LocalStorage",i.SessionStorage="SessionStorage",i.Memory="Memory"}(wi||(wi={}));const sm=Xs("{}");class Dr{constructor(l){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=Xs(`zoom-storage-${l}`),this.localStorageKey=Xs("zoom-local-storage"),this.memoryCache={};try{this.sessionCache=JSON.parse(Fp(sessionStorage.getItem(this.sessionStorageKey)||sm)),this.localCache=JSON.parse(Fp(localStorage.getItem(this.localStorageKey)||sm))}catch(u){console.error(u),this.sessionCache={},this.localCache={}}}static init(l){this.instance=new Dr(l)}static get(l){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(l).value}static set(l,u,p){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(l,u,p)}static remove(l){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(l)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(l){return this.sessionCache.hasOwnProperty(l)?{value:this.sessionCache[l],type:wi.SessionStorage}:this.localCache.hasOwnProperty(l)?{value:this.localCache[l],type:wi.LocalStorage}:{value:this.memoryCache[l],type:wi.Memory}}setValue(l,u,p){if(!l)throw new Error("key is null");switch(p){case wi.SessionStorage:{const _=this.sessionCache[l];let y=u;return"function"==typeof u&&(y=u(_)),_!==y&&(this.sessionCache[l]=y,this.flushValue(wi.SessionStorage)),y}case wi.LocalStorage:{const _=this.localCache[l];let y=u;return"function"==typeof u&&(y=u(_)),_!==y&&(this.localCache[l]=y,this.flushValue(wi.LocalStorage)),y}case wi.Memory:{const _=this.memoryCache[l];let y=u;return"function"==typeof u&&(y=u(_)),this.memoryCache[l]=y,y}default:return null}}removeValue(l){const{type:u}=this.getValue(l);switch(u){case wi.SessionStorage:delete this.sessionCache[l],this.flushValue(wi.SessionStorage);break;case wi.LocalStorage:delete this.localCache[l],this.flushValue(wi.LocalStorage);break;case wi.Memory:delete this.memoryCache[l]}}flushValue(l){l===wi.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,Xs(JSON.stringify(this.sessionCache))):l===wi.LocalStorage&&localStorage.setItem(this.localStorageKey,Xs(JSON.stringify(this.localCache)))}}function uT(){const i=navigator.userAgent;let l,u=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(u[1])?(l=/\brv[ :]+(\d+)/g.exec(i)||[],`IE ${l[1]||""}`):"Chrome"===u[1]&&(l=i.match(/\b(OPR|Edge)\/(\d+)/),l&&l.length)?l.slice(1).join(" ").replace("OPR","Opera"):(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],(l=i.match(/version\/(\d+)/i))&&u.splice(1,1,l[1]),aE()&&(u[0]="ios-safari"),u.join(""))}function sE(){const i=navigator.userAgent.toLowerCase();return!/opera|opr\/[\d]+/.test(i)&&/(msie|trident)/.test(i)}Dr.instance=void 0;const l2=()=>{const{userAgent:i}=navigator;return!/opera|opr\/[\d]+/i.test(navigator.userAgent)&&!/edge\/(\d+)/i.test(navigator.userAgent)&&/chrome/i.test(i)&&/webkit/i.test(i)},aE=()=>{const{userAgent:i}=navigator;return/iPad|iPhone|iPod/i.test(i)||/MacIntel/i.test(navigator.platform)&&(null===(l=navigator)||void 0===l?void 0:l.maxTouchPoints)>2;var l},cE=()=>/arm/i.test(navigator.userAgent),LS=()=>/\bCrOS\b/.test(navigator.userAgent);function Tg(){return/android/i.test(navigator.userAgent)}function od(){return Tg()||aE()}function BS(){return"function"==typeof window.OffscreenCanvas}function Kd(){return"object"==typeof WebAssembly&&"function"==typeof Worker}const Fh=()=>"function"==typeof AudioWorklet,FS=()=>sE(),Vp=()=>{var i;return!od()&&BS()&&(null===(i=navigator)||void 0===i?void 0:i.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer};function zd(){return"function"==typeof window.MediaStreamTrackProcessor}const uE=i=>{var l;return Vp()?LS()&&cE()||LS()&&!cE()?navigator.hardwareConcurrency>=4?9:4:(null===(l=navigator)||void 0===l?void 0:l.hardwareConcurrency)<4?9:25:i&&zd()&&BS()?4:1};function pv(){return od()||!navigator.mediaDevices.getSupportedConstraints().aspectRatio||/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}let ga,Rg;(function(i){i.VIDEO_ENCODE="0",i.VIDEO_DECODE="1",i.AUDIO_ENCODE="2",i.AUDIO_DECODE="3",i.SHARING_ENCODE="4",i.SHARING_DECODE="5"})(ga||(ga={})),function(i){i[i.NONE=0]="NONE",i[i.AES_256=1]="AES_256",i[i.AES_GCM=2]="AES_GCM"}(Rg||(Rg={}));const ts=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"}});let Gi,Lo;(function(i){i.WebclientOpt="WEB_CLIENT_OPT",i.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",i.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",i.WebclientZtk="WEB_CLIENT_ZTK",i.WebclientZsk="WEB_CLIENT_ZSK",i.WebclientTk="WEB_CLIENT_TK",i.WebclientIVState="WEB_CLIENT_IV_STATE",i.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",i.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",i.WebclientZoomId="WEB_CLIENT_ZOOM_ID",i.WebclientUserName="WEB_CLIENT_USER_NAME",i.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",i.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",i.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",i.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",i.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",i.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",i.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT"})(Gi||(Gi={})),function(i){i.WebclientDeviceId="WEBCLIENT_DEVICE_ID",i.VSDKLogTrackingId="ZM_VSDK_LOG_TRACKING_IDS"}(Lo||(Lo={}));const Yd=(window.crypto||window.msCrypto).subtle,fv=Gi.WebclientIVState,lT=Object.keys(ts).map(i=>ts[i].sessionType);let ju=(()=>{class i{constructor(u,p,_){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(u,p,_),Dr.set(fv,{},wi.SessionStorage)}static init(u,p,_){this.instance?this.instance.resetParameters(u,p,_):this.instance=new i(u,p,_)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(u,p,_){this.isGCMEnabled=!(sE()||!Kd())&&_===Rg.AES_GCM,this.gcmSessionKey=Cs(p),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(u)}beginCrypto(u,p,_){const y=new Uint32Array(1);y[0]=9,y[0]+=Number(_);const C=new Uint8Array(y.buffer);let I=new Uint8Array(132);const O=Cs(p);return I.set(O,0),I.set(C,O.length),I=I.subarray(0,O.length+4),Yd.importKey("raw",u,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(D=>Yd.sign({name:"HMAC"},D,I)).then(D=>Yd.importKey("raw",D,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(u){const p=Dr.get(fv);return void 0===p[u]?(p[u]=0,Dr.set(fv,p,wi.SessionStorage)):Dr.set(fv,_=>$t($t({},_),{},{[u]:_[u]+1}),wi.SessionStorage)}resetIVState(){const u=Dr.get(fv);if(void 0!==u){const p=Object.keys(u).filter(_=>lT.indexOf(_)>-1);p.length>0&&(p.forEach(_=>{u[_]+=1e6}),Dr.set(fv,u,wi.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(u){let{text:p,type:_}=u;const y=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const I=this.instance.getNextIV(_.sessionType),O=new ArrayBuffer(16),D=new Uint8Array(O);new DataView(O).setUint32(0,I,!0);let B=null;return B="BO_BROADCAST"===_.sessionType||"XMPP_CHAT"===_.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(B,this.instance.zoomId,_.gcmType).then(P=>{const F=(new TextEncoder).encode(p);return Yd.encrypt({name:"AES-GCM",iv:D,additionalData:y,tagLength:128},P,F)}).then(P=>{const Z=new ArrayBuffer(1+D.byteLength+2+y.byteLength+4+P.byteLength);new Uint8Array(Z)[0]=D.length,new Uint8Array(Z,1,D.byteLength).set(D),new DataView(Z).setUint16(1+D.byteLength,y.length,!0),new Uint8Array(Z,3+D.byteLength).set(y),new DataView(Z).setUint32(1+D.byteLength+2+y.byteLength,P.byteLength-16,!0),new Uint8Array(Z,1+D.byteLength+2+y.byteLength+4).set(new Uint8Array(P));const ie=new Uint8Array(Z).reduce((oe,ve)=>oe+String.fromCharCode(ve),"");return window.btoa(ie).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(Xs(p))}static beginDecrypt(u){let{decryptedText:p,type:_,zoomId:y}=u;if(this.instance&&this.instance.isGCMEnabled){const C=function(Ae){let Te;const Be=Ae.length,Q=new Array(Be);for(Te=0;Te<Be;++Te)Q[Te]=255&Ae.charCodeAt(Te);return new Uint8Array(Q)}(atob(p.replace(/_/g,"/").replace(/-/g,"+"))),I=C[0],O=C.slice(1,I+1),D=C.slice(1+I,3+I),B=new DataView(D.buffer).getUint16(0,!0),P=C.slice(1+I+2,1+I+2+B),F=C.slice(1+I+2+B,1+I+2+B+4),Z=new DataView(F.buffer).getUint32(0,!0),ie=C.slice(1+I+2+B+4,1+I+2+B+4+Z),oe=C.slice(1+I+2+B+4+Z);let ve=null;return ve="BO_BROADCAST"===_.sessionType||"XMPP_CHAT"===_.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(ve,y,_.gcmType).then(Ae=>{const Te=function(Be,Q){Be=new Uint8Array(Be),Q=new Uint8Array(Q);const tt=new Uint8Array(Be.length+Q.length);return tt.set(Be),tt.set(Q,Be.length),tt}(ie,oe);return Yd.decrypt({name:"AES-GCM",iv:O,additionalData:P,tagLength:8*oe.length},Ae,Te.buffer)}).then(Ae=>({message:(new TextDecoder).decode(Ae),iv:O,aad:P})).catch(Ae=>({message:"[This is an encrypted message]",iv:O,aad:P}))}{const C=new TextDecoder("utf-8");return Promise.resolve({message:C.decode(Cs(p))})}}}return i.instance=void 0,i})();const US=20234,Do=7937,Sc=7938,jp=12039,lE=16138;let ko,Cc,Wr,mv,dE;(function(i){i[i.NoAttendee=0]="NoAttendee",i[i.All=1]="All",i[i.AllPanelist=2]="AllPanelist",i[i.Host=3]="Host",i[i.NoOne=4]="NoOne",i[i.EveryonePublicly=5]="EveryonePublicly"})(ko||(ko={})),function(i){i[i.AllPanelist=1]="AllPanelist",i[i.Everyone=2]="Everyone",i[i.Invalid=0]="Invalid"}(Cc||(Cc={})),function(i){i[i.All=0]="All",i[i.Panelist=1]="Panelist",i[i.IndividualCcPanelist=2]="IndividualCcPanelist",i[i.Individual=3]="Individual",i[i.SilentModeUsers=4]="SilentModeUsers"}(Wr||(Wr={})),function(i){i[i.None=0]="None",i[i.Delete=1]="Delete",i[i.Modify=2]="Modify"}(mv||(mv={})),function(i){i[i.Success=0]="Success",i[i.Delete=1]="Delete",i[i.Block=3]="Block"}(dE||(dE={}));const jS=[ko.All,ko.Host,ko.NoOne,ko.EveryonePublicly],hT=[ko.NoOne,ko.All,ko.AllPanelist],QS={AllPanelist:11,Everyone:12},d2={[QS.AllPanelist]:Cc.AllPanelist,[QS.Everyone]:Cc.Everyone},HS={userId:Wr.All,displayName:"Everyone",isHost:!1,isCoHost:!1},gv={userId:Wr.Panelist,displayName:"All panelists"},pT={userId:Wr.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let yl;!function(i){i.Open="open",i.Message="message",i.Error="error",i.Close="close"}(yl||(yl={}));class hE{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.heartBeatInterval=6e4,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(l,u){let p=this.eventHandlers.get(l);p||(p=[]),p.push(u),this.eventHandlers.set(l,p)}off(l,u){const p=this.eventHandlers.get(l);if(p){const _=p.filter(y=>y!==u);this.eventHandlers.set(l,_)}}emit(l,u){const p=this.eventHandlers.get(l);p&&p instanceof Array&&p.slice(0).forEach(_=>{try{_(u)}catch(y){console.error(y)}})}sendMessageToRwg(l){this.seq+=1;const u=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(l,{seq:u}))),u}connect(l){this.websocket=new WebSocket(l),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var l;null===(l=this.websocket)||void 0===l||l.close()}addHeartBeat(){const l=setInterval(()=>{this.sendMessageToRwg({evt:0})},this.heartBeatInterval);this.intervalsToBeCleardWhenSocketClose.push(l)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(l=>clearInterval(l))}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",l=>{this.addHeartBeat(),this.emit("open",l)}),this.websocket.addEventListener("message",l=>{this.emit("message",l)}),this.websocket.addEventListener("close",l=>{this.clearIntervals(),this.emit("close",l)}),this.websocket.addEventListener("error",l=>{this.emit("error",l)}))}joinMeeting(l){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:l}})}}lockMeeting(l){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:l}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(l,u){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:l,bPause:u}})}}allowSelfRecord(l){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:l}})}}enableZoomIQRecord(l){return{seq:this.sendMessageToRwg({evt:4318,body:{check:l}})}}expel(l){return{seq:this.sendMessageToRwg({evt:4107,body:{id:l}})}}expelAttendee(l){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:l}})}}rename(l,u,p){return{seq:this.sendMessageToRwg({evt:4109,body:{id:l,dn2:u,olddn2:p}})}}assignHost(l,u){return{seq:this.sendMessageToRwg({evt:4111,body:{id:l,bCoHost:u}})}}reclaimHost(l){return{seq:this.sendMessageToRwg({evt:4133,body:{id:l,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(l){return{seq:this.sendMessageToRwg({evt:4195,body:{id:l}})}}putOnHold(l,u){return{seq:this.sendMessageToRwg({evt:4113,body:{id:l,bHold:u}})}}setMuteOnEntry(l){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:l}})}}setHoldOnEntry(l){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:l}})}}inviteCRCDevice(l,u){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:l,type:u,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(l){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:l}})}}sendCloseCaption(l){return{seq:this.sendMessageToRwg({evt:4125,body:$t({},l)})}}allowViewParticipantNumber(l){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:l}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(l,u){return{seq:this.sendMessageToRwg({evt:4131,body:{id:l,bOn:u}})}}chat(l,u,p,_){const y={text:l,destNodeID:u};return p&&Object.assign(y,{sn:p}),_&&Object.assign(y,{attendeeNodeID:_}),{seq:this.sendMessageToRwg({evt:4135,body:y})}}assignCC(l,u){return{seq:this.sendMessageToRwg({evt:4137,body:{id:l,bCCEditor:u}})}}enableLT(l){return{seq:this.sendMessageToRwg({evt:4227,body:{op:l?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}enableManualCaption(l){return{seq:this.sendMessageToRwg({evt:4291,body:{op:l?1:0}})}}setTranslationLanguage(l){return l?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:l}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(l){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:l}})}}allowAskLT(l){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:l}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(l){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:l}})}}setChatPriviledge(l){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}setPanelistChatPrivilege(l){if(!Object.values(QS).includes(l))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}sendFeedback(l){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:l}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(l){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:l}})}}allowUnmuteAudio(l){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:l}})}}allowRaiseHand(l){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:l}})}}boToken(l){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:l}})}}startBO(l){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:l}})}}stopBO(l){return{seq:this.sendMessageToRwg({evt:4177,body:{status:l}})}}assignToBO(l,u){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:l,targetBID:u}})}}switchBO(l,u){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:l,targetBID:u}})}}wantJoinBO(l,u){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:l,targetBID:u}})}}joinBO(l){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:l}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(l){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:l}})}}askForHelpBO(l){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:l}})}}askForHelpResultBO(l,u){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:l,helpResult:u}})}}allowParticipantRename(l){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:l}})}}allowMessageFeedbackNotify(l,u){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:l,id:u}})}}setPlayChime(l,u){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:l,id:u}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(l,u,p){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:l,targetUserID:u,bBind:p}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(l,u,p,_){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:u,userID:p,clientCap:_,bPromote:l}})}}sendPromoteConsent(l,u){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:l,req_id:u}})}}batchCreateBOToken(l){const u=l.map((p,_)=>({topic:p,index:_}));return{seq:this.sendMessageToRwg({evt:4211,body:u})}}mute(l,u){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:u,id:l}})}}audioDrop(l){return{seq:this.sendMessageToRwg({evt:8195,body:{id:l}})}}audioDialout(l,u,p,_,y){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:l,dn2:Xs(u),bCallme:p,bPressOne:_,bGreeting:y}})}}audioCancelDialout(l,u){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:l,bCallme:u}})}}audioMuteAll(l){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:l}})}}allowToTalk(l,u){return{seq:this.sendMessageToRwg({evt:8204,body:{id:l,bAllowTalk:u}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(l,u){return{seq:this.sendMessageToRwg({evt:12297,body:{id:l,bOn:u}})}}notifyRwgIsMuteVideo(l,u){return this.muteAttendeeVideo(l,u)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(l,u){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:l,bOn:u}})}}allowViewAll(l,u){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:l,bOn:u}})}}allowVote(l,u){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:l,bOn:u}})}}allowComment(l,u){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:l,bOn:u}})}}sharingRequestRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16389,body:{id:l,bOn:u}})}}subscribeGrabRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16393,body:{id:l,bOn:u}})}}subscribeSharing(l,u,p,_){const y={id:l,size:u};return p&&Object.assign(y,{bShareToBO:!0}),void 0!==_&&Object.assign(y,{bVideoShare:_}),{seq:this.sendMessageToRwg({evt:16415,body:y})}}unsubscribeSharing(l,u){const p={id:l};return u&&Object.assign(p,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:p})}}sendRWGConnectionPerformance(l){return{seq:this.sendMessageToRwg({evt:4167,body:{data:l}})}}sendSdkKeyToMonitor(l,u,p){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${p},2,${u},${l}`}})}}sendDatachannelOffer(l){return{seq:this.sendMessageToRwg({evt:24321,offer:l})}}joinOrLeaveVoip(l){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:l}})}}startSharing(l,u){return{seq:this.sendMessageToRwg({evt:16409,body:$t({id:l,boOn:!1},u??{})})}}stopSharing(l){return{seq:this.sendMessageToRwg({evt:16409,body:{id:l,bOn:!0}})}}lockSharing(l){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:l}})}}startShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!0}})}}stopShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(l){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:l}})}}allowMultiplePin(l,u){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:l,bOn:u}})}}spotlightVideo(l,u){return{seq:this.sendMessageToRwg({evt:4219,body:$t({id:l},u)})}}connectCamera(l,u){return{seq:this.sendMessageToRwg({evt:12307,body:{id:l,bOn:u}})}}followHostLayout(l){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:l}})}}setVideoDragLayout(l){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:l}})}}chatCmdReq(l,u){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:l,cmd:u}})}}activeAppLinkReq(l){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:l}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(l){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!l}})}}localMuteAudio(l,u){return{seq:this.sendMessageToRwg({evt:8209,body:{id:l,bMute:u}})}}changeSharePronoun(l,u){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:l,strPronoun:u}})}}sendReceivingSharingReady(l){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:l}})}}sendManualCaption(l){return{seq:this.sendMessageToRwg({evt:4289,body:$t({},l)})}}sendPollingAction(l,u,p){return{seq:this.sendMessageToRwg({evt:4224,body:$t({action:l,PollingId:u},p)})}}broadcastUserNetworkQuality(l){return{seq:this.sendMessageToRwg({evt:4331,body:{type:l.isUplink,level:l.level,bwLevel:l.bwLevel}})}}sendFarEndCameraControl(l,u,p){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:l,userID:u,buttonID:p}})}}sendCameraAblity(l){return{seq:this.sendMessageToRwg({evt:4330,body:$t($t({},l),{},{focus:!1})})}}}let mo=(()=>{class i extends hE{static createAgent(){return this.rwgInstance||(this.rwgInstance=new i),this.rwgInstance}}return i.rwgInstance=null,i})(),h2=(()=>{class i extends hE{static getInstance(){return this.instance||(this.instance=new i),this.instance}}return i.instance=null,i})();const pE=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}],p2=["dimension"],GS=["isFromMainSession"];let Qs;!function(i){i.VideoEncode="0",i.VideoDecode="1",i.AudioEncode="2",i.AudioDecode="3",i.SharingEncode="4",i.SharingDecode="5"}(Qs||(Qs={}));const El=Gi.WebclientIVState;let Mi=(()=>{class i{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new i),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.callbackList=[]}init(){if(!this.instance){const u={ivObj:{[ga.AUDIO_ENCODE]:Dr.get(El)&&Dr.get(El)[ga.AUDIO_ENCODE],[ga.VIDEO_ENCODE]:Dr.get(El)&&Dr.get(El)[ga.VIDEO_ENCODE],[ga.SHARING_ENCODE]:Dr.get(El)&&Dr.get(El)[ga.SHARING_ENCODE]}};this.instance=new JsMediaSDK_Instance(u),this.instance.setRWGAgent(mo.createAgent())}}setAssetsAndConstraint(u,p,_,y){var C,I,O;this.assetsPath=u,this.constraints=p,this.mediaWorkersPath=(I=this.assetsPath,O=!!_,pE.reduce((D,B)=>{const{name:P,alias:F}=B;return Object.assign(D,{[`${F}`]:`${I}/${O?"1502_":""}${P}`}),D},{})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=y,null===(C=this.instance)||void 0===C||C.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,y)}onMediaSDKCallback(u,p){this.callbackList.length>0&&this.callbackList.forEach(_=>_(u,p))}registerCallback(u){this.callbackList.push(u)}unregisterCallback(u){this.callbackList=this.callbackList.filter(p=>p!==u)}static isSupportVideoEncodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){return"function"==typeof window.OffscreenCanvas&&0==JsMediaSDK_Instance.util.AdapterWhiteListCheckForEncoder()}static getPTZCapability(){var u,p,_,y,C,I;return{pan:!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(p=u.isSupportCameraPan)||void 0===p||!p.call(u)),tilt:!(null===(_=JsMediaSDK_Instance.util)||void 0===_||null===(y=_.isSupportCameraTilt)||void 0===y||!y.call(_)),zoom:!(null===(C=JsMediaSDK_Instance.util)||void 0===C||null===(I=C.isSupportCameraZoom)||void 0===I||!I.call(C))}}static isSupportVideoShare(){var u,p;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(p=u.isSupportVideoShare)||void 0===p||!p.call(u))}connect(u){var p,_,y,C,I,O;let{svcUrl:D,meetingNumber:B,conId:P,e2eEncrypt:F,isViewOnly:Z,currentUserId:ie,isWebinar:oe,enableAudioQos:ve,enableVideoQos:Ae=!1}=u;this.svcUrl=D,this.meetingNumber=B,this.confId=P;const Te={videoSocketAddress:`wss://${_n=D}/wc/media/${Gn=B}?type=v&cid=${Dt=P}`,audioSocketAddress:`wss://${_n}/wc/media/${Gn}?type=a&cid=${Dt}`,sharingSocketAddress:`wss://${_n}/wc/media/${Gn}?type=${FS()?"j":"s"}&cid=${Dt}`};var _n,Gn,Dt;this.mediaSocketAddress=Te,this.currentUserId=ie;const Be=uE(null===(p=this.mediaOptions)||void 0===p?void 0:p.enableMultiDecodeVideoWithoutSAB);var Q,tt,dt,it,ft,Kt,en,zt,Ot;null===(_=this.instance)||void 0===_||_.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkletPath:Kd()?null===(y=this.mediaWorkersPath)||void 0===y?void 0:y.audioWorkletPath:void 0,e2eEncrypt:F,isEnableListenInitEvent:!0}),!0===(null===(C=this.constraints)||void 0===C?void 0:C.audio)&&Kd()&&!od()&&((oe||Fh())&&(null===(Q=this.instance)||void 0===Q||Q.initAudioDecode(this.mediaWorkersPath,Te.audioSocketAddress,ie,xh,P,B,Be,ve)),!Fh()||oe&&Z||null===(tt=this.instance)||void 0===tt||tt.initAudioEncode(this.mediaWorkersPath,Te.audioSocketAddress,ie,xh,P,B,Be,ve)),!0===(null===(I=this.constraints)||void 0===I?void 0:I.video)&&Kd()&&(null===(dt=this.instance)||void 0===dt||dt.initVideoDecode(this.mediaWorkersPath,Te.videoSocketAddress,ie,xh,P,B,Be,null===(it=null===(ft=JsMediaSDK_Instance.util)||void 0===ft?void 0:ft.isGraphicShouldUseHardwareAccelerationDecode())||void 0===it||it,Ae),oe&&Z||null===(Kt=this.instance)||void 0===Kt||Kt.initVideoEncode(this.mediaWorkersPath,Te.videoSocketAddress,ie,xh,P,B,Be,!1,Ae,!0,!0)),!0===(null===(O=this.constraints)||void 0===O?void 0:O.screen)&&(Kd()?(null===(en=this.instance)||void 0===en||en.initSharingDecode(this.mediaWorkersPath,Te.sharingSocketAddress,ie,xh,P,B,Be),oe&&Z||null===(zt=this.instance)||void 0===zt||zt.initSharingEncode(this.mediaWorkersPath,Te.sharingSocketAddress,ie,xh,P,B,Be)):null===(Ot=this.instance)||void 0===Ot||Ot.initSharingDecode(Te.sharingSocketAddress))}destroy(){var u;null===(u=this.instance)||void 0===u||u.destroy(),this.instance=null,this.callbackList=[],[Qs.AudioDecode,Qs.AudioEncode,Qs.VideoDecode,Qs.VideoEncode].forEach(p=>{var _;null===(_=this.instance)||void 0===_||_.updateQosSubscription(!1,p)})}disconnect(){var u,p;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(17,{}),null===(p=this.instance)||void 0===p||p.JsMediaSDK_UnInit()}muteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(u,p,_,y,C){var I;return null===(I=this.instance)||void 0===I?void 0:I.Notify_MeidaSDK(22,$t({CaptureAudio:y,CaptureAudioInfo:{ssrc:u,AudioSelectValue:"default"===p?null:p},speakerInfo:{defaultDeviceId:_}},C?{useAudioBridge:!0,audioBridge:C}:{}))}leaveComputerAudio(){var u;return null===(u=this.instance)||void 0===u?void 0:u.Notify_MeidaSDK(21,null)}joinSharingAudio(u){var p;let{ssrc:_,microphoneDeviceId:y,speakerDeviceId:C,isCaptureAudio:I}=u;return null===(p=this.instance)||void 0===p?void 0:p.Notify_MeidaSDK(72,{CaptureAudio:I,CaptureAudioInfo:{ssrc:_,AudioSelectValue:"default"===y?null:y},speakerInfo:{defaultDeviceId:C},checkAutoplay:!1})}leaveSharingAudio(u){var p;return null===(p=this.instance)||void 0===p?void 0:p.Notify_MeidaSDK(73,{isPause:u?1:0})}changeSpeaker(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:u})}changeMicrophone(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===u?null:u})}restoreWebRTC(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===u?null:u})}renderVideo(u,p,_,y,C,I,O,D,B,P,F){var Z;null===(Z=this.instance)||void 0===Z||Z.Notify_MeidaSDK(1,{userId:p,width:y,height:C,x:I,y:O,quality:D,isMyself:B,canvas:u,enableWaterMark:F,waterMarkText:P,zone:_})}stopRenderVideo(u,p,_,y){var C;null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(2,{canvas:u,userId:p,RGBA:y,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:_})}startCaptureVideo(u,p,_,y,C,I){var O;let D=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const B=arguments.length>7&&arguments[7]?i.getPTZCapability():void 0;null===(O=this.instance)||void 0===O||O.Notify_MeidaSDK(3,$t({ssid:u,width:_,height:y,fps:24,video:C,usingFacingMode:I,VideoSelectValue:"default"===p?null:p,disableOriginalRatio:D},B))}stopCaptureVideo(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(12,{VideoSelectValue:"default"===u?null:u})}switchCanvasForVideoCapture(u){var p;let _=u;Array.isArray(u)||(_=[u]),null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(25,_)}renderSharing(u,p){var _;let y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",I=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=p,null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(23,{width:0,height:0,ssrc:u,canvas:p,enableWaterMark:y,waterMarkText:C,isFromMainSession:I})}stopRenderSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(24,{})}switchSharingSource(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(36,{ssrc:u,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(u,p){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=u,this.receivedSharingCanvas.height=p}catch{}}startRemoteControl(u,p,_){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(26,$t({socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:p,dom:u},_))}stopRemoteControl(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(41)}updateRemoteControlProperties(u){var p;const{dimension:_}=u,y=Or(u,p2);null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(27,$t($t({},_),y))}startDesktopSharing(u,p,_,y){var C;let I=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],O=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.sharingCanvas=document.querySelector(`#${p}`);let D={};y&&(D={share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===y.cameraId?null:y.cameraId,width:y.width,height:y.height}}),null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(30,$t($t({mode:O,ssid:u,canvas:p,video:_},D),{},{showShareAudioOption:I}))}stopDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(57,{lang:u})}changeSharingSecondCamera(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(49,{VideoSelectValue:u})}ajustmentSharingCanvas(u,p){if(this.sharingCanvas)try{this.sharingCanvas.width=u,this.sharingCanvas.height=p}catch{}}checkChromeSharingExtension(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(34,{})}enableAudioEncode(){var u,p;null===(u=this.instance)||void 0===u||u.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,xh,this.confId,this.meetingNumber,uE(null===(p=this.mediaOptions)||void 0===p?void 0:p.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(u,p){var _;null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(43,{userList:u,encryptKey:p})}updateRenderedSharingDimension(u,p){var _;null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(44,{width:u,height:p})}pauseOrResumeAudio(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(45,{bPause:u})}updateRenderedVideoCanvasDimension(u,p,_){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(46,{canvas:u,width:p,height:_})}clearVideoCanvas(u,p){var _;null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(47,{id:u,RGBA:p})}adjustRenderedVideoPosition(u,p,_,y,C,I,O,D){var B;null===(B=this.instance)||void 0===B||B.Notify_MeidaSDK(48,{userId:p,x:y,y:C,width:I,height:O,canvas:u,zone:_,RGBA:D})}mirrorVideo(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(75,{isMirrorMyVideo:u})}updateUserMediaSN(u){var p,_,y;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(80,{isFromMainSession:Number(u.isFromMainSession),mediaActionType:u.iVType,body:{add:null!==(_=u.added)&&void 0!==_?_:[],remove:null!==(y=u.removed)&&void 0!==y?y:[]}})}updateMediaParams(u){var p;const{iVType:_,isFromMainSession:y,updateParams:C}=u;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(81,{mediaActionType:_,isFromMainSession:Number(y),updateParams:C})}createMainSessionChannel(u,p){var _,y;"sharing"===u?null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(84,p):null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(85,p)}addReceivedSharingChannelType(u){var p;const{isFromMainSession:_}=u,y=Or(u,GS);null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(82,$t({isFromMainSession:Number(_)},y))}removeReceivedSharingChannelType(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(83,{isFromMainSession:Number(u.isFromMainSession),ssrc:u.ssrc})}enableHardwareAccelerationForVideoDecode(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(70,{enable:u})}enableHardwareAccelerationForVideoEncode(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(71,{enable:u})}setSharingAudioVolume(u,p,_){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(74,{userid:u>>10,shareVolume:p?0:100,isFromMainSession:_})}subscribeToQos(u,p){u.forEach(_=>{var y;null===(y=this.instance)||void 0===y||y.updateQosSubscription(!0,_,p)})}unsubscribeFromQos(u){u.forEach(p=>{var _;null===(_=this.instance)||void 0===_||_.updateQosSubscription(!1,p)})}passThroughRWGMessage(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(40,u)}startVirtualBackgroundSetting(u,p,_,y,C,I){var O;null===(O=this.instance)||void 0===O||O.Notify_MeidaSDK(91,{canvas:u,bgdom:p,width:C,height:I,ssid:_,VideoSelectValue:"default"===y?null:y,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(92,{bgdom:u})}stopVirtualBackgroundSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(99,{enable:u})}enableShareAudioToBreakoutRoom(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(86,{enable:u})}sendUserAudioStatus(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(51,u)}muteOrUnmuteOtherAudio(u,p){var _;null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(50,{userId:u,volume:p?0:100})}adjustOtherAudioVolume(u,p){var _;null===(_=this.instance)||void 0===_||_.Notify_MeidaSDK(50,{userId:u,volume:p})}notifySDKMeetingReady(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(113)}movePTZCamera(u){var p;return null===(p=JsMediaSDK_Instance.util)||void 0===p?void 0:p.queryPTZPermisson().then(_=>{var y;return _?(null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(53,u),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")})}switchSharingMode(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(101,{mode:u})}}return i.agentInstance=void 0,i})();const am="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",Bc="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",fT="ADD_USER_PARTICIPANT_ATTRIBUTE",ka="UPDATE_USER_PARTICIPANT_ATTRIBUTE",Og="REMOVE_USER_PARTICIPANT_ATTRIBUTE",Ic="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",cm="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",um="JOIN_MEETING_SUCCESS",Hs="JOIN_MEETING_FAILED",Za="RECONNECTING_MEETING",lm="LEAVING_MEETING",mE="MEETING_IN_WAITING_ROOM",gE="UPDATE_MEETING_ATTRIBUTE",mT="SHARE_PRONOUN_TYPE_UPDATE";var bl;!function(i){i.ConnectionChange="connection-change",i.OnHoldChange="on-hold-change",i.UserAdd="user-added",i.UserUpdate="user-updated",i.UserRemove="user-removed",i.AttendeeUpdate="attendee-updated",i.MeetingAttributeUpdate="meeting-attribute-updated",i.PromoteAttendeeConsent="promote-attendee-consent",i.ActiveAppsUpdate="active-apps-updated",i.SharePronounTypeUpdate="share-pronoun-type-update"}(bl||(bl={}));const ML={JoinMeeting:{success:am,fail:[Hs]}},Uh={[bl.ConnectionChange]:[{event:um,payload:()=>({state:Y.ConnectionState.Connected})},{event:Hs,payload:i=>$t({state:Y.ConnectionState.Fail},i)},{event:Za,payload:i=>$t({state:Y.ConnectionState.Reconnecting},i)},{event:lm,payload:i=>$t({state:Y.ConnectionState.Closed},i)}],[bl.OnHoldChange]:[{event:mE,payload:i=>({isOnHold:i})}],[bl.UserAdd]:[{event:am,payload:i=>[i]},{event:fT,payload:i=>i}],[bl.UserUpdate]:[{event:Bc,payload:i=>[i]},{event:ka,payload:i=>i}],[bl.UserRemove]:[{event:Og,payload:i=>i}],[bl.AttendeeUpdate]:[{event:Ic,payload:i=>i},{event:cm,payload:i=>i}],[bl.MeetingAttributeUpdate]:[{event:gE,payload:()=>{}}],[bl.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:i=>{let{req_id:l,sender_id:u}=i;return{reqId:l,senderId:u}}}],[bl.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[bl.SharePronounTypeUpdate]:[{event:mT,payload:i=>i}]},qd="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",Vh="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",_E="LIVE_TRANSCRIPTION_STATUS_CHANGE",f2={"caption-message":[{event:qd,payload:i=>i}],"caption-status":[{event:Vh,payload:i=>i}],"caption-enable":[{event:_E,payload:i=>i}]},jh="CHAT_RECEIVE_MESSAGE_EVENTS",_v="CHAT_PRIVILEGE_CHANGE",Gs="CHAT_MESSAGE_RESPONSE",Dg="CHAT_DELETE_MESSAGE_REPONSE";let vv;!function(i){i.ChatOnMessage="chat-on-message",i.ChatPrivilegeChange="chat-privilege-change",i.ChatDeleteMessage="chat-delete-message"}(vv||(vv={}));const gT={[vv.ChatOnMessage]:[{event:jh,payload:i=>i}],[vv.ChatPrivilegeChange]:[{event:_v,payload:i=>i}],[vv.ChatDeleteMessage]:[{event:Dg,payload:i=>i}]},Qp="COMMAND_RECEIVE_MESSAGE_EVENTS",Hp="COMMAND_STATUS_EVENTS";let Qh;!function(i){i.CommandChannelStatus="command-channel-status",i.CommandChannelMessage="command-channel-message"}(Qh||(Qh={}));const Av={[Qh.CommandChannelStatus]:[{event:Hp,payload:i=>i}],[Qh.CommandChannelMessage]:[{event:Qp,payload:i=>i}]};let ss;Y.RecordingStatus=void 0,function(i){i.Recording="Recording",i.Paused="Paused",i.Stopped="Stopped",i.Ask="Ask",i.Accept="Accept",i.Decline="Decline"}(Y.RecordingStatus||(Y.RecordingStatus={})),function(i){i[i.None=0]="None",i[i.Init=1]="Init",i[i.Start=2]="Start",i[i.Pause=3]="Pause",i[i.Stop=4]="Stop"}(ss||(ss={}));const dm="CLOUD_RECORDING_STATUS_CHANGE",Gp="CLOUD_RECORDING_ISO_STATUS_CHANGE",xL="LOCAL_RECORDING_CHANGE",m2="RECORDING_FOR_IQ_STATUS_CHANGE",Hn="RECORDING_FOR_IQ_OPERATION_CHANGE";let yv;!function(i){i.RecordingChange="recording-change",i.IndividualRecordingChange="individual-recording-change",i.LocalRecordingChange="local-recording-change",i.RecordingIqChange="recording-iq-change"}(yv||(yv={}));const KV={[yv.RecordingChange]:[{event:dm,payload:i=>{const{cmrServerStatus:l}=i;return l===ss.Start?Y.RecordingStatus.Recording:l===ss.Pause?Y.RecordingStatus.Paused:Y.RecordingStatus.Stopped}}],[yv.IndividualRecordingChange]:[{event:Gp,payload:i=>i}],[yv.LocalRecordingChange]:[{event:xL,payload:i=>i}],[yv.RecordingIqChange]:[{event:m2,payload:i=>i}]};let er,Yo,vE;Y.MutedSource=void 0,Y.AudioChangeAction=void 0,Y.DialoutState=void 0,function(i){i[i.InitSuccess=1]="InitSuccess",i[i.InitSuccessVideo=1.1]="InitSuccessVideo",i[i.InitSuccessAudio=1.2]="InitSuccessAudio",i[i.InitSuccessSharing=1.3]="InitSuccessSharing",i[i.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",i[i.CurrentVideoResolution=3]="CurrentVideoResolution",i[i.JpegDecThreadOk=4]="JpegDecThreadOk",i[i.JpegData=5]="JpegData",i[i.SharingPara=6]="SharingPara",i[i.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",i[i.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",i[i.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",i[i.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",i[i.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",i[i.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",i[i.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",i[i.MonitorLog=14]="MonitorLog",i[i.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",i[i.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",i[i.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",i[i.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",i[i.DataChannelOffer=19]="DataChannelOffer",i[i.AesGcmIvResponse=21]="AesGcmIvResponse",i[i.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",i[i.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",i[i.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",i[i.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",i[i.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",i[i.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",i[i.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",i[i.VbModelPreloading_3S=96]="VbModelPreloading_3S",i[i.VbModelPreloading_10S=97]="VbModelPreloading_10S",i[i.VbModelPreloadingOk=98]="VbModelPreloadingOk",i[i.InitFailed=-1]="InitFailed",i[i.InitFailedVideo=-1.1]="InitFailedVideo",i[i.InitFailedAudio=-1.2]="InitFailedAudio",i[i.InitFailedSharing=-1.3]="InitFailedSharing",i[i.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",i[i.AudioWebsocketBroken=-3]="AudioWebsocketBroken",i[i.VideoWebsocketBroken=-4]="VideoWebsocketBroken",i[i.SharingDecThreadFailed=-5]="SharingDecThreadFailed",i[i.AudioZeroData=-6]="AudioZeroData",i[i.AudioCtxSamplerate=-7]="AudioCtxSamplerate",i[i.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",i[i.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",i[i.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",i[i.StartRemoteControlFailed=-11]="StartRemoteControlFailed",i[i.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",i[i.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",i[i.UserStopDesktopSharing=-15]="UserStopDesktopSharing",i[i.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",i[i.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",i[i.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",i[i.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",i[i.DesktopSharingError=-20]="DesktopSharingError",i[i.AudioSpeakerSetError=-21]="AudioSpeakerSetError",i[i.DesktopSharingSystemError=-22]="DesktopSharingSystemError",i[i.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",i.AudioQosData="AUDIO_QOS_DATA",i.VideoQosData="VIDEO_QOS_DATA",i.ShareQosData="VIDEOSHARE_QOS_DATA",i.NetworkQualityChange="NETWORK_QUALITY_CHANGE",i[i.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",i[i.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",i[i.VbSettingParaError=-34]="VbSettingParaError",i[i.NotifyUIFailover=-35]="NotifyUIFailover"}(er||(er={})),function(i){i[i.EncodeSuccess=1]="EncodeSuccess",i[i.DecodeSuccess=2]="DecodeSuccess",i[i.EncodeFailed=-1]="EncodeFailed",i[i.DecodeFailed=-2]="DecodeFailed"}(Yo||(Yo={})),function(i){i.Spotlight="Spotlight",i.Unmute="Unmute",i.AllowToTalk="Allow to talk"}(vE||(vE={})),function(i){i.Active="active",i.PassiveByMuteOne="passive(mute one)",i.PassiveByMuteAll="passive(mute all)",i.SharingAudio="sharing audio"}(Y.MutedSource||(Y.MutedSource={})),function(i){i.Join="join",i.Leave="leave",i.Muted="muted",i.Unmuted="unmuted"}(Y.AudioChangeAction||(Y.AudioChangeAction={})),function(i){i[i.Calling=1]="Calling",i[i.Ringing=2]="Ringing",i[i.Accepted=3]="Accepted",i[i.Busy=4]="Busy",i[i.NotAvailable=5]="NotAvailable",i[i.HangUp=6]="HangUp",i[i.Fail=7]="Fail",i[i.Success=8]="Success",i[i.Timeout=9]="Timeout",i[i.Canceling=10]="Canceling",i[i.Canceled=11]="Canceled",i[i.CancelFailed=12]="CancelFailed"}(Y.DialoutState||(Y.DialoutState={}));const LL=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),BL=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),AE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let Qu,hm,Bo,WS,Fc,KS,zS;Y.ShareStatus=void 0,Y.VideoQuality=void 0,Y.VideoActiveState=void 0,Y.VideoCapturingState=void 0,Y.PassiveStopShareReason=void 0,function(i){i[i.HostGrab=0]="HostGrab",i[i.OnlyHost=1]="OnlyHost",i[i.AnyoneGrab=2]="AnyoneGrab",i[i.MultipleShare=3]="MultipleShare"}(Qu||(Qu={})),function(i){i.Sharing="sharing",i.Paused="paused",i.End="ended"}(Y.ShareStatus||(Y.ShareStatus={})),function(i){i[i.Video_90P=0]="Video_90P",i[i.Video_180P=1]="Video_180P",i[i.Video_360P=2]="Video_360P",i[i.Video_720P=3]="Video_720P"}(Y.VideoQuality||(Y.VideoQuality={})),function(i){i.Active="Active",i.Inactive="Inactive"}(Y.VideoActiveState||(Y.VideoActiveState={})),function(i){i.Muted="Muted",i.Unmuted="Unmuted"}(hm||(hm={})),function(i){i.Active="Active",i.Inactive="Inactive"}(Bo||(Bo={})),function(i){i.Success="Success",i.Failed="Failed",i.Initial="Initial"}(WS||(WS={})),function(i){i.Started="Started",i.Stopped="Stopped",i.Failed="Failed"}(Y.VideoCapturingState||(Y.VideoCapturingState={})),function(i){i.Approved="Approved",i.Rejected="Rejected"}(Fc||(Fc={})),function(i){i.PrivilegeChange="PrivilegeChange",i.StopScreenCapture="StopScreenCapture",i.ShareFromMainSession="ShareFromMainSession"}(Y.PassiveStopShareReason||(Y.PassiveStopShareReason={})),function(i){i.Muted="Muted",i.Unmuted="Unmuted",i.NoAudio="NoAudio",i.Phone="Phone"}(KS||(KS={})),function(i){i[i.ImageNotMatch=2]="ImageNotMatch",i[i.CanvasNotMatch=3]="CanvasNotMatch",i[i.VBModelNotMatch=4]="VBModelNotMatch"}(zS||(zS={}));const su="blur";let Wp;Y.MobileVideoFacingMode=void 0,function(i){i[i.NotConnect=0]="NotConnect",i[i.Connecting=1]="Connecting",i[i.ConnectSuccess=2]="ConnectSuccess",i[i.ConnectFail=3]="ConnectFail"}(Wp||(Wp={})),function(i){i.User="user",i.Environment="environment",i.Left="left",i.Right="right"}(Y.MobileVideoFacingMode||(Y.MobileVideoFacingMode={}));const kg=1e3,Ev="__ZOOM_SDK_SHARING_VIDEO__",Kp="__ZOOM_SDK_VIDEO_ZONE__",zp={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},pm={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let ec,Yp,fm,bv;Y.CameraControlCmd=void 0,Y.FarEndCameraControlDeclinedReason=void 0,function(i){i[i.Request=11]="Request",i[i.Decline=12]="Decline",i[i.Approve=13]="Approve",i[i.GiveUp=14]="GiveUp",i[i.StartControl=15]="StartControl",i[i.ContinueControl=16]="ContinueControl",i[i.StopControl=17]="StopControl",i[i.SwitchCamera=20]="SwitchCamera"}(ec||(ec={})),function(i){i[i.Bk=0]="Bk",i[i.Center=1]="Center",i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera"}(Yp||(Yp={})),function(i){i[i.Pan=192]="Pan",i[i.Tilt=48]="Tilt",i[i.Zoom=12]="Zoom",i[i.Focus=3]="Focus"}(fm||(fm={})),function(i){i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera"}(Y.CameraControlCmd||(Y.CameraControlCmd={})),function(i){i[i.None=0]="None",i[i.ApproveAnother=3]="ApproveAnother",i[i.Stop=5]="Stop"}(Y.FarEndCameraControlDeclinedReason||(Y.FarEndCameraControlDeclinedReason={})),function(i){i[i.Null=0]="Null",i[i.Normal=1]="Normal",i[i.VideoMode=2]="VideoMode"}(bv||(bv={}));const au="AUDIO_ENCODE_SUCCESS",yE="AUDIO_DECODE_SUCCESS",qp="VIDEO_ENCODE_SUCCESS",FL="VIDEO_DECODE_SUCCESS",_T="SHARING_ENCODE_SUCCESS",YS="SHARING_DECODE_SUCCESS",EE="AUDIO_ENCODE_FAIL",g2="AUDIO_DECODE_FAIL",bE="VIDEO_ENCODE_FAIL",vT="VIDEO_DECODE_FAIL",_2="SHARING_ENCODE_FAIL",Pg="SHARING_DECODE_FAIL",Sv="MEDIA_DEVICE_CHANGE";let Cv;!function(i){i.DeviceChange="device-change",i.MediaSDKChange="media-sdk-change"}(Cv||(Cv={}));const Uc={[Cv.DeviceChange]:[{event:Sv,payload:()=>({})}],[Cv.MediaSDKChange]:[{event:au,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:EE,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:yE,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:g2,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:qp,payload:()=>({type:"video",action:"encode",result:"success"})},{event:bE,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:FL,payload:()=>({type:"video",action:"decode",result:"success"})},{event:vT,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:_T,payload:()=>({type:"share",action:"encode",result:"success"})},{event:_2,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:YS,payload:()=>({type:"share",action:"decode",result:"success"})},{event:Pg,payload:()=>({type:"share",action:"decode",result:"fail"})}]},qS="RECEIVE_VIDEO_ACTIVE_INDICATION",Iv="RECEIVE_VIDEO_MUTE_INDICATION",v2="ASK_FOR_START_VIDEO_CONSENT",Jp="RECEIVE_VIDEO_DIMENSION_CHANGE",cu="CAN_NOT_DETECT_CAMERA",$p="CAN_NOT_FIND_CAMERA",JS="VIDEO_USER_FORBIDDEN_CAPTURE",$S="VIDEO_CAMERA_IS_TAKEN",SE="VIDEO_VITRUAL_BACKGROUND_FAILED",Sl="VIDEO_ESTABLISH_STREAM_ERROR",wv="VIDEO_RENDER_START_SUCCESS",AT="VIDEO_CAPTURE_START_SUCCESS",Ng="VIDEO_CAPTURE_STOP_RESULT",CE="VIDEO_SPOTLIGHT_CHANGE",yT="VIDEO_FOLLOW_HOST_ORDER_CHANGE",IE="VIDEO_HOST_DRAG_LAYOUT_CHANGE",A2="VIDEO_NEW_USER_START",wE="VIDEO_OLD_USER_STOP",TE="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",Xp="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",RE="VIDEO_STATISTIC_DATA",ET="VIDEO_CELL_DETAILED_DATA",OE="VIDEO_NETWORK_QUALITY_CHANGE",UL="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",Zp="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",mm="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",XS="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",VL={startCaptureVideo:{success:AT,fail:[cu,$p,JS,Sl,$S,SE]},stopCaptureVideo:{success:Ng},startRenderVideo:{success:wv,fail:[bE,vT,Sl]}};let ta;!function(i){i.VideoActiveChange="video-active-change",i.PeerVideoStateChange="peer-video-state-change",i.VideoSpotlightChange="video-spotlight-change",i.VideoMutedChange="video-muted-change",i.VideoCapturingChange="video-capturing-change",i.AskForStartVideoConsent="ask-for-start-video-consent",i.VideoDimensionChange="video-dimension-change",i.VideoFollowHostOrder="video-follow-host-order-change",i.VideoHostLayoutChange="video-host-layout-change",i.VideoVBPreloadChange="video-virtual-background-preload-change",i.VideoStatisticDataChange="video-statistic-data-change",i.VideoDetailedDataChange="video-detailed-data-change",i.NetworkQualityChange="network-quality-change",i.FarEndCameraRequestControl="far-end-camera-request-control",i.FarEndCameraResponseControl="far-end-camera-response-control",i.FarEndCameraInControlChange="far-end-camera-in-control-change",i.FarEndCameraCapabilityChange="far-end-camera-capability-change"}(ta||(ta={}));const zV={[ta.VideoActiveChange]:[{event:qS,payload:i=>({state:i.bVideoOn?Y.VideoActiveState.Active:Y.VideoActiveState.Inactive,userId:i.userId})}],[ta.VideoCapturingChange]:[{event:AT,payload:()=>({state:Y.VideoCapturingState.Started})},{event:Ng,payload:i=>({state:null!=i&&i.failed?Y.VideoCapturingState.Failed:Y.VideoCapturingState.Stopped})}],[ta.VideoMutedChange]:[{event:Iv,payload:i=>({state:i.isVideoMuted?hm.Muted:hm.Unmuted,userId:i.id})}],[ta.AskForStartVideoConsent]:[{event:v2,payload:i=>({state:i.isVideoMuted?hm.Muted:hm.Unmuted,userId:i.id})}],[ta.VideoSpotlightChange]:[{event:CE,payload:i=>({spotlightList:i.spotlightList&&i.spotlightList.map(l=>({userId:l}))})}],[ta.VideoDimensionChange]:[{event:Jp,payload:i=>({type:"received",width:i.width,height:i.height})}],[ta.VideoFollowHostOrder]:[{event:yT,payload:i=>({isFollowHostOrder:i.bOn})}],[ta.VideoHostLayoutChange]:[{event:IE,payload:i=>Array.isArray(i.layout)?i.layout.map(l=>({userId:l})):[]}],[ta.PeerVideoStateChange]:[{event:A2,payload:i=>$t({action:"Start"},i)},{event:wE,payload:i=>$t({action:"Stop"},i)}],[ta.VideoVBPreloadChange]:[{event:TE,payload:i=>({isReady:i})}],[ta.VideoStatisticDataChange]:[{event:RE,payload:i=>i}],[ta.VideoDetailedDataChange]:[{event:ET,payload:i=>i}],[ta.NetworkQualityChange]:[{event:OE,payload:i=>i}],[ta.FarEndCameraRequestControl]:[{event:UL,payload:i=>i}],[ta.FarEndCameraResponseControl]:[{event:Zp,payload:i=>i}],[ta.FarEndCameraInControlChange]:[{event:mm,payload:i=>i}],[ta.FarEndCameraCapabilityChange]:[{event:XS,payload:i=>i}]},DE="AUDIO_ACTIVE_SPEAKER",Tv="AUDIO_UNMUTE_CONSENT",ZS="AUDIO_CURRENT_USER_JOIN_BY_VOIP",kE="AUDIO_CURRENT_USER_JOIN_BY_PHONE",Mg="AUDIO_CURRENT_USER_LEAVE_AUDIO",eC="AUDIO_CURRENT_USER_MUTED",y2="AUDIO_CURRENT_USER_UNMUTED",E2="AUDIO_PARTICIPANT_AUDIO_UPDATE",tC="AUDIO_DIALOUT_RESULT_CODE",nC="AUDIO_DIALOUT_RESULT_SUCCESS",rC="DIALOUT_FAIL",iC="AUDIO_DIALOUT_CANCEL_SUCCESS",bT="DIALOUT_CANCEL_FAIL",uu="AUDIO_MERGE_AUDIO_INDICATION",Fs="USER_FORBIDDEN_MICROPHONE",PE="ESTABLISH_AUDIO_STREAM_ERROR",ST="AUDIO_AUTO_PLAY_FAILED",oC="INVALID_DEVICE_ID",sC="AUDIO_ALLOW_TALK_CHANGE",gm="SHARE_AUDIO_STATE_CHANGE",CT="AUDIO_STATISTIC_DATA";let Fi;!function(i){i.ActiveSpeaker="active-speaker",i.UnmuteAudioConsent="unmute-audio-consent",i.CurrentAudioChange="current-audio-change",i.DialoutStateChange="dialout-state-change",i.MergeAudio="merged-audio",i.AutoPlayFailed="auto-play-audio-failed",i.AllowTalkChange="allow-talk-change",i.ShareAudioChange="share-audio-change",i.AudioStatisticDataChange="audio-statistic-data-change"}(Fi||(Fi={}));const tc={JoinComputerAudio:{success:ZS,fail:[Fs,PE]},LeaveComputerAudio:{success:Mg},JoinAudioByCallMe:{success:nC,fail:[rC]},cancelDialOut:{success:iC,fail:[bT]},hangup:{success:Mg}},aC={[Fi.ActiveSpeaker]:[{event:DE,payload:i=>i}],[Fi.UnmuteAudioConsent]:[{event:Tv,payload:i=>({reason:i})}],[Fi.CurrentAudioChange]:[{event:kE,payload:()=>({action:Y.AudioChangeAction.Join,type:"phone"})},{event:ZS,payload:()=>({action:Y.AudioChangeAction.Join,type:"computer"})},{event:Mg,payload:()=>({action:Y.AudioChangeAction.Leave})},{event:eC,payload:i=>{let{source:l}=i;return{action:Y.AudioChangeAction.Muted,source:l}}},{event:y2,payload:i=>{let{source:l}=i;return{action:Y.AudioChangeAction.Unmuted,source:l}}}],[Fi.DialoutStateChange]:[{event:tC,payload:i=>i}],[Fi.MergeAudio]:[{event:uu,payload:i=>i}],[Fi.AutoPlayFailed]:[{event:ST,payload:()=>{}}],[Fi.AllowTalkChange]:[{event:sC,payload:i=>({enabled:i})}],[Fi.ShareAudioChange]:[{event:gm,payload:i=>i}],[Fi.AudioStatisticDataChange]:[{event:CT,payload:i=>i}]},ni=["isActive","activeUserId"],Vc="SHARE_ACTIVE_INDICATION",Rv="SHARE_CHECK_CHROME_SHARING_EXTENSION",cC="SHARE_START_DESKTOP_SHARE_FAILED",NE="SHARE_DIMENSION_CHANGE",na="SHARE_RECEIVED_DIMENSION_CHANGE",ws="SHARE_VIDEO_STREAMS_END",xg="SHARE_PASSIVE_STOP_SHARE",Hu="SHARE_PASSIVE_BO_STOP",IT="SHARE_NEW_USER_ADD",Lg="SHARE_USER_REMOVE",lu="SHARE_USER_PAUSED",Ov="SHARE_USER_RESUMED",uC="SHARE_AUTO_CHANGE_SOURCE",lC="SHARE_PRIVILEGE_CHANGE",b2="SHARE_READ_RECEIPT",Hh="SHARE_STATISTIC_DATA";let nc;!function(i){i.ShareActiveChange="active-share-change",i.ShareDimensionChange="share-content-dimension-change",i.SharePassiveStop="passively-stop-share",i.SharePeerStateChange="peer-share-state-change",i.ShareContentChange="share-content-change",i.SharePrivilegeChange="share-privilege-change",i.ShareReadReceipt="share-can-see-screen",i.RemoteControlApprovedChange="remote-control-approved-change",i.RemoteControlInControlChange="remote-control-in-control-change",i.RemoteControlClipboardChange="remote-control-clipboard-change",i.ShareStatisticDataChange="share-statistic-data-change"}(nc||(nc={}));const Gh={[nc.ShareActiveChange]:[{event:Vc,payload:i=>{const{isActive:l,activeUserId:u}=i;return $t({state:l?"Active":"Inactive",userId:u},Or(i,ni))}}],[nc.ShareDimensionChange]:[{event:NE,payload:i=>({type:"sended",width:i.width,height:i.height})},{event:na,payload:i=>({type:"received",width:i.width,height:i.height})}],[nc.SharePassiveStop]:[{event:ws,payload:()=>({reason:Y.PassiveStopShareReason.StopScreenCapture})},{event:xg,payload:()=>({reason:Y.PassiveStopShareReason.PrivilegeChange})},{event:Hu,payload:()=>({reason:Y.PassiveStopShareReason.ShareFromMainSession})}],[nc.SharePeerStateChange]:[{event:IT,payload:i=>({userId:i.id,action:"Start"})},{event:Lg,payload:i=>({userId:i.id,action:"Stop"})},{event:lu,payload:i=>({userId:i.id,action:"Pause"})},{event:Ov,payload:i=>({userId:i.id,action:"Resume"})}],[nc.ShareContentChange]:[{event:uC,payload:i=>i}],[nc.RemoteControlApprovedChange]:[{event:"SHARE_REMOTE_CONTROL_APPROVE",payload:i=>({state:i?Fc.Approved:Fc.Rejected})}],[nc.RemoteControlInControlChange]:[{event:"SHARE_GRAB_REMOTE_CONTROL_CHANGE",payload:i=>({isControlling:i})}],[nc.RemoteControlClipboardChange]:[{event:"SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",payload:i=>i}],[nc.SharePrivilegeChange]:[{event:lC,payload:i=>({privilege:i})}],[nc.ShareReadReceipt]:[{event:b2,payload:()=>{}}],[nc.ShareStatisticDataChange]:[{event:Hh,payload:i=>i}]};let wT,TT,S2,Pa,dC;(function(i){i.LiveStart="liveStart",i.LiveEnd="liveEnd"})(wT||(wT={})),function(i){i.MakePublicView="make_question_public_view",i.Comment="comment",i.PrivateView="private",i.DeleteComment="deletecomment",i.DeleteQuestion="deletequestion",i.Reopen="reopen",i.Dismiss="dismiss",i.Upvote="upvote",i.RevokeUpvote="revokeupvote"}(TT||(TT={})),function(i){i.Question="question"}(S2||(S2={})),function(i){i.Question="question",i.UpdateQuestion="updateQuestion",i.Answer="answer",i.DeleteComment="deleteComment",i.DeleteQuestion="deleteQuestion",i.Dismiss="dismiss",i.Reopen="reopen",i.Upvote="upvote",i.AnswerLive="answerLive"}(Pa||(Pa={})),function(i){i.QaSettingChange="qa-setting-change",i.QaActionChange="qa-action-change"}(dC||(dC={}));const jL={[dC.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:i=>i}],[dC.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:i=>({action:Pa.Question,data:i})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:i=>({action:Pa.UpdateQuestion,data:i})},{event:"QA_ANSWER_QUESTION",payload:i=>({action:Pa.Answer,data:i})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:i=>({action:Pa.DeleteComment,data:i})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:i=>({action:Pa.DeleteQuestion,data:i})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:i=>({action:Pa.Dismiss,data:i})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:i=>({action:Pa.Reopen,data:i})},{event:"QA_ANSWER_VOTE_QUESTION",payload:i=>({action:Pa.Upvote,data:i})},{event:"QA_ANSWER_QUESTION_LIVE",payload:i=>({action:Pa.AnswerLive,data:i})}]},Pn="INVALID_OPERATION",Cl="INTERNAL_ERROR",hC="OPERATION_TIMEOUT",_a="INSUFFICIENT_PRIVILEGES",Jd="IMPROPER_MEETING_STATE",Ir="INVALID_PARAMETERS",C2="OPERATION_LOCKED",I2="BREAKOUT_ROOM_ADD_TOKEN",Il="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",RT="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",du="BREAKOUT_ROOM_ROOM_COUTDOWN",Wh="BREAKOUT_ROOM_BROADCAST_MESSAGE",pC="BREAKOUT_ROOM_ASK_HELP_REQUEST",ME="BREAKOUT_ROOM_ASK_HELP_RESPONSE",Dv="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",fC="BREAKOUT_ROOM_JOIN_BO_RESPONSE",Gu="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",Kh="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",xE="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",mC="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE";let sd;!function(i){i.InviteToJoin="invite-to-join",i.RoomCountdown="room-countdown",i.RoomTimeUp="room-time-up",i.ClosingRoomCountdown="closing-room-countdown",i.BroadcastMessage="broadcast-message",i.AskForHelp="ask-for-help",i.AskForHelpResponse="ask-for-help-response",i.RoomStateChange="room-state-change",i.MainSessionUserUpdate="main-session-user-updated"}(sd||(sd={}));const OT={[sd.InviteToJoin]:[{event:Il,payload:i=>i}],[sd.RoomCountdown]:[{event:du,payload:i=>i}],[sd.RoomTimeUp]:[{event:Gu,payload:i=>i}],[sd.ClosingRoomCountdown]:[{event:RT,payload:i=>i}],[sd.BroadcastMessage]:[{event:Wh,payload:i=>i}],[sd.AskForHelp]:[{event:pC,payload:i=>i}],[sd.AskForHelpResponse]:[{event:ME,payload:i=>i}],[sd.RoomStateChange]:[{event:Dv,payload:i=>({status:i.controlStatus})}],[sd.MainSessionUserUpdate]:[{event:mC,payload:()=>({})}]};var kv;!function(i){i.StatusUpdate="archiving-status-update",i.OptionsUpdate="archiving-options-update"}(kv||(kv={}));const _m={[kv.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:i=>i}],[kv.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:i=>i}]};let $d;!function(i){i.PollDataChange="poll-data-change",i.PollSizeUpdate="poll-size-update",i.PollStatusUpdate="poll-status-update"}($d||($d={}));const DT={[$d.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:i=>i}],[$d.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:i=>i}],[$d.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:i=>i}]},w2=$t($t($t($t($t($t($t($t($t($t($t($t($t($t({},Uh),f2),gT),Av),KV),aC),zV),jL),Gh),Uc),OT),_m),{"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:i=>i}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:i=>i},{event:"CC_STATUS_CHANGE",payload:i=>i}]}),DT),zh=function(i){return{all:i=i||new Map,on:function(l,u){var p=i.get(l);p?p.push(u):i.set(l,[u])},off:function(l,u){var p=i.get(l);p&&(u?p.splice(p.indexOf(u)>>>0,1):i.set(l,[]))},emit:function(l,u){var p=i.get(l);p&&p.slice().map(function(_){_(u)}),(p=i.get("*"))&&p.slice().map(function(_){_(l,u)})}}}(),Xd=new Map,kT=new Array,_t=function(i){zh.emit(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},Pv=i=>new Promise((l,u)=>{i.fail&&i.fail.length>0?Zl(Ya(zh,i.success).pipe(is(1)),bs(...i.fail.map(p=>Ya(zh,p).pipe(is(1),zn(_=>Qi({type:p,payload:_})))))).subscribe(p=>l(p),p=>{u("object"==typeof p.payload?$t({type:p.type},p.payload):void 0===p.payload?{type:p.type}:p)}):Ya(zh,i.success).pipe(is(1)).subscribe(p=>l(p))}),_i=function(i,l){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((p,_)=>{let y=qt;"string"==typeof i?y=Ya(zh,i).pipe(is(1)):(y=Ya(zh,i.event),i.operations&&(y=i.operations.reduce((C,I)=>C.pipe(I),y))),Zl(y,_c(u).pipe(Gr(Qi("timeout")))).subscribe(C=>{if(l){const I=l(C);"boolean"==typeof I?I?p(""):_({type:Cl}):0===I.ret?p(I.body):_({type:Cl,reason:I.body})}else p(C)},()=>{_({type:hC})})})},Ts=(i,l)=>void 0!==l?Ya(zh,i).pipe(is(l)):Ya(zh,i),Nv=()=>{kT.forEach(i=>{i.unsubscribe()}),kT.length=0,Xd.clear()},{setAttendeesList:Bg,setIsAdmitAllSilentUsers:PT,resetParticipants:gC,addFailoverAttendees:LE,removeFailoverAttendees:ad,setClearRaiseHand:xv,setClearAttendeeFeedback:_C,updateAttendeeDisplayName:BE,removeXmppAttendeeUser:vC,updateXmppAttendeeList:AC,setAttendeeCustomizedKey:NT}=fo({SET_ATTENDEES_LIST:i=>i,SET_ASSISTANT_LIST:i=>i,UPDATE_XMPP_ATTENDEE_LIST:i=>i,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:i=>i,REMOVE_FAILOVER_ATTENDEES:i=>i,ADD_FAILOVER_ATTENDEES:i=>i,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:i=>i,REMOVE_XMPP_ATTENDEE_USER:i=>i,SET_ATTENDEE_CUSTOMIZED_KEY:i=>i});var vm="NOT_FOUND",MT=function(i,l){return i===l};function FE(i,l){var u,p,Z,_="object"==typeof l?l:{equalityCheck:l},y=_.equalityCheck,I=_.maxSize,O=void 0===I?1:I,D=_.resultEqualityCheck,B=(Z=void 0===y?MT:y,function(ie,oe){if(null===ie||null===oe||ie.length!==oe.length)return!1;for(var ve=ie.length,Ae=0;Ae<ve;Ae++)if(!Z(ie[Ae],oe[Ae]))return!1;return!0}),P=1===O?(u=B,{get:function(Z){return p&&u(p.key,Z)?p.value:vm},put:function(Z,ie){p={key:Z,value:ie}},getEntries:function(){return p?[p]:[]},clear:function(){p=void 0}}):function(Z,ie){var oe=[];function ve(Ae){var Te=oe.findIndex(function(Q){return ie(Ae,Q.key)});if(Te>-1){var Be=oe[Te];return Te>0&&(oe.splice(Te,1),oe.unshift(Be)),Be.value}return vm}return{get:ve,put:function(Ae,Te){ve(Ae)===vm&&(oe.unshift({key:Ae,value:Te}),oe.length>Z&&oe.pop())},getEntries:function(){return oe},clear:function(){oe=[]}}}(O,B);function F(){var Z=P.get(arguments);if(Z===vm){if(Z=i.apply(null,arguments),D){var oe=P.getEntries().find(function(ve){return D(ve.value,Z)});oe&&(Z=oe.value)}P.put(arguments,Z)}return Z}return F.clearCache=function(){return P.clear()},F}function xT(i){var l=Array.isArray(i[0])?i[0]:i;if(!l.every(function(p){return"function"==typeof p})){var u=l.map(function(p){return"function"==typeof p?"function "+(p.name||"unnamed")+"()":typeof p}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+u+"]")}return l}function ef(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];var _=function(){for(var y=arguments.length,C=new Array(y),I=0;I<y;I++)C[I]=arguments[I];var O,D=0,B={memoizeOptions:void 0},P=C.pop();if("object"==typeof P&&(B=P,P=C.pop()),"function"!=typeof P)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof P+"]");var Z=B.memoizeOptions,ie=void 0===Z?u:Z,oe=Array.isArray(ie)?ie:[ie],ve=xT(C),Ae=i.apply(void 0,[function(){return D++,P.apply(null,arguments)}].concat(oe)),Te=i(function(){for(var Be=[],Q=ve.length,tt=0;tt<Q;tt++)Be.push(ve[tt].apply(null,arguments));return O=Ae.apply(null,Be)});return Object.assign(Te,{resultFunc:P,memoizedResultFunc:Ae,dependencies:ve,lastResult:function(){return O},recomputations:function(){return D},resetRecomputations:function(){return D=0}}),Te};return _}var Us=ef(FE);const UE=i=>{let{participants:{attendeesList:l}}=i;return l},QL=i=>{let{meeting:{userId:l}}=i;return l},LT=i=>{let{participants:{xmppAttendeeList:l}}=i;return l};let va,BT,Lv;(function(i){i[i.Attendee=0]="Attendee",i[i.Host=1]="Host",i[i.Owner=4]="Owner",i[i.ViewOnly=8]="ViewOnly",i[i.HostOwner=5]="HostOwner",i[i.ViewOnlyCanTalk=24]="ViewOnlyCanTalk"})(va||(va={})),function(i){i[i.Host=10]="Host",i[i.Panelist=20]="Panelist",i[i.Attendee=30]="Attendee"}(BT||(BT={})),function(i){i[i.Client=9]="Client",i[i.Phone=5]="Phone",i[i.H323=15]="H323",i[i.Assitant=51]="Assitant"}(Lv||(Lv={}));const Ws=i=>(i&va.Host)===va.Host,tf=i=>(i&Lv.Phone)===Lv.Phone,VE=i=>i===va.ViewOnlyCanTalk,Na=i=>(i&va.ViewOnly)===va.ViewOnly;let Am,Qr,yC,hr,nf;(function(i){i[i.Automatically=1]="Automatically",i[i.Manually=2]="Manually"})(Am||(Am={})),function(i){i[i.NotStarted=1]="NotStarted",i[i.InProgress=2]="InProgress",i[i.Closing=3]="Closing",i[i.Closed=4]="Closed"}(Qr||(Qr={})),function(i){i[i.NoToken=1]="NoToken",i[i.GotToken=2]="GotToken",i[i.Started=3]="Started",i[i.Closing=4]="Closing",i[i.Closed=5]="Closed"}(yC||(yC={})),function(i){i.Initial="initial",i.Invited="invited",i.Joining="joining",i.InRoom="in room",i.Leaving="leaving",i.TimeUp="time up",i.MainSession="main session"}(hr||(hr={})),function(i){i.Join="joinRequest",i.Switch="switchRequest",i.Leave="leaveRequest",i.Broadcast="messageText",i.HelpReq="helpRequest",i.HelpRes="helpResponse",i.CoHostWantJoinThisBo="wantJoinThisBO"}(nf||(nf={})),Y.AskHostHelpResponse=void 0,function(i){i[i.Received=0]="Received",i[i.Busy=1]="Busy",i[i.Ignore=2]="Ignore",i[i.AlreadyInRoom=3]="AlreadyInRoom"}(Y.AskHostHelpResponse||(Y.AskHostHelpResponse={}));const Kr=Us([QL,UE],(i,l)=>l.find(u=>u.userId===i)),Wu=Us([Kr],i=>i?.isHost||i?.bCoHost),Ku=Us([Kr],i=>i?.isHost),rc=Us([LT],i=>i.filter(l=>l.userRole===BT.Attendee)),Fg=Us([UE],i=>i.filter(l=>l.bHold&&!l.bid)),Ks=Us([UE,i=>{let{breakoutRoom:l}=i;return l&&l.controlStatus},i=>{let{breakoutRoom:l}=i;return l&&l.currentRoom.status}],(i,l,u)=>i.filter(l!==Qr.InProgress&&l!==Qr.Closing||u!==hr.InRoom?p=>!p.bHold&&!p.bid:p=>!p.bHold)),HL=Us([i=>{let{participants:{assistantList:l}}=i;return l}],i=>i),Rs=Us([Ks],i=>i.find(l=>l.isHost)),T2=Us([Ks],i=>i.filter(l=>l.bCoHost)),EC=Us([Kr,Ks],(i,l)=>l.filter(u=>u.userId!==i?.userId));let ao,Ug;Us([LT],i=>i.reduce((l,u)=>{const{jid:p}=u;return Object.assign(l,{[p]:u}),l},{})),Us([LT,i=>{let{meeting:{jid:l}}=i;return l}],(i,l)=>{var u;return null===(u=i.find(p=>p.jid===l))||void 0===u?void 0:u.userId}),function(i){i.Closed="closed",i.Connecting="connecting",i.Connected="connected"}(ao||(ao={})),function(i){i[i.SupportASL=1]="SupportASL",i[i.SidecarPhase2=2]="SidecarPhase2",i[i.SupportBroadcastVoice=8]="SupportBroadcastVoice",i[i.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",i[i.SupportPreview=32]="SupportPreview",i[i.WebCameraIndication=64]="WebCameraIndication",i[i.SupportFarEndCameraControl=256]="SupportFarEndCameraControl",i[i.SupportVideoShare=512]="SupportVideoShare",i[i.UnifyErrorType=1024]="UnifyErrorType"}(Ug||(Ug={}));const{setAsnIds:R2,setIsCanUnmute:O2,setDialoutSequence:D2,setDialoutResultCode:Bv,setIsAllowToTalk:Zd,setIsHostMuteAll:Vg,setIsActiveOperation:Yh,setAudioSsrc:bC,setIsMutedUponEntry:jE,setIsUserGrantCaptureAudio:GL,setIsMicrophoneForbidden:SC,setWebrtcRestartCount:FT,setMicrophoneList:QE,setSpeakerList:CC,setActiveMicrophone:k2,setActiveSpeaker:P2,setCanPlayAudio:Fv,resetAudio:N2,setIsComputerAudioLoading:jg,setIsSpeakerOnly:M2,setIsAllowToTalkAttendeeConnected:UT,setIsMuteBeforeSharingAudio:rf,addLocalShareAudioUser:HE,updateLocalShareAudioUser:VT,setIsJoinComputerAudioBeforeSharingAudio:ym,setIsShareAudioEnabled:Em,setIsShareAudioMuted:$i,setIsSharingAudio:Uv,setAudioDataEncoding:IC,setAudioDataDecoding:GE,addLocallyMutedAudio:wC,removeLocallyMutedAudio:jT,updateUserAudioVolumeLocally:x2,removeLocalUserAudioVolume:L2}=fo("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_IS_HOST_MUTE_ALL","SET_IS_ACTIVE_OPERATION","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_SPEAKER_ONLY","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME"),{setSharePrivilege:qh,setShareActiveNode:zu,setIsReceiveSharing:TC,setIsChromeExtensionInstalled:B2,setIsScreenShareForbidden:Vv,setShareDimension:QT,setShareStatus:eh,setShareSsrc:hu,setShareQuality:RC,setReceivedShareDimension:HT,setIsRemoteControlApproved:WL,setIsGrabRemoteControl:WE,setIsVerifiedSharingRenderCanvasAfterFailover:OC,setIsVerifiedSharingCaptureCanvasAfterFailover:DC,setIsSdkGrabControl:F2,setIsReceiveSharingFromMainSession:kC,setIsSharingToBreakoutRoom:KE,setIsSharingWithSecondCamera:PC,setShringSecondCameraId:GT,setIsRequireReadReceipt:WT,setIsOptimizedForSharedVideo:Jh,setShareDataEncoding:sf,setShareDataDecoding:$h,resetShare:zE}=fo("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_REMOTE_CONTROL_APPROVED","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_VERIFIED_SHARING_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_SHARING_CAPTURE_CANVAS_AFTER_FAILOVER","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","SET_IS_OPTIMIZED_FOR_SHARED_VIDEO","SET_SHARE_DATA_ENCODING","SET_SHARE_DATA_DECODING","RESET_SHARE"),{setVideoSsrc:U2,setActiveVideoId:NC,setCameraList:jv,setActiveCamera:af,setIsCurrentUserStartedVideo:Xh,setSpotlightVideo:YE,setIsCaptureForbidden:bm,setVideoMaxQuality:KT,setCaptureCanvasList:V2,setIsVideoMuted:as,setIsCaptureCameraLoading:MC,setIsCameraTaken:zT,setIsVerifiedVideoRenderCanvasAfterFailover:xC,setIsVerifiedVideoCaptureCanvasAfterFailover:LC,resetVideo:j2,setReceivedVideoDimension:YT,addSubscribedVideoId:Zh,removeSubscribedVideoId:qT,setIsFollowHostVideoLayout:KL,setHostDragLayout:Q2,addRenderedVideoId:Qg,removeRenderedVideoId:H2,setIsSupportHdVideo:Sm,setMaximumNumbeOfHdSubscriptions:Oi,setIsCanUnmuteVideo:G2,setIsVbPreloadReady:cf,setIsVbConfiged:pu,setVbImageSrc:qE,setVideoDataEncoding:JE,setVideoDataDecoding:uf,setHardwareAccelerationState:Qv,setVideoCaptureCustomizedOption:th,setNetworkQuality:$E,setVideoCameraPtzCapabilities:W2,setIsCurrentUserRequestCameraControlled:Hv,setIsCurrentUserCameraInControl:Yu,addVideoFarEndCameraControlUser:JT,removeVideoFarEndCameraControlUser:nh,setVideoPtzCameraMoving:$T,setVideoPtzCameraValue:XT,setIsControllingFarEndCamera:lf}=fo("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_CAPTURE_CANVAS_LIST","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","SET_IS_VERIFIED_VIDEO_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_VIDEO_CAPTURE_CANVAS_AFTER_FAILOVER","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA"),{resetQa:$V}=fo("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:BC,setPanelistChatPrivilege:z2,addChatMessageHistory:XE,resetChat:Y2,setIsAllowAttendeeChat:q2,setLatestChatMessageId:fu,removeChatMessage:FC}=fo("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE"),{setCcEditorInfo:ZT,resetClosedCaption:Z2}=fo("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:eR,setBreakoutRoomAllocationPattern:Cm,setBreakoutRoomSequenceId:Gv,setMeetingElapsedTime:tR,setStartRoomElapsedTime:nB,setBreakoutRoomOptions:nR,setBreakoutRoomControlStatus:rR,setBreakoutRooms:ic,setCurrentBreakoutRoom:UC,setBreakoutRoomAttendeeStatus:df,setBreakoutRoomConfId:ZE,setBreakoutRoomToken:iR,resetBreakoutRoom:VC,setBreakoutRoomClosingRoomTime:jC,setBreakoutRoomBroadcastMessage:rB,setBreakoutRoomHostReplyType:oR,setBreakoutRoomHostReplyRequestId:sR,setMainSessionAttendeeList:aR,setIsHugeBreakoutRoom:QC,setBreakoutRoomPreAssignedRoomList:hf,setBreakoutRoomUserRoleUpdated:eb,setBreakoutRoomMeetingOptions:Wv}=fo("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:tb,setCloudRecordingEnable:eP,setCloudIsoRecordingEnable:nb,setAllowStopAutoRecording:HC,setAutomaticCloudRecordingEnable:Im,setIsZoomIQ:GC,setZoomIQChanging:WC,resetRecording:tP}=fo("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","RESET_RECORDING"),{updateCmdJid:cR,removeCmdJid:nP,setCmdChannelConnectionStatus:KC,resetCmdChannel:uR}=fo("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:iB}=fo({SET_ARCHIVING_STATUS:i=>i,SET_ARCHIVING_SESSION_READY:i=>i,SET_ARCHIVING_OPTIONS:i=>i,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:YC,setLiveTranscriptionMeetingOptions:yt,setIsLiveTranscriptionManualCaptionerEnabled:rb,setLiveTranscriptionGatewayId:lR,setLiveTranscriptionSupportedLanguage:dR,setIsLiveTranscriptionSubscribed:qC,setCurrentTranscriptionLang:Kv,setCurrentTranslationLang:pf,addLiveTranscriptionMessage:wm,updateLiveTranscriptionMessage:JC,reduceLiveTranscriptionMessages:zv,setLiveTranscriptionEngineType:$C,removeLiveTranscriptionFailoverState:ib,setLiveTranscriptionLastCaptionMessage:hR,resetLiveTranscription:XC}=fo("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"),{resetPoll:uB}=fo("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","RESET_POLL"),ff=function(i){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:u,xmppSocketStatus:p,mainSessionSocketStatus:_},meeting:{meetingStatus:y}}=i,C=[];if(y===Is.Joined){const I=Mi.getInstance(),O=mo.createAgent();if(I.disconnect(),I.destroy(),i.video&&(i.video.subscribedVideoList.length>0&&i.video.subscribedVideoList.forEach(D=>{O.unsubscribeVideo(D)}),i.video.isCurrentUserStartedVideo&&_t(Ng)),i.share&&i.share.isReceiveSharing){const D=i.share.activeNodeId;i.share.isRemoteControlApproved&&O.sharingRequestRemoteControl(D,!1),O.unsubscribeSharing(D)}}if(l||(Dr.clearSession(),[Gi.WebclientTk,Gi.WebclientZsk,Gi.WebclientZtk].forEach(I=>{sessionStorage.removeItem(I)}),ju.destroy()),u!==ao.Closed&&C.push(Qd()),p!==ao.Closed&&C.push(Ra()),_!==ao.Closed&&C.push(gi()),l){const I=Kr(i);C.push(im({audio:I?.audio,muted:I?.muted,video:I?.bVideoOn,isFailover:l}))}else C.push(im({audio:!1,muted:void 0,video:!1,isFailover:l}));return C.push(Eg(),xc(),gC(),N2(l),zE(),j2(l),$V(),Y2(),tP(),Z2(),VC(),uR(),iB(),XC(l),uB(),ai(Is.Closed)),C},ob=function(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];return _i({event:ka,operations:[gt(_=>_.find(y=>y.userId===i)),En(_=>!!_),is(1)]},...u)};function mf(i){return $e(gt((l,u)=>i(l,u)),En(l=>null!=l))}function sP(i){return $e(zn((l,u)=>i(l,u)||qt))}function mu(i){return $e(oo((l,u)=>i(l,u)||qt))}function Gg(i){return $e(zn((l,u)=>i(l,u)),zn(l=>Array.isArray(l)?Dn(l):rr(l)))}function rh(i){return $e(ir(l=>{try{i(l)}catch(u){console.warn(u)}}),Gr(qt))}const lB=(i,l)=>{const u=performance.now();let p=0,_=!1;return setTimeout(function y(){p+=l,i();const C=performance.now()-u-p,I=setTimeout(y,Math.max(l-C,0));_&&clearTimeout(I)},l),()=>{_=!0}},Wg={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},sb={[`${Do}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(i){i.add&&this.payloads.add.push(...i.add),i.update&&this.payloads.update.push(...i.update),i.remove&&this.payloads.remove.push(...i.remove)}})};function aP(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wg;return l=>new Me(u=>{const p=new Map;let _=0,y=null;const{period:C,rules:I}=i;let O=null;y||(y=lB(()=>{_=0},C));const D=Object.keys(sb),B=l.subscribe({next(P){if(P&&P.evt&&null!==y){_+=1;const{evt:F,body:Z}=P,ie=String(F);if(D.indexOf(ie)>=0)if(O){const oe=p.get(ie);if(oe)oe.onThrottle(Z);else{const ve=sb[ie]();ve.onThrottle(Z),p.set(ie,ve)}}else{let oe=0;if(I.forEach(ve=>{_>ve.peak&&(oe=ve.throttle)}),oe>0){const ve=sb[ie]();ve.onThrottle(Z),p.set(ie,ve),O=setTimeout(()=>{p.forEach((Ae,Te)=>{const Be={evt:Number(Te),body:Ae.payloads};u.next(Be)}),p.clear(),O=null},oe)}else u.next(P)}else u.next(P)}else u.next(P)},error(P){u.error(P)},complete(){u.complete()}});return()=>{B.unsubscribe(),y&&(y(),y=null),_=0}})}Us([Ks,i=>{let{share:{isReceiveSharing:l}}=i;return l},i=>{let{share:{activeNodeId:l}}=i;return l}],function(){let u=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(p=>p.userId===u&&!0===p.sharerOn):null});const Yv=Us([Ks],i=>i.filter(l=>l.sharerOn)),ZC=Us([Yv],i=>i.some(l=>!!l.bVideoShare));class fR{constructor(l){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,l&&(this._cancelError=l),this._locked=!1}acquire(){const l=this.isLocked(),u=new Promise((p,_)=>{this._queue.push({resolve:p,reject:_})});return l||this._dispatch(),u}runExclusive(l){var u=this;return V(function*(){const p=yield u.acquire();try{return yield l()}finally{p()}})()}waitForUnlock(){var l=this;return V(function*(){return l.isLocked()?new Promise(u=>l._waiters.push({resolve:u})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const l=this._currentReleaser;this._currentReleaser=void 0,l()}}cancel(){this._queue.forEach(l=>l.reject(this._cancelError)),this._queue=[]}_dispatch(){const l=this._queue.shift();if(!l)return;let u=!1;this._currentReleaser=()=>{u||(u=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,l.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(l=>l.resolve()),this._waiters=[]}}let ab="zoom.us";const eI="2.10.0",cb=`https://dmogdx0jrul3u.cloudfront.net/${eI}/lib/av`,qv=`https://source.zoom.us/${eI}/lib/av`,tI=`https://jssdk.zoomus.cn/${eI}/lib/av`,qu=(i,l,u)=>pg(...[l,u].map((p,_)=>{if("initial"!==p)return Dn(Promise.resolve("success"===p));{const y=0===_?"ENCODE":"DECODE";return Zl(Ts(`${i.toUpperCase()}_${y}_SUCCESS`,1).pipe(zo(!0)),Ts(`${i.toUpperCase()}_${y}_FAIL`,1).pipe(zo(!1)))}})),Jv=i=>{const l=Kr(i.value);return l?rr(l):Ts(am,1).pipe(Ht(xs),Un(i),gt(u=>{let[,p]=u;return Kr(p)}))},cP=()=>Dn(navigator.mediaDevices.enumerateDevices()).pipe(gt(i=>{const l=[],u=[],p=[];return i.forEach(_=>{const{kind:y,deviceId:C,label:I}=_;switch(y){case"audioinput":"communications"===C||/ZoomAudioDevice/i.test(I)||/Zoom-\S*/.test(I)||/CubebAggregateDevice\S*/.test(I)||l.push({deviceId:C,label:I});break;case"audiooutput":"communications"===C||/ZoomAudioDevice/i.test(I)||u.push({deviceId:C,label:I});break;case"videoinput":p.push({deviceId:C,label:I})}}),{microphones:l,speakers:u,cameras:p}}));function jc(i){if(i){let u=i;try{i.width=i.width}catch{var l;u=i.cloneNode(!0),null===(l=i.parentNode)||void 0===l||l.replaceChild(u,i)}return u}return i}function Kg(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(BL)}catch{return!1}}function nI(){var i;return null===(i=WebAssembly)||void 0===i?void 0:i.validate(AE)}function zg(){return aE()||Tg()}const rI=(()=>{const i=new fR;return{withAudioAction:l=>function(){for(var u=arguments.length,p=new Array(u),_=0;_<u;_++)p[_]=arguments[_];return new Promise(function(){var y=V(function*(C,I){let O=!1;const D=setTimeout(()=>{O=!0,I(new Error("Operation Timeout!"))},3e4);try{const B=yield i.acquire();O?B():(clearTimeout(D),C(l(...p)))}catch(B){O||(clearTimeout(D),I(B))}});return function(C,I){return y.apply(this,arguments)}}())},processAudioAction:l=>i.acquire().then(()=>l()),completeAudioAction:()=>{i.release()},cancelAllAudioAction:()=>{i.cancel()}}})();function iI(i){const l=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(i,{get:(u,p)=>"string"==typeof p&&l.includes(p)?function(){return rI.withAudioAction(u[p].bind(u))(...arguments)}:Reflect.get(u,p)})}function mR(i){var l,u;const p=l2()&&Number(null===(l=uT())||void 0===l||null===(u=l.match(/\d+$/))||void 0===u?void 0:u[0])>=91,_=navigator.hardwareConcurrency>2,y=i?BS():Vp();return!Tg()&&zd()&&y&&p&&_}const Yg=(i,l)=>{const u=document.createElement("link");return u.rel="preload",u.href=i,u.as=l,u.crossOrigin="anonymous",u},tp=(i,l,u)=>{const p=[],_=[],y=Array.isArray(i)?i:[i];return pE.filter(C=>y.includes(C.category)&&C.tag===l).forEach(C=>{"worker"===C.type?p.push(`${u}${C.name}`):"wasm"===C.type&&_.push(`${u}${C.name}`)}),{workers:p,wasms:_}};function qg(i,l,u,p){let{share:{activeNodeId:_,shareQuality:y}}=l;const{share:{isReceiveSharingFromMainSession:C}}=l;u&&(_=u),void 0!==p&&(y=p);const I=ZC(l);i.subscribeSharing(_,y,C,I)}const wl=mo.createAgent();var ub=Object.freeze({__proto__:null,sharePrivilegeChangeEpic:(i,l)=>Zn(i,Sc).pipe(En(u=>{var p;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.lockShare)}),Un(l),ir(u=>{let[p,_]=u;const{share:{sharePrivilege:y}}=_,{payload:{body:{lockShare:C}}}=p;y!==C&&_t(lC,C)}),gt(u=>{let[p]=u;return qh(p.payload.body.lockShare)})),shareSSrcEpic:i=>Zn(i,20227).pipe(gt(l=>hu(l.payload.body.ssrc))),shareStatusChangeEpic:(i,l)=>Zn(i,20225).pipe(Un(l),En(u=>{let[p,_]=u;const{payload:{body:y}}=p,{share:{isReceiveSharingFromMainSession:C}}=_;return!C||C&&y.fromMainSession}),gt(u=>{let[p,_]=u;const{share:{isReceiveSharing:y,activeNodeId:C,isReceiveSharingFromMainSession:I},breakoutRoom:O}=_,{payload:{body:D}}=p;if(y&&1===D.bStatus){let B=!1;O?.currentRoom.status===hr.InRoom&&O.mainSessionAttendeeList.length>0&&(B=O.mainSessionAttendeeList.findIndex(P=>P.userId===C)>-1),wl.unsubscribeSharing(C,B),qg(wl,_,D.activeNodeID),Mi.getInstance().switchSharingSource(D.ssrc,I),_t(uC,{userId:D.activeNodeID})}else if(1===D.bStatus){const B={activeUserId:D.activeNodeID,isActive:!0};I&&Object.assign(B,{isFromMainSession:!0}),_t(Vc,B)}else if(y){const B={activeUserId:D.activeNodeID,isActive:!1};I&&Object.assign(B,{isFromMainSession:!0}),_t(Vc,B)}return zu(D)})),handleChromeExtensionEpic:i=>Ei(i,er.CheckChromeSharingExtensionResponse).pipe(gt(l=>(_t(Rv,l.payload.data),B2(l.payload.data)))),handleSDKShareSuccessEpic:(i,l)=>Ei(i,[er.SharingDesktopStreamHaveAudio,er.SharingDesktopStreamHaveNoAudio]).pipe(Un(l),gt(u=>{let[p,_]=u;const{meeting:{userId:y},share:{isSharingToBreakoutRoom:C,isOptimizedForSharedVideo:I}}=_,{payload:{type:O}}=p;return wl.startSharing(y,{bShareToBO:C,bShareAudio:O===er.SharingDesktopStreamHaveAudio,bShareVideo:!!I}),Vv(!1)})),handleSDKShareErrorEpic:i=>Ei(i,[er.DesktopSharingError,er.DesktopSharingChromeExtensionUninstalled,er.DesktopSharingPermissionDenied,er.DesktopSharingSystemError]).pipe(zn(l=>{const u=[];let p="";return[er.DesktopSharingPermissionDenied,er.DesktopSharingSystemError].includes(l.payload.type)&&(u.push(Vv(!0)),l.payload.type===er.DesktopSharingSystemError?/mac/i.test(navigator.platform)&&(p="To use screen share on Chrome, please allow screen recording access in system setting."):p="To use screen share, please allow the permission request."),_t(cC,{reason:p}),Dn(u)})),handleSDKShareDimensionChangeEpic:i=>Ei(i,er.CurrentDesktopSharingWidthHeight).pipe(En(l=>!!l.payload.data),gt(l=>{_t(NE,l.payload.data);const{payload:{data:{width:u,height:p}}}=l;return Mi.getInstance().ajustmentSharingCanvas(u,p),QT(l.payload.data)})),handleSDKReceivedShareSizeChangeEpic:(i,l)=>Ei(i,er.SharingDecodeMaxSize).pipe(En(u=>!!u.payload.data),Un(l),mf(u=>{let[p,_]=u;const{share:{shareQuality:y,activeNodeId:C}}=_,{payload:{data:{fps:I}}}=p,O=Number(I);if(y!==O)return qg(wl,_,C,O),RC(O)})),handleRWGShareOriginalDimensionEpic:i=>Zn(i,20226).pipe(ir(l=>{var u,p;if(_t(na,null===(u=l.payload)||void 0===u?void 0:u.body),null!==(p=l.payload)&&void 0!==p&&p.body){const{payload:{body:{width:_,height:y}}}=l;Mi.getInstance().ajustmentReceivedSharingCanvas(_,y)}}),gt(l=>HT(l.payload.body))),handleSDKShareOriginalDimensionEpic:i=>Ei(i,er.SharingPara).pipe(ir(l=>{var u,p;if(_t(na,null===(u=l.payload.data)||void 0===u?void 0:u.body),null!==(p=l.payload.data)&&void 0!==p&&p.body){const{payload:{data:{body:{width:_,height:y}}}}=l;Mi.getInstance().ajustmentReceivedSharingCanvas(_,y)}}),gt(l=>{var u;return HT(null===(u=l.payload.data)||void 0===u?void 0:u.body)})),handleSDKStopShareEpic:(i,l)=>Ei(i,er.UserStopDesktopSharing).pipe(Un(l),gt(u=>{let[,p]=u;const{meeting:{userId:_},share:{status:y}}=p;return y!==Y.ShareStatus.End&&(wl.stopSharing(_),_t(ws)),eh(Y.ShareStatus.End)})),handleRWGCurrentUserShareChangeEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[p,_]=u;const{meeting:{userId:y}}=_,C=p.payload.body.update;return C&&C.length>0&&C.findIndex(I=>I.id===y&&void 0!==I.bShareOn)>-1}),zn(u=>{let[p,_]=u;const{meeting:{userId:y},share:{status:C,isReceiveSharing:I,activeNodeId:O}}=_,{payload:{body:{update:D}}}=p,B=D.find(ie=>ie.id===y&&!1===ie.bShareOn),P=D.find(ie=>ie.id===y&&!0===ie.bShareOn),F=[],Z=Mi.getInstance();return B&&C!==Y.ShareStatus.End&&(wl.stopSharing(y),Z.stopDesktopSharing(),F.push(eh(Y.ShareStatus.End)),_t(xg)),P&&C===Y.ShareStatus.End&&(I&&(Z.stopRenderSharing(),wl.unsubscribeSharing(O),F.push(TC(!1))),F.push(eh(Y.ShareStatus.Sharing))),Dn(F)})),handleMultipleShareChangeEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[p,_]=u;const{meeting:{userId:y}}=_,C=p.payload.body.update;return C&&C.length>0&&C.findIndex(I=>I.id!==y&&void 0!==I.bShareOn)>-1}),zn(u=>{let[p,_]=u;const{payload:{body:{update:y}}}=p,{share:{activeNodeId:C,isReceiveSharing:I}}=_,O=Yv(_),D=y.filter(F=>!0===F.bShareOn&&!1===F.bSharePause),B=y.filter(F=>!0===F.bShareOn&&!0===F.bSharePause),P=y.filter(F=>!1===F.bShareOn);return D.length>0&&D.forEach(F=>{-1===O.findIndex(Z=>Z.userId===F.id)?_t(IT,F):_t(Ov,F)}),B.length>0&&B.forEach(F=>{_t(lu,F)}),P.length>0&&(P.forEach(F=>{_t(Lg,F)}),I&&P.some(F=>F.id===C))?Zl(Zn(i,20225).pipe(is(1),Gr(qt)),_c(50).pipe(Gr(Qi("timeout")))).pipe(Mc(()=>{const{share:{activeNodeId:F,isReceiveSharingFromMainSession:Z},audio:ie}=l.value,oe=O.filter(ve=>ve.userId!==F);if(oe.length>0){const ve=oe[0],{userId:Ae}=ve;wl.unsubscribeSharing(F,Z),qg(wl,l.value,Ae);const Te=Mi.getInstance();return Te.switchSharingSource(Ae,Z),ie?.localShareAudioUserMutedList.forEach(Be=>{Te.setSharingAudioVolume(Ae,Be.userId!==Ae||Be.muted,Be.isFromMainSession)}),_t(uC,{userId:Ae}),rr(zu({activeNodeID:Ae,bStatus:1,ssrc:Ae}))}return qt})):qt})),handleSharingEncryptIndication:(i,l)=>Zn(i,US).pipe(Un(l),oo(u=>{let[p,_]=u;const{payload:{body:{encryptKey:y,additionalType:C}}}=p,{media:{sharingDecodeStatus:I,sharingEncodeStatus:O},meeting:{confId:D,userId:B,zoomId:P,meetingId:F,meetingNumber:Z,isWebinar:ie}}=_;return Jv(l).pipe(oo(oe=>{let ve=O;return ie&&oe&&Na(oe.userRole)&&(ve="failed"),qu("sharing",ve,I).pipe(ir(Ae=>{let[Te,Be]=Ae;const Q=Mi.getInstance(),tt={userId:B,sn:Cs(P),confId:D,encryptKey:Cs(y),encryptType:C,meetingId:F,meetingNumber:Z};if(Te&&Q?.updateMediaParams({iVType:ga.SHARING_ENCODE,isFromMainSession:!1,updateParams:tt}),Be){Q.updateMediaParams({iVType:ga.SHARING_DECODE,isFromMainSession:!1,updateParams:tt});const{participants:{attendeesList:dt}}=l.value;if(dt.length>0){const it=dt.map(ft=>({userid:ft.userId,sn:ft.zoomID&&Cs(ft.zoomID)}));Q.updateUserMediaSN({added:it,isFromMainSession:!1,iVType:ga.SHARING_DECODE})}}}),Gr(qt))}))})),handleSharingReceivingChannelReadyEpic:(i,l)=>Bs(i,20235).pipe(Un(l),ir(u=>{let[p,_]=u;const{media:{sharingDecodeStatus:y}}=_,{type:C,payload:{body:I}}=p,O=C===`${_l}`;qu("sharing","success",y).subscribe(D=>{let[,B]=D;B&&Mi.getInstance().addReceivedSharingChannelType($t({isFromMainSession:O},I))})}),Gr(qt)),handleSharingReceivingChannelCloseEpic:(i,l)=>Bs(i,20236).pipe(Un(l),ir(u=>{let[p,_]=u;const{media:{sharingDecodeStatus:y}}=_,{type:C,payload:{body:{ssrc:I}}}=p,O=C===`${_l}`;qu("sharing","success",y).subscribe(D=>{let[,B]=D;B&&Mi.getInstance().removeReceivedSharingChannelType({isFromMainSession:O,ssrc:I})})}),Gr(qt)),handleReceiveSharingConfirmEpic:i=>Ei(i,er.SharingFirstDecodeFrameReceivedSsrc).pipe(En(l=>!!l.payload.data),ir(l=>{const{payload:{data:{ssrc:u}}}=l;wl.sendReceivingSharingReady(u)}),Gr(qt)),handleReceiveSharingFeedbackEpic:(i,l)=>Zn(i,20233).pipe(En(()=>!!l.value.share.isRequireReadReceipt),ir(u=>{const{payload:{body:{bReceiveOk:p}}}=u;p&&_t(b2)}),Gr(qt)),handleVideoShareChangedAsPrivilegeChangedEpic:(i,l)=>Zn(i,Sc).pipe(En(u=>{var p;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.lockShare)}),zn(u=>{const{payload:{body:{lockShare:p}}}=u,{share:{isOptimizedForSharedVideo:_,isSharingToBreakoutRoom:y},audio:{isSharingAudio:C},meeting:{userId:I}}=l.value,O=[];return p===Qu.MultipleShare&&_&&(wl.startSharing(I,{bShareAudio:C,bShareToBO:y,bShareVideo:!1}),Mi.getInstance().switchSharingMode(bv.Normal),O.push(Jh(!1))),Dn(O)})),handleShareQosDataEpic:(i,l)=>Ei(i,er.ShareQosData).pipe(Un(l),gt(u=>{var p;let[_,y]=u;const{meeting:{isWebinar:C},media:{sharingEncodeStatus:I,sharingDecodeStatus:O},share:{status:D,isReceiveSharing:B},participants:{xmppAttendeeList:P}}=y;let F=EC(y).length>0;C&&(F=F||Boolean(P.length));const ie=B&&"success"===O;return null!==(p=_.payload.data)&&void 0!==p&&p.encoding?D!==Y.ShareStatus.End&&"success"===I&&F?(_t(Hh,_.payload),sf(_.payload)):sf(pm):ie?(_t(Hh,_.payload),$h(_.payload)):$h(pm)}))});function gu(i){for(var l=arguments.length,u=Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];throw Error("[Immer] minified error nr: "+i+(u.length?" "+u.map(function(_){return"'"+_+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function np(i){return!!i&&!!i[wc]}function Tm(i){var l;return!!i&&(function(u){if(!u||"object"!=typeof u)return!1;var p=Object.getPrototypeOf(u);if(null===p)return!0;var _=Object.hasOwnProperty.call(p,"constructor")&&p.constructor;return _===Object||"function"==typeof _&&Function.toString.call(_)===e_}(i)||Array.isArray(i)||!!i[SR]||!(null===(l=i.constructor)||void 0===l||!l[SR])||oI(i)||$g(i))}function Jg(i,l,u){void 0===u&&(u=!1),0===lb(i)?(u?Object.keys:fI)(i).forEach(function(p){u&&"symbol"==typeof p||l(p,i[p],i)}):i.forEach(function(p,_){return l(_,p,i)})}function lb(i){var l=i[wc];return l?l.i>3?l.i-4:l.i:Array.isArray(i)?1:oI(i)?2:$g(i)?3:0}function db(i,l){return 2===lb(i)?i.has(l):Object.prototype.hasOwnProperty.call(i,l)}function $v(i,l,u){var p=lb(i);2===p?i.set(l,u):3===p?(i.delete(l),i.add(u)):i[l]=u}function oI(i){return hI&&i instanceof Map}function $g(i){return Zg&&i instanceof Set}function gf(i){return i.o||i.t}function ih(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var l=dB(i);delete l[wc];for(var u=fI(l),p=0;p<u.length;p++){var _=u[p],y=l[_];!1===y.writable&&(y.writable=!0,y.configurable=!0),(y.get||y.set)&&(l[_]={configurable:!0,writable:!0,enumerable:y.enumerable,value:i[_]})}return Object.create(Object.getPrototypeOf(i),l)}function Xv(i,l){return void 0===l&&(l=!1),Rm(i)||np(i)||!Tm(i)||(lb(i)>1&&(i.set=i.add=i.clear=i.delete=sI),Object.freeze(i),l&&Jg(i,function(u,p){return Xv(p,!0)},!0)),i}function sI(){gu(2)}function Rm(i){return null==i||"object"!=typeof i||Object.isFrozen(i)}function rp(i){var l=dP[i];return l||gu(18,i),l}function hb(){return Xg}function aI(i,l){l&&(rp("Patches"),i.u=[],i.s=[],i.v=l)}function cI(i){uI(i),i.p.forEach(gR),i.p=null}function uI(i){i===Xg&&(Xg=i.l)}function Zv(i){return Xg={p:[],l:Xg,h:i,m:!0,_:0}}function gR(i){var l=i[wc];0===l.i||1===l.i?l.j():l.O=!0}function uP(i,l){l._=l.p.length;var u=l.p[0],p=void 0!==i&&i!==u;return l.h.g||rp("ES5").S(l,i,p),p?(u[wc].P&&(cI(l),gu(4)),Tm(i)&&(i=pb(l,i),l.l||lI(l,i)),l.u&&rp("Patches").M(u[wc].t,i,l.u,l.s)):i=pb(l,u,[]),cI(l),l.u&&l.v(l.u,l.s),i!==bR?i:void 0}function pb(i,l,u){if(Rm(l))return l;var p=l[wc];if(!p)return Jg(l,function(y,C){return _R(i,p,l,y,C,u)},!0),l;if(p.A!==i)return l;if(!p.P)return lI(i,p.t,!0),p.t;if(!p.I){p.I=!0,p.A._--;var _=4===p.i||5===p.i?p.o=ih(p.k):p.o;Jg(3===p.i?new Set(_):_,function(y,C){return _R(i,p,_,y,C,u)}),lI(i,_,!1),u&&i.u&&rp("Patches").R(p,u,i.u,i.s)}return p.o}function _R(i,l,u,p,_,y){if(np(_)){var C=pb(i,_,y&&l&&3!==l.i&&!db(l.D,p)?y.concat(p):void 0);if($v(u,p,C),!np(C))return;i.m=!1}if(Tm(_)&&!Rm(_)){if(!i.h.F&&i._<1)return;pb(i,_),l&&l.A.l||lI(i,_)}}function lI(i,l,u){void 0===u&&(u=!1),i.h.F&&i.m&&Xv(l,u)}function vR(i,l){var u=i[wc];return(u?gf(u):i)[l]}function lP(i,l){if(l in i)for(var u=Object.getPrototypeOf(i);u;){var p=Object.getOwnPropertyDescriptor(u,l);if(p)return p;u=Object.getPrototypeOf(u)}}function AR(i){i.P||(i.P=!0,i.l&&AR(i.l))}function yR(i){i.o||(i.o=ih(i.t))}function fb(i,l,u){var p=oI(l)?rp("MapSet").N(l,u):$g(l)?rp("MapSet").T(l,u):i.g?function(_,y){var C=Array.isArray(_),I={i:C?1:0,A:y?y.A:hb(),P:!1,I:!1,D:{},l:y,t:_,k:null,o:null,j:null,C:!1},O=I,D=t_;C&&(O=[I],D=Om);var B=Proxy.revocable(O,D),P=B.revoke,F=B.proxy;return I.k=F,I.j=P,F}(l,u):rp("ES5").J(l,u);return(u?u.A:hb()).p.push(p),p}function Lr(i,l){switch(l){case 2:return new Map(i);case 3:return Array.from(i)}return ih(i)}var ER,Xg,dI=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),hI=typeof Map<"u",Zg=typeof Set<"u",pI=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",bR=dI?Symbol.for("immer-nothing"):((ER={})["immer-nothing"]=!0,ER),SR=dI?Symbol.for("immer-draftable"):"__$immer_draftable",wc=dI?Symbol.for("immer-state"):"__$immer_state",e_=""+Object.prototype.constructor,fI=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,dB=Object.getOwnPropertyDescriptors||function(i){var l={};return fI(i).forEach(function(u){l[u]=Object.getOwnPropertyDescriptor(i,u)}),l},dP={},t_={get:function(i,l){if(l===wc)return i;var _,I,O,u=gf(i);if(!db(u,l))return _=i,(O=lP(u,l))?"value"in O?O.value:null===(I=O.get)||void 0===I?void 0:I.call(_.k):void 0;var p=u[l];return i.I||!Tm(p)?p:p===vR(i.t,l)?(yR(i),i.o[l]=fb(i.A.h,p,i)):p},has:function(i,l){return l in gf(i)},ownKeys:function(i){return Reflect.ownKeys(gf(i))},set:function(i,l,u){var C,I,p=lP(gf(i),l);if(p?.set)return p.set.call(i.k,u),!0;if(!i.P){var _=vR(gf(i),l),y=_?.[wc];if(y&&y.t===u)return i.o[l]=u,i.D[l]=!1,!0;if(((C=u)===(I=_)?0!==C||1/C==1/I:C!=C&&I!=I)&&(void 0!==u||db(i.t,l)))return!0;yR(i),AR(i)}return i.o[l]===u&&"number"!=typeof u&&(void 0!==u||l in i.o)||(i.o[l]=u,i.D[l]=!0,!0)},deleteProperty:function(i,l){return void 0!==vR(i.t,l)||l in i.t?(i.D[l]=!1,yR(i),AR(i)):delete i.D[l],i.o&&delete i.o[l],!0},getOwnPropertyDescriptor:function(i,l){var u=gf(i),p=Reflect.getOwnPropertyDescriptor(u,l);return p&&{writable:!0,configurable:1!==i.i||"length"!==l,enumerable:p.enumerable,value:u[l]}},defineProperty:function(){gu(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){gu(12)}},Om={};Jg(t_,function(i,l){Om[i]=function(){return arguments[0]=arguments[0][0],l.apply(this,arguments)}}),Om.deleteProperty=function(i,l){return Om.set.call(this,i,l,void 0)},Om.set=function(i,l,u){return t_.set.call(this,i[0],l,u,i[0])};var Dm=function(){function i(u){var p=this;this.g=pI,this.F=!0,this.produce=function(_,y,C){if("function"==typeof _&&"function"!=typeof y){var I=y;y=_;var O=p;return function(oe){var ve=this;void 0===oe&&(oe=I);for(var Ae=arguments.length,Te=Array(Ae>1?Ae-1:0),Be=1;Be<Ae;Be++)Te[Be-1]=arguments[Be];return O.produce(oe,function(Q){var tt;return(tt=y).call.apply(tt,[ve,Q].concat(Te))})}}var D;if("function"!=typeof y&&gu(6),void 0!==C&&"function"!=typeof C&&gu(7),Tm(_)){var B=Zv(p),P=fb(p,_,void 0),F=!0;try{D=y(P),F=!1}finally{F?cI(B):uI(B)}return typeof Promise<"u"&&D instanceof Promise?D.then(function(oe){return aI(B,C),uP(oe,B)},function(oe){throw cI(B),oe}):(aI(B,C),uP(D,B))}if(!_||"object"!=typeof _){if(void 0===(D=y(_))&&(D=_),D===bR&&(D=void 0),p.F&&Xv(D,!0),C){var Z=[],ie=[];rp("Patches").M(_,D,Z,ie),C(Z,ie)}return D}gu(21,_)},this.produceWithPatches=function(_,y){if("function"==typeof _)return function(D){for(var B=arguments.length,P=Array(B>1?B-1:0),F=1;F<B;F++)P[F-1]=arguments[F];return p.produceWithPatches(D,function(Z){return _.apply(void 0,[Z].concat(P))})};var C,I,O=p.produce(_,y,function(D,B){C=D,I=B});return typeof Promise<"u"&&O instanceof Promise?O.then(function(D){return[D,C,I]}):[O,C,I]},"boolean"==typeof u?.useProxies&&this.setUseProxies(u.useProxies),"boolean"==typeof u?.autoFreeze&&this.setAutoFreeze(u.autoFreeze)}var l=i.prototype;return l.createDraft=function(u){var y;Tm(u)||gu(8),np(u)&&(np(y=u)||gu(22,y),u=function C(I){if(!Tm(I))return I;var O,D=I[wc],B=lb(I);if(D){if(!D.P&&(D.i<4||!rp("ES5").K(D)))return D.t;D.I=!0,O=Lr(I,B),D.I=!1}else O=Lr(I,B);return Jg(O,function(P,F){var Z,ie;D&&(ie=P,(2===lb(Z=D.t)?Z.get(ie):Z[ie])===F)||$v(O,P,C(F))}),3===B?new Set(O):O}(y));var p=Zv(this),_=fb(this,u,void 0);return _[wc].C=!0,uI(p),_},l.finishDraft=function(u,p){var _=(u&&u[wc]).A;return aI(_,p),uP(void 0,_)},l.setAutoFreeze=function(u){this.F=u},l.setUseProxies=function(u){u&&!pI&&gu(20),this.g=u},l.applyPatches=function(u,p){var _;for(_=p.length-1;_>=0;_--){var y=p[_];if(0===y.path.length&&"replace"===y.op){u=y.value;break}}_>-1&&(p=p.slice(_+1));var C=rp("Patches").$;return np(u)?C(u,p):this.produce(u,function(I){return C(I,p)})},i}(),Tl=new Dm,Et=Tl.produce;Tl.produceWithPatches.bind(Tl),Tl.setAutoFreeze.bind(Tl),Tl.setUseProxies.bind(Tl),Tl.applyPatches.bind(Tl),Tl.createDraft.bind(Tl),Tl.finishDraft.bind(Tl);const hP={ssrc:0,status:Y.ShareStatus.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:Qu.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isRemoteControlApproved:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1,statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}}},hB=Fr({[`${qh}`]:Et((i,l)=>{let{payload:u}=l;i.sharePrivilege=u}),[`${zu}`]:Et((i,l)=>{let{payload:u}=l;i.isRemoteSharingActive=1===u.bStatus,i.activeNodeId=u.activeNodeID,i.activeSsrc=u.ssrc}),[`${TC}`]:Et((i,l)=>{let{payload:u}=l;i.isReceiveSharing=u}),[`${B2}`]:Et((i,l)=>{let{payload:u}=l;i.isChromeExtensionInstalled=u}),[`${QT}`]:Et((i,l)=>{let{payload:u}=l;i.shareDimension=$t({},u)}),[`${eh}`]:Et((i,l)=>{let{payload:u}=l;i.status=u}),[`${hu}`]:Et((i,l)=>{let{payload:u}=l;i.ssrc=u}),[`${RC}`]:Et((i,l)=>{let{payload:u}=l;i.shareQuality=u}),[`${HT}`]:Et((i,l)=>{let{payload:u}=l;i.receivedShareDimension=$t({},u)}),[`${WL}`]:Et((i,l)=>{let{payload:u}=l;i.isRemoteControlApproved=u}),[`${WE}`]:Et((i,l)=>{let{payload:u}=l;i.isGrabRemoteControl=u}),[`${OC}`]:Et((i,l)=>{let{payload:u}=l;i.isVerifiedRenderCanvasAfterFailover=u}),[`${DC}`]:Et((i,l)=>{let{payload:u}=l;i.isVerifiedCaptureCanvasAfterFailover=u}),[`${F2}`]:Et((i,l)=>{let{payload:u}=l;i.isSDKGrabControl=u}),[`${kC}`]:Et((i,l)=>{let{payload:u}=l;i.isReceiveSharingFromMainSession=u}),[`${KE}`]:Et((i,l)=>{let{payload:u}=l;i.isSharingToBreakoutRoom=u}),[`${PC}`]:Et((i,l)=>{let{payload:u}=l;i.isSharingWithSecondCamera=u}),[`${GT}`]:Et((i,l)=>{let{payload:u}=l;i.secondCameraId=u}),[`${WT}`]:Et((i,l)=>{let{payload:u}=l;i.isRequireReadReceipt=u}),[`${Jh}`]:Et((i,l)=>{let{payload:u}=l;i.isOptimizedForSharedVideo=u}),[`${sf}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.encode=u.data}),[`${$h}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.decode=u.data}),[`${zE}`]:()=>$t($t({},hP),{},{isVerifiedRenderCanvasAfterFailover:!1,isVerifiedCaptureCanvasAfterFailover:!1})},hP),mI=Ls(ub),Rl=mo.createAgent();var ip=Object.freeze({__proto__:null,joinMeetingWelcomeEpic:i=>Zn(i,0).pipe(ir(l=>{var u;if("READY"===(null===(u=l.payload.body)||void 0===u?void 0:u.status)){const p=Dr.get(Gi.WebclientMeetingToken);p&&Rl.joinMeeting(p)}}),Gr(qt)),joinMeetingSuccessfulEpic:(i,l)=>Zn(i,4098).pipe(Un(l),mu(u=>{let[p,_]=u;const{payload:{body:{res:y,userID:C,zoomID:I,mn:O,participantID:D,disableAqos:B,disableVqos:P,meetingtoken:F,role:Z}}}=p,{meeting:{isWebinar:ie,userEmail:oe,userName:ve,isMeetingReset:Ae,meetingOptions:Te,zlkJwtToken:Be,cv:Q,apiKey:tt,zsk:dt,signatureType:it},media:{mediaConstraints:ft,assetsPath:Kt}}=_;if(id.CONF_SUCCESS===y){const{WebclientParticipantId:en,WebclientZoomId:zt,WebclientUserEmail:Ot,WebclientUserName:_n,WebclientMeetingToken:Gn}=Gi;Dr.set(zt,I,wi.SessionStorage),Dr.set(en,D,wi.SessionStorage),oe&&Dr.set(Ot,oe,wi.SessionStorage),Dr.set(_n,ve,wi.SessionStorage),F&&Dr.set(Gn,F,wi.SessionStorage),dt&&Rl.sendSdkKeyToMonitor(it,tt,C);const Dt=[dv(p.payload.body),o2(performance.now())];Mi.getInstance().init(),Ae&&(Dt.push(r2(!1)),void 0!==ft&&void 0!==Kt&&Dt.push(vl())),(Te.isPollingEnabled||Be||ie)&&Dt.push(Uu());let at=!P;const Ve=!B;return Be&&Xk(Q,"1.3.0")<0&&(at=!1),Dt.unshift(s2({audioQos:Ve,videoQos:at})),(Z&va.Owner)===va.Owner&&(_t(Hs,{reason:"dont support assisnt join through widget",errorCode:-1}),Rl.leaveMeeting()),_t(um,{meetingNumber:O}),Dn(Dt)}return id.CONF_FAIL_CONFLOCKED===y?_t(Hs,DS(y)):id.CONF_FAIL_CONF_USER_FULL===y?_t(Hs,Object.assign({},DS(y),{lmUrl:p.payload.body.lmURL})):(id.CONF_FAIL_MEETING_OVER===y||id.CONF_RESULT_MMR_IB_REJECT===y||id.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===y||[id.CONF_FAIL_HAS_BEEN_REMOVED,id.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(y),_t(Hs,DS(y))),Dn(ff(_,!1))})),handleMeetingAttributeChangeEpic:(i,l)=>Zn(i,Sc).pipe(Un(l),gt(u=>{let[p,_]=u;const{payload:{body:y}}=p,{meeting:{zoomId:C,encType:I,gcmSessinKey:O}}=_;if(void 0!==y?.encryptKey&&ju.init(C,y.encryptKey,I),void 0!==y?.gatewayKey){const D=Mi.getInstance(),[,B,P]=y.gatewayKey.split(".");D.sendUserNodeList([{userid:Number(B),sn:P&&Cs(P)}],O)}return _t(gE,y),NS(y)})),handleMeetingEndEpic:(i,l)=>Zn(i,7939).pipe(Un(l),zn(u=>{let[p,_]=u;const{payload:{body:y}}=p;if(void 0!==y.reason){if(Lc.Reconnect===y.reason)return _t(Za,OS.WaitingRoomFailover===y.subReason?{reason:Zs.OnHold}:{reason:Zs.Failover}),rr(wo(xo.NormalCase));Lc.KickedByHost===y.reason?_t(lm,{reason:"kicked by host"}):[Lc.EndByHost,Lc.EndByNone,Lc.EndByAdmin,Lc.EndByHostStartAnotherMeeting].includes(y.reason)?_t(lm,{reason:"ended by host"}):Lc.FreeMeetingTimeout===y.reason&&_t(lm,{reason:"free meeting ended"})}return _.meeting.isMeetingReset?qt:Dn(ff(_,!1))})),meetingFailoverEpic:(i,l)=>i.pipe(Zr(`${wo}`),Un(l),zn(u=>{let[,p]=u;const _=ff(p,!0);let y;if(p.meeting.zlkJwtToken){const C=function(O){if(O){const{meeting:{topic:D,passWord:B,userName:P,zlkJwtToken:F,lang:Z,cv:ie,customerKey:oe}}=O;return{topic:D,passWord:B,userName:P,zlkJwtToken:F,lang:Z,cv:ie,customerKey:oe}}return null}(p);y=rr(nE({topic:C?.topic,password:C?.passWord,userName:C?.userName,zlk:C?.zlkJwtToken,lang:C?.lang,cv:C?.cv,customerKey:C?.customerKey})).pipe(yo(1e3))}else{const C=function(I){const{meeting:{apiKey:O,signature:D,signatureType:B,meetingNumber:P,userName:F,lang:Z,passWord:ie,userEmail:oe,sdkUrl:ve,sdkOrigin:Ae,proxy:Te,cv:Be,ztk:Q,zsk:tt,tk:dt}}=I,it=Q||sessionStorage.getItem(Gi.WebclientZtk),ft=tt||sessionStorage.getItem(Gi.WebclientZsk);return{apiKey:O,signature:D,signatureType:B,meetingNumber:P,userName:F,lang:Z,passWord:ie,userEmail:oe,sdkUrl:ve,sdkOrigin:Ae,proxy:Te,cv:Be,ztk:it,zsk:ft,tk:dt||sessionStorage.getItem(Gi.WebclientTk),ulsm:ft?1:0}}(p);y=rr(kL(C)).pipe(yo(1e3))}return Uy(Dn(_),y)})),hostChangeEpic:i=>Bs(i,7940).pipe(ir(l=>{_t("MEETING_HOST_CHANGE_INDICATION",l.payload.body.bHost)}),gt(l=>$a(l.payload.body))),cohostChangeEpic:i=>Bs(i,7941).pipe(ir(l=>{_t("MEETING_COHOST_CHANGE_INDICATION",l.payload.body.bCoHost)}),gt(l=>n2(l.payload.body))),setMeetingOptEpic:i=>Bs(i,7945).pipe(ir(l=>{const{payload:{body:{opt:u}}}=l;Dr.set(Gi.WebclientOpt,u,wi.SessionStorage)}),Gr(qt)),setMeetingOnHoldEpic:(i,l)=>Zn(i,7942).pipe(ir(u=>{const{payload:{body:{bHold:p}}}=u;Dr.set(Gi.WebclientIsOnHold,p?1:0,wi.SessionStorage),_t(mE,p)}),Un(l),zn(u=>{let[p,_]=u;const y=[Bh(p.payload.body.bHold)];if(p.payload.body.bHold){const C=Kr(_);if(C){y.push(Up({audio:C.audio,video:C.bVideoOn,muted:C.muted}));const I=Mi.getInstance();if("computer"===C.audio&&(I.leaveComputerAudio(),Rl.joinOrLeaveVoip(!1)),C.bVideoOn&&I.stopCaptureVideo(),C.sharerOn&&(Rl.stopSharing(C.userId),I.stopDesktopSharing(),y.push(eh(Y.ShareStatus.End))),_.video&&_.video.subscribedVideoList.length>0&&_.video.subscribedVideoList.forEach(O=>{Rl.unsubscribeVideo(O)}),_.share&&_.share.isReceiveSharing){const O=_.share.activeNodeId;_.share.isRemoteControlApproved&&(Rl.sharingRequestRemoteControl(O,!1),I.stopRemoteControl()),Rl.unsubscribeSharing(O),I.stopRenderSharing()}}}return Dn(y)})),setMeetingDataCenterRegionEpic:i=>Zn(i,7954).pipe(gt(l=>aT(l.payload.body))),claimHostResponseEpic:i=>Zn(i,4216).pipe(ir(l=>{_t("MEETING_CLAIM_HOST_KEY_RESPONSE",l.payload.body.bresult)}),Gr(qt)),leaveMeetingEpic:(i,l)=>i.pipe(Zr(`${Gd}`,`${uv}`),Un(l),zn(u=>{let[p,_]=u;return p.type===`${Gd}`?(Rl.leaveMeeting(),_t(lm,{})):p.type===`${uv}`&&(Rl.endMeeting(),_t(lm,{})),Dn(ff(_,!1))})),versionUpgradeEpic:i=>Zn(i,2).pipe(ir(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),Gr(qt)),versionBlockEpic:i=>Zn(i,1).pipe(ir(l=>{const{payload:{body:{upgradeVersion:u}}}=l,p=DS(1e4);if(p&&p.reason){const _=p.reason.replace(/{(\d+)}/g,()=>u);p.reason=_}_t(Hs,p)}),Gr(qt)),handleSharePronounChangeEpic:i=>Zn(i,4265).pipe(gt(l=>{const{payload:{body:u}}=l,{nShareType:p}=u;return _t(mT,{userSharePronounType:p}),Hi(p)})),handleMeetingTokenEpic:i=>Zn(i,4128).pipe(ir(l=>{const{payload:{body:{meetingtoken:u}}}=l,{WebclientMeetingToken:p}=Gi;u&&Dr.set(p,u,wi.SessionStorage)}),Gr(qt))});let eA,qo,km,Ju,oc,Xi;(function(i){i[i.AttendeeToAllPanelist=1]="AttendeeToAllPanelist",i[i.PanelistToAttendee=3]="PanelistToAttendee"})(eA||(eA={})),function(i){i.Add="add",i.List="list",i.Remove="memberremove",i.rename="rename",i.update="UPDATE"}(qo||(qo={})),function(i){i.PutDownHands="putdownhands",i.LowerHand="lowerhand"}(km||(km={})),function(i){i.Open="open",i.Message="message",i.Error="error",i.Close="close"}(Ju||(Ju={}));let oh=(()=>{class i{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new i),this.xmppInstance}on(u,p){let _=this.eventHandlers.get(u);_||(_=[]),_.push(p),this.eventHandlers.set(u,_)}off(u,p){const _=this.eventHandlers.get(u);if(_){const y=_.filter(C=>C!==p);this.eventHandlers.set(u,y)}}emit(u,p){const _=this.eventHandlers.get(u);_&&_ instanceof Array&&_.slice(0).forEach(y=>{try{y(p)}catch(C){console.error(C)}})}sendMessageToRwg(u){this.seq+=1;const p=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:p}))),p}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.emit(Ju.Open,u)}),this.websocket.addEventListener("message",u=>{const{data:p}=u;var _;if(p instanceof ArrayBuffer)0===new Uint8Array(p)[0]&&(null===(_=this.websocket)||void 0===_||_.send(p));else try{this.emit(Ju.Message,JSON.parse(p))}catch{console.warn("Unsupported format",p)}}),this.websocket.addEventListener("close",u=>{this.emit(Ju.Close,u)}),this.websocket.addEventListener("error",u=>{this.emit(Ju.Error,u)}))}join(u){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:u}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(u){return{seq:this.sendMessageToRwg({evt:24578,jids:u||[]})}}sendWebinarMseeage(u,p,_){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:u,jid:p?[p]:[],type:_,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(u,p,_){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:p.jid,question_attendeename:p.displayName,question_text:p.questionText,question_id:p.questionId,question_anonymous:p.isAnonymous,question_time:p.questionTime,text:u,isPrivate:_}})}}answerOnline(u,p){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,isLiveStart:p}})}}dismissQuestion(u){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!1}})}}deleteQuestion(u){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:u,bDelete:!0}})}}deleteComment(u){return{seq:this.sendMessageToRwg({body:{comment_id:u,bDelete:!0},evt:24616})}}reopenQuestion(u){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!0},evt:24590})}}askQuestion(u,p){let _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3?arguments[3]:void 0;const C=rT();return{seq:this.sendMessageToRwg({body:{id:C,text:u,isAnonymous:_,bAllowAttendeeViewAllQuestion:y,name:p},evt:24592}),questionId:C}}upOrDownVote(u,p){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bUpVote:p},evt:24598})}}rename(u,p){return{seq:this.sendMessageToRwg({body:{jid:u,displayName:p},evt:24600})}}setSkinTome(u){return{seq:this.sendMessageToRwg({body:{skinTone:u},evt:24618})}}}return i.xmppInstance=null,i})();var tA=Object.freeze({__proto__:null,startIdleTimerEpic:(i,l)=>i.pipe(Zr(`${dv}`),Un(l),En(u=>{let[,p]=u;return void 0!==p.meeting.zlkJwtToken}),oo(()=>(oc&&oc.complete(),oc=new Fe,Xi=fg(6e4).pipe(gt(()=>performance.now())).subscribe(oc),oc.pipe(gt(u=>kS(u)))))),terminateIdleTimerEpic:i=>i.pipe(Zr(`${Qd}`)).pipe(ir(()=>{oc&&(oc.complete(),Xi.unsubscribe())}),Gr(qt)),idleCheckingEpic:(i,l)=>i.pipe(Zr(`${kS}`),Un(l),zn(u=>{var p;let[_,y]=u;const{meeting:{idleStartTime:C,sessionIdleTimeoutMins:I,isOriginHost:O},participants:{attendeesList:D,xmppAttendeeList:B},recording:P,breakoutRoom:F}=y,Z=_.payload,ie=[];if(1===D.length&&0===B.length&&(null==F||null===(p=F.currentRoom)||void 0===p?void 0:p.status)!==hr.InRoom&&P?.cmrStatus!==ss.Start)if(C){const oe=O&&Ws(D[0].userRole)?I:40;Z-C>60*oe*1e3&&(console.warn(`No active for ${oe} minutes, will end the session.`),ie.push(uv()),_c(500).subscribe(()=>{Nv()}))}else ie.push(hv(Z));else ie.push(hv(void 0));return Dn(ie)})),resetIdleStartTimeEpic:(i,l)=>i.pipe(Zr(`${rd}`),En(u=>[Do,Sc].includes(u.payload.evt)&&void 0!==l.value.meeting.idleStartTime),Ht(fl),zn(()=>{var u;const{participants:{attendeesList:p,xmppAttendeeList:_},recording:y,breakoutRoom:C}=l.value,I=[];return(p.length>1||_.length>0||y?.cmrStatus===ss.Start||(null==C||null===(u=C.currentRoom)||void 0===u?void 0:u.status)===hr.InRoom)&&I.push(hv(void 0)),Dn(I)})),resetIdleStartTimeAfterLeaveMeetingEpic:i=>i.pipe(Zr(`${Gd}`,`${uv}`),zo(hv(void 0)))});const Pm=mo.createAgent();var n_=Object.freeze({__proto__:null,startReportFailoverReasonEpic:(i,l)=>i.pipe(Zr(`${lv}`),oo(()=>{const u=0===l.value.meeting.failover.joinMeetingSuccessTimestamp&&!!Dr.get(Gi.WebclientZoomId);return i.pipe(Zr(`${dv}`),is(1),zn(()=>{const p=[],_=Dr.get(Gi.WebclientFailoverCount)||0;let{meeting:{failover:{count:y,reason:C,interval:I}}}=l.value;const{meeting:{pingRWCTimestamp:O}}=l.value;u&&(y=_+1,C=xo.RefreshPage,I=0,Dr.set(Gi.WebclientFailoverCount,y,wi.SessionStorage),p.push(iE({count:y,reason:C,interval:I})));const D=performance.now();let B=`WCL_M, JMCT(${D-O})`;return y>0&&C!==xo.NormalCase&&(B=`${B},FAILOVER(${y},${C},${(I/1e3).toFixed(1)})`),Pm.sendRWGConnectionPerformance(B),p.push(Xa(),bc(D)),Dn(p)}))})),recordFailoverReasonEpic:(i,l)=>i.pipe(Zr(`${wo}`),zn(u=>{const{payload:p}=u,{meeting:{failover:{joinMeetingSuccessTimestamp:_,isCurrentFailoverRecorded:y}}}=l.value,C=[];if(!y){let I=Dr.get(Gi.WebclientFailoverCount)||0;p!==xo.NormalCase&&(I+=1,Dr.set(Gi.WebclientFailoverCount,I,wi.SessionStorage));const O=performance.now()-_;C.push(iE({reason:p,count:I,interval:O}))}return Dn(C)}))});let Aa=null;var nA=Object.freeze({__proto__:null,startStayAwakeEpic:(i,l)=>i.pipe(Zr(`${dv}`),Un(l),En(u=>{let[,p]=u;return!!p.meeting.stayAwake}),ir(V(function*(){try{Aa&&Aa.release().then(()=>{Aa=null}),"wakeLock"in navigator&&(Aa=yield navigator.wakeLock.request("screen"),Aa.addEventListener("release",()=>{}))}catch{}})),oo(()=>Ya(document,"visibilitychange").pipe(zn(V(function*(){"visible"===document.visibilityState?(Aa&&Aa.release().then(()=>{Aa=null}),"wakeLock"in navigator&&(Aa=yield navigator.wakeLock.request("screen"))):Aa&&Aa.release().then(()=>{Aa=null})})),Gr(qt)))),cancelStayAwakeEpic:i=>i.pipe(Zr(`${Qd}`)).pipe(ir(()=>{Aa&&Aa.release().then(()=>{Aa=null})}),Gr(qt))}),rA=typeof window<"u"&&window,iA=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,oA=typeof global<"u"&&global,_u=rA||oA||iA;function pP(i,l){return void 0===l&&(l=null),new Nm({method:"GET",url:i,headers:l})}function mb(i,l,u){return new Nm({method:"POST",url:i,body:l,headers:u})}function fP(i,l){return new Nm({method:"DELETE",url:i,headers:l})}function mP(i,l,u){return new Nm({method:"PUT",url:i,body:l,headers:u})}function gP(i,l,u){return new Nm({method:"PATCH",url:i,body:l,headers:u})}!function(){if(!_u)throw new Error("RxJS could not find any global context (window, self, global)")}();var gI=gt(function(i,l){return i.response});function _P(i,l){return gI(new Nm({method:"GET",url:i,responseType:"json",headers:l}))}var Nm=function(i){function l(p){var _=i.call(this)||this,y={async:!0,createXHR:function(){return this.crossDomain?function(){if(_u.XMLHttpRequest)return new _u.XMLHttpRequest;if(_u.XDomainRequest)return new _u.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(_u.XMLHttpRequest)return new _u.XMLHttpRequest;var I=void 0;try{for(var O=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],D=0;D<3;D++)try{if(new _u.ActiveXObject(I=O[D]))break}catch{}return new _u.ActiveXObject(I)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof p)y.url=p;else for(var C in p)p.hasOwnProperty(C)&&(y[C]=p[C]);return _.request=y,_}var u;return he(l,i),l.prototype._subscribe=function(p){return new pB(p,this.request)},l.create=((u=function(p){return new l(p)}).get=pP,u.post=mb,u.delete=fP,u.put=mP,u.patch=gP,u.getJSON=_P,u),l}(Me),pB=function(i){function l(u,p){var _=i.call(this,u)||this;_.request=p,_.done=!1;var y=p.headers=p.headers||{};return p.crossDomain||_.getHeader(y,"X-Requested-With")||(y["X-Requested-With"]="XMLHttpRequest"),_.getHeader(y,"Content-Type")||_u.FormData&&p.body instanceof _u.FormData||void 0===p.body||(y["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),p.body=_.serializeBody(p.body,_.getHeader(p.headers,"Content-Type")),_.send(),_}return he(l,i),l.prototype.next=function(u){this.done=!0;var p,_=this,y=_.xhr,C=_.request,I=_.destination;try{p=new vP(u,y,C)}catch(O){return I.error(O)}I.next(p)},l.prototype.send=function(){var u=this.request,p=this.request,_=p.user,y=p.method,C=p.url,I=p.async,O=p.password,D=p.headers,B=p.body;try{var P=this.xhr=u.createXHR();this.setupEvents(P,u),_?P.open(y,C,I,_,O):P.open(y,C,I),I&&(P.timeout=u.timeout,P.responseType=u.responseType),"withCredentials"in P&&(P.withCredentials=!!u.withCredentials),this.setHeaders(P,D),B?P.send(B):P.send()}catch(F){this.error(F)}},l.prototype.serializeBody=function(u,p){if(!u||"string"==typeof u||_u.FormData&&u instanceof _u.FormData)return u;if(p){var _=p.indexOf(";");-1!==_&&(p=p.substring(0,_))}switch(p){case"application/x-www-form-urlencoded":return Object.keys(u).map(function(y){return encodeURIComponent(y)+"="+encodeURIComponent(u[y])}).join("&");case"application/json":return JSON.stringify(u);default:return u}},l.prototype.setHeaders=function(u,p){for(var _ in p)p.hasOwnProperty(_)&&u.setRequestHeader(_,p[_])},l.prototype.getHeader=function(u,p){for(var _ in u)if(_.toLowerCase()===p.toLowerCase())return u[_]},l.prototype.setupEvents=function(u,p){var _,y,C=p.progressSubscriber;function I(B){var P,Z=I.subscriber,ie=I.progressSubscriber,oe=I.request;ie&&ie.error(B);try{P=new Vn(this,oe)}catch(ve){P=ve}Z.error(P)}function O(B){}function D(B){var F=D.subscriber,Z=D.progressSubscriber,ie=D.request;if(4===this.readyState){var oe=1223===this.status?204:this.status;if(0===oe&&(oe=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),oe<400)Z&&Z.complete(),F.next(B),F.complete();else{Z&&Z.error(B);var Ae=void 0;try{Ae=new ar("ajax error "+oe,this,ie)}catch(Te){Ae=Te}F.error(Ae)}}}u.ontimeout=I,I.request=p,I.subscriber=this,I.progressSubscriber=C,u.upload&&"withCredentials"in u&&(C&&(_=function(B){_.progressSubscriber.next(B)},_u.XDomainRequest?u.onprogress=_:u.upload.onprogress=_,_.progressSubscriber=C),u.onerror=y=function(B){var P,Z=y.progressSubscriber,ie=y.subscriber,oe=y.request;Z&&Z.error(B);try{P=new ar("ajax error",this,oe)}catch(ve){P=ve}ie.error(P)},y.request=p,y.subscriber=this,y.progressSubscriber=C),u.onreadystatechange=O,O.subscriber=this,O.progressSubscriber=C,O.request=p,u.onload=D,D.subscriber=this,D.progressSubscriber=C,D.request=p},l.prototype.unsubscribe=function(){var p=this.xhr;!this.done&&p&&4!==p.readyState&&"function"==typeof p.abort&&p.abort(),i.prototype.unsubscribe.call(this)},l}(Ie),vP=function(i,l,u){this.originalEvent=i,this.xhr=l,this.request=u,this.status=l.status,this.responseType=l.responseType||u.responseType,this.response=gb(this.responseType,l)},ar=function(){function i(l,u,p){return Error.call(this),this.message=l,this.name="AjaxError",this.xhr=u,this.request=p,this.status=u.status,this.responseType=u.responseType||p.responseType,this.response=gb(this.responseType,u),this}return i.prototype=Object.create(Error.prototype),i}();function gb(i,l){switch(i){case"json":return"response"in(u=l)?u.responseType?u.response:JSON.parse(u.response||u.responseText||"null"):JSON.parse(u.responseText||"null");case"xml":return l.responseXML;default:return"response"in l?l.response:l.responseText}var u}var sh,Vn=function(i,l){return ar.call(this,"ajax timeout",i,l),this.name="AjaxTimeoutError",this},CR=Nm.create,fB=new Uint8Array(16);function wn(){if(!sh&&!(sh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sh(fB)}var Qn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Eo(i){return"string"==typeof i&&Qn.test(i)}for(var Jo,Di,Qc,vu,Fo=[],sA=0;sA<256;++sA)Fo.push((sA+256).toString(16).substr(1));function IR(i,l,u){var p=(i=i||{}).random||(i.rng||wn)();if(p[6]=15&p[6]|64,p[8]=63&p[8]|128,l){u=u||0;for(var _=0;_<16;++_)l[u+_]=p[_];return l}return function(y){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=(Fo[y[C+0]]+Fo[y[C+1]]+Fo[y[C+2]]+Fo[y[C+3]]+"-"+Fo[y[C+4]]+Fo[y[C+5]]+"-"+Fo[y[C+6]]+Fo[y[C+7]]+"-"+Fo[y[C+8]]+Fo[y[C+9]]+"-"+Fo[y[C+10]]+Fo[y[C+11]]+Fo[y[C+12]]+Fo[y[C+13]]+Fo[y[C+14]]+Fo[y[C+15]]).toLowerCase();if(!Eo(I))throw TypeError("Stringified UUID is invalid");return I}(p)}(function(i){i[i.PLAIN=0]="PLAIN",i[i.RSA=1]="RSA",i[i.AESGCM256=2]="AESGCM256"})(Jo||(Jo={})),function(i){i[i.info=0]="info",i[i.debug=1]="debug",i[i.log=2]="log",i[i.warn=3]="warn",i[i.error=4]="error"}(Di||(Di={})),function(i){i[i.PROTECT_LOCAL_KEY=0]="PROTECT_LOCAL_KEY"}(Qc||(Qc={})),function(i){i.beforeInit="beforeInit",i.afterInit="afterInit",i.beforeLog="beforeLog",i.hitSizeLimit="hitSizeLimit",i.afterLog="afterLog",i.beforeReport="beforeReport",i.afterReport="afterReport"}(vu||(vu={}));class _b{constructor(){}}var co,aA={exports:{}},wR={exports:{}},AP=SS(Object.freeze({__proto__:null,default:{}}));wR.exports=(co=co||function(i,l){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&void 0!==ma&&ma.crypto&&(u=ma.crypto),!u)try{u=AP}catch{}var p=function(){if(u){if("function"==typeof u.getRandomValues)try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof u.randomBytes)try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},_=Object.create||function(){function oe(){}return function(ve){var Ae;return oe.prototype=ve,Ae=new oe,oe.prototype=null,Ae}}(),y={},C=y.lib={},I=C.Base={extend:function(oe){var ve=_(this);return oe&&ve.mixIn(oe),ve.hasOwnProperty("init")&&this.init!==ve.init||(ve.init=function(){ve.$super.init.apply(this,arguments)}),ve.init.prototype=ve,ve.$super=this,ve},create:function(){var oe=this.extend();return oe.init.apply(oe,arguments),oe},init:function(){},mixIn:function(oe){for(var ve in oe)oe.hasOwnProperty(ve)&&(this[ve]=oe[ve]);oe.hasOwnProperty("toString")&&(this.toString=oe.toString)},clone:function(){return this.init.prototype.extend(this)}},O=C.WordArray=I.extend({init:function(oe,ve){oe=this.words=oe||[],this.sigBytes=ve??4*oe.length},toString:function(oe){return(oe||B).stringify(this)},concat:function(oe){var ve=this.words,Ae=oe.words,Te=this.sigBytes,Be=oe.sigBytes;if(this.clamp(),Te%4)for(var Q=0;Q<Be;Q++)ve[Te+Q>>>2]|=(Ae[Q>>>2]>>>24-Q%4*8&255)<<24-(Te+Q)%4*8;else for(var dt=0;dt<Be;dt+=4)ve[Te+dt>>>2]=Ae[dt>>>2];return this.sigBytes+=Be,this},clamp:function(){var oe=this.words,ve=this.sigBytes;oe[ve>>>2]&=4294967295<<32-ve%4*8,oe.length=i.ceil(ve/4)},clone:function(){var oe=I.clone.call(this);return oe.words=this.words.slice(0),oe},random:function(oe){for(var ve=[],Ae=0;Ae<oe;Ae+=4)ve.push(p());return new O.init(ve,oe)}}),D=y.enc={},B=D.Hex={stringify:function(oe){for(var ve=oe.words,Ae=oe.sigBytes,Te=[],Be=0;Be<Ae;Be++){var Q=ve[Be>>>2]>>>24-Be%4*8&255;Te.push((Q>>>4).toString(16)),Te.push((15&Q).toString(16))}return Te.join("")},parse:function(oe){for(var ve=oe.length,Ae=[],Te=0;Te<ve;Te+=2)Ae[Te>>>3]|=parseInt(oe.substr(Te,2),16)<<24-Te%8*4;return new O.init(Ae,ve/2)}},P=D.Latin1={stringify:function(oe){for(var ve=oe.words,Ae=oe.sigBytes,Te=[],Be=0;Be<Ae;Be++)Te.push(String.fromCharCode(ve[Be>>>2]>>>24-Be%4*8&255));return Te.join("")},parse:function(oe){for(var ve=oe.length,Ae=[],Te=0;Te<ve;Te++)Ae[Te>>>2]|=(255&oe.charCodeAt(Te))<<24-Te%4*8;return new O.init(Ae,ve)}},F=D.Utf8={stringify:function(oe){try{return decodeURIComponent(escape(P.stringify(oe)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(oe){return P.parse(unescape(encodeURIComponent(oe)))}},Z=C.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(oe){"string"==typeof oe&&(oe=F.parse(oe)),this._data.concat(oe),this._nDataBytes+=oe.sigBytes},_process:function(oe){var ve,Ae=this._data,Te=Ae.words,Be=Ae.sigBytes,Q=this.blockSize,tt=Be/(4*Q),dt=(tt=oe?i.ceil(tt):i.max((0|tt)-this._minBufferSize,0))*Q,it=i.min(4*dt,Be);if(dt){for(var ft=0;ft<dt;ft+=Q)this._doProcessBlock(Te,ft);ve=Te.splice(0,dt),Ae.sigBytes-=it}return new O.init(ve,it)},clone:function(){var oe=I.clone.call(this);return oe._data=this._data.clone(),oe},_minBufferSize:0});C.Hasher=Z.extend({cfg:I.extend(),init:function(oe){this.cfg=this.cfg.extend(oe),this.reset()},reset:function(){Z.reset.call(this),this._doReset()},update:function(oe){return this._append(oe),this._process(),this},finalize:function(oe){return oe&&this._append(oe),this._doFinalize()},blockSize:16,_createHelper:function(oe){return function(ve,Ae){return new oe.init(Ae).finalize(ve)}},_createHmacHelper:function(oe){return function(ve,Ae){return new ie.HMAC.init(oe,Ae).finalize(ve)}}});var ie=y.algo={};return y}(Math),co),aA.exports=function(i){return i.enc.Utf8}(wR.exports);var _I={exports:{}};_I.exports=function(i){return u=i.lib.WordArray,i.enc.Base64={stringify:function(_){var y=_.words,C=_.sigBytes,I=this._map;_.clamp();for(var O=[],D=0;D<C;D+=3)for(var B=(y[D>>>2]>>>24-D%4*8&255)<<16|(y[D+1>>>2]>>>24-(D+1)%4*8&255)<<8|y[D+2>>>2]>>>24-(D+2)%4*8&255,P=0;P<4&&D+.75*P<C;P++)O.push(I.charAt(B>>>6*(3-P)&63));var F=I.charAt(64);if(F)for(;O.length%4;)O.push(F);return O.join("")},parse:function(_){var y=_.length,C=this._map,I=this._reverseMap;if(!I){I=this._reverseMap=[];for(var O=0;O<C.length;O++)I[C.charCodeAt(O)]=O}var D=C.charAt(64);if(D){var B=_.indexOf(D);-1!==B&&(y=B)}return function p(_,y,C){for(var I=[],O=0,D=0;D<y;D++)if(D%4){var B=C[_.charCodeAt(D-1)]<<D%4*2|C[_.charCodeAt(D)]>>>6-D%4*2;I[O>>>2]|=B<<24-O%4*8,O++}return u.create(I,O)}(_,y,I)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64;var u}(wR.exports);var $u=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const ii=i=>{const l=_I.exports.parse(i);return aA.exports.stringify(l)},TR=i=>{for(var l=i.length,u=i.length-1;u>=0;u--){var p=i.charCodeAt(u);p>127&&p<=2047?l++:p>2047&&p<=65535&&(l+=2),p>=56320&&p<=57343&&u--}return l};function Hc(i){const l=new ArrayBuffer(i.length),u=new Uint8Array(l);for(let p=0,_=i.length;p<_;p++)u[p]=i.charCodeAt(p);return l}function bo(i){for(var l="",u=new Uint8Array(i),p=u.byteLength,_=0;_<p;_++)l+=String.fromCharCode(u[_]);return self.btoa(l)}function yP(i){for(var l=self.atob(i),u=l.length,p=new Uint8Array(u),_=0;_<u;_++)p[_]=l.charCodeAt(_);return p.buffer}const vb=()=>$u(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}),EP=(i,l,u)=>$u(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:u},l,i)}catch(p){throw p}}),bP=(i,l,u)=>$u(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.decrypt({name:"AES-GCM",iv:u},l,i)}catch(p){throw p}}),SP=(i,l)=>$u(void 0,void 0,void 0,function*(){try{return yield self.crypto.subtle.decrypt({name:"RSA-OAEP"},l,i)}catch(u){throw u}}),Ab=(i,l,u)=>$u(void 0,void 0,void 0,function*(){return new Promise((p,_)=>{requestAnimationFrame(()=>$u(void 0,void 0,void 0,function*(){var y;try{const C=null===(y=l?.algorithm)||void 0===y?void 0:y.name;let I;if("RSA-OAEP"===C?I=SP:"AES-GCM"===C&&(I=bP),!I)throw new Error("Unsupported encrypt key type");if("string"==typeof i){const O=new TextEncoder,D=yield I(O.encode(i),l,u);p(D)}else{const O=yield I(i,l,u);p(O)}}catch(C){_(C)}}))})}),vI=(i,l)=>{const u="string"==typeof i?Hc(i):i;return self.crypto.subtle.encrypt({name:"RSA-OAEP"},l,u)},AI=(i,l,u)=>$u(void 0,void 0,void 0,function*(){return new Promise((p,_)=>{requestAnimationFrame(()=>$u(void 0,void 0,void 0,function*(){var y;const C=null===(y=l?.algorithm)||void 0===y?void 0:y.name;let I;if("RSA-OAEP"===C?I=vI:"AES-GCM"===C&&(I=EP),!I)throw new Error("Unsupported encrypt key type");if("string"==typeof i){const O=new TextEncoder,D=yield I(O.encode(i),l,u);p(D)}else{const O=yield I(i,l,u);p(O)}}))})}),RR={},cA=(i,l)=>{RR[l]=i},yI=RR;var _f=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const CP=(i,l,u,p)=>_f(void 0,void 0,void 0,function*(){try{if(!i||!l||!u)return null;const _=yield self.crypto.subtle.decrypt({name:"AES-GCM",iv:u},l,i);return String.fromCharCode.apply(null,new Uint8Array(_))}catch(_){throw _}}),IP={decryptAESGCM256:CP,bulkDecryptAESGCM256:i=>_f(void 0,void 0,void 0,function*(){return yield Promise.all(i.map(l=>CP(...l)))})};var uA=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const vf=i=>{let l=0;return l+=TR(i.message),i.tags.forEach(u=>{l+=TR(u)}),l},Mm={success:!1,codecWorker:null},yb=[],r_=()=>uA(void 0,void 0,void 0,function*(){return Mm.success||(yield new Promise((l,u)=>{yb.push(()=>{l(null)})})),Mm.codecWorker});class r4{constructor(l){this.uuid=self.crypto.randomUUID();const{databaseName:u,maxSize:p,publicKey:_,reportUrl:y,plugins:C,idbManager:I,logManager:O,currentSize:D,externalKeys:B}=l;Mm.codecWorker=IP,yb.forEach(F=>{F()}),Mm.success=!0,console.log("codec worker init success"),this.databaseName=u,this.maxSize=p,this.publicKey=_??"",this.reportUrl=y??"",this.plugins=C??[],this.idbManager=I,this.logManager=O,this.currentSize=D??0,this.getCodecWorker=r_,this.externalKeys=B,this.commonMethods=Object.assign({},yI)}getLocalAESGCM256Key(){var l;return uA(this,void 0,void 0,function*(){if(this.localAESGCM256Key)return this.localAESGCM256Key;this.localAESGCM256Key=yield vb();const u=this.externalKeys?null===(l=this.externalKeys.filter(p=>p.usage===Qc.PROTECT_LOCAL_KEY)[0])||void 0===l?void 0:l.key:void 0;return yield this.idbManager.saveAESGCM256Key(this.uuid,this.localAESGCM256Key,u),this.localAESGCM256Key})}updateCurrentSize(l){var u;let p=null!==(u=this.currentSize)&&void 0!==u?u:0;if(l instanceof Map)for(const[_,y]of l)p+=vf(y);else p+=vf(l);return this.currentSize=p,p>=this.maxSize}}const wP=(...i)=>{const l={},u=[];for(const _ of i)_.forEach(y=>{l[y.id]||(l[y.id]=!0,u.push(y))});const p=new Map;return u.sort((_,y)=>_?.id-y?.id).forEach(_=>{p.set(_.id,_)}),p},Eb=(i,l)=>{const u=new Map;return l.forEach(p=>{i(p)&&u.set(p.id,p)}),u};class mB{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=l=>{for(const u of l)this.store.byTime.set(u.id,u)},this.pushByTag=l=>{l.forEach(u=>{const p=u.tags;Array.isArray(p)&&p.forEach(_=>{this.store.byTag[_]||(this.store.byTag[_]=new Map),this.store.byTag[_].set(u.id,u)})})},this.addLog=l=>{let u=l;Array.isArray(l)||(u=[l]),this.pushByTime(u),this.pushByTag(u)},this.syncFromIDB=l=>{return u=this,void 0,y=function*(){const u=yield l.getAllLogs();this.addLog(u)},new((_=void 0)||(_=Promise))(function(C,I){function O(P){try{B(y.next(P))}catch(F){I(F)}}function D(P){try{B(y.throw(P))}catch(F){I(F)}}function B(P){var F;P.done?C(P.value):(F=P.value,F instanceof _?F:new _(function(Z){Z(F)})).then(O,D)}B((y=y.apply(u,[])).next())});var u,_,y},this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=l=>{for(const u of l){const p=this.store.byTime.get(u);if(!p)continue;const{tags:_}=p;for(const y of _)this.store.byTag[y].delete(u);this.store.byTime.delete(u)}},this.filterStore=l=>{const u=((_,y)=>{if(!y)return _.byTime;if("string"==typeof y)return _.byTag[y]||new Map;if(Array.isArray(y)){if(y.every(C=>"string"==typeof C))return wP(...y.map(C=>_.byTag[C]).filter(C=>Boolean(C)))}else{if("function"==typeof y)return Eb(y,_.byTime);if("object"==typeof y)if(y.tags&&y.filter){if("string"==typeof y.tags)return Eb(y.filter,_.byTag[y.tags]);if(Array.isArray(y.tags)&&y.tags.every(C=>"string"==typeof C))return wP(...y.tags.map(C=>{const I=_.byTag[C];return I?Eb(y.filter,I):new Map}))}else{if(y.filter)return Eb(y.filter,_.byTime);if(y.tags){if("string"==typeof y)return _.byTag[y]||new Map;if(Array.isArray(y)&&y.every(C=>"string"==typeof C))return wP(...y.map(C=>_.byTag[C]))}}else console.error("Wrong filter type")}return new Map})(this.store,l),p=new Map;for(const[_,y]of u){const C=y.encryptMode!==Jo.AESGCM256,I=Object.assign(Object.assign({},y),{message:C?ii(y.message):y.message});p.set(_,I)}return p},this.store={byTag:{},byTime:new Map}}}function op(i,l,u){const p=i.plugins;if(!Array.isArray(p))return u;let _=u;return p.forEach(y=>{const C=y[l];if("function"==typeof C){const I=C(i,_);I&&(_=I)}}),_}const TP=(i,l,u,p,_,y={})=>{return void 0,void 0,D=function*(){const{noCache:C,extraProperties:I={}}=y,O=((B,P,F,Z,ie,oe)=>{const ve=Array.isArray(P)?P:[P],Ae=Date.now();return Object.assign({message:B,logLevel:F,tags:ve,encryptMode:Z,timestamp:Ae,laplaceSessionId:ie},oe)})(`${l}`,u,p,_,i.uuid,I),D=op(i,vu.beforeLog,O);if(C)op(i,vu.afterLog,O);else{const{idbManager:B,logManager:P}=i,F=yield B.makeNextId();if(_===Jo.AESGCM256){const ie=yield i.getLocalAESGCM256Key(),oe=yield AI(D.message,ie,new Uint8Array(16));D.message=bo(oe)}else D.message=(ie=>{const oe=aA.exports.parse(ie);return _I.exports.stringify(oe)})(D.message);const Z=Object.assign(Object.assign({},D),{id:F});i.updateCurrentSize(Z)&&op(i,vu.hitSizeLimit,Z),P.addLog(Z),B.addLog(Z),op(i,vu.afterLog,Z)}},new((O=void 0)||(O=Promise))(function(B,P){function F(oe){try{ie(D.next(oe))}catch(ve){P(ve)}}function Z(oe){try{ie(D.throw(oe))}catch(ve){P(ve)}}function ie(oe){var ve;oe.done?B(oe.value):(ve=oe.value,ve instanceof O?ve:new O(function(Ae){Ae(ve)})).then(F,Z)}ie((D=D.apply(undefined,[])).next())});var O,D};cA(TP,"commonLog");var cs={},Xu=Uint8Array,Au=Uint16Array,bb=Uint32Array,lA=new Xu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sb=new Xu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dA=new Xu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OR=function(i,l){for(var u=new Au(31),p=0;p<31;++p)u[p]=l+=1<<i[p-1];var _=new bb(u[30]);for(p=1;p<30;++p)for(var y=u[p];y<u[p+1];++y)_[y]=y-u[p]<<5|p;return[u,_]},i_=OR(lA,2),o_=i_[1];i_[0][28]=258,o_[258]=28;for(var EI=OR(Sb,0)[1],bI=new Au(32768),ns=0;ns<32768;++ns){var Zu=(43690&ns)>>>1|(21845&ns)<<1;Zu=(61680&(Zu=(52428&Zu)>>>2|(13107&Zu)<<2))>>>4|(3855&Zu)<<4,bI[ns]=((65280&Zu)>>>8|(255&Zu)<<8)>>>1}var el=function(i,l,u){for(var p=i.length,_=0,y=new Au(l);_<p;++_)i[_]&&++y[i[_]-1];var C,I=new Au(l);for(_=0;_<l;++_)I[_]=I[_-1]+y[_-1]<<1;if(u){C=new Au(1<<l);var O=15-l;for(_=0;_<p;++_)if(i[_])for(var D=_<<4|i[_],B=l-i[_],P=I[i[_]-1]++<<B,F=P|(1<<B)-1;P<=F;++P)C[bI[P]>>>O]=D}else for(C=new Au(p),_=0;_<p;++_)i[_]&&(C[_]=bI[I[i[_]-1]++]>>>15-i[_]);return C},go=new Xu(288);for(ns=0;ns<144;++ns)go[ns]=8;for(ns=144;ns<256;++ns)go[ns]=9;for(ns=256;ns<280;++ns)go[ns]=7;for(ns=280;ns<288;++ns)go[ns]=8;var yu=new Xu(32);for(ns=0;ns<32;++ns)yu[ns]=5;var RP=el(go,9,0);el(go,9,1);var Cb=el(yu,5,0);el(yu,5,1);var cd=function(i){return(i+7)/8|0},Ol=function(i,l,u){(null==l||l<0)&&(l=0),(null==u||u>i.length)&&(u=i.length);var p=new(2==i.BYTES_PER_ELEMENT?Au:4==i.BYTES_PER_ELEMENT?bb:Xu)(u-l);return p.set(i.subarray(l,u)),p},ah=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],DR=function(i,l,u){var p=new Error(l||ah[i]);if(p.code=i,Error.captureStackTrace&&Error.captureStackTrace(p,DR),!u)throw p;return p},ch=function(i,l,u){var p=l/8|0;i[p]|=u<<=7&l,i[p+1]|=u>>>8},hA=function(i,l,u){var p=l/8|0;i[p]|=u<<=7&l,i[p+1]|=u>>>8,i[p+2]|=u>>>16},pA=function(i,l){for(var u=[],p=0;p<i.length;++p)i[p]&&u.push({s:p,f:i[p]});var _=u.length,y=u.slice();if(!_)return[II,0];if(1==_){var C=new Xu(u[0].s+1);return C[u[0].s]=1,[C,1]}u.sort(function(tt,dt){return tt.f-dt.f}),u.push({s:-1,f:25001});var I=u[0],O=u[1],D=0,B=1,P=2;for(u[0]={s:-1,f:I.f+O.f,l:I,r:O};B!=_-1;)I=u[u[D].f<u[P].f?D++:P++],O=u[D!=B&&u[D].f<u[P].f?D++:P++],u[B++]={s:-1,f:I.f+O.f,l:I,r:O};var F=y[0].s;for(p=1;p<_;++p)y[p].s>F&&(F=y[p].s);var Z=new Au(F+1),ie=SI(u[B-1],Z,0);if(ie>l){p=0;var oe=0,ve=ie-l,Ae=1<<ve;for(y.sort(function(tt,dt){return Z[dt.s]-Z[tt.s]||tt.f-dt.f});p<_;++p){var Te=y[p].s;if(!(Z[Te]>l))break;oe+=Ae-(1<<ie-Z[Te]),Z[Te]=l}for(oe>>>=ve;oe>0;){var Be=y[p].s;Z[Be]<l?oe-=1<<l-Z[Be]++-1:++p}for(;p>=0&&oe;--p){var Q=y[p].s;Z[Q]==l&&(--Z[Q],++oe)}ie=l}return[new Xu(Z),ie]},SI=function(i,l,u){return-1==i.s?Math.max(SI(i.l,l,u+1),SI(i.r,l,u+1)):l[i.s]=u},CI=function(i){for(var l=i.length;l&&!i[--l];);for(var u=new Au(++l),p=0,_=i[0],y=1,C=function(O){u[p++]=O},I=1;I<=l;++I)if(i[I]==_&&I!=l)++y;else{if(!_&&y>2){for(;y>138;y-=138)C(32754);y>2&&(C(y>10?y-11<<5|28690:y-3<<5|12305),y=0)}else if(y>3){for(C(_),--y;y>6;y-=6)C(8304);y>2&&(C(y-3<<5|8208),y=0)}for(;y--;)C(_);y=1,_=i[I]}return[u.subarray(0,p),l]},xm=function(i,l){for(var u=0,p=0;p<l.length;++p)u+=i[p]*l[p];return u},Af=function(i,l,u){var p=u.length,_=cd(l+2);i[_]=255&p,i[_+1]=p>>>8,i[_+2]=255^i[_],i[_+3]=255^i[_+1];for(var y=0;y<p;++y)i[_+y+4]=u[y];return 8*(_+4+p)},kR=function(i,l,u,p,_,y,C,I,O,D,B){ch(l,B++,u),++_[256];for(var P=pA(_,15),F=P[0],Z=P[1],ie=pA(y,15),oe=ie[0],ve=ie[1],Ae=CI(F),Te=Ae[0],Be=Ae[1],Q=CI(oe),tt=Q[0],dt=Q[1],it=new Au(19),ft=0;ft<Te.length;++ft)it[31&Te[ft]]++;for(ft=0;ft<tt.length;++ft)it[31&tt[ft]]++;for(var Kt=pA(it,7),en=Kt[0],zt=Kt[1],Ot=19;Ot>4&&!en[dA[Ot-1]];--Ot);var _n,Gn,Dt,at,Ve=D+5<<3,nt=xm(_,go)+xm(y,yu)+C,Tt=xm(_,F)+xm(y,oe)+C+14+3*Ot+xm(it,en)+(2*it[16]+3*it[17]+7*it[18]);if(Ve<=nt&&Ve<=Tt)return Af(l,B,i.subarray(O,O+D));if(ch(l,B,1+(Tt<nt)),B+=2,Tt<nt){_n=el(F,Z,0),Gn=F,Dt=el(oe,ve,0),at=oe;var ht=el(en,zt,0);for(ch(l,B,Be-257),ch(l,B+5,dt-1),ch(l,B+10,Ot-4),B+=14,ft=0;ft<Ot;++ft)ch(l,B+3*ft,en[dA[ft]]);B+=3*Ot;for(var qe=[Te,tt],Yt=0;Yt<2;++Yt){var Tn=qe[Yt];for(ft=0;ft<Tn.length;++ft){var Yn=31&Tn[ft];ch(l,B,ht[Yn]),B+=en[Yn],Yn>15&&(ch(l,B,Tn[ft]>>>5&127),B+=Tn[ft]>>>12)}}}else _n=RP,Gn=go,Dt=Cb,at=yu;for(ft=0;ft<I;++ft)if(p[ft]>255){hA(l,B,_n[257+(Yn=p[ft]>>>18&31)]),B+=Gn[Yn+257],Yn>7&&(ch(l,B,p[ft]>>>23&31),B+=lA[Yn]);var wt=31&p[ft];hA(l,B,Dt[wt]),B+=at[wt],wt>3&&(hA(l,B,p[ft]>>>5&8191),B+=Sb[wt])}else hA(l,B,_n[p[ft]]),B+=Gn[p[ft]];return hA(l,B,_n[256]),B+Gn[256]},PR=new bb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),II=new Xu(0),NR=function(i,l,u,p,_,y){var C=i.length,I=new Xu(p+C+5*(1+Math.ceil(C/7e3))+_),O=I.subarray(p,I.length-_),D=0;if(!l||C<8)for(var B=0;B<=C;B+=65535){var P=B+65535;P>=C&&(O[D>>3]=y),D=Af(O,D+1,i.subarray(B,P))}else{for(var F=PR[l-1],Z=F>>>13,ie=8191&F,oe=(1<<u)-1,ve=new Au(32768),Ae=new Au(oe+1),Te=Math.ceil(u/3),Be=2*Te,Q=function(Xo){return(i[Xo]^i[Xo+1]<<Te^i[Xo+2]<<Be)&oe},tt=new bb(25e3),dt=new Au(288),it=new Au(32),ft=0,Kt=0,en=(B=0,0),zt=0,Ot=0;B<C;++B){var _n=Q(B),Gn=32767&B,Dt=Ae[_n];if(ve[Gn]=Dt,Ae[_n]=Gn,zt<=B){var at=C-B;if((ft>7e3||en>24576)&&at>423){D=kR(i,O,0,tt,dt,it,Kt,en,Ot,B-Ot,D),en=ft=Kt=0,Ot=B;for(var Ve=0;Ve<286;++Ve)dt[Ve]=0;for(Ve=0;Ve<30;++Ve)it[Ve]=0}var nt=2,Tt=0,ht=ie,qe=Gn-Dt&32767;if(at>2&&_n==Q(B-qe))for(var Yt=Math.min(Z,at)-1,Tn=Math.min(32767,B),Yn=Math.min(258,at);qe<=Tn&&--ht&&Gn!=Dt;){if(i[B+nt]==i[B+nt-qe]){for(var wt=0;wt<Yn&&i[B+wt]==i[B+wt-qe];++wt);if(wt>nt){if(nt=wt,Tt=qe,wt>Yt)break;var Sa=Math.min(qe,wt-2),Wn=0;for(Ve=0;Ve<Sa;++Ve){var no=B-qe+Ve+32768&32767,Ys=no-ve[no]+32768&32767;Ys>Wn&&(Wn=Ys,Dt=no)}}}qe+=(Gn=Dt)-(Dt=ve[Gn])+32768&32767}if(Tt){tt[en++]=268435456|o_[nt]<<18|EI[Tt];var $o=31&o_[nt],Ru=31&EI[Tt];Kt+=lA[$o]+Sb[Ru],++dt[257+$o],++it[Ru],zt=B+nt,++ft}else tt[en++]=i[B],++dt[i[B]]}}D=kR(i,O,y,tt,dt,it,Kt,en,Ot,B-Ot,D),!y&&7&D&&(D=Af(O,D+1,II))}return Ol(I,0,p+cd(D)+_)},MR=function(){for(var i=new Int32Array(256),l=0;l<256;++l){for(var u=l,p=9;--p;)u=(1&u&&-306674912)^u>>>1;i[l]=u}return i}(),Ib=function(){var i=-1;return{p:function(l){for(var u=i,p=0;p<l.length;++p)u=MR[255&u^l[p]]^u>>>8;i=u},d:function(){return~i}}},wI=function(i,l,u,p,_){return NR(i,l.level??6,null==l.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+l.mem,u,p,!_)},xR=function(i,l,u){for(var p=i(),_=i.toString(),y=_.slice(_.indexOf("[")+1,_.lastIndexOf("]")).replace(/\s+/g,"").split(","),C=0;C<p.length;++C){var I=p[C],O=y[C];if("function"==typeof I){l+=";"+O+"=";var D=I.toString();if(I.prototype)if(-1!=D.indexOf("[native code]")){var B=D.indexOf(" ",8)+1;l+=D.slice(B,D.indexOf("(",B))}else for(var P in l+=D,I.prototype)l+=";"+O+".prototype."+P+"="+I.prototype[P].toString();else l+=D}else u[O]=I}return[l,u]},Ur=[],yf=function(){return[Xu,Au,bb,lA,Sb,dA,o_,EI,RP,go,Cb,yu,bI,PR,II,el,ch,hA,pA,SI,CI,xm,Af,kR,cd,Ol,NR,wI,OP,fA]},uh=function(){return[gA,LR,mA,Ib,MR]},fA=function(i){return postMessage(i,[i.buffer])},mA=function(i,l,u){for(;u;++l)i[l]=u,u>>>=8},gA=function(i,l){var u=l.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=l.level<2?4:9==l.level?2:0,i[9]=3,0!=l.mtime&&mA(i,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),u){i[3]=8;for(var p=0;p<=u.length;++p)i[p+10]=u.charCodeAt(p)}},LR=function(i){return 10+(i.filename&&i.filename.length+1||0)};function OP(i,l){return wI(i,l||{},0,0)}function Ef(i,l,u){return u||(u=l,l={}),"function"!=typeof u&&DR(7),p=i,_=l,O=u,(D=function(B,P,F,Z){var ie;if(!Ur[2]){for(var oe="",ve={},Ae=B.length-1,Te=0;Te<Ae;++Te)oe=(ie=xR(B[Te],oe,ve))[0],ve=ie[1];Ur[2]=xR(B[Ae],oe,ve)}var Q,dt,it,ft,Kt,Be=function(Q,tt){var dt={};for(var it in Q)dt[it]=Q[it];for(var it in tt)dt[it]=tt[it];return dt}({},Ur[2][1]);return Q=Ur[2][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+function(B){return fA(BR(B.data[0],B.data[1]))}.toString()+"}",2,dt=Be,it=function(Q){var tt=[];for(var dt in Q)Q[dt].buffer&&tt.push((Q[dt]=new Q[dt].constructor(Q[dt])).buffer);return tt}(Be),ft=function(B,P){D.terminate(),O(B,P)},(Kt=new Worker(cs[2]||(cs[2]=URL.createObjectURL(new Blob([Q+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))))).onmessage=function(en){var zt=en.data,Ot=zt.$e$;if(Ot){var _n=new Error(Ot[0]);_n.code=Ot[1],_n.stack=Ot[2],ft(_n,null)}else ft(null,zt)},Kt.postMessage(dt,it),Kt}([yf,uh,function(){return[BR]}])).postMessage([p,_],_.consume?[p.buffer]:[]),function(){D.terminate()};var p,_,O,D}function BR(i,l){l||(l={});var u=Ib(),p=i.length;u.p(i);var _=wI(i,l,LR(l),8),y=_.length;return gA(_,l),mA(_,y-8,u.d()),mA(_,y-4,p),_}var FR=typeof TextEncoder<"u"&&new TextEncoder,DP=typeof TextDecoder<"u"&&new TextDecoder;try{DP.decode(II,{stream:!0})}catch{}var _A=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const _B=i=>_A(void 0,void 0,void 0,function*(){let l=i.report.meta;l?(l.version="000001",l.flag="0"):l={version:"000001",flag:"0"};const u=Object.assign(Object.assign({},i.report),{meta:l});return Object.assign(Object.assign({},i),{report:u})}),vA=(i,l=2)=>{let u=`${i}`;for(;u.length<l;)u=`0${u}`;return u},vB=i=>{const l=new Date(i);return`${l.getUTCFullYear()}-${vA(l.getUTCMonth()+1)}-${vA(l.getUTCDate())} ${vA(l.getUTCHours())}:${vA(l.getUTCMinutes())}:${vA(l.getUTCSeconds())}.${vA(l.getUTCMilliseconds(),3)}`},TI=(i,l)=>{const{message:u,logLevel:p,tags:_,timestamp:y}=i,O=function(B,P){var F={};for(var Z in B)Object.prototype.hasOwnProperty.call(B,Z)&&P.indexOf(Z)<0&&(F[Z]=B[Z]);if(null!=B&&"function"==typeof Object.getOwnPropertySymbols){var ie=0;for(Z=Object.getOwnPropertySymbols(B);ie<Z.length;ie++)P.indexOf(Z[ie])<0&&Object.prototype.propertyIsEnumerable.call(B,Z[ie])&&(F[Z[ie]]=B[Z[ie]])}return F}(i,["message","logLevel","tags","timestamp","encryptMode","id"]),D=Object.assign(Object.assign({time:vB(y),logLevel:Di[p],message:u,tags:_},l),O);return JSON.stringify(D)},AB=(i,l,u)=>{let p="",_=0;const y=new Map,C=new Map,I=Boolean(l.gzip)?92160:30720;for(const[O,D]of i){const B=TI(D,u),P=TR(B);_+P<I?(_+=P,p+=B,p+="\n",y.set(D.id,D)):C.set(D.id,D)}return{reportItems:y,nextReportItems:C,report:{messages:p}}},UR=(i,l,u={})=>_A(void 0,void 0,void 0,function*(){const p=i.logManager.filterStore(l);let _=i.publicKey;const{xhrOptions:y={},reportMaker:C,additionalContext:I,gzip:O,encrypt:D,publicKey:B}=u;if(B&&(_=B),D&&!_)throw new Error("Cannot encrypt report without key");const P=op(i,vu.beforeReport,p);var ve,Ae;let Z=((ve,Ae,Te,Be)=>{const Q=[];let tt;do{const dt=Ae(tt||ve,Te,Be),{nextReportItems:it}=dt;Q.push(dt),tt=it}while(Boolean(tt)&&Boolean(tt?.size));return Q})(yield(ve=P,Ae=i,_A(void 0,void 0,void 0,function*(){try{const{idbManager:Te,getCodecWorker:Be,externalKeys:Q}=Ae,tt=Q?Q.filter(zt=>zt.usage===Qc.PROTECT_LOCAL_KEY).map(zt=>zt.key):void 0,dt=new Map,it=Array.from(ve.values()),ft=yield Promise.all(it.map(zt=>_A(void 0,void 0,void 0,function*(){return zt.encryptMode===Jo.AESGCM256?[yP(zt.message),yield Te.loadAESGCM256Key(zt.laplaceSessionId,tt),new Uint8Array(16)]:[]})).map(zt=>!1===zt[1]?[]:zt)),Kt=yield Be(),en=yield Kt.bulkDecryptAESGCM256(ft);return it.forEach((zt,Ot)=>{const _n=en[Ot];dt.set(zt.id,_n?Object.assign(Object.assign({},zt),{message:_n}):zt)}),dt}catch{return ve}})),C??AB,u,I);if(O){const ve=(ie=!D,Ae=>_A(void 0,void 0,void 0,function*(){let Te=yield(Q=Ae.report.messages,new Promise((tt,dt)=>{Ef(function(ft,Kt){var en;if(FR)return FR.encode(ft);var zt=ft.length,Ot=new Xu(ft.length+(ft.length>>1)),_n=0,Gn=function(Ve){Ot[_n++]=Ve};for(en=0;en<zt;++en){if(_n+5>Ot.length){var Dt=new Xu(_n+8+(zt-en<<1));Dt.set(Ot),Ot=Dt}var at=ft.charCodeAt(en);at<128?Gn(at):at<2048?(Gn(192|at>>6),Gn(128|63&at)):at>55295&&at<57344?(Gn(240|(at=65536+(1047552&at)|1023&ft.charCodeAt(++en))>>18),Gn(128|at>>12&63),Gn(128|at>>6&63),Gn(128|63&at)):(Gn(224|at>>12),Gn(128|at>>6&63),Gn(128|63&at))}return Ol(Ot,0,_n)}(Q),{consume:!0},(ft,Kt)=>{ft&&dt(ft),tt(Kt)})}));var Q;ie&&(Te=bo(Te));const Be=Object.assign(Object.assign({},Ae.report),{messages:Te});return Object.assign(Object.assign({},Ae),{report:Be})}));Z=yield Promise.all(Z.map(ve))}var ie;Z=D?yield Promise.all(Z.map((ve=>Ae=>_A(void 0,void 0,void 0,function*(){const Te=self.crypto.getRandomValues(new Uint8Array(16)),Be=yield vb(),Q=yield(tt=ve,$u(void 0,void 0,void 0,function*(){const en=tt.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----",""),zt=Hc(self.atob(en));return yield self.crypto.subtle.importKey("spki",zt,{name:"RSA-OAEP",hash:"SHA-1"},!0,["encrypt"])}));var tt;const dt=yield(en=Be,$u(void 0,void 0,void 0,function*(){return yield self.crypto.subtle.exportKey("raw",en)})),it=yield vI(dt,Q),ft=yield AI(Ae.report.messages,Be,Te),Kt=Object.assign(Object.assign({},Ae.report),{messages:bo(ft),meta:{key:bo(it),iv:bo(Te),version:"000001"}});var en;return Object.assign(Object.assign({},Ae),{report:Kt})}))(_))):yield Promise.all(Z.map(_B));const oe={success:(ve,Ae,Te)=>{op(i,vu.afterReport,{report:Ae,reportItems:Te.reportItems,nextReportItems:Te.nextReportItems})},fail:(ve,Ae,Te)=>{op(i,vu.afterReport,{report:Ae,reportItems:Te.reportItems,nextReportItems:Te.nextReportItems,error:ve})}};((ve,Ae,Te,Be)=>{ve.map(Q=>Object.assign(Object.assign({url:Ae||"",type:"POST",withCredentials:!1,headers:{},data:JSON.stringify(Q.report),meta:{reportItems:Q.reportItems,nextReportItems:Q.nextReportItems}},Te),Be)).forEach(Q=>{(tt=>{const dt=new XMLHttpRequest;if(dt.open(tt.type||"GET",tt.url,!0),dt.withCredentials=tt.withCredentials,dt.onreadystatechange=function(){if(4===dt.readyState){const it=dt.status;it>=200&&it<300?tt.success&&tt.success(dt.responseText,tt.data,tt.meta):tt.fail&&tt.fail(`Request failed, status: ${it}, responseText: ${dt.responseText}`,tt.data,tt.meta)}},"POST"===tt.type){if(tt.headers)for(const it in tt.headers)dt.setRequestHeader(it,tt.headers[it]);try{dt.send(tt.data)}catch(it){tt.fail&&tt.fail(it,tt.data,tt.meta)}}})(Q)})})(Z,i.reportUrl,oe,y)});cA(UR,"commonReport");var wb=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const RI=(i,l,u)=>wb(void 0,void 0,void 0,function*(){const{idbManager:p,logManager:_}=i;if(Array.isArray(u)&&(yield p.deleteLogs(u),_.deleteLogs(u),!l))return;const y=i.logManager.filterStore(l),C=[];for(const[O,D]of y)C.push(D.id);let I=C;Array.isArray(C)||(I=[C]),yield p.deleteLogs(I),_.deleteLogs(I)}),kP=i=>wb(void 0,void 0,void 0,function*(){const{idbManager:l,logManager:u}=i;yield l.reset(),u.reset()});function yB(i,l){return function(u){if(Array.isArray(u))return u}(i)||function(u,p){var _=null==u?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(null!=_){var y,C,I=[],O=!0,D=!1;try{for(_=_.call(u);!(O=(y=_.next()).done)&&(I.push(y.value),!p||I.length!==p);O=!0);}catch(B){D=!0,C=B}finally{try{O||null==_.return||_.return()}finally{if(D)throw C}}return I}}(i,l)||function(u,p){if(u){if("string"==typeof u)return PP(u,p);var _=Object.prototype.toString.call(u).slice(8,-1);return"Object"===_&&u.constructor&&(_=u.constructor.name),"Map"===_||"Set"===_?Array.from(u):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?PP(u,p):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PP(i,l){(null==l||l>i.length)&&(l=i.length);for(var u=0,p=new Array(l);u<l;u++)p[u]=i[u];return p}function Lm(i){return new Promise(function(l,u){i.oncomplete=i.onsuccess=function(){return l(i.result)},i.onabort=i.onerror=function(){return u(i.error)}})}function VR(i,l){var u=indexedDB.open(i);u.onupgradeneeded=function(){return u.result.createObjectStore(l)};var p=Lm(u);return function(_,y){return p.then(function(C){return y(C.transaction(l,_).objectStore(l))})}}var jR;function Bm(){return jR||(jR=VR("keyval-store","keyval")),jR}function NP(i){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bm())("readonly",function(u){return Lm(u.get(i))})}function s_(i,l){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bm())("readwrite",function(p){return p.put(l,i),Lm(p.transaction)})}function Tb(i){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bm())("readwrite",function(u){return i.forEach(function(p){return u.delete(p)}),Lm(u.transaction)})}function MP(i,l){return i.openCursor().onsuccess=function(){this.result&&(l(this.result),this.result.continue())},Lm(i.transaction)}cA(RI,"commonDelete"),cA(kP,"commonReset");const Rb={default:{queue:[],isRunning:!1,listeners:[]}},OI=i=>{let l=Rb[i];return l||(l={queue:[],isRunning:!1,listeners:[]},Rb[i]=l),l};function AA(i){return l=this,void 0,_=function*(){const l=OI(i),{queue:u,listeners:p}=l;for(;u.length>0&&!l.isRunning;){const _=u.shift();l.isRunning=!0;try{const y=yield _.task();_.resolution(y)}catch(y){_.rejection(y)}l.isRunning=!1,AA(i)}p.length&&p.forEach(_=>{_()})},new((p=void 0)||(p=Promise))(function(y,C){function I(B){try{D(_.next(B))}catch(P){C(P)}}function O(B){try{D(_.throw(B))}catch(P){C(P)}}function D(B){var P;B.done?y(B.value):(P=B.value,P instanceof p?P:new p(function(F){F(P)})).then(I,O)}D((_=_.apply(l,[])).next())});var l,p,_}function bf(i,l){const u=OI(l);return new Promise((p,_)=>{u.queue.push({task:i,resolution:p,rejection:_}),AA(l)})}const yA=(i,l)=>{OI(i).listeners.push(l)};var ya=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const a_="change_meta",Ob="change_log",Dl=()=>Promise.resolve();class EB{constructor(l){this.waitingForReset=!1,this.isReseting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.get=u=>ya(this,void 0,void 0,function*(){return yield NP(u,this.store)}),this.getSecret=u=>ya(this,void 0,void 0,function*(){return yield NP(u,this.keyStore)}),this.set=(u,p)=>ya(this,void 0,void 0,function*(){try{return yield s_(u,p,this.store)}catch(_){_ instanceof DOMException&&_&&"QuotaExceededError"===_.name&&(yield this.deleteOldLogsForSetNewOne(),yield this.set(u,p)),console.error(_)}}),this.setSecret=(u,p)=>ya(this,void 0,void 0,function*(){try{return yield s_(u,p,this.keyStore)}catch(_){_ instanceof DOMException&&_&&"QuotaExceededError"===_.name&&(yield this.deleteOldLogsForSetNewOne(),yield this.set(u,p)),console.error(_)}}),this.deleteOldLogsForSetNewOne=()=>ya(this,void 0,void 0,function*(){var u;const p=yield this.getAllLogs(),_=[];for(let y=0;y<13;y++){const C=null===(u=p[y])||void 0===u?void 0:u.id;(C||0===C)&&_.push(`${C}`)}Tb(_,this.store)}),this.adjustMaxId=()=>ya(this,void 0,void 0,function*(){return this.isReseting?Dl():(this.isChangingMeta=!0,yield bf(()=>ya(this,void 0,void 0,function*(){var u;const p=yield this.getAllLogs(),y=null!==(u=p[p.length-1]?.id)&&void 0!==u?u:0;return yield this.set("maxId",y),y}),a_))}),this.makeNextId=()=>ya(this,void 0,void 0,function*(){return this.isReseting?Dl():(this.isChangingMeta=!0,yield bf(()=>ya(this,void 0,void 0,function*(){const u=yield this.get("maxId");if(!u&&0!==u)return yield this.set("maxId",0),0;const p=u+1;return yield this.set("maxId",p),p}),a_))}),this.addLog=u=>ya(this,void 0,void 0,function*(){if(this.isReseting)return Dl();this.isChangingLog=!0,yield bf(()=>ya(this,void 0,void 0,function*(){const{id:p}=u;this.set(`${p}`,u)}),Ob)}),this.getAllLogs=()=>ya(this,void 0,void 0,function*(){return(yield function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bm();return p("readonly",function(_){if(_.getAll&&_.getAllKeys)return Promise.all([Lm(_.getAllKeys()),Lm(_.getAll())]).then(function(C){var I=yB(C,2),D=I[1];return I[0].map(function(B,P){return[B,D[P]]})});var y=[];return p("readonly",function(C){return MP(C,function(I){return y.push([I.key,I.value])}).then(function(){return y})})})}(this.store)).filter(([p,_])=>"maxId"!==p).sort((p,_)=>{var y,C;return(null===(y=p[1])||void 0===y?void 0:y.id)-(null===(C=_[1])||void 0===C?void 0:C.id)}).map(([p,_])=>_)}),this.deleteLogs=u=>ya(this,void 0,void 0,function*(){if(this.isReseting)return Dl();this.isChangingLog=!0,yield bf(()=>ya(this,void 0,void 0,function*(){Tb(u.map(p=>`${p}`),this.store)}),Ob),yield this.adjustMaxId()}),this.saveAESGCM256Key=(u,p,_)=>ya(this,void 0,void 0,function*(){if(_){const y=yield self.crypto.subtle.exportKey("raw",p),C=yield AI(y,_,new Uint8Array(16));yield this.setSecret(`aes-gcm-256-${u}`,C)}else yield this.setSecret(`aes-gcm-256-${u}`,p)}),this.loadAESGCM256Key=(u,p)=>ya(this,void 0,void 0,function*(){const _=yield this.getSecret(`aes-gcm-256-${u}`);if(p){for(let y=0;y<p.length;y++)try{const C=p[y],I=yield Ab(_,C,new Uint8Array(16));return yield self.crypto.subtle.importKey("raw",I,"AES-GCM",!0,["decrypt"])}catch{continue}return!1}return _}),this.reset=()=>ya(this,void 0,void 0,function*(){return this.isReseting?Dl():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?Dl():(this.isReseting=!0,yield function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bm())("readwrite",function(p){return p.clear(),Lm(p.transaction)})}(this.store),this.isReseting=!1,void(this.waitingForReset=!1)))}),this.store=VR(l,l+"-store"),this.keyStore=VR(l+"-sec",l+"-store"),yA(a_,()=>{this.isChangingMeta=!1,this.waitingForReset&&this.reset()}),yA(Ob,()=>{this.isChangingLog=!1,this.waitingForReset&&this.reset()})}}var us=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const Fm={databaseName:"laplace-default-db",maxSize:49283072};let i4=(()=>{class i{constructor(u){this.commonLogWithContext=(_,y,C,I,O)=>us(this,void 0,void 0,function*(){yield TP(this.runtimeMetaManager,_,y,C,I,O)}),this.commonReportWithContext=(_,y)=>us(this,void 0,void 0,function*(){yield UR(this.runtimeMetaManager,_,y)}),this.commonDeleteWithContext=_=>us(this,void 0,void 0,function*(){yield RI(this.runtimeMetaManager,_)}),this.resetWithContext=()=>us(this,void 0,void 0,function*(){yield kP(this.runtimeMetaManager)}),this.initLocalAESGCM256Key=()=>us(this,void 0,void 0,function*(){return yield vb()}),this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.log,Jo.PLAIN,{extraProperties:C})}),this.info=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.info,Jo.PLAIN,{extraProperties:C})}),this.warn=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.warn,Jo.PLAIN,{extraProperties:C})}),this.debug=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.debug,Jo.PLAIN,{extraProperties:C})}),this.error=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.error,Jo.PLAIN,{extraProperties:C})}),this.logWithEncryption=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.log,Jo.AESGCM256,{extraProperties:C})}),this.infoWithEncryption=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.info,Jo.AESGCM256,{extraProperties:C})}),this.debugWithEncryption=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.debug,Jo.AESGCM256,{extraProperties:C})}),this.warnWithEncryption=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.warn,Jo.AESGCM256,{extraProperties:C})}),this.errorWithEncryption=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.error,Jo.AESGCM256,{extraProperties:C})}),this.logWithoutCache=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.log,Jo.PLAIN,{extraProperties:C,noCache:!0})}),this.infoWithoutCache=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.info,Jo.PLAIN,{extraProperties:C,noCache:!0})}),this.warnWithoutCache=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.warn,Jo.PLAIN,{extraProperties:C,noCache:!0})}),this.debugWithoutCache=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.debug,Jo.PLAIN,{extraProperties:C,noCache:!0})}),this.errorWithoutCache=(_,y,C)=>us(this,void 0,void 0,function*(){yield this.commonLogWithContext(_,y,Di.error,Jo.PLAIN,{extraProperties:C,noCache:!0})}),this.getLogs=_=>{const y=this.runtimeMetaManager.logManager;return y?y.filterStore(_):new Map},this.reportByHttps=(_,y)=>us(this,void 0,void 0,function*(){yield this.commonReportWithContext(_,y)}),this.deleteLog=_=>us(this,void 0,void 0,function*(){yield this.commonDeleteWithContext(_)}),this.deleteAll=()=>us(this,void 0,void 0,function*(){yield this.resetWithContext()});const{runtimeMetaManager:p}=u;this.runtimeMetaManager=p}}return i.init=l=>us(void 0,void 0,void 0,function*(){const{databaseName:u="laplace-default-db"}=l,p=new EB(u),_=new mB,y=new r4(Object.assign(Object.assign(Object.assign({},Fm),l),{idbManager:p,logManager:_}));op(y,vu.beforeInit),yield _.syncFromIDB(y.idbManager);const C=new i({runtimeMetaManager:y});return op(y,vu.afterInit),C}),i})();class Eu extends _b{constructor(l){super(),this.config={verbose:!1},this.beforeLog=(u,p)=>{const{verbose:_}=this.config;switch(_&&console.log("beforeLog, ","state: ",p,"meta: ",u),p.logLevel){case Di.error:console.error(p.message);break;case Di.warn:console.warn(p.message);break;case Di.log:console.log(p.message);break;case Di.debug:console.debug(p.message);break;case Di.info:console.info(p.message)}},this.afterLog=(u,p)=>{const{verbose:_}=this.config;_&&console.log("afterLog, ","state: ",p,"meta: ",u)},this.beforeReport=(u,p)=>{const{verbose:_}=this.config;_&&console.log("beforeReport, ","store: ",p,"meta: ",u)},this.afterReport=(u,p)=>{const{verbose:_}=this.config;_&&console.log("afterReport, ","store: ",p,"meta: ",u)},l&&(this.config=l)}}const Db=i=>{const l=[];for(const[u,p]of i)l.push(p);return l};class DI extends _b{constructor(l){super(),this.config={debug:!1},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log(`[AutoCleanLogPlugin]: ${u}`)},this.afterInit=u=>{const{expireBefore:p}=this.config;if(!p)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:_,commonMethods:{commonDelete:y}}=u,C=_.getStore().byTime,I=("function"==typeof p?Db(C).filter(p):Db(C).filter(O=>O.timestamp<p)).map(O=>O.id);y(u,void 0,I),this.debugLog(`afterInit, clean log id: ${I}`)},this.afterReport=(u,{reportItems:p,error:C})=>{if(C)return this.debugLog("error"),void console.error(C);const{cleanAfterReport:I}=this.config;if(!I)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:O}}=u,D=("function"==typeof I?Db(p).filter(I):Db(p)).map(B=>B.id);O(u,void 0,D),this.debugLog(`afterReport, clean log id: ${D}`)},l&&(this.config=l)}}let QR=-1;const EA=i=>{addEventListener("pageshow",l=>{l.persisted&&(QR=l.timeStamp,i(l))},!0)},sr=()=>window.__WEB_VITALS_POLYFILL__?window.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const i=performance.timing,l=performance.navigation.type,u={entryType:"navigation",startTime:0,type:2==l?"back_forward":1===l?"reload":"navigate"};for(const p in i)"navigationStart"!==p&&"toJSON"!==p&&(u[p]=Math.max(i[p]-i.navigationStart,0));return u})()):window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],bA=()=>{const i=sr();return i&&i.activationStart||0},lh=(i,l)=>{const u=sr();let p="navigate";return QR>=0?p="back-forward-cache":u&&(p=document.prerendering||bA()>0?"prerender":document.wasDiscarded?"restore":u.type.replace(/_/g,"-")),{name:i,value:void 0===l?-1:l,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:p}},sp=(i,l,u)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(i)){const p=new PerformanceObserver(_=>{Promise.resolve().then(()=>{l(_.getEntries())})});return p.observe(Object.assign({type:i,buffered:!0},u||{})),p}}catch{}},Gc=(i,l,u,p)=>{let _,y;return C=>{var I,O;l.value>=0&&(C||p)&&(y=l.value-(_||0),(y||void 0===_)&&(_=l.value,l.delta=y,l.rating=(I=l.value)>(O=u)[1]?"poor":I>O[0]?"needs-improvement":"good",i(l)))}},kI=i=>{requestAnimationFrame(()=>requestAnimationFrame(()=>i()))},SA=i=>{const l=u=>{"pagehide"!==u.type&&"hidden"!==document.visibilityState||i(u)};addEventListener("visibilitychange",l,!0),addEventListener("pagehide",l,!0)},dh=i=>{let l=!1;return u=>{l||(i(u),l=!0)}};let Wi=-1;const xP=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,CA=i=>{"hidden"===document.visibilityState&&Wi>-1&&(Wi="visibilitychange"===i.type?i.timeStamp:0,HR())},Sf=()=>{addEventListener("visibilitychange",CA,!0),addEventListener("prerenderingchange",CA,!0)},HR=()=>{removeEventListener("visibilitychange",CA,!0),removeEventListener("prerenderingchange",CA,!0)},PI=()=>(Wi<0&&(window.__WEB_VITALS_POLYFILL__?(Wi=window.webVitals.firstHiddenTime,Wi===1/0&&Sf()):(Wi=xP(),Sf()),EA(()=>{setTimeout(()=>{Wi=xP(),Sf()},0)})),{get firstHiddenTime(){return Wi}}),IA=i=>{document.prerendering?addEventListener("prerenderingchange",()=>i(),!0):i()},GR=(i,l)=>{l=l||{},IA(()=>{const u=[1800,3e3],p=PI();let _,y=lh("FCP");const C=sp("paint",I=>{I.forEach(O=>{"first-contentful-paint"===O.name&&(C.disconnect(),O.startTime<p.firstHiddenTime&&(y.value=Math.max(O.startTime-bA(),0),y.entries.push(O),_(!0)))})});C&&(_=Gc(i,y,u,l.reportAllChanges),EA(I=>{y=lh("FCP"),_=Gc(i,y,u,l.reportAllChanges),kI(()=>{y.value=performance.now()-I.timeStamp,_(!0)})}))})};let hh,wA,LP,Cf;const If={passive:!0,capture:!0},bB=new Date,BP=(i,l)=>{hh||(hh=l,wA=i,LP=new Date,kb(removeEventListener),WR())},WR=()=>{if(wA>=0&&wA<LP-bB){const i={entryType:"first-input",name:hh.type,target:hh.target,cancelable:hh.cancelable,startTime:hh.timeStamp,processingStart:hh.timeStamp+wA};Cf.forEach(function(l){l(i)}),Cf=[]}},NI=i=>{if(i.cancelable){const l=(i.timeStamp>1e12?new Date:performance.now())-i.timeStamp;"pointerdown"==i.type?((u,p)=>{const _=()=>{BP(u,p),C()},y=()=>{C()},C=()=>{removeEventListener("pointerup",_,If),removeEventListener("pointercancel",y,If)};addEventListener("pointerup",_,If),addEventListener("pointercancel",y,If)})(l,i):BP(l,i)}},kb=i=>{["mousedown","keydown","touchstart","pointerdown"].forEach(l=>i(l,NI,If))},Pb={},MI=i=>{document.prerendering?IA(()=>MI(i)):"complete"!==document.readyState?addEventListener("load",()=>MI(i),!0):setTimeout(i,0)};var KR="Expected a function",Nb=/^\s+|\s+$/g,Mb=/^[-+]0x[0-9a-f]+$/i,SB=/^0b[01]+$/i,CB=/^0o[0-7]+$/i,IB=parseInt,UP="object"==typeof self&&self&&self.Object===Object&&self,zR="object"==typeof ma&&ma&&ma.Object===Object&&ma||UP||Function("return this")(),c_=Object.prototype.toString,VP=Math.max,wB=Math.min,YR=function(){return zR.Date.now()};function qR(i){var l=typeof i;return!!i&&("object"==l||"function"==l)}function TB(i){if("number"==typeof i)return i;if("symbol"==typeof(p=i)||(_=p)&&"object"==typeof _&&"[object Symbol]"==c_.call(p))return NaN;var p,_;if(qR(i)){var l="function"==typeof i.valueOf?i.valueOf():i;i=qR(l)?l+"":l}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(Nb,"");var u=SB.test(i);return u||CB.test(i)?IB(i.slice(2),u?2:8):Mb.test(i)?NaN:+i}class RB extends _b{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log("[AutoLogWebVitalsPlugin]:",u)},this.afterInit=u=>{const{autoReport:p,publicTags:_}=this.config,{commonMethods:{commonLog:y,commonReport:C}}=u,I=function(i,l,u){var p=!0,_=!0;if("function"!=typeof i)throw new TypeError(KR);return qR(u)&&(p="leading"in u?!!u.leading:p,_="trailing"in u?!!u.trailing:_),function(y,C,I){var O,D,B,P,F,Z,ie=0,oe=!1,ve=!1,Ae=!0;if("function"!=typeof y)throw new TypeError(KR);function Te(ft){var Kt=O,en=D;return O=D=void 0,ie=ft,P=y.apply(en,Kt)}function Be(ft){return ie=ft,F=setTimeout(tt,C),oe?Te(ft):P}function Q(ft){var Kt=ft-Z;return void 0===Z||Kt>=C||Kt<0||ve&&ft-ie>=B}function tt(){var Kt,en,ft=YR();if(Q(ft))return dt(ft);F=setTimeout(tt,(en=C-((Kt=ft)-Z),ve?wB(en,B-(Kt-ie)):en))}function dt(ft){return F=void 0,Ae&&O?Te(ft):(O=D=void 0,P)}function it(){var ft=YR(),Kt=Q(ft);if(O=arguments,D=this,Z=ft,Kt){if(void 0===F)return Be(Z);if(ve)return F=setTimeout(tt,C),Te(Z)}return void 0===F&&(F=setTimeout(tt,C)),P}return C=TB(C)||0,qR(I)&&(oe=!!I.leading,B=(ve="maxWait"in I)?VP(TB(I.maxWait)||0,C):B,Ae="trailing"in I?!!I.trailing:Ae),it.cancel=function(){void 0!==F&&clearTimeout(F),ie=0,O=Z=D=F=void 0},it.flush=function(){return void 0===F?P:dt(YR())},it}(i,l,{leading:p,maxWait:l,trailing:_})}(F=>{C(u,F,p).catch(Z=>{y(u,"web vitals auto report failed",["JS_ERROR"],Di.error,Jo.PLAIN)})},600),O=Boolean(p),D=F=>Z=>{return ie=this,void 0,Ae=function*(){const ie=JSON.stringify(Z),oe=_?[F,"AUTO-WEB-VITALS",..._]:[F,"AUTO-WEB-VITALS"];this.debugLog(ie),O?(yield y(u,ie,oe,Di.info,Jo.PLAIN),I(F)):y(u,ie,oe,Di.info,Jo.PLAIN)},new((ve=void 0)||(ve=Promise))(function(Te,Be){function Q(it){try{dt(Ae.next(it))}catch(ft){Be(ft)}}function tt(it){try{dt(Ae.throw(it))}catch(ft){Be(ft)}}function dt(it){var ft;it.done?Te(it.value):(ft=it.value,ft instanceof ve?ft:new ve(function(Kt){Kt(ft)})).then(Q,tt)}dt((Ae=Ae.apply(ie,[])).next())});var ie,ve,Ae};var B,P,F,Z;B=D("CLS"),P=P||{},GR(dh(()=>{const F=[.1,.25];let Z,ie=lh("CLS",0),oe=0,ve=[];const Ae=Be=>{Be.forEach(Q=>{if(!Q.hadRecentInput){const tt=ve[0],dt=ve[ve.length-1];oe&&Q.startTime-dt.startTime<1e3&&Q.startTime-tt.startTime<5e3?(oe+=Q.value,ve.push(Q)):(oe=Q.value,ve=[Q])}}),oe>ie.value&&(ie.value=oe,ie.entries=ve,Z())},Te=sp("layout-shift",Ae);Te&&(Z=Gc(B,ie,F,P.reportAllChanges),SA(()=>{Ae(Te.takeRecords()),Z(!0)}),EA(()=>{oe=0,ie=lh("CLS",0),Z=Gc(B,ie,F,P.reportAllChanges),kI(()=>Z())}),setTimeout(Z,0))})),F=D("FID"),Z=Z||{},IA(()=>{const ie=[100,300],oe=PI();let ve,Ae=lh("FID");const Te=tt=>{tt.startTime<oe.firstHiddenTime&&(Ae.value=tt.processingStart-tt.startTime,Ae.entries.push(tt),ve(!0))},Be=tt=>{tt.forEach(Te)},Q=sp("first-input",Be);ve=Gc(F,Ae,ie,Z.reportAllChanges),Q&&SA(dh(()=>{Be(Q.takeRecords()),Q.disconnect()})),window.__WEB_VITALS_POLYFILL__?(console.warn('The web-vitals "base+polyfill" build is deprecated. See: https://bit.ly/3aqzsGm'),Q||window.webVitals.firstInputPolyfill(Te),EA(()=>{Ae=lh("FID"),ve=Gc(F,Ae,ie,Z.reportAllChanges),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(Te)})):Q&&EA(()=>{Ae=lh("FID"),ve=Gc(F,Ae,ie,Z.reportAllChanges),Cf=[],wA=-1,hh=null,kb(addEventListener),Cf.push(Te),WR()})}),((F,Z)=>{Z=Z||{},IA(()=>{const ie=[2500,4e3],oe=PI();let ve,Ae=lh("LCP");const Te=Q=>{const tt=Q[Q.length-1];if(tt){const dt=Math.max(tt.startTime-bA(),0);dt<oe.firstHiddenTime&&(Ae.value=dt,Ae.entries=[tt],ve())}},Be=sp("largest-contentful-paint",Te);if(Be){ve=Gc(F,Ae,ie,Z.reportAllChanges);const Q=dh(()=>{Pb[Ae.id]||(Te(Be.takeRecords()),Be.disconnect(),Pb[Ae.id]=!0,ve(!0))});["keydown","click"].forEach(tt=>{addEventListener(tt,Q,!0)}),SA(Q),EA(tt=>{Ae=lh("LCP"),ve=Gc(F,Ae,ie,Z.reportAllChanges),kI(()=>{Ae.value=performance.now()-tt.timeStamp,Pb[Ae.id]=!0,ve(!0)})})}})})(D("LCP")),((F,Z)=>{Z=Z||{};const ie=[800,1800];let oe=lh("TTFB"),ve=Gc(F,oe,ie,Z.reportAllChanges);MI(()=>{const Ae=sr();if(Ae){const Te=Ae.responseStart;if(Te<=0||Te>performance.now())return;oe.value=Math.max(Te-bA(),0),oe.entries=[Ae],ve(!0),EA(()=>{oe=lh("TTFB",0),ve=Gc(F,oe,ie,Z.reportAllChanges),ve(!0)})}})})(D("TTFB")),GR(D("FCP"))},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}var OB=function(i,l,u,p){return new(u||(u=Promise))(function(_,y){function C(D){try{O(p.next(D))}catch(B){y(B)}}function I(D){try{O(p.throw(D))}catch(B){y(B)}}function O(D){var B;D.done?_(D.value):(B=D.value,B instanceof u?B:new u(function(P){P(B)})).then(C,I)}O((p=p.apply(i,l||[])).next())})};const s4=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class jP extends _b{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.errorCount=0,this.addPublicTags=u=>{const{publicTags:p}=this.config;return p?[...u,...p]:u},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log("[AutoLogErrorPlugin]:",u)},this.ignore=u=>{var p,_,y,C,I;return void 0!==(null===(p=this.config)||void 0===p?void 0:p.maxErrorCount)&&this.errorCount>=(null===(_=this.config)||void 0===_?void 0:_.maxErrorCount)||!(null===(y=this.config)||void 0===y||!y.ignoredErrorMsgKeywords)&&u&&!(null!==(I=null===(C=this.config)||void 0===C?void 0:C.ignoredErrorMsgKeywords)&&void 0!==I&&I.find(O=>u?.includes(O)))},this.afterInit=u=>{if(!self.addEventListener)return;const{commonMethods:{commonLog:p,commonReport:_}}=u,{autoReport:y}=this.config;let C;const I=()=>{y&&(C&&clearTimeout(C),C=setTimeout(()=>{_(u,s4,y).catch(O=>{p(u,"auto log error plugin report failed",this.addPublicTags(["JS_ERROR"]),Di.error,Jo.PLAIN)}),this.debugLog(`report with option: ${JSON.stringify(y)}`)},600))};try{self.addEventListener("error",O=>OB(this,void 0,void 0,function*(){var D,B,P,F,Z,ie,oe;if(!this.ignore(O?.message))if(O?.target&&((null===(D=O?.target)||void 0===D?void 0:D.src)||(null===(B=O?.target)||void 0===B?void 0:B.href))){const ve=`Load Resource Error in ${null===(P=O?.target)||void 0===P?void 0:P.tagName} element: ${(null===(F=O?.target)||void 0===F?void 0:F.src)||(null===(Z=O?.target)||void 0===Z?void 0:Z.href)}`;yield p(u,ve,this.addPublicTags(["RESOURCE_ERROR"]),Di.error,Jo.PLAIN),this.errorCount+=1,I(),this.debugLog(ve)}else{const ve=`Javascript Runtime Error in ${O?.filename} (${O?.lineno}:${O?.colno}): ${O?.message}\nStack: ${null!==(oe=null===(ie=O?.error)||void 0===ie?void 0:ie.stack)&&void 0!==oe?oe:O?.stack}`;yield p(u,ve,this.addPublicTags(["JS_ERROR"]),Di.error,Jo.PLAIN),this.errorCount+=1,I(),this.debugLog(O)}})),self.addEventListener("unhandledrejection",O=>OB(this,void 0,void 0,function*(){var D;if(this.ignore(null===(D=O?.reason)||void 0===D?void 0:D.message))return;let B="";const{reason:P}=O;B="string"==typeof P?`Promise Error: ${P}`:"object"==typeof P?`Promise Error with reason: ${JSON.stringify(P)}`:`Promise Error with unrecognized reason: ${P}`,yield p(u,B,this.addPublicTags(["UNHANDLED_PROMISE_REJECTION"]),Di.error,Jo.PLAIN),this.errorCount+=1,I(),this.debugLog(O)}))}catch(O){console.error(O)}this.debugLog("afterInit, add listener")},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}let xb,QP,sc,Wc,ph;(function(i){i[i.PLAIN=0]="PLAIN",i[i.RSA=1]="RSA",i[i.AESGCM256=2]="AESGCM256"})(xb||(xb={})),function(i){i[i.info=0]="info",i[i.debug=1]="debug",i[i.log=2]="log",i[i.warn=3]="warn",i[i.error=4]="error"}(QP||(QP={})),function(i){i.AudioEncodeSuccess="init audio encode success",i.AudioDecodeSuccess="init audio decode success",i.AudioEncodeFailed="init audio encode failed",i.AudioDecodeFailed="init audio decode failed",i.DeviceAudioStreamCaptured="device audio stream captured",i.AudioCapturedForbidden="audio captured forbidden",i.AudioWorkerWebsocketBroken="audio worker websocket broken",i.AudioCaptureZeroData="audio capture zero data, auto failover",i.AudioJoinComplete="audio join complete",i.AudioLeaveComplete="audio leave complete",i.SharingAudioStartComplete="sharing audio start complete",i.SharingAudioStopComplete="sharing audio stop complete",i.AudioBridgeReconnectStart="audio bridge reconnect start",i.AudioBridgeReconnectEnd="audio bridge reconnect end",i.ChangeSpeakerError="audio change speaker error"}(sc||(sc={})),function(i){i.VideoEncodeSuccess="init video encode success",i.VideoDecodeSuccess="init video decode success",i.VideoEncodeFailed="init video encode failed",i.VideoDecodeFailed="init video decode failed",i.VBSettingSuccess="video VB setting success",i.VBSettingFailed="init video VB failed",i.VBPreloadSuccess="preload video VB success",i.VBPreloading3S="preload video VB 3s",i.VBPreloading10S="preload video VB 10s",i.UserForbiddedCaptureVideo="user forbidded capture video",i.StartCaptureVideoSuccess="start capture video success",i.StopCaptureVideoSuccess="stop capture video success"}(Wc||(Wc={})),function(i){i.SharingEncodeSuccess="init sharing encode success",i.SharingDecodeSuccess="init sharing decode success",i.SharingEncodeFailed="init sharing encode failed",i.SharingDecodeFailed="init sharing decode failed"}(ph||(ph={}));const xI={enable:!1,enableReport:!1,gatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7},LI=["debug","log","info","print","warn","error"],u_=(i,l)=>[...i,...l].filter(u=>!!u);let Um=(()=>{class i{static getInstance(){return this.agentInstance||(this.agentInstance=new i),this.agentInstance}constructor(){var u=this;this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.publicTags=void 0,this.initConfig=function(){var p=V(function*(_){let y,C=xI;try{_.logConfig&&(C=JSON.parse(_.logConfig),C.gatewayEndPoint&&(u.reportUrl=`${C.gatewayEndPoint}/pwa/webclient`));const{enable:B,enableReport:P,reportUrl:F,logLevel:Z,encryptKeys:ie,trackingId:oe}=_;if(void 0!==B&&(C=$t($t({},C),{},{enable:!!B})),void 0!==P&&(C=$t($t({},C),{},{enableReport:!!P})),F&&(u.reportUrl=F),"string"==typeof Z){const ve=LI.indexOf(Z),Ae=LI.reduce((Te,Be,Q)=>$t($t({},Te),{},Q<ve?{[`${Be}`]:!1}:{[`${Be}`]:!0}),{});C=$t($t({},C),{},{logLevel:Ae})}else void 0!==Z&&(C=$t($t({},C),{},{logLevel:Z}));if(oe&&(u.trackingId=oe),void 0!==ie){const ve=Array.isArray(ie)?ie:[ie];y=yield Promise.all(ve.map(Ae=>{return(Te=Ae,window.crypto.subtle.importKey("raw",(new TextEncoder).encode(Te.slice(0,32)),"AES-GCM",!1,["encrypt","decrypt"])).then(Te=>({usage:Qc.PROTECT_LOCAL_KEY,key:Te}));var Te}))}}catch(B){console.error("parse log config error",B)}const I=(new Date).getTime()-6048e5,O=C.enableReport&&u.reportUrl?{gzip:!1,encrypt:!1,additionalContext:{trackingId:u.trackingId}}:void 0;u.publicTags=["VideoSDK",u.trackingId];const D=[_.debugMode&&new Eu({verbose:!1}),new DI({debug:!1,cleanAfterReport:!0,expireBefore:I}),new RB({autoReport:O,publicTags:u.publicTags}),new jP({autoReport:O,publicTags:u.publicTags})].filter(Boolean);return{laplaceConfig:{databaseName:"ZM-VSDK-LOG-DATABASE",maxSize:49283072,publicKey:_.logEncryptionPubKey,reportUrl:u.reportUrl,externalKeys:y,plugins:D},logConfig:C}});return function(_){return p.apply(this,arguments)}}(),this.handleInitLaplaceSuccess=(p,_)=>{var y;this.laplace=p;const C=Dr.get(Lo.VSDKLogTrackingId),I=JSON.parse(C?window.atob(C):"[]");(null===(y=I.length>=_?.trackingCount)||void 0===y||y)&&I.shift();const O=I.reduce((D,B)=>$t($t({},D),{},{[`${B}`]:!0}),{});p.deleteLog(D=>{var B;return!(null!==(B=D.tags)&&void 0!==B&&B.some(P=>O[P]))}),I.push(this.trackingId),Dr.set(Lo.VSDKLogTrackingId,window.btoa(JSON.stringify(I)),wi.LocalStorage)},this.init=function(){var p=V(function*(_){const{laplaceConfig:y,logConfig:C}=yield u.initConfig(_);return C.enable?(u.logConfig=C,i4.init(y).then(I=>{u.handleInitLaplaceSuccess(I,C)}).catch(I=>{throw{type:Cl,reason:"Logger init failed.",error:I}})):Promise.reject({type:Pn,reason:"Logger feature is not enabled."})});return function(_){return p.apply(this,arguments)}}(),this.check=p=>{var _,y;return!(!this.checkLaplace()||(null===(_=this.logConfig)||void 0===_||null===(y=_.logLevel)||void 0===y||!y[p])&&(console.warn(`Logger ${p} is not enabled.`),1))},this.log=(p,_,y)=>{if(this.check("log"))try{var C;return null===(C=this.laplace.logWithEncryption(p,u_(_,y)))||void 0===C?void 0:C.catch(()=>{})}catch{return}},this.warn=(p,_,y)=>{if(this.check("warn"))try{var C;return null===(C=this.laplace.warnWithEncryption(p,u_(_,y)))||void 0===C?void 0:C.catch(()=>{})}catch{return}},this.info=(p,_,y)=>{if(this.check("info"))try{var C;return null===(C=this.laplace.infoWithEncryption(p,u_(_,y)))||void 0===C?void 0:C.catch(()=>{})}catch{return}},this.debug=(p,_,y)=>{if(this.check("debug"))try{var C;return null===(C=this.laplace.debugWithEncryption(p,u_(_,y)))||void 0===C?void 0:C.catch(()=>{})}catch{return}},this.error=(p,_,y)=>{if(this.check("error"))try{var C;return null===(C=this.laplace.errorWithEncryption(p,u_(_,y)))||void 0===C?void 0:C.catch(()=>{})}catch{return}},this.checkLaplace=()=>{var p;return!(null===(p=this.laplace)||void 0===p||!p.log)},this.makeLogger=p=>{var _;const y=u_(null!==(_=this.publicTags)&&void 0!==_?_:[],p);return{log:(C,I)=>this.log(C,y,I??[]),warn:(C,I)=>this.warn(C,y,I??[]),info:(C,I)=>this.info(C,y,I??[]),debug:(C,I)=>this.debug(C,y,I??[]),error:(C,I)=>this.error(C,y,I??[])}},this.reportToGlobalTracing=(p,_)=>{var y;return this.checkLaplace()?null!==(y=this.logConfig)&&void 0!==y&&y.enableReport&&this.reportUrl?this.laplace.reportByHttps(_,{gzip:!1,encrypt:!1,xhrOptions:{url:this.reportUrl},additionalContext:{trackingId:this.trackingId}}):Promise.reject({type:Pn,reason:"Please use getLogs to obtain log data and report by yourself."}):Promise.reject({type:Pn,reason:"Logger has not been enabled or initialized."})},this.getLogs=(p,_)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const y=p.getState(),{meeting:{meetingNumber:C,userId:I,userEmail:O,userName:D}}=y,B={meetingNumber:C,userId:I,userEmail:O,userName:D},P=this.laplace.getLogs(_),F=[];for(const[,Z]of P)F.push($t($t({},Z),B));return F},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=IR()}}return i.agentInstance=void 0,i})();const HP=Um.getInstance(),JR=[{name:"joinComputerAudio",type:"Audio"},{name:"leaveComputerAudio",type:"Audio"},{name:"joinSharingAudio",type:"Audio"},{name:"leaveSharingAudio",type:"Audio"},{name:"startCaptureVideo",type:"Video"},{name:"stopCaptureVideo",type:"Video"},{name:"startDesktopSharing",type:"Sharing"},{name:"stopDesktopSharing",type:"Sharing"},{name:"pauseDesktopSharing",type:"Sharing"},{name:"resumeDesktopSharing",type:"Sharing"}],GP=function(i){const l=JR.find(y=>y.name===i);if(l){const{type:y}=l;for(var u=arguments.length,p=new Array(u>1?u-1:0),_=1;_<u;_++)p[_-1]=arguments[_];HP.makeLogger([y,`${y} Media SDK`]).info(`${i},params:${JSON.stringify(p)}`)}};function $R(i){const l=JR.map(u=>u.name);return new Proxy(i,{get:(u,p)=>"string"==typeof p&&l.includes(p)?function(){for(var _=arguments.length,y=new Array(_),C=0;C<_;C++)y[C]=arguments[C];try{Reflect.apply(GP,void 0,[p,...y])}catch{}return Reflect.apply(Reflect.get(u,p),u,y)}:Reflect.get(u,p)})}function Ma(i){return`{E}${i}{/E}`}const XR=Um.getInstance(),ZR=i=>{const{meeting:{encryptedRWC:l,encryptedGEORWC:u,discardedRwcList:p,meetingOptions:_}}=i;let y=[];return _?.isEnableGeoFenceRWC&&u&&u?.length>0?y=u.filter(C=>!p.includes(C.rwc)).reduce((C,I)=>{const{dl:O,rwc:D,rwcToken:B}=I,P=C.find(F=>F.dl===O);if(P)P.items.push({rwc:D,rwcToken:B});else{const F={dl:O,items:[]};F.items.push({rwc:D,rwcToken:B}),C.push(F)}return C},[]):l&&(y=[{dl:0,items:Object.keys(l).map(C=>({rwc:C,rwcToken:l[C]}))}]),y},BI=i=>bs(...i.map(l=>0===l.dl?Dn(l.items):_c(l.dl).pipe(zn(()=>Dn(l.items))))),eO=(i,l)=>i.pipe(Zr(`${sT}`),Un(l),En(u=>{let[,p]=u;return void 0!==p.meeting.encryptedRWC||void 0!==p.meeting.encryptedGEORWC&&p.meeting.encryptedGEORWC.length>0}),oo(u=>{let[,p]=u;const{meeting:{ts:_,auth:y,meetingNumber:C,meetingOptions:I,meetingId:O,userName:D},breakoutRoom:B}=p,P=I?.isEnableGeoFenceRWC,F=ZR(p);if(F.length>0){const Z={serversLength:F.reduce((oe,ve)=>oe+ve.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let ie;return P&&(ie=new ut,BI(F).subscribe(oe=>{var ve;return null===(ve=ie)||void 0===ve?void 0:ve.next(oe)})),(P?ie:BI(F)).pipe(Fd(()=>{const{meeting:{meetingStatus:oe}}=l.value,ve=oe===Is.Initial&&Z.pingFailedServerList.length<Z.serversLength&&Z.serversLength>0;return!ve&&ie&&ie.complete(),ve}),ir(()=>{if(Z.pingRwcServerCounts=Z.pingRwcServerCounts+1,P&&Z.pingRwcServerCounts===Z.serversLength){const oe=1e3*Math.floor(5*Math.pow(2,Z.retryCounts));Z.retryCounts=Z.retryCounts+1,XR.makeLogger(["Join Meeting Flow"]).info(`ping rwc retry,retry counts:${Z.retryCounts}, ${JSON.stringify({meetingId:Ma(O),meetingNumber:Ma(C),userName:Ma(D)})}`,["Ping RWC Retry"]),_c(oe).pipe(gt(()=>{const ve=ZR(l.value);return Object.assign(Z,{serversLength:ve.reduce((Ae,Te)=>Ae+Te.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),ve})).subscribe(ve=>{BI(ve).subscribe(Ae=>{ie.next(Ae)})})}}),zn(oe=>{const{rwc:ve,rwcToken:Ae}=oe,Te=((Be,Q,tt,dt,it,ft)=>{const Kt={ts:dt,auth:it,rwcToken:tt,dmz:1};return ft&&Object.assign(Kt,{confID:ft}),`https://${Be}/wc/ping/${Q}?${new URLSearchParams(Kt).toString()}`})(ve,C,Ae,_,y,B?.currentRoom.boConfId);return CR(Te).pipe(zn(Be=>{let Q={};return Q=Be.response?$t($t({},Be.response),{},{rwc:ve,fromNginx:!1}):{rwc:ve,rwg:ve,rwcToken:Ae,fromNginx:!0},Dn([tT(Q),os()])}),Mc(()=>{const{pingFailedServerList:Be,serversLength:Q}=Z;return Be.push(Te),Be.length===Q&&(P&&ie&&ie.complete(),XR.makeLogger(["Join Meeting Flow"]).error(`ping rwc error, ${JSON.stringify({meetingId:Ma(O),meetingNumber:Ma(C),userName:Ma(D)})}`,["Ping RWC Error"]),_t(Hs,{reason:"connection error",errorCode:oT})),qt}))}),Mh(yc(performance.now())))}return qt}));let WP=0;const Lb={meetingStatus:Is.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,enableAudioQos:!0,enableVideoQos:!0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0}},DB=Fr({[`${lv}`]:Et((i,l)=>{let{payload:u}=l;u.customerKey=i.customerKey||u.customerKey||"",Object.assign(i,u),i.meetingStatus=Is.Initial}),[`${PL}`]:Et((i,l)=>{let{payload:u}=l;i.isWindowOpen=u}),[`${Da}`]:Et((i,l)=>{let{payload:u}=l;i.signatureType=u.useSDK?"sdk":"api",i.apiKey=u.apiKey,i.signature=u.signature,i.lang=u.language}),[`${NL}`]:Et((i,l)=>{let{payload:u}=l;i.ztk=u}),[`${GV}`]:Et((i,l)=>{let{payload:u}=l;i.zsk=u}),[`${PS}`]:Et((i,l)=>{let{payload:u}=l;i.tk=u.tk,i.mtkGuid=u.mtkGuid}),[`${yc}`]:Et((i,l)=>{let{payload:u}=l;i.pingRWCTimestamp=u}),[`${dv}`]:Et((i,l)=>{let{payload:u}=l;i.confId=u.confID,i.conId=u.conID,i.e2eEncrypt=u.e2eEncrypt,i.meetingNumber=parseInt(u.mn,10),i.zoomId=u.zoomID,i.meetingStatus=Is.Joined,i.jid=u.jid,i.xtoken=u.xtoken,i.groups=u.groups,i.svcUrl=u.svcUrl,i.encType=u.encType,i.userGUID=u.userGUID,i.userId=u.userID,i.role=u.role,i.participantID=u.participantID,i.reportDomain=u.reportDomain}),[`${NS}`]:Et((i,l)=>{let{payload:u}=l;if(u.gatewayUser){var p;const{userId:y,sn:C}=u.gatewayUser,I=null===(p=i.gatewayUserList)||void 0===p?void 0:p.find(O=>O.userId===y);var _;I?I.sn=C:null===(_=i.gatewayUserList)||void 0===_||_.push(u.gatewayUser)}else Object.assign(i,u)}),[`${$a}`]:Et((i,l)=>{let{payload:u}=l;i.isHost=u}),[`${n2}`]:Et((i,l)=>{let{payload:u}=l;i.isCoHost=u}),[`${Bh}`]:Et((i,l)=>{let{payload:u}=l;i.isOnHold=u}),[`${r2}`]:Et((i,l)=>{let{payload:u}=l;i.isMeetingReset=u}),[`${Up}`]:Et((i,l)=>{let{payload:u}=l;i.audioVideoBeforeOnHold=u}),[`${rE}`]:Et((i,l)=>{let{payload:u}=l;i.currentUserAudioBeforeReset=u}),[`${MS}`]:Et((i,l)=>{let{payload:u}=l;i.isCurrentUserMutedBeforeReset=u}),[`${ai}`]:Et((i,l)=>{let{payload:u}=l;i.meetingStatus=u}),[`${aT}`]:Et((i,l)=>{let{payload:u}=l;i.region=u.region,i.network=u.network}),[`${WV}`]:Et((i,l)=>{let{payload:u}=l;i.isCurrentUserStartVideoBeforeReset=u}),[`${o2}`]:Et((i,l)=>{let{payload:u}=l;i.joinMeetingTimeStamp=u}),[`${s2}`]:Et((i,l)=>{let{payload:u}=l;i.enableAudioQos=u.audioQos,i.enableVideoQos=u.videoQos}),[`${a2}`]:Et((i,l)=>{let{payload:u}=l;i.activeAppInfo=u}),[`${hv}`]:Et((i,l)=>{let{payload:u}=l;i.idleStartTime=u}),[`${cT}`]:Et((i,l)=>{let{payload:u}=l;i.sessionIdleTimeoutMins=u}),[`${c2}`]:Et((i,l)=>{let{payload:u}=l;i.isAudioBridgeEnabled=u}),[`${yn}`]:Et((i,l)=>{var u,p;let{payload:_}=l;const y=null===(u=i.encryptedGEORWC)||void 0===u||null===(p=u.find(I=>I.rwc===_))||void 0===p?void 0:p.dc;if(y){var C;const I=null===(C=i.encryptedGEORWC)||void 0===C?void 0:C.filter(O=>O.dc===y);I&&i.discardedRwcList.some(O=>I?.findIndex(D=>D.rwc===O)>=0)&&i.discardedRwcList.push(...I.map(O=>O.rwc)),i.discardedRwcList.push(_)}}),[`${Hi}`]:Et((i,l)=>{let{payload:u}=l;i.sharePronounType=u}),[`${Ec}`]:Et((i,l)=>{let{payload:u}=l;i.stayAwake=u}),[`${bc}`]:Et((i,l)=>{let{payload:u}=l;i.failover.joinMeetingSuccessTimestamp=u}),[`${Xa}`]:Et(i=>{Object.assign(i.failover,$t($t({},Lb.failover),{},{count:i.failover.count,joinMeetingSuccessTimestamp:i.failover.joinMeetingSuccessTimestamp}))}),[`${iE}`]:Et((i,l)=>{let{payload:u}=l;const{count:p,reason:_,interval:y}=u;i.failover.count=p,i.failover.reason=_,i.failover.interval=y,i.failover.isCurrentFailoverRecorded=!0}),[`${im}`]:(i,l)=>{let{payload:u}=l;const{isFailover:p}=u,_={isMeetingReset:!0,apiKey:i.apiKey,signatureType:i.signatureType,signature:i.signature,lang:i.lang,proxy:1,stayAwake:i.stayAwake};return p&&Object.assign(_,{currentUserAudioBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.audio:u.audio,isCurrentUserMutedBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.muted:u.muted,isCurrentUserStartVideoBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.video:u.video,meetingNumber:i.meetingNumber,userName:i.userName,passWord:i.passWord,userEmail:i.userEmail,sdkUrl:i.sdkUrl,sdkOrigin:i.sdkOrigin,cv:i.cv,zsk:i.zsk,ztk:i.ztk,idleStartTime:i.idleStartTime,sessionIdleTimeoutMins:i.sessionIdleTimeoutMins,customerKey:i.customerKey,failover:i.failover}),$t($t({},Lb),_)}},Lb),FI=Ls(ip,nA,n_,tA,{meetingInfoEpic:(i,l)=>i.pipe(Zr(`${nE}`),oo(u=>{const p=Object.assign({},u.payload,{password:Xs(u.payload.password),topic:Xs(u.payload.topic)}),{videoSDKUrl:_}={meetingSDKUrl:`https://${ab}/api/v1/wc/info`,videoSDKUrl:`https://${ab}/wc/lsdk`};return function(y,C){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new Me(O=>{WP++;const D=`${I}${WP}`,B=document.createElement("script");Object.keys(C).forEach(P=>null==C[P]&&delete C[P]),B.src=`${y}?${new URLSearchParams(Object.assign(C,{callback:D})).toString()}`,B.async=!0,B.onerror=P=>O.error(P),document.getElementsByTagName("head")[0].appendChild(B),window[D]=P=>{B.parentNode&&B.parentNode.removeChild(B),delete window[D],O.next(P),O.complete()}})}(_,p).pipe(Mc(y=>rr({status:!1,result:y.toString(),errorCode:oT})),zn(y=>{const[C,I]=ml(rr(y),O=>!0===O.status&&void 0!==O.result);return I.subscribe(O=>{O.state||(3e3===O.errorCode&&"Meeting password is incorrect"===O.errorMessage?_t(Hs,Cg(3004)):3e3===O.errorCode&&"The role type error"===O.errorMessage?_t(Hs,Cg(3010)):O.errorCode===oT?_t(Hs,{reason:"connection error"}):3e3===O.errorCode?_t(Hs,{reason:O.errorMessage,errorCode:200}):300===O.errorCode?_t(Hs,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===O.errorCode&&"Parse lite sdk topic and pwd fail"===O.errorMessage?_t(Hs,{reason:"Parse topic and pwd fail",errorCode:200}):124===O.errorCode&&"The java web token is expired or more than 2 days or ineffective."===O.errorMessage?_t(Hs,{reason:"The token is expired or more than 2 days or ineffective.",errorCode:200}):124===O.errorCode&&_t(Hs,{reason:"Verify JWT failed",errorCode:200}))}),C.pipe(sP(O=>{if(!0===O.status){const{result:{mid:D,websdkClientFeatureOptions:B}}=O;Dr.init(D);const P=((ie,oe)=>{if(ie.result){const{result:{mn:ve,ts:Ae,auth:Te,track_auth:Be,mid:Q,tid:tt,encryptedRWC:dt,encryptedGEORWC:it,user_identity:ft,meetingOptions:Kt,can_recording:en,wcXMPPConfig:zt,call_out_country_json:Ot,isOriginalHost:_n,support_call_out:Gn,liveTranscription:Dt,logConfig:at,logEncryptionPubKey:Ve}}=ie,{lang:nt,password:Tt,topic:ht,zlk:qe,cv:Yt,userName:Tn}=oe;return{meetingNumber:ve,meetingId:Q,tid:tt,ts:Ae,auth:Te,passWord:Tt,trackAuth:Be,customerKey:ft,encryptedRWC:JSON.parse(dt||"{}"),encryptedGEORWC:JSON.parse(it||"{}"),meetingOptions:JSON.parse(Kt||"{}"),recordingEnable:"1"===en,topic:ht,userName:Dr.get(Gi.WebclientUserName)||Tn,cv:Yt,zlkJwtToken:qe,xmppConfig:JSON.parse(zt||"{}"),callOutCountry:JSON.parse(Ot||"{}"),lang:nt,isOriginHost:_n,isSupportCallOut:"1"===Gn,liveTranscription:JSON.parse(Dt||"{}"),logConfig:at,logEncryptionPubKey:Ve}}return ie})(O,u.payload),F=[rr(lv(P)),$y(eO,l,sT())],Z=(ie=>{const oe={[`${ea.AudioBridgeEnable}`]:{mask:240,action:c2}},ve=[];if(ie){const Ae=ie.split("").reverse();Object.keys(ea).filter(Te=>/\d(,\d)?/.test(ea[Te])).forEach(Te=>{const Be=ea[Te],Q=Be.split(",").map(it=>Ae[Number(it)-1]).reverse().join(""),tt=parseInt(Q,16),dt=oe[Be];dt&&ve.push(rr(dt.action((tt&dt.mask)>0)))})}return ve})(B);return Z.length>0&&F.unshift(...Z),Uy(...F)}}))}))})),pingRWCEpic:eO});var KP={exports:{}};KP.exports=function(){function i(l){for(var u=1;u<arguments.length;u++){var p=arguments[u];for(var _ in p)l[_]=p[_]}return l}return function l(u,p){function _(y,C,I){if(typeof document<"u"){"number"==typeof(I=i({},p,I)).expires&&(I.expires=new Date(Date.now()+864e5*I.expires)),I.expires&&(I.expires=I.expires.toUTCString()),y=encodeURIComponent(y).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var O="";for(var D in I)I[D]&&(O+="; "+D,!0!==I[D]&&(O+="="+I[D].split(";")[0]));return document.cookie=y+"="+u.write(C,y)+O}}return Object.create({set:_,get:function(y){if(typeof document<"u"&&(!arguments.length||y)){for(var C=document.cookie?document.cookie.split("; "):[],I={},O=0;O<C.length;O++){var D=C[O].split("="),B=D.slice(1).join("=");try{var P=decodeURIComponent(D[0]);if(I[P]=u.read(B,P),y===P)break}catch{}}return y?I[y]:I}},remove:function(y,C){_(y,"",i({},C,{expires:-1}))},withAttributes:function(y){return l(this.converter,i({},this.attributes,y))},withConverter:function(y){return l(i({},this.converter,y),this.attributes)}},{attributes:{value:Object.freeze(p)},converter:{value:Object.freeze(u)}})}({read:function(l){return'"'===l[0]&&(l=l.slice(1,-1)),l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(l){return encodeURIComponent(l).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var zP=KP.exports;let tO;!function(i){i[i.Unknown=0]="Unknown",i[i.Windows=1]="Windows",i[i.Mac=2]="Mac",i[i.Pad=3]="Pad",i[i.Mobile=4]="Mobile",i[i.CallIn=5]="CallIn",i[i.Linux=6]="Linux",i[i.WebClient=7]="WebClient",i[i.ChromeOs=8]="ChromeOs"}(tO||(tO={}));const{WebclientIsOnHold:kB,WebclientOpt:PB,WebclientParticipantId:Bb,WebclientZoomId:YP,WebclientWebinarToken:rO,WebclientMeetingToken:NB}=Gi,{WebclientDeviceId:iO}=Lo;function qP(i){let{retryCount:l,rwgServerList:u,userName:p,auth:_,trackAuth:y,meetingId:C,customerKey:I,tid:O,lang:D,ts:B,bid:P,botk:F,confID:Z,isAudioBridgeEnabled:ie,isMeetingReset:oe,cameraDevicesList:ve}=i;const Ae=zP.get("_zm_mtk_guid");let Te=Dr.get(iO);if(Te||(Te=IR(),Dr.set(iO,Te,wi.LocalStorage)),u.length>l){const Be=uT(),Q=u[l],tt={dn2:Xs(p),auth:_,browser:Be,trackAuth:y,mid:C,tid:O,lang:D,ts:B,"ZM-CID":Te,_ZM_MTG_TRACK_ID:Ae||"",customer_key:Xs(I),cfs:0};Q.rwcAuth?Object.assign(tt,{rwcAuth:Q.rwcAuth}):Q.rwcToken&&Object.assign(tt,{rwcToken:Q.rwcToken});const dt=FS()?1:sE()||Kd()?2:0;return Object.assign(tt,{as_type:dt}),[{key:PB,queryKey:"opt"},{key:Bb,queryKey:"participantID"},{key:YP,queryKey:"zoomid"}].forEach(ft=>{const Kt=Dr.get(ft.key);void 0!==Kt&&(tt[ft.queryKey]=Kt)}),P&&F&&Z&&Object.assign(tt,{bid:Xs(P),botk:F,confID:Z}),Dr.get(NB)&&Object.assign(tt,{isdj:1}),od()&&(Object.assign(tt,{from:Tg()?"android":"ios"}),ie&&Object.assign(tt,{useABAudio:1})),Object.assign(tt,{clientCaps:MB()}),Object.assign(tt,{isCamera:oe?ve.length>0?1:0:1}),{queryObject:$t({},tt),rwgServer:Q}}return null}function MB(){let i=Ug.WebCameraIndication|Ug.SendMeetingTokenSeparately;const l=Mi.getPTZCapability();return(l.pan||l.tilt||l.zoom)&&(i|=Ug.SupportFarEndCameraControl),Mi.isSupportVideoShare()&&(i|=Ug.SupportVideoShare),i|=Ug.UnifyErrorType,i}const l_=mo.createAgent();let UI;var xB=Object.freeze({__proto__:null,connectZoomSocketEpic:(i,l)=>i.pipe(Zr(`${os}`),Un(l),En(u=>{let[,p]=u;return p.socket.zoomSocketStatus===ao.Closed}),oo(u=>{let[,p]=u;const{socket:{retryCount:_,rwgServerList:y},meeting:C,breakoutRoom:I,video:{cameraDevicesList:O}}=p;let D,B=$t($t({},C),{},{retryCount:_,rwgServerList:y,cameraDevicesList:O});if(I&&I.currentRoom.status===hr.Joining){const{currentRoom:{boId:F,boConfId:Z,boToken:ie}}=I;B=$t($t({},B),{},{bid:F,botk:ie,confID:Z})}if(D=C.zlkJwtToken?function(F){const Z=qP(F);if(Z){const{queryObject:ie,rwgServer:oe}=Z,{topic:ve,cv:Ae,zlkJwtToken:Te,meetingNumber:Be,passWord:Q}=F;return Object.assign(ie,{topic:Xs(ve),iccv:Ae,zlkJwtToken:Te}),""!==Q&&Object.assign(ie,{mpwd:Xs(Q)}),`wss://${oe.rwg}/instantsdk/${Be}?${new URLSearchParams(ie).toString()}`}return null}(B):function(F){const Z=qP(F);if(Z){const{queryObject:ie,rwgServer:oe}=Z,{signatureType:ve,userEmail:Ae,ztk:Te,tk:Be,cv:Q,zsk:tt,sign:dt,meetingNumber:it,isHost:ft,isOriginHost:Kt,passWord:en}=F;return Object.assign(ie,{signType:ve,email:Ae,zak:Te||"",tk:Be||"",jscv:Q}),ft&&Kt||""===en||Object.assign(ie,{mpwd:en}),sessionStorage.getItem(Gi.WebclientZsk)||tt?Object.assign(ie,{zak:tt}):Object.assign(ie,{sign:dt}),[{key:kB,queryKey:"cfs"},{key:rO,queryKey:"tk"}].forEach(zt=>{const Ot=Dr.get(zt.key);void 0!==Ot&&(ie[zt.queryKey]=Ot)}),`wss://${oe.rwg}/wc/api/${it}?${new URLSearchParams(ie).toString()}`}return null}(B),D){const F=(l_.connect(D),UI=new Fe,Np(Z=>l_.on(yl.Message,Z),Z=>l_.off(yl.Message,Z),Z=>Z.data).subscribe(UI),UI);return bs(F.pipe(En(Z=>"string"==typeof Z),gt(Z=>{try{return JSON.parse(Z)}catch(ie){return console.error(ie),{evt:0}}}),aP(),mf(Z=>{if(0!==Z.evt||!Z.body||"invalid parameters!"!==Z.body.test)return rd(Z);_t(Hs,Cg(Zy.INVALID_PARAMETER))}),Mh(Lh({status:ao.Connecting,rwgUrl:D}))),F.pipe(En(Z=>Z instanceof ArrayBuffer),gt(Z=>$s(Z))))}return qt})),connectedZoomSocketEpic:(i,l)=>i.pipe(Zr(`${os}`),Un(l),En(u=>{let[,p]=u;return p.socket.zoomSocketStatus===ao.Closed}),oo(()=>{const[u,p,_]=[yl.Open,yl.Close,yl.Error].map(y=>Np(C=>l_.on(y,C),C=>l_.on(y,C)));return bs(u.pipe(zn(()=>bs(rr(Lh({status:ao.Connected})),_c(6e4).pipe(Un(l),En(y=>{let[,C]=y;return C.meeting.meetingStatus===Is.Initial&&!C.meeting.isMeetingReset}),gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.NoHeartbeat))))))),p.pipe(Un(l),En(y=>{let[,C]=y;return C.socket.zoomSocketStatus!==ao.Closed&&C.meeting.meetingStatus===Is.Joined&&!C.meeting.isMeetingReset}),gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.Disconnect)))),_.pipe(Un(l),zn(y=>{let[,C]=y;const{meeting:{meetingStatus:I,isMeetingReset:O},socket:{rwgServerList:D,retryCount:B}}=C,P=[];if(I===Is.Initial&&null!=D&&D.length){const F=D[B];return _c(5e3).pipe(En(()=>l.value.meeting.meetingStatus===Is.Initial),zn(()=>{const{socket:{rwgServerList:Z,retryCount:ie}}=l.value,oe=[];return Z.length>ie+1?oe.push(nm(ie+1),Qd({retry:!0})):(_t(Hs,{reason:"connection error",errorCode:oT}),oe.push(...ff(l.value))),Dn(oe)}),Mh(yn(F?.rwc)))}return O||I!==Is.Joined||(_t(Za,{reason:Zs.Failover}),P.push(wo(xo.OnError))),Dn(P)})))})),disconnectZoomSocketEpic:(i,l)=>i.pipe(Zr(`${Qd}`),oo(u=>u.payload&&u.payload.retry?rr(os()).pipe(yo(1e3),Mh(Lh({status:ao.Closed}))):rr(Lh({status:ao.Closed}))),yo(100),ir(()=>{var u;l.value.socket.zoomSocketStatus===ao.Closed&&(l_.close(),null===(u=UI)||void 0===u||u.complete())}))});const Vm=oh.getInstance();let Fb;var oO=Object.freeze({__proto__:null,connectXmppSocketEpic:(i,l)=>i.pipe(Zr(`${Uu}`),Un(l),En(u=>{let[,p]=u;return"closed"===p.socket.xmppSocketStatus}),oo(u=>{let[,p]=u;const{meeting:{svcUrl:_,meetingNumber:y,conId:C}}=p;return(O=`wss://${_}/wc/media/${y}?type=x&cid=${C}`,Vm.connect(O),Fb=new Fe,Np(D=>Vm.on(Ju.Message,D),D=>Vm.off(Ju.Message,D)).subscribe(Fb),Fb).pipe(En(O=>void 0!==O?.evt),gt(O=>qy(O)),Mh(Oa(ao.Connecting)));var O})),connectedXmppSocketEpic:(i,l)=>i.pipe(Zr(`${Uu}`),oo(()=>{const[u,p,_]=[Ju.Open,Ju.Close,Ju.Error].map(y=>Np(C=>Vm.on(y,C),C=>Vm.on(y,C)));return bs(u.pipe(ir(()=>{const y=Kd()&&Fh()?11:10;Vm.join(y)}),zo(Oa(ao.Connected))),p.pipe(yo(1e3),Un(l),En(y=>{let[,C]=y;return"closed"!==C.socket.xmppSocketStatus&&C.meeting.meetingStatus===Is.Joined&&!C.meeting.isMeetingReset}),gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.DisconnectXmpp)))),_.pipe(yo(1e3),Un(l),En(y=>{let[,C]=y;return"closed"!==C.socket.xmppSocketStatus&&C.meeting.meetingStatus===Is.Joined&&!C.meeting.isMeetingReset}),gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.OnError)))))})),disconnectCmdChannelSocketEpic:i=>i.pipe(Zr(`${Ra}`),zo(Oa(ao.Closed)),yo(100),ir(()=>{var l;Vm.close(),null===(l=Fb)||void 0===l||l.complete()}))});const jm=h2.getInstance();let VI;var JP=Object.freeze({__proto__:null,connectMainSessionSocketEpic:(i,l)=>i.pipe(Zr(`${yg}`),Un(l),En(u=>{let[,p]=u;return"closed"===p.socket.mainSessionSocketStatus}),oo(u=>{let[,p]=u;const{meeting:{svcUrl:_,meetingNumber:y,conId:C}}=p;return(O=`wss://${_}/wc/media/${y}?type=m&cid=${C}&mode=2`,jm.connect(O),VI=new Fe,Np(D=>jm.on(yl.Message,D),D=>jm.off(yl.Message,D)).pipe(gt(D=>D.data)).subscribe(VI),VI).pipe(gt(O=>{try{return JSON.parse(O)}catch(D){return console.error(D),{evt:0}}}),En(O=>0!==O.evt),aP(),gt(O=>_l(O)),Mh(rm(ao.Connecting)));var O})),connectedMainSessionSocketEpic:(i,l)=>i.pipe(Zr(`${yg}`),oo(()=>{const[u,p,_]=[yl.Open,yl.Close,yl.Error].map(y=>Np(C=>jm.on(y,C),C=>jm.on(y,C)));return bs(u.pipe(zo(rm(ao.Connected))),p.pipe(Un(l),En(y=>{let[,C]=y;return"closed"!==C.socket.zoomSocketStatus&&C.meeting.meetingStatus===Is.Joined}),gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.DisconnectMChannel)))),_.pipe(gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.OnErrorMChannel)))))})),disconnectMainSessionSocketEpic:i=>i.pipe(Zr(`${gi}`),zo(rm(ao.Closed)),ir(()=>{var l;jm.close(),null===(l=VI)||void 0===l||l.complete()}))});const TA={zoomSocketStatus:ao.Closed,xmppSocketStatus:ao.Closed,mainSessionSocketStatus:ao.Closed,retryCount:0,rwgServerList:[]},$P=Fr({[`${Lh}`]:Et((i,l)=>{let{payload:u}=l;i.zoomSocketStatus=u.status}),[`${tT}`]:Et((i,l)=>{let{payload:u}=l;const{rwgServerList:p}=i;p.find(_=>_.rwg===u.rwg)||p.push(u)}),[`${nm}`]:Et((i,l)=>{let{payload:u}=l;i.retryCount=u}),[`${Oa}`]:Et((i,l)=>{let{payload:u}=l;i.xmppSocketStatus=u}),[`${rm}`]:Et((i,l)=>{let{payload:u}=l;i.mainSessionSocketStatus=u}),[`${Eg}`]:()=>TA},TA),Ub=Ls(xB,oO,JP),Qm={id:"userId",type:i=>tf(i)?{userType:i,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:i},role:i=>({userRole:i,isHost:Ws(i)}),dn2:i=>({displayName:Fp(i)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:i=>({bLocalRecord:1===i}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT"},RA=i=>{const l={};return["add","remove","update"].forEach(u=>{null!=i[u]&&(l[u]=i[u].reduce((p,_)=>{const y=Object.keys(_).reduce((I,O)=>{const D=Qm[O];return"function"==typeof D?Object.assign(I,D(_[O])):"string"==typeof D?I[D]=_[O]:I[O]=_[O],I},{}),C=p.find(I=>I.userId===y.userId);return void 0!==C?Object.assign(C,y):p.push(y),p},[]))}),l},jI={name:"displayName",node:i=>({userId:Number(i)}),role:i=>({userRole:Number(i)})},Hm=i=>Object.keys(i).reduce((l,u)=>{const p=jI[u];return"function"==typeof p?Object.assign(l,p(i[u])):"string"==typeof p?l[p]=i[u]:l[u]=i[u],l},{});var LB=Object.freeze({__proto__:null,updateAttendeesEpic:(i,l)=>Zn(i,Do).pipe(gt(u=>RA(u.payload.body)),Un(l),zn(u=>{let[p,_]=u,y=[Bg(p)];const{meeting:{userId:C,isWebinar:I,isOnHold:O,customerKey:D},participants:{attendeesList:B,failoverAttendeesList:P,allowTalkAttendeesList:F}}=_,Z=F.map(oe=>oe.userId);if(p.add){const oe=p.add.find(Ae=>Ae.userId===C);void 0!==oe&&(void 0!==oe.bHold&&y.push(Bh(oe.bHold)),D&&(y.push(NT({userId:C,customerKey:D})),Object.assign(oe,{userIdentity:D})),_t(am,oe));const ve=p.add.filter(Ae=>Ae.userId!==C);if(ve.length>0){const Ae=ve.filter(Be=>!VE(Be.userRole)).map(Be=>{const Q=P.find(tt=>tt.zoomID===Be.zoomID);return Q?$t($t({},Be),{},{source:Q.isOnHold?"on hold":"failover"}):Be}),Te=Ae.filter(Be=>!!Be.source).map(Be=>({zoomID:Be.zoomID}));if(y.push(ad(Te)),_t(fT,Ae),I){const Be=ve.filter(Q=>VE(Q.userRole));Be.length>0&&_t(Ic,Be.map(Q=>({userId:Q.userId,isAllowToTalk:!0})))}}}if(p.update){const oe=p.update.find(Ae=>Ae.userId===C);void 0!==oe&&(_t(Bc,oe),void 0!==oe.bHold&&y.push(Bh(oe.bHold)));const ve=p.update.filter(Ae=>!(Ae.userId===C||Z.includes(Ae.userId)));if(ve.length>0&&_t(ka,ve),I){const Ae=p.update.filter(Te=>Te.userId!==C&&Z.includes(Te.userId));Ae.length>0&&_t(Ic,Ae)}}if(p.remove){const oe=p.remove.map(ve=>{const Ae=B.find(Te=>Te.userId===ve.userId);if(Ae){if(2===ve.action&&1===ve.nUserStatus)return Ae.bHold?(y.push(LE({zoomID:Ae.zoomID,isOnHold:!0})),$t($t({},ve),{},{reason:"on hold"})):(y.push(LE({zoomID:Ae.zoomID,isOnHold:!1})),$t($t({},ve),{},{reason:"failover"}));const{audio:Te,avatar:Be,bVideoOn:Q,displayName:tt,isHost:dt,isCoHost:it,muted:ft,sharerOn:Kt,sharerPause:en}=Ae;return $t({audio:Te??"",avatar:Be??"",bVideoOn:null!=Q&&Q,displayName:tt,isHost:dt,isManager:null!=it&&it,muted:ft,sharerOn:null!=Kt&&Kt,sharerPause:!1!==Kt&&null!=en&&en},ve)}return null}).filter(ve=>!!ve);if(_t(Og,oe),I){const ve=p.remove.filter(Ae=>Z.includes(Ae.userId));ve.length>0&&_t(Ic,ve.map(Ae=>({userId:Ae.userId,isAllowToTalk:!1})))}}const ie=y.filter(oe=>oe.type===`${Bh}`);if(ie.length>0){const oe=ie[ie.length-1];y=y.filter(ve=>ve.type!==`${Bh}`),oe.payload!==O&&(y.push(oe),_t(mE,!O))}return Dn(y)})),receiveUserListFromXMPPEpic:(i,l)=>Hd(i,24595).pipe(zn(u=>{const{payload:{body:{action:p,data:_}}}=u,{meeting:{jid:y},participants:{xmppAttendeeList:C}}=l.value,I=[];if(p===qo.rename){_.forEach(D=>{I.push(BE(D))});const O=_.map(D=>Hm(D));_t(Ic,O)}if(p===qo.Remove){_.forEach(D=>{I.push(vC(D))});const O=_.map(D=>$t($t({},Hm(D)),{},{removed:!0}));_t(cm,O)}if([qo.Add,qo.List,qo.update].includes(p)){const O=_.map(D=>{const B=Hm(D);return Object.keys(B).reduce((P,F)=>(""!==B[F]&&Object.assign(P,{[F]:B[F]}),P),{})});if(_t(Ic,O),I.push(AC(O)),p===qo.update){const D=_.find(B=>B.jid===y);D&&void 0!==D.bRaiseHand&&C.find(P=>P.jid===y)?.bRaiseHand!==D.bRaiseHand&&_t("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:D.bRaiseHand})}}return Dn(I)})),handleAdmitAllSilentUsersEpic:i=>Zn(i,7951).pipe(ir(l=>{!1===l.payload.body.bStarted&&_t("ADMIT_ALL_SILENT_USERS_END",l.payload.body.bStarted)}),gt(l=>PT(l.payload.body.bStarted))),handleKVUpdateIndicationEpic:i=>Zn(i,7946).pipe(En(l=>{var u;return["bRaiseHand","feedback"].includes(null===(u=l.payload.body)||void 0===u?void 0:u.key)&&0===l.payload.body.value}),gt(l=>(_t(ka,{}),"bRaiseHand"===l.payload.body.key?xv():_C())))});const XP={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},sO=Fr({[`${Bg}`]:Et((i,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(p=>{if(p.userType===Lv.Assitant){const _=i.assistantList.find(y=>y.userId===p.userId);void 0!==_?Object.assign(_,p):i.assistantList.push(p)}else if(VE(p.userRole)){const _=i.allowTalkAttendeesList.find(y=>y.userId===p.userId);void 0!==_?Object.assign(_,p):i.allowTalkAttendeesList.push(p)}else{const _=i.attendeesList.find(y=>y.userId===p.userId);void 0!==_?Object.assign(_,p):i.attendeesList.push(p)}}),void 0!==u.update&&u.update.length>0&&u.update.forEach(p=>{const _=i.attendeesList.find(y=>y.userId===p.userId);if(void 0!==_)Object.assign(_,p);else{const y=i.allowTalkAttendeesList.find(C=>C.userId===p.userId);if(void 0!==y)Object.assign(y,p);else{const C=i.assistantList.find(I=>I.userId===p.userId);void 0!==C&&Object.assign(C,p)}}}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(p=>{const _=i.attendeesList.findIndex(y=>y.userId===p.userId);if(-1!==_)i.attendeesList.splice(_,1);else{const y=i.allowTalkAttendeesList.findIndex(C=>C.userId===p.userId);if(-1!==y)i.allowTalkAttendeesList.splice(y,1);else{const C=i.assistantList.findIndex(I=>I.userId===p.userId);-1!==C&&i.assistantList.splice(C,1)}}})}),[`${AC}`]:Et((i,l)=>{let{payload:u}=l;const{xmppAttendeeList:p}=i,_=p.map(y=>y.jid);u.forEach(y=>{const{jid:C}=y,I=_.indexOf(C);-1!==I?Object.assign(p[I],y):p.push(y)})}),[`${PT}`]:Et((i,l)=>{let{payload:u}=l;i.isAdmitAllSilentUsers=u}),[`${xv}`]:Et(i=>{i.attendeesList.forEach(l=>{l.bRaiseHand&&(l.bRaiseHand=!1)})}),[`${_C}`]:Et(i=>{i.attendeesList.forEach(l=>{l.feedback>0&&(l.feedback=0)})}),[`${LE}`]:Et((i,l)=>{let{payload:u}=l;i.failoverAttendeesList.push(u)}),[`${ad}`]:Et((i,l)=>{let{payload:u}=l;u.forEach(p=>{const _=i.failoverAttendeesList.findIndex(y=>y.zoomID===p.zoomID);-1!==_&&i.failoverAttendeesList.splice(_,1)})}),[`${BE}`]:Et((i,l)=>{let{payload:u}=l;const{jid:p,name:_}=u,y=i.xmppAttendeeList.find(C=>C.jid===p);y&&(y.displayName=_)}),[`${vC}`]:Et((i,l)=>{let{payload:u}=l;const{jid:p}=u,_=i.xmppAttendeeList.findIndex(y=>y.jid===p);-1!==p&&i.xmppAttendeeList.splice(_,1)}),[`${NT}`]:Et((i,l)=>{let{payload:u}=l;const{userId:p,customerKey:_}=u,y=i.attendeesList.find(C=>C.userId===p);y&&(y.userIdentity=_)}),[`${gC}`]:()=>XP},XP),ZP=Ls(LB),So={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1,enforceVirtualBackground:!1},OA=Fr({[`${Mo}`]:Et((i,l)=>{let{payload:u}=l;i.audioDecodeStatus=u}),[`${IS}`]:Et((i,l)=>{let{payload:u}=l;i.audioEncodeStatus=u}),[`${Lp}`]:Et((i,l)=>{let{payload:u}=l;i.sharingDecodeStatus=u}),[`${wS}`]:Et((i,l)=>{let{payload:u}=l;i.sharingEncodeStatus=u}),[`${cv}`]:Et((i,l)=>{let{payload:u}=l;i.videoDecodeStatus=u}),[`${nT}`]:Et((i,l)=>{let{payload:u}=l;i.videoEncodeStatus=u}),[`${Jy}`]:Et((i,l)=>{let{payload:u}=l;i.mediaConstraints=u.mediaConstraints,i.assetsPath=u.assetsPath,i.fileWithVersion=u.fileWithVersion,i.enforceMultipleVideos=u.enforceMultipleVideos,i.enforceVirtualBackground=u.enforceVirtualBackground}),[`${bg}`]:Et((i,l)=>{let{payload:u}=l;const{type:p,encrypeKey:_,additionalType:y}=u,C={encrypeKey:_,additionalType:y};"audio"===p?i.audioEncrypt=C:"video"===p?i.videoEncrypt=C:"sharing"===p&&(i.sharingEncrypt=C)}),[`${xc}`]:i=>$t($t({},So),{},{mediaConstraints:i.mediaConstraints,assetsPath:i.assetsPath,fileWithVersion:i.fileWithVersion})},So);var QI={exports:{}},Vb={};function jb(i,l,u,p){const{meeting:{userId:_},audio:{localShareAudioUserMutedList:y},share:{isReceiveSharingFromMainSession:C}}=p;return y.filter(I=>I.userId!==l).forEach(I=>{i.setSharingAudioVolume(I.userId,!0,I.isFromMainSession)}),i.setSharingAudioVolume(l,u,!!C),l===_?$i(u):VT({userId:l,muted:u})}function xa(i,l,u){const{audio:{audioSsrc:p,activeMicrophone:_,activeSpeaker:y,isAllowToTalk:C,isSpeakerOnly:I},meeting:{svcUrl:O,conId:D,reportDomain:B,isAudioBridgeEnabled:P}}=l,F=Kr(l),Z=I||Na(F.userRole)&&!C,ie=u??!Z;return zg()&&!P&&console.warn("Cannot start audio due to the service is not ready."),i.joinComputerAudio(p,_,y,ie,zg()?{rwgHost:O,cid:D,nginxHost:B}:void 0)}function Qb(i,l,u){return aO.apply(this,arguments)}function aO(){return aO=V(function*(i,l,u){const p=[],{audio:{isJoinComputerAudioBeforeSharingAudio:_,mutedBeforeSharingAudio:y}}=u,C=Kr(u);return!0===_&&(yield xa(i,u),p.push(ym(void 0)),!1===y&&(p.push(Yh(!0)),l.mute(C.userId,!1)),p.push(rf(void 0))),p}),aO.apply(this,arguments)}function HI(i,l,u){return cO.apply(this,arguments)}function cO(){return cO=V(function*(i,l,u){const{audio:{isSharingAudio:p},meeting:{userId:_}}=u,y=[];if(y.push(jb(i,_,!0,u)),p){yield i.leaveSharingAudio(!1),y.push(Uv(!1));const C=yield Qb(i,l,u);y.push(...C),setTimeout(()=>{_t(gm,{state:"off"})},0)}return y.push(Em(!1)),y}),cO.apply(this,arguments)}function uO(i,l,u){return DA.apply(this,arguments)}function DA(){return DA=V(function*(i,l,u){const{audio:{audioSsrc:p,activeMicrophone:_,activeSpeaker:y}}=u,C=Kr(u),I=yield(O=V(function*(D,B){const P=[],F=Kr(B),{audio:{isMicrophoneForbidden:Z}}=B;return"computer"===F?.audio&&(P.push(ym(!0)),P.push(rf(F.muted)),yield D.leaveComputerAudio(),P.push(FT(0)),Z&&P.push(SC(!1))),P}),function(D,B){return O.apply(this,arguments)})(i,u);var O;return yield i.leaveSharingAudio(!0),yield i.joinSharingAudio({ssrc:p,microphoneDeviceId:_,speakerDeviceId:y,isCaptureAudio:Na(C.userRole)}),I.push(Em(!0)),I.push(Uv(!0)),I.push(jb(i,C.userId,!1,u)),I.findIndex(O=>O.type===`${ym}`&&!0===O.payload)>-1&&(I.push(Yh(!0)),l.mute(u.meeting.userId,!0),_t(eC,{source:Y.MutedSource.SharingAudio})),setTimeout(()=>{_t(gm,{state:"on"})},0),I}),DA.apply(this,arguments)}(function(i,l){var u=function(Pt,Bt){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,on){ot.__proto__=on}||function(ot,on){for(var An in on)on.hasOwnProperty(An)&&(ot[An]=on[An])})(Pt,Bt)};function p(Pt,Bt){function ot(){this.constructor=Pt}u(Pt,Bt),Pt.prototype=null===Bt?Object.create(Bt):(ot.prototype=Bt.prototype,new ot)}var y,_=function(){return _=Object.assign||function(Pt){for(var Bt,ot=1,on=arguments.length;ot<on;ot++)for(var An in Bt=arguments[ot])Object.prototype.hasOwnProperty.call(Bt,An)&&(Pt[An]=Bt[An]);return Pt},_.apply(this,arguments)},C=function(Pt,Bt){var ot=new Uint8Array(Pt.byteLength+Bt.byteLength);return ot.set(new Uint8Array(Pt),0),ot.set(new Uint8Array(Bt),Pt.byteLength),ot.buffer},I="/";(y=i.TransformDataFormat||(i.TransformDataFormat={})).STRING="string",y.BLOB="blob",y.ARRAY_BUFFER="arraybuffer";var O=function(Pt){return Blob&&Pt instanceof Blob?"blob":ArrayBuffer&&Pt instanceof ArrayBuffer?"arrayBuffer":typeof Pt},D=[],B=function(){for(var Pt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Bt="",ot=0;ot<32;ot++)Bt+=Pt[Math.round(61*Math.random())];return-1!==D.indexOf(Bt)?B():(D.push(Bt),Bt)},P=function(Pt){return Pt.arrayBuffer?Pt.arrayBuffer():new Promise(function(Bt,ot){var on=new FileReader;on.readAsArrayBuffer(Pt),on.onload=function(An){Bt(An.target&&An.target.result)},on.onerror=function(An){ot(An)}})},F=function(Pt){return Pt.text?Pt.text():new Promise(function(Bt,ot){var on=new FileReader;on.readAsText(Pt),on.onload=function(An){Bt(An.target&&An.target.result)},on.onerror=function(An){ot(An)}})},Z=function(Pt,Bt){return Promise.resolve(new Blob([new Uint8Array(Pt)],{type:Bt}))},ie=function(Pt,Bt){var ot=new Blob([Pt],{type:Bt||"text/plain"});return F(ot)},oe=function(Pt,Bt){return Promise.resolve(new Blob([Pt],{type:Bt||"text/plain"}))},ve=function(Pt,Bt){return P(new Blob([Pt],{type:Bt||"text/plain"}))};function Ae(Pt){var Bt=(Pt||"").split(".");return Bt[Bt.length-1]||""}function Te(Pt){var Bt=(Pt||"").lastIndexOf(I);return Bt<0?"":Pt.slice(0,Bt)}function Be(Pt){var Bt=(Pt||"").lastIndexOf(I),ot=Bt<0?Pt:Pt.slice(Bt+1),on=(ot||"").lastIndexOf(".");return on<0?ot:ot.slice(0,on)}function Q(Pt){return["png","jpg","jpeg","svg"].includes(Ae(Pt))}function tt(Pt){return"json"===Ae(Pt)}function dt(Pt){return"version"===Ae(Pt)}function ft(Pt,Bt){return l.loadAsync(Pt).then(function(ot){return Promise.all(ot.filter(function(on,An){return!An.dir}).map(function(on){var qn,An=tt((qn=on).name)?"string":Q(qn.name)?"base64":dt(qn.name)?"text":"blob";return Bt?.setUnZipFormat&&(An=Bt.setUnZipFormat(on)||An),on.async(An).then(function(qn){var cr=qn,ri=Ae(on.name),Yr="svg"===ri?"svg+xml":ri;return"base64"===An&&Q(on.name)&&!qn.startsWith("data")&&(cr="data:image/"+Yr+";base64,"+cr),{data:cr,file:on}})}))}).then(function(ot){return function it(Pt,Bt){return Pt.reduce(function(ot,on){var An,qn=on.data,cr=on.file,ri=Ae(cr.name),Yr=Te(cr.name),kr=Be(cr.name),mt=(Bt?.combineExtNames||[]).includes(ri)&&"string"==typeof qn,Ui=mt?""+(Yr?""+Yr+I+ri:ri):cr.name;return mt&&ot.some(function(Yc){return Yc.path===Ui&&(Yc.data[kr]=qn,!0)})||ot.push({path:Ui,extName:ri,data:mt?(An={},An[kr]=qn,An):qn,shouldCombine:mt}),ot},[]).map(function(ot){var on=ot.data,An=ot.shouldCombine,qn=function(cr,ri){var Yr={};for(var kr in cr)Object.prototype.hasOwnProperty.call(cr,kr)&&ri.indexOf(kr)<0&&(Yr[kr]=cr[kr]);if(null!=cr&&"function"==typeof Object.getOwnPropertySymbols){var mt=0;for(kr=Object.getOwnPropertySymbols(cr);mt<kr.length;mt++)ri.indexOf(kr[mt])<0&&Object.prototype.propertyIsEnumerable.call(cr,kr[mt])&&(Yr[kr[mt]]=cr[kr[mt]])}return Yr}(ot,["data","shouldCombine"]);return _(_({},qn),{data:An?JSON.stringify(on):on})})}(ot,Bt)})}function Kt(Pt,Bt){var qc,ot=Bt||{},on=ot.encoding,An=ot.blobType,qn=ot.unZipOptions;if("blob"===O(qc=Pt)&&(qc.type.includes("compressed")||qc.type.includes("zip"))&&!qn?.disableUnZip)return ft(Pt,qn);if(!on)return Promise.resolve(Pt);var cr=O(Pt),ri="string"===cr,Yr="blob"===cr,kr="arrayBuffer"===cr;if(on===i.TransformDataFormat.BLOB){var mt=Pt;if(ri)return F(mt);if(kr)return P(mt)}else if(on===i.TransformDataFormat.ARRAY_BUFFER){var Ui=Pt;if(ri)return ie(Ui,An);if(Yr)return Z(Ui,An)}else if(on===i.TransformDataFormat.STRING){var Yc=Pt;if(Yr)return oe(Yc,An);if(kr)return ve(Yc,An)}return Promise.resolve(Pt)}function en(Pt){var Bt=0,ot=!1,on=function(){Bt>90||ot||(Pt(Bt+=(100-Bt)/50),requestAnimationFrame(on))};return on(),{finish:function(){100===Bt||ot||(Bt=100,Pt(100))},abort:function(){100===Bt||ot||(ot=!0)},get curProgress(){return Bt}}}function zt(){}function Ot(){Ot.init.call(this)}function _n(Pt){return void 0===Pt._maxListeners?Ot.defaultMaxListeners:Pt._maxListeners}function Gn(Pt,Bt,ot){if(Bt)Pt.call(ot);else for(var on=Pt.length,An=Yt(Pt,on),qn=0;qn<on;++qn)An[qn].call(ot)}function Dt(Pt,Bt,ot,on){if(Bt)Pt.call(ot,on);else for(var An=Pt.length,qn=Yt(Pt,An),cr=0;cr<An;++cr)qn[cr].call(ot,on)}function at(Pt,Bt,ot,on,An){if(Bt)Pt.call(ot,on,An);else for(var qn=Pt.length,cr=Yt(Pt,qn),ri=0;ri<qn;++ri)cr[ri].call(ot,on,An)}function Ve(Pt,Bt,ot,on,An,qn){if(Bt)Pt.call(ot,on,An,qn);else for(var cr=Pt.length,ri=Yt(Pt,cr),Yr=0;Yr<cr;++Yr)ri[Yr].call(ot,on,An,qn)}function nt(Pt,Bt,ot,on){if(Bt)Pt.apply(ot,on);else for(var An=Pt.length,qn=Yt(Pt,An),cr=0;cr<An;++cr)qn[cr].apply(ot,on)}function Tt(Pt,Bt,ot,on){var An,qn,cr,Yr;if("function"!=typeof ot)throw new TypeError('"listener" argument must be a function');if((qn=Pt._events)?(qn.newListener&&(Pt.emit("newListener",Bt,ot.listener?ot.listener:ot),qn=Pt._events),cr=qn[Bt]):(qn=Pt._events=new zt,Pt._eventsCount=0),cr){if("function"==typeof cr?cr=qn[Bt]=on?[ot,cr]:[cr,ot]:on?cr.unshift(ot):cr.push(ot),!cr.warned&&(An=_n(Pt))&&An>0&&cr.length>An){cr.warned=!0;var ri=new Error("Possible EventEmitter memory leak detected. "+cr.length+" "+Bt+" listeners added. Use emitter.setMaxListeners() to increase limit");ri.name="MaxListenersExceededWarning",ri.emitter=Pt,ri.type=Bt,ri.count=cr.length,Yr=ri,"function"==typeof console.warn?console.warn(Yr):console.log(Yr)}}else cr=qn[Bt]=ot,++Pt._eventsCount;return Pt}function ht(Pt,Bt,ot){var on=!1;function An(){Pt.removeListener(Bt,An),on||(on=!0,ot.apply(Pt,arguments))}return An.listener=ot,An}function qe(Pt){var Bt=this._events;if(Bt){var ot=Bt[Pt];if("function"==typeof ot)return 1;if(ot)return ot.length}return 0}function Yt(Pt,Bt){for(var ot=new Array(Bt);Bt--;)ot[Bt]=Pt[Bt];return ot}zt.prototype=Object.create(null),Ot.EventEmitter=Ot,Ot.usingDomains=!1,Ot.prototype.domain=void 0,Ot.prototype._events=void 0,Ot.prototype._maxListeners=void 0,Ot.defaultMaxListeners=10,Ot.init=function(){this.domain=null,Ot.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new zt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ot.prototype.setMaxListeners=function(Pt){if("number"!=typeof Pt||Pt<0||isNaN(Pt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Pt,this},Ot.prototype.getMaxListeners=function(){return _n(this)},Ot.prototype.emit=function(Pt){var Bt,ot,on,An,qn,cr,ri,Yr="error"===Pt;if(cr=this._events)Yr=Yr&&null==cr.error;else if(!Yr)return!1;if(ri=this.domain,Yr){if(Bt=arguments[1],!ri){if(Bt instanceof Error)throw Bt;var kr=new Error('Uncaught, unspecified "error" event. ('+Bt+")");throw kr.context=Bt,kr}return Bt||(Bt=new Error('Uncaught, unspecified "error" event')),Bt.domainEmitter=this,Bt.domain=ri,Bt.domainThrown=!1,ri.emit("error",Bt),!1}if(!(ot=cr[Pt]))return!1;var mt="function"==typeof ot;switch(on=arguments.length){case 1:Gn(ot,mt,this);break;case 2:Dt(ot,mt,this,arguments[1]);break;case 3:at(ot,mt,this,arguments[1],arguments[2]);break;case 4:Ve(ot,mt,this,arguments[1],arguments[2],arguments[3]);break;default:for(An=new Array(on-1),qn=1;qn<on;qn++)An[qn-1]=arguments[qn];nt(ot,mt,this,An)}return!0},Ot.prototype.on=Ot.prototype.addListener=function(Pt,Bt){return Tt(this,Pt,Bt,!1)},Ot.prototype.prependListener=function(Pt,Bt){return Tt(this,Pt,Bt,!0)},Ot.prototype.once=function(Pt,Bt){if("function"!=typeof Bt)throw new TypeError('"listener" argument must be a function');return this.on(Pt,ht(this,Pt,Bt)),this},Ot.prototype.prependOnceListener=function(Pt,Bt){if("function"!=typeof Bt)throw new TypeError('"listener" argument must be a function');return this.prependListener(Pt,ht(this,Pt,Bt)),this},Ot.prototype.removeListener=function(Pt,Bt){var ot,on,An,qn,cr;if("function"!=typeof Bt)throw new TypeError('"listener" argument must be a function');if(!(on=this._events))return this;if(!(ot=on[Pt]))return this;if(ot===Bt||ot.listener&&ot.listener===Bt)0==--this._eventsCount?this._events=new zt:(delete on[Pt],on.removeListener&&this.emit("removeListener",Pt,ot.listener||Bt));else if("function"!=typeof ot){for(An=-1,qn=ot.length;qn-- >0;)if(ot[qn]===Bt||ot[qn].listener&&ot[qn].listener===Bt){cr=ot[qn].listener,An=qn;break}if(An<0)return this;if(1===ot.length){if(ot[0]=void 0,0==--this._eventsCount)return this._events=new zt,this;delete on[Pt]}else!function(ri,Yr){for(var kr=Yr,mt=kr+1,Ui=ri.length;mt<Ui;kr+=1,mt+=1)ri[kr]=ri[mt];ri.pop()}(ot,An);on.removeListener&&this.emit("removeListener",Pt,cr||Bt)}return this},Ot.prototype.removeAllListeners=function(Pt){var Bt,ot;if(!(ot=this._events))return this;if(!ot.removeListener)return 0===arguments.length?(this._events=new zt,this._eventsCount=0):ot[Pt]&&(0==--this._eventsCount?this._events=new zt:delete ot[Pt]),this;if(0===arguments.length){for(var on,An=Object.keys(ot),qn=0;qn<An.length;++qn)"removeListener"!==(on=An[qn])&&this.removeAllListeners(on);return this.removeAllListeners("removeListener"),this._events=new zt,this._eventsCount=0,this}if("function"==typeof(Bt=ot[Pt]))this.removeListener(Pt,Bt);else if(Bt)do{this.removeListener(Pt,Bt[Bt.length-1])}while(Bt[0]);return this},Ot.prototype.listeners=function(Pt){var Bt,ot=this._events;return ot&&(Bt=ot[Pt])?"function"==typeof Bt?[Bt.listener||Bt]:function(on){for(var An=new Array(on.length),qn=0;qn<An.length;++qn)An[qn]=on[qn].listener||on[qn];return An}(Bt):[]},Ot.listenerCount=function(Pt,Bt){return"function"==typeof Pt.listenerCount?Pt.listenerCount(Bt):qe.call(Pt,Bt)},Ot.prototype.listenerCount=qe,Ot.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Tn=function(Pt){function Bt(ot){var on=Pt.call(this)||this;return on.timeout=ot?.timeout||3e4,on}return p(Bt,Pt),Bt.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},Bt.prototype.startTimeoutCheck=function(){var ot=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){ot.finished||(ot.finished=!0,ot.data=null,ot.emit("timeout")),ot.clearTimeoutCheck()},this.timeout))},Bt}(Ot),Yn=function(Pt){function Bt(ot){var on=Pt.call(this,ot)||this;return on.uuid=B(),on.domParams=ot||{},on}return p(Bt,Pt),Bt.prototype.jsonp=function(){var ot=this;if(!this.finished){var on=this.domParams,An=on.url,qn=on.jsonpCallbackName,cr=void 0===qn?"callback":qn,ri=on.body,Yr=on.integrity;this.script=document.createElement("script"),Yr&&(this.script.integrity=Yr,this.script.crossOrigin="anonymous");var kr="";ri&&Object.entries(ri).forEach(function(mt){kr+=(kr?"&":"")+mt[0]+"="+mt[1]}),kr+=(kr?"&":"")+cr+"="+this.uuid,this.script.src=An+(An.includes("?")?"":"?")+kr,this.jsonpCallback(),this.progressMonitory=en(function(mt){ot.finished||ot.emit("progressUpdated",mt)}),document.body.appendChild(this.script)}},Bt.prototype.clearSideEffect=function(ot){if(void 0===ot&&(ot=!1),document.body.removeChild(this.script),ot){var on=this.uuid;window[this.uuid]=function(){window[on]&&delete window[on]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},Bt.prototype.jsonpCallback=function(){var ot=this;this.script.onerror=function(on){var An;ot.finished||(ot.clearSideEffect(),null===(An=ot.progressMonitory)||void 0===An||An.abort(),ot.emit("error",new Error("string"==typeof on?on:"load jsonp script failed")))},window[this.uuid]=function(on){var An;if(!ot.finished){var qn=ot.domParams,cr=qn.encoding,ri=qn.blobType,Yr=qn.unZipOptions,kr=qn.beforeTransformData,mt=qn.afterTransformData;null===(An=ot.progressMonitory)||void 0===An||An.finish(),ot.clearSideEffect(),(kr?kr(on||""):Promise.resolve(on||"")).then(function(Ui){return Kt(Ui,{encoding:cr,blobType:ri,unZipOptions:Yr}).then(function(Yc){return(mt?mt(Yc):Promise.resolve(Yc)).then(function(qc){return ot.emit("finished",qc)})})}).catch(function(Ui){return ot.emit("error",Ui)})}}},Bt.prototype.abort=function(){this.clearSideEffect(!0)},Bt}(Tn),wt=function(Pt){function Bt(ot){var on=Pt.call(this,ot)||this;return on.socketParams=ot||{},on}return p(Bt,Pt),Bt.prototype.write=function(ot,on){ot&&!this.finished&&(ot instanceof Error?this.handleError(ot):(this.data?this.appendData(ot):this.data=ot,this.handlePerCentUpdate(on)))},Bt.prototype.handlePerCentUpdate=function(ot){void 0===ot||this.finished||this.emit("progressUpdated",ot)},Bt.prototype.handleError=function(ot){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",ot)},Bt.prototype.appendData=function(ot){O(ot)===O(this.data)?"string"==typeof ot?this.data+=ot:Blob&&ot instanceof Blob?this.data=new Blob([this.data,ot],{type:ot.type}):ArrayBuffer&&ot instanceof ArrayBuffer&&(this.data=C(this.data,ot)):this.handleError(new Error("every piece of the data format must be the same"))},Bt.prototype.end=function(ot){var on=this;if(!this.finished){this.handlePerCentUpdate(100),ot&&this.write(ot);var An=this.socketParams,qn=An.encoding,cr=An.blobType,ri=An.unZipOptions,Yr=An.beforeTransformData,kr=An.afterTransformData;(Yr?Yr(this.data):Promise.resolve(this.data)).then(function(mt){return Kt(mt,{encoding:qn,blobType:cr,unZipOptions:ri}).then(function(Ui){return(kr?kr(Ui):Promise.resolve(Ui)).then(function(Yc){return on.emit("finished",Yc)})})}).catch(function(mt){return on.emit("error",mt)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},Bt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},Bt}(Tn),Sa=function(Pt){function Bt(ot){var on=Pt.call(this,ot)||this;return on.xhrParams=ot||{},on.xhrParams.headers=_({},on.xhrParams.headers||{}),on}return p(Bt,Pt),Bt.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},Bt.prototype.ajax=function(){var ot=this;if(!this.finished)if(this.xhrParams.url){var on=this.xhrParams,An=on.headers,qn=void 0===An?{}:An,cr=on.url,ri=on.body,Yr=void 0===ri?{}:ri,kr=on.method,mt=void 0===kr?"POST":kr,Ui=on.encoding,Yc=on.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var qc=this.supportFetch()?en(function(vr){ot.finished||ot.emit("progressUpdated",vr)}):null;(this.supportFetch()?fetch(new Request(cr,_({method:mt,headers:qn,body:"GET"===mt?void 0:JSON.stringify(Yr),signal:this.controller.signal},Yc?{integrity:Yc,mode:"cors"}:{}))).then(function(vr){return vr.ok?Ui===i.TransformDataFormat.STRING?vr.text():Ui===i.TransformDataFormat.ARRAY_BUFFER?vr.arrayBuffer():vr.blob():Promise.reject(new Error("xhr download "+cr+" failed!"))}):new Promise(function(vr,Va){var Ou=new XMLHttpRequest;ot.controller=Ou,Ou.open(mt,cr),Ou.responseType=Ui===i.TransformDataFormat.STRING?"text":Ui===i.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(qn).forEach(function(Cp){Ou.setRequestHeader(Cp[0],Cp[1])}),Ou.onload=function(){var Cp=Ou.status,ul=Ou.statusText;Cp>=200&&Cp<300||304===Cp?vr(Ou.response):Va(new Error(Cp+": "+ul))},Ou.onprogress=function(Cp){var Ed=Cp||{},ul=Ed.total,jl=Ed.loaded;void 0===jl||ot.finished||(ul?ot.emit("progressUpdated",jl/ul*100):jl&&!qc&&(qc=en(function(V0){ot.finished||ot.emit("progressUpdated",V0)})))},Ou.onerror=function(){Va(new Error("xhr download "+cr+" failed!"))},Ou.send(JSON.stringify(Yr))})).then(function(vr){if(!ot.finished){var Va=ot.xhrParams,Ou=Va.encoding,Cp=Va.blobType,Ed=Va.unZipOptions,ul=Va.beforeTransformData,jl=Va.afterTransformData;qc?.finish(),ot.finished=!0,ot.clearTimeoutCheck(),(ul?ul(vr):Promise.resolve(vr)).then(function(V0){return Kt(V0,{encoding:Ou,blobType:Cp,unZipOptions:Ed}).then(function(hM){return(jl?jl(hM):Promise.resolve(hM)).then(function(vy){return ot.emit("finished",vy)})})}).catch(function(V0){return ot.emit("error",V0)})}}).catch(function(vr){ot.finished||(ot.finished=!0,ot.clearTimeoutCheck(),qc?.abort(),ot.emit("error",vr))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},Bt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},Bt}(Tn),Wn=0;Ot.defaultMaxListeners=500;var no,Ys=new Ot,$o="ThreadPoolReady",Ru=function(){Wn-=1,Ys.emit($o)};(no=i.DownloaderType||(i.DownloaderType={})).XHR="xhr",no.DOM="dom",no.SOCKET="socket";var Xo=function(Pt){function Bt(ot){var on=Pt.call(this)||this;return on.aborted=!1,on.downloadParmas=_({type:i.DownloaderType.XHR},ot),on.id=B(),on}return p(Bt,Pt),Bt.prototype.start=function(){var ot=this;Wn+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var on=this.downloadParmas,qn=on.xhrParams,cr=on.domParams,ri=on.socketParams;switch(on.type){case i.DownloaderType.DOM:this.downloader=new Yn(cr),this.downloader.jsonp();break;case i.DownloaderType.SOCKET:this.downloader=new wt(ri);break;default:this.downloader=new Sa(qn),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(Yr){ot.emit("error",Yr),ot.onErrorCallback&&ot.onErrorCallback(Yr),Ru()}).on("finished",function(Yr){ot.emit("complete",Yr),ot.onCompleteCallback&&ot.onCompleteCallback(Yr),Ru()}).on("progressUpdated",function(Yr){ot.progress=Yr,ot.emit("progressUpdated",Yr),ot.onProgressUpdatedCallback&&ot.onProgressUpdatedCallback(Yr)}).on("timeout",function(){ot.emit("timeout"),ot.onTimeoutCallback&&ot.onTimeoutCallback(),Ru()}),this},Bt.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var ot=new Error("file download has been aborted");return this.emit("abort",ot),this.onAbortCallback&&this.onAbortCallback(ot),Ru(),this},Bt.prototype.onDownloadStart=function(ot){return this.onDownloadStartCallback=ot,this},Bt.prototype.onProgressUpdated=function(ot){return this.onProgressUpdatedCallback=ot,this},Bt.prototype.onError=function(ot){return this.onErrorCallback=ot,this},Bt.prototype.onComplete=function(ot){return this.onCompleteCallback=ot,this},Bt.prototype.onAbort=function(ot){return this.onAbortCallback=ot,this},Bt.prototype.onTimeout=function(ot){return this.onTimeoutCallback=ot,this},Bt.prototype.isInProgress=function(){return void 0!==this.progress},Bt.prototype.isFinished=function(){return 100===this.progress},Bt}(Ot),cl=function(){function Pt(Bt){this.taskList=[],this.options=Bt||{};var ot=this.options.threadLimit;if((void 0===ot?6:ot)>6)throw new Error("threadLimit must be lower than 6");Ys.on($o,this.startNextTask.bind(this))}return Pt.prototype.download=function(Bt){var ot=new Xo(Bt),on=this.removeTask.bind(this,ot);return ot.on("abort",on),this.taskList.push(ot),this.checkTaskReady(ot),ot},Pt.prototype.startNextTask=function(){var Bt=this.taskList.find(function(ot){return!ot.isInProgress()});Bt&&this.checkTaskReady(Bt)},Pt.prototype.checkTaskReady=function(Bt){var ot=this.options.threadLimit,on=void 0===ot?6:ot;if(!(this.taskList.findIndex(function(qn){return!qn.isInProgress()})>=on||Wn+1>6)){var An=this.removeTask.bind(this,Bt);Bt.on("complete",An),Bt.on("error",An),Bt.on("timeout",An),setTimeout(function(){return Bt.start()},0)}},Pt.prototype.removeTask=function(Bt){var ot=this;this.taskList.some(function(on,An){return on===Bt&&(setTimeout(function(){return Bt.removeAllListeners()},0),ot.taskList.splice(An,1),!0)})},Pt}();i.DownloadTask=Xo,i.IDownloadManager=cl,i.appendBuffer=C,i.arrayBufferToBlob=Z,i.arrayBufferToString=ie,i.blobToArrayBuffer=P,i.blobToText=F,i.genUuid=B,i.getDataFormat=O,i.getExtName=Ae,i.getFileName=Be,i.getFullPathName=Te,i.isImgFile=Q,i.isJsonFile=tt,i.isVersionFile=dt,i.monitorProgress=en,i.sep=I,i.stringToArrayBuffer=ve,i.stringToBlob=oe,i.transformData=Kt,Object.defineProperty(i,"__esModule",{value:!0})})(Vb,SS(Object.freeze({__proto__:null,default:{}}))),Ud(Vb),function(i,l){var u=function(Dt,at){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ve,nt){Ve.__proto__=nt}||function(Ve,nt){for(var Tt in nt)nt.hasOwnProperty(Tt)&&(Ve[Tt]=nt[Tt])})(Dt,at)};function p(Dt,at){function Ve(){this.constructor=Dt}u(Dt,at),Dt.prototype=null===at?Object.create(at):(Ve.prototype=at.prototype,new Ve)}var _=function(){return _=Object.assign||function(Dt){for(var at,Ve=1,nt=arguments.length;Ve<nt;Ve++)for(var Tt in at=arguments[Ve])Object.prototype.hasOwnProperty.call(at,Tt)&&(Dt[Tt]=at[Tt]);return Dt},_.apply(this,arguments)};function y(){}function C(){C.init.call(this)}function I(Dt){return void 0===Dt._maxListeners?C.defaultMaxListeners:Dt._maxListeners}function O(Dt,at,Ve){if(at)Dt.call(Ve);else for(var nt=Dt.length,Tt=ve(Dt,nt),ht=0;ht<nt;++ht)Tt[ht].call(Ve)}function D(Dt,at,Ve,nt){if(at)Dt.call(Ve,nt);else for(var Tt=Dt.length,ht=ve(Dt,Tt),qe=0;qe<Tt;++qe)ht[qe].call(Ve,nt)}function B(Dt,at,Ve,nt,Tt){if(at)Dt.call(Ve,nt,Tt);else for(var ht=Dt.length,qe=ve(Dt,ht),Yt=0;Yt<ht;++Yt)qe[Yt].call(Ve,nt,Tt)}function P(Dt,at,Ve,nt,Tt,ht){if(at)Dt.call(Ve,nt,Tt,ht);else for(var qe=Dt.length,Yt=ve(Dt,qe),Tn=0;Tn<qe;++Tn)Yt[Tn].call(Ve,nt,Tt,ht)}function F(Dt,at,Ve,nt){if(at)Dt.apply(Ve,nt);else for(var Tt=Dt.length,ht=ve(Dt,Tt),qe=0;qe<Tt;++qe)ht[qe].apply(Ve,nt)}function Z(Dt,at,Ve,nt){var Tt,ht,qe,Tn;if("function"!=typeof Ve)throw new TypeError('"listener" argument must be a function');if((ht=Dt._events)?(ht.newListener&&(Dt.emit("newListener",at,Ve.listener?Ve.listener:Ve),ht=Dt._events),qe=ht[at]):(ht=Dt._events=new y,Dt._eventsCount=0),qe){if("function"==typeof qe?qe=ht[at]=nt?[Ve,qe]:[qe,Ve]:nt?qe.unshift(Ve):qe.push(Ve),!qe.warned&&(Tt=I(Dt))&&Tt>0&&qe.length>Tt){qe.warned=!0;var Yt=new Error("Possible EventEmitter memory leak detected. "+qe.length+" "+at+" listeners added. Use emitter.setMaxListeners() to increase limit");Yt.name="MaxListenersExceededWarning",Yt.emitter=Dt,Yt.type=at,Yt.count=qe.length,Tn=Yt,"function"==typeof console.warn?console.warn(Tn):console.log(Tn)}}else qe=ht[at]=Ve,++Dt._eventsCount;return Dt}function ie(Dt,at,Ve){var nt=!1;function Tt(){Dt.removeListener(at,Tt),nt||(nt=!0,Ve.apply(Dt,arguments))}return Tt.listener=Ve,Tt}function oe(Dt){var at=this._events;if(at){var Ve=at[Dt];if("function"==typeof Ve)return 1;if(Ve)return Ve.length}return 0}function ve(Dt,at){for(var Ve=new Array(at);at--;)Ve[at]=Dt[at];return Ve}y.prototype=Object.create(null),C.EventEmitter=C,C.usingDomains=!1,C.prototype.domain=void 0,C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.init=function(){this.domain=null,C.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new y,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(Dt){if("number"!=typeof Dt||Dt<0||isNaN(Dt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Dt,this},C.prototype.getMaxListeners=function(){return I(this)},C.prototype.emit=function(Dt){var at,Ve,nt,Tt,ht,qe,Yt,Tn="error"===Dt;if(qe=this._events)Tn=Tn&&null==qe.error;else if(!Tn)return!1;if(Yt=this.domain,Tn){if(at=arguments[1],!Yt){if(at instanceof Error)throw at;var Yn=new Error('Uncaught, unspecified "error" event. ('+at+")");throw Yn.context=at,Yn}return at||(at=new Error('Uncaught, unspecified "error" event')),at.domainEmitter=this,at.domain=Yt,at.domainThrown=!1,Yt.emit("error",at),!1}if(!(Ve=qe[Dt]))return!1;var wt="function"==typeof Ve;switch(nt=arguments.length){case 1:O(Ve,wt,this);break;case 2:D(Ve,wt,this,arguments[1]);break;case 3:B(Ve,wt,this,arguments[1],arguments[2]);break;case 4:P(Ve,wt,this,arguments[1],arguments[2],arguments[3]);break;default:for(Tt=new Array(nt-1),ht=1;ht<nt;ht++)Tt[ht-1]=arguments[ht];F(Ve,wt,this,Tt)}return!0},C.prototype.on=C.prototype.addListener=function(Dt,at){return Z(this,Dt,at,!1)},C.prototype.prependListener=function(Dt,at){return Z(this,Dt,at,!0)},C.prototype.once=function(Dt,at){if("function"!=typeof at)throw new TypeError('"listener" argument must be a function');return this.on(Dt,ie(this,Dt,at)),this},C.prototype.prependOnceListener=function(Dt,at){if("function"!=typeof at)throw new TypeError('"listener" argument must be a function');return this.prependListener(Dt,ie(this,Dt,at)),this},C.prototype.removeListener=function(Dt,at){var Ve,nt,Tt,ht,qe;if("function"!=typeof at)throw new TypeError('"listener" argument must be a function');if(!(nt=this._events))return this;if(!(Ve=nt[Dt]))return this;if(Ve===at||Ve.listener&&Ve.listener===at)0==--this._eventsCount?this._events=new y:(delete nt[Dt],nt.removeListener&&this.emit("removeListener",Dt,Ve.listener||at));else if("function"!=typeof Ve){for(Tt=-1,ht=Ve.length;ht-- >0;)if(Ve[ht]===at||Ve[ht].listener&&Ve[ht].listener===at){qe=Ve[ht].listener,Tt=ht;break}if(Tt<0)return this;if(1===Ve.length){if(Ve[0]=void 0,0==--this._eventsCount)return this._events=new y,this;delete nt[Dt]}else!function(Yt,Tn){for(var Yn=Tn,wt=Yn+1,Sa=Yt.length;wt<Sa;Yn+=1,wt+=1)Yt[Yn]=Yt[wt];Yt.pop()}(Ve,Tt);nt.removeListener&&this.emit("removeListener",Dt,qe||at)}return this},C.prototype.removeAllListeners=function(Dt){var at,Ve;if(!(Ve=this._events))return this;if(!Ve.removeListener)return 0===arguments.length?(this._events=new y,this._eventsCount=0):Ve[Dt]&&(0==--this._eventsCount?this._events=new y:delete Ve[Dt]),this;if(0===arguments.length){for(var nt,Tt=Object.keys(Ve),ht=0;ht<Tt.length;++ht)"removeListener"!==(nt=Tt[ht])&&this.removeAllListeners(nt);return this.removeAllListeners("removeListener"),this._events=new y,this._eventsCount=0,this}if("function"==typeof(at=Ve[Dt]))this.removeListener(Dt,at);else if(at)do{this.removeListener(Dt,at[at.length-1])}while(at[0]);return this},C.prototype.listeners=function(Dt){var at,Ve=this._events;return Ve&&(at=Ve[Dt])?"function"==typeof at?[at.listener||at]:function(nt){for(var Tt=new Array(nt.length),ht=0;ht<Tt.length;++ht)Tt[ht]=nt[ht].listener||nt[ht];return Tt}(at):[]},C.listenerCount=function(Dt,at){return"function"==typeof Dt.listenerCount?Dt.listenerCount(at):oe.call(Dt,at)},C.prototype.listenerCount=oe,C.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Ae="ZipInfo:";function Te(Dt){var at;return null===(at=Dt?.path)||void 0===at?void 0:at.startsWith(Ae)}function Be(Dt){return"string"==typeof Dt&&Dt.startsWith(Ae)}function Q(Dt,at){return(Array.isArray(Dt)?Dt:[Dt]).some(function(Ve){if("number"!=typeof Ve.version)throw new Error("file version must be an int number");return Ve.version<at})}function tt(Dt,at){return Dt.reduce(function(Ve,nt){return Ve.then(function(Tt){return at(Tt,nt)}).catch(function(){return at(void 0,nt)})},Promise.resolve(void 0))}var dt,it=function(Dt){function at(){return null!==Dt&&Dt.apply(this,arguments)||this}return p(at,Dt),at}(C),ft="resource",Kt=function(Dt){function at(Ve){var Tn,nt=Dt.call(this)||this;if(nt.ready=!1,nt.openError=!1,nt.isEnable()){var Tt=Ve||{},qe=Tt.indexDbVersion;nt.dbName="resource-manager"+((Tn=Tt.nameSpaceId)?"-"+Tn:"");var Yt=indexedDB.open(nt.dbName,qe||1);Yt.addEventListener("error",function(){nt.openError=!0,nt.checkReady(),nt.emit("error",new Error("failed to open indexedDB"))}),Yt.addEventListener("success",function(){nt.db=Yt.result,nt.checkReady()}),Yt.addEventListener("upgradeneeded",function(){nt.db=Yt.result,nt.handleSuccess()}),setTimeout(function(){nt.checkReady()},5e3)}else nt.checkReady();return nt}return p(at,Dt),at.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},at.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains(ft)){var Ve=this.db.createObjectStore(ft,{keyPath:"path",autoIncrement:!1});Ve.createIndex("path","path"),Ve.createIndex("sourceURL","sourceURL",{unique:!1})}},at.prototype.createAction=function(Ve){var nt=this.db.transaction([ft],Ve||"readonly");return{trans:nt,store:nt.objectStore(ft)}},at.prototype.handleAction=function(Ve,nt){return new Promise(function(Tt,ht){var qe=nt();Ve.addEventListener("complete",function(){Tt(qe.result)}),Ve.addEventListener("error",function(){ht(Ve.error||new Error("transaction error"))}),Ve.addEventListener("abort",function(){ht(Ve.error||new Error("transaction aborted"))})})},at.prototype.put=function(){for(var Ve=[],nt=0;nt<arguments.length;nt++)Ve[nt]=arguments[nt];var Tt=this.createAction("readwrite"),qe=Tt.store;return this.handleAction(Tt.trans,function(){return qe.put.apply(qe,Ve)})},at.prototype.getAllKeysFromIndex=function(Ve){for(var nt=[],Tt=1;Tt<arguments.length;Tt++)nt[Tt-1]=arguments[Tt];if(IDBObjectStore.prototype.getAllKeys){var ht=this.createAction(),Yt=ht.store;return this.handleAction(ht.trans,function(){var Tn;return(Tn=Yt.index(Ve)).getAllKeys.apply(Tn,nt)})}return this.openKeyCursor(Ve)},at.prototype.getAllFromIndex=function(Ve){for(var nt=[],Tt=1;Tt<arguments.length;Tt++)nt[Tt-1]=arguments[Tt];var ht=this.createAction(),Yt=ht.store;return IDBObjectStore.prototype.getAll?this.handleAction(ht.trans,function(){var Tn;return(Tn=Yt.index(Ve)).getAll.apply(Tn,nt)}):this.openCursor(Ve)},at.prototype.getFromIndex=function(Ve){for(var nt=[],Tt=1;Tt<arguments.length;Tt++)nt[Tt-1]=arguments[Tt];var ht=this.createAction(),Yt=ht.store;return this.handleAction(ht.trans,function(){var Tn;return(Tn=Yt.index(Ve)).get.apply(Tn,nt)})},at.prototype.deleteKey=function(){for(var Ve=[],nt=0;nt<arguments.length;nt++)Ve[nt]=arguments[nt];var Tt=this.createAction("readwrite"),qe=Tt.store;return this.handleAction(Tt.trans,function(){return qe.delete.apply(qe,Ve)})},at.prototype.handleCursorAction=function(Ve,nt,Tt,ht){return new Promise(function(qe,Yt){nt.addEventListener("success",function(){nt.result?(Tt(ht,nt.result),nt.result.continue()):qe(ht)}),nt.addEventListener("error",function(){Yt(Ve.error||new Error("transaction error"))})})},at.prototype.openKeyCursor=function(Ve){for(var nt,Tt=[],ht=1;ht<arguments.length;ht++)Tt[ht-1]=arguments[ht];var qe=this.createAction("readwrite");return this.handleCursorAction(qe.trans,(nt=qe.store.index(Ve)).openKeyCursor.apply(nt,Tt),function(Yn,wt){return Yn.push(wt.key),Yn},[])},at.prototype.openCursor=function(Ve){for(var nt,Tt=[],ht=1;ht<arguments.length;ht++)Tt[ht-1]=arguments[ht];var qe=this.createAction("readwrite");return this.handleCursorAction(qe.trans,(nt=qe.store.index(Ve)).openCursor.apply(nt,Tt),function(Yn,wt){return Yn.push(wt.value),Yn},[])},at.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},at.prototype.saveFile=function(Ve){return this.db?this.put(Ve).then(function(){return!0}):Promise.resolve(!1)},at.prototype.removeFile=function(Ve){var nt=this;return this.db?"string"==typeof Ve?this.getAllKeysFromIndex("path").then(function(Tt){var ht=(Tt||[]).filter(function(qe){return qe===Ve||qe.startsWith(""+Ve+l.sep)});return Promise.all(ht.map(function(qe){return nt.deleteKey(qe)}))}).then(function(){return!0}):this.deleteKey(Ve.path).then(function(){return!0}):Promise.resolve(!1)},at.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var Ve=this.createAction("readwrite"),Tt=Ve.store;return this.handleAction(Ve.trans,function(){return Tt.clear()}).then(function(){return!0})},at.prototype.findFileByPath=function(Ve){return this.db&&Ve?this.getFromIndex("path",Ve):Promise.resolve(void 0)},at.prototype.findFileBySourceURL=function(Ve){return this.db&&Ve?this.getAllFromIndex("sourceURL",Ve):Promise.resolve([])},at.prototype.isDirectory=function(Ve){var nt=this;return this.db?new Promise(function(Tt){Be(Ve)?Tt(!1):nt.getAllKeysFromIndex("path").then(function(ht){return(ht||[]).some(function(qe){return qe.startsWith(""+Ve+l.sep)})}).then(Tt).catch(function(){return Tt(!1)})}):Promise.resolve(!1)},at.prototype.ls=function(Ve){var nt=this;return this.db?this.getAllKeysFromIndex("path").then(function(Tt){var ht=[];return Promise.all((Tt||[]).map(function(qe){if(Be(qe))return Promise.resolve(void 0);if(Ve){if(qe.startsWith(""+Ve+l.sep)){var Yt=qe.split(""+Ve+l.sep)[1]||"";if(Yt.includes(l.sep)){var Tn=""+Ve+l.sep+Yt.split(l.sep)[0];return Tn&&!ht.includes(Tn)?(ht.push(Tn),Promise.resolve(Tn)):Promise.resolve(void 0)}return nt.getFromIndex("path",qe)}return Promise.resolve(void 0)}if(qe.includes(l.sep)){var Yn=qe.split(l.sep)[0]||"";return Yn&&!ht.includes(Yn)?(ht.push(Yn),Promise.resolve(Yn)):Promise.resolve(void 0)}return nt.getFromIndex("path",qe)})).then(function(qe){return qe.filter(function(Yt){return!!Yt})})}):Promise.resolve([])},at}(it),en=function(Dt){function at(){var Ve=null!==Dt&&Dt.apply(this,arguments)||this;return Ve.memoryFiles=[],Ve}return p(at,Dt),at.prototype.isEnable=function(){return!0},at.prototype.saveFile=function(Ve){var nt=this;return new Promise(function(Tt){nt.memoryFiles.some(function(ht,qe){return ht.path===Ve.path&&(nt.memoryFiles.splice(qe,1,Ve),!0)})||nt.memoryFiles.push(Ve),Tt(!0)})},at.prototype.removeFile=function(Ve){var nt=this;return new Promise(function(Tt){for(var ht=nt.memoryFiles.length-1;ht>=0;ht--){var qe=nt.memoryFiles[ht];("string"==typeof Ve&&(qe.path===Ve||qe.path.startsWith(""+Ve+l.sep))||Ve.path===qe.path)&&nt.memoryFiles.splice(ht,1)}Tt(!0)})},at.prototype.clear=function(){var Ve=this;return new Promise(function(nt){Ve.memoryFiles=[],nt(!0)})},at.prototype.findFileByPath=function(Ve){var nt=this;return new Promise(function(Tt){Tt(nt.memoryFiles.filter(function(ht){return ht.path===Ve})[0])})},at.prototype.findFileBySourceURL=function(Ve){var nt=this;return new Promise(function(Tt){Tt(nt.memoryFiles.filter(function(ht){return ht.sourceURL===Ve}))})},at.prototype.isDirectory=function(Ve){var nt=this;return new Promise(function(Tt){Be(Ve)?Tt(!1):Tt(nt.memoryFiles.some(function(ht){return ht.path.startsWith(""+Ve+l.sep)}))})},at.prototype.ls=function(Ve){var nt=this;return new Promise(function(Tt){var ht=[];nt.memoryFiles.forEach(function(qe){if(!Te(qe))if(Ve){if(qe.path.startsWith(""+Ve+l.sep)){var Yt=qe.path.split(""+Ve+l.sep)[1]||"";if(Yt.includes(l.sep)){var Tn=""+Ve+l.sep+Yt.split(l.sep)[0];return void(Tn&&!ht.includes(Tn)&&ht.push(Tn))}ht.push(qe)}}else if(qe.path.includes(l.sep)){var Yn=qe.path.split(l.sep)[0]||"";Yn&&!ht.includes(Yn)&&ht.push(Yn)}else ht.push(qe)}),Tt(ht)})},at}(it),zt=function(Dt){function at(Ve){var ht,nt=Dt.call(this)||this;return nt.isLocalAvaliable=void 0,nt.isEnable()&&(nt.storageName="resource-manager"+((ht=(Ve||{}).nameSpaceId)?"-"+ht:"")),nt}return p(at,Dt),at.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},at.prototype.saveFile=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){var ht=nt.getLocalFile();ht.some(function(qe,Yt){return qe.path===Ve.path&&(ht.splice(Yt,1,Ve),!0)})||ht.push(Ve),localStorage.setItem(nt.storageName,JSON.stringify(ht)),Tt(!0)}):Promise.resolve(!1)},at.prototype.getLocalFile=function(){var Ve=localStorage.getItem(this.storageName),nt=[];if(Ve)try{nt=JSON.parse(Ve)||"[]"}catch(Tt){console.log(Tt)}return nt},at.prototype.removeFile=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){for(var ht=nt.getLocalFile(),qe=ht.length-1;qe>=0;qe--){var Yt=ht[qe];("string"==typeof Ve&&(Yt.path===Ve||Yt.path.startsWith(""+Ve+l.sep))||Ve.path===Yt.path)&&ht.splice(qe,1)}localStorage.setItem(nt.storageName,JSON.stringify(ht)),Tt(!0)}):Promise.resolve(!1)},at.prototype.clear=function(){var Ve=this;return this.isEnable()?new Promise(function(nt){localStorage.removeItem(Ve.storageName),nt(!0)}):Promise.resolve(!1)},at.prototype.findFileByPath=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){Tt(nt.getLocalFile().filter(function(ht){return ht.path===Ve})[0])}):Promise.resolve(void 0)},at.prototype.findFileBySourceURL=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){Tt(nt.getLocalFile().filter(function(ht){return ht.sourceURL===Ve}))}):Promise.resolve([])},at.prototype.isDirectory=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){Be(Ve)?Tt(!1):Tt(nt.getLocalFile().some(function(ht){return ht.path.startsWith(""+Ve+l.sep)}))}):Promise.resolve(!1)},at.prototype.ls=function(Ve){var nt=this;return this.isEnable()?new Promise(function(Tt){var ht=[];nt.getLocalFile().forEach(function(qe){if(!Te(qe))if(Ve){if(qe.path.startsWith(""+Ve+l.sep)){var Yt=qe.path.split(""+Ve+l.sep)[1]||"";if(Yt.includes(l.sep)){var Tn=""+Ve+l.sep+Yt.split(l.sep)[0];return void(Tn&&!ht.includes(Tn)&&ht.push(Tn))}ht.push(qe)}}else if(qe.path.includes(l.sep)){var Yn=qe.path.split(l.sep)[0]||"";Yn&&!ht.includes(Yn)&&ht.push(Yn)}else ht.push(qe)}),Tt(ht)}):Promise.resolve([])},at}(it);(dt=i.FileStoreEnum||(i.FileStoreEnum={})).MEMORY="memoryStore",dt.INDEX_DB="indexedDBStore",dt.STORAGE="storageStore";var Ot=function(Dt){function at(Ve){var nt=Dt.call(this)||this;return nt.indexedDBStore=new Kt(Ve),nt.memoryStore=new en,nt.storageStore=new zt(Ve),nt}return p(at,Dt),at.prototype.saveFile=function(Ve,nt,Tt){var ht=this;void 0===nt&&(nt=!0);var qe=(Tt||{}).forceSpecifyStore;return(nt?this.findFileByPath(Ve.path,Tt):Promise.resolve(void 0)).then(function(Yt){if(Yt?.version&&Q(Ve,Yt.version))throw new Error("there is an higher version file existed already");var Tn=_(_({},Ve),{createTime:Yt&&Yt.createTime||Date.now(),updateTime:Date.now()});return qe&&ht[qe]&&ht[qe].isEnable()&&(qe!==i.FileStoreEnum.STORAGE||ht.isLocalStorageAvaliable(Tn))?ht[qe].saveFile(Tn):ht[ht.saveToTargetStoreRule(Tn)].saveFile(Tn)})},at.prototype.isLocalStorageAvaliable=function(Ve){var nt=Ve.data;return"string"===l.getDataFormat(nt)&&nt.length<=102400&&this.storageStore.isEnable()},at.prototype.saveToTargetStoreRule=function(Ve){return this.indexedDBStore.isEnable()?i.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(Ve)?i.FileStoreEnum.STORAGE:i.FileStoreEnum.MEMORY},at.prototype.removeFile=function(Ve,nt){var Tt=(nt||{}).forceSpecifyStore;return Tt&&this[Tt]?this[Tt].removeFile(Ve):Promise.all([this.indexedDBStore.removeFile(Ve),this.storageStore.removeFile(Ve),this.memoryStore.removeFile(Ve)]).then(function(){return!0})},at.prototype.clear=function(Ve){var nt=(Ve||{}).forceSpecifyStore;return nt&&this[nt]?this[nt].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},at.prototype.findFileByPath=function(Ve,nt){var Tt=this,ht=(nt||{}).forceSpecifyStore;return ht&&this[ht]?this[ht].findFileByPath(Ve):tt(this.searchInTargetStoreRule(),function(qe,Yt){return qe?Promise.resolve(qe):Tt[Yt].findFileByPath(Ve)})},at.prototype.findFileBySourceURL=function(Ve,nt){var Tt=this,ht=(nt||{}).forceSpecifyStore;return ht&&this[ht]?this[ht].findFileBySourceURL(Ve):tt(this.searchInTargetStoreRule(),function(qe,Yt){return Tt[Yt].findFileBySourceURL(Ve).then(function(Tn){return qe?qe.filter(function(Yn){return!Tn.some(function(wt){return wt.path===Yn.path})}).concat(Tn||[]):Tn||[]})})},at.prototype.searchInTargetStoreRule=function(){return[i.FileStoreEnum.INDEX_DB,i.FileStoreEnum.STORAGE,i.FileStoreEnum.MEMORY]},at.prototype.isDirectory=function(Ve){var nt=this;return Ve?tt(this.searchInTargetStoreRule(),function(Tt,ht){return Tt?Promise.resolve(!0):nt[ht].isDirectory(Ve)}):Promise.resolve(!0)},at.prototype.ls=function(Ve){var nt=this;return this.isDirectory(Ve).then(function(Tt){if(!Tt)throw new Error("path: "+Ve+" is an invalid directory path");return tt(nt.searchInTargetStoreRule(),function(ht,qe){return nt[qe].ls(Ve).then(function(Yt){return ht?(Yt||[]).concat(ht.filter(function(Tn){return!Yt.some(function(Yn){return"string"==typeof Tn?Yn===Tn:"string"!=typeof Yn&&Yn.path===Tn.path})})):Yt})})})},at}(C),_n=function(Dt){function at(){return null!==Dt&&Dt.apply(this,arguments)||this}return p(at,Dt),at}(C),Gn=function(Dt){function at(Ve){var nt=Dt.call(this)||this,Tt=Ve||{},ht=Tt.storeOptions;return nt.downloadManager=new l.IDownloadManager(Tt.downloadManagerOptions),nt.store=new Ot(ht),nt.store.indexedDBStore.on("ready",function(){return nt.emit("ready")}),nt}return p(at,Dt),at.prototype.getFile=function(Ve,nt,Tt){var ht=this,qe=new _n,Yt=Promise.resolve(void 0),Tn=nt||{},Yn=Tn.downloadOptions,Sa=Tn.saveRootPath;Tn.forceDownload?Yt=Promise.resolve(void 0):"string"==typeof Ve?Yt=this.store.findFileByPath(Ve,Tt):Ve?.sourceURL?Yt=this.store.findFileBySourceURL(Ve.sourceURL):Yn&&(Yn.domParams||Yn.socketParams||Yn.xhrParams)&&(Yt=this.store.findFileBySourceURL(this.genSourceURL(Yn)));var Wn=null,no=new Promise(function(Ys){Wn=Ys});return qe.getDownloadTask=function(){return no},Yt=Yt.then(function(Ys){if(Ys&&(!Array.isArray(Ys)||Ys.length)){var $o=Ys;if(Array.isArray($o)){var Ru=$o.find(function(cl){return Te(cl)});if(!Ru)return;$o=$o.filter(function(cl){return!Te(cl)});var Xo=Ru.data;if("string"!=typeof Xo||!JSON.parse(Xo||"[]").every(function(cl){return $o.some(function(Pt){return Pt.path===cl})}))return}if(!Tt?.targetVersion||!Q($o,Tt.targetVersion))return qe.emit("checkExpire",!1),$o;qe.emit("checkExpire",!0)}}).then(function(Ys){if(!Ys&&Yn){var $o=ht.downloadManager.download(Yn);return Wn($o),new Promise(function(Ru,Xo){$o.on("complete",function(cl){setTimeout(function(){var Pt=Array.isArray(cl)?cl.map(function(ot){var on=ot.data,qn=ot.extName;return{path:ht.genFilePath(Sa,ot.path),sourceURL:ht.genSourceURL(Yn),data:on,fileFormat:qn||ht.getFileFormat(Yn),version:Tt?.targetVersion||1}}):{path:ht.genFilePath(Sa,void 0),sourceURL:ht.genSourceURL(Yn),data:cl,fileFormat:ht.getFileFormat(Yn),version:Tt?.targetVersion||1};if(Array.isArray(Pt)&&"string"==typeof Ve&&Ve){var Bt=Pt.find(function(ot){return ot.path===Ve});Ru(Bt||Pt)}else Ru(Pt);qe.emit("beforeSet",Pt),ht.beforeWrite(Pt,Tt).then(function(){qe.emit("afterSet")}).catch(function(ot){return qe.emit("afterSet",ot)})},0)}),$o.on("abort",Xo),$o.on("error",Xo),$o.on("timeout",function(){return Xo(new Error("download timeout"))})})}return Wn(void 0),Ys}).catch(function(Ys){return Wn(void 0),Promise.reject(Ys)}),qe.getResult=function(){return Yt},qe},at.prototype.genSourceURL=function(Ve){var Tt=Ve.type;if(Tt===l.DownloaderType.SOCKET)return null;var qe=(Tt===l.DownloaderType.DOM?Ve.domParams:Ve.xhrParams)||{},Yt=qe.url,Tn=void 0===Yt?"":Yt,Yn=qe.body;return Yn&&Object.keys(Yn).length?Tn+(Tn.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(Yn):Tn},at.prototype.updateFile=function(Ve,nt){return this.saveStore(Ve,!0,nt)},at.prototype.beforeWrite=function(Ve,nt){var ht,qe,Tt=this;return Array.isArray(Ve)?Promise.all(Ve.concat((ht=Ve,qe=ht[0].sourceURL||"",{path:""+Ae+qe,sourceURL:qe,data:JSON.stringify(ht.map(function(Yt){return Yt.path}))})).map(function(ht){return Tt.saveStore(ht,!1,nt)})).then(function(ht){return ht.filter(function(qe){return!Te(qe)})}):this.saveStore(Ve,!0,nt)},at.prototype.getFileFormat=function(Ve){var nt=Ve||{},Tt=nt.xhrParams,ht=nt.domParams,qe=nt.socketParams,Yt=nt.type;return Yt===l.DownloaderType.DOM&&ht?.fileFormat?ht.fileFormat:Yt===l.DownloaderType.SOCKET&&qe?.fileFormat?qe.fileFormat:Tt?.fileFormat?Tt.fileFormat:"unknow"},at.prototype.genFilePath=function(Ve,nt){return nt?""+(Ve||"")+(Ve?l.sep:"")+nt:Ve||""},at.prototype.saveStore=function(Ve,nt,Tt){return void 0===nt&&(nt=!0),this.store.saveFile(Ve,nt,Tt).then(function(ht){if(ht)return Ve;throw new Error("fail to save file in local store")})},at.prototype.remove=function(Ve,nt){return this.store.removeFile(Ve,nt)},at.prototype.clear=function(Ve){return this.store.clear(Ve)},at.prototype.list=function(Ve){return this.store.ls(Ve)},at.prototype.updateVersion=function(Ve,nt){var Tt=this;return this.store.findFileByPath(Ve).then(function(ht){if(ht)return Tt.saveStore(_(_({},ht),{version:nt})).then(function(){});throw new Error("the target path: "+Ve+" isn't existed")})},at.prototype.updateSourceURL=function(Ve,nt){var Tt=this;return this.store.findFileByPath(Ve).then(function(ht){if(ht)return Tt.saveStore(_(_({},ht),{sourceURL:nt})).then(function(){});throw new Error("the target path: "+Ve+" isn't existed")})},at}(C);i.IResourceManager=Gn,Object.defineProperty(i,"__esModule",{value:!0})}(QI.exports,Vb),Ud(QI.exports);const Hb=()=>{var i;const l=null===(i=uT())||void 0===i?void 0:i.toLocaleLowerCase();if(l.indexOf("safari")>-1&&-1===l.indexOf("ios-safari")){var u;const p=null===(u=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===u?void 0:u[1];return Xk(p||"","15.2")>=0}return!1},wf=mo.createAgent(),kl=$R(iI(Mi.getInstance())),lO=i=>!i.muted;var dO=Object.freeze({__proto__:null,audioAsnsEpic:(i,l)=>Zn(i,12033).pipe(Un(l),gt(u=>{let[p,_]=u;const{participants:{attendeesList:y,allowTalkAttendeesList:C}}=_,I=p.payload.body,O={};return I&&([...y,...C].forEach(D=>{for(let B=1;B<=3;B++){const P=`asn${B}`,{userId:F,displayName:Z}=D;if(void 0!==I[P]&&F===I[P]){O[P]={userId:F,displayName:Z};break}}}),_t(DE,Object.values(O))),R2(O)})),unmuteConsentAfterSpotlighted:(i,l)=>Zn(i,16135).pipe(Un(l),ir(u=>{let[p,_]=u;const{payload:{body:{id:y,bLeadershipOn:C}}}=p,{audio:{bCanUnmute:I}}=_,O=Kr(_);if(O){const{isHost:D,bCoHost:B,userId:P,audio:F,muted:Z}=O,ie=D||B;C&&Zk(P,y)&&(null!==F&&""!==F&&!0!==Z||!ie&&!I||_t(Tv,vE.Spotlight))}}),Gr(qt)),unmuteConsentEpic:(i,l)=>Zn(i,12037).pipe(Un(l),ir(u=>{let[,p]=u;const _=Kr(p);null!==_?.audio&&""!==_?.audio&&1==_?.muted&&_t(Tv,vE.Unmute)}),Gr(qt)),setAudioAttributeEpic:(i,l)=>Zn(i,Sc).pipe(En(u=>u.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(p=>void 0!==u.payload.body[p])),mf(u=>{if(void 0!==u.payload.body.bCanUnmute)return O2(u.payload.body.bCanUnmute);if(void 0!==u.payload.body.bMutedAll){const p=Kr(l.value);if(("computer"===p?.audio||"phone"===p?.audio)&&0==p.muted)return Vg(u.payload.body.bMutedAll)}return void 0!==u.payload.body.bMutedUponEntry?jE(u.payload.body.bMutedUponEntry):void 0})),currentUserAudioChangeEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[,p]=u;return p.socket.zoomSocketStatus===ao.Connected}),zn(u=>{let[p,_]=u;if(p.payload.body.update&&p.payload.body.update.some(y=>void 0!==y.audio||void 0!==y.muted)){const y=_.meeting.userId,C=p.payload.body.update,[I,O]=ml(Dn(C),Ae=>Ae.id===y);O.subscribe(Ae=>{_t(E2,Ae)});const{audio:{isActiveOperation:D,isMutedAll:B,isSpeakerOnly:P,isAllowToTalk:F,isShareAudioEnabled:Z,isSharingAudio:ie}}=_;let oe=Kr(_);!oe&&p.payload.body.add&&p.payload.body.add.length>0&&(oe=p.payload.body.add.find(Ae=>Ae.id===y),oe&&(oe.userRole=oe.role));const ve=Na(oe.userRole);return I.pipe(ir(function(){var Ae=V(function*(Te){var Be,Q,tt,dt;if(Te.audio!==(null===(Be=oe)||void 0===Be?void 0:Be.audio))if(""===Te.audio)_t(Mg);else if("computer"===Te.audio){const ft=ve&&!F||P;ie&&_t(ZS),ft&&_t(ZS)}else if("phone"===Te.audio){var it;"computer"===(null===(it=oe)||void 0===it?void 0:it.audio)&&(yield kl.leaveComputerAudio(),wf.joinOrLeaveVoip(!1)),_t(kE)}null!==(Q=oe)&&void 0!==Q&&Q.audio&&""!==(null===(tt=oe)||void 0===tt?void 0:tt.audio)&&Te.muted!==(null===(dt=oe)||void 0===dt?void 0:dt.muted)&&(!0===Te.muted?(_t(eC,{source:D?Y.MutedSource.Active:B?Y.MutedSource.PassiveByMuteAll:Y.MutedSource.PassiveByMuteOne}),Z||kl.muteAudio()):!1===Te.muted&&(_t(y2,{source:D?"active":"passive"}),kl.unmuteAudio()))});return function(Te){return Ae.apply(this,arguments)}}()),En(Ae=>{var Te,Be;return""!==(null===(Te=oe)||void 0===Te?void 0:Te.audio)&&Ae.muted!==(null===(Be=oe)||void 0===Be?void 0:Be.muted)}),Gr(rr(Yh(!1),Vg(!1))))}return qt})),handleDialOutEpic:(i,l)=>Zn(i,8198).pipe(Un(l),En(u=>{let[p,_]=u;return p.payload.seq==_.audio.dialout.sequence}),ir(u=>{let[p]=u;const _=p.payload.body.result;_t(tC,{code:_}),_===Y.DialoutState.Success?_t(nC):-1===[Y.DialoutState.Calling,Y.DialoutState.Ringing,Y.DialoutState.Accepted,Y.DialoutState.Success].indexOf(_)&&_t(rC)}),gt(u=>{let[p]=u;return Bv(p.payload.body.result)})),handleDialouCancelEpic:i=>Zn(i,8198).pipe(En(l=>{var u;return[Y.DialoutState.Canceling,Y.DialoutState.Canceled,Y.DialoutState.CancelFailed].includes(null===(u=l.payload.body)||void 0===u?void 0:u.result)}),ir(l=>{var u;const p=null===(u=l.payload.body)||void 0===u?void 0:u.result;_t(tC,{code:p}),p===Y.DialoutState.Canceled?_t(iC):p===Y.DialoutState.CancelFailed&&_t(bT)}),gt(l=>Bv(l.payload.body.result))),handleAllowToTalkEpic:(i,l)=>Zn(i,12036).pipe(Un(l),zn(u=>{let[p,_]=u;const y=Kr(_),{media:{audioEncodeStatus:C}}=_,{promoterID:I,bAllowTalk:O}=p.payload.body;if(y?.userId===I){if(_t(sC,O),O){let D=rr(!0);return"success"!==C&&(kl.enableAudioEncode(),D=Zl(Ts(au,1).pipe(zo(!0)),Ts(EE,1).pipe(zo(!1)))),D.pipe(zn(B=>(B&&_t(Tv,vE.AllowToTalk),qt)),Mh(Zd(!0)))}if(wf.mute(I,!0),"computer"===y?.audio)return kl.leaveComputerAudio(),_c(300).pipe(ir(V(function*(){(Hb()?Zl(Ya(document,"click").pipe(is(1)),Ya(document,"touchend").pipe(is(1))).toPromise():Promise.resolve(!0)).then(()=>{xa(kl,_,!1)})})),Gr(qt),Mh(Zd(!1)))}return qt})),handleAllowToTalkResponseEpic:i=>Zn(i,8205).pipe(ir(l=>{_t("AUDIO_ALLOW_TO_TALK_RESPONSE",l.payload.body)}),Gr(qt)),handleAttendeePromoteDepromote:(i,l)=>Hd(i,24597).pipe(Un(l),ir(u=>{let[p,_]=u;const y=Kr(_);"phone"===y?.audio&&wf.audioDrop(y.userId)}),Gr(qt)),setAudioSSRCEpic:(i,l)=>Zn(i,12035).pipe(Un(l),zn(u=>{let[p,_]=u;const{meeting:{currentUserAudioBeforeReset:y},media:{audioDecodeStatus:C,audioEncodeStatus:I}}=_,{payload:{body:{ssrc:O}}}=p,D=Jv(l).pipe(zn(B=>{if("computer"===y&&(null==B||!B.audio)){const P=Na(B.userRole);return qu("audio",P?"success":I,C).pipe(En(F=>{let[Z,ie]=F;return Z&&ie}),ir(()=>{(Hb()?Zl(Ya(document,"click").pipe(is(1)),Ya(document,"touchend").pipe(is(1))).toPromise():Promise.resolve(!0)).then(()=>{wf.joinOrLeaveVoip(!0),xa(kl,l.value)});const{audio:{locallyMutedAudioList:F,localUserAudioVolumeList:Z}}=l.value;F.length>0&&F.forEach(ie=>{kl.muteOrUnmuteOtherAudio(ie,!0)}),Z.length>0&&Z.forEach(ie=>{kl.adjustOtherAudioVolume(ie.userId,ie.volume)})}),zo(rE(void 0)))}return qt}));return bs(rr(bC(O)),D)})),handleMergeAudioEpic:(i,l)=>Zn(i,7952).pipe(oo(u=>Ts(kE,1).pipe(Un(l),ir(p=>{let[,_]=p;const{BindStatus:y,nOperatorUserId:C}=u.payload.body,I=_.participants.attendeesList.find(O=>O.userId===C);!0===y&&_t(uu,{operatorName:I?.displayName,operatorUserId:C,operatorRole:I?.userRole})})))),handleUserGrantAudioCaptureEpic:(i,l)=>Ei(i,er.UserGrantCaptureAudio).pipe(Un(l),zn(u=>{let[,p]=u;const _=Kr(p);var y;(y=_,"computer"===y?.audio?Promise.resolve():_i({event:Bc,operations:[En(P=>void 0!==P.audio),is(1)]},P=>{let{audio:F}=P;return"phone"===F||"computer"===F})).then(()=>{_t(ZS)});const{meeting:{isCurrentUserMutedBeforeReset:C},audio:{bMutedUponEntry:I,isUserGrantCaptureAudio:O,isAllowToTalk:D}}=p,B=[GL(!0)];if(_){!0===_.muted&&!1===D&&wf.mute(_.userId,!0);const P=O||_.isHost||D;(!0===C||!P&&I)&&(wf.mute(_.userId,!0),C&&B.push(MS(void 0)))}return Dn(B)})),handleUserForbiddenMicrophoneEpic:i=>Ei(i,er.UserForbiddedCaptureAudio).pipe(ir(()=>{_t(Fs)}),zo(SC(!0))),handleAudioSocketErrorEpic:i=>Ei(i,er.AudioWebsocketBroken).pipe(ir(()=>{_t(PE)}),Gr(qt)),handleAudioZeroDataEpic:(i,l)=>Ei(i,er.AudioZeroData).pipe(Un(l),mf(u=>{let[,p]=u;const{audio:{webrtcRestartCount:_,activeMicrophone:y}}=p;if(_<3)return kl.restoreWebRTC(y),FT(_+1)})),handleAutoPlayEpic:(i,l)=>i.pipe(Zr(`${Fv}`),En(u=>!1===u.payload),zn(()=>(_t(ST),Zl(Ya(document,"click").pipe(is(1)),Ya(document,"touchend").pipe(is(1))).pipe(ir(()=>{wf.joinOrLeaveVoip(!0),xa(kl,l.value)}),zo(Fv(!0)))))),handleAudioActionCompleteEpic:i=>Ei(i,[er.JoinComputerAudioComplete,er.JoinSharingAudioComplete,er.LeaveComputerAudioComplete,er.LeaveSharingAudioComplete]).pipe(ir(()=>{rI.completeAudioAction()}),Gr(qt)),handleAudioQosDataEpic:(i,l)=>Ei(i,er.AudioQosData).pipe(Un(l),gt(u=>{var p;let[_,y]=u;const{meeting:{isWebinar:C},media:{audioEncodeStatus:I,audioDecodeStatus:O},participants:{xmppAttendeeList:D,allowTalkAttendeesList:B}}=y,P=Kr(y),F=EC(y);let Z=F.length>0,ie=F.some(lO);C&&(Z=Z||Boolean(D.length),ie=ie||B.some(lO));const ve=("computer"===P?.audio||"phone"===P?.audio)&&"success"===O&&Z&&ie;return null!==(p=_.payload.data)&&void 0!==p&&p.encoding?"computer"!==P?.audio&&"phone"!==P?.audio||"success"!==I||null!=P&&P.muted||!Z?IC(zp):(_t(CT,_.payload),IC(_.payload)):ve?(_t(CT,_.payload),GE(_.payload)):GE(zp)})),handleResetLocalMuteStateAfterUserLeaveEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[p,_]=u;const{payload:{body:y}}=p,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:I}}=_;return(C.length>0||I.length>0)&&y?.remove&&y.remove.length>0}),zn(u=>{let[p,_]=u;const{payload:{body:{remove:y}}}=p,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:I}}=_,O=C.concat(I.map(D=>D.userId)).filter(D=>-1!==y.indexOf(B=>B.id===D));return O.length>0?(O.forEach(D=>{kl.muteOrUnmuteOtherAudio(D,!1)}),Dn(O.map(D=>[jT(D),L2({userId:D})]).flat())):qt}))});const d_=mo.createAgent(),kA=$R(iI(Mi.getInstance()));var hO=Object.freeze({__proto__:null,handleAddLocalShareAudioUserEpic:(i,l)=>Bs(i,Do).pipe(En(u=>{const p=u.payload.body.update;return p&&p.length>0&&p.findIndex(_=>void 0!==_.bShareOn)>-1}),Un(l),zn(u=>{let[p,_]=u;const{payload:{body:{update:y}}}=p,{audio:{localShareAudioUserMutedList:C}}=_,I=y.filter(D=>!0===D.bShareOn&&!0===D.bShareAudioOn),O=[];return I.length>0&&I.forEach(D=>{-1===C.findIndex(B=>B.userId===D.id)&&O.push(HE({userId:D.id,isFromMainSession:!!D.bShareToBORooms}))}),Dn(O)})),handleShareWithAudioEpic:(i,l)=>Ei(i,er.SharingDesktopStreamHaveAudio).pipe(oo(()=>Zn(i,Do).pipe(En(u=>{var p;const{payload:{body:_}}=u,{meeting:{userId:y}}=l.value;return(null==_||null===(p=_.update)||void 0===p?void 0:p.findIndex(C=>C.id===y&&!0===C.bShareOn))>-1}),is(1),Gg(V(function*(){const u=l.value;return yield uO(kA,d_,u)})),Mh(Em(!0))))),handleMediaSDKLeaveShareAudioEpic:(i,l)=>Ei(i,er.SharingDesktopStreamHaveNoAudio).pipe(Un(l),En(u=>{var p;let[,_]=u;return!0===(null===(p=_.audio)||void 0===p?void 0:p.isShareAudioEnabled)}),Gg(function(){var u=V(function*(p){let[,_]=p;return yield HI(kA,d_,_)});return function(p){return u.apply(this,arguments)}}())),handleJoinComputerAudioAfterShareAudioEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[,p]=u;return p.socket.zoomSocketStatus===ao.Connected&&!0===p.audio.isSharingAudio}),zn(u=>{var p;let[_,y]=u;if(null!==(p=_.payload.body.update)&&void 0!==p&&p.some(C=>void 0!==C.audio||void 0!==C.muted)){const{meeting:{userId:C}}=y,I=_.payload.body.update.filter(O=>O.id===C);return Jv(l).pipe(zn(O=>{const D=[];return I.findIndex(B=>"computer"===B.audio)>-1&&"computer"!==O?.audio&&(D.push(ym(!0)),D.push(rf(!0))),Dn(D)}))}return qt})),handleShareAudioWithCurrentShareStatusChangeEpic:(i,l)=>i.pipe(Zr(`${eh}`),Ht(fl),Un(l),En(u=>{var p;let[,_]=u;return!0===(null===(p=_.audio)||void 0===p?void 0:p.isShareAudioEnabled)}),Gg(function(){var u=V(function*(p){let[_,y]=p;const{payload:C}=_,{audio:{isShareAudioMuted:I,isSharingAudio:O}}=y,D=[];if(C===Y.ShareStatus.End){const B=yield HI(kA,d_,y);D.push(...B)}else if(C===Y.ShareStatus.Paused){if(!1===I&&!0===O){yield kA.leaveSharingAudio(!0),D.push(Uv(!1));const B=yield Qb(kA,d_,y);D.push(...B),setTimeout(()=>{_t(gm,{state:"off"})},0)}}else if(C===Y.ShareStatus.Sharing&&!1===I&&!1===O){const B=yield uO(kA,d_,y);D.push(...B)}return D});return function(p){return u.apply(this,arguments)}}()))});const pO=mo.createAgent(),eN=Mi.getInstance();var tN=Object.freeze({__proto__:null,handleAudioBridgeTokenEpic:i=>Zn(i,4299).pipe(ir(l=>{const{payload:u}=l;eN.passThroughRWGMessage(u)}),Gr(qt)),handleAudioBridgeReconnectEpic:i=>Ei(i,er.AudioBridgeReconnectStart).pipe(ir(()=>{pO.joinOrLeaveVoip(!1)}),Gr(qt)),handleAudioBridgeReconnectSuccessEpic:i=>Ei(i,er.AudioBridgeReconnectEnd).pipe(ir(()=>{pO.joinOrLeaveVoip(!0)}),Gr(qt)),handleSendNodeAudioStatusEpic:i=>Zn(i,Do).pipe(En(l=>{var u,p;return zg()&&((null===(u=l.payload.body.update)||void 0===u?void 0:u.some(_=>void 0!==_.muted))||(null===(p=l.payload.body.remove)||void 0===p?void 0:p.length)>0)}),ir(l=>{const{payload:{body:{update:u,remove:p}}}=l;eN.sendUserAudioStatus({update:(u||[]).filter(_=>void 0!==_.muted).map(_=>({userId:_.id,muted:_.muted})),remove:(p||[]).map(_=>({userId:_.id}))})}),Gr(qt)),handleAudioBridgeFailoverEpic:i=>Ei(i,er.NotifyUIFailover).pipe(gt(()=>(_t(Za,{reason:Zs.Failover}),wo(xo.NotifyUiFailover))))});const PA={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:{sequence:0,returnCode:-1},canPlayAudio:!1,isActiveOperation:!1,isMutedAll:!1,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isSpeakerOnly:!1,localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},Gb=Fr({[`${R2}`]:Et((i,l)=>{let{payload:u}=l;i.asnIds=$t({},u)}),[`${O2}`]:Et((i,l)=>{let{payload:u}=l;i.bCanUnmute=u}),[`${D2}`]:Et((i,l)=>{let{payload:u}=l;const{dialout:p}=i;p.sequence=u}),[`${Bv}`]:Et((i,l)=>{let{payload:u}=l;const{dialout:p}=i;p.returnCode=u}),[`${Zd}`]:Et((i,l)=>{let{payload:u}=l;i.isAllowToTalk=u,i.isAllowToTalkAttendeeConnected=!1}),[`${Yh}`]:Et((i,l)=>{let{payload:u}=l;i.isActiveOperation=u}),[`${Vg}`]:Et((i,l)=>{let{payload:u}=l;i.isMutedAll=u}),[`${bC}`]:Et((i,l)=>{let{payload:u}=l;i.audioSsrc=u}),[`${jE}`]:Et((i,l)=>{let{payload:u}=l;i.bMutedUponEntry=u}),[`${GL}`]:Et((i,l)=>{let{payload:u}=l;i.isUserGrantCaptureAudio=u}),[`${SC}`]:Et((i,l)=>{let{payload:u}=l;i.isMicrophoneForbidden=u}),[`${FT}`]:Et((i,l)=>{let{payload:u}=l;i.webrtcRestartCount=u}),[`${QE}`]:Et((i,l)=>{let{payload:u}=l;i.microphoneDevicesList=u}),[`${CC}`]:Et((i,l)=>{let{payload:u}=l;i.speakerDevicesList=u}),[`${k2}`]:Et((i,l)=>{let{payload:u}=l;i.activeMicrophone=u}),[`${P2}`]:Et((i,l)=>{let{payload:u}=l;i.activeSpeaker=u}),[`${Fv}`]:Et((i,l)=>{let{payload:u}=l;i.canPlayAudio=u}),[`${N2}`]:(i,l)=>{let{dialout:{returnCode:u},locallyMutedAudioList:p,localUserAudioVolumeList:_}=i,{payload:y}=l;return y?$t($t({},PA),{},{dialout:$t($t({},PA.dialout),{},{returnCode:u}),locallyMutedAudioList:p,localUserAudioVolumeList:_}):$t({},PA)},[`${jg}`]:Et((i,l)=>{let{payload:u}=l;i.isComputerAudioLoading=u}),[`${M2}`]:Et((i,l)=>{let{payload:u}=l;i.isSpeakerOnly=u}),[`${UT}`]:Et((i,l)=>{let{payload:u}=l;i.isAllowToTalkAttendeeConnected=u}),[`${rf}`]:Et((i,l)=>{let{payload:u}=l;i.mutedBeforeSharingAudio=u}),[`${Uv}`]:Et((i,l)=>{let{payload:u}=l;i.isSharingAudio=u}),[`${$i}`]:Et((i,l)=>{let{payload:u}=l;i.isShareAudioMuted=u}),[`${HE}`]:Et((i,l)=>{let{payload:u}=l;const{userId:p,isFromMainSession:_}=u;-1===i.localShareAudioUserMutedList.findIndex(y=>y.userId===p)&&i.localShareAudioUserMutedList.push({userId:p,isFromMainSession:_,muted:!1})}),[`${VT}`]:Et((i,l)=>{let{payload:u}=l;const p=i.localShareAudioUserMutedList.find(_=>_.userId===u.userId);p&&(p.muted=u.muted)}),[`${ym}`]:Et((i,l)=>{let{payload:u}=l;i.isJoinComputerAudioBeforeSharingAudio=u}),[`${Em}`]:Et((i,l)=>{let{payload:u}=l;i.isShareAudioEnabled=u}),[`${IC}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.encode=u.data}),[`${GE}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.decode=u.data}),[`${wC}`]:Et((i,l)=>{let{payload:u}=l;-1===i.locallyMutedAudioList.findIndex(p=>p===u)&&i.locallyMutedAudioList.push(u)}),[`${jT}`]:Et((i,l)=>{let{payload:u}=l;const p=i.locallyMutedAudioList.findIndex(_=>_===u);-1!==p&&i.locallyMutedAudioList.splice(p,1)}),[`${x2}`]:Et((i,l)=>{let{payload:u}=l;const p=i.localUserAudioVolumeList.find(_=>_.userId===u.userId);p?p.volume=u.volume:i.localUserAudioVolumeList.push(u)}),[`${L2}`]:Et((i,l)=>{let{payload:u}=l;const p=i.localUserAudioVolumeList.findIndex(_=>_.userId===u.userId);-1!==p&&i.localUserAudioVolumeList.splice(p,1)})},PA),a4=Ls(dO,hO,tN);var GI="object"==typeof global&&global&&global.Object===Object&&global,fO="object"==typeof self&&self&&self.Object===Object&&self,ap=GI||fO||Function("return this")(),h_=ap.Symbol,NA=Object.prototype,p_=NA.hasOwnProperty,Wb=NA.toString,cp=h_?h_.toStringTag:void 0,mO=Object.prototype.toString,WI=h_?h_.toStringTag:void 0;function f_(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":WI&&WI in Object(i)?function(l){var u=p_.call(l,cp),p=l[cp];try{l[cp]=void 0;var _=!0}catch{}var y=Wb.call(l);return _&&(u?l[cp]=p:delete l[cp]),y}(i):mO.call(i)}function MA(i){return null!=i&&"object"==typeof i}var up=Array.isArray;function gO(i){var l=typeof i;return null!=i&&("object"==l||"function"==l)}function _O(i){if(!gO(i))return!1;var l=f_(i);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}var vO,lp=ap["__core-js_shared__"],KI=(vO=/[^.]+$/.exec(lp&&lp.keys&&lp.keys.IE_PROTO||""))?"Symbol(src)_1."+vO:"",nN=Function.prototype.toString;function Tf(i){if(null!=i){try{return nN.call(i)}catch{}try{return i+""}catch{}}return""}var c4=/^\[object .+?Constructor\]$/,oN=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fh(i,l){var p,_,u=i?.[l];return gO(p=u)&&(_=p,!KI||!(KI in _))&&(_O(p)?oN:c4).test(Tf(p))?u:void 0}var xA=fh(ap,"WeakMap"),zI=/^(?:0|[1-9]\d*)$/;function Zi(i,l){var u=typeof i;return!!(l=l??9007199254740991)&&("number"==u||"symbol"!=u&&zI.test(i))&&i>-1&&i%1==0&&i<l}function sN(i,l){return i===l||i!=i&&l!=l}function ud(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function tl(i){return null!=i&&ud(i.length)&&!_O(i)}var FB=Object.prototype;function aN(i){var l=i&&i.constructor;return i===("function"==typeof l&&l.prototype||FB)}function cN(i){return MA(i)&&"[object Arguments]"==f_(i)}var Kb=Object.prototype,nl=Kb.hasOwnProperty,UB=Kb.propertyIsEnumerable,zb=cN(function(){return arguments}())?cN:function(i){return MA(i)&&nl.call(i,"callee")&&!UB.call(i,"callee")},YI="object"==typeof Y&&Y&&!Y.nodeType&&Y,Yb=YI&&Re&&!Re.nodeType&&Re,qb=Yb&&Yb.exports===YI?ap.Buffer:void 0,m_=(qb?qb.isBuffer:void 0)||function(){return!1},ls={};ls["[object Float32Array]"]=ls["[object Float64Array]"]=ls["[object Int8Array]"]=ls["[object Int16Array]"]=ls["[object Int32Array]"]=ls["[object Uint8Array]"]=ls["[object Uint8ClampedArray]"]=ls["[object Uint16Array]"]=ls["[object Uint32Array]"]=!0,ls["[object Arguments]"]=ls["[object Array]"]=ls["[object ArrayBuffer]"]=ls["[object Boolean]"]=ls["[object DataView]"]=ls["[object Date]"]=ls["[object Error]"]=ls["[object Function]"]=ls["[object Map]"]=ls["[object Number]"]=ls["[object Object]"]=ls["[object RegExp]"]=ls["[object Set]"]=ls["[object String]"]=ls["[object WeakMap]"]=!1;var Jb,Rf="object"==typeof Y&&Y&&!Y.nodeType&&Y,g_=Rf&&Re&&!Re.nodeType&&Re,ld=g_&&g_.exports===Rf&&GI.process,$b=function(){try{return g_&&g_.require&&g_.require("util").types||ld&&ld.binding&&ld.binding("util")}catch{}}(),qI=$b&&$b.isTypedArray,Xb=qI?(Jb=qI,function(i){return Jb(i)}):function(i){return MA(i)&&ud(i.length)&&!!ls[f_(i)]},VB=Object.prototype.hasOwnProperty,yO=function(i,l){return function(u){return i(l(u))}}(Object.keys,Object),JI=Object.prototype.hasOwnProperty;function uN(i){if(!aN(i))return yO(i);var l=[];for(var u in Object(i))JI.call(i,u)&&"constructor"!=u&&l.push(u);return l}var __=fh(Object,"create"),Co=Object.prototype.hasOwnProperty,Kc=Object.prototype.hasOwnProperty;function ra(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}function eo(i,l){for(var u=i.length;u--;)if(sN(i[u][0],l))return u;return-1}ra.prototype.clear=function(){this.__data__=__?__(null):{},this.size=0},ra.prototype.delete=function(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l},ra.prototype.get=function(i){var l=this.__data__;if(__){var u=l[i];return"__lodash_hash_undefined__"===u?void 0:u}return Co.call(l,i)?l[i]:void 0},ra.prototype.has=function(i){var l=this.__data__;return __?void 0!==l[i]:Kc.call(l,i)},ra.prototype.set=function(i,l){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=__&&void 0===l?"__lodash_hash_undefined__":l,this};var EO=Array.prototype.splice;function dp(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}dp.prototype.clear=function(){this.__data__=[],this.size=0},dp.prototype.delete=function(i){var l=this.__data__,u=eo(l,i);return!(u<0||(u==l.length-1?l.pop():EO.call(l,u,1),--this.size,0))},dp.prototype.get=function(i){var l=this.__data__,u=eo(l,i);return u<0?void 0:l[u][1]},dp.prototype.has=function(i){return eo(this.__data__,i)>-1},dp.prototype.set=function(i,l){var u=this.__data__,p=eo(u,i);return p<0?(++this.size,u.push([i,l])):u[p][1]=l,this};var LA=fh(ap,"Map");function Zb(i,l){var u,p,_=i.__data__;return("string"==(p=typeof(u=l))||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u)?_["string"==typeof l?"string":"hash"]:_.map}function hp(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}function pp(i){var l=this.__data__=new dp(i);this.size=l.size}hp.prototype.clear=function(){this.size=0,this.__data__={hash:new ra,map:new(LA||dp),string:new ra}},hp.prototype.delete=function(i){var l=Zb(this,i).delete(i);return this.size-=l?1:0,l},hp.prototype.get=function(i){return Zb(this,i).get(i)},hp.prototype.has=function(i){return Zb(this,i).has(i)},hp.prototype.set=function(i,l){var u=Zb(this,i),p=u.size;return u.set(i,l),this.size+=u.size==p?0:1,this},pp.prototype.clear=function(){this.__data__=new dp,this.size=0},pp.prototype.delete=function(i){var l=this.__data__,u=l.delete(i);return this.size=l.size,u},pp.prototype.get=function(i){return this.__data__.get(i)},pp.prototype.has=function(i){return this.__data__.has(i)},pp.prototype.set=function(i,l){var u=this.__data__;if(u instanceof dp){var p=u.__data__;if(!LA||p.length<199)return p.push([i,l]),this.size=++u.size,this;u=this.__data__=new hp(p)}return u.set(i,l),this.size=u.size,this};var Tc=Object.prototype.propertyIsEnumerable,v_=Object.getOwnPropertySymbols,jB=v_?function(i){return null==i?[]:(i=Object(i),function(l,u){for(var p=-1,_=null==l?0:l.length,y=0,C=[];++p<_;){var I=l[p];u(I)&&(C[y++]=I)}return C}(v_(i),function(l){return Tc.call(i,l)}))}:function(){return[]};function e0(i){return p=jB,_=function lN(i){return tl(i)?function(l,u){var p=up(l),_=!p&&zb(l),y=!p&&!_&&m_(l),C=!p&&!_&&!y&&Xb(l),I=p||_||y||C,O=I?function(P,F){for(var Z=-1,ie=Array(P);++Z<P;)ie[Z]=F(Z);return ie}(l.length,String):[],D=O.length;for(var B in l)!VB.call(l,B)||I&&("length"==B||y&&("offset"==B||"parent"==B)||C&&("buffer"==B||"byteLength"==B||"byteOffset"==B)||Zi(B,D))||O.push(B);return O}(i):uN(i)}(l=i),up(l)?_:function(y,C){for(var I=-1,O=C.length,D=y.length;++I<O;)y[D+I]=C[I];return y}(_,p(l));var l,p,_}var bO=fh(ap,"DataView"),dN=fh(ap,"Promise"),Pl=fh(ap,"Set"),$I="[object Map]",BA="[object Promise]",hN="[object Set]",XI="[object WeakMap]",mh="[object DataView]",t0=Tf(bO),pN=Tf(LA),SO=Tf(dN),CO=Tf(Pl),Gm=Tf(xA),Wm=f_;(bO&&Wm(new bO(new ArrayBuffer(1)))!=mh||LA&&Wm(new LA)!=$I||dN&&Wm(dN.resolve())!=BA||Pl&&Wm(new Pl)!=hN||xA&&Wm(new xA)!=XI)&&(Wm=function(i){var l=f_(i),u="[object Object]"==l?i.constructor:void 0,p=u?Tf(u):"";if(p)switch(p){case t0:return mh;case pN:return $I;case SO:return BA;case CO:return hN;case Gm:return XI}return l});var ZI=Wm,FA=ap.Uint8Array;function A_(i){var l=-1,u=null==i?0:i.length;for(this.__data__=new hp;++l<u;)this.add(i[l])}function IO(i,l){for(var u=-1,p=null==i?0:i.length;++u<p;)if(l(i[u],u,i))return!0;return!1}function wO(i,l,u,p,_,y){var C=1&u,I=i.length,O=l.length;if(I!=O&&!(C&&O>I))return!1;var D=y.get(i),B=y.get(l);if(D&&B)return D==l&&B==i;var P=-1,F=!0,Z=2&u?new A_:void 0;for(y.set(i,l),y.set(l,i);++P<I;){var ie=i[P],oe=l[P];if(p)var ve=C?p(oe,ie,P,l,i,y):p(ie,oe,P,i,l,y);if(void 0!==ve){if(ve)continue;F=!1;break}if(Z){if(!IO(l,function(Ae,Te){if(!Z.has(Te)&&(ie===Ae||_(ie,Ae,u,p,y)))return Z.push(Te)})){F=!1;break}}else if(ie!==oe&&!_(ie,oe,u,p,y)){F=!1;break}}return y.delete(i),y.delete(l),F}function fN(i){var l=-1,u=Array(i.size);return i.forEach(function(p,_){u[++l]=[_,p]}),u}function TO(i){var l=-1,u=Array(i.size);return i.forEach(function(p){u[++l]=p}),u}A_.prototype.add=A_.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},A_.prototype.has=function(i){return this.__data__.has(i)};var Km=h_?h_.prototype:void 0,ew=Km?Km.valueOf:void 0,mN=Object.prototype.hasOwnProperty,n0="[object Arguments]",QB="[object Array]",Of="[object Object]",UA=Object.prototype.hasOwnProperty;function tw(i,l,u,p,_){return i===l||(null==i||null==l||!MA(i)&&!MA(l)?i!=i&&l!=l:function(y,C,I,O,D,B){var P=up(y),F=up(C),Z=P?QB:ZI(y),ie=F?QB:ZI(C),oe=(Z=Z==n0?Of:Z)==Of,ve=(ie=ie==n0?Of:ie)==Of,Ae=Z==ie;if(Ae&&m_(y)){if(!m_(C))return!1;P=!0,oe=!1}if(Ae&&!oe)return B||(B=new pp),P||Xb(y)?wO(y,C,I,O,D,B):function(dt,it,ft,Kt,en,zt,Ot){switch(ft){case"[object DataView]":if(dt.byteLength!=it.byteLength||dt.byteOffset!=it.byteOffset)return!1;dt=dt.buffer,it=it.buffer;case"[object ArrayBuffer]":return!(dt.byteLength!=it.byteLength||!zt(new FA(dt),new FA(it)));case"[object Boolean]":case"[object Date]":case"[object Number]":return sN(+dt,+it);case"[object Error]":return dt.name==it.name&&dt.message==it.message;case"[object RegExp]":case"[object String]":return dt==it+"";case"[object Map]":var _n=fN;case"[object Set]":if(_n||(_n=TO),dt.size!=it.size&&!(1&Kt))return!1;var Dt=Ot.get(dt);if(Dt)return Dt==it;Kt|=2,Ot.set(dt,it);var at=wO(_n(dt),_n(it),Kt,en,zt,Ot);return Ot.delete(dt),at;case"[object Symbol]":if(ew)return ew.call(dt)==ew.call(it)}return!1}(y,C,Z,I,O,D,B);if(!(1&I)){var Te=oe&&UA.call(y,"__wrapped__"),Be=ve&&UA.call(C,"__wrapped__");if(Te||Be){var Q=Te?y.value():y,tt=Be?C.value():C;return B||(B=new pp),D(Q,tt,I,O,B)}}return!!Ae&&(B||(B=new pp),function(dt,it,ft,Kt,en,zt){var Ot=1&ft,_n=e0(dt),Gn=_n.length;if(Gn!=e0(it).length&&!Ot)return!1;for(var Dt=Gn;Dt--;){var at=_n[Dt];if(!(Ot?at in it:mN.call(it,at)))return!1}var Ve=zt.get(dt),nt=zt.get(it);if(Ve&&nt)return Ve==it&&nt==dt;var Tt=!0;zt.set(dt,it),zt.set(it,dt);for(var ht=Ot;++Dt<Gn;){var qe=dt[at=_n[Dt]],Yt=it[at];if(Kt)var Tn=Ot?Kt(Yt,qe,at,it,dt,zt):Kt(qe,Yt,at,dt,it,zt);if(!(void 0===Tn?qe===Yt||en(qe,Yt,ft,Kt,zt):Tn)){Tt=!1;break}ht||(ht="constructor"==at)}if(Tt&&!ht){var Yn=dt.constructor,wt=it.constructor;Yn==wt||!("constructor"in dt)||!("constructor"in it)||"function"==typeof Yn&&Yn instanceof Yn&&"function"==typeof wt&&wt instanceof wt||(Tt=!1)}return zt.delete(dt),zt.delete(it),Tt}(y,C,I,O,D,B))}(i,l,u,p,tw,_))}var HB=Object.prototype.hasOwnProperty;const gN=i=>4294966272&i,nw=i=>{let l={R:0,G:0,B:0,A:0};if("string"==typeof i&&i.startsWith("#")){const I=i.slice(1);try{if(3===I.length){const O=Array.from(I).map(D=>D.repeat(2)).map(D=>parseInt(D,16));l={R:O[0]/255,G:O[1]/255,B:O[2]/255,A:1}}else if(6===I.length||8===I.length){var u,p,_,y,C;const O=null===(u=I.match(/\S{2}/g))||void 0===u?void 0:u.map(D=>parseInt(D,16));l={R:(null!==(p=O?.[0])&&void 0!==p?p:0)/255,G:(null!==(_=O?.[1])&&void 0!==_?_:0)/255,B:(null!==(y=O?.[2])&&void 0!==y?y:0)/255,A:null!=O&&O[3]?(null!==(C=O?.[3])&&void 0!==C?C:0)/255:1}}}catch{console.warn("error color representation:",i)}}else"object"==typeof i&&(l={R:i.R/255,G:i.G/255,B:i.B/255,A:i.A||1});return l};function RO(i){return void 0!==i?Dn(Promise.resolve(i)):Ts(TE,1).pipe(gt(l=>l))}function _N(i,l,u){return rw.apply(this,arguments)}function rw(){return rw=V(function*(i,l,u){if(i===su)return su;{let p=i;if(l){const _=yield(y=i,new Promise((C,I)=>{try{const O=document.createElement("canvas"),D=O.getContext("2d"),B=new Image;B.src=y;const P=16/9,F=1280,Z=Math.floor(F/P);O.width=F,O.height=Z,B.onload=()=>{const{width:ie,height:oe}=B,ve=oe*P;if(ve>F){const Ae=ie,Te=Math.floor(ie/P);D?.drawImage(B,0,(oe-Te)/2,Ae,Te,0,0,F,Z)}else D?.drawImage(B,(ie-ve)/2,0,ve,oe,0,0,F,Z);O.toBlob(Ae=>{C(Ae)})}}catch(O){O instanceof DOMException&&O.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),I(O)}}));p=URL.createObjectURL(_)}if(p){const _=`__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__${Math.floor(100*Math.random())}`,y=document.createElement("img");return y.src=p,y.id=_,y.style.display="none",y.onload=()=>{l&&URL.revokeObjectURL(p)},y.onerror=C=>{l&&URL.revokeObjectURL(p),console.error("Cannot load virtual background image.",C)},(u??document.body).appendChild(y),new Promise(C=>{y.onload=()=>{l&&URL.revokeObjectURL(p),C(_)},y.onerror=I=>{l&&URL.revokeObjectURL(p),console.error("Cannot load virtual background image.",I),C(null)}})}}var y;return null}),rw.apply(this,arguments)}function iw(i,l,u,p){return OO.apply(this,arguments)}function OO(){return OO=V(function*(i,l,u,p){var _;const y=null!==(_=p&&p.parentNode)&&void 0!==_?_:document.body,{imageUrl:C,cropped:I,captureHeight:O,captureWidth:D,cameraId:B}=i,P=document.createElement("div");let F;P.style.display="none",F=C?yield _N(C,I,P):null;let Z=`__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__${Math.floor(100*Math.random())}`;if(p){const oe=jc(p);oe.id?Z=oe.id:oe.id=Z}else{const oe=document.createElement("canvas");oe.width=380,oe.height=214,oe.id=Z,P.appendChild(oe)}y?.appendChild(P);const{video:{videoSsrc:ie}}=u;return l.startVirtualBackgroundSetting(Z,F,ie,B,D,O),P}),OO.apply(this,arguments)}function vN(i,l,u){return ow.apply(this,arguments)}function ow(){return ow=V(function*(i,l,u){if(i){const p=yield _N(i,l);p&&(u.updateVirtualBackgroundImage(p),p!==su&&setTimeout(()=>{var _;const y=document.getElementById(p);null==y||null===(_=y.parentNode)||void 0===_||_.removeChild(y)},0))}else u.updateVirtualBackgroundImage(null)}),ow.apply(this,arguments)}function AN(i,l){return"default"===i||l.some(u=>u.deviceId===i)||[Y.MobileVideoFacingMode.Environment,Y.MobileVideoFacingMode.User,Y.MobileVideoFacingMode.Left,Y.MobileVideoFacingMode.Right].includes(i)}function sw(i,l,u){const p=[],{video:{videoSsrc:_,activeCamera:y}}=l,{cameraId:C=y,captureWidth:I=0,captureHeight:O=0,videoElement:D,originalRatio:B,ptz:P}=u||{};let F;return D&&(D.id?F=D.id:(F="__ZOOM_SDK_SELF_VIDEO_@__".replace("@",`${Math.floor(1e4*Math.random())}`),D.id=F)),i.startCaptureVideo(_,C,I,O,F,od(),!B&&pv(),P),p.push(th({cameraId:C,captureWidth:I,captureHeight:O,videoDOMId:F,originalRatio:B,ptz:P})),p}function aw(i,l,u){const{max:p,min:_,step:y}=i;let C=u/100*(p-_);y&&(C=Math.min(Math.floor(C/y)*y,Math.floor(C)));let I=l+C;return I=Math.min(p,I),I=Math.max(_,I),I}function DO(i,l){let u="",p=l;switch(i){case Yp.Down:p=-l,u="tilt";break;case Yp.Up:u="tilt";break;case Yp.Left:p=-l,u="pan";break;case Yp.Right:u="pan";break;case Yp.ZoomIn:u="zoom";break;case Yp.ZoomOut:p=-l,u="zoom"}return{key:u,range:p}}function cw(i){const l=["pan","tilt","zoom"].reduce((u,p)=>i[p]&&0!==i[p].value?$t($t({},u),{},{[p]:i[p].value}):u,{});return function(u){if(null==u)return!0;if(tl(u)&&(up(u)||"string"==typeof u||"function"==typeof u.splice||m_(u)||Xb(u)||zb(u)))return!u.length;var p=ZI(u);if("[object Map]"==p||"[object Set]"==p)return!u.size;if(aN(u))return!uN(u).length;for(var _ in u)if(HB.call(u,_))return!1;return!0}(l)?null:l}function yN(i){return{pan:(i&fm.Pan)===fm.Pan,tilt:(i&fm.Tilt)===fm.Tilt,zoom:(i&fm.Zoom)===fm.Zoom}}function kO(i){return!Vp()&&!i&&(Tg()||!Kg()&&("function"==typeof window.ImageCapture||zd())&&"function"==typeof window.OffscreenCanvas)}const y_=mo.createAgent(),VA=Mi.getInstance();var u4=Object.freeze({__proto__:null,handleStartCaptureVideoSuccessEpic:(i,l)=>Ei(i,er.StartVideoCaptureSuccess).pipe(zn(u=>{const{video:{cameraDevicesList:p,activeCamera:_,ptz:y},meeting:{userId:C}}=l.value,{payload:{data:{currentDeviceID:I,PTZRange:O}}}=u,D=[];if(p.length<1&&(_t(cu,{reason:"Cannot detect camera devices"}),VA.stopCaptureVideo()),AN(_,p)||(_t($p,{reason:"cannot find target camera"}),VA.stopCaptureVideo()),y_.muteAttendeeVideo(C,!1),I&&O&&D.push(W2({deviceId:I,ptzRange:O})),_!==I&&D.push(af(I)),Object.prototype.hasOwnProperty.call(y,I)){const B=y[I];if(B){const P=cw(B);P&&VA.movePTZCamera(P)}}return Dn(D)})),startVideoResponse:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{var p,_,y,C;let[I,O]=u;return(null==I||null===(p=I.payload)||void 0===p||null===(_=p.body)||void 0===_||null===(y=_.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.id)===O.meeting.userId}),En(u=>{var p,_,y,C;let[I]=u;return!0===(null==I||null===(p=I.payload)||void 0===p||null===(_=p.body)||void 0===_||null===(y=_.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.bVideoOn)}),mf(()=>(_t(AT),Xh(!0)))),handleForbiddenCaptureVideoEpic:i=>Ei(i,er.UserForbiddedCaptureVideo).pipe(ir(()=>_t(JS)),zo(bm(!0))),handleCameraIsTakenByOtherProgramsEpic:i=>Ei(i,er.UserCameraIsTakenByOtherPrograms).pipe(ir(()=>_t($S,{reason:"User camera is taken by other programs."})),zo(zT(!0))),handleVideoSocketErrorEpic:i=>Ei(i,er.VideoWebsocketBroken).pipe(ir(()=>{_t(Sl,{reason:"Video websocket broken."})}),Gr(qt)),handleStopVideoCaptureFailedEpic:i=>Ei(i,er.StopVideoCaptureFailed).pipe(ir(()=>{_t(Ng,{failed:!0,reason:"Unknown."})}),Gr(qt)),handleStopVideoCaptureSuccessEpic:(i,l)=>Ei(i,er.StopVideoCaptureSuccess).pipe(Un(l),mf(u=>{let[,p]=u;const{meeting:{userId:_},video:{isCurrentUserStartedVideo:y}}=p;y||_t(Ng),y_.muteAttendeeVideo(_,!0)})),stopVideoResponse:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{var p,_,y,C;let[I,O]=u;return(null==I||null===(p=I.payload)||void 0===p||null===(_=p.body)||void 0===_||null===(y=_.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.id)===O.meeting.userId}),En(u=>{var p,_,y,C;let[I]=u;return!1===(null==I||null===(p=I.payload)||void 0===p||null===(_=p.body)||void 0===_||null===(y=_.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.bVideoOn)}),mf(()=>(_t(Ng),Xh(!1)))),receiveVideoMuteIndication:(i,l)=>Zn(i,16133).pipe(Un(l),En(u=>{var p,_;let[y,C]=u;return(null==y||null===(p=y.payload)||void 0===p||null===(_=p.body)||void 0===_?void 0:_.id)===C.meeting.userId}),mf(u=>{let[p]=u;const{id:_,bVideoMute:y}=p.payload.body;return _t(Iv,{id:_,isVideoMuted:y}),!0===y&&VA.stopCaptureVideo(),!1===y&&_t(v2,{id:_,isVideoMuted:y}),as(y)})),receiveVideoActiveIndication:i=>Zn(i,16129).pipe(gt(l=>{const{payload:{body:{id:u,bVideoOn:p}}}=l,_=gN(u);return _t(qS,{bVideoOn:p,userId:_}),NC({bVideoOn:p,userId:_})})),receiveVideoSsrcIndication:(i,l)=>Zn(i,16131).pipe(En(u=>void 0!==u.payload.body.ssrc),Un(l),oo(u=>{let[p,_]=u;const{meeting:{isCurrentUserStartVideoBeforeReset:y},media:{videoEncodeStatus:C},video:{isVerifiedVideoCaptureCanvasAfterFailover:I}}=_,{payload:{body:{ssrc:O}}}=p,D=Jv(l).pipe(zn(B=>B&&!0===y&&!0!==B.bVideoOn?qu("video",C,"success").pipe(En(P=>{let[F,Z]=P;return F&&Z}),zn(()=>{const P=[Xh(void 0)],{video:{captureCanvasList:F,activeCamera:Z,customizedVideoOption:ie}}=l.value;return!1===I&&(Array.isArray(F)?F.forEach(oe=>{jc(document.querySelector(`#${oe}`))}):jc(document.querySelector(`#${F}`)),P.push(LC(!0))),Mi.getInstance().startCaptureVideo(O,Z,ie?.captureWidth||0,ie?.captureHeight||0,ie?.videoDOMId,od(),!(null!=ie&&ie.originalRatio)&&pv(),ie?.ptz),Dn(P)})):qt));return bs(rr(U2(O)),D)})),receiveVideoDecodeMaxSizeEpic:(i,l)=>Ei(i,er.VideoDecodeMaxSize).pipe(En(u=>{var p;return null==u||null===(p=u.payload)||void 0===p?void 0:p.data}),gt(u=>{const{size:p}=u.payload.data,{video:{renderedVideoList:_,receivedVideoMaxQuality:y}}=l.value,C=_.filter(I=>I.videoQuality===Y.VideoQuality.Video_720P);return y!==p&&C.length>0&&(p!==Y.VideoQuality.Video_720P&&y!==Y.VideoQuality.Video_720P||C.forEach(I=>{y_.subscribeVideo(I.userId,p,!1)})),KT(p)})),spotlightVideoResponseEpic:i=>Zn(i,16135).pipe(gt(l=>{const{payload:{body:{bLeadershipOn:u,id:p}}}=l,_=[];return u&&_.push(gN(p)),_t(CE,{spotlightList:_}),YE(_)})),handleGroupLayoutIndicationEpic:(i,l)=>Zn(i,7958).pipe(Un(l),gt(u=>{let[p,_]=u;const{payload:{body:y}}=p;let C=[];y&&y.group_list&&y.group_list[0]&&(C=y.group_list[0].map(O=>O.id));const I=Ks(_);return C=C.filter(O=>I.findIndex(D=>D.userId===O)>=0),_t(CE,{spotlightList:C}),YE(C)})),handleCurrentVideoResolution:i=>Ei(i,er.CurrentVideoResolution).pipe(mf(l=>(_t(wv),_t(Jp,l.payload.data),YT(l.payload.data)))),handleMeetingVideoAttributeEpic:i=>Zn(i,Sc).pipe(En(l=>{const{payload:{body:u}}=l;return void 0!==u?.bFollowHostVideo||void 0!==u?.VideoHd||void 0!==u?.bCanUnmuteVideo}),gt(l=>{const{payload:{body:{bFollowHostVideo:u,VideoHd:p,bCanUnmuteVideo:_}}}=l;return void 0!==u?(_t(yT,{bOn:u}),KL(u)):void 0!==_?G2(_):(VA.enableHardwareAccelerationForVideoEncode(!1),Sm(1===p))})),handleHostDragLayoutIndicationEpic:(i,l)=>Zn(i,7957).pipe(Un(l),gt(u=>{let[p,_]=u;const{video:{isFollowHostVideoLayout:y}}=_,{payload:{body:C}}=p,I=C&&C.drag_list&&C.drag_list.map(O=>O.id);return y&&_t(IE,{layout:I}),Q2(I)})),handlePeerVideoStateChangeEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[p,_]=u;const{meeting:{userId:y},video:{subscribedVideoList:C}}=_,I=p.payload.body.update,O=p.payload.body.remove;return I&&I.length>0&&I.findIndex(D=>D.id!==y&&(void 0!==D.bVideoOn||D.bHold))>-1||O&&O.some(D=>C.includes(D.id))}),ir(u=>{let[p,_]=u;const{payload:{body:{remove:y,update:C}}}=p,{video:{subscribedVideoList:I}}=_,O=Fg(_);if(y&&y.length>0&&y.filter(D=>I.includes(D.id)).forEach(D=>{_t(wE,{userId:D.id})}),C&&C.length>0){const D=C.filter(P=>void 0!==P.bVideoOn).filter(P=>-1===O.findIndex(F=>F.userId===P.id)),B=C.filter(P=>!0===P.bHold);B.length>0&&B.filter(P=>I.includes(P.id)).forEach(P=>{_t(wE,{userId:P.id})}),D.forEach(P=>{_t(P.bVideoOn?A2:wE,{userId:P.id})})}}),Gr(qt)),handleVideoQosDataEpic:(i,l)=>Ei(i,er.VideoQosData).pipe(Un(l),gt(u=>{var p;let[_,y]=u;const{video:{isCaptureForbidden:C,isCameraTaken:I},media:{videoEncodeStatus:O,videoDecodeStatus:D}}=y,B=Kr(y),P=EC(y),F=P.length>0,Z=B?.bVideoOn&&!C&&!I,ie=P.some(Ae=>Ae.bVideoOn),ve="success"===D&&F&&ie;return null!==(p=_.payload.data)&&void 0!==p&&p.encoding?"success"===O&&Z&&F?(_t(RE,_.payload),JE(_.payload)):JE(pm):ve?(_t(RE,_.payload),uf(_.payload)):uf(pm)})),handleVideoCellChangeEpic:i=>Ei(i,[66.5,66.6]).pipe(ir(l=>{const{payload:{type:u,data:p}}=l;if(66.5===u){const{ssrc:_,width:y,height:C,quality:I}=p;_t(ET,{userId:_,width:y,height:C,quality:I})}else if(66.6===u){const{ssrc:_,fps:y}=p;_t(ET,{userId:_,fps:y})}}),Gr(qt)),handleMaximumNumberOfHDSubscriptionsEpic:i=>i.pipe(Zr(`${vl}`),zn(V(function*(){return od()?1:(yield Mi.isSupportVideoDecodeHardwareAcceleration())?4:1})),gt(l=>Oi(l))),handleNetworkQualityChangeEpic:(i,l)=>Ei(i,er.NetworkQualityChange).pipe(En(u=>!!u.payload.data),zn(u=>{var p;const{payload:{data:{bwLevel:_,isUplink:y,networkLevel:C}}}=u,I=[],{meeting:{userId:O},video:{networkQuality:D,subscribedVideoList:B}}=l.value,P=y?"uplink":"downlink";return I.push($E({userId:O,level:C,bwLevel:_,type:P})),!function(Z,ie){if(Z===ie)return!0;if(!Z||!ie)return!1;const oe=Object.keys(Z),ve=Object.keys(ie),Ae=oe.length;if(ve.length!==Ae)return!1;for(let Te=0;Te<Ae;Te++){const Be=oe[Te];if(Z[Be]!==ie[Be]||!Object.prototype.hasOwnProperty.call(ie,Be))return!1}return!0}(null===(p=D[`${O}`])||void 0===p?void 0:p[P],{level:C,bwLevel:_})&&-1!==C&&(!y&&B.filter(Z=>Z!==O).length>0||y)&&_t(OE,{userId:O,type:P,level:C}),y&&y_.broadcastUserNetworkQuality({isUplink:y,level:C,bwLevel:_}),Dn(I)})),handleOthersNetworkQualityChangeEpic:(i,l)=>Bs(i,8005).pipe(En(u=>{var p;return!(null===(p=u.payload.body)||void 0===p||!p.nUserID)}),zn(u=>{const{payload:{body:{nLevel:p,nUserID:_}}}=u,{video:{networkQuality:y}}=l.value,C=y[`${_}`],I=[];return C&&C.uplink.level===p||(_t(OE,{userId:_,level:p,type:"uplink"}),I.push($E({userId:_,level:p,type:"uplink"}))),Dn(I)})),handleCameraConnectedIndicationEpic:(i,l)=>i.pipe(Zr(`${jv}`),ir(u=>{const{payload:p}=u,_=l.value,{meeting:{userId:y}}=_,C=Kr(_);0===p.length?C&&!C.bVideoConnect||y_.connectCamera(y,!1):null!=C&&C.bVideoConnect||y_.connectCamera(y,!0)}),Gr(qt))}),l4=Object.freeze({__proto__:null,handleVBPreloadEpic:i=>Ei(i,[er.VbModelPreloadingOk,er.VbModelPreloading_3S,er.VbModelPreloading_10S,er.VbSettingParaError]).pipe(zn(l=>{const{payload:{type:u,data:p}}=l,_=[];return[er.VbModelPreloadingOk,er.VbModelPreloading_3S,er.VbModelPreloading_10S].includes(u)?(_.push(cf(!0)),_t(TE,!0),u===er.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):u===er.VbSettingParaError&&(p===zS.VBModelNotMatch?(_t(TE,!1),_.push(cf(!1))):(_t(Xp,!1),_.push(pu(!1)))),Dn(_)})),handleVBSettingSuccessEpic:i=>Ei(i,er.StartVideoStreamInVbSettingSuccess).pipe(gt(()=>(_t(Xp,!0),pu(!0))))});const d4=mo.createAgent(),EN=Mi.getInstance();var h4=Object.freeze({__proto__:null,handleRemoteCameraControlEpic:(i,l)=>Zn(i,8004).pipe(zn(u=>{const{payload:{body:{nCmd:p,nUserID:_,nReason:y,nButtonID:C}}}=u,I=l.value,O=Ks(I),{video:{currentCameraControlStatus:{isInControl:D,controllingUserId:B},cameraDevicesList:P,activeCamera:F}}=I,Z=O.find(oe=>Zk(oe.userId,_)),ie=[];if(ie.push(Hv(!0)),p===ec.Request){const oe={userId:Z?.userId,displayName:Z?.displayName};if(D){const ve=O.find(Ae=>Ae.userId===B);Object.assign(oe,{currentControllingUserId:ve?.userId,currentControllingDisplayName:ve?.displayName})}_t(UL,oe)}else if(p===ec.Approve)ie.push(JT(Z?.userId)),_t(Zp,{isApproved:!0,userId:Z?.userId,displayName:Z?.displayName});else if(p===ec.Decline)ie.push(nh(Z?.userId)),_t(Zp,{isApproved:!1,userId:Z?.userId,displayName:Z?.displayName,reason:y});else if(p===ec.GiveUp)ie.push(Yu({isInControl:!1,userId:0})),_t(mm,{isControlled:!1});else if(p===ec.StartControl||p===ec.StopControl)ie.push($T({cmd:p===ec.StartControl?"start":"stop",type:C}));else if(p===ec.SwitchCamera){const oe=P.findIndex(Ae=>Ae.deviceId===F),ve=oe+1===P.length?0:oe+1;ve!==oe&&EN.changeCamera(P[ve].deviceId)}return Dn(ie)})),handleFarEndCameraCapabilityEpic:(i,l)=>Zn(i,Do).pipe(En(u=>{var p;const{payload:{body:_}}=u;return null==_||null===(p=_.update)||void 0===p?void 0:p.some(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive)}),ir(u=>{const{payload:{body:{update:p}}}=u,_=p.find(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive);if(_){const{meeting:{userId:y}}=l.value;Zk(_.nFECCExecutive,y)&&_t(XS,{userId:_.id,ptz:yN(_.nFECC)})}}),Gr(qt)),handleFarEndCameraUserLeftEpic:(i,l)=>Zn(i,Do).pipe(En(u=>{var p;const{payload:{body:_}}=u,{video:{farEndCameraControlStatus:{controlledUserList:y}}}=l.value;return null==_||null===(p=_.remove)||void 0===p?void 0:p.some(C=>y.includes(C.id))}),zn(u=>{var p;const{payload:{body:_}}=u,y=[],{video:{farEndCameraControlStatus:{controlledUserList:C}}}=l.value,I=null==_||null===(p=_.remove)||void 0===p?void 0:p.find(O=>C.includes(O.id));return I&&y.push(nh(I.id)),Dn(y)})),handleFarEndCameraActionEpic:(i,l)=>i.pipe(Zr(`${$T}`),oo(u=>{const{payload:{cmd:p,type:_}}=u;return"start"===p?_c(0,200).pipe(Fd(()=>!!l.value.video.currentCameraControlStatus.isCameraMoving),zn(()=>{const{video:{ptz:y,activeCamera:C}}=l.value,I=y[C],O=cw(I)||{},{key:D,range:B}=DO(_,2);return I[D]?(Object.assign(O,{[D]:aw(I[D].capability,I[D].value,B)}),EN.movePTZCamera(O).then(()=>XT({deviceId:C,constraints:O}))):Promise.resolve(void 0)}),zn(y=>"object"==typeof y&&void 0!==y.type?rr(y):qt)):qt})),handleSendCapabilityWhenActiveCameraChangeEpic:(i,l)=>i.pipe(Zr(`${af}`),zn(u=>{const{payload:p}=u,{video:{customizedVideoOption:_,ptz:y}}=l.value;if(null!=_&&_.ptz){const C=y?.[p];void 0!==C&&d4.sendCameraAblity({pan:!!C.pan,tilt:!!C.tilt,zoom:!!C.zoom})}return qt}))});const bN={videoSsrc:0,cameraDevicesList:[],activeCamera:od()?Y.MobileVideoFacingMode.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?Y.VideoQuality.Video_720P:Y.VideoQuality.Video_360P,captureCanvasList:[],subscribedVideoList:[],renderedVideoList:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,receivedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1}},GB=Fr({[`${U2}`]:Et((i,l)=>{let{payload:u}=l;i.videoSsrc=u}),[`${jv}`]:Et((i,l)=>{let{payload:u}=l;i.cameraDevicesList=u}),[`${af}`]:Et((i,l)=>{let{payload:u}=l;const p=i.activeCamera;if(p in i.ptz){const _=i.ptz[p];["pan","tilt","zoom"].forEach(y=>{_[y]&&(_[y].value=0)})}i.activeCamera=u}),[`${NC}`]:Et((i,l)=>{let{payload:u}=l;i.activeVideoId=u.userId}),[`${Xh}`]:Et((i,l)=>{let{payload:u}=l;i.isCurrentUserStartedVideo=u}),[`${YE}`]:Et((i,l)=>{let{payload:u}=l;i.spotlightUserList=u}),[`${bm}`]:Et((i,l)=>{let{payload:u}=l;i.isCaptureForbidden=u}),[`${KT}`]:Et((i,l)=>{let{payload:u}=l;i.receivedVideoMaxQuality=u}),[`${V2}`]:Et((i,l)=>{let{payload:u}=l,p=u;Array.isArray(u)||(p=[u]),i.captureCanvasList=p}),[`${as}`]:Et((i,l)=>{let{payload:u}=l;i.isVideoMuted=u}),[`${MC}`]:Et((i,l)=>{let{payload:u}=l;i.isCaptureCameraLoading=u}),[`${zT}`]:Et((i,l)=>{let{payload:u}=l;i.isCameraTaken=u}),[`${LC}`]:Et((i,l)=>{let{payload:u}=l;i.isVerifiedVideoCaptureCanvasAfterFailover=u}),[`${xC}`]:Et((i,l)=>{let{payload:u}=l;i.isVerifiedVideoRenderCanvasAfterFailover=u}),[`${YT}`]:Et((i,l)=>{let{payload:u}=l;i.receivedVideoDimension=u}),[`${Zh}`]:Et((i,l)=>{let{payload:u}=l;i.subscribedVideoList.includes(u)||i.subscribedVideoList.push(u)}),[`${qT}`]:Et((i,l)=>{let{payload:u}=l;const p=i.subscribedVideoList.indexOf(u);p>=0&&i.subscribedVideoList.splice(p,1)}),[`${Qg}`]:Et((i,l)=>{let{payload:u}=l;const p=i.renderedVideoList.find(_=>_.userId===u.userId&&_.key===u.key&&_.canvasId===u.canvasId);p?p.videoQuality=u.videoQuality:i.renderedVideoList.push($t({},u))}),[`${H2}`]:Et((i,l)=>{let{payload:u}=l;const p=i.renderedVideoList.findIndex(_=>_.userId===u.userId&&_.key===u.key&&_.canvasId===u.canvasId);p>=0&&i.renderedVideoList.splice(p,1)}),[`${KL}`]:Et((i,l)=>{let{payload:u}=l;i.isFollowHostVideoLayout=u}),[`${Q2}`]:Et((i,l)=>{let{payload:u}=l;i.hostDragLayout=u}),[`${Sm}`]:Et((i,l)=>{let{payload:u}=l;i.isSupportHDVideo=u}),[`${Oi}`]:Et((i,l)=>{let{payload:u}=l;i.maximumNumbeOfHDSubscriptions=u}),[`${G2}`]:Et((i,l)=>{let{payload:u}=l;i.bCanUnmuteVideo=u}),[`${cf}`]:Et((i,l)=>{let{payload:u}=l;i.virtualBackground.isVBPreloadReady=u}),[`${pu}`]:Et((i,l)=>{let{payload:u}=l;i.virtualBackground.isVBConfigured=u}),[`${qE}`]:Et((i,l)=>{let{payload:u}=l;i.virtualBackground.imageSrc=u.imageSrc,i.virtualBackground.cropped=u.cropped}),[`${Qv}`]:Et((i,l)=>{let{payload:u}=l;const{encode:p,decode:_}=u;void 0!==p&&(i.hardwareAcceleration.encode=p),void 0!==_&&(i.hardwareAcceleration.decode=_)}),[`${JE}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.encode=u.data}),[`${uf}`]:Et((i,l)=>{let{payload:u}=l;i.statistic.decode=u.data}),[`${th}`]:Et((i,l)=>{let{payload:u}=l;const{cameraId:p,captureWidth:_,captureHeight:y,videoDOMId:C,originalRatio:I,ptz:O}=u;i.activeCamera=p,i.customizedVideoOption={captureWidth:_,captureHeight:y,videoDOMId:C,originalRatio:I,ptz:O}}),[`${$E}`]:Et((i,l)=>{let{payload:u}=l;const{userId:p,level:_,bwLevel:y,type:C}=u;Object.prototype.hasOwnProperty.call(i.networkQuality,`${p}`)?i.networkQuality[`${p}`][`${C}`]={level:_,bwLevel:y}:Object.assign(i.networkQuality,{[`${p}`]:{[C]:{level:_,bwLevel:y}}})}),[`${W2}`]:Et((i,l)=>{let{payload:u}=l;const{deviceId:p,ptzRange:_}=u;if(Object.prototype.hasOwnProperty.call(i.ptz,p)){const y=i.ptz[p];y&&["pan","tilt","zoom"].forEach(C=>{const I=_[C];if(I){var O;const D=null===(O=y[C])||void 0===O?void 0:O.capability;D?Object.assign(D,$t({},I)):y[C]={capability:$t({},I),value:0}}})}else Object.assign(i.ptz,{[p]:{pan:_.pan?{capability:$t({},_.pan),value:0}:null,tilt:_.tilt?{capability:$t({},_.tilt),value:0}:null,zoom:_.zoom?{capability:$t({},_.zoom),value:0}:null}})}),[`${Hv}`]:Et((i,l)=>{let{payload:u}=l;i.currentCameraControlStatus.isRequested=u}),[`${Yu}`]:Et((i,l)=>{let{payload:u}=l;const{isInControl:p,userId:_}=u;i.currentCameraControlStatus.isInControl=p,i.currentCameraControlStatus.controllingUserId=_}),[`${JT}`]:Et((i,l)=>{let{payload:u}=l;i.farEndCameraControlStatus.controlledUserList.includes(u)||i.farEndCameraControlStatus.controlledUserList.push(u)}),[`${nh}`]:Et((i,l)=>{let{payload:u}=l;const p=i.farEndCameraControlStatus.controlledUserList.indexOf(u);-1!==p&&i.farEndCameraControlStatus.controlledUserList.splice(p,1)}),[`${$T}`]:Et((i,l)=>{let{payload:u}=l;i.currentCameraControlStatus.isCameraMoving="start"===u.cmd}),[`${XT}`]:Et((i,l)=>{let{payload:u}=l;const{constraints:p,deviceId:_}=u,y=i.ptz[_];["pan","tilt","zoom"].forEach(C=>{void 0!==p[C]&&(y[C].value=p[C])})}),[`${lf}`]:Et((i,l)=>{let{payload:u}=l;i.farEndCameraControlStatus.isControlling=u}),[`${j2}`]:(i,l)=>{let{payload:u}=l;const p={isVerifiedVideoCaptureCanvasAfterFailover:!1,isVerifiedVideoRenderCanvasAfterFailover:!1,captureCanvasList:i.captureCanvasList,cameraDevicesList:i.cameraDevicesList};return u&&Object.assign(p,{activeCamera:i.activeCamera,customizedVideoOption:i.customizedVideoOption,ptz:i.ptz}),$t($t({},bN),p)}},bN),p4=Ls(u4,l4,h4),{InitSuccessVideo:jA,InitSuccessAudio:PO,InitSuccessSharing:uw,InitFailedVideo:QA,InitFailedAudio:E_,InitFailedSharing:NO}=er;let b_;const SN=Ls(Object.freeze({__proto__:null,connectToMediaStreamEpic:(i,l)=>i.pipe(Zr(`${vl}`),Un(l),En(u=>{let[,p]=u;return void 0!==p.media.assetsPath&&void 0!==p.media.mediaConstraints}),ir(u=>{let[,p]=u;const{media:{assetsPath:_,mediaConstraints:y,fileWithVersion:C,enforceMultipleVideos:I,enforceVirtualBackground:O},meeting:{enableAudioQos:D,enableVideoQos:B}}=p;if(b_=Mi.getInstance(),b_.notifySDKMeetingReady(),_&&y){const P={};BS()&&"function"!=typeof window.SharedArrayBuffer&&Object.assign(P,{enableMultiDecodeVideoWithoutSAB:!!I,enableVirtualBackgroundWithoutSAB:!!O}),mR(O)&&Object.assign(P,{resourceManager:QI.exports.IResourceManager,file:[{path:`${_}/vb-resources/vbbuffer.bin`,type:"bin"},{path:`${_}/vb-resources/tf.min.js`,type:"js"}]}),b_.setAssetsAndConstraint(_,y,C,P)}Jv(l).pipe(Un(l)).subscribe(P=>{let[F,Z]=P;const{meeting:{svcUrl:ie,meetingNumber:oe,conId:ve,e2eEncrypt:Ae,userId:Te,isWebinar:Be}}=Z;var Q;F&&(null===(Q=b_)||void 0===Q||Q.connect({svcUrl:ie,meetingNumber:oe,conId:ve,e2eEncrypt:Ae,isViewOnly:Na(F.userRole),currentUserId:Te,isWebinar:Be,enableAudioQos:D,enableVideoQos:B}))})}),oo(()=>Np(u=>{var p;return null===(p=b_)||void 0===p?void 0:p.registerCallback(u)},u=>{var p;return null===(p=b_)||void 0===p?void 0:p.unregisterCallback(u)},(u,p)=>({type:u,data:p})).pipe(gt(u=>av(u))))),connectedMediaStreamEpic:i=>Ei(i,[jA,PO,uw,QA,E_,NO]).pipe(sP(l=>{const{payload:{type:u,data:p}}=l;if(u===PO||u===E_){if(p===Yo.EncodeSuccess)return _t(au),rr(IS("success"));if(p===Yo.DecodeSuccess)return _t(yE),rr(Mo("success"));if(p===Yo.EncodeFailed)return _t(EE),rr(IS("failed"));if(p===Yo.DecodeFailed)return _t(g2),rr(Mo("failed"))}else if(u===jA||u===QA){if(p===Yo.EncodeSuccess)return _t(qp),rr(nT("success"));if(p===Yo.DecodeSuccess)return _t(FL),rr(cv("success"));if(p===Yo.EncodeFailed)return _t(bE),rr(nT("failed"));if(p===Yo.DecodeFailed)return _t(vT),rr(cv("failed"))}else if(u===uw||u===NO){if(p===Yo.EncodeSuccess)return _t(_T),rr(wS("success"));if(p===Yo.DecodeSuccess)return _t(YS),rr(Lp("success"));if(p===Yo.EncodeFailed)return _t(_2),rr(wS("failed"));if(p===Yo.DecodeFailed)return _t(Pg),rr(Lp("failed"));if(u===uw&&void 0===p)return _t(YS),rr(Lp("success"))}})),mediaDeviceUpdateEpic:(i,l)=>Ei(i,[jA,PO]).pipe(mu(()=>{if("object"==typeof navigator.mediaDevices)return bs(cP(),bs(Ei(i,er.StartVideoCaptureSuccess),Ya(navigator.mediaDevices,"devicechange"),Ei(i,er.UserGrantCaptureAudio).pipe(En(()=>!l.value.audio.isUserGrantCaptureAudio))).pipe(zn(()=>cP().pipe(ir(()=>{_t(Sv)}))))).pipe(Un(l),zn(u=>{let[p,_]=u;const y=[QE(p.microphones),CC(p.speakers),jv(p.cameras)];if(_.audio){const{audio:{activeMicrophone:O,activeSpeaker:D,microphoneDevicesList:B,speakerDevicesList:P}}=_,{microphones:F,speakers:Z}=p,ie=B.filter(ve=>-1===F.findIndex(Ae=>Ae.deviceId===ve.deviceId)),oe=P.filter(ve=>-1===Z.findIndex(Ae=>Ae.deviceId===ve.deviceId));var C,I;ie.length>0&&ie[0].deviceId===O&&(null===(C=b_)||void 0===C||C.changeMicrophone("default"),y.push(k2("default"))),oe.length>0&&oe[0].deviceId===D&&(null===(I=b_)||void 0===I||I.changeSpeaker("default"),y.push(P2("default")))}return Dn(y)}))})),sendUserNodeListToMediaSDKEpic:(i,l)=>Bs(i,Do).pipe(ir(u=>{const{type:p,payload:{body:_}}=u,y=Mi.getInstance(),C=p===`${_l}`;if(_.add){const I=_.add.map(O=>({userid:O.id,sn:O.zoomID&&Cs(O.zoomID)}));if(!C){const{meeting:{gcmSessinKey:O}}=l.value;y.sendUserNodeList(I,O)}y.updateUserMediaSN({added:I,isFromMainSession:C,iVType:ga.SHARING_DECODE}),C&&y.updateUserMediaSN({added:I,isFromMainSession:C,iVType:ga.AUDIO_DECODE})}if(_.remove){if(!C){const{meeting:{gcmSessinKey:I}}=l.value;y.sendUserNodeList(_.remove.map(O=>({userid:O.id,bremove:!0})),I)}y.updateUserMediaSN({removed:_.remove.map(I=>I.id),isFromMainSession:C,iVType:ga.SHARING_DECODE}),C&&y.updateUserMediaSN({removed:_.remove.map(I=>I.id),isFromMainSession:C,iVType:ga.AUDIO_DECODE})}}),Gr(qt)),handleMediaSdkGcmIVResponseEpic:i=>Ei(i,er.AesGcmIvResponse).pipe(ir(l=>{const{payload:{data:{workerType:u,iv:p}}}=l,_=Dr.get(Gi.WebclientIVState);if(_){const y=$t($t({},_),{},{[u]:p});Dr.set(Gi.WebclientIVState,y,wi.SessionStorage)}}),Gr(qt)),handleMediaEncryptIndication:i=>i.pipe(Zr(`${rd}`),En(l=>[jp,lE,US].includes(l.payload.evt)),gt(l=>{const{payload:{evt:u,body:{encryptKey:p,additionalType:_}}}=l;return bg({type:u===jp?"audio":u===lE?"video":"sharing",encryptKey:p,additionalType:_})}))})),lw={meeting:DB,socket:$P,participants:sO,media:OA},WB=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||jy;function CN(i){return function(l){for(var u=Object.keys(l),p={},_=0;_<u.length;_++){var y=u[_];"function"==typeof l[y]&&(p[y]=l[y])}var C,O,I=Object.keys(p);try{O=p,Object.keys(O).forEach(function(D){var B=O[D];if(void 0===B(void 0,{type:AS.INIT}))throw new Error(wa(12));if(void 0===B(void 0,{type:AS.PROBE_UNKNOWN_ACTION()}))throw new Error(wa(13))})}catch(O){C=O}return function(O,D){if(void 0===O&&(O={}),C)throw C;for(var B=!1,P={},F=0;F<I.length;F++){var Z=I[F],oe=O[Z],ve=(0,p[Z])(oe,D);if(void 0===ve)throw new Error(wa(14));P[Z]=ve,B=B||ve!==oe}return(B=B||I.length!==Object.keys(O).length)?P:O}}($t($t({},lw),i))}const Ki=Symbol("store"),gr=Symbol("getState"),zc=Symbol("dispatch"),bu=Symbol("additionFeatures"),Nn=Symbol("mediaContext");function jt(i,l,u){const p=u.value;u.value=function(){const _=this[Ki];if(_){const{meeting:{isOnHold:O,isMeetingReset:D,meetingStatus:B}}=_.getState();if(B!==Is.Joined)return Promise.reject({type:Jd,reason:"closed"});if(D)return Promise.reject({type:Jd,reason:"reconnecting"});if(O)return Promise.reject({type:Jd,reason:"on hold"})}for(var y=arguments.length,C=new Array(y),I=0;I<y;I++)C[I]=arguments[I];return p.apply(this,C)}}function gh(i,l,u){const p=u.value;u.value=function(){const _=this[Ki];if(_){const O=_.getState();if(!Wu(O))return Promise.reject({type:_a,reason:"only host or co-host can do the operation"})}for(var y=arguments.length,C=new Array(y),I=0;I<y;I++)C[I]=arguments[I];return p.apply(this,C)}}function Su(i,l,u){const p=u.value;u.value=function(){const _=this[Ki];if(_){const O=_.getState();if(!Ku(O))return Promise.reject({type:_a,reason:"only host can do the operation"})}for(var y=arguments.length,C=new Array(y),I=0;I<y;I++)C[I]=arguments[I];return p.apply(this,C)}}function Er(i){return function(l,u,p){const _=p.value;p.value=function(){const y=this[Ki];if(y&&void 0===y.getState()[i])return Promise.reject({type:Pn,reason:`Module:${i} is not enabled`});for(var C=arguments.length,I=new Array(C),O=0;O<C;O++)I[O]=arguments[O];return _.apply(this,I)}}}function KB(i){return function(l,u,p){const _=p.value;p.value=function(){const y=this[Ki];if(y){const{meeting:{meetingOptions:D}}=y.getState();if(!0===D[i])return Promise.reject({type:C2,reason:`${i} is locked`})}for(var C=arguments.length,I=new Array(C),O=0;O<C;O++)I[O]=arguments[O];return _.apply(this,I)}}}let fp;function xO(i){return function(l,u,p){const _=p.value;p.value=function(y){const C=this[Ki];if(C){const P=C.getState(),F=Array.isArray(i)?i:[i];let Z=Ks(P).find(ie=>ie.userId===y);if(F.findIndex(ie=>ie===fp.Attendee)>-1&&(Z=rc(P).find(ie=>ie.userId===y)),!Z)return Promise.reject({type:Ir,reason:"no matching user"});{const{meeting:{userId:ie}}=C.getState();for(let oe=0;oe<F.length;oe++){const ve=F[oe];if(ve===fp.Other&&y===ie)return Promise.reject({type:Pn,reason:"operation is not applicable to self"});if(ve===fp.Self&&y!==ie)return Promise.reject({type:Pn,reason:"operation is only applicable to self "});if(ve===fp.Client&&tf(Z.userType)||ve===fp.Phone&&!tf(Z.userType))return Promise.reject({types:Pn,reason:"improper target client"})}}}for(var I=arguments.length,O=new Array(I>1?I-1:0),D=1;D<I;D++)O[D-1]=arguments[D];const B=[y,...O];return _.apply(this,B)}}}!function(i){i.Self="Self",i.Other="Other",i.Client="Client",i.Phone="Phone",i.Attendee="Attendee"}(fp||(fp={}));const r0=Um.getInstance();function zm(i,l){return function(u,p,_){const y=_.value;_.value=function(){for(var C=arguments.length,I=new Array(C),O=0;O<C;O++)I[O]=arguments[O];if(r0.checkLaplace())try{const D=r0.makeLogger([i]),B=l?I.map((P,F)=>l.includes(F+1)?Ma(P):P):I;return D.info(`${p},params:${JSON.stringify(B)}`),y.apply(this,I).then(P=>(D.info(`${p} success`),P)).catch(P=>{let F=`${p} failed,`;return"object"==typeof P&&(F=`${F},${P.type?`type:${P.type},`:""}${P.reason?`reason:${P.reason}`:""}`),D.error(F),Promise.reject(P)})}catch{}return y.apply(this,I)}}}class mp{constructor(l){this[Ki]=void 0,this[zc]=void 0,this[gr]=void 0,this[bu]=void 0,this[Ki]=l,this[zc]=l.dispatch,this[gr]=l.getState}}var zB,dd,o0,Os;const S_=mo.createAgent();let IN=(zB=xO(fp.Other),dd=xO(fp.Other),o0=xO(fp.Other),kn((Os=class extends mp{constructor(i){super(i),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(i,l,u){return this.useSDK=!0,this.init(i,l,u)}init(i,l,u){const{[zc]:p,[Ki]:_}=this;let y=qv,C=u?.fileWithVersion||!1,I="en-US",O=`${qv}/${xS}`;if(u){const{dependentAssets:D,additionalFeatures:B,constraints:P,language:F,webEndpoint:Z}=u;if(F&&(I=F),Z&&(ab=function(oe,ve){let Ae=oe;/^https?:\/\//.test(Ae)||(Ae=`https://${oe}`);try{const Te=new URL(Ae);if(!ve)return Te.href;if(ve.hostname)return Te.hostname;if(ve.path)return Te.pathname}catch{return""}return""}(Z,{hostname:!0})),D===om.CDN||D===cb)y=cb,O=`${cb}/${xS}`,C=!0;else if(D===om.Global||D===qv)y=qv,O=`${qv}/${xS}`,C=!0;else if(D===om.CN||D===tI)y=tI,O=`${tI}/${xS}`,C=!0;else if(D&&/^https?:\/\//.test(D)){let ie=D;"/"===ie[ie.length-1]&&(ie=ie.slice(0,length-1)),y=ie,O=C?`${ie}/${xS}`:`${ie}/${oE}`}B&&Array.isArray(B)&&B.forEach(ie=>{if(this[bu][ie]&&void 0===_.getState()[ie]){const{epic:oe,reducer:ve,Client:Ae}=this[bu][ie];_.injectReducer(ie,ve),_.injectEpic(oe);const Te=new Ae(_);this.modules.set(ie,Te)}}),null!=P&&P.audio&&void 0===_.getState().audio&&(_.injectReducer("audio",Gb),_.injectEpic(a4)),null!=P&&P.video&&void 0===_.getState().video&&(_.injectReducer("video",GB),_.injectEpic(p4)),null!=P&&P.screen&&void 0===_.getState().share&&(_.injectReducer("share",hB),_.injectEpic(mI))}return p(Da({apiKey:i,signature:l,language:I,useSDK:this.useSDK})),p(Jy({mediaConstraints:u&&u.constraints||{},assetsPath:y,fileWithVersion:C,enforceMultipleVideos:u?.enforceMultipleVideos,enforceVirtualBackground:u?.enforceVirtualBackground})),void 0!==u?.stayAwake&&p(Ec(u.stayAwake)),new Promise((D,B)=>{null!=u&&u.skipJsMedia?D(""):function(P,F,Z){const ie=document.createElement("script");ie.type="text/javascript",ie.readyState?ie.onreadystatechange=()=>{"loaded"!==ie.readyState&&"complete"!==ie.readyState||(ie.onreadystatechange=null,F())}:(ie.onload=()=>{F()},ie.onerror=()=>{B({type:Ir,reason:"dependent assets are not accessible"})}),ie.src=P,"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(ie):document.getElementsByTagName("head")[0].appendChild(ie)}(O,()=>{D("")})})}on(i,l){((u,p)=>{const _=w2[u];if(_){const y=Xd.get(u);if(y)y.push(p),Xd.set(u,y);else{Xd.set(u,[p]);const I=bs(..._.map(O=>{const{event:D,payload:B}=O;return Ya(zh,D).pipe(gt(P=>B(P)),Ht(xs))})).subscribe(O=>{const D=Xd.get(u);D&&D.forEach(B=>{B(O)})});kT.push(I)}}})(i,l)}off(i,l){((u,p)=>{if(w2[u]){const _=Xd.get(u);if(Array.isArray(_)){const y=_.filter(C=>C!==p);Xd.set(u,y)}}})(i,l)}getFeatureModule(i){return this.modules.get(i)}leave(){const{[gr]:i,[zc]:l}=this;return"connected"===i().socket.zoomSocketStatus?(l(Gd()),_c(500).pipe(zo("")).toPromise()):Promise.resolve("")}end(){const{[gr]:i,[zc]:l}=this;return"connected"===i().socket.zoomSocketStatus?(l(uv()),_c(500).pipe(ir(()=>{Nv()}),zo("")).toPromise()):Promise.resolve("")}changeName(i,l){const u=this[Ki].getState(),{meeting:{bAllowAttendeeRename:p}}=u,_=Kr(u),y=Na(_.userRole),C=Wu(u);if(y)return Promise.reject({type:_a});if(l&&l!==_?.userId){if(C){const{participants:{attendeesList:I}}=u,O=I.find(D=>D.userId===l);if(O)return S_.rename(l,Xs(i),Xs(O.displayName)),ob(l,D=>D.displayName===i);{const D=rc(u).find(B=>B.userId===l);if(D){const B=oh.getInstance();return S_.rename(D.userId,Xs(i),Xs(D.displayName)),B.rename(D.jid,i),_i(Ic,P=>{const F=P.find(Z=>Z.jid===D.jid);return F&&F.displayName===i})}return Promise.reject({type:Ir,reason:"no matching user"})}}return Promise.reject({type:_a})}return i===_.displayName?Promise.resolve():C||p?(S_.rename(_.userId,Xs(i),Xs(_.displayName)),_i(Bc,I=>I.displayName===i)):Promise.reject({type:_a,reason:"host disallow rename themselves"})}makeHost(i){return S_.assignHost(i,!1),ob(i,l=>!0===l.isHost)}makeCoHost(i){const l=this[Ki].getState();return!0===Ks(l).find(p=>p.userId===i)?.bCoHost?Promise.reject({type:Ir,reason:`user:[${i}] is already co-host `}):(S_.assignHost(i,!0),ob(i,p=>!0===p.bCoHost))}revokeCoHost(i){const l=this[Ki].getState();return!1===Ks(l).find(p=>p.userId===i)?.bCoHost?Promise.reject({type:Ir,reason:`user:[${i}] is not a co-host`}):(S_.revokeCoHost(i),ob(i,p=>!1===p.bCoHost))}reclaimHost(){const i=this[gr](),{meeting:{isOriginHost:l}}=i,u=Kr(i);return null!=u&&u.isHost?Promise.resolve(""):l?(S_.reclaimHost(u.userId,!1),_i(Bc,p=>!0===p.isHost)):Promise.reject({type:_a,reason:"You are not the origin host"})}isHost(){const i=this[Ki].getState(),l=Kr(i);return!!l&&l.isHost}isCoHost(){const i=this[Ki].getState(),l=Kr(i);return!!l&&!!l.bCoHost}isOriginHost(){const{meeting:{isOriginHost:i}}=this[gr]();return i}getCurrentUserInfo(){const i=this[Ki].getState(),l=Kr(i);if(l){const u={userId:l.userId,userGuid:l.userGUID,displayName:l.displayName,audio:l.audio,muted:l.muted,isHost:l.isHost,isCoHost:l.bCoHost,isGuest:l.bGuest,avatar:l.avatar,isPhoneUser:tf(l.userType),bRaiseHand:l.bRaiseHand,bHold:l.bHold,bVideoOn:l.bVideoOn,sharerOn:l.sharerOn,sharePause:l.sharerPause,feedback:l.feedback,caps:l.caps,userIdentity:l.userIdentity};if(i.meeting.isWebinar&&Na(l.userRole)){const{audio:p}=i,_=p?.isAllowToTalk;Object.assign(u,{isAllowToTalk:_})}return u}return null}getParticipantsList(){const i=this[Ki].getState(),{meeting:{meetingStatus:l}}=i,u=Kr(i);return l===Is.Joined&&u&&!u.bHold?Ks(i).map(p=>({userId:p.userId,userGuid:p.userGUID,displayName:p.displayName,audio:p.audio,muted:p.muted,isHost:p.isHost,isCoHost:p.bCoHost,isGuest:p.bGuest,avatar:p.avatar,isPhoneUser:tf(p.userType),bRaiseHand:p.bRaiseHand,bHold:p.bHold,bVideoOn:p.bVideoOn,sharerOn:p.sharerOn,sharePause:p.sharerPause,feedback:p.feedback,bLocalRecord:p.bLocalRecord,strPronoun:p.strPronoun,sdkKey:p.sdkKey,audioConnectionStatus:p.audioConnectionStatus,caps:p.caps,bAllowISORecord:p.bAllowISORecord,bVideoConnect:p.bVideoConnect,userIdentity:p.userIdentity})):[]}getAssistantsList(){const i=this[Ki].getState(),{meeting:{meetingStatus:l}}=i,u=Kr(i);return l===Is.Joined&&u?HL(i).map(p=>({userId:p.userId,displayName:p.displayName,isNewAst:!0})):[]}getMeetingHost(){var i;const l=this[gr]();let u=Rs(l);return u||(null===(i=l.breakoutRoom)||void 0===i?void 0:i.currentRoom.status)!==hr.InRoom||(u=l.breakoutRoom.mainSessionAttendeeList.find(p=>p.isHost)),u?{userId:u.userId,userGuid:u.userGUID,displayName:u.displayName,audio:u.audio,muted:u.muted,isHost:u.isHost,isCoHost:u.bCoHost,avatar:u.avatar,isPhoneUser:tf(u.userType),bRaiseHand:u.bRaiseHand,bHold:u.bHold,bVideoOn:u.bVideoOn,sharerOn:u.sharerOn,feedback:u.feedback,userIdentity:u.userIdentity}:null}getMeetingInfo(){const{meeting:{meetingStatus:i,isOnHold:l,meetingNumber:u,passWord:p,userName:_,userEmail:y,meetingTopic:C,meetingOptions:I,encType:O,region:D,network:B,topic:P,zlkJwtToken:F,userId:Z,lang:ie,inviteEmail:oe,meetingId:ve,participantID:Ae,h323Password:Te,recordingDisclaimer:Be,recordingDisclaimerForRecorder:Q,wrInfo:tt}}=this[gr](),dt=i===Is.Joined&&!l;if(F)return{topic:P,password:p,userName:_,isInMeeting:dt,userId:Z,meetingId:ve};{let it="";return 0===O?it="None":1===O?it="AES ECB":2===O&&(it="AES GCM"),{meetingNumber:u,password:p,userName:_,userEmail:y,inviteEmail:oe,meetingTopic:C,encryptionType:it,region:D,network:B,isInMeeting:dt,userId:Z,lang:ie,webEndpoint:ab,meetingId:ve,participantId:Ae,telPwd:Te,recordingInfo:{recordingDisclaimer:Be,recordingDisclaimerForRecorder:Q,isUserEnableRecordingReminder:I?.isUserEnableRecordingReminder},wrInfo:tt}}}}).prototype,"end",[Su,jt],Object.getOwnPropertyDescriptor(Os.prototype,"end"),Os.prototype),kn(Os.prototype,"changeName",[jt],Object.getOwnPropertyDescriptor(Os.prototype,"changeName"),Os.prototype),kn(Os.prototype,"makeHost",[zB,Su,jt],Object.getOwnPropertyDescriptor(Os.prototype,"makeHost"),Os.prototype),kn(Os.prototype,"makeCoHost",[dd,Su,jt],Object.getOwnPropertyDescriptor(Os.prototype,"makeCoHost"),Os.prototype),kn(Os.prototype,"revokeCoHost",[o0,Su,jt],Object.getOwnPropertyDescriptor(Os.prototype,"revokeCoHost"),Os.prototype),kn(Os.prototype,"reclaimHost",[jt],Object.getOwnPropertyDescriptor(Os.prototype,"reclaimHost"),Os.prototype),Os);var oi=Object.freeze({__proto__:null,receiveChatMessageFromXMPPEpic:(i,l)=>Hd(i,24583).pipe(Un(l),zn(u=>{let[p,_]=u;if(_.meeting.zlkJwtToken)return qt;const{payload:{body:{sn:y,senderName:C,senderJid:I,receiver:O,text:D,type:B}}}=p,P=Kr(_),F=rc(_),{meeting:{jid:Z,userId:ie},participants:{xmppAttendeeList:oe}}=_;return ju.beginDecrypt({decryptedText:D,type:ts.XMPP_CHAT,zoomId:y}).then(ve=>{var Ae;let{message:Te}=ve,Be=null,Q=0,tt="";P&&Na(P.userRole)&&Z===O?(Be=oe.find(it=>it.jid===I),Q=ie,tt=P.displayName):B===Wr.Panelist&&(Be=F.find(it=>it.jid===I),Q=Wr.Panelist,tt=gv.displayName);const dt={message:Te,sender:{name:C,userId:(null===(Ae=Be)||void 0===Ae?void 0:Ae.userId)||0,avatar:""},receiver:{name:tt,userId:Q},timestamp:(new Date).getTime()};return _t(jh,dt),XE(dt)})})),receiveChatMessageFromRWGEpic:(i,l)=>Zn(i,7944).pipe(Un(l),zn(u=>{let[p,_]=u;const{meeting:{bIbDisableChat:y,isWebinar:C},participants:{attendeesList:I}}=_,{payload:{body:{attendeeNodeID:O,sn:D,destNodeID:B,text:P,senderName:F,msgID:Z}}}=p,ie=Kr(_),oe=rc(_);if(ie){const ve=Na(ie?.userRole)&&O===ie.userId&&!Z;if(!y&&!ve){let Ae,Te=D;if(!D){const Be=I.find(Q=>Q.userId===B);Be&&(Te=Be.zoomID)}if(O===Wr.SilentModeUsers){const Be=Fp(P),Q={id:Z,message:Be,sender:{name:"Host",userId:B},receiver:{name:"Everyone (in Waiting Room)",userId:O},timestamp:(new Date).getTime()};Ae=Promise.resolve(Q)}else Ae=ju.beginDecrypt({decryptedText:P,zoomId:Te,type:ts.RWG_CHAT}).then(Be=>{let{message:Q}=Be;const tt=I.find(ft=>ft.userId===B),dt=F?Fp(F):tt?.displayName;let it="";if(O===Wr.All)it=C?"All panelists and attendees":"Everyone";else if(O===Wr.Panelist)it="All panelists";else if(C&&oe.findIndex(ft=>ft.userId===O)>-1)it=oe.find(ft=>ft.userId===O).displayName;else{const ft=I.find(Kt=>Kt.userId===O);ft&&(it=ft.displayName)}return{id:Z,message:Q,sender:{name:dt,userId:B,avatar:tt?.avatar},receiver:{name:it,userId:O},timestamp:(new Date).getTime()}});return Ae.then(Be=>(_t(jh,Be),XE(Be)))}}return qt})),changeAttendeePrivilegeResponse:(i,l)=>Zn(i,Sc).pipe(En(u=>{var p,_;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.chatPriviledge)||void 0!==(null===(_=u.payload.body)||void 0===_?void 0:_.bAllowAttendeeChat)}),Un(l),gt(u=>{let[p,_]=u;const{payload:{body:{chatPriviledge:y,bAllowAttendeeChat:C}}}=p,{chat:{chatPrivilege:I}}=_;return void 0!==C?(_t(_v,!0===C?{chatPrivilege:I}:{chatPrivilege:ko.NoAttendee}),q2(C)):(_t(_v,{chatPrivilege:y}),BC(y))})),changePanelistPrivilegeResponse:i=>Zn(i,Sc).pipe(En(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.panelistChatPriviledge)}),gt(l=>{const{payload:{body:{panelistChatPriviledge:u}}}=l;return _t(_v,{panelistChatPrivilege:u}),z2(u)})),chatResponseEpic:(i,l)=>Zn(i,4136).pipe(Un(l),zn(u=>{let[p,_]=u;const{payload:{body:{result:y,destNodeID:C,msgID:I}}}=p,{meeting:{userId:O},chat:{chatHistory:D}}=_;if(y===dE.Success){var B,P;const F=[];for(let ie=D.length-1;ie>=0;ie--){const oe=D[ie];if(!oe.id&&oe.sender.userId===O&&[Wr.All,Wr.Panelist,Wr.IndividualCcPanelist,C].includes(oe.receiver.userId)&&F.unshift(oe),oe.id)break}const Z=F.length>0&&null!==(B=null===(P=F[0])||void 0===P?void 0:P.highResTimeStampForIdentification)&&void 0!==B?B:0;return _t(Gs,{msgId:I,receiverId:C,identification:Z}),rr(fu({destNodeID:C,msgID:I,userId:O}))}return y===dE.Delete||y===dE.Block?rr(FC({msgId:I})):qt})),chatCmdResponseEpic:i=>Zn(i,4238).pipe(zn(l=>{const{payload:{body:{bSuccess:u,cmd:p,msgID:_}}}=l,y=[];return u&&p===mv.Delete&&(y.push(FC({msgId:_})),_t(Dg,{id:_})),Dn(y)})),chatCmdIndicationEpic:i=>Zn(i,7960).pipe(zn(l=>{const{payload:{body:{cmd:u,msgID:p}}}=l,_=[];return u===mv.Delete&&(_.push(FC({msgId:p})),_t(Dg,{id:p})),Dn(_)}))});const wN={chatHistory:[],chatPrivilege:ko.All,panelistChatPrivilege:Cc.AllPanelist,isAllowAttendeeChat:!0},LO=Fr({[`${XE}`]:Et((i,l)=>{let{payload:u}=l;i.chatHistory.push(u)}),[`${BC}`]:Et((i,l)=>{let{payload:u}=l;i.chatPrivilege=u}),[`${z2}`]:Et((i,l)=>{let{payload:u}=l;i.panelistChatPrivilege=u}),[`${q2}`]:Et((i,l)=>{let{payload:u}=l;i.isAllowAttendeeChat=u}),[`${fu}`]:Et((i,l)=>{let{payload:u}=l;const{destNodeID:p,msgID:_,userId:y}=u,C=[];for(let I=i.chatHistory.length-1;I>=0;I--){const O=i.chatHistory[I];if(!O.id&&O.sender.userId===y&&[Wr.All,Wr.Panelist,p].includes(O.receiver.userId)&&C.unshift(O),O.id)break}C.length>0&&(C[0].id=_)}),[`${FC}`]:Et((i,l)=>{let{payload:u}=l;const{msgId:p}=u,_=i.chatHistory.findIndex(y=>y.id===p);_>=0&&i.chatHistory.splice(_,1)}),[`${Y2}`]:()=>$t({},wN)},wN);function Ym(i,l,u){if(null!=u&&u.host)return[Rs(i),...T2(i)].filter(p=>p?.userId!==l).map(p=>({userId:p?.userId,displayName:p?.displayName,isHost:p?.isHost,isCoHost:p?.bCoHost}));{let p=[Rs(i),...T2(i),...i.participants.attendeesList.filter(_=>!(_.bCoHost||_.isHost||_.bHold))];if(null!=u&&u.includeAttendee){const _=rc(i).filter(y=>!tf(y.userType));p=[...p,..._]}return p.filter(_=>_?.userId!==l).map(_=>({userId:_?.userId,displayName:_?.displayName,isHost:_?.isHost,isCoHost:_?.bCoHost}))}}const YB=["highResTimeStampForIdentification"],BO=["highResTimeStampForIdentification"];var La;const qm=mo.createAgent(),HA=oh.getInstance(),s0=i=>{const{text:l,destId:u,sn:p,attendeeId:_}=i;return ju.beginEncrypt({text:l,type:ts.RWG_CHAT}).then(y=>{qm.chat(y,u,p,_)})};let a0=(kn((La=class extends mp{send(i,l){if(!i)return Promise.reject({type:Ir,reason:"Text is empty"});const{[gr]:u,[zc]:p}=this,_=u(),y=Kr(_),C=function(ie,oe){if(oe===Wr.All)return HS;if(oe===Wr.Panelist)return gv;if(oe===Wr.SilentModeUsers)return pT;{const{meeting:{isWebinar:ve},participants:{xmppAttendeeList:Ae,attendeesList:Te}}=ie;return ve?Te.find(Be=>Be.userId===oe)||Ae.find(Be=>Be.userId===oe):Te.find(Be=>Be.userId===oe)}}(_,l),I=((ie,oe,ve)=>{const Ae=oe?.userId;if(null==ie||!ie.zoomID||null==oe||!oe.displayName||Ae===ie.userId)return{type:Ir,reason:"invalid target user"};const{chat:{chatPrivilege:Te,panelistChatPrivilege:Be},meeting:{isWebinar:Q}}=ve,tt=Wu(ve),dt=oe.isHost||oe.bCoHost;let it=!1;if(!tt){if(Q)if(Na(ie.userRole))(Te===ko.NoAttendee||Te===ko.AllPanelist&&Ae!==Wr.Panelist||Te===ko.All&&Ae!==Wr.All&&Ae!==Wr.Panelist)&&(it=!0);else{const ft=Na(oe?.userRole);(Be===Cc.Invalid||Be===Cc.AllPanelist&&(ft||Ae===Wr.All))&&(it=!0)}else(Te===ko.NoAttendee||Te===ko.Host&&!dt||Ae===Wr.SilentModeUsers||Te===ko.EveryonePublicly&&Ae!==Wr.All&&!dt)&&(it=!0);if(it)return{type:_a,reason:"Insufficient chat privilege"}}return null})(y,C,_);if(I)return Promise.reject(I);const{meeting:{isWebinar:O,encType:D}}=_,B=D===Rg.AES_GCM;let P=Promise.resolve(),F=!1;const Z=O&&Na(C.userRole);return l===Wr.SilentModeUsers?qm.chat(Xs(i),l):O?Z?8==(8&C.clientCap)?P=s0({text:i,destId:Wr.IndividualCcPanelist,sn:y?.zoomID,attendeeId:l}):(P=s0({text:i,destId:Wr.Panelist,sn:y?.zoomID,attendeeId:l}).then(()=>(ie=>{const{text:oe,jid:ve,isGCMEnabled:Ae}=ie;return ju.beginEncrypt({text:oe,type:ts.XMPP_CHAT}).then(Te=>{HA.sendWebinarMseeage(Te,ve,Wr.IndividualCcPanelist,Ae)})})({text:i,jid:C.jid,isGCMEnabled:B})),F=!0):C&&(P=s0({text:i,destId:C.userId,sn:y?.zoomID})):P=s0({text:i,destId:C.userId,sn:y?.zoomID}),P.then(()=>{const ie=(new Date).getTime(),oe=performance.now(),ve={message:i,sender:{name:y?.displayName,userId:y?.userId,avatar:y?.avatar},receiver:{name:C?.displayName,userId:Z?Wr.IndividualCcPanelist:C?.userId},timestamp:ie,highResTimeStampForIdentification:oe};return p(XE(ve)),F?(_t(jh,ve),ve):new Promise((Ae,Te)=>{Ts(Gs).pipe($1(5e3),Pi(Be=>oe!==Be.identification||!([Be.receiverId,Wr.All,Wr.Panelist].includes(l)||Be.receiverId===Wr.IndividualCcPanelist)),is(1)).subscribe(Be=>{const{msgId:Q}=Be,tt=$t($t({id:Q},Or(ve,YB)),Z&&{receiver:{name:C?.displayName,userId:C?.userId}});_t(jh,tt),Ae(tt)},()=>{Te({type:hC})})})})}setPrivilege(i){const l=this[gr](),{meeting:{isWebinar:u},chat:{chatPrivilege:p}}=l;return p===i?Promise.resolve(""):!u&&!jS.includes(i)||u&&!hT.includes(i)?Promise.reject({type:Ir,reason:"invalid privilege value of parameter"}):(qm.setChatPriviledge(i),_i(_v,_=>_.chatPrivilege===i))}setPanelistPrivilege(i){const l=this[gr](),{chat:{panelistChatPrivilege:u}}=l,p=d2[i];return u===p?Promise.resolve(""):Object.values(QS).includes(i)?(qm.setPanelistChatPrivilege(i),_i(_v,_=>_.panelistChatPrivilege===p)):Promise.reject({type:Ir,reason:"Panelist privilege value is invalid"})}deleteMessage(i){const l=this[gr](),{chat:{chatHistory:u},meeting:{meetingOptions:p,userId:_}}=l;if(null!=p&&p.isEnableDeleteChatMsg){const y=Wu(l),C=u.find(I=>I.id===i);if(C){const{sender:I}=C;if(y)qm.chatCmdReq(i,mv.Delete);else{if(I.userId!==_)return Promise.reject({type:_a,reason:"can not delete message"});qm.chatCmdReq(i,mv.Delete)}return _i(Dg,O=>O.id===i).then(()=>({id:i}))}return Promise.reject({type:Ir,reason:"msgId is wrong"})}return Promise.reject({type:Pn,reason:"can not delete messages"})}lockChat(i){const l=this[gr](),{meeting:{meetingOptions:u}}=l;return this.setPrivilege(i?ko.NoOne:null!=u&&u.isPrivateChatEnabled?ko.All:ko.EveryonePublicly)}getPrivilege(){const{chat:{chatPrivilege:i,isAllowAttendeeChat:l}}=this[gr]();return l?i:ko.NoAttendee}getReceivers(){const i=this[gr](),{chat:{chatPrivilege:l,panelistChatPrivilege:u,isAllowAttendeeChat:p},meeting:{isWebinar:_}}=i;if(!_&&!p)return[];const y=Kr(i),C=Wu(i);if(y)if(_)if(Na(y.userRole)){if(!p)return[];if(l===ko.All)return[gv,HS];if(l===ko.AllPanelist)return[gv];if(l===ko.NoOne)return[]}else{if(C||u===Cc.Everyone){const I=Ym(i,y.userId,{includeAttendee:!0});return[gv,HS,...I]}if(u===Cc.AllPanelist){const I=Ym(i,y.userId);return[gv,...I]}}else{const I=Wu(i);if(l===ko.All||I){const O=Ym(i,y.userId);return[HS,...O]}if(l===ko.Host)return Ym(i,y.userId,{host:!0});if(l===ko.EveryonePublicly){const O=Ym(i,y.userId,{host:!0});return[HS,...O]}if(l===ko.NoOne)return[]}return[]}getHistory(){return this[gr]().chat.chatHistory.map(i=>Or(i,BO))}isAllowToDeleteMessages(){const i=this[gr](),{meeting:{meetingOptions:l}}=i;return l?.isEnableDeleteChatMsg}}).prototype,"send",[jt],Object.getOwnPropertyDescriptor(La.prototype,"send"),La.prototype),kn(La.prototype,"setPrivilege",[gh,jt],Object.getOwnPropertyDescriptor(La.prototype,"setPrivilege"),La.prototype),kn(La.prototype,"setPanelistPrivilege",[gh,jt,function(i,l,u){const p=u.value;u.value=function(){const _=this[Ki];if(_){const{meeting:{isWebinar:O}}=_.getState();if(!O)return Promise.reject({type:Jd,reason:"non-webinar"})}for(var y=arguments.length,C=new Array(y),I=0;I<y;I++)C[I]=arguments[I];return p.apply(this,C)}}],Object.getOwnPropertyDescriptor(La.prototype,"setPanelistPrivilege"),La.prototype),kn(La.prototype,"deleteMessage",[jt],Object.getOwnPropertyDescriptor(La.prototype,"deleteMessage"),La.prototype),kn(La.prototype,"lockChat",[gh,jt],Object.getOwnPropertyDescriptor(La.prototype,"lockChat"),La.prototype),La);const c0=Ls(oi),ac=Um.getInstance();function dw(i){const{meeting:{isMeetingReset:l,meetingId:u,meetingNumber:p,userName:_,userEmail:y},breakoutRoom:C}=i;let I="";var O;return I=l?null!=C&&null!==(O=C.currentRoom)&&void 0!==O&&O.boConfId?"join breakout room":"meeting failover":"join meeting",{label:I,payload:{meetingId:Ma(u),meetingNumber:Ma(p),userName:Ma(_),userEmail:Ma(y)}}}const{InitSuccessVideo:C_,InitSuccessAudio:Rc,InitSuccessSharing:hw,InitFailedVideo:u0,InitFailedAudio:gp,InitFailedSharing:TN}=er,RN=[{event:er.UserForbiddedCaptureVideo,message:Wc.UserForbiddedCaptureVideo,logType:"warn",additionalTags:["Video Join Flow"]},{event:er.StartVideoCaptureSuccess,message:Wc.StartCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:er.StopVideoCaptureSuccess,message:Wc.StopCaptureVideoSuccess,logType:"info",additionalTags:["Video Join Flow"]},{event:er.StartVideoStreamInVbSettingSuccess,message:Wc.VBSettingSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:er.VbModelPreloadingOk,message:Wc.VBPreloadSuccess,logType:"info",additionalTags:["Video VB Flow"]},{event:er.VbModelPreloading_3S,message:Wc.VBPreloading3S,logType:"warn",additionalTags:["Video VB Flow"]},{event:er.VbModelPreloading_10S,message:Wc.VBPreloading10S,logType:"warn",additionalTags:["Video VB Flow"]},{event:er.VbSettingParaError,message:Wc.VBSettingFailed,logType:"error",additionalTags:["Video VB Flow"]}],FO=[{event:er.AudioBridgeReconnectStart,message:sc.AudioBridgeReconnectStart,logType:"info",additionalTags:["Audio Join Flow"]},{event:er.AudioBridgeReconnectEnd,message:sc.AudioBridgeReconnectEnd,logType:"info",additionalTags:["Audio Join Flow"]},{event:er.UserGrantCaptureAudio,message:sc.DeviceAudioStreamCaptured,logType:"info",additionalTags:["Audio Capture Flow"]},{event:er.UserForbiddedCaptureAudio,message:sc.AudioCapturedForbidden,logType:"error",additionalTags:["Audio Capture Flow"]},{event:er.AudioWebsocketBroken,message:sc.AudioWorkerWebsocketBroken,logType:"error",additionalTags:["Audio Init Flow"]},{event:er.AudioZeroData,message:i=>{const{audio:{webrtcRestartCount:l}}=i;return l<3?sc.AudioCaptureZeroData:null},logType:"error",additionalTags:["Audio Init Flow"]},{event:er.JoinComputerAudioComplete,message:sc.AudioJoinComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:er.LeaveComputerAudioComplete,message:sc.AudioLeaveComplete,logType:"info",additionalTags:["Audio Join Flow"]},{event:er.JoinSharingAudioComplete,message:sc.SharingAudioStartComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:er.LeaveSharingAudioComplete,message:sc.SharingAudioStopComplete,logType:"info",additionalTags:["Audio Sharing Flow"]},{event:er.AudioSpeakerSetError,message:sc.ChangeSpeakerError,logType:"error",additionalTags:["Audio Play Flow"]}].map(i=>$t($t({},i),{},{tag:"Audio"})).concat(RN.map(i=>$t($t({},i),{},{tag:"Video"})));var UO=Object.freeze({__proto__:null,handleLoggerMeetingOptionEpic:(i,l)=>i.pipe(Zr(`${lv}`),zn(()=>{const{meeting:{logConfig:u,logEncryptionPubKey:p},logger:{options:_}}=l.value,y=_||{};return Object.assign(y,{logConfig:u,logEncryptionPubKey:p}),ac.init(y).catch(()=>null),qt})),connectedMediaStreamForLogEpic:i=>Ei(i,[C_,Rc,hw,u0,gp,TN]).pipe(rh(l=>{const{payload:{type:u,data:p}}=l,_=ac.makeLogger(["Audio","Audio Init Flow"]),y=ac.makeLogger(["Video","Video Init Flow"]),C=ac.makeLogger(["Sharing","Sharing Init Flow"]);u===Rc||u===gp?p===Yo.EncodeSuccess?_.info(sc.AudioEncodeSuccess):p===Yo.DecodeSuccess?_.info(sc.AudioDecodeSuccess):p===Yo.EncodeFailed?_.warn(sc.AudioEncodeFailed):p===Yo.DecodeFailed&&_.warn(sc.AudioDecodeFailed):u===C_||u===u0?p===Yo.EncodeSuccess?y.info(Wc.VideoEncodeSuccess):p===Yo.DecodeSuccess?y.info(Wc.VideoDecodeSuccess):p===Yo.EncodeFailed?y.warn(Wc.VideoEncodeFailed):p===Yo.DecodeFailed&&y.warn(Wc.VideoDecodeFailed):u!==hw&&u!==TN||(p===Yo.EncodeSuccess?C.info(ph.SharingEncodeSuccess):p===Yo.DecodeSuccess?C.info(ph.SharingDecodeSuccess):p===Yo.EncodeFailed?C.warn(ph.SharingEncodeFailed):p===Yo.DecodeFailed?C.warn(ph.SharingDecodeFailed):u===hw&&void 0===p&&C.info(ph.SharingDecodeSuccess))})),handleLogFromMediaSDKEpic:(i,l)=>{return u=i,p=FO.map(u=>u.event),_=u=>{const{payload:{type:p}}=u,_=FO.find(y=>y.event===p);if(_){const{message:y,logType:C,additionalTags:I,tag:O}=_;let D=y;"function"==typeof y&&(D=y(l.value)),D&&ac.makeLogger([O])[C](D,I)}},Ei(u,p).pipe(rh(_));var u,p,_},handleLogJoinEpic:i=>Zn(i,4098).pipe(rh(_=>{const{payload:{body:y}}=_,C=["jid","mn","participantID","userGUID","zoomID"];if(y){let I=["conID","confID","mmrFeature","mmrFeatureEx","reportDomain","res","role","svcUrl","userID"].reduce((O,D)=>void 0!==y[D]?$t($t({},O),{},{[`${D}`]:y[D]}):O,{});I=C.reduce((O,D)=>void 0!==y[D]?$t($t({},O),{},{[`${D}`]:Ma(y[D])}):O,I),ac.makeLogger(["A/V Performance Info"]).info(`${navigator.hardwareConcurrency}`,["CPU_CORES"]),ac.makeLogger(["Command Socket Event"]).info(`log join meeting info ${JSON.stringify(I)}`,["User Info Map"])}})),handleLogRWCEmptyEpic:(i,l)=>i.pipe(Zr(`${sT}`),Un(l),En(u=>{let[,p]=u;return void 0===p.meeting.encryptedRWC&&(void 0===p.meeting.encryptedGEORWC||0===p.meeting.encryptedGEORWC.length)}),rh(()=>{const{label:u,payload:p}=dw(l.value);ac.makeLogger(["Join Meeting Flow"]).info(`${u} ${JSON.stringify(p)}`,["Ping RWC Domain Empty"])})),handleLogSocketErrorEpic:(i,l)=>i.pipe(Zr(`${wo}`),En(u=>u.payload===xo.OnError||u.payload===xo.Disconnect||u.payload===xo.NoHeartbeat),rh(u=>{const{payload:p}=u,{socket:{rwgServerList:_,retryCount:y}}=l.value,{payload:C}=dw(l.value);ac.makeLogger(["Join Meeting Flow"]).info(`websocket unexpected disconnected,${JSON.stringify($t({code:p,rwgHost:_[y]},C))}`,["RWG Disconnect"])})),handleLogFailoverEpic:(i,l)=>i.pipe(Zr(`${iE}`),rh(u=>{const{payload:{reason:p,count:_,interval:y}}=u,{payload:C}=dw(l.value);ac.makeLogger(["Join Meeting Flow"]).info(`meeting failover,${JSON.stringify($t({reason:p,count:_,interval:y},C))}`,["Failover"])})),handleLogRwgUrlEpic:(i,l)=>i.pipe(Zr(`${Lh}`),En(u=>u.payload.status===ao.Connecting),rh(u=>{const{payload:{rwgUrl:p}}=u;let _=p.replace(/(\d+)\?/,`${Ma("$1")}?`);_=["email","zoomid","participantID","mid","dn2","customer_key","mpwd","topic"].reduce((C,I)=>C.indexOf(I)>-1?C.replace(new RegExp(`${I}=([^&]+)`,"g"),`${I}=${Ma("$1")}`):C,_);const{payload:y}=dw(l.value);ac.makeLogger(["Join Meeting Flow"]).info(`RWG URL,${JSON.stringify($t({rwgUrl:_},y))}`,["RWG Url"])}))});const{setLoggerInitOptions:VO}=fo("SET_LOGGER_INIT_OPTIONS"),GA=Um.getInstance(),pw=Fr({[`${VO}`]:Et((i,l)=>{let{payload:u}=l;i.options=u})},{options:void 0}),ON=Ls(UO);var qB=Object.freeze({__proto__:null,handleRecordingEnableEpic:i=>i.pipe(Zr(`${lv}`),gt(l=>{const{payload:{recordingEnable:u}}=l;return eP(u)})),receiveCloudRecordIndication:(i,l)=>Zn(i,Sc).pipe(En(u=>{var p,_,y;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.cmrServerStatus)||void 0!==(null===(_=u.payload.body)||void 0===_?void 0:_.disAllowClientStopAutoCmr)||void 0!==(null===(y=u.payload.body)||void 0===y?void 0:y.enableAutomicRecordingCloud)}),Un(l),zn(u=>{let[p,_]=u;const{cmrServerStatus:y,disAllowClientStopAutoCmr:C,enableAutomicRecordingCloud:I}=p.payload.body,O=[];return void 0!==y&&(y!==ss.Init&&(_t(dm,{cmrServerStatus:y}),_.recording.recordingIsoEnable&&y===ss.Start&&_t(Gp,{status:Y.RecordingStatus.Ask})),O.push(tb(y))),void 0!==C&&O.push(HC(!C)),void 0!==I&&O.push(Im(I)),Dn(O)})),receiveIsoCloudRecordIndication:i=>Zn(i,Sc).pipe(En(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.bCmrIsoEnble)}),gt(l=>{const{bCmrIsoEnble:u}=l.payload.body;return nb(u)})),receiveLocalRecordingIndicationEpic:i=>Zn(i,Do).pipe(En(l=>{const{payload:{body:{update:u}}}=l;return u?.some(p=>void 0!==p.bLocalRecordStatus)}),ir(l=>{const{payload:{body:{update:u}}}=l;u.filter(p=>void 0!==p.bLocalRecordStatus).forEach(p=>{_t(xL,{userId:p.id,bLocalRecord:1===p.bLocalRecordStatus})})}),Gr(qt)),receiveUserISORecordingStatusEpic:i=>Zn(i,Do).pipe(En(l=>{const{payload:{body:{update:u}}}=l;return u?.some(p=>void 0!==p.bAllowISORecord)}),ir(l=>{const{payload:{body:{update:u}}}=l;u.filter(p=>void 0!==p.bAllowISORecord).forEach(p=>{_t(Gp,{userId:p.id,status:p.bAllowISORecord?Y.RecordingStatus.Accept:Y.RecordingStatus.Decline})})}),Gr(qt)),receiveIQResponseIndication:i=>Zn(i,Sc).pipe(En(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.SalesRecordingAnalytics)}),gt(l=>{const{SalesRecordingAnalytics:u}=l.payload.body;return _t(m2,{isZoomIQ:u}),GC(u)})),receiveIQOperationResponse:(i,l)=>Zn(i,4319).pipe(Un(l),En(u=>{var p;let[_]=u;return void 0!==(null===(p=_.payload.body)||void 0===p?void 0:p.success)}),zn(u=>{let[p,_]=u;const y=[],{success:C}=p.payload.body,{recording:{zoomIQChanging:I}}=_;return _t(Hn,{success:C}),C&&y.push(WC(!I)),Dn(y)}))});const I_={cmrStatus:ss.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1},jO=Fr({[`${tb}`]:Et((i,l)=>{let{payload:u}=l;i.cmrStatus=u}),[`${eP}`]:Et((i,l)=>{let{payload:u}=l;i.recordingEnable=u}),[`${nb}`]:Et((i,l)=>{let{payload:u}=l;i.recordingIsoEnable=u}),[`${HC}`]:Et((i,l)=>{let{payload:u}=l;i.allowStopAutoRecording=u}),[`${Im}`]:Et((i,l)=>{let{payload:u}=l;i.automaticCloudRecordingEnable=u}),[`${GC}`]:Et((i,l)=>{let{payload:u}=l;i.isZoomIQ=u}),[`${WC}`]:Et((i,l)=>{let{payload:u}=l;i.zoomIQChanging=u}),[`${tP}`]:()=>$t({},I_)},I_);var l0,fw,WA,mw,QO,Ea;const hd=mo.createAgent();let KA=(l0=Er("recording"),fw=Er("recording"),WA=Er("recording"),mw=Er("recording"),QO=Er("recording"),kn((Ea=class extends mp{startRecording(){const i=this[gr](),{meeting:{bIbDisableRecording:l,recordingEnable:u},recording:{cmrStatus:p}}=i;return l?Promise.reject({type:Pn,reason:"Rejected by Information Barrier"}):u?p===ss.Start?Promise.resolve(""):(hd.recordMeeting(!0,!1),_i(dm,_=>_.cmrServerStatus===ss.Start)):Promise.reject({type:Pn,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const i=this[gr](),{recording:{cmrStatus:l}}=i;return l===ss.Pause?Promise.resolve(""):l!==ss.Start?Promise.reject({type:Pn,reason:"Recording is not started"}):(hd.recordMeeting(!1,!0),_i(dm,u=>u.cmrServerStatus===ss.Pause))}stopRecording(){const i=this[gr](),{recording:{cmrStatus:l}}=i;return l===ss.Stop?Promise.resolve(""):(hd.recordMeeting(!1,!1),_i(dm,u=>u.cmrServerStatus===ss.Stop))}accept(){const i=this[gr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=i,p=Kr(i);return u?l!==ss.Start&&l!==ss.Pause?Promise.reject({type:Pn,reason:"Recording is not started"}):null!=p&&p.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(hd.allowSelfRecord(!0),_i(Gp,_=>_?.userId===p?.userId&&_?.status===Y.RecordingStatus.Accept)):Promise.reject({type:Pn,reason:"ISO Recording is not enabled"})}decline(){const i=this[gr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=i,p=Kr(i);return u?l!==ss.Start&&l!==ss.Pause?Promise.reject({type:Pn,reason:"Recording is not started"}):!0===p?.bAllowISORecord?Promise.reject({type:Pn,reason:"You had accept ISO recording, cant change it"}):(hd.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:Pn,reason:"ISO Recording is not enabled"})}getRecordingStatus(){const i=this[gr](),{recording:{cmrStatus:l}}=i;return l===ss.Start?Y.RecordingStatus.Recording:l===ss.Pause?Y.RecordingStatus.Paused:Y.RecordingStatus.Stopped}isRecordingEnabled(){const i=this[gr](),{recording:{recordingEnable:l}}=i;return l}isAllowedToStopAutoRecording(){const i=this[gr](),{recording:{allowStopAutoRecording:l}}=i;return l}isAutomaticCloudRecordingEnabled(){const i=this[gr](),{recording:{automaticCloudRecordingEnable:l}}=i;return l}enableRecordingWithIQ(i){const{[gr]:l,[zc]:u}=this,p=l(),{recording:{isZoomIQ:_,zoomIQChanging:y},meeting:{meetingOptions:C}}=l();return C.isEnableKiwiRecording?Wu(p)?y?Promise.reject({type:Pn,reason:"We are changing, please wait"}):i===_?Promise.reject({type:Pn,reason:`You have ${i?"enable":"disable"} Zoom IQ, don't need change`}):(u(WC(!y)),u(GC(!_)),hd.enableZoomIQRecord(i),_i(Hn,I=>I?.success)):Promise.reject({type:Pn,reason:"Only Host or co-host can enable/disable Zoom IQ"}):Promise.reject({type:Pn,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry"})}}).prototype,"startRecording",[gh,jt,l0],Object.getOwnPropertyDescriptor(Ea.prototype,"startRecording"),Ea.prototype),kn(Ea.prototype,"pauseRecording",[gh,jt,fw],Object.getOwnPropertyDescriptor(Ea.prototype,"pauseRecording"),Ea.prototype),kn(Ea.prototype,"stopRecording",[gh,jt,WA],Object.getOwnPropertyDescriptor(Ea.prototype,"stopRecording"),Ea.prototype),kn(Ea.prototype,"accept",[jt,mw],Object.getOwnPropertyDescriptor(Ea.prototype,"accept"),Ea.prototype),kn(Ea.prototype,"decline",[jt,QO],Object.getOwnPropertyDescriptor(Ea.prototype,"decline"),Ea.prototype),Ea);const HO=Ls(qB);let zA,gw,YA;(function(i){i[i.All=1]="All",i[i.Private=2]="Private"})(zA||(zA={})),function(i){i.SUCCESS="success"}(gw||(gw={})),function(i){i.CustomizedKey="__zoom_internal_message_customized_key__@@"}(YA||(YA={}));const GO=oh.getInstance(),WO=(i,l,u)=>{const{meeting:{encType:p}}=u,_=l,y=OL(i),C=_?zA.Private:zA.All;return p===Rg.AES_GCM?ju.beginEncrypt({text:y,type:ts.XMPP_CHAT}).then(I=>{GO.sendWebinarMseeage(I,_,C,!0)}):GO.sendWebinarMseeage(y,_,C,!1)};function qA(i,l){const{cmd:{jids:u}}=l;return Object.prototype.hasOwnProperty.call(u,i)?Promise.resolve():Ts(Ic).pipe(Pi(p=>-1===p.findIndex(_=>Number(_.userId)===i)),is(1),Ht(fl)).toPromise()}function pd(i,l){for(const[u,p]of Object.entries(i))if(p.jid===l)return u}var _w=Object.freeze({__proto__:null,receiveCmdChannelResponseXMPPEpic:(i,l)=>Hd(i,24577).pipe(Un(l),gt(u=>{let[p]=u;const{payload:{body:{status:_}}}=p;return _===gw.SUCCESS&&_t(Hp,Y.ConnectionState.Connected),KC(_)})),receiveCmdChannelMessageFromXMPPEpic:(i,l)=>Hd(i,24583).pipe(Un(l),zn(u=>{let[p,_]=u;const{meeting:{userId:y,encType:C},cmd:{jids:I}}=_,{payload:{body:{senderName:O,senderJid:D,text:B,type:P,receiver:F,msgid:Z,sn:ie}}}=p,oe=pd(I,F),ve=C===Rg.AES_GCM,Ae=pd(I,D),Te=(new Date).getTime();let Be=Promise.resolve({message:B});return ve&&(Be=ju.beginDecrypt({decryptedText:B,type:ts.XMPP_CHAT,zoomId:ie})),Be.then(Q=>{let{message:tt}=Q;if(P===zA.Private&&Number(oe)===y||P===zA.All){const it=Fp(tt);if(null!=it&&it.startsWith(YA.CustomizedKey)){const ft=it.substring(YA.CustomizedKey.length);return _t(ka,[{userId:Ae,userIdentity:ft}]),NT({userId:Number(Ae),customerKey:ft})}{var dt;const ft=Ae&&(null===(dt=I[Ae])||void 0===dt?void 0:dt.userGuid);_t(Qp,{senderId:Ae,senderName:O,senderGuid:ft,text:it,timestamp:Te,msgid:Z})}}return""})}),En(u=>"object"==typeof u&&void 0!==u.type)),receiveUserJidUpdateFromXMPPEpic:(i,l)=>Hd(i,24595).pipe(zn(u=>{const{payload:{body:{action:p,data:_}}}=u,y=[];if([qo.List,qo.Add,qo.update].includes(p)&&_){const{breakoutRoom:C,participants:{attendeesList:I}}=l.value,O=C?.currentRoom.status===hr.InRoom?I.concat(C.mainSessionAttendeeList):I;y.push(cR({data:_,attendees:O}))}return p===qo.Remove&&_&&y.push(nP(_)),Dn(y)})),handleCustomizedKeyBroadcastEpic:(i,l)=>i.pipe(Zr(`${KC}`),En(u=>u.payload===gw.SUCCESS&&!!l.value.meeting.customerKey),ir(()=>{const u=l.value,{meeting:{customerKey:p}}=u;WO(`${YA.CustomizedKey}${p}`,"",u)}),Gr(qt)),handleCustomizedKeyPushEpic:(i,l)=>Zn(i,Do).pipe(En(u=>{const{payload:{body:p}}=u;return!!p.add&&!!l.value.meeting.customerKey}),Ht(fl),ir(function(){var u=V(function*(p){const{payload:{body:{add:_}}}=p,y=l.value,{meeting:{userId:C,customerKey:I}}=y;for(let O=0;O<_.length;O++){const{id:D}=_[O];if(D!==C){yield qA(D,l.value);const{cmd:{jids:B},participants:{attendeesList:P}}=l.value;B[D]&&setTimeout(()=>{WO(`${YA.CustomizedKey}${I}`,B[D].jid,l.value)},Math.floor(Math.random()*Math.log10(P.length)*1e3))}}});return function(p){return u.apply(this,arguments)}}()),Gr(qt))});const vw={connectionStatus:"initial",jids:{}},m4=Fr({[`${uR}`]:()=>$t({},vw),[`${cR}`]:Et((i,l)=>{let{payload:u}=l;const{data:p,attendees:_}=u;p.forEach(y=>{const{jid:C,node:I}=y;if(!i.jids[I]||i.jids[I].jid!==C){const O=_.find(D=>D.userId===Number(I));i.jids[I]={jid:C,userGuid:O?.userGUID}}})}),[`${nP}`]:Et((i,l)=>{let{payload:u}=l;u.forEach(p=>{const{jid:_}=p,y=pd(i.jids,_);y&&delete i.jids[y]})}),[`${KC}`]:Et((i,l)=>{let{payload:u}=l;i.connectionStatus=u})},vw);var Aw;let g4=(kn((Aw=class extends mp{send(i,l){if(!i)return Promise.reject({type:Ir,reason:"Text is empty"});if("string"!=typeof i)return Promise.reject({type:Ir,reason:"Text is not a string"});if(i.length>512)return Promise.reject({type:Ir,reason:"Text exceeds the max length(512)."});const{[gr]:u}=this,p=u(),{socket:{xmppSocketStatus:_},meeting:{userId:y},cmd:{connectionStatus:C}}=p;return _!==ao.Connected?Promise.reject({type:Jd,reason:"Command channel is not ready"}):(C===gw.SUCCESS?Promise.resolve(!0):Ts(Hp,1).toPromise().then(I=>I===Y.ConnectionState.Connected||Promise.reject({type:Pn,reason:"Cannot establish the command channel"}))).then(()=>l?-1!==Ks(u()).findIndex(I=>I.userId===l)?qA(l,p).then(()=>{const{cmd:{jids:I}}=u();return I[l]?(WO(i,I[l].jid,u()),{timestamp:(new Date).getTime(),text:i,receiverId:l,senderId:y}):Promise.reject({type:Cl})}):Promise.reject({type:Ir,reason:"Cannot find the user"}):(WO(i,"",p),{timestamp:(new Date).getTime(),text:i,receiverId:0,senderId:y}))}getJids(){const{[gr]:i}=this,l=i(),{cmd:{jids:u}}=l;return u}}).prototype,"send",[jt],Object.getOwnPropertyDescriptor(Aw.prototype,"send"),Aw.prototype),Aw);const JB=Ls(_w),d0=(i,l,u,p)=>{const{getState:_,dispatch:y}=u,C=_(),{participants:{attendeesList:I},audio:{localShareAudioUserMutedList:O},share:{isReceiveSharingFromMainSession:D},breakoutRoom:B}=C,P=(D?B?.mainSessionAttendeeList:I).find(F=>F.userId==i);if(P){if(P.bShareAudioOn){const F=O.find(Z=>Z.userId===i);return F&&F.muted===!l&&y(jb(p,i,l,C)),Promise.resolve("")}return Promise.reject({type:Pn,reason:`Cannot ${l?"mute":"unmute"} share audio when the user's share audio is not enable.`})}return Promise.reject({type:Ir,reason:"Cannot find the user"})},KO=(i,l)=>{const{store:{getState:u},rwgAgent:p}=i,{share:{sharePrivilege:_}}=u();return _===l?Promise.resolve(""):Object.values(Qu).includes(l)?(p.lockSharing(l),_i(gE,y=>y.lockShare===l)):Promise.reject({type:Ir})},JA=Us([Ks],i=>i.filter(l=>l.bVideoOn)),yw=Us([JA],i=>i.filter(l=>262144==(262144&l.caps)));var zO,Ew,Df,bw,Sw,h0,YO,Cw,Iw,w_,qO,$B,XB,ZB,JO,$O,DN,XO,kN,p0,ZO,eD,ww,PN,f0,m0,eF,Tw,$A,NN,MN,tF,nF,xN,tD,T_,rF,iF,oF,sF,aF,LN,XA,cF,uF,lF,dF,hF,R_,_h,pF,BN,Rw,bi,Ow,Jt;const kf=zm("Audio"),rl=zm("Video"),Pf=zm("Sharing");let fF=(zO=Er("audio"),Ew=Er("audio"),Df=Er("audio"),bw=Er("audio"),Sw=Er("audio"),h0=zm("Audio",[1,2,3]),YO=Er("audio"),Cw=zm("Audio",[1,2]),Iw=Er("audio"),w_=Er("audio"),qO=Er("audio"),$B=Er("audio"),XB=Er("share"),ZB=Er("audio"),JO=Er("share"),$O=Er("audio"),DN=Er("audio"),XO=Er("video"),kN=Er("video"),p0=Er("video"),ZO=Er("video"),eD=Er("video"),ww=Er("video"),PN=Er("video"),f0=Er("video"),m0=Er("video"),eF=Er("video"),Tw=Er("video"),$A=Er("video"),NN=Er("video"),MN=Er("video"),tF=Er("video"),nF=Er("video"),xN=Er("video"),tD=Er("video"),T_=Er("video"),rF=Er("video"),iF=Er("video"),oF=Er("share"),sF=Er("share"),aF=Er("share"),LN=Er("share"),XA=Er("share"),cF=Er("share"),uF=Er("share"),lF=Er("share"),dF=KB("isShareOptionLocked"),hF=KB("isShareOptionLocked"),R_=Er("share"),_h=Er("share"),pF=Er("share"),BN=Er("share"),Rw=Er("share"),bi=Er("share"),Ow=Er("share"),Jt=class extends mp{constructor(i){super(i),this[Ki].dispatch(vl()),this[Nn]={store:i,mediaAgent:$R(iI(Mi.getInstance())),rwgAgent:mo.createAgent()}}startAudio(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y,mediaAgent:C}=l,I=p(),{speakerOnly:O,autoStartAudioInSafari:D}=u||{},B=Kr(I);if("computer"===B?.audio)return Promise.resolve();if("phone"===B?.audio)return Promise.reject({type:Pn,reason:"joined by phone"});{const{audio:{isAllowToTalk:P,isComputerAudioLoading:F,canPlayAudio:Z,isSpeakerOnly:ie},media:{audioDecodeStatus:oe,audioEncodeStatus:ve}}=I;if(F)return Promise.reject({type:Pn,reason:"Computer audio has been loading, please wait."});if(ie!==!!O&&_(M2(!!O)),!B)return Promise.reject({type:Pn,reason:"Please call `startAudio` method after the `join` has been resolved"});{const{userRole:Ae}=B,Te=Na(Ae),Be=Te&&!P||O||zg()?"success":ve,Q=zg()?"success":oe;if(Hb()&&("success"!==Q||"success"!==Be))return Promise.reject({type:Pn,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});_(jg(!0)),qu("audio",Be,Q).subscribe(tt=>{let[dt,it]=tt;if(dt&&it){let ft=Z||(Hb()||aE())&&!D?Promise.resolve():function(){const Kt=URL.createObjectURL(LL),en=new Audio(Kt);return en.muted=!1,aE()?new Promise((zt,Ot)=>{var _n;en.addEventListener("canplaythrough",()=>{en.play().then(()=>{zt(!0)}).catch(Gn=>{Ot(Gn)}).finally(()=>{URL.revokeObjectURL(Kt)})}),null===(_n=en.load)||void 0===_n||_n.call(en)}):Promise.race([en.play(),new Promise((zt,Ot)=>{window.setTimeout(()=>{Ot()},3e3)})]).finally(()=>{URL.revokeObjectURL(Kt)})}();void 0===ft&&(ft=Promise.resolve()),ft.then(()=>{const Kt=p(),{audio:{isSharingAudio:en}}=Kt;y.joinOrLeaveVoip(!0),en||xa(C,Kt,!(Te&&!P||O)),Te&&P&&_(UT(!0)),_(Fv(!0))}).catch(()=>{_(Fv(!1)),_(jg(!1))})}else _(jg(!1))})}return"failed"===ve||"failed"===oe?(_(jg(!1)),Promise.reject({type:Cl,reason:"audio encode or decode error"})):new Promise((Ae,Te)=>{Zl(Ts(tc.JoinComputerAudio.success,1),bs(...tc.JoinComputerAudio.fail.map(Be=>Ts(Be,1).pipe(zn(()=>Qi({type:_a,reason:Be}))))),_c(45e3).pipe(zn(()=>Qi({type:hC})))).subscribe(()=>{_(jg(!1)),Ae("")},Be=>{(Be.type===_a||p().audio.canPlayAudio)&&y.joinOrLeaveVoip(!1),_(jg(!1)),Te(Be)})})}})(this[Nn],i)}stopAudio(){return function(){var i=V(function*(l){const{store:{getState:u,dispatch:p},mediaAgent:_,rwgAgent:y}=l,C=u(),{audio:{isComputerAudioLoading:I,isShareAudioEnabled:O,isSharingAudio:D}}=C,B=Kr(C);if(I)return Promise.reject({type:Pn,reason:"Computer audio has not finished joining, please wait."});if(O){if(D)return Promise.reject({type:Pn,reason:"Cannot stop audio during sharing with audio"});p(ym(void 0)),p(rf(void 0))}return"computer"===B?.audio?(yield _.leaveComputerAudio(),y.joinOrLeaveVoip(!1),p(FT(0)),_i(Mg)):Promise.resolve("")});return function(l){return i.apply(this,arguments)}}()(this[Nn])}muteAudio(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,C=p(),I=Kr(C);if(null==u||u===I?.userId)return""===I?.audio||null===I?.audio?Promise.reject({type:Pn,reason:"no audio joined"}):!0===I?.muted?Promise.resolve(""):(C.audio.isShareAudioEnabled&&_(rf(!0)),_(Yh(!0)),y.mute(I.userId,!0),_i(eC).then(()=>""));if(Wu(C)){const{participants:{allowTalkAttendeesList:O,attendeesList:D}}=C,B=O.concat(D).find(P=>P.userId===u);return B?""===B.audio||null===B?Promise.reject({type:Pn,reason:"no audio joined"}):!1===B.muted?(y.mute(u,!0),_i(E2,P=>P.id===u&&1==P.muted)):Promise.resolve(""):Promise.reject({type:Ir,reason:"no matching user"})}return Promise.reject({type:_a})})(this[Nn],i)}unmuteAudio(i){return(l=V(function*(u,p){const{store:{getState:_,dispatch:y},rwgAgent:C,mediaAgent:I}=u,O=_(),D=Kr(O);if(void 0===p||p===D?.userId){if(""===D?.audio||null===D?.audio)return Promise.reject({type:Pn,reason:"no audio joined"});if(!1===D?.muted)return Promise.resolve("");if(O.audio.isShareAudioEnabled){if(O.audio.isSharingAudio)return Promise.reject({type:Pn,reason:"Cannot unmute audio during sharing with audio"});y(rf(!1))}if(y(Yh(!0)),O.audio.bCanUnmute||null!=D&&D.isHost||null!=D&&D.bCoHost){if(Na(D.userRole)){const{audio:{isAllowToTalk:B,isAllowToTalkAttendeeConnected:P}}=O;B?P||(yield I.leaveComputerAudio(),yield xa(I,O,!0),y(UT(!0))):Promise.reject({type:Pn,reason:"Webinar attendee cannot unmute self audio."})}return C.mute(D.userId,!1),_i(y2).then(()=>"")}return Promise.reject({type:_a,reason:"host not allow unmute themselves"})}if(Wu(O)){const{participants:{allowTalkAttendeesList:B,attendeesList:P}}=O,F=B.concat(P).find(Z=>Z.userId===p);return F?""===F.audio||null===F?Promise.reject({type:Pn,reason:"no audio joined"}):(!0===F.muted&&C.mute(p,!1),Promise.resolve("")):Promise.reject({type:Ir,reason:"no matching user"})}return Promise.reject({type:_a})}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}dialOut(i,l,u,p){return((_,y,C,I,O)=>{const{store:{getState:D,dispatch:B},rwgAgent:P}=_,F=D(),{meeting:{callOutCountry:Z,isSupportCallOut:ie}}=F;if(ie&&Array.isArray(Z)&&Z.findIndex(oe=>oe.code===y)>-1){const{seq:oe}=P.audioDialout(y+C,I,!(null==O||!O.callMe),!(null==O||!O.pressingOne),!(null==O||!O.greeting));return B(D2(oe)),Pv(tc.JoinAudioByCallMe)}return Promise.reject({type:Ir,reason:"no matching country code"})})(this[Nn],i,l,u,p)}cancelDialOut(i,l,u){return((p,_,y,C)=>{const{rwgAgent:I}=p;return I.audioCancelDialout(_+y,!(null==C||!C.callMe)),Pv(tc.cancelDialOut)})(this[Nn],i,l,u)}hangup(){return(i=>{const{store:{getState:l},rwgAgent:u}=i,p=l(),_=Kr(p);return"phone"===_?.audio&&null!==_.userId?(u.audioDrop(_.userId),Pv(tc.hangup)):Promise.reject({type:Pn,reason:"not joined audio by phone"})})(this[Nn])}switchMicrophone(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,{audio:{microphoneDevicesList:C,activeMicrophone:I}}=p();return"default"!==u&&-1==C.findIndex(O=>O.deviceId===u)?Promise.reject({type:oC}):(u!==I&&(y.changeMicrophone(u),_(k2(u))),Promise.resolve(""))})(this[Nn],i)}switchSpeaker(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,{audio:{speakerDevicesList:C,activeSpeaker:I}}=p();return"default"!==u&&-1==C.findIndex(O=>O.deviceId===u)?Promise.reject({type:oC}):(u!==I&&(y.changeSpeaker(u),_(P2(u))),Promise.resolve(""))})(this[Nn],i)}muteShareAudio(i){return((l,u)=>{const{mediaAgent:p,rwgAgent:_,store:{getState:y,dispatch:C}}=l,I=y(),{meeting:{userId:O}}=I;if(u&&u!==O)return d0(u,!0,l.store,p);{const{audio:{isSharingAudio:B,isShareAudioEnabled:P,isShareAudioMuted:F}}=I;if(!P)return Promise.reject({type:Pn,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(F)return Promise.resolve("");{_.muteShareAudio(!0);let Z=Promise.resolve();var D;return B&&(Z=null===(D=p.leaveSharingAudio(!0))||void 0===D?void 0:D.then(()=>Qb(p,_,I).then(ie=>{ie.forEach(oe=>C(oe))}))),jb(p,O,!0,I),Promise.all([_i({event:Bc,operations:[En(ie=>void 0!==ie.bShareAudioOn),is(1)]},ie=>!1===ie.bShareAudioOn),Z]).then(()=>(C($i(!0)),B&&(C(Uv(!1)),_t(gm,{state:"off"})),""))}}})(this[Nn],i)}unmuteShareAudio(i){return((l,u)=>{const{mediaAgent:p,rwgAgent:_,store:{getState:y,dispatch:C}}=l,I=y(),{meeting:{userId:O}}=I;if(u&&u!==O)return d0(u,!1,l.store,p);{const{audio:{isSharingAudio:D,isShareAudioEnabled:B,isShareAudioMuted:P},share:{status:F}}=I;if(!B)return Promise.reject({type:Pn,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===P)return Promise.resolve("");{_.muteShareAudio(!1);let Z=Promise.resolve();return!1===D&&F===Y.ShareStatus.Sharing&&(Z=uO(p,_,I).then(ie=>{ie.forEach(oe=>C(oe))})),jb(p,O,!1,I),Promise.all([_i({event:Bc,operations:[En(ie=>void 0!==ie.bShareAudioOn),is(1)]},ie=>!0===ie.bShareAudioOn),Z]).then(()=>(C($i(!1)),!1===D&&F===Y.ShareStatus.Sharing&&(C(Uv(!0)),_t(gm,{state:"on"})),""))}}})(this[Nn],i)}subscribeAudioStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{getState:y}}=u,C=y(),{media:{audioDecodeStatus:I,audioEncodeStatus:O},audio:{isAllowToTalk:D}}=y(),B=Kr(C),P=!p||p.decode,F=!p||p.encode;if(!B)return Promise.reject({type:Pn,reason:"Call this function after the 'join' method resolved."});{const{userRole:Z}=B,ie=Na(Z)&&!D||zg()?"success":O,oe=zg()?"success":I;qu("audio",ie,oe).subscribe(ve=>{let[Ae,Te]=ve;Ae&&Te&&(P&&_.subscribeToQos([Qs.AudioDecode],kg),F&&_.subscribeToQos([Qs.AudioEncode],kg))})}return""}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}unsubscribeAudioStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{dispatch:y}}=u,I=!p||p.encode;return(!p||p.decode)&&(_.unsubscribeFromQos([Qs.AudioDecode]),y(IC(zp))),I&&(_.unsubscribeFromQos([Qs.AudioEncode]),y(GE(zp))),null}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}getMicList(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?[...u.audio.microphoneDevicesList]:[]})(this[Nn])}getSpeakerList(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?[...u.audio.speakerDevicesList]:[]})(this[Nn])}getAudioState(i){return((l,u)=>{let{store:{getState:p}}=l;const _=p(),{meeting:{isWebinar:y}}=_;let C=null;return null==u?C=Kr(_):(C=_.participants.attendeesList.find(I=>I.userId===u),y&&!C&&(C=_.participants.xmppAttendeeList.find(I=>I.userId===u))),C?C.audio:null})(this[Nn],i)}isAudioMuted(i){return((l,u)=>{let{store:{getState:p}}=l;const _=p(),{meeting:{isWebinar:y}}=_;let C=null;return void 0===u?C=Kr(_):(C=_.participants.attendeesList.find(I=>I.userId===u),y&&!C&&(C=_.participants.xmppAttendeeList.find(I=>I.userId===u))),!!C&&!!C.muted})(this[Nn],i)}getActiveMicrophone(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?u.audio.activeMicrophone:null})(this[Nn])}getActiveSpeaker(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?u.audio.activeSpeaker:null})(this[Nn])}isSupportCallOut(){return(i=>{let{store:{getState:l}}=i;const{meeting:{isSupportCallOut:u,callOutCountry:p}}=l();return u&&Array.isArray(p)&&p?.length>0})(this[Nn])}getDialOutStatus(){return(i=>{let{store:{getState:l}}=i;const{audio:u}=l();return u?.dialout.returnCode})(this[Nn])}getDialOutCountries(){return(i=>{let{store:{getState:l}}=i;const{meeting:{callOutCountry:u}}=l();return Array.isArray(u)?u:[]})(this[Nn])}getShareAudioStatus(){return(i=>{let{store:{getState:l}}=i;const{audio:{isShareAudioEnabled:u,isShareAudioMuted:p,isSharingAudio:_}}=l();return{isShareAudioEnabled:u,isShareAudioMuted:p,isSharingAudio:_}})(this[Nn])}isOthersShareAudioMutedLocally(i){return((l,u)=>{var p;let{store:{getState:_}}=l;const{audio:{localShareAudioUserMutedList:y}}=_();return null===(p=y.find(C=>C.userId===u))||void 0===p?void 0:p.muted})(this[Nn],i)}getAudioStatisticData(){return(i=>{let{store:{getState:l}}=i;const{audio:{statistic:u}}=l();return $t({},u)})(this[Nn])}startVideo(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,C=p(),{media:{videoDecodeStatus:I,videoEncodeStatus:O,enforceVirtualBackground:D},video:{isCaptureCameraLoading:B,isCurrentUserStartedVideo:P,isVideoMuted:F}}=C;return P?Promise.reject({type:Pn,reason:"Video is started"}):B?Promise.reject({type:Pn,reason:"Camera is starting,please wait."}):F&&!Wu(C)?Promise.reject({type:Pn,reason:"Video is muted by the host"}):!kO(D)||null!=u&&u.videoElement?!mR(D)&&null!=u&&u.virtualBackground?Promise.reject({type:Ir,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(_(MC(!0)),qu("video",O,I).subscribe(Z=>{let[ie]=Z;if(ie){const oe=p(),{video:{activeCamera:ve,isSupportHDVideo:Ae,virtualBackground:{isVBConfigured:Te,isVBPreloadReady:Be,imageSrc:Q}}}=oe,{cameraId:tt=ve,captureWidth:dt=0,captureHeight:it=0,mirrored:ft,hd:Kt,virtualBackground:en}=u||{};if(ft&&y.mirrorVideo(ft),Kt&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://marketplace.zoom.us/docs/sdk/overview/720p for more details"),Ae&&Mi.isCompatibleHardwareForEncode()?Mi.isSupportVideoEncodeHardwareAcceleration().then(zt=>{zt?(y.enableHardwareAccelerationForVideoEncode(!0),_(Qv({encode:zt}))):console.warn("Cannot capture HD video due to hardware limitation")}):console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation")),en||void 0===en&&Q){const zt=en||{imageUrl:void 0,cropped:void 0};RO(Be).subscribe(Ot=>{if(Ot){let _n;_n=!Te&&zt.imageUrl&&"blur"!==zt.imageUrl?iw($t($t({},zt),{},{captureWidth:dt,captureHeight:it,cameraId:tt}),y,oe).then(Gn=>Ts(Xp,1).toPromise().then(Dt=>{var at;return y.stopVirtualBackgroundSetting(),Dt?(null==Gn||null===(at=Gn.parentNode)||void 0===at||at.removeChild(Gn),!0):Promise.reject("vb setting error")})):zt.imageUrl!==Q?vN(zt.imageUrl,zt.cropped,y):Promise.resolve(),_n.then(()=>{sw(y,oe,u).forEach(Gn=>{_(Gn)}),_(qE({imageSrc:zt.imageUrl,cropped:zt.cropped}))}).catch(()=>{_t(SE,{reason:"Cannot access the virtual background image."})})}else _t(SE,{reason:"Cannot load virtual background model."})})}else sw(y,oe,u).forEach(zt=>{_(zt)})}else _(MC(!1))}),Pv(VL.startCaptureVideo).then(()=>{_(zT(!1)),_(bm(!1))}).finally(()=>{_(MC(!1))})):Promise.reject({type:Ir,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[Nn],i)}stopVideo(){return(i=>{const{store:{getState:l},mediaAgent:u}=i,{video:{isCaptureCameraLoading:p,isCurrentUserStartedVideo:_}}=l();return p?Promise.reject({type:Pn,reason:"Camera is starting,please wait."}):_?(u.stopCaptureVideo(),_i(Ng,y=>!0!==y?.failed)):Promise.reject({type:Pn,reason:"camera is closed"})})(this[Nn])}switchCamera(i){return((l,u)=>{const{store:{getState:p},mediaAgent:_}=l,y=p(),{video:{cameraDevicesList:C,isCurrentUserStartedVideo:I,virtualBackground:O}}=y;return AN(u,C)?((I||null!=O&&O.isVBConfigured)&&_.changeCamera(u),Promise.resolve()):Promise.reject({type:Ir,reason:"Cannot find cameraDeviceId in camera devices list."})})(this[Nn],i)}renderVideo(i,l,u,p,_,y,C,I,O){return((D,B,P,F,Z,ie,oe,ve,Ae,Te)=>{const{store:{getState:Be,dispatch:Q},mediaAgent:tt,rwgAgent:dt}=D,it=Be(),{meeting:{userId:ft},media:{enforceMultipleVideos:Kt},video:{subscribedVideoList:en,renderedVideoList:zt}}=it;if(!B)return Promise.reject({type:Ir,reason:"Received canvas is falsy"});const Ot=uE(!!Kt);if(!en.includes(P)&&en.length>=Ot&&new Set(zt.map(Dt=>Dt.canvasId)).has(B.id))return Promise.reject({type:Pn,reason:`subscribe video counts greater than maximum size (${Ot})`});if(-1===JA(it).findIndex(Dt=>Dt.userId===P))return Promise.reject({type:Ir,reason:"user is not send video"});const _n=!!Te,{media:{videoDecodeStatus:Gn}}=it;return B.id||(B.id="__ZOOM_SDK_VIDEO_CANVAS_@__".replace("@",`${Math.floor(1e4*Math.random())}`)),qu("video","success",Gn).subscribe(Dt=>{let[at]=Dt;if(at){const{video:{isVerifiedVideoRenderCanvasAfterFailover:Ve,maximumNumbeOfHDSubscriptions:nt,isSupportHDVideo:Tt,renderedVideoList:ht,receivedVideoMaxQuality:qe}}=Be();let Yt=B;!1===Ve&&(Yt=jc(B),Q(xC(!0)));const Tn=P===ft,Yn=Ae||Kp;let wt=ve;if(ve===Y.VideoQuality.Video_720P)if(Tt){const no=ht.filter($o=>$o.videoQuality===Y.VideoQuality.Video_720P).map($o=>$o.userId);no.length>=(nt??1)&&(no.includes(P)||Tn||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),wt=Y.VideoQuality.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),wt=Y.VideoQuality.Video_360P;ht.some(no=>no.userId===P&&no.key===Yn&&no.canvasId===Yt.id)||tt.renderVideo(Yt.id,P,Yn,F,Z,ie,oe,wt,Tn,Te||"",_n);const Sa=Math.max(qe,Y.VideoQuality.Video_360P),Wn=Math.min(wt,Sa);P!==ft&&dt.subscribeVideo(P,Wn,!1),en.includes(P)||Q(Zh(P)),Q(Qg({userId:P,key:Yn,canvasId:Yt.id,videoQuality:wt}))}}),"failed"===Gn?Promise.reject({type:Cl,reason:"Video  decode status is failed"}):Promise.resolve("")})(this[Nn],i,l,u,p,_,y,C,I,O)}stopRenderVideo(i,l,u,p){return function(y,C,I,O,D){let B=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{store:{getState:P,dispatch:F},mediaAgent:Z,rwgAgent:ie}=y,oe=P(),{video:{subscribedVideoList:ve,renderedVideoList:Ae},meeting:{userId:Te}}=oe;if(!C||!C.id)return Promise.reject({type:Ir,reason:"canvas is falsy"});if(ve.includes(I)){const Be=O||Kp;Ae.find(Q=>Q.userId===I&&Q.key===Be)&&(Z.stopRenderVideo(C.id,I,Be,nw(D),B),1==Ae.filter(Q=>Q.userId===I).length&&(I!==Te&&ie.unsubscribeVideo(I),F(qT(I))),F(H2({userId:I,key:Be,canvasId:C.id})))}return Promise.resolve("")}(this[Nn],i,l,u,p,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}updateVideoCanvasDimension(i,l,u){return((p,_,y,C)=>{const{mediaAgent:I}=p;return _&&_.id?(I.updateRenderedVideoCanvasDimension(_.id,y,C),Promise.resolve("")):Promise.reject({type:Ir,reason:"canvas is falsy"})})(this[Nn],i,l,u)}adjustRenderedVideoPosition(i,l,u,p,_,y,C){return((I,O,D,B,P,F,Z,ie)=>{const{store:{getState:oe},mediaAgent:ve}=I;if(!O||!O.id)return Promise.reject({type:Ir,reason:"canvas is falsy"});const{video:{subscribedVideoList:Ae}}=oe();return Ae.includes(D)?(ve.adjustRenderedVideoPosition(O.id,D,ie||Kp,F,Z,B,P,nw("#000")),Promise.resolve("")):Promise.reject({type:Ir,reason:"userId is not correct"})})(this[Nn],i,l,u,p,_,y,C)}clearVideoCanvas(i,l){return((u,p,_)=>{const{mediaAgent:y}=u;return p&&p.id?(y.clearVideoCanvas(p.id,nw(_)),Promise.resolve("")):Promise.reject({type:Ir,reason:"canvas is falsy"})})(this[Nn],i,l)}mirrorVideo(i){return((l,u)=>{const{store:{getState:p},mediaAgent:_}=l,{video:{isCurrentUserStartedVideo:y,virtualBackground:C}}=p();return(y||null!=C&&C.isVBConfigured)&&_.mirrorVideo(u),Promise.resolve("")})(this[Nn],i)}enableHardwareAcceleration(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,{video:{isSupportHDVideo:C}}=p();if("boolean"==typeof u||void 0!==u.decode){const I="boolean"==typeof u?u:!!u.decode;return I?Mi.isSupportVideoDecodeHardwareAcceleration().then(O=>(O&&y.enableHardwareAccelerationForVideoDecode(O),_(Qv({decode:O})),O)):(y.enableHardwareAccelerationForVideoDecode(I),_(Qv({decode:I})),Promise.resolve(!0))}if("boolean"==typeof u||void 0!==u.encode){const I="boolean"==typeof u?u:!!u.encode;if(C){if(!I)return y.enableHardwareAccelerationForVideoEncode(!1),_(Qv({encode:!1})),Promise.resolve(!0);if(Mi.isCompatibleHardwareForEncode())return Mi.isSupportVideoEncodeHardwareAcceleration().then(O=>(O&&y.enableHardwareAccelerationForVideoEncode(O),_(Qv({encode:O})),O));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof u&&null!=u&&u.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[Nn],i)}subscribeVideoStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{getState:y}}=u,{media:{videoDecodeStatus:C,videoEncodeStatus:I}}=y(),O=!p||p.decode,D=!p||p.encode;return qu("video",I,C).subscribe(B=>{let[P,F]=B;O&&F&&_.subscribeToQos([Qs.VideoDecode],kg),D&&P&&_.subscribeToQos([Qs.VideoEncode],kg),null!=p&&p.detailed&&F&&_.enableVideoObserver(!0)}),null}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}unsubscribeVideoStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{dispatch:y}}=u,I=!p||p.encode;return(!p||p.decode)&&(_.unsubscribeFromQos([Qs.VideoDecode]),y(JE(pm))),I&&(_.unsubscribeFromQos([Qs.VideoEncode]),y(uf(pm))),null!=p&&p.detailed&&_.enableVideoObserver(!1),null}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}previewVirtualBackground(i,l,u){return((p,_,y,C)=>{const{store:{getState:I,dispatch:O},mediaAgent:D}=p,B=I(),{video:{activeCamera:P,virtualBackground:{isVBPreloadReady:F},isCurrentUserStartedVideo:Z}}=B;let ie;return new Promise((oe,ve)=>{RO(F).subscribe(Ae=>{Ae?iw({imageUrl:y,cropped:C,captureWidth:0,captureHeight:0,cameraId:P},D,B,_).then(Te=>{ie=Te,oe(!0)}).catch(Te=>{ve(Te)}):ve()})}).then(()=>{(Z?Promise.resolve(!0).then(()=>(O(pu(!0)),!0)):Ts(Xp,1).toPromise()).then(oe=>{var ve,Ae;return null===(ve=ie)||void 0===ve||null===(Ae=ve.parentNode)||void 0===Ae||Ae.removeChild(ie),oe?(O(qE({imageSrc:y,cropped:C})),!0):Promise.reject({type:Pn,reason:"Cannot preview virtual background"})})}).catch(()=>Promise.reject({type:Ir,reason:"Cannot load the image"}))})(this[Nn],i,l,u)}updateVirtualBackgroundImage(i,l){return((u,p,_)=>{const{store:{getState:y,dispatch:C},mediaAgent:I}=u,O=y(),{video:{virtualBackground:{isVBConfigured:D,imageSrc:B,cropped:P},customizedVideoOption:F,activeCamera:Z}}=O;return p===B&&_===P?Promise.resolve(!0):D||"blur"===p||!p?vN(p,_,I).then(()=>(C(qE({imageSrc:p,cropped:_})),!0)).catch(()=>Promise.reject({type:Ir,reason:"Cannot load the image"})):iw({imageUrl:p,cropped:_,captureWidth:F?.captureWidth||0,captureHeight:F?.captureHeight||0,cameraId:Z},I,O).then(ie=>{const{video:{isCurrentUserStartedVideo:oe}}=O;return(oe?Promise.resolve(!0).then(()=>(C(pu(!0)),!0)):Ts(Xp,1).toPromise()).then(ve=>{var Ae;return I.stopVirtualBackgroundSetting(),ve?(null==ie||null===(Ae=ie.parentNode)||void 0===Ae||Ae.removeChild(ie),!0):Promise.reject("vb setting error")}).then(()=>(C(qE({imageSrc:p,cropped:_})),"")).catch(()=>Promise.reject({type:Ir,reason:"Cannot load the image"}))})})(this[Nn],i,l)}stopPreviewVirtualBackground(){return(i=>{const{store:{getState:l},mediaAgent:u}=i,{video:{virtualBackground:{isVBConfigured:p}}}=l();return p?(u.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:Pn,reason:"Cannot stop preview virtual background before start"})})(this[Nn])}requestFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p},rwgAgent:_}=l,y=p(),{meeting:{userId:C},video:{farEndCameraControlStatus:{controlledUserList:I}}}=y;return C===u?Promise.reject({type:Pn,reason:'Using "stream.controlCamera" method to control self camera'}):-1!==yw(y).findIndex(O=>O.userId===u)?(I.includes(u)||_.sendFarEndCameraControl(ec.Request,u),Promise.resolve("")):Promise.reject({type:Ir,reason:"Cannot request control camera with video off"})})(this[Nn],i)}approveFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,{video:{currentCameraControlStatus:{isRequested:C,isInControl:I,controllingUserId:O},ptz:D,activeCamera:B}}=p();if(C){if(I&&(!O||u===O))return Promise.resolve("");y.sendFarEndCameraControl(ec.Approve,u);const P=D?.[B];return void 0!==P&&y.sendCameraAblity({pan:!!P.pan,tilt:!!P.tilt,zoom:!!P.zoom}),_(Hv(!1)),_(Yu({isInControl:!0,userId:u})),_t(mm,{isControlled:!0,userId:u}),Promise.resolve("")}return Promise.reject({type:Pn,reason:"Cannot approve before request"})})(this[Nn],i)}declineFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,{video:{currentCameraControlStatus:{isInControl:C,isRequested:I}}}=p();return I||C?(y.sendFarEndCameraControl(ec.Decline,u),_(Hv(!1)),_(Yu({isInControl:!1,userId:0})),_t(mm,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:Pn,reason:"Cannot decline before request"})})(this[Nn],i)}giveUpFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,{video:{farEndCameraControlStatus:{controlledUserList:C}}}=p();return C.includes(u)?(y.sendFarEndCameraControl(ec.GiveUp,u),_(nh(u)),Promise.resolve("")):Promise.reject({type:Pn,reason:"Cannot give up control befire aquired"})})(this[Nn],i)}controlCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,{video:{isCurrentUserStartedVideo:C,ptz:I,activeCamera:O}}=p();if(C){const{cmd:D,range:B,reset:P}=u,F=I[O];if(F){const Z=cw(F)||{},{key:ie,range:oe}=DO(D,B);if(F[ie])return Object.assign(Z,{[ie]:P?0:aw(F[ie].capability,F[ie].value,oe)}),y.movePTZCamera(Z).then(()=>{_(XT({constraints:Z,deviceId:O}))}).catch(ve=>Promise.reject({type:Pn,reason:ve}))}return Promise.resolve("")}return Promise.reject({type:Pn,reason:"Cannot control the camera before it's started"})})(this[Nn],i)}controlFarEndCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,C=p(),{video:{farEndCameraControlStatus:{controlledUserList:I,isControlling:O}}}=C,{userId:D,cmd:B,range:P}=u;if(O)return Promise.reject({type:Pn,reason:"Cannot send new command while the previous control is not done"});if(I.includes(D)){if(B===Yp.SwitchCamera)return y.sendFarEndCameraControl(ec.SwitchCamera,D,Yp.SwitchCamera),Promise.resolve("");{const Z=yw(C).find(ie=>ie.userId===D);if(null==Z||!Z.nFECC)return Promise.reject({type:Pn,reason:"The far end camera does not support PTZ"});if(P&&P>0){const ie=P/100*1e4;return y.sendFarEndCameraControl(ec.StartControl,D,B),_(lf(!0)),fg(200).pipe((F=_c(ie-100),function(oe){return oe.lift(new Hy(F))})).subscribe(()=>{y.sendFarEndCameraControl(ec.ContinueControl,D,B)}),_c(ie).pipe(ir(()=>{y.sendFarEndCameraControl(ec.StopControl,D,B),_(lf(!1))})).toPromise().then(()=>"")}return Promise.reject({type:Ir,reason:"Range cannot be negative or 0"})}}return Promise.reject({type:Pn,reason:"Cannot control before request granted"});var F})(this[Nn],i)}isCapturingVideo(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCurrentUserStartedVideo})(this[Nn])}isCameraTaken(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCameraTaken})(this[Nn])}isCaptureForbidden(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCaptureForbidden})(this[Nn])}getCameraList(){return(i=>{const{store:{getState:l}}=i,u=l();if(!u.video)return[];const{video:{cameraDevicesList:p}}=u;return p.map(_=>Object.assign({},_))})(this[Nn])}getActiveCamera(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.activeCamera:""})(this[Nn])}getActiveVideoId(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.activeVideoId:0})(this[Nn])}getVideoMaxQuality(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.receivedVideoMaxQuality:Y.VideoQuality.Video_90P})(this[Nn])}getReceivedVideoDimension(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.receivedVideoDimension:null})(this[Nn])}isSupportMultipleVideos(){return Vp()}isSupportHDVideo(){return(i=>{var l;const{store:{getState:u}}=i;return null===(l=u().video)||void 0===l?void 0:l.isSupportHDVideo})(this[Nn])}getHardwareAccelerationStatus(){return(i=>{var l;const{store:{getState:u}}=i;return null===(l=u().video)||void 0===l?void 0:l.hardwareAcceleration})(this[Nn])}getVideoStatisticData(){return(i=>{let{store:{getState:l}}=i;const{video:{statistic:u}}=l();return $t({},u)})(this[Nn])}isSupportVirtualBackground(){return(i=>{const{store:{getState:l}}=i;return mR(l().media.enforceVirtualBackground)})(this[Nn])}getVirtualbackgroundStatus(){return(i=>{const{store:{getState:l}}=i;return $t({},l().video.virtualBackground)})(this[Nn])}isRenderSelfViewWithVideoElement(){return kO(this[Ki].getState().media.enforceVirtualBackground)}getNetworkQuality(i){return((l,u)=>{var p;const{store:{getState:_}}=l,y=_(),{video:C,meeting:{userId:I}}=y,D=null==C||null===(p=C.networkQuality)||void 0===p?void 0:p[`${u??I}`];if(D){const B={};return D.uplink&&Object.assign(B,{uplink:D.uplink.level}),D.downlink&&Object.assign(B,{downlink:D.downlink.level}),B}return null})(this[Nn],i)}getFarEndCameraPTZCapability(i){return((l,u)=>{const{store:{getState:p}}=l,_=yw(p()).find(y=>y.userId===u);return void 0!==_?.nFECC?yN(_?.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[Nn],i)}getCameraPTZCapability(i){return((l,u)=>{const{store:{getState:p}}=l,{video:{ptz:_,activeCamera:y}}=p(),C=_[u??y];return{pan:!(null==C||!C.pan),tilt:!(null==C||!C.tilt),zoom:!(null==C||!C.zoom)}})(this[Nn],i)}isBrowserSupportPTZ(){const{pan:i,tilt:l,zoom:u}=Mi.getPTZCapability();return i||l||u}startShareView(i,l,u){return((p,_,y,C)=>{const{store:{getState:I,dispatch:O},mediaAgent:D,rwgAgent:B}=p,{share:{isReceiveSharing:P,isRemoteSharingActive:F,activeNodeId:Z,activeSsrc:ie,status:oe,isVerifiedRenderCanvasAfterFailover:ve,isReceiveSharingFromMainSession:Ae},media:{sharingDecodeStatus:Te}}=I();if(!_||y!==Z)return Promise.reject({type:Ir,reason:""});if(!F||P||oe!==Y.ShareStatus.End)return Promise.reject({type:Pn,reason:""});const Be=!!C;return qu("sharing","success",Te).subscribe(Q=>{let[,tt]=Q;if(tt){let dt=_;!1===ve&&(dt=jc(_),O(OC(!0))),O(TC(!0)),qg(B,I(),y),D.renderSharing(ie,dt,Be,C,Ae);const{audio:it}=I();if(null!=it&&it.localShareAudioUserMutedList){const ft=it.localShareAudioUserMutedList.find(Kt=>Kt.userId===y);ft&&D.setSharingAudioVolume(y,ft.muted,ft.isFromMainSession)}}}),"failed"===Te?Promise.reject({type:Cl,reason:""}):_i(na,Q=>!!Q,6e4)})(this[Nn],i,l,u)}stopShareView(){return(i=>{const{store:{dispatch:l,getState:u},rwgAgent:p,mediaAgent:_}=i,{share:{isReceiveSharing:y,activeNodeId:C},breakoutRoom:I}=u();if(!y)return Promise.resolve("");let O=!1;return I?.currentRoom.status===hr.InRoom&&I.mainSessionAttendeeList.length>0&&(O=I.mainSessionAttendeeList.findIndex(D=>D.userId===C)>-1),_.stopRenderSharing(),p.unsubscribeSharing(C,O),l(TC(!1)),Promise.resolve("")})(this[Nn])}switchShareView(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y,mediaAgent:C}=l,I=p(),{share:{isReceiveSharing:O,activeNodeId:D,isRemoteControlApproved:B,isGrabRemoteControl:P,isReceiveSharingFromMainSession:F},audio:Z,breakoutRoom:ie}=I;if(!O)return Promise.reject({type:Pn});if(u===D)return Promise.resolve("");let oe=[];return oe=F?ie.mainSessionAttendeeList.filter(ve=>ve.bShareToBORooms&&ve.sharerOn):Yv(I),oe.findIndex(ve=>ve.userId===D)>-1?(B&&(P&&y.subscribeGrabRemoteControl(D,!1),y.sharingRequestRemoteControl(D,!1)),y.unsubscribeSharing(D,F),qg(y,p(),u),C.switchSharingSource(u,F),Z?.localShareAudioUserMutedList.forEach(ve=>{C.setSharingAudioVolume(u,ve.userId!==u||ve.muted,ve.isFromMainSession)}),_(zu({bStatus:1,activeNodeID:u,ssrc:u})),Promise.resolve("")):Promise.reject({type:Ir,reason:"no matching user id"})})(this[Nn],i)}updateSharingCanvasDimension(i,l){return((u,p,_)=>{const{store:{getState:y},mediaAgent:C}=u,I=y(),{share:{isReceiveSharing:O}}=I;return O&&C.updateRenderedSharingDimension(p,_),Promise.resolve("")})(this[Nn],i,l)}startShareScreen(i,l){return((u,p,_)=>{var y;const{store:{getState:C,dispatch:I},mediaAgent:O}=u,D=C(),{meeting:{bIbDisableShare:B,meetingOptions:P},share:{sharePrivilege:F,ssrc:Z,isChromeExtensionInstalled:ie,isVerifiedCaptureCanvasAfterFailover:oe,isReceiveSharingFromMainSession:ve},media:{sharingEncodeStatus:Ae},breakoutRoom:Te}=D;if(B)return Promise.reject({type:Pn,reason:"information barrier"});if("function"!=typeof(null===(y=navigator.mediaDevices)||void 0===y?void 0:y.getDisplayMedia))return Promise.reject({type:Pn,reason:"Unable to share your screen due to the technical limitation"});if(ve)return Promise.reject({type:Pn,reason:"Unable to share your screen while someone is sharing from the main session"});if(zd()&&!(p instanceof HTMLVideoElement))return Promise.reject({type:Ir,reason:"Use Video element instead of Canvas element when WebCodecs enabled"});const Be=Wu(D);if(null!=_&&_.broadcastToBreakoutRoom){if(!Be||Te?.currentRoom.status===hr.InRoom)return Promise.reject(Be?{type:Pn,reason:"Unable to share screen to breakout room when in the room"}:{type:_a});I(KE(!0))}else I(KE(!1));void 0!==_?.requestReadReceipt&&I(WT(_?.requestReadReceipt)),void 0!==_?.optimizedForSharedVideo&&F!==Qu.MultipleShare&&I(Jh(_?.optimizedForSharedVideo&&Mi.isSupportVideoShare()));const Q=Yv(D);if(F===Qu.OnlyHost&&!Be)return Promise.reject({type:_a,reason:"only host can start screen share"});if(F===Qu.HostGrab&&!Be&&Q.length>0)return Promise.reject({type:_a,reason:"only host can grab screen share"});if(!0===Kr(D)?.sharerOn)return Promise.reject({type:Pn,reason:"you have already started screen share."});let dt=rr(!0);return l2()&&"function"!=typeof(null===(it=navigator.mediaDevices)||void 0===it?void 0:it.getDisplayMedia)&&!ie&&(O.checkChromeSharingExtension(),dt=Ts(Rv,1)),p.id||(p.id="__ZOOM_SDK_SHARE_CANVAS_@__".replace("@",`${Math.floor(1e4*Math.random())}`)),pg([qu("sharing",Ae,"success"),dt]).subscribe(it=>{let[ft,Kt]=it;const[en]=ft;if(en&&Kt){!1===oe&&(jc(p),I(DC(!0)));let zt=document.querySelector(`#${Ev}`);zt&&"VIDEO"===zt.tagName||(zt=document.createElement("video"),zt.id=Ev,zt.style.display="none",document.body.appendChild(zt));const Ot=null!=_&&_.secondaryCameraId?{cameraId:_.secondaryCameraId,width:_.captureWidth,height:_.captureHeight}:void 0,_n=!(null!=_&&_.hideShareAudioOption);O.startDesktopSharing(Z,p.id,Ev,Ot,null!=P&&P.isDisableShareAudioIntoBo?_n&&!(null!=_&&_.broadcastToBreakoutRoom):_n),I(PC(!!Ot))}}),new Promise((it,ft)=>{Zl(Ts(Bc,1),Ts(Rv).pipe(En(Kt=>!Kt),is(1),Gr(Qi({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),Ts(cC,1).pipe(zn(Kt=>Qi({reason:Kt.reason||"user deny screen share"})))).subscribe(Kt=>{if(!0===Kt.sharerOn){const{share:{isSharingToBreakoutRoom:en},meeting:{meetingOptions:zt}}=C();O.enableShareAudioToBreakoutRoom(!(null!=zt&&zt.isDisableShareAudioIntoBo||!en)),it("")}else ft({type:Cl})},Kt=>{ft($t({type:Pn},Kt))})});var it})(this[Nn],i,l)}stopShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:_}=i,{share:{status:y},meeting:{userId:C}}=l();return y===Y.ShareStatus.End?Promise.resolve(""):(u(eh(Y.ShareStatus.End)),p.stopSharing(C),_.stopDesktopSharing(),_i(Bc,I=>!1===I.sharerOn))})(this[Nn])}pauseShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:_}=i,{share:{status:y}}=l();return y===Y.ShareStatus.Sharing?(p.pauseSharing(),_.pauseDesktopSharing(),_i(Bc,C=>!0===C.sharerPause).then(()=>(u(eh(Y.ShareStatus.Paused)),""))):Promise.reject({type:Pn})})(this[Nn])}resumeShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:_}=i,{share:{status:y}}=l();return y===Y.ShareStatus.Paused?(p.resumeSharing(),_.resumeDesktopSharing(),_i(Bc,C=>!0===C.sharerOn&&!1===C.sharerPause).then(()=>(u(eh(Y.ShareStatus.Sharing)),""))):Promise.reject({type:Pn})})(this[Nn])}setSharePrivilege(i){return KO(this[Nn],i)}lockShare(i){return KO(this[Nn],i?Qu.OnlyHost:Qu.HostGrab)}shareToBreakoutRoom(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:_}=i,{meeting:{userId:y},breakoutRoom:C,share:{isSharingToBreakoutRoom:I,status:O}}=l();return O===Y.ShareStatus.End?Promise.reject({type:Pn,reason:"Invalid sharing status"}):I?Promise.resolve(""):C.currentRoom.status===hr.InRoom?Promise.reject({type:Pn,reason:"Unable to share screen to breakout room when in the room"}):(p.startShareToBreakoutRoom(y),u(KE(!0)),_.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[Nn])}stopShareToBreakoutRoom(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:_}=i,{meeting:{userId:y},share:{isSharingToBreakoutRoom:C}}=l();return C&&(p.stopShareToBreakoutRoom(y),u(KE(!1)),_.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[Nn])}muteOthersScreenShare(i){return((l,u)=>{const{store:{getState:p},rwgAgent:_}=l,y=p(),{meeting:{userId:C}}=y,I=Yv(y);return u===C?Promise.reject({type:Pn,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===I.findIndex(O=>O.userId===u)?Promise.reject({type:Ir,reason:"Target user is not sharing"}):(_.stopSharing(u),_i(ka,O=>O.some(D=>D.userId===u&&!1===D.sharerOn)))})(this[Nn],i)}enableOptimizeForSharedVideo(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y,rwgAgent:C}=l,{share:{status:I,isOptimizedForSharedVideo:O,isSharingToBreakoutRoom:D,sharePrivilege:B},audio:{isSharingAudio:P},meeting:{userId:F}}=p();return I!==Y.ShareStatus.End?O===u?Promise.resolve(""):B!==Qu.MultipleShare?u&&!Mi.isSupportVideoShare()?Promise.reject({type:Pn,reason:"Cannot enable optimize for shared video due to the platform is not supported "}):(C.startSharing(F,{bShareAudio:P,bShareToBO:D,bShareVideo:u}),y.switchSharingMode(u?bv.VideoMode:bv.Normal),_i({event:Bc,operations:[En(Z=>void 0!==Z.bVideoShare),is(1)]},Z=>Z.bVideoShare===u).then(()=>(_(Jh(u)),""))):Promise.reject({type:Pn,reason:"Cannot enable optimize for shared video when enabling multiple screen shares"}):Promise.reject({type:Pn,reason:"Cannot enable optimize for shared video when screen share is not started"})})(this[Nn],i)}updateSharedVideoQuality(i){return((l,u)=>{const{store:{getState:p,dispatch:_},rwgAgent:y}=l,C=p(),{share:{shareQuality:I,activeNodeId:O,isReceiveSharing:D}}=C,B=ZC(C);return D&&0!==O?(B&&I!==u&&(qg(y,C,O,u),_(RC(u))),Promise.resolve("")):Promise.reject({type:Pn,reason:"Cannot update shared video quality when screen share is not started"})})(this[Nn],i)}subscribeShareStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{getState:y}}=u,C=y(),{media:{sharingEncodeStatus:I,sharingDecodeStatus:O}}=y(),D=Kr(C),B=!p||p.decode,P=!p||p.encode;if(!D)return Promise.reject({type:Pn,reason:"Call this function after the 'join' method resolved."});{const F=Na(D.userRole)?"success":I;qu("sharing",F,O).subscribe(Z=>{let[ie,oe]=Z;ie&&oe&&(B&&_.subscribeToQos([Qs.SharingDecode],kg),P&&_.subscribeToQos([Qs.SharingEncode],kg))})}return""}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}unsubscribeShareStatisticData(i){return(l=V(function*(u,p){const{mediaAgent:_,store:{dispatch:y}}=u,I=!p||p.encode;return(!p||p.decode)&&(_.unsubscribeFromQos([Qs.SharingDecode]),y($h(pm))),I&&(_.unsubscribeFromQos([Qs.SharingEncode]),y($h(pm))),null}),function(u,p){return l.apply(this,arguments)})(this[Nn],i);var l}getShareUserList(){return(i=>{const{store:{getState:l}}=i,u=l();if(!u.share)return[];const{share:{isReceiveSharingFromMainSession:p}}=u;if(p){const{breakoutRoom:{mainSessionAttendeeList:_}}=u;return _.filter(y=>y.bShareToBORooms&&(y.sharerOn||y.sharerPause)).map(y=>({userId:y.userId,displayName:y.displayName,audio:y.audio,muted:y.muted,isHost:y.isHost,isCoHost:y.bCoHost,avatar:y.avatar,bVideoOn:y.bVideoOn,sharerOn:y.sharerOn,sharePause:y.sharerPause,shareToBORooms:y.bShareToBORooms}))}return Yv(u).map(_=>({userId:_.userId,displayName:_.displayName,audio:_.audio,muted:_.muted,isHost:_.isHost,isCoHost:_.bCoHost,avatar:_.avatar,bVideoOn:_.bVideoOn,sharerOn:_.sharerOn,sharePause:_.sharerPause}))})(this[Nn])}getActiveShareUserId(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share&&u.share.isRemoteSharingActive?u.share.activeNodeId:0})(this[Nn])}isReceiveSharing(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.isReceiveSharing})(this[Nn])}getShareViewDimension(){return(i=>{const{store:{getState:l}}=i,u=l();if(u.share){if(u.share.status!==Y.ShareStatus.End)return $t({},u.share.shareDimension);{const{share:{receivedShareDimension:p}}=u;return{width:p.width,height:p.height}}}return null})(this[Nn])}getShareStatus(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share?u.share.status:null})(this[Nn])}isShareLocked(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.sharePrivilege===Qu.OnlyHost})(this[Nn])}isReceiveSharingFromMainSession(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.isReceiveSharingFromMainSession})(this[Nn])}getSharePrivilege(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share?u.share.sharePrivilege:null})(this[Nn])}isStartShareScreenWithVideoElement(){return zd()}isOptimizeForSharedVideoEnabled(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.isOptimizedForSharedVideo})(this[Nn])}isSupportOptimizedForSharedVideo(){return Mi.isSupportVideoShare()}getShareStatisticData(){return(i=>{let{store:{getState:l}}=i;const{share:{statistic:u}}=l();return $t({},u)})(this[Nn])}},kn(Jt.prototype,"startAudio",[jt,zO,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"startAudio"),Jt.prototype),kn(Jt.prototype,"stopAudio",[jt,Ew,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"stopAudio"),Jt.prototype),kn(Jt.prototype,"muteAudio",[jt,Df,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"muteAudio"),Jt.prototype),kn(Jt.prototype,"unmuteAudio",[jt,bw,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteAudio"),Jt.prototype),kn(Jt.prototype,"dialOut",[jt,Sw,h0],Object.getOwnPropertyDescriptor(Jt.prototype,"dialOut"),Jt.prototype),kn(Jt.prototype,"cancelDialOut",[jt,YO,Cw],Object.getOwnPropertyDescriptor(Jt.prototype,"cancelDialOut"),Jt.prototype),kn(Jt.prototype,"hangup",[jt,Iw,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"hangup"),Jt.prototype),kn(Jt.prototype,"switchMicrophone",[jt,w_,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"switchMicrophone"),Jt.prototype),kn(Jt.prototype,"switchSpeaker",[jt,qO,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"switchSpeaker"),Jt.prototype),kn(Jt.prototype,"muteShareAudio",[jt,$B,XB,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"muteShareAudio"),Jt.prototype),kn(Jt.prototype,"unmuteShareAudio",[jt,ZB,JO,kf],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteShareAudio"),Jt.prototype),kn(Jt.prototype,"subscribeAudioStatisticData",[jt,$O],Object.getOwnPropertyDescriptor(Jt.prototype,"subscribeAudioStatisticData"),Jt.prototype),kn(Jt.prototype,"unsubscribeAudioStatisticData",[jt,DN],Object.getOwnPropertyDescriptor(Jt.prototype,"unsubscribeAudioStatisticData"),Jt.prototype),kn(Jt.prototype,"startVideo",[jt,XO,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"startVideo"),Jt.prototype),kn(Jt.prototype,"stopVideo",[jt,kN,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"stopVideo"),Jt.prototype),kn(Jt.prototype,"switchCamera",[jt,p0,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"switchCamera"),Jt.prototype),kn(Jt.prototype,"renderVideo",[jt,ZO,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"renderVideo"),Jt.prototype),kn(Jt.prototype,"stopRenderVideo",[jt,eD,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"stopRenderVideo"),Jt.prototype),kn(Jt.prototype,"updateVideoCanvasDimension",[jt,ww,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"updateVideoCanvasDimension"),Jt.prototype),kn(Jt.prototype,"adjustRenderedVideoPosition",[jt,PN,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"adjustRenderedVideoPosition"),Jt.prototype),kn(Jt.prototype,"clearVideoCanvas",[jt,f0,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"clearVideoCanvas"),Jt.prototype),kn(Jt.prototype,"mirrorVideo",[jt,m0,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"mirrorVideo"),Jt.prototype),kn(Jt.prototype,"enableHardwareAcceleration",[jt,eF,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"enableHardwareAcceleration"),Jt.prototype),kn(Jt.prototype,"subscribeVideoStatisticData",[jt,Tw],Object.getOwnPropertyDescriptor(Jt.prototype,"subscribeVideoStatisticData"),Jt.prototype),kn(Jt.prototype,"unsubscribeVideoStatisticData",[jt,$A],Object.getOwnPropertyDescriptor(Jt.prototype,"unsubscribeVideoStatisticData"),Jt.prototype),kn(Jt.prototype,"previewVirtualBackground",[jt,NN,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"previewVirtualBackground"),Jt.prototype),kn(Jt.prototype,"updateVirtualBackgroundImage",[jt,MN,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"updateVirtualBackgroundImage"),Jt.prototype),kn(Jt.prototype,"stopPreviewVirtualBackground",[jt,tF,rl],Object.getOwnPropertyDescriptor(Jt.prototype,"stopPreviewVirtualBackground"),Jt.prototype),kn(Jt.prototype,"requestFarEndCameraControl",[jt,nF],Object.getOwnPropertyDescriptor(Jt.prototype,"requestFarEndCameraControl"),Jt.prototype),kn(Jt.prototype,"approveFarEndCameraControl",[jt,xN],Object.getOwnPropertyDescriptor(Jt.prototype,"approveFarEndCameraControl"),Jt.prototype),kn(Jt.prototype,"declineFarEndCameraControl",[jt,tD],Object.getOwnPropertyDescriptor(Jt.prototype,"declineFarEndCameraControl"),Jt.prototype),kn(Jt.prototype,"giveUpFarEndCameraControl",[jt,T_],Object.getOwnPropertyDescriptor(Jt.prototype,"giveUpFarEndCameraControl"),Jt.prototype),kn(Jt.prototype,"controlCamera",[jt,rF],Object.getOwnPropertyDescriptor(Jt.prototype,"controlCamera"),Jt.prototype),kn(Jt.prototype,"controlFarEndCamera",[jt,iF],Object.getOwnPropertyDescriptor(Jt.prototype,"controlFarEndCamera"),Jt.prototype),kn(Jt.prototype,"startShareView",[jt,oF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"startShareView"),Jt.prototype),kn(Jt.prototype,"stopShareView",[jt,sF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"stopShareView"),Jt.prototype),kn(Jt.prototype,"switchShareView",[jt,aF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"switchShareView"),Jt.prototype),kn(Jt.prototype,"updateSharingCanvasDimension",[jt,LN,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"updateSharingCanvasDimension"),Jt.prototype),kn(Jt.prototype,"startShareScreen",[jt,XA,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"startShareScreen"),Jt.prototype),kn(Jt.prototype,"stopShareScreen",[jt,cF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"stopShareScreen"),Jt.prototype),kn(Jt.prototype,"pauseShareScreen",[jt,uF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"pauseShareScreen"),Jt.prototype),kn(Jt.prototype,"resumeShareScreen",[jt,lF,Pf],Object.getOwnPropertyDescriptor(Jt.prototype,"resumeShareScreen"),Jt.prototype),kn(Jt.prototype,"setSharePrivilege",[gh,dF,jt],Object.getOwnPropertyDescriptor(Jt.prototype,"setSharePrivilege"),Jt.prototype),kn(Jt.prototype,"lockShare",[gh,hF,jt],Object.getOwnPropertyDescriptor(Jt.prototype,"lockShare"),Jt.prototype),kn(Jt.prototype,"shareToBreakoutRoom",[jt,gh,R_],Object.getOwnPropertyDescriptor(Jt.prototype,"shareToBreakoutRoom"),Jt.prototype),kn(Jt.prototype,"stopShareToBreakoutRoom",[jt,gh,_h],Object.getOwnPropertyDescriptor(Jt.prototype,"stopShareToBreakoutRoom"),Jt.prototype),kn(Jt.prototype,"muteOthersScreenShare",[jt,gh,pF],Object.getOwnPropertyDescriptor(Jt.prototype,"muteOthersScreenShare"),Jt.prototype),kn(Jt.prototype,"enableOptimizeForSharedVideo",[jt,BN],Object.getOwnPropertyDescriptor(Jt.prototype,"enableOptimizeForSharedVideo"),Jt.prototype),kn(Jt.prototype,"updateSharedVideoQuality",[jt,Rw],Object.getOwnPropertyDescriptor(Jt.prototype,"updateSharedVideoQuality"),Jt.prototype),kn(Jt.prototype,"subscribeShareStatisticData",[jt,bi],Object.getOwnPropertyDescriptor(Jt.prototype,"subscribeShareStatisticData"),Jt.prototype),kn(Jt.prototype,"unsubscribeShareStatisticData",[jt,Ow],Object.getOwnPropertyDescriptor(Jt.prototype,"unsubscribeShareStatisticData"),Jt.prototype),Jt);var nD,g0,Nl,_0,il;const rD=zm("Audio"),_4=zm("Sharing");let FN=(nD=Er("share"),g0=Er("audio"),Nl=Er("audio"),_0=Er("audio"),kn((il=class extends fF{switchSharingSecondaryCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:_},mediaAgent:y}=l,C=p(),{video:{cameraDevicesList:I},share:{status:O,isSharingWithSecondCamera:D}}=C;return"default"!==u&&-1===I.map(B=>B.deviceId).indexOf(u)?Promise.reject({type:Ir,reason:"Cannot find cameraDeviceId in camera devices list."}):(O===Y.ShareStatus.Sharing&&D&&y.changeSharingSecondCamera(u),_(GT(u)),Promise.resolve())})(this[Nn],i)}muteUserAudioLocally(i){return((l,u)=>{const{mediaAgent:p,store:{getState:_,dispatch:y}}=l,C=_(),{audio:{locallyMutedAudioList:I}}=C,O=Ks(C).filter(D=>"computer"===D.audio);return I.includes(u)||-1===O.findIndex(D=>D.userId===u)||(p.muteOrUnmuteOtherAudio(u,!0),y(wC(u))),Promise.resolve("")})(this[Nn],i)}unmuteUserAudioLocally(i){return((l,u)=>{const{mediaAgent:p,store:{getState:_,dispatch:y}}=l,{audio:{locallyMutedAudioList:C}}=_();return C.includes(u)&&(p.muteOrUnmuteOtherAudio(u,!1),y(jT(u))),Promise.resolve("")})(this[Nn],i)}adjustUserAudioVolumeLocally(i,l){return((u,p,_)=>{const{mediaAgent:y,store:{getState:C,dispatch:I}}=u,O=C();return-1!==Ks(O).findIndex(D=>D.userId===p)&&(y.adjustOtherAudioVolume(p,_),I(x2({userId:p,volume:_}))),Promise.resolve("")})(this[Nn],i,l)}isUserAudioMutedLocally(i){return((l,u)=>{let{store:{getState:p}}=l;const{audio:{locallyMutedAudioList:_}}=p();return _.includes(u)})(this[Nn],i)}getUserVolumeLocally(i){return((l,u)=>{var p,_;let{store:{getState:y}}=l;const{audio:{localUserAudioVolumeList:C,locallyMutedAudioList:I}}=y();return null!==(p=null===(_=C.find(O=>O.userId===u))||void 0===_?void 0:_.volume)&&void 0!==p?p:I.includes(u)?0:100})(this[Nn],i)}}).prototype,"switchSharingSecondaryCamera",[jt,nD,_4],Object.getOwnPropertyDescriptor(il.prototype,"switchSharingSecondaryCamera"),il.prototype),kn(il.prototype,"muteUserAudioLocally",[jt,g0,rD],Object.getOwnPropertyDescriptor(il.prototype,"muteUserAudioLocally"),il.prototype),kn(il.prototype,"unmuteUserAudioLocally",[jt,Nl,rD],Object.getOwnPropertyDescriptor(il.prototype,"unmuteUserAudioLocally"),il.prototype),kn(il.prototype,"adjustUserAudioVolumeLocally",[jt,_0,rD],Object.getOwnPropertyDescriptor(il.prototype,"adjustUserAudioVolumeLocally"),il.prototype),il);const v0={controlStatus:Qr.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:Am.Automatically,currentRoom:{status:hr.Initial,boStatus:yC.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},mF=Fr({[`${eR}`]:Et((i,l)=>{let{payload:u}=l;Array.isArray(u)?i.rooms.push(...u):i.rooms.push(u)}),[`${Cm}`]:Et((i,l)=>{let{payload:u}=l;i.allocationPattern=u}),[`${Gv}`]:Et((i,l)=>{let{payload:u}=l;i.sequenceId=u}),[`${tR}`]:Et((i,l)=>{let{payload:u}=l;i.meetingElapsedTime=u}),[`${nB}`]:Et((i,l)=>{let{payload:u}=l;i.startRoomElapsedTime=u}),[`${nR}`]:Et((i,l)=>{let{payload:u}=l;const{options:p}=i;Object.assign(p,u)}),[`${rR}`]:Et((i,l)=>{let{payload:u}=l;i.controlStatus=u}),[`${ic}`]:Et((i,l)=>{let{payload:u}=l;i.rooms=u}),[`${UC}`]:Et((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;Object.assign(p,u)}),[`${df}`]:Et((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.status=u}),[`${ZE}`]:Et((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.boConfId=u}),[`${iR}`]:Et((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.boToken=u}),[`${jC}`]:Et((i,l)=>{let{payload:u}=l;i.closingRoomTime=u}),[`${rB}`]:Et((i,l)=>{let{payload:u}=l;i.broadcastMessage=u}),[`${oR}`]:Et((i,l)=>{let{payload:u}=l;i.hostReplyToQuestionerType=u}),[`${sR}`]:Et((i,l)=>{let{payload:u}=l;i.hostReplyToRequestId=u}),[`${aR}`]:Et((i,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(p=>{const _=i.mainSessionAttendeeList.find(y=>y.userId===p.userId);void 0!==_?Object.assign(_,p):VE(p.userRole)||i.mainSessionAttendeeList.push(p)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(p=>{const _=i.mainSessionAttendeeList.find(y=>y.userId===p.userId);void 0!==_&&Object.assign(_,p)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(p=>{const _=i.mainSessionAttendeeList.findIndex(y=>y.userId===p.userId);-1!==_&&i.mainSessionAttendeeList.splice(_,1)})}),[`${QC}`]:Et((i,l)=>{let{payload:u}=l;i.isHugeBO=u}),[`${eb}`]:Et((i,l)=>{let{payload:u}=l;i.isUserRoleUpdated=u}),[`${hf}`]:Et((i,l)=>{let{payload:u}=l;i.preAssignedRooms=u}),[`${Wv}`]:Et((i,l)=>{let{payload:u}=l;i.isEnableBreakoutRoom=u.isEnableBreakoutRoom,i.isEnableBOBroadcast=u.isEnableBOBroadcast}),[`${VC}`]:i=>{const{currentRoom:{status:l}}=i;return $t($t({},v0),{},l===hr.Joining?{preAssignedRooms:i.preAssignedRooms,currentRoom:i.currentRoom,closingRoomTime:i.closingRoomTime}:l===hr.Leaving?{preAssignedRooms:i.preAssignedRooms,closingRoomTime:i.closingRoomTime}:{preAssignedRooms:i.preAssignedRooms})}},v0);var vh={};!function(i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function u(y,C){return Object.prototype.hasOwnProperty.call(y,C)}i.assign=function(y){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var I=C.shift();if(I){if("object"!=typeof I)throw new TypeError(I+"must be non-object");for(var O in I)u(I,O)&&(y[O]=I[O])}}return y},i.shrinkBuf=function(y,C){return y.length===C?y:y.subarray?y.subarray(0,C):(y.length=C,y)};var p={arraySet:function(y,C,I,O,D){if(C.subarray&&y.subarray)y.set(C.subarray(I,I+O),D);else for(var B=0;B<O;B++)y[D+B]=C[I+B]},flattenChunks:function(y){var C,I,O,D,B,P;for(O=0,C=0,I=y.length;C<I;C++)O+=y[C].length;for(P=new Uint8Array(O),D=0,C=0,I=y.length;C<I;C++)P.set(B=y[C],D),D+=B.length;return P}},_={arraySet:function(y,C,I,O,D){for(var B=0;B<O;B++)y[D+B]=C[I+B]},flattenChunks:function(y){return[].concat.apply([],y)}};i.setTyped=function(y){y?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,p)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,_))},i.setTyped(l)}(vh);var ZA={},Ds={},ds={},ia=vh;function vi(i){for(var l=i.length;--l>=0;)i[l]=0}var hs=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Br=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],gF=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],iD=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Nf=new Array(576);vi(Nf);var Ml=new Array(60);vi(Ml);var _p=new Array(512);vi(_p);var A0=new Array(256);vi(A0);var UN=new Array(29);vi(UN);var _F,Jm,ey,$m=new Array(30);function ol(i,l,u,p,_){this.static_tree=i,this.extra_bits=l,this.extra_base=u,this.elems=p,this.max_length=_,this.has_stree=i&&i.length}function y0(i,l){this.dyn_tree=i,this.max_code=0,this.stat_desc=l}function O_(i){return i<256?_p[i]:_p[256+(i>>>7)]}function ty(i,l){i.pending_buf[i.pending++]=255&l,i.pending_buf[i.pending++]=l>>>8&255}function xl(i,l,u){i.bi_valid>16-u?(i.bi_buf|=l<<i.bi_valid&65535,ty(i,i.bi_buf),i.bi_buf=l>>16-i.bi_valid,i.bi_valid+=u-16):(i.bi_buf|=l<<i.bi_valid&65535,i.bi_valid+=u)}function Ah(i,l,u){xl(i,u[2*l],u[2*l+1])}function VN(i,l){var u=0;do{u|=1&i,i>>>=1,u<<=1}while(--l>0);return u>>>1}function oD(i,l,u){var p,_,y=new Array(16),C=0;for(p=1;p<=15;p++)y[p]=C=C+u[p-1]<<1;for(_=0;_<=l;_++){var I=i[2*_+1];0!==I&&(i[2*_]=VN(y[I]++,I))}}function Mf(i){var l;for(l=0;l<286;l++)i.dyn_ltree[2*l]=0;for(l=0;l<30;l++)i.dyn_dtree[2*l]=0;for(l=0;l<19;l++)i.bl_tree[2*l]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function jN(i){i.bi_valid>8?ty(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function QN(i,l,u,p){var _=2*l,y=2*u;return i[_]<i[y]||i[_]===i[y]&&p[l]<=p[u]}function Cu(i,l,u){for(var p=i.heap[u],_=u<<1;_<=i.heap_len&&(_<i.heap_len&&QN(l,i.heap[_+1],i.heap[_],i.depth)&&_++,!QN(l,p,i.heap[_],i.depth));)i.heap[u]=i.heap[_],u=_,_<<=1;i.heap[u]=p}function Dw(i,l,u){var p,_,y,C,I=0;if(0!==i.last_lit)do{p=i.pending_buf[i.d_buf+2*I]<<8|i.pending_buf[i.d_buf+2*I+1],_=i.pending_buf[i.l_buf+I],I++,0===p?Ah(i,_,l):(Ah(i,(y=A0[_])+256+1,l),0!==(C=hs[y])&&xl(i,_-=UN[y],C),Ah(i,y=O_(--p),u),0!==(C=Br[y])&&xl(i,p-=$m[y],C))}while(I<i.last_lit);Ah(i,256,l)}function sD(i,l){var u,p,_,y=l.dyn_tree,C=l.stat_desc.static_tree,I=l.stat_desc.has_stree,O=l.stat_desc.elems,D=-1;for(i.heap_len=0,i.heap_max=573,u=0;u<O;u++)0!==y[2*u]?(i.heap[++i.heap_len]=D=u,i.depth[u]=0):y[2*u+1]=0;for(;i.heap_len<2;)y[2*(_=i.heap[++i.heap_len]=D<2?++D:0)]=1,i.depth[_]=0,i.opt_len--,I&&(i.static_len-=C[2*_+1]);for(l.max_code=D,u=i.heap_len>>1;u>=1;u--)Cu(i,y,u);_=O;do{u=i.heap[1],i.heap[1]=i.heap[i.heap_len--],Cu(i,y,1),p=i.heap[1],i.heap[--i.heap_max]=u,i.heap[--i.heap_max]=p,y[2*_]=y[2*u]+y[2*p],i.depth[_]=(i.depth[u]>=i.depth[p]?i.depth[u]:i.depth[p])+1,y[2*u+1]=y[2*p+1]=_,i.heap[1]=_++,Cu(i,y,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(B,P){var F,Z,ie,oe,ve,Ae,Te=P.dyn_tree,Be=P.max_code,Q=P.stat_desc.static_tree,tt=P.stat_desc.has_stree,dt=P.stat_desc.extra_bits,it=P.stat_desc.extra_base,ft=P.stat_desc.max_length,Kt=0;for(oe=0;oe<=15;oe++)B.bl_count[oe]=0;for(Te[2*B.heap[B.heap_max]+1]=0,F=B.heap_max+1;F<573;F++)(oe=Te[2*Te[2*(Z=B.heap[F])+1]+1]+1)>ft&&(oe=ft,Kt++),Te[2*Z+1]=oe,Z>Be||(B.bl_count[oe]++,ve=0,Z>=it&&(ve=dt[Z-it]),B.opt_len+=(Ae=Te[2*Z])*(oe+ve),tt&&(B.static_len+=Ae*(Q[2*Z+1]+ve)));if(0!==Kt){do{for(oe=ft-1;0===B.bl_count[oe];)oe--;B.bl_count[oe]--,B.bl_count[oe+1]+=2,B.bl_count[ft]--,Kt-=2}while(Kt>0);for(oe=ft;0!==oe;oe--)for(Z=B.bl_count[oe];0!==Z;)(ie=B.heap[--F])>Be||(Te[2*ie+1]!==oe&&(B.opt_len+=(oe-Te[2*ie+1])*Te[2*ie],Te[2*ie+1]=oe),Z--)}}(i,l),oD(y,D,i.bl_count)}function HN(i,l,u){var p,_,y=-1,C=l[1],I=0,O=7,D=4;for(0===C&&(O=138,D=3),l[2*(u+1)+1]=65535,p=0;p<=u;p++)_=C,C=l[2*(p+1)+1],++I<O&&_===C||(I<D?i.bl_tree[2*_]+=I:0!==_?(_!==y&&i.bl_tree[2*_]++,i.bl_tree[32]++):I<=10?i.bl_tree[34]++:i.bl_tree[36]++,I=0,y=_,0===C?(O=138,D=3):_===C?(O=6,D=3):(O=7,D=4))}function GN(i,l,u){var p,_,y=-1,C=l[1],I=0,O=7,D=4;for(0===C&&(O=138,D=3),p=0;p<=u;p++)if(_=C,C=l[2*(p+1)+1],!(++I<O&&_===C)){if(I<D)do{Ah(i,_,i.bl_tree)}while(0!=--I);else 0!==_?(_!==y&&(Ah(i,_,i.bl_tree),I--),Ah(i,16,i.bl_tree),xl(i,I-3,2)):I<=10?(Ah(i,17,i.bl_tree),xl(i,I-3,3)):(Ah(i,18,i.bl_tree),xl(i,I-11,7));I=0,y=_,0===C?(O=138,D=3):_===C?(O=6,D=3):(O=7,D=4)}}vi($m);var WN=!1;function ny(i,l,u,p){var _,y,C;xl(i,0+(p?1:0),3),y=l,C=u,jN(_=i),ty(_,C),ty(_,~C),ia.arraySet(_.pending_buf,_.window,y,C,_.pending),_.pending+=C}ds._tr_init=function(i){WN||(function(){var l,u,p,_,y,C=new Array(16);for(p=0,_=0;_<28;_++)for(UN[_]=p,l=0;l<1<<hs[_];l++)A0[p++]=_;for(A0[p-1]=_,y=0,_=0;_<16;_++)for($m[_]=y,l=0;l<1<<Br[_];l++)_p[y++]=_;for(y>>=7;_<30;_++)for($m[_]=y<<7,l=0;l<1<<Br[_]-7;l++)_p[256+y++]=_;for(u=0;u<=15;u++)C[u]=0;for(l=0;l<=143;)Nf[2*l+1]=8,l++,C[8]++;for(;l<=255;)Nf[2*l+1]=9,l++,C[9]++;for(;l<=279;)Nf[2*l+1]=7,l++,C[7]++;for(;l<=287;)Nf[2*l+1]=8,l++,C[8]++;for(oD(Nf,287,C),l=0;l<30;l++)Ml[2*l+1]=5,Ml[2*l]=VN(l,5);_F=new ol(Nf,hs,257,286,15),Jm=new ol(Ml,Br,0,30,15),ey=new ol(new Array(0),gF,0,19,7)}(),WN=!0),i.l_desc=new y0(i.dyn_ltree,_F),i.d_desc=new y0(i.dyn_dtree,Jm),i.bl_desc=new y0(i.bl_tree,ey),i.bi_buf=0,i.bi_valid=0,Mf(i)},ds._tr_stored_block=ny,ds._tr_flush_block=function(i,l,u,p){var _,y,C=0;i.level>0?(2===i.strm.data_type&&(i.strm.data_type=function(I){var O,D=4093624447;for(O=0;O<=31;O++,D>>>=1)if(1&D&&0!==I.dyn_ltree[2*O])return 0;if(0!==I.dyn_ltree[18]||0!==I.dyn_ltree[20]||0!==I.dyn_ltree[26])return 1;for(O=32;O<256;O++)if(0!==I.dyn_ltree[2*O])return 1;return 0}(i)),sD(i,i.l_desc),sD(i,i.d_desc),C=function(I){var O;for(HN(I,I.dyn_ltree,I.l_desc.max_code),HN(I,I.dyn_dtree,I.d_desc.max_code),sD(I,I.bl_desc),O=18;O>=3&&0===I.bl_tree[2*iD[O]+1];O--);return I.opt_len+=3*(O+1)+5+5+4,O}(i),(y=i.static_len+3+7>>>3)<=(_=i.opt_len+3+7>>>3)&&(_=y)):_=y=u+5,u+4<=_&&-1!==l?ny(i,l,u,p):4===i.strategy||y===_?(xl(i,2+(p?1:0),3),Dw(i,Nf,Ml)):(xl(i,4+(p?1:0),3),function(I,O,D,B){var P;for(xl(I,O-257,5),xl(I,D-1,5),xl(I,B-4,4),P=0;P<B;P++)xl(I,I.bl_tree[2*iD[P]+1],3);GN(I,I.dyn_ltree,O-1),GN(I,I.dyn_dtree,D-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,C+1),Dw(i,i.dyn_ltree,i.dyn_dtree)),Mf(i),p&&jN(i)},ds._tr_tally=function(i,l,u){return i.pending_buf[i.d_buf+2*i.last_lit]=l>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&l,i.pending_buf[i.l_buf+i.last_lit]=255&u,i.last_lit++,0===l?i.dyn_ltree[2*u]++:(i.matches++,l--,i.dyn_ltree[2*(A0[u]+256+1)]++,i.dyn_dtree[2*O_(l)]++),i.last_lit===i.lit_bufsize-1},ds._tr_align=function(i){var l;xl(i,2,3),Ah(i,256,Nf),16===(l=i).bi_valid?(ty(l,l.bi_buf),l.bi_buf=0,l.bi_valid=0):l.bi_valid>=8&&(l.pending_buf[l.pending++]=255&l.bi_buf,l.bi_buf>>=8,l.bi_valid-=8)};var D_,ba=function(i,l,u,p){for(var _=65535&i|0,y=i>>>16&65535|0,C=0;0!==u;){u-=C=u>2e3?2e3:u;do{y=y+(_=_+l[p++]|0)|0}while(--C);_%=65521,y%=65521}return _|y<<16|0},zr=function(){for(var i,l=[],u=0;u<256;u++){i=u;for(var p=0;p<8;p++)i=1&i?3988292384^i>>>1:i>>>1;l[u]=i}return l}(),hi=function(i,l,u,p){var _=zr,y=p+u;i^=-1;for(var C=p;C<y;C++)i=i>>>8^_[255&(i^l[C])];return-1^i},kw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ba=vh,oa=ds,ry=ba,Fa=hi,KN=kw,xi=262;function fd(i,l){return i.msg=KN[l],l}function b0(i){return(i<<1)-(i>4?9:0)}function vp(i){for(var l=i.length;--l>=0;)i[l]=0}function md(i){var l=i.state,u=l.pending;u>i.avail_out&&(u=i.avail_out),0!==u&&(Ba.arraySet(i.output,l.pending_buf,l.pending_out,u,i.next_out),i.next_out+=u,l.pending_out+=u,i.total_out+=u,i.avail_out-=u,l.pending-=u,0===l.pending&&(l.pending_out=0))}function zi(i,l){oa._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,l),i.block_start=i.strstart,md(i.strm)}function to(i,l){i.pending_buf[i.pending++]=l}function iy(i,l){i.pending_buf[i.pending++]=l>>>8&255,i.pending_buf[i.pending++]=255&l}function Pw(i,l){var u,p,_=i.max_chain_length,y=i.strstart,C=i.prev_length,I=i.nice_match,O=i.strstart>i.w_size-xi?i.strstart-(i.w_size-xi):0,D=i.window,B=i.w_mask,P=i.prev,F=i.strstart+258,Z=D[y+C-1],ie=D[y+C];i.prev_length>=i.good_match&&(_>>=2),I>i.lookahead&&(I=i.lookahead);do{if(D[(u=l)+C]===ie&&D[u+C-1]===Z&&D[u]===D[y]&&D[++u]===D[y+1]){y+=2,u++;do{}while(D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&D[++y]===D[++u]&&y<F);if(p=258-(F-y),y=F-258,p>C){if(i.match_start=l,C=p,p>=I)break;Z=D[y+C-1],ie=D[y+C]}}}while((l=P[l&B])>O&&0!=--_);return C<=i.lookahead?C:i.lookahead}function Lf(i){var l,u,p,_,y,C,I,O,D,B,P=i.w_size;do{if(_=i.window_size-i.lookahead-i.strstart,i.strstart>=P+(P-xi)){Ba.arraySet(i.window,i.window,P,P,0),i.match_start-=P,i.strstart-=P,i.block_start-=P,l=u=i.hash_size;do{p=i.head[--l],i.head[l]=p>=P?p-P:0}while(--u);l=u=P;do{p=i.prev[--l],i.prev[l]=p>=P?p-P:0}while(--u);_+=P}if(0===i.strm.avail_in)break;if(I=i.window,O=i.strstart+i.lookahead,B=void 0,(B=(C=i.strm).avail_in)>(D=_)&&(B=D),u=0===B?0:(C.avail_in-=B,Ba.arraySet(I,C.input,C.next_in,B,O),1===C.state.wrap?C.adler=ry(C.adler,I,B,O):2===C.state.wrap&&(C.adler=Fa(C.adler,I,B,O)),C.next_in+=B,C.total_in+=B,B),i.lookahead+=u,i.lookahead+i.insert>=3)for(i.ins_h=i.window[y=i.strstart-i.insert],i.ins_h=(i.ins_h<<i.hash_shift^i.window[y+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[y+3-1])&i.hash_mask,i.prev[y&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=y,y++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<xi&&0!==i.strm.avail_in)}function Nw(i,l){for(var u,p;;){if(i.lookahead<xi){if(Lf(i),i.lookahead<xi&&0===l)return 1;if(0===i.lookahead)break}if(u=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),0!==u&&i.strstart-u<=i.w_size-xi&&(i.match_length=Pw(i,u)),i.match_length>=3)if(p=oa._tr_tally(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do{i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart}while(0!=--i.match_length);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else p=oa._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(p&&(zi(i,!1),0===i.strm.avail_out))return 1}return i.insert=i.strstart<2?i.strstart:2,4===l?(zi(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(zi(i,!1),0===i.strm.avail_out)?1:2}function k_(i,l){for(var u,p,_;;){if(i.lookahead<xi){if(Lf(i),i.lookahead<xi&&0===l)return 1;if(0===i.lookahead)break}if(u=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,0!==u&&i.prev_length<i.max_lazy_match&&i.strstart-u<=i.w_size-xi&&(i.match_length=Pw(i,u),i.match_length<=5&&(1===i.strategy||3===i.match_length&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){_=i.strstart+i.lookahead-3,p=oa._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do{++i.strstart<=_&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart)}while(0!=--i.prev_length);if(i.match_available=0,i.match_length=2,i.strstart++,p&&(zi(i,!1),0===i.strm.avail_out))return 1}else if(i.match_available){if((p=oa._tr_tally(i,0,i.window[i.strstart-1]))&&zi(i,!1),i.strstart++,i.lookahead--,0===i.strm.avail_out)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(p=oa._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,4===l?(zi(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(zi(i,!1),0===i.strm.avail_out)?1:2}function Ap(i,l,u,p,_){this.good_length=i,this.max_lazy=l,this.nice_length=u,this.max_chain=p,this.func=_}function oy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ba.Buf16(1146),this.dyn_dtree=new Ba.Buf16(122),this.bl_tree=new Ba.Buf16(78),vp(this.dyn_ltree),vp(this.dyn_dtree),vp(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ba.Buf16(16),this.heap=new Ba.Buf16(573),vp(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ba.Buf16(573),vp(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zN(i){var l;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=2,(l=i.state).pending=0,l.pending_out=0,l.wrap<0&&(l.wrap=-l.wrap),l.status=l.wrap?42:113,i.adler=2===l.wrap?0:1,l.last_flush=0,oa._tr_init(l),0):fd(i,-2)}function Mw(i){var u,l=zN(i);return 0===l&&((u=i.state).window_size=2*u.w_size,vp(u.head),u.max_lazy_match=D_[u.level].max_lazy,u.good_match=D_[u.level].good_length,u.nice_match=D_[u.level].nice_length,u.max_chain_length=D_[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=2,u.match_available=0,u.ins_h=0),l}function sy(i,l,u,p,_,y){if(!i)return-2;var C=1;if(-1===l&&(l=6),p<0?(C=0,p=-p):p>15&&(C=2,p-=16),_<1||_>9||8!==u||p<8||p>15||l<0||l>9||y<0||y>4)return fd(i,-2);8===p&&(p=9);var I=new oy;return i.state=I,I.strm=i,I.wrap=C,I.gzhead=null,I.w_bits=p,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=_+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+3-1)/3),I.window=new Ba.Buf8(2*I.w_size),I.head=new Ba.Buf16(I.hash_size),I.prev=new Ba.Buf16(I.w_size),I.lit_bufsize=1<<_+6,I.pending_buf_size=4*I.lit_bufsize,I.pending_buf=new Ba.Buf8(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=l,I.strategy=y,I.method=u,Mw(i)}D_=[new Ap(0,0,0,0,function(i,l){var u=65535;for(u>i.pending_buf_size-5&&(u=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Lf(i),0===i.lookahead&&0===l)return 1;if(0===i.lookahead)break}i.strstart+=i.lookahead,i.lookahead=0;var p=i.block_start+u;if((0===i.strstart||i.strstart>=p)&&(i.lookahead=i.strstart-p,i.strstart=p,zi(i,!1),0===i.strm.avail_out)||i.strstart-i.block_start>=i.w_size-xi&&(zi(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,4===l?(zi(i,!0),0===i.strm.avail_out?3:4):(i.strstart>i.block_start&&zi(i,!1),1)}),new Ap(4,4,8,4,Nw),new Ap(4,5,16,8,Nw),new Ap(4,6,32,32,Nw),new Ap(4,4,16,16,k_),new Ap(8,16,32,32,k_),new Ap(8,16,128,128,k_),new Ap(8,32,128,256,k_),new Ap(32,128,258,1024,k_),new Ap(32,258,258,4096,k_)],Ds.deflateInit=function(i,l){return sy(i,l,8,15,8,0)},Ds.deflateInit2=sy,Ds.deflateReset=Mw,Ds.deflateResetKeep=zN,Ds.deflateSetHeader=function(i,l){return i&&i.state?2!==i.state.wrap?-2:(i.state.gzhead=l,0):-2},Ds.deflate=function(i,l){var u,p,_,y;if(!i||!i.state||l>5||l<0)return i?fd(i,-2):-2;if(p=i.state,!i.output||!i.input&&0!==i.avail_in||666===p.status&&4!==l)return fd(i,0===i.avail_out?-5:-2);if(p.strm=i,u=p.last_flush,p.last_flush=l,42===p.status)if(2===p.wrap)i.adler=0,to(p,31),to(p,139),to(p,8),p.gzhead?(to(p,(p.gzhead.text?1:0)+(p.gzhead.hcrc?2:0)+(p.gzhead.extra?4:0)+(p.gzhead.name?8:0)+(p.gzhead.comment?16:0)),to(p,255&p.gzhead.time),to(p,p.gzhead.time>>8&255),to(p,p.gzhead.time>>16&255),to(p,p.gzhead.time>>24&255),to(p,9===p.level?2:p.strategy>=2||p.level<2?4:0),to(p,255&p.gzhead.os),p.gzhead.extra&&p.gzhead.extra.length&&(to(p,255&p.gzhead.extra.length),to(p,p.gzhead.extra.length>>8&255)),p.gzhead.hcrc&&(i.adler=Fa(i.adler,p.pending_buf,p.pending,0)),p.gzindex=0,p.status=69):(to(p,0),to(p,0),to(p,0),to(p,0),to(p,0),to(p,9===p.level?2:p.strategy>=2||p.level<2?4:0),to(p,3),p.status=113);else{var C=8+(p.w_bits-8<<4)<<8;C|=(p.strategy>=2||p.level<2?0:p.level<6?1:6===p.level?2:3)<<6,0!==p.strstart&&(C|=32),C+=31-C%31,p.status=113,iy(p,C),0!==p.strstart&&(iy(p,i.adler>>>16),iy(p,65535&i.adler)),i.adler=1}if(69===p.status)if(p.gzhead.extra){for(_=p.pending;p.gzindex<(65535&p.gzhead.extra.length)&&(p.pending!==p.pending_buf_size||(p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),md(i),_=p.pending,p.pending!==p.pending_buf_size));)to(p,255&p.gzhead.extra[p.gzindex]),p.gzindex++;p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),p.gzindex===p.gzhead.extra.length&&(p.gzindex=0,p.status=73)}else p.status=73;if(73===p.status)if(p.gzhead.name){_=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),md(i),_=p.pending,p.pending===p.pending_buf_size)){y=1;break}y=p.gzindex<p.gzhead.name.length?255&p.gzhead.name.charCodeAt(p.gzindex++):0,to(p,y)}while(0!==y);p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),0===y&&(p.gzindex=0,p.status=91)}else p.status=91;if(91===p.status)if(p.gzhead.comment){_=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),md(i),_=p.pending,p.pending===p.pending_buf_size)){y=1;break}y=p.gzindex<p.gzhead.comment.length?255&p.gzhead.comment.charCodeAt(p.gzindex++):0,to(p,y)}while(0!==y);p.gzhead.hcrc&&p.pending>_&&(i.adler=Fa(i.adler,p.pending_buf,p.pending-_,_)),0===y&&(p.status=103)}else p.status=103;if(103===p.status&&(p.gzhead.hcrc?(p.pending+2>p.pending_buf_size&&md(i),p.pending+2<=p.pending_buf_size&&(to(p,255&i.adler),to(p,i.adler>>8&255),i.adler=0,p.status=113)):p.status=113),0!==p.pending){if(md(i),0===i.avail_out)return p.last_flush=-1,0}else if(0===i.avail_in&&b0(l)<=b0(u)&&4!==l)return fd(i,-5);if(666===p.status&&0!==i.avail_in)return fd(i,-5);if(0!==i.avail_in||0!==p.lookahead||0!==l&&666!==p.status){var I=2===p.strategy?function(O,D){for(var B;;){if(0===O.lookahead&&(Lf(O),0===O.lookahead)){if(0===D)return 1;break}if(O.match_length=0,B=oa._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,B&&(zi(O,!1),0===O.strm.avail_out))return 1}return O.insert=0,4===D?(zi(O,!0),0===O.strm.avail_out?3:4):O.last_lit&&(zi(O,!1),0===O.strm.avail_out)?1:2}(p,l):3===p.strategy?function(O,D){for(var B,P,F,Z,ie=O.window;;){if(O.lookahead<=258){if(Lf(O),O.lookahead<=258&&0===D)return 1;if(0===O.lookahead)break}if(O.match_length=0,O.lookahead>=3&&O.strstart>0&&(P=ie[F=O.strstart-1])===ie[++F]&&P===ie[++F]&&P===ie[++F]){Z=O.strstart+258;do{}while(P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&P===ie[++F]&&F<Z);O.match_length=258-(Z-F),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=3?(B=oa._tr_tally(O,1,O.match_length-3),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(B=oa._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),B&&(zi(O,!1),0===O.strm.avail_out))return 1}return O.insert=0,4===D?(zi(O,!0),0===O.strm.avail_out?3:4):O.last_lit&&(zi(O,!1),0===O.strm.avail_out)?1:2}(p,l):D_[p.level].func(p,l);if(3!==I&&4!==I||(p.status=666),1===I||3===I)return 0===i.avail_out&&(p.last_flush=-1),0;if(2===I&&(1===l?oa._tr_align(p):5!==l&&(oa._tr_stored_block(p,0,0,!1),3===l&&(vp(p.head),0===p.lookahead&&(p.strstart=0,p.block_start=0,p.insert=0))),md(i),0===i.avail_out))return p.last_flush=-1,0}return 4!==l?0:p.wrap<=0?1:(2===p.wrap?(to(p,255&i.adler),to(p,i.adler>>8&255),to(p,i.adler>>16&255),to(p,i.adler>>24&255),to(p,255&i.total_in),to(p,i.total_in>>8&255),to(p,i.total_in>>16&255),to(p,i.total_in>>24&255)):(iy(p,i.adler>>>16),iy(p,65535&i.adler)),md(i),p.wrap>0&&(p.wrap=-p.wrap),0!==p.pending?0:1)},Ds.deflateEnd=function(i){var l;return i&&i.state?42!==(l=i.state.status)&&69!==l&&73!==l&&91!==l&&103!==l&&113!==l&&666!==l?fd(i,-2):(i.state=null,113===l?fd(i,-3):0):-2},Ds.deflateSetDictionary=function(i,l){var u,p,_,y,C,I,O,D,B=l.length;if(!i||!i.state||2===(y=(u=i.state).wrap)||1===y&&42!==u.status||u.lookahead)return-2;for(1===y&&(i.adler=ry(i.adler,l,B,0)),u.wrap=0,B>=u.w_size&&(0===y&&(vp(u.head),u.strstart=0,u.block_start=0,u.insert=0),D=new Ba.Buf8(u.w_size),Ba.arraySet(D,l,B-u.w_size,u.w_size,0),l=D,B=u.w_size),C=i.avail_in,I=i.next_in,O=i.input,i.avail_in=B,i.next_in=0,i.input=l,Lf(u);u.lookahead>=3;){p=u.strstart,_=u.lookahead-2;do{u.ins_h=(u.ins_h<<u.hash_shift^u.window[p+3-1])&u.hash_mask,u.prev[p&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=p,p++}while(--_);u.strstart=p,u.lookahead=2,Lf(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,i.next_in=I,i.input=O,i.avail_in=C,u.wrap=y,0},Ds.deflateInfo="pako deflate (from Nodeca project)";var Eh={},S0=vh,YN=!0,C0=!0;try{String.fromCharCode.apply(null,[0])}catch{YN=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{C0=!1}for(var P_=new S0.Buf8(256),Bf=0;Bf<256;Bf++)P_[Bf]=Bf>=252?6:Bf>=248?5:Bf>=240?4:Bf>=224?3:Bf>=192?2:1;function ay(i,l){if(l<65534&&(i.subarray&&C0||!i.subarray&&YN))return String.fromCharCode.apply(null,S0.shrinkBuf(i,l));for(var u="",p=0;p<l;p++)u+=String.fromCharCode(i[p]);return u}P_[254]=P_[254]=1,Eh.string2buf=function(i){var l,u,p,_,y,C=i.length,I=0;for(_=0;_<C;_++)55296==(64512&(u=i.charCodeAt(_)))&&_+1<C&&56320==(64512&(p=i.charCodeAt(_+1)))&&(u=65536+(u-55296<<10)+(p-56320),_++),I+=u<128?1:u<2048?2:u<65536?3:4;for(l=new S0.Buf8(I),y=0,_=0;y<I;_++)55296==(64512&(u=i.charCodeAt(_)))&&_+1<C&&56320==(64512&(p=i.charCodeAt(_+1)))&&(u=65536+(u-55296<<10)+(p-56320),_++),u<128?l[y++]=u:u<2048?(l[y++]=192|u>>>6,l[y++]=128|63&u):u<65536?(l[y++]=224|u>>>12,l[y++]=128|u>>>6&63,l[y++]=128|63&u):(l[y++]=240|u>>>18,l[y++]=128|u>>>12&63,l[y++]=128|u>>>6&63,l[y++]=128|63&u);return l},Eh.buf2binstring=function(i){return ay(i,i.length)},Eh.binstring2buf=function(i){for(var l=new S0.Buf8(i.length),u=0,p=l.length;u<p;u++)l[u]=i.charCodeAt(u);return l},Eh.buf2string=function(i,l){var u,p,_,y,C=l||i.length,I=new Array(2*C);for(p=0,u=0;u<C;)if((_=i[u++])<128)I[p++]=_;else if((y=P_[_])>4)I[p++]=65533,u+=y-1;else{for(_&=2===y?31:3===y?15:7;y>1&&u<C;)_=_<<6|63&i[u++],y--;y>1?I[p++]=65533:_<65536?I[p++]=_:(I[p++]=55296|(_-=65536)>>10&1023,I[p++]=56320|1023&_)}return ay(I,p)},Eh.utf8border=function(i,l){var u;for((l=l||i.length)>i.length&&(l=i.length),u=l-1;u>=0&&128==(192&i[u]);)u--;return u<0||0===u?l:u+P_[i[u]]>l?u:l};var aD=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},cy=Ds,uy=vh,ly=Eh,xw=kw,qN=aD,cD=Object.prototype.toString;function yp(i){if(!(this instanceof yp))return new yp(i);this.options=uy.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},i||{});var l=this.options;l.raw&&l.windowBits>0?l.windowBits=-l.windowBits:l.gzip&&l.windowBits>0&&l.windowBits<16&&(l.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qN,this.strm.avail_out=0;var u=cy.deflateInit2(this.strm,l.level,l.method,l.windowBits,l.memLevel,l.strategy);if(0!==u)throw new Error(xw[u]);if(l.header&&cy.deflateSetHeader(this.strm,l.header),l.dictionary){var p;if(p="string"==typeof l.dictionary?ly.string2buf(l.dictionary):"[object ArrayBuffer]"===cD.call(l.dictionary)?new Uint8Array(l.dictionary):l.dictionary,0!==(u=cy.deflateSetDictionary(this.strm,p)))throw new Error(xw[u]);this._dict_set=!0}}function dy(i,l){var u=new yp(l);if(u.push(i,!0),u.err)throw u.msg||xw[u.err];return u.result}yp.prototype.push=function(i,l){var u,p,_=this.strm,y=this.options.chunkSize;if(this.ended)return!1;p=l===~~l?l:!0===l?4:0,_.input="string"==typeof i?ly.string2buf(i):"[object ArrayBuffer]"===cD.call(i)?new Uint8Array(i):i,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new uy.Buf8(y),_.next_out=0,_.avail_out=y),1!==(u=cy.deflate(_,p))&&0!==u)return this.onEnd(u),this.ended=!0,!1;0!==_.avail_out&&(0!==_.avail_in||4!==p&&2!==p)||this.onData("string"===this.options.to?ly.buf2binstring(uy.shrinkBuf(_.output,_.next_out)):uy.shrinkBuf(_.output,_.next_out))}while((_.avail_in>0||0===_.avail_out)&&1!==u);return 4===p?(u=cy.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,0===u):2!==p||(this.onEnd(0),_.avail_out=0,!0)},yp.prototype.onData=function(i){this.chunks.push(i)},yp.prototype.onEnd=function(i){0===i&&(this.result="string"===this.options.to?this.chunks.join(""):uy.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},ZA.Deflate=yp,ZA.deflate=dy,ZA.deflateRaw=function(i,l){return(l=l||{}).raw=!0,dy(i,l)},ZA.gzip=function(i,l){return(l=l||{}).gzip=!0,dy(i,l)};var N_={},gd={},JN=vh,uD=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Lw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],lD=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Iu=vh,Bw=ba,_d=hi,XN=function(i,l){var u,p,_,y,C,I,O,D,B,P,F,Z,ie,oe,ve,Ae,Te,Be,Q,tt,dt,it,ft,Kt,en;Kt=i.input,_=(p=i.next_in)+(i.avail_in-5),en=i.output,C=(y=i.next_out)-(l-i.avail_out),I=y+(i.avail_out-257),O=(u=i.state).dmax,D=u.wsize,B=u.whave,P=u.wnext,F=u.window,Z=u.hold,ie=u.bits,oe=u.lencode,ve=u.distcode,Ae=(1<<u.lenbits)-1,Te=(1<<u.distbits)-1;e:do{ie<15&&(Z+=Kt[p++]<<ie,Z+=Kt[p++]<<(ie+=8),ie+=8),Be=oe[Z&Ae];t:for(;;){if(Z>>>=Q=Be>>>24,ie-=Q,0==(Q=Be>>>16&255))en[y++]=65535&Be;else{if(!(16&Q)){if(0==(64&Q)){Be=oe[(65535&Be)+(Z&(1<<Q)-1)];continue t}if(32&Q){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}tt=65535&Be,(Q&=15)&&(ie<Q&&(Z+=Kt[p++]<<ie,ie+=8),tt+=Z&(1<<Q)-1,Z>>>=Q,ie-=Q),ie<15&&(Z+=Kt[p++]<<ie,Z+=Kt[p++]<<(ie+=8),ie+=8),Be=ve[Z&Te];n:for(;;){if(Z>>>=Q=Be>>>24,ie-=Q,!(16&(Q=Be>>>16&255))){if(0==(64&Q)){Be=ve[(65535&Be)+(Z&(1<<Q)-1)];continue n}i.msg="invalid distance code",u.mode=30;break e}if(dt=65535&Be,ie<(Q&=15)&&(Z+=Kt[p++]<<ie,(ie+=8)<Q&&(Z+=Kt[p++]<<ie,ie+=8)),(dt+=Z&(1<<Q)-1)>O){i.msg="invalid distance too far back",u.mode=30;break e}if(Z>>>=Q,ie-=Q,dt>(Q=y-C)){if((Q=dt-Q)>B&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(it=0,ft=F,0===P){if(it+=D-Q,Q<tt){tt-=Q;do{en[y++]=F[it++]}while(--Q);it=y-dt,ft=en}}else if(P<Q){if(it+=D+P-Q,(Q-=P)<tt){tt-=Q;do{en[y++]=F[it++]}while(--Q);if(it=0,P<tt){tt-=Q=P;do{en[y++]=F[it++]}while(--Q);it=y-dt,ft=en}}}else if(it+=P-Q,Q<tt){tt-=Q;do{en[y++]=F[it++]}while(--Q);it=y-dt,ft=en}for(;tt>2;)en[y++]=ft[it++],en[y++]=ft[it++],en[y++]=ft[it++],tt-=3;tt&&(en[y++]=ft[it++],tt>1&&(en[y++]=ft[it++]))}else{it=y-dt;do{en[y++]=en[it++],en[y++]=en[it++],en[y++]=en[it++],tt-=3}while(tt>2);tt&&(en[y++]=en[it++],tt>1&&(en[y++]=en[it++]))}break}}break}}while(p<_&&y<I);p-=tt=ie>>3,Z&=(1<<(ie-=tt<<3))-1,i.next_in=p,i.next_out=y,i.avail_in=p<_?_-p+5:5-(p-_),i.avail_out=y<I?I-y+257:257-(y-I),u.hold=Z,u.bits=ie},I0=function(i,l,u,p,_,y,C,I){var O,D,B,P,F,Z,ie,oe,ve,Ae=I.bits,Te=0,Be=0,Q=0,tt=0,dt=0,it=0,ft=0,Kt=0,en=0,zt=0,Ot=null,_n=0,Gn=new JN.Buf16(16),Dt=new JN.Buf16(16),at=null,Ve=0;for(Te=0;Te<=15;Te++)Gn[Te]=0;for(Be=0;Be<p;Be++)Gn[l[u+Be]]++;for(dt=Ae,tt=15;tt>=1&&0===Gn[tt];tt--);if(dt>tt&&(dt=tt),0===tt)return _[y++]=20971520,_[y++]=20971520,I.bits=1,0;for(Q=1;Q<tt&&0===Gn[Q];Q++);for(dt<Q&&(dt=Q),Kt=1,Te=1;Te<=15;Te++)if(Kt<<=1,(Kt-=Gn[Te])<0)return-1;if(Kt>0&&(0===i||1!==tt))return-1;for(Dt[1]=0,Te=1;Te<15;Te++)Dt[Te+1]=Dt[Te]+Gn[Te];for(Be=0;Be<p;Be++)0!==l[u+Be]&&(C[Dt[l[u+Be]]++]=Be);if(0===i?(Ot=at=C,Z=19):1===i?(Ot=uD,_n-=257,at=Lw,Ve-=257,Z=256):(Ot=$N,at=lD,Z=-1),zt=0,Be=0,Te=Q,F=y,it=dt,ft=0,B=-1,P=(en=1<<dt)-1,1===i&&en>852||2===i&&en>592)return 1;for(;;){ie=Te-ft,C[Be]<Z?(oe=0,ve=C[Be]):C[Be]>Z?(oe=at[Ve+C[Be]],ve=Ot[_n+C[Be]]):(oe=96,ve=0),O=1<<Te-ft,Q=D=1<<it;do{_[F+(zt>>ft)+(D-=O)]=ie<<24|oe<<16|ve|0}while(0!==D);for(O=1<<Te-1;zt&O;)O>>=1;if(0!==O?(zt&=O-1,zt+=O):zt=0,Be++,0==--Gn[Te]){if(Te===tt)break;Te=l[u+C[Be]]}if(Te>dt&&(zt&P)!==B){for(0===ft&&(ft=dt),F+=Q,Kt=1<<(it=Te-ft);it+ft<tt&&!((Kt-=Gn[it+ft])<=0);)it++,Kt<<=1;if(en+=1<<it,1===i&&en>852||2===i&&en>592)return 1;_[B=zt&P]=dt<<24|it<<16|F-y|0}}return 0!==zt&&(_[F+zt]=Te-ft<<24|64<<16|0),I.bits=dt,0};function Fw(i){return(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24)}function w0(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Iu.Buf16(320),this.work=new Iu.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function hy(i){var l;return i&&i.state?(i.total_in=i.total_out=(l=i.state).total=0,i.msg="",l.wrap&&(i.adler=1&l.wrap),l.mode=1,l.last=0,l.havedict=0,l.dmax=32768,l.head=null,l.hold=0,l.bits=0,l.lencode=l.lendyn=new Iu.Buf32(852),l.distcode=l.distdyn=new Iu.Buf32(592),l.sane=1,l.back=-1,0):-2}function dD(i){var l;return i&&i.state?((l=i.state).wsize=0,l.whave=0,l.wnext=0,hy(i)):-2}function vF(i,l){var u,p;return i&&i.state?(p=i.state,l<0?(u=0,l=-l):(u=1+(l>>4),l<48&&(l&=15)),l&&(l<8||l>15)?-2:(null!==p.window&&p.wbits!==l&&(p.window=null),p.wrap=u,p.wbits=l,dD(i))):-2}function hD(i,l){var u,p;return i?(p=new w0,i.state=p,p.window=null,0!==(u=vF(i,l))&&(i.state=null),u):-2}var Uw,pD,Vw=!0;function v4(i){if(Vw){var l;for(Uw=new Iu.Buf32(512),pD=new Iu.Buf32(32),l=0;l<144;)i.lens[l++]=8;for(;l<256;)i.lens[l++]=9;for(;l<280;)i.lens[l++]=7;for(;l<288;)i.lens[l++]=8;for(I0(1,i.lens,0,288,Uw,0,i.work,{bits:9}),l=0;l<32;)i.lens[l++]=5;I0(2,i.lens,0,32,pD,0,i.work,{bits:5}),Vw=!1}i.lencode=Uw,i.lenbits=9,i.distcode=pD,i.distbits=5}function vd(i,l,u,p){var _,y=i.state;return null===y.window&&(y.wsize=1<<y.wbits,y.wnext=0,y.whave=0,y.window=new Iu.Buf8(y.wsize)),p>=y.wsize?(Iu.arraySet(y.window,l,u-y.wsize,y.wsize,0),y.wnext=0,y.whave=y.wsize):((_=y.wsize-y.wnext)>p&&(_=p),Iu.arraySet(y.window,l,u-p,_,y.wnext),(p-=_)?(Iu.arraySet(y.window,l,u-p,p,0),y.wnext=p,y.whave=y.wsize):(y.wnext+=_,y.wnext===y.wsize&&(y.wnext=0),y.whave<y.wsize&&(y.whave+=_))),0}gd.inflateReset=dD,gd.inflateReset2=vF,gd.inflateResetKeep=hy,gd.inflateInit=function(i){return hD(i,15)},gd.inflateInit2=hD,gd.inflate=function(i,l){var u,p,_,y,C,I,O,D,B,P,F,Z,ie,oe,ve,Ae,Te,Be,Q,tt,dt,it,ft,Kt,en=0,zt=new Iu.Buf8(4),Ot=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&0!==i.avail_in)return-2;12===(u=i.state).mode&&(u.mode=13),C=i.next_out,_=i.output,y=i.next_in,p=i.input,D=u.hold,B=u.bits,P=I=i.avail_in,F=O=i.avail_out,it=0;e:for(;;)switch(u.mode){case 1:if(0===u.wrap){u.mode=13;break}for(;B<16;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(2&u.wrap&&35615===D){u.check=0,zt[0]=255&D,zt[1]=D>>>8&255,u.check=_d(u.check,zt,2,0),D=0,B=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&D)<<8)+(D>>8))%31){i.msg="incorrect header check",u.mode=30;break}if(8!=(15&D)){i.msg="unknown compression method",u.mode=30;break}if(B-=4,dt=8+(15&(D>>>=4)),0===u.wbits)u.wbits=dt;else if(dt>u.wbits){i.msg="invalid window size",u.mode=30;break}u.dmax=1<<dt,i.adler=u.check=1,u.mode=512&D?10:12,D=0,B=0;break;case 2:for(;B<16;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(u.flags=D,8!=(255&u.flags)){i.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){i.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=D>>8&1),512&u.flags&&(zt[0]=255&D,zt[1]=D>>>8&255,u.check=_d(u.check,zt,2,0)),D=0,B=0,u.mode=3;case 3:for(;B<32;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.head&&(u.head.time=D),512&u.flags&&(zt[0]=255&D,zt[1]=D>>>8&255,zt[2]=D>>>16&255,zt[3]=D>>>24&255,u.check=_d(u.check,zt,4,0)),D=0,B=0,u.mode=4;case 4:for(;B<16;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.head&&(u.head.xflags=255&D,u.head.os=D>>8),512&u.flags&&(zt[0]=255&D,zt[1]=D>>>8&255,u.check=_d(u.check,zt,2,0)),D=0,B=0,u.mode=5;case 5:if(1024&u.flags){for(;B<16;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.length=D,u.head&&(u.head.extra_len=D),512&u.flags&&(zt[0]=255&D,zt[1]=D>>>8&255,u.check=_d(u.check,zt,2,0)),D=0,B=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&((Z=u.length)>I&&(Z=I),Z&&(u.head&&(dt=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),Iu.arraySet(u.head.extra,p,y,Z,dt)),512&u.flags&&(u.check=_d(u.check,p,Z,y)),I-=Z,y+=Z,u.length-=Z),u.length))break e;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(0===I)break e;Z=0;do{dt=p[y+Z++],u.head&&dt&&u.length<65536&&(u.head.name+=String.fromCharCode(dt))}while(dt&&Z<I);if(512&u.flags&&(u.check=_d(u.check,p,Z,y)),I-=Z,y+=Z,dt)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(0===I)break e;Z=0;do{dt=p[y+Z++],u.head&&dt&&u.length<65536&&(u.head.comment+=String.fromCharCode(dt))}while(dt&&Z<I);if(512&u.flags&&(u.check=_d(u.check,p,Z,y)),I-=Z,y+=Z,dt)break e}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;B<16;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(D!==(65535&u.check)){i.msg="header crc mismatch",u.mode=30;break}D=0,B=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),i.adler=u.check=0,u.mode=12;break;case 10:for(;B<32;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}i.adler=u.check=Fw(D),D=0,B=0,u.mode=11;case 11:if(0===u.havedict)return i.next_out=C,i.avail_out=O,i.next_in=y,i.avail_in=I,u.hold=D,u.bits=B,2;i.adler=u.check=1,u.mode=12;case 12:if(5===l||6===l)break e;case 13:if(u.last){D>>>=7&B,B-=7&B,u.mode=27;break}for(;B<3;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}switch(u.last=1&D,B-=1,3&(D>>>=1)){case 0:u.mode=14;break;case 1:if(v4(u),u.mode=20,6===l){D>>>=2,B-=2;break e}break;case 2:u.mode=17;break;case 3:i.msg="invalid block type",u.mode=30}D>>>=2,B-=2;break;case 14:for(D>>>=7&B,B-=7&B;B<32;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if((65535&D)!=(D>>>16^65535)){i.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&D,D=0,B=0,u.mode=15,6===l)break e;case 15:u.mode=16;case 16:if(Z=u.length){if(Z>I&&(Z=I),Z>O&&(Z=O),0===Z)break e;Iu.arraySet(_,p,y,Z,C),I-=Z,y+=Z,O-=Z,C+=Z,u.length-=Z;break}u.mode=12;break;case 17:for(;B<14;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(u.nlen=257+(31&D),B-=5,u.ndist=1+(31&(D>>>=5)),B-=5,u.ncode=4+(15&(D>>>=5)),D>>>=4,B-=4,u.nlen>286||u.ndist>30){i.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;B<3;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.lens[Ot[u.have++]]=7&D,D>>>=3,B-=3}for(;u.have<19;)u.lens[Ot[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,it=I0(0,u.lens,0,19,u.lencode,0,u.work,ft={bits:u.lenbits}),u.lenbits=ft.bits,it){i.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;Ae=(en=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,Te=65535&en,!((ve=en>>>24)<=B);){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(Te<16)D>>>=ve,B-=ve,u.lens[u.have++]=Te;else{if(16===Te){for(Kt=ve+2;B<Kt;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(D>>>=ve,B-=ve,0===u.have){i.msg="invalid bit length repeat",u.mode=30;break}dt=u.lens[u.have-1],Z=3+(3&D),D>>>=2,B-=2}else if(17===Te){for(Kt=ve+3;B<Kt;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}B-=ve,dt=0,Z=3+(7&(D>>>=ve)),D>>>=3,B-=3}else{for(Kt=ve+7;B<Kt;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}B-=ve,dt=0,Z=11+(127&(D>>>=ve)),D>>>=7,B-=7}if(u.have+Z>u.nlen+u.ndist){i.msg="invalid bit length repeat",u.mode=30;break}for(;Z--;)u.lens[u.have++]=dt}}if(30===u.mode)break;if(0===u.lens[256]){i.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,it=I0(1,u.lens,0,u.nlen,u.lencode,0,u.work,ft={bits:u.lenbits}),u.lenbits=ft.bits,it){i.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,it=I0(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,ft={bits:u.distbits}),u.distbits=ft.bits,it){i.msg="invalid distances set",u.mode=30;break}if(u.mode=20,6===l)break e;case 20:u.mode=21;case 21:if(I>=6&&O>=258){i.next_out=C,i.avail_out=O,i.next_in=y,i.avail_in=I,u.hold=D,u.bits=B,XN(i,F),C=i.next_out,_=i.output,O=i.avail_out,y=i.next_in,p=i.input,I=i.avail_in,D=u.hold,B=u.bits,12===u.mode&&(u.back=-1);break}for(u.back=0;Ae=(en=u.lencode[D&(1<<u.lenbits)-1])>>>16&255,Te=65535&en,!((ve=en>>>24)<=B);){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(Ae&&0==(240&Ae)){for(Be=ve,Q=Ae,tt=Te;Ae=(en=u.lencode[tt+((D&(1<<Be+Q)-1)>>Be)])>>>16&255,Te=65535&en,!(Be+(ve=en>>>24)<=B);){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}D>>>=Be,B-=Be,u.back+=Be}if(D>>>=ve,B-=ve,u.back+=ve,u.length=Te,0===Ae){u.mode=26;break}if(32&Ae){u.back=-1,u.mode=12;break}if(64&Ae){i.msg="invalid literal/length code",u.mode=30;break}u.extra=15&Ae,u.mode=22;case 22:if(u.extra){for(Kt=u.extra;B<Kt;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.length+=D&(1<<u.extra)-1,D>>>=u.extra,B-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;Ae=(en=u.distcode[D&(1<<u.distbits)-1])>>>16&255,Te=65535&en,!((ve=en>>>24)<=B);){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(0==(240&Ae)){for(Be=ve,Q=Ae,tt=Te;Ae=(en=u.distcode[tt+((D&(1<<Be+Q)-1)>>Be)])>>>16&255,Te=65535&en,!(Be+(ve=en>>>24)<=B);){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}D>>>=Be,B-=Be,u.back+=Be}if(D>>>=ve,B-=ve,u.back+=ve,64&Ae){i.msg="invalid distance code",u.mode=30;break}u.offset=Te,u.extra=15&Ae,u.mode=24;case 24:if(u.extra){for(Kt=u.extra;B<Kt;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}u.offset+=D&(1<<u.extra)-1,D>>>=u.extra,B-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){i.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(0===O)break e;if(u.offset>(Z=F-O)){if((Z=u.offset-Z)>u.whave&&u.sane){i.msg="invalid distance too far back",u.mode=30;break}ie=Z>u.wnext?u.wsize-(Z-=u.wnext):u.wnext-Z,Z>u.length&&(Z=u.length),oe=u.window}else oe=_,ie=C-u.offset,Z=u.length;Z>O&&(Z=O),O-=Z,u.length-=Z;do{_[C++]=oe[ie++]}while(--Z);0===u.length&&(u.mode=21);break;case 26:if(0===O)break e;_[C++]=u.length,O--,u.mode=21;break;case 27:if(u.wrap){for(;B<32;){if(0===I)break e;I--,D|=p[y++]<<B,B+=8}if(i.total_out+=F-=O,u.total+=F,F&&(i.adler=u.check=u.flags?_d(u.check,_,F,C-F):Bw(u.check,_,F,C-F)),F=O,(u.flags?D:Fw(D))!==u.check){i.msg="incorrect data check",u.mode=30;break}D=0,B=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;B<32;){if(0===I)break e;I--,D+=p[y++]<<B,B+=8}if(D!==(4294967295&u.total)){i.msg="incorrect length check",u.mode=30;break}D=0,B=0}u.mode=29;case 29:it=1;break e;case 30:it=-3;break e;case 31:return-4;default:return-2}return i.next_out=C,i.avail_out=O,i.next_in=y,i.avail_in=I,u.hold=D,u.bits=B,(u.wsize||F!==i.avail_out&&u.mode<30&&(u.mode<27||4!==l))&&vd(i,i.output,i.next_out,F-i.avail_out),F-=i.avail_out,i.total_in+=P-=i.avail_in,i.total_out+=F,u.total+=F,u.wrap&&F&&(i.adler=u.check=u.flags?_d(u.check,_,F,i.next_out-F):Bw(u.check,_,F,i.next_out-F)),i.data_type=u.bits+(u.last?64:0)+(12===u.mode?128:0)+(20===u.mode||15===u.mode?256:0),(0===P&&0===F||4===l)&&0===it&&(it=-5),it},gd.inflateEnd=function(i){if(!i||!i.state)return-2;var l=i.state;return l.window&&(l.window=null),i.state=null,0},gd.inflateGetHeader=function(i,l){var u;return i&&i.state?0==(2&(u=i.state).wrap)?-2:(u.head=l,l.done=!1,0):-2},gd.inflateSetDictionary=function(i,l){var u,p=l.length;return i&&i.state?0!==(u=i.state).wrap&&11!==u.mode?-2:11===u.mode&&Bw(1,l,p,0)!==u.check?-3:vd(i,l,p,p)?(u.mode=31,-4):(u.havedict=1,0):-2},gd.inflateInfo="pako inflate (from Nodeca project)";var jw={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ad=gd,T0=vh,R0=Eh,ks=jw,py=kw,O0=aD,D0=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Qw=Object.prototype.toString;function Ff(i){if(!(this instanceof Ff))return new Ff(i);this.options=T0.assign({chunkSize:16384,windowBits:0,to:""},i||{});var l=this.options;l.raw&&l.windowBits>=0&&l.windowBits<16&&(l.windowBits=-l.windowBits,0===l.windowBits&&(l.windowBits=-15)),!(l.windowBits>=0&&l.windowBits<16)||i&&i.windowBits||(l.windowBits+=32),l.windowBits>15&&l.windowBits<48&&0==(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O0,this.strm.avail_out=0;var u=Ad.inflateInit2(this.strm,l.windowBits);if(u!==ks.Z_OK)throw new Error(py[u]);if(this.header=new D0,Ad.inflateGetHeader(this.strm,this.header),l.dictionary&&("string"==typeof l.dictionary?l.dictionary=R0.string2buf(l.dictionary):"[object ArrayBuffer]"===Qw.call(l.dictionary)&&(l.dictionary=new Uint8Array(l.dictionary)),l.raw&&(u=Ad.inflateSetDictionary(this.strm,l.dictionary))!==ks.Z_OK))throw new Error(py[u])}function fy(i,l){var u=new Ff(l);if(u.push(i,!0),u.err)throw u.msg||py[u.err];return u.result}Ff.prototype.push=function(i,l){var u,p,_,y,C,I=this.strm,O=this.options.chunkSize,D=this.options.dictionary,B=!1;if(this.ended)return!1;p=l===~~l?l:!0===l?ks.Z_FINISH:ks.Z_NO_FLUSH,I.input="string"==typeof i?R0.binstring2buf(i):"[object ArrayBuffer]"===Qw.call(i)?new Uint8Array(i):i,I.next_in=0,I.avail_in=I.input.length;do{if(0===I.avail_out&&(I.output=new T0.Buf8(O),I.next_out=0,I.avail_out=O),(u=Ad.inflate(I,ks.Z_NO_FLUSH))===ks.Z_NEED_DICT&&D&&(u=Ad.inflateSetDictionary(this.strm,D)),u===ks.Z_BUF_ERROR&&!0===B&&(u=ks.Z_OK,B=!1),u!==ks.Z_STREAM_END&&u!==ks.Z_OK)return this.onEnd(u),this.ended=!0,!1;I.next_out&&(0!==I.avail_out&&u!==ks.Z_STREAM_END&&(0!==I.avail_in||p!==ks.Z_FINISH&&p!==ks.Z_SYNC_FLUSH)||("string"===this.options.to?(_=R0.utf8border(I.output,I.next_out),y=I.next_out-_,C=R0.buf2string(I.output,_),I.next_out=y,I.avail_out=O-y,y&&T0.arraySet(I.output,I.output,_,y,0),this.onData(C)):this.onData(T0.shrinkBuf(I.output,I.next_out)))),0===I.avail_in&&0===I.avail_out&&(B=!0)}while((I.avail_in>0||0===I.avail_out)&&u!==ks.Z_STREAM_END);return u===ks.Z_STREAM_END&&(p=ks.Z_FINISH),p===ks.Z_FINISH?(u=Ad.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===ks.Z_OK):p!==ks.Z_SYNC_FLUSH||(this.onEnd(ks.Z_OK),I.avail_out=0,!0)},Ff.prototype.onData=function(i){this.chunks.push(i)},Ff.prototype.onEnd=function(i){i===ks.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):T0.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},N_.Inflate=Ff,N_.inflate=fy,N_.inflateRaw=function(i,l){return(l=l||{}).raw=!0,fy(i,l)},N_.ungzip=fy;var ZN={};(0,vh.assign)(ZN,ZA,N_,jw);var zs=ZN;const{WebclientBreakoutRoomAttendeeStatus:Ai,WebclientBreakoutRoomCommand:fD}=Gi;function bh(i,l){let u=0;for(;u<i.length;u++){const p=i[u],{attendeeGuidList:_}=p;if(null!=_&&_.includes(l))break}return u<i.length?i[u]:void 0}function sl(){Dr.remove(Ai),Dr.remove(fD)}function Ri(){return mo.createAgent().leaveBO(1),_t(Za,{reason:Zs.BackToMainSession}),sl(),[df(hr.Leaving),wo(xo.NormalCase)]}function mD(i,l){return _t(Za,{reason:Zs.JoinBreakoutRoom,roomName:i}),l===hr.InRoom&&mo.createAgent().leaveBO(1),[df(hr.Joining),wo(xo.NormalCase)]}function gD(i){return _t(Za,{reason:Zs.MoveToBreakoutRoom,roomName:i}),mo.createAgent().leaveBO(1),[df(hr.Joining),wo(xo.NormalCase)]}function Hw(i){const u=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?hr.InRoom:hr.Invited;return Dr.set(Ai,JSON.stringify({status:u,boId:i.boId}),wi.SessionStorage),UC({status:u,boId:i.boId,name:i.name,boStatus:i.boStatus})}function Gw(i){const{breakoutRoom:{isUserRoleUpdated:l,currentRoom:{boConfId:u}}}=i.value,p=Kr(i.value);return p&&(!u||u&&l)?rr(p.isHost):(u?Ts(Kh,1):Ts(am,2).pipe(function(_){return _.lift(new CL(1))})).pipe(Ht(xs),Un(i),gt(_=>{let[,y]=_;return Kr(y).isHost}))}function k0(i){return pg({boIdList:Ts(I2).pipe(UV((l,u)=>[...l,u],[]),is(i))}).pipe($1(1e4))}const Ll=mo.createAgent(),Ww=["userRole","bCoHost","bCCEditor","bHold"];var _D=Object.freeze({__proto__:null,handleBreakoutRoomOptionEpic:(i,l)=>i.pipe(Zr(`${dv}`),oo(u=>{const{breakoutRoom:p,meeting:{meetingOptions:_}}=l.value,{payload:{hugeBO:y,elapsed:C}}=u,I=[];return p&&(_&&(I.push(QC(y&&!0===_.isBO100Enabled)),I.push(Wv({isEnableBreakoutRoom:_.isEnableBreakoutRoom,isEnableBOBroadcast:_.isEnableBOBroadcast}))),p.currentRoom.boConfId&&I.push(yg()),void 0!==C&&I.push(tR(C))),Dn(I)})),addRoomEpic:i=>Zn(i,4174).pipe(ir(l=>{_t(I2,l.payload.body.bid)}),Gr(qt)),handleBoAttributeIndicationEpic:(i,l)=>Bs(i,7950).pipe(Un(l),oo(u=>{let[p,_]=u;const{payload:{body:{proto:y}}}=p,{breakoutRoom:{isHugeBO:C,currentRoom:{status:I,boId:O}},meeting:{userGUID:D}}=_;let B=y;C&&(B=zs.ungzip(Cs(y),{to:"string"}));const F=[];let Z;try{const ie=JSON.parse(Fp(B)),{ControlStatus:oe,NameIndex:ve,IsAutoJoinEnabled:Ae,IsBackToMainSessionEnabled:Te,IsTimerEnabled:Be,TimerDuration:Q,IsTimerAutoEndEnabled:tt,WaitSeconds:dt,StartTimeOnMMR:it,ItemList:ft}=ie,Kt={isAutoJoinRoom:Ae,isBackToMainSessionEnabled:Te,isTimerEnabled:Be,timerDuration:Q,isTimerAutoEnabled:tt,waitSeconds:dt};F.push(nR(Kt)),F.push(nB(it)),F.push(Gv(ve)),F.push(rR(oe));const en=ft&&ft.map(zt=>({boId:zt.BID,name:zt.MeetingTitle,boStatus:zt.Status,hostId:zt.HostID,attendeeGuidList:zt.ParticipantList||[]}))||[];switch(F.push(ic(en)),_t(Dv,{controlStatus:oe,roomList:en}),oe){case Qr.InProgress:if(I!==hr.InRoom&&I!==hr.Joining){const zt=function(Ot,_n){const{meeting:{isHost:Gn,userGUID:Dt}}=_n.value,at=Dr.get(Ai),Ve=[];if(at)try{const{status:nt,boId:Tt}=JSON.parse(at);if(nt===hr.Invited)if(Gn)sl();else{const ht=bh(Ot,Dt);ht&&(Ve.push(Hw(ht)),_t(Il,{roomId:ht.boId,name:ht.name}))}else if(nt===hr.InRoom){let ht;if(ht=Gn?Ot.find(qe=>qe.boId===Tt):bh(Ot,Dt),ht){Ve.push(Hw(ht));const qe=ht.boId;Jv(_n).subscribe(()=>{mo.createAgent().joinBO(qe)})}sl()}}catch(nt){console.error(nt)}return Ve}(en,l);if(0===zt.length){const Ot=bh(en,D);Ot&&F.push(Hw(Ot))}else F.push(...zt)}else if(I===hr.InRoom&&p.type===`${_l}`){const zt=bh(en,D);zt&&Gw(l).subscribe(Ot=>{O===zt.boId||Ot||Ll.joinBO(zt.boId)})}Kt.isTimerEnabled&&Kt.timerDuration>0&&(Ot=Kt.timerDuration,_n=it,Z=Gw(zt=l).pipe(Un(zt),oo(Gn=>{let[Dt,at]=Gn;const{breakoutRoom:{currentRoom:{status:Ve},meetingElapsedTime:nt},meeting:{joinMeetingTimeStamp:Tt}}=at,ht=Tt-1e3*nt+1e3*_n+1e3*Ot;if(performance.now()<ht){if(Dt)return fg(1e3).pipe(gt(()=>Math.floor((ht-performance.now())/1e3)),Un(zt),Fd(qe=>{let[Yt,Tn]=qe;const{breakoutRoom:{controlStatus:Yn,currentRoom:{status:wt}},socket:{zoomSocketStatus:Sa},meeting:{isHost:Wn}}=Tn;return Yt>=0&&Wn&&Yn===Qr.InProgress&&(wt===hr.InRoom||wt===hr.MainSession||wt===hr.Initial)&&Sa===ao.Connected}),ir(qe=>{let[Yt]=qe;_t(du,{countdown:Yt})}),En(qe=>{let[Yt]=qe;return 0===Yt}),ir(qe=>{let[,Yt]=qe;const{breakoutRoom:{options:Tn}}=Yt;Tn.isTimerAutoEnabled?mo.createAgent().stopBO(Qr.Closing):_t(Gu)}),Gr(qt));if(Ve===hr.InRoom)return fg(1e3).pipe(gt(()=>Math.floor((ht-performance.now())/1e3)),Un(zt),Fd(qe=>{let[Yt,Tn]=qe;const{breakoutRoom:{currentRoom:{status:Yn}},meeting:{isHost:wt},socket:{zoomSocketStatus:Sa}}=Tn;return Yt>=0&&Yn===hr.InRoom&&!wt&&Sa===ao.Connected}),ir(qe=>{let[Yt]=qe;_t(du,{countdown:Yt})}),Gr(qt))}return qt})));break;case Qr.Closing:Z=Gw(l).pipe(En(zt=>zt),zn(()=>{const zt=[],{breakoutRoom:{closingRoomTime:Ot,currentRoom:{status:_n}},participants:{attendeesList:Gn}}=_;let Dt=Kt.waitSeconds;if(0!==Ot&&Kt.waitSeconds>0){const at=Math.floor((performance.now()-Ot)/1e3);Dt=Math.max(Kt.waitSeconds-at,0)}if(0===Dt)return Ll.stopBO(Qr.Closed),qt;{if(_n!==hr.InRoom&&Gn.length>1&&Gn.every(Ve=>!Ve.bid))return Ll.stopBO(Qr.Closed),qt;Ot||zt.push(jC(performance.now()));const at=performance.now()+1e3*Dt;return bs(Dn(zt),fg(1e3).pipe(gt(()=>Math.floor((at-performance.now())/1e3)),Un(l),Fd(Ve=>{let[nt,Tt]=Ve;const{breakoutRoom:{controlStatus:ht},meeting:{isHost:qe},socket:{zoomSocketStatus:Yt}}=Tt;return nt>=0&&ht===Qr.Closing&&Yt===ao.Connected&&qe}),ir(Ve=>{let[nt]=Ve;nt>=0&&_t(RT,{countdown:nt})}),En(Ve=>{let[nt]=Ve;return 0===nt}),ir(()=>{Ll.stopBO(Qr.Closed)}),Gr(qt)))}}));break;case Qr.Closed:F.push(jC(0)),I===hr.Leaving?F.push(df(hr.MainSession)):I===hr.Invited?F.push(df(hr.Initial)):I!==hr.InRoom&&I!==hr.Joining||F.push(...Ri()),sl()}}catch(ie){console.error(ie)}var zt,Ot,_n;return Z?bs(Dn(F),Z):Dn(F)})),handleBoJoinResponseEpic:(i,l)=>Bs(i,4194).pipe(Un(l),oo(u=>{let[p,_]=u;const{payload:{body:{bid:y,botoken:C,confID:I}}}=p,{meeting:{isHost:O},breakoutRoom:{rooms:D,currentRoom:{status:B}}}=_,P=[],F=D.find(Z=>Z.boId===y);return F&&(P.push(Hw(F,O)),P.push(ZE(I)),P.push(iR(C)),O||B!==hr.InRoom?P.push(...mD(F.name,B)):P.push(...gD(F.name))),_t(fC,{boId:y}),Dn(P)})),handleBoCommandIndicationEpic:(i,l)=>i.pipe(Zr(`${rd}`,`${_l}`),En(u=>7949===u.payload.evt),Un(l),zn(u=>{let[p,_]=u;const{payload:{body:y}}=p,{meeting:{userGUID:C},breakoutRoom:{rooms:I,options:{isAutoJoinRoom:O},currentRoom:{status:D}}}=_,{commandType:B}=y,P=[];let F;switch(B){case nf.Join:{const{targetBID:ie,botoken:oe,confID:ve}=y,Ae=bh(I,C);Ae&&Ae.boId===ie&&(P.push(ZE(ve)),P.push(iR(oe)),O?P.push(...mD(Ae.name)):(Dr.set(Gi.WebclientBreakoutRoomCommand,B,wi.SessionStorage),_t(Il,{roomId:ie,name:Ae.name})));break}case nf.Switch:{const{targetBID:ie,botoken:oe,confID:ve}=y,Ae=bh(I,C);Ae&&Ae.boId===ie&&(P.push(UC({boId:Ae.boId,boToken:oe,boConfId:ve,name:Ae.name})),D===hr.Invited?(Dr.set(Gi.WebclientBreakoutRoomCommand,B,wi.SessionStorage),O?P.push(...mD(Ae.name)):_t(Il,{roomId:ie,name:Ae.name})):P.push(...gD(Ae.name)));break}case nf.Leave:{const{waitTime:ie}=y;if((Z=D)!==hr.InRoom&&Z!==hr.Joining&&Z!==hr.Leaving)P.push(UC({boId:"",boToken:"",boConfId:"",status:hr.Initial}));else{const oe=Number(ie);if(oe>0){const ve=performance.now()+1e3*oe;F=fg(1e3).pipe(gt(()=>Math.floor((ve-performance.now())/1e3)),Un(l),Fd(Ae=>{let[Te,Be]=Ae;const{breakoutRoom:{controlStatus:Q,currentRoom:{status:tt}},meeting:{isHost:dt},socket:{zoomSocketStatus:it}}=Be;return Te>=0&&it===ao.Connected&&Q===Qr.Closing&&tt===hr.InRoom&&!dt}),ir(Ae=>{let[Te]=Ae;Te>=0&&_t(RT,{countdown:Te})}),Gr(qt))}else P.push(...Ri());sl()}break}case nf.Broadcast:{const{textContent:ie}=y;if(ie){const{meeting:{encType:oe},participants:{attendeesList:ve},breakoutRoom:{mainSessionAttendeeList:Ae}}=_;let Te="";if(oe===Rg.AES_GCM){const Be=ve.concat(Ae).find(Q=>Ws(Q.userRole));Be&&(Te=Be.zoomID)}F=Dn(ju.beginDecrypt({decryptedText:ie,type:ts.BO_BROADCAST,zoomId:Te}).then(Be=>{let{message:Q}=Be;return _t(Wh,{message:Q}),rB(Q)}))}break}case nf.HelpReq:{const{requestID:ie}=y,{breakoutRoom:{mainSessionAttendeeList:oe,rooms:ve,currentRoom:{boId:Ae},hostReplyToQuestionerType:Te,hostReplyToRequestId:Be},participants:{attendeesList:Q}}=_;if(ie){if(D===hr.InRoom){const tt=oe.find(dt=>dt.userId===ie);if(tt&&tt.bid===Ae){Ll.askForHelpResultBO(ie,Y.AskHostHelpResponse.AlreadyInRoom);break}}if(Te===Y.AskHostHelpResponse.Received&&Be!==ie)Ll.askForHelpResultBO(ie,Y.AskHostHelpResponse.Busy);else{Ll.askForHelpResultBO(ie,Y.AskHostHelpResponse.Received),P.push(oR(Y.AskHostHelpResponse.Received),sR(ie));const tt=(D===hr.InRoom?oe:Q).find(dt=>dt.userId===ie);if(tt){const dt=tt.bid,it=ve.find(ft=>ft.boId===dt);it&&_t(pC,{userId:ie,displayName:tt.displayName,roomName:it.name,roomId:it.boId})}}}break}case nf.HelpRes:{const{helpResult:ie}=y;_t(ME,{result:Number(ie)});break}}var Z;return F?bs(Dn(P),F):Dn(P)})),handleMainSessionJoinResponseEpic:(i,l)=>Bp(i,4098).pipe(Un(l),oo(u=>{let[p,_]=u;const{payload:{body:{res:y,elapsed:C}}}=p,I=[];return y===id.CONF_FAIL_MEETING_HAS_CLOSED||y===id.CONF_FAIL_HAS_BEEN_REMOVED?(sl(),I.push(...ff(_,!1))):y===id.CONF_SUCCESS&&(I.push(tR(C)),I.push(df(hr.InRoom)),Dr.set(Gi.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:hr.InRoom,boId:_.breakoutRoom.currentRoom.boId}),wi.SessionStorage)),Dn(I)})),handleMainSessionRosterUpdateResponse:(i,l)=>Bp(i,Do).pipe(gt(u=>RA(u.payload.body)),Un(l),zn(u=>{let[p,_]=u;const y=[aR(p)],{participants:{attendeesList:C},breakoutRoom:{mainSessionAttendeeList:I,isUserRoleUpdated:O},meeting:{userId:D}}=_;let B=[];return["add","update"].forEach(P=>p[P]&&B.push(...p[P])),B=B.filter(P=>Ww.some(F=>void 0!==P[F])).map(P=>{const F=I.find(Z=>Z.userId===P.userId);if(F){const Z=C.find(ie=>ie.zoomID===F.zoomID);if(Z)return void 0===P.userRole||O||Z.userId!==D||(y.push(eb(!0)),_t(Kh,P)),void 0!==P.bCCEditor&&y.push(ZT({editorId:P.bCCEditor?Z.userId:"",isEditor:!!P.bCCEditor,editorZoomId:P.bCCEditor?Z.zoomID:""})),delete P.bRaiseHand,delete P.bCapsPinMultiVideo,$t($t({},P),{},{userId:Z.userId})}return null}).filter(P=>!!P),B.length>0&&(_t(ka,B),y.push(Bg({update:B}))),_t(mC),Dn(y)})),handleMainSessionMeetingAttributeEpic:i=>Bp(i,Sc).pipe(En(l=>{const{payload:{body:u}}=l;return void 0!==u?.bAllowAttendeeRename||void 0!==u?.chatPriviledge||void 0!==u?.lockShare}),gt(l=>{const{payload:{body:u}}=l;return void 0!==u.bAllowAttendeeRename?NS(l.payload.body):void 0!==u.chatPriviledge?BC(u.chatPriviledge):void 0!==u.lockShare?qh(u.lockShare):void 0})),handleClosingRoomAttendeeUpdateEpic:(i,l)=>Zn(i,Do).pipe(Un(l),En(u=>{let[,p]=u;const{meeting:{isHost:_},breakoutRoom:{controlStatus:y,currentRoom:{status:C}}}=p;return _&&y===Qr.Closing&&C!==hr.InRoom}),Ht(xs),ir(()=>{const{participants:{attendeesList:u}}=l.value;u.every(p=>!p.bid)&&u.length>1&&Ll.stopBO(Qr.Closed)}),Gr(qt)),handlePreAssignedRoomRespEpic:(i,l)=>Zn(i,4214).pipe(Un(l),oo(u=>{let[p,_]=u;const{payload:{body:{proto:y}}}=p,{breakoutRoom:{rooms:C,isHugeBO:I}}=_;try{const O=JSON.parse(Fp(y)),D=[];if(O&&O.PreAssignBoList&&Array.isArray(O.PreAssignBoList)){const B=O.PreAssignBoList.map(F=>({name:F.BoName,emails:F.email}));if(D.push(hf(B)),C.length+B.length<(I?100:50)){const F=B.map(Z=>Z.name);return Ll.batchCreateBOToken(F),bs(Dn(D),k0(F.length).pipe(Un(l),zn(Z=>{let[{boIdList:ie},oe]=Z;const ve=Ks(oe),Ae=B.map((Be,Q)=>{const{emails:tt,name:dt}=Be;let it=[];return tt&&Array.isArray(tt)&&(it=tt.map(ft=>ve.filter(Kt=>Kt.userEmail===ft).map(Kt=>Kt.userGUID)).reduce((ft,Kt)=>[...ft,...Kt],[])),{boId:ie[Q],name:dt,attendeeGuidList:it}}),Te=Ae.map((Be,Q)=>({roomId:Be.boId,name:Be.name,emails:B[Q].emails}));return _t(xE,{rooms:Te}),Dn([ic(Ae),hf(Te)])})))}return Dn(D)}}catch{console.error("pre assign proto is not valid")}return qt})),handlePreAssignedUserJoinMeetingEpic:(i,l)=>Bs(i,Do).pipe(Un(l),En(u=>{let[p,_]=u;const{meeting:{isHost:y,meetingStatus:C,meetingOptions:I},breakoutRoom:{controlStatus:O}}=_,{payload:{body:D}}=p;return C===Is.Joined&&I?.isAllowBreakoutRoomPreAssign&&y&&(O===Qr.NotStarted||O===Qr.InProgress)&&Array.isArray(D.add)}),zn(u=>{let[p,_]=u;const{breakoutRoom:{controlStatus:y,rooms:C,preAssignedRooms:I,currentRoom:{status:O}},participants:{failoverAttendeesList:D}}=_,B=I?.filter(Z=>C.findIndex(ie=>ie.boId===Z.roomId)>-1),{payload:{body:{add:P}}}=p,F=[];return B.length>0&&P.filter(Z=>Z.userEmail&&Z.userGUID).filter(Z=>-1===D.findIndex(ie=>ie.zoomID===Z.zoomID)).forEach(Z=>{if(!bh(C,Z.userGUID))for(let ie=0;ie<B?.length;ie++){const oe=B[ie];if(oe.emails.includes(Z.userEmail)){if(y===Qr.NotStarted){const ve=Et(C,Ae=>{Ae.find(Be=>Be.boId===oe.roomId)?.attendeeGuidList.push(Z.userGUID)});F.push(ic(ve))}else y===Qr.InProgress&&(O===hr.InRoom&&p.type===`${_l}`?Ll.assignToBO(Z.id,String(oe.roomId)):O!==hr.Initial&&O!==hr.MainSession||Ll.assignToBO(Z.id,String(oe.roomId)));break}}}),Dn(F)})),handleInconsistentPropertiesInBOUserEpic:(i,l)=>Zn(i,Do).pipe(En(u=>{const{breakoutRoom:{mainSessionAttendeeList:p}}=l.value,{payload:{body:_}}=u;return p.length>0&&(void 0!==_.add||void 0!==_.update)}),Ht(fl),gt(u=>RA(u.payload.body)),zn(u=>{const{breakoutRoom:{mainSessionAttendeeList:p,isUserRoleUpdated:_},participants:{attendeesList:y}}=l.value;let C=[];const I=[];["add","update"].forEach(B=>u[B]&&C.push(...u[B]));const O=[...Ww,"isHost"];C=C.filter(B=>O.some(P=>void 0!==B[P]));const D=C.filter(B=>void 0!==B.zoomID);return C=C.map(B=>{var P,F,Z,ie;const oe=null!==(P=null!==(F=B.zoomID)&&void 0!==F?F:null===(Z=D.find(ve=>ve.userId===B.userId))||void 0===Z?void 0:Z.zoomID)&&void 0!==P?P:null===(ie=y.find(ve=>ve.userId===B.userId))||void 0===ie?void 0:ie.zoomID;if(oe){const ve=p.find(Ae=>Ae.zoomID===oe);if(ve)return _||(I.push(eb(!0)),_t(Kh,ve)),Object.keys(B).filter(Ae=>Object.prototype.hasOwnProperty.call(B,Ae)).filter(Ae=>O.includes(Ae)).reduce((Ae,Te)=>(void 0===ve[Te]&&"bCoHost"!==Te||Object.assign(Ae,{[Te]:"boolean"==typeof B[Te]?!!ve[Te]:ve[Te]}),Ae),{userId:B.userId})}}).filter(Boolean),C.length>0&&(_t(ka,C),I.push(Bg({update:C}))),Dn(I)}))});const Bl=mo.createAgent();var ps=Object.freeze({__proto__:null,handleMainSessionReceivingSharingEpic:(i,l)=>Bp(i,Do).pipe(En(u=>{var p;const{payload:{body:_}}=u;return null==_||null===(p=_.update)||void 0===p?void 0:p.some(y=>void 0!==y.bShareToBORooms||void 0!==y.bShareOn)}),Un(l),gt(u=>{let[p,_]=u;const{payload:{body:{update:y}}}=p,{breakoutRoom:{mainSessionAttendeeList:C}}=_,I=y.filter(B=>B.bShareOn&&B.bShareToBORooms),O=y.filter(B=>!B.bShareOn||!B.bShareToBORooms),D=C.filter(B=>B.sharerOn&&B.bShareToBORooms);return I.length>0&&I.forEach(B=>{-1===D.findIndex(P=>P.userId===B.id)&&_t(IT,$t($t({},B),{},{isFromMainSession:!0}))}),O.length>0&&O.forEach(B=>{_t(Lg,$t($t({},B),{},{isFromMainSession:!0}))}),y.map(B=>{if(B.bShareOn&&B.bShareToBORooms){if(0===C.filter(P=>P.sharerOn&&P.bShareToBORooms&&P.userId!==B.id).length)return{activeNodeID:B.id,bStatus:1,ssrc:B.shareSsrc};{const P=C.find(F=>F.userId===B.id);if(null!=P&&P.isHost)return{activeNodeID:B.id,bStatus:1,ssrc:B.shareSsrc}}}else if(!B.bShareOn||!B.bShareToBORooms){const P=C.filter(F=>F.bShareToBORooms&&F.sharerOn);if(1===P.length&&P[0].userId===B.id)return{activeNodeID:B.id,bStatus:0,ssrc:0};{const F=P.filter(ie=>ie.userId!==B.id),Z=F.find(ie=>ie.isHost);if(Z)return{activeNodeID:Z.userId,bStatus:1,ssrc:Z.shareSsrc};{const ie=F[0];if(ie)return{activeNodeID:ie.userId,bStatus:1,ssrc:ie.shareSsrc}}}}}).filter(Boolean)}),zn(u=>{const{share:{status:p},meeting:{userId:_}}=l.value,y=Mi.getInstance(),C=[];return u.map(I=>{const{activeNodeID:O,bStatus:D,ssrc:B}=I,P=1===D;C.push(kC(P)),P&&p!==Y.ShareStatus.End&&(Bl.stopSharing(_),y.stopDesktopSharing(),C.push(eh(Y.ShareStatus.End)),_t(Hu));let F={activeNodeID:O,bStatus:D,ssrc:B,fromMainSession:!0};if(!P){const{participants:{attendeesList:Z}}=l.value,ie=Z.filter(oe=>oe.sharerOn);if(ie.length>0){const oe=ie[0];F={activeNodeID:oe.userId,bStatus:1,ssrc:oe.shareSsrc||0}}}C.push(rd({evt:20225,body:F}))}),Dn(C)})),handleMainSessionCreateExtraChannelEpic:(i,l)=>Bp(i,4098).pipe(oo(u=>{const{payload:{body:{userID:p,confID:_}}}=u;return bs(...["sharing","audio"].map(y=>{return O=l,D=p,B=_,Bp(i,"audio"===(C=y)?jp:US).pipe(is(1),ir(P=>{const{payload:{body:{encryptKey:F,additionalType:Z}}}=P,{media:{sharingDecodeStatus:ie,audioDecodeStatus:oe},meeting:{svcUrl:ve,meetingNumber:Ae,conId:Te,zoomId:Be,meetingId:Q}}=O.value;qu(C,"success","audio"===C?oe:ie).subscribe(tt=>{let[,dt]=tt;const it=Mi.getInstance();if(dt){it.createMainSessionChannel(C,`wss://${ve}/wc/media/${Ae}?type=${"audio"===C?"ma":"ms"}&cid=${Te}&mode=1`),it.updateMediaParams({iVType:"audio"===C?ga.AUDIO_DECODE:ga.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:D,sn:Cs(Be),confId:B,encryptType:Z,encryptKey:Cs(F),meetingId:Q,meetingNumber:Ae}});const{breakoutRoom:{mainSessionAttendeeList:Kt}}=O.value;if(Kt?.length>0){const en=Kt.map(zt=>({userid:zt.userId,sn:zt.zoomID&&Cs(zt.zoomID)}));it.updateUserMediaSN({added:en,isFromMainSession:!0,iVType:"audio"===C?ga.AUDIO_DECODE:ga.SHARING_DECODE})}}})}),Gr(qt));var C,O,D,B}))}))});const Dc=Us([i=>{let{breakoutRoom:{controlStatus:l}}=i;return l},i=>{let{breakoutRoom:{currentRoom:{status:l}}}=i;return l},i=>{let{breakoutRoom:{currentRoom:{boId:l}}}=i;return l}],(i,l,u)=>!(i!==Qr.InProgress&&i!==Qr.Closing||l!==hr.InRoom&&l!==hr.TimeUp||!u)),Kw=Us([i=>{let{breakoutRoom:{rooms:l}}=i;return l},UE,i=>{let{meeting:{zoomId:l}}=i;return l},i=>{let{breakoutRoom:{mainSessionAttendeeList:l}}=i;return l},Dc,i=>{let{breakoutRoom:{isHugeBO:l}}=i;return l}],(i,l,u,p,_,y)=>{const C=i.reduce((I,O)=>{const{attendeeGuidList:D}=O;return I.concat(D)},[]);return(_?p:l).filter(I=>{return!(I.bHold||I.isHost||I.zoomID===u||I.bid||C.includes(I.userGUID)||y&&(O=I.caps,4!=(4&O)));var O})});var Ti;const Fl=mo.createAgent();let eM=(kn((Ti=class extends mp{createRooms(i,l){const u=this[gr](),p=this[zc],{breakoutRoom:{isHugeBO:_,sequenceId:y,rooms:C,controlStatus:I,isEnableBreakoutRoom:O}}=u;if(!O)return Promise.reject({type:Pn,reason:"Breakout room feature is not enabled."});if(I===Qr.InProgress||I===Qr.Closing)return Promise.resolve({type:Pn,reason:"breakout room has started!"});let D;return D="string"==typeof i?[i]:"number"==typeof i?Array.from({length:i}).map((P,F)=>`Subsession ${F+y}`):i,D.length<1||C.length+D.length>(_?100:50)?Promise.reject({type:Ir,reason:"exceed maximum size"}):(Fl.batchCreateBOToken(D),new Promise((P,F)=>{k0(D.length).subscribe(Z=>{let{boIdList:ie}=Z,oe=ie.map((Ae,Te)=>({boId:Ae,name:D[Te]}));if(l===Am.Automatically){const Ae=Kw(u),Te=oe.length,Be=Ae.length;oe=oe.map((Q,tt)=>{const dt=[];let it=tt;for(;it<Be;)dt.push(Ae[it]),it+=Te;return $t($t({},Q),{},{attendeeList:dt})})}const ve=oe.map(Ae=>{let{boId:Te,name:Be,attendeeList:Q}=Ae;return{boId:Te,name:Be,attendeeGuidList:Q&&Q.map(tt=>tt.userGUID)}});if(p(eR(ve)),p(Cm(l)),p(Gv(y+oe.length)),l===Am.Automatically){const Ae=oe.map(Te=>({roomId:Te.boId,name:Te.name,attendeeList:Te.attendeeList.map(Be=>({userId:Be.userId,avatar:Be.avatar,displayName:Be.displayName}))}));P(Ae)}else P(oe.map(Ae=>({roomId:Ae.boId,name:Ae.name,attendeeList:[]})))},()=>{F({type:Cl})})}))}openRooms(i,l){const u=this[gr](),p={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:_,rooms:y,sequenceId:C,isHugeBO:I}}=u;if(_===Qr.InProgress||_===Qr.Closing)return Promise.resolve({type:Pn,reason:"breakout room has started!"});if(i.some(ie=>-1===y.findIndex(oe=>oe.boId===ie.roomId)))return Promise.reject({type:Ir,reason:"roomId is wrong"});const O=Ks(u);if(i.reduce((ie,oe)=>ie.concat(oe.attendeeList),[]).some(ie=>-1===O.findIndex(oe=>oe.userId===ie.userId)))return Promise.reject({type:Ir,reason:"bad user"});const D=i.map(ie=>{const{attendeeList:oe}=ie,ve=oe.map(Ae=>O.find(Be=>Be.userId===Ae.userId)?.userGUID);return{BID:ie.roomId,MeetingTitle:ie.name,MeetingToken:void 0,Status:yC.Started,HostID:"",ParticipantList:ve}}),B=l?$t($t({},p),l):p;let F=OL(JSON.stringify({ControlStatus:Qr.InProgress,NameIndex:C,IsAutoJoinEnabled:+B.isAutoJoinRoom,IsBackToMainSessionEnabled:+B.isBackToMainSessionEnabled,IsTimerEnabled:+B.isTimerEnabled,TimerDuration:B.timerDuration,IsTimerAutoEndEnabled:+B.isTimerAutoEnabled,WaitSeconds:B.waitSeconds<0?0:B.waitSeconds,StartTimeOnMMR:void 0,ItemList:D}));return I&&(F=TS.exports.Base64.fromUint8Array(zs.gzip(F))),Fl.startBO(F),_i(Dv,ie=>ie.controlStatus===Qr.InProgress)}joinRoom(i){const l=this[gr](),u=Kr(l),{breakoutRoom:{controlStatus:p,rooms:_,mainSessionAttendeeList:y,currentRoom:{status:C,boId:I}},meeting:{userGUID:O}}=l;if(p!==Qr.InProgress)return Promise.reject({type:Jd,reason:"breakout room is not started"});if(null!=u&&u.isHost){const D=_.find(B=>B.boId===i);if(!D)return Promise.reject({type:Ir,reason:"room id is not correct"});Fl.joinBO(D.boId)}else if(null!=u&&u.bCoHost&&C===hr.InRoom){if(!_.find(D=>D.boId===i))return Promise.reject({type:Ir,reason:"room id is not correct"});{const D=y.find(B=>B.isHost);D&&Fl.wantJoinBO(D?.userId,i)}}else{if(C===hr.InRoom&&I===i)return Promise.reject({type:Pn,reason:"You are in room"});{const D=bh(_,O);if(!D||D.boId!==i)return Promise.reject({type:Ir,reason:"room id is not correct"});Fl.joinBO(D.boId)}}return _i(fC,D=>D.boId===i)}leaveRoom(){const i=this[gr](),l=this[zc],{breakoutRoom:{controlStatus:u,options:p,currentRoom:{status:_}}}=i;if(u!==Qr.InProgress&&u!==Qr.Closing||_!==hr.InRoom)return Promise.reject({type:Pn});{const y=Wu(i);if(!p.isBackToMainSessionEnabled&&!y)return Promise.reject({type:_a,reason:"can not return main session during the breakout room"});Ri().forEach(C=>l(C))}return Promise.resolve("")}askForHelp(){const i=this[gr](),{breakoutRoom:{controlStatus:l,mainSessionAttendeeList:u,currentRoom:{status:p}},participants:{attendeesList:_}}=i,y=Wu(i);if(l!==Qr.InProgress||p!==hr.InRoom)return Promise.reject({type:Pn,reason:"you are not in breakout room"});if(y)return Promise.reject({type:Pn,reason:"host or co-host can not ask for help"});{const C=u.find(I=>I.isHost);if(C){if(_.findIndex(I=>I.zoomID===C.zoomID)>-1)return Promise.reject({type:Pn,reason:"host is in room"});Fl.askForHelpBO(C.userId)}}return _i(ME,C=>C.result===Y.AskHostHelpResponse.Received)}postponeHelping(i){const l=this[gr](),u=this[zc],{breakoutRoom:{mainSessionAttendeeList:p,currentRoom:{status:_}},participants:{attendeesList:y}}=l;let C=y;return _===hr.InRoom&&(C=p),C.findIndex(I=>I.userId===i)>-1?(Fl.askForHelpResultBO(i,Y.AskHostHelpResponse.Ignore),u(oR(Y.AskHostHelpResponse.Ignore)),Promise.resolve("")):Promise.reject({type:Ir,reason:"user id is not correct"})}broadcast(i){const{breakoutRoom:{isEnableBOBroadcast:l}}=this[gr]();return l?i?ju.beginEncrypt({text:i,type:ts.BO_BROADCAST}).then(u=>(Fl.broadcastBO(u),Promise.resolve(""))):Promise.reject({type:Ir,reason:"content empty"}):Promise.reject({type:Pn,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(i,l){const u=this[gr](),{breakoutRoom:{rooms:p}}=u,_=Kw(u).find(y=>y.userId===i);return _&&p.findIndex(y=>y.boId===l)>-1?(Fl.assignToBO(i,l),_i(Dv,y=>{const{controlStatus:C,roomList:I}=y,O=I.find(D=>D.boId===l);return C===Qr.InProgress&&O&&O.attendeeGuidList.includes(_.userGUID)})):Promise.reject({type:Ir,reason:""})}moveUserToRoom(i,l){const u=this[gr](),{breakoutRoom:{rooms:p,mainSessionAttendeeList:_},participants:{attendeesList:y}}=u,C=(Dc(u)?_:y).find(I=>I.userId===i);if(!C)return Promise.reject({type:Ir,reason:"user id not correct"});{const I=bh(p,C.userGUID);if(!I)return Promise.reject({type:Pn,reason:"user not in a room"});if(I.boId===l)return Promise.reject({type:Pn,reason:"user already in the target room"});{const O=p.find(D=>D.boId===l);if(!O)return Promise.reject({type:Ir,reason:"invalid room id"});Fl.switchBO(i,O.boId)}}return _i(Dv,I=>{const{controlStatus:O,roomList:D}=I,B=D.find(P=>P.boId===l);return O===Qr.InProgress&&B&&B.attendeeGuidList.includes(C.userGUID)})}closeRoom(){const i=this[gr](),{breakoutRoom:{controlStatus:l}}=i;return l!==Qr.InProgress?Promise.reject({type:Pn,reason:"room is not started"}):(Fl.stopBO(Qr.Closing),_i(Dv,u=>u.controlStatus===Qr.Closing))}loadPreAssignedRooms(){const i=this[gr](),{meeting:{meetingOptions:l},breakoutRoom:{controlStatus:u}}=i;return!l.isAllowBreakoutRoomPreAssign||u!==Qr.NotStarted&&u!==Qr.Closed?Promise.reject({type:Pn}):(Fl.preAssignBreakoutRoom(),_i(xE))}getUnassignedAttendeeList(){const i=this[gr](),{meeting:{isHost:l}}=i;return l?Kw(i):[]}getRoomList(){const i=this[gr](),{breakoutRoom:{rooms:l,currentRoom:{status:u,boId:p},mainSessionAttendeeList:_},participants:{attendeesList:y}}=i,C=Kr(i);if(C&&(C.isHost||u===hr.InRoom&&C.bCoHost)){const I=u===hr.InRoom,O=I?_:y;return l.map(D=>{const{attendeeGuidList:B,boId:P,name:F}=D,Z=(B||[]).map(ie=>O.find(oe=>oe.userGUID===ie)).filter(ie=>!!ie&&ie.userGUID!==C.userGUID);return I&&C.isHost&&P===p&&Z.unshift(C),{roomId:P,name:F,attendeeList:Z.filter(ie=>!!ie).map(ie=>({userId:ie.userId,displayName:ie.displayName,avatar:ie.avatar,isInRoom:ie.bid===P,userGuid:ie.userGUID}))}})}return i.breakoutRoom.rooms.map(I=>{const{boId:O,name:D}=I;return{roomId:O,name:D,attendeeList:[]}})}getAttendeeStatus(){return this[gr]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[gr]().breakoutRoom.controlStatus}getCurrentRoom(){const i=this[gr](),{breakoutRoom:{currentRoom:{status:l,name:u,boId:p}}}=i;return{attendeeStatus:l,name:u,roomId:p}}getRoomOptions(){const i=this[gr](),{breakoutRoom:{options:l}}=i;return $t({},l)}}).prototype,"createRooms",[jt,Su],Object.getOwnPropertyDescriptor(Ti.prototype,"createRooms"),Ti.prototype),kn(Ti.prototype,"openRooms",[jt,Su],Object.getOwnPropertyDescriptor(Ti.prototype,"openRooms"),Ti.prototype),kn(Ti.prototype,"joinRoom",[jt],Object.getOwnPropertyDescriptor(Ti.prototype,"joinRoom"),Ti.prototype),kn(Ti.prototype,"leaveRoom",[jt],Object.getOwnPropertyDescriptor(Ti.prototype,"leaveRoom"),Ti.prototype),kn(Ti.prototype,"askForHelp",[jt],Object.getOwnPropertyDescriptor(Ti.prototype,"askForHelp"),Ti.prototype),kn(Ti.prototype,"postponeHelping",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"postponeHelping"),Ti.prototype),kn(Ti.prototype,"broadcast",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"broadcast"),Ti.prototype),kn(Ti.prototype,"assignUserToRoom",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"assignUserToRoom"),Ti.prototype),kn(Ti.prototype,"moveUserToRoom",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"moveUserToRoom"),Ti.prototype),kn(Ti.prototype,"closeRoom",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"closeRoom"),Ti.prototype),kn(Ti.prototype,"loadPreAssignedRooms",[Su,jt],Object.getOwnPropertyDescriptor(Ti.prototype,"loadPreAssignedRooms"),Ti.prototype),Ti);const tM=Ls(_D,ps);let Ul,al,bp,Xm;Y.LiveTranscriptionMessageSource=void 0,function(i){i[i.Ready=0]="Ready",i[i.UserSub=1]="UserSub",i[i.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",i[i.ManualCaptionerDisabled=3]="ManualCaptionerDisabled"}(Ul||(Ul={})),function(i){i[i.Unspecified=-1]="Unspecified",i[i.English=0]="English",i[i["Chinese (Simplified)"]=1]="Chinese (Simplified)",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput",i[i.Customized=500]="Customized"}(al||(al={})),function(i){i[i.Unknown=0]="Unknown",i[i.Close=1]="Close",i[i.New=2]="New",i[i.Insert=3]="Insert",i[i.Delete=4]="Delete",i[i.Reset=5]="Reset",i[i.Audiodesc=6]="Audiodesc",i[i.Speaker=7]="Speaker",i[i.Error=8]="Error"}(bp||(bp={})),function(i){i[i.TranslateNotSupport=1]="TranslateNotSupport"}(Xm||(Xm={})),function(i){i[i.Unspecified=0]="Unspecified",i[i.InMeetingManual=1]="InMeetingManual",i[i.ExternalCaptioner=2]="ExternalCaptioner",i[i.ASR=4]="ASR"}(Y.LiveTranscriptionMessageSource||(Y.LiveTranscriptionMessageSource={}));const P0={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},M_=Object.keys(al).filter(i=>/\d+/.test(al[i])).reduce((i,l)=>$t($t({},i),{},{[`${al[l]}`]:l}),{}),nM=Object.keys(P0).reduce((i,l)=>(Object.assign(i,{[`${P0[`${l}`]}`]:l}),i),{}),vD="zoom-sdk-live-trasncription",Sh="live-trasncription";let rM;function x_(i){const l=i===al.Unspecified?al.Reserved:i;Mi.getInstance().selectLanguageChannelForNewLTT(l)}Y.LiveTranscriptionLanguageCode=void 0,Y.LiveTranscriptionLanguage=void 0,function(i){i[i.Unknown=0]="Unknown",i[i.ZoomKits=1]="ZoomKits",i[i.AISense=2]="AISense"}(rM||(rM={})),function(i){i[i.English=0]="English",i[i.Chinese=1]="Chinese",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput"}(Y.LiveTranscriptionLanguageCode||(Y.LiveTranscriptionLanguageCode={})),function(i){i.English="en",i["Chinese (Simplified)"]="zh",i.Japanese="ja",i.German="de",i.French="fr",i.Russian="ru",i.Portuguese="pt",i.Spanish="es",i.Korean="ko",i.Italian="it",i.Reserved="en1",i.Vietnamese="vi",i.Dutch="nl",i.Ukrainian="uk",i.Arabic="ar",i.Bengali="bn",i["Chinese (Traditional)"]="zh-hant",i.Czech="cs",i.Estonian="et",i.Finnish="fi",i.Greek="el",i.Hebrew="he",i.Hindi="hi",i.Hungarian="hu",i.Indonesian="id",i.Malay="ms",i.Persian="fa",i.Polish="pl",i.Romanian="ro",i.Swedish="sv",i.Tamil="ta",i.Telugu="te",i.Tagalog="tl",i.Turkish="tr"}(Y.LiveTranscriptionLanguage||(Y.LiveTranscriptionLanguage={}));const AF=ef(FE,function(i,l){return tw(i,l)})([Ks,i=>{let{meeting:{gatewayUserList:l}}=i;return l}],(i,l)=>{const u={};return i.forEach(p=>{Object.assign(u,{[`${p.userId}`]:p.zoomID})}),l?.forEach(p=>{Object.assign(u,{[`${p.userId}`]:p.sn})}),u}),X=Us([Ks],i=>i.find(l=>!0===l.bCCEditor)),AD=Us([Ks,QL],(i,l)=>i.some(u=>!0===u.bCCEditor&&u.userId===l)),yD=mo.createAgent();var iM=Object.freeze({__proto__:null,handleLiveTranscriptionMeetingOptionEpic:i=>i.pipe(Zr(`${lv}`),gt(l=>{const{payload:{liveTranscription:u}}=l;return yt(u)})),handleLiveTranscriptionEnableEpic:(i,l)=>Zn(i,Sc).pipe(En(u=>{var p,_;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.NewLttAvaliable)||void 0!==(null===(_=u.payload.body)||void 0===_?void 0:_.LiveTransEngineType)}),gt(u=>{const{payload:{body:{NewLttAvaliable:p,LiveTransEngineType:_}}}=u,{liveTranscription:{isEnableAutomatedCaptions:y}}=l.value;return void 0!==p?(_t(_E,!!p),YC(y&&!!p)):$C(_)})),handleLiveTranscriptionStatusEpic:(i,l)=>Zn(i,7982).pipe(zn(u=>{const{payload:{body:{status:p,gwId:_}}}=u,y=[];switch(p){case Ul.Ready:y.push(lR(_));break;case Ul.ManualCaptionerEnabled:_t(Vh,{autoCaption:!1}),y.push(rb(!0));break;case Ul.ManualCaptionerDisabled:_t(Vh,{autoCaption:!0}),y.push(ZT({editorId:"",isEditor:!1,editorZoomId:""})),y.push(rb(!1));break;case Ul.UserSub:{_t(Vh,{autoCaption:l.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:I}}=l.value;if(null!=I&&I.isLiveTranscriptionSubscribed){var C;yD.enableNewLLT();const O=null!==(C=I.currentTranscriptionLang)&&void 0!==C?C:al.Unspecified;x_(O),y.push(Kv(O)),void 0!==I.currentTranslationLang&&yD.setTranslationLanguage(I.currentTranslationLang),y.push(ib())}break}}return Dn(y)})),handleLiveTranscriptionSupportedLanguageEpic:i=>Zn(i,7984).pipe(gt(l=>{const{payload:{body:{langs:u}}}=l;return dR(u)})),handleLiveTranscriptionSubStatusEpic:i=>Zn(i,7985).pipe(En(l=>{var u;return!0===(null===(u=l.payload.body)||void 0===u?void 0:u.success)}),zn(l=>{const{payload:{body:{src:u,lang:p,success:_}}}=l,y=[];return _&&y.push(qC(!0)),u===Y.LiveTranscriptionMessageSource.ASR?(y.push(pf(p===al.NoTranslation?void 0:p)),_t(Vh,{autoCaption:!0,lang:p})):[Y.LiveTranscriptionMessageSource.InMeetingManual,Y.LiveTranscriptionMessageSource.ExternalCaptioner].includes(u)&&_t(Vh,{autoCaption:!1}),Dn(y)})),handleLiveTranscriptionSpeakingLanguageChangeEpic:(i,l)=>Zn(i,7986).pipe(Un(l),zn(u=>{let[p,_]=u;const y=Kr(_),{liveTranscription:{currentTranscriptionLang:C}}=_,{payload:{body:I}}=p,O=[];if(void 0!==I?.lang){const{lang:D}=I;"computer"===y?.audio&&C!==D&&x_(D),O.push(Kv(D))}return Dn(O)})),handleComputerAudioCompleteChangeLTLanguageEpic:(i,l)=>Ei(i,er.JoinComputerAudioComplete).pipe(En(()=>l.value.liveTranscription.isLiveTranscriptionSubscribed),ir(()=>{const{liveTranscription:{currentTranscriptionLang:u}}=l.value;u&&x_(u)}),Gr(qt)),handleLiveTranscriptionTextEpic:(i,l)=>Zn(i,7983).pipe(En(u=>void 0!==u.payload.body),zn(u=>{const{payload:{body:{msgType:p,errorCode:_,language:y,source:C,content:I,keyNodeId:O,msgId:D,nodeId:B,pos:P,size:F,audioLanguage:Z}}}=u;if(p===bp.Error){if(_===Xm.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:ie}}=l.value;ie&&_t(qd,{error:Xm.TranslateNotSupport,errorMessage:`${M_[Z]} to ${M_[ie]} translation is not supported!`,audioLanguage:Z,translationLang:ie})}}else{const ie=l.value,oe=Ks(ie),{liveTranscription:{isManualCaptionerEnabled:ve}}=ie;if(ve&&C===Y.LiveTranscriptionMessageSource.ASR)return Promise.resolve();if(function(Ae,Te){const{liveTranscription:{isEnableTranslatedCaptions:Be,isLiveTranscriptionEnabled:Q},meeting:{meetingOptions:tt}}=Te,{isEnableManualCaptions:dt,isEnableAllowHostAssignTypeCC:it,isEnableClosedCaption:ft,isEnableAllowThirdPartyCCToken:Kt}=tt;return Ae===Y.LiveTranscriptionMessageSource.ASR?Be||Q:Ae===Y.LiveTranscriptionMessageSource.InMeetingManual?dt&&it||void 0===dt&&ft:Ae===Y.LiveTranscriptionMessageSource.ExternalCaptioner?Kt:void 0}(C,ie)&&I&&O){const Ae=AF(ie)[O];if(Ae)return ju.beginDecrypt({decryptedText:I,type:ts.CC_MESSAGE,zoomId:Ae}).then(Te=>{let{message:Be}=Te;const{liveTranscription:{messageRecords:Q}}=l.value,tt=[],dt=Q.find(it=>it.msgId===D);if(dt){const{text:it}=dt,ft=((en,zt)=>{if(!en||0===zt)return"";let Ot=0;for(let _n=0;_n<en.length;_n++)if(Ot+=Jk(en[_n]),Ot===zt)return en.slice(0,_n+1);return en})(it,P);let Kt;p===bp.Insert&&0===F||p===bp.Delete&&0===F?Kt=$t($t({},dt),{},{text:ft+Be,msgType:p}):p===bp.Close&&(Kt=$t($t({},dt),{},{text:Be,msgType:p,done:!0})),Kt&&(tt.push(JC(Kt)),_t(qd,Kt))}else if([bp.New,bp.Close].includes(p)||ve&&p===bp.Insert){const it=oe.find(Kt=>Kt.userId===B),ft={msgId:D,userId:B,displayName:it?.displayName,avatar:it?.avatar,text:Be,source:C,language:y,timestamp:(new Date).getTime(),done:p===bp.Close};tt.push(wm($t($t({},ft),{},{msgType:p}))),_t(qd,ft)}return tt})}}return Promise.resolve()}),zn(u=>Array.isArray(u)?Dn(u):qt)),handlePersistLargeRecordsEpic:(i,l)=>i.pipe(Zr(`${wm}`),Ht(xs),zn(()=>{const{liveTranscription:{messageRecords:u}}=l.value;return u.length>=1e5?function(p){const{meeting:{meetingId:_},liveTranscription:{messageRecords:y,reducedRecordsCount:C}}=p;return void 0!==window.indexedDB?new Promise(I=>{const O=window.indexedDB.open(vD,1);O.addEventListener("upgradeneeded",()=>{const D=O.result;if(!D.objectStoreNames.contains(Sh)){const B=D.createObjectStore(Sh,{keyPath:["startIndex","mid"],autoIncrement:!1});B.createIndex("mid","mid",{unique:!1}),B.transaction.oncomplete=()=>{console.log(`Create objectStore [${Sh}] complete`)}}}),O.addEventListener("success",()=>{const D=O.result,B=y.length,P=.9*B,F=B-P,Z=y.slice(0,P),ie=C+Z.length,oe=D.transaction([Sh],"readwrite");oe.objectStore(Sh).put({startIndex:C,mid:_,records:Z}),oe.oncomplete=()=>{I(zv({remains:F,reducedRecordsCount:ie})),D.close()},oe.onerror=()=>{I(""),D.close()}})}):Promise.resolve("")}(l.value):Promise.resolve("")}),En(u=>"object"==typeof u)),handleClearRecordsInDBEpic:(i,l)=>i.pipe(Zr(`${Gd}`,`${uv}`),En(()=>l.value.liveTranscription.isRecordsReduced),ir(()=>{!function(){if(void 0!==window.indexedDB){const u=window.indexedDB.open(vD,1);u.addEventListener("success",()=>{const p=u.result;p.objectStoreNames.contains(Sh)&&(window.indexedDB.deleteDatabase(vD),p.close())})}}()}),Gr(qt))});const yF=["transcriptionLang","translatedSetting"],Ch={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},oM=Fr({[`${YC}`]:Et((i,l)=>{let{payload:u}=l;i.isLiveTranscriptionEnabled=u}),[`${yt}`]:Et((i,l)=>{let{payload:u}=l;const{transcriptionLang:p,translatedSetting:_}=u,y=Or(u,yF);p&&(i.transcriptionLang=p.split(";").map(C=>{const I=C&&P0[C];return void 0!==I?{lang:C,code:I}:null}).filter(Boolean)),_&&(i.translatedSetting=Object.keys(_).map(C=>{const I=_[C];if(I){const O=I.split(";").map(D=>{const B=D&&P0[D];return void 0!==B?{lang:D,code:B}:null}).filter(Boolean);return{lang:C,code:P0[C],translatedToLanguage:O}}return null}).filter(Boolean)),Object.assign(i,y)}),[`${rb}`]:Et((i,l)=>{let{payload:u}=l;i.isManualCaptionerEnabled=u}),[`${lR}`]:Et((i,l)=>{let{payload:u}=l;i.gatewayId=u}),[`${dR}`]:Et((i,l)=>{let{payload:u}=l;i.supportedTranscriptionLanguage=u}),[`${Kv}`]:Et((i,l)=>{let{payload:u}=l;i.currentTranscriptionLang=u}),[`${pf}`]:Et((i,l)=>{let{payload:u}=l;i.currentTranslationLang=u}),[`${wm}`]:Et((i,l)=>{let{payload:u}=l;i.messageRecords.push(u)}),[`${JC}`]:Et((i,l)=>{let{payload:u}=l;const p=i.messageRecords.find(_=>_.msgId===u.msgId);p&&Object.assign(p,u)}),[`${zv}`]:Et((i,l)=>{let{payload:u}=l;const{remains:p,reducedRecordsCount:_}=u,y=i.messageRecords.length-p;i.isRecordsReduced=!0,i.reducedRecordsCount=_,i.messageRecords.splice(0,y)}),[`${qC}`]:Et((i,l)=>{let{payload:u}=l;i.isLiveTranscriptionSubscribed=u}),[`${$C}`]:Et((i,l)=>{let{payload:u}=l;i.liveTransEngineType=u}),[`${ib}`]:Et(i=>{i.stateBeforeFailover=void 0}),[`${hR}`]:Et((i,l)=>{let{payload:u}=l;i.lastManualCaption=u}),[`${XC}`]:(i,l)=>{let{payload:u}=l;return u?$t($t({},Ch),{},{stateBeforeFailover:{currentTranscriptionLang:i.currentTranscriptionLang,currentTranslationLang:i.currentTranslationLang,isLiveTranscriptionSubscribed:i.isLiveTranscriptionSubscribed},messageRecords:i.messageRecords,isRecordsReduced:i.isRecordsReduced,reducedRecordsCount:i.reducedRecordsCount}):$t({},Ch)}},Ch),sM={userId:0,displayName:"everyone",zoomID:"",isHost:!1,bCoHost:!1},EF={userId:1,displayName:"All panelists",zoomID:"",isHost:!1,bCoHost:!1},zw=["text"];var ki;const wu=mo.createAgent();let aM=(kn((ki=class extends mp{startLiveTranscription(){const{[gr]:i,[zc]:l}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:p,isLiveTranscriptionSubscribed:_,isHostLockSpeakingLanguage:y}}=i();return _?Promise.resolve(""):u?(wu.enableNewLLT(),_i(Vh).then(()=>{y?wu.setSpokenLanguage(al.English):x_(al.Unspecified),l(Kv(al.English)),p&&wu.setTranslationLanguage()})):Promise.reject({type:Pn,reason:"Live transcription is not enabled."})}setSpeakingLanguage(i){const{[gr]:l,[zc]:u}=this,{liveTranscription:{isLiveTranscriptionSubscribed:p,isHostLockSpeakingLanguage:_,transcriptionLang:y}}=l(),C=y.find(I=>I.lang===i);if(C){const{code:I}=C;return p?(_?wu.setSpokenLanguage(I):x_(I),u(Kv(I)),Promise.resolve("")):Promise.reject({type:Pn,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:Ir,reason:"Unsupported transcription language"})}setTranslationLanguage(i){const{[gr]:l,[zc]:u}=this,p=l(),{liveTranscription:{isEnableTranslatedCaptions:_,isLiveTranscriptionSubscribed:y,translatedSetting:C,currentTranscriptionLang:I}}=p;if(!_)return Promise.reject({type:Pn,reason:"Live translation is not enabled."});if(!y)return Promise.reject({type:Pn,reason:"Cannot set translation language before starting live transcription"});if(i){const O=C?.find(D=>D.code===I);if(O){const{translatedToLanguage:D}=O,B=D.find(P=>P.lang===i);if(B)return wu.setTranslationLanguage(B.code),_i({event:Vh,operations:[En(P=>!0===P.autoCaption&&P.lang===B.code),is(1)]},P=>{let{lang:F}=P;return F===B.code})}return Promise.reject({type:Pn,reason:`Cannot support translating ${M_[I||0]} to ${i}`})}return wu.setTranslationLanguage(),u(pf(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[gr]:i}=this,{meeting:{meetingOptions:l},liveTranscription:{isManualCaptionerEnabled:u}}=i(),{isEnableManualCaptions:p,isEnableClosedCaption:_}=l;return p??_?u?Promise.resolve():(wu.enableManualCaption(!0),_i(Vh,y=>{let{autoCaption:C}=y;return!1===C})):Promise.reject({type:Pn,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[gr]:i}=this,{liveTranscription:{isManualCaptionerEnabled:l}}=i();return l?(wu.enableManualCaption(!1),_i(Vh,u=>{let{autoCaption:p}=u;return!0===p})):Promise.resolve()}assignManualCaption(i){var l;const{[gr]:u}=this,p=u(),{liveTranscription:{isManualCaptionerEnabled:_},participants:{attendeesList:y},meeting:{userId:C}}=p;return _?(null===(l=X(p))||void 0===l?void 0:l.userId)===i?Promise.resolve(""):y.find(O=>O.userId===i)?(wu.assignCC(i,!0),_i({event:C===i?Bc:ka,operations:[En(O=>O.userId===i),is(1)]},O=>!0===O.bCCEditor)):Promise.reject({type:Ir,reason:"Cannot find the user"}):Promise.reject({type:Pn,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(i,l){var u;const{[gr]:p,[zc]:_}=this,y=p(),{liveTranscription:{lastManualCaption:C},meeting:{userId:I}}=y,O=Kr(y);let D=Promise.resolve();const B=null===(u=X(y))||void 0===u?void 0:u.userId;return null!=O&&O.isHost&&B!==I&&(D=this.assignManualCaption(I)),D.then(()=>AD(p())?function(P,F,Z){const ie=P.length,oe=[];var ve;if(Z)oe.push({op:"close",text:P,msgId:null!==(ve=F?.msgId)&&void 0!==ve?ve:rT()});else if(F&&null!=F&&F.text){const Ae=F.text.length;let Te=0,Be=0;for(;P[Te]===F.text[Te]&&Te<ie;)Be+=Jk(P[Te]),Te+=1;Te===Ae&&Te===ie?oe.push({op:"same"}):Te===Ae&&Te<ie?oe.push({op:"insert",text:P.slice(Te),size:0,pos:Be,msgId:F.msgId}):Te<Ae&&Te===ie?oe.push({op:"delete",size:0,pos:Be,msgId:F.msgId}):(oe.push({op:"delete",size:0,pos:Be,msgId:F.msgId}),oe.push({op:"insert",text:P.slice(Te),pos:Be,msgId:F.msgId}))}else ie>0&&oe.push({op:"start",text:P,pos:0,size:0,msgId:rT()});return oe.filter(Ae=>"same"!==Ae.op)}(i,C,l):Promise.reject({type:_a,reason:"Cannot type caption "})).then(P=>Array.isArray(P)?(P.forEach(F=>{const{text:Z}=F,ie=Or(F,zw);ju.beginEncrypt({text:Z??"",type:ts.CC_MESSAGE}).then(oe=>{wu.sendManualCaption($t({text:oe},ie)),_(hR(l?void 0:{text:Z,msgId:F.msgId}))})}),_i(qd,F=>F.source===Y.LiveTranscriptionMessageSource.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[gr]:i}=this,{liveTranscription:{isLiveTranscriptionEnabled:l,isEnableTranslatedCaptions:u,isManualCaptionerEnabled:p,transcriptionLang:_,translatedSetting:y}}=i();return{isLiveTranscriptionEnabled:l,isLiveTranslationEnabled:u,isManualCaptionerEnabled:p,transcriptionLanguage:_.map(C=>C.lang).join(";"),translationLanguage:y?.map(C=>({speakingLanguage:C.lang,translatedToLanguage:C.translatedToLanguage.map(I=>I.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[gr]:i}=this,{meeting:{meetingOptions:l}}=i(),{isEnableManualCaptions:u,isEnableLiveTranscription:p,isEnableClosedCaption:_,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:I}=l||{};return{isEnableManualCaptions:u,isEnableLiveTranscription:p,isEnableClosedCaption:_,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:I}}getCurrentTranscriptionLanguage(){const{[gr]:i}=this,{liveTranscription:{currentTranscriptionLang:l}}=i();return void 0!==l?{code:nM[l],name:M_[l]}:null}getCurrentTranslationLanguage(){const{[gr]:i}=this,{liveTranscription:{currentTranslationLang:l}}=i();return void 0!==l?{code:nM[l],name:M_[l]}:null}getLatestTranscription(){const{[gr]:i}=this,{liveTranscription:{messageRecords:l,isManualCaptionerEnabled:u}}=i(),p=u?al.DefaultManualInput:al.NoTranslation,_=l.filter(y=>y.language===p);return _.length?_[_.length-1].text:""}getLatestTranslation(){const{[gr]:i}=this,{liveTranscription:{messageRecords:l,currentTranslationLang:u,isEnableTranslatedCaptions:p}}=i();if(p||void 0!==u){const _=l.filter(y=>y.language===u);return _.length?_[_.length-1].text:""}return""}getFullTranscriptionHistory(){const{[gr]:i}=this,l=i(),{liveTranscription:{messageRecords:u,isRecordsReduced:p}}=l;return p?(_=l,void 0!==window.indexedDB?new Promise(y=>{const C=window.indexedDB.open(vD,1);C.addEventListener("success",()=>{const I=C.result;if(I.objectStoreNames.contains(Sh)){const O=I.transaction([Sh],"readonly").objectStore(Sh),D=[],B=_.meeting.meetingId,P=O.openCursor();P.onsuccess=()=>{const F=P.result;F?(F.value.mid===B&&D.push(...F.value.records),F.continue()):(y(D),I.close())}}else y("")})}):Promise.resolve("")).then(_=>Array.isArray(_)?_.concat(u):[...u]):[...u];var _}getManualCaptionEditor(){const{[gr]:i}=this,l=i(),{closedCaption:{editorId:u}}=l;let p;if(!u)return{};if(p=((B,P)=>{let F;if("string"==typeof P)F=B.participants.xmppAttendeeList.find(Z=>Z.jid===P);else{if(P===Wr.All)return sM;if(P===Wr.Panelist)return EF;F=B.participants.attendeesList.find(Z=>Z.userId===P)||B.participants.xmppAttendeeList.find(Z=>Z.userId===P)}return F||{}})(l,u),!p)return{};const{userId:_,isHost:y,displayName:C,avatar:I,bCoHost:O,zoomID:D}=p;return{userId:_,isHost:y,displayName:C,avatar:I,bCoHost:O,zoomID:D}}getManualCaptionUrl(){const{[gr]:i}=this,{meeting:{meetingOptions:l,ccUrl:u}}=i(),{isEnableManualCaptions:p}=l||{};return p?u:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[jt],Object.getOwnPropertyDescriptor(ki.prototype,"startLiveTranscription"),ki.prototype),kn(ki.prototype,"setSpeakingLanguage",[jt],Object.getOwnPropertyDescriptor(ki.prototype,"setSpeakingLanguage"),ki.prototype),kn(ki.prototype,"setTranslationLanguage",[jt],Object.getOwnPropertyDescriptor(ki.prototype,"setTranslationLanguage"),ki.prototype),kn(ki.prototype,"enableManualCaptioner",[Su,jt],Object.getOwnPropertyDescriptor(ki.prototype,"enableManualCaptioner"),ki.prototype),kn(ki.prototype,"disableManualCaptioner",[Su,jt],Object.getOwnPropertyDescriptor(ki.prototype,"disableManualCaptioner"),ki.prototype),kn(ki.prototype,"assignManualCaption",[jt,Su],Object.getOwnPropertyDescriptor(ki.prototype,"assignManualCaption"),ki.prototype),kn(ki.prototype,"sendCaptionTextManually",[jt],Object.getOwnPropertyDescriptor(ki.prototype,"sendCaptionTextManually"),ki.prototype),kn(ki.prototype,"getManualCaptionUrl",[jt,Su],Object.getOwnPropertyDescriptor(ki.prototype,"getManualCaptionUrl"),ki.prototype),ki);const bF=Ls(iM);var N0;const Yw={chat:{epic:c0,reducer:LO,Client:a0},logger:{epic:ON,reducer:pw,Client:class extends mp{getLogs(i){return GA.getLogs(this[Ki],i)}getStore(){return GA.doNotUseDirtyGetStore()}setLogOptions(i){i&&this[Ki].dispatch(VO(i))}reportToGlobalTracing(i){return GA.reportToGlobalTracing(this[Ki],i)}}},recording:{epic:HO,reducer:jO,Client:KA},cmd:{epic:JB,reducer:m4,Client:g4},breakoutRoom:{epic:tM,reducer:mF,Client:eM},liveTranscription:{epic:bF,reducer:oM,Client:aM}},SF=mo.createAgent();let CF=(kn((N0=class extends IN{constructor(i){super(i),this.mediaStream=void 0,this[bu]=Yw}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new FN(this[Ki])),this.mediaStream}joinInstant(i,l,u,p,_,y){const{[gr]:C,[zc]:I}=this,{meeting:{lang:O,meetingStatus:D},socket:{zoomSocketStatus:B}}=C();return l?D!==Is.Joined&&B===ao.Closed?(I(nE({topic:i,password:_||"",userName:u,zlk:l,lang:O,cv:p})),y&&I(cT(y)),Pv(ML.JoinMeeting)):Promise.reject({type:Pn,reason:"duplicated operation"}):Promise.reject({type:Pn,reason:"invalid  signature"})}removeUser(i){const l=this[Ki].getState(),{participants:{attendeesList:u}}=l;return u.find(_=>_.userId===i)?(SF.expel(i),_i(Og,_=>_.some(y=>y.userId===i))):Promise.reject({type:Ir,reason:"no matched user"})}}).prototype,"removeUser",[gh,jt],Object.getOwnPropertyDescriptor(N0.prototype,"removeUser"),N0.prototype),N0);class IF{constructor(l){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=l,this.mic=null,this.script=l.createScriptProcessor(2048,1,1),this.script.onaudioprocess=u=>{const p=u.inputBuffer.getChannelData(0);let _,y=0;for(_=0;_<p.length;++_)y+=p[_]*p[_];this.instant=Math.sqrt(y/p.length)}}connectToSource(l){console.log("InputMicDetector is listening");try{var u;this.mic=this.context.createMediaStreamSource(l),this.mic.connect(this.script),null===(u=this.script)||void 0===u||u.connect(this.context.destination)}catch(p){console.error(p)}}stop(){var l,u;console.log("Audio Previewer stopped"),null===(l=this.mic)||void 0===l||l.disconnect(),this.mic=null,null===(u=this.script)||void 0===u||u.disconnect(),this.script=null}getMicVolume(){return this.instant}}const wF="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class TF{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:p,sampleAudioUrl:_=wF,onAnalyseFrequency:y}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(u=this.sampleAudio)||void 0===u?void 0:u.url)===_&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(_).then(I=>I.arrayBuffer()).then(I=>this.audioCtx.decodeAudioData(I)).then(I=>(this.sampleAudio={url:_,data:I},I))).then(I=>{var O,D,B;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=I,this.sourceNode.loop=!0,p&&null!==(O=this.audioPlayer)&&void 0!==O&&O.setSinkId&&this.audioPlayer.setSinkId(p),y?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=y,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(D=this.audioCtx)||void 0===D?void 0:D.state)&&(null===(B=this.audioCtx)||void 0===B||B.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const C=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:C,destroy:()=>{var I;C(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(I=this.audioCtx)||void 0===I||I.close(),this.audioCtx=void 0}}}testMicrophone(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(u=navigator.mediaDevices)||void 0===u?void 0:u.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:p,speakerId:_,recordAndPlay:y,maxRecordDuration:C,onAnalyseFrequency:I,onStartRecording:O,onStopRecording:D,onStartPlayRecording:B,onStopPlayRecording:P}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const F=()=>{y&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!p||{deviceId:p}}).then(ie=>{var oe,ve,Ae,Te;this.mAudioStream=ie,this.mSourceNode=null===(oe=this.audioCtx)||void 0===oe?void 0:oe.createMediaStreamSource(ie),this.audioPlayer.muted=!0,I?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=I,this.initAnalyserNode(),this.analyserNode&&(null===(Ae=this.mSourceNode)||void 0===Ae||Ae.connect(this.analyserNode))):this.analyserCallback=void 0,y&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=Be=>{Be.data&&this.recorderChunks.push(Be.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),D?.(),this.recorderChunks.length>0){var Be;const Q=new Blob(this.recorderChunks,{type:(null===(Be=this.recorderChunks[0])||void 0===Be?void 0:Be.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(Q),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,_,B,P),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,O?.(),this.maximumRecordingTimer=window.setTimeout(()=>{F()},C||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(ve=this.audioCtx)||void 0===ve?void 0:ve.state)&&(null===(Te=this.audioCtx)||void 0===Te||Te.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const Z=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(I&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(ie=>{ie.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:Z,stopRecording:F,destroy:()=>{var ie;Z(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(ie=this.audioCtx)||void 0===ie||ie.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let l=0;for(const p of this.analyserNodeBufferDataArray)l+=p;this.analyserCallback(l/this.analyserNodeBufferDataArray.length)}}playRecording(l,u,p,_){this.recorderPlayer=new Audio,this.recorderPlayer.src=l,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&u&&this.recorderPlayer.setSinkId(u);const y=()=>{_?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};this.recorderPlayer.onpause=()=>{y()},this.recorderPlayer.onended=()=>{y()},p?.(),this.recorderPlayer.play().finally(()=>{window.URL.revokeObjectURL(l)})}}const qw="AudioNotStartedError";class RF{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=l,this.tester=new TF}start(){var l=this;return V(function*(){if(l.audioStream||l.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const u=yield navigator.mediaDevices.getUserMedia(l.getAudioConstraints());l.audioStream=u,l.isAudioStarted=!0}catch(u){throw u}})()}unmute(){var l=this;return V(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(qw);if(l.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return l.toggleMicIsMuted(!0)})()}mute(){var l=this;return V(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(qw);if(!l.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return l.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var l=this;return V(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(qw);l.audioStream.getAudioTracks().forEach(u=>u.stop()),l.audioStream=null,l.isAudioStarted=!1})()}toggleMicIsMuted(l){var u=this;return V(function*(){if(l){if(!u.audioContext){const p=window.AudioContext||window.webkitAudioContext;u.audioContext=new p}u.inputMicDetector=new IF(u.audioContext),u.inputMicDetector.connectToSource(u.audioStream)}else u.inputMicDetector&&u.inputMicDetector.stop(),u.inputMicDetector=null;u.isMicUnmuted=l})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(l){return this.tester.testSpeaker(l)}testMicrophone(l){return this.tester.testMicrophone(l)}}const cM={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class OF{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.isVideoStarted=!1,this.videoStream=null,this.deviceId=l}start(l){var u=this;return V(function*(){if(!l)throw new Error("Video DOM element is falsy");if(u.isVideoStarted||u.videoStream)throw new Error("VideoAlreadyStartedError");const p=function(){var _=V(function*(y){if(!y||"OverconstrainedError"!==y.name&&"ConstraintNotSatisfiedError"!==y.name)throw y;console.log(`Warning: detected ${y.name} -- trying to fall back to lower aspect ratio`);try{const C=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints(!0));return u.tryPlayVideo(l,C)}catch(C){throw C}});return function(C){return _.apply(this,arguments)}}();try{const _=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints());return u.tryPlayVideo(l,_)}catch(_){return p(_)}})()}stop(){var l=this;return V(function*(){if(!l.videoStream||!l.isVideoStarted)throw new Error("VideoNotStartedError");l.videoStream.getVideoTracks().forEach(u=>u.stop()),l.videoStream=null,l.isVideoStarted=!1})()}getVideoConstraints(){let l=cM;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?l=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(l.deviceId=this.deviceId),{audio:!1,video:l}}tryPlayVideo(l,u){var p=this;return V(function*(){if(!l)throw new Error("Video DOM element is falsy");try{p.videoStream=u,l.srcObject=p.videoStream,yield l.play(),p.isVideoStarted=!0}catch(_){throw _}})()}}class Vo{static createClient(){if(!this.meetingClient){const l=function(){const u=function(){var I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},O=new tn.constructor(tn.SchedulerAction),D=new Fe,B=void 0,P=function(F){B=F;var Z=(new Fe).pipe(Ht(O)),ie=(new Fe).pipe(Ht(O)),oe=new Wy(Z),ve=new _g(ie,B.getState());return D.pipe(gt(function(Ae){var Te="dependencies"in I?Ae(oe,ve,I.dependencies):Ae(oe,ve);if(!Te)throw new TypeError('Your root Epic "'+(Ae.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return Te}),zn(function(Ae){return Dn(Ae).pipe(Bd(O),Ht(O))})).subscribe(B.dispatch),function(Ae){return function(Te){var Be=Ae(Te);return ie.next(B.getState()),Z.next(Te),Be}}};return P.run=function(F){D.next(F)},P}(),{epicSubject:p,rootEpic:_}=function(){const I=new De(Vu(FI,Ub,ZP,SN));return{epicSubject:I,rootEpic:(O,D,B)=>I.pipe(zn(P=>P(O,D,B)))}}(),y=[u],C=Qk(CN(),WB(function(){for(var I=arguments.length,O=new Array(I),D=0;D<I;D++)O[D]=arguments[D];return function(B){return function(){var P=B.apply(void 0,arguments),F=function(){throw new Error(wa(15))},Z={getState:P.getState,dispatch:function(){return F.apply(void 0,arguments)}},ie=O.map(function(oe){return oe(Z)});return F=jy.apply(void 0,ie)(P.dispatch),vn(vn({},P),{},{dispatch:F})}}}(...y)));return C.asyncReducers={},C.injectReducer=(I,O)=>{void 0===C.asyncReducers[I]&&(C.asyncReducers[I]=O,C.replaceReducer(CN(C.asyncReducers)))},C.injectEpic=I=>{p.next(I)},u.run(_),C}();this.meetingClient=new CF(l)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{_c(500).subscribe(()=>{Nv()})}),this.meetingClient=null)}static checkSystemRequirements(){var l;return{audio:Kd()&&Fh(),video:Kd()&&void 0!==navigator.mediaDevices,screen:Kd()&&"function"==typeof(null===(l=navigator.mediaDevices)||void 0===l?void 0:l.getDisplayMedia)}}static getDevices(l){return l?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(u=>(u.getTracks().forEach(p=>p.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new RF(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new OF(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(l){var u;(u=V(function*(p){var _;const y=p||qv,C=`${y}/${oE}`,I=[],O=[],D=`${y}/`;if(nI()){const{workers:F,wasms:Z}=tp("audio","simd",D);I.push(...F),O.push(...Z)}else{const{workers:F,wasms:Z}=tp("audio","",D);I.push(...F),O.push(...Z)}if(nI()&&Kg()){const{workers:F,wasms:Z}=tp(["video","sharing"],"simd,thread",D);I.push(...F),O.push(...Z)}else if(Kg()){const{workers:F,wasms:Z}=tp(["video","sharing"],"thread",D);I.push(...F),O.push(...Z)}else if(nI()){const{workers:F,wasms:Z}=tp(["video","sharing"],"simd",D);I.push(...F),O.push(...Z)}else{const{workers:F,wasms:Z}=tp(["video","sharing"],"",D);I.push(...F),O.push(...Z)}const B=[Yg(C,"script")];I.forEach(F=>{B.push(Yg(F,"fetch"))});let P=!1;if(null!==(_=window.indexedDB)&&void 0!==_&&_.databases)try{const F=yield window.indexedDB.databases(),Z='"audio:2034;video:2354"'.split(";").map(ie=>{const[oe,ve]=ie.split(":");return{[`${oe}`]:Number(ve)}}).reduce((ie,oe)=>$t($t({},ie),oe),{});Z&&(P=["AUDIO_FILE","VIDEO_FILE"].every(ie=>{const oe="AUDIO_FILE"===ie?Z.audio:Z.video;return-1!==F.findIndex(ve=>ve.name===ie&&ve.version===oe)}))}catch{}P||O.forEach(F=>{B.push(Yg(F,"fetch"))});try{document.head.append(...B)}catch{}}),function(p){return u.apply(this,arguments)})(l)}}Vo.meetingClient=void 0,Vo.VERSION=eI;var M0,Jw,ED,Vl,L_,B_,my,$w="1.6.2",x0="INVALID_PARAMETERS",A4="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat($w,"/lib"),Tu="https://source.zoom.us/videosdk/".concat($w,"/lib"),uM="https://jssdk.zoomus.cn/videosdk/".concat($w,"/lib"),Ln=Symbol("stream"),Xw=function(){function i(l){N(this,i),this[Ln]=void 0,this[Ln]=l}return L(i,[{key:"startAudio",value:function(l){return this[Ln].startAudio(l)}},{key:"stopAudio",value:function(){return this[Ln].stopAudio()}},{key:"muteAudio",value:function(l){return this[Ln].muteAudio(l)}},{key:"unmuteAudio",value:function(l){return this[Ln].unmuteAudio(l)}},{key:"inviteByPhone",value:function(l,u,p,_){return this[Ln].dialOut(l,u,p,_)}},{key:"cancelInviteByPhone",value:function(l,u,p){return this[Ln].cancelDialOut(l,u,p)}},{key:"hangup",value:function(){return this[Ln].hangup()}},{key:"muteShareAudio",value:function(l){return this[Ln].muteShareAudio(l)}},{key:"unmuteShareAudio",value:function(l){return this[Ln].unmuteShareAudio(l)}},{key:"subscribeAudioStatisticData",value:function(l){return this[Ln].subscribeAudioStatisticData(l)}},{key:"unsubscribeAudioStatisticData",value:function(l){return this[Ln].unsubscribeAudioStatisticData(l)}},{key:"muteUserAudioLocally",value:function(l){return this[Ln].muteUserAudioLocally(l)}},{key:"unmuteUserAudioLocally",value:function(l){return this[Ln].unmuteUserAudioLocally(l)}},{key:"adjustUserAudioVolumeLocally",value:function(l,u){return this[Ln].adjustUserAudioVolumeLocally(l,u)}},{key:"isAudioMuted",value:function(l){return this[Ln].isAudioMuted(l)}},{key:"getMicList",value:function(){return this[Ln].getMicList()}},{key:"getSpeakerList",value:function(){return this[Ln].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[Ln].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[Ln].getActiveSpeaker()}},{key:"switchMicrophone",value:function(l){return this[Ln].switchMicrophone(l)}},{key:"switchSpeaker",value:function(l){return this[Ln].switchSpeaker(l)}},{key:"isSupportPhoneFeature",value:function(){return this[Ln].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[Ln].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[Ln].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[Ln].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(l){return this[Ln].isOthersShareAudioMutedLocally(l)}},{key:"getAudioStatisticData",value:function(){return this[Ln].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(l){return this[Ln].isUserAudioMutedLocally(l)}},{key:"getUserVolumeLocally",value:function(l){return this[Ln].getUserVolumeLocally(l)}},{key:"startVideo",value:function(l){return this[Ln].startVideo(l)}},{key:"stopVideo",value:function(){return this[Ln].stopVideo()}},{key:"renderVideo",value:function(l,u,p,_,y,C,I,O){return this[Ln].renderVideo(l,u,p,_,y,C,I,O)}},{key:"stopRenderVideo",value:function(l,u,p,_){return this[Ln].stopRenderVideo(l,u,p,_,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"updateVideoCanvasDimension",value:function(l,u,p){return this[Ln].updateVideoCanvasDimension(l,u,p)}},{key:"adjustRenderedVideoPosition",value:function(l,u,p,_,y,C,I){return this[Ln].adjustRenderedVideoPosition(l,u,p,_,y,C,I)}},{key:"clearVideoCanvas",value:function(l,u){return this[Ln].clearVideoCanvas(l,u)}},{key:"mirrorVideo",value:function(l){return this[Ln].mirrorVideo(l)}},{key:"enableHardwareAcceleration",value:function(l){return this[Ln].enableHardwareAcceleration(l)}},{key:"previewVirtualBackground",value:function(l,u,p){return this[Ln].previewVirtualBackground(l,u,p)}},{key:"updateVirtualBackgroundImage",value:function(l,u){return this[Ln].updateVirtualBackgroundImage(l,u)}},{key:"stopPreviewVirtualBackground",value:function(){return this[Ln].stopPreviewVirtualBackground()}},{key:"switchCamera",value:function(l){return this[Ln].switchCamera(l)}},{key:"subscribeVideoStatisticData",value:function(l){return this[Ln].subscribeVideoStatisticData(l)}},{key:"unsubscribeVideoStatisticData",value:function(l){return this[Ln].unsubscribeVideoStatisticData(l)}},{key:"isCapturingVideo",value:function(){return this[Ln].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[Ln].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[Ln].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[Ln].getActiveCamera()}},{key:"getCameraList",value:function(){return this[Ln].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[Ln].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[Ln].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[Ln].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[Ln].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[Ln].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[Ln].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[Ln].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[Ln].getVideoStatisticData()}},{key:"isRenderSelfViewWithVideoElement",value:function(){return this[Ln].isRenderSelfViewWithVideoElement()}},{key:"startShareView",value:function(l,u){return this[Ln].startShareView(l,u)}},{key:"stopShareView",value:function(){return this[Ln].stopShareView()}},{key:"switchShareView",value:function(l){return this[Ln].switchShareView(l)}},{key:"startShareScreen",value:function(l,u){return void 0!==u?.broadcastToSubsession&&Object.assign(u||{},{broadcastToBreakoutRoom:u?.broadcastToSubsession}),this[Ln].startShareScreen(l,u)}},{key:"pauseShareScreen",value:function(){return this[Ln].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[Ln].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[Ln].stopShareScreen()}},{key:"lockShare",value:function(l){return this[Ln].lockShare(l)}},{key:"updateSharingCanvasDimension",value:function(l,u){return this[Ln].updateSharingCanvasDimension(l,u)}},{key:"switchSharingSecondaryCamera",value:function(l){return this[Ln].switchSharingSecondaryCamera(l)}},{key:"setSharePrivilege",value:function(l){return this[Ln].setSharePrivilege(l)}},{key:"shareToSubsession",value:function(){return this[Ln].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[Ln].stopShareToBreakoutRoom()}},{key:"enableOptimizeForSharedVideo",value:function(l){return this[Ln].enableOptimizeForSharedVideo(l)}},{key:"updateSharedVideoQuality",value:function(l){return this[Ln].updateSharedVideoQuality(l)}},{key:"subscribeShareStatisticData",value:function(l){return this[Ln].subscribeShareStatisticData(l)}},{key:"unsubscribeShareStatisticData",value:function(l){return this[Ln].unsubscribeShareStatisticData(l)}},{key:"isShareLocked",value:function(){return this[Ln].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[Ln].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[Ln].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[Ln].getShareStatus()}},{key:"getShareUserList",value:function(){return this[Ln].getShareUserList()}},{key:"isStartShareScreenWithVideoElement",value:function(){return this[Ln].isStartShareScreenWithVideoElement()}},{key:"isOptimizeForSharedVideoEnabled",value:function(){return this[Ln].isOptimizeForSharedVideoEnabled()}},{key:"isSupportOptimizedForSharedVideo",value:function(){return this[Ln].isSupportOptimizedForSharedVideo()}},{key:"getShareStatisticData",value:function(){return this[Ln].getShareStatisticData()}},{key:"requestFarEndCameraControl",value:function(l){return this[Ln].requestFarEndCameraControl(l)}},{key:"approveFarEndCameraControl",value:function(l){return this[Ln].approveFarEndCameraControl(l)}},{key:"declineFarEndCameraControl",value:function(l){return this[Ln].declineFarEndCameraControl(l)}},{key:"giveUpFarEndCameraControl",value:function(l){return this[Ln].giveUpFarEndCameraControl(l)}},{key:"controlCamera",value:function(l){return this[Ln].controlCamera(l)}},{key:"controlFarEndCamera",value:function(l){return this[Ln].controlFarEndCamera(l)}},{key:"getFarEndCameraPTZCapability",value:function(l){return this[Ln].getFarEndCameraPTZCapability(l)}},{key:"getCameraPTZCapability",value:function(l){return this[Ln].getCameraPTZCapability(l)}},{key:"isBrowserSupportPTZ",value:function(){return this[Ln].isBrowserSupportPTZ()}},{key:"getNetworkQuality",value:function(l){return this[Ln].getNetworkQuality(l)}}]),i}(),gy=["isCoHost"],Sp=Symbol("chat"),DF=function(){function i(l){N(this,i),this[Sp]=void 0,this[Sp]=l}return L(i,[{key:"send",value:function(l,u){return this[Sp].send(l,u)}},{key:"sendToAll",value:function(l){return this[Sp].send(l,Wr.All)}},{key:"setPrivilege",value:function(l){return this[Sp].setPrivilege(l)}},{key:"getPrivilege",value:function(){return this[Sp].getPrivilege()}},{key:"getReceivers",value:function(){return this[Sp].getReceivers().map(function(l){return z({isManager:l.isCoHost},ee(l,gy))})}},{key:"getHistory",value:function(){return this[Sp].getHistory()}}]),i}(),yd=Symbol("recording"),Zw=function(){function i(l){N(this,i),this[yd]=void 0,this[yd]=l}return L(i,[{key:"canStartRecording",value:function(){return this[yd].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[yd].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[yd].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[yd].startRecording()}},{key:"stopCloudRecording",value:function(){return this[yd].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[yd].getRecordingStatus()}},{key:"acceptIndividualRecording",value:function(){return this[yd].accept()}},{key:"declineIndividualRecording",value:function(){return this[yd].decline()}}]),i}(),bD=Symbol("command"),lM=function(){function i(l){N(this,i),this[bD]=void 0,this[bD]=l}return L(i,[{key:"send",value:function(l,u){return this[bD].send(l,u)}}]),i}(),y4=["isInRoom"],E4=["isAutoJoinRoom"],Ua=Symbol("breakout-room"),_y=function(){function i(l){N(this,i),this[Ua]=void 0,this[Ua]=l}return L(i,[{key:"createSubsessions",value:function(l,u){return this[Ua].createRooms(l,u).then(function(p){return p.map(function(_){return{subsessionId:_.roomId,subsessionName:_.name,userList:_.attendeeList}})})}},{key:"openSubsessions",value:function(l,u){var p=u?z(z({},u),{},{isAutoJoinRoom:u.isAutoJoinSubsession}):void 0,_=l.map(function(y){return{roomId:y.subsessionId,name:y.subsessionName,attendeeList:y.userList}});return this[Ua].openRooms(_,p)}},{key:"joinSubsession",value:function(l){return this[Ua].joinRoom(l)}},{key:"leaveSubsession",value:function(){return this[Ua].leaveRoom()}},{key:"askForHelp",value:function(){return this[Ua].askForHelp()}},{key:"postponeHelping",value:function(l){return this[Ua].postponeHelping(l)}},{key:"broadcast",value:function(l){return this[Ua].broadcast(l)}},{key:"assignUserToSubsession",value:function(l,u){return this[Ua].assignUserToRoom(l,u)}},{key:"moveUserToSubsession",value:function(l,u){return this[Ua].moveUserToRoom(l,u)}},{key:"closeAllSubsessions",value:function(){return this[Ua].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[Ua].getUnassignedAttendeeList()}},{key:"getSubsessionList",value:function(){return this[Ua].getRoomList().map(function(l){return{subsessionId:l.roomId,subsessionName:l.name,userList:l.attendeeList.map(function(u){return z({isInSubsession:u.isInRoom},ee(u,y4))})}})}},{key:"getUserStatus",value:function(){return this[Ua].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[Ua].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var l=this[Ua].getCurrentRoom();return{userStatus:l.attendeeStatus,subsessionName:l.name,subsessionId:l.roomId}}},{key:"getSubsessionOptions",value:function(){var l=this[Ua].getRoomOptions();return z({isAutoJoinSubsession:l.isAutoJoinRoom},ee(l,E4))}}]),i}(),Ih=Symbol("liveTranscription"),SD=function(){function i(l){N(this,i),this[Ih]=void 0,this[Ih]=l}return L(i,[{key:"startLiveTranscription",value:function(){return this[Ih].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(l){return this[Ih].setSpeakingLanguage(l)}},{key:"setTranslationLanguage",value:function(l){return this[Ih].setTranslationLanguage(l)}},{key:"getLiveTranscriptionStatus",value:function(){return this[Ih].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[Ih].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[Ih].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[Ih].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[Ih].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[Ih].getFullTranscriptionHistory()}}]),i}(),L0=Symbol("logger"),kF=function(){function i(l,u){N(this,i),this[L0]=void 0,this[L0]=l,u&&this[L0].setLogOptions(u)}return L(i,[{key:"getLogs",value:function(l){return this[L0].getLogs(l)}},{key:"getStore",value:function(){return this[L0].getStore()}},{key:"reportToGlobalTracing",value:function(l){return this[L0].reportToGlobalTracing(l)}}]),i}(),CD=function(i){return"string"==typeof i&&i.length>0},dM=function(i){var l="";switch(i){case"Global":l=Tu;break;case"CN":l=uM;break;case"CDN":l=A4;break;default:l=i}return l},B0=["roomName"],PF=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(i){var l=i.roomName,u=ee(i,B0);return l?z(z({},u),{},{subsessionName:l}):i}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(i){return{subsessionId:i.roomId,subsessionName:i.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(i){return{userId:i.userId,displayName:i.displayName,subsessionId:i.roomId,subsessionName:i.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],uo=Symbol("Client"),F0=new WeakMap,b4=function(){function i(){N(this,i),this[uo]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this[uo]=Vo.createClient(),F0.set(this,new Map)}return L(i,[{key:"init",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",p=arguments.length>2?arguments[2]:void 0,_=dM(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),this[uo].init("","",{language:l,dependentAssets:_,constraints:z(z({},Vo.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":H(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger"],webEndpoint:p?.webEndpoint||"zoom.us",skipJsMedia:p?.skipJsMedia,enforceMultipleVideos:p?.enforceMultipleVideos,stayAwake:p?.stayAwake,enforceVirtualBackground:p?.enforceVirtualBackground})}},{key:"join",value:function(l,u,p,_,y){return CD(l)&&CD(u)&&CD(p)?l.length>200?Promise.reject({type:x0,reason:"The maximum length of topic is 200"}):p.length>200?Promise.reject({type:x0,reason:"The maximum length of username is 200"}):!_||CD(_)&&!void/^([!@#$%^&*?=]|\w|\d){1,10}$/gi.test(_)?this[uo].joinInstant(l,u,p,$w,_,y):Promise.reject({type:x0,reason:"The password can only contain letters, numbers, and specific characters which in !@#$%^&*?=, and the maximum length is 10"}):Promise.reject({type:x0,reason:"Topic, token and userName must be string and required"})}},{key:"leave",value:function(){var l;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(l=F0.get(this))||void 0===l||l.clear(),this[uo].end()):this[uo].leave()}},{key:"getSessionInfo",value:function(){var l=this[uo].getMeetingInfo();return{isInMeeting:l.isInMeeting||!1,password:l.password||"",topic:l.topic,userName:l.userName,userId:l.userId,sessionId:l.meetingId}}},{key:"on",value:function(l,u){var p=PF.find(function(D){return D.event===l});if(p){var _=p.originalEvent,y=p.payloadTransform;if(y){var C=function(D){var B=y(D);u(B)};this[uo].on(_,C);var I=F0.get(this);I&&(I.has(l)||I.set(l,[]),I.get(l)?.push({originalCb:u,newCb:C}))}else this[uo].on(_,u)}else this[uo].on(l,u)}},{key:"off",value:function(l,u){var p=PF.find(function(D){return D.event===l});if(p){var _=p.originalEvent;if(p.payloadTransform){var y=F0.get(this);if(y){var C=y.get(l),I=C?.find(function(D){return D.originalCb===u});if(I&&C){this[uo].off(_,I.newCb);var O=C?.filter(function(D){return D.originalCb!==u});y.set(l,O)}}}else this[uo].off(_,u)}else this[uo].off(l,u)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new Xw(this[uo].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new DF(this[uo].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new Zw(this[uo].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new lM(this[uo].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new _y(this[uo].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new SD(this[uo].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"getLoggerClient",value:function(l){return this.logger||(this.logger=new kF(this[uo].getFeatureModule("logger"),l)),this.logger}},{key:"coverntUser",value:function(l){return{userId:l.userId,avatar:l.avatar||"",displayName:l.displayName,isHost:l.isHost,isManager:l.isCoHost||!1,audio:l.audio,muted:l.muted,bVideoOn:l.bVideoOn,sharerOn:l.sharerOn,sharerPause:l.sharePause,userGuid:l.userGuid,isAllowIndividualRecording:l.bAllowISORecord,isVideoConnect:l.bVideoConnect}}},{key:"getCurrentUserInfo",value:function(){var l=this[uo].getCurrentUserInfo();if(l)return this.coverntUser(l)}},{key:"getUser",value:function(l){var u=this[uo].getParticipantsList().find(function(p){return p.userId===l});if(u)return this.coverntUser(u)}},{key:"getAllUser",value:function(){var l=this;return this[uo].getParticipantsList().map(function(u){return l.coverntUser(u)})}},{key:"changeName",value:function(l,u){return this[uo].changeName(l,u)}},{key:"makeHost",value:function(l){return this[uo].makeHost(l)}},{key:"removeUser",value:function(l){return this[uo].removeUser(l)}},{key:"isHost",value:function(){return this[uo].isHost()}},{key:"getSessionHost",value:function(){var l=this[uo].getMeetingHost();return l?this.coverntUser(l):void 0}},{key:"makeManager",value:function(l){return this[uo].makeCoHost(l)}},{key:"revokeManager",value:function(l){return this[uo].revokeCoHost(l)}},{key:"isManager",value:function(){return this[uo].isCoHost()}}]),i}(),U0=function(){function i(){N(this,i)}return L(i,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new b4),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return Vo.checkSystemRequirements()}},{key:"getDevices",value:function(l){return Vo.getDevices(l)}},{key:"createLocalAudioTrack",value:function(){return Vo.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return Vo.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){Vo.preloadDependentAssets(dM(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),i}();U0.videoClient=void 0,U0.VERSION=$w,Y.ChatPrivilege=void 0,(M0=Y.ChatPrivilege||(Y.ChatPrivilege={}))[M0.All=1]="All",M0[M0.NoOne=4]="NoOne",M0[M0.EveryonePublicly=5]="EveryonePublicly",Y.ChatMsgType=void 0,(Jw=Y.ChatMsgType||(Y.ChatMsgType={}))[Jw.All=0]="All",Y.SubsessionAllocationPattern=void 0,(ED=Y.SubsessionAllocationPattern||(Y.SubsessionAllocationPattern={}))[ED.Automatically=Am.Automatically]="Automatically",ED[ED.Manually=Am.Manually]="Manually",Y.SubsessionUserStatus=void 0,(Vl=Y.SubsessionUserStatus||(Y.SubsessionUserStatus={}))[Vl.Initial=hr.Initial]="Initial",Vl[Vl.Invited=hr.Invited]="Invited",Vl[Vl.Joining=hr.Joining]="Joining",Vl[Vl.InSubsession=hr.InRoom]="InSubsession",Vl[Vl.Leaving=hr.Leaving]="Leaving",Vl[Vl.MainSession=hr.MainSession]="MainSession",Y.SubsessionStatus=void 0,(L_=Y.SubsessionStatus||(Y.SubsessionStatus={}))[L_.NotStarted=Qr.NotStarted]="NotStarted",L_[L_.InProgress=Qr.InProgress]="InProgress",L_[L_.Closing=Qr.Closing]="Closing",L_[L_.Closed=Qr.Closed]="Closed",Y.ReconnectReason=void 0,(B_=Y.ReconnectReason||(Y.ReconnectReason={}))[B_.Failover=Zs.Failover]="Failover",B_[B_.JoinSubsession=Zs.JoinBreakoutRoom]="JoinSubsession",B_[B_.MoveToSubsession=Zs.MoveToBreakoutRoom]="MoveToSubsession",B_[B_.BackToMainSession=Zs.BackToMainSession]="BackToMainSession",Y.SharePrivilege=void 0,(my=Y.SharePrivilege||(Y.SharePrivilege={}))[my.Unlocked=Qu.HostGrab]="Unlocked",my[my.Locked=Qu.OnlyHost]="Locked",my[my.MultipleShare=Qu.MultipleShare]="MultipleShare",Y.default=U0,Object.defineProperty(Y,"__esModule",{value:!0})}(Pe)},3890:function(Re,Pe,$){var V=$(7156).default;Re.exports=function(){"use strict";var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},se=function(n){return n&&n.Math==Math&&n},z=se("object"==typeof globalThis&&globalThis)||se("object"==typeof window&&window)||se("object"==typeof self&&self)||se("object"==typeof Y&&Y)||function(){return this}()||Function("return this")(),H={},N=function(n){try{return!!n()}catch{return!0}},k=!N(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),L=!N(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),ee=Function.prototype.call,ae=L?ee.bind(ee):function(){return ee.apply(ee,arguments)},de={},he={}.propertyIsEnumerable,te=Object.getOwnPropertyDescriptor,J=te&&!he.call({1:2},1);de.f=J?function(n){var o=te(this,n);return!!o&&o.enumerable}:he;var q,ce,Ee=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}},Oe=L,fe=Function.prototype,Se=fe.call,ge=Oe&&fe.bind.bind(Se,Se),ue=Oe?function(n){return n&&ge(n)}:function(n){return n&&function(){return Se.apply(n,arguments)}},pe=ue,Ie=pe({}.toString),je=pe("".slice),Le=function(n){return je(Ie(n),8,-1)},$e=N,Xe=Le,Me=z.Object,Qt=ue("".split),Wt=$e(function(){return!Me("z").propertyIsEnumerable(0)})?function(n){return"String"==Xe(n)?Qt(n,""):Me(n)}:Me,St=z.TypeError,Ke=function(n){if(null==n)throw St("Can't call method on "+n);return n},Fe=Wt,We=Ke,De=function(n){return Fe(We(n))},et=function(n){return"function"==typeof n},Ut=et,Zt=function(n){return"object"==typeof n?null!==n:Ut(n)},Mt=z,tn=et,Jn=function(n){return tn(n)?n:void 0},qt=function(n,o){return arguments.length<2?Jn(Mt[n]):Mt[n]&&Mt[n][o]},Mr=ue({}.isPrototypeOf),xr=qt("navigator","userAgent")||"",Cr=xr,Sr=z.process,Bi=z.Deno,rr=Sr&&Sr.versions||Bi&&Bi.version,Qi=rr&&rr.v8;Qi&&(ce=(q=Qi.split("."))[0]>0&&q[0]<4?1:+(q[0]+q[1])),!ce&&Cr&&(!(q=Cr.match(/Edge\/(\d+)/))||q[1]>=74)&&(q=Cr.match(/Chrome\/(\d+)/))&&(ce=+q[1]);var fa=ce,Ct=fa,sn=!!Object.getOwnPropertySymbols&&!N(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&Ct&&Ct<41}),ze=sn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xe=qt,ut=et,Fn=Mr,ro=z.Object,Go=ze?function(n){return"symbol"==typeof n}:function(n){var o=xe("Symbol");return ut(o)&&Fn(o.prototype,ro(n))},Js=z.String,To=function(n){try{return Js(n)}catch{return"Object"}},xs=et,Ro=To,fl=z.TypeError,jn=function(n){if(xs(n))return n;throw fl(Ro(n)+" is not a function")},pn=jn,Je=function(n,o){var s=n[o];return null==s?void 0:pn(s)},pt=ae,gt=et,an=Zt,gn=z.TypeError,di={exports:{}},Oo=z,Es=Object.defineProperty,js=function(n,o){try{Es(Oo,n,{value:o,configurable:!0,writable:!0})}catch{Oo[n]=o}return o},lo="__core-js_shared__",Tr=z[lo]||js(lo,{}),Dn=Tr;(di.exports=function(n,o){return Dn[n]||(Dn[n]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var ru=Ke,Lu=z.Object,Xl=function(n){return Lu(ru(n))},zn=Xl,MV=ue({}.hasOwnProperty),gc=Object.hasOwn||function(n,o){return MV(zn(n),o)},z1=ue,Y1=0,Uy=Math.random(),pg=z1(1..toString),ov=function(n){return"Symbol("+(void 0===n?"":n)+")_"+pg(++Y1+Uy,36)},Ya=z,Np=gc,gS=ov,fg=sn,Vk=ze,bs=(0,di.exports)("wks"),mg=Ya.Symbol,En=mg&&mg.for,gg=Vk?mg:mg&&mg.withoutSetter||gS,No=function(n){if(!Np(bs,n)||!fg&&"string"!=typeof bs[n]){var o="Symbol."+n;bs[n]=fg&&Np(mg,n)?mg[n]:Vk&&En?En(o):gg(o)}return bs[n]},ml=ae,Zl=Zt,_S=Go,Wo=Je,vS=z.TypeError,$t=No("toPrimitive"),Zo=function(n,o){if(!Zl(n)||_S(n))return n;var s,c=Wo(n,$t);if(c){if(void 0===o&&(o="default"),s=ml(c,n,o),!Zl(s)||_S(s))return s;throw vS("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(n,o){var s,c;if("string"===o&&gt(s=n.toString)&&!an(c=pt(s,n))||gt(s=n.valueOf)&&!an(c=pt(s,n))||"string"!==o&&gt(s=n.toString)&&!an(c=pt(s,n)))return c;throw gn("Can't convert object to primitive value")}(n,o)},Or=Go,kn=function(n){var o=Zo(n,"string");return Or(o)?o:o+""},em=Zt,jk=z.document,Vy=em(jk)&&em(jk.createElement),vn=function(n){return Vy?jk.createElement(n):{}},wa=vn,si=!k&&!N(function(){return 7!=Object.defineProperty(wa("div"),"a",{get:function(){return 7}}).a}),AS=ae,xV=de,Qk=Ee,jy=De,Mc=kn,LV=gc,yL=si,Hk=Object.getOwnPropertyDescriptor;H.f=k?Hk:function(n,o){if(n=jy(n),o=Mc(o),yL)try{return Hk(n,o)}catch{}if(LV(n,o))return Qk(!AS(xV.f,n,o),n[o])};var yo={},EL=k&&N(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),BV=Zt,is=z.String,SL=z.TypeError,iu=function(n){if(BV(n))return n;throw SL(is(n)+" is not an object")},FV=si,io=iu,IL=kn,UV=z.TypeError,Gk=Object.defineProperty,fr=Object.getOwnPropertyDescriptor;yo.f=k?EL?function(n,o,s){if(io(n),o=IL(o),io(s),"function"==typeof n&&"prototype"===o&&"value"in s&&"writable"in s&&!s.writable){var c=fr(n,o);c&&c.writable&&(n[o]=s.value,s={configurable:"configurable"in s?s.configurable:c.configurable,enumerable:"enumerable"in s?s.enumerable:c.enumerable,writable:!1})}return Gk(n,o,s)}:Gk:function(n,o,s){if(io(n),o=IL(o),io(s),FV)try{return Gk(n,o,s)}catch{}if("get"in s||"set"in s)throw UV("Accessors not supported");return"value"in s&&(n[o]=s.value),n};var VV=yo,Mh=Ee,ed=k?function(n,o,s){return VV.f(n,o,Mh(1,s))}:function(n,o,s){return n[o]=s,n},Bd={exports:{}},Wk=et,oo=Tr,J1=ue(Function.toString);Wk(oo.inspectSource)||(oo.inspectSource=function(n){return J1(n)});var Qy,Hy,Xr,Fd=oo.inspectSource,td=Fd,ir=z.WeakMap,jV=et(ir)&&/native code/.test(td(ir)),QV=ov,TL=(0,di.exports)("keys"),$1=function(n){return TL[n]||(TL[n]=QV(n))},Un={},ES=ue,Zr=Zt,Kk=ed,Wy=gc,sv=$1,bS=Un,rn="Object already initialized",xh=z.TypeError;if(jV||Tr.state){var Ud=Tr.state||(Tr.state=new(0,z.WeakMap)),SS=ES(Ud.get),Vd=ES(Ud.has),vg=ES(Ud.set);Qy=function(n,o){if(Vd(Ud,n))throw new xh(rn);return o.facade=n,vg(Ud,n,o),o},Hy=function(n){return SS(Ud,n)||{}},Xr=function(n){return Vd(Ud,n)}}else{var Ag=sv("state");bS[Ag]=!0,Qy=function(n,o){if(Wy(n,Ag))throw new xh(rn);return o.facade=n,Kk(n,Ag,o),o},Hy=function(n){return Wy(n,Ag)?n[Ag]:{}},Xr=function(n){return Wy(n,Ag)}}var Bu={set:Qy,get:Hy,has:Xr,enforce:function(n){return Xr(n)?Hy(n):Qy(n,{})},getterFor:function(n){return function(o){var s;if(!Zr(o)||(s=Hy(o)).type!==n)throw xh("Incompatible receiver, "+n+" required");return s}}},gl=k,zk=Function.prototype,Ss=gl&&Object.getOwnPropertyDescriptor,qa=gc(zk,"name"),nd={EXISTS:qa,PROPER:qa&&"something"===function(){}.name,CONFIGURABLE:qa&&(!gl||gl&&Ss(zk,"name").configurable)},po=z,Ky=et,Z1=gc,CS=ed,Yk=js,Mp=Fd,zy=nd.CONFIGURABLE,RL=Bu.get,Ta=Bu.enforce,qk=String(String).split("String");(Bd.exports=function(n,o,s,c){var h,g=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,A=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:o;Ky(s)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Z1(s,"name")||zy&&s.name!==v)&&CS(s,"name",v),(h=Ta(s)).source||(h.source=qk.join("string"==typeof v?v:""))),n!==po?(g?!A&&n[o]&&(f=!0):delete n[o],f?n[o]=s:CS(n,o,s)):f?n[o]=s:Yk(o,s)})(Function.prototype,"toString",function(){return Ky(this)&&RL(this).source||Mp(this)});var tm={},Yy=Math.ceil,Ni=Math.floor,xp=function(n){var o=+n;return o!=o||0===o?0:(o>0?Ni:Yy)(o)},eT=xp,pr=Math.max,Ja=Math.min,so=function(n,o){var s=eT(n);return s<0?pr(s+o,0):Ja(s,o)},fo=xp,ou=Math.min,jd=function(n){return n>0?ou(fo(n),9007199254740991):0},Fu=jd,Ac=function(n){return Fu(n.length)},dr=De,Fr=so,os=Ac,Uu=function(n){return function(o,s,c){var h,g=dr(o),f=os(g),A=Fr(c,f);if(n&&s!=s){for(;f>A;)if((h=g[A++])!=h)return!0}else for(;f>A;A++)if((n||A in g)&&g[A]===s)return n||A||0;return!n&&-1}},Qd={includes:Uu(!0),indexOf:Uu(!1)},Ra=gc,rd=De,$s=Qd.indexOf,qy=Un,yg=ue([].push),gi=function(n,o){var s,c=rd(n),h=0,g=[];for(s in c)!Ra(qy,s)&&Ra(c,s)&&yg(g,s);for(;o.length>h;)Ra(c,s=o[h++])&&(~$s(g,s)||yg(g,s));return g},_l=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lh=gi,tT=_l.concat("length","prototype");tm.f=Object.getOwnPropertyNames||function(n){return Lh(n,tT)};var nm={};nm.f=Object.getOwnPropertySymbols;var Oa=qt,rm=tm,Eg=nm,vl=iu,av=ue([].concat),IS=Oa("Reflect","ownKeys")||function(n){var o=rm.f(vl(n)),s=Eg.f;return s?av(o,s(n)):o},Mo=gc,nT=IS,cv=H,wS=yo,Lp=function(n,o,s){for(var c=nT(o),h=wS.f,g=cv.f,f=0;f<c.length;f++){var A=c[f];Mo(n,A)||s&&Mo(s,A)||h(n,A,g(o,A))}},Jy=N,bg=et,xc=/#|\.prototype\./,$y=function(n,o){var s=Ls[Vu(n)];return s==Bp||s!=Zn&&(bg(o)?Jy(o):!!o)},Vu=$y.normalize=function(n){return String(n).replace(xc,".").toLowerCase()},Ls=$y.data={},Zn=$y.NATIVE="N",Bp=$y.POLYFILL="P",Hd=$y,Bs=z,Ei=H.f,TS=ed,Xs=Bd.exports,Fp=js,OL=Lp,HV=Hd,Cs=function(n,o){var s,c,h,g,f,A=n.target,v=n.global,E=n.stat;if(s=v?Bs:E?Bs[A]||Fp(A,{}):(Bs[A]||{}).prototype)for(c in o){if(g=o[c],h=n.noTargetGet?(f=Ei(s,c))&&f.value:s[c],!HV(v?c:A+(E?".":"#")+c,n.forced)&&void 0!==h){if(typeof g==typeof h)continue;OL(g,h)}(n.sham||h&&h.sham)&&TS(g,"sham",!0),Xs(s,c,g,n)}},Jk=z.Promise,$k=Bd.exports,Xk=function(n,o,s){for(var c in o)$k(n,c,o[c],s);return n},Zk=et,e2=z.String,iT=z.TypeError,oT=ue,RS=iu,Lc=Object.setPrototypeOf||("__proto__"in{}?function(){var n,o=!1,s={};try{(n=oT(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(s,[]),o=s instanceof Array}catch{}return function(c,h){return RS(c),function(n){if("object"==typeof n||Zk(n))return n;throw iT("Can't set "+e2(n)+" as a prototype")}(h),o?n(c,h):c.__proto__=h,c}}():void 0),OS=yo.f,DL=gc,Xy=No("toStringTag"),Zy=function(n,o,s){n&&!s&&(n=n.prototype),n&&!DL(n,Xy)&&OS(n,Xy,{configurable:!0,value:o})},Sg=qt,eE=yo,Al=k,tE=No("species"),Cg=function(n){var o=Sg(n);Al&&o&&!o[tE]&&(0,eE.f)(o,tE,{configurable:!0,get:function(){return this}})},DS=Mr,t2=z.TypeError,Ig=function(n,o){if(DS(o,n))return n;throw t2("Incorrect invocation")},kL=jn,nE=L,sT=ue(ue.bind),wo=function(n,o){return kL(n),void 0===o?n:nE?sT(n,o):function(){return n.apply(o,arguments)}},Gd={},uv=Gd,kS=No("iterator"),lv=Array.prototype,PL=function(n){return void 0!==n&&(uv.Array===n||lv[kS]===n)},Da={};Da[No("toStringTag")]="z";var NL=z,GV="[object z]"===String(Da),PS=et,yc=Le,dv=No("toStringTag"),NS=NL.Object,im="Arguments"==yc(function(){return arguments}()),$a=GV?yc:function(n){var o,s,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(s=function(h,g){try{return h[g]}catch{}}(o=NS(n),dv))?s:im?yc(o):"Object"==(c=yc(o))&&PS(o.callee)?"Arguments":c},n2=$a,Bh=Je,r2=Gd,Up=No("iterator"),rE=function(n){if(null!=n)return Bh(n,Up)||Bh(n,"@@iterator")||r2[n2(n)]},MS=ae,ai=jn,aT=iu,WV=To,o2=rE,s2=z.TypeError,a2=function(n,o){var s=arguments.length<2?o2(n):o;if(ai(s))return aT(MS(s,n));throw s2(WV(n)+" is not iterable")},hv=ae,cT=iu,c2=Je,yn=wo,Hi=ae,Ec=iu,bc=To,Xa=PL,iE=Ac,wg=Mr,Wd=a2,Zs=rE,oE=function(n,o,s){var c,h;cT(n);try{if(!(c=c2(n,"return"))){if("throw"===o)throw s;return s}c=hv(c,n)}catch(g){h=!0,c=g}if("throw"===o)throw s;if(h)throw c;return cT(c),s},xS=z.TypeError,om=function(n,o){this.stopped=n,this.result=o},u2=om.prototype,Is=No("iterator"),ea=!1;try{var xo=0,wi={next:function(){return{done:!!xo++}},return:function(){ea=!0}};wi[Is]=function(){return this},Array.from(wi,function(){throw 2})}catch{}var sm=function(n,o){if(!o&&!ea)return!1;var s=!1;try{var c={};c[Is]=function(){return{next:function(){return{done:s=!0}}}},n(c)}catch{}return s},Dr=ue,uT=N,sE=et,l2=$a,aE=Fd,cE=function(){},LS=[],Tg=qt("Reflect","construct"),od=/^\s*(?:class|function)\b/,BS=Dr(od.exec),Kd=!od.exec(cE),Fh=function(n){if(!sE(n))return!1;try{return Tg(cE,LS,n),!0}catch{return!1}},FS=function(n){if(!sE(n))return!1;switch(l2(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Kd||!!BS(od,aE(n))}catch{return!0}};FS.sham=!0;var Vp,zd,uE,pv,ga=!Tg||uT(function(){var n;return Fh(Fh.call)||!Fh(Object)||!Fh(function(){n=!0})||n})?FS:Fh,Rg=ga,ts=To,Gi=z.TypeError,Lo=function(n){if(Rg(n))return n;throw Gi(ts(n)+" is not a constructor")},Yd=iu,fv=Lo,lT=No("species"),ju=function(n,o){var s,c=Yd(n).constructor;return void 0===c||null==(s=Yd(c)[lT])?o:fv(s)},US=Function.prototype,Do=US.apply,Sc=US.call,jp="object"==typeof Reflect&&Reflect.apply||(L?Sc.bind(Do):function(){return Sc.apply(Do,arguments)}),lE=qt("document","documentElement"),VS=ue([].slice),ko=/(?:ipad|iphone|ipod).*applewebkit/i.test(xr),Cc="process"==Le(z.process),Wr=z,mv=jp,dE=wo,jS=et,hT=gc,QS=N,d2=lE,HS=VS,gv=vn,pT=ko,yl=Cc,hE=Wr.setImmediate,mo=Wr.clearImmediate,h2=Wr.process,pE=Wr.Dispatch,fE=Wr.Function,p2=Wr.MessageChannel,GS=Wr.String,Qs=0,El={};try{Vp=Wr.location}catch{}var am=function(n){if(hT(El,n)){var o=El[n];delete El[n],o()}},Bc=function(n){return function(){am(n)}},fT=function(n){am(n.data)},ka=function(n){Wr.postMessage(GS(n),Vp.protocol+"//"+Vp.host)};hE&&mo||(hE=function(n){var o=HS(arguments,1);return El[++Qs]=function(){mv(jS(n)?n:fE(n),void 0,o)},zd(Qs),Qs},mo=function(n){delete El[n]},yl?zd=function(n){h2.nextTick(Bc(n))}:pE&&pE.now?zd=function(n){pE.now(Bc(n))}:p2&&!pT?(pv=(uE=new p2).port2,uE.port1.onmessage=fT,zd=dE(pv.postMessage,pv)):Wr.addEventListener&&jS(Wr.postMessage)&&!Wr.importScripts&&Vp&&"file:"!==Vp.protocol&&!QS(ka)?(zd=ka,Wr.addEventListener("message",fT,!1)):zd="onreadystatechange"in gv("script")?function(n){d2.appendChild(gv("script")).onreadystatechange=function(){d2.removeChild(this),am(n)}}:function(n){setTimeout(Bc(n),0)});var Og,Ic,cm,um,Hs,Za,lm,mE,gE={set:hE,clear:mo},mT=z,bl=/ipad|iphone|ipod/i.test(xr)&&void 0!==mT.Pebble,ML=/web0s(?!.*chrome)/i.test(xr),Uh=z,qd=wo,_E=gE.set,f2=ko,jh=bl,_v=ML,Gs=Cc,Dg=Uh.MutationObserver||Uh.WebKitMutationObserver,vv=Uh.document,gT=Uh.process,Qp=Uh.Promise,Hp=(0,H.f)(Uh,"queueMicrotask"),Qh=Hp&&Hp.value;Qh||(Og=function(){var n,o;for(Gs&&(n=gT.domain)&&n.exit();Ic;){o=Ic.fn,Ic=Ic.next;try{o()}catch(s){throw Ic?um():cm=void 0,s}}cm=void 0,n&&n.enter()},f2||Gs||_v||!Dg||!vv?!jh&&Qp&&Qp.resolve?((lm=Qp.resolve(void 0)).constructor=Qp,mE=qd(lm.then,lm),um=function(){mE(Og)}):Gs?um=function(){gT.nextTick(Og)}:(_E=qd(_E,Uh),um=function(){_E(Og)}):(Hs=!0,Za=vv.createTextNode(""),new Dg(Og).observe(Za,{characterData:!0}),um=function(){Za.data=Hs=!Hs}));var Av=Qh||function(n){var o={fn:n,next:void 0};cm&&(cm.next=o),Ic||(Ic=o,um()),cm=o},ss={},dm=jn,Gp=function(n){var o,s;this.promise=new n(function(c,h){if(void 0!==o||void 0!==s)throw TypeError("Bad Promise constructor");o=c,s=h}),this.resolve=dm(o),this.reject=dm(s)};ss.f=function(n){return new Gp(n)};var xL=iu,m2=Zt,Hn=ss,yv=function(n,o){if(xL(n),m2(o)&&o.constructor===n)return o;var s=Hn.f(n);return(0,s.resolve)(o),s.promise},KV=z,er=function(){this.head=null,this.tail=null};er.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var Yo,vE,LL,BL,Qu="object"==typeof window,hm=Cs,Bo=z,WS=qt,Fc=ae,KS=Jk,zS=Bd.exports,su=Xk,Wp=Lc,kg=Zy,Ev=Cg,Kp=jn,zp=et,pm=Zt,ec=Ig,Yp=Fd,fm=function(n,o,s){var c,h,g,f,A,v,E,w=!(!s||!s.AS_ENTRIES),R=!(!s||!s.IS_ITERATOR),x=!(!s||!s.INTERRUPTED),W=yn(o,s&&s.that),K=function(le){return c&&oE(c,"normal",le),new om(!0,le)},ne=function(le){return w?(Ec(le),x?W(le[0],le[1],K):W(le[0],le[1])):x?W(le,K):W(le)};if(R)c=n;else{if(!(h=Zs(n)))throw xS(bc(n)+" is not iterable");if(Xa(h)){for(g=0,f=iE(n);f>g;g++)if((A=ne(n[g]))&&wg(u2,A))return A;return new om(!1)}c=Wd(n,h)}for(v=c.next;!(E=Hi(v,c)).done;){try{A=ne(E.value)}catch(le){oE(c,"throw",le)}if("object"==typeof A&&A&&wg(u2,A))return A}return new om(!1)},bv=sm,au=ju,yE=gE.set,qp=Av,FL=yv,YS=ss,EE=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}},g2=er,bE=Bu,vT=Hd,_2=Qu,Pg=Cc,Sv=fa,Cv=No("species"),Uc="Promise",qS=bE.getterFor(Uc),Iv=bE.set,v2=bE.getterFor(Uc),Jp=KS&&KS.prototype,cu=KS,$p=Jp,JS=Bo.TypeError,$S=Bo.document,SE=Bo.process,Sl=YS.f,wv=Sl,AT=!!($S&&$S.createEvent&&Bo.dispatchEvent),Ng=zp(Bo.PromiseRejectionEvent),CE="unhandledrejection",yT=!1,IE=vT(Uc,function(){var n=Yp(cu),o=n!==String(cu);if(!o&&66===Sv)return!0;if(Sv>=51&&/native code/.test(n))return!1;var s=new cu(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(s.constructor={})[Cv]=c,!(yT=s.then(function(){})instanceof c)||!o&&_2&&!Ng}),A2=IE||!bv(function(n){cu.all(n).catch(function(){})}),wE=function(n){var o;return!(!pm(n)||!zp(o=n.then))&&o},TE=function(n,o){var s,c,h,g=o.value,f=1==o.state,A=f?n.ok:n.fail,v=n.resolve,E=n.reject,S=n.domain;try{A?(f||(2===o.rejection&&UL(o),o.rejection=1),!0===A?s=g:(S&&S.enter(),s=A(g),S&&(S.exit(),h=!0)),s===n.promise?E(JS("Promise-chain cycle")):(c=wE(s))?Fc(c,s,v,E):v(s)):E(g)}catch(w){S&&!h&&S.exit(),E(w)}},Xp=function(n,o){n.notified||(n.notified=!0,qp(function(){for(var s,c=n.reactions;s=c.get();)TE(s,n);n.notified=!1,o&&!n.rejection&&ET(n)}))},RE=function(n,o,s){var c,h;AT?((c=$S.createEvent("Event")).promise=o,c.reason=s,c.initEvent(n,!1,!0),Bo.dispatchEvent(c)):c={promise:o,reason:s},!Ng&&(h=Bo["on"+n])?h(c):n===CE&&function(n,o){var s=KV.console;s&&s.error&&(1==arguments.length?s.error(n):s.error(n,o))}("Unhandled promise rejection",s)},ET=function(n){Fc(yE,Bo,function(){var o,s=n.facade,c=n.value;if(OE(n)&&(o=EE(function(){Pg?SE.emit("unhandledRejection",c,s):RE(CE,s,c)}),n.rejection=Pg||OE(n)?2:1,o.error))throw o.value})},OE=function(n){return 1!==n.rejection&&!n.parent},UL=function(n){Fc(yE,Bo,function(){var o=n.facade;Pg?SE.emit("rejectionHandled",o):RE("rejectionhandled",o,n.value)})},Zp=function(n,o,s){return function(c){n(o,c,s)}},mm=function(n,o,s){n.done||(n.done=!0,s&&(n=s),n.value=o,n.state=2,Xp(n,!0))},XS=function(n,o,s){if(!n.done){n.done=!0,s&&(n=s);try{if(n.facade===o)throw JS("Promise can't be resolved itself");var c=wE(o);c?qp(function(){var h={done:!1};try{Fc(c,o,Zp(XS,h,n),Zp(mm,h,n))}catch(g){mm(h,g,n)}}):(n.value=o,n.state=1,Xp(n,!1))}catch(h){mm({done:!1},h,n)}}};if(IE&&($p=(cu=function(n){ec(this,$p),Kp(n),Fc(Yo,this);var o=qS(this);try{n(Zp(XS,o),Zp(mm,o))}catch(s){mm(o,s)}}).prototype,(Yo=function(n){Iv(this,{type:Uc,done:!1,notified:!1,parent:!1,reactions:new g2,rejection:!1,state:0,value:void 0})}).prototype=su($p,{then:function(n,o){var s=v2(this),c=Sl(au(this,cu));return s.parent=!0,c.ok=!zp(n)||n,c.fail=zp(o)&&o,c.domain=Pg?SE.domain:void 0,0==s.state?s.reactions.add(c):qp(function(){TE(c,s)}),c.promise},catch:function(n){return this.then(void 0,n)}}),vE=function(){var n=new Yo,o=qS(n);this.promise=n,this.resolve=Zp(XS,o),this.reject=Zp(mm,o)},YS.f=Sl=function(n){return n===cu||n===LL?new vE(n):wv(n)},zp(KS)&&Jp!==Object.prototype)){BL=Jp.then,yT||(zS(Jp,"then",function(n,o){var s=this;return new cu(function(c,h){Fc(BL,s,c,h)}).then(n,o)},{unsafe:!0}),zS(Jp,"catch",$p.catch,{unsafe:!0}));try{delete Jp.constructor}catch{}Wp&&Wp(Jp,$p)}hm({global:!0,wrap:!0,forced:IE},{Promise:cu}),kg(cu,Uc,!1),Ev(Uc),LL=WS(Uc),hm({target:Uc,stat:!0,forced:IE},{reject:function(n){var o=Sl(this);return Fc(o.reject,void 0,n),o.promise}}),hm({target:Uc,stat:!0,forced:IE},{resolve:function(n){return FL(this,n)}}),hm({target:Uc,stat:!0,forced:A2},{all:function(n){var o=this,s=Sl(o),c=s.resolve,h=s.reject,g=EE(function(){var f=Kp(o.resolve),A=[],v=0,E=1;fm(n,function(S){var w=v++,R=!1;E++,Fc(f,o,S).then(function(x){R||(R=!0,A[w]=x,--E||c(A))},h)}),--E||c(A)});return g.error&&h(g.value),s.promise},race:function(n){var o=this,s=Sl(o),c=s.reject,h=EE(function(){var g=Kp(o.resolve);fm(n,function(f){Fc(g,o,f).then(s.resolve,c)})});return h.error&&c(h.value),s.promise}});var VL=Cs,zV=jp,DE=ue,Tv=N,ZS=z.Array,kE=qt("JSON","stringify"),Mg=DE(/./.exec),eC=DE("".charAt),y2=DE("".charCodeAt),E2=DE("".replace),tC=DE(1..toString),nC=/[\uD800-\uDFFF]/g,rC=/^[\uD800-\uDBFF]$/,iC=/^[\uDC00-\uDFFF]$/,bT=function(n,o,s){var c=eC(s,o-1),h=eC(s,o+1);return Mg(rC,n)&&!Mg(iC,h)||Mg(iC,n)&&!Mg(rC,c)?"\\u"+tC(y2(n,0),16):n},uu=Tv(function(){return'"\\udf06\\ud834"'!==kE("\udf06\ud834")||'"\\udead"'!==kE("\udead")});kE&&VL({target:"JSON",stat:!0,forced:uu},{stringify:function(n,o,s){for(var c=0,h=arguments.length,g=ZS(h);c<h;c++)g[c]=arguments[c];var f=zV(kE,null,g);return"string"==typeof f?E2(f,nC,bT):f}});var Fs=function(n){try{return!!n()}catch{return!0}},PE=!Fs(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),ST=PE,oC=Function.prototype,gm=oC.call,CT=ST&&oC.bind.bind(gm,gm),Fi=ST?function(n){return n&&CT(n)}:function(n){return n&&function(){return gm.apply(n,arguments)}},tc=Fi({}.isPrototypeOf),aC=function(n){return n&&n.Math==Math&&n},ni=aC("object"==typeof globalThis&&globalThis)||aC("object"==typeof window&&window)||aC("object"==typeof self&&self)||aC("object"==typeof Y&&Y)||function(){return this}()||Function("return this")(),Rv=Function.prototype,cC=Rv.apply,NE=Rv.call,na="object"==typeof Reflect&&Reflect.apply||(PE?NE.bind(cC):function(){return NE.apply(cC,arguments)}),ws=function(n){return"function"==typeof n},xg={},Hu=!Fs(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Lg=Function.prototype.call,lu=PE?Lg.bind(Lg):function(){return Lg.apply(Lg,arguments)},Ov={},uC={}.propertyIsEnumerable,lC=Object.getOwnPropertyDescriptor,b2=lC&&!uC.call({1:2},1);Ov.f=b2?function(n){var o=lC(this,n);return!!o&&o.enumerable}:uC;var Hh,nc,Gh=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}},wT=Fi,TT=wT({}.toString),S2=wT("".slice),Pa=function(n){return S2(TT(n),8,-1)},jL=Fs,Pn=Pa,Cl=ni.Object,hC=Fi("".split),_a=jL(function(){return!Cl("z").propertyIsEnumerable(0)})?function(n){return"String"==Pn(n)?hC(n,""):Cl(n)}:Cl,Jd=ni.TypeError,Ir=function(n){if(null==n)throw Jd("Can't call method on "+n);return n},C2=_a,I2=Ir,Il=function(n){return C2(I2(n))},RT=ws,du=function(n){return"object"==typeof n?null!==n:RT(n)},Wh={},pC=Wh,ME=ni,Dv=ws,fC=function(n){return Dv(n)?n:void 0},Gu=function(n,o){return arguments.length<2?fC(pC[n])||fC(ME[n]):pC[n]&&pC[n][o]||ME[n]&&ME[n][o]},Kh=Gu("navigator","userAgent")||"",mC=Kh,sd=ni.process,OT=ni.Deno,kv=sd&&sd.versions||OT&&OT.version,_m=kv&&kv.v8;_m&&(nc=(Hh=_m.split("."))[0]>0&&Hh[0]<4?1:+(Hh[0]+Hh[1])),!nc&&mC&&(!(Hh=mC.match(/Edge\/(\d+)/))||Hh[1]>=74)&&(Hh=mC.match(/Chrome\/(\d+)/))&&(nc=+Hh[1]);var $d=nc,DT=$d,zh=!!Object.getOwnPropertySymbols&&!Fs(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&DT&&DT<41}),Xd=zh&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,kT=Gu,_t=ws,Pv=tc,Ts=ni.Object,Nv=Xd?function(n){return"symbol"==typeof n}:function(n){var o=kT("Symbol");return _t(o)&&Pv(o.prototype,Ts(n))},Bg=ni.String,Mv=function(n){try{return Bg(n)}catch{return"Object"}},PT=ws,gC=Mv,LE=ni.TypeError,ad=function(n){if(PT(n))return n;throw LE(gC(n)+" is not a function")},xv=ad,_C=function(n,o){var s=n[o];return null==s?void 0:xv(s)},BE=lu,vC=ws,AC=du,NT=ni.TypeError,vm={exports:{}},MT=ni,FE=Object.defineProperty,ef="__core-js_shared__",Us=ni[ef]||function(n,o){try{FE(MT,n,{value:o,configurable:!0,writable:!0})}catch{MT[n]=o}return o}(ef,{}),UE=Us;(vm.exports=function(n,o){return UE[n]||(UE[n]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var QL=Ir,LT=ni.Object,va=function(n){return LT(QL(n))},BT=va,Lv=Fi({}.hasOwnProperty),Ws=Object.hasOwn||function(n,o){return Lv(BT(n),o)},tf=Fi,VE=0,Na=Math.random(),Am=tf(1..toString),Qr=function(n){return"Symbol("+(void 0===n?"":n)+")_"+Am(++VE+Na,36)},yC=ni,nf=Ws,Kr=Qr,Wu=zh,Ku=Xd,rc=(0,vm.exports)("wks"),Fg=yC.Symbol,Ks=Fg&&Fg.for,HL=Ku?Fg:Fg&&Fg.withoutSetter||Kr,Rs=function(n){if(!nf(rc,n)||!Wu&&"string"!=typeof rc[n]){var o="Symbol."+n;rc[n]=Wu&&nf(Fg,n)?Fg[n]:Ku&&Ks?Ks(o):HL(o)}return rc[n]},T2=lu,EC=du,ao=Nv,Ug=_C,D2=ni.TypeError,Bv=Rs("toPrimitive"),Zd=function(n,o){if(!EC(n)||ao(n))return n;var s,c=Ug(n,Bv);if(c){if(void 0===o&&(o="default"),s=T2(c,n,o),!EC(s)||ao(s))return s;throw D2("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(n,o){var s,c;if("string"===o&&vC(s=n.toString)&&!AC(c=BE(s,n))||vC(s=n.valueOf)&&!AC(c=BE(s,n))||"string"!==o&&vC(s=n.toString)&&!AC(c=BE(s,n)))return c;throw NT("Can't convert object to primitive value")}(n,o)},Vg=Nv,Yh=function(n){var o=Zd(n,"string");return Vg(o)?o:o+""},bC=du,jE=ni.document,GL=bC(jE)&&bC(jE.createElement),SC=function(n){return GL?jE.createElement(n):{}},FT=SC,QE=!Hu&&!Fs(function(){return 7!=Object.defineProperty(FT("div"),"a",{get:function(){return 7}}).a}),k2=lu,P2=Ov,Fv=Gh,N2=Il,jg=Yh,M2=Ws,UT=QE,rf=Object.getOwnPropertyDescriptor;xg.f=Hu?rf:function(n,o){if(n=N2(n),o=jg(o),UT)try{return rf(n,o)}catch{}if(M2(n,o))return Fv(!k2(P2.f,n,o),n[o])};var HE=Fs,VT=ws,ym=/#|\.prototype\./,Em=function(n,o){var s=Uv[$i(n)];return s==GE||s!=IC&&(VT(o)?HE(o):!!o)},$i=Em.normalize=function(n){return String(n).replace(ym,".").toLowerCase()},Uv=Em.data={},IC=Em.NATIVE="N",GE=Em.POLYFILL="P",wC=Em,jT=ad,x2=PE,L2=Fi(Fi.bind),qh=function(n,o){return jT(n),void 0===o?n:x2?L2(n,o):function(){return n.apply(o,arguments)}},zu={},TC=Hu&&Fs(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Vv=du,QT=ni.String,eh=ni.TypeError,hu=function(n){if(Vv(n))return n;throw eh(QT(n)+" is not an object")},HT=QE,WE=hu,OC=Yh,DC=ni.TypeError,F2=Object.defineProperty,kC=Object.getOwnPropertyDescriptor;zu.f=Hu?TC?function(n,o,s){if(WE(n),o=OC(o),WE(s),"function"==typeof n&&"prototype"===o&&"value"in s&&"writable"in s&&!s.writable){var c=kC(n,o);c&&c.writable&&(n[o]=s.value,s={configurable:"configurable"in s?s.configurable:c.configurable,enumerable:"enumerable"in s?s.enumerable:c.enumerable,writable:!1})}return F2(n,o,s)}:F2:function(n,o,s){if(WE(n),o=OC(o),WE(s),HT)try{return F2(n,o,s)}catch{}if("get"in s||"set"in s)throw DC("Accessors not supported");return"value"in s&&(n[o]=s.value),n};var WT=zu,Jh=Gh,sf=Hu?function(n,o,s){return WT.f(n,o,Jh(1,s))}:function(n,o,s){return n[o]=s,n},$h=ni,zE=na,U2=Fi,NC=ws,jv=xg.f,af=wC,Xh=Wh,YE=qh,bm=sf,KT=Ws,V2=function(n){var o=function(s,c,h){if(this instanceof o){switch(arguments.length){case 0:return new n;case 1:return new n(s);case 2:return new n(s,c)}return new n(s,c,h)}return zE(n,this,arguments)};return o.prototype=n.prototype,o},as=function(n,o){var s,c,h,g,f,A,v,E,S=n.target,w=n.global,R=n.stat,x=n.proto,W=w?$h:R?$h[S]:($h[S]||{}).prototype,K=w?Xh:Xh[S]||bm(Xh,S,{})[S],ne=K.prototype;for(h in o)s=!af(w?h:S+(R?".":"#")+h,n.forced)&&W&&KT(W,h),f=K[h],s&&(A=n.noTargetGet?(E=jv(W,h))&&E.value:W[h]),g=s&&A?A:o[h],s&&typeof f==typeof g||(v=n.bind&&s?YE(g,$h):n.wrap&&s?V2(g):x&&NC(g)?U2(g):g,(n.sham||g&&g.sham||f&&f.sham)&&bm(v,"sham",!0),bm(K,h,v),x&&(KT(Xh,c=S+"Prototype")||bm(Xh,c,{}),bm(Xh[c],h,g),n.real&&ne&&!ne[h]&&bm(ne,h,g)))},MC=Math.ceil,zT=Math.floor,xC=function(n){var o=+n;return o!=o||0===o?0:(o>0?zT:MC)(o)},LC=xC,j2=Math.min,Zh=function(n){return function(n){return n>0?j2(LC(n),9007199254740991):0}(n.length)},qT=ad,KL=va,Q2=_a,Qg=Zh,H2=ni.TypeError,Sm=function(n){return function(o,s,c,h){qT(s);var g=KL(o),f=Q2(g),A=Qg(g),v=n?A-1:0,E=n?-1:1;if(c<2)for(;;){if(v in f){h=f[v],v+=E;break}if(v+=E,n?v<0:A<=v)throw H2("Reduce of empty array with no initial value")}for(;n?v>=0:A>v;v+=E)v in f&&(h=s(h,f[v],v,g));return h}},Oi={left:Sm(!1),right:Sm(!0)},G2=Fs,cf=function(n,o){var s=[][n];return!!s&&G2(function(){s.call(null,o||function(){throw 1},1)})},pu="process"==Pa(ni.process),qE=Oi.left,JE=$d,uf=pu;as({target:"Array",proto:!0,forced:!cf("reduce")||!uf&&JE>79&&JE<83},{reduce:function(n){var o=arguments.length;return qE(this,n,o,o>1?arguments[1]:void 0)}});var Qv=Wh,th=function(n){return Qv[n+"Prototype"]},$E=th("Array").reduce,W2=tc,Hv=$E,Yu=Array.prototype,JT=function(n){var o=n.reduce;return n===Yu||W2(Yu,n)&&o===Yu.reduce?Hv:o},nh=JT,$T=$a,XT=z.String,lf=function(n){if("Symbol"===$T(n))throw TypeError("Cannot convert a Symbol value to a string");return XT(n)},YV=iu,zL=function(){var n=YV(this),o="";return n.global&&(o+="g"),n.ignoreCase&&(o+="i"),n.multiline&&(o+="m"),n.dotAll&&(o+="s"),n.unicode&&(o+="u"),n.sticky&&(o+="y"),o},Hg=N,ep=z.RegExp,K2=Hg(function(){var n=ep("a","y");return n.lastIndex=2,null!=n.exec("abcd")}),qV=K2||Hg(function(){return!ep("a","y").sticky}),JV={BROKEN_CARET:K2||Hg(function(){var n=ep("^r","gy");return n.lastIndex=2,null!=n.exec("str")}),MISSED_STICKY:qV,UNSUPPORTED_Y:K2},YL={},qL=gi,c7=_l,z2=yo,XE=iu,Y2=De,q2=Object.keys||function(n){return qL(n,c7)};YL.f=k&&!EL?Object.defineProperties:function(n,o){XE(n);for(var s,c=Y2(o),h=q2(o),g=h.length,f=0;g>f;)z2.f(n,s=h[f++],c[s]);return n};var fu,FC=iu,ZT=YL,$L=_l,XV=Un,ZV=lE,e4=vn,J2=$1("IE_PROTO"),$2=function(){},XL=function(n){return"<script>"+n+"<\/script>"},ZL=function(n){n.write(XL("")),n.close();var o=n.parentWindow.Object;return n=null,o},ci=function(){try{fu=new ActiveXObject("htmlfile")}catch{}var n,o;ci=typeof document<"u"?document.domain&&fu?ZL(fu):((o=e4("iframe")).style.display="none",ZV.appendChild(o),o.src=String("javascript:"),(n=o.contentWindow.document).open(),n.write(XL("document.F=Object")),n.close(),n.F):ZL(fu);for(var s=$L.length;s--;)delete ci.prototype[$L[s]];return ci()};XV[J2]=!0;var n,o,Cn=Object.create||function(n,o){var s;return null!==n?($2.prototype=FC(n),s=new $2,$2.prototype=null,s[J2]=n):s=ci(),void 0===o?s:ZT.f(s,o)},tB=z.RegExp,X2=N(function(){var n=tB(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}),Z2=z.RegExp,eR=N(function(){var n=Z2("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}),Cm=ae,Gv=ue,tR=lf,nB=zL,nR=JV,ic=Cn,UC=Bu.get,df=X2,ZE=eR,iR=(0,di.exports)("native-string-replace",String.prototype.replace),VC=RegExp.prototype.exec,jC=VC,rB=Gv("".charAt),oR=Gv("".indexOf),sR=Gv("".replace),aR=Gv("".slice),QC=(o=/b*/g,Cm(VC,n=/a/,"a"),Cm(VC,o,"a"),0!==n.lastIndex||0!==o.lastIndex),hf=nR.BROKEN_CARET,eb=void 0!==/()??/.exec("")[1];(QC||eb||hf||df||ZE)&&(jC=function(n){var o,s,c,h,g,f,A,v=this,E=UC(v),S=tR(n),w=E.raw;if(w)return w.lastIndex=v.lastIndex,o=Cm(jC,w,S),v.lastIndex=w.lastIndex,o;var R=E.groups,x=hf&&v.sticky,W=Cm(nB,v),K=v.source,ne=0,le=S;if(x&&(W=sR(W,"y",""),-1===oR(W,"g")&&(W+="g"),le=aR(S,v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==rB(S,v.lastIndex-1))&&(K="(?: "+K+")",le=" "+le,ne++),s=new RegExp("^(?:"+K+")",W)),eb&&(s=new RegExp("^"+K+"$(?!\\s)",W)),QC&&(c=v.lastIndex),h=Cm(VC,x?s:v,le),x?h?(h.input=aR(h.input,ne),h[0]=aR(h[0],ne),h.index=v.lastIndex,v.lastIndex+=h[0].length):v.lastIndex=0:QC&&h&&(v.lastIndex=v.global?h.index+h[0].length:c),eb&&h&&h.length>1&&Cm(iR,h[0],s,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(h[g]=void 0)}),h&&R)for(h.groups=f=ic(null),g=0;g<R.length;g++)f[(A=R[g])[0]]=h[A[1]];return h});var Wv=jC;Cs({target:"RegExp",proto:!0,forced:/./.exec!==Wv},{exec:Wv});var tb=Cn,eP=yo,nb=No("unscopables"),HC=Array.prototype;null==HC[nb]&&eP.f(HC,nb,{configurable:!0,value:tb(null)});var Im,GC,WC,tP=!N(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),cR=z,nP=gc,KC=et,uR=Xl,rP=tP,n4=$1("IE_PROTO"),zC=cR.Object,iB=zC.prototype,YC=rP?zC.getPrototypeOf:function(n){var o=uR(n);if(nP(o,n4))return o[n4];var s=o.constructor;return KC(s)&&o instanceof s?s.prototype:o instanceof zC?iB:null},yt=N,rb=et,lR=YC,dR=Bd.exports,qC=No("iterator"),Kv=!1;[].keys&&("next"in(WC=[].keys())?(GC=lR(lR(WC)))!==Object.prototype&&(Im=GC):Kv=!0),(null==Im||yt(function(){var n={};return Im[qC].call(n)!==n}))&&(Im={}),rb(Im[qC])||dR(Im,qC,function(){return this});var pf={IteratorPrototype:Im,BUGGY_SAFARI_ITERATORS:Kv},wm=pf.IteratorPrototype,JC=Cn,zv=Ee,$C=Zy,ib=Gd,hR=function(){return this},XC=Cs,iP=ae,oB=et,sB=YC,aB=Lc,cB=Zy,uB=ed,ff=Bd.exports,ob=Gd,mf=nd.PROPER,sP=nd.CONFIGURABLE,mu=pf.IteratorPrototype,Gg=pf.BUGGY_SAFARI_ITERATORS,rh=No("iterator"),Wg="values",sb="entries",aP=function(){return this},Yv=De,ZC=function(n){HC[nb][n]=!0},fR=Gd,eI=yo.f,qv=k,tI="Array Iterator",qu=Bu.set,Jv=Bu.getterFor(tI),cP=function(n,o,s,c,h,g,f){!function(n,o,s,c){var h=o+" Iterator";n.prototype=JC(wm,{next:zv(+!c,s)}),$C(n,h,!1),ib[h]=hR}(s,o,c);var A,v,E,S=function(le){if(le===h&&K)return K;if(!Gg&&le in x)return x[le];switch(le){case"keys":case Wg:case sb:return function(){return new s(this,le)}}return function(){return new s(this)}},w=o+" Iterator",R=!1,x=n.prototype,W=x[rh]||x["@@iterator"]||h&&x[h],K=!Gg&&W||S(h),ne="Array"==o&&x.entries||W;if(ne&&(A=sB(ne.call(new n)))!==Object.prototype&&A.next&&(sB(A)!==mu&&(aB?aB(A,mu):oB(A[rh])||ff(A,rh,aP)),cB(A,w,!0)),mf&&h==Wg&&W&&W.name!==Wg&&(sP?uB(x,"name",Wg):(R=!0,K=function(){return iP(W,this)})),h)if(v={values:S(Wg),keys:g?K:S("keys"),entries:S(sb)},f)for(E in v)(Gg||R||!(E in x))&&ff(x,E,v[E]);else XC({target:o,proto:!0,forced:Gg||R},v);return x[rh]!==K&&ff(x,rh,K,{name:h}),ob[o]=K,v}(Array,"Array",function(n,o){qu(this,{type:tI,target:Yv(n),index:0,kind:o})},function(){var n=Jv(this),o=n.target,s=n.kind,c=n.index++;return!o||c>=o.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==s?{value:c,done:!1}:"values"==s?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),jc=fR.Arguments=fR.Array;if(ZC("keys"),ZC("values"),ZC("entries"),qv&&"values"!==jc.name)try{eI(jc,"name",{value:"values"})}catch{}var Kg=vn("span").classList,nI=Kg&&Kg.constructor&&Kg.constructor.prototype,rI=z,iI={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},mR=nI===Object.prototype?void 0:nI,Yg=cP,tp=ed,qg=No,wl=qg("iterator"),ub=qg("toStringTag"),gu=Yg.values,np=function(n,o){if(n){if(n[wl]!==gu)try{tp(n,wl,gu)}catch{n[wl]=gu}if(n[ub]||tp(n,ub,o),iI[o])for(var s in Yg)if(n[s]!==Yg[s])try{tp(n,s,Yg[s])}catch{n[s]=Yg[s]}}};for(var Tm in iI)np(rI[Tm]&&rI[Tm].prototype,Tm);np(mR,"DOMTokenList");var Jg=et,lb=Zt,db=Lc,$v=function(n,o,s){var c,h;return db&&Jg(c=o.constructor)&&c!==s&&lb(h=c.prototype)&&h!==s.prototype&&db(n,h),n},oI=lf,$g=function(n,o){return void 0===n?arguments.length<2?"":o:oI(n)},gf=Zt,ih=ed,Xv=ue("".replace),sI=String(Error("zxcasd").stack),Rm=/\n\s*at [^:]*:[^\n]*/,rp=Rm.test(sI),hb=function(n,o){if(rp&&"string"==typeof n)for(;o--;)n=Xv(n,Rm,"");return n},aI=Ee,cI=!N(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",aI(1,7)),7!==n.stack)}),uI=qt,Zv=gc,gR=ed,uP=Mr,pb=Lc,_R=Lp,lI=$v,vR=$g,lP=function(n,o){gf(o)&&"cause"in o&&ih(n,"cause",o.cause)},AR=hb,yR=cI,fb=Cs,Lr=jp,ER=function(n,o,s,c){var h=c?2:1,g=n.split("."),f=g[g.length-1],A=uI.apply(null,g);if(A){var v=A.prototype;if(Zv(v,"cause")&&delete v.cause,!s)return A;var E=uI("Error"),S=o(function(w,R){var x=vR(c?R:w,void 0),W=c?new A(w):new A;return void 0!==x&&gR(W,"message",x),yR&&gR(W,"stack",AR(W.stack,2)),this&&uP(v,this)&&lI(W,this,S),arguments.length>h&&lP(W,arguments[h]),W});S.prototype=v,"Error"!==f&&(pb?pb(S,E):_R(S,E,{name:!0})),_R(S,A);try{v.name!==f&&gR(v,"name",f),v.constructor=S}catch{}return S}},dI=z.WebAssembly,hI=7!==Error("e",{cause:7}).cause,Zg=function(n,o){var s={};s[n]=ER(n,o,hI),fb({global:!0,forced:hI},s)},pI=function(n,o){if(dI&&dI[n]){var s={};s[n]=ER("WebAssembly."+n,o,hI),fb({target:"WebAssembly",stat:!0,forced:hI},s)}};Zg("Error",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("EvalError",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("RangeError",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("ReferenceError",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("SyntaxError",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("TypeError",function(n){return function(o){return Lr(n,this,arguments)}}),Zg("URIError",function(n){return function(o){return Lr(n,this,arguments)}}),pI("CompileError",function(n){return function(o){return Lr(n,this,arguments)}}),pI("LinkError",function(n){return function(o){return Lr(n,this,arguments)}}),pI("RuntimeError",function(n){return function(o){return Lr(n,this,arguments)}});let bR=!0,SR=!0;function wc(n,o,s){const c=n.match(o);return c&&c.length>=s&&parseInt(c[s],10)}function e_(n,o,s){if(!n.RTCPeerConnection)return;const c=n.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(f,A){if(f!==o)return h.apply(this,arguments);const v=E=>{const S=s(E);S&&(A.handleEvent?A.handleEvent(S):A(S))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(A,v),h.apply(this,[f,v])};const g=c.removeEventListener;c.removeEventListener=function(f,A){if(f!==o||!this._eventMap||!this._eventMap[o])return g.apply(this,arguments);if(!this._eventMap[o].has(A))return g.apply(this,arguments);const v=this._eventMap[o].get(A);return this._eventMap[o].delete(A),0===this._eventMap[o].size&&delete this._eventMap[o],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[f,v])},Object.defineProperty(c,"on"+o,{get(){return this["_on"+o]},set(f){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),f&&this.addEventListener(o,this["_on"+o]=f)},enumerable:!0,configurable:!0})}function fI(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(bR=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function dB(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(SR=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function dP(){if("object"==typeof window){if(bR)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function t_(n,o){SR&&console.warn(n+" is deprecated, please use "+o+" instead.")}function Om(n){const o={browser:null,version:null};if(void 0===n||!n.navigator)return o.browser="Not a browser.",o;const{navigator:s}=n;if(s.mozGetUserMedia)o.browser="firefox",o.version=wc(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)o.browser="chrome",o.version=wc(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.mediaDevices&&s.userAgent.match(/Edge\/(\d+).(\d+)$/))o.browser="edge",o.version=wc(s.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return o.browser="Not a supported browser.",o;o.browser="safari",o.version=wc(s.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return o}function Dm(n){return"[object Object]"===Object.prototype.toString.call(n)}function Tl(n){var o;return Dm(n)?nh(o=Object.keys(n)).call(o,function(s,c){const h=Dm(n[c]),g=h?Tl(n[c]):n[c],f=h&&!Object.keys(g).length;return void 0===g||f?s:Object.assign(s,{[c]:g})},{}):n}function Et(n,o,s){const c=s?"outbound-rtp":"inbound-rtp",h=new Map;if(null===o)return h;const g=[];return n.forEach(f=>{"track"===f.type&&f.trackIdentifier===o.id&&g.push(f)}),g.forEach(f=>{n.forEach(A=>{A.type===c&&A.trackId===f.id&&function v(E,S,w){S&&!w.has(S.id)&&(w.set(S.id,S),Object.keys(S).forEach(R=>{R.endsWith("Id")?v(E,E.get(S[R]),w):R.endsWith("Ids")&&S[R].forEach(x=>{v(E,E.get(x),w)})}))}(n,A,h)})}),h}var hB=Qr,mI=(0,vm.exports)("keys"),Rl=function(n){return mI[n]||(mI[n]=hB(n))},ip=!Fs(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),eA=ni,qo=Ws,km=ws,Ju=va,oc=ip,Xi=Rl("IE_PROTO"),oh=eA.Object,tA=oh.prototype,Pm=oc?oh.getPrototypeOf:function(n){var o=Ju(n);if(qo(o,Xi))return o[Xi];var s=o.constructor;return km(s)&&o instanceof s?s.prototype:o instanceof oh?tA:null},Aa=ws,nA=ni.String,rA=ni.TypeError,iA=Fi,oA=hu,pP=Object.setPrototypeOf||("__proto__"in{}?function(){var n,o=!1,s={};try{(n=iA(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(s,[]),o=s instanceof Array}catch{}return function(c,h){return oA(c),function(n){if("object"==typeof n||Aa(n))return n;throw rA("Can't set "+nA(n)+" as a prototype")}(h),o?n(c,h):c.__proto__=h,c}}():void 0),mb={},fP=xC,mP=Math.max,gP=Math.min,gI=function(n,o){var s=fP(n);return s<0?mP(s+o,0):gP(s,o)},_P=Il,Nm=gI,pB=Zh,vP=function(n){return function(o,s,c){var h,g=_P(o),f=pB(g),A=Nm(c,f);if(n&&s!=s){for(;f>A;)if((h=g[A++])!=h)return!0}else for(;f>A;A++)if((n||A in g)&&g[A]===s)return n||A||0;return!n&&-1}},ar={includes:vP(!0),indexOf:vP(!1)},gb={},sh=Ws,Vn=Il,CR=ar.indexOf,fB=gb,wn=Fi([].push),Qn=function(n,o){var s,c=Vn(n),h=0,g=[];for(s in c)!sh(fB,s)&&sh(c,s)&&wn(g,s);for(;o.length>h;)sh(c,s=o[h++])&&(~CR(g,s)||wn(g,s));return g},Eo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Jo=Qn,Di=Eo.concat("length","prototype");mb.f=Object.getOwnPropertyNames||function(n){return Jo(n,Di)};var Qc={};Qc.f=Object.getOwnPropertySymbols;var vu=Gu,Fo=mb,sA=Qc,IR=hu,_b=Fi([].concat),co=vu("Reflect","ownKeys")||function(n){var o=Fo.f(IR(n)),s=sA.f;return s?_b(o,s(n)):o},aA=Ws,wR=co,AP=xg,_I=zu,$u={},ii=Qn,TR=Eo,Hc=Object.keys||function(n){return ii(n,TR)},vb=zu,EP=hu,bP=Il,SP=Hc;$u.f=Hu&&!TC?Object.defineProperties:function(n,o){EP(n);for(var s,c=bP(o),h=SP(o),g=h.length,f=0;g>f;)vb.f(n,s=h[f++],c[s]);return n};var Ab,vI=Gu("document","documentElement"),AI=hu,RR=$u,cA=Eo,yI=gb,_f=vI,CP=SC,IP=Rl("IE_PROTO"),uA=function(){},vf=function(n){return"<script>"+n+"<\/script>"},Mm=function(n){n.write(vf("")),n.close();var o=n.parentWindow.Object;return n=null,o},yb=function(){try{Ab=new ActiveXObject("htmlfile")}catch{}var n,o;yb=typeof document<"u"?document.domain&&Ab?Mm(Ab):((o=CP("iframe")).style.display="none",_f.appendChild(o),o.src=String("javascript:"),(n=o.contentWindow.document).open(),n.write(vf("document.F=Object")),n.close(),n.F):Mm(Ab);for(var s=cA.length;s--;)delete yb.prototype[cA[s]];return yb()};yI[IP]=!0;var r_=Object.create||function(n,o){var s;return null!==n?(uA.prototype=AI(n),s=new uA,uA.prototype=null,s[IP]=n):s=yb(),void 0===o?s:RR.f(s,o)},r4=Fi("".replace),wP=String(Error("zxcasd").stack),Eb=/\n\s*at [^:]*:[^\n]*/,mB=Eb.test(wP),op=du,TP=sf,cs={},Xu=cs,Au=Rs("iterator"),bb=Array.prototype,lA=function(n){return void 0!==n&&(Xu.Array===n||bb[Au]===n)},Sb={};Sb[Rs("toStringTag")]="z";var dA="[object z]"===String(Sb),OR=ni,i_=dA,gB=ws,o_=Pa,EI=Rs("toStringTag"),bI=OR.Object,ns="Arguments"==o_(function(){return arguments}()),Zu=i_?o_:function(n){var o,s,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(s=function(h,g){try{return h[g]}catch{}}(o=bI(n),EI))?s:ns?o_(o):"Object"==(c=o_(o))&&gB(o.callee)?"Arguments":c},el=Zu,go=_C,yu=cs,RP=Rs("iterator"),Cb=function(n){if(null!=n)return go(n,RP)||go(n,"@@iterator")||yu[el(n)]},cd=lu,Ol=ad,ah=hu,DR=Mv,ch=Cb,hA=ni.TypeError,pA=function(n,o){var s=arguments.length<2?ch(n):o;if(Ol(s))return ah(cd(s,n));throw hA(DR(n)+" is not iterable")},SI=lu,CI=hu,xm=_C,Af=function(n,o,s){var c,h;CI(n);try{if(!(c=xm(n,"return"))){if("throw"===o)throw s;return s}c=SI(c,n)}catch(g){h=!0,c=g}if("throw"===o)throw s;if(h)throw c;return CI(c),s},kR=qh,PR=lu,II=hu,NR=Mv,MR=lA,Ib=Zh,wI=tc,xR=pA,Ur=Cb,yf=Af,uh=ni.TypeError,fA=function(n,o){this.stopped=n,this.result=o},mA=fA.prototype,gA=function(n,o,s){var c,h,g,f,A,v,E,w=!(!s||!s.AS_ENTRIES),R=!(!s||!s.IS_ITERATOR),x=!(!s||!s.INTERRUPTED),W=kR(o,s&&s.that),K=function(le){return c&&yf(c,"normal",le),new fA(!0,le)},ne=function(le){return w?(II(le),x?W(le[0],le[1],K):W(le[0],le[1])):x?W(le,K):W(le)};if(R)c=n;else{if(!(h=Ur(n)))throw uh(NR(n)+" is not iterable");if(MR(h)){for(g=0,f=Ib(n);f>g;g++)if((A=ne(n[g]))&&wI(mA,A))return A;return new fA(!1)}c=xR(n,h)}for(v=c.next;!(E=PR(v,c)).done;){try{A=ne(E.value)}catch(le){yf(c,"throw",le)}if("object"==typeof A&&A&&wI(mA,A))return A}return new fA(!1)},LR=Zu,OP=ni.String,Ef=function(n){if("Symbol"===LR(n))throw TypeError("Cannot convert a Symbol value to a string");return OP(n)},BR=Ef,FR=Gh,DP=!Fs(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",FR(1,7)),7!==n.stack)}),_A=as,_B=ni,vA=tc,vB=Pm,TI=pP,UR=r_,wb=sf,RI=Gh,kP=function(n,o){if(mB&&"string"==typeof n)for(;o--;)n=r4(n,Eb,"");return n},yB=function(n,o){op(o)&&"cause"in o&&TP(n,"cause",o.cause)},PP=gA,Lm=function(n,o){return void 0===n?arguments.length<2?"":o:BR(n)},VR=DP,jR=Rs("toStringTag"),Bm=_B.Error,NP=[].push,s_=function(n,o){var s,c=arguments.length>2?arguments[2]:void 0,h=vA(Tb,this);TI?s=TI(new Bm,h?vB(this):Tb):(s=h?this:UR(Tb),wb(s,jR,"Error")),void 0!==o&&wb(s,"message",Lm(o)),VR&&wb(s,"stack",kP(s.stack,1)),yB(s,c);var g=[];return PP(n,NP,{that:g}),wb(s,"errors",g),s};TI?TI(s_,Bm):function(n,o,s){for(var c=wR(o),h=_I.f,g=AP.f,f=0;f<c.length;f++){var A=c[f];aA(n,A)||s&&aA(s,A)||h(n,A,g(o,A))}}(s_,Bm,{name:!0});var Tb=s_.prototype=UR(Bm.prototype,{constructor:RI(1,s_),message:RI(1,""),name:RI(1,"AggregateError")});_A({global:!0},{AggregateError:s_});var MP=ws,Rb=Us,OI=Fi(Function.toString);MP(Rb.inspectSource)||(Rb.inspectSource=function(n){return OI(n)});var AA,bf,yA,ya=Rb.inspectSource,Ob=ya,Dl=ni.WeakMap,EB=ws(Dl)&&/native code/.test(Ob(Dl)),Fm=Fi,i4=du,Eu=sf,Db=Ws,QR=Rl,EA=gb,sr="Object already initialized",bA=ni.TypeError;if(EB||Us.state){var sp=Us.state||(Us.state=new(0,ni.WeakMap)),Gc=Fm(sp.get),kI=Fm(sp.has),SA=Fm(sp.set);AA=function(n,o){if(kI(sp,n))throw new bA(sr);return o.facade=n,SA(sp,n,o),o},bf=function(n){return Gc(sp,n)||{}},yA=function(n){return kI(sp,n)}}else{var dh=QR("state");EA[dh]=!0,AA=function(n,o){if(Db(n,dh))throw new bA(sr);return o.facade=n,Eu(n,dh,o),o},bf=function(n){return Db(n,dh)?n[dh]:{}},yA=function(n){return Db(n,dh)}}var Wi,xP,CA,Sf={set:AA,get:bf,has:yA,enforce:function(n){return yA(n)?bf(n):AA(n,{})},getterFor:function(n){return function(o){var s;if(!i4(o)||(s=bf(o)).type!==n)throw bA("Incompatible receiver, "+n+" required");return s}}},HR=Hu,IA=Function.prototype,GR=HR&&Object.getOwnPropertyDescriptor,hh=Ws(IA,"name"),wA={EXISTS:hh,PROPER:hh&&"something"===function(){}.name,CONFIGURABLE:hh&&(!HR||HR&&GR(IA,"name").configurable)},LP=sf,Cf=function(n,o,s,c){c&&c.enumerable?n[o]=s:LP(n,o,s)},If=Fs,bB=ws,BP=r_,WR=Pm,NI=Cf,kb=Rs("iterator"),Pb=!1;[].keys&&("next"in(CA=[].keys())?(xP=WR(WR(CA)))!==Object.prototype&&(Wi=xP):Pb=!0);var MI=null==Wi||If(function(){var n={};return Wi[kb].call(n)!==n});bB((Wi=MI?{}:BP(Wi))[kb])||NI(Wi,kb,function(){return this});var KR={IteratorPrototype:Wi,BUGGY_SAFARI_ITERATORS:Pb},Nb=Zu,SB=dA,CB=zu.f,IB=sf,FP=Ws,UP=dA?{}.toString:function(){return"[object "+Nb(this)+"]"},zR=Rs("toStringTag"),c_=function(n,o,s,c){if(n){var h=s?n:n.prototype;FP(h,zR)||CB(h,zR,{configurable:!0,value:o}),c&&!SB&&IB(h,"toString",UP)}},VP=KR.IteratorPrototype,wB=r_,YR=Gh,qR=c_,TB=cs,o4=function(){return this},RB=function(n,o,s,c){var h=o+" Iterator";return n.prototype=wB(VP,{next:YR(+!c,s)}),qR(n,h,!1,!0),TB[h]=o4,n},OB=as,s4=lu,jP=RB,xb=Pm,QP=c_,sc=Cf,Wc=cs,ph=wA.PROPER,xI=KR.BUGGY_SAFARI_ITERATORS,LI=Rs("iterator"),Um="values",HP="entries",JR=function(){return this},GP=function(n,o,s,c,h,g,f){jP(s,o,c);var A,v,E,S=function(le){if(le===h&&K)return K;if(!xI&&le in x)return x[le];switch(le){case"keys":case Um:case HP:return function(){return new s(this,le)}}return function(){return new s(this)}},w=o+" Iterator",R=!1,x=n.prototype,W=x[LI]||x["@@iterator"]||h&&x[h],K=!xI&&W||S(h),ne="Array"==o&&x.entries||W;if(ne&&(A=xb(ne.call(new n)))!==Object.prototype&&A.next&&(QP(A,w,!0,!0),Wc[w]=JR),ph&&h==Um&&W&&W.name!==Um&&(R=!0,K=function(){return s4(W,this)}),h)if(v={values:S(Um),keys:g?K:S("keys"),entries:S(HP)},f)for(E in v)(xI||R||!(E in x))&&sc(x,E,v[E]);else OB({target:o,proto:!0,forced:xI||R},v);return f&&x[LI]!==K&&sc(x,LI,K,{name:h}),Wc[o]=K,v},$R=Il,Ma=cs,ZR=GP,BI="Array Iterator",eO=Sf.set,WP=Sf.getterFor(BI);ZR(Array,"Array",function(n,o){eO(this,{type:BI,target:$R(n),index:0,kind:o})},function(){var n=WP(this),o=n.target,s=n.kind,c=n.index++;return!o||c>=o.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==s?{value:c,done:!1}:"values"==s?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),Ma.Arguments=Ma.Array;var Lb=ni.Promise,DB=Cf,FI=function(n,o,s){for(var c in o)s&&s.unsafe&&n[c]?n[c]=o[c]:DB(n,c,o[c],s);return n},KP=Gu,zP=zu,tO=Hu,nO=Rs("species"),kB=tc,PB=ni.TypeError,Bb=function(n,o){if(kB(o,n))return n;throw PB("Incorrect invocation")},YP=Rs("iterator"),rO=!1;try{var NB=0,iO={next:function(){return{done:!!NB++}},return:function(){rO=!0}};iO[YP]=function(){return this},Array.from(iO,function(){throw 2})}catch{}var qP=Fi,MB=Fs,l_=ws,UI=Zu,xB=ya,Vm=function(){},Fb=[],oO=Gu("Reflect","construct"),jm=/^\s*(?:class|function)\b/,VI=qP(jm.exec),JP=!jm.exec(Vm),TA=function(n){if(!l_(n))return!1;try{return oO(Vm,Fb,n),!0}catch{return!1}},$P=function(n){if(!l_(n))return!1;switch(UI(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return JP||!!VI(jm,xB(n))}catch{return!0}};$P.sham=!0;var Ub,Qm,RA,jI,Hm=!oO||MB(function(){var n;return TA(TA.call)||!TA(Object)||!TA(function(){n=!0})||n})?$P:TA,LB=Hm,XP=Mv,sO=ni.TypeError,ZP=hu,OA=Rs("species"),QI=function(n,o){var s,c=ZP(n).constructor;return void 0===c||null==(s=ZP(c)[OA])?o:function(n){if(LB(n))return n;throw sO(XP(n)+" is not a constructor")}(s)},Vb=Fi([].slice),jb=/(?:ipad|iphone|ipod).*applewebkit/i.test(Kh),xa=ni,Qb=na,aO=qh,HI=ws,cO=Ws,uO=Fs,DA=vI,Hb=Vb,wf=SC,kl=jb,lO=pu,dO=xa.setImmediate,d_=xa.clearImmediate,kA=xa.process,hO=xa.Dispatch,pO=xa.Function,eN=xa.MessageChannel,tN=xa.String,PA=0,Gb={};try{Ub=xa.location}catch{}var GI=function(n){if(cO(Gb,n)){var o=Gb[n];delete Gb[n],o()}},fO=function(n){return function(){GI(n)}},ap=function(n){GI(n.data)},h_=function(n){xa.postMessage(tN(n),Ub.protocol+"//"+Ub.host)};dO&&d_||(dO=function(n){var o=Hb(arguments,1);return Gb[++PA]=function(){Qb(HI(n)?n:pO(n),void 0,o)},Qm(PA),PA},d_=function(n){delete Gb[n]},lO?Qm=function(n){kA.nextTick(fO(n))}:hO&&hO.now?Qm=function(n){hO.now(fO(n))}:eN&&!kl?(jI=(RA=new eN).port2,RA.port1.onmessage=ap,Qm=aO(jI.postMessage,jI)):xa.addEventListener&&HI(xa.postMessage)&&!xa.importScripts&&Ub&&"file:"!==Ub.protocol&&!uO(h_)?(Qm=h_,xa.addEventListener("message",ap,!1)):Qm="onreadystatechange"in wf("script")?function(n){DA.appendChild(wf("script")).onreadystatechange=function(){DA.removeChild(this),GI(n)}}:function(n){setTimeout(fO(n),0)});var NA,p_,Wb,cp,mO,WI,f_,MA,up={set:dO,clear:d_},gO=ni,_O=/ipad|iphone|ipod/i.test(Kh)&&void 0!==gO.Pebble,vO=/web0s(?!.*chrome)/i.test(Kh),lp=ni,KI=qh,Tf=up.set,c4=jb,rN=_O,BB=vO,AO=pu,iN=lp.MutationObserver||lp.WebKitMutationObserver,oN=lp.document,fh=lp.process,xA=lp.Promise,zI=(0,xg.f)(lp,"queueMicrotask"),Zi=zI&&zI.value;Zi||(NA=function(){var n,o;for(AO&&(n=fh.domain)&&n.exit();p_;){o=p_.fn,p_=p_.next;try{o()}catch(s){throw p_?cp():Wb=void 0,s}}Wb=void 0,n&&n.enter()},c4||AO||BB||!iN||!oN?!rN&&xA&&xA.resolve?((f_=xA.resolve(void 0)).constructor=xA,MA=KI(f_.then,f_),cp=function(){MA(NA)}):AO?cp=function(){fh.nextTick(NA)}:(Tf=KI(Tf,lp),cp=function(){Tf(NA)}):(mO=!0,WI=oN.createTextNode(""),new iN(NA).observe(WI,{characterData:!0}),cp=function(){WI.data=mO=!mO}));var sN=Zi||function(n){var o={fn:n,next:void 0};Wb&&(Wb.next=o),p_||(p_=o,cp()),Wb=o},ud={},tl=ad,FB=function(n){var o,s;this.promise=new n(function(c,h){if(void 0!==o||void 0!==s)throw TypeError("Bad Promise constructor");o=c,s=h}),this.resolve=tl(o),this.reject=tl(s)};ud.f=function(n){return new FB(n)};var aN=hu,cN=du,Kb=ud,nl=function(n,o){if(aN(n),cN(o)&&o.constructor===n)return o;var s=Kb.f(n);return(0,s.resolve)(o),s.promise},UB=ni,zb=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}},YI=function(){this.head=null,this.tail=null};YI.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var Yb,qb,m_,ls="object"==typeof window,Jb=as,Rf=ni,g_=Gu,ld=lu,$b=Lb,qI=FI,Xb=c_,yO=ad,JI=ws,uN=du,lN=Bb,__=ya,Co=gA,ra=QI,eo=up.set,EO=sN,dp=nl,Zb=ud,hp=zb,pp=YI,Tc=Sf,v_=wC,jB=ls,e0=pu,bO=$d,dN=Rs("species"),Pl="Promise",$I=Tc.getterFor(Pl),BA=Tc.set,hN=Tc.getterFor(Pl),mh=$b,t0=$b&&$b.prototype,pN=Rf.TypeError,SO=Rf.document,CO=Rf.process,Gm=Zb.f,Wm=Gm,ZI=!!(SO&&SO.createEvent&&Rf.dispatchEvent),FA=JI(Rf.PromiseRejectionEvent),A_="unhandledrejection",IO=v_(Pl,function(){var n=__(mh),o=n!==String(mh);if(!o&&66===bO||!t0.finally)return!0;if(bO>=51&&/native code/.test(n))return!1;var s=new mh(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(s.constructor={})[dN]=c,!(s.then(function(){})instanceof c)||!o&&jB&&!FA}),wO=IO||!function(n,o){if(!o&&!rO)return!1;var s=!1;try{var c={};c[YP]=function(){return{next:function(){return{done:s=!0}}}},n(c)}catch{}return s}(function(n){mh.all(n).catch(function(){})}),fN=function(n){var o;return!(!uN(n)||!JI(o=n.then))&&o},TO=function(n,o){var s,c,h,g=o.value,f=1==o.state,A=f?n.ok:n.fail,v=n.resolve,E=n.reject,S=n.domain;try{A?(f||(2===o.rejection&&QB(o),o.rejection=1),!0===A?s=g:(S&&S.enter(),s=A(g),S&&(S.exit(),h=!0)),s===n.promise?E(pN("Promise-chain cycle")):(c=fN(s))?ld(c,s,v,E):v(s)):E(g)}catch(w){S&&!h&&S.exit(),E(w)}},Km=function(n,o){n.notified||(n.notified=!0,EO(function(){for(var s,c=n.reactions;s=c.get();)TO(s,n);n.notified=!1,o&&!n.rejection&&mN(n)}))},ew=function(n,o,s){var c,h;ZI?((c=SO.createEvent("Event")).promise=o,c.reason=s,c.initEvent(n,!1,!0),Rf.dispatchEvent(c)):c={promise:o,reason:s},!FA&&(h=Rf["on"+n])?h(c):n===A_&&function(n,o){var s=UB.console;s&&s.error&&(1==arguments.length?s.error(n):s.error(n,o))}("Unhandled promise rejection",s)},mN=function(n){ld(eo,Rf,function(){var o,s=n.facade,c=n.value;if(n0(n)&&(o=hp(function(){e0?CO.emit("unhandledRejection",c,s):ew(A_,s,c)}),n.rejection=e0||n0(n)?2:1,o.error))throw o.value})},n0=function(n){return 1!==n.rejection&&!n.parent},QB=function(n){ld(eo,Rf,function(){var o=n.facade;e0?CO.emit("rejectionHandled",o):ew("rejectionhandled",o,n.value)})},Of=function(n,o,s){return function(c){n(o,c,s)}},UA=function(n,o,s){n.done||(n.done=!0,s&&(n=s),n.value=o,n.state=2,Km(n,!0))},tw=function(n,o,s){if(!n.done){n.done=!0,s&&(n=s);try{if(n.facade===o)throw pN("Promise can't be resolved itself");var c=fN(o);c?EO(function(){var h={done:!1};try{ld(c,o,Of(tw,h,n),Of(UA,h,n))}catch(g){UA(h,g,n)}}):(n.value=o,n.state=1,Km(n,!1))}catch(h){UA({done:!1},h,n)}}};IO&&(t0=(mh=function(n){lN(this,t0),yO(n),ld(Yb,this);var o=$I(this);try{n(Of(tw,o),Of(UA,o))}catch(s){UA(o,s)}}).prototype,(Yb=function(n){BA(this,{type:Pl,done:!1,notified:!1,parent:!1,reactions:new pp,rejection:!1,state:0,value:void 0})}).prototype=qI(t0,{then:function(n,o){var s=hN(this),c=Gm(ra(this,mh));return s.parent=!0,c.ok=!JI(n)||n,c.fail=JI(o)&&o,c.domain=e0?CO.domain:void 0,0==s.state?s.reactions.add(c):EO(function(){TO(c,s)}),c.promise},catch:function(n){return this.then(void 0,n)}}),qb=function(){var n=new Yb,o=$I(n);this.promise=n,this.resolve=Of(tw,o),this.reject=Of(UA,o)},Zb.f=Gm=function(n){return n===mh||n===m_?new qb(n):Wm(n)}),Jb({global:!0,wrap:!0,forced:IO},{Promise:mh}),Xb(mh,Pl,!1,!0),function(n){var o=KP(n);tO&&o&&!o[nO]&&(0,zP.f)(o,nO,{configurable:!0,get:function(){return this}})}(Pl),m_=g_(Pl),Jb({target:Pl,stat:!0,forced:IO},{reject:function(n){var o=Gm(this);return ld(o.reject,void 0,n),o.promise}}),Jb({target:Pl,stat:!0,forced:!0},{resolve:function(n){return dp(this===m_?mh:this,n)}}),Jb({target:Pl,stat:!0,forced:wO},{all:function(n){var o=this,s=Gm(o),c=s.resolve,h=s.reject,g=hp(function(){var f=yO(o.resolve),A=[],v=0,E=1;Co(n,function(S){var w=v++,R=!1;E++,ld(f,o,S).then(function(x){R||(R=!0,A[w]=x,--E||c(A))},h)}),--E||c(A)});return g.error&&h(g.value),s.promise},race:function(n){var o=this,s=Gm(o),c=s.reject,h=hp(function(){var g=yO(o.resolve);Co(n,function(f){ld(g,o,f).then(s.resolve,c)})});return h.error&&c(h.value),s.promise}});var HB=lu,gN=ad,nw=ud,RO=zb,_N=gA;as({target:"Promise",stat:!0},{allSettled:function(n){var o=this,s=nw.f(o),c=s.resolve,h=s.reject,g=RO(function(){var f=gN(o.resolve),A=[],v=0,E=1;_N(n,function(S){var w=v++,R=!1;E++,HB(f,o,S).then(function(x){R||(R=!0,A[w]={status:"fulfilled",value:x},--E||c(A))},function(x){R||(R=!0,A[w]={status:"rejected",reason:x},--E||c(A))})}),--E||c(A)});return g.error&&h(g.value),s.promise}});var rw=ad,iw=Gu,OO=lu,vN=ud,ow=zb,AN=gA,sw="No one promise resolved";as({target:"Promise",stat:!0},{any:function(n){var o=this,s=iw("AggregateError"),c=vN.f(o),h=c.resolve,g=c.reject,f=ow(function(){var A=rw(o.resolve),v=[],E=0,S=1,w=!1;AN(n,function(R){var x=E++,W=!1;S++,OO(A,o,R).then(function(K){W||w||(w=!0,h(K))},function(K){W||w||(W=!0,v[x]=K,--S||g(new s(v,sw)))})}),--S||g(new s(v,sw))});return f.error&&g(f.value),c.promise}});var aw=Lb,DO=Gu,cw=ws,yN=QI,kO=nl;as({target:"Promise",proto:!0,real:!0,forced:!!aw&&Fs(function(){aw.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var o=yN(this,DO("Promise")),s=cw(n);return this.then(s?function(c){return kO(o,n()).then(function(){return c})}:n,s?function(c){return kO(o,n()).then(function(){throw c})}:n)}});var y_=Fi,VA=xC,u4=Ef,l4=Ir,d4=y_("".charAt),EN=y_("".charCodeAt),h4=y_("".slice),bN=function(n){return function(o,s){var c,h,g=u4(l4(o)),f=VA(s),A=g.length;return f<0||f>=A?n?"":void 0:(c=EN(g,f))<55296||c>56319||f+1===A||(h=EN(g,f+1))<56320||h>57343?n?d4(g,f):c:n?h4(g,f,f+2):h-56320+(c-55296<<10)+65536}},GB={codeAt:bN(!1),charAt:bN(!0)},p4=GB.charAt,jA=Ef,uw=GP,QA="String Iterator",E_=Sf.set,NO=Sf.getterFor(QA);uw(String,"String",function(n){E_(this,{type:QA,string:jA(n),index:0})},function(){var n,o=NO(this),s=o.string,c=o.index;return c>=s.length?{value:void 0,done:!0}:(n=p4(s,c),o.index+=n.length,{value:n,done:!1})});var b_=Wh.Promise,SN=ni,lw=Zu,WB=sf,CN=cs,Ki=Rs("toStringTag");for(var gr in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var zc=SN[gr],bu=zc&&zc.prototype;bu&&lw(bu)!==Ki&&WB(bu,Ki,gr),CN[gr]=CN.Array}var Nn=b_,jt=Nn,gh=Cc,Su=k,KB=iu,fp=Cn,xO=$g,r0=Error.prototype.toString,zm=N(function(){if(Su){var n=fp(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==r0.call(n))return!0}return"2: 1"!==r0.call({message:1,name:2})||"Error"!==r0.call({})})?function(){var n=KB(this),o=xO(n.name,"Error"),s=xO(n.message);return o?s?o+": "+s:o:s}:r0,mp={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},zB=Cs,o0=qt,Os=N,S_=Cn,IN=Ee,oi=yo.f,wN=YL.f,LO=Bd.exports,Ym=gc,YB=Ig,BO=iu,La=zm,qm=$g,HA=mp,s0=hb,a0=Bu,c0=k,ac="DOMException",C_=o0("Error"),Rc=o0(ac)||function(){try{(new(o0("MessageChannel")||function(n){try{if(gh)return Function('return require("'+n+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(n){if("DATA_CLONE_ERR"==n.name&&25==n.code)return n.constructor}}(),u0=C_.prototype,gp=a0.set,TN=a0.getterFor(ac),f4="stack"in C_(ac),RN=function(n){return Ym(HA,n)&&HA[n].m?HA[n].c:0},FO=function(){YB(this,UO);var n=arguments.length,o=qm(n<1?void 0:arguments[0]),s=qm(n<2?void 0:arguments[1],"Error"),c=RN(s);if(gp(this,{type:ac,name:s,message:o,code:c}),c0||(this.name=s,this.message=o,this.code=c),f4){var h=C_(o);h.name=ac,oi(this,"stack",IN(1,s0(h.stack,1)))}},UO=FO.prototype=S_(u0),VO=function(n){return{enumerable:!0,configurable:!0,get:n}},GA=function(n){return VO(function(){return TN(this)[n]})};c0&&wN(UO,{name:GA("name"),message:GA("message"),code:GA("code")}),oi(UO,"constructor",IN(1,FO));var pw=Os(function(){return!(new Rc instanceof C_)}),ON=pw||Os(function(){return u0.toString!==La||"2: 1"!==String(new Rc(1,2))}),qB=pw||Os(function(){return 25!==new Rc(1,"DataCloneError").code});zB({global:!0,forced:pw},{DOMException:pw?FO:Rc});var I_=o0(ac),jO=I_.prototype;for(var l0 in ON&&Rc===I_&&LO(jO,"toString",La),qB&&c0&&Rc===I_&&oi(jO,"code",VO(function(){return RN(BO(this).name)})),HA)if(Ym(HA,l0)){var fw=HA[l0],WA=fw.s,mw=IN(6,fw.c);Ym(I_,WA)||oi(I_,WA,mw),Ym(jO,WA)||oi(jO,WA,mw)}var QO=Cs,Ea=qt,hd=Ee,KA=yo.f,HO=gc,zA=Ig,gw=$v,YA=$g,GO=mp,WO=hb,qA="DOMException",pd=Ea("Error"),_w=Ea(qA),vw=function(){zA(this,m4);var n=arguments.length,o=YA(n<1?void 0:arguments[0]),s=YA(n<2?void 0:arguments[1],"Error"),c=new _w(o,s),h=pd(o);return h.name=qA,KA(c,"stack",hd(1,WO(h.stack,1))),gw(c,this,vw),c},m4=vw.prototype=_w.prototype,Aw="stack"in pd(qA),g4="stack"in new _w(1,2),JB=Aw&&!g4;QO({global:!0,forced:JB},{DOMException:JB?vw:_w});var d0=Ea(qA),KO=d0.prototype;if(KO.constructor!==d0)for(var JA in KA(KO,"constructor",hd(1,d0)),GO)if(HO(GO,JA)){var yw=GO[JA],zO=yw.s;HO(d0,zO)||KA(d0,zO,hd(6,yw.c))}var Ew="DOMException";Zy(qt(Ew),Ew);var Df=ue,bw=Bd.exports,Sw=Wv,h0=N,YO=No,Cw=ed,Iw=YO("species"),w_=RegExp.prototype,qO=ue,$B=xp,XB=lf,ZB=Ke,JO=qO("".charAt),$O=qO("".charCodeAt),DN=qO("".slice),XO=function(n){return function(o,s){var c,h,g=XB(ZB(o)),f=$B(s),A=g.length;return f<0||f>=A?n?"":void 0:(c=$O(g,f))<55296||c>56319||f+1===A||(h=$O(g,f+1))<56320||h>57343?n?JO(g,f):c:n?DN(g,f,f+2):h-56320+(c-55296<<10)+65536}},kN=(XO(!1),XO(!0)),p0=ue,ZO=Xl,eD=Math.floor,ww=p0("".charAt),PN=p0("".replace),f0=p0("".slice),m0=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,eF=/\$([$&'`]|\d{1,2})/g,Tw=ae,$A=iu,NN=et,MN=Le,tF=Wv,nF=z.TypeError,xN=jp,tD=ae,T_=ue,iF=N,oF=iu,sF=et,aF=xp,LN=jd,XA=lf,cF=Ke,uF=function(n,o,s){return o+(s?kN(n,o).length:1)},lF=Je,dF=function(n,o,s,c,h,g){var f=s+n.length,A=c.length,v=eF;return void 0!==h&&(h=ZO(h),v=m0),PN(g,v,function(E,S){var w;switch(ww(S,0)){case"$":return"$";case"&":return n;case"`":return f0(o,0,s);case"'":return f0(o,f);case"<":w=h[f0(S,1,-1)];break;default:var R=+S;if(0===R)return E;if(R>A){var x=eD(R/10);return 0===x?E:x<=A?void 0===c[x-1]?ww(S,1):c[x-1]+ww(S,1):E}w=c[R-1]}return void 0===w?"":w})},hF=function(n,o){var s=n.exec;if(NN(s)){var c=Tw(s,n,o);return null!==c&&$A(c),c}if("RegExp"===MN(n))return Tw(tF,n,o);throw nF("RegExp#exec called on incompatible receiver")},R_=No("replace"),_h=Math.max,pF=Math.min,BN=T_([].concat),Rw=T_([].push),bi=T_("".indexOf),Ow=T_("".slice),Jt="$0"==="a".replace(/./,"$0"),kf=!!/./[R_]&&""===/./[R_]("a","$0");!function(n,o,s,c){var h=YO(n),g=!h0(function(){var E={};return E[h]=function(){return 7},7!=""[n](E)}),f=g&&!h0(function(){var E=!1,S=/a/;return"split"===n&&((S={}).constructor={},S.constructor[Iw]=function(){return S},S.flags="",S[h]=/./[h]),S.exec=function(){return E=!0,null},S[h](""),!E});if(!g||!f||s){var A=Df(/./[h]),v=o(h,""[n],function(E,S,w,R,x){var W=Df(E),K=S.exec;return K===Sw||K===w_.exec?g&&!x?{done:!0,value:A(S,w,R)}:{done:!0,value:W(w,S,R)}:{done:!1}});bw(String.prototype,n,v[0]),bw(w_,h,v[1])}c&&Cw(w_[h],"sham",!0)}("replace",function(n,o,s){var c=kf?"$":"$0";return[function(h,g){var f=cF(this),A=null==h?void 0:lF(h,R_);return A?tD(A,h,f,g):tD(o,XA(f),h,g)},function(h,g){var f=oF(this),A=XA(h);if("string"==typeof g&&-1===bi(g,c)&&-1===bi(g,"$<")){var v=s(o,f,A,g);if(v.done)return v.value}var E=sF(g);E||(g=XA(g));var S=f.global;if(S){var w=f.unicode;f.lastIndex=0}for(var R=[];;){var x=hF(f,A);if(null===x||(Rw(R,x),!S))break;""===XA(x[0])&&(f.lastIndex=uF(A,LN(f.lastIndex),w))}for(var W,K="",ne=0,le=0;le<R.length;le++){for(var me=XA((x=R[le])[0]),be=_h(pF(aF(x.index),A.length),0),ke=[],Ze=1;Ze<x.length;Ze++)Rw(ke,void 0===(W=x[Ze])?W:String(W));var Nt=x.groups;if(E){var Vt=BN([me],ke,be,A);void 0!==Nt&&Rw(Vt,Nt);var kt=XA(xN(g,void 0,Vt))}else kt=dF(me,A,be,ke,Nt,g);be>=ne&&(K+=Ow(A,ne,be)+kt,ne=be+me.length)}return K+Ow(A,ne)}]},!!iF(function(){var n=/./;return n.exec=function(){var o=[];return o.groups={a:"7"},o},"7"!=="".replace(n,"$<a>")})||!Jt||kf);var rl=Zt,Pf=Le,fF=No("match"),nD=k,g0=z,Nl=ue,_0=Hd,il=$v,rD=ed,_4=yo.f,FN=tm.f,v0=Mr,vh=lf,ZA=zL,Ds=JV,ds=Bd.exports,ia=N,vi=gc,hs=Bu.enforce,Br=Cg,gF=X2,iD=eR,Nf=No("match"),Ml=g0.RegExp,_p=Ml.prototype,A0=g0.SyntaxError,UN=Nl(ZA),_F=Nl(_p.exec),Jm=Nl("".charAt),ey=Nl("".replace),$m=Nl("".indexOf),ol=Nl("".slice),y0=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O_=/a/g,ty=/a/g,xl=new Ml(O_)!==O_,Ah=Ds.MISSED_STICKY,VN=Ds.UNSUPPORTED_Y;if(_0("RegExp",nD&&(!xl||Ah||gF||iD||ia(function(){return ty[Nf]=!1,Ml(O_)!=O_||Ml(ty)==ty||"/a/i"!=Ml(O_,"i")})))){for(var Mf=function(n,o){var s,c,h,g,f,A,v=v0(_p,this),E=function(n){var o;return rl(n)&&(void 0!==(o=n[fF])?!!o:"RegExp"==Pf(n))}(n),S=void 0===o,w=[],R=n;if(!v&&E&&S&&n.constructor===Mf)return n;if((E||v0(_p,n))&&(n=n.source,S&&(o="flags"in R?R.flags:UN(R))),n=void 0===n?"":vh(n),o=void 0===o?"":vh(o),R=n,gF&&"dotAll"in O_&&(c=!!o&&$m(o,"s")>-1)&&(o=ey(o,/s/g,"")),s=o,Ah&&"sticky"in O_&&(h=!!o&&$m(o,"y")>-1)&&VN&&(o=ey(o,/y/g,"")),iD&&(n=(g=function(x){for(var W,K=x.length,ne=0,le="",me=[],be={},ke=!1,Ze=!1,Nt=0,Vt="";ne<=K;ne++){if("\\"===(W=Jm(x,ne)))W+=Jm(x,++ne);else if("]"===W)ke=!1;else if(!ke)switch(!0){case"["===W:ke=!0;break;case"("===W:_F(y0,ol(x,ne+1))&&(ne+=2,Ze=!0),le+=W,Nt++;continue;case">"===W&&Ze:if(""===Vt||vi(be,Vt))throw new A0("Invalid capture group name");be[Vt]=!0,me[me.length]=[Vt,Nt],Ze=!1,Vt="";continue}Ze?Vt+=W:le+=W}return[le,me]}(n))[0],w=g[1]),f=il(Ml(n,o),v?this:_p,Mf),(c||h||w.length)&&(A=hs(f),c&&(A.dotAll=!0,A.raw=Mf(function(x){for(var W,K=x.length,ne=0,le="",me=!1;ne<=K;ne++)"\\"!==(W=Jm(x,ne))?me||"."!==W?("["===W?me=!0:"]"===W&&(me=!1),le+=W):le+="[\\s\\S]":le+=W+Jm(x,++ne);return le}(n),s)),h&&(A.sticky=!0),w.length&&(A.groups=w)),n!==R)try{rD(f,"source",""===R?"(?:)":R)}catch{}return f},jN=function(n){n in Mf||_4(Mf,n,{configurable:!0,get:function(){return Ml[n]},set:function(o){Ml[n]=o}})},QN=FN(Ml),Cu=0;QN.length>Cu;)jN(QN[Cu++]);_p.constructor=Mf,Mf.prototype=_p,ds(g0,"RegExp",Mf)}Br("RegExp");var GN=Le,ny=Bu.get,D_=RegExp.prototype,ba=z.TypeError;k&&X2&&(0,yo.f)(D_,"dotAll",{configurable:!0,get:function(){if(this!==D_){if("RegExp"===GN(this))return!!ny(this).dotAll;throw ba("Incompatible receiver, RegExp required")}}});const zr=dP;function hi(n,o){const s=n&&n.navigator;if(!s.mediaDevices)return;const c=function(f){if("object"!=typeof f||f.mandatory||f.optional)return f;const A={};return Object.keys(f).forEach(v=>{if("require"===v||"advanced"===v||"mediaSource"===v)return;const E="object"==typeof f[v]?f[v]:{ideal:f[v]};void 0!==E.exact&&"number"==typeof E.exact&&(E.min=E.max=E.exact);const S=function(w,R){return w?w+R.charAt(0).toUpperCase()+R.slice(1):"deviceId"===R?"sourceId":R};if(void 0!==E.ideal){A.optional=A.optional||[];let w={};"number"==typeof E.ideal?(w[S("min",v)]=E.ideal,A.optional.push(w),w={},w[S("max",v)]=E.ideal,A.optional.push(w)):(w[S("",v)]=E.ideal,A.optional.push(w))}void 0!==E.exact&&"number"!=typeof E.exact?(A.mandatory=A.mandatory||{},A.mandatory[S("",v)]=E.exact):["min","max"].forEach(w=>{void 0!==E[w]&&(A.mandatory=A.mandatory||{},A.mandatory[S(w,v)]=E[w])})}),f.advanced&&(A.optional=(A.optional||[]).concat(f.advanced)),A},h=function(f,A){if(o.version>=61)return A(f);if((f=JSON.parse(JSON.stringify(f)))&&"object"==typeof f.audio){const v=function(E,S,w){S in E&&!(w in E)&&(E[w]=E[S],delete E[S])};v((f=JSON.parse(JSON.stringify(f))).audio,"autoGainControl","googAutoGainControl"),v(f.audio,"noiseSuppression","googNoiseSuppression"),f.audio=c(f.audio)}if(f&&"object"==typeof f.video){let v=f.video.facingMode;v=v&&("object"==typeof v?v:{ideal:v});const E=o.version<66;if(v&&("user"===v.exact||"environment"===v.exact||"user"===v.ideal||"environment"===v.ideal)&&(!s.mediaDevices.getSupportedConstraints||!s.mediaDevices.getSupportedConstraints().facingMode||E)){let S;if(delete f.video.facingMode,"environment"===v.exact||"environment"===v.ideal?S=["back","rear"]:"user"!==v.exact&&"user"!==v.ideal||(S=["front"]),S)return s.mediaDevices.enumerateDevices().then(w=>{let R=(w=w.filter(x=>"videoinput"===x.kind)).find(x=>S.some(W=>x.label.toLowerCase().includes(W)));return!R&&w.length&&S.includes("back")&&(R=w[w.length-1]),R&&(f.video.deviceId=v.exact?{exact:R.deviceId}:{ideal:R.deviceId}),f.video=c(f.video),zr("chrome: "+JSON.stringify(f)),A(f)})}f.video=c(f.video)}return zr("chrome: "+JSON.stringify(f)),A(f)},g=function(f){return o.version>=64?f:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[f.name]||f.name,message:f.message,constraint:f.constraint||f.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(s.getUserMedia=function(f,A,v){h(f,E=>{s.webkitGetUserMedia(E,A,S=>{v&&v(g(S))})})}.bind(s),s.mediaDevices.getUserMedia){const f=s.mediaDevices.getUserMedia.bind(s.mediaDevices);s.mediaDevices.getUserMedia=function(A){return h(A,v=>f(v).then(E=>{if(v.audio&&!E.getAudioTracks().length||v.video&&!E.getVideoTracks().length)throw E.getTracks().forEach(S=>{S.stop()}),new DOMException("","NotFoundError");return E},E=>jt.reject(g(E))))}}}function kw(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Ba(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(s){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=s)},enumerable:!0,configurable:!0});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(f=>f.track&&f.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=h,g.transceiver={receiver:h},g.streams=[s.stream],this.dispatchEvent(g)}),s.stream.getTracks().forEach(c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(f=>f.track&&f.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=h,g.transceiver={receiver:h},g.streams=[s.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),o.apply(this,arguments)}}else e_(n,"track",o=>(o.transceiver||Object.defineProperty(o,"transceiver",{value:{receiver:o.receiver}}),o))}function oa(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const o=function(h,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?h.createDTMFSender(g):null),this._dtmf},_pc:h}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(f,A){let v=h.apply(this,arguments);return v||(v=o(this,f),this._senders.push(v)),v};const g=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(f){g.apply(this,arguments);const A=this._senders.indexOf(f);-1!==A&&this._senders.splice(A,1)}}const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],s.apply(this,[h]),h.getTracks().forEach(g=>{this._senders.push(o(this,g))})};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],c.apply(this,[h]),h.getTracks().forEach(g=>{const f=this._senders.find(A=>A.track===g);f&&this._senders.splice(this._senders.indexOf(f),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const s=o.apply(this,[]);return s.forEach(c=>c._pc=this),s},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function ry(n){if(!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,c,h]=arguments;if(arguments.length>0&&"function"==typeof s)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof s))return o.apply(this,[]);const g=function(A){const v={};return A.result().forEach(E=>{const S={id:E.id,timestamp:E.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[E.type]||E.type};E.names().forEach(w=>{S[w]=E.stat(w)}),v[S.id]=S}),v},f=function(A){return new Map(Object.keys(A).map(v=>[v,A[v]]))};return arguments.length>=2?o.apply(this,[function(v){c(f(g(v)))},s]):new jt((A,v)=>{o.apply(this,[function(E){A(f(g(E)))},v])}).then(c,h)}}function Fa(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const s=n.RTCPeerConnection.prototype.getSenders;s&&(n.RTCPeerConnection.prototype.getSenders=function(){const h=s.apply(this,[]);return h.forEach(g=>g._pc=this),h});const c=n.RTCPeerConnection.prototype.addTrack;c&&(n.RTCPeerConnection.prototype.addTrack=function(){const h=c.apply(this,arguments);return h._pc=this,h}),n.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(g=>Et(g,h.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const s=n.RTCPeerConnection.prototype.getReceivers;s&&(n.RTCPeerConnection.prototype.getReceivers=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c}),e_(n,"track",c=>(c.receiver._pc=c.srcElement,c)),n.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>Et(h,c.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const o=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const s=arguments[0];let c,h,g;return this.getSenders().forEach(f=>{f.track===s&&(c?g=!0:c=f)}),this.getReceivers().forEach(f=>(f.track===s&&(h?g=!0:h=f),f.track===s)),g||c&&h?jt.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():jt.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}function KN(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(g,f){if(!f)return o.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=o.apply(this,arguments);return this._shimmedLocalStreams[f.id]?-1===this._shimmedLocalStreams[f.id].indexOf(A)&&this._shimmedLocalStreams[f.id].push(A):this._shimmedLocalStreams[f.id]=[f,A],A};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(v=>{if(this.getSenders().find(E=>E.track===v))throw new DOMException("Track already exists.","InvalidAccessError")});const f=this.getSenders();s.apply(this,arguments);const A=this.getSenders().filter(v=>-1===f.indexOf(v));this._shimmedLocalStreams[g.id]=[g].concat(A)};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(f=>{const A=this._shimmedLocalStreams[f].indexOf(g);-1!==A&&this._shimmedLocalStreams[f].splice(A,1),1===this._shimmedLocalStreams[f].length&&delete this._shimmedLocalStreams[f]}),h.apply(this,arguments)}}function _o(n,o){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&o.version>=65)return KN(n);const s=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const E=s.apply(this);return this._reverseStreams=this._reverseStreams||{},E.map(S=>this._reverseStreams[S.id])};const c=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(E){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},E.getTracks().forEach(S=>{if(this.getSenders().find(w=>w.track===S))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[E.id]){const S=new n.MediaStream(E.getTracks());this._streams[E.id]=S,this._reverseStreams[S.id]=E,E=S}c.apply(this,[E])};const h=n.RTCPeerConnection.prototype.removeStream;function g(E,S){let w=S.sdp;return Object.keys(E._reverseStreams||[]).forEach(R=>{const x=E._reverseStreams[R];w=w.replace(new RegExp(E._streams[x.id].id,"g"),x.id)}),new RTCSessionDescription({type:S.type,sdp:w})}function f(E,S){let w=S.sdp;return Object.keys(E._reverseStreams||[]).forEach(R=>{const x=E._reverseStreams[R],W=E._streams[x.id];w=w.replace(new RegExp(x.id,"g"),W.id)}),new RTCSessionDescription({type:S.type,sdp:w})}n.RTCPeerConnection.prototype.removeStream=function(E){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[E.id]||E]),delete this._reverseStreams[this._streams[E.id]?this._streams[E.id].id:E.id],delete this._streams[E.id]},n.RTCPeerConnection.prototype.addTrack=function(E,S){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const w=[].slice.call(arguments,1);if(1!==w.length||!w[0].getTracks().find(W=>W===E))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(W=>W.track===E))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[S.id];if(x)x.addTrack(E),jt.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const W=new n.MediaStream([E]);this._streams[S.id]=W,this._reverseStreams[W.id]=S,this.addStream(W)}return this.getSenders().find(W=>W.track===E)},["createOffer","createAnswer"].forEach(function(E){const S=n.RTCPeerConnection.prototype[E],w={[E](){const R=arguments;return arguments.length&&"function"==typeof arguments[0]?S.apply(this,[x=>{const W=g(this,x);R[0].apply(null,[W])},x=>{R[1]&&R[1].apply(null,x)},arguments[2]]):S.apply(this,arguments).then(x=>g(this,x))}};n.RTCPeerConnection.prototype[E]=w[E]});const A=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=f(this,arguments[0]),A.apply(this,arguments)):A.apply(this,arguments)};const v=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const E=v.get.apply(this);return""===E.type?E:g(this,E)}}),n.RTCPeerConnection.prototype.removeTrack=function(E){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!E._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(E._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let S;this._streams=this._streams||{},Object.keys(this._streams).forEach(w=>{this._streams[w].getTracks().find(R=>E.track===R)&&(S=this._streams[w])}),S&&(1===S.getTracks().length?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(E.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xf(n,o){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const c=n.RTCPeerConnection.prototype[s],h={[s](){return arguments[0]=new("addIceCandidate"===s?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};n.RTCPeerConnection.prototype[s]=h[s]})}function xi(n,o){e_(n,"negotiationneeded",s=>{const c=s.target;if(!(o.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return s})}var E0=Object.freeze({__proto__:null,shimMediaStream:kw,shimOnTrack:Ba,shimGetSendersWithDtmf:oa,shimGetStats:ry,shimSenderReceiverGetStats:Fa,shimAddTrackRemoveTrackWithNative:KN,shimAddTrackRemoveTrack:_o,shimPeerConnection:xf,fixNegotiationNeeded:xi,shimGetUserMedia:hi,shimGetDisplayMedia:function(n,o){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&("function"==typeof o?n.navigator.mediaDevices.getDisplayMedia=function(s){return o(s).then(c=>{const h=s.video&&s.video.width,g=s.video&&s.video.height;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:s.video&&s.video.frameRate||3}},h&&(s.video.mandatory.maxWidth=h),g&&(s.video.mandatory.maxHeight=g),n.navigator.mediaDevices.getUserMedia(s)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),yh={exports:{}};!function(n){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(s){return s.trim().split("\n").map(function(c){return c.trim()})},o.splitSections=function(s){return s.split("\nm=").map(function(c,h){return(h>0?"m="+c:c).trim()+"\r\n"})},o.getDescription=function(s){var c=o.splitSections(s);return c&&c[0]},o.getMediaSections=function(s){var c=o.splitSections(s);return c.shift(),c},o.matchPrefix=function(s,c){return o.splitLines(s).filter(function(h){return 0===h.indexOf(c)})},o.parseCandidate=function(s){for(var c,h={foundation:(c=0===s.indexOf("a=candidate:")?s.substring(12).split(" "):s.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},o.writeCandidate=function(s){var c=[];c.push(s.foundation),c.push(s.component),c.push(s.protocol.toUpperCase()),c.push(s.priority),c.push(s.address||s.ip),c.push(s.port);var h=s.type;return c.push("typ"),c.push(h),"host"!==h&&s.relatedAddress&&s.relatedPort&&(c.push("raddr"),c.push(s.relatedAddress),c.push("rport"),c.push(s.relatedPort)),s.tcpType&&"tcp"===s.protocol.toLowerCase()&&(c.push("tcptype"),c.push(s.tcpType)),(s.usernameFragment||s.ufrag)&&(c.push("ufrag"),c.push(s.usernameFragment||s.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(s){return s.substr(14).split(" ")},o.parseRtpMap=function(s){var c=s.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},o.writeRtpMap=function(s){var c=s.payloadType;void 0!==s.preferredPayloadType&&(c=s.preferredPayloadType);var h=s.channels||s.numChannels||1;return"a=rtpmap:"+c+" "+s.name+"/"+s.clockRate+(1!==h?"/"+h:"")+"\r\n"},o.parseExtmap=function(s){var c=s.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(s){return"a=extmap:"+(s.id||s.preferredId)+(s.direction&&"sendrecv"!==s.direction?"/"+s.direction:"")+" "+s.uri+"\r\n"},o.parseFmtp=function(s){for(var c,h={},g=s.substr(s.indexOf(" ")+1).split(";"),f=0;f<g.length;f++)h[(c=g[f].trim().split("="))[0].trim()]=c[1];return h},o.writeFmtp=function(s){var c="",h=s.payloadType;if(void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.parameters&&Object.keys(s.parameters).length){var g=[];Object.keys(s.parameters).forEach(function(f){g.push(s.parameters[f]?f+"="+s.parameters[f]:f)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},o.parseRtcpFb=function(s){var c=s.substr(s.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(s){var c="",h=s.payloadType;return void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.rtcpFeedback&&s.rtcpFeedback.length&&s.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(s){var c=s.indexOf(" "),h={ssrc:parseInt(s.substr(7,c-7),10)},g=s.indexOf(":",c);return g>-1?(h.attribute=s.substr(c+1,g-c-1),h.value=s.substr(g+1)):h.attribute=s.substr(c+1),h},o.parseSsrcGroup=function(s){var c=s.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},o.getMid=function(s){var c=o.matchPrefix(s,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(s){var c=s.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(s,c){return{role:"auto",fingerprints:o.matchPrefix(s+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(s,c){var h="a=setup:"+c+"\r\n";return s.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},o.getIceParameters=function(s,c){var h=o.splitLines(s);return{usernameFragment:(h=h.concat(o.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:h.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},o.writeIceParameters=function(s){return"a=ice-ufrag:"+s.usernameFragment+"\r\na=ice-pwd:"+s.password+"\r\n"},o.parseRtpParameters=function(s){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=o.splitLines(s)[0].split(" "),g=3;g<h.length;g++){var f=h[g],A=o.matchPrefix(s,"a=rtpmap:"+f+" ")[0];if(A){var v=o.parseRtpMap(A),E=o.matchPrefix(s,"a=fmtp:"+f+" ");switch(v.parameters=E.length?o.parseFmtp(E[0]):{},v.rtcpFeedback=o.matchPrefix(s,"a=rtcp-fb:"+f+" ").map(o.parseRtcpFb),c.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(v.name.toUpperCase())}}}return o.matchPrefix(s,"a=extmap:").forEach(function(S){c.headerExtensions.push(o.parseExtmap(S))}),c},o.writeRtpDescription=function(s,c){var h="";h+="m="+s+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(f){return void 0!==f.preferredPayloadType?f.preferredPayloadType:f.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(f){h+=o.writeRtpMap(f),h+=o.writeFmtp(f),h+=o.writeRtcpFb(f)});var g=0;return c.codecs.forEach(function(f){f.maxptime>g&&(g=f.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(f){h+=o.writeExtmap(f)}),h},o.parseRtpEncodingParameters=function(s){var c,h=[],g=o.parseRtpParameters(s),f=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),v=o.matchPrefix(s,"a=ssrc:").map(function(R){return o.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),E=v.length>0&&v[0].ssrc,S=o.matchPrefix(s,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(x){return parseInt(x,10)})});S.length>0&&S[0].length>1&&S[0][0]===E&&(c=S[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var x={ssrc:E,codecPayloadType:parseInt(R.parameters.apt,10)};E&&c&&(x.rtx={ssrc:c}),h.push(x),f&&((x=JSON.parse(JSON.stringify(x))).fec={ssrc:E,mechanism:A?"red+ulpfec":"red"},h.push(x))}}),0===h.length&&E&&h.push({ssrc:E});var w=o.matchPrefix(s,"b=");return w.length&&(w=0===w[0].indexOf("b=TIAS:")?parseInt(w[0].substr(7),10):0===w[0].indexOf("b=AS:")?1e3*parseInt(w[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=w})),h},o.parseRtcpParameters=function(s){var c={},h=o.matchPrefix(s,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=o.matchPrefix(s,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var f=o.matchPrefix(s,"a=rtcp-mux");return c.mux=f.length>0,c},o.parseMsid=function(s){var c,h=o.matchPrefix(s,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=o.matchPrefix(s,"a=ssrc:").map(function(f){return o.parseSsrcMedia(f)}).filter(function(f){return"msid"===f.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(s,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(s||o.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(s,c,h,g){var f=o.writeRtpDescription(s.kind,c);if(f+=o.writeIceParameters(s.iceGatherer.getLocalParameters()),f+=o.writeDtlsParameters(s.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),f+="a=mid:"+s.mid+"\r\n",f+=s.direction?"a="+s.direction+"\r\n":s.rtpSender&&s.rtpReceiver?"a=sendrecv\r\n":s.rtpSender?"a=sendonly\r\n":s.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",s.rtpSender){var A="msid:"+g.id+" "+s.rtpSender.track.id+"\r\n";f+="a="+A,f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" "+A,s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" "+A,f+="a=ssrc-group:FID "+s.sendEncodingParameters[0].ssrc+" "+s.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",s.rtpSender&&s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),f},o.getDirection=function(s,c){for(var h=o.splitLines(s),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(s){return o.splitLines(s)[0].split(" ")[0].substr(2)},o.isRejected=function(s){return"0"===s.split(" ",2)[1]},o.parseMLine=function(s){var c=o.splitLines(s)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(s){var c=o.matchPrefix(s,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(s){if("string"!=typeof s||0===s.length)return!1;for(var c=o.splitLines(s),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=o}(yh);var Vr=yh.exports;function fd(n,o,s,c,h){var g=Vr.writeRtpDescription(n.kind,o);if(g+=Vr.writeIceParameters(n.iceGatherer.getLocalParameters()),g+=Vr.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),"offer"===s?"actpass":h||"active"),g+="a=mid:"+n.mid+"\r\n",g+=n.rtpSender&&n.rtpReceiver?"a=sendrecv\r\n":n.rtpSender?"a=sendonly\r\n":n.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",n.rtpSender){var f=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=f;var A="msid:"+(c?c.id:"-")+" "+f+"\r\n";g+="a="+A,g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+A,n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+A,g+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+Vr.localCName+"\r\n",n.rtpSender&&n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+Vr.localCName+"\r\n"),g}function b0(n,o){var s={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,f){g=parseInt(g,10);for(var A=0;A<f.length;A++)if(f[A].payloadType===g||f[A].preferredPayloadType===g)return f[A]},h=function(g,f,A,v){var E=c(g.parameters.apt,A),S=c(f.parameters.apt,v);return E&&S&&E.name.toLowerCase()===S.name.toLowerCase()};return n.codecs.forEach(function(g){for(var f=0;f<o.codecs.length;f++){var A=o.codecs[f];if(g.name.toLowerCase()===A.name.toLowerCase()&&g.clockRate===A.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&A.parameters.apt&&!h(g,A,n.codecs,o.codecs))continue;(A=JSON.parse(JSON.stringify(A))).numChannels=Math.min(g.numChannels,A.numChannels),s.codecs.push(A),A.rtcpFeedback=A.rtcpFeedback.filter(function(v){for(var E=0;E<g.rtcpFeedback.length;E++)if(g.rtcpFeedback[E].type===v.type&&g.rtcpFeedback[E].parameter===v.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(g){for(var f=0;f<o.headerExtensions.length;f++){var A=o.headerExtensions[f];if(g.uri===A.uri){s.headerExtensions.push(A);break}}}),s}function vp(n,o,s){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[o][n].indexOf(s)}function md(n,o){var s=n.getRemoteCandidates().find(function(c){return o.foundation===c.foundation&&o.ip===c.ip&&o.port===c.port&&o.priority===c.priority&&o.protocol===c.protocol&&o.type===c.type});return s||n.addRemoteCandidate(o),!s}function zi(n,o){var s=new Error(o);return s.name=n,s.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],s}function iy(n){const o=n&&n.navigator,s=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(c){return s(c).catch(h=>{return jt.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=h).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function Pw(n){"getDisplayMedia"in n.navigator&&n.navigator.mediaDevices&&(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function Lf(n,o){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(c){return c}),n.RTCSessionDescription||(n.RTCSessionDescription=function(c){return c}),o.version<15025)){const c=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(h){c.set.call(this,h);const g=new Event("enabled");g.enabled=h,this.dispatchEvent(g)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const s=function(n,o){function s(f,A){A.addTrack(f),A.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:f}))}function c(f,A,v,E){var S=new Event("track");S.track=A,S.receiver=v,S.transceiver={receiver:v},S.streams=E,n.setTimeout(function(){f._dispatchEvent("track",S)})}var h=function(f){var S,w,R,A=this,v=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(S){A[S]=v[S].bind(v)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",f=JSON.parse(JSON.stringify(f||{})),this.usingBundle="max-bundle"===f.bundlePolicy,"negotiate"===f.rtcpMuxPolicy)throw zi("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(f.rtcpMuxPolicy||(f.rtcpMuxPolicy="require"),f.iceTransportPolicy){case"all":case"relay":break;default:f.iceTransportPolicy="all"}switch(f.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:f.bundlePolicy="balanced"}if(f.iceServers=(S=f.iceServers||[],w=o,R=!1,(S=JSON.parse(JSON.stringify(S))).filter(function(x){if(x&&(x.urls||x.url)){var W=x.urls||x.url;x.url&&!x.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var K="string"==typeof W;return K&&(W=[W]),W=W.filter(function(ne){return 0!==ne.indexOf("turn:")||-1===ne.indexOf("transport=udp")||-1!==ne.indexOf("turn:[")||R?0===ne.indexOf("stun:")&&w>=14393&&-1===ne.indexOf("?transport=udp"):(R=!0,!0)}),delete x.url,x.urls=K?W[0]:W,!!W.length}})),this._iceGatherers=[],f.iceCandidatePoolSize)for(var E=f.iceCandidatePoolSize;E>0;E--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:f.iceServers,gatherPolicy:f.iceTransportPolicy}));else f.iceCandidatePoolSize=0;this._config=f,this.transceivers=[],this._sdpSessionId=Vr.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(h.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(h.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(f,A){this._isClosed||(this.dispatchEvent(A),"function"==typeof this["on"+f]&&this["on"+f](A))},h.prototype._emitGatheringStateChange=function(){var f=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",f)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(f,A){var E={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:f,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)E.iceTransport=this.transceivers[0].iceTransport,E.dtlsTransport=this.transceivers[0].dtlsTransport;else{var S=this._createIceAndDtlsTransports();E.iceTransport=S.iceTransport,E.dtlsTransport=S.dtlsTransport}return A||this.transceivers.push(E),E},h.prototype.addTrack=function(f,A){if(this._isClosed)throw zi("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var v;if(this.transceivers.find(function(S){return S.track===f}))throw zi("InvalidAccessError","Track already exists.");for(var E=0;E<this.transceivers.length;E++)this.transceivers[E].track||this.transceivers[E].kind!==f.kind||(v=this.transceivers[E]);return v||(v=this._createTransceiver(f.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(A)&&this.localStreams.push(A),v.track=f,v.stream=A,v.rtpSender=new n.RTCRtpSender(f,v.dtlsTransport),v.rtpSender},h.prototype.addStream=function(f){var A=this;if(o>=15025)f.getTracks().forEach(function(E){A.addTrack(E,f)});else{var v=f.clone();f.getTracks().forEach(function(E,S){var w=v.getTracks()[S];E.addEventListener("enabled",function(R){w.enabled=R.enabled})}),v.getTracks().forEach(function(E){A.addTrack(E,v)})}},h.prototype.removeTrack=function(f){if(this._isClosed)throw zi("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(f instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var A=this.transceivers.find(function(E){return E.rtpSender===f});if(!A)throw zi("InvalidAccessError","Sender was not created by this connection.");var v=A.stream;A.rtpSender.stop(),A.rtpSender=null,A.track=null,A.stream=null,-1===this.transceivers.map(function(E){return E.stream}).indexOf(v)&&this.localStreams.indexOf(v)>-1&&this.localStreams.splice(this.localStreams.indexOf(v),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(f){var A=this;f.getTracks().forEach(function(v){var E=A.getSenders().find(function(S){return S.track===v});E&&A.removeTrack(E)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(f){return!!f.rtpSender}).map(function(f){return f.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(f){return!!f.rtpReceiver}).map(function(f){return f.rtpReceiver})},h.prototype._createIceGatherer=function(f,A){var v=this;if(A&&f>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var E=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(E,"state",{value:"new",writable:!0}),this.transceivers[f].bufferedCandidateEvents=[],this.transceivers[f].bufferCandidates=function(S){var w=!S.candidate||0===Object.keys(S.candidate).length;E.state=w?"completed":"gathering",null!==v.transceivers[f].bufferedCandidateEvents&&v.transceivers[f].bufferedCandidateEvents.push(S)},E.addEventListener("localcandidate",this.transceivers[f].bufferCandidates),E},h.prototype._gather=function(f,A){var v=this,E=this.transceivers[A].iceGatherer;if(!E.onlocalcandidate){var S=this.transceivers[A].bufferedCandidateEvents;this.transceivers[A].bufferedCandidateEvents=null,E.removeEventListener("localcandidate",this.transceivers[A].bufferCandidates),E.onlocalcandidate=function(w){if(!(v.usingBundle&&A>0)){var R=new Event("icecandidate");R.candidate={sdpMid:f,sdpMLineIndex:A};var x=w.candidate,W=!x||0===Object.keys(x).length;if(W)"new"!==E.state&&"gathering"!==E.state||(E.state="completed");else{"new"===E.state&&(E.state="gathering"),x.component=1,x.ufrag=E.getLocalParameters().usernameFragment;var K=Vr.writeCandidate(x);R.candidate=Object.assign(R.candidate,Vr.parseCandidate(K)),R.candidate.candidate=K,R.candidate.toJSON=function(){return{candidate:R.candidate.candidate,sdpMid:R.candidate.sdpMid,sdpMLineIndex:R.candidate.sdpMLineIndex,usernameFragment:R.candidate.usernameFragment}}}var ne=Vr.getMediaSections(v._localDescription.sdp);ne[R.candidate.sdpMLineIndex]+=W?"a=end-of-candidates\r\n":"a="+R.candidate.candidate+"\r\n",v._localDescription.sdp=Vr.getDescription(v._localDescription.sdp)+ne.join("");var le=v.transceivers.every(function(me){return me.iceGatherer&&"completed"===me.iceGatherer.state});"gathering"!==v.iceGatheringState&&(v.iceGatheringState="gathering",v._emitGatheringStateChange()),W||v._dispatchEvent("icecandidate",R),le&&(v._dispatchEvent("icecandidate",new Event("icecandidate")),v.iceGatheringState="complete",v._emitGatheringStateChange())}},n.setTimeout(function(){S.forEach(function(w){E.onlocalcandidate(w)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var f=this,A=new n.RTCIceTransport(null);A.onicestatechange=function(){f._updateIceConnectionState(),f._updateConnectionState()};var v=new n.RTCDtlsTransport(A);return v.ondtlsstatechange=function(){f._updateConnectionState()},v.onerror=function(){Object.defineProperty(v,"state",{value:"failed",writable:!0}),f._updateConnectionState()},{iceTransport:A,dtlsTransport:v}},h.prototype._disposeIceAndDtlsTransports=function(f){var A=this.transceivers[f].iceGatherer;A&&(delete A.onlocalcandidate,delete this.transceivers[f].iceGatherer);var v=this.transceivers[f].iceTransport;v&&(delete v.onicestatechange,delete this.transceivers[f].iceTransport);var E=this.transceivers[f].dtlsTransport;E&&(delete E.ondtlsstatechange,delete E.onerror,delete this.transceivers[f].dtlsTransport)},h.prototype._transceive=function(f,A,v){var E=b0(f.localCapabilities,f.remoteCapabilities);A&&f.rtpSender&&(E.encodings=f.sendEncodingParameters,E.rtcp={cname:Vr.localCName,compound:f.rtcpParameters.compound},f.recvEncodingParameters.length&&(E.rtcp.ssrc=f.recvEncodingParameters[0].ssrc),f.rtpSender.send(E)),v&&f.rtpReceiver&&E.codecs.length>0&&("video"===f.kind&&f.recvEncodingParameters&&o<15019&&f.recvEncodingParameters.forEach(function(S){delete S.rtx}),E.encodings=f.recvEncodingParameters.length?f.recvEncodingParameters:[{}],E.rtcp={compound:f.rtcpParameters.compound},f.rtcpParameters.cname&&(E.rtcp.cname=f.rtcpParameters.cname),f.sendEncodingParameters.length&&(E.rtcp.ssrc=f.sendEncodingParameters[0].ssrc),f.rtpReceiver.receive(E))},h.prototype.setLocalDescription=function(f){var A,v,E=this;if(-1===["offer","answer"].indexOf(f.type))return Promise.reject(zi("TypeError",'Unsupported type "'+f.type+'"'));if(!vp("setLocalDescription",f.type,E.signalingState)||E._isClosed)return Promise.reject(zi("InvalidStateError","Can not set local "+f.type+" in state "+E.signalingState));if("offer"===f.type)A=Vr.splitSections(f.sdp),v=A.shift(),A.forEach(function(w,R){var x=Vr.parseRtpParameters(w);E.transceivers[R].localCapabilities=x}),E.transceivers.forEach(function(w,R){E._gather(w.mid,R)});else if("answer"===f.type){A=Vr.splitSections(E._remoteDescription.sdp),v=A.shift();var S=Vr.matchPrefix(v,"a=ice-lite").length>0;A.forEach(function(w,R){var x=E.transceivers[R],W=x.iceGatherer,K=x.iceTransport,ne=x.dtlsTransport,le=x.localCapabilities,me=x.remoteCapabilities;if(!(Vr.isRejected(w)&&0===Vr.matchPrefix(w,"a=bundle-only").length||x.rejected)){var be=Vr.getIceParameters(w,v),ke=Vr.getDtlsParameters(w,v);S&&(ke.role="server"),E.usingBundle&&0!==R||(E._gather(x.mid,R),"new"===K.state&&K.start(W,be,S?"controlling":"controlled"),"new"===ne.state&&ne.start(ke));var Ze=b0(le,me);E._transceive(x,Ze.codecs.length>0,!1)}})}return E._localDescription={type:f.type,sdp:f.sdp},E._updateSignalingState("offer"===f.type?"have-local-offer":"stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(f){var A=this;if(-1===["offer","answer"].indexOf(f.type))return Promise.reject(zi("TypeError",'Unsupported type "'+f.type+'"'));if(!vp("setRemoteDescription",f.type,A.signalingState)||A._isClosed)return Promise.reject(zi("InvalidStateError","Can not set remote "+f.type+" in state "+A.signalingState));var v={};A.remoteStreams.forEach(function(K){v[K.id]=K});var E=[],S=Vr.splitSections(f.sdp),w=S.shift(),R=Vr.matchPrefix(w,"a=ice-lite").length>0,x=Vr.matchPrefix(w,"a=group:BUNDLE ").length>0;A.usingBundle=x;var W=Vr.matchPrefix(w,"a=ice-options:")[0];return A.canTrickleIceCandidates=!!W&&W.substr(14).split(" ").indexOf("trickle")>=0,S.forEach(function(K,ne){var le=Vr.splitLines(K),me=Vr.getKind(K),be=Vr.isRejected(K)&&0===Vr.matchPrefix(K,"a=bundle-only").length,ke=le[0].substr(2).split(" ")[2],Ze=Vr.getDirection(K,w),Nt=Vr.parseMsid(K),Vt=Vr.getMid(K)||Vr.generateIdentifier();if(be||"application"===me&&("DTLS/SCTP"===ke||"UDP/DTLS/SCTP"===ke))A.transceivers[ne]={mid:Vt,kind:me,protocol:ke,rejected:!0};else{var kt,Sn,ln,dn,It,He,ct,bt,bn;!be&&A.transceivers[ne]&&A.transceivers[ne].rejected&&(A.transceivers[ne]=A._createTransceiver(me,!0));var Ye,lt,xt=Vr.parseRtpParameters(K);be||(Ye=Vr.getIceParameters(K,w),(lt=Vr.getDtlsParameters(K,w)).role="client"),ct=Vr.parseRtpEncodingParameters(K);var hn=Vr.parseRtcpParameters(K),On=Vr.matchPrefix(K,"a=end-of-candidates",w).length>0,Gt=Vr.matchPrefix(K,"a=candidate:").map(function(Ne){return Vr.parseCandidate(Ne)}).filter(function(Ne){return 1===Ne.component});if(("offer"===f.type||"answer"===f.type)&&!be&&x&&ne>0&&A.transceivers[ne]&&(A._disposeIceAndDtlsTransports(ne),A.transceivers[ne].iceGatherer=A.transceivers[0].iceGatherer,A.transceivers[ne].iceTransport=A.transceivers[0].iceTransport,A.transceivers[ne].dtlsTransport=A.transceivers[0].dtlsTransport,A.transceivers[ne].rtpSender&&A.transceivers[ne].rtpSender.setTransport(A.transceivers[0].dtlsTransport),A.transceivers[ne].rtpReceiver&&A.transceivers[ne].rtpReceiver.setTransport(A.transceivers[0].dtlsTransport)),"offer"!==f.type||be)"answer"===f.type&&!be&&(Sn=(kt=A.transceivers[ne]).iceGatherer,ln=kt.iceTransport,dn=kt.dtlsTransport,It=kt.rtpReceiver,He=kt.sendEncodingParameters,bt=kt.localCapabilities,A.transceivers[ne].recvEncodingParameters=ct,A.transceivers[ne].remoteCapabilities=xt,A.transceivers[ne].rtcpParameters=hn,Gt.length&&"new"===ln.state&&(!R&&!On||x&&0!==ne?Gt.forEach(function(Ne){md(kt.iceTransport,Ne)}):ln.setRemoteCandidates(Gt)),x&&0!==ne||("new"===ln.state&&ln.start(Sn,Ye,"controlling"),"new"===dn.state&&dn.start(lt)),!b0(kt.localCapabilities,kt.remoteCapabilities).codecs.filter(function(Ne){return"rtx"===Ne.name.toLowerCase()}).length&&kt.sendEncodingParameters[0].rtx&&delete kt.sendEncodingParameters[0].rtx,A._transceive(kt,"sendrecv"===Ze||"recvonly"===Ze,"sendrecv"===Ze||"sendonly"===Ze),!It||"sendrecv"!==Ze&&"sendonly"!==Ze?delete kt.rtpReceiver:(bn=It.track,Nt?(v[Nt.stream]||(v[Nt.stream]=new n.MediaStream),s(bn,v[Nt.stream]),E.push([bn,It,v[Nt.stream]])):(v.default||(v.default=new n.MediaStream),s(bn,v.default),E.push([bn,It,v.default]))));else{(kt=A.transceivers[ne]||A._createTransceiver(me)).mid=Vt,kt.iceGatherer||(kt.iceGatherer=A._createIceGatherer(ne,x)),Gt.length&&"new"===kt.iceTransport.state&&(!On||x&&0!==ne?Gt.forEach(function(Ne){md(kt.iceTransport,Ne)}):kt.iceTransport.setRemoteCandidates(Gt)),bt=n.RTCRtpReceiver.getCapabilities(me),o<15019&&(bt.codecs=bt.codecs.filter(function(Ne){return"rtx"!==Ne.name})),He=kt.sendEncodingParameters||[{ssrc:1001*(2*ne+2)}];var G,ye=!1;"sendrecv"===Ze||"sendonly"===Ze?(ye=!kt.rtpReceiver,It=kt.rtpReceiver||new n.RTCRtpReceiver(kt.dtlsTransport,me),ye&&(bn=It.track,Nt&&"-"===Nt.stream||(Nt?(v[Nt.stream]||(v[Nt.stream]=new n.MediaStream,Object.defineProperty(v[Nt.stream],"id",{get:function(){return Nt.stream}})),Object.defineProperty(bn,"id",{get:function(){return Nt.track}}),G=v[Nt.stream]):(v.default||(v.default=new n.MediaStream),G=v.default)),G&&(s(bn,G),kt.associatedRemoteMediaStreams.push(G)),E.push([bn,It,G]))):kt.rtpReceiver&&kt.rtpReceiver.track&&(kt.associatedRemoteMediaStreams.forEach(function(Ne){var In,br,Ft=Ne.getTracks().find(function(In){return In.id===kt.rtpReceiver.track.id});Ft&&((br=Ne).removeTrack(In=Ft),br.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:In})))}),kt.associatedRemoteMediaStreams=[]),kt.localCapabilities=bt,kt.remoteCapabilities=xt,kt.rtpReceiver=It,kt.rtcpParameters=hn,kt.sendEncodingParameters=He,kt.recvEncodingParameters=ct,A._transceive(A.transceivers[ne],!1,ye)}}}),void 0===A._dtlsRole&&(A._dtlsRole="offer"===f.type?"active":"passive"),A._remoteDescription={type:f.type,sdp:f.sdp},A._updateSignalingState("offer"===f.type?"have-remote-offer":"stable"),Object.keys(v).forEach(function(K){var ne=v[K];if(ne.getTracks().length){if(-1===A.remoteStreams.indexOf(ne)){A.remoteStreams.push(ne);var le=new Event("addstream");le.stream=ne,n.setTimeout(function(){A._dispatchEvent("addstream",le)})}E.forEach(function(me){ne.id===me[2].id&&c(A,me[0],me[1],[ne])})}}),E.forEach(function(K){K[2]||c(A,K[0],K[1],[])}),n.setTimeout(function(){A&&A.transceivers&&A.transceivers.forEach(function(K){K.iceTransport&&"new"===K.iceTransport.state&&K.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),K.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(f){f.iceTransport&&f.iceTransport.stop(),f.dtlsTransport&&f.dtlsTransport.stop(),f.rtpSender&&f.rtpSender.stop(),f.rtpReceiver&&f.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(f){this.signalingState=f;var A=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",A)},h.prototype._maybeFireNegotiationNeeded=function(){var f=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,n.setTimeout(function(){if(f.needNegotiation){f.needNegotiation=!1;var A=new Event("negotiationneeded");f._dispatchEvent("negotiationneeded",A)}},0))},h.prototype._updateIceConnectionState=function(){var f,A={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&!E.rejected&&A[E.iceTransport.state]++}),f="new",A.failed>0?f="failed":A.checking>0?f="checking":A.disconnected>0?f="disconnected":A.new>0?f="new":A.connected>0?f="connected":A.completed>0&&(f="completed"),f!==this.iceConnectionState){this.iceConnectionState=f;var v=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",v)}},h.prototype._updateConnectionState=function(){var f,A={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&E.dtlsTransport&&!E.rejected&&(A[E.iceTransport.state]++,A[E.dtlsTransport.state]++)}),A.connected+=A.completed,f="new",A.failed>0?f="failed":A.connecting>0?f="connecting":A.disconnected>0?f="disconnected":A.new>0?f="new":A.connected>0&&(f="connected"),f!==this.connectionState){this.connectionState=f;var v=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",v)}},h.prototype.createOffer=function(){var f=this;if(f._isClosed)return Promise.reject(zi("InvalidStateError","Can not call createOffer after close"));var A=f.transceivers.filter(function(R){return"audio"===R.kind}).length,v=f.transceivers.filter(function(R){return"video"===R.kind}).length,E=arguments[0];if(E){if(E.mandatory||E.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==E.offerToReceiveAudio&&(A=!0===E.offerToReceiveAudio?1:!1===E.offerToReceiveAudio?0:E.offerToReceiveAudio),void 0!==E.offerToReceiveVideo&&(v=!0===E.offerToReceiveVideo?1:!1===E.offerToReceiveVideo?0:E.offerToReceiveVideo)}for(f.transceivers.forEach(function(R){"audio"===R.kind?--A<0&&(R.wantReceive=!1):"video"===R.kind&&--v<0&&(R.wantReceive=!1)});A>0||v>0;)A>0&&(f._createTransceiver("audio"),A--),v>0&&(f._createTransceiver("video"),v--);var S=Vr.writeSessionBoilerplate(f._sdpSessionId,f._sdpSessionVersion++);f.transceivers.forEach(function(R,x){var W=R.track,K=R.kind,ne=R.mid||Vr.generateIdentifier();R.mid=ne,R.iceGatherer||(R.iceGatherer=f._createIceGatherer(x,f.usingBundle));var le=n.RTCRtpSender.getCapabilities(K);o<15019&&(le.codecs=le.codecs.filter(function(be){return"rtx"!==be.name})),le.codecs.forEach(function(be){"H264"===be.name&&void 0===be.parameters["level-asymmetry-allowed"]&&(be.parameters["level-asymmetry-allowed"]="1"),R.remoteCapabilities&&R.remoteCapabilities.codecs&&R.remoteCapabilities.codecs.forEach(function(ke){be.name.toLowerCase()===ke.name.toLowerCase()&&be.clockRate===ke.clockRate&&(be.preferredPayloadType=ke.payloadType)})}),le.headerExtensions.forEach(function(be){(R.remoteCapabilities&&R.remoteCapabilities.headerExtensions||[]).forEach(function(ke){be.uri===ke.uri&&(be.id=ke.id)})});var me=R.sendEncodingParameters||[{ssrc:1001*(2*x+1)}];W&&o>=15019&&"video"===K&&!me[0].rtx&&(me[0].rtx={ssrc:me[0].ssrc+1}),R.wantReceive&&(R.rtpReceiver=new n.RTCRtpReceiver(R.dtlsTransport,K)),R.localCapabilities=le,R.sendEncodingParameters=me}),"max-compat"!==f._config.bundlePolicy&&(S+="a=group:BUNDLE "+f.transceivers.map(function(R){return R.mid}).join(" ")+"\r\n"),S+="a=ice-options:trickle\r\n",f.transceivers.forEach(function(R,x){S+=fd(R,R.localCapabilities,"offer",R.stream,f._dtlsRole),S+="a=rtcp-rsize\r\n",!R.iceGatherer||"new"===f.iceGatheringState||0!==x&&f.usingBundle||(R.iceGatherer.getLocalCandidates().forEach(function(W){W.component=1,S+="a="+Vr.writeCandidate(W)+"\r\n"}),"completed"===R.iceGatherer.state&&(S+="a=end-of-candidates\r\n"))});var w=new n.RTCSessionDescription({type:"offer",sdp:S});return Promise.resolve(w)},h.prototype.createAnswer=function(){var f=this;if(f._isClosed)return Promise.reject(zi("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==f.signalingState&&"have-local-pranswer"!==f.signalingState)return Promise.reject(zi("InvalidStateError","Can not call createAnswer in signalingState "+f.signalingState));var A=Vr.writeSessionBoilerplate(f._sdpSessionId,f._sdpSessionVersion++);f.usingBundle&&(A+="a=group:BUNDLE "+f.transceivers.map(function(S){return S.mid}).join(" ")+"\r\n"),A+="a=ice-options:trickle\r\n";var v=Vr.getMediaSections(f._remoteDescription.sdp).length;f.transceivers.forEach(function(S,w){if(!(w+1>v)){if(S.rejected)return"application"===S.kind?A+="DTLS/SCTP"===S.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+S.protocol+" webrtc-datachannel\r\n":"audio"===S.kind?A+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===S.kind&&(A+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(A+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+S.mid+"\r\n");var R;S.stream&&("audio"===S.kind?R=S.stream.getAudioTracks()[0]:"video"===S.kind&&(R=S.stream.getVideoTracks()[0]),R&&o>=15019&&"video"===S.kind&&!S.sendEncodingParameters[0].rtx&&(S.sendEncodingParameters[0].rtx={ssrc:S.sendEncodingParameters[0].ssrc+1}));var x=b0(S.localCapabilities,S.remoteCapabilities);!x.codecs.filter(function(W){return"rtx"===W.name.toLowerCase()}).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,A+=fd(S,x,"answer",S.stream,f._dtlsRole),S.rtcpParameters&&S.rtcpParameters.reducedSize&&(A+="a=rtcp-rsize\r\n")}});var E=new n.RTCSessionDescription({type:"answer",sdp:A});return Promise.resolve(E)},h.prototype.addIceCandidate=function(f){var A,v=this;return f&&void 0===f.sdpMLineIndex&&!f.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(E,S){if(!v._remoteDescription)return S(zi("InvalidStateError","Can not add ICE candidate without a remote description"));if(f&&""!==f.candidate){var w=f.sdpMLineIndex;if(f.sdpMid)for(var R=0;R<v.transceivers.length;R++)if(v.transceivers[R].mid===f.sdpMid){w=R;break}var x=v.transceivers[w];if(!x)return S(zi("OperationError","Can not add ICE candidate"));if(x.rejected)return E();var W=Object.keys(f.candidate).length>0?Vr.parseCandidate(f.candidate):{};if("tcp"===W.protocol&&(0===W.port||9===W.port)||W.component&&1!==W.component)return E();if((0===w||w>0&&x.iceTransport!==v.transceivers[0].iceTransport)&&!md(x.iceTransport,W))return S(zi("OperationError","Can not add ICE candidate"));var K=f.candidate.trim();0===K.indexOf("a=")&&(K=K.substr(2)),(A=Vr.getMediaSections(v._remoteDescription.sdp))[w]+="a="+(W.type?K:"end-of-candidates")+"\r\n",v._remoteDescription.sdp=Vr.getDescription(v._remoteDescription.sdp)+A.join("")}else for(var ne=0;ne<v.transceivers.length&&(v.transceivers[ne].rejected||(v.transceivers[ne].iceTransport.addRemoteCandidate({}),(A=Vr.getMediaSections(v._remoteDescription.sdp))[ne]+="a=end-of-candidates\r\n",v._remoteDescription.sdp=Vr.getDescription(v._remoteDescription.sdp)+A.join(""),!v.usingBundle));ne++);E()})},h.prototype.getStats=function(f){if(f&&f instanceof n.MediaStreamTrack){var A=null;if(this.transceivers.forEach(function(E){E.rtpSender&&E.rtpSender.track===f?A=E.rtpSender:E.rtpReceiver&&E.rtpReceiver.track===f&&(A=E.rtpReceiver)}),!A)throw zi("InvalidAccessError","Invalid selector.");return A.getStats()}var v=[];return this.transceivers.forEach(function(E){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(S){E[S]&&v.push(E[S].getStats())})}),Promise.all(v).then(function(E){var S=new Map;return E.forEach(function(w){w.forEach(function(R){S.set(R.id,R)})}),S})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(f){var A=n[f];if(A&&A.prototype&&A.prototype.getStats){var v=A.prototype.getStats;A.prototype.getStats=function(){return v.apply(this).then(function(E){var S=new Map;return Object.keys(E).forEach(function(w){var R;E[w].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(R=E[w]).type]||R.type,S.set(w,E[w])}),S})}}});var g=["createOffer","createAnswer"];return g.forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var v=arguments;return"function"==typeof v[0]||"function"==typeof v[1]?A.apply(this,[arguments[2]]).then(function(E){"function"==typeof v[0]&&v[0].apply(null,[E])},function(E){"function"==typeof v[1]&&v[1].apply(null,[E])}):A.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var v=arguments;return"function"==typeof v[1]||"function"==typeof v[2]?A.apply(this,arguments).then(function(){"function"==typeof v[1]&&v[1].apply(null)},function(E){"function"==typeof v[2]&&v[2].apply(null,[E])}):A.apply(this,arguments)}}),["getStats"].forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var v=arguments;return"function"==typeof v[1]?A.apply(this,arguments).then(function(){"function"==typeof v[1]&&v[1].apply(null)}):A.apply(this,arguments)}}),h}(n,o.version);n.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(h,g){let f=!1;return(h=JSON.parse(JSON.stringify(h))).filter(A=>{if(A&&(A.urls||A.url)){let v=A.urls||A.url;A.url&&!A.urls&&t_("RTCIceServer.url","RTCIceServer.urls");const E="string"==typeof v;return E&&(v=[v]),v=v.filter(S=>{if(0===S.indexOf("stun:"))return!1;const w=S.startsWith("turn")&&!S.startsWith("turn:[")&&S.includes("transport=udp");return w&&!f?(f=!0,!0):w&&!f}),delete A.url,A.urls=E?v[0]:v,!!v.length}})}(c.iceServers),dP("ICE servers after filtering:",c.iceServers)),new s(c)},n.RTCPeerConnection.prototype=s.prototype}function Nw(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}var k_=Object.freeze({__proto__:null,shimPeerConnection:Lf,shimReplaceTrack:Nw,shimGetUserMedia:iy,shimGetDisplayMedia:Pw}),oy=Jk,Mw=qt,sy=et,Eh=ju,S0=yv,YN=Bd.exports;if(Cs({target:"Promise",proto:!0,real:!0,forced:!!oy&&N(function(){oy.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var o=Eh(this,Mw("Promise")),s=sy(n);return this.then(s?function(c){return S0(o,n()).then(function(){return c})}:n,s?function(c){return S0(o,n()).then(function(){throw c})}:n)}}),sy(oy)){var C0=Mw("Promise").prototype.finally;oy.prototype.finally!==C0&&YN(oy.prototype,"finally",C0,{unsafe:!0})}function P_(n,o){const s=n&&n.navigator,c=n&&n.MediaStreamTrack;if(s.getUserMedia=function(h,g,f){t_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),s.mediaDevices.getUserMedia(h).then(g,f)},!(o.version>55&&"autoGainControl"in s.mediaDevices.getSupportedConstraints())){const h=function(f,A,v){A in f&&!(v in f)&&(f[v]=f[A],delete f[A])},g=s.mediaDevices.getUserMedia.bind(s.mediaDevices);if(s.mediaDevices.getUserMedia=function(f){return"object"==typeof f&&"object"==typeof f.audio&&(f=JSON.parse(JSON.stringify(f)),h(f.audio,"autoGainControl","mozAutoGainControl"),h(f.audio,"noiseSuppression","mozNoiseSuppression")),g(f)},c&&c.prototype.getSettings){const f=c.prototype.getSettings;c.prototype.getSettings=function(){const A=f.apply(this,arguments);return h(A,"mozAutoGainControl","autoGainControl"),h(A,"mozNoiseSuppression","noiseSuppression"),A}}if(c&&c.prototype.applyConstraints){const f=c.prototype.applyConstraints;c.prototype.applyConstraints=function(A){return"audio"===this.kind&&"object"==typeof A&&(A=JSON.parse(JSON.stringify(A)),h(A,"autoGainControl","mozAutoGainControl"),h(A,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[A])}}}}function Bf(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ay(n,o){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const g=n.RTCPeerConnection.prototype[h],f={[h](){return arguments[0]=new("addIceCandidate"===h?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};n.RTCPeerConnection.prototype[h]=f[h]});const s={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[h,g,f]=arguments;return c.apply(this,[h||null]).then(A=>{if(o.version<53&&!g)try{A.forEach(v=>{v.type=s[v.type]||v.type})}catch(v){if("TypeError"!==v.name)throw v;A.forEach((E,S)=>{A.set(S,Object.assign({},E,{type:s[E.type]||E.type}))})}return A}).then(g,f)}}function aD(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const c=o.apply(this,[]);return c.forEach(h=>h._pc=this),c});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const c=s.apply(this,arguments);return c._pc=this,c}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):jt.resolve(new Map)}}function cy(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=o.apply(this,[]);return s.forEach(c=>c._pc=this),s}),e_(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function uy(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(o){t_("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&o.getTracks().includes(s.track)&&this.removeTrack(s)})})}function ly(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function xw(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.addTransceiver;o&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const s=arguments[1],c=s&&"sendEncodings"in s;c&&s.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=o.apply(this,arguments);if(c){const{sender:g}=h,f=g.getParameters();(!("encodings"in f)||1===f.encodings.length&&0===Object.keys(f.encodings[0]).length)&&(f.encodings=s.sendEncodings,g.sendEncodings=s.sendEncodings,this.setParametersPromises.push(g.setParameters(f).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return h})}function qN(n){if("object"!=typeof n||!n.RTCRtpSender)return;const o=n.RTCRtpSender.prototype.getParameters;o&&(n.RTCRtpSender.prototype.getParameters=function(){const s=o.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function cD(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?jt.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}function yp(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?jt.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}var dy=Object.freeze({__proto__:null,shimOnTrack:Bf,shimPeerConnection:ay,shimSenderGetStats:aD,shimReceiverGetStats:cy,shimRemoveStream:uy,shimRTCDataChannel:ly,shimAddTransceiver:xw,shimGetParameters:qN,shimCreateOffer:cD,shimCreateAnswer:yp,shimGetUserMedia:P_,shimGetDisplayMedia:function(n,o){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(s){if(!s||!s.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,jt.reject(c)}return!0===s.video?s.video={mediaSource:o}:s.video.mediaSource=o,n.navigator.mediaDevices.getUserMedia(s)})}});function N_(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(c=>o.call(this,c,s)),s.getVideoTracks().forEach(c=>o.call(this,c,s))},n.RTCPeerConnection.prototype.addTrack=function(s){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];return h&&h.forEach(f=>{this._localStreams?this._localStreams.includes(f)||this._localStreams.push(f):this._localStreams=[f]}),o.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(o);if(-1===s)return;this._localStreams.splice(s,1);const c=o.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function gd(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(s){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=s),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,this.dispatchEvent(g)})})}});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(h)>=0)return;s._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,s.dispatchEvent(g)})}),o.apply(s,arguments)}}}function JN(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype,s=o.createOffer,c=o.createAnswer,h=o.setLocalDescription,g=o.setRemoteDescription,f=o.addIceCandidate;o.createOffer=function(v,E){const w=s.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return E?(w.then(v,E),jt.resolve()):w},o.createAnswer=function(v,E){const w=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return E?(w.then(v,E),jt.resolve()):w};let A=function(v,E,S){const w=h.apply(this,[v]);return S?(w.then(E,S),jt.resolve()):w};o.setLocalDescription=A,A=function(v,E,S){const w=g.apply(this,[v]);return S?(w.then(E,S),jt.resolve()):w},o.setRemoteDescription=A,A=function(v,E,S){const w=f.apply(this,[v]);return S?(w.then(E,S),jt.resolve()):w},o.addIceCandidate=A}function uD(n){const o=n&&n.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){const s=o.mediaDevices,c=s.getUserMedia.bind(s);o.mediaDevices.getUserMedia=h=>c(Lw(h))}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=function(s,c,h){o.mediaDevices.getUserMedia(s).then(c,h)}.bind(o))}function Lw(n){return n&&void 0!==n.video?Object.assign({},n,{video:Tl(n.video)}):n}function $N(n){if(!n.RTCPeerConnection)return;const o=n.RTCPeerConnection;n.RTCPeerConnection=function(s,c){if(s&&s.iceServers){const h=[];for(let g=0;g<s.iceServers.length;g++){let f=s.iceServers[g];!f.hasOwnProperty("urls")&&f.hasOwnProperty("url")?(t_("RTCIceServer.url","RTCIceServer.urls"),f=JSON.parse(JSON.stringify(f)),f.urls=f.url,delete f.url,h.push(f)):h.push(s.iceServers[g])}s.iceServers=h}return new o(s,c)},n.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>o.generateCertificate})}function lD(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Iu(n){const o=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(s){if(s){void 0!==s.offerToReceiveAudio&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===s.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==s.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==s.offerToReceiveVideo&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const h=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===s.offerToReceiveVideo&&h?"sendrecv"===h.direction?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":"recvonly"===h.direction&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):!0!==s.offerToReceiveVideo||h||this.addTransceiver("video")}return o.apply(this,arguments)}}function Bw(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var _d=Object.freeze({__proto__:null,shimLocalStreamsAPI:N_,shimRemoteStreamsAPI:gd,shimCallbacksAPI:JN,shimGetUserMedia:uD,shimConstraints:Lw,shimRTCIceServerUrls:$N,shimTrackEventTransceiver:lD,shimCreateOfferLegacy:Iu,shimAudioContext:Bw}),I0=Ir,Oc=Ef,Ep=Fi("".replace),Uo="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Fw=RegExp("^"+Uo+Uo+"*"),w0=RegExp(Uo+Uo+"*$"),hy=function(n){return function(o){var s=Oc(I0(o));return 1&n&&(s=Ep(s,Fw,"")),2&n&&(s=Ep(s,w0,"")),s}},dD={start:hy(1),end:hy(2),trim:hy(3)},vF=wA.PROPER,hD=Fs,Uw="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",pD=dD.trim;as({target:"String",proto:!0,forced:function(n){return hD(function(){return!!Uw[n]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[n]()||vF&&Uw[n].name!==n})}("trim")},{trim:function(){return pD(this)}});var Vw=th("String").trim,v4=tc,vd=Vw,jw=String.prototype,Ad=function(n){var o=n.trim;return"string"==typeof n||n===jw||v4(jw,n)&&o===jw.trim?vd:o},T0=ae;Cs({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return T0(URL.prototype.toString,this)}});var R0={exports:{}};!function(n){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(s){return Ad(s).call(s).split("\n").map(function(c){return Ad(c).call(c)})},o.splitSections=function(s){return s.split("\nm=").map(function(c,h){var g;return Ad(g=h>0?"m="+c:c).call(g)+"\r\n"})},o.getDescription=function(s){var c=o.splitSections(s);return c&&c[0]},o.getMediaSections=function(s){var c=o.splitSections(s);return c.shift(),c},o.matchPrefix=function(s,c){return o.splitLines(s).filter(function(h){return 0===h.indexOf(c)})},o.parseCandidate=function(s){for(var c,h={foundation:(c=0===s.indexOf("a=candidate:")?s.substring(12).split(" "):s.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},o.writeCandidate=function(s){var c=[];c.push(s.foundation),c.push(s.component),c.push(s.protocol.toUpperCase()),c.push(s.priority),c.push(s.address||s.ip),c.push(s.port);var h=s.type;return c.push("typ"),c.push(h),"host"!==h&&s.relatedAddress&&s.relatedPort&&(c.push("raddr"),c.push(s.relatedAddress),c.push("rport"),c.push(s.relatedPort)),s.tcpType&&"tcp"===s.protocol.toLowerCase()&&(c.push("tcptype"),c.push(s.tcpType)),(s.usernameFragment||s.ufrag)&&(c.push("ufrag"),c.push(s.usernameFragment||s.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(s){return s.substr(14).split(" ")},o.parseRtpMap=function(s){var c=s.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},o.writeRtpMap=function(s){var c=s.payloadType;void 0!==s.preferredPayloadType&&(c=s.preferredPayloadType);var h=s.channels||s.numChannels||1;return"a=rtpmap:"+c+" "+s.name+"/"+s.clockRate+(1!==h?"/"+h:"")+"\r\n"},o.parseExtmap=function(s){var c=s.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(s){return"a=extmap:"+(s.id||s.preferredId)+(s.direction&&"sendrecv"!==s.direction?"/"+s.direction:"")+" "+s.uri+"\r\n"},o.parseFmtp=function(s){for(var c,h={},g=s.substr(s.indexOf(" ")+1).split(";"),f=0;f<g.length;f++){var A,v;c=Ad(A=g[f]).call(A).split("="),h[Ad(v=c[0]).call(v)]=c[1]}return h},o.writeFmtp=function(s){var c="",h=s.payloadType;if(void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.parameters&&Object.keys(s.parameters).length){var g=[];Object.keys(s.parameters).forEach(function(f){g.push(s.parameters[f]?f+"="+s.parameters[f]:f)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},o.parseRtcpFb=function(s){var c=s.substr(s.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(s){var c="",h=s.payloadType;return void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.rtcpFeedback&&s.rtcpFeedback.length&&s.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(s){var c=s.indexOf(" "),h={ssrc:parseInt(s.substr(7,c-7),10)},g=s.indexOf(":",c);return g>-1?(h.attribute=s.substr(c+1,g-c-1),h.value=s.substr(g+1)):h.attribute=s.substr(c+1),h},o.parseSsrcGroup=function(s){var c=s.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},o.getMid=function(s){var c=o.matchPrefix(s,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(s){var c=s.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(s,c){return{role:"auto",fingerprints:o.matchPrefix(s+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(s,c){var h="a=setup:"+c+"\r\n";return s.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},o.parseCryptoLine=function(s){var c=s.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},o.writeCryptoLine=function(s){return"a=crypto:"+s.tag+" "+s.cryptoSuite+" "+("object"==typeof s.keyParams?o.writeCryptoKeyParams(s.keyParams):s.keyParams)+(s.sessionParams?" "+s.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(s){if(0!==s.indexOf("inline:"))return null;var c=s.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(s){return s.keyMethod+":"+s.keySalt+(s.lifeTime?"|"+s.lifeTime:"")+(s.mkiValue&&s.mkiLength?"|"+s.mkiValue+":"+s.mkiLength:"")},o.getCryptoParameters=function(s,c){return o.matchPrefix(s+c,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(s,c){var h=o.matchPrefix(s+c,"a=ice-ufrag:")[0],g=o.matchPrefix(s+c,"a=ice-pwd:")[0];return h&&g?{usernameFragment:h.substr(12),password:g.substr(10)}:null},o.writeIceParameters=function(s){return"a=ice-ufrag:"+s.usernameFragment+"\r\na=ice-pwd:"+s.password+"\r\n"},o.parseRtpParameters=function(s){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=o.splitLines(s)[0].split(" "),g=3;g<h.length;g++){var f=h[g],A=o.matchPrefix(s,"a=rtpmap:"+f+" ")[0];if(A){var v=o.parseRtpMap(A),E=o.matchPrefix(s,"a=fmtp:"+f+" ");switch(v.parameters=E.length?o.parseFmtp(E[0]):{},v.rtcpFeedback=o.matchPrefix(s,"a=rtcp-fb:"+f+" ").map(o.parseRtcpFb),c.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(v.name.toUpperCase())}}}return o.matchPrefix(s,"a=extmap:").forEach(function(S){c.headerExtensions.push(o.parseExtmap(S))}),c},o.writeRtpDescription=function(s,c){var h="";h+="m="+s+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(f){return void 0!==f.preferredPayloadType?f.preferredPayloadType:f.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(f){h+=o.writeRtpMap(f),h+=o.writeFmtp(f),h+=o.writeRtcpFb(f)});var g=0;return c.codecs.forEach(function(f){f.maxptime>g&&(g=f.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(f){h+=o.writeExtmap(f)}),h},o.parseRtpEncodingParameters=function(s){var c,h=[],g=o.parseRtpParameters(s),f=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),v=o.matchPrefix(s,"a=ssrc:").map(function(R){return o.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),E=v.length>0&&v[0].ssrc,S=o.matchPrefix(s,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(x){return parseInt(x,10)})});S.length>0&&S[0].length>1&&S[0][0]===E&&(c=S[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var x={ssrc:E,codecPayloadType:parseInt(R.parameters.apt,10)};E&&c&&(x.rtx={ssrc:c}),h.push(x),f&&((x=JSON.parse(JSON.stringify(x))).fec={ssrc:E,mechanism:A?"red+ulpfec":"red"},h.push(x))}}),0===h.length&&E&&h.push({ssrc:E});var w=o.matchPrefix(s,"b=");return w.length&&(w=0===w[0].indexOf("b=TIAS:")?parseInt(w[0].substr(7),10):0===w[0].indexOf("b=AS:")?1e3*parseInt(w[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=w})),h},o.parseRtcpParameters=function(s){var c={},h=o.matchPrefix(s,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=o.matchPrefix(s,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var f=o.matchPrefix(s,"a=rtcp-mux");return c.mux=f.length>0,c},o.parseMsid=function(s){var c,h=o.matchPrefix(s,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=o.matchPrefix(s,"a=ssrc:").map(function(f){return o.parseSsrcMedia(f)}).filter(function(f){return"msid"===f.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},o.parseSctpDescription=function(s){var c,h=o.parseMLine(s),g=o.matchPrefix(s,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var f=o.matchPrefix(s,"a=sctp-port:");if(f.length>0)return{port:parseInt(f[0].substr(12),10),protocol:h.fmt,maxMessageSize:c};if(o.matchPrefix(s,"a=sctpmap:").length>0){var A=o.matchPrefix(s,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:c}}},o.writeSctpDescription=function(s,c){var h=[];return h="DTLS/SCTP"!==s.protocol?["m="+s.kind+" 9 "+s.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+s.kind+" 9 "+s.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&h.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),h.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(s,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(s||o.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(s,c,h,g){var f=o.writeRtpDescription(s.kind,c);if(f+=o.writeIceParameters(s.iceGatherer.getLocalParameters()),f+=o.writeDtlsParameters(s.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),f+="a=mid:"+s.mid+"\r\n",f+=s.direction?"a="+s.direction+"\r\n":s.rtpSender&&s.rtpReceiver?"a=sendrecv\r\n":s.rtpSender?"a=sendonly\r\n":s.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",s.rtpSender){var A="msid:"+g.id+" "+s.rtpSender.track.id+"\r\n";f+="a="+A,f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" "+A,s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" "+A,f+="a=ssrc-group:FID "+s.sendEncodingParameters[0].ssrc+" "+s.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",s.rtpSender&&s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),f},o.getDirection=function(s,c){for(var h=o.splitLines(s),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(s){return o.splitLines(s)[0].split(" ")[0].substr(2)},o.isRejected=function(s){return"0"===s.split(" ",2)[1]},o.parseMLine=function(s){var c=o.splitLines(s)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(s){var c=o.matchPrefix(s,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(s){if("string"!=typeof s||0===s.length)return!1;for(var c=o.splitLines(s),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=o}(R0);var ks=R0.exports;function py(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const o=n.RTCIceCandidate;n.RTCIceCandidate=function(s){if("object"==typeof s&&s.candidate&&0===s.candidate.indexOf("a=")&&((s=JSON.parse(JSON.stringify(s))).candidate=s.candidate.substr(2)),s.candidate&&s.candidate.length){const c=new o(s),h=ks.parseCandidate(s.candidate),g=Object.assign(c,h);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new o(s)},n.RTCIceCandidate.prototype=o.prototype,e_(n,"icecandidate",s=>(s.candidate&&Object.defineProperty(s,"candidate",{value:new n.RTCIceCandidate(s.candidate),writable:"false"}),s))}function O0(n,o){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const s=function(A){if(!A||!A.sdp)return!1;const v=ks.splitSections(A.sdp);return v.shift(),v.some(E=>{const S=ks.parseMLine(E);return S&&"application"===S.kind&&-1!==S.protocol.indexOf("SCTP")})},c=function(A){const v=A.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===v||v.length<2)return-1;const E=parseInt(v[1],10);return E!=E?-1:E},h=function(A){let v=65536;return"firefox"===o.browser&&(v=o.version<57?-1===A?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637),v},g=function(A,v){let E=65536;"firefox"===o.browser&&57===o.version&&(E=65535);const S=ks.matchPrefix(A.sdp,"a=max-message-size:");return S.length>0?E=parseInt(S[0].substr(19),10):"firefox"===o.browser&&-1!==v&&(E=2147483637),E},f=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===o.browser&&o.version>=76){const{sdpSemantics:A}=this.getConfiguration();"plan-b"===A&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(s(arguments[0])){const A=c(arguments[0]),v=h(A),E=g(arguments[0],A);let S;S=0===v&&0===E?Number.POSITIVE_INFINITY:0===v||0===E?Math.max(v,E):Math.min(v,E);const w={};Object.defineProperty(w,"maxMessageSize",{get:()=>S}),this._sctp=w}return f.apply(this,arguments)}}function D0(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function o(c,h){const g=c.send;c.send=function(){const f=arguments[0];if("open"===c.readyState&&h.sctp&&(f.length||f.size||f.byteLength)>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const s=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const c=s.apply(this,arguments);return o(c,this),c},e_(n,"datachannel",c=>(o(c.channel,c.target),c))}function Qw(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype;Object.defineProperty(o,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(o,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(s){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),s&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=s)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(s=>{const c=o[s];o[s]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const g=h.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const f=new Event("connectionstatechange",h);g.dispatchEvent(f)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function Ff(n,o){if(!n.RTCPeerConnection||"chrome"===o.browser&&o.version>=71||"safari"===o.browser&&o.version>=605)return;const s=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const h=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==Ad(g).call(g)).join("\n");n.RTCSessionDescription&&c instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return s.apply(this,arguments)}}function fy(n,o){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const s=n.RTCPeerConnection.prototype.addIceCandidate;s&&0!==s.length&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===o.browser&&o.version<78||"firefox"===o.browser&&o.version<68||"safari"===o.browser)&&arguments[0]&&""===arguments[0].candidate?jt.resolve():s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),jt.resolve())})}var ZN=Object.freeze({__proto__:null,shimRTCIceCandidate:py,shimMaxMessageSize:O0,shimSendThrowTypeError:D0,shimConnectionState:Qw,removeExtmapAllowMixed:Ff,shimAddIceCandidateNullOrEmpty:fy});let zs,Ai;(function(){let{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const s=dP,c=Om(n),h={browserDetails:c,commonShim:ZN,extractVersion:wc,disableLog:fI,disableWarnings:dB};switch(c.browser){case"chrome":if(!E0||!xf||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),h;if(null===c.version)return s("Chrome shim can not determine version, not shimming."),h;s("adapter.js shimming chrome."),h.browserShim=E0,fy(n,c),hi(n,c),kw(n),xf(n,c),Ba(n),_o(n,c),oa(n),ry(n),Fa(n),xi(n,c),py(n),Qw(n),O0(n,c),D0(n),Ff(n,c);break;case"firefox":if(!dy||!ay||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),h;s("adapter.js shimming firefox."),h.browserShim=dy,fy(n,c),P_(n,c),ay(n,c),Bf(n),uy(n),aD(n),cy(n),ly(n),xw(n),qN(n),cD(n),yp(n),py(n),Qw(n),O0(n,c),D0(n);break;case"edge":if(!k_||!Lf||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),h;s("adapter.js shimming edge."),h.browserShim=k_,iy(n),Pw(n),Lf(n,c),Nw(n),O0(n,c),D0(n);break;case"safari":if(!_d||!o.shimSafari)return s("Safari shim is not included in this adapter release."),h;s("adapter.js shimming safari."),h.browserShim=_d,fy(n,c),$N(n),Iu(n),JN(n),N_(n),gd(n),lD(n),uD(n),Bw(n),py(n),O0(n,c),D0(n),Ff(n,c);break;default:s("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(zs||(zs={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(Ai||(Ai={}));var fD={exports:{}};!function(n,o){!function(s,c){var h="function",g="object",f="string",A="model",v="name",E="type",S="vendor",w="version",R="architecture",x="console",W="mobile",K="tablet",ne="smarttv",le="wearable",me="embedded",be={extend:function(ln,dn){var It={};for(var He in ln)It[He]=dn[He]&&dn[He].length%2==0?dn[He].concat(ln[He]):ln[He];return It},has:function(ln,dn){return typeof ln===f&&-1!==dn.toLowerCase().indexOf(ln.toLowerCase())},lowerize:function(ln){return ln.toLowerCase()},major:function(ln){return typeof ln===f?ln.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(ln,dn){return ln=ln.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===dn?ln:ln.substring(0,255)}},ke={rgx:function(ln,dn){for(var It,He,ct,bt,bn,Ye,lt=0;lt<dn.length&&!bn;){var xt=dn[lt],hn=dn[lt+1];for(It=He=0;It<xt.length&&!bn;)if(bn=xt[It++].exec(ln))for(ct=0;ct<hn.length;ct++)Ye=bn[++He],typeof(bt=hn[ct])===g&&bt.length>0?2==bt.length?this[bt[0]]=typeof bt[1]==h?bt[1].call(this,Ye):bt[1]:3==bt.length?this[bt[0]]=typeof bt[1]!==h||bt[1].exec&&bt[1].test?Ye?Ye.replace(bt[1],bt[2]):c:Ye?bt[1].call(this,Ye,bt[2]):c:4==bt.length&&(this[bt[0]]=Ye?bt[3].call(this,Ye.replace(bt[1],bt[2])):c):this[bt]=Ye||c;lt+=2}},str:function(ln,dn){for(var It in dn)if(typeof dn[It]===g&&dn[It].length>0){for(var He=0;He<dn[It].length;He++)if(be.has(dn[It][He],ln))return"?"===It?c:It}else if(be.has(dn[It],ln))return"?"===It?c:It;return ln}},Ze={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},Nt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[v,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[v,w],[/opios[\/\s]+([\w\.]+)/i],[w,[v,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[w,[v,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[v,w],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[w,[v,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[w,[v,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[v,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[w,[v,"IE"]],[/yabrowser\/([\w\.]+)/i],[w,[v,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure Browser"],w],[/focus\/([\w\.]+)/i],[w,[v,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[w,[v,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[w,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[v,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[w,[v,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[w,[v,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[v,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 Browser"],w],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],w],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[v,w],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[v],[/;fbav\/([\w\.]+);/i],[w,[v,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[v,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[v,w],[/\bgsa\/([\w\.]+)\s.*safari\//i],[w,[v,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[w,[v,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[v,"Chrome WebView"],w],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[w,[v,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[v,w],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[w,[v,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[w,v],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[v,[w,ke.str,Ze.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[v,w],[/(navigator|netscape)\/([\w\.-]+)/i],[[v,"Netscape"],w],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[w,[v,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[v,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,be.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[R,/ower/,"",be.lowerize]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,be.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[A,[S,"Samsung"],[E,K]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[A,[S,"Samsung"],[E,W]],[/\((ip(?:hone|od)[\s\w]*);/i],[A,[S,"Apple"],[E,W]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[A,[S,"Apple"],[E,K]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[A,[S,"Huawei"],[E,K]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[A,[S,"Huawei"],[E,W]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[A,/_/g," "],[S,"Xiaomi"],[E,W]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[A,/_/g," "],[S,"Xiaomi"],[E,K]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[A,[S,"OPPO"],[E,W]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[A,[S,"Vivo"],[E,W]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[A,[S,"Realme"],[E,W]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[A,[S,"Motorola"],[E,W]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[A,[S,"Motorola"],[E,K]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[A,[S,"LG"],[E,K]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[A,[S,"LG"],[E,W]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[A,[S,"Lenovo"],[E,K]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[A,/_/g," "],[S,"Nokia"],[E,W]],[/droid.+;\s(pixel\sc)[\s)]/i],[A,[S,"Google"],[E,K]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[A,[S,"Google"],[E,W]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[A,[S,"Sony"],[E,W]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[A,"Xperia Tablet"],[S,"Sony"],[E,K]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[A,[S,"OnePlus"],[E,W]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[A,[S,"Amazon"],[E,K]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[A,"Fire Phone"],[S,"Amazon"],[E,W]],[/\((playbook);[\w\s\),;-]+(rim)/i],[A,S,[E,K]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[A,[S,"BlackBerry"],[E,W]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[A,[S,"ASUS"],[E,K]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[A,[S,"ASUS"],[E,W]],[/(nexus\s9)/i],[A,[S,"HTC"],[E,K]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[S,[A,/_/g," "],[E,W]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[A,[S,"Acer"],[E,K]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[A,[S,"Meizu"],[E,W]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[S,A,[E,W]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[S,A,[E,K]],[/\s(surface\sduo)\s/i],[A,[S,"Microsoft"],[E,K]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[A,[S,"Fairphone"],[E,W]],[/\s(u304aa)\sbuild/i],[A,[S,"AT&T"],[E,W]],[/sie-(\w*)/i],[A,[S,"Siemens"],[E,W]],[/[;\/]\s?(rct\w+)\sbuild/i],[A,[S,"RCA"],[E,K]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[A,[S,"Dell"],[E,K]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[A,[S,"Verizon"],[E,K]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[A,[S,"Barnes & Noble"],[E,K]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[A,[S,"NuVision"],[E,K]],[/;\s(k88)\sbuild/i],[A,[S,"ZTE"],[E,K]],[/;\s(nx\d{3}j)\sbuild/i],[A,[S,"ZTE"],[E,W]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[A,[S,"Swiss"],[E,W]],[/[;\/]\s?(zur\d{3})\sbuild/i],[A,[S,"Swiss"],[E,K]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[A,[S,"Zeki"],[E,K]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[S,"Dragon Touch"],A,[E,K]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[A,[S,"Insignia"],[E,K]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[A,[S,"NextBook"],[E,K]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[S,"Voice"],A,[E,W]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[S,"LvTel"],A,[E,W]],[/;\s(ph-1)\s/i],[A,[S,"Essential"],[E,W]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[A,[S,"Envizen"],[E,K]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[A,[S,"MachSpeed"],[E,K]],[/[;\/]\s?tu_(1491)\sbuild/i],[A,[S,"Rotor"],[E,K]],[/(shield[\w\s]+)\sbuild/i],[A,[S,"Nvidia"],[E,K]],[/(sprint)\s(\w+)/i],[S,A,[E,W]],[/(kin\.[onetw]{3})/i],[[A,/\./g," "],[S,"Microsoft"],[E,W]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[A,[S,"Zebra"],[E,K]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[A,[S,"Zebra"],[E,W]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[S,A,[E,x]],[/droid.+;\s(shield)\sbuild/i],[A,[S,"Nvidia"],[E,x]],[/(playstation\s[345portablevi]+)/i],[A,[S,"Sony"],[E,x]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[A,[S,"Microsoft"],[E,x]],[/smart-tv.+(samsung)/i],[S,[E,ne]],[/hbbtv.+maple;(\d+)/i],[[A,/^/,"SmartTV"],[S,"Samsung"],[E,ne]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[S,"LG"],[E,ne]],[/(apple)\s?tv/i],[S,[A,"Apple TV"],[E,ne]],[/crkey/i],[[A,"Chromecast"],[S,"Google"],[E,ne]],[/droid.+aft([\w])(\sbuild\/|\))/i],[A,[S,"Amazon"],[E,ne]],[/\(dtv[\);].+(aquos)/i],[A,[S,"Sharp"],[E,ne]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[S,be.trim],[A,be.trim],[E,ne]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[E,ne]],[/((pebble))app\/[\d\.]+\s/i],[S,A,[E,le]],[/droid.+;\s(glass)\s\d/i],[A,[S,"Google"],[E,le]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[A,[S,"Zebra"],[E,le]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[S,[E,me]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[A,[E,W]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[A,[E,K]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[E,be.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[A,[S,"Generic"]],[/(phone)/i],[[E,W]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[w,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[v,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,v]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[v,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[v,[w,ke.str,Ze.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[v,"Windows"],[w,ke.str,Ze.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[v,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[v,"Mac OS"],[w,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[v,w],[/\(bb(10);/i],[w,[v,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[w,[v,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[v,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[v,"webOS"]],[/crkey\/([\d\.]+)/i],[w,[v,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[v,"Chromium OS"],w],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[v,w],[/(sunos)\s?([\w\.\d]*)/i],[[v,"Solaris"],w],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[v,w]]},Vt=function(ln,dn){if("object"==typeof ln&&(dn=ln,ln=c),!(this instanceof Vt))return new Vt(ln,dn).getResult();var It=ln||(void 0!==s&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:""),He=dn?be.extend(Nt,dn):Nt;return this.getBrowser=function(){var ct={name:c,version:c};return ke.rgx.call(ct,It,He.browser),ct.major=be.major(ct.version),ct},this.getCPU=function(){var ct={architecture:c};return ke.rgx.call(ct,It,He.cpu),ct},this.getDevice=function(){var ct={vendor:c,model:c,type:c};return ke.rgx.call(ct,It,He.device),ct},this.getEngine=function(){var ct={name:c,version:c};return ke.rgx.call(ct,It,He.engine),ct},this.getOS=function(){var ct={name:c,version:c};return ke.rgx.call(ct,It,He.os),ct},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return It},this.setUA=function(ct){return It=typeof ct===f&&ct.length>255?be.trim(ct,255):ct,this},this.setUA(It),this};Vt.VERSION="0.7.28",Vt.BROWSER={NAME:v,MAJOR:"major",VERSION:w},Vt.CPU={ARCHITECTURE:R},Vt.DEVICE={MODEL:A,VENDOR:S,TYPE:E,CONSOLE:x,MOBILE:W,SMARTTV:ne,TABLET:K,WEARABLE:le,EMBEDDED:me},Vt.ENGINE={NAME:v,VERSION:w},Vt.OS={NAME:v,VERSION:w},n.exports&&(o=n.exports=Vt),o.UAParser=Vt;var kt=void 0!==s&&(s.jQuery||s.Zepto);if(kt&&!kt.ua){var Sn=new Vt;kt.ua=Sn.getResult(),kt.ua.get=function(){return Sn.getUA()},kt.ua.set=function(ln){Sn.setUA(ln);var dn=Sn.getResult();for(var It in dn)kt.ua[It]=dn[It]}}}("object"==typeof window?window:Y)}(fD,fD.exports);const bh=new fD.exports;let sl=bh.getResult();function Ri(n){return n&&bh.setUA(n),sl=bh.getResult(),{name:mD(sl),version:gD(sl),os:Hw(sl),osVersion:sl.os.version}}function mD(n){if("Blink"===n.engine.name&&"WeChat"!==n.browser.name)return Ai.CHROME;switch(n.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Ai.CHROME;case"Safari":case"Mobile Safari":return Ai.SAFARI;case"Edge":return Ai.EDGE;case"Firefox":return Ai.FIREFOX;case"QQBrowser":return Ai.QQ;case"Opera":return Ai.OPERA;case"WeChat":return Ai.WECHAT;default:return n.browser.name||""}}function gD(n){let o;return o="Blink"===n.engine.name?n.engine.version||"":n.browser.version||"",o.split(".")[0]}function Hw(n){return"Windows"===n.os.name?n.os.version?n.os.name+" "+n.os.version:n.os.name:n.os.name||""}function Gw(){return Ri().os}function k0(){const n=Ri();return!!("WebKit"===sl.engine.name&&n.os===zs.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==Ai.SAFARI||Dc()&&n.name!==Ai.SAFARI)}function _D(){return Ri().name===Ai.CHROME}function Bl(){return Ri().name===Ai.SAFARI}function ps(){return Ri().name===Ai.FIREFOX}function Dc(){return Ri().os===zs.IOS}function Kw(){const n=Ri();if(n.os!==zs.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 13===Number(o[0])}function Ti(){const n=Ri();if(n.os!==zs.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])}function Fl(){const n=Ri();if(n.os!==zs.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&0===Number(o[1])}function eM(){const n=Ri();if(n.os!==zs.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=1}function tM(){const n=Ri();if(n.os!==zs.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=2}function Ul(){return Bl()&&navigator.maxTouchPoints>0}function al(){return Ri().name===Ai.WECHAT}function bp(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Xm(){const n=Ri();return n.name!==Ai.EDGE&&n.name!==Ai.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function P0(){return Ri().os===zs.ANDROID}var M_={exports:{}},Sh=zu.f;as({target:"Object",stat:!0,forced:Object.defineProperty!==Sh,sham:!Hu},{defineProperty:Sh});var rM=Wh.Object,x_=M_.exports=function(n,o,s){return rM.defineProperty(n,o,s)};rM.defineProperty.sham&&(x_.sham=!0);var AF=M_.exports;function X(n,o,s){return o in n?AF(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s,n}var AD={exports:{}},yD=function(n,o){return function(){for(var s=new Array(arguments.length),c=0;c<s.length;c++)s[c]=arguments[c];return n.apply(o,s)}},iM=yD,Ch=Object.prototype.toString;function oM(n){return"[object Array]"===Ch.call(n)}function sM(n){return null!==n&&"object"==typeof n}function EF(n){return"[object Function]"===Ch.call(n)}function zw(n,o){if(null!=n)if("object"!=typeof n&&(n=[n]),oM(n))for(var s=0,c=n.length;s<c;s++)o.call(null,n[s],s,n);else for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&o.call(null,n[h],h,n)}var ki={isArray:oM,isArrayBuffer:function(n){return"[object ArrayBuffer]"===Ch.call(n)},isBuffer:function(n){return null!=n&&null!=n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)},isFormData:function(n){return typeof FormData<"u"&&n instanceof FormData},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n},isObject:sM,isUndefined:function(n){return void 0===n},isDate:function(n){return"[object Date]"===Ch.call(n)},isFile:function(n){return"[object File]"===Ch.call(n)},isBlob:function(n){return"[object Blob]"===Ch.call(n)},isFunction:EF,isStream:function(n){return sM(n)&&EF(n.pipe)},isURLSearchParams:function(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:zw,merge:function n(){var o={};function s(g,f){o[f]="object"==typeof o[f]&&"object"==typeof g?n(o[f],g):g}for(var c=0,h=arguments.length;c<h;c++)zw(arguments[c],s);return o},deepMerge:function n(){var o={};function s(g,f){o[f]="object"==typeof o[f]&&"object"==typeof g?n(o[f],g):"object"==typeof g?n({},g):g}for(var c=0,h=arguments.length;c<h;c++)zw(arguments[c],s);return o},extend:function(n,o,s){return zw(o,function(c,h){n[h]=s&&"function"==typeof c?iM(c,s):c}),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")}},wu=ki;function aM(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var bF=function(n,o,s){if(!o)return n;var c;if(s)c=s(o);else if(wu.isURLSearchParams(o))c=o.toString();else{var h=[];wu.forEach(o,function(f,A){null!=f&&(wu.isArray(f)?A+="[]":f=[f],wu.forEach(f,function(v){wu.isDate(v)?v=v.toISOString():wu.isObject(v)&&(v=JSON.stringify(v)),h.push(aM(A)+"="+aM(v))}))}),c=h.join("&")}if(c){var g=n.indexOf("#");-1!==g&&(n=n.slice(0,g)),n+=(-1===n.indexOf("?")?"?":"&")+c}return n},N0=ki;function Yw(){this.handlers=[]}Yw.prototype.use=function(n,o){return this.handlers.push({fulfilled:n,rejected:o}),this.handlers.length-1},Yw.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},Yw.prototype.forEach=function(n){N0.forEach(this.handlers,function(o){null!==o&&n(o)})};var SF=Yw,CF=ki,IF=function(n){return!(!n||!n.__CANCEL__)},wF=ki,qw=function(n,o,s,c,h){return function(n,o,s,c,h){return n.config=o,s&&(n.code=s),n.request=c,n.response=h,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}(new Error(n),o,s,c,h)},RF=qw,cM=ki,OF=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Vo=ki,M0=Vo.isStandardBrowserEnv()?function(){var n,o=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function c(h){var g=h;return o&&(s.setAttribute("href",g),g=s.href),s.setAttribute("href",g),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return n=c(window.location.href),function(h){var g=Vo.isString(h)?c(h):h;return g.protocol===n.protocol&&g.host===n.host}}():function(){return!0},Jw=ki,ED=Jw.isStandardBrowserEnv()?{write:function(n,o,s,c,h,g){var f=[];f.push(n+"="+encodeURIComponent(o)),Jw.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),Jw.isString(c)&&f.push("path="+c),Jw.isString(h)&&f.push("domain="+h),!0===g&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Vl=ki,B_=bF,$w=M0,x0=qw,Tu=ki,uM=function(n,o){wF.forEach(n,function(s,c){c!==o&&c.toUpperCase()===o.toUpperCase()&&(n[o]=s,delete n[c])})},Ln={"Content-Type":"application/x-www-form-urlencoded"};function Xw(n,o){!Tu.isUndefined(n)&&Tu.isUndefined(n["Content-Type"])&&(n["Content-Type"]=o)}var gy,Sp={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(gy=function(n){return new Promise(function(o,s){var c=n.data,h=n.headers;Vl.isFormData(c)&&delete h["Content-Type"];var g=new XMLHttpRequest;if(n.auth&&(h.Authorization="Basic "+btoa((n.auth.username||"")+":"+(n.auth.password||""))),g.open(n.method.toUpperCase(),B_(n.url,n.params,n.paramsSerializer),!0),g.timeout=n.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var S="getAllResponseHeaders"in g?function(n){var o,s,c,h={};return n&&cM.forEach(n.split("\n"),function(g){if(c=g.indexOf(":"),o=cM.trim(g.substr(0,c)).toLowerCase(),s=cM.trim(g.substr(c+1)),o){if(h[o]&&OF.indexOf(o)>=0)return;h[o]="set-cookie"===o?(h[o]?h[o]:[]).concat([s]):h[o]?h[o]+", "+s:s}}),h}(g.getAllResponseHeaders()):null;(function(n,o,s){var c=s.config.validateStatus;!c||c(s.status)?n(s):o(RF("Request failed with status code "+s.status,s.config,null,s.request,s))})(o,s,{data:n.responseType&&"text"!==n.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:S,config:n,request:g}),g=null}},g.onabort=function(){g&&(s(x0("Request aborted",n,"ECONNABORTED",g)),g=null)},g.onerror=function(){s(x0("Network Error",n,null,g)),g=null},g.ontimeout=function(){s(x0("timeout of "+n.timeout+"ms exceeded",n,"ECONNABORTED",g)),g=null},Vl.isStandardBrowserEnv()){var v=ED,E=(n.withCredentials||$w(n.url))&&n.xsrfCookieName?v.read(n.xsrfCookieName):void 0;E&&(h[n.xsrfHeaderName]=E)}if("setRequestHeader"in g&&Vl.forEach(h,function(S,w){void 0===c&&"content-type"===w.toLowerCase()?delete h[w]:g.setRequestHeader(w,S)}),n.withCredentials&&(g.withCredentials=!0),n.responseType)try{g.responseType=n.responseType}catch(S){if("json"!==n.responseType)throw S}"function"==typeof n.onDownloadProgress&&g.addEventListener("progress",n.onDownloadProgress),"function"==typeof n.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then(function(S){g&&(g.abort(),s(S),g=null)}),void 0===c&&(c=null),g.send(c)})}),gy),transformRequest:[function(n,o){return uM(o,"Accept"),uM(o,"Content-Type"),Tu.isFormData(n)||Tu.isArrayBuffer(n)||Tu.isBuffer(n)||Tu.isStream(n)||Tu.isFile(n)||Tu.isBlob(n)?n:Tu.isArrayBufferView(n)?n.buffer:Tu.isURLSearchParams(n)?(Xw(o,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):Tu.isObject(n)?(Xw(o,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch{}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tu.forEach(["delete","get","head"],function(n){Sp.headers[n]={}}),Tu.forEach(["post","put","patch"],function(n){Sp.headers[n]=Tu.merge(Ln)});var DF=Sp,yd=ki,Zw=function(n,o,s){return CF.forEach(s,function(c){n=c(n,o)}),n},bD=IF,lM=DF;function Ua(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var _y=ki,Ih=function(n,o){o=o||{};var s={};return _y.forEach(["url","method","params","data"],function(c){void 0!==o[c]&&(s[c]=o[c])}),_y.forEach(["headers","auth","proxy"],function(c){_y.isObject(o[c])?s[c]=_y.deepMerge(n[c],o[c]):void 0!==o[c]?s[c]=o[c]:_y.isObject(n[c])?s[c]=_y.deepMerge(n[c]):void 0!==n[c]&&(s[c]=n[c])}),_y.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==o[c]?s[c]=o[c]:void 0!==n[c]&&(s[c]=n[c])}),s},SD=ki,L0=bF,kF=SF,CD=function(n){return Ua(n),n.baseURL&&!function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}(n.url)&&(n.url=function(n,o){return o?n.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):n}(n.baseURL,n.url)),n.headers=n.headers||{},n.data=Zw(n.data,n.headers,n.transformRequest),n.headers=yd.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),yd.forEach(["delete","get","head","post","put","patch","common"],function(o){delete n.headers[o]}),(n.adapter||lM.adapter)(n).then(function(o){return Ua(n),o.data=Zw(o.data,o.headers,n.transformResponse),o},function(o){return bD(o)||(Ua(n),o&&o.response&&(o.response.data=Zw(o.response.data,o.response.headers,n.transformResponse))),Promise.reject(o)})},dM=Ih;function B0(n){this.defaults=n,this.interceptors={request:new kF,response:new kF}}B0.prototype.request=function(n){"string"==typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=dM(this.defaults,n)).method=n.method?n.method.toLowerCase():"get";var o=[CD,void 0],s=Promise.resolve(n);for(this.interceptors.request.forEach(function(c){o.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){o.push(c.fulfilled,c.rejected)});o.length;)s=s.then(o.shift(),o.shift());return s},B0.prototype.getUri=function(n){return n=dM(this.defaults,n),L0(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},SD.forEach(["delete","get","head","options"],function(n){B0.prototype[n]=function(o,s){return this.request(SD.merge(s||{},{method:n,url:o}))}}),SD.forEach(["post","put","patch"],function(n){B0.prototype[n]=function(o,s,c){return this.request(SD.merge(c||{},{method:n,url:o,data:s}))}});var PF=B0;function uo(n){this.message=n}uo.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},uo.prototype.__CANCEL__=!0;var F0=uo,b4=F0;function U0(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(c){o=c});var s=this;n(function(c){s.reason||(s.reason=new b4(c),o(s.reason))})}U0.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},U0.source=function(){var n;return{token:new U0(function(o){n=o}),cancel:n}};var i=U0,l=ki,u=yD,p=PF,_=Ih;function y(n){var o=new p(n),s=u(p.prototype.request,o);return l.extend(s,p.prototype,o),l.extend(s,o),s}var C=y(DF);C.Axios=p,C.create=function(n){return y(_(C.defaults,n))},C.Cancel=F0,C.CancelToken=i,C.isCancel=IF,C.all=function(n){return Promise.all(n)},C.spread=function(n){return function(o){return n.apply(null,o)}},AD.exports=C,AD.exports.default=C;var I=AD.exports;class O{constructor(o){X(this,"logger",void 0),X(this,"prefixLists",[]),this.logger=o}debug(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.debug(...this.prefixLists,...s)}info(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.info(...this.prefixLists,...s)}warning(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.warning(...this.prefixLists,...s)}error(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.error(...this.prefixLists,...s)}prefix(o){return this.prefixLists.push(o),this}popPrefix(){return this.prefixLists.pop(),this}}class D{constructor(){X(this,"_events",{}),X(this,"addListener",this.on)}getListeners(o){return this._events[o]?this._events[o].map(s=>s.listener):[]}on(o,s){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,s)&&c.push({listener:s,once:!1})}once(o,s){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,s)&&c.push({listener:s,once:!0})}off(o,s){if(!this._events[o])return;const c=this._events[o],h=this._indexOfListener(c,s);-1!==h&&c.splice(h,1),0===this._events[o].length&&delete this._events[o]}removeAllListeners(o){o?delete this._events[o]:this._events={}}emit(o){this._events[o]||(this._events[o]=[]);const s=this._events[o].map(f=>f);for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];for(let f=0;f<s.length;f+=1){const A=s[f];A.once&&this.off(o,A.listener),A.listener.apply(this,h||[])}}_indexOfListener(o,s){let c=o.length;for(;c--;)if(o[c].listener===s)return c;return-1}}const B=new class extends D{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let P;!function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(P||(P={}));class F extends Error{constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(s),X(this,"code",void 0),X(this,"message",void 0),X(this,"data",void 0),X(this,"name","AgoraRTCException"),this.code=o,this.message="AgoraRTCError ".concat(this.code,": ").concat(s),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===o&&Q.error(this.toString()),"warning"===o&&Q.warning(this.toString()),this}throw(){throw this.print(),this}}const Z={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function ie(n,o){const s=Math.floor(o.timeout*Math.pow(o.timeoutFactor,n));return Math.min(o.maxRetryTimeout,s)}function oe(n,o,s,c){const h=Object.assign({},Z,c);let g=h.timeout;const f=function(){var E=V(function*(){var S;yield(S=g,new jt(w=>{window.setTimeout(w,S)})),g*=h.timeoutFactor,g=Math.min(h.maxRetryTimeout,g)});return function(){return E.apply(this,arguments)}}();let A=!1;const v=new jt(function(){var E=V(function*(S,w){o=o||(()=>!1),s=s||(()=>!0);for(let R=0;R<h.maxRetryCount;R+=1){if(A)return w(new F(P.OPERATION_ABORTED));try{const x=yield n();if(!o(x,R)||R+1===h.maxRetryCount)return S(x);yield f()}catch(x){if(!s(x,R)||R+1===h.maxRetryCount)return w(x);yield f()}}});return function(S,w){return E.apply(this,arguments)}}());return v.cancel=()=>A=!0,v}function ve(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Ae={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Te=Date.now(),Be=n=>{for(const o in Ae)if(Object.prototype.hasOwnProperty.call(Ae,o)&&Ae[o]===n)return o;return"DEFAULT"},Q=new class{constructor(){X(this,"proxyServerURL",void 0),X(this,"logLevel",Ae.DEBUG),X(this,"uploadState","collecting"),X(this,"uploadLogWaitingList",[]),X(this,"uploadLogUploadingList",[]),X(this,"uploadErrorCount",0),X(this,"currentLogID",0),X(this,"url",void 0),X(this,"extLog",(n,o)=>{this.appendLogToWaitingList(n,o)})}debug(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[Ae.DEBUG].concat(o);this.log.apply(this,c)}info(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[Ae.INFO].concat(o);this.log.apply(this,c)}warning(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[Ae.WARNING].concat(o);this.log.apply(this,c)}error(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[Ae.ERROR].concat(o);this.log.apply(this,c)}upload(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[Ae.DEBUG].concat(o);this.uploadLog.apply(this,c)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){kr("UPLOAD_LOG",!0)}disableLogUpload(){kr("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new O(this).prefix(n)}log(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];if(Date.now()-Te<100)return void setTimeout(()=>{this.log(...o)},Date.now()-Te);const c=Math.max(0,Math.min(4,o[0]));if(o[0]=ve()+" Agora-SDK [".concat(Be(c),"]:"),this.appendLogToWaitingList(c,o),c<this.logLevel)return;const h=ve()+" %cAgora-SDK [".concat(Be(c),"]:");let g=[];if(!mt("USE_NEW_LOG"))switch(c){case Ae.DEBUG:g=[h,"color: #64B5F6;"].concat(o.slice(1)),console.log.apply(console,g);break;case Ae.INFO:g=[h,"color: #1E88E5; font-weight: bold;"].concat(o.slice(1)),console.log.apply(console,g);break;case Ae.WARNING:g=[h,"color: #FB8C00; font-weight: bold;"].concat(o.slice(1)),console.warn.apply(console,g);break;case Ae.ERROR:g=[h,"color: #B00020; font-weight: bold;"].concat(o.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];if(Date.now()-Te<100)return void setTimeout(()=>{this.uploadLog(...o)},Date.now()-Te);const c=Math.max(0,Math.min(4,o[0]));o[0]=ve()+" Agora-SDK [".concat(Be(c),"]:"),this.appendLogToWaitingList(c,o)}appendLogToWaitingList(n){if(!mt("UPLOAD_LOG"))return;let o="";for(var s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];c.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),o+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:o,log_level:n,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var n=this;return V(function*(){const o=n.uploadLogUploadingList,s={sdk_version:Xo,process_id:mt("PROCESS_ID"),payload:JSON.stringify(o)};return oe(V(function*(){const c=yield I.post(n.url||(n.proxyServerURL?"https://".concat(n.proxyServerURL,"/ls/?h=").concat(mt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(mt("LOG_UPLOAD_SERVER"),"/upload/v1")),s,{responseType:"text"});if("OK"!==c.data){const h=new Error("unexpected upload log response");throw h.response=c,h}}),()=>(n.uploadLogUploadingList=[],!1),c=>(B.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:mt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:mt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,mt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),mt("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),mt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),mt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},tt={debug:console.log,info:console.log,warning:console.warn,error:console.error},dt={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},it={debug:0,info:1,warning:2,error:3},ft=[];let Kt,en=0,zt=0,Ot=!1;function _n(){const n=new Date;return[n.getTime(),n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()]}function Gn(n){if(!mt("UPLOAD_LOG"))return;let o;switch(n.type){case Yi.MISC:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.msg]];break;case Yi.INTERNAL_EVENT:case Yi.PUBLIC_EVENT:case Yi.WEB_EVENT:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.event,n.msg]];break;case Yi.INTERNAL_API:case Yi.PUBLIC_API:case Yi.WEB_API:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.api,n.args,n.result]]}ft.push(o)}function Dt(n,o){const[s,c]=_n(),h="warning",g="".concat(c," %cAgora-SDK [").concat(h,"] [INTERNAL API]:"),f={[Yi.WEB_API]:"logWebAPI",[Yi.PUBLIC_API]:"logPublicAPI",[Yi.INTERNAL_API]:"logInternalAPI",[Yi.WEB_EVENT]:"logWebEvent",[Yi.PUBLIC_EVENT]:"logPublicEvent",[Yi.INTERNAL_EVENT]:"logInternalEvent",[Yi.MISC]:"logMisc"}[n],A=[g,dt.warning,"Log.".concat(f),o];mt("USE_NEW_LOG")&&(Ve(h)&&tt.warning.apply(console,A),Gn({timestamp:s,level:h,module:"Log",instanceId:void 0,type:Yi.INTERNAL_API,api:f,args:void 0,result:o.toString()}))}function at(n){if(Array.isArray(n)){let[c,h]=n;return c||(c="Global"),{module:c,instanceId:h}}let o,s;if("string"!=typeof n.__moduleName)throw new Error("Cannot get __moduleName from log instance.");o=n.__moduleName;try{s=n.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:o,instanceId:s}}function Ve(n){return it[n]>=zt}function nt(n,o,s,c,h,g){if(n===Yi.PUBLIC_API||n===Yi.WEB_API||n===Yi.INTERNAL_API)try{const{module:f,instanceId:A}=at(s);h=h&&JSON.stringify(h),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[v,E]=_n(),S=["".concat(E," %cAgora-SDK [").concat(o,"] [").concat({[Yi.PUBLIC_API]:"PUBLIC API",[Yi.WEB_API]:"WEB API",[Yi.INTERNAL_API]:"INTERNAL API"}[n],"]:"),dt[o],"".concat(f).concat(A?"<".concat(A,">"):"",".").concat(c),h,g];mt("USE_NEW_LOG")&&(Ve(o)&&tt[o].apply(console,S),Gn({timestamp:v,level:o,module:f,instanceId:A,type:n,api:c,args:h,result:g}))}catch(f){Dt(n,f)}}function Tt(n,o,s,c,h){if(n===Yi.WEB_EVENT||n===Yi.INTERNAL_EVENT||n===Yi.PUBLIC_EVENT)try{const{module:g,instanceId:f}=at(s);"string"!=typeof h&&(h=h instanceof Error?h.toString():JSON.stringify(h));const[A,v]=_n(),E=["".concat(v," %cAgora-SDK [").concat(o,"] [").concat({[Yi.WEB_EVENT]:"WEB EVENT",[Yi.PUBLIC_EVENT]:"PUBLIC EVENT",[Yi.INTERNAL_EVENT]:"INTERNAL EVENT"}[n],"]:"),dt[o],"".concat(g).concat(f?"<".concat(f,">"):"",".on(").concat(c,")"),h||""];mt("USE_NEW_LOG")&&(Ve(o)&&tt[o].apply(console,E),Gn({timestamp:A,level:o,module:g,instanceId:f,type:n,event:c,msg:h}))}catch(g){Dt(n,g)}}function ht(n){Kt=n}function qe(n,o,s){try{const{module:c,instanceId:h}=at(o),[g,f]=_n(),A=["".concat(f," %cAgora-SDK [").concat(n,"] [MISC]:"),dt[n],"".concat(c).concat(h?"<".concat(h,">"):""),'"'.concat(s,'"')];mt("USE_NEW_LOG")&&(Ve(n)&&tt[n].apply(console,A),Gn({timestamp:g,level:n,module:c,instanceId:h,type:Yi.MISC,msg:s}))}catch(c){wt("warning",["log"],"logMisc",void 0,c)}}function Yt(n,o,s,c){Tt(Yi.INTERNAL_EVENT,n,o,s,c)}function Tn(n,o,s,c){Tt(Yi.PUBLIC_EVENT,n,o,s,c)}function Yn(n,o,s,c){Tt(Yi.WEB_EVENT,n,o,s,c)}function wt(n,o,s,c,h){nt(Yi.INTERNAL_API,n,o,s,c,h)}function Sa(n,o,s,c,h){nt(Yi.WEB_API,n,o,s,c,h)}function Wn(n,o,s,c,h){nt(Yi.PUBLIC_API,n,o,s,c,h)}function no(n,o){return function(s){return class extends s{get __moduleName(){return n}get __instanceId(){if(o){if("function"==typeof this[o])return this[o]();{const c=o.split(".");return c.length>0?nh(c).call(c,(h,g)=>{try{return h&&h[g]}catch{return}},this):this[o]}}}}}}function Ys(n){return $o.apply(this,arguments)}function $o(){return $o=V(function*(n){if(!n&&Ot)return;if(Ot=!0,!mt("UPLOAD_LOG"))return void setTimeout(()=>Ys(!0),mt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===ft.length)return void setTimeout(()=>Ys(!0),mt("UPLOAD_LOG_INTERVAL"));const o=ft.slice(0,mt("UPLOAD_LOG_LENGTH_EACH_TIME")),s={sdk_version:Xo,log_version:mt("LOG_VERSION"),process_id:mt("PROCESS_ID"),index:en,logs:JSON.stringify(o)};yield oe(V(function*(){const c=yield I.post(Kt?"https://".concat(Kt,"/ls/?h=").concat(mt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(mt("LOG_UPLOAD_SERVER"),"/upload/v1"),s,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:mt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:mt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),ft.splice(0,mt("UPLOAD_LOG_LENGTH_EACH_TIME")),en+=o.length,setTimeout(()=>Ys(!0),mt("UPLOAD_LOG_INTERVAL"))}),$o.apply(this,arguments)}const Ru="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",Xo=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(o&&o[1]&&o[2]){const h=o[2];return"".concat(o[1],".").concat(h)}const s=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(s&&s[1]&&s[2]){const h=s[2];return"".concat(s[1],".").concat(100*(Number(h)+1))}return"4.0.0.999"}("4.12.1"),cl=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Pt={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Bt={"90p":vr(160,90),"90p_1":vr(160,90),"120p":vr(160,120,15,30,65),"120p_1":vr(160,120,15,30,65),"120p_3":vr(120,120,15,30,50),"120p_4":vr(212,120),"180p":vr(320,180,15,30,140),"180p_1":vr(320,180,15,30,140),"180p_3":vr(180,180,15,30,100),"180p_4":vr(240,180,15,30,120),"240p":vr(320,240,15,40,200),"240p_1":vr(320,240,15,40,200),"240p_3":vr(240,240,15,40,140),"240p_4":vr(424,240,15,40,220),"360p":vr(640,360,15,80,400),"360p_1":vr(640,360,15,80,400),"360p_3":vr(360,360,15,80,260),"360p_4":vr(640,360,30,80,600),"360p_6":vr(360,360,30,80,400),"360p_7":vr(480,360,15,80,320),"360p_8":vr(480,360,30,80,490),"360p_9":vr(640,360,15,80,800),"360p_10":vr(640,360,24,80,800),"360p_11":vr(640,360,24,80,1e3),"480p":vr(640,480,15,100,500),"480p_1":vr(640,480,15,100,500),"480p_2":vr(640,480,30,100,1e3),"480p_3":vr(480,480,15,100,400),"480p_4":vr(640,480,30,100,750),"480p_6":vr(480,480,30,100,600),"480p_8":vr(848,480,15,100,610),"480p_9":vr(848,480,30,100,930),"480p_10":vr(640,480,10,100,400),"720p":vr(1280,720,15,120,1130),"720p_1":vr(1280,720,15,120,1130),"720p_2":vr(1280,720,30,120,2e3),"720p_3":vr(1280,720,30,120,1710),"720p_5":vr(960,720,15,120,910),"720p_6":vr(960,720,30,120,1380),"1080p":vr(1920,1080,15,120,2080),"1080p_1":vr(1920,1080,15,120,2080),"1080p_2":vr(1920,1080,30,120,3e3),"1080p_3":vr(1920,1080,30,120,3150),"1080p_5":vr(1920,1080,60,120,4780),"1440p":vr(2560,1440,30,120,4850),"1440p_1":vr(2560,1440,30,120,4850),"1440p_2":vr(2560,1440,60,120,7350),"4k":vr(3840,2160,30,120,8910),"4k_1":vr(3840,2160,30,120,8910),"4k_3":vr(3840,2160,60,120,13500)},ot={"480p":Va(640,480,5),"480p_1":Va(640,480,5),"480p_2":Va(640,480,30),"480p_3":Va(640,480,15),"720p":Va(1280,720,5),"720p_1":Va(1280,720,5),"720p_2":Va(1280,720,30),"720p_3":Va(1280,720,15),"1080p":Va(1920,1080,5),"1080p_1":Va(1920,1080,5),"1080p_2":Va(1920,1080,30),"1080p_3":Va(1920,1080,15)},on={"1SL1TL":Ou(1,1),"3SL3TL":Ou(3,3),"2SL3TL":Ou(2,3)};function An(n){return"string"==typeof n?Object.assign({},Bt[n]):n}function qn(n){return"string"==typeof n?Object.assign({},ot[n]):n}function cr(n){return"string"==typeof n?Object.assign({},on[n]):n}const ri={speech_low_quality:qc(16e3,!1),speech_standard:qc(32e3,!1,18),music_standard:qc(48e3,!1),standard_stereo:qc(48e3,!0,56),high_quality:qc(48e3,!1,128),high_quality_stereo:qc(48e3,!0,192)};function Yr(n){return"string"==typeof n?Object.assign({},ri[n]):n}function kr(n,o,s){Object.keys(Ui).includes(n)&&(!s&&Object.keys(Yc).includes(n)||(Ui[n]=o))}function mt(n){return Ui[n]}const Ui={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},Yc={};function qc(n,o,s){return{sampleRate:n,stereo:o,bitrate:s}}function vr(n,o,s,c,h){return{width:n,height:o,frameRate:s,bitrateMin:c,bitrateMax:h}}function Va(n,o,s,c,h){return{width:{max:n},height:{max:o},frameRate:s,bitrateMin:c,bitrateMax:h}}function Ou(n,o){return{numSpatialLayers:n,numTemporalLayers:o}}cl||(Ui.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Ui.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Ui.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Ui.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Ui.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Ui.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Ui.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Ui.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Ui.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Ui.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Ui.AREAS=["NORTH_AMERICA","OVERSEA"]);const Cp=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Ed=[],ul=[];var jl=Yh,V0=zu,hM=Gh,vy=function(n,o,s){var c=jl(o);c in n?V0.f(n,c,hM(0,s)):n[c]=s},NF=gI,bW=Zh,SW=vy,CW=ni.Array,u7=Math.max,S4=function(n,o,s){for(var c=bW(n),h=NF(o,c),g=NF(void 0===s?c:s,c),f=CW(u7(g-h,0)),A=0;h<g;h++,A++)SW(f,A,n[h]);return f.length=A,f},l7=S4,IW=Math.floor,C4=function(n,o){var s=n.length,c=IW(s/2);return s<8?wW(n,o):d7(n,C4(l7(n,0,c),o),C4(l7(n,c),o),o)},wW=function(n,o){for(var s,c,h=n.length,g=1;g<h;){for(c=g,s=n[g];c&&o(n[c-1],s)>0;)n[c]=n[--c];c!==g++&&(n[c]=s)}return n},d7=function(n,o,s,c){for(var h=o.length,g=s.length,f=0,A=0;f<h||A<g;)n[f+A]=f<h&&A<g?c(o[f],s[A])<=0?o[f++]:s[A++]:f<h?o[f++]:s[A++];return n},h7=C4,p7=Kh.match(/firefox\/(\d+)/i),TW=!!p7&&+p7[1],RW=/MSIE|Trident/.test(Kh),f7=Kh.match(/AppleWebKit\/(\d+)\./),MF=as,I4=Fi,w4=ad,DW=va,m7=Zh,T4=Ef,xF=Fs,g7=h7,R4=cf,O4=TW,_7=RW,D4=$d,pM=!!f7&&+f7[1],F_=[],LF=I4(F_.sort),k4=I4(F_.push),j0=xF(function(){F_.sort(void 0)}),Zm=xF(function(){F_.sort(null)}),v7=R4("sort"),BF=!xF(function(){if(D4)return D4<70;if(!(O4&&O4>3)){if(_7)return!0;if(pM)return pM<603;var n,o,s,c,h="";for(n=65;n<76;n++){switch(o=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:s=3;break;case 68:case 71:s=4;break;default:s=2}for(c=0;c<47;c++)F_.push({k:o+c,v:s})}for(F_.sort(function(g,f){return f.v-g.v}),c=0;c<F_.length;c++)o=F_[c].k.charAt(0),h.charAt(h.length-1)!==o&&(h+=o);return"DGBEFHACIJK"!==h}});MF({target:"Array",proto:!0,forced:j0||!Zm||!v7||!BF},{sort:function(n){void 0!==n&&w4(n);var o=DW(this);if(BF)return void 0===n?LF(o):LF(o,n);var s,c,h=[],g=m7(o);for(c=0;c<g;c++)c in o&&k4(h,o[c]);for(g7(h,function(f){return function(A,v){return void 0===v?-1:void 0===A?1:void 0!==f?+f(A,v)||0:T4(A)>T4(v)?1:-1}}(n)),s=h.length,c=0;c<s;)o[c]=h[c++];for(;c<g;)delete o[c++];return o}});var A7=th("Array").sort,y7=tc,E7=A7,e1=Array.prototype,FF=function(n){var o=n.sort;return n===e1||y7(e1,n)&&o===e1.sort?E7:o};function Uf(n,o){if("boolean"!=typeof n)throw new F(P.INVALID_PARAMS,"Invalid ".concat(o,": The value is of the boolean type."))}function ja(n,o,s){if(!s.includes(n))throw new F(P.INVALID_PARAMS,"".concat(o," can only be set as ").concat(JSON.stringify(s)))}function qr(n,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(n<s||n>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!P4(n))throw new F(P.INVALID_PARAMS,"invalid ".concat(o,": the value range is [").concat(s,", ").concat(c,"]. integer only"))}function eg(n,o){if("number"!=typeof n){if(!(n.min||n.max||n.ideal||n.exact))throw new F(P.INVALID_PARAMS,"".concat(o," is not a valid ConstrainLong"));void 0!==n.min&&qr(n.min,"".concat(o,".min"),0,1/0),void 0!==n.max&&qr(n.max,"".concat(o,".max"),1,1/0),void 0!==n.exact&&qr(n.exact,"".concat(o,".exact"),1,1/0),void 0!==n.ideal&&qr(n.ideal,"".concat(o,".ideal"),1,1/0)}else qr(n,o,1,1/0)}function Jc(n,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==n)throw new F(P.INVALID_PARAMS,"".concat(o||"param"," cannot be empty"));if(!UF(n,s,c,h))throw new F(P.INVALID_PARAMS,"Invalid ".concat(o||"string param",": Length of the string: [").concat(s,",").concat(c,"].").concat(h?" ASCII characters only.":""))}function t1(n,o){if(!Array.isArray(n))throw new F(P.INVALID_PARAMS,"".concat(o," should be an array"))}function fM(n){if("string"!=typeof n||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw Q.error("Invalid Channel Name ".concat(n)),new F(P.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function mM(n){if(!("number"==typeof(o=n)&&Math.floor(o)===o&&0<=o&&o<=4294967295||UF(n,1,255)))throw Q.error("Invalid UID ".concat(n," ").concat(typeof n)),new F(P.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var o;"string"==typeof n&&Q.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function vo(n){return null==n}function UF(n){return"string"==typeof n&&n.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&n.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||N4(n))}function P4(n){return"number"==typeof n&&n%1==0}function N4(n){if("string"!=typeof n)return!1;for(let o=0;o<n.length;o+=1){const s=n.charCodeAt(o);if(s<0||s>255)return!1}return!0}let VF,Yi,Ca;(function(n){n.FREE="free",n.UPLOADING="uploading"})(VF||(VF={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(Yi||(Yi={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Ca||(Ca={}));const gM={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function M4(n){return Jc(n.reportId,"params.reportId",0,100,!1),Jc(n.category,"params.category",0,100,!1),Jc(n.event,"params.event",0,100,!1),Jc(n.label,"params.label",0,100,!1),qr(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const x4={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Qa,jo,jF,_M,ur,or,U_,tg,Q0,n1,ll,sa,mr,vM,aa,_r,Ps,ca,ei,ui,Du,Li,AM,$c;function L4(n){return qr(n.timeout,"config.timeout",0,1e5),qr(n.timeoutFactor,"config.timeoutFactor",0,100,!1),qr(n.maxRetryCount,"config.maxRetryConfig",0,1/0),qr(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function QF(n){return ja(n.codec,"config.codec",["vp8","vp9","av1","h264"]),ja(n.mode,"config.mode",["rtc","live"]),void 0!==n.audioCodec&&ja(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==n.proxyServer&&Jc(n.proxyServer,"config.proxyServer",1,1e4),void 0!==n.turnServer&&b7(n.turnServer),void 0!==n.httpRetryConfig&&L4(n.httpRetryConfig),void 0!==n.websocketRetryConfig&&L4(n.websocketRetryConfig),!0}function HF(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(o=>{if(!o.urls)throw Error()})}catch{return!1}return!0}function b7(n){return Jc(n.turnServerURL,"turnServerURL"),Jc(n.username,"username"),Jc(n.password,"password"),n.udpport&&qr(n.udpport,"udpport",1,99999,!0),n.forceturn&&Uf(n.forceturn,"forceturn"),n.security&&Uf(n.security,"security"),n.tcpport&&qr(n.tcpport,"tcpport",1,99999,!0),!0}function S7(n){return void 0!==n.level&&ja(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics"})(Qa||(Qa={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(jo||(jo={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(jF||(jF={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(_M||(_M={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(ur||(ur={})),function(n){n.TRACER="tracer"}(or||(or={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(U_||(U_={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(tg||(tg={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Q0||(Q0={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(n1||(n1={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(ll||(ll={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(sa||(sa={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(mr||(mr={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(vM||(vM={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK"}(aa||(aa={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result"}(_r||(_r={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Ps||(Ps={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(ca||(ca={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response"}(ei||(ei={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile"}(ui||(ui={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats"}(Du||(Du={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Li||(Li={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(AM||(AM={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}($c||($c={}));const B4={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},F4={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},C7={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},kW={uplinkNetworkQuality:0,downlinkNetworkQuality:0},I7={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Pr,fs,Ay;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(Pr||(Pr={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(fs||(fs={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Ay||(Ay={}));const w7={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},GF={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function ID(n,o){Jc(n.url,"".concat(o,".url"),1,1e3,!1),vo(n.x)||qr(n.x,"".concat(o,".x"),0,1e4),vo(n.y)||qr(n.y,"".concat(o,".y"),0,1e4),vo(n.width)||qr(n.width,"".concat(o,".width"),0,1e4),vo(n.height)||qr(n.height,"".concat(o,".height"),0,1e4),vo(n.zOrder)||qr(n.zOrder,"".concat(o,".zOrder"),0,255),vo(n.alpha)||qr(n.alpha,"".concat(o,".alpha"),0,1,!1)}const wD={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},yM={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let ku,ng,Po,U4,cc,Vf,uc,V_,ms,Ns,Qo,lr,Xc,WF,V4,wh,j_,li;function r1(n){if(!n.channelName)throw new F(P.INVALID_PARAMS,"invalid channelName in info");if(!n.uid||"number"!=typeof n.uid)throw new F(P.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Jc(n.token,"info.token",1,2047),mM(n.uid),fM(n.channelName),!0}function TD(n){return ja(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(ku||(ku={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(ng||(ng={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Po||(Po={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(U4||(U4={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(cc||(cc={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Vf||(Vf={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(uc||(uc={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(V_||(V_={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(ms||(ms={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response"}(Ns||(Ns={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Qo||(Qo={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(lr||(lr={})),function(n){n.SCREEN_TRACK="screen_track",n.LOW_STREAM="low_stream"}(Xc||(Xc={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(WF||(WF={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(V4||(V4={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(wh||(wh={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(j_||(j_={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(li||(li={}));const EM=[li.AFRICA,li.ASIA,li.CHINA,li.EUROPE,li.GLOBAL,li.INDIA,li.JAPAN,li.NORTH_AMERICA,li.OCEANIA,li.OVERSEA,li.SOUTH_AMERICA];let ua;!function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(ua||(ua={}));const RD={CHINA:{},ASIA:{CODE:ua.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ua.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ua.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ua.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ua.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ua.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ua.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ua.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ua.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ua.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ua.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ua.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ua.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let yy,j4,ti,Bn,bd,pi,dl,o1;cl&&(RD.CHINA={CODE:ua.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(yy||(yy={}));class Q4 extends D{constructor(o,s){super(),X(this,"onICEConnectionStateChange",void 0),X(this,"onConnectionStateChange",void 0),X(this,"onDTLSTransportStateChange",void 0),X(this,"onDTLSTransportError",void 0),X(this,"onICETransportStateChange",void 0),X(this,"onFirstAudioReceived",void 0),X(this,"onFirstVideoReceived",void 0),X(this,"onFirstAudioDecoded",void 0),X(this,"onFirstVideoDecoded",void 0),X(this,"onSelectedLocalCandidateChanged",void 0),X(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(j4||(j4={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(ti||(ti={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Bn||(Bn={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(bd||(bd={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter"}(pi||(pi={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(dl||(dl={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(o1||(o1={}));const KF={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let Th,Ql,hl,Hl,rs;(function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"})(Th||(Th={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(Ql||(Ql={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(hl||(hl={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(Hl||(Hl={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(rs||(rs={}));const kc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Zc(){return kc}var T7=typeof ArrayBuffer<"u"&&typeof DataView<"u",R7=xp,OD=jd,DD=z.RangeError,zF=function(n){if(void 0===n)return 0;var o=R7(n),s=OD(o);if(o!==s)throw DD("Wrong length or index");return s},H4=z.Array,YF=Math.abs,Ip=Math.pow,O7=Math.floor,G4=Math.log,PW=Math.LN2,MW=Xl,D7=so,k7=Ac,W4=kn,P7=yo,K4=Ee,qF=so,z4=Ac,N7=function(n,o,s){var c=W4(o);c in n?P7.f(n,c,K4(0,s)):n[c]=s},Y4=z.Array,M7=Math.max,x7=function(n,o,s){for(var c=z4(n),h=qF(o,c),g=qF(void 0===s?c:s,c),f=Y4(M7(g-h,0)),A=0;h<g;h++,A++)N7(f,A,n[h]);return f.length=A,f},JF=ue,bM=k,L7=T7,SM=ed,q4=Xk,CM=N,IM=Ig,s1=xp,B7=jd,a1=zF,J4_pack=function(n,o,s){var c,h,g,f=H4(s),A=8*s-o-1,v=(1<<A)-1,E=v>>1,S=23===o?Ip(2,-24)-Ip(2,-77):0,w=n<0||0===n&&1/n<0?1:0,R=0;for((n=YF(n))!=n||n===1/0?(h=n!=n?1:0,c=v):(c=O7(G4(n)/PW),n*(g=Ip(2,-c))<1&&(c--,g*=2),(n+=c+E>=1?S/g:S*Ip(2,1-E))*g>=2&&(c++,g/=2),c+E>=v?(h=0,c=v):c+E>=1?(h=(n*g-1)*Ip(2,o),c+=E):(h=n*Ip(2,E-1)*Ip(2,o),c=0));o>=8;)f[R++]=255&h,h/=256,o-=8;for(c=c<<o|h,A+=o;A>0;)f[R++]=255&c,c/=256,A-=8;return f[--R]|=128*w,f},J4_unpack=function(n,o){var s,c=n.length,h=8*c-o-1,g=(1<<h)-1,f=g>>1,A=h-7,v=c-1,E=n[v--],S=127&E;for(E>>=7;A>0;)S=256*S+n[v--],A-=8;for(s=S&(1<<-A)-1,S>>=-A,A+=o;A>0;)s=256*s+n[v--],A-=8;if(0===S)S=1-f;else{if(S===g)return s?NaN:E?-1/0:1/0;s+=Ip(2,o),S-=f}return(E?-1:1)*s*Ip(2,S-o)},XF=YC,ZF=Lc,F7=tm.f,e3=yo.f,$4=x7,X4=Zy,t3=nd.PROPER,Z4=nd.CONFIGURABLE,c1=Bu.get,n3=Bu.set,r3="ArrayBuffer",wM="Wrong index",jf=z.ArrayBuffer,wp=jf,H0=wp&&wp.prototype,Gl=z.DataView,G0=Gl&&Gl.prototype,i3=Object.prototype,V7=z.Array,PD=z.RangeError,j7=JF(function(n){for(var o=MW(this),s=k7(o),c=arguments.length,h=D7(c>1?arguments[1]:void 0,s),g=c>2?arguments[2]:void 0,f=void 0===g?s:D7(g,s);f>h;)o[h++]=n;return o}),Q7=JF([].reverse),TM=J4_pack,o3=J4_unpack,e5=function(n){return[255&n]},s3=function(n){return[255&n,n>>8&255]},t5=function(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]},a3=function(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},H7=function(n){return TM(n,23,4)},n5=function(n){return TM(n,52,8)},RM=function(n,o){e3(n.prototype,o,{get:function(){return c1(this)[o]}})},Q_=function(n,o,s,c){var h=a1(s),g=c1(n);if(h+o>g.byteLength)throw PD(wM);var f=c1(g.buffer).bytes,A=h+g.byteOffset,v=$4(f,A,A+o);return c?v:Q7(v)},W0=function(n,o,s,c,h,g){var f=a1(s),A=c1(n);if(f+o>A.byteLength)throw PD(wM);for(var v=c1(A.buffer).bytes,E=f+A.byteOffset,S=c(+h),w=0;w<o;w++)v[E+w]=S[g?w:o-w-1]};if(L7){var G7=t3&&jf.name!==r3;if(CM(function(){jf(1)})&&CM(function(){new jf(-1)})&&!CM(function(){return new jf,new jf(1.5),new jf(NaN),G7&&!Z4}))G7&&Z4&&SM(jf,"name",r3);else{(wp=function(n){return IM(this,H0),new jf(a1(n))}).prototype=H0;for(var r5,c3=F7(jf),i5=0;c3.length>i5;)(r5=c3[i5++])in wp||SM(wp,r5,jf[r5]);H0.constructor=wp}ZF&&XF(G0)!==i3&&ZF(G0,i3);var OM=new Gl(new wp(2)),o5=JF(G0.setInt8);OM.setInt8(0,2147483648),OM.setInt8(1,2147483649),!OM.getInt8(0)&&OM.getInt8(1)||q4(G0,{setInt8:function(n,o){o5(this,n,o<<24>>24)},setUint8:function(n,o){o5(this,n,o<<24>>24)}},{unsafe:!0})}else H0=(wp=function(n){IM(this,H0);var o=a1(n);n3(this,{bytes:j7(V7(o),0),byteLength:o}),bM||(this.byteLength=o)}).prototype,G0=(Gl=function(n,o,s){IM(this,G0),IM(n,H0);var c=c1(n).byteLength,h=s1(o);if(h<0||h>c)throw PD("Wrong offset");if(h+(s=void 0===s?c-h:B7(s))>c)throw PD("Wrong length");n3(this,{buffer:n,byteLength:s,byteOffset:h}),bM||(this.buffer=n,this.byteLength=s,this.byteOffset=h)}).prototype,bM&&(RM(wp,"byteLength"),RM(Gl,"buffer"),RM(Gl,"byteLength"),RM(Gl,"byteOffset")),q4(G0,{getInt8:function(n){return Q_(this,1,n)[0]<<24>>24},getUint8:function(n){return Q_(this,1,n)[0]},getInt16:function(n){var o=Q_(this,2,n,arguments.length>1?arguments[1]:void 0);return(o[1]<<8|o[0])<<16>>16},getUint16:function(n){var o=Q_(this,2,n,arguments.length>1?arguments[1]:void 0);return o[1]<<8|o[0]},getInt32:function(n){return a3(Q_(this,4,n,arguments.length>1?arguments[1]:void 0))},getUint32:function(n){return a3(Q_(this,4,n,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(n){return o3(Q_(this,4,n,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(n){return o3(Q_(this,8,n,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(n,o){W0(this,1,n,e5,o)},setUint8:function(n,o){W0(this,1,n,e5,o)},setInt16:function(n,o){W0(this,2,n,s3,o,arguments.length>2?arguments[2]:void 0)},setUint16:function(n,o){W0(this,2,n,s3,o,arguments.length>2?arguments[2]:void 0)},setInt32:function(n,o){W0(this,4,n,t5,o,arguments.length>2?arguments[2]:void 0)},setUint32:function(n,o){W0(this,4,n,t5,o,arguments.length>2?arguments[2]:void 0)},setFloat32:function(n,o){W0(this,4,n,H7,o,arguments.length>2?arguments[2]:void 0)},setFloat64:function(n,o){W0(this,8,n,n5,o,arguments.length>2?arguments[2]:void 0)}});X4(wp,r3),X4(Gl,"DataView");var u3={ArrayBuffer:wp,DataView:Gl},LW=Cs,s5=ue,BW=N,W7=iu,K7=so,FW=jd,z7=ju,l3=u3.ArrayBuffer,d3=u3.DataView,a5=d3.prototype,c5=s5(l3.prototype.slice),h3=s5(a5.getUint8),eu=s5(a5.setUint8);LW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:BW(function(){return!new l3(2).slice(1,void 0).byteLength})},{slice:function(n,o){if(c5&&void 0===o)return c5(W7(this),n);for(var s=W7(this).byteLength,c=K7(n,s),h=K7(void 0===o?s:o,s),g=new(z7(this,l3))(FW(h-c)),f=new d3(this),A=new d3(g),v=0;c<h;)eu(A,v++,h3(f,c++));return g}});var Sd,Qf,ND,Hf={exports:{}},MD=T7,p3=k,Pc=z,xD=et,H_=Zt,K0=gc,u5=$a,f3=To,m3=ed,g3=Bd.exports,UW=yo.f,z0=Mr,LD=YC,Wl=Lc,Y7=No,Gf=ov,Y0=Pc.Int8Array,BD=Y0&&Y0.prototype,rg=Pc.Uint8ClampedArray,q7=rg&&rg.prototype,ig=Y0&&LD(Y0),Wf=BD&&LD(BD),J7=Object.prototype,_3=Pc.TypeError,v3=Y7("toStringTag"),u1=Gf("TYPED_ARRAY_TAG"),og=Gf("TYPED_ARRAY_CONSTRUCTOR"),Ey=MD&&!!Wl&&"Opera"!==u5(Pc.opera),l5=!1,G_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},DM={BigInt64Array:8,BigUint64Array:8},A3=function(n){if(!H_(n))return!1;var o=u5(n);return K0(G_,o)||K0(DM,o)};for(Sd in G_)(ND=(Qf=Pc[Sd])&&Qf.prototype)?m3(ND,og,Qf):Ey=!1;for(Sd in DM)(ND=(Qf=Pc[Sd])&&Qf.prototype)&&m3(ND,og,Qf);if((!Ey||!xD(ig)||ig===Function.prototype)&&(ig=function(){throw _3("Incorrect invocation")},Ey))for(Sd in G_)Pc[Sd]&&Wl(Pc[Sd],ig);if((!Ey||!Wf||Wf===J7)&&(Wf=ig.prototype,Ey))for(Sd in G_)Pc[Sd]&&Wl(Pc[Sd].prototype,Wf);if(Ey&&LD(q7)!==Wf&&Wl(q7,Wf),p3&&!K0(Wf,v3))for(Sd in l5=!0,UW(Wf,v3,{get:function(){return H_(this)?this[u1]:void 0}}),G_)Pc[Sd]&&m3(Pc[Sd],u1,Sd);var by={NATIVE_ARRAY_BUFFER_VIEWS:Ey,TYPED_ARRAY_CONSTRUCTOR:og,TYPED_ARRAY_TAG:l5&&u1,aTypedArray:function(n){if(A3(n))return n;throw _3("Target is not a typed array")},aTypedArrayConstructor:function(n){if(xD(n)&&(!Wl||z0(ig,n)))return n;throw _3(f3(n)+" is not a typed array constructor")},exportTypedArrayMethod:function(n,o,s,c){if(p3){if(s)for(var h in G_){var g=Pc[h];if(g&&K0(g.prototype,n))try{delete g.prototype[n]}catch{try{g.prototype[n]=o}catch{}}}Wf[n]&&!s||g3(Wf,n,s?o:Ey&&BD[n]||o,c)}},exportTypedArrayStaticMethod:function(n,o,s){var c,h;if(p3){if(Wl){if(s)for(c in G_)if((h=Pc[c])&&K0(h,n))try{delete h[n]}catch{}if(ig[n]&&!s)return;try{return g3(ig,n,s?o:Ey&&ig[n]||o)}catch{}}for(c in G_)!(h=Pc[c])||h[n]&&!s||g3(h,n,o)}},isView:function(n){if(!H_(n))return!1;var o=u5(n);return"DataView"===o||K0(G_,o)||K0(DM,o)},isTypedArray:A3,TypedArray:ig,TypedArrayPrototype:Wf},q0=N,lc=sm,E3=z.ArrayBuffer,sg=z.Int8Array,h5=!by.NATIVE_ARRAY_BUFFER_VIEWS||!q0(function(){sg(1)})||!q0(function(){new sg(-1)})||!lc(function(n){new sg,new sg(null),new sg(1.5),new sg(n)},!0)||q0(function(){return 1!==new sg(new E3(2),1,void 0).length}),b3=Zt,kM=Math.floor,p5=Number.isInteger||function(n){return!b3(n)&&isFinite(n)&&kM(n)===n},$7=xp,X7=z.RangeError,FD=z.RangeError,f5=function(n,o){var s=function(n){var o=$7(n);if(o<0)throw X7("The argument can't be less than 0");return o}(n);if(s%o)throw FD("Wrong offset");return s},m5=wo,VW=ae,jW=Lo,QW=Xl,HW=Ac,GW=a2,WW=rE,e9=PL,t9=by.aTypedArrayConstructor,g5=Le,n9=z,r9=Array.isArray||function(n){return"Array"==g5(n)},i9=ga,o9=Zt,_5=No("species"),PM=n9.Array,A5=wo,y5=Wt,E5=Xl,b5=Ac,s9=function(n,o){return new(function(n){var o;return r9(n)&&(i9(o=n.constructor)&&(o===PM||r9(o.prototype))||o9(o)&&null===(o=o[_5]))&&(o=void 0),void 0===o?PM:o}(n))(0===o?0:o)},S5=ue([].push),J0=function(n){var o=1==n,s=2==n,c=3==n,h=4==n,g=6==n,f=7==n,A=5==n||g;return function(v,E,S,w){for(var R,x,W=E5(v),K=y5(W),ne=A5(E,S),le=b5(K),me=0,be=w||s9,ke=o?be(v,le):s||f?be(v,0):void 0;le>me;me++)if((A||me in K)&&(x=ne(R=K[me],me,W),n))if(o)ke[me]=x;else if(x)switch(n){case 3:return!0;case 5:return R;case 6:return me;case 2:S5(ke,R)}else switch(n){case 4:return!1;case 7:S5(ke,R)}return g?-1:c||h?h:ke}},Ha={forEach:J0(0),map:J0(1),filter:J0(2),some:J0(3),every:J0(4),find:J0(5),findIndex:J0(6),filterReject:J0(7)},$0=Cs,C5=z,a9=ae,c9=h5,l9=Ig,KW=Ee,UD=ed,d9=p5,zW=jd,h9=zF,S3=f5,p9=kn,NM=gc,f9=$a,w5=Zt,MM=Go,m9=Cn,g9=Mr,xM=Lc,YW=tm.f,_9=function(n){var o,s,c,h,g,f,A=jW(this),v=QW(n),E=arguments.length,S=E>1?arguments[1]:void 0,w=void 0!==S,R=WW(v);if(R&&!e9(R))for(f=(g=GW(v,R)).next,v=[];!(h=VW(f,g)).done;)v.push(h.value);for(w&&E>2&&(S=m5(S,arguments[2])),s=HW(v),c=new(t9(A))(s),o=0;s>o;o++)c[o]=w?S(v[o],o):v[o];return c},T5=Ha.forEach,LM=Cg,R5=yo,v9=$v,C3=Bu.get,BM=Bu.set,l1=R5.f,FM=H.f,UM=Math.round,D5=C5.RangeError,A9=u3.ArrayBuffer,qW=A9.prototype,JW=u3.DataView,VM=by.NATIVE_ARRAY_BUFFER_VIEWS,$W=by.TYPED_ARRAY_CONSTRUCTOR,y9=by.TYPED_ARRAY_TAG,E9=by.TypedArray,jM=by.TypedArrayPrototype,XW=by.aTypedArrayConstructor,k5=by.isTypedArray,I3="BYTES_PER_ELEMENT",P5="Wrong length",N5=function(n,o){XW(n);for(var s=0,c=o.length,h=new n(c);c>s;)h[s]=o[s++];return h},w3=function(n,o){l1(n,o,{get:function(){return C3(this)[o]}})},b9=function(n){var o;return g9(qW,n)||"ArrayBuffer"==(o=f9(n))||"SharedArrayBuffer"==o},S9=function(n,o){return k5(n)&&!MM(o)&&o in n&&d9(+o)&&o>=0},C9=function(n,o){return o=p9(o),S9(n,o)?KW(2,n[o]):FM(n,o)},T3=function(n,o,s){return o=p9(o),!(S9(n,o)&&w5(s)&&NM(s,"value"))||NM(s,"get")||NM(s,"set")||s.configurable||NM(s,"writable")&&!s.writable||NM(s,"enumerable")&&!s.enumerable?l1(n,o,s):(n[o]=s.value,n)};k?(VM||(H.f=C9,R5.f=T3,w3(jM,"buffer"),w3(jM,"byteOffset"),w3(jM,"byteLength"),w3(jM,"length")),$0({target:"Object",stat:!0,forced:!VM},{getOwnPropertyDescriptor:C9,defineProperty:T3}),Hf.exports=function(n,o,s){var c=n.match(/\d+$/)[0]/8,h=n+(s?"Clamped":"")+"Array",g="get"+n,f="set"+n,A=C5[h],v=A,E=v&&v.prototype,S={},w=function(R,x){l1(R,x,{get:function(){return K=x,(ne=C3(this)).view[g](K*c+ne.byteOffset,!0);var K,ne},set:function(W){return ne=x,le=W,me=C3(this),s&&(le=(le=UM(le))<0?0:le>255?255:255&le),void me.view[f](ne*c+me.byteOffset,le,!0);var ne,le,me},enumerable:!0})};VM?c9&&(v=o(function(R,x,W,K){return l9(R,E),v9(w5(x)?b9(x)?void 0!==K?new A(x,S3(W,c),K):void 0!==W?new A(x,S3(W,c)):new A(x):k5(x)?N5(v,x):a9(_9,v,x):new A(h9(x)),R,v)}),xM&&xM(v,E9),T5(YW(A),function(R){R in v||UD(v,R,A[R])}),v.prototype=E):(v=o(function(R,x,W,K){l9(R,E);var ne,le,me,be=0,ke=0;if(w5(x)){if(!b9(x))return k5(x)?N5(v,x):a9(_9,v,x);ne=x,ke=S3(W,c);var Ze=x.byteLength;if(void 0===K){if(Ze%c||(le=Ze-ke)<0)throw D5(P5)}else if((le=zW(K)*c)+ke>Ze)throw D5(P5);me=le/c}else me=h9(x),ne=new A9(le=me*c);for(BM(R,{buffer:ne,byteOffset:ke,byteLength:le,length:me,view:new JW(ne)});be<me;)w(R,be++)}),xM&&xM(v,E9),E=v.prototype=m9(jM)),E.constructor!==v&&UD(E,"constructor",v),UD(E,$W,v),y9&&UD(E,y9,h),S[h]=v,$0({global:!0,forced:v!=A,sham:!VM},S),I3 in v||UD(v,I3,c),I3 in E||UD(E,I3,c),LM(h)}):Hf.exports=function(){},(0,Hf.exports)("Uint8",function(n){return function(o,s,c){return n(this,o,s,c)}});var ZW=Ac,eK=xp,tK=by.aTypedArray;(0,by.exportTypedArrayMethod)("at",function(n){var o=tK(this),s=ZW(o),c=eK(n),h=c>=0?c:s+c;return h<0||h>=s?void 0:o[h]});var w9=ae,M5=by,nK=Ac,rK=f5,iK=Xl,T9=N,oK=z.RangeError,x5=z.Int8Array,R9=x5&&x5.prototype,O9=R9&&R9.set,sK=M5.aTypedArray,aK=M5.exportTypedArrayMethod,L5=!T9(function(){var n=new Uint8ClampedArray(2);return w9(O9,n,{length:1,0:3},1),3!==n[1]}),cK=L5&&M5.NATIVE_ARRAY_BUFFER_VIEWS&&T9(function(){var n=new x5(2);return n.set(1),n.set("2",1),0!==n[0]||2!==n[1]});aK("set",function(n){sK(this);var o=rK(arguments.length>1?arguments[1]:void 0,1),s=iK(n);if(L5)return w9(O9,this,s,o);var c=this.length,h=nK(s),g=0;if(h+o>c)throw oK("Wrong length");for(;g<h;)this[o+g]=s[g++]},!L5||cK);var D9=x7,uK=Math.floor,B5=function(n,o){var s=n.length,c=uK(s/2);return s<8?lK(n,o):dK(n,B5(D9(n,0,c),o),B5(D9(n,c),o),o)},lK=function(n,o){for(var s,c,h=n.length,g=1;g<h;){for(c=g,s=n[g];c&&o(n[c-1],s)>0;)n[c]=n[--c];c!==g++&&(n[c]=s)}return n},dK=function(n,o,s,c){for(var h=o.length,g=s.length,f=0,A=0;f<h||A<g;)n[f+A]=f<h&&A<g?c(o[f],s[A])<=0?o[f++]:s[A++]:f<h?o[f++]:s[A++];return n},hK=B5,F5=xr.match(/firefox\/(\d+)/i),k9=!!F5&&+F5[1],pK=/MSIE|Trident/.test(xr),P9=xr.match(/AppleWebKit\/(\d+)\./),U5=N,gK=jn,_K=hK,x9=k9,vK=pK,L9=fa,B9=!!P9&&+P9[1],AK=z.Array,yK=by.aTypedArray,EK=by.exportTypedArrayMethod,QM=z.Uint16Array,VD=QM&&ue(QM.prototype.sort),bK=!(!VD||U5(function(){VD(new QM(2),null)})&&U5(function(){VD(new QM(2),{})})),F9=!!VD&&!U5(function(){if(L9)return L9<74;if(x9)return x9<67;if(vK)return!0;if(B9)return B9<602;var n,o,s=new QM(516),c=AK(516);for(n=0;n<516;n++)o=n%4,s[n]=515-n,c[n]=n-2*o+3;for(VD(s,function(h,g){return(h/4|0)-(g/4|0)}),n=0;n<516;n++)if(s[n]!==c[n])return!0});EK("sort",function(n){return void 0!==n&&gK(n),F9?VD(this,n):_K(yK(this),function(o){return function(s,c){return void 0!==o?+o(s,c)||0:c!=c?-1:s!=s?1:0===s&&0===c?1/s>0&&1/c<0?1:-1:s>c}}(n))},!F9||bK);var SK=Cg,U9=u3.ArrayBuffer;let la;Cs({global:!0,forced:z.ArrayBuffer!==U9},{ArrayBuffer:U9}),SK("ArrayBuffer"),function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(la||(la={}));var IK=Pa,HM=Array.isArray||function(n){return"Array"==IK(n)},wK=ni,V9=HM,TK=Hm,RK=du,OK=Rs("species"),j9=wK.Array,Q9=function(n,o){return new(function(n){var o;return V9(n)&&(TK(o=n.constructor)&&(o===j9||V9(o.prototype))||RK(o)&&null===(o=o[OK]))&&(o=void 0),void 0===o?j9:o}(n))(0===o?0:o)},kK=qh,PK=_a,NK=va,MK=Zh,xK=Q9,H9=Fi([].push),Z0=function(n){var o=1==n,s=2==n,c=3==n,h=4==n,g=6==n,f=7==n,A=5==n||g;return function(v,E,S,w){for(var R,x,W=NK(v),K=PK(W),ne=kK(E,S),le=MK(K),me=0,be=w||xK,ke=o?be(v,le):s||f?be(v,0):void 0;le>me;me++)if((A||me in K)&&(x=ne(R=K[me],me,W),n))if(o)ke[me]=x;else if(x)switch(n){case 3:return!0;case 5:return R;case 6:return me;case 2:H9(ke,R)}else switch(n){case 4:return!1;case 7:H9(ke,R)}return g?-1:c||h?h:ke}},G9={forEach:Z0(0),map:Z0(1),filter:Z0(2),some:Z0(3),every:Z0(4),find:Z0(5),findIndex:Z0(6),filterReject:Z0(7)},LK=G9.forEach,W9=cf("forEach")?[].forEach:function(n){return LK(this,n,arguments.length>1?arguments[1]:void 0)};as({target:"Array",proto:!0,forced:[].forEach!=W9},{forEach:W9});var BK=th("Array").forEach,FK=Zu,UK=Ws,VK=tc,jK=BK,V5=Array.prototype,QK={DOMTokenList:!0,NodeList:!0},GK=va,j5=Hc;as({target:"Object",stat:!0,forced:Fs(function(){j5(1)})},{keys:function(n){return j5(GK(n))}});var d1=Wh.Object.keys,GM=JT,K9=as,WM=HM,R3=Fi([].reverse),O3=[1,2];K9({target:"Array",proto:!0,forced:String(O3)===String(O3.reverse())},{reverse:function(){return WM(this)&&(this.length=this.length),R3(this)}});var jD=th("Array").reverse,D3=tc,k3=jD,KM=Array.prototype,Q5=Fs,H5=$d,z9=Rs("species"),Pu=function(n){return H5>=51||!Q5(function(){var o=[];return(o.constructor={})[z9]=function(){return{foo:1}},1!==o[n](Boolean).foo})},Ia=as,W_=ni,G5=HM,zM=Hm,dc=du,ag=gI,WK=Zh,W5=Il,Y9=vy,q9=Rs,K5=Vb,J9=Pu("slice"),$9=q9("species"),YM=W_.Array,X9=Math.max;Ia({target:"Array",proto:!0,forced:!J9},{slice:function(n,o){var s,c,h,g=W5(this),f=WK(g),A=ag(n,f),v=ag(void 0===o?f:o,f);if(G5(g)&&((zM(s=g.constructor)&&(s===YM||G5(s.prototype))||dc(s)&&null===(s=s[$9]))&&(s=void 0),s===YM||void 0===s))return K5(g,A,v);for(c=new(void 0===s?YM:s)(X9(v-A,0)),h=0;A<v;A++,h++)A in g&&Y9(c,h,g[A]);return c.length=h,c}});var qM=th("Array").slice,h1=tc,KK=qM,JM=Array.prototype;function tr(n,o,s,c,h){var g,f,A,v={};return function(n){var o=n.forEach;return n===V5||VK(V5,n)&&o===V5.forEach||UK(QK,FK(n))?jK:o}(g=d1(c)).call(g,function(E){v[E]=c[E]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=GM(f=function(n){var o=n.reverse;return n===KM||D3(KM,n)&&o===KM.reverse?k3:o}(A=function(n){var o=n.slice;return n===JM||h1(JM,n)&&o===JM.slice?KK:o}(s).call(s)).call(A)).call(f,function(E,S){return S(n,o,E)||E},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(AF(n,o,v),v=null),v}var Z9=th("Array").values,eQ=Zu,N3=Ws,z5=tc,tQ=Z9,$M=Array.prototype,nQ={DOMTokenList:!0,NodeList:!0},K_=function(n){var o=n.values;return n===$M||z5($M,n)&&o===$M.values||N3(nQ,eQ(n))?tQ:o},XM=th("Array").keys,zK=Zu,Y5=Ws,ZM=tc,M3=XM,x3=Array.prototype,L3={DOMTokenList:!0,NodeList:!0},Sy=function(n){var o=n.keys;return n===x3||ZM(x3,n)&&o===x3.keys||Y5(L3,zK(n))?M3:o};function B3(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function q5(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?B3(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):B3(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let ex=0,J5=0;function Rh(n,o,s){return new jt((c,h)=>{o.timeout=o.timeout||mt("HTTP_CONNECT_TIMEOUT"),o.responseType=o.responseType||"json",o.data&&!s?(o.data=JSON.stringify(o.data),ex+=qD(o.data)):s&&(o.data.size?ex+=o.data.size:o.data instanceof FormData?ex+=function(g){let f=0;return/DingTalk/i.test(navigator.userAgent)&&g.realFormData&&(g=g.realFormData),g.forEach(A=>{f+="string"==typeof A?qD(A):A.size}),f+138}(o.data):ex+=qD(JSON.stringify(o.data))),o.headers=o.headers||{},o.headers["Content-Type"]=o.headers["Content-Type"]||"application/json",o.method="POST",o.url=n,I.request(o).then(g=>{"string"==typeof g.data?J5+=qD(g.data):g.data instanceof ArrayBuffer||g.data instanceof Uint8Array?J5+=g.data.byteLength:J5+=qD(JSON.stringify(g.data)),c(g.data)}).catch(g=>{I.isCancel(g)?h(new F(P.OPERATION_ABORTED,"cancel token canceled")):h("ECONNABORTED"===g.code?new F(P.NETWORK_TIMEOUT,g.message):g.response?new F(P.NETWORK_RESPONSE_ERROR,g.response.status):new F(P.NETWORK_ERROR,g.message))})})}function YK(n,o){return $5.apply(this,arguments)}function $5(){return $5=V(function*(n,o){const s=new Blob([o.data],{type:"buffer"});return yield Rh(n,q5(q5({},o),{},{data:s,headers:{"Content-Type":"application/octet-stream"}}),!0)}),$5.apply(this,arguments)}const da=new class extends D{set networkState(n){Q.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(o1.NETWORK_STATE_CHANGE,n,this._networkState),n===dl.ONLINE?this.emit(o1.ONLINE):n===dl.OFFLINE&&(this.onlineWaiter=new jt(o=>{this.once(o1.ONLINE,()=>{this.onlineWaiter=void 0,o(dl.ONLINE)})}),this.emit(o1.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),X(this,"_moduleName","network-indicator"),X(this,"_networkState",dl.ONLINE),X(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=dl.ONLINE}),window.addEventListener("offline",()=>{this.networkState=dl.OFFLINE})}};let F3=!1;const Cd=new class extends D{constructor(){super(...arguments),X(this,"onAutoplayFailed",void 0),X(this,"onAudioAutoplayFailed",void 0)}};function X5(){const n=Ri();if(!F3){const o=s=>{s.preventDefault(),F3=!1,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ai.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0)};F3=!0,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ai.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),Q.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Cd.onAutoplayFailed?Cd.onAutoplayFailed():Q.warning(Cd.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Cd.emit("autoplay-failed")}}function U3(n){return(new TextEncoder).encode(n)}const V3=function(n,o){const s=new Uint8Array(n.byteLength+o.byteLength);return s.set(new Uint8Array(n),0),s.set(new Uint8Array(o),n.byteLength),s},qK=function(){var n=V(function*(o){return function(s,c){let h="";return new Uint8Array(s).forEach(g=>{h+=g.toString(16).padStart(2,"0")}),h}(yield crypto.subtle.digest("SHA-256",U3(o)))});return function(s){return n.apply(this,arguments)}}();var rQ;function iQ(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Jr(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?iQ(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):iQ(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function QD(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Xt};return function(o,s,c){const h=o[s];if("function"==typeof h){const g="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=function(){for(var f=arguments.length,A=new Array(f),v=0;v<f;v++)A[v]=arguments[v];const E=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(s),options:A,tag:or.TRACER,reportResult:n.reportResult});try{const S=h.apply(this,A);return E.onSuccess(n.reportResult&&S),S}catch(S){throw E.onError(S),S}}}return c}}function HD(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Xt};return function(o,s,c){const h=o[s];if("function"==typeof h){const g="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=V(function*(){for(var f=arguments.length,A=new Array(f),v=0;v<f;v++)A[v]=arguments[v];const E=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(s),options:A,tag:or.TRACER});try{const S=yield h.apply(this,A);return E.onSuccess(),S}catch(S){throw E.onError(S),S}})}return c}}const Xt=new(no("AgoraRTCEventReport")(rQ=class{constructor(){var n=this;X(this,"baseInfoMap",new Map),X(this,"proxyServer",void 0),X(this,"clientList",Ed),X(this,"eventUploadTimer",void 0),X(this,"setSessionIdTimer",void 0),X(this,"url",void 0),X(this,"backupUrl",void 0),X(this,"_appId",void 0),X(this,"keyEventUploadPendingItems",[]),X(this,"normalEventUploadPendingItems",[]),X(this,"apiInvokeUploadPendingItems",[]),X(this,"apiInvokeCount",0),X(this,"ltsList",[]),X(this,"lastSendNormalEventTime",Date.now()),X(this,"customReportCounterTimer",void 0),X(this,"customReportCount",0),X(this,"extApiInvoke",function(){var o=V(function*(s){for(const c of s){const h=Jr(Jr({},c),{},{sid:null,invokeId:++n.apiInvokeCount,tag:or.TRACER});n.sendApiInvoke(h)}});return function(s){return o.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),mt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),mt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return Q.error("adjust session ".concat(n," start time, sid is not exist or info is undefined")),void wt("error",this,"adjustSessionStartTime","adjust session ".concat(n," start time, sid is not exist or info is undefined"));const o=this.baseInfoMap.get(n),s=Date.now(),c=o.startTime;o.startTime=s,Q.debug("rewrite session ".concat(n," startTime: ").concat(s," , ").concat(s-c,"ms")),wt("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(n," startTime: ").concat(s," , ").concat(s-c,"ms")),this.baseInfoMap.set(n,o)}setAppId(n){this._appId=n}reportApiInvoke(n,o,s){o.timeout=o.timeout||6e4,o.reportResult=void 0===o.reportResult||o.reportResult;const c=Date.now();this.apiInvokeCount+=1;const h=this.apiInvokeCount,g=()=>({tag:o.tag,invokeId:h,sid:n,name:o.name,apiInvokeTime:c,options:o.options,states:o.states||null}),f=!!mt("SHOW_REPORT_INVOKER_LOG");f&&Q.info("".concat(o.name," start"),o.options);let A=!1;Nc(o.timeout).then(()=>{A||(this.sendApiInvoke(Jr(Jr({},g()),{},{error:P.API_INVOKE_TIMEOUT,success:!1})),Q.debug("".concat(o.name," timeout")))});const v=new F(P.UNEXPECTED_ERROR,"".concat(o.name,": this api invoke is end"));return{onSuccess:E=>{const S=()=>{if(A)throw v;return A=!0,this.sendApiInvoke(Jr(Jr({},g()),{},{success:!0},o.reportResult&&{result:E})),f&&Q.info("".concat(o.name," onSuccess")),E};return s?mj(S,o.name+"Success",s,()=>A=!0):S()},onError:E=>{const S=()=>{if(A)throw E;A=!0,this.sendApiInvoke(Jr(Jr({},g()),{},{success:!1,error:E})),f&&Q.info("".concat(o.name," onFailure"),E.toString())};return s?mj(S,o.name+"Error",s,()=>A=!0):S()}}}sessionInit(n,o){if(this.baseInfoMap.has(n))return;const s=Date.now(),c=this.createBaseInfo(n,s);c.cname=o.cname;const h=Object.assign({},{willUploadConsoleLog:mt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:cl?"global":"oversea",areas:mt("AREAS")&&mt("AREAS").join(",")},o.extend),g=Date.now(),f=Jr(Jr({},c),{},{eventType:Qa.SESSION_INIT,appid:o.appid,browser:navigator.userAgent,build:Ru,lts:g,elapse:g-s,extend:JSON.stringify(h),mode:o.mode,process:mt("PROCESS_ID"),success:!0,version:Xo});this.send({type:jo.SESSION,data:f},!0)}joinChooseServer(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.JOIN_CHOOSE_SERVER,lts:h,eventElapse:h-o.lts,chooseServerAddr:o.csAddr,errorCode:o.ec,elapse:h-s.startTime,success:o.succ,chooseServerAddrList:JSON.stringify(o.serverList),uid:o.uid?parseInt(o.uid):null,cid:o.cid?parseInt(o.cid):null,chooseServerIp:o.csIp||"",opid:o.opid,unilbsServerIds:o.unilbsServerIds,extend:o.extend||void 0});this.send({type:jo.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.REQ_USER_ACCOUNT,lts:h,success:o.success,serverAddress:o.serverAddr,stringUid:o.stringUid,uid:o.uid,errorCode:o.errorCode,elapse:h-s.startTime,eventElapse:h-o.lts,extend:JSON.stringify(o.extend)});this.send({type:jo.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info;o.vid&&(c.vid=o.vid),c.uid=o.uid,c.cid=o.cid;const h=Date.now(),{firstSuccess:g,avoidJoinStartTime:f,isProxy:A,addr:v}=o,E=h-(g&&f?f:s.startTime),S=Jr(Jr({},c),{},{eventType:Qa.JOIN_GATEWAY,lts:h,gatewayAddr:o.addr,success:o.succ,errorCode:o.ec,elapse:E,eventElapse:h-o.lts,firstSuccess:g}),w=S.success?1:0;if(o.succ&&(s.lastJoinSuccessTime=h),g)this.send({type:jo.JOIN_GATEWAY,data:S},!0);else{let R;if(v)if(A){const W=v.match(/h=(\d{1,3}-){3}\d{1,3}/g),K=v.match(/p=[0-9]{1,6}/g);R={isSuccess:w,gatewayIp:W&&W.length?W[0].split("=")[1].replace(/-/g,"."):"",port:K&&K.length?K[0].split("=")[1]:"",isProxy:A?1:0}}else{const W=v.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),K=v.match(/:[0-9]{1,6}/g);R={isSuccess:w,gatewayIp:W&&W.length?W[0].split("//")[1].replace(/-/g,"."):"",port:K&&K.length?K[0].split(":")[1]:"",isProxy:A?1:0}}else R={isSuccess:w,gatewayIp:"",port:"",isProxy:A?1:0};delete S.success,delete S.eventType,delete S.firstSuccess,S.vid=Number(S.vid);const x=Object.assign({},S,R,{eventType:Qa.REJOIN_GATEWAY});this.send({type:jo.RE_JOIN_GATEWAY,data:x},!0)}}joinChannelTimeout(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=Date.now(),h=Jr(Jr({},s.info),{},{lts:c,timeout:o,elapse:c-s.startTime});this.send({type:jo.JOIN_CHANNEL_TIMEOUT,data:h},!0)}publish(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.PUBLISH,lts:h,eventElapse:o.eventElapse,elapse:h-s.startTime,success:o.succ,errorCode:o.ec,videoName:o.videoName,audioName:o.audioName,screenName:o.screenName,screenshare:o.screenshare,audio:o.audio,video:o.video,p2pid:o.p2pid,publishRequestid:o.publishRequestid});this.send({type:jo.PUBLISH,data:g},!0)}subscribe(n,o,s){const c=this.baseInfoMap.get(n);if(!c)return;const h=c.info,g=Date.now(),f=Jr(Jr({},h),{},{eventType:Qa.SUBSCRIBE,lts:g,eventElapse:o.eventElapse,elapse:g-c.startTime,success:o.succ,errorCode:o.ec,video:o.video,audio:o.audio,subscribeRequestid:o.subscribeRequestid,p2pid:o.p2pid},s&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof o.peerid?f.peerSuid=o.peerid:f.peer=o.peerid,this.send({type:jo.SUBSCRIBE,data:f},!0)}wsCompressorInit(n){var o;const s=[...Sy(o=this.baseInfoMap).call(o)],h=this.baseInfoMap.get(s.length?s[0]:"UnableToGetSid");if(!h)return;const g=h.info,f=Date.now(),A=Jr(Jr({},g),{},{eventType:Qa.WS_COMPRESSOR_INIT,lts:f,eventElapse:n.eventElapse,elapse:f-h.startTime,status:n.status?1:2});this.send({type:jo.WS_COMPRESSOR_INIT,data:A},!0)}firstRemoteFrame(n,o,s,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=Jr(Jr(Jr({},g),c),{},{elapse:f-h.startTime,eventType:o,lts:f});this.send({type:s,data:A},!0)}onGatewayStream(n,o,s,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=Jr(Jr(Jr({},g),c),{},{eventType:o,lts:f});this.send({type:s,data:A},!0)}streamSwitch(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.STREAM_SWITCH,lts:h,isDual:o.isdual,elapse:h-s.startTime,success:o.succ});this.send({type:jo.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.REQUEST_PROXY_APPCENTER,lts:h,eventElapse:h-o.lts,elapse:h-s.startTime,APAddr:o.APAddr,workerManagerList:o.workerManagerList,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:jo.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{eventType:Qa.REQUEST_PROXY_WORKER_MANAGER,lts:h,eventElapse:h-o.lts,elapse:h-s.startTime,workerManagerAddr:o.workerManagerAddr,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:jo.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(n){this.proxyServer=n,Q.debug(n?"reportProxyServerurl: ".concat(n):"disable reportProxyServerurl: ".concat(n)),wt("debug",this,"setProxyServer",n)}peerPublishStatus(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr({},c),{},{subscribeElapse:o.subscribeElapse,peer:o.peer,peerPublishDuration:Math.max(o.audioPublishDuration,o.videoPublishDuration),audiotag:o.audioPublishDuration>0?1:-1,videotag:o.videoPublishDuration>0?1:-1,lts:h,elapse:h-s.startTime,joinChannelSuccessElapse:h-(s.lastJoinSuccessTime||h)});this.send({type:jo.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now();(function(g,f,A){const v=g[f];if(!v||"string"!=typeof v)return[g];g[f]="";const E=qD(JSON.stringify(g));let S=0;const w=[];let R=0;for(let x=0;x<v.length;x++)R+=v.charCodeAt(x)<=127?1:3,R<=1300-E||(w[w.length]=_1(_1({},g),{},{[f]:v.substring(S,x)}),S=x,R=v.charCodeAt(x)<=127?1:3);return S!==v.length-1&&(w[w.length]=_1(_1({},g),{},{[f]:v.substring(S)})),w})(Jr(Jr(Jr({},c),o),{},{elapse:h-s.startTime,lts:h,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:jo.WORKER_EVENT,data:g},!0))}apworkerEvent(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr(Jr({},c),o),{},{elapse:h-s.startTime,lts:h});this.send({type:jo.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr(Jr({},c),o),{},{elapse:h-s.startTime,lts:h,extend:o.extend||void 0});this.send({type:jo.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=Jr(Jr(Jr({},c),o),{},{elapse:h-s.startTime,lts:h});this.send({type:jo.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(n,o){var s=this;return V(function*(){if(s.customReportCount+=o.length,s.customReportCount>mt("CUSTOM_REPORT_LIMIT"))throw new F(P.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);s.customReportCounterTimer||(s.customReportCounterTimer=window.setInterval(()=>{s.customReportCount=0},5e3));const c=o.map(h=>({type:jo.USER_ANALYTICS,data:Jr({sid:n},h)}));try{mt("NEW_REPORT_SERVER")?yield s.postDataToStatsCollector2(c):yield s.postDataToStatsCollector(c)}catch(h){throw Q.error("send custom report message failed",h.toString()),new F(P.CUSTOM_REPORT_SEND_FAILED,h.message)}})()}autoplayFailed(n,o,s,c){if(!n)return;const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=Jr(Jr({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:f,elapse:f-h.startTime,cbRegistered:Cd.onAutoplayFailed||Cd.onAudioAutoplayFailed?1:-1,errorMsg:s,mediaType:o,trackId:c,extend:void 0});this.send({type:jo.AUTOPLAY_FAILED,data:A},!0)}sendApiInvoke(n){const o=mt("NOT_REPORT_EVENT");if(n.tag&&o.includes&&o.includes(n.tag))return!1;if(null===n.sid)return this.apiInvokeUploadPendingItems.push(n),!1;const s=this.baseInfoMap.get(n.sid);if(!s)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:c,uid:h,cid:g}=s.info;let f;if(n.lts=n.lts||Date.now(),n.error)if(n.error instanceof F){const{code:v,message:E}=n.error;f=v||E||n.error.toString()}else f=n.error.toString();const A={invokeId:n.invokeId,sid:n.sid,cname:c,cid:g,uid:h,lts:n.lts,success:n.success,elapse:n.lts-s.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?f:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:jo.API_INVOKE,data:A},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const o=this.apiInvokeUploadPendingItems.length;for(let s=0;s<o;s++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=n._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(n,o){if(o)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>mt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,o){const s=[],c=[];for(;n.length;){const g=n.shift();s.length<20?s.push(g):c.push(g)}n.push(...c);for(const g of[...s]){var h;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),FF(h=this.ltsList).call(h,(f,A)=>f-A))}return o||(this.lastSendNormalEventTime=Date.now()),s.length&&(mt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(s):this.postDataToStatsCollector(s)).catch((g=>f=>{mt("EVENT_REPORT_RETRY")&&(o?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>mt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-mt("NORMAL_EVENT_QUEUE_CAPACITY")),Q.warning("report: drop normal events"))))})(s)),n}postDataToStatsCollector2(n){var o=this;return V(function*(){da.networkState===dl.OFFLINE&&(yield jt.race([da.onlineWaiter,Nc(2*Z.maxRetryTimeout)]));const s=g=>{let f=new Uint8Array;return g.forEach(A=>{const v=U3(JSON.stringify(A.data)),E=new ArrayBuffer(5),S=(R=>{let x=0;return Object.entries(jo).forEach(W=>{let[K,ne]=W;ne===R.type&&(x=_M[K])}),x})(A),w=new DataView(E);w.setUint16(0,v.byteLength,!0),w.setUint8(2,255&S),w.setUint8(3,S>>>8&255),w.setUint8(4,S>>>16&255),f=V3(f,new Uint8Array(E)),f=V3(f,v)}),f},c="event";let h=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(mt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(mt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(h=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(mt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(mt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield Rh(h,{timeout:1e4,data:s(n),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:o._appId,"Content-Type":"application/octet-stream"}},!0)}catch(f){if(1===g)throw f;continue}return}})()}postDataToStatsCollector(n){var o=arguments,s=this;return V(function*(){let c=o.length>1&&void 0!==o[1]&&o[1];const h={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(A=>JSON.stringify(A)),vid:(A=>{const v=A&&A.data.sid&&s.baseInfoMap.get(A.data.sid);return v&&v.info.vid&&+v.info.vid||0})(n[0])};da.networkState===dl.OFFLINE&&(yield jt.race([da.onlineWaiter,Nc(2*Z.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let f=s.url||(s.proxyServer?"https://".concat(s.proxyServer,"/rs/?h=").concat(mt("EVENT_REPORT_DOMAIN"),"&p=").concat(mt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(mt("EVENT_REPORT_DOMAIN"),":").concat(mt("STATS_COLLECTOR_PORT")).concat(g));for(let A=0;A<2;A+=1){1===A&&(f=s.backupUrl||(s.proxyServer?"https://".concat(s.proxyServer,"/rs/?h=").concat(mt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(mt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(mt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(mt("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield YK(f,{timeout:1e4,data:h}):yield Rh(f,{timeout:1e4,data:h})}catch(v){if(1===A)throw v;continue}return}})()}createBaseInfo(n,o){const s=Object.assign({},x4);return s.sid=n,this.baseInfoMap.set(n,{info:s,startTime:o}),s}reportResourceTiming(n,o){const s=performance.getEntriesByName(n),c=s[s.length-1];c&&this.reportApiInvoke(o,{name:"Client.resourceTiming",options:c,tag:or.TRACER}).onSuccess()}})||rQ);B.on("REPORT_LOG_UPLOAD",n=>{n.networkState=da.networkState,Xt.reportApiInvoke(null,{name:"logUploadError",options:n,tag:or.TRACER})});class oQ extends D{constructor(o,s){super(),X(this,"trackMediaType",void 0),X(this,"_ID",void 0),X(this,"_hints",[]),X(this,"_isClosed",!1),X(this,"_originMediaStreamTrack",void 0),X(this,"_mediaStreamTrack",void 0),X(this,"_external",{}),this._ID=s||_s(8,"track-"),this._originMediaStreamTrack=o,this._mediaStreamTrack=o,ul.includes(this)||ul.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(o){if(!o){Xt.reportApiInvoke(null,{name:ur.GET_MEDIA_STREAM_TRACK,options:[],tag:or.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(o){const s=ul.indexOf(o);-1!==s&&ul.splice(s,1)}(this),this.emit(wh.CLOSED)}}let ha,Z5,sQ,JK=1;class Nu{constructor(o){X(this,"lockingPromise",jt.resolve()),X(this,"locks",0),X(this,"name",""),X(this,"lockId",void 0),this.lockId=JK++,o&&(this.name=o),Q.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(o){let s;this.locks+=1,Q.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:""));const c=new jt(g=>{s=()=>{this.locks-=1,Q.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:"")),g()}}),h=this.lockingPromise.then(()=>s);return this.lockingPromise=this.lockingPromise.then(()=>c),h}}function Cy(n,o){return function(s,c,h){const g=s[c];if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return h.value=V(function*(){const f=this[o];if(!f)throw new Error("mutex property key ".concat(o," doesn't exist on ").concat(n));const A=yield f.lock("From ".concat(n,".").concat(c));try{for(var v=arguments.length,E=new Array(v),S=0;S<v;S++)E[S]=arguments[S];return yield g.apply(this,E)}finally{A()}}),h}}class j3 extends oQ{get muted(){return this._muted}get enabled(){return this._enabled}constructor(o,s){super(o,s),X(this,"_enabled",!0),X(this,"_muted",!1),X(this,"_isClosed",!1),X(this,"_trackProcessors",[]),X(this,"_enabledMutex",void 0),X(this,"processor",void 0),X(this,"processorContext",void 0),X(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Nu("".concat(s)),o.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(o=>o.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Q.debug("[".concat(this.getTrackId(),"] close")),wt("debug",this,"close"),this.emit(lr.NEED_CLOSE),super.close())}_registerTrackProcessor(o){var s=this;return V(function*(){if(-1!==s._trackProcessors.indexOf(o))return;const c=s._trackProcessors[s._trackProcessors.length-1];s._trackProcessors.push(o),o.onOutputChange=V(function*(){s._mediaStreamTrack=o.output||s._originMediaStreamTrack,s._updatePlayerSource(),yield Ho(s,lr.NEED_REPLACE_TRACK,s)}),c?(c.onOutputChange=V(function*(){c.output&&(yield o.setInput(c.output))}),yield o.setInput(c.output||c.input||s._originMediaStreamTrack)):yield o.setInput(s._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const o=this._trackProcessors[this._trackProcessors.length-1];return o.output||o.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(o,s){var c=this;return V(function*(){if(o!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),s&&c._originMediaStreamTrack.stop(),o.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=o,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(o);const h=c._getOutputFromProcessors();c._mediaStreamTrack=h}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield Ho(c,lr.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Q.debug("[".concat(this.getTrackId(),"] track ended")),Yn("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(wh.TRACK_ENDED)}stateCheck(o,s){if(Q.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(o,": ").concat(s,"]")),wt("debug",this,"stateCheck",{stateName:o,state:s,muted:this._muted,enabled:this._enabled}),Uf(s,o),this._enabled&&this._muted&&"enabled"===o&&!1===s)throw new F(P.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===o&&!0===s)throw new F(P.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(n){n.IOS_15_INTERRUPTION_START="ios15-interruption-start",n.IOS_15_INTERRUPTION_END="ios15-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(ha||(ha={})),function(n){n.AUDIO_CONTEXT_CREATED="audio_context_created"}(Z5||(Z5={})),function(n){n.AIDenoiser="AIDenoiser"}(sQ||(sQ={}));const Q3={audioContextInitOptions:{}},GD=new class extends D{constructor(){super(),X(this,"registeredPlugins",[])}setOptions(n,o){Q3[n]&&(Q3[n]=o)}getOptions(n){return Q3[n]}installPlugin(n){n instanceof Object&&n.name&&this.registeredPlugins.push(n.name)}},eS=window.AudioContext||window.webkitAudioContext;let Id=null;const $r=new class extends D{constructor(){var n;super(...arguments),n=this,X(this,"prevState",void 0),X(this,"curState",void 0),X(this,"currentTime",void 0),X(this,"currentTimeStuckAt",void 0),X(this,"interruptDetectorTrack",void 0),X(this,"onLocalAudioTrackMute",()=>{Q.info("ios15-interruption-start"),Yt("info",["WebAudio"],"ios15-interruption-start"),this.emit(ha.IOS_15_INTERRUPTION_START)}),X(this,"onLocalAudioTrackUnmute",V(function*(){Q.info("ios15-interruption-end"),Yt("info",["WebAudio"],"ios15-interruption-end"),"running"!==n.curState||n.duringInterruption?Q.info("ios15-interruption-end-canceled"):(Id&&(yield Id.suspend()),n.emit(ha.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(n){Q.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),wt("debug",["WebAudio"],"bindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){Q.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),wt("debug",["WebAudio"],"unbindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function WD(){if(!Id){if(function aQ(){if(!eS)return Q.error("your browser is not support web audio"),void qe("error",["WebAudio"],"your browser is not support web audio");Q.info("create audio context"),Sa("info",["WebAudio"],"WebAudioContext");const n=GD.getOptions("audioContextInitOptions");Q.debug("audio content init option:",JSON.stringify(n)),Id=new eS(n),GD.emit(Z5.AUDIO_CONTEXT_CREATED,Id),$r.curState=Id.state,Id.onstatechange=()=>{$r.prevState=$r.curState,$r.curState=Id?Id.state:void 0,(Dc()||Ul())&&"running"===$r.prevState&&"interrupted"===$r.curState&&(Q.info("ios-interruption-start"),Yt("info",["AudioState"],"ios-interruption-start"),$r.emit(ha.IOS_INTERRUPTION_START)),(Dc()||Ul())&&"interrupted"===$r.prevState&&"running"===$r.curState&&(Q.info("ios-interruption-end"),Yt("info",["AudioState"],"ios-interruption-end"),$r.emit(ha.IOS_INTERRUPTION_END)),$r.prevState!==$r.curState&&(Q.debug("AudioContext State Change","".concat($r.prevState,"=>").concat($r.curState)),Yn("debug",["AudioContext",void 0],"statechange","".concat($r.prevState,"=>").concat($r.curState)),$r.emit(ha.STATE_CHANGE))},setInterval(()=>{var o;const s=null===(o=Id)||void 0===o?void 0:o.currentTime;$r.currentTime!==s?($r.currentTimeStuckAt&&(Q.debug("AudioContext current time resume at ".concat(s)),$r.currentTimeStuckAt=void 0),$r.currentTime=s):(s!==$r.currentTimeStuckAt&&Q.warning("AudioContext current time stuck at ".concat(s)),$r.currentTimeStuckAt=s)},5e3),function(){var o=V(function*(s){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let h,g=!1,f=!1,A=!1;function v(le){"running"===s.state?E(!1):Dc()||Ul()?"suspended"===s.state&&(E(!0),le&&s.resume().then(w,w)):"closed"!==s.state&&(E(!0),le&&s.resume().then(w,w))}function E(le){if(g!==le){g=le;for(let me=0,be=c;me<be.length;me+=1){const ke=be[me];le?window.addEventListener(ke,R,{capture:!0,passive:!0}):window.removeEventListener(ke,R,{capture:!0,passive:!0})}}}function w(){v(!1)}function R(){v(!0)}function x(le){if(!A)if(h.paused)if(le){let me;W(!1),A=!0;try{me=h.play(),me?me.then(K,K):(h.addEventListener("playing",K),h.addEventListener("abort",K),h.addEventListener("error",K))}catch{K()}}else W(!0);else W(!1)}function W(le){if(f!==le){f=le;for(let me=0,be=c;me<be.length;me++){const ke=be[me];le?window.addEventListener(ke,ne,{capture:!0,passive:!0}):window.removeEventListener(ke,ne,{capture:!0,passive:!0})}}}function K(){h.removeEventListener("playing",K),h.removeEventListener("abort",K),h.removeEventListener("error",K),A=!1,x(!1)}function ne(){x(!0)}if(Dc()){const le=s.createMediaStreamDestination(),me=document.createElement("div");me.innerHTML="<audio x-webkit-airplay='deny'></audio>",h=me.children.item(0),h.controls=!1,h.disableRemotePlayback=!0,h.preload="auto",h.srcObject=le.stream,x(!0)}$r.on(ha.STATE_CHANGE,function S(){v(!0)}),v(!1)});return function(s){return o.apply(this,arguments)}}()(Id)}(),!Id)throw new F(P.NOT_SUPPORTED,"can not create audio context");return Id}return Id}function KD(n){if(function(){if(null!==zD)return zD;const c=WD(),h=c.createBufferSource(),g=c.createGain(),f=c.createGain();h.connect(g),h.connect(f),h.disconnect(g);let A=!1;try{h.disconnect(g)}catch{A=!0}return h.disconnect(),zD=A,A}())return;wt("debug",["WebAudio"],"polyfillAudioNode");const o=n.connect,s=n.disconnect;n.connect=(c,h,g)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(c)||(c instanceof AudioNode?(n._inputNodes.push(c),o.call(n,c,h,g)):o.call(n,c,h)),n),n.disconnect=(c,h,g)=>{s.call(n),c?tU(n._inputNodes,c):n._inputNodes=[];for(const f of n._inputNodes)o.call(n,f)}}let zD=null;function ej(n,o){const s=1/o,c=WD();let h=c.createGain();h.gain.value=0,h.connect(c.destination);let g=!1;const f=()=>{if(g)return void(h=null);const A=c.createOscillator();A.onended=f,A.connect(h),A.start(0),A.stop(c.currentTime+s),n(c.currentTime)};return f(),()=>{g=!0}}const Iy=Q.prefix("[inject-node]");class tx{constructor(){X(this,"nodeLists",[]),X(this,"prevNode",void 0),X(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(o,s){Iy.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),o.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(s),this.nodeLists.forEach((c,h)=>{const g=this.nodeLists[h+1];g&&c.connect(g)})):o.connect(s),this.nextNode=s,this.prevNode=o}disconnect(){var o;Iy.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(s=>{s.disconnect()}),null===(o=this.prevNode)||void 0===o||o.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(o){Iy.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(Iy.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(o),o.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(o),o.connect(this.nextNode)),this.nodeLists.push(o)):Iy.debug("add node is called before inject node connected")}removeNode(o){Iy.debug("remove node in inject node, current list:",this.nodeLists.length);const s=this.nodeLists.indexOf(o);if(-1===s)return void Iy.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[s+1],h=this.nodeLists[s-1];0===s&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(o),this.prevNode.connect(c||this.nextNode)),s===this.nodeLists.length-1&&this.nextNode&&h&&(h.disconnect(o),h.connect(this.nextNode)),0!==s&&s!==this.nodeLists.length-1&&(h.disconnect(o),h.connect(c)),Iy.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class nx extends D{get processSourceNode(){return this.sourceNode}set processedNode(o){var s;if(!this.isDestroyed&&this._processedNode!==o){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(s=this._processedNode)||void 0===s||s.disconnect(),this._processedNode=o,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),X(this,"outputNode",void 0),X(this,"outputTrack",void 0),X(this,"isPlayed",!1),X(this,"sourceNode",void 0),X(this,"analyserNode",void 0),X(this,"context",void 0),X(this,"audioBufferNode",void 0),X(this,"destNode",void 0),X(this,"injectNode",void 0),X(this,"audioOutputLevel",0),X(this,"_processedNode",void 0),X(this,"playNode",void 0),X(this,"isDestroyed",!1),X(this,"onNoAudioInput",void 0),X(this,"isNoAudioInput",!1),X(this,"_noAudioInputCount",0),this.context=WD(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),KD(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new tx}startGetAudioBuffer(o){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(o),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=s=>{this.emit($c.ON_AUDIO_BUFFER,function(c){for(let h=0;h<c.outputBuffer.numberOfChannels;h+=1){const g=c.outputBuffer.getChannelData(h);for(let f=0;f<g.length;f+=1)g[f]=0}return c.inputBuffer}(s))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Zc().webAudioMediaStreamDest)throw new F(P.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(o){"running"!==this.context.state&&Tp(()=>{$r.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=o||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||Dc()||Ul()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const o=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(o);let s=0;for(let c=0;c<o.length;c++)s+=c<64?Math.abs(10*o[c]):Math.abs(6*o[c]/15);return s/o.length/255}checkHasAudioInput(){var o=arguments,s=this;return V(function*(){let c=o.length>0&&void 0!==o[0]?o[0]:0;if(c>5)return s.isNoAudioInput=!0,s.onNoAudioInput&&s.onNoAudioInput(),!1;if(Dc()||Ul()?"suspended"===s.context.state&&s.context.resume():"running"!==s.context.state&&s.context.resume(),!s.analyserNode)return!1;const h=new Uint8Array(s.analyserNode.frequencyBinCount);s.analyserNode.getByteFrequencyData(h);let g=!1;for(let f=0;f<h.length;f++)0!==h[f]&&(g=!0);return g?(s.isNoAudioInput=!1,!0):(yield Nc(200),(yield s.checkHasAudioInput(c?c+1:1))&&g)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(o){this.outputNode.gain.setValueAtTime(o,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(o){this.injectNode.addNode(o)}removeAudioNode(o){this.injectNode.removeNode(o)}disconnect(){var o,s;null===(o=this.processedNode)||void 0===o||o.disconnect(),null===(s=this.sourceNode)||void 0===s||s.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var o;this.processedNode?null===(o=this.processedNode)||void 0===o||o.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class cQ extends nx{get isFreeze(){return!1}constructor(o,s){var c,h;if(super(),c=this,X(this,"sourceNode",void 0),X(this,"track",void 0),X(this,"audioElement",void 0),X(this,"isCurrentTrackCloned",!1),X(this,"isRemoteTrack",!1),X(this,"rebuildWebAudio",V(function*(){if(Q.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void Q.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>Q.info("resume success")),Q.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const A=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?A.stop():c.isCurrentTrackCloned=!0;const v=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(v),KD(c.sourceNode),c.analyserNode=c.context.createAnalyser();const E=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(E,c.context.currentTime),KD(c.outputNode),c.emit($c.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=v,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==o.kind)throw new F(P.UNEXPECTED_ERROR);this.track=o;const g=new MediaStream([this.track]);this.isRemoteTrack=!!s,this.sourceNode=this.context.createMediaStreamSource(g),KD(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=g;const f=Ri();s&&f.os===zs.IOS&&Number(null===(h=f.osVersion)||void 0===h?void 0:h.split(".")[0])<15&&($r.on(ha.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(A=>{A||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(o){this.sourceNode.disconnect(),this.track=o,this.isCurrentTrackCloned=!1;const s=new MediaStream([o]);this.sourceNode=this.context.createMediaStreamSource(s),KD(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit($c.UPDATE_SOURCE),this.audioElement.srcObject=s}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),$r.off("state-change",this.rebuildWebAudio),super.destroy()}}function H3(n,o){return rx.apply(this,arguments)}function rx(){return rx=V(function*(n,o){const s=(h,g)=>h?"number"!=typeof h?h.max||h.exact||h.ideal||h.min||g:h:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:s(o.height,1080),maxWidth:s(o.width,1920)}}};return o.frameRate&&"number"!=typeof o.frameRate?(c.video.mandatory.maxFrameRate=o.frameRate.max,c.video.mandatory.minFrameRate=o.frameRate.min):"number"==typeof o.frameRate&&(c.video.mandatory.maxFrameRate=o.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),rx.apply(this,arguments)}function G3(n){return ix.apply(this,arguments)}function ix(){return ix=V(function*(n){const o=yield tj(n.mediaSource),s=yield(c=o,new jt((h,g)=>{const f=document.createElement("div");f.innerText="share screen",f.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const v=document.createElement("div");v.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",v.setAttribute("style","height: 12%;");const E=document.createElement("div");E.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const S=document.createElement("div");S.setAttribute("style","text-align: right; padding: 16px 0;");const w=document.createElement("button");w.innerHTML="cancel",w.setAttribute("style","width: 85px;"),w.onclick=()=>{document.body.removeChild(R);const x=new Error("NotAllowedError");x.name="NotAllowedError",g(x)},S.appendChild(w),A.appendChild(v),A.appendChild(E),A.appendChild(S);const R=document.createElement("div");R.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),R.appendChild(f),R.appendChild(A),document.body.appendChild(R),c.map(x=>{if(x.id){const W=document.createElement("div");W.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let K=x.thumbnail;const{width:ne}=K.getSize();ne>1920&&(K=K.resize({width:1920})),W.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+K.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+x.name.replace(/[\u00A0-\u9999<>\&]/g,function(le){return"&#"+le.charCodeAt(0)+";"})+"</span>",W.onclick=()=>{document.body.removeChild(R),h(x.id)},E.appendChild(W)}})}));var c;return yield H3(s,n)}),ix.apply(this,arguments)}function tj(n){return W3.apply(this,arguments)}function W3(){return W3=V(function*(n){let o=["window","screen"];"application"!==n&&"window"!==n||(o=["window"]),"screen"===n&&(o=["screen"]);const s=nj();if(!s)throw new F(P.ELECTRON_IS_NULL);let c=null;try{c=s.desktopCapturer.getSources({types:o})}catch{c=null}c&&c.then||(c=new jt((h,g)=>{s.desktopCapturer.getSources({types:o},(f,A)=>{f?g(f):h(A)})}));try{return yield c}catch(h){throw new F(P.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}),W3.apply(this,arguments)}let ox=null;function nj(){if(ox)return ox;try{return ox=window.require("electron"),ox}catch{return null}}const K3=new Nu("safari");let tS=!1,uQ=!1;function pl(n,o){return sx.apply(this,arguments)}function sx(){return sx=V(function*(n,o){let s=0,c=null;for(;s<2;)try{c=yield $K(n,o,s>0);break}catch(h){if(h instanceof F)throw Q.error("[".concat(o,"] ").concat(h.toString())),wt("error",[],"getLocalStream",{config:n,id:o},h.toString()),h;const g=ax(h.name||h.code||h,h.message);if(g.code===P.MEDIA_OPTION_INVALID){Q.debug("[".concat(o,"] detect media option invalid, retry")),qe("debug",[],"[".concat(o,"] detect media option invalid, retry")),s+=1,yield Nc(500);continue}throw Q.error("[".concat(o,"] ").concat(g.toString())),wt("error",[],"getLocalStream",{config:n,id:o},g.toString()),g}if(!c)throw new F(P.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),sx.apply(this,arguments)}function $K(n,o,s){return rj.apply(this,arguments)}function rj(){return rj=V(function*(n,o,s){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new F(P.NOT_SUPPORTED,"can not find getUserMedia");s&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const c=Zc(),h=new MediaStream;if(n.audioSource&&h.addTrack(n.audioSource),n.videoSource&&h.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return Q.debug("Using Video Source/ Audio Source"),qe("debug",[],"Using Video Source/ Audio Source"),h;if(n.screen)if(nj())f1(h,n.screen.sourceId?yield H3(n.screen.sourceId,n.screen):yield G3(n.screen));else if(_D()&&n.screen.extensionId&&n.screen.mandatory){if(!c.getStreamFromExtension)throw new F(P.NOT_SUPPORTED,"This browser does not support screen sharing");Q.debug("[".concat(o,'] Screen access on chrome stable, looking for extension"')),qe("debug",[],"[".concat(o,'] Screen access on chrome stable, looking for extension"'));const w=yield(g=n.screen.extensionId,f=o,new jt((R,x)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},W=>{if(!W||!W.streamId)return Q.error("[".concat(f,"] No response from Chrome Plugin. Plugin not installed properly"),W),wt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:f},"No response from Chrome Plugin. Plugin not installed properly, ".concat(W)),void x(new F(P.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));R(W.streamId)})}catch(W){Q.error("[".concat(f,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),W.toString()),wt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:f},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(W.toString())),x(new F(P.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=w,f1(h,yield navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(c.getDisplayMedia){n.screen.mediaSource&&TD(n.screen.mediaSource);const w={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:"screen"===n.screen.mediaSource?"monitor":n.screen.mediaSource};Q.debug("[".concat(o,"] getDisplayMedia:"),JSON.stringify({video:w,audio:!!n.screenAudio})),Sa("debug",["mediaDevices",o],"getDisplayMedia",{video:w,audio:!!n.screenAudio,trackId:o}),f1(h,yield navigator.mediaDevices.getDisplayMedia({video:w,audio:!!n.screenAudio}))}else{if(!ps())throw Q.error("[".concat(o,"] This browser does not support screenSharing")),new F(P.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&TD(n.screen.mediaSource);const w={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};Q.debug("[".concat(o,"] getUserMedia: ").concat(JSON.stringify(w))),Sa("debug",["mediaDevices",o],"getUserMedia",w),f1(h,yield navigator.mediaDevices.getUserMedia(w))}}var g,f;if(!n.video&&!n.audio)return h;let A={video:n.video,audio:n.audio},v=mt("MEDIA_DEVICE_CONSTRAINTS");if(v)try{"string"==typeof v&&(v=JSON.parse(v)),A=function w(R,x){if(!BQ(R)||!BQ(x)||Array.isArray(R)&&!Array.isArray(x)||!Array.isArray(R)&&Array.isArray(x))return x;if(Array.isArray(x)&&Array.isArray(R)){const W=[...R];for(let K=0;K<x.length;K++)W[K]=w(R[K],x[K]);return W}{const W=_1({},R);for(const K in x)Object.prototype.hasOwnProperty.call(x,K)&&(W[K]=Object.prototype.hasOwnProperty.call(R,K)?w(R[K],x[K]):x[K]);return W}}(A,v),qe("debug",["mediaDevices",o],"merge configConstraints ".concat(JSON.stringify(v)))}catch{}Q.debug("[".concat(o,"] GetUserMedia"),JSON.stringify(A)),Sa("debug",["mediaDevices",o],"getUserMedia",A),Ri();let E,S=null;(Bl()||Dc()||k0())&&(S=yield K3.lock());try{E=yield navigator.mediaDevices.getUserMedia(A)}catch(w){throw S&&S(),w}return A.audio&&(tS=!0),A.video&&(uQ=!0),f1(h,E),S&&S(),h}),rj.apply(this,arguments)}function ax(n,o){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new F(P.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(o));case"NotFoundError":case"DevicesNotFoundError":return new F(P.DEVICE_NOT_FOUND,"".concat(n,": ").concat(o));case"NotSupportedError":return new F(P.NOT_SUPPORTED,"".concat(n,": ").concat(o));case"NotReadableError":return new F(P.NOT_READABLE,"".concat(n,": ").concat(o));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new F(P.PERMISSION_DENIED,"".concat(n,": ").concat(o));case"ConstraintNotSatisfiedError":return new F(P.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(o));default:return Q.error("getUserMedia unexpected error",n),wt("error",[],"handleGetUserMediaError",void 0,n),new F(P.UNEXPECTED_ERROR,"".concat(n,": ").concat(o))}}function f1(n,o){const s=n.getVideoTracks()[0],c=n.getAudioTracks()[0],h=o.getVideoTracks()[0],g=o.getAudioTracks()[0];g&&(c&&n.removeTrack(c),n.addTrack(g)),h&&(s&&n.removeTrack(s),n.addTrack(h))}const Kl=new class extends D{get state(){return this._state}set state(n){n!==this._state&&(this.emit(tg.STATE_CHANGE,n),this._state=n)}constructor(){super(),X(this,"_state",U_.IDLE),X(this,"isAccessMicrophonePermission",!1),X(this,"isAccessCameraPermission",!1),X(this,"lastAccessMicrophonePermission",!1),X(this,"lastAccessCameraPermission",!1),X(this,"checkdeviceMatched",!1),X(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(mt("ENUMERATE_DEVICES_INTERVAL")||P0()&&Xm())&&this.updateDevicesInfo()},mt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>Q.error(n.toString()))}enumerateDevices(n,o){var s=arguments,c=this;return V(function*(){let h=s.length>2&&void 0!==s[2]&&s[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new F(P.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),f=c.checkMediaDeviceInfoIsOk(g);let A=!c.isAccessMicrophonePermission&&n,v=!c.isAccessCameraPermission&&o;f.audio&&(A=!1),f.video&&(v=!1);let E=null,S=null,w=null;if(!h&&(A||v)){if(K3.isLocked&&(Q.debug("[device manager] wait GUM lock"),(yield K3.lock())(),Q.debug("[device manager] GUM unlock")),tS&&(A=!1,c.isAccessMicrophonePermission=!0),uQ&&(v=!1,c.isAccessCameraPermission=!0),Q.debug("[device manager] check media device permissions",n,o,A,v),A&&v){try{w=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(R){const x=ax(R.name||R.code||R,R.message);if(x.code===P.PERMISSION_DENIED)throw x;Q.warning("getUserMedia failed in getDevices",x)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(A){try{E=yield navigator.mediaDevices.getUserMedia({audio:n})}catch(R){const x=ax(R.name||R.code||R,R.message);if(x.code===P.PERMISSION_DENIED)throw x;Q.warning("getUserMedia failed in getDevices",x)}c.isAccessMicrophonePermission=!0}else if(v){try{S=yield navigator.mediaDevices.getUserMedia({video:o})}catch(R){const x=ax(R.name||R.code||R,R.message);if(x.code===P.PERMISSION_DENIED)throw x;Q.warning("getUserMedia failed in getDevices",x)}c.isAccessCameraPermission=!0}Q.debug("[device manager] mic permission",n,"cam permission",o)}try{const R=yield navigator.mediaDevices.enumerateDevices();return E&&E.getTracks().forEach(x=>x.stop()),S&&S.getTracks().forEach(x=>x.stop()),w&&w.getTracks().forEach(x=>x.stop()),E=null,S=null,w=null,R}catch(R){return E&&E.getTracks().forEach(x=>x.stop()),S&&S.getTracks().forEach(x=>x.stop()),w&&w.getTracks().forEach(x=>x.stop()),E=null,S=null,w=null,new F(P.ENUMERATE_DEVICES_FAILED,R.toString()).throw()}})()}getRecordingDevices(){var n=arguments,o=this;return V(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!0,!1,s)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var n=arguments,o=this;return V(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!1,!0,s)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var n=arguments,o=this;return V(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!0,!1,s)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(n){let o=null;return this.deviceInfoMap.forEach(s=>{s.device.label===n&&(o=s.device.deviceId)}),o}getDeviceById(n){var o=this;return V(function*(){const s=(yield o.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===n);if(!s)throw new F(P.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return s})()}init(){var n=this;return V(function*(){n.state=U_.INITING;try{yield n.updateDevicesInfo(),n.state=U_.INITEND}catch(o){throw Q.warning("Device Detection functionality cannot start properly.",o.toString()),n.state=U_.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new F(P.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),o}})()}updateDevicesInfo(){var n=this;return V(function*(){const o=yield n.enumerateDevices(!0,!0,!0),s=Date.now(),c=[];if(o[0]&&o[0].label&&!1===n.checkdeviceMatched){n.checkdeviceMatched=!0;const g=o.find(A=>"audioinput"===A.kind&&"default"===A.deviceId),f=o.find(A=>"audiooutput"===A.kind&&"default"===A.deviceId);g&&f?f.groupId===g.groupId?Q.debug("[device-check] default input ".concat(g.label," and output ").concat(f.label," is the same group")):Q.warning("[device-check] default input ".concat(g.label," and output ").concat(f.label," is not the same group")):Q.debug("[device-check] default input or output not found")}const h=n.checkMediaDeviceInfoIsOk(o);if(o.forEach(g=>{if(!g.deviceId)return;const f=n.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(f?f.state:"INACTIVE")){const A={initAt:s,updateAt:s,device:g,state:"ACTIVE"};n.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),A),c.push(A)}f&&(f.updateAt=s)}),n.deviceInfoMap.forEach((g,f)=>{"ACTIVE"===g.state&&g.updateAt!==s&&(g.state="INACTIVE",c.push(g))}),n.state!==U_.INITEND)return h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),void(h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(tg.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":n.lastAccessCameraPermission&&n.isAccessCameraPermission&&n.emit(tg.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(tg.PLAYOUT_DEVICE_CHANGED,g)}}),h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(n){const o=n.filter(h=>"audioinput"===h.kind),s=n.filter(h=>"videoinput"===h.kind),c={audio:!1,video:!1};for(const h of o)if(h.label&&h.deviceId){c.audio=!0;break}for(const h of s)if(h.label&&h.deviceId){c.video=!0;break}return c}};var ij;let lQ=no("AudioElementPlayCenter")(ij=class{constructor(){X(this,"onAutoplayFailed",void 0),X(this,"elementMap",new Map),X(this,"elementStateMap",new Map),X(this,"elementsNeedToResume",[]),X(this,"sinkIdMap",new Map),X(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[o,s]=n;const c=this.elementStateMap.get(o),h=s.srcObject.getAudioTracks()[0];Ti()?h&&"live"===h.readyState&&"running"===$r.curState&&(Q.debug("auto resume after interruption for iOS 15"),qe("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS15"),s.pause(),s.play()):c&&"paused"===c&&h&&"live"===h.readyState&&"running"===$r.curState&&(Q.debug("auto resume after interruption for iOS"),qe("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS"),s.play())})}),X(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[o,s]=n;const c=s.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(Q.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),wt("debug",["AudioElementPlayCenter",o],"autoResumeAfterInterruptionOnIOS15"),s.pause(),s.play())})}),this.autoResumeAudioElement(),$r.on(ha.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),$r.on(ha.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),$r.on(ha.STATE_CHANGE,()=>{Dc()&&"suspended"===$r.prevState&&"running"===$r.curState&&this.autoResumeAfterInterruption()})}setSinkID(n,o){var s=this;return V(function*(){const c=s.elementMap.get(n);if(s.sinkIdMap.set(n,o),c)try{yield c.setSinkId(o)}catch(h){throw new F(P.PERMISSION_DENIED,"can not set sink id: "+h.toString())}})()}play(n,o,s,c){if(this.elementMap.has(o))return;const h=document.createElement("audio");h.autoplay=!0,h.srcObject=new MediaStream([n]),this.bindAudioElementEvents(o,h),this.elementMap.set(o,h),this.elementStateMap.set(o,Ca.INIT),this.setVolume(o,s);const g=this.sinkIdMap.get(o);if(g)try{h.setSinkId(g).catch(A=>{Q.warning("[".concat(o,"] set sink id failed"),A.toString()),Sa("warning",["HTMLAudioElement",o],"setSinkId",A.toString())})}catch(A){Q.warning("[".concat(o,"] set sink id failed"),A.toString())}const f=h.play();f&&f.then&&f.catch(A=>{c&&Xt.autoplayFailed(c,"audio",A.message,o),Q.warning("audio element play warning",A.toString()),Sa("warning",["HTMLAudioElement",o],"play",A.toString()),this.elementMap.has(o)&&"NotAllowedError"===A.name&&(Q.warning("detected audio element autoplay failed"),wt("warning",["AudioElementPlayCenter",o],"play",A.toString()),this.elementsNeedToResume.push(h),Tp(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),X5()}))})}updateTrack(n,o){const s=this.elementMap.get(n);s&&(s.srcObject=new MediaStream([o]))}isPlaying(n){return this.elementMap.has(n)}setVolume(n,o){const s=this.elementMap.get(n);s&&(o=Math.max(0,Math.min(100,o)),s.volume=o/100)}stop(n){const o=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!o)return;const s=this.elementsNeedToResume.indexOf(o);this.elementsNeedToResume.splice(s,1),o.srcObject=null,o.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,o){oj.forEach(s=>{o.addEventListener(s,c=>{const h=this.elementStateMap.get(n),g="pause"===c.type?"paused":c.type;Q.debug("[".concat(n,"] audio-element-status change ").concat(h," => ").concat(g)),Yn("debug",["HTMLAudioElement",n],"statusChange","".concat(h," => ").concat(g)),this.elementStateMap.set(n,g)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(o=>{o.play().then(s=>{Q.debug("Auto resume audio element success"),wt("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(s=>{Q.warning("Auto resume audio element failed!",s),wt("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",s.toString())})}),this.elementsNeedToResume=[]};new jt(o=>{document.body?o():window.addEventListener("load",()=>o())}).then(()=>{const o=Ri();"Android"!==o.os||"Chrome"!==o.name&&o.name!==Ai.WECHAT?(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)):document.body.addEventListener("click",n,!0)})}})||ij;const oj=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],wd=new lQ;function gs(){return function(n,o,s){const c=n[o];"function"==typeof c&&(s.value=function(){this._isClosed&&new F(P.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var h=arguments.length,g=new Array(h),f=0;f<h;f++)g[f]=arguments[f];const A=c.apply(this,g);return A instanceof jt?new jt((v,E)=>{A.then(v).catch(E)}):A})}}var sj,aj,Ms,dQ,hQ,pQ,YD,cx,ux,cj,z3,fQ,Ga,uj,mQ,gQ,_Q,vQ,m1,AQ,yQ,EQ,bQ,Y3,SQ,CQ,hc,q3;function lj(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function lx(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?lj(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):lj(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let pc=(sj=no("LocalAudioTrack","getTrackId"),aj=gs(),Ms=Cy("LocalAudioTrack","_enabledMutex"),dQ=gs(),hQ=Cy("LocalAudioTrack","_enabledMutex"),pQ=gs(),YD=HD({report:Xt}),cx=gs(),ux=gs(),cj=gs(),z3=gs(),sj((tr((Ga=class extends j3{get isPlaying(){return this._useAudioElement?wd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,o,s){super(n,s),X(this,"trackMediaType","audio"),X(this,"_encoderConfig",void 0),X(this,"_source",void 0),X(this,"_enabled",!0),X(this,"_volume",100),X(this,"_useAudioElement",!1),X(this,"_bypassWebAudio",!1),X(this,"processor",void 0),X(this,"processorContext",void 0),X(this,"processorDestination",void 0),this._encoderConfig=o,this._source=new cQ(n),mt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new wQ(this._source.context,this.getTrackId()),this.processorDestination=new IQ(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on($c.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(n){qr(n,"volume",0,1e3);const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&wd.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return Q.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void o.onSuccess();const s=this._source.createOutputTrack();this._mediaStreamTrack!==s&&(this._mediaStreamTrack=s,Ho(this,lr.NEED_REPLACE_TRACK,this).then(()=>{Q.debug("[".concat(this.getTrackId(),"] replace web audio track success")),qe("debug",this,"replace web audio track success")}).catch(c=>{Q.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),qe("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}o.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),n]});if(!o._useAudioElement)throw new F(P.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wd.setSinkID(o.getTrackId(),n)}catch(c){throw s.onError(c),c}s.onSuccess()})()}setEnabled(n,o,s){var c=this;return V(function*(){if(!s){if(n===c._enabled)return;c.stateCheck("enabled",n)}if(Q.info("[".concat(c.getTrackId(),"] start setEnabled"),n),wt("info",c,"setEnabled",n),n){c._originMediaStreamTrack.enabled=!0;try{s||(c._enabled=!0),yield Ho(c,lr.NEED_ENABLE_TRACK,c),Q.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(n," success")),wt("info",c,"setEnabled",n,"success")}catch(h){throw s||(c._enabled=!1),Q.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),wt("error",c,"setEnabled",n,h.toString()),h}}else{c._originMediaStreamTrack.enabled=!1,s||(c._enabled=!1);try{yield Ho(c,lr.NEED_DISABLE_TRACK,c)}catch(h){throw s||(c._enabled=!0),Q.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),wt("info",c,"setEnabled",n,h.toString()),h}}})()}setMuted(n){var o=this;return V(function*(){n!==o._muted&&(o.stateCheck("muted",n),o._muted=n,o._originMediaStreamTrack.enabled=!n,Q.debug("[".concat(o.getTrackId(),"] start set muted: ").concat(n)),wt("debug",o,"setMuted",n),n?yield Ho(o,lr.NEED_MUTE_TRACK,o):yield Ho(o,lr.NEED_UNMUTE_TRACK,o))})()}getStats(){return JD(()=>{Q.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),qe("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ty(this,lr.GET_STATS)||lx({},B4)}setAudioFrameCallback(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners($c.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners($c.ON_AUDIO_BUFFER),this._source.on($c.ON_AUDIO_BUFFER,s=>n(s))}play(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Q.debug("[".concat(this.getTrackId(),"] start audio playback")),wt("debug",this,"play"),this._useAudioElement?(Q.debug("[".concat(this.getTrackId(),"] start audio playback in element")),qe("debug",this,"start audio playback in element"),wd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),n.onSuccess()}stop(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Q.debug("[".concat(this.getTrackId(),"] stop audio playback")),wt("debug",this,"stop"),this._useAudioElement?wd.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){Q.debug("[".concat(this.getTrackId(),"] update player source track")),wt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(n,o){var s=this;return V(function*(){s._originMediaStreamTrack!==n&&(s._originMediaStreamTrack.removeEventListener("ended",s._handleTrackEnded),n.addEventListener("ended",s._handleTrackEnded),o&&s._originMediaStreamTrack.stop(),s._originMediaStreamTrack=n,s.processor&&s.processor.updateInput({track:n,context:s.processorContext}),s._mediaStreamTrack!==s._source.outputTrack?(s._mediaStreamTrack=s._originMediaStreamTrack,s._updatePlayerSource(),yield Ho(s,lr.NEED_REPLACE_TRACK,s)):s._source.updateTrack(s._originMediaStreamTrack))})()}renewMediaStreamTrack(n){return jt.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new F(P.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new F(P.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const o=this.processor;null===(n=this._source.processSourceNode)||void 0===n||n.disconnect(),this.processor._source=!1,this.processor=void 0,o.reset()}bindProcessorDestinationEvents(){var n=this;this.processorDestination.on(Th.ON_TRACK,function(){var o=V(function*(s){s?s!==n._mediaStreamTrack&&(n._mediaStreamTrack=s,n._updatePlayerSource(),yield Ho(n,lr.NEED_REPLACE_TRACK,n)):n._mediaStreamTrack!==n._originMediaStreamTrack&&(n._mediaStreamTrack=n._originMediaStreamTrack,n._updatePlayerSource(),yield Ho(n,lr.NEED_REPLACE_TRACK,n))});return function(s){return o.apply(this,arguments)}}()),this.processorDestination.on(Th.ON_NODE,o=>{this._source.processedNode=o})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Th.ON_TRACK),this.processorDestination.removeAllListeners(Th.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Ql.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Ql.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[aj],Object.getOwnPropertyDescriptor(Ga.prototype,"setPlaybackDevice"),Ga.prototype),tr(Ga.prototype,"setEnabled",[Ms,dQ],Object.getOwnPropertyDescriptor(Ga.prototype,"setEnabled"),Ga.prototype),tr(Ga.prototype,"setMuted",[hQ,pQ,YD],Object.getOwnPropertyDescriptor(Ga.prototype,"setMuted"),Ga.prototype),tr(Ga.prototype,"getStats",[cx],Object.getOwnPropertyDescriptor(Ga.prototype,"getStats"),Ga.prototype),tr(Ga.prototype,"setAudioFrameCallback",[ux],Object.getOwnPropertyDescriptor(Ga.prototype,"setAudioFrameCallback"),Ga.prototype),tr(Ga.prototype,"play",[cj],Object.getOwnPropertyDescriptor(Ga.prototype,"play"),Ga.prototype),tr(Ga.prototype,"stop",[z3],Object.getOwnPropertyDescriptor(Ga.prototype,"stop"),Ga.prototype),fQ=Ga))||fQ),nS=(uj=no("MicrophoneAudioTrack","getTrackId"),mQ=gs(),gQ=Cy("MicrophoneAudioTrack","_enabledMutex"),_Q=gs(),uj((tr((m1=class extends pc{constructor(n,o,s,c){super(n,o.encoderConfig?Yr(o.encoderConfig):{},c),X(this,"_config",void 0),X(this,"_deviceName","default"),X(this,"_constraints",void 0),X(this,"_originalConstraints",void 0),X(this,"_enabled",!0),Wn("info",this,"constructor",{trackId:c,deviceId:n.label,constraints:s}),this._config=o,this._constraints=s,this._originalConstraints=s,this._deviceName=n.label,"boolean"==typeof o.bypassWebAudio&&(this._bypassWebAudio=o.bypassWebAudio),Ti()&&$r.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.MIC_AUDIO_TRACK_SET_DEVICE,options:[o.getTrackId(),n]});if(Q.info("[".concat(o.getTrackId(),"] start set device to ").concat(n)),wt("info",o,"setDevice",n),o._enabled)try{const c=yield Kl.getDeviceById(n),h={};h.audio=lx({},o._constraints),h.audio.deviceId={exact:n},o._originMediaStreamTrack.stop();let g=null;try{g=yield pl(h,o.getTrackId())}catch(f){throw Q.error("[".concat(o.getTrackId(),"] setDevice failed"),f.toString()),wt("error",o,"setDevice",n,f.toString()),g=yield pl({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),f}yield o._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),o._deviceName=c.label,o._config.microphoneId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),Q.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),wt("error",o,"setDevice",n,c.toString()),c}else try{const c=yield Kl.getDeviceById(n);o._deviceName=c.label,o._config.microphoneId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),Q.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),wt("error",o,"setDevice",n,c.toString()),c}s.onSuccess(),Q.info("[".concat(o.getTrackId(),"] set device to ").concat(n," success")),wt("info",o,"setDevice",n,"success")})()}setEnabled(n,o,s){var c=()=>super.setEnabled,h=this;return V(function*(){if(o)return Q.debug("[".concat(h.getTrackId,"] setEnabled false (do not close microphone)")),qe("debug",h,"setEnabled false (do not close microphone)"),yield c().call(h,n);if(!s){if(n===h._enabled)return;h.stateCheck("enabled",n)}if(Q.info("[".concat(h.getTrackId(),"] start setEnabled"),n),wt("info",h,"setEnabled",n),!n){h._originMediaStreamTrack.onended=null,h._originMediaStreamTrack.stop(),s||(h._enabled=!1);try{yield Ho(h,lr.NEED_DISABLE_TRACK,h)}catch(A){throw Q.error("[".concat(h.getTrackId(),"] setEnabled false failed"),A.toString()),wt("error",h,"setEnabled",n,A.toString()),A}return}const g=lx({},h._constraints),f=Kl.searchDeviceIdByName(h._deviceName);f&&!g.deviceId&&(g.deviceId=f);try{s||(h._enabled=!0);const A=yield pl({audio:h._constraints},h.getTrackId());yield h._updateOriginMediaStreamTrack(A.getAudioTracks()[0],!1),yield Ho(h,lr.NEED_ENABLE_TRACK,h)}catch(A){throw s||(h._enabled=!1),Q.error("[".concat(h.getTrackId(),"] setEnabled true failed"),A.toString()),wt("error",h,"setEnabled",n,A.toString()),A}Q.info("[".concat(h.getTrackId(),"] setEnabled success")),wt("info",h,"setEnabled",n,"success")})()}close(){super.close(),Ti()&&$r.unbindInterruptDetectorTrack(this)}onTrackEnded(){var n=this;if((Dc()||Ul())&&this._enabled&&!this._isClosed&&$r.duringInterruption){const o=function(){var s=V(function*(){$r.off(ha.IOS_INTERRUPTION_END,o),n._enabled&&!n._isClosed&&(Q.debug("[".concat(n.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),qe("debug",n,"try capture microphone media device for interrupted iOS device"),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return s.apply(this,arguments)}}();$r.on(ha.IOS_INTERRUPTION_END,o)}else Q.debug("[".concat(this.getTrackId(),"] track ended")),Yn("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(wh.TRACK_ENDED)}renewMediaStreamTrack(n){var o=this;return V(function*(){const s=n||o._constraints,c=Kl.searchDeviceIdByName(o._deviceName);c&&!s.deviceId&&(s.deviceId=c),o._constraints=s,o._originMediaStreamTrack.stop();const h=yield pl({audio:o._constraints},o.getTrackId());yield o._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var n=this;this.processorContext.on(Ql.REQUEST_UPDATE_CONSTRAINTS,function(){var o=V(function*(s,c,h){try{const g=Object.assign({},n._originalConstraints,...s);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this.processorContext.on(Ql.REQUEST_CONSTRAINTS,function(){var o=V(function*(s){s(n._originMediaStreamTrack.getSettings())});return function(s){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[mQ],Object.getOwnPropertyDescriptor(m1.prototype,"setDevice"),m1.prototype),tr(m1.prototype,"setEnabled",[gQ,_Q],Object.getOwnPropertyDescriptor(m1.prototype,"setEnabled"),m1.prototype),vQ=m1))||vQ),dj=(AQ=no("BufferSourceAudioTrack","getTrackId"),yQ=gs(),EQ=gs(),bQ=gs(),Y3=gs(),SQ=gs(),AQ((tr((hc=class extends pc{constructor(n,o,s,c){super(o.createOutputTrack(),s,c),X(this,"source",void 0),X(this,"_bufferSource",void 0),Wn("info",this,"constructor",{trackId:c}),this.source=n,this._bufferSource=o,this._bufferSource.on($c.AUDIO_SOURCE_STATE_CHANGE,h=>{this.emit(wh.SOURCE_STATE_CHANGE,h)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),n,this.duration]});n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer(),o.onSuccess()}pauseProcessAudioBuffer(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),n.onSuccess()}seekAudioBuffer(n){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(n),o.onSuccess()}resumeProcessAudioBuffer(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),n.onSuccess()}stopProcessAudioBuffer(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),n.onSuccess()}}).prototype,"startProcessAudioBuffer",[yQ],Object.getOwnPropertyDescriptor(hc.prototype,"startProcessAudioBuffer"),hc.prototype),tr(hc.prototype,"pauseProcessAudioBuffer",[EQ],Object.getOwnPropertyDescriptor(hc.prototype,"pauseProcessAudioBuffer"),hc.prototype),tr(hc.prototype,"seekAudioBuffer",[bQ],Object.getOwnPropertyDescriptor(hc.prototype,"seekAudioBuffer"),hc.prototype),tr(hc.prototype,"resumeProcessAudioBuffer",[Y3],Object.getOwnPropertyDescriptor(hc.prototype,"resumeProcessAudioBuffer"),hc.prototype),tr(hc.prototype,"stopProcessAudioBuffer",[SQ],Object.getOwnPropertyDescriptor(hc.prototype,"stopProcessAudioBuffer"),hc.prototype),CQ=hc))||CQ),Td=no("MixingAudioTrack","getTrackId")(q3=class extends pc{get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=WD().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,_s(8,"track-mix-")),X(this,"trackList",void 0),X(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return-1!==this.trackList.indexOf(n)}addAudioTrack(n){if(-1!==this.trackList.indexOf(n))return Q.debug("track ".concat(n.getTrackId()," is already added")),void qe("debug",this,"track already added");Q.debug("add ".concat(n.getTrackId()," to mixing track")),wt("debug",this,"addAudioTrack",n.getTrackId()),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()}removeAudioTrack(n){if(-1!==this.trackList.indexOf(n)){Q.debug("remove ".concat(n.getTrackId()," from mixing track")),wt("debug",this,"removeAudioTrack",n.getTrackId());try{n._source.outputNode.disconnect(this.destNode)}catch{}tU(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}})||q3;class IQ extends D{constructor(o){super(),X(this,"name","AudioProcessorDestination"),X(this,"ID","0"),X(this,"inputTrack",void 0),X(this,"inputNode",void 0),X(this,"audioProcessorContext",void 0),X(this,"_source",void 0),this.audioProcessorContext=o}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new F(P.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new F(P.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(Th.ON_TRACK,void 0),this.emit(Th.ON_NODE,void 0)}updateInput(o){if(o.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");o.track&&this.inputTrack!==o.track&&(this.inputTrack=o.track,this.emit(Th.ON_TRACK,this.inputTrack)),o.node&&this.inputNode!==o.node&&(this.inputNode=o.node,this.emit(Th.ON_NODE,this.inputNode))}}class wQ extends D{constructor(o,s){super(),X(this,"constraintsMap",new Map),X(this,"statsRegistry",[]),X(this,"audioContext",void 0),X(this,"trackId",void 0),this.audioContext=o,this.trackId=s}getConstraints(){var o=this;return V(function*(){return Oh(o,Ql.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(o,s){var c=this;return V(function*(){var h;return Q.info("processor ".concat(s.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(s,o),Ho(c,Ql.REQUEST_UPDATE_CONSTRAINTS,Array.from(K_(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(o){var s=this;return V(function*(){var c;if(s.constraintsMap.has(o))return s.constraintsMap.delete(o),Ho(s,Ql.REQUEST_UPDATE_CONSTRAINTS,Array.from(K_(c=s.constraintsMap).call(c)))})()}registerStats(o,s,c){this.statsRegistry.find(h=>h.processorID===o.ID&&h.processorName===o.name&&h.type===s)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:s,cb:c})}unregisterStats(o,s){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:s,processorName:c,type:h,cb:g}=o;return{processorID:s,processorName:c,type:h,stats:g()}})}}class TQ extends D{constructor(){super(...arguments),X(this,"resultStorage",new Map)}setLocalAudioStats(o,s,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",o,this.checkAudioInputLevel(c,s)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",o,this.checkSendAudioBitrate(c,s))}setLocalVideoStats(o,s,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",o,this.checkSendVideoBitrate(c,s)),this.record("FRAMERATE_INPUT_TOO_LOW",o,this.checkFramerateInput(c,s)),this.record("FRAMERATE_SENT_TOO_LOW",o,this.checkFramerateSent(c))}setRemoteAudioStats(o,s){const c=o.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(s))}setRemoteVideoStats(o,s){const c=o.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(s))}record(o,s,c){this.resultStorage.has(o)||this.resultStorage.set(o,{result:[],isPrevNormal:!0});const h=this.resultStorage.get(o);if(h&&(h.result.push(c),h.result.length>=5)){const g=h.result.includes(!0);h.isPrevNormal&&!g&&this.emit("exception",g1[o],o,s),!h.isPrevNormal&&g&&this.emit("exception",g1[o]+2e3,o+"_RECOVER",s),h.isPrevNormal=g,h.result=[]}}checkAudioOutputLevel(o){return!(o.receiveBitrate>0&&0===o.receiveLevel)}checkAudioInputLevel(o,s){return s instanceof Td&&!s.isActive||!!s.muted||0!==o.sendVolumeLevel}checkFramerateInput(o,s){let c=null;s._encoderConfig&&s._encoderConfig.frameRate&&(c=wy(s._encoderConfig.frameRate));const h=o.captureFrameRate;return!c||!h||!(c>10&&h<5||c<10&&c>=5&&h<=1)}checkFramerateSent(o){return!(o.captureFrameRate&&o.sendFrameRate&&o.captureFrameRate>5&&o.sendFrameRate<=1)}checkSendVideoBitrate(o,s){return!!s.muted||0!==o.sendBitrate}checkSendAudioBitrate(o,s){return s instanceof Td&&!s.isActive||!!s.muted||0!==o.sendBitrate}checkVideoDecode(o){return 0===o.receiveBitrate||0!==o.decodeFrameRate}}const g1={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},zl=new class{markSubscribeStart(n,o){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(o))}markPublishStart(n,o){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(o))}measureFromSubscribeStart(n,o){const s=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(o));if(s.length>0){const c=s[s.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(n,o){const s=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(o));if(s.length>0){const c=s[s.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function hj(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function rS(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?hj(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):hj(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class iS{constructor(o){X(this,"store",void 0),X(this,"onStatsException",void 0),X(this,"onUploadPublishDuration",void 0),X(this,"localStats",new Map),X(this,"remoteStats",new Map),X(this,"updateStatsInterval",void 0),X(this,"trafficStats",void 0),X(this,"trafficStatsPeerList",[]),X(this,"uplinkStats",void 0),X(this,"exceptionMonitor",void 0),X(this,"p2pChannel",void 0),X(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=o,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new TQ,this.exceptionMonitor.on("exception",(s,c,h)=>{this.onStatsException&&this.onStatsException(s,c,h)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Bn.LocalAudioTrack)||rS({},B4)}getLocalVideoTrackStats(){return this.localStats.get(Bn.LocalVideoTrack)||rS({},F4)}getRemoteAudioTrackStats(o){const s=(g,f)=>{if(!this.trafficStats)return f;const A=this.trafficStats.peer_delay.find(v=>v.peer_uid===g);return A&&(f.publishDuration=A.B_ppad+(Date.now()-this.trafficStats.timestamp)),f},c={};if(o){var h;const g=null===(h=this.remoteStats.get(o))||void 0===h?void 0:h.audioStats;g&&(c[o]=s(o,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[f,{audioStats:A}]=g;A&&(c[f]=s(f,A))});return c}getRemoteNetworkQualityStats(o){const s={};if(o){var c;const h=null===(c=this.remoteStats.get(o))||void 0===c?void 0:c.networkStats;h&&(s[o]=h)}else Array.from(this.remoteStats.entries()).forEach(h=>{let[g,{networkStats:f}]=h;f&&(s[g]=f)});return s}getRemoteVideoTrackStats(o){const s=(g,f)=>{if(!this.trafficStats)return f;const A=this.trafficStats.peer_delay.find(v=>v.peer_uid===g);return A&&(f.publishDuration=A.B_ppvd+(Date.now()-this.trafficStats.timestamp)),f},c={};if(o){var h;const g=null===(h=this.remoteStats.get(o))||void 0===h?void 0:h.videoStats;g&&(c[o]=s(o,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[f,{videoStats:A}]=g;A&&(c[f]=s(f,A))});return c}getRTCStats(){let o=0,s=0,c=0,h=0;const g=this.localStats.get(Bn.LocalAudioTrack);g&&(o+=g.sendBytes,s+=g.sendBitrate);const f=this.localStats.get(Bn.LocalVideoTrack);f&&(o+=f.sendBytes,s+=f.sendBitrate);const A=this.localStats.get(Bn.LocalVideoLowTrack);A&&(o+=A.sendBytes,s+=A.sendBitrate),this.remoteStats.forEach(E=>{let{audioStats:S,videoStats:w}=E;S&&(c+=S.receiveBytes,h+=S.receiveBitrate),w&&(c+=w.receiveBytes,h+=w.receiveBitrate)});let v=1;return this.trafficStats&&(v+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:v,SendBitrate:s,SendBytes:o,RecvBytes:c,RecvBitrate:h,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(o){this.localStats.set(o,void 0)}removeLocalStats(o){o?this.localStats.delete(o):this.localStats.clear()}addRemoteStats(o){this.remoteStats.set(o,{})}removeRemoteStats(o){o?this.remoteStats.delete(o):this.remoteStats.clear()}addP2PChannel(o){this.p2pChannel=o}updateTrafficStats(o){o.peer_delay=o.peer_delay.filter(s=>void 0!==s.B_ppad||void 0!==s.B_ppvd),o.peer_delay.filter(s=>-1===this.trafficStatsPeerList.indexOf(s.peer_uid)).forEach(s=>{var c;const h=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(s.peer_uid),g=null!=h&&h.videoSSRC?zl.measureFromSubscribeStart(this.store.clientId,h.videoSSRC):0,f=null!=h&&h.audioSSRC?zl.measureFromSubscribeStart(this.store.clientId,h.audioSSRC):0;void 0!==s.B_ppad&&void 0!==s.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(s.peer_uid,s.B_ppad,s.B_ppvd,g>f?g:f),this.trafficStatsPeerList.push(s.peer_uid))}),this.trafficStats=o}updateUplinkStats(o){this.uplinkStats&&this.uplinkStats.B_fir!==o.B_fir&&Q.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(o.B_fir)),this.uplinkStats=o}static isRemoteVideoFreeze(o,s,c){return!!o&&(!!c&&s.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||s.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(o){return!!o&&o._isFreeze()}isLocalVideoFreeze(o){return!(!o.inputFrame||!o.sentFrame)&&o.inputFrame.frameRate>5&&o.sentFrame.frameRate<3}updateLocalStats(o){Array.from(this.localStats.entries()).forEach(s=>{let[c,h]=s;switch(c){case Bn.LocalVideoTrack:case Bn.LocalVideoLowTrack:{const g=h,f=rS({},F4),A=o.getStats(),v=o.getLocalMedia(c);if(A){const E=A.videoSend.find(S=>S.ssrc===v?.ssrcs[0].ssrcId);if(E){const S=o.getLocalVideoSize(),w=o.getEncoderConfig(Bn.LocalVideoTrack);"H264"!==E.codec&&"VP8"!==E.codec&&"VP9"!==E.codec&&"AV1X"!==E.codec&&"AV1"!==E.codec||(f.codecType=E.codec),f.sendBytes=E.bytes,f.sendBitrate=g?8*Math.max(0,f.sendBytes-g.sendBytes):0,E.inputFrame?(f.captureFrameRate=E.inputFrame.frameRate,f.captureResolutionHeight=E.inputFrame.height,f.captureResolutionWidth=E.inputFrame.width):S&&(f.captureResolutionWidth=S.width,f.captureResolutionHeight=S.height),E.sentFrame?(f.sendFrameRate=E.sentFrame.frameRate,f.sendResolutionHeight=E.sentFrame.height,f.sendResolutionWidth=E.sentFrame.width):S&&(f.sendResolutionWidth=S.width,f.sendResolutionHeight=S.height),E.avgEncodeMs&&(f.encodeDelay=E.avgEncodeMs),w&&w.bitrateMax&&(f.targetSendBitrate=1e3*w.bitrateMax),f.sendPackets=E.packets,f.sendPacketsLost=E.packetsLost,f.totalDuration=g?g.totalDuration+1:1,f.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(E)&&(f.totalFreezeTime+=1)}this.trafficStats&&(f.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,f),f&&v&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,v.track,f);break}case Bn.LocalAudioTrack:{const g=h,f=rS({},B4),A=o.getStats(),v=o.getLocalMedia(c);if(A){const E=A.audioSend.find(S=>S.ssrc===v?.ssrcs[0].ssrcId);if(E){if("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(f.codecType=E.codec),E.inputLevel)f.sendVolumeLevel=Math.round(32767*E.inputLevel);else{const S=o.getLocalAudioVolume();S&&(f.sendVolumeLevel=Math.round(32767*S))}f.sendBytes=E.bytes,f.sendPackets=E.packets,f.sendPacketsLost=E.packetsLost,f.sendBitrate=g?8*Math.max(0,f.sendBytes-g.sendBytes):0}}this.trafficStats&&(f.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Bn.LocalAudioTrack,f),f&&v&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,v.track,f);break}}})}updateRemoteStats(o){Array.from(this.remoteStats.entries()).forEach(s=>{let[c,{videoStats:h,audioStats:g,videoPcStats:f}]=s;const A=g,v=h,E=f,S=rS({},C7),w=rS({},I7),R=rS({},kW),{audioTrack:x,videoTrack:W,audioSSRC:K,videoSSRC:ne}=o.getRemoteMedia(c),le=o.getStats(),me=le?.audioRecv.find(Ze=>Ze.ssrc===K),be=le?.videoRecv.find(Ze=>Ze.ssrc===ne),ke=this.trafficStats&&this.trafficStats.peer_delay.find(Ze=>Ze.peer_uid===c);if(me&&("opus"!==me.codec&&"aac"!==me.codec&&"PCMU"!==me.codec&&"PCMA"!==me.codec&&"G722"!==me.codec||(S.codecType=me.codec),me.outputLevel?S.receiveLevel=Math.round(32767*me.outputLevel):x&&(S.receiveLevel=Math.round(32767*x.getVolumeLevel())),S.receiveBytes=me.bytes,S.receivePackets=me.packets,S.receivePacketsLost=me.packetsLost,S.packetLossRate=S.receivePacketsLost/(S.receivePackets+S.receivePacketsLost),S.receiveBitrate=A?8*Math.max(0,S.receiveBytes-A.receiveBytes):0,S.totalDuration=A?A.totalDuration+1:1,S.totalFreezeTime=A?A.totalFreezeTime:0,S.freezeRate=S.totalFreezeTime/S.totalDuration,S.receiveDelay=me.jitterBufferMs,S.totalDuration>10&&iS.isRemoteAudioFreeze(x)&&(S.totalFreezeTime+=1)),be){"H264"!==be.codec&&"VP8"!==be.codec&&"VP9"!==be.codec&&"AV1X"!==be.codec&&"AV1"!==be.codec||(w.codecType=be.codec),w.receiveBytes=be.bytes,w.receiveBitrate=v?8*Math.max(0,w.receiveBytes-v.receiveBytes):0,w.decodeFrameRate=be.decodeFrameRate<0?0:be.decodeFrameRate,w.renderFrameRate=be.decodeFrameRate<0?0:be.decodeFrameRate,be.outputFrame&&(w.renderFrameRate=be.outputFrame.frameRate),be.receivedFrame?(w.receiveFrameRate=be.receivedFrame.frameRate,w.receiveResolutionHeight=be.receivedFrame.height,w.receiveResolutionWidth=be.receivedFrame.width):W&&(w.receiveResolutionHeight=W._videoHeight||0,w.receiveResolutionWidth=W._videoWidth||0),void 0!==be.framesRateFirefox&&(w.receiveFrameRate=Math.round(be.framesRateFirefox)),w.receivePackets=be.packets,w.receivePacketsLost=be.packetsLost,w.packetLossRate=w.receivePacketsLost/(w.receivePackets+w.receivePacketsLost),w.totalDuration=v?v.totalDuration+1:1,w.totalFreezeTime=v?v.totalFreezeTime:0,w.receiveDelay=be.jitterBufferMs||0;const Ze=!!ne&&o.getRemoteVideoIsReady(ne);W&&Ze&&iS.isRemoteVideoFreeze(W,be,E)&&(w.totalFreezeTime+=1),w.freezeRate=w.totalFreezeTime/w.totalDuration}ke&&(S.end2EndDelay=ke.B_ad,w.end2EndDelay=ke.B_vd,S.transportDelay=ke.B_ed,w.transportDelay=ke.B_ed,S.currentPacketLossRate=ke.B_ealr4/100,w.currentPacketLossRate=ke.B_evlr4/100,R.uplinkNetworkQuality=ke.B_punq?ke.B_punq:0,R.downlinkNetworkQuality=ke.B_pdnq?ke.B_pdnq:0),this.remoteStats.set(c,{audioStats:S,videoStats:w,videoPcStats:be,networkStats:R}),x&&this.exceptionMonitor.setRemoteAudioStats(x,S),W&&this.exceptionMonitor.setRemoteVideoStats(W,w)})}}function RQ(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function J3(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?RQ(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):RQ(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function XK(n){if(!n.address||!n.tcp)throw new F(P.UNEXPECTED_RESPONSE,"Invalid address format ".concat(n));return n.address.match(/^[\.\:\d]+$/)?"".concat(n.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Q.info("Cannot recognized as IP address ".concat(n.address,". Used As Host instead")),"".concat(n.address,":").concat(n.tcp))}function dx(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(mt("TURN_DOMAIN")):(Q.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function OQ(n,o){const s=mt("GATEWAY_DOMAINS");let c=s[1]&&-1!==o.indexOf(s[1])?1:0;return n.addresses=n.addresses||[],{gatewayAddrs:n.addresses.map(h=>h.domain_prefix?{address:"".concat(h.domain_prefix,".").concat(s[c++%s.length],":").concat(h.port)}:h.ip.match(/^[\.\:\d]+$/)?{ip:h.ip,port:h.port,address:"".concat(h.ip.replace(/[^\d]/g,"-"),".").concat(s[c++%s.length],":").concat(h.port)}:(Q.info("Cannot recognized as IP address ".concat(h.ip,". Used As Host instead")),{ip:h.ip,port:h.port,address:"".concat(h.ip,":").concat(h.port)})),uid:n.uid,cid:n.cid,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function wy(n){return"number"==typeof n?n:n.exact||n.ideal||n.max||n.min||0}function pj(n){const o=n._encoderConfig;if(!o)return{};const s={resolution:o.width&&o.height?"".concat(wy(o.width),"x").concat(wy(o.height)):void 0,maxVideoBW:o.bitrateMax,minVideoBW:o.bitrateMin};return"number"==typeof o.frameRate?(s.maxFrameRate=o.frameRate,s.minFrameRate=o.frameRate):o.frameRate&&(s.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||o.frameRate.min,s.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||o.frameRate.max),s}function fj(n,o,s){var c;const h=o.videoSend.find(A=>A.ssrc===n);if(!h)return null;const g=null==s||null===(c=s.videoSend.find(A=>A.ssrc===n))||void 0===c?void 0:c.inputFrame,f={id:_s(10,""),timestamp:new Date(o.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:h.ssrc.toString()};return h.inputFrame&&(g&&h.inputFrame.height===g.height||(f.A_fhi=h.inputFrame.height?h.inputFrame.height.toString():"0"),g&&h.inputFrame.width===g.width||(f.A_fwi=h.inputFrame.width?h.inputFrame.width.toString():"0"),g&&h.inputFrame.frameRate===g.frameRate||(f.A_fri=h.inputFrame.frameRate?h.inputFrame.frameRate.toString():"0")),f}function $3(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function X3(n,o){let s,c,h;switch(o){case la.CHOOSE_SERVER:s=4096,c="choose server";break;case la.CLOUD_PROXY:s=1048576,c="proxy";break;case la.CLOUD_PROXY_5:s=4194304,c="proxy5";break;case la.CLOUD_PROXY_FALLBACK:s=4194310,c="proxy fallback";break;default:throw new F(P.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(g=>{g.buffer&&g.buffer.flag===s&&(h={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(f=>J3(J3({},f),{},{ticket:g.buffer.cert})),server_ts:n.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:J3(J3({},g.buffer.detail),n.detail),flag:g.buffer.flag,opid:n.opid})}),!h)throw new F(P.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return h}function DQ(n,o){return hx.apply(this,arguments)}function hx(){return hx=V(function*(n,o){return yield jt.all(n.addresses.map(function(){var s=V(function*(c){return{address:dx(c.ip),tcpport:c.port,udpport:c.port,username:o&&mt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?o.toString():Pt.username,password:o&&mt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield qK(o.toString()):Pt.password}});return function(c){return s.apply(this,arguments)}}()))}),hx.apply(this,arguments)}function kQ(n,o){const s=o._videoHeight||o.getMediaStreamTrack(!0).getSettings().height;return s?s/wy(n.height):4}function z_(n){let{candidateType:o,relayProtocol:s,type:c,address:h,port:g,protocol:f}=n;return"local-candidate"===c?{candidateType:o,relayProtocol:s,protocol:f}:{candidateType:o,relayProtocol:s,address:h,port:g,protocol:f}}function Z3(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function _1(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?Z3(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Z3(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function qD(n){return window.TextEncoder?(new TextEncoder).encode(n).length:n.length}function Nc(n){return new jt(o=>{window.setTimeout(o,n)})}function ZK(n){const o=new F(P.TIMEOUT,"timeout");return new jt((s,c)=>{window.setTimeout(()=>c(o),n)})}function _s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,o=arguments.length>1?arguments[1]:void 0;const s=Math.random().toString(16).substr(2,n).toLowerCase();return s.length===n?"".concat(o).concat(s):"".concat(o).concat(s)+_s(n-s.length,"")}function PQ(){return _s(32,"").toUpperCase()}const eU=()=>{};function NQ(n){return new jt((o,s)=>{let c=!1;const h=document.createElement("video");h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.muted=!0,h.autoplay=!0,h.setAttribute("playsinline",""),h.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(h);const g=Dc()?"canplay":"playing";h.addEventListener(g,()=>{const f=h.videoWidth,A=h.videoHeight;!f&&ps()||(c=!0,h.srcObject=null,h.remove(),o([f,A]))}),h.srcObject=new MediaStream([n]),h.play().catch(eU),setTimeout(()=>{c||(h.srcObject=null,h.remove(),o([h.videoWidth,h.videoHeight]))},4e3)})}function v1(n){return jt.all(n.map(o=>o.then(s=>{throw s},s=>s))).then(o=>{throw o},o=>o)}function Oh(n,o){for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return 0===n.getListeners(o).length?jt.reject(new F(P.UNEXPECTED_ERROR,"can not emit promise")):new jt((g,f)=>{n.emit(o,...c,g,f)})}function Ho(n,o){if(0===n.getListeners(o).length)return jt.resolve();for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return Oh(n,o,...c)}function Ty(n,o){if(0===n.getListeners(o).length)return null;for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return A1(n,o,...c)}function A1(n,o){let s=null,c=null;for(var h=arguments.length,g=new Array(h>2?h-2:0),f=2;f<h;f++)g[f-2]=arguments[f];if(n.emit(o,...g,A=>{s=A},A=>{c=A}),null!==c)throw c;if(null===s)throw new F(P.UNEXPECTED_ERROR,"handler is not sync");return s}function tU(n,o){const s=n.indexOf(o);-1!==s&&n.splice(s,1)}function MQ(n){const o=[];return n.forEach(s=>{-1===o.indexOf(s)&&o.push(s)}),o}function Tp(n){jt.resolve().then(n)}function fc(n){return JSON.parse(JSON.stringify(n))}const xQ={};function JD(n,o){xQ[o]||(xQ[o]=!0,n())}function px(n){const o=window.atob(n),s=new Uint8Array(new ArrayBuffer(o.length));for(let c=0;c<o.length;c+=1)s[c]=o.charCodeAt(c);return s}function $D(n){let o="";for(let s=0;s<n.length;s+=1)o+=String.fromCharCode(n[s]);return window.btoa(o)}const LQ=new class{constructor(){X(this,"fnMap",new Map)}throttleByKey(n,o,s,c){for(var h=arguments.length,g=new Array(h>4?h-4:0),f=4;f<h;f++)g[f-4]=arguments[f];if(this.fnMap.has(o)){const A=this.fnMap.get(o);if(A.threshold!==s){A.fn(...A.args),clearTimeout(A.timer);const v=window.setTimeout(()=>{const E=this.fnMap.get(o);E&&E.fn(...E.args),this.fnMap.delete(o)},s);this.fnMap.set(o,{fn:n,threshold:s,timer:v,args:g,skipFn:c})}else A.skipFn&&A.skipFn(...A.args),this.fnMap.set(o,_1(_1({},A),{},{fn:n,args:g,skipFn:c}))}else{const A=window.setTimeout(()=>{const v=this.fnMap.get(o);v&&v.fn(...v.args),this.fnMap.delete(o)},s);this.fnMap.set(o,{fn:n,threshold:s,timer:A,args:g,skipFn:c})}}},mj=LQ.throttleByKey.bind(LQ),y1=function(){var n=V(function*(o){let{fragementLength:s,referenceList:c,asyncMapHandler:h,allFailedhandler:g,promisesCollector:f}=o,A=0;const v=s;let E,S=0;const w=function(){var R=V(function*(){const x=(()=>{const W=A*v;return c.slice(W,W+v).map(h)})();f&&f.push(...x);try{E=yield v1(x)}catch(W){if(S+=v,A++,!(S>=c.length))return void(yield w());g(W)}x.forEach(W=>W.cancel())});return function(){return R.apply(this,arguments)}}();return yield w(),E});return function(s){return n.apply(this,arguments)}}();function BQ(n){return"object"==typeof n&&null!==n&&!(n instanceof RegExp)}var ez=Fs,tz=Rs("iterator"),FQ=!ez(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),o=n.searchParams,s="";return n.pathname="c%20d",o.forEach(function(c,h){o.delete("b"),s+=h+c}),!n.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[tz]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host}),nU=Hu,UQ=lu,Y_=Fs,Ry=Hc,Oy=Qc,nz=Ov,_j=va,Yl=_a,Kf=Object.assign,VQ=Object.defineProperty,q_=Fi([].concat),rz=!Kf||Y_(function(){if(nU&&1!==Kf({b:1},Kf(VQ({},"a",{enumerable:!0,get:function(){VQ(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},o={},s=Symbol(),c="abcdefghijklmnopqrst";return n[s]=7,c.split("").forEach(function(h){o[h]=h}),7!=Kf({},n)[s]||Ry(Kf({},o)).join("")!=c})?function(n,o){for(var s=_j(n),c=arguments.length,h=1,g=Oy.f,f=nz.f;c>h;)for(var A,v=Yl(arguments[h++]),E=g?q_(Ry(v),g(v)):Ry(v),S=E.length,w=0;S>w;)A=E[w++],nU&&!UQ(f,v,A)||(s[A]=v[A]);return s}:Kf,jQ=hu,iz=Af,QQ=qh,oz=lu,vj=va,XD=function(n,o,s,c){try{return c?o(jQ(s)[0],s[1]):o(s)}catch(h){iz(n,"throw",h)}},Aj=lA,rU=Hm,sz=Zh,HQ=vy,az=pA,cz=Cb,GQ=ni.Array,E1=Fi,ZD=2147483647,iU=/[^\0-\u007E]/,ek=/[.\u3002\uFF0E\uFF61]/g,yj="Overflow: input needs wider integers to process",fx=ni.RangeError,uz=E1(ek.exec),b1=Math.floor,Ej=String.fromCharCode,WQ=E1("".charCodeAt),KQ=E1([].join),J_=E1([].push),lz=E1("".replace),bj=E1("".split),dz=E1("".toLowerCase),Sj=function(n){return n+22+75*(n<26)},zQ=function(n,o,s){var c=0;for(n=s?b1(n/700):n>>1,n+=b1(n/o);n>455;)n=b1(n/35),c+=36;return b1(c+36*n/(n+38))},YQ=function(n){var o,s,c=[],h=(n=function(le){for(var me=[],be=0,ke=le.length;be<ke;){var Ze=WQ(le,be++);if(Ze>=55296&&Ze<=56319&&be<ke){var Nt=WQ(le,be++);56320==(64512&Nt)?J_(me,((1023&Ze)<<10)+(1023&Nt)+65536):(J_(me,Ze),be--)}else J_(me,Ze)}return me}(n)).length,g=128,f=0,A=72;for(o=0;o<n.length;o++)(s=n[o])<128&&J_(c,Ej(s));var v=c.length,E=v;for(v&&J_(c,"-");E<h;){var S=ZD;for(o=0;o<n.length;o++)(s=n[o])>=g&&s<S&&(S=s);var w=E+1;if(S-g>b1((ZD-f)/w))throw fx(yj);for(f+=(S-g)*w,g=S,o=0;o<n.length;o++){if((s=n[o])<g&&++f>ZD)throw fx(yj);if(s==g){for(var R=f,x=36;;){var W=x<=A?1:x>=A+26?26:x-A;if(R<W)break;var K=R-W,ne=36-W;J_(c,Ej(Sj(W+K%ne))),R=b1(K/ne),x+=36}J_(c,Ej(Sj(R))),A=zQ(f,w,E==v),f=0,E++}}f++,g++}return KQ(c,"")},oU=ni.TypeError,mx=as,gx=ni,sU=Gu,_x=lu,Rd=Fi,Cj=FQ,Ij=Cf,qQ=FI,hz=c_,JQ=RB,tk=Sf,nk=Bb,vx=ws,$Q=Ws,pz=qh,XQ=Zu,ZQ=hu,rk=du,Dh=Ef,eH=r_,Ax=Gh,wj=pA,tH=Cb,S1=function(n,o){if(n<o)throw oU("Not enough arguments");return n},Tj=h7,Rj=Rs("iterator"),aU="URLSearchParams",nH="URLSearchParamsIterator",rH=tk.set,cg=tk.getterFor(aU),fz=tk.getterFor(nH),iH=sU("fetch"),yx=sU("Request"),ik=sU("Headers"),Oj=yx&&yx.prototype,Dj=ik&&ik.prototype,cU=gx.RegExp,mz=gx.TypeError,oH=gx.decodeURIComponent,gz=gx.encodeURIComponent,_z=Rd("".charAt),sH=Rd([].join),C1=Rd([].push),kj=Rd("".replace),vz=Rd([].shift),aH=Rd([].splice),ok=Rd("".split),Pj=Rd("".slice),cH=/\+/g,uU=Array(4),uH=function(n){return uU[n-1]||(uU[n-1]=cU("((?:%[\\da-f]{2}){"+n+"})","gi"))},Az=function(n){try{return oH(n)}catch{return n}},Nj=function(n){var o=kj(n,cH," "),s=4;try{return oH(o)}catch{for(;s;)o=kj(o,uH(s--),Az);return o}},Mj=/[!'()~]|%20/g,lU={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},xj=function(n){return lU[n]},Lj=function(n){return kj(gz(n),Mj,xj)},dU=JQ(function(n,o){rH(this,{type:nH,iterator:wj(cg(n).entries),kind:o})},"Iterator",function(){var n=fz(this),o=n.kind,s=n.iterator.next(),c=s.value;return s.done||(s.value="keys"===o?c.key:"values"===o?c.value:[c.key,c.value]),s},!0),sk=function(n){this.entries=[],this.url=null,void 0!==n&&(rk(n)?this.parseObject(n):this.parseQuery("string"==typeof n?"?"===_z(n,0)?Pj(n,1):n:Dh(n)))};sk.prototype={type:aU,bindURL:function(n){this.url=n,this.update()},parseObject:function(n){var o,s,c,h,g,f,A,v=tH(n);if(v)for(s=(o=wj(n,v)).next;!(c=_x(s,o)).done;){if(g=(h=wj(ZQ(c.value))).next,(f=_x(g,h)).done||(A=_x(g,h)).done||!_x(g,h).done)throw mz("Expected sequence with length 2");C1(this.entries,{key:Dh(f.value),value:Dh(A.value)})}else for(var E in n)$Q(n,E)&&C1(this.entries,{key:E,value:Dh(n[E])})},parseQuery:function(n){if(n)for(var o,s,c=ok(n,"&"),h=0;h<c.length;)(o=c[h++]).length&&(s=ok(o,"="),C1(this.entries,{key:Nj(vz(s)),value:Nj(sH(s,"="))}))},serialize:function(){for(var n,o=this.entries,s=[],c=0;c<o.length;)n=o[c++],C1(s,Lj(n.key)+"="+Lj(n.value));return sH(s,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var hU=function(){nk(this,Ex),rH(this,new sk(arguments.length>0?arguments[0]:void 0))},Ex=hU.prototype;if(qQ(Ex,{append:function(n,o){S1(arguments.length,2);var s=cg(this);C1(s.entries,{key:Dh(n),value:Dh(o)}),s.updateURL()},delete:function(n){S1(arguments.length,1);for(var o=cg(this),s=o.entries,c=Dh(n),h=0;h<s.length;)s[h].key===c?aH(s,h,1):h++;o.updateURL()},get:function(n){S1(arguments.length,1);for(var o=cg(this).entries,s=Dh(n),c=0;c<o.length;c++)if(o[c].key===s)return o[c].value;return null},getAll:function(n){S1(arguments.length,1);for(var o=cg(this).entries,s=Dh(n),c=[],h=0;h<o.length;h++)o[h].key===s&&C1(c,o[h].value);return c},has:function(n){S1(arguments.length,1);for(var o=cg(this).entries,s=Dh(n),c=0;c<o.length;)if(o[c++].key===s)return!0;return!1},set:function(n,o){S1(arguments.length,1);for(var s,c=cg(this),h=c.entries,g=!1,f=Dh(n),A=Dh(o),v=0;v<h.length;v++)(s=h[v]).key===f&&(g?aH(h,v--,1):(g=!0,s.value=A));g||C1(h,{key:f,value:A}),c.updateURL()},sort:function(){var n=cg(this);Tj(n.entries,function(o,s){return o.key>s.key?1:-1}),n.updateURL()},forEach:function(n){for(var o,s=cg(this).entries,c=pz(n,arguments.length>1?arguments[1]:void 0),h=0;h<s.length;)c((o=s[h++]).value,o.key,this)},keys:function(){return new dU(this,"keys")},values:function(){return new dU(this,"values")},entries:function(){return new dU(this,"entries")}},{enumerable:!0}),Ij(Ex,Rj,Ex.entries,{name:"entries"}),Ij(Ex,"toString",function(){return cg(this).serialize()},{enumerable:!0}),hz(hU,aU),mx({global:!0,forced:!Cj},{URLSearchParams:hU}),!Cj&&vx(ik)){var lH=Rd(Dj.has),yz=Rd(Dj.set),dH=function(n){if(rk(n)){var o,s=n.body;if(XQ(s)===aU)return o=n.headers?new ik(n.headers):new ik,lH(o,"content-type")||yz(o,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),eH(n,{body:Ax(0,Dh(s)),headers:Ax(0,o)})}return n};if(vx(iH)&&mx({global:!0,enumerable:!0,forced:!0},{fetch:function(n){return iH(n,arguments.length>1?dH(arguments[1]):{})}}),vx(yx)){var bx=function(n){return nk(this,Oj),new yx(n,arguments.length>1?dH(arguments[1]):{})};Oj.constructor=bx,bx.prototype=Oj,mx({global:!0,forced:!0},{Request:bx})}}var Rp,Bj=as,pU=Hu,Fj=FQ,fU=ni,Uj=qh,tu=Fi,Vj=$u.f,ak=Cf,Ez=Bb,jj=Ws,Sx=rz,I1=function(n){var o=vj(n),s=rU(this),c=arguments.length,h=c>1?arguments[1]:void 0,g=void 0!==h;g&&(h=QQ(h,c>2?arguments[2]:void 0));var f,A,v,E,S,w,R=cz(o),x=0;if(!R||this==GQ&&Aj(R))for(f=sz(o),A=s?new this(f):GQ(f);f>x;x++)w=g?h(o[x],x):o[x],HQ(A,x,w);else for(S=(E=az(o,R)).next,A=s?new this:[];!(v=oz(S,E)).done;x++)w=g?XD(E,h,[v.value,x],!0):v.value,HQ(A,x,w);return A.length=x,A},zf=S4,pH=GB.codeAt,$_=Ef,Qj=c_,Cx={URLSearchParams:hU,getState:cg},fH=Sf.set,Ix=Sf.getterFor("URL"),gU=Cx.URLSearchParams,bz=Cx.getState,ck=fU.URL,_U=fU.TypeError,wx=fU.parseInt,mH=Math.floor,Tx=Math.pow,kh=tu("".charAt),Od=tu(/./.exec),uk=tu([].join),gH=tu(1..toString),_H=tu([].pop),w1=tu([].push),Hj=tu("".replace),vH=tu([].shift),AH=tu("".split),T1=tu("".slice),Rx=tu("".toLowerCase),Gj=tu([].unshift),vU="Invalid scheme",oS="Invalid host",AU="Invalid port",yH=/[a-z]/i,Sz=/[\d+-.a-z]/i,yU=/\d/,EH=/^0x/i,bH=/^[0-7]+$/,Wj=/^\d+$/,EU=/^[\da-f]+$/i,Cz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Iz=/[\0\t\n\r #/:<>?@[\\\]^|]/,wz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Tz=/[\t\n\r]/g,lk=function(n){var o,s,c,h;if("number"==typeof n){for(o=[],s=0;s<4;s++)Gj(o,n%256),n=mH(n/256);return uk(o,".")}if("object"==typeof n){for(o="",c=function(g){for(var f=null,A=1,v=null,E=0,S=0;S<8;S++)0!==g[S]?(E>A&&(f=v,A=E),v=null,E=0):(null===v&&(v=S),++E);return E>A&&(f=v,A=E),f}(n),s=0;s<8;s++)h&&0===n[s]||(h&&(h=!1),c===s?(o+=s?":":"::",h=!0):(o+=gH(n[s],16),s<7&&(o+=":")));return"["+o+"]"}return n},R1={},Kj=Sx({},R1,{" ":1,'"':1,"<":1,">":1,"`":1}),zj=Sx({},Kj,{"#":1,"?":1,"{":1,"}":1}),bU=Sx({},zj,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Dd=function(n,o){var s=pH(n,0);return s>32&&s<127&&!jj(o,n)?n:encodeURIComponent(n)},dk={ftp:21,file:null,http:80,https:443,ws:80,wss:443},hk=function(n,o){var s;return 2==n.length&&Od(yH,kh(n,0))&&(":"==(s=kh(n,1))||!o&&"|"==s)},Yj=function(n){var o;return n.length>1&&hk(T1(n,0,2))&&(2==n.length||"/"===(o=kh(n,2))||"\\"===o||"?"===o||"#"===o)},SH=function(n){return"."===n||"%2e"===Rx(n)},qj={},Jj={},SU={},$j={},Xj={},CU={},Zj={},e8={},Ox={},Dx={},IU={},wU={},TU={},RU={},t8={},OU={},O1={},ug={},n8={},sS={},X_={},DU=function(n,o,s){var c,h,g,f=$_(n);if(o){if(h=this.parse(f))throw _U(h);this.searchParams=null}else{if(void 0!==s&&(c=new DU(s,!0)),h=this.parse(f,null,c))throw _U(h);(g=bz(new gU)).bindURL(this),this.searchParams=g}};DU.prototype={type:"URL",parse:function(n,o,s){var c,h,g,f,A,v=this,E=o||qj,S=0,w="",R=!1,x=!1,W=!1;for(n=$_(n),o||(v.scheme="",v.username="",v.password="",v.host=null,v.port=null,v.path=[],v.query=null,v.fragment=null,v.cannotBeABaseURL=!1,n=Hj(n,wz,"")),n=Hj(n,Tz,""),c=I1(n);S<=c.length;){switch(h=c[S],E){case qj:if(!h||!Od(yH,h)){if(o)return vU;E=SU;continue}w+=Rx(h),E=Jj;break;case Jj:if(h&&(Od(Sz,h)||"+"==h||"-"==h||"."==h))w+=Rx(h);else{if(":"!=h){if(o)return vU;w="",E=SU,S=0;continue}if(o&&(v.isSpecial()!=jj(dk,w)||"file"==w&&(v.includesCredentials()||null!==v.port)||"file"==v.scheme&&!v.host))return;if(v.scheme=w,o)return void(v.isSpecial()&&dk[v.scheme]==v.port&&(v.port=null));w="","file"==v.scheme?E=RU:v.isSpecial()&&s&&s.scheme==v.scheme?E=$j:v.isSpecial()?E=e8:"/"==c[S+1]?(E=Xj,S++):(v.cannotBeABaseURL=!0,w1(v.path,""),E=n8)}break;case SU:if(!s||s.cannotBeABaseURL&&"#"!=h)return vU;if(s.cannotBeABaseURL&&"#"==h){v.scheme=s.scheme,v.path=zf(s.path),v.query=s.query,v.fragment="",v.cannotBeABaseURL=!0,E=X_;break}E="file"==s.scheme?RU:CU;continue;case $j:if("/"!=h||"/"!=c[S+1]){E=CU;continue}E=Ox,S++;break;case Xj:if("/"==h){E=Dx;break}E=ug;continue;case CU:if(v.scheme=s.scheme,h==Rp)v.username=s.username,v.password=s.password,v.host=s.host,v.port=s.port,v.path=zf(s.path),v.query=s.query;else if("/"==h||"\\"==h&&v.isSpecial())E=Zj;else if("?"==h)v.username=s.username,v.password=s.password,v.host=s.host,v.port=s.port,v.path=zf(s.path),v.query="",E=sS;else{if("#"!=h){v.username=s.username,v.password=s.password,v.host=s.host,v.port=s.port,v.path=zf(s.path),v.path.length--,E=ug;continue}v.username=s.username,v.password=s.password,v.host=s.host,v.port=s.port,v.path=zf(s.path),v.query=s.query,v.fragment="",E=X_}break;case Zj:if(!v.isSpecial()||"/"!=h&&"\\"!=h){if("/"!=h){v.username=s.username,v.password=s.password,v.host=s.host,v.port=s.port,E=ug;continue}E=Dx}else E=Ox;break;case e8:if(E=Ox,"/"!=h||"/"!=kh(w,S+1))continue;S++;break;case Ox:if("/"!=h&&"\\"!=h){E=Dx;continue}break;case Dx:if("@"==h){R&&(w="%40"+w),R=!0,g=I1(w);for(var K=0;K<g.length;K++){var ne=g[K];if(":"!=ne||W){var le=Dd(ne,bU);W?v.password+=le:v.username+=le}else W=!0}w=""}else if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&v.isSpecial()){if(R&&""==w)return"Invalid authority";S-=I1(w).length+1,w="",E=IU}else w+=h;break;case IU:case wU:if(o&&"file"==v.scheme){E=OU;continue}if(":"!=h||x){if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&v.isSpecial()){if(v.isSpecial()&&""==w)return oS;if(o&&""==w&&(v.includesCredentials()||null!==v.port))return;if(f=v.parseHost(w))return f;if(w="",E=O1,o)return;continue}"["==h?x=!0:"]"==h&&(x=!1),w+=h}else{if(""==w)return oS;if(f=v.parseHost(w))return f;if(w="",E=TU,o==wU)return}break;case TU:if(!Od(yU,h)){if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&v.isSpecial()||o){if(""!=w){var me=wx(w,10);if(me>65535)return AU;v.port=v.isSpecial()&&me===dk[v.scheme]?null:me,w=""}if(o)return;E=O1;continue}return AU}w+=h;break;case RU:if(v.scheme="file","/"==h||"\\"==h)E=t8;else{if(!s||"file"!=s.scheme){E=ug;continue}if(h==Rp)v.host=s.host,v.path=zf(s.path),v.query=s.query;else if("?"==h)v.host=s.host,v.path=zf(s.path),v.query="",E=sS;else{if("#"!=h){Yj(uk(zf(c,S),""))||(v.host=s.host,v.path=zf(s.path),v.shortenPath()),E=ug;continue}v.host=s.host,v.path=zf(s.path),v.query=s.query,v.fragment="",E=X_}}break;case t8:if("/"==h||"\\"==h){E=OU;break}s&&"file"==s.scheme&&!Yj(uk(zf(c,S),""))&&(hk(s.path[0],!0)?w1(v.path,s.path[0]):v.host=s.host),E=ug;continue;case OU:if(h==Rp||"/"==h||"\\"==h||"?"==h||"#"==h){if(!o&&hk(w))E=ug;else if(""==w){if(v.host="",o)return;E=O1}else{if(f=v.parseHost(w))return f;if("localhost"==v.host&&(v.host=""),o)return;w="",E=O1}continue}w+=h;break;case O1:if(v.isSpecial()){if(E=ug,"/"!=h&&"\\"!=h)continue}else if(o||"?"!=h)if(o||"#"!=h){if(h!=Rp&&(E=ug,"/"!=h))continue}else v.fragment="",E=X_;else v.query="",E=sS;break;case ug:if(h==Rp||"/"==h||"\\"==h&&v.isSpecial()||!o&&("?"==h||"#"==h)){if(".."===(A=Rx(A=w))||"%2e."===A||".%2e"===A||"%2e%2e"===A?(v.shortenPath(),"/"==h||"\\"==h&&v.isSpecial()||w1(v.path,"")):SH(w)?"/"==h||"\\"==h&&v.isSpecial()||w1(v.path,""):("file"==v.scheme&&!v.path.length&&hk(w)&&(v.host&&(v.host=""),w=kh(w,0)+":"),w1(v.path,w)),w="","file"==v.scheme&&(h==Rp||"?"==h||"#"==h))for(;v.path.length>1&&""===v.path[0];)vH(v.path);"?"==h?(v.query="",E=sS):"#"==h&&(v.fragment="",E=X_)}else w+=Dd(h,zj);break;case n8:"?"==h?(v.query="",E=sS):"#"==h?(v.fragment="",E=X_):h!=Rp&&(v.path[0]+=Dd(h,R1));break;case sS:o||"#"!=h?h!=Rp&&("'"==h&&v.isSpecial()?v.query+="%27":v.query+="#"==h?"%23":Dd(h,R1)):(v.fragment="",E=X_);break;case X_:h!=Rp&&(v.fragment+=Dd(h,Kj))}S++}},parseHost:function(n){var o,s,c;if("["==kh(n,0)){if("]"!=kh(n,n.length-1)||!(o=function(h){var g,f,A,v,E,S,w,R=[0,0,0,0,0,0,0,0],x=0,W=null,K=0,ne=function(){return kh(h,K)};if(":"==ne()){if(":"!=kh(h,1))return;K+=2,W=++x}for(;ne();){if(8==x)return;if(":"!=ne()){for(g=f=0;f<4&&Od(EU,ne());)g=16*g+wx(ne(),16),K++,f++;if("."==ne()){if(0==f||(K-=f,x>6))return;for(A=0;ne();){if(v=null,A>0){if(!("."==ne()&&A<4))return;K++}if(!Od(yU,ne()))return;for(;Od(yU,ne());){if(E=wx(ne(),10),null===v)v=E;else{if(0==v)return;v=10*v+E}if(v>255)return;K++}R[x]=256*R[x]+v,2!=++A&&4!=A||x++}if(4!=A)return;break}if(":"==ne()){if(K++,!ne())return}else if(ne())return;R[x++]=g}else{if(null!==W)return;K++,W=++x}}if(null!==W)for(S=x-W,x=7;0!=x&&S>0;)w=R[x],R[x--]=R[W+S-1],R[W+--S]=w;else if(8!=x)return;return R}(T1(n,1,-1))))return oS;this.host=o}else if(this.isSpecial()){if(n=function(n){var o,s,c=[],h=bj(lz(dz(n),ek,"."),".");for(o=0;o<h.length;o++)J_(c,uz(iU,s=h[o])?"xn--"+YQ(s):s);return KQ(c,".")}(n),Od(Cz,n)||null===(o=function(h){var g,f,A,v,E,S,w,R=AH(h,".");if(R.length&&""==R[R.length-1]&&R.length--,(g=R.length)>4)return h;for(f=[],A=0;A<g;A++){if(""==(v=R[A]))return h;if(E=10,v.length>1&&"0"==kh(v,0)&&(E=Od(EH,v)?16:8,v=T1(v,8==E?1:2)),""===v)S=0;else{if(!Od(10==E?Wj:8==E?bH:EU,v))return h;S=wx(v,E)}w1(f,S)}for(A=0;A<g;A++)if(S=f[A],A==g-1){if(S>=Tx(256,5-g))return null}else if(S>255)return null;for(w=_H(f),A=0;A<f.length;A++)w+=f[A]*Tx(256,3-A);return w}(n)))return oS;this.host=o}else{if(Od(Iz,n))return oS;for(o="",s=I1(n),c=0;c<s.length;c++)o+=Dd(s[c],R1);this.host=o}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return jj(dk,this.scheme)},shortenPath:function(){var n=this.path,o=n.length;!o||"file"==this.scheme&&1==o&&hk(n[0],!0)||n.length--},serialize:function(){var n=this,o=n.scheme,s=n.username,c=n.password,h=n.host,g=n.port,f=n.path,A=n.query,v=n.fragment,E=o+":";return null!==h?(E+="//",n.includesCredentials()&&(E+=s+(c?":"+c:"")+"@"),E+=lk(h),null!==g&&(E+=":"+g)):"file"==o&&(E+="//"),E+=n.cannotBeABaseURL?f[0]:f.length?"/"+uk(f,"/"):"",null!==A&&(E+="?"+A),null!==v&&(E+="#"+v),E},setHref:function(n){var o=this.parse(n);if(o)throw _U(o);this.searchParams.update()},getOrigin:function(){var n=this.scheme,o=this.port;if("blob"==n)try{return new D1(n.path[0]).origin}catch{return"null"}return"file"!=n&&this.isSpecial()?n+"://"+lk(this.host)+(null!==o?":"+o:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(n){this.parse($_(n)+":",qj)},getUsername:function(){return this.username},setUsername:function(n){var o=I1($_(n));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var s=0;s<o.length;s++)this.username+=Dd(o[s],bU)}},getPassword:function(){return this.password},setPassword:function(n){var o=I1($_(n));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var s=0;s<o.length;s++)this.password+=Dd(o[s],bU)}},getHost:function(){var n=this.host,o=this.port;return null===n?"":null===o?lk(n):lk(n)+":"+o},setHost:function(n){this.cannotBeABaseURL||this.parse(n,IU)},getHostname:function(){var n=this.host;return null===n?"":lk(n)},setHostname:function(n){this.cannotBeABaseURL||this.parse(n,wU)},getPort:function(){var n=this.port;return null===n?"":$_(n)},setPort:function(n){this.cannotHaveUsernamePasswordPort()||(""==(n=$_(n))?this.port=null:this.parse(n,TU))},getPathname:function(){var n=this.path;return this.cannotBeABaseURL?n[0]:n.length?"/"+uk(n,"/"):""},setPathname:function(n){this.cannotBeABaseURL||(this.path=[],this.parse(n,O1))},getSearch:function(){var n=this.query;return n?"?"+n:""},setSearch:function(n){""==(n=$_(n))?this.query=null:("?"==kh(n,0)&&(n=T1(n,1)),this.query="",this.parse(n,sS)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var n=this.fragment;return n?"#"+n:""},setHash:function(n){""!=(n=$_(n))?("#"==kh(n,0)&&(n=T1(n,1)),this.fragment="",this.parse(n,X_)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var D1=function(n){var o=Ez(this,kx),c=fH(o,new DU(n,!1,arguments.length>1?arguments[1]:void 0));pU||(o.href=c.serialize(),o.origin=c.getOrigin(),o.protocol=c.getProtocol(),o.username=c.getUsername(),o.password=c.getPassword(),o.host=c.getHost(),o.hostname=c.getHostname(),o.port=c.getPort(),o.pathname=c.getPathname(),o.search=c.getSearch(),o.searchParams=c.getSearchParams(),o.hash=c.getHash())},kx=D1.prototype,Op=function(n,o){return{get:function(){return Ix(this)[n]()},set:o&&function(s){return Ix(this)[o](s)},configurable:!0,enumerable:!0}};if(pU&&Vj(kx,{href:Op("serialize","setHref"),origin:Op("getOrigin"),protocol:Op("getProtocol","setProtocol"),username:Op("getUsername","setUsername"),password:Op("getPassword","setPassword"),host:Op("getHost","setHost"),hostname:Op("getHostname","setHostname"),port:Op("getPort","setPort"),pathname:Op("getPathname","setPathname"),search:Op("getSearch","setSearch"),searchParams:Op("getSearchParams"),hash:Op("getHash","setHash")}),ak(kx,"toJSON",function(){return Ix(this).serialize()},{enumerable:!0}),ak(kx,"toString",function(){return Ix(this).serialize()},{enumerable:!0}),ck){var Px=ck.createObjectURL,CH=ck.revokeObjectURL;Px&&ak(D1,"createObjectURL",Uj(Px,ck)),CH&&ak(D1,"revokeObjectURL",Uj(CH,ck))}Qj(D1,"URL"),Bj({global:!0,forced:!Fj,sham:!pU},{URL:D1});var r8=Wh.URL;const Rz={[Q0.ACCESS_POINT]:{[sa.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[sa.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[sa.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[sa.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[sa.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[sa.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[sa.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Q0.UNILBS]:{[ll.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ll.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ll.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ll.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ll.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ll.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ll.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ll.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ll.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ll.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ll.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ll.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Q0.STRING_UID_ALLOCATOR]:{[n1.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[n1.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[n1.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function pk(n){const o=Rz[Math.floor(n/1e4)];if(!o)return{desc:"unkonw error",retry:!1};const s=o[n%1e4];if(!s){if(Math.floor(n/1e4)===Q0.ACCESS_POINT){const c=n%1e4;if("1"===c.toString()[0])return{desc:n.toString(),retry:!1};if("2"===c.toString()[0])return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return s}const i8={[mr.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[mr.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[mr.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[mr.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[mr.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[mr.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[mr.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[mr.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[mr.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[mr.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[mr.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[mr.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[mr.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[mr.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[mr.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[mr.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[mr.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[mr.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[mr.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[mr.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[mr.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[mr.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[mr.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[mr.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[mr.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[mr.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[mr.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[mr.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[mr.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[mr.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[mr.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[mr.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[mr.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[mr.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[mr.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[mr.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[mr.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[mr.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[mr.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[mr.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[mr.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[mr.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[mr.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[mr.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[mr.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[mr.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[mr.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[mr.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[mr.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[mr.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[mr.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[mr.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[mr.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[mr.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[mr.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[mr.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[mr.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[mr.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function kU(n){return i8[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}var IH={exports:{}};(function(n,o){n.exports=function(){var s={d:function(vt,Ce){for(var rt in Ce)s.o(Ce,rt)&&!s.o(vt,rt)&&Object.defineProperty(vt,rt,{enumerable:!0,get:Ce[rt]})},o:function(vt,Ce){return Object.prototype.hasOwnProperty.call(vt,Ce)},r:function(vt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(vt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(vt,"__esModule",{value:!0})}},c={};s.r(c),s.d(c,{DataViewIndexOutOfBoundsError:function(){return Ft},DecodeError:function(){return ke},Decoder:function(){return Ar},EXT_TIMESTAMP:function(){return Ze},Encoder:function(){return bt},ExtData:function(){return me},ExtensionCodec:function(){return It},decode:function(){return Vi},decodeArrayStream:function(){return Zf},decodeAsync:function(){return Nh},decodeMulti:function(){return nu},decodeMultiStream:function(){return Vs},decodeStream:function(){return yW},decodeTimestampExtension:function(){return ln},decodeTimestampToTimeSpec:function(){return Sn},encode:function(){return Ye},encodeDateToTimeSpec:function(){return Vt},encodeTimeSpecToTimestamp:function(){return Nt},encodeTimestampExtension:function(){return kt}});var h=4294967295;function g(vt,Ce,rt){var Lt=Math.floor(rt/4294967296),At=rt;vt.setUint32(Ce,Lt),vt.setUint32(Ce+4,At)}function f(vt,Ce){return 4294967296*vt.getInt32(Ce)+vt.getUint32(Ce+4)}var A=function(vt,Ce){var rt="function"==typeof Symbol&&vt[Symbol.iterator];if(!rt)return vt;var Lt,At,mn=rt.call(vt),un=[];try{for(;(void 0===Ce||Ce-- >0)&&!(Lt=mn.next()).done;)un.push(Lt.value)}catch(Kn){At={error:Kn}}finally{try{Lt&&!Lt.done&&(rt=mn.return)&&rt.call(mn)}finally{if(At)throw At.error}}return un},v=function(vt,Ce){for(var rt=0,Lt=Ce.length,At=vt.length;rt<Lt;rt++,At++)vt[At]=Ce[rt];return vt},E=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function S(vt){for(var Ce=vt.length,rt=0,Lt=0;Lt<Ce;){var At=vt.charCodeAt(Lt++);if(0!=(4294967168&At))if(0==(4294965248&At))rt+=2;else{if(At>=55296&&At<=56319&&Lt<Ce){var mn=vt.charCodeAt(Lt);56320==(64512&mn)&&(++Lt,At=((1023&At)<<10)+(1023&mn)+65536)}rt+=0==(4294901760&At)?3:4}else rt++}return rt}var w=E?new TextEncoder:void 0,R=E?typeof process<"u"?200:0:h,x=w?.encodeInto?function(vt,Ce,rt){w.encodeInto(vt,Ce.subarray(rt))}:function(vt,Ce,rt){Ce.set(w.encode(vt),rt)};function W(vt,Ce,rt){for(var Lt=Ce,At=Lt+rt,mn=[],un="";Lt<At;){var Kn=vt[Lt++];if(0==(128&Kn))mn.push(Kn);else if(192==(224&Kn)){var Rr=63&vt[Lt++];mn.push((31&Kn)<<6|Rr)}else if(224==(240&Kn)){Rr=63&vt[Lt++];var Hr=63&vt[Lt++];mn.push((31&Kn)<<12|Rr<<6|Hr)}else if(240==(248&Kn)){var Rn=(7&Kn)<<18|(Rr=63&vt[Lt++])<<12|(Hr=63&vt[Lt++])<<6|63&vt[Lt++];Rn>65535&&(mn.push((Rn-=65536)>>>10&1023|55296),Rn=56320|1023&Rn),mn.push(Rn)}else mn.push(Kn);mn.length>=4096&&(un+=String.fromCharCode.apply(String,v([],A(mn))),mn.length=0)}return mn.length>0&&(un+=String.fromCharCode.apply(String,v([],A(mn)))),un}var K,ne=E?new TextDecoder:null,le=E?typeof process<"u"?200:0:h,me=function(vt,Ce){this.type=vt,this.data=Ce},be=(K=function(vt,Ce){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,Lt){rt.__proto__=Lt}||function(rt,Lt){for(var At in Lt)Object.prototype.hasOwnProperty.call(Lt,At)&&(rt[At]=Lt[At])})(vt,Ce)},function(vt,Ce){if("function"!=typeof Ce&&null!==Ce)throw new TypeError("Class extends value "+String(Ce)+" is not a constructor or null");function rt(){this.constructor=vt}K(vt,Ce),vt.prototype=null===Ce?Object.create(Ce):(rt.prototype=Ce.prototype,new rt)}),ke=function(vt){function Ce(rt){var Lt=vt.call(this,rt)||this,At=Object.create(Ce.prototype);return Object.setPrototypeOf(Lt,At),Object.defineProperty(Lt,"name",{configurable:!0,enumerable:!1,value:Ce.name}),Lt}return be(Ce,vt),Ce}(Error),Ze=-1;function Nt(vt){var Ce,rt=vt.sec,Lt=vt.nsec;if(rt>=0&&Lt>=0&&rt<=17179869183){if(0===Lt&&rt<=4294967295){var At=new Uint8Array(4);return(Ce=new DataView(At.buffer)).setUint32(0,rt),At}var mn=rt/4294967296,un=4294967295&rt;return At=new Uint8Array(8),(Ce=new DataView(At.buffer)).setUint32(0,Lt<<2|3&mn),Ce.setUint32(4,un),At}return At=new Uint8Array(12),(Ce=new DataView(At.buffer)).setUint32(0,Lt),g(Ce,4,rt),At}function Vt(vt){var Ce=vt.getTime(),rt=Math.floor(Ce/1e3),Lt=1e6*(Ce-1e3*rt),At=Math.floor(Lt/1e9);return{sec:rt+At,nsec:Lt-1e9*At}}function kt(vt){return vt instanceof Date?Nt(Vt(vt)):null}function Sn(vt){var Ce=new DataView(vt.buffer,vt.byteOffset,vt.byteLength);switch(vt.byteLength){case 4:return{sec:Ce.getUint32(0),nsec:0};case 8:var rt=Ce.getUint32(0);return{sec:4294967296*(3&rt)+Ce.getUint32(4),nsec:rt>>>2};case 12:return{sec:f(Ce,4),nsec:Ce.getUint32(0)};default:throw new ke("Unrecognized data size for timestamp (expected 4, 8, or 12): "+vt.length)}}function ln(vt){var Ce=Sn(vt);return new Date(1e3*Ce.sec+Ce.nsec/1e6)}var dn={type:Ze,encode:kt,decode:ln},It=function(){function vt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(dn)}return vt.prototype.register=function(Ce){var rt=Ce.type,Lt=Ce.encode,At=Ce.decode;if(rt>=0)this.encoders[rt]=Lt,this.decoders[rt]=At;else{var mn=1+rt;this.builtInEncoders[mn]=Lt,this.builtInDecoders[mn]=At}},vt.prototype.tryToEncode=function(Ce,rt){for(var Lt=0;Lt<this.builtInEncoders.length;Lt++)if(null!=(At=this.builtInEncoders[Lt])&&null!=(mn=At(Ce,rt)))return new me(-1-Lt,mn);for(Lt=0;Lt<this.encoders.length;Lt++){var At,mn;if(null!=(At=this.encoders[Lt])&&null!=(mn=At(Ce,rt)))return new me(Lt,mn)}return Ce instanceof me?Ce:null},vt.prototype.decode=function(Ce,rt,Lt){var At=rt<0?this.builtInDecoders[-1-rt]:this.decoders[rt];return At?At(Ce,rt,Lt):new me(rt,Ce)},vt.defaultCodec=new vt,vt}();function He(vt){return vt instanceof Uint8Array?vt:ArrayBuffer.isView(vt)?new Uint8Array(vt.buffer,vt.byteOffset,vt.byteLength):vt instanceof ArrayBuffer?new Uint8Array(vt):Uint8Array.from(vt)}var ct=function(vt){var Ce="function"==typeof Symbol&&Symbol.iterator,rt=Ce&&vt[Ce],Lt=0;if(rt)return rt.call(vt);if(vt&&"number"==typeof vt.length)return{next:function(){return vt&&Lt>=vt.length&&(vt=void 0),{value:vt&&vt[Lt++],done:!vt}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")},bt=function(){function vt(Ce,rt,Lt,At,mn,un,Kn,Rr){void 0===Ce&&(Ce=It.defaultCodec),void 0===rt&&(rt=void 0),void 0===Lt&&(Lt=100),void 0===At&&(At=2048),void 0===mn&&(mn=!1),void 0===un&&(un=!1),void 0===Kn&&(Kn=!1),void 0===Rr&&(Rr=!1),this.extensionCodec=Ce,this.context=rt,this.maxDepth=Lt,this.initialBufferSize=At,this.sortKeys=mn,this.forceFloat32=un,this.ignoreUndefined=Kn,this.forceIntegerToFloat=Rr,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return vt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},vt.prototype.reinitializeState=function(){this.pos=0},vt.prototype.encode=function(Ce){return this.reinitializeState(),this.doEncode(Ce,1),this.getUint8Array()},vt.prototype.doEncode=function(Ce,rt){if(rt>this.maxDepth)throw new Error("Too deep objects in depth "+rt);null==Ce?this.encodeNil():"boolean"==typeof Ce?this.encodeBoolean(Ce):"number"==typeof Ce?this.encodeNumber(Ce):"string"==typeof Ce?this.encodeString(Ce):this.encodeObject(Ce,rt)},vt.prototype.ensureBufferSizeToWrite=function(Ce){var rt=this.pos+Ce;this.view.byteLength<rt&&this.resizeBuffer(2*rt)},vt.prototype.resizeBuffer=function(Ce){var rt=new ArrayBuffer(Ce),Lt=new Uint8Array(rt),At=new DataView(rt);Lt.set(this.bytes),this.view=At,this.bytes=Lt},vt.prototype.encodeNil=function(){this.writeU8(192)},vt.prototype.encodeBoolean=function(Ce){this.writeU8(!1===Ce?194:195)},vt.prototype.encodeNumber=function(Ce){Number.isSafeInteger(Ce)&&!this.forceIntegerToFloat?Ce>=0?Ce<128?this.writeU8(Ce):Ce<256?(this.writeU8(204),this.writeU8(Ce)):Ce<65536?(this.writeU8(205),this.writeU16(Ce)):Ce<4294967296?(this.writeU8(206),this.writeU32(Ce)):(this.writeU8(207),this.writeU64(Ce)):Ce>=-32?this.writeU8(224|Ce+32):Ce>=-128?(this.writeU8(208),this.writeI8(Ce)):Ce>=-32768?(this.writeU8(209),this.writeI16(Ce)):Ce>=-2147483648?(this.writeU8(210),this.writeI32(Ce)):(this.writeU8(211),this.writeI64(Ce)):this.forceFloat32?(this.writeU8(202),this.writeF32(Ce)):(this.writeU8(203),this.writeF64(Ce))},vt.prototype.writeStringHeader=function(Ce){if(Ce<32)this.writeU8(160+Ce);else if(Ce<256)this.writeU8(217),this.writeU8(Ce);else if(Ce<65536)this.writeU8(218),this.writeU16(Ce);else{if(!(Ce<4294967296))throw new Error("Too long string: "+Ce+" bytes in UTF-8");this.writeU8(219),this.writeU32(Ce)}},vt.prototype.encodeString=function(Ce){if(Ce.length>R){var rt=S(Ce);this.ensureBufferSizeToWrite(5+rt),this.writeStringHeader(rt),x(Ce,this.bytes,this.pos),this.pos+=rt}else rt=S(Ce),this.ensureBufferSizeToWrite(5+rt),this.writeStringHeader(rt),function(Lt,At,mn){for(var un=Lt.length,Kn=mn,Rr=0;Rr<un;){var Hr=Lt.charCodeAt(Rr++);if(0!=(4294967168&Hr)){if(0==(4294965248&Hr))At[Kn++]=Hr>>6&31|192;else{if(Hr>=55296&&Hr<=56319&&Rr<un){var Rn=Lt.charCodeAt(Rr);56320==(64512&Rn)&&(++Rr,Hr=((1023&Hr)<<10)+(1023&Rn)+65536)}0==(4294901760&Hr)?(At[Kn++]=Hr>>12&15|224,At[Kn++]=Hr>>6&63|128):(At[Kn++]=Hr>>18&7|240,At[Kn++]=Hr>>12&63|128,At[Kn++]=Hr>>6&63|128)}At[Kn++]=63&Hr|128}else At[Kn++]=Hr}}(Ce,this.bytes,this.pos),this.pos+=rt},vt.prototype.encodeObject=function(Ce,rt){var Lt=this.extensionCodec.tryToEncode(Ce,this.context);if(null!=Lt)this.encodeExtension(Lt);else if(Array.isArray(Ce))this.encodeArray(Ce,rt);else if(ArrayBuffer.isView(Ce))this.encodeBinary(Ce);else{if("object"!=typeof Ce)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(Ce));this.encodeMap(Ce,rt)}},vt.prototype.encodeBinary=function(Ce){var rt=Ce.byteLength;if(rt<256)this.writeU8(196),this.writeU8(rt);else if(rt<65536)this.writeU8(197),this.writeU16(rt);else{if(!(rt<4294967296))throw new Error("Too large binary: "+rt);this.writeU8(198),this.writeU32(rt)}var Lt=He(Ce);this.writeU8a(Lt)},vt.prototype.encodeArray=function(Ce,rt){var Lt,At,mn=Ce.length;if(mn<16)this.writeU8(144+mn);else if(mn<65536)this.writeU8(220),this.writeU16(mn);else{if(!(mn<4294967296))throw new Error("Too large array: "+mn);this.writeU8(221),this.writeU32(mn)}try{for(var un=ct(Ce),Kn=un.next();!Kn.done;Kn=un.next())this.doEncode(Kn.value,rt+1)}catch(Hr){Lt={error:Hr}}finally{try{Kn&&!Kn.done&&(At=un.return)&&At.call(un)}finally{if(Lt)throw Lt.error}}},vt.prototype.countWithoutUndefined=function(Ce,rt){var Lt,At,mn=0;try{for(var un=ct(rt),Kn=un.next();!Kn.done;Kn=un.next())void 0!==Ce[Kn.value]&&mn++}catch(Rr){Lt={error:Rr}}finally{try{Kn&&!Kn.done&&(At=un.return)&&At.call(un)}finally{if(Lt)throw Lt.error}}return mn},vt.prototype.encodeMap=function(Ce,rt){var Lt,At,mn=Object.keys(Ce);this.sortKeys&&mn.sort();var un=this.ignoreUndefined?this.countWithoutUndefined(Ce,mn):mn.length;if(un<16)this.writeU8(128+un);else if(un<65536)this.writeU8(222),this.writeU16(un);else{if(!(un<4294967296))throw new Error("Too large map object: "+un);this.writeU8(223),this.writeU32(un)}try{for(var Kn=ct(mn),Rr=Kn.next();!Rr.done;Rr=Kn.next()){var Hr=Rr.value,Rn=Ce[Hr];this.ignoreUndefined&&void 0===Rn||(this.encodeString(Hr),this.doEncode(Rn,rt+1))}}catch(Xn){Lt={error:Xn}}finally{try{Rr&&!Rr.done&&(At=Kn.return)&&At.call(Kn)}finally{if(Lt)throw Lt.error}}},vt.prototype.encodeExtension=function(Ce){var rt=Ce.data.length;if(1===rt)this.writeU8(212);else if(2===rt)this.writeU8(213);else if(4===rt)this.writeU8(214);else if(8===rt)this.writeU8(215);else if(16===rt)this.writeU8(216);else if(rt<256)this.writeU8(199),this.writeU8(rt);else if(rt<65536)this.writeU8(200),this.writeU16(rt);else{if(!(rt<4294967296))throw new Error("Too large extension object: "+rt);this.writeU8(201),this.writeU32(rt)}this.writeI8(Ce.type),this.writeU8a(Ce.data)},vt.prototype.writeU8=function(Ce){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,Ce),this.pos++},vt.prototype.writeU8a=function(Ce){var rt=Ce.length;this.ensureBufferSizeToWrite(rt),this.bytes.set(Ce,this.pos),this.pos+=rt},vt.prototype.writeI8=function(Ce){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,Ce),this.pos++},vt.prototype.writeU16=function(Ce){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,Ce),this.pos+=2},vt.prototype.writeI16=function(Ce){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,Ce),this.pos+=2},vt.prototype.writeU32=function(Ce){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,Ce),this.pos+=4},vt.prototype.writeI32=function(Ce){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,Ce),this.pos+=4},vt.prototype.writeF32=function(Ce){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,Ce),this.pos+=4},vt.prototype.writeF64=function(Ce){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,Ce),this.pos+=8},vt.prototype.writeU64=function(Ce){var rt,Lt,At,un;this.ensureBufferSizeToWrite(8),un=At=Ce,(rt=this.view).setUint32(Lt=this.pos,At/4294967296),rt.setUint32(Lt+4,un),this.pos+=8},vt.prototype.writeI64=function(Ce){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,Ce),this.pos+=8},vt}(),bn={};function Ye(vt,Ce){return void 0===Ce&&(Ce=bn),new bt(Ce.extensionCodec,Ce.context,Ce.maxDepth,Ce.initialBufferSize,Ce.sortKeys,Ce.forceFloat32,Ce.ignoreUndefined,Ce.forceIntegerToFloat).encode(vt)}function lt(vt){return(vt<0?"-":"")+"0x"+Math.abs(vt).toString(16).padStart(2,"0")}var xt=function(){function vt(Ce,rt){void 0===Ce&&(Ce=16),void 0===rt&&(rt=16),this.maxKeyLength=Ce,this.maxLengthPerKey=rt,this.hit=0,this.miss=0,this.caches=[];for(var Lt=0;Lt<this.maxKeyLength;Lt++)this.caches.push([])}return vt.prototype.canBeCached=function(Ce){return Ce>0&&Ce<=this.maxKeyLength},vt.prototype.find=function(Ce,rt,Lt){var At,mn,un=this.caches[Lt-1];try{e:for(var Kn=function(yr){var yi="function"==typeof Symbol&&Symbol.iterator,ys=yi&&yr[yi],xu=0;if(ys)return ys.call(yr);if(yr&&"number"==typeof yr.length)return{next:function(){return yr&&xu>=yr.length&&(yr=void 0),{value:yr&&yr[xu++],done:!yr}}};throw new TypeError(yi?"Object is not iterable.":"Symbol.iterator is not defined.")}(un),Rr=Kn.next();!Rr.done;Rr=Kn.next()){for(var Hr=Rr.value,Rn=Hr.bytes,Xn=0;Xn<Lt;Xn++)if(Rn[Xn]!==Ce[rt+Xn])continue e;return Hr.str}}catch(yr){At={error:yr}}finally{try{Rr&&!Rr.done&&(mn=Kn.return)&&mn.call(Kn)}finally{if(At)throw At.error}}return null},vt.prototype.store=function(Ce,rt){var Lt=this.caches[Ce.length-1],At={bytes:Ce,str:rt};Lt.length>=this.maxLengthPerKey?Lt[Math.random()*Lt.length|0]=At:Lt.push(At)},vt.prototype.decode=function(Ce,rt,Lt){var At=this.find(Ce,rt,Lt);if(null!=At)return this.hit++,At;this.miss++;var mn=W(Ce,rt,Lt),un=Uint8Array.prototype.slice.call(Ce,rt,rt+Lt);return this.store(un,mn),mn},vt}(),hn=function(vt,Ce){var rt,Lt,At,mn,un={label:0,sent:function(){if(1&At[0])throw At[1];return At[1]},trys:[],ops:[]};return mn={next:Kn(0),throw:Kn(1),return:Kn(2)},"function"==typeof Symbol&&(mn[Symbol.iterator]=function(){return this}),mn;function Kn(Rr){return function(Hr){return function(Rn){if(rt)throw new TypeError("Generator is already executing.");for(;un;)try{if(rt=1,Lt&&(At=2&Rn[0]?Lt.return:Rn[0]?Lt.throw||((At=Lt.return)&&At.call(Lt),0):Lt.next)&&!(At=At.call(Lt,Rn[1])).done)return At;switch(Lt=0,At&&(Rn=[2&Rn[0],At.value]),Rn[0]){case 0:case 1:At=Rn;break;case 4:return un.label++,{value:Rn[1],done:!1};case 5:un.label++,Lt=Rn[1],Rn=[0];continue;case 7:Rn=un.ops.pop(),un.trys.pop();continue;default:if(!((At=(At=un.trys).length>0&&At[At.length-1])||6!==Rn[0]&&2!==Rn[0])){un=0;continue}if(3===Rn[0]&&(!At||Rn[1]>At[0]&&Rn[1]<At[3])){un.label=Rn[1];break}if(6===Rn[0]&&un.label<At[1]){un.label=At[1],At=Rn;break}if(At&&un.label<At[2]){un.label=At[2],un.ops.push(Rn);break}At[2]&&un.ops.pop(),un.trys.pop();continue}Rn=Ce.call(vt,un)}catch(Xn){Rn=[6,Xn],Lt=0}finally{rt=At=0}if(5&Rn[0])throw Rn[1];return{value:Rn[0]?Rn[1]:void 0,done:!0}}([Rr,Hr])}}},On=function(vt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,rt=vt[Symbol.asyncIterator];return rt?rt.call(vt):(vt="function"==typeof __values?__values(vt):vt[Symbol.iterator](),Ce={},Lt("next"),Lt("throw"),Lt("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Lt(At){Ce[At]=vt[At]&&function(mn){return new Promise(function(un,Kn){var Rr,Hr,Rn;Rr=un,Hr=Kn,Rn=(mn=vt[At](mn)).done,Promise.resolve(mn.value).then(function(yr){Rr({value:yr,done:Rn})},Hr)})}}},Gt=function(vt){return this instanceof Gt?(this.v=vt,this):new Gt(vt)},G=function(vt,Ce,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt,At=rt.apply(vt,Ce||[]),mn=[];return Lt={},un("next"),un("throw"),un("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt;function un(Xn){At[Xn]&&(Lt[Xn]=function(yr){return new Promise(function(yi,ys){mn.push([Xn,yr,yi,ys])>1||Kn(Xn,yr)})})}function Kn(Xn,yr){try{(yi=At[Xn](yr)).value instanceof Gt?Promise.resolve(yi.value.v).then(Rr,Hr):Rn(mn[0][2],yi)}catch(ys){Rn(mn[0][3],ys)}var yi}function Rr(Xn){Kn("next",Xn)}function Hr(Xn){Kn("throw",Xn)}function Rn(Xn,yr){Xn(yr),mn.shift(),mn.length&&Kn(mn[0][0],mn[0][1])}},ye=new DataView(new ArrayBuffer(0)),Ne=new Uint8Array(ye.buffer),Ft=function(){try{ye.getInt8(0)}catch(vt){return vt.constructor}throw new Error("never reached")}(),In=new Ft("Insufficient data"),br=new xt,Ar=function(){function vt(Ce,rt,Lt,At,mn,un,Kn,Rr){void 0===Ce&&(Ce=It.defaultCodec),void 0===rt&&(rt=void 0),void 0===Lt&&(Lt=h),void 0===At&&(At=h),void 0===mn&&(mn=h),void 0===un&&(un=h),void 0===Kn&&(Kn=h),void 0===Rr&&(Rr=br),this.extensionCodec=Ce,this.context=rt,this.maxStrLength=Lt,this.maxBinLength=At,this.maxArrayLength=mn,this.maxMapLength=un,this.maxExtLength=Kn,this.keyDecoder=Rr,this.totalPos=0,this.pos=0,this.view=ye,this.bytes=Ne,this.headByte=-1,this.stack=[]}return vt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},vt.prototype.setBuffer=function(Ce){this.bytes=He(Ce),this.view=function(rt){if(rt instanceof ArrayBuffer)return new DataView(rt);var Lt=He(rt);return new DataView(Lt.buffer,Lt.byteOffset,Lt.byteLength)}(this.bytes),this.pos=0},vt.prototype.appendBuffer=function(Ce){if(-1!==this.headByte||this.hasRemaining(1)){var rt=this.bytes.subarray(this.pos),Lt=He(Ce),At=new Uint8Array(rt.length+Lt.length);At.set(rt),At.set(Lt,rt.length),this.setBuffer(At)}else this.setBuffer(Ce)},vt.prototype.hasRemaining=function(Ce){return this.view.byteLength-this.pos>=Ce},vt.prototype.createExtraByteError=function(Ce){var rt=this.view;return new RangeError("Extra "+(rt.byteLength-this.pos)+" of "+rt.byteLength+" byte(s) found at buffer["+Ce+"]")},vt.prototype.decode=function(Ce){this.reinitializeState(),this.setBuffer(Ce);var rt=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return rt},vt.prototype.decodeMulti=function(Ce){return hn(this,function(rt){switch(rt.label){case 0:this.reinitializeState(),this.setBuffer(Ce),rt.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return rt.sent(),[3,1];case 3:return[2]}})},vt.prototype.decodeAsync=function(Ce){var rt,Lt,At,mn,un,Rr,Hr;return un=this,void 0,Hr=function(){var Rn,Xn,yr,yi,ys,xu,xn,$n;return hn(this,function(jr){switch(jr.label){case 0:Rn=!1,jr.label=1;case 1:jr.trys.push([1,6,7,12]),rt=On(Ce),jr.label=2;case 2:return[4,rt.next()];case 3:if((Lt=jr.sent()).done)return[3,5];if(yr=Lt.value,Rn)throw this.createExtraByteError(this.totalPos);this.appendBuffer(yr);try{Xn=this.doDecodeSync(),Rn=!0}catch(ji){if(!(ji instanceof Ft))throw ji}this.totalPos+=this.pos,jr.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return yi=jr.sent(),At={error:yi},[3,12];case 7:return jr.trys.push([7,,10,11]),Lt&&!Lt.done&&(mn=rt.return)?[4,mn.call(rt)]:[3,9];case 8:jr.sent(),jr.label=9;case 9:return[3,11];case 10:if(At)throw At.error;return[7];case 11:return[7];case 12:if(Rn){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,Xn]}throw xu=(ys=this).headByte,xn=ys.pos,$n=ys.totalPos,new RangeError("Insufficient data in parsing "+lt(xu)+" at "+$n+" ("+xn+" in the current buffer)")}})},new((Rr=void 0)||(Rr=Promise))(function(Rn,Xn){function yr(xu){try{ys(Hr.next(xu))}catch(xn){Xn(xn)}}function yi(xu){try{ys(Hr.throw(xu))}catch(xn){Xn(xn)}}function ys(xu){var xn;xu.done?Rn(xu.value):(xn=xu.value,xn instanceof Rr?xn:new Rr(function($n){$n(xn)})).then(yr,yi)}ys((Hr=Hr.apply(un,[])).next())})},vt.prototype.decodeArrayStream=function(Ce){return this.decodeMultiAsync(Ce,!0)},vt.prototype.decodeStream=function(Ce){return this.decodeMultiAsync(Ce,!1)},vt.prototype.decodeMultiAsync=function(Ce,rt){return G(this,arguments,function(){var Lt,At,mn,un,Kn,Rr,Hr,Rn,Xn;return hn(this,function(yr){switch(yr.label){case 0:Lt=rt,At=-1,yr.label=1;case 1:yr.trys.push([1,13,14,19]),mn=On(Ce),yr.label=2;case 2:return[4,Gt(mn.next())];case 3:if((un=yr.sent()).done)return[3,12];if(Kn=un.value,rt&&0===At)throw this.createExtraByteError(this.totalPos);this.appendBuffer(Kn),Lt&&(At=this.readArraySize(),Lt=!1,this.complete()),yr.label=4;case 4:yr.trys.push([4,9,,10]),yr.label=5;case 5:return[4,Gt(this.doDecodeSync())];case 6:return[4,yr.sent()];case 7:return yr.sent(),0==--At?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((Rr=yr.sent())instanceof Ft))throw Rr;return[3,10];case 10:this.totalPos+=this.pos,yr.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return Hr=yr.sent(),Rn={error:Hr},[3,19];case 14:return yr.trys.push([14,,17,18]),un&&!un.done&&(Xn=mn.return)?[4,Gt(Xn.call(mn))]:[3,16];case 15:yr.sent(),yr.label=16;case 16:return[3,18];case 17:if(Rn)throw Rn.error;return[7];case 18:return[7];case 19:return[2]}})})},vt.prototype.doDecodeSync=function(){e:for(;;){var Ce=this.readHeadByte(),rt=void 0;if(Ce>=224)rt=Ce-256;else if(Ce<192)if(Ce<128)rt=Ce;else if(Ce<144){if(0!=(At=Ce-128)){this.pushMapState(At),this.complete();continue e}rt={}}else if(Ce<160){if(0!=(At=Ce-144)){this.pushArrayState(At),this.complete();continue e}rt=[]}else{var Lt=Ce-160;rt=this.decodeUtf8String(Lt,0)}else if(192===Ce)rt=null;else if(194===Ce)rt=!1;else if(195===Ce)rt=!0;else if(202===Ce)rt=this.readF32();else if(203===Ce)rt=this.readF64();else if(204===Ce)rt=this.readU8();else if(205===Ce)rt=this.readU16();else if(206===Ce)rt=this.readU32();else if(207===Ce)rt=this.readU64();else if(208===Ce)rt=this.readI8();else if(209===Ce)rt=this.readI16();else if(210===Ce)rt=this.readI32();else if(211===Ce)rt=this.readI64();else if(217===Ce)Lt=this.lookU8(),rt=this.decodeUtf8String(Lt,1);else if(218===Ce)Lt=this.lookU16(),rt=this.decodeUtf8String(Lt,2);else if(219===Ce)Lt=this.lookU32(),rt=this.decodeUtf8String(Lt,4);else if(220===Ce){if(0!==(At=this.readU16())){this.pushArrayState(At),this.complete();continue e}rt=[]}else if(221===Ce){if(0!==(At=this.readU32())){this.pushArrayState(At),this.complete();continue e}rt=[]}else if(222===Ce){if(0!==(At=this.readU16())){this.pushMapState(At),this.complete();continue e}rt={}}else if(223===Ce){if(0!==(At=this.readU32())){this.pushMapState(At),this.complete();continue e}rt={}}else if(196===Ce){var At=this.lookU8();rt=this.decodeBinary(At,1)}else if(197===Ce)At=this.lookU16(),rt=this.decodeBinary(At,2);else if(198===Ce)At=this.lookU32(),rt=this.decodeBinary(At,4);else if(212===Ce)rt=this.decodeExtension(1,0);else if(213===Ce)rt=this.decodeExtension(2,0);else if(214===Ce)rt=this.decodeExtension(4,0);else if(215===Ce)rt=this.decodeExtension(8,0);else if(216===Ce)rt=this.decodeExtension(16,0);else if(199===Ce)At=this.lookU8(),rt=this.decodeExtension(At,1);else if(200===Ce)At=this.lookU16(),rt=this.decodeExtension(At,2);else{if(201!==Ce)throw new ke("Unrecognized type byte: "+lt(Ce));At=this.lookU32(),rt=this.decodeExtension(At,4)}this.complete();for(var mn=this.stack;mn.length>0;){var un=mn[mn.length-1];if(0===un.type){if(un.array[un.position]=rt,un.position++,un.position!==un.size)continue e;mn.pop(),rt=un.array}else{if(1===un.type){if("string"!=(Kn=typeof rt)&&"number"!==Kn)throw new ke("The type of key must be string or number but "+typeof rt);if("__proto__"===rt)throw new ke("The key __proto__ is not allowed");un.key=rt,un.type=2;continue e}if(un.map[un.key]=rt,un.readCount++,un.readCount!==un.size){un.key=null,un.type=1;continue e}mn.pop(),rt=un.map}}return rt}var Kn},vt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},vt.prototype.complete=function(){this.headByte=-1},vt.prototype.readArraySize=function(){var Ce=this.readHeadByte();switch(Ce){case 220:return this.readU16();case 221:return this.readU32();default:if(Ce<160)return Ce-144;throw new ke("Unrecognized array type byte: "+lt(Ce))}},vt.prototype.pushMapState=function(Ce){if(Ce>this.maxMapLength)throw new ke("Max length exceeded: map length ("+Ce+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:Ce,key:null,readCount:0,map:{}})},vt.prototype.pushArrayState=function(Ce){if(Ce>this.maxArrayLength)throw new ke("Max length exceeded: array length ("+Ce+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:Ce,array:new Array(Ce),position:0})},vt.prototype.decodeUtf8String=function(Ce,rt){var Lt;if(Ce>this.maxStrLength)throw new ke("Max length exceeded: UTF-8 byte length ("+Ce+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+rt+Ce)throw In;var At,Kn,Hr,mn=this.pos+rt;return At=this.stateIsMapKey()&&(null===(Lt=this.keyDecoder)||void 0===Lt?void 0:Lt.canBeCached(Ce))?this.keyDecoder.decode(this.bytes,mn,Ce):Ce>le?(Hr=this.bytes.subarray(Kn=mn,Kn+Ce),ne.decode(Hr)):W(this.bytes,mn,Ce),this.pos+=rt+Ce,At},vt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},vt.prototype.decodeBinary=function(Ce,rt){if(Ce>this.maxBinLength)throw new ke("Max length exceeded: bin length ("+Ce+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(Ce+rt))throw In;var Lt=this.pos+rt,At=this.bytes.subarray(Lt,Lt+Ce);return this.pos+=rt+Ce,At},vt.prototype.decodeExtension=function(Ce,rt){if(Ce>this.maxExtLength)throw new ke("Max length exceeded: ext length ("+Ce+") > maxExtLength ("+this.maxExtLength+")");var Lt=this.view.getInt8(this.pos+rt),At=this.decodeBinary(Ce,rt+1);return this.extensionCodec.decode(At,Lt,this.context)},vt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},vt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},vt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},vt.prototype.readU8=function(){var Ce=this.view.getUint8(this.pos);return this.pos++,Ce},vt.prototype.readI8=function(){var Ce=this.view.getInt8(this.pos);return this.pos++,Ce},vt.prototype.readU16=function(){var Ce=this.view.getUint16(this.pos);return this.pos+=2,Ce},vt.prototype.readI16=function(){var Ce=this.view.getInt16(this.pos);return this.pos+=2,Ce},vt.prototype.readU32=function(){var Ce=this.view.getUint32(this.pos);return this.pos+=4,Ce},vt.prototype.readI32=function(){var Ce=this.view.getInt32(this.pos);return this.pos+=4,Ce},vt.prototype.readU64=function(){var Ce,rt,Lt=4294967296*(Ce=this.view).getUint32(rt=this.pos)+Ce.getUint32(rt+4);return this.pos+=8,Lt},vt.prototype.readI64=function(){var Ce=f(this.view,this.pos);return this.pos+=8,Ce},vt.prototype.readF32=function(){var Ce=this.view.getFloat32(this.pos);return this.pos+=4,Ce},vt.prototype.readF64=function(){var Ce=this.view.getFloat64(this.pos);return this.pos+=8,Ce},vt}(),Nr={};function Vi(vt,Ce){return void 0===Ce&&(Ce=Nr),new Ar(Ce.extensionCodec,Ce.context,Ce.maxStrLength,Ce.maxBinLength,Ce.maxArrayLength,Ce.maxMapLength,Ce.maxExtLength).decode(vt)}function nu(vt,Ce){return void 0===Ce&&(Ce=Nr),new Ar(Ce.extensionCodec,Ce.context,Ce.maxStrLength,Ce.maxBinLength,Ce.maxArrayLength,Ce.maxMapLength,Ce.maxExtLength).decodeMulti(vt)}var Ka=function(vt,Ce){var rt,Lt,At,mn,un={label:0,sent:function(){if(1&At[0])throw At[1];return At[1]},trys:[],ops:[]};return mn={next:Kn(0),throw:Kn(1),return:Kn(2)},"function"==typeof Symbol&&(mn[Symbol.iterator]=function(){return this}),mn;function Kn(Rr){return function(Hr){return function(Rn){if(rt)throw new TypeError("Generator is already executing.");for(;un;)try{if(rt=1,Lt&&(At=2&Rn[0]?Lt.return:Rn[0]?Lt.throw||((At=Lt.return)&&At.call(Lt),0):Lt.next)&&!(At=At.call(Lt,Rn[1])).done)return At;switch(Lt=0,At&&(Rn=[2&Rn[0],At.value]),Rn[0]){case 0:case 1:At=Rn;break;case 4:return un.label++,{value:Rn[1],done:!1};case 5:un.label++,Lt=Rn[1],Rn=[0];continue;case 7:Rn=un.ops.pop(),un.trys.pop();continue;default:if(!((At=(At=un.trys).length>0&&At[At.length-1])||6!==Rn[0]&&2!==Rn[0])){un=0;continue}if(3===Rn[0]&&(!At||Rn[1]>At[0]&&Rn[1]<At[3])){un.label=Rn[1];break}if(6===Rn[0]&&un.label<At[1]){un.label=At[1],At=Rn;break}if(At&&un.label<At[2]){un.label=At[2],un.ops.push(Rn);break}At[2]&&un.ops.pop(),un.trys.pop();continue}Rn=Ce.call(vt,un)}catch(Xn){Rn=[6,Xn],Lt=0}finally{rt=At=0}if(5&Rn[0])throw Rn[1];return{value:Rn[0]?Rn[1]:void 0,done:!0}}([Rr,Hr])}}},Io=function(vt){return this instanceof Io?(this.v=vt,this):new Io(vt)},Ji=function(vt,Ce,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt,At=rt.apply(vt,Ce||[]),mn=[];return Lt={},un("next"),un("throw"),un("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt;function un(Xn){At[Xn]&&(Lt[Xn]=function(yr){return new Promise(function(yi,ys){mn.push([Xn,yr,yi,ys])>1||Kn(Xn,yr)})})}function Kn(Xn,yr){try{(yi=At[Xn](yr)).value instanceof Io?Promise.resolve(yi.value.v).then(Rr,Hr):Rn(mn[0][2],yi)}catch(ys){Rn(mn[0][3],ys)}var yi}function Rr(Xn){Kn("next",Xn)}function Hr(Xn){Kn("throw",Xn)}function Rn(Xn,yr){Xn(yr),mn.shift(),mn.length&&Kn(mn[0][0],mn[0][1])}};function pa(vt){if(null==vt)throw new Error("Assertion Failure: value must not be null nor undefined")}function Xf(vt){return null!=vt[Symbol.asyncIterator]?vt:function(Ce){return Ji(this,arguments,function(){var rt,Lt,mn;return Ka(this,function(un){switch(un.label){case 0:rt=Ce.getReader(),un.label=1;case 1:un.trys.push([1,,9,10]),un.label=2;case 2:return[4,Io(rt.read())];case 3:return Lt=un.sent(),mn=Lt.value,Lt.done?[4,Io(void 0)]:[3,5];case 4:return[2,un.sent()];case 5:return pa(mn),[4,Io(mn)];case 6:return[4,un.sent()];case 7:return un.sent(),[3,2];case 8:return[3,10];case 9:return rt.releaseLock(),[7];case 10:return[2]}})})}(vt)}function Nh(vt,Ce){return void 0===Ce&&(Ce=Nr),rt=this,void 0,mn=function(){var un;return function(Kn,Rr){var Hr,Rn,Xn,yr,yi={label:0,sent:function(){if(1&Xn[0])throw Xn[1];return Xn[1]},trys:[],ops:[]};return yr={next:ys(0),throw:ys(1),return:ys(2)},"function"==typeof Symbol&&(yr[Symbol.iterator]=function(){return this}),yr;function ys(xu){return function(xn){return function($n){if(Hr)throw new TypeError("Generator is already executing.");for(;yi;)try{if(Hr=1,Rn&&(Xn=2&$n[0]?Rn.return:$n[0]?Rn.throw||((Xn=Rn.return)&&Xn.call(Rn),0):Rn.next)&&!(Xn=Xn.call(Rn,$n[1])).done)return Xn;switch(Rn=0,Xn&&($n=[2&$n[0],Xn.value]),$n[0]){case 0:case 1:Xn=$n;break;case 4:return yi.label++,{value:$n[1],done:!1};case 5:yi.label++,Rn=$n[1],$n=[0];continue;case 7:$n=yi.ops.pop(),yi.trys.pop();continue;default:if(!((Xn=(Xn=yi.trys).length>0&&Xn[Xn.length-1])||6!==$n[0]&&2!==$n[0])){yi=0;continue}if(3===$n[0]&&(!Xn||$n[1]>Xn[0]&&$n[1]<Xn[3])){yi.label=$n[1];break}if(6===$n[0]&&yi.label<Xn[1]){yi.label=Xn[1],Xn=$n;break}if(Xn&&yi.label<Xn[2]){yi.label=Xn[2],yi.ops.push($n);break}Xn[2]&&yi.ops.pop(),yi.trys.pop();continue}$n=Rr.call(Kn,yi)}catch(jr){$n=[6,jr],Rn=0}finally{Hr=Xn=0}if(5&$n[0])throw $n[1];return{value:$n[0]?$n[1]:void 0,done:!0}}([xu,xn])}}}(this,function(Kn){return un=Xf(vt),[2,new Ar(Ce.extensionCodec,Ce.context,Ce.maxStrLength,Ce.maxBinLength,Ce.maxArrayLength,Ce.maxMapLength,Ce.maxExtLength).decodeAsync(un)]})},new((At=void 0)||(At=Promise))(function(un,Kn){function Rr(Xn){try{Rn(mn.next(Xn))}catch(yr){Kn(yr)}}function Hr(Xn){try{Rn(mn.throw(Xn))}catch(yr){Kn(yr)}}function Rn(Xn){var yr;Xn.done?un(Xn.value):(yr=Xn.value,yr instanceof At?yr:new At(function(yi){yi(yr)})).then(Rr,Hr)}Rn((mn=mn.apply(rt,[])).next())});var rt,At,mn}function Zf(vt,Ce){void 0===Ce&&(Ce=Nr);var rt=Xf(vt);return new Ar(Ce.extensionCodec,Ce.context,Ce.maxStrLength,Ce.maxBinLength,Ce.maxArrayLength,Ce.maxMapLength,Ce.maxExtLength).decodeArrayStream(rt)}function Vs(vt,Ce){void 0===Ce&&(Ce=Nr);var rt=Xf(vt);return new Ar(Ce.extensionCodec,Ce.context,Ce.maxStrLength,Ce.maxBinLength,Ce.maxArrayLength,Ce.maxMapLength,Ce.maxExtLength).decodeStream(rt)}function yW(vt,Ce){return void 0===Ce&&(Ce=Nr),Vs(vt,Ce)}return c}()})(IH),(0,Hf.exports)("Int8",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Int16",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Int32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Uint16",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Uint32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Float32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Hf.exports)("Float64",function(n){return function(o,s,c){return n(this,o,s,c)}});const o8=()=>function(n){const o=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(s=>s.charCodeAt(0));return new Uint8Array(o,0,o.length/Uint8Array.BYTES_PER_ELEMENT)}();let PU,lg;function Nx(){return Nx=V(function*(){if(PU)return PU;const n={};let o,s={};for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o]);let c=!1,h=!1;c="object"==typeof window,h="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||h)&&(h?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),n.print||console.log.bind(console);const f=n.printErr||console.warn.bind(console);for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o]);let A;s=null,"object"!=typeof WebAssembly&&Ze("no native wasm support detected");let v=!1;function E(Ye){const lt=n["_"+Ye];return lt||Ze("Assertion failed: Cannot call unknown function "+Ye+", make sure it is exported"),lt}function S(Ye,lt,xt,hn,On){const Gt={string:function(In){let br=0;if(null!=In&&0!==In){const Ar=1+(In.length<<2);br=bt(Ar),function(Ka,Io,Ji,pa){if(!(pa>0))return 0;const Nh=Ji+pa-1;for(let Zf=0;Zf<Ka.length;++Zf){let Vs=Ka.charCodeAt(Zf);if(Vs>=55296&&Vs<=57343&&(Vs=65536+((1023&Vs)<<10)|1023&Ka.charCodeAt(++Zf)),Vs<=127){if(Ji>=Nh)break;Io[Ji++]=Vs}else if(Vs<=2047){if(Ji+1>=Nh)break;Io[Ji++]=192|Vs>>6,Io[Ji++]=128|63&Vs}else if(Vs<=65535){if(Ji+2>=Nh)break;Io[Ji++]=224|Vs>>12,Io[Ji++]=128|Vs>>6&63,Io[Ji++]=128|63&Vs}else{if(Ji+3>=Nh)break;Io[Ji++]=240|Vs>>18,Io[Ji++]=128|Vs>>12&63,Io[Ji++]=128|Vs>>6&63,Io[Ji++]=128|63&Vs}}Io[Ji]=0}(In,x,br,Ar)}return br},array:function(In){const br=bt(In.length);return R.set(In,br),br}},G=E(Ye),ye=[];let Ne=0;if(hn)for(let In=0;In<hn.length;In++){const br=Gt[xt[In]];br?(0===Ne&&(Ne=He()),ye[In]=br(hn[In])):ye[In]=hn[In]}let Ft=G.apply(null,ye);return In=Ft,Ft="string"===lt?(br=In)?function(Nr,Vi,nu){const Ka=Vi+undefined;let Io=Vi,Ji="";for(;Nr[Io]&&!(Io>=Ka);)++Io;if(Io-Vi>16&&Nr.subarray&&w)return w.decode(Nr.subarray(Vi,Io));for(;Vi<Io;){let pa=Nr[Vi++];if(!(128&pa)){Ji+=String.fromCharCode(pa);continue}const Xf=63&Nr[Vi++];if(192==(224&pa)){Ji+=String.fromCharCode((31&pa)<<6|Xf);continue}const Nh=63&Nr[Vi++];if(pa=224==(240&pa)?(15&pa)<<12|Xf<<6|Nh:(7&pa)<<18|Xf<<12|Nh<<6|63&Nr[Vi++],pa<65536)Ji+=String.fromCharCode(pa);else{const Zf=pa-65536;Ji+=String.fromCharCode(55296|Zf>>10,56320|1023&Zf)}}return Ji}(x,br):"":"boolean"===lt?Boolean(In):In,0!==Ne&&ct(Ne),Ft;var In,br}const w=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let R,x,W;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const K=[],ne=[],le=[],me=[];ne.push({func:function(){ln()}});let be=0,ke=null;function Ze(Ye){throw n.onAbort&&n.onAbort(Ye),f(Ye+=""),v=!0,Ye="abort("+Ye+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(Ye)}n.preloadedImages={},n.preloadedAudios={};let Nt="deflate.wasm";var Ye;function kt(Ye){for(;Ye.length>0;){const lt=Ye.shift();if("function"==typeof lt){lt(n);continue}const xt=lt.func;"number"==typeof xt?void 0===lt.arg?W.get(xt)():W.get(xt)(lt.arg):xt(void 0===lt.arg?null:lt.arg)}}Nt.startsWith("data:application/octet-stream;base64,")||(Ye=Nt,Nt=n.locateFile?n.locateFile(Ye,g):g+Ye);const Sn={emscripten_memcpy_big:function(Ye,lt,xt){x.copyWithin(Ye,lt,lt+xt)},emscripten_resize_heap:function(Ye){Ze("OOM")}};yield V(function*(){const Ye={env:Sn,wasi_snapshot_preview1:Sn};function lt(On,Gt){var ye;n.asm=On.exports,A=n.asm.memory,ye=A.buffer,n.HEAP8=R=new Int8Array(ye),n.HEAP16=new Int16Array(ye),n.HEAP32=new Int32Array(ye),n.HEAPU8=x=new Uint8Array(ye),n.HEAPU16=new Uint16Array(ye),n.HEAPU32=new Uint32Array(ye),n.HEAPF32=new Float32Array(ye),n.HEAPF64=new Float64Array(ye),W=n.asm.__indirect_function_table,function(Ne){if(be--,n.monitorRunDependencies&&n.monitorRunDependencies(be),0==be&&ke){const Ft=ke;ke=null,Ft()}}()}if(be++,n.monitorRunDependencies&&n.monitorRunDependencies(be),n.instantiateWasm)try{return n.instantiateWasm(Ye,lt)}catch(On){return f("Module.instantiateWasm callback failed with error: "+On),!1}return yield function hn(On){return new jt((Gt,G)=>{Gt(o8().buffer)}).then(function(Gt){return WebAssembly.instantiate(Gt,Ye)}).then(On,function(Gt){f("failed to asynchronously prepare wasm: "+Gt),Ze(Gt)})}(function xt(On){lt(On.instance)}),{}})();let ln=n.___wasm_call_ctors=function(){return(ln=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},dn=n._malloc=function(){return(dn=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n.___errno_location=function(){return(n.___errno_location=n.asm.__errno_location).apply(null,arguments)},n._zlibCompress=function(){return(n._zlibCompress=n.asm.zlibCompress).apply(null,arguments)};let It,He=n.stackSave=function(){return(He=n.stackSave=n.asm.stackSave).apply(null,arguments)},ct=n.stackRestore=function(){return(ct=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},bt=n.stackAlloc=function(){return(bt=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};function bn(Ye){function lt(){It||(It=!0,n.calledRun=!0,v||(kt(ne),kt(le),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)xt=n.postRun.shift(),me.unshift(xt);var xt;kt(me)}()))}be>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)xt=n.preRun.shift(),K.unshift(xt);var xt;kt(K)}(),be>0||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),lt()},1)):lt()))}if(n.ccall=S,n.cwrap=function(Ye,lt,xt,hn){const On=(xt=xt||[]).every(function(Gt){return"number"===Gt});return"string"!==lt&&On&&!hn?E(Ye):function(){return S(Ye,lt,xt,arguments)}},n.allocate=function(Ye,lt){let xt;return xt=1==lt?bt(Ye.length):dn(Ye.length),x.set(Ye.subarray||Ye.slice?Ye:new Uint8Array(Ye),xt),xt},ke=function Ye(){It||bn(),It||(ke=Ye)},n.run=bn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return bn(),PU=n,n}),Nx.apply(this,arguments)}const fk=Uint8Array.BYTES_PER_ELEMENT,s8={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},a8={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},TH={_message:"m",_type:"t",_id:"id"},NU={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let c8;class Oz{constructor(){X(this,"zlibCompress",void 0)}init(){var o=this;return V(function*(){c8||(c8=(yield V(function*(){return lg||(lg=yield function wH(){return Nx.apply(this,arguments)}()),{zlibCompress:c=>{const h=new Uint8Array(c),g=fk*h.byteLength,f=lg._malloc(g),A=lg._malloc(3*g);for(let S=0;S<g;S++)lg.HEAP8[f/fk+S]=h[S];const v=lg._zlibCompress(f,g,A),E=new Uint8Array(lg.HEAP8.slice(A,A+v));return lg._free(f),lg._free(A),E}}})()).zlibCompress),o.zlibCompress=c8})()}msgPackCompress(o){return IH.exports.encode(o)}compress(o){const s=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(o))),h=this.msgPackCompress(c),g=this.zlibCompress(h),f=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},o),originLength:JSON.stringify(o).length,shortKeyAndValue:c,msgpackSer:h,compressed:f,compressedLength:f.length,time:Date.now()-s}}compressKeyAndValue(o){return this._ObjectKeyCompress(this._typeCompress(o))}_typeCompress(o){const s=o._type;return s?(o._type=NU[s]||s,o):o}_ObjectKeyCompress(o){const s=o._message;if(s){const c=s.stats;c&&(s.stats=this._statsCompress(c)),o._message=this._messageCompress(s)}return this._reportCompress(o)}_statsCompress(o){return this._keyCompress(o,s8)}_messageCompress(o){return this._keyCompress(o,a8)}_reportCompress(o){return this._keyCompress(o,TH)}_keyCompress(o,s){const c={},h=Object.keys(o);return nh(h).call(h,(g,f)=>{const A=o[f];return s[f]?c[s[f]]=A:c[f]=A,c},c),c}}class Dz extends D{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(o){super(),X(this,"lowPriorityQueue",[]),X(this,"highPriorityQueue",[]),X(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=o}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(o){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(o):this.lowPriorityQueue.push(o),this.sendMessage()}sendMessage(){const o=this.queue.length;let s=0;s=o<5?15*o:60+3*(o-4),setTimeout(()=>{this._sendMessage()},s)}_sendMessage(){if(!this.queue.length)return;const o=this.AgoraWebSocketManager.getConnection();if(!o||1!==o.readyState)return;const s=this.queue.shift();return this.lowPriorityQueue.includes(s)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),o.send(s.compressed),s}}var Mx;function u8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}let aS=no("AgoraWebSocketManager","connectionID")(Mx=class extends D{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){["tryNext","recover"].includes(n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,"reconnecting"===this._state?this.emit(Pr.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Pr.CONNECTED):"closed"===this._state?this.emit(Pr.CLOSED):"failed"===this._state&&this.emit(Pr.FAILED))}resetReconnectCount(n){Q.debug("websocket reset reconnect count, reason: "+n),wt("debug",this,"resetReconnectCount",n,"websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,o){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),X(this,"connectionID",0),X(this,"currentURLIndex",0),X(this,"urls",void 0),X(this,"_reconnectMode","tryNext"),X(this,"reconnectReason",void 0),X(this,"_initMutex",new Nu("websocket")),X(this,"name",void 0),X(this,"_state","closed"),X(this,"reconnectInterrupter",void 0),X(this,"websocket",void 0),X(this,"retryConfig",void 0),X(this,"reconnectCount",0),X(this,"forceCloseTimeout",5e3),X(this,"onlineReconnectListener",void 0),X(this,"compressor",new Oz),X(this,"compressorInitStatus","initializing"),X(this,"compress",void 0),X(this,"messageSender",void 0),X(this,"useCompress",void 0),X(this,"tryDoubleDomain",!1),X(this,"wsInflateLength",0),X(this,"wsDeflateLength",0),X(this,"closeEstablishingWs",()=>{}),X(this,"store",void 0),X(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(S){for(var w=1;w<arguments.length;w++){var R=null!=arguments[w]?arguments[w]:{};w%2?u8(Object(R),!0).forEach(function(x){X(S,x,R[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(R)):u8(Object(R)).forEach(function(x){Object.defineProperty(S,x,Object.getOwnPropertyDescriptor(R,x))})}return S}({},o),this.useCompress=s,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:f}=o,A=Math.max(300,Math.floor(3*g/5)),v=Math.max(1.2,Math.floor(8*f)/10);dl.ONLINE&&(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=v),da.on(o1.NETWORK_STATE_CHANGE,(S,w)=>{S!==w&&(this.resetReconnectCount("network state change: ".concat(w," -> ").concat(S)),S===dl.ONLINE?(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=v):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=f))});const E=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const S=Date.now()-E;Q.debug("websocket compressor initialized successfully in ".concat(S,"ms")),wt("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(S,"ms")),Xt.wsCompressorInit({status:!0,ec:null,eventElapse:S}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(S=>{this.compressorInitStatus="failed";const w=S?S.message||S.toString():"Empty Error";Q.debug("websocket compressor failed to initialize because of ".concat(w)),wt("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(w)),Xt.wsCompressorInit({status:!1,ec:w,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(n){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const s=(c,h)=>{this.urls=n;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Dz(this),this.createWebSocketConnection(g).then(c).catch(h),this.once(Pr.CLOSED,()=>h(new F(P.WS_DISCONNECT))),this.once(Pr.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new jt((h,g)=>{s(h,g)}).then(()=>{c()}).catch(()=>{c()}))}close(n,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;o?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,o){if(!this.websocket)return Q.warning("[".concat(this.name,"] can not reconnect, no websocket")),void wt("warning",this,"reconnect","can not reconnect, no websocket");var s;void 0!==n&&(this.reconnectMode=n),Q.debug("[".concat(this.name,"] reconnect is triggered initiative")),wt("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(s=this.store)||void 0===s||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:o})}sendMessageWithJSON(n){const o=JSON.stringify(n);return{compressed:o,compressedLength:o.length,origin:n}}sendMessageWithUint8Array(n){return{compressed:n,compressedLength:n.byteLength,origin:n}}sendMessage(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new F(P.WS_ABORT,"websocket is not ready");try{let c=null;if(s)c=this.sendMessageWithUint8Array(n);else if("initialized"===this.compressorInitStatus&&this.useCompress&&mt("WEBSOCKET_COMPRESS"))try{c=this.compress(n),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(n)}else c=this.sendMessageWithJSON(n);o?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new F(P.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(n,o){var s=this;return V(function*(){return s.connectionID+=1,s.joinChannelServiceRecordIndex=void 0,new jt((c,h)=>{var g;const f=()=>{Q.debug("[".concat(s.name,"] websocket opened:"),n),Yn("debug",["WebSocket",s.connectionID],"open",n),s.reconnectMode="retry",s.state="connected",s.resetReconnectCount("opened"),c()},A=function(){var S=V(function*(w){if(Q.debug("[".concat(s.name,"] websocket close ").concat(s.websocket&&s.websocket.url,", code: ").concat(w.code,", reason: ").concat(w.reason,", current mode: ").concat(s.reconnectMode)),Yn("debug",["WebSocket",s.connectionID],"close",{code:w.code,reason:w.reason,url:s.websocket&&s.websocket.url,reconnectMode:s.reconnectMode}),s.reconnectCount<s.retryConfig.maxRetryCount){"connected"===s.state&&(s.reconnectReason=w.reason,s.state="reconnecting");const R=Ty(s,Pr.WILL_RECONNECT,s.reconnectMode)||s.reconnectMode,x=yield s.reconnectWithAction(R);if("closed"===s.state)return Q.debug("[".concat(s.connectionID,"] ws is closed, no need to reconnect")),void qe("debug",s,"ws is closed, no need to reconnect");if(!x)return h(new F(P.WS_DISCONNECT,"websocket reconnect failed: ".concat(w.code))),void s.close(!0);c()}else h(new F(P.WS_DISCONNECT,"websocket close: ".concat(w.code))),s.close()});return function(R){return S.apply(this,arguments)}}(),v=S=>{s.emit(Pr.ON_MESSAGE,S)};s.websocket&&(s.websocket.onclose=null,s.websocket.close()),mt("GATEWAY_WSS_ADDRESS")&&s.name.startsWith("gateway")&&(n=mt("GATEWAY_WSS_ADDRESS")),Q.debug("[".concat(s.name,"] start connect, url: ").concat(n)),qe("debug",s,"start connect, url: ".concat(n));const E=null===(g=s.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});s.chooseBestWebsocketConnection(n,!!o,E).then(S=>{var w;s.websocket=S,f&&f(),S.onclose=A,S.onmessage=v,null===(w=s.store)||void 0===w||w.recordJoinChannelService({endTs:Date.now(),status:"success"},E),s.joinChannelServiceRecordIndex=E}).catch(S=>{var w;if(null===(w=s.store)||void 0===w||w.recordJoinChannelService({endTs:Date.now(),status:S instanceof F&&S.code===P.WS_ABORT?"aborted":"error",errors:[S]},E),"closed"!==s.state){if(S instanceof F&&S.code===P.WS_ERR){const R=new F(P.WS_ERR,"init websocket failed! Error: ".concat(S.toString()));return Q.error("[".concat(s.name,"]").concat(R)),wt("error",s,"chooseBestWebsocketConnection",void 0,S.toString()),void h(R)}A&&A(S)}else h(new F(P.WS_DISCONNECT,"websocket is closed: ".concat(S.toString())))})})})()}reconnectWithAction(n){var o=arguments,s=this;return V(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];if(s.reconnectCount>=s.retryConfig.maxRetryCount||!s.urls||"closed"===s.state)return!1;s.onlineReconnectListener||da.networkState!==dl.OFFLINE||(s.onlineReconnectListener=da.onlineWaiter&&da.onlineWaiter.then(()=>{s.onlineReconnectListener=void 0}));let h=!0;if(s.reconnectInterrupter=()=>{h=!1},c){const f=ie(s.reconnectCount,s.retryConfig);Q.debug("[".concat(s.name,"] wait ").concat(f,"ms to reconnect websocket, mode: ").concat(n)),wt("debug",s,"reconnectWithAction",{timeout:f,action:n}),yield jt.race([Nc(f),s.onlineReconnectListener||new jt(()=>{})])}if("closed"===s.state||!h)return!1;s.reconnectCount+=1;const g=function(){var f=V(function*(A,v){s.emit(Pr.RECONNECT_CREATE_CONNECTION,v),yield s.createWebSocketConnection(A)});return function(v,E){return f.apply(this,arguments)}}();try{if("retry"===n){const f=s.urls[s.currentURLIndex];s.emit(Pr.RECONNECT_WAITTING_FINISH,n),yield g(f,n)}else if("tryNext"===n){if(s.currentURLIndex+=1,s.currentURLIndex>=s.urls.length)return yield s.reconnectWithAction("recover",!1);Q.debug("[".concat(s.name,"] websocket url length: ").concat(s.urls.length," current index: ").concat(s.currentURLIndex)),qe("debug",s,"websocket url length: ".concat(s.urls.length," current index: ").concat(s.currentURLIndex));const f=s.urls[s.currentURLIndex];s.emit(Pr.RECONNECT_WAITTING_FINISH,n),yield g(f,n)}else if("recover"===n){Q.debug("[".concat(s.name,"] request new urls")),qe("debug",s,"request new urls"),s.resetReconnectCount("recover mode"),s.emit(Pr.RECONNECT_WAITTING_FINISH,n),s.urls=yield Oh(s,Pr.REQUEST_NEW_URLS),s.currentURLIndex=0;const f=s.urls[s.currentURLIndex];yield g(f,n)}return!0}catch(f){return Q.error("[".concat(s.name,"] reconnect failed"),f.toString()),wt("error",s,"reconnectWithAction",void 0,f.toString()),yield s.reconnectWithAction(n,c)}})()}chooseBestWebsocketConnection(n,o,s){var c=this;return V(function*(){return new jt((h,g)=>{let f=!1;const A=[];c.closeEstablishingWs=()=>{Q.debug("[choose-best-ws] close establishing websockets"),A.forEach(K=>{K.onclose=null,K.onopen=null,K.onmessage=null,K.close()}),g(new F(P.WS_ABORT,"choose best websocket aborted"))};const v=mt("GATEWAY_DOMAINS");let E;const S=n.indexOf("?h="),w=v.find(K=>-1!==S?n.includes(K,S):n.includes(K));Q.debug("[choose-best-ws] currentDomain: ",w,", domains: ",v),wt("debug",c,"chooseBestWebsocketConnection",{currentDomain:w,domains:v});let R=!c.tryDoubleDomain||o||!w;if(!R&&w){var x;const K=Date.now();try{v.forEach(ne=>{const le=-1===S?n.replace(w,ne):n.substr(0,S)+n.substr(S).replace(w,ne),me=new WebSocket(le);me.binaryType="arraybuffer",A.push(me),Q.debug("[choose-best-ws] ws is connecting:",me.url),qe("debug",c,"ws is connecting: ".concat(me.url))})}catch{for(Q.debug("[choose-best-ws] ws create failed, fallback to single url"),qe("debug",c,"ws create failed, fallback to single url"),A.forEach(le=>le.close());A.length;)A.pop();R=!0}null===(x=c.store)||void 0===x||x.recordJoinChannelService({urls:A.map(ne=>ne.url),service:"gateway"},s),A.forEach(ne=>{ne.onopen=()=>{if(f)return;const le=Date.now()-K;Q.debug("[choose-best-ws] ws open cost ".concat(le,"ms")),A.filter(me=>me!==ne).forEach(me=>{Q.debug("[choose-best-ws]close backup websocket: ".concat(me.url)),qe("debug",c,"close backup websocket: ".concat(me.url)),me.close()}),f=!0,h(ne)},ne.onclose=le=>{E=le,!f&&(A.find(me=>!(me.readyState===WebSocket.CLOSED||me.readyState===WebSocket.CLOSING))||(Q.debug("[choose-best-ws] all websocket is closed"),qe("debug",c,"all websocket is closed"),f=!0,g(E)))},ne.onmessage=le=>{Q.debug("[choose-best-ws]".concat(ne.url," onmessage: ").concat(le.data)),qe("debug",c,"".concat(ne.url," onmessage: ").concat(le.data))}}),Nc(c.forceCloseTimeout).then(()=>{A.forEach(ne=>{ne.readyState!==WebSocket.OPEN&&ne.close()})})}if(R){var W;let K;Q.debug("[choose-best-ws] use single url: ",n),qe("debug",c,"use single url: ".concat(n)),null===(W=c.store)||void 0===W||W.recordJoinChannelService({urls:[n],service:"gateway"},s);try{K=new WebSocket(n),A.push(K),K.binaryType="arraybuffer"}catch(ne){const le=new F(P.WS_ERR,"init websocket failed! Error: ".concat(ne.toString()));return Q.error("[".concat(c.name,"]").concat(le)),wt("error",c,"chooseBestWebsocketConnection",void 0,ne.toString()),void g(le)}K.onopen=()=>{h(K)},K.onclose=ne=>{g(ne)},K.onmessage=ne=>{Q.debug("[choose-best-ws]".concat(K.url," onmessage: ").concat(ne.data)),qe("debug",c,"".concat(K.url," onmessage: ").concat(ne.data))},Nc(c.forceCloseTimeout).then(()=>{K&&K.readyState!==WebSocket.OPEN&&K.close()})}}).then(h=>(c.closeEstablishingWs=void 0,h)).catch(h=>{throw c.closeEstablishingWs=void 0,h})})()}})||Mx;class l8{constructor(o){X(this,"input",[]),X(this,"size",void 0),this.size=o}add(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)}mean(){var o;return 0===this.input.length?0:nh(o=this.input).call(o,(s,c)=>s+c)/this.input.length}}var d8;let h8=no("AgoraRTCSignal","websocket.connectionID")(d8=class extends D{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===ca.CONNECTED?this.emit(ei.WS_CONNECTED):n===ca.RECONNECTING?this.emit(ei.WS_RECONNECTING,this._websocketReconnectReason):n===ca.CLOSED&&this.emit(ei.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(n,o){super(),X(this,"_disconnectedReason",void 0),X(this,"_websocketReconnectReason",void 0),X(this,"_connectionState",ca.CLOSED),X(this,"reconnectToken",void 0),X(this,"websocket",void 0),X(this,"openConnectionTime",void 0),X(this,"clientId",void 0),X(this,"lastMsgTime",Date.now()),X(this,"uploadCache",[]),X(this,"uploadCacheInterval",void 0),X(this,"rttRolling",new l8(5)),X(this,"pingpongTimer",void 0),X(this,"wsInflateDataTimer",void 0),X(this,"pingpongTimeoutCount",0),X(this,"joinResponse",void 0),X(this,"multiIpOption",void 0),X(this,"initError",void 0),X(this,"spec",void 0),X(this,"store",void 0),X(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(ei.ON_BINARY_DATA,s.data);const c=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Li.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Li.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(aa.UID_BANNED);break;case 15:this.close(aa.IP_BANNED);break;case 16:this.close(aa.CHANNEL_BANNED)}}),this.clientId=n.clientId,this.spec=n,this.store=o,this.websocket=new aS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===ca.CONNECTED&&this.reconnect("retry",Ps.OFFLINE)})}request(n,o,s,c){var h=this;return V(function*(){const g=_s(6,""),f={_id:g,_type:n,_message:o},A=h.websocket.connectionID,v=()=>new jt((W,K)=>{if(h.connectionState===ca.CONNECTED)return W();const ne=()=>{h.off(ei.WS_CLOSED,le),W()},le=()=>{h.off(ei.WS_CONNECTED,ne),K(new F(P.WS_ABORT))};h.once(ei.WS_CONNECTED,ne),h.once(ei.WS_CLOSED,le),n!==ui.PUBLISH&&n!==ui.SUBSCRIBE&&n!==ui.UNSUBSCRIBE&&n!==ui.UNPUBLISH&&n!==ui.CONTROL||h.once(ei.DISCONNECT_P2P,()=>{K(new F(P.DISCONNECT_P2P))}),n===ui.PUBLISH&&h.once(ei.ABORT_P2P_EXECUTION,()=>{K(new F(P.DISCONNECT_P2P))})});if(h.connectionState!==ca.CONNECTING&&h.connectionState!==ca.RECONNECTING||n===ui.JOIN||n===ui.REJOIN||(yield v()),h.websocket.sendMessage(f,!0),c)return;const E=new jt((W,K)=>{let ne=!1;const le=(be,ke)=>{ne=!0,W({isSuccess:"success"===be,message:ke||{}}),h.off(ei.WS_CLOSED,me),h.off(ei.WS_RECONNECTING,me),h.emit(ei.REQUEST_SUCCESS,n,o)};h.once("res-@".concat(g),le);const me=()=>{K(new F(P.WS_ABORT,"type: ".concat(n))),h.off(ei.WS_CLOSED,me),h.off(ei.WS_RECONNECTING,me),h.off("res-@".concat(g),le)};h.once(ei.WS_CLOSED,me),h.once(ei.WS_RECONNECTING,me),Nc(mt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==A||ne||(Q.warning("ws request timeout, type: ".concat(n)),qe("warning",h,"ws request timeout, type: ".concat(n)),h.emit(ei.REQUEST_TIMEOUT,n,o))})});let S=null;try{S=yield E}catch(W){if(h.connectionState===ca.CLOSED||n===ui.LEAVE)throw new F(P.WS_ABORT);return!h.spec.forceWaitGatewayResponse||s?W.throw():n===ui.JOIN||n===ui.REJOIN?null:(yield v(),yield h.request(n,o))}if(S.isSuccess)return S.message;const w=Number(S.message.error_code||S.message.code),R=kU(w),x=new F(P.UNEXPECTED_RESPONSE,"".concat(R.desc,": ").concat(S.message.error_str),{code:w,data:S.message});return"success"===R.action?S.message:(Q.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(w,", message: ").concat(R.desc,", action: ").concat(R.action)),qe("warning",h,"unexpected response from type ".concat(n,", error_code: ").concat(w,", message: ").concat(R.desc,", action: ").concat(R.action)),w===mr.ERR_TOO_MANY_BROADCASTERS?((n===ui.JOIN||n===ui.REJOIN)&&(h.initError=x,h.close()),x.throw()):"failed"===R.action?x.throw():"quit"===R.action?(h.initError=x,h.close(),x.throw()):(w===mr.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=S.message.option,Q.warning("[".concat(h.clientId,"] detect multi ip, recover")),qe("warning",h,"detect multi ip, recover"),h.reconnect("recover",Ps.MULTI_IP)):h.reconnect(R.action,Ps.SERVER_ERROR),n===ui.JOIN||n===ui.REJOIN?null:yield h.request(n,o)))})()}waitMessage(n,o){return new jt(s=>{const c=h=>{(!o||o(h))&&(this.off(n,c),s(h))};this.on(n,c)})}upload(n,o){const s={_type:n,_message:o};try{this.websocket.sendMessage(s)}catch{const h=mt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==ca.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},mt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,o){this.websocket.sendMessage({_type:n,_message:o})}init(n,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new jt((s,c)=>{this.once(ei.WS_CONNECTED,()=>s(this.joinResponse)),this.once(ei.WS_CLOSED,()=>c(this.initError||new F(P.WS_ABORT))),this.connectionState=ca.CONNECTING,this.websocket.init(n).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&void 0===this.openConnectionTime&&(Q.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new F(P.INIT_WEBSOCKET_TIMEOUT)))},mt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||aa.LEAVE,this.connectionState=ca.CLOSED,Q.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===aa.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new aS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var n=this;return V(function*(){if(!n.joinResponse){n.emit(ei.ABORT_P2P_EXECUTION);const o=yield Oh(n,ei.REQUEST_JOIN_INFO),s=yield n.request(ui.JOIN,o);if(!s)return n.emit(ei.REPORT_JOIN_GATEWAY,P.TIMEOUT,n.url||""),!1;n.joinResponse=s,n.emit(ei.JOIN_RESPONSE,n.joinResponse),n.reconnectToken=n.joinResponse.rejoin_token}return n.connectionState=ca.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),!0})()}rejoin(){var n=this;return V(function*(){if(!n.reconnectToken)throw new F(P.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const o=A1(n,ei.REQUEST_REJOIN_INFO);o.token=n.reconnectToken;const s=yield n.request(ui.REJOIN,o);return!!s&&(n.connectionState=ca.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),s.peers&&s.peers.forEach(c=>{n.emit(Li.ON_USER_ONLINE,{uid:c.uid}),c.audio&&n.emit(Li.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&n.emit(Li.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),n.emit(c.audio_mute?Li.MUTE_AUDIO:Li.UNMUTE_AUDIO,{uid:c.uid}),n.emit(c.video_mute?Li.MUTE_VIDEO:Li.UNMUTE_VIDEO,{uid:c.uid}),n.emit(c.audio_enable_local?Li.ENABLE_LOCAL_AUDIO:Li.DISABLE_LOCAL_AUDIO,{uid:c.uid}),n.emit(c.video_enable_local?Li.ENABLE_LOCAL_VIDEO:Li.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||n.emit(Li.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(n,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,o)}handleNotification(n){Q.debug("[".concat(this.clientId,"] receive notification: "),n),wt("debug",this,"handleNotification",n);const o=kU(n.code);if("success"!==o.action)return"failed"===o.action?(Q.error("[".concat(this.clientId,"] ignore error: "),o.desc),void qe("error",this,"ignore error: ".concat(o.desc))):"quit"===o.action?("ERR_REPEAT_JOIN_CHANNEL"===o.desc&&this.close(aa.UID_BANNED),void this.close()):void this.reconnect(o.action,Ps.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=mt("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=n&&(Q.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),qe("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>mt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ps.TIMEOUT):this.request(ui.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),mt("REPORT_STATS")&&this.send(ui.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:o}=this.websocket.getWsInflateData();0!==n&&0!==o&&this.upload(Du.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(Pr.RECONNECT_WAITTING_FINISH,n=>{this.emit(ei.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(Pr.RECONNECT_CREATE_CONNECTION,n=>{this.emit(ei.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Pr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Pr.CLOSED,()=>{this.connectionState=ca.CLOSED}),this.websocket.on(Pr.FAILED,()=>{this._disconnectedReason=aa.NETWORK_ERROR,this.connectionState=ca.CLOSED}),this.websocket.on(Pr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState=this.connectionState===ca.CONNECTED?ca.RECONNECTING:ca.CONNECTING}),this.websocket.on(Pr.WILL_RECONNECT,(n,o)=>{if(A1(this,ei.IS_P2P_DISCONNECTED)&&"retry"===n)return Q.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),qe("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(ei.NEED_RENEW_SESSION),this.emit(ei.DISCONNECT_P2P),o("tryNext");"retry"!==n&&(Q.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),qe("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(ei.NEED_RENEW_SESSION),this.emit(ei.DISCONNECT_P2P)),o(n)}),this.websocket.on(Pr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{Q.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),wt("warning",this,"rejoin",void 0,n.toString()),this.reconnect("tryNext",Ps.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(ei.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof F&&n.code===P.UNEXPECTED_RESPONSE&&n.data.code===mr.ERR_NO_AUTHORIZED)return Q.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),qe("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",Ps.SERVER_ERROR);Q.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),wt("error",this,"join",void 0,n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ps.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(Pr.REQUEST_NEW_URLS,(n,o)=>{Oh(this,ei.REQUEST_RECOVER,this.multiIpOption).then(n).catch(o)})}})||d8;var p8;function f8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Z_(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?f8(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):f8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}const m8=new Map;let kz=no("AgoraRTCGateway","store.clientId")(p8=class extends D{get state(){return this._state}set state(n){if(n===this._state)return;const o=this._state;this._state=n,"DISCONNECTED"===n&&this._disconnectedReason?this.emit(Ns.CONNECTION_STATE_CHANGE,n,o,this._disconnectedReason):this.emit(Ns.CONNECTION_STATE_CHANGE,n,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){Q.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),wt("debug",this,"joinGatewayStartTime",n,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,o){super(),X(this,"store",void 0),X(this,"joinInfo",void 0),X(this,"key",void 0),X(this,"signal",void 0),X(this,"role",void 0),X(this,"inChannelInfo",{joinAt:null,duration:0}),X(this,"spec",void 0),X(this,"_state","DISCONNECTED"),X(this,"_statsCollector",void 0),X(this,"_disconnectedReason",void 0),X(this,"isSignalRecover",!1),X(this,"hasChangeBGPAddress",!1),X(this,"trafficStatsInterval",void 0),X(this,"networkQualityInterval",void 0),X(this,"_joinGatewayStartTime",0),X(this,"_signalTimeout",!1),X(this,"_clientRoleOptions",void 0),X(this,"_isProactiveJoin",!1),this.store=n,this.spec=o,this.signal=new h8(Z_(Z_({},o),{},{retryConfig:o.websocketRetryConfig}),n),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}join(n,o,s){var c=this;return V(function*(){c.store.joinGatewayStart(),"disabled"!==n.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const h=Date.now();let g=m8.get(n.cname);if(g||(g=new Map,m8.set(n.cname,g)),c._isProactiveJoin=!0,g.has(n.uid)){const E=new F(P.UID_CONFLICT);throw Xt.joinGateway(n.sid,{lts:h,succ:!1,ec:E.message,addr:null,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!n.proxyServer}),c._isProactiveJoin=!1,E}g.set(n.uid,!0),c.joinInfo=n,c.key=o;const f=n.proxyServer,A=n.gatewayAddrs.map(f?E=>{const S=E.address.split(":");return"wss://".concat(f,"/ws/?h=").concat(S[0],"&p=").concat(S[1])}:E=>"wss://".concat(E.address));let v=0;c.joinGatewayStartTime=h;try{v=(yield c.signal.init(A,s)).uid}catch(E){throw E&&E.code===P.INIT_WEBSOCKET_TIMEOUT?(Q.warning("[".concat(c.store.clientId,"] User join failed"),E.toString()),E):(Q.error("[".concat(c.store.clientId,"] User join failed"),E.toString()),wt("error",c,"join",void 0,E.toString()),Xt.joinGateway(n.sid,{lts:h,succ:!1,ec:E.message,addr:c.signal.url,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!f}),c._isProactiveJoin=!1,g.delete(n.uid),c.signal.close(),E)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),Q.debug("[".concat(c.store.clientId,"] Connected to gateway server")),wt("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(E=>{Q.warning("[".concat(c.store.clientId,"] get traffic stats error"),E.toString()),wt("warning",c,"trafficStatsInterval",void 0,E.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(Ns.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(Ns.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:$3(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:$3(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),v})()}leave(){var n=arguments,o=this;return V(function*(){let s=n.length>0&&void 0!==n[0]&&n[0],c=n.length>1?n[1]:void 0;if("DISCONNECTED"!==o.state){c!==aa.FALLBACK&&(o.state="DISCONNECTING");try{s||o.signal.connectionState!==ca.CONNECTED||(yield(h=o.signal.request(ui.LEAVE,void 0,!0),3e3,jt.race([h,ZK(3e3)])))}catch(h){Q.warning("[".concat(o.store.clientId,"] leave request failed, ignore"),h),qe("warning",o,"leave request failed, ignore, ".concat(h.toString()))}o.signal.close(c),c!==aa.FALLBACK&&(o.state="DISCONNECTED"),o.reset()}var h})()}publish(n,o,s){var c=this;return V(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new F(P.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const h={state:"offer",p2p_id:c.store.p2pId,ortc:o,mode:c.spec.mode,extend:mt("PUB_EXTEND")};try{return(yield c.signal.request(ui.PUBLISH,h,!0))._message}catch(g){if(s&&g.data&&g.data.code===mr.ERR_PUBLISH_REQUEST_INVALID)return Q.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),qe("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(n,o),c.publish(n,o,!1);throw g}})()}unpublish(n,o){var s=this;return V(function*(){try{if("CONNECTED"!==s.state&&"RECONNECTING"!==s.state)throw new F(P.INVALID_OPERATION,"can not publish when connection state is ".concat(s.state));yield s.signal.request(ui.UNPUBLISH,{stream_id:o,ortc:n},!0)}catch(c){Q.warning("unpublish warning: ",c),wt("warning",s,"unpublish",void 0,c.toString())}})()}subscribe(n,o,s){var c=this;return V(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new F(P.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const h={stream_id:n,stream_type:o.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!mt("SUBSCRIBE_TCC"),extend:mt("SUB_EXTEND"),ssrcId:o.ssrcId};try{return(yield c.signal.request(ui.SUBSCRIBE,h,!0))._message}catch(g){if(s&&g.data&&g.data.code===mr.ERR_SUBSCRIBE_REQUEST_INVALID)return Q.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),qe("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(n,o),yield c.subscribe(n,o,!1);throw g}})()}subscribeAll(n,o){var s=this;return V(function*(){if("CONNECTED"!==s.state&&"RECONNECTING"!==s.state)throw new F(P.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(s.state));const c={p2p_id:s.store.p2pId,users:n,dtx:!1};try{return yield s.signal.request(ui.SUBSCRIBE_STREAMS,c,!0)}catch(h){if(o&&h.data&&h.data.code===mr.ERR_SUBSCRIBE_REQUEST_INVALID)return Q.warning("[".concat(s.store.clientId,"] receiver massSubscribe error code, retry"),h.toString()),qe("warning",s,"receiver massSubscribe error code, retry"),yield s.tryMassUnsubBeforeResub(n),yield s.subscribeAll(n,!1);throw h}})()}setVideoProfile(n){var o=this;return V(function*(){const s=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let h=c.frameRate,g=c.width,f=c.height,A=!0;return"number"!=typeof h&&(h=h.exact||h.ideal||h.max||h.min||0,h||(A=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(A=!1)),"number"!=typeof f&&(f=f.exact||f.ideal||f.max||f.min||0,h||(A=!1)),A?{stream_type:0,width:g,height:f,fps:h,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(n);return s?o.signal.request(ui.SET_VIDEO_PROFILE,s):(Q.debug("[".concat(o.store.clientId,"] encoder config is not complete, do not report to gateway")),void qe("debug",o,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(n,o){var s=this;return V(function*(){try{yield s.signal.request(ui.UNSUBSCRIBE,{p2p_id:s.store.p2pId,ortc:n,stream_id:o},!0)}catch(c){Q.warning("unsubscribe warning: ",c),wt("warning",s,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(n){var o=this;return V(function*(){try{yield o.signal.request(ui.UNSUBSCRIBE_STREAMS,n,!0)}catch(s){Q.warning("unsubscribeAll warning: ",s),wt("warning",o,"unsubscribeAll",void 0,s.toString())}})()}reconnectPC(n){var o=this;return V(function*(){const{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}=n,g=yield o.signal.request(ui.CONNECT_PC,{p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}},!0),f=o.getGatewayIpPort();return{gatewayEstablishParams:g,gatewayIP:f?.ip,gatewayPort:f?.port}})()}getGatewayInfo(){return this.signal.request(ui.GATEWAY_INFO)}renewToken(n){return this.signal.request(ui.RENEW_TOKEN,n)}setClientRole(n,o){var s=this;return V(function*(){if(o&&(s._clientRoleOptions=Object.assign({},o)),"CONNECTED"!==s.state)return void(s.role=n);let c;c="audience"===n?s._clientRoleOptions&&s._clientRoleOptions.level?s._clientRoleOptions.level:2:0,yield s.signal.request(ui.SET_CLIENT_ROLE,{role:n,level:c,client_ts:Date.now()}),s.role=n})()}setRemoteVideoStreamType(n,o){var s=this;return V(function*(){yield s.signal.request(ui.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:o})})()}setDefaultRemoteVideoStreamType(n){var o=this;return V(function*(){yield o.signal.request(ui.DEFAULT_VIDEO_STREAM,{stream_type:n})})()}setStreamFallbackOption(n,o){var s=this;return V(function*(){yield s.signal.request(ui.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:o})})()}pickSVCLayer(n,o){var s=this;return V(function*(){yield s.signal.request(ui.PICK_SVC_LAYER,{stream_id:n,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Z_({},this.inChannelInfo)}getGatewayVersion(){var n=this;return V(function*(){return(yield n.signal.request(ui.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=m8.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(o){const s=o.match(/(wss\:\/\/)?([^:]+):(\d+)/);return s?{username:Pt.username,password:Pt.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Z_(Z_({},Pt),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var n=this;return V(function*(){if("CONNECTED"!==n.state)return;const o=yield n.signal.request(ui.TRAFFIC_STATS,void 0,!0);o.timestamp=Date.now(),o.peer_delay.forEach(s=>{const c=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find(h=>h.peer_uid===s.peer_uid);c&&c.B_st!==s.B_st&&Tp(()=>{n.emit(Ns.STREAM_TYPE_CHANGE,s.peer_uid,s.B_st)})}),n._statsCollector.updateTrafficStats(o)})()}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new F(P.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let s=mt("REPORT_APP_SCENARIO");if("string"!=typeof s)try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const c=Z_({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Xo,browser:navigator.userAgent,process_id:mt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:mt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:mt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:mt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,mt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new F(P.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var n=this;this.signal.on(ei.WS_RECONNECT_WAITTING_FINISH,o=>{["tryNext","recover"].includes(o)&&this.joinInfo&&Xt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(ei.WS_RECONNECT_CREATE_CONNECTION,o=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(ei.WS_RECONNECTING,o=>{this.joinInfo&&Xt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o||Ps.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Xt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(ei.WS_CLOSED,o=>{let s;switch(o){case aa.LEAVE:s=Ps.LEAVE;break;case aa.UID_BANNED:case aa.IP_BANNED:case aa.CHANNEL_BANNED:case aa.SERVER_ERROR:s=Ps.SERVER_ERROR;break;case aa.FALLBACK:s=Ps.FALLBACK;break;default:s=Ps.NETWORK_ERROR}Q.debug("[signal] websocket closed, reason: ".concat(s||"undefined -> "+Ps.NETWORK_ERROR)),Yt("debug",this,"ws_closed","reason: ".concat(o)),this.joinInfo&&Xt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:o===aa.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:s}),this._disconnectedReason=o,o!==aa.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(ei.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Q.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),qe("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Xt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const o=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!o)return Q.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(o)),void qe("error",this,"set local access point after joined failed: ".concat(o));kr("EVENT_REPORT_DOMAIN",o[1]),kr("EVENT_REPORT_BACKUP_DOMAIN",o[1]),kr("LOG_UPLOAD_SERVER","".concat(o[1],":6444"))}}),this.signal.on(Li.ON_UPLINK_STATS,o=>{this._statsCollector.updateUplinkStats(o)}),this.signal.on(ei.REQUEST_RECOVER,(o,s,c)=>{if(!this.joinInfo)return c(new F(P.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));o&&(this.joinInfo.multiIP=o,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Oh(this,Ns.REQUEST_NEW_GATEWAY_LIST).then(s).catch(c)}),this.signal.on(ei.REQUEST_JOIN_INFO,function(){var o=V(function*(s){var c;n.updateTurnConfigFromSignal();const{iceParameters:h,dtlsParameters:g,rtpCapabilities:f}=yield Oh(n,Ns.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=n.joinInfo)||void 0===c?void 0:c.turnServer});s(n.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:g,rtpCapabilities:f,version:"2"}}))});return function(s){return o.apply(this,arguments)}}()),this.signal.on(ei.REQUEST_REJOIN_INFO,o=>{o(this.getRejoinMessage())}),this.signal.on(ei.REPORT_JOIN_GATEWAY,(o,s)=>{this.joinInfo&&(Xt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:o,addr:s,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(ei.IS_P2P_DISCONNECTED,o=>{o(A1(this,Ns.IS_P2P_DISCONNECTED))}),this.signal.on(ei.DISCONNECT_P2P,()=>{this.emit(Ns.DISCONNECT_P2P)}),this.signal.on(ei.NEED_RENEW_SESSION,()=>{this.emit(Ns.NEED_RENEW_SESSION)}),this.signal.on(ei.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(ei.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(ei.JOIN_RESPONSE,o=>{const s=this.getGatewayIpPort();s?this.emit(Ns.JOIN_RESPONSE,o,s.ip,s.port):this.emit(Ns.JOIN_RESPONSE,o)})}tryUnsubBeforeResub(n,o){var s=this;return V(function*(){try{yield s.signal.request(ui.UNSUBSCRIBE,{p2p_id:s.store.p2pId,stream_id:n,ortc:[o]},!0)}catch(c){throw Q.warning("unsubscribe warning",c),wt("warning",s,"tryUnsubBeforeResub",n,c.toString()),c}})()}tryUnpubBeforeRepub(n,o){var s=this;return V(function*(){try{yield s.signal.request(ui.UNPUBLISH,{stream_id:n,ortc:o},!0)}catch(c){throw Q.warning("unpublish warning: ",c),wt("warning",s,"tryUnpubBeforeRepub",n,c.toString()),c}})()}tryMassUnsubBeforeResub(n){var o=this;return V(function*(){const s={users:n.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield o.signal.request(ui.UNSUBSCRIBE_STREAMS,s,!0)}catch(c){throw Q.warning("massUnsubscribe warning",c),wt("warning",o,"tryUnsubAllBeforeResub",n.map(h=>h.stream_id),c.toString()),c}})()}muteLocal(n,o){var s=this;return V(function*(){const c={action:n.find(h=>h.stream_type===ms.Audio)?"mute_local_audio":"mute_local_video",p2p_id:s.store.p2pId,ortc:n,stream_id:o};try{yield s.signal.request(ui.CONTROL,c,!0,!0)}catch(h){throw Q.warning("gateway unmuteLocal warning: ",h),wt("warning",s,"muteLocal",o,h.toString()),h}})()}unmuteLocal(n,o){var s=this;return V(function*(){const c={action:n.find(h=>h.stream_type===ms.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:s.store.p2pId,ortc:n,stream_id:o};try{yield s.signal.request(ui.CONTROL,c,!0,!0)}catch(h){throw Q.warning("gateway muteLocal warning: ",h),wt("warning",s,"unmuteLocal",o,h.toString()),h}})()}uploadStats(n,o){this.signal.upload(n,o)}getSignalRTT(){return this.signal.rtt}restartICE(n){var o=this;return V(function*(){const s={p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:n};try{const c=yield o.signal.request(ui.RESTART_ICE,s,!0),h=o.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:h?.ip,gatewayPort:h?.port}}catch(c){throw Q.warning("P2PChannel.restartICE warning: ",c),wt("warning",o,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Ps.P2P_FAILED)}getGatewayIpPort(){var n;if(!mt("GATEWAY_WSS_ADDRESS")&&null!==(n=this.joinInfo)&&void 0!==n&&n.gatewayAddrs){const o=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(o.ip||o.ip6)&&o.port?o.ip6?{ip:o.ip6,port:o.port}:{ip:o.ip,port:o.port}:void 0}}})||p8;function RH(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function OH(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?RH(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):RH(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}!function(){var n;function o(Ye){var lt=0;return function(){return lt<Ye.length?{done:!1,value:Ye[lt++]}:{done:!0}}}var c,s="function"==typeof Object.defineProperties?Object.defineProperty:function(Ye,lt,xt){return Ye==Array.prototype||Ye==Object.prototype||(Ye[lt]=xt.value),Ye},h=function(Ye){Ye=["object"==typeof globalThis&&globalThis,Ye,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Y&&Y];for(var lt=0;lt<Ye.length;++lt){var xt=Ye[lt];if(xt&&xt.Math==Math)return xt}throw Error("Cannot find global object")}(this);function g(Ye,lt){if(lt)e:{var xt=h;Ye=Ye.split(".");for(var hn=0;hn<Ye.length-1;hn++){var On=Ye[hn];if(!(On in xt))break e;xt=xt[On]}(lt=lt(hn=xt[Ye=Ye[Ye.length-1]]))!=hn&&null!=lt&&s(xt,Ye,{configurable:!0,writable:!0,value:lt})}}function f(Ye){return(Ye={next:Ye})[Symbol.iterator]=function(){return this},Ye}function A(Ye){var lt=typeof Symbol<"u"&&Symbol.iterator&&Ye[Symbol.iterator];return lt?lt.call(Ye):{next:o(Ye)}}if(g("Symbol",function(Ye){function lt(On,Gt){this.A=On,s(this,"description",{configurable:!0,writable:!0,value:Gt})}if(Ye)return Ye;lt.prototype.toString=function(){return this.A};var xt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",hn=0;return function On(Gt){if(this instanceof On)throw new TypeError("Symbol is not a constructor");return new lt(xt+(Gt||"")+"_"+hn++,Gt)}}),g("Symbol.iterator",function(Ye){if(Ye)return Ye;Ye=Symbol("Symbol.iterator");for(var lt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),xt=0;xt<lt.length;xt++){var hn=h[lt[xt]];"function"==typeof hn&&"function"!=typeof hn.prototype[Ye]&&s(hn.prototype,Ye,{configurable:!0,writable:!0,value:function(){return f(o(this))}})}return Ye}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var v;e:{var E={};try{E.__proto__={a:!0},v=E.a;break e}catch{}v=!1}c=v?function(Ye,lt){if(Ye.__proto__=lt,Ye.__proto__!==lt)throw new TypeError(Ye+" is not extensible");return Ye}:null}var S=c;function w(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function R(Ye){if(Ye.m)throw new TypeError("Generator is already running");Ye.m=!0}function x(Ye,lt){return Ye.h=3,{value:lt}}function W(Ye){this.g=new w,this.G=Ye}function K(Ye,lt,xt,hn){try{var On=lt.call(Ye.g.j,xt);if(!(On instanceof Object))throw new TypeError("Iterator result "+On+" is not an object");if(!On.done)return Ye.g.m=!1,On;var Gt=On.value}catch(G){return Ye.g.j=null,Ye.g.s(G),ne(Ye)}return Ye.g.j=null,hn.call(Ye.g,Gt),ne(Ye)}function ne(Ye){for(;Ye.g.h;)try{var lt=Ye.G(Ye.g);if(lt)return Ye.g.m=!1,{value:lt.value,done:!1}}catch(xt){Ye.g.v=void 0,Ye.g.s(xt)}if(Ye.g.m=!1,Ye.g.l){if(lt=Ye.g.l,Ye.g.l=null,lt.F)throw lt.D;return{value:lt.return,done:!0}}return{value:void 0,done:!0}}function le(Ye){this.next=function(lt){return Ye.o(lt)},this.throw=function(lt){return Ye.s(lt)},this.return=function(lt){return function(xt,hn){R(xt.g);var On=xt.g.j;return On?K(xt,"return"in On?On.return:function(Gt){return{value:Gt,done:!0}},hn,xt.g.return):(xt.g.return(hn),ne(xt))}(Ye,lt)},this[Symbol.iterator]=function(){return this}}function me(Ye,lt){return lt=new le(new W(lt)),S&&Ye.prototype&&S(lt,Ye.prototype),lt}if(w.prototype.o=function(Ye){this.v=Ye},w.prototype.s=function(Ye){this.l={D:Ye,F:!0},this.h=this.C||this.u},w.prototype.return=function(Ye){this.l={return:Ye},this.h=this.u},W.prototype.o=function(Ye){return R(this.g),this.g.j?K(this,this.g.j.next,Ye,this.g.o):(this.g.o(Ye),ne(this))},W.prototype.s=function(Ye){return R(this.g),this.g.j?K(this,this.g.j.throw,Ye,this.g.o):(this.g.s(Ye),ne(this))},g("Array.prototype.entries",function(Ye){return Ye||function(){return function(lt,xt){lt instanceof String&&(lt+="");var hn=0,On=!1,Gt={next:function(){if(!On&&hn<lt.length){var G=hn++;return{value:xt(G,lt[G]),done:!1}}return On=!0,{done:!0,value:void 0}}};return Gt[Symbol.iterator]=function(){return Gt},Gt}(this,function(lt,xt){return[lt,xt]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var be=function(Ye,lt){for(var xt=0;xt<Ye.length;xt++)lt(Ye[xt])},ke=function(Ye){return Ye.replace(/\r?\n|\r/g,"\r\n")},Ze=function(Ye,lt,xt){return lt instanceof Blob?(xt=void 0!==xt?String(xt+""):"string"==typeof lt.name?lt.name:"blob",lt.name===xt&&"[object Blob]"!==Object.prototype.toString.call(lt)||(lt=new File([lt],xt)),[String(Ye),lt]):[String(Ye),String(lt)]},Nt=function(Ye,lt){if(Ye.length<lt)throw new TypeError(lt+" argument required, but only "+Ye.length+" present.")},Vt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,kt=Vt.FormData,Sn=Vt.XMLHttpRequest&&Vt.XMLHttpRequest.prototype.send,ln=Vt.Request&&Vt.fetch,dn=Vt.navigator&&Vt.navigator.sendBeacon,It=Vt.Element&&Vt.Element.prototype,He=Vt.Symbol&&Symbol.toStringTag;He&&(Blob.prototype[He]||(Blob.prototype[He]="Blob"),"File"in Vt&&!File.prototype[He]&&(File.prototype[He]="File"));try{new File([],"")}catch{Vt.File=function(lt,xt,hn){return lt=new Blob(lt,hn||{}),Object.defineProperties(lt,{name:{value:xt},lastModified:{value:+(hn&&void 0!==hn.lastModified?new Date(hn.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),He&&Object.defineProperty(lt,He,{value:"File"}),lt}}var ct=function(Ye){return Ye.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},bt=function(Ye){this.i=[];var lt=this;Ye&&be(Ye.elements,function(xt){if(xt.name&&!xt.disabled&&"submit"!==xt.type&&"button"!==xt.type&&!xt.matches("form fieldset[disabled] *"))if("file"===xt.type){var hn=xt.files&&xt.files.length?xt.files:[new File([],"",{type:"application/octet-stream"})];be(hn,function(On){lt.append(xt.name,On)})}else"select-multiple"===xt.type||"select-one"===xt.type?be(xt.options,function(On){!On.disabled&&On.selected&&lt.append(xt.name,On.value)}):"checkbox"===xt.type||"radio"===xt.type?xt.checked&&lt.append(xt.name,xt.value):(hn="textarea"===xt.type?ke(xt.value):xt.value,lt.append(xt.name,hn))})};if((n=bt.prototype).append=function(Ye,lt,xt){Nt(arguments,2),this.i.push(Ze(Ye,lt,xt))},n.delete=function(Ye){Nt(arguments,1);var lt=[];Ye=String(Ye),be(this.i,function(xt){xt[0]!==Ye&&lt.push(xt)}),this.i=lt},n.entries=function Ye(){var lt,xt=this;return me(Ye,function(hn){if(1==hn.h&&(lt=0),3!=hn.h)return lt<xt.i.length?hn=x(hn,xt.i[lt]):(hn.h=0,hn=void 0),hn;lt++,hn.h=2})},n.forEach=function(Ye,lt){Nt(arguments,1);for(var xt=A(this),hn=xt.next();!hn.done;hn=xt.next()){var On=A(hn.value);hn=On.next().value,On=On.next().value,Ye.call(lt,On,hn,this)}},n.get=function(Ye){Nt(arguments,1);var lt=this.i;Ye=String(Ye);for(var xt=0;xt<lt.length;xt++)if(lt[xt][0]===Ye)return lt[xt][1];return null},n.getAll=function(Ye){Nt(arguments,1);var lt=[];return Ye=String(Ye),be(this.i,function(xt){xt[0]===Ye&&lt.push(xt[1])}),lt},n.has=function(Ye){Nt(arguments,1),Ye=String(Ye);for(var lt=0;lt<this.i.length;lt++)if(this.i[lt][0]===Ye)return!0;return!1},n.keys=function Ye(){var lt,xt,Gt=this;return me(Ye,function(G){if(1==G.h&&(lt=A(Gt),xt=lt.next()),3!=G.h)return xt.done?void(G.h=0):x(G,A(xt.value).next().value);xt=lt.next(),G.h=2})},n.set=function(Ye,lt,xt){Nt(arguments,2),Ye=String(Ye);var hn=[],On=Ze(Ye,lt,xt),Gt=!0;be(this.i,function(G){G[0]===Ye?Gt&&(Gt=!hn.push(On)):hn.push(G)}),Gt&&hn.push(On),this.i=hn},n.values=function Ye(){var lt,xt,On,Gt=this;return me(Ye,function(G){if(1==G.h&&(lt=A(Gt),xt=lt.next()),3!=G.h)return xt.done?void(G.h=0):((On=A(xt.value)).next(),x(G,On.next().value));xt=lt.next(),G.h=2})},bt.prototype._asNative=function(){for(var Ye=new kt,lt=A(this),xt=lt.next();!xt.done;xt=lt.next()){var hn=A(xt.value);xt=hn.next().value,hn=hn.next().value,Ye.append(xt,hn)}return Ye},bt.prototype._blob=function(){var Ye="----formdata-polyfill-"+Math.random(),lt=[],xt="--"+Ye+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(hn,On){return"string"==typeof hn?lt.push(xt+ct(ke(On))+'"\r\n\r\n'+ke(hn)+"\r\n"):lt.push(xt+ct(ke(On))+'"; filename="'+ct(hn.name)+'"\r\nContent-Type: '+(hn.type||"application/octet-stream")+"\r\n\r\n",hn,"\r\n")}),lt.push("--"+Ye+"--"),new Blob(lt,{type:"multipart/form-data; boundary="+Ye})},bt.prototype[Symbol.iterator]=function(){return this.entries()},bt.prototype.toString=function(){return"[object FormData]"},It&&!It.matches&&(It.matches=It.matchesSelector||It.mozMatchesSelector||It.msMatchesSelector||It.oMatchesSelector||It.webkitMatchesSelector||function(Ye){for(var lt=(Ye=(this.document||this.ownerDocument).querySelectorAll(Ye)).length;0<=--lt&&Ye.item(lt)!==this;);return-1<lt}),He&&(bt.prototype[He]="FormData"),Sn){var bn=Vt.XMLHttpRequest.prototype.setRequestHeader;Vt.XMLHttpRequest.prototype.setRequestHeader=function(Ye,lt){bn.call(this,Ye,lt),"content-type"===Ye.toLowerCase()&&(this.B=!0)},Vt.XMLHttpRequest.prototype.send=function(Ye){Ye instanceof bt?(Ye=Ye._blob(),this.B||this.setRequestHeader("Content-Type",Ye.type),Sn.call(this,Ye)):Sn.call(this,Ye)}}ln&&(Vt.fetch=function(Ye,lt){return lt&&lt.body&&lt.body instanceof bt&&(lt.body=lt.body._blob()),ln.call(this,Ye,lt)}),dn&&(Vt.navigator.sendBeacon=function(Ye,lt){return lt instanceof bt&&(lt=lt._asNative()),dn.call(this,Ye,lt)}),Vt.FormData=bt}}();let g8=1;function DH(n,o,s,c,h){g8+=1;const g={sid:s.sid,command:"convergeAllocateEdge",uid:"666",appId:s.appId,ts:Math.floor(Date.now()/1e3),seq:g8,requestId:g8,version:Xo,cname:s.cname},f={service_name:o,json_body:JSON.stringify(g)};let A,v,E=n[0];return oe(V(function*(){A=Date.now();const S=yield Rh(E,{data:f,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(v=Date.now()-A,0!==S.code){const x=new F(P.UNEXPECTED_RESPONSE,"live streaming ap error, code"+S.code,{retry:!0,responseTime:v});throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,x.toString()),x}const w=JSON.parse(S.json_body);if(200!==w.code){const x=new F(P.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(w.code,", reason: ").concat(w.reason),{code:w.code,responseTime:v});throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,x.toString()),x}if(!w.servers||0===w.servers.length){const x=new F(P.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:w.code,responseTime:v});throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,x.toString()),x}const R=(W=o,{addressList:(x=w).servers.map(K=>"wss://".concat(K.address.replace(/\./g,"-"),".").concat(mt("WORKER_DOMAIN"),":").concat(K.wss,"?serviceName=").concat(encodeURIComponent(W))),workerToken:x.workerToken,vid:x.vid});var x,W;return mt("LIVE_STREAMING_ADDRESS")&&(R.addressList=mt("LIVE_STREAMING_ADDRESS")instanceof Array?mt("LIVE_STREAMING_ADDRESS"):[mt("LIVE_STREAMING_ADDRESS")]),OH(OH({},R),{},{responseTime:v})}),(S,w)=>(Xt.apworkerEvent(s.sid,{success:!0,sc:200,serviceName:o,responseDetail:JSON.stringify(S.addressList),firstSuccess:0===w,responseTime:v,serverIp:n[w%n.length]}),!1),(S,w)=>(Xt.apworkerEvent(s.sid,{success:!1,sc:S.data&&S.data.code||200,serviceName:o,responseTime:v,serverIp:n[w%n.length]}),!!(S.code!==P.OPERATION_ABORTED&&S.code!==P.UNEXPECTED_RESPONSE||S.data&&S.data.retry)&&(E=n[(w+1)%n.length],!0)),h)}let _8=1;function kH(n,o,s,c){let{url:h,areaCode:g}=n;wt("debug",["AjaxAPI",o.clientId],"requestChooseServer",{url:h,areaCode:g});const f=Date.now(),[A,v]=A8(o,g,[la.CHOOSE_SERVER]);let E=da.networkState;return oe(V(function*(){E&&da.networkState===dl.OFFLINE&&da.onlineWaiter&&(yield jt.race([da.onlineWaiter,Nc(c&&c.maxRetryTimeout||Z.maxRetryTimeout)])),E=da.networkState;const S=yield Rh(h,{data:A,cancelToken:s,headers:{"Content-Type":"multipart/form-data;"}},!0);Xt.reportResourceTiming(h,o.sid),v8(S,h,o,f,[la.CHOOSE_SERVER]);const w=X3(S,la.CHOOSE_SERVER);return mk(w),OQ(w,h)}),S=>(S&&Xt.joinChooseServer(o.sid,{lts:f,succ:!0,csAddr:h,opid:v,serverList:S.gatewayAddrs.map(w=>w.address),ec:null,cid:S.cid.toString(),uid:S.uid.toString(),csIp:S.csIp,unilbsServerIds:[la.CHOOSE_SERVER].toString()}),!1),S=>S.code!==P.OPERATION_ABORTED&&(S.code===P.CAN_NOT_GET_GATEWAY_SERVER?S.data.retry:(Xt.joinChooseServer(o.sid,{lts:f,succ:!1,csAddr:h,serverList:null,opid:v,ec:S.code,csIp:S.data&&S.data.csIp,unilbsServerIds:[la.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:E})}),Q.warning("[".concat(o.clientId,"] Choose server network error, retry"),S),qe("warning",["AjaxAPI",o.clientId],"Choose server network error, retry, ".concat(S)),!0)),c)}function PH(n,o,s,c){let{url:h,areaCode:g,serviceIds:f}=n;wt("debug",["AjaxAPI",o.clientId],"requestMultiUnilbs",{url:h,areaCode:g,serviceIds:f});const A=Date.now(),[v,E]=A8(o,g,f);let S;return oe(V(function*(){S&&da.networkState===dl.OFFLINE&&da.onlineWaiter&&(yield jt.race([da.onlineWaiter,Nc(c&&c.maxRetryTimeout||Z.maxRetryTimeout)])),S=da.networkState;const w=yield Rh(h,{data:v,cancelToken:s,headers:{"Content-Type":"multipart/form-data;"}},!0);Xt.reportResourceTiming(h,o.sid),v8(w,h,o,A,f);const R=X3(w,la.CHOOSE_SERVER),x=X3(w,"proxy5"===o.cloudProxyServer?la.CLOUD_PROXY_5:"proxy3"===o.cloudProxyServer||"proxy4"===o.cloudProxyServer?la.CLOUD_PROXY:la.CLOUD_PROXY_FALLBACK);return mk(R),{gatewayInfo:OQ(R,h),proxyInfo:x,url:h}}),w=>(w.gatewayInfo&&Xt.joinChooseServer(o.sid,{lts:A,succ:!0,csAddr:h,serverList:w.gatewayInfo.gatewayAddrs.map(R=>R.address),ec:null,opid:E,cid:w.gatewayInfo.cid.toString(),uid:w.gatewayInfo.uid.toString(),csIp:w.gatewayInfo.csIp,unilbsServerIds:f.toString()}),w.proxyInfo&&Xt.joinWebProxyAP(o.sid,{lts:A,sucess:1,apServerAddr:h,turnServerAddrList:w.proxyInfo.addresses.map(R=>R.ip).join(","),errorCode:null,eventType:o.cloudProxyServer,unilbsServerIds:f.toString()}),!1),w=>w.code!==P.OPERATION_ABORTED&&(w.code===P.CAN_NOT_GET_GATEWAY_SERVER?w.data.retry:(Xt.joinWebProxyAP(o.sid,{lts:A,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:w.code,eventType:o.cloudProxyServer,unilbsServerIds:f.toString(),extend:JSON.stringify({networkState:S})}),Q.warning("[".concat(o.clientId,"] multi unilbs network error, retry"),w),qe("warning",["AjaxAPI",o.clientId],"multi unilbs network error, retry, ".concat(w)),!0)),c)}const v8=(n,o,s,c,h)=>{const g=[],f=A=>{4096===A.flag?Xt.joinChooseServer(s.sid,{lts:c,succ:!1,csAddr:o,opid:n.opid,serverList:null,ec:A.error.message,csIp:A.error.data&&A.error.data.csIp,unilbsServerIds:h.toString()}):1048576!==A.flag&&4194304!==A.flag&&4194310!==A.flag||Xt.joinWebProxyAP(s.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:A.error.code,eventType:s.cloudProxyServer,unilbsServerIds:h.toString()})};if(n.response_body.forEach(A=>{const v=A.buffer.code;if(23===A.uri&&0===v&&!A.buffer.edges_services)if(4194310===A.buffer.flag)Q.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),A.buffer.edges_services=[];else{const E={error:new F(P.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:A.buffer.flag};g.push(E),f(E)}if(0!==v){const E=pk(v),S={error:new F(P.CAN_NOT_GET_GATEWAY_SERVER,E.desc,{retry:E.retry,csIp:n.detail[502]}),flag:A.buffer.flag};4194310===A.buffer.flag?Q.warning(S.error.toString()):g.push(S),f(S)}}),g.length)throw Q.warning("[".concat(s.clientId,"] multi unilbs ").concat(o," failed, ").concat(g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message,", retry: ").concat(A.error.data.retry)).join(" | "))),wt("warning",["AjaxAPI",s.clientId],"checkMultiUnilbsResponseValid",{url:o},g.map(A=>({flag:A.flag,message:A.error.message,retry:A.error.data.retry}))),new F(P.CAN_NOT_GET_GATEWAY_SERVER,g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message)).join(" | "),{retry:!!g.find(A=>A.error.data.retry),csIp:n.detail[502]})},mk=n=>{if(n.addresses&&0===n.addresses.length&&0===n.code)throw new F(P.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(mt("GATEWAY_ADDRESS")&&mt("GATEWAY_ADDRESS").length>0){Q.debug("assign gateway address to",mt("GATEWAY_ADDRESS")),qe("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(mt("GATEWAY_ADDRESS"))));const o=mt("GATEWAY_ADDRESS").map(s=>({ip:s.ip,port:s.port,ticket:n.addresses[0]&&n.addresses[0].ticket}));n.addresses=o}},NH=(n,o)=>{if(n.response_body&&n.response_body.length){const s=n.response_body[0];if(0!==s.buffer.code){const c=pk(s.buffer.code);throw new F(P.UPDATE_TICKET_FAILED,"[".concat(s.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return s.buffer.ticket}throw Q.debug("update ticket request received ap response without response body:",o),qe("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(o)),new F(P.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},A8=(n,o,s)=>{const c=Math.floor(1e12*Math.random()),h={appid:n.appId,client_ts:Date.now(),opid:c,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:o,12:mt("USE_NEW_TOKEN")?"1":void 0},key:n.token,service_ids:s,uid:n.uid||0}}]};h.request_bodies.forEach(f=>{n.multiIP&&n.multiIP.gateway_ip&&(f.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(h)),[g,c]},MH=(n,o)=>{const s=Math.floor(1e12*Math.random()),c={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:o,uid:n.uid||0,edges_services:n.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},h=new FormData;return h.append("request",JSON.stringify(c)),[h,s]};let MU=0;const gk=()=>{const n=mt("AREAS");return 0===n.length&&n.push(li.GLOBAL),nh(n).call(n,(o,s,c)=>{const h=xH(s);return h?0===c?h:"".concat(o,",").concat(h):o},"")},xH=n=>n===li.OVERSEA?"".concat(ua.ASIA,",").concat(ua.EUROPE,",").concat(ua.AFRICA,",").concat(ua.NORTH_AMERICA,",").concat(ua.SOUTH_AMERICA,",").concat(ua.OCEANIA):ua[n],xx={GLOBAL:{ASIA:[li.CHINA,li.JAPAN,li.INDIA,li.KOREA,li.HKMC],EUROPE:[],NORTH_AMERICA:[li.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},xU=Object.keys(xx[li.GLOBAL]),y8=[li.CHINA,li.NORTH_AMERICA,li.EUROPE,li.ASIA,li.JAPAN,li.INDIA,li.OCEANIA,li.SOUTH_AMERICA,li.AFRICA,li.KOREA,li.HKMC,li.US];function _k(n,o,s,c){return E8.apply(this,arguments)}function E8(){return E8=V(function*(n,o,s,c){return{gatewayInfo:yield(g=V(function*(f,A,v,E){let S=null;const w=[],R=function(){var W=V(function*(){const K=mt("WEBCS_DOMAIN").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map(me=>({url:f.proxyServer?"https://".concat(f.proxyServer,"/ap/?url=").concat(me+"/api/v2/transpond/webrtc?v=2"):"https://".concat(me,"/api/v2/transpond/webrtc?v=2"),areaCode:gk()})),ne=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(me=>me.url)}),le=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:me=>(Q.debug("[".concat(f.clientId,"] Connect to choose_server:"),me.url),kH(me,f,A,v)),allFailedhandler:me=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:me},ne),me[0]},promisesCollector:w});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},ne),le});return function(){return W.apply(this,arguments)}}(),x=function(){var W=V(function*(){if(yield Nc(1e3),null!==S)return S;const K=mt("WEBCS_DOMAIN_BACKUP_LIST").map(me=>({url:f.proxyServer?"https://".concat(f.proxyServer,"/ap/?url=").concat(me+"/api/v2/transpond/webrtc?v=2"):"https://".concat(me,"/api/v2/transpond/webrtc?v=2"),areaCode:gk()})),ne=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:K.map(me=>me.url)}),le=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:K,asyncMapHandler:me=>(Q.debug("[".concat(f.clientId,"] Connect to backup choose_server:"),me.url),kH(me,f,A,v)),allFailedhandler:me=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:me},ne),me[0]},promisesCollector:w});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},ne),le});return function(){return W.apply(this,arguments)}}();try{return S=yield v1([R(),x()]),w.length&&w.forEach(W=>W.cancel&&"function"==typeof W.cancel&&W.cancel()),S}catch(W){throw W[0]}}),function(f,A,v,E){return g.apply(this,arguments)})(n,o,s,c)};var g}),E8.apply(this,arguments)}function b8(n,o,s,c,h){return Lx.apply(this,arguments)}function Lx(){return Lx=V(function*(n,o,s,c,h){const g=n.cloudProxyServer;if("disabled"===g){if(!c)return;if(n.useLocalAccessPoint)return yield _k(n,o,s,h);if(mt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:v}=yield S8(n,o,s,h);return n.turnServer&&"auto"!==n.turnServer.mode?(qe("debug",["Server",n.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:A}):(n.turnServer={mode:"manual",servers:v.map(E=>({turnServerURL:E.address,tcpport:E.tcpport||Pt.tcpport,udpport:E.udpport||Pt.udpport,username:E.username||Pt.username,password:E.password||Pt.password,forceturn:mt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:A})}return yield _k(n,o,s,h)}let f;if(["443only","normal"].includes(g)){let A;c?"normal"!==g?[A,f]=yield jt.all([Fx(n,o,s),_k(n,o,s,h)]):(A=yield Fx(n,o,s),n.proxyServer=A.addresses[0],Xt.setProxyServer(n.proxyServer),Q.setProxyServer(n.proxyServer),ht(n.proxyServer),f=yield _k(n,o,s,h)):(f=void 0,"normal"!==g?A=yield Fx(n,o,s):(A=yield Fx(n,o,s),n.proxyServer=A.addresses[0],Xt.setProxyServer(n.proxyServer),Q.setProxyServer(n.proxyServer),ht(n.proxyServer))),n.turnServer={mode:"manual",servers:A.addresses.map(v=>({turnServerURL:v,tcpport:A.serverResponse.tcpport?A.serverResponse.tcpport:Pt.tcpport,udpport:A.serverResponse.udpport?A.serverResponse.udpport:Pt.udpport,username:A.serverResponse.username||Pt.username,password:A.serverResponse.password||Pt.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:A,gatewayInfo:v}=yield S8(n,o,s,h);f={gatewayInfo:v},n.turnServer={mode:"manual",servers:A.map(E=>({turnServerURL:E.address,tcpport:"proxy3"===g?void 0:E.tcpport?E.tcpport:Pt.tcpport,udpport:"proxy4"===g?void 0:E.udpport?E.udpport:Pt.udpport,username:E.username||Pt.username,password:E.password||Pt.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))}}return Q.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(g)),wt("debug",["Server",n.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:n.proxyServer,mode:n.cloudProxyServer}),f}),Lx.apply(this,arguments)}function Bx(n,o,s,c,h){return LU.apply(this,arguments)}function LU(){return LU=V(function*(n,o,s,c,h){let f=[];f=mt("ACCOUNT_REGISTER").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map(o.proxyServer?v=>"https://".concat(o.proxyServer,"/ap/?url=").concat(v+"/api/v1"):v=>"https://".concat(v,"/api/v1"));const A=h?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:f});try{const v=yield(E=V(function*(S,w,R,x,W){const K=Date.now(),ne={sid:R.sid,opid:10,appid:R.appId,string_uid:w};let le=S[0];const me=yield oe(()=>Rh(le+"".concat(-1===le.indexOf("?")?"?":"&","action=stringuid"),{data:ne,cancelToken:x,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(be,ke)=>{if(0===be.code){if(be.uid<=0||be.uid>=Math.pow(2,32))throw Q.error("Invalid Uint Uid ".concat(w," => ").concat(be.uid),be),wt("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(w," => ").concat(be.uid,", ").concat(be)),Xt.reqUserAccount(ne.sid,{lts:K,success:!1,serverAddr:le,stringUid:ne.string_uid,uid:be.uid,errorCode:P.INVALID_UINT_UID_FROM_STRING_UID,extend:ne}),new F(P.INVALID_UINT_UID_FROM_STRING_UID);return Xt.reqUserAccount(ne.sid,{lts:K,success:!0,serverAddr:le,stringUid:ne.string_uid,uid:be.uid,errorCode:null,extend:ne}),!1}const Ze=pk(be.code);return Ze.retry&&(le=S[(ke+1)%S.length]),Xt.reqUserAccount(ne.sid,{lts:K,success:!1,serverAddr:le,stringUid:ne.string_uid,uid:be.uid,errorCode:Ze.desc,extend:ne}),Ze.retry},(be,ke)=>be.code!==P.OPERATION_ABORTED&&(Xt.reqUserAccount(ne.sid,{lts:K,success:!1,serverAddr:le,stringUid:ne.string_uid,uid:null,errorCode:be.code,extend:ne}),le=S[(ke+1)%S.length],!0),W);if(0!==me.code){const be=pk(me.code);throw new F(P.UNEXPECTED_RESPONSE,be.desc)}return me}),function(S,w,R,x,W){return E.apply(this,arguments)})(f,n,o,s,c);return h?.recordJoinChannelService({status:"success",endTs:Date.now()},A),v.uid}catch(v){throw h?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[v]},A),v}var E}),LU.apply(this,arguments)}function Fx(n,o,s){return BU.apply(this,arguments)}function BU(){return BU=V(function*(n,o,s){let c=Date.now();const h=n.cloudProxyServer,g=mt("normal"===h?"PROXY_CS":"WEBCS_DOMAIN").map(S=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(S+"/api/v1"):"https://".concat(S,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(h)){const S=g.map(x=>({url:x,areaCode:gk()}));let w=null;w=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:S,asyncMapHandler:x=>function(W,K,ne,le){let{url:me,areaCode:be}=W;const ke=Date.now(),Ze={opid:133,flag:"proxy5"===K.cloudProxyServer?4194304:1048576,ts:+new Date,key:K.token,cname:K.cname,sid:K.sid,detail:{6:K.stringUid,11:be},uid:K.uid||0};return oe(V(function*(){return yield Rh(me,{data:Ze,cancelToken:ne,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),Nt=>{if(0===Nt.code)return Xt.joinWebProxyAP(K.sid,{lts:ke,sucess:1,apServerAddr:me,turnServerAddrList:Nt.addresses.map(kt=>kt.ip).join(","),errorCode:null,eventType:K.cloudProxyServer}),!1;const Vt=pk(Nt.code);throw new F(P.CAN_NOT_GET_GATEWAY_SERVER,Vt.desc,{retry:Vt.retry})},Nt=>Nt.code!==P.OPERATION_ABORTED&&(Nt.code===P.CAN_NOT_GET_GATEWAY_SERVER?(Xt.joinWebProxyAP(Ze.sid,{lts:ke,sucess:0,apServerAddr:me,turnServerAddrList:null,errorCode:Nt.code,eventType:K.cloudProxyServer}),Q.warning("[".concat(K.clientId,"] proxy ap server ").concat(me," failed, message: ").concat(Nt.message,", retry: ").concat(Nt.data.retry)),qe("warning",["AjaxAPI",K.clientId],"proxy ap server ".concat(me," failed, message: ").concat(Nt.message,", retry: ").concat(Nt.data.retry)),Nt.data.retry):(Xt.joinWebProxyAP(Ze.sid,{lts:ke,sucess:0,apServerAddr:me,turnServerAddrList:null,errorCode:Nt.code,eventType:K.cloudProxyServer}),!0)),le)}(x,n,o,s),allFailedhandler:()=>{throw Q.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new F(P.CAN_NOT_GET_PROXY_SERVER)}});const R=w.addresses;if(!R||0===R.length)throw Q.error("[".concat(n.clientId,"] can not get proxy server, empty proxy server list")),new F(P.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:R.map(x=>x.ip).map(dx),serverResponse:{tcpport:R[0].port||443,udpport:R[0].port||Pt.udpport,username:Pt.username,password:Pt.password}}}let f=null;f=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:S=>function(w,R,x,W){const K=Date.now(),ne={command:"convergeAllocateEdge",sid:R.sid,appId:R.appId,token:R.token,uid:R.uid,cname:R.cname,ts:Math.floor(Date.now()/1e3),version:Xo,seq:0,requestId:1};return oe(V(function*(){return{res:yield Rh(w,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(ne)},cancelToken:x,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:w}}),le=>{if(!le.res.json_body)throw Q.debug("[".concat(R.clientId,"] Get proxy server failed: no json_body")),wt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new F(P.UNEXPECTED_RESPONSE,JSON.stringify(le.res));const me=JSON.parse(le.res.json_body);if(200!==me.code)throw Q.debug("[".concat(R.clientId,"] Get proxy server failed: response code [").concat(me.code,"], reason [").concat(me.reason,"]")),wt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(me.code,"], reason [").concat(me.reason,"]")),new F(P.UNEXPECTED_RESPONSE,JSON.stringify(le.res));return Q.debug("[".concat(R.clientId,"] App return server length"),me.servers.length),wt("debug",["AjaxAPI",R.clientId],"requestProxyServerList","",{length:me.servers.length}),!1},le=>le.code!==P.OPERATION_ABORTED&&(Xt.requestProxyAppCenter(ne.sid,{lts:K,succ:!1,APAddr:w,workerManagerList:null,ec:le.code,response:le.message}),!0),W)}(S,n,o,s),allFailedhandler:()=>{throw Q.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new F(P.CAN_NOT_GET_PROXY_SERVER)}});const A=JSON.parse(f.res.json_body).servers.map(XK);if("443only"===n.cloudProxyServer)return{addresses:A,serverResponse:{tcpport:443,udpport:Pt.udpport,username:Pt.username,password:Pt.password}};Xt.requestProxyAppCenter(n.sid,{lts:c,succ:!0,APAddr:f.url,workerManagerList:JSON.stringify(A),ec:null,response:JSON.stringify(f.res)}),c=Date.now();const v=A.map(S=>function(w,R,x,W){const K=Date.now();let ne=w;w.startsWith("http")||(ne="https://".concat(w,":4000/v2/machine"));const le={command:"request",gatewayType:"http",appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sdkVersion:"2.3.1",sid:R.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sid:R.sid}};return oe(V(function*(){return{res:yield Rh(ne,{data:le,cancelToken:x}),url:w}}),me=>{if(!me.res.serverResponse)throw new F(P.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},me=>me.code!==P.OPERATION_ABORTED&&(Xt.requestProxyWorkerManager(le.sid,{lts:K,succ:!1,workerManagerAddr:w,ec:me.code,response:me.message}),!0),W)}(S,n,o,s));let E=null;try{E=yield v1(v)}catch{throw Q.error("[".concat(n.clientId,"] can not get worker manager after trying several times")),new F(P.CAN_NOT_GET_PROXY_SERVER)}return v.forEach(S=>S.cancel()),Xt.requestProxyWorkerManager(n.sid,{lts:c,succ:!0,workerManagerAddr:E.url,ec:null,response:JSON.stringify(E.res)}),{addresses:[E.url],serverResponse:E.res.serverResponse}}),BU.apply(this,arguments)}function FU(){return FU=V(function*(n,o,s){const c=mt("CDS_AP").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map(A=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(A+"/api/v1"):"https://".concat(A,"/api/v1?action=config")).map(A=>function(v,E,S,w){const R=Ri(),x={flag:64,cipher_method:0,features:{device:R.name,system:R.os,system_general:navigator.userAgent,vendor:E.appId,version:Xo,cname:E.cname,sid:E.sid,session_id:E.sid,detail:"",proxyServer:E.proxyServer}};return oe(()=>Rh(v,{data:x,timeout:1e3,cancelToken:S,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,W=>W.code!==P.OPERATION_ABORTED,w)}(A,n,o,s));let h=null,g=null,f={};try{h=yield v1(c)}catch(A){if(A.code===P.OPERATION_ABORTED)throw A;g=A}if(c.forEach(A=>A.cancel()),Xt.reportApiInvoke(n.sid,{name:ur.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:h}}).onSuccess(),h&&h.test_tags)try{f=function(A){if(!A.test_tags)return{};const v=A.test_tags,E=Object.keys(v),S={};return E.forEach(w=>{var R;const x=Ad(R=w.slice(4)).call(R),W=JSON.parse(v[w])[1];S[x]=W}),S}(h)}catch{}return f}),FU.apply(this,arguments)}function S8(n,o,s,c){return UU.apply(this,arguments)}function UU(){return UU=V(function*(n,o,s,c){const h=mt("PROXY_SERVER_TYPE3"),g=(x,W)=>{let K=h;return Array.isArray(K)&&(K=W%2==0?h[1]:h[0]),"https://".concat(K,"/ap/?url=").concat(x)};let f=null;const A=[],v=function(){var x=V(function*(){const W=mt("WEBCS_DOMAIN").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map((le,me)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(le,"/api/v2/transpond/webrtc?v=2"):g("".concat(le,"/api/v2/transpond/webrtc?v=2"),me),areaCode:gk(),serviceIds:[la.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?la.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?la.CLOUD_PROXY:la.CLOUD_PROXY_FALLBACK]})),K=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(le=>le.url)}),ne=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:le=>(Q.debug("[".concat(n.clientId,"] Connect to choose_server:"),le.url),PH(le,n,o,s)),allFailedhandler:le=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:le},K),le[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},K),ne});return function(){return x.apply(this,arguments)}}(),E=function(){var x=V(function*(){if(yield Nc(1e3),null!==f)return f;const W=mt("WEBCS_DOMAIN_BACKUP_LIST").map((le,me)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(le,"/api/v2/transpond/webrtc?v=2"):g("".concat(le,"/api/v2/transpond/webrtc?v=2"),me),areaCode:gk(),serviceIds:[la.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?la.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?la.CLOUD_PROXY:la.CLOUD_PROXY_FALLBACK]})),K=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:W.map(le=>le.url)}),ne=yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:W,asyncMapHandler:le=>(Q.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),le.url),PH(le,n,o,s)),allFailedhandler:le=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:le},K),le[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},K),ne});return function(){return x.apply(this,arguments)}}();let S,w,R;try{({gatewayInfo:S,proxyInfo:w,url:R}=yield v1([v(),E()]))}catch(x){throw x[0]}if(A.length&&A.forEach(x=>x.cancel&&"function"==typeof x.cancel&&x.cancel()),!S||!w)throw new F(P.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=R,"disabled"!==n.cloudProxyServer&&Array.isArray(h)&&R){const x=new r8(R).host;h.includes(x)&&(n.proxyServer=x,Q.setProxyServer(x),Xt.setProxyServer(x),ht(x))}return f={gatewayInfo:S,proxyInfo:yield DQ(w,S.uid)},f}),UU.apply(this,arguments)}function FH(n,o,s,c){return VU.apply(this,arguments)}function VU(){return VU=V(function*(n,o,s,c){const h=mt("UAP_AP").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map(g=>o.proxyServer?"https://".concat(o.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield DH(h,n,o,s,c)}),VU.apply(this,arguments)}function Ux(){return Ux=V(function*(n,o,s){const c=mt("UAP_AP").slice(0,mt("AJAX_REQUEST_CONCURRENT")).map(h=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap")).map(h=>function(g,f,A,v){const E={command:"convergeAllocateEdge",sid:f.sid,appId:f.appId,token:f.token,ts:Date.now(),version:Xo,cname:f.cname,uid:f.uid.toString(),requestId:_8,seq:_8};_8+=1;const S={service_name:"tele_channel",json_body:JSON.stringify(E)};return oe(V(function*(){const w=yield Rh(g,{data:S,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==w.code){const x=new F(P.UNEXPECTED_RESPONSE,"cross channel ap error, code"+w.code,{retry:!0});throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,x.toString()),x}const R=JSON.parse(w.json_body);if(200!==R.code){const x=new F(P.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(R.code,", reason: ").concat(R.reason));throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,x.toString()),x}if(!R.servers||0===R.servers.length){const x=new F(P.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw Q.error(x.toString()),wt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,x.toString()),x}return{vid:R.vid,workerToken:R.workerToken,addressList:R.servers.map(x=>"wss://".concat(x.address.replace(/\./g,"-"),".").concat(mt("WORKER_DOMAIN"),":").concat(x.wss))}}),void 0,w=>!!(w.code!==P.OPERATION_ABORTED&&w.code!==P.UNEXPECTED_RESPONSE||w.data&&w.data.retry),v)}(h,n,o,s));try{const h=yield v1(c);return c.forEach(g=>g.cancel()),h}catch(h){throw h[0]}}),Ux.apply(this,arguments)}function C8(){return C8=V(function*(n,o,s){let c=null;const h=[],g=function(){var f=V(function*(A){const v=mt(A?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return A&&(yield Nc(1e3),null!==c)?c:yield y1({fragementLength:mt("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:E=>(Q.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(A?"backup":""," choose_server:"),E),function(S,w,R,x){const[W]=MH(w,[la.CHOOSE_SERVER]);let K=da.networkState;return oe(V(function*(){K&&da.networkState===dl.OFFLINE&&da.onlineWaiter&&(yield jt.race([da.onlineWaiter,Nc(x&&x.maxRetryTimeout||Z.maxRetryTimeout)])),K=da.networkState;const ne=yield Rh(S,{data:W,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return NH(ne,S)}),()=>!1,ne=>ne.code!==P.OPERATION_ABORTED&&(ne.code===P.UPDATE_TICKET_FAILED?ne.data.retry:(Q.warning("[".concat(w.clientId,"] update ticket network error, retry"),ne),qe("warning",["AjaxAPI",w.clientId],"update ticket network error, retry, ".concat(ne)),!0)),x)}(E,n,o,s)),allFailedhandler:E=>{throw E[0]},promisesCollector:h})});return function(v){return f.apply(this,arguments)}}();try{return c=yield v1([g(!1),g(!0)]),h.length&&h.forEach(f=>f.cancel&&"function"==typeof f.cancel&&f.cancel()),c}catch(f){throw f[0]}}),C8.apply(this,arguments)}var jH;function I8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function QH(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?I8(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):I8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let HH=no("ConfigDistributeManager")(jH=class extends D{constructor(){super(),X(this,"configs",void 0),X(this,"joinInfo",void 0),X(this,"cancelToken",void 0),X(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),X(this,"interval",void 0),X(this,"mutex",new Nu("config-distribute")),X(this,"mutableParamsRead",!1)}startGetConfigDistribute(n,o){this.joinInfo=n,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},mt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var n=this;return V(function*(){!n.mutex.isLocked||(yield n.mutex.lock())()})()}updateConfigDistribute(){var n=this;return V(function*(){if(n.mutableParamsRead||(n.mutableParamsRead=!0,Xt.reportApiInvoke(null,{options:void 0,name:ur.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:or.TRACER}).onSuccess(JSON.stringify(Yc))),!n.joinInfo||!n.cancelToken||!n.retryConfig)return Q.debug("[config-distribute] get config distribute interrupted have no joininfo"),void wt("debug",n,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let o;const s=yield n.mutex.lock();try{o=yield function BH(n,o,s){return FU.apply(this,arguments)}(n.joinInfo,n.cancelToken,n.retryConfig),Q.debug("[config-distribute] get config distribute",JSON.stringify(o)),wt("debug",n,"updateConfigDistribute",o),o.limit_bitrate&&n.handleBitrateLimit(o.limit_bitrate),n.cacheGlobalParameterConfig(o),n.configs=o}catch(c){const h=new F(P.NETWORK_RESPONSE_ERROR,c);Q.warning("[config-distribute] ".concat(h.toString())),wt("warning",n,"updateConfigDistribute",void 0,c.toString())}finally{s()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(n){var o;(o=n)&&o.uplink&&o.id&&void 0!==o.uplink.max_bitrate&&void 0!==o.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==n.id&&this.emit(yy.UPDATE_BITRATE_LIMIT,n):this.emit(yy.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&QH({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(n){var o;const s=FF(o=Object.keys(n).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(o);for(let h=0;h<s.length;h++)for(let g=s.length-1;g>h;g--){const f=s[g];if("number"==typeof n[f].__priority){const A=n[f].__priority,v=s[g-1];if("number"==typeof n[v].__priority){if(!(A>n[v].__priority))continue;{const E=f;s[g]=s[g-1],s[g-1]=E}}else{const E=f;s[g]=s[g-1],s[g-1]=E}}}const c={};s.forEach(h=>{const g=n[h],f=g.__expires;Object.keys(g).forEach(A=>{"__priority"===A||"__expires"===A||Object.prototype.hasOwnProperty.call(c,A)||(c[A]=QH({value:g[A]},f&&{expires:f}))})});try{const h=JSON.stringify(c),g=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",g),Q.debug("Caching global parameters ".concat(h)),wt("debug",this,"cacheGlobalParameterConfig",h)}catch(h){Q.error("Error caching global parameters:",h.message),wt("error",this,"cacheGlobalParameterConfig",void 0,h.message)}}})||jH;function w8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function vk(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?w8(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):w8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class GH extends D{constructor(o,s,c,h){super(),X(this,"spec",void 0),X(this,"token",void 0),X(this,"websocket",void 0),X(this,"pingpongTimer",void 0),X(this,"reconnectMode","retry"),X(this,"serviceMode",void 0),X(this,"reqId",0),X(this,"commandReqId",0),X(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),X(this,"handleWebSocketMessage",g=>{if(!g.data)return;const f=JSON.parse(g.data);f.requestId?this.emit("@".concat(f.requestId,"-").concat(f.sid),f):this.serviceMode===fs.INJECT?this.emit(ku.INJECT_STREAM_STATUS,f):(Xt.workerEvent(this.spec.sid,{actionType:"status",serverCode:f.code,workerType:this.serviceMode===fs.TRANSCODE?1:2}),this.emit(ku.PUBLISH_STREAM_STATUS,f))}),this.spec=s,this.token=o,this.serviceMode=h,this.websocket=new aS("live-streaming",c),this.websocket.on(Pr.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Pr.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Pr.REQUEST_NEW_URLS,(g,f)=>{Oh(this,ku.REQUEST_NEW_ADDRESS).then(g).catch(f)}),this.websocket.on(Pr.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(o){return this.websocket.init(o)}request(o,s,c,h){var g=this;return V(function*(){g.reqId+=1,"request"===o&&(g.commandReqId+=1);const f=g.commandReqId,A=g.reqId;if(!A||!g.websocket)throw new F(P.UNEXPECTED_ERROR);const v=vk({command:o,sdkVersion:"4.12.1"===Xo?"0.0.1":Xo,seq:A,requestId:A,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},s);if("closed"===g.websocket.state)throw new F(P.WS_DISCONNECT);const E=()=>new jt((x,W)=>{g.websocket.once(Pr.CLOSED,()=>W(new F(P.WS_ABORT))),g.websocket.once(Pr.CONNECTED,x)});"connected"!==g.websocket.state&&(yield E()),v.clientRequest&&(v.clientRequest.workerToken=g.token);const S=new jt((x,W)=>{const K=()=>{W(new F(P.WS_ABORT))};g.websocket.once(Pr.RECONNECTING,K),g.websocket.once(Pr.CLOSED,K),g.once("@".concat(A,"-").concat(g.spec.sid),ne=>{x(ne)})});h&&Xt.workerEvent(g.spec.sid,vk(vk({},h),{},{requestId:f,actionType:"request",payload:JSON.stringify(s.clientRequest),serverCode:0,code:0}));const w=Date.now();g.websocket.sendMessage(v);let R=null;try{R=yield S}catch(x){if("closed"===g.websocket.state)throw x;return yield E(),yield g.request(o,s,c)}return h&&Xt.workerEvent(g.spec.sid,vk(vk({},h),{},{requestId:f,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:200===R.code,responseTime:Date.now()-w})),200!==R.code&&g.handleResponseError(R),R})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const o="4.12.1"===Xo?"0.0.1":Xo;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:o,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(o){switch(o.code){case Po.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Q.warning("live stream response already exists stream");case Po.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Po.LIVE_STREAM_RESPONSE_BAD_STREAM:case Po.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new F(P.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:o.code}).throw();case Po.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Po.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new F(P.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:o.code}).throw();case Po.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const s=new F(P.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ku.WARNING,s,o.serverResponse.url)}case Po.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const s=new F(P.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ku.WARNING,s,o.serverResponse.url)}case Po.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Po.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new F(P.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:o.code}).throw();case Po.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const s=new F(P.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ku.WARNING,s,o.serverResponse.url)}case Po.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code}).throw();case Po.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Po.LIVE_STREAM_RESPONSE_WORKER_LOST:case Po.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Po.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;if("UpdateTranscoding"===o.serverResponse.command||"ControlStream"===o.serverResponse.command)return new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:o.code}).throw();throw new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Po.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new F(P.LIVE_STREAMING_CDN_ERROR,"",{code:o.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(eU)},6e3)}}function T8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Mu(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?T8(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):T8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class WH extends D{constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z;super(),X(this,"onLiveStreamWarning",void 0),X(this,"onLiveStreamError",void 0),X(this,"onInjectStatusChange",void 0),X(this,"spec",void 0),X(this,"retryTimeout",1e4),X(this,"connection",void 0),X(this,"httpRetryConfig",void 0),X(this,"wsRetryConfig",void 0),X(this,"streamingTasks",new Map),X(this,"isStartingStreamingTask",!1),X(this,"taskMutex",new Nu("live-streaming")),X(this,"cancelToken",I.CancelToken.source()),X(this,"transcodingConfig",void 0),X(this,"injectConfig",Mu({},yM)),X(this,"injectLoopTimes",0),X(this,"uapResponse",void 0),X(this,"lastTaskId",1),X(this,"statusError",new Map),this.spec=o,this.httpRetryConfig=c,this.wsRetryConfig=s}setTranscodingConfig(o){var s=this;return V(function*(){const c=Mu(Mu({},wD),o);var A;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(Q.debug("[".concat(s.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(A=>Mu(Mu(Mu({},w7),A),{},{zOrder:A.zOrder?A.zOrder+1:1}))),vo((A=c).width)||qr(A.width,"config.width",0,1e4),vo(A.height)||qr(A.height,"config.height",0,1e4),vo(A.videoBitrate)||qr(A.videoBitrate,"config.videoBitrate",1,1e6),vo(A.videoFrameRate)||qr(A.videoFrameRate,"config.videoFrameRate"),vo(A.lowLatency)||Uf(A.lowLatency,"config.lowLatency"),vo(A.audioSampleRate)||ja(A.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),vo(A.audioBitrate)||qr(A.audioBitrate,"config.audioBitrate",1,128),vo(A.audioChannels)||ja(A.audioChannels,"config.audioChannels",[1,2,3,4,5]),vo(A.videoGop)||qr(A.videoGop,"config.videoGop"),vo(A.videoCodecProfile)||ja(A.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),vo(A.userCount)||qr(A.userCount,"config.userCount",0,17),vo(A.backgroundColor)||qr(A.backgroundColor,"config.backgroundColor",0,16777215),vo(A.userConfigExtraInfo)||Jc(A.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),A.transcodingUsers&&!vo(A.transcodingUsers)&&(t1(A.transcodingUsers,"config.transcodingUsers"),A.transcodingUsers.forEach((v,E)=>{mM(v.uid),vo(v.x)||qr(v.x,"transcodingUser[".concat(E,"].x"),0,1e4),vo(v.y)||qr(v.y,"transcodingUser[".concat(E,"].y"),0,1e4),vo(v.width)||qr(v.width,"transcodingUser[".concat(E,"].width"),0,1e4),vo(v.height)||qr(v.height,"transcodingUser[".concat(E,"].height"),0,1e4),vo(v.zOrder)||qr(v.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),vo(v.alpha)||qr(v.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),vo(A.watermark)||ID(A.watermark,"watermark"),vo(A.backgroundImage)||ID(A.backgroundImage,"backgroundImage"),A.images&&!vo(A.images)&&(t1(A.images,"config.images"),A.images.forEach((v,E)=>{ID(v,"images[".concat(E,"]"))}));const h=[];c.images&&h.push(...c.images.map(A=>Mu(Mu(Mu({},GF),A),{},{zOrder:255}))),c.backgroundImage&&(h.push(Mu(Mu(Mu({},GF),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(h.push(Mu(Mu(Mu({},GF),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=h,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(A=>Mu({},A)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(A=>"number"==typeof A.uid?jt.resolve(A.uid):Bx(A.uid,s.spec,s.cancelToken.token,s.httpRetryConfig));if((yield jt.all(g)).forEach((A,v)=>{c.userConfigs&&c.userConfigs[v]&&(c.userConfigs[v].uid=A)}),s.transcodingConfig=c,s.connection)try{var f;const A=yield s.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:s.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(K_(f=s.streamingTasks).call(f)).map(v=>v.taskId).join("#")});Q.debug("[".concat(s.spec.clientId,"] update live transcoding config success, code: ").concat(A.code,", config:"),JSON.stringify(s.transcodingConfig))}catch(A){if(!A.data||!A.data.retry)throw A;A.data.changeAddress&&s.connection.tryNextAddress(),s.streamingTasks.forEach(v=>{Q.warning("[".concat(s.spec.clientId,"] live streaming receive error"),A.toString(),"try to republish",v.url),s.startLiveStreamingTask(v.url,v.mode,A).then(()=>{Q.debug("[".concat(s.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(E=>{Q.error("[".concat(s.spec.clientId,"] live streaming republish failed"),v.url,E.toString()),s.onLiveStreamError&&s.onLiveStreamError(v.url,E)})})}})()}setInjectStreamConfig(o,s){this.injectConfig=Object.assign({},this.injectConfig,o),this.injectLoopTimes=s}startLiveStreamingTask(o,s,c){var h=this;return V(function*(){var g;if(Array.from(K_(g=h.streamingTasks).call(g)).find(E=>E.mode===fs.INJECT)&&s===fs.INJECT)return new F(P.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!h.transcodingConfig&&s===fs.TRANSCODE)throw new F(P.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let f={command:"PublishStream",ts:Date.now(),url:o,uid:h.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Q.debug("[".concat(h.spec.clientId,"] start live streaming ").concat(o,", mode: ").concat(s));const A=yield h.taskMutex.lock();if(!h.connection&&c)return void A();if(h.streamingTasks.get(o)&&!c)return A(),new F(P.LIVE_STREAMING_TASK_CONFLICT).throw();try{h.connection||(h.connection=yield h.connect(s))}catch(E){throw A(),E}switch(s){case fs.TRANSCODE:f.transcodingConfig=Mu({},h.transcodingConfig);break;case fs.RAW:break;case fs.INJECT:f={cname:h.spec.cname,command:"InjectStream",sid:h.spec.sid,transcodingConfig:h.injectConfig,ts:Date.now(),url:o,loopTimes:h.injectLoopTimes}}h.uapResponse&&h.uapResponse.vid&&(f.vid=h.uapResponse.vid),h.isStartingStreamingTask=!0;const v=h.lastTaskId++;try{const E=new jt((w,R)=>{Nc(h.retryTimeout).then(()=>{if(c)return R(c);const x=h.statusError.get(o);return x?(h.statusError.delete(o),R(x)):void 0})}),S=yield jt.race([h.connection.request("request",{clientRequest:f},!0,{url:o,command:"PublishStream",workerType:s===fs.TRANSCODE?1:2,requestByUser:!c,tid:v.toString()}),E]);h.isStartingStreamingTask=!1,Q.debug("[".concat(h.spec.clientId,"] live streaming started, code: ").concat(S.code)),h.streamingTasks.set(o,{clientRequest:f,mode:s,url:o,taskId:v}),A()}catch(E){if(A(),h.isStartingStreamingTask=!1,!E.data||!E.data.retry||c)throw E;return E.data.changeAddress?(h.connection.tryNextAddress(),yield h.startLiveStreamingTask(o,s,E)):yield h.startLiveStreamingTask(o,s,E)}})()}stopLiveStreamingTask(o){return new jt((s,c)=>{const h=this.streamingTasks.get(o);if(!h||!this.connection)return new F(P.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=h.mode;h.abortTask=()=>{Q.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(o),s()},this.connection.request("request",{clientRequest:{command:g===fs.INJECT?"UninjectStream":"UnpublishStream",url:h.url}},!1,{url:o,command:"UnPublishStream",workerType:g===fs.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(f=>{Q.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(f.code)),this.streamingTasks.delete(o),0===this.streamingTasks.size&&g!==fs.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),s(),g===fs.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,o)}).catch(c)})}controlInjectStream(o,s,c,h){var g=this;return V(function*(){const f=g.streamingTasks.get(o);if(!f||!g.connection||f.mode!==fs.INJECT)throw new F(P.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:o,control:s,audioVolume:c,position:h}})).serverResponse})()}resetAllTask(){var o;const s=Array.from(K_(o=this.streamingTasks).call(o));this.terminate();for(const c of s)this.startLiveStreamingTask(c.url,c.mode).catch(h=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,h)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=I.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(o){var s=this;return V(function*(){if(s.connection)throw new F(P.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield Oh(s,ng.REQUEST_WORKER_MANAGER_LIST,o);return s.uapResponse=c,s.connection=new GH(c.workerToken,s.spec,s.wsRetryConfig,o),s.connection.on(ku.WARNING,(h,g)=>s.onLiveStreamWarning&&s.onLiveStreamWarning(g,h)),s.connection.on(ku.PUBLISH_STREAM_STATUS,h=>s.handlePublishStreamServer(h)),s.connection.on(ku.INJECT_STREAM_STATUS,h=>s.handleInjectStreamServerStatus(h)),s.connection.on(ku.REQUEST_NEW_ADDRESS,(h,g)=>{if(!s.connection)return g(new F(P.UNEXPECTED_ERROR,"can not get new live streaming address list"));Oh(s,ng.REQUEST_WORKER_MANAGER_LIST,o).then(f=>{s.uapResponse=f,h(f.addressList)}).catch(g)}),yield s.connection.init(c.addressList),s.connection})()}handlePublishStreamServer(o){const s=o.serverStatus&&o.serverStatus.url||"empty_url",c=this.streamingTasks.get(s),h=o.reason;switch(o.code){case Po.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Po.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const f=new F(P.LIVE_STREAMING_CDN_ERROR,"",{code:o.code});if(c)return Q.error(f.toString()),this.onLiveStreamError&&this.onLiveStreamError(s,f);if(!this.isStartingStreamingTask)return;this.statusError.set(s,f)}case Po.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const f=new F(P.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,h);return this.onLiveStreamWarning&&this.onLiveStreamWarning(s,f)}case Po.LIVE_STREAM_RESPONSE_WORKER_LOST:case Po.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const f=Array.from(K_(g=this.streamingTasks).call(g));for(const A of f)A.abortTask?A.abortTask():(Q.warning("[".concat(this.spec.clientId,"] publish stream status code"),o.code,"try to republish",A.url),this.startLiveStreamingTask(A.url,A.mode,new F(P.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code})).then(()=>{Q.debug("[".concat(this.spec.clientId,"] republish live stream success"),A.url)}).catch(v=>{Q.error(v.toString()),this.onLiveStreamError&&this.onLiveStreamError(A.url,v)}));return}}}handleInjectStreamServerStatus(o){const s=Number(o.uid),c=o.serverStatus&&o.serverStatus.url;switch(o.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_START_SUCCESS,s,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,s,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_START_UNAUTHORIZED,s,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_BROKEN,s,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Ay.INJECT_STREAM_STATUS_START_TIMEOUT,s,c),void this.streamingTasks.delete(c);default:return void Q.debug("inject stream server status",o)}}hasUrl(o){return this.streamingTasks.has(o)}}class jU{constructor(){X(this,"destChannelMediaInfos",new Map),X(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(o){r1(o),this.srcChannelMediaInfo=o}addDestChannelInfo(o){r1(o),this.destChannelMediaInfos.set(o.channelName,o)}removeDestChannelInfo(o){fM(o),this.destChannelMediaInfos.delete(o)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function R8(n){if(!(n instanceof jU))return new F(P.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const o=n.getSrcChannelMediaInfo(),s=n.getDestChannelMediaInfo();return o?0===s.size?new F(P.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new F(P.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class KH extends D{constructor(o,s,c){super(),X(this,"ws",void 0),X(this,"requestId",1),X(this,"heartBeatTimer",void 0),X(this,"joinInfo",void 0),X(this,"clientId",void 0),X(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),X(this,"onClose",h=>{this.emit("close"),this.dispose()}),X(this,"onMessage",h=>{const g=JSON.parse(h.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=o,this.clientId=s,this.ws=new aS("cross-channel-".concat(this.clientId),c),this.ws.on(Pr.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Pr.CONNECTED,this.onOpen),this.ws.on(Pr.ON_MESSAGE,this.onMessage),this.ws.on(Pr.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(o){const s=this.requestId++;return o.requestId=s,o.seq=s,this.ws.sendMessage(o),s}waitStatus(o){return new jt((s,c)=>{const h=window.setTimeout(()=>{c(new F(P.TIMEOUT,"wait status timeout, status: ".concat(o)))},5e3);this.once(o,g=>{window.clearTimeout(h),g.state&&0!==g.state?c(new F(P.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(o))):s(void 0)}),this.once("dispose",()=>{window.clearTimeout(h),c(new F(P.WS_ABORT))})})}request(o){var s=this;return V(function*(){if("closed"===s.ws.state)throw new F(P.WS_DISCONNECT);"connected"!==s.ws.state&&(yield new jt((A,v)=>{s.ws.once(Pr.CLOSED,()=>v(new F(P.WS_ABORT))),s.ws.once(Pr.CONNECTED,A)}));const h=s.sendMessage(o),g=new jt((A,v)=>{const E=()=>{v(new F(P.WS_ABORT))};s.ws.once(Pr.RECONNECTING,E),s.ws.once(Pr.CLOSED,E),s.once("req_".concat(h),A),Nc(3e3).then(()=>{s.removeAllListeners("req_".concat(h)),s.ws.off(Pr.RECONNECTING,E),s.ws.off(Pr.CLOSED,E),v(new F(P.TIMEOUT,"cross channel ws request timeout"))})}),f=yield g;if(!f||200!==f.code)throw new F(P.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(f)));return f})()}connect(o){var s=this;return V(function*(){s.ws.removeAllListeners(Pr.REQUEST_NEW_URLS),s.ws.on(Pr.REQUEST_NEW_URLS,c=>{c(o)}),yield s.ws.init(o)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(o){const s=this.requestId++;return o.requestId=s,this.ws.sendMessage(o),s}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class Vx extends D{set state(o){o!==this._state&&(o!==uc.RELAY_STATE_FAILURE&&(this.errorCode=V_.RELAY_OK),this.emit("state",o,this.errorCode),this._state=o)}get state(){return this._state}constructor(o,s,c,h){var g;super(),g=this,X(this,"joinInfo",void 0),X(this,"clientId",void 0),X(this,"cancelToken",I.CancelToken.source()),X(this,"workerToken",void 0),X(this,"requestId",0),X(this,"signal",void 0),X(this,"prevChannelMediaConfig",void 0),X(this,"httpRetryConfig",void 0),X(this,"_state",uc.RELAY_STATE_IDLE),X(this,"errorCode",V_.RELAY_OK),X(this,"onStatus",f=>{Q.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(f))),f&&f.command&&("onAudioPacketReceived"===f.command&&this.emit("event",Vf.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===f.command&&this.emit("event",Vf.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===f.command&&(this.errorCode=V_.SRC_TOKEN_EXPIRED,this.state=uc.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===f.command&&(this.errorCode=V_.DEST_TOKEN_EXPIRED,this.state=uc.RELAY_STATE_FAILURE))}),X(this,"onReconnect",V(function*(){Q.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",Vf.NETWORK_DISCONNECTED),g.state=uc.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(f=>{g.state!==uc.RELAY_STATE_IDLE&&(Q.error("auto restart channel media relay failed",f.toString()),g.errorCode=V_.SERVER_CONNECTION_LOST,g.state=uc.RELAY_STATE_FAILURE)})})),this.joinInfo=o,this.clientId=s,this.signal=new KH(this.joinInfo,this.clientId,c),this.httpRetryConfig=h}startChannelMediaRelay(o){var s=this;return V(function*(){if(s.state!==uc.RELAY_STATE_IDLE)throw new F(P.INVALID_OPERATION);s.state=uc.RELAY_STATE_CONNECTING,yield s.connect(),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: connect success"));try{yield s.sendStartRelayMessage(o)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new F(P.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new F(P.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new F(P.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}s.prevChannelMediaConfig=o})()}updateChannelMediaRelay(o){var s=this;return V(function*(){if(s.state!==uc.RELAY_STATE_RUNNING)throw new F(P.INVALID_OPERATION);yield s.sendUpdateMessage(o),s.prevChannelMediaConfig=o})()}stopChannelMediaRelay(){var o=this;return V(function*(){yield o.sendStopRelayMessage(),Q.debug("[".concat(o.clientId,"] stopChannelMediaRelay: send stop message success")),o.state=uc.RELAY_STATE_IDLE,o.dispose()})()}dispose(){Q.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=I.CancelToken.source(),this.state=uc.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var o=this;return V(function*(){const s=yield function UH(n,o,s){return Ux.apply(this,arguments)}(o.joinInfo,o.cancelToken.token,o.httpRetryConfig);o.workerToken=s.workerToken,yield o.signal.connect(s.addressList),o.emit("event",Vf.NETWORK_CONNECTED),o.signal.on("status",o.onStatus),o.signal.on("reconnecting",o.onReconnect)})()}sendStartRelayMessage(o){var s=this;return V(function*(){const c=s.genMessage(cc.StopPacketTransfer);yield s.signal.request(c),yield s.signal.waitStatus("Normal Quit"),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const h=s.genMessage(cc.SetSdkProfile,o);yield s.signal.request(h),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=s.genMessage(cc.SetSourceChannel,o);yield s.signal.request(g),yield s.signal.waitStatus("SetSourceChannelStatus"),s.emit("event",Vf.PACKET_JOINED_SRC_CHANNEL),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const f=s.genMessage(cc.SetSourceUserId,o);yield s.signal.request(f),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const A=s.genMessage(cc.SetDestChannel,o);yield s.signal.request(A),yield s.signal.waitStatus("SetDestChannelStatus"),s.emit("event",Vf.PACKET_JOINED_DEST_CHANNEL),Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=s.genMessage(cc.StartPacketTransfer,o);yield s.signal.request(v),s.emit("event",Vf.PACKET_SENT_TO_DEST_CHANNEL),s.state=uc.RELAY_STATE_RUNNING,Q.debug("[".concat(s.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(o){var s=this;return V(function*(){const c=s.genMessage(cc.UpdateDestChannel,o);yield s.signal.request(c),s.emit("event",Vf.PACKET_UPDATE_DEST_CHANNEL),Q.debug("[".concat(s.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var o=this;return V(function*(){const s=o.genMessage(cc.StopPacketTransfer);yield o.signal.request(s),Q.debug("[".concat(o.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(o,s){const c=[],h=[],g=[];this.requestId+=1;const f={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Xo,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===f.sdkVersion&&(f.sdkVersion="0.0.1");let A=null,v=null;switch(o){case cc.SetSdkProfile:return f.clientRequest={command:"SetSdkProfile",type:"multi_channel"},f;case cc.SetSourceChannel:if(v=s&&s.getSrcChannelMediaInfo(),!v)throw new F(P.UNEXPECTED_ERROR,"can not find source config");return f.clientRequest={command:"SetSourceChannel",uid:"0",channelName:v.channelName,token:v.token||this.joinInfo.appId},f;case cc.SetSourceUserId:if(v=s&&s.getSrcChannelMediaInfo(),!v)throw new F(P.UNEXPECTED_ERROR,"can not find source config");return f.clientRequest={command:"SetSourceUserId",uid:v.uid+""},f;case cc.SetDestChannel:if(A=s&&s.getDestChannelMediaInfo(),!A)throw new F(P.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(E=>{c.push(E.channelName),h.push(E.uid+""),g.push(E.token||this.joinInfo.appId)}),f.clientRequest={command:"SetDestChannel",channelName:c,uid:h,token:g},f;case cc.StartPacketTransfer:return f.clientRequest={command:"StartPacketTransfer"},f;case cc.Reconnect:return f.clientRequest={command:"Reconnect"},f;case cc.StopPacketTransfer:return f.clientRequest={command:"StopPacketTransfer"},f;case cc.UpdateDestChannel:if(A=s&&s.getDestChannelMediaInfo(),!A)throw new F(P.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(E=>{c.push(E.channelName),h.push(E.uid+""),g.push(E.token||this.joinInfo.appId)}),f.clientRequest={command:"UpdateDestChannel",channelName:c,uid:h,token:g},f}return f}}const QU=n=>{const o=document.createElement("canvas");return o.width=2,o.height=2,new jt((s,c)=>{o.toBlob(function(){var h=V(function*(g){if(o.remove(),g){const f=yield k1(g);s({buffer:f,width:o.width,height:o.height})}else c(new F(P.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return h.apply(this,arguments)}}(),n,1)})},k1=function(){var n=V(function*(o){const s=yield o.arrayBuffer();return new Uint8Array(s)});return function(s){return n.apply(this,arguments)}}();var HU;let O8=no("AgoraRTCPlayer","trackId")(HU=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(Q.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),Yn("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}constructor(n){X(this,"trackId",void 0),X(this,"config",void 0),X(this,"onFirstVideoFrameDecoded",void 0),X(this,"freezeTimeCounterList",[]),X(this,"timeUpdatedCount",0),X(this,"freezeTime",0),X(this,"playbackTime",0),X(this,"lastTimeUpdatedTime",0),X(this,"videoTrack",void 0),X(this,"container",void 0),X(this,"videoElement",void 0),X(this,"videoElementCheckInterval",void 0),X(this,"_videoElementStatus",Ca.NONE),X(this,"slot",void 0),X(this,"isGettingVideoDimensions",!1),X(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Ca.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Ca.CANPLAY;break;case"stalled":this.videoElementStatus=Ca.STALLED;break;case"suspend":this.videoElementStatus=Ca.SUSPEND;break;case"pause":this.videoElementStatus=Ca.PAUSED,!Dc()&&!Ul()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),qe("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Ca.WAITING;break;case"abort":this.videoElementStatus=Ca.ABORT;break;case"ended":this.videoElementStatus=Ca.ENDED;break;case"emptied":this.videoElementStatus=Ca.EMPTIED;break;case"timeupdate":{const s=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const c=s-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=s,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),X(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Q.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),wt("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),X(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===$r.curState&&(tM()?(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):eM()?(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Fl()&&(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),X(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(tM()?(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):eM()?(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):Fl()&&(Q.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=n.element,this.trackId=n.trackId,this.updateConfig(n),$r.on(ha.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),$r.on(ha.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(n){this.config=n,this.trackId=n.trackId;const o=n.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){if(this.videoElement){const o=this.videoElement.play();o&&o.catch&&o.catch(c=>{n&&Xt.autoplayFailed(n,"video",c.message,this.trackId),wt("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(Q.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):Q.warning("[".concat(this.trackId,"] play warning: "),c)});const s=Ri();if(("Safari"===s.name&&15===Number(s.version)||Ti())&&o&&o.then&&o.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const o=n.getContext("2d");if(!o)return Q.error("create canvas context failed!"),wt("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,n.width,n.height);const s=o.getImageData(0,0,n.width,n.height);return n.remove(),s}getCurrentFrameToUint8Array(n){var o=arguments,s=this;return V(function*(){let c=o.length>1&&void 0!==o[1]?o[1]:1;if(!s.videoElement)return yield QU(n);const h=document.createElement("canvas");h.width=s.videoElement.videoWidth,h.height=s.videoElement.videoHeight;const g=h.getContext("2d");return g?(g.drawImage(s.videoElement,0,0,h.width,h.height),new jt((f,A)=>{h.toBlob(function(){var v=V(function*(E){if(h.remove(),E){const S=yield k1(E);f({buffer:S,width:h.width,height:h.height})}else A(new F(P.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(E){return v.apply(this,arguments)}}(),n,c<0?.1:c>1?1:c)})):yield QU(n)})()}destroy(){if($r.off(ha.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),$r.off(ha.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Ca.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Ca.ERROR,this.container&&this.container.appendChild(this.videoElement),GU.forEach(s=>{this.videoElement&&this.videoElement.addEventListener(s,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Ca.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const n=Ri();"Safari"===n.name&&15===Number(n.version)||Ti()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ps()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ps()&&this.videoElement.load());const o=this.videoElement.play();void 0!==o&&o.catch(s=>{Q.debug("[".concat(this.trackId,"] playback interrupted"),s.toString()),qe("debug",this,"play back interrupted: ".concat(s.toString()))})}removeVideoElement(){if(this.videoElement){GU.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=Ca.NONE}}handleAutoPlayFailed(){const n=Ri();if(this.videoElement){const o=s=>{s.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{Q.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),qe("debug",this,"video element autoplay resumed")}).catch(c=>{Q.error(c)}),"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ai.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0))};"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ai.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),X5()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||HU;const GU=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var D8,WU={exports:{}};function cS(n,o,s){const c=n.createShader(s);if(!c)return new F(P.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(n.shaderSource(c,o),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){const h=n.getShaderInfoLog(c);return n.deleteShader(c),new F(P.WEBGL_INTERNAL_ERROR,"error compiling shader:"+h).throw()}return c}(function(n,o){n.exports=(()=>{var s={3476:(f,A,v)=>{f.exports=v(7460)},4341:(f,A,v)=>{f.exports=v(3685)},3536:(f,A,v)=>{var E=v(1910);f.exports=E},8171:(f,A,v)=>{v(6450);var E=v(4058).Object,S=f.exports=function(w,R,x){return E.defineProperty(w,R,x)};E.defineProperty.sham&&(S.sham=!0)},2956:(f,A,v)=>{v(7627),v(6274),v(5967),v(8881),v(4560),v(7206),v(4349),v(7971);var E=v(4058);f.exports=E.Promise},3685:(f,A,v)=>{var E=v(3536);f.exports=E},4883:(f,A,v)=>{var E=v(1899),S=v(7475),w=v(9826),R=E.TypeError;f.exports=function(x){if(S(x))return x;throw R(w(x)+" is not a function")}},174:(f,A,v)=>{var E=v(1899),S=v(4284),w=v(9826),R=E.TypeError;f.exports=function(x){if(S(x))return x;throw R(w(x)+" is not a constructor")}},1851:(f,A,v)=>{var E=v(1899),S=v(7475),w=E.String,R=E.TypeError;f.exports=function(x){if("object"==typeof x||S(x))return x;throw R("Can't set "+w(x)+" as a prototype")}},8479:f=>{f.exports=function(){}},5743:(f,A,v)=>{var E=v(1899),S=v(7046),w=E.TypeError;f.exports=function(R,x){if(S(x,R))return R;throw w("Incorrect invocation")}},6059:(f,A,v)=>{var E=v(1899),S=v(941),w=E.String,R=E.TypeError;f.exports=function(x){if(S(x))return x;throw R(w(x)+" is not an object")}},1692:(f,A,v)=>{var E=v(4529),S=v(9413),w=v(623),R=function(x){return function(W,K,ne){var le,me=E(W),be=w(me),ke=S(ne,be);if(x&&K!=K){for(;be>ke;)if((le=me[ke++])!=le)return!0}else for(;be>ke;ke++)if((x||ke in me)&&me[ke]===K)return x||ke||0;return!x&&-1}};f.exports={includes:R(!0),indexOf:R(!1)}},3765:(f,A,v)=>{var E=v(5329);f.exports=E([].slice)},1385:(f,A,v)=>{var E=v(9813)("iterator"),S=!1;try{var w=0,R={next:function(){return{done:!!w++}},return:function(){S=!0}};R[E]=function(){return this},Array.from(R,function(){throw 2})}catch{}f.exports=function(x,W){if(!W&&!S)return!1;var K=!1;try{var ne={};ne[E]=function(){return{next:function(){return{done:K=!0}}}},x(ne)}catch{}return K}},2532:(f,A,v)=>{var E=v(5329),S=E({}.toString),w=E("".slice);f.exports=function(R){return w(S(R),8,-1)}},9697:(f,A,v)=>{var E=v(1899),S=v(2885),w=v(7475),R=v(2532),x=v(9813)("toStringTag"),W=E.Object,K="Arguments"==R(function(){return arguments}());f.exports=S?R:function(ne){var le,me,be;return void 0===ne?"Undefined":null===ne?"Null":"string"==typeof(me=function(ke,Ze){try{return ke[Ze]}catch{}}(le=W(ne),x))?me:K?R(le):"Object"==(be=R(le))&&w(le.callee)?"Arguments":be}},8694:(f,A,v)=>{var E=v(5329)("".replace),S=String(Error("zxcasd").stack),w=/\n\s*at [^:]*:[^\n]*/,R=w.test(S);f.exports=function(x,W){if(R&&"string"==typeof x)for(;W--;)x=E(x,w,"");return x}},3489:(f,A,v)=>{var E=v(953),S=v(1136),w=v(9677),R=v(5988);f.exports=function(x,W,K){for(var ne=S(W),le=R.f,me=w.f,be=0;be<ne.length;be++){var ke=ne[be];E(x,ke)||K&&E(K,ke)||le(x,ke,me(W,ke))}}},4160:(f,A,v)=>{var E=v(5981);f.exports=!E(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},1046:(f,A,v)=>{var E=v(5143).IteratorPrototype,S=v(9290),w=v(1887),R=v(904),x=v(2077),W=function(){return this};f.exports=function(K,ne,le,me){var be=ne+" Iterator";return K.prototype=S(E,{next:w(+!me,le)}),R(K,be,!1,!0),x[be]=W,K}},2029:(f,A,v)=>{var E=v(5746),S=v(5988),w=v(1887);f.exports=E?function(R,x,W){return S.f(R,x,w(1,W))}:function(R,x,W){return R[x]=W,R}},1887:f=>{f.exports=function(A,v){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:v}}},7771:(f,A,v)=>{var E=v(6887),S=v(8834),w=v(2529),R=v(9417),x=v(7475),W=v(1046),K=v(249),ne=v(8929),le=v(904),me=v(2029),be=v(9754),ke=v(9813),Ze=v(2077),Nt=v(5143),Vt=R.PROPER,kt=R.CONFIGURABLE,Sn=Nt.IteratorPrototype,ln=Nt.BUGGY_SAFARI_ITERATORS,dn=ke("iterator"),He="values",ct="entries",bt=function(){return this};f.exports=function(bn,Ye,lt,xt,hn,On,Gt){W(lt,Ye,xt);var G,ye,Ne,Ft=function(Ka){if(Ka===hn&&Vi)return Vi;if(!ln&&Ka in Ar)return Ar[Ka];switch(Ka){case"keys":case He:case ct:return function(){return new lt(this,Ka)}}return function(){return new lt(this)}},In=Ye+" Iterator",br=!1,Ar=bn.prototype,Nr=Ar[dn]||Ar["@@iterator"]||hn&&Ar[hn],Vi=!ln&&Nr||Ft(hn),nu="Array"==Ye&&Ar.entries||Nr;if(nu&&(G=K(nu.call(new bn)))!==Object.prototype&&G.next&&(w||K(G)===Sn||(ne?ne(G,Sn):x(G[dn])||be(G,dn,bt)),le(G,In,!0,!0),w&&(Ze[In]=bt)),Vt&&hn==He&&Nr&&Nr.name!==He&&(!w&&kt?me(Ar,"name",He):(br=!0,Vi=function(){return S(Nr,this)})),hn)if(ye={values:Ft(He),keys:On?Vi:Ft("keys"),entries:Ft(ct)},Gt)for(Ne in ye)(ln||br||!(Ne in Ar))&&be(Ar,Ne,ye[Ne]);else E({target:Ye,proto:!0,forced:ln||br},ye);return w&&!Gt||Ar[dn]===Vi||be(Ar,dn,Vi,{name:hn}),Ze[Ye]=Vi,ye}},5746:(f,A,v)=>{var E=v(5981);f.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(f,A,v)=>{var E=v(1899),S=v(941),w=E.document,R=S(w)&&S(w.createElement);f.exports=function(x){return R?w.createElement(x):{}}},3281:f=>{f.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:f=>{f.exports="object"==typeof window},4470:(f,A,v)=>{var E=v(2861),S=v(1899);f.exports=/ipad|iphone|ipod/i.test(E)&&void 0!==S.Pebble},2749:(f,A,v)=>{var E=v(2861);f.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},6049:(f,A,v)=>{var E=v(2532),S=v(1899);f.exports="process"==E(S.process)},8045:(f,A,v)=>{var E=v(2861);f.exports=/web0s(?!.*chrome)/i.test(E)},2861:(f,A,v)=>{var E=v(626);f.exports=E("navigator","userAgent")||""},3385:(f,A,v)=>{var E,S,w=v(1899),R=v(2861),x=w.process,W=w.Deno,K=x&&x.versions||W&&W.version,ne=K&&K.v8;ne&&(S=(E=ne.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!S&&R&&(!(E=R.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=R.match(/Chrome\/(\d+)/))&&(S=+E[1]),f.exports=S},6759:f=>{f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(f,A,v)=>{var E=v(5981),S=v(1887);f.exports=!E(function(){var w=Error("a");return!("stack"in w)||(Object.defineProperty(w,"stack",S(1,7)),7!==w.stack)})},6887:(f,A,v)=>{var E=v(1899),S=v(9730),w=v(5329),R=v(7475),x=v(9677).f,W=v(7252),K=v(4058),ne=v(6843),le=v(2029),me=v(953),be=function(ke){var Ze=function(Nt,Vt,kt){if(this instanceof Ze){switch(arguments.length){case 0:return new ke;case 1:return new ke(Nt);case 2:return new ke(Nt,Vt)}return new ke(Nt,Vt,kt)}return S(ke,this,arguments)};return Ze.prototype=ke.prototype,Ze};f.exports=function(ke,Ze){var Nt,Vt,kt,Sn,ln,dn,It,He,ct=ke.target,bt=ke.global,bn=ke.stat,Ye=ke.proto,lt=bt?E:bn?E[ct]:(E[ct]||{}).prototype,xt=bt?K:K[ct]||le(K,ct,{})[ct],hn=xt.prototype;for(kt in Ze)Nt=!W(bt?kt:ct+(bn?".":"#")+kt,ke.forced)&&lt&&me(lt,kt),ln=xt[kt],Nt&&(dn=ke.noTargetGet?(He=x(lt,kt))&&He.value:lt[kt]),Sn=Nt&&dn?dn:Ze[kt],Nt&&typeof ln==typeof Sn||(It=ke.bind&&Nt?ne(Sn,E):ke.wrap&&Nt?be(Sn):Ye&&R(Sn)?w(Sn):Sn,(ke.sham||Sn&&Sn.sham||ln&&ln.sham)&&le(It,"sham",!0),le(xt,kt,It),Ye&&(me(K,Vt=ct+"Prototype")||le(K,Vt,{}),le(K[Vt],kt,Sn),ke.real&&hn&&!hn[kt]&&le(hn,kt,Sn)))}},5981:f=>{f.exports=function(A){try{return!!A()}catch{return!0}}},9730:(f,A,v)=>{var E=v(8285),S=Function.prototype,w=S.apply,R=S.call;f.exports="object"==typeof Reflect&&Reflect.apply||(E?R.bind(w):function(){return R.apply(w,arguments)})},6843:(f,A,v)=>{var E=v(5329),S=v(4883),w=v(8285),R=E(E.bind);f.exports=function(x,W){return S(x),void 0===W?x:w?R(x,W):function(){return x.apply(W,arguments)}}},8285:(f,A,v)=>{var E=v(5981);f.exports=!E(function(){var S=function(){}.bind();return"function"!=typeof S||S.hasOwnProperty("prototype")})},8834:(f,A,v)=>{var E=v(8285),S=Function.prototype.call;f.exports=E?S.bind(S):function(){return S.apply(S,arguments)}},9417:(f,A,v)=>{var E=v(5746),S=v(953),w=Function.prototype,R=E&&Object.getOwnPropertyDescriptor,x=S(w,"name"),W=x&&"something"===function(){}.name,K=x&&(!E||E&&R(w,"name").configurable);f.exports={EXISTS:x,PROPER:W,CONFIGURABLE:K}},5329:(f,A,v)=>{var E=v(8285),S=Function.prototype,R=S.call,x=E&&S.bind.bind(R,R);f.exports=E?function(W){return W&&x(W)}:function(W){return W&&function(){return R.apply(W,arguments)}}},626:(f,A,v)=>{var E=v(4058),S=v(1899),w=v(7475),R=function(x){return w(x)?x:void 0};f.exports=function(x,W){return arguments.length<2?R(E[x])||R(S[x]):E[x]&&E[x][W]||S[x]&&S[x][W]}},2902:(f,A,v)=>{var E=v(9697),S=v(4229),w=v(2077),R=v(9813)("iterator");f.exports=function(x){if(null!=x)return S(x,R)||S(x,"@@iterator")||w[E(x)]}},429:(f,A,v)=>{var E=v(1899),S=v(8834),w=v(4883),R=v(6059),x=v(9826),W=v(2902),K=E.TypeError;f.exports=function(ne,le){var me=arguments.length<2?W(ne):le;if(w(me))return R(S(me,ne));throw K(x(ne)+" is not iterable")}},4229:(f,A,v)=>{var E=v(4883);f.exports=function(S,w){var R=S[w];return null==R?void 0:E(R)}},1899:(f,A,v)=>{var E=function(S){return S&&S.Math==Math&&S};f.exports=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof v.g&&v.g)||function(){return this}()||Function("return this")()},953:(f,A,v)=>{var E=v(5329),S=v(9678),w=E({}.hasOwnProperty);f.exports=Object.hasOwn||function(R,x){return w(S(R),x)}},7748:f=>{f.exports={}},4845:(f,A,v)=>{var E=v(1899);f.exports=function(S,w){var R=E.console;R&&R.error&&(1==arguments.length?R.error(S):R.error(S,w))}},5463:(f,A,v)=>{var E=v(626);f.exports=E("document","documentElement")},2840:(f,A,v)=>{var E=v(5746),S=v(5981),w=v(1333);f.exports=!E&&!S(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a})},7026:(f,A,v)=>{var E=v(1899),S=v(5329),w=v(5981),R=v(2532),x=E.Object,W=S("".split);f.exports=w(function(){return!x("z").propertyIsEnumerable(0)})?function(K){return"String"==R(K)?W(K,""):x(K)}:x},1302:(f,A,v)=>{var E=v(5329),S=v(7475),w=v(3030),R=E(Function.toString);S(w.inspectSource)||(w.inspectSource=function(x){return R(x)}),f.exports=w.inspectSource},3794:(f,A,v)=>{var E=v(941),S=v(2029);f.exports=function(w,R){E(R)&&"cause"in R&&S(w,"cause",R.cause)}},5402:(f,A,v)=>{var E,S,w,R=v(8019),x=v(1899),W=v(5329),K=v(941),ne=v(2029),le=v(953),me=v(3030),be=v(4262),ke=v(7748),Ze="Object already initialized",Nt=x.TypeError;if(R||me.state){var kt=me.state||(me.state=new(0,x.WeakMap)),Sn=W(kt.get),ln=W(kt.has),dn=W(kt.set);E=function(He,ct){if(ln(kt,He))throw new Nt(Ze);return ct.facade=He,dn(kt,He,ct),ct},S=function(He){return Sn(kt,He)||{}},w=function(He){return ln(kt,He)}}else{var It=be("state");ke[It]=!0,E=function(He,ct){if(le(He,It))throw new Nt(Ze);return ct.facade=He,ne(He,It,ct),ct},S=function(He){return le(He,It)?He[It]:{}},w=function(He){return le(He,It)}}f.exports={set:E,get:S,has:w,enforce:function(He){return w(He)?S(He):E(He,{})},getterFor:function(He){return function(ct){var bt;if(!K(ct)||(bt=S(ct)).type!==He)throw Nt("Incompatible receiver, "+He+" required");return bt}}}},6782:(f,A,v)=>{var E=v(9813),S=v(2077),w=E("iterator"),R=Array.prototype;f.exports=function(x){return void 0!==x&&(S.Array===x||R[w]===x)}},7475:f=>{f.exports=function(A){return"function"==typeof A}},4284:(f,A,v)=>{var E=v(5329),S=v(5981),w=v(7475),R=v(9697),x=v(626),W=v(1302),K=function(){},ne=[],le=x("Reflect","construct"),me=/^\s*(?:class|function)\b/,be=E(me.exec),ke=!me.exec(K),Ze=function(Vt){if(!w(Vt))return!1;try{return le(K,ne,Vt),!0}catch{return!1}},Nt=function(Vt){if(!w(Vt))return!1;switch(R(Vt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ke||!!be(me,W(Vt))}catch{return!0}};Nt.sham=!0,f.exports=!le||S(function(){var Vt;return Ze(Ze.call)||!Ze(Object)||!Ze(function(){Vt=!0})||Vt})?Nt:Ze},7252:(f,A,v)=>{var E=v(5981),S=v(7475),w=/#|\.prototype\./,R=function(le,me){var be=W[x(le)];return be==ne||be!=K&&(S(me)?E(me):!!me)},x=R.normalize=function(le){return String(le).replace(w,".").toLowerCase()},W=R.data={},K=R.NATIVE="N",ne=R.POLYFILL="P";f.exports=R},941:(f,A,v)=>{var E=v(7475);f.exports=function(S){return"object"==typeof S?null!==S:E(S)}},2529:f=>{f.exports=!0},6664:(f,A,v)=>{var E=v(1899),S=v(626),w=v(7475),R=v(7046),x=v(2302),W=E.Object;f.exports=x?function(K){return"symbol"==typeof K}:function(K){var ne=S("Symbol");return w(ne)&&R(ne.prototype,W(K))}},3091:(f,A,v)=>{var E=v(1899),S=v(6843),w=v(8834),R=v(6059),x=v(9826),W=v(6782),K=v(623),ne=v(7046),le=v(429),me=v(2902),be=v(7609),ke=E.TypeError,Ze=function(Vt,kt){this.stopped=Vt,this.result=kt},Nt=Ze.prototype;f.exports=function(Vt,kt,Sn){var ln,dn,It,He,ct,bt,bn,lt=!(!Sn||!Sn.AS_ENTRIES),xt=!(!Sn||!Sn.IS_ITERATOR),hn=!(!Sn||!Sn.INTERRUPTED),On=S(kt,Sn&&Sn.that),Gt=function(ye){return ln&&be(ln,"normal",ye),new Ze(!0,ye)},G=function(ye){return lt?(R(ye),hn?On(ye[0],ye[1],Gt):On(ye[0],ye[1])):hn?On(ye,Gt):On(ye)};if(xt)ln=Vt;else{if(!(dn=me(Vt)))throw ke(x(Vt)+" is not iterable");if(W(dn)){for(It=0,He=K(Vt);He>It;It++)if((ct=G(Vt[It]))&&ne(Nt,ct))return ct;return new Ze(!1)}ln=le(Vt,dn)}for(bt=ln.next;!(bn=w(bt,ln)).done;){try{ct=G(bn.value)}catch(ye){be(ln,"throw",ye)}if("object"==typeof ct&&ct&&ne(Nt,ct))return ct}return new Ze(!1)}},7609:(f,A,v)=>{var E=v(8834),S=v(6059),w=v(4229);f.exports=function(R,x,W){var K,ne;S(R);try{if(!(K=w(R,"return"))){if("throw"===x)throw W;return W}K=E(K,R)}catch(le){ne=!0,K=le}if("throw"===x)throw W;if(ne)throw K;return S(K),W}},5143:(f,A,v)=>{var E,S,w,R=v(5981),x=v(7475),W=v(9290),K=v(249),ne=v(9754),le=v(9813),me=v(2529),be=le("iterator"),ke=!1;[].keys&&("next"in(w=[].keys())?(S=K(K(w)))!==Object.prototype&&(E=S):ke=!0),null==E||R(function(){var Ze={};return E[be].call(Ze)!==Ze})?E={}:me&&(E=W(E)),x(E[be])||ne(E,be,function(){return this}),f.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:ke}},2077:f=>{f.exports={}},623:(f,A,v)=>{var E=v(3057);f.exports=function(S){return E(S.length)}},6132:(f,A,v)=>{var E,S,w,R,x,W,K,ne,le=v(1899),me=v(6843),be=v(9677).f,ke=v(2941).set,Ze=v(2749),Nt=v(4470),Vt=v(8045),kt=v(6049),Sn=le.MutationObserver||le.WebKitMutationObserver,ln=le.document,dn=le.process,It=le.Promise,He=be(le,"queueMicrotask"),ct=He&&He.value;ct||(E=function(){var bt,bn;for(kt&&(bt=dn.domain)&&bt.exit();S;){bn=S.fn,S=S.next;try{bn()}catch(Ye){throw S?R():w=void 0,Ye}}w=void 0,bt&&bt.enter()},Ze||kt||Vt||!Sn||!ln?!Nt&&It&&It.resolve?((K=It.resolve(void 0)).constructor=It,ne=me(K.then,K),R=function(){ne(E)}):kt?R=function(){dn.nextTick(E)}:(ke=me(ke,le),R=function(){ke(E)}):(x=!0,W=ln.createTextNode(""),new Sn(E).observe(W,{characterData:!0}),R=function(){W.data=x=!x})),f.exports=ct||function(bt){var bn={fn:bt,next:void 0};w&&(w.next=bn),S||(S=bn,R()),w=bn}},9297:(f,A,v)=>{var E=v(1899);f.exports=E.Promise},2497:(f,A,v)=>{var E=v(3385),S=v(5981);f.exports=!!Object.getOwnPropertySymbols&&!S(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&E&&E<41})},8019:(f,A,v)=>{var E=v(1899),S=v(7475),w=v(1302),R=E.WeakMap;f.exports=S(R)&&/native code/.test(w(R))},9520:(f,A,v)=>{var E=v(4883),S=function(w){var R,x;this.promise=new w(function(W,K){if(void 0!==R||void 0!==x)throw TypeError("Bad Promise constructor");R=W,x=K}),this.resolve=E(R),this.reject=E(x)};f.exports.f=function(w){return new S(w)}},4649:(f,A,v)=>{var E=v(5803);f.exports=function(S,w){return void 0===S?arguments.length<2?"":w:E(S)}},9290:(f,A,v)=>{var E,S=v(6059),w=v(9938),R=v(6759),x=v(7748),W=v(5463),K=v(1333),ne=v(4262)("IE_PROTO"),le=function(){},me=function(Ze){return"<script>"+Ze+"<\/script>"},be=function(Ze){Ze.write(me("")),Ze.close();var Nt=Ze.parentWindow.Object;return Ze=null,Nt},ke=function(){try{E=new ActiveXObject("htmlfile")}catch{}var Ze,Nt;ke=typeof document<"u"?document.domain&&E?be(E):((Nt=K("iframe")).style.display="none",W.appendChild(Nt),Nt.src=String("javascript:"),(Ze=Nt.contentWindow.document).open(),Ze.write(me("document.F=Object")),Ze.close(),Ze.F):be(E);for(var Vt=R.length;Vt--;)delete ke.prototype[R[Vt]];return ke()};x[ne]=!0,f.exports=Object.create||function(Ze,Nt){var Vt;return null!==Ze?(le.prototype=S(Ze),Vt=new le,le.prototype=null,Vt[ne]=Ze):Vt=ke(),void 0===Nt?Vt:w.f(Vt,Nt)}},9938:(f,A,v)=>{var E=v(5746),S=v(3937),w=v(5988),R=v(6059),x=v(4529),W=v(4771);A.f=E&&!S?Object.defineProperties:function(K,ne){R(K);for(var le,me=x(ne),be=W(ne),ke=be.length,Ze=0;ke>Ze;)w.f(K,le=be[Ze++],me[le]);return K}},5988:(f,A,v)=>{var E=v(1899),S=v(5746),w=v(2840),R=v(3937),x=v(6059),W=v(3894),K=E.TypeError,ne=Object.defineProperty,le=Object.getOwnPropertyDescriptor;A.f=S?R?function(me,be,ke){if(x(me),be=W(be),x(ke),"function"==typeof me&&"prototype"===be&&"value"in ke&&"writable"in ke&&!ke.writable){var Ze=le(me,be);Ze&&Ze.writable&&(me[be]=ke.value,ke={configurable:"configurable"in ke?ke.configurable:Ze.configurable,enumerable:"enumerable"in ke?ke.enumerable:Ze.enumerable,writable:!1})}return ne(me,be,ke)}:ne:function(me,be,ke){if(x(me),be=W(be),x(ke),w)try{return ne(me,be,ke)}catch{}if("get"in ke||"set"in ke)throw K("Accessors not supported");return"value"in ke&&(me[be]=ke.value),me}},9677:(f,A,v)=>{var E=v(5746),S=v(8834),w=v(6760),R=v(1887),x=v(4529),W=v(3894),K=v(953),ne=v(2840),le=Object.getOwnPropertyDescriptor;A.f=E?le:function(me,be){if(me=x(me),be=W(be),ne)try{return le(me,be)}catch{}if(K(me,be))return R(!S(w.f,me,be),me[be])}},946:(f,A,v)=>{var E=v(5629),S=v(6759).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(w){return E(w,S)}},7857:(f,A)=>{A.f=Object.getOwnPropertySymbols},249:(f,A,v)=>{var E=v(1899),S=v(953),w=v(7475),R=v(9678),x=v(4262),W=v(4160),K=x("IE_PROTO"),ne=E.Object,le=ne.prototype;f.exports=W?ne.getPrototypeOf:function(me){var be=R(me);if(S(be,K))return be[K];var ke=be.constructor;return w(ke)&&be instanceof ke?ke.prototype:be instanceof ne?le:null}},7046:(f,A,v)=>{var E=v(5329);f.exports=E({}.isPrototypeOf)},5629:(f,A,v)=>{var E=v(5329),S=v(953),w=v(4529),R=v(1692).indexOf,x=v(7748),W=E([].push);f.exports=function(K,ne){var le,me=w(K),be=0,ke=[];for(le in me)!S(x,le)&&S(me,le)&&W(ke,le);for(;ne.length>be;)S(me,le=ne[be++])&&(~R(ke,le)||W(ke,le));return ke}},4771:(f,A,v)=>{var E=v(5629),S=v(6759);f.exports=Object.keys||function(w){return E(w,S)}},6760:(f,A)=>{var v={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,S=E&&!v.call({1:2},1);A.f=S?function(w){var R=E(this,w);return!!R&&R.enumerable}:v},8929:(f,A,v)=>{var E=v(5329),S=v(6059),w=v(1851);f.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,x=!1,W={};try{(R=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(W,[]),x=W instanceof Array}catch{}return function(K,ne){return S(K),w(ne),x?R(K,ne):K.__proto__=ne,K}}():void 0)},5623:(f,A,v)=>{var E=v(2885),S=v(9697);f.exports=E?{}.toString:function(){return"[object "+S(this)+"]"}},9811:(f,A,v)=>{var E=v(1899),S=v(8834),w=v(7475),R=v(941),x=E.TypeError;f.exports=function(W,K){var ne,le;if("string"===K&&w(ne=W.toString)&&!R(le=S(ne,W))||w(ne=W.valueOf)&&!R(le=S(ne,W))||"string"!==K&&w(ne=W.toString)&&!R(le=S(ne,W)))return le;throw x("Can't convert object to primitive value")}},1136:(f,A,v)=>{var E=v(626),S=v(5329),w=v(946),R=v(7857),x=v(6059),W=S([].concat);f.exports=E("Reflect","ownKeys")||function(K){var ne=w.f(x(K)),le=R.f;return le?W(ne,le(K)):ne}},4058:f=>{f.exports={}},2:f=>{f.exports=function(A){try{return{error:!1,value:A()}}catch(v){return{error:!0,value:v}}}},6584:(f,A,v)=>{var E=v(6059),S=v(941),w=v(9520);f.exports=function(R,x){if(E(R),S(x)&&x.constructor===R)return x;var W=w.f(R);return(0,W.resolve)(x),W.promise}},8397:f=>{var A=function(){this.head=null,this.tail=null};A.prototype={add:function(v){var E={item:v,next:null};this.head?this.tail.next=E:this.head=E,this.tail=E},get:function(){var v=this.head;if(v)return this.head=v.next,this.tail===v&&(this.tail=null),v.item}},f.exports=A},7524:(f,A,v)=>{var E=v(9754);f.exports=function(S,w,R){for(var x in w)R&&R.unsafe&&S[x]?S[x]=w[x]:E(S,x,w[x],R);return S}},9754:(f,A,v)=>{var E=v(2029);f.exports=function(S,w,R,x){x&&x.enumerable?S[w]=R:E(S,w,R)}},8219:(f,A,v)=>{var E=v(1899).TypeError;f.exports=function(S){if(null==S)throw E("Can't call method on "+S);return S}},4911:(f,A,v)=>{var E=v(1899),S=Object.defineProperty;f.exports=function(w,R){try{S(E,w,{value:R,configurable:!0,writable:!0})}catch{E[w]=R}return R}},4431:(f,A,v)=>{var E=v(626),S=v(5988),w=v(9813),R=v(5746),x=w("species");f.exports=function(W){var K=E(W);R&&K&&!K[x]&&(0,S.f)(K,x,{configurable:!0,get:function(){return this}})}},904:(f,A,v)=>{var E=v(2885),S=v(5988).f,w=v(2029),R=v(953),x=v(5623),W=v(9813)("toStringTag");f.exports=function(K,ne,le,me){if(K){var be=le?K:K.prototype;R(be,W)||S(be,W,{configurable:!0,value:ne}),me&&!E&&w(be,"toString",x)}}},4262:(f,A,v)=>{var E=v(8726),S=v(9418),w=E("keys");f.exports=function(R){return w[R]||(w[R]=S(R))}},3030:(f,A,v)=>{var E=v(1899),S=v(4911),w="__core-js_shared__",R=E[w]||S(w,{});f.exports=R},8726:(f,A,v)=>{var E=v(2529),S=v(3030);(f.exports=function(w,R){return S[w]||(S[w]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:E?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(f,A,v)=>{var E=v(6059),S=v(174),w=v(9813)("species");f.exports=function(R,x){var W,K=E(R).constructor;return void 0===K||null==(W=E(K)[w])?x:S(W)}},4620:(f,A,v)=>{var E=v(5329),S=v(2435),w=v(5803),R=v(8219),x=E("".charAt),W=E("".charCodeAt),K=E("".slice),ne=function(le){return function(me,be){var ke,Ze,Nt=w(R(me)),Vt=S(be),kt=Nt.length;return Vt<0||Vt>=kt?le?"":void 0:(ke=W(Nt,Vt))<55296||ke>56319||Vt+1===kt||(Ze=W(Nt,Vt+1))<56320||Ze>57343?le?x(Nt,Vt):ke:le?K(Nt,Vt,Vt+2):Ze-56320+(ke-55296<<10)+65536}};f.exports={codeAt:ne(!1),charAt:ne(!0)}},2941:(f,A,v)=>{var E,S,w,R,x=v(1899),W=v(9730),K=v(6843),ne=v(7475),le=v(953),me=v(5981),be=v(5463),ke=v(3765),Ze=v(1333),Nt=v(2749),Vt=v(6049),kt=x.setImmediate,Sn=x.clearImmediate,ln=x.process,dn=x.Dispatch,It=x.Function,He=x.MessageChannel,ct=x.String,bt=0,bn={};try{E=x.location}catch{}var Ye=function(On){if(le(bn,On)){var Gt=bn[On];delete bn[On],Gt()}},lt=function(On){return function(){Ye(On)}},xt=function(On){Ye(On.data)},hn=function(On){x.postMessage(ct(On),E.protocol+"//"+E.host)};kt&&Sn||(kt=function(On){var Gt=ke(arguments,1);return bn[++bt]=function(){W(ne(On)?On:It(On),void 0,Gt)},S(bt),bt},Sn=function(On){delete bn[On]},Vt?S=function(On){ln.nextTick(lt(On))}:dn&&dn.now?S=function(On){dn.now(lt(On))}:He&&!Nt?(R=(w=new He).port2,w.port1.onmessage=xt,S=K(R.postMessage,R)):x.addEventListener&&ne(x.postMessage)&&!x.importScripts&&E&&"file:"!==E.protocol&&!me(hn)?(S=hn,x.addEventListener("message",xt,!1)):S="onreadystatechange"in Ze("script")?function(On){be.appendChild(Ze("script")).onreadystatechange=function(){be.removeChild(this),Ye(On)}}:function(On){setTimeout(lt(On),0)}),f.exports={set:kt,clear:Sn}},9413:(f,A,v)=>{var E=v(2435),S=Math.max,w=Math.min;f.exports=function(R,x){var W=E(R);return W<0?S(W+x,0):w(W,x)}},4529:(f,A,v)=>{var E=v(7026),S=v(8219);f.exports=function(w){return E(S(w))}},2435:f=>{var A=Math.ceil,v=Math.floor;f.exports=function(E){var S=+E;return S!=S||0===S?0:(S>0?v:A)(S)}},3057:(f,A,v)=>{var E=v(2435),S=Math.min;f.exports=function(w){return w>0?S(E(w),9007199254740991):0}},9678:(f,A,v)=>{var E=v(1899),S=v(8219),w=E.Object;f.exports=function(R){return w(S(R))}},6935:(f,A,v)=>{var E=v(1899),S=v(8834),w=v(941),R=v(6664),x=v(4229),W=v(9811),K=v(9813),ne=E.TypeError,le=K("toPrimitive");f.exports=function(me,be){if(!w(me)||R(me))return me;var ke,Ze=x(me,le);if(Ze){if(void 0===be&&(be="default"),ke=S(Ze,me,be),!w(ke)||R(ke))return ke;throw ne("Can't convert object to primitive value")}return void 0===be&&(be="number"),W(me,be)}},3894:(f,A,v)=>{var E=v(6935),S=v(6664);f.exports=function(w){var R=E(w,"string");return S(R)?R:R+""}},2885:(f,A,v)=>{var E={};E[v(9813)("toStringTag")]="z",f.exports="[object z]"===String(E)},5803:(f,A,v)=>{var E=v(1899),S=v(9697),w=E.String;f.exports=function(R){if("Symbol"===S(R))throw TypeError("Cannot convert a Symbol value to a string");return w(R)}},9826:(f,A,v)=>{var E=v(1899).String;f.exports=function(S){try{return E(S)}catch{return"Object"}}},9418:(f,A,v)=>{var E=v(5329),S=0,w=Math.random(),R=E(1..toString);f.exports=function(x){return"Symbol("+(void 0===x?"":x)+")_"+R(++S+w,36)}},2302:(f,A,v)=>{var E=v(2497);f.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(f,A,v)=>{var E=v(5746),S=v(5981);f.exports=E&&S(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(f,A,v)=>{var E=v(1899),S=v(8726),w=v(953),R=v(9418),x=v(2497),W=v(2302),K=S("wks"),ne=E.Symbol,le=ne&&ne.for,me=W?ne:ne&&ne.withoutSetter||R;f.exports=function(be){if(!w(K,be)||!x&&"string"!=typeof K[be]){var ke="Symbol."+be;K[be]=x&&w(ne,be)?ne[be]:W&&le?le(ke):me(ke)}return K[be]}},7627:(f,A,v)=>{var E=v(6887),S=v(1899),w=v(7046),R=v(249),x=v(8929),W=v(3489),K=v(9290),ne=v(2029),le=v(1887),me=v(8694),be=v(3794),ke=v(3091),Ze=v(4649),Nt=v(9813),Vt=v(8780),kt=Nt("toStringTag"),Sn=S.Error,ln=[].push,dn=function(He,ct){var bt,bn=arguments.length>2?arguments[2]:void 0,Ye=w(It,this);x?bt=x(new Sn,Ye?R(this):It):(bt=Ye?this:K(It),ne(bt,kt,"Error")),void 0!==ct&&ne(bt,"message",Ze(ct)),Vt&&ne(bt,"stack",me(bt.stack,1)),be(bt,bn);var lt=[];return ke(He,ln,{that:lt}),ne(bt,"errors",lt),bt};x?x(dn,Sn):W(dn,Sn,{name:!0});var It=dn.prototype=K(Sn.prototype,{constructor:le(1,dn),message:le(1,""),name:le(1,"AggregateError")});E({global:!0},{AggregateError:dn})},6274:(f,A,v)=>{var E=v(4529),S=v(8479),w=v(2077),R=v(5402),x=v(5988).f,W=v(7771),K=v(2529),ne=v(5746),le="Array Iterator",me=R.set,be=R.getterFor(le);f.exports=W(Array,"Array",function(Ze,Nt){me(this,{type:le,target:E(Ze),index:0,kind:Nt})},function(){var Ze=be(this),Nt=Ze.target,Vt=Ze.kind,kt=Ze.index++;return!Nt||kt>=Nt.length?(Ze.target=void 0,{value:void 0,done:!0}):"keys"==Vt?{value:kt,done:!1}:"values"==Vt?{value:Nt[kt],done:!1}:{value:[kt,Nt[kt]],done:!1}},"values");var ke=w.Arguments=w.Array;if(S("keys"),S("values"),S("entries"),!K&&ne&&"values"!==ke.name)try{x(ke,"name",{value:"values"})}catch{}},6450:(f,A,v)=>{var E=v(6887),S=v(5746),w=v(5988).f;E({target:"Object",stat:!0,forced:Object.defineProperty!==w,sham:!S},{defineProperty:w})},5967:()=>{},4560:(f,A,v)=>{var E=v(6887),S=v(8834),w=v(4883),R=v(9520),x=v(2),W=v(3091);E({target:"Promise",stat:!0},{allSettled:function(K){var ne=this,le=R.f(ne),me=le.resolve,be=le.reject,ke=x(function(){var Ze=w(ne.resolve),Nt=[],Vt=0,kt=1;W(K,function(Sn){var ln=Vt++,dn=!1;kt++,S(Ze,ne,Sn).then(function(It){dn||(dn=!0,Nt[ln]={status:"fulfilled",value:It},--kt||me(Nt))},function(It){dn||(dn=!0,Nt[ln]={status:"rejected",reason:It},--kt||me(Nt))})}),--kt||me(Nt)});return ke.error&&be(ke.value),le.promise}})},7206:(f,A,v)=>{var E=v(6887),S=v(4883),w=v(626),R=v(8834),x=v(9520),W=v(2),K=v(3091),ne="No one promise resolved";E({target:"Promise",stat:!0},{any:function(le){var me=this,be=w("AggregateError"),ke=x.f(me),Ze=ke.resolve,Nt=ke.reject,Vt=W(function(){var kt=S(me.resolve),Sn=[],ln=0,dn=1,It=!1;K(le,function(He){var ct=ln++,bt=!1;dn++,R(kt,me,He).then(function(bn){bt||It||(It=!0,Ze(bn))},function(bn){bt||It||(bt=!0,Sn[ct]=bn,--dn||Nt(new be(Sn,ne)))})}),--dn||Nt(new be(Sn,ne))});return Vt.error&&Nt(Vt.value),ke.promise}})},4349:(f,A,v)=>{var E=v(6887),S=v(2529),w=v(9297),R=v(5981),x=v(626),W=v(7475),K=v(487),ne=v(6584),le=v(9754);if(E({target:"Promise",proto:!0,real:!0,forced:!!w&&R(function(){w.prototype.finally.call({then:function(){}},function(){})})},{finally:function(be){var ke=K(this,x("Promise")),Ze=W(be);return this.then(Ze?function(Nt){return ne(ke,be()).then(function(){return Nt})}:be,Ze?function(Nt){return ne(ke,be()).then(function(){throw Nt})}:be)}}),!S&&W(w)){var me=x("Promise").prototype.finally;w.prototype.finally!==me&&le(w.prototype,"finally",me,{unsafe:!0})}},8881:(f,A,v)=>{var E,S,w,R,x=v(6887),W=v(2529),K=v(1899),ne=v(626),le=v(8834),me=v(9297),be=v(9754),ke=v(7524),Ze=v(8929),Nt=v(904),Vt=v(4431),kt=v(4883),Sn=v(7475),ln=v(941),dn=v(5743),It=v(1302),He=v(3091),ct=v(1385),bt=v(487),bn=v(2941).set,Ye=v(6132),lt=v(6584),xt=v(4845),hn=v(9520),On=v(2),Gt=v(8397),G=v(5402),ye=v(7252),Ne=v(9813),Ft=v(3321),In=v(6049),br=v(3385),Ar=Ne("species"),Nr="Promise",Vi=G.getterFor(Nr),nu=G.set,Ka=G.getterFor(Nr),Io=me&&me.prototype,Ji=me,pa=Io,Xf=K.TypeError,Nh=K.document,Zf=K.process,Vs=hn.f,yW=Vs,vt=!!(Nh&&Nh.createEvent&&K.dispatchEvent),Ce=Sn(K.PromiseRejectionEvent),rt="unhandledrejection",Lt=!1,At=ye(Nr,function(){var xn=It(Ji),$n=xn!==String(Ji);if(!$n&&66===br||W&&!pa.finally)return!0;if(br>=51&&/native code/.test(xn))return!1;var jr=new Ji(function(za){za(1)}),ji=function(za){za(function(){},function(){})};return(jr.constructor={})[Ar]=ji,!(Lt=jr.then(function(){})instanceof ji)||!$n&&Ft&&!Ce}),mn=At||!ct(function(xn){Ji.all(xn).catch(function(){})}),un=function(xn){var $n;return!(!ln(xn)||!Sn($n=xn.then))&&$n},Kn=function(xn,$n){var jr,ji,za,Fy=$n.value,AL=1==$n.state,Uk=AL?xn.ok:xn.fail,o7=xn.resolve,W1=xn.reject,K1=xn.domain;try{Uk?(AL||(2===$n.rejection&&yr($n),$n.rejection=1),!0===Uk?jr=Fy:(K1&&K1.enter(),jr=Uk(Fy),K1&&(K1.exit(),za=!0)),jr===xn.promise?W1(Xf("Promise-chain cycle")):(ji=un(jr))?le(ji,jr,o7,W1):o7(jr)):W1(Fy)}catch(EW){K1&&!za&&K1.exit(),W1(EW)}},Rr=function(xn,$n){xn.notified||(xn.notified=!0,Ye(function(){for(var jr,ji=xn.reactions;jr=ji.get();)Kn(jr,xn);xn.notified=!1,$n&&!xn.rejection&&Rn(xn)}))},Hr=function(xn,$n,jr){var ji,za;vt?((ji=Nh.createEvent("Event")).promise=$n,ji.reason=jr,ji.initEvent(xn,!1,!0),K.dispatchEvent(ji)):ji={promise:$n,reason:jr},!Ce&&(za=K["on"+xn])?za(ji):xn===rt&&xt("Unhandled promise rejection",jr)},Rn=function(xn){le(bn,K,function(){var $n,jr=xn.facade,ji=xn.value;if(Xn(xn)&&($n=On(function(){In?Zf.emit("unhandledRejection",ji,jr):Hr(rt,jr,ji)}),xn.rejection=In||Xn(xn)?2:1,$n.error))throw $n.value})},Xn=function(xn){return 1!==xn.rejection&&!xn.parent},yr=function(xn){le(bn,K,function(){var $n=xn.facade;In?Zf.emit("rejectionHandled",$n):Hr("rejectionhandled",$n,xn.value)})},yi=function(xn,$n,jr){return function(ji){xn($n,ji,jr)}},ys=function(xn,$n,jr){xn.done||(xn.done=!0,jr&&(xn=jr),xn.value=$n,xn.state=2,Rr(xn,!0))},xu=function(xn,$n,jr){if(!xn.done){xn.done=!0,jr&&(xn=jr);try{if(xn.facade===$n)throw Xf("Promise can't be resolved itself");var ji=un($n);ji?Ye(function(){var za={done:!1};try{le(ji,$n,yi(xu,za,xn),yi(ys,za,xn))}catch(Fy){ys(za,Fy,xn)}}):(xn.value=$n,xn.state=1,Rr(xn,!1))}catch(za){ys({done:!1},za,xn)}}};if(At&&(pa=(Ji=function(xn){dn(this,pa),kt(xn),le(E,this);var $n=Vi(this);try{xn(yi(xu,$n),yi(ys,$n))}catch(jr){ys($n,jr)}}).prototype,(E=function(xn){nu(this,{type:Nr,done:!1,notified:!1,parent:!1,reactions:new Gt,rejection:!1,state:0,value:void 0})}).prototype=ke(pa,{then:function(xn,$n){var jr=Ka(this),ji=Vs(bt(this,Ji));return jr.parent=!0,ji.ok=!Sn(xn)||xn,ji.fail=Sn($n)&&$n,ji.domain=In?Zf.domain:void 0,0==jr.state?jr.reactions.add(ji):Ye(function(){Kn(ji,jr)}),ji.promise},catch:function(xn){return this.then(void 0,xn)}}),S=function(){var xn=new E,$n=Vi(xn);this.promise=xn,this.resolve=yi(xu,$n),this.reject=yi(ys,$n)},hn.f=Vs=function(xn){return xn===Ji||xn===w?new S(xn):yW(xn)},!W&&Sn(me)&&Io!==Object.prototype)){R=Io.then,Lt||(be(Io,"then",function(xn,$n){var jr=this;return new Ji(function(ji,za){le(R,jr,ji,za)}).then(xn,$n)},{unsafe:!0}),be(Io,"catch",pa.catch,{unsafe:!0}));try{delete Io.constructor}catch{}Ze&&Ze(Io,pa)}x({global:!0,wrap:!0,forced:At},{Promise:Ji}),Nt(Ji,Nr,!1,!0),Vt(Nr),w=ne(Nr),x({target:Nr,stat:!0,forced:At},{reject:function(xn){var $n=Vs(this);return le($n.reject,void 0,xn),$n.promise}}),x({target:Nr,stat:!0,forced:W||At},{resolve:function(xn){return lt(W&&this===w?Ji:this,xn)}}),x({target:Nr,stat:!0,forced:mn},{all:function(xn){var $n=this,jr=Vs($n),ji=jr.resolve,za=jr.reject,Fy=On(function(){var AL=kt($n.resolve),Uk=[],o7=0,W1=1;He(xn,function(K1){var EW=o7++,Lz=!1;W1++,le(AL,$n,K1).then(function(Fz){Lz||(Lz=!0,Uk[EW]=Fz,--W1||ji(Uk))},za)}),--W1||ji(Uk)});return Fy.error&&za(Fy.value),jr.promise},race:function(xn){var $n=this,jr=Vs($n),ji=jr.reject,za=On(function(){var Fy=kt($n.resolve);He(xn,function(AL){le(Fy,$n,AL).then(jr.resolve,ji)})});return za.error&&ji(za.value),jr.promise}})},7971:(f,A,v)=>{var E=v(4620).charAt,S=v(5803),w=v(5402),R=v(7771),x="String Iterator",W=w.set,K=w.getterFor(x);R(String,"String",function(ne){W(this,{type:x,string:S(ne),index:0})},function(){var ne,le=K(this),me=le.string,be=le.index;return be>=me.length?{value:void 0,done:!0}:(ne=E(me,be),le.index+=ne.length,{value:ne,done:!1})})},7634:(f,A,v)=>{v(6274);var E=v(3281),S=v(1899),w=v(9697),R=v(2029),x=v(2077),W=v(9813)("toStringTag");for(var K in E){var ne=S[K],le=ne&&ne.prototype;le&&w(le)!==W&&R(le,W,K),x[K]=x.Array}},1910:(f,A,v)=>{var E=v(8171);f.exports=E},7460:(f,A,v)=>{var E=v(2956);v(7634),f.exports=E},9662:(f,A,v)=>{var E=v(7854),S=v(614),w=v(6330),R=E.TypeError;f.exports=function(x){if(S(x))return x;throw R(w(x)+" is not a function")}},6077:(f,A,v)=>{var E=v(7854),S=v(614),w=E.String,R=E.TypeError;f.exports=function(x){if("object"==typeof x||S(x))return x;throw R("Can't set "+w(x)+" as a prototype")}},1223:(f,A,v)=>{var E=v(5112),S=v(30),w=v(3070),R=E("unscopables"),x=Array.prototype;null==x[R]&&w.f(x,R,{configurable:!0,value:S(null)}),f.exports=function(W){x[R][W]=!0}},9670:(f,A,v)=>{var E=v(7854),S=v(111),w=E.String,R=E.TypeError;f.exports=function(x){if(S(x))return x;throw R(w(x)+" is not an object")}},1318:(f,A,v)=>{var E=v(5656),S=v(1400),w=v(6244),R=function(x){return function(W,K,ne){var le,me=E(W),be=w(me),ke=S(ne,be);if(x&&K!=K){for(;be>ke;)if((le=me[ke++])!=le)return!0}else for(;be>ke;ke++)if((x||ke in me)&&me[ke]===K)return x||ke||0;return!x&&-1}};f.exports={includes:R(!0),indexOf:R(!1)}},4326:(f,A,v)=>{var E=v(1702),S=E({}.toString),w=E("".slice);f.exports=function(R){return w(S(R),8,-1)}},648:(f,A,v)=>{var E=v(7854),S=v(1694),w=v(614),R=v(4326),x=v(5112)("toStringTag"),W=E.Object,K="Arguments"==R(function(){return arguments}());f.exports=S?R:function(ne){var le,me,be;return void 0===ne?"Undefined":null===ne?"Null":"string"==typeof(me=function(ke,Ze){try{return ke[Ze]}catch{}}(le=W(ne),x))?me:K?R(le):"Object"==(be=R(le))&&w(le.callee)?"Arguments":be}},7741:(f,A,v)=>{var E=v(1702)("".replace),S=String(Error("zxcasd").stack),w=/\n\s*at [^:]*:[^\n]*/,R=w.test(S);f.exports=function(x,W){if(R&&"string"==typeof x)for(;W--;)x=E(x,w,"");return x}},9920:(f,A,v)=>{var E=v(2597),S=v(3887),w=v(1236),R=v(3070);f.exports=function(x,W,K){for(var ne=S(W),le=R.f,me=w.f,be=0;be<ne.length;be++){var ke=ne[be];E(x,ke)||K&&E(K,ke)||le(x,ke,me(W,ke))}}},8544:(f,A,v)=>{var E=v(7293);f.exports=!E(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},4994:(f,A,v)=>{var E=v(3383).IteratorPrototype,S=v(30),w=v(9114),R=v(8003),x=v(7497),W=function(){return this};f.exports=function(K,ne,le,me){var be=ne+" Iterator";return K.prototype=S(E,{next:w(+!me,le)}),R(K,be,!1,!0),x[be]=W,K}},8880:(f,A,v)=>{var E=v(9781),S=v(3070),w=v(9114);f.exports=E?function(R,x,W){return S.f(R,x,w(1,W))}:function(R,x,W){return R[x]=W,R}},9114:f=>{f.exports=function(A,v){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:v}}},654:(f,A,v)=>{var E=v(2109),S=v(6916),w=v(1913),R=v(6530),x=v(614),W=v(4994),K=v(9518),ne=v(7674),le=v(8003),me=v(8880),be=v(1320),ke=v(5112),Ze=v(7497),Nt=v(3383),Vt=R.PROPER,kt=R.CONFIGURABLE,Sn=Nt.IteratorPrototype,ln=Nt.BUGGY_SAFARI_ITERATORS,dn=ke("iterator"),He="values",ct="entries",bt=function(){return this};f.exports=function(bn,Ye,lt,xt,hn,On,Gt){W(lt,Ye,xt);var G,ye,Ne,Ft=function(Ka){if(Ka===hn&&Vi)return Vi;if(!ln&&Ka in Ar)return Ar[Ka];switch(Ka){case"keys":case He:case ct:return function(){return new lt(this,Ka)}}return function(){return new lt(this)}},In=Ye+" Iterator",br=!1,Ar=bn.prototype,Nr=Ar[dn]||Ar["@@iterator"]||hn&&Ar[hn],Vi=!ln&&Nr||Ft(hn),nu="Array"==Ye&&Ar.entries||Nr;if(nu&&(G=K(nu.call(new bn)))!==Object.prototype&&G.next&&(w||K(G)===Sn||(ne?ne(G,Sn):x(G[dn])||be(G,dn,bt)),le(G,In,!0,!0),w&&(Ze[In]=bt)),Vt&&hn==He&&Nr&&Nr.name!==He&&(!w&&kt?me(Ar,"name",He):(br=!0,Vi=function(){return S(Nr,this)})),hn)if(ye={values:Ft(He),keys:On?Vi:Ft("keys"),entries:Ft(ct)},Gt)for(Ne in ye)(ln||br||!(Ne in Ar))&&be(Ar,Ne,ye[Ne]);else E({target:Ye,proto:!0,forced:ln||br},ye);return w&&!Gt||Ar[dn]===Vi||be(Ar,dn,Vi,{name:hn}),Ze[Ye]=Vi,ye}},9781:(f,A,v)=>{var E=v(7293);f.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(f,A,v)=>{var E=v(7854),S=v(111),w=E.document,R=S(w)&&S(w.createElement);f.exports=function(x){return R?w.createElement(x):{}}},8324:f=>{f.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(f,A,v)=>{var E=v(317)("span").classList,S=E&&E.constructor&&E.constructor.prototype;f.exports=S===Object.prototype?void 0:S},8113:(f,A,v)=>{var E=v(5005);f.exports=E("navigator","userAgent")||""},7392:(f,A,v)=>{var E,S,w=v(7854),R=v(8113),x=w.process,W=w.Deno,K=x&&x.versions||W&&W.version,ne=K&&K.v8;ne&&(S=(E=ne.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!S&&R&&(!(E=R.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=R.match(/Chrome\/(\d+)/))&&(S=+E[1]),f.exports=S},748:f=>{f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(f,A,v)=>{var E=v(7293),S=v(9114);f.exports=!E(function(){var w=Error("a");return!("stack"in w)||(Object.defineProperty(w,"stack",S(1,7)),7!==w.stack)})},2109:(f,A,v)=>{var E=v(7854),S=v(1236).f,w=v(8880),R=v(1320),x=v(3505),W=v(9920),K=v(4705);f.exports=function(ne,le){var me,be,ke,Ze,Nt,Vt=ne.target,kt=ne.global,Sn=ne.stat;if(me=kt?E:Sn?E[Vt]||x(Vt,{}):(E[Vt]||{}).prototype)for(be in le){if(Ze=le[be],ke=ne.noTargetGet?(Nt=S(me,be))&&Nt.value:me[be],!K(kt?be:Vt+(Sn?".":"#")+be,ne.forced)&&void 0!==ke){if(typeof Ze==typeof ke)continue;W(Ze,ke)}(ne.sham||ke&&ke.sham)&&w(Ze,"sham",!0),R(me,be,Ze,ne)}}},7293:f=>{f.exports=function(A){try{return!!A()}catch{return!0}}},2104:(f,A,v)=>{var E=v(4374),S=Function.prototype,w=S.apply,R=S.call;f.exports="object"==typeof Reflect&&Reflect.apply||(E?R.bind(w):function(){return R.apply(w,arguments)})},4374:(f,A,v)=>{var E=v(7293);f.exports=!E(function(){var S=function(){}.bind();return"function"!=typeof S||S.hasOwnProperty("prototype")})},6916:(f,A,v)=>{var E=v(4374),S=Function.prototype.call;f.exports=E?S.bind(S):function(){return S.apply(S,arguments)}},6530:(f,A,v)=>{var E=v(9781),S=v(2597),w=Function.prototype,R=E&&Object.getOwnPropertyDescriptor,x=S(w,"name"),W=x&&"something"===function(){}.name,K=x&&(!E||E&&R(w,"name").configurable);f.exports={EXISTS:x,PROPER:W,CONFIGURABLE:K}},1702:(f,A,v)=>{var E=v(4374),S=Function.prototype,R=S.call,x=E&&S.bind.bind(R,R);f.exports=E?function(W){return W&&x(W)}:function(W){return W&&function(){return R.apply(W,arguments)}}},5005:(f,A,v)=>{var E=v(7854),S=v(614),w=function(R){return S(R)?R:void 0};f.exports=function(R,x){return arguments.length<2?w(E[R]):E[R]&&E[R][x]}},8173:(f,A,v)=>{var E=v(9662);f.exports=function(S,w){var R=S[w];return null==R?void 0:E(R)}},7854:(f,A,v)=>{var E=function(S){return S&&S.Math==Math&&S};f.exports=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof v.g&&v.g)||function(){return this}()||Function("return this")()},2597:(f,A,v)=>{var E=v(1702),S=v(7908),w=E({}.hasOwnProperty);f.exports=Object.hasOwn||function(R,x){return w(S(R),x)}},3501:f=>{f.exports={}},490:(f,A,v)=>{var E=v(5005);f.exports=E("document","documentElement")},4664:(f,A,v)=>{var E=v(9781),S=v(7293),w=v(317);f.exports=!E&&!S(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a})},8361:(f,A,v)=>{var E=v(7854),S=v(1702),w=v(7293),R=v(4326),x=E.Object,W=S("".split);f.exports=w(function(){return!x("z").propertyIsEnumerable(0)})?function(K){return"String"==R(K)?W(K,""):x(K)}:x},9587:(f,A,v)=>{var E=v(614),S=v(111),w=v(7674);f.exports=function(R,x,W){var K,ne;return w&&E(K=x.constructor)&&K!==W&&S(ne=K.prototype)&&ne!==W.prototype&&w(R,ne),R}},2788:(f,A,v)=>{var E=v(1702),S=v(614),w=v(5465),R=E(Function.toString);S(w.inspectSource)||(w.inspectSource=function(x){return R(x)}),f.exports=w.inspectSource},8340:(f,A,v)=>{var E=v(111),S=v(8880);f.exports=function(w,R){E(R)&&"cause"in R&&S(w,"cause",R.cause)}},9909:(f,A,v)=>{var E,S,w,R=v(8536),x=v(7854),W=v(1702),K=v(111),ne=v(8880),le=v(2597),me=v(5465),be=v(6200),ke=v(3501),Ze="Object already initialized",Nt=x.TypeError;if(R||me.state){var kt=me.state||(me.state=new(0,x.WeakMap)),Sn=W(kt.get),ln=W(kt.has),dn=W(kt.set);E=function(He,ct){if(ln(kt,He))throw new Nt(Ze);return ct.facade=He,dn(kt,He,ct),ct},S=function(He){return Sn(kt,He)||{}},w=function(He){return ln(kt,He)}}else{var It=be("state");ke[It]=!0,E=function(He,ct){if(le(He,It))throw new Nt(Ze);return ct.facade=He,ne(He,It,ct),ct},S=function(He){return le(He,It)?He[It]:{}},w=function(He){return le(He,It)}}f.exports={set:E,get:S,has:w,enforce:function(He){return w(He)?S(He):E(He,{})},getterFor:function(He){return function(ct){var bt;if(!K(ct)||(bt=S(ct)).type!==He)throw Nt("Incompatible receiver, "+He+" required");return bt}}}},614:f=>{f.exports=function(A){return"function"==typeof A}},4705:(f,A,v)=>{var E=v(7293),S=v(614),w=/#|\.prototype\./,R=function(le,me){var be=W[x(le)];return be==ne||be!=K&&(S(me)?E(me):!!me)},x=R.normalize=function(le){return String(le).replace(w,".").toLowerCase()},W=R.data={},K=R.NATIVE="N",ne=R.POLYFILL="P";f.exports=R},111:(f,A,v)=>{var E=v(614);f.exports=function(S){return"object"==typeof S?null!==S:E(S)}},1913:f=>{f.exports=!1},2190:(f,A,v)=>{var E=v(7854),S=v(5005),w=v(614),R=v(7976),x=v(3307),W=E.Object;f.exports=x?function(K){return"symbol"==typeof K}:function(K){var ne=S("Symbol");return w(ne)&&R(ne.prototype,W(K))}},3383:(f,A,v)=>{var E,S,w,R=v(7293),x=v(614),W=v(30),K=v(9518),ne=v(1320),le=v(5112),me=v(1913),be=le("iterator"),ke=!1;[].keys&&("next"in(w=[].keys())?(S=K(K(w)))!==Object.prototype&&(E=S):ke=!0),null==E||R(function(){var Ze={};return E[be].call(Ze)!==Ze})?E={}:me&&(E=W(E)),x(E[be])||ne(E,be,function(){return this}),f.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:ke}},7497:f=>{f.exports={}},6244:(f,A,v)=>{var E=v(7466);f.exports=function(S){return E(S.length)}},133:(f,A,v)=>{var E=v(7392),S=v(7293);f.exports=!!Object.getOwnPropertySymbols&&!S(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&E&&E<41})},8536:(f,A,v)=>{var E=v(7854),S=v(614),w=v(2788),R=E.WeakMap;f.exports=S(R)&&/native code/.test(w(R))},6277:(f,A,v)=>{var E=v(1340);f.exports=function(S,w){return void 0===S?arguments.length<2?"":w:E(S)}},30:(f,A,v)=>{var E,S=v(9670),w=v(6048),R=v(748),x=v(3501),W=v(490),K=v(317),ne=v(6200)("IE_PROTO"),le=function(){},me=function(Ze){return"<script>"+Ze+"<\/script>"},be=function(Ze){Ze.write(me("")),Ze.close();var Nt=Ze.parentWindow.Object;return Ze=null,Nt},ke=function(){try{E=new ActiveXObject("htmlfile")}catch{}var Ze,Nt;ke=typeof document<"u"?document.domain&&E?be(E):((Nt=K("iframe")).style.display="none",W.appendChild(Nt),Nt.src=String("javascript:"),(Ze=Nt.contentWindow.document).open(),Ze.write(me("document.F=Object")),Ze.close(),Ze.F):be(E);for(var Vt=R.length;Vt--;)delete ke.prototype[R[Vt]];return ke()};x[ne]=!0,f.exports=Object.create||function(Ze,Nt){var Vt;return null!==Ze?(le.prototype=S(Ze),Vt=new le,le.prototype=null,Vt[ne]=Ze):Vt=ke(),void 0===Nt?Vt:w.f(Vt,Nt)}},6048:(f,A,v)=>{var E=v(9781),S=v(3353),w=v(3070),R=v(9670),x=v(5656),W=v(1956);A.f=E&&!S?Object.defineProperties:function(K,ne){R(K);for(var le,me=x(ne),be=W(ne),ke=be.length,Ze=0;ke>Ze;)w.f(K,le=be[Ze++],me[le]);return K}},3070:(f,A,v)=>{var E=v(7854),S=v(9781),w=v(4664),R=v(3353),x=v(9670),W=v(4948),K=E.TypeError,ne=Object.defineProperty,le=Object.getOwnPropertyDescriptor;A.f=S?R?function(me,be,ke){if(x(me),be=W(be),x(ke),"function"==typeof me&&"prototype"===be&&"value"in ke&&"writable"in ke&&!ke.writable){var Ze=le(me,be);Ze&&Ze.writable&&(me[be]=ke.value,ke={configurable:"configurable"in ke?ke.configurable:Ze.configurable,enumerable:"enumerable"in ke?ke.enumerable:Ze.enumerable,writable:!1})}return ne(me,be,ke)}:ne:function(me,be,ke){if(x(me),be=W(be),x(ke),w)try{return ne(me,be,ke)}catch{}if("get"in ke||"set"in ke)throw K("Accessors not supported");return"value"in ke&&(me[be]=ke.value),me}},1236:(f,A,v)=>{var E=v(9781),S=v(6916),w=v(5296),R=v(9114),x=v(5656),W=v(4948),K=v(2597),ne=v(4664),le=Object.getOwnPropertyDescriptor;A.f=E?le:function(me,be){if(me=x(me),be=W(be),ne)try{return le(me,be)}catch{}if(K(me,be))return R(!S(w.f,me,be),me[be])}},8006:(f,A,v)=>{var E=v(6324),S=v(748).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(w){return E(w,S)}},5181:(f,A)=>{A.f=Object.getOwnPropertySymbols},9518:(f,A,v)=>{var E=v(7854),S=v(2597),w=v(614),R=v(7908),x=v(6200),W=v(8544),K=x("IE_PROTO"),ne=E.Object,le=ne.prototype;f.exports=W?ne.getPrototypeOf:function(me){var be=R(me);if(S(be,K))return be[K];var ke=be.constructor;return w(ke)&&be instanceof ke?ke.prototype:be instanceof ne?le:null}},7976:(f,A,v)=>{var E=v(1702);f.exports=E({}.isPrototypeOf)},6324:(f,A,v)=>{var E=v(1702),S=v(2597),w=v(5656),R=v(1318).indexOf,x=v(3501),W=E([].push);f.exports=function(K,ne){var le,me=w(K),be=0,ke=[];for(le in me)!S(x,le)&&S(me,le)&&W(ke,le);for(;ne.length>be;)S(me,le=ne[be++])&&(~R(ke,le)||W(ke,le));return ke}},1956:(f,A,v)=>{var E=v(6324),S=v(748);f.exports=Object.keys||function(w){return E(w,S)}},5296:(f,A)=>{var v={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,S=E&&!v.call({1:2},1);A.f=S?function(w){var R=E(this,w);return!!R&&R.enumerable}:v},7674:(f,A,v)=>{var E=v(1702),S=v(9670),w=v(6077);f.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,x=!1,W={};try{(R=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(W,[]),x=W instanceof Array}catch{}return function(K,ne){return S(K),w(ne),x?R(K,ne):K.__proto__=ne,K}}():void 0)},2140:(f,A,v)=>{var E=v(7854),S=v(6916),w=v(614),R=v(111),x=E.TypeError;f.exports=function(W,K){var ne,le;if("string"===K&&w(ne=W.toString)&&!R(le=S(ne,W))||w(ne=W.valueOf)&&!R(le=S(ne,W))||"string"!==K&&w(ne=W.toString)&&!R(le=S(ne,W)))return le;throw x("Can't convert object to primitive value")}},3887:(f,A,v)=>{var E=v(5005),S=v(1702),w=v(8006),R=v(5181),x=v(9670),W=S([].concat);f.exports=E("Reflect","ownKeys")||function(K){var ne=w.f(x(K)),le=R.f;return le?W(ne,le(K)):ne}},1320:(f,A,v)=>{var E=v(7854),S=v(614),w=v(2597),R=v(8880),x=v(3505),W=v(2788),K=v(9909),ne=v(6530).CONFIGURABLE,le=K.get,me=K.enforce,be=String(String).split("String");(f.exports=function(ke,Ze,Nt,Vt){var kt,Sn=!!Vt&&!!Vt.unsafe,ln=!!Vt&&!!Vt.enumerable,dn=!!Vt&&!!Vt.noTargetGet,It=Vt&&void 0!==Vt.name?Vt.name:Ze;S(Nt)&&("Symbol("===String(It).slice(0,7)&&(It="["+String(It).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!w(Nt,"name")||ne&&Nt.name!==It)&&R(Nt,"name",It),(kt=me(Nt)).source||(kt.source=be.join("string"==typeof It?It:""))),ke!==E?(Sn?!dn&&ke[Ze]&&(ln=!0):delete ke[Ze],ln?ke[Ze]=Nt:R(ke,Ze,Nt)):ln?ke[Ze]=Nt:x(Ze,Nt)})(Function.prototype,"toString",function(){return S(this)&&le(this).source||W(this)})},2261:(f,A,v)=>{var E,S,w=v(6916),R=v(1702),x=v(1340),W=v(7066),K=v(2999),ne=v(2309),le=v(30),me=v(9909).get,be=v(9441),ke=v(7168),Ze=ne("native-string-replace",String.prototype.replace),Nt=RegExp.prototype.exec,Vt=Nt,kt=R("".charAt),Sn=R("".indexOf),ln=R("".replace),dn=R("".slice),It=(S=/b*/g,w(Nt,E=/a/,"a"),w(Nt,S,"a"),0!==E.lastIndex||0!==S.lastIndex),He=K.BROKEN_CARET,ct=void 0!==/()??/.exec("")[1];(It||ct||He||be||ke)&&(Vt=function(bt){var bn,Ye,lt,xt,hn,On,Gt,G=this,ye=me(G),Ne=x(bt),Ft=ye.raw;if(Ft)return Ft.lastIndex=G.lastIndex,bn=w(Vt,Ft,Ne),G.lastIndex=Ft.lastIndex,bn;var In=ye.groups,br=He&&G.sticky,Ar=w(W,G),Nr=G.source,Vi=0,nu=Ne;if(br&&(Ar=ln(Ar,"y",""),-1===Sn(Ar,"g")&&(Ar+="g"),nu=dn(Ne,G.lastIndex),G.lastIndex>0&&(!G.multiline||G.multiline&&"\n"!==kt(Ne,G.lastIndex-1))&&(Nr="(?: "+Nr+")",nu=" "+nu,Vi++),Ye=new RegExp("^(?:"+Nr+")",Ar)),ct&&(Ye=new RegExp("^"+Nr+"$(?!\\s)",Ar)),It&&(lt=G.lastIndex),xt=w(Nt,br?Ye:G,nu),br?xt?(xt.input=dn(xt.input,Vi),xt[0]=dn(xt[0],Vi),xt.index=G.lastIndex,G.lastIndex+=xt[0].length):G.lastIndex=0:It&&xt&&(G.lastIndex=G.global?xt.index+xt[0].length:lt),ct&&xt&&xt.length>1&&w(Ze,xt[0],Ye,function(){for(hn=1;hn<arguments.length-2;hn++)void 0===arguments[hn]&&(xt[hn]=void 0)}),xt&&In)for(xt.groups=On=le(null),hn=0;hn<In.length;hn++)On[(Gt=In[hn])[0]]=xt[Gt[1]];return xt}),f.exports=Vt},7066:(f,A,v)=>{var E=v(9670);f.exports=function(){var S=E(this),w="";return S.global&&(w+="g"),S.ignoreCase&&(w+="i"),S.multiline&&(w+="m"),S.dotAll&&(w+="s"),S.unicode&&(w+="u"),S.sticky&&(w+="y"),w}},2999:(f,A,v)=>{var E=v(7293),S=v(7854).RegExp,w=E(function(){var W=S("a","y");return W.lastIndex=2,null!=W.exec("abcd")}),R=w||E(function(){return!S("a","y").sticky}),x=w||E(function(){var W=S("^r","gy");return W.lastIndex=2,null!=W.exec("str")});f.exports={BROKEN_CARET:x,MISSED_STICKY:R,UNSUPPORTED_Y:w}},9441:(f,A,v)=>{var E=v(7293),S=v(7854).RegExp;f.exports=E(function(){var w=S(".","s");return!(w.dotAll&&w.exec("\n")&&"s"===w.flags)})},7168:(f,A,v)=>{var E=v(7293),S=v(7854).RegExp;f.exports=E(function(){var w=S("(?<a>b)","g");return"b"!==w.exec("b").groups.a||"bc"!=="b".replace(w,"$<a>c")})},4488:(f,A,v)=>{var E=v(7854).TypeError;f.exports=function(S){if(null==S)throw E("Can't call method on "+S);return S}},3505:(f,A,v)=>{var E=v(7854),S=Object.defineProperty;f.exports=function(w,R){try{S(E,w,{value:R,configurable:!0,writable:!0})}catch{E[w]=R}return R}},8003:(f,A,v)=>{var E=v(3070).f,S=v(2597),w=v(5112)("toStringTag");f.exports=function(R,x,W){R&&!W&&(R=R.prototype),R&&!S(R,w)&&E(R,w,{configurable:!0,value:x})}},6200:(f,A,v)=>{var E=v(2309),S=v(9711),w=E("keys");f.exports=function(R){return w[R]||(w[R]=S(R))}},5465:(f,A,v)=>{var E=v(7854),S=v(3505),w="__core-js_shared__",R=E[w]||S(w,{});f.exports=R},2309:(f,A,v)=>{var E=v(1913),S=v(5465);(f.exports=function(w,R){return S[w]||(S[w]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:E?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(f,A,v)=>{var E=v(9303),S=Math.max,w=Math.min;f.exports=function(R,x){var W=E(R);return W<0?S(W+x,0):w(W,x)}},5656:(f,A,v)=>{var E=v(8361),S=v(4488);f.exports=function(w){return E(S(w))}},9303:f=>{var A=Math.ceil,v=Math.floor;f.exports=function(E){var S=+E;return S!=S||0===S?0:(S>0?v:A)(S)}},7466:(f,A,v)=>{var E=v(9303),S=Math.min;f.exports=function(w){return w>0?S(E(w),9007199254740991):0}},7908:(f,A,v)=>{var E=v(7854),S=v(4488),w=E.Object;f.exports=function(R){return w(S(R))}},7593:(f,A,v)=>{var E=v(7854),S=v(6916),w=v(111),R=v(2190),x=v(8173),W=v(2140),K=v(5112),ne=E.TypeError,le=K("toPrimitive");f.exports=function(me,be){if(!w(me)||R(me))return me;var ke,Ze=x(me,le);if(Ze){if(void 0===be&&(be="default"),ke=S(Ze,me,be),!w(ke)||R(ke))return ke;throw ne("Can't convert object to primitive value")}return void 0===be&&(be="number"),W(me,be)}},4948:(f,A,v)=>{var E=v(7593),S=v(2190);f.exports=function(w){var R=E(w,"string");return S(R)?R:R+""}},1694:(f,A,v)=>{var E={};E[v(5112)("toStringTag")]="z",f.exports="[object z]"===String(E)},1340:(f,A,v)=>{var E=v(7854),S=v(648),w=E.String;f.exports=function(R){if("Symbol"===S(R))throw TypeError("Cannot convert a Symbol value to a string");return w(R)}},6330:(f,A,v)=>{var E=v(7854).String;f.exports=function(S){try{return E(S)}catch{return"Object"}}},9711:(f,A,v)=>{var E=v(1702),S=0,w=Math.random(),R=E(1..toString);f.exports=function(x){return"Symbol("+(void 0===x?"":x)+")_"+R(++S+w,36)}},3307:(f,A,v)=>{var E=v(133);f.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(f,A,v)=>{var E=v(9781),S=v(7293);f.exports=E&&S(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(f,A,v)=>{var E=v(7854),S=v(2309),w=v(2597),R=v(9711),x=v(133),W=v(3307),K=S("wks"),ne=E.Symbol,le=ne&&ne.for,me=W?ne:ne&&ne.withoutSetter||R;f.exports=function(be){if(!w(K,be)||!x&&"string"!=typeof K[be]){var ke="Symbol."+be;K[be]=x&&w(ne,be)?ne[be]:W&&le?le(ke):me(ke)}return K[be]}},9191:(f,A,v)=>{var E=v(5005),S=v(2597),w=v(8880),R=v(7976),x=v(7674),W=v(9920),K=v(9587),ne=v(6277),le=v(8340),me=v(7741),be=v(2914),ke=v(1913);f.exports=function(Ze,Nt,Vt,kt){var Sn=kt?2:1,ln=Ze.split("."),dn=ln[ln.length-1],It=E.apply(null,ln);if(It){var He=It.prototype;if(!ke&&S(He,"cause")&&delete He.cause,!Vt)return It;var ct=E("Error"),bt=Nt(function(bn,Ye){var lt=ne(kt?Ye:bn,void 0),xt=kt?new It(bn):new It;return void 0!==lt&&w(xt,"message",lt),be&&w(xt,"stack",me(xt.stack,2)),this&&R(He,this)&&K(xt,this,bt),arguments.length>Sn&&le(xt,arguments[Sn]),xt});if(bt.prototype=He,"Error"!==dn&&(x?x(bt,ct):W(bt,ct,{name:!0})),W(bt,It),!ke)try{He.name!==dn&&w(He,"name",dn),He.constructor=bt}catch{}return bt}}},6992:(f,A,v)=>{var E=v(5656),S=v(1223),w=v(7497),R=v(9909),x=v(3070).f,W=v(654),K=v(1913),ne=v(9781),le="Array Iterator",me=R.set,be=R.getterFor(le);f.exports=W(Array,"Array",function(Ze,Nt){me(this,{type:le,target:E(Ze),index:0,kind:Nt})},function(){var Ze=be(this),Nt=Ze.target,Vt=Ze.kind,kt=Ze.index++;return!Nt||kt>=Nt.length?(Ze.target=void 0,{value:void 0,done:!0}):"keys"==Vt?{value:kt,done:!1}:"values"==Vt?{value:Nt[kt],done:!1}:{value:[kt,Nt[kt]],done:!1}},"values");var ke=w.Arguments=w.Array;if(S("keys"),S("values"),S("entries"),!K&&ne&&"values"!==ke.name)try{x(ke,"name",{value:"values"})}catch{}},1703:(f,A,v)=>{var E=v(2109),S=v(7854),w=v(2104),R=v(9191),x=S.WebAssembly,W=7!==Error("e",{cause:7}).cause,K=function(le,me){var be={};be[le]=R(le,me,W),E({global:!0,forced:W},be)},ne=function(le,me){if(x&&x[le]){var be={};be[le]=R("WebAssembly."+le,me,W),E({target:"WebAssembly",stat:!0,forced:W},be)}};K("Error",function(le){return function(me){return w(le,this,arguments)}}),K("EvalError",function(le){return function(me){return w(le,this,arguments)}}),K("RangeError",function(le){return function(me){return w(le,this,arguments)}}),K("ReferenceError",function(le){return function(me){return w(le,this,arguments)}}),K("SyntaxError",function(le){return function(me){return w(le,this,arguments)}}),K("TypeError",function(le){return function(me){return w(le,this,arguments)}}),K("URIError",function(le){return function(me){return w(le,this,arguments)}}),ne("CompileError",function(le){return function(me){return w(le,this,arguments)}}),ne("LinkError",function(le){return function(me){return w(le,this,arguments)}}),ne("RuntimeError",function(le){return function(me){return w(le,this,arguments)}})},4916:(f,A,v)=>{var E=v(2109),S=v(2261);E({target:"RegExp",proto:!0,forced:/./.exec!==S},{exec:S})},3948:(f,A,v)=>{var E=v(7854),S=v(8324),w=v(8509),R=v(6992),x=v(8880),W=v(5112),K=W("iterator"),ne=W("toStringTag"),le=R.values,me=function(ke,Ze){if(ke){if(ke[K]!==le)try{x(ke,K,le)}catch{ke[K]=le}if(ke[ne]||x(ke,ne,Ze),S[Ze])for(var Nt in R)if(ke[Nt]!==R[Nt])try{x(ke,Nt,R[Nt])}catch{ke[Nt]=R[Nt]}}};for(var be in S)me(E[be]&&E[be].prototype,be);me(w,"DOMTokenList")}},c={};function h(f){var A=c[f];if(void 0!==A)return A.exports;var v=c[f]={exports:{}};return s[f](v,v.exports,h),v.exports}h.n=f=>{var A=f&&f.__esModule?()=>f.default:()=>f;return h.d(A,{a:A}),A},h.d=(f,A)=>{for(var v in A)h.o(A,v)&&!h.o(f,v)&&Object.defineProperty(f,v,{enumerable:!0,get:A[v]})},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),h.o=(f,A)=>Object.prototype.hasOwnProperty.call(f,A),h.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var g={};return(()=>{h.r(g),h.d(g,{AudioExtension:()=>Sn,AudioProcessor:()=>Vt,Extension:()=>kt,Ticker:()=>dn,VideoProcessor:()=>Nt,logger:()=>K,reporter:()=>me});var f=h(4341);function A(It,He,ct){return He in It?f(It,He,{value:ct,enumerable:!0,configurable:!0,writable:!0}):It[He]=ct,It}h(1703),h(6992),h(3948);var v=h(3476),E=h.n(v);function S(){let It=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,He=arguments.length>1?arguments[1]:void 0;const ct=Math.random().toString(16).substr(2,It).toLowerCase();return ct.length===It?"".concat(He).concat(ct):"".concat(He).concat(ct)+S(It-ct.length,"")}h(4916);const w=Date.now(),R={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function x(){const It=new Date;return It.toTimeString().split(" ")[0]+":"+It.getMilliseconds()}const W=It=>{for(const He in R)if(Object.prototype.hasOwnProperty.call(R,He)&&R[He]===It)return He;return"DEFAULT"},K=new class{constructor(){A(this,"logLevel",R.DEBUG),A(this,"hookLog",void 0)}debug(){for(var It=arguments.length,He=new Array(It),ct=0;ct<It;ct++)He[ct]=arguments[ct];const bt=[R.DEBUG].concat(He);this.log.apply(this,bt)}info(){for(var It=arguments.length,He=new Array(It),ct=0;ct<It;ct++)He[ct]=arguments[ct];const bt=[R.INFO].concat(He);this.log.apply(this,bt)}warning(){for(var It=arguments.length,He=new Array(It),ct=0;ct<It;ct++)He[ct]=arguments[ct];const bt=[R.WARNING].concat(He);this.log.apply(this,bt)}error(){for(var It=arguments.length,He=new Array(It),ct=0;ct<It;ct++)He[ct]=arguments[ct];const bt=[R.ERROR].concat(He);this.log.apply(this,bt)}log(){for(var It,He=arguments.length,ct=new Array(He),bt=0;bt<He;bt++)ct[bt]=arguments[bt];if(Date.now()-w<100)return void setTimeout(()=>{this.log(...ct)},Date.now()-w);const bn=Math.max(0,Math.min(4,ct[0]));if(ct[0]=x()+" Agora-Extension [".concat(W(bn),"]:"),bn<this.logLevel)return;const Ye=x()+" %cAgora-Extension [".concat(W(bn),"]:");let lt=[];switch(bn){case R.DEBUG:lt=[Ye,"color: #64B5F6;"].concat(ct.slice(1)),console.log.apply(console,lt);break;case R.INFO:lt=[Ye,"color: #1E88E5; font-weight: bold;"].concat(ct.slice(1)),console.log.apply(console,lt);break;case R.WARNING:lt=[Ye,"color: #FB8C00; font-weight: bold;"].concat(ct.slice(1)),console.warn.apply(console,lt);break;case R.ERROR:lt=[Ye,"color: #B00020; font-weight: bold;"].concat(ct.slice(1)),console.error.apply(console,lt)}null===(It=this.hookLog)||void 0===It||It.call(this,bn,lt)}};function ne(It,He){var ct=Object.keys(It);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(It);He&&(bt=bt.filter(function(bn){return Object.getOwnPropertyDescriptor(It,bn).enumerable})),ct.push.apply(ct,bt)}return ct}function le(It){for(var He=1;He<arguments.length;He++){var ct=null!=arguments[He]?arguments[He]:{};He%2?ne(Object(ct),!0).forEach(function(bt){A(It,bt,ct[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(ct)):ne(Object(ct)).forEach(function(bt){Object.defineProperty(It,bt,Object.getOwnPropertyDescriptor(ct,bt))})}return It}const me=new class{constructor(){A(this,"apiInvokeMsgQueue",[]),A(this,"hookApiInvoke",void 0)}reportApiInvoke(It){It.timeout=It.timeout||6e4,It.reportResult=void 0===It.reportResult||It.reportResult;const He=Date.now(),ct=()=>({name:It.name,apiInvokeTime:He,options:It.options});let bt=!1;var bn;(bn=It.timeout,new(E())(lt=>{window.setTimeout(lt,bn)})).then(()=>{bt||(this.sendApiInvoke(le(le({},ct()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),K.debug("".concat(It.name," timeout")))});const Ye=new Error("".concat(It.name,": this api invoke is end"));return{onSuccess:lt=>{if(bt)throw Ye;bt=!0,this.sendApiInvoke(le(le({},ct()),{},{success:!0},It.reportResult&&{result:lt}))},onError:lt=>{if(bt)throw lt;bt=!0,this.sendApiInvoke(le(le({},ct()),{},{success:!1,error:lt.toString()}))}}}sendApiInvoke(It){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,It]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(It)}};function be(It,He){var ct=Object.keys(It);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(It);He&&(bt=bt.filter(function(bn){return Object.getOwnPropertyDescriptor(It,bn).enumerable})),ct.push.apply(ct,bt)}return ct}function ke(It){for(var He=1;He<arguments.length;He++){var ct=null!=arguments[He]?arguments[He]:{};He%2?be(Object(ct),!0).forEach(function(bt){A(It,bt,ct[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(ct)):be(Object(ct)).forEach(function(bt){Object.defineProperty(It,bt,Object.getOwnPropertyDescriptor(ct,bt))})}return It}class Ze extends class{constructor(){A(this,"_events",{}),A(this,"addListener",this.on)}getListeners(He){return this._events[He]?this._events[He].map(ct=>ct.listener):[]}on(He,ct){this._events[He]||(this._events[He]=[]);const bt=this._events[He];-1===this._indexOfListener(bt,ct)&&bt.push({listener:ct,once:!1})}once(He,ct){this._events[He]||(this._events[He]=[]);const bt=this._events[He];-1===this._indexOfListener(bt,ct)&&bt.push({listener:ct,once:!0})}off(He,ct){if(!this._events[He])return;const bt=this._events[He],bn=this._indexOfListener(bt,ct);-1!==bn&&bt.splice(bn,1),0===this._events[He].length&&delete this._events[He]}removeAllListeners(He){He?delete this._events[He]:this._events={}}emit(He){this._events[He]||(this._events[He]=[]);const ct=this._events[He].map(lt=>lt);for(var bt=arguments.length,bn=new Array(bt>1?bt-1:0),Ye=1;Ye<bt;Ye++)bn[Ye-1]=arguments[Ye];for(let lt=0;lt<ct.length;lt+=1){const xt=ct[lt];xt.once&&this.off(He,xt.listener),xt.listener.apply(this,bn||[])}}_indexOfListener(He,ct){let bt=He.length;for(;bt--;)if(He[bt].listener===ct)return bt;return-1}emitAsPromise(He){for(var ct=arguments.length,bt=new Array(ct>1?ct-1:0),bn=1;bn<ct;bn++)bt[bn-1]=arguments[bn];return 0===this.getListeners(He).length?E().reject(new Error("No promise event handler.")):new(E())((Ye,lt)=>{this.emit(He,...bt,Ye,lt)})}emitAsPromiseNoResponse(He){for(var ct=arguments.length,bt=new Array(ct>1?ct-1:0),bn=1;bn<ct;bn++)bt[bn-1]=arguments[bn];return 0===this.getListeners(He).length?E().resolve():new(E())((Ye,lt)=>{this.emit(He,...bt,Ye,lt)})}}{get enabled(){return this._enabled}output(He,ct){if(this.outputTrack===He)return;const bt=me.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:He?.toString()}});this.outputTrack=He,this.destination&&this.destination.updateInput({track:He,context:ct}),bt.onSuccess()}constructor(){super(),A(this,"inputTrack",void 0),A(this,"outputTrack",void 0),A(this,"_enabled",!0),A(this,"_source",void 0),A(this,"ID",S(6,"")),A(this,"destination",void 0),A(this,"context",void 0),A(this,"name",void 0)}enable(){if(this._enabled)return;const He=me.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});K.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var ct;const bt=null===(ct=this.onEnableChange)||void 0===ct?void 0:ct.call(this,this._enabled);if(bt instanceof E())return bt.then(()=>{He.onSuccess()}).catch(bn=>{throw He.onError(bn),bn});He.onSuccess()}catch(bt){throw He.onError(bt),bt}}disable(){if(!this._enabled)return;const He=me.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});K.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var ct;const bt=null===(ct=this.onEnableChange)||void 0===ct?void 0:ct.call(this,this._enabled);if(bt instanceof E())return bt.then(()=>{He.onSuccess()}).catch(bn=>{throw He.onError(bn),bn});He.onSuccess()}catch(bt){throw He.onError(bt),bt}}}class Nt extends Ze{get kind(){return"video"}pipe(He){const ct=me.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:He.name}});if(this.destination===He)return ct.onSuccess(),He;if(He._source){const bt=new Error("Processor ".concat(He.name," already piped, please call unpipe beforehand."));throw ct.onError(bt),bt}return this.destination&&this.unpipe(),this.destination=He,He._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),ct.onSuccess(),He}unpipe(){if(!this.destination)return;const He=me.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});K.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const ct=this.destination;this.destination._source=void 0,this.destination=void 0,ct.reset()}finally{He.onSuccess()}}updateInput(He){var ct,bt;He.context!==this.context&&(this.context=He.context,null===(ct=this.onPiped)||void 0===ct||ct.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:He.context})),He.track&&this.inputTrack!==He.track&&(this.inputTrack=He.track,null===(bt=this.onTrack)||void 0===bt||bt.call(this,He.track,this.context))}reset(){var He;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(He=this.onUnpiped)||void 0===He||He.call(this),this.destination&&this.destination.reset()}}class Vt extends Ze{constructor(){super(...arguments),A(this,"inputNode",void 0),A(this,"outputNode",void 0),A(this,"destination",void 0),A(this,"context",void 0)}get kind(){return"audio"}pipe(He){const ct=me.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:He.name}});if(this.destination===He)return ct.onSuccess(),He;if(He._source){const bt=new Error("Processor ".concat(He.name," already piped, please call unpipe beforehand."));throw ct.onError(bt),bt}return this.destination&&this.unpipe(),this.destination=He,He._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),ct.onSuccess(),He}unpipe(){if(!this.destination)return;K.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const He=me.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var ct;let bt=this.destination;null===(ct=this.outputNode)||void 0===ct||ct.disconnect(),this.destination._source=void 0,this.destination=void 0,bt.reset()}finally{He.onSuccess()}}output(He,ct){if(He instanceof MediaStreamTrack)super.output(He,ct);else if(He instanceof AudioNode){if(this.outputNode===He)return;const bt=me.reportApiInvoke({name:"".concat(this.name,".output"),options:ke(ke({},He instanceof MediaStreamTrack&&{track:He.toString()}),He instanceof AudioNode&&{audioNode:He.toString()})});this.outputNode=He,this.destination&&this.destination.updateInput({node:He,context:ct}),bt.onSuccess()}}updateInput(He){var ct,bt,bn;He.context!==this.context&&(this.context=He.context,null===(ct=this.onPiped)||void 0===ct||ct.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:He.context})),He.track&&this.inputTrack!==He.track&&(this.inputTrack=He.track,null===(bt=this.onTrack)||void 0===bt||bt.call(this,He.track,this.context)),He.node&&this.inputNode!==He.node&&(this.inputNode=He.node,null===(bn=this.onNode)||void 0===bn||bn.call(this,He.node,this.context))}reset(){var He;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(He=this.onUnpiped)||void 0===He||He.call(this),this.destination&&this.destination.reset()}}class kt{constructor(){A(this,"__registered__",!1),A(this,"logger",K),A(this,"reporter",me),A(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class Sn extends kt{}let ln;class dn{get running(){return this._running}constructor(He,ct){if(A(this,"type",void 0),A(this,"interval",void 0),A(this,"fn",void 0),A(this,"_running",!1),A(this,"_osc",void 0),!He)throw new Error;if(ct<=0)throw new Error;this.type=He,this.interval=ct}add(He){this.fn=He}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const He=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&He()},this.interval)};He();break}case"RAF":{const He=ct=>{requestAnimationFrame(bt=>{bt-ct<this.interval?this._running&&He(ct):(this.fn&&this.fn(),this._running&&He(bt))})};He(performance.now());break}case"Oscillator":{ln||(ln=new AudioContext);const He=ln.createGain();let ct;He.gain.value=0,He.connect(ln.destination);const bt=()=>{this.fn&&this.fn(),ct&&ct.disconnect(),ct=ln.createOscillator(),this._osc=ct,ct.connect(He),this._running&&(ct.onended=bt,ct.start(0),ct.stop(ln.currentTime+this.interval/1e3))};bt();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),g})()})(WU),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(D8=HTMLCanvasElement.prototype.getContext,function(){let n=arguments;return"webgl"===n[0]&&(n=[].slice.call(arguments),n[0]="experimental-webgl"),D8.apply(null,n)}));const Pz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function Ak(n){const o=new Uint8Array([99,114,121,112,116,105,105]),s=o.length,c=n,h=c.length,g=new Uint8Array(h),f=new Uint8Array(256);for(let w=0;w<256;w++)f[w]=w;let A=0;for(let w=0;w<256;w++)A=(A+f[w]+o[w%s])%256,[f[w],f[A]]=[f[A],f[w]];let v,E=0;A=0;for(let w=0;w<0+h;w++)E=(E+1)%256,A=(A+f[E])%256,[f[E],f[A]]=[f[A],f[E]],v=f[(f[E]+f[A])%256],w>=0&&(g[w-0]=c[w-0]^v);const S=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+S+"`")()}const k8=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class P8{constructor(o,s){X(this,"program",void 0),X(this,"gl",void 0),X(this,"kernel",void 0),this.gl=o,this.kernel=s||k8,this.program=function(c,h){const g=Ak(h),f=function jx(n,o,s,c){const h=[];for(let g=0;g<o.length;++g)h.push(cS(n,o[g],0===g?n.VERTEX_SHADER:n.FRAGMENT_SHADER));return function(g,f,A,v){const E=g.createProgram();if(!E)throw new F(P.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(f.forEach(S=>{g.attachShader(E,S)}),A&&A.forEach((S,w)=>{g.bindAttribLocation(E,v?v[w]:w,S)}),g.linkProgram(E),!g.getProgramParameter(E,g.LINK_STATUS)){const S=g.getProgramInfoLog(E);throw g.deleteProgram(E),new F(P.WEBGL_INTERNAL_ERROR,"error in program linking:"+S)}return E}(n,h,s,c)}(c,[Ak(Pz),g]);{const A=c.getAttribLocation(f,"a_position"),v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}{const A=c.getAttribLocation(f,"a_texCoord"),v=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}return f}(this.gl,this.kernel)}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(o,1)}}class ev extends P8{constructor(o,s,c,h){super(o,s),X(this,"xOffset",void 0),X(this,"yOffset",void 0),X(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/h}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),s=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(s,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(o,1)}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel)}setSize(o,s){this.xOffset=1/o,this.yOffset=1/s}}const zH=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class YH extends ev{constructor(o,s,c){super(o,zH,s,c)}}const qH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class N8 extends ev{constructor(o,s,c){super(o,qH,s,c)}}const JH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class $H extends ev{constructor(o,s,c){super(o,JH,s,c)}}const XH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],ZH=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],M8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],eG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class tG extends ev{constructor(o,s,c,h){super(o,XH,c,h),X(this,"inputTexture",void 0),X(this,"lightLevel",.1),X(this,"rednessLevel",.5),X(this,"mskin_he_max",175/180*3.141593),X(this,"mskin_he_min",115/180*3.141593),X(this,"mskin_hc_max",173/180*3.141593),X(this,"mskin_hc_min",116/180*3.141593),X(this,"mskin_hc_axis",2.04203545),X(this,"mfacts_rotate_c",0),X(this,"mfacts_rotate_le",0),X(this,"mfacts_rotate_ge",0),X(this,"tab_addr",null),X(this,"lutTextures",[]),this.inputTexture=s,this.init()}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),s=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(s,this.denoiseLevel),this.gl.uniform1f(o,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const h=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(h,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),f=this.gl.getUniformLocation(this.program,"skin_he_min"),A=this.gl.getUniformLocation(this.program,"skin_hc_max"),v=this.gl.getUniformLocation(this.program,"skin_hc_min"),E=this.gl.getUniformLocation(this.program,"skin_hc_axis"),S=this.gl.getUniformLocation(this.program,"facts_rotate_c"),w=this.gl.getUniformLocation(this.program,"facts_rotate_le"),R=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(f,this.mskin_he_min),this.gl.uniform1f(A,this.mskin_hc_max),this.gl.uniform1f(v,this.mskin_hc_min),this.gl.uniform1f(E,this.mskin_hc_axis),this.gl.uniform1f(S,this.mfacts_rotate_c),this.gl.uniform1f(w,this.mfacts_rotate_le),this.gl.uniform1f(R,this.mfacts_rotate_ge);const x=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(x,2);const W=["lighten_lut"],K=[this.gl.TEXTURE3];for(let ne=0;ne<W.length;ne++){const le=this.gl.getUniformLocation(this.program,W[ne]);this.gl.activeTexture(K[ne]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[ne]),this.gl.uniform1i(le,ne+3)}}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel),void 0!==o.lightLevel&&(this.lightLevel=o.lightLevel),void 0!==o.rednessLevel&&(this.rednessLevel=o.rednessLevel,this.updateRedness(this.rednessLevel)),o.lighteningContrastLevel&&this.updateLut(o.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(M8);const o=[this.tab_addr],s=[256],c=[1];for(let h=0;h<o.length;h++){const g=this.gl.createTexture();if(!g)throw new F(P.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,s[h],c[h],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,o[h]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(o){let c,h,g=o,f=g;g>1&&(g=1),g<0&&(g=0),f>1&&(f=1),f<0&&(f=0),this.mfacts_rotate_c=.8*g,f<.8&&(f=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*f)/180*3.141593,this.mskin_hc_min=(116-4*f)/180*3.141593,this.mskin_hc_axis=(117-4*f)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,h=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,h=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c}updateLut(o){let s=null;if(0===o&&(s=M8),1===o&&(s=eG),2===o&&(s=ZH),!s)throw new F(P.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+o);this.tab_addr=new Uint8Array(s);const c=[this.tab_addr],h=[256],g=[1];for(let f=0;f<c.length;f++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[f]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,h[f],g[f],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[f])}}class nG{constructor(){X(this,"gl",null),X(this,"canvas",null),X(this,"programs",[]),X(this,"commonProgram",null),X(this,"inputTexture",null),X(this,"outputTextures",[]),X(this,"fbos",[]),X(this,"originalFrameWidth",0),X(this,"originalFrameHeight",0),X(this,"enableBeauty",!1),X(this,"denoiseLevel",5),X(this,"lightLevel",.35),X(this,"rednessLevel",.5),X(this,"lighteningContrastLevel",1)}setEnableBeauty(o){this.enableBeauty=!!o}init(o,s,c){if(!Zc().supportWebGL)throw new F(P.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new F(P.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(o,s),!this.inputTexture)throw new F(P.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new P8(this.gl)),this.programs.push(new YH(this.gl,o,s)),this.programs.push(new N8(this.gl,o,s)),this.programs.push(new $H(this.gl,o,s)),this.programs.push(new tG(this.gl,this.inputTexture,o,s)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(o){if(!this.gl||!this.commonProgram||!this.canvas)return void Q.warning("video effect manager is not init!");let s=0;if(this.originalFrameHeight===o.videoWidth&&this.originalFrameWidth===o.videoHeight)s=2;else if(this.originalFrameHeight!==o.videoHeight||this.originalFrameWidth!==o.videoWidth){if(Q.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(o.videoWidth,"x").concat(o.videoHeight)),0===o.videoHeight||0===o.videoWidth)return void Q.debug("beauty effect: skip 0 resolution frame");this.canvas.width=o.videoWidth,this.canvas.height=o.videoHeight,o.setAttribute("width",o.videoWidth.toString()),o.setAttribute("height",o.videoHeight.toString()),this.release(),this.init(o.videoWidth,o.videoHeight,this.canvas)}this.gl.viewport(0,0,o.videoWidth,o.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const f=this.programs[g].program;this.gl.useProgram(f);const A=this.gl.getUniformLocation(f,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[s+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[s+g%2]),this.gl.uniform1i(A,0)}this.gl.useProgram(this.commonProgram);const h=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(h,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(o){this.programs.forEach(s=>{s instanceof ev&&s.setParameters({denoiseLevel:o})}),this.denoiseLevel=o}setLightLevel(o){this.programs.forEach(s=>{s instanceof ev&&s.setParameters({lightLevel:o})}),this.lightLevel=o}setRednessLevel(o){this.programs.forEach(s=>{s instanceof ev&&s.setParameters({rednessLevel:o})}),this.rednessLevel=o}setContrastLevel(o){this.programs.forEach(s=>{s instanceof ev&&s.setParameters({lighteningContrastLevel:o})}),this.lighteningContrastLevel=o}setSize(o,s){this.programs.forEach(c=>{c instanceof ev&&c.setSize(o,s)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(o,s){if(!this.gl)throw new F(P.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const h=this.gl.createTexture();if(!h)throw new F(P.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,o,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,s,o,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new F(P.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,h,0),this.outputTextures.push(h),this.fbos.push(g)}this.gl.viewport(0,0,o,s),this.originalFrameWidth=o,this.originalFrameHeight=s}}class rG{constructor(){X(this,"targetFrameRate",0),X(this,"recordedFrameCount",0),X(this,"recordingTime",2),X(this,"recordID",void 0)}startRecordBeautyEffectOutput(o){var s=arguments,c=this;return V(function*(){let h=s.length>1&&void 0!==s[1]?s[1]:4;if(c.recordID)throw new F(P.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=_s(6,"");return c.recordID=g,c.targetFrameRate=o,c.recordedFrameCount=0,c.recordingTime=h,yield Nc(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(Q.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(Q.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class x8 extends WU.exports.VideoProcessor{constructor(){super(),X(this,"name","BeautyProcessor"),X(this,"fps",15),X(this,"canvas",void 0),X(this,"video",void 0),X(this,"manager",void 0),X(this,"overloadDetector",new rG),X(this,"stopChromeBackgroundLoop",null),X(this,"onOverload",void 0),X(this,"stopLoop",void 0),X(this,"lastRenderTime",0),this.fps=30,this.manager=new nG,this._enabled=!1}onEnableChange(o){var s=this;return V(function*(){s.manager.setEnableBeauty(o),s.context&&s.inputTrack&&(o?yield s.startEffect(s.inputTrack,s.context):yield s.stopEffect(s.inputTrack,s.context))})()}setBeautyEffectOptions(o){var s=this;return V(function*(){if(void 0!==(c=o).smoothnessLevel&&qr(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&qr(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&qr(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&ja(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==o.smoothnessLevel){const c=Math.max(.1,10*o.smoothnessLevel);s.manager.setDenoiseLevel(c)}var c;if(void 0!==o.lighteningLevel){const c=Math.max(.1,o.lighteningLevel/2);s.manager.setLightLevel(c)}if(void 0!==o.rednessLevel){const c=Math.max(.01,o.rednessLevel);s.manager.setRednessLevel(c)}void 0!==o.lighteningContrastLevel&&s.manager.setContrastLevel(o.lighteningContrastLevel)})()}onTrack(o,s){var c=this;return V(function*(){var h;c.video&&c.enabled&&(null===(h=c.stopLoop)||void 0===h||h.call(c),yield c.stopEffect(o,s)),yield c.startEffect(o,s)})()}startEffect(o,s){var c=this;return V(function*(){if(!c.enabled)return;const h=Ri(),g=yield c.renderWithWebGL(o);c.output(g,s),Q.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(v=>{v||c.onOverload&&c.onOverload()});let f=!1;c.stopLoop=()=>{f=!0};const A=()=>{c.enabled&&!f&&requestAnimationFrame(A);const v=Date.now(),E=1e3/c.fps,S=c.lastRenderTime?v-c.lastRenderTime:E;S<E||(c.lastRenderTime=v-(S-E),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(A),h.name===Ai.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=ej(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(o){var s=this;return V(function*(){s.canvas&&(s.canvas.remove(),s.canvas=void 0),s.video&&(s.video.remove(),s.video=void 0),s.canvas=document.createElement("canvas"),s.video=document.createElement("video"),s.video.setAttribute("autoplay",""),s.video.setAttribute("muted",""),s.video.muted=!0,s.video.setAttribute("playsinline",""),s.video.setAttribute("style","display:none"),s.video.srcObject=new MediaStream([o]);const c=new jt(v=>{const E=()=>{s.video&&s.video.removeEventListener("playing",E),v(void 0)};s.video&&s.video.addEventListener("playing",E)});s.video.play(),yield c;const h=o.getSettings(),g=h.width||s.video.videoWidth,f=h.height||s.video.videoHeight;if(h.frameRate&&s.fps!==h.frameRate&&(s.fps=h.frameRate,Q.debug("beauty video processor: set fps to",s.fps)),Q.debug("beauty video processor: width ".concat(g," height ").concat(f)),!g||!f)throw new F(P.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");s.canvas.width=g,s.canvas.height=f,s.video.setAttribute("width",g.toString()),s.video.setAttribute("height",f.toString()),s.manager.init(g,f,s.canvas);const A=Zc();return s.canvas.captureStream(A.supportRequestFrame?0:s.fps).getVideoTracks()[0]})()}stopEffect(o,s){var c=this;return V(function*(){Q.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(o,s)})()}}function KU(n){const o={};if(n.facingMode&&(o.facingMode=n.facingMode),n.cameraId&&(o.deviceId={exact:n.cameraId}),!n.encoderConfig)return o;const s=An(n.encoderConfig);return o.width=s.width,o.height=s.height,!bp()&&s.frameRate&&(o.frameRate=s.frameRate),Ri().name===Ai.EDGE&&"object"==typeof o.frameRate&&(o.frameRate.max=60),ps()&&(o.frameRate={ideal:30,max:30}),o}function iG(n){const o={};n.screenSourceType&&(o.mediaSource=n.screenSourceType),n.extensionId&&_D()&&(o.extensionId=n.extensionId),n.electronScreenSourceId&&(o.sourceId=n.electronScreenSourceId);const s=n.encoderConfig?qn(n.encoderConfig):null;return o.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&s.frameRate&&("number"==typeof s.frameRate?(o.mandatory.maxFrameRate=s.frameRate,o.mandatory.minFrameRate=s.frameRate):(o.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,o.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),o.frameRate=s.frameRate),s&&s.width&&(o.width=s.width),s&&s.height&&(o.height=s.height),o}function oG(n){const o={};if(bp()||(void 0!==n.AGC&&(o.autoGainControl=n.AGC),void 0!==n.AEC&&(o.echoCancellation=n.AEC),void 0!==n.ANS&&(o.noiseSuppression=n.ANS,_D()&&n.ANS&&(o.googHighpassFilter=n.ANS))),n.encoderConfig){const s=Yr(n.encoderConfig);o.channelCount=s.stereo?2:1,o.sampleRate=s.sampleRate,o.sampleSize=s.sampleSize}return n.microphoneId&&(o.deviceId={exact:n.microphoneId}),P0()&&(o.sampleRate=void 0),o}var P1,Qx;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(P1||(P1={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(Qx||(Qx={}));var L8,zU,B8,F8,U8,V8,YU,qU,j8,Q8,H8,G8,W8,K8,Hx,z8,qi,sG,aG,cG,Y8,uG,lG,Ph,dG=new class{constructor(){X(this,"_clientSize",null),X(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),X(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),X(this,"getStyle",n=>window.getComputedStyle(n,null)),X(this,"checkCssVisibleProperty",n=>{let o=!0;const s=this.getStyle(n),{display:c,visibility:h,opacity:g,filter:f}=s;return("none"===c||["hidden","collapse"].includes(h)||Number(g)<.1)&&(o=!1),!!o&&(f&&f.split(" ").filter(A=>{const v=A.split("(")[0];return["brightness","blur","opacity"].includes(v)}).map(A=>{const[v,E]=A.split(/\(|\)/);return[v,Number(E.match(/^[0-9\.]+/))]}).forEach(A=>{const[v,E]=A;switch(v){case"brightness":(E<.1||E>3)&&(o=!1);break;case"blur":E>3&&(o=!1);break;case"opacity":E<.1&&(o=!1)}}),o)}),X(this,"checkPropertyUpToAllParentNodes",(n,o)=>{let s=!0,c=!0;let g=n;for(;g&&c;)o(g)||(s=!1,c=!1),g=g.parentElement,g||(c=!1);return s}),X(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),X(this,"getSizeAboutClient",n=>{const{width:o,height:s,left:c,right:h,top:g,bottom:f}=n.getBoundingClientRect(),A=this.getClientWidth(),v=this.getClientHeight();return{width:o,height:s,left:c,right:h,top:g,bottom:f,clientWidth:A,clientHeight:v,clientMin:Math.min(A,v)}}),X(this,"checkActualSize",()=>{const{width:n,height:o,clientMin:s}=this._clientSize;return this.checkSizeIsVisible(n,o,s)}),X(this,"elementFromPoint",(n,o)=>document.elementFromPoint?document.elementFromPoint(n,o):null),X(this,"checkCoverForAPoint",(n,o,s)=>{const c=this.elementFromPoint(n,o);return null!==c&&c!==s}),X(this,"getPointPositionList",()=>{const{width:n,height:o,left:s,top:c}=this._clientSize,h=n/6,g=o/6,f=[],A=10**6;for(let v=0;v<5;v++)for(let E=0;E<5;E++)f.push({x:(s*A+(0===v?.1:4===v?(h*v*A-1e5)/A:h*v)*A)/A,y:(c*A+(0===E?.1:4===E?(g*E*A-1e5)/A:g*E)*A)/A});return[...f]}),X(this,"checkElementCover",n=>this.getPointPositionList().map(o=>this.checkCoverForAPoint(o.x,o.y,n)).filter(o=>!!o).length>6),X(this,"checkSizeIsVisible",(n,o,s)=>(n>50||s/n<=10)&&(o>50||s/o<=10)),X(this,"checkSizeOfPartInClient",()=>{const{left:n,right:o,top:s,bottom:c,clientHeight:h,clientWidth:g,clientMin:f}=this._clientSize;let A,v,E,S;if(n<0)A=0;else{if(!(n<g))return!1;A=n}if(o<0)return!1;if(v=o<g?o:g,s<0)E=0;else{if(!(s<h))return!1;E=s}return!(c<0)&&(S=c<h?c:h,this.checkSizeIsVisible(v-A,S-E,f))}),X(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),X(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(P1.COVERED);{const o=this.checkActualSize(),s=this.checkSizeOfPartInClient();return o&&!s?this.returnHiddenResult(P1.POSITION):o?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(P1.SIZE)}}return this.returnHiddenResult(P1.STYLE)}return this.returnHiddenResult(Qx.UNMOUNTED)}return this.returnHiddenResult(Qx.INVALID_HTML_ELEMENT)}),X(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,o=>"HTML"!==o.nodeName.toUpperCase()?null!==o.parentElement:!!document.documentElement))}};function hG(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function N1(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?hG(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):hG(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let qs=(L8=no("LocalVideoTrack","getTrackId"),zU=gs(),B8=Cy("LocalVideoTrack","_enabledMutex"),F8=gs(),U8=Cy("LocalVideoTrack","_enabledMutex"),V8=gs(),YU=HD({report:Xt}),qU=gs(),j8=gs(),Q8=gs(),H8=gs(),G8=gs(),W8=gs(),K8=gs(),Hx=gs(),L8((tr((qi=class Bz extends j3{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ca.PLAYING)}constructor(o,s,c,h,g,f){super(o,g),X(this,"trackMediaType","video"),X(this,"_player",void 0),X(this,"_videoBeautyProcessor",void 0),X(this,"_videoVisibleTimer",null),X(this,"_previousVideoVisibleStatus",void 0),X(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),X(this,"_encoderConfig",void 0),X(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),X(this,"_optimizationMode",void 0),X(this,"_videoHeight",void 0),X(this,"_videoWidth",void 0),X(this,"_forceBitrateLimit",void 0),X(this,"_enabled",!0),X(this,"processorDestination",void 0),X(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=s,this._scalabiltyMode=c,this._optimizationMode=h,this._hints=f||[],-1===this._hints.indexOf(Xc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new pG(this.getTrackId()),this.processorDestination=new yk(this.processorContext),this.bindProcessorDestinationEvents()}play(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof o?o:"HTMLElement",s]});if("string"==typeof o){const g=document.getElementById(o);g?o=g:(Q.warning("[".concat(this.getTrackId(),'] can not find "#').concat(o,'" element, use document.body')),qe("warning",this,'can not find "#'.concat(o,'" element, use document.body')),o=document.body)}Q.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(s)),wt("debug",this,"play",s);const h=N1(N1(N1({},this._getDefaultPlayerConfig()),s),{},{trackId:this.getTrackId(),element:o});this._player?this._player.updateConfig(h):(this._player=new O8(h),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(wh.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch{}},mt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return o.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Q.debug("[".concat(this.getTrackId(),"] stop video playback")),wt("debug",this,"stop"),o.onSuccess()}setEnabled(o,s){var c=this;return V(function*(){if(!s){if(o===c._enabled)return;c.stateCheck("enabled",o)}if(Q.info("[".concat(c.getTrackId(),"] start setEnabled"),o),wt("info",c,"setEnabled",o),!o){c._originMediaStreamTrack.enabled=!1;try{yield Ho(c,lr.NEED_DISABLE_TRACK,c)}catch(h){throw Q.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),wt("error",c,"setEnabled",o,h.toString()),h}return s||(c._enabled=!1),Q.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void wt("info",c,"setEnabled",o,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Ho(c,lr.NEED_ENABLE_TRACK,c)}catch(h){throw Q.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),wt("error",c,"setEnabled",o,h.toString()),h}Q.info("[".concat(c.getTrackId(),"] setEnabled to true success")),wt("info",c,"setEnabled",o,"success"),s||(c._enabled=!0)})()}setMuted(o){var s=this;return V(function*(){o!==s._muted&&(s.stateCheck("muted",o),s._muted=o,s._originMediaStreamTrack.enabled=!o,Q.debug("[".concat(s.getTrackId(),"] start set muted: ").concat(o)),wt("debug",s,"setMuted",o),o?yield Ho(s,lr.NEED_MUTE_TRACK,s):yield Ho(s,lr.NEED_UNMUTE_TRACK,s))})()}getStats(){return JD(()=>{Q.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),qe("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ty(this,lr.GET_STATS)||N1({},F4)}setBeautyEffect(o){var s=arguments,c=this;return V(function*(){let h=s.length>1&&void 0!==s[1]?s[1]:{};const g=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),o,h]});if(o||c._videoBeautyProcessor){if(Gw()===zs.IOS||Gw()===zs.ANDROID){const f=new F(P.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(f),f}if(!c._enabled&&o){const f=new F(P.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(f),f}if(Q.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),o,JSON.stringify(h)),wt("info",c,"setBeautyEffect",[o,h]),c._videoBeautyProcessor||o){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new x8,c.processor){const f=c.processor;c.pipe(c._videoBeautyProcessor).pipe(f)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(h),o?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(f){throw Q.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),f.toString()),wt("info",c,"setBeautyEffect",[o,h]),g.onError(f),f}Q.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),wt("info",c,"setBeautyEffect",[o,h],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(o){var s=arguments,c=this;return V(function*(){return c._player?c._player.getCurrentFrameToUint8Array(o,s.length>1&&void 0!==s[1]?s[1]:1):yield QU(o)})()}clone(o,s,c,h){const g=this._mediaStreamTrack.clone();return new Bz(g,o,s,c,h)}setBitrateLimit(o){var s=this;return V(function*(){if(Q.debug("[".concat(s.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(o))),wt("debug",s,"setBitrateLimit",o),o){s._forceBitrateLimit=o,s._encoderConfig&&(s._encoderConfig.bitrateMax=s._encoderConfig.bitrateMax&&s._encoderConfig.bitrateMax<o.max_bitrate?s._encoderConfig.bitrateMax:o.max_bitrate,s._encoderConfig.bitrateMin=o.min_bitrate);try{yield Ho(s,lr.NEED_UPDATE_VIDEO_ENCODER,s)}catch(c){return c.throw()}}})()}setOptimizationMode(o){var s=this;return V(function*(){if("motion"!==o&&"detail"!==o&&"balanced"!==o)return Q.error(P.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void wt("error",s,"setOptimizationMode",o,P.INVALID_PARAMS);const c=s._optimizationMode;try{s._optimizationMode=o,yield Ho(s,lr.SET_OPTIMIZATION_MODE,s)}catch(h){throw s._optimizationMode=c,Q.error("[".concat(s.getTrackId(),"] set optimization mode failed"),h.toString()),wt("error",s,"setOptimizationMode",o,h.toString()),h}Q.info("[".concat(s.getTrackId(),"] set optimization mode success (").concat(o,")")),wt("info",s,"setOptimizationMode",o,"success")})()}setScalabiltyMode(o){if(1===o.numSpatialLayers&&1!==o.numTemporalLayers)return Q.error(P.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),wt("error",this,"setScalabiltyMode",o,P.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=o,Q.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(o,")")),wt("info",this,"setScalabiltyMode",o,"success")}updateMediaStreamTrackResolution(){NQ(this._originMediaStreamTrack).then(o=>{let[s,c]=o;this._videoHeight=c,this._videoWidth=s}).catch(eU)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:o,height:s,frameRate:c}=this.getMediaStreamTrackSettings();if(!o||!s||!c)return;const[h,g]=function(f,A,v){const E=mt("BITRATE_ADAPTER_TYPE");let S;const w=200*Math.pow(v/15,.6)*Math.pow(f*A/640/360,.75),R=w;if("STANDARD_BITRATE"===E)S=4*w;else{if("COMPATIABLE_BITRATE"!==E)return;S=2*w}return[Math.floor(S),Math.floor(R)]}(o,s,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=h,Q.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(o,", h: ").concat(s,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")),wt("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(o,", h: ").concat(s,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var o,s;const c=null==this||null===(o=this._player)||void 0===o?void 0:o.getContainerElement(),h={track:this,element:null==this||null===(s=this._player)||void 0===s?void 0:s.getVideoElement(),slot:c?.parentElement},{element:g,slot:f}=h;if(this.isPlaying&&g instanceof HTMLVideoElement&&f instanceof HTMLElement){const A=dG.checkOneElementVisible(g),v=Object.assign({},A);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(v.visible?"Video is visible":"Invisible because of ".concat(v.reason))}return v}return}catch(c){throw new F(P.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(o){return V(function*(){})()}pipe(o){if(this._videoBeautyProcessor&&o!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(o);if(this.processor===o)return o;if(o._source)throw new F(P.INVALID_OPERATION,"Processor ".concat(o.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=o,this.processor._source=this,o.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),o}unpipe(){if(!this.processor)return;const o=this.processor;this.processor._source=void 0,this.processor=void 0,o.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var o=this;this.processorDestination.on(Th.ON_TRACK,function(){var s=V(function*(c){c?c!==o._mediaStreamTrack&&(o._mediaStreamTrack=c,o._updatePlayerSource(),yield Ho(o,lr.NEED_REPLACE_TRACK,o)):o._mediaStreamTrack!==o._originMediaStreamTrack&&(o._mediaStreamTrack=o._originMediaStreamTrack,o._updatePlayerSource(),yield Ho(o,lr.NEED_REPLACE_TRACK,o))});return function(c){return s.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Th.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Ql.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Ql.REQUEST_CONSTRAINTS)}}).prototype,"play",[zU],Object.getOwnPropertyDescriptor(qi.prototype,"play"),qi.prototype),tr(qi.prototype,"setEnabled",[B8,F8],Object.getOwnPropertyDescriptor(qi.prototype,"setEnabled"),qi.prototype),tr(qi.prototype,"setMuted",[U8,V8,YU],Object.getOwnPropertyDescriptor(qi.prototype,"setMuted"),qi.prototype),tr(qi.prototype,"getStats",[qU],Object.getOwnPropertyDescriptor(qi.prototype,"getStats"),qi.prototype),tr(qi.prototype,"setBeautyEffect",[j8],Object.getOwnPropertyDescriptor(qi.prototype,"setBeautyEffect"),qi.prototype),tr(qi.prototype,"getCurrentFrameData",[Q8],Object.getOwnPropertyDescriptor(qi.prototype,"getCurrentFrameData"),qi.prototype),tr(qi.prototype,"getCurrentFrameImage",[H8],Object.getOwnPropertyDescriptor(qi.prototype,"getCurrentFrameImage"),qi.prototype),tr(qi.prototype,"setBitrateLimit",[G8],Object.getOwnPropertyDescriptor(qi.prototype,"setBitrateLimit"),qi.prototype),tr(qi.prototype,"setOptimizationMode",[W8],Object.getOwnPropertyDescriptor(qi.prototype,"setOptimizationMode"),qi.prototype),tr(qi.prototype,"setScalabiltyMode",[K8],Object.getOwnPropertyDescriptor(qi.prototype,"setScalabiltyMode"),qi.prototype),tr(qi.prototype,"updateMediaStreamTrackResolution",[Hx],Object.getOwnPropertyDescriptor(qi.prototype,"updateMediaStreamTrackResolution"),qi.prototype),z8=qi))||z8),q8=(sG=no("CameraVideoTrack","getTrackId"),aG=gs(),cG=Cy("CameraVideoTrack","_enabledMutex"),Y8=gs(),uG=gs(),sG((tr((Ph=class extends qs{constructor(n,o,s,c,h,g){var f;super(n,o.encoderConfig?An(o.encoderConfig):{},c,h,g),f=this,X(this,"_config",void 0),X(this,"_originalConstraints",void 0),X(this,"_constraints",void 0),X(this,"_enabled",!0),X(this,"_deviceName","default"),X(this,"tryResumeVideoForIOS15WeChat",V(function*(){Ti()&&!tM()&&al()&&f._enabled&&!f._isClosed&&(Q.debug("[".concat(f.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield f.renewMediaStreamTrack())})),Wn("info",this,"constructor",{trackId:g,deviceId:n.label,constraints:s,config:o}),this._config=o,this._originalConstraints=s,this._constraints=s,this._deviceName=n.label,this._config.encoderConfig&&(this._encoderConfig=An(this._config.encoderConfig)),$r.on(ha.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),$r.on(ha.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CAM_VIDEO_TRACK_SET_DEVICE,options:[o.getTrackId(),n]});if(Q.info("[".concat(o.getTrackId(),"] set device to ").concat(n)),wt("info",o,"setDevice",n),o._enabled)try{const c=yield Kl.getDeviceById(n),h={};h.video=N1({},o._constraints),h.video.deviceId={exact:n},h.video.facingMode=void 0,o._originMediaStreamTrack.stop();let g=null;try{g=yield pl(h,o.getTrackId())}catch(f){throw Q.error("[".concat(o.getTrackId(),"] setDevice failed"),f.toString()),wt("error",o,"setDevice",n,f.toString()),g=yield pl({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),f}yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),o.updateMediaStreamTrackResolution(),o._deviceName=c.label,o._config.cameraId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),Q.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),wt("error",o,"setDevice",n,c.toString()),c}else try{const c=yield Kl.getDeviceById(n);o._deviceName=c.label,o._config.cameraId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),Q.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),wt("error",o,"setDevice",n,c.toString()),c}Q.info("[".concat(o.getTrackId(),"] setDevice success")),wt("info",o,"setDevice",n,"success"),s.onSuccess()})()}setEnabled(n,o){var s=this;return V(function*(){if(!o){if(n===s._enabled)return;s.stateCheck("enabled",n)}if(Q.info("[".concat(s.getTrackId(),"] start setEnabled"),n),wt("info",s,"setEnabled",n),!n){s._originMediaStreamTrack.onended=null,s._originMediaStreamTrack.stop(),o||(s._enabled=!1);try{yield Ho(s,lr.NEED_DISABLE_TRACK,s)}catch(g){throw Q.error("[".concat(s.getTrackId(),"] setEnabled to false error"),g.toString()),wt("error",s,"setEnabled",n,g.toString()),g}return Q.info("[".concat(s.getTrackId(),"] setEnabled to false success")),void wt("info",s,"setEnabled",n,"success")}const c=N1({},s._constraints),h=Kl.searchDeviceIdByName(s._deviceName);h&&!c.deviceId&&(c.deviceId={exact:h});try{const g=yield pl({video:s._constraints},s.getTrackId());yield s._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield Ho(s,lr.NEED_ENABLE_TRACK,s)}catch(g){throw Q.error("[".concat(s.getTrackId(),"] setEnabled true error"),g.toString()),wt("error",s,"setEnabled",n,g.toString()),g}s.updateMediaStreamTrackResolution(),Q.info("[".concat(s.getTrackId(),"] setEnabled to true success")),wt("info",s,"setEnabled",n,"success"),o||(s._enabled=!0)})()}setEncoderConfiguration(n,o){var s=this;return V(function*(){const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[s.getTrackId(),n]});if(!s._enabled){const f=new F(P.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(f),f}n=An(n),s._forceBitrateLimit&&(n.bitrateMax=s._forceBitrateLimit.max_bitrate?s._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=s._forceBitrateLimit.min_bitrate?s._forceBitrateLimit.min_bitrate:n.bitrateMin);const h=fc(s._config);h.encoderConfig=n;const g=KU(h);(Bl()||Dc()||Ul())&&(g.deviceId=void 0),Q.debug("[".concat(s.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(g)),wt("debug",s,"setEncoderConfiguration",n);try{yield s._originMediaStreamTrack.applyConstraints(g),s.updateMediaStreamTrackResolution()}catch(f){const A=new F(P.UNEXPECTED_ERROR,f.toString());throw Q.error("[".concat(s.getTrackId(),"] applyConstraints error"),A.toString()),wt("error",s,"setEncoderConfiguration",f.toString()),c.onError(A),A}s._config=h,s._constraints=g,s._originalConstraints=g,s._encoderConfig=n,-1===s._hints.indexOf(Xc.SCREEN_TRACK)&&s.updateBitrateFromProfile();try{yield Ho(s,lr.NEED_UPDATE_VIDEO_ENCODER,s)}catch(f){return c.onError(f),f.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var n=this;if((Dc()||Ul())&&this._enabled&&!this._isClosed&&$r.duringInterruption){const o=function(){var s=V(function*(){$r.off(ha.IOS_INTERRUPTION_END,o),n._enabled&&!n._isClosed&&(Q.debug("[".concat(n.getTrackId(),"] try capture camera media device for interrupted iOS device.")),qe("debug",n,"try capture camera media device for interrupted iOS device."),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return s.apply(this,arguments)}}();$r.on(ha.IOS_INTERRUPTION_END,o)}else Q.debug("[".concat(this.getTrackId(),"] track ended")),Yn("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(wh.TRACK_ENDED)}renewMediaStreamTrack(n){var o=this;return V(function*(){const s=n||o._constraints,c=Kl.searchDeviceIdByName(o._deviceName);c&&!s.deviceId&&(s.deviceId={exact:c});const h=yield pl({video:s},o.getTrackId());o._constraints=s,yield o._updateOriginMediaStreamTrack(h.getVideoTracks()[0],!0),o.updateMediaStreamTrackResolution()})()}close(){super.close(),$r.off(ha.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),$r.off(ha.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var n=this;this.processorContext.on(Ql.REQUEST_UPDATE_CONSTRAINTS,function(){var o=V(function*(s,c,h){try{const g=Object.assign({},n._originalConstraints,...s);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this.processorContext.on(Ql.REQUEST_CONSTRAINTS,function(){var o=V(function*(s){s(n._originMediaStreamTrack.getSettings())});return function(s){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[aG],Object.getOwnPropertyDescriptor(Ph.prototype,"setDevice"),Ph.prototype),tr(Ph.prototype,"setEnabled",[cG,Y8],Object.getOwnPropertyDescriptor(Ph.prototype,"setEnabled"),Ph.prototype),tr(Ph.prototype,"setEncoderConfiguration",[uG],Object.getOwnPropertyDescriptor(Ph.prototype,"setEncoderConfiguration"),Ph.prototype),lG=Ph))||lG);class yk extends D{constructor(o){super(),X(this,"name","VideoProcessorDestination"),X(this,"ID","0"),X(this,"_source",void 0),X(this,"videoContext",void 0),X(this,"inputTrack",void 0),this.videoContext=o}get kind(){return"video"}get enabled(){return!0}pipe(){throw new F(P.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new F(P.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(o){if(o.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");o.track&&o.track!==this.inputTrack&&(this.inputTrack=o.track,this.emit(Th.ON_TRACK,o.track))}reset(){this.inputTrack=void 0,this.emit(Th.ON_TRACK,void 0)}}class pG extends D{constructor(o){super(),X(this,"constraintsMap",new Map),X(this,"statsRegistry",[]),X(this,"trackId",void 0),this.trackId=o}getConstraints(){var o=this;return V(function*(){return yield Oh(o,Ql.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(o,s){var c=this;return V(function*(){var h;return Q.info("processor ".concat(s.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(s,o),Ho(c,Ql.REQUEST_UPDATE_CONSTRAINTS,Array.from(K_(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(o){var s=this;return V(function*(){var c;if(s.constraintsMap.has(o))return Q.info("processor ".concat(o.name," requestRevertConstraints for ").concat(s.trackId)),s.constraintsMap.delete(o),Ho(s,Ql.REQUEST_UPDATE_CONSTRAINTS,Array.from(K_(c=s.constraintsMap).call(c)))})()}registerStats(o,s,c){this.statsRegistry.find(h=>h.processorID===o.ID&&h.processorName===o.name&&h.type===s)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:s,cb:c})}unregisterStats(o,s){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:s,processorName:c,type:h,cb:g}=o;return{processorID:s,processorName:c,type:h,stats:g()}})}}class Gx{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(o,s){X(this,"uid",void 0),X(this,"_uintid",void 0),X(this,"_trust_in_room_",!0),X(this,"_trust_audio_enabled_state_",!0),X(this,"_trust_video_enabled_state_",!0),X(this,"_trust_audio_mute_state_",!0),X(this,"_trust_video_mute_state_",!0),X(this,"_audio_muted_",!1),X(this,"_video_muted_",!1),X(this,"_audio_enabled_",!0),X(this,"_video_enabled_",!0),X(this,"_audio_added_",!1),X(this,"_video_added_",!1),X(this,"_trust_video_stream_added_state_",!0),X(this,"_trust_audio_stream_added_state_",!0),X(this,"_audioTrack",void 0),X(this,"_videoTrack",void 0),X(this,"_audioSSRC",void 0),X(this,"_videoSSRC",void 0),X(this,"_audioOrtc",void 0),X(this,"_videoOrtc",void 0),X(this,"_cname",void 0),X(this,"_rtxSsrcId",void 0),this.uid=o,this._uintid=s}}var fG=Nn,mG=ud,J8=zb;as({target:"Promise",stat:!0},{try:function(n){var o=mG.f(this),s=J8(n);return(s.error?o.reject:o.resolve)(s.value),o.promise}});var $8=fG,gG=as,_G=ni,vG=Fs,Wx=HM,AG=du,yG=va,EG=Zh,X8=vy,bG=Q9,SG=Pu,CG=$d,Z8=Rs("isConcatSpreadable"),e6=9007199254740991,t6="Maximum allowed index exceeded",n6=_G.TypeError,IG=CG>=51||!vG(function(){var n=[];return n[Z8]=!1,n.concat()[0]!==n}),wG=SG("concat"),TG=function(n){if(!AG(n))return!1;var o=n[Z8];return void 0!==o?!!o:Wx(n)};gG({target:"Array",proto:!0,forced:!IG||!wG},{concat:function(n){var o,s,c,h,g,f=yG(this),A=bG(f,0),v=0;for(o=-1,c=arguments.length;o<c;o++)if(TG(g=-1===o?f:arguments[o])){if(v+(h=EG(g))>e6)throw n6(t6);for(s=0;s<h;s++,v++)s in g&&X8(A,v,g[s])}else{if(v>=e6)throw n6(t6);X8(A,v++,g)}return A.length=v,A}});var r6={},RG=Pa,OG=Il,i6=mb.f,DG=S4,o6="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r6.f=function(n){return o6&&"Window"==RG(n)?function(o){try{return i6(o)}catch{return DG(o6)}}(n):i6(OG(n))};var Ek={};Ek.f=Rs;var s6=Wh,PG=Ws,NG=Ek,MG=zu.f,Wa=function(n){var o=s6.Symbol||(s6.Symbol={});PG(o,n)||MG(o,n,{value:NG.f(n)})},M1=as,JU=ni,xG=Gu,LG=na,bk=lu,BG=Fi,x1=Hu,uS=zh,$U=Fs,mc=Ws,FG=HM,UG=ws,VG=du,jG=tc,L1=Nv,a6=hu,c6=va,Kx=Il,XU=Yh,u6=Ef,ZU=Gh,Sk=r_,l6=Hc,QG=mb,d6=r6,eV=Qc,h6=xg,HG=zu,GG=$u,p6=Ov,WG=Vb,tV=Cf,Ck=vm.exports,f6=gb,m6=Qr,g6=Rs,KG=Ek,zG=Wa,YG=c_,_6=Sf,zx=G9.forEach,kd=Rl("hidden"),Yx="Symbol",v6=g6("toPrimitive"),qG=_6.set,A6=_6.getterFor(Yx),Yf=Object.prototype,ky=JU.Symbol,lS=ky&&ky.prototype,y6=JU.TypeError,E6=JU.QObject,Ik=xG("JSON","stringify"),b6=h6.f,Py=HG.f,qx=d6.f,Ny=p6.f,nV=BG([].push),qf=Ck("symbols"),dS=Ck("op-symbols"),wk=Ck("string-to-symbol-registry"),ql=Ck("symbol-to-string-registry"),S6=Ck("wks"),Tk=!E6||!E6.prototype||!E6.prototype.findChild,Jx=x1&&$U(function(){return 7!=Sk(Py({},"a",{get:function(){return Py(this,"a",{value:7}).a}})).a})?function(n,o,s){var c=b6(Yf,o);c&&delete Yf[o],Py(n,o,s),c&&n!==Yf&&Py(Yf,o,c)}:Py,$x=function(n,o){var s=qf[n]=Sk(lS);return qG(s,{type:Yx,tag:n,description:o}),x1||(s.description=o),s},B1=function(n,o,s){n===Yf&&B1(dS,o,s),a6(n);var c=XU(o);return a6(s),mc(qf,c)?(s.enumerable?(mc(n,kd)&&n[kd][c]&&(n[kd][c]=!1),s=Sk(s,{enumerable:ZU(0,!1)})):(mc(n,kd)||Py(n,kd,ZU(1,{})),n[kd][c]=!0),Jx(n,c,s)):Py(n,c,s)},C6=function(n,o){a6(n);var s=Kx(o),c=l6(s).concat(iV(s));return zx(c,function(h){x1&&!bk(I6,s,h)||B1(n,h,s[h])}),n},I6=function(n){var o=XU(n),s=bk(Ny,this,o);return!(this===Yf&&mc(qf,o)&&!mc(dS,o))&&(!(s||!mc(this,o)||!mc(qf,o)||mc(this,kd)&&this[kd][o])||s)},My=function(n,o){var s=Kx(n),c=XU(o);if(s!==Yf||!mc(qf,c)||mc(dS,c)){var h=b6(s,c);return!h||!mc(qf,c)||mc(s,kd)&&s[kd][c]||(h.enumerable=!0),h}},rV=function(n){var o=qx(Kx(n)),s=[];return zx(o,function(c){mc(qf,c)||mc(f6,c)||nV(s,c)}),s},iV=function(n){var o=n===Yf,s=qx(o?dS:Kx(n)),c=[];return zx(s,function(h){!mc(qf,h)||o&&!mc(Yf,h)||nV(c,qf[h])}),c};if(uS||(tV(lS=(ky=function(){if(jG(lS,this))throw y6("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?u6(arguments[0]):void 0,o=m6(n),s=function(c){this===Yf&&bk(s,dS,c),mc(this,kd)&&mc(this[kd],o)&&(this[kd][o]=!1),Jx(this,o,ZU(1,c))};return x1&&Tk&&Jx(Yf,o,{configurable:!0,set:s}),$x(o,n)}).prototype,"toString",function(){return A6(this).tag}),tV(ky,"withoutSetter",function(n){return $x(m6(n),n)}),p6.f=I6,HG.f=B1,GG.f=C6,h6.f=My,QG.f=d6.f=rV,eV.f=iV,KG.f=function(n){return $x(g6(n),n)},x1&&Py(lS,"description",{configurable:!0,get:function(){return A6(this).description}})),M1({global:!0,wrap:!0,forced:!uS,sham:!uS},{Symbol:ky}),zx(l6(S6),function(n){zG(n)}),M1({target:Yx,stat:!0,forced:!uS},{for:function(n){var o=u6(n);if(mc(wk,o))return wk[o];var s=ky(o);return wk[o]=s,ql[s]=o,s},keyFor:function(n){if(!L1(n))throw y6(n+" is not a symbol");if(mc(ql,n))return ql[n]},useSetter:function(){Tk=!0},useSimple:function(){Tk=!1}}),M1({target:"Object",stat:!0,forced:!uS,sham:!x1},{create:function(n,o){return void 0===o?Sk(n):C6(Sk(n),o)},defineProperty:B1,defineProperties:C6,getOwnPropertyDescriptor:My}),M1({target:"Object",stat:!0,forced:!uS},{getOwnPropertyNames:rV,getOwnPropertySymbols:iV}),M1({target:"Object",stat:!0,forced:$U(function(){eV.f(1)})},{getOwnPropertySymbols:function(n){return eV.f(c6(n))}}),Ik&&M1({target:"JSON",stat:!0,forced:!uS||$U(function(){var n=ky();return"[null]"!=Ik([n])||"{}"!=Ik({a:n})||"{}"!=Ik(Object(n))})},{stringify:function(n,o,s){var c=WG(arguments),h=o;if((VG(o)||void 0!==n)&&!L1(n))return FG(o)||(o=function(g,f){if(UG(h)&&(f=bk(h,this,g,f)),!L1(f))return f}),c[1]=o,LG(Ik,null,c)}}),!lS[v6]){var Nz=lS.valueOf;tV(lS,v6,function(n){return bk(Nz,this)})}YG(ky,Yx),f6[kd]=!0,Wa("asyncIterator"),Wa("hasInstance"),Wa("isConcatSpreadable"),Wa("iterator"),Wa("match"),Wa("matchAll"),Wa("replace"),Wa("search"),Wa("species"),Wa("split"),Wa("toPrimitive"),Wa("toStringTag"),Wa("unscopables"),c_(ni.JSON,"JSON",!0);var JG=Wh.Symbol;Wa("asyncDispose"),Wa("dispose"),Wa("matcher"),Wa("metadata"),Wa("observable"),Wa("patternMatch"),Wa("replaceAll");var oV=JG,sV=Ek.f("asyncIterator");function aV(n){this.wrapped=n}function hS(n){var o,s;function c(g,f){try{var A=n[g](f),v=A.value,E=v instanceof aV;$8.resolve(E?v.wrapped:v).then(function(S){E?c("return"===g?"return":"next",S):h(A.done?"return":"normal",S)},function(S){c("throw",S)})}catch(S){h("throw",S)}}function h(g,f){switch(g){case"return":o.resolve({value:f,done:!0});break;case"throw":o.reject(f);break;default:o.resolve({value:f,done:!1})}(o=o.next)?c(o.key,o.arg):s=null}this._invoke=function(g,f){return new $8(function(A,v){var E={key:g,arg:f,resolve:A,reject:v,next:null};s?s=s.next=E:(o=s=E,c(g,f))})},"function"!=typeof n.return&&(this.return=void 0)}function Rk(n){return function(){return new hS(n.apply(this,arguments))}}function vs(n){return new aV(n)}hS.prototype["function"==typeof oV&&sV||"@@asyncIterator"]=function(){return this},hS.prototype.next=function(n){return this._invoke("next",n)},hS.prototype.throw=function(n){return this._invoke("throw",n)},hS.prototype.return=function(n){return this._invoke("return",n)};var $G=Ek.f("iterator");function Xx(n,o){var s={},c=!1;function h(g,f){return c=!0,f=new $8(function(A){A(n[g](f))}),{done:!1,value:o(f)}}return s[void 0!==oV&&$G||"@@iterator"]=function(){return this},s.next=function(g){return c?(c=!1,g):h("next",g)},"function"==typeof n.throw&&(s.throw=function(g){if(c)throw c=!1,g;return h("throw",g)}),"function"==typeof n.return&&(s.return=function(g){return c?(c=!1,g):h("return",g)}),s}var Zx=sV,eL=Cs,F1=ue,tv=gc,nL=Mr,XG=lf,Ok=yo.f,T6=Lp,nv=z.Symbol,xy=nv&&nv.prototype;if(k&&et(nv)&&(!("description"in xy)||void 0!==nv().description)){var rv={},Dk=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:XG(arguments[0]),o=nL(xy,this)?new nv(n):void 0===n?nv():nv(n);return""===n&&(rv[o]=!0),o};T6(Dk,nv),Dk.prototype=xy,xy.constructor=Dk;var R6="Symbol(test)"==String(nv("test")),dg=F1(xy.toString),pS=F1(xy.valueOf),kk=/^Symbol\((.*)\)[^)]+$/,ZG=F1("".replace),uV=F1("".slice);Ok(xy,"description",{configurable:!0,get:function(){var n=pS(this),o=dg(n);if(tv(rv,n))return"";var s=R6?uV(o,7,-1):ZG(o,kk,"$1");return""===s?void 0:s}}),eL({global:!0,forced:!0},{Symbol:Dk})}var Pd={exports:{}};function U1(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Pk(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?U1(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):U1(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function lV(n,o,s,c,h,g){let f=[],A=[],v=[],E=[],S=!1,w=!1;if(Pd.exports.parse(n).mediaDescriptions.forEach(R=>{g&&g!==R.attributes.direction||("video"!==R.media.mediaType||S||(A=R.attributes.payloads,E=R.attributes.extmaps,S=!0),"audio"!==R.media.mediaType||w||(f=R.attributes.payloads,v=R.attributes.extmaps,w=!0))}),!E||0===A.length)throw new Error("Cannot get video capabilities from SDP.");if(!v||0===f.length)throw new Error("Cannot get audio capabilities from SDP.");return A.forEach(R=>{var x;null!==(x=R.rtpMap)&&void 0!==x&&x.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),f.forEach(R=>{var x;null!==(x=R.rtpMap)&&void 0!==x&&x.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),o&&(f=f.filter(R=>{var x;return"rtx"!==(null===(x=R.rtpMap)||void 0===x?void 0:x.encodingName.toLowerCase())}),A=A.filter(R=>{var x;return"rtx"!==(null===(x=R.rtpMap)||void 0===x?void 0:x.encodingName.toLowerCase())})),s&&(A=A.filter(R=>{var x;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(x=R.rtpMap)||void 0===x?void 0:x.encodingName)||"")})),c&&c?.length>0&&(f=f.filter(R=>{var x;return c.includes((null===(x=R.rtpMap)||void 0===x?void 0:x.encodingName.toLowerCase())||"")})),h&&h?.length>0&&(A=A.filter(R=>{var x;return h.includes((null===(x=R.rtpMap)||void 0===x?void 0:x.encodingName.toLowerCase())||"")})),{audioCodecs:f,videoCodecs:A,audioExtensions:v,videoExtensions:E}}function V1(n){const o=Pd.exports.parse(n);let s,c;for(const h of o.mediaDescriptions){if(!s){const g=h.attributes.iceUfrag,f=h.attributes.icePwd;if(!g||!f)throw new Error("Cannot get iceUfrag or icePwd from SDP.");s={iceUfrag:g,icePwd:f}}if(!c){const g=h.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&o.attributes.fingerprints.length>0&&(c={fingerprints:o.attributes.fingerprints}),!c||!s)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:s,dtlsParameters:c}}function O6(n,o,s){const{cname:c}=n;let h;void 0!==o&&void 0!==s?(h=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:o,port:s.toString(),type:"host",extension:{}}],Q.debug("Using remote candidate from AP ".concat(o,":").concat(s)),qe("debug",[],"Using remote candidate from AP ".concat(o,":").concat(s))):h=n.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const g={fingerprints:n.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},f={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let A;switch(n.dtlsParameters.role){case"server":A="passive";break;case"client":A="active";break;case"auto":A="actpass"}return{dtlsParameters:g,iceParameters:f,candidates:h,rtpCapabilities:D6(n.rtpCapabilities),setup:A,cname:c}}function j1(n,o,s){const c=[],h=[];return n.forEach(g=>{let{ssrcId:f,rtx:A}=g;const v=_s(8,"track-"),E={ssrcId:f,attributes:Pk({label:v,mslabel:s=s||_s(10,""),msid:"".concat(s," ").concat(v)},o&&{cname:o})};if(c.push(E),void 0!==A){const S={ssrcId:A,attributes:Pk({label:v,mslabel:s,msid:"".concat(s," ").concat(v)},o&&{cname:o})};c.push(S),h.push({semantic:"FID",ssrcIds:[f,A]})}}),n.length>1&&h.push({semantic:"SIM",ssrcIds:n.map(g=>{let{ssrcId:f}=g;return f})}),{ssrcs:c,ssrcGroups:h}}function rL(n,o){o instanceof pc&&n.attributes.payloads.forEach(s=>{var c;const h=null===(c=s.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!h||-1===["opus","pcmu","pcma","g722"].indexOf(h))return;s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters.minptime="10",s.fmtp.parameters.useinbandfec="1";const g=o._encoderConfig;g&&("pcmu"!==h&&"pcma"!==h&&"g722"!==h&&(g.bitrate&&!ps()&&(s.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(s.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),s.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate))),g.stereo&&(s.fmtp.parameters.stereo="1",s.fmtp.parameters["sprop-stereo"]="1"))})}function Nd(n){const o=n.attributes.unrecognized.findIndex(s=>"x-google-flag"===s.attField&&"conference"===s.attValue);-1!==o&&n.attributes.unrecognized.splice(o,1)}function dV(n,o){if(!(o instanceof qs&&o._encoderConfig&&-1===o._hints.indexOf(Xc.SCREEN_TRACK)))return;const s=o._encoderConfig;Zc().supportMinBitrate&&s.bitrateMin&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(s.bitrateMin))}),Zc().supportMinBitrate&&!o._hints.includes(Xc.LOW_STREAM)&&s.bitrateMax&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(mt("X_GOOGLE_START_BITRATE")||Math.floor(s.bitrateMax)))})}function Nk(n,o,s){if(!o)return;let c,h;if("video"===n.media.mediaType?(c=s.videoExtensions,h=s.videoCodecs):(c=s.audioExtensions,h=s.audioCodecs),!0===o.tcc){const g=c.find(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName);g&&(n.attributes.extmaps.find(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(f=h,A=n.attributes.payloads,A.filter(v=>!!f.find(E=>E.payloadType===v.payloadType&&!!E.rtcpFeedbacks.find(S=>"transport-cc"===S.type)))).forEach(f=>{f.rtcpFeedbacks.find(A=>"transport-cc"===A.type)||f.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===o.tcc){const g=n.attributes.extmaps.findIndex(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(f=>{const A=f.rtcpFeedbacks.findIndex(v=>"transport-cc"===v.type);-1!==A&&f.rtcpFeedbacks.splice(A,1)})}var f,A;if(!0===o.remb){const g=c.find(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName);g&&(n.attributes.extmaps.find(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(f,A){return A.filter(v=>!!f.find(E=>E.payloadType===v.payloadType&&!!E.rtcpFeedbacks.find(S=>"goog-remb"===S.type)))}(h,n.attributes.payloads).forEach(f=>{f.rtcpFeedbacks.find(A=>"goog-remb"===A.type)||f.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===o.remb){const g=n.attributes.extmaps.findIndex(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(f=>{const A=f.rtcpFeedbacks.findIndex(v=>"goog-remb"===v.type);-1!==A&&f.rtcpFeedbacks.splice(A,1)})}}function fS(n,o,s,c,h,g){if("videoExtensions"===s||"audioExtensions"===s){const f=[];return n[s].forEach(A=>{o[s].some((v,E)=>{if(A.entry===v.entry&&A.extensionName===v.extensionName)return f.push(E),!0})?g[s].push(A):c[s].push(A)}),void o[s].forEach((A,v)=>{-1===f.indexOf(v)&&h[s].push(A)})}if("videoCodecs"===s||"audioCodecs"===s){const f=[];return n[s].forEach(A=>{o[s].some((v,E)=>{if(A.payloadType===v.payloadType&&JSON.stringify(A)===JSON.stringify(v))return f.push(E),!0})?g[s].push(A):c[s].push(A)}),void o[s].forEach((A,v)=>{-1===f.indexOf(v)&&h[s].push(A)})}}function D6(n){const{send:o,recv:s,sendrecv:c}=n;if(!c){if(!o||!s)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:o,recv:s}}let h,g;return o?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...o.audioCodecs,...c.audioCodecs],h.videoCodecs=[...o.videoCodecs,...c.videoCodecs],h.audioExtensions=[...o.audioExtensions,...c.audioExtensions],h.videoExtensions=[...o.videoExtensions,...c.videoExtensions]):h=c,s?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...s.audioCodecs,...c.audioCodecs],g.videoCodecs=[...s.videoCodecs,...c.videoCodecs],g.audioExtensions=[...s.audioExtensions,...c.audioExtensions],g.videoExtensions=[...s.videoExtensions,...c.videoExtensions]):g=c,{send:h,recv:g}}!function(n,o){n.exports=(()=>{var s={8:(g,f,A)=>{A.r(f),A.d(f,{Parser:()=>dn,Printer:()=>bn,parse:()=>hn,print:()=>On});const v="\n",E="".concat("\r").concat(v),S=" ";let w;function R(Gt){return Gt>="0"&&Gt<="9"}function x(Gt){return Gt>="!"&&Gt<="~"}function W(Gt){return x(Gt)||Gt>="\x80"&&Gt<="\xff"}function K(Gt){return"!"===Gt||Gt>="#"&&Gt<="'"||Gt>="*"&&Gt<="+"||Gt>="-"&&Gt<="."||Gt>="0"&&Gt<="9"||Gt>="A"&&Gt<="Z"||Gt>="^"&&Gt<="~"}function ne(Gt){return Gt>="1"&&Gt<="9"}function le(Gt){return Gt>="A"&&Gt<="Z"||Gt>="a"&&Gt<="z"}function me(Gt){return"d"===Gt||"h"===Gt||"m"===Gt||"s"===Gt}function be(Gt){return Gt>"\x01"&&Gt<"\t"||Gt>"\v"&&Gt<"\f"||Gt>"\x0e"&&Gt<"\xff"}function ke(Gt){return le(Gt)||R(Gt)||"+"===Gt||"/"===Gt}function Ze(Gt){return R(Gt)||le(Gt)||"+"===Gt||"/"===Gt||"-"===Gt||"_"===Gt}function Nt(Gt){return le(Gt)||R(Gt)||"+"===Gt||"/"===Gt}function Vt(Gt,G){var ye=Object.keys(Gt);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Gt);G&&(Ne=Ne.filter(function(Ft){return Object.getOwnPropertyDescriptor(Gt,Ft).enumerable})),ye.push.apply(ye,Ne)}return ye}function kt(Gt){for(var G=1;G<arguments.length;G++){var ye=null!=arguments[G]?arguments[G]:{};G%2?Vt(Object(ye),!0).forEach(function(Ne){Sn(Gt,Ne,ye[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Gt,Object.getOwnPropertyDescriptors(ye)):Vt(Object(ye)).forEach(function(Ne){Object.defineProperty(Gt,Ne,Object.getOwnPropertyDescriptor(ye,Ne))})}return Gt}function Sn(Gt,G,ye){return G in Gt?Object.defineProperty(Gt,G,{value:ye,enumerable:!0,configurable:!0,writable:!0}):Gt[G]=ye,Gt}var Gt;(Gt=w||(w={})).VERSION="v",Gt.ORIGIN="o",Gt.SESSION_NAME="s",Gt.INFORMATION="i",Gt.URI="u",Gt.EMAIL="e",Gt.PHONE="p",Gt.CONNECTION="c",Gt.BANDWIDTH="b",Gt.TIME="t",Gt.REPEAT="r",Gt.ZONE_ADJUSTMENTS="z",Gt.KEY="k",Gt.ATTRIBUTE="a",Gt.MEDIA="m";class ln{consumeText(G,ye){let Ne=ye;for(;Ne<G.length;){const Ft=G[Ne];if("\0"===Ft||"\r"===Ft||Ft===v)break;Ne+=1}if(Ne-ye==0)throw new Error("Invalid text, at ".concat(G));return Ne}consumeUnicastAddress(G,ye,Ne){return this.consumeTill(G,ye,S)}consumeOneOrMore(G,ye,Ne){let Ft=ye;for(;Ne(G[Ft]);)Ft++;if(Ft-ye==0)throw new Error("Invalid rule at ".concat(ye,"."));return Ft}consumeSpace(G,ye){if(G[ye]===S)return ye+1;throw new Error("Invalid space at ".concat(ye,"."))}consumeIP4Address(G,ye){let Ne=ye;for(let Ft=0;Ft<4;Ft++)if(Ne=this.consumeDecimalUChar(G,Ne),3!==Ft){if("."!==G[Ne])throw new Error("Invalid IP4 address.");Ne++}return Ne}consumeDecimalUChar(G,ye){let Ne=ye;for(let In=0;In<3&&R(G[Ne]);In++,Ne++);if(Ne-ye==0)throw new Error("Invalid decimal uchar.");const Ft=parseInt(G.slice(ye,Ne));if(Ft>=0&&Ft<=255)return Ne;throw new Error("Invalid decimal uchar")}consumeIP6Address(G,ye){let Ne=this.consumeHexpart(G,ye);return":"===G[Ne]&&(Ne+=1,Ne=this.consumeIP4Address(G,Ne)),Ne}consumeHexpart(G,ye){let Ne=ye;if(":"===G[Ne]&&":"===G[Ne+1]){Ne+=2;try{Ne=this.consumeHexseq(G,Ne)}catch{}return Ne}if(Ne=this.consumeHexseq(G,Ne),":"===G[Ne]&&":"===G[Ne+1]){Ne+=2;try{Ne=this.consumeHexseq(G,Ne)}catch{}return Ne}return Ne}consumeHexseq(G,ye){let Ne=ye;for(;Ne=this.consumeHex4(G,Ne),":"===G[Ne]&&":"!==G[Ne+1];)Ne+=1;return Ne}consumeHex4(G,ye){let Ne=0;for(;Ne<4;Ne++)if(!((Ft=G[ye+Ne])>="0"&&Ft<="9"||Ft>="a"&&Ft<="f"||Ft>="A"&&Ft<="F")){if(0===Ne)throw new Error("Invalid hex 4");break}var Ft;return ye+Ne}consumeFQDN(G,ye){let Ne=ye;for(;R(G[Ne])||le(G[Ne])||"-"===G[Ne]||"."===G[Ne];)Ne+=1;if(Ne-ye<4)throw new Error("Invalid FQDN");return Ne}consumeExtnAddr(G,ye){return this.consumeOneOrMore(G,ye,W)}consumeMulticastAddress(G,ye,Ne){switch(Ne){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(G,ye);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(G,ye);default:try{return this.consumeFQDN(G,ye)}catch{return this.consumeExtnAddr(G,ye)}}}consumeIP6MulticastAddress(G,ye){const Ne=this.consumeHexpart(G,ye);return"/"===G[Ne]?this.consumeInteger(G,Ne+1):Ne}consumeIP4MulticastAddress(G,ye){let Ne=ye+3;const Ft=G.slice(ye,Ne),In=parseInt(Ft);if(In<224||In>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let br=0;br<3;br++){if("."!==G[Ne])throw new Error("Invalid IP4 multicast address.");Ne+=1,Ne=this.consumeDecimalUChar(G,Ne)}return"/"===G[Ne]&&(Ne+=1),Ne=this.consumeTTL(G,Ne),"/"===G[Ne]&&(Ne=this.consumeInteger(G,Ne)),Ne}consumeInteger(G,ye){if(!ne(G[ye]))throw new Error("Invalid integer.");for(ye+=1;R(G[ye]);)ye+=1;return ye}consumeTTL(G,ye){if("0"===G[ye])return ye+1;if(!ne(G[ye]))throw new Error("Invalid TTL.");ye+=1;for(let Ne=0;Ne<2&&R(G[ye]);Ne++)ye+=1;return ye}consumeToken(G,ye){return this.consumeOneOrMore(G,ye,K)}consumeTime(G,ye){let Ne=ye;if("0"===G[Ne])return Ne+1;for(ne(G[Ne])&&(Ne+=1);R(G[Ne]);)Ne++;if(Ne-ye<10)throw new Error("Invalid time");return Ne}consumeAddress(G,ye){return this.consumeTill(G,ye,S)}consumeTypedTime(G,ye){let Ne=ye;return Ne=this.consumeOneOrMore(G,Ne,R),me(G[Ne])?Ne+1:Ne}consumeRepeatInterval(G,ye){if(!ne(G[ye]))throw new Error("Invalid repeat interval");for(ye+=1;R(G[ye]);)ye+=1;return me(G[ye])&&(ye+=1),ye}consumePort(G,ye){return this.consumeOneOrMore(G,ye,R)}consume(G,ye,Ne){for(let Ft=0;Ft<Ne.length;Ft++){if(ye+Ft>=G.length)throw new Error("consume exceeding value length");if(G[ye+Ft]!==Ne[Ft])throw new Error("consume ".concat(Ne," failed at ").concat(Ft))}return ye+Ne.length}consumeTill(G,ye,Ne){let Ft=ye;for(;Ft<G.length&&("string"!=typeof Ne||G[Ft]!==Ne)&&("function"!=typeof Ne||!Ne(G[Ft]));)Ft++;return Ft}}class dn extends ln{constructor(){super(),Sn(this,"records",[]),Sn(this,"currentLine",0)}parse(G){const ye=this.probeEOL(G);this.records=G.split(ye).filter(Nh=>!!Nh.trim()).map(this.parseLine),this.currentLine=0;const Ne=this.parseVersion(),Ft=this.parseOrigin(),In=this.parseSessionName(),br=this.parseInformation(),Ar=this.parseUri(),Nr=this.parseEmail(),Vi=this.parsePhone(),nu=this.parseConnection(),Ka=this.parseBandWidth(),Io=this.parseTimeFields(),Ji=this.parseKey(),pa=this.parseSessionAttribute(),Xf=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:Ne,origin:Ft,sessionName:In,information:br,uri:Ar,emails:Nr,phones:Vi,connection:nu,bandwidths:Ka,timeFields:Io,key:Ji,attributes:pa,mediaDescriptions:Xf}}getCurrentRecord(){const G=this.records[this.currentLine];if(!G)throw new Error("Record doesn't exit.");return G}probeEOL(G){for(let ye=0;ye<G.length;ye++)if(G[ye]===v)return"\r"===G[ye-1]?E:v;throw new Error("Invalid newline character.")}parseLine(G,ye){if(G.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const Ne=G[0];if("="!==G[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:Ne,value:G.slice(2),line:ye,cur:0}}parseSessionAttribute(){const G=new He;for(;this.currentLine<this.records.length;){const ye=this.getCurrentRecord();if(ye.type!==w.ATTRIBUTE)break;const Ne={attField:this.extractOneOrMore(ye,Ft=>K(Ft)&&":"!==Ft),_cur:0};":"===ye.value[ye.cur]&&(ye.cur+=1,Ne.attValue=this.extractOneOrMore(ye,be)),G.parse(Ne),this.currentLine++}return G.digest()}parseMediaAttributes(G){const ye=new ct(G);for(;this.currentLine<this.records.length;){const Ne=this.getCurrentRecord();if(Ne.type!==w.ATTRIBUTE)break;const Ft={attField:this.extractOneOrMore(Ne,In=>K(In)&&":"!==In),_cur:0};":"===Ne.value[Ne.cur]&&(Ne.cur+=1,Ft.attValue=this.extractOneOrMore(Ne,be)),ye.parse(Ft),this.currentLine++}return ye.digest()}parseKey(){const G=this.getCurrentRecord();if(G.type===w.KEY){if("prompt"===G.value||"clear:"===G.value||"base64:"===G.value||"uri:"===G.value)return G.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const G=this.getCurrentRecord();if(G.type===w.ZONE_ADJUSTMENTS){const ye=[];for(;;)try{const Ne=this.extract(G,this.consumeTime);this.consumeSpaceForRecord(G);let Ft=!1;"-"===G.value[G.cur]&&(Ft=!0,G.cur+=1);const In=this.extract(G,this.consumeTypedTime);ye.push({time:Ne,typedTime:In,back:Ft})}catch{break}if(0===ye.length)throw new Error("Invalid zone adjustments");return this.currentLine++,ye}return[]}parseRepeat(){const G=[];for(;;){const ye=this.getCurrentRecord();if(ye.type!==w.REPEAT)break;{const Ne=this.extract(ye,this.consumeRepeatInterval),Ft=this.parseTypedTime(ye);G.push({repeatInterval:Ne,typedTimes:Ft}),this.currentLine++}}return G}parseTypedTime(G){const ye=[];for(;;)try{this.consumeSpaceForRecord(G),ye.push(this.extract(G,this.consumeTypedTime))}catch{break}if(0===ye.length)throw new Error("Invalid typed time.");return ye}parseTime(){const G=this.getCurrentRecord(),ye=this.extract(G,this.consumeTime);this.consumeSpaceForRecord(G);const Ne=this.extract(G,this.consumeTime);return this.currentLine++,{startTime:ye,stopTime:Ne}}parseBandWidth(){const G=[];for(;this.currentLine<this.records.length;){const ye=this.getCurrentRecord();if(ye.type!==w.BANDWIDTH)break;{const Ne=this.extractOneOrMore(ye,K);if(":"!==ye.value[ye.cur])throw new Error("Invalid bandwidth field.");ye.cur++;const Ft=this.extractOneOrMore(ye,R);G.push({bwtype:Ne,bandwidth:Ft}),this.currentLine++}}return G}parseVersion(){const G=this.getCurrentRecord();if(G.type!==w.VERSION)throw new Error("first sdp record must be version");const ye=G.value.slice(0,this.consumeOneOrMore(G.value,0,R));if(ye.length!==G.value.length)throw new Error('invalid proto version, "v='.concat(G.value,'"'));return this.currentLine++,ye}parseOrigin(){const G=this.getCurrentRecord();if(G.type!==w.ORIGIN)throw new Error("second line of sdp must be origin");const ye=this.extractOneOrMore(G,W);this.consumeSpaceForRecord(G);const Ne=this.extractOneOrMore(G,R);this.consumeSpaceForRecord(G);const Ft=this.extractOneOrMore(G,R);this.consumeSpaceForRecord(G);const In=this.extractOneOrMore(G,K);this.consumeSpaceForRecord(G);const br=this.extractOneOrMore(G,K);this.consumeSpaceForRecord(G);const Ar=this.extract(G,this.consumeUnicastAddress);return this.currentLine++,{username:ye,sessId:Ne,sessVersion:Ft,nettype:In,addrtype:br,unicastAddress:Ar}}parseSessionName(){const G=this.getCurrentRecord();if(G.type===w.SESSION_NAME){const ye=this.extract(G,this.consumeText);return this.currentLine++,ye}}parseInformation(){const G=this.getCurrentRecord();if(G.type!==w.INFORMATION)return;const ye=this.extract(G,this.consumeText);return this.currentLine++,ye}parseUri(){const G=this.getCurrentRecord();if(G.type===w.URI)return this.currentLine++,G.value}parseEmail(){const G=[];for(;;){const ye=this.getCurrentRecord();if(ye.type!==w.EMAIL)break;G.push(ye.value),this.currentLine++}return G}parsePhone(){const G=[];for(;;){const ye=this.getCurrentRecord();if(ye.type!==w.PHONE)break;G.push(ye.value),this.currentLine++}return G}parseConnection(){const G=this.getCurrentRecord();if(G.type===w.CONNECTION){const ye=this.extractOneOrMore(G,K);this.consumeSpaceForRecord(G);const Ne=this.extractOneOrMore(G,K);this.consumeSpaceForRecord(G);const Ft=this.extract(G,this.consumeAddress);return this.currentLine++,{nettype:ye,addrtype:Ne,address:Ft}}}parseMedia(){const G=this.getCurrentRecord(),ye=this.extract(G,this.consumeToken);this.consumeSpaceForRecord(G);let Ne=this.extract(G,this.consumePort);"/"===G.value[G.cur]&&(G.cur+=1,Ne+=this.extract(G,this.consumeInteger)),this.consumeSpaceForRecord(G);const Ft=[];for(Ft.push(this.extract(G,this.consumeToken));"/"===G.value[G.cur];)G.cur+=1,Ft.push(this.extract(G,this.consumeToken));if(0===Ft.length)throw new Error("Invalid proto");const In=this.parseFmt(G);return this.currentLine++,{mediaType:ye,port:Ne,protos:Ft,fmts:In}}parseTimeFields(){const G=[];for(;this.getCurrentRecord().type===w.TIME;){const ye=this.parseTime(),Ne=this.parseRepeat(),Ft=this.parseZone();G.push({time:ye,repeats:Ne,zones:Ft})}return G}parseMediaDescription(){const G=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===w.MEDIA;){const ye=this.parseMedia(),Ne=this.parseInformation(),Ft=this.parseConnections(),In=this.parseBandWidth(),br=this.parseKey(),Ar=this.parseMediaAttributes(ye);G.push({media:ye,information:Ne,connections:Ft,bandwidths:In,key:br,attributes:Ar})}return G}parseConnections(){const G=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===w.CONNECTION;)G.push(this.parseConnection());return G}parseFmt(G){const ye=[];for(;;)try{this.consumeSpaceForRecord(G),ye.push(this.extract(G,this.consumeToken))}catch{break}if(0===ye.length)throw new Error("Invalid fmts");return ye}extract(G,ye,...Ne){const Ft=ye.call(this,G.value,G.cur,...Ne),In=G.value.slice(G.cur,Ft);return G.cur=Ft,In}extractOneOrMore(G,ye){const Ne=this.consumeOneOrMore(G.value,G.cur,ye),Ft=G.value.slice(G.cur,Ne);return G.cur=Ne,Ft}consumeSpaceForRecord(G){if(G.value[G.cur]!==S)throw new Error("Invalid space at ".concat(G.cur,"."));G.cur+=1}}class It extends ln{constructor(...G){super(...G),Sn(this,"attributes",void 0),Sn(this,"digested",!1)}extractOneOrMore(G,ye,Ne){const Ft=this.consumeOneOrMore(G.attValue,G._cur,ye),In=G.attValue.slice(G._cur,Ft),[br,Ar]=Ne||[];if("number"==typeof br&&In.length<br)throw new Error("error in length, should be more or equal than ".concat(br," characters."));if("number"==typeof Ar&&In.length>Ar)throw new Error("error in length, should be less or equal than ".concat(Ar," characters."));return G._cur=Ft,In}consumeAttributeSpace(G){if(G.attValue[G._cur]!==S)throw new Error("Invalid space at ".concat(G._cur,"."));G._cur+=1}extract(G,ye,...Ne){if(!G.attValue)throw new Error("Nothing to extract from attValue.");const Ft=ye.call(this,G.attValue,G._cur,...Ne),In=G.attValue.slice(G._cur,Ft);return G._cur=Ft,In}atEnd(G){if(!G.attValue)throw new Error;return G._cur>=G.attValue.length}peekChar(G){if(!G.attValue)throw new Error;return G.attValue[G._cur]}peek(G,ye){if(!G.attValue)throw new Error;for(let Ne=0;Ne<ye.length;Ne++)if(ye[Ne]!==G.attValue[G._cur+Ne])return!1;return!0}parseIceUfrag(G){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(G,ke,[4,256])}parseIcePwd(G){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(G,ke,[22,256])}parseIceOptions(G){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const ye=[];for(;!this.atEnd(G);){ye.push(this.extractOneOrMore(G,ke));try{this.consumeAttributeSpace(G)}catch(Ne){if(this.atEnd(G))break;throw Ne}}this.attributes.iceOptions=ye}parseFingerprint(G){const ye=this.extract(G,this.consumeToken);this.consumeAttributeSpace(G);const Ne=this.extract(G,this.consumeTill);this.attributes.fingerprints.push({hashFunction:ye,fingerprint:Ne})}parseExtmap(G){const ye=this.extractOneOrMore(G,R);let Ne;"/"===this.peekChar(G)&&(this.extract(G,this.consume,"/"),Ne=this.extract(G,this.consumeToken)),this.consumeAttributeSpace(G);const Ft=this.extract(G,this.consumeTill,S),In=kt(kt({entry:parseInt(ye,10)},Ne&&{direction:Ne}),{},{extensionName:Ft});this.peekChar(G)===S&&(this.consumeAttributeSpace(G),In.extensionAttributes=this.extract(G,this.consumeTill)),this.attributes.extmaps.push(In)}parseSetup(G){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const ye=this.extract(G,this.consumeTill);if("active"!==ye&&"passive"!==ye&&"actpass"!==ye&&"holdconn"!==ye)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=ye}}class He extends It{constructor(...G){super(...G),Sn(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(G){if(this.digested)throw new Error("already digested");try{switch(G.attField){case"group":this.parseGroup(G);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(G);break;case"ice-pwd":this.parseIcePwd(G);break;case"ice-options":this.parseIceOptions(G);break;case"fingerprint":this.parseFingerprint(G);break;case"setup":this.parseSetup(G);break;case"tls-id":this.parseTlsId(G);break;case"identity":this.parseIdentity(G);break;case"extmap":this.parseExtmap(G);break;case"msid-semantic":this.parseMsidSemantic(G);break;default:G.ignored=!0,this.attributes.unrecognized.push(G)}}catch(ye){throw console.error("parsing session attribute ".concat(G.attField,' error, "a=').concat(G.attField,":").concat(G.attValue,'"')),ye}if(!G.ignored&&G.attValue&&!this.atEnd(G))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(G){const ye=this.extract(G,this.consumeToken),Ne=[];for(;!this.atEnd(G)&&this.peekChar(G)===S;)this.consumeAttributeSpace(G),Ne.push(this.extract(G,this.consumeToken));this.attributes.groups.push({semantic:ye,identificationTag:Ne})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(G){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(G,Ze)}parseIdentity(G){const ye=this.extractOneOrMore(G,Nt),Ne=[];for(;!this.atEnd(G)&&this.peekChar(G)===S;){this.consumeAttributeSpace(G);const Ft=this.extract(G,this.consumeToken);this.extract(G,this.consume,"=");const In=this.extractOneOrMore(G,br=>br!==S&&be(br));Ne.push({name:Ft,value:In})}this.attributes.identities.push({assertionValue:ye,extensions:Ne})}parseMsidSemantic(G){this.peekChar(G)===S&&this.consumeAttributeSpace(G);const ye={semantic:this.extract(G,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(G)}catch{break}if("*"===this.peekChar(G)){this.extract(G,this.consume,"*"),ye.applyForAll=!0;break}{const Ne=this.extract(G,this.consumeTill,S);ye.identifierList.push(Ne)}}this.attributes.msidSemantic=ye}}class ct extends It{constructor(G){super(),Sn(this,"attributes",void 0),-1!==G.protos.indexOf("RTP")||G.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(G){if(this.digested)throw new Error("already digested");try{switch(G.attField){case"extmap":this.parseExtmap(G);break;case"setup":this.parseSetup(G);break;case"ice-ufrag":this.parseIceUfrag(G);break;case"ice-pwd":this.parseIcePwd(G);break;case"ice-options":this.parseIceOptions(G);break;case"candidate":this.parseCandidate(G);break;case"remote-candidate":this.parseRemoteCandidate(G);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(G);break;case"rtpmap":this.parseRtpmap(G);break;case"ptime":this.parsePtime(G);break;case"maxptime":this.parseMaxPtime(G);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(G);break;case"ssrc":this.parseSSRC(G);break;case"fmtp":this.parseFmtp(G);break;case"rtcp-fb":this.parseRtcpFb(G);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(G);break;case"mid":this.parseMid(G);break;case"msid":this.parseMsid(G);break;case"imageattr":this.parseImageAttr(G);break;case"rid":this.parseRid(G);break;case"simulcast":this.parseSimulcast(G);break;case"sctp-port":this.parseSctpPort(G);break;case"max-message-size":this.parseMaxMessageSize(G);break;case"ssrc-group":this.parseSSRCGroup(G);break;default:G.ignored=!0,this.attributes.unrecognized.push(G)}}catch(ye){throw console.error("parsing media attribute ".concat(G.attField,' error, "a=').concat(G.attField,":").concat(G.attValue,'"')),ye}if(!G.ignored&&G.attValue&&!this.atEnd(G))throw new Error("attribute parsing error")}parseCandidate(G){const ye=this.extractOneOrMore(G,ke,[1,32]);this.consumeAttributeSpace(G);const Ne=this.extractOneOrMore(G,R,[1,5]);this.consumeAttributeSpace(G);const Ft=this.extract(G,this.consumeToken);this.consumeAttributeSpace(G);const In=this.extractOneOrMore(G,R,[1,10]);this.consumeAttributeSpace(G);const br=this.extract(G,this.consumeAddress);this.consumeAttributeSpace(G);const Ar=this.extract(G,this.consumePort);this.consumeAttributeSpace(G),this.extract(G,this.consume,"typ"),this.consumeAttributeSpace(G);const Nr={foundation:ye,componentId:Ne,transport:Ft,priority:In,connectionAddress:br,port:Ar,type:this.extract(G,this.consumeToken),extension:{}};for(this.peek(G," raddr")&&(this.extract(G,this.consume," raddr"),this.consumeAttributeSpace(G),Nr.relAddr=this.extract(G,this.consumeAddress)),this.peek(G," rport")&&(this.extract(G,this.consume," rport"),this.consumeAttributeSpace(G),Nr.relPort=this.extract(G,this.consumePort));this.peekChar(G)===S;){this.consumeAttributeSpace(G);const Vi=this.extract(G,this.consumeToken);this.consumeAttributeSpace(G),Nr.extension[Vi]=this.extractOneOrMore(G,x)}this.attributes.candidates.push(Nr)}parseRemoteCandidate(G){const ye=[];for(;;){const Ne=this.extractOneOrMore(G,R,[1,5]);this.consumeAttributeSpace(G);const Ft=this.extract(G,this.consumeAddress);this.consumeAttributeSpace(G);const In=this.extract(G,this.consumePort);ye.push({componentId:Ne,connectionAddress:Ft,port:In});try{this.consumeAttributeSpace(G)}catch{break}}this.attributes.remoteCandidatesList.push(ye)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(G){const ye=this.extract(G,this.consumeToken);this.consumeAttributeSpace(G);const Ne=this.extract(G,this.consumeTill,"/");this.extract(G,this.consume,"/");const Ft={encodingName:Ne,clockRate:this.extractOneOrMore(G,R)};this.atEnd(G)||"/"!==this.peekChar(G)||(this.extract(G,this.consume,"/"),Ft.encodingParameters=parseInt(this.extract(G,this.consumeTill),10));const In=this.attributes.payloads.find(br=>br.payloadType===parseInt(ye,10));In?In.rtpMap=Ft:this.attributes.payloads.push({payloadType:parseInt(ye,10),rtpMap:Ft,rtcpFeedbacks:[]})}parsePtime(G){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(G,this.consumeTill)}parseMaxPtime(G){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(G,this.consumeTill)}parseDirection(G){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=G.attField}parseSSRC(G){const ye=this.extractOneOrMore(G,R);this.consumeAttributeSpace(G);const Ne=this.extract(G,this.consumeTill,":");let Ft;":"===this.peekChar(G)&&(this.extract(G,this.consume,":"),Ft=this.extract(G,this.consumeTill));const In=this.attributes.ssrcs.find(br=>br.ssrcId===parseInt(ye,10));In?In.attributes[Ne]=Ft:this.attributes.ssrcs.push({ssrcId:parseInt(ye,10),attributes:{[Ne]:Ft}})}parseFmtp(G){const ye=this.extract(G,this.consumeTill,S);this.consumeAttributeSpace(G);const Ne=this.extract(G,this.consumeTill),Ft={};Ne.split(";").forEach(br=>{let[Ar,Nr]=br.split("=");Ar=Ar.trim(),Nr="string"==typeof Nr?Nr.trim():Nr,"string"==typeof Ar&&Ar.length>0&&(Ft[Ar]=Nr)});const In=this.attributes.payloads.find(br=>br.payloadType===parseInt(ye,10));In?In.fmtp={parameters:Ft}:this.attributes.payloads.push({payloadType:parseInt(ye,10),rtcpFeedbacks:[],fmtp:{parameters:Ft}})}parseFmtParameters(G){const ye={},Ne=this.extract(G,this.consumeTill,"=");G._cur++;const Ft=this.extract(G,this.consumeTill,";");for(ye[Ne]=Ft;";"===G.attValue[G._cur];){const In=this.extract(G,this.consumeTill,"=");G._cur++;const br=this.extract(G,this.consumeTill,";");ye[In]=br}return ye}parseRtcpFb(G){let ye="";ye="*"===this.peekChar(G)?this.extract(G,this.consume,"*"):this.extract(G,this.consumeTill,S),this.consumeAttributeSpace(G);const Ne=this.extract(G,this.consumeTill,S);let Ft;if("trr-int"===Ne)Ft={type:Ne,interval:this.extract(G,this.consumeTill)};else{const In={type:Ne};this.peekChar(G)===S&&(this.consumeAttributeSpace(G),In.parameter=this.extract(G,this.consumeToken),this.peekChar(G)===S&&(In.additional=this.extract(G,this.consumeTill))),Ft=In}if("*"===ye)this.attributes.rtcpFeedbackWildcards.push(Ft);else{const In=this.attributes.payloads.find(br=>br.payloadType===parseInt(ye,10));In?In.rtcpFeedbacks.push(Ft):this.attributes.payloads.push({payloadType:parseInt(ye,10),rtcpFeedbacks:[Ft]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(G){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const ye={port:this.extract(G,this.consumePort)};this.peekChar(G)===S&&(this.consumeAttributeSpace(G),ye.netType=this.extractOneOrMore(G,K),this.consumeAttributeSpace(G),ye.addressType=this.extractOneOrMore(G,K),this.consumeAttributeSpace(G),ye.address=this.extract(G,this.consumeAddress)),this.attributes.rtcp=ye}parseMsid(G){const ye={id:this.extractOneOrMore(G,K,[1,64])};this.peekChar(G)===S&&(this.consumeAttributeSpace(G),ye.appdata=this.extractOneOrMore(G,K,[1,64])),this.attributes.msids.push(ye)}parseImageAttr(G){this.attributes.imageattr.push(G.attValue)}parseRid(G){const ye=this.extractOneOrMore(G,Ft=>le(Ft)||R(Ft)||"_"===Ft||"-"===Ft);this.consumeAttributeSpace(G);const Ne={id:ye,direction:this.extract(G,this.consumeToken),params:[]};if(this.peekChar(G)===S){if(this.consumeAttributeSpace(G),this.peek(G,"pt=")){this.extract(G,this.consume,"pt=");const Ft=[];for(;;){const In=this.extract(G,this.consumeToken);Ft.push(In);try{this.extract(G,this.consume,",")}catch{break}}Ne.payloads=Ft,this.peekChar(G)===S&&this.extract(G,this.consume,S)}for(;;){const Ft=this.extract(G,this.consumeToken);switch(Ft){case"depend":{const In={type:Ft,rids:this.extract(G,this.consume,"=").split(",")};Ne.params.push(In);break}default:{const In={type:Ft};"="===this.peekChar(G)&&(this.extract(G,this.consume,"="),In.val=this.extract(G,this.consumeTill,";")),Ne.params.push(In)}}try{this.extract(G,this.consume,";")}catch{break}}}this.attributes.rids.push(Ne)}parseSimulcast(G){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=G.attValue,this.extract(G,this.consumeTill)}parseSctpPort(G){this.attributes.sctpPort=this.extractOneOrMore(G,R,[1,5])}parseMaxMessageSize(G){this.attributes.maxMessageSize=this.extractOneOrMore(G,R,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(G){this.attributes.mid=this.extract(G,this.consumeToken)}parseSSRCGroup(G){const ye=this.extract(G,this.consumeToken),Ne=[];for(;;)try{this.consumeAttributeSpace(G);const Ft=this.extract(G,this.consumeInteger);Ne.push(parseInt(Ft,10))}catch{break}this.attributes.ssrcGroups.push({semantic:ye,ssrcIds:Ne})}}function bt(Gt,G,ye){return G in Gt?Object.defineProperty(Gt,G,{value:ye,enumerable:!0,configurable:!0,writable:!0}):Gt[G]=ye,Gt}class bn{constructor(){bt(this,"eol",E)}print(G,ye){let Ne="";return ye&&(this.eol=ye),Ne+=this.printVersion(G.version),Ne+=this.printOrigin(G.origin),Ne+=this.printSessionName(G.sessionName),Ne+=this.printInformation(G.information),Ne+=this.printUri(G.uri),Ne+=this.printEmail(G.emails),Ne+=this.printPhone(G.phones),Ne+=this.printConnection(G.connection),Ne+=this.printBandwidth(G.bandwidths),Ne+=this.printTimeFields(G.timeFields),Ne+=this.printKey(G.key),Ne+=this.printSessionAttributes(G.attributes),Ne+=this.printMediaDescription(G.mediaDescriptions),Ne}printVersion(G){return"v=".concat(G).concat(this.eol)}printOrigin(G){return"o=".concat(G.username," ").concat(G.sessId," ").concat(G.sessVersion," ").concat(G.nettype," ").concat(G.addrtype," ").concat(G.unicastAddress).concat(this.eol)}printSessionName(G){return G?"s=".concat(G).concat(this.eol):""}printInformation(G){return G?"i=".concat(G).concat(this.eol):""}printUri(G){return G?"u=".concat(G).concat(this.eol):""}printEmail(G){let ye="";for(const Ne of G)ye+="e=".concat(Ne).concat(this.eol);return ye}printPhone(G){let ye="";for(const Ne of G)ye+="e=".concat(Ne).concat(this.eol);return ye}printConnection(G){return G?"c=".concat(G.nettype," ").concat(G.addrtype," ").concat(G.address).concat(this.eol):""}printBandwidth(G){let ye="";for(const Ne of G)ye+="b=".concat(Ne.bwtype,":").concat(Ne.bandwidth).concat(this.eol);return ye}printTimeFields(G){let ye="";for(const Ne of G){ye+="t=".concat(Ne.time.startTime," ").concat(Ne.time.startTime).concat(this.eol);for(const Ft of Ne.repeats)ye+="r=".concat(Ft.repeatInterval," ").concat(Ft.typedTimes.join(" ")).concat(this.eol);Ne.zoneAdjustments&&(ye+="z=",ye+="z=".concat(Ne.zoneAdjustments.map(Ft=>"".concat(Ft.time," ").concat(Ft.back?"-":""," ").concat(Ft.typedTime)).join(" ")).concat(this.eol),ye+=this.eol)}return ye}printKey(G){return G?"k=".concat(G).concat(this.eol):""}printAttributes(G){let ye="";for(const Ne of G)ye+="a=".concat(Ne.attField).concat(Ne.attValue?":".concat(Ne.attValue):"").concat(this.eol);return ye}printMediaDescription(G){let ye="";for(const Ne of G)ye+=this.printMedia(Ne.media),ye+=this.printInformation(Ne.information),ye+=this.printConnections(Ne.connections),ye+=this.printBandwidth(Ne.bandwidths),ye+=this.printKey(Ne.key),ye+=this.printMediaAttributes(Ne);return ye}printConnections(G){let ye="";for(const Ne of G)ye+=this.printConnection(Ne);return ye}printMedia(G){return"m=".concat(G.mediaType," ").concat(G.port," ").concat(G.protos.join("/")," ").concat(G.fmts.join(" ")).concat(this.eol)}printSessionAttributes(G){return new lt(this.eol).print(G)}printMediaAttributes(G){return new xt(this.eol).print(G)}}class Ye{constructor(G){bt(this,"eol",void 0),this.eol=G}printIceUfrag(G){return void 0===G?"":"a=ice-ufrag:".concat(G).concat(this.eol)}printIcePwd(G){return void 0===G?"":"a=ice-pwd:".concat(G).concat(this.eol)}printIceOptions(G){return void 0===G?"":"a=ice-options:".concat(G.join(S)).concat(this.eol)}printFingerprints(G){return G.length>0?G.map(ye=>"a=fingerprint:".concat(ye.hashFunction).concat(S).concat(ye.fingerprint)).join(this.eol)+this.eol:""}printExtmap(G){return G.map(ye=>"a=extmap:".concat(ye.entry).concat(ye.direction?"/".concat(ye.direction):"").concat(S).concat(ye.extensionName).concat(ye.extensionAttributes?"".concat(S).concat(ye.extensionAttributes):"").concat(this.eol)).join("")}printSetup(G){return void 0===G?"":"a=setup:".concat(G).concat(this.eol)}printUnrecognized(G){return G.map(ye=>"a=".concat(ye.attField).concat(ye.attValue?":".concat(ye.attValue):"").concat(this.eol)).join("")}}class lt extends Ye{print(G){let ye="";return ye+=this.printGroups(G.groups),ye+=this.printMsidSemantic(G.msidSemantic),ye+=this.printIceLite(G.iceLite),ye+=this.printIceUfrag(G.iceUfrag),ye+=this.printIcePwd(G.icePwd),ye+=this.printIceOptions(G.iceOptions),ye+=this.printFingerprints(G.fingerprints),ye+=this.printSetup(G.setup),ye+=this.printTlsId(G.tlsId),ye+=this.printIdentity(G.identities),ye+=this.printExtmap(G.extmaps),ye+=this.printUnrecognized(G.unrecognized),ye}printGroups(G){let ye="";return G.length>0&&(ye+=G.map(Ne=>"a=group:".concat(Ne.semantic).concat(Ne.identificationTag.map(Ft=>"".concat(S).concat(Ft)).join("")).concat(this.eol)).join("")),ye}printIceLite(G){return void 0===G?"":"a=ice-lite"+this.eol}printTlsId(G){return G?"a=tls-id:".concat(G).concat(this.eol):""}printIdentity(G){return 0===G.length?"":G.map(ye=>"a=identity:".concat(ye.assertionValue).concat(ye.extensions.map(Ne=>"".concat(S).concat(Ne.name).concat(Ne.value?"=".concat(Ne.value):"")))).join(this.eol)+this.eol}printMsidSemantic(G){if(!G)return"";let ye="a=msid-semantic:".concat(G.semantic);return G.applyForAll?ye+="".concat(S,"*"):G.identifierList.length>0&&(ye+=G.identifierList.map(Ne=>"".concat(S).concat(Ne))),ye+this.eol}}class xt extends Ye{print(G){const ye=G.attributes;let Ne="";return Ne+=this.printRTCP(ye.rtcp),Ne+=this.printIceUfrag(ye.iceUfrag),Ne+=this.printIcePwd(ye.icePwd),Ne+=this.printIceOptions(ye.iceOptions),Ne+=this.printCandidates(ye.candidates),Ne+=this.printRemoteCandidatesList(ye.remoteCandidatesList),Ne+=this.printEndOfCandidates(ye.endOfCandidates),Ne+=this.printFingerprints(ye.fingerprints),Ne+=this.printSetup(ye.setup),Ne+=this.printMid(ye.mid),Ne+=this.printExtmap(ye.extmaps),Ne+=this.printRTPRelated(ye),Ne+=this.printPtime(ye.ptime),Ne+=this.printMaxPtime(ye.maxPtime),Ne+=this.printDirection(ye.direction),Ne+=this.printSSRCGroups(ye.ssrcGroups),Ne+=this.printSSRC(ye.ssrcs),Ne+=this.printRTCPMux(ye.rtcpMux),Ne+=this.printRTCPMuxOnly(ye.rtcpMuxOnly),Ne+=this.printRTCPRsize(ye.rtcpRsize),Ne+=this.printMSId(ye.msids),Ne+=this.printImageattr(ye.imageattr),Ne+=this.printRid(ye.rids),Ne+=this.printSimulcast(ye.simulcast),Ne+=this.printSCRPPort(ye.sctpPort),Ne+=this.printMaxMessageSize(ye.maxMessageSize),Ne+=this.printUnrecognized(ye.unrecognized),Ne}printCandidates(G){return G.map(ye=>"a=candidate:".concat(ye.foundation).concat(S).concat(ye.componentId).concat(S).concat(ye.transport).concat(S).concat(ye.priority).concat(S).concat(ye.connectionAddress).concat(S).concat(ye.port).concat(S,"typ").concat(S).concat(ye.type).concat(ye.relAddr?"".concat(S,"raddr").concat(S).concat(ye.relAddr):"").concat(ye.relPort?"".concat(S,"rport").concat(S).concat(ye.relPort):"").concat(Object.keys(ye.extension).map(Ne=>"".concat(S).concat(Ne).concat(S).concat(ye.extension[Ne])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(G){return G.map(ye=>"a=remote-candidates:".concat(ye.join(S)).concat(this.eol)).join("")}printEndOfCandidates(G){return void 0===G?"":"a=end-of-candidates"+this.eol}printRTPRelated(G){if(!G.payloads)return"";const ye=G.payloads;let Ne="";Ne+=G.rtcpFeedbackWildcards.map(Ft=>this.printRTCPFeedback("*",Ft)).join("");for(const Ft of ye)Ne+=this.printRtpMap(Ft.payloadType,Ft.rtpMap),Ne+=this.printFmtp(Ft.payloadType,Ft.fmtp),Ne+=Ft.rtcpFeedbacks.map(In=>this.printRTCPFeedback(Ft.payloadType,In)).join("");return Ne}printFmtp(G,ye){if(!ye)return"";const Ne=Object.keys(ye.parameters);return 1===Ne.length&&void 0===ye.parameters[Ne[0]]?"a=fmtp:".concat(G).concat(S).concat(Ne[0]).concat(this.eol):"a=fmtp:".concat(G).concat(S).concat(Object.keys(ye.parameters).map(Ft=>"".concat(Ft,"=").concat(ye.parameters[Ft])).join(";")).concat(this.eol)}printRtpMap(G,ye){return ye?"a=rtpmap:".concat(G).concat(S).concat(ye.encodingName,"/").concat(ye.clockRate).concat(ye.encodingParameters?"/".concat(ye.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(G,ye){let Ne="a=rtcp-fb:".concat(G).concat(S),Ft=ye;return"trr-int"===Ft.type?Ne+="ttr-int".concat(S).concat(Ft.interval):(Ne+="".concat(Ft.type),Ft.parameter&&(Ne+="".concat(S).concat(Ft.parameter),Ft.additional&&(Ne+="".concat(S).concat(Ft.additional)))),Ne+this.eol}printPtime(G){return void 0===G?"":"a=ptime:".concat(G).concat(this.eol)}printMaxPtime(G){return void 0===G?"":"a=maxptime:".concat(G).concat(this.eol)}printDirection(G){return void 0===G?"":"a=".concat(G).concat(this.eol)}printSSRC(G){return G.map(ye=>Object.keys(ye.attributes).map(Ne=>"a=ssrc:".concat(ye.ssrcId.toString(10)).concat(S).concat(Ne).concat(ye.attributes[Ne]?":".concat(ye.attributes[Ne]):"").concat(this.eol)).join("")).join("")}printRTCPMux(G){return void 0===G?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(G){return void 0===G?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(G){return void 0===G?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(G){if(void 0===G)return"";let ye="a=rtcp:".concat(G.port);return G.netType&&(ye+="".concat(S).concat(G.netType)),G.addressType&&(ye+="".concat(S).concat(G.addressType)),G.address&&(ye+="".concat(S).concat(G.address)),ye+this.eol}printMSId(G){return G.map(ye=>"a=msid:".concat(ye.id).concat(ye.appdata?"".concat(S).concat(ye.appdata):"").concat(this.eol)).join("")}printImageattr(G){return G.map(ye=>"a=imageattr:".concat(ye).concat(this.eol)).join("")}printRid(G){return G.map(ye=>{let Ne="a=rid:".concat(ye.id).concat(S).concat(ye.direction);return ye.payloads&&(Ne+="".concat(S,"pt=").concat(ye.payloads.join(","))),ye.params.length>0&&(Ne+="".concat(S).concat(ye.params.map(Ft=>"depend"===Ft.type?"depend=".concat(Ft.rids.join(",")):"".concat(Ft.type,"=").concat(Ft.val)).join(";"))),Ne+this.eol}).join("")}printSimulcast(G){return void 0===G?"":"a=simulcast:".concat(G).concat(this.eol)}printSCRPPort(G){return void 0===G?"":"a=sctp-port:".concat(G).concat(this.eol)}printMaxMessageSize(G){return void 0===G?"":"a=max-message-size:".concat(G)}printMid(G){return void 0===G?"":"a=mid:".concat(G).concat(this.eol)}printSSRCGroups(G){return G.map(ye=>"a=ssrc-group:".concat(ye.semantic).concat(ye.ssrcIds.map(Ne=>"".concat(S).concat(Ne.toString(10))).join("")).concat(this.eol)).join("")}}function hn(Gt){return(new dn).parse(Gt)}function On(Gt,G){return(new bn).print(Gt,G)}}},c={};function h(g){if(c[g])return c[g].exports;var f=c[g]={exports:{}};return s[g](f,f.exports,h),f.exports}return h.d=(g,f)=>{for(var A in f)h.o(f,A)&&!h.o(g,A)&&Object.defineProperty(g,A,{enumerable:!0,get:f[A]})},h.o=(g,f)=>Object.prototype.hasOwnProperty.call(g,f),h.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h(8)})()}(Pd);class eW{constructor(o){X(this,"sessionDesc",void 0),X(this,"localCapabilities",void 0),X(this,"rtpCapabilities",void 0),X(this,"candidates",void 0),X(this,"iceParameters",void 0),X(this,"dtlsParameters",void 0),X(this,"setup",void 0),X(this,"currentMidIndex",void 0),X(this,"cname",void 0),o=fc(o);const{remoteIceParameters:s,remoteDtlsParameters:c,candidates:h,remoteRTPCapabilities:g,remoteSetup:f,localCapabilities:A,sdkCodec:v,cname:E}=o,S=Pd.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=h,this.iceParameters=s,this.dtlsParameters=c,this.setup=f,this.localCapabilities=A,this.cname=E;for(let w=0;w<S.mediaDescriptions.length;w++){const R=S.mediaDescriptions[w];if(R.attributes.iceUfrag=s.iceUfrag,R.attributes.icePwd=s.icePwd,R.attributes.fingerprints=c.fingerprints,R.attributes.candidates=h,R.attributes.setup=f,"video"===R.media.mediaType){R.media.fmts=g.videoCodecs.map(W=>W.payloadType.toString(10));const x=g.videoCodecs.filter(W=>{var K;return null===(K=W.rtpMap)||void 0===K?void 0:K.encodingName.toLowerCase().includes(v)});if(0===x.length)throw new Error("Codec ".concat(v," not supported by remote SDP."));R.attributes.payloads=x,R.attributes.extmaps=g.videoExtensions}"audio"===R.media.mediaType&&(R.media.fmts=g.audioCodecs.map(x=>x.payloadType.toString(10)),R.attributes.payloads=g.audioCodecs,R.attributes.extmaps=g.audioExtensions),S.mediaDescriptions[w]=this.mungMediaDesc(R)}this.sessionDesc=S,this.currentMidIndex=S.mediaDescriptions.length-1}toString(){return Pd.exports.print(this.sessionDesc)}send(o,s,c){const{ssrcs:h,ssrcGroups:g}=j1(s,this.cname),f=this.sessionDesc.mediaDescriptions.find(E=>o===ti.VIDEO?"video"===E.media.mediaType:"audio"===E.media.mediaType),A=h[0].attributes.label,v=h[0].attributes.mslabel;return f.attributes.ssrcs=f.attributes.ssrcs.concat(h),f.attributes.ssrcGroups=f.attributes.ssrcGroups.concat(g),{id:A,mslabel:v}}batchSend(o){return o.map(s=>{let{kind:c,ssrcMsg:h}=s;return this.send(c,h,void 0)})}stopSending(o){this.sessionDesc.mediaDescriptions.forEach(s=>{const c=[],h=[],g=[];s.attributes.ssrcs.forEach(f=>{o.includes(f.attributes.label||"")?g.push(f):c.push(f)}),s.attributes.ssrcGroups.forEach(f=>{g.map(A=>A.ssrcId).includes(f.ssrcIds[0])||h.push(f)}),s.attributes.ssrcs=c,s.attributes.ssrcGroups=h})}mute(o){const s=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!s)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.mute."));s.attributes.direction="inactive"}unmute(o){const s=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!s)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.unmute."));s.attributes.direction="sendonly"}receive(o,s,c){o.forEach((h,g)=>{const f=h._mediaStreamTrack,A=this.sessionDesc.mediaDescriptions.findIndex(E=>E.attributes.mid===f.kind),v=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[A],h);this.sessionDesc.mediaDescriptions[A]=v})}stopReceiving(o){}restartICE(o,s){o=fc(o),s=fc(s),this.iceParameters=o,this.candidates=s,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=o.iceUfrag,c.attributes.icePwd=o.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(o){const s=[];for(let c=0;c<o;c++)s.push((this.currentMidIndex+c+1).toString(10));return s}mungRecvMediaDsec(o,s){const c=fc(o);return rL(c,s),dV(c,s),c}updateRecvMedia(o,s){const c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===o);if(-1!==c){const h=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],s);this.sessionDesc.mediaDescriptions[c]=h}}bumpMid(o){this.currentMidIndex+=o}updateTrackLabel(o,s,c){const h=this.sessionDesc.mediaDescriptions.find(f=>o===ti.VIDEO?"video"===f.attributes.mid:"audio"===f.attributes.mid);if(h){const f=h.attributes.ssrcs.find(A=>A.attributes.label===s);var g;f&&(f.attributes.label=c,null===(g=f.attributes.msid)||void 0===g||g.replace(s,c))}}mungMediaDesc(o){const s=fc(o);return Nd(s),function(c){const h=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);h&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(h),1),c.attributes.payloads.forEach(g=>{const f=g.rtcpFeedbacks.findIndex(A=>"transport-cc"===A.type);-1!==f&&g.rtcpFeedbacks.splice(f,1)})}(s),s}getSSRC(o){for(const s of this.sessionDesc.mediaDescriptions)for(const c of s.attributes.ssrcs)if(c.attributes.label===o)return[c]}}function Dp(n){if(Array.isArray(n))return n.map(function(c){return c});if(!tW(n))return n;var o={};for(var s in n)o[s]=tW(n[s])||Array.isArray(n[s])?Dp(n[s]):n[s];return o}function tW(n){return!("object"!=typeof n||Array.isArray(n)||!n)}var k6=function(){function n(o){this.input=[],this.size=o}return n.prototype.add=function(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)},n.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},n}(),Mk=function(n,o){return(Mk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)c.hasOwnProperty(h)&&(s[h]=c[h])})(n,o)};function hV(n,o){function s(){this.constructor=n}Mk(n,o),n.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}var mS=function(){return(mS=Object.assign||function(n){for(var o,s=1,c=arguments.length;s<c;s++)for(var h in o=arguments[s])Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h]);return n}).apply(this,arguments)};function pV(n,o,s,c){return new(s||(s=Promise))(function(h,g){function f(E){try{v(c.next(E))}catch(S){g(S)}}function A(E){try{v(c.throw(E))}catch(S){g(S)}}function v(E){E.done?h(E.value):new s(function(S){S(E.value)}).then(f,A)}v((c=c.apply(n,o||[])).next())})}function Q1(n,o){var s,c,h,g,f={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return g={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function A(v){return function(E){return function(S){if(s)throw new TypeError("Generator is already executing.");for(;f;)try{if(s=1,c&&(h=2&S[0]?c.return:S[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,S[1])).done)return h;switch(c=0,h&&(S=[2&S[0],h.value]),S[0]){case 0:case 1:h=S;break;case 4:return f.label++,{value:S[1],done:!1};case 5:f.label++,c=S[1],S=[0];continue;case 7:S=f.ops.pop(),f.trys.pop();continue;default:if(!((h=(h=f.trys).length>0&&h[h.length-1])||6!==S[0]&&2!==S[0])){f=0;continue}if(3===S[0]&&(!h||S[1]>h[0]&&S[1]<h[3])){f.label=S[1];break}if(6===S[0]&&f.label<h[1]){f.label=h[1],h=S;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(S);break}h[2]&&f.ops.pop(),f.trys.pop();continue}S=o.call(n,f)}catch(w){S=[6,w],c=0}finally{s=h=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([v,E])}}}var Jl,fV={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},H1={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:fV,remoteCandidate:fV}},P6={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},iL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},mV={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},N6={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},gV=function(){function n(o,s){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=Dp(H1),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=o,this.options=s,this.intervalTimer=window.setInterval(function(){return pV(c,void 0,void 0,function(){return Q1(this,function(h){return this.updateStats(),[2]})})},this.options.updateInterval)}return n.prototype.getStats=function(){return this.stats},n.prototype.setVideoIsReady=function(o){this.videoIsReady=o},n.prototype.setVideoIsReady2=function(o,s){this.videoIsReady2[o]=s},n.prototype.getVideoIsReady=function(o){return this.videoIsReady2[o]||!1},n.prototype.setIsFirstAudioDecoded=function(o){},n.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},n.prototype.calcLossRate=function(o){var s=this;this.lossRateWindowStats.push(o),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,h=0,g=0,f=0,A=0,v=function(w){o[w].forEach(function(R,x){if(s.lossRateWindowStats[c-1][w][x]&&s.lossRateWindowStats[0][w][x]){var W=s.lossRateWindowStats[c-1][w][x].packets-s.lossRateWindowStats[0][w][x].packets,K=s.lossRateWindowStats[c-1][w][x].packetsLost-s.lossRateWindowStats[0][w][x].packetsLost;"videoSend"===w||"audioSend"===w?(h+=W,f+=K):(g+=W,A+=K),R.packetLostRate=Number.isNaN(W)||Number.isNaN(W)||W<=0||K<=0?0:K/(W+K)}})},E=0,S=["videoSend","audioSend","videoRecv","audioRecv"];E<S.length;E++)v(S[E]);o.sendPacketLossRate=h<=0||f<=0?0:f/(h+f),o.recvPacketLossRate=g<=0||A<=0?0:A/(g+A)},n}(),nW=function(n){function o(){var s=null!==n&&n.apply(this,arguments)||this;return s._stats=H1,s.lastDecodeVideoReceiverStats=new Map,s}return hV(o,n),o.prototype.updateStats=function(){return pV(this,void 0,void 0,function(){var s,c,h,g;return Q1(this,function(f){switch(f.label){case 0:return[4,this._getStats()];case 1:return s=f.sent(),c=this.statsResponsesToObjects(s),this._stats=Dp(H1),h=c.filter(function(A){return"ssrc"===A.type}),this.processSSRCStats(h),(g=c.find(function(A){return"VideoBwe"===A.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processBandwidthStats=function(s){this._stats.bitrate={actualEncoded:Number(s.googActualEncBitrate),targetEncoded:Number(s.googTargetEncBitrate),retransmit:Number(s.googRetransmitBitrate),transmit:Number(s.googTransmitBitrate)},this._stats.sendBandwidth=Number(s.googAvailableSendBandwidth)},o.prototype.processSSRCStats=function(s){var c=this;s.forEach(function(h){var g=h.id.includes("send");switch(h.mediaType+"_"+(g?"send":"recv")){case"video_send":var f=Dp(iL);f.codec=h.googCodecName,f.adaptionChangeReason="none",h.googCpuLimitedResolution&&(f.adaptionChangeReason="cpu"),h.googBandwidthLimitedResolution&&(f.adaptionChangeReason="bandwidth"),f.avgEncodeMs=Number(h.googAvgEncodeMs),f.inputFrame={width:Number(h.googFrameWidthInput)||Number(h.googFrameWidthSent),height:Number(h.googFrameHeightInput)||Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},f.sentFrame={width:Number(h.googFrameWidthSent),height:Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},f.firsCount=Number(h.googFirReceived),f.nacksCount=Number(h.googNacksReceived),f.plisCount=Number(h.googPlisReceived),f.frameCount=Number(h.framesEncoded),f.bytes=Number(h.bytesSent),f.packets=Number(h.packetsSent),f.packetsLost=Number(h.packetsLost),f.ssrc=Number(h.ssrc),f.rttMs=Number(h.googRtt||0),c._stats.videoSend.push(f),c._stats.rtt=f.rttMs;break;case"video_recv":var A=Dp(P6),v=c.lastDecodeVideoReceiverStats.get(Number(h.ssrc));if(A.codec=h.googCodecName,A.targetDelayMs=Number(h.googTargetDelayMs),A.renderDelayMs=Number(h.googRenderDelayMs),A.currentDelayMs=Number(h.googCurrentDelayMs),A.minPlayoutDelayMs=Number(h.googMinPlayoutDelayMs),A.decodeMs=Number(h.googDecodeMs),A.maxDecodeMs=Number(h.googMaxDecodeMs),A.receivedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateReceived)},A.decodedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateDecoded)},A.outputFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateOutput)},A.jitterBufferMs=Number(h.googJitterBufferMs),A.firsCount=Number(h.googFirsSent),A.nacksCount=Number(h.googNacksSent),A.plisCount=Number(h.googPlisSent),A.framesDecodeCount=Number(h.framesDecoded),A.bytes=Number(h.bytesReceived),A.packets=Number(h.packetsReceived),A.packetsLost=Number(h.packetsLost),A.ssrc=Number(h.ssrc),A.packets>0&&!c.isFirstVideoReceived[A.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(A.ssrc),c.isFirstVideoReceived[A.ssrc]=!0),A.framesDecodeCount>0&&!c.isFirstVideoDecoded[A.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(A.ssrc,A.decodedFrame.width,A.decodedFrame.height),c.isFirstVideoDecoded[A.ssrc]=!0),v){var E=v.stats,S=Date.now()-v.lts;A.framesDecodeFreezeTime=E.framesDecodeFreezeTime,A.framesDecodeInterval=E.framesDecodeInterval,A.framesDecodeCount>E.framesDecodeCount&&c.isFirstVideoDecoded?(v.lts=Date.now(),A.framesDecodeInterval=S,A.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(h.ssrc,10))?A.framesDecodeFreezeTime+=A.framesDecodeInterval:c.setVideoIsReady2(parseInt(h.ssrc,10),!0))):A.framesDecodeCount<v.stats.framesDecodeCount&&(A.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(A.ssrc,{stats:mS({},A),lts:Date.now()}),c._stats.videoRecv.push(A);break;case"audio_recv":var w=Dp(N6);w.codec=h.googCodecName,w.outputLevel=Math.abs(Number(h.audioOutputLevel))/32767,w.decodingCNG=Number(h.googDecodingCNG),w.decodingCTN=Number(h.googDecodingCTN),w.decodingCTSG=Number(h.googDecodingCTSG),w.decodingNormal=Number(h.googDecodingNormal),w.decodingPLC=Number(h.googDecodingPLC),w.decodingPLCCNG=Number(h.googDecodingPLCCNG),w.expandRate=Number(h.googExpandRate),w.accelerateRate=Number(h.googAccelerateRate),w.preemptiveExpandRate=Number(h.googPreemptiveExpandRate),w.secondaryDecodedRate=Number(h.googSecondaryDecodedRate),w.speechExpandRate=Number(h.googSpeechExpandRate),w.preferredJitterBufferMs=Number(h.googPreferredJitterBufferMs),w.jitterBufferMs=Number(h.googJitterBufferMs),w.jitterMs=Number(h.googJitterReceived),w.bytes=Number(h.bytesReceived),w.packets=Number(h.packetsReceived),w.packetsLost=Number(h.packetsLost),w.ssrc=Number(h.ssrc),w.receivedFrames=Number(h.googDecodingCTN)||Number(h.packetsReceived),w.droppedFrames=Number(h.googDecodingPLC)+Number(h.googDecodingPLCCNG)||Number(h.packetsLost),w.receivedFrames>0&&!c.isFirstAudioReceived[w.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(w.ssrc),c.isFirstAudioReceived[w.ssrc]=!0),w.decodingNormal>0&&!c.isFirstAudioDecoded[w.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(w.ssrc),c.isFirstAudioDecoded[w.ssrc]=!0),c._stats.audioRecv.push(w);break;case"audio_send":var R=Dp(mV);R.codec=h.googCodecName,R.inputLevel=Math.abs(Number(h.audioInputLevel))/32767,R.aecReturnLoss=Number(h.googEchoCancellationReturnLoss||0),R.aecReturnLossEnhancement=Number(h.googEchoCancellationReturnLossEnhancement||0),R.residualEchoLikelihood=Number(h.googResidualEchoLikelihood||0),R.residualEchoLikelihoodRecentMax=Number(h.googResidualEchoLikelihoodRecentMax||0),R.bytes=Number(h.bytesSent),R.packets=Number(h.packetsSent),R.packetsLost=Number(h.packetsLost),R.ssrc=Number(h.ssrc),R.rttMs=Number(h.googRtt||0),c._stats.rtt=R.rttMs,c._stats.audioSend.push(R)}})},o.prototype._getStats=function(){var s=this;return new Promise(function(c,h){s.pc.getStats(c,h)})},o.prototype.statsResponsesToObjects=function(s){var c=[];return s.result().forEach(function(h){var g={id:h.id,timestamp:h.timestamp.valueOf().toString(),type:h.type};h.names().forEach(function(f){g[f]=h.stat(f)}),c.push(g)}),c},o}(gV);!function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(Jl||(Jl={}));var Si,M6=function(n){function o(){var s=null!==n&&n.apply(this,arguments)||this;return s._stats=H1,s.lastDecodeVideoReceiverStats=new Map,s.lastVideoFramesRecv=new Map,s.lastVideoFramesSent=new Map,s.lastVideoFramesDecode=new Map,s.lastVideoJBDelay=new Map,s.lastAudioJBDelay=new Map,s.mediaBytesSent=new Map,s.mediaBytesRetransmit=new Map,s.mediaBytesTargetEncode=new Map,s.lastEncoderMs=new Map,s}return hV(o,n),o.prototype.updateStats=function(){return pV(this,void 0,void 0,function(){var s,c=this;return Q1(this,function(h){switch(h.label){case 0:return s=this,[4,this.pc.getStats()];case 1:return s.report=h.sent(),this._stats=Dp(H1),this.report.forEach(function(g){switch(g.type){case Jl.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case Jl.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case Jl.TRANSPORT:var f=c.report.get(g.selectedCandidatePairId);f&&c.processCandidatePairStats(f);break;case Jl.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processCandidatePairStats=function(s){if(this._stats.sendBandwidth=s.availableOutgoingBitrate||0,s.currentRoundTripTime&&(this._stats.rtt=1e3*s.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&s.currentRoundTripTime&&(g.rttMs=1e3*s.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&s.currentRoundTripTime&&(g.rttMs=1e3*s.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=s.id,s.localCandidateId){var c=this.report.get(s.localCandidateId);c&&this.processCandidateStats(c)}if(s.remoteCandidateId){var h=this.report.get(s.remoteCandidateId);h&&this.processCandidateStats(h)}},o.prototype.processCandidateStats=function(s){var c;s.type===Jl.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),s.type===Jl.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=s.type,c.id=s.id,s.address&&(c.address=s.address),s.candidateType&&(c.candidateType=s.candidateType),s.port&&(c.port=s.port),s.priority&&(c.priority=s.priority),s.protocol&&(c.protocol=s.protocol),s.relayProtocol&&(c.relayProtocol=s.relayProtocol),s.type===Jl.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(mS({},c),mS({},this.stats.selectedCandidatePair.localCandidate)),s.type===Jl.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(mS({},c),mS({},this.stats.selectedCandidatePair.remoteCandidate)))},o.prototype.processAudioInboundStats=function(s){var c=this._stats.audioRecv.find(function(h){return h.ssrc===s.ssrc});c||(c=Dp(N6),this._stats.audioRecv.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsReceived,c.packetsLost=s.packetsLost,c.bytes=s.bytesReceived,c.jitterMs=1e3*s.jitter,s.trackId&&this.processAudioTrackReceiverStats(s.trackId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),c.receivedFrames||(c.receivedFrames=s.packetsReceived),c.droppedFrames||(c.droppedFrames=s.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},o.prototype.processVideoInboundStats=function(s){var c=this._stats.videoRecv.find(function(w){return w.ssrc===s.ssrc});c||(c=Dp(P6),this._stats.videoRecv.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsReceived,c.packetsLost=s.packetsLost,c.bytes=s.bytesReceived,c.firsCount=s.firCount,c.nacksCount=s.nackCount,c.plisCount=s.pliCount,c.framesDecodeCount=s.framesDecoded;var h=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),f=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),h){var E=h.stats,S=f-h.lts;c.framesDecodeFreezeTime=E.framesDecodeFreezeTime,c.framesDecodeInterval=E.framesDecodeInterval,c.framesDecodeCount>E.framesDecodeCount&&this.isFirstVideoDecoded?(h.lts=Date.now(),c.framesDecodeInterval=S,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(s.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(s.ssrc,10),!0))):c.framesDecodeCount<E.framesDecodeCount&&(c.framesDecodeInterval=0),s.framesDecoded&&s.qpSum&&(c.qpSumPerFrame=h.stats.framesDecodeCount>s.framesDecoded?s.qpSum/s.framesDecoded:(s.qpSum-h.qpSum)/(s.framesDecoded-h.stats.framesDecodeCount))}g&&f-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((f-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:f,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:f,rate:0}),s.totalDecodeTime&&(c.decodeMs=1e3*s.totalDecodeTime),s.trackId&&this.processVideoTrackReceiverStats(s.trackId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.framerateMean&&(c.framesRateFirefox=s.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:mS({},c),lts:h?h.lts:Date.now(),qpSum:s.qpSum})},o.prototype.processVideoOutboundStats=function(s){var c=this._stats.videoSend.find(function(R){return R.ssrc===s.ssrc});c||(c=Dp(iL),this._stats.videoSend.push(c));var h,g=this.mediaBytesSent.get(s.ssrc);if(g?g.add(s.bytesSent):((A=new k6(10)).add(s.bytesSent),this.mediaBytesSent.set(s.ssrc,A)),void 0!==s.retransmittedBytesSent){var f=this.mediaBytesRetransmit.get(s.ssrc);f?f.add(s.retransmittedBytesSent):((A=new k6(10)).add(s.retransmittedBytesSent),this.mediaBytesRetransmit.set(s.ssrc,A))}if(s.totalEncodedBytesTarget){var A,v=this.mediaBytesTargetEncode.get(s.ssrc);v?v.add(s.totalEncodedBytesTarget):((A=new k6(10)).add(s.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(s.ssrc,A))}if(c.ssrc=s.ssrc,c.bytes=s.bytesSent,c.packets=s.packetsSent,c.firsCount=s.firCount,c.nacksCount=s.nackCount,c.plisCount=s.pliCount,c.frameCount=s.framesEncoded,c.adaptionChangeReason=s.qualityLimitationReason,s.totalEncodeTime&&s.framesEncoded&&(c.avgEncodeMs=!(h=this.lastEncoderMs.get(s.ssrc))||h.lastFrameCount>s.framesEncoded?1e3*s.totalEncodeTime/s.framesEncoded:1e3*(s.totalEncodeTime-h.lastEncoderTime)/(s.framesEncoded-h.lastFrameCount)),s.framesEncoded&&s.qpSum&&(c.qpSumPerFrame=!(h=this.lastEncoderMs.get(s.ssrc))||h.lastFrameCount>s.framesEncoded?s.qpSum/s.framesEncoded:(s.qpSum-h.lastQpSum)/(s.framesEncoded-h.lastFrameCount)),this.lastEncoderMs.set(s.ssrc,{lastFrameCount:s.framesEncoded,lastEncoderTime:s.totalEncodeTime,lastQpSum:s.qpSum,lts:Date.now()}),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.mediaSourceId&&this.processVideoMediaSource(s.mediaSourceId,c),s.trackId&&this.processVideoTrackSenderStats(s.trackId,c),s.remoteId)this.processRemoteInboundStats(s.remoteId,c);else{var w=this.findRemoteStatsId(s.ssrc,Jl.REMOTE_INBOUND);w&&this.processRemoteInboundStats(w,c)}},o.prototype.processAudioOutboundStats=function(s){var c=this._stats.audioSend.find(function(g){return g.ssrc===s.ssrc});if(c||(c=Dp(mV),this._stats.audioSend.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsSent,c.bytes=s.bytesSent,s.mediaSourceId&&this.processAudioMediaSource(s.mediaSourceId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.trackId&&this.processAudioTrackSenderStats(s.trackId,c),s.remoteId)this.processRemoteInboundStats(s.remoteId,c);else{var h=this.findRemoteStatsId(s.ssrc,Jl.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,c)}},o.prototype.findRemoteStatsId=function(s,c){var h=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===s});return h?h.id:null},o.prototype.processVideoMediaSource=function(s,c){var h=this.report.get(s);h&&h.width&&h.height&&h.framesPerSecond&&(c.inputFrame={width:h.width,height:h.height,frameRate:h.framesPerSecond})},o.prototype.processAudioMediaSource=function(s,c){var h=this.report.get(s);h&&(c.inputLevel=h.audioLevel)},o.prototype.processVideoTrackSenderStats=function(s,c){var h=this.report.get(s);if(h){var g=0,f=Date.now(),A=this.lastVideoFramesSent.get(c.ssrc);A&&f-A.lts>=800?(g=Math.round((h.framesSent-A.count)/((f-A.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:f,rate:g})):A?g=A.rate:this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:f,rate:0}),c.sentFrame={width:h.frameWidth,height:h.frameHeight,frameRate:g}}},o.prototype.processVideoTrackReceiverStats=function(s,c){var h=this.report.get(s);if(h){var g=this.lastVideoFramesRecv.get(c.ssrc),f=Date.now();c.framesReceivedCount=h.framesReceived;var A=0;if(g&&f-g.lts>=800?(A=Math.round((h.framesReceived-g.count)/((f-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:f,rate:A})):g?A=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:f,rate:0}),c.receivedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:A||0},c.decodedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},h.jitterBufferDelay&&h.jitterBufferEmittedCount){var v=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),v||(v={jitterBufferDelay:0,jitterBufferEmittedCount:0});var E=1e3*(h.jitterBufferDelay-v.jitterBufferDelay)/(h.jitterBufferEmittedCount-v.jitterBufferEmittedCount);c.jitterBufferMs=E,c.currentDelayMs=Math.round(E)}}},o.prototype.processAudioTrackSenderStats=function(s,c){var h=this.report.get(s);h&&(c.aecReturnLoss=h.echoReturnLoss||0,c.aecReturnLossEnhancement=h.echoReturnLossEnhancement||0)},o.prototype.processAudioTrackReceiverStats=function(s,c){var h=this.report.get(s);if(h){if(h.removedSamplesForAcceleration&&h.totalSamplesReceived&&(c.accelerateRate=h.removedSamplesForAcceleration/h.totalSamplesReceived),h.jitterBufferDelay&&h.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(h.jitterBufferDelay-g.jitterBufferDelay)/(h.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=h.audioLevel;var A=1920;h.totalSamplesDuration&&h.totalSamplesReceived&&(A=h.totalSamplesReceived/h.totalSamplesDuration/50,c.receivedFrames=Math.round(h.totalSamplesReceived/A)),h.concealedSamples&&(c.droppedFrames=Math.round(h.concealedSamples/A))}},o.prototype.processRemoteInboundStats=function(s,c){var h=this.report.get(s);h&&(c.packetsLost=h.packetsLost,h.roundTripTime&&(c.rttMs=1e3*h.roundTripTime))},o.prototype.getCodecFromCodecStats=function(s){var c=this.report.get(s);if(!c)return"";var h=c.mimeType.match(/\/(.*)$/);return h&&h[1]?h[1]:""},o.prototype.updateSendBitrate=function(){var s=0,c=null,h=null;this.mediaBytesSent.forEach(function(f){s+=f.diffMean()}),this.mediaBytesRetransmit.forEach(function(f){c=null===c?f.diffMean():c+f.diffMean()}),this.mediaBytesTargetEncode.forEach(function(f){h=null===h?f.diffMean():h+f.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?s-c:s)/(this.options.updateInterval/1e3),transmit:8*s/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==h&&(this._stats.bitrate.targetEncoded=8*h/(this.options.updateInterval/1e3))},o}(gV),rW=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return hV(o,n),o.prototype.updateStats=function(){return Promise.resolve()},o}(gV);function Ly(n,o,s,c){void 0===o&&(o=250),void 0===s&&(s=8),void 0===c&&(c=500);var h,g=(h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&h[0]?Number(h[0].split("/")[1]):null;return g?g<76?new nW(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):new M6(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):window.RTCStatsReport&&n.getStats()instanceof Promise?new M6(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):new rW(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c})}function oL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function sL(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?oL(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):oL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let aL=(tr((Si=class s7 extends Q4{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(o,s){super(o,s),X(this,"store",void 0),X(this,"peerConnection",void 0),X(this,"remoteSDP",void 0),X(this,"initialOffer",void 0),X(this,"statsFilter",void 0),X(this,"useRTX",!1),X(this,"localCapabilities",void 0),X(this,"localCandidateCount",0),X(this,"allCandidatesReceived",!1),X(this,"mutex",new Nu("P2PConnection-mutex")),this.store=s,this.peerConnection=new RTCPeerConnection(s7.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=Ly(this.peerConnection,void 0,void 0,ps()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return V(function*(){try{const s=yield o.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=V1(s.sdp),h=lV(s.sdp,!o.useRTX,!1,["opus"]);return o.localCapabilities=h,o.initialOffer=s,sL(sL({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:h},offerSDP:s.sdp})}catch(s){throw new F(P.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}})()}connect(o,s,c,h,g,f){var A=this;return V(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new eW({remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h.send,remoteSetup:g,localCapabilities:A.localCapabilities,sdkCodec:A.store.codec,cname:f});const v=A.remoteSDP.toString();yield A.peerConnection.setLocalDescription(A.initialOffer),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}})()}send(o,s){var c=this;return Rk(function*(){const h=yield vs(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=o.map(R=>c.peerConnection.addTrack(R._mediaStreamTrack)),f=yield vs(c.peerConnection.createOffer()),A=Pd.exports.parse(f.sdp),v=o.map(R=>{const x=R._mediaStreamTrack,W=A.mediaDescriptions.find(K=>K.attributes.mid===x.kind);if(!W)throw new Error("Cannot extract ssrc from mediaDescription.");return function(K,ne,le){const me=K.attributes.ssrcs.filter(ke=>ke.attributes.label===ne),be=K.attributes.ssrcGroups;if(0===me.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(be&&me.length>1){const ke=be.find(Ze=>-1!==Ze.ssrcIds.indexOf(me[0].ssrcId));return ke?[{ssrcId:ke.ssrcIds[0],rtx:le?ke.ssrcIds[1]:void 0}]:[{ssrcId:me[0].ssrcId}]}return[{ssrcId:me[0].ssrcId}]}(W,x.id,c.useRTX)});let E;try{E=yield v}catch(R){throw g.forEach(x=>{Bl()&&x.replaceTrack(null),c.peerConnection.removeTrack(x)}),R}const S=c.mungSendOfferSDP(f.sdp,o);c.remoteSDP.receive(o,s,E);const w=c.remoteSDP.toString();return yield vs(c.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield vs(c.applySendEncodings(g,o)),yield vs(c.peerConnection.setRemoteDescription({type:"answer",sdp:w})),o.map((R,x)=>({localSSRC:v[x],id:R._mediaStreamTrack.id}))}catch(g){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{h()}})()}stopSending(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=s.peerConnection.getSenders().filter(f=>{var A;return-1!==o.indexOf((null===(A=f.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(f=>{Bl()&&f.replaceTrack(null),s.peerConnection.removeTrack(f)});const h=yield s.peerConnection.createOffer();yield s.peerConnection.setLocalDescription(h),s.remoteSDP.stopReceiving(o);const g=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(o,s,c,h){var g=this;return V(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{id:f,mslabel:A}=g.remoteSDP.send(o,s,h),v=new jt((w,R)=>{const x=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(f)))},1e4),W=K=>{const ne=Ri();if(("Safari"===ne.name&&11===Number(ne.version)||Dc())&&K.track.id!==f&&K.streams[0].id===A){var le;const me=K.streams[0].getTracks()[0];return null===(le=g.remoteSDP)||void 0===le||le.updateTrackLabel(o,f,K.track.id),g.peerConnection.removeEventListener("track",W),clearTimeout(x),void w(me)}if(K.track.id===f)return g.peerConnection.removeEventListener("track",W),clearTimeout(x),void w(K.track)};g.peerConnection.addEventListener("track",W)}),E=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:E});const S=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(S),{track:yield v,id:f}}catch(f){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(f.toString()))}})()}stopReceiving(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");s.remoteSDP.stopSending(o);const c=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const h=yield s.peerConnection.createAnswer();yield s.peerConnection.setLocalDescription(h)}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){return V(function*(){})()}unmuteRemote(o){return V(function*(){})()}muteLocal(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=s.peerConnection.getSenders().filter(h=>{var g;return-1!==o.indexOf((null===(g=h.track)||void 0===g?void 0:g.id)||"")});if(c.length!==o.length)throw new Error("sender' length doesn't match mids' length.");c.map(h=>{if(Bl()&&h.track)h.track.enabled=!1;else{const g=h.getParameters();g.encodings.forEach(f=>f.active=!1),h.setParameters(g)}})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=s.peerConnection.getSenders().filter(f=>{var A;return-1!==o.indexOf((null===(A=f.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var f=V(function*(A){if(Bl()&&A.track)A.track.enabled=!0;else{const v=A.getParameters();v.encodings.forEach(E=>E.active=!0),yield A.setParameters(v)}});return function(A){return f.apply(this,arguments)}}());const h=yield s.peerConnection.createOffer();yield s.peerConnection.setLocalDescription(h);const g=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return V(function*(){const s=yield o.peerConnection.createOffer({iceRestart:!0});if(!s.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:V1(s.sdp).iceParameters,restartICE:(c=V(function*(h,g){return o.restartICE(s,h,g)}),function(g,f){return c.apply(this,arguments)}),restartOfferSDP:s.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,s){var c=this;return V(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[s]);c.remoteSDP.updateRecvMedia(s._mediaStreamTrack.kind,s);const f=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(h){throw new F(P.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(o,s){var c=this;return V(function*(){const h=c.peerConnection.getSenders().filter(g=>{var f;return(null===(f=g.track)||void 0===f?void 0:f.id)===o});1===h.length&&(yield c.applySendEncodings(h,[s]))})()}setStatsRemoteVideoIsReady(o,s){this.statsFilter.setVideoIsReady2(o,s)}replaceTrack(o,s){var c=this;return V(function*(){const h=c.peerConnection.getSenders().find(g=>{var f;return(null===(f=g.track)||void 0===f?void 0:f.id)===s});h&&(yield h.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,s,c){var h=this;return V(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(s,c);const g=h.remoteSDP.toString();yield h.peerConnection.setLocalDescription(o),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Q.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Q.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},mt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const s={iceServers:[],sdpSemantics:"plan-b"};return o.iceServers?s.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(HF(o.turnServer.servers)?s.iceServers=o.turnServer.servers:(s.iceServers&&s.iceServers.push(...s7.turnServerConfigToIceServers(o.turnServer.servers)),mt("USE_TURN_SERVER_OF_GATEWAY")&&s.iceServers&&o.turnServer.serversFromGateway&&s.iceServers.push(...s7.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(s.iceTransportPolicy="relay")}))),s}static turnServerConfigToIceServers(o){const s=[];return o.forEach(c=>{c.security?c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),s}applySendEncodings(o,s){return V(function*(){try{if(!Zc().supportSetRtpSenderParameters||o.length!==s.length)return;for(let h=0;h<o.length;h++){var c;const g=o[h],f=s[h];if(!f)continue;const A={},v={};if(f instanceof qs)switch(f._optimizationMode){case"motion":A.degradationPreference="maintain-framerate";break;case"detail":A.degradationPreference="maintain-resolution";break;default:A.degradationPreference="balanced"}if(mt("DSCP_TYPE")&&Xm()){const w=mt("DSCP_TYPE");["very-low","low","medium","high"].includes(w)&&(v.networkPriority=w)}const E=g.getParameters(),S=null===(c=E.encodings)||void 0===c?void 0:c[0];S&&Object.assign(S,v),Object.assign(E,A),yield g.setParameters(E)}}catch{Q.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,s){const c=Pd.exports.parse(o);return s.forEach((h,g)=>{const f=h._mediaStreamTrack,A=c.mediaDescriptions.find(v=>v.attributes.mid===f.kind);A&&rL(A,h)}),Pd.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var s;null===(s=this.onFirstAudioReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var s;null===(s=this.onFirstVideoReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var s;null===(s=this.onFirstAudioDecoded)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,s,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,o,s,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,s)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=s.remoteSDP.batchSend(o).map((f,A)=>{let{id:v,mslabel:E}=f;const{kind:S}=o[A];return new jt((w,R)=>{const x=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(v)))},1e4),W=K=>{const ne=Ri();if("Safari"===ne.name&&11===Number(ne.version)&&K.track.id!==v&&K.streams[0].id===E){var le;const me=K.streams[0].getTracks()[0];return null===(le=s.remoteSDP)||void 0===le||le.updateTrackLabel(S,v,K.track.id),s.peerConnection.removeEventListener("track",W),clearTimeout(x),void w({track:me,id:v})}if(K.track.id===v)return s.peerConnection.removeEventListener("track",W),clearTimeout(x),void w({track:K.track,id:v})};s.peerConnection.addEventListener("track",W)})}),h=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"offer",sdp:h});const g=yield s.peerConnection.createAnswer();return yield s.peerConnection.setLocalDescription(g),yield jt.all(c)}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"connect"),Si.prototype),tr(Si.prototype,"stopSending",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"stopSending"),Si.prototype),tr(Si.prototype,"receive",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"receive"),Si.prototype),tr(Si.prototype,"stopReceiving",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"stopReceiving"),Si.prototype),tr(Si.prototype,"muteRemote",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"muteRemote"),Si.prototype),tr(Si.prototype,"unmuteRemote",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"unmuteRemote"),Si.prototype),tr(Si.prototype,"muteLocal",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"muteLocal"),Si.prototype),tr(Si.prototype,"unmuteLocal",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"unmuteLocal"),Si.prototype),tr(Si.prototype,"reEstablish",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"reEstablish"),Si.prototype),tr(Si.prototype,"close",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"close"),Si.prototype),tr(Si.prototype,"updateEncoderConfig",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"updateEncoderConfig"),Si.prototype),tr(Si.prototype,"updateSendParameters",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"updateSendParameters"),Si.prototype),tr(Si.prototype,"replaceTrack",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"replaceTrack"),Si.prototype),tr(Si.prototype,"restartICE",[Md],Object.getOwnPropertyDescriptor(Si.prototype,"restartICE"),Si.prototype),Si);function Md(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=V(function*(){const h=this.mutex,g=yield h.lock("Locking from P2PConnection.".concat(o));try{for(var f=arguments.length,A=new Array(f),v=0;v<f;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{g()}}),s}var x6;let iW=no("RemoteSDP")(x6=class{get localCapabilities(){return fc(this._localCapabilities)}get rtpCapabilities(){return fc(this._rtpCapabilities)}get candidates(){return fc(this._candidates)}get iceParameters(){return fc(this._iceParameters)}get dtlsParameters(){return fc(this._dtlsParameters)}constructor(n){X(this,"sessionDesc",void 0),X(this,"_localCapabilities",void 0),X(this,"_rtpCapabilities",void 0),X(this,"_candidates",void 0),X(this,"_iceParameters",void 0),X(this,"_dtlsParameters",void 0),X(this,"setup",void 0),X(this,"currentMidIndex",void 0),X(this,"cname",void 0),X(this,"firefoxSsrcMidMap",new Map),n=fc(n);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:f,cname:A}=n,v=Pd.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=h,this._candidates=c,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=f,this.setup=g,this.cname=A;const E=this.rtpCapabilities.send;for(const S of v.mediaDescriptions){if(S.attributes.iceUfrag=o.iceUfrag,S.attributes.icePwd=o.icePwd,S.attributes.fingerprints=s.fingerprints,S.attributes.candidates=c,S.attributes.setup=g,"video"===S.media.mediaType&&(S.media.fmts=E.videoCodecs.map(w=>w.payloadType.toString(10)),S.attributes.payloads=E.videoCodecs,S.attributes.extmaps=E.videoExtensions,mt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:w,ssrcGroups:R}=j1([{ssrcId:4e4,rtx:mt("USE_RTX")?40001:void 0}],this.cname);S.attributes.ssrcs=w,S.attributes.ssrcGroups=R}if("audio"===S.media.mediaType&&(S.media.fmts=E.audioCodecs.map(w=>w.payloadType.toString(10)),S.attributes.payloads=E.audioCodecs,S.attributes.extmaps=E.audioExtensions,mt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:w,ssrcGroups:R}=j1([{ssrcId:2e4}],this.cname);S.attributes.ssrcs=w,S.attributes.ssrcGroups=R}}this.sessionDesc=v,this.currentMidIndex=v.mediaDescriptions.length-1}preloadRemoteMedia(){const n=mt("PRELOAD_MEDIA_COUNT");wt("debug",this,"preloadRemoteMedia",n);const o=this.candidates,s=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<n;g++){const f=2*g+2e4,A=2*g+4e4,{ssrcs:v,ssrcGroups:E}=j1([{ssrcId:f}],this.cname),{ssrcs:S,ssrcGroups:w}=j1([{ssrcId:A,rtx:mt("USE_RTX")?A+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:S,ssrcGroups:w,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:v,ssrcGroups:E,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Pd.exports.print(this.sessionDesc)}send(n,o,s,c){const{ssrcs:h,ssrcGroups:g}=j1(o,this.cname,s),f=this.findPreloadMediaDesc(h);if(f){if(ps()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,f.attributes.mid),c&&(c.tcc||c.remb)){const A=this.sessionDesc.mediaDescriptions.indexOf(f);return this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(f,c),{mid:f.attributes.mid,needExchangeSDP:!0}}return{mid:f.attributes.mid,needExchangeSDP:!1}}{const A=this.findAvailableMediaIndex(n,h);if(Bl()||Kw()){if(-1!==A&&1!==A){const v=fc(this.sessionDesc.mediaDescriptions[A]);return v.attributes.direction="sendonly",v.attributes.ssrcs=h,v.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(v,c),{mid:v.attributes.mid,needExchangeSDP:!0}}{const v=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),{mid:v.attributes.mid,needExchangeSDP:!0}}}if(-1!==A){const v=fc(this.sessionDesc.mediaDescriptions[A]);return v.attributes.direction="sendonly",v.attributes.ssrcs=h,v.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(v,c),ps()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),{mid:v.attributes.mid,needExchangeSDP:!0}}{const v=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),ps()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),{mid:v.attributes.mid,needExchangeSDP:!0}}}}batchSend(n){const o=n.map(h=>{let{kind:g,ssrcMsg:f,mslabel:A}=h;return this.send(g,f,A)}),s=[];let c=!1;return o.forEach(h=>{let{mid:g,needExchangeSDP:f}=h;f&&(c=!0),s.push(g)}),{mids:s,needExchangeSDP:c}}stopSending(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&-1!==n.indexOf(s.attributes.mid));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{"0"===s.attributes.mid||ps()||Bl()||Kw()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(n){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(n){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>n.includes(s.attributes.mid||""));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>n.includes(s.attributes.mid||""));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(n,o,s,c){n.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,c[g])}),this.updateBundleMids()}stopReceiving(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>-1!==n.indexOf(s.attributes.mid));if(o.length!==n.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(n,o){n=fc(n),o=fc(o),this._iceParameters=n,this._candidates=o,this.sessionDesc.mediaDescriptions.forEach(s=>{s.attributes.iceUfrag=n.iceUfrag,s.attributes.icePwd=n.icePwd,s.attributes.candidates=this.candidates})}predictReceivingMids(n){const o=[];for(let s=0;s<n;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(n,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const c=s.media.mediaType===n&&"0"!==s.media.port&&("sendonly"===s.attributes.direction||"sendrecv"===s.attributes.direction)&&0===s.attributes.ssrcs.length;if(ps()){if(c){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||"0"!==s.attributes.mid&&"1"!==s.attributes.mid)||!(!h||h!==s.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(n,o,s,c,h,g){const f=n._mediaStreamTrack.kind,A=this.rtpCapabilities.recv,v=this.localCapabilities.send;let E=[];if(f===ti.VIDEO){var S,w;if(mt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(E=A.videoCodecs.filter(ne=>{var le,me;return((null===(le=ne.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes(c)&&(null==ne||null===(me=ne.fmtp)||void 0===me?void 0:me.parameters["profile-level-id"])===mt("H264_PROFILE_LEVEL_ID")})),!E||0===(null===(S=E)||void 0===S?void 0:S.length)){const ne=v.videoCodecs.filter(le=>{var me;return((null===(me=le.rtpMap)||void 0===me?void 0:me.encodingName.toLowerCase())||"").includes(c)});0!==ne.length&&(E=A.videoCodecs.filter(le=>ne.some(me=>me.payloadType===le.payloadType)))}if(mt("USE_RTX")){const ne=E.map(me=>me.payloadType.toString()),le=A.videoCodecs.filter(me=>{var be,ke;return"rtx"===(null===(be=me.rtpMap)||void 0===be?void 0:be.encodingName)&&ne.includes((null===(ke=me.fmtp)||void 0===ke?void 0:ke.parameters.apt)||"")});E=[...E,...le]}0===E.length&&(Q.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(w=A.videoCodecs[0].rtpMap)||void 0===w?void 0:w.encodingName)),E=A.videoCodecs)}else E=A.audioCodecs.filter(ne=>{var le;return((null===(le=ne.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes(h)}),0===E.length&&(Q.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),E=A.audioCodecs.filter(ne=>{var le;return((null===(le=ne.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes("opus")}));const R=f===ti.VIDEO?A.videoExtensions:A.audioExtensions;this.currentMidIndex+=1;const x="".concat(this.currentMidIndex);let W={media:{mediaType:f,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:E.map(ne=>ne.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:R,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:E,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(x)}};W=this.mungRecvMediaDsec(W,n,g);const K=this.findFirstClosedMedia(f);if(K){const ne=this.sessionDesc.mediaDescriptions.indexOf(K);this.sessionDesc.mediaDescriptions[ne]=W}else this.sessionDesc.mediaDescriptions.push(W);return W}createOrRecycleSendMedia(n,o,s,c,h){const g=this.rtpCapabilities.send,f=n===ti.VIDEO?g.videoCodecs:g.audioCodecs,A=n===ti.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const v="".concat(this.currentMidIndex);let E={media:{mediaType:n,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:f.map(w=>w.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:A,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:f,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(v)}};E=this.mungSendMediaDesc(E,h);const S=this.findFirstClosedMedia(n);if(S){const w=this.sessionDesc.mediaDescriptions.indexOf(S);this.sessionDesc.mediaDescriptions[w]=E}else this.sessionDesc.mediaDescriptions.push(E);return E}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(n=>"0"!==n.media.port).map(n=>n.attributes.mid)}mungRecvMediaDsec(n,o,s){const c=fc(n);return Nd(c),rL(c,o),dV(c,o),function(h){if("video"!==h.media.mediaType)return;const g=Ri();if(g.name!==Ai.SAFARI&&g.os!==zs.IOS)return;const f=h.attributes.extmaps.findIndex(A=>/video-orientation/g.test(A.extensionName));-1!==f&&h.attributes.extmaps.splice(f,1)}(c),Nk(c,s,this.localCapabilities.send),c}mungSendMediaDesc(n,o){const s=fc(n);return Nk(s,o,this.localCapabilities.recv),s}updateRecvMedia(n,o){const s=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===n);if(-1!==s){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=c}}bumpMid(n){this.currentMidIndex+=n}findFirstClosedMedia(n){return this.sessionDesc.mediaDescriptions.find(o=>ps()?"0"===o.media.port&&o.media.mediaType===n:"0"===o.media.port)}findPreloadMediaDesc(n){return this.sessionDesc.mediaDescriptions.find(o=>{var s,c;return(null===(s=o.attributes)||void 0===s||null===(c=s.ssrcs[0])||void 0===c?void 0:c.ssrcId)===n[0].ssrcId})}getSSRC(n){var o;return null===(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n))||void 0===o?void 0:o.attributes.ssrcs}})||x6;var uL,Ci;function xk(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function lL(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?xk(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):xk(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let dL=no("P2PConnection","store.p2pId")((tr((Ci=class a7 extends Q4{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(o,s){super(o,s),X(this,"store",void 0),X(this,"peerConnection",void 0),X(this,"remoteSDP",void 0),X(this,"initialOffer",void 0),X(this,"transportEventReceiver",void 0),X(this,"statsFilter",void 0),X(this,"useRTX",mt("USE_RTX")),X(this,"localCapabilities",void 0),X(this,"localCandidateCount",0),X(this,"allCandidatesReceived",!1),X(this,"mutex",new Nu("P2PConnection-mutex")),this.store=s,this.peerConnection=new RTCPeerConnection(a7.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=Ly(this.peerConnection,void 0,void 0,ps()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return V(function*(){try{o.peerConnection.addTransceiver("video",{direction:"recvonly"}),o.peerConnection.addTransceiver("audio",{direction:"recvonly"});const s=yield o.peerConnection.createOffer();if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=V1(s.sdp),h=yield(g=V(function*(f,A,v,E){const S=new RTCPeerConnection;S.addTransceiver("video",{direction:"sendonly"}),S.addTransceiver("audio",{direction:"sendonly"}),S.addTransceiver("video",{direction:"recvonly"}),S.addTransceiver("audio",{direction:"recvonly"});const w=(yield S.createOffer()).sdp,R=lV(w,f,A,v,E,"sendonly"),x=lV(w,f,A,v,E,"recvonly"),W={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},K={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},ne={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(fS(R,x,"videoExtensions",W,K,ne),fS(R,x,"videoCodecs",W,K,ne),fS(R,x,"audioExtensions",W,K,ne),fS(R,x,"audioCodecs",W,K,ne),mt("RAISE_H264_BASELINE_PRIORITY")){const le=ne.videoCodecs.findIndex(me=>{var be,ke;return"h264"===(null===(be=me.rtpMap)||void 0===be?void 0:be.encodingName.toLocaleLowerCase())&&"42001f"===(null===(ke=me.fmtp)||void 0===ke?void 0:ke.parameters["profile-level-id"])});if(-1!==le){const me=ne.videoCodecs.findIndex(be=>{var ke;return"h264"===(null===(ke=be.rtpMap)||void 0===ke?void 0:ke.encodingName.toLocaleLowerCase())});if(me<le){Q.debug("raising H264 baseline profile priority");const be=ne.videoCodecs[le];ne.videoCodecs.splice(le,1),ne.videoCodecs.splice(me,0,be)}-1!==me&&(K.videoCodecs=K.videoCodecs.filter(be=>{var ke,Ze;return!("h264"===(null===(ke=be.rtpMap)||void 0===ke?void 0:ke.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Ze=be.fmtp)||void 0===Ze?void 0:Ze.parameters["profile-level-id"]))})),-1!==me&&mt("FILTER_SEND_H264_BASELINE")&&(W.videoCodecs=W.videoCodecs.filter(be=>{var ke,Ze;return!("h264"===(null===(ke=be.rtpMap)||void 0===ke?void 0:ke.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(Ze=be.fmtp)||void 0===Ze?void 0:Ze.parameters["profile-level-id"]))}))}}try{S.close()}catch{}return{send:W,recv:K,sendrecv:ne}}),function(f,A,v,E){return g.apply(this,arguments)})(!o.useRTX,!1);return o.localCapabilities=D6(h),o.initialOffer=s,lL(lL({},c),{},{rtpCapabilities:h,offerSDP:s.sdp})}catch(s){throw new F(P.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}var g})()}connect(o,s,c,h,g,f){var A=this;return V(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new iW({remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:A.localCapabilities,cname:f});const v=A.remoteSDP.toString(),E=A.logSDPExchange(A.initialOffer.sdp||"","offer","local","connect");yield A.peerConnection.setLocalDescription(A.initialOffer),E?.(v),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:v});const S=A.peerConnection.getTransceivers()[0];if(null!=S&&S.receiver&&A.tryBindTransportEvents(S.receiver),mt("PRELOAD_MEDIA_COUNT")>0){A.remoteSDP.preloadRemoteMedia();const w=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:w});const R=yield A.peerConnection.createAnswer();yield A.peerConnection.setLocalDescription(R)}}catch(v){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}})()}send(o,s,c){var h=this;return Rk(function*(){const g=yield vs(h.mutex.lock());try{if(!h.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const f=[];o.forEach(K=>{const ne=h.peerConnection.addTransceiver(K._mediaStreamTrack,{direction:"sendonly"});f.push(ne)}),ps()&&!0===mt("SIMULCAST")&&(qe("debug",h,"apply simulcast for firefox"),yield vs(h.applySimulcastForFirefox(f,o)));const A=yield vs(h.peerConnection.createOffer()),v=h.remoteSDP.predictReceivingMids(o.length),E=h.mungSendOfferSDP(A.sdp,o,v),S=Pd.exports.parse(E),w=v.map(K=>{const ne=S.mediaDescriptions.find(le=>le.attributes.mid===K);if(!ne)throw new Error("Cannot extract ssrc from mediaDescription.");return function(le,me){const be=[],ke=le.attributes.ssrcGroups.filter(Vt=>"FID"===Vt.semantic),Ze=le.attributes.ssrcGroups.find(Vt=>"SIM"===Vt.semantic),Nt=le.attributes.ssrcs;if(Ze)Ze.ssrcIds.forEach(Vt=>{var kt;const Sn=null===(kt=ke.find(ln=>ln.ssrcIds[0]===Vt))||void 0===kt?void 0:kt.ssrcIds[1];be.push({ssrcId:Vt,rtx:me?Sn:void 0})});else if(ke.length>0){const kt=ke[0].ssrcIds[1];be.push({ssrcId:ke[0].ssrcIds[0],rtx:me?kt:void 0})}else{if(0===Nt.length)throw new Error("No ssrcs found on local media description.");be.push({ssrcId:Nt[0].ssrcId})}return be}(ne,h.useRTX)});let R;try{R=yield w}catch(K){R=[],h.remoteSDP.receive(o,s,c,R);const ne=h.remoteSDP.toString();throw yield vs(h.peerConnection.setLocalDescription({type:"offer",sdp:E})),yield vs(h.peerConnection.setRemoteDescription({type:"answer",sdp:ne})),yield vs(h.stopSending(v,!0)),K}h.remoteSDP.receive(o,s,c,R);const x=h.remoteSDP.toString(),W=h.logSDPExchange(E,"offer","local","send");return yield vs(h.peerConnection.setLocalDescription({type:"offer",sdp:E})),yield vs(h.applySimulcastEncodings(f,o)),yield vs(h.applySendEncodings(f,o)),W?.(x),yield vs(h.peerConnection.setRemoteDescription({type:"answer",sdp:x})),f.map((K,ne)=>({localSSRC:w[ne],id:v[ne],transceiver:K}))}catch(f){throw f instanceof F?f:new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(f.toString()))}finally{g()}})()}stopSending(o,s){var c=this;return V(function*(){const h=s?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(E=>-1!==o.indexOf(E.mid));if(g.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(E=>{var S;E.direction="inactive",null===(S=E.stop)||void 0===S||S.call(E)});const f=yield c.peerConnection.createOffer(),A=c.logSDPExchange(f.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(f),c.remoteSDP.stopReceiving(o);const v=c.remoteSDP.toString();A?.(v),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(g){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(o,s,c,h){var g=this;return V(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{mid:f,needExchangeSDP:A}=g.remoteSDP.send(o,s,c,h);if(A){const E=g.remoteSDP.toString(),S=g.logSDPExchange(E,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:E});const w=yield g.peerConnection.createAnswer();S?.(w.sdp||""),yield g.peerConnection.setLocalDescription(w),Q.debug("[P2PConnection] receive ".concat(o," by exchanging SDP."))}else Q.debug("[P2PConnection] receive ".concat(o," no need to exchange SDP."));const v=g.peerConnection.getTransceivers().find(E=>E.mid===f);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:f}}catch(f){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(f.toString()))}})()}batchReceive(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=s.remoteSDP.batchSend(o);if(h){const g=s.remoteSDP.toString(),f=s.logSDPExchange(g,"offer","remote","receive");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:g});const A=yield s.peerConnection.createAnswer();f?.(A.sdp||""),yield s.peerConnection.setLocalDescription(A),Q.debug("[P2PConnection] batchReceive by exchanging SDP.")}else Q.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const f=s.peerConnection.getTransceivers().find(A=>A.mid===g);if(!f)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:f.receiver.track,id:g}})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");s.remoteSDP.stopSending(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","stopReceiving");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(o," before remote SDP created."));s.remoteSDP.mute(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","muteRemote");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(o," before remote SDP created."));s.remoteSDP.unmute(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","unmuteRemote");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=s.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(A=>{A.direction="inactive"});const h=yield s.peerConnection.createOffer(),g=s.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield s.peerConnection.setLocalDescription(h),s.remoteSDP.muteRemote(o);const f=s.remoteSDP.toString();g?.(f),yield s.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var s=this;return V(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=s.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var A=V(function*(v,E){v.direction="sendonly"});return function(v,E){return A.apply(this,arguments)}}());const h=yield s.peerConnection.createOffer(),g=s.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield s.peerConnection.setLocalDescription(h),s.remoteSDP.unmuteRemote(o);const f=s.remoteSDP.toString();g?.(f),yield s.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(c){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return V(function*(){const s=yield o.peerConnection.createOffer({iceRestart:!0});if(!s.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:V1(s.sdp).iceParameters,restartICE:(c=V(function*(h,g){return o.restartICE(s,h,g)}),function(g,f){return c.apply(this,arguments)}),restartOfferSDP:s.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,s){var c=this;return V(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[s],[o]);c.remoteSDP.updateRecvMedia(o,s);const f=c.remoteSDP.toString(),A=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),A?.(f),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(h){throw new F(P.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(o,s){var c=this;return V(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===o);1===h.length&&(c.isVP8Simulcast(s)?ps()||(yield c.applySimulcastEncodings(h,[s])):yield c.applySendEncodings(h,[s]))})()}setStatsRemoteVideoIsReady(o,s){this.statsFilter.setVideoIsReady2(o,s)}replaceTrack(o,s){var c=this;return V(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===s);h&&(yield h.sender.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,s,c){var h=this;return V(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(s,c);const g=h.remoteSDP.toString(),f=h.logSDPExchange(o.sdp||"","offer","local","restartICE");yield h.peerConnection.setLocalDescription(o),f?.(g),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new F(P.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Q.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Q.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},mt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const s={iceServers:[]};return o.iceServers?s.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(HF(o.turnServer.servers)?s.iceServers=o.turnServer.servers:(s.iceServers&&s.iceServers.push(...a7.turnServerConfigToIceServers(o.turnServer.servers)),mt("USE_TURN_SERVER_OF_GATEWAY")&&s.iceServers&&o.turnServer.serversFromGateway&&s.iceServers.push(...a7.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(s.iceTransportPolicy="relay")}))),s}static turnServerConfigToIceServers(o){const s=[];return o.forEach(c=>{c.security?c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(dx(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),s}tryBindTransportEvents(o){o.transport&&(this.transportEventReceiver=o,o.transport.onstatechange=()=>{var s,c;null!==(s=o.transport)&&void 0!==s&&s.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,o.transport.state))},o.transport.onerror=s=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,s.error)},o.transport.iceTransport&&(o.transport.iceTransport.onstatechange=()=>{var s,c,h;null!==(s=o.transport)&&void 0!==s&&s.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(h=o.transport)||void 0===h?void 0:h.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(o,s){var c=this;return V(function*(){try{if(!Zc().supportSetRtpSenderParameters||o.length!==s.length)return;for(let S=0;S<o.length;S++){const w=o[S],R=s[S];if(R&&R instanceof qs){var h,g;if(c.isVP8Simulcast(R))continue;const x={},W={};switch(R._optimizationMode){case"motion":x.degradationPreference="maintain-framerate";break;case"detail":x.degradationPreference="maintain-resolution";break;default:x.degradationPreference="balanced"}var f,A,v,E;if(null!==(h=R._encoderConfig)&&void 0!==h&&h.bitrateMax&&(W.maxBitrate=1e3*(null===(f=R._encoderConfig)||void 0===f?void 0:f.bitrateMax)),R._hints.includes(Xc.LOW_STREAM)&&(null!==(A=R._encoderConfig)&&void 0!==A&&A.frameRate&&(W.maxFramerate=wy(R._encoderConfig.frameRate)),null!==(v=R._encoderConfig)&&void 0!==v&&v.scaleResolutionDownBy&&(null===(E=R._encoderConfig)||void 0===E?void 0:E.scaleResolutionDownBy)>1&&(W.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),mt("DSCP_TYPE")&&Xm()){const le=mt("DSCP_TYPE");["very-low","low","medium","high"].includes(le)&&(W.networkPriority=le)}const K=w.sender.getParameters(),ne=null===(g=K.encodings)||void 0===g?void 0:g[0];ps()&&!ne&&(x.encodings=[W]),ne&&Object.assign(ne,W),Object.assign(K,x),yield w.sender.setParameters(K)}}}catch{Q.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,s,c){const h=Pd.exports.parse(o);return s.forEach((g,f)=>{const A=c[f],v=h.mediaDescriptions.find(E=>E.attributes.mid===A);v&&(rL(v,g),function(E,S,w){if(ps()||"video"!==E.media.mediaType||!(S instanceof qs)||"vp9"!==w&&"vp8"!==w||"vp8"===w&&!mt("SIMULCAST")||void 0===S._scalabiltyMode||S._scalabiltyMode.numSpatialLayers<=1)return;const R="vp8"===w?2:S._scalabiltyMode.numSpatialLayers,x=E.attributes.ssrcs[0],W=E.attributes.ssrcGroups.find(ne=>"FID"===ne.semantic&&ne.ssrcIds[0]===x.ssrcId),K={semantic:"SIM",ssrcIds:[x.ssrcId]};for(let ne=1;ne<R;ne++)E.attributes.ssrcs.push({ssrcId:x.ssrcId+ne,attributes:fc(x.attributes)}),K.ssrcIds.push(x.ssrcId+ne),W&&(E.attributes.ssrcs.push({ssrcId:W.ssrcIds[1]+ne,attributes:fc(x.attributes)}),E.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[x.ssrcId+ne,W.ssrcIds[1]+ne]}));E.attributes.ssrcGroups.unshift(K)}(v,g,this.store.codec))}),Pd.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var s;null===(s=this.onFirstAudioReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var s;null===(s=this.onFirstVideoReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var s;null===(s=this.onFirstAudioDecoded)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,s,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,o,s,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,s)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(o,s){var c=this;return V(function*(){if(o.length===s.length)for(let v=0;v<o.length;v++){var h,g,f,A;const E=o[v],S=s[v];if(S instanceof qs&&!S._hints.includes(Xc.LOW_STREAM)&&null!==(h=S._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=S._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(f=S._scalabiltyMode)&&void 0!==f&&f.numSpatialLayers&&(null===(A=S._scalabiltyMode)||void 0===A?void 0:A.numSpatialLayers)>1&&"vp8"===c.store.codec){const w={},R={high:1e3*(S._encoderConfig.bitrateMax-50),medium:5e4};w.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const x=E.sender.getParameters();yield E.sender.setParameters(Object.assign(x,w))}}})()}applySimulcastEncodings(o,s){var c=this;return V(function*(){if(!ps()&&o.length===s.length)for(let h=0;h<o.length;h++){const g=s[h];if(g instanceof qs&&c.isVP8Simulcast(g)){const f=o[h],A={},v={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};A.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=f.sender.getParameters();yield f.sender.setParameters(Object.assign(E,A))}}})()}isVP8Simulcast(o){var s,c,h,g;return!!(o instanceof qs&&mt("SIMULCAST")&&"vp8"===this.store.codec&&!o._hints.includes(Xc.LOW_STREAM)&&null!==(s=o._encoderConfig)&&void 0!==s&&s.bitrateMax&&(null===(c=o._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=o._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=o._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(o,s,c,h){if(mt("SDP_LOGGING"))return Q.upload("exchanging ".concat(c," ").concat(s," SDP during P2PConnection.").concat(h,"\n"),o),"offer"===s?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"connect"),Ci.prototype),tr(Ci.prototype,"receive",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"receive"),Ci.prototype),tr(Ci.prototype,"batchReceive",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"batchReceive"),Ci.prototype),tr(Ci.prototype,"stopReceiving",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"stopReceiving"),Ci.prototype),tr(Ci.prototype,"muteRemote",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"muteRemote"),Ci.prototype),tr(Ci.prototype,"unmuteRemote",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"unmuteRemote"),Ci.prototype),tr(Ci.prototype,"muteLocal",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"muteLocal"),Ci.prototype),tr(Ci.prototype,"unmuteLocal",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"unmuteLocal"),Ci.prototype),tr(Ci.prototype,"reEstablish",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"reEstablish"),Ci.prototype),tr(Ci.prototype,"close",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"close"),Ci.prototype),tr(Ci.prototype,"updateEncoderConfig",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"updateEncoderConfig"),Ci.prototype),tr(Ci.prototype,"updateSendParameters",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"updateSendParameters"),Ci.prototype),tr(Ci.prototype,"replaceTrack",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"replaceTrack"),Ci.prototype),tr(Ci.prototype,"restartICE",[xd],Object.getOwnPropertyDescriptor(Ci.prototype,"restartICE"),Ci.prototype),uL=Ci))||uL;function xd(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=V(function*(){const h=this.mutex,g=yield h.lock("From P2PConnection.".concat(o));try{for(var f=arguments.length,A=new Array(f),v=0;v<f;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{g()}}),s}function _V(n,o){let s=document.createElement("video"),c=document.createElement("canvas");s.setAttribute("style","display:none"),c.setAttribute("style","display:none"),s.setAttribute("muted",""),s.muted=!0,s.setAttribute("autoplay",""),s.autoplay=!0,s.setAttribute("playsinline",""),c.width=wy(o.width),c.height=wy(o.height);const h=wy(o.framerate||15);document.body.append(s),document.body.append(c);let g=n._mediaStreamTrack;s.srcObject=new MediaStream([g]),s.play();const f=c.getContext("2d");if(!f)throw new F(P.UNEXPECTED_ERROR,"can not get canvas context");const A=Zc(),v=c.captureStream(A.supportRequestFrame?0:h).getVideoTracks()[0],E=ej(()=>(()=>{if(s.paused&&s.play(),s.videoHeight>2&&s.videoWidth>2){const x=c.width*(s.videoHeight/s.videoWidth);Math.abs(x-c.height)>=2&&(Q.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(x)),c.height=x)}f.drawImage(s,0,0,c.width,c.height),v.requestFrame&&v.requestFrame(),g!==n._mediaStreamTrack&&(g=n._mediaStreamTrack,s.srcObject=new MediaStream([g]))})(),h),S=v.stop;return v.stop=()=>{S.call(v),E(),s&&(s.remove(),s=null),c&&(c.width=0,c.remove(),c=null),Q.debug("clean low stream renderer")},v}var B6,oW;function hL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function vV(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?hL(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):hL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class F6 extends oQ{getUserId(){return this._userId}constructor(o,s,c,h){super(o,"track-".concat(o.kind,"-").concat(s,"-").concat(h.clientId,"_").concat(_s(5,""))),X(this,"_userId",void 0),X(this,"_uintId",void 0),X(this,"_isDestroyed",!1),X(this,"store",void 0),this._userId=s,this._uintId=c,this.store=h}_updateOriginMediaStreamTrack(o){this._originMediaStreamTrack=o,this._mediaStreamTrack=o,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Q.info("[".concat(this.getTrackId(),"] is destroyed")),wt("info",this,"_destroy"),this.stop(),super.close()}}let pL=no("RemoteVideoTrack","getTrackId")(B6=class extends F6{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ca.PLAYING)}constructor(n,o,s,c){super(n,o,s,c),X(this,"_videoVisibleTimer",null),X(this,"_previousVideoVisibleStatus",void 0),X(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),X(this,"trackMediaType","video"),X(this,"_videoWidth",void 0),X(this,"_videoHeight",void 0),X(this,"_player",void 0),wt("info",this,"constructor",{userId:o}),this.updateMediaStreamTrackResolution()}getStats(){return JD(()=>{Q.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),qe("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ty(this,lr.GET_STATS)||vV({},I7)}play(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof n?n:"HTMLElement",o]});if("string"==typeof n){const h=document.getElementById(n);h?n=h:(Q.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),qe("warning",this,'can not find "#'.concat(n,'" element, use document.body')),n=document.body)}Q.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(o)),wt("debug",this,"play",o);const c=vV(vV({fit:"cover"},o),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(c):(this._player=new O8(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(j_.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const h=this.getVideoElementVisibleStatus();this.emit(j_.VIDEO_ELEMENT_VISIBLE_STATUS,h)}catch{}},mt("CHECK_VIDEO_VISIBLE_INTERVAL")),s.onSuccess()}stop(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return n.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Q.debug("[".concat(this.getTrackId(),"] stop video playback")),wt("debug",this,"stop"),n.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){NQ(this._originMediaStreamTrack).then(n=>{let[o,s]=n;this._videoHeight=s,this._videoWidth=o}).catch(eU)}_updatePlayerSource(){Q.debug("[".concat(this.getTrackId(),"] update player source track")),wt("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,o;const s=null==this||null===(n=this._player)||void 0===n?void 0:n.getContainerElement(),c={track:this,element:null==this||null===(o=this._player)||void 0===o?void 0:o.getVideoElement(),slot:s?.parentElement},{element:h,slot:g}=c;if(this.isPlaying&&h instanceof HTMLVideoElement&&g instanceof HTMLElement){const f=dG.checkOneElementVisible(h),A=Object.assign({},f);if(A.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=A.visible;Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(A.visible?"Video is visible":"Invisible because of ".concat(A.reason))}return A}return}catch(s){throw new F(P.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}})||B6,Lk=no("RemoteAudioTrack","getTrackId")(oW=class extends F6{get isPlaying(){return this._useAudioElement?wd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,o,s,c){super(n,o,s,c),X(this,"trackMediaType","audio"),X(this,"_source",void 0),X(this,"_useAudioElement",!0),X(this,"_volume",100),wt("info",this,"constructor",{userId:o}),mt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new cQ(n,!0),this._source.once($c.RECEIVE_TRACK_BUFFER,()=>{this.emit(j_.FIRST_FRAME_DECODED)})}setAudioFrameCallback(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners($c.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners($c.ON_AUDIO_BUFFER),this._source.on($c.ON_AUDIO_BUFFER,s=>n(s))}setVolume(n){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._useAudioElement?wd.setVolume(this.getTrackId(),n):this._source.setVolume(n/100),o.onSuccess()}setPlaybackDevice(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),n]});if(!o._useAudioElement)throw new F(P.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield wd.setSinkID(o.getTrackId(),n)}catch(c){throw s.onError(c),c}s.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return JD(()=>{Q.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),qe("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ty(this,lr.GET_STATS)||vV({},C7)}play(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Q.debug("[".concat(this.getTrackId(),"] start audio playback")),wt("debug",this,"play"),this._useAudioElement?(Q.debug("[".concat(this.getTrackId(),"] use audio element to play")),qe("debug",this,"use audio element to play"),wd.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),n.onSuccess()}stop(){const n=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Q.debug("[".concat(this.getTrackId(),"] stop audio playback")),wt("debug",this,"stop"),this._useAudioElement?wd.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Q.debug("[".concat(this.getTrackId(),"] update player source track")),wt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&wd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||oW;function fL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function AV(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?fL(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):fL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class xz extends D{constructor(){super(),X(this,"uplinkStatsUploadInterval",void 0),X(this,"uplinkStatsUploadSlowInterval",void 0),X(this,"uplinkRelatedStatsUploadInterval",void 0),X(this,"uplinkDenoiserStatsUploadInterval",void 0),X(this,"transportStatsUploadInterval",void 0),X(this,"extensionStatsUploadInterval",void 0),X(this,"downlinkStatsUploadInterval",void 0),X(this,"downlinkStatsUploadSlowInterval",void 0),X(this,"downlinkRelatedStatsUploadInterval",void 0),X(this,"lastStats",void 0),X(this,"uploadUnplinkStarted",!1),X(this,"uploadDownlinkStarted",!1),X(this,"uploadTransportStarted",!1),X(this,"requestStats",void 0),X(this,"requestLocalMedia",void 0),X(this,"requestRemoteMedia",void 0),X(this,"requestAllTracks",void 0),X(this,"requestVideoIsReady",void 0),X(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadTransportStats(s)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadUplinkStats(s,this.lastStats),this.lastStats=s)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadSlowUplinkStats(s)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadRelatedUplinkStats(s,this.lastStats),this.lastStats=s},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);s&&this.uploadDenoiserStats(s)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);s&&this.uploadExtensionStats(s)},2e3))}uploadTransportStats(o){Tp(()=>{var s;null===(s=this.requestUpload)||void 0===s||s.call(this,Du.TRANSPORT_STATS,function(c){const h={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(h.connectionType=101),"tcp"===g&&(h.connectionType=103),"tls"===g&&(h.connectionType=104)}return h}(o))})}uploadUplinkStats(o,s){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,{track:f,ssrcs:A}]=h;switch(g){case Bn.LocalVideoLowTrack:case Bn.LocalVideoTrack:{const E=function(w,R,x){var W;const K=R.videoSend.find(le=>le.ssrc===w);if(!K)return null;const ne={id:_s(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:K.ssrc.toString()};switch(ne.A_vstd=x._originMediaStreamTrack&&!x._originMediaStreamTrack.enabled||!x._mediaStreamTrack.enabled?"1":"0",K.sentFrame&&(ne.A_fhs=K.sentFrame.height.toString(),ne.A_frs=K.sentFrame.frameRate.toString(),ne.A_fws=K.sentFrame.width.toString()),K.adaptionChangeReason){case"none":ne.A_ac="0";break;case"cpu":ne.A_ac="1";break;case"bandwidth":ne.A_ac="2";break;case"other":ne.A_ac="3"}return ne.A_lvps=gM[x._player?x._player.videoElementStatus:"uninit"].toString(),ne.A_nr=null===(W=K.nacksCount)||void 0===W?void 0:W.toString(),K.avgEncodeMs&&(ne.A_aem=K.avgEncodeMs.toFixed(0).toString()),ne}(A[0].ssrcId,o,f),S=fj(A[0].ssrcId,o,s);E&&Tp(()=>{var w;return null===(w=this.requestUpload)||void 0===w?void 0:w.call(this,Du.PUBLISH_STATS,{stream_type:g===Bn.LocalVideoLowTrack?"low":"high",stats:AV(AV({},E),S)})});break}case Bn.LocalAudioTrack:{const E=function(S,w,R){const x=w.audioSend.find(K=>K.ssrc===S);if(!x)return null;const W={id:_s(10,""),timestamp:new Date(w.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:x.ssrc.toString()};return W.A_astd=R._originMediaStreamTrack.enabled&&R._mediaStreamTrack.enabled?"0":"1",W.A_ail=x.inputLevel?Math.round(100*x.inputLevel).toString():Math.round(100*R._source.getAccurateVolumeLevel()).toString(),W.A_apil=Math.round(100*R._source.getAccurateVolumeLevel()).toString(),x.aecReturnLoss&&(W.A_ecrl=Math.round(x.aecReturnLoss).toString()),x.aecReturnLossEnhancement&&(W.A_ecrle=Math.round(x.aecReturnLossEnhancement).toString()),W}(A[0].ssrcId,o,f);E&&Tp(()=>{var S;return null===(S=this.requestUpload)||void 0===S?void 0:S.call(this,Du.PUBLISH_STATS,{stream_type:"high",stats:E})});break}}const v=function(E){const S={id:"bweforvideo",timestamp:new Date(E.timestamp).toISOString(),type:"VideoBwe"};return E.bitrate.retransmit&&(S.A_rb=E.bitrate.retransmit.toString()),E.bitrate.targetEncoded&&(S.A_teb=E.bitrate.targetEncoded.toString()),S.A_aeb=E.bitrate.actualEncoded.toString(),S.A_tb=E.bitrate.transmit.toString(),void 0!==E.sendBandwidth&&(S.A_asb=E.sendBandwidth.toString()),S}(o);v&&Tp(()=>{var E;return null===(E=this.requestUpload)||void 0===E?void 0:E.call(this,Du.PUBLISH_STATS,{stream_type:g===Bn.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadSlowUplinkStats(o){var s;((null===(s=this.requestLocalMedia)||void 0===s?void 0:s.call(this))||[]).filter(c=>{let[h]=c;return h===Bn.LocalVideoLowTrack||h===Bn.LocalVideoTrack}).forEach(c=>{let[h,{ssrcs:g}]=c;const f=fj(g[0].ssrcId,o);f&&Tp(()=>{var A;return null===(A=this.requestUpload)||void 0===A?void 0:A.call(this,Du.PUBLISH_STATS,{stream_type:h===Bn.LocalVideoLowTrack?"low":"high",stats:f})})})}uploadRelatedUplinkStats(o,s){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(h=>{let[g]=h;return g===Bn.LocalVideoLowTrack||g===Bn.LocalVideoTrack}).forEach(h=>{let[g,{ssrcs:f}]=h;const A=function(v,E){const S=E.videoSend.find(w=>w.ssrc===v);return S?{mediaType:"video",isVideoMute:!1,frameRateInput:S.inputFrame&&S.inputFrame.frameRate.toString(),frameRateSent:S.sentFrame&&S.sentFrame.frameRate.toString(),googRtt:S.rttMs.toString(),qpSumPerFrame:Math.floor(S.qpSumPerFrame).toString()}:null}(f[0].ssrcId,o);A&&Tp(()=>{var v;null===(v=this.requestUpload)||void 0===v||v.call(this,Du.PUBLISH_RELATED_STATS,{stream_type:g===Bn.LocalVideoLowTrack?"low":"high",stats:A})})})}uploadDenoiserStats(o){for(let g=0;g<o.length;g++){const f=o[g];if(f instanceof nS){var s,c,h;const A=null===(s=(c=f._external).getDenoiserStats)||void 0===s?void 0:s.call(c);return void(A&&(null===(h=this.requestUpload)||void 0===h||h.call(this,Du.DENOISER_STATS,A)))}}}uploadExtensionStats(o){for(let s=0;s<o.length;s++){const c=o[s];if(c instanceof nS)return void c.getProcessorStats().forEach(h=>{var g;h.type===Du.DENOISER_STATS&&(null===(g=this.requestUpload)||void 0===g||g.call(this,Du.DENOISER_STATS,h.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadDownlinkStats(s,this.lastStats),this.lastStats=s)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadSlowDownlinkStats(s)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadRelatedDownlinkStats(s,this.lastStats),this.lastStats=s)},1e3))}uploadDownlinkStats(o,s){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,f]=h;if(f.has(ti.VIDEO)&&g.videoTrack){const A=g.videoTrack?function(v,E,S){const w=E.videoRecv.find(K=>K.ssrc===v);if(!w)return null;const R={id:_s(10,""),timestamp:new Date(E.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:w.ssrc.toString()};var x,W;return R.bytesReceived=w.bytes.toString(),R.packetsLost=w.packetsLost.toString(),R.packetsReceived=w.packets.toString(),w.framesRateFirefox&&(R.A_frr=w.framesRateFirefox.toString()),w.receivedFrame?(R.A_frr=w.receivedFrame.frameRate.toString(),R.A_fhr=w.receivedFrame.height.toString(),R.A_fwr=w.receivedFrame.width.toString()):(R.A_fhr=null===(x=S._videoHeight)||void 0===x?void 0:x.toString(),R.A_fwr=null===(W=S._videoWidth)||void 0===W?void 0:W.toString()),R.A_frd=w.decodeFrameRate.toString(),w.outputFrame&&(R.A_fro=w.outputFrame.frameRate.toString()),void 0!==w.jitterBufferMs&&(R.A_jbm=Math.floor(w.jitterBufferMs).toString()),void 0!==w.currentDelayMs&&(R.A_cdm=Math.floor(w.currentDelayMs).toString()),R.A_fs=w.firsCount.toString(),R.A_ns=w.nacksCount.toString(),R.A_ps=w.plisCount.toString(),S&&(R.A_vrtd=S._originMediaStreamTrack.enabled&&S._mediaStreamTrack.enabled?"0":"1"),S._player&&S._player.freezeTimeCounterList.length>0&&(R.A_vrft=S._player.freezeTimeCounterList.splice(0,1)[0].toString()),R.A_rvps=gM[S._player?S._player.videoElementStatus:"uninit"].toString(),R}(g._videoSSRC,o,g.videoTrack):void 0;A&&Tp(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,Du.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}if(f.has(ti.AUDIO)&&g.audioTrack){const A=g.audioTrack?function(v,E,S){const w=E.audioRecv.find(x=>x.ssrc===v);if(!w)return null;const R={id:_s(10,""),timestamp:new Date(E.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:w.ssrc.toString()};return R.bytesReceived=w.bytes.toString(),R.packetsLost=w.packetsLost.toString(),R.packetsReceived=w.packets.toString(),R.A_aol=w.outputLevel?Math.round(100*w.outputLevel).toString():Math.round(100*S._source.getAccurateVolumeLevel()).toString(),R.A_apol=Math.round(100*S._source.getAccurateVolumeLevel()).toString(),S&&(R.A_artd=S._originMediaStreamTrack.enabled&&S._mediaStreamTrack.enabled?"0":"1"),R.A_jr=w.jitterMs.toString(),R.A_jbm=Math.floor(w.jitterBufferMs).toString(),R.A_cdm=Math.floor(w.jitterBufferMs).toString(),R.A_raps=gM[wd.getPlayerState(S.getTrackId())].toString(),R}(g._audioSSRC,o,g.audioTrack):void 0;A&&Tp(()=>{var v;return null===(v=this.requestUpload)||void 0===v?void 0:v.call(this,Du.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}})}uploadSlowDownlinkStats(o){}uploadRelatedDownlinkStats(o,s){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,f]=h;if(f.has(ti.VIDEO)&&g.videoTrack){var A;const v=!0===(g._videoSSRC&&(null===(A=this.requestVideoIsReady)||void 0===A?void 0:A.call(this,g._videoSSRC))||!1),E=function(S,w,R,x,W,K){const ne=R.videoRecv.find(ke=>ke.ssrc===S),le=W?W.videoRecv.find(ke=>ke.ssrc===S):void 0;if(!ne)return null;const me=iS.isRemoteVideoFreeze(K,ne,le)&&w,be={mediaType:"video",isVideoMute:!1,peerId:x,frameRateReceived:ne.receivedFrame&&ne.receivedFrame.frameRate.toString(),frameRateDecoded:ne.decodedFrame&&ne.decodedFrame.frameRate.toString(),isFreeze:me,bytesReceived:ne.bytes.toString(),packetsReceived:ne.packets.toString(),packetsLost:ne.packetsLost.toString(),qpSumPerFrame:Math.floor(ne.qpSumPerFrame).toString()};return ne.framesRateFirefox&&(be.frameRateDecoded=ne.framesRateFirefox.toString(),be.frameRateReceived=ne.framesRateFirefox.toString()),be}(g._videoSSRC,v,o,g.uid,s,g.videoTrack);E&&Tp(()=>{var S;null===(S=this.requestUpload)||void 0===S||S.call(this,Du.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:E})})}if(f.has(ti.AUDIO)&&g.audioTrack){const v=function(E,S,w,R){const x=S.audioRecv.find(K=>K.ssrc===E);if(!x)return null;const W=iS.isRemoteAudioFreeze(R);return{mediaType:"audio",isAudioMute:!1,peerId:w,googJitterReceived:x.jitterMs.toString(),isFreeze:W,bytesReceived:x.bytes.toString(),packetsReceived:x.packets.toString(),packetsLost:x.packetsLost.toString(),frameReceived:x.receivedFrames.toString(),frameDropped:x.droppedFrames.toString()}}(g._audioSSRC,o,g.uid,g.audioTrack);v&&Tp(()=>{var E;null===(E=this.requestUpload)||void 0===E||E.call(this,Du.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:v})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var U6,Ii;function V6(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function By(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?V6(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):V6(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function j6(n){var o,s,c,h=2;for(typeof Symbol<"u"&&(s=Zx,c=Symbol.iterator);h--;){if(s&&null!=(o=n[s]))return o.call(n);if(c&&null!=(o=n[c]))return new yV(o.call(n));s="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function yV(n){function o(s){if(Object(s)!==s)return jt.reject(new TypeError(s+" is not an object."));var c=s.done;return jt.resolve(s.value).then(function(h){return{value:h,done:c}})}return(yV=function(s){this.s=s,this.n=s.next}).prototype={s:null,n:null,next:function(){return o(this.n.apply(this.s,arguments))},return:function(s){var c=this.s.return;return void 0===c?jt.resolve({value:s,done:!0}):o(c.apply(this.s,arguments))},throw:function(s){var c=this.s.return;return void 0===c?jt.reject(s):o(c.apply(this.s,arguments))}},new yV(n)}let Q6=no("P2PChannel","store.p2pId")((tr((Ii=class extends D{get state(){return this._state}set state(n){const o=this._state;this._state=n,this.emit(pi.StateChange,o,this._state)}constructor(n,o){var s;super(),s=this,X(this,"store",void 0),X(this,"statsUploader",void 0),X(this,"connection",void 0),X(this,"localTrackMap",new Map),X(this,"remoteUserMap",new Map),X(this,"pendingLocalTracks",[]),X(this,"pendingRemoteTracks",[]),X(this,"statsCollector",void 0),X(this,"isPlanB",!1),X(this,"iceFailedCount",0),X(this,"dtlsFailedCount",0),X(this,"mutex",new Nu("P2PChannel-mutex")),X(this,"_state",bd.Disconnected),X(this,"handleMuteLocalTrack",function(){var c=V(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!s.connection)return void f(new F(P.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));wt("debug",s,"handleMuteLocalTrack",h.getTrackId()),yield s.waitTillConnected();const v=s.filterTobeMutedTracks(h);if(0===v.length)return void g();const E=v.find(w=>"videoLowTrack"===w[0]);E&&E[1].track._originMediaStreamTrack.stop(),yield s.connection.muteLocal(v.map(w=>{let[,{id:R}]=w;return R}));const S=s.createMuteMessage(v);yield Ho(s,pi.RequestMuteLocal,S),g()}catch(v){f(v)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),X(this,"handleUnmuteLocalTrack",function(){var c=V(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!s.connection)return void f(new F(P.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));wt("debug",s,"handleUnmuteLocalTrack",h.getTrackId()),yield s.waitTillConnected();const v=s.filterTobeUnmutedTracks(h);if(0===v.length)return void g();const E=v.find(w=>"videoLowTrack"===w[0]);if(E){const w=E[1];if(w.track._originMediaStreamTrack.stop(),Zc().supportDualStreamEncoding){const R=h._mediaStreamTrack.clone();w.track._mediaStreamTrack=R,w.track._originMediaStreamTrack=R}else{const R=_V(h,A1(s,pi.RequestLowStreamParameter));w.track._mediaStreamTrack=R,w.track._originMediaStreamTrack=R}yield new jt((R,x)=>{s.handleReplaceTrack(w.track,R,x,!0)})}yield s.connection.unmuteLocal(v.map(w=>{let[,{id:R}]=w;return R}));const S=s.createUnmuteMessage(v);yield Ho(s,pi.RequestUnmuteLocal,S),g()}catch(v){f(v)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),X(this,"handleUpdateVideoEncoder",function(){var c=V(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const v=s.localTrackMap.get(Bn.LocalVideoTrack);if(!s.connection||!v||v.track!==h)return void g();yield s.waitTillConnected();const{id:E,track:S}=v;yield s.connection.updateSendParameters(E,S),yield s.connection.updateEncoderConfig(E,S),s.emit(pi.UpdateVideoEncoder,S),g()}catch(v){f(v)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),X(this,"handleSetOptimizationMode",function(){var c=V(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const v=s.localTrackMap.get(Bn.LocalVideoTrack);if(!s.connection||!v||v.track!==h)return;yield s.waitTillConnected();const{id:E,track:S}=v;yield s.connection.updateSendParameters(E,S),g()}catch(v){f(v)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),X(this,"handleReplaceTrack",function(){var c=V(function*(h,g,f,A){let v;Q.debug("P2PChannel handleReplaceTrack for [track-id-".concat(h.getTrackId(),"]")),"boolean"==typeof A&&A||(v=yield s.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var E;const w=Array.from(s.localTrackMap.entries()).find(R=>{let[,{track:x}]=R;return h===x});if(!s.connection||!w)return void g();if(yield s.waitTillConnected(),yield null===(E=s.connection)||void 0===E?void 0:E.replaceTrack(h,w[1].id),s.isPlanB){const R=w[1];R.id=h._mediaStreamTrack.id,s.localTrackMap.set(w[0],R)}if(w[0]===Bn.LocalVideoTrack&&Zc().supportDualStreamEncoding){const R=s.localTrackMap.get(Bn.LocalVideoLowTrack);if(R){const x=h._mediaStreamTrack.clone();R.track._originMediaStreamTrack.stop(),R.track._mediaStreamTrack=x,R.track._originMediaStreamTrack=x,yield new jt((W,K)=>{s.handleReplaceTrack(R.track,W,K,!0)})}}g()}catch(w){f(w)}finally{var S;null===(S=v)||void 0===S||S()}});return function(h,g,f,A){return c.apply(this,arguments)}}()),X(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),X(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),X(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),X(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=n,this.statsCollector=o,this.statsCollector.addP2PChannel(this),this.statsUploader=new xz,this.bindStatsUploaderEvents(),this.isPlanB=!Zc().supportUnifiedPlan||mt("CHROME_FORCE_PLAN_B")&&Xm()}startP2PConnection(n){var o=this;return V(function*(){return o.state=bd.New,o.connection=o.isPlanB?new aL(n,o.store):new dL(n,o.store),o.bindConnectionEvents(o.connection),o.connection.establish()})()}connect(n,o,s,c,h,g){var f=this;return V(function*(){if(!f.connection)throw new F(P.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");f.store.peerConnectionStart(),yield f.connection.connect(n,o,s,c,h,g),f.statsUploader.startUploadTransportStats(),f.state=bd.Connected})()}publish(n,o,s){var c=this;return Rk(function*(){const h=yield vs(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===bd.Disconnected)throw new F(P.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(n);const f=n.filter(A=>-1===c.pendingLocalTracks.indexOf(A));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(f))}c.store.pubId=c.store.pubId+1,zl.markPublishStart(c.store.clientId,c.store.pubId),yield vs(c.waitTillConnected());const g=c.filterTobePublishedTracks(n,o,s);if(0===g.length)return void(yield vs(c.tryToUnmuteAudio(n)));yield*Xx(j6(c.doPublish(c.connection,g)),vs)}finally{h()}})()}doPublish(n,o){var s=this;return Rk(function*(){o.forEach(E=>{let{track:S,type:w}=E;const R=performance.now();s.store.publish(S.getTrackId(),w===Bn.LocalAudioTrack?"audio":"video",R)}),s.bindLocalTrackEvents(o);const c=yield vs(n.send(o.map(E=>{let{track:S}=E;return S}),s.store.codec,s.store.audioCodec)),h=(yield vs(c.next())).value,g=s.createGatewayPublishMessage(o,h);let f;try{f=yield g}catch(E){throw qe("error",s,"doPublish yield error: ".concat(E.toString())),c.throw(E),E?.code===P.WS_ABORT&&o.forEach(S=>{let{track:w}=S;-1===s.pendingLocalTracks.indexOf(w)&&s.pendingLocalTracks.push(w)}),s.unbindLocalTrackEvents(o),E}const A=s.mapPubResToRemoteConfig(g,f);wt("debug",s,"doPublish",{remoteConfigs:A,tracks:o.map(E=>{let{track:S}=E;return S.getTrackId()}),pubMsg:g,pubAns:f});const v=(yield vs(c.next(A))).value;o.forEach(E=>{let{type:S}=E;s.statsCollector.addLocalStats(S)}),s.assignLocalTracks(o,v),s.statsUploader.startUploadUplinkStats(),o.forEach(E=>{let{track:S,type:w}=E;const R=performance.now();s.store.publish(S.getTrackId(),w===Bn.LocalAudioTrack?"audio":"video",void 0,R)})})()}publishLowStream(n){var o=this;return Rk(function*(){if(!o.connection)return;wt("debug",o,"publishLowStream",n);const s=yield vs(o.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const h=o.localTrackMap.get(Bn.LocalVideoTrack);if(!h)throw new F(P.UNEXPECTED_ERROR,"Could not find high stream");if(o.localTrackMap.has(Bn.LocalVideoLowTrack))throw new F(P.UNEXPECTED_ERROR,"[".concat(o.store.clientId,"] Can't publish low stream when stream already publish"));yield vs(o.waitTillConnected());const g=[{track:o.getLowVideoTrack(h.track,n),type:Bn.LocalVideoLowTrack}];if(yield*Xx(j6(o.doPublish(o.connection,g)),vs),h.track.muted||!h.track.enabled){var c;const f=null===(c=o.localTrackMap.get(Bn.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==f&&(yield vs(o.connection.muteLocal([f])))}}finally{s()}})()}republish(){var n=this;return V(function*(){n.pendingLocalTracks.length>0&&(Q.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),wt("debug",n,"republish",n.pendingLocalTracks.map(o=>o.getTrackId())),yield Oh(n,pi.RequestRePublish,n.pendingLocalTracks),n.emit(pi.MediaReconnectEnd,n.store.uid),n.pendingLocalTracks=[])})()}reSubscribe(n){var o=this;return V(function*(){wt("debug",o,"reSubscribe",o.pendingRemoteTracks.map(s=>{let{user:c}=s;return c.uid}));for(let s=o.pendingRemoteTracks.length-1;s>=0;s--){const{user:c,kind:h}=o.pendingRemoteTracks[s];(h!==ti.AUDIO||c._audio_added_&&c._audioSSRC)&&(h!==ti.VIDEO||c._video_added_&&c._videoSSRC)||o.pendingRemoteTracks.splice(s,1)}if(n)yield Oh(o,pi.RequestReSubscribe,o.pendingRemoteTracks);else for(const{user:s,kind:c}of o.pendingRemoteTracks)yield o.subscribe(s,c,c===ti.VIDEO?s._videoSSRC:s._audioSSRC);o.pendingRemoteTracks.forEach(s=>{let{user:c}=s;o.emit(pi.MediaReconnectEnd,c.uid)}),o.pendingRemoteTracks=[]})()}unpublish(n){var o=this;return V(function*(){if(!o.connection)return void n.forEach(h=>{const g=o.pendingLocalTracks.indexOf(h);-1!==g&&o.pendingLocalTracks.splice(g,1)});yield o.waitTillConnected();const s=o.filterTobeUnpublishedTracks(n);if(0===s.length)return;const c=s.find(h=>"videoLowTrack"===h[0]);return c&&c[1].track.close(),wt("debug",o,"unpublish"),o.doUnpublish(o.connection,s)})()}unpublishLowStream(){var n=this;return V(function*(){if(!n.connection)return;wt("debug",n,"unpublishLowStream");const o=n.localTrackMap.get(Bn.LocalVideoLowTrack);return o?(yield n.waitTillConnected(),o.track.close(),n.doUnpublish(n.connection,[[Bn.LocalVideoLowTrack,o]])):void 0})()}doUnpublish(n,o){var s=this;return V(function*(){const c=s.createGatewayUnpublishMessage(o);return yield n.stopSending(o.map(h=>{let[,{id:g}]=h;return g})),s.withdrawLocalTracks(o),s.unbindLocalTrackEvents(o.map(h=>{let[g,{track:f}]=h;return{type:g,track:f}})),o.forEach(h=>{let[g]=h;s.statsCollector.removeLocalStats(g)}),0===s.localTrackMap.size&&s.statsUploader.stopUploadUplinkStats(),c})()}subscribe(n,o,s,c,h){var g=this;return V(function*(){var f;if(!g.connection)throw new F(P.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(wt("debug",g,"subscribe",{uid:n.uid,mediaType:o,ssrcId:s}),null!==(f=g.remoteUserMap.get(n))&&void 0!==f&&f.has(o))return;let A,v;if(yield g.waitTillConnected(),h){const w=h.find(x=>{let{stream_type:W}=x;return W===o});if(!w)throw new F(P.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(o," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(o,"."));const R=yield g.connection.receive(o,w.ssrcs,String(n._uintid),w.attributes);A=R.track,v=R.id}else{const w=yield g.connection.receive(o,[{ssrcId:s,rtx:c}],String(n._uintid),void 0);A=w.track,v=w.id}o===ti.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(A):(n._audioTrack=new Lk(A,n.uid,n._uintid,g.store),Q.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(A):(n._videoTrack=new pL(A,n.uid,n._uintid,g.store),Q.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._videoTrack));const E=g.remoteUserMap.get(n);E?E.set(o,v):g.remoteUserMap.set(n,new Map([[o,v]])),g.statsCollector.addRemoteStats(n.uid),g.statsUploader.startUploadDownlinkStats();const S=g.pendingRemoteTracks.findIndex(w=>{let{user:R,kind:x}=w;return R.uid===n.uid&&o===x});-1!==S&&(g.pendingRemoteTracks.splice(S,1),g.emit(pi.MediaReconnectEnd,n.uid))})()}massSubscribe(n){var o=this;return V(function*(){return o.massSubscribeNoLock(n)})()}massSubscribeNoLock(n){var o=this;return V(function*(){if(!o.connection)throw new F(P.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");wt("debug",o,"subscribeAll",n.map(c=>{let{user:h,mediaType:g,ssrcId:f}=c;return{uid:h.uid,mediaType:g,ssrcId:f}})),n=n.filter(c=>{var h;let{user:g,mediaType:f}=c;return!(null!==(h=o.remoteUserMap.get(g))&&void 0!==h&&h.has(f))}),yield o.waitTillConnected();const s=yield o.connection.batchReceive(n.map(c=>{let{user:h,mediaType:g,ssrcId:f,rtxSsrcId:A}=c;return{kind:g,ssrcMsg:[{ssrcId:f,rtx:A}],mslabel:String(h._uintid)}}));n.forEach((c,h)=>{let{user:g,mediaType:f}=c;const{track:A,id:v}=s[h];f===ti.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(A):(g._audioTrack=new Lk(A,g.uid,g._uintid,o.store),Q.info("[".concat(o.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),o.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(A):(g._videoTrack=new pL(A,g.uid,g._uintid,o.store),Q.info("[".concat(o.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),o.bindRemoteTrackEvents(g,g._videoTrack));const E=o.remoteUserMap.get(g);E?E.set(f,v):o.remoteUserMap.set(g,new Map([[f,v]])),o.statsCollector.addRemoteStats(g.uid),o.statsUploader.startUploadDownlinkStats();const S=o.pendingRemoteTracks.findIndex(w=>{let{user:R,kind:x}=w;return R.uid===g.uid&&f===x});-1!==S&&(o.pendingRemoteTracks.splice(S,1),o.emit(pi.MediaReconnectEnd,g.uid))})})()}unsubscribe(n,o,s){var c=this;return V(function*(){const h=c.pendingRemoteTracks.filter(A=>{let{user:v,kind:E}=A;return void 0!==o?v.uid===n.uid&&o===E:v.uid===n.uid});if(h.forEach(A=>{const v=c.pendingRemoteTracks.indexOf(A);c.pendingRemoteTracks.splice(v,1)}),!c.connection)return void h.forEach(A=>{let{kind:v}=A;var E;if(v===ti.AUDIO)null===(E=n._audioTrack)||void 0===E||E._destroy(),n._audioTrack=void 0;else if(v===ti.VIDEO){var S;null===(S=n._videoTrack)||void 0===S||S._destroy(),n._videoTrack=void 0}});wt("debug",c,"unsubscribe",{uid:n.uid,mediaType:o});const g=c.filterTobeUnSubscribedTracks(n,o);if(0===g.length)return;yield c.connection.stopReceiving(g.map(A=>{let[,{id:v}]=A;return v}));const f=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(A=>{let[v,{kind:E}]=A;var S,w;if(E===ti.VIDEO&&v._videoSSRC&&(null===(S=c.connection)||void 0===S||S.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),E===ti.VIDEO)c.unbindRemoteTrackEvents(v._videoTrack),s||(null===(w=v._videoTrack)||void 0===w||w._destroy(),v._videoTrack=void 0);else if(E===ti.AUDIO){var R;c.unbindRemoteTrackEvents(v._audioTrack),!s&&(null===(R=v._audioTrack)||void 0===R||R._destroy(),v._audioTrack=void 0)}}),f})()}massUnsubscribe(n){var o=this;return V(function*(){return o.massUnsubscribeNoLock(n)})()}massUnsubscribeNoLock(n){var o=this;return V(function*(){let s=[];for(const{user:g,mediaType:f}of n){const A=o.pendingRemoteTracks.filter(v=>{let{user:E,kind:S}=v;return void 0!==f?E.uid===g.uid&&f===S:E.uid===g.uid});A.forEach(v=>{const E=o.pendingRemoteTracks.indexOf(v);o.pendingRemoteTracks.splice(E,1)}),s=s.concat(A)}if(!o.connection)return void s.forEach(g=>{let{user:f,kind:A}=g;var v;if(A===ti.AUDIO)null===(v=f._audioTrack)||void 0===v||v._destroy(),f._audioTrack=void 0;else if(A===ti.VIDEO){var E;null===(E=f._videoTrack)||void 0===E||E._destroy(),f._videoTrack=void 0}});wt("debug",o,"batchUnsubscribe",n.map(g=>{let{user:f,mediaType:A}=g;return{uid:f.uid,mediaType:A}}));const c=nh(n).call(n,(g,f)=>{let{user:A,mediaType:v}=f;const E=o.filterTobeUnSubscribedTracks(A,v);return g.concat(E)},[]);if(0===c.length)return;yield o.connection.stopReceiving(c.map(g=>{let[,{id:f}]=g;return f}));const h=o.createUnsubscribeAllMessage(c);return o.withdrawRemoteTracks(c),0===o.remoteUserMap.size&&o.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[f,{kind:A}]=g;var v,E;if(A===ti.VIDEO&&f._videoSSRC&&(null===(v=o.connection)||void 0===v||v.setStatsRemoteVideoIsReady(f._videoSSRC,!1)),A===ti.VIDEO)o.unbindRemoteTrackEvents(f._videoTrack),null===(E=f._videoTrack)||void 0===E||E._destroy(),f._videoTrack=void 0;else if(A===ti.AUDIO){var S;o.unbindRemoteTrackEvents(f._audioTrack),null===(S=f._audioTrack)||void 0===S||S._destroy(),f._audioTrack=void 0}}),h})()}muteRemote(n,o){var s=this;return V(function*(){if(!s.connection)return;wt("debug",s,"muteRemote",{uid:n.uid,kind:o});const c=s.remoteUserMap.get(n);if(!c)return Q.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid,".")),void qe("warning",s,"P2PChannel.muteRemote has no remote user ".concat(n.uid,"."));if(!c.get(o))return Q.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(o,".")),void qe("warning",s,"P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(o,"."));const h=o===ti.VIDEO?n._videoSSRC:n._audioSSRC;void 0!==h&&s.connection.setStatsRemoteVideoIsReady(h,!1)})()}unmuteRemote(n,o){var s=this;return V(function*(){return s.unmuteRemoteNoLock(n,o)})()}unmuteRemoteNoLock(n,o){var s=this;return V(function*(){if(!s.connection)return;wt("debug",s,"unmuteRemote",{uid:n.uid,kind:o});const c=s.remoteUserMap.get(n);return c?c.get(o)?void 0:(Q.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid," media type ").concat(o,".")),void qe("warning",s,"unmuteRemote has no remote user ".concat(n.uid," media type ").concat(o))):(Q.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid,".")),void qe("warning",s,"unmuteRemote has no remote user ".concat(n.uid)))})()}getAllTracks(n){const o=this.localTrackMap.get(Bn.LocalAudioTrack);if(o?.track instanceof Td){const s=o.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[h]=c;return h!==Bn.LocalAudioTrack}).filter(c=>{let[h]=c;return!(n&&h===Bn.LocalVideoLowTrack)}).map(c=>{let[,{track:h}]=c;return h}).concat(s.trackList)}return Array.from(this.localTrackMap.entries()).filter(s=>{let[c]=s;return!(n&&c===Bn.LocalVideoLowTrack)}).map(s=>{let[,{track:c}]=s;return c})}reportPublishEvent(n,o,s,c,h){if(n){const f=this.localTrackMap.get(Bn.LocalAudioTrack),A=this.localTrackMap.get(c?Bn.LocalVideoLowTrack:Bn.LocalVideoTrack);Xt.publish(this.store.sessionId,{eventElapse:zl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:o,audioName:f?.track.getTrackLabel(),videoName:A?.track.getTrackLabel(),screenshare:-1!==A?.track._hints.indexOf(Xc.SCREEN_TRACK),audio:!!f,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}else{var g;s||(s=[]);const f=s.find(v=>v instanceof pc),A=c?null===(g=this.localTrackMap.get(Bn.LocalVideoTrack))||void 0===g?void 0:g.track:s.find(v=>v instanceof qs);Xt.publish(this.store.sessionId,{eventElapse:zl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:o,audioName:f?.getTrackLabel(),videoName:A?.getTrackLabel(),screenshare:-1!==A?._hints.indexOf(Xc.SCREEN_TRACK),audio:!!f,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}}reportSubscribeEvent(n,o,s,c){const h=c===ti.VIDEO?s._videoSSRC:s._audioSSRC;h&&Xt.subscribe(this.store.sessionId,{succ:n,ec:o,video:c===ti.VIDEO,audio:c===ti.AUDIO,peerid:s.uid,subscribeRequestid:c===ti.VIDEO?s._videoSSRC:s._audioSSRC,p2pid:this.store.p2pId,eventElapse:zl.measureFromSubscribeStart(this.store.clientId,h)})}reset(){Q.debug("P2PChannel.reset"),this.mutex=new Nu("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=bd.Disconnected}getStats(){var n;return null===(n=this.connection)||void 0===n?void 0:n.getStats()}getRemoteVideoIsReady(n){var o;return(null===(o=this.connection)||void 0===o?void 0:o.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Bn.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Bn.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const o=this.localTrackMap.get(n);return o&&o.track instanceof qs||o&&o.track instanceof pc?o.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,o){if(!n)return this.remoteUserMap.size>0;const s=this.remoteUserMap.get(n);return!!s&&(!o||s.has(o))}hasRemoteMediaWithLock(n,o){var s=this;return V(function*(){if(!n)return s.remoteUserMap.size>0;const c=s.remoteUserMap.get(n);return!!c&&(!o||c.has(o))})()}getRemoteMedia(n){var o;const s=Array.from(Sy(o=this.remoteUserMap).call(o)).find(c=>c.uid===n);return s?{audioTrack:s.audioTrack,audioSSRC:s._audioSSRC,videoTrack:s.videoTrack,videoSSRC:s._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(s=>{let[c]=s;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const o=this.localTrackMap.get(Bn.LocalAudioTrack);return o&&n.push({level:100*o.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=FF(n).call(n,(s,c)=>s.level-c.level),n}disconnectForReconnect(){var n=this;return V(function*(){n.connection&&(wt("debug",n,"disconnectForReconnect"),Q.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),n.state=bd.Reconnecting,n.connection.close(),n.unbindConnectionEvents(n.connection),n.connection=void 0,0!==n.localTrackMap.size&&(Array.from(n.localTrackMap.entries()).forEach(o=>{let[s,{track:c}]=o;switch(s){case Bn.LocalVideoTrack:c._hints.includes(Xc.LOW_STREAM)?c.close():n.pendingLocalTracks.push(c);break;case Bn.LocalAudioTrack:c instanceof Td?n.pendingLocalTracks=n.pendingLocalTracks.concat(c.trackList):n.pendingLocalTracks.push(c)}}),n.emit(pi.MediaReconnectStart,n.store.uid)),n.unbindLocalTrackEvents(),n.localTrackMap.clear(),0!==n.remoteUserMap.size&&Array.from(n.remoteUserMap.entries()).forEach(o=>{let[s,c]=o;Array.from(Sy(c).call(c)).forEach(h=>{n.setPendingRemoteMedia(s,h)}),n.emit(pi.MediaReconnectStart,s.uid)}),n.unbindAllRemoteTrackEvents(),n.remoteUserMap.clear(),n.statsUploader.stopUploadUplinkStats(),n.statsUploader.stopUploadDownlinkStats(),n.statsUploader.stopUploadTransportStats(),Q.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(n,o){for(const s of this.pendingRemoteTracks){const{user:c,kind:h}=s;if((n instanceof Gx?n.uid:n)===c.uid&&o===h)return!0}return!1}setPendingRemoteMedia(n,o){this.hasPendingRemoteMedia(n,o)||this.pendingRemoteTracks.push({user:n,kind:o})}reEstablish(){var n=this;return V(function*(){if(n.connection)return n.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),o=this.localTrackMap.get(Bn.LocalVideoTrack),s=this.localTrackMap.get(Bn.LocalAudioTrack),c=n.videoSend.find(x=>x.ssrc===o?.ssrcs[0].ssrcId),h=n.audioSend.find(x=>x.ssrc===s?.ssrcs[0].ssrcId);if(!c||!h)return 1;const g=Ty(this,pi.NeedSignalRTT),f=c?c.rttMs:void 0,A=h?h.rttMs:void 0,v=f&&A?(f+A)/2:f||A,S=100*n.sendPacketLossRate*.7/50+.3*((v&&g?(v+g)/2:v||g)||0)/1500,w=S<.17?1:S<.36?2:S<.59?3:S<.1?4:5,R=o?.track;if(R&&R._encoderConfig&&-1===R._hints.indexOf(Xc.SCREEN_TRACK)){const x=R._encoderConfig.bitrateMax,W=n.bitrate.actualEncoded;if(x&&W){const K=(1e3*x-W)/(1e3*x);return Cp[K<.15?0:K<.3?1:K<.45?2:K<.6?3:4][w]}}return w}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let o=0;return Array.from(this.remoteUserMap.entries()).forEach(s=>{let[c]=s;const h=c._audioSSRC,g=c._videoSSRC,f=n.audioRecv.find(W=>W.ssrc===h),A=n.videoRecv.find(W=>W.ssrc===g);if(!f&&!A)return void(o+=1);const v=Ty(this,pi.NeedSignalRTT),E=n.rtt,S=(E&&v?(E+v)/2:E||v)||0,w=f?f.jitterMs:void 0,R=n.recvPacketLossRate;let x=.7*R*100/50+.3*S/1500;w&&(x=.6*R*100/50+.2*S/1500+.2*w/400),o+=x<.1?1:x<.17?2:x<.36?3:x<.59?4:5}),this.remoteUserMap.size>0?Math.round(o/this.remoteUserMap.size):o}muteLocalTrack(n){var o=this;return V(function*(){return new jt((s,c)=>{o.handleMuteLocalTrack(n,s,c)})})()}filterTobePublishedTracks(n,o,s){const c=[],h=Zc(),g=this.getAllTracks();n=MQ(n=n.filter(v=>-1===g.indexOf(v)));let f=!1,A=!1;for(const v of n){if(v instanceof qs&&(this.localTrackMap.has(Bn.LocalVideoTrack)||f?new F(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:v,type:Bn.LocalVideoTrack}),f=!0),o)){const E=this.getLowVideoTrack(v,s);c.push({track:E,type:Bn.LocalVideoLowTrack})}if(v instanceof pc){const E=this.localTrackMap.get(Bn.LocalAudioTrack);if(E){if(!(E.track instanceof Td))throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(v._bypassWebAudio)throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");E.track.addAudioTrack(v),this.bindLocalAudioTrackEvents(v,!0)}else if(A){const S=c.find(w=>{let{type:R}=w;return R===Bn.LocalAudioTrack});if(!(S.track instanceof Td))throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(v._bypassWebAudio)throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(v)}else{if(!h.webAudioMediaStreamDest||v instanceof Td||v._bypassWebAudio)c.push({track:v,type:Bn.LocalAudioTrack});else{const S=new Td;S.addAudioTrack(v),c.push({track:S,type:Bn.LocalAudioTrack})}A=!0}}}return c}filterTobeUnpublishedTracks(n){const o=[],s=this.getAllTracks();n=MQ(n=n.filter(c=>-1!==s.indexOf(c)));for(const c of n){if(c instanceof pc){const h=this.localTrackMap.get(Bn.LocalAudioTrack);if(!h)continue;h.track instanceof Td?(h.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===h.track.trackList.length&&(o.push([Bn.LocalAudioTrack,h]),h.track.close())):o.push([Bn.LocalAudioTrack,h])}if(c instanceof qs){const h=this.localTrackMap.get(Bn.LocalVideoTrack);if(!h)continue;o.push([Bn.LocalVideoTrack,h]);const g=this.localTrackMap.get(Bn.LocalVideoLowTrack);g&&o.push([Bn.LocalVideoLowTrack,g])}}return o}bindLocalTrackEvents(n){n.forEach(o=>{let{track:s,type:c}=o;switch(c){case Bn.LocalVideoTrack:s.addListener(lr.GET_STATS,this.handleGetLocalVideoStats),s.addListener(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(lr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),s.addListener(lr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),s.addListener(lr.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.addListener(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Bn.LocalAudioTrack:this.bindLocalAudioTrackEvents(s)}})}bindLocalAudioTrackEvents(n,o){n instanceof Td?n.trackList.forEach(s=>{s.addListener(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(lr.GET_STATS,this.handleGetLocalAudioStats),s.addListener(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(lr.GET_STATS,this.handleGetLocalAudioStats),n.addListener(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),o||n.addListener(lr.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(o=>{let[s,{track:c}]=o;return{track:c,type:s}})),n.forEach(o=>{let{track:s,type:c}=o;switch(c){case Bn.LocalVideoTrack:s.off(lr.GET_STATS,this.handleGetLocalVideoStats),s.off(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.off(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.off(lr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),s.off(lr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),s.off(lr.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.off(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.off(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Bn.LocalAudioTrack:this.unbindLocalAudioTrackEvents(s)}})}unbindLocalAudioTrackEvents(n){n instanceof Td?n.trackList.forEach(o=>{o.off(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(lr.GET_STATS,this.handleGetLocalAudioStats),o.off(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(lr.GET_STATS,this.handleGetLocalAudioStats),n.off(lr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(lr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(lr.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(lr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(lr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,o){o instanceof pL&&o.addListener(lr.GET_STATS,s=>{s(this.handleGetRemoteVideoStats(n))}),o instanceof Lk&&o.addListener(lr.GET_STATS,s=>{s(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(lr.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[o,s]=n;s.has(ti.AUDIO)&&this.unbindRemoteTrackEvents(o._audioTrack),s.has(ti.VIDEO)&&this.unbindRemoteTrackEvents(o._videoTrack)})}createGatewayPublishMessage(n,o){return n.map((s,c)=>{let h,g,{track:f,type:A}=s;switch(A){case Bn.LocalAudioTrack:h=ms.Audio,g={dtx:f instanceof nS&&f._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Bn.LocalVideoTrack:h=f._hints.includes(Xc.SCREEN_TRACK)?ms.Screen:ms.High,g=By(By({},pj(f)),{},{codec:this.store.codec});break;case Bn.LocalVideoLowTrack:h=ms.Low,g=By(By({},pj(f)),{},{codec:this.store.codec})}return{stream_type:h,attributes:g,ssrcs:o[c]}})}createGatewayUnpublishMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case Bn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?ms.Screen:ms.High;break;case Bn.LocalAudioTrack:s=ms.Audio;break;case Bn.LocalVideoLowTrack:s=ms.Low}return{stream_type:s,ssrcs:g,mid:f}})}assignLocalTracks(n,o){n.forEach((s,c)=>{let{track:h,type:g}=s;this.localTrackMap.set(g,{track:h,id:o[c].id,ssrcs:o[c].localSSRC})})}withdrawLocalTracks(n){n.forEach(o=>{let[s]=o;this.localTrackMap.delete(s)})}waitTillConnected(){var n=this;return V(function*(){return new jt((o,s)=>{switch(n.state){case bd.New:case bd.Reconnecting:{const c=(h,g)=>g===bd.Disconnected?(n.off(pi.StateChange,c),void s(new F(P.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===bd.Connected?(n.off(pi.StateChange,c),void o(void 0)):void 0;n.on(pi.StateChange,c);break}case bd.Connected:o(void 0);break;case bd.Disconnected:s(new F(P.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(n){var o=this;n.onConnectionStateChange=function(){var s=V(function*(c){Q.info("[p2pId: ".concat(o.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),Yt("info",o,"connectionStateChange",c),o.emit(pi.PeerConnectionStateChange,c),"connected"!==c||o.store.keyMetrics.peerConnectionEnd||o.store.peerConnectionEnd(),"failed"===c&&(yield o.requestReconnect())});return function(c){return s.apply(this,arguments)}}(),n.onICEConnectionStateChange=s=>{Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(s,")")),Yt("info",this,"iceConnectionStateChange",s),Xt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:s,tag:or.TRACER}).onSuccess(),this.emit(pi.IceConnectionStateChange,s)},n.onICETransportStateChange=s=>{Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(s,")")),Yt("info",this,"ICETransportStateChange",s)},n.onDTLSTransportStateChange=s=>{Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(s,")")),Yt("info",this,"DTLSTransportStateChange",s)},n.onDTLSTransportError=s=>{Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(s,")")),Yt("info",this,"DTLSTransportError",s)},n.onFirstAudioDecoded=s=>{var c;const h=Array.from(Sy(c=this.remoteUserMap).call(c)).find(f=>f._audioSSRC===s);var g;h&&(null===(g=h.audioTrack)||void 0===g||g.emit(j_.FIRST_FRAME_DECODED),Xt.firstRemoteFrame(this.store.sessionId,Qa.FIRST_AUDIO_DECODE,jo.FIRST_AUDIO_DECODE,{peer:h._uintid,subscribeElapse:zl.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=s=>{var c;const h=Array.from(Sy(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===s);h&&Xt.firstRemoteFrame(this.store.sessionId,Qa.FIRST_AUDIO_RECEIVED,jo.FIRST_AUDIO_RECEIVED,{peer:h._uintid,subscribeElapse:zl.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(s,c,h)=>{var g;const f=Array.from(Sy(g=this.remoteUserMap).call(g)).find(A=>A._videoSSRC===s);f&&Xt.firstRemoteFrame(this.store.sessionId,Qa.FIRST_VIDEO_DECODE,jo.FIRST_VIDEO_DECODE,{peer:f._uintid,videowidth:c,videoheight:h,subscribeElapse:zl.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onFirstVideoReceived=s=>{var c;const h=Array.from(Sy(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===s);h&&Xt.firstRemoteFrame(this.store.sessionId,Qa.FIRST_VIDEO_RECEIVED,jo.FIRST_VIDEO_RECEIVED,{peer:h._uintid,subscribeElapse:zl.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(s,c)=>{const h="relay"===s.candidateType;"unknown"!==c.candidateType&&h===("relay"===c.candidateType)||this.emit(pi.ConnectionTypeChange,h),Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(z_(c))," -> ").concat(JSON.stringify(z_(s)),")")),Yt("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(z_(c))," -> ").concat(JSON.stringify(z_(s))))},n.onSelectedRemoteCandidateChanged=(s,c)=>{Q.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(z_(c))," -> ").concat(JSON.stringify(z_(s)),")")),Yt("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(z_(c))," -> ").concat(JSON.stringify(z_(s))))}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(n){const o=[];if(-1===this.getAllTracks().indexOf(n))return o;const s=this.localTrackMap.get(Bn.LocalAudioTrack);if(n instanceof pc&&s?.track instanceof Td)return s.track.isActive||o.push([Bn.LocalAudioTrack,s]),o;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c&&(o.push(c),c[0]===Bn.LocalVideoTrack)){const h=this.localTrackMap.get(Bn.LocalVideoLowTrack);h&&o.push([Bn.LocalVideoLowTrack,h])}return o}filterTobeUnmutedTracks(n){const o=[],s=this.localTrackMap.get(Bn.LocalAudioTrack);if(n instanceof pc&&s?.track instanceof Td)return s.track.isActive&&o.push([Bn.LocalAudioTrack,s]),o;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c)if(c[0]===Bn.LocalVideoTrack){o.push(c);const h=this.localTrackMap.get(Bn.LocalVideoLowTrack);h&&o.push([Bn.LocalVideoLowTrack,h])}else o.push(c);return o}createMuteMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case Bn.LocalAudioTrack:s=ms.Audio;break;case Bn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?ms.Screen:ms.High;break;case Bn.LocalVideoLowTrack:s=ms.Low}return{stream_type:s,ssrcs:g,mid:f}})}createUnmuteMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case Bn.LocalAudioTrack:s=ms.Audio;break;case Bn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?ms.Screen:ms.High;break;case Bn.LocalVideoLowTrack:s=ms.Low}return{stream_type:s,ssrcs:g,mid:f}})}filterTobeUnSubscribedTracks(n,o){const s=[],c=this.remoteUserMap.get(n);if(!c)return s;if(o){const h=c.get(o);if(!h)return s;s.push([n,{kind:o,id:h}])}else Array.from(c.entries()).forEach(h=>{let[g,f]=h;s.push([n,{kind:g,id:f}])});return s}createUnsubscribeMessage(n){const o=[];return n.forEach(s=>{let[c,{kind:h}]=s;switch(h){case ti.VIDEO:return void(c._videoSSRC&&o.push({stream_type:ti.VIDEO,ssrcId:c._videoSSRC}));case ti.AUDIO:return void(c._audioSSRC&&o.push({stream_type:ti.AUDIO,ssrcId:c._audioSSRC}))}}),o}createUnsubscribeAllMessage(n){const o=new Map;return n.forEach(s=>{let[c,{kind:h}]=s;if(o.has(c)){let g=o.get(c);g|=h===ti.VIDEO?Qo.Video:Qo.Audio,o.set(c,g)}else o.set(c,h===ti.VIDEO?Qo.Video:Qo.Audio)}),{users:Array.from(o.entries()).map(s=>{let[c,h]=s;return{stream_id:c.uid,stream_type:h}})}}withdrawRemoteTracks(n){n.forEach(o=>{let[s,{kind:c}]=o;const h=this.remoteUserMap.get(s);h&&(h.delete(c),0===Array.from(h.entries()).length&&this.remoteUserMap.delete(s))})}updateBitrateLimit(n){var o=this;return V(function*(){const s=o.localTrackMap.get(Bn.LocalVideoTrack),c=o.localTrackMap.get(Bn.LocalVideoLowTrack);s&&(yield s.track.setBitrateLimit(n.uplink)),c&&n.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(n,o){return n.map((s,c)=>{var h;let{stream_type:g}=s;return null===(h=o.find(f=>{let{stream_type:A}=f;return g===A}))||void 0===h?void 0:h.attributes})}tryToUnmuteAudio(n){var o=this;return V(function*(){for(let c=0;c<n.length;c++)if(n[c]instanceof pc){var s;const h=o.filterTobeUnmutedTracks(n[c]);if(0===h.length)continue;yield null===(s=o.connection)||void 0===s?void 0:s.unmuteLocal(h.map(f=>{let[,{id:A}]=f;return A}));const g=o.createUnmuteMessage(h);return void(yield Ho(o,pi.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var o;return!(null===(o=this.connection)||void 0===o||!o.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,o)=>this.emit(pi.RequestUploadStats,n,o),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var n=this;return V(function*(){n.dtlsFailedCount+=1,yield Nc(ie(n.dtlsFailedCount,Z)),n.emit(pi.RequestReconnect)})()}reconnectP2P(){var n=this;return V(function*(){const o=Array.from(n.localTrackMap.entries()),s=n.createGatewayUnpublishMessage(o);Array.from(n.remoteUserMap.entries()),s.length>0&&(yield Oh(n,pi.RequestUnpublishForReconnectPC,s)),n.disconnectForReconnect(),n.emit(pi.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(Bn.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof qs)}throwIfTrackTypeNotMatch(n){if(n.filter(o=>o instanceof qs).length>1)throw new F(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(o=>o instanceof pc).length>1&&(n.some(o=>o instanceof pc&&o._bypassWebAudio)||!Zc().webAudioMediaStreamDest))throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const o of n){if(o instanceof qs&&this.pendingLocalTracks.some(s=>s instanceof qs))throw new F(P.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(o instanceof pc&&this.pendingLocalTracks.some(s=>s instanceof pc)&&(!Zc().webAudioMediaStreamDest||o._bypassWebAudio||this.pendingLocalTracks.some(s=>s instanceof pc&&s._bypassWebAudio)))throw new F(P.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,o){const s=Zc().supportDualStreamEncoding,c=By(By({},{width:160,height:120,framerate:15,bitrate:50}),o);let h;h=s?n._mediaStreamTrack.clone():_V(n,c);const g=new qs(h,By(By({},s&&{scaleResolutionDownBy:kQ(c,n)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(Xc.LOW_STREAM),n.addListener(lr.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var n=this;return V(function*(){return n.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(n,o,s){if(!this.connection)return!1;const c=this.remoteUserMap.get(n);if(!c)return!1;const h=c.get(o);if(!h)return!1;const g=this.connection.getRemoteSSRC(h);return void 0!==g&&g!==s}}).prototype,"startP2PConnection",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"startP2PConnection"),Ii.prototype),tr(Ii.prototype,"connect",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"connect"),Ii.prototype),tr(Ii.prototype,"unpublish",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"unpublish"),Ii.prototype),tr(Ii.prototype,"unpublishLowStream",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"unpublishLowStream"),Ii.prototype),tr(Ii.prototype,"subscribe",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"subscribe"),Ii.prototype),tr(Ii.prototype,"massSubscribe",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"massSubscribe"),Ii.prototype),tr(Ii.prototype,"unsubscribe",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"unsubscribe"),Ii.prototype),tr(Ii.prototype,"massUnsubscribe",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"massUnsubscribe"),Ii.prototype),tr(Ii.prototype,"muteRemote",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"muteRemote"),Ii.prototype),tr(Ii.prototype,"unmuteRemote",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"unmuteRemote"),Ii.prototype),tr(Ii.prototype,"hasRemoteMediaWithLock",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"hasRemoteMediaWithLock"),Ii.prototype),tr(Ii.prototype,"disconnectForReconnect",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"disconnectForReconnect"),Ii.prototype),tr(Ii.prototype,"reEstablish",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"reEstablish"),Ii.prototype),tr(Ii.prototype,"updateBitrateLimit",[Ld],Object.getOwnPropertyDescriptor(Ii.prototype,"updateBitrateLimit"),Ii.prototype),U6=Ii))||U6;function Ld(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=V(function*(){const h=this.mutex,g=yield h.lock("From P2PChannel.".concat(o));try{for(var f=arguments.length,A=new Array(f),v=0;v<f;v++)A[v]=arguments[v];return yield c.apply(this,A)}finally{g()}}),s}function kp(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var fi,H6="function"==typeof Symbol&&Symbol.observable||"@@observable",Bk=function(){return Math.random().toString(36).substring(7).split("").join(".")},G6={INIT:"@@redux/INIT"+Bk(),REPLACE:"@@redux/REPLACE"+Bk(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Bk()}};function sW(n){if("object"!=typeof n||null===n)return!1;for(var o=n;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(n)===o}function W6(n,o,s){var c;if("function"==typeof o&&"function"==typeof s||"function"==typeof s&&"function"==typeof arguments[3])throw new Error(kp(0));if("function"==typeof o&&void 0===s&&(s=o,o=void 0),void 0!==s){if("function"!=typeof s)throw new Error(kp(1));return s(W6)(n,o)}if("function"!=typeof n)throw new Error(kp(2));var h=n,g=o,f=[],A=f,v=!1;function E(){A===f&&(A=f.slice())}function S(){if(v)throw new Error(kp(3));return g}function w(K){if("function"!=typeof K)throw new Error(kp(4));if(v)throw new Error(kp(5));var ne=!0;return E(),A.push(K),function(){if(ne){if(v)throw new Error(kp(6));ne=!1,E();var le=A.indexOf(K);A.splice(le,1),f=null}}}function R(K){if(!sW(K))throw new Error(kp(7));if(void 0===K.type)throw new Error(kp(8));if(v)throw new Error(kp(9));try{v=!0,g=h(g,K)}finally{v=!1}for(var ne=f=A,le=0;le<ne.length;le++)(0,ne[le])();return K}function x(K){if("function"!=typeof K)throw new Error(kp(10));h=K,R({type:G6.REPLACE})}function W(){var K,ne=w;return(K={subscribe:function(le){if("object"!=typeof le||null===le)throw new Error(kp(11));function me(){le.next&&le.next(S())}return me(),{unsubscribe:ne(me)}}})[H6]=function(){return this},K}return R({type:G6.INIT}),(c={dispatch:R,subscribe:w,getState:S,replaceReducer:x})[H6]=W,c}function K6(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function nr(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?K6(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):K6(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}!function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS"}(fi||(fi={}));class aW{constructor(o,s,c,h){X(this,"store",void 0),X(this,"reducer",void 0);const g={codec:o,audioCodec:s,mode:c,clientId:h,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case fi.SET_SESSION_ID:return nr(nr({},f),{},{sessionId:A.sessionId});case fi.SET_P2P_ID:return nr(nr({},f),{},{p2pId:A.p2pId});case fi.SET_UID:return nr(nr({},f),{},{uid:A.uid});case fi.SET_PUB_ID:return nr(nr({},f),{},{pubId:A.pubId});case fi.KEY_METRIC_CLIENT_CREATED:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{clientCreated:A.metric})});case fi.KEY_METRIC_JOIN_START:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{joinStart:A.metric})});case fi.AVOID_JOIN_START:return nr(nr({},f),{},{avoidJoinStart:A.avoidJoinStart});case fi.KEY_METRIC_JOIN_END:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{joinEnd:A.metric})});case fi.KEY_METRIC_REQUEST_AP_START:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{requestAPStart:A.metric})});case fi.KEY_METRIC_REQUEST_AP_END:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{requestAPEnd:A.metric})});case fi.KEY_METRIC_JOIN_GATEWAY_START:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{joinGatewayStart:A.metric})});case fi.KEY_METRIC_JOIN_GATEWAY_END:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{joinGatewayEnd:A.metric})});case fi.KEY_METRIC_PEER_CONNECTION_START:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{peerConnectionStart:A.metric})});case fi.KEY_METRIC_PEER_CONNECTION_END:return nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{peerConnectionEnd:A.metric})});case fi.KEY_METRIC_PUBLISH:{const v=f.keyMetrics.publish,E=v.findIndex(S=>S.trackId===A.metric.trackId);return-1!==E?(v[E]=nr(nr({},v[E]),A.metric),nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{publish:[...v]})})):nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{publish:[...f.keyMetrics.publish,A.metric]})})}case fi.KEY_METRIC_SUBSCRIBE:{const v=f.keyMetrics.subscribe,E=v.findIndex(S=>S.userId===A.metric.userId&&S.type===A.metric.type);return-1!==E?(v[E]=nr(nr({},v[E]),A.metric),nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{subscribe:[...v]})})):nr(nr({},f),{},{keyMetrics:nr(nr({},f.keyMetrics),{},{subscribe:[...f.keyMetrics.subscribe,A.metric]})})}case fi.SET_CLOUD_PROXY_SERVER_MODE:return f.cloudProxyServerMode=A.mode,f;case fi.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof A.index?f.joinChannelServiceRecords=[...f.joinChannelServiceRecords,A.record]:(f.joinChannelServiceRecords[A.index]=nr(nr({},f.joinChannelServiceRecords[A.index]),A.record),f.joinChannelServiceRecords=[...f.joinChannelServiceRecords]),f;case fi.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return f.joinChannelServiceRecords=[],f;case fi.RESET_KEY_METRICS:return f.keyMetrics={publish:[],subscribe:[]},f;default:return f}},this.store=W6(this.reducer)}set sessionId(o){this.store.dispatch({type:fi.SET_SESSION_ID,sessionId:o})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(o){this.store.dispatch({type:fi.SET_P2P_ID,p2pId:o})}get p2pId(){return this.store.getState().p2pId}set uid(o){this.store.dispatch({type:fi.SET_UID,uid:o})}get uid(){return this.store.getState().uid}set pubId(o){this.store.dispatch({type:fi.SET_PUB_ID,pubId:o})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(o){this.store.dispatch({type:fi.SET_CLOUD_PROXY_SERVER_MODE,mode:o})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:fi.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:fi.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(o){this.store.dispatch({type:fi.AVOID_JOIN_START,avoidJoinStart:o})}joinEnd(){this.store.dispatch({type:fi.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:fi.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:fi.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:fi.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:fi.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:fi.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:fi.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(o,s,c,h){this.store.dispatch({type:fi.KEY_METRIC_PUBLISH,metric:nr(nr({trackId:o,type:s},c&&{publishStart:c}),h&&{publishEnd:h})})}subscribe(o,s,c,h,g){this.store.dispatch({type:fi.KEY_METRIC_SUBSCRIBE,metric:nr(nr(nr({userId:o,type:s},c&&{subscribeStart:c}),h&&{subscribeEnd:h}),g&&{firstFrame:g})})}massSubscribe(o,s,c,h){o.forEach(g=>{this.store.dispatch({type:fi.KEY_METRIC_SUBSCRIBE,metric:nr(nr(nr({userId:g.userId,type:g.type},s&&{subscribeStart:s}),c&&{subscribeEnd:c}),h&&{firstFrame:h})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(o,s){"gateway"===o.service&&Array.isArray(o.urls)&&(o.urls=o.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof s?(this.store.dispatch({type:fi.RECORD_JOIN_CHANNEL_SERVICE,record:nr(nr({},o),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(s<0||s>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:fi.RECORD_JOIN_CHANNEL_SERVICE,record:o,index:s}),s)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:fi.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:fi.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let $l;const G1=()=>void 0!==window.isSecureContext;class bV{constructor(o,s){X(this,"time",void 0),X(this,"sequence",void 0),X(this,"name",void 0),X(this,"elapse",void 0),this.name=o,this.time=performance.now(),this.sequence=KF[s].indexOf(o)}setElapse(o){this.elapse=o}}const cW=new Map;class uW{constructor(o,s){X(this,"records",[]),X(this,"_id",void 0),X(this,"_group",void 0),X(this,"_localTimeStamp",void 0),X(this,"_performanceTimeStamp",void 0),this._id=o,this._group=s,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(o){const s=new bV(o,this._group);-1===s.sequence&&Q.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(s);const c=this.records.find(h=>h.sequence===s.sequence-1);c&&s.setElapse(s.time-c.time)}getRecord(o){return this.records.find(s=>s&&s.name===o)}resetRecords(){this.records.length=0}}function dW(n){let o={};e:for(;!wV(n);){let s=hg(n);switch(s>>>3){case 0:break e;case 1:o.requestId=$6(n,hg(n));break;case 2:o.requestType=hg(n)>>>0;break;case 3:o.scorePorn=OV(n);break;case 4:o.scoreSexy=OV(n);break;case 5:o.scoreNeutral=OV(n);break;case 6:o.requestScene=hg(n)>>>0;break;case 7:o.scene=hg(n)>>>0;break;default:CV(n,7&s)}}return o}function mL(n,o){let s=n.service;void 0!==s&&(mi(o,8),mi(o,s));let c=n.vendor;void 0!==c&&(mi(o,16),mi(o,c));let h=n.token;void 0!==h&&(mi(o,26),Pp(o,h));let g=n.callbackUrl;void 0!==g&&(mi(o,34),Pp(o,g))}function hW(n){let o=hg(n),s=n.limit;return n.limit=n.offset+o,s}function CV(n,o){switch(o){case 0:for(;128&RV(n););break;case 2:IV(n,hg(n));break;case 5:IV(n,4);break;case 1:IV(n,8);break;default:throw new Error("Unimplemented type: "+o)}}let z6=new Float32Array(1);new Uint8Array(z6.buffer);let gL=new Float64Array(1),As=new Uint8Array(gL.buffer);function Jf(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let Y6=[];function q6(){const n=Y6.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function J6(n){Y6.push(n)}function IV(n,o){if(n.offset+o>n.limit)throw new Error("Skip past limit");n.offset+=o}function wV(n){return n.offset>=n.limit}function iv(n,o){let s=n.bytes,c=n.offset,h=n.limit,g=c+o;if(g>s.length){let f=new Uint8Array(2*g);f.set(s),n.bytes=f}return n.offset=g,g>h&&(n.limit=g),c}function TV(n,o){let s=n.offset;if(s+o>n.limit)throw new Error("Read past limit");return n.offset+=o,s}function $6(n,o){let s=TV(n,o),c=String.fromCharCode,h=n.bytes,g="\ufffd",f="";for(let A=0;A<o;A++){let v,E,S,w,R=h[A+s];0==(128&R)?f+=c(R):192==(224&R)?A+1>=o?f+=g:(v=h[A+s+1],128!=(192&v)?f+=g:(w=(31&R)<<6|63&v,w<128?f+=g:(f+=c(w),A++))):224==(240&R)?A+2>=o?f+=g:(v=h[A+s+1],E=h[A+s+2],32896!=(49344&(v|E<<8))?f+=g:(w=(15&R)<<12|(63&v)<<6|63&E,w<2048||w>=55296&&w<=57343?f+=g:(f+=c(w),A+=2))):240==(248&R)?A+3>=o?f+=g:(v=h[A+s+1],E=h[A+s+2],S=h[A+s+3],8421504!=(12632256&(v|E<<8|S<<16))?f+=g:(w=(7&R)<<18|(63&v)<<12|(63&E)<<6|63&S,w<65536||w>1114111?f+=g:(w-=65536,f+=c(55296+(w>>10),56320+(1023&w)),A+=3))):f+=g}return f}function Pp(n,o){let s=o.length,c=0;for(let f=0;f<s;f++){let A=o.charCodeAt(f);A>=55296&&A<=56319&&f+1<s&&(A=(A<<10)+o.charCodeAt(++f)-56613888),c+=A<128?1:A<2048?2:A<65536?3:4}mi(n,c);let h=iv(n,c),g=n.bytes;for(let f=0;f<s;f++){let A=o.charCodeAt(f);A>=55296&&A<=56319&&f+1<s&&(A=(A<<10)+o.charCodeAt(++f)-56613888),A<128?g[h++]=A:(A<2048?g[h++]=A>>6&31|192:(A<65536?g[h++]=A>>12&15|224:(g[h++]=A>>18&7|240,g[h++]=A>>12&63|128),g[h++]=A>>6&63|128),g[h++]=63&A|128)}}function pW(n,o){let s=iv(n,o.limit),c=n.bytes,h=o.bytes;for(let g=0,f=o.limit;g<f;g++)c[g+s]=h[g]}function RV(n){return n.bytes[TV(n,1)]}function X6(n,o){let s=iv(n,1);n.bytes[s]=o}function OV(n){let o=TV(n,8),s=n.bytes;return As[0]=s[o++],As[1]=s[o++],As[2]=s[o++],As[3]=s[o++],As[4]=s[o++],As[5]=s[o++],As[6]=s[o++],As[7]=s[o++],gL[0]}function DV(n,o){let s=iv(n,8),c=n.bytes;gL[0]=o,c[s++]=As[0],c[s++]=As[1],c[s++]=As[2],c[s++]=As[3],c[s++]=As[4],c[s++]=As[5],c[s++]=As[6],c[s++]=As[7]}function hg(n){let o,s=0,c=0;do{o=RV(n),s<32&&(c|=(127&o)<<s),s+=7}while(128&o);return c}function mi(n,o){for(o>>>=0;o>=128;)X6(n,127&o|128),o>>>=7;X6(n,o)}function $f(n,o){let s=o.low>>>0,c=(o.low>>>28|o.high<<4)>>>0,h=o.high>>>24,g=0===h?0===c?s<16384?s<128?1:2:s<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:h<128?9:10,f=iv(n,g),A=n.bytes;switch(g){case 10:A[f+9]=h>>>7&1;case 9:A[f+8]=9!==g?128|h:127&h;case 8:A[f+7]=8!==g?c>>>21|128:c>>>21&127;case 7:A[f+6]=7!==g?c>>>14|128:c>>>14&127;case 6:A[f+5]=6!==g?c>>>7|128:c>>>7&127;case 5:A[f+4]=5!==g?128|c:127&c;case 4:A[f+3]=4!==g?s>>>21|128:s>>>21&127;case 3:A[f+2]=3!==g?s>>>14|128:s>>>14&127;case 2:A[f+1]=2!==g?s>>>7|128:s>>>7&127;case 1:A[f]=1!==g?128|s:127&s}}var kV={};Object.defineProperty(kV,"__esModule",{value:!0});var Z6=function(){function n(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return n.hashStr=function(o,s){return void 0===s&&(s=!1),this.onePassHasher.start().appendStr(o).end(s)},n.hashAsciiStr=function(o,s){return void 0===s&&(s=!1),this.onePassHasher.start().appendAsciiStr(o).end(s)},n._hex=function(o){var s,c,h,g,f=n.hexChars,A=n.hexOut;for(g=0;g<4;g+=1)for(c=8*g,s=o[g],h=0;h<8;h+=2)A[c+1+h]=f.charAt(15&s),A[c+0+h]=f.charAt(15&(s>>>=4)),s>>>=4;return A.join("")},n._md5cycle=function(o,s){var c=o[0],h=o[1],g=o[2],f=o[3];h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[0]-680876936|0)<<7|c>>>25)+h|0)&h|~c&g)+s[1]-389564586|0)<<12|f>>>20)+c|0)&c|~f&h)+s[2]+606105819|0)<<17|g>>>15)+f|0)&f|~g&c)+s[3]-1044525330|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[4]-176418897|0)<<7|c>>>25)+h|0)&h|~c&g)+s[5]+1200080426|0)<<12|f>>>20)+c|0)&c|~f&h)+s[6]-1473231341|0)<<17|g>>>15)+f|0)&f|~g&c)+s[7]-45705983|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[8]+1770035416|0)<<7|c>>>25)+h|0)&h|~c&g)+s[9]-1958414417|0)<<12|f>>>20)+c|0)&c|~f&h)+s[10]-42063|0)<<17|g>>>15)+f|0)&f|~g&c)+s[11]-1990404162|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[12]+1804603682|0)<<7|c>>>25)+h|0)&h|~c&g)+s[13]-40341101|0)<<12|f>>>20)+c|0)&c|~f&h)+s[14]-1502002290|0)<<17|g>>>15)+f|0)&f|~g&c)+s[15]+1236535329|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[1]-165796510|0)<<5|c>>>27)+h|0)&g|h&~g)+s[6]-1069501632|0)<<9|f>>>23)+c|0)&h|c&~h)+s[11]+643717713|0)<<14|g>>>18)+f|0)&c|f&~c)+s[0]-373897302|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[5]-701558691|0)<<5|c>>>27)+h|0)&g|h&~g)+s[10]+38016083|0)<<9|f>>>23)+c|0)&h|c&~h)+s[15]-660478335|0)<<14|g>>>18)+f|0)&c|f&~c)+s[4]-405537848|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[9]+568446438|0)<<5|c>>>27)+h|0)&g|h&~g)+s[14]-1019803690|0)<<9|f>>>23)+c|0)&h|c&~h)+s[3]-187363961|0)<<14|g>>>18)+f|0)&c|f&~c)+s[8]+1163531501|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[13]-1444681467|0)<<5|c>>>27)+h|0)&g|h&~g)+s[2]-51403784|0)<<9|f>>>23)+c|0)&h|c&~h)+s[7]+1735328473|0)<<14|g>>>18)+f|0)&c|f&~c)+s[12]-1926607734|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[5]-378558|0)<<4|c>>>28)+h|0)^h^g)+s[8]-2022574463|0)<<11|f>>>21)+c|0)^c^h)+s[11]+1839030562|0)<<16|g>>>16)+f|0)^f^c)+s[14]-35309556|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[1]-1530992060|0)<<4|c>>>28)+h|0)^h^g)+s[4]+1272893353|0)<<11|f>>>21)+c|0)^c^h)+s[7]-155497632|0)<<16|g>>>16)+f|0)^f^c)+s[10]-1094730640|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[13]+681279174|0)<<4|c>>>28)+h|0)^h^g)+s[0]-358537222|0)<<11|f>>>21)+c|0)^c^h)+s[3]-722521979|0)<<16|g>>>16)+f|0)^f^c)+s[6]+76029189|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[9]-640364487|0)<<4|c>>>28)+h|0)^h^g)+s[12]-421815835|0)<<11|f>>>21)+c|0)^c^h)+s[15]+530742520|0)<<16|g>>>16)+f|0)^f^c)+s[2]-995338651|0)<<23|h>>>9)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[0]-198630844|0)<<6|c>>>26)+h|0)|~g))+s[7]+1126891415|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[14]-1416354905|0)<<15|g>>>17)+f|0)|~c))+s[5]-57434055|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[12]+1700485571|0)<<6|c>>>26)+h|0)|~g))+s[3]-1894986606|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[10]-1051523|0)<<15|g>>>17)+f|0)|~c))+s[1]-2054922799|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[8]+1873313359|0)<<6|c>>>26)+h|0)|~g))+s[15]-30611744|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[6]-1560198380|0)<<15|g>>>17)+f|0)|~c))+s[13]+1309151649|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[4]-145523070|0)<<6|c>>>26)+h|0)|~g))+s[11]-1120210379|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[2]+718787259|0)<<15|g>>>17)+f|0)|~c))+s[9]-343485551|0)<<21|h>>>11)+g|0,o[0]=c+o[0]|0,o[1]=h+o[1]|0,o[2]=g+o[2]|0,o[3]=f+o[3]|0},n.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this},n.prototype.appendStr=function(o){var s,c,h=this._buffer8,g=this._buffer32,f=this._bufferLength;for(c=0;c<o.length;c+=1){if((s=o.charCodeAt(c))<128)h[f++]=s;else if(s<2048)h[f++]=192+(s>>>6),h[f++]=63&s|128;else if(s<55296||s>56319)h[f++]=224+(s>>>12),h[f++]=s>>>6&63|128,h[f++]=63&s|128;else{if((s=1024*(s-55296)+(o.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");h[f++]=240+(s>>>18),h[f++]=s>>>12&63|128,h[f++]=s>>>6&63|128,h[f++]=63&s|128}f>=64&&(this._dataLength+=64,n._md5cycle(this._state,g),f-=64,g[0]=g[16])}return this._bufferLength=f,this},n.prototype.appendAsciiStr=function(o){for(var s,c=this._buffer8,h=this._buffer32,g=this._bufferLength,f=0;;){for(s=Math.min(o.length-f,64-g);s--;)c[g++]=o.charCodeAt(f++);if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.appendByteArray=function(o){for(var s,c=this._buffer8,h=this._buffer32,g=this._bufferLength,f=0;;){for(s=Math.min(o.length-f,64-g);s--;)c[g++]=o[f++];if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.getState=function(){var o=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[o[0],o[1],o[2],o[3]]}},n.prototype.setState=function(o){var s,c=o.buffer,h=o.state,g=this._state;for(this._dataLength=o.length,this._bufferLength=o.buflen,g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],s=0;s<c.length;s+=1)this._buffer8[s]=c.charCodeAt(s)},n.prototype.end=function(o){void 0===o&&(o=!1);var s=this._bufferLength,c=this._buffer8,h=this._buffer32,g=1+(s>>2);this._dataLength+=s;var f=8*this._dataLength;if(c[s]=128,c[s+1]=c[s+2]=c[s+3]=0,h.set(n.buffer32Identity.subarray(g),g),s>55&&(n._md5cycle(this._state,h),h.set(n.buffer32Identity)),f<=4294967295)h[14]=f;else{var A=f.toString(16).match(/(.*?)(.{0,8})$/);if(null===A)return;var v=parseInt(A[2],16),E=parseInt(A[1],16)||0;h[14]=v,h[15]=E}return n._md5cycle(this._state,h),o?this._state:n._hex(this._state)},n.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),n.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.hexChars="0123456789abcdef",n.hexOut=[],n.onePassHasher=new n,n}(),e7=kV.Md5=Z6;if("5d41402abc4b2a76b9719d911017c592"!==Z6.hashStr("hello"))throw new Error("Md5 self test failed.");const fW=function(){var n=V(function*(o,s,c){return yield(h=V(function*(g,f,A){const E=new Uint8Array(e7.hashStr(""+f+A,!0).buffer).slice(0,16),S=E.slice(0,12),w=yield window.crypto.subtle.importKey("raw",E,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:S},w,g))}),function(g,f,A){return h.apply(this,arguments)})(o.buffer,s,c);var h});return function(s,c,h){return n.apply(this,arguments)}}();function t7(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}const mW=new Map([["moderation",1],["supervise",2],["all",3]]);class _L extends D{get connectionState(){return this._connectionState}set connectionState(o){if(this._connectionState===o)return;const s=this._connectionState;this._connectionState=o,this.emit(rs.CONNECTION_STATE_CHANGE,s,o)}get quality(){return this._quality}set quality(o){this._quality=o>1?1:o<.1?.1:o,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(o){super(),X(this,"name","AgoraRTCVideoContentInspect"),X(this,"_connectionState",hl.CONNECTING),X(this,"_innerConnectionState",void 0),X(this,"sequence",0),X(this,"inspectStartTime",void 0),X(this,"workerManagerConnection",void 0),X(this,"workerConnection",void 0),X(this,"workerMessageLengthLimit",void 0),X(this,"inspectIntervalMinimum",void 0),X(this,"qualityRatio",void 0),X(this,"_connectInfo",void 0),X(this,"_cancelTokenSource",I.CancelToken.source()),X(this,"_retryConfig",void 0),X(this,"wmSequence",0),X(this,"inspectInterval",void 0),X(this,"inspectTimer",null),X(this,"ossFilePrefix",void 0),X(this,"extraInfo",void 0),X(this,"inspectType","all"),X(this,"_quality",1),X(this,"qualityTimer",null),X(this,"_inspectId",void 0),X(this,"_needWorkUrlOnly",!1),X(this,"inspectImage",()=>{if(this.connectionState!==hl.CONNECTED)throw new F(P.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==hl.CONNECTED)return Q.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void qe("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=_s(5,"inspect-"),this.workerMessageLengthLimit=mt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=mt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=mt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=o.interval,this.ossFilePrefix=o.ossFilePrefix,this.extraInfo=o.extraInfo,this.inspectType=o.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new aS("worker-manager-"+this._inspectId,Z),this.on(rs.STATE_CHANGE,(s,c)=>{this._innerConnectionState=s,Q.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Hl[s]," ").concat(c||"")),Yn("debug",["Inspect",this._inspectId],rs.STATE_CHANGE,"".concat(Hl[s]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new aS("worker-"+this._inspectId,Z),this.handleWorkerEvents()}init(o,s){var c=this;return V(function*(){c.emit(rs.STATE_CHANGE,Hl.CONNECT_AP),c._connectInfo=o;const h=c._cancelTokenSource.token;return c._retryConfig=s,new jt((g,f)=>{c.on(rs.CONNECTION_STATE_CHANGE,(A,v)=>{v===hl.CONNECTED&&g()}),c.requestAP(o,h,s).then(A=>{c.connectWorkerManager(A)}).catch(A=>{f(A)})})})()}requestAP(o,s,c){var h=this;return V(function*(){const g=mt("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),f=yield function(v,E,S,w){let{appId:R,areaCode:x,cname:W,sid:K,token:ne,uid:le}=E;MU++;const me="image_moderation_api",be={service_name:me,json_body:JSON.stringify({appId:R,areaCode:x,cname:W,command:"allocateEdge",requestId:MU,seq:MU,sid:K,token:ne,ts:Date.now(),uid:le+""})};let ke,Ze,Nt=v[0];return oe(V(function*(){ke=Date.now();const Vt=yield Rh(Nt,{data:be,cancelToken:S,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Ze=Date.now()-ke,0!==Vt.code){const dn=new F(P.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Vt.code,{retry:!0,responseTime:Ze});throw Q.error(dn.toString()),wt("error",["AjaxAPI"],"requestImageInspectAP",void 0,dn.toString()),dn}const kt=JSON.parse(Vt.json_body);if(200!==kt.code){const dn=new F(P.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(kt.code,", reason: ").concat(kt.reason),{code:kt.code,responseTime:Ze});throw Q.error(dn.toString()),wt("error",["AjaxAPI"],"requestImageInspectAP",void 0,dn.toString()),dn}if(!kt.servers||!Array.isArray(kt.servers)||0===kt.servers.length){const dn=new F(P.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:kt.code,responseTime:Ze});throw Q.error(dn.toString()),wt("error",["AjaxAPI"],"requestImageInspectAP",void 0,dn.toString()),dn}const Sn=mt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),ln=mt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:kt.servers.map(dn=>{let{address:It,wss:He}=dn;if(It&&He)return"wss://".concat(It.replace(/\./g,"-"),".").concat(Sn,":").concat(ln||He)}).filter(dn=>!!dn),workerToken:kt.workerToken,vid:kt.vid,responseTime:Ze}}),(Vt,kt)=>(Xt.apworkerEvent(K,{success:!0,sc:200,serviceName:me,responseDetail:JSON.stringify(Vt.addressList),firstSuccess:0===kt,responseTime:Ze,serverIp:v[kt%v.length]}),!1),(Vt,kt)=>(Xt.apworkerEvent(K,{success:!1,sc:Vt.data&&Vt.data.code||200,serviceName:me,responseTime:Ze,serverIp:v[kt%v.length]}),!!(Vt.code!==P.OPERATION_ABORTED&&Vt.code!==P.UNEXPECTED_RESPONSE||Vt.data&&Vt.data.retry)&&(Nt=v[(kt+1)%v.length],!0)),w)}(g,o,s,c);h.emit(rs.STATE_CHANGE,Hl.AP_CONNECTED);const{addressList:A}=f;return h.wmSequence++,A})()}connectWorkerManager(o){var s=arguments,c=this;return V(function*(){c._needWorkUrlOnly=s.length>1&&void 0!==s[1]&&s[1],c.emit(rs.STATE_CHANGE,Hl.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(o,1e4)})()}connectWorker(o){var s=this;return V(function*(){yield s.workerConnection.init([o])})()}handleWorkerManagerEvents(){var o=this;this.workerManagerConnection.on(Pr.CONNECTED,V(function*(){o.emit(rs.STATE_CHANGE,Hl.WORKER_MANAGER_CONNECTED,o.workerManagerConnection.url),o.workerManagerConnection.sendMessage({appId:o._connectInfo.appId,cname:o._connectInfo.cname,uid:o._connectInfo.uid+"",sdkVersion:"4.12.1",sid:o._connectInfo.sid,seq:o.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Pr.CLOSED,()=>{this._innerConnectionState<Hl.GET_WORKER_MANAGER_RESPONSE&&(Q.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),Yn("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Pr.FAILED,()=>{this._innerConnectionState<Hl.GET_WORKER_MANAGER_RESPONSE&&(Q.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),Yn("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Pr.RECONNECTING,()=>{this._innerConnectionState<Hl.GET_WORKER_MANAGER_RESPONSE&&(Q.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),Yn("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Pr.ON_MESSAGE,function(){var s=V(function*(c){o.emit(rs.STATE_CHANGE,Hl.GET_WORKER_MANAGER_RESPONSE);const h=o.workerManagerConnection.url;o.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw Q.error("[".concat(o._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),qe("error",o,"Unexpected code ".concat(g.code," from worker manager")),new F(P.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&h))throw Q.error("[".concat(o._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),qe("error",o,"Unexpected content from worker manager : "+JSON.stringify(g)),new F(P.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const f=mt("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,A=h.replace(/:\d+\/?$/,":".concat(f));o.emit(rs.STATE_CHANGE,Hl.CONNECT_WORKER,A),o._needWorkUrlOnly?o.emit(rs.REQUEST_NEW_WORKER_URL,A):yield o.connectWorker(A)}});return function(c){return s.apply(this,arguments)}}()),this.workerManagerConnection.on(Pr.WILL_RECONNECT,(s,c)=>{c(s)}),this.workerManagerConnection.on(Pr.REQUEST_NEW_URLS,(s,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s).catch(c)})}handleWorkerEvents(){var o=this;this.workerConnection.on(Pr.CONNECTED,V(function*(){o.emit(rs.STATE_CHANGE,Hl.WORKER_CONNECTED,o.workerConnection.url),o.connectionState=hl.CONNECTED})),this.workerConnection.on(Pr.ON_MESSAGE,function(){var s=V(function*(c){if(c.data instanceof ArrayBuffer){const g=function lW(n){return function(s){let c={};e:for(;!wV(s);){let h=hg(s);switch(h>>>3){case 0:break e;case 1:c.code=hg(s);break;case 2:c.msg=$6(s,hg(s));break;case 3:{let g=hW(s);c.data=dW(s),s.limit=g;break}default:CV(s,7&h)}}return c}({bytes:o=n,offset:0,limit:o.length});var o}(new Uint8Array(c.data));if(mt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&Q.debug("[".concat(o._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if("supervise"===o.inspectType)return void o.emit(rs.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var h;const f={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},A=nh(h=Object.keys(f)).call(h,(E,S)=>f[E]>f[S]?E:S,"porn"),v=Object.keys(f).find(E=>E===A);o.emit(rs.INSPECT_RESULT,v)}else o.emit(rs.INSPECT_RESULT,void 0,new F(P.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else o.emit(rs.INSPECT_RESULT,void 0,new F(P.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else Q.error("[".concat(o._inspectId,"] Unexpected message type from worker")),qe("error",o,"Unexpected message type from worker"),o.emit(rs.INSPECT_RESULT,void 0,new F(P.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return s.apply(this,arguments)}}()),this.workerConnection.on(Pr.CLOSED,()=>{this.connectionState=hl.CLOSED}),this.workerConnection.on(Pr.FAILED,()=>{this.connectionState=hl.CLOSED}),this.workerConnection.on(Pr.RECONNECTING,()=>{this.connectionState=this.connectionState===hl.CONNECTED?hl.RECONNECTING:hl.CONNECTING}),this.workerConnection.on(Pr.WILL_RECONNECT,(s,c)=>{"recover"===s&&c(s),c("tryNext")}),this.workerConnection.on(Pr.REQUEST_NEW_URLS,(s,c)=>{this.workerManagerConnection.close(),this.once(rs.REQUEST_NEW_WORKER_URL,h=>{s([h])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(h=>{this.connectWorkerManager(h,!0)}).catch(h=>{c(h)})})}static intToLong(o){return{low:o|=0,high:o>>31,unsigned:o>=0}}requestToInspectImage(){var o=this;return V(function*(){o.sequence++;const s=Ty(o,rs.CLIENT_LOCAL_VIDEO_TRACK),c={appId:o._connectInfo.appId,cname:o._connectInfo.cname,cid:o._connectInfo.cid,sid:o._connectInfo.sid,uid:o._connectInfo.uid,vid:o._connectInfo.vid};if(s){if(!s.isPlaying)return void o.emit(rs.INSPECT_RESULT,void 0,new F(P.INVALID_OPERATION,"Only the track being played can be inspected"));const h=yield o.generateRequestData(s,c);o.workerConnection.sendMessage(h,!0,!0)}else o.emit(rs.INSPECT_RESULT,void 0,new F(P.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(o,s){var c=this;return V(function*(){let{appId:h,cname:g,cid:f,vid:A,sid:v,uid:E}=s;const S=Date.now(),w=yield o.getCurrentFrameImage("image/jpeg",c.quality),R=yield fW(w,h,g),x=c.sequence+"-"+f+"-"+E+"-"+S+"-"+_s(12,""),W={appId:h,cid:f,cname:g,deviceId:"",elapse:_L.intToLong(Number(S-c.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:w.height,width:w.width,jpg:R,networkType:6,osType:7,requestId:x,sdkVersion:"4.12.1",sequence:c.sequence,sid:v,timestamp:_L.intToLong(S),uid:E,vid:A,service:mW.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete W.callbackData,void 0===c.ossFilePrefix&&delete W.ossFilePrefix;const K=function SV(n){let o=q6();return function(s,c){let h=s.appId;void 0!==h&&(mi(c,10),Pp(c,h));let g=s.cid;void 0!==g&&(mi(c,16),mi(c,g));let f=s.cname;void 0!==f&&(mi(c,26),Pp(c,f));let A=s.deviceId;void 0!==A&&(mi(c,34),Pp(c,A));let v=s.elapse;void 0!==v&&(mi(c,40),$f(c,v));let E=s.fileSize;void 0!==E&&(mi(c,48),$f(c,Jf(E)));let S=s.height;void 0!==S&&(mi(c,56),$f(c,Jf(S)));let w=s.jpg;void 0!==w&&(mi(c,66),mi(c,w.length),function(bn,Ye){let lt=iv(bn,Ye.length);bn.bytes.set(Ye,lt)}(c,w));let R=s.networkType;void 0!==R&&(mi(c,72),$f(c,Jf(R)));let x=s.osType;void 0!==x&&(mi(c,80),$f(c,Jf(x)));let W=s.requestId;void 0!==W&&(mi(c,90),Pp(c,W));let K=s.sdkVersion;void 0!==K&&(mi(c,98),Pp(c,K));let ne=s.sequence;void 0!==ne&&(mi(c,104),$f(c,Jf(ne)));let le=s.sid;void 0!==le&&(mi(c,114),Pp(c,le));let me=s.timestamp;void 0!==me&&(mi(c,120),$f(c,me));let be=s.uid;void 0!==be&&(mi(c,128),mi(c,be));let ke=s.vid;void 0!==ke&&(mi(c,136),mi(c,ke));let Ze=s.width;void 0!==Ze&&(mi(c,144),$f(c,Jf(Ze)));let Nt=s.service;void 0!==Nt&&(mi(c,152),mi(c,Nt));let Vt=s.callbackData;void 0!==Vt&&(mi(c,162),Pp(c,Vt));let kt=s.jpgEncryption;void 0!==kt&&(mi(c,168),mi(c,kt));let Sn=s.requestType;void 0!==Sn&&(mi(c,176),mi(c,Sn));let ln=s.scorePorn;void 0!==ln&&(mi(c,185),DV(c,ln));let dn=s.scoreSexy;void 0!==dn&&(mi(c,193),DV(c,dn));let It=s.scoreNeutral;void 0!==It&&(mi(c,201),DV(c,It));let He=s.scene;void 0!==He&&(mi(c,208),mi(c,He));let ct=s.ossFilePrefix;void 0!==ct&&(mi(c,218),Pp(c,ct));let bt=s.serviceVendor;if(void 0!==bt)for(let bn of bt){mi(c,226);let Ye=q6();mL(bn,Ye),mi(c,Ye.limit),pW(c,Ye),J6(Ye)}}(n,o),function(s){let c=s.bytes,h=s.limit;return c.length===h?c:c.subarray(0,h)}(o)}(W);if(K.byteLength<c.workerMessageLengthLimit){if(mt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const ne=function(le){for(var me=1;me<arguments.length;me++){var be=null!=arguments[me]?arguments[me]:{};me%2?t7(Object(be),!0).forEach(function(ke){X(le,ke,be[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(be)):t7(Object(be)).forEach(function(ke){Object.defineProperty(le,ke,Object.getOwnPropertyDescriptor(be,ke))})}return le}({},W);delete ne.jpg,Q.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(ne)),qe("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(ne)))}return K}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(o,{appId:h,cname:g,cid:f,vid:A,sid:v,uid:E})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=I.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=hl.CLOSED,this.emit(rs.STATE_CHANGE,Hl.CLOSED)}}var n7,r7,PV,vL,NV,i7,gW,_W,vW,Fk,AW,r;function t(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function e(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?t(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let a=(n7=no("AgoraRTCClient","store.clientId"),r7=QD({report:Xt}),PV=QD(),vL=QD({report:Xt}),NV=HD(),i7=QD({report:Xt}),gW=HD({report:Xt}),_W=HD({report:Xt}),vW=HD({report:Xt}),Fk=QD({reportResult:!0,report:Xt}),n7((tr((r=class extends D{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(n){var o;let s;if(super(),o=this,X(this,"store",void 0),X(this,"_uid",void 0),X(this,"_channelName",void 0),X(this,"_uintUid",void 0),X(this,"_users",[]),X(this,"_codec",void 0),X(this,"_mode",void 0),X(this,"_config",void 0),X(this,"_clientId",void 0),X(this,"_appId",void 0),X(this,"_sessionId",null),X(this,"_key",void 0),X(this,"_joinInfo",void 0),X(this,"_gateway",void 0),X(this,"_statsCollector",void 0),X(this,"_configDistribute",void 0),X(this,"_leaveMutex",new Nu("client-leave")),X(this,"_publishMutex",new Nu("client-publish")),X(this,"_renewTokenMutex",new Nu("client-renewtoken")),X(this,"_subscribeMutex",new Nu("client-subscribe")),X(this,"_encryptionMode","none"),X(this,"_encryptionSecret",null),X(this,"_encryptionSalt",null),X(this,"_proxyServer",void 0),X(this,"_performanceRecorder",void 0),X(this,"_turnServer",{servers:[],mode:"auto"}),X(this,"_cloudProxyServerMode","disabled"),X(this,"_isDualStreamEnabled",!1),X(this,"_defaultStreamFallbackType",void 0),X(this,"_lowStreamParameter",void 0),X(this,"_streamFallbackTypeCacheMap",new Map),X(this,"_remoteStreamTypeCacheMap",new Map),X(this,"_axiosCancelSource",I.CancelToken.source()),X(this,"_audioVolumeIndicationInterval",void 0),X(this,"_networkQualityInterval",void 0),X(this,"_userOfflineTimeout",void 0),X(this,"_streamRemovedTimeout",void 0),X(this,"_injectStreamingClient",void 0),X(this,"_liveTranscodeStreamingClient",void 0),X(this,"_liveRawStreamingClient",void 0),X(this,"_channelMediaRelayClient",void 0),X(this,"_networkQualitySensitivity","normal"),X(this,"_p2pChannel",void 0),X(this,"_useLocalAccessPoint",!1),X(this,"_joinAndNotLeaveYet",!1),X(this,"_numberOfJoinCount",0),X(this,"_remoteDefaultVideoStreamType",void 0),X(this,"_inspect",void 0),X(this,"_handleLocalTrackEnable",(c,h,g)=>{this.publish(c,!1).then(h).catch(g)}),X(this,"_handleLocalTrackDisable",(c,h,g)=>{this.unpublish(c).then(h).catch(g)}),X(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(Q.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),qe("error",this,"StringUID is Mixed with UintUID"));const h=this._users.find(g=>g.uid===c.uid);if(h)h._trust_in_room_=!0;else{const g=new Gx(c.uid,c.uint_id||c.uid);this._users.push(g),Q.debug("[".concat(this._clientId,"] user online"),c.uid),Tn("info",this,"user-joined",{uid:c.uid}),this.emit(_r.USER_JOINED,g)}}),X(this,"_handleUserOffline",c=>{const h=this._users.find(g=>g.uid===c.uid);h&&(this._handleRemoveStream(c),tU(this._users,h),this._remoteStreamTypeCacheMap.delete(h.uid),this._streamFallbackTypeCacheMap.delete(h.uid),Q.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),Tn("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(_r.USER_LEAVED,h,c.reason))}),X(this,"_handleAddAudioOrVideoStream",(c,h,g,f,A,v,E)=>{const S=this._users.find(R=>R.uid===h);if(!S)return Q.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void Yt("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");Q.debug("[".concat(this._clientId,"] stream added with uid ").concat(h,", type ").concat(c)),Yt("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:h,mediaType:c});const w="audio"===c?S.hasAudio:S.hasVideo;S._uintid||(S._uintid=A||h),"audio"===c?S._trust_audio_stream_added_state_=!0:S._trust_video_stream_added_state_=!0,"audio"===c?(S._audio_added_=!0,void 0!==g&&(S._audioSSRC=g),void 0!==f&&(S._cname=f),v&&(S._audioOrtc=v)):(S._video_added_=!0,void 0!==g&&(S._videoSSRC=g),void 0!==f&&(S._cname=f),void 0!==E&&(S._rtxSsrcId=E),v&&(S._videoOrtc=v)),("audio"===c?S.hasAudio:S.hasVideo)&&!w&&(Q.info("[".concat(this._clientId,"] remote user ").concat(S.uid," published ").concat(c)),qe("info",this,"remote user ".concat(S.uid," published ").concat(c)),Tn("info",this,"user-published",{uid:S.uid,mediaType:c}),this.emit(_r.USER_PUBLISHED,S,c)),"video"===c?Xt.onGatewayStream(this._sessionId,Qa.ON_ADD_VIDEO_STREAM,jo.ON_ADD_VIDEO_STREAM,{peer:A||h}):Xt.onGatewayStream(this._sessionId,Qa.ON_ADD_AUDIO_STREAM,jo.ON_ADD_AUDIO_STREAM,{peer:A||h}),this._p2pChannel.remoteMediaSsrcChanged(S,c,g)&&this._p2pChannel.unsubscribe(S,c,!0).then(()=>{Q.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(S.uid," after rejoin because SSRC id changed.")),this._subscribe(S,c,!0).catch(R=>{Q.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),qe("error",this,"resubscribe error: ".concat(R.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(S,c)&&(Q.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(S.uid," after reconnect.")),this._subscribe(S,c,!0).catch(R=>{Q.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),qe("error",this,"resubscribe error: ".concat(R.toString()))}))}),X(this,"_handleRemoveStream",c=>{const h=this._users.find(f=>f.uid===c.uid);if(!h)return Q.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void Yt("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});Q.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),Yt("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};h.hasAudio&&h.hasVideo?g=()=>{Q.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Tn("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(_r.USER_UNPUBLISHED,h,"audio"),Q.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Tn("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(_r.USER_UNPUBLISHED,h,"video")}:h.hasVideo?g=()=>{Q.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),Tn("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(_r.USER_UNPUBLISHED,h,"video")}:h.hasAudio&&(g=()=>{Q.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),Tn("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(_r.USER_UNPUBLISHED,h,"audio")}),h._trust_audio_stream_added_state_=!0,h._trust_video_stream_added_state_=!0,h._audio_added_=!1,h._video_added_=!1,this._p2pChannel.unsubscribe(h).then(f=>{if(f)return this._gateway.unsubscribe(f,h.uid)}),h._audioSSRC=void 0,h._videoSSRC=void 0,h._audioOrtc=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0,Xt.onGatewayStream(this._sessionId,Qa.ON_REMOVE_STREAM,jo.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),X(this,"_handleSetStreamLocalEnable",(c,h,g)=>{const f=this._users.find(E=>E.uid===h);if(!f)return Q.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void Yt("error",this,"disable_local_video","can not find target user!(disable_local)");Q.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h)),Yt("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h));const A="audio"===c?f.hasAudio:f.hasVideo;if("audio"===c){f._trust_audio_enabled_state_=!0;const E=f._audio_enabled_;if(f._audio_enabled_=g,f._audio_enabled_===E)return;{const S=f._audio_enabled_?"enable-local-audio":"disable-local-audio";Q.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(h,", msg: ").concat(S)),Wn("debug",this,"user-info-updated",{uid:h,msg:S}),this.emit(_r.USER_INFO_UPDATED,h,S)}}else{f._trust_video_enabled_state_=!0;const E=f._video_enabled_;if(f._video_enabled_=g,f._video_enabled_===E)return;{const S=f._video_enabled_?"enable-local-video":"disable-local-video";Q.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(h,", msg: ").concat(S)),Wn("debug",this,"user-info-updated",{uid:h,msg:S}),this.emit(_r.USER_INFO_UPDATED,h,S)}}const v="audio"===c?f.hasAudio:f.hasVideo;return A!==v?!A&&v?(Q.info("[".concat(this._clientId,"] remote user ").concat(h," published ").concat(c)),Tn("info",this,"user-published",{uid:h,mediaType:c}),void this.emit(_r.USER_PUBLISHED,f,c)):("video"===c&&f._videoTrack&&f._videoTrack._destroy(),this._p2pChannel.muteRemote(f,c),Q.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished ").concat(c)),Tn("info",this,"user-unpublished",{uid:h,mediaType:c}),void this.emit(_r.USER_UNPUBLISHED,f,c)):void 0}),X(this,"_handleMuteStream",(c,h,g)=>{Q.debug("[".concat(this._clientId,"] receive mute message"),c,h,g),Yt("debug",this,"mute_".concat(h),g);const f=this._users.find(E=>E.uid===c);if(!f)return Q.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void Yt("warning",this,"mute_".concat(h),"can not find remote user, ignore mute event, uid: ".concat(c));const A="audio"===h?f.hasAudio:f.hasVideo;if("audio"===h){f._trust_audio_mute_state_=!0;const E=f._audio_muted_;if(f._audio_muted_=g,f._audio_muted_===E)return;{const S=f._audio_muted_?"mute-audio":"unmute-audio";Q.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(S)),Wn("debug",this,"user-info-updated",{uid:c,msg:S}),this.emit(_r.USER_INFO_UPDATED,c,S)}}else{f._trust_video_mute_state_=!0;const E=f._video_muted_;if(f._video_muted_=g,f._video_muted_===E)return;{const S=f._video_muted_?"mute-video":"unmute-video";Q.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(S)),Wn("debug",this,"user-info-updated",{uid:c,msg:S}),this.emit(_r.USER_INFO_UPDATED,c,S)}}const v="audio"===h?f.hasAudio:f.hasVideo;if(A!==v){if(!A&&v)return("audio"===h?f._audioSSRC:f._videoSSRC)?(Q.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(h)),Tn("info",this,"user-published",{uid:f.uid,mediaType:h}),void this.emit(_r.USER_PUBLISHED,f,h)):void Q.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(h," unmute message  before add stream message, ").concat(h," SSRC doesn't exist yet."));"video"===h&&f._videoTrack&&f._videoTrack._destroy(),this._p2pChannel.muteRemote(f,h),Q.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(h)),Tn("info",this,"user-unpublished",{uid:c,mediaType:h}),this.emit(_r.USER_UNPUBLISHED,f,h)}}),X(this,"_handleP2PLost",function(){var c=V(function*(h){if(Q.debug("[".concat(o._clientId,"] receive p2p lost"),h),Yt("debug",o,"p2p_lost",h),parseInt(h.p2pid,10)!==o.store.p2pId)return Q.warning("P2PLost stream not found",h),void Yt("warning",o,"p2p_lost","P2PLost stream not found, ".concat(h));yield o._p2pChannel.requestReconnect()});return function(h){return c.apply(this,arguments)}}()),X(this,"_handleTokenWillExpire",()=>{Q.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),Yt("debug",this,"token_privilege_will_expire"),this.emit(_r.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),X(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),Q.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),Yn("info",["window",this.store.clientId],Bl()?"beforeunload":"pagehide"))}),X(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(_r.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(_r.NETWORK_QUALITY,c)}),this._codec=n.codec,this._mode=n.mode,this._clientId=_s(5,"client-"),this.store=new aW(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),Q.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Xo," build: ").concat(Ru,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),Wn("info",this,"constructor",{version:Xo,build:Ru,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,h){const g=new uW(c,"join");return cW.set(c,g),g}(this._clientId),n.clientRoleOptions)try{S7(n.clientRoleOptions),s=Object.assign({},n.clientRoleOptions)}catch(c){Q.warning("[".concat(this._clientId,"] ").concat(c.toString())),qe("warning",this,c.toString())}this._statsCollector=new iS(this.store),this._statsCollector.onStatsException=(c,h,g)=>{Q.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(h,", uid: ").concat(g)),Tn("debug",this,_r.EXCEPTION,{code:c,message:h,uid:g}),this.emit(_r.EXCEPTION,{code:c,msg:h,uid:g})},this._statsCollector.onUploadPublishDuration=(c,h,g,f)=>{const A=this._users.find(v=>v.uid===c);A&&Xt.peerPublishStatus(this._sessionId,{subscribeElapse:f,audioPublishDuration:h,videoPublishDuration:g,peer:A._uintid})},this._gateway=new kz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:n.websocketRetryConfig||Z,httpRetryConfig:n.httpRetryConfig||Z,forceWaitGatewayResponse:void 0===n.forceWaitGatewayResponse||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:s}),this._config=n,this._configDistribute=new HH,this._p2pChannel=new Q6(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(n,o,s,c,h){var g=this;return V(function*(){const f=++g._numberOfJoinCount;g._performanceRecorder.checkPoint("startJoin"),g.store.joinStart(),c&&(g.store.uid=c);const A="HTTPS"===($l||$l||($l=(window.location.protocol.split(":")[0]||"").toUpperCase(),$l)),v=G1()?window.isSecureContext:"Browser Not Support";if(!G1()&&!A||!window.isSecureContext){const W="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";Q.warning(W),wt("warning",g,W)}const E=PQ();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),Q.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),wt("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const S=Xt.reportApiInvoke(E,{name:ur.JOIN,options:[n,o,s,c],states:{isHttps:A,isSecureContext:v},tag:or.TRACER});Xt.setAppId(n);try{if(!s&&null!==s)throw new F(P.INVALID_PARAMS,"Invalid token: ".concat(s,". If you don not use token, set it to null"));s&&Jc(s,"token",1,2047),Jc(n,"appid",1,2047),fM(o),c&&mM(c),h&&Jc(h,"optionalInfo",1,2047)}catch(W){throw S.onError(W),W}if(Q.info("[".concat(g._clientId,"] start join channel ").concat(o,", join number: ").concat(f)),Wn("info",g,"join",{channel:o}),g._leaveMutex.isLocked&&(Q.debug("[".concat(g._clientId,"] join: waiting leave operation")),qe("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),Q.debug("[".concat(g._clientId,"] join: continue")),qe("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const W=new F(P.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw S.onError(W),W}g._sessionId||(g._sessionId=E,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const w=e({clientId:g._clientId,appId:n,sid:g._sessionId,cname:o,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:s||n,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:h,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if("string"==typeof c&&(w.stringUid=c,g._uintUid?(w.uid=g._uintUid,g._uintUid=void 0):w.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(w.aesmode=g._encryptionMode,w.aespassword=yield(W=V(function*(K){const ne=px("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),le=yield window.crypto.subtle.importKey("spki",ne,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),me=U3(K),be=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},le,me);return $D(new Uint8Array(be))}),function(K){return W.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new F(P.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(w.aessalt=g._encryptionSalt)}var W;g._startSession(g._sessionId,{channel:o,appId:n});const R=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&R===g._sessionId&&Xt.joinChannelTimeout(g._sessionId,5)},5e3);try{let W;const K=w.cloudProxyServer;if("443only"===K)w.proxyServer=mt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(K)){const me=mt("PROXY_SERVER_TYPE3");w.proxyServer=Array.isArray(me)?me[0]:me}if(Xt.setProxyServer(w.proxyServer),Q.setProxyServer(w.proxyServer),ht(w.proxyServer),g._performanceRecorder.checkPoint("startRequestAp"),g.store.requestAPStart(),w.stringUid&&!w.uid&&"normal"===K){yield b8(w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,!1,g.store);const me=yield Bx(w.stringUid,w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,g.store);Q.debug("getUserAccount Success ".concat(w.stringUid," => ").concat(me)),qe("debug",g,"getUserAccount Success ".concat(w.stringUid," => ").concat(me)),w.uid=me,W=yield _k(w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,g.store)}else if(w.stringUid&&!w.uid){const me=yield Bx(w.stringUid,w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,g.store);Q.debug("getUserAccount Success ".concat(w.stringUid," => ").concat(me)),qe("debug",g,"getUserAccount Success ".concat(w.stringUid," => ").concat(me)),w.uid=me,W=yield b8(w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,!0,g.store)}else W=yield b8(w,g._axiosCancelSource.token,g._config.httpRetryConfig||Z,!0,g.store);if(!g._joinAndNotLeaveYet)throw new F(P.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),g._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(w,g._axiosCancelSource.token),g._configDistribute.on(yy.UPDATE_BITRATE_LIMIT,me=>{g._p2pChannel.updateBitrateLimit(me)})},0),g._key=s||n;const ne=W.gatewayInfo;g._joinInfo=e(e({},w),{},{cid:ne.cid,uid:w.uid?w.uid:ne.uid,vid:ne.vid,apResponse:ne.res,uni_lbs_ip:ne.uni_lbs_ip,gatewayAddrs:ne.gatewayAddrs});const le=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new F(P.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return S.onSuccess(le),g._appId=n,g._channelName=w.cname,g._uid=le,g.store.uid=le,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(Bl()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),Q.info("[".concat(g._clientId,"] Joining channel success: ").concat(o)),Wn("info",g,"join",o,"success"),setTimeout(()=>{mt("USE_NEW_LOG")?Ys():Q.startUpload()},5e3),g._performanceRecorder.checkPoint("finishJoin"),g.store.joinEnd(),Ed.includes(x=g)||Ed.push(x),le}catch(W){const K=Array.isArray(W)?W[0]:W;throw Q.error("[".concat(g._clientId,"] join number: ").concat(f,", Joining channel failed, rollback"),K),Wn("error",g,"join",o,K.toString()),K.code!==P.OPERATION_ABORTED&&g._numberOfJoinCount===f&&(g._gateway.state="DISCONNECTED",g._reset()),S.onError(K),K}var x})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new F(P.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!mt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===P.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,aa.FALLBACK);throw n}).then(n=>{if(n)return n;if(Q.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new F(P.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const o=mt("PROXY_SERVER_TYPE3");if(Array.isArray(o))if(this._joinInfo.apUrl){const s=new r8(this._joinInfo.apUrl).host.split("."),c=s.slice(s.length-2).join(".");o.forEach(h=>{this._joinInfo&&h.includes(c)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=o[0])}else this._joinInfo.proxyServer=o[0];else this._joinInfo.proxyServer=o;return Q.setProxyServer(this._joinInfo.proxyServer),Xt.setProxyServer(this._joinInfo.proxyServer),ht(this._joinInfo.proxyServer),Xt.reportApiInvoke(this._sessionId,{name:ur.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:or.TRACER}).onSuccess(),this.emit(_r.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(n=>n)}leave(){var n=this;return V(function*(){const o=Xt.reportApiInvoke(n._sessionId,{name:ur.LEAVE,options:[],tag:or.TRACER});Q.info("[".concat(n._clientId,"] Leaving channel")),Wn("info",n,"leave"),window.removeEventListener(Bl()?"beforeunload":"pagehide",n._handleBeforeUnload),n._reset(),function(c){const h=Ed.indexOf(c);-1!==h&&Ed.splice(h,1)}(n);const s=yield n._leaveMutex.lock();if("DISCONNECTED"===n.connectionState)return Q.info("[".concat(n._clientId,"] Leaving channel repeated, success")),s(),o.onSuccess();yield n._gateway.leave("CONNECTED"!==n.connectionState),Q.info("[".concat(n._clientId,"] Leaving channel success")),Wn("info",n,"leave",void 0,"success"),n._joinAndNotLeaveYet=!1,n.store.resetJoinChannelServiceRecords(),s(),o.onSuccess()})()}publish(n){var o=arguments,s=this;return V(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];Array.isArray(n)||(n=[n]);const h=Xt.reportApiInvoke(s._sessionId,{name:ur.PUBLISH,options:n.map(f=>f?Object(f).toString():"null"),tag:or.TRACER});if(0===n.length){const f=new F(P.INVALID_PARAMS,"track list is empty");return h.onError(f),f.throw()}if("audience"===s._gateway.role){const f=new F(P.INVALID_OPERATION,"audience can not publish stream");return h.onError(f),f.throw()}for(const f of n){if(!(f instanceof j3)){const A=new F(P.INVALID_PARAMS,"parameter is not local track");return h.onError(A),A.throw()}if(!f._enabled&&c){const A=new F(P.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(f.getTrackId()));return h.onError(A),A.throw()}}Q.info("[".concat(s._clientId,"] Publishing tracks, id ").concat(n.map(f=>"".concat(f.getTrackId()," ")))),Wn("info",s,"publish",n.map(f=>"".concat(f.getTrackId()))),yield s._configDistribute.awaitConfigDistributeComplete(),c&&n.forEach(f=>{const A=s._configDistribute.getBitrateLimit();f instanceof qs&&A&&f.setBitrateLimit(A.uplink)});const g=yield s._publishMutex.lock();try{yield s._publishHighStream(n),h.onSuccess(n.map(f=>f.trackMediaType+":"+f.getTrackLabel()).toString()),Q.info("[".concat(s._clientId,"] Publish success, id ").concat(n.map(f=>"".concat(f.getTrackId()," ")))),Wn("info",s,"publish",n.map(f=>"".concat(f.getTrackId())),"success")}catch(f){throw h.onError(f),Q.error("[".concat(s._clientId,"] publish error"),f.toString()),Wn("error",s,"publish",void 0,f.toString()),f}finally{g()}})()}unpublish(n){var o=this;return V(function*(){if(!o._joinInfo||void 0===o._uid)throw new F(P.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=o._p2pChannel.getAllTracks(!0);const s=Xt.reportApiInvoke(o._sessionId,{name:ur.UNPUBLISH,options:n.map(h=>h.getTrackId()),tag:or.TRACER});Q.info("[".concat(o._clientId,"] Unpublish tracks, tracks ").concat(n.map(h=>"".concat(h.getTrackId()," "))," ")),Wn("info",o,"unpublish",n.map(h=>"".concat(h.getTrackId())));const c=yield o._publishMutex.lock();try{const h=yield o._p2pChannel.unpublish(n);h&&(yield o._gateway.unpublish(h,o._uid)),Q.info("[".concat(o._clientId,"] Unpublish success,tracks ").concat(n.map(g=>"".concat(g.getTrackId())))),Wn("info",o,"unpublish",n.map(g=>"".concat(g.getTrackId())),"success"),s.onSuccess()}catch(h){throw s.onError(h),Q.error("[".concat(o._clientId,"] unpublish error"),h.toString()),Wn("error",o,"unpublish",void 0,h.toString()),h}finally{c&&c()}})()}subscribe(n,o){var s=this;return V(function*(){return s._subscribe(n,o)})()}_subscribe(n,o,s){var c=this;return V(function*(){ja(o,"mediaType",["audio","video"]);const h=Xt.reportApiInvoke(c._sessionId,{name:ur.SUBSCRIBE,options:[n.uid,o],tag:or.TRACER});if(!c._joinInfo){const S=new F(P.INVALID_OPERATION,"Can't subscribe stream, not joined");throw h.onError(S),S}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const S=new F(P.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw h.onError(S),S}if(!c._users.find(S=>S===n)){const S=new F(P.INVALID_REMOTE_USER,"user is not in the channel");throw Q.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),Wn("error",c,"subscribe",n.uid,"this user is not in the channel"),h.onError(S),S}if(!n.hasAudio&&!n.hasVideo){const S=new F(P.INVALID_REMOTE_USER,"user is not published");throw Q.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),Wn("error",c,"subscribe",n.uid,"this user is not published"),h.onError(S),S}if(!(s||("audio"!==o||n.hasAudio&&void 0!==n._audioSSRC)&&("video"!==o||n.hasVideo&&void 0!==n._videoSSRC))){const S=new F(P.REMOTE_USER_IS_NOT_PUBLISHED);throw Q.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(o,", remote track is not published")),Wn("error",c,"subscribe",n.uid,"mediaType ".concat(o,", remote track is not published")),h.onError(S),S}const g="audio"===o?n._audioSSRC:n._videoSSRC,f="audio"===o?n._audioOrtc:n._videoOrtc,A="video"===o?n._rtxSsrcId:void 0,v={stream_type:"audio"===o?ti.AUDIO:ti.VIDEO,ssrcId:g},E=yield c._subscribeMutex.lock();Q.info("[".concat(c._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(o)),Wn("info",c,"subscribe",{uid:n.uid,mediaType:o});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(n,o))yield c._p2pChannel.unmuteRemote(n,o);else try{zl.markSubscribeStart(c.store.clientId,g),c.store.subscribe(n.uid,o,performance.now()),yield c._p2pChannel.subscribe(n,o,g,A,f);try{yield c._gateway.subscribe(n.uid,v,!0)}catch(w){throw yield c._p2pChannel.unsubscribe(n,o),w}c.store.subscribe(n.uid,o,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,n,o)}catch(w){throw c._p2pChannel.reportSubscribeEvent(!1,w?.code,n,o),w}Q.info("[".concat(c._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(o)),Wn("info",c,"subscribe",{uid:n.uid,mediaType:o},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(n.uid,c._defaultStreamFallbackType).catch(w=>{Q.warning("[".concat(c._clientId,"] auto set fallback failed"),w),qe("warning",c,"auto set fallback failed, ".concat(w.toString()))});const S="audio"===o?n._audioTrack:n._videoTrack;if(!S){const w=new F(P.UNEXPECTED_ERROR,"can not find remote track in user object");return h.onError(w),w.throw()}return h.onSuccess(S.getTrackId()),S}catch(S){throw h.onError(S),Q.error("[".concat(c._clientId,"] subscribe user ").concat(n.uid," error"),S),Wn("error",c,"subscribe",{uid:n.uid,mediaType:o},S.toString()),S}finally{E()}})()}massSubscribe(n){var o=this;return V(function*(){t1(n,"subscribeList");const s=Xt.reportApiInvoke(o._sessionId,{name:ur.MASS_SUBSCRIBE,options:n.map(E=>{let{user:S,mediaType:w}=E;return[S?.uid,w]}),tag:or.TRACER});if(!o._joinInfo){const E=new F(P.INVALID_OPERATION,"Can't subscribe stream, not joined");throw s.onError(E),E}if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState){const E=new F(P.INVALID_OPERATION,"Can't subscribe stream in ".concat(o.connectionState," state"));throw s.onError(E),E}const c=performance.now(),h=new Map,g=yield o._subscribeMutex.lock();Q.info("[".concat(o._clientId,"]start massSubscribe user ").concat(n.map(E=>{let{user:S,mediaType:w}=E;return"user: ".concat(S?.uid,", mediaType: ").concat(w)}).join("; "))),Wn("info",o,"massSubscribe",n);const f=(n=[...n]).map(E=>{let{user:S,mediaType:w}=E;return{user:S,mediaType:w}}),A=yield o._p2pChannel.globalLock();try{var v;for(let S=n.length-1;S>=0;S--){const w=n[S],{user:R,mediaType:x}=w;if(ja(x,"mediaType",["audio","video"]),!R){const ne=new F(P.INVALID_PARAMS,"user property does not exist in subscribeList item");throw Q.error("[".concat(o._clientId,"] user property does not exist in subscribeList item")),s.onError(ne),ne}if(!o._users.find(ne=>ne===R)){const ne=new F(P.INVALID_REMOTE_USER,"user is not in the channel");Q.error("[".concat(o._clientId,"] can not massSubscribe ").concat(R.uid,", this user is not in the channel")),Wn("error",o,"massSubscribe",R.uid,"this user is not in the channel"),f[S].error=ne,n.splice(S,1);continue}if("audio"===x&&(!R.hasAudio||void 0===R._audioSSRC)||"video"===x&&(!R.hasVideo||void 0===R._videoSSRC)){const ne=new F(P.REMOTE_USER_IS_NOT_PUBLISHED);Q.error("[".concat(o._clientId,"] can not subscribe ").concat(R.uid," with mediaType ").concat(x,", remote user is not published")),Wn("error",o,"subscribe",R.uid,"mediaType ".concat(x,", remote user is not published")),f[S].error=ne,n.splice(S,1);continue}const W=Qo.Video|Qo.LwoVideo,K=h.get(R);if(K){if("video"===x?K&W:K&Qo.Audio){n.splice(S,1),Q.warning("repeat massSubscribe user:".concat(R.uid,", mediaType:").concat(x," twice"));continue}h.set(R,K|("video"===x?W:Qo.Audio))}else h.set(R,"video"===x?W:Qo.Audio)}for(let S=n.length-1;S>=0;S--){const w=n[S],{user:R,mediaType:x}=w,W=Qo.Video|Qo.LwoVideo;if(o._p2pChannel.hasRemoteMedia(R,x)){yield o._p2pChannel.unmuteRemoteNoLock(R,x);const K=h.get(R);h.set(R,"video"===x?K^W:K^Qo.Audio),n.splice(S,1)}}o.store.massSubscribe(n.map(S=>({userId:S.user.uid,type:S.mediaType})),c);const E=nh(v=Array.from(h.entries())).call(v,(S,w)=>{let[R,x]=w;if(0===x)return S;const W={stream_id:R.uid,stream_type:x};return x&Qo.Audio&&(W.audio_ssrc=R._audioSSRC),x&Qo.Video&&(W.video_ssrc=R._videoSSRC),S.push(W),S},[]);try{n.length>0&&(yield o._p2pChannel.massSubscribeNoLock(n.map(w=>{let{user:R,mediaType:x}=w;return{user:R,mediaType:x,ssrcId:x===ti.VIDEO?R._videoSSRC:R._audioSSRC,rtxSsrcId:R._rtxSsrcId}})));const S=new Map;if(E.length>0&&((yield o._gateway.subscribeAll(E,!0))?.users||[]).forEach(R=>{let{stream_id:x,video_error_code:W,audio_error_code:K,error_code:ne}=R;(W||K||ne)&&S.set(x,{video_error_code:W,audio_error_code:K,error_code:ne})}),Array.from(S.entries()).length>0){const w=Array.from(S.entries()).map(R=>{let x,[W,K]=R;return K.error_code||K.video_error_code&&K.audio_error_code?x=void 0:K.video_error_code?x=ti.VIDEO:K.audio_error_code&&(x=ti.AUDIO),{user:o.remoteUsers.find(ne=>ne.uid===W),mediaType:x}});yield o._p2pChannel.massUnsubscribeNoLock(w)}for(const w of f){const R=S.get(w.user.uid);if(R){const x=R.error_code||"audio"===w.mediaType&&R.audio_error_code||"video"===w.mediaType&&R.video_error_code;if(x){const W=kU(x);Q.error("user:".concat(w.user.uid," mediaType:").concat(w.mediaType," has massSubscribe error ").concat(W.desc)),w.error=new F(P.SUBSCRIBE_FAILED,"code ".concat(x,": ").concat(W.desc))}}w.error||(w.track="video"===w.mediaType?w.user.videoTrack:w.user.audioTrack)}return o.store.massSubscribe(f.filter(w=>!w.error).map(w=>({userId:w.user.uid,type:w.mediaType})),void 0,performance.now()),f.forEach(w=>{var R;Xt.subscribe(o.store.sessionId,{succ:!!w.error,ec:(null===(R=w.error)||void 0===R?void 0:R.code)||null,video:w.mediaType===ti.VIDEO,audio:w.mediaType===ti.AUDIO,peerid:w.user.uid,subscribeRequestid:w.mediaType===ti.VIDEO?w.user._videoSSRC:w.user._audioSSRC,p2pid:o.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),s.onSuccess(),Q.info("[".concat(o._clientId,"] massSubscribe success ").concat(n.map(w=>{let{user:R,mediaType:x}=w;return"user: ".concat(R?.uid,", mediaType: ").concat(x)}).join("; "))),Wn("info",o,"massSubscribe",n,"success"),f}catch(S){throw yield o._p2pChannel.massUnsubscribeNoLock(n),s.onError(S),S}}finally{A(),g()}})()}unsubscribe(n,o){var s=this;return V(function*(){if(o&&ja(o,"mediaType",["audio","video"]),!s._joinInfo)throw new F(P.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=Xt.reportApiInvoke(s._sessionId,{name:ur.UNSUBSCRIBE,options:[n.uid,o],tag:or.TRACER});if(!s._users.find(h=>h===n)){const h=new F(P.INVALID_REMOTE_USER,"user is not in the channel");throw Q.error("[".concat(s._clientId,"] can not subscribe ").concat(n.uid,", user is not in the channel")),Wn("error",s,"unsubscribe",{uid:n.uid,mediaType:o},"user is not in the channel"),c.onError(h),h}Q.info("[".concat(s._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(o)),Wn("info",s,"unsubscribe",{uid:n.uid,mediaType:o});try{const h=yield s._p2pChannel.unsubscribe(n,o);h&&(yield s._gateway.unsubscribe(h,n.uid)),Q.info("[".concat(s._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(o)),Wn("info",s,"unsubscribe",{uid:n.uid,mediaType:o},"success"),c.onSuccess()}catch(h){if(h.code===P.DISCONNECT_P2P)return Q.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw Q.error("[".concat(s._clientId,"] unsubscribe user ").concat(n.uid," error"),h.toString()),Wn("error",s,"unsubscribe",{uid:n.uid,mediaType:o},h.toString()),c.onError(h),h}})()}massUnsubscribe(n){var o=this;return V(function*(){t1(n,"unsubscribeList");const s=Xt.reportApiInvoke(o._sessionId,{name:ur.UNSUBSCRIBE,options:n.map(h=>{let{user:g,mediaType:f}=h;return{uid:g?.uid,mediaType:f}}),tag:or.TRACER});if(!o._joinInfo){const h=new F(P.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw s.onError(h),h}Q.info("[".concat(o._clientId,"] start massUnsubscribe ").concat(n.map(h=>{let{user:g,mediaType:f}=h;return"user: ".concat(g?.uid,", mediaType: ").concat(f,";")}).join())),Wn("info",o,"massUnsubscribe",n),n=[...n];const c=new Map;for(let h=n.length-1;h>=0;h--){const{user:g,mediaType:f}=n[h];if(!g){const v=new F(P.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw Q.error("[".concat(o._clientId,"] user property does not exist in unsubscribeList item")),s.onError(v),v}if(ja(f,"mediaType",["video","audio",void 0]),!o._users.find(v=>v===g)){Q.warning("[".concat(o._clientId,"] can not subscribe ").concat(g.uid,", user is not in the channel")),Wn("error",o,"unsubscribe",{uid:g.uid,mediaType:f},"user is not in the channel"),n.splice(h,1);continue}const A=Qo.Video|Qo.LwoVideo;if(c.has(g)){const v=c.get(g);let E;switch(f){case"video":E=v&A;break;case"audio":E=v&Qo.Audio;break;default:E=v&(Qo.Audio|A)}if(E){Q.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(f," twice.")),n.splice(h,1);continue}f?"audio"===f?c.set(g,v|Qo.Audio):"video"===f&&c.set(g,v|A):c.set(g,v|Qo.Audio|A)}else f?"audio"===f?c.set(g,Qo.Audio):"video"===f&&c.set(g,A):c.set(g,Qo.Audio|A)}try{const h=yield o._p2pChannel.massUnsubscribe(n);h&&(yield o._gateway.massUnsubscribe(h)),Q.info("[".concat(o._clientId,"] massUnsubscribe success ").concat(n.map(g=>{let{user:f,mediaType:A}=g;return"user: ".concat(f?.uid,", mediaType: ").concat(A,";")}).join())),Wn("info",o,"massUnsubscribe",n,"success"),s.onSuccess()}catch(h){if(h.code===P.DISCONNECT_P2P)return Q.warning("disconnecting p2p, abort unsubscribe request."),void s.onSuccess();throw Q.error("[".concat(o._clientId,"] massUnsubscribe error"),h.toString()),Wn("error",o,"massUnsubscribe",n,h.toString()),s.onError(h),h}})()}setLowStreamParameter(n){!function(c){if(!c)throw new F(P.INVALID_PARAMS);vo(c.width)||eg(c.width,"streamParameter.width"),vo(c.height)||eg(c.height,"streamParameter.height"),vo(c.framerate)||eg(c.framerate,"streamParameter.framerate"),vo(c.bitrate)||qr(c.bitrate,"streamParameter.bitrate")}(n);const o=Xt.reportApiInvoke(this._sessionId,{name:ur.SET_LOW_STREAM_PARAMETER,options:[n],tag:or.TRACER});(!n.width&&n.height||n.width&&!n.height)&&(Q.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),qe("warning",this,"The width and height parameters take effect only when both are set")),Q.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n)),Wn("info",this,"setLowStreamParameter",n);const s=this._configDistribute.getLowStreamConfigDistribute();s&&s.bitrate&&n.bitrate&&s.bitrate<n.bitrate&&(n.bitrate=s.bitrate),this._lowStreamParameter=n,o.onSuccess()}enableDualStream(){var n=this;return V(function*(){const o=Xt.reportApiInvoke(n._sessionId,{name:ur.ENABLE_DUAL_STREAM,options:[],tag:or.TRACER});if(!Zc().supportDualStream){Xt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const s=new F(P.NOT_SUPPORTED,"Your browser is not support dual stream");throw o.onError(s),s}if(n._isDualStreamEnabled){const s=new F(P.INVALID_OPERATION,"Dual stream is already enabled");throw o.onError(s),s}if(n._p2pChannel.canPublishLowStream())try{yield n._publishLowStream()}catch(s){throw Xt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),o.onError(s),s}n._isDualStreamEnabled=!0,Xt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),Q.info("[".concat(n._clientId,"] enable dual stream")),Wn("info",n,"enableDualStream"),o.onSuccess()})()}disableDualStream(){var n=this;return V(function*(){if(!n._isDualStreamEnabled)return;if(!n._joinInfo)throw new F(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const o=Xt.reportApiInvoke(n._sessionId,{name:ur.DISABLE_DUAL_STREAM,options:[],tag:or.TRACER});if(n._p2pChannel.getLocalMedia(Bn.LocalVideoLowTrack))try{const s=yield n._p2pChannel.unpublishLowStream();s&&(yield n._gateway.unpublish(s,n._joinInfo.stringUid||n._joinInfo.uid))}catch(s){throw Xt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),o.onError(s),s}n._isDualStreamEnabled=!1,Xt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),Q.info("[".concat(n._clientId,"] disable dual stream")),Wn("info",n,"disableDualStream"),o.onSuccess()})()}setClientRole(n,o){var s=this;return V(function*(){var h;ja(h=n,"role",["audience","host"]),o&&S7(o);const c=Xt.reportApiInvoke(s._sessionId,{name:ur.SET_CLIENT_ROLE,options:[n,o],tag:or.TRACER});if("rtc"===s._mode){Q.warning("[".concat(s._clientId,"]rtc mode can not use setClientRole")),Wn("warning",s,"setClientRole",n,"rtc mode can not use setClientRole");const h=new F(P.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(h),h.throw()}if(o&&o.level&&"host"===n){const h=new F(P.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(h),h.throw()}try{if("audience"===n&&s._p2pChannel.hasLocalMedia()){const h=new F(P.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(h),h.throw()}yield s._gateway.setClientRole(n,o),Q.info("[".concat(s._clientId,"] set client role to ").concat(n,", level: ").concat(o&&o.level)),Wn("info",s,"setClientRole",{role:n,level:o&&o.level}),c.onSuccess()}catch(h){throw c.onError(h),h}})()}setProxyServer(n,o){if(Jc(n,"proxyServer"),!o){if("DISCONNECTED"!==this.connectionState)throw new F(P.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new F(P.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Xt.setProxyServer(this._proxyServer),Q.setProxyServer(this._proxyServer),ht(this._proxyServer),Q.info("[".concat(this._clientId,"] Set proxy server ").concat(o?"by initialize call":""," success.")),Wn("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(n,o){if(Array.isArray(n)||(n=[n]),!o){if("DISCONNECTED"!==this.connectionState)throw new F(P.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new F(P.INVALID_OPERATION,"You have already set the proxy")}if(HF(n))return this._turnServer={servers:n,mode:"original-manual"},Q.info("[".concat(this._clientId,"] Set original turnserver ").concat(o?"by initialize call":""," success: ").concat(n.map(s=>s.urls).join(","),".")),void Wn("info",this,"setOriginalTurnServer",[...arguments],"success");n.forEach(s=>b7(s)),this._turnServer={servers:n,mode:"manual"},Q.info("[".concat(this._clientId,"] Set turnserver ").concat(o?"by initialize call":""," success.")),Wn("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(n){const o=Xt.reportApiInvoke(this._sessionId,{name:ur.START_PROXY_SERVER,options:[],tag:or.TRACER});if("DISCONNECTED"!==this.connectionState){const h=new F(P.INVALID_OPERATION,"Start proxy server before join channel");throw o.onError(h),h}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const h=new F(P.INVALID_OPERATION,"You have already set the proxy");throw o.onError(h),h}const s=[1,2,3,4,5];let c;switch(void 0===n&&(n=1),n){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const h=new F(P.INVALID_PARAMS,"proxy server mode must be ".concat(s.join("|")));throw o.onError(h),h}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,Q.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Wn("info",this,"startProxyServer",this._cloudProxyServerMode),o.onSuccess()}stopProxyServer(){const n=Xt.reportApiInvoke(this._sessionId,{name:ur.STOP_PROXY_SERVER,options:[],tag:or.TRACER});if("DISCONNECTED"!==this.connectionState)throw new F(P.INVALID_OPERATION,"Stop proxy server after leave channel");Xt.setProxyServer(),Q.setProxyServer(),ht(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",Q.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),Wn("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},n.onSuccess()}setLocalAccessPoints(n,o){if(t1(n,"serverList"),Jc(o,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new F(P.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(c=>s.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(o):c),this._useLocalAccessPoint=!0,kr("WEBCS_DOMAIN",n),kr("WEBCS_DOMAIN_BACKUP_LIST",n),kr("GATEWAY_DOMAINS",[o]),kr("EVENT_REPORT_DOMAIN",n[0]),kr("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),kr("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),Q.info("set local access point success"),Wn("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(n){var o=this;return V(function*(){if(ja(n,"streamType",[0,1]),o._remoteDefaultVideoStreamType=n,o._joinInfo)try{yield o._gateway.setDefaultRemoteVideoStreamType(n),o._joinInfo.defaultVideoStream=o._remoteDefaultVideoStreamType}catch(s){throw Q.error("[".concat(o._clientId,"] set default remote video stream type error"),s.toString()),s}else Q.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(n))})()}setRemoteVideoStreamType(n,o){var s=this;return V(function*(){ja(o,"streamType",[0,1]);const c=Xt.reportApiInvoke(s._sessionId,{name:ur.SET_REMOTE_VIDEO_STREAM_TYPE,options:[n,o],tag:or.TRACER});try{yield s._gateway.setRemoteVideoStreamType(n,o),setTimeout(()=>{const h=s._users.find(g=>g.uid===n);h&&h.videoTrack&&h.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(h){throw c.onError(h),Q.error("[".concat(s._clientId,"] set remote video stream type error"),h.toString()),Wn("error",s,"setRemoteVideoStreamType",void 0,h.toString()),h}Q.info("[".concat(s._clientId,"] set remote ").concat(n," video stream type to ").concat(o)),Wn("info",s,"setRemoteVideoStreamType",{uid:n,streamType:o}),s._remoteStreamTypeCacheMap.set(n,o),c.onSuccess()})()}setStreamFallbackOption(n,o){var s=this;return V(function*(){ja(o,"fallbackType",[0,1,2]);const c=Xt.reportApiInvoke(s._sessionId,{name:ur.SET_STREAM_FALLBACK_OPTION,options:["too long to show",o],tag:or.TRACER});try{yield s._gateway.setStreamFallbackOption(n,o)}catch(h){throw c.onError(h),Q.error("[".concat(s._clientId,"] set stream fallback option"),h.toString()),Wn("error",s,"setStreamFallbackOption",void 0,h.toString()),h}Q.info("[".concat(s._clientId,"] set remote ").concat(n," stream fallback type to ").concat(o)),Wn("info",s,"setStreamFallbackOption",{uid:n,fallbackType:o}),s._streamFallbackTypeCacheMap.set(n,o),c.onSuccess()})()}setEncryptionConfig(n,o,s){if(ja(n,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),Jc(o,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!s||!(s instanceof Uint8Array&&32===s.length))throw new F(P.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(s)throw new F(P.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(o)||(Q.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),qe("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=n,this._encryptionSecret=o,s&&(this._encryptionSalt=$D(s))}renewToken(n){var o=this;return V(function*(){Jc(n,"token",1,2047);const s=Xt.reportApiInvoke(o._sessionId,{name:ur.RENEW_TOKEN,options:[n],tag:or.TRACER});if(!o._key||!o._joinInfo){const g=new F(P.INVALID_OPERATION,"renewToken should not be called before user join");return s.onError(g),g.throw()}const c=o._key;o._key=n,o._joinInfo&&(o._joinInfo.token=n);const h=yield o._renewTokenMutex.lock();try{if(mt("USE_NEW_TOKEN")){Q.debug("start renew token with ticket from unilbs"),Wn("debug",o,"renewToken","unilbs");const g=yield function VH(n,o,s){return C8.apply(this,arguments)}(o._joinInfo,o._axiosCancelSource.token,o._config.httpRetryConfig||Z);Q.debug("[".concat(o._clientId,"] get ticket from unilbs success")),Wn("debug",o,"renewToken","unilbs","success"),yield o._gateway.renewToken({token:n,ticket:g})}else Q.debug("start renew token without ticket"),Wn("debug",o,"renewToken"),yield o._gateway.renewToken({token:n});Q.debug("[".concat(o._clientId,"] renewToken success")),Wn("debug",o,"renewToken",void 0,"success"),s.onSuccess()}catch(g){throw o._key=c,o._joinInfo.token=c,s.onError(g),Q.error("[".concat(o._clientId,"] renewToken failed"),g.toString()),Wn("error",o,"renewToken",void 0,g.toString()),g}finally{h()}})()}enableAudioVolumeIndicator(){const n=Xt.reportApiInvoke(this._sessionId,{name:ur.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:or.TRACER});if(this._audioVolumeIndicationInterval)return Q.warning("you have already enabled audio volume indicator!"),Wn("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),n.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const o=this._p2pChannel.getAudioLevels();this.emit(_r.VOLUME_INDICATOR,o)},mt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),n.onSuccess()}getRTCStats(){const n=this._statsCollector.getRTCStats(),o=this._gateway.getInChannelInfo();return n.Duration=Math.round(o.duration/1e3),n}startLiveStreaming(n,o){const s=Xt.reportApiInvoke(this._sessionId,{name:ur.START_LIVE_STREAMING,options:[n,o],tag:or.TRACER});if(!o){if("h264"!==this._codec){const h=new F(P.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return s.onError(h),jt.reject(h)}if(!this._p2pChannel.hasLocalMedia()){const h=new F(P.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return s.onError(h),jt.reject(h)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n)){const h=new F(P.LIVE_STREAMING_TASK_CONFLICT);return s.onError(h),jt.reject(h)}const c=o?fs.TRANSCODE:fs.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(n,c).then(()=>s.onSuccess()).catch(h=>{throw s.onError(h),h})}setLiveTranscoding(n){const o=Xt.reportApiInvoke(this._sessionId,{name:ur.SET_LIVE_TRANSCODING,options:[n],tag:or.TRACER});return this._createLiveStreamingClient(fs.TRANSCODE).setTranscodingConfig(n).then(()=>o.onSuccess()).catch(s=>{throw o.onError(s),s})}stopLiveStreaming(n){const o=Xt.reportApiInvoke(this._sessionId,{name:ur.STOP_LIVE_STREAMING,options:[n],tag:or.TRACER}),s=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(n));if(!s.length){const c=new F(P.INVALID_PARAMS,"can not find live streaming url to stop");return o.onError(c),jt.reject(c)}return jt.all(s.map(c=>c&&c.stopLiveStreamingTask(n))).then(()=>o.onSuccess()).catch(c=>{throw o.onError(c),c})}addInjectStreamUrl(n,o){var s=this;return V(function*(){const c=Xt.reportApiInvoke(s._sessionId,{name:ur.ADD_INJECT_STREAM_URL,options:[n,o],tag:or.TRACER});try{if(!s._joinInfo)throw new F(P.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const h=s._createLiveStreamingClient(fs.INJECT);h.setInjectStreamConfig(o,0),yield h.startLiveStreamingTask(n,fs.INJECT)}catch(h){throw c.onError(h),h}c.onSuccess()})()}removeInjectStreamUrl(){var n=this;return V(function*(){const o=Xt.reportApiInvoke(n._sessionId,{name:ur.REMOVE_INJECT_STREAM_URL,options:[],tag:or.TRACER});try{var s;const c=n._createLiveStreamingClient(fs.INJECT),h=Array.from(K_(s=c.streamingTasks).call(s)).find(g=>g.mode===fs.INJECT);if(!n._joinInfo||!h)throw new F(P.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(h.url)}catch(c){throw o.onError(c),c}o.onSuccess()})()}startChannelMediaRelay(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(o._sessionId,{name:ur.START_CHANNEL_MEDIA_RELAY,options:[n],tag:or.TRACER});try{R8(n),yield o._createChannelMediaRelayClient().startChannelMediaRelay(n)}catch(c){return s.onError(c),c.throw()}s.onSuccess()})()}updateChannelMediaRelay(n){var o=this;return V(function*(){const s=Xt.reportApiInvoke(o._sessionId,{name:ur.UPDATE_CHANNEL_MEDIA_RELAY,options:[n],tag:or.TRACER});try{R8(n),yield o._createChannelMediaRelayClient().updateChannelMediaRelay(n)}catch(c){return s.onError(c),c.throw()}s.onSuccess()})()}stopChannelMediaRelay(){var n=this;return V(function*(){const o=Xt.reportApiInvoke(n._sessionId,{name:ur.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:or.TRACER});try{yield n._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(s){return o.onError(s),s.throw()}o.onSuccess()})()}sendStreamMessage(n){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new F(P.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof n&&(n=(new TextEncoder).encode(n)),new Blob([n]).size>1024)throw new F(P.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(ui.DATA_STREAM,{payload:$D(n)},!o)}sendMetadata(n){if(!this._joinInfo)throw new F(P.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new F(P.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(ui.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:$D(n)})}sendCustomReportMessage(n){var o=this;return V(function*(){Array.isArray(n)||(n=[n]),n.forEach(M4);const s=Xt.reportApiInvoke(o._sessionId,{name:ur.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(n)],tag:or.TRACER});if(!o._joinInfo){const c=new F(P.INVALID_OPERATION,"can not send custom report, not joined");return s.onError(c),c.throw()}yield Xt.sendCustomReportMessage(o._joinInfo.sid,n),s.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(n,o){var s=this;return V(function*(){ja(o.spatialLayer,"spatialLayer",[0,1,2,3]),ja(o.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield s._gateway.pickSVCLayer(n,o)}catch(c){throw Q.error("[".concat(s._clientId,"] pick SVC layer failed"),c.toString()),wt("error",s,"pickSVCLayer",o,c.toString()),c}})()}_reset(){if(Q.debug("[".concat(this._clientId,"] reset client")),wt("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=I.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Nu("client-publish"),this._subscribeMutex=new Nu("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(n,o){const s=n||PQ();Q.debug(n?"[".concat(this._clientId,"] new Session ").concat(s):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(s)),wt("debug",this,"_startSession",{newSid:s,sid:this._sessionId}),this._sessionId=s,this.store.sessionId=s,o?Xt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:o.channel,appid:o.appId,mode:this._mode}):this._joinInfo?Xt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Xt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=s),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=s)}_publishHighStream(n){var o=this;return V(function*(){if(!o._joinInfo||void 0===o._uid)throw new F(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState)throw new F(P.INVALID_OPERATION,"can not publish stream in ".concat(o.connectionState," state"));if("auto"===o._turnServer.mode&&mt("FORCE_TURN")&&!mt("TURN_ENABLE_TCP")&&!mt("TURN_ENABLE_UDP"))throw new F(P.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");Q.debug("[".concat(o._clientId,"] publish high stream")),wt("debug",o,"_publishHighStream");try{const c=yield o._p2pChannel.publish(n,o._isDualStreamEnabled,o._lowStreamParameter),h=(yield c.next()).value;if(h){var s;let g;try{g=yield o._gateway.publish(o._uid,h,!0)}catch(f){if(f.code!==P.DISCONNECT_P2P)throw c.throw(f),f}yield c.next((null===(s=g)||void 0===s?void 0:s.ortc)||[])}o._p2pChannel.reportPublishEvent(!0,null);for(const g of n)g instanceof qs&&g._encoderConfig&&o._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield o._p2pChannel.muteLocalTrack(g))}catch(c){if(o._p2pChannel.reportPublishEvent(!1,c?.code,n),c?.code===P.WS_ABORT)return;throw c}})()}_publishLowStream(){var n=this;return V(function*(){if(!n._joinInfo||void 0===n._uid)throw new F(P.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState)throw new F(P.INVALID_OPERATION,"can not publish stream in ".concat(n.connectionState," state"));Q.debug("[".concat(n._clientId,"] publish low stream")),wt("debug",n,"_publishLowStream");const o=n._configDistribute.getLowStreamConfigDistribute();o&&o.bitrate&&(n._lowStreamParameter||(n._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),n._lowStreamParameter&&n._lowStreamParameter.bitrate&&o.bitrate<n._lowStreamParameter.bitrate&&(n._lowStreamParameter.bitrate=o.bitrate));try{const c=yield n._p2pChannel.publishLowStream(n._lowStreamParameter),h=(yield c.next()).value;if(h){var s;let g;try{g=yield n._gateway.publish(n._uid,h,!0)}catch(f){if(f.code!==P.DISCONNECT_P2P)throw c.throw(f),f}c.next((null===(s=g)||void 0===s?void 0:s.ortc)||[]),n._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(n._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===P.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new F(P.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const o=()=>new WH(this._joinInfo,this._config.websocketRetryConfig||Z,this._config.httpRetryConfig||Z),s=c=>{c.onLiveStreamError=(h,g)=>{Xt.reportApiInvoke(this._sessionId,{name:ur.ON_LIVE_STREAM_ERROR,options:[h,g],tag:or.TRACER}).onSuccess(),this.emit(_r.LIVE_STREAMING_ERROR,h,g)},c.onLiveStreamWarning=(h,g)=>{Xt.reportApiInvoke(this._sessionId,{name:ur.ON_LIVE_STREAM_WARNING,options:[h,g],tag:or.TRACER}).onSuccess(),this.emit(_r.LIVE_STREAMING_WARNING,h,g)},c.on(ng.REQUEST_WORKER_MANAGER_LIST,(h,g,f)=>{if(!this._joinInfo)return f(new F(P.INVALID_OPERATION,"can not find join info to get worker manager"));FH(h,this._joinInfo,this._axiosCancelSource.token,Z).then(g).catch(f)})};switch(n){case fs.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=o(),s(this._liveRawStreamingClient)),this._liveRawStreamingClient;case fs.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=o(),s(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case fs.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=o(),this._injectStreamingClient.on(ng.REQUEST_WORKER_MANAGER_LIST,(c,h,g)=>{if(!this._joinInfo)return g(new F(P.INVALID_OPERATION,"can not find join info to get worker manager"));FH(c,this._joinInfo,this._axiosCancelSource.token,Z).then(h).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,h,g)=>{this.emit(_r.INJECT_STREAM_STATUS,c,h,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new Vx(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Z,this._config.httpRetryConfig||Z),this._channelMediaRelayClient.on("state",n=>{n===uc.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(_r.CHANNEL_MEDIA_RELAY_STATE,n)}),this._channelMediaRelayClient.on("event",n=>{this.emit(_r.CHANNEL_MEDIA_RELAY_EVENT,n)})),this._channelMediaRelayClient):new F(P.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var n=this;this._gateway.on(Ns.DISCONNECT_P2P,V(function*(){yield n._p2pChannel.disconnectForReconnect()})),this._gateway.on(Ns.CONNECTION_STATE_CHANGE,(o,s,c)=>{var h;if(c===aa.FALLBACK)return;const g=()=>{this.emit(_r.CONNECTION_STATE_CHANGE,o,s,c)};if(Xt.reportApiInvoke(this._sessionId||(null===(h=this._gateway.joinInfo)||void 0===h?void 0:h.sid)||null,{name:ur.CONNECTION_STATE_CHANGE,options:[o,s,c],tag:or.TRACER}).onSuccess(JSON.stringify({cur:o,prev:s,reason:c})),Q.info("[".concat(this._clientId,"] connection state change: ").concat(s," -> ").concat(o)),Yt("info",this,"connection-state-change","".concat(s," -> ").concat(o)),"DISCONNECTED"===o)return this._reset(),void g();if("RECONNECTING"===o)this._users.forEach(A=>{A._trust_in_room_=!1,A._trust_audio_enabled_state_=!1,A._trust_video_enabled_state_=!1,A._trust_audio_mute_state_=!1,A._trust_video_mute_state_=!1,A._trust_audio_stream_added_state_=!1,A._trust_video_stream_added_state_=!1,A._audioSSRC=void 0,A._videoSSRC=void 0,A._videoOrtc=void 0,A._audioOrtc=void 0,A._cname=void 0,A._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===o){var f;this._streamFallbackTypeCacheMap.forEach((A,v)=>{this._gateway.setStreamFallbackOption(v,A).catch(E=>{Q.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E),qe("warning",this,"auto set stream fallback option failed, ".concat(E.toString()))})}),this._remoteStreamTypeCacheMap.forEach((A,v)=>{this._gateway.setRemoteVideoStreamType(v,A).catch(E=>{Q.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E),qe("warning",this,"auto set remote stream type failed, ".concat(E.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(f=this._joinInfo)||void 0===f?void 0:f.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{Q.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(A=>{Q.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(A))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(A=>!A._trust_in_room_).forEach(A=>{Q.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(A.uid)),qe("debug",this,"user offline timeout, emit user offline ".concat(A.uid)),this._handleUserOffline({uid:A.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(A=>{A._trust_audio_mute_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(A.uid)),qe("debug",this,"auto dispatch audio unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"audio",!1)),A._trust_video_mute_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(A.uid)),qe("debug",this,"auto dispatch video unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"video",!1)),A._trust_audio_enabled_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(A.uid)),qe("debug",this,"auto dispatch enable local audio ".concat(A.uid)),this._handleSetStreamLocalEnable("audio",A.uid,!0)),A._trust_video_enabled_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(A.uid)),qe("debug",this,"auto dispatch enable local video ".concat(A.uid)),this._handleSetStreamLocalEnable("video",A.uid,!0)),A._trust_video_stream_added_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(A.uid)),this._handleResetAddStream(A,"video")),A._trust_audio_stream_added_state_||(Q.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(A.uid)),this._handleResetAddStream(A,"audio")),A._video_added_||A._audio_added_||(Q.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(A.uid)),qe("debug",this,"auto dispatch stream remove ".concat(A.uid)),this._handleRemoveStream({uid:A.uid,uint_id:A._uintid}))}))},1e3)}g()}),this._gateway.on(Ns.REQUEST_NEW_GATEWAY_LIST,(o,s)=>{if(!this._joinInfo)return s(new F(P.UNEXPECTED_ERROR,"can not recover, no join info"));_k(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Z,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),o(c.gatewayInfo.gatewayAddrs.map(h=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=h.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(h.address)}))}).catch(s)}),this._gateway.on(Ns.NETWORK_QUALITY,o=>{"normal"===this._networkQualitySensitivity&&this.emit(_r.NETWORK_QUALITY,o)}),this._gateway.on(Ns.STREAM_TYPE_CHANGE,(o,s)=>{this.emit(_r.STREAM_TYPE_CHANGED,o,s),Xt.reportApiInvoke(this._sessionId,{name:ur.STREAM_TYPE_CHANGE,options:[o,s],tag:or.TRACER}).onSuccess(JSON.stringify({uid:o,streamType:s}))}),this._gateway.on(Ns.IS_P2P_DISCONNECTED,o=>{this._p2pChannel.isP2PDisconnected()?o(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?o(!1):o(!0)}),this._gateway.on(Ns.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Ns.REQUEST_P2P_CONNECTION_PARAMS,function(){var o=V(function*(s,c,h){try{c(yield n._p2pChannel.startP2PConnection(s))}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this._gateway.on(Ns.JOIN_RESPONSE,(o,s,c)=>{const{dtlsParameters:h,iceParameters:g,candidates:f,rtpCapabilities:A,setup:v,cname:E}=O6(o.ortc,s,c);this._p2pChannel.connect(g,h,f,A,v,E)}),this._gateway.signal.on(Li.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Li.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Li.ON_ADD_AUDIO_STREAM,o=>this._handleAddAudioOrVideoStream("audio",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc)),this._gateway.signal.on(Li.ON_ADD_VIDEO_STREAM,o=>this._handleAddAudioOrVideoStream("video",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc,o.rtxSsrcId)),this._gateway.signal.on(Li.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Li.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Li.MUTE_AUDIO,o=>(Yt("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!0))),this._gateway.signal.on(Li.UNMUTE_AUDIO,o=>(Yt("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!1))),this._gateway.signal.on(Li.MUTE_VIDEO,o=>(Yt("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!0))),this._gateway.signal.on(Li.UNMUTE_VIDEO,o=>(Yt("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!1))),this._gateway.signal.on(Li.RECEIVE_METADATA,o=>{const s=px(o.metadata);this.emit(_r.RECEIVE_METADATA,o.uid,s)}),this._gateway.signal.on(Li.ON_DATA_STREAM,o=>{o.seq&&delete o.seq,o.payload=px(o.payload),this.emit(_r.STREAM_MESSAGE,o.uid,o.payload),this.onStreamMessage&&this.onStreamMessage(o)}),this._gateway.signal.on(Li.ON_CRYPT_ERROR,()=>{JD(()=>{Q.warning("[".concat(this._clientId,"] on crypt error")),Yt("warning",this,"crypt_error"),this.emit(_r.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Li.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Li.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Q.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),Yt("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(_r.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Li.ON_STREAM_FALLBACK_UPDATE,o=>{Q.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(o.stream_id,", attr: ").concat(o.stream_type)),Yt("debug",this,"stream_fallback_update",{peerId:o.stream_id,attr:o.stream_type}),this.emit(_r.STREAM_FALLBACK,o.stream_id,1===o.stream_type?"fallback":"recover")}),this._gateway.signal.on(Li.ON_PUBLISH_STREAM,o=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:o.proxy})),Q.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(o))),Yt("info",this,"publish_stream",o))}),this._gateway.signal.on(Li.ENABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!0)}),this._gateway.signal.on(Li.DISABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!1)}),this._gateway.signal.on(ei.REQUEST_TIMEOUT,(o,s)=>{if(this._joinInfo)switch(o){case ui.PUBLISH:{if(!s)return;const A=s.ortc;if(A){var c,h,g,f;const v=A.some(w=>{let{stream_type:R}=w;return R===ms.Audio}),E=A.some(w=>{let{stream_type:R}=w;return R!==ms.Audio}),S=A.some(w=>{let{stream_type:R}=w;return R===ms.Screen||R===ms.ScreenLow});"offer"===s.state&&Xt.publish(this._joinInfo.sid,{eventElapse:zl.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:P.TIMEOUT,audio:v,video:E,p2pid:s.p2p_id,publishRequestid:this.store.pubId,screenshare:S,audioName:v?null===(c=A.find(w=>{let{stream_type:R}=w;return R===ms.Audio}))||void 0===c||null===(h=c.ssrcs[0])||void 0===h?void 0:h.ssrcId.toString():void 0,videoName:E?null===(g=A.find(w=>{let{stream_type:R}=w;return R!==ms.Audio}))||void 0===g||null===(f=g.ssrcs[0])||void 0===f?void 0:f.ssrcId.toString():void 0})}break}case ui.SUBSCRIBE:s&&Xt.subscribe(this._joinInfo.sid,{succ:!1,ec:P.TIMEOUT,audio:s.stream_type===ti.AUDIO,video:s.stream_type===ti.VIDEO,peerid:s.stream_id,subscribeRequestid:s.ssrcId,p2pid:this.store.p2pId,eventElapse:zl.measureFromSubscribeStart(this.store.clientId,s.ssrcId)})}}),this._gateway.signal.on(Li.ON_P2P_OK,o=>{}),this._gateway.signal.on(Li.ON_PUBLISHED_USER_LIST,o=>{if(null==o||!o.users)return;const s=[],c=[];for(const h of o.users){let g=this._users.find(S=>S.uid===h.stream_id);g?g._trust_in_room_=!0:(g=new Gx(h.stream_id,h.stream_id),this._users.push(g),0===this.getListeners(_r.PUBLISHED_USER_LIST).length&&(Q.debug("[".concat(this._clientId,"] user online"),h.stream_id),Tn("info",this,"user-joined",{uid:h.stream_id}),this.emit(_r.USER_JOINED,g)));const f=Qo.Audio&h.stream_type,A=(Qo.Video|Qo.LwoVideo)&h.stream_type,v=f&&g.hasAudio,E=A&&g.hasVideo;A&&(g._trust_video_stream_added_state_=!0,g._video_added_=!0,g._videoSSRC=h.video_ssrc),f&&(g._trust_audio_stream_added_state_=!0,g._audio_added_=!0,g._audioSSRC=h.audio_ssrc),f&&!v&&0===this.getListeners(_r.PUBLISHED_USER_LIST).length&&(Q.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published audio")),qe("info",this,"remote user ".concat(g.uid," published audio")),this.emit(_r.USER_PUBLISHED,g,"audio")),A&&!E&&0===this.getListeners(_r.PUBLISHED_USER_LIST).length&&(Q.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published video")),qe("info",this,"remote user ".concat(g.uid," published video")),this.emit(_r.USER_PUBLISHED,g,"video")),(f&&!v||A&&!E)&&s.push(g),A&&this._p2pChannel.hasPendingRemoteMedia(g,"video")&&c.push({user:g,mediaType:"video"}),f&&this._p2pChannel.hasPendingRemoteMedia(g,"audio")&&c.push({user:g,mediaType:"audio"})}c.length>0&&(Q.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(h=>"user: ".concat(h.user.uid,", mediaType: ").concat(h.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(h=>{Q.error("[".concat(this._clientId,"] mass resubscribe error"),h.toString())})),this.getListeners(_r.PUBLISHED_USER_LIST).length>0?(Q.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(s.map(h=>h.uid).join(", "))),this.emit(_r.PUBLISHED_USER_LIST,s)):Q.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(s.map(h=>h.uid).join(", ")))})}_handleP2PChannelEvents(){var n=this;this._p2pChannel.on(pi.RequestMuteLocal,function(){var o=V(function*(s,c,h){if(n._joinInfo)try{yield n._gateway.muteLocal(s,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===P.DISCONNECT_P2P?c():h(g)}else c()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(pi.RequestUnmuteLocal,function(){var o=V(function*(s,c,h){if(n._joinInfo)try{yield n._gateway.unmuteLocal(s,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===P.DISCONNECT_P2P?c():h(g)}else c()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(pi.RequestRePublish,(o,s,c)=>{this.publish(o,!1).then(s).catch(c)}),this._p2pChannel.on(pi.RequestReSubscribe,function(){var o=V(function*(s,c,h){try{for(const{user:g,kind:f}of s)f===ti.VIDEO?yield n.subscribe(g,"video"):yield n.subscribe(g,"audio");c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(pi.RequestUploadStats,(o,s)=>{this._gateway.uploadStats(o,s)}),this._p2pChannel.on(pi.MediaReconnectStart,o=>{this.emit(_r.MEDIA_RECONNECT_START,o)}),this._p2pChannel.on(pi.MediaReconnectEnd,o=>{this.emit(_r.MEDIA_RECONNECT_END,o)}),this._p2pChannel.on(pi.NeedSignalRTT,o=>{o(this._gateway.getSignalRTT())}),this._p2pChannel.on(pi.RequestRestartICE,V(function*(){const o=yield n._p2pChannel.reEstablish();if(o){const{restartICEResponse:s,gatewayIP:c,gatewayPort:h}=yield n._gateway.restartICE({iceParameters:o.iceParameters}),{candidates:g,iceParameters:f}=function(A,v,E){const S=A.iceParameters;let w;return void 0!==v&&void 0!==E?(w=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:v,port:E.toString(),type:"host",extension:{}}],Q.debug("Using remote candidate from AP ".concat(v,":").concat(E)),qe("debug",[],"Using remote candidate from AP ".concat(v,":").concat(E))):w=S.candidates.map(R=>({foundation:R.foundation,componentId:"1",transport:R.protocol,priority:R.priority.toString(),connectionAddress:R.ip,port:R.port.toString(),type:R.type,extension:{}})),{candidates:w,iceParameters:{iceUfrag:S.iceUfrag,icePwd:S.icePwd}}}(s,c,h);yield o.restartICE(f,g)}})),this._p2pChannel.on(pi.RequestReconnect,V(function*(){n._gateway.reconnect()})),this._p2pChannel.on(pi.RequestReconnectPC,V(function*(){var o;const{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}=yield n._p2pChannel.startP2PConnection({turnServer:null===(o=n._joinInfo)||void 0===o?void 0:o.turnServer}),{gatewayEstablishParams:g,gatewayIP:f,gatewayPort:A}=yield n._gateway.reconnectPC({iceParameters:s,dtlsParameters:c,rtpCapabilities:h}),{dtlsParameters:v,iceParameters:E,candidates:S,rtpCapabilities:w,setup:R,cname:x}=O6(g,f,A);yield n._p2pChannel.connect(E,v,S,w,R,x),yield n._p2pChannel.republish(),yield n._p2pChannel.reSubscribe()})),this._p2pChannel.on(pi.RequestUnpublishForReconnectPC,function(){var o=V(function*(s,c,h){n._joinInfo&&void 0!==n._uid?(yield n._gateway.unpublish(s,n._uid),c()):h()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(pi.P2PLost,()=>{this.emit(_r.P2P_LOST,this.store.uid)}),this._p2pChannel.on(pi.UpdateVideoEncoder,o=>{o._encoderConfig&&this._gateway.setVideoProfile(o._encoderConfig)}),this._p2pChannel.on(pi.ConnectionTypeChange,o=>{this.emit(_r.IS_USING_CLOUD_PROXY,o)}),this._p2pChannel.on(pi.RequestLowStreamParameter,o=>{o(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(n){var o=this;return V(function*(){if("CONNECTED"!==o.connectionState||!o._joinInfo)throw new F(P.INVALID_OPERATION,"[".concat(o._clientId,"] Client did not join channel"));if(o._inspect)throw new F(P.INVALID_OPERATION,"[".concat(o._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new F(P.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig is necessary"));if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new F(P.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const s=new _L(n);o._inspect=s,o.handleVideoInspectEvents(o._inspect),yield s.init({appId:o._joinInfo.appId,areaCode:"",cname:o._joinInfo.cname,sid:o._joinInfo.sid,token:o._joinInfo.token,uid:o._joinInfo.uid,cid:o._joinInfo.cid,vid:o._joinInfo.vid?Number(o._joinInfo.vid):0},Z)}catch(s){throw Array.isArray(s)?s[0]:s}})()}disableContentInspect(){var n=this;return V(function*(){if(!n._inspect)throw new F(P.INVALID_OPERATION,"[".concat(n._clientId,"] inspectVideoContent not started"));try{n._inspect.close(),n._inspect=void 0}catch(o){throw Array.isArray(o)?o[0]:o}})()}handleVideoInspectEvents(n){n.on(rs.CONNECTION_STATE_CHANGE,(o,s)=>{if(this.emit(_r.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,o,s),s===hl.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(_r.CONTENT_INSPECT_ERROR,new F(P.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(rs.INSPECT_RESULT,(o,s)=>{var c;if(s?.code===P.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return Q.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(_r.CONTENT_INSPECT_RESULT,o,s)}),n.on(rs.CLIENT_LOCAL_VIDEO_TRACK,o=>{o(this.localTracks.filter(s=>"video"===s.trackMediaType)[0])})}getJoinChannelServiceRecords(){return Q.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(n,o){switch(o){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[r7],Object.getOwnPropertyDescriptor(r.prototype,"setProxyServer"),r.prototype),tr(r.prototype,"setTurnServer",[PV],Object.getOwnPropertyDescriptor(r.prototype,"setTurnServer"),r.prototype),tr(r.prototype,"setLocalAccessPoints",[vL],Object.getOwnPropertyDescriptor(r.prototype,"setLocalAccessPoints"),r.prototype),tr(r.prototype,"setRemoteDefaultVideoStreamType",[NV],Object.getOwnPropertyDescriptor(r.prototype,"setRemoteDefaultVideoStreamType"),r.prototype),tr(r.prototype,"setEncryptionConfig",[i7],Object.getOwnPropertyDescriptor(r.prototype,"setEncryptionConfig"),r.prototype),tr(r.prototype,"pickSVCLayer",[gW],Object.getOwnPropertyDescriptor(r.prototype,"pickSVCLayer"),r.prototype),tr(r.prototype,"enableContentInspect",[_W],Object.getOwnPropertyDescriptor(r.prototype,"enableContentInspect"),r.prototype),tr(r.prototype,"disableContentInspect",[vW],Object.getOwnPropertyDescriptor(r.prototype,"disableContentInspect"),r.prototype),tr(r.prototype,"getJoinChannelServiceRecords",[Fk],Object.getOwnPropertyDescriptor(r.prototype,"getJoinChannelServiceRecords"),r.prototype),AW=r))||AW);class d extends nx{set currentState(o){o!==this._currentState&&(this._currentState=o,this.emit($c.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),X(this,"audioBuffer",void 0),X(this,"sourceNode",void 0),X(this,"startPlayTime",0),X(this,"startPlayOffset",0),X(this,"pausePlayTime",0),X(this,"options",void 0),X(this,"currentLoopCount",0),X(this,"_currentState","stopped"),this.audioBuffer=o,this.options=s,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(o){"stopped"===this.currentState?(this.options=o,this.startPlayOffset=this.options.startPlayTime||0):Q.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(o){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=o,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=o))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const o=this.context.createBufferSource();return o.buffer=this.audioBuffer,o.loop=!!this.options.loop,o.connect(this.outputNode),o}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const m=new Map;function T(){return T=V(function*(n,o){let s=null;if("string"==typeof n){const h=m.get(n);if(h)return Q.debug("use cached audio resource: ",n),h;try{s=(yield oe(()=>I.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new F(P.FETCH_AUDIO_FILE_FAILED,g.toString())}}else s=yield new jt((g,f)=>{const A=new FileReader;A.onload=v=>{v.target?g(v.target.result):f(new F(P.READ_LOCAL_AUDIO_FILE_ERROR))},A.onerror=()=>{f(new F(P.READ_LOCAL_AUDIO_FILE_ERROR))},A.readAsArrayBuffer(n)});const c=yield function(h){const g=WD();return new jt((f,A)=>{g.decodeAudioData(h,v=>{f(v)},v=>{A(new F(P.DECODE_AUDIO_FILE_FAILED,v.toString()))})})}(s);return"string"==typeof n&&o&&m.set(n,c),c}),T.apply(this,arguments)}function M(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function j(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?M(Object(s),!0).forEach(function(c){X(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function re(n,o,s,c){s.optimizationMode&&(c&&c.width&&c.height?(s.encoderConfig=j(j({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==s.optimizationMode&&"detail"!==s.optimizationMode||(o.contentHint=s.optimizationMode,o.contentHint===s.optimizationMode?(Q.debug("[".concat(n,"] set content hint to"),s.optimizationMode),Wn("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,s,c])):(Q.debug("[".concat(n,"] set content hint failed")),Wn("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,s,c],"failed")))):(Q.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")),qe("warning",["AgoraRTC"],"[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const _e=Ri().name;function Ue(n,o,s,c){let h,g=0,f=null;return new jt((A,v)=>{setTimeout(()=>{h&&(h(),A(g))},o),h=ej(()=>{!function(){g>c&&h&&(h(),A(g));const E=s.getContext("2d");if(!E){const R=new F(P.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Q.error(R.toString()),void v(R)}E.drawImage(n,0,0,160,120);const S=E.getImageData(0,0,s.width,s.height),w=Math.floor(S.data.length/3);if(f){for(let R=0;R<w;R+=3)if(S.data[R]!==f[R])return g+=1,void(f=S.data);f=S.data}else f=S.data}()},30)})}class Ge{constructor(o,s){X(this,"id",0),X(this,"element",void 0),X(this,"peerPair",void 0),X(this,"context",void 0),X(this,"audioPlayerElement",void 0),X(this,"audioTrack",void 0),Ge.count+=1,this.id=Ge.count,this.element=o,this.context=s}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=o=>{const s=document.createElement("audio");s.srcObject=new MediaStream([o.track]),s.play(),this.audioPlayerElement=s}}switchSdp(){var o=this;return V(function*(){if(!o.peerPair)return;const s=function(){var h=V(function*(g,f){const A="offer"===f?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(A),"complete"===g.iceGatheringState?g.localDescription:new jt(v=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&v(g.localDescription)}})});return function(f,A){return h.apply(this,arguments)}}(),c=function(){var h=V(function*(g,f){return yield g.setRemoteDescription(f)});return function(f,A){return h.apply(this,arguments)}}();try{const h=yield s(o.peerPair[0],"offer");yield c(o.peerPair[1],h);const g=yield s(o.peerPair[1],"answer");yield c(o.peerPair[0],g)}catch(h){throw new F(P.LOCAL_AEC_ERROR,h.toString()).print()}})()}getTracksFromMediaElement(o){var s=this;return V(function*(){if(s.audioTrack)return s.audioTrack;let c;try{o instanceof HTMLVideoElement&&(o.captureStream?o.captureStream():o.mozCaptureStream()),c=s.context.createMediaStreamDestination(),s.context.createMediaElementSource(o).connect(c)}catch(g){throw new F(P.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new F(P.LOCAL_AEC_ERROR,"no dest node when local aec").print();const h=c.stream.getAudioTracks()[0];return s.audioTrack=h,h})()}getElement(){return this.element}startEchoCancellation(){var o=this;return V(function*(){o.context.resume(),o.peerPair&&o.close(),o.initPeers();const s=o.element,c=yield o.getTracksFromMediaElement(s);o.peerPair&&o.peerPair[0].addTrack(c),yield o.switchSdp()})()}close(){Q.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(o=>{o.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var st,Rt;X(Ge,"count",0);const nn=window.AudioContext||window.webkitAudioContext,cn=new(st=QD({report:Xt}),tr((Rt=class{constructor(){X(this,"units",[]),X(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return Q.debug("the system does not need to process local aec"),-1;this.context||(this.context=new nn);let o=this.units.find(s=>s&&s.getElement()===n);return o||(o=new Ge(n,this.context),this.units.push(o)),o.startEchoCancellation(),Q.debug("start processing local audio echo cancellation, id is",o.id),o.id}_doesEnvironmentNeedAEC(){return Ri().name!==Ai.SAFARI}}).prototype,"processExternalMediaAEC",[st],Object.getOwnPropertyDescriptor(Rt.prototype,"processExternalMediaAEC"),Rt.prototype),Rt);kr("PROCESS_ID","process-".concat(_s(8,""),"-").concat(_s(4,""),"-").concat(_s(4,""),"-").concat(_s(4,""),"-").concat(_s(12,""))),function(){const n=Ri();kc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),kc.getStreamFromExtension=n.name===Ai.CHROME&&Number(n.version)>34,kc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const o=new RTCPeerConnection;let s=!1;try{o.addTransceiver("audio"),s=!0}catch{}return o.close(),s}(),kc.supportMinBitrate=n.name===Ai.CHROME||n.name===Ai.EDGE,kc.supportSetRtpSenderParameters=function(){const o=Ri();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Xm()||!(!Bl()&&!k0())||o.name===Ai.FIREFOX&&Number(o.version)>=64)}(),n.name===Ai.SAFARI&&(kc.supportDualStream=Number(n.version)>=14),kc.webAudioMediaStreamDest=function(){const o=Ri();return!(o.name===Ai.SAFARI&&Number(o.version)<12)}(),kc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,kc.supportWebGL=typeof WebGLRenderingContext<"u",kc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Xm()||(kc.webAudioWithAEC=!0),kc.supportShareAudio=function(){const o=Ri();return(o.os===zs.WIN_10||o.os===zs.WIN_81||o.os===zs.WIN_7||o.os===zs.LINUX||o.os===zs.MAC_OS)&&o.name===Ai.CHROME&&Number(o.version)>=74}(),kc.supportDualStreamEncoding=function(){const o=Ri();return"Safari"===o.name&&Number(o.version)>=14}(),Q.info("browser compatibility",JSON.stringify(kc),JSON.stringify(n)),wt("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:kc,browserInfo:n})}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(o){return void Q.error("Error loading sdk config",o.message)}if(n)try{const o=JSON.parse(window.atob(n)),s=Date.now();Q.debug("Loading global parameters from cache",o),wt("debug",[],"loadConfigFromLocalStorage",o),Object.keys(o).forEach(c=>{if(Object.prototype.hasOwnProperty.call(Ui,c)){const{value:h,expires:g}=o[c];if(g&&g<=s)return;Yc[c]=h,Ui[c]=h}})}catch(o){Q.error("Error loading mutableParamsCache: ".concat(n),o.message)}}();const Mn={__CLIENT_LIST__:Ed,__TRACK_LIST__:ul,VERSION:Xo,BUILD:Ru,setParameter:kr,getParameter:mt,getSupportedCodec:function(){var n=V(function*(){let o={audio:[],video:[]};try{let s=new RTCPeerConnection;s.addTransceiver("video",{direction:"recvonly"}),s.addTransceiver("audio",{direction:"recvonly"});const c=(yield s.createOffer()).sdp;if(!c)return o;s.close(),s=null,o=function(h){const g={video:[],audio:[]};return h.match(/ VP8/i)&&g.video.push("VP8"),h.match(/ VP9/i)&&g.video.push("VP9"),h.match(/ AV1/i)&&g.video.push("AV1"),h.match(/ H264/i)&&g.video.push("H264"),h.match(/ opus/i)&&g.audio.push("OPUS"),h.match(/ PCMU/i)&&g.audio.push("PCMU"),h.match(/ PCMA/i)&&g.audio.push("PCMA"),h.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(s){throw new F(P.CREATE_OFFER_FAILED,s.toString&&s.toString()).print()}return o});return function(){return n.apply(this,arguments)}}(),checkSystemRequirements:function(){const n=Xt.reportApiInvoke(null,{name:ur.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:or.TRACER});let o=!1;try{const g=window.RTCPeerConnection,f=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,A=window.WebSocket;o=!!(g&&f&&A)}catch(g){return Q.error("check system requirement failed: ",g),!1}let s=!1;const c=Ri();c.name===Ai.CHROME&&Number(c.version)>=58&&(!function Ww(){return"WebKit"===sl.engine.name}()||function Ll(){const n=Ri();if(k0()){if(n.os===zs.MAC_OS)return!0;if(n.os===zs.IOS){const o=sl.os.version&&sl.os.version.split(".");if(o&&14===Number(o[0])&&o[1]&&Number(o[1])>=3||o&&Number(o[0])>14)return!0}}return!1}())&&(s=!0),c.name===Ai.FIREFOX&&Number(c.version)>=56&&(s=!0),c.name===Ai.OPERA&&Number(c.version)>=45&&(s=!0),c.name===Ai.SAFARI&&Number(c.version)>=11&&(s=!0),(al()||Ri().name===Ai.QQ)&&(s=!0),Q.debug("checkSystemRequirements, api:",o,"browser",s);const h=o&&s;return n.onSuccess(h),h},getDevices:function(n){return Kl.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return Kl.getRecordingDevices(n)},getCameras:function(n){return Kl.getCamerasDevices(n)},getElectronScreenSources:tj,getPlaybackDevices:function(n){return Kl.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const o=Xt.reportApiInvoke(null,{name:ur.CREATE_CLIENT,options:[n],tag:or.TRACER});try{QF(n)}catch(s){throw o.onError(s),s}return void 0===n.audioCodec&&(n.audioCodec="opus"),o.onSuccess(),new a(e(e({forceWaitGatewayResponse:!0},n),{},{role:"rtc"===n.mode?"host":n.role}))},createCameraVideoTrack:function(){var n=V(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_CAM_VIDEO_TRACK,options:[j({},o)]}),c=KU(o),h=_s(8,"track-cam-");let g=null;Q.info("start create camera video track with config",JSON.stringify(o),"trackId",h),Wn("info",["AgoraRTC"],"createCameraVideoTrack",o);try{g=(yield pl({video:c},h)).getVideoTracks()[0]||null}catch(A){throw s.onError(A),A}if(!g){const A=new F(P.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(A),A.throw()}o.optimizationMode&&re(h,g,o,o.encoderConfig&&An(o.encoderConfig));const f=new q8(g,o,c,o.scalabiltyMode?cr(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,h);return s.onSuccess(f.getTrackId()),Q.info("create camera video success, trackId:",h),Wn("info",["AgoraRTC"],"createCameraVideoTrack",void 0,h),f});return function(){return n.apply(this,arguments)}}(),createCustomVideoTrack:function(n){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),s=new qs(n.mediaStreamTrack,{bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?cr(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode);return o.onSuccess(s.getTrackId()),Q.info("create custom video track success with config",n,"trackId",s.getTrackId()),Wn("info",["AgoraRTC"],"createCustomVideoTrack",n,s.getTrackId()),s},createScreenVideoTrack:function(){var n=V(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_SCREEN_VIDEO_TRACK,options:[j({},o),s]});o.encoderConfig?"string"==typeof o.encoderConfig||o.encoderConfig.width&&o.encoderConfig.height||(o.encoderConfig.width={max:1920},o.encoderConfig.height={max:1080}):o.encoderConfig="1080p_2";const h=iG(o),g=_s(8,"track-scr");let f=null,A=null;const v=Zc();if(!v.supportShareAudio&&"enable"===s){const w=new F(P.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(w),w.throw()}Q.info("start create screen video track with config",o,"withAudio",s,"trackId",g),Wn("info",["AgoraRTC"],"createScreenVideoTrack",[o,s]);try{const w=yield pl({screen:h,screenAudio:"auto"===s?v.supportShareAudio:"enable"===s},g);f=w.getVideoTracks()[0]||null,A=w.getAudioTracks()[0]||null}catch(w){throw c.onError(w),w}if(!f){const w=new F(P.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(w),w.throw()}if(!A&&"enable"===s){f&&f.stop();const w=new F(P.SHARE_AUDIO_NOT_ALLOWED);return c.onError(w),w.throw()}o.optimizationMode||(o.optimizationMode="detail"),o.optimizationMode&&(re(g,f,o,o.encoderConfig&&qn(o.encoderConfig)),o.encoderConfig&&"string"!=typeof o.encoderConfig&&(o.encoderConfig.bitrateMin=o.encoderConfig.bitrateMax));const E=new qs(f,o.encoderConfig?qn(o.encoderConfig):{},o.scalabiltyMode?cr(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,g,[Xc.SCREEN_TRACK]);if(!A)return c.onSuccess(E.getTrackId()),Q.info("create screen video track success","video:",E.getTrackId()),Wn("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:E.getTrackId()}),E;const S=new pc(A);return c.onSuccess([E.getTrackId(),S.getTrackId()]),Q.info("create screen video track success","video:",E.getTrackId(),"audio:",S.getTrackId()),Wn("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:E.getTrackId(),audioTrack:S.getTrackId()}),[E,S]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var n=V(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_MIC_AND_CAM_TRACKS,options:[o,s]}),h=KU(s),g=oG(o),f=_s(8,"track-mic-"),A=_s(8,"track-cam-");let v=null,E=null;Q.info("start create camera video track(".concat(A,") and microphone audio track(").concat(f,") with config, audio: ").concat(JSON.stringify(o),", video: ").concat(JSON.stringify(s))),Wn("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:s,audioConfig:o});try{const R=yield pl({audio:g,video:h},"".concat(f,"-").concat(A));v=R.getAudioTracks()[0],E=R.getVideoTracks()[0]}catch(R){throw c.onError(R),R}if(!v||!E){const R=new F(P.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(R),R.throw()}s.optimizationMode&&re(A,E,s,s.encoderConfig&&An(s.encoderConfig));const S=new nS(v,o,g,f),w=new q8(E,s,h,s.scalabiltyMode?cr(s.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},s.optimizationMode,A);return c.onSuccess([S.getTrackId(),w.getTrackId()]),Q.info("create camera video track(".concat(A,") and microphone audio track(").concat(f,") success")),Wn("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:A,audioTrackId:f}),[S,w]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var n=V(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_MIC_AUDIO_TRACK,options:[o]}),c=oG(o),h=_s(8,"track-mic-");let g=null;Q.info("start create microphone audio track with config",JSON.stringify(o),"trackId",h),Wn("info",["AgoraRTC"],"createMicrophoneAudioTrack",o);try{g=(yield pl({audio:c},h)).getAudioTracks()[0]||null}catch(A){throw s.onError(A),A}if(!g){const A=new F(P.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(A),A.throw()}const f=new nS(g,o,c,h);return s.onSuccess(f.getTrackId()),Q.info("create microphone audio track success, trackId:",h),Wn("info",["AgoraRTC"],"createMicrophoneAudioTrack",o,h),f});return function(){return n.apply(this,arguments)}}(),createCustomAudioTrack:function(n){const o=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),s=new pc(n.mediaStreamTrack,n.encoderConfig?Yr(n.encoderConfig):{});return Q.info("create custom audio track success with config",n,"trackId",s.getTrackId()),Wn("info",["AgoraRTC"],"createCustomAudioTrack",n,s.getTrackId()),o.onSuccess(s.getTrackId()),s},createBufferSourceAudioTrack:function(){var n=V(function*(o){const s=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CREATE_BUFFER_AUDIO_TRACK,options:[o]}),c=_s(8,"track-buf-");Q.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",c),Wn("info",[],"createBufferSourceAudioTrack",o);const h=o.source;if(!(o.source instanceof AudioBuffer))try{o.source=yield function b(n,o){return T.apply(this,arguments)}(o.source,o.cacheOnlineFile)}catch(A){return s.onError(A),A.throw()}const g=new d(o.source),f=new dj(h,g,o.encoderConfig?Yr(o.encoderConfig):{},c);return Q.info("create buffer source audio track success, trackId:",c),Wn("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),s.onSuccess(f.getTrackId()),f});return function(s){return n.apply(this,arguments)}}(),setLogLevel:function(n){mt("USE_NEW_LOG")?function(o){o=Math.min(Math.max(0,o),4),zt=o}(n):Q.setLogLevel(n)},enableLogUpload:function(){mt("USE_NEW_LOG")?kr("UPLOAD_LOG",!0):Q.enableLogUpload()},disableLogUpload:function(){mt("USE_NEW_LOG")?kr("UPLOAD_LOG",!1):Q.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new jU},checkAudioTrackIsActive:function(){var n=V(function*(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[s]});if(!(o instanceof pc||o instanceof Lk)){const E=new F(P.INVALID_TRACK,"the parameter is not a audio track");return c.onError(E),E.throw()}s&&s<1e3&&(s=1e3);const h=o instanceof pc?o.getTrackLabel():"remote_track",g=o.getVolumeLevel();let f=g,A=g;const v=Date.now();return new jt(E=>{const S=setInterval(()=>{const w=o.getVolumeLevel();f=w>f?w:f,A=w<A?w:A;const R=f-A>1e-4,x=Date.now()-v;if(R||x>s){clearInterval(S);const W=R,K={duration:x,deviceLabel:h,maxVolumeLevel:f,result:W};Q.info("[track-".concat(o.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(K))),c.onSuccess(K),E(W)}},200)})});return function(s){return n.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var n=V(function*(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Xt.reportApiInvoke(null,{tag:or.TRACER,name:ur.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[s]});if(!(o instanceof qs||o instanceof pL)){const x=new F(P.INVALID_TRACK,"the parameter is not a video track");return c.onError(x),x.throw()}const h=4;s&&s<1e3&&(s=1e3);const g=o instanceof qs?o.getTrackLabel():"remote_track",f=o.getMediaStreamTrack(!0),A=document.createElement("video");A.style.width="1px",A.style.height="1px",A.setAttribute("muted",""),A.muted=!0,A.setAttribute("playsinline",""),A.controls=!1,(Bl()||k0())&&(A.style.opacity="0.01",A.style.position="fixed",A.style.left="0",A.style.top="0",document.body.appendChild(A)),A.srcObject=new MediaStream([f]),A.play();const v=document.createElement("canvas");v.width=160,v.height=120;let E=0,S=0;try{const x=Date.now();E=yield Ue(A,s,v,h),S=Date.now()-x}catch(x){throw c.onError(x),x}_e===Ai.SAFARI&&(A.pause(),A.remove()),A.srcObject=null;const w=E>h,R={duration:S,changedPicNum:E,deviceLabel:g,result:w};return Q.info("[track-".concat(o.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),c.onSuccess(R),w});return function(s){return n.apply(this,arguments)}}(),setArea:function(n){const o=Xt.reportApiInvoke(null,{name:ur.SET_AREA,options:n,tag:or.TRACER});try{let s=[];if("string"==typeof n&&(s=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!EM.includes(h))throw new F(P.INVALID_PARAMS,"invalid area code")}),s=n),"[object Object]"===Object.prototype.toString.call(n)){const{areaCode:h,excludedArea:g}=n;if(!h)throw new F(P.INVALID_PARAMS,"area code is needed");let f=h;"string"==typeof h&&(f=[h]),s=g?function(n,o){let s=[];if(n.includes(li.GLOBAL)){const g=[li.GLOBAL,li.OVERSEA],f=Object.keys(RD);if(o===li.GLOBAL)throw new F(P.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(o===li.CHINA)s=[li.OVERSEA];else if(xU.includes(o)){const A=xx[li.GLOBAL][o]||[],v=[...g,o,...A];s=f.filter(E=>!v.includes(E))}else if(function(A){let v=!1;return xU.forEach(E=>{xx[li.GLOBAL][E].includes(A)&&(v=!0)}),v}(o)){const A=function(E){let S;return xU.forEach(w=>{xx[li.GLOBAL][w].includes(E)&&(S=w)}),S}(o),v=[...g,A,o];s=f.filter(E=>!v.includes(E))}else s=n;s=function(A){const v=[];return y8.forEach(E=>{A.includes(E)&&v.push(E)}),v.concat(A.filter(E=>!y8.includes(E)))}(s)}else s=n;return s}(f,g):f}kr("AREAS",s);const c=(h=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return h.map(f=>{const A=RD[f],v=Object.keys(A);v&&v.map(E=>{"CODE"!==E&&(g[E]=g[E].concat(A[E]))})}),g})(s);Object.keys(c).map(h=>{kr(h,"LOG_UPLOAD_SERVER"===h||"EVENT_REPORT_DOMAIN"===h||"EVENT_REPORT_BACKUP_DOMAIN"===h||"PROXY_SERVER_TYPE3"===h?c[h][0]:c[h])}),Q.debug("set area success:",s.join(","))}catch(s){throw o.onError(s),s}o.onSuccess()},loadModule:function(){var n=V(function*(o,s){if(Q.debug("loadModule: ".concat(o.name,", loadOption: ").concat(JSON.stringify(s))),!o.moduleInit)throw Q.debug("Invalid Plugin"),new F(P.INVALID_PLUGIN,"invalid plugin");try{GD.installPlugin(o),yield o.moduleInit({logger:Q,report:Xt,pluginCenter:GD,getParameter:mt},s)}catch(c){throw new F(P.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(s,c){return n.apply(this,arguments)}}(),audioElementPlayCenter:wd,processExternalMediaAEC:function(n){cn.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(o=>{const s=o;s.__registered__=!0,s.logger.hookLog=Q.extLog,s.reporter.hookApiInvoke=Xt.extApiInvoke,s.parameters&&Object.keys(s.parameters).forEach(c=>{s.parameters[c]=mt(c)})})},ChannelMediaRelayError:V_,ChannelMediaRelayEvent:Vf,ChannelMediaRelayState:uc,RemoteStreamFallbackType:V4,RemoteStreamType:WF,ConnectionDisconnectedReason:aa,AudienceLatencyLevelType:vM,AREAS:li};return Object.defineProperties(Mn,{onAudioAutoplayFailed:{get:()=>Cd.onAudioAutoplayFailed,set:n=>{Cd.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Cd.onAutoplayFailed,set:n=>{Cd.onAutoplayFailed=n}}}),Kl.on(tg.CAMERA_DEVICE_CHANGED,n=>{Q.info("camera device changed",JSON.stringify(n)),Mn.onCameraChanged&&Mn.onCameraChanged(n)}),Kl.on(tg.RECORDING_DEVICE_CHANGED,n=>{Q.info("microphone device changed",JSON.stringify(n)),Mn.onMicrophoneChanged&&Mn.onMicrophoneChanged(n)}),Kl.on(tg.PLAYOUT_DEVICE_CHANGED,n=>{Q.debug("playout device changed",JSON.stringify(n)),Mn.onPlaybackDeviceChanged&&Mn.onPlaybackDeviceChanged(n)}),wd.onAutoplayFailed=()=>{Q.info("detect audio element autoplay failed"),Cd.onAudioAutoplayFailed&&Cd.onAudioAutoplayFailed()},$r.on("autoplay-failed",()=>{Q.info("detect webaudio autoplay failed"),Cd.onAudioAutoplayFailed&&Cd.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Mn),Mn}()},9069:Re=>{"use strict";var V,Pe="object"==typeof Reflect?Reflect:null,$=Pe&&"function"==typeof Pe.apply?Pe.apply:function(fe,we,Se){return Function.prototype.apply.call(fe,we,Se)};V=Pe&&"function"==typeof Pe.ownKeys?Pe.ownKeys:Object.getOwnPropertySymbols?function(fe){return Object.getOwnPropertyNames(fe).concat(Object.getOwnPropertySymbols(fe))}:function(fe){return Object.getOwnPropertyNames(fe)};var se=Number.isNaN||function(fe){return fe!=fe};function z(){z.init.call(this)}Re.exports=z,Re.exports.once=function q(Oe,fe){return new Promise(function(we,Se){function ge(pe){Oe.removeListener(fe,ue),Se(pe)}function ue(){"function"==typeof Oe.removeListener&&Oe.removeListener("error",ge),we([].slice.call(arguments))}Ee(Oe,fe,ue,{once:!0}),"error"!==fe&&function ce(Oe,fe,we){"function"==typeof Oe.on&&Ee(Oe,"error",fe,we)}(Oe,ge,{once:!0})})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var H=10;function N(Oe){if("function"!=typeof Oe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Oe)}function k(Oe){return void 0===Oe._maxListeners?z.defaultMaxListeners:Oe._maxListeners}function L(Oe,fe,we,Se){var ge,ue,pe;if(N(we),void 0===(ue=Oe._events)?(ue=Oe._events=Object.create(null),Oe._eventsCount=0):(void 0!==ue.newListener&&(Oe.emit("newListener",fe,we.listener?we.listener:we),ue=Oe._events),pe=ue[fe]),void 0===pe)pe=ue[fe]=we,++Oe._eventsCount;else if("function"==typeof pe?pe=ue[fe]=Se?[we,pe]:[pe,we]:Se?pe.unshift(we):pe.push(we),(ge=k(Oe))>0&&pe.length>ge&&!pe.warned){pe.warned=!0;var Ie=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(fe)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ie.name="MaxListenersExceededWarning",Ie.emitter=Oe,Ie.type=fe,Ie.count=pe.length,function Y(Oe){console&&console.warn&&console.warn(Oe)}(Ie)}return Oe}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ee(Oe,fe,we){var Se={fired:!1,wrapFn:void 0,target:Oe,type:fe,listener:we},ge=U.bind(Se);return ge.listener=we,Se.wrapFn=ge,ge}function ae(Oe,fe,we){var Se=Oe._events;if(void 0===Se)return[];var ge=Se[fe];return void 0===ge?[]:"function"==typeof ge?we?[ge.listener||ge]:[ge]:we?function J(Oe){for(var fe=new Array(Oe.length),we=0;we<fe.length;++we)fe[we]=Oe[we].listener||Oe[we];return fe}(ge):he(ge,ge.length)}function de(Oe){var fe=this._events;if(void 0!==fe){var we=fe[Oe];if("function"==typeof we)return 1;if(void 0!==we)return we.length}return 0}function he(Oe,fe){for(var we=new Array(fe),Se=0;Se<fe;++Se)we[Se]=Oe[Se];return we}function Ee(Oe,fe,we,Se){if("function"==typeof Oe.on)Se.once?Oe.once(fe,we):Oe.on(fe,we);else{if("function"!=typeof Oe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Oe);Oe.addEventListener(fe,function ge(ue){Se.once&&Oe.removeEventListener(fe,ge),we(ue)})}}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(Oe){if("number"!=typeof Oe||Oe<0||se(Oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Oe+".");H=Oe}}),z.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(fe){if("number"!=typeof fe||fe<0||se(fe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+fe+".");return this._maxListeners=fe,this},z.prototype.getMaxListeners=function(){return k(this)},z.prototype.emit=function(fe){for(var we=[],Se=1;Se<arguments.length;Se++)we.push(arguments[Se]);var ge="error"===fe,ue=this._events;if(void 0!==ue)ge=ge&&void 0===ue.error;else if(!ge)return!1;if(ge){var pe;if(we.length>0&&(pe=we[0]),pe instanceof Error)throw pe;var Ie=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Ie.context=pe,Ie}var je=ue[fe];if(void 0===je)return!1;if("function"==typeof je)$(je,this,we);else{var Le=je.length,Qe=he(je,Le);for(Se=0;Se<Le;++Se)$(Qe[Se],this,we)}return!0},z.prototype.on=z.prototype.addListener=function(fe,we){return L(this,fe,we,!1)},z.prototype.prependListener=function(fe,we){return L(this,fe,we,!0)},z.prototype.once=function(fe,we){return N(we),this.on(fe,ee(this,fe,we)),this},z.prototype.prependOnceListener=function(fe,we){return N(we),this.prependListener(fe,ee(this,fe,we)),this},z.prototype.off=z.prototype.removeListener=function(fe,we){var Se,ge,ue,pe,Ie;if(N(we),void 0===(ge=this._events))return this;if(void 0===(Se=ge[fe]))return this;if(Se===we||Se.listener===we)0==--this._eventsCount?this._events=Object.create(null):(delete ge[fe],ge.removeListener&&this.emit("removeListener",fe,Se.listener||we));else if("function"!=typeof Se){for(ue=-1,pe=Se.length-1;pe>=0;pe--)if(Se[pe]===we||Se[pe].listener===we){Ie=Se[pe].listener,ue=pe;break}if(ue<0)return this;0===ue?Se.shift():function te(Oe,fe){for(;fe+1<Oe.length;fe++)Oe[fe]=Oe[fe+1];Oe.pop()}(Se,ue),1===Se.length&&(ge[fe]=Se[0]),void 0!==ge.removeListener&&this.emit("removeListener",fe,Ie||we)}return this},z.prototype.removeAllListeners=function(fe){var we,Se,ge;if(void 0===(Se=this._events))return this;if(void 0===Se.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Se[fe]&&(0==--this._eventsCount?this._events=Object.create(null):delete Se[fe]),this;if(0===arguments.length){var pe,ue=Object.keys(Se);for(ge=0;ge<ue.length;++ge)"removeListener"!==(pe=ue[ge])&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(we=Se[fe]))this.removeListener(fe,we);else if(void 0!==we)for(ge=we.length-1;ge>=0;ge--)this.removeListener(fe,we[ge]);return this},z.prototype.listeners=function(fe){return ae(this,fe,!0)},z.prototype.rawListeners=function(fe){return ae(this,fe,!1)},z.listenerCount=function(Oe,fe){return"function"==typeof Oe.listenerCount?Oe.listenerCount(fe):de.call(Oe,fe)},z.prototype.listenerCount=de,z.prototype.eventNames=function(){return this._eventsCount>0?V(this._events):[]}},302:(Re,Pe,$)=>{"use strict";var V=$(8126);Re.exports=function Y(se,z,H,N){var k,L=new Error("Canceled");return new V(function(ee,ae,de){var he;se(function(J){return de()?V.reject(L):(he=z(J),H(he).then(function(ce){if(de())throw L;return k=ce()}))}).then(function(J){if(de())throw J.disconnect(),L;ee(N(he,J))}).catch(function(J){ae(J)})},function(){k&&k.cancel()})}},5769:(Re,Pe,$)=>{"use strict";var V=$(1647).MediaStreamTrack,Y=$(7627),se=Y.guessBrowser,z=Y.guessBrowserVersion,H=$(302),N=$(8130),k=$(3383),L=$(3744),U=$(4920),ee=$(7379),ae=ee.LocalAudioTrack,de=ee.LocalDataTrack,he=ee.LocalVideoTrack,te=$(4621),J=$(7406),q=$(448),ce=$(9739),Ee=ce.asLocalTrack,Oe=ce.buildLogLevels,fe=ce.filterObject,we=ce.isNonArrayObject,Se=$(8701),ge=Se.DEFAULT_ENVIRONMENT,ue=Se.DEFAULT_LOG_LEVEL,pe=Se.DEFAULT_LOGGER_NAME,Ie=Se.DEFAULT_REALM,je=Se.DEFAULT_REGION,Le=Se.WS_SERVER,Qe=Se.SDK_NAME,$e=Se.SDK_VERSION,Xe=Se.typeErrors,Me=$(8126),Qt=$(8606),Wt=$(1458),St=$(1501).kG,Ke="safari"===se()&&z(),Fe=0,We=!1,De=!1;if(Ke){var et=Ke.major;De=et<12||12===et&&Ke.minor<1}var Zt=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),Mt=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function Ct(Fn,fn,ro){ro.forEach(function(Go){var Js=Go.didWarn,To=Go.name,xs=Go.newName,Ro=Go.shouldDelete;To in Fn&&typeof Fn[To]<"u"&&(xs&&Ro&&(Fn[xs]=Fn[To]),Ro&&delete Fn[To],!Js&&!["error","off"].includes(fn.level)&&(fn.warn('The ConnectOptions "'+To+'" is '+(xs?'deprecated and scheduled for removal. Please use "'+xs+'" instead.':"no longer applicable and will be ignored.")),Go.didWarn=!0))})}function Ht(Fn,fn,ro,Go,Js,To){var xs=Fn.createLocalParticipantSignaling(ro,Go);return fn.debug("Creating a new LocalParticipant:",xs),new Js.LocalParticipant(xs,To,Js)}function sn(Fn,fn,ro){var Go=new J(fn,ro,Fn),Js=Fn.log;return Js.debug("Creating a new Room:",Go),ro.on("stateChanged",function To(xs){"disconnected"===xs&&(Js.info("Disconnected from Room:",Go.toString()),ro.removeListener("stateChanged",To))}),Go}function ze(Fn,fn,ro,Go,Js,To){return fn.log.debug("Creating a new RoomSignaling"),ro.connect(To._signaling,Fn,Go,Js,fn)}function xe(Fn,fn){var ro=Fn.log;return Fn.shouldStopLocalTracks=!Fn.tracks,Fn.shouldStopLocalTracks?ro.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(ro.info("Getting LocalTracks"),ro.debug("Options:",Fn)),Fn.createLocalTracks(Fn).then(function(Js){var To=fn(Js);return To.catch(function(){Fn.shouldStopLocalTracks&&(ro.info("The automatically acquired LocalTracks will now be stopped"),Js.forEach(function(Ro){Ro.stop()}))}),To})}function ut(Fn){var fn="string"==typeof Fn?{codec:Fn}:Fn;switch(fn.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},fn);case"vp8":return Object.assign({simulcast:!1},fn);default:return fn}}Re.exports=function tn(Fn,fn){if(typeof fn>"u"&&(fn={}),!we(fn))return Me.reject(Xe.INVALID_TYPE("options","object"));var Ro,ro=fn.Log||Wt,Go=fn.loggerName||pe,Js=fn.logLevel||ue,To=Oe(Js),xs="[connect #"+ ++Fe+"]";try{Ro=new ro("default",xs,To,Go)}catch(Tr){return Me.reject(Tr)}Ct(fn,Ro,Zt);var fl="auto"===fn.preferredVideoCodecs;if(fl&&(fn.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),fn.maxVideoBitrate&&fl)return Ro.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),Me.reject(Xe.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var jn={};"string"==typeof(fn=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:ge,eventListener:null,insights:!0,LocalAudioTrack:ae,LocalDataTrack:de,LocalParticipant:k,LocalVideoTrack:he,Log:ro,MediaStreamTrack:V,loggerName:Go,logLevel:Js,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:Ie,region:je,signaling:q},fe(fn))).wsServerInsights&&(jn.gateway=fn.wsServerInsights);var Je=new(fn.insights?L:U)(Fn,Qe,$e,fn.environment,fn.realm,jn),pt=Le(fn.environment,fn.region),gt=new Qt(Je,Date.now(),Ro,fn.eventListener);if((fn=Object.assign({eventObserver:gt,wsServer:pt},fn)).log=Ro,De&&!We&&"error"!==Ro.logLevel&&"off"!==Ro.logLevel&&(We=!0,Ro.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof Fn)return Me.reject(Xe.INVALID_TYPE("token","string"));var an=Object.assign({},fn);if(delete an.name,"tracks"in fn){if(!Array.isArray(fn.tracks))return Me.reject(Xe.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{fn.tracks=fn.tracks.map(function(Tr){return Ee(Tr,an)})}catch(Tr){return Me.reject(Tr)}}var gn=St(fn.bandwidthProfile);if(gn)return Me.reject(gn);fn.clientTrackSwitchOffControl="disabled",fn.contentPreferencesMode="disabled",fn.bandwidthProfile&&(fn.clientTrackSwitchOffControl="auto",fn.contentPreferencesMode="auto",fn.bandwidthProfile.video&&(Ct(fn.bandwidthProfile.video,Ro,Mt),fn.clientTrackSwitchOffControl="maxTracks"in fn.bandwidthProfile.video?"disabled":"manual"===fn.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",fn.contentPreferencesMode="renderDimensions"in fn.bandwidthProfile.video?"disabled":"manual"===fn.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var Oo=new(0,fn.signaling)(fn.wsServer,fn);Ro.info("Connecting to a Room"),Ro.debug("Options:",fn);var Es=new N({maxAudioBitrate:fn.maxAudioBitrate,maxVideoBitrate:fn.maxVideoBitrate},fl),js={audio:fn.preferredAudioCodecs.map(ut),video:fn.preferredVideoCodecs.map(ut)},Ao=new te(we(fn.networkQuality)?fn.networkQuality:{}),lo=H(xe.bind(null,fn),Ht.bind(null,Oo,Ro,Es,Ao,fn),ze.bind(null,Fn,fn,Oo,Es,js),sn.bind(null,fn));return lo.then(function(Tr){return Je.connect(Tr.sid,Tr.localParticipant.sid),Ro.info("Connected to Room:",Tr.toString()),Ro.info("Room name:",Tr.name),Ro.debug("Room:",Tr),Tr.once("disconnected",function(){return Je.disconnect()}),Tr},function(Tr){Je.disconnect(),lo._isCanceled?Ro.info("Attempt to connect to a Room was canceled"):Ro.info("Error while connecting to a Room:",Tr)}),lo}},8765:(Re,Pe,$)=>{"use strict";var V=$(8701),Y=V.DEFAULT_LOG_LEVEL,se=V.DEFAULT_LOGGER_NAME;function z(k,L){L=Object.assign({loggerName:se,logLevel:Y},L);var U={};U.loggerName=L.loggerName,U.logLevel=L.logLevel,delete L.loggerName,delete L.logLevel;var ee=L.createLocalTracks;return delete L.createLocalTracks,U[k]=!(Object.keys(L).length>0)||L,ee(U).then(function(ae){return ae[0]})}Re.exports={audio:function H(k){return z("audio",k)},video:function N(k){return z("video",k)}}},7124:function(Re,Pe,$){"use strict";var V=this&&this.__assign||function(){return V=Object.assign||function(ge){for(var ue,pe=1,Ie=arguments.length;pe<Ie;pe++)for(var je in ue=arguments[pe])Object.prototype.hasOwnProperty.call(ue,je)&&(ge[je]=ue[je]);return ge},V.apply(this,arguments)},Y=this&&this.__awaiter||function(ge,ue,pe,Ie){return new(pe||(pe=Promise))(function(Le,Qe){function $e(Qt){try{Me(Ie.next(Qt))}catch(Wt){Qe(Wt)}}function Xe(Qt){try{Me(Ie.throw(Qt))}catch(Wt){Qe(Wt)}}function Me(Qt){Qt.done?Le(Qt.value):function je(Le){return Le instanceof pe?Le:new pe(function(Qe){Qe(Le)})}(Qt.value).then($e,Xe)}Me((Ie=Ie.apply(ge,ue||[])).next())})},se=this&&this.__generator||function(ge,ue){var Ie,je,Le,Qe,pe={label:0,sent:function(){if(1&Le[0])throw Le[1];return Le[1]},trys:[],ops:[]};return Qe={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(Qe[Symbol.iterator]=function(){return this}),Qe;function $e(Me){return function(Qt){return function Xe(Me){if(Ie)throw new TypeError("Generator is already executing.");for(;pe;)try{if(Ie=1,je&&(Le=2&Me[0]?je.return:Me[0]?je.throw||((Le=je.return)&&Le.call(je),0):je.next)&&!(Le=Le.call(je,Me[1])).done)return Le;switch(je=0,Le&&(Me=[2&Me[0],Le.value]),Me[0]){case 0:case 1:Le=Me;break;case 4:return pe.label++,{value:Me[1],done:!1};case 5:pe.label++,je=Me[1],Me=[0];continue;case 7:Me=pe.ops.pop(),pe.trys.pop();continue;default:if(!(Le=(Le=pe.trys).length>0&&Le[Le.length-1])&&(6===Me[0]||2===Me[0])){pe=0;continue}if(3===Me[0]&&(!Le||Me[1]>Le[0]&&Me[1]<Le[3])){pe.label=Me[1];break}if(6===Me[0]&&pe.label<Le[1]){pe.label=Le[1],Le=Me;break}if(Le&&pe.label<Le[2]){pe.label=Le[2],pe.ops.push(Me);break}Le[2]&&pe.ops.pop(),pe.trys.pop();continue}Me=ue.call(ge,pe)}catch(Qt){Me=[6,Qt],je=0}finally{Ie=Le=0}if(5&Me[0])throw Me[1];return{value:Me[0]?Me[1]:void 0,done:!0}}([Me,Qt])}}},z=this&&this.__read||function(ge,ue){var pe="function"==typeof Symbol&&ge[Symbol.iterator];if(!pe)return ge;var je,Qe,Ie=pe.call(ge),Le=[];try{for(;(void 0===ue||ue-- >0)&&!(je=Ie.next()).done;)Le.push(je.value)}catch($e){Qe={error:$e}}finally{try{je&&!je.done&&(pe=Ie.return)&&pe.call(Ie)}finally{if(Qe)throw Qe.error}}return Le},H=this&&this.__spreadArray||function(ge,ue){for(var pe=0,Ie=ue.length,je=ge.length;pe<Ie;pe++,je++)ge[je]=ue[pe];return ge};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.createLocalTracks=void 0;var N=$(9739),k=N.asLocalTrack,L=N.buildLogLevels,U=$(1647),ee=U.getUserMedia,ae=U.MediaStreamTrack,de=$(7379),he=de.LocalAudioTrack,te=de.LocalDataTrack,J=de.LocalVideoTrack,q=$(1458),ce=$(8701),Ee=ce.DEFAULT_LOG_LEVEL,Oe=ce.DEFAULT_LOGGER_NAME,fe=$(3830),we=0;Pe.createLocalTracks=function Se(ge){return Y(this,void 0,void 0,function(){var ue,pe,Ie,je,Le,Qe,$e,Xe,Me,Qt,Wt,St;return se(this,function(Ke){switch(Ke.label){case 0:if(pe=V({audio:ue=!(ge&&("audio"in ge||"video"in ge)),getUserMedia:ee,loggerName:Oe,logLevel:Ee,LocalAudioTrack:he,LocalDataTrack:te,LocalVideoTrack:J,MediaStreamTrack:ae,Log:q,video:ue},ge),Ie="[createLocalTracks #"+ ++we+"]",je=L(pe.logLevel),Le=new pe.Log("default",Ie,je,pe.loggerName),delete(Qe=Object.assign({log:Le},pe)).name,!1===pe.audio&&!1===pe.video)return Le.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(pe.tracks)return Le.info("Adding user-provided LocalTracks"),Le.debug("LocalTracks:",pe.tracks),[2,pe.tracks];($e={audio:"object"==typeof pe.audio&&pe.audio.name?{name:pe.audio.name}:{},video:"object"==typeof pe.video&&pe.video.name?{name:pe.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,$e.video.isCreatedByCreateLocalTracks=!0,"object"==typeof pe.audio&&"boolean"==typeof pe.audio.workaroundWebKitBug1208516&&($e.audio.workaroundWebKitBug1208516=pe.audio.workaroundWebKitBug1208516),"object"==typeof pe.video&&"boolean"==typeof pe.video.workaroundWebKitBug1208516&&($e.video.workaroundWebKitBug1208516=pe.video.workaroundWebKitBug1208516),"object"==typeof pe.audio&&delete pe.audio.name,"object"==typeof pe.video&&delete pe.video.name,Xe={audio:pe.audio,video:pe.video},Me="object"==typeof pe.audio&&pe.audio.workaroundWebKitBug180748,Ke.label=1;case 1:return Ke.trys.push([1,3,,4]),[4,Me?fe(Le,pe.getUserMedia,Xe):pe.getUserMedia(Xe)];case 2:return Qt=Ke.sent(),Wt=H(H([],z(Qt.getAudioTracks())),z(Qt.getVideoTracks())),Le.info("Call to getUserMedia successful; got MediaStreamTracks:",Wt),[2,Wt.map(function(Fe){return k(Fe,V(V({},$e[Fe.kind]),Qe))})];case 3:throw St=Ke.sent(),Le.warn("Call to getUserMedia failed:",St),St;case 4:return[2]}})})}},2498:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(5295),se=$(9020),z=function(H){function N(k){var L=H.call(this,k.label,k.maxPacketLifeTime,k.maxRetransmits,k.ordered)||this;return Object.defineProperties(L,{_dataChannel:{value:k}}),k.binaryType="arraybuffer",k.addEventListener("message",function(U){L.emit("message",U.data)}),k.addEventListener("close",function(){L.emit("close")}),L}return V(N,H),N.prototype.stop=function(){this._dataChannel.close(),H.prototype.stop.call(this)},N.prototype.toDataTransport=function(){return new se(this._dataChannel)},N}(Y);Re.exports=z},1866:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(5295),se=$(9739).makeUUID,z=function(H){function N(k,L,U){var ee=H.call(this,se(),k,L,U)||this;return Object.defineProperties(ee,{_clones:{value:new Set},_dataChannels:{value:new Set}}),ee}return V(N,H),N.prototype._addClone=function(k){this._clones.add(k)},N.prototype.removeClone=function(k){this._clones.delete(k)},N.prototype.addDataChannel=function(k){return this._dataChannels.add(k),this},N.prototype.clone=function(){var k=this,L=new N(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(L),L.once("stopped",function(){return k.removeClone(L)}),L},N.prototype.removeDataChannel=function(k){return this._dataChannels.delete(k),this},N.prototype.send=function(k){return this._dataChannels.forEach(function(L){try{L.send(k)}catch{}}),this._clones.forEach(function(L){try{L.send(k)}catch{}}),this},N.prototype.stop=function(){this._dataChannels.forEach(function(k){return k.close()}),this._clones.forEach(function(k){return k.stop()}),H.prototype.stop.call(this)},N}(Y);Re.exports=z},5295:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U){var ee=z.call(this,N,"data")||this;return Object.defineProperties(ee,{maxPacketLifeTime:{enumerable:!0,value:k},maxRetransmits:{enumerable:!0,value:L},ordered:{enumerable:!0,value:U}}),ee}return V(H,z),H}($(4605));Re.exports=se},9020:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N){var k=z.call(this)||this;return Object.defineProperties(k,{_dataChannel:{value:N},_messageQueue:{value:[]}}),N.addEventListener("open",function(){k._messageQueue.splice(0).forEach(function(L){return k._publish(L)})}),N.addEventListener("message",function(L){var U=L.data;try{var ee=JSON.parse(U);k.emit("message",ee)}catch{}}),k.publish({type:"ready"}),k}return V(H,z),H.prototype._publish=function(N){var k=JSON.stringify(N);try{this._dataChannel.send(k)}catch{}},H.prototype.publish=function(N){var k=this._dataChannel;return"closing"!==k.readyState&&"closed"!==k.readyState&&("connecting"===k.readyState?(this._messageQueue.push(N),!0):(this._publish(N),!0))},H}($(9069).EventEmitter);Re.exports=se},8130:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this)||this;return N=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},N),Object.defineProperties(L,{maxAudioBitrate:{value:N.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:N.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:k}}),L}return V(H,z),H.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},H.prototype.update=function(N){var k=this;N=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},N),["maxAudioBitrate","maxVideoBitrate"].reduce(function(U,ee){return k[ee]!==N[ee]&&(k[ee]=N[ee],U=!0),U},!1)&&this.emit("changed")},H}($(9069).EventEmitter);Re.exports=se},133:(Re,Pe,$)=>{"use strict";var V=$(9069).EventEmitter,Y=$(9739).hidePrivateAndCertainPublicPropertiesInClass;Re.exports=Y(V,["domain"])},6021:function(Re,Pe,$){"use strict";var V=this&&this.__assign||function(){return V=Object.assign||function(te){for(var J,q=1,ce=arguments.length;q<ce;q++)for(var Ee in J=arguments[q])Object.prototype.hasOwnProperty.call(J,Ee)&&(te[Ee]=J[Ee]);return te},V.apply(this,arguments)};Object.defineProperty(Pe,"__esModule",{value:!0});var Y=$(7124),se=$(8682),z={connect:$(5769),createLocalAudioTrack:$(8765).audio,createLocalVideoTrack:$(8765).video,isSupported:$(8592)(),version:$(1730).version,Logger:$(7846),LocalAudioTrack:$(7379).LocalAudioTrack,LocalDataTrack:$(7379).LocalDataTrack,LocalVideoTrack:$(7379).LocalVideoTrack};Re.exports={connect:function H(te,J){var q=V({createLocalTracks:Y.createLocalTracks},J);return z.connect(te,q)},createLocalAudioTrack:function N(te){var J=V({createLocalTracks:Y.createLocalTracks},te);return z.createLocalAudioTrack(J)},createLocalVideoTrack:function k(te){var J=V({createLocalTracks:Y.createLocalTracks},te);return z.createLocalVideoTrack(J)},createLocalTracks:Y.createLocalTracks,runPreflight:se.runPreflight,isSupported:z.isSupported,version:z.version,Logger:z.Logger,LocalAudioTrack:z.LocalAudioTrack,LocalVideoTrack:z.LocalVideoTrack,LocalDataTrack:z.LocalDataTrack}},3383:function(Re,Pe,$){"use strict";var we,V=this&&this.__extends||(we=function(Se,ge){return(we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,pe){ue.__proto__=pe}||function(ue,pe){for(var Ie in pe)Object.prototype.hasOwnProperty.call(pe,Ie)&&(ue[Ie]=pe[Ie])})(Se,ge)},function(Se,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ue(){this.constructor=Se}we(Se,ge),Se.prototype=null===ge?Object.create(ge):(ue.prototype=ge.prototype,new ue)}),Y=$(1647).MediaStreamTrack,se=$(9739),z=se.asLocalTrack,H=se.asLocalTrackPublication,N=se.trackClass,k=$(8701),L=k.typeErrors,U=k.trackPriority,ee=$(1501).Wv,ae=$(7379),de=ae.LocalAudioTrack,he=ae.LocalDataTrack,te=ae.LocalVideoTrack,J=$(3925),q=$(5229),ce=$(9565),Oe=function(we){function Se(ge,ue,pe){var Ie=this,je=(pe=Object.assign({LocalAudioTrack:de,LocalVideoTrack:te,LocalDataTrack:he,MediaStreamTrack:Y,LocalAudioTrackPublication:J,LocalVideoTrackPublication:ce,LocalDataTrackPublication:q,shouldStopLocalTracks:!1,tracks:ue},pe)).shouldStopLocalTracks?new Set(ue.filter(function(Le){return"data"!==Le.kind})):new Set;return Ie=we.call(this,ge,pe)||this,Object.defineProperties(Ie,{_eventObserver:{value:pe.eventObserver},_LocalAudioTrack:{value:pe.LocalAudioTrack},_LocalDataTrack:{value:pe.LocalDataTrack},_LocalVideoTrack:{value:pe.LocalVideoTrack},_MediaStreamTrack:{value:pe.MediaStreamTrack},_LocalAudioTrackPublication:{value:pe.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:pe.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:pe.LocalVideoTrackPublication},_tracksToStop:{value:je},signalingRegion:{enumerable:!0,get:function(){return ge.signalingRegion}}}),Ie._handleTrackSignalingEvents(),Ie}return V(Se,we),Se.prototype._addTrack=function(ge,ue,pe){var Ie=we.prototype._addTrack.call(this,ge,ue);return Ie&&"disconnected"!==this.state&&this._addLocalTrack(ge,pe),Ie},Se.prototype._addLocalTrack=function(ge,ue){this._signaling.addTrack(ge._trackSender,ge.name,ue),this._log.info("Added a new "+N(ge,!0)+":",ge.id),this._log.debug(N(ge,!0)+":",ge)},Se.prototype._removeTrack=function(ge,ue){var pe=we.prototype._removeTrack.call(this,ge,ue);return pe&&"disconnected"!==this.state&&(this._signaling.removeTrack(ge._trackSender),this._log.info("Removed a "+N(ge,!0)+":",ge.id),this._log.debug(N(ge,!0)+":",ge)),pe},Se.prototype._getTrackEvents=function(){return we.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},Se.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},Se.prototype._handleTrackSignalingEvents=function(){var ge=this,ue=this._log;if("disconnected"!==this.state){var pe=this._signaling;this.on("trackDisabled",Ie),this.on("trackEnabled",je),this.on("trackStopped",Le),this._tracks.forEach(function($e){ge._addLocalTrack($e,U.PRIORITY_STANDARD),ge._getOrCreateLocalTrackPublication($e).catch(function(Xe){ue.warn("Failed to get or create LocalTrackPublication for "+$e+":",Xe)})});var Qe=this;pe.on("stateChanged",function $e(Xe){ue.debug("Transitioned to state:",Xe),"disconnected"===Xe?(ue.debug("Removing LocalTrack event listeners"),pe.removeListener("stateChanged",$e),Qe.removeListener("trackDisabled",Ie),Qe.removeListener("trackEnabled",je),Qe.removeListener("trackStopped",Le),Qe._tracks.forEach(function(Me){var Qt=Le(Me);Qt&&Me._trackSender.removeClone(Qt._trackTransceiver)}),ue.info("LocalParticipant disconnected. Stopping "+Qe._tracksToStop.size+" automatically-acquired LocalTracks"),Qe._tracksToStop.forEach(function(Me){Me.stop()})):"connected"===Xe&&(ue.info("reconnected"),setTimeout(function(){return Qe.emit("reconnected")},0))})}function Ie($e){var Xe=pe.getPublication($e._trackSender);Xe&&(Xe.disable(),ue.debug("Disabled the "+N($e,!0)+":",$e.id))}function je($e){var Xe=pe.getPublication($e._trackSender);Xe&&(Xe.enable(),ue.debug("Enabled the "+N($e,!0)+":",$e.id))}function Le($e){var Xe=pe.getPublication($e._trackSender);return Xe&&Xe.stop(),Xe}},Se.prototype._getOrCreateLocalTrackPublication=function(ge){var ue=fe(this.tracks,ge);if(ue)return Promise.resolve(ue);var pe=this._log,Ie=this,je=this._signaling.getPublication(ge._trackSender);if(!je)return Promise.reject(new Error("Unexpected error: The "+ge+" cannot be published"));function Le(Qe){Ie.unpublishTrack(Qe.track)}return new Promise(function(Qe,$e){je.on("updated",function Xe(){var Me=je.error;if(Me)return je.removeListener("updated",Xe),pe.warn("Failed to publish the "+N(ge,!0)+": "+Me.message),Ie._removeTrack(ge,ge.id),setTimeout(function(){Ie.emit("trackPublicationFailed",Me,ge)}),void $e(Me);if(!Ie._tracks.has(ge.id))return je.removeListener("updated",Xe),void $e(new Error("The "+ge+" was unpublished"));if(je.sid){je.removeListener("updated",Xe);var Wt={log:pe,LocalAudioTrackPublication:Ie._LocalAudioTrackPublication,LocalDataTrackPublication:Ie._LocalDataTrackPublication,LocalVideoTrackPublication:Ie._LocalVideoTrackPublication};(ue=fe(Ie.tracks,ge))||(ue=H(ge,je,Le,Wt),Ie._addTrackPublication(ue));var St=Ie._signaling.state;("connected"===St||"connecting"===St)&&(ge._processorEventObserver&&ge._processorEventObserver.on("event",function(Ke){Ie._eventObserver.emit("event",{name:Ke.name,payload:Ke.data,group:"video-processor",level:"info"})}),ge.processedTrack&&(ge._captureFrames(),ge._setSenderMediaStreamTrack(!0))),"connected"===St&&setTimeout(function(){Ie.emit("trackPublished",ue)}),Qe(ue)}})})},Se.prototype.publishTrack=function(ge,ue){var Ie,pe=fe(this.tracks,ge);if(pe)return Promise.resolve(pe);ue=Object.assign({log:this._log,priority:U.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},ue);try{Ie=z(ge,ue)}catch(Qe){return Promise.reject(Qe)}var je=Object.values(U);if(!je.includes(ue.priority))return Promise.reject(L.INVALID_VALUE("LocalTrackPublishOptions.priority",je));var Le=this._addTrack(Ie,Ie.id,ue.priority)||this._tracks.get(Ie.id);return this._getOrCreateLocalTrackPublication(Le)},Se.prototype.publishTracks=function(ge){if(!Array.isArray(ge))throw L.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(ge.map(this.publishTrack,this))},Se.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},Se.prototype.setNetworkQualityConfiguration=function(ge){if("object"!=typeof ge||null===ge)throw L.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(ue){if(ue in ge&&("number"!=typeof ge[ue]||isNaN(ge[ue])))throw L.INVALID_TYPE("networkQualityConfiguration."+ue,"number")}),this._signaling.setNetworkQualityConfiguration(ge),this},Se.prototype.setParameters=function(ge){if(typeof ge<"u"&&"object"!=typeof ge)throw L.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(ge){if(this._signaling.getParameters().adaptiveSimulcast&&ge.maxVideoBitrate)throw L.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(ue){if(typeof ge[ue]<"u"&&"number"!=typeof ge[ue]&&null!==ge[ue])throw L.INVALID_TYPE("encodingParameters."+ue,"number, null or undefined")})}else null===ge&&(ge={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(ge),this},Se.prototype.unpublishTrack=function(ge){ee(ge,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var ue=this._tracks.get(ge.id);if(!ue)return null;if(this._signaling.getPublication(ue._trackSender).publishFailed(new Error("The "+ue+" was unpublished")),!(ue=this._removeTrack(ue,ue.id)))return null;var Ie=fe(this.tracks,ue);return Ie&&this._removeTrackPublication(Ie),Ie},Se.prototype.unpublishTracks=function(ge){var ue=this;if(!Array.isArray(ge))throw L.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return ge.reduce(function(pe,Ie){var je=ue.unpublishTrack(Ie);return je?pe.concat(je):pe},[])},Se}($(9218));function fe(we,Se){return Array.from(we.values()).find(function(ge){return ge.track===Se||ge.track.mediaStreamTrack===Se})||null}Re.exports=Oe},1534:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N,k)||this}return V(H,z),H.prototype._start=function(){z.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},H.prototype.attach=function(){return z.prototype.attach.apply(this,arguments)},H.prototype.detach=function(){return z.prototype.detach.apply(this,arguments)},H}($(5366));Re.exports=se},7379:(Re,Pe,$)=>{"use strict";Re.exports={LocalAudioTrack:$(2954),LocalVideoTrack:$(1),LocalDataTrack:$(1560)}},2954:(Re,Pe,$)=>{"use strict";var V=$(1905),Y=$(6213);function se(z,H){var N=new Y(z,H);return Object.setPrototypeOf(N,se.prototype),N}V(se,Y),Re.exports=se},1560:(Re,Pe,$)=>{"use strict";var V=$(1905),Y=$(212);function se(z){var H=new Y(z);return Object.setPrototypeOf(H,se.prototype),H}V(se,Y),Re.exports=se},1:(Re,Pe,$)=>{"use strict";var V=$(1905),Y=$(4847);function se(z,H){var N=new Y(z,H);return Object.setPrototypeOf(N,se.prototype),N}V(se,Y),Re.exports=se},1703:function(Re,Pe,$){"use strict";var ee,V=this&&this.__extends||(ee=function(ae,de){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,te){he.__proto__=te}||function(he,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(he[J]=te[J])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}ee(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),Y=$(133),se=$(9739),z=se.buildLogLevels,H=se.valueToJSON,N=$(8701).DEFAULT_LOG_LEVEL,k=$(1458),L=0,U=function(ee){function ae(de,he,te){var J;te=Object.assign({name:de,log:null,logLevel:N},te),J=ee.call(this)||this;var q=String(te.name),ce=z(te.logLevel),Ee=te.log?te.log.createLog("media",J):new k("media",J,ce,te.loggerName);return Object.defineProperties(J,{_instanceId:{value:++L},_log:{value:Ee},kind:{enumerable:!0,value:he},name:{enumerable:!0,value:q}}),J}return V(ae,ee),ae.prototype.toJSON=function(){return H(this)},ae}(Y);Re.exports=U},6213:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(1534),H=function(N){function k(L,U){return N.call(this,L,U)||this}return V(k,N),k.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},k.prototype.attach=function(L){return(L=N.prototype.attach.call(this,L)).muted=!0,L},k.prototype._end=function(){return N.prototype._end.apply(this,arguments)},k.prototype.disable=function(){return N.prototype.disable.apply(this,arguments)},k.prototype.enable=function(){return N.prototype.enable.apply(this,arguments)},k.prototype.restart=function(){return N.prototype.restart.apply(this,arguments)},k.prototype.stop=function(){return N.prototype.stop.apply(this,arguments)},k}($(8275)(Y));Re.exports=H},3925:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U){return z.call(this,N,k,L,U)||this}return V(H,z),H.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(3335));Re.exports=se},212:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(1703),se=$(1866),z=function(H){function N(k){var L,ee=new(0,(k=Object.assign({DataTrackSender:se,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},k)).DataTrackSender)(k.maxPacketLifeTime,k.maxRetransmits,k.ordered);return L=H.call(this,ee.id,"data",k)||this,Object.defineProperties(L,{_trackSender:{value:ee},id:{enumerable:!0,value:ee.id},maxPacketLifeTime:{enumerable:!0,value:k.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:k.maxRetransmits},ordered:{enumerable:!0,value:k.ordered},reliable:{enumerable:!0,value:null===k.maxPacketLifeTime&&null===k.maxRetransmits}}),L}return V(N,H),N.prototype.send=function(k){this._trackSender.send(k)},N}(Y);Re.exports=z},5229:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U){return z.call(this,N,k,L,U)||this}return V(H,z),H.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(3335));Re.exports=se},8275:function(Re,Pe,$){"use strict";var we,V=this&&this.__extends||(we=function(Se,ge){return(we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,pe){ue.__proto__=pe}||function(ue,pe){for(var Ie in pe)Object.prototype.hasOwnProperty.call(pe,Ie)&&(ue[Ie]=pe[Ie])})(Se,ge)},function(Se,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ue(){this.constructor=Se}we(Se,ge),Se.prototype=null===ge?Object.create(ge):(ue.prototype=ge.prototype,new ue)}),Y=$(1647).getUserMedia,se=$(7627),z=se.guessBrowser,H=se.isIOSChrome,N=$(9739),k=N.capitalize,L=N.defer,U=N.isUserMediaTrack,ee=N.waitForSometime,ae=N.waitForEvent,de=$(8701).typeErrors.ILLEGAL_INVOKE,he=$(9059),te=$(1741),J=$(2181),q=$(6396),ce=$(3830),Ee=$(808);function fe(we){var Se=we._log,ge=we.kind,ue={audio:he,video:te}[ge],pe=we._dummyEl,Ie=we.mediaStreamTrack,je=null;function $e(){return Promise.race([ae(Ie,"unmute"),ee(50)]).then(function(){return function Qe(){var Fe=we.mediaStreamTrack.muted,We=we.isStopped&&!!we._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!je&&(Fe||We||function Le(){return pe.play().then(function(){return ue(pe)}).then(function(St){return St?Se.warn("Silence detected"):Se.info("Non-silence detected"),St}).catch(function(St){Se.warn("Failed to detect silence:",St)}).finally(function(){pe.pause()})}())})}()}).then(function(St){return St&&!je&&(je=L(),we._restart().finally(function(){pe=we._dummyEl,Qt(),Ie=we.mediaStreamTrack,Me(),je.resolve(),je=null}).catch(function(Fe){Se.error("failed to restart track: ",Fe)})),(je&&je.promise||Promise.resolve()).finally(function(){return q.resolveDeferred(ge)})}).catch(function(St){Se.error("error in maybeRestart: "+St.message)})}function Xe(){var St=we._log,Ke=we.kind;St.info("Muted"),St.debug("LocalMediaTrack:",we),q.startDeferred(Ke)}function Me(){Ie.addEventListener("ended",$e),Ie.addEventListener("mute",Xe),Ie.addEventListener("unmute",$e)}function Qt(){Ie.removeEventListener("ended",$e),Ie.removeEventListener("mute",Xe),Ie.removeEventListener("unmute",$e)}var Wt=function(St){return!!St&&$e()};return J.onVisibilityChange(1,Wt),Me(),function(){J.offVisibilityChange(1,Wt),Qt()}}Re.exports=function Oe(we){return function(Se){function ge(ue,pe){var Ie=this,je=("safari"===z()||H())&&U(ue)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;pe=Object.assign({getUserMedia:Y,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:je,gUMSilentTrackWorkaround:ce},pe);var Le=new Ee(ue),Qe=Le.kind;return Ie=Se.call(this,Le,pe)||this,Object.defineProperties(Ie,{_constraints:{value:"object"==typeof pe[Qe]?pe[Qe]:{},writable:!0},_getUserMedia:{value:pe.getUserMedia},_gUMSilentTrackWorkaround:{value:pe.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:pe.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:pe.isCreatedByCreateLocalTracks},_trackSender:{value:Le},id:{enumerable:!0,value:Le.id},isEnabled:{enumerable:!0,get:function(){return Le.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===Le.readyState}}}),Ie._workaroundWebKitBug1208516&&(Ie._workaroundWebKitBug1208516Cleanup=fe(Ie)),Ie}return V(ge,Se),ge.prototype._end=function(){this._didCallEnd||(Se.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},ge.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),Se.prototype._initialize.call(this)},ge.prototype._reacquireTrack=function(ue){var pe,je=this._getUserMedia,Le=this._gUMSilentTrackWorkaround,Qe=this._log,$e=this.mediaStreamTrack.kind;Qe.info("Re-acquiring the MediaStreamTrack"),Qe.debug("Constraints:",ue);var Xe=Object.assign({audio:!1,video:!1},((pe={})[$e]=ue,pe));return(this._workaroundWebKitBug1208516Cleanup?Le(Qe,je,Xe):je(Xe)).then(function(Qt){return Qt.getTracks()[0]})},ge.prototype._restart=function(ue){var pe=this,Ie=this._log;return ue=ue||this._constraints,this._stop(),this._reacquireTrack(ue).catch(function(je){throw Ie.error("Failed to re-acquire the MediaStreamTrack:",{error:je,constraints:ue}),je}).then(function(je){return Ie.info("Re-acquired the MediaStreamTrack"),Ie.debug("MediaStreamTrack:",je),pe._constraints=Object.assign({},ue),pe._setMediaStreamTrack(je)})},ge.prototype._setMediaStreamTrack=function(ue){var pe=this;return ue.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){pe._unprocessedTrack=ue}):this._trackSender.setMediaStreamTrack(ue).catch(function(Ie){pe._log.warn("setMediaStreamTrack failed:",{error:Ie,mediaStreamTrack:ue})})).then(function(){pe._initialize(),pe._getAllAttachedElements().forEach(function(Ie){return pe._attach(Ie)})})},ge.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},ge.prototype.enable=function(ue){return(ue="boolean"!=typeof ue||ue)!==this.mediaStreamTrack.enabled&&(this._log.info((ue?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=ue,this.emit(ue?"enabled":"disabled",this)),this},ge.prototype.disable=function(){return this.enable(!1)},ge.prototype.restart=function(ue){var pe=this,Ie=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(de("restart","can only be called on a Local"+k(Ie)+"Track that is created using createLocalTracks or createLocal"+k(Ie)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var je=this._restart(ue);return this._workaroundWebKitBug1208516&&(je=je.finally(function(){pe._workaroundWebKitBug1208516Cleanup=fe(pe)})),je},ge.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},ge}(we)}},3335:function(Re,Pe,$){"use strict";var k,V=this&&this.__extends||(k=function(L,U){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,ae){ee.__proto__=ae}||function(ee,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(ee[de]=ae[de])})(L,U)},function(L,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ee(){this.constructor=L}k(L,U),L.prototype=null===U?Object.create(U):(ee.prototype=U.prototype,new ee)}),Y=$(9222),se=$(8701),z=se.typeErrors,H=se.trackPriority,N=function(k){function L(U,ee,ae,de){var he=k.call(this,ee.name,U.sid,de)||this;return Object.defineProperties(he,{_reemitTrackEvent:{value:function(){return he.emit(he.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:U},_unpublish:{value:ae},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:ee.kind},priority:{enumerable:!0,get:function(){return U.updatedPriority}},track:{enumerable:!0,value:ee}}),ee.on("disabled",he._reemitTrackEvent),ee.on("enabled",he._reemitTrackEvent),he}return V(L,k),L.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},L.prototype.setPriority=function(U){var ee=Object.values(H);if(!ee.includes(U))throw z.INVALID_VALUE("priority",ee);return this._signaling.setPriority(U),this},L.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},L}(Y);Re.exports=N},4847:function(Re,Pe,$){"use strict";var de,V=this&&this.__extends||(de=function(he,te){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,q){J.__proto__=q}||function(J,q){for(var ce in q)Object.prototype.hasOwnProperty.call(q,ce)&&(J[ce]=q[ce])})(he,te)},function(he,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function J(){this.constructor=he}de(he,te),he.prototype=null===te?Object.create(te):(J.prototype=te.prototype,new J)}),Y=$(7627),se=Y.guessBrowser,z=Y.isIOSChrome,H=$(1741),N=$(8275),k=$(4332),L=$(9739).isUserMediaTrack,ee=function(de){function he(te,J){var q=this;return J=Object.assign({workaroundSilentLocalVideo:("safari"===se()||z())&&L(te)&&typeof document<"u"&&"function"==typeof document.createElement},J),q=de.call(this,te,J)||this,Object.defineProperties(q,{_workaroundSilentLocalVideo:{value:J.workaroundSilentLocalVideo?ae:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),q._workaroundSilentLocalVideo&&(q._workaroundSilentLocalVideoCleanup=q._workaroundSilentLocalVideo(q,document)),q}return V(he,de),he.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},he.prototype._checkIfCanCaptureFrames=function(){return de.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},he.prototype._end=function(){return de.prototype._end.apply(this,arguments)},he.prototype._setSenderMediaStreamTrack=function(te){var J=this,q=this.mediaStreamTrack,ce=te?this.processedTrack:q;return this._trackSender.setMediaStreamTrack(ce).catch(function(Ee){return J._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:Ee,mediaStreamTrack:ce})}).then(function(){J._unprocessedTrack=te?q:null})},he.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var te=de.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),te):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},he.prototype.removeProcessor=function(){var te=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var J=de.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return te._updateElementsMediaStreamTrack()}),J},he.prototype.disable=function(){var te=de.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),te},he.prototype.enable=function(te){void 0===te&&(te=!0);var J=de.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=te,te&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),J},he.prototype.restart=function(){var te=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var J=de.prototype.restart.apply(this,arguments);return this.processor&&J.then(function(){te._restartProcessor()}),this._workaroundSilentLocalVideo&&J.finally(function(){te._workaroundSilentLocalVideoCleanup=te._workaroundSilentLocalVideo(te,document)}),J},he.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),de.prototype.stop.apply(this,arguments)},he}(N(k));function ae(de,he){var te=de._log,J=de._dummyEl,q=de.mediaStreamTrack;function ce(){!de.isEnabled||(te.info("Unmuted, checking silence"),J.play().then(function(){return H(J,he)}).then(function(Ee){if(Ee)return te.warn("Silence detected, restarting"),de._stop(),de._restart();te.info("Non-silent frames detected, so no need to restart")}).catch(function(Ee){te.warn("Failed to detect silence and restart:",Ee)}).finally(function(){(J=de._dummyEl).paused||J.pause(),q.removeEventListener("unmute",ce),(q=de.mediaStreamTrack).addEventListener("unmute",ce)}))}return q.addEventListener("unmute",ce),function(){q.removeEventListener("unmute",ce)}}Re.exports=ee},9565:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U){return z.call(this,N,k,L,U)||this}return V(H,z),H.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(3335));Re.exports=se},5366:function(Re,Pe,$){"use strict";var te,V=this&&this.__extends||(te=function(J,q){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,Ee){ce.__proto__=Ee}||function(ce,Ee){for(var Oe in Ee)Object.prototype.hasOwnProperty.call(Ee,Oe)&&(ce[Oe]=Ee[Oe])})(J,q)},function(J,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function ce(){this.constructor=J}te(J,q),J.prototype=null===q?Object.create(q):(ce.prototype=q.prototype,new ce)}),Y=$(7627),se=Y.guessBrowser,z=Y.isIOSChrome,H=$(1647).MediaStream,N=$(9739),k=N.waitForEvent,L=N.waitForSometime,U=$(6396),ae=function(te){function J(q,ce){var Ee=this;ce=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===se()||z())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ce),Ee=te.call(this,q.id,q.kind,ce)||this;var Oe=!1;return ce=Object.assign({MediaStream:H},ce),Object.defineProperties(Ee,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return Oe},set:function(fe){Oe=fe}},_playPausedElementsIfNotBackgrounded:{value:ce.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:ce.workaroundWebKitBug212780||ce.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:ce.MediaStream},isStarted:{enumerable:!0,get:function(){return Oe}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||q.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),Ee._initialize(),Ee}return V(J,te),J.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},J.prototype._initialize=function(){var q=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function ce(){q._end(),q.mediaStreamTrack.removeEventListener("ended",ce)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},J.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},J.prototype.attach=function(q){var ce=this;if("string"==typeof q?q=this._selectElement(q):q||(q=this._createElement()),this._log.debug("Attempting to attach to element:",q),q=this._attach(q),this._shouldShimAttachedElements&&!this._elShims.has(q)){var Ee=this._playPausedElementsIfNotBackgrounded?function(){return function de(te,J){var q=te.tagName.toLowerCase();J.warn("Unintentionally paused:",te),Promise.race([k(document,"visibilitychange"),L(1e3)]).then(function(){"visible"===document.visibilityState&&U.whenResolved("audio").then(function(){return J.info("Playing unintentionally paused <"+q+"> element"),J.debug("Element:",te),te.play()}).then(function(){J.info("Successfully played unintentionally paused <"+q+"> element"),J.debug("Element:",te)}).catch(function(ce){J.warn("Error while playing unintentionally paused <"+q+"> element:",{error:ce,el:te})})})}(q,ce._log)}:null;this._elShims.set(q,function he(te,J){void 0===J&&(J=null);var q=te.pause,ce=te.play,Ee=!1;te.pause=function(){return Ee=!0,q.call(te)},te.play=function(){return Ee=!1,ce.call(te)};var Oe=J?function(){Ee||J()}:null;return Oe&&te.addEventListener("pause",Oe),{pausedIntentionally:function(){return Ee},unShim:function(){te.pause=q,te.play=ce,Oe&&te.removeEventListener("pause",Oe)}}}(q,Ee))}return q},J.prototype._attach=function(q,ce){void 0===ce&&(ce=this.processedTrack||this.mediaStreamTrack);var Ee=q.srcObject;return Ee instanceof this._MediaStream||(Ee=new this._MediaStream),Ee["audio"===ce.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(fe){Ee.removeTrack(fe)}),Ee.addTrack(ce),q.srcObject=Ee,q.autoplay=!0,q.playsInline=!0,this._attachments.has(q)||this._attachments.add(q),q},J.prototype._selectElement=function(q){var ce=document.querySelector(q);if(!ce)throw new Error("Selector matched no element: "+q);return ce},J.prototype._updateElementsMediaStreamTrack=function(){var q=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(ce){return q._attach(ce)})},J.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},J.prototype.detach=function(q){var ce;return ce="string"==typeof q?[this._selectElement(q)]:q?[q]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",ce),this._detachElements(ce),q?ce[0]:ce},J.prototype._detachElements=function(q){return q.map(this._detachElement.bind(this))},J.prototype._detachElement=function(q){if(!this._attachments.has(q))return q;var ce=q.srcObject;return ce instanceof this._MediaStream&&ce.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(q),this._shouldShimAttachedElements&&this._elShims.has(q)&&(this._elShims.get(q).unShim(),this._elShims.delete(q)),q},J.prototype._getAllAttachedElements=function(){var q=[];return this._attachments.forEach(function(ce){q.push(ce)}),q},J}($(1703));Re.exports=ae},3501:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N,k)||this}return V(H,z),H}($(1639));Re.exports=se},8797:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(1534),H=function(N){function k(L,U,ee,ae,de,he,te){return N.call(this,L,U,ee,ae,de,he,te)||this}return V(k,N),k.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},k.prototype.setPriority=function(L){return N.prototype.setPriority.call(this,L)},k}($(1628)(Y));Re.exports=H},8661:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N,k)||this}return V(H,z),H.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(1521));Re.exports=se},5606:function(Re,Pe,$){"use strict";var U,V=this&&this.__extends||(U=function(ee,ae){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,he){de.__proto__=he}||function(de,he){for(var te in he)Object.prototype.hasOwnProperty.call(he,te)&&(de[te]=he[te])})(ee,ae)},function(ee,ae){if("function"!=typeof ae&&null!==ae)throw new TypeError("Class extends value "+String(ae)+" is not a constructor or null");function de(){this.constructor=ee}U(ee,ae),ee.prototype=null===ae?Object.create(ae):(de.prototype=ae.prototype,new de)}),Y=this&&this.__read||function(U,ee){var ae="function"==typeof Symbol&&U[Symbol.iterator];if(!ae)return U;var he,J,de=ae.call(U),te=[];try{for(;(void 0===ee||ee-- >0)&&!(he=de.next()).done;)te.push(he.value)}catch(q){J={error:q}}finally{try{he&&!he.done&&(ae=de.return)&&ae.call(de)}finally{if(J)throw J.error}}return te},se=this&&this.__spreadArray||function(U,ee){for(var ae=0,de=ee.length,he=U.length;ae<de;ae++,he++)U[he]=ee[ae];return U},z=$(1703),H=$(8701),N=H.typeErrors,k=H.trackPriority,L=function(U){function ee(ae,de,he){var te=U.call(this,de.id,"data",he)||this;return Object.defineProperties(te,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:de.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:de.maxRetransmits},ordered:{enumerable:!0,value:de.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===de.maxPacketLifeTime&&null===de.maxRetransmits},sid:{enumerable:!0,value:ae}}),de.on("message",function(J){te.emit("message",J,te)}),te}return V(ee,U),ee.prototype.setPriority=function(ae){var de=se([null],Y(Object.values(k)));if(!de.includes(ae))throw N.INVALID_VALUE("priority",de);return this._priority=ae,this},ee.prototype._setEnabled=function(){},ee.prototype._setSwitchedOff=function(ae){this._isSwitchedOff!==ae&&(this._isSwitchedOff=ae,this.emit(ae?"switchedOff":"switchedOn",this))},ee}(z);Re.exports=L},8459:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N,k)||this}return V(H,z),H.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(1521));Re.exports=se},1628:function(Re,Pe,$){"use strict";var he,V=this&&this.__extends||(he=function(te,J){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ce){q.__proto__=ce}||function(q,ce){for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&(q[Ee]=ce[Ee])})(te,J)},function(te,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function q(){this.constructor=te}he(te,J),te.prototype=null===J?Object.create(J):(q.prototype=J.prototype,new q)}),Y=this&&this.__read||function(he,te){var J="function"==typeof Symbol&&he[Symbol.iterator];if(!J)return he;var ce,Oe,q=J.call(he),Ee=[];try{for(;(void 0===te||te-- >0)&&!(ce=q.next()).done;)Ee.push(ce.value)}catch(fe){Oe={error:fe}}finally{try{ce&&!ce.done&&(J=q.return)&&J.call(q)}finally{if(Oe)throw Oe.error}}return Ee},se=this&&this.__spreadArray||function(he,te){for(var J=0,q=te.length,ce=he.length;J<q;J++,ce++)he[ce]=te[J];return he},z=$(8701),H=z.typeErrors,N=z.trackPriority,k=$(7627),L=k.guessBrowser,U=k.isIOSChrome,ee=$(2181);Re.exports=function ae(he){return function(te){function J(q,ce,Ee,Oe,fe,we,Se){var ge=this;return Se=Object.assign({workaroundWebKitBug212780:("safari"===L()||U())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},Se),ge=te.call(this,ce,Se)||this,Object.defineProperties(ge,{_isEnabled:{value:Ee,writable:!0},_isSwitchedOff:{value:Oe,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:fe},_setRenderHint:{value:function(ue){ge._log.debug("updating render hint:",ue),we(ue)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:q},_workaroundWebKitBug212780:{value:Se.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),ge}return V(J,te),J.prototype.setPriority=function(q){var ce=se([null],Y(Object.values(N)));if(!ce.includes(q))throw H.INVALID_VALUE("priority",ce);return this._priority!==q&&(this._priority=q,this._setPriority(q)),this},J.prototype._setEnabled=function(q){this._isEnabled!==q&&(this._isEnabled=q,this.emit(this._isEnabled?"enabled":"disabled",this))},J.prototype._setSwitchedOff=function(q){this._isSwitchedOff!==q&&(this._isSwitchedOff=q,this.emit(q?"switchedOff":"switchedOn",this))},J.prototype.attach=function(q){var ce=te.prototype.attach.call(this,q);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function de(he){var te=he._log,J=he.kind;function q(ce){!ce||he._attachments.forEach(function(Ee){var Oe=he._elShims.get(Ee);Ee.paused&&Oe&&!Oe.pausedIntentionally()&&(te.info("Playing inadvertently paused <"+J+"> element"),te.debug("Element:",Ee),te.debug("RemoteMediaTrack:",he),Ee.play().then(function(){te.info("Successfully played inadvertently paused <"+J+"> element"),te.debug("Element:",Ee),te.debug("RemoteMediaTrack:",he)}).catch(function(we){te.warn("Error while playing inadvertently paused <"+J+"> element:",{err:we,el:Ee,remoteMediaTrack:he})}))})}return ee.onVisibilityChange(2,q),function(){ee.offVisibilityChange(2,q)}}(this)),ce},J.prototype.detach=function(q){var ce=te.prototype.detach.call(this,q);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),ce},J}(he)}},1521:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N.name,N.sid,k)||this;Object.defineProperties(L,{_signaling:{value:N},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return N.isEnabled}},kind:{enumerable:!0,value:N.kind},publishPriority:{enumerable:!0,get:function(){return N.priority}},track:{enumerable:!0,get:function(){return this._track}}});var U=N.error,ee=N.isEnabled,ae=N.isSwitchedOff,de=N.priority;return N.on("updated",function(){if(U!==N.error)return U=N.error,void L.emit("subscriptionFailed",N.error);ee!==N.isEnabled&&(ee=N.isEnabled,L.track&&L.track._setEnabled(N.isEnabled),L.emit(N.isEnabled?"trackEnabled":"trackDisabled")),ae!==N.isSwitchedOff&&(L._log.debug(L.trackSid+": "+(ae?"OFF":"ON")+" => "+(N.isSwitchedOff?"OFF":"ON")),ae=N.isSwitchedOff,L.track?(L.track._setSwitchedOff(N.isSwitchedOff),L.emit(ae?"trackSwitchedOff":"trackSwitchedOn",L.track)):ae&&L._log.warn("Track was not subscribed when switched Off.")),de!==N.priority&&L.emit("publishPriorityChanged",de=N.priority)}),L}return V(H,z),H.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H.prototype._subscribed=function(N){!this._track&&N&&(this._track=N,this.emit("subscribed",N))},H.prototype._unsubscribe=function(){if(this._track){var N=this._track;this._track=null,this.emit("unsubscribed",N)}},H}($(9222));Re.exports=se},1629:function(Re,Pe,$){"use strict";var te,V=this&&this.__extends||(te=function(J,q){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,Ee){ce.__proto__=Ee}||function(ce,Ee){for(var Oe in Ee)Object.prototype.hasOwnProperty.call(Ee,Oe)&&(ce[Oe]=Ee[Oe])})(J,q)},function(J,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function ce(){this.constructor=J}te(J,q),J.prototype=null===q?Object.create(q):(ce.prototype=q.prototype,new ce)}),Y=this&&this.__read||function(te,J){var q="function"==typeof Symbol&&te[Symbol.iterator];if(!q)return te;var Ee,fe,ce=q.call(te),Oe=[];try{for(;(void 0===J||J-- >0)&&!(Ee=ce.next()).done;)Oe.push(Ee.value)}catch(we){fe={error:we}}finally{try{Ee&&!Ee.done&&(q=ce.return)&&q.call(ce)}finally{if(fe)throw fe.error}}return Oe},se=$(1628),z=$(4332),H=$(2181),N=$(5318).NullObserver,k=$(6543),ee=function(te){function J(q,ce,Ee,Oe,fe,we,Se){var ge=this;return Se=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},Se),Se=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==Se.clientTrackSwitchOffControl?N:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==Se.contentPreferencesMode?N:ResizeObserver},Se),ge=te.call(this,q,ce,Ee,Oe,fe,we,Se)||this,Object.defineProperties(ge,{_enableDocumentVisibilityTurnOff:{value:!0===Se.enableDocumentVisibilityTurnOff&&"auto"===Se.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:Se.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Se.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new k(function(){ge._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new Se.ResizeObserver(function(ue){ue.find(function(Ie){return!ge._invisibleElements.has(Ie.target)})&&he(ge)})},_intersectionObserver:{value:new Se.IntersectionObserver(function(ue){var pe=!1;ue.forEach(function(Ie){!ge._invisibleElements.has(Ie.target)!==Ie.isIntersecting&&(Ie.isIntersecting?(ge._log.debug("intersectionObserver detected: Off => On"),ge._invisibleElements.delete(Ie.target)):(ge._log.debug("intersectionObserver detected: On => Off"),ge._invisibleElements.add(Ie.target)),pe=!0)}),pe&&(de(ge),he(ge))},{threshold:.25})}}),ge}return V(J,te),J.prototype._start=function(q){var ce=te.prototype._start.call(this,q);return de(this),ce},J.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},J.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},J.prototype.setContentPreferences=function(q){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return q.renderDimensions&&this._setRenderHint({renderDimensions:q.renderDimensions}),this},J.prototype._unObservePip=function(q){var ce=this._elToPipCallbacks.get(q);ce&&(q.removeEventListener("enterpictureinpicture",ce.onEnterPip),q.removeEventListener("leavepictureinpicture",ce.onLeavePip),this._elToPipCallbacks.delete(q))},J.prototype._observePip=function(q){var ce=this;if(!this._elToPipCallbacks.get(q)){var Oe=function(Se){return ce._onEnterPip(Se,q)},fe=function(Se){return ce._onLeavePip(Se,q)};q.addEventListener("enterpictureinpicture",Oe),q.addEventListener("leavepictureinpicture",fe),this._elToPipCallbacks.set(q,{onEnterPip:Oe,onLeavePip:fe,onResizePip:function(Se){return ce._onResizePip(Se,q)}})}},J.prototype._onEnterPip=function(q,ce){this._log.debug("onEnterPip");var Ee=q.pictureInPictureWindow;this._elToPipWindows.set(ce,Ee);var Oe=this._elToPipCallbacks.get(ce).onResizePip;Ee.addEventListener("resize",Oe),de(this)},J.prototype._onLeavePip=function(q,ce){this._log.debug("onLeavePip"),this._elToPipWindows.delete(ce);var Ee=this._elToPipCallbacks.get(ce).onResizePip;q.pictureInPictureWindow.removeEventListener("resize",Ee),de(this)},J.prototype._onResizePip=function(){he(this)},J.prototype.attach=function(q){var ce=te.prototype.attach.call(this,q);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(ce),this._intersectionObserver.observe(ce),this._resizeObserver.observe(ce),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function ae(te){function J(){de(te)}return H.onVisibilityChange(1,J),function(){H.offVisibilityChange(1,J)}}(this)),this._observePip(ce),ce},J.prototype.detach=function(q){var ce=this,Ee=te.prototype.detach.call(this,q);return(Array.isArray(Ee)?Ee:[Ee]).forEach(function(fe){ce._intersectionObserver.unobserve(fe),ce._resizeObserver.unobserve(fe),ce._invisibleElements.delete(fe),ce._unObservePip(fe)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),de(this),he(this),Ee},J.prototype.addProcessor=function(){return te.prototype.addProcessor.apply(this,arguments)},J.prototype.removeProcessor=function(){return te.prototype.removeProcessor.apply(this,arguments)},J.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},J.prototype.setPriority=function(q){return te.prototype.setPriority.call(this,q)},J}(se(z));function de(te){if("auto"===te._clientTrackSwitchOffControl){var J=te._getAllAttachedElements().filter(function(Ee){return!te._invisibleElements.has(Ee)});!0==(te._getAllAttachedElements().filter(function(Ee){return te._elToPipWindows.has(Ee)}).length>0||"visible"===document.visibilityState&&J.length>0)?(te._turnOffTimer.clear(),te._setRenderHint({enabled:!0})):te._turnOffTimer.isSet||te._turnOffTimer.start()}}function he(te){if("auto"===te._contentPreferencesMode){var J=te._getAllAttachedElements().filter(function(ge){return!te._invisibleElements.has(ge)}),q=te._getAllAttachedElements().map(function(ge){var ue=te._elToPipWindows.get(ge);return ue?{clientHeight:ue.height,clientWidth:ue.width}:{clientHeight:0,clientWidth:0}}),ce=J.concat(q);if(ce.length>0){var Oe=Y(ce.sort(function(ge,ue){return ue.clientHeight+ue.clientWidth-ge.clientHeight-ge.clientWidth-1}),1)[0];te._setRenderHint({renderDimensions:{height:Oe.clientHeight,width:Oe.clientWidth}})}}}Re.exports=ee},1768:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N,k)||this}return V(H,z),H.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},H}($(1521));Re.exports=se},808:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=this&&this.__read||function(H,N){var k="function"==typeof Symbol&&H[Symbol.iterator];if(!k)return H;var U,ae,L=k.call(H),ee=[];try{for(;(void 0===N||N-- >0)&&!(U=L.next()).done;)ee.push(U.value)}catch(de){ae={error:de}}finally{try{U&&!U.done&&(k=L.return)&&k.call(L)}finally{if(ae)throw ae.error}}return ee},z=function(H){function N(k){var L=H.call(this,k.id,k)||this;return Object.defineProperties(L,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),L}return V(N,H),N.prototype.clone=function(){var k=new N(this.track.clone());return this._clones.add(k),k},N.prototype.removeClone=function(k){this._clones.delete(k)},N.prototype.setMediaStreamTrack=function(k){var L=this,U=Array.from(this._clones),ee=Array.from(this._senders);return Promise.all(U.map(function(ae){return ae.setMediaStreamTrack(k.clone())}).concat(ee.map(function(ae){return L._replaceTrack(ae,k)}))).finally(function(){L._track=k})},N.prototype.addSender=function(k,L){return this._senders.add(k),L&&this._senderToPublisherHintCallbacks.set(k,L),this},N.prototype.removeSender=function(k){return this._senders.delete(k),this._senderToPublisherHintCallbacks.delete(k),this},N.prototype.setPublisherHint=function(k){var U=Y(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return U?U(k):Promise.resolve("COULD_NOT_APPLY_HINT")},N.prototype._replaceTrack=function(k,L){var U=this;return k.replaceTrack(L).then(function(ee){return U.setPublisherHint(null).catch(function(){}),U.emit("replaced"),ee})},N}($(1639));Re.exports=z},9222:function(Re,Pe,$){"use strict";var ee,V=this&&this.__extends||(ee=function(ae,de){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,te){he.__proto__=te}||function(he,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(he[J]=te[J])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}ee(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),Y=$(133),se=$(9739),z=se.buildLogLevels,H=se.valueToJSON,N=$(8701).DEFAULT_LOG_LEVEL,k=$(1458),L=0,U=function(ee){function ae(de,he,te){var J=ee.call(this)||this;te=Object.assign({logLevel:N},te);var q=z(te.logLevel);return Object.defineProperties(J,{_instanceId:{value:L++},_log:{value:te.log?te.log.createLog("default",J):new k("default",J,q,te.loggerName)},trackName:{enumerable:!0,value:de},trackSid:{enumerable:!0,value:he}}),J}return V(ae,ee),ae.prototype.toJSON=function(){return H(this)},ae.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},ae}(Y);Re.exports=U},1639:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,k.kind)||this;return Object.defineProperties(L,{_track:{value:k,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),L}return V(H,z),H.prototype.stop=function(){this.track.stop(),z.prototype.stop.call(this)},H}($(4605));Re.exports=se},9062:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(9069).EventEmitter,se=$(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,z=function(H){function N(k){var L=H.call(this)||this;return Object.defineProperties(L,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:k},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),L.on("add",function(U){L._lastStatsSaveTime=Date.now(),L._lastStatsPublishTime=Date.now(),L._processorInfo=U,L._stats=[],L._reemitEvent("add",L._getEventData())}),L.on("remove",function(){var U=L._getEventData();L._lastStatsSaveTime=null,L._lastStatsPublishTime=null,L._processorInfo=null,L._stats=null,L._reemitEvent("remove",U)}),L.on("start",function(){L._reemitEvent("start",L._getEventData())}),L.on("stop",function(U){L._reemitEvent("stop",Object.assign({message:U},L._getEventData()))}),L.on("stats",function(){return L._maybeEmitStats()}),L}return V(N,H),N.prototype._getEventData=function(){if(!this._processorInfo)return{};var k=this._processorInfo,L=k.processor,he={captureHeight:k.captureHeight,captureWidth:k.captureWidth,inputFrameRate:k.inputFrameRate,isRemoteVideoTrack:k.isRemoteVideoTrack};return he.name=L._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(te){var J=L["_"+te];typeof J<"u"&&(he[te]=J)}),Object.keys(he).forEach(function(te){var J=he[te];"boolean"==typeof J&&(he[te]=J?"true":"false")}),he},N.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var k=this._processorInfo.processor._benchmark;if(k){var L=Date.now();if(!(L-this._lastStatsSaveTime<1e3)){var U={outputFrameRate:k.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(de){U[de]=k.getAverageDelay(de)}),this._lastStatsSaveTime=L,this._stats.push(U),!(L-this._lastStatsPublishTime<se)){this._lastStatsPublishTime=L;var ae=this._stats.splice(0).reduce(function(de,he,te){return Object.keys(U).forEach(function(J){de[J]||(de[J]=0),de[J]=(de[J]*te+he[J])/(te+1)}),de},{});Object.keys(ae).forEach(function(de){ae[de]=parseFloat(ae[de].toFixed(2))}),this._reemitEvent("stats",Object.assign({},ae,this._getEventData()))}}}}},N.prototype._reemitEvent=function(k,L){this._log.debug("VideoProcessor:"+k,L),this.emit("event",{name:k,data:L})},N}(Y);Re.exports=z},4332:function(Re,Pe,$){"use strict";var k,V=this&&this.__extends||(k=function(L,U){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,ae){ee.__proto__=ae}||function(ee,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(ee[de]=ae[de])})(L,U)},function(L,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ee(){this.constructor=L}k(L,U),L.prototype=null===U?Object.create(U):(ee.prototype=U.prototype,new ee)}),Y=$(5366),se=$(9062),z=$(8701).DEFAULT_FRAME_RATE,H=function(k){function L(U,ee){var ae=k.call(this,U,ee)||this;return Object.defineProperties(ae,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),ae._processorEventObserver=new(ee.VideoProcessorEventObserver||se)(ae._log),ae}return V(L,k),L.prototype._checkIfCanCaptureFrames=function(U){void 0===U&&(U=!1);var ee=!0,ae="",de=this.mediaStreamTrack;return de.enabled||(ee=!1,ae="MediaStreamTrack is disabled"),"ended"===de.readyState&&(ee=!1,ae="MediaStreamTrack is ended"),this.processor||(ee=!1,ae="VideoProcessor not detected."),!this._attachments.size&&!U&&(ee=!1,ae="VideoTrack is not publishing and there is no attached element."),ae&&this._log.debug(ae),{canCaptureFrames:ee,message:ae}},L.prototype._captureFrames=function(){var U=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var ae,ee=Date.now();this._dummyEl.play().then(function(){var de=function(te){clearTimeout(U._captureTimeoutId);var J=U.mediaStreamTrack.getSettings().frameRate,Ee=Math.floor(1e3/(void 0===J?z:J))-ae;(Ee<0||"number"!=typeof ae)&&(Ee=0),U._captureTimeoutId=setTimeout(te,Ee)},he=function(){var te=U._checkIfCanCaptureFrames();if(!te.canCaptureFrames)return U._isCapturing=!1,U._processorEventObserver.emit("stop",te.message),void U._log.debug("Cannot capture frames. Stopping capturing frames.");ee=Date.now();var J=U.mediaStreamTrack.getSettings(),q=J.width,ce=void 0===q?0:q,Ee=J.height,Oe=void 0===Ee?0:Ee;U._inputFrame.width!==ce&&(U._inputFrame.width=ce,U._inputFrame.height=Oe,U._outputFrame&&(U._outputFrame.width=ce,U._outputFrame.height=Oe)),U._inputFrame.getContext("2d").drawImage(U._dummyEl,0,0,ce,Oe);var fe=null;try{fe=U.processor.processFrame(U._inputFrame,U._outputFrame)}catch(we){U._log.debug("Exception detected after calling processFrame.",we)}(fe instanceof Promise?fe:Promise.resolve(fe)).then(function(){U._outputFrame&&(U.processedTrack.requestFrame(),U._processorEventObserver.emit("stats"))}).finally(function(){ae=Date.now()-ee,de(he)})};de(he)}).catch(function(de){return U._log.error("Video element cannot be played",{error:de,track:U})})}},L.prototype._initialize=function(){var U=this;k.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){N(U,U._dummyEl)&&(U.dimensions.width=U._dummyEl.videoWidth,U.dimensions.height=U._dummyEl.videoHeight)},this._dummyEl.onresize=function(){N(U,U._dummyEl)&&(U.dimensions.width=U._dummyEl.videoWidth,U.dimensions.height=U._dummyEl.videoHeight,U.isStarted&&(U._log.debug("Dimensions changed:",U.dimensions),U.emit(L.DIMENSIONS_CHANGED,U)))})},L.prototype._restartProcessor=function(){var U=this.processor;U&&(this.removeProcessor(U),this.addProcessor(U))},L.prototype._start=function(U){return this.dimensions.width=U.videoWidth,this.dimensions.height=U.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(L.DIMENSIONS_CHANGED,this),k.prototype._start.call(this,U)},L.prototype.addProcessor=function(U){var ee=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!U||"function"!=typeof U.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",U),this._unmuteHandler||(this._unmuteHandler=function(){ee._log.debug("mediaStreamTrack unmuted"),ee.processedTrack.muted&&(ee._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),ee._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var ae=this.mediaStreamTrack.getSettings(),de=ae.width,he=void 0===de?0:de,te=ae.height,J=void 0===te?0:te,q=ae.frameRate,ce=void 0===q?z:q;return this._inputFrame=new OffscreenCanvas(he,J),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=he,this._outputFrame.height=J,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=U,this._processorEventObserver.emit("add",{processor:U,captureHeight:J,captureWidth:he,inputFrameRate:ce,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},L.prototype.attach=function(){var U=k.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),U},L.prototype.detach=function(){return k.prototype.detach.apply(this,arguments)},L.prototype.removeProcessor=function(U){if(!U)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(U!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",U),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},L}(Y);function N(k,L){return k.dimensions.width!==L.videoWidth||k.dimensions.height!==L.videoHeight}H.DIMENSIONS_CHANGED="dimensionsChanged",Re.exports=H},4621:function(Re,Pe,$){"use strict";var ee,V=this&&this.__extends||(ee=function(ae,de){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,te){he.__proto__=te}||function(he,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(he[J]=te[J])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}ee(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),Y=this&&this.__read||function(ee,ae){var de="function"==typeof Symbol&&ee[Symbol.iterator];if(!de)return ee;var te,q,he=de.call(ee),J=[];try{for(;(void 0===ae||ae-- >0)&&!(te=he.next()).done;)J.push(te.value)}catch(ce){q={error:ce}}finally{try{te&&!te.done&&(de=he.return)&&de.call(he)}finally{if(q)throw q.error}}return J},se=$(9069).EventEmitter,z=$(8701),H=z.DEFAULT_NQ_LEVEL_LOCAL,N=z.DEFAULT_NQ_LEVEL_REMOTE,k=z.MAX_NQ_LEVEL,L=$(9739).inRange,U=function(ee){function ae(de){var he=ee.call(this)||this;return de=Object.assign({local:H,remote:N},de),Object.defineProperties(he,{local:{value:L(de.local,H,k)?de.local:H,writable:!0},remote:{value:L(de.remote,N,k)?de.remote:N,writable:!0}}),he}return V(ae,ee),ae.prototype.update=function(de){var he=this;de=Object.assign({local:this.local,remote:this.remote},de),[["local",H,3],["remote",N,3]].forEach(function(te){var J=Y(te,3),q=J[0],ce=J[1];he[q]="number"==typeof de[q]&&L(de[q],ce,J[2])?de[q]:ce})},ae}(se);Re.exports=U},9218:function(Re,Pe,$){"use strict";var Ee,V=this&&this.__extends||(Ee=function(Oe,fe){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,Se){we.__proto__=Se}||function(we,Se){for(var ge in Se)Object.prototype.hasOwnProperty.call(Se,ge)&&(we[ge]=Se[ge])})(Oe,fe)},function(Oe,fe){if("function"!=typeof fe&&null!==fe)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function we(){this.constructor=Oe}Ee(Oe,fe),Oe.prototype=null===fe?Object.create(fe):(we.prototype=fe.prototype,new we)}),Y=this&&this.__read||function(Ee,Oe){var fe="function"==typeof Symbol&&Ee[Symbol.iterator];if(!fe)return Ee;var Se,ue,we=fe.call(Ee),ge=[];try{for(;(void 0===Oe||Oe-- >0)&&!(Se=we.next()).done;)ge.push(Se.value)}catch(pe){ue={error:pe}}finally{try{Se&&!Se.done&&(fe=we.return)&&fe.call(we)}finally{if(ue)throw ue.error}}return ge},se=this&&this.__spreadArray||function(Ee,Oe){for(var fe=0,we=Oe.length,Se=Ee.length;fe<we;fe++,Se++)Ee[Se]=Oe[fe];return Ee},z=$(133),H=$(8797),N=$(8661),k=$(5606),L=$(8459),U=$(1629),ee=$(1768),ae=$(9739),de=0,he=function(Ee){function Oe(fe,we){var Se=Ee.call(this)||this,ge=function te(Ee){var Oe=Ee.map(function(ge){return[ge.id,ge]}),fe=Oe.filter(function(ge){return"audio"===ge[1].kind}),we=Oe.filter(function(ge){return"video"===ge[1].kind}),Se=Oe.filter(function(ge){return"data"===ge[1].kind});return{audioTracks:fe,dataTracks:Se,tracks:Oe,videoTracks:we}}((we=Object.assign({RemoteAudioTrack:H,RemoteAudioTrackPublication:N,RemoteDataTrack:k,RemoteDataTrackPublication:L,RemoteVideoTrack:U,RemoteVideoTrackPublication:ee,tracks:[]},we)).tracks),ue=we.log.createLog("default",Se),pe=new Map(ge.audioTracks),Ie=new Map(ge.dataTracks),je=new Map(ge.tracks),Le=new Map(ge.videoTracks);return Object.defineProperties(Se,{_RemoteAudioTrack:{value:we.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:we.RemoteAudioTrackPublication},_RemoteDataTrack:{value:we.RemoteDataTrack},_RemoteDataTrackPublication:{value:we.RemoteDataTrackPublication},_RemoteVideoTrack:{value:we.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:we.RemoteVideoTrackPublication},_audioTracks:{value:pe},_dataTracks:{value:Ie},_instanceId:{value:++de},_clientTrackSwitchOffControl:{value:we.clientTrackSwitchOffControl},_contentPreferencesMode:{value:we.contentPreferencesMode},_log:{value:ue},_signaling:{value:fe},_tracks:{value:je},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:Le},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return fe.identity}},networkQualityLevel:{enumerable:!0,get:function(){return fe.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return fe.networkQualityStats}},sid:{enumerable:!0,get:function(){return fe.sid}},state:{enumerable:!0,get:function(){return fe.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),Se._tracks.forEach(q.bind(null,Se)),fe.on("networkQualityLevelChanged",function(){return Se.emit("networkQualityLevelChanged",Se.networkQualityLevel,Se.networkQualityStats&&(Se.networkQualityStats.audio||Se.networkQualityStats.video)?Se.networkQualityStats:null)}),function J(Ee,Oe){var fe=Ee._log;"disconnected"!==Ee.state&&Oe.on("stateChanged",function we(Se){fe.debug("Transitioned to state:",Se),Ee.emit(Se,Ee),"disconnected"===Se&&(fe.debug("Removing Track event reemitters"),Oe.removeListener("stateChanged",we),Ee._tracks.forEach(function(ge){var ue=Ee._trackEventReemitters.get(ge.id);ge&&ue&&ue.forEach(function(pe,Ie){ge.removeListener(Ie,pe)})}),Oe.tracks.forEach(function(ge){var ue=Ee._tracks.get(ge.id),pe=Ee._trackEventReemitters.get(ge.id);ue&&pe&&pe.forEach(function(Ie,je){ue.removeListener(je,Ie)})}),Ee._trackEventReemitters.clear(),Ee.tracks.forEach(function(ge){Ee._trackPublicationEventReemitters.get(ge.trackSid).forEach(function(ue,pe){ge.removeListener(pe,ue)})}),Ee._trackPublicationEventReemitters.clear())})}(Se,fe),ue.info("Created a new Participant"+(Se.identity?": "+Se.identity:"")),Se}return V(Oe,Ee),Oe.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},Oe.prototype._getTrackPublicationEvents=function(){return[]},Oe.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},Oe.prototype._addTrack=function(fe,we){var Se=this._log;return this._tracks.has(we)?null:(this._tracks.set(we,fe),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[fe.kind].set(we,fe),q(this,fe,we),Se.info("Added a new "+ae.trackClass(fe)+":",we),Se.debug(ae.trackClass(fe)+":",fe),fe)},Oe.prototype._addTrackPublication=function(fe){var we=this._log;return this.tracks.has(fe.trackSid)?null:(this.tracks.set(fe.trackSid,fe),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[fe.kind].set(fe.trackSid,fe),function ce(Ee,Oe){var fe=new Map;"disconnected"!==Ee.state&&(Ee._getTrackPublicationEvents().forEach(function(we){var Se=Y(we,2),ge=Se[0],ue=Se[1];fe.set(ge,function(){for(var pe=[],Ie=0;Ie<arguments.length;Ie++)pe[Ie]=arguments[Ie];Ee.emit.apply(Ee,se(se([ue],Y(pe)),[Oe]))}),Oe.on(ge,fe.get(ge))}),Ee._trackPublicationEventReemitters.set(Oe.trackSid,fe))}(this,fe),we.info("Added a new "+ae.trackPublicationClass(fe)+":",fe.trackSid),we.debug(ae.trackPublicationClass(fe)+":",fe),fe)},Oe.prototype._handleTrackSignalingEvents=function(){var we=this._log,Se=this._clientTrackSwitchOffControl,ge=this._contentPreferencesMode,ue=this;if("disconnected"!==this.state){var pe=this._RemoteAudioTrack,Ie=this._RemoteAudioTrackPublication,je=this._RemoteVideoTrack,Le=this._RemoteVideoTrackPublication,Qe=this._RemoteDataTrack,$e=this._RemoteDataTrackPublication,Xe=this._signaling;Xe.on("trackAdded",Me),Xe.on("trackRemoved",Qt),Xe.tracks.forEach(Me),Xe.on("stateChanged",function Ke(Fe){"disconnected"===Fe?(we.debug("Removing event listeners"),Xe.removeListener("stateChanged",Ke),Xe.removeListener("trackAdded",Me),Xe.removeListener("trackRemoved",Qt)):"connected"===Fe&&(we.info("reconnected"),setTimeout(function(){return ue.emit("reconnected")},0))})}function Me(Ke){var We=new(0,{audio:Ie,data:$e,video:Le}[Ke.kind])(Ke,{log:we});ue._addTrackPublication(We);var De=Ke.isSubscribed;De&&Wt(Ke),ue._trackSignalingUpdatedEventCallbacks.set(Ke.sid,function(){if(De!==Ke.isSubscribed){if(De=Ke.isSubscribed)return void Wt(Ke);!function St(Ke){var Fe=Y(Array.from(ue._tracks.entries()).find(function(Ut){return Y(Ut,2)[1].sid===Ke.sid}),2),We=Fe[0],De=Fe[1],et=ue.tracks.get(Ke.sid);De&&ue._removeTrack(De,et,We)}(Ke)}}),Ke.on("updated",ue._trackSignalingUpdatedEventCallbacks.get(Ke.sid))}function Qt(Ke){Ke.isSubscribed&&Ke.setTrackTransceiver(null);var Fe=ue._trackSignalingUpdatedEventCallbacks.get(Ke.sid);Fe&&(Ke.removeListener("updated",Fe),ue._trackSignalingUpdatedEventCallbacks.delete(Ke.sid));var We=ue.tracks.get(Ke.sid);We&&ue._removeTrackPublication(We)}function Wt(Ke){var Fe=Ke.isEnabled,We=Ke.name,De=Ke.kind,et=Ke.sid,Ut=Ke.trackTransceiver,Zt=Ke.isSwitchedOff,Mt={audio:pe,video:je,data:Qe}[De],tn=ue.tracks.get(et);if(Mt&&De===Ut.kind){var Jn={log:we,name:We,clientTrackSwitchOffControl:Se,contentPreferencesMode:ge},xr="data"===De?new Mt(et,Ut,Jn):new Mt(et,Ut,Fe,Zt,function(wr){return Xe.updateSubscriberTrackPriority(et,wr)},function(wr){Ke.isSubscribed&&Xe.updateTrackRenderHint(et,wr)},Jn);ue._addTrack(xr,tn,Ut.id)}}},Oe.prototype._removeTrack=function(fe,we){if(!this._tracks.has(we))return null;this._tracks.delete(we),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[fe.kind].delete(we),(this._trackEventReemitters.get(we)||new Map).forEach(function(pe,Ie){fe.removeListener(Ie,pe)});var ue=this._log;return ue.info("Removed a "+ae.trackClass(fe)+":",we),ue.debug(ae.trackClass(fe)+":",fe),fe},Oe.prototype._removeTrackPublication=function(fe){if(!(fe=this.tracks.get(fe.trackSid)))return null;this.tracks.delete(fe.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[fe.kind].delete(fe.trackSid),(this._trackPublicationEventReemitters.get(fe.trackSid)||new Map).forEach(function(ue,pe){fe.removeListener(pe,ue)});var ge=this._log;return ge.info("Removed a "+ae.trackPublicationClass(fe)+":",fe.trackSid),ge.debug(ae.trackPublicationClass(fe)+":",fe),fe},Oe.prototype.toJSON=function(){return ae.valueToJSON(this)},Oe}(z);function q(Ee,Oe,fe){var we=new Map;"disconnected"!==Ee.state&&(Ee._getTrackEvents().forEach(function(Se){var ge=Se[0],ue=Se[1];we.set(ge,function(){var pe=[ue].concat([].slice.call(arguments));return Ee.emit.apply(Ee,se([],Y(pe)))}),Oe.on(ge,we.get(ge))}),Ee._trackEventReemitters.set(fe,we))}Re.exports=he},9305:function(Re,Pe){"use strict";var $=this&&this.__awaiter||function(k,L,U,ee){return new(U||(U=Promise))(function(de,he){function te(ce){try{q(ee.next(ce))}catch(Ee){he(Ee)}}function J(ce){try{q(ee.throw(ce))}catch(Ee){he(Ee)}}function q(ce){ce.done?de(ce.value):function ae(de){return de instanceof U?de:new U(function(he){he(de)})}(ce.value).then(te,J)}q((ee=ee.apply(k,L||[])).next())})},V=this&&this.__generator||function(k,L){var ee,ae,de,he,U={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return he={next:te(0),throw:te(1),return:te(2)},"function"==typeof Symbol&&(he[Symbol.iterator]=function(){return this}),he;function te(q){return function(ce){return function J(q){if(ee)throw new TypeError("Generator is already executing.");for(;U;)try{if(ee=1,ae&&(de=2&q[0]?ae.return:q[0]?ae.throw||((de=ae.return)&&de.call(ae),0):ae.next)&&!(de=de.call(ae,q[1])).done)return de;switch(ae=0,de&&(q=[2&q[0],de.value]),q[0]){case 0:case 1:de=q;break;case 4:return U.label++,{value:q[1],done:!1};case 5:U.label++,ae=q[1],q=[0];continue;case 7:q=U.ops.pop(),U.trys.pop();continue;default:if(!(de=(de=U.trys).length>0&&de[de.length-1])&&(6===q[0]||2===q[0])){U=0;continue}if(3===q[0]&&(!de||q[1]>de[0]&&q[1]<de[3])){U.label=q[1];break}if(6===q[0]&&U.label<de[1]){U.label=de[1],de=q;break}if(de&&U.label<de[2]){U.label=de[2],U.ops.push(q);break}de[2]&&U.ops.pop(),U.trys.pop();continue}q=L.call(k,U)}catch(ce){q=[6,ce],ae=0}finally{ee=de=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([q,ce])}}},Y=this&&this.__read||function(k,L){var U="function"==typeof Symbol&&k[Symbol.iterator];if(!U)return k;var ae,he,ee=U.call(k),de=[];try{for(;(void 0===L||L-- >0)&&!(ae=ee.next()).done;)de.push(ae.value)}catch(te){he={error:te}}finally{try{ae&&!ae.done&&(U=ee.return)&&U.call(ee)}finally{if(he)throw he.error}}return de};function se(k,L,U,ee){var ae=[];return k.forEach(function(de){(0===ee.length||ee.includes(de.type))&&(0===U.length||U.includes(de.kind))&&"number"==typeof de[L]&&ae.push(de[L])}),ae}function H(k){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(U,ee){var ae=[ee.key];ee.altKeys&&(ae=ae.concat(ee.altKeys));var de=ae.find(function(he){return he in k});return de&&typeof k[de]===ee.type&&(U[ee.key]=k[de]),U},{})}Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getCombinedConnectionStats=void 0,Pe.getCombinedConnectionStats=function z(k){var L=k.publisher,U=k.subscriber;return $(this,void 0,void 0,function(){var ee,ae,de,he,te,J,q,ce,Ee,Oe,fe,we,Se,ge,ue;return V(this,function(pe){switch(pe.label){case 0:return[4,Promise.all([L,U].map(function(Ie){return Ie.getStats()}))];case 1:return ee=Y.apply(void 0,[pe.sent(),2]),ae=ee[0],he=se(de=ee[1],"timestamp",["audio"],["inbound-rtp"]),te=he.length>0?he[0]:0,J=se(de,"jitter",["audio"],["inbound-rtp"]).reduce(function(Ie,je){return Math.max(Ie,je)},0),q=se(de,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(Ie,je){return Ie+je},0),ce=se(de,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(Ie,je){return Ie+je},0),Ee=se(ae,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(Ie,je){return Math.max(Ie,je)},0),Oe=se(de,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(Ie,je){return Math.max(Ie,je)},0),fe=1e3*(Oe||Ee),we=se(ae,"bytesSent",[],["candidate-pair"]).reduce(function(Ie,je){return Ie+je},0),Se=se(de,"bytesReceived",[],["candidate-pair"]).reduce(function(Ie,je){return Ie+je},0),ge=function N(k){var L=null,U=[];k.forEach(function(te){"transport"===te.type&&te.selectedCandidatePairId?L=te.selectedCandidatePairId:"candidate-pair"===te.type&&U.push(te)});var ee=U.find(function(te){return te.selected||L&&te.id===L});if(!ee)return null;var ae=ee,de=k.get(ae.localCandidateId),he=k.get(ae.remoteCandidateId);return de&&he?{localCandidate:H(de),remoteCandidate:H(he)}:null}(de),ue=[],de.forEach(function(Ie){("local-candidate"===Ie.type||"remote-candidate"===Ie.type)&&ue.push(H(Ie))}),[2,{timestamp:te,jitter:J,packets:q,packetsLost:ce,roundTripTime:fe,bytesSent:we,bytesReceived:Se,selectedIceCandidatePairStats:ge,iceCandidateStats:ue}]}})})}},2449:(Re,Pe,$)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getTurnCredentials=void 0;var V=$(5330),Y=$(8701).ICE_VERSION,se=$(8380),z=se.createTwilioError,H=se.SignalingConnectionError,N=$(9069);Pe.getTurnCredentials=function k(L,U){return new Promise(function(ee,ae){var de=new N.EventEmitter,te=new V(U,{networkMonitor:null,eventObserver:de,helloBody:{edge:"roaming",preflight:!0,token:L,type:"ice",version:Y}}),J=!1;te.once("close",function(){J||(J=!0,ae(new H))}),te.on("message",function(q){var ce=q.code,Ee=q.message,fe=q.type;("iced"===fe||"error"===fe)&&!J&&(J=!0,"iced"===fe?ee(q.ice_servers):ae(z(ce,Ee)),te.close())})})}},5359:function(Re,Pe){"use strict";var $=this&&this.__read||function(se,z){var H="function"==typeof Symbol&&se[Symbol.iterator];if(!H)return se;var k,U,N=H.call(se),L=[];try{for(;(void 0===z||z-- >0)&&!(k=N.next()).done;)L.push(k.value)}catch(ee){U={error:ee}}finally{try{k&&!k.done&&(H=N.return)&&H.call(N)}finally{if(U)throw U.error}}return L},V=this&&this.__spreadArray||function(se,z){for(var H=0,N=z.length,k=se.length;H<N;H++,k++)se[k]=z[H];return se};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.makeStat=void 0,Pe.makeStat=function Y(se){return se&&se.length?{min:Math.min.apply(Math,V([],$(se))),max:Math.max.apply(Math,V([],$(se))),average:se.reduce(function(k,L){return k+L},0)/se.length}:null}},2436:(Re,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.mosToScore=Pe.calculateMOS=void 0;var $=94.768;Pe.calculateMOS=function V(se,z,H){var N=se+2*z+10,k=0;switch(!0){case N<160:k=$-N/40;break;case N<1e3:k=$-(N-120)/10}return 1+.035*(k=1==H<=k/2.5?Math.max(k-2.5*H,6.52):0)+7e-6*k*(k-60)*(100-k)},Pe.mosToScore=function Y(se){return se?se>4.2?5:se>4?4:se>3.6?3:se>3?2:1:0}},8682:function(Re,Pe,$){"use strict";var Wt,V=this&&this.__extends||(Wt=function(St,Ke){return(Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Fe,We){Fe.__proto__=We}||function(Fe,We){for(var De in We)Object.prototype.hasOwnProperty.call(We,De)&&(Fe[De]=We[De])})(St,Ke)},function(St,Ke){if("function"!=typeof Ke&&null!==Ke)throw new TypeError("Class extends value "+String(Ke)+" is not a constructor or null");function Fe(){this.constructor=St}Wt(St,Ke),St.prototype=null===Ke?Object.create(Ke):(Fe.prototype=Ke.prototype,new Fe)}),Y=this&&this.__assign||function(){return Y=Object.assign||function(Wt){for(var St,Ke=1,Fe=arguments.length;Ke<Fe;Ke++)for(var We in St=arguments[Ke])Object.prototype.hasOwnProperty.call(St,We)&&(Wt[We]=St[We]);return Wt},Y.apply(this,arguments)},se=this&&this.__awaiter||function(Wt,St,Ke,Fe){return new(Ke||(Ke=Promise))(function(De,et){function Ut(tn){try{Mt(Fe.next(tn))}catch(Jn){et(Jn)}}function Zt(tn){try{Mt(Fe.throw(tn))}catch(Jn){et(Jn)}}function Mt(tn){tn.done?De(tn.value):function We(De){return De instanceof Ke?De:new Ke(function(et){et(De)})}(tn.value).then(Ut,Zt)}Mt((Fe=Fe.apply(Wt,St||[])).next())})},z=this&&this.__generator||function(Wt,St){var Fe,We,De,et,Ke={label:0,sent:function(){if(1&De[0])throw De[1];return De[1]},trys:[],ops:[]};return et={next:Ut(0),throw:Ut(1),return:Ut(2)},"function"==typeof Symbol&&(et[Symbol.iterator]=function(){return this}),et;function Ut(Mt){return function(tn){return function Zt(Mt){if(Fe)throw new TypeError("Generator is already executing.");for(;Ke;)try{if(Fe=1,We&&(De=2&Mt[0]?We.return:Mt[0]?We.throw||((De=We.return)&&De.call(We),0):We.next)&&!(De=De.call(We,Mt[1])).done)return De;switch(We=0,De&&(Mt=[2&Mt[0],De.value]),Mt[0]){case 0:case 1:De=Mt;break;case 4:return Ke.label++,{value:Mt[1],done:!1};case 5:Ke.label++,We=Mt[1],Mt=[0];continue;case 7:Mt=Ke.ops.pop(),Ke.trys.pop();continue;default:if(!(De=(De=Ke.trys).length>0&&De[De.length-1])&&(6===Mt[0]||2===Mt[0])){Ke=0;continue}if(3===Mt[0]&&(!De||Mt[1]>De[0]&&Mt[1]<De[3])){Ke.label=Mt[1];break}if(6===Mt[0]&&Ke.label<De[1]){Ke.label=De[1],De=Mt;break}if(De&&Ke.label<De[2]){Ke.label=De[2],Ke.ops.push(Mt);break}De[2]&&Ke.ops.pop(),Ke.trys.pop();continue}Mt=St.call(Wt,Ke)}catch(tn){Mt=[6,tn],We=0}finally{Fe=De=0}if(5&Mt[0])throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}([Mt,tn])}}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.runPreflight=Pe.PreflightTest=void 0;var H=$(8701),N=$(1567),k=$(2436),L=$(9305),U=$(2449),ee=$(5359),ae=$(5237),de=$(3519),he=$(9739),te=$(8701).WS_SERVER,J=$(1458),q=$(133),ce=$(8218),Ee=$(8606),Oe=$(3744),fe=$(8066),we=fe.createSID,Se=fe.sessionSID,ge=$(8380),ue=ge.SignalingConnectionTimeoutError,pe=ge.MediaConnectionError;function Qe(Wt){return null!==Wt&&typeof Wt<"u"}var $e=0,Xe=function(Wt){function St(Ke,Fe){var We=Wt.call(this)||this;We._testTiming=new N.Timer,We._dtlsTiming=new N.Timer,We._iceTiming=new N.Timer,We._peerConnectionTiming=new N.Timer,We._mediaTiming=new N.Timer,We._connectTiming=new N.Timer,We._sentBytesMovingAverage=new ce,We._packetLossMovingAverage=new ce,We._progressEvents=[],We._receivedBytesMovingAverage=new ce;var et=Fe.environment,Ut=void 0===et?"prod":et,Zt=Fe.region,tn=Fe.duration,Jn=void 0===tn?1e4:tn,qt=Fe.wsServer||te(Ut,void 0===Zt?"gll":Zt);return We._log=new J("default",We,H.DEFAULT_LOG_LEVEL,H.DEFAULT_LOGGER_NAME),We._testDuration=Jn,We._instanceId=$e++,We._testTiming.start(),We._runPreflightTest(Ke,Ut,qt),We}return V(St,Wt),St.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},St.prototype.stop=function(){this._stopped=!0},St.prototype._generatePreflightReport=function(Ke){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:ee.makeStat(Ke?.jitter),rtt:ee.makeStat(Ke?.rtt),packetLoss:ee.makeStat(Ke?.packetLoss)},selectedIceCandidatePairStats:Ke?Ke.selectedIceCandidatePairStats:null,iceCandidateStats:Ke?Ke.iceCandidateStats:[],progressEvents:this._progressEvents,mos:ee.makeStat(Ke?.mos)}},St.prototype._executePreflightStep=function(Ke,Fe,We){return se(this,void 0,void 0,function(){var De,et,Ut,Zt;return z(this,function(tn){switch(tn.label){case 0:if(this._log.debug("Executing step: ",Ke),De=this._testDuration+1e4,this._stopped)throw new Error("stopped");et=Promise.resolve().then(Fe),Ut=null,Zt=new Promise(function(Jn,qt){Ut=setTimeout(function(){qt(We||new Error(Ke+" timeout."))},De)}),tn.label=1;case 1:return tn.trys.push([1,,3,4]),[4,Promise.race([Zt,et])];case 2:return[2,tn.sent()];case 3:return null!==Ut&&clearTimeout(Ut),[7];case 4:return[2]}})})},St.prototype._collectNetworkTimings=function(Ke){var Fe=this;return new Promise(function(We){var De;Ke.addEventListener("iceconnectionstatechange",function(){"checking"===Ke.iceConnectionState&&Fe._iceTiming.start(),"connected"===Ke.iceConnectionState&&(Fe._iceTiming.stop(),Fe._updateProgress("iceConnected"),(!De||De&&"connected"===De.state)&&We())}),Ke.addEventListener("connectionstatechange",function(){"connecting"===Ke.connectionState&&Fe._peerConnectionTiming.start(),"connected"===Ke.connectionState&&(Fe._peerConnectionTiming.stop(),Fe._updateProgress("peerConnectionConnected"))});var Ut=Ke.getSenders().map(function(Zt){return Zt.transport}).find(Qe);typeof Ut<"u"&&(De=Ut).addEventListener("statechange",function(){"connecting"===De.state&&Fe._dtlsTiming.start(),"connected"===De.state&&(Fe._dtlsTiming.stop(),Fe._updateProgress("dtlsConnected"),"connected"===Ke.iceConnectionState&&We())})})},St.prototype._setupInsights=function(Ke){var We=Ke.environment,et=Ke.realm,Mt=new Oe(Ke.token,H.SDK_NAME,H.SDK_VERSION,void 0===We?H.DEFAULT_ENVIRONMENT:We,void 0===et?H.DEFAULT_REALM:et,{});Mt.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var tn=new Ee(Mt,Date.now(),this._log),Jn=void 0;return{reportToInsights:function(qt){var Mr,xr,wr=qt.report,Cr=wr.stats.jitter||Jn,Sr=wr.stats.rtt||Jn,Bi=wr.stats.packetLoss||Jn,rr=wr.mos||Jn,Qi=new Map;wr.iceCandidateStats.forEach(function(Ht){if(Ht.candidateType&&Ht.protocol){var sn=Qi.get(Ht.candidateType)||[];sn.indexOf(Ht.protocol)<0&&sn.push(Ht.protocol),Qi.set(Ht.candidateType,sn)}});var fa=JSON.stringify(Object.fromEntries(Qi)),Ct={name:"report",group:"preflight",level:wr.error?"error":"info",payload:{sessionSID:Se,preflightSID:we("PF"),progressEvents:JSON.stringify(wr.progressEvents),testTiming:wr.testTiming,dtlsTiming:wr.networkTiming.dtls,iceTiming:wr.networkTiming.ice,peerConnectionTiming:wr.networkTiming.peerConnection,connectTiming:wr.networkTiming.connect,mediaTiming:wr.networkTiming.media,selectedLocalCandidate:null===(Mr=wr.selectedIceCandidatePairStats)||void 0===Mr?void 0:Mr.localCandidate,selectedRemoteCandidate:null===(xr=wr.selectedIceCandidatePairStats)||void 0===xr?void 0:xr.remoteCandidate,iceCandidateStats:fa,jitterStats:Cr,rttStats:Sr,packetLossStats:Bi,mosStats:rr,error:wr.error}};tn.emit("event",Ct),setTimeout(function(){return Mt.disconnect()},2e3)}}},St.prototype._runPreflightTest=function(Ke,Fe,We){return se(this,void 0,void 0,function(){var De,et,Ut,Zt,Mt,tn,Jn,qt,Mr,xr,wr,Cr,Sr=this;return z(this,function(Bi){switch(Bi.label){case 0:De=[],et=[],Ut=this._setupInsights({token:Ke,environment:Fe}).reportToInsights,Bi.label=1;case 1:return Bi.trys.push([1,8,9,10]),Zt=[],[4,this._executePreflightStep("Acquire media",function(){return[ae.syntheticAudio(),de.syntheticVideo({width:640,height:480})]})];case 2:return De=Bi.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:De}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return U.getTurnCredentials(Ke,We)},new ue)];case 3:return Mt=Bi.sent(),this._connectTiming.stop(),this._updateProgress("connected"),tn=new RTCPeerConnection({iceServers:Mt,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Jn=new RTCPeerConnection({iceServers:Mt,bundlePolicy:"max-bundle"}),et.push(tn),et.push(Jn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return se(Sr,void 0,void 0,function(){var rr,Qi,fa,Ct;return z(this,function(Ht){switch(Ht.label){case 0:return tn.addEventListener("icecandidate",function(sn){return sn.candidate&&Jn.addIceCandidate(sn.candidate)}),Jn.addEventListener("icecandidate",function(sn){return sn.candidate&&tn.addIceCandidate(sn.candidate)}),De.forEach(function(sn){return tn.addTrack(sn)}),rr=new Promise(function(sn){var ze=[];Jn.addEventListener("track",function(xe){ze.push(xe.track),ze.length===De.length&&sn(ze)})}),[4,tn.createOffer()];case 1:return Qi=Ht.sent(),[4,tn.setLocalDescription(fa=Qi)];case 2:return Ht.sent(),[4,Jn.setRemoteDescription(fa)];case 3:return Ht.sent(),[4,Jn.createAnswer()];case 4:return Ct=Ht.sent(),[4,Jn.setLocalDescription(Ct)];case 5:return Ht.sent(),[4,tn.setRemoteDescription(Ct)];case 6:return Ht.sent(),[4,this._collectNetworkTimings(tn)];case 7:return Ht.sent(),[2,rr]}})})},new pe)];case 4:return qt=Bi.sent(),this.emit("debug",{remoteTracks:qt}),qt.forEach(function(rr){rr.addEventListener("ended",function(){return Sr._log.warn(rr.kind+":ended")}),rr.addEventListener("mute",function(){return Sr._log.warn(rr.kind+":muted")}),rr.addEventListener("unmute",function(){return Sr._log.warn(rr.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(rr){var Qi=document.createElement("video");Qi.autoplay=!0,Qi.playsInline=!0,Qi.muted=!0,Qi.srcObject=new MediaStream(qt),Zt.push(Qi),Sr.emit("debugElement",Qi),Qi.oncanplay=rr})},new pe)];case 5:return Bi.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return Sr._collectRTCStatsForDuration(Sr._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},tn,Jn)})];case 6:return Mr=Bi.sent(),[4,this._executePreflightStep("Generate report",function(){return Sr._generatePreflightReport(Mr)})];case 7:return xr=Bi.sent(),Ut({report:xr}),this.emit("completed",xr),[3,10];case 8:return wr=Bi.sent(),Cr=this._generatePreflightReport(),Ut({report:Y(Y({},Cr),{error:wr?.toString()})}),this.emit("failed",wr,Cr),[3,10];case 9:return et.forEach(function(rr){return rr.close()}),De.forEach(function(rr){return rr.stop()}),[7];case 10:return[2]}})})},St.prototype._collectRTCStats=function(Ke,Fe,We){return se(this,void 0,void 0,function(){var De,et,Ut,Zt,Mt,tn,Jn,qt,Mr,xr,wr,Cr,Sr,Bi;return z(this,function(rr){switch(rr.label){case 0:return[4,L.getCombinedConnectionStats({publisher:Fe,subscriber:We})];case 1:return De=rr.sent(),et=De.timestamp,Ut=De.bytesSent,Zt=De.bytesReceived,Mt=De.packets,tn=De.packetsLost,Jn=De.roundTripTime,Mr=De.selectedIceCandidatePairStats,xr=De.iceCandidateStats,wr=Ke.jitter.length>0,Ke.jitter.push(qt=De.jitter),Ke.rtt.push(Jn),this._sentBytesMovingAverage.putSample(Ut,et),this._receivedBytesMovingAverage.putSample(Zt,et),this._packetLossMovingAverage.putSample(tn,Mt),wr&&(Ke.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),Ke.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),Cr=this._packetLossMovingAverage.get(),Sr=Math.min(100,100*Cr),Ke.packetLoss.push(Sr),Bi=k.calculateMOS(Jn,qt,Cr),Ke.mos.push(Bi)),Ke.selectedIceCandidatePairStats||(Ke.selectedIceCandidatePairStats=Mr),0===Ke.iceCandidateStats.length&&(Ke.iceCandidateStats=xr),[2]}})})},St.prototype._collectRTCStatsForDuration=function(Ke,Fe,We,De){return se(this,void 0,void 0,function(){var et,Ut,Zt;return z(this,function(Mt){switch(Mt.label){case 0:return et=Date.now(),Ut=Math.min(1e3,Ke),[4,he.waitForSometime(Ut)];case 1:return Mt.sent(),[4,this._collectRTCStats(Fe,We,De)];case 2:return Mt.sent(),(Zt=Ke-(Date.now()-et))>0?[4,this._collectRTCStatsForDuration(Zt,Fe,We,De)]:[3,4];case 3:Fe=Mt.sent(),Mt.label=4;case 4:return[2,Fe]}})})},St.prototype._updateProgress=function(Ke){var Fe=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:Fe,name:Ke}),this.emit("progress",Ke)},St}(q);Pe.PreflightTest=Xe,Pe.runPreflight=function Qt(Wt,St){return void 0===St&&(St={}),new Xe(Wt,St)}},5237:(Re,Pe,$)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.syntheticAudio=void 0,Pe.syntheticAudio=function V(){var Y=$(7708),se={},z=Y.getOrCreate(se),H=z.createOscillator(),N=H.connect(z.createMediaStreamDestination());H.start();var k=N.stream.getAudioTracks()[0],L=k.stop;return k.stop=function(){L.call(k),Y.release(se)},k}},3519:(Re,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.syntheticVideo=void 0,Pe.syntheticVideo=function $(V){var Y=void 0===V?{}:V,se=Y.width,z=void 0===se?640:se,H=Y.height,N=void 0===H?480:H,k=Object.assign(document.createElement("canvas"),{width:z,height:N}),L=k.getContext("2d");L.fillStyle="green",L.fillRect(0,0,k.width,k.height);var U=!1;requestAnimationFrame(function he(){if(!U){var te=Math.round(255*Math.random()),J=Math.round(255*Math.random()),q=Math.round(255*Math.random()),ce=Math.round(255*Math.random());L.fillStyle="rgba("+te+", "+J+", "+q+", "+ce+")",L.fillRect(Math.random()*z,Math.random()*N,50,50),requestAnimationFrame(he)}});var ae=k.captureStream(30).getTracks()[0],de=ae.stop;return ae.stop=function(){U=!0,de.call(ae)},ae}},1567:(Re,Pe)=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Timer=void 0;var $=function(){function V(){this._end=void 0,this.start()}return V.prototype.start=function(){return this._start=Date.now(),this},V.prototype.stop=function(){return this._end=Date.now(),this},V.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},V}();Pe.Timer=$},7772:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=this&&this.__read||function(N,k){var L="function"==typeof Symbol&&N[Symbol.iterator];if(!L)return N;var ee,de,U=L.call(N),ae=[];try{for(;(void 0===k||k-- >0)&&!(ee=U.next()).done;)ae.push(ee.value)}catch(he){de={error:he}}finally{try{ee&&!ee.done&&(L=U.return)&&L.call(U)}finally{if(de)throw de.error}}return ae},se=this&&this.__spreadArray||function(N,k){for(var L=0,U=k.length,ee=N.length;L<U;L++,ee++)N[ee]=k[L];return N},H=function(N){function k(){var L=N.call(this)||this;return Object.defineProperties(L,{_queuedEvents:{value:new Map}}),L}return V(k,N),k.prototype.dequeue=function(L){var U=this,ee=!0;if(!L)return this._queuedEvents.forEach(function(de,he){ee=this.dequeue(he)&&ee},this),ee;var ae=this._queuedEvents.get(L)||[];return this._queuedEvents.delete(L),ae.reduce(function(de,he){return U.emit.apply(U,se([],Y([L].concat(he))))&&de},ee)},k.prototype.queue=function(){var L=[].slice.call(arguments);if(this.emit.apply(this,se([],Y(L))))return!0;var U=L[0];return this._queuedEvents.has(U)||this._queuedEvents.set(U,[]),this._queuedEvents.get(U).push(L.slice(1)),!1},k}($(9069).EventEmitter);Re.exports=H},3609:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=this&&this.__read||function(N,k){var L="function"==typeof Symbol&&N[Symbol.iterator];if(!L)return N;var ee,de,U=L.call(N),ae=[];try{for(;(void 0===k||k-- >0)&&!(ee=U.next()).done;)ae.push(ee.value)}catch(he){de={error:he}}finally{try{ee&&!ee.done&&(L=U.return)&&L.call(U)}finally{if(de)throw de.error}}return ae},se=this&&this.__spreadArray||function(N,k){for(var L=0,U=k.length,ee=N.length;L<U;L++,ee++)N[ee]=k[L];return N},H=function(N){function k(L,U){var ee=N.call(this,L,U)||this;return ee._handleTrackSignalingEvents(),ee.once("disconnected",ee._unsubscribeTracks.bind(ee)),ee}return V(k,N),k.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},k.prototype._addTrack=function(L,U,ee){return N.prototype._addTrack.call(this,L,ee)?(U._subscribed(L),this.emit("trackSubscribed",L,U),L):null},k.prototype._addTrackPublication=function(L){var U=N.prototype._addTrackPublication.call(this,L);return U?(this.emit("trackPublished",U),U):null},k.prototype._getTrackPublicationEvents=function(){return se(se([],Y(N.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},k.prototype._unsubscribeTracks=function(){var L=this;this.tracks.forEach(function(U){if(U.isSubscribed){var ee=U.track;U._unsubscribe(),L.emit("trackUnsubscribed",ee,U)}})},k.prototype._removeTrack=function(L,U,ee){var ae=this._tracks.get(ee);return ae?(N.prototype._removeTrack.call(this,ae,ee),U._unsubscribe(),this.emit("trackUnsubscribed",ae,U),ae):null},k.prototype._removeTrackPublication=function(L){this._signaling.clearTrackHint(L.trackSid);var U=N.prototype._removeTrackPublication.call(this,L);return U?(this.emit("trackUnpublished",U),U):null},k}($(9218));Re.exports=H},7406:function(Re,Pe,$){"use strict";var te,V=this&&this.__extends||(te=function(J,q){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,Ee){ce.__proto__=Ee}||function(ce,Ee){for(var Oe in Ee)Object.prototype.hasOwnProperty.call(Ee,Oe)&&(ce[Oe]=Ee[Oe])})(J,q)},function(J,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function ce(){this.constructor=J}te(J,q),J.prototype=null===q?Object.create(q):(ce.prototype=q.prototype,new ce)}),Y=this&&this.__read||function(te,J){var q="function"==typeof Symbol&&te[Symbol.iterator];if(!q)return te;var Ee,fe,ce=q.call(te),Oe=[];try{for(;(void 0===J||J-- >0)&&!(Ee=ce.next()).done;)Oe.push(Ee.value)}catch(we){fe={error:we}}finally{try{Ee&&!Ee.done&&(q=ce.return)&&q.call(ce)}finally{if(fe)throw fe.error}}return Oe},se=this&&this.__spreadArray||function(te,J){for(var q=0,ce=J.length,Ee=te.length;q<ce;q++,Ee++)te[Ee]=J[q];return te},z=$(133),H=$(3609),N=$(7805),k=$(9739).valueToJSON,L=0,U=function(te){function J(q,ce,Ee){var Oe=te.call(this)||this,fe=Ee.log.createLog("default",Oe),we=new Map;return Object.defineProperties(Oe,{_log:{value:fe},_clientTrackSwitchOffControl:{value:Ee.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:Ee.contentPreferencesMode||"disabled"},_instanceId:{value:++L},_options:{value:Ee},_participants:{value:we},_signaling:{value:ce},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(ce.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return ce.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:q},name:{enumerable:!0,value:ce.name},participants:{enumerable:!0,value:we},sid:{enumerable:!0,value:ce.sid},state:{enumerable:!0,get:function(){return ce.state}},mediaRegion:{enumerable:!0,value:ce.mediaRegion}}),function de(te,J){J.on("updated",function(){var ce=J.isEnabled;te._log.info("Recording "+(ce?"started":"stopped")),te.emit("recording"+(ce?"Started":"Stopped"))})}(Oe,ce.recording),function he(te,J){var q=te._log;q.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),J.participants.forEach(ae.bind(null,te)),q.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),J.on("participantConnected",ae.bind(null,te)),J.on("dominantSpeakerChanged",function(){return te.emit("dominantSpeakerChanged",te.dominantSpeaker)}),J.on("stateChanged",function ce(Ee,Oe){switch(q.info("Transitioned to state:",Ee),Ee){case"disconnected":te.participants.forEach(function(fe){fe._unsubscribeTracks()}),te.emit(Ee,te,Oe),te.localParticipant.tracks.forEach(function(fe){fe.unpublish()}),J.removeListener("stateChanged",ce);break;case"reconnecting":setTimeout(function(){return te.emit("reconnecting",Oe)},0);break;default:setTimeout(function(){return te.emit("reconnected")},0)}})}(Oe,ce),fe.info("Created a new Room:",Oe.name),fe.debug("Initial RemoteParticipants:",Array.from(Oe._participants.values())),Oe}return V(J,te),J.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},J.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},J.prototype.getStats=function(){var q=this;return this._signaling.getStats().then(function(ce){return Array.from(ce).map(function(Ee){var Oe=Y(Ee,2),we=Oe[1];return new N(Oe[0],Object.assign({},we,{localAudioTrackStats:ee(q,we.localAudioTrackStats),localVideoTrackStats:ee(q,we.localVideoTrackStats)}))})})},J.prototype.toJSON=function(){return k(this)},J}(z);function ee(te,J){var q=te.localParticipant._signaling;return J.reduce(function(ce,Ee){var Oe=q.tracks.get(Ee.trackId),fe=q.getSender(Oe);return fe?[Object.assign({},Ee,{trackId:fe.id})].concat(ce):ce},[])}function ae(te,J){var q=te._log,Oe=new H(J,{log:q,clientTrackSwitchOffControl:te._clientTrackSwitchOffControl,contentPreferencesMode:te._contentPreferencesMode});q.info("A new RemoteParticipant connected:",Oe),te._participants.set(Oe.sid,Oe),te.emit("participantConnected",Oe);var fe=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(we){var Se=Y(Array.isArray(we)?we:[we,we],2),ge=Se[0],ue=Se[1];function pe(){var Ie=[].slice.call(arguments);Ie.unshift(ue),Ie.push(Oe),te.emit.apply(te,se([],Y(Ie)))}return Oe.on(ge,pe),[ge,pe]});Oe.once("disconnected",function(){var Se=te.dominantSpeaker;q.info("RemoteParticipant disconnected:",Oe),te._participants.delete(Oe.sid),fe.forEach(function(ge){Oe.removeListener(ge[0],ge[1])}),te.emit("participantDisconnected",Oe),Oe===Se&&te.emit("dominantSpeakerChanged",te.dominantSpeaker)})}Re.exports=U},8043:function(Re,Pe,$){"use strict";var k,V=this&&this.__extends||(k=function(L,U){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,ae){ee.__proto__=ae}||function(ee,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(ee[de]=ae[de])})(L,U)},function(L,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ee(){this.constructor=L}k(L,U),L.prototype=null===U?Object.create(U):(ee.prototype=U.prototype,new ee)}),Y=$(9285),se=$(8343),z=$(8675),H={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},N=function(k){function L(){return k.call(this,"closed",H)||this}return V(L,k),L.prototype._close=function(U){return this.transition("closing",U),this.transition("closed",U),Promise.resolve(this)},L.prototype._connect=function(U,ee,ae,de,he){U.connect("PA00000000000000000000000000000000","test");var J=Promise.resolve(new se(U,"RM00000000000000000000000000000000",he));return J.cancel=function(){},J},L.prototype._open=function(U){return this.transition("opening",U),this.transition("open",U),Promise.resolve(this)},L.prototype.close=function(){var U=this;return this.bracket("close",function(ee){switch(U.state){case"closed":return U;case"open":return U._close(ee);default:throw new Error('Unexpected Signaling state "'+U.state+'"')}})},L.prototype.connect=function(U,ee,ae,de,he){var te=this;return this.bracket("connect",function J(q){switch(te.state){case"closed":return te._open(q).then(J.bind(null,q));case"open":return te.releaseLockCompletely(q),te._connect(U,ee,ae,de,he);default:throw new Error('Unexpected Signaling state "'+te.state+'"')}})},L.prototype.createLocalParticipantSignaling=function(){return new Y},L.prototype.open=function(){var U=this;return this.bracket("open",function(ee){switch(U.state){case"closed":return U._open(ee);case"open":return U;default:throw new Error('Unexpected Signaling state "'+U.state+'"')}})},L}(z);Re.exports=N},5677:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(){var N=z.call(this)||this;return Object.defineProperties(N,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),N}return V(H,z),H.prototype.addTrack=function(N,k,L){var U=this._createLocalTrackPublicationSignaling(N,k,L);return this._trackSendersToPublications.set(N,U),this._publicationsToTrackSenders.set(U,N),z.prototype.addTrack.call(this,U),this},H.prototype.getPublication=function(N){return this._trackSendersToPublications.get(N)||null},H.prototype.getSender=function(N){return this._publicationsToTrackSenders.get(N)||null},H.prototype.removeTrack=function(N){var k=this._trackSendersToPublications.get(N);return k?(this._trackSendersToPublications.delete(N),this._publicationsToTrackSenders.delete(k),z.prototype.removeTrack.call(this,k)&&k.stop(),k):null},H}($(9285));Re.exports=se},3157:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),se=function(H){function N(k,L,U){var ee=this;return k=k.clone(),(ee=H.call(this,L,k.kind,"data"===k.kind||k.track.enabled,U)||this).setTrackTransceiver(k),Object.defineProperties(ee,{_updatedPriority:{value:U,writable:!0},id:{enumerable:!0,value:k.id}}),ee}return V(N,H),Object.defineProperty(N.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),N.prototype.enable=function(k){return this.trackTransceiver.track.enabled=k="boolean"!=typeof k||k,H.prototype.enable.call(this,k)},N.prototype.publishFailed=function(k){return function z(H,N){return null===H._sid&&!H._error&&(H._error=N,!0)}(this,k)&&this.emit("updated"),this},N.prototype.setPriority=function(k){return this._updatedPriority!==k&&(this._updatedPriority=k,this.emit("updated")),this},N.prototype.setSid=function(k){return this._error?this:H.prototype.setSid.call(this,k)},N.prototype.stop=function(){this.trackTransceiver.stop()},N}($(8194));Re.exports=se},9285:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(8675),se=$(669),z={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},H=function(N){function k(){var L=N.call(this,"connecting",z)||this;return Object.defineProperties(L,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),L}return V(k,N),Object.defineProperty(k.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),k.prototype.addTrack=function(L){return this.tracks.set(L.id||L.sid,L),this.emit("trackAdded",L),this},k.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},k.prototype.removeTrack=function(L){var U=this.tracks.get(L.id||L.sid);return this.tracks.delete(L.id||L.sid),U&&this.emit("trackRemoved",L),U||null},k.prototype.setNetworkQualityLevel=function(L,U){this._networkQualityLevel!==L&&(this._networkQualityLevel=L,this._networkQualityStats=U&&(U.audio||U.video)?new se(U):null,this.emit("networkQualityLevelChanged"))},k.prototype.connect=function(L,U){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=L),this._identity||(this._identity=U),this.preempt("connected"),!0)},k.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},k}(Y);Re.exports=H},9987:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(){var N=z.call(this)||this;return Object.defineProperties(N,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),N}return V(H,z),H.prototype.disable=function(){return this.enable(!1)},H.prototype.enable=function(N){return this.isEnabled!==(N="boolean"!=typeof N||N)&&(this._isEnabled=N,this.emit("updated")),this},H}($(9069).EventEmitter);Re.exports=se},2184:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this)||this;return L.connect(N,k),L}return V(H,z),H}($(9285));Re.exports=se},8956:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U,ee,ae){var de=z.call(this,k,L,U,ee)||this;return Object.defineProperties(de,{_isSwitchedOff:{value:ae,writable:!0}}),de.setSid(N),de}return V(H,z),Object.defineProperty(H.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),H.prototype.subscribeFailed=function(N){return this.error||(this._error=N,this.emit("updated")),this},H.prototype.setPriority=function(N){return this._priority!==N&&(this._priority=N,this.emit("updated")),this},H.prototype.setSwitchedOff=function(N){return this._isSwitchedOff!==N&&(this._isSwitchedOff=N,this.emit("updated")),this},H}($(8194));Re.exports=se},8343:function(Re,Pe,$){"use strict";var q,V=this&&this.__extends||(q=function(ce,Ee){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,fe){Oe.__proto__=fe}||function(Oe,fe){for(var we in fe)Object.prototype.hasOwnProperty.call(fe,we)&&(Oe[we]=fe[we])})(ce,Ee)},function(ce,Ee){if("function"!=typeof Ee&&null!==Ee)throw new TypeError("Class extends value "+String(Ee)+" is not a constructor or null");function Oe(){this.constructor=ce}q(ce,Ee),ce.prototype=null===Ee?Object.create(Ee):(Oe.prototype=Ee.prototype,new Oe)}),Y=$(9987),se=$(8675),z=$(6543),H=$(9739).buildLogLevels,N=$(8701).DEFAULT_LOG_LEVEL,k=$(1458),L=$(8380),U=L.MediaConnectionError,ee=L.MediaDTLSTransportFailedError,ae=L.SignalingConnectionDisconnectedError,de=0,he={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},te=function(q){function ce(Ee,Oe,fe,we){var Se=this;we=Object.assign({logLevel:N,RecordingSignaling:Y,Timeout:z},we);var ge=H(we.logLevel);Se=q.call(this,"connected",he)||this;var ue=we.RecordingSignaling,pe=new we.Timeout(function(){Se._disconnect(Se._reconnectingError)},we.sessionTimeout,!1);return Object.defineProperties(Se,{_instanceId:{value:de++},_log:{value:we.log?we.log.createLog("default",Se):new k("default",Se,ge,we.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:we},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:pe},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:Ee},name:{enumerable:!0,value:fe},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new ue},sid:{enumerable:!0,value:Oe}}),Se.on("connectionStateChanged",function(){"failed"===Se.connectionState&&!["disconnected","failed"].includes(Se.iceConnectionState)&&Se._disconnect(new ee)}),Se.on("iceConnectionStateChanged",function(){return J(Se)}),Se.on("signalingConnectionStateChanged",function(){return J(Se)}),setTimeout(function(){return J(Se)}),Se}return V(ce,q),ce.prototype._disconnect=function(Ee){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Ee]),!0)},ce.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},ce.prototype.connectParticipant=function(Ee){var Oe=this;return"disconnected"!==Ee.state&&!this.participants.has(Ee.sid)&&(this.participants.set(Ee.sid,Ee),Ee.on("stateChanged",function fe(we){"disconnected"===we&&(Ee.removeListener("stateChanged",fe),Oe.participants.delete(Ee.sid),Oe.emit("participantDisconnected",Ee))}),this.emit("participantConnected",Ee),!0)},ce.prototype.disconnect=function(){return this._disconnect()},ce.prototype.setDominantSpeaker=function(Ee){this.dominantSpeakerSid=Ee,this.emit("dominantSpeakerChanged")},ce}(se);function J(q){var ce;"disconnected"!==q.state&&"disconnected"!==q.signalingConnectionState?("reconnecting"===q.signalingConnectionState?ce=q.signalingConnectionState:"failed"===q.iceConnectionState?(q._mediaConnectionIsReconnecting=!0,ce="reconnecting"):"new"===q.iceConnectionState||"checking"===q.iceConnectionState?ce=q._mediaConnectionIsReconnecting?"reconnecting":"connected":(q._mediaConnectionIsReconnecting=!1,q._reconnectingError=null,q._sessionTimeout.clear(),ce="connected"),ce!==q.state&&("reconnecting"===ce?(q._reconnectingError="reconnecting"===q.signalingConnectionState?new ae:new U,q._sessionTimeout.start(),q.preempt(ce,null,[q._reconnectingError])):q.preempt(ce))):q._sessionTimeout.clear()}Re.exports=te},8194:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L,U){var ee=z.call(this)||this,ae=null;return Object.defineProperties(ee,{_error:{value:null,writable:!0},_isEnabled:{value:L,writable:!0},_priority:{value:U,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return ae},set:function(de){null===ae&&(ae=de)}},kind:{enumerable:!0,value:k},name:{enumerable:!0,value:N}}),ee}return V(H,z),Object.defineProperty(H.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),H.prototype.disable=function(){return this.enable(!1)},H.prototype.enable=function(N){return this.isEnabled!==(N="boolean"!=typeof N||N)&&(this._isEnabled=N,this.emit("updated")),this},H.prototype.setTrackTransceiver=function(N){return this.trackTransceiver!==(N=N||null)&&(this._trackTransceiver=N,this.emit("updated")),this},H.prototype.setSid=function(N){return null===this.sid&&(this._sid=N,this.emit("updated")),this},H}($(9069).EventEmitter);Re.exports=se},7697:(Re,Pe,$)=>{"use strict";var V=$(8126),Y=$(6603),se=$(2112),z=$(4892),H=$(8380),N=H.SignalingConnectionDisconnectedError,k=H.SignalingIncomingMessageInvalidError,L=$(9739),U=L.flatMap,ee=L.createRoomConnectEventPayload;Re.exports=function ae(de,he,te,J,q,ce){ce=Object.assign({PeerConnectionManager:Y,RoomV2:se,Transport:z},ce);var Ee=q.video[0]&&!0===q.video[0].adaptiveSimulcast,fe=ce.RoomV2,we=ce.Transport,Se=ce.iceServers,ge=ce.log,ue=new(0,ce.PeerConnectionManager)(J,q,ce),pe=U(te.tracks,function(Qe){return[Qe.trackTransceiver]});ue.setTrackSenders(pe);var je,Ie=new Error("Canceled"),Le=new V(function(Qe,$e,Xe){var Wt=ce.bandwidthProfile,Fe=ce.eventObserver,et=ce.name,xr=Object.assign({adaptiveSimulcast:Ee,automaticSubscription:ce.automaticSubscription,dominantSpeaker:ce.dominantSpeaker,environment:ce.environment,eventObserver:Fe,loggerName:ce.loggerName,logLevel:ce.logLevel,networkMonitor:ce.networkMonitor,networkQuality:ce.networkQuality,iceServers:Se,onIced:function(Cr){return Xe()?($e(Ie),Promise.reject(Ie)):(ge.debug("Got ICE servers:",Cr),ce.iceServers=Cr,ue.setConfiguration(ce),ue.createAndOffer().then(function(){if(Xe())throw $e(Ie),Ie;ge.debug("createAndOffer() succeeded."),ue.dequeue("description")}).catch(function(Sr){throw ge.error("createAndOffer() failed:",Sr),$e(Sr),Sr}))},realm:ce.realm,renderHints:!!Wt&&("disabled"!==ce.clientTrackSwitchOffControl||"disabled"!==ce.contentPreferencesMode),sdpSemantics:ce.sdpSemantics,trackPriority:!!Wt,trackSwitchOff:!!Wt},Wt?{bandwidthProfile:Wt}:{});je=new we(et,de,te,ue,he,xr);var wr=ee(ce);Fe.emit("event",wr),je.once("connected",function(Cr){ge.debug("Transport connected:",Cr),Xe()?$e(Ie):Cr.participant?(te.setSignalingRegion(Cr.options.signaling_region),Qe(new fe(te,Cr,je,ue,ce))):$e(new k)}),je.once("stateChanged",function(Cr,Sr){"disconnected"===Cr?(je=null,$e(Sr||new N)):ge.debug("Transport state changed:",Cr)})},function(){je&&(je.disconnect(),je=null)});return Le.catch(function(){je&&(je.disconnect(),je=null),ue.close()}),Le}},2314:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,"active_speaker",k)||this;return Object.defineProperties(L,{_loudestParticipantSid:{value:null,writable:!0}}),L.on("ready",function(U){U.on("message",function(ee){"active_speaker"===ee.type&&L._setLoudestParticipantSid(ee.participant)})}),L}return V(H,z),Object.defineProperty(H.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),H.prototype._setLoudestParticipantSid=function(N){this.loudestParticipantSid!==N&&(this._loudestParticipantSid=N,this.emit("updated"))},H}($(4071));Re.exports=se},380:(Re,Pe,$)=>{"use strict";var V=$(3826),Y=function(){function se(){Object.defineProperties(this,{_filter:{value:new V({getKey:function(H){return H.ufrag},isLessThanOrEqualTo:function(H,N){return H.revision<=N.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return se.prototype.setUfrag=function(z){this._ufrag=z;var H=this._filter.toMap().get(z);return H?H.candidates:[]},se.prototype.update=function(z){z.candidates=z.candidates||[];var H=this._filter.toMap().get(z.ufrag),N=H?H.candidates:[];return this._filter.update(z)&&this._ufrag===z.ufrag?z.candidates.slice(N.length):[]},se}();Re.exports=Y},2282:(Re,Pe,$)=>{"use strict";var V=$(8701),Y=V.ICE_ACTIVITY_CHECK_PERIOD_MS,se=V.ICE_INACTIVITY_THRESHOLD_MS,z=function(){function H(N,k){k=Object.assign({activityCheckPeriodMs:Y,inactivityThresholdMs:se},k),Object.defineProperties(this,{_activityCheckPeriodMs:{value:k.activityCheckPeriodMs},_inactivityThresholdMs:{value:k.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:N},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return H.prototype._getActivePairStat=function(N){return Array.from(N.values()).find(function(U){return"candidate-pair"===U.type&&U.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},H.prototype._getIceConnectionStats=function(){var N=this;return this._peerConnection.getStats().then(function(k){return N._getActivePairStat(k)}).catch(function(){return null})},H.prototype._scheduleInactivityCallback=function(N){var k=this;N&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===k._peerConnection.iceConnectionState&&N()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!N&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},H.prototype.start=function(N){var k=this;this.stop(),this._timer=setInterval(function(){k._getIceConnectionStats().then(function(L){!L||((!k._lastActivity||k._lastActivity.bytesReceived!==L.bytesReceived)&&(k._lastActivity=L,k._scheduleInactivityCallback(null)),L.timestamp-k._lastActivity.timestamp>=k._inactivityThresholdMs&&("disconnected"===k._peerConnection.iceConnectionState?N():null===k._onIceConnectionStateChanged&&k._scheduleInactivityCallback(N)))})},this._activityCheckPeriodMs)},H.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},H}();Re.exports=z},448:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(7697),se=$(523),H=function(N){function k(L,U){var ee;return U=Object.assign({createCancelableRoomSignalingPromise:Y},U),ee=N.call(this)||this,Object.defineProperties(ee,{_createCancelableRoomSignalingPromise:{value:U.createCancelableRoomSignalingPromise},_options:{value:U},_wsServer:{value:L}}),ee}return V(k,N),k.prototype._connect=function(L,U,ee,ae,de){return de=Object.assign({},this._options,de),this._createCancelableRoomSignalingPromise.bind(null,U,this._wsServer,L,ee,ae,de)},k.prototype.createLocalParticipantSignaling=function(L,U){return new se(L,U)},k}($(8043));Re.exports=H},523:function(Re,Pe,$){"use strict";var ee,V=this&&this.__extends||(ee=function(ae,de){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,te){he.__proto__=te}||function(he,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(he[J]=te[J])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}ee(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),Y=$(5677),se=$(5771),z=$(8701).DEFAULT_LOG_LEVEL,H=$(1458),N=$(9739),k=N.buildLogLevels,L=N.isDeepEqual,U=function(ee){function ae(de,he,te){var J;te=Object.assign({logLevel:z,LocalTrackPublicationV2:se},te),J=ee.call(this)||this;var q=k(te.logLevel);return Object.defineProperties(J,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:de},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:te.LocalTrackPublicationV2},_log:{value:te.log?te.log.createLog("default",J):new H("default",J,q,te.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:he},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),J}return V(ae,ee),ae.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},ae.prototype.setSignalingRegion=function(de){this._signalingRegion||(this._signalingRegion=de)},ae.prototype.setBandwidthProfile=function(de){L(this._bandwidthProfile,de)||(this._bandwidthProfile=JSON.parse(JSON.stringify(de)),this._bandwidthProfileRevision++,this.didUpdate())},ae.prototype.getParameters=function(){return this._encodingParameters},ae.prototype.setParameters=function(de){return this._encodingParameters.update(de),this},ae.prototype.update=function(de){return this._publishedRevision>=de.revision||(this._publishedRevision=de.revision,de.tracks.forEach(function(he){var te=this.tracks.get(he.id);te&&te.update(he)},this)),this},ae.prototype._createLocalTrackPublicationSignaling=function(de,he,te){return new this._LocalTrackPublicationV2(de,he,te)},ae.prototype.addTrack=function(de,he,te){var J=this;ee.prototype.addTrack.call(this,de,he,te);var q=this.getPublication(de),ce=q.isEnabled,Ee=q.updatedPriority,Oe=function(){(ce!==q.isEnabled||Ee!==q.updatedPriority)&&(J.didUpdate(),ce=q.isEnabled,Ee=q.updatedPriority)};return q.on("updated",Oe),this._removeListener(q),this._removeListeners.set(q,function(){return q.removeListener("updated",Oe)}),this.didUpdate(),this},ae.prototype._removeListener=function(de){var he=this._removeListeners.get(de);he&&he()},ae.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(de){return de.getState()})}},ae.prototype.didUpdate=function(){this._revision++,this.emit("updated")},ae.prototype.removeTrack=function(de){var he=ee.prototype.removeTrack.call(this,de);return he&&(de.removeClone(he.trackTransceiver),this._removeListener(he),this.didUpdate()),he},ae.prototype.setNetworkQualityConfiguration=function(de){this.networkQualityConfiguration.update(de)},ae.prototype.setPublisherHint=function(de,he){var te=Array.from(this.tracks.values()).find(function(J){return J.sid===de});return te?te.trackTransceiver.setPublisherHint(he):(this._log.warn("track:"+de+" not found"),Promise.resolve("UNKNOWN_TRACK"))},ae}(Y);Re.exports=U},5771:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(3157),se=$(8380).createTwilioError,z=function(H){function N(k,L,U){return H.call(this,k,L,U)||this}return V(N,H),N.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},N.prototype.update=function(k){switch(k.state){case"ready":this.setSid(k.sid);break;case"failed":var L=k.error;this.publishFailed(se(L.code,L.message))}return this},N}(Y);Re.exports=z},4071:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(9069),se=0,z=function(H){function N(k,L,U){var ee=H.call(this)||this;return Object.defineProperties(ee,{_instanceId:{value:se++},channel:{value:L},_log:{value:U.log.createLog("default",ee)},_getReceiver:{value:k},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),ee}return V(N,H),Object.defineProperty(N.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),N.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},N.prototype.setup=function(k){var L=this;this._teardown(),this._log.info("setting up msp transport for id:",k);var U=this._getReceiver(k).then(function(ee){if("data"!==ee.kind&&L._log.error("Expected a DataTrackReceiver"),L._receiverPromise===U){try{L._transport=ee.toDataTransport(),L.emit("ready",L._transport)}catch(ae){L._log.error("Failed to toDataTransport: "+ae.message)}ee.once("close",function(){return L._teardown()})}});this._receiverPromise=U},N.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},N}(Y);Re.exports=z},9056:function(Re,Pe,$){"use strict";var k,V=this&&this.__extends||(k=function(L,U){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,ae){ee.__proto__=ae}||function(ee,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(ee[de]=ae[de])})(L,U)},function(L,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ee(){this.constructor=L}k(L,U),L.prototype=null===U?Object.create(U):(ee.prototype=U.prototype,new ee)}),Y=this&&this.__read||function(k,L){var U="function"==typeof Symbol&&k[Symbol.iterator];if(!U)return k;var ae,he,ee=U.call(k),de=[];try{for(;(void 0===L||L-- >0)&&!(ae=ee.next()).done;)de.push(ae.value)}catch(te){he={error:te}}finally{try{ae&&!ae.done&&(U=ee.return)&&U.call(ee)}finally{if(he)throw he.error}}return de},se=$(9069),z=$(8753),H=function(k){function L(U,ee){var ae=k.call(this)||this;return Object.defineProperties(ae,{_factories:{value:new WeakMap},_manager:{value:U},_signaling:{value:ee}}),ee.on("updated",function(){return ae.emit("updated")}),ae}return V(L,k),Object.defineProperty(L.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),L.prototype.start=function(){var U=this;this.stop();var ee=setTimeout(function(){U._timeout===ee&&function N(k){var ae=(k._manager._peerConnections?Array.from(k._manager._peerConnections.values()):[]).map(function(de){return de._peerConnection}).filter(function(de){return"closed"!==de.signalingState}).map(function(de){if(k._factories.has(de))return k._factories.get(de);var he=new z(de);return k._factories.set(de,he),he}).map(function(de){return de.next().catch(function(){return null})});return Promise.all(ae).then(function(de){return de.filter(function(he){return he}).map(function(he){return he.summarize()})})}(U).then(function(ae){if(U._timeout===ee){if(ae.length){var de=Y(ae,1);U._signaling.put(de[0])}U.start()}})},200);this._timeout=ee},L.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},L}(se);Re.exports=H},5775:function(Re,Pe,$){"use strict";var L,V=this&&this.__extends||(L=function(U,ee){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,de){ae.__proto__=de}||function(ae,de){for(var he in de)Object.prototype.hasOwnProperty.call(de,he)&&(ae[he]=de[he])})(U,ee)},function(U,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function ae(){this.constructor=U}L(U,ee),U.prototype=null===ee?Object.create(ee):(ae.prototype=ee.prototype,new ae)}),Y=$(4071),se=$(6412),z=$(6543),N=function(L){function U(ee,ae,de){var he=L.call(this,ee,"network_quality",de)||this;return Object.defineProperties(he,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new se},_resendTimer:{value:new z(function(){he._resendTimer.setDelay(1.5*he._resendTimer.delay),he._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:ae.local,remoteReportLevel:ae.remote}}}}),he.on("ready",function(te){te.on("message",function(J){"network_quality"===(he._log.debug("Incoming: ",J),J.type)&&he._handleNetworkQualityMessage(J)})}),he._sendNetworkQualityInputs(),he}return V(U,L),Object.defineProperty(U.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),U.prototype._handleNetworkQualityMessage=function(ee){var ae=this,de=!1,he=null,te=ee?ee.local:null;"number"==typeof te?(he=te,this._levels=null):"object"==typeof te&&te&&(this._levels=te,he="number"==typeof te.level?te.level:Math.min(te.audio.send,te.audio.recv,te.video.send,te.video.recv)),null!==he&&this.level!==he&&(this._level=he,de=!0),this._remoteLevels=ee&&ee.remotes?ee.remotes.reduce(function(J,q){return(ae._remoteLevels.get(q.sid)||{}).level!==q.level&&(de=!0),J.set(q.sid,q)},new Map):this._remoteLevels,de&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return ae._sendNetworkQualityInputs()},1e3)},U.prototype._sendNetworkQualityInputs=function(){var ee=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(ae){ee._transport&&ee._transport.publish(function k(L,U){return Object.assign({type:"network_quality"},L,U)}(ae,ee._networkQualityReportLevels))}).finally(function(){ee._resendTimer.start()})},U.prototype.put=function(ee){this._networkQualityInputs.put(ee)},U}(Y);Re.exports=N},1058:function(Re,Pe,$){"use strict";var jn,V=this&&this.__extends||(jn=function(pn,Je){return(jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,gt){pt.__proto__=gt}||function(pt,gt){for(var an in gt)Object.prototype.hasOwnProperty.call(gt,an)&&(pt[an]=gt[an])})(pn,Je)},function(pn,Je){if("function"!=typeof Je&&null!==Je)throw new TypeError("Class extends value "+String(Je)+" is not a constructor or null");function pt(){this.constructor=pn}jn(pn,Je),pn.prototype=null===Je?Object.create(Je):(pt.prototype=Je.prototype,new pt)}),Y=this&&this.__read||function(jn,pn){var Je="function"==typeof Symbol&&jn[Symbol.iterator];if(!Je)return jn;var gt,gn,pt=Je.call(jn),an=[];try{for(;(void 0===pn||pn-- >0)&&!(gt=pt.next()).done;)an.push(gt.value)}catch(di){gn={error:di}}finally{try{gt&&!gt.done&&(Je=pt.return)&&Je.call(pt)}finally{if(gn)throw gn.error}}return an},se=this&&this.__spreadArray||function(jn,pn){for(var Je=0,pt=pn.length,gt=jn.length;Je<pt;Je++,gt++)jn[gt]=pn[Je];return jn},z=$(2606),H=$(1647),N=H.RTCIceCandidate,k=H.RTCPeerConnection,L=H.RTCSessionDescription,U=H.getStats,ee=$(7627),ae=$(8701),de=ae.DEFAULT_ICE_GATHERING_TIMEOUT_MS,he=ae.DEFAULT_LOG_LEVEL,te=ae.DEFAULT_SESSION_TIMEOUT_SEC,J=ae.iceRestartBackoffConfig,q=$(3898),ce=q.addOrRewriteNewTrackIds,Ee=q.addOrRewriteTrackIds,Oe=q.createCodecMapForMediaSection,fe=q.disableRtx,we=q.enableDtxForOpus,Se=q.filterLocalCodecs,ge=q.getMediaSections,ue=q.removeSSRCAttributes,pe=q.revertSimulcast,Ie=q.setCodecPreferences,je=q.setSimulcast,Le=$(6543),Qe=$(8380),$e=Qe.MediaClientLocalDescFailedError,Xe=Qe.MediaClientRemoteDescFailedError,Me=$(9739),Qt=Me.buildLogLevels,Wt=Me.getPlatform,St=Me.isChromeScreenShareTrack,Ke=Me.oncePerTick,Fe=Me.defer,We=$(380),De=$(2282),et=$(2498),Ut=$(3501),Zt=$(8675),Mt=$(1458),tn=$(1057),Jn=$(3073),qt=ee.guessBrowser(),Mr=Wt(),xr=/android/.test(Mr),wr="chrome"===qt,Cr="firefox"===qt,Sr="safari"===qt,Bi=0,rr={open:["closed","updating"],updating:["closed","open"],closed:[]},Qi=function(jn){function pn(Je,pt,gt,an){var gn=jn.call(this,"open",rr)||this,di=ze(an=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:St,iceServers:[],logLevel:he,offerOptions:{},revertSimulcast:pe,sessionTimeout:1e3*te,setCodecPreferences:Ie,setSimulcast:je,Backoff:z,IceConnectionMonitor:De,RTCIceCandidate:N,RTCPeerConnection:k,RTCSessionDescription:L,Timeout:Le},an)),Oo=Qt(an.logLevel),Es=an.RTCPeerConnection;!0===an.enableDscp&&(an.chromeSpecificConstraints=an.chromeSpecificConstraints||{},an.chromeSpecificConstraints.optional=an.chromeSpecificConstraints.optional||[],an.chromeSpecificConstraints.optional.push({googDscp:!0}));var js=an.log?an.log.createLog("webrtc",gn):new Mt("webrtc",gn,Oo,an.loggerName),Ao=new Es(di,an.chromeSpecificConstraints);an.dummyAudioMediaStreamTrack&&Ao.addTrack(an.dummyAudioMediaStreamTrack),Object.defineProperties(gn,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:an.enableDscp},_encodingParameters:{value:pt},_isChromeScreenShareTrack:{value:an.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new an.Timeout(function(){return gn._handleIceGatheringTimeout()},de,!1)},_iceRestartBackoff:{value:new an.Backoff(J)},_instanceId:{value:++Bi},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:js},_eventObserver:{value:an.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new an.IceConnectionMonitor(Ao)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:an.offerOptions},_onEncodingParametersChanged:{value:Ke(function(){gn._needsAnswer||xs(gn)})},_peerConnection:{value:Ao},_preferredAudioCodecs:{value:gt.audio},_preferredVideoCodecs:{value:gt.video},_shouldApplyDtx:{value:gt.audio.every(function(Tr){return"opus"!==Tr.codec})||gt.audio.some(function(Tr){return"opus"===Tr.codec&&Tr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new an.Timeout(function(){js.debug("ICE reconnect timed out"),gn.close()},an.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new We},_setCodecPreferences:{value:Cr&&xr&&gt.video[0]&&"h264"!==gt.video[0].codec.toLowerCase()?function(Tr){return Tr}:an.setCodecPreferences},_setSimulcast:{value:an.setSimulcast},_revertSimulcast:{value:an.revertSimulcast},_RTCIceCandidate:{value:an.RTCIceCandidate},_RTCPeerConnection:{value:an.RTCPeerConnection},_RTCSessionDescription:{value:an.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:Je}}),pt.on("changed",gn._onEncodingParametersChanged),Ao.addEventListener("connectionstatechange",gn._handleConnectionStateChange.bind(gn)),Ao.addEventListener("datachannel",gn._handleDataChannelEvent.bind(gn)),Ao.addEventListener("icecandidate",gn._handleIceCandidateEvent.bind(gn)),Ao.addEventListener("iceconnectionstatechange",gn._handleIceConnectionStateChange.bind(gn)),Ao.addEventListener("icegatheringstatechange",gn._handleIceGatheringStateChange.bind(gn)),Ao.addEventListener("signalingstatechange",gn._handleSignalingStateChange.bind(gn)),Ao.addEventListener("track",gn._handleTrackEvent.bind(gn));var lo=gn;return gn.on("stateChanged",function Tr(Dn){"closed"===Dn&&(lo.removeListener("stateChanged",Tr),lo._dataChannels.forEach(function(ru,Lu){lo.removeDataTrackSender(Lu)}))}),gn}return V(pn,jn),pn.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},pn.prototype.setEffectiveAdaptiveSimulcast=function(Je){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",Je),this._preferredVideoCodecs.forEach(function(pt){"adaptiveSimulcast"in pt&&(pt.adaptiveSimulcast=Je)})},Object.defineProperty(pn.prototype,"_shouldApplySimulcast",{get:function(){return!(!wr&&!Sr)&&this._preferredVideoCodecs.some(function(pt){return"vp8"===pt.codec.toLowerCase()&&pt.simulcast&&!1!==pt.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(pn.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(pn.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(pn.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&ge(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(pn.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var Je=this._preferredVideoCodecs.find(function(pt){return"adaptiveSimulcast"in pt});return Je&&!0===Je.adaptiveSimulcast},enumerable:!1,configurable:!0}),pn.prototype._maybeUpdateEncodings=function(Je,pt,gt){if(void 0===gt&&(gt=!1),"video"!==Je.kind||"ended"===Je.readyState)return!1;var an=ee.guessBrowser();return!!("safari"===an||"chrome"===an&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(Je,pt,gt),!0)},pn.prototype._updateEncodings=function(Je,pt,gt){if(this._isChromeScreenShareTrack(Je)){var an=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];pt.forEach(function(Tr,Dn){var ru=an[Dn];ru?(Tr.scaleResolutionDownBy=ru.scaleResolutionDownBy,gt&&delete Tr.active):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}else{var gn=Je.getSettings(),js=gn.width*gn.height,Ao=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(Tr){return js>=Tr.pixels}),lo=Math.min(pt.length,Ao.maxActiveLayers);pt.forEach(function(Tr,Dn){Dn<lo?(Tr.scaleResolutionDownBy=1<<lo-Dn-1,gt&&(Tr.active=!0)):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",pt.map(function(Tr,Dn){return"["+Dn+": "+Tr.active+", "+(Tr.scaleResolutionDownBy||0)+"]"}).join(", "))},pn.prototype._addIceCandidate=function(Je){var pt=this;return Promise.resolve().then(function(){return Je=new pt._RTCIceCandidate(Je),pt._peerConnection.addIceCandidate(Je)}).catch(function(gt){pt._log.warn("Failed to add RTCIceCandidate "+(Je?'"'+Je.candidate+'"':"null")+": "+gt.message)})},pn.prototype._addIceCandidates=function(Je){return Promise.all(Je.map(this._addIceCandidate,this)).then(function(){})},pn.prototype._addOrUpdateTransceiver=function(Je){var pt=this,gt=function fn(jn,pn){var Je={audio:jn._preferredAudioCodecs.map(function(gn){return gn.codec.toLowerCase()}),video:jn._preferredVideoCodecs.map(function(gn){return gn.codec.toLowerCase()})}[pn],pt=jn._recycledTransceivers[pn],gt=Je.find(function(gn){return jn._localCodecs.has(gn)});if(!gt)return pt.shift();var an=pt.find(function(gn){var di=jn._remoteCodecMaps.get(gn.mid);return di&&di.has(gt)});return an&&pt.splice(pt.indexOf(an),1),an}(this,Je.kind);if(gt&&gt.sender){var an=gt.sender.track?gt.sender.track.id:null;return an&&this._log.warn("Reusing transceiver: "+gt.mid+"] "+an+" => "+Je.id),this._replaceTrackPromises.set(gt,gt.sender.replaceTrack(Je).then(function(){gt.direction="sendrecv"},function(){}).finally(function(){pt._replaceTrackPromises.delete(gt)})),gt}return this._peerConnection.addTransceiver(Je)},pn.prototype._checkIceBox=function(Je){var pt=sn(Je);if(!pt)return Promise.resolve();var gt=this._remoteCandidates.setUfrag(pt);return this._addIceCandidates(gt)},pn.prototype._answer=function(Je){var pt=this;return Promise.resolve().then(function(){return pt._negotiationRole||(pt._negotiationRole="answerer"),pt._setRemoteDescription(Je)}).catch(function(){throw new Xe}).then(function(){return pt._peerConnection.createAnswer()}).then(function(gt){gt=Cr?new pt._RTCSessionDescription({sdp:fe(gt.sdp),type:gt.type}):Jn(gt);var an=ue(gt.sdp,["mslabel","label"]);if(pt._shouldApplySimulcast){var gn=an;an=pt._setSimulcast(gn,pt._trackIdsToAttributes),an=pt._revertSimulcast(an,gn,Je.sdp)}return an=an.replace(/42e015/g,"42e01f"),pt._setLocalDescription({type:gt.type,sdp:an})}).then(function(){return pt._checkIceBox(Je)}).then(function(){return pt._queuedDescription&&pt._updateDescription(pt._queuedDescription)}).then(function(){return pt._queuedDescription=null,pt._maybeReoffer(pt._peerConnection.localDescription)}).catch(function(gt){var an=gt instanceof Xe?gt:new $e;throw pt._publishMediaWarning({message:"Failed to _answer",code:an.code,error:gt}),an})},pn.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},pn.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},pn.prototype._handleDataChannelEvent=function(Je){var pt=this,gt=Je.channel,an=new et(gt);this._dataTrackReceivers.add(an),gt.addEventListener("close",function(){pt._dataTrackReceivers.delete(an)}),this.emit("trackAdded",an)},pn.prototype._handleGlare=function(Je){var pt=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return pt._trackIdsToAttributes=new Map(pt._appliedTrackIdsToAttributes),pt._setLocalDescription({type:"rollback"})}).then(function(){return pt._needsAnswer=!1,pt._answer(Je)}).then(function(gt){return gt?Promise.resolve():pt._offer()})},pn.prototype._publishMediaWarning=function(Je){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:Je.message,code:Je.code,context:JSON.stringify({error:Je.error.message,sdp:Je.sdp})}})},pn.prototype._handleIceCandidateEvent=function(Je){Je.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(Je.candidate));var pt={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};Je.candidate||(pt.ice.complete=!0),this._isIceLite&&Je.candidate||(pt.ice.revision=this._localCandidatesRevision++,this.emit("candidates",pt))},pn.prototype._handleIceConnectionStateChange=function(){var Je=this,pt=this._peerConnection.iceConnectionState,gt=["connected","completed"].includes(pt),an=this._log;an.debug('ICE connection state is "'+pt+'"'),gt&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==pt||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&gt&&an.debug("ICE reconnected"):(an.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===pt?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){Je._iceConnectionMonitor.stop(),!Je._shouldRestartIce&&!Je._isRestartingIce&&(an.warn("ICE Connection Monitor detected inactivity"),Je._isIceConnectionInactive=!0,Je._initiateIceRestartBackoff(),Je.emit("iceConnectionStateChanged"),Je.emit("connectionStateChanged"))})):["disconnected","completed"].includes(pt)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=pt,this.emit("iceConnectionStateChanged")},pn.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},pn.prototype._handleIceGatheringStateChange=function(){var Je=this._peerConnection.iceGatheringState,pt=this._log;pt.debug('ICE gathering state is "'+Je+'"');var gt=this._iceGatheringTimeout;"gathering"===Je&&!this._didGenerateLocalCandidates&&!gt.isSet&&(pt.debug("Starting ICE gathering timeout: "+gt.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},pn.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},pn.prototype._handleTrackEvent=function(Je){var pt=this,gt=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new tn,this._trackMatcher.update(gt);var an=Je.track,gn=this._trackMatcher.match(Je)||an.id,di=new Ut(gn,an);this._mediaTrackReceivers.forEach(function(Oo){Oo.track.id===di.track.id&&pt._mediaTrackReceivers.delete(Oo)}),this._mediaTrackReceivers.add(di),an.addEventListener("ended",function(){return pt._mediaTrackReceivers.delete(di)}),this.emit("trackAdded",di)},pn.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var Je=this._log;Je.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var pt=this._iceReconnectTimeout;pt.isSet||(Je.debug("Starting ICE reconnect timeout: "+pt.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(gn){Je.error("offer failed in _initiateIceRestart with: "+gn.message)})}},pn.prototype._initiateIceRestartBackoff=function(){var Je=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return Je._initiateIceRestart()}))},pn.prototype._maybeReoffer=function(Je){var pt=this._shouldOffer;if(Je&&Je.sdp){var gt=this._peerConnection.getSenders().filter(function(Es){return Es.track});pt=["audio","video"].reduce(function(Es,js){var Ao=ge(Je.sdp,js,"(sendrecv|sendonly)"),lo=gt.filter(xe.bind(null,js));return Es||Ao.length<lo.length},pt);var an=this._dataChannels.size>0,gn=ge(Je.sdp,"application").length>0;pt=pt||an&&!gn}return(pt?this._offer():Promise.resolve()).then(function(){return pt})},pn.prototype._offer=function(){var Je=this,pt=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,pt.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return Je._peerConnection.createOffer(pt)}).catch(function(gt){var an=new $e;throw Je._publishMediaWarning({message:"Failed to create offer",code:an.code,error:gt}),an}).then(function(gt){gt=Cr?new Je._RTCSessionDescription({sdp:fe(gt.sdp),type:gt.type}):Jn(gt);var an=ue(gt.sdp,["mslabel","label"]);an=Je._peerConnection.remoteDescription?Se(an,Je._peerConnection.remoteDescription.sdp):an;var gn=Je._setCodecPreferences(an,Je._preferredAudioCodecs,Je._preferredVideoCodecs);return Je._shouldOffer=!1,Je._negotiationRole||(Je._negotiationRole="offerer"),Je._shouldApplySimulcast&&(Je._localDescriptionWithoutSimulcast={type:"offer",sdp:gn},gn=Je._setSimulcast(gn,Je._trackIdsToAttributes)),Je._setLocalDescription({type:"offer",sdp:gn})})},pn.prototype._getMediaTrackSenderId=function(Je){var pt=Array.from(this._rtpSenders.keys()).find(function(gt){return gt.track.id===Je});return pt?pt.id:Je},pn.prototype._addOrRewriteLocalTrackIds=function(Je){var pt=this,an=this._peerConnection.getTransceivers().filter(function(lo){var Tr=lo.sender;return!lo.stopped&&Tr&&Tr.track}),gn=an.filter(function(lo){return lo.mid}),di=new Map(gn.map(function(lo){return[lo.mid,pt._getMediaTrackSenderId(lo.sender.track.id)]})),Oo=Ee(Je.sdp,di),Es=an.filter(function(lo){return!lo.mid}),js=new Map(["audio","video"].map(function(lo){return[lo,Es.filter(function(Tr){return Tr.sender.track.kind===lo}).map(function(Tr){return pt._getMediaTrackSenderId(Tr.sender.track.id)})]})),Ao=ce(Oo,di,js);return new this._RTCSessionDescription({sdp:Ao,type:Je.type})},pn.prototype._rollbackAndApplyOffer=function(Je){var pt=this;return this._setLocalDescription({type:"rollback"}).then(function(){return pt._setLocalDescription(Je)})},pn.prototype._setLocalDescription=function(Je){var pt=this;return"rollback"!==Je.type&&this._shouldApplyDtx&&(Je=new this._RTCSessionDescription({sdp:we(Je.sdp),type:Je.type})),this._peerConnection.setLocalDescription(Je).catch(function(gt){pt._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+Je.type+'" failed with the error "'+gt.message+'".',gt);var an=new $e,gn={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+Je.type+'" failed',code:an.code,error:gt};throw Je.sdp&&(pt._log.warn("The SDP was "+Je.sdp),gn.sdp=Je.sdp),pt._publishMediaWarning(gn),an}).then(function(){"rollback"!==Je.type&&(pt._localDescription=pt._addOrRewriteLocalTrackIds(Je),pt._shouldApplyDtx&&(pt._localDescription=new pt._RTCSessionDescription({sdp:we(pt._localDescription.sdp,[]),type:pt._localDescription.type})),pt._localCandidates=[],"offer"===Je.type?pt._descriptionRevision++:"answer"===Je.type&&(pt._lastStableDescriptionRevision=pt._descriptionRevision,To(pt)),pt._localUfrag=sn(Je),pt.emit("description",pt.getState()))})},pn.prototype._setRemoteDescription=function(Je){var pt=this;return Je.sdp&&(Je.sdp=this._setCodecPreferences(Je.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),Je.sdp=this._shouldApplyDtx?we(Je.sdp):we(Je.sdp,[]),Cr&&(Je.sdp=function ut(jn){return jn.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(Je.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(Je.sdp))),Je=new this._RTCSessionDescription(Je),Promise.resolve().then(function(){if("answer"===Je.type&&pt._localDescriptionWithoutSimulcast){var gt=pt._preferredVideoCodecs.find(function(di){return"adaptiveSimulcast"in di}),gn=pt._revertSimulcast(pt._localDescription.sdp,pt._localDescriptionWithoutSimulcast.sdp,Je.sdp,!!gt&&!1===gt.adaptiveSimulcast);if(pt._localDescriptionWithoutSimulcast=null,gn!==pt._localDescription.sdp)return pt._rollbackAndApplyOffer({type:pt._localDescription.type,sdp:gn})}}).then(function(){return pt._peerConnection.setRemoteDescription(Je)}).then(function(){"answer"===Je.type&&(pt._isRestartingIce&&(pt._log.debug("An ICE restart was in-progress and is now completed"),pt._isRestartingIce=!1),To(pt))},function(gt){throw pt._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+Je.type+'" failed with the error "'+gt.message+'".',gt),Je.sdp&&pt._log.warn("The SDP was "+Je.sdp),gt})},pn.prototype._updateDescription=function(Je){var pt=this;switch(Je.type){case"answer":case"pranswer":if(Je.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=Je.revision;break;case"close":return this._close();case"create-offer":return Je.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=Je,Promise.resolve()):(this._descriptionRevision=Je.revision,this._offer());case"offer":return Je.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=Je,Promise.resolve()):(this._descriptionRevision=Je.revision,this._handleGlare(Je)):(this._descriptionRevision=Je.revision,this._answer(Je).then(function(){}))}var gt=Je.revision;return Promise.resolve().then(function(){return pt._setRemoteDescription(Je)}).catch(function(an){var gn=new Xe;throw pt._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+Je.type+'" failed',code:gn.code,error:an,sdp:Je.sdp}),gn}).then(function(){return pt._lastStableDescriptionRevision=gt,pt._needsAnswer=!1,pt._checkIceBox(Je)}).then(function(){return pt._queuedDescription&&pt._updateDescription(pt._queuedDescription)}).then(function(){return pt._queuedDescription=null,pt._maybeReoffer(pt._peerConnection.localDescription).then(function(){})})},pn.prototype._updateIce=function(Je){var pt=this._remoteCandidates.update(Je);return this._addIceCandidates(pt)},pn.prototype.addDataTrackSender=function(Je){if(!this._dataChannels.has(Je))try{var pt={ordered:Je.ordered};null!==Je.maxPacketLifeTime&&(pt.maxPacketLifeTime=Je.maxPacketLifeTime),null!==Je.maxRetransmits&&(pt.maxRetransmits=Je.maxRetransmits);var gt=this._peerConnection.createDataChannel(Je.id,pt);Je.addDataChannel(gt),this._dataChannels.set(Je,gt)}catch(an){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+Je.id+'": '+an.message)}},pn.prototype._handleQueuedPublisherHints=function(){var Je=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(pt,gt){var an=pt.deferred,gn=pt.encodings;Je._mediaTrackSenderToPublisherHints.delete(gt),Je._setPublisherHint(gt,gn).then(function(di){return an.resolve(di)}).catch(function(di){return an.reject(di)})})},pn.prototype._setPublisherHint=function(Je,pt){var gt=this;if(Cr)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(Je)&&(this._mediaTrackSenderToPublisherHints.get(Je).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(Je));var gn=this._rtpSenders.get(Je);if(!gn)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var di=Fe();return this._mediaTrackSenderToPublisherHints.set(Je,{deferred:di,encodings:pt}),di.promise}var Oo=gn.getParameters();return null!==pt&&pt.forEach(function(Es){var js=Es.enabled,Ao=Es.layer_index;Oo.encodings.length>Ao?(gt._log.debug("layer:"+Ao+", active:"+Oo.encodings[Ao].active+" => "+js),Oo.encodings[Ao].active=js):gt._log.warn("invalid layer:"+Ao+", active:"+js)}),this._maybeUpdateEncodings(gn.track,Oo.encodings,null===pt),gn.setParameters(Oo).then(function(){return"OK"}).catch(function(Es){return gt._log.error("Failed to apply publisher hints:",Es),"COULD_NOT_APPLY_HINT"})},pn.prototype.addMediaTrackSender=function(Je){var pt=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(Je)){var an=this._addOrUpdateTransceiver(Je.track).sender;Je.addSender(an,function(gn){return pt._setPublisherHint(Je,gn)}),this._rtpNewSenders.add(an),this._rtpSenders.set(Je,an)}},pn.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},pn.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},pn.prototype.getState=function(){if(!this._localDescription)return null;var pt={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(pt.sdp=this._localDescription.sdp),{description:pt,id:this.id}},pn.prototype.offer=function(){var Je=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(pt){return Je.transition("updating",pt),(Je._needsAnswer||Je._isRestartingIce?Promise.resolve():Je._offer()).then(function(){Je.tryTransition("open",pt)},function(an){throw Je.tryTransition("open",pt),an})})},pn.prototype.removeDataTrackSender=function(Je){var pt=this._dataChannels.get(Je);pt&&(Je.removeDataChannel(pt),this._dataChannels.delete(Je),pt.close())},pn.prototype.removeMediaTrackSender=function(Je){var pt=this._rtpSenders.get(Je);pt&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(pt),Je.removeSender(pt),this._mediaTrackSenderToPublisherHints.has(Je)&&(this._mediaTrackSenderToPublisherHints.get(Je).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(Je)),this._rtpNewSenders.delete(pt),this._rtpSenders.delete(Je))},pn.prototype.setConfiguration=function(Je){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(ze(Je))},pn.prototype.setIceReconnectTimeout=function(Je){return this._iceReconnectTimeout.setDelay(Je),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},pn.prototype.update=function(Je){var pt=this;return this.bracket("updating",function(gt){if("closed"===pt.state)return Promise.resolve();pt.transition("updating",gt);var an=[];return Je.ice&&an.push(pt._updateIce(Je.ice)),Je.description&&an.push(pt._updateDescription(Je.description)),Promise.all(an).then(function(){pt.tryTransition("open",gt)},function(gn){throw pt.tryTransition("open",gt),gn})})},pn.prototype.getStats=function(){var Je=this;return U(this._peerConnection).then(function(pt){return function Ht(jn,pn){return Object.assign(pn,{remoteAudioTrackStats:pn.remoteAudioTrackStats.map(function(Je){return Ct(jn,Je)}),remoteVideoTrackStats:pn.remoteVideoTrackStats.map(function(Je){return Ct(jn,Je)}),localAudioTrackStats:pn.localAudioTrackStats.map(function(Je){return fa(jn,Je)}),localVideoTrackStats:pn.localVideoTrackStats.map(function(Je){return fa(jn,Je)})})}(Je,pt)})},pn}(Zt);function fa(jn,pn){var Je=jn._getMediaTrackSenderId(pn.trackId);return Object.assign(pn,{trackId:Je})}function Ct(jn,pn){var Je=se([],Y(jn._mediaTrackReceivers)).find(function(gt){return gt.track.id===pn.trackId});return Object.assign(pn,{trackId:Je?Je.id:null})}function sn(jn){if(jn.sdp){var pn=jn.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(pn)return pn[1]}return null}function ze(jn){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},jn)}function xe(jn,pn){var Je=pn.track;return Je&&Je.kind===jn&&"ended"!==Je.readyState}function To(jn){(function Js(jn){jn._recycledTransceivers.audio=[],jn._recycledTransceivers.video=[],jn._peerConnection.getTransceivers().forEach(function(pn){(function Fn(jn,pn){return!jn.stopped&&!pn._replaceTrackPromises.has(jn)&&["inactive","recvonly"].includes(jn.direction)})(pn,jn)&&jn._recycledTransceivers[pn.receiver.track.kind].push(pn)})})(jn),function ro(jn){var pn=jn._peerConnection.localDescription;!pn||!pn.sdp||ge(pn.sdp).forEach(function(Je){Oe(Je).forEach(function(gt,an){return jn._localCodecs.add(an)})})}(jn),function Go(jn){var pn=jn._peerConnection.remoteDescription;!pn||!pn.sdp||ge(pn.sdp).forEach(function(Je){var pt=Je.match(/^a=mid:(.+)$/m);if(pt&&pt[1]){var gt=pt[1],an=Oe(Je);jn._remoteCodecMaps.set(gt,an)}})}(jn),xs(jn).then(function(){jn._handleQueuedPublisherHints()})}function xs(jn){var pn=jn._encodingParameters,gt=new Map([["audio",pn.maxAudioBitrate],["video",pn.maxVideoBitrate]]),an=[];return jn._peerConnection.getSenders().filter(function(gn){return gn.track}).forEach(function(gn){var di=gt.get(gn.track.kind),Oo=gn.getParameters();null===di||0===di?function Ro(jn){Array.isArray(jn.encodings)&&jn.encodings.forEach(function(pn){return delete pn.maxBitrate})}(Oo):jn._isChromeScreenShareTrack(gn.track)?jn._log.warn("Not setting maxBitrate for "+gn.track.kind+" Track "+gn.track.id+" because it appears to be screen share track: "+gn.track.label):function fl(jn,pn){Cr?jn.encodings=[{maxBitrate:pn}]:jn.encodings.forEach(function(Je){Je.maxBitrate=pn})}(Oo,di),!Cr&&jn._enableDscp&&Oo.encodings.length>0&&(Oo.encodings[0].networkPriority="high");var Es=jn._rtpNewSenders.has(gn);jn._maybeUpdateEncodings(gn.track,Oo.encodings,Es),jn._rtpNewSenders.delete(gn);var js=gn.setParameters(Oo).catch(function(Ao){jn._log.warn("Error while setting encodings parameters for "+gn.track.kind+" Track "+gn.track.id+": "+(Ao.message||Ao.name))});an.push(js)}),Promise.all(an)}Re.exports=Qi},6603:function(Re,Pe,$){"use strict";var ge,V=this&&this.__extends||(ge=function(ue,pe){return(ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ie,je){Ie.__proto__=je}||function(Ie,je){for(var Le in je)Object.prototype.hasOwnProperty.call(je,Le)&&(Ie[Le]=je[Le])})(ue,pe)},function(ue,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function Ie(){this.constructor=ue}ge(ue,pe),ue.prototype=null===pe?Object.create(pe):(Ie.prototype=pe.prototype,new Ie)}),Y=this&&this.__read||function(ge,ue){var pe="function"==typeof Symbol&&ge[Symbol.iterator];if(!pe)return ge;var je,Qe,Ie=pe.call(ge),Le=[];try{for(;(void 0===ue||ue-- >0)&&!(je=Ie.next()).done;)Le.push(je.value)}catch($e){Qe={error:$e}}finally{try{je&&!je.done&&(pe=Ie.return)&&pe.call(Ie)}finally{if(Qe)throw Qe.error}}return Le},se=this&&this.__spreadArray||function(ge,ue){for(var pe=0,Ie=ue.length,je=ge.length;pe<Ie;pe++,je++)ge[je]=ue[pe];return ge},z=$(7627).guessBrowser,H=$(1058),N=$(808),k=$(7772),L=$(9739),U=$(8380).MediaConnectionError,ee="firefox"===z(),ae=function(ge){function ue(pe,Ie,je){var Le=ge.call(this)||this,Qe=(je=Object.assign({audioContextFactory:ee?$(7708):null,PeerConnectionV2:H},je)).audioContextFactory?je.audioContextFactory.getOrCreate(Le):null,$e=Qe?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(Le,{_audioContextFactory:{value:je.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:L.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:Qe?new N(de(Qe)):null},_encodingParameters:{value:pe},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:$e},_peerConnections:{value:new Map},_preferredCodecs:{value:Ie},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:je.PeerConnectionV2}}),Le}return V(ue,ge),ue.prototype.setEffectiveAdaptiveSimulcast=function(pe){this._peerConnections.forEach(function(Ie){return Ie.setEffectiveAdaptiveSimulcast(pe)}),this._preferredCodecs.video.forEach(function(Ie){"adaptiveSimulcast"in Ie&&(Ie.adaptiveSimulcast=pe)})},Object.defineProperty(ue.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),ue.prototype._closeAbsentPeerConnections=function(pe){var Ie=new Set(pe.map(function(je){return je.id}));return this._peerConnections.forEach(function(je){Ie.has(je.id)||je._close()}),this},ue.prototype._getConfiguration=function(){return this._configurationDeferred.promise},ue.prototype._getOrCreate=function(pe,Ie){var je=this,Le=this,Qe=this._peerConnections.get(pe);if(!Qe){var $e=this._PeerConnectionV2,Xe=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},Ie);try{Qe=new $e(pe,this._encodingParameters,this._preferredCodecs,Xe)}catch{throw new U}this._peerConnections.set(Qe.id,Qe),Qe.on("candidates",this.queue.bind(this,"candidates")),Qe.on("description",this.queue.bind(this,"description")),Qe.on("trackAdded",this.queue.bind(this,"trackAdded")),Qe.on("stateChanged",function Me(Qt){"closed"===Qt&&(Qe.removeListener("stateChanged",Me),Le._dataTrackSenders.forEach(function(Wt){return Qe.removeDataTrackSender(Wt)}),Le._mediaTrackSenders.forEach(function(Wt){return Qe.removeMediaTrackSender(Wt)}),Le._peerConnections.delete(Qe.id),Le._closedPeerConnectionIds.add(Qe.id),Se(Le),we(Le))}),Qe.on("connectionStateChanged",function(){return Se(je)}),Qe.on("iceConnectionStateChanged",function(){return we(je)}),this._dataTrackSenders.forEach(Qe.addDataTrackSender,Qe),this._mediaTrackSenders.forEach(Qe.addMediaTrackSender,Qe),we(this)}return Qe},ue.prototype.close=function(){return this._peerConnections.forEach(function(pe){pe.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),we(this),this},ue.prototype.createAndOffer=function(){var pe=this;return this._getConfiguration().then(function(Ie){var je;do{je=L.makeUUID()}while(pe._peerConnections.has(je));return pe._getOrCreate(je,Ie)}).then(function(Ie){return Ie.offer()}).then(function(){return pe})},ue.prototype.getTrackReceivers=function(){return L.flatMap(this._peerConnections,function(pe){return pe.getTrackReceivers()})},ue.prototype.getStates=function(){var pe=[];return this._peerConnections.forEach(function(Ie){var je=Ie.getState();je&&pe.push(je)}),pe},ue.prototype.setConfiguration=function(pe){return this._configuration&&(this._configurationDeferred=L.defer(),this._peerConnections.forEach(function(Ie){Ie.setConfiguration(pe)})),this._configuration=pe,this._configurationDeferred.resolve(pe),this},ue.prototype.setIceReconnectTimeout=function(pe){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(Ie){Ie.setIceReconnectTimeout(pe)}),this._sessionTimeout=pe),this},ue.prototype.setTrackSenders=function(pe){var Ie=new Set(pe.filter(function(Qe){return"data"===Qe.kind})),je=new Set(pe.filter(function(Qe){return Qe&&("audio"===Qe.kind||"video"===Qe.kind)})),Le=function J(ge,ue,pe){return{data:te(ge,ue),media:q(ge,pe)}}(this,Ie,je);return this._dataTrackSenders=Ie,this._mediaTrackSenders=je,function he(ge,ue){(ue.data.add.size||ue.data.remove.size||ue.media.add.size||ue.media.remove.size)&&ge._peerConnections.forEach(function(pe){ue.data.remove.forEach(pe.removeDataTrackSender,pe),ue.media.remove.forEach(pe.removeMediaTrackSender,pe),ue.data.add.forEach(pe.addDataTrackSender,pe),ue.media.add.forEach(pe.addMediaTrackSender,pe),(ue.media.add.size||ue.media.remove.size||ue.data.add.size&&!pe.isApplicationSectionNegotiated)&&pe.offer()})}(this,Le),this},ue.prototype.update=function(pe,Ie){var je=this;return void 0===Ie&&(Ie=!1),Ie&&this._closeAbsentPeerConnections(pe),this._getConfiguration().then(function(Le){return Promise.all(pe.map(function(Qe){return je._closedPeerConnectionIds.has(Qe.id)?null:je._getOrCreate(Qe.id,Le).update(Qe)}))}).then(function(){return je})},ue.prototype.getStats=function(){var pe=Array.from(this._peerConnections.values());return Promise.all(pe.map(function(Ie){return Ie.getStats().then(function(je){return[Ie.id,je]})})).then(function(Ie){return new Map(Ie)})},ue}(k);function de(ge){return ge.createMediaStreamDestination().stream.getAudioTracks()[0]}function te(ge,ue){return{add:L.difference(ue,ge._dataTrackSenders),remove:L.difference(ge._dataTrackSenders,ue)}}function q(ge,ue){return{add:L.difference(ue,ge._mediaTrackSenders),remove:L.difference(ge._mediaTrackSenders,ue)}}var Ee,ce={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function fe(ge){return ge.length?(Ee=Ee||function Oe(){return Object.keys(ce).reduce(function(ge,ue){var pe;return Object.assign(ge,((pe={})[ce[ue]]=ue,pe))},{})}(),ge.reduce(function(ue,pe){return Ee[Math.max(ce[ue],ce[pe])]})):"new"}function we(ge){ge._lastIceConnectionState=ge.iceConnectionState,ge._iceConnectionState=fe(se([],Y(ge._peerConnections.values())).map(function(ue){return ue.iceConnectionState})),ge.iceConnectionState!==ge._lastIceConnectionState&&ge.emit("iceConnectionStateChanged")}function Se(ge){ge._lastConnectionState=ge.connectionState,ge._connectionState=fe(se([],Y(ge._peerConnections.values())).map(function(ue){return ue.connectionState})),ge.connectionState!==ge._lastConnectionState&&ge.emit("connectionStateChanged")}Re.exports=ae},8069:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(4071),se=1,z=function(H){function N(k,L){var U=H.call(this,k,"publisher_hints",L)||this;return U.on("ready",function(ee){U._log.debug("publisher_hints transport ready:",ee),ee.on("message",function(ae){"publisher_hints"===(U._log.debug("Incoming: ",ae),ae.type)?ae.publisher&&ae.publisher.hints&&ae.publisher.id&&U._processPublisherHints(ae.publisher.hints,ae.publisher.id):U._log.warn("Unknown message type: ",ae.type)})}),U}return V(N,H),N.prototype.sendTrackReplaced=function(k){if(this._transport){var U={type:"client_reset",track:k.trackSid,id:se++};this._log.debug("Outgoing: ",U),this._transport.publish(U)}},N.prototype.sendHintResponse=function(k){if(this._transport){var ee={type:"publisher_hints",id:k.id,hints:k.hints};this._log.debug("Outgoing: ",ee),this._transport.publish(ee)}},N.prototype._processPublisherHints=function(k,L){try{this.emit("updated",k,L)}catch(U){this._log.error("error processing hints:",U)}},N}(Y);Re.exports=z},8930:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(){var N=z.call(this)||this;return Object.defineProperties(N,{_revision:{value:1,writable:!0}}),N}return V(H,z),H.prototype.update=function(N){return N.revision<this._revision?this:(this._revision=N.revision,this.enable(N.is_recording))},H}($(9987));Re.exports=se},1118:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(2184),se=$(467),z=function(H){function N(k,L,U,ee,ae,de){var he=H.call(this,k.sid,k.identity)||this;return de=Object.assign({RemoteTrackPublicationV2:se},de),Object.defineProperties(he,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:de.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:L},updateSubscriberTrackPriority:{value:function(te,J){return U(te,J)}},updateTrackRenderHint:{value:function(te,J){return ee(te,J)}},clearTrackHint:{value:function(te){return ae(te)}},revision:{enumerable:!0,get:function(){return this._revision}}}),he.update(k)}return V(N,H),N.prototype._getOrCreateTrack=function(k){var L=this._RemoteTrackPublicationV2,U=this.tracks.get(k.sid);return U||(U=new L(k,this._getInitialTrackSwitchOffState(k.sid)),this.addTrack(U)),U},N.prototype.update=function(k){var L=this;if(null!==this.revision&&k.revision<=this.revision)return this;this._revision=k.revision;var U=new Set;switch(k.tracks.forEach(function(ee){var ae=L._getOrCreateTrack(ee);ae.update(ee),U.add(ae)}),this.tracks.forEach(function(ee){U.has(ee)||L.removeTrack(ee)}),k.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},N}(Y);Re.exports=z},467:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){return z.call(this,N.sid,N.name,N.kind,N.enabled,N.priority,k)||this}return V(H,z),H.prototype.update=function(N){return this.enable(N.enabled),this.setPriority(N.priority),this},H}($(8956));Re.exports=se},7818:function(Re,Pe,$){"use strict";var L,V=this&&this.__extends||(L=function(U,ee){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,de){ae.__proto__=de}||function(ae,de){for(var he in de)Object.prototype.hasOwnProperty.call(de,he)&&(ae[he]=de[he])})(U,ee)},function(U,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function ae(){this.constructor=U}L(U,ee),U.prototype=null===ee?Object.create(ee):(ae.prototype=ee.prototype,new ae)}),Y=$(4071),se=$(6543),z=$(9739).isDeepEqual,N=1,k=function(L){function U(ee,ae){var de=L.call(this,ee,"render_hints",ae)||this;return Object.defineProperties(de,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new se(function(){de._sendAllHints(),de._responseTimer.setDelay(2*de._responseTimer.delay)},2e3,!1)}}),de.on("ready",function(he){he.on("message",function(te){"render_hints"===(de._log.debug("Incoming: ",te),te.type)?de._processHintResults(te&&te.subscriber&&te.subscriber.hints||[]):de._log.warn("Unknown message type: ",te.type)}),de._sendAllHints()}),de}return V(U,L),U.prototype._sendAllHints=function(){var ee=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(ae){var de=ee._trackSidsToRenderHints.get(ae);de.renderDimensions&&(de.isDimensionDirty=!0),"enabled"in de&&(de.isEnabledDirty=!0)}),this._sendHints()},U.prototype._processHintResults=function(ee){var ae=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),ee.forEach(function(de){"OK"!==de.result&&ae._log.debug("Server error processing hint:",de)}),this._sendHints()},U.prototype._sendHints=function(){var ee=this;if(this._transport&&!this._responseTimer.isSet){var ae=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(he){var te=ee._trackSidsToRenderHints.get(he);if(te.isEnabledDirty||te.isDimensionDirty){var J={track:he};te.isEnabledDirty&&(J.enabled=te.enabled,te.isEnabledDirty=!1),te.isDimensionDirty&&(J.render_dimensions=te.renderDimensions,te.isDimensionDirty=!1),ae.push(J)}}),ae.length>0){var de={type:"render_hints",subscriber:{id:N++,hints:ae}};this._log.debug("Outgoing: ",de),this._transport.publish(de),this._responseTimer.start()}}},U.prototype.setTrackHint=function(ee,ae){var de=this._trackSidsToRenderHints.get(ee)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in ae&&de.enabled!==ae.enabled&&(de.enabled=!!ae.enabled,de.isEnabledDirty=!0),ae.renderDimensions&&!z(ae.renderDimensions,de.renderDimensions)&&(de.renderDimensions=ae.renderDimensions,de.isDimensionDirty=!0),this._trackSidsToRenderHints.set(ee,de),this._sendHints()},U.prototype.clearTrackHint=function(ee){this._trackSidsToRenderHints.delete(ee)},U}(Y);Re.exports=k},2112:function(Re,Pe,$){"use strict";var Fe,V=this&&this.__extends||(Fe=function(We,De){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,Ut){et.__proto__=Ut}||function(et,Ut){for(var Zt in Ut)Object.prototype.hasOwnProperty.call(Ut,Zt)&&(et[Zt]=Ut[Zt])})(We,De)},function(We,De){if("function"!=typeof De&&null!==De)throw new TypeError("Class extends value "+String(De)+" is not a constructor or null");function et(){this.constructor=We}Fe(We,De),We.prototype=null===De?Object.create(De):(et.prototype=De.prototype,new et)}),Y=this&&this.__read||function(Fe,We){var De="function"==typeof Symbol&&Fe[Symbol.iterator];if(!De)return Fe;var Ut,Mt,et=De.call(Fe),Zt=[];try{for(;(void 0===We||We-- >0)&&!(Ut=et.next()).done;)Zt.push(Ut.value)}catch(tn){Mt={error:tn}}finally{try{Ut&&!Ut.done&&(De=et.return)&&De.call(et)}finally{if(Mt)throw Mt.error}}return Zt},se=$(2314),z=$(9056),H=$(5775),N=$(8930),k=$(8343),L=$(1118),U=$(7805),ee=$(8004),ae=$(5210),de=$(7818),he=$(8069),te=$(9739),J=te.constants.DEFAULT_SESSION_TIMEOUT_SEC,q=te.createBandwidthProfilePayload,ce=te.defer,Ee=te.difference,Oe=te.filterObject,fe=te.flatMap,we=te.oncePerTick,Se=$(8218),ge=$(8380).createTwilioError,pe=function(Fe){function We(De,et,Ut,Zt,Mt){var tn=this;et.options=Object.assign({session_timeout:J},et.options),Mt=Object.assign({DominantSpeakerSignaling:se,NetworkQualityMonitor:z,NetworkQualitySignaling:H,RecordingSignaling:N,RemoteParticipantV2:L,TrackPrioritySignaling:ee,TrackSwitchOffSignaling:ae,bandwidthProfile:null,sessionTimeout:1e3*et.options.session_timeout,statsPublishIntervalMs:1e4},Mt),De.setBandwidthProfile(Mt.bandwidthProfile),Zt.setIceReconnectTimeout(Mt.sessionTimeout);var Jn=function(Mr){return tn._getTrackReceiver(Mr)},qt=(tn=Fe.call(this,De,et.sid,et.name,Mt)||this)._log;return Object.defineProperties(tn,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:Mt.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:De.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:De.networkQualityConfiguration},_peerConnectionManager:{value:Zt},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:Mt.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new Mt.DominantSpeakerSignaling(Jn,{log:qt})},_networkQualitySignaling:{value:new Mt.NetworkQualitySignaling(Jn,De.networkQualityConfiguration,{log:qt})},_renderHintsSignaling:{value:new de(Jn,{log:qt})},_publisherHintsSignaling:{value:new he(Jn,{log:qt})},_trackPrioritySignaling:{value:new Mt.TrackPrioritySignaling(Jn,{log:qt})},_trackSwitchOffSignaling:{value:new Mt.TrackSwitchOffSignaling(Jn,{log:qt})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Ut},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:et.options.media_region||null}}),tn._initTrackSwitchOffSignaling(),tn._initDominantSpeakerSignaling(),tn._initNetworkQualityMonitorSignaling(),tn._initPublisherHintSignaling(),function Qe(Fe,We){var De=we(function(){Fe._publishNewLocalParticipantState()}),et=we(function(){var Ut=fe(We.tracks,function(Zt){return Zt.trackTransceiver});Fe._peerConnectionManager.setTrackSenders(Ut)});We.on("trackAdded",et),We.on("trackRemoved",et),We.on("updated",De),Fe.on("stateChanged",function Ut(Zt){"disconnected"===Zt&&(We.removeListener("trackAdded",et),We.removeListener("trackRemoved",et),We.removeListener("updated",De),Fe.removeListener("stateChanged",Ut),We.disconnect())}),Fe.on("signalingConnectionStateChanged",function(){var Ut=Fe.localParticipant,Mt=Ut.identity,tn=Ut.sid;switch(Fe.signalingConnectionState){case"connected":Ut.connect(tn,Mt);break;case"reconnecting":Ut.reconnecting()}})}(tn,De),function $e(Fe,We){We.on("description",function(et){Fe._publishPeerConnectionState(et)}),We.dequeue("description"),We.on("candidates",function(et){Fe._publishPeerConnectionState(et)}),We.dequeue("candidates"),We.on("trackAdded",Fe._addTrackReceiver.bind(Fe)),We.dequeue("trackAdded"),We.getTrackReceivers().forEach(Fe._addTrackReceiver,Fe),We.on("connectionStateChanged",function(){Fe.emit("connectionStateChanged")}),We.on("iceConnectionStateChanged",function(){Fe.emit("iceConnectionStateChanged"),"failed"===Fe.iceConnectionState&&(null!==Fe.localParticipant.networkQualityLevel&&Fe.localParticipant.setNetworkQualityLevel(0),Fe.participants.forEach(function(De){null!==De.networkQualityLevel&&De.setNetworkQualityLevel(0)}))})}(tn,Zt),function Xe(Fe,We){We.on("message",Fe._update.bind(Fe)),We.on("stateChanged",function De(et,Ut){"disconnected"===et&&("disconnected"!==Fe.state&&Fe._disconnect(Ut),We.removeListener("stateChanged",De)),Fe.emit("signalingConnectionStateChanged")})}(tn,Ut),function Me(Fe,We,De){var et=new Map,Ut=!1,Zt=setInterval(function(){Fe.getStats().then(function(Mt){Ut=!Ut,Mt.forEach(function(tn,Jn){var qt=new U(Jn,tn,!0);We.publishEvent("quality","stats-report","info",{audioTrackStats:qt.remoteAudioTrackStats.map(function(Cr,Sr){return St(Cr,tn.remoteAudioTrackStats[Sr],et)}),localAudioTrackStats:qt.localAudioTrackStats.map(function(Cr,Sr){return Wt(Cr,tn.localAudioTrackStats[Sr],et)}),localVideoTrackStats:qt.localVideoTrackStats.map(function(Cr,Sr){return Wt(Cr,tn.localVideoTrackStats[Sr],et)}),peerConnectionId:qt.peerConnectionId,videoTrackStats:qt.remoteVideoTrackStats.map(function(Cr,Sr){return St(Cr,tn.remoteVideoTrackStats[Sr],et)})});var Mr=fe(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Cr){return qt[Cr].map(function(Sr){return Sr.trackSid+"+"+Sr.ssrc})});if(Ee(Array.from(et.keys()),Mr).forEach(function(Cr){return et.delete(Cr)}),Ut){var wr=function Ke(Fe,We){return(Fe=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:We,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},Oe(Fe||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},Oe(Fe.localCandidate||{},null)),Fe.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},Oe(Fe.remoteCandidate||{},null)),Fe}(tn.activeIceCandidatePair,qt.peerConnectionId);We.publishEvent("quality","active-ice-candidate-pair","info",wr)}})},function(){})},De);Fe.on("stateChanged",function Mt(tn){"disconnected"===tn&&(clearInterval(Zt),Fe.removeListener("stateChanged",Mt))})}(tn,Ut,Mt.statsPublishIntervalMs),tn._update(et),tn._peerConnectionManager.setEffectiveAdaptiveSimulcast(tn._publisherHintsSignaling.isSetup),tn}return V(We,Fe),Object.defineProperty(We.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(We.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(We.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),We.prototype._deleteTrackReceiverDeferred=function(De){return this._trackReceiverDeferreds.delete(De)},We.prototype._getOrCreateTrackReceiverDeferred=function(De){var et=this._trackReceiverDeferreds.get(De)||ce(),Zt=this._peerConnectionManager.getTrackReceivers().find(function(Mt){return Mt.id===De&&"ended"!==Mt.readyState});return Zt?et.resolve(Zt):this._trackReceiverDeferreds.set(De,et),et},We.prototype._addTrackReceiver=function(De){return this._getOrCreateTrackReceiverDeferred(De.id).resolve(De),this},We.prototype._disconnect=function(De){var et=Fe.prototype._disconnect.call(this,De);return et&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Ut){Ut.publishFailed(De||new Error("LocalParticipant disconnected"))}),et},We.prototype._getTrackReceiver=function(De){var et=this;return this._getOrCreateTrackReceiverDeferred(De).promise.then(function(Ut){return et._deleteTrackReceiverDeferred(De),Ut})},We.prototype._getInitialTrackSwitchOffState=function(De){var et=this._pendingSwitchOffStates.get(De)||!1;return this._pendingSwitchOffStates.delete(De),et&&this._log.warn("["+De+"] was initially switched off! "),et},We.prototype._getTrackSidsToTrackSignalings=function(){var De=fe(this.participants,function(et){return Array.from(et.tracks)});return new Map(De)},We.prototype._getOrCreateRemoteParticipant=function(De){var et=this,Ut=this._RemoteParticipantV2,Zt=this.participants.get(De.sid),Mt=this;return Zt||((Zt=new Ut(De,function(tn){return et._getInitialTrackSwitchOffState(tn)},function(tn,Jn){return et._trackPrioritySignaling.sendTrackPriorityUpdate(tn,"subscribe",Jn)},function(tn,Jn){return et._renderHintsSignaling.setTrackHint(tn,Jn)},function(tn){return et._renderHintsSignaling.clearTrackHint(tn)})).on("stateChanged",function tn(Jn){"disconnected"===Jn&&(Zt.removeListener("stateChanged",tn),Mt.participants.delete(Zt.sid),Mt._disconnectedParticipantRevisions.set(Zt.sid,Zt.revision))}),this.connectParticipant(Zt)),Zt},We.prototype._getState=function(){return{participant:this.localParticipant.getState()}},We.prototype._maybeAddBandwidthProfile=function(De){var et=this.localParticipant,Ut=et.bandwidthProfile,Zt=et.bandwidthProfileRevision;return Ut&&this._lastBandwidthProfileRevision<Zt?(this._lastBandwidthProfileRevision=Zt,Object.assign({bandwidth_profile:q(Ut)},De)):De},We.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},We.prototype._publishPeerConnectionState=function(De){this._transport.publish(Object.assign({peer_connections:[De]},this._getState()))},We.prototype._update=function(De){var et=this;if(De.subscribed&&De.subscribed.revision>this._subscribedRevision){this._subscribedRevision=De.subscribed.revision,De.subscribed.tracks.forEach(function(Mt){Mt.id?(et._subscriptionFailures.delete(Mt.sid),et._subscribed.set(Mt.sid,Mt.id)):Mt.error&&!et._subscriptionFailures.has(Mt.sid)&&et._subscriptionFailures.set(Mt.sid,Mt.error)});var Ut=new Set(De.subscribed.tracks.filter(function(Mt){return!!Mt.id}).map(function(Mt){return Mt.sid}));this._subscribed.forEach(function(Mt,tn){Ut.has(tn)||et._subscribed.delete(tn)})}var Zt=new Set;return(De.participants||[]).forEach(function(Mt){if(Mt.sid!==et.localParticipant.sid){var tn=et._disconnectedParticipantRevisions.get(Mt.sid);if(!(tn&&Mt.revision<=tn)){tn&&et._disconnectedParticipantRevisions.delete(Mt.sid);var Jn=et._getOrCreateRemoteParticipant(Mt);Jn.update(Mt),Zt.add(Jn)}}}),"synced"===De.type&&this.participants.forEach(function(Mt){Zt.has(Mt)||Mt.disconnect()}),function Qt(Fe){var We=Fe._getTrackSidsToTrackSignalings();Fe._subscriptionFailures.forEach(function(De,et){var Ut=We.get(et);Ut&&(Fe._subscriptionFailures.delete(et),Ut.subscribeFailed(ge(De.code,De.message)))}),We.forEach(function(De){var et=Fe._subscribed.get(De.sid);(!et||De.isSubscribed&&De.trackTransceiver.id!==et)&&De.setTrackTransceiver(null),et&&Fe._getTrackReceiver(et).then(function(Ut){return De.setTrackTransceiver(Ut)})})}(this),De.peer_connections&&this._peerConnectionManager.update(De.peer_connections,"synced"===De.type),De.recording&&this.recording.update(De.recording),De.published&&De.published.revision>this._publishedRevision&&(this._publishedRevision=De.published.revision,De.published.tracks.forEach(function(Mt){Mt.sid&&et._published.set(Mt.id,Mt.sid)}),this.localParticipant.update(De.published)),De.participant&&this.localParticipant.connect(De.participant.sid,De.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(Mt){var tn=Mt.channel;!Mt.isSetup&&De.media_signaling&&De.media_signaling[tn]&&De.media_signaling[tn].transport&&"data-channel"===De.media_signaling[tn].transport.type&&Mt.setup(De.media_signaling[tn].transport.label)}),this},We.prototype._initPublisherHintSignaling=function(){var De=this;this._publisherHintsSignaling.on("updated",function(Ut,Zt){Promise.all(Ut.map(function(Mt){return De.localParticipant.setPublisherHint(Mt.track,Mt.encodings).then(function(tn){return{track:Mt.track,result:tn}})})).then(function(Mt){De._publisherHintsSignaling.sendHintResponse({id:Zt,hints:Mt})})});var et=function(Ut){"video"===Ut.kind&&Ut.trackTransceiver.on("replaced",function(){De._publisherHintsSignaling.sendTrackReplaced({trackSid:Ut.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Ut){return et(Ut)}),this.localParticipant.on("trackAdded",function(Ut){return et(Ut)})},We.prototype._initTrackSwitchOffSignaling=function(){var De=this;this._trackSwitchOffSignaling.on("updated",function(et,Ut){try{De._log.debug("received trackSwitch: ",{tracksOn:Ut,tracksOff:et});var Zt=new Map;Ut.forEach(function(Mt){return Zt.set(Mt,!0)}),et.forEach(function(Mt){Zt.get(Mt)&&De._log.warn(Mt+" is DUPLICATED in both tracksOff and tracksOn list"),Zt.set(Mt,!1)}),De.participants.forEach(function(Mt){Mt.tracks.forEach(function(tn){var Jn=Zt.get(tn.sid);typeof Jn<"u"&&(tn.setSwitchedOff(!Jn),Zt.delete(tn.sid))})}),Zt.forEach(function(Mt,tn){return De._pendingSwitchOffStates.set(tn,!Mt)})}catch(Mt){De._log.error("error processing track switch off:",Mt)}})},We.prototype._initDominantSpeakerSignaling=function(){var De=this;this._dominantSpeakerSignaling.on("updated",function(){return De.setDominantSpeaker(De._dominantSpeakerSignaling.loudestParticipantSid)})},We.prototype._initNetworkQualityMonitorSignaling=function(){var De=this;this._networkQualitySignaling.on("ready",function(){var et=new De._NetworkQualityMonitor(De._peerConnectionManager,De._networkQualitySignaling);De._networkQualityMonitor=et,et.on("updated",function(){"failed"!==De.iceConnectionState&&(De.localParticipant.setNetworkQualityLevel(et.level,et.levels),De.participants.forEach(function(Ut){var Zt=et.remoteLevels.get(Ut.sid);Zt&&Ut.setNetworkQualityLevel(Zt.level,Zt)}))}),et.start()}),this._networkQualitySignaling.on("teardown",function(){return De._teardownNetworkQualityMonitor()})},We.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},We.prototype.getStats=function(){var De=this;return this._peerConnectionManager.getStats().then(function(et){return new Map(Array.from(et).map(function(Ut){var Zt=Y(Ut,2),tn=Zt[1];return[Zt[0],Object.assign({},tn,{localAudioTrackStats:je(De,tn.localAudioTrackStats),localVideoTrackStats:je(De,tn.localVideoTrackStats),remoteAudioTrackStats:Le(De,tn.remoteAudioTrackStats),remoteVideoTrackStats:Le(De,tn.remoteVideoTrackStats)})]}))})},We}(k);function Ie(Fe,We){return We.reduce(function(De,et){var Ut=Fe.get(et.trackId);return Ut?[Object.assign({},et,{trackSid:Ut})].concat(De):De},[])}function je(Fe,We){return Ie(Fe._published,We)}function Le(Fe,We){return Ie(new Map(Array.from(Fe._subscribed.entries()).map(function(et){var Ut=Y(et,2);return[Ut[1],Ut[0]]})),We)}function Wt(Fe,We,De){var et=We.framesEncoded,Ut=We.packetsSent,Zt=We.totalEncodeTime,Mt=We.totalPacketSendDelay,tn=Object.assign({},Fe),Jn=Fe.trackSid+"+"+Fe.ssrc,qt=De.get(Jn)||new Map;if("number"==typeof Zt&&"number"==typeof et){var Mr=qt.get("avgEncodeDelay")||new Se;Mr.putSample(1e3*Zt,et),tn.avgEncodeDelay=Math.round(Mr.get()),qt.set("avgEncodeDelay",Mr)}if("number"==typeof Mt&&"number"==typeof Ut){var xr=qt.get("avgPacketSendDelay")||new Se;xr.putSample(1e3*Mt,Ut),tn.avgPacketSendDelay=Math.round(xr.get()),qt.set("avgPacketSendDelay",xr)}return De.set(Jn,qt),tn}function St(Fe,We,De){var et=We.estimatedPlayoutTimestamp,Ut=We.framesDecoded,Zt=We.jitterBufferDelay,Mt=We.jitterBufferEmittedCount,tn=We.totalDecodeTime,Jn=Object.assign({},Fe),qt=Fe.trackSid+"+"+Fe.ssrc,Mr=De.get(qt)||new Map;if("number"==typeof et&&(Jn.estimatedPlayoutTimestamp=et),"number"==typeof Ut&&"number"==typeof tn){var xr=Mr.get("avgDecodeDelay")||new Se;xr.putSample(1e3*tn,Ut),Jn.avgDecodeDelay=Math.round(xr.get()),Mr.set("avgDecodeDelay",xr)}if("number"==typeof Zt&&"number"==typeof Mt){var wr=Mr.get("avgJitterBufferDelay")||new Se;wr.putSample(1e3*Zt,Mt),Jn.avgJitterBufferDelay=Math.round(wr.get()),Mr.set("avgJitterBufferDelay",wr)}return De.set(qt,Mr),Jn}Re.exports=pe},8004:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,"track_priority",k)||this;return Object.defineProperties(L,{_enqueuedPriorityUpdates:{value:new Map}}),L.on("ready",function(U){Array.from(L._enqueuedPriorityUpdates.keys()).forEach(function(ee){U.publish({type:"track_priority",track:ee,subscribe:L._enqueuedPriorityUpdates.get(ee)})})}),L}return V(H,z),H.prototype.sendTrackPriorityUpdate=function(N,k,L){if("subscribe"!==k)throw new Error("only subscribe priorities are supported, found: "+k);this._enqueuedPriorityUpdates.set(N,L),this._transport&&this._transport.publish({type:"track_priority",track:N,subscribe:L})},H}($(4071));Re.exports=se},5210:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,"track_switch_off",k)||this;return L.on("ready",function(U){U.on("message",function(ee){"track_switch_off"===ee.type&&L._setTrackSwitchOffUpdates(ee.off||[],ee.on||[])})}),L}return V(H,z),H.prototype._setTrackSwitchOffUpdates=function(N,k){this.emit("updated",N,k)},H}($(4071));Re.exports=se},4892:function(Re,Pe,$){"use strict";var Qe,V=this&&this.__extends||(Qe=function($e,Xe){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Me,Qt){Me.__proto__=Qt}||function(Me,Qt){for(var Wt in Qt)Object.prototype.hasOwnProperty.call(Qt,Wt)&&(Me[Wt]=Qt[Wt])})($e,Xe)},function($e,Xe){if("function"!=typeof Xe&&null!==Xe)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function Me(){this.constructor=$e}Qe($e,Xe),$e.prototype=null===Xe?Object.create(Xe):(Me.prototype=Xe.prototype,new Me)}),Y=$(8675),se=$(5330),z=$(2606),H=$(8701).reconnectBackoffConfig,N=$(6543),k=$(8701),L=k.SDK_NAME,U=k.SDK_VERSION,ee=k.SDP_FORMAT,ae=$(9739),de=ae.createBandwidthProfilePayload,he=ae.createMediaSignalingPayload,te=ae.createSubscribePayload,J=ae.getUserAgent,q=ae.isNonArrayObject,ce=$(8380),Ee=ce.createTwilioError,Oe=ce.RoomCompletedError,fe=ce.SignalingConnectionError,we=ce.SignalingServerBusyError,ue={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},pe=function(Qe){function $e(Xe,Me,Qt,Wt,St,Ke){var Fe;return Ke=Object.assign({Backoff:z,TwilioConnection:se,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:J()},Ke),Fe=Qe.call(this,"connecting",ue)||this,Object.defineProperties(Fe,{_accessToken:{value:Me},_automaticSubscription:{value:Ke.automaticSubscription},_bandwidthProfile:{value:Ke.bandwidthProfile},_dominantSpeaker:{value:Ke.dominantSpeaker},_adaptiveSimulcast:{value:Ke.adaptiveSimulcast},_eventObserver:{value:Ke.eventObserver,writable:!1},_renderHints:{value:Ke.renderHints},_iceServersStatus:{value:Array.isArray(Ke.iceServers)?"overrode":"acquire"},_localParticipant:{value:Qt},_name:{value:Xe},_networkQuality:{value:q(Ke.networkQuality)||Ke.networkQuality},_options:{value:Ke},_peerConnectionManager:{value:Wt},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new Ke.Backoff(H)},_session:{value:null,writable:!0},_trackPriority:{value:Ke.trackPriority},_trackSwitchOff:{value:Ke.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:Ke.userAgent},_wsServer:{value:St}}),function Le(Qe){function $e(){if("disconnected"!==Qe.state){Qe._twilioConnection&&Qe._twilioConnection.removeListener("message",Me);var We=Qe._options,Ut=We.TwilioConnection,Zt=new Ut(Qe._wsServer,Object.assign({helloBody:"connecting"===Qe.state&&"acquire"===Qe._iceServersStatus?Qe._createIceMessage():Qe._createConnectOrSyncOrDisconnectMessage()},We));Zt.once("close",function(Mt){Mt===Ut.CloseReason.LOCAL?Xe():Xe(new Error(Mt))}),Zt.on("message",Me),Qe._twilioConnection=Zt}}function Xe(Fe){if("disconnected"!==Qe.state){if(!Fe)return void Qe.disconnect();var We=Qe._getReconnectTimer();if(!We){var De=Fe.message===se.CloseReason.BUSY?new we:new fe;return void Qe.disconnect(De)}"connected"===Qe.state&&Qe.preempt("syncing"),We.then($e)}}function Me(Fe){if("disconnected"!==Qe.state){if("error"===Fe.type)return void Qe.disconnect(Ee(Fe.code,Fe.message));switch(Qe.state){case"connected":switch(Fe.type){case"connected":case"synced":case"update":return void Qe.emit("message",Fe);case"disconnected":return void Qe.disconnect("completed"===Fe.status?new Oe:null);default:return}case"connecting":switch(Fe.type){case"iced":return void Qe._options.onIced(Fe.ice_servers).then(function(){Qe._sendConnectOrSyncOrDisconnectMessage()});case"connected":return Qe._setSession(Fe.session,Fe.options.session_timeout),Qe.emit("connected",Fe),void Qe.preempt("connected");case"synced":case"update":return void Qe._updatesReceived.push(Fe);case"disconnected":return void Qe.disconnect("completed"===Fe.status?new Oe:null);default:return}case"syncing":switch(Fe.type){case"connected":case"update":return void Qe._updatesReceived.push(Fe);case"synced":return Qe._clearReconnectTimer(),Qe.emit("message",Fe),void Qe.preempt("connected");case"disconnected":return void Qe.disconnect("completed"===Fe.status?new Oe:null);default:return}default:return}}}Qe.on("stateChanged",function Fe(We){switch(We){case"connected":var De=Qe._updatesToSend.splice(0);return De.length&&Qe.publish(function je(Qe){return Qe.reduce(function($e,Xe){return(!$e.participant&&Xe.participant||$e.participant&&Xe.participant&&Xe.participant.revision>$e.participant.revision)&&($e.participant=Xe.participant),!$e.peer_connections&&Xe.peer_connections?$e.peer_connections=Ie(Xe.peer_connections):$e.peer_connections&&Xe.peer_connections&&($e.peer_connections=Ie($e.peer_connections.concat(Xe.peer_connections))),$e},{})}(De)),void Qe._updatesReceived.splice(0).forEach(function(et){return Qe.emit("message",et)});case"disconnected":return Qe._twilioConnection.removeListener("message",Me),void Qe.removeListener("stateChanged",Fe);default:return}});var Qt=Qe._options;"overrode"===Qe._iceServersStatus?(0,Qt.onIced)(Qt.iceServers).then($e):$e()}(Fe),Fe}return V($e,Qe),$e.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Xe={connecting:"connect",syncing:"sync"}[this.state],Me={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Xe,version:2};return"connect"===Me.type?(Me.ice_servers=this._iceServersStatus,Me.publisher={name:L,sdk_version:U,user_agent:this._userAgent},this._bandwidthProfile&&(Me.bandwidth_profile=de(this._bandwidthProfile)),Me.media_signaling=he(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),Me.subscribe=te(this._automaticSubscription),Me.format=ee,Me.token=this._accessToken):"sync"===Me.type?(Me.session=this._session,Me.token=this._accessToken):"update"===Me.type&&(Me.session=this._session),Me},$e.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},$e.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Xe=this._createConnectOrSyncOrDisconnectMessage();Xe&&this._twilioConnection.sendMessage(Xe)},$e.prototype.disconnect=function(Xe){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Xe]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},$e.prototype.publish=function(Xe){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Xe)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Xe),!0;default:return!1}},$e.prototype.publishEvent=function(Xe,Me,Qt,Wt){this._eventObserver.emit("event",{group:Xe,name:Me,level:Qt,payload:Wt})},$e.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},$e.prototype._setSession=function(Xe,Me){this._session=Xe,this._sessionTimeoutMS=1e3*Me},$e.prototype._getReconnectTimer=function(){var Xe=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new N(function(){Xe._sessionTimer&&(Xe._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(Me){Xe._reconnectBackoff.backoff(Me)}))},$e.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},$e}(Y);function Ie(Qe){return Array.from(Qe.reduce(function($e,Xe){var Me=$e.get(Xe.id)||Xe;return(!Me.description&&Xe.description||Me.description&&Xe.description&&Xe.description.revision>Me.description.revision)&&(Me.description=Xe.description),(!Me.ice&&Xe.ice||Me.ice&&Xe.ice&&Xe.ice.revision>Me.ice.revision)&&(Me.ice=Xe.ice),$e.set(Me.id,Me),$e},new Map).values())}Re.exports=pe},8675:function(Re,Pe,$){"use strict";var he,V=this&&this.__extends||(he=function(te,J){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ce){q.__proto__=ce}||function(q,ce){for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&(q[Ee]=ce[Ee])})(te,J)},function(te,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function q(){this.constructor=te}he(te,J),te.prototype=null===J?Object.create(J):(q.prototype=J.prototype,new q)}),Y=this&&this.__read||function(he,te){var J="function"==typeof Symbol&&he[Symbol.iterator];if(!J)return he;var ce,Oe,q=J.call(he),Ee=[];try{for(;(void 0===te||te-- >0)&&!(ce=q.next()).done;)Ee.push(ce.value)}catch(fe){Oe={error:fe}}finally{try{ce&&!ce.done&&(J=q.return)&&J.call(q)}finally{if(Oe)throw Oe.error}}return Ee},se=this&&this.__spreadArray||function(he,te){for(var J=0,q=te.length,ce=he.length;J<q;J++,ce++)he[ce]=te[J];return he},z=$(9069).EventEmitter,H=$(9739),N=function(he){function te(J,q){var ce=he.call(this)||this,Ee=null,Oe=J;return q=function ae(he){var te=new Map;for(var J in he)te.set(J,new Set(he[J]));return te}(q),Object.defineProperties(ce,{_lock:{get:function(){return Ee},set:function(fe){Ee=fe}},_reachableStates:{value:U(q)},_state:{get:function(){return Oe},set:function(fe){Oe=fe}},_states:{value:q},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==Ee}},state:{enumerable:!0,get:function(){return Oe}}}),ce.on("stateChanged",function(fe){ce._whenDeferreds.forEach(function(we){we.when(fe,we.resolve,we.reject)})}),ce}return V(te,he),te.prototype._whenPromise=function(J){var q=this;if("function"!=typeof J)return Promise.reject(new Error("when() executor must be a function"));var ce=H.defer();return ce.when=J,this._whenDeferreds.add(ce),ce.promise.then(function(Ee){return q._whenDeferreds.delete(ce),Ee},function(Ee){throw q._whenDeferreds.delete(ce),Ee})},te.prototype.bracket=function(J,q){var ce,Ee=this;function Oe(fe){if(Ee.hasLock(ce)&&Ee.releaseLockCompletely(ce),fe)throw fe}return this.takeLock(J).then(function(we){return q(ce=we)}).then(function(we){return Oe(),we},Oe)},te.prototype.hasLock=function(J){return this._lock===J},te.prototype.preempt=function(J,q,ce){if(!k(this._states,this.state,J))throw new Error('Cannot transition from "'+this.state+'" to "'+J+'"');var Ee;this.isLocked&&(Ee=this._lock,this._lock=null);var Oe=null;q&&(Oe=this.takeLockSync(q));var fe=Oe?null:this.takeLockSync("preemption");return this.transition(J,Oe||fe,ce),Ee&&Ee.resolve(),fe&&this.releaseLock(fe),Oe},te.prototype.releaseLock=function(J){if(!this.isLocked)throw new Error("Could not release the lock for "+J.name+" because the StateMachine is not locked");if(!this.hasLock(J))throw new Error("Could not release the lock for "+J.name+" because "+this._lock.name+" has the lock");0===J.depth?(this._lock=null,J.resolve()):J.depth--},te.prototype.releaseLockCompletely=function(J){if(!this.isLocked)throw new Error("Could not release the lock for "+J.name+" because the StateMachine is not locked");if(!this.hasLock(J))throw new Error("Could not release the lock for "+J.name+" because "+this._lock.name+" has the lock");J.depth=0,this._lock=null,J.resolve()},te.prototype.takeLock=function(J){var q=this;if("object"==typeof J){var ce=J;return new Promise(function(fe){fe(q.takeLockSync(ce))})}var Ee=J;if(this.isLocked){var Oe=this.takeLock.bind(this,Ee);return this._lock.promise.then(Oe)}return Promise.resolve(this.takeLockSync(Ee))},te.prototype.takeLockSync=function(J){var q="string"==typeof J?null:J,ce=q?q.name:J;if(q&&!this.hasLock(q)||!q&&this.isLocked)throw new Error("Could not take the lock for "+ce+" because the lock for "+this._lock.name+" was not released");if(q)return q.depth++,q;var Ee=function L(he){var te=H.defer();return te.name=he,te.depth=0,te}(ce);return this._lock=Ee,Ee},te.prototype.transition=function(J,q,ce){if(ce=ce||[],this.isLocked){if(!q)throw new Error("You must provide the key in order to transition");if(!this.hasLock(q))throw new Error("Could not transition using the key for "+q.name+" because "+this._lock.name+" has the lock")}else if(q)throw new Error("Key provided for "+q.name+", but the StateMachine was not locked (possibly due to preemption)");if(!k(this._states,this.state,J))throw new Error('Cannot transition from "'+this.state+'" to "'+J+'"');this._state=J,this.emit.apply(this,se([],Y(["stateChanged",J].concat(ce))))},te.prototype.tryTransition=function(J,q,ce){try{this.transition(J,q,ce)}catch{return!1}return!0},te.prototype.when=function(J){var q=this;return this.state===J?Promise.resolve(this):k(this._reachableStates,this.state,J)?this._whenPromise(function(ce,Ee,Oe){ce===J?Ee(q):k(q._reachableStates,ce,J)||Oe(de(ce,J))}):Promise.reject(de(this.state,J))},te}(z);function k(he,te,J){return he.get(te).has(J)}function U(he){return Array.from(he.keys()).reduce(function(te,J){return te.set(J,ee(he,J))},new Map)}function ee(he,te,J){return J=J||new Set,he.get(te).forEach(function(q){J.has(q)||(J.add(q),ee(he,q,J).forEach(J.add,J))}),J}function de(he,te){return new Error('"'+te+'" cannot be reached from "'+he+'"')}Re.exports=N},7704:Re=>{"use strict";Re.exports=function Pe($){return($=$.filter(function(V){return"number"==typeof V})).length<1?void 0:$.reduce(function(V,Y){return Y+V})/$.length}},4239:Re=>{"use strict";var Pe=function(){function $(V,Y,se,z){Object.defineProperties(this,{availableSend:{enumerable:!0,value:se},recv:{enumerable:!0,value:Y},rtt:{enumerable:!0,value:z},send:{enumerable:!0,value:V}})}return $.of=function(V,Y){var se=(Y.timestamp-V.timestamp)/1e3;return new $(se>0?(Y.bytesSent-V.bytesSent)/se*8:0,se>0?(Y.bytesReceived-V.bytesReceived)/se*8:0,Y.availableOutgoingBitrate,Y.currentRoundTripTime)},$}();Re.exports=Pe},2483:(Re,Pe,$)=>{"use strict";var V=$(4239),Y=function(){function se(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new V(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return se.prototype.next=function(z){var H=this.lastStats;if(this.lastStats=z,H){var N=H.id===z.id?V.of(H,z):new V(0,0);this.lastReport=N}return this.lastReport},se}();Re.exports=Y},6719:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L){var U=z.call(this,N,k,L)||this;return Object.defineProperties(U,{audioLevel:{value:"number"==typeof k.audioInputLevel?k.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof k.jitter?k.jitter:null,enumerable:!0}}),U}return V(H,z),H}($(3840));Re.exports=se},3840:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L){var U=z.call(this,N,k)||this;return Object.defineProperties(U,{bytesSent:{value:"number"==typeof k.bytesSent?k.bytesSent:L?0:null,enumerable:!0},packetsSent:{value:"number"==typeof k.packetsSent?k.packetsSent:L?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof k.roundTripTime?k.roundTripTime:L?0:null,enumerable:!0}}),U}return V(H,z),H}($(9078));Re.exports=se},1371:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k,L){var U=z.call(this,N,k,L)||this,ee=null;"number"==typeof k.frameWidthInput&&"number"==typeof k.frameHeightInput&&(ee={},Object.defineProperties(ee,{width:{value:k.frameWidthInput,enumerable:!0},height:{value:k.frameHeightInput,enumerable:!0}}));var ae=null;return"number"==typeof k.frameWidthSent&&"number"==typeof k.frameHeightSent&&(ae={},Object.defineProperties(ae,{width:{value:k.frameWidthSent,enumerable:!0},height:{value:k.frameHeightSent,enumerable:!0}})),Object.defineProperties(U,{captureDimensions:{value:ee,enumerable:!0},dimensions:{value:ae,enumerable:!0},captureFrameRate:{value:"number"==typeof k.frameRateInput?k.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof k.frameRateSent?k.frameRateSent:null,enumerable:!0}}),U}return V(H,z),H}($(3840));Re.exports=se},1908:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N){return z.call(this,N)||this}return V(H,z),H}($(4976));Re.exports=se},4661:Re=>{"use strict";Re.exports=function $(V){var Y=V.actual,z=V.available,N=V.level;Object.defineProperties(this,{actual:{value:void 0===Y?null:Y,enumerable:!0},available:{value:void 0===z?null:z,enumerable:!0},level:{value:void 0===N?null:N,enumerable:!0}})}},2165:Re=>{"use strict";Re.exports=function $(V){var Y=V.fractionLost,z=V.level;Object.defineProperties(this,{fractionLost:{value:void 0===Y?null:Y,enumerable:!0},level:{value:void 0===z?null:z,enumerable:!0}})}},2590:Re=>{"use strict";Re.exports=function $(V){var Y=V.jitter,z=V.rtt,N=V.level;Object.defineProperties(this,{jitter:{value:void 0===Y?null:Y,enumerable:!0},rtt:{value:void 0===z?null:z,enumerable:!0},level:{value:void 0===N?null:N,enumerable:!0}})}},4976:(Re,Pe,$)=>{"use strict";var V=$(220),Y=$(5206);Re.exports=function z(H){var L=H.sendStats,U=void 0===L?null:L,ee=H.recvStats,ae=void 0===ee?null:ee;Object.defineProperties(this,{send:{value:H.send,enumerable:!0},recv:{value:H.recv,enumerable:!0},sendStats:{value:U?new V(U):null,enumerable:!0},recvStats:{value:ae?new Y(ae):null,enumerable:!0}})}},5206:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N){return z.call(this,N)||this}return V(H,z),H}($(4236));Re.exports=se},4236:(Re,Pe,$)=>{"use strict";var V=$(4661),Y=$(2165),se=$(2590);Re.exports=function H(N){var k=N.bandwidth,L=void 0===k?null:k,U=N.fractionLost,ee=void 0===U?null:U,ae=N.latency,de=void 0===ae?null:ae;Object.defineProperties(this,{bandwidth:{value:L?new V(L):null,enumerable:!0},fractionLost:{value:ee?new Y(ee):null,enumerable:!0},latency:{value:de?new se(de):null,enumerable:!0}})}},220:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N){return z.call(this,N)||this}return V(H,z),H}($(4236));Re.exports=se},669:(Re,Pe,$)=>{"use strict";var V=$(1908),Y=$(2003);Re.exports=function z(H){var k=H.audio,L=H.video;Object.defineProperties(this,{level:{value:H.level,enumerable:!0},audio:{value:k?new V(k):null,enumerable:!0},video:{value:L?new Y(L):null,enumerable:!0}})}},2003:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N){return z.call(this,N)||this}return V(H,z),H}($(4976));Re.exports=se},5055:(Re,Pe,$)=>{"use strict";var V=$(8020),Y=$(775),se=function(){function z(H,N,k){Object.defineProperties(this,{ice:{enumerable:!0,value:H},audio:{enumerable:!0,value:N},video:{enumerable:!0,value:k}})}return z.prototype.summarize=function(){var H=this.audio.send.concat(this.video.send),N=Y.summarize(H),k=this.audio.recv.concat(this.video.recv),L=V.summarize(k);return{ice:this.ice,send:N,recv:L,audio:{send:Y.summarize(this.audio.send),recv:V.summarize(this.audio.recv)},video:{send:Y.summarize(this.video.send),recv:V.summarize(this.video.recv)}}},z}();Re.exports=se},8753:function(Re,Pe,$){"use strict";var V=this&&this.__read||function(ue,pe){var Ie="function"==typeof Symbol&&ue[Symbol.iterator];if(!Ie)return ue;var Le,$e,je=Ie.call(ue),Qe=[];try{for(;(void 0===pe||pe-- >0)&&!(Le=je.next()).done;)Qe.push(Le.value)}catch(Xe){$e={error:Xe}}finally{try{Le&&!Le.done&&(Ie=je.return)&&Ie.call(je)}finally{if($e)throw $e.error}}return Qe},Y=this&&this.__spreadArray||function(ue,pe){for(var Ie=0,je=pe.length,Le=ue.length;Ie<je;Ie++,Le++)ue[Le]=pe[Ie];return ue},se=this&&this.__values||function(ue){var pe="function"==typeof Symbol&&Symbol.iterator,Ie=pe&&ue[pe],je=0;if(Ie)return Ie.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&je>=ue.length&&(ue=void 0),{value:ue&&ue[je++],done:!ue}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")},z=$(7627).guessBrowser,H=$(2483),N=$(5055),k=$(1013),L=$(1031),U=function(){function ue(pe){Object.defineProperties(this,{pc:{enumerable:!0,value:pe},ice:{enumerable:!0,value:new H},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return ue.prototype.next=function(){var pe=this,Ie="firefox"===z()?function Se(ue){var pe=ue.pc.getTransceivers().filter(function(je){return je.currentDirection&&je.currentDirection.match(/send/)&&je.sender.track}).map(function(je){return je.sender}),Ie=ue.pc.getTransceivers().filter(function(je){return je.currentDirection&&je.currentDirection.match(/recv/)}).map(function(je){return je.receiver});return Promise.all([ee(pe),ee(Ie),ue.pc.getStats()]).then(function(je){var Le=V(je,3),Qe=Le[0],$e=Le[1],Xe=Le[2],Me=de(ue),Qt=q(ue);Qe.forEach(function(Ke,Fe){return Ee(ue,Ke,Qt,Fe)}),fe(Me,Qt);var Wt=he(ue),St=ce(ue);$e.forEach(function(Ke,Fe){return Oe(ue,Ke,St,Fe)}),fe(Wt,St),we(ue.ice,Xe)})}(this):function ge(ue){return ue.pc.getStats().then(function(pe){var Ie=de(ue),je=q(ue);Ee(ue,pe,je),fe(Ie,je);var Le=he(ue),Qe=ce(ue);Oe(ue,pe,Qe),fe(Le,Qe),we(ue.ice,pe)})}(this);return Ie.then(function(){var je=Y([],V(pe.audio.send.values())),Le=Y([],V(pe.video.send.values())),Qe=Y([],V(pe.audio.recv.values())),$e=Y([],V(pe.video.recv.values())),Xe=new N(pe.ice.lastReport,{send:je.map(function(Me){return Me.lastReport}).filter(function(Me){return Me}),recv:Qe.map(function(Me){return Me.lastReport}).filter(function(Me){return Me})},{send:Le.map(function(Me){return Me.lastReport}).filter(function(Me){return Me}),recv:$e.map(function(Me){return Me.lastReport}).filter(function(Me){return Me})});return pe.lastReport=Xe,Xe})},ue}();function ee(ue){return Promise.all(ue.map(function(pe){var Ie=pe.track.id;return pe.getStats().then(function(je){var Le,Qe;try{for(var $e=se(je.values()),Xe=$e.next();!Xe.done;Xe=$e.next()){var Me=Xe.value;"inbound-rtp"===Me.type&&(Me.id=Ie+"-"+Me.id)}}catch(Qt){Le={error:Qt}}finally{try{Xe&&!Xe.done&&(Qe=$e.return)&&Qe.call($e)}finally{if(Le)throw Le.error}}return[Ie,je]})})).then(function(pe){return new Map(pe)})}function ae(ue,pe,Ie,je,Le){var Qe=pe[je.mediaType];if(!Le){var $e=Ie.get(je.trackId);$e&&(Le=$e.trackIdentifier)}if(Qe&&Le){if(Qe.has(je.id))return Qe.get(je.id);var Xe=new ue(Le,je);Qe.set(je.id,Xe)}return null}function de(ue){return{audio:ue.audio.send,video:ue.video.send}}function he(ue){return{audio:ue.audio.recv,video:ue.video.recv}}function te(ue,pe,Ie,je){return ae(L,de(ue),pe,Ie,je)}function J(ue,pe,Ie,je){return ae(k,he(ue),pe,Ie,je)}function q(ue){return{audio:new Set(ue.audio.send.keys()),video:new Set(ue.video.send.keys())}}function ce(ue){return{audio:new Set(ue.audio.recv.keys()),video:new Set(ue.video.recv.keys())}}function Ee(ue,pe,Ie,je){var Le,Qe;try{for(var $e=se(pe.values()),Xe=$e.next();!Xe.done;Xe=$e.next()){var Me=Xe.value;if("outbound-rtp"===Me.type&&!Me.isRemote){if("firefox"!==z()&&!Me.trackId)continue;var Qt=Ie[Me.mediaType];Qt&&Qt.delete(Me.id);var Wt=te(ue,pe,Me,je);if(Wt){var St=pe.get(Me.remoteId);Wt.next(je||Wt.trackId,Me,St)}}}}catch(Ke){Le={error:Ke}}finally{try{Xe&&!Xe.done&&(Qe=$e.return)&&Qe.call($e)}finally{if(Le)throw Le.error}}}function Oe(ue,pe,Ie,je){var Le,Qe;try{for(var $e=se(pe.values()),Xe=$e.next();!Xe.done;Xe=$e.next()){var Me=Xe.value;if("inbound-rtp"===Me.type&&!Me.isRemote){var Qt=Ie[Me.mediaType];Qt&&Qt.delete(Me.id);var Wt=J(ue,pe,Me,je);Wt&&Wt.next(je||Wt.trackId,Me)}}}catch(St){Le={error:St}}finally{try{Xe&&!Xe.done&&(Qe=$e.return)&&Qe.call($e)}finally{if(Le)throw Le.error}}}function fe(ue,pe){var Ie=function(Le){var Qe=ue[Le];pe[Le].forEach(function(Xe){return Qe.delete(Xe)})};for(var je in pe)Ie(je)}function we(ue,pe){var Ie,je,Le,Qe,$e;try{for(var Xe=se(pe.values()),Me=Xe.next();!Me.done;Me=Xe.next())"transport"===(Qt=Me.value).type&&($e=pe.get(Qt.selectedCandidatePairId))}catch(Ke){Ie={error:Ke}}finally{try{Me&&!Me.done&&(je=Xe.return)&&je.call(Xe)}finally{if(Ie)throw Ie.error}}if($e)ue.next($e);else try{for(var Wt=se(pe.values()),St=Wt.next();!St.done;St=Wt.next()){var Qt;"candidate-pair"===(Qt=St.value).type&&Qt.nominated&&(!("selected"in Qt)||Qt.selected)&&ue.next(Qt)}}catch(Ke){Le={error:Ke}}finally{try{St&&!St.done&&(Qe=Wt.return)&&Qe.call(Wt)}finally{if(Le)throw Le.error}}}Re.exports=U},8020:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(7704),se=$(7176),z=$(7483),H=function(N){function k(L,U,ee,ae,de,he,te){var J=N.call(this,L,U,ee)||this;return Object.defineProperties(J,{deltaPacketsLost:{enumerable:!0,value:ae},deltaPacketsReceived:{enumerable:!0,value:de},fractionLost:{enumerable:!0,value:he},jitter:{enumerable:!0,value:te},phonyFractionLost:{enumerable:!0,value:de>0?ae/de:0}}),J}return V(k,N),k.of=function(L,U,ee){if(U.id!==ee.id)throw new Error("RTCStats IDs must match");var ae=(ee.timestamp-U.timestamp)/1e3,he=ae>0?(ee.bytesReceived-U.bytesReceived)/ae*8:0,te=Math.max(ee.packetsLost-U.packetsLost,0);return new k(U.id,L,he,te,ee.packetsReceived-U.packetsReceived,ee.fractionLost,ee.jitter)},k.summarize=function(L){var U=L.map(function(he){return he.summarize()});return{bitrate:z(U.map(function(he){return he.bitrate})),fractionLost:Y(U.map(function(he){return he.fractionLost})),jitter:Y(U.map(function(he){return he.jitter}))}},k.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},k}(se);Re.exports=H},1013:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(8020),z=function(H){function N(k,L){var U=H.call(this,L.id,k,L)||this;return Object.defineProperties(U,{lastReport:{enumerable:!0,value:null,writable:!0}}),U}return V(N,H),N.prototype.next=function(k,L){var U=this.lastStats;this.lastStats=L,this.trackId=k;var ee=Y.of(k,U,L);return this.lastReport=ee,ee},N}($(6986));Re.exports=z},5180:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,k)||this;return Object.defineProperties(L,{audioLevel:{value:"number"==typeof k.audioOutputLevel?k.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof k.jitter?k.jitter:null,enumerable:!0}}),L}return V(H,z),H}($(2613));Re.exports=se},2613:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,k)||this;return Object.defineProperties(L,{bytesReceived:{value:"number"==typeof k.bytesReceived?k.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof k.packetsReceived?k.packetsReceived:null,enumerable:!0}}),L}return V(H,z),H}($(9078));Re.exports=se},993:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this,N,k)||this,U=null;return"number"==typeof k.frameWidthReceived&&"number"==typeof k.frameHeightReceived&&(U={},Object.defineProperties(U,{width:{value:k.frameWidthReceived,enumerable:!0},height:{value:k.frameHeightReceived,enumerable:!0}})),Object.defineProperties(L,{dimensions:{value:U,enumerable:!0},frameRate:{value:"number"==typeof k.frameRateReceived?k.frameRateReceived:null,enumerable:!0}}),L}return V(H,z),H}($(2613));Re.exports=se},7176:Re=>{"use strict";Re.exports=function $(V,Y,se){Object.defineProperties(this,{id:{enumerable:!0,value:V},trackId:{enumerable:!0,value:Y},bitrate:{enumerable:!0,value:se}})}},6986:Re=>{"use strict";Re.exports=function $(V,Y,se){Object.defineProperties(this,{id:{enumerable:!0,value:V,writable:!0},trackId:{enumerable:!0,value:Y,writable:!0},lastStats:{enumerable:!0,value:se,writable:!0}})}},775:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(7704),se=$(7176),z=$(7483),H=function(N){function k(L,U,ee,ae){var de=N.call(this,L,U,ee)||this;return Object.defineProperties(de,{rtt:{enumerable:!0,value:ae}}),de}return V(k,N),k.of=function(L,U,ee,ae){if(U.id!==ee.id)throw new Error("RTCStats IDs must match");var de=(ee.timestamp-U.timestamp)/1e3;return new k(U.id,L,de>0?(ee.bytesSent-U.bytesSent)/de*8:0,ae&&"number"==typeof ae.roundTripTime?ae.roundTripTime/1e3:void 0)},k.summarize=function(L){return{bitrate:z(L.map(function(ae){return ae.bitrate})),rtt:Y(L.map(function(ae){return ae.rtt}))}},k}(se);Re.exports=H},1031:function(Re,Pe,$){"use strict";var H,V=this&&this.__extends||(H=function(N,k){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var ee in U)Object.prototype.hasOwnProperty.call(U,ee)&&(L[ee]=U[ee])})(N,k)},function(N,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=N}H(N,k),N.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),Y=$(6986),se=$(775),z=function(H){function N(k,L){var U=H.call(this,L.id,k,L)||this;return Object.defineProperties(U,{lastReport:{enumerable:!0,value:null,writable:!0}}),U}return V(N,H),N.prototype.next=function(k,L,U){var ee=this.lastStats;this.lastStats=L,this.trackId=k;var ae=se.of(k,ee,L,U);return this.lastReport=ae,ae},N}(Y);Re.exports=z},7805:(Re,Pe,$)=>{"use strict";var V=$(6719),Y=$(1371),se=$(5180),z=$(993);Re.exports=function N(k,L,U){if("string"!=typeof k)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:k,enumerable:!0},localAudioTrackStats:{value:L.localAudioTrackStats.map(function(ee){return new V(ee.trackId,ee,U)}),enumerable:!0},localVideoTrackStats:{value:L.localVideoTrackStats.map(function(ee){return new Y(ee.trackId,ee,U)}),enumerable:!0},remoteAudioTrackStats:{value:L.remoteAudioTrackStats.map(function(ee){return new se(ee.trackId,ee)}),enumerable:!0},remoteVideoTrackStats:{value:L.remoteVideoTrackStats.map(function(ee){return new z(ee.trackId,ee)}),enumerable:!0}})}},7483:Re=>{"use strict";Re.exports=function Pe($){return $.reduce(function(V,Y){return"number"==typeof Y?Y+V:V},0)}},9078:Re=>{"use strict";Re.exports=function $(V,Y){if("string"!=typeof V)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:V,enumerable:!0},trackSid:{value:Y.trackSid,enumerable:!0},timestamp:{value:Y.timestamp,enumerable:!0},ssrc:{value:Y.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof Y.packetsLost?Y.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof Y.codecName?Y.codecName:null,enumerable:!0}})}},4605:function(Re,Pe,$){"use strict";var z,V=this&&this.__extends||(z=function(H,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,L){k.__proto__=L}||function(k,L){for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(k[U]=L[U])})(H,N)},function(H,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function k(){this.constructor=H}z(H,N),H.prototype=null===N?Object.create(N):(k.prototype=N.prototype,new k)}),se=function(z){function H(N,k){var L=z.call(this)||this;return Object.defineProperties(L,{id:{enumerable:!0,value:N},kind:{enumerable:!0,value:k}}),L}return V(H,z),H.prototype.stop=function(){this.emit("stopped")},H}($(9069).EventEmitter);Re.exports=se},5330:function(Re,Pe,$){"use strict";var St,V=this&&this.__extends||(St=function(Ke,Fe){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(We,De){We.__proto__=De}||function(We,De){for(var et in De)Object.prototype.hasOwnProperty.call(De,et)&&(We[et]=De[et])})(Ke,Fe)},function(Ke,Fe){if("function"!=typeof Fe&&null!==Fe)throw new TypeError("Class extends value "+String(Fe)+" is not a constructor or null");function We(){this.constructor=Ke}St(Ke,Fe),Ke.prototype=null===Fe?Object.create(Fe):(We.prototype=Fe.prototype,new We)}),Y=this&&this.__read||function(St,Ke){var Fe="function"==typeof Symbol&&St[Symbol.iterator];if(!Fe)return St;var De,Ut,We=Fe.call(St),et=[];try{for(;(void 0===Ke||Ke-- >0)&&!(De=We.next()).done;)et.push(De.value)}catch(Zt){Ut={error:Zt}}finally{try{De&&!De.done&&(Fe=We.return)&&Fe.call(We)}finally{if(Ut)throw Ut.error}}return et},se=this&&this.__spreadArray||function(St,Ke){for(var Fe=0,We=Ke.length,De=St.length;Fe<We;Fe++,De++)St[De]=Ke[Fe];return St},z=$(8675),H=$(9739),N=H.buildLogLevels,k=H.makeUUID,L=$(1458),U=$(2643),ee=$(6543),ae=0,de={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},he={closed:"close",open:"open",waiting:"waiting"},$e=globalThis,Xe=$e.WebSocket?$e.WebSocket:$(3332),Me={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},Qt=new Map([[3e3,Me.TIMEOUT],[3001,Me.TIMEOUT],[3002,Me.FAILED],[3003,Me.FAILED],[3004,Me.TIMEOUT],[3006,Me.BUSY],[3007,Me.TIMEOUT]]),Wt=function(St){function Ke(Fe,We){var De=St.call(this,"early",de)||this;We=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:L,WebSocket:Xe},We);var et=N(We.logLevel),Ut=new We.Log("default",De,et,We.loggerName),Zt=We.networkMonitor?new U(function(){var tn=Zt.type,Jn="Network changed"+(tn?" to "+tn:"");Ut.debug(Jn),De._close({code:3004,reason:Jn})}):null;Object.defineProperties(De,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:We.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:We.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++ae},_log:{value:Ut},_messageQueue:{value:[]},_networkMonitor:{value:Zt},_options:{value:We},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:Fe},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var Mt={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return De.on("stateChanged",function(tn){for(var Jn=[],qt=1;qt<arguments.length;qt++)Jn[qt-1]=arguments[qt];tn in he&&De.emit.apply(De,se([he[tn]],Y(Jn)));var Mr={name:tn,group:"signaling",level:Mt[De.state]};if("closed"===tn){var xr=Y(Jn,1),wr=xr[0];Mr.payload={reason:wr},Mr.level=wr===Me.LOCAL?"info":"error"}De._eventObserver.emit("event",Mr)}),De._eventObserver.emit("event",{name:De.state,group:"signaling",level:Mt[De.state]}),De._connect(),De}return V(Ke,St),Ke.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},Ke.prototype._close=function(Fe){var We=Fe.code,De=Fe.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==We&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var et=this._log;1e3===We?(et.debug("Closed"),this.transition("closed",null,[Me.LOCAL])):(et.warn("Closed: "+We+" - "+De),3005!==We&&this.transition("closed",null,[Qt.get(We)||Me.REMOTE]));var Ut=this._ws.readyState,Zt=this._options.WebSocket;Ut!==Zt.CLOSING&&Ut!==Zt.CLOSED&&this._ws.close(We,De)}},Ke.prototype._connect=function(){var Fe=this,We=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void We.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var De=this._ws;We.debug("Created a new WebSocket:",De),De.addEventListener("close",function(Ut){return Fe._close(Ut)});var et=this._options.openTimeout;this._openTimeout=new ee(function(){Fe._close({code:3007,reason:"Failed to open in "+et+" ms"})},et),De.addEventListener("open",function(){We.debug("WebSocket opened:",De),Fe._openTimeout.clear(),Fe._startHandshake(),Fe._networkMonitor&&Fe._networkMonitor.start()}),De.addEventListener("message",function(Ut){We.debug("Incoming: "+Ut.data);try{Ut=JSON.parse(Ut.data)}catch(Zt){return void Fe.emit("error",Zt)}switch(Ut.type){case"bad":Fe._handleBad(Ut);break;case"busy":Fe._handleBusy(Ut);break;case"bye":break;case"msg":Fe._handleMessage(Ut);case"heartbeat":Fe._handleHeartbeat();break;case"welcome":Fe._handleWelcome(Ut);break;default:Fe._log.debug("Unknown message type: "+Ut.type),Fe.emit("error",new Error("Unknown message type: "+Ut.type))}})},Ke.prototype._handleBad=function(Fe){var We=Fe.reason,De=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(De.warn("Closing: 3002 - "+We),void this._close({code:3002,reason:We})):(De.debug("Error: "+We),void this.emit("error",new Error(We)));De.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},Ke.prototype._handleBusy=function(Fe){var We=this,De=Fe.cookie,et=Fe.keepAlive,Ut=Fe.retryAfter,Zt=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var Mt=Ut<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Ut+" ms";if(Ut<0)return Zt.warn("Closing: 3006 - "+Mt),void this._close({code:3006,reason:Mt});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=De||null,et?(Zt.warn(Mt),this._busyWaitTimeout=new ee(function(){return We._startHandshake()},Ut)):(Zt.warn("Closing: 3005 - "+Mt),this._close({code:3005,reason:Mt}),this._busyWaitTimeout=new ee(function(){return We._connect()},Ut)),this.transition("waiting",null,[et,Ut])}else Zt.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},Ke.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},Ke.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var Fe=this._log,We=this._options.maxConsecutiveMissedHeartbeats;Fe.debug("Consecutive heartbeats missed: "+We);var De="Missed "+We+' "heartbeat" messages';Fe.warn("Closing: 3001 - "+De),this._close({code:3001,reason:De})}},Ke.prototype._handleMessage=function(Fe){"open"===this.state?this.emit("message",Fe.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},Ke.prototype._handleWelcome=function(Fe){var We=this,De=Fe.negotiatedTimeout,et=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(et.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var Zt=De*this._options.maxConsecutiveMissedHeartbeats,Mt=De-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new ee(function(){return We._handleHeartbeatTimeout()},Zt),this._messageQueue.splice(0).forEach(function(tn){return We._send(tn)}),this._sendHeartbeatTimeout=new ee(function(){return We._sendHeartbeat()},Mt),this.transition("open")}else et.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},Ke.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var Fe=this._log;if(this._hellosLeft<=0){var We="All handshake attempts failed";return Fe.warn("Closing: 3000 - "+We),void this._close({code:3e3,reason:We})}Fe.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},Ke.prototype._send=function(Fe){if(this._ws.readyState===this._options.WebSocket.OPEN){var et=JSON.stringify(Fe);this._log.debug("Outgoing: "+et);try{this._ws.send(et),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Ut="Failed to send message";this._log.warn("Closing: 3003 - "+Ut),this._close({code:3003,reason:Ut})}}},Ke.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},Ke.prototype._sendHello=function(){var Fe=this._options,We=Fe.helloBody,De=Fe.requestedHeartbeatTimeout,et={id:k(),timeout:De,type:"hello",version:2};this._cookie&&(et.cookie=this._cookie),We&&(et.body=We),this._send(et)},Ke.prototype._sendOrEnqueue=function(Fe){var We=this;"closed"!==this.state&&("open"===this.state?function(et){return We._send(et)}:function(et){return We._messageQueue.push(et)})(Fe)},Ke.prototype._startHandshake=function(){var Fe=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new ee(function(){return Fe._handleWelcomeTimeout()},this._options.welcomeTimeout))},Ke.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},Ke.prototype.sendMessage=function(Fe){this._sendOrEnqueue({body:Fe,type:"msg"})},Ke}(z);Wt.CloseReason=Me,Re.exports=Wt},6412:(Re,Pe,$)=>{"use strict";var V=$(9739).defer,Y=function(){function se(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return se.prototype.put=function(z){this._hasValue=!0,this._value=z;var H=this._deferreds.shift();return H&&H.resolve(z),this},se.prototype.take=function(){var z=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var H=V();return this._deferreds.push(H),H.promise.then(function(N){return z._hasValue=!1,N})},se}();Re.exports=Y},2606:Re=>{var Pe=function(){function $(V){Object.defineProperties(this,{_min:{value:V.min||100},_max:{value:V.max||1e4},_jitter:{value:V.jitter>0&&V.jitter<=1?V.jitter:0},_factor:{value:V.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var Y=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var se=Math.random(),z=Math.floor(se*this._jitter*Y);Y=0==(1&Math.floor(10*se))?Y-z:Y+z}return 0|Math.min(Y,this._max)}},_timeoutID:{value:null,writable:!0}})}return $.prototype.backoff=function(V){var Y=this,se=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){Y._attempts++,V()},se)},$.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},$}();Re.exports=Pe},3948:function(Re){"use strict";var Pe=this&&this.__read||function(ee,ae){var de="function"==typeof Symbol&&ee[Symbol.iterator];if(!de)return ee;var te,q,he=de.call(ee),J=[];try{for(;(void 0===ae||ae-- >0)&&!(te=he.next()).done;)J.push(te.value)}catch(ce){q={error:ce}}finally{try{te&&!te.done&&(de=he.return)&&de.call(he)}finally{if(q)throw q.error}}return J};function Y(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}Re.exports={isAndroid:function $(){return/Android/.test(navigator.userAgent)},isIOS:function V(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function se(){return Y()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function z(){return Y()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function H(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function N(ee){return"chrome"===ee&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function L(ee){return"safari"!==ee?null:"brave"in navigator?"brave":["edge","edg"].find(function(ae){return navigator.userAgent.toLowerCase().includes(ae)})||null},rebrandedChromeBrowser:function k(ee){if("chrome"!==ee)return null;if("brave"in navigator)return"brave";var ae=function U(ee){for(var ae=[],de=[],he=0;he<ee.length;he++)if("("===ee[he])ae.push(he);else if(")"===ee[he]&&ae.length>0){var te=ae.pop();0===ae.length&&de.push(ee.substring(te,he+1))}return de}(navigator.userAgent),he=ae.reduce(function(q,ce){return q.replace(ce,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Pe(he.map(function(q){return q.split("/")[0].toLowerCase()})).slice(2).find(function(q){return!["chrome","mobile","safari"].includes(q)})||null}}},8126:function(Re){"use strict";var Pe=this&&this.__read||function(Y,se){var z="function"==typeof Symbol&&Y[Symbol.iterator];if(!z)return Y;var N,L,H=z.call(Y),k=[];try{for(;(void 0===se||se-- >0)&&!(N=H.next()).done;)k.push(N.value)}catch(U){L={error:U}}finally{try{N&&!N.done&&(z=H.return)&&z.call(H)}finally{if(L)throw L.error}}return k},$=this&&this.__spreadArray||function(Y,se){for(var z=0,H=se.length,N=Y.length;z<H;z++,N++)Y[N]=se[z];return Y},V=function(){function Y(se,z){var H=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:z}}),Object.defineProperty(this,"_promise",{value:new Promise(function(N,k){se(function(L){H._isCancelable=!1,N(L)},function(L){H._isCancelable=!1,k(L)},function(){return H._isCanceled})})})}return Y.reject=function(se){return new Y(function(H,N){N(se)},function(){})},Y.resolve=function(se){return new Y(function(H){H(se)},function(){})},Y.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},Y.prototype.catch=function(){var se=[].slice.call(arguments),z=this._promise;return new Y(function(N,k){z.catch.apply(z,$([],Pe(se))).then(N,k)},this._onCancel)},Y.prototype.then=function(){var se=[].slice.call(arguments),z=this._promise;return new Y(function(N,k){z.then.apply(z,$([],Pe(se))).then(N,k)},this._onCancel)},Y.prototype.finally=function(){var se=[].slice.call(arguments),z=this._promise;return new Y(function(N,k){z.finally.apply(z,$([],Pe(se))).then(N,k)},this._onCancel)},Y}();Re.exports=V},8701:(Re,Pe,$)=>{"use strict";var V=$(1730);Re.exports.SDK_NAME=V.name+".js",Re.exports.SDK_VERSION=V.version,Re.exports.SDP_FORMAT="unified",Re.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},Re.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},Re.exports.DEFAULT_ENVIRONMENT="prod",Re.exports.DEFAULT_REALM="us1",Re.exports.DEFAULT_REGION="gll",Re.exports.DEFAULT_LOG_LEVEL="warn",Re.exports.DEFAULT_LOGGER_NAME="twilio-video",Re.exports.WS_SERVER=function(se,z){return z="gll"===z?"global":encodeURIComponent(z),"prod"===se?"wss://"+z+".vss.twilio.com/signaling":"wss://"+z+".vss."+se+".twilio.com/signaling"},Re.exports.PUBLISH_MAX_ATTEMPTS=5,Re.exports.PUBLISH_BACKOFF_JITTER=10,Re.exports.PUBLISH_BACKOFF_MS=20,Re.exports.typeErrors={ILLEGAL_INVOKE:function(se,z){return new TypeError("Illegal call to "+se+": "+z)},INVALID_TYPE:function(se,z){return new TypeError(se+" must be "+function Y(se){return["a","e","i","o","u"].includes(se.toLowerCase()[0])?"an":"a"}(z)+" "+z)},INVALID_VALUE:function(se,z){return new RangeError(se+" must be one of "+z.join(", "))},REQUIRED_ARGUMENT:function(se){return new TypeError(se+" must be specified")}},Re.exports.DEFAULT_FRAME_RATE=24,Re.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,Re.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,Re.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,Re.exports.DEFAULT_NQ_LEVEL_LOCAL=1,Re.exports.DEFAULT_NQ_LEVEL_REMOTE=0,Re.exports.MAX_NQ_LEVEL=3,Re.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,Re.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,Re.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*Re.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},Re.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},Re.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},Re.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},Re.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},Re.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},Re.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(Re,Pe,$)=>{"use strict";var V=$(4687);Re.exports=function z(H){var N=$(7708),k={},L=N.getOrCreate(k),U=3;return function ee(){return U--,V(L,H.srcObject,250).then(function(ae){return!!ae&&(!(U>0)||ee())}).catch(function(){return!0})}().finally(function(){N.release(k)})}},1741:Re=>{"use strict";var Pe=null;Re.exports=function H(N){return Pe=Pe||document.createElement("canvas"),new Promise(function(k){var L=3;setTimeout(function U(){return L--,function z(N){try{var k=Pe.getContext("2d");k.drawImage(N,0,0,50,50);var U=k.getImageData(0,0,50,50).data.filter(function(ae,de){return(de+1)%4});return 0===Math.max.apply(Math,U)}catch(ae){return console.log("Error checking silence: ",ae),!1}}(N)?L>0?setTimeout(U,250):k(!0):k(!1)},250)})}},2181:Re=>{"use strict";var Pe=function(){function $(V){var Y=this;void 0===V&&(V=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){Y._emitVisible("visible"===document.visibilityState)}}});for(var se=0;se<V;se++)this._listeners.push([])}return $.prototype.clear=function(){for(var V=this._listeners.length,Y=0;Y<V;Y++)this._listeners[Y]=[]},$.prototype._listenerCount=function(){return this._listeners.reduce(function(V,Y){return V+Y.length},0)},$.prototype._emitVisible=function(V){for(var Y=this,se=Promise.resolve(),z=function(N){se=se.then(function(){return Y._emitVisiblePhase(N,V)})},H=1;H<=this._listeners.length;H++)z(H);return se},$.prototype._emitVisiblePhase=function(V,Y){return Promise.all(this._listeners[V-1].map(function(z){var H=z(Y);return H instanceof Promise?H:Promise.resolve(H)}))},$.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},$.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},$.prototype.onVisibilityChange=function(V,Y){if("number"!=typeof V||V<=0||V>this._listeners.length)throw new Error("invalid phase: ",V);return this._listeners[V-1].push(Y),1===this._listenerCount()&&this._start(),this},$.prototype.offVisibilityChange=function(V,Y){if("number"!=typeof V||V<=0||V>this._listeners.length)throw new Error("invalid phase: ",V);var se=this._listeners[V-1],z=se.indexOf(Y);return-1!==z&&(se.splice(z,1),0===this._listenerCount()&&this._stop()),this},$}();Re.exports=new Pe(2)},8606:function(Re,Pe,$){"use strict";var N,V=this&&this.__extends||(N=function(k,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ee){U.__proto__=ee}||function(U,ee){for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(U[ae]=ee[ae])})(k,L)},function(k,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function U(){this.constructor=k}N(k,L),k.prototype=null===L?Object.create(L):(U.prototype=L.prototype,new U)}),Y=$(9069).EventEmitter,se=["signaling","room","media","quality","video-processor","preflight"],z=["debug","error","info","warning"],H=function(N){function k(L,U,ee,ae){void 0===ae&&(ae=null);var de=N.call(this)||this;return de.on("event",function(he){var te=he.name,J=he.group,q=he.level,ce=he.payload;if("string"!=typeof te)throw ee.error("Unexpected name: ",te),new Error("Unexpected name: ",te);if(!se.includes(J))throw ee.error("Unexpected group: ",J),new Error("Unexpected group: ",J);if(!z.includes(q))throw ee.error("Unexpected level: ",q),new Error("Unexpected level: ",q);var Ee=Date.now(),Oe=Ee-U,fe=Object.assign({elapsedTime:Oe,level:q},ce||{});L.publish(J,te,fe);var we=Object.assign({elapsedTime:Oe,group:J,level:q,name:te,timestamp:Ee},ce?{payload:ce}:{});ee[{debug:"debug",error:"error",info:"info",warning:"warn"}[q]]("event",we),ae&&"signaling"===J&&ae.emit("event",we)}),de}return V(k,N),k}(Y);Re.exports=H},3826:Re=>{"use strict";var Pe=function(){function $(V){V=Object.assign({getKey:function(se){return se},getValue:function(se){return se},isLessThanOrEqualTo:function(se,z){return se<=z}},V),Object.defineProperties(this,{_getKey:{value:V.getKey},_getValue:{value:V.getValue},_isLessThanOrEqualTo:{value:V.isLessThanOrEqualTo},_map:{value:new Map}})}return $.prototype.toMap=function(){return new Map(this._map)},$.prototype.updateAndFilter=function(V){return V.filter(this.update,this)},$.prototype.update=function(V){var Y=this._getKey(V),se=this._getValue(V);return!(this._map.has(Y)&&this._isLessThanOrEqualTo(se,this._map.get(Y))||(this._map.set(Y,se),0))},$}();Re.exports=Pe},9739:function(Re,Pe,$){"use strict";var Ct,V=this&&this.__extends||(Ct=function(Ht,sn){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,xe){ze.__proto__=xe}||function(ze,xe){for(var ut in xe)Object.prototype.hasOwnProperty.call(xe,ut)&&(ze[ut]=xe[ut])})(Ht,sn)},function(Ht,sn){if("function"!=typeof sn&&null!==sn)throw new TypeError("Class extends value "+String(sn)+" is not a constructor or null");function ze(){this.constructor=Ht}Ct(Ht,sn),Ht.prototype=null===sn?Object.create(sn):(ze.prototype=sn.prototype,new ze)}),Y=this&&this.__read||function(Ct,Ht){var sn="function"==typeof Symbol&&Ct[Symbol.iterator];if(!sn)return Ct;var xe,Fn,ze=sn.call(Ct),ut=[];try{for(;(void 0===Ht||Ht-- >0)&&!(xe=ze.next()).done;)ut.push(xe.value)}catch(fn){Fn={error:fn}}finally{try{xe&&!xe.done&&(sn=ze.return)&&sn.call(ze)}finally{if(Fn)throw Fn.error}}return ut},se=this&&this.__spreadArray||function(Ct,Ht){for(var sn=0,ze=Ht.length,xe=Ct.length;sn<ze;sn++,xe++)Ct[xe]=Ht[sn];return Ct},z=$(8701),H=z.typeErrors,N=z.trackPriority,k=$(7627),L=$(8066).sessionSID;function q(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function ge(Ct,Ht,sn,ze){if(!(ze in Ht)&&!ze.match(/^on[a-z]+$/)){var xe;try{xe=typeof Ct[ze]}catch{}"function"===xe&&(Ht[ze]=function(){for(var ut,Fn=[],fn=0;fn<arguments.length;fn++)Fn[fn]=arguments[fn];return(ut=this[sn])[ze].apply(ut,se([],Y(Fn)))})}}function Ie(Ct){return"object"==typeof Ct&&!Array.isArray(Ct)}function Qt(Ct){Object.getOwnPropertyNames(Ct).forEach(function(Ht){Ht.startsWith("_")&&St(Ct,Ht)})}function St(Ct,Ht){var sn=Object.getOwnPropertyDescriptor(Ct,Ht);sn.enumerable=!1,Object.defineProperty(Ct,Ht,sn)}function Ke(Ct,Ht){void 0===Ht&&(Ht=[]),Ht.forEach(function(sn){Ct.hasOwnProperty(sn)&&St(Ct,sn)})}function Fe(Ct){return Ct.map(Ut)}function Ut(Ct){return Array.isArray(Ct)?Fe(Ct):Ct instanceof Set?function We(Ct){return Fe(se([],Y(Ct)))}(Ct):Ct instanceof Map?function De(Ct){return se([],Y(Ct.entries())).reduce(function(Ht,sn){var ze,xe=Y(sn,2);return Object.assign(((ze={})[xe[0]]=Ut(xe[1]),ze),Ht)},{})}(Ct):Ct&&"object"==typeof Ct?function et(Ct){return Object.entries(Ct).reduce(function(Ht,sn){var ze,xe=Y(sn,2);return Object.assign(((ze={})[xe[0]]=Ut(xe[1]),ze),Ht)},{})}(Ct):Ct}function tn(Ct){return xr(Ct,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Mr},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function qt(Ct){return xr(Ct,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Mr(Ct){return xr(Ct,[{prop:N.PRIORITY_HIGH,type:"object",transform:qt},{prop:N.PRIORITY_LOW,type:"object",transform:qt},{prop:N.PRIORITY_STANDARD,type:"object",transform:qt}])}function xr(Ct,Ht){return Ht.reduce(function(sn,ze){var xe,ut=ze.prop,fn=ze.payloadProp,Go=ze.transform;return typeof Ct[ut]===ze.type?Object.assign(((xe={})[void 0===fn?ut:fn]=(void 0===Go?function(To){return To}:Go)(Ct[ut]),xe),sn):sn},{})}Pe.constants=z,Pe.createBandwidthProfilePayload=function Mt(Ct){return xr(Ct,[{prop:"video",type:"object",transform:tn}])},Pe.createMediaSignalingPayload=function Jn(Ct,Ht,sn,ze,xe,ut){var Fn={transports:[{type:"data-channel"}]};return Object.assign(Ct?{active_speaker:Fn}:{},Ht?{network_quality:Fn}:{},ut?{render_hints:Fn}:{},xe?{publisher_hints:Fn}:{},sn?{track_priority:Fn}:{},ze?{track_switch_off:Fn}:{})},Pe.createRoomConnectEventPayload=function Zt(Ct){function Ht(xe){return xe?"true":"false"}var sn={sessionSID:L,iceServers:(Ct.iceServers||[]).length,audioTracks:(Ct.tracks||[]).filter(function(xe){return"audio"===xe.kind}).length,videoTracks:(Ct.tracks||[]).filter(function(xe){return"video"===xe.kind}).length,dataTracks:(Ct.tracks||[]).filter(function(xe){return"data"===xe.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(xe){var ut=Y(xe,2),Fn=ut[0],fn=ut[1];sn[fn=fn||Fn]=Ht(!!Ct[Fn])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(xe){var ut=Y(xe,2),Fn=ut[0],fn=ut[1];fn=fn||Fn,"number"==typeof Ct[Fn]?sn[fn]=Ct[Fn]:isNaN(Number(Ct[Fn]))||(sn[fn]=Number(Ct[Fn]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(xe){var ut=Y(xe,2),Fn=ut[0],fn=ut[1];fn=fn||Fn,"string"==typeof Ct[Fn]?sn[fn]=Ct[Fn]:"number"==typeof Ct[Fn]&&"name"===Fn&&(sn[fn]=Ct[Fn].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(xe){xe in Ct&&(sn[xe]=JSON.stringify(Ct[xe]))}),"networkQuality"in Ct&&(sn.networkQualityConfiguration={},Ie(Ct.networkQuality)?["local","remote"].forEach(function(xe){"number"==typeof Ct.networkQuality[xe]&&(sn.networkQualityConfiguration[xe]=Ct.networkQuality[xe])}):(sn.networkQualityConfiguration.remote=0,sn.networkQualityConfiguration.local=Ct.networkQuality?1:0)),Ct.bandwidthProfile&&Ct.bandwidthProfile.video){var ze=Ct.bandwidthProfile.video||{};sn.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(xe){"number"==typeof ze[xe]||"string"==typeof ze[xe]?sn.bandwidthProfileOptions[xe]=ze[xe]:"boolean"==typeof ze[xe]?sn.bandwidthProfileOptions[xe]=Ht(ze[xe]):"object"==typeof ze[xe]&&(sn.bandwidthProfileOptions[xe]=JSON.stringify(ze[xe]))})}return{group:"room",name:"connect",level:"info",payload:sn}},Pe.createSubscribePayload=function wr(Ct){return{rules:[{type:Ct?"include":"exclude",all:!0}],revision:1}},Pe.asLocalTrack=function U(Ct,Ht){if(Ct instanceof Ht.LocalAudioTrack||Ct instanceof Ht.LocalVideoTrack||Ct instanceof Ht.LocalDataTrack)return Ct;if(Ct instanceof Ht.MediaStreamTrack)return"audio"===Ct.kind?new Ht.LocalAudioTrack(Ct,Ht):new Ht.LocalVideoTrack(Ct,Ht);throw H.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Pe.asLocalTrackPublication=function ee(Ct,Ht,sn,ze){return new(0,{audio:ze.LocalAudioTrackPublication,video:ze.LocalVideoTrackPublication,data:ze.LocalDataTrackPublication}[Ct.kind])(Ht,Ct,sn,ze)},Pe.capitalize=function ae(Ct){return Ct[0].toUpperCase()+Ct.slice(1)},Pe.deprecateEvents=function de(Ct,Ht,sn,ze){var xe=new Set;Ht.on("newListener",function ut(Fn){sn.has(Fn)&&!xe.has(Fn)&&(ze.deprecated(Ct+"#"+Fn+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(sn.get(Fn)?" Use "+Ct+"#"+sn.get(Fn)+" instead.":"")),xe.add(Fn)),xe.size>=sn.size&&Ht.removeListener("newListener",ut)})},Pe.difference=function he(Ct,Ht){Ct=Array.isArray(Ct)?new Set(Ct):new Set(Ct.values()),Ht=Array.isArray(Ht)?new Set(Ht):new Set(Ht.values());var sn=new Set;return Ct.forEach(function(ze){Ht.has(ze)||sn.add(ze)}),sn},Pe.filterObject=function te(Ct,Ht){return Object.keys(Ct).reduce(function(sn,ze){return Ct[ze]!==Ht&&(sn[ze]=Ct[ze]),sn},{})},Pe.flatMap=function J(Ct,Ht){var sn=Ct instanceof Map||Ct instanceof Set?Array.from(Ct.values()):Ct;return Ht=Ht||function(xe){return xe},sn.reduce(function(ze,xe){var ut=Ht(xe);return ze.concat(ut)},[])},Pe.getPlatform=function ce(){var Ct=q(),sn=Y(Ct.match(/\(([^)]+)\)/)||[],2)[1];return Y((void 0===sn?"unknown":sn).split(";").map(function(Fn){return Fn.trim()}),1)[0].toLowerCase()},Pe.getUserAgent=q,Pe.hidePrivateProperties=Qt,Pe.hidePrivateAndCertainPublicPropertiesInClass=function Wt(Ct,Ht){return function(sn){function ze(){for(var xe=[],ut=0;ut<arguments.length;ut++)xe[ut]=arguments[ut];var Fn=sn.apply(this,se([],Y(xe)))||this;return Qt(Fn),Ke(Fn,Ht),Fn}return V(ze,sn),ze}(Ct)},Pe.isDeepEqual=function pe(Ct,Ht){if(Ct===Ht)return!0;if(typeof Ct!=typeof Ht)return!1;if(null===Ct)return null===Ht;if(null===Ht)return!1;if(Array.isArray(Ct))return Array.isArray(Ht)&&Ct.length===Ht.length&&Ct.every(function(xe,ut){return pe(xe,Ht[ut])});if("object"==typeof Ct){var sn=Object.keys(Ct).sort(),ze=Object.keys(Ht).sort();return!Array.isArray(Ht)&&pe(sn,ze)&&sn.every(function(xe){return pe(Ct[xe],Ht[xe])})}return!1},Pe.isNonArrayObject=Ie,Pe.inRange=function Sr(Ct,Ht,sn){return Ht<=Ct&&Ct<=sn},Pe.makeUUID=function Ee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ct){var Ht=16*Math.random()|0;return("x"===Ct?Ht:3&Ht|8).toString(16)})},Pe.oncePerTick=function Oe(Ct){var Ht=null;function sn(){Ht=null,Ct()}return function(){Ht&&clearTimeout(Ht),Ht=setTimeout(sn)}},Pe.promiseFromEvents=function fe(Ct,Ht,sn,ze){return new Promise(function(xe,ut){function Fn(){var ro=[].slice.call(arguments);ze&&Ht.removeListener(ze,fn),xe.apply(void 0,se([],Y(ro)))}function fn(){var ro=[].slice.call(arguments);Ht.removeListener(sn,Fn),ut.apply(void 0,se([],Y(ro)))}Ht.once(sn,Fn),ze&&Ht.once(ze,fn),Ct()})},Pe.getOrNull=function we(Ct,Ht){return Ht.split(".").reduce(function(sn,ze){return sn?sn[ze]:null},Ct)},Pe.defer=function Se(){var Ct={};return Ct.promise=new Promise(function(Ht,sn){Ct.resolve=Ht,Ct.reject=sn}),Ct},Pe.delegateMethods=function ue(Ct,Ht,sn){for(var ze in Ct)ge(Ct,Ht,sn,ze)},Pe.proxyProperties=function je(Ct,Ht,sn){Object.getOwnPropertyNames(Ct).forEach(function(ze){!function Le(Ct,Ht,sn,ze){if(!(ze in Ht)){if(ze.match(/^on[a-z]+$/))return Object.defineProperty(Ht,ze,{value:null,writable:!0}),void sn.addEventListener(ze.slice(2),function(){for(var xe=[],ut=0;ut<arguments.length;ut++)xe[ut]=arguments[ut];Ht.dispatchEvent.apply(Ht,se([],Y(xe)))});Object.defineProperty(Ht,ze,{enumerable:!0,get:function(){return sn[ze]}})}}(0,Ht,sn,ze)})},Pe.legacyPromise=function Qe(Ct,Ht,sn){return Ht?Ct.then(function(ze){Ht(ze)},function(ze){sn(ze)}):Ct},Pe.buildLogLevels=function $e(Ct){return"string"==typeof Ct?{default:Ct,media:Ct,signaling:Ct,webrtc:Ct}:Ct},Pe.trackClass=function Xe(Ct,Ht){return(Ht=Ht?"Local":"")+(Ct.kind||"").replace(/\w{1}/,function(sn){return sn.toUpperCase()})+"Track"},Pe.trackPublicationClass=function Me(Ct,Ht){return(Ht=Ht?"Local":"")+(Ct.kind||"").replace(/\w{1}/,function(sn){return sn.toUpperCase()})+"TrackPublication"},Pe.valueToJSON=Ut,Pe.withJitter=function Cr(Ct,Ht){var sn=Math.random();return Ct-Ht+Math.floor(2*Ht*sn+.5)},Pe.isChromeScreenShareTrack=function Bi(Ct){return"chrome"===k.guessBrowser()&&"video"===Ct.kind&&"displaySurface"in Ct.getSettings()},Pe.isUserMediaTrack=function rr(Ct){return"string"==typeof Ct.getSettings().deviceId},Pe.waitForSometime=function Qi(Ct){return void 0===Ct&&(Ct=10),new Promise(function(Ht){return setTimeout(Ht,Ct)})},Pe.waitForEvent=function fa(Ct,Ht){return new Promise(function(sn){Ct.addEventListener(Ht,function ze(xe){Ct.removeEventListener(Ht,ze),sn(xe)})})}},3744:function(Re,Pe,$){"use strict";var fe,V=this&&this.__extends||(fe=function(we,Se){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ue){ge.__proto__=ue}||function(ge,ue){for(var pe in ue)Object.prototype.hasOwnProperty.call(ue,pe)&&(ge[pe]=ue[pe])})(we,Se)},function(we,Se){if("function"!=typeof Se&&null!==Se)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function ge(){this.constructor=we}fe(we,Se),we.prototype=null===Se?Object.create(Se):(ge.prototype=Se.prototype,new ge)}),Y=this&&this.__assign||function(){return Y=Object.assign||function(fe){for(var we,Se=1,ge=arguments.length;Se<ge;Se++)for(var ue in we=arguments[Se])Object.prototype.hasOwnProperty.call(we,ue)&&(fe[ue]=we[ue]);return fe},Y.apply(this,arguments)},se=$(9069).EventEmitter,z=$(9739).getUserAgent,L=globalThis,U=L.WebSocket?L.WebSocket:$(3332),ee=$(8701),ae=ee.hardwareDevicePublisheriPad,de=ee.hardwareDevicePublisheriPhone,he=$(9739),te=$(3948),J=function(fe){function we(Se,ge,ue,pe,Ie,je){var Le=fe.call(this)||this;return je=Object.assign({gateway:ce(pe,Ie)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:z(),WebSocket:U},je),Object.defineProperties(Le,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:he.defer()},_reconnectAttemptsLeft:{value:je.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:je.WebSocket}}),Le._readyToConnect.promise.then(function(Qe){var $e=Qe.roomSid,Xe=Qe.participantSid,Me=Le;Le.on("disconnected",function Qt(Wt){if(Me._session=null,Wt&&Me._reconnectAttemptsLeft>0)return Me.emit("reconnecting"),void function Oe(fe,we,Se,ge,ue,pe,Ie){var je=Date.now()-fe._connectTimestamp,Le=Ie.reconnectIntervalMs-je;Le>0?setTimeout(function(){q(fe,we,Se,ge,ue,pe,Ie)},Le):q(fe,we,Se,ge,ue,pe,Ie)}(Me,Se,ge,ue,$e,Xe,je);Me.removeListener("disconnected",Qt)}),q(Le,Se,ge,ue,$e,Xe,je)}).catch(function(){}),Le}return V(we,fe),we.prototype.connect=function(Se,ge){this._readyToConnect.resolve({roomSid:Se,participantSid:ge})},we.prototype._publish=function(Se){Se.session=this._session,this._ws.send(JSON.stringify(Se))},we.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},we.prototype.publish=function(Se,ge,ue){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:Se,name:ge,payload:ue,timestamp:Date.now(),type:"event",version:1}),!0)},we}(se);function q(fe,we,Se,ge,ue,pe,Ie){fe._connectTimestamp=Date.now(),fe._reconnectAttemptsLeft--,fe._ws=new Ie.WebSocket(Ie.gateway);var je=fe._ws;je.addEventListener("close",function(Le){1e3!==Le.code?fe.emit("disconnected",new Error("WebSocket Error "+Le.code+": "+Le.reason)):fe.emit("disconnected")}),je.addEventListener("message",function(Le){!function Ee(fe,we,Se){switch(we.type){case"connected":fe._session=we.session,fe._reconnectAttemptsLeft=Se.maxReconnectAttempts,fe._eventQueue.splice(0).forEach(fe._publish,fe),fe.emit("connected");break;case"error":fe._ws.close(),fe.emit("disconnected",new Error(we.message))}}(fe,JSON.parse(Le.data),Ie)}),je.addEventListener("open",function(){var Le={type:"connect",token:we,version:1};Le.publisher={name:Se,sdkVersion:ge,userAgent:Ie.userAgent,participantSid:pe,roomSid:ue},te.isIpad()?Le.publisher=Y(Y({},Le.publisher),ae):te.isIphone()&&(Le.publisher=Y(Y({},Le.publisher),de)),je.send(JSON.stringify(Le))})}function ce(fe,we){return"prod"===fe?"wss://sdkgw."+we+".twilio.com":"wss://sdkgw."+fe+"-"+we+".twilio.com"}Re.exports=J},4920:Re=>{"use strict";var Pe=function(){function $(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return $.prototype.connect=function(){},$.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},$.prototype.publish=function(){return this._connected},$}();Re.exports=Pe},6396:(Re,Pe,$)=>{"use strict";var V=$(9739).defer,Y=function(){function se(){Object.defineProperties(this,{_audio:{value:V(),writable:!0},_video:{value:V(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return se.prototype.resolveDeferred=function(z){"audio"===z?this._audio.resolve():this._video.resolve()},se.prototype.startDeferred=function(z){"audio"===z?this._audio=V():this._video=V()},se.prototype.whenResolved=function(z){return"audio"===z?this._audio.promise:this._video.promise},se}();Re.exports=new Y},1458:function(Re,Pe,$){"use strict";var L,V=this&&this.__read||function(q,ce){var Ee="function"==typeof Symbol&&q[Symbol.iterator];if(!Ee)return q;var fe,Se,Oe=Ee.call(q),we=[];try{for(;(void 0===ce||ce-- >0)&&!(fe=Oe.next()).done;)we.push(fe.value)}catch(ge){Se={error:ge}}finally{try{fe&&!fe.done&&(Ee=Oe.return)&&Ee.call(Oe)}finally{if(Se)throw Se.error}}return we},Y=this&&this.__spreadArray||function(q,ce){for(var Ee=0,Oe=ce.length,fe=q.length;Ee<Oe;Ee++,fe++)q[fe]=ce[Ee];return q},se=$(7846).getLogger,z=$(8701),H=z.DEFAULT_LOG_LEVEL,N=z.DEFAULT_LOGGER_NAME,k=$(8701).typeErrors,ee=function(){function q(ce,Ee,Oe,fe,we){if("string"!=typeof ce)throw k.INVALID_TYPE("moduleName","string");if(!Ee)throw k.REQUIRED_ARGUMENT("component");"object"!=typeof Oe&&(Oe={}),we=we||se,J(Oe),Object.defineProperties(this,{_component:{value:Ee},_logLevels:{value:Oe},_warnings:{value:new Set},_loggerName:{get:function(){var ge=fe&&"string"==typeof fe?fe:N;return this._logLevelsEqual||(ge=ge+"-"+ce),ge}},_logger:{get:function(){var ge=we(this._loggerName),ue=this._logLevels[ce]||H;return ge.setDefaultLevel(ue="off"===ue?"silent":ue),ge}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return q.getLevelByName(Oe[ce]||H)}},name:{get:Ee.toString.bind(Ee)}})}return q.getLevelByName=function(ce){return isNaN(ce)?(te(ce=ce.toUpperCase()),q[ce]):parseInt(ce,10)},q.prototype.createLog=function(ce,Ee){var Oe=this._loggerName;return this._logLevelsEqual||(Oe=Oe.substring(0,Oe.lastIndexOf("-"))),new q(ce,Ee,this._logLevels,Oe)},q.prototype.setLevels=function(ce){return J(ce),Object.assign(this._logLevels,ce),this},q.prototype.log=function(ce,Ee){var Oe=q._levels[ce];if(!Oe)throw k.INVALID_VALUE("logLevel",de);Oe=Oe.toLowerCase();var fe=[(new Date).toISOString(),Oe,this.name];return(this._logger[Oe]||function(){}).apply(void 0,Y([],V(fe.concat(Ee)))),this},q.prototype.debug=function(){return this.log(q.DEBUG,[].slice.call(arguments))},q.prototype.deprecated=function(ce){var Ee=function U(q){if((L=L||new Map).has(q))return L.get(q);var ce=new Set;return L.set(q,ce),ce}(this._component.constructor);return Ee.has(ce)?this:(Ee.add(ce),this.warn(ce))},q.prototype.info=function(){return this.log(q.INFO,[].slice.call(arguments))},q.prototype.warn=function(){return this.log(q.WARN,[].slice.call(arguments))},q.prototype.warnOnce=function(ce){return this._warnings.has(ce)?this:(this._warnings.add(ce),this.warn(ce))},q.prototype.error=function(){return this.log(q.ERROR,[].slice.call(arguments))},q.prototype.throw=function(ce,Ee){throw ce.clone&&(ce=ce.clone(Ee)),this.log(q.ERROR,ce),ce},q}();Object.defineProperties(ee,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var ae={},de=[],he=ee._levels.map(function(q,ce){return ae[q]=!0,de.push(ce),q});function te(q){if(!(q in ae))throw k.INVALID_VALUE("level",he)}function J(q){Object.keys(q).forEach(function(ce){te(q[ce].toUpperCase())})}Re.exports=ee},8218:Re=>{"use strict";var Pe=function(){function $(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return $.prototype.get=function(){var V=this._samples;return(V[1].numerator-V[0].numerator)/(V[1].denominator-V[0].denominator||1/0)},$.prototype.putSample=function(V,Y){var se=this._samples;se.shift(),se.push({denominator:Y,numerator:V})},$}();Re.exports=Pe},2643:Re=>{"use strict";var Pe=function(){function $(V,Y){var se=this,z=(Y=Object.assign({navigator,window},Y)).navigator,H=z.connection||{type:null},N=H.type,k=H.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var ae=N!==se.type&&se.isOnline;N=se.type,ae&&V()}},_target:{value:H}}:{_events:{value:["online"]},_listener:{value:V},_target:{value:Y.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof z.onLine||z.onLine}},type:{enumerable:!0,get:function(){return H.type||null}},_listener:k._listener,_events:k._events,_target:k._target})}return $.prototype.start=function(){var V=this;this._events.forEach(function(Y){V._target.addEventListener(Y,V._listener)})},$.prototype.stop=function(){var V=this;this._events.forEach(function(Y){V._target.removeEventListener(Y,V._listener)})},$}();Re.exports=Pe},5318:function(Re){"use strict";var se,Pe=this&&this.__extends||(se=function(z,H){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,k){N.__proto__=k}||function(N,k){for(var L in k)Object.prototype.hasOwnProperty.call(k,L)&&(N[L]=k[L])})(z,H)},function(z,H){if("function"!=typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function N(){this.constructor=z}se(z,H),z.prototype=null===H?Object.create(H):(N.prototype=H.prototype,new N)}),$=function(){function se(z){Object.defineProperties(this,{_callback:{value:z}})}return se.prototype.observe=function(){},se.prototype.unobserve=function(){},se.prototype.makeVisible=function(z){var H=this._makeFakeEntry(z,!0);this._callback([H])},se.prototype.makeInvisible=function(z){var H=this._makeFakeEntry(z,!1);this._callback([H])},se.prototype._makeFakeEntry=function(z,H){return{target:z,isIntersecting:H}},se}(),V=function(se){function z(){return null!==se&&se.apply(this,arguments)||this}return Pe(z,se),z}($),Y=function(se){function z(){return null!==se&&se.apply(this,arguments)||this}return Pe(z,se),z.prototype.resize=function(H){var N=this._makeFakeEntry(H,!0);this._callback([N])},z}($);Re.exports={NullIntersectionObserver:V,NullResizeObserver:Y,NullObserver:$}},3898:function(Re,Pe,$){"use strict";var V=this&&this.__read||function(Le,Qe){var $e="function"==typeof Symbol&&Le[Symbol.iterator];if(!$e)return Le;var Me,Wt,Xe=$e.call(Le),Qt=[];try{for(;(void 0===Qe||Qe-- >0)&&!(Me=Xe.next()).done;)Qt.push(Me.value)}catch(St){Wt={error:St}}finally{try{Me&&!Me.done&&($e=Xe.return)&&$e.call(Xe)}finally{if(Wt)throw Wt.error}}return Qt},Y=$(9739),se=Y.difference,z=Y.flatMap,H=$(570),N={0:"PCMU",8:"PCMA"};function k(Le){return Array.from(U(Le)).reduce(function(Qe,$e){var Xe=$e[0],Me=$e[1],Qt=Qe.get(Me)||[];return Qe.set(Me,Qt.concat(Xe))},new Map)}function L(Le){return de(Le).reduce(function(Qe,$e){var Xe=ae($e);return Xe?Qe.set(Xe,$e):Qe},new Map)}function U(Le){return he(Le).reduce(function(Qe,$e){var Xe=new RegExp("a=rtpmap:"+$e+" ([^/]+)"),Me=Le.match(Xe),Qt=Me?Me[1].toLowerCase():N[$e]?N[$e].toLowerCase():"";return Qe.set($e,Qt)},new Map)}function ee(Le,Qe){var $e=new RegExp("^a=fmtp:"+Le+" (.+)$","m"),Xe=Qe.match($e);return Xe&&Xe[1].split(";").reduce(function(Me,Qt){var Wt=V(Qt.split("="),2),Ke=Wt[1];return Me[Wt[0]]=isNaN(Ke)?Ke:parseInt(Ke,10),Me},{})}function ae(Le){var Qe=Le.match(/^a=mid:(.+)$/m);return Qe&&Qe[1]}function de(Le,Qe,$e){return Le.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(Xe){return"m="+Xe}).filter(function(Xe){var Me=new RegExp("m="+(Qe||".*"),"gm"),Qt=new RegExp("a="+($e||".*"),"gm");return Me.test(Xe)&&Qt.test(Xe)})}function he(Le){var $e=Le.split("\r\n")[0].match(/([0-9]+)/g);return $e?$e.slice(1).map(function(Xe){return parseInt(Xe,10)}):[]}function J(Le,Qe){var $e=Qe.split("\r\n"),Xe=$e[0],Me=$e.slice(1);return[Xe=Xe.replace(/([0-9]+\s?)+$/,Le.join(" "))].concat(Me).join("\r\n")}function ge(Le,Qe){var $e=de(Le);return[Le.split("\r\nm=")[0]].concat($e.map(function(Me){if(!/^m=(audio|video)/.test(Me))return Me;var Qt=ae(Me);if(!Qt)return Me;var Wt=Qe.get(Qt);if(!Wt)return Me;var St=(Me.match(/^a=msid:(.+)$/m)||[])[1];if(!St)return Me;var Ke=V(St.split(" "),2),Fe=Ke[0],We=Ke[1],De=new RegExp("msid:"+Fe+(We?" "+We:"")+"$","gm");return Me.replace(De,"msid:"+Fe+" "+Wt)})).join("\r\n")}function Ie(Le,Qe){return"a=fmtp:"+Le+" "+Object.entries(Qe).map(function(Xe){var Me=V(Xe,2);return Me[0]+"="+Me[1]}).join(";")}Pe.addOrRewriteNewTrackIds=function Se(Le,Qe,$e){var Xe=Array.from($e).reduce(function(Me,Qt){var Wt=V(Qt,2),Ke=Wt[1];return de(Le,Wt[0],"send(only|recv)").map(ae).filter(function(De){return!Qe.has(De)}).forEach(function(De,et){return Me.set(De,Ke[et])}),Me},new Map);return ge(Le,Xe)},Pe.addOrRewriteTrackIds=ge,Pe.createCodecMapForMediaSection=k,Pe.createPtToCodecName=U,Pe.disableRtx=function pe(Le){var Qe=de(Le);return[Le.split("\r\nm=")[0]].concat(Qe.map(function(Xe){if(!/^m=video/.test(Xe))return Xe;var Qt=k(Xe).get("rtx");if(!Qt)return Xe;var Wt=new Set(he(Xe));Qt.forEach(function(We){return Wt.delete(We)});var St=Xe.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),Ke=St&&St[1],Fe=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(Ke?[new RegExp("^a=ssrc:"+Ke+" .+$")]:[]);return Xe=Xe.split("\r\n").filter(function(We){return Fe.every(function(De){return!De.test(We)})}).join("\r\n"),J(Array.from(Wt),Xe)})).join("\r\n")},Pe.enableDtxForOpus=function je(Le,Qe){var $e=de(Le),Xe=Le.split("\r\nm=")[0];return Qe=Qe||$e.filter(function(Me){return/^m=audio/.test(Me)}).map(ae),[Xe].concat($e.map(function(Me){if(!/^m=audio/.test(Me))return Me;var Wt=k(Me).get("opus");if(!Wt)return Me;var St=ee(Wt,Me);if(!St)return Me;var Ke=Ie(Wt,St),Fe=new RegExp(Ke),We=ae(Me);Qe.includes(We)?St.usedtx=1:delete St.usedtx;var De=Ie(Wt,St);return Me.replace(Fe,De)})).join("\r\n")},Pe.filterLocalCodecs=function fe(Le,Qe){var $e=de(Le),Xe=Le.split("\r\nm=")[0],Me=L(Qe);return[Xe].concat($e.map(function(Qt){return function Oe(Le,Qe,$e){if(!/^m=(audio|video)/.test(Le))return Le;var Xe=ae(Le),Me=Xe&&Qe.get(Xe);if(!Me)return Le;var Qt=U(Me),Wt=k(Le),St=z(Array.from(Qt),function(De){var et=V(De,2),Ut=et[0],Zt=et[1];return"rtx"===Zt||$e.includes(Zt)?[]:function Ee(Le,Qe,$e,Xe,Me){var Qt=$e.get(Le)||[];if(Qt.length<=1)return Qt;var Wt=ee(Qe,Me);if(!Wt)return Qt;var St=Qt.find(function(Ke){var Fe=ee(Ke,Xe);return Fe&&Object.keys(Wt).every(function(We){return Wt[We]===Fe[We]})});return"number"==typeof St?[St]:Qt}(Zt,Ut,Wt,Le,Me)}),Ke=Wt.get("rtx")||[];St=St.concat(Ke.filter(function(De){var et=ee(De,Le);return et&&St.includes(et.apt)}));var Fe=Le.split("\r\n").filter(function(De){var et=De.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Ut=et&&et[2];return!et||Ut&&St.includes(parseInt(Ut,10))});return J(he(Le).filter(function(De){return St.includes(De)}),Fe.join("\r\n"))}(Qt,Me,[])})).join("\r\n")},Pe.getMediaSections=de,Pe.removeSSRCAttributes=function ue(Le,Qe){return Le.split("\r\n").filter(function($e){return!Qe.find(function(Xe){return new RegExp("a=ssrc:.*"+Xe+":","g").test($e)})}).join("\r\n")},Pe.revertSimulcast=function we(Le,Qe,$e,Xe){void 0===Xe&&(Xe=!1);var Me=L($e),Qt=L(Qe),Wt=de(Le);return[Le.split("\r\nm=")[0]].concat(Wt.map(function(Ke){if(Ke=Ke.replace(/\r\n$/,""),!/^m=video/.test(Ke))return Ke;var Fe=Ke.match(/^a=mid:(.+)$/m),We=Fe&&Fe[1];if(!We)return Ke;var De=Me.get(We),et=U(De),Ut=he(De),Zt=Ut.length&&"vp8"===et.get(Ut[0]);return Xe||!Zt?Qt.get(We).replace(/\r\n$/,""):Ke})).concat("").join("\r\n")},Pe.setCodecPreferences=function q(Le,Qe,$e){var Xe=de(Le);return[Le.split("\r\nm=")[0]].concat(Xe.map(function(Qt){if(!/^m=(audio|video)/.test(Qt))return Qt;var Wt=Qt.match(/^m=(audio|video)/)[1],St=k(Qt),Fe=function te(Le,Qe){Qe=Qe.map(function(Qt){return Qt.codec.toLowerCase()});var $e=z(Qe,function(Qt){return Le.get(Qt)||[]}),Xe=se(Array.from(Le.keys()),Qe),Me=z(Xe,function(Qt){return Le.get(Qt)});return $e.concat(Me)}(St,"audio"===Wt?Qe:$e),We=J(Fe,Qt),De=St.get("pcma")||[],et=St.get("pcmu")||[];return("audio"===Wt?new Set(De.concat(et)):new Set).has(Fe[0])?We.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):We})).join("\r\n")},Pe.setSimulcast=function ce(Le,Qe){var $e=de(Le);return[Le.split("\r\nm=")[0]].concat($e.map(function(Me){if(Me=Me.replace(/\r\n$/,""),!/^m=video/.test(Me))return Me;var Qt=k(Me),Wt=he(Me),St=new Set(Qt.get("vp8")||[]);return Wt.some(function(Fe){return St.has(Fe)})?H(Me,Qe):Me})).concat("").join("\r\n")}},3073:(Re,Pe,$)=>{"use strict";var V=$(1647).RTCSessionDescription,Y=$(3898),se=Y.createPtToCodecName,z=Y.getMediaSections;function k(J){var q=se(J);J=function L(J,q){return Array.from(q.keys()).reduce(function(ce,Ee){var Oe=new RegExp("^a=rtpmap:"+Ee+" rtx.+$","gm");return(ce.match(Oe)||[]).slice("rtx"===q.get(Ee)?1:0).reduce(function(fe,we){var Se=new RegExp("\r\n"+we),ge=new RegExp("\r\na=fmtp:"+Ee+" apt=[0-9]+");return fe.replace(Se,"").replace(ge,"")},ce)},J)}(J,q);var ce=function U(J){var q=new Map;return J.forEach(function(ce,Ee){var Oe=q.get(ce)||new Set;return q.set(ce,Oe.add(Ee))}),q}(q),Ee=ce.get("rtx")||new Set,Oe=new Set,fe=function ee(J,q,ce,Ee){return Array.from(ce).reduce(function(Oe,fe){var we=new RegExp("a=fmtp:"+fe+" apt=(\\d+)"),Se=J.match(we);if(!Se)return Ee.add(fe),Oe;var ge=Number.parseInt(Se[1]);return q.has(ge)?"rtx"===q.get(ge)?(Ee.add(fe),Oe):Oe.set(fe,ge):(Ee.add(fe),Oe)},new Map)}(J,q,Ee,Oe),we=function ae(J,q){var ce=Array.from(J).reduce(function(Ee,Oe){var fe=Oe[0],we=Oe[1],Se=Ee.get(we)||new Set;return Ee.set(we,Se.add(fe))},new Map);return Array.from(ce).reduce(function(Ee,Oe){var fe=Oe[0],we=Array.from(Oe[1]);return we.length>1?(we.forEach(function(Se){q.add(Se)}),Ee):Ee.set(fe,we[0])},new Map)}(fe,Oe),Se=Array.from(Oe);return["h264","vp8","vp9"].reduce(function(pe,Ie){var je=ce.get(Ie)||new Set;return Array.from(je).reduce(function(Le,Qe){return we.has(Qe)?Le:Le.add(Qe)},pe)},new Set).forEach(function(pe){if(Se.length){var Ie=Se.shift();J=function te(J,q,ce){return J.endsWith("\r\n")?J+"a=fmtp:"+q+" apt="+ce+"\r\n":J+"\r\na=fmtp:"+q+" apt="+ce}(J=de(J,Ie),Ie,pe)}}),Se.forEach(function(pe){J=function he(J,q){var ce=new RegExp("a=rtpmap:"+q+".*\r\n","gm");return J.replace(ce,"")}(J=de(J,pe),pe)}),J}function de(J,q){var ce=new RegExp("a=fmtp:"+q+".*\r\n","gm");return J.replace(ce,"")}Re.exports=function H(J){var q={type:J.type};return"rollback"!==J.type&&(q.sdp=function N(J){var q=z(J);return[J.split("\r\nm=")[0]].concat(q.map(k)).join("\r\n")}(J.sdp)),new V(q)}},570:function(Re,Pe,$){"use strict";var V=this&&this.__read||function(te,J){var q="function"==typeof Symbol&&te[Symbol.iterator];if(!q)return te;var Ee,fe,ce=q.call(te),Oe=[];try{for(;(void 0===J||J-- >0)&&!(Ee=ce.next()).done;)Oe.push(Ee.value)}catch(we){fe={error:we}}finally{try{Ee&&!Ee.done&&(q=ce.return)&&q.call(ce)}finally{if(fe)throw fe.error}}return Oe},Y=$(9739),se=Y.difference,z=Y.flatMap;function H(){return String(Math.floor(4294967295*Math.random()))}var N=function(){function te(J,q,ce){Object.defineProperties(this,{cName:{enumerable:!0,value:ce},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:q},trackId:{enumerable:!0,value:J}})}return te.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var J=[H(),H()];J.forEach(function(q){this.primarySSRCs.add(q)},this),this.rtxPairs.size&&J.forEach(function(q){this.rtxPairs.set(H(),q)},this)}},te.prototype.addSSRC=function(J,q,ce){q?this.rtxPairs.set(J,q):this.primarySSRCs.add(J),this.isSimulcastEnabled=this.isSimulcastEnabled||ce},te.prototype.toSdpLines=function(J){var q=this,ce=J?[]:Array.from(this.rtxPairs.entries()).map(function(ge){return ge.reverse()}),Ee=Array.from(this.primarySSRCs.values()),Oe=ce.length?z(ce):Ee,fe=z(Oe,function(ge){return["a=ssrc:"+ge+" cname:"+q.cName,"a=ssrc:"+ge+" msid:"+q.streamId+" "+q.trackId]}),we=ce.map(function(ge){return"a=ssrc-group:FID "+ge.join(" ")}),Se=["a=ssrc-group:SIM "+Ee.join(" ")];return we.concat(fe).concat(Se)},te}();function k(te,J){return(te.match(new RegExp(J,"gm"))||[]).map(function(ce){return(ce.match(new RegExp(J))||[]).slice(1)})}Re.exports=function he(te,J){var q=function de(te){var J=function L(te){return new Set(z(k(te,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(te),q=function ee(te){return new Map(k(te,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(q){return q.reverse()}))}(te),ce=function ae(te){var J=V(z(k(te,"^a=msid:(.+) (.+)$")),2),q=J[0],ce=J[1];return z(k(te,"^a=ssrc:(.+) cname:.+$")).map(function(Oe){return[Oe,q,ce]})}(te);return ce.reduce(function(Ee,Oe){var fe=Oe[0],we=Oe[1],Se=Oe[2],ge=Ee.get(Se)||new N(Se,we,function U(te,J,q){return te.match(new RegExp("a=ssrc:"+J+" "+q+":(.+)"))[1]}(te,fe,"cname")),ue=q.get(fe)||null;return ge.addSSRC(fe,ue,J.has(fe)),Ee.set(Se,ge)},new Map)}(te),ce=Array.from(q.keys()),Ee=Array.from(J.keys()),Oe=se(ce,Ee),fe=se(Ee,ce);z(Oe,function(Le){return q.get(Le)}).forEach(function(Le){Le.addSimulcastSSRCs(),J.set(Le.trackId,Le)}),Ee=Array.from(J.keys());var Se=se(Ee,fe),ge=z(Se,function(Le){return J.get(Le)}),ue=!te.match(/a=rtpmap:[0-9]+ rtx/),pe=z(ge,function(Le){return Le.toSdpLines(ue)}),Ie=z(new Set(te.split("\r\n").concat(pe))),je="a=x-google-flag:conference";return te.match(je)||Ie.push(je),Ie.join("\r\n")}},1057:(Re,Pe,$)=>{"use strict";var V=$(3898).getMediaSections,Y=function(){function se(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return se.prototype.match=function(z){return this._midsToTrackIds.get(z.transceiver.mid)||null},se.prototype.update=function(z){var H=V(z,"(audio|video)");this._midsToTrackIds=H.reduce(function(N,k){var L=k.match(/^a=mid:(.+)$/m)||[],U=k.match(/^a=msid:.+ (.+)$/m)||[],ee=L[1],ae=U[1];return ee&&ae?N.set(ee,ae):N},this._midsToTrackIds)},se}();Re.exports=Y},8066:(Re,Pe)=>{var $="1234567890abcdef";function Y(se){for(var z="",H=0;H<32;H++)z+=$.charAt(Math.floor(Math.random()*$.length));return""+se+z}Pe.sessionSID=Y("SS"),Pe.createSID=Y},8592:(Re,Pe,$)=>{"use strict";var V=$(7627),Y=V.guessBrowser,se=V.support,z=$(3948),H=z.isAndroid,N=z.isMobile,k=z.isNonChromiumEdge,L=z.rebrandedChromeBrowser,U=z.mobileWebKitBrowser,ee=["crios","edg","edge","electron","headlesschrome"],ae=["chrome","firefox"],de=["chrome","safari"],he=[];Re.exports=function te(){var J=Y();if(!J)return!1;var q=L(J),ce=U(J),Ee=H()?ae:de;return!!J&&se()&&(!q||ee.includes(q))&&!k(J)&&(!ce||he.includes(ce))&&(!N()||Ee.includes(J))}},6543:Re=>{"use strict";var Pe=function(){function $(V,Y,se){void 0===se&&(se=!0),Object.defineProperties(this,{_delay:{value:Y,writable:!0},_fn:{value:V},_timeout:{value:null,writable:!0}}),se&&this.start()}return Object.defineProperty($.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),$.prototype.setDelay=function(V){this._delay=V},$.prototype.start=function(){var V=this;this.isSet||(this._timeout=setTimeout(function(){var Y=V._fn;V.clear(),Y()},this._delay))},$.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},$.prototype.reset=function(){this.clear(),this.start()},$}();Re.exports=Pe},8380:function(Re,Pe,$){"use strict";var ze,V=this&&this.__extends||(ze=function(xe,ut){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Fn,fn){Fn.__proto__=fn}||function(Fn,fn){for(var ro in fn)Object.prototype.hasOwnProperty.call(fn,ro)&&(Fn[ro]=fn[ro])})(xe,ut)},function(xe,ut){if("function"!=typeof ut&&null!==ut)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function Fn(){this.constructor=xe}ze(xe,ut),xe.prototype=null===ut?Object.create(ut):(Fn.prototype=ut.prototype,new Fn)}),Y=$(9318),se={};Pe.createTwilioError=function(xe,ut){return ut="string"==typeof ut&&ut?ut:"Unknown error",se[xe="number"==typeof xe?xe:0]?new se[xe]:new Y(xe,ut)};var z=function(ze){function xe(){var ut=ze.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenInvalidError=z,Object.defineProperty(se,20101,{value:z});var H=function(ze){function xe(){var ut=ze.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenHeaderInvalidError=H,Object.defineProperty(se,20102,{value:H});var N=function(ze){function xe(){var ut=ze.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenIssuerInvalidError=N,Object.defineProperty(se,20103,{value:N});var k=function(ze){function xe(){var ut=ze.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenExpiredError=k,Object.defineProperty(se,20104,{value:k});var L=function(ze){function xe(){var ut=ze.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenNotYetValidError=L,Object.defineProperty(se,20105,{value:L});var U=function(ze){function xe(){var ut=ze.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenGrantsInvalidError=U,Object.defineProperty(se,20106,{value:U});var ee=function(ze){function xe(){var ut=ze.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.AccessTokenSignatureInvalidError=ee,Object.defineProperty(se,20107,{value:ee});var ae=function(ze){function xe(){var ut=ze.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingConnectionError=ae,Object.defineProperty(se,53e3,{value:ae});var de=function(ze){function xe(){var ut=ze.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingConnectionDisconnectedError=de,Object.defineProperty(se,53001,{value:de});var he=function(ze){function xe(){var ut=ze.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingConnectionTimeoutError=he,Object.defineProperty(se,53002,{value:he});var te=function(ze){function xe(){var ut=ze.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingIncomingMessageInvalidError=te,Object.defineProperty(se,53003,{value:te});var J=function(ze){function xe(){var ut=ze.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingOutgoingMessageInvalidError=J,Object.defineProperty(se,53004,{value:J});var q=function(ze){function xe(){var ut=ze.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.SignalingServerBusyError=q,Object.defineProperty(se,53006,{value:q});var ce=function(ze){function xe(){var ut=ze.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomNameInvalidError=ce,Object.defineProperty(se,53100,{value:ce});var Ee=function(ze){function xe(){var ut=ze.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomNameTooLongError=Ee,Object.defineProperty(se,53101,{value:Ee});var Oe=function(ze){function xe(){var ut=ze.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomNameCharsInvalidError=Oe,Object.defineProperty(se,53102,{value:Oe});var fe=function(ze){function xe(){var ut=ze.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomCreateFailedError=fe,Object.defineProperty(se,53103,{value:fe});var we=function(ze){function xe(){var ut=ze.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomConnectFailedError=we,Object.defineProperty(se,53104,{value:we});var Se=function(ze){function xe(){var ut=ze.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomMaxParticipantsExceededError=Se,Object.defineProperty(se,53105,{value:Se});var ge=function(ze){function xe(){var ut=ze.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomNotFoundError=ge,Object.defineProperty(se,53106,{value:ge});var ue=function(ze){function xe(){var ut=ze.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomMaxParticipantsOutOfRangeError=ue,Object.defineProperty(se,53107,{value:ue});var pe=function(ze){function xe(){var ut=ze.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomTypeInvalidError=pe,Object.defineProperty(se,53108,{value:pe});var Ie=function(ze){function xe(){var ut=ze.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomTimeoutOutOfRangeError=Ie,Object.defineProperty(se,53109,{value:Ie});var je=function(ze){function xe(){var ut=ze.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomStatusCallbackMethodInvalidError=je,Object.defineProperty(se,53110,{value:je});var Le=function(ze){function xe(){var ut=ze.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomStatusCallbackInvalidError=Le,Object.defineProperty(se,53111,{value:Le});var Qe=function(ze){function xe(){var ut=ze.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomStatusInvalidError=Qe,Object.defineProperty(se,53112,{value:Qe});var $e=function(ze){function xe(){var ut=ze.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomRoomExistsError=$e,Object.defineProperty(se,53113,{value:$e});var Xe=function(ze){function xe(){var ut=ze.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomInvalidParametersError=Xe,Object.defineProperty(se,53114,{value:Xe});var Me=function(ze){function xe(){var ut=ze.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomMediaRegionInvalidError=Me,Object.defineProperty(se,53115,{value:Me});var Qt=function(ze){function xe(){var ut=ze.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomMediaRegionUnavailableError=Qt,Object.defineProperty(se,53116,{value:Qt});var Wt=function(ze){function xe(){var ut=ze.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomSubscriptionOperationNotSupportedError=Wt,Object.defineProperty(se,53117,{value:Wt});var St=function(ze){function xe(){var ut=ze.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomCompletedError=St,Object.defineProperty(se,53118,{value:St});var Ke=function(ze){function xe(){var ut=ze.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomAudioOnlyFlagNotSupportedError=Ke,Object.defineProperty(se,53124,{value:Ke});var Fe=function(ze){function xe(){var ut=ze.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.RoomTrackKindNotSupportedError=Fe,Object.defineProperty(se,53125,{value:Fe});var We=function(ze){function xe(){var ut=ze.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantIdentityInvalidError=We,Object.defineProperty(se,53200,{value:We});var De=function(ze){function xe(){var ut=ze.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantIdentityTooLongError=De,Object.defineProperty(se,53201,{value:De});var et=function(ze){function xe(){var ut=ze.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantIdentityCharsInvalidError=et,Object.defineProperty(se,53202,{value:et});var Ut=function(ze){function xe(){var ut=ze.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantMaxTracksExceededError=Ut,Object.defineProperty(se,53203,{value:Ut});var Zt=function(ze){function xe(){var ut=ze.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantNotFoundError=Zt,Object.defineProperty(se,53204,{value:Zt});var Mt=function(ze){function xe(){var ut=ze.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ParticipantDuplicateIdentityError=Mt,Object.defineProperty(se,53205,{value:Mt});var tn=function(ze){function xe(){var ut=ze.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackInvalidError=tn,Object.defineProperty(se,53300,{value:tn});var Jn=function(ze){function xe(){var ut=ze.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackNameInvalidError=Jn,Object.defineProperty(se,53301,{value:Jn});var qt=function(ze){function xe(){var ut=ze.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackNameTooLongError=qt,Object.defineProperty(se,53302,{value:qt});var Mr=function(ze){function xe(){var ut=ze.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackNameCharsInvalidError=Mr,Object.defineProperty(se,53303,{value:Mr});var xr=function(ze){function xe(){var ut=ze.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackNameIsDuplicatedError=xr,Object.defineProperty(se,53304,{value:xr});var wr=function(ze){function xe(){var ut=ze.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.TrackServerTrackCapacityReachedError=wr,Object.defineProperty(se,53305,{value:wr});var Cr=function(ze){function xe(){var ut=ze.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaClientLocalDescFailedError=Cr,Object.defineProperty(se,53400,{value:Cr});var Sr=function(ze){function xe(){var ut=ze.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaServerLocalDescFailedError=Sr,Object.defineProperty(se,53401,{value:Sr});var Bi=function(ze){function xe(){var ut=ze.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaClientRemoteDescFailedError=Bi,Object.defineProperty(se,53402,{value:Bi});var rr=function(ze){function xe(){var ut=ze.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaServerRemoteDescFailedError=rr,Object.defineProperty(se,53403,{value:rr});var Qi=function(ze){function xe(){var ut=ze.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaNoSupportedCodecError=Qi,Object.defineProperty(se,53404,{value:Qi});var fa=function(ze){function xe(){var ut=ze.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaConnectionError=fa,Object.defineProperty(se,53405,{value:fa});var Ct=function(ze){function xe(){var ut=ze.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.MediaDTLSTransportFailedError=Ct,Object.defineProperty(se,53407,{value:Ct});var Ht=function(ze){function xe(){var ut=ze.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ConfigurationAcquireFailedError=Ht,Object.defineProperty(se,53500,{value:Ht});var sn=function(ze){function xe(){var ut=ze.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(ut,xe.prototype),ut}return V(xe,ze),xe}(Y);Pe.ConfigurationAcquireTurnFailedError=sn,Object.defineProperty(se,53501,{value:sn})},9318:function(Re){"use strict";var se,Pe=this&&this.__extends||(se=function(z,H){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,k){N.__proto__=k}||function(N,k){for(var L in k)Object.prototype.hasOwnProperty.call(k,L)&&(N[L]=k[L])})(z,H)},function(z,H){if("function"!=typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function N(){this.constructor=z}se(z,H),z.prototype=null===H?Object.create(H):(N.prototype=H.prototype,new N)}),$=this&&this.__read||function(se,z){var H="function"==typeof Symbol&&se[Symbol.iterator];if(!H)return se;var k,U,N=H.call(se),L=[];try{for(;(void 0===z||z-- >0)&&!(k=N.next()).done;)L.push(k.value)}catch(ee){U={error:ee}}finally{try{k&&!k.done&&(H=N.return)&&H.call(N)}finally{if(U)throw U.error}}return L},V=this&&this.__spreadArray||function(se,z){for(var H=0,N=z.length,k=se.length;H<N;H++,k++)se[k]=z[H];return se},Y=function(se){function z(H){var N=this,k=[].slice.call(arguments,1);N=se.apply(this,V([],$(k)))||this,Object.setPrototypeOf(N,z.prototype);var L=Error.apply(N,k);return L.name="TwilioError",Object.defineProperty(N,"code",{value:H,enumerable:!0}),Object.getOwnPropertyNames(L).forEach(function(U){Object.defineProperty(this,U,{value:L[U],enumerable:!0})},N),N}return Pe(z,se),z.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},z}(Error);Re.exports=Y},1501:(Re,Pe,$)=>{"use strict";var Y=$(9739).isNonArrayObject,se=$(8701),z=se.typeErrors,H=se.clientTrackSwitchOffControl,N=se.videoContentPreferencesMode,k=se.subscriptionMode,L=se.trackPriority,U=se.trackSwitchOffMode;function de(te,J,q){return void 0===q&&(q=[]),typeof te>"u"?null:null!==te&&Y(te)?q.reduce(function(ce,Ee){var Oe=Ee.prop,fe=Ee.type,we=Ee.values;if(ce||!(Oe in te))return ce;var Se=te[Oe];return fe&&typeof Se!==fe||"number"===fe&&isNaN(Se)?z.INVALID_TYPE(J+"."+Oe,fe):Array.isArray(we)&&!we.includes(Se)?z.INVALID_VALUE(J+"."+Oe,we):ce},null):z.INVALID_TYPE(J,"object")}Pe.kG=function ee(te){var J=de(te,"options.bandwidthProfile");return!te||J||(J=de(te.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(N)},{prop:"dominantSpeakerPriority",values:Object.values(L)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(k)},{prop:"clientTrackSwitchOffControl",values:Object.values(H)},{prop:"trackSwitchOffMode",values:Object.values(U)}]))?J:te.video?"maxTracks"in te.video&&"clientTrackSwitchOffControl"in te.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in te.video&&"contentPreferencesMode"in te.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function he(te){var J="options.bandwidthProfile.video.renderDimensions",q=de(te,J);return te?q||Object.values(L).reduce(function(ce,Ee){return ce||de(te[Ee],J+"."+Ee,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):q}(te.video.renderDimensions):null},Pe.Wv=function ae(te,J){if(!(te instanceof J.LocalAudioTrack||te instanceof J.LocalDataTrack||te instanceof J.LocalVideoTrack||te instanceof J.MediaStreamTrack))throw z.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:Re=>{Re.exports=function($,V){if($&&V)if($.super_=V,"function"==typeof Object.create)$.prototype=Object.create(V.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}});else{var Y=function se(){};Y.prototype=V.prototype,$.prototype=new Y,$.prototype.constructor=$}}},7846:Re=>{var Pe=function(){},$="undefined",V=typeof window!==$&&typeof window.navigator!==$&&/Trident\/|MSIE /.test(window.navigator.userAgent),Y=["trace","debug","info","warn","error"];function se(he,te){var J=he[te];if("function"==typeof J.bind)return J.bind(he);try{return Function.prototype.bind.call(J,he)}catch{return function(){return Function.prototype.apply.apply(J,[he,arguments])}}}function z(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function H(he){return"debug"===he&&(he="log"),typeof console!==$&&("trace"===he&&V?z:void 0!==console[he]?se(console,he):void 0!==console.log?se(console,"log"):Pe)}function N(he,te){for(var J=0;J<Y.length;J++){var q=Y[J];this[q]=J<he?Pe:this.methodFactory(q,he,te)}this.log=this.debug}function k(he,te,J){return function(){typeof console!==$&&(N.call(this,te,J),this[he].apply(this,arguments))}}function L(he,te,J){return H(he)||k.apply(this,arguments)}function U(he,te,J){var ce,q=this,Ee="loglevel";function fe(){var Se;if(typeof window!==$&&Ee){try{Se=window.localStorage[Ee]}catch{}if(typeof Se===$)try{var ge=window.document.cookie,ue=ge.indexOf(encodeURIComponent(Ee)+"=");-1!==ue&&(Se=/^([^;]+)/.exec(ge.slice(ue))[1])}catch{}return void 0===q.levels[Se]&&(Se=void 0),Se}}"string"==typeof he?Ee+=":"+he:"symbol"==typeof he&&(Ee=void 0),q.name=he,q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},q.methodFactory=J||L,q.getLevel=function(){return ce},q.setLevel=function(Se,ge){if("string"==typeof Se&&void 0!==q.levels[Se.toUpperCase()]&&(Se=q.levels[Se.toUpperCase()]),!("number"==typeof Se&&Se>=0&&Se<=q.levels.SILENT))throw"log.setLevel() called with invalid level: "+Se;if(ce=Se,!1!==ge&&function Oe(Se){var ge=(Y[Se]||"silent").toUpperCase();if(typeof window!==$&&Ee){try{return void(window.localStorage[Ee]=ge)}catch{}try{window.document.cookie=encodeURIComponent(Ee)+"="+ge+";"}catch{}}}(Se),N.call(q,Se,he),typeof console===$&&Se<q.levels.SILENT)return"No console available for logging"},q.setDefaultLevel=function(Se){fe()||q.setLevel(Se,!1)},q.enableAll=function(Se){q.setLevel(q.levels.TRACE,Se)},q.disableAll=function(Se){q.setLevel(q.levels.SILENT,Se)};var we=fe();null==we&&(we=te??"WARN"),q.setLevel(we,!1)}var ee=new U,ae={};ee.getLogger=function(te){if("symbol"!=typeof te&&"string"!=typeof te||""===te)throw new TypeError("You must supply a name when creating a logger.");var J=ae[te];return J||(J=ae[te]=new U(te,ee.getLevel(),ee.methodFactory)),J};var de=typeof window!==$?window.log:void 0;ee.noConflict=function(){return typeof window!==$&&window.log===ee&&(window.log=de),ee},ee.getLoggers=function(){return ae},ee.default=ee,Re.exports=ee},7708:Re=>{"use strict";var Pe=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,$=function(){function V(Y){Y=Object.assign({AudioContext:Pe},Y),Object.defineProperties(this,{_AudioContext:{value:Y.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:V}})}return V.prototype.getOrCreate=function(Y){if(!this._holders.has(Y)&&(this._holders.add(Y),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},V.prototype.release=function(Y){this._holders.has(Y)&&(this._holders.delete(Y),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},V}();Re.exports=new $},4687:Re=>{"use strict";Re.exports=function $(V,Y,se){se="number"==typeof se?se:250;var z=V.createMediaStreamSource(Y),H=V.createAnalyser();H.fftSize=2048,z.connect(H);var N=new Uint8Array(H.fftSize),k=!1;return setTimeout(function(){k=!0},se),function L(){return k?Promise.resolve(!0):(H.getByteTimeDomainData(N),N.some(function(U){return 128!==U&&0!==U})?Promise.resolve(!1):function Pe(V){return V="number"==typeof V?V:0,new Promise(function(Y){return setTimeout(Y,V)})}().then(L))}().then(function(U){return z.disconnect(),U},function(U){throw z.disconnect(),U})}},3830:(Re,Pe,$)=>{"use strict";var V=$(4687);Re.exports=function Y(se,z,H,N,k){N="number"==typeof N?N:3;var L=0,U=$(7708),ee={},ae=U.getOrCreate(ee);return function de(){return z(H).then(function(he){return(H.audio?V(ae,he,k).catch(function(J){return se.warn("Encountered an error while detecting silence",J),!0}):Promise.resolve(!1)).then(function(J){return J?N<=0?(se.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),he):(se.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++L+"."),he.getTracks().forEach(function(q){return q.stop()}),N--,de()):(se.info("Got a non-silent audio MediaStreamTrack; returning it."),he)})})}().then(function(he){return U.release(ee),he},function(he){throw U.release(ee),he})}},9611:(Re,Pe,$)=>{"use strict";var V=$(7627).flatMap,Y=$(7627).guessBrowser,se=$(7627).guessBrowserVersion,z=$(3236).getSdpFormat,H=Y(),N=se(),k="chrome"===H,L="firefox"===H,U="safari"===H,ee=k?N.major:null;function J(ue){var pe=Array.from(ue.values()).find(function(Me){return"candidate-pair"===Me.type&&Me.nominated});if(!pe)return null;var Ie=ue.get(pe.localCandidateId),je=ue.get(pe.remoteCandidateId),Le=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Qe=Le.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),$e=Ie?Qe.reduce(function(Me,Qt){return Me[Qt.key]=typeof Ie[Qt.key]===Qt.type?Ie[Qt.key]:"deleted"!==Qt.key&&null,Me},{}):null,Xe=je?Le.reduce(function(Me,Qt){return Me[Qt.key]=typeof je[Qt.key]===Qt.type?je[Qt.key]:null,Me},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(Me){return"inprogress"===Me?"in-progress":Me}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Me,Qt){return Me[Qt.key]=typeof pe[Qt.key]===Qt.type?Qt.fixup?Qt.fixup(pe[Qt.key]):pe[Qt.key]:null,Me},{localCandidate:$e,remoteCandidate:Xe})}function q(ue){var pe=Array.from(ue.values()).find(function(Qt){return"candidate-pair"===Qt.type&&Qt.nominated});if(!pe)return null;var Ie=ue.get(pe.localCandidateId),je=ue.get(pe.remoteCandidateId),Le=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Qe=Le.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),$e={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},Xe=Ie?Qe.reduce(function(Qt,Wt){var St=Wt.ffKeys&&Wt.ffKeys.find(function(Ke){return Ke in Ie})||Wt.key;return Qt[Wt.key]=typeof Ie[St]===Wt.type?"candidateType"===St&&$e[Ie[St]]||Ie[St]:"deleted"!==St&&null,Qt},{}):null,Me=je?Le.reduce(function(Qt,Wt){var St=Wt.ffKeys&&Wt.ffKeys.find(function(Ke){return Ke in je})||Wt.key;return Qt[Wt.key]=typeof je[St]===Wt.type?"candidateType"===St&&$e[je[St]]||je[St]:null,Qt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Qt,Wt){return Qt[Wt.key]=typeof pe[Wt.key]===Wt.type?pe[Wt.key]:null,Qt},{localCandidate:Xe,remoteCandidate:Me})}function ce(ue,pe,Ie){var je="local"===Ie?"getSenders":"getReceivers";return ue[je]?ue[je]().map(function(Qe){return Qe.track}).filter(function(Qe){return Qe&&Qe.kind===pe}):V(ue["local"===Ie?"getLocalStreams":"getRemoteStreams"](),function(Qe){return Qe["audio"===pe?"getAudioTracks":"getVideoTracks"]()})}function Oe(ue,pe){return new Promise(function(Ie,je){ee&&ee<67?ue.getStats(function(Le){Ie([we(Le,pe)])},null,je):ue.getStats(pe).then(function(Le){Ie(function Se(ue){var pe=null,Ie=[],je=null,Le=null,Qe=null,$e=null,Xe=null;ue.forEach(function(Ke){switch(Ke.type){case"inbound-rtp":pe=Ke;break;case"outbound-rtp":Ie.push(Ke);break;case"media-source":Xe=Ke;break;case"track":Qe=Ke;break;case"codec":$e=Ke;break;case"remote-inbound-rtp":je=Ke;break;case"remote-outbound-rtp":Le=Ke}});var Me=Qe&&Qe.remoteSource,Wt=[],St=Me?Le:je;return(Me?[pe]:Ie).forEach(function(Ke){var Fe={},We=[Ke,Xe,Qe,$e,St&&St.ssrc===Ke.ssrc?St:null];function De(Fn){var fn=We.find(function(ro){return ro&&typeof ro[Fn]<"u"})||null;return fn?fn[Fn]:null}var et=De("ssrc");"number"==typeof et&&(Fe.ssrc=String(et));var Ut=De("timestamp");Fe.timestamp=Math.round(Ut);var Zt=De("mimeType");"string"==typeof Zt&&(Zt=Zt.split("/"),Fe.codecName=Zt[Zt.length-1]);var Mt=De("roundTripTime");"number"==typeof Mt&&(Fe.roundTripTime=Math.round(1e3*Mt));var tn=De("jitter");"number"==typeof tn&&(Fe.jitter=Math.round(1e3*tn));var Jn=De("frameWidth");"number"==typeof Jn&&(Me?Fe.frameWidthReceived=Jn:(Fe.frameWidthSent=Jn,Fe.frameWidthInput=Qe.frameWidth));var qt=De("frameHeight");"number"==typeof qt&&(Me?Fe.frameHeightReceived=qt:(Fe.frameHeightSent=qt,Fe.frameHeightInput=Qe.frameHeight));var Mr=De("framesPerSecond");"number"==typeof Mr&&(Fe[Me?"frameRateReceived":"frameRateSent"]=Mr);var xr=De("bytesReceived");"number"==typeof xr&&(Fe.bytesReceived=xr);var wr=De("bytesSent");"number"==typeof wr&&(Fe.bytesSent=wr);var Cr=De("packetsLost");"number"==typeof Cr&&(Fe.packetsLost=Cr);var Sr=De("packetsReceived");"number"==typeof Sr&&(Fe.packetsReceived=Sr);var Bi=De("packetsSent");"number"==typeof Bi&&(Fe.packetsSent=Bi);var rr=De("audioLevel");"number"==typeof rr&&(rr=Math.round(32767*rr),Me?Fe.audioOutputLevel=rr:Fe.audioInputLevel=rr);var Qi=De("totalPacketSendDelay");"number"==typeof Qi&&(Fe.totalPacketSendDelay=Qi);var fa=De("totalEncodeTime");"number"==typeof fa&&(Fe.totalEncodeTime=fa);var Ct=De("framesEncoded");"number"==typeof Ct&&(Fe.framesEncoded=Ct);var Ht=De("estimatedPlayoutTimestamp");"number"==typeof Ht&&(Fe.estimatedPlayoutTimestamp=Ht);var sn=De("totalDecodeTime");"number"==typeof sn&&(Fe.totalDecodeTime=sn);var ze=De("framesDecoded");"number"==typeof ze&&(Fe.framesDecoded=ze);var xe=De("jitterBufferDelay");"number"==typeof xe&&(Fe.jitterBufferDelay=xe);var ut=De("jitterBufferEmittedCount");"number"==typeof ut&&(Fe.jitterBufferEmittedCount=ut),Wt.push(Fe)}),Wt}(Le))},je)})}function we(ue,pe){var Ie=ue.result().find(function(Le){return"ssrc"===Le.type&&Le.stat("googTrackId")===pe.id}),je={};return Ie&&(je.timestamp=Math.round(Number(Ie.timestamp)),je=Ie.names().reduce(function(Le,Qe){switch(Qe){case"googCodecName":Le.codecName=Ie.stat(Qe);break;case"googRtt":Le.roundTripTime=Number(Ie.stat(Qe));break;case"googJitterReceived":Le.jitter=Number(Ie.stat(Qe));break;case"googFrameWidthInput":Le.frameWidthInput=Number(Ie.stat(Qe));break;case"googFrameHeightInput":Le.frameHeightInput=Number(Ie.stat(Qe));break;case"googFrameWidthSent":Le.frameWidthSent=Number(Ie.stat(Qe));break;case"googFrameHeightSent":Le.frameHeightSent=Number(Ie.stat(Qe));break;case"googFrameWidthReceived":Le.frameWidthReceived=Number(Ie.stat(Qe));break;case"googFrameHeightReceived":Le.frameHeightReceived=Number(Ie.stat(Qe));break;case"googFrameRateInput":Le.frameRateInput=Number(Ie.stat(Qe));break;case"googFrameRateSent":Le.frameRateSent=Number(Ie.stat(Qe));break;case"googFrameRateReceived":Le.frameRateReceived=Number(Ie.stat(Qe));break;case"ssrc":Le[Qe]=Ie.stat(Qe);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":Le[Qe]=Number(Ie.stat(Qe))}return Le},je)),je}function ge(ue,pe){var Ie=null,je=null;(ue=ue||new Map).forEach(function(Sr){if(!Sr.isRemote)switch(Sr.type){case"inbound-rtp":Ie=Sr,je=ue.get(Sr.remoteId);break;case"outbound-rtp":je=Sr,Ie=ue.get(Sr.remoteId)}});var Le=pe?Ie:je,Qe=pe?je:Ie;function $e(Sr){return Le&&typeof Le[Sr]<"u"?Le[Sr]:Qe&&typeof Qe[Sr]<"u"?Qe[Sr]:null}var Xe={},Me=$e("timestamp");Xe.timestamp=Math.round(Me);var Qt=$e("ssrc");"number"==typeof Qt&&(Xe.ssrc=String(Qt));var Wt=$e("bytesSent");"number"==typeof Wt&&(Xe.bytesSent=Wt);var St=$e("packetsLost");"number"==typeof St&&(Xe.packetsLost=St);var Ke=$e("packetsSent");"number"==typeof Ke&&(Xe.packetsSent=Ke);var Fe=$e("roundTripTime");"number"==typeof Fe&&(Xe.roundTripTime=Math.round(1e3*Fe));var We=$e("jitter");"number"==typeof We&&(Xe.jitter=Math.round(1e3*We));var De=$e("framerateMean");"number"==typeof De&&(Xe.frameRateSent=Math.round(De));var et=$e("bytesReceived");"number"==typeof et&&(Xe.bytesReceived=et);var Ut=$e("packetsReceived");"number"==typeof Ut&&(Xe.packetsReceived=Ut);var Zt=$e("framerateMean");"number"==typeof Zt&&(Xe.frameRateReceived=Math.round(Zt));var Mt=$e("totalPacketSendDelay");"number"==typeof Mt&&(Xe.totalPacketSendDelay=Mt);var tn=$e("totalEncodeTime");"number"==typeof tn&&(Xe.totalEncodeTime=tn);var Jn=$e("framesEncoded");"number"==typeof Jn&&(Xe.framesEncoded=Jn);var qt=$e("estimatedPlayoutTimestamp");"number"==typeof qt&&(Xe.estimatedPlayoutTimestamp=qt);var Mr=$e("totalDecodeTime");"number"==typeof Mr&&(Xe.totalDecodeTime=Mr);var xr=$e("framesDecoded");"number"==typeof xr&&(Xe.framesDecoded=xr);var wr=$e("jitterBufferDelay");"number"==typeof wr&&(Xe.jitterBufferDelay=wr);var Cr=$e("jitterBufferEmittedCount");return"number"==typeof Cr&&(Xe.jitterBufferEmittedCount=Cr),Xe}Re.exports=function de(ue,pe){return ue&&"function"==typeof ue.getStats?function he(ue,pe){var Ie=ce(ue,"audio","local"),je=ce(ue,"video","local"),Le=ce(ue,"audio"),Qe=ce(ue,"video"),$e={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},Xe=V([[Ie,"localAudioTrackStats",!1],[je,"localVideoTrackStats",!1],[Le,"remoteAudioTrackStats",!0],[Qe,"remoteVideoTrackStats",!0]],function(Me){var Wt=Me[1],St=Me[2];return Me[0].map(function(Ke){return function Ee(ue,pe,Ie){return typeof(Ie=Ie||{}).testForChrome<"u"||k?Oe(ue,pe):typeof Ie.testForFirefox<"u"||L?function fe(ue,pe,Ie){return new Promise(function(je,Le){ue.getStats(pe).then(function(Qe){je([ge(Qe,Ie)])},Le)})}(ue,pe,Ie.isRemote):typeof Ie.testForSafari<"u"||U?typeof Ie.testForSafari<"u"||"unified"===z()?Oe(ue,pe):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ue,Ke,Object.assign({isRemote:St},pe)).then(function(Fe){Fe.forEach(function(We){We.trackId=Ke.id,$e[Wt].push(We)})})})});return Promise.all(Xe).then(function(){return function te(ue,pe){return typeof(pe=pe||{}).testForChrome<"u"||k||typeof pe.testForSafari<"u"||U?ue.getStats().then(J):typeof pe.testForFirefox<"u"||L?ue.getStats().then(q):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ue,pe)}).then(function(Me){return $e.activeIceCandidatePair=Me,$e})}(ue,pe):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:Re=>{"use strict";Re.exports=function Pe($){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?($=$||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia($)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(Re,Pe,$)=>{"use strict";var V={};Object.defineProperties(V,{getStats:{enumerable:!0,value:$(9611)},getUserMedia:{enumerable:!0,value:$(7370)},MediaStream:{enumerable:!0,value:$(4946)},MediaStreamTrack:{enumerable:!0,value:$(6240)},RTCIceCandidate:{enumerable:!0,value:$(5219)},RTCPeerConnection:{enumerable:!0,value:$(7061)},RTCSessionDescription:{enumerable:!0,value:$(5481)}}),Re.exports=V},4946:Re=>{"use strict";Re.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:Re=>{"use strict";Re.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:Re=>{"use strict";Re.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(Re,Pe,$)=>{"use strict";var V=$(4326),Y=$(7590),se=$(1905),z=$(3688),H=$(4946),N=$(7121),k=$(3236),L=$(7627),U=$(7627).isIOSChrome,ee="unified"===k.getSdpFormat();function ae(fe,we){if(!(this instanceof ae))return new ae(fe,we);Y.call(this),fe=fe||{};var Se=Object.assign(fe.iceTransportPolicy?{iceTransports:fe.iceTransportPolicy}:{},fe);L.interceptEvent(this,"datachannel"),L.interceptEvent(this,"signalingstatechange");var ge=k.getSdpFormat(Se.sdpSemantics),ue=new RTCPeerConnection(Se,we);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new H},_peerConnection:{value:ue},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:ge},_senders:{value:new Map},_signalingStateLatch:{value:new z},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:ue.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:ue.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":ue.signalingState}}});var pe=this;ue.addEventListener("datachannel",function(je){Ee(je.channel),pe.dispatchEvent(je)}),ue.addEventListener("signalingstatechange",function(){"stable"===ue.signalingState&&(pe._appliedTracksToSSRCs=new Map(pe._tracksToSSRCs)),!pe._pendingLocalOffer&&!pe._pendingRemoteOffer&&pe.dispatchEvent.apply(pe,arguments)}),ue.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&ue.addStream(this._localStream),L.proxyProperties(RTCPeerConnection.prototype,this,ue)}function de(fe,we,Se){var Qe,pe=we?fe._pendingLocalOffer:fe._pendingRemoteOffer,je=we?"have-local-offer":"have-remote-offer",Le=we?"setLocalDescription":"setRemoteDescription";if(!we&&(we?fe._pendingRemoteOffer:fe._pendingLocalOffer)&&"answer"===Se.type)Qe=function he(fe,we){return fe._peerConnection.setLocalDescription(fe._pendingLocalOffer).then(function(){return fe._pendingLocalOffer=null,fe.setRemoteDescription(we)}).then(function(){fe._signalingStateLatch.lower()})}(fe,Se);else if("offer"===Se.type){if(fe.signalingState!==je&&"stable"!==fe.signalingState)return Promise.reject(new Error("Cannot set "+(we?"local":"remote")+" offer in state "+fe.signalingState));!pe&&"low"===fe._signalingStateLatch.state&&fe._signalingStateLatch.raise();var $e=fe.signalingState;(function ge(Xe){we?fe._pendingLocalOffer=Xe:fe._pendingRemoteOffer=Xe})(J(Se)),Qe=Promise.resolve(),fe.signalingState!==$e&&Qe.then(function(){fe.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===Se.type&&(fe.signalingState!==je?Qe=Promise.reject(new Error("Cannot rollback "+(we?"local":"remote")+" description in "+fe.signalingState)):(function ue(){we?fe._pendingLocalOffer=null:fe._pendingRemoteOffer=null}(),fe._rolledBackTracksToSSRCs=new Map(fe._tracksToSSRCs),fe._tracksToSSRCs=new Map(fe._appliedTracksToSSRCs),(Qe=Promise.resolve()).then(function(){fe.dispatchEvent(new Event("signalingstatechange"))})));return Qe||fe._peerConnection[Le](J(Se))}function te(fe,we){return!!fe.getTransceivers().find(function(Se){return Se.receiver&&Se.receiver.track&&Se.receiver.track.kind===we})}function J(fe){return fe instanceof V&&fe._description?fe._description:new RTCSessionDescription(fe)}function q(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function Ee(fe){return Object.defineProperty(fe,"maxRetransmits",{value:65535===fe.maxRetransmits?null:fe.maxRetransmits}),q()&&Object.defineProperty(fe,"maxPacketLifeTime",{value:65535===fe.maxRetransmitTime?null:fe.maxRetransmitTime}),fe}function Oe(fe,we,Se){return"unified"===fe?k.updateUnifiedPlanTrackIdsToSSRCs(we,Se):k.updatePlanBTrackIdsToSSRCs(we,Se)}se(ae,Y),"function"!=typeof RTCPeerConnection.prototype.addTrack?(ae.prototype.addTrack=function(){var we=[].slice.call(arguments),Se=we[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+Se.id+", "+Se.kind+"]: RTCPeerConnection is closed");var ge=this._senders.get(Se);if(ge&&ge.track)throw new Error("Cannot add MediaStreamTrack ["+Se.id+", "+Se.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(Se),this._peerConnection.addStream(this._localStream),ge=new N(Se),this._senders.set(Se,ge),ge},ae.prototype.removeTrack=function(we){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var Se=we.track;!Se||(we=this._senders.get(Se))&&we.track&&(we.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Se),this._peerConnection.addStream(this._localStream))},ae.prototype.getSenders=function(){return Array.from(this._senders.values())}):ae.prototype.removeTrack=function(we){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(we)}catch{}},ae.prototype.addIceCandidate=function(we){var ge,Se=[].slice.call(arguments),ue=this;return ge="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return ue._peerConnection.addIceCandidate(we)}):this._peerConnection.addIceCandidate(we),Se.length>1?L.legacyPromise(ge,Se[1],Se[2]):ge},ae.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},ae.prototype.createAnswer=function(){var Se,we=[].slice.call(arguments),ge=this;return Se=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return ge._signalingStateLatch.lower(),ge._peerConnection.createAnswer()}).then(function(pe){return ge._pendingRemoteOffer=null,ge._rolledBackTracksToSSRCs.clear(),new V({type:"answer",sdp:Oe(ge._sdpFormat,ge._tracksToSSRCs,pe.sdp)})},function(pe){throw ge._pendingRemoteOffer=null,pe}):this._peerConnection.createAnswer().then(function(ue){return ge._rolledBackTracksToSSRCs.clear(),new V({type:"answer",sdp:Oe(ge._sdpFormat,ge._tracksToSSRCs,ue.sdp)})}),we.length>1?L.legacyPromise(Se,we[0],we[1]):Se},ae.prototype.createOffer=function(){var we=[].slice.call(arguments),Se=(we.length>1?we[2]:we[0])||{},ge=this;if(U()){if(Se.offerToReceiveVideo&&!this._audioTransceiver&&(!ee||!te(this,"audio"))){delete Se.offerToReceiveAudio;try{this._audioTransceiver=ee?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(pe){return Promise.reject(pe)}}if(Se.offerToReceiveVideo&&!this._videoTransceiver&&(!ee||!te(this,"video"))){delete Se.offerToReceiveVideo;try{this._videoTransceiver=ee?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(pe){return Promise.reject(pe)}}}var ue=this._peerConnection.createOffer(Se).then(function(pe){return ge._rolledBackTracksToSSRCs.clear(),new V({type:pe.type,sdp:Oe(ge._sdpFormat,ge._tracksToSSRCs,pe.sdp)})});return we.length>1?L.legacyPromise(ue,we[0],we[1]):ue},ae.prototype.createDataChannel=function(we,Se){Se=function ce(fe){return fe=Object.assign({},fe),q()&&"maxPacketLifeTime"in fe&&(fe.maxRetransmitTime=fe.maxPacketLifeTime),fe}(Se);var ge=this._peerConnection.createDataChannel(we,Se);return Ee(ge),ge},ae.prototype.setLocalDescription=function(){var we=[].slice.call(arguments),Se=we[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ge=de(this,!0,Se);return we.length>1?L.legacyPromise(ge,we[1],we[2]):ge},ae.prototype.setRemoteDescription=function(){var we=[].slice.call(arguments),Se=we[0];this._rolledBackTracksToSSRCs.clear();var ge=de(this,!1,Se);return we.length>1?L.legacyPromise(ge,we[1],we[2]):ge},L.delegateMethods(RTCPeerConnection.prototype,ae.prototype,"_peerConnection"),Re.exports=ae},7111:(Re,Pe,$)=>{"use strict";var V=$(7590),Y=$(3657),se=$(1905),z=$(3236).updateUnifiedPlanTrackIdsToSSRCs,H=$(7627),N="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function k(ae){if(!(this instanceof k))return new k(ae);V.call(this),H.interceptEvent(this,"signalingstatechange");var de=new RTCPeerConnection(ae);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:de},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return ee(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var te,he=this;de.addEventListener("signalingstatechange",function(){if(!he._rollingBack&&he.signalingState!==te){te=he.signalingState;var q=he.dispatchEvent.apply.bind(he.dispatchEvent,he,arguments);he._isClosed?setTimeout(q):q()}}),H.proxyProperties(RTCPeerConnection.prototype,this,de)}function L(ae,de,he){var te=de?"setLocalDescription":"setRemoteDescription";return ae._rollingBack=!0,ae._peerConnection[te](new Y({type:"rollback"})).then(he).then(function(q){return ae._rollingBack=!1,q},function(q){throw ae._rollingBack=!1,q})}function U(ae,de,he){if(!ae._initiallyNegotiatedDtlsRole&&"offer"!==de.type){var te=de.sdp.match(/a=setup:([a-z]+)/);if(te){var J=te[1];ae._initiallyNegotiatedDtlsRole=he?{active:"passive",passive:"active"}[J]:J}}}function ee(ae,de){return ae&&"answer"===ae.type&&de?new Y({type:ae.type,sdp:ae.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+de)}):ae}se(k,V),Object.defineProperty(k.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),N&&(k.prototype.addTrack=function(){var de=arguments[0],he=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return he.replaceTrack(de),he}),k.prototype.createAnswer=function(){var he,de=[].slice.call(arguments),te=this;return he=this._peerConnection.createAnswer().then(function(q){return U(te,q),ee(q,te._initiallyNegotiatedDtlsRole)}),"function"==typeof de[0]?H.legacyPromise(he,de[0],de[1]):he},k.prototype.createOffer=function(){var te,de=[].slice.call(arguments),he=(de.length>1?de[2]:de[0])||{},J=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var q="have-local-offer"===this.signalingState;te=L(this,q,function(){return J.createOffer(he)})}else te=J._peerConnection.createOffer(he);return te=te.then(function(ce){return new Y({type:ce.type,sdp:z(J._tracksToSSRCs,ce.sdp)})}),de.length>1?H.legacyPromise(te,de[0],de[1]):te},k.prototype.setLocalDescription=function(){var te,de=[].slice.call(arguments),he=de[0];return he&&"answer"===he.type&&"have-local-offer"===this.signalingState&&(te=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),te?de.length>1?H.legacyPromise(te,de[1],de[2]):te:this._peerConnection.setLocalDescription.apply(this._peerConnection,de)},k.prototype.setRemoteDescription=function(){var te,de=[].slice.call(arguments),he=de[0],J=this;return he&&"have-remote-offer"===this.signalingState&&("answer"===he.type?te=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===he.type&&(te=L(this,!1,function(){return J._peerConnection.setRemoteDescription(he)}))),te||(te=this._peerConnection.setRemoteDescription(he)),te=te.then(function(){U(J,he,!0)}),de.length>1?H.legacyPromise(te,de[1],de[2]):te},k.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},H.delegateMethods(RTCPeerConnection.prototype,k.prototype,"_peerConnection"),Re.exports=k},7061:(Re,Pe,$)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,$(7627).guessBrowser)()){case"chrome":Re.exports=$(5431);break;case"firefox":Re.exports=$(7111);break;case"safari":Re.exports=$(7548);break;default:Re.exports=RTCPeerConnection}else Re.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(Re,Pe,$)=>{"use strict";var V=$(7590),Y=$(1905),se=$(3688),z=$(3236),H=$(7627),N="unified"===z.getSdpFormat(),k=N?z.updateUnifiedPlanTrackIdsToSSRCs:z.updatePlanBTrackIdsToSSRCs;function L(he){if(!(this instanceof L))return new L(he);V.call(this),H.interceptEvent(this,"datachannel"),H.interceptEvent(this,"iceconnectionstatechange"),H.interceptEvent(this,"signalingstatechange"),H.interceptEvent(this,"track");var te=new RTCPeerConnection(he);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:te},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new se},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var J=this;te.addEventListener("datachannel",function(ce){de(ce.channel),J.dispatchEvent(ce)}),te.addEventListener("iceconnectionstatechange",function(){J._isClosed||J.dispatchEvent.apply(J,arguments)}),te.addEventListener("signalingstatechange",function(){J._isClosed||("stable"===te.signalingState&&(J._appliedTracksToSSRCs=new Map(J._tracksToSSRCs)),!J._pendingLocalOffer&&!J._pendingRemoteOffer&&J.dispatchEvent.apply(J,arguments))}),te.addEventListener("track",function(ce){J._pendingRemoteOffer=null,J.dispatchEvent(ce)}),H.proxyProperties(RTCPeerConnection.prototype,this,te)}function U(he,te,J){var Ee=te?he._pendingLocalOffer:he._pendingRemoteOffer,fe=te?"have-local-offer":"have-remote-offer",we=te?"setLocalDescription":"setRemoteDescription";if(!te&&(te?he._pendingRemoteOffer:he._pendingLocalOffer)&&"answer"===J.type)return function ee(he,te){return he._peerConnection.setLocalDescription(he._pendingLocalOffer).then(function(){return he._pendingLocalOffer=null,he.setRemoteDescription(te)}).then(function(){he._signalingStateLatch.lower()})}(he,J);if("offer"===J.type){if(he.signalingState!==fe&&"stable"!==he.signalingState)return Promise.reject(new Error("Cannot set "+(te?"local":"remote")+" offer in state "+he.signalingState));!Ee&&"low"===he._signalingStateLatch.state&&he._signalingStateLatch.raise();var Se=he.signalingState;return function q(ge){te?he._pendingLocalOffer=ge:he._pendingRemoteOffer=ge}(J),he.signalingState!==Se?Promise.resolve().then(function(){he.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===J.type?he.signalingState!==fe?Promise.reject(new Error("Cannot rollback "+(te?"local":"remote")+" description in "+he.signalingState)):(function ce(){te?he._pendingLocalOffer=null:he._pendingRemoteOffer=null}(),he._rolledBackTracksToSSRCs=new Map(he._tracksToSSRCs),he._tracksToSSRCs=new Map(he._appliedTracksToSSRCs),Promise.resolve().then(function(){he.dispatchEvent(new Event("signalingstatechange"))})):he._peerConnection[we](J)}function ae(he,te){return!!he.getTransceivers().find(function(J){return J.receiver&&J.receiver.track&&J.receiver.track.kind===te})}function de(he){return Object.defineProperties(he,{maxPacketLifeTime:{value:65535===he.maxPacketLifeTime?null:he.maxPacketLifeTime},maxRetransmits:{value:65535===he.maxRetransmits?null:he.maxRetransmits}})}Y(L,V),L.prototype.addIceCandidate=function(te){var J=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return J._peerConnection.addIceCandidate(te)}):this._peerConnection.addIceCandidate(te)},L.prototype.createOffer=function(te){te=Object.assign({},te);var J=this;if(te.offerToReceiveVideo&&!this._audioTransceiver&&(!N||!ae(this,"audio"))){delete te.offerToReceiveAudio;try{this._audioTransceiver=N?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(q){return Promise.reject(q)}}if(te.offerToReceiveVideo&&!this._videoTransceiver&&(!N||!ae(this,"video"))){delete te.offerToReceiveVideo;try{this._videoTransceiver=N?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(q){return Promise.reject(q)}}return this._peerConnection.createOffer(te).then(function(q){return J._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:q.type,sdp:k(J._tracksToSSRCs,q.sdp)})})},L.prototype.createAnswer=function(te){var J=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return J._signalingStateLatch.lower(),J._peerConnection.createAnswer()}).then(function(ce){return J._pendingRemoteOffer=null,J._rolledBackTracksToSSRCs.clear(),N?new RTCSessionDescription({type:ce.type,sdp:k(J._tracksToSSRCs,ce.sdp)}):ce},function(ce){throw J._pendingRemoteOffer=null,ce}):this._peerConnection.createAnswer(te).then(function(ce){return J._rolledBackTracksToSSRCs.clear(),N?new RTCSessionDescription({type:ce.type,sdp:k(J._tracksToSSRCs,ce.sdp)}):ce})},L.prototype.createDataChannel=function(te,J){var q=this._peerConnection.createDataChannel(te,J);return de(q),q},L.prototype.removeTrack=function(te){te.replaceTrack(null),this._peerConnection.removeTrack(te)},L.prototype.setLocalDescription=function(te){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),U(this,!0,te)},L.prototype.setRemoteDescription=function(te){return this._rolledBackTracksToSSRCs.clear(),U(this,!1,te)},L.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var te=this;setTimeout(function(){te.dispatchEvent(new Event("iceconnectionstatechange")),te.dispatchEvent(new Event("signalingstatechange"))})}},H.delegateMethods(RTCPeerConnection.prototype,L.prototype,"_peerConnection"),Re.exports=L},7121:Re=>{"use strict";Re.exports=function Pe($){Object.defineProperties(this,{track:{enumerable:!0,value:$,writable:!0}})}},4326:Re=>{"use strict";Re.exports=function Pe($){if(!(this instanceof Pe))return new Pe($);var V=$&&"rollback"===$.type?null:new RTCSessionDescription($);Object.defineProperties(this,{_description:{get:function(){return V}},sdp:{enumerable:!0,value:V?V.sdp:$.sdp},type:{enumerable:!0,value:V?V.type:$.type}})}},3657:Re=>{"use strict";Re.exports=RTCSessionDescription},5481:(Re,Pe,$)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,$(7627).guessBrowser)()){case"chrome":Re.exports=$(4326);break;case"firefox":Re.exports=$(3657);break;default:Re.exports=RTCSessionDescription}else Re.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(Re,Pe,$)=>{"use strict";var V=$(9069).EventEmitter;function Y(){Object.defineProperties(this,{_eventEmitter:{value:new V}})}Y.prototype.dispatchEvent=function(z){return this._eventEmitter.emit(z.type,z)},Y.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},Y.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},Re.exports=Y},7627:(Re,Pe)=>{"use strict";function V(J,q,ce,Ee){if(!(Ee in q)&&!Ee.match(/^on[a-z]+$/)){var Oe=!1;try{var fe=Object.getOwnPropertyDescriptor(J,Ee);Oe=fe&&!!fe.get}catch{}if(!Oe){var we;try{we=typeof J[Ee]}catch{}"function"===we&&(q[Ee]=function(){return this[ce][Ee].apply(this[ce],arguments)})}}}function H(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function N(J){return typeof J>"u"&&(J=H()),/Chrome|CriOS/.test(J)?"chrome":/Firefox|FxiOS/.test(J)?"firefox":/Safari|iPhone|iPad|iPod/.test(J)?"safari":null}Pe.defer=function $(){var J={};return J.promise=new Promise(function(q,ce){J.resolve=q,J.reject=ce}),J},Pe.delegateMethods=function Y(J,q,ce){for(var Ee in J)V(J,q,ce,Ee)},Pe.difference=function se(J,q){J=Array.isArray(J)?new Set(J):new Set(J.values()),q=Array.isArray(q)?new Set(q):new Set(q.values());var ce=new Set;return J.forEach(function(Ee){q.has(Ee)||ce.add(Ee)}),ce},Pe.flatMap=function z(J,q){return(J instanceof Map||J instanceof Set?Array.from(J.values()):J).reduce(function(Ee,Oe){var fe=q(Oe);return Ee.concat(fe)},[])},Pe.guessBrowser=N,Pe.guessBrowserVersion=function k(J){typeof J>"u"&&(J=H());var q={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[N(J)];if(!q)return null;var ce=new RegExp("("+q+")/([^\\s]+)"),Ee=(J.match(ce)||[])[2];if(!Ee)return null;var Oe=Ee.split(".").map(Number);return{major:isNaN(Oe[0])?null:Oe[0],minor:isNaN(Oe[1])?null:Oe[1]}},Pe.isIOSChrome=function L(J){return typeof J>"u"&&(J=H()),/Mobi/.test(J)&&"chrome"===N()&&/iPad|iPhone|iPod/.test(J)},Pe.interceptEvent=function U(J,q){var ce=null;Object.defineProperty(J,"on"+q,{get:function(){return ce},set:function(Ee){ce&&this.removeEventListener(q,ce),"function"==typeof Ee?this.addEventListener(q,ce=Ee):ce=null}})},Pe.legacyPromise=function ee(J,q,ce){return q?J.then(function(Ee){q(Ee)},function(Ee){ce(Ee)}):J},Pe.makeUUID=function ae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(J){var q=16*Math.random()|0;return("x"===J?q:3&q|8).toString(16)})},Pe.proxyProperties=function de(J,q,ce){Object.getOwnPropertyNames(J).forEach(function(Ee){!function he(J,q,ce,Ee){if(!(Ee in q)){if(Ee.match(/^on[a-z]+$/))return Object.defineProperty(q,Ee,{value:null,writable:!0}),void ce.addEventListener(Ee.slice(2),function(){q.dispatchEvent.apply(q,arguments)});Object.defineProperty(q,Ee,{enumerable:!0,get:function(){return ce[Ee]}})}}(0,q,ce,Ee)})},Pe.support=function te(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(Re,Pe,$)=>{"use strict";var V=$(7627).defer,Y={high:new Set(["low"]),low:new Set(["high"])};function se(H){if(!(this instanceof se))return new se(H);var N=H||"low";Object.defineProperties(this,{_state:{set:function(k){if(N!==k){var L=this._whenDeferreds.get(N=k);L.forEach(function(U){U.resolve(this)},this),L.clear()}},get:function(){return N}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function z(H,N){return new Error('Cannot transition from "'+H+'" to "'+N+'"')}se.prototype.lower=function(){return this.transition("low")},se.prototype.raise=function(){return this.transition("high")},se.prototype.transition=function(N){if(!Y[this.state].has(N))throw z(this.state,N);return this._state=N,this},se.prototype.when=function(N){if(this.state===N)return Promise.resolve(this);if(!Y[this.state].has(N))return Promise.reject(z(this.state,N));var k=V();return this._whenDeferreds.get(N).add(k),k.promise},Re.exports=se},3236:(Re,Pe,$)=>{"use strict";var V=$(7627).flatMap,Y=$(7627).guessBrowser,se=null,H=null;function k(ue){return ue&&function z(){if("boolean"==typeof se)return se;if(typeof RTCPeerConnection>"u")return se=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),se=!1}catch{se=!0}return se}()?{"plan-b":"planb","unified-plan":"unified"}[ue]:function N(){if(!H)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),H="unified"}catch{H="planb"}else H="planb";return H}()}function ee(ue,pe){return(pe.match(new RegExp(ue,"gm"))||[]).reduce(function(je,Le){var Qe=Le.match(new RegExp(ue));return Qe?je.add(Qe[1]):je},new Set)}function ae(ue,pe){return ee(ue,pe)}function de(ue){return ae("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",ue)}function he(ue){return ae("^a=msid:.+ +(.+) *$",ue)}function te(ue,pe){return ee("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+pe+" *$",ue)}function J(ue,pe,Ie){return pe=pe||".*",Ie=Ie||".*",ue.split("\r\nm=").slice(1).map(function(je){return"m="+je}).filter(function(je){var Le=new RegExp("m="+pe,"gm"),Qe=new RegExp("a="+Ie,"gm");return Le.test(je)&&Qe.test(je)})}function q(ue){return Array.from(ee("^a=ssrc:([0-9]+) +.*$",ue))}function ce(ue,pe){var Ie=J(ue),je=new RegExp("^a=msid:[^ ]+ +"+pe+" *$","gm"),Le=Ie.filter(function(Qe){return Qe.match(je)});return new Set(V(Le,q))}function Ee(ue,pe,Ie){return new Map(Array.from(ue(Ie)).map(function(je){return[je,pe(Ie,je)]}))}function Oe(ue){return Ee(de,te,ue)}function fe(ue){return Ee(he,ce,ue)}function we(ue,pe,Ie){var je=ue(Ie),Le=new Map;je.forEach(function(Xe,Me){if(pe.has(Me)){var Qt=Array.from(pe.get(Me)),Wt=Array.from(Xe);Qt.forEach(function(St,Ke){var Fe=Wt[Ke];Le.set(Fe,St);var De="a=ssrc:"+St+" $1";Ie=Ie.replace(new RegExp("^a=ssrc:"+Fe+" (.*)$","gm"),De)})}else pe.set(Me,Xe)});var Qe="^(a=ssrc-group:[^ ]+ +)(.*)$";return(Ie.match(new RegExp(Qe,"gm"))||[]).forEach(function(Xe){var Me=Xe.match(new RegExp(Qe));if(Me){var Qt=Me[1],St=Me[2].split(" ").map(function(Ke){return Le.get(Ke)||Ke}).join(" ");Ie=Ie.replace(Me[0],Qt+St)}}),Ie}Pe.getSdpFormat=function U(ue){return{chrome:k(ue),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[Y()]||null},Pe.getMediaSections=J,Pe.getPlanBTrackIds=de,Pe.getUnifiedPlanTrackIds=he,Pe.getPlanBSSRCs=te,Pe.getUnifiedPlanSSRCs=ce,Pe.updatePlanBTrackIdsToSSRCs=function Se(ue,pe){return we(Oe,ue,pe)},Pe.updateUnifiedPlanTrackIdsToSSRCs=function ge(ue,pe){return we(fe,ue,pe)}},3332:Re=>{Re.exports=WebSocket},7156:Re=>{function Pe(V,Y,se,z,H,N,k){try{var L=V[N](k),U=L.value}catch(ee){return void se(ee)}L.done?Y(U):Promise.resolve(U).then(z,H)}Re.exports=function $(V){return function(){var Y=this,se=arguments;return new Promise(function(z,H){var N=V.apply(Y,se);function k(U){Pe(N,z,H,k,L,"next",U)}function L(U){Pe(N,z,H,k,L,"throw",U)}k(void 0)})}},Re.exports.__esModule=!0,Re.exports.default=Re.exports},1730:Re=>{"use strict";Re.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},Re=>{Re(Re.s=9358)}]);