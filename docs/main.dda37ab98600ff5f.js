(self.webpackChunkcompare_video_sdks=self.webpackChunkcompare_video_sdks||[]).push([[179],{9358:(Oe,Me,q)=>{"use strict";function F(r){return"function"==typeof r}function K(r){const e=r(a=>{Error.call(a),a.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ie=K(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((a,d)=>`${d+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function G(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class V{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const m of e)m.remove(this);else e.remove(this);const{initialTeardown:a}=this;if(F(a))try{a()}catch(m){t=m instanceof ie?m.errors:[m]}const{_teardowns:d}=this;if(d){this._teardowns=null;for(const m of d)try{x(m)}catch(b){t=t??[],b instanceof ie?t=[...t,...b.errors]:t.push(b)}}if(t)throw new ie(t)}}add(t){var e;if(t&&t!==this)if(this.closed)x(t);else{if(t instanceof V){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&G(e,t)}remove(t){const{_teardowns:e}=this;e&&G(e,t),t instanceof V&&t._removeParent(this)}}V.EMPTY=(()=>{const r=new V;return r.closed=!0,r})();const k=V.EMPTY;function O(r){return r instanceof V||r&&"closed"in r&&F(r.remove)&&F(r.add)&&F(r.unsubscribe)}function x(r){F(r)?r():r.unsubscribe()}const B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$={setTimeout(...r){const{delegate:t}=$;return(t?.setTimeout||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=$;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function ae(r){$.setTimeout(()=>{const{onUnhandledError:t}=B;if(!t)throw r;t(r)})}function de(){}const he=z("C",void 0,void 0);function z(r,t,e){return{kind:r,value:t,error:e}}let ce=null;function be(r){if(B.useDeprecatedSynchronousErrorHandling){const t=!ce;if(t&&(ce={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:a}=ce;if(ce=null,e)throw a}}else r()}class me extends V{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,O(t)&&t.add(this)):this.destination=fe}static create(t,e,a){return new Re(t,e,a)}next(t){this.isStopped?ue(function Y(r){return z("N",r,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ue(function X(r){return z("E",void 0,r)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ue(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Re extends me{constructor(t,e,a){let d;if(super(),F(t))d=t;else if(t){let m;({next:d,error:e,complete:a}=t),this&&B.useDeprecatedNextContext?(m=Object.create(t),m.unsubscribe=()=>this.unsubscribe()):m=t,d=d?.bind(m),e=e?.bind(m),a=a?.bind(m)}this.destination={next:d?Ce(d):de,error:Ce(e??_e),complete:a?Ce(a):de}}}function Ce(r,t){return(...e)=>{try{r(...e)}catch(a){B.useDeprecatedSynchronousErrorHandling?function ke(r){B.useDeprecatedSynchronousErrorHandling&&ce&&(ce.errorThrown=!0,ce.error=r)}(a):ae(a)}}}function _e(r){throw r}function ue(r,t){const{onStoppedNotification:e}=B;e&&$.setTimeout(()=>e(r,t))}const fe={closed:!0,next:de,error:_e,complete:de},we="function"==typeof Symbol&&Symbol.observable||"@@observable";function He(r){return r}let Ze=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const a=new r;return a.source=this,a.operator=e,a}subscribe(e,a,d){const m=function jt(r){return r&&r instanceof me||function Be(r){return r&&F(r.next)&&F(r.error)&&F(r.complete)}(r)&&O(r)}(e)?e:new Re(e,a,d);return be(()=>{const{operator:b,source:T}=this;m.add(b?b.call(m,T):T?this._subscribe(m):this._trySubscribe(m))}),m}_trySubscribe(e){try{return this._subscribe(e)}catch(a){e.error(a)}}forEach(e,a){return new(a=Xe(a))((d,m)=>{let b;b=this.subscribe(T=>{try{e(T)}catch(N){m(N),b?.unsubscribe()}},m,d)})}_subscribe(e){var a;return null===(a=this.source)||void 0===a?void 0:a.subscribe(e)}[we](){return this}pipe(...e){return function Ge(r){return 0===r.length?He:1===r.length?r[0]:function(e){return r.reduce((a,d)=>d(a),e)}}(e)(this)}toPromise(e){return new(e=Xe(e))((a,d)=>{let m;this.subscribe(b=>m=b,b=>d(b),()=>a(m))})}}return r.create=t=>new r(t),r})();function Xe(r){var t;return null!==(t=r??B.Promise)&&void 0!==t?t:Promise}const Kt=K(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let St=(()=>{class r extends Ze{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const a=new Ye(this,this);return a.operator=e,a}_throwIfClosed(){if(this.closed)throw new Kt}next(e){be(()=>{if(this._throwIfClosed(),!this.isStopped){const a=this.observers.slice();for(const d of a)d.next(e)}})}error(e){be(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:a}=this;for(;a.length;)a.shift().error(e)}})}complete(){be(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:a,isStopped:d,observers:m}=this;return a||d?k:(m.push(e),new V(()=>G(m,e)))}_checkFinalizedStatuses(e){const{hasError:a,thrownError:d,isStopped:m}=this;a?e.error(d):m&&e.complete()}asObservable(){const e=new Ze;return e.source=this,e}}return r.create=(t,e)=>new Ye(t,e),r})();class Ye extends St{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,a;null===(a=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===a||a.call(e,t)}error(t){var e,a;null===(a=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===a||a.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,a;return null!==(a=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==a?a:k}}function ze(r){return t=>{if(function je(r){return F(r?.lift)}(t))return t.lift(function(e){try{return r(e,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}class Pe extends me{constructor(t,e,a,d,m){super(t),this.onFinalize=m,this._next=e?function(b){try{e(b)}catch(T){t.error(T)}}:super._next,this._error=d?function(b){try{d(b)}catch(T){t.error(T)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function rt(r,t){return ze((e,a)=>{let d=0;e.subscribe(new Pe(a,m=>{a.next(r.call(t,m,d++))}))})}function Gt(r){return this instanceof Gt?(this.v=r,this):new Gt(r)}function on(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,a=e.apply(r,t||[]),m=[];return d={},b("next"),b("throw"),b("return"),d[Symbol.asyncIterator]=function(){return this},d;function b(Qe){a[Qe]&&(d[Qe]=function(Ke){return new Promise(function(at,Ot){m.push([Qe,Ke,at,Ot])>1||T(Qe,Ke)})})}function T(Qe,Ke){try{!function N(Qe){Qe.value instanceof Gt?Promise.resolve(Qe.value.v).then(U,ne):ve(m[0][2],Qe)}(a[Qe](Ke))}catch(at){ve(m[0][3],at)}}function U(Qe){T("next",Qe)}function ne(Qe){T("throw",Qe)}function ve(Qe,Ke){Qe(Ke),m.shift(),m.length&&T(m[0][0],m[0][1])}}function Fe(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function Ui(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],a=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e);function a(m){e[m]=r[m]&&function(b){return new Promise(function(T,N){!function d(m,b,T,N){Promise.resolve(N).then(function(U){m({value:U,done:T})},b)}(T,N,(b=r[m](b)).done,b.value)})}}}const Io=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Ps(r){return F(r?.then)}function wo(r){return F(r[we])}function nd(r){return Symbol.asyncIterator&&F(r?.[Symbol.asyncIterator])}function Vn(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $e=function fn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ft(r){return F(r?.[$e])}function _t(r){return on(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:a,done:d}=yield Gt(e.read());if(d)return yield Gt(void 0);yield yield Gt(a)}}finally{e.releaseLock()}})}function sn(r){return F(r?.getReader)}function _n(r){if(r instanceof Ze)return r;if(null!=r){if(wo(r))return function gi(r){return new Ze(t=>{const e=r[we]();if(F(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(Io(r))return function To(r){return new Ze(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(Ps(r))return function bs(r){return new Ze(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ae)})}(r);if(nd(r))return po(r);if(ft(r))return function Gs(r){return new Ze(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(sn(r))return function ao(r){return po(_t(r))}(r)}throw Vn(r)}function po(r){return new Ze(t=>{(function Tr(r,t){var e,a,d,m;return function xr(r,t,e,a){return new(e||(e=Promise))(function(m,b){function T(ne){try{U(a.next(ne))}catch(ve){b(ve)}}function N(ne){try{U(a.throw(ne))}catch(ve){b(ve)}}function U(ne){ne.done?m(ne.value):function d(m){return m instanceof e?m:new e(function(b){b(m)})}(ne.value).then(T,N)}U((a=a.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Fe(r);!(a=yield e.next()).done;)if(t.next(a.value),t.closed)return}catch(b){d={error:b}}finally{try{a&&!a.done&&(m=e.return)&&(yield m.call(e))}finally{if(d)throw d.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function Mn(r,t,e,a=0,d=!1){const m=t.schedule(function(){e(),d?r.add(this.schedule(null,a)):this.unsubscribe()},a);if(r.add(m),!d)return m}function ku(r,t,e=1/0){return F(t)?ku((a,d)=>rt((m,b)=>t(a,m,d,b))(_n(r(a,d))),e):("number"==typeof t&&(e=t),ze((a,d)=>function ru(r,t,e,a,d,m,b,T){const N=[];let U=0,ne=0,ve=!1;const Qe=()=>{ve&&!N.length&&!U&&t.complete()},Ke=Ot=>U<a?at(Ot):N.push(Ot),at=Ot=>{m&&t.next(Ot),U++;let tn=!1;_n(e(Ot,ne++)).subscribe(new Pe(t,an=>{d?.(an),m?Ke(an):t.next(an)},()=>{tn=!0},void 0,()=>{if(tn)try{for(U--;N.length&&U<a;){const an=N.shift();b?Mn(t,b,()=>at(an)):at(an)}Qe()}catch(an){t.error(an)}}))};return r.subscribe(new Pe(t,Ke,()=>{ve=!0,Qe()})),()=>{T?.()}}(a,d,r,e)))}function rd(r=1/0){return ku(He,r)}const $n=new Ze(r=>r.complete());function Q1(r){return r&&F(r.schedule)}function H1(r){return r[r.length-1]}function Yy(r){return F(H1(r))?r.pop():void 0}function Cg(r){return Q1(H1(r))?r.pop():void 0}function qa(r,t=0){return ze((e,a)=>{e.subscribe(new Pe(a,d=>Mn(a,r,()=>a.next(d),t),()=>Mn(a,r,()=>a.complete(),t),d=>Mn(a,r,()=>a.error(d),t)))})}function G1(r,t=0){return ze((e,a)=>{a.add(r.schedule(()=>e.subscribe(a),t))})}function Ss(r,t){if(!r)throw new Error("Iterable cannot be null");return new Ze(e=>{Mn(e,t,()=>{const a=r[Symbol.asyncIterator]();Mn(e,t,()=>{a.next().then(d=>{d.done?e.complete():e.next(d.value)})},0,!0)})})}function Tg(r,t){return t?function kn(r,t){if(null!=r){if(wo(r))return function Np(r,t){return _n(r).pipe(G1(t),qa(t))}(r,t);if(Io(r))return function Ig(r,t){return new Ze(e=>{let a=0;return t.schedule(function(){a===r.length?e.complete():(e.next(r[a++]),e.closed||this.schedule())})})}(r,t);if(Ps(r))return function hS(r,t){return _n(r).pipe(G1(t),qa(t))}(r,t);if(nd(r))return Ss(r,t);if(ft(r))return function y2(r,t){return new Ze(e=>{let a;return Mn(e,t,()=>{a=r[$e](),Mn(e,t,()=>{let d,m;try{({value:d,done:m}=a.next())}catch(b){return void e.error(b)}m?e.complete():e.next(d)},0,!0)}),()=>F(a?.return)&&a.return()})}(r,t);if(sn(r))return function wg(r,t){return Ss(_t(r),t)}(r,t)}throw Vn(r)}(r,t):_n(r)}function Po(...r){const t=Cg(r),e=function vv(r,t){return"number"==typeof H1(r)?r.pop():t}(r,1/0),a=r;return a.length?1===a.length?_n(a[0]):rd(e)(Tg(a,t)):$n}function fl(r){return r<=0?()=>$n:ze((t,e)=>{let a=0;t.subscribe(new Pe(e,d=>{++a<=r&&(e.next(d),r<=a&&e.complete())}))})}function id(r={}){const{connector:t=(()=>new St),resetOnError:e=!0,resetOnComplete:a=!0,resetOnRefCountZero:d=!0}=r;return m=>{let b=null,T=null,N=null,U=0,ne=!1,ve=!1;const Qe=()=>{T?.unsubscribe(),T=null},Ke=()=>{Qe(),b=N=null,ne=ve=!1},at=()=>{const Ot=b;Ke(),Ot?.unsubscribe()};return ze((Ot,tn)=>{U++,!ve&&!ne&&Qe();const an=N=N??t();tn.add(()=>{U--,0===U&&!ve&&!ne&&(T=pS(at,d))}),an.subscribe(tn),b||(b=new Re({next:Pn=>an.next(Pn),error:Pn=>{ve=!0,Qe(),T=pS(Ke,e,Pn),an.error(Pn)},complete:()=>{ne=!0,Qe(),T=pS(Ke,a),an.complete()}}),Tg(Ot).subscribe(b))})(m)}}function pS(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(fl(1)).subscribe(()=>r())}function Qo(r){for(let t in r)if(r[t]===Qo)return t;throw Error("Could not find renamed property on target object.")}function yc(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function Ho(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ho).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function fS(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const cn=Qo({__forward_ref__:Qo});function $o(r){return r.__forward_ref__=$o,r.toString=function(){return Ho(this())},r}function Dr(r){return jn(r)?r():r}function jn(r){return"function"==typeof r&&r.hasOwnProperty(cn)&&r.__forward_ref__===$o}function Gf(r){return r&&!!r.\u0275providers}const qy="https://g.co/ng/security#xss";class vn extends Error{constructor(t,e){super(function Da(r,t){return`NG0${Math.abs(r)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function ci(r){return"string"==typeof r?r:null==r?"":String(r)}function Jy(r,t){throw new vn(-201,!1)}function Go(r,t){null==r&&function ro(r,t,e,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${e} ${a} ${t} <=Actual]`))}(t,r,null,"!=")}function vr(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function xi(r){return{providers:r.providers||[],imports:r.imports||[]}}function gS(r){return Yh(r,io)||Yh(r,$y)}function Yh(r,t){return r.hasOwnProperty(t)?r[t]:null}function I2(r){return r&&(r.hasOwnProperty(W1)||r.hasOwnProperty(Xy))?r[W1]:null}const io=Qo({\u0275prov:Qo}),W1=Qo({\u0275inj:Qo}),$y=Qo({ngInjectableDef:Qo}),Xy=Qo({ngInjectorDef:Qo});var Zr=(()=>((Zr=Zr||{})[Zr.Default=0]="Default",Zr[Zr.Host=1]="Host",Zr[Zr.Self=2]="Self",Zr[Zr.SkipSelf=4]="SkipSelf",Zr[Zr.Optional=8]="Optional",Zr))();let th;function sd(r){const t=th;return th=r,t}function sr(r,t,e){const a=gS(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:e&Zr.Optional?null:void 0!==t?t:void Jy(Ho(r))}const Xo=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Un={},z1="__NG_DI_FLAG__",Zy="ngTempTokenPath",fi=/\n/gm,eE="__source";let Rg;function Av(r){const t=Rg;return Rg=r,t}function vS(r,t=Zr.Default){if(void 0===Rg)throw new vn(-203,!1);return null===Rg?sr(r,void 0,t):Rg.get(r,t&Zr.Optional?null:void 0,t)}function rn(r,t=Zr.Default){return(function jL(){return th}()||vS)(Dr(r),t)}function Ea(r,t=Zr.Default){return rn(r,nh(t))}function nh(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function AS(r){const t=[];for(let e=0;e<r.length;e++){const a=Dr(r[e]);if(Array.isArray(a)){if(0===a.length)throw new vn(900,!1);let d,m=Zr.Default;for(let b=0;b<a.length;b++){const T=a[b],N=Og(T);"number"==typeof N?-1===N?d=T.token:m|=N:d=T}t.push(rn(d,m))}else t.push(rn(a))}return t}function rh(r,t){return r[z1]=t,r.prototype[z1]=t,r}function Og(r){return r[z1]}function ml(r){return{toString:r}.toString()}var Ec=(()=>((Ec=Ec||{})[Ec.OnPush=0]="OnPush",Ec[Ec.Default=1]="Default",Ec))(),Ja=(()=>{return(r=Ja||(Ja={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Ja;var r})();const ad={},uo=[],tE=Qo({\u0275cmp:Qo}),Y1=Qo({\u0275dir:Qo}),yS=Qo({\u0275pipe:Qo}),R2=Qo({\u0275mod:Qo}),Mp=Qo({\u0275fac:Qo}),nE=Qo({__NG_ELEMENT_ID__:Qo});let HL=0;function ka(r){return ml(()=>{const e=!0===r.standalone,a={},d={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Ec.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||uo,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Ja.Emulated,id:"c"+HL++,styles:r.styles||uo,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=r.dependencies,b=r.features;return d.inputs=q1(r.inputs,a),d.outputs=q1(r.outputs),b&&b.forEach(T=>T(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(Wf).filter(rE):null,d.pipeDefs=m?()=>("function"==typeof m?m():m).map(ou).filter(rE):null,d})}function Wf(r){return oo(r)||mo(r)}function rE(r){return null!==r}function Li(r){return ml(()=>({type:r.type,bootstrap:r.bootstrap||uo,declarations:r.declarations||uo,imports:r.imports||uo,exports:r.exports||uo,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function q1(r,t){if(null==r)return ad;const e={};for(const a in r)if(r.hasOwnProperty(a)){let d=r[a],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),e[d]=a,t&&(t[d]=m)}return e}const _r=ka;function $a(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function oo(r){return r[tE]||null}function mo(r){return r[Y1]||null}function ou(r){return r[yS]||null}function xu(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ms(r){return Array.isArray(r)&&!0===r[1]}function ar(r){return 0!=(4&r.flags)}function Fp(r){return r.componentOffset>-1}function sh(r){return 1==(1&r.flags)}function xs(r){return null!==r.template}function bi(r){return 0!=(256&r[2])}function Mg(r,t){return r.hasOwnProperty(Mp)?r[Mp]:null}class vl{constructor(t,e,a){this.previousValue=t,this.currentValue=e,this.firstChange=a}isFirstChange(){return this.firstChange}}function Al(){return uE}function uE(r){return r.type.prototype.ngOnChanges&&(r.setInput=eT),lE}function lE(){const r=Sv(this),t=r?.current;if(t){const e=r.previous;if(e===ad)r.previous=t;else for(let a in t)e[a]=t[a];r.current=null,this.ngOnChanges(t)}}function eT(r,t,e,a){const d=this.declaredInputs[e],m=Sv(r)||function M2(r,t){return r[TS]=t}(r,{previous:ad,current:null}),b=m.current||(m.current={}),T=m.previous,N=T[d];b[d]=new vl(N&&N.currentValue,t,T===ad),r[a]=t}Al.ngInherit=!0;const TS="__ngSimpleChanges__";function Sv(r){return r[TS]||null}function Xa(r){for(;Array.isArray(r);)r=r[0];return r}function RS(r,t){return Xa(t[r])}function Bc(r,t){return Xa(t[r.index])}function xg(r,t){return r.data[t]}function qf(r,t){return r[t]}function Ma(r,t){const e=t[r];return xu(e)?e:e[0]}function Iv(r){return 64==(64&r[2])}function Vp(r,t){return null==t?null:r[t]}function hE(r){r[18]=0}function OS(r,t){r[5]+=t;let e=r,a=r[3];for(;null!==a&&(1===t&&1===e[5]||-1===t&&0===e[5]);)a[5]+=t,e=a,a=a[3]}const ui={lFrame:Xh(null),bindingsEnabled:!0};function V2(){return ui.bindingsEnabled}function An(){return ui.lFrame.lView}function zi(){return ui.lFrame.tView}function Cc(r){return ui.lFrame.contextLView=r,r[8]}function Ic(r){return ui.lFrame.contextLView=null,r}function Za(){let r=oT();for(;null!==r&&64===r.type;)r=r.parent;return r}function oT(){return ui.lFrame.currentTNode}function ch(r,t){const e=ui.lFrame;e.currentTNode=r,e.isParent=t}function DS(){return ui.lFrame.isParent}function Ws(){ui.lFrame.isParent=!1}function mi(){return ui.lFrame.bindingIndex++}function Jh(r){const t=ui.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function sT(r,t){const e=ui.lFrame;e.bindingIndex=e.bindingRootIndex=r,Lg(t)}function Lg(r){ui.lFrame.currentDirectiveIndex=r}function PS(r){const t=ui.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function NS(){return ui.lFrame.currentQueryIndex}function jp(r){ui.lFrame.currentQueryIndex=r}function Q2(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function aT(r,t,e){if(e&Zr.SkipSelf){let d=t,m=r;for(;!(d=d.parent,null!==d||e&Zr.Host||(d=Q2(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;t=d,r=m}const a=ui.lFrame=Rv();return a.currentTNode=t,a.lView=r,!0}function Bu(r){const t=Rv(),e=r[1];ui.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Rv(){const r=ui.lFrame,t=null===r?null:r.child;return null===t?Xh(r):t}function Xh(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function Xf(){const r=ui.lFrame;return ui.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const mE=Xf;function Qp(){const r=Xf();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ra(){return ui.lFrame.selectedIndex}function ec(r){ui.lFrame.selectedIndex=r}function Ur(){const r=ui.lFrame;return xg(r.tView,r.selectedIndex)}function Hp(){ui.lFrame.currentNamespace="svg"}function Zf(){!function uT(){ui.lFrame.currentNamespace=null}()}function Bg(r,t){for(let e=t.directiveStart,a=t.directiveEnd;e<a;e++){const m=r.data[e].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:N,ngAfterViewChecked:U,ngOnDestroy:ne}=m;b&&(r.contentHooks||(r.contentHooks=[])).push(-e,b),T&&((r.contentHooks||(r.contentHooks=[])).push(e,T),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,T)),N&&(r.viewHooks||(r.viewHooks=[])).push(-e,N),U&&((r.viewHooks||(r.viewHooks=[])).push(e,U),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,U)),null!=ne&&(r.destroyHooks||(r.destroyHooks=[])).push(e,ne)}}function Mo(r,t,e){lT(r,t,3,e)}function tc(r,t,e,a){(3&r[2])===e&&lT(r,t,e,a)}function Ov(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function lT(r,t,e,a){const m=a??-1,b=t.length-1;let T=0;for(let N=void 0!==a?65535&r[18]:0;N<b;N++)if("number"==typeof t[N+1]){if(T=t[N],null!=a&&T>=a)break}else t[N]<0&&(r[18]+=65536),(T<m||-1==m)&&(xS(r,e,t,N),r[18]=(4294901760&r[18])+N+2),N++}function xS(r,t,e,a){const d=e[a]<0,m=e[a+1],T=r[d?-e[a]:e[a]];if(d){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{m.call(T)}finally{}}}else try{m.call(T)}finally{}}class as{constructor(t,e,a){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=a}}function tm(r,t,e){let a=0;for(;a<e.length;){const d=e[a];if("number"==typeof d){if(0!==d)break;a++;const m=e[a++],b=e[a++],T=e[a++];r.setAttribute(t,b,T,m)}else{const m=d,b=e[++a];su(m)?r.setProperty(t,m,b):r.setAttribute(t,m,b),a++}}return a}function H2(r){return 3===r||4===r||6===r}function su(r){return 64===r.charCodeAt(0)}function nm(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let a=0;a<t.length;a++){const d=t[a];"number"==typeof d?e=d:0===e||Wo(r,e,d,null,-1===e||2===e?t[++a]:null)}}return r}function Wo(r,t,e,a,d){let m=0,b=r.length;if(-1===t)b=-1;else for(;m<r.length;){const T=r[m++];if("number"==typeof T){if(T===t){b=-1;break}if(T>t){b=m-1;break}}}for(;m<r.length;){const T=r[m];if("number"==typeof T)break;if(T===e){if(null===a)return void(null!==d&&(r[m+1]=d));if(a===r[m+1])return void(r[m+2]=d)}m++,null!==a&&m++,null!==d&&m++}-1!==b&&(r.splice(b,0,t),m=b+1),r.splice(m++,0,e),null!==a&&r.splice(m++,0,a),null!==d&&r.splice(m++,0,d)}function LS(r){return-1!==r}function AE(r){return 32767&r}function BS(r,t){let e=function hT(r){return r>>16}(r),a=t;for(;e>0;)a=a[15],e--;return a}let yE=!0;function ia(r){const t=yE;return yE=r,t}let uh=0;const dd={};function pd(r,t){const e=im(r,t);if(-1!==e)return e;const a=t[1];a.firstCreatePass&&(r.injectorIndex=t.length,Fu(a.data,r),Fu(t,null),Fu(a.blueprint,null));const d=kv(r,t),m=r.injectorIndex;if(LS(d)){const b=AE(d),T=BS(d,t),N=T[1].data;for(let U=0;U<8;U++)t[m+U]=T[b+U]|N[b+U]}return t[m+8]=d,m}function Fu(r,t){r.push(0,0,0,0,0,0,0,0,t)}function im(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function kv(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,a=null,d=t;for(;null!==d;){if(a=Ug(d),null===a)return-1;if(e++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|e<<16}return-1}function Ks(r,t,e){!function hd(r,t,e){let a;"string"==typeof e?a=e.charCodeAt(0)||0:e.hasOwnProperty(nE)&&(a=e[nE]),null==a&&(a=e[nE]=uh++);const d=255&a;t.data[r+(d>>5)]|=1<<d}(r,t,e)}function om(r,t,e){if(e&Zr.Optional||void 0!==r)return r;Jy()}function bE(r,t,e,a){if(e&Zr.Optional&&void 0===a&&(a=null),0==(e&(Zr.Self|Zr.Host))){const d=r[9],m=sd(void 0);try{return d?d.get(t,a,e&Zr.Optional):sr(t,a,e&Zr.Optional)}finally{sd(m)}}return om(a,0,e)}function FS(r,t,e,a=Zr.Default,d){if(null!==r){if(1024&t[2]){const b=function wE(r,t,e,a,d){let m=r,b=t;for(;null!==m&&null!==b&&1024&b[2]&&!(256&b[2]);){const T=pT(m,b,e,a|Zr.Self,dd);if(T!==dd)return T;let N=m.parent;if(!N){const U=b[21];if(U){const ne=U.get(e,dd,a);if(ne!==dd)return ne}N=Ug(b),b=b[15]}m=N}return d}(r,t,e,a,dd);if(b!==dd)return b}const m=pT(r,t,e,a,dd);if(m!==dd)return m}return bE(t,e,a,d)}function pT(r,t,e,a,d){const m=function SE(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(nE)?r[nE]:void 0;return"number"==typeof t?t>=0?255&t:CE:t}(e);if("function"==typeof m){if(!aT(t,r,a))return a&Zr.Host?om(d,0,a):bE(t,e,a,d);try{const b=m(a);if(null!=b||a&Zr.Optional)return b;Jy()}finally{mE()}}else if("number"==typeof m){let b=null,T=im(r,t),N=-1,U=a&Zr.Host?t[16][6]:null;for((-1===T||a&Zr.SkipSelf)&&(N=-1===T?kv(r,t):t[T+8],-1!==N&&fT(a,!1)?(b=t[1],T=AE(N),t=BS(N,t)):T=-1);-1!==T;){const ne=t[1];if(yl(m,T,ne.data)){const ve=fd(T,t,e,b,a,U);if(ve!==dd)return ve}N=t[T+8],-1!==N&&fT(a,t[1].data[T+8]===U)&&yl(m,T,t)?(b=ne,T=AE(N),t=BS(N,t)):T=-1}}return d}function fd(r,t,e,a,d,m){const b=t[1],T=b.data[r+8],ne=Zh(T,b,e,null==a?Fp(T)&&yE:a!=b&&0!=(3&T.type),d&Zr.Host&&m===T);return null!==ne?Fg(t,b,ne,T):dd}function Zh(r,t,e,a,d){const m=r.providerIndexes,b=t.data,T=1048575&m,N=r.directiveStart,ne=m>>20,Qe=d?T+ne:r.directiveEnd;for(let Ke=a?T:T+ne;Ke<Qe;Ke++){const at=b[Ke];if(Ke<N&&e===at||Ke>=N&&at.type===e)return Ke}if(d){const Ke=b[N];if(Ke&&xs(Ke)&&Ke.type===e)return N}return null}function Fg(r,t,e,a){let d=r[e];const m=t.data;if(function Yi(r){return r instanceof as}(d)){const b=d;b.resolving&&function mS(r,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new vn(-200,`Circular dependency in DI detected for ${r}${e}`)}(function co(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ci(r)}(m[e]));const T=ia(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?sd(b.injectImpl):null;aT(r,a,Zr.Default);try{d=r[e]=b.factory(void 0,m,r,a),t.firstCreatePass&&e>=a.directiveStart&&function MS(r,t,e){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:m}=t.type.prototype;if(a){const b=uE(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,b),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,b)}d&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,d),m&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,m),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,m))}(e,m[e],t)}finally{null!==N&&sd(N),ia(T),b.resolving=!1,mE()}}return d}function yl(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function fT(r,t){return!(r&Zr.Self||r&Zr.Host&&t)}class Pv{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,a){return FS(this._tNode,this._lView,t,nh(a),e)}}function CE(){return new Pv(Za(),An())}function Zo(r){return ml(()=>{const t=r.prototype.constructor,e=t[Mp]||IE(t),a=Object.prototype;let d=Object.getPrototypeOf(r.prototype).constructor;for(;d&&d!==a;){const m=d[Mp]||IE(d);if(m&&m!==e)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function IE(r){return jn(r)?()=>{const t=IE(Dr(r));return t&&t()}:Mg(r)}function Ug(r){const t=r[1],e=t.type;return 2===e?t.declTNode:1===e?r[6]:null}function sm(r){return function Fc(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const a=e.length;let d=0;for(;d<a;){const m=e[d];if(H2(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<a&&"string"==typeof e[d];)d++;else{if(m===t)return e[d+1];d+=2}}}return null}(Za(),r)}const Gp="__parameters__";function ep(r,t,e){return ml(()=>{const a=function cs(r){return function(...e){if(r){const a=r(...e);for(const d in a)this[d]=a[d]}}}(t);function d(...m){if(this instanceof d)return a.apply(this,m),this;const b=new d(...m);return T.annotation=b,T;function T(N,U,ne){const ve=N.hasOwnProperty(Gp)?N[Gp]:Object.defineProperty(N,Gp,{value:[]})[Gp];for(;ve.length<=ne;)ve.push(null);return(ve[ne]=ve[ne]||[]).push(b),N}}return e&&(d.prototype=Object.create(e.prototype)),d.prototype.ngMetadataName=r,d.annotationCls=d,d})}class zn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=vr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function au(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let a=r[e];Array.isArray(a)?(t===r&&(t=r.slice(0,e)),au(a,t)):t!==r&&t.push(a)}return t}function tp(r,t){r.forEach(e=>Array.isArray(e)?tp(e,t):t(e))}function _T(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Vg(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Kp(r,t){const e=[];for(let a=0;a<r;a++)e.push(t);return e}function cu(r,t,e){let a=Yp(r,t);return a>=0?r[1|a]=e:(a=~a,function QS(r,t,e,a){let d=r.length;if(d==t)r.push(e,a);else if(1===d)r.push(a,r[0]),r[0]=e;else{for(d--,r.push(r[d-1],r[d]);d>t;)r[d]=r[d-2],d--;r[t]=e,r[t+1]=a}}(r,a,t,e)),a}function DE(r,t){const e=Yp(r,t);if(e>=0)return r[1|e]}function Yp(r,t){return function vT(r,t,e){let a=0,d=r.length>>e;for(;d!==a;){const m=a+(d-a>>1),b=r[m<<e];if(t===b)return m<<e;b>t?d=m:a=m+1}return~(d<<e)}(r,t,1)}const Uc=rh(ep("Optional"),8),Lv=rh(ep("SkipSelf"),4);var lu=(()=>((lu=lu||{})[lu.Important=1]="Important",lu[lu.DashCase=2]="DashCase",lu))();const tC=new Map;let dm=0;const HE="__ngContext__";function sa(r,t){xu(t)?(r[HE]=t[20],function Qi(r){tC.set(r[20],r)}(t)):r[HE]=t}function lh(r,t){return undefined(r,t)}function md(r){const t=r[3];return Ms(t)?t[3]:t}function rp(r){return rc(r[13])}function Kg(r){return rc(r[4])}function rc(r){for(;null!==r&&!Ms(r);)r=r[4];return r}function kr(r,t,e,a,d){if(null!=a){let m,b=!1;Ms(a)?m=a:xu(a)&&(b=!0,a=a[0]);const T=Xa(a);0===r&&null!==e?null==d?zg(t,e,T):_d(t,e,T,d||null,!0):1===r&&null!==e?_d(t,e,T,d||null,!0):2===r?function uC(r,t,e){const a=Yg(r,t);a&&function Zp(r,t,e,a){r.removeChild(t,e,a)}(r,a,t,e)}(t,T,b):3===r&&t.destroyNode(T),null!=m&&function dC(r,t,e,a,d){const m=e[7];m!==Xa(e)&&kr(t,r,a,m,d);for(let T=10;T<e.length;T++){const N=e[T];Wv(N[1],N,r,t,a,m)}}(t,r,m,e,d)}}function gd(r,t,e){return r.createElement(t,e)}function aC(r,t){const e=r[9],a=e.indexOf(t),d=t[3];512&t[2]&&(t[2]&=-513,OS(d,-1)),e.splice(a,1)}function hu(r,t){if(r.length<=10)return;const e=10+t,a=r[e];if(a){const d=a[17];null!==d&&d!==r&&aC(d,a),t>0&&(r[e-1][4]=a[4]);const m=Vg(r,10+t);!function DT(r,t){Wv(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(a[1],a);const b=m[19];null!==b&&b.detachView(m[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Xp(r,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Wv(r,t,e,3,null,null),function GE(r){let t=r[13];if(!t)return WE(r[1],r);for(;t;){let e=null;if(xu(t))e=t[13];else{const a=t[10];a&&(e=a)}if(!e){for(;t&&!t[4]&&t!==r;)xu(t)&&WE(t[1],t),t=t[3];null===t&&(t=r),xu(t)&&WE(t[1],t),e=t&&t[4]}t=e}}(t)}}function WE(r,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function eP(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let a=0;a<e.length;a+=2){const d=t[e[a]];if(!(d instanceof as)){const m=e[a+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=d[m[b]],N=m[b+1];try{N.call(T)}finally{}}else try{m.call(d)}finally{}}}}(r,t),function bl(r,t){const e=r.cleanup,a=t[7];let d=-1;if(null!==e)for(let m=0;m<e.length-1;m+=2)if("string"==typeof e[m]){const b=e[m+3];b>=0?a[d=b]():a[d=-b].unsubscribe(),m+=2}else{const b=a[d=e[m+1]];e[m].call(b)}if(null!==a){for(let m=d+1;m<a.length;m++)(0,a[m])();t[7]=null}}(r,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Ms(t[3])){e!==t[3]&&aC(e,t);const a=t[19];null!==a&&a.detachView(r)}!function nC(r){tC.delete(r[20])}(t)}}function Hv(r,t,e){return function kT(r,t,e){let a=t;for(;null!==a&&40&a.type;)a=(t=a).parent;if(null===a)return e[0];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:m}=r.data[a.directiveStart+d];if(m===Ja.None||m===Ja.Emulated)return null}return Bc(a,e)}}(r,t.parent,e)}function _d(r,t,e,a,d){r.insertBefore(t,e,a,d)}function zg(r,t,e){r.appendChild(t,e)}function cC(r,t,e,a,d){null!==a?_d(r,t,e,a,d):zg(r,t,e)}function Yg(r,t){return r.parentNode(t)}function Gv(r,t,e){return zs(r,t,e)}let qE,pu,zs=function Ni(r,t,e){return 40&r.type?Bc(r,e):null};function PT(r,t,e,a){const d=Hv(r,a,t),m=t[11],T=Gv(a.parent||t[6],a,t);if(null!=d)if(Array.isArray(e))for(let N=0;N<e.length;N++)cC(m,d,e[N],T,!1);else cC(m,d,e,T,!1)}function mm(r,t){if(null!==t){const e=t.type;if(3&e)return Bc(t,r);if(4&e)return zE(-1,r[t.index]);if(8&e){const a=t.child;if(null!==a)return mm(r,a);{const d=r[t.index];return Ms(d)?zE(-1,d):Xa(d)}}if(32&e)return lh(t,r)()||Xa(r[t.index]);{const a=NT(r,t);return null!==a?Array.isArray(a)?a[0]:mm(md(r[16]),a):mm(r,t.next)}}return null}function NT(r,t){return null!==t?r[16][6].projection[t.projection]:null}function zE(r,t){const e=10+r+1;if(e<t.length){const a=t[e],d=a[1].firstChild;if(null!==d)return mm(a,d)}return t[7]}function vd(r,t,e,a,d,m,b){for(;null!=e;){const T=a[e.index],N=e.type;if(b&&0===t&&(T&&sa(Xa(T),a),e.flags|=2),32!=(32&e.flags))if(8&N)vd(r,t,e.child,a,d,m,!1),kr(t,r,d,T,m);else if(32&N){const U=lh(e,a);let ne;for(;ne=U();)kr(t,r,d,ne,m);kr(t,r,d,T,m)}else 16&N?YE(r,t,a,e,d,m):kr(t,r,d,T,m);e=b?e.projectionNext:e.next}}function Wv(r,t,e,a,d,m){vd(e,a,r.firstChild,t,d,m,!1)}function YE(r,t,e,a,d,m){const b=e[16],N=b[6].projection[a.projection];if(Array.isArray(N))for(let U=0;U<N.length;U++)kr(t,r,d,N[U],m);else vd(r,t,N,b[3],d,m,!0)}function zv(r,t,e){""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function MT(r,t,e){const{mergedAttrs:a,classes:d,styles:m}=e;null!==a&&tm(r,t,a),null!==d&&zv(r,t,d),null!==m&&function nB(r,t,e){r.setAttribute(t,"style",e)}(r,t,m)}function hh(r){return function Ys(){if(void 0===qE&&(qE=null,Xo.trustedTypes))try{qE=Xo.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return qE}()?.createHTML(r)||r}class ur{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qy})`}}class Am extends ur{getTypeName(){return"HTML"}}class ii extends ur{getTypeName(){return"Style"}}class Hu extends ur{getTypeName(){return"Script"}}class rB extends ur{getTypeName(){return"URL"}}class Yv extends ur{getTypeName(){return"ResourceURL"}}function Gu(r){return r instanceof ur?r.changingThisBreaksApplicationSecurity:r}function Zi(r,t){const e=function Jg(r){return r instanceof ur&&r.getTypeName()||null}(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${qy})`)}return e===t}class nP{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(hh(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class rP{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const a=this.inertDocument.createElement("body");e.appendChild(a)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=hh(t),e;const a=this.inertDocument.createElement("body");return a.innerHTML=hh(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(t){const e=t.attributes;for(let d=e.length-1;0<d;d--){const b=e.item(d).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&t.removeAttribute(b)}let a=t.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const FT=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Jv(r){return(r=String(r)).match(FT)?r:"unsafe:"+r}function Wu(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function $v(...r){const t={};for(const e of r)for(const a in e)e.hasOwnProperty(a)&&(t[a]=!0);return t}const Xv=Wu("area,br,col,hr,img,wbr"),gC=Wu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zv=Wu("rp,rt"),eA=$v(Xv,$v(gC,Wu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$v(Zv,Wu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$v(Zv,gC)),$E=Wu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ym=$v($E,Wu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),iP=Wu("script,style,template");class jT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,a=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?a=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,a&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let d=this.checkClobberedElement(e,e.nextSibling);if(d){e=d;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!eA.hasOwnProperty(e))return this.sanitizedSomething=!0,!iP.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const a=t.attributes;for(let d=0;d<a.length;d++){const m=a.item(d),b=m.name,T=b.toLowerCase();if(!ym.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let N=m.value;$E[T]&&(N=Jv(N)),this.buf.push(" ",b,'="',vC(N),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();eA.hasOwnProperty(e)&&!Xv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(vC(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const $g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oP=/([^\#-~ |!])/g;function vC(r){return r.replace(/&/g,"&amp;").replace($g,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(oP,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ef;function XE(r,t){let e=null;try{ef=ef||function mC(r){const t=new rP(r);return function BT(){try{return!!(new window.DOMParser).parseFromString(hh(""),"text/html")}catch{return!1}}()?new nP(t):t}(r);let a=t?String(t):"";e=ef.getInertBodyElement(a);let d=5,m=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=m,m=e.innerHTML,e=ef.getInertBodyElement(a)}while(a!==m);return hh((new jT).sanitizeChildren(tA(e)||e))}finally{if(e){const a=tA(e)||e;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function tA(r){return"content"in r&&function op(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var eo=(()=>((eo=eo||{})[eo.NONE=0]="NONE",eo[eo.HTML=1]="HTML",eo[eo.STYLE=2]="STYLE",eo[eo.SCRIPT=3]="SCRIPT",eo[eo.URL=4]="URL",eo[eo.RESOURCE_URL=5]="RESOURCE_URL",eo))();const HT=new zn("ENVIRONMENT_INITIALIZER"),GT=new zn("INJECTOR",-1),jc=new zn("INJECTOR_DEF_TYPES");class lP{get(t,e=Un){if(e===Un){const a=new Error(`NullInjectorError: No provider for ${Ho(t)}!`);throw a.name="NullInjectorError",a}return e}}function dP(...r){return{\u0275providers:nA(0,r),\u0275fromNgModule:!0}}function nA(r,...t){const e=[],a=new Set;let d;return tp(t,m=>{const b=m;SC(b,e,[],a)&&(d||(d=[]),d.push(b))}),void 0!==d&&WT(d,e),e}function WT(r,t){for(let e=0;e<r.length;e++){const{providers:d}=r[e];CC(d,m=>{t.push(m)})}}function SC(r,t,e,a){if(!(r=Dr(r)))return!1;let d=null,m=I2(r);const b=!m&&oo(r);if(m||b){if(b&&!b.standalone)return!1;d=r}else{const N=r.ngModule;if(m=I2(N),!m)return!1;d=N}const T=a.has(d);if(b){if(T)return!1;if(a.add(d),b.dependencies){const N="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const U of N)SC(U,t,e,a)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let U;a.add(d);try{tp(m.imports,ne=>{SC(ne,t,e,a)&&(U||(U=[]),U.push(ne))})}finally{}void 0!==U&&WT(U,t)}if(!T){const U=Mg(d)||(()=>new d);t.push({provide:d,useFactory:U,deps:uo},{provide:jc,useValue:d,multi:!0},{provide:HT,useValue:()=>rn(d),multi:!0})}const N=m.providers;null==N||T||CC(N,ne=>{t.push(ne)})}}return d!==r&&void 0!==r.providers}function CC(r,t){for(let e of r)Gf(e)&&(e=e.\u0275providers),Array.isArray(e)?CC(e,t):t(e)}const hP=Qo({provide:String,useValue:Qo});function IC(r){return null!==r&&"object"==typeof r&&hP in r}function Em(r){return"function"==typeof r}const bm=new zn("Set Injector scope."),Xg={},YT={};let ZE;function eb(){return void 0===ZE&&(ZE=new lP),ZE}class Zg{}class Sm extends Zg{constructor(t,e,a,d){super(),this.parent=e,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,TC(t,b=>this.processProvider(b)),this.records.set(GT,us(void 0,this)),d.has("environment")&&this.records.set(Zg,us(void 0,this));const m=this.records.get(bm);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(jc.multi,uo,Zr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Av(this),a=sd(void 0);try{return t()}finally{Av(e),sd(a)}}get(t,e=Un,a=Zr.Default){this.assertNotDestroyed(),a=nh(a);const d=Av(this),m=sd(void 0);try{if(!(a&Zr.SkipSelf)){let T=this.records.get(t);if(void 0===T){const N=function wC(r){return"function"==typeof r||"object"==typeof r&&r instanceof zn}(t)&&gS(t);T=N&&this.injectableDefInScope(N)?us(iA(t),Xg):null,this.records.set(t,T)}if(null!=T)return this.hydrate(t,T)}return(a&Zr.Self?eb():this.parent).get(t,e=a&Zr.Optional&&e===Un?null:e)}catch(b){if("NullInjectorError"===b.name){if((b[Zy]=b[Zy]||[]).unshift(Ho(t)),d)throw b;return function Dg(r,t,e,a){const d=r[Zy];throw t[eE]&&d.unshift(t[eE]),r.message=function Pu(r,t,e,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let d=Ho(t);if(Array.isArray(t))d=t.map(Ho).join(" -> ");else if("object"==typeof t){let m=[];for(let b in t)if(t.hasOwnProperty(b)){let T=t[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):Ho(T)))}d=`{${m.join(", ")}}`}return`${e}${a?"("+a+")":""}[${d}]: ${r.replace(fi,"\n  ")}`}("\n"+r.message,d,e,a),r.ngTokenPath=d,r[Zy]=null,r}(b,t,"R3InjectorError",this.source)}throw b}finally{sd(m),Av(d)}}resolveInjectorInitializers(){const t=Av(this),e=sd(void 0);try{const a=this.get(HT.multi,uo,Zr.Self);for(const d of a)d()}finally{Av(t),sd(e)}}toString(){const t=[],e=this.records;for(const a of e.keys())t.push(Ho(a));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new vn(205,!1)}processProvider(t){let e=Em(t=Dr(t))?t:Dr(t&&t.provide);const a=function qT(r){return IC(r)?us(void 0,r.useValue):us(JT(r),Xg)}(t);if(Em(t)||!0!==t.multi)this.records.get(e);else{let d=this.records.get(e);d||(d=us(void 0,Xg,!0),d.factory=()=>AS(d.multi),this.records.set(e,d)),e=t,d.multi.push(t)}this.records.set(e,a)}hydrate(t,e){return e.value===Xg&&(e.value=YT,e.value=e.factory()),"object"==typeof e.value&&e.value&&function fP(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Dr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function iA(r){const t=gS(r),e=null!==t?t.factory:Mg(r);if(null!==e)return e;if(r instanceof zn)throw new vn(204,!1);if(r instanceof Function)return function Cm(r){const t=r.length;if(t>0)throw Kp(t,"?"),new vn(204,!1);const e=function od(r){const t=r&&(r[io]||r[$y]);if(t){const e=function eh(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new vn(204,!1)}function JT(r,t,e){let a;if(Em(r)){const d=Dr(r);return Mg(d)||iA(d)}if(IC(r))a=()=>Dr(r.useValue);else if(function zT(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...AS(r.deps||[]));else if(function KT(r){return!(!r||!r.useExisting)}(r))a=()=>rn(Dr(r.useExisting));else{const d=Dr(r&&(r.useClass||r.provide));if(!function pP(r){return!!r.deps}(r))return Mg(d)||iA(d);a=()=>new d(...AS(r.deps))}return a}function us(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function TC(r,t){for(const e of r)Array.isArray(e)?TC(e,t):e&&Gf(e)?TC(e.\u0275providers,t):t(e)}class mP{}class $T{}class gP{resolveComponentFactory(t){throw function sp(r){const t=Error(`No component factory found for ${Ho(r)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=r,t}(t)}}let Im=(()=>{class r{}return r.NULL=new gP,r})();function RC(){return ap(Za(),An())}function ap(r,t){return new ki(Bc(r,t))}let ki=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=RC,r})();function OC(r){return r instanceof ki?r.nativeElement:r}class yd{}let Ed=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function ZT(){const r=An(),e=Ma(Za().index,r);return(xu(e)?e:r)[11]}(),r})(),eR=(()=>{class r{}return r.\u0275prov=vr({token:r,providedIn:"root",factory:()=>null}),r})();class nf{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const DC=new nf("15.0.2"),fh={};function tb(r){return r.ngOriginalError}class Sl{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&tb(t);for(;e&&tb(e);)e=tb(e);return e||null}}function sA(r){return r.ownerDocument.defaultView}function iR(r,t,e){let a=r.length;for(;;){const d=r.indexOf(t,e);if(-1===d)return d;if(0===d||r.charCodeAt(d-1)<=32){const m=t.length;if(d+m===a||r.charCodeAt(d+m)<=32)return d}e=d+1}}const oR="ng-template";function PC(r,t,e){let a=0;for(;a<r.length;){let d=r[a++];if(e&&"class"===d){if(d=r[a],-1!==iR(d.toLowerCase(),t,0))return!0}else if(1===d){for(;a<r.length&&"string"==typeof(d=r[a++]);)if(d.toLowerCase()===t)return!0;return!1}}return!1}function sR(r){return 4===r.type&&r.value!==oR}function $4(r,t,e){return t===(4!==r.type||e?r.value:oR)}function X4(r,t,e){let a=4;const d=r.attrs||[],m=function eV(r){for(let t=0;t<r.length;t++)if(H2(r[t]))return t;return r.length}(d);let b=!1;for(let T=0;T<t.length;T++){const N=t[T];if("number"!=typeof N){if(!b)if(4&a){if(a=2|1&a,""!==N&&!$4(r,N,e)||""===N&&1===t.length){if(Cl(a))return!1;b=!0}}else{const U=8&a?N:t[++T];if(8&a&&null!==r.attrs){if(!PC(r.attrs,U,e)){if(Cl(a))return!1;b=!0}continue}const ve=Z4(8&a?"class":N,d,sR(r),e);if(-1===ve){if(Cl(a))return!1;b=!0;continue}if(""!==U){let Qe;Qe=ve>m?"":d[ve+1].toLowerCase();const Ke=8&a?Qe:null;if(Ke&&-1!==iR(Ke,U,0)||2&a&&U!==Qe){if(Cl(a))return!1;b=!0}}}}else{if(!b&&!Cl(a)&&!Cl(N))return!1;if(b&&Cl(N))continue;b=!1,a=N|1&a}}return Cl(a)||b}function Cl(r){return 0==(1&r)}function Z4(r,t,e,a){if(null===t)return-1;let d=0;if(a||!e){let m=!1;for(;d<t.length;){const b=t[d];if(b===r)return d;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=t[++d];for(;"string"==typeof T;)T=t[++d];continue}if(4===b)break;if(0===b){d+=4;continue}}d+=m?1:2}return-1}return function tV(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const a=r[e];if("number"==typeof a)return-1;if(a===t)return e;e++}return-1}(t,r)}function hB(r,t,e=!1){for(let a=0;a<t.length;a++)if(X4(r,t[a],e))return!0;return!1}function nV(r,t){e:for(let e=0;e<t.length;e++){const a=t[e];if(r.length===a.length){for(let d=0;d<r.length;d++)if(r[d]!==a[d])continue e;return!0}}return!1}function vP(r,t){return r?":not("+t.trim()+")":t}function AP(r){let t=r[0],e=1,a=2,d="",m=!1;for(;e<r.length;){let b=r[e];if("string"==typeof b)if(2&a){const T=r[++e];d+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&a?d+="."+b:4&a&&(d+=" "+b);else""!==d&&!Cl(b)&&(t+=vP(m,d),d=""),a=b,m=m||!Cl(a);e++}return""!==d&&(t+=vP(m,d)),t}const li={};function Cn(r){aR(zi(),An(),ra()+r,!1)}function aR(r,t,e,a){if(!a)if(3==(3&t[2])){const m=r.preOrderCheckHooks;null!==m&&Mo(t,m,e)}else{const m=r.preOrderHooks;null!==m&&tc(t,m,0,e)}ec(e)}function MC(r,t=null,e=null,a){const d=xC(r,t,e,a);return d.resolveInjectorInitializers(),d}function xC(r,t=null,e=null,a,d=new Set){const m=[e||uo,dP(r)];return a=a||("object"==typeof r?void 0:Ho(r)),new Sm(m,t||eb(),a||null,d)}let Qc=(()=>{class r{static create(e,a){if(Array.isArray(e))return MC({name:""},a,e,"");{const d=e.name??"";return MC({name:d},e.parent,e.providers,d)}}}return r.THROW_IF_NOT_FOUND=Un,r.NULL=new lP,r.\u0275prov=vr({token:r,providedIn:"any",factory:()=>rn(GT)}),r.__NG_ELEMENT_ID__=-1,r})();function At(r,t=Zr.Default){const e=An();return null===e?rn(r,t):FS(Za(),e,Dr(r),t)}function dA(){throw new Error("invalid")}function bR(r,t){const e=r.contentQueries;if(null!==e)for(let a=0;a<e.length;a+=2){const d=e[a],m=e[a+1];if(-1!==m){const b=r.data[m];jp(d),b.contentQueries(2,t[m],m)}}}function r_(r,t,e,a,d,m,b,T,N,U,ne){const ve=t.blueprint.slice();return ve[0]=d,ve[2]=76|a,(null!==ne||r&&1024&r[2])&&(ve[2]|=1024),hE(ve),ve[3]=ve[15]=r,ve[8]=e,ve[10]=b||r&&r[10],ve[11]=T||r&&r[11],ve[12]=N||r&&r[12]||null,ve[9]=U||r&&r[9]||null,ve[6]=m,ve[20]=function IT(){return dm++}(),ve[21]=ne,ve[16]=2==t.type?r[16]:ve,ve}function i_(r,t,e,a,d){let m=r.data[t];if(null===m)m=function WC(r,t,e,a,d){const m=oT(),b=DS(),N=r.data[t]=function RP(r,t,e,a,d,m){return{type:e,index:a,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,e,t,a,d);return null===r.firstChild&&(r.firstChild=N),null!==m&&(b?null==m.child&&null!==N.parent&&(m.child=N):null===m.next&&(m.next=N)),N}(r,t,e,a,d),function ni(){return ui.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=e,m.value=a,m.attrs=d;const b=function Jf(){const r=ui.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return ch(m,!0),m}function KC(r,t,e,a){if(0===e)return-1;const d=t.length;for(let m=0;m<e;m++)t.push(a),r.blueprint.push(a),r.data.push(null);return d}function CP(r,t,e){Bu(t);try{const a=r.viewQuery;null!==a&&ub(1,a,e);const d=r.template;null!==d&&_B(r,t,d,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&bR(r,t),r.staticViewQueries&&ub(2,r.viewQuery,e);const m=r.components;null!==m&&function SR(r,t){for(let e=0;e<t.length;e++)YC(r,t[e])}(t,m)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{t[2]&=-5,Qp()}}function CR(r,t,e,a){const d=t[2];if(128!=(128&d)){Bu(t);try{hE(t),function xa(r){return ui.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&_B(r,t,e,2,a);const b=3==(3&d);if(b){const U=r.preOrderCheckHooks;null!==U&&Mo(t,U,null)}else{const U=r.preOrderHooks;null!==U&&tc(t,U,0,null),Ov(t,0)}if(function s_(r){for(let t=rp(r);null!==t;t=Kg(t)){if(!t[2])continue;const e=t[9];for(let a=0;a<e.length;a++){const d=e[a],m=d[3];0==(512&d[2])&&OS(m,1),d[2]|=512}}}(t),function o_(r){for(let t=rp(r);null!==t;t=Kg(t))for(let e=10;e<t.length;e++){const a=t[e],d=a[1];Iv(a)&&CR(d,a,d.template,a[8])}}(t),null!==r.contentQueries&&bR(r,t),b){const U=r.contentCheckHooks;null!==U&&Mo(t,U)}else{const U=r.contentHooks;null!==U&&tc(t,U,1),Ov(t,1)}!function HC(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let a=0;a<e.length;a++){const d=e[a];if(d<0)ec(~d);else{const m=d,b=e[++a],T=e[++a];sT(b,m),T(2,t[m])}}}finally{ec(-1)}}(r,t);const T=r.components;null!==T&&function GC(r,t){for(let e=0;e<t.length;e++)sf(r,t[e])}(t,T);const N=r.viewQuery;if(null!==N&&ub(2,N,a),b){const U=r.viewCheckHooks;null!==U&&Mo(t,U)}else{const U=r.viewHooks;null!==U&&tc(t,U,2),Ov(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,OS(t[3],-1))}finally{Qp()}}}function _B(r,t,e,a,d){const m=ra(),b=2&a;try{ec(-1),b&&t.length>22&&aR(r,t,22,!1),e(a,d)}finally{ec(m)}}function IP(r,t,e){if(ar(t)){const d=t.directiveEnd;for(let m=t.directiveStart;m<d;m++){const b=r.data[m];b.contentQueries&&b.contentQueries(1,e[m],m)}}}function wP(r,t,e){!V2()||(function mu(r,t,e,a){const d=e.directiveStart,m=e.directiveEnd;r.firstCreatePass||pd(e,t),sa(a,t);const b=e.initialInputs;for(let T=d;T<m;T++){const N=r.data[T],U=xs(N);U&&PR(t,e,N);const ne=Fg(t,r,T,e);sa(ne,t),null!==b&&mh(0,T-d,ne,N,0,b),U&&(Ma(e.index,t)[8]=ne)}}(r,t,e,Bc(e,t)),64==(64&e.flags)&&Dm(r,t,e))}function IR(r,t,e=Bc){const a=t.localNames;if(null!==a){let d=t.index+1;for(let m=0;m<a.length;m+=2){const b=a[m+1],T=-1===b?e(t,r):r[b];r[d++]=T}}}function TP(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Om(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Om(r,t,e,a,d,m,b,T,N,U){const ne=22+a,ve=ne+d,Qe=function ob(r,t){const e=[];for(let a=0;a<t;a++)e.push(a<r?null:li);return e}(ne,ve),Ke="function"==typeof U?U():U;return Qe[1]={type:r,blueprint:Qe,template:e,queries:null,viewQuery:T,declTNode:t,data:Qe.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:Ke,incompleteFirstPass:!1}}function wR(r,t,e,a){const d=lb(t);null===e?d.push(a):(d.push(e),r.firstCreatePass&&zu(r).push(a,d.length-1))}function hA(r,t,e,a){for(let d in r)if(r.hasOwnProperty(d)){e=null===e?{}:e;const m=r[d];null===a?OP(e,t,d,m):a.hasOwnProperty(d)&&OP(e,t,a[d],m)}return e}function OP(r,t,e,a){r.hasOwnProperty(e)?r[e].push(t,a):r[e]=[t,a]}function fu(r,t,e,a,d,m,b,T){const N=Bc(t,e);let ne,U=t.inputs;!T&&null!=U&&(ne=U[a])?(mA(r,e,ne,a,d),Fp(t)&&rf(e,t.index)):3&t.type&&(a=function TR(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),d=null!=b?b(d,t.value||"",a):d,m.setProperty(N,a,d))}function rf(r,t){const e=Ma(t,r);16&e[2]||(e[2]|=32)}function up(r,t,e,a){let d=!1;if(V2()){const m=null===a?null:{"":-1},b=function fA(r,t){const e=r.directiveRegistry;let a=null,d=null;if(e)for(let m=0;m<e.length;m++){const b=e[m];if(hB(t,b.selectors,!1))if(a||(a=[]),xs(b))if(null!==b.findHostDirectiveDefs){const T=[];d=d||new Map,b.findHostDirectiveDefs(b,T,d),a.unshift(...T,b),cb(r,t,T.length)}else a.unshift(b),cb(r,t,0);else d=d||new Map,b.findHostDirectiveDefs?.(b,a,d),a.push(b)}return null===a?null:[a,d]}(r,e);let T,N;null===b?T=N=null:[T,N]=b,null!==T&&(d=!0,ab(r,t,e,T,m,N)),m&&function DR(r,t,e){if(t){const a=r.localNames=[];for(let d=0;d<t.length;d+=2){const m=e[t[d+1]];if(null==m)throw new vn(-301,!1);a.push(t[d],m)}}}(e,a,m)}return e.mergedAttrs=nm(e.mergedAttrs,e.attrs),d}function ab(r,t,e,a,d,m){for(let U=0;U<a.length;U++)Ks(pd(e,t),r,a[U].type);!function DP(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}(e,r.data.length,a.length);for(let U=0;U<a.length;U++){const ne=a[U];ne.providersResolver&&ne.providersResolver(ne)}let b=!1,T=!1,N=KC(r,t,a.length,null);for(let U=0;U<a.length;U++){const ne=a[U];e.mergedAttrs=nm(e.mergedAttrs,ne.hostAttrs),kR(r,e,t,N,ne),km(N,ne,d),null!==ne.contentQueries&&(e.flags|=4),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(e.flags|=64);const ve=ne.type.prototype;!b&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),b=!0),!T&&(ve.ngOnChanges||ve.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),T=!0),N++}!function vB(r,t,e){const d=t.directiveEnd,m=r.data,b=t.attrs,T=[];let N=null,U=null;for(let ne=t.directiveStart;ne<d;ne++){const ve=m[ne],Qe=e?e.get(ve):null,at=Qe?Qe.outputs:null;N=hA(ve.inputs,ne,N,Qe?Qe.inputs:null),U=hA(ve.outputs,ne,U,at);const Ot=null===N||null===b||sR(t)?null:AB(N,ne,b);T.push(Ot)}null!==N&&(N.hasOwnProperty("class")&&(t.flags|=8),N.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=T,t.inputs=N,t.outputs=U}(r,e,m)}function Dm(r,t,e){const a=e.directiveStart,d=e.directiveEnd,m=e.index,b=function $h(){return ui.lFrame.currentDirectiveIndex}();try{ec(m);for(let T=a;T<d;T++){const N=r.data[T],U=t[T];Lg(T),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&OR(N,U)}}finally{ec(-1),Lg(b)}}function OR(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function cb(r,t,e){t.componentOffset=e,(r.components||(r.components=[])).push(t.index)}function km(r,t,e){if(e){if(t.exportAs)for(let a=0;a<t.exportAs.length;a++)e[t.exportAs[a]]=r;xs(t)&&(e[""]=r)}}function kR(r,t,e,a,d){r.data[a]=d;const m=d.factory||(d.factory=Mg(d.type)),b=new as(m,xs(d),At);r.blueprint[a]=b,e[a]=b,function pA(r,t,e,a,d){const m=d.hostBindings;if(m){let b=r.hostBindingOpCodes;null===b&&(b=r.hostBindingOpCodes=[]);const T=~t.index;(function RR(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(b)!=T&&b.push(T),b.push(e,a,m)}}(r,t,a,KC(r,e,d.hostVars,li),d)}function PR(r,t,e){const a=Bc(t,r),d=TP(e),m=r[10],b=a_(r,r_(r,d,null,e.onPush?32:16,a,t,m,m.createRenderer(a,e),null,null,null));r[t.index]=b}function Il(r,t,e,a,d,m){const b=Bc(r,t);!function lp(r,t,e,a,d,m,b){if(null==m)r.removeAttribute(t,d,e);else{const T=null==b?ci(m):b(m,a||"",d);r.setAttribute(t,d,T,e)}}(t[11],b,m,r.value,e,a,d)}function mh(r,t,e,a,d,m){const b=m[t];if(null!==b){const T=a.setInput;for(let N=0;N<b.length;){const U=b[N++],ne=b[N++],ve=b[N++];null!==T?a.setInput(e,ve,U,ne):e[ne]=ve}}}function AB(r,t,e){let a=null,d=0;for(;d<e.length;){const m=e[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(r.hasOwnProperty(m)){null===a&&(a=[]);const b=r[m];for(let T=0;T<b.length;T+=2)if(b[T]===t){a.push(m,b[T+1],e[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function wl(r,t,e,a){return[r,!0,!1,t,null,0,a,e,null,null]}function sf(r,t){const e=Ma(t,r);if(Iv(e)){const a=e[1];48&e[2]?CR(a,e,a.template,e[8]):e[5]>0&&dp(e)}}function dp(r){for(let a=rp(r);null!==a;a=Kg(a))for(let d=10;d<a.length;d++){const m=a[d];if(Iv(m))if(512&m[2]){const b=m[1];CR(b,m,b.template,m[8])}else m[5]>0&&dp(m)}const e=r[1].components;if(null!==e)for(let a=0;a<e.length;a++){const d=Ma(e[a],r);Iv(d)&&d[5]>0&&dp(d)}}function YC(r,t){const e=Ma(t,r),a=e[1];(function qC(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(a,e),CP(a,e,e[8])}function a_(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function c_(r){for(;r;){r[2]|=32;const t=md(r);if(bi(r)&&!t)return r;r=t}return null}function gh(r,t,e,a=!0){const d=t[10];d.begin&&d.begin();try{CR(r,t,r.template,e)}catch(b){throw a&&u_(t,b),b}finally{d.end&&d.end()}}function ub(r,t,e){jp(0),t(r,e)}function lb(r){return r[7]||(r[7]=[])}function zu(r){return r.cleanup||(r.cleanup=[])}function NR(r,t,e){return(null===r||xs(r))&&(e=function L2(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function u_(r,t){const e=r[9],a=e?e.get(Sl,null):null;a&&a.handleError(t)}function mA(r,t,e,a,d){for(let m=0;m<e.length;){const b=e[m++],T=e[m++],N=t[b],U=r.data[b];null!==U.setInput?U.setInput(N,d,a,T):N[T]=d}}function db(r,t,e){let a=e?r.styles:null,d=e?r.classes:null,m=0;if(null!==t)for(let b=0;b<t.length;b++){const T=t[b];"number"==typeof T?m=T:1==m?d=fS(d,T):2==m&&(a=fS(a,T+": "+t[++b]+";"))}e?r.styles=a:r.stylesWithoutHost=a,e?r.classes=d:r.classesWithoutHost=d}function $C(r,t,e,a,d=!1){for(;null!==e;){const m=t[e.index];if(null!==m&&a.push(Xa(m)),Ms(m))for(let T=10;T<m.length;T++){const N=m[T],U=N[1].firstChild;null!==U&&$C(N[1],N,U,a)}const b=e.type;if(8&b)$C(r,t,e.child,a);else if(32&b){const T=lh(e,t);let N;for(;N=T();)a.push(N)}else if(16&b){const T=NT(t,e);if(Array.isArray(T))a.push(...T);else{const N=md(t[16]);$C(N[1],N,T,a,!0)}}e=d?e.projectionNext:e.next}return a}class Pm{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return $C(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ms(t)){const e=t[8],a=e?e.indexOf(this):-1;a>-1&&(hu(t,a),Vg(e,a))}this._attachedToViewContainer=!1}Xp(this._lView[1],this._lView)}onDestroy(t){wR(this._lView[1],this._lView,null,t)}markForCheck(){c_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new vn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ip(r,t){Wv(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new vn(902,!1);this._appRef=t}}class XC extends Pm{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;gh(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class hb extends Im{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=oo(t);return new l_(e,this.ngModule)}}function pb(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}class xR{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,a){a=nh(a);const d=this.injector.get(t,fh,a);return d!==fh||e===fh?d:this.parentInjector.get(t,e,a)}}class l_ extends $T{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function fB(r){return r.map(AP).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pb(this.componentDef.inputs)}get outputs(){return pb(this.componentDef.outputs)}create(t,e,a,d){let m=(d=d||this.ngModule)instanceof Zg?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new xR(t,m):t,T=b.get(yd,null);if(null===T)throw new vn(407,!1);const N=b.get(eR,null),U=T.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",ve=a?function bd(r,t,e){return r.selectRootElement(t,e===Ja.ShadowDom)}(U,a,this.componentDef.encapsulation):gd(U,ne,function MR(r){const t=r.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(ne)),Qe=this.componentDef.onPush?288:272,Ke=Om(0,null,null,1,0,null,null,null,null,null),at=r_(null,Ke,null,Qe,null,null,T,U,N,b,null);let Ot,tn;Bu(at);try{const an=this.componentDef;let Pn,n=null;an.findHostDirectiveDefs?(Pn=[],n=new Map,an.findHostDirectiveDefs(an,Pn,n),Pn.push(an)):Pn=[an];const o=function LR(r,t){const e=r[1];return r[22]=t,i_(e,22,2,"#host",null)}(at,ve),s=function BR(r,t,e,a,d,m,b,T){const N=d[1];!function mb(r,t,e,a){for(const d of r)t.mergedAttrs=nm(t.mergedAttrs,d.hostAttrs);null!==t.mergedAttrs&&(db(t,t.mergedAttrs,!0),null!==e&&MT(a,e,t))}(a,r,t,b);const U=m.createRenderer(t,e),ne=r_(d,TP(e),null,e.onPush?32:16,d[r.index],r,m,U,T||null,null,null);return N.firstCreatePass&&cb(N,r,a.length-1),a_(d,ne),d[r.index]=ne}(o,ve,an,Pn,at,T,U);tn=xg(Ke,22),ve&&function yB(r,t,e,a){if(a)tm(r,e,["ng-version",DC.full]);else{const{attrs:d,classes:m}=function mB(r){const t=[],e=[];let a=1,d=2;for(;a<r.length;){let m=r[a];if("string"==typeof m)2===d?""!==m&&t.push(m,r[++a]):8===d&&e.push(m);else{if(!Cl(d))break;d=m}a++}return{attrs:t,classes:e}}(t.selectors[0]);d&&tm(r,e,d),m&&m.length>0&&zv(r,e,m.join(" "))}}(U,an,ve,a),void 0!==e&&function EB(r,t,e){const a=r.projection=[];for(let d=0;d<t.length;d++){const m=e[d];a.push(null!=m?Array.from(m):null)}}(tn,this.ngContentSelectors,e),Ot=function FR(r,t,e,a,d,m){const b=Za(),T=d[1],N=Bc(b,d);ab(T,d,b,e,null,a);for(let ne=0;ne<e.length;ne++)sa(Fg(d,T,b.directiveStart+ne,b),d);Dm(T,d,b),N&&sa(N,d);const U=Fg(d,T,b.directiveStart+b.componentOffset,b);if(r[8]=d[8]=U,null!==m)for(const ne of m)ne(U,t);return IP(T,b,r),U}(s,an,Pn,n,at,[PP]),CP(Ke,at,null)}finally{Qp()}return new fb(this.componentType,Ot,ap(tn,at),at,tn)}}class fb extends mP{constructor(t,e,a,d,m){super(),this.location=a,this._rootLView=d,this._tNode=m,this.instance=e,this.hostView=this.changeDetectorRef=new XC(d),this.componentType=t}setInput(t,e){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[t])){const m=this._rootLView;mA(m[1],m,d,t,e),rf(m,this._tNode.index)}}get injector(){return new Pv(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function PP(){const r=Za();Bg(An()[1],r)}function Lr(r){let t=function ZC(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const a=[r];for(;t;){let d;if(xs(r))d=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new vn(903,!1);d=t.\u0275dir}if(d){if(e){a.push(d);const b=r;b.inputs=UR(r.inputs),b.declaredInputs=UR(r.declaredInputs),b.outputs=UR(r.outputs);const T=d.hostBindings;T&&d_(r,T);const N=d.viewQuery,U=d.contentQueries;if(N&&eI(r,N),U&&tI(r,U),yc(r.inputs,d.inputs),yc(r.declaredInputs,d.declaredInputs),yc(r.outputs,d.outputs),xs(d)&&d.data.animation){const ne=r.data;ne.animation=(ne.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(r),T===Lr&&(e=!1)}}t=Object.getPrototypeOf(t)}!function Yu(r){let t=0,e=null;for(let a=r.length-1;a>=0;a--){const d=r[a];d.hostVars=t+=d.hostVars,d.hostAttrs=nm(d.hostAttrs,e=nm(e,d.hostAttrs))}}(a)}function UR(r){return r===ad?{}:r===uo?[]:r}function eI(r,t){const e=r.viewQuery;r.viewQuery=e?(a,d)=>{t(a,d),e(a,d)}:t}function tI(r,t){const e=r.contentQueries;r.contentQueries=e?(a,d,m)=>{t(a,d,m),e(a,d,m)}:t}function d_(r,t){const e=r.hostBindings;r.hostBindings=e?(a,d)=>{t(a,d),e(a,d)}:t}let nI=null;function af(){if(!nI){const r=Xo.Symbol;if(r&&r.iterator)nI=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const a=t[e];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(nI=a)}}}return nI}function h_(r){return!!_b(r)&&(Array.isArray(r)||!(r instanceof Map)&&af()in r)}function _b(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Hc(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function so(r,t,e,a){const d=An();return Hc(d,mi(),t)&&(zi(),Il(Ur(),d,r,t,e,a)),so}function Ua(r,t,e,a){return Hc(r,mi(),e)?t+ci(e)+a:li}function hr(r,t,e,a,d,m,b,T){const N=An(),U=zi(),ne=r+22,ve=U.firstCreatePass?function HR(r,t,e,a,d,m,b,T,N){const U=t.consts,ne=i_(t,r,4,b||null,Vp(U,T));up(t,e,ne,Vp(U,N)),Bg(t,ne);const ve=ne.tViews=Om(2,ne,a,d,m,t.directiveRegistry,t.pipeRegistry,null,t.schemas,U);return null!==t.queries&&(t.queries.template(t,ne),ve.queries=t.queries.embeddedTView(ne)),ne}(ne,U,N,t,e,a,d,m,b):U.data[ne];ch(ve,!1);const Qe=N[11].createComment("");PT(U,N,Qe,ve),sa(Qe,N),a_(N,N[ne]=wl(Qe,N,Qe,ve)),sh(ve)&&wP(U,N,ve),null!=b&&IR(N,ve,T)}function cf(r){return qf(function $f(){return ui.lFrame.contextLView}(),22+r)}function Bn(r,t,e){const a=An();return Hc(a,mi(),t)&&fu(zi(),Ur(),a,r,t,a[11],e,!1),Bn}function yb(r,t,e,a,d){const b=d?"class":"style";mA(r,e,t.inputs[b],b,a)}function Rn(r,t,e,a){const d=An(),m=zi(),b=22+r,T=d[11],N=d[b]=gd(T,t,function ld(){return ui.lFrame.currentNamespace}()),U=m.firstCreatePass?function SB(r,t,e,a,d,m,b){const T=t.consts,U=i_(t,r,2,d,Vp(T,m));return up(t,e,U,Vp(T,b)),null!==U.attrs&&db(U,U.attrs,!1),null!==U.mergedAttrs&&db(U,U.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,U),U}(b,m,d,0,t,e,a):m.data[b];return ch(U,!0),MT(T,N,U),32!=(32&U.flags)&&PT(m,d,N,U),0===function zL(){return ui.lFrame.elementDepthCount}()&&sa(N,d),function U2(){ui.lFrame.elementDepthCount++}(),sh(U)&&(wP(m,d,U),IP(m,U,d)),null!==a&&IR(d,U),Rn}function Gn(){let r=Za();DS()?Ws():(r=r.parent,ch(r,!1));const t=r;!function iT(){ui.lFrame.elementDepthCount--}();const e=zi();return e.firstCreatePass&&(Bg(e,r),ar(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function qL(r){return 0!=(8&r.flags)}(t)&&yb(e,t,An(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function _E(r){return 0!=(16&r.flags)}(t)&&yb(e,t,An(),t.stylesWithoutHost,!1),Gn}function go(r,t,e,a){return Rn(r,t,e,a),Gn(),go}function ls(r,t,e){const a=An(),d=zi(),m=r+22,b=d.firstCreatePass?function CB(r,t,e,a,d){const m=t.consts,b=Vp(m,a),T=i_(t,r,8,"ng-container",b);return null!==b&&db(T,b,!0),up(t,e,T,Vp(m,d)),null!==t.queries&&t.queries.elementStart(t,T),T}(m,d,a,t,e):d.data[m];ch(b,!0);const T=a[m]=a[11].createComment("");return PT(d,a,T,b),sa(T,a),sh(b)&&(wP(d,a,b),IP(d,b,a)),null!=e&&IR(a,b),ls}function Ju(){let r=Za();const t=zi();return DS()?Ws():(r=r.parent,ch(r,!1)),t.firstCreatePass&&(Bg(t,r),ar(r)&&t.queries.elementEnd(r)),Ju}function bA(r,t,e){return ls(r,t,e),Ju(),bA}function Tl(){return An()}function Eb(r){return!!r&&"function"==typeof r.then}const UP=function FP(r){return!!r&&"function"==typeof r.subscribe};function _o(r,t,e,a){const d=An(),m=zi(),b=Za();return VP(m,d,d[11],b,r,t,a),_o}function cI(r,t){const e=Za(),a=An(),d=zi();return VP(d,a,NR(PS(d.data),e,a),e,r,t),cI}function VP(r,t,e,a,d,m,b){const T=sh(a),U=r.firstCreatePass&&zu(r),ne=t[8],ve=lb(t);let Qe=!0;if(3&a.type||b){const Ot=Bc(a,t),tn=b?b(Ot):Ot,an=ve.length,Pn=b?o=>b(Xa(o[a.index])):a.index;let n=null;if(!b&&T&&(n=function IB(r,t,e,a){const d=r.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const b=d[m];if(b===e&&d[m+1]===a){const T=t[7],N=d[m+2];return T.length>N?T[N]:null}"string"==typeof b&&(m+=2)}return null}(r,t,d,a.index)),null!==n)(n.__ngLastListenerFn__||n).__ngNextListenerFn__=m,n.__ngLastListenerFn__=m,Qe=!1;else{m=SA(a,t,ne,m,!1);const o=e.listen(tn,d,m);ve.push(m,o),U&&U.push(d,Pn,an,an+1)}}else m=SA(a,t,ne,m,!1);const Ke=a.outputs;let at;if(Qe&&null!==Ke&&(at=Ke[d])){const Ot=at.length;if(Ot)for(let tn=0;tn<Ot;tn+=2){const s=t[at[tn]][at[tn+1]].subscribe(m),c=ve.length;ve.push(m,s),U&&U.push(d,a.index,c,-(c+1))}}}function GR(r,t,e,a){try{return!1!==e(a)}catch(d){return u_(r,d),!1}}function SA(r,t,e,a,d){return function m(b){if(b===Function)return a;c_(r.componentOffset>-1?Ma(r.index,t):t);let N=GR(t,0,a,b),U=m.__ngNextListenerFn__;for(;U;)N=GR(t,0,U,b)&&N,U=U.__ngNextListenerFn__;return d&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function ai(r=1){return function cT(r){return(ui.lFrame.contextLView=function La(r,t){for(;r>0;)t=t[15],r--;return t}(r,ui.lFrame.contextLView))[8]}(r)}function CA(r,t){let e=null;const a=function pB(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let d=0;d<t.length;d++){const m=t[d];if("*"!==m){if(null===a?hB(r,m,!0):nV(a,m))return d}else e=d}return e}function ic(r){const t=An()[16][6];if(!t.projection){const a=t.projection=Kp(r?r.length:1,null),d=a.slice();let m=t.child;for(;null!==m;){const b=r?CA(m,r):0;null!==b&&(d[b]?d[b].projectionNext=m:a[b]=m,d[b]=m),m=m.next}}}function Ko(r,t=0,e){const a=An(),d=zi(),m=i_(d,22+r,16,null,e||null);null===m.projection&&(m.projection=t),Ws(),32!=(32&m.flags)&&function lC(r,t,e){YE(t[11],0,t,e,Hv(r,e,t),Gv(e.parent||t[6],e,t))}(d,a,m)}function wA(r,t){return r<<17|t<<2}function Bm(r){return r>>17&32767}function TA(r){return 2|r}function Gc(r){return(131068&r)>>2}function lI(r,t){return-131069&r|t<<2}function Fm(r){return 1|r}function __(r,t,e,a,d){const m=r[e+1],b=null===t;let T=a?Bm(m):Gc(m),N=!1;for(;0!==T&&(!1===N||b);){const ne=r[T+1];zR(r[T],t)&&(N=!0,r[T+1]=a?Fm(ne):TA(ne)),T=a?Bm(ne):Gc(ne)}N&&(r[e+1]=a?TA(m):Fm(m))}function zR(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&Yp(r,t)>=0}const ts={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YR(r){return r.substring(ts.key,ts.keyEnd)}function Ib(r,t){const e=ts.textEnd;return e===t?-1:(t=ts.keyEnd=function $R(r,t,e){for(;t<e&&r.charCodeAt(t)>32;)t++;return t}(r,ts.key=t,e),Wc(r,t,e))}function Wc(r,t,e){for(;t<e&&r.charCodeAt(t)<=32;)t++;return t}function fp(r,t,e){return wd(r,t,e,!1),fp}function ws(r,t){return wd(r,t,null,!0),ws}function Ah(r,t){for(let e=function JR(r){return function ns(r){ts.key=0,ts.keyEnd=0,ts.value=0,ts.valueEnd=0,ts.textEnd=r.length}(r),Ib(r,Wc(r,0,ts.textEnd))}(t);e>=0;e=Ib(t,e))cu(r,YR(t),!0)}function wd(r,t,e,a){const d=An(),m=zi(),b=Jh(2);m.firstUpdatePass&&ZR(m,r,b,a),t!==li&&Hc(d,b,t)&&OA(m,m.data[ra()],d,d[11],r,d[b+1]=function mI(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Ho(Gu(r)))),r}(t,e),a,b)}function YP(r,t){return t>=r.expandoStartIndex}function ZR(r,t,e,a){const d=r.data;if(null===d[e+1]){const m=d[ra()],b=YP(r,e);eO(m,a)&&null===t&&!b&&(t=!1),t=function wB(r,t,e,a){const d=PS(r);let m=a?t.residualClasses:t.residualStyles;if(null===d)0===(a?t.classBindings:t.styleBindings)&&(e=A_(e=yh(null,r,t,e,a),t.attrs,a),m=null);else{const b=t.directiveStylingLast;if(-1===b||r[b]!==d)if(e=yh(d,r,t,e,a),null===m){let N=function Tb(r,t,e){const a=e?t.classBindings:t.styleBindings;if(0!==Gc(a))return r[Bm(a)]}(r,t,a);void 0!==N&&Array.isArray(N)&&(N=yh(null,r,t,N[1],a),N=A_(N,t.attrs,a),function fI(r,t,e,a){r[Bm(e?t.classBindings:t.styleBindings)]=a}(r,t,a,N))}else m=function qP(r,t,e){let a;const d=t.directiveEnd;for(let m=1+t.directiveStylingLast;m<d;m++)a=A_(a,r[m].hostAttrs,e);return A_(a,t.attrs,e)}(r,t,a)}return void 0!==m&&(a?t.residualClasses=m:t.residualStyles=m),e}(d,m,t,a),function hI(r,t,e,a,d,m){let b=m?t.classBindings:t.styleBindings,T=Bm(b),N=Gc(b);r[a]=e;let ne,U=!1;if(Array.isArray(e)){const ve=e;ne=ve[1],(null===ne||Yp(ve,ne)>0)&&(U=!0)}else ne=e;if(d)if(0!==N){const Qe=Bm(r[T+1]);r[a+1]=wA(Qe,T),0!==Qe&&(r[Qe+1]=lI(r[Qe+1],a)),r[T+1]=function GP(r,t){return 131071&r|t<<17}(r[T+1],a)}else r[a+1]=wA(T,0),0!==T&&(r[T+1]=lI(r[T+1],a)),T=a;else r[a+1]=wA(N,0),0===T?T=a:r[N+1]=lI(r[N+1],a),N=a;U&&(r[a+1]=TA(r[a+1])),__(r,ne,a,!0),__(r,ne,a,!1),function Cb(r,t,e,a,d){const m=d?r.residualClasses:r.residualStyles;null!=m&&"string"==typeof t&&Yp(m,t)>=0&&(e[a+1]=Fm(e[a+1]))}(t,ne,r,a,m),b=wA(T,N),m?t.classBindings=b:t.styleBindings=b}(d,m,t,e,b,a)}}function yh(r,t,e,a,d){let m=null;const b=e.directiveEnd;let T=e.directiveStylingLast;for(-1===T?T=e.directiveStart:T++;T<b&&(m=t[T],a=A_(a,m.hostAttrs,d),m!==r);)T++;return null!==r&&(e.directiveStylingLast=T),a}function A_(r,t,e){const a=e?1:2;let d=-1;if(null!==t)for(let m=0;m<t.length;m++){const b=t[m];"number"==typeof b?d=b:d===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),cu(r,b,!!e||t[++m]))}return void 0===r?null:r}function OA(r,t,e,a,d,m,b,T){if(!(3&t.type))return;const N=r.data,U=N[T+1],ne=function dI(r){return 1==(1&r)}(U)?Rb(N,t,e,d,Gc(U),b):void 0;y_(ne)||(y_(m)||function KR(r){return 2==(2&r)}(U)&&(m=Rb(N,null,e,d,T,b)),function Kv(r,t,e,a,d){if(t)d?r.addClass(e,a):r.removeClass(e,a);else{let m=-1===a.indexOf("-")?void 0:lu.DashCase;null==d?r.removeStyle(e,a,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=lu.Important),r.setStyle(e,a,d,m))}}(a,b,RS(ra(),e),d,m))}function Rb(r,t,e,a,d,m){const b=null===t;let T;for(;d>0;){const N=r[d],U=Array.isArray(N),ne=U?N[1]:N,ve=null===ne;let Qe=e[d+1];Qe===li&&(Qe=ve?uo:void 0);let Ke=ve?DE(Qe,a):ne===a?Qe:void 0;if(U&&!y_(Ke)&&(Ke=DE(N,a)),y_(Ke)&&(T=Ke,b))return T;const at=r[d+1];d=b?Bm(at):Gc(at)}if(null!==t){let N=m?t.residualClasses:t.residualStyles;null!=N&&(T=DE(N,a))}return T}function y_(r){return void 0!==r}function eO(r,t){return 0!=(r.flags&(t?8:16))}function Hr(r,t=""){const e=An(),a=zi(),d=r+22,m=a.firstCreatePass?i_(a,d,1,t,null):a.data[d],b=e[d]=function Qv(r,t){return r.createText(t)}(e[11],t);PT(a,e,b,m),ch(m,!1)}function uf(r){return Zu("",r,""),uf}function Zu(r,t,e){const a=An(),d=Ua(a,r,t,e);return d!==li&&function _h(r,t,e){const a=RS(t,r);!function OT(r,t,e){r.setValue(t,e)}(r[11],a,e)}(a,ra(),d),Zu}function nO(r,t,e){!function $u(r,t,e,a){const d=zi(),m=Jh(2);d.firstUpdatePass&&ZR(d,null,m,a);const b=An();if(e!==li&&Hc(b,m,e)){const T=d.data[ra()];if(eO(T,a)&&!YP(d,m)){let N=a?T.classesWithoutHost:T.stylesWithoutHost;null!==N&&(e=fS(N,e||"")),yb(d,T,b,e,a)}else!function gu(r,t,e,a,d,m,b,T){d===li&&(d=uo);let N=0,U=0,ne=0<d.length?d[0]:null,ve=0<m.length?m[0]:null;for(;null!==ne||null!==ve;){const Qe=N<d.length?d[N+1]:void 0,Ke=U<m.length?m[U+1]:void 0;let Ot,at=null;ne===ve?(N+=2,U+=2,Qe!==Ke&&(at=ve,Ot=Ke)):null===ve||null!==ne&&ne<ve?(N+=2,at=ne):(U+=2,at=ve,Ot=Ke),null!==at&&OA(r,t,e,a,at,Ot,b,T),ne=N<d.length?d[N]:null,ve=U<m.length?m[U]:null}}(d,T,b,b[11],b[m+1],b[m+1]=function JP(r,t,e){if(null==e||""===e)return uo;const a=[],d=Gu(e);if(Array.isArray(d))for(let m=0;m<d.length;m++)r(a,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&r(a,m,d[m]);else"string"==typeof d&&t(a,d);return a}(r,t,e),a,m)}}(cu,Ah,Ua(An(),r,t,e),!0)}function xb(r,t,e){const a=An();return Hc(a,mi(),t)&&fu(zi(),Ur(),a,r,t,a[11],e,!0),xb}function sO(r,t,e){const a=An();if(Hc(a,mi(),t)){const m=zi(),b=Ur();fu(m,b,a,r,t,NR(PS(m.data),b,a),e,!0)}return sO}const Ol="en-US";let EI=Ol;function gp(r,t,e,a,d){if(r=Dr(r),Array.isArray(r))for(let m=0;m<r.length;m++)gp(r[m],t,e,a,d);else{const m=zi(),b=An();let T=Em(r)?r:Dr(r.provide),N=JT(r);const U=Za(),ne=1048575&U.providerIndexes,ve=U.directiveStart,Qe=U.providerIndexes>>20;if(Em(r)||!r.multi){const Ke=new as(N,d,At),at=bh(T,t,d?ne:ne+Qe,ve);-1===at?(Ks(pd(U,b),m,T),gf(m,r,t.length),t.push(T),U.directiveStart++,U.directiveEnd++,d&&(U.providerIndexes+=1048576),e.push(Ke),b.push(Ke)):(e[at]=Ke,b[at]=Ke)}else{const Ke=bh(T,t,ne+Qe,ve),at=bh(T,t,ne,ne+Qe),Ot=Ke>=0&&e[Ke],tn=at>=0&&e[at];if(d&&!tn||!d&&!Ot){Ks(pd(U,b),m,T);const an=function VI(r,t,e,a,d){const m=new as(r,e,At);return m.multi=[],m.index=t,m.componentProviders=0,Pl(m,d,a&&!e),m}(d?bN:Hm,e.length,d,a,N);!d&&tn&&(e[at].providerFactory=an),gf(m,r,t.length,0),t.push(T),U.directiveStart++,U.directiveEnd++,d&&(U.providerIndexes+=1048576),e.push(an),b.push(an)}else gf(m,r,Ke>-1?Ke:at,Pl(e[d?at:Ke],N,!d&&a));!d&&a&&tn&&e[at].componentProviders++}}}function gf(r,t,e,a){const d=Em(t),m=function tf(r){return!!r.useClass}(t);if(d||m){const N=(m?Dr(t.useClass):t).prototype.ngOnDestroy;if(N){const U=r.destroyHooks||(r.destroyHooks=[]);if(!d&&t.multi){const ne=U.indexOf(e);-1===ne?U.push(e,[a,N]):U[ne+1].push(a,N)}else U.push(e,N)}}}function Pl(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function bh(r,t,e,a){for(let d=e;d<a;d++)if(t[d]===r)return d;return-1}function Hm(r,t,e,a){return UI(this.multi,[])}function bN(r,t,e,a){const d=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Fg(e,e[1],this.providerFactory.index,a);m=T.slice(0,b),UI(d,m);for(let N=b;N<T.length;N++)m.push(T[N])}else m=[],UI(d,m);return m}function UI(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function vo(r,t=[]){return e=>{e.providersResolver=(a,d)=>function Kb(r,t,e){const a=zi();if(a.firstCreatePass){const d=xs(r);gp(e,a.data,a.blueprint,d,!0),gp(t,a.data,a.blueprint,d,!1)}}(a,d?d(r):r,t)}}class w_{}class _O{}class lr extends w_{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hb(this);const a=function Nu(r,t){const e=r[R2]||null;if(!e&&!0===t)throw new Error(`Type ${Ho(r)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function cp(r){return r instanceof Function?r():r}(a.bootstrap),this._r3Injector=xC(t,e,[{provide:w_,useValue:this},{provide:Im,useValue:this.componentFactoryResolver}],Ho(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oc extends _O{constructor(t){super(),this.moduleType=t}create(t){return new lr(this.moduleType,t)}}function IO(r,t,e,a,d,m){const b=t+e;return Hc(r,b,d)?function hp(r,t,e){return r[t]=e}(r,b+1,m?a.call(m,d):a(d)):function P_(r,t){const e=r[t];return e===li?void 0:e}(r,b+1)}function CN(r,t,e){const a=r+22,d=An(),m=qf(d,a);return function Ym(r,t){return r[1].data[t].pure}(d,a)?IO(d,function Bi(){const r=ui.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,m.transform,e,m):m.transform(e)}function zI(r){return t=>{setTimeout(r,void 0,t)}}const qi=class KI extends St{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,a){let d=t,m=e||(()=>null),b=a;if(t&&"object"==typeof t){const N=t;d=N.next?.bind(N),m=N.error?.bind(N),b=N.complete?.bind(N)}this.__isAsync&&(m=zI(m),d&&(d=zI(d)),b&&(b=zI(b)));const T=super.subscribe({next:d,error:m,complete:b});return t instanceof V&&t.add(T),T}};function wN(){return this._results[af()]()}class Rd{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=af(),a=Rd.prototype;a[e]||(a[e]=wN)}get changes(){return this._changes||(this._changes=new qi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const a=this;a.dirty=!1;const d=au(t);(this._changesDetected=!function gT(r,t,e){if(r.length!==t.length)return!1;for(let a=0;a<r.length;a++){let d=r[a],m=t[a];if(e&&(d=e(d),m=e(m)),m!==d)return!1}return!0}(a._results,d,e))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nl=(()=>{class r{}return r.__NG_ELEMENT_ID__=ON,r})();const TN=Nl,RN=class extends TN{constructor(t,e,a){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=a}createEmbeddedView(t,e){const a=this._declarationTContainer.tViews,d=r_(this._declarationLView,a,t,16,null,a.declTNode,null,null,null,null,e||null);d[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(d[19]=b.createEmbeddedView(a)),CP(a,d,t),new Pm(d)}};function ON(){return YI(Za(),An())}function YI(r,t){return 4&r.type?new RN(t,r,ap(r,t)):null}let rl=(()=>{class r{}return r.__NG_ELEMENT_ID__=DN,r})();function DN(){return xo(Za(),An())}const Jb=rl,qI=class extends Jb{constructor(t,e,a){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=a}get element(){return ap(this._hostTNode,this._hostLView)}get injector(){return new Pv(this._hostTNode,this._hostLView)}get parentInjector(){const t=kv(this._hostTNode,this._hostLView);if(LS(t)){const e=BS(t,this._hostLView),a=AE(t);return new Pv(e[1].data[a+8],e)}return new Pv(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=$b(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,a){let d,m;"number"==typeof a?d=a:null!=a&&(d=a.index,m=a.injector);const b=t.createEmbeddedView(e||{},m);return this.insert(b,d),b}createComponent(t,e,a,d,m){const b=t&&!function Vu(r){return"function"==typeof r}(t);let T;if(b)T=e;else{const ve=e||{};T=ve.index,a=ve.injector,d=ve.projectableNodes,m=ve.environmentInjector||ve.ngModuleRef}const N=b?t:new l_(oo(t)),U=a||this.parentInjector;if(!m&&null==N.ngModule){const Qe=(b?U:this.parentInjector).get(Zg,null);Qe&&(m=Qe)}const ne=N.create(U,d,void 0,m);return this.insert(ne.hostView,T),ne}insert(t,e){const a=t._lView,d=a[1];if(function wv(r){return Ms(r[3])}(a)){const ne=this.indexOf(t);if(-1!==ne)this.detach(ne);else{const ve=a[3],Qe=new qI(ve,ve[6],ve[3]);Qe.detach(Qe.indexOf(t))}}const m=this._adjustIndex(e),b=this._lContainer;!function pm(r,t,e,a){const d=10+a,m=e.length;a>0&&(e[d-1][4]=t),a<m-10?(t[4]=e[d],_T(e,10+a,t)):(e.push(t),t[4]=null),t[3]=e;const b=t[17];null!==b&&e!==b&&function Z2(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(b,t);const T=t[19];null!==T&&T.insertView(r),t[2]|=64}(d,a,b,m);const T=zE(m,b),N=a[11],U=Yg(N,b[7]);return null!==U&&function Qu(r,t,e,a,d,m){a[0]=d,a[6]=t,Wv(r,a,e,1,d,m)}(d,b[6],N,a,U,T),t.attachToViewContainerRef(),_T(M_(b),m,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=$b(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),a=hu(this._lContainer,e);a&&(Vg(M_(this._lContainer),e),Xp(a[1],a))}detach(t){const e=this._adjustIndex(t,-1),a=hu(this._lContainer,e);return a&&null!=Vg(M_(this._lContainer),e)?new Pm(a):null}_adjustIndex(t,e=0){return t??this.length+e}};function $b(r){return r[8]}function M_(r){return r[8]||(r[8]=[])}function xo(r,t){let e;const a=t[r.index];if(Ms(a))e=a;else{let d;if(8&r.type)d=Xa(a);else{const m=t[11];d=m.createComment("");const b=Bc(r,t);_d(m,Yg(m,b),d,function vt(r,t){return r.nextSibling(t)}(m,b),!1)}t[r.index]=e=wl(a,t,d,r),a_(t,e)}return new qI(e,r,t)}class Zb{constructor(t){this.queryList=t,this.matches=null}clone(){return new Zb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ch{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const a=null!==t.contentQueries?t.contentQueries[0]:e.length,d=[];for(let m=0;m<a;m++){const b=e.getByIndex(m);d.push(this.queries[b.indexInDeclarationView].clone())}return new Ch(d)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==wh(t,e).matches&&this.queries[e].setDirty()}}class e0{constructor(t,e,a=null){this.predicate=t,this.flags=e,this.read=a}}class t0{constructor(t=[]){this.queries=t}elementStart(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let a=0;a<this.length;a++){const d=null!==e?e.length:0,m=this.getByIndex(a).embeddedTView(t,d);m&&(m.indexInDeclarationView=a,null!==e?e.push(m):e=[m])}return null!==e?new t0(e):null}template(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class DO{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new DO(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let a=t.parent;for(;null!==a&&8&a.type&&a.index!==e;)a=a.parent;return e===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const m=a[d];this.matchTNodeWithReadOption(t,e,QB(e,m)),this.matchTNodeWithReadOption(t,e,Zh(e,t,m,!1,!1))}else a===Nl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Zh(e,t,a,!1,!1))}matchTNodeWithReadOption(t,e,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===ki||d===rl||d===Nl&&4&e.type)this.addMatch(e.index,-2);else{const m=Zh(e,t,d,!1,!1);null!==m&&this.addMatch(e.index,m)}else this.addMatch(e.index,a)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function QB(r,t){const e=r.localNames;if(null!==e)for(let a=0;a<e.length;a+=2)if(e[a]===t)return e[a+1];return null}function n0(r,t,e,a){return-1===e?function kO(r,t){return 11&r.type?ap(r,t):4&r.type?YI(r,t):null}(t,r):-2===e?function HB(r,t,e){return e===ki?ap(t,r):e===Nl?YI(t,r):e===rl?xo(t,r):void 0}(r,t,a):Fg(r,r[1],e,t)}function YA(r,t,e,a){const d=t[19].queries[a];if(null===d.matches){const m=r.data,b=e.matches,T=[];for(let N=0;N<b.length;N+=2){const U=b[N];T.push(U<0?null:n0(t,m[U],b[N+1],e.metadata.read))}d.matches=T}return d.matches}function PO(r,t,e,a){const d=r.queries.getByIndex(e),m=d.matches;if(null!==m){const b=YA(r,t,d,e);for(let T=0;T<m.length;T+=2){const N=m[T];if(N>0)a.push(b[T/2]);else{const U=m[T+1],ne=t[-N];for(let ve=10;ve<ne.length;ve++){const Qe=ne[ve];Qe[17]===Qe[3]&&PO(Qe[1],Qe,U,a)}if(null!==ne[9]){const ve=ne[9];for(let Qe=0;Qe<ve.length;Qe++){const Ke=ve[Qe];PO(Ke[1],Ke,U,a)}}}}}return a}function Ao(r){const t=An(),e=zi(),a=NS();jp(a+1);const d=wh(e,a);if(r.dirty&&function F2(r){return 4==(4&r[2])}(t)===(2==(2&d.metadata.flags))){if(null===d.matches)r.reset([]);else{const m=d.crossesNgTemplate?PO(e,t,a,[]):YA(e,t,d,a);r.reset(m,OC),r.notifyOnChanges()}return!0}return!1}function Js(r,t,e){const a=zi();a.firstCreatePass&&(r0(a,new e0(r,t,e),-1),2==(2&t)&&(a.staticViewQueries=!0)),qA(a,An(),t)}function oc(r,t,e,a){const d=zi();if(d.firstCreatePass){const m=Za();r0(d,new e0(t,e,a),m.index),function qm(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(d,r),2==(2&e)&&(d.staticContentQueries=!0)}qA(d,An(),e)}function yo(){return function Ih(r,t){return r[19].queries[t].queryList}(An(),NS())}function qA(r,t,e){const a=new Rd(4==(4&e));wR(r,t,a,a.destroy),null===t[19]&&(t[19]=new Ch),t[19].queries.push(new Zb(a))}function r0(r,t,e){null===r.queries&&(r.queries=new t0),r.queries.track(new DO(t,e))}function wh(r,t){return r.queries.getByIndex(t)}function NO(r,t){return YI(r,t)}function ty(...r){}const JO=new zn("Application Initializer");let ny=(()=>{class r{constructor(e){this.appInits=e,this.resolve=ty,this.reject=ty,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const e=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(Eb(m))e.push(m);else if(UP(m)){const b=new Promise((T,N)=>{m.subscribe({complete:T,error:N})});e.push(b)}}Promise.all(e).then(()=>{a()}).catch(d=>{this.reject(d)}),0===e.length&&a(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(rn(JO,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const B_=new zn("AppId",{providedIn:"root",factory:function yf(){return`${$O()}${$O()}${$O()}`}});function $O(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WN=new zn("Platform Initializer"),sw=new zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),KN=new zn("appBootstrapListener"),$s=new zn("AnimationModuleType"),Ml=new zn("LocaleId",{providedIn:"root",factory:()=>Ea(Ml,Zr.Optional|Zr.SkipSelf)||function Rr(){return typeof $localize<"u"&&$localize.locale||Ol}()}),uw=(()=>Promise.resolve(0))();function ca(r){typeof Zone>"u"?uw.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class zr{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qi(!1),this.onMicrotaskEmpty=new qi(!1),this.onStable=new qi(!1),this.onError=new qi(!1),typeof Zone>"u")throw new vn(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&e,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function iy(){let r=Xo.requestAnimationFrame,t=Xo.cancelAnimationFrame;if(typeof Zone<"u"&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const a=t[Zone.__symbol__("OriginalDelegate")];a&&(t=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function qN(r){const t=()=>{!function lw(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Xo,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,tD(r),r.isCheckStableRunning=!0,eD(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),tD(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,a,d,m,b,T)=>{try{return dw(r),e.invokeTask(d,m,b,T)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||r.shouldCoalesceRunChangeDetection)&&t(),hw(r)}},onInvoke:(e,a,d,m,b,T,N)=>{try{return dw(r),e.invoke(d,m,b,T,N)}finally{r.shouldCoalesceRunChangeDetection&&t(),hw(r)}},onHasTask:(e,a,d,m)=>{e.hasTask(d,m),a===d&&("microTask"==m.change?(r._hasPendingMicrotasks=m.microTask,tD(r),eD(r)):"macroTask"==m.change&&(r.hasPendingMacrotasks=m.macroTask))},onHandleError:(e,a,d,m)=>(e.handleError(d,m),r.runOutsideAngular(()=>r.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zr.isInAngularZone())throw new vn(909,!1)}static assertNotInAngularZone(){if(zr.isInAngularZone())throw new vn(909,!1)}run(t,e,a){return this._inner.run(t,e,a)}runTask(t,e,a,d){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+d,t,XB,ty,ty);try{return m.runTask(b,e,a)}finally{m.cancelTask(b)}}runGuarded(t,e,a){return this._inner.runGuarded(t,e,a)}runOutsideAngular(t){return this._outer.run(t)}}const XB={};function eD(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function tD(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function dw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function hw(r){r._nesting--,eD(r)}class F_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qi,this.onMicrotaskEmpty=new qi,this.onStable=new qi,this.onError=new qi}run(t,e,a){return t.apply(e,a)}runGuarded(t,e,a){return t.apply(e,a)}runOutsideAngular(t){return t()}runTask(t,e,a,d){return t.apply(e,a)}}const nD=new zn(""),oy=new zn("");let sy,ua=(()=>{class r{constructor(e,a,d){this._ngZone=e,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sy||(function ZB(r){sy=r}(d),d.addToWindow(a)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zr.assertNotInAngularZone(),ca(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ca(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(e)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,a,d){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),e(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:e,timeoutId:m,updateCb:d})}whenStable(e,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,a,d){return[]}}return r.\u0275fac=function(e){return new(e||r)(rn(zr),rn(xl),rn(oy))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),xl=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,a){this._applications.set(e,a)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,a=!0){return sy?.findTestabilityInTree(this,e,a)??null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),la=null;const a0=new zn("AllowMultipleToken"),pw=new zn("PlatformDestroyListeners");function sD(r,t,e=[]){const a=`Platform: ${t}`,d=new zn(a);return(m=[])=>{let b=l0();if(!b||b.injector.get(a0,!1)){const T=[...e,...m,{provide:d,useValue:!0}];r?r(T):function oD(r){if(la&&!la.get(a0,!1))throw new vn(400,!1);la=r;const t=r.get(gw);(function c0(r){const t=r.get(WN,null);t&&t.forEach(e=>e())})(r)}(function U_(r=[],t){return Qc.create({name:t,providers:[{provide:bm,useValue:"platform"},{provide:pw,useValue:new Set([()=>la=null])},...r]})}(T,a))}return function aD(r){const t=l0();if(!t)throw new vn(401,!1);return t}()}}function l0(){return la?.get(gw)??null}let gw=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,a){const d=function _w(r,t){let e;return e="noop"===r?new F_:("zone.js"===r?void 0:r)||new zr(t),e}(a?.ngZone,function ay(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(a)),m=[{provide:zr,useValue:d}];return d.run(()=>{const b=Qc.create({providers:m,parent:this.injector,name:e.moduleType.name}),T=e.create(b),N=T.injector.get(Sl,null);if(!N)throw new vn(402,!1);return d.runOutsideAngular(()=>{const U=d.onError.subscribe({next:ne=>{N.handleError(ne)}});T.onDestroy(()=>{V_(this._modules,T),U.unsubscribe()})}),function cD(r,t,e){try{const a=e();return Eb(a)?a.catch(d=>{throw t.runOutsideAngular(()=>r.handleError(d)),d}):a}catch(a){throw t.runOutsideAngular(()=>r.handleError(a)),a}}(N,d,()=>{const U=T.injector.get(ny);return U.runInitializers(),U.donePromise.then(()=>(function pf(r){Go(r,"Expected localeId to be defined"),"string"==typeof r&&(EI=r.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Ml,Ol)||Ol),this._moduleDoBootstrap(T),T))})})}bootstrapModule(e,a=[]){const d=d0({},a);return function eF(r,t,e){const a=new Oc(e);return Promise.resolve(a)}(0,0,e).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(e){const a=e.injector.get($m);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!e.instance.ngDoBootstrap)throw new vn(403,!1);e.instance.ngDoBootstrap(a)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new vn(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const e=this._injector.get(pw,null);e&&(e.forEach(a=>a()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(rn(Qc))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function d0(r,t){return Array.isArray(t)?t.reduce(d0,r):{...r,...t}}let $m=(()=>{class r{constructor(e,a,d){this._zone=e,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new Ze(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new Ze(T=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{zr.assertNotInAngularZone(),ca(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{zr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{N.unsubscribe(),U.unsubscribe()}});this.isStable=Po(m,b.pipe(id()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,a){const d=e instanceof $T;if(!this._injector.get(ny).done)throw!d&&function ih(r){const t=oo(r)||mo(r)||ou(r);return null!==t&&t.standalone}(e),new vn(405,false);let b;b=d?e:this._injector.get(Im).resolveComponentFactory(e),this.componentTypes.push(b.componentType);const T=function rD(r){return r.isBoundToModule}(b)?void 0:this._injector.get(w_),U=b.create(Qc.NULL,[],a||b.selector,T),ne=U.location.nativeElement,ve=U.injector.get(nD,null);return ve?.registerApplication(ne),U.onDestroy(()=>{this.detachView(U.hostView),V_(this.components,U),ve?.unregisterApplication(ne)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new vn(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const a=e;this._views.push(a),a.attachToAppRef(this)}detachView(e){const a=e;V_(this._views,a),a.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(KN,[]).concat(this._bootstrapListeners).forEach(d=>d(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>V_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new vn(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(e){return new(e||r)(rn(zr),rn(Zg),rn(Sl))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function V_(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}let Oh=(()=>{class r{}return r.__NG_ELEMENT_ID__=h0,r})();function h0(r){return function Aw(r,t,e){if(Fp(r)&&!e){const a=Ma(r.index,t);return new Pm(a,a)}return 47&r.type?new Pm(t[16],t):null}(Za(),An(),16==(16&r))}class mD{constructor(){}supports(t){return h_(t)}create(t){return new eM(t)}}const gD=(r,t)=>t;class eM{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||gD}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,a=this._removalsHead,d=0,m=null;for(;e||a;){const b=!a||e&&e.currentIndex<vD(a,d,m)?e:a,T=vD(b,d,m),N=b.currentIndex;if(b===a)d--,a=a._nextRemoved;else if(e=e._next,null==b.previousIndex)d++;else{m||(m=[]);const U=T-d,ne=N-d;if(U!=ne){for(let Qe=0;Qe<U;Qe++){const Ke=Qe<m.length?m[Qe]:m[Qe]=0,at=Ke+Qe;ne<=at&&at<U&&(m[Qe]=Ke+1)}m[b.previousIndex]=ne-U}}T!==N&&t(b,T,N)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!h_(t))throw new vn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let d,m,b,e=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let T=0;T<this.length;T++)m=t[T],b=this._trackByFn(T,m),null!==e&&Object.is(e.trackById,b)?(a&&(e=this._verifyReinsertion(e,m,b,T)),Object.is(e.item,m)||this._addIdentityChange(e,m)):(e=this._mismatch(e,m,b,T),a=!0),e=e._next}else d=0,function p_(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[af()]();let a;for(;!(a=e.next()).done;)t(a.value)}}(t,T=>{b=this._trackByFn(d,T),null!==e&&Object.is(e.trackById,b)?(a&&(e=this._verifyReinsertion(e,T,b,d)),Object.is(e.item,T)||this._addIdentityChange(e,T)):(e=this._mismatch(e,T,b,d),a=!0),e=e._next,d++}),this.length=d;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,a,d){let m;return null===t?m=this._itTail:(m=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,m,d)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,m,d)):t=this._addAfter(new _D(e,a),m,d),t}_verifyReinsertion(t,e,a,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?t=this._reinsertAfter(m,t._prev,d):t.currentIndex!=d&&(t.currentIndex=d,this._addToMoves(t,d)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const d=t._prevRemoved,m=t._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(t,e,a),this._addToMoves(t,a),t}_moveAfter(t,e,a){return this._unlink(t),this._insertAfter(t,e,a),this._addToMoves(t,a),t}_addAfter(t,e,a){return this._insertAfter(t,e,a),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,a){const d=null===e?this._itHead:e._next;return t._next=d,t._prev=e,null===d?this._itTail=t:d._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new m0),this._linkedRecords.put(t),t.currentIndex=a,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,a=t._next;return null===e?this._itHead=a:e._next=a,null===a?this._itTail=e:a._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new m0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class _D{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tM{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===e||e<=a.currentIndex)&&Object.is(a.trackById,t))return a;return null}remove(t){const e=t._prevDup,a=t._nextDup;return null===e?this._head=a:e._nextDup=a,null===a?this._tail=e:a._prevDup=e,null===this._head}}class m0{constructor(){this.map=new Map}put(t){const e=t.trackById;let a=this.map.get(e);a||(a=new tM,this.map.set(e,a)),a.add(t)}get(t,e){const d=this.map.get(t);return d?d.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vD(r,t,e){const a=r.previousIndex;if(null===a)return a;let d=0;return e&&a<e.length&&(d=e[a]),a+t+d}class AD{constructor(){}supports(t){return t instanceof Map||_b(t)}create(){return new Iw}}class Iw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_b(t)))throw new vn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(a,d)=>{if(e&&e.key===d)this._maybeAddToChanges(e,a),this._appendAfter=e,e=e._next;else{const m=this._getOrCreateRecordForKey(d,a);e=this._insertBeforeOrAppend(e,m)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let a=e;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const a=t._prev;return e._next=t,e._prev=a,t._prev=e,a&&(a._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const d=this._records.get(t);this._maybeAddToChanges(d,e);const m=d._prev,b=d._next;return m&&(m._next=b),b&&(b._prev=m),d._next=null,d._prev=null,d}const a=new nM(t);return this._records.set(t,a),a.currentValue=e,this._addToAdditions(a),a}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(a=>e(t[a],a))}}class nM{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g0(){return new _0([new mD])}let _0=(()=>{class r{constructor(e){this.factories=e}static create(e,a){if(null!=a){const d=a.factories.slice();e=e.concat(d)}return new r(e)}static extend(e){return{provide:r,useFactory:a=>r.create(e,a||g0()),deps:[[r,new Lv,new Uc]]}}find(e){const a=this.factories.find(d=>d.supports(e));if(null!=a)return a;throw new vn(901,!1)}}return r.\u0275prov=vr({token:r,providedIn:"root",factory:g0}),r})();function ww(){return new ly([new AD])}let ly=(()=>{class r{constructor(e){this.factories=e}static create(e,a){if(a){const d=a.factories.slice();e=e.concat(d)}return new r(e)}static extend(e){return{provide:r,useFactory:a=>r.create(e,a||ww()),deps:[[r,new Lv,new Uc]]}}find(e){const a=this.factories.find(d=>d.supports(e));if(a)return a;throw new vn(901,!1)}}return r.\u0275prov=vr({token:r,providedIn:"root",factory:ww}),r})();const Zt=sD(null,"core",[]);let oM=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(rn($m))},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})(),Dh=null;function kd(){return Dh}class Ow{}const oi=new zn("DocumentToken");let H_=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(){return function y0(){return rn(Dw)}()},providedIn:"platform"}),r})(),Dw=(()=>{class r extends H_{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kd().getBaseHref(this._doc)}onPopState(e){const a=kd().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",e,!1),()=>a.removeEventListener("popstate",e)}onHashChange(e){const a=kd().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",e,!1),()=>a.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,a,d){ED()?this._history.pushState(e,a,d):this.location.hash=d}replaceState(e,a,d){ED()?this._history.replaceState(e,a,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:function(){return function sM(){return new Dw(rn(oi))}()},providedIn:"platform"}),r})();function ED(){return!!window.history.pushState}function bD(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function G_(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function ol(r){return r&&"?"!==r[0]?"?"+r:r}let dy=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(){return Ea(b0)},providedIn:"root"}),r})();const aM=new zn("appBaseHref");let b0=(()=>{class r extends dy{constructor(e,a){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=a??this._platformLocation.getBaseHrefFromDOM()??Ea(oi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bD(this._baseHref,e)}path(e=!1){const a=this._platformLocation.pathname+ol(this._platformLocation.search),d=this._platformLocation.hash;return d&&e?`${a}${d}`:a}pushState(e,a,d,m){const b=this.prepareExternalUrl(d+ol(m));this._platformLocation.pushState(e,a,b)}replaceState(e,a,d,m){const b=this.prepareExternalUrl(d+ol(m));this._platformLocation.replaceState(e,a,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(H_),rn(aM,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),kh=(()=>{class r{constructor(e){this._subject=new qi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const a=this._locationStrategy.getBaseHref();this._baseHref=G_(kw(a)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,a=""){return this.path()==this.normalize(e+ol(a))}normalize(e){return r.stripTrailingSlash(function cM(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,kw(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,a="",d=null){this._locationStrategy.pushState(d,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ol(a)),d)}replaceState(e,a="",d=null){this._locationStrategy.replaceState(d,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ol(a)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)})),()=>{const a=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(a,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",a){this._urlChangeListeners.forEach(d=>d(e,a))}subscribe(e,a,d){return this._subject.subscribe({next:e,error:a,complete:d})}}return r.normalizeQueryParams=ol,r.joinWithSlash=bD,r.stripTrailingSlash=G_,r.\u0275fac=function(e){return new(e||r)(rn(dy))},r.\u0275prov=vr({token:r,factory:function(){return function SD(){return new kh(rn(dy))}()},providedIn:"root"}),r})();function kw(r){return r.replace(/\/index.html$/,"")}function Vs(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const a=e.indexOf("="),[d,m]=-1==a?[e,""]:[e.slice(0,a),e.slice(a+1)];if(d.trim()===t)return decodeURIComponent(m)}return null}let Ey=(()=>{class r{constructor(e,a,d,m){this._iterableDiffers=e,this._keyValueDiffers=a,this._ngEl=d,this._renderer=m,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(h_(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachChangedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachRemovedItem(a=>{a.previousValue&&this._toggleClass(a.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(a=>{if("string"!=typeof a.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ho(a.item)}`);this._toggleClass(a.item,!0)}),e.forEachRemovedItem(a=>this._toggleClass(a.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!0)):Object.keys(e).forEach(a=>this._toggleClass(a,!!e[a])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!1)):Object.keys(e).forEach(a=>this._toggleClass(a,!1)))}_toggleClass(e,a){(e=e.trim())&&e.split(/\s+/g).forEach(d=>{a?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return r.\u0275fac=function(e){return new(e||r)(At(_0),At(ly),At(ki),At(Ed))},r.\u0275dir=_r({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class rg{constructor(t,e,a,d){this.$implicit=t,this.ngForOf=e,this.index=a,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let R0=(()=>{class r{constructor(e,a,d){this._viewContainer=e,this._template=a,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const a=this._viewContainer;e.forEachOperation((d,m,b)=>{if(null==d.previousIndex)a.createEmbeddedView(this._template,new rg(d.item,this._ngForOf,-1,-1),null===b?void 0:b);else if(null==b)a.remove(null===m?void 0:m);else if(null!==m){const T=a.get(m);a.move(T,b),LD(T,d)}});for(let d=0,m=a.length;d<m;d++){const T=a.get(d).context;T.index=d,T.count=m,T.ngForOf=this._ngForOf}e.forEachIdentityChange(d=>{LD(a.get(d.currentIndex),d)})}static ngTemplateContextGuard(e,a){return!0}}return r.\u0275fac=function(e){return new(e||r)(At(rl),At(Nl),At(_0))},r.\u0275dir=_r({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function LD(r,t){r.context.$implicit=t.item}let ig=(()=>{class r{constructor(e,a){this._viewContainer=e,this._context=new AM,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){jl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){jl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,a){return!0}}return r.\u0275fac=function(e){return new(e||r)(At(rl),At(Nl))},r.\u0275dir=_r({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class AM{constructor(){this.$implicit=null,this.ngIf=null}}function jl(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Ho(t)}'.`)}class og{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Y_=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const a=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||a,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),a}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let a=0;a<this._defaultViews.length;a++)this._defaultViews[a].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),r})(),q_=(()=>{class r{constructor(e,a,d){this.ngSwitch=d,d._addCase(),this._view=new og(e,a)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(At(rl),At(Nl),At(Y_,9))},r.\u0275dir=_r({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),r})(),BD=(()=>{class r{constructor(e,a,d){d._addDefault(new og(e,a))}}return r.\u0275fac=function(e){return new(e||r)(At(rl),At(Nl),At(Y_,9))},r.\u0275dir=_r({type:r,selectors:[["","ngSwitchDefault",""]],standalone:!0}),r})(),jw=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const a=this._viewContainerRef;if(this._viewRef&&a.remove(a.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:m,ngTemplateOutletInjector:b}=this;this._viewRef=a.createEmbeddedView(d,m,b?{injector:b}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(e){return new(e||r)(At(rl))},r.\u0275dir=_r({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Al]}),r})(),hs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const qc="browser";class YD{}class Ve extends Ow{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tt extends Ve{static makeCurrent(){!function mF(r){Dh||(Dh=r)}(new tt)}onAndCancel(t,e,a){return t.addEventListener(e,a,!1),()=>{t.removeEventListener(e,a,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function st(){return Rt=Rt||document.querySelector("base"),Rt?Rt.getAttribute("href"):null}();return null==e?null:function pe(r){Bt=Bt||document.createElement("a"),Bt.setAttribute("href",r);const t=Bt.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Rt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vs(document.cookie,t)}}let Bt,Rt=null;const ye=new zn("TRANSITION_ID"),Kr=[{provide:JO,useFactory:function wn(r,t,e){return()=>{e.get(ny).donePromise.then(()=>{const a=kd(),d=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let m=0;m<d.length;m++)a.remove(d[m])})}},deps:[ye,oi,Qc],multi:!0}];let bu=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const bo=new zn("EventManagerPlugins");let ps=(()=>{class r{constructor(e,a){this._zone=a,this._eventNameToPlugin=new Map,e.forEach(d=>d.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,a,d){return this._findPluginFor(a).addEventListener(e,a,d)}addGlobalEventListener(e,a,d){return this._findPluginFor(a).addGlobalEventListener(e,a,d)}getZone(){return this._zone}_findPluginFor(e){const a=this._eventNameToPlugin.get(e);if(a)return a;const d=this._plugins;for(let m=0;m<d.length;m++){const b=d[m];if(b.supports(e))return this._eventNameToPlugin.set(e,b),b}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(rn(bo),rn(zr))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class rs{constructor(t){this._doc=t}addGlobalEventListener(t,e,a){const d=kd().getGlobalEventTarget(this._doc,t);if(!d)throw new Error(`Unsupported event target ${d} for event ${e}`);return this.addEventListener(d,e,a)}}let se=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const a=new Set;e.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),a.add(d))}),this.onStylesAdded(a)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),wa=(()=>{class r extends se{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,a,d){e.forEach(m=>{const b=this._doc.createElement("style");b.textContent=m,d.push(a.appendChild(b))})}addHost(e){const a=[];this._addStylesToHost(this._stylesSet,e,a),this._hostNodes.set(e,a)}removeHost(e){const a=this._hostNodes.get(e);a&&a.forEach(Su),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((a,d)=>{this._addStylesToHost(e,d,a)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Su))}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function Su(r){kd().remove(r)}const Ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kt=/%COMP%/g;function qr(r,t,e){for(let a=0;a<t.length;a++){let d=t[a];Array.isArray(d)?qr(r,d,e):(d=d.replace(kt,r),e.push(d))}return e}function Ti(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let is=(()=>{class r{constructor(e,a,d){this.eventManager=e,this.sharedStylesHost=a,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new ja(e)}createRenderer(e,a){if(!e||!a)return this.defaultRenderer;switch(a.encapsulation){case Ja.Emulated:{let d=this.rendererByCompId.get(a.id);return d||(d=new fs(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,d)),d.applyToHost(e),d}case 1:case Ja.ShadowDom:return new js(this.eventManager,this.sharedStylesHost,e,a);default:if(!this.rendererByCompId.has(a.id)){const d=qr(a.id,a.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(rn(ps),rn(wa),rn(B_))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class ja{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ht[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Pi(t)?t.content:t).appendChild(e)}insertBefore(t,e,a){t&&(Pi(t)?t.content:t).insertBefore(e,a)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let a="string"==typeof t?document.querySelector(t):t;if(!a)throw new Error(`The selector "${t}" did not match any elements`);return e||(a.textContent=""),a}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,a,d){if(d){e=d+":"+e;const m=Ht[d];m?t.setAttributeNS(m,e,a):t.setAttribute(e,a)}else t.setAttribute(e,a)}removeAttribute(t,e,a){if(a){const d=Ht[a];d?t.removeAttributeNS(d,e):t.removeAttribute(`${a}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,a,d){d&(lu.DashCase|lu.Important)?t.style.setProperty(e,a,d&lu.Important?"important":""):t.style[e]=a}removeStyle(t,e,a){a&lu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,a){t[e]=a}setValue(t,e){t.nodeValue=e}listen(t,e,a){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ti(a)):this.eventManager.addEventListener(t,e,Ti(a))}}function Pi(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class fs extends ja{constructor(t,e,a,d){super(t),this.component=a;const m=qr(d+"-"+a.id,a.styles,[]);e.addStyles(m),this.contentAttr=function fr(r){return"_ngcontent-%COMP%".replace(kt,r)}(d+"-"+a.id),this.hostAttr=function Yr(r){return"_nghost-%COMP%".replace(kt,r)}(d+"-"+a.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const a=super.createElement(t,e);return super.setAttribute(a,this.contentAttr,""),a}}class js extends ja{constructor(t,e,a,d){super(t),this.sharedStylesHost=e,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=qr(d.id,d.styles,[]);for(let b=0;b<m.length;b++){const T=document.createElement("style");T.textContent=m[b],this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,a){return super.insertBefore(this.nodeOrShadowRoot(t),e,a)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let zt=(()=>{class r extends rs{constructor(e){super(e)}supports(e){return!0}addEventListener(e,a,d){return e.addEventListener(a,d,!1),()=>this.removeEventListener(e,a,d)}removeEventListener(e,a,d){return e.removeEventListener(a,d)}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const Cu=["alt","control","meta","shift"],nr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qs={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let M0=(()=>{class r extends rs{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,a,d){const m=r.parseEventName(a),b=r.eventCallback(m.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kd().onAndCancel(e,m.domEventName,b))}static parseEventName(e){const a=e.toLowerCase().split("."),d=a.shift();if(0===a.length||"keydown"!==d&&"keyup"!==d)return null;const m=r._normalizeKey(a.pop());let b="",T=a.indexOf("code");if(T>-1&&(a.splice(T,1),b="code."),Cu.forEach(U=>{const ne=a.indexOf(U);ne>-1&&(a.splice(ne,1),b+=U+".")}),b+=m,0!=a.length||0===m.length)return null;const N={};return N.domEventName=d,N.fullKey=b,N}static matchEventFullKeyCode(e,a){let d=nr[e.key]||e.key,m="";return a.indexOf("code.")>-1&&(d=e.code,m="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),Cu.forEach(b=>{b!==d&&(0,Qs[b])(e)&&(m+=b+".")}),m+=d,m===a)}static eventCallback(e,a,d){return m=>{r.matchEventFullKeyCode(m,e)&&d.runGuarded(()=>a(m))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const DF=sD(Zt,"browser",[{provide:sw,useValue:qc},{provide:WN,useValue:function r7(){tt.makeCurrent()},multi:!0},{provide:oi,useFactory:function o7(){return function LT(r){pu=r}(document),document},deps:[]}]),ek=new zn(""),gV=[{provide:oy,useClass:class Jo{addToWindow(t){Xo.getAngularTestability=(a,d=!0)=>{const m=t.findTestabilityInTree(a,d);if(null==m)throw new Error("Could not find testability for element.");return m},Xo.getAllAngularTestabilities=()=>t.getAllTestabilities(),Xo.getAllAngularRootElements=()=>t.getAllRootElements(),Xo.frameworkStabilizers||(Xo.frameworkStabilizers=[]),Xo.frameworkStabilizers.push(a=>{const d=Xo.getAllAngularTestabilities();let m=d.length,b=!1;const T=function(N){b=b||N,m--,0==m&&a(b)};d.forEach(function(N){N.whenStable(T)})})}findTestabilityInTree(t,e,a){return null==e?null:t.getTestability(e)??(a?kd().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:nD,useClass:ua,deps:[zr,xl,oy]},{provide:ua,useClass:ua,deps:[zr,xl,oy]}],tk=[{provide:bm,useValue:"root"},{provide:Sl,useFactory:function i7(){return new Sl},deps:[]},{provide:bo,useClass:zt,multi:!0,deps:[oi,zr,sw]},{provide:bo,useClass:M0,multi:!0,deps:[oi]},{provide:is,useClass:is,deps:[ps,wa,B_]},{provide:yd,useExisting:is},{provide:se,useExisting:wa},{provide:wa,useClass:wa,deps:[oi]},{provide:ps,useClass:ps,deps:[bo,zr]},{provide:YD,useClass:bu,deps:[]},[]];let kc=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:B_,useValue:e.appId},{provide:ye,useExisting:B_},Kr]}}}return r.\u0275fac=function(e){return new(e||r)(rn(ek,12))},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[...tk,...gV],imports:[hs,oM]}),r})();typeof window<"u"&&window;let NF=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:function(e){let a=null;return a=e?new(e||r):rn(EV),a},providedIn:"root"}),r})(),EV=(()=>{class r extends NF{constructor(e){super(),this._doc=e}sanitize(e,a){if(null==a)return null;switch(e){case eo.NONE:return a;case eo.HTML:return Zi(a,"HTML")?Gu(a):XE(this._doc,String(a)).toString();case eo.STYLE:return Zi(a,"Style")?Gu(a):a;case eo.SCRIPT:if(Zi(a,"Script"))return Gu(a);throw new Error("unsafe value used in a script context");case eo.URL:return Zi(a,"URL")?Gu(a):Jv(String(a));case eo.RESOURCE_URL:if(Zi(a,"ResourceURL"))return Gu(a);throw new Error(`unsafe value used in a resource URL context (see ${qy})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${qy})`)}}bypassSecurityTrustHtml(e){return function fC(r){return new Am(r)}(e)}bypassSecurityTrustStyle(e){return function tP(r){return new ii(r)}(e)}bypassSecurityTrustScript(e){return function Fs(r){return new Hu(r)}(e)}bypassSecurityTrustUrl(e){return function Co(r){return new rB(r)}(e)}bypassSecurityTrustResourceUrl(e){return function qv(r){return new Yv(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:function(e){let a=null;return a=e?new e:function yV(r){return new EV(r.get(oi))}(rn(Qc)),a},providedIn:"root"}),r})();const{isArray:f7}=Array,{getPrototypeOf:bV,prototype:MF,keys:m7}=Object;function SV(r){if(1===r.length){const t=r[0];if(f7(t))return{args:t,keys:null};if(function CV(r){return r&&"object"==typeof r&&bV(r)===MF}(t)){const e=m7(t);return{args:e.map(a=>t[a]),keys:e}}}return{args:r,keys:null}}const{isArray:g7}=Array;function RM(r){return rt(t=>function IV(r,t){return g7(t)?r(...t):r(t)}(r,t))}function $_(r,t){return r.reduce((e,a,d)=>(e[a]=t[d],e),{})}function xF(...r){const t=Yy(r),{args:e,keys:a}=SV(r),d=new Ze(m=>{const{length:b}=e;if(!b)return void m.complete();const T=new Array(b);let N=b,U=b;for(let ne=0;ne<b;ne++){let ve=!1;_n(e[ne]).subscribe(new Pe(m,Qe=>{ve||(ve=!0,U--),T[ne]=Qe},()=>N--,void 0,()=>{(!N||!ve)&&(U||m.next(a?$_(a,T):T),m.complete())}))}});return t?d.pipe(RM(t)):d}let wV=(()=>{class r{constructor(e,a){this._renderer=e,this._elementRef=a,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(e,a){this._renderer.setProperty(this._elementRef.nativeElement,e,a)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(At(Ed),At(ki))},r.\u0275dir=_r({type:r}),r})(),B0=(()=>{class r extends wV{}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Zo(r)))(a||r)}}(),r.\u0275dir=_r({type:r,features:[Lr]}),r})();const lg=new zn("NgValueAccessor"),v7={provide:lg,useExisting:$o(()=>qw),multi:!0},y7=new zn("CompositionEventMode");let qw=(()=>{class r extends wV{constructor(e,a,d){super(e,a),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function A7(){const r=kd()?kd().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(At(Ed),At(ki),At(y7,8))},r.\u0275dir=_r({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,a){1&e&&_o("input",function(m){return a._handleInput(m.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(m){return a._compositionEnd(m.target.value)})},features:[vo([v7]),Lr]}),r})();function Of(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function Qa(r){return null!=r&&"number"==typeof r.length}const Jr=new zn("NgValidators"),dg=new zn("NgAsyncValidators"),Jc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jw{static min(t){return function OM(r){return t=>{if(Of(t.value)||Of(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function DM(r){return t=>{if(Of(t.value)||Of(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function ho(r){return Of(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function FF(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function TV(r){return Of(r.value)||Jc.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function RV(r){return t=>Of(t.value)||!Qa(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function UF(r){return t=>Qa(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Ji(r){if(!r)return Ra;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),a=>{if(Of(a.value))return null;const d=a.value;return t.test(d)?null:{pattern:{requiredPattern:e,actualValue:d}}}}(t)}static nullValidator(t){return null}static compose(t){return PM(t)}static composeAsync(t){return cr(t)}}function Ra(r){return null}function kM(r){return null!=r}function OV(r){return Eb(r)?Tg(r):r}function DV(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Ha(r,t){return t.map(e=>e(r))}function VF(r){return r.map(t=>function Fo(r){return!r.validate}(t)?t:e=>t.validate(e))}function PM(r){if(!r)return null;const t=r.filter(kM);return 0==t.length?null:function(e){return DV(Ha(e,t))}}function pr(r){return null!=r?PM(VF(r)):null}function cr(r){if(!r)return null;const t=r.filter(kM);return 0==t.length?null:function(e){return xF(Ha(e,t).map(OV)).pipe(rt(DV))}}function X_(r){return null!=r?cr(VF(r)):null}function hg(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function F0(r){return r._rawValidators}function $w(r){return r._rawAsyncValidators}function ll(r){return r?Array.isArray(r)?r:[r]:[]}function ha(r,t){return Array.isArray(r)?r.includes(t):r===t}function Ar(r,t){const e=ll(t);return ll(r).forEach(d=>{ha(e,d)||e.push(d)}),e}function NM(r,t){return ll(t).filter(e=>!ha(r,e))}class pa{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=pr(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=X_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class yr extends pa{get formDirective(){return null}get path(){return null}}class Os extends pa{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fa{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Iu=(()=>{class r extends fa{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(At(Os,2))},r.\u0275dir=_r({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,a){2&e&&ws("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[Lr]}),r})(),Fi=(()=>{class r extends fa{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(At(yr,10))},r.\u0275dir=_r({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,a){2&e&&ws("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[Lr]}),r})();const ok="VALID",xM="INVALID",wu="PENDING",pg="DISABLED";function ko(r){return(hc(r)?r.validators:r)||null}function dc(r,t){return(hc(t)?t.asyncValidators:r)||null}function hc(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Ds{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ok}get invalid(){return this.status===xM}get pending(){return this.status==wu}get disabled(){return this.status===pg}get enabled(){return this.status!==pg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ar(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ar(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(NM(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(NM(t,this._rawAsyncValidators))}hasValidator(t){return ha(this._rawValidators,t)}hasAsyncValidator(t){return ha(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=wu,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pg,this.errors=null,this._forEachChild(a=>{a.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ok,this._forEachChild(a=>{a.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ok||this.status===wu)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pg:ok}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=wu,this._hasOwnPendingAsyncValidator=!0;const e=OV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((a,d)=>a&&a._find(d),this)}getError(t,e){const a=e?this.get(e):this;return a&&a.errors?a.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qi,this.statusChanges=new qi}_calculateStatus(){return this._allControlsDisabled()?pg:this.errors?xM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wu)?wu:this._anyControlsHaveStatus(xM)?xM:ok}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hc(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function MV(r){return Array.isArray(r)?pr(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Df(r){return Array.isArray(r)?X_(r):r||null}(this._rawAsyncValidators)}}class Uo extends Ds{constructor(t,e,a){super(ko(e),dc(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,a={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,a={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function gs(r,t,e){r._forEachChild((a,d)=>{if(void 0===e[d])throw new vn(1002,"")})})(this,0,t),Object.keys(t).forEach(a=>{(function Z_(r,t,e){const a=r.controls;if(!(t?Object.keys(a):a).length)throw new vn(1e3,"");if(!a[e])throw new vn(1001,"")})(this,!0,a),this.controls[a].setValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(a=>{const d=this.controls[a];d&&d.patchValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((a,d)=>{a.reset(t[d],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,a)=>(t[a]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,a)=>!!a._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const a=this.controls[e];a&&t(a,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,a]of Object.entries(this.controls))if(this.contains(e)&&t(a))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,a,d)=>((a.enabled||this.disabled)&&(e[d]=a.value),e))}_reduceChildren(t,e){let a=t;return this._forEachChild((d,m)=>{a=e(a,d,m)}),a}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const mr=Uo,Vh=new zn("CallSetDisabledState",{providedIn:"root",factory:()=>ev}),ev="always";function Xw(r,t,e=ev){ak(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(r.disabled),function LV(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&xn(r,t)})}(r,t),function Ud(r,t){const e=(a,d)=>{t.valueAccessor.writeValue(a),d&&t.viewToModelUpdate(a)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function ti(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&xn(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function ma(r,t){if(t.valueAccessor.setDisabledState){const e=a=>{t.valueAccessor.setDisabledState(a)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function sk(r,t,e=!0){const a=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(a),t.valueAccessor.registerOnTouched(a)),Oy(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function LM(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ak(r,t){const e=F0(r);null!==t.validator?r.setValidators(hg(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const a=$w(r);null!==t.asyncValidator?r.setAsyncValidators(hg(a,t.asyncValidator)):"function"==typeof a&&r.setAsyncValidators([a]);const d=()=>r.updateValueAndValidity();LM(t._rawValidators,d),LM(t._rawAsyncValidators,d)}function Oy(r,t){let e=!1;if(null!==r){if(null!==t.validator){const d=F0(r);if(Array.isArray(d)&&d.length>0){const m=d.filter(b=>b!==t.validator);m.length!==d.length&&(e=!0,r.setValidators(m))}}if(null!==t.asyncValidator){const d=$w(r);if(Array.isArray(d)&&d.length>0){const m=d.filter(b=>b!==t.asyncValidator);m.length!==d.length&&(e=!0,r.setAsyncValidators(m))}}}const a=()=>{};return LM(t._rawValidators,a),LM(t._rawAsyncValidators,a),e}function xn(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function vi(r,t){ak(r,t)}function os(r,t){r._syncPendingControls(),t.forEach(e=>{const a=e.control;"submit"===a.updateOn&&a._pendingChange&&(e.viewToModelUpdate(a._pendingValue),a._pendingChange=!1)})}const T7={provide:yr,useExisting:$o(()=>uk)},ck=(()=>Promise.resolve())();let uk=(()=>{class r extends yr{constructor(e,a,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._directives=new Set,this.ngSubmit=new qi,this.form=new Uo({},pr(e),X_(a))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ck.then(()=>{const a=this._findContainer(e.path);e.control=a.registerControl(e.name,e.control),Xw(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ck.then(()=>{const a=this._findContainer(e.path);a&&a.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ck.then(()=>{const a=this._findContainer(e.path),d=new Uo({});vi(d,e),a.registerControl(e.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ck.then(()=>{const a=this._findContainer(e.path);a&&a.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,a){ck.then(()=>{this.form.get(e.path).setValue(a)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,os(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(At(Jr,10),At(dg,10),At(Vh,8))},r.\u0275dir=_r({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,a){1&e&&_o("submit",function(m){return a.onSubmit(m)})("reset",function(){return a.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vo([T7]),Lr]}),r})();function KF(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function FV(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const zF=class extends Ds{constructor(t=null,e,a){super(ko(e),dc(a,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=FV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){KF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){KF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){FV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Ip=zF;let QV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),lk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const FM=new zn("NgModelWithFormControlWarning"),VM={provide:yr,useExisting:$o(()=>e1)};let e1=(()=>{class r extends yr{constructor(e,a,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new qi,this._setValidators(e),this._setAsyncValidators(a)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Oy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const a=this.form.get(e.path);return Xw(a,e,this.callSetDisabledState),a.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),a}getControl(e){return this.form.get(e.path)}removeControl(e){sk(e.control||null,e,!1),function Zc(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,a){this.form.get(e.path).setValue(a)}onSubmit(e){return this.submitted=!0,os(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const a=e.control,d=this.form.get(e.path);a!==d&&(sk(a||null,e),(r=>r instanceof zF)(d)&&(Xw(d,e,this.callSetDisabledState),e.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const a=this.form.get(e.path);vi(a,e),a.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const a=this.form.get(e.path);a&&function dl(r,t){return Oy(r,t)}(a,e)&&a.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ak(this.form,this),this._oldForm&&Oy(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(At(Jr,10),At(dg,10),At(Vh,8))},r.\u0275dir=_r({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,a){1&e&&_o("submit",function(m){return a.onSubmit(m)})("reset",function(){return a.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vo([VM]),Lr,Al]}),r})();const B7={provide:Os,useExisting:$o(()=>ZF)};let ZF=(()=>{class r extends Os{constructor(e,a,d,m,b){super(),this._ngModelWarningConfig=b,this._added=!1,this.update=new qi,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(a),this._setAsyncValidators(d),this.valueAccessor=function Pc(r,t){if(!t)return null;let e,a,d;return Array.isArray(t),t.forEach(m=>{m.constructor===qw?e=m:function zl(r){return Object.getPrototypeOf(r.constructor)===B0}(m)?a=m:d=m}),d||a||e||null}(0,m)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function hl(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function pi(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(At(yr,13),At(Jr,10),At(dg,10),At(lg,10),At(FM,8))},r.\u0275dir=_r({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[vo([B7]),Lr,Al]}),r})(),a3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[lk]}),r})(),ZV=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Vh,useValue:e.callSetDisabledState??ev}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[a3]}),r})(),GM=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:FM,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Vh,useValue:e.callSetDisabledState??ev}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[a3]}),r})();var K7=q(1648),u3=q.n(K7),l3=q(3890),n5=q.n(l3),r5=q(6021);let d3;try{d3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{d3=!1}let Pf,eu=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function EM(r){return r===qc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!d3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(rn(sw))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Vd=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const hk=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Nf(){if(Pf)return Pf;if("object"!=typeof document||!document)return Pf=new Set(hk),Pf;let r=document.createElement("input");return Pf=new Set(hk.filter(t=>(r.setAttribute("type",t),r.type===t))),Pf}let pk,nv,p3;function Nc(r){return function h3(){if(null==pk&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pk=!0}))}finally{pk=pk||!1}return pk}()?r:!!r.capture}function Q0(){if(null==nv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return nv=!1,nv;if("scrollBehavior"in document.documentElement.style)nv=!0;else{const r=Element.prototype.scrollTo;nv=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return nv}function H0(r){return r.composedPath?r.composedPath()[0]:r.target}function mk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ql(...r){return Tg(r,Cg(r))}function Mf(r,t){return ze((e,a)=>{let d=0;e.subscribe(new Pe(a,m=>r.call(t,m,d++)&&a.next(m)))})}class G0{}class gk{}class fg{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const a=e.indexOf(":");if(a>0){const d=e.slice(0,a),m=d.toLowerCase(),b=e.slice(a+1).trim();this.maybeSetNormalizedName(d,m),this.headers.has(m)?this.headers.get(m).push(b):this.headers.set(m,[b])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let a=t[e];const d=e.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(this.headers.set(d,a),this.maybeSetNormalizedName(e,d))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof fg?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new fg;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof fg?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let a=t.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(t.name,e);const d=("a"===t.op?this.headers.get(e):void 0)||[];d.push(...a),this.headers.set(e,d);break;case"d":const m=t.value;if(m){let b=this.headers.get(e);if(!b)return;b=b.filter(T=>-1===m.indexOf(T)),0===b.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,b)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class mg{encodeKey(t){return _3(t)}encodeValue(t){return _3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const q7=/%(\d[a-f0-9])/gi,g3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _3(r){return encodeURIComponent(r).replace(q7,(t,e)=>g3[e]??t)}function r1(r){return`${r}`}class gg{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new mg,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xf(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(d=>{const m=d.indexOf("="),[b,T]=-1==m?[t.decodeKey(d),""]:[t.decodeKey(d.slice(0,m)),t.decodeValue(d.slice(m+1))],N=e.get(b)||[];N.push(T),e.set(b,N)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const a=t.fromObject[e],d=Array.isArray(a)?a.map(r1):[r1(a)];this.map.set(e,d)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(a=>{const d=t[a];Array.isArray(d)?d.forEach(m=>{e.push({param:a,value:m,op:"a"})}):e.push({param:a,value:d,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(a=>e+"="+this.encoder.encodeValue(a)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gg({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(r1(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let a=this.map.get(t.param)||[];const d=a.indexOf(r1(t.value));-1!==d&&a.splice(d,1),a.length>0?this.map.set(t.param,a):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class o5{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function WM(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function v3(r){return typeof Blob<"u"&&r instanceof Blob}function ky(r){return typeof FormData<"u"&&r instanceof FormData}class W0{constructor(t,e,a,d){let m;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function rv(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==a?a:null,m=d):m=a,m&&(this.reportProgress=!!m.reportProgress,this.withCredentials=!!m.withCredentials,m.responseType&&(this.responseType=m.responseType),m.headers&&(this.headers=m.headers),m.context&&(this.context=m.context),m.params&&(this.params=m.params)),this.headers||(this.headers=new fg),this.context||(this.context=new o5),this.params){const b=this.params.toString();if(0===b.length)this.urlWithParams=e;else{const T=e.indexOf("?");this.urlWithParams=e+(-1===T?"?":T<e.length-1?"&":"")+b}}else this.params=new gg,this.urlWithParams=e}serializeBody(){return null===this.body?null:WM(this.body)||v3(this.body)||ky(this.body)||function s5(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ky(this.body)?null:v3(this.body)?this.body.type||null:WM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,a=t.url||this.url,d=t.responseType||this.responseType,m=void 0!==t.body?t.body:this.body,b=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,T=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let N=t.headers||this.headers,U=t.params||this.params;const ne=t.context??this.context;return void 0!==t.setHeaders&&(N=Object.keys(t.setHeaders).reduce((ve,Qe)=>ve.set(Qe,t.setHeaders[Qe]),N)),t.setParams&&(U=Object.keys(t.setParams).reduce((ve,Qe)=>ve.set(Qe,t.setParams[Qe]),U)),new W0(e,a,m,{params:U,headers:N,context:ne,reportProgress:T,responseType:d,withCredentials:b})}}var pc=(()=>((pc=pc||{})[pc.Sent=0]="Sent",pc[pc.UploadProgress=1]="UploadProgress",pc[pc.ResponseHeader=2]="ResponseHeader",pc[pc.DownloadProgress=3]="DownloadProgress",pc[pc.Response=4]="Response",pc[pc.User=5]="User",pc))();class A3{constructor(t,e=200,a="OK"){this.headers=t.headers||new fg,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||a,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class y3 extends A3{constructor(t={}){super(t),this.type=pc.ResponseHeader}clone(t={}){return new y3({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class _g extends A3{constructor(t={}){super(t),this.type=pc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new _g({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class a5 extends A3{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function E3(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let KM=(()=>{class r{constructor(e){this.handler=e}request(e,a,d={}){let m;if(e instanceof W0)m=e;else{let N,U;N=d.headers instanceof fg?d.headers:new fg(d.headers),d.params&&(U=d.params instanceof gg?d.params:new gg({fromObject:d.params})),m=new W0(e,a,void 0!==d.body?d.body:null,{headers:N,context:d.context,params:U,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const b=ql(m).pipe(function z7(r,t){return F(t)?ku(r,t,1):ku(r,1)}(N=>this.handler.handle(N)));if(e instanceof W0||"events"===d.observe)return b;const T=b.pipe(Mf(N=>N instanceof _g));switch(d.observe||"body"){case"body":switch(m.responseType){case"arraybuffer":return T.pipe(rt(N=>{if(null!==N.body&&!(N.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return N.body}));case"blob":return T.pipe(rt(N=>{if(null!==N.body&&!(N.body instanceof Blob))throw new Error("Response is not a Blob.");return N.body}));case"text":return T.pipe(rt(N=>{if(null!==N.body&&"string"!=typeof N.body)throw new Error("Response is not a string.");return N.body}));default:return T.pipe(rt(N=>N.body))}case"response":return T;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(e,a={}){return this.request("DELETE",e,a)}get(e,a={}){return this.request("GET",e,a)}head(e,a={}){return this.request("HEAD",e,a)}jsonp(e,a){return this.request("JSONP",e,{params:(new gg).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,a={}){return this.request("OPTIONS",e,a)}patch(e,a,d={}){return this.request("PATCH",e,E3(d,a))}post(e,a,d={}){return this.request("POST",e,E3(d,a))}put(e,a,d={}){return this.request("PUT",e,E3(d,a))}}return r.\u0275fac=function(e){return new(e||r)(rn(G0))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function c5(r,t){return t(r)}function J7(r,t){return(e,a)=>t.intercept(e,{handle:d=>r(d,a)})}const X7=new zn("HTTP_INTERCEPTORS"),_k=new zn("HTTP_INTERCEPTOR_FNS");function u5(){let r=null;return(t,e)=>(null===r&&(r=(Ea(X7,{optional:!0})??[]).reduceRight(J7,c5)),r(t,e))}let l5=(()=>{class r extends G0{constructor(e,a){super(),this.backend=e,this.injector=a,this.chain=null}handle(e){if(null===this.chain){const a=Array.from(new Set(this.injector.get(_k)));this.chain=a.reduceRight((d,m)=>function $7(r,t,e){return(a,d)=>e.runInContext(()=>t(a,m=>r(m,d)))}(d,m,this.injector),c5)}return this.chain(e,a=>this.backend.handle(a))}}return r.\u0275fac=function(e){return new(e||r)(rn(gk),rn(Zg))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const r9=/^\)\]\}',?\n/;let h5=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ze(a=>{const d=this.xhrFactory.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((Ke,at)=>d.setRequestHeader(Ke,at.join(","))),e.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Ke=e.detectContentTypeHeader();null!==Ke&&d.setRequestHeader("Content-Type",Ke)}if(e.responseType){const Ke=e.responseType.toLowerCase();d.responseType="json"!==Ke?Ke:"text"}const m=e.serializeBody();let b=null;const T=()=>{if(null!==b)return b;const Ke=d.statusText||"OK",at=new fg(d.getAllResponseHeaders()),Ot=function i9(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(d)||e.url;return b=new y3({headers:at,status:d.status,statusText:Ke,url:Ot}),b},N=()=>{let{headers:Ke,status:at,statusText:Ot,url:tn}=T(),an=null;204!==at&&(an=typeof d.response>"u"?d.responseText:d.response),0===at&&(at=an?200:0);let Pn=at>=200&&at<300;if("json"===e.responseType&&"string"==typeof an){const n=an;an=an.replace(r9,"");try{an=""!==an?JSON.parse(an):null}catch(o){an=n,Pn&&(Pn=!1,an={error:o,text:an})}}Pn?(a.next(new _g({body:an,headers:Ke,status:at,statusText:Ot,url:tn||void 0})),a.complete()):a.error(new a5({error:an,headers:Ke,status:at,statusText:Ot,url:tn||void 0}))},U=Ke=>{const{url:at}=T(),Ot=new a5({error:Ke,status:d.status||0,statusText:d.statusText||"Unknown Error",url:at||void 0});a.error(Ot)};let ne=!1;const ve=Ke=>{ne||(a.next(T()),ne=!0);let at={type:pc.DownloadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(at.total=Ke.total),"text"===e.responseType&&!!d.responseText&&(at.partialText=d.responseText),a.next(at)},Qe=Ke=>{let at={type:pc.UploadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(at.total=Ke.total),a.next(at)};return d.addEventListener("load",N),d.addEventListener("error",U),d.addEventListener("timeout",U),d.addEventListener("abort",U),e.reportProgress&&(d.addEventListener("progress",ve),null!==m&&d.upload&&d.upload.addEventListener("progress",Qe)),d.send(m),a.next({type:pc.Sent}),()=>{d.removeEventListener("error",U),d.removeEventListener("abort",U),d.removeEventListener("load",N),d.removeEventListener("timeout",U),e.reportProgress&&(d.removeEventListener("progress",ve),null!==m&&d.upload&&d.upload.removeEventListener("progress",Qe)),d.readyState!==d.DONE&&d.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(rn(YD))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();const zM=new zn("XSRF_ENABLED"),p5="XSRF-TOKEN",f5=new zn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>p5}),m5="X-XSRF-TOKEN",g5=new zn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>m5});class _5{}let o9=(()=>{class r{constructor(e,a,d){this.doc=e,this.platform=a,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vs(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(sw),rn(f5))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();function v5(r,t){const e=r.url.toLowerCase();if(!Ea(zM)||"GET"===r.method||"HEAD"===r.method||e.startsWith("http://")||e.startsWith("https://"))return t(r);const a=Ea(_5).getToken(),d=Ea(g5);return null!=a&&!r.headers.has(d)&&(r=r.clone({headers:r.headers.set(d,a)})),t(r)}var Ga=(()=>((Ga=Ga||{})[Ga.Interceptors=0]="Interceptors",Ga[Ga.LegacyInterceptors=1]="LegacyInterceptors",Ga[Ga.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ga[Ga.NoXsrfProtection=3]="NoXsrfProtection",Ga[Ga.JsonpSupport=4]="JsonpSupport",Ga[Ga.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ga))();function z0(r,t){return{\u0275kind:r,\u0275providers:t}}function A5(...r){const t=[KM,h5,l5,{provide:G0,useExisting:l5},{provide:gk,useExisting:h5},{provide:_k,useValue:v5,multi:!0},{provide:zM,useValue:!0},{provide:_5,useClass:o9}];for(const e of r)t.push(...e.\u0275providers);return function sB(r){return{\u0275providers:r}}(t)}const y5=new zn("LEGACY_INTERCEPTOR_FN");function Y0({cookieName:r,headerName:t}){const e=[];return void 0!==r&&e.push({provide:f5,useValue:r}),void 0!==t&&e.push({provide:g5,useValue:t}),z0(Ga.CustomXsrfConfiguration,e)}let l9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[A5(z0(Ga.LegacyInterceptors,[{provide:y5,useFactory:u5},{provide:_k,useExisting:y5,multi:!0}]),Y0({cookieName:p5,headerName:m5}))]}),r})();class b3 extends St{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:a}=this;if(t)throw e;return this._throwIfClosed(),a}next(t){super.next(this._value=t)}}function s1(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function ox(r,t,e){const a=F(r)||t||e?{next:r,error:t,complete:e}:r;return a?ze((d,m)=>{var b;null===(b=a.subscribe)||void 0===b||b.call(a);let T=!0;d.subscribe(new Pe(m,N=>{var U;null===(U=a.next)||void 0===U||U.call(a,N),m.next(N)},()=>{var N;T=!1,null===(N=a.complete)||void 0===N||N.call(a),m.complete()},N=>{var U;T=!1,null===(U=a.error)||void 0===U||U.call(a,N),m.error(N)},()=>{var N,U;T&&(null===(N=a.unsubscribe)||void 0===N||N.call(a)),null===(U=a.finalize)||void 0===U||U.call(a)}))}):He}class W9 extends V{constructor(t,e){super()}schedule(t,e=0){return this}}const sx={setInterval(...r){const{delegate:t}=sx;return(t?.setInterval||setInterval)(...r)},clearInterval(r){const{delegate:t}=sx;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};class T3 extends W9{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const a=this.id,d=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(d,a,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(d,this.id,e),this}requestAsyncId(t,e,a=0){return sx.setInterval(t.flush.bind(t,this),a)}recycleAsyncId(t,e,a=0){if(null!=a&&this.delay===a&&!1===this.pending)return e;sx.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const a=this._execute(t,e);if(a)return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let d,a=!1;try{this.work(t)}catch(m){a=!0,d=m||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:a}=e;this.work=this.state=this.scheduler=null,this.pending=!1,G(a,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const R3={now:()=>(R3.delegate||Date).now(),delegate:void 0};class yk{constructor(t,e=yk.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,a){return new this.schedulerActionCtor(this,t).schedule(a,e)}}yk.now=R3.now;class O3 extends yk{constructor(t,e=yk.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let a;this._active=!0;do{if(a=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,a){for(;t=e.shift();)t.unsubscribe();throw a}}}const D3=new O3(T3),ax=D3;function k3(r,t=D3){return ze((e,a)=>{let d=null,m=null,b=null;const T=()=>{if(d){d.unsubscribe(),d=null;const U=m;m=null,a.next(U)}};function N(){const U=b+r,ne=t.now();if(ne<U)return d=this.schedule(void 0,U-ne),void a.add(d);T()}e.subscribe(new Pe(a,U=>{m=U,b=t.now(),d||(d=t.schedule(N,r),a.add(d))},()=>{T(),a.complete()},void 0,()=>{m=d=null}))})}function B5(r){return Mf((t,e)=>r<=e)}function F5(r,t=He){return r=r??K9,ze((e,a)=>{let d,m=!0;e.subscribe(new Pe(a,b=>{const T=t(b);(m||!r(d,T))&&(m=!1,d=T,a.next(b))}))})}function K9(r,t){return r===t}function Tu(r){return ze((t,e)=>{_n(r).subscribe(new Pe(e,()=>e.complete(),de)),!e.closed&&t.subscribe(e)})}function Oa(r){return null!=r&&"false"!=`${r}`}function iv(r,t=0){return function U5(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function cx(r){return Array.isArray(r)?r:[r]}function fc(r){return null==r?"":"string"==typeof r?r:`${r}px`}function vg(r){return r instanceof ki?r.nativeElement:r}let V5=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),z9=(()=>{class r{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,a)=>this._cleanupObserver(a))}observe(e){const a=vg(e);return new Ze(d=>{const b=this._observeElement(a).subscribe(d);return()=>{b.unsubscribe(),this._unobserveElement(a)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const a=new St,d=this._mutationObserverFactory.create(m=>a.next(m));d&&d.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:d,stream:a,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:a,stream:d}=this._observedElements.get(e);a&&a.disconnect(),d.complete(),this._observedElements.delete(e)}}}return r.\u0275fac=function(e){return new(e||r)(rn(V5))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Y9=(()=>{class r{constructor(e,a,d){this._contentObserver=e,this._elementRef=a,this._ngZone=d,this.event=new qi,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Oa(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=iv(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(k3(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(At(z9),At(ki),At(zr))},r.\u0275dir=_r({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),j5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[V5]}),r})();function ux(r,t,e){r?Mn(e,r,t):t()}function lx(...r){return function $9(){return rd(1)}()(Tg(r,Cg(r)))}function a1(...r){const t=Cg(r);return ze((e,a)=>{(t?lx(r,e,t):lx(r,e)).subscribe(a)})}const dx=new Set;let c1,rr=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Z9}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function X9(r){if(!dx.has(r))try{c1||(c1=document.createElement("style"),c1.setAttribute("type","text/css"),document.head.appendChild(c1)),c1.sheet&&(c1.sheet.insertRule(`@media ${r} {body{ }}`,0),dx.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(rn(eu))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Z9(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let P3=(()=>{class r{constructor(e,a){this._mediaMatcher=e,this._zone=a,this._queries=new Map,this._destroySubject=new St}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Q5(cx(e)).some(d=>this._registerQuery(d).mql.matches)}observe(e){let m=function q9(...r){const t=Cg(r),e=Yy(r),{args:a,keys:d}=SV(r);if(0===a.length)return Tg([],t);const m=new Ze(function J9(r,t,e=He){return a=>{ux(t,()=>{const{length:d}=r,m=new Array(d);let b=d,T=d;for(let N=0;N<d;N++)ux(t,()=>{const U=Tg(r[N],t);let ne=!1;U.subscribe(new Pe(a,ve=>{m[N]=ve,ne||(ne=!0,T--),T||a.next(e(m.slice()))},()=>{--b||a.complete()}))},a)},a)}}(a,t,d?b=>$_(d,b):He));return e?m.pipe(RM(e)):m}(Q5(cx(e)).map(b=>this._registerQuery(b).observable));return m=lx(m.pipe(fl(1)),m.pipe(B5(1),k3(0))),m.pipe(rt(b=>{const T={matches:!1,breakpoints:{}};return b.forEach(({matches:N,query:U})=>{T.matches=T.matches||N,T.breakpoints[U]=N}),T}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const a=this._mediaMatcher.matchMedia(e),m={observable:new Ze(b=>{const T=N=>this._zone.run(()=>b.next(N));return a.addListener(T),()=>{a.removeListener(T)}}).pipe(a1(a),rt(({matches:b})=>({query:e,matches:b})),Tu(this._destroySubject)),mql:a};return this._queries.set(e,m),m}}return r.\u0275fac=function(e){return new(e||r)(rn(rr),rn(zr))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Q5(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function px(r,t){return(r.getAttribute(t)||"").match(/\S+/g)||[]}const H5="cdk-describedby-message",fx="cdk-describedby-host";let N3=0,M3=(()=>{class r{constructor(e,a){this._platform=a,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+N3++,this._document=e,this._id=Ea(B_)+"-"+N3++}describe(e,a,d){if(!this._canBeDescribed(e,a))return;const m=x3(a,d);"string"!=typeof a?(Py(a,this._id),this._messageRegistry.set(m,{messageElement:a,referenceCount:0})):this._messageRegistry.has(m)||this._createMessageElement(a,d),this._isElementDescribedByMessage(e,m)||this._addMessageReference(e,m)}removeDescription(e,a,d){if(!a||!this._isElementNode(e))return;const m=x3(a,d);if(this._isElementDescribedByMessage(e,m)&&this._removeMessageReference(e,m),"string"==typeof a){const b=this._messageRegistry.get(m);b&&0===b.referenceCount&&this._deleteMessageElement(m)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${fx}="${this._id}"]`);for(let a=0;a<e.length;a++)this._removeCdkDescribedByReferenceIds(e[a]),e[a].removeAttribute(fx);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,a){const d=this._document.createElement("div");Py(d,this._id),d.textContent=e,a&&d.setAttribute("role",a),this._createMessagesContainer(),this._messagesContainer.appendChild(d),this._messageRegistry.set(x3(e,a),{messageElement:d,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",a=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let m=0;m<a.length;m++)a[m].remove();const d=this._document.createElement("div");d.style.visibility="hidden",d.classList.add(e),d.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&d.setAttribute("platform","server"),this._document.body.appendChild(d),this._messagesContainer=d}_removeCdkDescribedByReferenceIds(e){const a=px(e,"aria-describedby").filter(d=>0!=d.indexOf(H5));e.setAttribute("aria-describedby",a.join(" "))}_addMessageReference(e,a){const d=this._messageRegistry.get(a);(function tQ(r,t,e){const a=px(r,t);a.some(d=>d.trim()==e.trim())||(a.push(e.trim()),r.setAttribute(t,a.join(" ")))})(e,"aria-describedby",d.messageElement.id),e.setAttribute(fx,this._id),d.referenceCount++}_removeMessageReference(e,a){const d=this._messageRegistry.get(a);d.referenceCount--,function ov(r,t,e){const d=px(r,t).filter(m=>m!=e.trim());d.length?r.setAttribute(t,d.join(" ")):r.removeAttribute(t)}(e,"aria-describedby",d.messageElement.id),e.removeAttribute(fx)}_isElementDescribedByMessage(e,a){const d=px(e,"aria-describedby"),m=this._messageRegistry.get(a),b=m&&m.messageElement.id;return!!b&&-1!=d.indexOf(b)}_canBeDescribed(e,a){if(!this._isElementNode(e))return!1;if(a&&"object"==typeof a)return!0;const d=null==a?"":`${a}`.trim(),m=e.getAttribute("aria-label");return!(!d||m&&m.trim()===d)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(eu))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function x3(r,t){return"string"==typeof r?`${t||""}/${r}`:r}function Py(r,t){r.id||(r.id=`${H5}-${t}-${N3++}`)}class L3{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new St,this._typeaheadSubscription=V.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new St,this.change=new St,t instanceof Rd&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const d=e.toArray().indexOf(this._activeItem);d>-1&&d!==this._activeItemIndex&&(this._activeItemIndex=d)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ox(e=>this._pressedLetters.push(e)),k3(t),Mf(()=>this._pressedLetters.length>0),rt(()=>this._pressedLetters.join(""))).subscribe(e=>{const a=this._getItemsArray();for(let d=1;d<a.length+1;d++){const m=(this._activeItemIndex+d)%a.length,b=a[m];if(!this._skipPredicateFn(b)&&0===b.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(m);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,d=["altKey","ctrlKey","metaKey","shiftKey"].every(m=>!t[m]||this._allowedModifierKeys.indexOf(m)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&d){this.setNextItemActive();break}return;case 38:if(this._vertical&&d){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&d){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&d){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&d){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&d){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&d){const m=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(m>0?m:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&d){const m=this._activeItemIndex+this._pageUpAndDown.delta,b=this._getItemsArray().length;this._setActiveItemByIndex(m<b?m:b-1,-1);break}return;default:return void((d||s1(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),a="number"==typeof t?t:e.indexOf(t);this._activeItem=e[a]??null,this._activeItemIndex=a}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let a=1;a<=e.length;a++){const d=(this._activeItemIndex+t*a+e.length)%e.length;if(!this._skipPredicateFn(e[d]))return void this.setActiveItem(d)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const a=this._getItemsArray();if(a[t]){for(;this._skipPredicateFn(a[t]);)if(!a[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Rd?this._items.toArray():this._items}}class G5 extends L3{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class mx extends L3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function Ru(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}function Ny(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const V3=new zn("cdk-input-modality-detector-options"),j3={ignoreKeys:[18,17,224,91,16]},J0=Nc({passive:!0,capture:!0});let Qd=(()=>{class r{constructor(e,a,d,m){this._platform=e,this._mostRecentTarget=null,this._modality=new b3(null),this._lastTouchMs=0,this._onKeydown=b=>{this._options?.ignoreKeys?.some(T=>T===b.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=H0(b))},this._onMousedown=b=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ru(b)?"keyboard":"mouse"),this._mostRecentTarget=H0(b))},this._onTouchstart=b=>{Ny(b)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=H0(b))},this._options={...j3,...m},this.modalityDetected=this._modality.pipe(B5(1)),this.modalityChanged=this.modalityDetected.pipe(F5()),e.isBrowser&&a.runOutsideAngular(()=>{d.addEventListener("keydown",this._onKeydown,J0),d.addEventListener("mousedown",this._onMousedown,J0),d.addEventListener("touchstart",this._onTouchstart,J0)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,J0),document.removeEventListener("mousedown",this._onMousedown,J0),document.removeEventListener("touchstart",this._onTouchstart,J0))}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(zr),rn(oi),rn(V3,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Xr=new zn("liveAnnouncerElement",{providedIn:"root",factory:function sQ(){return null}}),Ck=new zn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Ik=0,wk=(()=>{class r{constructor(e,a,d,m){this._ngZone=a,this._defaultOptions=m,this._document=d,this._liveElement=e||this._createLiveElement()}announce(e,...a){const d=this._defaultOptions;let m,b;return 1===a.length&&"number"==typeof a[0]?b=a[0]:[m,b]=a,this.clear(),clearTimeout(this._previousTimeout),m||(m=d&&d.politeness?d.politeness:"polite"),null==b&&d&&(b=d.duration),this._liveElement.setAttribute("aria-live",m),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(T=>this._currentResolve=T)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof b&&(this._previousTimeout=setTimeout(()=>this.clear(),b)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",a=this._document.getElementsByClassName(e),d=this._document.createElement("div");for(let m=0;m<a.length;m++)a[m].remove();return d.classList.add(e),d.classList.add("cdk-visually-hidden"),d.setAttribute("aria-atomic","true"),d.setAttribute("aria-live","polite"),d.id="cdk-live-announcer-"+Ik++,this._document.body.appendChild(d),d}_exposeAnnouncerToModals(e){const a=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let d=0;d<a.length;d++){const m=a[d],b=m.getAttribute("aria-owns");b?-1===b.indexOf(e)&&m.setAttribute("aria-owns",b+" "+e):m.setAttribute("aria-owns",e)}}}return r.\u0275fac=function(e){return new(e||r)(rn(Xr,8),rn(zr),rn(oi),rn(Ck,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const My=new zn("cdk-focus-monitor-default-options"),gx=Nc({passive:!0,capture:!0});let _x=(()=>{class r{constructor(e,a,d,m,b){this._ngZone=e,this._platform=a,this._inputModalityDetector=d,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St,this._rootNodeFocusAndBlurListener=T=>{for(let U=H0(T);U;U=U.parentElement)"focus"===T.type?this._onFocus(T,U):this._onBlur(T,U)},this._document=m,this._detectionMode=b?.detectionMode||0}monitor(e,a=!1){const d=vg(e);if(!this._platform.isBrowser||1!==d.nodeType)return ql(null);const m=function m3(r){if(function f3(){if(null==p3){const r=typeof document<"u"?document.head:null;p3=!(!r||!r.createShadowRoot&&!r.attachShadow)}return p3}()){const t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(d)||this._getDocument(),b=this._elementInfo.get(d);if(b)return a&&(b.checkChildren=!0),b.subject;const T={checkChildren:a,subject:new St,rootNode:m};return this._elementInfo.set(d,T),this._registerGlobalListeners(T),T.subject}stopMonitoring(e){const a=vg(e),d=this._elementInfo.get(a);d&&(d.subject.complete(),this._setClasses(a),this._elementInfo.delete(a),this._removeGlobalListeners(d))}focusVia(e,a,d){const m=vg(e);m===this._getDocument().activeElement?this._getClosestElementsInfo(m).forEach(([T,N])=>this._originChanged(T,a,N)):(this._setOrigin(a),"function"==typeof m.focus&&m.focus(d))}ngOnDestroy(){this._elementInfo.forEach((e,a)=>this.stopMonitoring(a))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,a){e.classList.toggle("cdk-focused",!!a),e.classList.toggle("cdk-touch-focused","touch"===a),e.classList.toggle("cdk-keyboard-focused","keyboard"===a),e.classList.toggle("cdk-mouse-focused","mouse"===a),e.classList.toggle("cdk-program-focused","program"===a)}_setOrigin(e,a=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&a,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,a){const d=this._elementInfo.get(a),m=H0(e);!d||!d.checkChildren&&a!==m||this._originChanged(a,this._getFocusOrigin(m),d)}_onBlur(e,a){const d=this._elementInfo.get(a);!d||d.checkChildren&&e.relatedTarget instanceof Node&&a.contains(e.relatedTarget)||(this._setClasses(a),this._emitOrigin(d,null))}_emitOrigin(e,a){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(a))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const a=e.rootNode,d=this._rootNodeFocusListenerCount.get(a)||0;d||this._ngZone.runOutsideAngular(()=>{a.addEventListener("focus",this._rootNodeFocusAndBlurListener,gx),a.addEventListener("blur",this._rootNodeFocusAndBlurListener,gx)}),this._rootNodeFocusListenerCount.set(a,d+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Tu(this._stopInputModalityDetector)).subscribe(m=>{this._setOrigin(m,!0)}))}_removeGlobalListeners(e){const a=e.rootNode;if(this._rootNodeFocusListenerCount.has(a)){const d=this._rootNodeFocusListenerCount.get(a);d>1?this._rootNodeFocusListenerCount.set(a,d-1):(a.removeEventListener("focus",this._rootNodeFocusAndBlurListener,gx),a.removeEventListener("blur",this._rootNodeFocusAndBlurListener,gx),this._rootNodeFocusListenerCount.delete(a))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,a,d){this._setClasses(e,a),this._emitOrigin(d,a),this._lastFocusOrigin=a}_getClosestElementsInfo(e){const a=[];return this._elementInfo.forEach((d,m)=>{(m===e||d.checkChildren&&m.contains(e))&&a.push([m,d])}),a}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:a,mostRecentModality:d}=this._inputModalityDetector;if("mouse"!==d||!a||a===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const m=e.labels;if(m)for(let b=0;b<m.length;b++)if(m[b].contains(a))return!0;return!1}}return r.\u0275fac=function(e){return new(e||r)(rn(zr),rn(eu),rn(Qd),rn(oi,8),rn(My,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Q3="cdk-high-contrast-black-on-white",vx="cdk-high-contrast-white-on-black",H3="cdk-high-contrast-active";let Ax=(()=>{class r{constructor(e,a){this._platform=e,this._document=a,this._breakpointSubscription=Ea(P3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const a=this._document.defaultView||window,d=a&&a.getComputedStyle?a.getComputedStyle(e):null,m=(d&&d.backgroundColor||"").replace(/ /g,"");switch(e.remove(),m){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(H3,Q3,vx),this._hasCheckedHighContrastMode=!0;const a=this.getHighContrastMode();1===a?e.add(H3,Q3):2===a&&e.add(H3,vx)}}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),J5=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(rn(Ax))},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[j5]}),r})();const G3=new zn("cdk-dir-doc",{providedIn:"root",factory:function yx(){return Ea(oi)}}),$5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $0=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new qi,e){const d=e.documentElement?e.documentElement.dir:null;this.value=function W3(r){const t=r?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?$5.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(rn(G3,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),pl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const bx=["text"];function u1(r,t){if(1&r&&go(0,"mat-pseudo-checkbox",5),2&r){const e=ai();Bn("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function Jl(r,t){if(1&r&&(Rn(0,"span",6),Hr(1),Gn()),2&r){const e=ai();Cn(1),Zu("(",e.group.label,")")}}const Z5=[[["mat-icon"]],"*"],uQ=["mat-icon","*"],nj=new zn("mat-sanity-checks",{providedIn:"root",factory:function tj(){return!0}});let ks=(()=>{class r{constructor(e,a,d){this._sanityChecks=a,this._document=d,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!mk()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return r.\u0275fac=function(e){return new(e||r)(rn(Ax),rn(nj,8),rn(oi))},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[pl,pl]}),r})();function Tk(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Oa(t)}}}function Sx(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const a=e||this.defaultColor;a!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),a&&this._elementRef.nativeElement.classList.add(`mat-${a}`),this._color=a)}}}function Cx(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Oa(t)}}}function rj(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?iv(e):this.defaultTabIndex}}}function K3(r){return class extends r{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,m=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);m!==t&&(this.errorState=m,this.stateChanges.next())}}}let z3=(()=>{class r{isErrorState(e,a){return!!(e&&e.invalid&&(e.touched||a&&a.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Y3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,ks]}),r})();class oj{constructor(t,e,a,d=!1){this._renderer=t,this.element=e,this.config=a,this._animationForciblyDisabledThroughCss=d,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ix={enterDuration:225,exitDuration:150},X0=Nc({passive:!0}),sj=["mousedown","touchstart"],Gd=["mouseup","mouseleave","touchend","touchcancel"];class CQ{constructor(t,e,a,d){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,d.isBrowser&&(this._containerElement=vg(a))}fadeInRipple(t,e,a={}){const d=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),m={...Ix,...a.animation};a.centered&&(t=d.left+d.width/2,e=d.top+d.height/2);const b=a.radius||function IQ(r,t,e){const a=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),d=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(a*a+d*d)}(t,e,d),T=t-d.left,N=e-d.top,U=m.enterDuration,ne=document.createElement("div");ne.classList.add("mat-ripple-element"),ne.style.left=T-b+"px",ne.style.top=N-b+"px",ne.style.height=2*b+"px",ne.style.width=2*b+"px",null!=a.color&&(ne.style.backgroundColor=a.color),ne.style.transitionDuration=`${U}ms`,this._containerElement.appendChild(ne);const ve=window.getComputedStyle(ne),Ke=ve.transitionDuration,at="none"===ve.transitionProperty||"0s"===Ke||"0s, 0s"===Ke||0===d.width&&0===d.height,Ot=new oj(this,ne,a,at);ne.style.transform="scale3d(1, 1, 1)",Ot.state=0,a.persistent||(this._mostRecentTransientRipple=Ot);let tn=null;return!at&&(U||m.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const an=()=>this._finishRippleTransition(Ot),Pn=()=>this._destroyRipple(Ot);ne.addEventListener("transitionend",an),ne.addEventListener("transitioncancel",Pn),tn={onTransitionEnd:an,onTransitionCancel:Pn}}),this._activeRipples.set(Ot,tn),(at||!U)&&this._finishRippleTransition(Ot),Ot}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,a={...Ix,...t.config.animation};e.style.transitionDuration=`${a.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!a.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=vg(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(sj))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Gd),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:a}=t.config;t.state=1,!a&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Ru(t),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!a&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ny(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let a=0;a<e.length;a++)this.fadeInRipple(e[a].clientX,e[a].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,X0)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(sj.forEach(t=>{this._triggerElement.removeEventListener(t,this,X0)}),this._pointerUpEventsRegistered&&Gd.forEach(t=>{this._triggerElement.removeEventListener(t,this,X0)}))}}const wQ=new zn("mat-ripple-global-options");let d1=(()=>{class r{constructor(e,a,d,m,b){this._elementRef=e,this._animationMode=b,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=m||{},this._rippleRenderer=new CQ(this,a,e,d)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,a=0,d){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,a,{...this.rippleConfig,...d}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(zr),At(eu),At(wQ,8),At($s,8))},r.\u0275dir=_r({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,a){2&e&&ws("mat-ripple-unbounded",a.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),$l=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,ks]}),r})(),aj=(()=>{class r{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return r.\u0275fac=function(e){return new(e||r)(At($s,8))},r.\u0275cmp=ka({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,a){2&e&&ws("mat-pseudo-checkbox-indeterminate","indeterminate"===a.state)("mat-pseudo-checkbox-checked","checked"===a.state)("mat-pseudo-checkbox-disabled",a.disabled)("_mat-animation-noopable","NoopAnimations"===a._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,a){},styles:['.mat-pseudo-checkbox{border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}.mat-pseudo-checkbox-checked::after{top:2.7px;width:10px;height:4px}'],encapsulation:2,changeDetection:0}),r})(),Z0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks]}),r})();const eS=new zn("MAT_OPTION_PARENT_COMPONENT"),wx=new zn("MatOptgroup");let xy=0;class cj{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let uj=(()=>{class r{constructor(e,a,d,m){this._element=e,this._changeDetectorRef=a,this._parent=d,this.group=m,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+xy++,this.onSelectionChange=new qi,this._stateChanges=new St}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Oa(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,a){const d=this._getHostElement();"function"==typeof d.focus&&d.focus(a)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!s1(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new cj(this,e))}}return r.\u0275fac=function(e){dA()},r.\u0275dir=_r({type:r,viewQuery:function(e,a){if(1&e&&Js(bx,7),2&e){let d;Ao(d=yo())&&(a._text=d.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),r})(),J3=(()=>{class r extends uj{constructor(e,a,d,m){super(e,a,d,m)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(Oh),At(eS,8),At(wx,8))},r.\u0275cmp=ka({type:r,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(e,a){1&e&&_o("click",function(){return a._selectViaInteraction()})("keydown",function(m){return a._handleKeydown(m)}),2&e&&(xb("id",a.id),so("tabindex",a._getTabIndex())("aria-selected",a._getAriaSelected())("aria-disabled",a.disabled.toString()),ws("mdc-list-item--selected",a.selected)("mat-mdc-option-multiple",a.multiple)("mat-mdc-option-active",a.active)("mdc-list-item--disabled",a.disabled))},exportAs:["matOption"],features:[Lr],ngContentSelectors:uQ,decls:7,vars:4,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,a){1&e&&(ic(Z5),hr(0,u1,1,2,"mat-pseudo-checkbox",0),Ko(1),Rn(2,"span",1,2),Ko(4,1),Gn(),hr(5,Jl,2,1,"span",3),go(6,"div",4)),2&e&&(Bn("ngIf",a.multiple),Cn(5),Bn("ngIf",a.group&&a.group._inert),Cn(1),Bn("matRippleTrigger",a._getHostElement())("matRippleDisabled",a.disabled||a.disableRipple))},dependencies:[d1,ig,aj],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox{margin-right:0;margin-left:16px}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),r})(),Tx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[$l,hs,ks,Z0]}),r})();const DQ=["mat-button",""],sv=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],X3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Mc=["mat-fab",""],Vo=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Ly=Sx(Tk(Cx(class{constructor(r){this._elementRef=r}})));let f1=(()=>{class r extends Ly{constructor(e,a,d,m){super(e),this._platform=a,this._ngZone=d,this._animationMode=m,this._focusMonitor=Ea(_x),this._isFab=!1;const b=e.nativeElement.classList;for(const T of Vo)this._hasHostAttributes(T.selector)&&T.mdcClasses.forEach(N=>{b.add(N)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",a){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,a):this._elementRef.nativeElement.focus(a)}_hasHostAttributes(...e){return e.some(a=>this._elementRef.nativeElement.hasAttribute(a))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return r.\u0275fac=function(e){dA()},r.\u0275dir=_r({type:r,viewQuery:function(e,a){if(1&e&&Js(d1,5),2&e){let d;Ao(d=yo())&&(a.ripple=d.first)}},features:[Lr]}),r})(),_c=(()=>{class r extends f1{constructor(e,a,d,m){super(e,a,d,m)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(eu),At(zr),At($s,8))},r.\u0275cmp=ka({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,a){2&e&&(so("disabled",a.disabled||null),ws("_mat-animation-noopable","NoopAnimations"===a._animationMode)("mat-unthemed",!a.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Lr],attrs:DQ,ngContentSelectors:X3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,a){1&e&&(ic(sv),go(0,"span",0),Ko(1),Rn(2,"span",1),Ko(3,1),Gn(),Ko(4,2),go(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ws("mdc-button__ripple",!a._isFab)("mdc-fab__ripple",a._isFab),Cn(6),Bn("matRippleDisabled",a._isRippleDisabled())("matRippleTrigger",a._elementRef.nativeElement))},dependencies:[d1],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),r})();const Ok=new zn("mat-mdc-fab-default-options",{providedIn:"root",factory:Rx});function Rx(){return{color:"accent"}}const Dk=Rx();let lj=(()=>{class r extends f1{constructor(e,a,d,m,b){super(e,a,d,m),this._options=b,this._isFab=!0,this._options=this._options||Dk,this.color=this.defaultColor=this._options.color||Dk.color}get extended(){return this._extended}set extended(e){this._extended=Oa(e)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(eu),At(zr),At($s,8),At(Ok,8))},r.\u0275cmp=ka({type:r,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(e,a){2&e&&(so("disabled",a.disabled||null),ws("_mat-animation-noopable","NoopAnimations"===a._animationMode)("mat-unthemed",!a.color)("mat-mdc-button-base",!0)("mdc-fab--extended",a.extended)("mat-mdc-extended-fab",a.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Lr],attrs:Mc,ngContentSelectors:X3,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,a){1&e&&(ic(sv),go(0,"span",0),Ko(1),Rn(2,"span",1),Ko(3,1),Gn(),Ko(4,2),go(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ws("mdc-button__ripple",!a._isFab)("mdc-fab__ripple",a._isFab),Cn(6),Bn("matRippleDisabled",a._isRippleDisabled())("matRippleTrigger",a._elementRef.nativeElement))},dependencies:[d1],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),r})(),tU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,$l,ks]}),r})();class dj{}class FQ{}const av="*";function By(r,t){return{type:7,name:r,definitions:t,options:{}}}function Fy(r,t=null){return{type:4,styles:t,timings:r}}function hj(r,t=null){return{type:2,steps:r,options:t}}function Xl(r){return{type:6,styles:r,offset:null}}function Lf(r,t,e){return{type:0,name:r,styles:t,options:e}}function cv(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function VQ(r=null){return{type:9,options:r}}function jQ(r,t,e=null){return{type:11,selector:r,animation:t,options:e}}function pj(r){Promise.resolve().then(r)}class kk{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pj(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class fj{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,a=0,d=0;const m=this.players.length;0==m?pj(()=>this._onFinish()):this.players.forEach(b=>{b.onDone(()=>{++e==m&&this._onFinish()}),b.onDestroy(()=>{++a==m&&this._onDestroy()}),b.onStart(()=>{++d==m&&this._onStart()})}),this.totalTime=this.players.reduce((b,T)=>Math.max(b,T.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(a=>{const d=a.totalTime?Math.min(1,e/a.totalTime):1;a.setPosition(d)})}getPosition(){const t=this.players.reduce((e,a)=>null===e||a.totalTime>e.totalTime?a:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class Pk{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class rU extends Pk{constructor(t,e,a,d,m){super(),this.component=t,this.viewContainerRef=e,this.injector=a,this.componentFactoryResolver=d,this.projectableNodes=m}}class Nk extends Pk{constructor(t,e,a,d){super(),this.templateRef=t,this.viewContainerRef=e,this.context=a,this.injector=d}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class mj extends Pk{constructor(t){super(),this.element=t instanceof ki?t.nativeElement:t}}class Ox{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof rU?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Nk?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof mj?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class _1 extends Ox{constructor(t,e,a,d,m){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=a,this._defaultInjector=d,this.attachDomPortal=b=>{const T=b.element,N=this._document.createComment("dom-portal");T.parentNode.insertBefore(N,T),this.outletElement.appendChild(T),this._attachedPortal=b,super.setDisposeFn(()=>{N.parentNode&&N.parentNode.replaceChild(T,N)})},this._document=m}attachComponentPortal(t){const a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let d;return t.viewContainerRef?(d=t.viewContainerRef.createComponent(a,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>d.destroy())):(d=a.create(t.injector||this._defaultInjector||Qc.NULL),this._appRef.attachView(d.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(d.hostView),d.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(d)),this._attachedPortal=t,d}attachTemplatePortal(t){let e=t.viewContainerRef,a=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return a.rootNodes.forEach(d=>this.outletElement.appendChild(d)),a.detectChanges(),this.setDisposeFn(()=>{let d=e.indexOf(a);-1!==d&&e.remove(d)}),this._attachedPortal=t,a}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let uv=(()=>{class r extends Ox{constructor(e,a,d){super(),this._componentFactoryResolver=e,this._viewContainerRef=a,this._isInitialized=!1,this.attached=new qi,this.attachDomPortal=m=>{const b=m.element,T=this._document.createComment("dom-portal");m.setAttachedHost(this),b.parentNode.insertBefore(T,b),this._getRootNode().appendChild(b),this._attachedPortal=m,super.setDisposeFn(()=>{T.parentNode&&T.parentNode.replaceChild(b,T)})},this._document=d}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const a=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,m=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),b=a.createComponent(m,a.length,e.injector||a.injector,e.projectableNodes||void 0);return a!==this._viewContainerRef&&this._getRootNode().appendChild(b.hostView.rootNodes[0]),super.setDisposeFn(()=>b.destroy()),this._attachedPortal=e,this._attachedRef=b,this.attached.emit(b),b}attachTemplatePortal(e){e.setAttachedHost(this);const a=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=a,this.attached.emit(a),a}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(At(Im),At(rl),At(oi))},r.\u0275dir=_r({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Lr]}),r})(),_j=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const vj=["addListener","removeListener"],KQ=["addEventListener","removeEventListener"],zQ=["on","off"];function iU(r,t,e,a){if(F(e)&&(a=e,e=void 0),a)return iU(r,t,e).pipe(RM(a));const[d,m]=function Px(r){return F(r.addEventListener)&&F(r.removeEventListener)}(r)?KQ.map(b=>T=>r[b](t,T,e)):function kx(r){return F(r.addListener)&&F(r.removeListener)}(r)?vj.map(Dx(r,t)):function oU(r){return F(r.on)&&F(r.off)}(r)?zQ.map(Dx(r,t)):[];if(!d&&Io(r))return ku(b=>iU(b,t,e))(_n(r));if(!d)throw new TypeError("Invalid event target");return new Ze(b=>{const T=(...N)=>b.next(1<N.length?N:N[0]);return d(T),()=>m(T)})}function Dx(r,t){return e=>a=>r[e](t,a)}const Wd={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:a}=Wd;a&&(t=a.requestAnimationFrame,e=a.cancelAnimationFrame);const d=t(m=>{e=void 0,r(m)});return new V(()=>e?.(d))},requestAnimationFrame(...r){const{delegate:t}=Wd;return(t?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Wd;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};new class yj extends O3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let a,d=-1;t=t||e.shift();const m=e.length;do{if(a=t.execute(t.state,t.delay))break}while(++d<m&&(t=e.shift()));if(this._active=!1,a){for(;++d<m&&(t=e.shift());)t.unsubscribe();throw a}}}(class Aj extends T3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,a=0){return null!==a&&a>0?super.requestAsyncId(t,e,a):(t.actions.push(this),t._scheduled||(t._scheduled=Wd.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,a=0){if(null!=a&&a>0||null==a&&this.delay>0)return super.recycleAsyncId(t,e,a);0===t.actions.length&&(Wd.cancelAnimationFrame(e),t._scheduled=void 0)}});let Mk,qQ=1;const xk={};function Nx(r){return r in xk&&(delete xk[r],!0)}const JQ={setImmediate(r){const t=qQ++;return xk[t]=!0,Mk||(Mk=Promise.resolve()),Mk.then(()=>Nx(t)&&r()),t},clearImmediate(r){Nx(r)}},{setImmediate:$Q,clearImmediate:XQ}=JQ,Lk={setImmediate(...r){const{delegate:t}=Lk;return(t?.setImmediate||$Q)(...r)},clearImmediate(r){const{delegate:t}=Lk;return(t?.clearImmediate||XQ)(r)},delegate:void 0},Mx=new class ZQ extends O3{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let a,d=-1;t=t||e.shift();const m=e.length;do{if(a=t.execute(t.state,t.delay))break}while(++d<m&&(t=e.shift()));if(this._active=!1,a){for(;++d<m&&(t=e.shift());)t.unsubscribe();throw a}}}(class Gh extends T3{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,a=0){return null!==a&&a>0?super.requestAsyncId(t,e,a):(t.actions.push(this),t._scheduled||(t._scheduled=Lk.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,a=0){if(null!=a&&a>0||null==a&&this.delay>0)return super.recycleAsyncId(t,e,a);0===t.actions.length&&(Lk.clearImmediate(e),t._scheduled=void 0)}});function bj(r=0,t,e=ax){let a=-1;return null!=t&&(Q1(t)?e=t:a=t),new Ze(d=>{let m=function v1(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;m<0&&(m=0);let b=0;return e.schedule(function(){d.closed||(d.next(b++),0<=a?this.schedule(void 0,a):d.complete())},m)})}function Sj(r,t=ax){return function eH(r){return ze((t,e)=>{let a=!1,d=null,m=null,b=!1;const T=()=>{if(m?.unsubscribe(),m=null,a){a=!1;const U=d;d=null,e.next(U)}b&&e.complete()},N=()=>{m=null,b&&e.complete()};t.subscribe(new Pe(e,U=>{a=!0,d=U,m||_n(r(U)).subscribe(m=new Pe(e,T,N))},()=>{b=!0,(!a||!m||m.closed)&&e.complete()}))})}(()=>bj(r,t))}let Bk=(()=>{class r{constructor(e,a,d){this._ngZone=e,this._platform=a,this._scrolled=new St,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const a=this.scrollContainers.get(e);a&&(a.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ze(a=>{this._globalSubscription||this._addGlobalListener();const d=e>0?this._scrolled.pipe(Sj(e)).subscribe(a):this._scrolled.subscribe(a);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ql()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,a)=>this.deregister(a)),this._scrolled.complete()}ancestorScrolled(e,a){const d=this.getAncestorScrollContainers(e);return this.scrolled(a).pipe(Mf(m=>!m||d.indexOf(m)>-1))}getAncestorScrollContainers(e){const a=[];return this.scrollContainers.forEach((d,m)=>{this._scrollableContainsElement(m,e)&&a.push(m)}),a}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,a){let d=vg(a),m=e.getElementRef().nativeElement;do{if(d==m)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>iU(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(rn(zr),rn(eu),rn(oi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),aU=(()=>{class r{constructor(e,a,d){this._platform=e,this._change=new St,this._changeListener=m=>{this._change.next(m)},this._document=d,a.runOutsideAngular(()=>{if(e.isBrowser){const m=this._getWindow();m.addEventListener("resize",this._changeListener),m.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:a,height:d}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+d,right:e.left+a,height:d,width:a}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,a=this._getWindow(),d=e.documentElement,m=d.getBoundingClientRect();return{top:-m.top||e.body.scrollTop||a.scrollY||d.scrollTop||0,left:-m.left||e.body.scrollLeft||a.scrollX||d.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Sj(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(zr),rn(oi,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Fk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})(),Tj=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[pl,Fk,pl,Fk]}),r})();const cU=Q0();class cH{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=fc(-this._previousScrollPosition.left),t.style.top=fc(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,a=t.style,d=this._document.body.style,m=a.scrollBehavior||"",b=d.scrollBehavior||"";this._isEnabled=!1,a.left=this._previousHTMLStyles.left,a.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),cU&&(a.scrollBehavior=d.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),cU&&(a.scrollBehavior=m,d.scrollBehavior=b)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,a=this._viewportRuler.getViewportSize();return e.scrollHeight>a.height||e.scrollWidth>a.width}}class Rj{constructor(t,e,a,d){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=a,this._config=d,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Oj{enable(){}disable(){}attach(){}}function uU(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function Dj(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class kj{constructor(t,e,a,d){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=a,this._config=d,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:a,height:d}=this._viewportRuler.getViewportSize();uU(e,[{width:a,height:d,bottom:d,right:a,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let lU=(()=>{class r{constructor(e,a,d,m){this._scrollDispatcher=e,this._viewportRuler=a,this._ngZone=d,this.noop=()=>new Oj,this.close=b=>new Rj(this._scrollDispatcher,this._ngZone,this._viewportRuler,b),this.block=()=>new cH(this._viewportRuler,this._document),this.reposition=b=>new kj(this._scrollDispatcher,this._viewportRuler,this._ngZone,b),this._document=m}}return r.\u0275fac=function(e){return new(e||r)(rn(Bk),rn(aU),rn(zr),rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class Uk{constructor(t){if(this.scrollStrategy=new Oj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const a of e)void 0!==t[a]&&(this[a]=t[a])}}}class uH{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Bx=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const a=this._attachedOverlays.indexOf(e);a>-1&&this._attachedOverlays.splice(a,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Rp=(()=>{class r extends Bx{constructor(e,a){super(e),this._ngZone=a,this._keydownListener=d=>{const m=this._attachedOverlays;for(let b=m.length-1;b>-1;b--)if(m[b]._keydownEvents.observers.length>0){const T=m[b]._keydownEvents;this._ngZone?this._ngZone.run(()=>T.next(d)):T.next(d);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(zr,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),dH=(()=>{class r extends Bx{constructor(e,a,d){super(e),this._platform=a,this._ngZone=d,this._cursorStyleIsSet=!1,this._pointerDownListener=m=>{this._pointerDownEventTarget=H0(m)},this._clickListener=m=>{const b=H0(m),T="click"===m.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:b;this._pointerDownEventTarget=null;const N=this._attachedOverlays.slice();for(let U=N.length-1;U>-1;U--){const ne=N[U];if(ne._outsidePointerEvents.observers.length<1||!ne.hasAttached())continue;if(ne.overlayElement.contains(b)||ne.overlayElement.contains(T))break;const ve=ne._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>ve.next(m)):ve.next(m)}}}add(e){if(super.add(e),!this._isAttached){const a=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(a)):this._addEventListeners(a),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=a.style.cursor,a.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(eu),rn(zr,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Pj=(()=>{class r{constructor(e,a){this._platform=a,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||mk()){const d=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let m=0;m<d.length;m++)d[m].remove()}const a=this._document.createElement("div");a.classList.add(e),mk()?a.setAttribute("platform","test"):this._platform.isBrowser||a.setAttribute("platform","server"),this._document.body.appendChild(a),this._containerElement=a}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(eu))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class hU{constructor(t,e,a,d,m,b,T,N,U,ne=!1){this._portalOutlet=t,this._host=e,this._pane=a,this._config=d,this._ngZone=m,this._keyboardDispatcher=b,this._document=T,this._location=N,this._outsideClickDispatcher=U,this._animationsDisabled=ne,this._backdropElement=null,this._backdropClick=new St,this._attachments=new St,this._detachments=new St,this._locationChanges=V.EMPTY,this._backdropClickHandler=ve=>this._backdropClick.next(ve),this._backdropTransitionendHandler=ve=>{this._disposeBackdrop(ve.target)},this._keydownEvents=new St,this._outsidePointerEvents=new St,d.scrollStrategy&&(this._scrollStrategy=d.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=d.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(fl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=fc(this._config.width),t.height=fc(this._config.height),t.minWidth=fc(this._config.minWidth),t.minHeight=fc(this._config.minHeight),t.maxWidth=fc(this._config.maxWidth),t.maxHeight=fc(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,a){const d=cx(e||[]).filter(m=>!!m);d.length&&(a?t.classList.add(...d):t.classList.remove(...d))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Tu(Po(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Nj="cdk-overlay-connected-position-bounding-box",pU=/([A-Za-z%]+)$/;class Mj{constructor(t,e,a,d,m){this._viewportRuler=e,this._document=a,this._platform=d,this._overlayContainer=m,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St,this._resizeSubscription=V.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Nj),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,a=this._viewportRect,d=this._containerRect,m=[];let b;for(let T of this._preferredPositions){let N=this._getOriginPoint(t,d,T),U=this._getOverlayPoint(N,e,T),ne=this._getOverlayFit(U,e,a,T);if(ne.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(T,N);this._canFitWithFlexibleDimensions(ne,U,a)?m.push({position:T,origin:N,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(N,T)}):(!b||b.overlayFit.visibleArea<ne.visibleArea)&&(b={overlayFit:ne,overlayPoint:U,originPoint:N,position:T,overlayRect:e})}if(m.length){let T=null,N=-1;for(const U of m){const ne=U.boundingBoxRect.width*U.boundingBoxRect.height*(U.position.weight||1);ne>N&&(N=ne,T=U)}return this._isPushed=!1,void this._applyPosition(T.position,T.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(b.position,b.originPoint);this._applyPosition(b.position,b.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Nj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,a){let d,m;if("center"==a.originX)d=t.left+t.width/2;else{const b=this._isRtl()?t.right:t.left,T=this._isRtl()?t.left:t.right;d="start"==a.originX?b:T}return e.left<0&&(d-=e.left),m="center"==a.originY?t.top+t.height/2:"top"==a.originY?t.top:t.bottom,e.top<0&&(m-=e.top),{x:d,y:m}}_getOverlayPoint(t,e,a){let d,m;return d="center"==a.overlayX?-e.width/2:"start"===a.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,m="center"==a.overlayY?-e.height/2:"top"==a.overlayY?0:-e.height,{x:t.x+d,y:t.y+m}}_getOverlayFit(t,e,a,d){const m=Vk(e);let{x:b,y:T}=t,N=this._getOffset(d,"x"),U=this._getOffset(d,"y");N&&(b+=N),U&&(T+=U);let Qe=0-T,Ke=T+m.height-a.height,at=this._subtractOverflows(m.width,0-b,b+m.width-a.width),Ot=this._subtractOverflows(m.height,Qe,Ke),tn=at*Ot;return{visibleArea:tn,isCompletelyWithinViewport:m.width*m.height===tn,fitsInViewportVertically:Ot===m.height,fitsInViewportHorizontally:at==m.width}}_canFitWithFlexibleDimensions(t,e,a){if(this._hasFlexibleDimensions){const d=a.bottom-e.y,m=a.right-e.x,b=xj(this._overlayRef.getConfig().minHeight),T=xj(this._overlayRef.getConfig().minWidth),U=t.fitsInViewportHorizontally||null!=T&&T<=m;return(t.fitsInViewportVertically||null!=b&&b<=d)&&U}return!1}_pushOverlayOnScreen(t,e,a){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const d=Vk(e),m=this._viewportRect,b=Math.max(t.x+d.width-m.width,0),T=Math.max(t.y+d.height-m.height,0),N=Math.max(m.top-a.top-t.y,0),U=Math.max(m.left-a.left-t.x,0);let ne=0,ve=0;return ne=d.width<=m.width?U||-b:t.x<this._viewportMargin?m.left-a.left-t.x:0,ve=d.height<=m.height?N||-T:t.y<this._viewportMargin?m.top-a.top-t.y:0,this._previousPushAmount={x:ne,y:ve},{x:t.x+ne,y:t.y+ve}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const a=this._getScrollVisibility(),d=new uH(t,a);this._positionChanges.next(d)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let a,d=t.overlayY;a="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let m=0;m<e.length;m++)e[m].style.transformOrigin=`${a} ${d}`}_calculateBoundingBoxRect(t,e){const a=this._viewportRect,d=this._isRtl();let m,b,T,ne,ve,Qe;if("top"===e.overlayY)b=t.y,m=a.height-b+this._viewportMargin;else if("bottom"===e.overlayY)T=a.height-t.y+2*this._viewportMargin,m=a.height-T+this._viewportMargin;else{const Ke=Math.min(a.bottom-t.y+a.top,t.y),at=this._lastBoundingBoxSize.height;m=2*Ke,b=t.y-Ke,m>at&&!this._isInitialRender&&!this._growAfterOpen&&(b=t.y-at/2)}if("end"===e.overlayX&&!d||"start"===e.overlayX&&d)Qe=a.width-t.x+this._viewportMargin,ne=t.x-this._viewportMargin;else if("start"===e.overlayX&&!d||"end"===e.overlayX&&d)ve=t.x,ne=a.right-t.x;else{const Ke=Math.min(a.right-t.x+a.left,t.x),at=this._lastBoundingBoxSize.width;ne=2*Ke,ve=t.x-Ke,ne>at&&!this._isInitialRender&&!this._growAfterOpen&&(ve=t.x-at/2)}return{top:b,left:ve,bottom:T,right:Qe,width:ne,height:m}}_setBoundingBoxStyles(t,e){const a=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));const d={};if(this._hasExactPosition())d.top=d.left="0",d.bottom=d.right=d.maxHeight=d.maxWidth="",d.width=d.height="100%";else{const m=this._overlayRef.getConfig().maxHeight,b=this._overlayRef.getConfig().maxWidth;d.height=fc(a.height),d.top=fc(a.top),d.bottom=fc(a.bottom),d.width=fc(a.width),d.left=fc(a.left),d.right=fc(a.right),d.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",d.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",m&&(d.maxHeight=fc(m)),b&&(d.maxWidth=fc(b))}this._lastBoundingBoxSize=a,tu(this._boundingBox.style,d)}_resetBoundingBoxStyles(){tu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const a={},d=this._hasExactPosition(),m=this._hasFlexibleDimensions,b=this._overlayRef.getConfig();if(d){const ne=this._viewportRuler.getViewportScrollPosition();tu(a,this._getExactOverlayY(e,t,ne)),tu(a,this._getExactOverlayX(e,t,ne))}else a.position="static";let T="",N=this._getOffset(e,"x"),U=this._getOffset(e,"y");N&&(T+=`translateX(${N}px) `),U&&(T+=`translateY(${U}px)`),a.transform=T.trim(),b.maxHeight&&(d?a.maxHeight=fc(b.maxHeight):m&&(a.maxHeight="")),b.maxWidth&&(d?a.maxWidth=fc(b.maxWidth):m&&(a.maxWidth="")),tu(this._pane.style,a)}_getExactOverlayY(t,e,a){let d={top:"",bottom:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,a)),"bottom"===t.overlayY?d.bottom=this._document.documentElement.clientHeight-(m.y+this._overlayRect.height)+"px":d.top=fc(m.y),d}_getExactOverlayX(t,e,a){let b,d={left:"",right:""},m=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(m=this._pushOverlayOnScreen(m,this._overlayRect,a)),b=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===b?d.right=this._document.documentElement.clientWidth-(m.x+this._overlayRect.width)+"px":d.left=fc(m.x),d}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),a=this._scrollables.map(d=>d.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Dj(t,a),isOriginOutsideView:uU(t,a),isOverlayClipped:Dj(e,a),isOverlayOutsideView:uU(e,a)}}_subtractOverflows(t,...e){return e.reduce((a,d)=>a-Math.max(d,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+t-this._viewportMargin,bottom:a.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&cx(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ki)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,a=t.height||0;return{top:t.y,bottom:t.y+a,left:t.x,right:t.x+e,height:a,width:e}}}function tu(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function xj(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(pU);return e&&"px"!==e?null:parseFloat(t)}return r||null}function Vk(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const Fx="cdk-global-overlay-wrapper";class y1{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Fx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),{width:d,height:m,maxWidth:b,maxHeight:T}=a,N=!("100%"!==d&&"100vw"!==d||b&&"100%"!==b&&"100vw"!==b),U=!("100%"!==m&&"100vh"!==m||T&&"100%"!==T&&"100vh"!==T),ne=this._xPosition,ve=this._xOffset,Qe="rtl"===this._overlayRef.getConfig().direction;let Ke="",at="",Ot="";N?Ot="flex-start":"center"===ne?(Ot="center",Qe?at=ve:Ke=ve):Qe?"left"===ne||"end"===ne?(Ot="flex-end",Ke=ve):("right"===ne||"start"===ne)&&(Ot="flex-start",at=ve):"left"===ne||"start"===ne?(Ot="flex-start",Ke=ve):("right"===ne||"end"===ne)&&(Ot="flex-end",at=ve),t.position=this._cssPosition,t.marginLeft=N?"0":Ke,t.marginTop=U?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=N?"0":at,e.justifyContent=Ot,e.alignItems=U?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,a=e.style;e.classList.remove(Fx),a.justifyContent=a.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Bf=(()=>{class r{constructor(e,a,d,m){this._viewportRuler=e,this._document=a,this._platform=d,this._overlayContainer=m}global(){return new y1}flexibleConnectedTo(e){return new Mj(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(rn(aU),rn(oi),rn(eu),rn(Pj))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),hH=0,Uy=(()=>{class r{constructor(e,a,d,m,b,T,N,U,ne,ve,Qe,Ke){this.scrollStrategies=e,this._overlayContainer=a,this._componentFactoryResolver=d,this._positionBuilder=m,this._keyboardDispatcher=b,this._injector=T,this._ngZone=N,this._document=U,this._directionality=ne,this._location=ve,this._outsideClickDispatcher=Qe,this._animationsModuleType=Ke}create(e){const a=this._createHostElement(),d=this._createPaneElement(a),m=this._createPortalOutlet(d),b=new Uk(e);return b.direction=b.direction||this._directionality.value,new hU(m,a,d,b,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const a=this._document.createElement("div");return a.id="cdk-overlay-"+hH++,a.classList.add("cdk-overlay-pane"),e.appendChild(a),a}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get($m)),new _1(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(rn(lU),rn(Pj),rn(Im),rn(Bf),rn(Rp),rn(Qc),rn(zr),rn(oi),rn($0),rn(kh),rn(dH),rn($s,8))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lv=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Bj=new zn("cdk-connected-overlay-scroll-strategy");let Ux=(()=>{class r{constructor(e){this.elementRef=e}}return r.\u0275fac=function(e){return new(e||r)(At(ki))},r.\u0275dir=_r({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),r})(),fU=(()=>{class r{constructor(e,a,d,m,b){this._overlay=e,this._dir=b,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=V.EMPTY,this._attachSubscription=V.EMPTY,this._detachSubscription=V.EMPTY,this._positionSubscription=V.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new qi,this.positionChange=new qi,this.attach=new qi,this.detach=new qi,this.overlayKeydown=new qi,this.overlayOutsideClick=new qi,this._templatePortal=new Nk(a,d),this._scrollStrategyFactory=m,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Oa(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Oa(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Oa(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Oa(e)}get push(){return this._push}set push(e){this._push=Oa(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=lv);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(a=>{this.overlayKeydown.next(a),27===a.keyCode&&!this.disableClose&&!s1(a)&&(a.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(a=>{this.overlayOutsideClick.next(a)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),a=new Uk({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(a.width=this.width),(this.height||0===this.height)&&(a.height=this.height),(this.minWidth||0===this.minWidth)&&(a.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(a.minHeight=this.minHeight),this.backdropClass&&(a.backdropClass=this.backdropClass),this.panelClass&&(a.panelClass=this.panelClass),a}_updatePositionStrategy(e){const a=this.positions.map(d=>({originX:d.originX,originY:d.originY,overlayX:d.overlayX,overlayY:d.overlayY,offsetX:d.offsetX||this.offsetX,offsetY:d.offsetY||this.offsetY,panelClass:d.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(a).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Ux?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function aH(r,t=!1){return ze((e,a)=>{let d=0;e.subscribe(new Pe(a,m=>{const b=r(m,d++);(b||t)&&a.next(m),!b&&a.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(At(Uy),At(Nl),At(rl),At(Bj),At($0,8))},r.\u0275dir=_r({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Al]}),r})();const Vx={provide:Bj,deps:[Uy],useFactory:function pH(r){return()=>r.scrollStrategies.reposition()}};let mU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[Uy,Vx],imports:[pl,_j,Tj,Tj]}),r})();function jk(r,t){if(1&r){const e=Tl();Rn(0,"div",2)(1,"button",3),_o("click",function(){return Cc(e),Ic(ai().action())}),Hr(2),Gn()()}if(2&r){const e=ai();Cn(2),Zu(" ",e.data.action," ")}}const gU=["label"];function jx(r,t){}const fH=Math.pow(2,31)-1;class Qx{constructor(t,e){this._overlayRef=e,this._afterDismissed=new St,this._afterOpened=new St,this._onAction=new St,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,fH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const Wh=new zn("MatSnackBarData");class Kd{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Qk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),r})(),mH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),r})(),gH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),r})(),E1=(()=>{class r{constructor(e,a){this.snackBarRef=e,this.data=a}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return r.\u0275fac=function(e){return new(e||r)(At(Qx),At(Wh))},r.\u0275cmp=ka({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,a){1&e&&(Rn(0,"div",0),Hr(1),Gn(),hr(2,jk,3,1,"div",1)),2&e&&(Cn(1),Zu(" ",a.data.message,"\n"),Cn(1),Bn("ngIf",a.hasAction))},dependencies:[ig,_c,Qk,mH,gH],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),r})();const Fj={snackBarState:By("state",[Lf("void, hidden",Xl({transform:"scale(0.8)",opacity:0})),Lf("visible",Xl({transform:"scale(1)",opacity:1})),cv("* => visible",Fy("150ms cubic-bezier(0, 0, 0.2, 1)")),cv("* => void, * => hidden",Fy("75ms cubic-bezier(0.4, 0.0, 1, 1)",Xl({opacity:0})))])};let _H=(()=>{class r extends Ox{constructor(e,a,d,m,b){super(),this._ngZone=e,this._elementRef=a,this._changeDetectorRef=d,this._platform=m,this.snackBarConfig=b,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new St,this._onExit=new St,this._onEnter=new St,this._animationState="void",this.attachDomPortal=T=>{this._assertNotAttached();const N=this._portalOutlet.attachDomPortal(T);return this._afterPortalAttached(),N},this._live="assertive"!==b.politeness||b.announcementMessage?"off"===b.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const a=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),a}attachTemplatePortal(e){this._assertNotAttached();const a=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),a}onAnimationEnd(e){const{fromState:a,toState:d}=e;if(("void"===d&&"void"!==a||"hidden"===d)&&this._completeExit(),"visible"===d){const m=this._onEnter;this._ngZone.run(()=>{m.next(),m.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(fl(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,a=this.snackBarConfig.panelClass;a&&(Array.isArray(a)?a.forEach(d=>e.classList.add(d)):e.classList.add(a))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),a=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&a){let d=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(d=document.activeElement),e.removeAttribute("aria-hidden"),a.appendChild(e),d?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return r.\u0275fac=function(e){return new(e||r)(At(zr),At(ki),At(Oh),At(eu),At(Kd))},r.\u0275dir=_r({type:r,viewQuery:function(e,a){if(1&e&&Js(uv,7),2&e){let d;Ao(d=yo())&&(a._portalOutlet=d.first)}},features:[Lr]}),r})(),vH=(()=>{class r extends _H{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,a="mdc-snackbar__label";e.classList.toggle(a,!e.querySelector(`.${a}`))}}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Zo(r)))(a||r)}}(),r.\u0275cmp=ka({type:r,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,a){if(1&e&&Js(gU,7),2&e){let d;Ao(d=yo())&&(a._label=d.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,a){1&e&&cI("@state.done",function(m){return a.onAnimationEnd(m)}),2&e&&sO("@state",a._animationState)},features:[Lr],decls:6,vars:2,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,a){1&e&&(Rn(0,"div",0)(1,"div",1,2)(3,"div",3),hr(4,jx,0,0,"ng-template",4),Gn(),go(5,"div"),Gn()()),2&e&&(Cn(5),so("aria-live",a._live)("role",a._role))},dependencies:[uv],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.cdk-high-contrast-active .mat-mdc-snack-bar-container{border:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Fj.snackBarState]}}),r})(),b1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[mU,_j,hs,tU,ks,ks]}),r})();const Uj=new zn("mat-snack-bar-default-options",{providedIn:"root",factory:function Hx(){return new Kd}});let _U=(()=>{class r{constructor(e,a,d,m,b,T){this._overlay=e,this._live=a,this._injector=d,this._breakpointObserver=m,this._parentSnackBar=b,this._defaultConfig=T,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,a){return this._attach(e,a)}openFromTemplate(e,a){return this._attach(e,a)}open(e,a="",d){const m={...this._defaultConfig,...d};return m.data={message:e,action:a},m.announcementMessage===e&&(m.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,m)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,a){const m=Qc.create({parent:a&&a.viewContainerRef&&a.viewContainerRef.injector||this._injector,providers:[{provide:Kd,useValue:a}]}),b=new rU(this.snackBarContainerComponent,a.viewContainerRef,m),T=e.attach(b);return T.instance.snackBarConfig=a,T.instance}_attach(e,a){const d={...new Kd,...this._defaultConfig,...a},m=this._createOverlay(d),b=this._attachSnackBarContainer(m,d),T=new Qx(b,m);if(e instanceof Nl){const N=new Nk(e,null,{$implicit:d.data,snackBarRef:T});T.instance=b.attachTemplatePortal(N)}else{const N=this._createInjector(d,T),U=new rU(e,void 0,N),ne=b.attachComponentPortal(U);T.instance=ne.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Tu(m.detachments())).subscribe(N=>{m.overlayElement.classList.toggle(this.handsetCssClass,N.matches)}),d.announcementMessage&&b._onAnnounce.subscribe(()=>{this._live.announce(d.announcementMessage,d.politeness)}),this._animateSnackBar(T,d),this._openedSnackBarRef=T,this._openedSnackBarRef}_animateSnackBar(e,a){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),a.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),a.duration&&a.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(a.duration))}_createOverlay(e){const a=new Uk;a.direction=e.direction;let d=this._overlay.position().global();const m="rtl"===e.direction,b="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!m||"end"===e.horizontalPosition&&m,T=!b&&"center"!==e.horizontalPosition;return b?d.left("0"):T?d.right("0"):d.centerHorizontally(),"top"===e.verticalPosition?d.top("0"):d.bottom("0"),a.positionStrategy=d,this._overlay.create(a)}_createInjector(e,a){return Qc.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Qx,useValue:a},{provide:Wh,useValue:e.data}]})}}return r.\u0275fac=function(e){return new(e||r)(rn(Uy),rn(wk),rn(Qc),rn(P3),rn(r,12),rn(Uj))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),tS=(()=>{class r extends _U{constructor(e,a,d,m,b,T){super(e,a,d,m,b,T),this.simpleSnackBarComponent=E1,this.snackBarContainerComponent=vH,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return r.\u0275fac=function(e){return new(e||r)(rn(Uy),rn(wk),rn(Qc),rn(P3),rn(r,12),rn(Uj))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:b1}),r})();const vU=["*"];class yH{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(a=>this._trackTile(a))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new EH(this.rowIndex,e)}_findMatchingGap(t){let e=-1,a=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),a=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(a=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),a=this._findGapEndIndex(e)))}while(a-e<t||0==a);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let a=0;a<e.colspan;a++)this.tracker[t+a]=e.rowspan}}class EH{constructor(t,e){this.row=t,this.col=e}}const Vj=new zn("MAT_GRID_LIST");let yU=(()=>{class r{constructor(e,a){this._element=e,this._gridList=a,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(iv(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(iv(e))}_setStyle(e,a){this._element.nativeElement.style[e]=a}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(Vj,8))},r.\u0275cmp=ka({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,a){2&e&&so("rowspan",a.rowspan)("colspan",a.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:vU,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,a){1&e&&(ic(),Rn(0,"div",0),Ko(1),Gn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})();const Hk=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class S1{constructor(){this._rows=0,this._rowspan=0}init(t,e,a,d){this._gutterSize=Gk(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=a,this._direction=d}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":zd(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,a){let d=100/this._cols,m=(this._cols-1)/this._cols;this.setColStyles(t,a,d,m),this.setRowStyles(t,e,d,m)}setColStyles(t,e,a,d){let m=this.getBaseTileSize(a,d);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(m,e)),t._setStyle("width",zd(this.getTileSize(m,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class jj extends S1{constructor(t){super(),this.fixedRowHeight=t}init(t,e,a,d){super.init(t,e,a,d),this.fixedRowHeight=Gk(this.fixedRowHeight),Hk.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",zd(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",zd(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class Qj extends S1{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,a,d){this.baseTileHeight=this.getBaseTileSize(a/this.rowHeightRatio,d),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",zd(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",zd(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class EU extends S1{setRowStyles(t,e){let m=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(m,e)),t._setStyle("height",zd(this.getTileSize(m,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function zd(r){return`calc(${r})`}function Gk(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let Hj=(()=>{class r{constructor(e,a){this._element=e,this._dir=a,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(iv(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const a=`${e??""}`;a!==this._rowHeight&&(this._rowHeight=a,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new EU:e&&e.indexOf(":")>-1?new Qj(e):new jj(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new yH);const e=this._tileCoordinator,a=this._tiles.filter(m=>!m._gridList||m._gridList===this),d=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,a),this._tileStyler.init(this.gutterSize,e,this.cols,d),a.forEach((m,b)=>{const T=e.positions[b];this._tileStyler.setStyle(m,T.row,T.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At($0,8))},r.\u0275cmp=ka({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,a,d){if(1&e&&oc(d,yU,5),2&e){let m;Ao(m=yo())&&(a._tiles=m)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,a){2&e&&so("cols",a.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[vo([{provide:Vj,useExisting:r}])],ngContentSelectors:vU,decls:2,vars:0,template:function(e,a){1&e&&(ic(),Rn(0,"div"),Ko(1),Gn())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0}),r})(),bH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[Y3,ks,Y3,ks]}),r})();const Wj=["matFormFieldNotchedOutline",""],bU=["*"],Kj=["textField"],zj=["iconPrefixContainer"],SU=["textPrefixContainer"];function Yj(r,t){1&r&&go(0,"span",19)}function qj(r,t){if(1&r){const e=Tl();Rn(0,"label",17),_o("cdkObserveContent",function(){return Cc(e),Ic(ai(2)._refreshOutlineNotchWidth())}),Ko(1,1),hr(2,Yj,1,0,"span",18),Gn()}if(2&r){const e=ai(2);Bn("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),so("for",e._control.id)("aria-owns",e._control.id),Cn(2),Bn("ngIf",!e.hideRequiredMarker&&e._control.required)}}function Gx(r,t){1&r&&hr(0,qj,3,6,"label",16),2&r&&Bn("ngIf",ai()._hasFloatingLabel())}function Wx(r,t){1&r&&go(0,"div",20)}function CU(r,t){}function IU(r,t){1&r&&hr(0,CU,0,0,"ng-template",22),2&r&&(ai(2),Bn("ngTemplateOutlet",cf(1)))}function wU(r,t){if(1&r&&(Rn(0,"div",21),hr(1,IU,1,1,"ng-template",9),Gn()),2&r){const e=ai();Bn("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),Cn(1),Bn("ngIf",!e._forceDisplayInfixLabel())}}function TU(r,t){1&r&&(Rn(0,"div",23,24),Ko(2,2),Gn())}function Jj(r,t){1&r&&(Rn(0,"div",25,26),Ko(2,3),Gn())}function RU(r,t){}function C1(r,t){1&r&&hr(0,RU,0,0,"ng-template",22),2&r&&(ai(),Bn("ngTemplateOutlet",cf(1)))}function yg(r,t){1&r&&(Rn(0,"div",27),Ko(1,4),Gn())}function $j(r,t){1&r&&(Rn(0,"div",28),Ko(1,5),Gn())}function nS(r,t){1&r&&go(0,"div",29)}function dv(r,t){1&r&&(Rn(0,"div",30),Ko(1,6),Gn()),2&r&&Bn("@transitionMessages",ai()._subscriptAnimationState)}function OU(r,t){if(1&r&&(Rn(0,"mat-hint",34),Hr(1),Gn()),2&r){const e=ai(2);Bn("id",e._hintLabelId),Cn(1),uf(e.hintLabel)}}function I1(r,t){if(1&r&&(Rn(0,"div",31),hr(1,OU,2,2,"mat-hint",32),Ko(2,7),go(3,"div",33),Ko(4,8),Gn()),2&r){const e=ai();Bn("@transitionMessages",e._subscriptAnimationState),Cn(1),Bn("ngIf",e.hintLabel)}}const Kx=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Op=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let zx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["mat-label"]]}),r})();const Xj=new zn("MatError");let Kk=0,Zj=(()=>{class r{constructor(){this.align="start",this.id="mat-mdc-hint-"+Kk++}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,a){2&e&&(xb("id",a.id),so("align",null),ws("mat-mdc-form-field-hint-end","end"===a.align))},inputs:{align:"align",id:"id"}}),r})();const DU=new zn("MatPrefix"),e8=new zn("MatSuffix");let kU=(()=>{class r{constructor(e){this._isText=!1,this._isText=e.nativeElement.hasAttribute("matTextSuffix")}}return r.\u0275fac=function(e){return new(e||r)(At(ki))},r.\u0275dir=_r({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],features:[vo([{provide:e8,useExisting:r}])]}),r})(),Eg=(()=>{class r{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function IH(r){if(null!==r.offsetParent)return r.scrollWidth;const e=r.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const a=e.scrollWidth;return e.remove(),a}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(At(ki))},r.\u0275dir=_r({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,a){2&e&&ws("mdc-floating-label--float-above",a.floating)},inputs:{floating:"floating"}}),r})();const Yx="mdc-line-ripple--active",zk="mdc-line-ripple--deactivating";let t8=(()=>{class r{constructor(e,a){this._elementRef=e,this._handleTransitionEnd=d=>{const m=this._elementRef.nativeElement.classList,b=m.contains(zk);"opacity"===d.propertyName&&b&&m.remove(Yx,zk)},a.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(zk),e.add(Yx)}deactivate(){this._elementRef.nativeElement.classList.add(zk)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(zr))},r.\u0275dir=_r({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),r})(),n8=(()=>{class r{constructor(e,a){this._elementRef=e,this._ngZone=a,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(zr))},r.\u0275cmp=ka({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,a){2&e&&ws("mdc-notched-outline--notched",a.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Wj,ngContentSelectors:bU,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,a){1&e&&(ic(),go(0,"div",0),Rn(1,"div",1),Ko(2),Gn(),go(3,"div",2)),2&e&&(Cn(1),fp("width",a._getNotchWidth()))},encapsulation:2,changeDetection:0}),r})();const wH={transitionMessages:By("transitionMessages",[Lf("enter",Xl({opacity:1,transform:"translateY(0%)"})),cv("void => enter",[Xl({opacity:0,transform:"translateY(-5px)"}),Fy("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let PU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=_r({type:r}),r})();const qx=new zn("MatFormField"),i8=new zn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let rS=0,u8=(()=>{class r{constructor(e,a,d,m,b,T,N,U){this._elementRef=e,this._changeDetectorRef=a,this._ngZone=d,this._dir=m,this._platform=b,this._defaults=T,this._animationMode=N,this._document=U,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+rS++,this._hintLabelId="mat-mdc-hint-"+rS++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new St,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,T&&(T.appearance&&(this.appearance=T.appearance),this._hideRequiredMarker=Boolean(T?.hideRequiredMarker),T.color&&(this.color=T.color))}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Oa(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const a=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==a&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Tu(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Po(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Tu(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Tu(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const a=this._control?this._control.ngControl:null;return a&&a[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const a=this._hintChildren?this._hintChildren.find(m=>"start"===m.align):null,d=this._hintChildren?this._hintChildren.find(m=>"end"===m.align):null;a?e.push(a.id):this._hintLabel&&e.push(this._hintLabelId),d&&e.push(d.id)}else this._errorChildren&&e.push(...this._errorChildren.map(a=>a.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const a=this._iconPrefixContainer?.nativeElement,d=this._textPrefixContainer?.nativeElement,m=a?.getBoundingClientRect().width??0,b=d?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${m+b}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const a=e.getRootNode();return a&&a!==e}return document.documentElement.contains(e)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(Oh),At(zr),At($0),At(eu),At(i8,8),At($s,8),At(oi))},r.\u0275cmp=ka({type:r,selectors:[["mat-form-field"]],contentQueries:function(e,a,d){if(1&e&&(oc(d,zx,5),oc(d,zx,7),oc(d,PU,5),oc(d,DU,5),oc(d,e8,5),oc(d,Xj,5),oc(d,Zj,5)),2&e){let m;Ao(m=yo())&&(a._labelChildNonStatic=m.first),Ao(m=yo())&&(a._labelChildStatic=m.first),Ao(m=yo())&&(a._formFieldControl=m.first),Ao(m=yo())&&(a._prefixChildren=m),Ao(m=yo())&&(a._suffixChildren=m),Ao(m=yo())&&(a._errorChildren=m),Ao(m=yo())&&(a._hintChildren=m)}},viewQuery:function(e,a){if(1&e&&(Js(Kj,5),Js(zj,5),Js(SU,5),Js(Eg,5),Js(n8,5),Js(t8,5)),2&e){let d;Ao(d=yo())&&(a._textField=d.first),Ao(d=yo())&&(a._iconPrefixContainer=d.first),Ao(d=yo())&&(a._textPrefixContainer=d.first),Ao(d=yo())&&(a._floatingLabel=d.first),Ao(d=yo())&&(a._notchedOutline=d.first),Ao(d=yo())&&(a._lineRipple=d.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,a){2&e&&ws("mat-mdc-form-field-label-always-float",a._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",a._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",a._hasIconSuffix)("mat-form-field-invalid",a._control.errorState)("mat-form-field-disabled",a._control.disabled)("mat-form-field-autofilled",a._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===a._animationMode)("mat-form-field-appearance-fill","fill"==a.appearance)("mat-form-field-appearance-outline","outline"==a.appearance)("mat-form-field-hide-placeholder",a._hasFloatingLabel()&&!a._shouldLabelFloat())("mat-focused",a._control.focused)("mat-primary","accent"!==a.color&&"warn"!==a.color)("mat-accent","accent"===a.color)("mat-warn","warn"===a.color)("ng-untouched",a._shouldForward("untouched"))("ng-touched",a._shouldForward("touched"))("ng-pristine",a._shouldForward("pristine"))("ng-dirty",a._shouldForward("dirty"))("ng-valid",a._shouldForward("valid"))("ng-invalid",a._shouldForward("invalid"))("ng-pending",a._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vo([{provide:qx,useExisting:r}])],ngContentSelectors:Op,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,a){1&e&&(ic(Kx),hr(0,Gx,1,1,"ng-template",null,0,NO),Rn(2,"div",1,2),_o("click",function(m){return a._control.onContainerClick&&a._control.onContainerClick(m)}),hr(4,Wx,1,0,"div",3),Rn(5,"div",4),hr(6,wU,2,3,"div",5),hr(7,TU,3,0,"div",6),hr(8,Jj,3,0,"div",7),Rn(9,"div",8),hr(10,C1,1,1,"ng-template",9),Ko(11),Gn(),hr(12,yg,2,0,"div",10),hr(13,$j,2,0,"div",11),Gn(),hr(14,nS,1,0,"div",12),Gn(),Rn(15,"div",13),hr(16,dv,2,1,"div",14),hr(17,I1,5,2,"div",15),Gn()),2&e&&(Cn(2),ws("mdc-text-field--filled",!a._hasOutline())("mdc-text-field--outlined",a._hasOutline())("mdc-text-field--no-label",!a._hasFloatingLabel())("mdc-text-field--disabled",a._control.disabled)("mdc-text-field--invalid",a._control.errorState),Cn(2),Bn("ngIf",!a._hasOutline()&&!a._control.disabled),Cn(2),Bn("ngIf",a._hasOutline()),Cn(1),Bn("ngIf",a._hasIconPrefix),Cn(1),Bn("ngIf",a._hasTextPrefix),Cn(2),Bn("ngIf",!a._hasOutline()||a._forceDisplayInfixLabel()),Cn(2),Bn("ngIf",a._hasTextSuffix),Cn(1),Bn("ngIf",a._hasIconSuffix),Cn(1),Bn("ngIf",!a._hasOutline()),Cn(1),ws("mat-mdc-form-field-subscript-dynamic-size","dynamic"===a.subscriptSizing),Bn("ngSwitch",a._getDisplayedMessages()),Cn(1),Bn("ngSwitchCase","error"),Cn(1),Bn("ngSwitchCase","hint"))},dependencies:[ig,jw,Y_,q_,Y9,Zj,Eg,n8,t8],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required::after,.mdc-floating-label--required[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[wH.transitionMessages]},changeDetection:0}),r})(),hv=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,hs,j5,ks]}),r})();class OH{constructor(t=!1,e,a=!0,d){this._multiple=t,this._emitChanges=a,this.compareWith=d,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new St,e&&e.length&&(t?e.forEach(m=>this._markSelected(m)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(a=>this._markSelected(a));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(a=>this._unmarkSelected(a));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,a=new Set(t);t.forEach(m=>this._markSelected(m)),e.filter(m=>!a.has(m)).forEach(m=>this._unmarkSelected(m));const d=this._hasQueuedChanges();return this._emitChangeEvent(),d}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}function Yk(r,t){return ze((e,a)=>{let d=null,m=0,b=!1;const T=()=>b&&!d&&a.complete();e.subscribe(new Pe(a,N=>{d?.unsubscribe();let U=0;const ne=m++;_n(r(N,ne)).subscribe(d=new Pe(a,ve=>a.next(t?t(N,ve,ne,U++):ve),()=>{d=null,T()}))},()=>{b=!0,T()}))})}const PH=["trigger"],f8=["panel"];function NH(r,t){if(1&r&&(Rn(0,"span",10),Hr(1),Gn()),2&r){const e=ai();Cn(1),uf(e.placeholder)}}function NU(r,t){if(1&r&&(Rn(0,"span",14),Hr(1),Gn()),2&r){const e=ai(2);Cn(1),uf(e.triggerValue)}}function qk(r,t){1&r&&Ko(0,0,["*ngSwitchCase","true"])}function MH(r,t){1&r&&(Rn(0,"span",11),hr(1,NU,2,1,"span",12),hr(2,qk,1,0,"ng-content",13),Gn()),2&r&&(Bn("ngSwitch",!!ai().customTrigger),Cn(2),Bn("ngSwitchCase",!0))}function Jx(r,t){if(1&r){const e=Tl();Hp(),Zf(),Rn(0,"div",15,16),_o("@transformPanel.done",function(d){return Cc(e),Ic(ai()._panelDoneAnimatingStream.next(d.toState))})("keydown",function(d){return Cc(e),Ic(ai()._handleKeydown(d))}),Ko(2,1),Gn()}if(2&r){const e=ai();nO("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),Bn("ngClass",e.panelClass)("@transformPanel","showing"),so("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const MU=[[["mat-select-trigger"]],"*"],m8=["mat-select-trigger","*"],xH={transformPanelWrap:By("transformPanelWrap",[cv("* => void",jQ("@transformPanel",[VQ()],{optional:!0}))]),transformPanel:By("transformPanel",[Lf("void",Xl({opacity:0,transform:"scale(1, 0.8)"})),cv("void => showing",Fy("120ms cubic-bezier(0, 0, 0.2, 1)",Xl({opacity:1,transform:"scale(1, 1)"}))),cv("* => void",Fy("100ms linear",Xl({opacity:0})))])};let $x=0;const Xx=new zn("mat-select-scroll-strategy"),Zx=new zn("MAT_SELECT_CONFIG"),LU={provide:Xx,deps:[Uy],useFactory:function xU(r){return()=>r.scrollStrategies.reposition()}},LH=new zn("MatSelectTrigger");class BU{constructor(t,e){this.source=t,this.value=e}}const v8=Cx(rj(Tk(K3(class{constructor(r,t,e,a,d){this._elementRef=r,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=a,this.ngControl=d,this.stateChanges=new St}}))));let FU=(()=>{class r extends v8{constructor(e,a,d,m,b,T,N,U,ne,ve,Qe,Ke,at,Ot){super(b,m,N,U,ve),this._viewportRuler=e,this._changeDetectorRef=a,this._ngZone=d,this._dir=T,this._parentFormField=ne,this._liveAnnouncer=at,this._defaultOptions=Ot,this._panelOpen=!1,this._compareWith=(tn,an)=>tn===an,this._uid="mat-select-"+$x++,this._triggerAriaLabelledBy=null,this._destroy=new St,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+$x++,this._panelDoneAnimatingStream=new St,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=function p8(r){return new Ze(t=>{_n(r()).subscribe(t)})}(()=>{const tn=this.options;return tn?tn.changes.pipe(a1(tn),Yk(()=>Po(...tn.map(an=>an.onSelectionChange)))):this._ngZone.onStable.pipe(fl(1),Yk(()=>this.optionSelectionChanges))}),this.openedChange=new qi,this._openedStream=this.openedChange.pipe(Mf(tn=>tn),rt(()=>{})),this._closedStream=this.openedChange.pipe(Mf(tn=>!tn),rt(()=>{})),this.selectionChange=new qi,this.valueChange=new qi,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Ot?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Ot.typeaheadDebounceInterval),this._scrollStrategyFactory=Ke,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Qe)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Jw.required)??!1}set required(e){this._required=Oa(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Oa(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Oa(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=iv(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new OH(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(F5(),Tu(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Tu(this._destroy)).subscribe(e=>{e.added.forEach(a=>a.select()),e.removed.forEach(a=>a.deselect())}),this.options.changes.pipe(a1(null),Tu(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),a=this.ngControl;if(e!==this._triggerAriaLabelledBy){const d=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?d.setAttribute("aria-labelledby",e):d.removeAttribute("aria-labelledby")}a&&(this._previousControl!==a.control&&(void 0!==this._previousControl&&null!==a.disabled&&a.disabled!==this.disabled&&(this.disabled=a.disabled),this._previousControl=a.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(a=>a.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const a=e.keyCode,d=40===a||38===a||37===a||39===a,m=13===a||32===a,b=this._keyManager;if(!b.isTyping()&&m&&!s1(e)||(this.multiple||e.altKey)&&d)e.preventDefault(),this.open();else if(!this.multiple){const T=this.selected;b.onKeydown(e);const N=this.selected;N&&T!==N&&this._liveAnnouncer.announce(N.viewValue,1e4)}}_handleOpenKeydown(e){const a=this._keyManager,d=e.keyCode,m=40===d||38===d,b=a.isTyping();if(m&&e.altKey)e.preventDefault(),this.close();else if(b||13!==d&&32!==d||!a.activeItem||s1(e))if(!b&&this._multiple&&65===d&&e.ctrlKey){e.preventDefault();const T=this.options.some(N=>!N.disabled&&!N.selected);this.options.forEach(N=>{N.disabled||(T?N.select():N.deselect())})}else{const T=a.activeItemIndex;a.onKeydown(e),this._multiple&&m&&e.shiftKey&&a.activeItem&&a.activeItemIndex!==T&&a.activeItem._selectViaInteraction()}else e.preventDefault(),a.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(fl(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(a=>a.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(a=>this._selectOptionByValue(a)),this._sortValues();else{const a=this._selectOptionByValue(e);a?this._keyManager.updateActiveItem(a):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const a=this.options.find(d=>{if(this._selectionModel.isSelected(d))return!1;try{return null!=d.value&&this._compareWith(d.value,e)}catch{return!1}});return a&&this._selectionModel.select(a),a}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new G5(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Po(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Tu(e)).subscribe(a=>{this._onSelect(a.source,a.isUserInput),a.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Po(...this.options.map(a=>a._stateChanges)).pipe(Tu(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,a){const d=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(d!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),a&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),a&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),d!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((a,d)=>this.sortComparator?this.sortComparator(a,d,e):e.indexOf(a)-e.indexOf(d)),this.stateChanges.next()}}_propagateChanges(e){let a=null;a=this.multiple?this.selected.map(d=>d.value):this.selected?this.selected.value:e,this._value=a,this.valueChange.emit(a),this._onChange(a),this.selectionChange.emit(this._getChangeEvent(a)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let a=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(a+=" "+this.ariaLabelledby),a}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return r.\u0275fac=function(e){return new(e||r)(At(aU),At(Oh),At(zr),At(z3),At(ki),At($0,8),At(uk,8),At(e1,8),At(qx,8),At(Os,10),sm("tabindex"),At(Xx),At(wk),At(Zx,8))},r.\u0275dir=_r({type:r,viewQuery:function(e,a){if(1&e&&(Js(PH,5),Js(f8,5),Js(fU,5)),2&e){let d;Ao(d=yo())&&(a.trigger=d.first),Ao(d=yo())&&(a.panel=d.first),Ao(d=yo())&&(a._overlayDir=d.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Lr,Al]}),r})(),UU=(()=>{class r extends FU{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}]}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Tu(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const a=this.options.toArray()[e];if(a){const d=this.panel.nativeElement,m=function $3(r,t,e){if(e.length){let a=t.toArray(),d=e.toArray(),m=0;for(let b=0;b<r+1;b++)a[b].group&&a[b].group===d[m]&&m++;return m}return 0}(e,this.options,this.optionGroups),b=a._getHostElement();d.scrollTop=0===e&&1===m?0:function OQ(r,t,e,a){return r<e?r:r+t>e+a?Math.max(0,r-a+t):e}(b.offsetTop,b.offsetHeight,d.scrollTop,d.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new BU(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof Ux?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Zo(r)))(a||r)}}(),r.\u0275cmp=ka({type:r,selectors:[["mat-select"]],contentQueries:function(e,a,d){if(1&e&&(oc(d,LH,5),oc(d,J3,5),oc(d,wx,5)),2&e){let m;Ao(m=yo())&&(a.customTrigger=m.first),Ao(m=yo())&&(a.options=m),Ao(m=yo())&&(a.optionGroups=m)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,a){1&e&&_o("keydown",function(m){return a._handleKeydown(m)})("focus",function(){return a._onFocus()})("blur",function(){return a._onBlur()}),2&e&&(so("id",a.id)("tabindex",a.tabIndex)("aria-controls",a.panelOpen?a.id+"-panel":null)("aria-expanded",a.panelOpen)("aria-label",a.ariaLabel||null)("aria-required",a.required.toString())("aria-disabled",a.disabled.toString())("aria-invalid",a.errorState)("aria-activedescendant",a._getAriaActiveDescendant()),ws("mat-mdc-select-disabled",a.disabled)("mat-mdc-select-invalid",a.errorState)("mat-mdc-select-required",a.required)("mat-mdc-select-empty",a.empty)("mat-mdc-select-multiple",a.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[vo([{provide:PU,useExisting:r},{provide:eS,useExisting:r}]),Lr],ngContentSelectors:m8,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,a){if(1&e&&(ic(MU),Rn(0,"div",0,1),_o("click",function(){return a.toggle()}),Rn(3,"div",2),hr(4,NH,2,1,"span",3),hr(5,MH,3,2,"span",4),Gn(),Rn(6,"div",5)(7,"div",6),Hp(),Rn(8,"svg",7),go(9,"path",8),Gn()()()(),hr(10,Jx,3,9,"ng-template",9),_o("backdropClick",function(){return a.close()})("attach",function(){return a._onAttached()})("detach",function(){return a.close()})),2&e){const d=cf(1);so("aria-owns",a.panelOpen?a.id+"-panel":null),Cn(3),Bn("ngSwitch",a.empty),so("id",a._valueId),Cn(1),Bn("ngSwitchCase",!0),Cn(1),Bn("ngSwitchCase",!1),Cn(5),Bn("cdkConnectedOverlayPanelClass",a._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",a._scrollStrategy)("cdkConnectedOverlayOrigin",a._preferredOverlayOrigin||d)("cdkConnectedOverlayOpen",a.panelOpen)("cdkConnectedOverlayPositions",a._positions)("cdkConnectedOverlayWidth",a._overlayWidth)}},dependencies:[Ey,Y_,q_,BD,fU,Ux],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[xH.transformPanel]},changeDetection:0}),r})(),FH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[LU],imports:[hs,mU,Tx,ks,Fk,hv,Tx,ks]}),r})();const eL=Nc({passive:!0});let UH=(()=>{class r{constructor(e,a){this._platform=e,this._ngZone=a,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return $n;const a=vg(e),d=this._monitoredElements.get(a);if(d)return d.subject;const m=new St,b="cdk-text-field-autofilled",T=N=>{"cdk-text-field-autofill-start"!==N.animationName||a.classList.contains(b)?"cdk-text-field-autofill-end"===N.animationName&&a.classList.contains(b)&&(a.classList.remove(b),this._ngZone.run(()=>m.next({target:N.target,isAutofilled:!1}))):(a.classList.add(b),this._ngZone.run(()=>m.next({target:N.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{a.addEventListener("animationstart",T,eL),a.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(a,{subject:m,unlisten:()=>{a.removeEventListener("animationstart",T,eL)}}),m}stopMonitoring(e){const a=vg(e),d=this._monitoredElements.get(a);d&&(d.unlisten(),d.subject.complete(),a.classList.remove("cdk-text-field-autofill-monitored"),a.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(a))}ngOnDestroy(){this._monitoredElements.forEach((e,a)=>this.stopMonitoring(a))}}return r.\u0275fac=function(e){return new(e||r)(rn(eu),rn(zr))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),y8=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({}),r})();const QH=new zn("MAT_INPUT_VALUE_ACCESSOR"),E8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let $k=0;const HH=K3(class{constructor(r,t,e,a){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=e,this.ngControl=a,this.stateChanges=new St}});let b8=(()=>{class r extends HH{constructor(e,a,d,m,b,T,N,U,ne,ve){super(T,m,b,d),this._elementRef=e,this._platform=a,this._autofillMonitor=U,this._formField=ve,this._uid="mat-input-"+$k++,this.focused=!1,this.stateChanges=new St,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(at=>Nf().has(at)),this._iOSKeyupListener=at=>{const Ot=at.target;!Ot.value&&0===Ot.selectionStart&&0===Ot.selectionEnd&&(Ot.setSelectionRange(1,1),Ot.setSelectionRange(0,0))};const Qe=this._elementRef.nativeElement,Ke=Qe.nodeName.toLowerCase();this._inputValueAccessor=N||Qe,this._previousNativeValue=this.value,this.id=this.id,a.IOS&&ne.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ke,this._isTextarea="textarea"===Ke,this._isInFormField=!!ve,this._isNativeSelect&&(this.controlType=Qe.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this._disabled}set disabled(e){this._disabled=Oa(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Jw.required)??!1}set required(e){this._required=Oa(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Nf().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Oa(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=e,e?a.setAttribute("placeholder",e):a.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){E8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,a=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&a&&a.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(eu),At(Os,10),At(uk,8),At(e1,8),At(z3),At(QH,10),At(UH),At(zr),At(qx,8))},r.\u0275dir=_r({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,a){1&e&&_o("focus",function(){return a._focusChanged(!0)})("blur",function(){return a._focusChanged(!1)})("input",function(){return a._onInput()}),2&e&&(xb("id",a.id)("disabled",a.disabled)("required",a.required),so("name",a.name||null)("readonly",a.readonly&&!a._isNativeSelect||null)("aria-invalid",a.empty&&a.required?null:a.errorState)("aria-required",a.required)("id",a.id),ws("mat-input-server",a._isServer)("mat-mdc-form-field-textarea-control",a._isInFormField&&a._isTextarea)("mat-mdc-form-field-input-control",a._isInFormField)("mdc-text-field__input",a._isInFormField)("mat-mdc-native-select-inline",a._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[vo([{provide:PU,useExisting:r}]),Lr,Al]}),r})(),Ou=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,hv,hv,y8,ks]}),r})();function VU(r){return ze((t,e)=>{let m,a=null,d=!1;a=t.subscribe(new Pe(e,void 0,void 0,b=>{m=_n(r(b,VU(r)(t))),a?(a.unsubscribe(),a=null,m.subscribe(e)):d=!0})),d&&(a.unsubscribe(),a=null,m.subscribe(e))})}const WH=["*"];let tL;function w1(r){return function jU(){if(void 0===tL&&(tL=null,typeof window<"u")){const r=window;void 0!==r.trustedTypes&&(tL=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return tL}()?.createHTML(r)||r}function QU(r){return Error(`Unable to find icon with the name "${r}"`)}function HU(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function GU(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class iS{constructor(t,e,a){this.url=t,this.svgText=e,this.options=a}}let nL=(()=>{class r{constructor(e,a,d,m){this._httpClient=e,this._sanitizer=a,this._errorHandler=m,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=d}addSvgIcon(e,a,d){return this.addSvgIconInNamespace("",e,a,d)}addSvgIconLiteral(e,a,d){return this.addSvgIconLiteralInNamespace("",e,a,d)}addSvgIconInNamespace(e,a,d,m){return this._addSvgIconConfig(e,a,new iS(d,null,m))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,a,d,m){const b=this._sanitizer.sanitize(eo.HTML,d);if(!b)throw GU(d);const T=w1(b);return this._addSvgIconConfig(e,a,new iS("",T,m))}addSvgIconSet(e,a){return this.addSvgIconSetInNamespace("",e,a)}addSvgIconSetLiteral(e,a){return this.addSvgIconSetLiteralInNamespace("",e,a)}addSvgIconSetInNamespace(e,a,d){return this._addSvgIconSetConfig(e,new iS(a,null,d))}addSvgIconSetLiteralInNamespace(e,a,d){const m=this._sanitizer.sanitize(eo.HTML,a);if(!m)throw GU(a);const b=w1(m);return this._addSvgIconSetConfig(e,new iS("",b,d))}registerFontClassAlias(e,a=e){return this._fontCssClassesByAlias.set(e,a),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const a=this._sanitizer.sanitize(eo.RESOURCE_URL,e);if(!a)throw HU(e);const d=this._cachedIconsByUrl.get(a);return d?ql(Xk(d)):this._loadSvgIconFromConfig(new iS(e,null)).pipe(ox(m=>this._cachedIconsByUrl.set(a,m)),rt(m=>Xk(m)))}getNamedSvgIcon(e,a=""){const d=w8(a,e);let m=this._svgIconConfigs.get(d);if(m)return this._getSvgFromConfig(m);if(m=this._getIconConfigFromResolvers(a,e),m)return this._svgIconConfigs.set(d,m),this._getSvgFromConfig(m);const b=this._iconSetConfigs.get(a);return b?this._getSvgFromIconSetConfigs(e,b):function GH(r,t){const e=F(r)?r:()=>r,a=d=>d.error(e());return new Ze(t?d=>t.schedule(a,0,d):a)}(QU(d))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ql(Xk(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(rt(a=>Xk(a)))}_getSvgFromIconSetConfigs(e,a){const d=this._extractIconWithNameFromAnySet(e,a);return d?ql(d):xF(a.filter(b=>!b.svgText).map(b=>this._loadSvgIconSetFromConfig(b).pipe(VU(T=>{const U=`Loading icon set URL: ${this._sanitizer.sanitize(eo.RESOURCE_URL,b.url)} failed: ${T.message}`;return this._errorHandler.handleError(new Error(U)),ql(null)})))).pipe(rt(()=>{const b=this._extractIconWithNameFromAnySet(e,a);if(!b)throw QU(e);return b}))}_extractIconWithNameFromAnySet(e,a){for(let d=a.length-1;d>=0;d--){const m=a[d];if(m.svgText&&m.svgText.toString().indexOf(e)>-1){const b=this._svgElementFromConfig(m),T=this._extractSvgIconFromSet(b,e,m.options);if(T)return T}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ox(a=>e.svgText=a),rt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ql(null):this._fetchIcon(e).pipe(ox(a=>e.svgText=a))}_extractSvgIconFromSet(e,a,d){const m=e.querySelector(`[id="${a}"]`);if(!m)return null;const b=m.cloneNode(!0);if(b.removeAttribute("id"),"svg"===b.nodeName.toLowerCase())return this._setSvgAttributes(b,d);if("symbol"===b.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(b),d);const T=this._svgElementFromString(w1("<svg></svg>"));return T.appendChild(b),this._setSvgAttributes(T,d)}_svgElementFromString(e){const a=this._document.createElement("DIV");a.innerHTML=e;const d=a.querySelector("svg");if(!d)throw Error("<svg> tag not found");return d}_toSvgElement(e){const a=this._svgElementFromString(w1("<svg></svg>")),d=e.attributes;for(let m=0;m<d.length;m++){const{name:b,value:T}=d[m];"id"!==b&&a.setAttribute(b,T)}for(let m=0;m<e.childNodes.length;m++)e.childNodes[m].nodeType===this._document.ELEMENT_NODE&&a.appendChild(e.childNodes[m].cloneNode(!0));return a}_setSvgAttributes(e,a){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),a&&a.viewBox&&e.setAttribute("viewBox",a.viewBox),e}_fetchIcon(e){const{url:a,options:d}=e,m=d?.withCredentials??!1;if(!this._httpClient)throw function C8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const b=this._sanitizer.sanitize(eo.RESOURCE_URL,a);if(!b)throw HU(a);const T=this._inProgressUrlFetches.get(b);if(T)return T;const N=this._httpClient.get(b,{responseType:"text",withCredentials:m}).pipe(rt(U=>w1(U)),function S8(r){return ze((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}(()=>this._inProgressUrlFetches.delete(b)),id());return this._inProgressUrlFetches.set(b,N),N}_addSvgIconConfig(e,a,d){return this._svgIconConfigs.set(w8(e,a),d),this}_addSvgIconSetConfig(e,a){const d=this._iconSetConfigs.get(e);return d?d.push(a):this._iconSetConfigs.set(e,[a]),this}_svgElementFromConfig(e){if(!e.svgElement){const a=this._svgElementFromString(e.svgText);this._setSvgAttributes(a,e.options),e.svgElement=a}return e.svgElement}_getIconConfigFromResolvers(e,a){for(let d=0;d<this._resolvers.length;d++){const m=this._resolvers[d](a,e);if(m)return T8(m)?new iS(m.url,null,m.options):new iS(m,null)}}}return r.\u0275fac=function(e){return new(e||r)(rn(KM,8),rn(NF),rn(oi,8),rn(Sl))},r.\u0275prov=vr({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Xk(r){return r.cloneNode(!0)}function w8(r,t){return r+":"+t}function T8(r){return!(!r.url||!r.options)}const pv=Sx(class{constructor(r){this._elementRef=r}}),KH=new zn("MAT_ICON_DEFAULT_OPTIONS"),zH=new zn("mat-icon-location",{providedIn:"root",factory:function YH(){const r=Ea(oi),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),R8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],qH=R8.map(r=>`[${r}]`).join(", "),JH=/^url\(['"]?#(.*?)['"]?\)$/;let $H=(()=>{class r extends pv{constructor(e,a,d,m,b,T){super(e),this._iconRegistry=a,this._location=m,this._errorHandler=b,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=V.EMPTY,T&&(T.color&&(this.color=this.defaultColor=T.color),T.fontSet&&(this.fontSet=T.fontSet)),d||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Oa(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const a=this._cleanupFontValue(e);a!==this._fontSet&&(this._fontSet=a,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const a=this._cleanupFontValue(e);a!==this._fontIcon&&(this._fontIcon=a,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const a=e.split(":");switch(a.length){case 1:return["",a[0]];case 2:return a;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const a=this._location.getPathname();a!==this._previousPath&&(this._previousPath=a,this._prependPathToReferences(a))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let a=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();a--;){const d=e.childNodes[a];(1!==d.nodeType||"svg"===d.nodeName.toLowerCase())&&d.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,a=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(d=>d.length>0);this._previousFontSetClass.forEach(d=>e.classList.remove(d)),a.forEach(d=>e.classList.add(d)),this._previousFontSetClass=a,this.fontIcon!==this._previousFontIconClass&&!a.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const a=this._elementsWithExternalReferences;a&&a.forEach((d,m)=>{d.forEach(b=>{m.setAttribute(b.name,`url('${e}#${b.value}')`)})})}_cacheChildrenWithExternalReferences(e){const a=e.querySelectorAll(qH),d=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let m=0;m<a.length;m++)R8.forEach(b=>{const T=a[m],N=T.getAttribute(b),U=N?N.match(JH):null;if(U){let ne=d.get(T);ne||(ne=[],d.set(T,ne)),ne.push({name:b,value:U[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[a,d]=this._splitIconName(e);a&&(this._svgNamespace=a),d&&(this._svgName=d),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(d,a).pipe(fl(1)).subscribe(m=>this._setSvgElement(m),m=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${a}:${d}! ${m.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(nL),sm("aria-hidden"),At(zH),At(Sl),At(KH,8))},r.\u0275cmp=ka({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,a){2&e&&(so("data-mat-icon-type",a._usingFontIcon()?"font":"svg")("data-mat-icon-name",a._svgName||a.fontIcon)("data-mat-icon-namespace",a._svgNamespace||a.fontSet)("fontIcon",a._usingFontIcon()?a.fontIcon:null),ws("mat-icon-inline",a.inline)("mat-icon-no-color","primary"!==a.color&&"accent"!==a.color&&"warn"!==a.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Lr],ngContentSelectors:WH,decls:1,vars:0,template:function(e,a){1&e&&(ic(),Ko(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),r})(),XH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[ks,ks]}),r})();const O8=["determinateSpinner"];function ZH(r,t){if(1&r&&(Hp(),Rn(0,"svg",11),go(1,"circle",12),Gn()),2&r){const e=ai();so("viewBox",e._viewBox()),Cn(1),fp("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),so("r",e._circleRadius())}}const eG=Sx(class{constructor(r){this._elementRef=r}},"primary"),tG=new zn("mat-progress-spinner-default-options",{providedIn:"root",factory:function nG(){return{diameter:D8}}}),D8=100;let rG=(()=>{class r extends eG{constructor(e,a,d){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=D8,this._noopAnimations="NoopAnimations"===a&&!!d&&!d._forceAnimations,d&&(d.color&&(this.color=this.defaultColor=d.color),d.diameter&&(this.diameter=d.diameter),d.strokeWidth&&(this.strokeWidth=d.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,iv(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=iv(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=iv(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At($s,8),At(tG))},r.\u0275cmp=ka({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,a){if(1&e&&Js(O8,5),2&e){let d;Ao(d=yo())&&(a._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,a){2&e&&(so("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===a.mode?a.value:null)("mode",a.mode),fp("width",a.diameter,"px")("height",a.diameter,"px"),ws("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===a.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Lr],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,a){if(1&e&&(hr(0,ZH,2,8,"ng-template",null,0,NO),Rn(2,"div",1,2),Hp(),Rn(4,"svg",3),go(5,"circle",4),Gn()(),Zf(),Rn(6,"div",5)(7,"div",6)(8,"div",7),bA(9,8),Gn(),Rn(10,"div",9),bA(11,8),Gn(),Rn(12,"div",10),bA(13,8),Gn()()()),2&e){const d=cf(1);Cn(4),so("viewBox",a._viewBox()),Cn(1),fp("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),so("r",a._circleRadius()),Cn(4),Bn("ngTemplateOutlet",d),Cn(2),Bn("ngTemplateOutlet",d),Cn(2),Bn("ngTemplateOutlet",d)}},dependencies:[jw],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),T1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[hs,ks]}),r})(),rL=0;const k8=Tk(class{}),KU="mat-badge-content";let P8=(()=>{class r extends k8{constructor(e,a,d,m,b){super(),this._ngZone=e,this._elementRef=a,this._ariaDescriber=d,this._renderer=m,this._animationMode=b,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=rL++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=Oa(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=Oa(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),a="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(KU),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(a)})}):e.classList.add(a),e}_updateRenderedContent(e){const a=`${e??""}`.trim();this._isInitialized&&a&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=a),this._content=a}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const a=this._elementRef.nativeElement.classList;a.remove(`mat-badge-${this._color}`),e&&a.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${KU}`);for(const a of Array.from(e))a!==this._badgeElement&&a.remove()}}return r.\u0275fac=function(e){return new(e||r)(At(zr),At(ki),At(M3),At(Ed),At($s,8))},r.\u0275dir=_r({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,a){2&e&&ws("mat-badge-overlap",a.overlap)("mat-badge-above",a.isAbove())("mat-badge-below",!a.isAbove())("mat-badge-before",!a.isAfter())("mat-badge-after",a.isAfter())("mat-badge-small","small"===a.size)("mat-badge-medium","medium"===a.size)("mat-badge-large","large"===a.size)("mat-badge-hidden",a.hidden||!a.content)("mat-badge-disabled",a.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[Lr]}),r})(),N8=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({imports:[J5,ks,ks]}),r})();function zU(r,t){return t?e=>lx(t.pipe(fl(1),function M8(){return ze((r,t)=>{r.subscribe(new Pe(t,de))})}()),e.pipe(zU(r))):ku((e,a)=>r(e,a).pipe(fl(1),function x8(r){return rt(()=>r)}(e)))}function YU(r,t=D3){const e=bj(r,t);return zU(()=>e)}const L8=["mat-menu-item",""];function B8(r,t){1&r&&(Hp(),Rn(0,"svg",3),go(1,"polygon",4),Gn())}const F8=[[["mat-icon"]],"*"],U8=["mat-icon","*"];function V8(r,t){if(1&r){const e=Tl();Rn(0,"div",0),_o("keydown",function(d){return Cc(e),Ic(ai()._handleKeydown(d))})("click",function(){return Cc(e),Ic(ai().closed.emit("click"))})("@transformMenu.start",function(d){return Cc(e),Ic(ai()._onAnimationStart(d))})("@transformMenu.done",function(d){return Cc(e),Ic(ai()._onAnimationDone(d))}),Rn(1,"div",1),Ko(2),Gn()()}if(2&r){const e=ai();Bn("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),so("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const j8=["*"],iL=new zn("MAT_MENU_PANEL"),Q8=Cx(Tk(class{}));let $i=(()=>{class r extends Q8{constructor(e,a,d,m,b){super(),this._elementRef=e,this._document=a,this._focusMonitor=d,this._parentMenu=m,this._changeDetectorRef=b,this.role="menuitem",this._hovered=new St,this._focused=new St,this._highlighted=!1,this._triggersSubmenu=!1,m?.addItem?.(this)}focus(e,a){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,a):this._getHostElement().focus(a),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),a=e.querySelectorAll("mat-icon, .material-icons");for(let d=0;d<a.length;d++)a[d].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(oi),At(_x),At(iL,8),At(Oh))},r.\u0275cmp=ka({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,a){1&e&&_o("click",function(m){return a._checkDisabled(m)})("mouseenter",function(){return a._handleMouseEnter()}),2&e&&(so("role",a.role)("tabindex",a._getTabIndex())("aria-disabled",a.disabled)("disabled",a.disabled||null),ws("mat-mdc-menu-item-highlighted",a._highlighted)("mat-mdc-menu-item-submenu-trigger",a._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Lr],attrs:L8,ngContentSelectors:U8,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,a){1&e&&(ic(F8),Ko(0),Rn(1,"span",0),Ko(2,1),Gn(),go(3,"div",1),hr(4,B8,2,0,"svg",2)),2&e&&(Cn(3),Bn("matRippleDisabled",a.disableRipple||a.disabled)("matRippleTrigger",a._getHostElement()),Cn(1),Bn("ngIf",a._triggersSubmenu))},dependencies:[ig,d1],encapsulation:2,changeDetection:0}),r})();const H8=new zn("MatMenuContent"),Kh={transformMenu:By("transformMenu",[Lf("void",Xl({opacity:0,transform:"scale(0.8)"})),cv("void => enter",Fy("120ms cubic-bezier(0, 0, 0.2, 1)",Xl({opacity:1,transform:"scale(1)"}))),cv("* => void",Fy("100ms 25ms linear",Xl({opacity:0})))]),fadeInItems:By("fadeInItems",[Lf("showing",Xl({opacity:1})),cv("void => *",[Xl({opacity:0}),Fy("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let R1=0;const ea=new zn("mat-menu-default-options",{providedIn:"root",factory:function G8(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Zk=(()=>{class r{constructor(e,a,d,m){this._elementRef=e,this._ngZone=a,this._defaultOptions=d,this._changeDetectorRef=m,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Rd,this._classList={},this._panelAnimationState="void",this._animationDone=new St,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new qi,this.close=this.closed,this.panelId="mat-menu-panel-"+R1++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Oa(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Oa(e)}set panelClass(e){const a=this._previousPanelClass;a&&a.length&&a.split(" ").forEach(d=>{this._classList[d]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(d=>{this._classList[d]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new mx(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(a1(this._directDescendantItems),Yk(e=>Po(...e.map(a=>a._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const a=this._keyManager;if("enter"===this._panelAnimationState&&a.activeItem?._hasFocus()){const d=e.toArray(),m=Math.max(0,Math.min(d.length-1,a.activeItemIndex||0));d[m]&&!d[m].disabled?a.setActiveItem(m):a.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(a1(this._directDescendantItems),Yk(a=>Po(...a.map(d=>d._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const a=e.keyCode,d=this._keyManager;switch(a){case 27:s1(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===a||40===a)&&d.setFocusOrigin("keyboard"),void d.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(fl(1)).subscribe(()=>{let a=null;if(this._directDescendantItems.length&&(a=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!a||!a.contains(document.activeElement)){const d=this._keyManager;d.setFocusOrigin(e).setFirstItemActive(),!d.activeItem&&a&&a.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const a=Math.min(this._baseElevation+e,24),d=`${this._elevationPrefix}${a}`,m=Object.keys(this._classList).find(b=>b.startsWith(this._elevationPrefix));(!m||m===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[d]=!0,this._previousElevation=d)}setPositionClasses(e=this.xPosition,a=this.yPosition){const d=this._classList;d["mat-menu-before"]="before"===e,d["mat-menu-after"]="after"===e,d["mat-menu-above"]="above"===a,d["mat-menu-below"]="below"===a,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(a1(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(a=>a._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(zr),At(ea),At(Oh))},r.\u0275dir=_r({type:r,contentQueries:function(e,a,d){if(1&e&&(oc(d,H8,5),oc(d,$i,5),oc(d,$i,4)),2&e){let m;Ao(m=yo())&&(a.lazyContent=m.first),Ao(m=yo())&&(a._allItems=m),Ao(m=yo())&&(a.items=m)}},viewQuery:function(e,a){if(1&e&&Js(Nl,5),2&e){let d;Ao(d=yo())&&(a.templateRef=d.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),hG=(()=>{class r extends Zk{constructor(e,a,d,m){super(e,a,d,m),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return r.\u0275fac=function(e){return new(e||r)(At(ki),At(zr),At(ea),At(Oh))},r.\u0275cmp=ka({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,a){2&e&&so("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[vo([{provide:iL,useExisting:r}]),Lr],ngContentSelectors:j8,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,a){1&e&&(ic(),hr(0,V8,3,6,"ng-template"))},dependencies:[Ey],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Kh.transformMenu,Kh.fadeInItems]},changeDetection:0}),r})();const oL=new zn("mat-menu-scroll-strategy"),fG={provide:oL,deps:[Uy],useFactory:function pG(r){return()=>r.scrollStrategies.reposition()}},W8=Nc({passive:!0});let mG=(()=>{class r{constructor(e,a,d,m,b,T,N,U,ne){this._overlay=e,this._element=a,this._viewContainerRef=d,this._menuItemInstance=T,this._dir=N,this._focusMonitor=U,this._ngZone=ne,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=V.EMPTY,this._hoverSubscription=V.EMPTY,this._menuCloseSubscription=V.EMPTY,this._handleTouchStart=ve=>{Ny(ve)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new qi,this.onMenuOpen=this.menuOpened,this.menuClosed=new qi,this.onMenuClose=this.menuClosed,this._scrollStrategy=m,this._parentMaterialMenu=b instanceof Zk?b:void 0,a.nativeElement.addEventListener("touchstart",this._handleTouchStart,W8)}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(a=>{this._destroyMenu(a),("click"===a||"tab"===a)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(a)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,W8),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const a=this._createOverlay(e),d=a.getConfig(),m=d.positionStrategy;this._setPosition(e,m),d.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),a.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Zk&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Tu(e.close)).subscribe(()=>{m.withLockedPosition(!1).reapplyLastPosition(),m.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,a){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,a):this._element.nativeElement.focus(a)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const a=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,a instanceof Zk?(a._resetAnimation(),a.lazyContent?a._animationDone.pipe(Mf(d=>"void"===d.toState),fl(1),Tu(a.lazyContent._attached)).subscribe({next:()=>a.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),a?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let a=0,d=e.parentMenu;for(;d;)a++,d=d.parentMenu;e.setElevation(a)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const a=this._getOverlayConfig(e);this._subscribeToPositions(e,a.positionStrategy),this._overlayRef=this._overlay.create(a),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Uk({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,a){e.setPositionClasses&&a.positionChanges.subscribe(d=>{const m="start"===d.connectionPair.overlayX?"after":"before",b="top"===d.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(m,b)):e.setPositionClasses(m,b)})}_setPosition(e,a){let[d,m]="before"===e.xPosition?["end","start"]:["start","end"],[b,T]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[N,U]=[b,T],[ne,ve]=[d,m],Qe=0;if(this.triggersSubmenu()){if(ve=d="before"===e.xPosition?"start":"end",m=ne="end"===d?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Ke=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ke?Ke._getHostElement().offsetTop:0}Qe="bottom"===b?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(N="top"===b?"bottom":"top",U="top"===T?"bottom":"top");a.withPositions([{originX:d,originY:N,overlayX:ne,overlayY:b,offsetY:Qe},{originX:m,originY:N,overlayX:ve,overlayY:b,offsetY:Qe},{originX:d,originY:U,overlayX:ne,overlayY:T,offsetY:-Qe},{originX:m,originY:U,overlayX:ve,overlayY:T,offsetY:-Qe}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),a=this._overlayRef.detachments();return Po(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:ql(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Mf(b=>b!==this._menuItemInstance),Mf(()=>this._menuOpen)):ql(),a)}_handleMousedown(e){Ru(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const a=e.keyCode;(13===a||32===a)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===a&&"ltr"===this.dir||37===a&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Mf(e=>e===this._menuItemInstance&&!e.disabled),YU(0,Mx)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Zk&&this.menu._isAnimating?this.menu._animationDone.pipe(fl(1),YU(0,Mx),Tu(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Nk(e.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(At(Uy),At(ki),At(rl),At(oL),At(iL,8),At($i,10),At($0,8),At(_x),At(zr))},r.\u0275dir=_r({type:r,hostVars:3,hostBindings:function(e,a){1&e&&_o("click",function(m){return a._handleClick(m)})("mousedown",function(m){return a._handleMousedown(m)})("keydown",function(m){return a._handleKeydown(m)}),2&e&&so("aria-haspopup",a.menu?"menu":null)("aria-expanded",a.menuOpen)("aria-controls",a.menuOpen?a.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),gG=(()=>{class r extends mG{}return r.\u0275fac=function(){let t;return function(a){return(t||(t=Zo(r)))(a||r)}}(),r.\u0275dir=_r({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Lr]}),r})(),_G=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:[fG],imports:[hs,$l,ks,mU,Fk,ks]}),r})();class sL{transform(t,...e){return Array.from(t,([a,d])=>({name:a,value:d}))}static#e=this.\u0275fac=function(e){return new(e||sL)};static#t=this.\u0275pipe=$a({name:"twilio",type:sL,pure:!1})}function vG(r,t){1&r&&(Rn(0,"button",17)(1,"mat-icon"),Hr(2,"login"),Gn()())}function AG(r,t){if(1&r){const e=Tl();Rn(0,"form",7),_o("ngSubmit",function(){Cc(e);const d=ai();return Ic(d.authorize(d.configForm.value))}),Rn(1,"mat-form-field",8)(2,"mat-label"),Hr(3,"Video SDK Provider"),Gn(),Rn(4,"mat-select",9)(5,"mat-option",10),Hr(6,"Zoom Video SDK"),Gn(),Rn(7,"mat-option",11),Hr(8,"Twilio Video SDK"),Gn()()(),Rn(9,"mat-form-field",8)(10,"mat-label"),Hr(11,"Your Name"),Gn(),go(12,"input",12),Rn(13,"mat-icon",13),Hr(14,"face"),Gn()(),Rn(15,"mat-form-field",8)(16,"mat-label"),Hr(17,"Session Name"),Gn(),go(18,"input",14),Rn(19,"mat-icon",13),Hr(20,"meeting_room"),Gn()(),Rn(21,"mat-form-field",8)(22,"mat-label"),Hr(23,"Session Passcode"),Gn(),go(24,"input",15),Rn(25,"mat-icon",13),Hr(26,"vpn_key"),Gn()(),hr(27,vG,3,0,"button",16),Gn()}if(2&r){const e=ai();Bn("formGroup",e.configForm),Cn(27),Bn("ngIf",!e.session)}}function yG(r,t){if(1&r&&(Rn(0,"div",18)(1,"h1"),Hr(2),Gn()()),2&r){const e=ai();Cn(2),Zu("",e.videoSDKProvider," Video SDK")}}function z8(r,t){if(1&r){const e=Tl();Rn(0,"button",22),_o("click",function(){return Cc(e),Ic(ai(2).startAudio())}),Rn(1,"mat-icon"),Hr(2,"volume_off"),Gn()()}}function EG(r,t){if(1&r){const e=Tl();Rn(0,"button",22),_o("click",function(){return Cc(e),Ic(ai(2).mute())}),Rn(1,"mat-icon"),Hr(2,"mic"),Gn()()}}function bG(r,t){if(1&r){const e=Tl();Rn(0,"button",22),_o("click",function(){return Cc(e),Ic(ai(2).unmute())}),Rn(1,"mat-icon"),Hr(2,"mic_off"),Gn()()}}function SG(r,t){if(1&r){const e=Tl();Rn(0,"button",22),_o("click",function(){return Cc(e),Ic(ai(2).stopCamera())}),Rn(1,"mat-icon"),Hr(2,"videocam"),Gn()()}}function Y8(r,t){if(1&r){const e=Tl();Rn(0,"button",22),_o("click",function(){return Cc(e),Ic(ai(2).startCamera())}),Rn(1,"mat-icon"),Hr(2,"videocam_off"),Gn()()}}function q8(r,t){if(1&r&&(Rn(0,"button",26),Hr(1),Gn()),2&r){const e=t.$implicit;Cn(1),uf(e.displayName)}}function J8(r,t){if(1&r&&(ls(0),Rn(1,"button",23)(2,"mat-icon"),Hr(3,"people"),Gn()(),Rn(4,"mat-menu",null,24),hr(6,q8,2,1,"button",25),Gn(),Ju()),2&r){const e=cf(5),a=ai(2);Cn(1),Bn("matMenuTriggerFor",e)("matBadge",a.zoomVideo.getAllUser().length),Cn(5),Bn("ngForOf",a.zoomVideo.getAllUser())}}function $8(r,t){if(1&r&&(Rn(0,"button",26),Hr(1),Gn()),2&r){const e=t.$implicit;Cn(1),uf(e.value.identity)}}function CG(r,t){if(1&r&&(ls(0),Rn(1,"button",23)(2,"mat-icon"),Hr(3,"people"),Gn()(),Rn(4,"mat-menu",null,24)(6,"button",26),Hr(7),Gn(),hr(8,$8,2,1,"button",25),function zm(r,t){const e=zi();let a;const d=r+22;e.firstCreatePass?(a=function RO(r,t){if(t)for(let e=t.length-1;e>=0;e--){const a=t[e];if(r===a.name)return a}}(t,e.pipeRegistry),e.data[d]=a,a.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(d,a.onDestroy)):a=e.data[d];const m=a.factory||(a.factory=Mg(a.type)),b=sd(At);try{const T=ia(!1),N=m();return ia(T),function aI(r,t,e,a){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=a}(e,An(),d,N),N}finally{sd(b)}}(9,"twilio"),Gn(),Ju()),2&r){const e=cf(5),a=ai(2);Cn(1),Bn("matMenuTriggerFor",e)("matBadge",a.twilioSession.participants.size+1),Cn(6),uf(a.twilioSession.localParticipant.identity),Cn(1),Bn("ngForOf",CN(9,4,a.twilioSession.participants))}}function IG(r,t){if(1&r){const e=Tl();Rn(0,"div",19),hr(1,z8,3,0,"button",20),hr(2,EG,3,0,"button",20),hr(3,bG,3,0,"button",20),hr(4,SG,3,0,"button",20),hr(5,Y8,3,0,"button",20),hr(6,J8,7,3,"ng-container",6),hr(7,CG,10,6,"ng-container",6),Rn(8,"button",21),_o("click",function(){return Cc(e),Ic(ai().leave())}),Rn(9,"mat-icon"),Hr(10,"logout"),Gn()()()}if(2&r){const e=ai();Cn(1),Bn("ngIf",!e.mic&&!e.audio),Cn(1),Bn("ngIf",e.mic&&e.audio),Cn(1),Bn("ngIf",!e.mic&&e.audio),Cn(1),Bn("ngIf",e.camera),Cn(1),Bn("ngIf",!e.camera),Cn(1),Bn("ngIf","zoom"===e.videoSDKProvider),Cn(1),Bn("ngIf","twilio"===e.videoSDKProvider&&e.twilioSession.participants)}}function wG(r,t){1&r&&(Rn(0,"div",27),go(1,"mat-spinner"),Gn())}function X8(r,t){1&r&&go(0,"mat-spinner")}function TG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_off"),Gn())}function RG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_on"),Gn())}function Z8(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"volume_off"),Gn())}function OG(r,t){if(1&r&&(Rn(0,"p"),hr(1,TG,2,0,"mat-icon",6),hr(2,RG,2,0,"mat-icon",6),hr(3,Z8,2,0,"mat-icon",6),Hr(4),Gn()),2&r){const e=ai(2);Cn(1),Bn("ngIf",e.audio&&!e.mic),Cn(1),Bn("ngIf",e.audio&&e.mic),Cn(1),Bn("ngIf",!e.audio),Cn(1),Zu(" ",e.zoomVideo.getCurrentUserInfo().displayName," (me) ")}}function e6(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"sentiment_satisfied_alt"),Gn())}function e2(r,t){if(1&r&&(ls(0),hr(1,OG,5,4,"p",6),hr(2,e6,2,0,"mat-icon",6),go(3,"video",28)(4,"canvas",29),Ju()),2&r){const e=ai();Cn(1),Bn("ngIf",e.zoomVideo&&e.zoomVideo.getCurrentUserInfo()),Cn(1),Bn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Bn("hidden",!e.useVideoElementForZoom),Cn(1),Bn("hidden",!e.useCanvasElementForZoom)}}function DG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_off"),Gn())}function t6(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_on"),Gn())}function kG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"volume_off"),Gn())}function PG(r,t){if(1&r&&(Rn(0,"p"),hr(1,DG,2,0,"mat-icon",6),hr(2,t6,2,0,"mat-icon",6),hr(3,kG,2,0,"mat-icon",6),Hr(4),Gn()),2&r){const e=ai(2);Cn(1),Bn("ngIf",e.audio&&!e.mic),Cn(1),Bn("ngIf",e.audio&&e.mic),Cn(1),Bn("ngIf",!e.audio),Cn(1),Zu(" ",e.twilioSession.localParticipant.identity," (me) ")}}function NG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"sentiment_satisfied_alt"),Gn())}function Ka(r,t){if(1&r&&(ls(0),hr(1,PG,5,4,"p",6),hr(2,NG,2,0,"mat-icon",6),go(3,"div",30),Ju()),2&r){const e=ai();Cn(1),Bn("ngIf",e.twilioSession),Cn(1),Bn("ngIf",!e.camera&&!e.cameraLoading),Cn(1),Bn("hidden",!e.camera)}}function O1(r,t){1&r&&(Rn(0,"p"),Hr(1,"Waiting for others to join..."),Gn())}function qU(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_off"),Gn())}function MG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_on"),Gn())}function xG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"volume_off"),Gn())}function t2(r,t){if(1&r&&(Rn(0,"p"),hr(1,qU,2,0,"mat-icon",6),hr(2,MG,2,0,"mat-icon",6),hr(3,xG,2,0,"mat-icon",6),Hr(4),Gn()),2&r){const e=ai(2);Cn(1),Bn("ngIf",e.activeSpeaker.audio&&e.activeSpeaker.muted),Cn(1),Bn("ngIf",e.activeSpeaker.audio&&!e.activeSpeaker.muted),Cn(1),Bn("ngIf",!e.activeSpeaker.audio),Cn(1),Zu(" ",e.activeSpeaker.displayName," ")}}function LG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"insert_emoticon"),Gn())}function D1(r,t){if(1&r&&go(0,"canvas",32),2&r){const e=ai(2);Bn("hidden",!e.activeSpeaker||!e.activeSpeaker.bVideoOn)}}function oS(r,t){if(1&r&&(ls(0),hr(1,t2,5,4,"p",6),hr(2,LG,2,0,"mat-icon",6),hr(3,D1,1,1,"canvas",31),Ju()),2&r){const e=ai();Cn(1),Bn("ngIf",e.activeSpeaker),Cn(1),Bn("ngIf",e.activeSpeaker&&!e.activeSpeaker.bVideoOn),Cn(1),Bn("ngIf",e.zoomVideo)}}function JU(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_off"),Gn())}function vc(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"mic_on"),Gn())}function BG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"volume_off"),Gn())}function FG(r,t){if(1&r&&(Rn(0,"p"),hr(1,JU,2,0,"mat-icon",6),hr(2,vc,2,0,"mat-icon",6),hr(3,BG,2,0,"mat-icon",6),Hr(4),Gn()),2&r){const e=ai(2);Cn(1),Bn("ngIf",e.activeSpeaker.value.audioTracks.size&&e.activeSpeaker.value.muted),Cn(1),Bn("ngIf",e.activeSpeaker.value.audioTracks.size&&!e.activeSpeaker.value.muted),Cn(1),Bn("ngIf",!e.activeSpeaker.value.audioTracks.size),Cn(1),Zu(" ",e.activeSpeaker.value.identity," ")}}function UG(r,t){1&r&&(Rn(0,"mat-icon"),Hr(1,"insert_emoticon"),Gn())}function VG(r,t){if(1&r&&(ls(0),hr(1,FG,5,4,"p",6),hr(2,UG,2,0,"mat-icon",6),go(3,"div",33),Ju()),2&r){const e=ai();Cn(1),Bn("ngIf",e.activeSpeaker&&e.activeSpeaker.value),Cn(1),Bn("ngIf",e.activeSpeaker&&!e.activeSpeaker.value.videoTracks.size),Cn(1),Bn("hidden",!e.activeSpeaker||!e.activeSpeaker.value.videoTracks.size)}}class k1{constructor(t,e,a,d,m){this.platform=t,this.locationStrategy=e,this.httpClient=a,this._snackBar=m,this.zoomAudioDecode=!1,this.zoomAudioEncode=!1,this.useVideoElementForZoom=!1,this.useCanvasElementForZoom=!1,this.twilioVideo=r5,this.session=!1,this.sessionLoading=!1,this.sessionError=!1,this.camera=!1,this.cameraLoading=!1,this.cameraError=!1,this.mic=!1,this.micLoading=!1,this.micError=!1,this.audio=!1,this.audioLoading=!1,this.audioError=!1,this.videoSDKProvider="zoom",console.log("Desktop Safri?",this.platform.SAFARI),this.configForm=new mr({videoSDKProvider:new Ip("zoom"),yourName:new Ip("User A"),sessionName:new Ip("testsdk"),sessionPasscode:new Ip("zoom123")}),history.pushState(null,"",window.location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,"",window.location.href)}),this.breakpoint=window.innerWidth<=700?1:2}onResize(t){this.breakpoint=t.target.innerWidth<=700?1:2}authorize(t){this.sessionLoading=!0,console.log(t),this.videoSDKProvider=t.videoSDKProvider,"zoom"===this.videoSDKProvider?this.httpClient.post("https://or116ttpz8.execute-api.us-west-1.amazonaws.com/default/videosdk",JSON.stringify({sessionName:t.sessionName,role:0})).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"twilio"===this.videoSDKProvider?this.httpClient.post("https://twiliovideo-auth-server.herokuapp.com",{sessionName:t.sessionName,identity:t.yourName}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&this.httpClient.post("http://localhost:4400",{sessionName:t.sessionName,role:"1"}).toPromise().then(e=>{console.log(e.signature),this.join(e.signature,t)}).catch(e=>{console.log(e),this.sessionLoading=!1})}join(t,e){"zoom"===this.videoSDKProvider?(this.zoomVideo=u3().createClient(),this.zoomVideo.init("en-US","CDN"),this.zoomVideo.join(e.sessionName,t,e.yourName,e.sessionPasscode).then(a=>{console.log(a),console.log(this.zoomVideo.getSessionInfo()),this.zoomSession=this.zoomVideo.getMediaStream(),this.sessionLoading=!1,this.session=!0,console.log(this.zoomVideo.getAllUser()),this.zoomVideo.getAllUser().length>1&&(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&(console.log("loading particpant video"),this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(d=>{console.log(d)})),console.log("active speaker",this.activeSpeaker)),this.zoomVideo.on("media-sdk-change",d=>{"audio"===d.type&&"success"===d.result&&("encode"===d.action?this.zoomAudioEncode=!0:"decode"===d.action&&(this.zoomAudioDecode=!0))}),this.zoomVideo.on("user-added",d=>{this._snackBar.open(d[0].displayName+" joined","",{verticalPosition:"top",duration:2e3}),this.activeSpeaker||(console.log("second user joined",d),console.log(this.zoomVideo.getAllUser()),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>d[0].userId===m.userId)[0])}),this.zoomVideo.on("user-updated",d=>{this.zoomVideo.getCurrentUserInfo()&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&d[0].userId===this.activeSpeaker.userId&&("audio"in d[0]?this.activeSpeaker.audio=d[0].audio:"muted"in d[0]&&(this.activeSpeaker.muted=d[0].muted))}),this.zoomVideo.on("user-removed",d=>{this.activeSpeaker.userId===d[0].userId&&(console.log("active speaker left"),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.zoomVideo.getAllUser().length>1?(this.activeSpeaker=this.zoomVideo.getAllUser()[1],this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(a)})):this.activeSpeaker=null),this._snackBar.open(d[0].userId+" left","",{verticalPosition:"top",duration:2e3})}),this.zoomVideo.on("active-speaker",d=>{this.activeSpeaker.userId!==d[0].userId&&this.zoomVideo.getCurrentUserInfo().userId!==d[0].userId&&(console.log("new active speaker",d),this.activeSpeaker.bVideoOn&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId),this.activeSpeaker=this.zoomVideo.getAllUser().filter(m=>d[0].userId===m.userId)[0],console.log(this.activeSpeaker),this.activeSpeaker.bVideoOn&&this.zoomSession.renderVideo(document.getElementById("participant-canvas"),this.activeSpeaker.userId,1920,1080,0,0,2).then(()=>{console.log(a)}))}),this.zoomVideo.on("peer-video-state-change",d=>{(!this.activeSpeaker||d.userId===this.activeSpeaker.userId)&&("Start"===d.action?this.zoomSession.renderVideo(document.getElementById("participant-canvas"),d.userId,1920,1080,0,0,2).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(m=>{console.log(m)}):"Stop"===d.action&&this.zoomSession.stopRenderVideo(document.getElementById("participant-canvas"),d.userId).then(m=>{this.activeSpeaker=this.zoomVideo.getAllUser().filter(b=>d.userId===b.userId)[0]}).catch(m=>{console.log(m)}))})}).catch(a=>{console.log(a),this.sessionLoading=!1})):"twilio"===this.videoSDKProvider?this.twilioVideo.connect(t,{name:e.sessionName,audio:!1,video:!1,dominantSpeaker:!0}).then(a=>{this.twilioSession=a,console.log(`Successfully joined a Room: ${this.twilioSession}`),this.sessionLoading=!1,this.session=!0,console.log(this.twilioSession.participants),console.log(),Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),this.twilioSession.participants.forEach(m=>{console.log(m),m.tracks.forEach(b=>{console.log(b),b.track&&(console.log("render the particpant video"),document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute?")}),b.track.on("enabled",()=>{console.log("did I unmute?")}))}),m.on("trackSubscribed",b=>{console.log(b),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0),console.log("did I mute again?")}),b.on("enabled",()=>{m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1),console.log("did I unmute again?")})}),m.on("trackUnsubscribed",b=>{console.log("a video was stopped"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantConnected",m=>{console.log(m),this._snackBar.open(m.identity+" joined","",{verticalPosition:"top",duration:2e3}),Array.from(this.twilioSession.participants,([b,T])=>({name:b,value:T})).length&&(console.log(this.twilioSession.participants[1]),this.activeSpeaker=Array.from(this.twilioSession.participants,([b,T])=>({name:b,value:T}))[0],console.log(this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&console.log("load particpant video"),console.log("active speaker",this.activeSpeaker)),m.tracks.forEach(b=>{console.log(b),b.track&&(document.getElementById("twilio-user-view-div").appendChild(b.track.attach()),b.track.on("disabled",()=>{console.log("did I mute? 2"),console.log(m)}),b.track.on("enabled",()=>{console.log("did I unmute? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}))}),m.on("trackSubscribed",b=>{console.log(b),m.sid===this.activeSpeaker.value.sid&&(console.log("adding video?"),document.getElementById("twilio-user-view-div").appendChild(b.attach())),b.on("disabled",()=>{console.log("did I mute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!0)}),b.on("enabled",()=>{console.log("did I unmute again? 2"),m.sid===this.activeSpeaker.value.sid&&(this.activeSpeaker.value.muted=!1)})}),m.on("trackUnsubscribed",b=>{console.log("a video was stopped"),console.log("removing video?"),m.sid===this.activeSpeaker.value.sid&&document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove()})}),this.twilioSession.on("participantDisconnected",m=>{console.log("someone left",m),m.sid===this.activeSpeaker.value.sid&&(document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker=this.activeSpeaker=Array.from(this.twilioSession.participants,([T,N])=>({name:T,value:N}))[0],console.log("new user talking change view",this.activeSpeaker),this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([T,N])=>({name:T,value:N}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([T,N])=>({name:T,value:N}))[0].value.track.attach()))),this._snackBar.open(m.identity+" left","",{verticalPosition:"top",duration:2e3})}),this.twilioSession.on("dominantSpeakerChanged",m=>{console.log(m),console.log(m.identity,m.sid),console.log(m.sid===this.activeSpeaker.value.sid),m&&m.sid!==this.activeSpeaker.value.sid&&(console.log("swicth video"),document.getElementById("twilio-user-view-div")?.querySelector("video")?.remove(),this.activeSpeaker.value=m,this.activeSpeaker.value.videoTracks.size&&(console.log(Array.from(this.activeSpeaker.value.videoTracks,([T,N])=>({name:T,value:N}))),document.getElementById("twilio-user-view-div").appendChild(Array.from(this.activeSpeaker.value.videoTracks,([T,N])=>({name:T,value:N}))[0].value.track.attach())),setTimeout(()=>{console.log(this.activeSpeaker)}))}),console.log(this.twilioSession.localParticipant);let d=Array.from(this.twilioSession.participants,([m,b])=>({name:m,value:b}));console.log(d)}).catch(a=>{console.log(a),this.sessionLoading=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient=n5().createClient({codec:"vp8",mode:"rtc"}),this.agoraClient.join("59dcf92e250b4392839cf3c7ea2818d0",e.sessionName,t).then(a=>{console.log(a),this.sessionLoading=!1,this.session=!0}).catch(a=>{console.log(a),this.sessionLoading=!1}))}startAudio(){this.audioLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.startAudio(),this.mic=!0,this.audio=!0,this.audioLoading=!1):"twilio"===this.videoSDKProvider&&this.twilioVideo.createLocalAudioTrack().then(t=>{this.twilioSession.localParticipant.publishTrack(t);const e=t.attach();document.body.appendChild(e),console.log("twilio mic"),this.micLoading=!1,this.mic=!0,this.audio=!0})}unmute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.unmuteAudio(),console.log("zoom mic"),this.micLoading=!1,this.mic=!0):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.enable()}),this.micLoading=!1,this.mic=!0):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack(),console.log("agora mic"),this.micLoading=!1,this.mic=!0)}mute(){this.micLoading=!0,"zoom"===this.videoSDKProvider?(this.zoomSession.muteAudio(),this.micLoading=!1,this.mic=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.track.disable()}),this.micLoading=!1,this.mic=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.createMicrophoneAudioTrack().setEnabled(!1),this.micLoading=!1,this.mic=!1)}startCamera(){this.cameraLoading=!0,"zoom"===this.videoSDKProvider?!this.zoomSession.isSupportMultipleVideos()&&"function"==typeof OffscreenCanvas||/android/i.test(navigator.userAgent)?this.zoomSession.startVideo({videoElement:document.getElementById("self-view-video")}).then(()=>{"function"!=typeof MediaStreamTrackProcessor?this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)}):(this.useVideoElementForZoom=!0,this.cameraLoading=!1,this.camera=!0)}).catch(t=>{console.log(t)}):this.zoomSession.startVideo().then(()=>{this.zoomSession.renderVideo(document.getElementById("self-view-canvas"),this.zoomVideo.getCurrentUserInfo().userId,1920,1080,0,0,2).then(()=>{this.useCanvasElementForZoom=!0,this.cameraLoading=!1,this.camera=!0}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)}):"twilio"===this.videoSDKProvider?(console.log(this.twilioSession.participants),console.log(this.twilioSession.participants.values()),this.twilioVideo.createLocalVideoTrack({height:{ideal:720,min:480,max:1080},width:{ideal:1280,min:640,max:1920},aspectRatio:16/9}).then(t=>{this.twilioSession.localParticipant.publishTrack(t),document.getElementById("twilio-self-view-div").appendChild(t.attach()),this.cameraLoading=!1,this.camera=!0})):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack(),this.cameraLoading=!1,this.camera=!0)}stopCamera(){this.cameraLoading=!0,this.camera=!1,"zoom"===this.videoSDKProvider?(this.zoomSession.stopVideo(),this.cameraLoading=!1,this.camera=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1):"twilio"===this.videoSDKProvider?this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove(),console.log("video stopped"),this.cameraLoading=!1,this.camera=!1}):"agora"===this.videoSDKProvider&&(this.agoraClient.createCameraVideoTrack().setEnabled(!1),this.cameraLoading=!1,this.camera=!1)}leave(){this.sessionLoading=!0,this.camera=!1,this.mic=!1,this.audio=!1,this.useCanvasElementForZoom=!1,this.useVideoElementForZoom=!1,this.activeSpeaker=null,setTimeout(()=>{"zoom"===this.videoSDKProvider?(this.zoomVideo.leave(),this.sessionLoading=!1,this.session=!1):"twilio"===this.videoSDKProvider?(this.twilioSession.localParticipant.videoTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.getElementById("twilio-self-view-div")?.querySelector("video")?.remove()}),this.twilioSession.localParticipant.audioTracks.forEach(t=>{t.unpublish(),t.track.stop(),document.querySelector("audio")?.remove()}),this.twilioSession.disconnect(),this.sessionLoading=!1,this.session=!1):"agora"===this.videoSDKProvider&&(this.agoraClient.leave(),this.sessionLoading=!1,this.session=!1)},500)}static#e=this.\u0275fac=function(e){return new(e||k1)(At(eu),At(dy),At(KM),At(oi),At(tS))};static#t=this.\u0275cmp=ka({type:k1,selectors:[["app-root"]],decls:14,vars:13,consts:[["class","config",3,"formGroup","ngSubmit",4,"ngIf"],["class","videoSDKProvider",4,"ngIf"],["class","controls",4,"ngIf"],["class","sessionLoading",4,"ngIf"],[1,"view"],["rowHeight","16:9",3,"cols","resize"],[4,"ngIf"],[1,"config",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","videoSDKProvider"],["value","zoom"],["value","twilio"],["matInput","","formControlName","yourName","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","sessionName","autocomplete","off"],["matInput","","formControlName","sessionPasscode","autocomplete","off"],["mat-fab","","color","primary",4,"ngIf"],["mat-fab","","color","primary"],[1,"videoSDKProvider"],[1,"controls"],["mat-fab","","color","primary",3,"click",4,"ngIf"],["mat-fab","","color","warn",3,"click"],["mat-fab","","color","primary",3,"click"],["mat-fab","","color","primary",3,"matMenuTriggerFor","matBadge"],["menu","matMenu"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"sessionLoading"],["id","self-view-video","width","1920","height","1080",3,"hidden"],["id","self-view-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-self-view-div",3,"hidden"],["id","participant-canvas","width","1920","height","1080",3,"hidden",4,"ngIf"],["id","participant-canvas","width","1920","height","1080",3,"hidden"],["id","twilio-user-view-div",3,"hidden"]],template:function(e,a){1&e&&(hr(0,AG,28,2,"form",0),hr(1,yG,3,1,"div",1),hr(2,IG,11,7,"div",2),hr(3,wG,2,0,"div",3),Rn(4,"div",4)(5,"mat-grid-list",5),_o("resize",function(m){return a.onResize(m)},0,sA),Rn(6,"mat-grid-tile"),hr(7,X8,1,0,"mat-spinner",6),hr(8,e2,5,4,"ng-container",6),hr(9,Ka,4,3,"ng-container",6),Gn(),Rn(10,"mat-grid-tile"),hr(11,O1,2,0,"p",6),hr(12,oS,4,3,"ng-container",6),hr(13,VG,4,3,"ng-container",6),Gn()()()),2&e&&(Bn("ngIf",!a.session&&!a.sessionLoading),Cn(1),Bn("ngIf",a.session&&!a.sessionLoading),Cn(1),Bn("ngIf",a.session&&!a.sessionLoading),Cn(1),Bn("ngIf",a.sessionLoading),Cn(1),fp("display",a.session?"flex":"none"),Cn(1),Bn("cols",a.breakpoint),Cn(2),Bn("ngIf",a.cameraLoading),Cn(1),Bn("ngIf","zoom"===a.videoSDKProvider),Cn(1),Bn("ngIf","twilio"===a.videoSDKProvider),Cn(2),Bn("ngIf",!a.activeSpeaker),Cn(1),Bn("ngIf","zoom"===a.videoSDKProvider),Cn(1),Bn("ngIf","twilio"===a.videoSDKProvider))},dependencies:[R0,ig,QV,qw,Iu,Fi,e1,ZF,Hj,yU,u8,zx,kU,UU,J3,b8,lj,$H,rG,P8,hG,$i,gG,sL],styles:["mat-grid-list[_ngcontent-%COMP%]{position:unset}mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}mat-grid-tile[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:17px;vertical-align:middle;height:17px;font-size:15px}p[_ngcontent-%COMP%]{margin:0;position:absolute;bottom:10px;left:10px;color:#fff;z-index:1}.view[_ngcontent-%COMP%]{height:100vh;align-items:center}.sessionLoading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}#twilio-self-view-div[_ngcontent-%COMP%], #twilio-user-view-div[_ngcontent-%COMP%]{width:100%;height:100%}#self-view-video[_ngcontent-%COMP%], #self-view-canvas[_ngcontent-%COMP%]{transform:scaleX(-1);height:100%!important}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:16/9;background-color:#add8e6}.config[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100vh}.config[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:300px}.videoSDKProvider[_ngcontent-%COMP%]{position:fixed;top:20px;display:flex;justify-content:center;width:100%;z-index:2;text-transform:capitalize}.controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;display:flex;justify-content:center;width:100%;z-index:2}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]})}function r6(r){return new vn(3e3,!1)}function jy(){return typeof window<"u"&&typeof window.document<"u"}function lL(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Qy(r){switch(r.length){case 0:return new kk;case 1:return r[0];default:return new fj(r)}}function t4(r,t,e,a,d=new Map,m=new Map){const b=[],T=[];let N=-1,U=null;if(a.forEach(ne=>{const ve=ne.get("offset"),Qe=ve==N,Ke=Qe&&U||new Map;ne.forEach((at,Ot)=>{let tn=Ot,an=at;if("offset"!==Ot)switch(tn=t.normalizePropertyName(tn,b),an){case"!":an=d.get(Ot);break;case av:an=m.get(Ot);break;default:an=t.normalizeStyleValue(Ot,tn,an,b)}Ke.set(tn,an)}),Qe||T.push(Ke),U=Ke,N=ve}),b.length)throw function cL(r){return new vn(3502,!1)}();return T}function Uf(r,t,e,a){switch(t){case"start":r.onStart(()=>a(e&&aS(e,"start",r)));break;case"done":r.onDone(()=>a(e&&aS(e,"done",r)));break;case"destroy":r.onDestroy(()=>a(e&&aS(e,"destroy",r)))}}function aS(r,t,e){const m=s2(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,e.totalTime??r.totalTime,!!e.disabled),b=r._data;return null!=b&&(m._data=b),m}function s2(r,t,e,a,d="",m=0,b){return{element:r,triggerName:t,fromState:e,toState:a,phaseName:d,totalTime:m,disabled:!!b}}function Zl(r,t,e){let a=r.get(t);return a||r.set(t,a=e),a}function v6(r){const t=r.indexOf(":");return[r.substring(1,t),r.slice(t+1)]}let a2=(r,t)=>!1,dL=(r,t,e)=>[],hL=null;function P1(r){const t=r.parentNode||r.host;return t===hL?null:t}(lL()||typeof Element<"u")&&(jy()?(hL=(()=>document.documentElement)(),a2=(r,t)=>{for(;t;){if(t===r)return!0;t=P1(t)}return!1}):a2=(r,t)=>r.contains(t),dL=(r,t,e)=>{if(e)return Array.from(r.querySelectorAll(t));const a=r.querySelector(t);return a?[a]:[]});let Hy=null,n4=!1;const i4=a2,o4=dL;let s4=(()=>{class r{validateStyleProperty(e){return function r4(r){Hy||(Hy=function qG(){return typeof document<"u"?document.body:null}()||{},n4=!!Hy.style&&"WebkitAppearance"in Hy.style);let t=!0;return Hy.style&&!function y6(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Hy.style,!t&&n4&&(t="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in Hy.style)),t}(e)}matchesElement(e,a){return!1}containsElement(e,a){return i4(e,a)}getParentElement(e){return P1(e)}query(e,a,d){return o4(e,a,d)}computeStyle(e,a,d){return d||""}animate(e,a,d,m,b,T=[],N){return new kk(d,m)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})(),cS=(()=>{class r{}return r.NOOP=new s4,r})();const pL="ng-enter",fL="ng-leave",mL="ng-trigger",gL=".ng-trigger",E6="ng-animating",N1=".ng-animating";function fv(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:a4(parseFloat(t[1]),t[2])}function a4(r,t){return"s"===t?1e3*r:r}function _L(r,t,e){return r.hasOwnProperty("duration")?r:function $G(r,t,e){let d,m=0,b="";if("string"==typeof r){const T=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===T)return t.push(r6()),{duration:0,delay:0,easing:""};d=a4(parseFloat(T[1]),T[2]);const N=T[3];null!=N&&(m=a4(parseFloat(N),T[4]));const U=T[5];U&&(b=U)}else d=r;if(!e){let T=!1,N=t.length;d<0&&(t.push(function aL(){return new vn(3100,!1)}()),T=!0),m<0&&(t.push(function $U(){return new vn(3101,!1)}()),T=!0),T&&t.splice(N,0,r6())}return{duration:d,delay:m,easing:b}}(r,t,e)}function u2(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function b6(r){const t=new Map;return Object.keys(r).forEach(e=>{t.set(e,r[e])}),t}function gv(r,t=new Map,e){if(e)for(let[a,d]of e)t.set(a,d);for(let[a,d]of r)t.set(a,d);return t}function l2(r,t,e){return e?t+":"+e+";":""}function S6(r){let t="";for(let e=0;e<r.style.length;e++){const a=r.style.item(e);t+=l2(0,a,r.style.getPropertyValue(a))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=l2(0,C6(e),r.style[e]));r.setAttribute("style",t)}function bg(r,t,e){r.style&&(t.forEach((a,d)=>{const m=x1(d);e&&!e.has(d)&&e.set(d,r.style[m]),r.style[m]=a}),lL()&&S6(r))}function uS(r,t){r.style&&(t.forEach((e,a)=>{const d=x1(a);r.style[d]=""}),lL()&&S6(r))}function d2(r){return Array.isArray(r)?1==r.length?r[0]:hj(r):r}const c4=new RegExp("{{\\s*(.+?)\\s*}}","g");function qd(r){let t=[];if("string"==typeof r){let e;for(;e=c4.exec(r);)t.push(e[1]);c4.lastIndex=0}return t}function M1(r,t,e){const a=r.toString(),d=a.replace(c4,(m,b)=>{let T=t[b];return null==T&&(e.push(function XU(r){return new vn(3003,!1)}()),T=""),T.toString()});return d==a?r:d}function h2(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const u4=/-+([a-z0-9])/g;function x1(r){return r.replace(u4,(...t)=>t[1].toUpperCase())}function C6(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Jd(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw function n2(r){return new vn(3004,!1)}()}}function l4(r,t){return window.getComputedStyle(r)[t]}function d4(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(a=>function dS(r,t,e){if(":"==r[0]){const N=function h4(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,a)=>parseFloat(a)>parseFloat(e);case":decrement":return(e,a)=>parseFloat(a)<parseFloat(e);default:return t.push(function WG(r){return new vn(3016,!1)}()),"* => *"}}(r,e);if("function"==typeof N)return void t.push(N);r=N}const a=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return e.push(function d6(r){return new vn(3015,!1)}()),t;const d=a[1],m=a[2],b=a[3];t.push(p4(d,b));"<"==m[0]&&!("*"==d&&"*"==b)&&t.push(p4(b,d))}(a,e,t)):e.push(r),e}const B1=new Set(["true","1"]),ed=new Set(["false","0"]);function p4(r,t){const e=B1.has(r)||ed.has(r),a=B1.has(t)||ed.has(t);return(d,m)=>{let b="*"==r||r==d,T="*"==t||t==m;return!b&&e&&"boolean"==typeof d&&(b=d?B1.has(r):ed.has(r)),!T&&a&&"boolean"==typeof m&&(T=m?B1.has(t):ed.has(t)),b&&T}}const T6=new RegExp("s*:selfs*,?","g");function AL(r,t,e,a){return new R6(r).build(t,e,a)}class R6{constructor(t){this._driver=t}build(t,e,a){const d=new Ri(e);return this._resetContextStyleTimingState(d),Jd(this,d2(t),d)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let a=e.queryCount=0,d=e.depCount=0;const m=[],b=[];return"@"==t.name.charAt(0)&&e.errors.push(function jG(){return new vn(3006,!1)}()),t.definitions.forEach(T=>{if(this._resetContextStyleTimingState(e),0==T.type){const N=T,U=N.name;U.toString().split(/\s*,\s*/).forEach(ne=>{N.name=ne,m.push(this.visitState(N,e))}),N.name=U}else if(1==T.type){const N=this.visitTransition(T,e);a+=N.queryCount,d+=N.depCount,b.push(N)}else e.errors.push(function s6(){return new vn(3007,!1)}())}),{type:7,name:t.name,states:m,transitions:b,queryCount:a,depCount:d,options:null}}visitState(t,e){const a=this.visitStyle(t.styles,e),d=t.options&&t.options.params||null;if(a.containsDynamicStyles){const m=new Set,b=d||{};a.styles.forEach(T=>{T instanceof Map&&T.forEach(N=>{qd(N).forEach(U=>{b.hasOwnProperty(U)||m.add(U)})})}),m.size&&(h2(m.values()),e.errors.push(function ZU(r,t){return new vn(3008,!1)}()))}return{type:0,name:t.name,style:a,options:d?{params:d}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const a=Jd(this,d2(t.animation),e);return{type:1,matchers:d4(t.expr,e.errors),animation:a,queryCount:e.queryCount,depCount:e.depCount,options:Wy(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(a=>Jd(this,a,e)),options:Wy(t.options)}}visitGroup(t,e){const a=e.currentTime;let d=0;const m=t.steps.map(b=>{e.currentTime=a;const T=Jd(this,b,e);return d=Math.max(d,e.currentTime),T});return e.currentTime=d,{type:3,steps:m,options:Wy(t.options)}}visitAnimate(t,e){const a=function nW(r,t){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return yL(_L(r,t).duration,0,"");const e=r;if(e.split(/\s+/).some(m=>"{"==m.charAt(0)&&"{"==m.charAt(1))){const m=yL(0,0,"");return m.dynamic=!0,m.strValue=e,m}const d=_L(e,t);return yL(d.duration,d.delay,d.easing)}(t.timings,e.errors);e.currentAnimateTimings=a;let d,m=t.styles?t.styles:Xl({});if(5==m.type)d=this.visitKeyframes(m,e);else{let b=t.styles,T=!1;if(!b){T=!0;const U={};a.easing&&(U.easing=a.easing),b=Xl(U)}e.currentTime+=a.duration+a.delay;const N=this.visitStyle(b,e);N.isEmptyStep=T,d=N}return e.currentAnimateTimings=null,{type:4,timings:a,style:d,options:null}}visitStyle(t,e){const a=this._makeStyleAst(t,e);return this._validateStyleAst(a,e),a}_makeStyleAst(t,e){const a=[],d=Array.isArray(t.styles)?t.styles:[t.styles];for(let T of d)"string"==typeof T?T===av?a.push(T):e.errors.push(new vn(3002,!1)):a.push(b6(T));let m=!1,b=null;return a.forEach(T=>{if(T instanceof Map&&(T.has("easing")&&(b=T.get("easing"),T.delete("easing")),!m))for(let N of T.values())if(N.toString().indexOf("{{")>=0){m=!0;break}}),{type:6,styles:a,easing:b,offset:t.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(t,e){const a=e.currentAnimateTimings;let d=e.currentTime,m=e.currentTime;a&&m>0&&(m-=a.duration+a.delay),t.styles.forEach(b=>{"string"!=typeof b&&b.forEach((T,N)=>{const U=e.collectedStyles.get(e.currentQuerySelector),ne=U.get(N);let ve=!0;ne&&(m!=d&&m>=ne.startTime&&d<=ne.endTime&&(e.errors.push(function HG(r,t,e,a,d){return new vn(3010,!1)}()),ve=!1),m=ne.startTime),ve&&U.set(N,{startTime:m,endTime:d}),e.options&&function XG(r,t,e){const a=t.params||{},d=qd(r);d.length&&d.forEach(m=>{a.hasOwnProperty(m)||e.push(function i6(r){return new vn(3001,!1)}())})}(T,e.options,e.errors)})})}visitKeyframes(t,e){const a={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function c6(){return new vn(3011,!1)}()),a;let m=0;const b=[];let T=!1,N=!1,U=0;const ne=t.steps.map(an=>{const Pn=this._makeStyleAst(an,e);let n=null!=Pn.offset?Pn.offset:function O6(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){const a=e;t=parseFloat(a.get("offset")),a.delete("offset")}});else if(r instanceof Map&&r.has("offset")){const e=r;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Pn.styles),o=0;return null!=n&&(m++,o=Pn.offset=n),N=N||o<0||o>1,T=T||o<U,U=o,b.push(o),Pn});N&&e.errors.push(function GG(){return new vn(3012,!1)}()),T&&e.errors.push(function e4(){return new vn(3200,!1)}());const ve=t.steps.length;let Qe=0;m>0&&m<ve?e.errors.push(function r2(){return new vn(3202,!1)}()):0==m&&(Qe=1/(ve-1));const Ke=ve-1,at=e.currentTime,Ot=e.currentAnimateTimings,tn=Ot.duration;return ne.forEach((an,Pn)=>{const n=Qe>0?Pn==Ke?1:Qe*Pn:b[Pn],o=n*tn;e.currentTime=at+Ot.delay+o,Ot.duration=o,this._validateStyleAst(an,e),an.offset=n,a.styles.push(an)}),a}visitReference(t,e){return{type:8,animation:Jd(this,d2(t.animation),e),options:Wy(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Wy(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Wy(t.options)}}visitQuery(t,e){const a=e.currentQuerySelector,d=t.options||{};e.queryCount++,e.currentQuery=t;const[m,b]=function m4(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(T6,"")),r=r.replace(/@\*/g,gL).replace(/@\w+/g,e=>gL+"-"+e.slice(1)).replace(/:animating/g,N1),[r,t]}(t.selector);e.currentQuerySelector=a.length?a+" "+m:m,Zl(e.collectedStyles,e.currentQuerySelector,new Map);const T=Jd(this,d2(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=a,{type:11,selector:m,limit:d.limit||0,optional:!!d.optional,includeSelf:b,animation:T,originalSelector:t.selector,options:Wy(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function u6(){return new vn(3013,!1)}());const a="full"===t.timings?{duration:0,delay:0,easing:"full"}:_L(t.timings,e.errors,!0);return{type:12,animation:Jd(this,d2(t.animation),e),timings:a,options:null}}}class Ri{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Wy(r){return r?(r=u2(r)).params&&(r.params=function tW(r){return r?u2(r):null}(r.params)):r={},r}function yL(r,t,e){return{duration:r,delay:t,easing:e}}function EL(r,t,e,a,d,m,b=null,T=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:a,duration:d,delay:m,totalTime:d+m,easing:b,subTimeline:T}}class bL{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let a=this._map.get(t);a||this._map.set(t,a=[]),a.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const SL=new RegExp(":enter","g"),rW=new RegExp(":leave","g");function CL(r,t,e,a,d,m=new Map,b=new Map,T,N,U=[]){return(new Oi).buildKeyframes(r,t,e,a,d,m,b,T,N,U)}class Oi{buildKeyframes(t,e,a,d,m,b,T,N,U,ne=[]){U=U||new bL;const ve=new IL(t,e,U,d,m,ne,[]);ve.options=N;const Qe=N.delay?fv(N.delay):0;ve.currentTimeline.delayNextStep(Qe),ve.currentTimeline.setStyles([b],null,ve.errors,N),Jd(this,a,ve);const Ke=ve.timelines.filter(at=>at.containsAnimation());if(Ke.length&&T.size){let at;for(let Ot=Ke.length-1;Ot>=0;Ot--){const tn=Ke[Ot];if(tn.element===e){at=tn;break}}at&&!at.allowOnlyTimelineStyles()&&at.setStyles([T],null,ve.errors,N)}return Ke.length?Ke.map(at=>at.buildKeyframes()):[EL(e,[],[],[],0,Qe,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const a=e.subInstructions.get(e.element);if(a){const d=e.createSubContext(t.options),m=e.currentTimeline.currentTime,b=this._visitSubInstructions(a,d,d.options);m!=b&&e.transformIntoNewTimeline(b)}e.previousNode=t}visitAnimateRef(t,e){const a=e.createSubContext(t.options);a.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,a),this.visitReference(t.animation,a),e.transformIntoNewTimeline(a.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,a){for(const d of t){const m=d?.delay;if(m){const b="number"==typeof m?m:fv(M1(m,d?.params??{},e.errors));a.delayNextStep(b)}}}_visitSubInstructions(t,e,a){let m=e.currentTimeline.currentTime;const b=null!=a.duration?fv(a.duration):null,T=null!=a.delay?fv(a.delay):null;return 0!==b&&t.forEach(N=>{const U=e.appendInstructionToTimeline(N,b,T);m=Math.max(m,U.duration+U.delay)}),m}visitReference(t,e){e.updateOptions(t.options,!0),Jd(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const a=e.subContextCount;let d=e;const m=t.options;if(m&&(m.params||m.delay)&&(d=e.createSubContext(m),d.transformIntoNewTimeline(),null!=m.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=m2);const b=fv(m.delay);d.delayNextStep(b)}t.steps.length&&(t.steps.forEach(b=>Jd(this,b,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>a&&d.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const a=[];let d=e.currentTimeline.currentTime;const m=t.options&&t.options.delay?fv(t.options.delay):0;t.steps.forEach(b=>{const T=e.createSubContext(t.options);m&&T.delayNextStep(m),Jd(this,b,T),d=Math.max(d,T.currentTimeline.currentTime),a.push(T.currentTimeline)}),a.forEach(b=>e.currentTimeline.mergeTimelineCollectedStyles(b)),e.transformIntoNewTimeline(d),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const a=t.strValue;return _L(e.params?M1(a,e.params,e.errors):a,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const a=e.currentAnimateTimings=this._visitTiming(t.timings,e),d=e.currentTimeline;a.delay&&(e.incrementTime(a.delay),d.snapshotCurrentStyles());const m=t.style;5==m.type?this.visitKeyframes(m,e):(e.incrementTime(a.duration),this.visitStyle(m,e),d.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const a=e.currentTimeline,d=e.currentAnimateTimings;!d&&a.hasCurrentStyleProperties()&&a.forwardFrame();const m=d&&d.easing||t.easing;t.isEmptyStep?a.applyEmptyStep(m):a.setStyles(t.styles,m,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const a=e.currentAnimateTimings,d=e.currentTimeline.duration,m=a.duration,T=e.createSubContext().currentTimeline;T.easing=a.easing,t.styles.forEach(N=>{T.forwardTime((N.offset||0)*m),T.setStyles(N.styles,N.easing,e.errors,e.options),T.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(T),e.transformIntoNewTimeline(d+m),e.previousNode=t}visitQuery(t,e){const a=e.currentTimeline.currentTime,d=t.options||{},m=d.delay?fv(d.delay):0;m&&(6===e.previousNode.type||0==a&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=m2);let b=a;const T=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!d.optional,e.errors);e.currentQueryTotal=T.length;let N=null;T.forEach((U,ne)=>{e.currentQueryIndex=ne;const ve=e.createSubContext(t.options,U);m&&ve.delayNextStep(m),U===e.element&&(N=ve.currentTimeline),Jd(this,t.animation,ve),ve.currentTimeline.applyStylesToKeyframe(),b=Math.max(b,ve.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(b),N&&(e.currentTimeline.mergeTimelineCollectedStyles(N),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const a=e.parentContext,d=e.currentTimeline,m=t.timings,b=Math.abs(m.duration),T=b*(e.currentQueryTotal-1);let N=b*e.currentQueryIndex;switch(m.duration<0?"reverse":m.easing){case"reverse":N=T-N;break;case"full":N=a.currentStaggerTime}const ne=e.currentTimeline;N&&ne.delayNextStep(N);const ve=ne.currentTime;Jd(this,t.animation,e),e.previousNode=t,a.currentStaggerTime=d.currentTime-ve+(d.startTime-a.currentTimeline.startTime)}}const m2={};class IL{constructor(t,e,a,d,m,b,T,N){this._driver=t,this.element=e,this.subInstructions=a,this._enterClassName=d,this._leaveClassName=m,this.errors=b,this.timelines=T,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=m2,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=N||new wL(this._driver,e,0),T.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const a=t;let d=this.options;null!=a.duration&&(d.duration=fv(a.duration)),null!=a.delay&&(d.delay=fv(a.delay));const m=a.params;if(m){let b=d.params;b||(b=this.options.params={}),Object.keys(m).forEach(T=>{(!e||!b.hasOwnProperty(T))&&(b[T]=M1(m[T],b,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const a=t.params={};Object.keys(e).forEach(d=>{a[d]=e[d]})}}return t}createSubContext(t=null,e,a){const d=e||this.element,m=new IL(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,a||0));return m.previousNode=this.previousNode,m.currentAnimateTimings=this.currentAnimateTimings,m.options=this._copyOptions(),m.updateOptions(t),m.currentQueryIndex=this.currentQueryIndex,m.currentQueryTotal=this.currentQueryTotal,m.parentContext=this,this.subContextCount++,m}transformIntoNewTimeline(t){return this.previousNode=m2,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,a){const d={duration:e??t.duration,delay:this.currentTimeline.currentTime+(a??0)+t.delay,easing:""},m=new Xd(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,d,t.stretchStartingKeyframe);return this.timelines.push(m),d}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,a,d,m,b){let T=[];if(d&&T.push(this.element),t.length>0){t=(t=t.replace(SL,"."+this._enterClassName)).replace(rW,"."+this._leaveClassName);let U=this._driver.query(this.element,t,1!=a);0!==a&&(U=a<0?U.slice(U.length+a,U.length):U.slice(0,a)),T.push(...U)}return!m&&0==T.length&&b.push(function l6(r){return new vn(3014,!1)}()),T}}class wL{constructor(t,e,a,d){this._driver=t,this.element=e,this.startTime=a,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new wL(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,a]of this._globalTimelineStyles)this._backFill.set(e,a||av),this._currentKeyframe.set(e,av);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,a,d){e&&this._previousKeyframe.set("easing",e);const m=d&&d.params||{},b=function P6(r,t){const e=new Map;let a;return r.forEach(d=>{if("*"===d){a=a||t.keys();for(let m of a)e.set(m,av)}else gv(d,e)}),e}(t,this._globalTimelineStyles);for(let[T,N]of b){const U=M1(N,m,a);this._pendingStyles.set(T,U),this._localTimelineStyles.has(T)||this._backFill.set(T,this._globalTimelineStyles.get(T)??av),this._updateStyle(T,U)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,a)=>{const d=this._styleSummary.get(a);(!d||e.time>d.time)&&this._updateStyle(a,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,a=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((T,N)=>{const U=gv(T,new Map,this._backFill);U.forEach((ne,ve)=>{"!"===ne?t.add(ve):ne===av&&e.add(ve)}),a||U.set("offset",N/this.duration),d.push(U)});const m=t.size?h2(t.values()):[],b=e.size?h2(e.values()):[];if(a){const T=d[0],N=new Map(T);T.set("offset",0),N.set("offset",1),d=[T,N]}return EL(this.element,d,m,b,this.duration,this.startTime,this.easing,!1)}}class Xd extends wL{constructor(t,e,a,d,m,b,T=!1){super(t,e,b.delay),this.keyframes=a,this.preStyleProps=d,this.postStyleProps=m,this._stretchStartingKeyframe=T,this.timings={duration:b.duration,delay:b.delay,easing:b.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:a,easing:d}=this.timings;if(this._stretchStartingKeyframe&&e){const m=[],b=a+e,T=e/b,N=gv(t[0]);N.set("offset",0),m.push(N);const U=gv(t[0]);U.set("offset",g4(T)),m.push(U);const ne=t.length-1;for(let ve=1;ve<=ne;ve++){let Qe=gv(t[ve]);const Ke=Qe.get("offset");Qe.set("offset",g4((e+Ke*a)/b)),m.push(Qe)}a=b,e=0,d="",t=m}return EL(this.element,t,this.preStyleProps,this.postStyleProps,a,e,d,!0)}}function g4(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class TL{}const N6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class RL extends TL{normalizePropertyName(t,e){return x1(t)}normalizeStyleValue(t,e,a,d){let m="";const b=a.toString().trim();if(N6.has(e)&&0!==a&&"0"!==a)if("number"==typeof a)m="px";else{const T=a.match(/^[+-]?[\d\.]+([a-z]*)$/);T&&0==T[1].length&&d.push(function o6(r,t){return new vn(3005,!1)}())}return b+m}}function g2(r,t,e,a,d,m,b,T,N,U,ne,ve,Qe){return{type:0,element:r,triggerName:t,isRemovalTransition:d,fromState:e,fromStyles:m,toState:a,toStyles:b,timelines:T,queriedElements:N,preStyleProps:U,postStyleProps:ne,totalTime:ve,errors:Qe}}const OL={};class v4{constructor(t,e,a){this._triggerName=t,this.ast=e,this._stateStyles=a}match(t,e,a,d){return function M6(r,t,e,a,d){return r.some(m=>m(t,e,a,d))}(this.ast.matchers,t,e,a,d)}buildStyles(t,e,a){let d=this._stateStyles.get("*");return void 0!==t&&(d=this._stateStyles.get(t?.toString())||d),d?d.buildStyles(e,a):new Map}build(t,e,a,d,m,b,T,N,U,ne){const ve=[],Qe=this.ast.options&&this.ast.options.params||OL,at=this.buildStyles(a,T&&T.params||OL,ve),Ot=N&&N.params||OL,tn=this.buildStyles(d,Ot,ve),an=new Set,Pn=new Map,n=new Map,o="void"===d,s={params:Di(Ot,Qe),delay:this.ast.options?.delay},c=ne?[]:CL(t,e,this.ast.animation,m,b,at,tn,s,U,ve);let h=0;if(c.forEach(f=>{h=Math.max(f.duration+f.delay,h)}),ve.length)return g2(e,this._triggerName,a,d,o,at,tn,[],[],Pn,n,h,ve);c.forEach(f=>{const A=f.element,_=Zl(Pn,A,new Set);f.preStyleProps.forEach(S=>_.add(S));const E=Zl(n,A,new Set);f.postStyleProps.forEach(S=>E.add(S)),A!==e&&an.add(A)});const g=h2(an.values());return g2(e,this._triggerName,a,d,o,at,tn,c,g,Pn,n,h)}}function Di(r,t){const e=u2(t);for(const a in r)r.hasOwnProperty(a)&&null!=r[a]&&(e[a]=r[a]);return e}class x6{constructor(t,e,a){this.styles=t,this.defaultParams=e,this.normalizer=a}buildStyles(t,e){const a=new Map,d=u2(this.defaultParams);return Object.keys(t).forEach(m=>{const b=t[m];null!==b&&(d[m]=b)}),this.styles.styles.forEach(m=>{"string"!=typeof m&&m.forEach((b,T)=>{b&&(b=M1(b,d,e));const N=this.normalizer.normalizePropertyName(T,e);b=this.normalizer.normalizeStyleValue(T,N,b,e),a.set(N,b)})}),a}}class L6{constructor(t,e,a){this.name=t,this.ast=e,this._normalizer=a,this.transitionFactories=[],this.states=new Map,e.states.forEach(d=>{this.states.set(d.name,new x6(d.style,d.options&&d.options.params||{},a))}),B6(this.states,"true","1"),B6(this.states,"false","0"),e.transitions.forEach(d=>{this.transitionFactories.push(new v4(t,d,this.states))}),this.fallbackTransition=function A4(r,t,e){return new v4(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(b,T)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,a,d){return this.transitionFactories.find(b=>b.match(t,e,a,d))||null}matchStyles(t,e,a){return this.fallbackTransition.buildStyles(t,e,a)}}function B6(r,t,e){r.has(t)?r.has(e)||r.set(e,r.get(t)):r.has(e)&&r.set(t,r.get(e))}const Zd=new bL;class kp{constructor(t,e,a){this.bodyNode=t,this._driver=e,this._normalizer=a,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const a=[],m=AL(this._driver,e,a,[]);if(a.length)throw function Yd(r){return new vn(3503,!1)}();this._animations.set(t,m)}_buildPlayer(t,e,a){const d=t.element,m=t4(0,this._normalizer,0,t.keyframes,e,a);return this._driver.animate(d,m,t.duration,t.delay,t.easing,[],!0)}create(t,e,a={}){const d=[],m=this._animations.get(t);let b;const T=new Map;if(m?(b=CL(this._driver,e,m,pL,fL,new Map,new Map,a,Zd,d),b.forEach(ne=>{const ve=Zl(T,ne.element,new Map);ne.postStyleProps.forEach(Qe=>ve.set(Qe,null))})):(d.push(function uL(){return new vn(3300,!1)}()),b=[]),d.length)throw function p6(r){return new vn(3504,!1)}();T.forEach((ne,ve)=>{ne.forEach((Qe,Ke)=>{ne.set(Ke,this._driver.computeStyle(ve,Ke,av))})});const U=Qy(b.map(ne=>{const ve=T.get(ne.element);return this._buildPlayer(ne,new Map,ve)}));return this._playersById.set(t,U),U.onDestroy(()=>this.destroy(t)),this.players.push(U),U}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const a=this.players.indexOf(e);a>=0&&this.players.splice(a,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function YG(r){return new vn(3301,!1)}();return e}listen(t,e,a,d){const m=s2(e,"","","");return Uf(this._getPlayer(t),a,m,d),()=>{}}command(t,e,a,d){if("register"==a)return void this.register(t,d[0]);if("create"==a)return void this.create(t,e,d[0]||{});const m=this._getPlayer(t);switch(a){case"play":m.play();break;case"pause":m.pause();break;case"reset":m.reset();break;case"restart":m.restart();break;case"finish":m.finish();break;case"init":m.init();break;case"setPosition":m.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(t)}}}const Ai="ng-animate-queued",_2="ng-animate-disabled",j6=[],ir={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},td="__ng_removed";class y4{constructor(t,e=""){this.namespaceId=e;const a=t&&t.hasOwnProperty("value");if(this.value=function lW(r){return r??null}(a?t.value:t),a){const m=u2(t);delete m.value,this.options=m}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const a=this.options.params;Object.keys(e).forEach(d=>{null==a[d]&&(a[d]=e[d])})}}}const U1="void",E4=new y4(U1);class aW{constructor(t,e,a){this.id=t,this.hostElement=e,this._engine=a,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ys(e,this._hostClassName)}listen(t,e,a,d){if(!this._triggers.has(e))throw function f6(r,t){return new vn(3302,!1)}();if(null==a||0==a.length)throw function Ff(r){return new vn(3303,!1)}();if(!function dW(r){return"start"==r||"done"==r}(a))throw function Vy(r,t){return new vn(3400,!1)}();const m=Zl(this._elementListeners,t,[]),b={name:e,phase:a,callback:d};m.push(b);const T=Zl(this._engine.statesByElement,t,new Map);return T.has(e)||(ys(t,mL),ys(t,mL+"-"+e),T.set(e,E4)),()=>{this._engine.afterFlush(()=>{const N=m.indexOf(b);N>=0&&m.splice(N,1),this._triggers.has(e)||T.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function sS(r){return new vn(3401,!1)}();return e}trigger(t,e,a,d=!0){const m=this._getTrigger(e),b=new b4(this.id,e,t);let T=this._engine.statesByElement.get(t);T||(ys(t,mL),ys(t,mL+"-"+e),this._engine.statesByElement.set(t,T=new Map));let N=T.get(e);const U=new y4(a,this.id);if(!(a&&a.hasOwnProperty("value"))&&N&&U.absorbOptions(N.options),T.set(e,U),N||(N=E4),U.value!==U1&&N.value===U.value){if(!function C4(r,t){const e=Object.keys(r),a=Object.keys(t);if(e.length!=a.length)return!1;for(let d=0;d<e.length;d++){const m=e[d];if(!t.hasOwnProperty(m)||r[m]!==t[m])return!1}return!0}(N.params,U.params)){const Ot=[],tn=m.matchStyles(N.value,N.params,Ot),an=m.matchStyles(U.value,U.params,Ot);Ot.length?this._engine.reportError(Ot):this._engine.afterFlush(()=>{uS(t,tn),bg(t,an)})}return}const Qe=Zl(this._engine.playersByElement,t,[]);Qe.forEach(Ot=>{Ot.namespaceId==this.id&&Ot.triggerName==e&&Ot.queued&&Ot.destroy()});let Ke=m.matchTransition(N.value,U.value,t,U.params),at=!1;if(!Ke){if(!d)return;Ke=m.fallbackTransition,at=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:Ke,fromState:N,toState:U,player:b,isFallbackTransition:at}),at||(ys(t,Ai),b.onStart(()=>{Vf(t,Ai)})),b.onDone(()=>{let Ot=this.players.indexOf(b);Ot>=0&&this.players.splice(Ot,1);const tn=this._engine.playersByElement.get(t);if(tn){let an=tn.indexOf(b);an>=0&&tn.splice(an,1)}}),this.players.push(b),Qe.push(b),b}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,a)=>{this._elementListeners.set(a,e.filter(d=>d.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(a=>a.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const a=this._engine.driver.query(t,gL,!0);a.forEach(d=>{if(d[td])return;const m=this._engine.fetchNamespacesByElement(d);m.size?m.forEach(b=>b.triggerLeaveAnimation(d,e,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>a.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(t,e,a,d){const m=this._engine.statesByElement.get(t),b=new Map;if(m){const T=[];if(m.forEach((N,U)=>{if(b.set(U,N.value),this._triggers.has(U)){const ne=this.trigger(t,U,U1,d);ne&&T.push(ne)}}),T.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,b),a&&Qy(T).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),a=this._engine.statesByElement.get(t);if(e&&a){const d=new Set;e.forEach(m=>{const b=m.name;if(d.has(b))return;d.add(b);const N=this._triggers.get(b).fallbackTransition,U=a.get(b)||E4,ne=new y4(U1),ve=new b4(this.id,b,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:b,transition:N,fromState:U,toState:ne,player:ve,isFallbackTransition:!0})})}}removeNode(t,e){const a=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let d=!1;if(a.totalAnimations){const m=a.players.length?a.playersByQueriedElement.get(t):[];if(m&&m.length)d=!0;else{let b=t;for(;b=b.parentNode;)if(a.statesByElement.get(b)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(t),d)a.markElementAsRemoved(this.id,t,!1,e);else{const m=t[td];(!m||m===ir)&&(a.afterFlush(()=>this.clearElementCache(t)),a.destroyInnerAnimations(t),a._onRemovalComplete(t,e))}}insertNode(t,e){ys(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(a=>{const d=a.player;if(d.destroyed)return;const m=a.element,b=this._elementListeners.get(m);b&&b.forEach(T=>{if(T.name==a.triggerName){const N=s2(m,a.triggerName,a.fromState.value,a.toState.value);N._data=t,Uf(a.player,T.phase,N,T.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):e.push(a)}),this._queue=[],e.sort((a,d)=>{const m=a.transition.ast.depCount,b=d.transition.ast.depCount;return 0==m||0==b?m-b:this._engine.driver.containsElement(a.element,d.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(a=>a.element===t)||e,e}}class cW{constructor(t,e,a){this.bodyNode=t,this.driver=e,this._normalizer=a,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,m)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(a=>{a.queued&&t.push(a)})}),t}createNamespace(t,e){const a=new aW(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(a,e):(this.newHostElements.set(e,a),this.collectEnterElement(e)),this._namespaceLookup[t]=a}_balanceNamespaceList(t,e){const a=this._namespaceList,d=this.namespacesByHostElement;if(a.length-1>=0){let b=!1,T=this.driver.getParentElement(e);for(;T;){const N=d.get(T);if(N){const U=a.indexOf(N);a.splice(U+1,0,t),b=!0;break}T=this.driver.getParentElement(T)}b||a.unshift(t)}else a.push(t);return d.set(e,t),t}register(t,e){let a=this._namespaceLookup[t];return a||(a=this.createNamespace(t,e)),a}registerTrigger(t,e,a){let d=this._namespaceLookup[t];d&&d.register(e,a)&&this.totalAnimations++}destroy(t,e){if(!t)return;const a=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(a.hostElement),delete this._namespaceLookup[t];const d=this._namespaceList.indexOf(a);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>a.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,a=this.statesByElement.get(t);if(a)for(let d of a.values())if(d.namespaceId){const m=this._fetchNamespace(d.namespaceId);m&&e.add(m)}return e}trigger(t,e,a,d){if(DL(e)){const m=this._fetchNamespace(t);if(m)return m.trigger(e,a,d),!0}return!1}insertNode(t,e,a,d){if(!DL(e))return;const m=e[td];if(m&&m.setForRemoval){m.setForRemoval=!1,m.setForMove=!0;const b=this.collectedLeaveElements.indexOf(e);b>=0&&this.collectedLeaveElements.splice(b,1)}if(t){const b=this._fetchNamespace(t);b&&b.insertNode(e,a)}d&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ys(t,_2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Vf(t,_2))}removeNode(t,e,a,d){if(DL(e)){const m=t?this._fetchNamespace(t):null;if(m?m.removeNode(e,d):this.markElementAsRemoved(t,e,!1,d),a){const b=this.namespacesByHostElement.get(e);b&&b.id!==t&&b.removeNode(e,d)}}else this._onRemovalComplete(e,d)}markElementAsRemoved(t,e,a,d,m){this.collectedLeaveElements.push(e),e[td]={namespaceId:t,setForRemoval:d,hasAnimation:a,removedBeforeQueried:!1,previousTriggersValues:m}}listen(t,e,a,d,m){return DL(e)?this._fetchNamespace(t).listen(e,a,d,m):()=>{}}_buildInstruction(t,e,a,d,m){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,a,d,t.fromState.options,t.toState.options,e,m)}destroyInnerAnimations(t){let e=this.driver.query(t,gL,!0);e.forEach(a=>this.destroyActiveAnimationsForElement(a)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,N1,!0),e.forEach(a=>this.finishActiveQueriedAnimationOnElement(a)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(a=>{a.queued?a.markedForDestroy=!0:a.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(a=>a.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Qy(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[td];if(e&&e.setForRemoval){if(t[td]=ir,e.namespaceId){this.destroyInnerAnimations(t);const a=this._fetchNamespace(e.namespaceId);a&&a.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(_2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(a=>{this.markElementAsDisabled(a,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((a,d)=>this._balanceNamespaceList(a,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let a=0;a<this.collectedEnterElements.length;a++)ys(this.collectedEnterElements[a],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const a=[];try{e=this._flushAnimations(a,t)}finally{for(let d=0;d<a.length;d++)a[d]()}}else for(let a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(a=>a()),this._flushFns=[],this._whenQuietFns.length){const a=this._whenQuietFns;this._whenQuietFns=[],e.length?Qy(e).onDone(()=>{a.forEach(d=>d())}):a.forEach(d=>d())}}reportError(t){throw function m6(r){return new vn(3402,!1)}()}_flushAnimations(t,e){const a=new bL,d=[],m=new Map,b=[],T=new Map,N=new Map,U=new Map,ne=new Set;this.disabledNodes.forEach(M=>{ne.add(M);const Q=this.driver.query(M,".ng-animate-queued",!0);for(let H=0;H<Q.length;H++)ne.add(Q[H])});const ve=this.bodyNode,Qe=Array.from(this.statesByElement.keys()),Ke=kL(Qe,this.collectedEnterElements),at=new Map;let Ot=0;Ke.forEach((M,Q)=>{const H=pL+Ot++;at.set(Q,H),M.forEach(Z=>ys(Z,H))});const tn=[],an=new Set,Pn=new Set;for(let M=0;M<this.collectedLeaveElements.length;M++){const Q=this.collectedLeaveElements[M],H=Q[td];H&&H.setForRemoval&&(tn.push(Q),an.add(Q),H.hasAnimation?this.driver.query(Q,".ng-star-inserted",!0).forEach(Z=>an.add(Z)):Pn.add(Q))}const n=new Map,o=kL(Qe,Array.from(an));o.forEach((M,Q)=>{const H=fL+Ot++;n.set(Q,H),M.forEach(Z=>ys(Z,H))}),t.push(()=>{Ke.forEach((M,Q)=>{const H=at.get(Q);M.forEach(Z=>Vf(Z,H))}),o.forEach((M,Q)=>{const H=n.get(Q);M.forEach(Z=>Vf(Z,H))}),tn.forEach(M=>{this.processLeaveNode(M)})});const s=[],c=[];for(let M=this._namespaceList.length-1;M>=0;M--)this._namespaceList[M].drainQueuedTransitions(e).forEach(H=>{const Z=H.player,le=H.element;if(s.push(Z),this.collectedEnterElements.length){const Dt=le[td];if(Dt&&Dt.setForMove){if(Dt.previousTriggersValues&&Dt.previousTriggersValues.has(H.triggerName)){const In=Dt.previousTriggersValues.get(H.triggerName),dn=this.statesByElement.get(H.element);if(dn&&dn.has(H.triggerName)){const hn=dn.get(H.triggerName);hn.value=In,dn.set(H.triggerName,hn)}}return void Z.destroy()}}const ge=!ve||!this.driver.containsElement(ve,le),Se=n.get(le),Ne=at.get(le),nt=this._buildInstruction(H,a,Ne,Se,ge);if(nt.errors&&nt.errors.length)return void c.push(nt);if(ge)return Z.onStart(()=>uS(le,nt.fromStyles)),Z.onDestroy(()=>bg(le,nt.toStyles)),void d.push(Z);if(H.isFallbackTransition)return Z.onStart(()=>uS(le,nt.fromStyles)),Z.onDestroy(()=>bg(le,nt.toStyles)),void d.push(Z);const Nt=[];nt.timelines.forEach(Dt=>{Dt.stretchStartingKeyframe=!0,this.disabledNodes.has(Dt.element)||Nt.push(Dt)}),nt.timelines=Nt,a.append(le,nt.timelines),b.push({instruction:nt,player:Z,element:le}),nt.queriedElements.forEach(Dt=>Zl(T,Dt,[]).push(Z)),nt.preStyleProps.forEach((Dt,In)=>{if(Dt.size){let dn=N.get(In);dn||N.set(In,dn=new Set),Dt.forEach((hn,wt)=>dn.add(wt))}}),nt.postStyleProps.forEach((Dt,In)=>{let dn=U.get(In);dn||U.set(In,dn=new Set),Dt.forEach((hn,wt)=>dn.add(wt))})});if(c.length){const M=[];c.forEach(Q=>{M.push(function o2(r,t){return new vn(3505,!1)}())}),s.forEach(Q=>Q.destroy()),this.reportError(M)}const h=new Map,g=new Map;b.forEach(M=>{const Q=M.element;a.has(Q)&&(g.set(Q,Q),this._beforeAnimationBuild(M.player.namespaceId,M.instruction,h))}),d.forEach(M=>{const Q=M.element;this._getPreviousPlayers(Q,!1,M.namespaceId,M.triggerName,null).forEach(Z=>{Zl(h,Q,[]).push(Z),Z.destroy()})});const f=tn.filter(M=>I4(M,N,U)),A=new Map;Q6(A,this.driver,Pn,U,av).forEach(M=>{I4(M,N,U)&&f.push(M)});const E=new Map;Ke.forEach((M,Q)=>{Q6(E,this.driver,new Set(M),N,"!")}),f.forEach(M=>{const Q=A.get(M),H=E.get(M);A.set(M,new Map([...Array.from(Q?.entries()??[]),...Array.from(H?.entries()??[])]))});const S=[],I=[],R={};b.forEach(M=>{const{element:Q,player:H,instruction:Z}=M;if(a.has(Q)){if(ne.has(Q))return H.onDestroy(()=>bg(Q,Z.toStyles)),H.disabled=!0,H.overrideTotalTime(Z.totalTime),void d.push(H);let le=R;if(g.size>1){let Se=Q;const Ne=[];for(;Se=Se.parentNode;){const nt=g.get(Se);if(nt){le=nt;break}Ne.push(Se)}Ne.forEach(nt=>g.set(nt,le))}const ge=this._buildAnimation(H.namespaceId,Z,h,m,E,A);if(H.setRealPlayer(ge),le===R)S.push(H);else{const Se=this.playersByElement.get(le);Se&&Se.length&&(H.parentPlayer=Qy(Se)),d.push(H)}}else uS(Q,Z.fromStyles),H.onDestroy(()=>bg(Q,Z.toStyles)),I.push(H),ne.has(Q)&&d.push(H)}),I.forEach(M=>{const Q=m.get(M.element);if(Q&&Q.length){const H=Qy(Q);M.setRealPlayer(H)}}),d.forEach(M=>{M.parentPlayer?M.syncPlayerEvents(M.parentPlayer):M.destroy()});for(let M=0;M<tn.length;M++){const Q=tn[M],H=Q[td];if(Vf(Q,fL),H&&H.hasAnimation)continue;let Z=[];if(T.size){let ge=T.get(Q);ge&&ge.length&&Z.push(...ge);let Se=this.driver.query(Q,N1,!0);for(let Ne=0;Ne<Se.length;Ne++){let nt=T.get(Se[Ne]);nt&&nt.length&&Z.push(...nt)}}const le=Z.filter(ge=>!ge.destroyed);le.length?H6(this,Q,le):this.processLeaveNode(Q)}return tn.length=0,S.forEach(M=>{this.players.push(M),M.onDone(()=>{M.destroy();const Q=this.players.indexOf(M);this.players.splice(Q,1)}),M.play()}),S}elementContainsData(t,e){let a=!1;const d=e[td];return d&&d.setForRemoval&&(a=!0),this.playersByElement.has(e)&&(a=!0),this.playersByQueriedElement.has(e)&&(a=!0),this.statesByElement.has(e)&&(a=!0),this._fetchNamespace(t).elementContainsData(e)||a}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,a,d,m){let b=[];if(e){const T=this.playersByQueriedElement.get(t);T&&(b=T)}else{const T=this.playersByElement.get(t);if(T){const N=!m||m==U1;T.forEach(U=>{U.queued||!N&&U.triggerName!=d||b.push(U)})}}return(a||d)&&(b=b.filter(T=>!(a&&a!=T.namespaceId||d&&d!=T.triggerName))),b}_beforeAnimationBuild(t,e,a){const m=e.element,b=e.isRemovalTransition?void 0:t,T=e.isRemovalTransition?void 0:e.triggerName;for(const N of e.timelines){const U=N.element,ne=U!==m,ve=Zl(a,U,[]);this._getPreviousPlayers(U,ne,b,T,e.toState).forEach(Ke=>{const at=Ke.getRealPlayer();at.beforeDestroy&&at.beforeDestroy(),Ke.destroy(),ve.push(Ke)})}uS(m,e.fromStyles)}_buildAnimation(t,e,a,d,m,b){const T=e.triggerName,N=e.element,U=[],ne=new Set,ve=new Set,Qe=e.timelines.map(at=>{const Ot=at.element;ne.add(Ot);const tn=Ot[td];if(tn&&tn.removedBeforeQueried)return new kk(at.duration,at.delay);const an=Ot!==N,Pn=function G6(r){const t=[];return W6(r,t),t}((a.get(Ot)||j6).map(h=>h.getRealPlayer())).filter(h=>!!h.element&&h.element===Ot),n=m.get(Ot),o=b.get(Ot),s=t4(0,this._normalizer,0,at.keyframes,n,o),c=this._buildPlayer(at,s,Pn);if(at.subTimeline&&d&&ve.add(Ot),an){const h=new b4(t,T,Ot);h.setRealPlayer(c),U.push(h)}return c});U.forEach(at=>{Zl(this.playersByQueriedElement,at.element,[]).push(at),at.onDone(()=>function uW(r,t,e){let a=r.get(t);if(a){if(a.length){const d=a.indexOf(e);a.splice(d,1)}0==a.length&&r.delete(t)}return a}(this.playersByQueriedElement,at.element,at))}),ne.forEach(at=>ys(at,E6));const Ke=Qy(Qe);return Ke.onDestroy(()=>{ne.forEach(at=>Vf(at,E6)),bg(N,e.toStyles)}),ve.forEach(at=>{Zl(d,at,[]).push(Ke)}),Ke}_buildPlayer(t,e,a){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,a):new kk(t.duration,t.delay)}}class b4{constructor(t,e,a){this.namespaceId=t,this.triggerName=e,this.element=a,this._player=new kk,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,a)=>{e.forEach(d=>Uf(t,a,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Zl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function DL(r){return r&&1===r.nodeType}function S4(r,t){const e=r.style.display;return r.style.display=t??"none",e}function Q6(r,t,e,a,d){const m=[];e.forEach(N=>m.push(S4(N)));const b=[];a.forEach((N,U)=>{const ne=new Map;N.forEach(ve=>{const Qe=t.computeStyle(U,ve,d);ne.set(ve,Qe),(!Qe||0==Qe.length)&&(U[td]=sW,b.push(U))}),r.set(U,ne)});let T=0;return e.forEach(N=>S4(N,m[T++])),b}function kL(r,t){const e=new Map;if(r.forEach(T=>e.set(T,[])),0==t.length)return e;const d=new Set(t),m=new Map;function b(T){if(!T)return 1;let N=m.get(T);if(N)return N;const U=T.parentNode;return N=e.has(U)?U:d.has(U)?1:b(U),m.set(T,N),N}return t.forEach(T=>{const N=b(T);1!==N&&e.get(N).push(T)}),e}function ys(r,t){r.classList?.add(t)}function Vf(r,t){r.classList?.remove(t)}function H6(r,t,e){Qy(e).onDone(()=>r.processLeaveNode(t))}function W6(r,t){for(let e=0;e<r.length;e++){const a=r[e];a instanceof fj?W6(a.players,t):t.push(a)}}function I4(r,t,e){const a=e.get(r);if(!a)return!1;let d=t.get(r);return d?a.forEach(m=>d.add(m)):t.set(r,a),e.delete(r),!0}class _v{constructor(t,e,a){this.bodyNode=t,this._driver=e,this._normalizer=a,this._triggerCache={},this.onRemovalComplete=(d,m)=>{},this._transitionEngine=new cW(t,e,a),this._timelineEngine=new kp(t,e,a),this._transitionEngine.onRemovalComplete=(d,m)=>this.onRemovalComplete(d,m)}registerTrigger(t,e,a,d,m){const b=t+"-"+d;let T=this._triggerCache[b];if(!T){const N=[],ne=AL(this._driver,m,N,[]);if(N.length)throw function h6(r,t){return new vn(3404,!1)}();T=function Ky(r,t,e){return new L6(r,t,e)}(d,ne,this._normalizer),this._triggerCache[b]=T}this._transitionEngine.registerTrigger(e,d,T)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,a,d){this._transitionEngine.insertNode(t,e,a,d)}onRemove(t,e,a,d){this._transitionEngine.removeNode(t,e,d||!1,a)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,a,d){if("@"==a.charAt(0)){const[m,b]=v6(a);this._timelineEngine.command(m,e,b,d)}else this._transitionEngine.trigger(t,e,a,d)}listen(t,e,a,d,m){if("@"==a.charAt(0)){const[b,T]=v6(a);return this._timelineEngine.listen(b,e,T,m)}return this._transitionEngine.listen(t,e,a,d,m)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let K6=(()=>{class r{constructor(e,a,d){this._element=e,this._startStyles=a,this._endStyles=d,this._state=0;let m=r.initialStylesByElement.get(e);m||r.initialStylesByElement.set(e,m=new Map),this._initialStyles=m}start(){this._state<1&&(this._startStyles&&bg(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bg(this._element,this._initialStyles),this._endStyles&&(bg(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(uS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(uS(this._element,this._endStyles),this._endStyles=null),bg(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Pp(r){let t=null;return r.forEach((e,a)=>{(function hW(r){return"display"===r||"position"===r})(a)&&(t=t||new Map,t.set(a,e))}),t}class T4{constructor(t,e,a,d){this.element=t,this.keyframes=e,this.options=a,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=a.duration,this._delay=a.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(a=>{e.push(Object.fromEntries(a))}),e}_triggerWebAnimation(t,e,a){return t.animate(this._convertKeyframesToObject(e),a)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((a,d)=>{"offset"!==d&&t.set(d,this._finished?a:l4(this.element,d))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(a=>a()),e.length=0}}class z6{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return i4(t,e)}getParentElement(t){return P1(t)}query(t,e,a){return o4(t,e,a)}computeStyle(t,e,a){return window.getComputedStyle(t)[e]}animate(t,e,a,d,m,b=[]){const N={duration:a,delay:d,fill:0==d?"both":"forwards"};m&&(N.easing=m);const U=new Map,ne=b.filter(Ke=>Ke instanceof T4);(function L1(r,t){return 0===r||0===t})(a,d)&&ne.forEach(Ke=>{Ke.currentSnapshot.forEach((at,Ot)=>U.set(Ot,at))});let ve=function mv(r){return r.length?r[0]instanceof Map?r:r.map(t=>b6(t)):[]}(e).map(Ke=>gv(Ke));ve=function vL(r,t,e){if(e.size&&t.length){let a=t[0],d=[];if(e.forEach((m,b)=>{a.has(b)||d.push(b),a.set(b,m)}),d.length)for(let m=1;m<t.length;m++){let b=t[m];d.forEach(T=>b.set(T,l4(r,T)))}}return t}(t,ve,U);const Qe=function w4(r,t){let e=null,a=null;return Array.isArray(t)&&t.length?(e=Pp(t[0]),t.length>1&&(a=Pp(t[t.length-1]))):t instanceof Map&&(e=Pp(t)),e||a?new K6(r,e,a):null}(t,ve);return new T4(t,ve,N,Qe)}}let R4=(()=>{class r extends dj{constructor(e,a){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(a.body,{id:"0",encapsulation:Ja.None,styles:[],data:{animation:[]}})}build(e){const a=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(e)?hj(e):e;return yi(this._renderer,null,a,"register",[d]),new O4(a,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(rn(yd),rn(oi))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class O4 extends FQ{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Sg(this._id,t,e||{},this._renderer)}}class Sg{constructor(t,e,a,d){this.id=t,this.element=e,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",a)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return yi(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yi(r,t,e,a,d){return r.setProperty(t,`@@${e}:${a}`,d)}const D4="@.disabled";let Y6=(()=>{class r{constructor(e,a,d){this.delegate=e,this.engine=a,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),a.onRemovalComplete=(m,b)=>{const T=b?.parentNode(m);T&&b.removeChild(T,m)}}createRenderer(e,a){const m=this.delegate.createRenderer(e,a);if(!(e&&a&&a.data&&a.data.animation)){let ne=this._rendererCache.get(m);return ne||(ne=new q6("",m,this.engine,()=>this._rendererCache.delete(m)),this._rendererCache.set(m,ne)),ne}const b=a.id,T=a.id+"-"+this._currentId;this._currentId++,this.engine.register(T,e);const N=ne=>{Array.isArray(ne)?ne.forEach(N):this.engine.registerTrigger(b,T,e,ne.name,ne)};return a.data.animation.forEach(N),new pW(this,T,m,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,a,d){e>=0&&e<this._microtaskId?this._zone.run(()=>a(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(m=>{const[b,T]=m;b(T)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(rn(yd),rn(_v),rn(zr))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})();class q6{constructor(t,e,a,d){this.namespaceId=t,this.delegate=e,this.engine=a,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?m=>e.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,a,d=!0){this.delegate.insertBefore(t,e,a),this.engine.onInsert(this.namespaceId,e,t,d)}removeChild(t,e,a){this.engine.onRemove(this.namespaceId,e,this.delegate,a)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,a,d){this.delegate.setAttribute(t,e,a,d)}removeAttribute(t,e,a){this.delegate.removeAttribute(t,e,a)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,a,d){this.delegate.setStyle(t,e,a,d)}removeStyle(t,e,a){this.delegate.removeStyle(t,e,a)}setProperty(t,e,a){"@"==e.charAt(0)&&e==D4?this.disableAnimations(t,!!a):this.delegate.setProperty(t,e,a)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,a){return this.delegate.listen(t,e,a)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class pW extends q6{constructor(t,e,a,d,m){super(e,a,d,m),this.factory=t,this.namespaceId=e}setProperty(t,e,a){"@"==e.charAt(0)?"."==e.charAt(1)&&e==D4?this.disableAnimations(t,a=void 0===a||!!a):this.engine.process(this.namespaceId,t,e.slice(1),a):this.delegate.setProperty(t,e,a)}listen(t,e,a){if("@"==e.charAt(0)){const d=function J6(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let m=e.slice(1),b="";return"@"!=m.charAt(0)&&([m,b]=function fW(r){const t=r.indexOf(".");return[r.substring(0,t),r.slice(t+1)]}(m)),this.engine.listen(this.namespaceId,d,m,b,T=>{this.factory.scheduleListenerCallback(T._data||-1,a,T)})}return this.delegate.listen(t,e,a)}}const k4=[{provide:dj,useClass:R4},{provide:TL,useFactory:function $6(){return new RL}},{provide:_v,useClass:(()=>{class r extends _v{constructor(e,a,d,m){super(e.body,a,d)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(rn(oi),rn(cS),rn(TL),rn($m))},r.\u0275prov=vr({token:r,factory:r.\u0275fac}),r})()},{provide:yd,useFactory:function X6(r,t,e){return new Y6(r,t,e)},deps:[is,_v,zr]}],NL=[{provide:cS,useFactory:()=>new z6},{provide:$s,useValue:"BrowserAnimations"},...k4],P4=[{provide:cS,useClass:s4},{provide:$s,useValue:"NoopAnimations"},...k4];let Z6=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?P4:NL}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Li({type:r}),r.\u0275inj=xi({providers:NL,imports:[kc]}),r})();class v2{static#e=this.\u0275fac=function(e){return new(e||v2)};static#t=this.\u0275mod=Li({type:v2,bootstrap:[k1]});static#n=this.\u0275inj=xi({imports:[kc,Z6,Vd,ZV,GM,l9,bH,hv,FH,Ou,tU,XH,T1,N8,_G,b1]})}DF().bootstrapModule(v2).catch(r=>console.error(r))},1648:function(Oe,Me,q){Oe=q.nmd(Oe);var F=q(7156).default;!function(K){"use strict";function ie(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),u.push.apply(u,p)}return u}function G(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?ie(Object(u),!0).forEach(function(p){B(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):ie(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function V(i){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(i)}function k(i,l){if(!(i instanceof l))throw new TypeError("Cannot call a class as a function")}function O(i,l){for(var u=0;u<l.length;u++){var p=l[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,ae(p.key),p)}}function x(i,l,u){return l&&O(i.prototype,l),u&&O(i,u),Object.defineProperty(i,"prototype",{writable:!1}),i}function B(i,l,u){return(l=ae(l))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i}function $(i,l){if(null==i)return{};var u,p,v=function(C,w){if(null==C)return{};var D,P,L={},W=Object.keys(C);for(P=0;P<W.length;P++)w.indexOf(D=W[P])>=0||(L[D]=C[D]);return L}(i,l);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);for(p=0;p<y.length;p++)l.indexOf(u=y[p])>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(v[u]=i[u])}return v}function ae(i){var l=function(u,p){if("object"!=typeof u||null===u)return u;var v=u[Symbol.toPrimitive];if(void 0!==v){var y=v.call(u,p);if("object"!=typeof y)return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(i,"string");return"symbol"==typeof l?l:String(l)}var de=function(i,l){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var v in p)p.hasOwnProperty(v)&&(u[v]=p[v])})(i,l)};function he(i,l){function u(){this.constructor=i}de(i,l),i.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}function X(i){return"function"==typeof i}var Y=!1,z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){if(i){var l=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+l.stack)}else Y&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Y=i},get useDeprecatedSynchronousErrorHandling(){return Y}};function ce(i){setTimeout(function(){throw i},0)}var be={closed:!0,next:function(i){},error:function(i){if(z.useDeprecatedSynchronousErrorHandling)throw i;ce(i)},complete:function(){}},ke=Array.isArray||function(i){return i&&"number"==typeof i.length};function me(i){return null!==i&&"object"==typeof i}var Ce=function(){function i(l){return Error.call(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map(function(u,p){return p+1+") "+u.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l,this}return i.prototype=Object.create(Error.prototype),i}(),_e=function(){function i(l){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}return i.prototype.unsubscribe=function(){var l;if(!this.closed){var u=this,p=u._parentOrParents,v=u._ctorUnsubscribe,y=u._unsubscribe,C=u._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,p instanceof i)p.remove(this);else if(null!==p)for(var w=0;w<p.length;++w)p[w].remove(this);if(X(y)){v&&(this._unsubscribe=void 0);try{y.call(this)}catch(L){l=L instanceof Ce?ue(L.errors):[L]}}if(ke(C)){w=-1;for(var D=C.length;++w<D;){var P=C[w];if(me(P))try{P.unsubscribe()}catch(L){l=l||[],L instanceof Ce?l=l.concat(ue(L.errors)):l.push(L)}}}if(l)throw new Ce(l)}},i.prototype.add=function(l){var u=l;if(!l)return i.EMPTY;switch(typeof l){case"function":u=new i(l);case"object":if(u===this||u.closed||"function"!=typeof u.unsubscribe)return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof i)){var p=u;(u=new i)._subscriptions=[p]}break;default:throw new Error("unrecognized teardown "+l+" added to Subscription.")}var v=u._parentOrParents;if(null===v)u._parentOrParents=this;else if(v instanceof i){if(v===this)return u;u._parentOrParents=[v,this]}else{if(-1!==v.indexOf(this))return u;v.push(this)}var y=this._subscriptions;return null===y?this._subscriptions=[u]:y.push(u),u},i.prototype.remove=function(l){var u=this._subscriptions;if(u){var p=u.indexOf(l);-1!==p&&u.splice(p,1)}},i.EMPTY=((l=new i).closed=!0,l),i;var l}();function ue(i){return i.reduce(function(l,u){return l.concat(u instanceof Ce?u.errors:u)},[])}var fe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),we=function(i){function l(u,p,v){var y=i.call(this)||this;switch(y.syncErrorValue=null,y.syncErrorThrown=!1,y.syncErrorThrowable=!1,y.isStopped=!1,arguments.length){case 0:y.destination=be;break;case 1:if(!u){y.destination=be;break}if("object"==typeof u){u instanceof l?(y.syncErrorThrowable=u.syncErrorThrowable,y.destination=u,u.add(y)):(y.syncErrorThrowable=!0,y.destination=new He(y,u));break}default:y.syncErrorThrowable=!0,y.destination=new He(y,u,p,v)}return y}return he(l,i),l.prototype[fe]=function(){return this},l.create=function(u,p,v){var y=new l(u,p,v);return y.syncErrorThrowable=!1,y},l.prototype.next=function(u){this.isStopped||this._next(u)},l.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},l.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},l.prototype._next=function(u){this.destination.next(u)},l.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},l.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},l}(_e),He=function(i){function l(u,p,v,y){var C,w=i.call(this)||this;w._parentSubscriber=u;var D=w;return X(p)?C=p:p&&(C=p.next,v=p.error,y=p.complete,p!==be&&(X((D=Object.create(p)).unsubscribe)&&w.add(D.unsubscribe.bind(D)),D.unsubscribe=w.unsubscribe.bind(w))),w._context=D,w._next=C,w._error=v,w._complete=y,w}return he(l,i),l.prototype.next=function(u){if(!this.isStopped&&this._next){var p=this._parentSubscriber;z.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable?this.__tryOrSetError(p,this._next,u)&&this.unsubscribe():this.__tryOrUnsub(this._next,u)}},l.prototype.error=function(u){if(!this.isStopped){var p=this._parentSubscriber,v=z.useDeprecatedSynchronousErrorHandling;if(this._error)v&&p.syncErrorThrowable?(this.__tryOrSetError(p,this._error,u),this.unsubscribe()):(this.__tryOrUnsub(this._error,u),this.unsubscribe());else if(p.syncErrorThrowable)v?(p.syncErrorValue=u,p.syncErrorThrown=!0):ce(u),this.unsubscribe();else{if(this.unsubscribe(),v)throw u;ce(u)}}},l.prototype.complete=function(){var u=this;if(!this.isStopped){var p=this._parentSubscriber;if(this._complete){var v=function(){return u._complete.call(u._context)};z.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable?(this.__tryOrSetError(p,v),this.unsubscribe()):(this.__tryOrUnsub(v),this.unsubscribe())}else this.unsubscribe()}},l.prototype.__tryOrUnsub=function(u,p){try{u.call(this._context,p)}catch(v){if(this.unsubscribe(),z.useDeprecatedSynchronousErrorHandling)throw v;ce(v)}},l.prototype.__tryOrSetError=function(u,p,v){if(!z.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{p.call(this._context,v)}catch(y){return z.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=y,u.syncErrorThrown=!0,!0):(ce(y),!0)}return!1},l.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},l}(we),Ue="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(i){return i}function Ze(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return Xe(i)}function Xe(i){return 0===i.length?Ge:1===i.length?i[0]:function(l){return i.reduce(function(u,p){return p(u)},l)}}var Be=function(){function i(l){this._isScalar=!1,l&&(this._subscribe=l)}return i.prototype.lift=function(l){var u=new i;return u.source=this,u.operator=l,u},i.prototype.subscribe=function(l,u,p){var v=this.operator,y=function(C,w,D){if(C){if(C instanceof we)return C;if(C[fe])return C[fe]()}return C||w||D?new we(C,w,D):new we(be)}(l,u,p);if(y.add(v?v.call(y,this.source):this.source||z.useDeprecatedSynchronousErrorHandling&&!y.syncErrorThrowable?this._subscribe(y):this._trySubscribe(y)),z.useDeprecatedSynchronousErrorHandling&&y.syncErrorThrowable&&(y.syncErrorThrowable=!1,y.syncErrorThrown))throw y.syncErrorValue;return y},i.prototype._trySubscribe=function(l){try{return this._subscribe(l)}catch(u){z.useDeprecatedSynchronousErrorHandling&&(l.syncErrorThrown=!0,l.syncErrorValue=u),function(p){for(;p;){var C=p.destination;if(p.closed||p.isStopped)return!1;p=C&&C instanceof we?C:null}return!0}(l)?l.error(u):console.warn(u)}},i.prototype.forEach=function(l,u){var p=this;return new(u=jt(u))(function(v,y){var C;C=p.subscribe(function(w){try{l(w)}catch(D){y(D),C&&C.unsubscribe()}},y,v)})},i.prototype._subscribe=function(l){var u=this.source;return u&&u.subscribe(l)},i.prototype[Ue]=function(){return this},i.prototype.pipe=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return 0===l.length?this:Xe(l)(this)},i.prototype.toPromise=function(l){var u=this;return new(l=jt(l))(function(p,v){var y;u.subscribe(function(C){return y=C},function(C){return v(C)},function(){return p(y)})})},i.create=function(l){return new i(l)},i}();function jt(i){if(i||(i=Promise),!i)throw new Error("no Promise impl found");return i}var Kt=function(){function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i}(),St=function(i){function l(u,p){var v=i.call(this)||this;return v.subject=u,v.subscriber=p,v.closed=!1,v}return he(l,i),l.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,p=u.observers;if(this.subject=null,p&&0!==p.length&&!u.isStopped&&!u.closed){var v=p.indexOf(this.subscriber);-1!==v&&p.splice(v,1)}}},l}(_e),Ye=function(i){function l(u){var p=i.call(this,u)||this;return p.destination=u,p}return he(l,i),l}(we),je=function(i){function l(){var u=i.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return he(l,i),l.prototype[fe]=function(){return new Ye(this)},l.prototype.lift=function(u){var p=new ze(this,this);return p.operator=u,p},l.prototype.next=function(u){if(this.closed)throw new Kt;if(!this.isStopped)for(var p=this.observers,v=p.length,y=p.slice(),C=0;C<v;C++)y[C].next(u)},l.prototype.error=function(u){if(this.closed)throw new Kt;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var p=this.observers,v=p.length,y=p.slice(),C=0;C<v;C++)y[C].error(u);this.observers.length=0},l.prototype.complete=function(){if(this.closed)throw new Kt;this.isStopped=!0;for(var u=this.observers,p=u.length,v=u.slice(),y=0;y<p;y++)v[y].complete();this.observers.length=0},l.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},l.prototype._trySubscribe=function(u){if(this.closed)throw new Kt;return i.prototype._trySubscribe.call(this,u)},l.prototype._subscribe=function(u){if(this.closed)throw new Kt;return this.hasError?(u.error(this.thrownError),_e.EMPTY):this.isStopped?(u.complete(),_e.EMPTY):(this.observers.push(u),new St(this,u))},l.prototype.asObservable=function(){var u=new Be;return u.source=this,u},l.create=function(u,p){return new ze(u,p)},l}(Be),ze=function(i){function l(u,p){var v=i.call(this)||this;return v.destination=u,v.source=p,v}return he(l,i),l.prototype.next=function(u){var p=this.destination;p&&p.next&&p.next(u)},l.prototype.error=function(u){var p=this.destination;p&&p.error&&this.destination.error(u)},l.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},l.prototype._subscribe=function(u){return this.source?this.source.subscribe(u):_e.EMPTY},l}(je),Pe=function(i){function l(u){var p=i.call(this)||this;return p._value=u,p}return he(l,i),Object.defineProperty(l.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(u){var p=i.prototype._subscribe.call(this,u);return p&&!p.closed&&u.next(this._value),p},l.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Kt;return this._value},l.prototype.next=function(u){i.prototype.next.call(this,this._value=u)},l}(je),rt=function(i){function l(u,p){var v=i.call(this,u,p)||this;return v.scheduler=u,v.work=p,v.pending=!1,v}return he(l,i),l.prototype.schedule=function(u,p){if(void 0===p&&(p=0),this.closed)return this;this.state=u;var v=this.id,y=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(y,v,p)),this.pending=!0,this.delay=p,this.id=this.id||this.requestAsyncId(y,this.id,p),this},l.prototype.requestAsyncId=function(u,p,v){return void 0===v&&(v=0),setInterval(u.flush.bind(u,this),v)},l.prototype.recycleAsyncId=function(u,p,v){if(void 0===v&&(v=0),null!==v&&this.delay===v&&!1===this.pending)return p;clearInterval(p)},l.prototype.execute=function(u,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var v=this._execute(u,p);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(u,p){var v=!1,y=void 0;try{this.work(u)}catch(C){v=!0,y=!!C&&C||new Error(C)}if(v)return this.unsubscribe(),y},l.prototype._unsubscribe=function(){var u=this.id,p=this.scheduler,v=p.actions,y=v.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==y&&v.splice(y,1),null!=u&&(this.id=this.recycleAsyncId(p,u,null)),this.delay=null},l}(function(i){function l(u,p){return i.call(this)||this}return he(l,i),l.prototype.schedule=function(u,p){return this},l}(_e)),Ut=function(i){function l(u,p){var v=i.call(this,u,p)||this;return v.scheduler=u,v.work=p,v}return he(l,i),l.prototype.schedule=function(u,p){return void 0===p&&(p=0),p>0?i.prototype.schedule.call(this,u,p):(this.delay=p,this.state=u,this.scheduler.flush(this),this)},l.prototype.execute=function(u,p){return p>0||this.closed?i.prototype.execute.call(this,u,p):this._execute(u,p)},l.prototype.requestAsyncId=function(u,p,v){return void 0===v&&(v=0),null!==v&&v>0||null===v&&this.delay>0?i.prototype.requestAsyncId.call(this,u,p,v):u.flush(this)},l}(rt),$t=function(){function i(l,u){void 0===u&&(u=i.now),this.SchedulerAction=l,this.now=u}return i.prototype.schedule=function(l,u,p){return void 0===u&&(u=0),new this.SchedulerAction(this,l).schedule(p,u)},i.now=function(){return Date.now()},i}(),Mt=function(i){function l(u,p){void 0===p&&(p=$t.now);var v=i.call(this,u,function(){return l.delegate&&l.delegate!==v?l.delegate.now():p()})||this;return v.actions=[],v.active=!1,v.scheduled=void 0,v}return he(l,i),l.prototype.schedule=function(u,p,v){return void 0===p&&(p=0),l.delegate&&l.delegate!==this?l.delegate.schedule(u,p,v):i.prototype.schedule.call(this,u,p,v)},l.prototype.flush=function(u){var p=this.actions;if(this.active)p.push(u);else{var v;this.active=!0;do{if(v=u.execute(u.state,u.delay))break}while(u=p.shift());if(this.active=!1,v){for(;u=p.shift();)u.unsubscribe();throw v}}},l}($t),en=new(function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l}(Mt))(Ut),Zn=en,qt=new Be(function(i){return i.complete()});function Mr(i){return i?(l=i,new Be(function(u){return l.schedule(function(){return u.complete()})})):qt;var l}function xr(i){return i&&"function"==typeof i.schedule}var wr,i,Ir=function(i){return function(l){for(var u=0,p=i.length;u<p&&!l.closed;u++)l.next(i[u]);l.complete()}};function Cr(i,l){return new Be(function(u){var p=new _e,v=0;return p.add(l.schedule(function(){v!==i.length?(u.next(i[v++]),u.closed||p.add(this.schedule())):u.complete()})),p})}function Ui(i,l){return l?Cr(i,l):new Be(Ir(i))}function or(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=i[i.length-1];return xr(u)?(i.pop(),Cr(i,u)):Ui(i)}function Ki(i,l){return new Be(l?function(u){return l.schedule(ya,0,{error:i,subscriber:u})}:function(u){return u.error(i)})}function ya(i){i.subscriber.error(i.error)}(i=wr||(wr={})).NEXT="N",i.ERROR="E",i.COMPLETE="C";var Ct=function(){function i(l,u,p){this.kind=l,this.value=u,this.error=p,this.hasValue="N"===l}return i.prototype.observe=function(l){switch(this.kind){case"N":return l.next&&l.next(this.value);case"E":return l.error&&l.error(this.error);case"C":return l.complete&&l.complete()}},i.prototype.do=function(l,u,p){switch(this.kind){case"N":return l&&l(this.value);case"E":return u&&u(this.error);case"C":return p&&p()}},i.prototype.accept=function(l,u,p){return l&&"function"==typeof l.next?this.observe(l):this.do(l,u,p)},i.prototype.toObservable=function(){switch(this.kind){case"N":return or(this.value);case"E":return Ki(this.error);case"C":return Mr()}throw new Error("unexpected notification kind value")},i.createNext=function(l){return void 0!==l?new i("N",l):i.undefinedValueNotification},i.createError=function(l){return new i("E",void 0,l)},i.createComplete=function(){return i.completeNotification},i.completeNotification=new i("C"),i.undefinedValueNotification=new i("N",void 0),i}();function Gt(i,l){return void 0===l&&(l=0),function(u){return u.lift(new on(i,l))}}var on=function(){function i(l,u){void 0===u&&(u=0),this.scheduler=l,this.delay=u}return i.prototype.call=function(l,u){return u.subscribe(new qe(l,this.scheduler,this.delay))},i}(),qe=function(i){function l(u,p,v){void 0===v&&(v=0);var y=i.call(this,u)||this;return y.scheduler=p,y.delay=v,y}return he(l,i),l.dispatch=function(u){u.notification.observe(u.destination),this.unsubscribe()},l.prototype.scheduleMessage=function(u){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new Fe(u,this.destination)))},l.prototype._next=function(u){this.scheduleMessage(Ct.createNext(u))},l.prototype._error=function(u){this.scheduleMessage(Ct.createError(u)),this.unsubscribe()},l.prototype._complete=function(){this.scheduleMessage(Ct.createComplete()),this.unsubscribe()},l}(we),Fe=function(i,l){this.notification=i,this.destination=l},ut=function(i){function l(u,p,v){void 0===u&&(u=Number.POSITIVE_INFINITY),void 0===p&&(p=Number.POSITIVE_INFINITY);var y=i.call(this)||this;return y.scheduler=v,y._events=[],y._infiniteTimeWindow=!1,y._bufferSize=u<1?1:u,y._windowTime=p<1?1:p,p===Number.POSITIVE_INFINITY?(y._infiniteTimeWindow=!0,y.next=y.nextInfiniteTimeWindow):y.next=y.nextTimeWindow,y}return he(l,i),l.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var p=this._events;p.push(u),p.length>this._bufferSize&&p.shift()}i.prototype.next.call(this,u)},l.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new Ln(this._getNow(),u)),this._trimBufferThenGetEvents()),i.prototype.next.call(this,u)},l.prototype._subscribe=function(u){var p,v=this._infiniteTimeWindow,y=v?this._events:this._trimBufferThenGetEvents(),C=this.scheduler,w=y.length;if(this.closed)throw new Kt;if(this.isStopped||this.hasError?p=_e.EMPTY:(this.observers.push(u),p=new St(this,u)),C&&u.add(u=new qe(u,C)),v)for(var D=0;D<w&&!u.closed;D++)u.next(y[D]);else for(D=0;D<w&&!u.closed;D++)u.next(y[D].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),p},l.prototype._getNow=function(){return(this.scheduler||Zn).now()},l.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),p=this._bufferSize,v=this._windowTime,y=this._events,C=y.length,w=0;w<C&&!(u-y[w].time<v);)w++;return C>p&&(w=Math.max(w,C-p)),w>0&&y.splice(0,w),y},l}(je),Ln=function(i,l){this.time=i,this.value=l},mn=1,no=Promise.resolve(),jo={};function ta(i){return i in jo&&(delete jo[i],!0)}var Io=function(i){function l(u,p){var v=i.call(this,u,p)||this;return v.scheduler=u,v.work=p,v}return he(l,i),l.prototype.requestAsyncId=function(u,p,v){return void 0===v&&(v=0),null!==v&&v>0?i.prototype.requestAsyncId.call(this,u,p,v):(u.actions.push(this),u.scheduled||(u.scheduled=(y=u.flush.bind(u,null),C=mn++,jo[C]=!0,no.then(function(){return ta(C)&&y()}),C)));var y,C},l.prototype.recycleAsyncId=function(u,p,v){if(void 0===v&&(v=0),null!==v&&v>0||null===v&&this.delay>0)return i.prototype.recycleAsyncId.call(this,u,p,v);0===u.actions.length&&(ta(p),u.scheduled=void 0)},l}(rt),Ps=new(function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var p,v=this.actions,y=-1,C=v.length;u=u||v.shift();do{if(p=u.execute(u.state,u.delay))break}while(++y<C&&(u=v.shift()));if(this.active=!1,p){for(;++y<C&&(u=v.shift());)u.unsubscribe();throw p}},l}(Mt))(Io),wo=Ps,nd=new Mt(rt),Vn=nd;function fn(){}var $e=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),ft=function(){function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return i.prototype=Object.create(Error.prototype),i}();function _t(i,l){return function(u){if("function"!=typeof i)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return u.lift(new sn(i,l))}}var sn=function(){function i(l,u){this.project=l,this.thisArg=u}return i.prototype.call=function(l,u){return u.subscribe(new _n(l,this.project,this.thisArg))},i}(),_n=function(i){function l(u,p,v){var y=i.call(this,u)||this;return y.project=p,y.count=0,y.thisArg=v||y,y}return he(l,i),l.prototype._next=function(u){var p;try{p=this.project.call(this.thisArg,u,this.count++)}catch(v){return void this.destination.error(v)}this.destination.next(p)},l}(we),gi=function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.notifyNext=function(u,p,v,y,C){this.destination.next(p)},l.prototype.notifyError=function(u,p){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()},l}(we),To=function(i){function l(u,p,v){var y=i.call(this)||this;return y.parent=u,y.outerValue=p,y.outerIndex=v,y.index=0,y}return he(l,i),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},l.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},l}(we),bs="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Gs=function(i){return i&&"number"==typeof i.length&&"function"!=typeof i};function po(i){return!!i&&"function"!=typeof i.subscribe&&"function"==typeof i.then}var ao=function(i){if(i&&"function"==typeof i[Ue])return p=i,function(y){var C=p[Ue]();if("function"!=typeof C.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return C.subscribe(y)};if(Gs(i))return Ir(i);if(po(i))return u=i,function(y){return u.then(function(C){y.closed||(y.next(C),y.complete())},function(C){return y.error(C)}).then(null,ce),y};if(i&&"function"==typeof i[bs])return l=i,function(y){for(var C=l[bs]();;){var w=void 0;try{w=C.next()}catch(D){return y.error(D),y}if(w.done){y.complete();break}if(y.next(w.value),y.closed)break}return"function"==typeof C.return&&y.add(function(){C.return&&C.return()}),y};var l,u,p,v=me(i)?"an invalid object":"'"+i+"'";throw new TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Tr(i,l,u,p,v){if(void 0===v&&(v=new To(i,u,p)),!v.closed)return l instanceof Be?l.subscribe(v):ao(l)(v)}function Mn(i,l){return l?function(u,p){if(null!=u){if((v=u)&&"function"==typeof v[Ue])return function(v,y){return new Be(function(C){var w=new _e;return w.add(y.schedule(function(){var D=v[Ue]();w.add(D.subscribe({next:function(P){w.add(y.schedule(function(){return C.next(P)}))},error:function(P){w.add(y.schedule(function(){return C.error(P)}))},complete:function(){w.add(y.schedule(function(){return C.complete()}))}}))})),w})}(u,p);if(po(u))return function(v,y){return new Be(function(C){var w=new _e;return w.add(y.schedule(function(){return v.then(function(D){w.add(y.schedule(function(){C.next(D),w.add(y.schedule(function(){return C.complete()}))}))},function(D){w.add(y.schedule(function(){return C.error(D)}))})})),w})}(u,p);if(Gs(u))return Cr(u,p);if(function(v){return v&&"function"==typeof v[bs]}(u)||"string"==typeof u)return function(v,y){if(!v)throw new Error("Iterable cannot be null");return new Be(function(C){var w,D=new _e;return D.add(function(){w&&"function"==typeof w.return&&w.return()}),D.add(y.schedule(function(){w=v[bs](),D.add(y.schedule(function(){if(!C.closed){var P,L;try{var W=w.next();P=W.value,L=W.done}catch(re){return void C.error(re)}L?C.complete():(C.next(P),this.schedule())}}))})),D})}(u,p)}var v;throw new TypeError((null!==u&&typeof u||u)+" is not observable")}(i,l):i instanceof Be?i:new Be(ao(i))}var ru=function(i){function l(u){var p=i.call(this)||this;return p.parent=u,p}return he(l,i),l.prototype._next=function(u){this.parent.notifyNext(u)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},l}(we);!function(i){function l(u,p,v){var y=i.call(this)||this;return y.parent=u,y.outerValue=p,y.outerIndex=v,y}he(l,i),l.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this)},l.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},l.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(we);var ku=function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return he(l,i),l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(){this.destination.complete()},l}(we);function rd(i,l){if(!l.closed){if(i instanceof Be)return i.subscribe(l);var u;try{u=ao(i)(l)}catch(p){l.error(p)}return u}}function $n(i,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?function(p){return p.pipe($n(function(v,y){return Mn(i(v,y)).pipe(_t(function(C,w){return l(v,C,y,w)}))},u))}:("number"==typeof l&&(u=l),function(p){return p.lift(new N4(i,u))})}!function(i){function l(){return null!==i&&i.apply(this,arguments)||this}he(l,i),l.prototype.notifyNext=function(u,p,v,y){this.destination.next(p)},l.prototype.notifyError=function(u){this.destination.error(u)},l.prototype.notifyComplete=function(u){this.destination.complete()}}(we);var N4=function(){function i(l,u){void 0===u&&(u=Number.POSITIVE_INFINITY),this.project=l,this.concurrent=u}return i.prototype.call=function(l,u){return u.subscribe(new Ac(l,this.project,this.concurrent))},i}(),Ac=function(i){function l(u,p,v){void 0===v&&(v=Number.POSITIVE_INFINITY);var y=i.call(this,u)||this;return y.project=p,y.concurrent=v,y.hasCompleted=!1,y.buffer=[],y.active=0,y.index=0,y}return he(l,i),l.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},l.prototype._tryNext=function(u){var p,v=this.index++;try{p=this.project(u,v)}catch(y){return void this.destination.error(y)}this.active++,this._innerSub(p)},l.prototype._innerSub=function(u){var p=new ru(this),v=this.destination;v.add(p);var y=rd(u,p);y!==p&&v.add(y)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(u){this.destination.next(u)},l.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},l}(ku);function Q1(i){return void 0===i&&(i=Number.POSITIVE_INFINITY),$n(Ge,i)}function H1(){return Q1(1)}function Yy(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return H1()(or.apply(void 0,i))}function Cg(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(1===i.length){var u=i[0];if(ke(u))return vv(u,null);if(me(u)&&Object.getPrototypeOf(u)===Object.prototype){var p=Object.keys(u);return vv(p.map(function(y){return u[y]}),p)}}if("function"==typeof i[i.length-1]){var v=i.pop();return vv(i=1===i.length&&ke(i[0])?i[0]:i,null).pipe(_t(function(y){return v.apply(void 0,y)}))}return vv(i,null)}function vv(i,l){return new Be(function(u){var p=i.length;if(0!==p)for(var v=new Array(p),y=0,C=0,w=function(P){var L=Mn(i[P]),W=!1;u.add(L.subscribe({next:function(re){W||(W=!0,C++),v[P]=re},error:function(re){return u.error(re)},complete:function(){++y!==p&&W||(C===p&&u.next(l?l.reduce(function(re,ee,te){return re[ee]=v[te],re},{}):v),u.complete())}}))},D=0;D<p;D++)w(D);else u.complete()})}function qa(i,l,u,p){return X(u)&&(p=u,u=void 0),p?qa(i,l,u).pipe(_t(function(v){return ke(v)?p.apply(void 0,v):p(v)})):new Be(function(v){G1(i,l,function(y){v.next(arguments.length>1?Array.prototype.slice.call(arguments):y)},v,u)})}function G1(i,l,u,p,v){var y,W;if((W=i)&&"function"==typeof W.addEventListener&&"function"==typeof W.removeEventListener){var C=i;i.addEventListener(l,u,v),y=function(){return C.removeEventListener(l,u,v)}}else if(function(W){return W&&"function"==typeof W.on&&"function"==typeof W.off}(i)){var w=i;i.on(l,u),y=function(){return w.off(l,u)}}else if(function(W){return W&&"function"==typeof W.addListener&&"function"==typeof W.removeListener}(i)){var D=i;i.addListener(l,u),y=function(){return D.removeListener(l,u)}}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(var P=0,L=i.length;P<L;P++)G1(i[P],l,u,p,v)}p.add(y)}function Np(i,l,u){return u?Np(i,l).pipe(_t(function(p){return ke(p)?u.apply(void 0,p):u(p)})):new Be(function(p){var v,y=function(){for(var C=[],w=0;w<arguments.length;w++)C[w]=arguments[w];return p.next(1===C.length?C[0]:C)};try{v=i(y)}catch(C){return void p.error(C)}if(X(l))return function(){return l(y,v)}})}function hS(i){return!ke(i)&&i-parseFloat(i)+1>=0}function Ig(i,l){return void 0===i&&(i=0),void 0===l&&(l=Vn),(!hS(i)||i<0)&&(i=0),l&&"function"==typeof l.schedule||(l=Vn),new Be(function(u){return u.add(l.schedule(y2,i,{subscriber:u,counter:0,period:i})),u})}function y2(i){var l=i.subscriber,u=i.counter,p=i.period;l.next(u),this.schedule({subscriber:l,counter:u+1,period:p},p)}function Ss(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=Number.POSITIVE_INFINITY,p=null,v=i[i.length-1];return xr(v)?(p=i.pop(),i.length>1&&"number"==typeof i[i.length-1]&&(u=i.pop())):"number"==typeof v&&(u=i.pop()),null===p&&1===i.length&&i[0]instanceof Be?i[0]:Q1(u)(Ui(i,p))}function wg(i,l){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=i,u.thisArg=l,u}function kn(i,l){return function(u){return u.lift(new Tg(i,l))}}var Tg=function(){function i(l,u){this.predicate=l,this.thisArg=u}return i.prototype.call=function(l,u){return u.subscribe(new Po(l,this.predicate,this.thisArg))},i}(),Po=function(i){function l(u,p,v){var y=i.call(this,u)||this;return y.predicate=p,y.thisArg=v,y.count=0,y}return he(l,i),l.prototype._next=function(u){var p;try{p=this.predicate.call(this.thisArg,u,this.count++)}catch(v){return void this.destination.error(v)}p&&this.destination.next(u)},l}(we);function fl(i,l,u){return[kn(l,u)(new Be(ao(i))),kn(wg(l,u))(new Be(ao(i)))]}function id(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(1===i.length){if(!ke(i[0]))return i[0];i=i[0]}return Ui(i,void 0).lift(new pS)}var pS=function(){function i(){}return i.prototype.call=function(l,u){return u.subscribe(new Qo(l))},i}(),Qo=function(i){function l(u){var p=i.call(this,u)||this;return p.hasFirst=!1,p.observables=[],p.subscriptions=[],p}return he(l,i),l.prototype._next=function(u){this.observables.push(u)},l.prototype._complete=function(){var u=this.observables,p=u.length;if(0===p)this.destination.complete();else{for(var v=0;v<p&&!this.hasFirst;v++){var y=Tr(this,u[v],void 0,v);this.subscriptions&&this.subscriptions.push(y),this.add(y)}this.observables=null}},l.prototype.notifyNext=function(u,p,v){if(!this.hasFirst){this.hasFirst=!0;for(var y=0;y<this.subscriptions.length;y++)if(y!==v){var C=this.subscriptions[y];C.unsubscribe(),this.remove(C)}this.subscriptions=null}this.destination.next(p)},l}(gi);function yc(i,l,u){void 0===i&&(i=0);var p=-1;return hS(l)?p=Number(l)<1?1:Number(l):xr(l)&&(u=l),xr(u)||(u=Vn),new Be(function(v){var y=hS(i)?i:+i-u.now();return u.schedule(Ho,y,{index:0,period:p,subscriber:v})})}function Ho(i){var l=i.index,u=i.period,p=i.subscriber;if(p.next(l),!p.closed){if(-1===u)return p.complete();i.index=l+1,this.schedule(i,u)}}function fS(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),u.push.apply(u,p)}return u}function cn(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?fS(Object(u),!0).forEach(function(p){$o(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):fS(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function $o(i,l,u){return(l="symbol"==typeof(v=function(y,C){if("object"!=typeof y||null===y)return y;var w=y[Symbol.toPrimitive];if(void 0!==w){var D=w.call(y,"string");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(l))?v:String(v))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i;var v}function Dr(i,l){if(null==i)return{};var u,p,v=function(C,w){if(null==C)return{};var D,P,L={},W=Object.keys(C);for(P=0;P<W.length;P++)w.indexOf(D=W[P])>=0||(L[D]=C[D]);return L}(i,l);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);for(p=0;p<y.length;p++)l.indexOf(u=y[p])>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(v[u]=i[u])}return v}function jn(i,l,u,p,v){var y={};return Object.keys(p).forEach(function(C){y[C]=p[C]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=u.slice().reverse().reduce(function(C,w){return w(i,l,C)||C},y),v&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(v):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(i,l,y),y=null),y}function Gf(i){return(Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(i)}function E2(i,l,u){return v=function(y,C){if("object"!==Gf(y)||null===y)return y;var w=y[Symbol.toPrimitive];if(void 0!==w){var D=w.call(y,"string");if("object"!==Gf(D))return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(l),(l="symbol"===Gf(v)?v:String(v))in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i;var v}function qy(i,l){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);l&&(p=p.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),u.push.apply(u,p)}return u}function vn(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?qy(Object(u),!0).forEach(function(p){E2(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):qy(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}function Da(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var ci="function"==typeof Symbol&&Symbol.observable||"@@observable",co=function(){return Math.random().toString(36).substring(7).split("").join(".")},mS={INIT:"@@redux/INIT"+co(),REPLACE:"@@redux/REPLACE"+co(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+co()}};function M4(i){if("object"!=typeof i||null===i)return!1;for(var l=i;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(i)===l}function b2(i,l,u){var p;if("function"==typeof l&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(Da(0));if("function"==typeof l&&void 0===u&&(u=l,l=void 0),void 0!==u){if("function"!=typeof u)throw new Error(Da(1));return u(b2)(i,l)}if("function"!=typeof i)throw new Error(Da(2));var v=i,y=l,C=[],w=C,D=!1;function P(){w===C&&(w=C.slice())}function L(){if(D)throw new Error(Da(3));return y}function W(oe){if("function"!=typeof oe)throw new Error(Da(4));if(D)throw new Error(Da(5));var Ee=!0;return P(),w.push(oe),function(){if(Ee){if(D)throw new Error(Da(6));Ee=!1,P();var Te=w.indexOf(oe);w.splice(Te,1),C=null}}}function re(oe){if(!M4(oe))throw new Error(Da(7));if(void 0===oe.type)throw new Error(Da(8));if(D)throw new Error(Da(9));try{D=!0,y=v(y,oe)}finally{D=!1}for(var Ee=C=w,Te=0;Te<Ee.length;Te++)(0,Ee[Te])();return oe}function ee(oe){if("function"!=typeof oe)throw new Error(Da(10));v=oe,re({type:mS.REPLACE})}function te(){var oe,Ee=W;return(oe={subscribe:function(Te){if("object"!=typeof Te||null===Te)throw new Error(Da(11));function De(){Te.next&&Te.next(L())}return De(),{unsubscribe:Ee(De)}}})[ci]=function(){return this},oe}return re({type:mS.INIT}),(p={dispatch:re,subscribe:W,getState:L,replaceReducer:ee})[ci]=te,p}function Jy(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return 0===l.length?function(p){return p}:1===l.length?l[0]:l.reduce(function(p,v){return function(){return p(v.apply(void 0,arguments))}})}function xc(i){return function(l){var u=new x4(i),p=l.lift(u);return u.caught=p}}var x4=function(){function i(l){this.selector=l}return i.prototype.call=function(l,u){return u.subscribe(new xL(l,this.selector,this.caught))},i}(),xL=function(i){function l(u,p,v){var y=i.call(this,u)||this;return y.selector=p,y.caught=v,y}return he(l,i),l.prototype.error=function(u){if(!this.isStopped){var p=void 0;try{p=this.selector(u,this.caught)}catch(C){return void i.prototype.error.call(this,C)}this._unsubscribeAndRecycle();var v=new ru(this);this.add(v);var y=rd(p,v);y!==v&&this.add(y)}},l}(ku);function S2(i){return i instanceof Date&&!isNaN(+i)}function fo(i,l){void 0===l&&(l=Vn);var u=S2(i)?+i-l.now():Math.abs(i);return function(p){return p.lift(new LL(u,l))}}var LL=function(){function i(l,u){this.delay=l,this.scheduler=u}return i.prototype.call=function(l,u){return u.subscribe(new BL(l,this.delay,this.scheduler))},i}(),BL=function(i){function l(u,p,v){var y=i.call(this,u)||this;return y.delay=p,y.scheduler=v,y.queue=[],y.active=!1,y.errored=!1,y}return he(l,i),l.dispatch=function(u){for(var p=u.source,v=p.queue,y=u.scheduler,C=u.destination;v.length>0&&v[0].time-y.now()<=0;)v.shift().notification.observe(C);if(v.length>0){var w=Math.max(0,v[0].time-y.now());this.schedule(u,w)}else this.unsubscribe(),p.active=!1},l.prototype._schedule=function(u){this.active=!0,this.destination.add(u.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},l.prototype.scheduleNotification=function(u){if(!0!==this.errored){var p=this.scheduler,v=new L4(p.now()+this.delay,u);this.queue.push(v),!1===this.active&&this._schedule(p)}},l.prototype._next=function(u){this.scheduleNotification(Ct.createNext(u))},l.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},l.prototype._complete=function(){this.scheduleNotification(Ct.createComplete()),this.unsubscribe()},l}(we),L4=function(i,l){this.time=i,this.notification=l};function Ns(i){return function(l){return 0===i?Mr():l.lift(new FL(i))}}var FL=function(){function i(l){if(this.total=l,this.total<0)throw new $e}return i.prototype.call=function(l,u){return u.subscribe(new iu(l,this.total))},i}(),iu=function(i){function l(u,p){var v=i.call(this,u)||this;return v.total=p,v.count=0,v}return he(l,i),l.prototype._next=function(u){var p=this.total,v=++this.count;v<=p&&(this.destination.next(u),v===p&&(this.destination.complete(),this.unsubscribe()))},l}(we),UL=function(){function i(l){if(this.total=l,this.total<0)throw new $e}return i.prototype.call=function(l,u){return u.subscribe(new B4(l,this.total))},i}(),B4=function(i){function l(u,p){var v=i.call(this,u)||this;return v.total=p,v.ring=new Array,v.count=0,v}return he(l,i),l.prototype._next=function(u){var p=this.ring,v=this.total,y=this.count++;p.length<v?p.push(u):p[y%v]=u},l.prototype._complete=function(){var u=this.destination,p=this.count;if(p>0)for(var v=this.count>=this.total?this.total:this.count,y=this.ring,C=0;C<v;C++){var w=p++%v;u.next(y[w])}u.complete()},l}(we);function Go(i){return function(l){return l.lift(new ro(i))}}var ro=function(){function i(l){this.value=l}return i.prototype.call=function(l,u){return u.subscribe(new VL(l,this.value))},i}(),VL=function(i){function l(u,p){var v=i.call(this,u)||this;return v.value=p,v}return he(l,i),l.prototype._next=function(u){this.destination.next(this.value)},l}(we);function F4(i,l){var u=!1;return arguments.length>=2&&(u=!0),function(p){return p.lift(new C2(i,l,u))}}var C2=function(){function i(l,u,p){void 0===p&&(p=!1),this.accumulator=l,this.seed=u,this.hasSeed=p}return i.prototype.call=function(l,u){return u.subscribe(new vr(l,this.accumulator,this.seed,this.hasSeed))},i}(),vr=function(i){function l(u,p,v,y){var C=i.call(this,u)||this;return C.accumulator=p,C._seed=v,C.hasSeed=y,C.index=0,C}return he(l,i),Object.defineProperty(l.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),l.prototype._next=function(u){if(this.hasSeed)return this._tryNext(u);this.seed=u,this.destination.next(u)},l.prototype._tryNext=function(u){var p,v=this.index++;try{p=this.accumulator(this.seed,u,v)}catch(y){this.destination.error(y)}this.seed=p,this.destination.next(p)},l}(we);function Qr(i,l,u){return void 0===u&&(u=Number.POSITIVE_INFINITY),"function"==typeof l?$n(function(){return i},l,u):("number"==typeof l&&(u=l),$n(function(){return i},u))}function xi(i){return function(l){return l.lift(new gS(i))}}var gS=function(){function i(l){this.predicate=l}return i.prototype.call=function(l,u){return u.subscribe(new U4(l,this.predicate))},i}(),U4=function(i){function l(u,p){var v=i.call(this,u)||this;return v.predicate=p,v.skipping=!0,v.index=0,v}return he(l,i),l.prototype._next=function(u){var p=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||p.next(u)},l.prototype.tryCallPredicate=function(u){try{var p=this.predicate(u,this.index++);this.skipping=Boolean(p)}catch(v){this.destination.error(v)}},l}(we);function Yh(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var u=i[i.length-1];return xr(u)?(i.pop(),function(p){return Yy(i,p,u)}):function(p){return Yy(i,p)}}var od=function(i){function l(u,p,v){void 0===p&&(p=0),void 0===v&&(v=wo);var y=i.call(this)||this;return y.source=u,y.delayTime=p,y.scheduler=v,(!hS(p)||p<0)&&(y.delayTime=0),v&&"function"==typeof v.schedule||(y.scheduler=wo),y}return he(l,i),l.create=function(u,p,v){return void 0===p&&(p=0),void 0===v&&(v=wo),new l(u,p,v)},l.dispatch=function(u){return this.add(u.source.subscribe(u.subscriber))},l.prototype._subscribe=function(u){return this.scheduler.schedule(l.dispatch,this.delayTime,{source:this.source,subscriber:u})},l}(Be);function eh(i,l){return void 0===l&&(l=0),function(u){return u.lift(new I2(i,l))}}var I2=function(){function i(l,u){this.scheduler=l,this.delay=u}return i.prototype.call=function(l,u){return new od(u,this.delay,this.scheduler).subscribe(l)},i}();function io(i,l){return"function"==typeof l?function(u){return u.pipe(io(function(p,v){return Mn(i(p,v)).pipe(_t(function(y,C){return l(p,y,v,C)}))}))}:function(u){return u.lift(new W1(i))}}var W1=function(){function i(l){this.project=l}return i.prototype.call=function(l,u){return u.subscribe(new $y(l,this.project))},i}(),$y=function(i){function l(u,p){var v=i.call(this,u)||this;return v.project=p,v.index=0,v}return he(l,i),l.prototype._next=function(u){var p,v=this.index++;try{p=this.project(u,v)}catch(y){return void this.destination.error(y)}this._innerSub(p)},l.prototype._innerSub=function(u){var p=this.innerSubscription;p&&p.unsubscribe();var v=new ru(this),y=this.destination;y.add(v),this.innerSubscription=rd(u,v),this.innerSubscription!==v&&y.add(this.innerSubscription)},l.prototype._complete=function(){var u=this.innerSubscription;u&&!u.closed||i.prototype._complete.call(this),this.unsubscribe()},l.prototype._unsubscribe=function(){this.innerSubscription=void 0},l.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&i.prototype._complete.call(this)},l.prototype.notifyNext=function(u){this.destination.next(u)},l}(ku),Xy=function(){function i(l){this.notifier=l}return i.prototype.call=function(l,u){var p=new Zr(l),v=rd(this.notifier,new ru(p));return v&&!p.seenValue?(p.add(v),u.subscribe(p)):p},i}(),Zr=function(i){function l(u){var p=i.call(this,u)||this;return p.seenValue=!1,p}return he(l,i),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l}(ku);function th(i,l){return void 0===l&&(l=!1),function(u){return u.lift(new jL(i,l))}}var jL=function(){function i(l,u){this.predicate=l,this.inclusive=u}return i.prototype.call=function(l,u){return u.subscribe(new sd(l,this.predicate,this.inclusive))},i}(),sd=function(i){function l(u,p,v){var y=i.call(this,u)||this;return y.predicate=p,y.inclusive=v,y.index=0,y}return he(l,i),l.prototype._next=function(u){var p,v=this.destination;try{p=this.predicate(u,this.index++)}catch(y){return void v.error(y)}this.nextOrComplete(u,p)},l.prototype.nextOrComplete=function(u,p){var v=this.destination;Boolean(p)?v.next(u):(this.inclusive&&v.next(u),v.complete())},l}(we);function sr(i,l,u){return function(p){return p.lift(new V4(i,l,u))}}var V4=function(){function i(l,u,p){this.nextOrObserver=l,this.error=u,this.complete=p}return i.prototype.call=function(l,u){return u.subscribe(new Xo(l,this.nextOrObserver,this.error,this.complete))},i}(),Xo=function(i){function l(u,p,v,y){var C=i.call(this,u)||this;return C._tapNext=fn,C._tapError=fn,C._tapComplete=fn,C._tapError=v||fn,C._tapComplete=y||fn,X(p)?(C._context=C,C._tapNext=p):p&&(C._context=p,C._tapNext=p.next||fn,C._tapError=p.error||fn,C._tapComplete=p.complete||fn),C}return he(l,i),l.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(p){return void this.destination.error(p)}this.destination.next(u)},l.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(p){return void this.destination.error(p)}this.destination.error(u)},l.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){return void this.destination.error(u)}return this.destination.complete()},l}(we),j4=function(){function i(l,u,p,v){this.waitFor=l,this.absoluteTimeout=u,this.withObservable=p,this.scheduler=v}return i.prototype.call=function(l,u){return u.subscribe(new QL(l,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},i}(),QL=function(i){function l(u,p,v,y,C){var w=i.call(this,u)||this;return w.absoluteTimeout=p,w.waitFor=v,w.withObservable=y,w.scheduler=C,w.scheduleTimeout(),w}return he(l,i),l.dispatchTimeout=function(u){var p=u.withObservable;u._unsubscribeAndRecycle(),u.add(rd(p,new ru(u)))},l.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(l.dispatchTimeout,this.waitFor,this))},l.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),i.prototype._next.call(this,u)},l.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},l}(ku);function K1(i,l){return void 0===l&&(l=Vn),u=i,p=Ki(new ft),void 0===(v=l)&&(v=Vn),function(y){var C=S2(u),w=C?+u-v.now():Math.abs(u);return y.lift(new j4(w,C,p,v))};var u,p,v}function Un(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return function(u){var p;return"function"==typeof i[i.length-1]&&(p=i.pop()),u.lift(new z1(i,p))}}var z1=function(){function i(l,u){this.observables=l,this.project=u}return i.prototype.call=function(l,u){return u.subscribe(new Zy(l,this.observables,this.project))},i}(),Zy=function(i){function l(u,p,v){var y=i.call(this,u)||this;y.observables=p,y.project=v,y.toRespond=[];var C=p.length;y.values=new Array(C);for(var w=0;w<C;w++)y.toRespond.push(w);for(w=0;w<C;w++)y.add(Tr(y,p[w],void 0,w));return y}return he(l,i),l.prototype.notifyNext=function(u,p,v){this.values[v]=p;var y=this.toRespond;if(y.length>0){var C=y.indexOf(v);-1!==C&&y.splice(C,1)}},l.prototype.notifyComplete=function(){},l.prototype._next=function(u){if(0===this.toRespond.length){var p=[u].concat(this.values);this.project?this._tryProject(p):this.destination.next(p)}},l.prototype._tryProject=function(u){var p;try{p=this.project.apply(this,u)}catch(v){return void this.destination.error(v)}this.destination.next(p)},l}(gi),_S=function(i,l){return i===l||"function"==typeof l&&i===l.toString()},fi=function(){for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return function(p){return p.pipe(kn(function(v){var y=v.type,C=l.length;if(1===C)return _S(y,l[0]);for(var w=0;w<C;w++)if(_S(y,l[w]))return!0;return!1}))}},w2=function(){function i(l,u){for(var p=0;p<u.length;p++){var v=u[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}return function(l,u,p){return u&&i(l.prototype,u),p&&i(l,p),l}}(),eE=function(i){function l(u){!function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}(this,l);var p=function(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?v:y}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return p.source=u,p}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(l,Be),w2(l,null,[{key:"of",value:function(){return new this(or.apply(void 0,arguments))}},{key:"from",value:function(u,p){return new this(Mn(u,p))}}]),w2(l,[{key:"lift",value:function(u){var p=new l(this);return p.operator=u,p}},{key:"ofType",value:function(){return fi.apply(void 0,arguments)(this)}}]),l}(),Rg=function(i){function l(u,p){!function(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}(this,l);var v=function(y,C){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?y:C}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,function(y){var C=v.__notifier.subscribe(y);return C&&!C.closed&&y.next(v.value),C}));return v.value=p,v.__notifier=new je,v.__subscription=u.subscribe(function(y){y!==v.value&&(v.value=y,v.__notifier.next(y))}),v}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(l,Be),l}(),Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function vS(i,l){i.super_=l,i.prototype=Object.create(l.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}function rn(i,l){Object.defineProperty(this,"kind",{value:i,enumerable:!0}),l&&l.length&&Object.defineProperty(this,"path",{value:l,enumerable:!0})}"object"===(typeof global>"u"?"undefined":Av(global))&&global&&global,vS(function i(l,u,p){i.super_.call(this,"E",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0}),Object.defineProperty(this,"rhs",{value:p,enumerable:!0})},rn),vS(function i(l,u){i.super_.call(this,"N",l),Object.defineProperty(this,"rhs",{value:u,enumerable:!0})},rn),vS(function i(l,u){i.super_.call(this,"D",l),Object.defineProperty(this,"lhs",{value:u,enumerable:!0})},rn),vS(function i(l,u,p){i.super_.call(this,"A",l),Object.defineProperty(this,"index",{value:u,enumerable:!0}),Object.defineProperty(this,"item",{value:p,enumerable:!0})},rn);const qh=!1;var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function AS(i){if(i.__esModule)return i;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(u){var p=Object.getOwnPropertyDescriptor(i,u);Object.defineProperty(l,u,p.get?p:{enumerable:!0,get:function(){return i[u]}})}),l}var rh=function(i,l,u,p,v,y,C,w){if(!i){var D;if(void 0===l)D=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var P=[u,p,v,y,C,w],L=0;(D=new Error(l.replace(/%s/g,function(){return P[L++]}))).name="Invariant Violation"}throw D.framesToPop=1,D}},Og=function(i){return"function"==typeof i},Dg=function(i){return i.toString()},Pu=function(i){return"string"==typeof i},Ec=function(i){return i},T2=function(i){return null===i};function Cs(i,l,u){void 0===l&&(l=Ec),rh(Og(l)||T2(l),"Expected payloadCreator to be a function, undefined or null");var p=T2(l)||l===Ec?Ec:function(w){for(var D=arguments.length,P=new Array(D>1?D-1:0),L=1;L<D;L++)P[L-1]=arguments[L];return w instanceof Error?w:l.apply(void 0,[w].concat(P))},v=Og(u),y=i.toString(),C=function(){var w=p.apply(void 0,arguments),D={type:i};return w instanceof Error&&(D.error=!0),void 0!==w&&(D.payload=w),v&&(D.meta=u.apply(void 0,arguments)),D};return C.toString=function(){return y},C}var Ja=function(i){if("object"!=typeof i||null===i)return!1;for(var l=i;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(i)===l},ad=function(i){return Array.isArray(i)},uo=function(i){return null==i},tE=function(i){return i[i.length-1]},Y1=/\s/,yS=/(_|-|\.|:)/,R2=/([a-z][A-Z]|[A-Z][a-z])/,Mp=/[\W_]+(.|$)/g,nE=/(.)([A-Z]+)/g,ka=function(i){return(l=i,function(i){return Y1.test(i)?i.toLowerCase():yS.test(i)?(l=i,l.replace(Mp,function(u,p){return p?" "+p:""})||i).toLowerCase():R2.test(i)?function(l){return l.replace(nE,function(u,p,v){return p+" "+v.toLowerCase().split("").join(" ")})}(i).toLowerCase():i.toLowerCase();var l}(l).replace(/[\W_]+(.|$)/g,function(u,p){return p?" "+p:""}).trim()).replace(/\s(\w)/g,function(l,u){return u.toUpperCase()});var l},O2=function(i){return-1===i.indexOf("/")?ka(i):i.split("/").map(ka).join("/")},Wf=function(i,l){return i.reduce(function(u,p){return l(u,p)},{})},rE=function(i){return typeof Map<"u"&&i instanceof Map};function Li(i){if(rE(i))return Array.from(i.keys());if(typeof Reflect<"u"&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(i);var l=Object.getOwnPropertyNames(i);return"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(i))),l}function xp(i,l){return rE(l)?l.get(i):l[i]}var q1=function(i){return function l(u,p,v,y){var C=void 0===p?{}:p,w=C.namespace,D=void 0===w?"/":w,P=C.prefix;return void 0===v&&(v={}),void 0===y&&(y=""),Li(u).forEach(function(L){var ee,W=(ee=function(ee){var te;if(!y)return ee;var oe=ee.toString().split("||"),Ee=y.split("||");return(te=[]).concat.apply(te,Ee.map(function(Te){return oe.map(function(De){return""+Te+D+De})})).join("||")}(L),y||!P||P&&new RegExp("^"+P+D).test(ee)?ee:""+P+D+ee),re=xp(L,u);i(re)?l(re,{namespace:D,prefix:P},v,W):v[W]=re}),v}},_r=q1(Ja);function $a(i){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{},p=Object.keys(u);"function"==typeof Object.getOwnPropertySymbols&&(p=p.concat(Object.getOwnPropertySymbols(u).filter(function(v){return Object.getOwnPropertyDescriptor(u,v).enumerable}))),p.forEach(function(v){oo(i,v,u[v])})}return i}function oo(i,l,u){return l in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,i}function mo(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];var v=Ja(tE(u))?u.pop():{};return rh(u.every(Pu)&&(Pu(i)||Ja(i)),"Expected optional object followed by string action types"),Pu(i)?Nu([i].concat(u),v):$a({},ou(i,v),Nu(u,v))}function ou(i,l){return function(u,p){var v=void 0===p?{}:p,y=v.namespace,C=void 0===y?"/":y,w=v.prefix;function D(L,W,re){var ee=O2(re.shift());0===re.length?W[ee]=u[L]:(W[ee]||(W[ee]={}),D(L,W[ee],re))}var P={};return Object.getOwnPropertyNames(u).forEach(function(L){var W=w?L.replace(""+w+C,""):L;return D(L,P,W.split(C))}),P}(ih(_r(i,l)),l)}function ih(i,l){var u=void 0===l?{}:l,p=u.prefix,v=u.namespace,y=void 0===v?"/":v;return Wf(Object.keys(i),function(C,w){var D,P=i[w];rh(function(re){if(Og(re)||uo(re))return!0;if(ad(re)){var ee=re[0],oe=re[1];return Og(void 0===ee?Ec:ee)&&Og(oe)}return!1}(P),"Expected function, undefined, null, or array with payload and meta functions for "+w);var L=p?""+p+y+w:w,W=ad(P)?Cs.apply(void 0,[L].concat(P)):Cs(L,P);return $a({},C,((D={})[w]=W,D))})}function Nu(i,l){var u=ih(Wf(i,function(p,v){var y;return $a({},p,((y={})[v]=Ec,y))}),l);return Wf(Object.keys(u),function(p,v){var y;return $a({},p,((y={})[O2(v)]=u[v],y))})}var bc=function(){for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];var p="function"!=typeof l[l.length-1]&&l.pop(),v=l;if(void 0===p)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(y,C){for(var w=arguments.length,D=Array(w>2?w-2:0),P=2;P<w;P++)D[P-2]=arguments[P];var L=void 0===y,W=void 0===C;return L&&W&&p?p:v.reduce(function(re,ee){return ee.apply(void 0,[re,C].concat(D))},L&&!W&&p?p:y)}},gr=q1(function(i){return(Ja(i)||rE(i))&&(p=(u=Li(i)).every(function(v){return"next"===v||"throw"===v}),!(u.length&&u.length<=2&&p));var u,p});function Fr(i,l,u){void 0===u&&(u={}),rh(Ja(i)||rE(i),"Expected handlers to be a plain object.");var p=gr(i,u),v=Li(p).map(function(C){return function(w,D,P){void 0===D&&(D=Ec);var L=Dg(w).split("||");rh(void 0!==P,"defaultState for reducer handling "+L.join(", ")+" should be defined"),rh(Og(D)||Ja(D),"Expected reducer to be a function or object with next and throw reducers");var W=Og(D)?[D,D]:[D.next,D.throw].map(function(te){return uo(te)?Ec:te}),re=W[0],ee=W[1];return function(te,oe){void 0===te&&(te=P);var Ee=oe.type;return Ee&&-1!==L.indexOf(Dg(Ee))?(!0===oe.error?ee:re)(te,oe):te}}(C,xp(C,p),l)}),y=bc.apply(void 0,v.concat([l]));return function(C,w){return void 0===C&&(C=l),y(C,w)}}const ss=Cs("CONNECT_ZOOM_SOCKET"),Mu=Cs("CONNECT_XMPP_SOCKET"),oh=Cs("CLOSE_ZOOM_SOCKET"),Pa=Cs("CLOSE_XMPP_SOCKET"),cd=Cs("RECEIVE_MESSAGE_FROM_ZOOM_SOCKET"),na=Cs("RECEIVE_SHARING_PAYLOAD_FROM_ZOOM_SOCKET"),iE=Cs("RECEIVE_MESSAGE_FROM_XMPP_SOCKET"),kg=Cs("CONNECT_MAIN_SESSION_SOCKET"),Ei=Cs("CLOSE_MAIN_SESSION_SOCKET"),gl=Cs("RECEIVE_MESSAGE_FROM_MAIN_SESSION_SOCKET"),{setZoomSocketStatus:Lp,setRwgServersList:J1,setRwgRetryCount:Kf,setXmppSocketStatus:Na,setMainSessionSocketStatus:zf,resetSocket:Pg}=mo("SET_ZOOM_SOCKET_STATUS","SET_RWG_SERVERS_LIST","SET_RWG_RETRY_COUNT","SET_XMPP_SOCKET_STATUS","SET_MAIN_SESSION_SOCKET_STATUS","RESET_SOCKET"),_l=Cs("CONNECT_TO_MEDIA_STREAM"),yv=Cs("RECEIVE_PAYLOAD_FROM_MEDIA_SDK"),{setAudioEncodeStatus:ES,setAudioDecodeStatus:No,setVideoEncodeStatus:$1,setVideoDecodeStatus:Ev,setSharingEncodeStatus:bS,setSharingDecodeStatus:Bp,setMediaConstraints:oE,setMediaEncryptKey:Ng,resetMedia:Lc}=mo("SET_AUDIO_ENCODE_STATUS","SET_AUDIO_DECODE_STATUS","SET_VIDEO_ENCODE_STATUS","SET_VIDEO_DECODE_STATUS","SET_SHARING_ENCODE_STATUS","SET_SHARING_DECODE_STATUS","SET_MEDIA_CONSTRAINTS","SET_MEDIA_ENCRYPT_KEY","RESET_MEDIA");function sE(i,l){for(var u=arguments.length,p=new Array(u>2?u-2:0),v=2;v<u;v++)p[v-2]=arguments[v];return i(eE.of(...p||[]),l,null)}function xu(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];const p=function(){for(var v=arguments.length,y=new Array(v),C=0;C<v;C++)y[C]=arguments[C];return Ss(...l.map(w=>{const D=w(...y);if(!D)throw new TypeError(`combineEpics: one of the provided Epics "${w.name||"<anonymous>"}" does not return a stream. Double check you're not missing a return statement!`);return D.pipe(xc((P,L)=>(setTimeout(()=>{throw P},0),L)))}))};try{Object.defineProperty(p,"name",{value:`combineEpics(${l.map(v=>v.name||"<anonymous>").join(", ")})`})}catch{}return p}function Ms(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return xu(...l.flatMap(v=>Object.values(v)))}function ar(i,l){return i.pipe(fi(`${cd}`),kn(u=>u.payload.evt===l))}function Fp(i,l){return i.pipe(fi(`${gl}`),kn(u=>u.payload.evt===l))}function sh(i,l){return i.pipe(fi(`${iE}`),kn(u=>u.payload.evt===l))}function xs(i,l){return i.pipe(fi(`${cd}`,`${gl}`),kn(u=>u.payload.evt===l))}function bi(i,l){return i.pipe(fi(`${yv}`),kn(u=>Array.isArray(l)?l.indexOf(u.payload.type)>-1:u.payload.type===l))}const D2={default:{"apac.errorcodes_success":"Successfully joined the meeting.","apac.errorcodes_fail":"Fail to join the meeting.","apac.errorcodes_not_init":"Meeting not initialized.","apac.errorcodes_register":"This webinar requires registration.","apac.errorcodes_email_require":"Email is missing to attend webinar.","apac.errorcodes_not_exist":"Meeting does not exist.","apac.errorcodes_not_host":"You are not the meeting host.","apac.errorcodes_wrong_pass":"Meeting Passcode wrong.","apac.errorcodes_role_type":"Role type is required.","apac.errorcodes_not_start":"Meeting has not started","apac.errorcodes_re_connect":"Meeting is reconnecting.","apac.errorcodes_be_removed":"Be removed.","apac.errorcodes_disconnect":"Meeting has been disconnected.","apac.errorcodes_denied_register_with_panelist":"Denied register use panelist email.","apac.errorcodes_web_has_in_progress":"Already has other meetings in progress.","apac.errorcodes_web_require_email":"User email is required.","apac.errorcodes_web_not_support_webinar_pac":"Not support webinar and personal audio conference","apac.errorcodes_web_host_not_exit":"The meeting host does not exist.","apac.errorcodes_web_not_support_webclient":"Not support start or join meeting from web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"The current sdk version doesn't support webinar, please upgrade to the latest version.","apac.errorcodes_web_invalid_id":"Invalid meeting ID.","apac.errorcodes_web_not_support_registration_webinar":"Not support registration webinar","apac.errorcodes_web_not_support_tsp":"Not support start or join meeting from web, when you chose TSP as his audio in a meeting.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Not allow to start webinar from web.","apac.errorcodes_pac_api_wrong":"The accounts API Key is not valid.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"Incorrect role.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The accounts API Key is deactivated.","apac.errorcodes_pac_cant_host_other_mn":"Cannot not host another meeting concurrently.","apac.errorcodes_pac_invalid_signature":"Signature is invalid.","apac.errorcodes_pac_no_permission":"No permission.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unable join from browser, please join using the Zoom desktop client or mobile app.","apac.errorcodes_rwc_empty":"Could not get a response from the web server.","apac.errorcodes_rwc_error":"Could not connect to Web Server error.","apac.errorcodes_frequent_call":"You have reached the API limit for this call.","apac.errorcodes_frequent_join":"You be limit by zoom, need to check recaptcha.","apac.errorcodes_offline":"The service is temporarily offline.","apac.errorcodes_wasm_fail":"Download wasm files error, please check your network and firewall.","apac.errorcodes_denied_email":"Email is blocked by Administrator.","apac.errorcodes_tk_expired":"Token has expired.","apac.invalid_parameter":"Invalid Parameter","apac.errorcodes_login_required":"Require login","apac.errorcodes_upgrade":"Your sdk version needs to be {0} or higher to join the meeting"},"de-DE":{"apac.errorcodes_web_has_in_progress":"Hat bereits andere laufende Meetings.","apac.errorcodes_web_require_email":"E-Mail-Adresse von Benutzer erforderlich.","apac.errorcodes_web_not_support_webinar_pac":"Unterst\xfctzen Webinar und pers\xf6nliche Audiokonferenz nicht","apac.errorcodes_web_host_not_exit":"Der Meeting-Host ist nicht vorhanden.","apac.errorcodes_web_not_support_webclient":"Start nicht unterst\xfctzt bzw. starten Sie das Meeting aus dem Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Ihre aktuelle SDK-Version unterst\xfctzt keine Webinare. Aktualisieren Sie bitte auf die neueste Version.","apac.errorcodes_web_invalid_id":"Ung\xfcltige Meeting-ID.","apac.errorcodes_web_not_support_registration_webinar":"Registrierung f\xfcr Webinar wird nicht unterst\xfctzt","apac.errorcodes_web_not_support_tsp":"Sie unterst\xfctzen nicht den Start oder die Teilnahme an einem Meeting aus dem Web, wenn Sie den Telefonieanbieter als seinen Audiobeitrag in einem Meeting gew\xe4hlt haben.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Das Starten eines Webinars vom Internet aus ist nicht zul\xe4ssig.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Unf\xe4hig beitreten aus Browser, verbinden Sie bitte den Zoom-Desktop-Client oder mobile App."},"es-ES":{"apac.errorcodes_web_has_in_progress":"Ya posee otras reuniones en curso.","apac.errorcodes_web_require_email":"Se requiere correo electr\xf3nico del usuario.","apac.errorcodes_web_not_support_webinar_pac":"No soporta seminario web o conferencia de audio personal","apac.errorcodes_web_host_not_exit":"El anfitri\xf3n de la reuni\xf3n no existe.","apac.errorcodes_web_not_support_webclient":"No se puede iniciar ni entrar a una reuni\xf3n desde la web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versi\xf3n actual de sdk no es compatible con el seminario web, actualice a la \xfaltima versi\xf3n.","apac.errorcodes_web_invalid_id":"ID de reuni\xf3n no v\xe1lida.","apac.errorcodes_web_not_support_registration_webinar":"Seminario web que no es compatible con la inscripci\xf3n","apac.errorcodes_web_not_support_tsp":"Cuando eligi\xf3 el proveedor de servicios telef\xf3nicos como audio en una reuni\xf3n, no se puede iniciar o unirse una reuni\xf3n desde el sitio web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"No se permite comenzar un seminario web desde la web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"No puede unirse desde el navegador, por favor unirse usando el cliente de escritorio Zoom o aplicaci\xf3n m\xf3vil."},"fr-FR":{"apac.errorcodes_web_has_in_progress":"Il a d\xe9j\xe0 d\u2019autres r\xe9unions en cours.","apac.errorcodes_web_require_email":"Le courriel de l\u2019utilisateur est requis.","apac.errorcodes_web_not_support_webinar_pac":"Ne prend pas en charge le webinaire ni la conf\xe9rence audio personnelle","apac.errorcodes_web_host_not_exit":"L\u2019animateur de la r\xe9union n\u2019existe pas.","apac.errorcodes_web_not_support_webclient":"Ne supporte pas d\xe9marrer ou rejoindre une r\xe9union \xe0 partir du web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La version actuelle du SDK ne prend pas en charge le webinaire, veuillez passer \xe0 la derni\xe8re version.","apac.errorcodes_web_invalid_id":"N\xba de r\xe9union non valide.","apac.errorcodes_web_not_support_registration_webinar":"Ne prend pas en charge le webinaire d\u2019inscription","apac.errorcodes_web_not_support_tsp":"Ne peut pas d\xe9marrer ou rejoindre la r\xe9union depuis Internet, lorsque vous s\xe9lectionnez le fournisseur de service en t\xe9l\xe9phonie comma sa sortie audio dans une r\xe9union.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Ne pas permettre de d\xe9marrer des webinaires \xe0 partir du Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossible de rejoindre le navigateur, s'il vous pla\xeet rejoindre en utilisant le client de bureau Zoom ou une application mobile."},"jp-JP":{"apac.errorcodes_web_has_in_progress":"\u3059\u3067\u306b\u4ed6\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u59cb\u307e\u3063\u3066\u3044\u307e\u3059\u3002","apac.errorcodes_web_require_email":"\u30e6\u30fc\u30b6\u30fc\u30e1\u30fc\u30eb\u306f\u5fc5\u8981\u3067\u3059\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3068\u30d1\u30fc\u30bd\u30ca\u30eb\u97f3\u58f0\u4f1a\u8b70\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","apac.errorcodes_web_host_not_exit":"\u3053\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30db\u30b9\u30c8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_support_webclient":"\u30a6\u30a7\u30d6\u304b\u3089\u306e\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u958b\u59cb/\u53c2\u52a0\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u305b\u3093\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u73fe\u5728\u306eSDK\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","apac.errorcodes_web_invalid_id":"\u7121\u52b9\u306a\u30df\u30fc\u30c6\u30a3\u30f3\u30b0ID\u3067\u3059\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u767b\u9332\u30a6\u30a7\u30d3\u30ca\u30fc\u975e\u5bfe\u5fdc","apac.errorcodes_web_not_support_tsp":"\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u306b\u30c6\u30ec\u30d5\u30a9\u30cb\u30fc\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001\u30a6\u30a7\u30d6\u304b\u3089\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u958b\u59cb\u3057\u305f\u308a\u3001\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u53c2\u52a0\u3057\u305f\u308a\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u30a6\u30a7\u30d3\u30ca\u30fc\u3092\u30a6\u30a7\u30d6\u304b\u3089\u958b\u59cb\u3067\u304d\u307e\u305b\u3093\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u53c2\u52a0\u3057\u3001\u30ba\u30fc\u30e0\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"pt-PT":{"apac.errorcodes_web_has_in_progress":"J\xe1 h\xe1 outras reuni\xf5es em andamento.","apac.errorcodes_web_require_email":"O e-mail do usu\xe1rio \xe9 obrigat\xf3rio.","apac.errorcodes_web_not_support_webinar_pac":"N\xe3o h\xe1 suporte para webinar e audioconfer\xeancia pessoal","apac.errorcodes_web_host_not_exit":"O anfitri\xe3o da reuni\xe3o n\xe3o existe.","apac.errorcodes_web_not_support_webclient":"N\xe3o h\xe1 suporte para iniciar ou entrar na reuni\xe3o pela web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"A vers\xe3o sdk atual n\xe3o oferece suporte para webinar. Atualize para a vers\xe3o mais recente.","apac.errorcodes_web_invalid_id":"ID da reuni\xe3o inv\xe1lido.","apac.errorcodes_web_not_support_registration_webinar":"O registro do webinar n\xe3o \xe9 compat\xedvel","apac.errorcodes_web_not_support_tsp":"N\xe3o \xe9 compat\xedvel iniciar ou ingressar na reuni\xe3o pela web ao escolher o \xe1udio do provedor de servi\xe7os de telefonia em uma reuni\xe3o.","apac.errorcodes_web_not_allow_start_webinar_from_web":"N\xe3o \xe9 permitido iniciar o webinar na web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Incapaz juntar-se a partir do navegador, por favor, junte-se usando o cliente de desktop Zoom ou aplicativo m\xf3vel."},"ru-RU":{"apac.errorcodes_web_has_in_progress":"\u0423\u0436\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445.","apac.errorcodes_web_require_email":"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.","apac.errorcodes_web_not_support_webinar_pac":"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440 \u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e","apac.errorcodes_web_host_not_exit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.","apac.errorcodes_web_not_support_webclient":"\u0417\u0430\u043f\u0443\u0441\u043a \u0438\u043b\u0438 \u0432\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 SDK \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u044b. \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.","apac.errorcodes_web_invalid_id":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438.","apac.errorcodes_web_not_support_registration_webinar":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f","apac.errorcodes_web_not_support_tsp":"\u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0441\u043b\u0443\u0436\u0431\u044b \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0442\u0430\u043a\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u0417\u0430\u043f\u0443\u0441\u043a \u0432\u0435\u0431-\u0441\u0435\u043c\u0438\u043d\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0438\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435."},"zh-CN":{"apac.errorcodes_web_has_in_progress":"\u5df2\u7ecf\u6709\u53e6\u4e00\u573a\u4f1a\u8bae\u6b63\u5728\u8fdb\u884c\u3002","apac.errorcodes_web_require_email":"\u5fc5\u987b\u63d0\u4f9b\u7528\u6237\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u975e\u652f\u6301\u7684\u7f51\u7edc\u7814\u8ba8\u4f1a\u548c\u4e2a\u4eba\u97f3\u9891\u4f1a\u8bae","apac.errorcodes_web_host_not_exit":"\u4f1a\u8bae\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u6301\u4ece Web \u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u5f53\u524d sdk \u7248\u672c\u4e0d\u652f\u6301\u7f51\u7edc\u7814\u8ba8\u4f1a\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u65e0\u6548\u7684\u4f1a\u8baeID\u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u6301\u6ce8\u518c\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_web_not_support_tsp":"\u5982\u679c\u9009\u62e9\u7535\u8bdd\u8bed\u97f3\u670d\u52a1\u63d0\u4f9b\u5546\u4f5c\u4e3a\u4f1a\u8bae\u97f3\u9891\uff0c\u5219\u4e0d\u652f\u6301\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u6216\u52a0\u5165\u4f1a\u8bae\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8bb8\u901a\u8fc7\u7f51\u7edc\u5f00\u59cb\u7f51\u7edc\u7814\u8ba8\u4f1a","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u4ece\u6d4f\u89c8\u5668\u65e0\u6cd5\u52a0\u5165\uff0c\u8bf7\u52a0\u5165\u4f7f\u7528\u7f29\u653e\u684c\u9762\u5ba2\u6237\u7aef\u6216\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"},"zh-TW":{"apac.errorcodes_web_has_in_progress":"\u5df2\u6709\u5176\u4ed6\u6703\u8b70\u6b63\u5728\u9032\u884c\u4e2d\u3002","apac.errorcodes_web_require_email":"\u5fc5\u9808\u63d0\u4f9b\u4f7f\u7528\u8005\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002","apac.errorcodes_web_not_support_webinar_pac":"\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\u548c\u500b\u4eba\u97f3\u8a0a\u6703\u8b70","apac.errorcodes_web_host_not_exit":"\u6703\u8b70\u4e3b\u6301\u4eba\u4e0d\u5b58\u5728\u3002","apac.errorcodes_web_not_support_webclient":"\u4e0d\u652f\u63f4\u5f9e Web \u958b\u59cb\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_should_support_webinar_with_latest_version":"\u76ee\u524d\u7684 SDK \u7248\u672c\u4e0d\u652f\u63f4\u7db2\u8def\u7814\u8a0e\u6703\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7248\u672c\u3002","apac.errorcodes_web_invalid_id":"\u7121\u6548\u7684\u6703\u8b70 ID \u3002","apac.errorcodes_web_not_support_registration_webinar":"\u4e0d\u652f\u63f4\u8a3b\u518a\u7db2\u8def\u7814\u8a0e\u6703","apac.errorcodes_web_not_support_tsp":"\u7576\u60a8\u9078\u64c7\u96fb\u8a71\u8a9e\u97f3\u670d\u52d9\u4f9b\u61c9\u5546\u505a\u70ba\u6703\u8b70\u8a9e\u97f3\u4f7f\u7528\u6642\uff0c\u4e0d\u652f\u63f4\u7d93\u7531\u7db2\u9801\u53ec\u958b\u6216\u52a0\u5165\u6703\u8b70\u3002","apac.errorcodes_web_not_allow_start_webinar_from_web":"\u4e0d\u5141\u8a31\u5f9e Web \u958b\u59cb\u7db2\u8def\u7814\u8a0e\u6703\u3002","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\u5f9e\u700f\u89bd\u5668\u7121\u6cd5\u52a0\u5165\uff0c\u8acb\u52a0\u5165\u4f7f\u7528\u7e2e\u653e\u684c\u9762\u5ba2\u6236\u7aef\u6216\u79fb\u52d5\u61c9\u7528\u7a0b\u5e8f\u3002"},"ko-KO":{"apac.errorcodes_web_has_in_progress":"\uc774\ubbf8 \ub2e4\ub978 \ud68c\uc758\uac00 \uc9c4\ud589 \uc911\uc785\ub2c8\ub2e4.","apac.errorcodes_web_require_email":"\uc0ac\uc6a9\uc790 \uc774\uba54\uc77c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webinar_pac":"\uc6e8\ube44\ub098 \ubc0f \uac1c\uc778 \uc624\ub514\uc624 \uc804\ud654 \ud68c\uc758\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_host_not_exit":"\ud68c\uc758 \ud638\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_webclient":"\uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ucc38\uc5ec\ud558\ub294 \uac83\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_should_support_webinar_with_latest_version":"\ud604\uc7ac SDK \ubc84\uc804\uc740 \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2ed\uc2dc\uc624.","apac.errorcodes_web_invalid_id":"\ud68c\uc758 ID\uac00 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_support_registration_webinar":"\ub4f1\ub85d \uc6e8\ube44\ub098\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c","apac.errorcodes_web_not_support_tsp":"\ud68c\uc758\uc5d0\uc11c Telephony Service Provider\ub97c \uc624\ub514\uc624\ub85c \uc120\ud0dd\ud55c \uacbd\uc6b0 \uc6f9\uc5d0\uc11c \ud68c\uc758\ub97c \uc2dc\uc791\ud558\uac70\ub098 \ud68c\uc758\uc5d0 \ucc38\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_web_not_allow_start_webinar_from_web":"\uc6f9\uc5d0\uc11c \uc6e8\ube44\ub098\ub97c \uc2dc\uc791\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"\uc218 \uc5c6\uc2b5\ub2c8\ub2e4 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc870\uc778 \uc90c \ub370\uc2a4\ud06c\ud1b1 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac00\uc785\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."},"vi-VN":{"apac.errorcodes_web_has_in_progress":"\u0110\xe3 c\xf3 cu\u1ed9c h\u1ecdp kh\xe1c \u0111ang di\u1ec5n ra.","apac.errorcodes_web_require_email":"Email ng\u01b0\u1eddi d\xf9ng l\xe0 b\u1eaft bu\u1ed9c.","apac.errorcodes_web_not_support_webinar_pac":"Kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3ovideo v\xe0 h\u1ed9i ngh\u1ecb \xe2m thanh c\xe1 nh\xe2n","apac.errorcodes_web_host_not_exit":"Ng\u01b0\u1eddi ch\u1ee7 tr\xec cu\u1ed9c h\u1ecdp kh\xf4ng t\u1ed3n t\u1ea1i.","apac.errorcodes_web_not_support_webclient":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"Phi\xean b\u1ea3n sdk hi\u1ec7n t\u1ea1i kh\xf4ng h\u1ed7 tr\u1ee3 h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn, h\xe3y n\xe2ng c\u1ea5p l\xean phi\xean b\u1ea3n m\u1edbi nh\u1ea5t.","apac.errorcodes_web_invalid_id":"ID cu\u1ed9c h\u1ecdp kh\xf4ng h\u1ee3p l\u1ec7.","apac.errorcodes_web_not_support_registration_webinar":"Kh\xf4ng h\u1ed7 tr\u1ee3 \u0111\u0103ng k\xfd h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn","apac.errorcodes_web_not_support_tsp":"Kh\xf4ng h\u1ed7 tr\u1ee3 b\u1eaft \u0111\u1ea7u ho\u1eb7c v\xe0o cu\u1ed9c h\u1ecdp t\u1eeb web, khi b\u1ea1n ch\u1ecdn Nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111i\u1ec7n tho\u1ea1i l\xe0m ngu\u1ed3n \xe2m thanh trong cu\u1ed9c h\u1ecdp.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Kh\xf4ng cho ph\xe9p b\u1eaft \u0111\u1ea7u h\u1ed9i th\u1ea3o tr\u1ef1c tuy\u1ebfn t\u1eeb web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Kh\xf4ng th\u1ec3 tham gia t\u1eeb tr\xecnh duy\u1ec7t, h\xe3y tham gia b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng client desktop Ph\xf3ng to ho\u1eb7c \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng."},"it-IT":{"apac.errorcodes_web_has_in_progress":"Sta partecipando a un\u2019altra riunione in corso.","apac.errorcodes_web_require_email":"\xc8 richiesta l\u2019email dell\u2019utente.","apac.errorcodes_web_not_support_webinar_pac":"Non supporta webinar e conferenza audio personale","apac.errorcodes_web_host_not_exit":"L\u2019ospite della riunione non esiste.","apac.errorcodes_web_not_support_webclient":"Non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_should_support_webinar_with_latest_version":"La versione sdk corrente non supporta i webinar. Effettua l\u2019aggiornamento alla versione pi\xf9 recente.","apac.errorcodes_web_invalid_id":"ID riunione non valido.","apac.errorcodes_web_not_support_registration_webinar":"Non supporta webinar con iscrizione","apac.errorcodes_web_not_support_tsp":"In caso che hai selezionato il fornitore di servizio telefonico come l\u2019audio in riunione, non supporta l\u2019avvio o la partecipazione alla riunione dal Web.","apac.errorcodes_web_not_allow_start_webinar_from_web":"Non \xe8 consentito avviare il webinar dal Web.","apac.errorcodes_need_use_zoom_desktop_or_mobile":"Impossibile unirsi dal browser, si prega di unirsi con il client desktop Zoom o app mobile."}},SS=D2.default,CS=-3e3;let ud,ba,X1;function GL(i,l){return l in SS?SS[l]:i}(function(i){i[i.CONF_SUCCESS=0]="CONF_SUCCESS",i[i.CONF_FAIL_MEETING_OVER=6]="CONF_FAIL_MEETING_OVER",i[i.CONF_FAIL_CONF_USER_FULL=9]="CONF_FAIL_CONF_USER_FULL",i[i.CONF_FAIL_CONFLOCKED=12]="CONF_FAIL_CONFLOCKED",i[i.CONF_FAIL_WEBINAR_DENIED_EMAIL=3033]="CONF_FAIL_WEBINAR_DENIED_EMAIL",i[i.CONF_FAIL_MEETING_HAS_CLOSED=103003]="CONF_FAIL_MEETING_HAS_CLOSED",i[i.CONF_FAIL_HAS_BEEN_REMOVED=103039]="CONF_FAIL_HAS_BEEN_REMOVED",i[i.CONF_RESULT_MMR_IB_REJECT=103043]="CONF_RESULT_MMR_IB_REJECT",i[i.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS=103044]="CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS"})(ud||(ud={})),function(i){i[i.Unknown=0]="Unknown",i[i.Normal=1]="Normal",i[i.Userrequest=2]="Userrequest",i[i.SdkConnection=3]="SdkConnection",i[i.Reconnect=5]="Reconnect",i[i.PtRequest=6]="PtRequest",i[i.KickedByHost=7]="KickedByHost",i[i.EndByHost=8]="EndByHost",i[i.EndByHostStartAnotherMeeting=9]="EndByHostStartAnotherMeeting",i[i.FreeMeetingTimeout=10]="FreeMeetingTimeout",i[i.JBHTimeout=11]="JBHTimeout",i[i.EndBySingleStatus=12]="EndBySingleStatus",i[i.WebinarNeedRegister=13]="WebinarNeedRegister",i[i.ArchiveFail=14]="ArchiveFail",i[i.EndByNone=15]="EndByNone",i[i.EndByAdmin=16]="EndByAdmin"}(ba||(ba={})),function(i){i[i.WaitingRoomFailover=1]="WaitingRoomFailover",i[i.WebEndAndRejoin=2]="WebEndAndRejoin"}(X1||(X1={}));const k2={ANOTHER_MEETING_RUNNING:3e3,ERROR_NOT_EXIST:3001,ERROR_NOT_HOST:3003,WRONG_MEETING_PASSWORD:3004,ROLE_TYPE_IS_REQUIRE:3010,EMAIL_REQUIRED:3005,MEETING_NOT_START:3008,BE_REMOVED:3009,ERROR_WEBINAR_ENFORCE_LOGIN:3034,NEED_REAL_NAME:3082,REGISTER_REQUIRED:3099,SSO_LOGIN_WINDOW:6024,ZOOM_LOGIN_WINDOW:3051,ZOOM_SPECIFIC_LOGIN_WINDOW:3052,LOGIN_REQUIRED:3100,RE_CONNECTING:4e3,DISCONNECT:4001,INVALID_PARAMETER:4003,DENIED_REGISTER_WITH_PANELIST:3032,SERVICE_OFFLINE:403,RWC_EMPTY:3621,RWC_ERROR:3622,FREQUENT_CALL:3633,FREQUENT_JOIN:3634,WASM_FAIL:3635,COMMON_ERROR:200,COMMON_SUCCESS:0,UPGRADE:1e4},Q4={SUCCESS:"apac.errorcodes_success",FAIL:"apac.errorcodes_fail",MEETING_NOT_INIT:"apac.errorcodes_not_init",REGISTER_REQUIRED:"apac.errorcodes_register",LOGIN_REQUIRED:"apac.errorcodes_login_required",SSO_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_LOGIN_WINDOW:"apac.errorcodes_login_required",ZOOM_SPECIFIC_LOGIN_WINDOW:"apac.errorcodes_login_required",EMAIL_REQUIRED:"apac.errorcodes_email_require",ERROR_NOT_EXIST:"apac.errorcodes_not_exist",ERROR_NOT_HOST:"apac.errorcodes_not_host",WRONG_MEETING_PASSWORD:"apac.errorcodes_wrong_pass",ROLE_TYPE_IS_REQUIRE:"apac.errorcodes_role_type",ANOTHER_MEETING_RUNNING:"apac.errorcodes_meeting_has_in_progress",MEETING_NOT_START:"apac.errorcodes_not_start",INVALID_PARAMETER:"apac.invalid_parameter",RE_CONNECTING:"apac.errorcodes_re_connect",BE_REMOVED:"apac.errorcodes_be_removed",ERROR_WEBINAR_ENFORCE_LOGIN:"apac.errorcodes_webinar_enforce_login",DISCONNECT:"apac.errorcodes_disconnect",DENIED_REGISTER_WITH_PANELIST:"apac.errorcodes_denied_register_with_panelist",RWC_EMPTY:"apac.errorcodes_rwc_empty",RWC_ERROR:"apac.errorcodes_rwc_error",FREQUENT_CALL:"apac.errorcodes_frequent_call",FREQUENT_JOIN:"apac.errorcodes_frequent_join",WASM_FAIL:"apac.errorcodes_wasm_fail",UPGRADE:"apac.errorcodes_upgrade"},wS={3e3:{"apac.errorcodes_web_has_in_progress":3e3,"apac.errorcodes_web_require_email":3005,"apac.errorcodes_web_not_support_webinar_pac":3701,"apac.errorcodes_web_host_not_exit":3702,"apac.errorcodes_web_not_support_webclient":3603,"apac.errorcodes_web_should_support_webinar_with_latest_version":3604,"apac.errorcodes_web_invalid_id":3703,"apac.errorcodes_web_not_support_registration_webinar":3606,"apac.errorcodes_web_not_support_tsp":3608,"apac.errorcodes_web_not_allow_start_webinar_from_web":3609,"apac.errorcodes_need_use_zoom_desktop_or_mobile":3611},3001:{"apac.errorcodes_not_exist":3610},200:{"apac.errorcodes_pac_api_wrong":3704,"apac.errorcodes_pac_signature_expired":3705,"apac.errorcodes_pac_mn_wrong":3706,"apac.errorcodes_pac_mn_not_fount":3707,"apac.errorcodes_pac_role_error":3708,"apac.errorcodes_pac_host_not_found":3709,"apac.errorcodes_pac_api_disabled":3710,"apac.errorcodes_pac_cant_host_other_mn":3711,"apac.errorcodes_pac_invalid_signature":3712,"apac.errorcodes_pac_no_permission":3713},3099:{"apac.errorcodes_register":3099},3100:{"apac.errorcodes_login_required":3100},3003:{"apac.errorcodes_not_host":3003},3004:{"apac.errorcodes_wrong_pass":3004},3008:{"apac.errorcodes_not_start":3008},3009:{"apac.errorcodes_be_removed":3009},3501:{"apac.errorcodes_login_required":3082},3502:{"apac.errorcodes_login_required":3082},3032:{"apac.errorcodes_denied_register_with_panelist":3100},3033:{"apac.errorcodes_denied_email":3620},3059:{"apac.errorcodes_not_support_simulive":3630},3082:{"apac.errorcodes_real_name":3082},403:{"apac.errorcodes_offline":403},404:{"apac.errorcodes_offline":403},4003:{"apac.invalid_parameter":4003},124:{"apac.errorcodes_tk_expired":3610},3136:{"apac.errorcodes_require_host":3709}},WL={3004:{"apac.errorcodes_pac_mn_wrong":3714},3005:{"apac.errorcodes_web_has_in_progress":3e3},3008:{"apac.errorcodes_not_start":3008},3033:{"apac.errorcodes_denied_email":3620},1005:{"apac.errorcodes_denied_email":3620},103039:{"apac.errorcodes_be_removed":3009},6:{"meeting ended":4004},9:{"meeting is at capacity":4005},12:{"meeting locked":4006},103043:{"reject for information barriers":4007},103044:{"participant exist":4008}};function P2(i,l){return Object.keys(i).find(u=>i[u]===l)}let N2;function Z1(i,l){const{key:u,value:p}=function(y,C){let w=!1;if(-1===y)return{key:"apac.errorcodes_offline",value:403};if(3e3===y){const L=["en-US","de-DE","es-ES","en-US","fr-FR","jp-JP","pt-PT","ru-RU","zh-CN","zh-TW","ko_KO","vi-VN","it-IT"];let W={};if(N2)W=N2;else{const re=Object.keys(wS[3e3]);L.forEach(ee=>{const te=("en-US"===(oe=ee)&&(oe="default"),D2[oe]||D2.default);var oe;W[ee]={},re.forEach(oe=>{W[ee][oe]=te[oe]})}),N2=W}return L.forEach(re=>{if(w)return;const ee=P2(W[re],C);ee&&(w={key:ee,value:wS[y][ee]})}),w||(w={key:"apac.errorcodes_fail",value:200}),w}if(200===y){const L=P2({"apac.errorcodes_pac_api_wrong":"The api key is wrong.","apac.errorcodes_pac_signature_expired":"The signature has expired.","apac.errorcodes_pac_mn_wrong":"The meeting number is wrong.","apac.errorcodes_pac_mn_not_fount":"The meeting number is not found.","apac.errorcodes_pac_role_error":"The role is not applicable.","apac.errorcodes_pac_host_not_found":"The meeting host is not found.","apac.errorcodes_pac_api_disabled":"The account don't enable API.","apac.errorcodes_pac_cant_host_other_mn":"Can not be host in other account's meeting.","apac.errorcodes_pac_invalid_signature":"Invalid signature.","apac.errorcodes_pac_no_permission":"No permission"},C);return w=L?{key:L,value:wS[y][L]}:{key:"apac.errorcodes_fail",value:200},w}if(void 0!==wS[y]){const L=wS[y],W=Object.keys(L)[0];w={key:W,value:L[W]}}if(w)return w;const D=P2(k2,y),P=Q4[D];return P?{key:P,value:y}:{key:"apac.errorcodes_fail",value:200}}(i,l),v=GL(u,u);return u!==v?{reason:v,errorCode:p}:{reason:SS[u],errorCode:p}}function ah(i){let l=!1;const u="number"==typeof i?i:i.body.res;if(void 0!==WL[u]){const v=WL[u],y=Object.keys(v)[0];l={key:y,value:v[y]}}if(l){const{key:v,value:y}=l,C=GL(v,v);return Object.assign({},i,v!==C?{reason:C,errorCode:y}:{reason:SS[v],errorCode:y})}const p=Z1(u);return Object.assign({},i,{reason:p.reason,errorCode:p.errorCode})}var bv={exports:{}};function Sa(i){return bv.exports.Base64.encode(i,!0)}function Up(i){return bv.exports.Base64.decode(i)}function cE(i){return bv.exports.Base64.encode(i,!1)}!function(i,l){var u;u=typeof self<"u"?self:typeof window<"u"?window:Ea,i.exports=function(v){var y,C=(v=v||{}).Base64,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=function(Tt){for(var yn={},Kn=0,Pt=Tt.length;Kn<Pt;Kn++)yn[Tt.charAt(Kn)]=Kn;return yn}(w),P=String.fromCharCode,L=function(Tt){if(Tt.length<2)return(yn=Tt.charCodeAt(0))<128?Tt:yn<2048?P(192|yn>>>6)+P(128|63&yn):P(224|yn>>>12&15)+P(128|yn>>>6&63)+P(128|63&yn);var yn=65536+1024*(Tt.charCodeAt(0)-55296)+(Tt.charCodeAt(1)-56320);return P(240|yn>>>18&7)+P(128|yn>>>12&63)+P(128|yn>>>6&63)+P(128|63&yn)},W=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,re=function(Tt){return Tt.replace(W,L)},ee=function(Tt){var yn=[0,2,1][Tt.length%3],Kn=Tt.charCodeAt(0)<<16|(Tt.length>1?Tt.charCodeAt(1):0)<<8|(Tt.length>2?Tt.charCodeAt(2):0);return[w.charAt(Kn>>>18),w.charAt(Kn>>>12&63),yn>=2?"=":w.charAt(Kn>>>6&63),yn>=1?"=":w.charAt(63&Kn)].join("")},te=v.btoa&&"function"==typeof v.btoa?function(Tt){return v.btoa(Tt)}:function(Tt){if(Tt.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return Tt.replace(/[\s\S]{1,3}/g,ee)},oe=function(Tt){return te(re(String(Tt)))},Ee=function(Tt){return Tt.replace(/[+\/]/g,function(yn){return"+"==yn?"-":"_"}).replace(/=/g,"")},Te=function(Tt,yn){return yn?Ee(oe(Tt)):oe(Tt)};v.Uint8Array&&(y=function(Tt,yn){for(var Kn="",Pt=0,mt=Tt.length;Pt<mt;Pt+=3){var tt=Tt[Pt+1],Rt=Tt[Pt+2],st=Tt[Pt]<<16|tt<<8|Rt;Kn+=w.charAt(st>>>18)+w.charAt(st>>>12&63)+(void 0!==tt?w.charAt(st>>>6&63):"=")+(void 0!==Rt?w.charAt(63&st):"=")}return yn?Ee(Kn):Kn});var De,Le=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,et=function(Tt){switch(Tt.length){case 4:var yn=((7&Tt.charCodeAt(0))<<18|(63&Tt.charCodeAt(1))<<12|(63&Tt.charCodeAt(2))<<6|63&Tt.charCodeAt(3))-65536;return P(55296+(yn>>>10))+P(56320+(1023&yn));case 3:return P((15&Tt.charCodeAt(0))<<12|(63&Tt.charCodeAt(1))<<6|63&Tt.charCodeAt(2));default:return P((31&Tt.charCodeAt(0))<<6|63&Tt.charCodeAt(1))}},lt=function(Tt){return Tt.replace(Le,et)},pt=function(Tt){var yn=Tt.length,Kn=yn%4,Pt=(yn>0?D[Tt.charAt(0)]<<18:0)|(yn>1?D[Tt.charAt(1)]<<12:0)|(yn>2?D[Tt.charAt(2)]<<6:0)|(yn>3?D[Tt.charAt(3)]:0),mt=[P(Pt>>>16),P(Pt>>>8&255),P(255&Pt)];return mt.length-=[0,0,2,1][Kn],mt.join("")},ht=v.atob&&"function"==typeof v.atob?function(Tt){return v.atob(Tt)}:function(Tt){return Tt.replace(/\S{1,4}/g,pt)},gt=function(Tt){return ht(String(Tt).replace(/[^A-Za-z0-9\+\/]/g,""))},Yt=function(Tt){return String(Tt).replace(/[-_]/g,function(yn){return"-"==yn?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},Xt=function(Tt){return yn=Yt(Tt),lt(ht(yn));var yn};if(v.Uint8Array&&(De=function(Tt){return Uint8Array.from(gt(Yt(Tt)),function(yn){return yn.charCodeAt(0)})}),v.Base64={VERSION:"2.6.4",atob:gt,btoa:te,fromBase64:Xt,toBase64:Te,utob:re,encode:Te,encodeURI:function(Tt){return Te(Tt,!0)},btou:lt,decode:Xt,noConflict:function(){var Tt=v.Base64;return v.Base64=C,Tt},fromUint8Array:y,toUint8Array:De},"function"==typeof Object.defineProperty){var un=function(Tt){return{value:Tt,enumerable:!1,writable:!0,configurable:!0}};v.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",un(function(){return Xt(this)})),Object.defineProperty(String.prototype,"toBase64",un(function(Tt){return Te(this,Tt)})),Object.defineProperty(String.prototype,"toBase64URI",un(function(){return Te(this,!0)}))}}return v.Meteor&&(Base64=v.Base64),i.exports&&(i.exports.Base64=v.Base64),{Base64:v.Base64}}(u)}(bv);const Mg={"-":"+",_:"/",".":"="};function vl(i){const l=i.replace(/[-_.]/g,u=>Mg[u]);return Uint8Array.from(atob(l),u=>u.charCodeAt(0))}const Al=i=>{const l=i.charCodeAt(0);return l<=parseInt("0x7F",16)?1:l<=parseInt("0x7FF",16)?2:l<=parseInt("0xFFFF",16)?3:l<=parseInt("0x1FFFFF",16)?4:l<=parseInt("0x3FFFFFF",16)?5:6},uE=(i,l)=>Object.keys(i).find(u=>i[u]===l)||0,lE=(i,l)=>{const u=i.split(".").map(y=>Number(y)).slice(0,3),p=l.split(".").map(y=>Number(y)).slice(0,3);let v=0;for(let y=0;y<3;y++){const C=y<u.length?u[y]:0,w=y<p.length?p[y]:0;if(C<w){v=-1;break}if(C>w){v=1;break}}return v},eT=i=>{var l;let u=(new Date).getTime(),p=1e3*(null===(l=performance)||void 0===l?void 0:l.now())||0;const v="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y=>{let C=16*Math.random();return u>0?(C=(u+C)%16|0,u=Math.floor(u/16)):(C=(p+C)%16|0,p=Math.floor(p/16)),("x"===y?C:3&C|8).toString(16)});return"string"==typeof i||"number"==typeof i?v+":"+i:v+""},TS=(i,l)=>i>>10==l>>10,Sv=["bLock","bHoldUponEntry","viewOnly","listenOnlyPhone","bAllowRaiseHand","bAllowAttendeeRename","bBroadcast","bAllowPlayChimeForEnterOrExit","bIbDisableShare","bIbDisableChat","encryptKey","bNoHostTimeOut","bAllowShowCount","bHasAST","bHasRMC","gatewayKey","encryptKey"],M2={bChime:"bAllowPlayChimeForEnterOrExit",bHasAST:"hasAst",bHasRMC:"hasRmc",topic:i=>({meetingTopic:Up(i)}),gatewayKey:i=>{const[,l,u]=i.split(".");return l&&u?{gatewayUser:{userId:Number(l),sn:u}}:{}},encryptKey:i=>({gcmSessinKey:vl(i)})},tT=Cs("GET_MEETING_INFO"),nT=Cs("GET_INSTANT_MEETING_INFO");Cs("LOGON_ZOOM_DOMAIN"),Cs("VERIFY_ZOOM_RECAPTCHA"),Cs("LOGON_THIRD_PARTY_DOMAIN");const Sc=Cs("PING_RWC_SERVER"),Ca=Cs("MEETING_FAILOVER"),dE=Cs("LEAVE_MEETING"),Yf=Cs("END_MEETING");Cs("REGISTER_WEBINAR");const x2=Cs("TRIGGER_IDLE_CHECK"),{setMeetingInfo:Cv,setWindownOpen:Xa,setAppidSignature:L2,setZtk:H4,setZsk:RS,setTkMtkguid:Bc,setPingRwcTimestamp:B2,setInMeetingInfo:xg,setMeetingAttribute:qf,resetMeeting:Ma,setIsHost:F2,setIsCohost:Iv,setMeetingIsOnHold:wv,setIsMeetingReset:Vp,setAudioVideoBeforeOnHold:hE,setCurrentUserAudioBeforeReset:OS,setIsCurrentUserMutedBeforeReset:ui,setMeetingStatus:rT,setMeetingRegion:KL,setIsCurrentUserStartVideoBeforeReset:zL,setJoinMeetingTimeStamp:U2,setIsEnableQos:iT,setActiveAppInfo:V2,setMeetingIdleStartTime:Tv,setSessionIdleTimeoutMinutes:j2,setIsAudioBridgeEnabled:An,addDiscardedRwcHost:zi,setSharePronounType:Cc,setIsStayAwakeDuringTheSession:Ic,setMeetingJoinSuccessTimestamp:Za,resetFailoverRecord:oT,setFailoverReason:Jf}=mo({SET_MEETING_INFO:i=>i,SET_WINDOWN_OPEN:i=>i,SET_APPID_SIGNATURE:i=>i,SET_ZTK:i=>i,SET_ZSK:i=>i,SET_TK_MTKGUID:i=>i,SET_PING_RWC_TIMESTAMP:i=>i,SET_IN_MEETING_INFO:i=>i,SET_MEETING_ATTRIBUTE:i=>{if(Sv.some(l=>i&&void 0!==i[l])){let l=i;return Object.keys(M2).some(u=>void 0!==i[u])&&(l=Object.keys(i).reduce((u,p)=>{const v=M2[p];return"function"==typeof v?Object.assign(u,v(i[p])):"string"==typeof v&&(u[v]=i[p]),u},{})),l}return{}},SET_IS_HOST:i=>i&&i.bHost,SET_IS_COHOST:i=>i&&i.bCoHost,RESET_MEETING:i=>i,SET_MEETING_IS_ON_HOLD:i=>i,SET_IS_MEETING_RESET:i=>i,SET_AUDIO_VIDEO_BEFORE_ON_HOLD:i=>i,SET_CURRENT_USER_AUDIO_BEFORE_RESET:i=>i,SET_IS_CURRENT_USER_MUTED_BEFORE_RESET:i=>i,SET_MEETING_STATUS:i=>i,SET_MEETING_REGION:i=>i,SET_IS_CURRENT_USER_START_VIDEO_BEFORE_RESET:i=>i,SET_JOIN_MEETING_TIME_STAMP:i=>i,SET_IS_ENABLE_QOS:i=>i,SET_ACTIVE_APP_INFO:i=>i,SET_MEETING_IDLE_START_TIME:i=>i,SET_SESSION_IDLE_TIMEOUT_MINUTES:i=>i,SET_IS_AUDIO_BRIDGE_ENABLED:i=>i,ADD_DISCARDED_RWC_HOST:i=>i,SET_SHARE_PRONOUN_TYPE:i=>i,SET_IS_STAY_AWAKE_DURING_THE_SESSION:i=>i,SET_MEETING_JOIN_SUCCESS_TIMESTAMP:i=>i,RESET_FAILOVER_RECORD:i=>i,SET_FAILOVER_REASON:i=>i});let ch,DS,Ws;(function(i){i[i.None=0]="None",i[i.Hand=1]="Hand",i[i.Yes=2]="Yes",i[i.No=3]="No",i[i.Fast=4]="Fast",i[i.Slow=5]="Slow",i[i.Bad=6]="Bad",i[i.Good=7]="Good",i[i.Clap=8]="Clap",i[i.Coffee=9]="Coffee",i[i.Clock=10]="Clock",i[i.Emoji=11]="Emoji"})(ch||(ch={})),function(i){i.LoginSuccess="zoomLoginSuccess",i.LoginFail="zoomLoginFail",i.CaptchaSuccess="captchaSuccess",i.CaptchaFail="captchaFail",i.SSOLoginSuccess="ssoLoginSuccess",i.SSOLoginFail="ssoLoginFail",i.JoinSuccess="joinSuccess",i.RegisterSuccess="registerSuccess"}(DS||(DS={})),function(i){i.Failover="failover",i.OnHold="on hold",i.Promote="promote",i.Depromote="depromote",i.JoinBreakoutRoom="join breakout room",i.MoveToBreakoutRoom="move to breakout room",i.BackToMainSession="back to main session"}(Ws||(Ws={}));const YL="js_media.min.js",$f="1502_js_media.min.js";let pE,kS,Bi,Lu,xa,mi;K.ConnectionState=void 0,function(i){i.CDN="CDN",i.Global="Global",i.CN="CN"}(pE||(pE={})),function(i){i.Connected="Connected",i.Reconnecting="Reconnecting",i.Closed="Closed",i.Fail="Fail"}(K.ConnectionState||(K.ConnectionState={})),function(i){i.Loading="loading",i.Success="success",i.Fail="fail"}(kS||(kS={})),function(i){i.Initial="initial",i.Joined="joined",i.Closed="closed"}(Bi||(Bi={})),function(i){i.AudioBridgeEnable="1,2"}(Lu||(Lu={})),function(i){i[i.NormalCase=-1]="NormalCase",i[i.NoHeartbeat=0]="NoHeartbeat",i[i.NoHeartbeatMChannel=1]="NoHeartbeatMChannel",i[i.NetworkChange=2]="NetworkChange",i[i.NotifyUiFailover=3]="NotifyUiFailover",i[i.InvalidParameters=4]="InvalidParameters",i[i.OnError=5]="OnError",i[i.OnErrorMChannel=6]="OnErrorMChannel",i[i.Disconnect=7]="Disconnect",i[i.DisconnectMChannel=8]="DisconnectMChannel",i[i.DisconnectXmpp=9]="DisconnectXmpp",i[i.RefreshPage=10]="RefreshPage"}(xa||(xa={})),function(i){i.LocalStorage="LocalStorage",i.SessionStorage="SessionStorage",i.Memory="Memory"}(mi||(mi={}));const Jh=Sa("{}");class ni{constructor(l){this.sessionStorageKey=void 0,this.localStorageKey=void 0,this.sessionCache=void 0,this.localCache=void 0,this.memoryCache=void 0,this.sessionStorageKey=Sa(`zoom-storage-${l}`),this.localStorageKey=Sa("zoom-local-storage"),this.memoryCache={},this.sessionCache=JSON.parse(Up(sessionStorage.getItem(this.sessionStorageKey)||Jh)),this.localCache=JSON.parse(Up(localStorage.getItem(this.localStorageKey)||Jh))}static init(l){this.instance=new ni(l)}static get(l){if(void 0===this.instance)throw new Error("read before initial");return this.instance.getValue(l).value}static set(l,u,p){if(void 0===this.instance)throw new Error("set before initial");return this.instance.setValue(l,u,p)}static remove(l){if(void 0===this.instance)throw new Error("remove before initial");return this.instance.removeValue(l)}static clearSession(){if(void 0===this.instance)throw new Error("clear before initial");return this.instance.memoryCache={},this.instance.sessionCache={},this.instance.localCache={},sessionStorage.removeItem(this.instance.sessionStorageKey)}getValue(l){return this.sessionCache.hasOwnProperty(l)?{value:this.sessionCache[l],type:mi.SessionStorage}:this.localCache.hasOwnProperty(l)?{value:this.localCache[l],type:mi.LocalStorage}:{value:this.memoryCache[l],type:mi.Memory}}setValue(l,u,p){if(!l)throw new Error("key is null");switch(p){case mi.SessionStorage:{const v=this.sessionCache[l];let y=u;return"function"==typeof u&&(y=u(v)),v!==y&&(this.sessionCache[l]=y,this.flushValue(mi.SessionStorage)),y}case mi.LocalStorage:{const v=this.localCache[l];let y=u;return"function"==typeof u&&(y=u(v)),v!==y&&(this.localCache[l]=y,this.flushValue(mi.LocalStorage)),y}case mi.Memory:{const v=this.memoryCache[l];let y=u;return"function"==typeof u&&(y=u(v)),this.memoryCache[l]=y,y}default:return null}}removeValue(l){const{type:u}=this.getValue(l);switch(u){case mi.SessionStorage:delete this.sessionCache[l],this.flushValue(mi.SessionStorage);break;case mi.LocalStorage:delete this.localCache[l],this.flushValue(mi.LocalStorage);break;case mi.Memory:delete this.memoryCache[l]}}flushValue(l){l===mi.SessionStorage?sessionStorage.setItem(this.sessionStorageKey,Sa(JSON.stringify(this.sessionCache))):l===mi.LocalStorage&&localStorage.setItem(this.localStorageKey,Sa(JSON.stringify(this.localCache)))}}function fE(){const i=navigator.userAgent;let l,u=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(u[1])?(l=/\brv[ :]+(\d+)/g.exec(i)||[],`IE ${l[1]||""}`):"Chrome"===u[1]&&(l=i.match(/\b(OPR|Edge)\/(\d+)/),l&&l.length)?l.slice(1).join(" ").replace("OPR","Opera"):(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],(l=i.match(/version\/(\d+)/i))&&u.splice(1,1,l[1]),jp()&&(u[0]="ios-safari"),u.join(""))}function sT(){const i=navigator.userAgent.toLowerCase();return!/opera|opr\/[\d]+/.test(i)&&/(msie|trident)/.test(i)}function $h(){return"object"==typeof WebAssembly&&"function"==typeof Worker}ni.instance=void 0;const Lg=()=>"function"==typeof AudioWorklet,PS=()=>sT(),NS=()=>{const{userAgent:i}=navigator;return!/opera|opr\/[\d]+/i.test(navigator.userAgent)&&!/edge\/(\d+)/i.test(navigator.userAgent)&&/chrome/i.test(i)&&/webkit/i.test(i)},jp=()=>{const{userAgent:i}=navigator;return/iPad|iPhone|iPod/i.test(i)||/MacIntel/i.test(navigator.platform)&&(null===(l=navigator)||void 0===l?void 0:l.maxTouchPoints)>2;var l},Q2=()=>/arm/i.test(navigator.userAgent),aT=()=>/\bCrOS\b/.test(navigator.userAgent);function Bu(){return Qp()||jp()}const Rv=()=>{var i;return!Bu()&&"function"==typeof window.OffscreenCanvas&&(null===(i=navigator)||void 0===i?void 0:i.hardwareConcurrency)>=4&&"function"==typeof requestAnimationFrame&&"function"==typeof SharedArrayBuffer};function Xh(){return"function"==typeof window.MediaStreamTrackProcessor}function Xf(){return"function"==typeof window.OffscreenCanvas}const mE=i=>{var l;return Rv()?aT()&&Q2()||aT()&&!Q2()?navigator.hardwareConcurrency>=4?9:4:(null===(l=navigator)||void 0===l?void 0:l.hardwareConcurrency)<4?9:25:i&&Xh()&&Xf()?4:1};function Qp(){return/android/i.test(navigator.userAgent)}function cT(){return Bu()||!navigator.mediaDevices.getSupportedConstraints().aspectRatio||/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}let La,ra;(function(i){i.VIDEO_ENCODE="0",i.VIDEO_DECODE="1",i.AUDIO_ENCODE="2",i.AUDIO_DECODE="3",i.SHARING_ENCODE="4",i.SHARING_DECODE="5"})(La||(La={})),function(i){i[i.NONE=0]="NONE",i[i.AES_256=1]="AES_256",i[i.AES_GCM=2]="AES_GCM"}(ra||(ra={}));const ec=Object.freeze({RWG_CHAT:{gcmType:1,sessionType:"RWG_CHAT"},XMPP_CHAT:{gcmType:1,sessionType:"XMPP_CHAT"},CC_MESSAGE:{gcmType:3,sessionType:"CC_MESSAGE"},BO_BROADCAST:{gcmType:1,sessionType:"BO_BROADCAST"}});let Ur,Hp;(function(i){i.WebclientOpt="WEB_CLIENT_OPT",i.WebclientWebinarToken="WEB_CLIENT_WEBINAR_TOKEN",i.WebclientMeetingToken="WEB_CLIENT_MEETING_TOKEN",i.WebclientZtk="WEB_CLIENT_ZTK",i.WebclientZsk="WEB_CLIENT_ZSK",i.WebclientTk="WEB_CLIENT_TK",i.WebclientIVState="WEB_CLIENT_IV_STATE",i.WebclientIsOnHold="WEB_CLIENT_IS_ON_HOLD",i.WebclientParticipantId="WEB_CLIENT_PARTICIPANT_ID",i.WebclientZoomId="WEB_CLIENT_ZOOM_ID",i.WebclientUserName="WEB_CLIENT_USER_NAME",i.WebclientUserEmail="WEB_CLIENT_USER_EMAIL",i.WebclientBreakoutRoomAttendeeStatus="WEB_CLIENT_BO_ATTENDEE_STATUS",i.WebclientBreakoutRoomCommand="WEB_CLIENT_BO_COMMAND",i.WebclientAudioEncryptKey="WEB_CLIENT_AUDIO_ENCRYPT_KEY",i.WebclientVideoEncryptKey="WEB_CLIENT_VIDEO_ENCRYPT_KEY",i.WebclientSharingEncryptKey="WEB_CLIENT_SHARING_ENCRYPT_KEY",i.WebclientFailoverCount="WEB_CLIENT_FAILOVER_COUNT"})(Ur||(Ur={})),function(i){i.WebclientDeviceId="WEBCLIENT_DEVICE_ID"}(Hp||(Hp={}));const gE=(window.crypto||window.msCrypto).subtle,Zf=Ur.WebclientIVState,uT=Object.keys(ec).map(i=>ec[i].sessionType);let ld=(()=>{class i{constructor(u,p,v){this.isGCMEnabled=void 0,this.gcmSessionKey=void 0,this.gcmMainSessionKey=void 0,this.zoomId=void 0,this.resetParameters(u,p,v),ni.set(Zf,{},mi.SessionStorage)}static init(u,p,v){this.instance?this.instance.resetParameters(u,p,v):this.instance=new i(u,p,v)}static destroy(){this.instance&&(this.instance=void 0)}resetParameters(u,p,v){this.isGCMEnabled=!(sT()||!$h())&&v===ra.AES_GCM,this.gcmSessionKey=vl(p),this.gcmMainSessionKey||(this.gcmMainSessionKey=this.gcmSessionKey),this.zoomId=String(u)}beginCrypto(u,p,v){const y=new Uint32Array(1);y[0]=9,y[0]+=Number(v);const C=new Uint8Array(y.buffer);let w=new Uint8Array(132);const D=vl(p);return w.set(D,0),w.set(C,D.length),w=w.subarray(0,D.length+4),gE.importKey("raw",u,{name:"HMAC",hash:"SHA-256"},!0,["sign"]).then(P=>gE.sign({name:"HMAC"},P,w)).then(P=>gE.importKey("raw",P,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))}getNextIV(u){const p=ni.get(Zf);return void 0===p[u]?(p[u]=0,ni.set(Zf,p,mi.SessionStorage)):ni.set(Zf,v=>cn(cn({},v),{},{[u]:v[u]+1}),mi.SessionStorage)}resetIVState(){const u=ni.get(Zf);if(void 0!==u){const p=Object.keys(u).filter(v=>uT.indexOf(v)>-1);p.length>0&&(p.forEach(v=>{u[v]+=1e6}),ni.set(Zf,u,mi.SessionStorage))}}static resetIV(){if(void 0===this.instance)throw new Error("reset before intialize");this.instance.resetIVState()}static beginEncrypt(u){let{text:p,type:v}=u;const y=new Uint8Array(0);if(this.instance&&this.instance.isGCMEnabled){const w=this.instance.getNextIV(v.sessionType),D=new ArrayBuffer(16),P=new Uint8Array(D);new DataView(D).setUint32(0,w,!0);let L=null;return L="BO_BROADCAST"===v.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(L,this.instance.zoomId,v.gcmType).then(W=>{const re=(new TextEncoder).encode(p);return gE.encrypt({name:"AES-GCM",iv:P,additionalData:y,tagLength:128},W,re)}).then(W=>{const ee=new ArrayBuffer(1+P.byteLength+2+y.byteLength+4+W.byteLength);new Uint8Array(ee)[0]=P.length,new Uint8Array(ee,1,P.byteLength).set(P),new DataView(ee).setUint16(1+P.byteLength,y.length,!0),new Uint8Array(ee,3+P.byteLength).set(y),new DataView(ee).setUint32(1+P.byteLength+2+y.byteLength,W.byteLength-16,!0),new Uint8Array(ee,1+P.byteLength+2+y.byteLength+4).set(new Uint8Array(W));const te=new Uint8Array(ee).reduce((oe,Ee)=>oe+String.fromCharCode(Ee),"");return window.btoa(te).replace(/_/g,"/").replace(/-/g,"+").replace(/\=/g,"")})}return Promise.resolve(Sa(p))}static beginDecrypt(u){let{decryptedText:p,type:v,zoomId:y}=u;if(this.instance&&this.instance.isGCMEnabled){const C=function(Te){let De;const Le=Te.length,et=new Array(Le);for(De=0;De<Le;++De)et[De]=255&Te.charCodeAt(De);return new Uint8Array(et)}(atob(p.replace(/_/g,"/").replace(/-/g,"+"))),w=C[0],D=C.slice(1,w+1),P=C.slice(1+w,3+w),L=new DataView(P.buffer).getUint16(0,!0),W=C.slice(1+w+2,1+w+2+L),re=C.slice(1+w+2+L,1+w+2+L+4),ee=new DataView(re.buffer).getUint32(0,!0),te=C.slice(1+w+2+L+4,1+w+2+L+4+ee),oe=C.slice(1+w+2+L+4+ee);let Ee=null;return Ee="BO_BROADCAST"===v.sessionType?this.instance.gcmMainSessionKey:this.instance.gcmSessionKey,this.instance.beginCrypto(Ee,y,v.gcmType).then(Te=>{const De=function(Le,et){Le=new Uint8Array(Le),et=new Uint8Array(et);const lt=new Uint8Array(Le.length+et.length);return lt.set(Le),lt.set(et,Le.length),lt}(te,oe);return gE.decrypt({name:"AES-GCM",iv:D,additionalData:W,tagLength:8*oe.length},Te,De.buffer)}).then(Te=>({message:(new TextDecoder).decode(Te),iv:D,aad:W})).catch(Te=>({message:"[This is an encrypted message]",iv:D,aad:W}))}{const C=new TextDecoder("utf-8");return Promise.resolve({message:C.decode(vl(p))})}}}return i.instance=void 0,i})();const Bg=20234,Mo=7937,tc=7938,Ov=12039,lT=16138;let Vi,as,Yi,Dv,em;(function(i){i[i.NoAttendee=0]="NoAttendee",i[i.All=1]="All",i[i.AllPanelist=2]="AllPanelist",i[i.Host=3]="Host",i[i.NoOne=4]="NoOne",i[i.EveryonePublicly=5]="EveryonePublicly"})(Vi||(Vi={})),function(i){i[i.AllPanelist=1]="AllPanelist",i[i.Everyone=2]="Everyone",i[i.Invalid=0]="Invalid"}(as||(as={})),function(i){i[i.All=0]="All",i[i.Panelist=1]="Panelist",i[i.IndividualCcPanelist=2]="IndividualCcPanelist",i[i.Individual=3]="Individual",i[i.SilentModeUsers=4]="SilentModeUsers"}(Yi||(Yi={})),function(i){i[i.None=0]="None",i[i.Delete=1]="Delete",i[i.Modify=2]="Modify"}(Dv||(Dv={})),function(i){i[i.Success=0]="Success",i[i.Delete=1]="Delete",i[i.Block=3]="Block"}(em||(em={}));const dT=[Vi.All,Vi.Host,Vi.NoOne,Vi.EveryonePublicly],qL=[Vi.NoOne,Vi.All,Vi.AllPanelist],_E={AllPanelist:11,Everyone:12},G4={[_E.AllPanelist]:as.AllPanelist,[_E.Everyone]:as.Everyone},vE={userId:Yi.All,displayName:"Everyone",isHost:!1,isCoHost:!1},tm={userId:Yi.Panelist,displayName:"All panelists"},H2={userId:Yi.SilentModeUsers,displayName:"Everyone (in Waiting Room)",isHost:!1,isCoHost:!1};let su;!function(i){i.Open="open",i.Message="message",i.Error="error",i.Close="close"}(su||(su={}));class nm{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.intervalsToBeCleardWhenSocketClose=[],this.heartBeatInterval=6e4,this.eventHandlers=new Map,this.websocket=null,this.seq=1}on(l,u){let p=this.eventHandlers.get(l);p||(p=[]),p.push(u),this.eventHandlers.set(l,p)}off(l,u){const p=this.eventHandlers.get(l);if(p){const v=p.filter(y=>y!==u);this.eventHandlers.set(l,v)}}emit(l,u){const p=this.eventHandlers.get(l);p&&p instanceof Array&&p.slice(0).forEach(v=>{try{v(u)}catch(y){console.error(y)}})}sendMessageToRwg(l){this.seq+=1;const u=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(l,{seq:u}))),u}connect(l){this.websocket=new WebSocket(l),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var l;null===(l=this.websocket)||void 0===l||l.close()}addHeartBeat(){const l=setInterval(()=>{this.sendMessageToRwg({evt:0})},this.heartBeatInterval);this.intervalsToBeCleardWhenSocketClose.push(l)}clearIntervals(){this.intervalsToBeCleardWhenSocketClose.forEach(l=>clearInterval(l))}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",l=>{this.addHeartBeat(),this.emit("open",l)}),this.websocket.addEventListener("message",l=>{this.emit("message",l)}),this.websocket.addEventListener("close",l=>{this.clearIntervals(),this.emit("close",l)}),this.websocket.addEventListener("error",l=>{this.emit("error",l)}))}joinMeeting(l){return{seq:this.sendMessageToRwg({evt:4097,body:{meetingtoken:l}})}}lockMeeting(l){return{seq:this.sendMessageToRwg({evt:4099,body:{bLock:l}})}}endMeeting(){return{seq:this.sendMessageToRwg({evt:4101,body:{}})}}leaveMeeting(){return{seq:this.sendMessageToRwg({evt:4103,body:{}})}}recordMeeting(l,u){return{seq:this.sendMessageToRwg({evt:4105,body:{bRecord:l,bPause:u}})}}allowSelfRecord(l){return{seq:this.sendMessageToRwg({evt:4325,body:{bAllowISORecord:l}})}}enableZoomIQRecord(l){return{seq:this.sendMessageToRwg({evt:4318,body:{check:l}})}}expel(l){return{seq:this.sendMessageToRwg({evt:4107,body:{id:l}})}}expelAttendee(l){return{seq:this.sendMessageToRwg({evt:4205,body:{jid:l}})}}rename(l,u,p){return{seq:this.sendMessageToRwg({evt:4109,body:{id:l,dn2:u,olddn2:p}})}}assignHost(l,u){return{seq:this.sendMessageToRwg({evt:4111,body:{id:l,bCoHost:u}})}}reclaimHost(l){return{seq:this.sendMessageToRwg({evt:4133,body:{id:l,bCoHost:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}})}}revokeCoHost(l){return{seq:this.sendMessageToRwg({evt:4195,body:{id:l}})}}putOnHold(l,u){return{seq:this.sendMessageToRwg({evt:4113,body:{id:l,bHold:u}})}}setMuteOnEntry(l){return{seq:this.sendMessageToRwg({evt:4115,body:{bOn:l}})}}setHoldOnEntry(l){return{seq:this.sendMessageToRwg({evt:4117,body:{bOn:l}})}}inviteCRCDevice(l,u){return{seq:this.sendMessageToRwg({evt:4119,body:{ip:l,type:u,encrypt:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2}})}}cancelInviteCRCDevice(l){return{seq:this.sendMessageToRwg({evt:4121,body:{transID:l}})}}sendCloseCaption(l){return{seq:this.sendMessageToRwg({evt:4125,body:cn({},l)})}}allowViewParticipantNumber(l){return{seq:this.sendMessageToRwg({evt:4127,body:{bOn:l}})}}lowerAllHands(){return{seq:this.sendMessageToRwg({evt:4129,body:{}})}}raiseLowerHand(l,u){return{seq:this.sendMessageToRwg({evt:4131,body:{id:l,bOn:u}})}}chat(l,u,p,v){const y={text:l,destNodeID:u};return p&&Object.assign(y,{sn:p}),v&&Object.assign(y,{attendeeNodeID:v}),{seq:this.sendMessageToRwg({evt:4135,body:y})}}assignCC(l,u){return{seq:this.sendMessageToRwg({evt:4137,body:{id:l,bCCEditor:u}})}}enableLT(l){return{seq:this.sendMessageToRwg({evt:4227,body:{op:l?2:4}})}}enableNewLLT(){return{seq:this.sendMessageToRwg({evt:4285})}}enableManualCaption(l){return{seq:this.sendMessageToRwg({evt:4291,body:{op:l?1:0}})}}setTranslationLanguage(l){return l?{seq:this.sendMessageToRwg({evt:4305,body:{type:1,lang:l}})}:{seq:this.sendMessageToRwg({evt:4305,body:{type:3}})}}setSpokenLanguage(l){return{seq:this.sendMessageToRwg({evt:4287,body:{lang:l}})}}allowAskLT(l){return{seq:this.sendMessageToRwg({evt:4263,body:{bAnonymous:l}})}}approveLT(){return{seq:this.sendMessageToRwg({evt:4262,body:{bApproved:!0}})}}askLT(l){return{seq:this.sendMessageToRwg({evt:4261,body:{bAnonymous:l}})}}setChatPriviledge(l){return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}setPanelistChatPrivilege(l){if(!Object.values(_E).includes(l))throw Error("Invalid panelist chat privilege req value");return{seq:this.sendMessageToRwg({evt:4141,body:{chatPriviledge:l}})}}sendFeedback(l){return{seq:this.sendMessageToRwg({evt:4143,body:{feedback:l}})}}clearFeedback(){return{seq:this.sendMessageToRwg({evt:4145,body:{}})}}allowUnmuteVideo(l){return{seq:this.sendMessageToRwg({evt:4147,body:{bOn:l}})}}allowUnmuteAudio(l){return{seq:this.sendMessageToRwg({evt:4149,body:{bOn:l}})}}allowRaiseHand(l){return{seq:this.sendMessageToRwg({evt:4151,body:{bOn:l}})}}boToken(l){return{seq:this.sendMessageToRwg({evt:4173,body:{topic:l}})}}startBO(l){return{seq:this.sendMessageToRwg({evt:4175,body:{proto:l}})}}stopBO(l){return{seq:this.sendMessageToRwg({evt:4177,body:{status:l}})}}assignToBO(l,u){return{seq:this.sendMessageToRwg({evt:4179,body:{targetID:l,targetBID:u}})}}switchBO(l,u){return{seq:this.sendMessageToRwg({evt:4181,body:{targetID:l,targetBID:u}})}}wantJoinBO(l,u){return{seq:this.sendMessageToRwg({evt:4183,body:{targetID:l,targetBID:u}})}}joinBO(l){return{seq:this.sendMessageToRwg({evt:4193,body:{targetBID:l}})}}leaveBO(){return{seq:this.sendMessageToRwg({evt:4185,body:{reason:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}broadcastBO(l){return{seq:this.sendMessageToRwg({evt:4187,body:{textContent:l}})}}askForHelpBO(l){return{seq:this.sendMessageToRwg({evt:4189,body:{targetID:l}})}}askForHelpResultBO(l,u){return{seq:this.sendMessageToRwg({evt:4191,body:{targetID:l,helpResult:u}})}}allowParticipantRename(l){return{seq:this.sendMessageToRwg({evt:4163,body:{bOn:l}})}}allowMessageFeedbackNotify(l,u){return{seq:this.sendMessageToRwg({evt:4171,body:{bOn:l,id:u}})}}setPlayChime(l,u){return{seq:this.sendMessageToRwg({evt:4197,body:{bOn:l,id:u}})}}admitAllSilentUsers(){return{seq:this.sendMessageToRwg({evt:4199,body:{}})}}bindTeleUser(l,u,p){return{seq:this.sendMessageToRwg({evt:4201,body:{teleUserID:l,targetUserID:u,bBind:p}})}}practiceSession(){return{seq:this.sendMessageToRwg({evt:4207,body:null})}}roleChangeWebinar(l,u,p,v){return{seq:this.sendMessageToRwg({evt:4209,body:{jid:u,userID:p,clientCap:v,bPromote:l}})}}sendPromoteConsent(l,u){return{seq:this.sendMessageToRwg({evt:4254,body:{agreed:l,req_id:u}})}}batchCreateBOToken(l){const u=l.map((p,v)=>({topic:p,index:v}));return{seq:this.sendMessageToRwg({evt:4211,body:u})}}mute(l,u){return{seq:this.sendMessageToRwg({evt:8193,body:{bMute:u,id:l}})}}audioDrop(l){return{seq:this.sendMessageToRwg({evt:8195,body:{id:l}})}}audioDialout(l,u,p,v,y){return{seq:this.sendMessageToRwg({evt:8197,body:{pn:l,dn2:Sa(u),bCallme:p,bPressOne:v,bGreeting:y}})}}audioCancelDialout(l,u){return{seq:this.sendMessageToRwg({evt:8199,body:{pn:l,bCallme:u}})}}audioMuteAll(l){return{seq:this.sendMessageToRwg({evt:8201,body:{bMute:l}})}}allowToTalk(l,u){return{seq:this.sendMessageToRwg({evt:8204,body:{id:l,bAllowTalk:u}})}}subscribeVideo(){return{seq:this.sendMessageToRwg({evt:12289,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,size:arguments.length>1?arguments[1]:void 0,bOn:arguments.length>2?arguments[2]:void 0}})}}unsubscribeVideo(){return{seq:this.sendMessageToRwg({evt:12291,body:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})}}muteAttendeeVideo(l,u){return{seq:this.sendMessageToRwg({evt:12297,body:{id:l,bOn:u}})}}notifyRwgIsMuteVideo(l,u){return this.muteAttendeeVideo(l,u)}pauseSharing(){return{seq:this.sendMessageToRwg({evt:16385,body:{}})}}resumeSharing(){return{seq:this.sendMessageToRwg({evt:16387,body:{}})}}allowAnonymousQuestion(l,u){return{seq:this.sendMessageToRwg({evt:4155,body:{userId:l,bOn:u}})}}allowViewAll(l,u){return{seq:this.sendMessageToRwg({evt:4157,body:{userId:l,bOn:u}})}}allowVote(l,u){return{seq:this.sendMessageToRwg({evt:4159,body:{userId:l,bOn:u}})}}allowComment(l,u){return{seq:this.sendMessageToRwg({evt:4161,body:{userId:l,bOn:u}})}}sharingRequestRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16389,body:{id:l,bOn:u}})}}subscribeGrabRemoteControl(l,u){return{seq:this.sendMessageToRwg({evt:16393,body:{id:l,bOn:u}})}}subscribeSharing(l,u,p){const v={id:l,size:u};return p&&Object.assign(v,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16415,body:v})}}unsubscribeSharing(l,u){const p={id:l};return u&&Object.assign(p,{bShareToBO:!0}),{seq:this.sendMessageToRwg({evt:16417,body:p})}}sendRWGConnectionPerformance(l){return{seq:this.sendMessageToRwg({evt:4167,body:{data:l}})}}sendSdkKeyToMonitor(l,u,p){return{seq:this.sendMessageToRwg({evt:4167,body:{data:`ZoomConferenceClient,videoapp_HTML5_sdk_web_join,${p},2,${u},${l}`}})}}sendDatachannelOffer(l){return{seq:this.sendMessageToRwg({evt:24321,offer:l})}}joinOrLeaveVoip(l){return{seq:this.sendMessageToRwg({evt:8203,body:{bOn:l}})}}startSharing(l,u){return{seq:this.sendMessageToRwg({evt:16409,body:cn({id:l,boOn:!1},u??{})})}}stopSharing(l){return{seq:this.sendMessageToRwg({evt:16409,body:{id:l,bOn:!0}})}}lockSharing(l){return{seq:this.sendMessageToRwg({evt:4169,body:{lockShare:l}})}}startShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!0}})}}stopShareToBreakoutRoom(l){return{seq:this.sendMessageToRwg({evt:16425,body:{id:l,bShareToBO:!1}})}}preAssignBreakoutRoom(){return{seq:this.sendMessageToRwg({evt:4213,body:{}})}}claimHost(l){return{seq:this.sendMessageToRwg({evt:4215,body:{hostKey:l}})}}allowMultiplePin(l,u){return{seq:this.sendMessageToRwg({evt:4217,body:{userID:l,bOn:u}})}}spotlightVideo(l,u){return{seq:this.sendMessageToRwg({evt:4219,body:cn({id:l},u)})}}connectCamera(l,u){return{seq:this.sendMessageToRwg({evt:12307,body:{id:l,bOn:u}})}}followHostLayout(l){return{seq:this.sendMessageToRwg({evt:4223,body:{bFollowHostVideo:l}})}}setVideoDragLayout(l){return{seq:this.sendMessageToRwg({evt:4218,body:{drag_list:l}})}}chatCmdReq(l,u){return{seq:this.sendMessageToRwg({evt:4237,body:{msgID:l,cmd:u}})}}activeAppLinkReq(l){return{seq:this.sendMessageToRwg({evt:4257,body:{appId:l}})}}activeAppInfoReq(){return{seq:this.sendMessageToRwg({evt:4255,body:{}})}}muteShareAudio(l){return{seq:this.sendMessageToRwg({evt:16423,body:{bOn:!0,bShareAudio:!l}})}}localMuteAudio(l,u){return{seq:this.sendMessageToRwg({evt:8209,body:{id:l,bMute:u}})}}changeSharePronoun(l,u){return{seq:this.sendMessageToRwg({evt:4264,body:{bPronoun:l,strPronoun:u}})}}sendReceivingSharingReady(l){return{seq:this.sendMessageToRwg({evt:16421,body:{ssrc:l}})}}sendManualCaption(l){return{seq:this.sendMessageToRwg({evt:4289,body:cn({},l)})}}sendPollingAction(l,u,p){return{seq:this.sendMessageToRwg({evt:4224,body:cn({action:l,PollingId:u},p)})}}broadcastUserNetworkQuality(l){return{seq:this.sendMessageToRwg({evt:4331,body:{type:l.isUplink,level:l.level,bwLevel:l.bwLevel}})}}sendFarEndCameraControl(l,u,p){return{seq:this.sendMessageToRwg({evt:4329,body:{cmd:l,userID:u,buttonID:p}})}}sendCameraAblity(l){return{seq:this.sendMessageToRwg({evt:4330,body:cn(cn({},l),{},{focus:!1})})}}}let Wo=(()=>{class i extends nm{static createAgent(){return this.rwgInstance||(this.rwgInstance=new i),this.rwgInstance}}return i.rwgInstance=null,i})(),LS=(()=>{class i extends nm{static getInstance(){return this.instance||(this.instance=new i),this.instance}}return i.instance=null,i})();const AE=[{name:"audio_simd.min.js",category:"audio",type:"worker",tag:"simd",alias:"audioSIMDWorkletPath"},{name:"audio.simd.wasm",category:"audio",type:"wasm",tag:"simd",alias:"audioSIMDWasm"},{name:"js_audio_process.min.js",category:"audio",type:"worker",tag:"",alias:"audioWorkerPath"},{name:"audio.encode.wasm",category:"audio",type:"wasm",tag:"",alias:"audioWasm"},{name:"js_audio_worklet.min.js",category:"audio",type:"worklet",tag:"",alias:"audioWorkletPath"},{name:"video_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"videoMSIMDWorkerPath"},{name:"video.mtsimd.wasm",category:"video",type:"wasm",tag:"simd,thread",alias:"videoMSIMDWasm"},{name:"video_m.min.js",category:"video",type:"worker",tag:"thread",alias:"videoMtWorkerPath"},{name:"video.mt.wasm",category:"video",type:"wasm",tag:"thread",alias:"videoMtWasm"},{name:"video_simd.min.js",category:"video",type:"worker",tag:"simd",alias:"videoSIMDWorkerPath"},{name:"video.simd.wasm",category:"video",type:"wasm",tag:"simd",alias:"videoSIMDWasm"},{name:"video_s.min.js",category:"video",type:"worker",tag:"",alias:"videoWorkerPath"},{name:"video.decode.wasm",category:"video",type:"wasm",tag:"",alias:"videoWasm"},{name:"video_share_mtsimd.min.js",category:"video",type:"worker",tag:"simd,thread",alias:"vsmiworkerpath"},{name:"sharing_mtsimd.min.js",category:"sharing",type:"worker",tag:"simd,thread",alias:"sharingMSIMDWorkerPath"},{name:"sharing_m.min.js",category:"sharing",type:"worker",tag:"thread",alias:"sharingMtWorkerPath"},{name:"sharing_simd.min.js",category:"sharing",type:"worker",tag:"simd",alias:"sharingSIMDWorkerPath"},{name:"sharing_s.min.js",category:"sharing",type:"worker",tag:"",alias:"sharingWorkerPath"}],BS=["dimension"],yE=["isFromMainSession"];let ia;!function(i){i.VideoEncode="0",i.VideoDecode="1",i.AudioEncode="2",i.AudioDecode="3",i.SharingEncode="4",i.SharingDecode="5"}(ia||(ia={}));const EE=Ur.WebclientIVState;let ji=(()=>{class i{static getInstance(){return void 0===this.agentInstance&&(this.agentInstance=new i),this.agentInstance}constructor(){this.assetsPath=void 0,this.instance=void 0,this.callbackList=void 0,this.mediaWorkersPath=void 0,this.constraints=void 0,this.svcUrl=void 0,this.meetingNumber=void 0,this.confId=void 0,this.mediaSocketAddress=void 0,this.currentUserId=void 0,this.receivedSharingCanvas=void 0,this.sharingCanvas=void 0,this.mediaOptions=void 0,this.callbackList=[]}init(){if(!this.instance){const u={ivObj:{[La.AUDIO_ENCODE]:ni.get(EE)&&ni.get(EE)[La.AUDIO_ENCODE],[La.VIDEO_ENCODE]:ni.get(EE)&&ni.get(EE)[La.VIDEO_ENCODE],[La.SHARING_ENCODE]:ni.get(EE)&&ni.get(EE)[La.SHARING_ENCODE]}};this.instance=new JsMediaSDK_Instance(u),this.instance.setRWGAgent(Wo.createAgent())}}setAssetsAndConstraint(u,p,v,y){var C,w,D;this.assetsPath=u,this.constraints=p,this.mediaWorkersPath=(w=this.assetsPath,D=!!v,AE.reduce((P,L)=>{const{name:W,alias:re}=L;return Object.assign(P,{[`${re}`]:`${w}/${D?"1502_":""}${W}`}),P},{})),this.onMediaSDKCallback=this.onMediaSDKCallback.bind(this),this.mediaOptions=y,null===(C=this.instance)||void 0===C||C.JsMediaSDK_PreLoad(this.mediaWorkersPath,this.onMediaSDKCallback,y)}onMediaSDKCallback(u,p){this.callbackList.length>0&&this.callbackList.forEach(v=>v(u,p))}registerCallback(u){this.callbackList.push(u)}unregisterCallback(u){this.callbackList=this.callbackList.filter(p=>p!==u)}static isSupportVideoEncodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoEncodeHardwareAcceleration()}static isSupportVideoDecodeHardwareAcceleration(){return JsMediaSDK_Instance.util.IsSupportVideoDecodeHardwareAcceleration()}static isCompatibleHardwareForEncode(){return"function"==typeof window.OffscreenCanvas&&0==JsMediaSDK_Instance.util.AdapterWhiteListCheckForEncoder()}static getPTZCapability(){var u,p,v,y,C,w;return{pan:!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(p=u.isSupportCameraPan)||void 0===p||!p.call(u)),tilt:!(null===(v=JsMediaSDK_Instance.util)||void 0===v||null===(y=v.isSupportCameraTilt)||void 0===y||!y.call(v)),zoom:!(null===(C=JsMediaSDK_Instance.util)||void 0===C||null===(w=C.isSupportCameraZoom)||void 0===w||!w.call(C))}}static isSupportVideoShare(){var u,p;return!(null===(u=JsMediaSDK_Instance.util)||void 0===u||null===(p=u.isSupportVideoShare)||void 0===p||!p.call(u))}connect(u){var p,v,y,C,w,D;let{svcUrl:P,meetingNumber:L,conId:W,e2eEncrypt:re,isViewOnly:ee,currentUserId:te,isWebinar:oe,enableAudioQos:Ee,enableVideoQos:Te=!1}=u;this.svcUrl=P,this.meetingNumber=L,this.confId=W;const De={videoSocketAddress:`wss://${yn=P}/wc/media/${Kn=L}?type=v&cid=${Pt=W}`,audioSocketAddress:`wss://${yn}/wc/media/${Kn}?type=a&cid=${Pt}`,sharingSocketAddress:`wss://${yn}/wc/media/${Kn}?type=${PS()?"j":"s"}&cid=${Pt}`};var yn,Kn,Pt;this.mediaSocketAddress=De,this.currentUserId=te;const Le=mE(null===(p=this.mediaOptions)||void 0===p?void 0:p.enableMultiDecodeVideoWithoutSAB);var et,lt,pt,ht,gt,Yt,Xt,un,Tt;null===(v=this.instance)||void 0===v||v.setPropsBeforeInit({callback:this.onMediaSDKCallback,audioWorkletPath:$h()?null===(y=this.mediaWorkersPath)||void 0===y?void 0:y.audioWorkletPath:void 0,e2eEncrypt:re,isEnableListenInitEvent:!0}),!0===(null===(C=this.constraints)||void 0===C?void 0:C.audio)&&$h()&&!Bu()&&((oe||Lg())&&(null===(et=this.instance)||void 0===et||et.initAudioDecode(this.mediaWorkersPath,De.audioSocketAddress,te,qh,W,L,Le,Ee)),!Lg()||oe&&ee||null===(lt=this.instance)||void 0===lt||lt.initAudioEncode(this.mediaWorkersPath,De.audioSocketAddress,te,qh,W,L,Le,Ee)),!0===(null===(w=this.constraints)||void 0===w?void 0:w.video)&&$h()&&(null===(pt=this.instance)||void 0===pt||pt.initVideoDecode(this.mediaWorkersPath,De.videoSocketAddress,te,qh,W,L,Le,null===(ht=null===(gt=JsMediaSDK_Instance.util)||void 0===gt?void 0:gt.isGraphicShouldUseHardwareAccelerationDecode())||void 0===ht||ht,Te),oe&&ee||null===(Yt=this.instance)||void 0===Yt||Yt.initVideoEncode(this.mediaWorkersPath,De.videoSocketAddress,te,qh,W,L,Le,!1,Te,!0,!0)),!0===(null===(D=this.constraints)||void 0===D?void 0:D.screen)&&($h()?(null===(Xt=this.instance)||void 0===Xt||Xt.initSharingDecode(this.mediaWorkersPath,De.sharingSocketAddress,te,qh,W,L,Le),oe&&ee||null===(un=this.instance)||void 0===un||un.initSharingEncode(this.mediaWorkersPath,De.sharingSocketAddress,te,qh,W,L,Le)):null===(Tt=this.instance)||void 0===Tt||Tt.initSharingDecode(De.sharingSocketAddress))}destroy(){var u;null===(u=this.instance)||void 0===u||u.destroy(),this.instance=null,this.callbackList=[],[ia.AudioDecode,ia.AudioEncode,ia.VideoDecode,ia.VideoEncode].forEach(p=>{var v;null===(v=this.instance)||void 0===v||v.updateQosSubscription(!1,p)})}disconnect(){var u,p;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(17,{}),null===(p=this.instance)||void 0===p||p.JsMediaSDK_UnInit()}muteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(8,{ssrc:0})}unmuteAudio(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(7,{ssrc:0,AudioSelectValue:0})}joinComputerAudio(u,p,v,y,C){var w;return null===(w=this.instance)||void 0===w?void 0:w.Notify_MeidaSDK(22,cn({CaptureAudio:y,CaptureAudioInfo:{ssrc:u,AudioSelectValue:"default"===p?null:p},speakerInfo:{defaultDeviceId:v}},C?{useAudioBridge:!0,audioBridge:C}:{}))}leaveComputerAudio(){var u;return null===(u=this.instance)||void 0===u?void 0:u.Notify_MeidaSDK(21,null)}joinSharingAudio(u){var p;let{ssrc:v,microphoneDeviceId:y,speakerDeviceId:C,isCaptureAudio:w}=u;return null===(p=this.instance)||void 0===p?void 0:p.Notify_MeidaSDK(72,{CaptureAudio:w,CaptureAudioInfo:{ssrc:v,AudioSelectValue:"default"===y?null:y},speakerInfo:{defaultDeviceId:C},checkAutoplay:!1})}leaveSharingAudio(u){var p;return null===(p=this.instance)||void 0===p?void 0:p.Notify_MeidaSDK(73,{isPause:u?1:0})}changeSpeaker(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(11,{ssrc:0,AudioSelectValue:u})}changeMicrophone(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(18,{ssrc:0,AudioSelectValue:"default"===u?null:u})}restoreWebRTC(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(19,{ssrc:0,AudioSelectValue:"default"===u?null:u})}renderVideo(u,p,v,y,C,w,D,P,L,W,re){var ee;null===(ee=this.instance)||void 0===ee||ee.Notify_MeidaSDK(1,{userId:p,width:y,height:C,x:w,y:D,quality:P,isMyself:L,canvas:u,enableWaterMark:re,waterMarkText:W,zone:v})}stopRenderVideo(u,p,v,y){var C;null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(2,{canvas:u,userId:p,RGBA:y,doNotClean:arguments.length>4&&void 0!==arguments[4]&&arguments[4],zone:v})}startCaptureVideo(u,p,v,y,C,w){var D;let P=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const L=arguments.length>7&&arguments[7]?i.getPTZCapability():void 0;null===(D=this.instance)||void 0===D||D.Notify_MeidaSDK(3,cn({ssid:u,width:v,height:y,fps:24,video:C,usingFacingMode:w,VideoSelectValue:"default"===p?null:p,disableOriginalRatio:P},L))}stopCaptureVideo(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(4,{ssrc:0})}changeCamera(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(12,{VideoSelectValue:"default"===u?null:u})}switchCanvasForVideoCapture(u){var p;let v=u;Array.isArray(u)||(v=[u]),null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(25,v)}renderSharing(u,p){var v;let y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.receivedSharingCanvas=p,null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(23,{width:0,height:0,ssrc:u,canvas:p,enableWaterMark:y,waterMarkText:C,isFromMainSession:w})}stopRenderSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(24,{})}switchSharingSource(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(36,{ssrc:u,isFromMainSession:Number(arguments.length>1&&void 0!==arguments[1]&&arguments[1])})}ajustmentReceivedSharingCanvas(u,p){if(this.receivedSharingCanvas)try{this.receivedSharingCanvas.width=u,this.receivedSharingCanvas.height=p}catch{}}startRemoteControl(u,p,v){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(26,cn({socketURL:`wss://${this.svcUrl}`,meetingID:this.meetingNumber,condID:this.confId,os:p,dom:u},v))}stopRemoteControl(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(28)}resendRemoteControlPositionPDU(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(41)}updateRemoteControlProperties(u){var p;const{dimension:v}=u,y=Dr(u,BS);null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(27,cn(cn({},v),y))}startDesktopSharing(u,p,v,y){var C;let w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.sharingCanvas=document.querySelector(`#${p}`);let P={};y&&(P={share2ndCamera:!0,share2ndCameraParams:{VideoSelectValue:"default"===y.cameraId?null:y.cameraId,width:y.width,height:y.height}}),null===(C=this.instance)||void 0===C||C.Notify_MeidaSDK(30,cn(cn({mode:D,ssid:u,canvas:p,video:v},P),{},{showShareAudioOption:w}))}stopDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(31,{})}pauseDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(32,{})}resumeDesktopSharing(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(33,{})}selectLanguageChannelForNewLTT(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(57,{lang:u})}changeSharingSecondCamera(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(49,{VideoSelectValue:u})}ajustmentSharingCanvas(u,p){if(this.sharingCanvas)try{this.sharingCanvas.width=u,this.sharingCanvas.height=p}catch{}}checkChromeSharingExtension(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(34,{})}enableAudioEncode(){var u,p;null===(u=this.instance)||void 0===u||u.initAudioEncode(this.mediaWorkersPath,this.mediaSocketAddress.audioSocketAddress,this.currentUserId,qh,this.confId,this.meetingNumber,mE(null===(p=this.mediaOptions)||void 0===p?void 0:p.enableMultiDecodeVideoWithoutSAB))}sendUserNodeList(u,p){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(43,{userList:u,encryptKey:p})}updateRenderedSharingDimension(u,p){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(44,{width:u,height:p})}pauseOrResumeAudio(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(45,{bPause:u})}updateRenderedVideoCanvasDimension(u,p,v){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(46,{canvas:u,width:p,height:v})}clearVideoCanvas(u,p){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(47,{id:u,RGBA:p})}adjustRenderedVideoPosition(u,p,v,y,C,w,D,P){var L;null===(L=this.instance)||void 0===L||L.Notify_MeidaSDK(48,{userId:p,x:y,y:C,width:w,height:D,canvas:u,zone:v,RGBA:P})}mirrorVideo(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(75,{isMirrorMyVideo:u})}updateUserMediaSN(u){var p,v,y;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(80,{isFromMainSession:Number(u.isFromMainSession),mediaActionType:u.iVType,body:{add:null!==(v=u.added)&&void 0!==v?v:[],remove:null!==(y=u.removed)&&void 0!==y?y:[]}})}updateMediaParams(u){var p;const{iVType:v,isFromMainSession:y,updateParams:C}=u;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(81,{mediaActionType:v,isFromMainSession:Number(y),updateParams:C})}createMainSessionChannel(u,p){var v,y;"sharing"===u?null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(84,p):null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(85,p)}addReceivedSharingChannelType(u){var p;const{isFromMainSession:v}=u,y=Dr(u,yE);null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(82,cn({isFromMainSession:Number(v)},y))}removeReceivedSharingChannelType(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(83,{isFromMainSession:Number(u.isFromMainSession),ssrc:u.ssrc})}enableHardwareAccelerationForVideoDecode(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(70,{enable:u})}enableHardwareAccelerationForVideoEncode(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(71,{enable:u})}setSharingAudioVolume(u,p,v){var y;null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(74,{userid:u>>10,shareVolume:p?0:100,isFromMainSession:v})}subscribeToQos(u,p){u.forEach(v=>{var y;null===(y=this.instance)||void 0===y||y.updateQosSubscription(!0,v,p)})}unsubscribeFromQos(u){u.forEach(p=>{var v;null===(v=this.instance)||void 0===v||v.updateQosSubscription(!1,p)})}passThroughRWGMessage(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(40,u)}startVirtualBackgroundSetting(u,p,v,y,C,w){var D;null===(D=this.instance)||void 0===D||D.Notify_MeidaSDK(91,{canvas:u,bgdom:p,width:C,height:w,ssid:v,VideoSelectValue:"default"===y?null:y,disableOriginalRatio:arguments.length>6&&void 0!==arguments[6]&&arguments[6]})}updateVirtualBackgroundImage(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(92,{bgdom:u})}stopVirtualBackgroundSetting(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(93,{isSwitch:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})}enableVideoObserver(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(99,{enable:u})}enableShareAudioToBreakoutRoom(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(86,{enable:u})}sendUserAudioStatus(u){var p;null===(p=this.instance)||void 0===p||p.Notify_MeidaSDK(51,u)}muteOrUnmuteOtherAudio(u,p){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(50,{userId:u,volume:p?0:100})}adjustOtherAudioVolume(u,p){var v;null===(v=this.instance)||void 0===v||v.Notify_MeidaSDK(50,{userId:u,volume:p})}notifySDKMeetingReady(){var u;null===(u=this.instance)||void 0===u||u.Notify_MeidaSDK(113)}movePTZCamera(u){var p;return null===(p=JsMediaSDK_Instance.util)||void 0===p?void 0:p.queryPTZPermisson().then(v=>{var y;return v?(null===(y=this.instance)||void 0===y||y.Notify_MeidaSDK(53,u),Promise.resolve("")):Promise.reject("Cannot move camera without permission granted")})}}return i.agentInstance=void 0,i})();const rm="ADD_CURRENT_USER_PARTICIPANT_ATTRIBUTE",uh="UPDATE_CURRENT_USER_PARTICIPANT_ATTRIBUTE",dd="ADD_USER_PARTICIPANT_ATTRIBUTE",hd="UPDATE_USER_PARTICIPANT_ATTRIBUTE",pd="REMOVE_USER_PARTICIPANT_ATTRIBUTE",Fu="UPDATE_WEBINAR_PARTICIPANT_ATTRIBUTE",im="REMOVE_WEBINAR_ATTENDEE_ATTRIBUTE",kv="JOIN_MEETING_SUCCESS",Ks="JOIN_MEETING_FAILED",Fc="RECONNECTING_MEETING",om="LEAVING_MEETING",bE="MEETING_IN_WAITING_ROOM",FS="UPDATE_MEETING_ATTRIBUTE",pT="SHARE_PRONOUN_TYPE_UPDATE";var fd;!function(i){i.ConnectionChange="connection-change",i.OnHoldChange="on-hold-change",i.UserAdd="user-added",i.UserUpdate="user-updated",i.UserRemove="user-removed",i.AttendeeUpdate="attendee-updated",i.MeetingAttributeUpdate="meeting-attribute-updated",i.PromoteAttendeeConsent="promote-attendee-consent",i.ActiveAppsUpdate="active-apps-updated",i.SharePronounTypeUpdate="share-pronoun-type-update"}(fd||(fd={}));const Zh={JoinMeeting:{success:rm,fail:[Ks]}},Fg={[fd.ConnectionChange]:[{event:kv,payload:()=>({state:K.ConnectionState.Connected})},{event:Ks,payload:i=>cn({state:K.ConnectionState.Fail},i)},{event:Fc,payload:i=>cn({state:K.ConnectionState.Reconnecting},i)},{event:om,payload:i=>cn({state:K.ConnectionState.Closed},i)}],[fd.OnHoldChange]:[{event:bE,payload:i=>({isOnHold:i})}],[fd.UserAdd]:[{event:rm,payload:i=>[i]},{event:dd,payload:i=>i}],[fd.UserUpdate]:[{event:uh,payload:i=>[i]},{event:hd,payload:i=>i}],[fd.UserRemove]:[{event:pd,payload:i=>i}],[fd.AttendeeUpdate]:[{event:Fu,payload:i=>i},{event:im,payload:i=>i}],[fd.MeetingAttributeUpdate]:[{event:FS,payload:()=>{}}],[fd.PromoteAttendeeConsent]:[{event:"MEETING_WEBINAR_PROMOTE_CONSENT_REQ",payload:i=>{let{req_id:l,sender_id:u}=i;return{reqId:l,senderId:u}}}],[fd.ActiveAppsUpdate]:[{event:"ACTIVE_APPS_UPDATE",payload:()=>{}}],[fd.SharePronounTypeUpdate]:[{event:pT,payload:i=>i}]},SE="LIVE_TRANSCRIPTION_RECEIVE_MESSAGE",yl="LIVE_TRANSCRIPTION_CAPTION_STATUS_CHANGE_RESPONSE",fT="LIVE_TRANSCRIPTION_STATUS_CHANGE",Pv={"caption-message":[{event:SE,payload:i=>i}],"caption-status":[{event:yl,payload:i=>i}],"caption-enable":[{event:fT,payload:i=>i}]},CE="CHAT_RECEIVE_MESSAGE_EVENTS",Zo="CHAT_PRIVILEGE_CHANGE",IE="CHAT_MESSAGE_RESPONSE",wE="CHAT_DELETE_MESSAGE_REPONSE";let Ug;!function(i){i.ChatOnMessage="chat-on-message",i.ChatPrivilegeChange="chat-privilege-change",i.ChatDeleteMessage="chat-delete-message"}(Ug||(Ug={}));const sm={[Ug.ChatOnMessage]:[{event:CE,payload:i=>i}],[Ug.ChatPrivilegeChange]:[{event:Zo,payload:i=>i}],[Ug.ChatDeleteMessage]:[{event:wE,payload:i=>i}]},am="COMMAND_RECEIVE_MESSAGE_EVENTS",Gp="COMMAND_STATUS_EVENTS";let Wp;!function(i){i.CommandChannelStatus="command-channel-status",i.CommandChannelMessage="command-channel-message"}(Wp||(Wp={}));const US={[Wp.CommandChannelStatus]:[{event:Gp,payload:i=>i}],[Wp.CommandChannelMessage]:[{event:am,payload:i=>i}]};let cs;K.RecordingStatus=void 0,function(i){i.Recording="Recording",i.Paused="Paused",i.Stopped="Stopped",i.Ask="Ask",i.Accept="Accept",i.Decline="Decline"}(K.RecordingStatus||(K.RecordingStatus={})),function(i){i[i.None=0]="None",i[i.Init=1]="Init",i[i.Start=2]="Start",i[i.Pause=3]="Pause",i[i.Stop=4]="Stop"}(cs||(cs={}));const ep="CLOUD_RECORDING_STATUS_CHANGE",mT="CLOUD_RECORDING_ISO_STATUS_CHANGE",G2="LOCAL_RECORDING_CHANGE",zn="RECORDING_FOR_IQ_STATUS_CHANGE",W2="RECORDING_FOR_IQ_OPERATION_CHANGE";let TE;!function(i){i.RecordingChange="recording-change",i.IndividualRecordingChange="individual-recording-change",i.LocalRecordingChange="local-recording-change",i.RecordingIqChange="recording-iq-change"}(TE||(TE={}));const JL={[TE.RecordingChange]:[{event:ep,payload:i=>{const{cmrServerStatus:l}=i;return l===cs.Start?K.RecordingStatus.Recording:l===cs.Pause?K.RecordingStatus.Paused:K.RecordingStatus.Stopped}}],[TE.IndividualRecordingChange]:[{event:mT,payload:i=>i}],[TE.LocalRecordingChange]:[{event:G2,payload:i=>i}],[TE.RecordingIqChange]:[{event:zn,payload:i=>i}]};let Jn,es,RE;K.MutedSource=void 0,K.AudioChangeAction=void 0,K.DialoutState=void 0,function(i){i[i.InitSuccess=1]="InitSuccess",i[i.InitSuccessVideo=1.1]="InitSuccessVideo",i[i.InitSuccessAudio=1.2]="InitSuccessAudio",i[i.InitSuccessSharing=1.3]="InitSuccessSharing",i[i.UserGrantCaptureAudio=2]="UserGrantCaptureAudio",i[i.CurrentVideoResolution=3]="CurrentVideoResolution",i[i.JpegDecThreadOk=4]="JpegDecThreadOk",i[i.JpegData=5]="JpegData",i[i.SharingPara=6]="SharingPara",i[i.VideoDecodeMaxSize=7]="VideoDecodeMaxSize",i[i.CurrentCaptureVideoWidthHeight=8]="CurrentCaptureVideoWidthHeight",i[i.StartVideoCaptureSuccess=9]="StartVideoCaptureSuccess",i[i.StopVideoCaptureSuccess=10]="StopVideoCaptureSuccess",i[i.StartRemoteControlSuccess=11]="StartRemoteControlSuccess",i[i.CancelRemoteControlSuccess=12]="CancelRemoteControlSuccess",i[i.RemoteControlCopiedTextNotify=13]="RemoteControlCopiedTextNotify",i[i.MonitorLog=14]="MonitorLog",i[i.CurrentDesktopSharingWidthHeight=15]="CurrentDesktopSharingWidthHeight",i[i.DesktopSharingCaptureSuccess=16]="DesktopSharingCaptureSuccess",i[i.CheckChromeSharingExtensionResponse=17]="CheckChromeSharingExtensionResponse",i[i.SharingDecodeMaxSize=18]="SharingDecodeMaxSize",i[i.DataChannelOffer=19]="DataChannelOffer",i[i.AesGcmIvResponse=21]="AesGcmIvResponse",i[i.SharingDesktopStreamHaveAudio=23]="SharingDesktopStreamHaveAudio",i[i.JoinComputerAudioComplete=24]="JoinComputerAudioComplete",i[i.JoinSharingAudioComplete=25]="JoinSharingAudioComplete",i[i.LeaveComputerAudioComplete=26]="LeaveComputerAudioComplete",i[i.LeaveSharingAudioComplete=27]="LeaveSharingAudioComplete",i[i.SharingFirstDecodeFrameReceivedSsrc=70]="SharingFirstDecodeFrameReceivedSsrc",i[i.StartVideoStreamInVbSettingSuccess=94]="StartVideoStreamInVbSettingSuccess",i[i.VbModelPreloading_3S=96]="VbModelPreloading_3S",i[i.VbModelPreloading_10S=97]="VbModelPreloading_10S",i[i.VbModelPreloadingOk=98]="VbModelPreloadingOk",i[i.InitFailed=-1]="InitFailed",i[i.InitFailedVideo=-1.1]="InitFailedVideo",i[i.InitFailedAudio=-1.2]="InitFailedAudio",i[i.InitFailedSharing=-1.3]="InitFailedSharing",i[i.UserForbiddedCaptureAudio=-2]="UserForbiddedCaptureAudio",i[i.AudioWebsocketBroken=-3]="AudioWebsocketBroken",i[i.VideoWebsocketBroken=-4]="VideoWebsocketBroken",i[i.SharingDecThreadFailed=-5]="SharingDecThreadFailed",i[i.AudioZeroData=-6]="AudioZeroData",i[i.AudioCtxSamplerate=-7]="AudioCtxSamplerate",i[i.UserForbiddedCaptureVideo=-8]="UserForbiddedCaptureVideo",i[i.UserCameraIsTakenByOtherPrograms=-9]="UserCameraIsTakenByOtherPrograms",i[i.StopVideoCaptureFailed=-10]="StopVideoCaptureFailed",i[i.StartRemoteControlFailed=-11]="StartRemoteControlFailed",i[i.CancelRemoteControlFailed=-12]="CancelRemoteControlFailed",i[i.RemoteControlPasteTextLengthOverflow=-14]="RemoteControlPasteTextLengthOverflow",i[i.UserStopDesktopSharing=-15]="UserStopDesktopSharing",i[i.UserCancelPermissionRequest=-16]="UserCancelPermissionRequest",i[i.DesktopSharingChromeExtensionUninstalled=-17]="DesktopSharingChromeExtensionUninstalled",i[i.DesktopSharingPermissionDenied=-18]="DesktopSharingPermissionDenied",i[i.DesktopSharingTimeOut=-19]="DesktopSharingTimeOut",i[i.DesktopSharingError=-20]="DesktopSharingError",i[i.DesktopSharingSystemError=-22]="DesktopSharingSystemError",i[i.SharingDesktopStreamHaveNoAudio=-27]="SharingDesktopStreamHaveNoAudio",i.audioQosData="AUDIO_QOS_DATA",i.videoQosData="VIDEO_QOS_DATA",i.networkQualityChange="NETWORK_QUALITY_CHANGE",i[i.AudioBridgeReconnectStart=-29]="AudioBridgeReconnectStart",i[i.AudioBridgeReconnectEnd=-31]="AudioBridgeReconnectEnd",i[i.VbSettingParaError=-34]="VbSettingParaError",i[i.NotifyUIFailover=-35]="NotifyUIFailover"}(Jn||(Jn={})),function(i){i[i.EncodeSuccess=1]="EncodeSuccess",i[i.DecodeSuccess=2]="DecodeSuccess",i[i.EncodeFailed=-1]="EncodeFailed",i[i.DecodeFailed=-2]="DecodeFailed"}(es||(es={})),function(i){i.Spotlight="Spotlight",i.Unmute="Unmute",i.AllowToTalk="Allow to talk"}(RE||(RE={})),function(i){i.Active="active",i.PassiveByMuteOne="passive(mute one)",i.PassiveByMuteAll="passive(mute all)",i.SharingAudio="sharing audio"}(K.MutedSource||(K.MutedSource={})),function(i){i.Join="join",i.Leave="leave",i.Muted="muted",i.Unmuted="unmuted"}(K.AudioChangeAction||(K.AudioChangeAction={})),function(i){i[i.Calling=1]="Calling",i[i.Ringing=2]="Ringing",i[i.Accepted=3]="Accepted",i[i.Busy=4]="Busy",i[i.NotAvailable=5]="NotAvailable",i[i.HangUp=6]="HangUp",i[i.Fail=7]="Fail",i[i.Success=8]="Success",i[i.Timeout=9]="Timeout",i[i.Canceling=10]="Canceling",i[i.Canceled=11]="Canceled",i[i.CancelFailed=12]="CancelFailed"}(K.DialoutState||(K.DialoutState={}));const $L=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),OE=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),W4=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);let Uu,lo,VS,Vu,Nv,gT,au;K.ShareStatus=void 0,K.VideoQuality=void 0,K.VideoActiveState=void 0,K.VideoCapturingState=void 0,K.PassiveStopShareReason=void 0,function(i){i[i.HostGrab=0]="HostGrab",i[i.OnlyHost=1]="OnlyHost",i[i.AnyoneGrab=2]="AnyoneGrab",i[i.MultipleShare=3]="MultipleShare"}(Uu||(Uu={})),function(i){i.Sharing="sharing",i.Paused="paused",i.End="ended"}(K.ShareStatus||(K.ShareStatus={})),function(i){i[i.Video_90P=0]="Video_90P",i[i.Video_180P=1]="Video_180P",i[i.Video_360P=2]="Video_360P",i[i.Video_720P=3]="Video_720P"}(K.VideoQuality||(K.VideoQuality={})),function(i){i.Active="Active",i.Inactive="Inactive"}(K.VideoActiveState||(K.VideoActiveState={})),function(i){i.Muted="Muted",i.Unmuted="Unmuted"}(lo||(lo={})),function(i){i.Active="Active",i.Inactive="Inactive"}(VS||(VS={})),function(i){i.Success="Success",i.Failed="Failed",i.Initial="Initial"}(Vu||(Vu={})),function(i){i.Started="Started",i.Stopped="Stopped",i.Failed="Failed"}(K.VideoCapturingState||(K.VideoCapturingState={})),function(i){i.Approved="Approved",i.Rejected="Rejected"}(Nv||(Nv={})),function(i){i.PrivilegeChange="PrivilegeChange",i.StopScreenCapture="StopScreenCapture",i.ShareFromMainSession="ShareFromMainSession"}(K.PassiveStopShareReason||(K.PassiveStopShareReason={})),function(i){i.Muted="Muted",i.Unmuted="Unmuted",i.NoAudio="NoAudio",i.Phone="Phone"}(gT||(gT={})),function(i){i[i.ImageNotMatch=2]="ImageNotMatch",i[i.CanvasNotMatch=3]="CanvasNotMatch",i[i.VBModelNotMatch=4]="VBModelNotMatch"}(au||(au={}));const tp="blur";let _T;K.MobileVideoFacingMode=void 0,function(i){i[i.NotConnect=0]="NotConnect",i[i.Connecting=1]="Connecting",i[i.ConnectSuccess=2]="ConnectSuccess",i[i.ConnectFail=3]="ConnectFail"}(_T||(_T={})),function(i){i.User="user",i.Environment="environment",i.Left="left",i.Right="right"}(K.MobileVideoFacingMode||(K.MobileVideoFacingMode={}));const Kp="__ZOOM_SDK_SHARING_VIDEO__",cm="__ZOOM_SDK_VIDEO_ZONE__",jS={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}},QS={data:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}};let wc,np,zp;K.CameraControlCmd=void 0,K.FarEndCameraControlDeclinedReason=void 0,function(i){i[i.Request=11]="Request",i[i.Decline=12]="Decline",i[i.Approve=13]="Approve",i[i.GiveUp=14]="GiveUp",i[i.StartControl=15]="StartControl",i[i.ContinueControl=16]="ContinueControl",i[i.StopControl=17]="StopControl",i[i.SwitchCamera=20]="SwitchCamera"}(wc||(wc={})),function(i){i[i.Bk=0]="Bk",i[i.Center=1]="Center",i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera"}(np||(np={})),function(i){i[i.Pan=192]="Pan",i[i.Tilt=48]="Tilt",i[i.Zoom=12]="Zoom",i[i.Focus=3]="Focus"}(zp||(zp={})),function(i){i[i.ZoomIn=2]="ZoomIn",i[i.ZoomOut=3]="ZoomOut",i[i.Left=4]="Left",i[i.Right=5]="Right",i[i.Up=6]="Up",i[i.Down=7]="Down",i[i.SwitchCamera=8]="SwitchCamera"}(K.CameraControlCmd||(K.CameraControlCmd={})),function(i){i[i.None=0]="None",i[i.ApproveAnother=3]="ApproveAnother",i[i.Stop=5]="Stop"}(K.FarEndCameraControlDeclinedReason||(K.FarEndCameraControlDeclinedReason={}));const cu="AUDIO_ENCODE_SUCCESS",DE="AUDIO_DECODE_SUCCESS",Yp="VIDEO_ENCODE_SUCCESS",XL="VIDEO_DECODE_SUCCESS",vT="SHARING_ENCODE_SUCCESS",HS="SHARING_DECODE_SUCCESS",kE="AUDIO_ENCODE_FAIL",K2="AUDIO_DECODE_FAIL",PE="VIDEO_ENCODE_FAIL",AT="VIDEO_DECODE_FAIL",z2="SHARING_ENCODE_FAIL",jg="SHARING_DECODE_FAIL",Mv="MEDIA_DEVICE_CHANGE";let xv;!function(i){i.DeviceChange="device-change",i.MediaSDKChange="media-sdk-change"}(xv||(xv={}));const Uc={[xv.DeviceChange]:[{event:Mv,payload:()=>({})}],[xv.MediaSDKChange]:[{event:cu,payload:()=>({type:"audio",action:"encode",result:"success"})},{event:kE,payload:()=>({type:"audio",action:"encode",result:"fail"})},{event:DE,payload:()=>({type:"audio",action:"decode",result:"success"})},{event:K2,payload:()=>({type:"audio",action:"decode",result:"fail"})},{event:Yp,payload:()=>({type:"video",action:"encode",result:"success"})},{event:PE,payload:()=>({type:"video",action:"encode",result:"fail"})},{event:XL,payload:()=>({type:"video",action:"decode",result:"success"})},{event:AT,payload:()=>({type:"video",action:"decode",result:"fail"})},{event:vT,payload:()=>({type:"share",action:"encode",result:"success"})},{event:z2,payload:()=>({type:"share",action:"encode",result:"fail"})},{event:HS,payload:()=>({type:"share",action:"decode",result:"success"})},{event:jg,payload:()=>({type:"share",action:"decode",result:"fail"})}]},GS="RECEIVE_VIDEO_ACTIVE_INDICATION",Lv="RECEIVE_VIDEO_MUTE_INDICATION",Y2="ASK_FOR_START_VIDEO_CONSENT",qp="RECEIVE_VIDEO_DIMENSION_CHANGE",uu="CAN_NOT_DETECT_CAMERA",Jp="CAN_NOT_FIND_CAMERA",WS="VIDEO_USER_FORBIDDEN_CAPTURE",KS="VIDEO_CAMERA_IS_TAKEN",NE="VIDEO_VITRUAL_BACKGROUND_FAILED",El="VIDEO_ESTABLISH_STREAM_ERROR",Bv="VIDEO_RENDER_START_SUCCESS",yT="VIDEO_CAPTURE_START_SUCCESS",Qg="VIDEO_CAPTURE_STOP_RESULT",ME="VIDEO_SPOTLIGHT_CHANGE",ET="VIDEO_FOLLOW_HOST_ORDER_CHANGE",xE="VIDEO_HOST_DRAG_LAYOUT_CHANGE",q2="VIDEO_NEW_USER_START",LE="VIDEO_OLD_USER_STOP",BE="VIDEO_VIRTUAL_BACKGROUND_PRELOAD_READY",um="VIDEO_VIRTUAL_BACKGROUND_SETTING_SUCCESS",FE="VIDEO_STATISTIC_DATA",bT="VIDEO_CELL_DETAILED_DATA",UE="VIDEO_NETWORK_QUALITY_CHANGE",ZL="VIDEO_FAR_END_CAMERA_CONTROL_REQUEST",$p="VIDEO_FAR_END_CAMERA_CONTROL_RESPONSE",lm="VIDEO_FAR_END_CAMERA_IN_CONTROL_CHANGE",zS="VIDEO_FAR_END_CAMERA_CAPABILITY_CHANGE",eB={startCaptureVideo:{success:yT,fail:[uu,Jp,WS,El,KS,NE]},stopCaptureVideo:{success:Qg},startRenderVideo:{success:Bv,fail:[PE,AT,El]}};let oa;!function(i){i.VideoActiveChange="video-active-change",i.PeerVideoStateChange="peer-video-state-change",i.VideoSpotlightChange="video-spotlight-change",i.VideoMutedChange="video-muted-change",i.VideoCapturingChange="video-capturing-change",i.AskForStartVideoConsent="ask-for-start-video-consent",i.VideoDimensionChange="video-dimension-change",i.VideoFollowHostOrder="video-follow-host-order-change",i.VideoHostLayoutChange="video-host-layout-change",i.VideoVBPreloadChange="video-virtual-background-preload-change",i.VideoStatisticDataChange="video-statistic-data-change",i.VideoDetailedDataChange="video-detailed-data-change",i.NetworkQualityChange="network-quality-change",i.FarEndCameraRequestControl="far-end-camera-request-control",i.FarEndCameraResponseControl="far-end-camera-response-control",i.FarEndCameraInControlChange="far-end-camera-in-control-change",i.FarEndCameraCapabilityChange="far-end-camera-capability-change"}(oa||(oa={}));const K4={[oa.VideoActiveChange]:[{event:GS,payload:i=>({state:i.bVideoOn?K.VideoActiveState.Active:K.VideoActiveState.Inactive,userId:i.userId})}],[oa.VideoCapturingChange]:[{event:yT,payload:()=>({state:K.VideoCapturingState.Started})},{event:Qg,payload:i=>({state:null!=i&&i.failed?K.VideoCapturingState.Failed:K.VideoCapturingState.Stopped})}],[oa.VideoMutedChange]:[{event:Lv,payload:i=>({state:i.isVideoMuted?lo.Muted:lo.Unmuted,userId:i.id})}],[oa.AskForStartVideoConsent]:[{event:Y2,payload:i=>({state:i.isVideoMuted?lo.Muted:lo.Unmuted,userId:i.id})}],[oa.VideoSpotlightChange]:[{event:ME,payload:i=>({spotlightList:i.spotlightList&&i.spotlightList.map(l=>({userId:l}))})}],[oa.VideoDimensionChange]:[{event:qp,payload:i=>({type:"received",width:i.width,height:i.height})}],[oa.VideoFollowHostOrder]:[{event:ET,payload:i=>({isFollowHostOrder:i.bOn})}],[oa.VideoHostLayoutChange]:[{event:xE,payload:i=>Array.isArray(i.layout)?i.layout.map(l=>({userId:l})):[]}],[oa.PeerVideoStateChange]:[{event:q2,payload:i=>cn({action:"Start"},i)},{event:LE,payload:i=>cn({action:"Stop"},i)}],[oa.VideoVBPreloadChange]:[{event:BE,payload:i=>({isReady:i})}],[oa.VideoStatisticDataChange]:[{event:FE,payload:i=>i}],[oa.VideoDetailedDataChange]:[{event:bT,payload:i=>i}],[oa.NetworkQualityChange]:[{event:UE,payload:i=>i}],[oa.FarEndCameraRequestControl]:[{event:ZL,payload:i=>i}],[oa.FarEndCameraResponseControl]:[{event:$p,payload:i=>i}],[oa.FarEndCameraInControlChange]:[{event:lm,payload:i=>i}],[oa.FarEndCameraCapabilityChange]:[{event:zS,payload:i=>i}]},VE="AUDIO_ACTIVE_SPEAKER",Fv="AUDIO_UNMUTE_CONSENT",YS="AUDIO_CURRENT_USER_JOIN_BY_VOIP",jE="AUDIO_CURRENT_USER_JOIN_BY_PHONE",Hg="AUDIO_CURRENT_USER_LEAVE_AUDIO",qS="AUDIO_CURRENT_USER_MUTED",J2="AUDIO_CURRENT_USER_UNMUTED",$2="AUDIO_PARTICIPANT_AUDIO_UPDATE",JS="AUDIO_DIALOUT_RESULT_CODE",$S="AUDIO_DIALOUT_RESULT_SUCCESS",XS="DIALOUT_FAIL",ZS="AUDIO_DIALOUT_CANCEL_SUCCESS",ST="DIALOUT_CANCEL_FAIL",lu="AUDIO_MERGE_AUDIO_INDICATION",Ls="USER_FORBIDDEN_MICROPHONE",QE="ESTABLISH_AUDIO_STREAM_ERROR",CT="AUDIO_AUTO_PLAY_FAILED",eC="INVALID_DEVICE_ID",tC="AUDIO_ALLOW_TALK_CHANGE",dm="SHARE_AUDIO_STATE_CHANGE",IT="AUDIO_STATISTIC_DATA";let Qi;!function(i){i.ActiveSpeaker="active-speaker",i.UnmuteAudioConsent="unmute-audio-consent",i.CurrentAudioChange="current-audio-change",i.DialoutStateChange="dialout-state-change",i.MergeAudio="merged-audio",i.AutoPlayFailed="auto-play-audio-failed",i.AllowTalkChange="allow-talk-change",i.ShareAudioChange="share-audio-change",i.AudioStatisticDataChange="audio-statistic-data-change"}(Qi||(Qi={}));const nc={JoinComputerAudio:{success:YS,fail:[Ls,QE]},LeaveComputerAudio:{success:Hg},JoinAudioByCallMe:{success:$S,fail:[XS]},cancelDialOut:{success:ZS,fail:[ST]},hangup:{success:Hg}},nC={[Qi.ActiveSpeaker]:[{event:VE,payload:i=>i}],[Qi.UnmuteAudioConsent]:[{event:Fv,payload:i=>({reason:i})}],[Qi.CurrentAudioChange]:[{event:jE,payload:()=>({action:K.AudioChangeAction.Join,type:"phone"})},{event:YS,payload:()=>({action:K.AudioChangeAction.Join,type:"computer"})},{event:Hg,payload:()=>({action:K.AudioChangeAction.Leave})},{event:qS,payload:i=>{let{source:l}=i;return{action:K.AudioChangeAction.Muted,source:l}}},{event:J2,payload:i=>{let{source:l}=i;return{action:K.AudioChangeAction.Unmuted,source:l}}}],[Qi.DialoutStateChange]:[{event:JS,payload:i=>i}],[Qi.MergeAudio]:[{event:lu,payload:i=>i}],[Qi.AutoPlayFailed]:[{event:CT,payload:()=>{}}],[Qi.AllowTalkChange]:[{event:tC,payload:i=>({enabled:i})}],[Qi.ShareAudioChange]:[{event:dm,payload:i=>i}],[Qi.AudioStatisticDataChange]:[{event:IT,payload:i=>i}]},ri=["isActive","activeUserId"],Vc="SHARE_ACTIVE_INDICATION",Uv="SHARE_CHECK_CHROME_SHARING_EXTENSION",rC="SHARE_START_DESKTOP_SHARE_FAILED",HE="SHARE_DIMENSION_CHANGE",sa="SHARE_RECEIVED_DIMENSION_CHANGE",Is="SHARE_VIDEO_STREAMS_END",Gg="SHARE_PASSIVE_STOP_SHARE",ju="SHARE_PASSIVE_BO_STOP",wT="SHARE_NEW_USER_ADD",Wg="SHARE_USER_REMOVE",du="SHARE_USER_PAUSED",Vv="SHARE_USER_RESUMED",iC="SHARE_AUTO_CHANGE_SOURCE",oC="SHARE_PRIVILEGE_CHANGE",X2="SHARE_READ_RECEIPT";let Ba;!function(i){i.ShareActiveChange="active-share-change",i.ShareDimensionChange="share-content-dimension-change",i.SharePassiveStop="passively-stop-share",i.SharePeerStateChange="peer-share-state-change",i.ShareContentChange="share-content-change",i.SharePrivilegeChange="share-privilege-change",i.ShareReadReceipt="share-can-see-screen",i.RemoteControlApprovedChange="remote-control-approved-change",i.RemoteControlInControlChange="remote-control-in-control-change",i.RemoteControlClipboardChange="remote-control-clipboard-change"}(Ba||(Ba={}));const jv={[Ba.ShareActiveChange]:[{event:Vc,payload:i=>{const{isActive:l,activeUserId:u}=i;return cn({state:l?"Active":"Inactive",userId:u},Dr(i,ri))}}],[Ba.ShareDimensionChange]:[{event:HE,payload:i=>({type:"sended",width:i.width,height:i.height})},{event:sa,payload:i=>({type:"received",width:i.width,height:i.height})}],[Ba.SharePassiveStop]:[{event:Is,payload:()=>({reason:K.PassiveStopShareReason.StopScreenCapture})},{event:Gg,payload:()=>({reason:K.PassiveStopShareReason.PrivilegeChange})},{event:ju,payload:()=>({reason:K.PassiveStopShareReason.ShareFromMainSession})}],[Ba.SharePeerStateChange]:[{event:wT,payload:i=>({userId:i.id,action:"Start"})},{event:Wg,payload:i=>({userId:i.id,action:"Stop"})},{event:du,payload:i=>({userId:i.id,action:"Pause"})},{event:Vv,payload:i=>({userId:i.id,action:"Resume"})}],[Ba.ShareContentChange]:[{event:iC,payload:i=>i}],[Ba.RemoteControlApprovedChange]:[{event:"SHARE_REMOTE_CONTROL_APPROVE",payload:i=>({state:i?Nv.Approved:Nv.Rejected})}],[Ba.RemoteControlInControlChange]:[{event:"SHARE_GRAB_REMOTE_CONTROL_CHANGE",payload:i=>({isControlling:i})}],[Ba.RemoteControlClipboardChange]:[{event:"SHARE_REMOTE_CONTROL_CLIPBOARD_CHANGE",payload:i=>i}],[Ba.SharePrivilegeChange]:[{event:oC,payload:i=>({privilege:i})}],[Ba.ShareReadReceipt]:[{event:X2,payload:()=>{}}]};let lh,TT,RT,dh,md;(function(i){i.LiveStart="liveStart",i.LiveEnd="liveEnd"})(lh||(lh={})),function(i){i.MakePublicView="make_question_public_view",i.Comment="comment",i.PrivateView="private",i.DeleteComment="deletecomment",i.DeleteQuestion="deletequestion",i.Reopen="reopen",i.Dismiss="dismiss",i.Upvote="upvote",i.RevokeUpvote="revokeupvote"}(TT||(TT={})),function(i){i.Question="question"}(RT||(RT={})),function(i){i.Question="question",i.UpdateQuestion="updateQuestion",i.Answer="answer",i.DeleteComment="deleteComment",i.DeleteQuestion="deleteQuestion",i.Dismiss="dismiss",i.Reopen="reopen",i.Upvote="upvote",i.AnswerLive="answerLive"}(dh||(dh={})),function(i){i.QaSettingChange="qa-setting-change",i.QaActionChange="qa-action-change"}(md||(md={}));const tB={[md.QaSettingChange]:[{event:"QA_SETTING_OPTION_CHANGE",payload:i=>i}],[md.QaActionChange]:[{event:"QA_NEW_ASK_QUESTION",payload:i=>({action:dh.Question,data:i})},{event:"QA_UPDATE_ANONYMOUS_QUESTION",payload:i=>({action:dh.UpdateQuestion,data:i})},{event:"QA_ANSWER_QUESTION",payload:i=>({action:dh.Answer,data:i})},{event:"QA_ANSWER_REMOVE_COMMENT",payload:i=>({action:dh.DeleteComment,data:i})},{event:"QA_ANSWER_REMOVE_QUESTION",payload:i=>({action:dh.DeleteQuestion,data:i})},{event:"QA_ANSWER_DISMISS_QUESTION",payload:i=>({action:dh.Dismiss,data:i})},{event:"QA_ANSWER_REOPEN_QUESTION",payload:i=>({action:dh.Reopen,data:i})},{event:"QA_ANSWER_VOTE_QUESTION",payload:i=>({action:dh.Upvote,data:i})},{event:"QA_ANSWER_QUESTION_LIVE",payload:i=>({action:dh.AnswerLive,data:i})}]},Hn="INVALID_OPERATION",rp="INTERNAL_ERROR",Kg="OPERATION_TIMEOUT",rc="INSUFFICIENT_PRIVILEGES",hm="IMPROPER_MEETING_STATE",kr="INVALID_PARAMETERS",Qv="OPERATION_LOCKED",OT="BREAKOUT_ROOM_ADD_TOKEN",sC="BREAKOUT_ROOM_INVITE_TO_JOIN_NOTIFICATION",gd="BREAKOUT_ROOM_ROOM_CLOSING_COUNTDOWN",DT="BREAKOUT_ROOM_ROOM_COUTDOWN",Qu="BREAKOUT_ROOM_BROADCAST_MESSAGE",ip="BREAKOUT_ROOM_ASK_HELP_REQUEST",GE="BREAKOUT_ROOM_ASK_HELP_RESPONSE",pm="BREAKOUT_ROOM_ATTRIBUTE_INDICATION",Z2="BREAKOUT_ROOM_JOIN_BO_RESPONSE",aC="BREAKOUT_ROOM_ROOM_COUNTDOWN_TIME_UP",hu="BREAKOUT_ROOM_CURRENT_USER_PARTICIPANT_ROLE",Xp="BREAKOUT_ROOM_LOAD_PRE_ASSIGNED_ROOMS",WE="BREAKOUT_ROOM_MAIN_SESSION_USER_UPDATE";let bl;!function(i){i.InviteToJoin="invite-to-join",i.RoomCountdown="room-countdown",i.RoomTimeUp="room-time-up",i.ClosingRoomCountdown="closing-room-countdown",i.BroadcastMessage="broadcast-message",i.AskForHelp="ask-for-help",i.AskForHelpResponse="ask-for-help-response",i.RoomStateChange="room-state-change",i.MainSessionUserUpdate="main-session-user-updated"}(bl||(bl={}));const eP={[bl.InviteToJoin]:[{event:sC,payload:i=>i}],[bl.RoomCountdown]:[{event:DT,payload:i=>i}],[bl.RoomTimeUp]:[{event:aC,payload:i=>i}],[bl.ClosingRoomCountdown]:[{event:gd,payload:i=>i}],[bl.BroadcastMessage]:[{event:Qu,payload:i=>i}],[bl.AskForHelp]:[{event:ip,payload:i=>i}],[bl.AskForHelpResponse]:[{event:GE,payload:i=>i}],[bl.RoomStateChange]:[{event:pm,payload:i=>({status:i.controlStatus})}],[bl.MainSessionUserUpdate]:[{event:WE,payload:()=>({})}]};var Hv;!function(i){i.StatusUpdate="archiving-status-update",i.OptionsUpdate="archiving-options-update"}(Hv||(Hv={}));const kT={[Hv.StatusUpdate]:[{event:"ARCHIVING_STATUS_UPDATE",payload:i=>i}],[Hv.OptionsUpdate]:[{event:"ARCHIVING_OPTIONS_UPDATE",payload:i=>i}]};let _d;!function(i){i.PollDataChange="poll-data-change",i.PollSizeUpdate="poll-size-update",i.PollStatusUpdate="poll-status-update"}(_d||(_d={}));const zg={[_d.PollDataChange]:[{event:"POLL_DATA_CHANGE",payload:i=>i}],[_d.PollSizeUpdate]:[{event:"POLL_SIZE_UPDATE",payload:i=>i}],[_d.PollStatusUpdate]:[{event:"POLL_STATUS_UPDATE",payload:i=>i}]},cC=cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn({},Fg),Pv),sm),US),JL),nC),K4),tB),jv),Uc),eP),kT),{"closed-caption-message":[{event:"CC_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-lt-status":[{event:"LT_STATUS_CHANGE",payload:i=>i}],"closed-caption-lt-message":[{event:"LT_RECEIVE_MESSAGE",payload:i=>i}],"closed-caption-status":[{event:"CC_ASSIGN_CC_EDITOR_SUCCESS",payload:i=>i},{event:"CC_STATUS_CHANGE",payload:i=>i}]}),zg),Zp=function(i){return{all:i=i||new Map,on:function(l,u){var p=i.get(l);p?p.push(u):i.set(l,[u])},off:function(l,u){var p=i.get(l);p&&(u?p.splice(p.indexOf(u)>>>0,1):i.set(l,[]))},emit:function(l,u){var p=i.get(l);p&&p.slice().map(function(v){v(u)}),(p=i.get("*"))&&p.slice().map(function(v){v(l,u)})}}}(),fm=new Map,Yg=new Array,vt=function(i){Zp.emit(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)},Gv=i=>new Promise((l,u)=>{i.fail&&i.fail.length>0?id(qa(Zp,i.success).pipe(Ns(1)),Ss(...i.fail.map(p=>qa(Zp,p).pipe(Ns(1),$n(v=>Ki({type:p,payload:v})))))).subscribe(p=>l(p),p=>{u("object"==typeof p.payload?cn({type:p.type},p.payload):void 0===p.payload?{type:p.type}:p)}):qa(Zp,i.success).pipe(Ns(1)).subscribe(p=>l(p))}),Ni=function(i,l){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise((p,v)=>{let y=qt;"string"==typeof i?y=qa(Zp,i).pipe(Ns(1)):(y=qa(Zp,i.event),i.operations&&(y=i.operations.reduce((C,w)=>C.pipe(w),y))),id(y,yc(u).pipe(Qr(Ki("timeout")))).subscribe(C=>{if(l){const w=l(C);"boolean"==typeof w?w?p(""):v({type:rp}):0===w.ret?p(w.body):v({type:rp,reason:w.body})}else p(C)},()=>{v({type:Kg})})})},zs=(i,l)=>void 0!==l?qa(Zp,i).pipe(Ns(l)):qa(Zp,i),KE=()=>{Yg.forEach(i=>{i.unsubscribe()}),Yg.length=0,fm.clear()},{setAttendeesList:qg,setIsAdmitAllSilentUsers:mm,resetParticipants:NT,addFailoverAttendees:zE,removeFailoverAttendees:uC,setClearRaiseHand:vd,setClearAttendeeFeedback:Wv,updateAttendeeDisplayName:lC,removeXmppAttendeeUser:YE,updateXmppAttendeeList:dC}=mo({SET_ATTENDEES_LIST:i=>i,SET_ASSISTANT_LIST:i=>i,UPDATE_XMPP_ATTENDEE_LIST:i=>i,RESET_PARTICIPANTS:()=>({}),SET_IS_ADMIT_ALL_SILENT_USERS:i=>i,REMOVE_FAILOVER_ATTENDEES:i=>i,ADD_FAILOVER_ATTENDEES:i=>i,SET_CLEAR_RAISE_HAND:()=>({}),SET_CLEAR_ATTENDEE_FEEDBACK:()=>({}),UPDATE_ATTENDEE_DISPLAY_NAME:i=>i,REMOVE_XMPP_ATTENDEE_USER:i=>i});var Kv="NOT_FOUND",nB=function(i,l){return i===l};function zv(i,l){var u,p,ee,v="object"==typeof l?l:{equalityCheck:l},y=v.equalityCheck,w=v.maxSize,D=void 0===w?1:w,P=v.resultEqualityCheck,L=(ee=void 0===y?nB:y,function(te,oe){if(null===te||null===oe||te.length!==oe.length)return!1;for(var Ee=te.length,Te=0;Te<Ee;Te++)if(!ee(te[Te],oe[Te]))return!1;return!0}),W=1===D?(u=L,{get:function(ee){return p&&u(p.key,ee)?p.value:Kv},put:function(ee,te){p={key:ee,value:te}},getEntries:function(){return p?[p]:[]},clear:function(){p=void 0}}):function(ee,te){var oe=[];function Ee(Te){var De=oe.findIndex(function(et){return te(Te,et.key)});if(De>-1){var Le=oe[De];return De>0&&(oe.splice(De,1),oe.unshift(Le)),Le.value}return Kv}return{get:Ee,put:function(Te,De){Ee(Te)===Kv&&(oe.unshift({key:Te,value:De}),oe.length>ee&&oe.pop())},getEntries:function(){return oe},clear:function(){oe=[]}}}(D,L);function re(){var ee=W.get(arguments);if(ee===Kv){if(ee=i.apply(null,arguments),P){var oe=W.getEntries().find(function(Ee){return P(Ee.value,ee)});oe&&(ee=oe.value)}W.put(arguments,ee)}return ee}return re.clearCache=function(){return W.clear()},re}function MT(i){var l=Array.isArray(i[0])?i[0]:i;if(!l.every(function(p){return"function"==typeof p})){var u=l.map(function(p){return"function"==typeof p?"function "+(p.name||"unnamed")+"()":typeof p}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+u+"]")}return l}function qE(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];var v=function(){for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];var D,P=0,L={memoizeOptions:void 0},W=C.pop();if("object"==typeof W&&(L=W,W=C.pop()),"function"!=typeof W)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof W+"]");var ee=L.memoizeOptions,te=void 0===ee?u:ee,oe=Array.isArray(te)?te:[te],Ee=MT(C),Te=i.apply(void 0,[function(){return P++,W.apply(null,arguments)}].concat(oe)),De=i(function(){for(var Le=[],et=Ee.length,lt=0;lt<et;lt++)Le.push(Ee[lt].apply(null,arguments));return D=Te.apply(null,Le)});return Object.assign(De,{resultFunc:W,memoizedResultFunc:Te,dependencies:Ee,lastResult:function(){return D},recomputations:function(){return P},resetRecomputations:function(){return P=0}}),De};return v}var Ys=qE(zv);const hh=i=>{let{participants:{attendeesList:l}}=i;return l},hC=i=>{let{meeting:{userId:l}}=i;return l},pC=i=>{let{participants:{xmppAttendeeList:l}}=i;return l};let gm,xT,pu;(function(i){i[i.Attendee=0]="Attendee",i[i.Host=1]="Host",i[i.Owner=4]="Owner",i[i.ViewOnly=8]="ViewOnly",i[i.HostOwner=5]="HostOwner",i[i.ViewOnlyCanTalk=24]="ViewOnlyCanTalk"})(gm||(gm={})),function(i){i[i.Host=10]="Host",i[i.Panelist=20]="Panelist",i[i.Attendee=30]="Attendee"}(xT||(xT={})),function(i){i[i.Client=9]="Client",i[i.Phone=5]="Phone",i[i.H323=15]="H323"}(pu||(pu={}));const LT=i=>(i&gm.Host)===gm.Host,_m=i=>(i&pu.Phone)===pu.Phone,Bs=i=>i===gm.ViewOnlyCanTalk,Fa=i=>(i&gm.ViewOnly)===gm.ViewOnly;let vm,hi,JE,ur,Am;(function(i){i[i.Automatically=1]="Automatically",i[i.Manually=2]="Manually"})(vm||(vm={})),function(i){i[i.NotStarted=1]="NotStarted",i[i.InProgress=2]="InProgress",i[i.Closing=3]="Closing",i[i.Closed=4]="Closed"}(hi||(hi={})),function(i){i[i.NoToken=1]="NoToken",i[i.GotToken=2]="GotToken",i[i.Started=3]="Started",i[i.Closing=4]="Closing",i[i.Closed=5]="Closed"}(JE||(JE={})),function(i){i.Initial="initial",i.Invited="invited",i.Joining="joining",i.InRoom="in room",i.Leaving="leaving",i.TimeUp="time up",i.MainSession="main session"}(ur||(ur={})),function(i){i.Join="joinRequest",i.Switch="switchRequest",i.Leave="leaveRequest",i.Broadcast="messageText",i.HelpReq="helpRequest",i.HelpRes="helpResponse",i.CoHostWantJoinThisBo="wantJoinThisBO"}(Am||(Am={})),K.AskHostHelpResponse=void 0,function(i){i[i.Received=0]="Received",i[i.Busy=1]="Busy",i[i.Ignore=2]="Ignore",i[i.AlreadyInRoom=3]="AlreadyInRoom"}(K.AskHostHelpResponse||(K.AskHostHelpResponse={}));const ii=Ys([hC,hh],(i,l)=>l.find(u=>u.userId===i)),Hu=Ys([ii],i=>i?.isHost||i?.bCoHost),rB=Ys([ii],i=>i?.isHost),Yv=Ys([pC],i=>i.filter(l=>l.userRole===xT.Attendee)),Gu=Ys([hh],i=>i.filter(l=>l.bHold&&!l.bid)),Zi=Ys([hh,i=>{let{breakoutRoom:l}=i;return l&&l.controlStatus},i=>{let{breakoutRoom:l}=i;return l&&l.currentRoom.status}],(i,l,u)=>i.filter(l!==hi.InProgress&&l!==hi.Closing||u!==ur.InRoom?p=>!p.bHold&&!p.bid:p=>!p.bHold)),Jg=Ys([i=>{let{participants:{assistantList:l}}=i;return l}],i=>i),fC=Ys([Zi],i=>i.find(l=>l.isHost)),tP=Ys([Zi],i=>i.filter(l=>l.bCoHost)),Fs=Ys([ii,Zi],(i,l)=>l.filter(u=>u.userId!==i?.userId));let Co,qv;Ys([pC],i=>i.reduce((l,u)=>{const{jid:p}=u;return Object.assign(l,{[p]:u}),l},{})),Ys([pC,i=>{let{meeting:{jid:l}}=i;return l}],(i,l)=>{var u;return null===(u=i.find(p=>p.jid===l))||void 0===u?void 0:u.userId}),function(i){i.Closed="closed",i.Connecting="connecting",i.Connected="connected"}(Co||(Co={})),function(i){i[i.SupportASL=1]="SupportASL",i[i.SidecarPhase2=2]="SidecarPhase2",i[i.SupportBroadcastVoice=8]="SupportBroadcastVoice",i[i.SendMeetingTokenSeparately=16]="SendMeetingTokenSeparately",i[i.SupportPreview=32]="SupportPreview",i[i.WebCameraIndication=64]="WebCameraIndication",i[i.SupportFarEndCameraControl=256]="SupportFarEndCameraControl",i[i.SupportVideoShare=512]="SupportVideoShare"}(qv||(qv={}));const{setAsnIds:mC,setIsCanUnmute:nP,setDialoutSequence:rP,setDialoutResultCode:BT,setIsAllowToTalk:FT,setIsHostMuteAll:Jv,setIsActiveOperation:Wu,setAudioSsrc:$v,setIsMutedUponEntry:Xv,setIsUserGrantCaptureAudio:gC,setIsMicrophoneForbidden:Zv,setWebrtcRestartCount:UT,setMicrophoneList:VT,setSpeakerList:iB,setActiveMicrophone:eA,setActiveSpeaker:$E,setCanPlayAudio:_C,resetAudio:oB,setIsComputerAudioLoading:ym,setIsSpeakerOnly:iP,setIsAllowToTalkAttendeeConnected:jT,setIsMuteBeforeSharingAudio:$g,addLocalShareAudioUser:oP,updateLocalShareAudioUser:vC,setIsJoinComputerAudioBeforeSharingAudio:ef,setIsShareAudioEnabled:XE,setIsShareAudioMuted:tA,setIsSharingAudio:op,setAudioDataEncoding:eo,setAudioDataDecoding:AC,addLocallyMutedAudio:sP,removeLocallyMutedAudio:yC,updateUserAudioVolumeLocally:EC,removeLocalUserAudioVolume:aP}=mo("SET_ASN_IDS","SET_IS_CAN_UNMUTE","SET_DIALOUT_SEQUENCE","SET_DIALOUT_RESULT_CODE","SET_IS_ALLOW_TO_TALK","SET_IS_HOST_MUTE_ALL","SET_IS_ACTIVE_OPERATION","SET_AUDIO_SSRC","SET_IS_MUTED_UPON_ENTRY","SET_IS_USER_GRANT_CAPTURE_AUDIO","SET_IS_MICROPHONE_FORBIDDEN","SET_WEBRTC_RESTART_COUNT","SET_MICROPHONE_LIST","SET_SPEAKER_LIST","SET_ACTIVE_MICROPHONE","SET_ACTIVE_SPEAKER","SET_CAN_PLAY_AUDIO","RESET_AUDIO","SET_IS_COMPUTER_AUDIO_LOADING","SET_IS_SPEAKER_ONLY","SET_IS_ALLOW_TO_TALK_ATTENDEE_CONNECTED","SET_IS_MUTE_BEFORE_SHARING_AUDIO","SET_IS_SHARING_AUDIO","ADD_LOCAL_SHARE_AUDIO_USER","UPDATE_LOCAL_SHARE_AUDIO_USER","SET_IS_JOIN_COMPUTER_AUDIO_BEFORE_SHARING_AUDIO","SET_IS_SHARE_AUDIO_ENABLED","SET_IS_SHARE_AUDIO_MUTED","SET_AUDIO_DATA_ENCODING","SET_AUDIO_DATA_DECODING","ADD_LOCALLY_MUTED_AUDIO","REMOVE_LOCALLY_MUTED_AUDIO","UPDATE_USER_AUDIO_VOLUME_LOCALLY","REMOVE_LOCAL_USER_AUDIO_VOLUME"),{setSharePrivilege:QT,setShareActiveNode:bC,setIsReceiveSharing:ph,setIsChromeExtensionInstalled:Ad,setIsScreenShareForbidden:cP,setShareDimension:uP,setShareStatus:Ku,setShareSsrc:HT,setShareQuality:GT,setReceivedShareDimension:jc,setIsRemoteControlApproved:lP,setIsGrabRemoteControl:sB,setIsVerifiedSharingRenderCanvasAfterFailover:dP,setIsVerifiedSharingCaptureCanvasAfterFailover:nA,setIsSdkGrabControl:WT,setIsReceiveSharingFromMainSession:SC,setIsSharingToBreakoutRoom:rA,setIsSharingWithSecondCamera:CC,setShringSecondCameraId:hP,setIsRequireReadReceipt:IC,resetShare:KT}=mo("SET_SHARE_PRIVILEGE","SET_SHARE_ACTIVE_NODE","SET_IS_RECEIVE_SHARING","SET_IS_CHROME_EXTENSION_INSTALLED","SET_IS_SCREEN_SHARE_FORBIDDEN","SET_SHARE_DIMENSION","SET_SHARE_STATUS","SET_SHARE_SSRC","SET_SHARE_QUALITY","SET_RECEIVED_SHARE_DIMENSION","SET_IS_REMOTE_CONTROL_APPROVED","SET_IS_GRAB_REMOTE_CONTROL","SET_IS_VERIFIED_SHARING_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_SHARING_CAPTURE_CANVAS_AFTER_FAILOVER","SET_IS_SDK_GRAB_CONTROL","SET_IS_RECEIVE_SHARING_FROM_MAIN_SESSION","SET_IS_SHARING_TO_BREAKOUT_ROOM","SET_IS_SHARING_WITH_SECOND_CAMERA","SET_SHRING_SECOND_CAMERA_ID","SET_IS_REQUIRE_READ_RECEIPT","RESET_SHARE"),{setVideoSsrc:zT,setActiveVideoId:Em,setCameraList:tf,setActiveCamera:bm,setIsCurrentUserStartedVideo:Xg,setSpotlightVideo:YT,setIsCaptureForbidden:ZE,setVideoMaxQuality:eb,setCaptureCanvasList:Zg,setIsVideoMuted:Sm,setIsCaptureCameraLoading:iA,setIsCameraTaken:Cm,setIsVerifiedVideoRenderCanvasAfterFailover:qT,setIsVerifiedVideoCaptureCanvasAfterFailover:JT,resetVideo:us,setReceivedVideoDimension:pP,addSubscribedVideoId:fP,removeSubscribedVideoId:wC,setIsFollowHostVideoLayout:TC,setHostDragLayout:mP,addRenderedVideoId:$T,removeRenderedVideoId:sp,setIsSupportHdVideo:XT,setMaximumNumbeOfHdSubscriptions:aB,setIsCanUnmuteVideo:gP,setIsVbPreloadReady:Im,setIsVbConfiged:RC,setVbImageSrc:ap,setVideoDataEncoding:ki,setVideoDataDecoding:OC,setHardwareAccelerationState:yd,setVideoCaptureCustomizedOption:Ed,setNetworkQuality:ZT,setVideoCameraPtzCapabilities:eR,setIsCurrentUserRequestCameraControlled:nf,setIsCurrentUserCameraInControl:DC,addVideoFarEndCameraControlUser:fh,removeVideoFarEndCameraControlUser:oA,setVideoPtzCameraMoving:tR,setVideoPtzCameraValue:tb,setIsControllingFarEndCamera:Sl}=mo("SET_VIDEO_SSRC","SET_ACTIVE_VIDEO_ID","SET_CAMERA_LIST","SET_ACTIVE_CAMERA","SET_IS_CURRENT_USER_STARTED_VIDEO","SET_SPOTLIGHT_VIDEO","SET_IS_CAPTURE_FORBIDDEN","SET_VIDEO_MAX_QUALITY","SET_CAPTURE_CANVAS_LIST","SET_IS_VIDEO_MUTED","SET_IS_CAPTURE_CAMERA_LOADING","SET_IS_CAMERA_TAKEN","SET_IS_VERIFIED_VIDEO_RENDER_CANVAS_AFTER_FAILOVER","SET_IS_VERIFIED_VIDEO_CAPTURE_CANVAS_AFTER_FAILOVER","RESET_VIDEO","SET_RECEIVED_VIDEO_DIMENSION","ADD_SUBSCRIBED_VIDEO_ID","REMOVE_SUBSCRIBED_VIDEO_ID","SET_IS_FOLLOW_HOST_VIDEO_LAYOUT","SET_HOST_DRAG_LAYOUT","ADD_RENDERED_VIDEO_ID","REMOVE_RENDERED_VIDEO_ID","SET_IS_SUPPORT_HD_VIDEO","SET_MAXIMUM_NUMBE_OF_HD_SUBSCRIPTIONS","SET_IS_CAN_UNMUTE_VIDEO","SET_IS_VB_PRELOAD_READY","SET_IS_VB_CONFIGED","SET_VB_IMAGE_SRC","SET_VIDEO_DATA_ENCODING","SET_VIDEO_DATA_DECODING","SET_HARDWARE_ACCELERATION_STATE","SET_VIDEO_CAPTURE_CUSTOMIZED_OPTION","SET_NETWORK_QUALITY","SET_VIDEO_CAMERA_PTZ_CAPABILITIES","SET_IS_CURRENT_USER_REQUEST_CAMERA_CONTROLLED","SET_IS_CURRENT_USER_CAMERA_IN_CONTROL","ADD_VIDEO_FAR_END_CAMERA_CONTROL_USER","REMOVE_VIDEO_FAR_END_CAMERA_CONTROL_USER","SET_VIDEO_PTZ_CAMERA_MOVING","SET_VIDEO_PTZ_CAMERA_VALUE","SET_IS_CONTROLLING_FAR_END_CAMERA"),{resetQa:lB}=mo("SET_QA_SETTING","ADD_QA_QUESTION","ADD_QA_ANSWER","REMOVE_QA_COMMENT","REMOVE_QA_QUESTION","DISMISS_QA_QUESTION","REOPEN_QA_QUESTION","VOTE_QA_QUESTION","ANSWER_QA_QUESTION_LIVE","UPDATE_ATTENDEE_ANONYMOUS_QUESTION","SET_QA_ENABLED","RESET_QA"),{setChatPrivilege:kC,setPanelistChatPrivilege:nR,addChatMessageHistory:rR,resetChat:iR,setIsAllowAttendeeChat:dB,setLatestChatMessageId:oR,removeChatMessage:PC}=mo("SET_CHAT_PRIVILEGE","SET_PANELIST_CHAT_PRIVILEGE","ADD_CHAT_MESSAGE_HISTORY","RESET_CHAT","SET_IS_ALLOW_ATTENDEE_CHAT","SET_LATEST_CHAT_MESSAGE_ID","REMOVE_CHAT_MESSAGE"),{setCcEditorInfo:sR,resetClosedCaption:Cn}=mo("SET_CC_EDITOR_INFO","SET_CC_LT_MESSAGE","SET_TEMP_SEND_CC_TEXT","SET_TEMP_RECEIVE_LT_TEXT","SET_TEMP_RECEIVE_CC_TEXT","SET_GATEWAY_INFO_LIST","SET_LT_ENABLE","SET_IS_LISTEN_CLOSED_CAPTION","SET_CC_ENABLE","ALLOW_PARTICIPANT_ASK_LT","RECEIVE_ASK_START_LT","SET_MEETING_ENABLED_LT_FEATURE","UPDATE_LT_STATUS","DELETE_MESSAGE","UPDATE_MESSAGE","RESET_CLOSED_CAPTION"),{addBreakoutRooms:aR,setBreakoutRoomAllocationPattern:cR,setBreakoutRoomSequenceId:nb,setMeetingElapsedTime:uR,setStartRoomElapsedTime:lR,setBreakoutRoomOptions:dR,setBreakoutRoomControlStatus:wm,setBreakoutRooms:n_,setCurrentBreakoutRoom:NC,setBreakoutRoomAttendeeStatus:aA,setBreakoutRoomConfId:MC,setBreakoutRoomToken:xC,resetBreakoutRoom:Qc,setBreakoutRoomClosingRoomTime:hR,setBreakoutRoomBroadcastMessage:LC,setBreakoutRoomHostReplyType:rb,setBreakoutRoomHostReplyRequestId:yP,setMainSessionAttendeeList:BC,setIsHugeBreakoutRoom:pR,setBreakoutRoomPreAssignedRoomList:EP,setBreakoutRoomUserRoleUpdated:fR,setBreakoutRoomMeetingOptions:mR}=mo("ADD_BREAKOUT_ROOMS","SET_BREAKOUT_ROOM_ALLOCATION_PATTERN","SET_BREAKOUT_ROOM_SEQUENCE_ID","SET_MEETING_ELAPSED_TIME","SET_START_ROOM_ELAPSED_TIME","SET_BREAKOUT_ROOM_OPTIONS","SET_BREAKOUT_ROOM_CONTROL_STATUS","SET_BREAKOUT_ROOMS","SET_CURRENT_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_ATTENDEE_STATUS","SET_BREAKOUT_ROOM_CONF_ID","SET_BREAKOUT_ROOM_TOKEN","RESET_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_CLOSING_ROOM_TIME","SET_BREAKOUT_ROOM_BROADCAST_MESSAGE","SET_BREAKOUT_ROOM_HOST_REPLY_TYPE","SET_BREAKOUT_ROOM_HOST_REPLY_REQUEST_ID","SET_MAIN_SESSION_ATTENDEE_LIST","SET_IS_HUGE_BREAKOUT_ROOM","SET_BREAKOUT_ROOM_PRE_ASSIGNED_ROOM_LIST","SET_BREAKOUT_ROOM_USER_ROLE_UPDATED","SET_BREAKOUT_ROOM_MEETING_OPTIONS"),{setCloudRecordingStatus:gR,setCloudRecordingEnable:FC,setCloudIsoRecordingEnable:Tm,setAllowStopAutoRecording:UC,setAutomaticCloudRecordingEnable:cA,setIsZoomIQ:uA,setZoomIQChanging:_R,resetRecording:ib}=mo("SET_CLOUD_RECORDING_STATUS","SET_CLOUD_RECORDING_ENABLE","SET_CLOUD_ISO_RECORDING_ENABLE","SET_ALLOW_STOP_AUTO_RECORDING","SET_AUTOMATIC_CLOUD_RECORDING_ENABLE","SET_IS_ZOOM_I_Q","SET_ZOOM_I_Q_CHANGING","RESET_RECORDING"),{updateCmdJid:VC,removeCmdJid:Rm,setCmdChannelConnectionStatus:vR,resetCmdChannel:AR}=mo("UPDATE_CMD_JID","REMOVE_CMD_JID","SET_CMD_CHANNEL_CONNECTION_STATUS","RESET_CMD_CHANNEL"),{resetArchiving:bP}=mo({SET_ARCHIVING_STATUS:i=>i,SET_ARCHIVING_SESSION_READY:i=>i,SET_ARCHIVING_OPTIONS:i=>i,RESET_ARCHIVING:()=>{}}),{setIsLiveTranscriptionEnabled:yR,setLiveTranscriptionMeetingOptions:jC,setIsLiveTranscriptionManualCaptionerEnabled:ER,setLiveTranscriptionGatewayId:lA,setLiveTranscriptionSupportedLanguage:SP,setIsLiveTranscriptionSubscribed:QC,setCurrentTranscriptionLang:At,setCurrentTranslationLang:dA,addLiveTranscriptionMessage:HC,updateLiveTranscriptionMessage:bR,reduceLiveTranscriptionMessages:GC,setLiveTranscriptionEngineType:SR,removeLiveTranscriptionFailoverState:r_,setLiveTranscriptionLastCaptionMessage:i_,resetLiveTranscription:WC}=mo("SET_IS_LIVE_TRANSCRIPTION_ENABLED","SET_LIVE_TRANSCRIPTION_MEETING_OPTIONS","SET_IS_LIVE_TRANSCRIPTION_MANUAL_CAPTIONER_ENABLED","SET_LIVE_TRANSCRIPTION_GATEWAY_ID","SET_LIVE_TRANSCRIPTION_SUPPORTED_LANGUAGE","SET_IS_LIVE_TRANSCRIPTION_SUBSCRIBED","SET_CURRENT_TRANSCRIPTION_LANG","SET_CURRENT_TRANSLATION_LANG","ADD_LIVE_TRANSCRIPTION_MESSAGE","UPDATE_LIVE_TRANSCRIPTION_MESSAGE","REDUCE_LIVE_TRANSCRIPTION_MESSAGES","SET_LIVE_TRANSCRIPTION_ENGINE_TYPE","REMOVE_LIVE_TRANSCRIPTION_FAILOVER_STATE","SET_LIVE_TRANSCRIPTION_LAST_CAPTION_MESSAGE","RESET_LIVE_TRANSCRIPTION"),{resetPoll:TP}=mo("SET_POLL_DATA","SET_POLLING_ID","SET_POLLING_WEB_LINKS","SET_POLLING_DOC_MAX_SIZE","SET_POLLING_DOC_SIZE","SET_POLLING_DOC_LIBRARY_MAX_SIZE","SET_POLLING_DOC_LIBRARY_SIZE","RESET_POLL"),Om=function(i){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{socket:{zoomSocketStatus:u,xmppSocketStatus:p,mainSessionSocketStatus:v},meeting:{meetingStatus:y}}=i,C=[];if(y===Bi.Joined){const w=ji.getInstance(),D=Wo.createAgent();if(w.disconnect(),w.destroy(),i.video&&(i.video.subscribedVideoList.length>0&&i.video.subscribedVideoList.forEach(P=>{D.unsubscribeVideo(P)}),i.video.isCurrentUserStartedVideo&&vt(Qg)),i.share&&i.share.isReceiveSharing){const P=i.share.activeNodeId;i.share.isRemoteControlApproved&&D.sharingRequestRemoteControl(P,!1),D.unsubscribeSharing(P)}}if(l||(ni.clearSession(),[Ur.WebclientTk,Ur.WebclientZsk,Ur.WebclientZtk].forEach(w=>{sessionStorage.removeItem(w)}),ld.destroy()),u!==Co.Closed&&C.push(oh()),p!==Co.Closed&&C.push(Pa()),v!==Co.Closed&&C.push(Ei()),l){const w=ii(i);C.push(Ma({audio:w?.audio,muted:w?.muted,video:w?.bVideoOn}))}else C.push(Ma({audio:!1,muted:void 0,video:!1}));return C.push(Pg(),Lc(),NT(),oB(l),KT(),us(),lB(),iR(),ib(),Cn(),Qc(),AR(),bP(),WC(l),TP(),rT(Bi.Closed)),C},ob=function(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];return Ni({event:hd,operations:[_t(v=>v.find(y=>y.userId===i)),kn(v=>!!v),Ns(1)]},...u)};function bd(i){return Ze(_t((l,u)=>i(l,u)),kn(l=>null!=l))}function wR(i){return Ze($n((l,u)=>i(l,u)||qt))}function RP(i){return Ze(io((l,u)=>i(l,u)||qt))}function hA(i){return Ze($n((l,u)=>i(l,u)),$n(l=>Array.isArray(l)?Mn(l):or(l)))}const OP=(i,l)=>{const u=performance.now();let p=0,v=!1;return setTimeout(function y(){p+=l,i();const C=performance.now()-u-p,w=setTimeout(y,Math.max(l-C,0));v&&clearTimeout(w)},l),()=>{v=!0}},vB={period:500,rules:[{peak:50,throttle:300},{peak:60,throttle:400}]},TR={[`${Mo}`]:()=>({payloads:{add:[],update:[],remove:[]},onThrottle(i){i.add&&this.payloads.add.push(...i.add),i.update&&this.payloads.update.push(...i.update),i.remove&&this.payloads.remove.push(...i.remove)}})};function fu(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vB;return l=>new Be(u=>{const p=new Map;let v=0,y=null;const{period:C,rules:w}=i;let D=null;y||(y=OP(()=>{v=0},C));const P=Object.keys(TR),L=l.subscribe({next(W){if(W&&W.evt&&null!==y){v+=1;const{evt:re,body:ee}=W,te=String(re);if(P.indexOf(te)>=0)if(D){const oe=p.get(te);if(oe)oe.onThrottle(ee);else{const Ee=TR[te]();Ee.onThrottle(ee),p.set(te,Ee)}}else{let oe=0;if(w.forEach(Ee=>{v>Ee.peak&&(oe=Ee.throttle)}),oe>0){const Ee=TR[te]();Ee.onThrottle(ee),p.set(te,Ee),D=setTimeout(()=>{p.forEach((Te,De)=>{const Le={evt:Number(De),body:Te.payloads};u.next(Le)}),p.clear(),D=null},oe)}else u.next(W)}else u.next(W)}else u.next(W)},error(W){u.error(W)},complete(){u.complete()}});return()=>{L.unsubscribe(),y&&(y(),y=null),v=0}})}Ys([Zi,i=>{let{share:{isReceiveSharing:l}}=i;return l},i=>{let{share:{activeNodeId:l}}=i;return l}],function(){let u=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(p=>p.userId===u&&!0===p.sharerOn):null});const rf=Ys([Zi],i=>i.filter(l=>l.sharerOn));class sb{constructor(l){this._cancelError=new Error("request for lock canceled"),this._locked=void 0,this._queue=[],this._waiters=[],this._currentReleaser=void 0,l&&(this._cancelError=l),this._locked=!1}acquire(){const l=this.isLocked(),u=new Promise((p,v)=>{this._queue.push({resolve:p,reject:v})});return l||this._dispatch(),u}runExclusive(l){var u=this;return F(function*(){const p=yield u.acquire();try{return yield l()}finally{p()}})()}waitForUnlock(){var l=this;return F(function*(){return l.isLocked()?new Promise(u=>l._waiters.push({resolve:u})):Promise.resolve()})()}isLocked(){return this._locked}release(){if(this._currentReleaser){const l=this._currentReleaser;this._currentReleaser=void 0,l()}}cancel(){this._queue.forEach(l=>l.reject(this._cancelError)),this._queue=[]}_dispatch(){const l=this._queue.shift();if(!l)return;let u=!1;this._currentReleaser=()=>{u||(u=!0,this._locked=!1,this._resolveWaiters(),this._dispatch())},this._locked=!0,l.resolve(this._currentReleaser)}_resolveWaiters(){this._waiters.forEach(l=>l.resolve()),this._waiters=[]}}let zC="zoom.us";const up="2.9.7",ab="https://dmogdx0jrul3u.cloudfront.net/2.9.7/lib/av",pA="https://source.zoom.us/2.9.7/lib/av",RR="https://jssdk.zoomus.cn/2.9.7/lib/av",mu=(i,l,u)=>Cg(...[l,u].map((p,v)=>{if("initial"!==p)return Mn(Promise.resolve("success"===p));{const y=0===v?"ENCODE":"DECODE";return id(zs(`${i.toUpperCase()}_${y}_SUCCESS`,1).pipe(Go(!0)),zs(`${i.toUpperCase()}_${y}_FAIL`,1).pipe(Go(!1)))}})),Dm=i=>{const l=ii(i.value);return l?or(l):zs(rm,1).pipe(Gt(Ps),Un(i),_t(u=>{let[,p]=u;return ii(p)}))},OR=()=>Mn(navigator.mediaDevices.enumerateDevices()).pipe(_t(i=>{const l=[],u=[],p=[];return i.forEach(v=>{const{kind:y,deviceId:C,label:w}=v;switch(y){case"audioinput":"communications"===C||/ZoomAudioDevice/i.test(w)||/Zoom-\S*/.test(w)||/CubebAggregateDevice\S*/.test(w)||l.push({deviceId:C,label:w});break;case"audiooutput":"communications"===C||/ZoomAudioDevice/i.test(w)||u.push({deviceId:C,label:w});break;case"videoinput":p.push({deviceId:C,label:w})}}),{microphones:l,speakers:u,cameras:p}}));function fA(i){if(i){let u=i;try{i.width=i.width}catch{var l;u=i.cloneNode(!0),null===(l=i.parentNode)||void 0===l||l.replaceChild(u,i)}return u}return i}function cb(){try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(OE)}catch{return!1}}function DR(){var i;return null===(i=WebAssembly)||void 0===i?void 0:i.validate(W4)}function km(){return jp()||Qp()}const DP=(()=>{const i=new sb;return{withAudioAction:l=>function(){for(var u=arguments.length,p=new Array(u),v=0;v<u;v++)p[v]=arguments[v];return new Promise(function(){var y=F(function*(C,w){let D=!1;const P=setTimeout(()=>{D=!0,w(new Error("Operation Timeout!"))},3e4);try{const L=yield i.acquire();D?L():(clearTimeout(P),C(l(...p)))}catch(L){D||(clearTimeout(P),w(L))}});return function(C,w){return y.apply(this,arguments)}}())},processAudioAction:l=>i.acquire().then(()=>l()),completeAudioAction:()=>{i.release()},cancelAllAudioAction:()=>{i.cancel()}}})();function kR(i){const l=["joinComputerAudio","joinSharingAudio","leaveComputerAudio","leaveSharingAudio"];return new Proxy(i,{get:(u,p)=>"string"==typeof p&&l.includes(p)?function(){return DP.withAudioAction(u[p].bind(u))(...arguments)}:Reflect.get(u,p)})}function PR(){var i,l;const u=NS()&&Number(null===(i=fE())||void 0===i||null===(l=i.match(/\d+$/))||void 0===l?void 0:l[0])>=91,p=navigator.hardwareConcurrency>2;return!Qp()&&Xh()&&Rv()&&u&&p}const Il=(i,l)=>{const u=document.createElement("link");return u.rel="preload",u.href=i,u.as=l,u.crossOrigin="anonymous",u},lp=(i,l,u)=>{const p=[],v=[],y=Array.isArray(i)?i:[i];return AE.filter(C=>y.includes(C.category)&&C.tag===l).forEach(C=>{"worker"===C.type?p.push(`${u}${C.name}`):"wasm"===C.type&&v.push(`${u}${C.name}`)}),{workers:p,wasms:v}},mh=Wo.createAgent();var AB=Object.freeze({__proto__:null,sharePrivilegeChangeEpic:(i,l)=>ar(i,tc).pipe(kn(u=>{var p;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.lockShare)}),Un(l),sr(u=>{let[p,v]=u;const{share:{sharePrivilege:y}}=v,{payload:{body:{lockShare:C}}}=p;y!==C&&vt(oC,C)}),_t(u=>{let[p]=u;return QT(p.payload.body.lockShare)})),shareSSrcEpic:i=>ar(i,20227).pipe(_t(l=>HT(l.payload.body.ssrc))),shareStatusChangeEpic:(i,l)=>ar(i,20225).pipe(Un(l),kn(u=>{let[p,v]=u;const{payload:{body:y}}=p,{share:{isReceiveSharingFromMainSession:C}}=v;return!C||C&&y.fromMainSession}),_t(u=>{let[p,v]=u;const{share:{isReceiveSharing:y,activeNodeId:C,shareQuality:w,isReceiveSharingFromMainSession:D},breakoutRoom:P}=v,{payload:{body:L}}=p;if(y&&1===L.bStatus){let W=!1;P?.currentRoom.status===ur.InRoom&&P.mainSessionAttendeeList.length>0&&(W=P.mainSessionAttendeeList.findIndex(re=>re.userId===C)>-1),mh.unsubscribeSharing(C,W),mh.subscribeSharing(L.activeNodeID,w,D),ji.getInstance().switchSharingSource(L.ssrc,D),vt(iC,{userId:L.activeNodeID})}else if(1===L.bStatus){const W={activeUserId:L.activeNodeID,isActive:!0};D&&Object.assign(W,{isFromMainSession:!0}),vt(Vc,W)}else if(y){const W={activeUserId:L.activeNodeID,isActive:!1};D&&Object.assign(W,{isFromMainSession:!0}),vt(Vc,W)}return bC(L)})),handleChromeExtensionEpic:i=>bi(i,Jn.CheckChromeSharingExtensionResponse).pipe(_t(l=>(vt(Uv,l.payload.data),Ad(l.payload.data)))),handleSDKShareSuccessEpic:(i,l)=>bi(i,[Jn.SharingDesktopStreamHaveAudio,Jn.SharingDesktopStreamHaveNoAudio]).pipe(Un(l),_t(u=>{let[p,v]=u;const{meeting:{userId:y},share:{isSharingToBreakoutRoom:C}}=v,{payload:{type:w}}=p;return mh.startSharing(y,{bShareToBO:C,bShareAudio:w===Jn.SharingDesktopStreamHaveAudio}),cP(!1)})),handleSDKShareErrorEpic:i=>bi(i,[Jn.DesktopSharingError,Jn.DesktopSharingChromeExtensionUninstalled,Jn.DesktopSharingPermissionDenied,Jn.DesktopSharingSystemError]).pipe($n(l=>{const u=[];let p="";return[Jn.DesktopSharingPermissionDenied,Jn.DesktopSharingSystemError].includes(l.payload.type)&&(u.push(cP(!0)),l.payload.type===Jn.DesktopSharingSystemError?/mac/i.test(navigator.platform)&&(p="To use screen share on Chrome, please allow screen recording access in system setting."):p="To use screen share, please allow the permission request."),vt(rC,{reason:p}),Mn(u)})),handleSDKShareDimensionChangeEpic:i=>bi(i,Jn.CurrentDesktopSharingWidthHeight).pipe(kn(l=>!!l.payload.data),_t(l=>{vt(HE,l.payload.data);const{payload:{data:{width:u,height:p}}}=l;return ji.getInstance().ajustmentSharingCanvas(u,p),uP(l.payload.data)})),handleSDKReceivedShareSizeChangeEpic:(i,l)=>bi(i,Jn.SharingDecodeMaxSize).pipe(kn(u=>!!u.payload.data),Un(l),bd(u=>{let[p,v]=u;const{share:{shareQuality:y,activeNodeId:C,isReceiveSharingFromMainSession:w}}=v,{payload:{data:{size:D}}}=p,P=Number(D);if(y!==P)return mh.subscribeSharing(C,P,w),GT(P)})),handleRWGShareOriginalDimensionEpic:i=>ar(i,20226).pipe(sr(l=>{var u,p;if(vt(sa,null===(u=l.payload)||void 0===u?void 0:u.body),null!==(p=l.payload)&&void 0!==p&&p.body){const{payload:{body:{width:v,height:y}}}=l;ji.getInstance().ajustmentReceivedSharingCanvas(v,y)}}),_t(l=>jc(l.payload.body))),handleSDKShareOriginalDimensionEpic:i=>bi(i,Jn.SharingPara).pipe(sr(l=>{var u,p;if(vt(sa,null===(u=l.payload.data)||void 0===u?void 0:u.body),null!==(p=l.payload.data)&&void 0!==p&&p.body){const{payload:{data:{body:{width:v,height:y}}}}=l;ji.getInstance().ajustmentReceivedSharingCanvas(v,y)}}),_t(l=>{var u;return jc(null===(u=l.payload.data)||void 0===u?void 0:u.body)})),handleSDKStopShareEpic:(i,l)=>bi(i,Jn.UserStopDesktopSharing).pipe(Un(l),_t(u=>{let[,p]=u;const{meeting:{userId:v},share:{status:y}}=p;return y!==K.ShareStatus.End&&(mh.stopSharing(v),vt(Is)),Ku(K.ShareStatus.End)})),handleRWGCurrentUserShareChangeEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[p,v]=u;const{meeting:{userId:y}}=v,C=p.payload.body.update;return C&&C.length>0&&C.findIndex(w=>w.id===y&&void 0!==w.bShareOn)>-1}),$n(u=>{let[p,v]=u;const{meeting:{userId:y},share:{status:C,isReceiveSharing:w,activeNodeId:D}}=v,{payload:{body:{update:P}}}=p,L=P.find(te=>te.id===y&&!1===te.bShareOn),W=P.find(te=>te.id===y&&!0===te.bShareOn),re=[],ee=ji.getInstance();return L&&C!==K.ShareStatus.End&&(mh.stopSharing(y),ee.stopDesktopSharing(),re.push(Ku(K.ShareStatus.End)),vt(Gg)),W&&C===K.ShareStatus.End&&(w&&(ee.stopRenderSharing(),mh.unsubscribeSharing(D),re.push(ph(!1))),re.push(Ku(K.ShareStatus.Sharing))),Mn(re)})),handleMultipleShareChangeEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[p,v]=u;const{meeting:{userId:y}}=v,C=p.payload.body.update;return C&&C.length>0&&C.findIndex(w=>w.id!==y&&void 0!==w.bShareOn)>-1}),$n(u=>{let[p,v]=u;const{payload:{body:{update:y}}}=p,{share:{activeNodeId:C,isReceiveSharing:w}}=v,D=rf(v),P=y.filter(re=>!0===re.bShareOn&&!1===re.bSharePause),L=y.filter(re=>!0===re.bShareOn&&!0===re.bSharePause),W=y.filter(re=>!1===re.bShareOn);return P.length>0&&P.forEach(re=>{-1===D.findIndex(ee=>ee.userId===re.id)?vt(wT,re):vt(Vv,re)}),L.length>0&&L.forEach(re=>{vt(du,re)}),W.length>0&&(W.forEach(re=>{vt(Wg,re)}),w&&W.some(re=>re.id===C))?id(ar(i,20225).pipe(Ns(1),Qr(qt)),yc(50).pipe(Qr(Ki("timeout")))).pipe(xc(()=>{const{share:{activeNodeId:re,isReceiveSharingFromMainSession:ee,shareQuality:te},audio:oe}=l.value,Ee=D.filter(Te=>Te.userId!==re);if(Ee.length>0){const Te=Ee[0],{userId:De}=Te;mh.unsubscribeSharing(re,ee),mh.subscribeSharing(De,te,ee);const Le=ji.getInstance();return Le.switchSharingSource(De,ee),oe?.localShareAudioUserMutedList.forEach(et=>{Le.setSharingAudioVolume(De,et.userId!==De||et.muted,et.isFromMainSession)}),vt(iC,{userId:De}),or(bC({activeNodeID:De,bStatus:1,ssrc:De}))}return qt})):qt})),handleSharingEncryptIndication:(i,l)=>ar(i,Bg).pipe(Un(l),io(u=>{let[p,v]=u;const{payload:{body:{encryptKey:y,additionalType:C}}}=p,{media:{sharingDecodeStatus:w,sharingEncodeStatus:D},meeting:{confId:P,userId:L,zoomId:W,meetingId:re,meetingNumber:ee,isWebinar:te}}=v;return Dm(l).pipe(io(oe=>{let Ee=D;return te&&oe&&Fa(oe.userRole)&&(Ee="failed"),mu("sharing",Ee,w).pipe(sr(Te=>{let[De,Le]=Te;const et=ji.getInstance(),lt={userId:L,sn:vl(W),confId:P,encryptKey:vl(y),encryptType:C,meetingId:re,meetingNumber:ee};if(De&&et?.updateMediaParams({iVType:La.SHARING_ENCODE,isFromMainSession:!1,updateParams:lt}),Le){et.updateMediaParams({iVType:La.SHARING_DECODE,isFromMainSession:!1,updateParams:lt});const{participants:{attendeesList:pt}}=l.value;if(pt.length>0){const ht=pt.map(gt=>({userid:gt.userId,sn:gt.zoomID&&vl(gt.zoomID)}));et.updateUserMediaSN({added:ht,isFromMainSession:!1,iVType:La.SHARING_DECODE})}}}),Qr(qt))}))})),handleSharingReceivingChannelReadyEpic:(i,l)=>xs(i,20235).pipe(Un(l),sr(u=>{let[p,v]=u;const{media:{sharingDecodeStatus:y}}=v,{type:C,payload:{body:w}}=p,D=C===`${gl}`;mu("sharing","success",y).subscribe(P=>{let[,L]=P;L&&ji.getInstance().addReceivedSharingChannelType(cn({isFromMainSession:D},w))})}),Qr(qt)),handleSharingReceivingChannelCloseEpic:(i,l)=>xs(i,20236).pipe(Un(l),sr(u=>{let[p,v]=u;const{media:{sharingDecodeStatus:y}}=v,{type:C,payload:{body:{ssrc:w}}}=p,D=C===`${gl}`;mu("sharing","success",y).subscribe(P=>{let[,L]=P;L&&ji.getInstance().removeReceivedSharingChannelType({isFromMainSession:D,ssrc:w})})}),Qr(qt)),handleReceiveSharingConfirmEpic:i=>bi(i,Jn.SharingFirstDecodeFrameReceivedSsrc).pipe(kn(l=>!!l.payload.data),sr(l=>{const{payload:{data:{ssrc:u}}}=l;mh.sendReceivingSharingReady(u)}),Qr(qt)),handleReceiveSharingFeedbackEpic:(i,l)=>ar(i,20233).pipe(kn(()=>!!l.value.share.isRequireReadReceipt),sr(u=>{const{payload:{body:{bReceiveOk:p}}}=u;p&&vt(X2)}),Qr(qt))});function wl(i){for(var l=arguments.length,u=Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];throw Error("[Immer] minified error nr: "+i+(u.length?" "+u.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o_(i){return!!i&&!!i[Yu]}function s_(i){var l;return!!i&&(function(u){if(!u||"object"!=typeof u)return!1;var p=Object.getPrototypeOf(u);if(null===p)return!0;var v=Object.hasOwnProperty.call(p,"constructor")&&p.constructor;return v===Object||"function"==typeof v&&Function.toString.call(v)===UR}(i)||Array.isArray(i)||!!i[Lr]||!(null===(l=i.constructor)||void 0===l||!l[Lr])||a_(i)||c_(i))}function sf(i,l,u){void 0===u&&(u=!1),0===dp(i)?(u?Object.keys:eI)(i).forEach(function(p){u&&"symbol"==typeof p||l(p,i[p],i)}):i.forEach(function(p,v){return l(v,p,i)})}function dp(i){var l=i[Yu];return l?l.i>3?l.i-4:l.i:Array.isArray(i)?1:a_(i)?2:c_(i)?3:0}function YC(i,l){return 2===dp(i)?i.has(l):Object.prototype.hasOwnProperty.call(i,l)}function qC(i,l,u){var p=dp(i);2===p?i.set(l,u):3===p?(i.delete(l),i.add(u)):i[l]=u}function a_(i){return yB&&i instanceof Map}function c_(i){return EB&&i instanceof Set}function gh(i){return i.o||i.t}function JC(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var l=tI(i);delete l[Yu];for(var u=eI(l),p=0;p<u.length;p++){var v=u[p],y=l[v];!1===y.writable&&(y.writable=!0,y.configurable=!0),(y.get||y.set)&&(l[v]={configurable:!0,writable:!0,enumerable:y.enumerable,value:i[v]})}return Object.create(Object.getPrototypeOf(i),l)}function ub(i,l){return void 0===l&&(l=!1),lb(i)||o_(i)||!s_(i)||(dp(i)>1&&(i.set=i.add=i.clear=i.delete=oV),Object.freeze(i),l&&sf(i,function(u,p){return ub(p,!0)},!0)),i}function oV(){wl(2)}function lb(i){return null==i||"object"!=typeof i||Object.isFrozen(i)}function zu(i){var l=d_[i];return l||wl(18,i),l}function NR(){return mb}function u_(i,l){l&&(zu("Patches"),i.u=[],i.s=[],i.v=l)}function mA(i){_h(i),i.p.forEach($C),i.p=null}function _h(i){i===mb&&(mb=i.l)}function db(i){return mb={p:[],l:mb,h:i,m:!0,_:0}}function $C(i){var l=i[Yu];0===l.i||1===l.i?l.j():l.O=!0}function Pm(i,l){l._=l.p.length;var u=l.p[0],p=void 0!==i&&i!==u;return l.h.g||zu("ES5").S(l,i,p),p?(u[Yu].P&&(mA(l),wl(4)),s_(i)&&(i=XC(l,i),l.l||pb(l,i)),l.u&&zu("Patches").M(u[Yu].t,i,l.u,l.s)):i=XC(l,u,[]),mA(l),l.u&&l.v(l.u,l.s),i!==ZC?i:void 0}function XC(i,l,u){if(lb(l))return l;var p=l[Yu];if(!p)return sf(l,function(y,C){return hb(i,p,l,y,C,u)},!0),l;if(p.A!==i)return l;if(!p.P)return pb(i,p.t,!0),p.t;if(!p.I){p.I=!0,p.A._--;var v=4===p.i||5===p.i?p.o=JC(p.k):p.o;sf(3===p.i?new Set(v):v,function(y,C){return hb(i,p,v,y,C,u)}),pb(i,v,!1),u&&i.u&&zu("Patches").R(p,u,i.u,i.s)}return p.o}function hb(i,l,u,p,v,y){if(o_(v)){var C=XC(i,v,y&&l&&3!==l.i&&!YC(l.D,p)?y.concat(p):void 0);if(qC(u,p,C),!o_(C))return;i.m=!1}if(s_(v)&&!lb(v)){if(!i.h.F&&i._<1)return;XC(i,v),l&&l.A.l||pb(i,v)}}function pb(i,l,u){void 0===u&&(u=!1),i.h.F&&i.m&&ub(l,u)}function MR(i,l){var u=i[Yu];return(u?gh(u):i)[l]}function xR(i,l){if(l in i)for(var u=Object.getPrototypeOf(i);u;){var p=Object.getOwnPropertyDescriptor(u,l);if(p)return p;u=Object.getPrototypeOf(u)}}function l_(i){i.P||(i.P=!0,i.l&&l_(i.l))}function fb(i){i.o||(i.o=JC(i.t))}function kP(i,l,u){var p=a_(l)?zu("MapSet").N(l,u):c_(l)?zu("MapSet").T(l,u):i.g?function(v,y){var C=Array.isArray(v),w={i:C?1:0,A:y?y.A:NR(),P:!1,I:!1,D:{},l:y,t:v,k:null,o:null,j:null,C:!1},D=w,P=gb;C&&(D=[w],P=gA);var L=Proxy.revocable(D,P),W=L.revoke,re=L.proxy;return w.k=re,w.j=W,re}(l,u):zu("ES5").J(l,u);return(u?u.A:NR()).p.push(p),p}function LR(i,l){switch(l){case 2:return new Map(i);case 3:return Array.from(i)}return JC(i)}var BR,mb,FR=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),yB=typeof Map<"u",EB=typeof Set<"u",PP=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",ZC=FR?Symbol.for("immer-nothing"):((BR={})["immer-nothing"]=!0,BR),Lr=FR?Symbol.for("immer-draftable"):"__$immer_draftable",Yu=FR?Symbol.for("immer-state"):"__$immer_state",UR=""+Object.prototype.constructor,eI=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,tI=Object.getOwnPropertyDescriptors||function(i){var l={};return eI(i).forEach(function(u){l[u]=Object.getOwnPropertyDescriptor(i,u)}),l},d_={},gb={get:function(i,l){if(l===Yu)return i;var v,w,D,u=gh(i);if(!YC(u,l))return v=i,(D=xR(u,l))?"value"in D?D.value:null===(w=D.get)||void 0===w?void 0:w.call(v.k):void 0;var p=u[l];return i.I||!s_(p)?p:p===MR(i.t,l)?(fb(i),i.o[l]=kP(i.A.h,p,i)):p},has:function(i,l){return l in gh(i)},ownKeys:function(i){return Reflect.ownKeys(gh(i))},set:function(i,l,u){var C,w,p=xR(gh(i),l);if(p?.set)return p.set.call(i.k,u),!0;if(!i.P){var v=MR(gh(i),l),y=v?.[Yu];if(y&&y.t===u)return i.o[l]=u,i.D[l]=!1,!0;if(((C=u)===(w=v)?0!==C||1/C==1/w:C!=C&&w!=w)&&(void 0!==u||YC(i.t,l)))return!0;fb(i),l_(i)}return i.o[l]===u&&"number"!=typeof u&&(void 0!==u||l in i.o)||(i.o[l]=u,i.D[l]=!0,!0)},deleteProperty:function(i,l){return void 0!==MR(i.t,l)||l in i.t?(i.D[l]=!1,fb(i),l_(i)):delete i.D[l],i.o&&delete i.o[l],!0},getOwnPropertyDescriptor:function(i,l){var u=gh(i),p=Reflect.getOwnPropertyDescriptor(u,l);return p&&{writable:!0,configurable:1!==i.i||"length"!==l,enumerable:p.enumerable,value:u[l]}},defineProperty:function(){wl(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){wl(12)}},gA={};sf(gb,function(i,l){gA[i]=function(){return arguments[0]=arguments[0][0],l.apply(this,arguments)}}),gA.deleteProperty=function(i,l){return gA.set.call(this,i,l,void 0)},gA.set=function(i,l,u){return gb.set.call(this,i[0],l,u,i[0])};var NP=function(){function i(u){var p=this;this.g=PP,this.F=!0,this.produce=function(v,y,C){if("function"==typeof v&&"function"!=typeof y){var w=y;y=v;var D=p;return function(oe){var Ee=this;void 0===oe&&(oe=w);for(var Te=arguments.length,De=Array(Te>1?Te-1:0),Le=1;Le<Te;Le++)De[Le-1]=arguments[Le];return D.produce(oe,function(et){var lt;return(lt=y).call.apply(lt,[Ee,et].concat(De))})}}var P;if("function"!=typeof y&&wl(6),void 0!==C&&"function"!=typeof C&&wl(7),s_(v)){var L=db(p),W=kP(p,v,void 0),re=!0;try{P=y(W),re=!1}finally{re?mA(L):_h(L)}return typeof Promise<"u"&&P instanceof Promise?P.then(function(oe){return u_(L,C),Pm(oe,L)},function(oe){throw mA(L),oe}):(u_(L,C),Pm(P,L))}if(!v||"object"!=typeof v){if(void 0===(P=y(v))&&(P=v),P===ZC&&(P=void 0),p.F&&ub(P,!0),C){var ee=[],te=[];zu("Patches").M(v,P,ee,te),C(ee,te)}return P}wl(21,v)},this.produceWithPatches=function(v,y){if("function"==typeof v)return function(P){for(var L=arguments.length,W=Array(L>1?L-1:0),re=1;re<L;re++)W[re-1]=arguments[re];return p.produceWithPatches(P,function(ee){return v.apply(void 0,[ee].concat(W))})};var C,w,D=p.produce(v,y,function(P,L){C=P,w=L});return typeof Promise<"u"&&D instanceof Promise?D.then(function(P){return[P,C,w]}):[D,C,w]},"boolean"==typeof u?.useProxies&&this.setUseProxies(u.useProxies),"boolean"==typeof u?.autoFreeze&&this.setAutoFreeze(u.autoFreeze)}var l=i.prototype;return l.createDraft=function(u){var y;s_(u)||wl(8),o_(u)&&(o_(y=u)||wl(22,y),u=function C(w){if(!s_(w))return w;var D,P=w[Yu],L=dp(w);if(P){if(!P.P&&(P.i<4||!zu("ES5").K(P)))return P.t;P.I=!0,D=LR(w,L),P.I=!1}else D=LR(w,L);return sf(D,function(W,re){var ee,te;P&&(te=W,(2===dp(ee=P.t)?ee.get(te):ee[te])===re)||qC(D,W,C(re))}),3===L?new Set(D):D}(y));var p=db(this),v=kP(this,u,void 0);return v[Yu].C=!0,_h(p),v},l.finishDraft=function(u,p){var v=(u&&u[Yu]).A;return u_(v,p),Pm(void 0,v)},l.setAutoFreeze=function(u){this.F=u},l.setUseProxies=function(u){u&&!PP&&wl(20),this.g=u},l.applyPatches=function(u,p){var v;for(v=p.length-1;v>=0;v--){var y=p[v];if(0===y.path.length&&"replace"===y.op){u=y.value;break}}v>-1&&(p=p.slice(v+1));var C=zu("Patches").$;return o_(u)?C(u,p):this.produce(u,function(w){return C(w,p)})},i}(),Tc=new NP,It=Tc.produce;Tc.produceWithPatches.bind(Tc),Tc.setAutoFreeze.bind(Tc),Tc.setUseProxies.bind(Tc),Tc.applyPatches.bind(Tc),Tc.createDraft.bind(Tc),Tc.finishDraft.bind(Tc);const VR={ssrc:0,status:K.ShareStatus.End,shareDimension:{width:0,height:0},receivedShareDimension:{width:1920,height:1080,logicWidth:1920,logicHeight:1080},sharePrivilege:Uu.OnlyHost,activeNodeId:0,activeSsrc:0,shareQuality:1,isRemoteSharingActive:!1,isReceiveSharing:!1,isRemoteControlApproved:!1,isGrabRemoteControl:!1,isSDKGrabControl:!1,isChromeExtensionInstalled:!1,isScreenShareForbidden:!1,isReceiveSharingFromMainSession:!1,isSharingToBreakoutRoom:!1,isSharingWithSecondCamera:!1,secondCameraId:"default",isRequireReadReceipt:!1},bB=Fr({[`${QT}`]:It((i,l)=>{let{payload:u}=l;i.sharePrivilege=u}),[`${bC}`]:It((i,l)=>{let{payload:u}=l;i.isRemoteSharingActive=1===u.bStatus,i.activeNodeId=u.activeNodeID,i.activeSsrc=u.ssrc}),[`${ph}`]:It((i,l)=>{let{payload:u}=l;i.isReceiveSharing=u}),[`${Ad}`]:It((i,l)=>{let{payload:u}=l;i.isChromeExtensionInstalled=u}),[`${uP}`]:It((i,l)=>{let{payload:u}=l;i.shareDimension=cn({},u)}),[`${Ku}`]:It((i,l)=>{let{payload:u}=l;i.status=u}),[`${HT}`]:It((i,l)=>{let{payload:u}=l;i.ssrc=u}),[`${GT}`]:It((i,l)=>{let{payload:u}=l;i.shareQuality=u}),[`${jc}`]:It((i,l)=>{let{payload:u}=l;i.receivedShareDimension=cn({},u)}),[`${lP}`]:It((i,l)=>{let{payload:u}=l;i.isRemoteControlApproved=u}),[`${sB}`]:It((i,l)=>{let{payload:u}=l;i.isGrabRemoteControl=u}),[`${dP}`]:It((i,l)=>{let{payload:u}=l;i.isVerifiedRenderCanvasAfterFailover=u}),[`${nA}`]:It((i,l)=>{let{payload:u}=l;i.isVerifiedCaptureCanvasAfterFailover=u}),[`${WT}`]:It((i,l)=>{let{payload:u}=l;i.isSDKGrabControl=u}),[`${SC}`]:It((i,l)=>{let{payload:u}=l;i.isReceiveSharingFromMainSession=u}),[`${rA}`]:It((i,l)=>{let{payload:u}=l;i.isSharingToBreakoutRoom=u}),[`${CC}`]:It((i,l)=>{let{payload:u}=l;i.isSharingWithSecondCamera=u}),[`${hP}`]:It((i,l)=>{let{payload:u}=l;i.secondCameraId=u}),[`${IC}`]:It((i,l)=>{let{payload:u}=l;i.isRequireReadReceipt=u}),[`${KT}`]:()=>cn(cn({},VR),{},{isVerifiedRenderCanvasAfterFailover:!1,isVerifiedCaptureCanvasAfterFailover:!1})},VR),MP=Ms(AB),qu=Wo.createAgent();var nI=Object.freeze({__proto__:null,joinMeetingWelcomeEpic:i=>ar(i,0).pipe(sr(l=>{var u;if("READY"===(null===(u=l.payload.body)||void 0===u?void 0:u.status)){const p=ni.get(Ur.WebclientMeetingToken);p&&qu.joinMeeting(p)}}),Qr(qt)),joinMeetingSuccessfulEpic:(i,l)=>ar(i,4098).pipe(Un(l),RP(u=>{let[p,v]=u;const{payload:{body:{res:y,userID:C,zoomID:w,mn:D,participantID:P,disableAqos:L,disableVqos:W,meetingtoken:re,role:ee}}}=p,{meeting:{isWebinar:te,userEmail:oe,userName:Ee,isMeetingReset:Te,meetingOptions:De,zlkJwtToken:Le,cv:et,apiKey:lt,zsk:pt,signatureType:ht},media:{mediaConstraints:gt,assetsPath:Yt}}=v;if(ud.CONF_SUCCESS===y){const{WebclientParticipantId:Xt,WebclientZoomId:un,WebclientUserEmail:Tt,WebclientUserName:yn,WebclientMeetingToken:Kn}=Ur;ni.set(un,w,mi.SessionStorage),ni.set(Xt,P,mi.SessionStorage),oe&&ni.set(Tt,oe,mi.SessionStorage),ni.set(yn,Ee,mi.SessionStorage),re&&ni.set(Kn,re,mi.SessionStorage),pt&&qu.sendSdkKeyToMonitor(ht,lt,C);const Pt=[xg(p.payload.body),U2(performance.now())];ji.getInstance().init(),Te&&(Pt.push(Vp(!1)),void 0!==gt&&void 0!==Yt&&Pt.push(_l())),(De.isPollingEnabled||Le||te)&&Pt.push(Mu());let mt=!W;const Ve=!L;return Le&&lE(et,"1.3.0")<0&&(mt=!1),Pt.unshift(iT({audioQos:Ve,videoQos:mt})),(ee&gm.Owner)===gm.Owner&&(vt(Ks,{reason:"dont support assisnt join through widget",errorCode:-1}),qu.leaveMeeting()),vt(kv,{meetingNumber:D}),Mn(Pt)}return ud.CONF_FAIL_CONFLOCKED===y?vt(Ks,ah(y)):ud.CONF_FAIL_CONF_USER_FULL===y?vt(Ks,Object.assign({},ah(y),{lmUrl:p.payload.body.lmURL})):(ud.CONF_FAIL_MEETING_OVER===y||ud.CONF_RESULT_MMR_IB_REJECT===y||ud.CONF_FAIL_RESULT_MMR_CONF_PARTICIPANT_EXISTS===y||[ud.CONF_FAIL_HAS_BEEN_REMOVED,ud.CONF_FAIL_WEBINAR_DENIED_EMAIL].includes(y),vt(Ks,ah(y))),Mn(Om(v,!1))})),handleMeetingAttributeChangeEpic:(i,l)=>ar(i,tc).pipe(Un(l),_t(u=>{let[p,v]=u;const{payload:{body:y}}=p,{meeting:{zoomId:C,encType:w,gcmSessinKey:D}}=v;if(void 0!==y?.encryptKey&&ld.init(C,y.encryptKey,w),void 0!==y?.gatewayKey){const P=ji.getInstance(),[,L,W]=y.gatewayKey.split(".");P.sendUserNodeList([{userid:Number(L),sn:W&&vl(W)}],D)}return vt(FS,y),qf(y)})),handleMeetingEndEpic:(i,l)=>ar(i,7939).pipe(Un(l),$n(u=>{let[p,v]=u;const{payload:{body:y}}=p;if(void 0!==y.reason){if(ba.Reconnect===y.reason)return vt(Fc,X1.WaitingRoomFailover===y.subReason?{reason:Ws.OnHold}:{reason:Ws.Failover}),or(Ca(xa.NormalCase));ba.KickedByHost===y.reason?vt(om,{reason:"kicked by host"}):[ba.EndByHost,ba.EndByNone,ba.EndByAdmin,ba.EndByHostStartAnotherMeeting].includes(y.reason)?vt(om,{reason:"ended by host"}):ba.FreeMeetingTimeout===y.reason&&vt(om,{reason:"free meeting ended"})}return v.meeting.isMeetingReset?qt:Mn(Om(v,!1))})),meetingFailoverEpic:(i,l)=>i.pipe(fi(`${Ca}`),Un(l),$n(u=>{let[,p]=u;const v=Om(p,!0);let y;if(p.meeting.zlkJwtToken){const C=function(D){if(D){const{meeting:{topic:P,passWord:L,userName:W,zlkJwtToken:re,lang:ee,cv:te,customerKey:oe}}=D;return{topic:P,passWord:L,userName:W,zlkJwtToken:re,lang:ee,cv:te,customerKey:oe}}return null}(p);y=or(nT({topic:C?.topic,password:C?.passWord,userName:C?.userName,zlk:C?.zlkJwtToken,lang:C?.lang,cv:C?.cv,customerKey:C?.customerKey})).pipe(fo(1e3))}else{const C=function(w){const{meeting:{apiKey:D,signature:P,signatureType:L,meetingNumber:W,userName:re,lang:ee,passWord:te,userEmail:oe,sdkUrl:Ee,sdkOrigin:Te,proxy:De,cv:Le,ztk:et,zsk:lt,tk:pt}}=w,ht=et||sessionStorage.getItem(Ur.WebclientZtk),gt=lt||sessionStorage.getItem(Ur.WebclientZsk);return{apiKey:D,signature:P,signatureType:L,meetingNumber:W,userName:re,lang:ee,passWord:te,userEmail:oe,sdkUrl:Ee,sdkOrigin:Te,proxy:De,cv:Le,ztk:ht,zsk:gt,tk:pt||sessionStorage.getItem(Ur.WebclientTk),ulsm:gt?1:0}}(p);y=or(tT(C)).pipe(fo(1e3))}return Yy(Mn(v),y)})),hostChangeEpic:i=>xs(i,7940).pipe(sr(l=>{vt("MEETING_HOST_CHANGE_INDICATION",l.payload.body.bHost)}),_t(l=>F2(l.payload.body))),cohostChangeEpic:i=>xs(i,7941).pipe(sr(l=>{vt("MEETING_COHOST_CHANGE_INDICATION",l.payload.body.bCoHost)}),_t(l=>Iv(l.payload.body))),setMeetingOptEpic:i=>xs(i,7945).pipe(sr(l=>{const{payload:{body:{opt:u}}}=l;ni.set(Ur.WebclientOpt,u,mi.SessionStorage)}),Qr(qt)),setMeetingOnHoldEpic:(i,l)=>ar(i,7942).pipe(sr(u=>{const{payload:{body:{bHold:p}}}=u;ni.set(Ur.WebclientIsOnHold,p?1:0,mi.SessionStorage),vt(bE,p)}),Un(l),$n(u=>{let[p,v]=u;const y=[wv(p.payload.body.bHold)];if(p.payload.body.bHold){const C=ii(v);if(C){y.push(hE({audio:C.audio,video:C.bVideoOn,muted:C.muted}));const w=ji.getInstance();if("computer"===C.audio&&(w.leaveComputerAudio(),qu.joinOrLeaveVoip(!1)),C.bVideoOn&&w.stopCaptureVideo(),C.sharerOn&&(qu.stopSharing(C.userId),w.stopDesktopSharing(),y.push(Ku(K.ShareStatus.End))),v.video&&v.video.subscribedVideoList.length>0&&v.video.subscribedVideoList.forEach(D=>{qu.unsubscribeVideo(D)}),v.share&&v.share.isReceiveSharing){const D=v.share.activeNodeId;v.share.isRemoteControlApproved&&(qu.sharingRequestRemoteControl(D,!1),w.stopRemoteControl()),qu.unsubscribeSharing(D),w.stopRenderSharing()}}}return Mn(y)})),setMeetingDataCenterRegionEpic:i=>ar(i,7954).pipe(_t(l=>KL(l.payload.body))),claimHostResponseEpic:i=>ar(i,4216).pipe(sr(l=>{vt("MEETING_CLAIM_HOST_KEY_RESPONSE",l.payload.body.bresult)}),Qr(qt)),leaveMeetingEpic:(i,l)=>i.pipe(fi(`${dE}`,`${Yf}`),Un(l),$n(u=>{let[p,v]=u;return p.type===`${dE}`?(qu.leaveMeeting(),vt(om,{})):p.type===`${Yf}`&&(qu.endMeeting(),vt(om,{})),Mn(Om(v,!1))})),versionUpgradeEpic:i=>ar(i,2).pipe(sr(()=>{console.warn("Upgrade to latest version to optimize meeting experience")}),Qr(qt)),versionBlockEpic:i=>ar(i,1).pipe(sr(l=>{const{payload:{body:{upgradeVersion:u}}}=l,p=ah(1e4);if(p&&p.reason){const v=p.reason.replace(/{(\d+)}/g,()=>u);p.reason=v}vt(Ks,p)}),Qr(qt)),handleSharePronounChangeEpic:i=>ar(i,4265).pipe(_t(l=>{const{payload:{body:u}}=l,{nShareType:p}=u;return vt(pT,{userSharePronounType:p}),Cc(p)})),handleMeetingTokenEpic:i=>ar(i,4128).pipe(sr(l=>{const{payload:{body:{meetingtoken:u}}}=l,{WebclientMeetingToken:p}=Ur;u&&ni.set(p,u,mi.SessionStorage)}),Qr(qt))});let af,Sd,h_,vh,p_,_b;(function(i){i[i.AttendeeToAllPanelist=1]="AttendeeToAllPanelist",i[i.PanelistToAttendee=3]="PanelistToAttendee"})(af||(af={})),function(i){i.Add="add",i.List="list",i.Remove="memberremove",i.rename="rename",i.update="UPDATE"}(Sd||(Sd={})),function(i){i.PutDownHands="putdownhands",i.LowerHand="lowerhand"}(h_||(h_={})),function(i){i.Open="open",i.Message="message",i.Error="error",i.Close="close"}(vh||(vh={}));let f_=(()=>{class i{constructor(){this.eventHandlers=void 0,this.websocket=void 0,this.seq=void 0,this.eventHandlers=new Map,this.websocket=null,this.seq=1}static getInstance(){return this.xmppInstance||(this.xmppInstance=new i),this.xmppInstance}on(u,p){let v=this.eventHandlers.get(u);v||(v=[]),v.push(p),this.eventHandlers.set(u,v)}off(u,p){const v=this.eventHandlers.get(u);if(v){const y=v.filter(C=>C!==p);this.eventHandlers.set(u,y)}}emit(u,p){const v=this.eventHandlers.get(u);v&&v instanceof Array&&v.slice(0).forEach(y=>{try{y(p)}catch(C){console.error(C)}})}sendMessageToRwg(u){this.seq+=1;const p=this.seq;return this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(Object.assign(u,{seq:p}))),p}connect(u){this.websocket=new WebSocket(u),this.websocket.binaryType="arraybuffer",this.addWebSocketEventListeners()}close(){var u;null===(u=this.websocket)||void 0===u||u.close()}addWebSocketEventListeners(){this.websocket&&(this.websocket.addEventListener("open",u=>{this.emit(vh.Open,u)}),this.websocket.addEventListener("message",u=>{const{data:p}=u;var v;if(p instanceof ArrayBuffer)0===new Uint8Array(p)[0]&&(null===(v=this.websocket)||void 0===v||v.send(p));else try{this.emit(vh.Message,JSON.parse(p))}catch{console.warn("Unsupported format",p)}}),this.websocket.addEventListener("close",u=>{this.emit(vh.Close,u)}),this.websocket.addEventListener("error",u=>{this.emit(vh.Error,u)}))}join(u){return{seq:this.sendMessageToRwg({evt:24576,body:{clientCap:u}})}}raiseHand(){return{seq:this.sendMessageToRwg({evt:24580,body:null})}}lowerHand(u){return{seq:this.sendMessageToRwg({evt:24578,jids:u||[]})}}sendWebinarMseeage(u,p,v){return{seq:this.sendMessageToRwg({evt:24582,body:{msg:u,jid:p?[p]:[],type:v,bcm:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}})}}sendAnswer(u,p,v){return{seq:this.sendMessageToRwg({evt:24584,body:{question_attendeejid:p.jid,question_attendeename:p.displayName,question_text:p.questionText,question_id:p.questionId,question_anonymous:p.isAnonymous,question_time:p.questionTime,text:u,isPrivate:v}})}}answerOnline(u,p){return{seq:this.sendMessageToRwg({evt:24586,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,isLiveStart:p}})}}dismissQuestion(u){return{seq:this.sendMessageToRwg({evt:24590,body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!1}})}}deleteQuestion(u){return{seq:this.sendMessageToRwg({evt:24614,body:{question_id:u,bDelete:!0}})}}deleteComment(u){return{seq:this.sendMessageToRwg({body:{comment_id:u,bDelete:!0},evt:24616})}}reopenQuestion(u){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bOpen:!0},evt:24590})}}askQuestion(u,p){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3?arguments[3]:void 0;const C=eT();return{seq:this.sendMessageToRwg({body:{id:C,text:u,isAnonymous:v,bAllowAttendeeViewAllQuestion:y,name:p},evt:24592}),questionId:C}}upOrDownVote(u,p){return{seq:this.sendMessageToRwg({body:{question_attendeejid:u.jid,question_attendeename:u.displayName,question_text:u.questionText,question_id:u.questionId,question_anonymous:u.isAnonymous,question_time:u.questionTime,bUpVote:p},evt:24598})}}rename(u,p){return{seq:this.sendMessageToRwg({body:{jid:u,displayName:p},evt:24600})}}setSkinTome(u){return{seq:this.sendMessageToRwg({body:{skinTone:u},evt:24618})}}}return i.xmppInstance=null,i})();var hp=Object.freeze({__proto__:null,startIdleTimerEpic:(i,l)=>i.pipe(fi(`${xg}`),Un(l),kn(u=>{let[,p]=u;return void 0!==p.meeting.zlkJwtToken}),io(()=>(p_&&p_.complete(),p_=new je,_b=Ig(6e4).pipe(_t(()=>performance.now())).subscribe(p_),p_.pipe(_t(u=>x2(u)))))),terminateIdleTimerEpic:i=>i.pipe(fi(`${oh}`)).pipe(sr(()=>{p_&&(p_.complete(),_b.unsubscribe())}),Qr(qt)),idleCheckingEpic:(i,l)=>i.pipe(fi(`${x2}`),Un(l),$n(u=>{var p;let[v,y]=u;const{meeting:{idleStartTime:C,sessionIdleTimeoutMins:w,isOriginHost:D},participants:{attendeesList:P,xmppAttendeeList:L},recording:W,breakoutRoom:re}=y,ee=v.payload,te=[];if(1===P.length&&0===L.length&&(null==re||null===(p=re.currentRoom)||void 0===p?void 0:p.status)!==ur.InRoom&&W?.cmrStatus!==cs.Start)if(C){const oe=D&&LT(P[0].userRole)?w:40;ee-C>60*oe*1e3&&(console.warn(`No active for ${oe} minutes, will end the session.`),te.push(Yf()),yc(500).subscribe(()=>{KE()}))}else te.push(Tv(ee));else te.push(Tv(void 0));return Mn(te)})),resetIdleStartTimeEpic:(i,l)=>i.pipe(fi(`${cd}`),kn(u=>[Mo,tc].includes(u.payload.evt)&&void 0!==l.value.meeting.idleStartTime),Gt(nd),$n(()=>{var u;const{participants:{attendeesList:p,xmppAttendeeList:v},recording:y,breakoutRoom:C}=l.value,w=[];return(p.length>1||v.length>0||y?.cmrStatus===cs.Start||(null==C||null===(u=C.currentRoom)||void 0===u?void 0:u.status)===ur.InRoom)&&w.push(Tv(void 0)),Mn(w)})),resetIdleStartTimeAfterLeaveMeetingEpic:i=>i.pipe(fi(`${dE}`,`${Yf}`),Go(Tv(void 0)))});const vb=Wo.createAgent();var Hc=Object.freeze({__proto__:null,startReportFailoverReasonEpic:(i,l)=>i.pipe(fi(`${Cv}`),io(()=>{const u=0===l.value.meeting.failover.joinMeetingSuccessTimestamp&&!!ni.get(Ur.WebclientZoomId);return i.pipe(fi(`${xg}`),Ns(1),$n(()=>{const p=[],v=ni.get(Ur.WebclientFailoverCount)||0;let{meeting:{failover:{count:y,reason:C,interval:w}}}=l.value;const{meeting:{pingRWCTimestamp:D}}=l.value;u&&(y=v+1,C=xa.RefreshPage,w=0,ni.set(Ur.WebclientFailoverCount,y,mi.SessionStorage),p.push(Jf({count:y,reason:C,interval:w})));const P=performance.now();let L=`WCL_M, JMCT(${P-D})`;return y>0&&C!==xa.NormalCase&&(L=`${L},FAILOVER(${y},${C},${(w/1e3).toFixed(1)})`),vb.sendRWGConnectionPerformance(L),p.push(oT(),Za(P)),Mn(p)}))})),recordFailoverReasonEpic:(i,l)=>i.pipe(fi(`${Ca}`),$n(u=>{const{payload:p}=u,{meeting:{failover:{joinMeetingSuccessTimestamp:v,isCurrentFailoverRecorded:y}}}=l.value,C=[];if(!y){let w=ni.get(Ur.WebclientFailoverCount)||0;p!==xa.NormalCase&&(w+=1,ni.set(Ur.WebclientFailoverCount,w,mi.SessionStorage));const D=performance.now()-v;C.push(Jf({reason:p,count:w,interval:D}))}return Mn(C)}))});let aa=null;var rI=Object.freeze({__proto__:null,startStayAwakeEpic:(i,l)=>i.pipe(fi(`${xg}`),Un(l),kn(u=>{let[,p]=u;return!!p.meeting.stayAwake}),sr(F(function*(){try{aa&&aa.release().then(()=>{aa=null}),"wakeLock"in navigator&&(aa=yield navigator.wakeLock.request("screen"),aa.addEventListener("release",()=>{}))}catch{}})),io(()=>qa(document,"visibilitychange").pipe($n(F(function*(){"visible"===document.visibilityState?(aa&&aa.release().then(()=>{aa=null}),"wakeLock"in navigator&&(aa=yield navigator.wakeLock.request("screen"))):aa&&aa.release().then(()=>{aa=null})})),Qr(qt)))),cancelStayAwakeEpic:i=>i.pipe(fi(`${oh}`)).pipe(sr(()=>{aa&&aa.release().then(()=>{aa=null})}),Qr(qt))}),Cd=typeof window<"u"&&window,so=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,Nm=typeof global<"u"&&global,Ua=Cd||Nm||so;function Mm(i,l){return void 0===l&&(l=null),new xm({method:"GET",url:i,headers:l})}function m_(i,l,u){return new xm({method:"POST",url:i,body:l,headers:u})}function _A(i,l){return new xm({method:"DELETE",url:i,headers:l})}function vA(i,l,u){return new xm({method:"PUT",url:i,body:l,headers:u})}function AA(i,l,u){return new xm({method:"PATCH",url:i,body:l,headers:u})}!function(){if(!Ua)throw new Error("RxJS could not find any global context (window, self, global)")}();var yA=_t(function(i,l){return i.response});function EA(i,l){return yA(new xm({method:"GET",url:i,responseType:"json",headers:l}))}var xm=function(i){function l(p){var v=i.call(this)||this,y={async:!0,createXHR:function(){return this.crossDomain?function(){if(Ua.XMLHttpRequest)return new Ua.XMLHttpRequest;if(Ua.XDomainRequest)return new Ua.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(Ua.XMLHttpRequest)return new Ua.XMLHttpRequest;var w=void 0;try{for(var D=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],P=0;P<3;P++)try{if(new Ua.ActiveXObject(w=D[P]))break}catch{}return new Ua.ActiveXObject(w)}catch{throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof p)y.url=p;else for(var C in p)p.hasOwnProperty(C)&&(y[C]=p[C]);return v.request=y,v}var u;return he(l,i),l.prototype._subscribe=function(p){return new xP(p,this.request)},l.create=((u=function(p){return new l(p)}).get=Mm,u.post=m_,u.delete=_A,u.put=vA,u.patch=AA,u.getJSON=EA,u),l}(Be),xP=function(i){function l(u,p){var v=i.call(this,u)||this;v.request=p,v.done=!1;var y=p.headers=p.headers||{};return p.crossDomain||v.getHeader(y,"X-Requested-With")||(y["X-Requested-With"]="XMLHttpRequest"),v.getHeader(y,"Content-Type")||Ua.FormData&&p.body instanceof Ua.FormData||void 0===p.body||(y["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),p.body=v.serializeBody(p.body,v.getHeader(p.headers,"Content-Type")),v.send(),v}return he(l,i),l.prototype.next=function(u){this.done=!0;var p,v=this,y=v.xhr,C=v.request,w=v.destination;try{p=new Ab(u,y,C)}catch(D){return w.error(D)}w.next(p)},l.prototype.send=function(){var u=this.request,p=this.request,v=p.user,y=p.method,C=p.url,w=p.async,D=p.password,P=p.headers,L=p.body;try{var W=this.xhr=u.createXHR();this.setupEvents(W,u),v?W.open(y,C,w,v,D):W.open(y,C,w),w&&(W.timeout=u.timeout,W.responseType=u.responseType),"withCredentials"in W&&(W.withCredentials=!!u.withCredentials),this.setHeaders(W,P),L?W.send(L):W.send()}catch(re){this.error(re)}},l.prototype.serializeBody=function(u,p){if(!u||"string"==typeof u||Ua.FormData&&u instanceof Ua.FormData)return u;if(p){var v=p.indexOf(";");-1!==v&&(p=p.substring(0,v))}switch(p){case"application/x-www-form-urlencoded":return Object.keys(u).map(function(y){return encodeURIComponent(y)+"="+encodeURIComponent(u[y])}).join("&");case"application/json":return JSON.stringify(u);default:return u}},l.prototype.setHeaders=function(u,p){for(var v in p)p.hasOwnProperty(v)&&u.setRequestHeader(v,p[v])},l.prototype.getHeader=function(u,p){for(var v in u)if(v.toLowerCase()===p.toLowerCase())return u[v]},l.prototype.setupEvents=function(u,p){var v,y,C=p.progressSubscriber;function w(L){var W,ee=w.subscriber,te=w.progressSubscriber,oe=w.request;te&&te.error(L);try{W=new LP(this,oe)}catch(Ee){W=Ee}ee.error(W)}function D(L){}function P(L){var re=P.subscriber,ee=P.progressSubscriber,te=P.request;if(4===this.readyState){var oe=1223===this.status?204:this.status;if(0===oe&&(oe=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),oe<400)ee&&ee.complete(),re.next(L),re.complete();else{ee&&ee.error(L);var Te=void 0;try{Te=new iI("ajax error "+oe,this,te)}catch(De){Te=De}re.error(Te)}}}u.ontimeout=w,w.request=p,w.subscriber=this,w.progressSubscriber=C,u.upload&&"withCredentials"in u&&(C&&(v=function(L){v.progressSubscriber.next(L)},Ua.XDomainRequest?u.onprogress=v:u.upload.onprogress=v,v.progressSubscriber=C),u.onerror=y=function(L){var W,ee=y.progressSubscriber,te=y.subscriber,oe=y.request;ee&&ee.error(L);try{W=new iI("ajax error",this,oe)}catch(Ee){W=Ee}te.error(W)},y.request=p,y.subscriber=this,y.progressSubscriber=C),u.onreadystatechange=D,D.subscriber=this,D.progressSubscriber=C,D.request=p,u.onload=P,P.subscriber=this,P.progressSubscriber=C,P.request=p},l.prototype.unsubscribe=function(){var p=this.xhr;!this.done&&p&&4!==p.readyState&&"function"==typeof p.abort&&p.abort(),i.prototype.unsubscribe.call(this)},l}(we),Ab=function(i,l,u){this.originalEvent=i,this.xhr=l,this.request=u,this.status=l.status,this.responseType=l.responseType||u.responseType,this.response=jR(this.responseType,l)},iI=function(){function i(l,u,p){return Error.call(this),this.message=l,this.name="AjaxError",this.xhr=u,this.request=p,this.status=u.status,this.responseType=u.responseType||p.responseType,this.response=jR(this.responseType,u),this}return i.prototype=Object.create(Error.prototype),i}();function jR(i,l){switch(i){case"json":return"response"in(u=l)?u.responseType?u.response:JSON.parse(u.response||u.responseText||"null"):JSON.parse(u.responseText||"null");case"xml":return l.responseXML;default:return"response"in l?l.response:l.responseText}var u}var LP=function(i,l){return iI.call(this,"ajax timeout",i,l),this.name="AjaxTimeoutError",this},oI=xm.create;const QR=i=>{const{meeting:{encryptedRWC:l,encryptedGEORWC:u,discardedRwcList:p,meetingOptions:v}}=i;let y=[];return v?.isEnableGeoFenceRWC&&u&&u?.length>0?y=u.filter(C=>!p.includes(C.rwc)).reduce((C,w)=>{const{dl:D,rwc:P,rwcToken:L}=w,W=C.find(re=>re.dl===D);if(W)W.items.push({rwc:P,rwcToken:L});else{const re={dl:D,items:[]};re.items.push({rwc:P,rwcToken:L}),C.push(re)}return C},[]):l&&(y=[{dl:0,items:Object.keys(l).map(C=>({rwc:C,rwcToken:l[C]}))}]),y},sI=i=>Ss(...i.map(l=>0===l.dl?Mn(l.items):yc(l.dl).pipe($n(()=>Mn(l.items))))),BP=(i,l)=>i.pipe(fi(`${Sc}`),Un(l),kn(u=>{let[,p]=u;return void 0!==p.meeting.encryptedRWC||void 0!==p.meeting.encryptedGEORWC&&p.meeting.encryptedGEORWC.length>0}),io(u=>{let[,p]=u;const{meeting:{ts:v,auth:y,meetingNumber:C,meetingOptions:w},breakoutRoom:D}=p,P=w?.isEnableGeoFenceRWC,L=QR(p);if(L.length>0){const W={serversLength:L.reduce((ee,te)=>ee+te.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0,retryCounts:0};let re;return P&&(re=new ut,sI(L).subscribe(ee=>{var te;return null===(te=re)||void 0===te?void 0:te.next(ee)})),(P?re:sI(L)).pipe(th(()=>{const{meeting:{meetingStatus:ee}}=l.value,te=ee===Bi.Initial&&W.pingFailedServerList.length<W.serversLength&&W.serversLength>0;return!te&&re&&re.complete(),te}),sr(()=>{if(W.pingRwcServerCounts=W.pingRwcServerCounts+1,P&&W.pingRwcServerCounts===W.serversLength){const ee=1e3*Math.floor(5*Math.pow(2,W.retryCounts));W.retryCounts=W.retryCounts+1,yc(ee).pipe(_t(()=>{const te=QR(l.value);return Object.assign(W,{serversLength:te.reduce((oe,Ee)=>oe+Ee.items.length,0),pingFailedServerList:[],pingRwcServerCounts:0}),te})).subscribe(te=>{sI(te).subscribe(oe=>{re.next(oe)})})}}),$n(ee=>{const{rwc:te,rwcToken:oe}=ee,Ee=((Te,De,Le,et,lt,pt)=>{const ht={ts:et,auth:lt,rwcToken:Le,dmz:1};return pt&&Object.assign(ht,{confID:pt}),`https://${Te}/wc/ping/${De}?${new URLSearchParams(ht).toString()}`})(te,C,oe,v,y,D?.currentRoom.boConfId);return oI(Ee).pipe($n(Te=>{let De={};return De=Te.response?cn(cn({},Te.response),{},{rwc:te,fromNginx:!1}):{rwc:te,rwg:te,rwcToken:oe,fromNginx:!0},Mn([J1(De),ss()])}),xc(()=>{const{pingFailedServerList:Te,serversLength:De}=W;return Te.push(Ee),Te.length===De&&(P&&re&&re.complete(),vt(Ks,{reason:"connection error",errorCode:CS})),qt}))}),Yh(B2(performance.now())))}return qt}));let HR=0;const hr={meetingStatus:Bi.Initial,isWindowOpen:!1,apiKey:"",signature:"",signatureType:"",lang:"en-US",tk:"",customerKey:"",mtkGuid:"",pingRWCTimestamp:0,passWord:"",meetingNumber:0,userName:"",userEmail:"",sdkUrl:"",sdkOrigin:"",proxy:1,cv:"",meetingId:"",tid:"",ts:"",auth:"",sign:"",isSupportCallOut:!1,tollNumbers:void 0,recordingEnable:!1,callOutCountry:void 0,inviteEmail:"",xmppConfig:null,isSupportH323:!1,h323GatewayInfo:"",h323Password:"",trackAuth:"",isOriginHost:!1,isWebinar:!1,encryptedRWC:void 0,meetingOptions:{},meetingTopic:"",bLock:!1,bHoldUponEntry:!1,viewOnly:0,listenOnlyPhone:0,bAllowRaiseHand:!1,bAllowAttendeeRename:!1,bBroadcast:void 0,bAllowPlayChimeForEnterOrExit:!1,bIbDisableShare:!1,bIbDisableChat:!1,bAllowShowCount:!1,encryptKey:"",bNoHostTimeOut:!1,confId:"",conId:"",e2eEncrypt:!1,zoomId:"",jid:"",xtoken:"",groups:void 0,svcUrl:"",encType:NaN,userGUID:"",userId:NaN,isHost:!1,isCoHost:!1,participantID:0,isOnHold:!1,isMeetingReset:!1,bRecord:!1,audioVideoBeforeOnHold:void 0,region:void 0,network:void 0,joinMeetingTimeStamp:0,enableAudioQos:!0,enableVideoQos:!0,activeAppInfo:void 0,recordingDisclaimerForRecorder:{},recordingDisclaimer:{},ccUrl:"",sessionIdleTimeoutMins:40,reportDomain:"",isAudioBridgeEnabled:!0,discardedRwcList:[],sharePronounType:void 0,stayAwake:!1,wrInfo:{},gatewayUserList:[],logConfig:"",logEncryptionPubKey:"",failover:{count:0,isCurrentFailoverRecorded:!1,reason:-1,interval:0,joinMeetingSuccessTimestamp:0}},aI=Fr({[`${Cv}`]:It((i,l)=>{let{payload:u}=l;u.customerKey=i.customerKey||u.customerKey||"",Object.assign(i,u),i.meetingStatus=Bi.Initial}),[`${Xa}`]:It((i,l)=>{let{payload:u}=l;i.isWindowOpen=u}),[`${L2}`]:It((i,l)=>{let{payload:u}=l;i.signatureType=u.useSDK?"sdk":"api",i.apiKey=u.apiKey,i.signature=u.signature,i.lang=u.language}),[`${H4}`]:It((i,l)=>{let{payload:u}=l;i.ztk=u}),[`${RS}`]:It((i,l)=>{let{payload:u}=l;i.zsk=u}),[`${Bc}`]:It((i,l)=>{let{payload:u}=l;i.tk=u.tk,i.mtkGuid=u.mtkGuid}),[`${B2}`]:It((i,l)=>{let{payload:u}=l;i.pingRWCTimestamp=u}),[`${xg}`]:It((i,l)=>{let{payload:u}=l;i.confId=u.confID,i.conId=u.conID,i.e2eEncrypt=u.e2eEncrypt,i.meetingNumber=parseInt(u.mn,10),i.zoomId=u.zoomID,i.meetingStatus=Bi.Joined,i.jid=u.jid,i.xtoken=u.xtoken,i.groups=u.groups,i.svcUrl=u.svcUrl,i.encType=u.encType,i.userGUID=u.userGUID,i.userId=u.userID,i.role=u.role,i.participantID=u.participantID,i.reportDomain=u.reportDomain}),[`${qf}`]:It((i,l)=>{let{payload:u}=l;if(u.gatewayUser){var p;const{userId:y,sn:C}=u.gatewayUser,w=null===(p=i.gatewayUserList)||void 0===p?void 0:p.find(D=>D.userId===y);var v;w?w.sn=C:null===(v=i.gatewayUserList)||void 0===v||v.push(u.gatewayUser)}else Object.assign(i,u)}),[`${F2}`]:It((i,l)=>{let{payload:u}=l;i.isHost=u}),[`${Iv}`]:It((i,l)=>{let{payload:u}=l;i.isCoHost=u}),[`${wv}`]:It((i,l)=>{let{payload:u}=l;i.isOnHold=u}),[`${Vp}`]:It((i,l)=>{let{payload:u}=l;i.isMeetingReset=u}),[`${hE}`]:It((i,l)=>{let{payload:u}=l;i.audioVideoBeforeOnHold=u}),[`${OS}`]:It((i,l)=>{let{payload:u}=l;i.currentUserAudioBeforeReset=u}),[`${ui}`]:It((i,l)=>{let{payload:u}=l;i.isCurrentUserMutedBeforeReset=u}),[`${rT}`]:It((i,l)=>{let{payload:u}=l;i.meetingStatus=u}),[`${KL}`]:It((i,l)=>{let{payload:u}=l;i.region=u.region,i.network=u.network}),[`${zL}`]:It((i,l)=>{let{payload:u}=l;i.isCurrentUserStartVideoBeforeReset=u}),[`${U2}`]:It((i,l)=>{let{payload:u}=l;i.joinMeetingTimeStamp=u}),[`${iT}`]:It((i,l)=>{let{payload:u}=l;i.enableAudioQos=u.audioQos,i.enableVideoQos=u.videoQos}),[`${V2}`]:It((i,l)=>{let{payload:u}=l;i.activeAppInfo=u}),[`${Tv}`]:It((i,l)=>{let{payload:u}=l;i.idleStartTime=u}),[`${j2}`]:It((i,l)=>{let{payload:u}=l;i.sessionIdleTimeoutMins=u}),[`${An}`]:It((i,l)=>{let{payload:u}=l;i.isAudioBridgeEnabled=u}),[`${zi}`]:It((i,l)=>{var u,p;let{payload:v}=l;const y=null===(u=i.encryptedGEORWC)||void 0===u||null===(p=u.find(w=>w.rwc===v))||void 0===p?void 0:p.dc;if(y){var C;const w=null===(C=i.encryptedGEORWC)||void 0===C?void 0:C.filter(D=>D.dc===y);w&&i.discardedRwcList.some(D=>w?.findIndex(P=>P.rwc===D)>=0)&&i.discardedRwcList.push(...w.map(D=>D.rwc)),i.discardedRwcList.push(v)}}),[`${Cc}`]:It((i,l)=>{let{payload:u}=l;i.sharePronounType=u}),[`${Ic}`]:It((i,l)=>{let{payload:u}=l;i.stayAwake=u}),[`${Za}`]:It((i,l)=>{let{payload:u}=l;i.failover.joinMeetingSuccessTimestamp=u}),[`${oT}`]:It(i=>{Object.assign(i.failover,cn(cn({},hr.failover),{},{count:i.failover.count,joinMeetingSuccessTimestamp:i.failover.joinMeetingSuccessTimestamp}))}),[`${Jf}`]:It((i,l)=>{let{payload:u}=l;const{count:p,reason:v,interval:y}=u;i.failover.count=p,i.failover.reason=v,i.failover.interval=y,i.failover.isCurrentFailoverRecorded=!0}),[`${Ma}`]:It((i,l)=>{let{payload:u}=l;Object.assign(i,cn(cn({},hr),{},{isMeetingReset:!0,currentUserAudioBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.audio:u.audio,isCurrentUserMutedBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.muted:u.muted,isCurrentUserStartVideoBeforeReset:i.audioVideoBeforeOnHold?i.audioVideoBeforeOnHold.video:u.video,apiKey:i.apiKey,signatureType:i.signatureType,signature:i.signature,meetingNumber:i.meetingNumber,userName:i.userName,lang:i.lang,passWord:i.passWord,userEmail:i.userEmail,sdkUrl:i.sdkUrl,sdkOrigin:i.sdkOrigin,proxy:1,cv:i.cv,zsk:i.zsk,ztk:i.ztk,idleStartTime:i.idleStartTime,sessionIdleTimeoutMins:i.sessionIdleTimeoutMins,customerKey:i.customerKey,stayAwake:i.stayAwake,failover:i.failover}))})},hr),cf=Ms(nI,rI,Hc,hp,{meetingInfoEpic:(i,l)=>i.pipe(fi(`${nT}`),io(u=>{const p=Object.assign({},u.payload,{password:Sa(u.payload.password),topic:Sa(u.payload.topic)}),{videoSDKUrl:v}={meetingSDKUrl:`https://${zC}/api/v1/wc/info`,videoSDKUrl:`https://${zC}/wc/lsdk`};return function(y,C){let w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"zoomsdkjsonpcallback";return new Be(D=>{HR++;const P=`${w}${HR}`,L=document.createElement("script");Object.keys(C).forEach(W=>null==C[W]&&delete C[W]),L.src=`${y}?${new URLSearchParams(Object.assign(C,{callback:P})).toString()}`,L.async=!0,L.onerror=W=>D.error(W),document.getElementsByTagName("head")[0].appendChild(L),window[P]=W=>{L.parentNode&&L.parentNode.removeChild(L),delete window[P],D.next(W),D.complete()}})}(v,p).pipe(xc(y=>or({status:!1,result:y.toString(),errorCode:CS})),$n(y=>{const[C,w]=fl(or(y),D=>!0===D.status&&void 0!==D.result);return w.subscribe(D=>{D.state||(3e3===D.errorCode&&"Meeting password is incorrect"===D.errorMessage?vt(Ks,Z1(3004)):3e3===D.errorCode&&"The role type error"===D.errorMessage?vt(Ks,Z1(3010)):D.errorCode===CS?vt(Ks,{reason:"connection error"}):3e3===D.errorCode?vt(Ks,{reason:D.errorMessage,errorCode:200}):300===D.errorCode?vt(Ks,{reason:"This account does not exist or does not belong to you",errorCode:200}):124===D.errorCode&&"Parse lite sdk topic and pwd fail"===D.errorMessage?vt(Ks,{reason:"Parse topic and pwd fail",errorCode:200}):124===D.errorCode&&"The java web token is expired or more than 2 days or ineffective."===D.errorMessage?vt(Ks,{reason:"The token is expired or more than 2 days or ineffective.",errorCode:200}):124===D.errorCode&&vt(Ks,{reason:"Verify JWT failed",errorCode:200}))}),C.pipe(wR(D=>{if(!0===D.status){const{result:{mid:P,websdkClientFeatureOptions:L}}=D;ni.init(P);const W=((te,oe)=>{if(te.result){const{result:{mn:Ee,ts:Te,auth:De,track_auth:Le,mid:et,tid:lt,encryptedRWC:pt,encryptedGEORWC:ht,user_identity:gt,meetingOptions:Yt,can_recording:Xt,wcXMPPConfig:un,call_out_country_json:Tt,isOriginalHost:yn,support_call_out:Kn,liveTranscription:Pt,logConfig:mt,logEncryptionPubKey:Ve}}=te,{lang:tt,password:Rt,topic:st,zlk:Bt,cv:pe,userName:ye}=oe;return{meetingNumber:Ee,meetingId:et,tid:lt,ts:Te,auth:De,passWord:Rt,trackAuth:Le,customerKey:gt,encryptedRWC:JSON.parse(pt||"{}"),encryptedGEORWC:JSON.parse(ht||"{}"),meetingOptions:JSON.parse(Yt||"{}"),recordingEnable:"1"===Xt,topic:st,userName:ni.get(Ur.WebclientUserName)||ye,cv:pe,zlkJwtToken:Bt,xmppConfig:JSON.parse(un||"{}"),callOutCountry:JSON.parse(Tt||"{}"),lang:tt,isOriginHost:yn,isSupportCallOut:"1"===Kn,liveTranscription:JSON.parse(Pt||"{}"),logConfig:mt,logEncryptionPubKey:Ve}}return te})(D,u.payload),re=[or(Cv(W)),sE(BP,l,Sc())],ee=(te=>{const oe={[`${Lu.AudioBridgeEnable}`]:{mask:240,action:An}},Ee=[];if(te){const Te=te.split("").reverse();Object.keys(Lu).filter(De=>/\d(,\d)?/.test(Lu[De])).forEach(De=>{const Le=Lu[De],et=Le.split(",").map(ht=>Te[Number(ht)-1]).reverse().join(""),lt=parseInt(et,16),pt=oe[Le];pt&&Ee.push(or(pt.action((lt&pt.mask)>0)))})}return Ee})(L);return ee.length>0&&re.unshift(...ee),Yy(...re)}}))}))})),pingRWCEpic:BP});var Bn;Bn=function(){function i(){for(var u=0,p={};u<arguments.length;u++){var v=arguments[u];for(var y in v)p[y]=v[y]}return p}function l(u){return u.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function u(p){function v(){}function y(w,D,P){if(typeof document<"u"){"number"==typeof(P=i({path:"/"},v.defaults,P)).expires&&(P.expires=new Date(1*new Date+864e5*P.expires)),P.expires=P.expires?P.expires.toUTCString():"";try{var L=JSON.stringify(D);/^[\{\[]/.test(L)&&(D=L)}catch{}D=p.write?p.write(D,w):encodeURIComponent(String(D)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),w=encodeURIComponent(String(w)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var W="";for(var re in P)P[re]&&(W+="; "+re,!0!==P[re]&&(W+="="+P[re].split(";")[0]));return document.cookie=w+"="+D+W}}function C(w,D){if(typeof document<"u"){for(var P={},L=document.cookie?document.cookie.split("; "):[],W=0;W<L.length;W++){var re=L[W].split("="),ee=re.slice(1).join("=");D||'"'!==ee.charAt(0)||(ee=ee.slice(1,-1));try{var te=l(re[0]);if(ee=(p.read||p)(ee,te)||l(ee),D)try{ee=JSON.parse(ee)}catch{}if(P[te]=ee,w===te)break}catch{}}return w?P[w]:P}}return v.set=y,v.get=function(w){return C(w,!1)},v.getJSON=function(w){return C(w,!0)},v.remove=function(w,D){y(w,"",i(D,{expires:-1}))},v.defaults={},v.withConverter=u,v}(function(){})};var yb,SB=Bn(),Rn=new Uint8Array(16);function Gn(){if(!yb&&!(yb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yb(Rn)}var go=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function CB(i){return"string"==typeof i&&go.test(i)}for(var ls=[],Ju=0;Ju<256;++Ju)ls.push((Ju+256).toString(16).substr(1));function bA(i,l,u){var p=(i=i||{}).random||(i.rng||Gn)();if(p[6]=15&p[6]|64,p[8]=63&p[8]|128,l){u=u||0;for(var v=0;v<16;++v)l[u+v]=p[v];return l}return function(y){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,w=(ls[y[C+0]]+ls[y[C+1]]+ls[y[C+2]]+ls[y[C+3]]+"-"+ls[y[C+4]]+ls[y[C+5]]+"-"+ls[y[C+6]]+ls[y[C+7]]+"-"+ls[y[C+8]]+ls[y[C+9]]+"-"+ls[y[C+10]]+ls[y[C+11]]+ls[y[C+12]]+ls[y[C+13]]+ls[y[C+14]]+ls[y[C+15]]).toLowerCase();if(!CB(w))throw TypeError("Stringified UUID is invalid");return w}(p)}let Tl;!function(i){i[i.Unknown=0]="Unknown",i[i.Windows=1]="Windows",i[i.Mac=2]="Mac",i[i.Pad=3]="Pad",i[i.Mobile=4]="Mobile",i[i.CallIn=5]="CallIn",i[i.Linux=6]="Linux",i[i.WebClient=7]="WebClient",i[i.ChromeOs=8]="ChromeOs"}(Tl||(Tl={}));const{WebclientIsOnHold:FP,WebclientOpt:UP,WebclientParticipantId:_o,WebclientZoomId:cI,WebclientWebinarToken:IB,WebclientMeetingToken:VP}=Ur,{WebclientDeviceId:GR}=Hp;function SA(i){let{retryCount:l,rwgServerList:u,userName:p,auth:v,trackAuth:y,meetingId:C,customerKey:w,tid:D,lang:P,ts:L,bid:W,botk:re,confID:ee,isAudioBridgeEnabled:te,isMeetingReset:oe,cameraDevicesList:Ee}=i;const Te=SB.get("_zm_mtk_guid");let De=ni.get(GR);if(De||(De=bA(),ni.set(GR,De,mi.LocalStorage)),u.length>l){const Le=fE(),et=u[l],lt={dn2:Sa(p),auth:v,browser:Le,trackAuth:y,mid:C,tid:D,lang:P,ts:L,"ZM-CID":De,_ZM_MTG_TRACK_ID:Te||"",customer_key:Sa(w),cfs:0};et.rwcAuth?Object.assign(lt,{rwcAuth:et.rwcAuth}):et.rwcToken&&Object.assign(lt,{rwcToken:et.rwcToken});const pt=PS()?1:sT()||$h()?2:0;return Object.assign(lt,{as_type:pt}),[{key:UP,queryKey:"opt"},{key:_o,queryKey:"participantID"},{key:cI,queryKey:"zoomid"}].forEach(gt=>{const Yt=ni.get(gt.key);void 0!==Yt&&(lt[gt.queryKey]=Yt)}),W&&re&&ee&&Object.assign(lt,{bid:Sa(W),botk:re,confID:ee}),ni.get(VP)&&Object.assign(lt,{isdj:1}),Bu()&&(Object.assign(lt,{from:Qp()?"android":"ios"}),te&&Object.assign(lt,{useABAudio:1})),Object.assign(lt,{clientCaps:ai()}),Object.assign(lt,{isCamera:oe?Ee.length>0?1:0:1}),{queryObject:cn({},lt),rwgServer:et}}return null}function ai(){let i=qv.WebCameraIndication|qv.SendMeetingTokenSeparately;const l=ji.getPTZCapability();return(l.pan||l.tilt||l.zoom)&&(i|=qv.SupportFarEndCameraControl),i}const CA=Wo.createAgent();let ic;var Ko=Object.freeze({__proto__:null,connectZoomSocketEpic:(i,l)=>i.pipe(fi(`${ss}`),Un(l),kn(u=>{let[,p]=u;return p.socket.zoomSocketStatus===Co.Closed}),io(u=>{let[,p]=u;const{socket:{retryCount:v,rwgServerList:y},meeting:C,breakoutRoom:w,video:{cameraDevicesList:D}}=p;let P,L=cn(cn({},C),{},{retryCount:v,rwgServerList:y,cameraDevicesList:D});if(w&&w.currentRoom.status===ur.Joining){const{currentRoom:{boId:re,boConfId:ee,boToken:te}}=w;L=cn(cn({},L),{},{bid:re,botk:te,confID:ee})}if(P=C.zlkJwtToken?function(re){const ee=SA(re);if(ee){const{queryObject:te,rwgServer:oe}=ee,{topic:Ee,cv:Te,zlkJwtToken:De,meetingNumber:Le,passWord:et}=re;return Object.assign(te,{topic:Sa(Ee),iccv:Te,zlkJwtToken:De}),""!==et&&Object.assign(te,{mpwd:Sa(et)}),`wss://${oe.rwg}/instantsdk/${Le}?${new URLSearchParams(te).toString()}`}return null}(L):function(re){const ee=SA(re);if(ee){const{queryObject:te,rwgServer:oe}=ee,{signatureType:Ee,userEmail:Te,ztk:De,tk:Le,cv:et,zsk:lt,sign:pt,meetingNumber:ht,isHost:gt,isOriginHost:Yt,passWord:Xt}=re;return Object.assign(te,{signType:Ee,email:Te,zak:De||"",tk:Le||"",jscv:et}),gt&&Yt||""===Xt||Object.assign(te,{mpwd:Xt}),sessionStorage.getItem(Ur.WebclientZsk)||lt?Object.assign(te,{zak:lt}):Object.assign(te,{sign:pt}),[{key:FP,queryKey:"cfs"},{key:IB,queryKey:"tk"}].forEach(un=>{const Tt=ni.get(un.key);void 0!==Tt&&(te[un.queryKey]=Tt)}),`wss://${oe.rwg}/wc/api/${ht}?${new URLSearchParams(te).toString()}`}return null}(L),P){const re=(CA.connect(P),ic=new je,Np(ee=>CA.on(su.Message,ee),ee=>CA.off(su.Message,ee),ee=>ee.data).subscribe(ic),ic);return Ss(re.pipe(kn(ee=>"string"==typeof ee),_t(ee=>JSON.parse(ee)),fu(),bd(ee=>{if(0!==ee.evt||!ee.body||"invalid parameters!"!==ee.body.test)return cd(ee);vt(Ks,Z1(k2.INVALID_PARAMETER))}),Yh(Lp(Co.Connecting))),re.pipe(kn(ee=>ee instanceof ArrayBuffer),_t(ee=>na(ee))))}return qt})),connectedZoomSocketEpic:(i,l)=>i.pipe(fi(`${ss}`),Un(l),kn(u=>{let[,p]=u;return p.socket.zoomSocketStatus===Co.Closed}),io(()=>{const[u,p,v]=[su.Open,su.Close,su.Error].map(y=>Np(C=>CA.on(y,C),C=>CA.on(y,C)));return Ss(u.pipe($n(()=>Ss(or(Lp(Co.Connected)),yc(6e4).pipe(Un(l),kn(y=>{let[,C]=y;return C.meeting.meetingStatus===Bi.Initial&&!C.meeting.isMeetingReset}),_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.NoHeartbeat))))))),p.pipe(Un(l),kn(y=>{let[,C]=y;return C.socket.zoomSocketStatus!==Co.Closed&&C.meeting.meetingStatus===Bi.Joined&&!C.meeting.isMeetingReset}),_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.Disconnect)))),v.pipe(Un(l),$n(y=>{let[,C]=y;const{meeting:{meetingStatus:w,isMeetingReset:D},socket:{rwgServerList:P,retryCount:L}}=C,W=[];if(w===Bi.Initial&&null!=P&&P.length){const re=P[L];return yc(5e3).pipe(kn(()=>l.value.meeting.meetingStatus===Bi.Initial),$n(()=>{const{socket:{rwgServerList:ee,retryCount:te}}=l.value,oe=[];return ee.length>te+1?oe.push(Kf(te+1),oh({retry:!0})):(vt(Ks,{reason:"connection error",errorCode:CS}),oe.push(...Om(l.value))),Mn(oe)}),Yh(zi(re?.rwc)))}return D||w!==Bi.Joined||(vt(Fc,{reason:Ws.Failover}),W.push(Ca(xa.OnError))),Mn(W)})))})),disconnectZoomSocketEpic:(i,l)=>i.pipe(fi(`${oh}`),io(u=>u.payload&&u.payload.retry?or(ss()).pipe(fo(1e3),Yh(Lp(Co.Closed))):or(Lp(Co.Closed))),fo(100),sr(()=>{var u;l.value.socket.zoomSocketStatus===Co.Closed&&(CA.close(),null===(u=ic)||void 0===u||u.complete())}))});const Lm=f_.getInstance();let IA;var jP=Object.freeze({__proto__:null,connectXmppSocketEpic:(i,l)=>i.pipe(fi(`${Mu}`),Un(l),kn(u=>{let[,p]=u;return"closed"===p.socket.xmppSocketStatus}),io(u=>{let[,p]=u;const{meeting:{svcUrl:v,meetingNumber:y,conId:C}}=p;return(D=`wss://${v}/wc/media/${y}?type=x&cid=${C}`,Lm.connect(D),IA=new je,Np(P=>Lm.on(vh.Message,P),P=>Lm.off(vh.Message,P)).subscribe(IA),IA).pipe(kn(D=>void 0!==D?.evt),_t(D=>iE(D)),Yh(Na(Co.Connecting)));var D})),connectedXmppSocketEpic:(i,l)=>i.pipe(fi(`${Mu}`),io(()=>{const[u,p,v]=[vh.Open,vh.Close,vh.Error].map(y=>Np(C=>Lm.on(y,C),C=>Lm.on(y,C)));return Ss(u.pipe(sr(()=>{const y=$h()&&Lg()?11:10;Lm.join(y)}),Go(Na(Co.Connected))),p.pipe(fo(1e3),Un(l),kn(y=>{let[,C]=y;return"closed"!==C.socket.xmppSocketStatus&&C.meeting.meetingStatus===Bi.Joined&&!C.meeting.isMeetingReset}),_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.DisconnectXmpp)))),v.pipe(fo(1e3),Un(l),kn(y=>{let[,C]=y;return"closed"!==C.socket.xmppSocketStatus&&C.meeting.meetingStatus===Bi.Joined&&!C.meeting.isMeetingReset}),_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.OnError)))))})),disconnectCmdChannelSocketEpic:i=>i.pipe(fi(`${Pa}`),Go(Na(Co.Closed)),fo(100),sr(()=>{var l;Lm.close(),null===(l=IA)||void 0===l||l.complete()}))});const g_=LS.getInstance();let bb;var Sb=Object.freeze({__proto__:null,connectMainSessionSocketEpic:(i,l)=>i.pipe(fi(`${kg}`),Un(l),kn(u=>{let[,p]=u;return"closed"===p.socket.mainSessionSocketStatus}),io(u=>{let[,p]=u;const{meeting:{svcUrl:v,meetingNumber:y,conId:C}}=p;return(D=`wss://${v}/wc/media/${y}?type=m&cid=${C}&mode=2`,g_.connect(D),bb=new je,Np(P=>g_.on(su.Message,P),P=>g_.off(su.Message,P)).pipe(_t(P=>P.data)).subscribe(bb),bb).pipe(_t(D=>JSON.parse(D)),kn(D=>0!==D.evt),fu(),_t(D=>gl(D)),Yh(zf(Co.Connecting)));var D})),connectedMainSessionSocketEpic:(i,l)=>i.pipe(fi(`${kg}`),io(()=>{const[u,p,v]=[su.Open,su.Close,su.Error].map(y=>Np(C=>g_.on(y,C),C=>g_.on(y,C)));return Ss(u.pipe(Go(zf(Co.Connected))),p.pipe(Un(l),kn(y=>{let[,C]=y;return"closed"!==C.socket.zoomSocketStatus&&C.meeting.meetingStatus===Bi.Joined}),_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.DisconnectMChannel)))),v.pipe(_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.OnErrorMChannel)))))})),disconnectMainSessionSocketEpic:i=>i.pipe(fi(`${Ei}`),Go(zf(Co.Closed)),sr(()=>{var l;g_.close(),null===(l=bb)||void 0===l||l.complete()}))});const uI={zoomSocketStatus:Co.Closed,xmppSocketStatus:Co.Closed,mainSessionSocketStatus:Co.Closed,retryCount:0,rwgServerList:[]},QP=Fr({[`${Lp}`]:It((i,l)=>{let{payload:u}=l;i.zoomSocketStatus=u}),[`${J1}`]:It((i,l)=>{let{payload:u}=l;const{rwgServerList:p}=i;p.find(v=>v.rwg===u.rwg)||p.push(u)}),[`${Kf}`]:It((i,l)=>{let{payload:u}=l;i.retryCount=u}),[`${Na}`]:It((i,l)=>{let{payload:u}=l;i.xmppSocketStatus=u}),[`${zf}`]:It((i,l)=>{let{payload:u}=l;i.mainSessionSocketStatus=u}),[`${Pg}`]:()=>uI},uI),HP=Ms(Ko,jP,Sb),WR={id:"userId",type:i=>_m(i)?{userType:i,avatarBackgroundType:Math.floor(8*Math.random())+1}:{userType:i},role:i=>({userRole:i,isHost:LT(i)}),dn2:i=>({displayName:Up(i)}),bShareOn:"sharerOn",bSharePause:"sharerPause",bLocalRecordStatus:i=>({bLocalRecord:1===i}),bGuest:"isGuest",bCapsRequestLT:"isRequestLT"},wA=i=>{const l={};return["add","remove","update"].forEach(u=>{null!=i[u]&&(l[u]=i[u].reduce((p,v)=>{const y=Object.keys(v).reduce((w,D)=>{const P=WR[D];return"function"==typeof P?Object.assign(w,P(v[D])):"string"==typeof P?w[P]=v[D]:w[D]=v[D],w},{}),C=p.find(w=>w.userId===y.userId);return void 0!==C?Object.assign(C,y):p.push(y),p},[]))}),l},Bm={name:"displayName",node:i=>({userId:Number(i)}),role:i=>({userRole:Number(i)})},KR=i=>Object.keys(i).reduce((l,u)=>{const p=Bm[u];return"function"==typeof p?Object.assign(l,p(i[u])):"string"==typeof p?l[p]=i[u]:l[u]=i[u],l},{});var GP=Object.freeze({__proto__:null,updateAttendeesEpic:(i,l)=>ar(i,Mo).pipe(_t(u=>wA(u.payload.body)),Un(l),$n(u=>{let[p,v]=u,y=[qg(p)];const{meeting:{userId:C,isWebinar:w,isOnHold:D},participants:{attendeesList:P,failoverAttendeesList:L,allowTalkAttendeesList:W}}=v,re=W.map(te=>te.userId);if(p.add){const te=p.add.find(Ee=>Ee.userId===C);void 0!==te&&(vt(rm,te),void 0!==te.bHold&&y.push(wv(te.bHold)));const oe=p.add.filter(Ee=>Ee.userId!==C);if(oe.length>0){const Ee=oe.filter(De=>!Bs(De.userRole)).map(De=>{const Le=L.find(et=>et.zoomID===De.zoomID);return Le?cn(cn({},De),{},{source:Le.isOnHold?"on hold":"failover"}):De}),Te=Ee.filter(De=>!!De.source).map(De=>({zoomID:De.zoomID}));if(y.push(uC(Te)),vt(dd,Ee),w){const De=oe.filter(Le=>Bs(Le.userRole));De.length>0&&vt(Fu,De.map(Le=>({userId:Le.userId,isAllowToTalk:!0})))}}}if(p.update){const te=p.update.find(Ee=>Ee.userId===C);void 0!==te&&(vt(uh,te),void 0!==te.bHold&&y.push(wv(te.bHold)));const oe=p.update.filter(Ee=>!(Ee.userId===C||re.includes(Ee.userId)));if(oe.length>0&&vt(hd,oe),w){const Ee=p.update.filter(Te=>Te.userId!==C&&re.includes(Te.userId));Ee.length>0&&vt(Fu,Ee)}}if(p.remove){const te=p.remove.map(oe=>{const Ee=P.find(Te=>Te.userId===oe.userId);if(Ee){if(2===oe.action&&1===oe.nUserStatus)return Ee.bHold?(y.push(zE({zoomID:Ee.zoomID,isOnHold:!0})),cn(cn({},oe),{},{reason:"on hold"})):(y.push(zE({zoomID:Ee.zoomID,isOnHold:!1})),cn(cn({},oe),{},{reason:"failover"}));const{audio:Te,avatar:De,bVideoOn:Le,displayName:et,isHost:lt,isCoHost:pt,muted:ht,sharerOn:gt,sharerPause:Yt}=Ee;return cn({audio:Te??"",avatar:De??"",bVideoOn:null!=Le&&Le,displayName:et,isHost:lt,isManager:null!=pt&&pt,muted:ht,sharerOn:null!=gt&&gt,sharerPause:!1!==gt&&null!=Yt&&Yt},oe)}return null}).filter(oe=>!!oe);if(vt(pd,te),w){const oe=p.remove.filter(Ee=>re.includes(Ee.userId));oe.length>0&&vt(Fu,oe.map(Ee=>({userId:Ee.userId,isAllowToTalk:!1})))}}const ee=y.filter(te=>te.type===`${wv}`);if(ee.length>0){const te=ee[ee.length-1];y=y.filter(oe=>oe.type!==`${wv}`),te.payload!==D&&(y.push(te),vt(bE,!D))}return Mn(y)})),receiveUserListFromXMPPEpic:(i,l)=>sh(i,24595).pipe($n(u=>{const{payload:{body:{action:p,data:v}}}=u,{meeting:{jid:y},participants:{xmppAttendeeList:C}}=l.value,w=[];if(p===Sd.rename){v.forEach(P=>{w.push(lC(P))});const D=v.map(P=>KR(P));vt(Fu,D)}if(p===Sd.Remove){v.forEach(P=>{w.push(YE(P))});const D=v.map(P=>cn(cn({},KR(P)),{},{removed:!0}));vt(im,D)}if([Sd.Add,Sd.List,Sd.update].includes(p)){const D=v.map(P=>{const L=KR(P);return Object.keys(L).reduce((W,re)=>(""!==L[re]&&Object.assign(W,{[re]:L[re]}),W),{})});if(vt(Fu,D),w.push(dC(D)),p===Sd.update){const P=v.find(L=>L.jid===y);P&&void 0!==P.bRaiseHand&&C.find(W=>W.jid===y)?.bRaiseHand!==P.bRaiseHand&&vt("MEETING_WEBINAR_ATTENDEE_RAISE_HAND",{bRaiseHand:P.bRaiseHand})}}return Mn(w)})),handleAdmitAllSilentUsersEpic:i=>ar(i,7951).pipe(sr(l=>{!1===l.payload.body.bStarted&&vt("ADMIT_ALL_SILENT_USERS_END",l.payload.body.bStarted)}),_t(l=>mm(l.payload.body.bStarted))),handleKVUpdateIndicationEpic:i=>ar(i,7946).pipe(kn(l=>{var u;return["bRaiseHand","feedback"].includes(null===(u=l.payload.body)||void 0===u?void 0:u.key)&&0===l.payload.body.value}),_t(l=>(vt(hd,{}),"bRaiseHand"===l.payload.body.key?vd():Wv())))});const TA={attendeesList:[],assistantList:[],xmppAttendeeList:[],allowTalkAttendeesList:[],failoverAttendeesList:[],isAdmitAllSilentUsers:!1},lI=Fr({[`${qg}`]:It((i,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(p=>{const v=i.attendeesList.find(C=>C.userId===p.userId&&51!==p.userType);if(void 0!==v)Object.assign(v,p);else if(51!==p.userType){const C=i.allowTalkAttendeesList.find(w=>w.userId===p.userId);void 0!==C?Object.assign(C,p):Bs(p.userRole)?i.allowTalkAttendeesList.push(p):i.attendeesList.push(p)}const y=i.assistantList.find(C=>C.userId===p.userId&&51===p.userType);void 0!==y?Object.assign(y,p):51===p.userType&&i.assistantList.push(p)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(p=>{const v=i.attendeesList.find(C=>C.userId===p.userId&&51!==p.userType);if(void 0!==v)Object.assign(v,p);else if(51!==p.userType){const C=i.allowTalkAttendeesList.find(w=>w.userId===p.userId);void 0!==C&&Object.assign(C,p)}const y=i.assistantList.find(C=>C.userId===p.userId&&51!==p.userType);void 0!==y&&Object.assign(y,p)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(p=>{const v=i.attendeesList.findIndex(C=>C.userId===p.userId&&51!==p.userType);if(-1!==v)i.attendeesList.splice(v,1);else if(51!==p.userType){const C=i.allowTalkAttendeesList.findIndex(w=>w.userId===p.userId);-1!==C&&i.allowTalkAttendeesList.splice(C,1)}const y=i.assistantList.findIndex(C=>C.userId===p.userId);-1!==y&&i.assistantList.splice(y,1)})}),[`${dC}`]:It((i,l)=>{let{payload:u}=l;const{xmppAttendeeList:p}=i,v=p.map(y=>y.jid);u.forEach(y=>{const{jid:C}=y,w=v.indexOf(C);-1!==w?Object.assign(p[w],y):p.push(y)})}),[`${mm}`]:It((i,l)=>{let{payload:u}=l;i.isAdmitAllSilentUsers=u}),[`${vd}`]:It(i=>{i.attendeesList.forEach(l=>{l.bRaiseHand&&(l.bRaiseHand=!1)})}),[`${Wv}`]:It(i=>{i.attendeesList.forEach(l=>{l.feedback>0&&(l.feedback=0)})}),[`${zE}`]:It((i,l)=>{let{payload:u}=l;i.failoverAttendeesList.push(u)}),[`${uC}`]:It((i,l)=>{let{payload:u}=l;u.forEach(p=>{const v=i.failoverAttendeesList.findIndex(y=>y.zoomID===p.zoomID);-1!==v&&i.failoverAttendeesList.splice(v,1)})}),[`${lC}`]:It((i,l)=>{let{payload:u}=l;const{jid:p,name:v}=u,y=i.xmppAttendeeList.find(C=>C.jid===p);y&&(y.displayName=v)}),[`${YE}`]:It((i,l)=>{let{payload:u}=l;const{jid:p}=u,v=i.xmppAttendeeList.findIndex(y=>y.jid===p);-1!==p&&i.xmppAttendeeList.splice(v,1)}),[`${NT}`]:()=>TA},TA),dI=Ms(GP),Fm={audioEncodeStatus:"initial",audioDecodeStatus:"initial",videoEncodeStatus:"initial",videoDecodeStatus:"initial",sharingEncodeStatus:"initial",sharingDecodeStatus:"initial",assetsPath:"",mediaConstraints:void 0,fileWithVersion:!1,enforceMultipleVideos:!1},sV=Fr({[`${No}`]:It((i,l)=>{let{payload:u}=l;i.audioDecodeStatus=u}),[`${ES}`]:It((i,l)=>{let{payload:u}=l;i.audioEncodeStatus=u}),[`${Bp}`]:It((i,l)=>{let{payload:u}=l;i.sharingDecodeStatus=u}),[`${bS}`]:It((i,l)=>{let{payload:u}=l;i.sharingEncodeStatus=u}),[`${Ev}`]:It((i,l)=>{let{payload:u}=l;i.videoDecodeStatus=u}),[`${$1}`]:It((i,l)=>{let{payload:u}=l;i.videoEncodeStatus=u}),[`${oE}`]:It((i,l)=>{let{payload:u}=l;i.mediaConstraints=u.mediaConstraints,i.assetsPath=u.assetsPath,i.fileWithVersion=u.fileWithVersion,i.enforceMultipleVideos=u.enforceMultipleVideos}),[`${Ng}`]:It((i,l)=>{let{payload:u}=l;const{type:p,encrypeKey:v,additionalType:y}=u,C={encrypeKey:v,additionalType:y};"audio"===p?i.audioEncrypt=C:"video"===p?i.videoEncrypt=C:"sharing"===p&&(i.sharingEncrypt=C)}),[`${Lc}`]:i=>cn(cn({},Fm),{},{mediaConstraints:i.mediaConstraints,assetsPath:i.assetsPath,fileWithVersion:i.fileWithVersion})},Fm);var WP={exports:{}},hI={};function Cb(i,l,u,p){const{meeting:{userId:v},audio:{localShareAudioUserMutedList:y},share:{isReceiveSharingFromMainSession:C}}=p;return y.filter(w=>w.userId!==l).forEach(w=>{i.setSharingAudioVolume(w.userId,!0,w.isFromMainSession)}),i.setSharingAudioVolume(l,u,!!C),l===v?tA(u):vC({userId:l,muted:u})}function __(i,l,u){const{audio:{audioSsrc:p,activeMicrophone:v,activeSpeaker:y,isAllowToTalk:C,isSpeakerOnly:w},meeting:{svcUrl:D,conId:P,reportDomain:L,isAudioBridgeEnabled:W}}=l,re=ii(l),ee=w||Fa(re.userRole)&&!C,te=u??!ee;return km()&&!W&&console.warn("Cannot start audio due to the service is not ready."),i.joinComputerAudio(p,v,y,te,km()?{rwgHost:D,cid:P,nginxHost:L}:void 0)}function zR(i,l,u){return ts.apply(this,arguments)}function ts(){return ts=F(function*(i,l,u){const p=[],{audio:{isJoinComputerAudioBeforeSharingAudio:v,mutedBeforeSharingAudio:y}}=u,C=ii(u);return!0===v&&(yield __(i,u),p.push(ef(void 0)),!1===y&&(p.push(Wu(!0)),l.mute(C.userId,!1)),p.push($g(void 0))),p}),ts.apply(this,arguments)}function YR(i,l,u){return qR.apply(this,arguments)}function qR(){return qR=F(function*(i,l,u){const{audio:{isSharingAudio:p},meeting:{userId:v}}=u,y=[];if(y.push(Cb(i,v,!0,u)),p){yield i.leaveSharingAudio(!1),y.push(op(!1));const C=yield zR(i,l,u);y.push(...C),setTimeout(()=>{vt(dm,{state:"off"})},0)}return y.push(XE(!1)),y}),qR.apply(this,arguments)}function JR(i,l,u){return Ib.apply(this,arguments)}function Ib(){return Ib=F(function*(i,l,u){const{audio:{audioSsrc:p,activeMicrophone:v,activeSpeaker:y}}=u,C=ii(u),w=yield(D=F(function*(P,L){const W=[],re=ii(L),{audio:{isMicrophoneForbidden:ee}}=L;return"computer"===re?.audio&&(W.push(ef(!0)),W.push($g(re.muted)),yield P.leaveComputerAudio(),W.push(UT(0)),ee&&W.push(Zv(!1))),W}),function(P,L){return D.apply(this,arguments)})(i,u);var D;return yield i.leaveSharingAudio(!0),yield i.joinSharingAudio({ssrc:p,microphoneDeviceId:v,speakerDeviceId:y,isCaptureAudio:Fa(C.userRole)}),w.push(XE(!0)),w.push(op(!0)),w.push(Cb(i,C.userId,!1,u)),w.findIndex(D=>D.type===`${ef}`&&!0===D.payload)>-1&&(w.push(Wu(!0)),l.mute(u.meeting.userId,!0),vt(qS,{source:K.MutedSource.SharingAudio})),setTimeout(()=>{vt(dm,{state:"on"})},0),w}),Ib.apply(this,arguments)}(function(i,l){var u=function(Ht,kt){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,nn){ot.__proto__=nn}||function(ot,nn){for(var Sn in nn)nn.hasOwnProperty(Sn)&&(ot[Sn]=nn[Sn])})(Ht,kt)};function p(Ht,kt){function ot(){this.constructor=Ht}u(Ht,kt),Ht.prototype=null===kt?Object.create(kt):(ot.prototype=kt.prototype,new ot)}var y,v=function(){return v=Object.assign||function(Ht){for(var kt,ot=1,nn=arguments.length;ot<nn;ot++)for(var Sn in kt=arguments[ot])Object.prototype.hasOwnProperty.call(kt,Sn)&&(Ht[Sn]=kt[Sn]);return Ht},v.apply(this,arguments)},C=function(Ht,kt){var ot=new Uint8Array(Ht.byteLength+kt.byteLength);return ot.set(new Uint8Array(Ht),0),ot.set(new Uint8Array(kt),Ht.byteLength),ot.buffer},w="/";(y=i.TransformDataFormat||(i.TransformDataFormat={})).STRING="string",y.BLOB="blob",y.ARRAY_BUFFER="arraybuffer";var D=function(Ht){return Blob&&Ht instanceof Blob?"blob":ArrayBuffer&&Ht instanceof ArrayBuffer?"arrayBuffer":typeof Ht},P=[],L=function(){for(var Ht=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],kt="",ot=0;ot<32;ot++)kt+=Ht[Math.round(61*Math.random())];return-1!==P.indexOf(kt)?L():(P.push(kt),kt)},W=function(Ht){return Ht.arrayBuffer?Ht.arrayBuffer():new Promise(function(kt,ot){var nn=new FileReader;nn.readAsArrayBuffer(Ht),nn.onload=function(Sn){kt(Sn.target&&Sn.target.result)},nn.onerror=function(Sn){ot(Sn)}})},re=function(Ht){return Ht.text?Ht.text():new Promise(function(kt,ot){var nn=new FileReader;nn.readAsText(Ht),nn.onload=function(Sn){kt(Sn.target&&Sn.target.result)},nn.onerror=function(Sn){ot(Sn)}})},ee=function(Ht,kt){return Promise.resolve(new Blob([new Uint8Array(Ht)],{type:kt}))},te=function(Ht,kt){var ot=new Blob([Ht],{type:kt||"text/plain"});return re(ot)},oe=function(Ht,kt){return Promise.resolve(new Blob([Ht],{type:kt||"text/plain"}))},Ee=function(Ht,kt){return W(new Blob([Ht],{type:kt||"text/plain"}))};function Te(Ht){var kt=(Ht||"").split(".");return kt[kt.length-1]||""}function De(Ht){var kt=(Ht||"").lastIndexOf(w);return kt<0?"":Ht.slice(0,kt)}function Le(Ht){var kt=(Ht||"").lastIndexOf(w),ot=kt<0?Ht:Ht.slice(kt+1),nn=(ot||"").lastIndexOf(".");return nn<0?ot:ot.slice(0,nn)}function et(Ht){return["png","jpg","jpeg","svg"].includes(Te(Ht))}function lt(Ht){return"json"===Te(Ht)}function pt(Ht){return"version"===Te(Ht)}function gt(Ht,kt){return l.loadAsync(Ht).then(function(ot){return Promise.all(ot.filter(function(nn,Sn){return!Sn.dir}).map(function(nn){var Xn,Sn=lt((Xn=nn).name)?"string":et(Xn.name)?"base64":pt(Xn.name)?"text":"blob";return kt?.setUnZipFormat&&(Sn=kt.setUnZipFormat(nn)||Sn),nn.async(Sn).then(function(Xn){var fr=Xn,Yr=Te(nn.name),qr="svg"===Yr?"svg+xml":Yr;return"base64"===Sn&&et(nn.name)&&!Xn.startsWith("data")&&(fr="data:image/"+qr+";base64,"+fr),{data:fr,file:nn}})}))}).then(function(ot){return function ht(Ht,kt){return Ht.reduce(function(ot,nn){var Sn,Xn=nn.data,fr=nn.file,Yr=Te(fr.name),qr=De(fr.name),Ti=Le(fr.name),Si=(kt?.combineExtNames||[]).includes(Yr)&&"string"==typeof Xn,is=Si?""+(qr?""+qr+w+Yr:Yr):fr.name;return Si&&ot.some(function(ja){return ja.path===is&&(ja.data[Ti]=Xn,!0)})||ot.push({path:is,extName:Yr,data:Si?(Sn={},Sn[Ti]=Xn,Sn):Xn,shouldCombine:Si}),ot},[]).map(function(ot){var nn=ot.data,Sn=ot.shouldCombine,Xn=function(fr,Yr){var qr={};for(var Ti in fr)Object.prototype.hasOwnProperty.call(fr,Ti)&&Yr.indexOf(Ti)<0&&(qr[Ti]=fr[Ti]);if(null!=fr&&"function"==typeof Object.getOwnPropertySymbols){var Si=0;for(Ti=Object.getOwnPropertySymbols(fr);Si<Ti.length;Si++)Yr.indexOf(Ti[Si])<0&&Object.prototype.propertyIsEnumerable.call(fr,Ti[Si])&&(qr[Ti[Si]]=fr[Ti[Si]])}return qr}(ot,["data","shouldCombine"]);return v(v({},Xn),{data:Sn?JSON.stringify(nn):nn})})}(ot,kt)})}function Yt(Ht,kt){var lc,ot=kt||{},nn=ot.encoding,Sn=ot.blobType,Xn=ot.unZipOptions;if("blob"===D(lc=Ht)&&(lc.type.includes("compressed")||lc.type.includes("zip"))&&!Xn?.disableUnZip)return gt(Ht,Xn);if(!nn)return Promise.resolve(Ht);var fr=D(Ht),Yr="string"===fr,qr="blob"===fr,Ti="arrayBuffer"===fr;if(nn===i.TransformDataFormat.BLOB){var Si=Ht;if(Yr)return re(Si);if(Ti)return W(Si)}else if(nn===i.TransformDataFormat.ARRAY_BUFFER){var is=Ht;if(Yr)return te(is,Sn);if(qr)return ee(is,Sn)}else if(nn===i.TransformDataFormat.STRING){var ja=Ht;if(qr)return oe(ja,Sn);if(Ti)return Ee(ja,Sn)}return Promise.resolve(Ht)}function Xt(Ht){var kt=0,ot=!1,nn=function(){kt>90||ot||(Ht(kt+=(100-kt)/50),requestAnimationFrame(nn))};return nn(),{finish:function(){100===kt||ot||(kt=100,Ht(100))},abort:function(){100===kt||ot||(ot=!0)},get curProgress(){return kt}}}function un(){}function Tt(){Tt.init.call(this)}function yn(Ht){return void 0===Ht._maxListeners?Tt.defaultMaxListeners:Ht._maxListeners}function Kn(Ht,kt,ot){if(kt)Ht.call(ot);else for(var nn=Ht.length,Sn=pe(Ht,nn),Xn=0;Xn<nn;++Xn)Sn[Xn].call(ot)}function Pt(Ht,kt,ot,nn){if(kt)Ht.call(ot,nn);else for(var Sn=Ht.length,Xn=pe(Ht,Sn),fr=0;fr<Sn;++fr)Xn[fr].call(ot,nn)}function mt(Ht,kt,ot,nn,Sn){if(kt)Ht.call(ot,nn,Sn);else for(var Xn=Ht.length,fr=pe(Ht,Xn),Yr=0;Yr<Xn;++Yr)fr[Yr].call(ot,nn,Sn)}function Ve(Ht,kt,ot,nn,Sn,Xn){if(kt)Ht.call(ot,nn,Sn,Xn);else for(var fr=Ht.length,Yr=pe(Ht,fr),qr=0;qr<fr;++qr)Yr[qr].call(ot,nn,Sn,Xn)}function tt(Ht,kt,ot,nn){if(kt)Ht.apply(ot,nn);else for(var Sn=Ht.length,Xn=pe(Ht,Sn),fr=0;fr<Sn;++fr)Xn[fr].apply(ot,nn)}function Rt(Ht,kt,ot,nn){var Sn,Xn,fr,qr;if("function"!=typeof ot)throw new TypeError('"listener" argument must be a function');if((Xn=Ht._events)?(Xn.newListener&&(Ht.emit("newListener",kt,ot.listener?ot.listener:ot),Xn=Ht._events),fr=Xn[kt]):(Xn=Ht._events=new un,Ht._eventsCount=0),fr){if("function"==typeof fr?fr=Xn[kt]=nn?[ot,fr]:[fr,ot]:nn?fr.unshift(ot):fr.push(ot),!fr.warned&&(Sn=yn(Ht))&&Sn>0&&fr.length>Sn){fr.warned=!0;var Yr=new Error("Possible EventEmitter memory leak detected. "+fr.length+" "+kt+" listeners added. Use emitter.setMaxListeners() to increase limit");Yr.name="MaxListenersExceededWarning",Yr.emitter=Ht,Yr.type=kt,Yr.count=fr.length,qr=Yr,"function"==typeof console.warn?console.warn(qr):console.log(qr)}}else fr=Xn[kt]=ot,++Ht._eventsCount;return Ht}function st(Ht,kt,ot){var nn=!1;function Sn(){Ht.removeListener(kt,Sn),nn||(nn=!0,ot.apply(Ht,arguments))}return Sn.listener=ot,Sn}function Bt(Ht){var kt=this._events;if(kt){var ot=kt[Ht];if("function"==typeof ot)return 1;if(ot)return ot.length}return 0}function pe(Ht,kt){for(var ot=new Array(kt);kt--;)ot[kt]=Ht[kt];return ot}un.prototype=Object.create(null),Tt.EventEmitter=Tt,Tt.usingDomains=!1,Tt.prototype.domain=void 0,Tt.prototype._events=void 0,Tt.prototype._maxListeners=void 0,Tt.defaultMaxListeners=10,Tt.init=function(){this.domain=null,Tt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new un,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Tt.prototype.setMaxListeners=function(Ht){if("number"!=typeof Ht||Ht<0||isNaN(Ht))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Ht,this},Tt.prototype.getMaxListeners=function(){return yn(this)},Tt.prototype.emit=function(Ht){var kt,ot,nn,Sn,Xn,fr,Yr,qr="error"===Ht;if(fr=this._events)qr=qr&&null==fr.error;else if(!qr)return!1;if(Yr=this.domain,qr){if(kt=arguments[1],!Yr){if(kt instanceof Error)throw kt;var Ti=new Error('Uncaught, unspecified "error" event. ('+kt+")");throw Ti.context=kt,Ti}return kt||(kt=new Error('Uncaught, unspecified "error" event')),kt.domainEmitter=this,kt.domain=Yr,kt.domainThrown=!1,Yr.emit("error",kt),!1}if(!(ot=fr[Ht]))return!1;var Si="function"==typeof ot;switch(nn=arguments.length){case 1:Kn(ot,Si,this);break;case 2:Pt(ot,Si,this,arguments[1]);break;case 3:mt(ot,Si,this,arguments[1],arguments[2]);break;case 4:Ve(ot,Si,this,arguments[1],arguments[2],arguments[3]);break;default:for(Sn=new Array(nn-1),Xn=1;Xn<nn;Xn++)Sn[Xn-1]=arguments[Xn];tt(ot,Si,this,Sn)}return!0},Tt.prototype.on=Tt.prototype.addListener=function(Ht,kt){return Rt(this,Ht,kt,!1)},Tt.prototype.prependListener=function(Ht,kt){return Rt(this,Ht,kt,!0)},Tt.prototype.once=function(Ht,kt){if("function"!=typeof kt)throw new TypeError('"listener" argument must be a function');return this.on(Ht,st(this,Ht,kt)),this},Tt.prototype.prependOnceListener=function(Ht,kt){if("function"!=typeof kt)throw new TypeError('"listener" argument must be a function');return this.prependListener(Ht,st(this,Ht,kt)),this},Tt.prototype.removeListener=function(Ht,kt){var ot,nn,Sn,Xn,fr;if("function"!=typeof kt)throw new TypeError('"listener" argument must be a function');if(!(nn=this._events))return this;if(!(ot=nn[Ht]))return this;if(ot===kt||ot.listener&&ot.listener===kt)0==--this._eventsCount?this._events=new un:(delete nn[Ht],nn.removeListener&&this.emit("removeListener",Ht,ot.listener||kt));else if("function"!=typeof ot){for(Sn=-1,Xn=ot.length;Xn-- >0;)if(ot[Xn]===kt||ot[Xn].listener&&ot[Xn].listener===kt){fr=ot[Xn].listener,Sn=Xn;break}if(Sn<0)return this;if(1===ot.length){if(ot[0]=void 0,0==--this._eventsCount)return this._events=new un,this;delete nn[Ht]}else!function(Yr,qr){for(var Ti=qr,Si=Ti+1,is=Yr.length;Si<is;Ti+=1,Si+=1)Yr[Ti]=Yr[Si];Yr.pop()}(ot,Sn);nn.removeListener&&this.emit("removeListener",Ht,fr||kt)}return this},Tt.prototype.removeAllListeners=function(Ht){var kt,ot;if(!(ot=this._events))return this;if(!ot.removeListener)return 0===arguments.length?(this._events=new un,this._eventsCount=0):ot[Ht]&&(0==--this._eventsCount?this._events=new un:delete ot[Ht]),this;if(0===arguments.length){for(var nn,Sn=Object.keys(ot),Xn=0;Xn<Sn.length;++Xn)"removeListener"!==(nn=Sn[Xn])&&this.removeAllListeners(nn);return this.removeAllListeners("removeListener"),this._events=new un,this._eventsCount=0,this}if("function"==typeof(kt=ot[Ht]))this.removeListener(Ht,kt);else if(kt)do{this.removeListener(Ht,kt[kt.length-1])}while(kt[0]);return this},Tt.prototype.listeners=function(Ht){var kt,ot=this._events;return ot&&(kt=ot[Ht])?"function"==typeof kt?[kt.listener||kt]:function(nn){for(var Sn=new Array(nn.length),Xn=0;Xn<Sn.length;++Xn)Sn[Xn]=nn[Xn].listener||nn[Xn];return Sn}(kt):[]},Tt.listenerCount=function(Ht,kt){return"function"==typeof Ht.listenerCount?Ht.listenerCount(kt):Bt.call(Ht,kt)},Tt.prototype.listenerCount=Bt,Tt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ye,wn=function(Ht){function kt(ot){var nn=Ht.call(this)||this;return nn.timeout=ot?.timeout||3e4,nn}return p(kt,Ht),kt.prototype.clearTimeoutCheck=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},kt.prototype.startTimeoutCheck=function(){var ot=this;!this.timeoutTimer&&!this.finished&&this.timeout>0&&(this.timeoutTimer=setTimeout(function(){ot.finished||(ot.finished=!0,ot.data=null,ot.emit("timeout")),ot.clearTimeoutCheck()},this.timeout))},kt}(Tt),Kr=function(Ht){function kt(ot){var nn=Ht.call(this,ot)||this;return nn.uuid=L(),nn.domParams=ot||{},nn}return p(kt,Ht),kt.prototype.jsonp=function(){var ot=this;if(!this.finished){var nn=this.domParams,Sn=nn.url,Xn=nn.jsonpCallbackName,fr=void 0===Xn?"callback":Xn,Yr=nn.body,qr=nn.integrity;this.script=document.createElement("script"),qr&&(this.script.integrity=qr,this.script.crossOrigin="anonymous");var Ti="";Yr&&Object.entries(Yr).forEach(function(Si){Ti+=(Ti?"&":"")+Si[0]+"="+Si[1]}),Ti+=(Ti?"&":"")+fr+"="+this.uuid,this.script.src=Sn+(Sn.includes("?")?"":"?")+Ti,this.jsonpCallback(),this.progressMonitory=Xt(function(Si){ot.finished||ot.emit("progressUpdated",Si)}),document.body.appendChild(this.script)}},kt.prototype.clearSideEffect=function(ot){if(void 0===ot&&(ot=!1),document.body.removeChild(this.script),ot){var nn=this.uuid;window[this.uuid]=function(){window[nn]&&delete window[nn]}}else delete window[this.uuid];this.script=null,this.uuid=null,this.finished=!0,this.data=null,this.clearTimeoutCheck()},kt.prototype.jsonpCallback=function(){var ot=this;this.script.onerror=function(nn){var Sn;ot.finished||(ot.clearSideEffect(),null===(Sn=ot.progressMonitory)||void 0===Sn||Sn.abort(),ot.emit("error",new Error("string"==typeof nn?nn:"load jsonp script failed")))},window[this.uuid]=function(nn){var Sn;if(!ot.finished){var Xn=ot.domParams,fr=Xn.encoding,Yr=Xn.blobType,qr=Xn.unZipOptions,Ti=Xn.beforeTransformData,Si=Xn.afterTransformData;null===(Sn=ot.progressMonitory)||void 0===Sn||Sn.finish(),ot.clearSideEffect(),(Ti?Ti(nn||""):Promise.resolve(nn||"")).then(function(is){return Yt(is,{encoding:fr,blobType:Yr,unZipOptions:qr}).then(function(ja){return(Si?Si(ja):Promise.resolve(ja)).then(function(lc){return ot.emit("finished",lc)})})}).catch(function(is){return ot.emit("error",is)})}}},kt.prototype.abort=function(){this.clearSideEffect(!0)},kt}(wn),Jo=function(Ht){function kt(ot){var nn=Ht.call(this,ot)||this;return nn.socketParams=ot||{},nn}return p(kt,Ht),kt.prototype.write=function(ot,nn){ot&&!this.finished&&(ot instanceof Error?this.handleError(ot):(this.data?this.appendData(ot):this.data=ot,this.handlePerCentUpdate(nn)))},kt.prototype.handlePerCentUpdate=function(ot){void 0===ot||this.finished||this.emit("progressUpdated",ot)},kt.prototype.handleError=function(ot){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.emit("error",ot)},kt.prototype.appendData=function(ot){D(ot)===D(this.data)?"string"==typeof ot?this.data+=ot:Blob&&ot instanceof Blob?this.data=new Blob([this.data,ot],{type:ot.type}):ArrayBuffer&&ot instanceof ArrayBuffer&&(this.data=C(this.data,ot)):this.handleError(new Error("every piece of the data format must be the same"))},kt.prototype.end=function(ot){var nn=this;if(!this.finished){this.handlePerCentUpdate(100),ot&&this.write(ot);var Sn=this.socketParams,Xn=Sn.encoding,fr=Sn.blobType,Yr=Sn.unZipOptions,qr=Sn.beforeTransformData,Ti=Sn.afterTransformData;(qr?qr(this.data):Promise.resolve(this.data)).then(function(Si){return Yt(Si,{encoding:Xn,blobType:fr,unZipOptions:Yr}).then(function(is){return(Ti?Ti(is):Promise.resolve(is)).then(function(ja){return nn.emit("finished",ja)})})}).catch(function(Si){return nn.emit("error",Si)}),this.data=null,this.finished=!0,this.clearTimeoutCheck()}},kt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck()},kt}(wn),bu=function(Ht){function kt(ot){var nn=Ht.call(this,ot)||this;return nn.xhrParams=ot||{},nn.xhrParams.headers=v({},nn.xhrParams.headers||{}),nn}return p(kt,Ht),kt.prototype.supportFetch=function(){return!!window.fetch&&window.AbortController&&window.Request},kt.prototype.ajax=function(){var ot=this;if(!this.finished)if(this.xhrParams.url){var nn=this.xhrParams,Sn=nn.headers,Xn=void 0===Sn?{}:Sn,fr=nn.url,Yr=nn.body,qr=void 0===Yr?{}:Yr,Ti=nn.method,Si=void 0===Ti?"POST":Ti,is=nn.encoding,ja=nn.integrity;this.controller=this.supportFetch()?new AbortController:new XMLHttpRequest;var lc=this.supportFetch()?Xt(function(En){ot.finished||ot.emit("progressUpdated",En)}):null;(this.supportFetch()?fetch(new Request(fr,v({method:Si,headers:Xn,body:"GET"===Si?void 0:JSON.stringify(qr),signal:this.controller.signal},ja?{integrity:ja,mode:"cors"}:{}))).then(function(En){return En.ok?is===i.TransformDataFormat.STRING?En.text():is===i.TransformDataFormat.ARRAY_BUFFER?En.arrayBuffer():En.blob():Promise.reject(new Error("xhr download "+fr+" failed!"))}):new Promise(function(En,Pi){var fs=new XMLHttpRequest;ot.controller=fs,fs.open(Si,fr),fs.responseType=is===i.TransformDataFormat.STRING?"text":is===i.TransformDataFormat.ARRAY_BUFFER?"arraybuffer":"blob",Object.entries(Xn).forEach(function(js){fs.setRequestHeader(js[0],js[1])}),fs.onload=function(){var js=fs.status,Cu=fs.statusText;js>=200&&js<300||304===js?En(fs.response):Pi(new Error(js+": "+Cu))},fs.onprogress=function(js){var zt=js||{},Cu=zt.total,nr=zt.loaded;void 0===nr||ot.finished||(Cu?ot.emit("progressUpdated",nr/Cu*100):nr&&!lc&&(lc=Xt(function(Qs){ot.finished||ot.emit("progressUpdated",Qs)})))},fs.onerror=function(){Pi(new Error("xhr download "+fr+" failed!"))},fs.send(JSON.stringify(qr))})).then(function(En){if(!ot.finished){var Pi=ot.xhrParams,fs=Pi.encoding,js=Pi.blobType,zt=Pi.unZipOptions,Cu=Pi.beforeTransformData,nr=Pi.afterTransformData;lc?.finish(),ot.finished=!0,ot.clearTimeoutCheck(),(Cu?Cu(En):Promise.resolve(En)).then(function(Qs){return Yt(Qs,{encoding:fs,blobType:js,unZipOptions:zt}).then(function(M0){return(nr?nr(M0):Promise.resolve(M0)).then(function(x0){return ot.emit("finished",x0)})})}).catch(function(Qs){return ot.emit("error",Qs)})}}).catch(function(En){ot.finished||(ot.finished=!0,ot.clearTimeoutCheck(),lc?.abort(),ot.emit("error",En))})}else this.emit("error",new Error("xhrDownloader url params invalid!"))},kt.prototype.abort=function(){this.data=null,this.finished=!0,this.clearTimeoutCheck(),this.controller.abort()},kt}(wn),bo=0,ps=new Tt,rs="ThreadPoolReady",se=function(){bo-=1,ps.emit(rs)};(ye=i.DownloaderType||(i.DownloaderType={})).XHR="xhr",ye.DOM="dom",ye.SOCKET="socket";var wa=function(Ht){function kt(ot){var nn=Ht.call(this)||this;return nn.aborted=!1,nn.downloadParmas=v({type:i.DownloaderType.XHR},ot),nn.id=L(),nn}return p(kt,Ht),kt.prototype.start=function(){var ot=this;bo+=1,this.progress=0,this.emit("downloadStart"),this.onDownloadStartCallback&&this.onDownloadStartCallback();var nn=this.downloadParmas,Xn=nn.xhrParams,fr=nn.domParams,Yr=nn.socketParams;switch(nn.type){case i.DownloaderType.DOM:this.downloader=new Kr(fr),this.downloader.jsonp();break;case i.DownloaderType.SOCKET:this.downloader=new Jo(Yr);break;default:this.downloader=new bu(Xn),this.downloader.ajax()}return this.downloader.startTimeoutCheck(),this.downloader.on("error",function(qr){ot.emit("error",qr),ot.onErrorCallback&&ot.onErrorCallback(qr),se()}).on("finished",function(qr){ot.emit("complete",qr),ot.onCompleteCallback&&ot.onCompleteCallback(qr),se()}).on("progressUpdated",function(qr){ot.progress=qr,ot.emit("progressUpdated",qr),ot.onProgressUpdatedCallback&&ot.onProgressUpdatedCallback(qr)}).on("timeout",function(){ot.emit("timeout"),ot.onTimeoutCallback&&ot.onTimeoutCallback(),se()}),this},kt.prototype.abort=function(){if(this.aborted)return this;this.aborted=!0,this.downloader&&!this.downloader.finished&&this.downloader.abort();var ot=new Error("file download has been aborted");return this.emit("abort",ot),this.onAbortCallback&&this.onAbortCallback(ot),se(),this},kt.prototype.onDownloadStart=function(ot){return this.onDownloadStartCallback=ot,this},kt.prototype.onProgressUpdated=function(ot){return this.onProgressUpdatedCallback=ot,this},kt.prototype.onError=function(ot){return this.onErrorCallback=ot,this},kt.prototype.onComplete=function(ot){return this.onCompleteCallback=ot,this},kt.prototype.onAbort=function(ot){return this.onAbortCallback=ot,this},kt.prototype.onTimeout=function(ot){return this.onTimeoutCallback=ot,this},kt.prototype.isInProgress=function(){return void 0!==this.progress},kt.prototype.isFinished=function(){return 100===this.progress},kt}(Tt),Su=function(){function Ht(kt){this.taskList=[],this.options=kt||{};var ot=this.options.threadLimit;if((void 0===ot?6:ot)>6)throw new Error("threadLimit must be lower than 6");ps.on(rs,this.startNextTask.bind(this))}return Ht.prototype.download=function(kt){var ot=new wa(kt),nn=this.removeTask.bind(this,ot);return ot.on("abort",nn),this.taskList.push(ot),this.checkTaskReady(ot),ot},Ht.prototype.startNextTask=function(){var kt=this.taskList.find(function(ot){return!ot.isInProgress()});kt&&this.checkTaskReady(kt)},Ht.prototype.checkTaskReady=function(kt){var ot=this.options.threadLimit,nn=void 0===ot?6:ot;if(!(this.taskList.findIndex(function(Xn){return!Xn.isInProgress()})>=nn||bo+1>6)){var Sn=this.removeTask.bind(this,kt);kt.on("complete",Sn),kt.on("error",Sn),kt.on("timeout",Sn),setTimeout(function(){return kt.start()},0)}},Ht.prototype.removeTask=function(kt){var ot=this;this.taskList.some(function(nn,Sn){return nn===kt&&(setTimeout(function(){return kt.removeAllListeners()},0),ot.taskList.splice(Sn,1),!0)})},Ht}();i.DownloadTask=wa,i.IDownloadManager=Su,i.appendBuffer=C,i.arrayBufferToBlob=ee,i.arrayBufferToString=te,i.blobToArrayBuffer=W,i.blobToText=re,i.genUuid=L,i.getDataFormat=D,i.getExtName=Te,i.getFileName=Le,i.getFullPathName=De,i.isImgFile=et,i.isJsonFile=lt,i.isVersionFile=pt,i.monitorProgress=Xt,i.sep=w,i.stringToArrayBuffer=Ee,i.stringToBlob=oe,i.transformData=Yt,Object.defineProperty(i,"__esModule",{value:!0})})(hI,AS(Object.freeze({__proto__:null,default:{}}))),nh(hI),function(i,l){var u=function(Pt,mt){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ve,tt){Ve.__proto__=tt}||function(Ve,tt){for(var Rt in tt)tt.hasOwnProperty(Rt)&&(Ve[Rt]=tt[Rt])})(Pt,mt)};function p(Pt,mt){function Ve(){this.constructor=Pt}u(Pt,mt),Pt.prototype=null===mt?Object.create(mt):(Ve.prototype=mt.prototype,new Ve)}var v=function(){return v=Object.assign||function(Pt){for(var mt,Ve=1,tt=arguments.length;Ve<tt;Ve++)for(var Rt in mt=arguments[Ve])Object.prototype.hasOwnProperty.call(mt,Rt)&&(Pt[Rt]=mt[Rt]);return Pt},v.apply(this,arguments)};function y(){}function C(){C.init.call(this)}function w(Pt){return void 0===Pt._maxListeners?C.defaultMaxListeners:Pt._maxListeners}function D(Pt,mt,Ve){if(mt)Pt.call(Ve);else for(var tt=Pt.length,Rt=Ee(Pt,tt),st=0;st<tt;++st)Rt[st].call(Ve)}function P(Pt,mt,Ve,tt){if(mt)Pt.call(Ve,tt);else for(var Rt=Pt.length,st=Ee(Pt,Rt),Bt=0;Bt<Rt;++Bt)st[Bt].call(Ve,tt)}function L(Pt,mt,Ve,tt,Rt){if(mt)Pt.call(Ve,tt,Rt);else for(var st=Pt.length,Bt=Ee(Pt,st),pe=0;pe<st;++pe)Bt[pe].call(Ve,tt,Rt)}function W(Pt,mt,Ve,tt,Rt,st){if(mt)Pt.call(Ve,tt,Rt,st);else for(var Bt=Pt.length,pe=Ee(Pt,Bt),ye=0;ye<Bt;++ye)pe[ye].call(Ve,tt,Rt,st)}function re(Pt,mt,Ve,tt){if(mt)Pt.apply(Ve,tt);else for(var Rt=Pt.length,st=Ee(Pt,Rt),Bt=0;Bt<Rt;++Bt)st[Bt].apply(Ve,tt)}function ee(Pt,mt,Ve,tt){var Rt,st,Bt,ye;if("function"!=typeof Ve)throw new TypeError('"listener" argument must be a function');if((st=Pt._events)?(st.newListener&&(Pt.emit("newListener",mt,Ve.listener?Ve.listener:Ve),st=Pt._events),Bt=st[mt]):(st=Pt._events=new y,Pt._eventsCount=0),Bt){if("function"==typeof Bt?Bt=st[mt]=tt?[Ve,Bt]:[Bt,Ve]:tt?Bt.unshift(Ve):Bt.push(Ve),!Bt.warned&&(Rt=w(Pt))&&Rt>0&&Bt.length>Rt){Bt.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+Bt.length+" "+mt+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=Pt,pe.type=mt,pe.count=Bt.length,ye=pe,"function"==typeof console.warn?console.warn(ye):console.log(ye)}}else Bt=st[mt]=Ve,++Pt._eventsCount;return Pt}function te(Pt,mt,Ve){var tt=!1;function Rt(){Pt.removeListener(mt,Rt),tt||(tt=!0,Ve.apply(Pt,arguments))}return Rt.listener=Ve,Rt}function oe(Pt){var mt=this._events;if(mt){var Ve=mt[Pt];if("function"==typeof Ve)return 1;if(Ve)return Ve.length}return 0}function Ee(Pt,mt){for(var Ve=new Array(mt);mt--;)Ve[mt]=Pt[mt];return Ve}y.prototype=Object.create(null),C.EventEmitter=C,C.usingDomains=!1,C.prototype.domain=void 0,C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.init=function(){this.domain=null,C.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new y,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(Pt){if("number"!=typeof Pt||Pt<0||isNaN(Pt))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Pt,this},C.prototype.getMaxListeners=function(){return w(this)},C.prototype.emit=function(Pt){var mt,Ve,tt,Rt,st,Bt,pe,ye="error"===Pt;if(Bt=this._events)ye=ye&&null==Bt.error;else if(!ye)return!1;if(pe=this.domain,ye){if(mt=arguments[1],!pe){if(mt instanceof Error)throw mt;var wn=new Error('Uncaught, unspecified "error" event. ('+mt+")");throw wn.context=mt,wn}return mt||(mt=new Error('Uncaught, unspecified "error" event')),mt.domainEmitter=this,mt.domain=pe,mt.domainThrown=!1,pe.emit("error",mt),!1}if(!(Ve=Bt[Pt]))return!1;var Kr="function"==typeof Ve;switch(tt=arguments.length){case 1:D(Ve,Kr,this);break;case 2:P(Ve,Kr,this,arguments[1]);break;case 3:L(Ve,Kr,this,arguments[1],arguments[2]);break;case 4:W(Ve,Kr,this,arguments[1],arguments[2],arguments[3]);break;default:for(Rt=new Array(tt-1),st=1;st<tt;st++)Rt[st-1]=arguments[st];re(Ve,Kr,this,Rt)}return!0},C.prototype.on=C.prototype.addListener=function(Pt,mt){return ee(this,Pt,mt,!1)},C.prototype.prependListener=function(Pt,mt){return ee(this,Pt,mt,!0)},C.prototype.once=function(Pt,mt){if("function"!=typeof mt)throw new TypeError('"listener" argument must be a function');return this.on(Pt,te(this,Pt,mt)),this},C.prototype.prependOnceListener=function(Pt,mt){if("function"!=typeof mt)throw new TypeError('"listener" argument must be a function');return this.prependListener(Pt,te(this,Pt,mt)),this},C.prototype.removeListener=function(Pt,mt){var Ve,tt,Rt,st,Bt;if("function"!=typeof mt)throw new TypeError('"listener" argument must be a function');if(!(tt=this._events))return this;if(!(Ve=tt[Pt]))return this;if(Ve===mt||Ve.listener&&Ve.listener===mt)0==--this._eventsCount?this._events=new y:(delete tt[Pt],tt.removeListener&&this.emit("removeListener",Pt,Ve.listener||mt));else if("function"!=typeof Ve){for(Rt=-1,st=Ve.length;st-- >0;)if(Ve[st]===mt||Ve[st].listener&&Ve[st].listener===mt){Bt=Ve[st].listener,Rt=st;break}if(Rt<0)return this;if(1===Ve.length){if(Ve[0]=void 0,0==--this._eventsCount)return this._events=new y,this;delete tt[Pt]}else!function(pe,ye){for(var wn=ye,Kr=wn+1,Jo=pe.length;Kr<Jo;wn+=1,Kr+=1)pe[wn]=pe[Kr];pe.pop()}(Ve,Rt);tt.removeListener&&this.emit("removeListener",Pt,Bt||mt)}return this},C.prototype.removeAllListeners=function(Pt){var mt,Ve;if(!(Ve=this._events))return this;if(!Ve.removeListener)return 0===arguments.length?(this._events=new y,this._eventsCount=0):Ve[Pt]&&(0==--this._eventsCount?this._events=new y:delete Ve[Pt]),this;if(0===arguments.length){for(var tt,Rt=Object.keys(Ve),st=0;st<Rt.length;++st)"removeListener"!==(tt=Rt[st])&&this.removeAllListeners(tt);return this.removeAllListeners("removeListener"),this._events=new y,this._eventsCount=0,this}if("function"==typeof(mt=Ve[Pt]))this.removeListener(Pt,mt);else if(mt)do{this.removeListener(Pt,mt[mt.length-1])}while(mt[0]);return this},C.prototype.listeners=function(Pt){var mt,Ve=this._events;return Ve&&(mt=Ve[Pt])?"function"==typeof mt?[mt.listener||mt]:function(tt){for(var Rt=new Array(tt.length),st=0;st<Rt.length;++st)Rt[st]=tt[st].listener||tt[st];return Rt}(mt):[]},C.listenerCount=function(Pt,mt){return"function"==typeof Pt.listenerCount?Pt.listenerCount(mt):oe.call(Pt,mt)},C.prototype.listenerCount=oe,C.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Te="ZipInfo:";function De(Pt){var mt;return null===(mt=Pt?.path)||void 0===mt?void 0:mt.startsWith(Te)}function Le(Pt){return"string"==typeof Pt&&Pt.startsWith(Te)}function et(Pt,mt){return(Array.isArray(Pt)?Pt:[Pt]).some(function(Ve){if("number"!=typeof Ve.version)throw new Error("file version must be an int number");return Ve.version<mt})}function lt(Pt,mt){return Pt.reduce(function(Ve,tt){return Ve.then(function(Rt){return mt(Rt,tt)}).catch(function(){return mt(void 0,tt)})},Promise.resolve(void 0))}var pt,ht=function(Pt){function mt(){return null!==Pt&&Pt.apply(this,arguments)||this}return p(mt,Pt),mt}(C),gt="resource",Yt=function(Pt){function mt(Ve){var ye,tt=Pt.call(this)||this;if(tt.ready=!1,tt.openError=!1,tt.isEnable()){var Rt=Ve||{},Bt=Rt.indexDbVersion;tt.dbName="resource-manager"+((ye=Rt.nameSpaceId)?"-"+ye:"");var pe=indexedDB.open(tt.dbName,Bt||1);pe.addEventListener("error",function(){tt.openError=!0,tt.checkReady(),tt.emit("error",new Error("failed to open indexedDB"))}),pe.addEventListener("success",function(){tt.db=pe.result,tt.checkReady()}),pe.addEventListener("upgradeneeded",function(){tt.db=pe.result,tt.handleSuccess()}),setTimeout(function(){tt.checkReady()},5e3)}else tt.checkReady();return tt}return p(mt,Pt),mt.prototype.checkReady=function(){this.ready||(this.ready=!0,this.emit("ready"))},mt.prototype.handleSuccess=function(){if(!this.db.objectStoreNames||0===this.db.objectStoreNames.length||!this.db.objectStoreNames.contains(gt)){var Ve=this.db.createObjectStore(gt,{keyPath:"path",autoIncrement:!1});Ve.createIndex("path","path"),Ve.createIndex("sourceURL","sourceURL",{unique:!1})}},mt.prototype.createAction=function(Ve){var tt=this.db.transaction([gt],Ve||"readonly");return{trans:tt,store:tt.objectStore(gt)}},mt.prototype.handleAction=function(Ve,tt){return new Promise(function(Rt,st){var Bt=tt();Ve.addEventListener("complete",function(){Rt(Bt.result)}),Ve.addEventListener("error",function(){st(Ve.error||new Error("transaction error"))}),Ve.addEventListener("abort",function(){st(Ve.error||new Error("transaction aborted"))})})},mt.prototype.put=function(){for(var Ve=[],tt=0;tt<arguments.length;tt++)Ve[tt]=arguments[tt];var Rt=this.createAction("readwrite"),Bt=Rt.store;return this.handleAction(Rt.trans,function(){return Bt.put.apply(Bt,Ve)})},mt.prototype.getAllKeysFromIndex=function(Ve){for(var tt=[],Rt=1;Rt<arguments.length;Rt++)tt[Rt-1]=arguments[Rt];if(IDBObjectStore.prototype.getAllKeys){var st=this.createAction(),pe=st.store;return this.handleAction(st.trans,function(){var ye;return(ye=pe.index(Ve)).getAllKeys.apply(ye,tt)})}return this.openKeyCursor(Ve)},mt.prototype.getAllFromIndex=function(Ve){for(var tt=[],Rt=1;Rt<arguments.length;Rt++)tt[Rt-1]=arguments[Rt];var st=this.createAction(),pe=st.store;return IDBObjectStore.prototype.getAll?this.handleAction(st.trans,function(){var ye;return(ye=pe.index(Ve)).getAll.apply(ye,tt)}):this.openCursor(Ve)},mt.prototype.getFromIndex=function(Ve){for(var tt=[],Rt=1;Rt<arguments.length;Rt++)tt[Rt-1]=arguments[Rt];var st=this.createAction(),pe=st.store;return this.handleAction(st.trans,function(){var ye;return(ye=pe.index(Ve)).get.apply(ye,tt)})},mt.prototype.deleteKey=function(){for(var Ve=[],tt=0;tt<arguments.length;tt++)Ve[tt]=arguments[tt];var Rt=this.createAction("readwrite"),Bt=Rt.store;return this.handleAction(Rt.trans,function(){return Bt.delete.apply(Bt,Ve)})},mt.prototype.handleCursorAction=function(Ve,tt,Rt,st){return new Promise(function(Bt,pe){tt.addEventListener("success",function(){tt.result?(Rt(st,tt.result),tt.result.continue()):Bt(st)}),tt.addEventListener("error",function(){pe(Ve.error||new Error("transaction error"))})})},mt.prototype.openKeyCursor=function(Ve){for(var tt,Rt=[],st=1;st<arguments.length;st++)Rt[st-1]=arguments[st];var Bt=this.createAction("readwrite");return this.handleCursorAction(Bt.trans,(tt=Bt.store.index(Ve)).openKeyCursor.apply(tt,Rt),function(wn,Kr){return wn.push(Kr.key),wn},[])},mt.prototype.openCursor=function(Ve){for(var tt,Rt=[],st=1;st<arguments.length;st++)Rt[st-1]=arguments[st];var Bt=this.createAction("readwrite");return this.handleCursorAction(Bt.trans,(tt=Bt.store.index(Ve)).openCursor.apply(tt,Rt),function(wn,Kr){return wn.push(Kr.value),wn},[])},mt.prototype.isEnable=function(){return!!window.indexedDB&&!this.openError},mt.prototype.saveFile=function(Ve){return this.db?this.put(Ve).then(function(){return!0}):Promise.resolve(!1)},mt.prototype.removeFile=function(Ve){var tt=this;return this.db?"string"==typeof Ve?this.getAllKeysFromIndex("path").then(function(Rt){var st=(Rt||[]).filter(function(Bt){return Bt===Ve||Bt.startsWith(""+Ve+l.sep)});return Promise.all(st.map(function(Bt){return tt.deleteKey(Bt)}))}).then(function(){return!0}):this.deleteKey(Ve.path).then(function(){return!0}):Promise.resolve(!1)},mt.prototype.clear=function(){if(!this.db)return Promise.resolve(!1);var Ve=this.createAction("readwrite"),Rt=Ve.store;return this.handleAction(Ve.trans,function(){return Rt.clear()}).then(function(){return!0})},mt.prototype.findFileByPath=function(Ve){return this.db&&Ve?this.getFromIndex("path",Ve):Promise.resolve(void 0)},mt.prototype.findFileBySourceURL=function(Ve){return this.db&&Ve?this.getAllFromIndex("sourceURL",Ve):Promise.resolve([])},mt.prototype.isDirectory=function(Ve){var tt=this;return this.db?new Promise(function(Rt){Le(Ve)?Rt(!1):tt.getAllKeysFromIndex("path").then(function(st){return(st||[]).some(function(Bt){return Bt.startsWith(""+Ve+l.sep)})}).then(Rt).catch(function(){return Rt(!1)})}):Promise.resolve(!1)},mt.prototype.ls=function(Ve){var tt=this;return this.db?this.getAllKeysFromIndex("path").then(function(Rt){var st=[];return Promise.all((Rt||[]).map(function(Bt){if(Le(Bt))return Promise.resolve(void 0);if(Ve){if(Bt.startsWith(""+Ve+l.sep)){var pe=Bt.split(""+Ve+l.sep)[1]||"";if(pe.includes(l.sep)){var ye=""+Ve+l.sep+pe.split(l.sep)[0];return ye&&!st.includes(ye)?(st.push(ye),Promise.resolve(ye)):Promise.resolve(void 0)}return tt.getFromIndex("path",Bt)}return Promise.resolve(void 0)}if(Bt.includes(l.sep)){var wn=Bt.split(l.sep)[0]||"";return wn&&!st.includes(wn)?(st.push(wn),Promise.resolve(wn)):Promise.resolve(void 0)}return tt.getFromIndex("path",Bt)})).then(function(Bt){return Bt.filter(function(pe){return!!pe})})}):Promise.resolve([])},mt}(ht),Xt=function(Pt){function mt(){var Ve=null!==Pt&&Pt.apply(this,arguments)||this;return Ve.memoryFiles=[],Ve}return p(mt,Pt),mt.prototype.isEnable=function(){return!0},mt.prototype.saveFile=function(Ve){var tt=this;return new Promise(function(Rt){tt.memoryFiles.some(function(st,Bt){return st.path===Ve.path&&(tt.memoryFiles.splice(Bt,1,Ve),!0)})||tt.memoryFiles.push(Ve),Rt(!0)})},mt.prototype.removeFile=function(Ve){var tt=this;return new Promise(function(Rt){for(var st=tt.memoryFiles.length-1;st>=0;st--){var Bt=tt.memoryFiles[st];("string"==typeof Ve&&(Bt.path===Ve||Bt.path.startsWith(""+Ve+l.sep))||Ve.path===Bt.path)&&tt.memoryFiles.splice(st,1)}Rt(!0)})},mt.prototype.clear=function(){var Ve=this;return new Promise(function(tt){Ve.memoryFiles=[],tt(!0)})},mt.prototype.findFileByPath=function(Ve){var tt=this;return new Promise(function(Rt){Rt(tt.memoryFiles.filter(function(st){return st.path===Ve})[0])})},mt.prototype.findFileBySourceURL=function(Ve){var tt=this;return new Promise(function(Rt){Rt(tt.memoryFiles.filter(function(st){return st.sourceURL===Ve}))})},mt.prototype.isDirectory=function(Ve){var tt=this;return new Promise(function(Rt){Le(Ve)?Rt(!1):Rt(tt.memoryFiles.some(function(st){return st.path.startsWith(""+Ve+l.sep)}))})},mt.prototype.ls=function(Ve){var tt=this;return new Promise(function(Rt){var st=[];tt.memoryFiles.forEach(function(Bt){if(!De(Bt))if(Ve){if(Bt.path.startsWith(""+Ve+l.sep)){var pe=Bt.path.split(""+Ve+l.sep)[1]||"";if(pe.includes(l.sep)){var ye=""+Ve+l.sep+pe.split(l.sep)[0];return void(ye&&!st.includes(ye)&&st.push(ye))}st.push(Bt)}}else if(Bt.path.includes(l.sep)){var wn=Bt.path.split(l.sep)[0]||"";wn&&!st.includes(wn)&&st.push(wn)}else st.push(Bt)}),Rt(st)})},mt}(ht),un=function(Pt){function mt(Ve){var st,tt=Pt.call(this)||this;return tt.isLocalAvaliable=void 0,tt.isEnable()&&(tt.storageName="resource-manager"+((st=(Ve||{}).nameSpaceId)?"-"+st:"")),tt}return p(mt,Pt),mt.prototype.isEnable=function(){if(void 0!==this.isLocalAvaliable)return this.isLocalAvaliable;try{this.isLocalAvaliable=!0,localStorage.setItem("privateTest","")}catch{this.isLocalAvaliable=!1}return this.isLocalAvaliable},mt.prototype.saveFile=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){var st=tt.getLocalFile();st.some(function(Bt,pe){return Bt.path===Ve.path&&(st.splice(pe,1,Ve),!0)})||st.push(Ve),localStorage.setItem(tt.storageName,JSON.stringify(st)),Rt(!0)}):Promise.resolve(!1)},mt.prototype.getLocalFile=function(){var Ve=localStorage.getItem(this.storageName),tt=[];if(Ve)try{tt=JSON.parse(Ve)||"[]"}catch(Rt){console.log(Rt)}return tt},mt.prototype.removeFile=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){for(var st=tt.getLocalFile(),Bt=st.length-1;Bt>=0;Bt--){var pe=st[Bt];("string"==typeof Ve&&(pe.path===Ve||pe.path.startsWith(""+Ve+l.sep))||Ve.path===pe.path)&&st.splice(Bt,1)}localStorage.setItem(tt.storageName,JSON.stringify(st)),Rt(!0)}):Promise.resolve(!1)},mt.prototype.clear=function(){var Ve=this;return this.isEnable()?new Promise(function(tt){localStorage.removeItem(Ve.storageName),tt(!0)}):Promise.resolve(!1)},mt.prototype.findFileByPath=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){Rt(tt.getLocalFile().filter(function(st){return st.path===Ve})[0])}):Promise.resolve(void 0)},mt.prototype.findFileBySourceURL=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){Rt(tt.getLocalFile().filter(function(st){return st.sourceURL===Ve}))}):Promise.resolve([])},mt.prototype.isDirectory=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){Le(Ve)?Rt(!1):Rt(tt.getLocalFile().some(function(st){return st.path.startsWith(""+Ve+l.sep)}))}):Promise.resolve(!1)},mt.prototype.ls=function(Ve){var tt=this;return this.isEnable()?new Promise(function(Rt){var st=[];tt.getLocalFile().forEach(function(Bt){if(!De(Bt))if(Ve){if(Bt.path.startsWith(""+Ve+l.sep)){var pe=Bt.path.split(""+Ve+l.sep)[1]||"";if(pe.includes(l.sep)){var ye=""+Ve+l.sep+pe.split(l.sep)[0];return void(ye&&!st.includes(ye)&&st.push(ye))}st.push(Bt)}}else if(Bt.path.includes(l.sep)){var wn=Bt.path.split(l.sep)[0]||"";wn&&!st.includes(wn)&&st.push(wn)}else st.push(Bt)}),Rt(st)}):Promise.resolve([])},mt}(ht);(pt=i.FileStoreEnum||(i.FileStoreEnum={})).MEMORY="memoryStore",pt.INDEX_DB="indexedDBStore",pt.STORAGE="storageStore";var Tt=function(Pt){function mt(Ve){var tt=Pt.call(this)||this;return tt.indexedDBStore=new Yt(Ve),tt.memoryStore=new Xt,tt.storageStore=new un(Ve),tt}return p(mt,Pt),mt.prototype.saveFile=function(Ve,tt,Rt){var st=this;void 0===tt&&(tt=!0);var Bt=(Rt||{}).forceSpecifyStore;return(tt?this.findFileByPath(Ve.path,Rt):Promise.resolve(void 0)).then(function(pe){if(pe?.version&&et(Ve,pe.version))throw new Error("there is an higher version file existed already");var ye=v(v({},Ve),{createTime:pe&&pe.createTime||Date.now(),updateTime:Date.now()});return Bt&&st[Bt]&&st[Bt].isEnable()&&(Bt!==i.FileStoreEnum.STORAGE||st.isLocalStorageAvaliable(ye))?st[Bt].saveFile(ye):st[st.saveToTargetStoreRule(ye)].saveFile(ye)})},mt.prototype.isLocalStorageAvaliable=function(Ve){var tt=Ve.data;return"string"===l.getDataFormat(tt)&&tt.length<=102400&&this.storageStore.isEnable()},mt.prototype.saveToTargetStoreRule=function(Ve){return this.indexedDBStore.isEnable()?i.FileStoreEnum.INDEX_DB:this.isLocalStorageAvaliable(Ve)?i.FileStoreEnum.STORAGE:i.FileStoreEnum.MEMORY},mt.prototype.removeFile=function(Ve,tt){var Rt=(tt||{}).forceSpecifyStore;return Rt&&this[Rt]?this[Rt].removeFile(Ve):Promise.all([this.indexedDBStore.removeFile(Ve),this.storageStore.removeFile(Ve),this.memoryStore.removeFile(Ve)]).then(function(){return!0})},mt.prototype.clear=function(Ve){var tt=(Ve||{}).forceSpecifyStore;return tt&&this[tt]?this[tt].clear():Promise.all([this.indexedDBStore.clear(),this.storageStore.clear(),this.memoryStore.clear()]).then(function(){return!0})},mt.prototype.findFileByPath=function(Ve,tt){var Rt=this,st=(tt||{}).forceSpecifyStore;return st&&this[st]?this[st].findFileByPath(Ve):lt(this.searchInTargetStoreRule(),function(Bt,pe){return Bt?Promise.resolve(Bt):Rt[pe].findFileByPath(Ve)})},mt.prototype.findFileBySourceURL=function(Ve,tt){var Rt=this,st=(tt||{}).forceSpecifyStore;return st&&this[st]?this[st].findFileBySourceURL(Ve):lt(this.searchInTargetStoreRule(),function(Bt,pe){return Rt[pe].findFileBySourceURL(Ve).then(function(ye){return Bt?Bt.filter(function(wn){return!ye.some(function(Kr){return Kr.path===wn.path})}).concat(ye||[]):ye||[]})})},mt.prototype.searchInTargetStoreRule=function(){return[i.FileStoreEnum.INDEX_DB,i.FileStoreEnum.STORAGE,i.FileStoreEnum.MEMORY]},mt.prototype.isDirectory=function(Ve){var tt=this;return Ve?lt(this.searchInTargetStoreRule(),function(Rt,st){return Rt?Promise.resolve(!0):tt[st].isDirectory(Ve)}):Promise.resolve(!0)},mt.prototype.ls=function(Ve){var tt=this;return this.isDirectory(Ve).then(function(Rt){if(!Rt)throw new Error("path: "+Ve+" is an invalid directory path");return lt(tt.searchInTargetStoreRule(),function(st,Bt){return tt[Bt].ls(Ve).then(function(pe){return st?(pe||[]).concat(st.filter(function(ye){return!pe.some(function(wn){return"string"==typeof ye?wn===ye:"string"!=typeof wn&&wn.path===ye.path})})):pe})})})},mt}(C),yn=function(Pt){function mt(){return null!==Pt&&Pt.apply(this,arguments)||this}return p(mt,Pt),mt}(C),Kn=function(Pt){function mt(Ve){var tt=Pt.call(this)||this,Rt=Ve||{},st=Rt.storeOptions;return tt.downloadManager=new l.IDownloadManager(Rt.downloadManagerOptions),tt.store=new Tt(st),tt.store.indexedDBStore.on("ready",function(){return tt.emit("ready")}),tt}return p(mt,Pt),mt.prototype.getFile=function(Ve,tt,Rt){var st=this,Bt=new yn,pe=Promise.resolve(void 0),ye=tt||{},wn=ye.downloadOptions,Jo=ye.saveRootPath;ye.forceDownload?pe=Promise.resolve(void 0):"string"==typeof Ve?pe=this.store.findFileByPath(Ve,Rt):Ve?.sourceURL?pe=this.store.findFileBySourceURL(Ve.sourceURL):wn&&(wn.domParams||wn.socketParams||wn.xhrParams)&&(pe=this.store.findFileBySourceURL(this.genSourceURL(wn)));var bu=null,bo=new Promise(function(ps){bu=ps});return Bt.getDownloadTask=function(){return bo},pe=pe.then(function(ps){if(ps&&(!Array.isArray(ps)||ps.length)){var rs=ps;if(Array.isArray(rs)){var se=rs.find(function(Su){return De(Su)});if(!se)return;rs=rs.filter(function(Su){return!De(Su)});var wa=se.data;if("string"!=typeof wa||!JSON.parse(wa||"[]").every(function(Su){return rs.some(function(Ht){return Ht.path===Su})}))return}if(!Rt?.targetVersion||!et(rs,Rt.targetVersion))return Bt.emit("checkExpire",!1),rs;Bt.emit("checkExpire",!0)}}).then(function(ps){if(!ps&&wn){var rs=st.downloadManager.download(wn);return bu(rs),new Promise(function(se,wa){rs.on("complete",function(Su){setTimeout(function(){var Ht=Array.isArray(Su)?Su.map(function(ot){var nn=ot.data,Xn=ot.extName;return{path:st.genFilePath(Jo,ot.path),sourceURL:st.genSourceURL(wn),data:nn,fileFormat:Xn||st.getFileFormat(wn),version:Rt?.targetVersion||1}}):{path:st.genFilePath(Jo,void 0),sourceURL:st.genSourceURL(wn),data:Su,fileFormat:st.getFileFormat(wn),version:Rt?.targetVersion||1};if(Array.isArray(Ht)&&"string"==typeof Ve&&Ve){var kt=Ht.find(function(ot){return ot.path===Ve});se(kt||Ht)}else se(Ht);Bt.emit("beforeSet",Ht),st.beforeWrite(Ht,Rt).then(function(){Bt.emit("afterSet")}).catch(function(ot){return Bt.emit("afterSet",ot)})},0)}),rs.on("abort",wa),rs.on("error",wa),rs.on("timeout",function(){return wa(new Error("download timeout"))})})}return bu(void 0),ps}).catch(function(ps){return bu(void 0),Promise.reject(ps)}),Bt.getResult=function(){return pe},Bt},mt.prototype.genSourceURL=function(Ve){var Rt=Ve.type;if(Rt===l.DownloaderType.SOCKET)return null;var Bt=(Rt===l.DownloaderType.DOM?Ve.domParams:Ve.xhrParams)||{},pe=Bt.url,ye=void 0===pe?"":pe,wn=Bt.body;return wn&&Object.keys(wn).length?ye+(ye.includes("?")?"&":"?")+"downloadBodyParams="+JSON.stringify(wn):ye},mt.prototype.updateFile=function(Ve,tt){return this.saveStore(Ve,!0,tt)},mt.prototype.beforeWrite=function(Ve,tt){var st,Bt,Rt=this;return Array.isArray(Ve)?Promise.all(Ve.concat((st=Ve,Bt=st[0].sourceURL||"",{path:""+Te+Bt,sourceURL:Bt,data:JSON.stringify(st.map(function(pe){return pe.path}))})).map(function(st){return Rt.saveStore(st,!1,tt)})).then(function(st){return st.filter(function(Bt){return!De(Bt)})}):this.saveStore(Ve,!0,tt)},mt.prototype.getFileFormat=function(Ve){var tt=Ve||{},Rt=tt.xhrParams,st=tt.domParams,Bt=tt.socketParams,pe=tt.type;return pe===l.DownloaderType.DOM&&st?.fileFormat?st.fileFormat:pe===l.DownloaderType.SOCKET&&Bt?.fileFormat?Bt.fileFormat:Rt?.fileFormat?Rt.fileFormat:"unknow"},mt.prototype.genFilePath=function(Ve,tt){return tt?""+(Ve||"")+(Ve?l.sep:"")+tt:Ve||""},mt.prototype.saveStore=function(Ve,tt,Rt){return void 0===tt&&(tt=!0),this.store.saveFile(Ve,tt,Rt).then(function(st){if(st)return Ve;throw new Error("fail to save file in local store")})},mt.prototype.remove=function(Ve,tt){return this.store.removeFile(Ve,tt)},mt.prototype.clear=function(Ve){return this.store.clear(Ve)},mt.prototype.list=function(Ve){return this.store.ls(Ve)},mt.prototype.updateVersion=function(Ve,tt){var Rt=this;return this.store.findFileByPath(Ve).then(function(st){if(st)return Rt.saveStore(v(v({},st),{version:tt})).then(function(){});throw new Error("the target path: "+Ve+" isn't existed")})},mt.prototype.updateSourceURL=function(Ve,tt){var Rt=this;return this.store.findFileByPath(Ve).then(function(st){if(st)return Rt.saveStore(v(v({},st),{sourceURL:tt})).then(function(){});throw new Error("the target path: "+Ve+" isn't existed")})},mt}(C);i.IResourceManager=Kn,Object.defineProperty(i,"__esModule",{value:!0})}(WP.exports,hI),nh(WP.exports);const wb=()=>{var i;const l=null===(i=fE())||void 0===i?void 0:i.toLocaleLowerCase();if(l.indexOf("safari")>-1&&-1===l.indexOf("ios-safari")){var u;const p=null===(u=navigator.userAgent.match(/version\/(\d+\.?\d+)/i))||void 0===u?void 0:u[1];return lE(p||"","15.2")>=0}return!1};var zo,ns,Wc;(function(i){i[i.PLAIN=0]="PLAIN",i[i.RSA=1]="RSA"})(zo||(zo={})),function(i){i[i.info=0]="info",i[i.debug=1]="debug",i[i.log=2]="log",i[i.warn=3]="warn",i[i.error=4]="error"}(ns||(ns={})),function(i){i.beforeInit="beforeInit",i.afterInit="afterInit",i.beforeLog="beforeLog",i.hitSizeLimit="hitSizeLimit",i.afterLog="afterLog",i.beforeReport="beforeReport",i.afterReport="afterReport"}(Wc||(Wc={}));class $R{constructor(){}}var RA,pI={exports:{}},XR={exports:{}},KP=AS(Object.freeze({__proto__:null,default:{}}));XR.exports=(RA=RA||function(i,l){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&void 0!==Ea&&Ea.crypto&&(u=Ea.crypto),!u)try{u=KP}catch{}var p=function(){if(u){if("function"==typeof u.getRandomValues)try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof u.randomBytes)try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function oe(){}return function(Ee){var Te;return oe.prototype=Ee,Te=new oe,oe.prototype=null,Te}}(),y={},C=y.lib={},w=C.Base={extend:function(oe){var Ee=v(this);return oe&&Ee.mixIn(oe),Ee.hasOwnProperty("init")&&this.init!==Ee.init||(Ee.init=function(){Ee.$super.init.apply(this,arguments)}),Ee.init.prototype=Ee,Ee.$super=this,Ee},create:function(){var oe=this.extend();return oe.init.apply(oe,arguments),oe},init:function(){},mixIn:function(oe){for(var Ee in oe)oe.hasOwnProperty(Ee)&&(this[Ee]=oe[Ee]);oe.hasOwnProperty("toString")&&(this.toString=oe.toString)},clone:function(){return this.init.prototype.extend(this)}},D=C.WordArray=w.extend({init:function(oe,Ee){oe=this.words=oe||[],this.sigBytes=Ee??4*oe.length},toString:function(oe){return(oe||L).stringify(this)},concat:function(oe){var Ee=this.words,Te=oe.words,De=this.sigBytes,Le=oe.sigBytes;if(this.clamp(),De%4)for(var et=0;et<Le;et++)Ee[De+et>>>2]|=(Te[et>>>2]>>>24-et%4*8&255)<<24-(De+et)%4*8;else for(var pt=0;pt<Le;pt+=4)Ee[De+pt>>>2]=Te[pt>>>2];return this.sigBytes+=Le,this},clamp:function(){var oe=this.words,Ee=this.sigBytes;oe[Ee>>>2]&=4294967295<<32-Ee%4*8,oe.length=i.ceil(Ee/4)},clone:function(){var oe=w.clone.call(this);return oe.words=this.words.slice(0),oe},random:function(oe){for(var Ee=[],Te=0;Te<oe;Te+=4)Ee.push(p());return new D.init(Ee,oe)}}),P=y.enc={},L=P.Hex={stringify:function(oe){for(var Ee=oe.words,Te=oe.sigBytes,De=[],Le=0;Le<Te;Le++){var et=Ee[Le>>>2]>>>24-Le%4*8&255;De.push((et>>>4).toString(16)),De.push((15&et).toString(16))}return De.join("")},parse:function(oe){for(var Ee=oe.length,Te=[],De=0;De<Ee;De+=2)Te[De>>>3]|=parseInt(oe.substr(De,2),16)<<24-De%8*4;return new D.init(Te,Ee/2)}},W=P.Latin1={stringify:function(oe){for(var Ee=oe.words,Te=oe.sigBytes,De=[],Le=0;Le<Te;Le++)De.push(String.fromCharCode(Ee[Le>>>2]>>>24-Le%4*8&255));return De.join("")},parse:function(oe){for(var Ee=oe.length,Te=[],De=0;De<Ee;De++)Te[De>>>2]|=(255&oe.charCodeAt(De))<<24-De%4*8;return new D.init(Te,Ee)}},re=P.Utf8={stringify:function(oe){try{return decodeURIComponent(escape(W.stringify(oe)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(oe){return W.parse(unescape(encodeURIComponent(oe)))}},ee=C.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new D.init,this._nDataBytes=0},_append:function(oe){"string"==typeof oe&&(oe=re.parse(oe)),this._data.concat(oe),this._nDataBytes+=oe.sigBytes},_process:function(oe){var Ee,Te=this._data,De=Te.words,Le=Te.sigBytes,et=this.blockSize,lt=Le/(4*et),pt=(lt=oe?i.ceil(lt):i.max((0|lt)-this._minBufferSize,0))*et,ht=i.min(4*pt,Le);if(pt){for(var gt=0;gt<pt;gt+=et)this._doProcessBlock(De,gt);Ee=De.splice(0,pt),Te.sigBytes-=ht}return new D.init(Ee,ht)},clone:function(){var oe=w.clone.call(this);return oe._data=this._data.clone(),oe},_minBufferSize:0});C.Hasher=ee.extend({cfg:w.extend(),init:function(oe){this.cfg=this.cfg.extend(oe),this.reset()},reset:function(){ee.reset.call(this),this._doReset()},update:function(oe){return this._append(oe),this._process(),this},finalize:function(oe){return oe&&this._append(oe),this._doFinalize()},blockSize:16,_createHelper:function(oe){return function(Ee,Te){return new oe.init(Te).finalize(Ee)}},_createHmacHelper:function(oe){return function(Ee,Te){return new te.HMAC.init(oe,Te).finalize(Ee)}}});var te=y.algo={};return y}(Math),RA),pI.exports=function(i){return i.enc.Utf8}(XR.exports);var pp={exports:{}};pp.exports=function(i){return u=i.lib.WordArray,i.enc.Base64={stringify:function(v){var y=v.words,C=v.sigBytes,w=this._map;v.clamp();for(var D=[],P=0;P<C;P+=3)for(var L=(y[P>>>2]>>>24-P%4*8&255)<<16|(y[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|y[P+2>>>2]>>>24-(P+2)%4*8&255,W=0;W<4&&P+.75*W<C;W++)D.push(w.charAt(L>>>6*(3-W)&63));var re=w.charAt(64);if(re)for(;D.length%4;)D.push(re);return D.join("")},parse:function(v){var y=v.length,C=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var D=0;D<C.length;D++)w[C.charCodeAt(D)]=D}var P=C.charAt(64);if(P){var L=v.indexOf(P);-1!==L&&(y=L)}return function p(v,y,C){for(var w=[],D=0,P=0;P<y;P++)if(P%4){var L=C[v.charCodeAt(P-1)]<<P%4*2|C[v.charCodeAt(P)]>>>6-P%4*2;w[D>>>2]|=L<<24-D%4*8,D++}return u.create(w,D)}(v,y,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64;var u}(XR.exports);var fp=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const ws=i=>{const l=pp.exports.parse(i);return pI.exports.stringify(l)},Id=i=>{for(var l=i.length,u=i.length-1;u>=0;u--){var p=i.charCodeAt(u);p>127&&p<=2047?l++:p>2047&&p<=65535&&(l+=2),p>=56320&&p<=57343&&u--}return l};function zP(i){const l=new ArrayBuffer(i.length),u=new Uint8Array(l);for(let p=0,v=i.length;p<v;p++)u[p]=i.charCodeAt(p);return l}function v_(i){for(var l="",u=new Uint8Array(i),p=u.byteLength,v=0;v<p;v++)l+=String.fromCharCode(u[v]);return window.btoa(l)}const Ah=(i,l,u)=>fp(void 0,void 0,void 0,function*(){return yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:u},l,i)}),wd={},$u=(i,l)=>{wd[l]=i},YP=wd,ZR=i=>{let l=0;return l+=Id(i.message),i.tags.forEach(u=>{l+=Id(u)}),l};class wB{constructor(l){const{databaseName:u,maxSize:p,publicKey:v,reportUrl:y,plugins:C,idbManager:w,logManager:D,currentSize:P}=l;this.databaseName=u,this.maxSize=p,this.publicKey=v??"",this.reportUrl=y??"",this.plugins=C??[],this.idbManager=w,this.logManager=D,this.currentSize=P??0,this.commonMethods=Object.assign({},YP)}updateCurrentSize(l){var u;let p=null!==(u=this.currentSize)&&void 0!==u?u:0;if(l instanceof Map)for(const[v,y]of l)p+=ZR(y);else p+=ZR(l);return this.currentSize=p,p>=this.maxSize}}const Tb=(...i)=>{const l={},u=[];for(const v of i)v.forEach(y=>{l[y.id]||(l[y.id]=!0,u.push(y))});const p=new Map;return u.sort((v,y)=>v?.id-y?.id).forEach(v=>{p.set(v.id,v)}),p},fI=(i,l)=>{const u=new Map;return l.forEach(p=>{i(p)&&u.set(p.id,p)}),u};class qP{constructor(){this.getStore=()=>({byTag:Object.assign({},this.store.byTag),byTime:new Map(this.store.byTime)}),this.pushByTime=l=>{for(const u of l)this.store.byTime.set(u.id,u)},this.pushByTag=l=>{l.forEach(u=>{const p=u.tags;Array.isArray(p)&&p.forEach(v=>{this.store.byTag[v]||(this.store.byTag[v]=new Map),this.store.byTag[v].set(u.id,u)})})},this.addLog=l=>{let u=l;Array.isArray(l)||(u=[l]),this.pushByTime(u),this.pushByTag(u)},this.syncFromIDB=l=>{return u=this,void 0,y=function*(){const u=yield l.getAllLogs();this.addLog(u)},new((v=void 0)||(v=Promise))(function(C,w){function D(W){try{L(y.next(W))}catch(re){w(re)}}function P(W){try{L(y.throw(W))}catch(re){w(re)}}function L(W){var re;W.done?C(W.value):(re=W.value,re instanceof v?re:new v(function(ee){ee(re)})).then(D,P)}L((y=y.apply(u,[])).next())});var u,v,y},this.reset=()=>{this.store={byTag:{},byTime:new Map}},this.deleteLogs=l=>{for(const u of l){const p=this.store.byTime.get(u);if(!p)continue;const{tags:v}=p;for(const y of v)this.store.byTag[y].delete(u);this.store.byTime.delete(u)}},this.filterStore=l=>{const u=((v,y)=>{if(!y)return v.byTime;if("string"==typeof y)return v.byTag[y]||new Map;if(Array.isArray(y)){if(y.every(C=>"string"==typeof C))return Tb(...y.map(C=>v.byTag[C]).filter(C=>Boolean(C)))}else{if("function"==typeof y)return fI(y,v.byTime);if("object"==typeof y)if(y.tags&&y.filter){if("string"==typeof y.tags)return fI(y.filter,v.byTag[y.tags]);if(Array.isArray(y.tags)&&y.tags.every(C=>"string"==typeof C))return Tb(...y.tags.map(C=>{const w=v.byTag[C];return w?fI(y.filter,w):new Map}))}else{if(y.filter)return fI(y.filter,v.byTime);if(y.tags){if("string"==typeof y)return v.byTag[y]||new Map;if(Array.isArray(y)&&y.every(C=>"string"==typeof C))return Tb(...y.map(C=>v.byTag[C]))}}else console.error("Wrong filter type")}return new Map})(this.store,l),p=new Map;for(const[v,y]of u){const C=Object.assign(Object.assign({},y),{message:ws(y.message)});p.set(v,C)}return p},this.store={byTag:{},byTime:new Map}}}function yh(i,l,u){const p=i.plugins;if(!Array.isArray(p))return u;let v=u;return p.forEach(y=>{const C=y[l];if("function"==typeof C){const w=C(i,v);w&&(v=w)}}),v}const A_=(i,l,u,p,v,y={})=>{return void 0,void 0,P=function*(){const{noCache:C,extraProperties:w={}}=y,D=((L,W,re,ee,te)=>{const oe=Array.isArray(W)?W:[W],Ee=Date.now();return Object.assign({message:L,logLevel:re,tags:oe,encryptMode:ee,timestamp:Ee},te)})(l,u,p,v,w),P=yh(i,Wc.beforeLog,D);if(C)yh(i,Wc.afterLog,D);else{const{idbManager:L,logManager:W}=i,re=yield L.makeNextId();P.message=(te=>{const oe=pI.exports.parse(te);return pp.exports.stringify(oe)})(P.message);const ee=Object.assign(Object.assign({},P),{id:re});i.updateCurrentSize(ee)&&yh(i,Wc.hitSizeLimit,ee),W.addLog(ee),L.addLog(ee),yh(i,Wc.afterLog,ee)}},new((D=void 0)||(D=Promise))(function(L,W){function re(oe){try{te(P.next(oe))}catch(Ee){W(Ee)}}function ee(oe){try{te(P.throw(oe))}catch(Ee){W(Ee)}}function te(oe){var Ee;oe.done?L(oe.value):(Ee=oe.value,Ee instanceof D?Ee:new D(function(Te){Te(Ee)})).then(re,ee)}te((P=P.apply(undefined,[])).next())});var D,P};$u(A_,"commonLog");var JP={},Xu=Uint8Array,gu=Uint16Array,OA=Uint32Array,Rb=new Xu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),y_=new Xu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mI=new Xu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eO=function(i,l){for(var u=new gu(31),p=0;p<31;++p)u[p]=l+=1<<i[p-1];var v=new OA(u[30]);for(p=1;p<30;++p)for(var y=u[p];y<u[p+1];++y)v[y]=y-u[p]<<5|p;return[u,v]},Hr=eO(Rb,2),Zu=Hr[1];Hr[0][28]=258,Zu[258]=28;for(var E_=eO(y_,0)[1],DA=new gu(32768),Ro=0;Ro<32768;++Ro){var Um=(43690&Ro)>>>1|(21845&Ro)<<1;Um=(61680&(Um=(52428&Um)>>>2|(13107&Um)<<2))>>>4|(3855&Um)<<4,DA[Ro]=((65280&Um)>>>8|(255&Um)<<8)>>>1}var lf=function(i,l,u){for(var p=i.length,v=0,y=new gu(l);v<p;++v)i[v]&&++y[i[v]-1];var C,w=new gu(l);for(v=0;v<l;++v)w[v]=w[v-1]+y[v-1]<<1;if(u){C=new gu(1<<l);var D=15-l;for(v=0;v<p;++v)if(i[v])for(var P=v<<4|i[v],L=l-i[v],W=w[i[v]-1]++<<L,re=W|(1<<L)-1;W<=re;++W)C[DA[W]>>>D]=P}else for(C=new gu(p),v=0;v<p;++v)i[v]&&(C[v]=DA[w[i[v]-1]++]>>>15-i[v]);return C},Rc=new Xu(288);for(Ro=0;Ro<144;++Ro)Rc[Ro]=8;for(Ro=144;Ro<256;++Ro)Rc[Ro]=9;for(Ro=256;Ro<280;++Ro)Rc[Ro]=7;for(Ro=280;Ro<288;++Ro)Rc[Ro]=8;var b_=new Xu(32);for(Ro=0;Ro<32;++Ro)b_[Ro]=5;var tO=lf(Rc,9,0);lf(Rc,9,1);var nO=lf(b_,5,0);lf(b_,5,1);var rO=function(i){return(i+7)/8|0},iO=function(i,l,u){(null==l||l<0)&&(l=0),(null==u||u>i.length)&&(u=i.length);var p=new(2==i.BYTES_PER_ELEMENT?gu:4==i.BYTES_PER_ELEMENT?OA:Xu)(u-l);return p.set(i.subarray(l,u)),p},TB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$P=function(i,l,u){var p=new Error(l||TB[i]);if(p.code=i,Error.captureStackTrace&&Error.captureStackTrace(p,$P),!u)throw p;return p},Rl=function(i,l,u){var p=l/8|0;i[p]|=u<<=7&l,i[p+1]|=u>>>8},kA=function(i,l,u){var p=l/8|0;i[p]|=u<<=7&l,i[p+1]|=u>>>8,i[p+2]|=u>>>16},Ob=function(i,l){for(var u=[],p=0;p<i.length;++p)i[p]&&u.push({s:p,f:i[p]});var v=u.length,y=u.slice();if(!v)return[_I,0];if(1==v){var C=new Xu(u[0].s+1);return C[u[0].s]=1,[C,1]}u.sort(function(lt,pt){return lt.f-pt.f}),u.push({s:-1,f:25001});var w=u[0],D=u[1],P=0,L=1,W=2;for(u[0]={s:-1,f:w.f+D.f,l:w,r:D};L!=v-1;)w=u[u[P].f<u[W].f?P++:W++],D=u[P!=L&&u[P].f<u[W].f?P++:W++],u[L++]={s:-1,f:w.f+D.f,l:w,r:D};var re=y[0].s;for(p=1;p<v;++p)y[p].s>re&&(re=y[p].s);var ee=new gu(re+1),te=S_(u[L-1],ee,0);if(te>l){p=0;var oe=0,Ee=te-l,Te=1<<Ee;for(y.sort(function(lt,pt){return ee[pt.s]-ee[lt.s]||lt.f-pt.f});p<v;++p){var De=y[p].s;if(!(ee[De]>l))break;oe+=Te-(1<<te-ee[De]),ee[De]=l}for(oe>>>=Ee;oe>0;){var Le=y[p].s;ee[Le]<l?oe-=1<<l-ee[Le]++-1:++p}for(;p>=0&&oe;--p){var et=y[p].s;ee[et]==l&&(--ee[et],++oe)}te=l}return[new Xu(ee),te]},S_=function(i,l,u){return-1==i.s?Math.max(S_(i.l,l,u+1),S_(i.r,l,u+1)):l[i.s]=u},Db=function(i){for(var l=i.length;l&&!i[--l];);for(var u=new gu(++l),p=0,v=i[0],y=1,C=function(D){u[p++]=D},w=1;w<=l;++w)if(i[w]==v&&w!=l)++y;else{if(!v&&y>2){for(;y>138;y-=138)C(32754);y>2&&(C(y>10?y-11<<5|28690:y-3<<5|12305),y=0)}else if(y>3){for(C(v),--y;y>6;y-=6)C(8304);y>2&&(C(y-3<<5|8208),y=0)}for(;y--;)C(v);y=1,v=i[w]}return[u.subarray(0,p),l]},PA=function(i,l){for(var u=0,p=0;p<l.length;++p)u+=i[p]*l[p];return u},gI=function(i,l,u){var p=u.length,v=rO(l+2);i[v]=255&p,i[v+1]=p>>>8,i[v+2]=255^i[v],i[v+3]=255^i[v+1];for(var y=0;y<p;++y)i[v+y+4]=u[y];return 8*(v+4+p)},oO=function(i,l,u,p,v,y,C,w,D,P,L){Rl(l,L++,u),++v[256];for(var W=Ob(v,15),re=W[0],ee=W[1],te=Ob(y,15),oe=te[0],Ee=te[1],Te=Db(re),De=Te[0],Le=Te[1],et=Db(oe),lt=et[0],pt=et[1],ht=new gu(19),gt=0;gt<De.length;++gt)ht[31&De[gt]]++;for(gt=0;gt<lt.length;++gt)ht[31&lt[gt]]++;for(var Yt=Ob(ht,7),Xt=Yt[0],un=Yt[1],Tt=19;Tt>4&&!Xt[mI[Tt-1]];--Tt);var yn,Kn,Pt,mt,Ve=P+5<<3,tt=PA(v,Rc)+PA(y,b_)+C,Rt=PA(v,re)+PA(y,oe)+C+14+3*Tt+PA(ht,Xt)+(2*ht[16]+3*ht[17]+7*ht[18]);if(Ve<=tt&&Ve<=Rt)return gI(l,L,i.subarray(D,D+P));if(Rl(l,L,1+(Rt<tt)),L+=2,Rt<tt){yn=lf(re,ee,0),Kn=re,Pt=lf(oe,Ee,0),mt=oe;var st=lf(Xt,un,0);for(Rl(l,L,Le-257),Rl(l,L+5,pt-1),Rl(l,L+10,Tt-4),L+=14,gt=0;gt<Tt;++gt)Rl(l,L+3*gt,Xt[mI[gt]]);L+=3*Tt;for(var Bt=[De,lt],pe=0;pe<2;++pe){var ye=Bt[pe];for(gt=0;gt<ye.length;++gt){var wn=31&ye[gt];Rl(l,L,st[wn]),L+=Xt[wn],wn>15&&(Rl(l,L,ye[gt]>>>5&127),L+=ye[gt]>>>12)}}}else yn=tO,Kn=Rc,Pt=nO,mt=b_;for(gt=0;gt<w;++gt)if(p[gt]>255){kA(l,L,yn[257+(wn=p[gt]>>>18&31)]),L+=Kn[wn+257],wn>7&&(Rl(l,L,p[gt]>>>23&31),L+=Rb[wn]);var Kr=31&p[gt];kA(l,L,Pt[Kr]),L+=mt[Kr],Kr>3&&(kA(l,L,p[gt]>>>5&8191),L+=y_[Kr])}else kA(l,L,yn[p[gt]]),L+=Kn[p[gt]];return kA(l,L,yn[256]),L+Kn[256]},XP=new OA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_I=new Xu(0),ZP=function(i,l,u,p,v,y){var C=i.length,w=new Xu(p+C+5*(1+Math.ceil(C/7e3))+v),D=w.subarray(p,w.length-v),P=0;if(!l||C<8)for(var L=0;L<=C;L+=65535){var W=L+65535;W>=C&&(D[P>>3]=y),P=gI(D,P+1,i.subarray(L,W))}else{for(var re=XP[l-1],ee=re>>>13,te=8191&re,oe=(1<<u)-1,Ee=new gu(32768),Te=new gu(oe+1),De=Math.ceil(u/3),Le=2*De,et=function(wa){return(i[wa]^i[wa+1]<<De^i[wa+2]<<Le)&oe},lt=new OA(25e3),pt=new gu(288),ht=new gu(32),gt=0,Yt=0,Xt=(L=0,0),un=0,Tt=0;L<C;++L){var yn=et(L),Kn=32767&L,Pt=Te[yn];if(Ee[Kn]=Pt,Te[yn]=Kn,un<=L){var mt=C-L;if((gt>7e3||Xt>24576)&&mt>423){P=oO(i,D,0,lt,pt,ht,Yt,Xt,Tt,L-Tt,P),Xt=gt=Yt=0,Tt=L;for(var Ve=0;Ve<286;++Ve)pt[Ve]=0;for(Ve=0;Ve<30;++Ve)ht[Ve]=0}var tt=2,Rt=0,st=te,Bt=Kn-Pt&32767;if(mt>2&&yn==et(L-Bt))for(var pe=Math.min(ee,mt)-1,ye=Math.min(32767,L),wn=Math.min(258,mt);Bt<=ye&&--st&&Kn!=Pt;){if(i[L+tt]==i[L+tt-Bt]){for(var Kr=0;Kr<wn&&i[L+Kr]==i[L+Kr-Bt];++Kr);if(Kr>tt){if(tt=Kr,Rt=Bt,Kr>pe)break;var Jo=Math.min(Bt,Kr-2),bu=0;for(Ve=0;Ve<Jo;++Ve){var bo=L-Bt+Ve+32768&32767,ps=bo-Ee[bo]+32768&32767;ps>bu&&(bu=ps,Pt=bo)}}}Bt+=(Kn=Pt)-(Pt=Ee[Kn])+32768&32767}if(Rt){lt[Xt++]=268435456|Zu[tt]<<18|E_[Rt];var rs=31&Zu[tt],se=31&E_[Rt];Yt+=Rb[rs]+y_[se],++pt[257+rs],++ht[se],un=L+tt,++gt}else lt[Xt++]=i[L],++pt[i[L]]}}P=oO(i,D,y,lt,pt,ht,Yt,Xt,Tt,L-Tt,P),!y&&7&P&&(P=gI(D,P+1,_I))}return iO(w,0,p+rO(P)+v)},kb=function(){for(var i=new Int32Array(256),l=0;l<256;++l){for(var u=l,p=9;--p;)u=(1&u&&-306674912)^u>>>1;i[l]=u}return i}(),eN=function(){var i=-1;return{p:function(l){for(var u=i,p=0;p<l.length;++p)u=kb[255&u^l[p]]^u>>>8;i=u},d:function(){return~i}}},Vm=function(i,l,u,p,v){return ZP(i,l.level??6,null==l.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+l.mem,u,p,!v)},Pb=function(i,l,u){for(var p=i(),v=i.toString(),y=v.slice(v.indexOf("[")+1,v.lastIndexOf("]")).replace(/\s+/g,"").split(","),C=0;C<p.length;++C){var w=p[C],D=y[C];if("function"==typeof w){l+=";"+D+"=";var P=w.toString();if(w.prototype)if(-1!=P.indexOf("[native code]")){var L=P.indexOf(" ",8)+1;l+=P.slice(L,P.indexOf("(",L))}else for(var W in l+=P,w.prototype)l+=";"+D+".prototype."+W+"="+w.prototype[W].toString();else l+=P}else u[D]=w}return[l,u]},Nb=[],vI=function(){return[Xu,gu,OA,Rb,y_,mI,Zu,E_,tO,Rc,nO,b_,DA,XP,_I,lf,Rl,kA,Ob,S_,Db,PA,gI,oO,rO,iO,ZP,Vm,xb,NA]},tN=function(){return[MA,Mb,df,eN,kb]},NA=function(i){return postMessage(i,[i.buffer])},df=function(i,l,u){for(;u;++l)i[l]=u,u>>>=8},MA=function(i,l){var u=l.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=l.level<2?4:9==l.level?2:0,i[9]=3,0!=l.mtime&&df(i,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),u){i[3]=8;for(var p=0;p<=u.length;++p)i[p+10]=u.charCodeAt(p)}},Mb=function(i){return 10+(i.filename&&i.filename.length+1||0)};function xb(i,l){return Vm(i,l||{},0,0)}function sO(i,l,u){return u||(u=l,l={}),"function"!=typeof u&&$P(7),p=i,v=l,D=u,(P=function(L,W,re,ee){var te;if(!Nb[2]){for(var oe="",Ee={},Te=L.length-1,De=0;De<Te;++De)oe=(te=Pb(L[De],oe,Ee))[0],Ee=te[1];Nb[2]=Pb(L[Te],oe,Ee)}var et,pt,ht,gt,Yt,Le=function(et,lt){var pt={};for(var ht in et)pt[ht]=et[ht];for(var ht in lt)pt[ht]=lt[ht];return pt}({},Nb[2][1]);return et=Nb[2][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+function(L){return NA(hf(L.data[0],L.data[1]))}.toString()+"}",2,pt=Le,ht=function(et){var lt=[];for(var pt in et)et[pt].buffer&&lt.push((et[pt]=new et[pt].constructor(et[pt])).buffer);return lt}(Le),gt=function(L,W){P.terminate(),D(L,W)},(Yt=new Worker(JP[2]||(JP[2]=URL.createObjectURL(new Blob([et+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))))).onmessage=function(Xt){var un=Xt.data,Tt=un.$e$;if(Tt){var yn=new Error(Tt[0]);yn.code=Tt[1],yn.stack=Tt[2],gt(yn,null)}else gt(null,un)},Yt.postMessage(pt,ht),Yt}([vI,tN,function(){return[hf]}])).postMessage([p,v],v.consume?[p.buffer]:[]),function(){P.terminate()};var p,v,D,P}function hf(i,l){l||(l={});var u=eN(),p=i.length;u.p(i);var v=Vm(i,l,Mb(l),8),y=v.length;return MA(v,l),df(v,y-8,u.d()),df(v,y-4,p),v}var nN=typeof TextEncoder<"u"&&new TextEncoder,rN=typeof TextDecoder<"u"&&new TextDecoder;try{rN.decode(_I,{stream:!0})}catch{}var Td=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const Lb=(i,l=2)=>{let u=`${i}`;for(;u.length<l;)u=`0${u}`;return u},_u=i=>{const l=new Date(i);return`${l.getUTCFullYear()}-${Lb(l.getUTCMonth()+1)}-${Lb(l.getUTCDate())} ${Lb(l.getUTCHours())}:${Lb(l.getUTCMinutes())}:${Lb(l.getUTCSeconds())}.${Lb(l.getUTCMilliseconds(),3)}`},iN=(i,l)=>{const{message:u,logLevel:p,tags:v,timestamp:y}=i,D=function(L,W){var re={};for(var ee in L)Object.prototype.hasOwnProperty.call(L,ee)&&W.indexOf(ee)<0&&(re[ee]=L[ee]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var te=0;for(ee=Object.getOwnPropertySymbols(L);te<ee.length;te++)W.indexOf(ee[te])<0&&Object.prototype.propertyIsEnumerable.call(L,ee[te])&&(re[ee[te]]=L[ee[te]])}return re}(i,["message","logLevel","tags","timestamp","encryptMode","id"]),P=Object.assign(Object.assign({time:_u(y),logLevel:ns[p],message:u,tags:v},l),D);return JSON.stringify(P)},AI=(i,l,u)=>{let p="",v=0;const y=new Map,C=new Map,w=Boolean(l.gzip)?393216:131072;for(const[D,P]of i){const L=iN(P,u),W=Id(L);v+W<w?(v+=W,p+=L,p+="\n",y.set(P.id,P)):C.set(P.id,P)}return{reportItems:y,nextReportItems:C,report:{messages:p}}},aO=(i,l,u={})=>Td(void 0,void 0,void 0,function*(){const p=i.logManager.filterStore(l);let v=i.publicKey;const{xhrOptions:y={},reportMaker:C,additionalContext:w,gzip:D,encrypt:P,publicKey:L}=u;if(L&&(v=L),P&&!v)throw new Error("Cannot encrypt report without key");let W=((te,oe,Ee,Te)=>{const De=[];let Le;do{const et=oe(Le||te,Ee,Te),{nextReportItems:lt}=et;De.push(et),Le=lt}while(Boolean(Le)&&Boolean(Le?.size));return De})(yh(i,Wc.beforeReport,p),C??AI,u,w);if(D){const te=(re=!P,oe=>Td(void 0,void 0,void 0,function*(){let Ee=yield(De=oe.report.messages,new Promise((Le,et)=>{sO(function(pt,ht){var gt;if(nN)return nN.encode(pt);var Yt=pt.length,Xt=new Xu(pt.length+(pt.length>>1)),un=0,Tt=function(Pt){Xt[un++]=Pt};for(gt=0;gt<Yt;++gt){if(un+5>Xt.length){var yn=new Xu(un+8+(Yt-gt<<1));yn.set(Xt),Xt=yn}var Kn=pt.charCodeAt(gt);Kn<128?Tt(Kn):Kn<2048?(Tt(192|Kn>>6),Tt(128|63&Kn)):Kn>55295&&Kn<57344?(Tt(240|(Kn=65536+(1047552&Kn)|1023&pt.charCodeAt(++gt))>>18),Tt(128|Kn>>12&63),Tt(128|Kn>>6&63),Tt(128|63&Kn)):(Tt(224|Kn>>12),Tt(128|Kn>>6&63),Tt(128|63&Kn))}return iO(Xt,0,un)}(De),{consume:!0},(pt,ht)=>{pt&&et(pt),Le(ht)})}));var De;re&&(Ee=v_(Ee));const Te=Object.assign(Object.assign({},oe.report),{messages:Ee});return Object.assign(Object.assign({},oe),{report:Te})}));W=yield Promise.all(W.map(te))}var re,te;P&&(W=yield Promise.all(W.map((te=v,oe=>Td(void 0,void 0,void 0,function*(){const Ee=window.crypto.getRandomValues(new Uint8Array(16)),Te=yield fp(void 0,void 0,void 0,function*(){return yield window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}),De=yield(Le=te,fp(void 0,void 0,void 0,function*(){const gt=Le.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----",""),Yt=zP(window.atob(gt));return yield window.crypto.subtle.importKey("spki",Yt,{name:"RSA-OAEP",hash:"SHA-1"},!0,["encrypt"])}));var Le;const et=yield(gt=Te,fp(void 0,void 0,void 0,function*(){return yield window.crypto.subtle.exportKey("raw",gt)})),lt=yield((gt,Yt)=>{const Xt="string"==typeof gt?zP(gt):gt;return window.crypto.subtle.encrypt({name:"RSA-OAEP"},Yt,Xt)})(et,De),pt=yield((gt,Yt,Xt)=>Td(void 0,void 0,void 0,function*(){return new Promise((un,Tt)=>{requestAnimationFrame(()=>Td(void 0,void 0,void 0,function*(){if("string"==typeof gt){const yn=new TextEncoder,Kn=yield Ah(yn.encode(gt),Yt,Xt);un(Kn)}else{const yn=yield Ah(gt,Yt,Xt);un(yn)}}))})}))(oe.report.messages,Te,Ee),ht=Object.assign(Object.assign({},oe.report),{messages:v_(pt),meta:{key:v_(lt),iv:v_(Ee)}});var gt;return Object.assign(Object.assign({},oe),{report:ht})})))));const ee={success:(te,oe,Ee)=>{yh(i,Wc.afterReport,{report:oe,reportItems:Ee.reportItems,nextReportItems:Ee.nextReportItems})},fail:(te,oe,Ee)=>{yh(i,Wc.afterReport,{report:oe,reportItems:Ee.reportItems,nextReportItems:Ee.nextReportItems,error:te})}};((te,oe,Ee,Te)=>{te.map(De=>Object.assign(Object.assign({url:oe||"",type:"POST",withCredentials:!1,headers:{},data:JSON.stringify(De.report),meta:{reportItems:De.reportItems,nextReportItems:De.nextReportItems}},Ee),Te)).forEach(De=>{(Le=>{const et=new XMLHttpRequest;if(et.open(Le.type||"GET",Le.url,!0),et.withCredentials=Le.withCredentials,et.onreadystatechange=function(){if(4===et.readyState){const lt=et.status;lt>=200&&lt<300?Le.success&&Le.success(et.responseText,Le.data,Le.meta):Le.fail&&Le.fail(`Request failed, status: ${lt}, responseText: ${et.responseText}`,Le.data,Le.meta)}},"POST"===Le.type){if(Le.headers)for(const lt in Le.headers)et.setRequestHeader(lt,Le.headers[lt]);try{et.send(Le.data)}catch(lt){Le.fail&&Le.fail(lt,Le.data,Le.meta)}}})(De)})})(W,i.reportUrl,ee,y)});$u(aO,"commonReport");var RB=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const dr=(i,l,u)=>RB(void 0,void 0,void 0,function*(){const{idbManager:p,logManager:v}=i;if(Array.isArray(u)&&(yield p.deleteLogs(u),v.deleteLogs(u),!l))return;const y=i.logManager.filterStore(l),C=[];for(const[D,P]of y)C.push(P.id);let w=C;Array.isArray(C)||(w=[C]),yield p.deleteLogs(w),v.deleteLogs(w)}),yI=i=>RB(void 0,void 0,void 0,function*(){const{idbManager:l,logManager:u}=i;yield l.reset(),u.reset()});function OB(i,l){return function(u){if(Array.isArray(u))return u}(i)||function(u,p){var v=null==u?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(null!=v){var y,C,w=[],D=!0,P=!1;try{for(v=v.call(u);!(D=(y=v.next()).done)&&(w.push(y.value),!p||w.length!==p);D=!0);}catch(L){P=!0,C=L}finally{try{D||null==v.return||v.return()}finally{if(P)throw C}}return w}}(i,l)||function(u,p){if(u){if("string"==typeof u)return jm(u,p);var v=Object.prototype.toString.call(u).slice(8,-1);return"Object"===v&&u.constructor&&(v=u.constructor.name),"Map"===v||"Set"===v?Array.from(u):"Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?jm(u,p):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jm(i,l){(null==l||l>i.length)&&(l=i.length);for(var u=0,p=new Array(l);u<l;u++)p[u]=i[u];return p}function Ol(i){return new Promise(function(l,u){i.oncomplete=i.onsuccess=function(){return l(i.result)},i.onabort=i.onerror=function(){return u(i.error)}})}function cO(i,l){var u=indexedDB.open(i);u.onupgradeneeded=function(){return u.result.createObjectStore(l)};var p=Ol(u);return function(v,y){return p.then(function(C){return y(C.transaction(l,v).objectStore(l))})}}var xA;function Dl(){return xA||(xA=cO("keyval-store","keyval")),xA}function Oo(i){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dl())("readwrite",function(u){return i.forEach(function(p){return u.delete(p)}),Ol(u.transaction)})}function DB(i,l){return i.openCursor().onsuccess=function(){this.result&&(l(this.result),this.result.continue())},Ol(i.transaction)}$u(dr,"commonDelete"),$u(yI,"commonReset");const EI={default:{queue:[],isRunning:!1,listeners:[]}},pf=i=>{let l=EI[i];return l||(l={queue:[],isRunning:!1,listeners:[]},EI[i]=l),l};function bI(i){return l=this,void 0,v=function*(){const l=pf(i),{queue:u,listeners:p}=l;for(;u.length>0&&!l.isRunning;){const v=u.shift();l.isRunning=!0;try{const y=yield v.task();v.resolution(y)}catch(y){v.rejection(y)}l.isRunning=!1,bI(i)}p.length&&p.forEach(v=>{v()})},new((p=void 0)||(p=Promise))(function(y,C){function w(L){try{P(v.next(L))}catch(W){C(W)}}function D(L){try{P(v.throw(L))}catch(W){C(W)}}function P(L){var W;L.done?y(L.value):(W=L.value,W instanceof p?W:new p(function(re){re(W)})).then(w,D)}P((v=v.apply(l,[])).next())});var l,p,v}function Bb(i,l){const u=pf(l);return new Promise((p,v)=>{u.queue.push({task:i,resolution:p,rejection:v}),bI(l)})}const SI=(i,l)=>{pf(i).listeners.push(l)};var el=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const LA="change_meta",CI="change_log",BA=()=>Promise.resolve();class FA{constructor(l){this.waitingForReset=!1,this.isReseting=!1,this.isChangingMeta=!1,this.isChangingLog=!1,this.get=u=>el(this,void 0,void 0,function*(){return yield function(p){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dl())("readonly",function(y){return Ol(y.get(p))})}(u,this.store)}),this.set=(u,p)=>el(this,void 0,void 0,function*(){try{return yield function(v,y){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dl())("readwrite",function(w){return w.put(y,v),Ol(w.transaction)})}(u,p,this.store)}catch(v){v instanceof DOMException&&v&&"QuotaExceededError"===v.name&&(yield this.deleteOldLogsForSetNewOne(),yield this.set(u,p)),console.error(v)}}),this.deleteOldLogsForSetNewOne=()=>el(this,void 0,void 0,function*(){var u;const p=yield this.getAllLogs(),v=[];for(let y=0;y<13;y++){const C=null===(u=p[y])||void 0===u?void 0:u.id;(C||0===C)&&v.push(`${C}`)}Oo(v,this.store)}),this.adjustMaxId=()=>el(this,void 0,void 0,function*(){return this.isReseting?BA():(this.isChangingMeta=!0,yield Bb(()=>el(this,void 0,void 0,function*(){var u;const p=yield this.getAllLogs(),y=null!==(u=p[p.length-1]?.id)&&void 0!==u?u:0;return yield this.set("maxId",y),y}),LA))}),this.makeNextId=()=>el(this,void 0,void 0,function*(){return this.isReseting?BA():(this.isChangingMeta=!0,yield Bb(()=>el(this,void 0,void 0,function*(){const u=yield this.get("maxId");if(!u&&0!==u)return yield this.set("maxId",0),0;const p=u+1;return yield this.set("maxId",p),p}),LA))}),this.addLog=u=>el(this,void 0,void 0,function*(){if(this.isReseting)return BA();this.isChangingLog=!0,yield Bb(()=>el(this,void 0,void 0,function*(){const{id:p}=u;this.set(`${p}`,u)}),CI)}),this.getAllLogs=()=>el(this,void 0,void 0,function*(){return(yield function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dl();return p("readonly",function(v){if(v.getAll&&v.getAllKeys)return Promise.all([Ol(v.getAllKeys()),Ol(v.getAll())]).then(function(C){var w=OB(C,2),P=w[1];return w[0].map(function(L,W){return[L,P[W]]})});var y=[];return p("readonly",function(C){return DB(C,function(w){return y.push([w.key,w.value])}).then(function(){return y})})})}(this.store)).filter(([p,v])=>"maxId"!==p).sort((p,v)=>{var y,C;return(null===(y=p[1])||void 0===y?void 0:y.id)-(null===(C=v[1])||void 0===C?void 0:C.id)}).map(([p,v])=>v)}),this.deleteLogs=u=>el(this,void 0,void 0,function*(){if(this.isReseting)return BA();this.isChangingLog=!0,yield Bb(()=>el(this,void 0,void 0,function*(){Oo(u.map(p=>`${p}`),this.store)}),CI),yield this.adjustMaxId()}),this.reset=()=>el(this,void 0,void 0,function*(){return this.isReseting?BA():(this.waitingForReset=!0,this.isChangingLog||this.isChangingMeta?BA():(this.isReseting=!0,yield function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dl())("readwrite",function(p){return p.clear(),Ol(p.transaction)})}(this.store),this.isReseting=!1,void(this.waitingForReset=!1)))}),this.store=cO(l,l+"-store"),SI(LA,()=>{this.isChangingMeta=!1,this.waitingForReset&&this.reset()}),SI(CI,()=>{this.isChangingLog=!1,this.waitingForReset&&this.reset()})}}var Ts=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const kB={databaseName:"laplace-default-db",maxSize:49283072};let PB=(()=>{class i{constructor(u){this.commonLogWithContext=(v,y,C,w,D)=>Ts(this,void 0,void 0,function*(){yield A_(this.runtimeMetaManager,v,y,C,w,D)}),this.commonReportWithContext=(v,y)=>{aO(this.runtimeMetaManager,v,y)},this.commonDeleteWithContext=v=>{dr(this.runtimeMetaManager,v)},this.resetWithContext=()=>{yI(this.runtimeMetaManager)},this.doNotUseDirtyGetStore=()=>this.runtimeMetaManager.logManager.getStore(),this.log=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.log,zo.PLAIN,{extraProperties:C})}),this.info=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.info,zo.PLAIN,{extraProperties:C})}),this.warn=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.warn,zo.PLAIN,{extraProperties:C})}),this.debug=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.debug,zo.PLAIN,{extraProperties:C})}),this.error=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.error,zo.PLAIN,{extraProperties:C})}),this.logWithEncryption=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.log,zo.RSA,{extraProperties:C})}),this.infoWithEncryption=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.info,zo.RSA,{extraProperties:C})}),this.debugWithEncryption=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.debug,zo.RSA,{extraProperties:C})}),this.warnWithEncryption=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.warn,zo.RSA,{extraProperties:C})}),this.errorWithEncryption=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.error,zo.RSA,{extraProperties:C})}),this.logWithoutCache=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.log,zo.PLAIN,{extraProperties:C,noCache:!0})}),this.infoWithoutCache=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.info,zo.PLAIN,{extraProperties:C,noCache:!0})}),this.warnWithoutCache=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.warn,zo.PLAIN,{extraProperties:C,noCache:!0})}),this.debugWithoutCache=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.debug,zo.PLAIN,{extraProperties:C,noCache:!0})}),this.errorWithoutCache=(v,y,C)=>Ts(this,void 0,void 0,function*(){yield this.commonLogWithContext(v,y,ns.error,zo.PLAIN,{extraProperties:C,noCache:!0})}),this.getLogs=v=>{const y=this.runtimeMetaManager.logManager;return y?y.filterStore(v):new Map},this.reportByHttps=(v,y)=>Ts(this,void 0,void 0,function*(){this.commonReportWithContext(v,y)}),this.deleteLog=v=>Ts(this,void 0,void 0,function*(){this.commonDeleteWithContext(v)}),this.deleteAll=()=>Ts(this,void 0,void 0,function*(){this.resetWithContext()});const{runtimeMetaManager:p}=u;this.runtimeMetaManager=p}}return i.init=l=>Ts(void 0,void 0,void 0,function*(){const{databaseName:u="laplace-default-db"}=l,p=new FA(u),v=new qP,y=new wB(Object.assign(Object.assign(Object.assign({},kB),l),{idbManager:p,logManager:v}));yh(y,Wc.beforeInit),yield v.syncFromIDB(y.idbManager);const C=new i({runtimeMetaManager:y});return yh(y,Wc.afterInit),C}),i})();const Fb=i=>{const l=[];for(const[u,p]of i)l.push(p);return l};class II extends $R{constructor(l){super(),this.config={debug:!1},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log(`[AutoCleanLogPlugin]: ${u}`)},this.afterInit=u=>{const{expireBefore:p}=this.config;if(!p)return void this.debugLog("early return on beforeInit because expireBefore is falsy");const{logManager:v,commonMethods:{commonDelete:y}}=u,C=v.getStore().byTime,w=("function"==typeof p?Fb(C).filter(p):Fb(C).filter(D=>D.timestamp<p)).map(D=>D.id);y(u,void 0,w),this.debugLog(`afterInit, clean log id: ${w}`)},this.afterReport=(u,{reportItems:p,error:C})=>{if(C)return this.debugLog("error"),void console.error(C);const{cleanAfterReport:w}=this.config;if(!w)return void this.debugLog("early return on afterReport because cleanAfterReport is falsy");const{commonMethods:{commonDelete:D}}=u,P=("function"==typeof w?Fb(p).filter(w):Fb(p)).map(L=>L.id);D(u,void 0,P),this.debugLog(`afterReport, clean log id: ${P}`)},l&&(this.config=l)}}let Ub=-1;const ff=i=>{addEventListener("pageshow",l=>{l.persisted&&(Ub=l.timeStamp,i(l))},!0)},wI=()=>window.__WEB_VITALS_POLYFILL__?window.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const i=performance.timing,l=performance.navigation.type,u={entryType:"navigation",startTime:0,type:2==l?"back_forward":1===l?"reload":"navigate"};for(const p in i)"navigationStart"!==p&&"toJSON"!==p&&(u[p]=Math.max(i[p]-i.navigationStart,0));return u})()):window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Vb=()=>{const i=wI();return i&&i.activationStart||0},vu=(i,l)=>{const u=wI();let p="navigate";return Ub>=0?p="back-forward-cache":u&&(p=document.prerendering||Vb()>0?"prerender":document.wasDiscarded?"restore":u.type.replace(/_/g,"-")),{name:i,value:void 0===l?-1:l,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:p}},Qm=(i,l,u)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(i)){const p=new PerformanceObserver(v=>{Promise.resolve().then(()=>{l(v.getEntries())})});return p.observe(Object.assign({type:i,buffered:!0},u||{})),p}}catch{}},uO=(i,l)=>{const u=p=>{"pagehide"!==p.type&&"hidden"!==document.visibilityState||(i(p),l&&(removeEventListener("visibilitychange",u,!0),removeEventListener("pagehide",u,!0)))};addEventListener("visibilitychange",u,!0),addEventListener("pagehide",u,!0)},Eh=(i,l,u,p)=>{let v,y;return C=>{var w,D;l.value>=0&&(C||p)&&(y=l.value-(v||0),(y||void 0===v)&&(v=l.value,l.delta=y,l.rating=(w=l.value)>(D=u)[1]?"poor":w>D[0]?"needs-improvement":"good",i(l)))}},lO=i=>{requestAnimationFrame(()=>requestAnimationFrame(()=>i()))},UA=i=>{document.prerendering?addEventListener("prerenderingchange",()=>i(),!0):i()};let mf=-1;const TI=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,mp=i=>{"hidden"===document.visibilityState&&mf>-1&&(mf="visibilitychange"===i.type?i.timeStamp:0,NB())},RI=()=>{addEventListener("visibilitychange",mp,!0),addEventListener("prerenderingchange",mp,!0)},NB=()=>{removeEventListener("visibilitychange",mp,!0),removeEventListener("prerenderingchange",mp,!0)},dO=()=>(mf<0&&(window.__WEB_VITALS_POLYFILL__?(mf=window.webVitals.firstHiddenTime,mf===1/0&&RI()):(mf=TI(),RI()),ff(()=>{setTimeout(()=>{mf=TI(),RI()},0)})),{get firstHiddenTime(){return mf}}),MB=(i,l)=>{l=l||{},UA(()=>{const u=[1800,3e3],p=dO();let v,y=vu("FCP");const C=Qm("paint",w=>{w.forEach(D=>{"first-contentful-paint"===D.name&&(C.disconnect(),D.startTime<p.firstHiddenTime&&(y.value=Math.max(D.startTime-Vb(),0),y.entries.push(D),v(!0)))})});C&&(v=Eh(i,y,u,l.reportAllChanges),ff(w=>{y=vu("FCP"),v=Eh(i,y,u,l.reportAllChanges),lO(()=>{y.value=performance.now()-w.timeStamp,v(!0)})}))})};let C_,OI,oN,hO;const DI={passive:!0,capture:!0},sN=new Date,jb=(i,l)=>{C_||(C_=l,OI=i,oN=new Date,kI(removeEventListener),aN())},aN=()=>{if(OI>=0&&OI<oN-sN){const i={entryType:"first-input",name:C_.type,target:C_.target,cancelable:C_.cancelable,startTime:C_.timeStamp,processingStart:C_.timeStamp+OI};hO.forEach(function(l){l(i)}),hO=[]}},cN=i=>{if(i.cancelable){const l=(i.timeStamp>1e12?new Date:performance.now())-i.timeStamp;"pointerdown"==i.type?((u,p)=>{const v=()=>{jb(u,p),C()},y=()=>{C()},C=()=>{removeEventListener("pointerup",v,DI),removeEventListener("pointercancel",y,DI)};addEventListener("pointerup",v,DI),addEventListener("pointercancel",y,DI)})(l,i):jb(l,i)}},kI=i=>{["mousedown","keydown","touchstart","pointerdown"].forEach(l=>i(l,cN,DI))},I_={},VA=i=>{document.prerendering?UA(()=>VA(i)):"complete"!==document.readyState?addEventListener("load",()=>VA(i),!0):setTimeout(i,0)};var PI="Expected a function",uN=/^\s+|\s+$/g,NI=/^[-+]0x[0-9a-f]+$/i,lN=/^0b[01]+$/i,dN=/^0o[0-7]+$/i,hN=parseInt,jA="object"==typeof self&&self&&self.Object===Object&&self,pN="object"==typeof Ea&&Ea&&Ea.Object===Object&&Ea||jA||Function("return this")(),fN=Object.prototype.toString,mN=Math.max,gN=Math.min,pO=function(){return pN.Date.now()};function QA(i){var l=typeof i;return!!i&&("object"==l||"function"==l)}function _N(i){if("number"==typeof i)return i;if("symbol"==typeof(p=i)||(v=p)&&"object"==typeof v&&"[object Symbol]"==fN.call(p))return NaN;var p,v;if(QA(i)){var l="function"==typeof i.valueOf?i.valueOf():i;i=QA(l)?l+"":l}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(uN,"");var u=lN.test(i);return u||dN.test(i)?hN(i.slice(2),u?2:8):NI.test(i)?NaN:+i}class LB extends $R{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log("[AutoLogWebVitalsPlugin]:",u)},this.afterInit=u=>{const{autoReport:p,publicTags:v}=this.config,{commonMethods:{commonLog:y,commonReport:C}}=u,w=function(i,l,u){var p=!0,v=!0;if("function"!=typeof i)throw new TypeError(PI);return QA(u)&&(p="leading"in u?!!u.leading:p,v="trailing"in u?!!u.trailing:v),function(y,C,w){var D,P,L,W,re,ee,te=0,oe=!1,Ee=!1,Te=!0;if("function"!=typeof y)throw new TypeError(PI);function De(gt){var Yt=D,Xt=P;return D=P=void 0,te=gt,W=y.apply(Xt,Yt)}function Le(gt){return te=gt,re=setTimeout(lt,C),oe?De(gt):W}function et(gt){var Yt=gt-ee;return void 0===ee||Yt>=C||Yt<0||Ee&&gt-te>=L}function lt(){var Yt,Xt,gt=pO();if(et(gt))return pt(gt);re=setTimeout(lt,(Xt=C-((Yt=gt)-ee),Ee?gN(Xt,L-(Yt-te)):Xt))}function pt(gt){return re=void 0,Te&&D?De(gt):(D=P=void 0,W)}function ht(){var gt=pO(),Yt=et(gt);if(D=arguments,P=this,ee=gt,Yt){if(void 0===re)return Le(ee);if(Ee)return re=setTimeout(lt,C),De(ee)}return void 0===re&&(re=setTimeout(lt,C)),W}return C=_N(C)||0,QA(w)&&(oe=!!w.leading,L=(Ee="maxWait"in w)?mN(_N(w.maxWait)||0,C):L,Te="trailing"in w?!!w.trailing:Te),ht.cancel=function(){void 0!==re&&clearTimeout(re),te=0,D=ee=P=re=void 0},ht.flush=function(){return void 0===re?W:pt(pO())},ht}(i,l,{leading:p,maxWait:l,trailing:v})}(re=>{C(u,re,p).catch(ee=>{y(u,"web vitals auto report failed",["JS_ERROR"],ns.error,zo.PLAIN)})},600),D=Boolean(p),P=re=>ee=>{return te=this,void 0,Te=function*(){const te=JSON.stringify(ee),oe=v?[re,"AUTO-WEB-VITALS",...v]:[re,"AUTO-WEB-VITALS"];this.debugLog(te),D?(yield y(u,te,oe,ns.info,zo.PLAIN),w(re)):y(u,te,oe,ns.info,zo.PLAIN)},new((Ee=void 0)||(Ee=Promise))(function(De,Le){function et(ht){try{pt(Te.next(ht))}catch(gt){Le(gt)}}function lt(ht){try{pt(Te.throw(ht))}catch(gt){Le(gt)}}function pt(ht){var gt;ht.done?De(ht.value):(gt=ht.value,gt instanceof Ee?gt:new Ee(function(Yt){Yt(gt)})).then(et,lt)}pt((Te=Te.apply(te,[])).next())});var te,Ee,Te};var L,W,re,ee;L=P("CLS"),W=W||{},UA(()=>{const re=[.1,.25];let ee,te=vu("CLS"),oe=-1,Ee=0,Te=[];const De=lt=>{oe>-1&&L(lt)},Le=lt=>{lt.forEach(pt=>{if(!pt.hadRecentInput){const ht=Te[0],gt=Te[Te.length-1];Ee&&pt.startTime-gt.startTime<1e3&&pt.startTime-ht.startTime<5e3?(Ee+=pt.value,Te.push(pt)):(Ee=pt.value,Te=[pt]),Ee>te.value&&(te.value=Ee,te.entries=Te,ee())}})},et=Qm("layout-shift",Le);et&&(ee=Eh(De,te,re,W.reportAllChanges),MB(lt=>{oe=lt.value,te.value<0&&(te.value=0,ee())}),uO(()=>{Le(et.takeRecords()),ee(!0)}),ff(()=>{Ee=0,oe=-1,te=vu("CLS",0),ee=Eh(De,te,re,W.reportAllChanges),lO(()=>ee())}))}),re=P("FID"),ee=ee||{},UA(()=>{const te=[100,300],oe=dO();let Ee,Te=vu("FID");const De=lt=>{lt.startTime<oe.firstHiddenTime&&(Te.value=lt.processingStart-lt.startTime,Te.entries.push(lt),Ee(!0))},Le=lt=>{lt.forEach(De)},et=Qm("first-input",Le);Ee=Eh(re,Te,te,ee.reportAllChanges),et&&uO(()=>{Le(et.takeRecords()),et.disconnect()},!0),window.__WEB_VITALS_POLYFILL__?(console.warn('The web-vitals "base+polyfill" build is deprecated. See: https://bit.ly/3aqzsGm'),et||window.webVitals.firstInputPolyfill(De),ff(()=>{Te=vu("FID"),Ee=Eh(re,Te,te,ee.reportAllChanges),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(De)})):et&&ff(()=>{Te=vu("FID"),Ee=Eh(re,Te,te,ee.reportAllChanges),hO=[],OI=-1,C_=null,kI(addEventListener),hO.push(De),aN()})}),((re,ee)=>{ee=ee||{},UA(()=>{const te=[2500,4e3],oe=dO();let Ee,Te=vu("LCP");const De=et=>{const lt=et[et.length-1];if(lt){const pt=Math.max(lt.startTime-Vb(),0);pt<oe.firstHiddenTime&&(Te.value=pt,Te.entries=[lt],Ee())}},Le=Qm("largest-contentful-paint",De);if(Le){Ee=Eh(re,Te,te,ee.reportAllChanges);const et=()=>{I_[Te.id]||(De(Le.takeRecords()),Le.disconnect(),I_[Te.id]=!0,Ee(!0))};["keydown","click"].forEach(lt=>{addEventListener(lt,et,{once:!0,capture:!0})}),uO(et,!0),ff(lt=>{Te=vu("LCP"),Ee=Eh(re,Te,te,ee.reportAllChanges),lO(()=>{Te.value=performance.now()-lt.timeStamp,I_[Te.id]=!0,Ee(!0)})})}})})(P("LCP")),((re,ee)=>{ee=ee||{};const te=[800,1800];let oe=vu("TTFB"),Ee=Eh(re,oe,te,ee.reportAllChanges);VA(()=>{const Te=wI();if(Te){const De=Te.responseStart;if(De<=0||De>performance.now())return;oe.value=Math.max(De-Vb(),0),oe.entries=[Te],Ee(!0),ff(()=>{oe=vu("TTFB",0),Ee=Eh(re,oe,te,ee.reportAllChanges),Ee(!0)})}})})(P("TTFB")),MB(P("FCP"))},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}var fO=function(i,l,u,p){return new(u||(u=Promise))(function(v,y){function C(P){try{D(p.next(P))}catch(L){y(L)}}function w(P){try{D(p.throw(P))}catch(L){y(L)}}function D(P){var L;P.done?v(P.value):(L=P.value,L instanceof u?L:new u(function(W){W(L)})).then(C,w)}D((p=p.apply(i,l||[])).next())})};const vN=["RESOURCE_ERROR","JS_ERROR","UNHANDLED_PROMISE_REJECTION"];class AN extends $R{constructor(l){super(),this.config={debug:!1,publicTags:[]},this.addPublicTags=u=>{const{publicTags:p}=this.config;return p?[...u,...p]:u},this.debugLog=u=>{const{debug:p}=this.config;p&&console.log("[AutoLogErrorPlugin]:",u)},this.ignore=u=>{var p,v,y;return!(null===(p=this.config)||void 0===p||!p.ignoredErrorMsgKeywords)&&u&&!(null!==(y=null===(v=this.config)||void 0===v?void 0:v.ignoredErrorMsgKeywords)&&void 0!==y&&y.find(C=>u?.includes(C)))},this.afterInit=u=>{if(!window.addEventListener)return;const{commonMethods:{commonLog:p,commonReport:v}}=u,{autoReport:y}=this.config;let C;const w=()=>{y&&(C&&clearTimeout(C),C=setTimeout(()=>{v(u,vN,y).catch(D=>{p(u,"auto log error plugin report failed",this.addPublicTags(["JS_ERROR"]),ns.error,zo.PLAIN)}),this.debugLog(`report with option: ${JSON.stringify(y)}`)},600))};try{self.addEventListener("error",D=>fO(this,void 0,void 0,function*(){var P,L,W,re,ee,te,oe;if(!this.ignore(D?.message))if(D?.target&&((null===(P=D?.target)||void 0===P?void 0:P.src)||(null===(L=D?.target)||void 0===L?void 0:L.href))){const Ee=`Load Resource Error in ${null===(W=D?.target)||void 0===W?void 0:W.tagName} element: ${(null===(re=D?.target)||void 0===re?void 0:re.src)||(null===(ee=D?.target)||void 0===ee?void 0:ee.href)}`;yield p(u,Ee,this.addPublicTags(["RESOURCE_ERROR"]),ns.error,zo.PLAIN),w(),this.debugLog(Ee)}else{const Ee=`Javascript Runtime Error in ${D?.filename} (${D?.lineno}:${D?.colno}): ${D?.message}\nStack: ${null!==(oe=null===(te=D?.error)||void 0===te?void 0:te.stack)&&void 0!==oe?oe:D?.stack}`;yield p(u,Ee,this.addPublicTags(["JS_ERROR"]),ns.error,zo.PLAIN),w(),this.debugLog(D)}})),self.addEventListener("unhandledrejection",D=>fO(this,void 0,void 0,function*(){var P;if(this.ignore(null===(P=D?.reason)||void 0===P?void 0:P.message))return;let L="";const{reason:W}=D;L="string"==typeof W?`Promise Error: ${W}`:"object"==typeof W?`Promise Error with reason: ${JSON.stringify(W)}`:`Promise Error with unrecognized reason: ${W}`,yield p(u,L,this.addPublicTags(["UNHANDLED_PROMISE_REJECTION"]),ns.error,zo.PLAIN),w(),this.debugLog(D)}))}catch(D){console.error(D)}this.debugLog("afterInit, add listener")},l&&(this.config=l),l?.publicTags&&!Array.isArray(l?.publicTags)&&(this.config.publicTags=[l?.publicTags])}}const EN="ZM-VSDK-LOG",HA=`${EN}-DATABASE`,xI=`${EN}-TRACKING-IDS`,LI="/pwa/webclient";let mO,BI,qs,Au,kl;(function(i){i[i.PLAIN=0]="PLAIN",i[i.RSA=1]="RSA",i[i.AESGCM256=2]="AESGCM256"})(mO||(mO={})),function(i){i[i.info=0]="info",i[i.debug=1]="debug",i[i.log=2]="log",i[i.warn=3]="warn",i[i.error=4]="error"}(BI||(BI={})),function(i){i.AudioEncodeSuccess="audio encode success",i.AudioDecodeSuccess="audio decode success",i.AudioEncodeFailed="audio encode failed",i.AudioDecodeFailed="audio decode failed",i.StartAudio="start audio",i.StartAudioSuccess="start audio success",i.StartAudioFailed="start audio failed",i.StopAudio="stop audio",i.StopAudioSuccess="stop audio success",i.StopAudioFailed="stop audio failed",i.MuteAudioSuccess="mute audio success",i.MuteAudioFailed="mute audio failed",i.UnmuteAudioSuccess="unmute audio success",i.UnmuteAudioFailed="unmute audio failed",i.DeviceAudioStreamCaptured="device audio stream captured",i.AudioCapturedForbidden="audio captured forbidden",i.AudioWorkerWebsocketBroken="audio worker websocket broken",i.AudioCaptureZeroData="audio capture zero data, auto failover",i.AudioJoinComplete="audio join complete",i.AudioLeaveComplete="audio leave complete",i.SharingAudioStartComplete="sharing audio start complete",i.SharingAudioStopComplete="sharing audio stop complete",i.AudioBridgeReconnectStart="audio bridge reconnect start",i.AudioBridgeReconnectEnd="audio bridge reconnect end",i.SharingAudio="sharing audio",i.PauseSharingAudio="pause sharing audio",i.StopSharingAudio="stop sharing audio",i.MuteSharingAudioSuccess="mute sharing audio success",i.MuteSharingAudioFailed="mute sharing audio failed",i.UnmuteSharingAudioSuccess="unmute sharing audio success",i.UnmuteSharingAudioFailed="unmute sharing audio failed"}(qs||(qs={})),function(i){i.VideoEncodeSuccess="video encode success",i.VideoDecodeSuccess="video decode success",i.VideoEncodeFailed="video encode failed",i.VideoDecodeFailed="video decode failed",i.StartVideo="start video",i.StartVideoSuccess="start video success",i.StartVideoFailed="start video failed",i.StopVideo="stop video",i.StopVideoSuccess="stop video success",i.StopVideoFailed="stop video failed",i.VBSettingSuccess="video VB setting success",i.VBSettingFailed="init video VB failed",i.VBPreloadSuccess="preload video VB success",i.VBPreloading3S="preload video VB 3s",i.VBPreloading10S="preload video VB 10s",i.UserForbiddedCaptureVideo="user forbidded capture video"}(Au||(Au={})),function(i){i.SharingEncodeSuccess="sharing encode success",i.SharingDecodeSuccess="sharing decode success",i.SharingEncodeFailed="sharing encode failed",i.SharingDecodeFailed="sharing decode failed",i.StartSharingScreen="start sharing screen",i.StartSharingScreenSuccess="start sharing screen success",i.StartSharingScreenFailed="start sharing screen failed",i.StopSharingScreen="stop sharing screen",i.StopSharingScreenSuccess="stop sharing screen success",i.StopSharingScreenFailed="stop sharing screen failed",i.PauseSharingScreen="pause sharing screen",i.PauseSharingScreenSuccess="pause sharing screen success",i.PauseSharingScreenFailed="pause sharing screen failed",i.ResumeSharingScreen="resume sharing screen",i.ResumeSharingScreenSuccess="resume sharing screen success",i.ResumeSharingScreenFailed="resume sharing screen failed"}(kl||(kl={}));var BB=Object.freeze({__proto__:null,MAXIMUM_MAX_SIZE:49283072,DATABASE_NAME:HA,LOCALSTORAGE_KEYS:xI,LOG_GATEWAY_API_ROUTE:LI,get LogEncryptMode(){return mO},get LogLevel(){return BI},get AudioLog(){return qs},get VideoLog(){return Au},get SharingLog(){return kl}});const GA=(i,l)=>[...i,...l].filter(u=>!!u),Qb=i=>`{E}${i}{/E}`;let Hb=(()=>{class i{static getInstance(){return this.agentInstance||(this.agentInstance=new i),this.agentInstance}constructor(){this.laplace=void 0,this.trackingId=void 0,this.logConfig=void 0,this.reportUrl=void 0,this.makeReportUrl=()=>{var u;const{gatewayEndPoint:p}=null!==(u=this.logConfig)&&void 0!==u?u:{};return p?p+LI:""},this.initConfig=u=>{let p={enable:!1,enableReport:!1,gatewayEndPoint:"",logLevel:{debug:!1,log:!1,info:!1,print:!1,warn:!1,error:!1},performanceReportRatio:.25,trackingCount:7};try{u.logConfig&&(p=JSON.parse(u.logConfig))}catch{console.error("parse log config error")}const v=p;this.logConfig=v,this.reportUrl=this.makeReportUrl();const y=u.logEncryptionPubKey,C=(new Date).getTime()-6048e5,w=v.enableReport&&this.reportUrl?{gzip:!0,encrypt:!0}:void 0,D=["VideoSDK"],P=[new II({debug:!1,cleanAfterReport:!0,expireBefore:C}),new LB({autoReport:w,publicTags:D}),new AN({autoReport:w,publicTags:D})];return{laplaceConfig:{databaseName:HA,maxSize:49283072,publicKey:y,reportUrl:this.reportUrl,plugins:P},logConfig:v}},this.handleInitLaplaceSuccess=(u,p)=>{var v,y;this.laplace=u;const C=JSON.parse(null!==(v=ni.get(xI))&&void 0!==v?v:"[]");(null===(y=C.length>=p?.trackingCount)||void 0===y||y)&&C.shift();const w={};C.forEach(D=>{w[D]=!0}),u.deleteLog(D=>{var P;return!(null!==(P=D.tags)&&void 0!==P&&P.some(L=>w[L]))}),C.push(this.trackingId),ni.set(xI,JSON.stringify(C),mi.SessionStorage)},this.init=u=>{const{laplaceConfig:p,logConfig:v}=this.initConfig(u);return v.enable?PB.init(p).then(y=>{this.handleInitLaplaceSuccess(y,v)}).catch(y=>{throw{type:rp,reason:"Logger init failed.",error:y}}):Promise.reject({type:Hn,reason:"Logger feature is not enabled."})},this.check=u=>{var p,v;return!(!this.checkLaplace()||(null===(p=this.logConfig)||void 0===p||null===(v=p.logLevel)||void 0===v||!v[u])&&(console.warn(`Logger ${u} is not enabled.`),1))},this.log=(u,p,v)=>{if(this.check("log"))try{var y;return null===(y=this.laplace.logWithEncryption(u,GA(p,v)))||void 0===y?void 0:y.catch(()=>{})}catch{return}},this.warn=(u,p,v)=>{if(this.check("warn"))try{var y;return null===(y=this.laplace.warnWithEncryption(u,GA(p,v)))||void 0===y?void 0:y.catch(()=>{})}catch{return}},this.info=(u,p,v)=>{if(this.check("info"))try{var y;return null===(y=this.laplace.infoWithEncryption(u,GA(p,v)))||void 0===y?void 0:y.catch(()=>{})}catch{return}},this.debug=(u,p,v)=>{if(this.check("debug"))try{var y;return null===(y=this.laplace.debugWithEncryption(u,GA(p,v)))||void 0===y?void 0:y.catch(()=>{})}catch{return}},this.error=(u,p,v)=>{if(this.check("error"))try{var y;return null===(y=this.laplace.errorWithEncryption(u,GA(p,v)))||void 0===y?void 0:y.catch(()=>{})}catch{return}},this.checkLaplace=()=>{var u;return!(null===(u=this.laplace)||void 0===u||!u.log)},this.makeLogger=u=>{const v=GA([this.trackingId],u);return{log:(y,C)=>this.log(y,v,C??[]),warn:(y,C)=>this.warn(y,v,C??[]),info:(y,C)=>this.info(y,v,C??[]),debug:(y,C)=>this.debug(y,v,C??[]),error:(y,C)=>this.error(y,v,C??[])}},this.reportToGlobalTracing=(u,p)=>{var v;if(!this.checkLaplace())return Promise.reject({type:Hn,reason:"Logger has not been enabled or initialized."});if(null===(v=this.logConfig)||void 0===v||!v.enableReport||!this.reportUrl)return Promise.reject({type:Hn,reason:"Please use getLogs to obtain log data and report by yourself."});const y=u.getState(),{meeting:{meetingNumber:C,userId:w,userEmail:D,userName:P}}=y;return this.laplace.reportByHttps(p,{gzip:!0,encrypt:!0,xhrOptions:{url:this.reportUrl},additionalContext:{meetingNumber:Qb(C),trackingId:this.trackingId,userId:Qb(w),userEmail:Qb(D),userName:Qb(P)}})},this.getLogs=(u,p)=>{if(!this.checkLaplace())return console.warn("Logger has not been enabled or initialized."),[];const v=u.getState(),{meeting:{meetingNumber:y,userId:C,userEmail:w,userName:D}}=v,P={meetingNumber:y,userId:C,userEmail:w,userName:D},L=this.laplace.getLogs(p),W=[];for(const[,re]of L)W.push(cn(cn({},re),P));return W},this.doNotUseDirtyGetStore=()=>this.checkLaplace()?this.laplace.doNotUseDirtyGetStore():(console.warn("Logger has not been enabled or initialized."),{byTag:{},byTime:new Map}),this.trackingId=bA()}loggerHelper(u){const p=this.makeLogger(u);return(v,y,C)=>v.then(w=>(p.info(y),w)).catch(w=>{throw p.error(JSON.stringify(cn(cn({},w),{},{from:C}))),w})}}return i.agentInstance=void 0,i})();const FI=Hb.getInstance();function tl(i){return function(l,u,p){const v=p.value;p.value=function(){for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];if(FI.checkLaplace())try{var D;const P=null!==(D=i.split("_")[1])&&void 0!==D?D:"";let L="";P.indexOf("audio")>-1?L="Audio":P.indexOf("video")>-1?L="Video":P.indexOf("sharing")>-1&&(L="Sharing");const W=FI.loggerHelper([L,`${L.toLocaleUpperCase()} CAPTURE FLOW`]),re=BB[`${L}Log`],ee=i.replace(/_/g,"-").split("-").map(te=>te.replace(/^\S/,oe=>oe.toLocaleUpperCase())).join("");return W(v.apply(this,C),re[`${ee}Success`],re[`${ee}Failed`])}catch{}return v.apply(this,C)}}}const gO=Hb.getInstance(),Gb=gO.makeLogger(["Audio","AUDIO JOIN FLOW"]),WA=gO.makeLogger(["Video","VIDEO JOIN FLOW"]),Wb=gO.makeLogger(["Sharing","SHARING JOIN FLOW"]),Kb=function(i){switch(i){case 22:Gb.info(qs.StartAudio);break;case 21:Gb.info(qs.StopAudio);break;case 72:Gb.info(qs.SharingAudio);break;case 73:for(var l=arguments.length,u=new Array(l>1?l-1:0),p=1;p<l;p++)u[p-1]=arguments[p];Gb.info(null!=u&&u[0]?qs.PauseSharingAudio:qs.StopSharingAudio);break;case 3:WA.info(Au.StartVideo);break;case 4:WA.info(Au.StopVideo);break;case 30:Wb.info(kl.StartSharingScreen);break;case 31:Wb.info(kl.StopSharingScreen);break;case 32:Wb.info(kl.PauseSharingScreen);break;case 33:Wb.info(kl.ResumeSharingScreen)}};function gp(i){const l={joinComputerAudio:22,leaveComputerAudio:21,joinSharingAudio:72,leaveSharingAudio:73,startCaptureVideo:3,stopCaptureVideo:4,startDesktopSharing:30,stopDesktopSharing:31,pauseDesktopSharing:32,resumeDesktopSharing:33};return new Proxy(i,{get:(u,p)=>"string"==typeof p&&l[p]?function(){for(var v=arguments.length,y=new Array(v),C=0;C<v;C++)y[C]=arguments[C];try{Reflect.apply(Kb,void 0,[l[p],...y])}catch{}return Reflect.apply(Reflect.get(u,p),u,y)}:Reflect.get(u,p)})}const gf=Hb.getInstance(),Pl=gf.makeLogger(["Audio"]),bh=gf.makeLogger(["Video"]);function Hm(i,l,u){return bi(i,l).pipe(sr(u),Qr(qt))}const{InitSuccessVideo:bN,InitSuccessAudio:UI,InitSuccessSharing:VI,InitFailedVideo:vo,InitFailedAudio:w_,InitFailedSharing:_O}=Jn;var vO=Object.freeze({__proto__:null,handleLoggerMeetingOptionEpic:(i,l)=>i.pipe(fi(`${Cv}`),$n(()=>{const{meeting:{logConfig:u,logEncryptionPubKey:p}}=l.value;return gf.init({logConfig:u,logEncryptionPubKey:p}).catch(()=>null),qt})),connectedMediaStreamForLogEpic:i=>bi(i,[bN,UI,VI,vo,w_,_O]).pipe(sr(l=>{const{payload:{type:u,data:p}}=l,v=gf.makeLogger(["Audio","AUDIO INIT FLOW"]),y=gf.makeLogger(["Video","VIDEO INIT FLOW"]),C=gf.makeLogger(["Sharing","SHARING INIT FLOW"]);u===UI||u===w_?p===es.EncodeSuccess?v.info(qs.AudioEncodeSuccess):p===es.DecodeSuccess?v.info(qs.AudioDecodeSuccess):p===es.EncodeFailed?v.info(qs.AudioEncodeFailed):p===es.DecodeFailed&&v.info(qs.AudioDecodeFailed):u===bN||u===vo?p===es.EncodeSuccess?y.info(Au.VideoEncodeSuccess):p===es.DecodeSuccess?y.info(Au.VideoDecodeSuccess):p===es.EncodeFailed?y.info(Au.VideoEncodeFailed):p===es.DecodeFailed&&y.info(Au.VideoDecodeFailed):u!==VI&&u!==_O||(p===es.EncodeSuccess?C.info(kl.SharingEncodeSuccess):p===es.DecodeSuccess?C.info(kl.SharingDecodeSuccess):p===es.EncodeFailed?C.info(kl.SharingEncodeFailed):p===es.DecodeFailed?C.info(kl.SharingDecodeFailed):u===VI&&void 0===p&&C.info(kl.SharingDecodeSuccess))}),Qr(qt)),handleAudioBridgeReconnectForLogEpic:i=>Hm(i,Jn.AudioBridgeReconnectStart,()=>{Pl.warn(qs.AudioBridgeReconnectStart,["AUDIO JOIN FLOW"])}),handleAudioBridgeReconnectSuccessForLogEpic:i=>Hm(i,Jn.AudioBridgeReconnectEnd,()=>{Pl.info(qs.AudioBridgeReconnectEnd,["AUDIO JOIN FLOW"])}),handleUserGrantAudioCaptureForLogEpic:i=>Hm(i,Jn.UserGrantCaptureAudio,()=>{Pl.info(qs.DeviceAudioStreamCaptured,["AUDIO CAPTURE FLOW"])}),handleUserForbiddenMicrophoneForLogEpic:i=>Hm(i,Jn.UserForbiddedCaptureAudio,()=>{Pl.error(qs.AudioCapturedForbidden,["AUDIO CAPTURE FLOW"])}),handleAudioSocketErrorForLogEpic:i=>Hm(i,Jn.AudioWebsocketBroken,()=>{Pl.error(qs.AudioWorkerWebsocketBroken,["AUDIO INIT FLOW"])}),handleAudioZeroDataForLogEpic:(i,l)=>bi(i,Jn.AudioZeroData).pipe(Un(l),bd(u=>{let[,p]=u;const{audio:{webrtcRestartCount:v}}=p;v<3&&Pl.error(qs.AudioCaptureZeroData,["AUDIO JOIN FLOW"])})),handleAudioActionCompleteForLogEpic:i=>Hm(i,[Jn.JoinComputerAudioComplete,Jn.JoinSharingAudioComplete,Jn.LeaveComputerAudioComplete,Jn.LeaveSharingAudioComplete],l=>{switch(l.payload.type){case Jn.JoinComputerAudioComplete:Pl.info(qs.AudioJoinComplete,["AUDIO JOIN FLOW"]);break;case Jn.LeaveComputerAudioComplete:Pl.info(qs.AudioLeaveComplete,["AUDIO JOIN FLOW"]);break;case Jn.JoinSharingAudioComplete:Pl.info(qs.SharingAudioStartComplete,["AUDIO SHARING FLOW"]);break;case Jn.LeaveSharingAudioComplete:Pl.info(qs.SharingAudioStopComplete,["AUDIO SHARING FLOW"])}}),handleForbiddenCaptureVideoForLogEpic:i=>Hm(i,Jn.UserForbiddedCaptureVideo,()=>{bh.error(Au.UserForbiddedCaptureVideo,["VIDEO CAPTURE FLOW"])}),handleVBPreloadForLogEpic:i=>bi(i,[Jn.VbModelPreloadingOk,Jn.VbModelPreloading_3S,Jn.VbModelPreloading_10S,Jn.VbSettingParaError]).pipe($n(l=>{const{payload:{type:u}}=l;if([Jn.VbModelPreloadingOk,Jn.VbModelPreloading_3S,Jn.VbModelPreloading_10S].includes(u))switch(u){case Jn.VbModelPreloadingOk:bh.info(Au.VBPreloadSuccess,["VIDEO VB FLOW"]);break;case Jn.VbModelPreloading_3S:bh.info(Au.VBPreloading3S,["VIDEO VB FLOW"]);break;case Jn.VbModelPreloading_10S:bh.info(Au.VBPreloading10S,["VIDEO VB FLOW"])}else u===Jn.VbSettingParaError&&bh.error(Au.VBSettingFailed,["VIDEO VB FLOW"]);return qt})),handleVBSettingSuccessForLogEpic:i=>Hm(i,Jn.StartVideoStreamInVbSettingSuccess,()=>{bh.info(Au.VBSettingSuccess,["VIDEO VB FLOW"])})});const Us=Symbol("store"),lr=Symbol("getState"),Oc=Symbol("dispatch"),jI=Symbol("additionFeatures"),Wn=Symbol("mediaContext");class Gm{constructor(l){this[Us]=void 0,this[Oc]=void 0,this[lr]=void 0,this[jI]=void 0,this[Us]=l,this[Oc]=l.dispatch,this[lr]=l.getState}}const AO=Hb.getInstance(),QI=Ms(vO),Wm=Wo.createAgent(),nl=gp(kR(ji.getInstance())),yO=i=>!i.muted;var SN=Object.freeze({__proto__:null,audioAsnsEpic:(i,l)=>ar(i,12033).pipe(Un(l),_t(u=>{let[p,v]=u;const{participants:{attendeesList:y,allowTalkAttendeesList:C}}=v,w=p.payload.body,D={};return w&&([...y,...C].forEach(P=>{for(let L=1;L<=3;L++){const W=`asn${L}`,{userId:re,displayName:ee}=P;if(void 0!==w[W]&&re===w[W]){D[W]={userId:re,displayName:ee};break}}}),vt(VE,Object.values(D))),mC(D)})),unmuteConsentAfterSpotlighted:(i,l)=>ar(i,16135).pipe(Un(l),sr(u=>{let[p,v]=u;const{payload:{body:{id:y,bLeadershipOn:C}}}=p,{audio:{bCanUnmute:w}}=v,D=ii(v);if(D){const{isHost:P,bCoHost:L,userId:W,audio:re,muted:ee}=D,te=P||L;C&&TS(W,y)&&(null!==re&&""!==re&&!0!==ee||!te&&!w||vt(Fv,RE.Spotlight))}}),Qr(qt)),unmuteConsentEpic:(i,l)=>ar(i,12037).pipe(Un(l),sr(u=>{let[,p]=u;const v=ii(p);null!==v?.audio&&""!==v?.audio&&1==v?.muted&&vt(Fv,RE.Unmute)}),Qr(qt)),setAudioAttributeEpic:(i,l)=>ar(i,tc).pipe(kn(u=>u.payload.body&&["bCanUnmute","bMutedAll","bMutedUponEntry"].some(p=>void 0!==u.payload.body[p])),bd(u=>{if(void 0!==u.payload.body.bCanUnmute)return nP(u.payload.body.bCanUnmute);if(void 0!==u.payload.body.bMutedAll){const p=ii(l.value);if(("computer"===p?.audio||"phone"===p?.audio)&&0==p.muted)return Jv(u.payload.body.bMutedAll)}return void 0!==u.payload.body.bMutedUponEntry?Xv(u.payload.body.bMutedUponEntry):void 0})),currentUserAudioChangeEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[,p]=u;return p.socket.zoomSocketStatus===Co.Connected}),$n(u=>{let[p,v]=u;if(p.payload.body.update&&p.payload.body.update.some(y=>void 0!==y.audio||void 0!==y.muted)){const y=v.meeting.userId,C=p.payload.body.update,[w,D]=fl(Mn(C),Te=>Te.id===y);D.subscribe(Te=>{vt($2,Te)});const{audio:{isActiveOperation:P,isMutedAll:L,isSpeakerOnly:W,isAllowToTalk:re,isShareAudioEnabled:ee,isSharingAudio:te}}=v;let oe=ii(v);!oe&&p.payload.body.add&&p.payload.body.add.length>0&&(oe=p.payload.body.add.find(Te=>Te.id===y),oe&&(oe.userRole=oe.role));const Ee=Fa(oe.userRole);return w.pipe(sr(function(){var Te=F(function*(De){var Le,et,lt,pt;if(De.audio!==(null===(Le=oe)||void 0===Le?void 0:Le.audio))if(""===De.audio)vt(Hg);else if("computer"===De.audio){const gt=Ee&&!re||W;te&&vt(YS),gt&&vt(YS)}else if("phone"===De.audio){var ht;"computer"===(null===(ht=oe)||void 0===ht?void 0:ht.audio)&&(yield nl.leaveComputerAudio(),Wm.joinOrLeaveVoip(!1)),vt(jE)}null!==(et=oe)&&void 0!==et&&et.audio&&""!==(null===(lt=oe)||void 0===lt?void 0:lt.audio)&&De.muted!==(null===(pt=oe)||void 0===pt?void 0:pt.muted)&&(!0===De.muted?(vt(qS,{source:P?K.MutedSource.Active:L?K.MutedSource.PassiveByMuteAll:K.MutedSource.PassiveByMuteOne}),ee||nl.muteAudio()):!1===De.muted&&(vt(J2,{source:P?"active":"passive"}),nl.unmuteAudio()))});return function(De){return Te.apply(this,arguments)}}()),kn(Te=>{var De,Le;return""!==(null===(De=oe)||void 0===De?void 0:De.audio)&&Te.muted!==(null===(Le=oe)||void 0===Le?void 0:Le.muted)}),Qr(or(Wu(!1),Jv(!1))))}return qt})),handleDialOutEpic:(i,l)=>ar(i,8198).pipe(Un(l),kn(u=>{let[p,v]=u;return p.payload.seq==v.audio.dialout.sequence}),sr(u=>{let[p]=u;const v=p.payload.body.result;vt(JS,{code:v}),v===K.DialoutState.Success?vt($S):-1===[K.DialoutState.Calling,K.DialoutState.Ringing,K.DialoutState.Accepted,K.DialoutState.Success].indexOf(v)&&vt(XS)}),_t(u=>{let[p]=u;return BT(p.payload.body.result)})),handleDialouCancelEpic:i=>ar(i,8198).pipe(kn(l=>{var u;return[K.DialoutState.Canceling,K.DialoutState.Canceled,K.DialoutState.CancelFailed].includes(null===(u=l.payload.body)||void 0===u?void 0:u.result)}),sr(l=>{var u;const p=null===(u=l.payload.body)||void 0===u?void 0:u.result;vt(JS,{code:p}),p===K.DialoutState.Canceled?vt(ZS):p===K.DialoutState.CancelFailed&&vt(ST)}),_t(l=>BT(l.payload.body.result))),handleAllowToTalkEpic:(i,l)=>ar(i,12036).pipe(Un(l),$n(u=>{let[p,v]=u;const y=ii(v),{media:{audioEncodeStatus:C}}=v,{promoterID:w,bAllowTalk:D}=p.payload.body;if(y?.userId===w){if(vt(tC,D),D){let P=or(!0);return"success"!==C&&(nl.enableAudioEncode(),P=id(zs(cu,1).pipe(Go(!0)),zs(kE,1).pipe(Go(!1)))),P.pipe($n(L=>(L&&vt(Fv,RE.AllowToTalk),qt)),Yh(FT(!0)))}if(Wm.mute(w,!0),"computer"===y?.audio)return nl.leaveComputerAudio(),yc(300).pipe(sr(F(function*(){(wb()?id(qa(document,"click").pipe(Ns(1)),qa(document,"touchend").pipe(Ns(1))).toPromise():Promise.resolve(!0)).then(()=>{__(nl,v,!1)})})),Qr(qt),Yh(FT(!1)))}return qt})),handleAllowToTalkResponseEpic:i=>ar(i,8205).pipe(sr(l=>{vt("AUDIO_ALLOW_TO_TALK_RESPONSE",l.payload.body)}),Qr(qt)),handleAttendeePromoteDepromote:(i,l)=>sh(i,24597).pipe(Un(l),sr(u=>{let[p,v]=u;const y=ii(v);"phone"===y?.audio&&Wm.audioDrop(y.userId)}),Qr(qt)),setAudioSSRCEpic:(i,l)=>ar(i,12035).pipe(Un(l),$n(u=>{let[p,v]=u;const{meeting:{currentUserAudioBeforeReset:y},media:{audioDecodeStatus:C,audioEncodeStatus:w}}=v,{payload:{body:{ssrc:D}}}=p,P=Dm(l).pipe($n(L=>{if("computer"===y&&(null==L||!L.audio)){const W=Fa(L.userRole);return mu("audio",W?"success":w,C).pipe(kn(re=>{let[ee,te]=re;return ee&&te}),sr(()=>{(wb()?id(qa(document,"click").pipe(Ns(1)),qa(document,"touchend").pipe(Ns(1))).toPromise():Promise.resolve(!0)).then(()=>{Wm.joinOrLeaveVoip(!0),__(nl,l.value)});const{audio:{locallyMutedAudioList:re,localUserAudioVolumeList:ee}}=l.value;re.length>0&&re.forEach(te=>{nl.muteOrUnmuteOtherAudio(te,!0)}),ee.length>0&&ee.forEach(te=>{nl.adjustOtherAudioVolume(te.userId,te.volume)})}),Go(OS(void 0)))}return qt}));return Ss(or($v(D)),P)})),handleMergeAudioEpic:(i,l)=>ar(i,7952).pipe(io(u=>zs(jE,1).pipe(Un(l),sr(p=>{let[,v]=p;const{BindStatus:y,nOperatorUserId:C}=u.payload.body,w=v.participants.attendeesList.find(D=>D.userId===C);!0===y&&vt(lu,{operatorName:w?.displayName,operatorUserId:C,operatorRole:w?.userRole})})))),handleUserGrantAudioCaptureEpic:(i,l)=>bi(i,Jn.UserGrantCaptureAudio).pipe(Un(l),$n(u=>{let[,p]=u;vt(YS);const v=ii(p),{meeting:{isCurrentUserMutedBeforeReset:y},audio:{bMutedUponEntry:C,isUserGrantCaptureAudio:w,isAllowToTalk:D}}=p,P=[gC(!0)];if(v){!0===v.muted&&!1===D&&Wm.mute(v.userId,!0);const L=w||v.isHost||D;(!0===y||!L&&C)&&(Wm.mute(v.userId,!0),y&&P.push(ui(void 0)))}return Mn(P)})),handleUserForbiddenMicrophoneEpic:i=>bi(i,Jn.UserForbiddedCaptureAudio).pipe(sr(()=>{vt(Ls)}),Go(Zv(!0))),handleAudioSocketErrorEpic:i=>bi(i,Jn.AudioWebsocketBroken).pipe(sr(()=>{vt(QE)}),Qr(qt)),handleAudioZeroDataEpic:(i,l)=>bi(i,Jn.AudioZeroData).pipe(Un(l),bd(u=>{let[,p]=u;const{audio:{webrtcRestartCount:v,activeMicrophone:y}}=p;if(v<3)return nl.restoreWebRTC(y),UT(v+1)})),handleAutoPlayEpic:(i,l)=>i.pipe(fi(`${_C}`),kn(u=>!1===u.payload),$n(()=>(vt(CT),id(qa(document,"click").pipe(Ns(1)),qa(document,"touchend").pipe(Ns(1))).pipe(sr(()=>{Wm.joinOrLeaveVoip(!0),__(nl,l.value)}),Go(_C(!0)))))),handleAudioActionCompleteEpic:i=>bi(i,[Jn.JoinComputerAudioComplete,Jn.JoinSharingAudioComplete,Jn.LeaveComputerAudioComplete,Jn.LeaveSharingAudioComplete]).pipe(sr(()=>{DP.completeAudioAction()}),Qr(qt)),handleAudioQosDataEpic:(i,l)=>bi(i,Jn.audioQosData).pipe(Un(l),_t(u=>{let[p,v]=u;const{meeting:{isWebinar:y},media:{audioEncodeStatus:C,audioDecodeStatus:w},participants:{xmppAttendeeList:D,allowTalkAttendeesList:P}}=v,L=ii(v),W=Fs(v);let re=W.length>0,ee=W.some(yO);y&&(re=re||Boolean(D.length),ee=ee||P.some(yO));const oe=("computer"===L?.audio||"phone"===L?.audio)&&w&&re&&ee;return p.payload.data.encoding?"computer"!==L?.audio&&"phone"!==L?.audio||!C||null!=L&&L.muted||!re?eo(jS):(vt(IT,p.payload),eo(p.payload)):oe?(vt(IT,p.payload),AC(p.payload)):AC(jS)})),handleResetLocalMuteStateAfterUserLeaveEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[p,v]=u;const{payload:{body:y}}=p,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:w}}=v;return(C.length>0||w.length>0)&&y?.remove&&y.remove.length>0}),$n(u=>{let[p,v]=u;const{payload:{body:{remove:y}}}=p,{audio:{locallyMutedAudioList:C,localUserAudioVolumeList:w}}=v,D=C.concat(w.map(P=>P.userId)).filter(P=>-1!==y.indexOf(L=>L.id===P));return D.length>0?(D.forEach(P=>{nl.muteOrUnmuteOtherAudio(P,!1)}),Mn(D.map(P=>[yC(P),aP({userId:P})]).flat())):qt}))});const T_=Wo.createAgent(),Km=gp(kR(ji.getInstance()));var FB=Object.freeze({__proto__:null,handleAddLocalShareAudioUserEpic:(i,l)=>xs(i,Mo).pipe(kn(u=>{const p=u.payload.body.update;return p&&p.length>0&&p.findIndex(v=>void 0!==v.bShareOn)>-1}),Un(l),$n(u=>{let[p,v]=u;const{payload:{body:{update:y}}}=p,{audio:{localShareAudioUserMutedList:C}}=v,w=y.filter(P=>!0===P.bShareOn&&!0===P.bShareAudioOn),D=[];return w.length>0&&w.forEach(P=>{-1===C.findIndex(L=>L.userId===P.id)&&D.push(oP({userId:P.id,isFromMainSession:!!P.bShareToBORooms}))}),Mn(D)})),handleShareWithAudioEpic:(i,l)=>bi(i,Jn.SharingDesktopStreamHaveAudio).pipe(io(()=>ar(i,Mo).pipe(kn(u=>{var p;const{payload:{body:v}}=u,{meeting:{userId:y}}=l.value;return(null==v||null===(p=v.update)||void 0===p?void 0:p.findIndex(C=>C.id===y&&!0===C.bShareOn))>-1}),Ns(1),hA(F(function*(){const u=l.value;return yield JR(Km,T_,u)})),Yh(XE(!0))))),handleMediaSDKLeaveShareAudioEpic:(i,l)=>bi(i,Jn.SharingDesktopStreamHaveNoAudio).pipe(Un(l),kn(u=>{var p;let[,v]=u;return!0===(null===(p=v.audio)||void 0===p?void 0:p.isShareAudioEnabled)}),hA(function(){var u=F(function*(p){let[,v]=p;return yield YR(Km,T_,v)});return function(p){return u.apply(this,arguments)}}())),handleJoinComputerAudioAfterShareAudioEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[,p]=u;return p.socket.zoomSocketStatus===Co.Connected&&!0===p.audio.isSharingAudio}),$n(u=>{var p;let[v,y]=u;if(null!==(p=v.payload.body.update)&&void 0!==p&&p.some(C=>void 0!==C.audio||void 0!==C.muted)){const{meeting:{userId:C}}=y,w=v.payload.body.update.filter(D=>D.id===C);return Dm(l).pipe($n(D=>{const P=[];return w.findIndex(L=>"computer"===L.audio)>-1&&"computer"!==D?.audio&&(P.push(ef(!0)),P.push($g(!0))),Mn(P)}))}return qt})),handleShareAudioWithCurrentShareStatusChangeEpic:(i,l)=>i.pipe(fi(`${Ku}`),Gt(nd),Un(l),kn(u=>{var p;let[,v]=u;return!0===(null===(p=v.audio)||void 0===p?void 0:p.isShareAudioEnabled)}),hA(function(){var u=F(function*(p){let[v,y]=p;const{payload:C}=v,{audio:{isShareAudioMuted:w,isSharingAudio:D}}=y,P=[];if(C===K.ShareStatus.End){const L=yield YR(Km,T_,y);P.push(...L)}else if(C===K.ShareStatus.Paused){if(!1===w&&!0===D){yield Km.leaveSharingAudio(!0),P.push(op(!1));const L=yield zR(Km,T_,y);P.push(...L),setTimeout(()=>{vt(dm,{state:"off"})},0)}}else if(C===K.ShareStatus.Sharing&&!1===w&&!1===D){const L=yield JR(Km,T_,y);P.push(...L)}return P});return function(p){return u.apply(this,arguments)}}()))});const HI=Wo.createAgent(),EO=ji.getInstance();var UB=Object.freeze({__proto__:null,handleAudioBridgeTokenEpic:i=>ar(i,4299).pipe(sr(l=>{const{payload:u}=l;EO.passThroughRWGMessage(u)}),Qr(qt)),handleAudioBridgeReconnectEpic:i=>bi(i,Jn.AudioBridgeReconnectStart).pipe(sr(()=>{HI.joinOrLeaveVoip(!1)}),Qr(qt)),handleAudioBridgeReconnectSuccessEpic:i=>bi(i,Jn.AudioBridgeReconnectEnd).pipe(sr(()=>{HI.joinOrLeaveVoip(!0)}),Qr(qt)),handleSendNodeAudioStatusEpic:i=>ar(i,Mo).pipe(kn(l=>{var u,p;return km()&&((null===(u=l.payload.body.update)||void 0===u?void 0:u.some(v=>void 0!==v.muted))||(null===(p=l.payload.body.remove)||void 0===p?void 0:p.length)>0)}),sr(l=>{const{payload:{body:{update:u,remove:p}}}=l;EO.sendUserAudioStatus({update:(u||[]).filter(v=>void 0!==v.muted).map(v=>({userId:v.id,muted:v.muted})),remove:(p||[]).map(v=>({userId:v.id}))})}),Qr(qt)),handleAudioBridgeFailoverEpic:i=>bi(i,Jn.NotifyUIFailover).pipe(_t(()=>(vt(Fc,{reason:Ws.Failover}),Ca(xa.NotifyUiFailover))))});const zb={asnIds:{asn1:{userId:0,displayName:null},asn2:{userId:0,displayName:null},asn3:{userId:0,displayName:null}},microphoneDevicesList:[],speakerDevicesList:[],activeMicrophone:"default",activeSpeaker:"default",isMicrophoneForbidden:!1,audioSsrc:0,bCanUnmute:!1,bMutedUponEntry:!1,isAllowToTalk:void 0,dialout:{sequence:0,returnCode:-1},canPlayAudio:!1,isActiveOperation:!1,isMutedAll:!1,isUserGrantCaptureAudio:!1,webrtcRestartCount:0,isComputerAudioLoading:!1,isSpeakerOnly:!1,localShareAudioUserMutedList:[],locallyMutedAudioList:[],localUserAudioVolumeList:[],statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0}}},bO=Fr({[`${mC}`]:It((i,l)=>{let{payload:u}=l;i.asnIds=cn({},u)}),[`${nP}`]:It((i,l)=>{let{payload:u}=l;i.bCanUnmute=u}),[`${rP}`]:It((i,l)=>{let{payload:u}=l;const{dialout:p}=i;p.sequence=u}),[`${BT}`]:It((i,l)=>{let{payload:u}=l;const{dialout:p}=i;p.returnCode=u}),[`${FT}`]:It((i,l)=>{let{payload:u}=l;i.isAllowToTalk=u,i.isAllowToTalkAttendeeConnected=!1}),[`${Wu}`]:It((i,l)=>{let{payload:u}=l;i.isActiveOperation=u}),[`${Jv}`]:It((i,l)=>{let{payload:u}=l;i.isMutedAll=u}),[`${$v}`]:It((i,l)=>{let{payload:u}=l;i.audioSsrc=u}),[`${Xv}`]:It((i,l)=>{let{payload:u}=l;i.bMutedUponEntry=u}),[`${gC}`]:It((i,l)=>{let{payload:u}=l;i.isUserGrantCaptureAudio=u}),[`${Zv}`]:It((i,l)=>{let{payload:u}=l;i.isMicrophoneForbidden=u}),[`${UT}`]:It((i,l)=>{let{payload:u}=l;i.webrtcRestartCount=u}),[`${VT}`]:It((i,l)=>{let{payload:u}=l;i.microphoneDevicesList=u}),[`${iB}`]:It((i,l)=>{let{payload:u}=l;i.speakerDevicesList=u}),[`${eA}`]:It((i,l)=>{let{payload:u}=l;i.activeMicrophone=u}),[`${$E}`]:It((i,l)=>{let{payload:u}=l;i.activeSpeaker=u}),[`${_C}`]:It((i,l)=>{let{payload:u}=l;i.canPlayAudio=u}),[`${oB}`]:(i,l)=>{let{dialout:{returnCode:u},locallyMutedAudioList:p,localUserAudioVolumeList:v}=i,{payload:y}=l;return y?cn(cn({},zb),{},{dialout:cn(cn({},zb.dialout),{},{returnCode:u}),locallyMutedAudioList:p,localUserAudioVolumeList:v}):cn({},zb)},[`${ym}`]:It((i,l)=>{let{payload:u}=l;i.isComputerAudioLoading=u}),[`${iP}`]:It((i,l)=>{let{payload:u}=l;i.isSpeakerOnly=u}),[`${jT}`]:It((i,l)=>{let{payload:u}=l;i.isAllowToTalkAttendeeConnected=u}),[`${$g}`]:It((i,l)=>{let{payload:u}=l;i.mutedBeforeSharingAudio=u}),[`${op}`]:It((i,l)=>{let{payload:u}=l;i.isSharingAudio=u}),[`${tA}`]:It((i,l)=>{let{payload:u}=l;i.isShareAudioMuted=u}),[`${oP}`]:It((i,l)=>{let{payload:u}=l;const{userId:p,isFromMainSession:v}=u;-1===i.localShareAudioUserMutedList.findIndex(y=>y.userId===p)&&i.localShareAudioUserMutedList.push({userId:p,isFromMainSession:v,muted:!1})}),[`${vC}`]:It((i,l)=>{let{payload:u}=l;const p=i.localShareAudioUserMutedList.find(v=>v.userId===u.userId);p&&(p.muted=u.muted)}),[`${ef}`]:It((i,l)=>{let{payload:u}=l;i.isJoinComputerAudioBeforeSharingAudio=u}),[`${XE}`]:It((i,l)=>{let{payload:u}=l;i.isShareAudioEnabled=u}),[`${eo}`]:It((i,l)=>{let{payload:u}=l;i.statistic.encode=u.data}),[`${AC}`]:It((i,l)=>{let{payload:u}=l;i.statistic.decode=u.data}),[`${sP}`]:It((i,l)=>{let{payload:u}=l;-1===i.locallyMutedAudioList.findIndex(p=>p===u)&&i.locallyMutedAudioList.push(u)}),[`${yC}`]:It((i,l)=>{let{payload:u}=l;const p=i.locallyMutedAudioList.findIndex(v=>v===u);-1!==p&&i.locallyMutedAudioList.splice(p,1)}),[`${EC}`]:It((i,l)=>{let{payload:u}=l;const p=i.localUserAudioVolumeList.find(v=>v.userId===u.userId);p?p.volume=u.volume:i.localUserAudioVolumeList.push(u)}),[`${aP}`]:It((i,l)=>{let{payload:u}=l;const p=i.localUserAudioVolumeList.findIndex(v=>v.userId===u.userId);-1!==p&&i.localUserAudioVolumeList.splice(p,1)})},zb),Yb=Ms(SN,FB,UB);var VB="object"==typeof global&&global&&global.Object===Object&&global,SO="object"==typeof self&&self&&self.Object===Object&&self,Sh=VB||SO||Function("return this")(),R_=Sh.Symbol,CO=Object.prototype,qb=CO.hasOwnProperty,O_=CO.toString,_f=R_?R_.toStringTag:void 0,KA=Object.prototype.toString,GI=R_?R_.toStringTag:void 0;function D_(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":GI&&GI in Object(i)?function(l){var u=qb.call(l,_f),p=l[_f];try{l[_f]=void 0;var v=!0}catch{}var y=O_.call(l);return v&&(u?l[_f]=p:delete l[_f]),y}(i):KA.call(i)}function k_(i){return null!=i&&"object"==typeof i}var zA=Array.isArray;function P_(i){var l=typeof i;return null!=i&&("object"==l||"function"==l)}function IO(i){if(!P_(i))return!1;var l=D_(i);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}var wO,WI=Sh["__core-js_shared__"],vf=(wO=/[^.]+$/.exec(WI&&WI.keys&&WI.keys.IE_PROTO||""))?"Symbol(src)_1."+wO:"",TO=Function.prototype.toString;function zm(i){if(null!=i){try{return TO.call(i)}catch{}try{return i+""}catch{}}return""}var RO=/^\[object .+?Constructor\]$/,IN=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N_(i,l){var p,v,u=i?.[l];return P_(p=u)&&(v=p,!vf||!(vf in v))&&(IO(p)?IN:RO).test(zm(p))?u:void 0}var Ym=N_(Sh,"WeakMap"),KI=/^(?:0|[1-9]\d*)$/;function zI(i,l){var u=typeof i;return!!(l=l??9007199254740991)&&("number"==u||"symbol"!=u&&KI.test(i))&&i>-1&&i%1==0&&i<l}function qi(i,l){return i===l||i!=i&&l!=l}function wN(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function Rd(i){return null!=i&&wN(i.length)&&!IO(i)}var Nl=Object.prototype;function TN(i){var l=i&&i.constructor;return i===("function"==typeof l&&l.prototype||Nl)}function RN(i){return k_(i)&&"[object Arguments]"==D_(i)}var ON=Object.prototype,YI=ON.hasOwnProperty,rl=ON.propertyIsEnumerable,DN=RN(function(){return arguments}())?RN:function(i){return k_(i)&&YI.call(i,"callee")&&!rl.call(i,"callee")},Jb="object"==typeof K&&K&&!K.nodeType&&K,qI=Jb&&Oe&&!Oe.nodeType&&Oe,$b=qI&&qI.exports===Jb?Sh.Buffer:void 0,M_=($b?$b.isBuffer:void 0)||function(){return!1},xo={};xo["[object Float32Array]"]=xo["[object Float64Array]"]=xo["[object Int8Array]"]=xo["[object Int16Array]"]=xo["[object Int32Array]"]=xo["[object Uint8Array]"]=xo["[object Uint8ClampedArray]"]=xo["[object Uint16Array]"]=xo["[object Uint32Array]"]=!0,xo["[object Arguments]"]=xo["[object Array]"]=xo["[object ArrayBuffer]"]=xo["[object Boolean]"]=xo["[object DataView]"]=xo["[object Date]"]=xo["[object Error]"]=xo["[object Function]"]=xo["[object Map]"]=xo["[object Number]"]=xo["[object Object]"]=xo["[object RegExp]"]=xo["[object Set]"]=xo["[object String]"]=xo["[object WeakMap]"]=!1;var kN,Xb="object"==typeof K&&K&&!K.nodeType&&K,Od=Xb&&Oe&&!Oe.nodeType&&Oe,Zb=Od&&Od.exports===Xb&&VB.process,Ch=function(){try{return Od&&Od.require&&Od.require("util").types||Zb&&Zb.binding&&Zb.binding("util")}catch{}}(),e0=Ch&&Ch.isTypedArray,t0=e0?(kN=e0,function(i){return kN(i)}):function(i){return k_(i)&&wN(i.length)&&!!xo[D_(i)]},DO=Object.prototype.hasOwnProperty,QB=function(i,l){return function(u){return i(l(u))}}(Object.keys,Object),kO=Object.prototype.hasOwnProperty;function n0(i){if(!TN(i))return QB(i);var l=[];for(var u in Object(i))kO.call(i,u)&&"constructor"!=u&&l.push(u);return l}var YA=N_(Object,"create"),PO=Object.prototype.hasOwnProperty,Ao=Object.prototype.hasOwnProperty;function Js(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}function oc(i,l){for(var u=i.length;u--;)if(qi(i[u][0],l))return u;return-1}Js.prototype.clear=function(){this.__data__=YA?YA(null):{},this.size=0},Js.prototype.delete=function(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l},Js.prototype.get=function(i){var l=this.__data__;if(YA){var u=l[i];return"__lodash_hash_undefined__"===u?void 0:u}return PO.call(l,i)?l[i]:void 0},Js.prototype.has=function(i){var l=this.__data__;return YA?void 0!==l[i]:Ao.call(l,i)},Js.prototype.set=function(i,l){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=YA&&void 0===l?"__lodash_hash_undefined__":l,this};var yo=Array.prototype.splice;function Ih(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}Ih.prototype.clear=function(){this.__data__=[],this.size=0},Ih.prototype.delete=function(i){var l=this.__data__,u=oc(l,i);return!(u<0||(u==l.length-1?l.pop():yo.call(l,u,1),--this.size,0))},Ih.prototype.get=function(i){var l=this.__data__,u=oc(l,i);return u<0?void 0:l[u][1]},Ih.prototype.has=function(i){return oc(this.__data__,i)>-1},Ih.prototype.set=function(i,l){var u=this.__data__,p=oc(u,i);return p<0?(++this.size,u.push([i,l])):u[p][1]=l,this};var qA=N_(Sh,"Map");function r0(i,l){var u,p,v=i.__data__;return("string"==(p=typeof(u=l))||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u)?v["string"==typeof l?"string":"hash"]:v.map}function qm(i){var l=-1,u=null==i?0:i.length;for(this.clear();++l<u;){var p=i[l];this.set(p[0],p[1])}}function wh(i){var l=this.__data__=new Ih(i);this.size=l.size}qm.prototype.clear=function(){this.size=0,this.__data__={hash:new Js,map:new(qA||Ih),string:new Js}},qm.prototype.delete=function(i){var l=r0(this,i).delete(i);return this.size-=l?1:0,l},qm.prototype.get=function(i){return r0(this,i).get(i)},qm.prototype.has=function(i){return r0(this,i).has(i)},qm.prototype.set=function(i,l){var u=r0(this,i),p=u.size;return u.set(i,l),this.size+=u.size==p?0:1,this},wh.prototype.clear=function(){this.__data__=new Ih,this.size=0},wh.prototype.delete=function(i){var l=this.__data__,u=l.delete(i);return this.size=l.size,u},wh.prototype.get=function(i){return this.__data__.get(i)},wh.prototype.has=function(i){return this.__data__.has(i)},wh.prototype.set=function(i,l){var u=this.__data__;if(u instanceof Ih){var p=u.__data__;if(!qA||p.length<199)return p.push([i,l]),this.size=++u.size,this;u=this.__data__=new qm(p)}return u.set(i,l),this.size=u.size,this};var NO=Object.prototype.propertyIsEnumerable,sc=Object.getOwnPropertySymbols,JA=sc?function(i){return null==i?[]:(i=Object(i),function(l,u){for(var p=-1,v=null==l?0:l.length,y=0,C=[];++p<v;){var w=l[p];u(w)&&(C[y++]=w)}return C}(sc(i),function(l){return NO.call(i,l)}))}:function(){return[]};function PN(i){return p=JA,v=function HB(i){return Rd(i)?function(l,u){var p=zA(l),v=!p&&DN(l),y=!p&&!v&&M_(l),C=!p&&!v&&!y&&t0(l),w=p||v||y||C,D=w?function(W,re){for(var ee=-1,te=Array(W);++ee<W;)te[ee]=re(ee);return te}(l.length,String):[],P=D.length;for(var L in l)!DO.call(l,L)||w&&("length"==L||y&&("offset"==L||"parent"==L)||C&&("buffer"==L||"byteLength"==L||"byteOffset"==L)||zI(L,P))||D.push(L);return D}(i):n0(i)}(l=i),zA(l)?v:function(y,C){for(var w=-1,D=C.length,P=y.length;++w<D;)y[P+w]=C[w];return y}(v,p(l));var l,p,v}var $A=N_(Sh,"DataView"),MO=N_(Sh,"Promise"),NN=N_(Sh,"Set"),Dd="[object Map]",JI="[object Promise]",XA="[object Set]",MN="[object WeakMap]",$I="[object DataView]",_p=zm($A),o0=zm(qA),xN=zm(MO),xO=zm(NN),LO=zm(Ym),il=D_;($A&&il(new $A(new ArrayBuffer(1)))!=$I||qA&&il(new qA)!=Dd||MO&&il(MO.resolve())!=JI||NN&&il(new NN)!=XA||Ym&&il(new Ym)!=MN)&&(il=function(i){var l=D_(i),u="[object Object]"==l?i.constructor:void 0,p=u?zm(u):"";if(p)switch(p){case _p:return $I;case o0:return Dd;case xN:return JI;case xO:return XA;case LO:return MN}return l});var XI=il,BO=Sh.Uint8Array;function Jm(i){var l=-1,u=null==i?0:i.length;for(this.__data__=new qm;++l<u;)this.add(i[l])}function ZI(i,l){for(var u=-1,p=null==i?0:i.length;++u<p;)if(l(i[u],u,i))return!0;return!1}function ew(i,l,u,p,v,y){var C=1&u,w=i.length,D=l.length;if(w!=D&&!(C&&D>w))return!1;var P=y.get(i),L=y.get(l);if(P&&L)return P==l&&L==i;var W=-1,re=!0,ee=2&u?new Jm:void 0;for(y.set(i,l),y.set(l,i);++W<w;){var te=i[W],oe=l[W];if(p)var Ee=C?p(oe,te,W,l,i,y):p(te,oe,W,i,l,y);if(void 0!==Ee){if(Ee)continue;re=!1;break}if(ee){if(!ZI(l,function(Te,De){if(!ee.has(De)&&(te===Te||v(te,Te,u,p,y)))return ee.push(De)})){re=!1;break}}else if(te!==oe&&!v(te,oe,u,p,y)){re=!1;break}}return y.delete(i),y.delete(l),re}function LN(i){var l=-1,u=Array(i.size);return i.forEach(function(p,v){u[++l]=[v,p]}),u}function BN(i){var l=-1,u=Array(i.size);return i.forEach(function(p){u[++l]=p}),u}Jm.prototype.add=Jm.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Jm.prototype.has=function(i){return this.__data__.has(i)};var tw=R_?R_.prototype:void 0,Af=tw?tw.valueOf:void 0,FN=Object.prototype.hasOwnProperty,FO="[object Arguments]",s0="[object Array]",UO="[object Object]",x_=Object.prototype.hasOwnProperty;function ZA(i,l,u,p,v){return i===l||(null==i||null==l||!k_(i)&&!k_(l)?i!=i&&l!=l:function(y,C,w,D,P,L){var W=zA(y),re=zA(C),ee=W?s0:XI(y),te=re?s0:XI(C),oe=(ee=ee==FO?UO:ee)==UO,Ee=(te=te==FO?UO:te)==UO,Te=ee==te;if(Te&&M_(y)){if(!M_(C))return!1;W=!0,oe=!1}if(Te&&!oe)return L||(L=new wh),W||t0(y)?ew(y,C,w,D,P,L):function(pt,ht,gt,Yt,Xt,un,Tt){switch(gt){case"[object DataView]":if(pt.byteLength!=ht.byteLength||pt.byteOffset!=ht.byteOffset)return!1;pt=pt.buffer,ht=ht.buffer;case"[object ArrayBuffer]":return!(pt.byteLength!=ht.byteLength||!un(new BO(pt),new BO(ht)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qi(+pt,+ht);case"[object Error]":return pt.name==ht.name&&pt.message==ht.message;case"[object RegExp]":case"[object String]":return pt==ht+"";case"[object Map]":var yn=LN;case"[object Set]":if(yn||(yn=BN),pt.size!=ht.size&&!(1&Yt))return!1;var Pt=Tt.get(pt);if(Pt)return Pt==ht;Yt|=2,Tt.set(pt,ht);var mt=ew(yn(pt),yn(ht),Yt,Xt,un,Tt);return Tt.delete(pt),mt;case"[object Symbol]":if(Af)return Af.call(pt)==Af.call(ht)}return!1}(y,C,ee,w,D,P,L);if(!(1&w)){var De=oe&&x_.call(y,"__wrapped__"),Le=Ee&&x_.call(C,"__wrapped__");if(De||Le){var et=De?y.value():y,lt=Le?C.value():C;return L||(L=new wh),P(et,lt,w,D,L)}}return!!Te&&(L||(L=new wh),function(pt,ht,gt,Yt,Xt,un){var Tt=1&gt,yn=PN(pt),Kn=yn.length;if(Kn!=PN(ht).length&&!Tt)return!1;for(var Pt=Kn;Pt--;){var mt=yn[Pt];if(!(Tt?mt in ht:FN.call(ht,mt)))return!1}var Ve=un.get(pt),tt=un.get(ht);if(Ve&&tt)return Ve==ht&&tt==pt;var Rt=!0;un.set(pt,ht),un.set(ht,pt);for(var st=Tt;++Pt<Kn;){var Bt=pt[mt=yn[Pt]],pe=ht[mt];if(Yt)var ye=Tt?Yt(pe,Bt,mt,ht,pt,un):Yt(Bt,pe,mt,pt,ht,un);if(!(void 0===ye?Bt===pe||Xt(Bt,pe,gt,Yt,un):ye)){Rt=!1;break}st||(st="constructor"==mt)}if(Rt&&!st){var wn=pt.constructor,Kr=ht.constructor;wn==Kr||!("constructor"in pt)||!("constructor"in ht)||"function"==typeof wn&&wn instanceof wn&&"function"==typeof Kr&&Kr instanceof Kr||(Rt=!1)}return un.delete(pt),un.delete(ht),Rt}(y,C,w,D,P,L))}(i,l,u,p,ZA,v))}var VO=Object.prototype.hasOwnProperty;const UN=i=>4294966272&i,jO=i=>{let l={R:0,G:0,B:0,A:0};if("string"==typeof i&&i.startsWith("#")){const w=i.slice(1);try{if(3===w.length){const D=Array.from(w).map(P=>P.repeat(2)).map(P=>parseInt(P,16));l={R:D[0]/255,G:D[1]/255,B:D[2]/255,A:1}}else if(6===w.length||8===w.length){var u,p,v,y,C;const D=null===(u=w.match(/\S{2}/g))||void 0===u?void 0:u.map(P=>parseInt(P,16));l={R:(null!==(p=D?.[0])&&void 0!==p?p:0)/255,G:(null!==(v=D?.[1])&&void 0!==v?v:0)/255,B:(null!==(y=D?.[2])&&void 0!==y?y:0)/255,A:null!=D&&D[3]?(null!==(C=D?.[3])&&void 0!==C?C:0)/255:1}}}catch{console.warn("error color representation:",i)}}else"object"==typeof i&&(l={R:i.R/255,G:i.G/255,B:i.B/255,A:i.A||1});return l};function QO(i){return void 0!==i?Mn(Promise.resolve(i)):zs(BE,1).pipe(_t(l=>l))}function HO(i,l,u){return GO.apply(this,arguments)}function GO(){return GO=F(function*(i,l,u){if(i===tp)return tp;{let p=i;if(l){const v=yield(y=i,new Promise((C,w)=>{try{const D=document.createElement("canvas"),P=D.getContext("2d"),L=new Image;L.src=y;const W=16/9,re=1280,ee=Math.floor(re/W);D.width=re,D.height=ee,L.onload=()=>{const{width:te,height:oe}=L,Ee=oe*W;if(Ee>re){const Te=te,De=Math.floor(te/W);P?.drawImage(L,0,(oe-De)/2,Te,De,0,0,re,ee)}else P?.drawImage(L,(te-Ee)/2,0,Ee,oe,0,0,re,ee);D.toBlob(Te=>{C(Te)})}}catch(D){D instanceof DOMException&&D.code===DOMException.SECURITY_ERR&&console.error("Image is not from the same origin, add CORS header to solve this issue"),w(D)}}));p=URL.createObjectURL(v)}if(p){const v=`__ZOOM_SDK_VIRTUAL_BACKGROUND_IMAGE_@__${Math.floor(100*Math.random())}`,y=document.createElement("img");return y.src=p,y.id=v,y.style.display="none",y.onload=()=>{l&&URL.revokeObjectURL(p)},y.onerror=C=>{l&&URL.revokeObjectURL(p),console.error("Cannot load virtual background image.",C)},(u??document.body).appendChild(y),new Promise(C=>{y.onload=()=>{l&&URL.revokeObjectURL(p),C(v)},y.onerror=w=>{l&&URL.revokeObjectURL(p),console.error("Cannot load virtual background image.",w),C(null)}})}}var y;return null}),GO.apply(this,arguments)}function WO(i,l,u,p){return nw.apply(this,arguments)}function nw(){return nw=F(function*(i,l,u,p){var v;const y=null!==(v=p&&p.parentNode)&&void 0!==v?v:document.body,{imageUrl:C,cropped:w,captureHeight:D,captureWidth:P,cameraId:L}=i,W=document.createElement("div");let re;W.style.display="none",re=C?yield HO(C,w,W):null;let ee=`__ZOOM_SDK_VIRTUAL_BACKGROUND_CANVAS_@__${Math.floor(100*Math.random())}`;if(p){const oe=fA(p);oe.id?ee=oe.id:oe.id=ee}else{const oe=document.createElement("canvas");oe.width=380,oe.height=214,oe.id=ee,W.appendChild(oe)}y?.appendChild(W);const{video:{videoSsrc:te}}=u;return l.startVirtualBackgroundSetting(ee,re,te,L,P,D),W}),nw.apply(this,arguments)}function VN(i,l,u){return KO.apply(this,arguments)}function KO(){return KO=F(function*(i,l,u){if(i){const p=yield HO(i,l);p&&(u.updateVirtualBackgroundImage(p),p!==tp&&setTimeout(()=>{var v;const y=document.getElementById(p);null==y||null===(v=y.parentNode)||void 0===v||v.removeChild(y)},0))}else u.updateVirtualBackgroundImage(null)}),KO.apply(this,arguments)}function zO(i,l){return"default"===i||l.some(u=>u.deviceId===i)||[K.MobileVideoFacingMode.Environment,K.MobileVideoFacingMode.User,K.MobileVideoFacingMode.Left,K.MobileVideoFacingMode.Right].includes(i)}function jN(i,l,u){const p=[],{video:{videoSsrc:v,activeCamera:y}}=l,{cameraId:C=y,captureWidth:w=0,captureHeight:D=0,videoElement:P,originalRatio:L,ptz:W}=u||{};let re;return P&&(P.id?re=P.id:(re="__ZOOM_SDK_SELF_VIDEO_@__".replace("@",`${Math.floor(1e4*Math.random())}`),P.id=re)),i.startCaptureVideo(v,C,w,D,re,Bu(),!L&&cT(),W),p.push(Ed({cameraId:C,captureWidth:w,captureHeight:D,videoDOMId:re,originalRatio:L,ptz:W})),p}function rw(i,l,u){const{max:p,min:v,step:y}=i;let C=u/100*(p-v);y&&(C=Math.min(Math.floor(C/y)*y,Math.floor(C)));let w=l+C;return w=Math.min(p,w),w=Math.max(v,w),w}function iw(i,l){let u="",p=l;switch(i){case np.Down:p=-l,u="tilt";break;case np.Up:u="tilt";break;case np.Left:p=-l,u="pan";break;case np.Right:u="pan";break;case np.ZoomIn:u="zoom";break;case np.ZoomOut:p=-l,u="zoom"}return{key:u,range:p}}function ow(i){const l=["pan","tilt","zoom"].reduce((u,p)=>i[p]&&0!==i[p].value?cn(cn({},u),{},{[p]:i[p].value}):u,{});return function(u){if(null==u)return!0;if(Rd(u)&&(zA(u)||"string"==typeof u||"function"==typeof u.splice||M_(u)||t0(u)||DN(u)))return!u.length;var p=XI(u);if("[object Map]"==p||"[object Set]"==p)return!u.size;if(TN(u))return!n0(u).length;for(var v in u)if(VO.call(u,v))return!1;return!0}(l)?null:l}function YO(i){return{pan:(i&zp.Pan)===zp.Pan,tilt:(i&zp.Tilt)===zp.Tilt,zoom:(i&zp.Zoom)===zp.Zoom}}function QN(){return!Rv()&&(Qp()||!cb()&&("function"==typeof window.ImageCapture||Xh())&&"function"==typeof window.OffscreenCanvas)}const L_=Wo.createAgent(),ey=ji.getInstance();var HN=Object.freeze({__proto__:null,handleStartCaptureVideoSuccessEpic:(i,l)=>bi(i,Jn.StartVideoCaptureSuccess).pipe($n(u=>{const{video:{cameraDevicesList:p,activeCamera:v,ptz:y},meeting:{userId:C}}=l.value,{payload:{data:{currentDeviceID:w,PTZRange:D}}}=u,P=[];if(p.length<1&&(vt(uu,{reason:"Cannot detect camera devices"}),ey.stopCaptureVideo()),zO(v,p)||(vt(Jp,{reason:"cannot find target camera"}),ey.stopCaptureVideo()),L_.muteAttendeeVideo(C,!1),w&&D&&P.push(eR({deviceId:w,ptzRange:D})),v!==w&&P.push(bm(w)),Object.prototype.hasOwnProperty.call(y,w)){const L=y[w];if(L){const W=ow(L);W&&ey.movePTZCamera(W)}}return Mn(P)})),startVideoResponse:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{var p,v,y,C;let[w,D]=u;return(null==w||null===(p=w.payload)||void 0===p||null===(v=p.body)||void 0===v||null===(y=v.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.id)===D.meeting.userId}),kn(u=>{var p,v,y,C;let[w]=u;return!0===(null==w||null===(p=w.payload)||void 0===p||null===(v=p.body)||void 0===v||null===(y=v.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.bVideoOn)}),bd(()=>(vt(yT),Xg(!0)))),handleForbiddenCaptureVideoEpic:i=>bi(i,Jn.UserForbiddedCaptureVideo).pipe(sr(()=>vt(WS)),Go(ZE(!0))),handleCameraIsTakenByOtherProgramsEpic:i=>bi(i,Jn.UserCameraIsTakenByOtherPrograms).pipe(sr(()=>vt(KS,{reason:"User camera is taken by other programs."})),Go(Cm(!0))),handleVideoSocketErrorEpic:i=>bi(i,Jn.VideoWebsocketBroken).pipe(sr(()=>{vt(El,{reason:"Video websocket broken."})}),Qr(qt)),handleStopVideoCaptureFailedEpic:i=>bi(i,Jn.StopVideoCaptureFailed).pipe(sr(()=>{vt(Qg,{failed:!0,reason:"Unknown."})}),Qr(qt)),handleStopVideoCaptureSuccessEpic:(i,l)=>bi(i,Jn.StopVideoCaptureSuccess).pipe(Un(l),bd(u=>{let[,p]=u;const{meeting:{userId:v},video:{isCurrentUserStartedVideo:y}}=p;y||vt(Qg),L_.muteAttendeeVideo(v,!0)})),stopVideoResponse:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{var p,v,y,C;let[w,D]=u;return(null==w||null===(p=w.payload)||void 0===p||null===(v=p.body)||void 0===v||null===(y=v.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.id)===D.meeting.userId}),kn(u=>{var p,v,y,C;let[w]=u;return!1===(null==w||null===(p=w.payload)||void 0===p||null===(v=p.body)||void 0===v||null===(y=v.update)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.bVideoOn)}),bd(()=>(vt(Qg),Xg(!1)))),receiveVideoMuteIndication:(i,l)=>ar(i,16133).pipe(Un(l),kn(u=>{var p,v;let[y,C]=u;return(null==y||null===(p=y.payload)||void 0===p||null===(v=p.body)||void 0===v?void 0:v.id)===C.meeting.userId}),bd(u=>{let[p]=u;const{id:v,bVideoMute:y}=p.payload.body;return vt(Lv,{id:v,isVideoMuted:y}),!0===y&&ey.stopCaptureVideo(),!1===y&&vt(Y2,{id:v,isVideoMuted:y}),Sm(y)})),receiveVideoActiveIndication:i=>ar(i,16129).pipe(_t(l=>{const{payload:{body:{id:u,bVideoOn:p}}}=l,v=UN(u);return vt(GS,{bVideoOn:p,userId:v}),Em({bVideoOn:p,userId:v})})),receiveVideoSsrcIndication:(i,l)=>ar(i,16131).pipe(kn(u=>void 0!==u.payload.body.ssrc),Un(l),io(u=>{let[p,v]=u;const{meeting:{isCurrentUserStartVideoBeforeReset:y},media:{videoEncodeStatus:C},video:{isVerifiedVideoCaptureCanvasAfterFailover:w}}=v,{payload:{body:{ssrc:D}}}=p,P=Dm(l).pipe($n(L=>L&&!0===y&&!0!==L.bVideoOn?mu("video",C,"success").pipe(kn(W=>{let[re,ee]=W;return re&&ee}),$n(()=>{const W=[Xg(void 0)],{video:{captureCanvasList:re,activeCamera:ee,customizedVideoOption:te}}=l.value;return!1===w&&(Array.isArray(re)?re.forEach(oe=>{fA(document.querySelector(`#${oe}`))}):fA(document.querySelector(`#${re}`)),W.push(JT(!0))),ji.getInstance().startCaptureVideo(D,ee,te?.captureWidth||0,te?.captureHeight||0,te?.videoDOMId,Bu(),!(null!=te&&te.originalRatio)&&cT(),te?.ptz),Mn(W)})):qt));return Ss(or(zT(D)),P)})),receiveVideoDecodeMaxSizeEpic:(i,l)=>bi(i,Jn.VideoDecodeMaxSize).pipe(kn(u=>{var p;return null==u||null===(p=u.payload)||void 0===p?void 0:p.data}),_t(u=>{const{size:p}=u.payload.data,{video:{renderedVideoList:v,receivedVideoMaxQuality:y}}=l.value,C=v.filter(w=>w.videoQuality===K.VideoQuality.Video_720P);return y!==p&&C.length>0&&(p!==K.VideoQuality.Video_720P&&y!==K.VideoQuality.Video_720P||C.forEach(w=>{L_.subscribeVideo(w.userId,p,!1)})),eb(p)})),spotlightVideoResponseEpic:i=>ar(i,16135).pipe(_t(l=>{const{payload:{body:{bLeadershipOn:u,id:p}}}=l,v=[];return u&&v.push(UN(p)),vt(ME,{spotlightList:v}),YT(v)})),handleGroupLayoutIndicationEpic:(i,l)=>ar(i,7958).pipe(Un(l),_t(u=>{let[p,v]=u;const{payload:{body:y}}=p;let C=[];y&&y.group_list&&y.group_list[0]&&(C=y.group_list[0].map(D=>D.id));const w=Zi(v);return C=C.filter(D=>w.findIndex(P=>P.userId===D)>=0),vt(ME,{spotlightList:C}),YT(C)})),handleCurrentVideoResolution:i=>bi(i,Jn.CurrentVideoResolution).pipe(bd(l=>(vt(Bv),vt(qp,l.payload.data),pP(l.payload.data)))),handleMeetingVideoAttributeEpic:i=>ar(i,tc).pipe(kn(l=>{const{payload:{body:u}}=l;return void 0!==u?.bFollowHostVideo||void 0!==u?.VideoHd||void 0!==u?.bCanUnmuteVideo}),_t(l=>{const{payload:{body:{bFollowHostVideo:u,VideoHd:p,bCanUnmuteVideo:v}}}=l;return void 0!==u?(vt(ET,{bOn:u}),TC(u)):void 0!==v?gP(v):(ey.enableHardwareAccelerationForVideoEncode(!1),XT(1===p))})),handleHostDragLayoutIndicationEpic:(i,l)=>ar(i,7957).pipe(Un(l),_t(u=>{let[p,v]=u;const{video:{isFollowHostVideoLayout:y}}=v,{payload:{body:C}}=p,w=C&&C.drag_list&&C.drag_list.map(D=>D.id);return y&&vt(xE,{layout:w}),mP(w)})),handlePeerVideoStateChangeEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[p,v]=u;const{meeting:{userId:y},video:{subscribedVideoList:C}}=v,w=p.payload.body.update,D=p.payload.body.remove;return w&&w.length>0&&w.findIndex(P=>P.id!==y&&(void 0!==P.bVideoOn||P.bHold))>-1||D&&D.some(P=>C.includes(P.id))}),sr(u=>{let[p,v]=u;const{payload:{body:{remove:y,update:C}}}=p,{video:{subscribedVideoList:w}}=v,D=Gu(v);if(y&&y.length>0&&y.filter(P=>w.includes(P.id)).forEach(P=>{vt(LE,{userId:P.id})}),C&&C.length>0){const P=C.filter(W=>void 0!==W.bVideoOn).filter(W=>-1===D.findIndex(re=>re.userId===W.id)),L=C.filter(W=>!0===W.bHold);L.length>0&&L.filter(W=>w.includes(W.id)).forEach(W=>{vt(LE,{userId:W.id})}),P.forEach(W=>{vt(W.bVideoOn?q2:LE,{userId:W.id})})}}),Qr(qt)),handleVideoQosDataEpic:(i,l)=>bi(i,Jn.videoQosData).pipe(Un(l),_t(u=>{let[p,v]=u;const{video:{isCaptureForbidden:y,isCameraTaken:C},media:{videoEncodeStatus:w,videoDecodeStatus:D}}=v,P=ii(v),L=Fs(v),W=L.length>0,re=P?.bVideoOn&&!y&&!C,ee=L.some(Ee=>Ee.bVideoOn),oe=D&&W&&ee;return p.payload.data.encoding?w&&re&&W?(vt(FE,p.payload),ki(p.payload)):ki(QS):oe?(vt(FE,p.payload),OC(p.payload)):OC(QS)})),handleVideoCellChangeEpic:i=>bi(i,[66.5,66.6]).pipe(sr(l=>{const{payload:{type:u,data:p}}=l;if(66.5===u){const{ssrc:v,width:y,height:C,quality:w}=p;vt(bT,{userId:v,width:y,height:C,quality:w})}else if(66.6===u){const{ssrc:v,fps:y}=p;vt(bT,{userId:v,fps:y})}}),Qr(qt)),handleMaximumNumberOfHDSubscriptionsEpic:i=>i.pipe(fi(`${_l}`),$n(F(function*(){return Bu()?1:(yield ji.isSupportVideoDecodeHardwareAcceleration())?4:1})),_t(l=>aB(l))),handleNetworkQualityChangeEpic:(i,l)=>bi(i,Jn.networkQualityChange).pipe(kn(u=>!!u.payload.data),$n(u=>{var p;const{payload:{data:{bwLevel:v,isUplink:y,networkLevel:C}}}=u,w=[],{meeting:{userId:D},video:{networkQuality:P,subscribedVideoList:L}}=l.value,W=y?"uplink":"downlink";return w.push(ZT({userId:D,level:C,bwLevel:v,type:W})),!function(ee,te){if(ee===te)return!0;if(!ee||!te)return!1;const oe=Object.keys(ee),Ee=Object.keys(te),Te=oe.length;if(Ee.length!==Te)return!1;for(let De=0;De<Te;De++){const Le=oe[De];if(ee[Le]!==te[Le]||!Object.prototype.hasOwnProperty.call(te,Le))return!1}return!0}(null===(p=P[`${D}`])||void 0===p?void 0:p[W],{level:C,bwLevel:v})&&-1!==C&&(!y&&L.filter(ee=>ee!==D).length>0||y)&&vt(UE,{userId:D,type:W,level:C}),y&&L_.broadcastUserNetworkQuality({isUplink:y,level:C,bwLevel:v}),Mn(w)})),handleOthersNetworkQualityChangeEpic:(i,l)=>xs(i,8005).pipe(kn(u=>{var p;return!(null===(p=u.payload.body)||void 0===p||!p.nUserID)}),$n(u=>{const{payload:{body:{nLevel:p,nUserID:v}}}=u,{video:{networkQuality:y}}=l.value,C=y[`${v}`],w=[];return C&&C.uplink.level===p||(vt(UE,{userId:v,level:p,type:"uplink"}),w.push(ZT({userId:v,level:p,type:"uplink"}))),Mn(w)})),handleCameraConnectedIndicationEpic:(i,l)=>i.pipe(fi(`${tf}`),sr(u=>{const{payload:p}=u,v=l.value,{meeting:{userId:y}}=v,C=ii(v);0===p.length?C&&!C.bVideoConnect||L_.connectCamera(y,!1):null!=C&&C.bVideoConnect||L_.connectCamera(y,!0)}),Qr(qt))}),cV=Object.freeze({__proto__:null,handleVBPreloadEpic:i=>bi(i,[Jn.VbModelPreloadingOk,Jn.VbModelPreloading_3S,Jn.VbModelPreloading_10S,Jn.VbSettingParaError]).pipe($n(l=>{const{payload:{type:u,data:p}}=l,v=[];return[Jn.VbModelPreloadingOk,Jn.VbModelPreloading_3S,Jn.VbModelPreloading_10S].includes(u)?(v.push(Im(!0)),vt(BE,!0),u===Jn.VbModelPreloading_10S&&console.warn("Virtual Background is taking longer than expected to load.")):u===Jn.VbSettingParaError&&(p===au.VBModelNotMatch?(vt(BE,!1),v.push(Im(!1))):(vt(um,!1),v.push(RC(!1)))),Mn(v)})),handleVBSettingSuccessEpic:i=>bi(i,Jn.StartVideoStreamInVbSettingSuccess).pipe(_t(()=>(vt(um,!0),RC(!0))))});const uV=Wo.createAgent(),GB=ji.getInstance();var WB=Object.freeze({__proto__:null,handleRemoteCameraControlEpic:(i,l)=>ar(i,8004).pipe($n(u=>{const{payload:{body:{nCmd:p,nUserID:v,nReason:y,nButtonID:C}}}=u,w=l.value,D=Zi(w),{video:{currentCameraControlStatus:{isInControl:P,controllingUserId:L},cameraDevicesList:W,activeCamera:re}}=w,ee=D.find(oe=>TS(oe.userId,v)),te=[];if(te.push(nf(!0)),p===wc.Request){const oe={userId:ee?.userId,displayName:ee?.displayName};if(P){const Ee=D.find(Te=>Te.userId===L);Object.assign(oe,{currentControllingUserId:Ee?.userId,currentControllingDisplayName:Ee?.displayName})}vt(ZL,oe)}else if(p===wc.Approve)te.push(fh(ee?.userId)),vt($p,{isApproved:!0,userId:ee?.userId,displayName:ee?.displayName});else if(p===wc.Decline)te.push(oA(ee?.userId)),vt($p,{isApproved:!1,userId:ee?.userId,displayName:ee?.displayName,reason:y});else if(p===wc.GiveUp)te.push(DC({isInControl:!1,userId:0})),vt(lm,{isControlled:!1});else if(p===wc.StartControl||p===wc.StopControl)te.push(tR({cmd:p===wc.StartControl?"start":"stop",type:C}));else if(p===wc.SwitchCamera){const oe=W.findIndex(Te=>Te.deviceId===re),Ee=oe+1===W.length?0:oe+1;Ee!==oe&&GB.changeCamera(W[Ee].deviceId)}return Mn(te)})),handleFarEndCameraCapabilityEpic:(i,l)=>ar(i,Mo).pipe(kn(u=>{var p;const{payload:{body:v}}=u;return null==v||null===(p=v.update)||void 0===p?void 0:p.some(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive)}),sr(u=>{const{payload:{body:{update:p}}}=u,v=p.find(y=>void 0!==y.nFECC||void 0!==y.nFECCExecutive);if(v){const{meeting:{userId:y}}=l.value;TS(v.nFECCExecutive,y)&&vt(zS,{userId:v.id,ptz:YO(v.nFECC)})}}),Qr(qt)),handleFarEndCameraUserLeftEpic:(i,l)=>ar(i,Mo).pipe(kn(u=>{var p;const{payload:{body:v}}=u,{video:{farEndCameraControlStatus:{controlledUserList:y}}}=l.value;return null==v||null===(p=v.remove)||void 0===p?void 0:p.some(C=>y.includes(C.id))}),$n(u=>{var p;const{payload:{body:v}}=u,y=[],{video:{farEndCameraControlStatus:{controlledUserList:C}}}=l.value,w=null==v||null===(p=v.remove)||void 0===p?void 0:p.find(D=>C.includes(D.id));return w&&y.push(oA(w.id)),Mn(y)})),handleFarEndCameraActionEpic:(i,l)=>i.pipe(fi(`${tR}`),io(u=>{const{payload:{cmd:p,type:v}}=u;return"start"===p?yc(0,200).pipe(th(()=>!!l.value.video.currentCameraControlStatus.isCameraMoving),$n(()=>{const{video:{ptz:y,activeCamera:C}}=l.value,w=y[C],D=ow(w)||{},{key:P,range:L}=iw(v,2);return w[P]?(Object.assign(D,{[P]:rw(w[P].capability,w[P].value,L)}),GB.movePTZCamera(D).then(()=>tb({deviceId:C,constraints:D}))):Promise.resolve(void 0)}),$n(y=>"object"==typeof y&&void 0!==y.type?or(y):qt)):qt})),handleSendCapabilityWhenActiveCameraChangeEpic:(i,l)=>i.pipe(fi(`${bm}`),$n(u=>{const{payload:p}=u,{video:{customizedVideoOption:v,ptz:y}}=l.value;if(null!=v&&v.ptz){const C=y?.[p];void 0!==C&&uV.sendCameraAblity({pan:!!C.pan,tilt:!!C.tilt,zoom:!!C.zoom})}return qt}))});const KB={videoSsrc:0,cameraDevicesList:[],activeCamera:Bu()?K.MobileVideoFacingMode.User:"default",activeVideoId:0,isCurrentUserStartedVideo:!1,spotlightUserList:[],isCaptureForbidden:!1,receivedVideoMaxQuality:navigator.hardwareConcurrency>=8?K.VideoQuality.Video_720P:K.VideoQuality.Video_360P,captureCanvasList:[],subscribedVideoList:[],renderedVideoList:[],isVideoMuted:!1,isCaptureCameraLoading:!1,isCameraTaken:!1,receivedVideoDimension:{width:0,height:0},isFollowHostVideoLayout:!1,hostDragLayout:[],isSupportHDVideo:!1,bCanUnmuteVideo:!1,virtualBackground:{isVBConfigured:!1,isVBPreloadReady:void 0,imageSrc:void 0,cropped:void 0},statistic:{encode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0},decode:{sample_rate:0,rtt:0,jitter:0,avg_loss:0,max_loss:0,width:0,height:0,fps:0}},hardwareAcceleration:{encode:!1,decode:!1},networkQuality:{},ptz:{},currentCameraControlStatus:{isRequested:!1,isInControl:!1,isCameraMoving:!1},farEndCameraControlStatus:{controlledUserList:[],isControlling:!1}},zB=Fr({[`${zT}`]:It((i,l)=>{let{payload:u}=l;i.videoSsrc=u}),[`${tf}`]:It((i,l)=>{let{payload:u}=l;i.cameraDevicesList=u}),[`${bm}`]:It((i,l)=>{let{payload:u}=l;const p=i.activeCamera;if(p in i.ptz){const v=i.ptz[p];["pan","tilt","zoom"].forEach(y=>{v[y]&&(v[y].value=0)})}i.activeCamera=u}),[`${Em}`]:It((i,l)=>{let{payload:u}=l;i.activeVideoId=u.userId}),[`${Xg}`]:It((i,l)=>{let{payload:u}=l;i.isCurrentUserStartedVideo=u}),[`${YT}`]:It((i,l)=>{let{payload:u}=l;i.spotlightUserList=u}),[`${ZE}`]:It((i,l)=>{let{payload:u}=l;i.isCaptureForbidden=u}),[`${eb}`]:It((i,l)=>{let{payload:u}=l;i.receivedVideoMaxQuality=u}),[`${Zg}`]:It((i,l)=>{let{payload:u}=l,p=u;Array.isArray(u)||(p=[u]),i.captureCanvasList=p}),[`${Sm}`]:It((i,l)=>{let{payload:u}=l;i.isVideoMuted=u}),[`${iA}`]:It((i,l)=>{let{payload:u}=l;i.isCaptureCameraLoading=u}),[`${Cm}`]:It((i,l)=>{let{payload:u}=l;i.isCameraTaken=u}),[`${JT}`]:It((i,l)=>{let{payload:u}=l;i.isVerifiedVideoCaptureCanvasAfterFailover=u}),[`${qT}`]:It((i,l)=>{let{payload:u}=l;i.isVerifiedVideoRenderCanvasAfterFailover=u}),[`${pP}`]:It((i,l)=>{let{payload:u}=l;i.receivedVideoDimension=u}),[`${fP}`]:It((i,l)=>{let{payload:u}=l;i.subscribedVideoList.includes(u)||i.subscribedVideoList.push(u)}),[`${wC}`]:It((i,l)=>{let{payload:u}=l;const p=i.subscribedVideoList.indexOf(u);p>=0&&i.subscribedVideoList.splice(p,1)}),[`${$T}`]:It((i,l)=>{let{payload:u}=l;const p=i.renderedVideoList.find(v=>v.userId===u.userId&&v.key===u.key&&v.canvasId===u.canvasId);p?p.videoQuality=u.videoQuality:i.renderedVideoList.push(cn({},u))}),[`${sp}`]:It((i,l)=>{let{payload:u}=l;const p=i.renderedVideoList.findIndex(v=>v.userId===u.userId&&v.key===u.key&&v.canvasId===u.canvasId);p>=0&&i.renderedVideoList.splice(p,1)}),[`${TC}`]:It((i,l)=>{let{payload:u}=l;i.isFollowHostVideoLayout=u}),[`${mP}`]:It((i,l)=>{let{payload:u}=l;i.hostDragLayout=u}),[`${XT}`]:It((i,l)=>{let{payload:u}=l;i.isSupportHDVideo=u}),[`${aB}`]:It((i,l)=>{let{payload:u}=l;i.maximumNumbeOfHDSubscriptions=u}),[`${gP}`]:It((i,l)=>{let{payload:u}=l;i.bCanUnmuteVideo=u}),[`${Im}`]:It((i,l)=>{let{payload:u}=l;i.virtualBackground.isVBPreloadReady=u}),[`${RC}`]:It((i,l)=>{let{payload:u}=l;i.virtualBackground.isVBConfigured=u}),[`${ap}`]:It((i,l)=>{let{payload:u}=l;i.virtualBackground.imageSrc=u.imageSrc,i.virtualBackground.cropped=u.cropped}),[`${yd}`]:It((i,l)=>{let{payload:u}=l;const{encode:p,decode:v}=u;void 0!==p&&(i.hardwareAcceleration.encode=p),void 0!==v&&(i.hardwareAcceleration.decode=v)}),[`${ki}`]:It((i,l)=>{let{payload:u}=l;i.statistic.encode=u.data}),[`${OC}`]:It((i,l)=>{let{payload:u}=l;i.statistic.decode=u.data}),[`${Ed}`]:It((i,l)=>{let{payload:u}=l;const{cameraId:p,captureWidth:v,captureHeight:y,videoDOMId:C,originalRatio:w,ptz:D}=u;i.activeCamera=p,i.customizedVideoOption={captureWidth:v,captureHeight:y,videoDOMId:C,originalRatio:w,ptz:D}}),[`${ZT}`]:It((i,l)=>{let{payload:u}=l;const{userId:p,level:v,bwLevel:y,type:C}=u;Object.prototype.hasOwnProperty.call(i.networkQuality,`${p}`)?i.networkQuality[`${p}`][`${C}`]={level:v,bwLevel:y}:Object.assign(i.networkQuality,{[`${p}`]:{[C]:{level:v,bwLevel:y}}})}),[`${eR}`]:It((i,l)=>{let{payload:u}=l;const{deviceId:p,ptzRange:v}=u;if(Object.prototype.hasOwnProperty.call(i.ptz,p)){const y=i.ptz[p];y&&["pan","tilt","zoom"].forEach(C=>{const w=v[C];if(w){var D;const P=null===(D=y[C])||void 0===D?void 0:D.capability;P?Object.assign(P,cn({},w)):y[C]={capability:cn({},w),value:0}}})}else Object.assign(i.ptz,{[p]:{pan:v.pan?{capability:cn({},v.pan),value:0}:null,tilt:v.tilt?{capability:cn({},v.tilt),value:0}:null,zoom:v.zoom?{capability:cn({},v.zoom),value:0}:null}})}),[`${nf}`]:It((i,l)=>{let{payload:u}=l;i.currentCameraControlStatus.isRequested=u}),[`${DC}`]:It((i,l)=>{let{payload:u}=l;const{isInControl:p,userId:v}=u;i.currentCameraControlStatus.isInControl=p,i.currentCameraControlStatus.controllingUserId=v}),[`${fh}`]:It((i,l)=>{let{payload:u}=l;i.farEndCameraControlStatus.controlledUserList.includes(u)||i.farEndCameraControlStatus.controlledUserList.push(u)}),[`${oA}`]:It((i,l)=>{let{payload:u}=l;const p=i.farEndCameraControlStatus.controlledUserList.indexOf(u);-1!==p&&i.farEndCameraControlStatus.controlledUserList.splice(p,1)}),[`${tR}`]:It((i,l)=>{let{payload:u}=l;i.currentCameraControlStatus.isCameraMoving="start"===u.cmd}),[`${tb}`]:It((i,l)=>{let{payload:u}=l;const{constraints:p,deviceId:v}=u,y=i.ptz[v];["pan","tilt","zoom"].forEach(C=>{void 0!==p[C]&&(y[C].value=p[C])})}),[`${Sl}`]:It((i,l)=>{let{payload:u}=l;i.farEndCameraControlStatus.isControlling=u}),[`${us}`]:i=>cn(cn({},KB),{},{captureCanvasList:i.captureCanvasList,cameraDevicesList:i.cameraDevicesList,activeCamera:i.activeCamera,isVerifiedVideoCaptureCanvasAfterFailover:!1,isVerifiedVideoRenderCanvasAfterFailover:!1,customizedVideoOption:i.customizedVideoOption,ptz:i.ptz})},KB),YB=Ms(HN,cV,WB),{InitSuccessVideo:GN,InitSuccessAudio:ty,InitSuccessSharing:qO,InitFailedVideo:JO,InitFailedAudio:ny,InitFailedSharing:B_}=Jn;let yf;const $O=Ms(Object.freeze({__proto__:null,connectToMediaStreamEpic:(i,l)=>i.pipe(fi(`${_l}`),Un(l),kn(u=>{let[,p]=u;return void 0!==p.media.assetsPath&&void 0!==p.media.mediaConstraints}),sr(u=>{let[,p]=u;const{media:{assetsPath:v,mediaConstraints:y,fileWithVersion:C,enforceMultipleVideos:w},meeting:{enableAudioQos:D,enableVideoQos:P}}=p;if(yf=ji.getInstance(),yf.notifySDKMeetingReady(),v&&y){const L={};Xf()&&Object.assign(L,{enableMultiDecodeVideoWithoutSAB:!!w}),PR()&&Object.assign(L,{resourceManager:WP.exports.IResourceManager,file:[{path:`${v}/vb-resources/vbbuffer.bin`,type:"bin"},{path:`${v}/vb-resources/tf.min.js`,type:"js"}]}),yf.setAssetsAndConstraint(v,y,C,L)}Dm(l).pipe(Un(l)).subscribe(L=>{let[W,re]=L;const{meeting:{svcUrl:ee,meetingNumber:te,conId:oe,e2eEncrypt:Ee,userId:Te,isWebinar:De}}=re;var Le;W&&(null===(Le=yf)||void 0===Le||Le.connect({svcUrl:ee,meetingNumber:te,conId:oe,e2eEncrypt:Ee,isViewOnly:Fa(W.userRole),currentUserId:Te,isWebinar:De,enableAudioQos:D,enableVideoQos:P}))})}),io(()=>Np(u=>{var p;return null===(p=yf)||void 0===p?void 0:p.registerCallback(u)},u=>{var p;return null===(p=yf)||void 0===p?void 0:p.unregisterCallback(u)},(u,p)=>({type:u,data:p})).pipe(_t(u=>yv(u))))),connectedMediaStreamEpic:i=>bi(i,[GN,ty,qO,JO,ny,B_]).pipe(wR(l=>{const{payload:{type:u,data:p}}=l;if(u===ty||u===ny){if(p===es.EncodeSuccess)return vt(cu),or(ES("success"));if(p===es.DecodeSuccess)return vt(DE),or(No("success"));if(p===es.EncodeFailed)return vt(kE),or(ES("failed"));if(p===es.DecodeFailed)return vt(K2),or(No("failed"))}else if(u===GN||u===JO){if(p===es.EncodeSuccess)return vt(Yp),or($1("success"));if(p===es.DecodeSuccess)return vt(XL),or(Ev("success"));if(p===es.EncodeFailed)return vt(PE),or($1("failed"));if(p===es.DecodeFailed)return vt(AT),or(Ev("failed"))}else if(u===qO||u===B_){if(p===es.EncodeSuccess)return vt(vT),or(bS("success"));if(p===es.DecodeSuccess)return vt(HS),or(Bp("success"));if(p===es.EncodeFailed)return vt(z2),or(bS("failed"));if(p===es.DecodeFailed)return vt(jg),or(Bp("failed"));if(u===qO&&void 0===p)return vt(HS),or(Bp("success"))}})),mediaDeviceUpdateEpic:(i,l)=>bi(i,[GN,ty]).pipe(RP(()=>{if("object"==typeof navigator.mediaDevices)return Ss(OR(),Ss(bi(i,Jn.StartVideoCaptureSuccess),qa(navigator.mediaDevices,"devicechange"),bi(i,Jn.UserGrantCaptureAudio).pipe(kn(()=>!l.value.audio.isUserGrantCaptureAudio))).pipe($n(()=>OR().pipe(sr(()=>{vt(Mv)}))))).pipe(Un(l),$n(u=>{let[p,v]=u;const y=[VT(p.microphones),iB(p.speakers),tf(p.cameras)];if(v.audio){const{audio:{activeMicrophone:D,activeSpeaker:P,microphoneDevicesList:L,speakerDevicesList:W}}=v,{microphones:re,speakers:ee}=p,te=L.filter(Ee=>-1===re.findIndex(Te=>Te.deviceId===Ee.deviceId)),oe=W.filter(Ee=>-1===ee.findIndex(Te=>Te.deviceId===Ee.deviceId));var C,w;te.length>0&&te[0].deviceId===D&&(null===(C=yf)||void 0===C||C.changeMicrophone("default"),y.push(eA("default"))),oe.length>0&&oe[0].deviceId===P&&(null===(w=yf)||void 0===w||w.changeSpeaker("default"),y.push($E("default")))}return Mn(y)}))})),sendUserNodeListToMediaSDKEpic:(i,l)=>xs(i,Mo).pipe(sr(u=>{const{type:p,payload:{body:v}}=u,y=ji.getInstance(),C=p===`${gl}`;if(v.add){const w=v.add.map(D=>({userid:D.id,sn:D.zoomID&&vl(D.zoomID)}));if(!C){const{meeting:{gcmSessinKey:D}}=l.value;y.sendUserNodeList(w,D)}y.updateUserMediaSN({added:w,isFromMainSession:C,iVType:La.SHARING_DECODE}),C&&y.updateUserMediaSN({added:w,isFromMainSession:C,iVType:La.AUDIO_DECODE})}if(v.remove){if(!C){const{meeting:{gcmSessinKey:w}}=l.value;y.sendUserNodeList(v.remove.map(D=>({userid:D.id,bremove:!0})),w)}y.updateUserMediaSN({removed:v.remove.map(w=>w.id),isFromMainSession:C,iVType:La.SHARING_DECODE}),C&&y.updateUserMediaSN({removed:v.remove.map(w=>w.id),isFromMainSession:C,iVType:La.AUDIO_DECODE})}}),Qr(qt)),handleMediaSdkGcmIVResponseEpic:i=>bi(i,Jn.AesGcmIvResponse).pipe(sr(l=>{const{payload:{data:{workerType:u,iv:p}}}=l,v=ni.get(Ur.WebclientIVState);if(v){const y=cn(cn({},v),{},{[u]:p});ni.set(Ur.WebclientIVState,y,mi.SessionStorage)}}),Qr(qt)),handleMediaEncryptIndication:i=>i.pipe(fi(`${cd}`),kn(l=>[Ov,lT,Bg].includes(l.payload.evt)),_t(l=>{const{payload:{evt:u,body:{encryptKey:p,additionalType:v}}}=l;return Ng({type:u===Ov?"audio":u===lT?"video":"sharing",encryptKey:p,additionalType:v})}))})),WN={meeting:aI,socket:QP,participants:lI,media:sV},sw=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Jy;function KN(i){return function(l){for(var u=Object.keys(l),p={},v=0;v<u.length;v++){var y=u[v];"function"==typeof l[y]&&(p[y]=l[y])}var C,D,w=Object.keys(p);try{D=p,Object.keys(D).forEach(function(P){var L=D[P];if(void 0===L(void 0,{type:mS.INIT}))throw new Error(Da(12));if(void 0===L(void 0,{type:mS.PROBE_UNKNOWN_ACTION()}))throw new Error(Da(13))})}catch(D){C=D}return function(D,P){if(void 0===D&&(D={}),C)throw C;for(var L=!1,W={},re=0;re<w.length;re++){var ee=w[re],oe=D[ee],Ee=(0,p[ee])(oe,P);if(void 0===Ee)throw new Error(Da(14));W[ee]=Ee,L=L||Ee!==oe}return(L=L||w.length!==Object.keys(D).length)?W:D}}(cn(cn({},WN),i))}function Yn(i,l,u){const p=u.value;u.value=function(){const v=this[Us];if(v){const{meeting:{isOnHold:D,isMeetingReset:P,meetingStatus:L}}=v.getState();if(L!==Bi.Joined)return Promise.reject({type:hm,reason:"closed"});if(P)return Promise.reject({type:hm,reason:"reconnecting"});if(D)return Promise.reject({type:hm,reason:"on hold"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return p.apply(this,C)}}function $s(i,l,u){const p=u.value;u.value=function(){const v=this[Us];if(v){const D=v.getState();if(!Hu(D))return Promise.reject({type:rc,reason:"only host or co-host can do the operation"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return p.apply(this,C)}}function Dc(i,l,u){const p=u.value;u.value=function(){const v=this[Us];if(v){const D=v.getState();if(!rB(D))return Promise.reject({type:rc,reason:"only host can do the operation"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return p.apply(this,C)}}function Rr(i){return function(l,u,p){const v=p.value;p.value=function(){const y=this[Us];if(y&&void 0===y.getState()[i])return Promise.reject({type:Hn,reason:`Module:${i} is not enabled`});for(var C=arguments.length,w=new Array(C),D=0;D<C;D++)w[D]=arguments[D];return v.apply(this,w)}}}function Ml(i){return function(l,u,p){const v=p.value;p.value=function(){const y=this[Us];if(y){const{meeting:{meetingOptions:P}}=y.getState();if(!0===P[i])return Promise.reject({type:Qv,reason:`${i} is locked`})}for(var C=arguments.length,w=new Array(C),D=0;D<C;D++)w[D]=arguments[D];return v.apply(this,w)}}}let Th;function Qn(i){return function(l,u,p){const v=p.value;p.value=function(y){const C=this[Us];if(C){const W=C.getState(),re=Array.isArray(i)?i:[i];let ee=Zi(W).find(te=>te.userId===y);if(re.findIndex(te=>te===Th.Attendee)>-1&&(ee=Yv(W).find(te=>te.userId===y)),!ee)return Promise.reject({type:kr,reason:"no matching user"});{const{meeting:{userId:te}}=C.getState();for(let oe=0;oe<re.length;oe++){const Ee=re[oe];if(Ee===Th.Other&&y===te)return Promise.reject({type:Hn,reason:"operation is not applicable to self"});if(Ee===Th.Self&&y!==te)return Promise.reject({type:Hn,reason:"operation is only applicable to self "});if(Ee===Th.Client&&_m(ee.userType)||Ee===Th.Phone&&!_m(ee.userType))return Promise.reject({types:Hn,reason:"improper target client"})}}}for(var w=arguments.length,D=new Array(w>1?w-1:0),P=1;P<w;P++)D[P-1]=arguments[P];const L=[y,...D];return v.apply(this,L)}}}var qB,JB,zN,Kc;!function(i){i.Self="Self",i.Other="Other",i.Client="Client",i.Phone="Phone",i.Attendee="Attendee"}(Th||(Th={}));const ry=Wo.createAgent();let $B=(qB=Qn(Th.Other),JB=Qn(Th.Other),zN=Qn(Th.Other),jn((Kc=class extends Gm{constructor(i){super(i),this.modules=void 0,this.useSDK=void 0,this.useSDK=!1,this.modules=new Map}initWithSDK(i,l,u){return this.useSDK=!0,this.init(i,l,u)}init(i,l,u){const{[Oc]:p,[Us]:v}=this;let y=pA,C=u?.fileWithVersion||!1,w="en-US",D=`${pA}/${$f}`;if(u){const{dependentAssets:P,additionalFeatures:L,constraints:W,language:re,webEndpoint:ee}=u;if(re&&(w=re),ee&&(zC=function(oe,Ee){let Te=oe;/^https?:\/\//.test(Te)||(Te=`https://${oe}`);try{const De=new URL(Te);if(!Ee)return De.href;if(Ee.hostname)return De.hostname;if(Ee.path)return De.pathname}catch{return""}return""}(ee,{hostname:!0})),P===pE.CDN||P===ab)y=ab,D=`${ab}/${$f}`,C=!0;else if(P===pE.Global||P===pA)y=pA,D=`${pA}/${$f}`,C=!0;else if(P===pE.CN||P===RR)y=RR,D=`${RR}/${$f}`,C=!0;else if(P&&/^https?:\/\//.test(P)){let te=P;"/"===te[te.length-1]&&(te=te.slice(0,length-2)),y=te,D=C?`${te}/${$f}`:`${te}/${YL}`}L&&Array.isArray(L)&&L.forEach(te=>{if(this[jI][te]&&void 0===v.getState()[te]){const{epic:oe,reducer:Ee,Client:Te}=this[jI][te];v.injectReducer(te,Ee),v.injectEpic(oe);const De=new Te(v);this.modules.set(te,De)}}),null!=W&&W.audio&&void 0===v.getState().audio&&(v.injectReducer("audio",bO),v.injectEpic(Yb)),null!=W&&W.video&&void 0===v.getState().video&&(v.injectReducer("video",zB),v.injectEpic(YB)),null!=W&&W.screen&&void 0===v.getState().share&&(v.injectReducer("share",bB),v.injectEpic(MP))}return p(L2({apiKey:i,signature:l,language:w,useSDK:this.useSDK})),p(oE({mediaConstraints:u&&u.constraints||{},assetsPath:y,fileWithVersion:C,enforceMultipleVideos:u?.enforceMultipleVideos})),void 0!==u?.stayAwake&&p(Ic(u.stayAwake)),new Promise((P,L)=>{null!=u&&u.skipJsMedia?P(""):function(W,re,ee){const te=document.createElement("script");te.type="text/javascript",te.readyState?te.onreadystatechange=()=>{"loaded"!==te.readyState&&"complete"!==te.readyState||(te.onreadystatechange=null,re())}:(te.onload=()=>{re()},te.onerror=()=>{L({type:kr,reason:"dependent assets are not accessible"})}),te.src=W,"function"==typeof document.body.append?document.getElementsByTagName("head")[0].append(te):document.getElementsByTagName("head")[0].appendChild(te)}(D,()=>{P("")})})}on(i,l){((u,p)=>{const v=cC[u];if(v){const y=fm.get(u);if(y)y.push(p),fm.set(u,y);else{fm.set(u,[p]);const w=Ss(...v.map(D=>{const{event:P,payload:L}=D;return qa(Zp,P).pipe(_t(W=>L(W)),Gt(Ps))})).subscribe(D=>{const P=fm.get(u);P&&P.forEach(L=>{L(D)})});Yg.push(w)}}})(i,l)}off(i,l){((u,p)=>{if(cC[u]){const v=fm.get(u);if(Array.isArray(v)){const y=v.filter(C=>C!==p);fm.set(u,y)}}})(i,l)}getFeatureModule(i){return this.modules.get(i)}leave(){const{[lr]:i,[Oc]:l}=this;return"connected"===i().socket.zoomSocketStatus?(l(dE()),yc(500).pipe(Go("")).toPromise()):Promise.resolve("")}end(){const{[lr]:i,[Oc]:l}=this;return"connected"===i().socket.zoomSocketStatus?(l(Yf()),yc(500).pipe(sr(()=>{KE()}),Go("")).toPromise()):Promise.resolve("")}changeName(i,l){const u=this[Us].getState(),{meeting:{bAllowAttendeeRename:p}}=u,v=ii(u),y=Fa(v.userRole),C=Hu(u);if(y)return Promise.reject({type:rc});if(l&&l!==v?.userId){if(C){const{participants:{attendeesList:w}}=u,D=w.find(P=>P.userId===l);if(D)return ry.rename(l,Sa(i),Sa(D.displayName)),ob(l,P=>P.displayName===i);{const P=Yv(u).find(L=>L.userId===l);if(P){const L=f_.getInstance();return ry.rename(P.userId,Sa(i),Sa(P.displayName)),L.rename(P.jid,i),Ni(Fu,W=>{const re=W.find(ee=>ee.jid===P.jid);return re&&re.displayName===i})}return Promise.reject({type:kr,reason:"no matching user"})}}return Promise.reject({type:rc})}return i===v.displayName?Promise.resolve():C||p?(ry.rename(v.userId,Sa(i),Sa(v.displayName)),Ni(uh,w=>w.displayName===i)):Promise.reject({type:rc,reason:"host disallow rename themselves"})}makeHost(i){return ry.assignHost(i,!1),ob(i,l=>!0===l.isHost)}makeCoHost(i){const l=this[Us].getState();return!0===Zi(l).find(p=>p.userId===i)?.bCoHost?Promise.reject({type:kr,reason:`user:[${i}] is already co-host `}):(ry.assignHost(i,!0),ob(i,p=>!0===p.bCoHost))}revokeCoHost(i){const l=this[Us].getState();return!1===Zi(l).find(p=>p.userId===i)?.bCoHost?Promise.reject({type:kr,reason:`user:[${i}] is not a co-host`}):(ry.revokeCoHost(i),ob(i,p=>!1===p.bCoHost))}isHost(){const i=this[Us].getState(),l=ii(i);return!!l&&l.isHost}isCoHost(){const i=this[Us].getState(),l=ii(i);return!!l&&!!l.bCoHost}isOriginHost(){const{meeting:{isOriginHost:i}}=this[lr]();return i}getCurrentUserInfo(){const i=this[Us].getState(),l=ii(i);if(l){const u={userId:l.userId,userGuid:l.userGUID,displayName:l.displayName,audio:l.audio,muted:l.muted,isHost:l.isHost,isCoHost:l.bCoHost,isGuest:l.bGuest,avatar:l.avatar,isPhoneUser:_m(l.userType),bRaiseHand:l.bRaiseHand,bHold:l.bHold,bVideoOn:l.bVideoOn,sharerOn:l.sharerOn,sharePause:l.sharerPause,feedback:l.feedback,caps:l.caps};if(i.meeting.isWebinar&&Fa(l.userRole)){const{audio:p}=i,v=p?.isAllowToTalk;Object.assign(u,{isAllowToTalk:v})}return u}return null}getParticipantsList(){const i=this[Us].getState(),{meeting:{meetingStatus:l}}=i,u=ii(i);return l===Bi.Joined&&u&&!u.bHold?Zi(i).map(p=>({userId:p.userId,userGuid:p.userGUID,displayName:p.displayName,audio:p.audio,muted:p.muted,isHost:p.isHost,isCoHost:p.bCoHost,isGuest:p.bGuest,avatar:p.avatar,isPhoneUser:_m(p.userType),bRaiseHand:p.bRaiseHand,bHold:p.bHold,bVideoOn:p.bVideoOn,sharerOn:p.sharerOn,sharePause:p.sharerPause,feedback:p.feedback,bLocalRecord:p.bLocalRecord,strPronoun:p.strPronoun,sdkKey:p.sdkKey,audioConnectionStatus:p.audioConnectionStatus,caps:p.caps,bAllowISORecord:p.bAllowISORecord,bVideoConnect:p.bVideoConnect})):[]}getAssistantsList(){const i=this[Us].getState(),{meeting:{meetingStatus:l}}=i,u=ii(i);return l===Bi.Joined&&u?Jg(i).map(p=>({userId:p.userId,displayName:p.displayName,isNewAst:!0})):[]}getMeetingHost(){var i;const l=this[lr]();let u=fC(l);return u||(null===(i=l.breakoutRoom)||void 0===i?void 0:i.currentRoom.status)!==ur.InRoom||(u=l.breakoutRoom.mainSessionAttendeeList.find(p=>p.isHost)),u?{userId:u.userId,userGuid:u.userGUID,displayName:u.displayName,audio:u.audio,muted:u.muted,isHost:u.isHost,isCoHost:u.bCoHost,avatar:u.avatar,isPhoneUser:_m(u.userType),bRaiseHand:u.bRaiseHand,bHold:u.bHold,bVideoOn:u.bVideoOn,sharerOn:u.sharerOn,feedback:u.feedback}:null}getMeetingInfo(){const{meeting:{meetingStatus:i,isOnHold:l,meetingNumber:u,passWord:p,userName:v,userEmail:y,meetingTopic:C,meetingOptions:w,encType:D,region:P,network:L,topic:W,zlkJwtToken:re,userId:ee,lang:te,inviteEmail:oe,meetingId:Ee,participantID:Te,h323Password:De,recordingDisclaimer:Le,recordingDisclaimerForRecorder:et,wrInfo:lt}}=this[lr](),pt=i===Bi.Joined&&!l;if(re)return{topic:W,password:p,userName:v,isInMeeting:pt,userId:ee,meetingId:Ee};{let ht="";return 0===D?ht="None":1===D?ht="AES ECB":2===D&&(ht="AES GCM"),{meetingNumber:u,password:p,userName:v,userEmail:y,inviteEmail:oe,meetingTopic:C,encryptionType:ht,region:P,network:L,isInMeeting:pt,userId:ee,lang:te,webEndpoint:zC,meetingId:Ee,participantId:Te,telPwd:De,recordingInfo:{recordingDisclaimer:Le,recordingDisclaimerForRecorder:et,isUserEnableRecordingReminder:w?.isUserEnableRecordingReminder},wrInfo:lt}}}}).prototype,"end",[Dc,Yn],Object.getOwnPropertyDescriptor(Kc.prototype,"end"),Kc.prototype),jn(Kc.prototype,"changeName",[Yn],Object.getOwnPropertyDescriptor(Kc.prototype,"changeName"),Kc.prototype),jn(Kc.prototype,"makeHost",[qB,Dc,Yn],Object.getOwnPropertyDescriptor(Kc.prototype,"makeHost"),Kc.prototype),jn(Kc.prototype,"makeCoHost",[JB,Dc,Yn],Object.getOwnPropertyDescriptor(Kc.prototype,"makeCoHost"),Kc.prototype),jn(Kc.prototype,"revokeCoHost",[zN,Dc,Yn],Object.getOwnPropertyDescriptor(Kc.prototype,"revokeCoHost"),Kc.prototype),Kc);var aw=Object.freeze({__proto__:null,receiveChatMessageFromXMPPEpic:(i,l)=>sh(i,24583).pipe(Un(l),$n(u=>{let[p,v]=u;if(v.meeting.zlkJwtToken)return qt;const{payload:{body:{sn:y,senderName:C,senderJid:w,receiver:D,text:P,type:L}}}=p,W=ii(v),re=Yv(v),{meeting:{jid:ee,userId:te},participants:{xmppAttendeeList:oe}}=v;return ld.beginDecrypt({decryptedText:P,type:ec.XMPP_CHAT,zoomId:y}).then(Ee=>{var Te;let{message:De}=Ee,Le=null,et=0,lt="";W&&Fa(W.userRole)&&ee===D?(Le=oe.find(ht=>ht.jid===w),et=te,lt=W.displayName):L===Yi.Panelist&&(Le=re.find(ht=>ht.jid===w),et=Yi.Panelist,lt=tm.displayName);const pt={message:De,sender:{name:C,userId:(null===(Te=Le)||void 0===Te?void 0:Te.userId)||0,avatar:""},receiver:{name:lt,userId:et},timestamp:(new Date).getTime()};return vt(CE,pt),rR(pt)})})),receiveChatMessageFromRWGEpic:(i,l)=>ar(i,7944).pipe(Un(l),$n(u=>{let[p,v]=u;const{meeting:{bIbDisableChat:y,isWebinar:C},participants:{attendeesList:w}}=v,{payload:{body:{attendeeNodeID:D,sn:P,destNodeID:L,text:W,senderName:re,msgID:ee}}}=p,te=ii(v),oe=Yv(v);if(te){const Ee=Fa(te?.userRole)&&D===te.userId&&!ee;if(!y&&!Ee){let Te,De=P;if(!P){const Le=w.find(et=>et.userId===L);Le&&(De=Le.zoomID)}if(D===Yi.SilentModeUsers){const Le=Up(W),et={id:ee,message:Le,sender:{name:"Host",userId:L},receiver:{name:"Everyone (in Waiting Room)",userId:D},timestamp:(new Date).getTime()};Te=Promise.resolve(et)}else Te=ld.beginDecrypt({decryptedText:W,zoomId:De,type:ec.RWG_CHAT}).then(Le=>{let{message:et}=Le;const lt=w.find(gt=>gt.userId===L),pt=re?Up(re):lt?.displayName;let ht="";if(D===Yi.All)ht=C?"All panelists and attendees":"Everyone";else if(D===Yi.Panelist)ht="All panelists";else if(C&&oe.findIndex(gt=>gt.userId===D)>-1)ht=oe.find(gt=>gt.userId===D).displayName;else{const gt=w.find(Yt=>Yt.userId===D);gt&&(ht=gt.displayName)}return{id:ee,message:et,sender:{name:pt,userId:L,avatar:lt?.avatar},receiver:{name:ht,userId:D},timestamp:(new Date).getTime()}});return Te.then(Le=>(vt(CE,Le),rR(Le)))}}return qt})),changeAttendeePrivilegeResponse:(i,l)=>ar(i,tc).pipe(kn(u=>{var p,v;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.chatPriviledge)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.bAllowAttendeeChat)}),Un(l),_t(u=>{let[p,v]=u;const{payload:{body:{chatPriviledge:y,bAllowAttendeeChat:C}}}=p,{chat:{chatPrivilege:w}}=v;return void 0!==C?(vt(Zo,!0===C?{chatPrivilege:w}:{chatPrivilege:Vi.NoAttendee}),dB(C)):(vt(Zo,{chatPrivilege:y}),kC(y))})),changePanelistPrivilegeResponse:i=>ar(i,tc).pipe(kn(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.panelistChatPriviledge)}),_t(l=>{const{payload:{body:{panelistChatPriviledge:u}}}=l;return vt(Zo,{panelistChatPrivilege:u}),nR(u)})),chatResponseEpic:(i,l)=>ar(i,4136).pipe(Un(l),$n(u=>{let[p,v]=u;const{payload:{body:{result:y,destNodeID:C,msgID:w}}}=p,{meeting:{userId:D},chat:{chatHistory:P}}=v;if(y===em.Success){var L,W;const re=[];for(let te=P.length-1;te>=0;te--){const oe=P[te];if(!oe.id&&oe.sender.userId===D&&[Yi.All,Yi.Panelist,Yi.IndividualCcPanelist,C].includes(oe.receiver.userId)&&re.unshift(oe),oe.id)break}const ee=re.length>0&&null!==(L=null===(W=re[0])||void 0===W?void 0:W.highResTimeStampForIdentification)&&void 0!==L?L:0;return vt(IE,{msgId:w,receiverId:C,identification:ee}),or(oR({destNodeID:C,msgID:w,userId:D}))}return y===em.Delete||y===em.Block?or(PC({msgId:w})):qt})),chatCmdResponseEpic:i=>ar(i,4238).pipe($n(l=>{const{payload:{body:{bSuccess:u,cmd:p,msgID:v}}}=l,y=[];return u&&p===Dv.Delete&&(y.push(PC({msgId:v})),vt(wE,{id:v})),Mn(y)})),chatCmdIndicationEpic:i=>ar(i,7960).pipe($n(l=>{const{payload:{body:{cmd:u,msgID:p}}}=l,v=[];return u===Dv.Delete&&(v.push(PC({msgId:p})),vt(wE,{id:p})),Mn(v)}))});const XO={chatHistory:[],chatPrivilege:Vi.All,panelistChatPrivilege:as.AllPanelist,isAllowAttendeeChat:!0},ZO=Fr({[`${rR}`]:It((i,l)=>{let{payload:u}=l;i.chatHistory.push(u)}),[`${kC}`]:It((i,l)=>{let{payload:u}=l;i.chatPrivilege=u}),[`${nR}`]:It((i,l)=>{let{payload:u}=l;i.panelistChatPrivilege=u}),[`${dB}`]:It((i,l)=>{let{payload:u}=l;i.isAllowAttendeeChat=u}),[`${oR}`]:It((i,l)=>{let{payload:u}=l;const{destNodeID:p,msgID:v,userId:y}=u,C=[];for(let w=i.chatHistory.length-1;w>=0;w--){const D=i.chatHistory[w];if(!D.id&&D.sender.userId===y&&[Yi.All,Yi.Panelist,p].includes(D.receiver.userId)&&C.unshift(D),D.id)break}C.length>0&&(C[0].id=v)}),[`${PC}`]:It((i,l)=>{let{payload:u}=l;const{msgId:p}=u,v=i.chatHistory.findIndex(y=>y.id===p);v>=0&&i.chatHistory.splice(v,1)}),[`${iR}`]:()=>cn({},XO)},XO);function cw(i,l,u){if(null!=u&&u.host)return[fC(i),...tP(i)].filter(p=>p?.userId!==l).map(p=>({userId:p?.userId,displayName:p?.displayName,isHost:p?.isHost,isCoHost:p?.bCoHost}));{let p=[fC(i),...tP(i),...i.participants.attendeesList.filter(v=>!(v.bCoHost||v.isHost||v.bHold))];if(null!=u&&u.includeAttendee){const v=Yv(i).filter(y=>!_m(y.userType));p=[...p,...v]}return p.filter(v=>v?.userId!==l).map(v=>({userId:v?.userId,displayName:v?.displayName,isHost:v?.isHost,isCoHost:v?.bCoHost}))}}const Rh=["highResTimeStampForIdentification"],uw=["highResTimeStampForIdentification"];var ca;const iy=Wo.createAgent(),YN=f_.getInstance(),zr=i=>{const{text:l,destId:u,sn:p,attendeeId:v}=i;return ld.beginEncrypt({text:l,type:ec.RWG_CHAT}).then(y=>{iy.chat(y,u,p,v)})};let XB=(jn((ca=class extends Gm{send(i,l){if(!i)return Promise.reject({type:kr,reason:"Text is empty"});const{[lr]:u,[Oc]:p}=this,v=u(),y=ii(v),C=function(te,oe){if(oe===Yi.All)return vE;if(oe===Yi.Panelist)return tm;if(oe===Yi.SilentModeUsers)return H2;{const{meeting:{isWebinar:Ee},participants:{xmppAttendeeList:Te,attendeesList:De}}=te;return Ee?De.find(Le=>Le.userId===oe)||Te.find(Le=>Le.userId===oe):De.find(Le=>Le.userId===oe)}}(v,l),w=((te,oe,Ee)=>{const Te=oe?.userId;if(null==te||!te.zoomID||null==oe||!oe.displayName||Te===te.userId)return{type:kr,reason:"invalid target user"};const{chat:{chatPrivilege:De,panelistChatPrivilege:Le},meeting:{isWebinar:et}}=Ee,lt=Hu(Ee),pt=oe.isHost||oe.bCoHost;let ht=!1;if(!lt){if(et)if(Fa(te.userRole))(De===Vi.NoAttendee||De===Vi.AllPanelist&&Te!==Yi.Panelist||De===Vi.All&&Te!==Yi.All&&Te!==Yi.Panelist)&&(ht=!0);else{const gt=Fa(oe?.userRole);(Le===as.Invalid||Le===as.AllPanelist&&(gt||Te===Yi.All))&&(ht=!0)}else(De===Vi.NoAttendee||De===Vi.Host&&!pt||Te===Yi.SilentModeUsers||De===Vi.EveryonePublicly&&Te!==Yi.All&&!pt)&&(ht=!0);if(ht)return{type:rc,reason:"Insufficient chat privilege"}}return null})(y,C,v);if(w)return Promise.reject(w);const{meeting:{isWebinar:D,encType:P}}=v,L=P===ra.AES_GCM;let W=Promise.resolve(),re=!1;const ee=D&&Fa(C.userRole);return l===Yi.SilentModeUsers?iy.chat(Sa(i),l):D?ee?8==(8&C.clientCap)?W=zr({text:i,destId:Yi.IndividualCcPanelist,sn:y?.zoomID,attendeeId:l}):(W=zr({text:i,destId:Yi.Panelist,sn:y?.zoomID,attendeeId:l}).then(()=>(te=>{const{text:oe,jid:Ee,isGCMEnabled:Te}=te;return ld.beginEncrypt({text:oe,type:ec.XMPP_CHAT}).then(De=>{YN.sendWebinarMseeage(De,Ee,Yi.IndividualCcPanelist,Te)})})({text:i,jid:C.jid,isGCMEnabled:L})),re=!0):C&&(W=zr({text:i,destId:C.userId,sn:y?.zoomID})):W=zr({text:i,destId:C.userId,sn:y?.zoomID}),W.then(()=>{const te=(new Date).getTime(),oe=performance.now(),Ee={message:i,sender:{name:y?.displayName,userId:y?.userId,avatar:y?.avatar},receiver:{name:C?.displayName,userId:ee?Yi.IndividualCcPanelist:C?.userId},timestamp:te,highResTimeStampForIdentification:oe};return p(rR(Ee)),re?(vt(CE,Ee),Ee):new Promise((Te,De)=>{zs(IE).pipe(K1(5e3),xi(Le=>oe!==Le.identification||!([Le.receiverId,Yi.All,Yi.Panelist].includes(l)||Le.receiverId===Yi.IndividualCcPanelist)),Ns(1)).subscribe(Le=>{const{msgId:et}=Le,lt=cn(cn({id:et},Dr(Ee,Rh)),ee&&{receiver:{name:C?.displayName,userId:C?.userId}});vt(CE,lt),Te(lt)},()=>{De({type:Kg})})})})}setPrivilege(i){const l=this[lr](),{meeting:{isWebinar:u},chat:{chatPrivilege:p}}=l;return p===i?Promise.resolve(""):!u&&!dT.includes(i)||u&&!qL.includes(i)?Promise.reject({type:kr,reason:"invalid privilege value of parameter"}):(iy.setChatPriviledge(i),Ni(Zo,v=>v.chatPrivilege===i))}setPanelistPrivilege(i){const l=this[lr](),{chat:{panelistChatPrivilege:u}}=l,p=G4[i];return u===p?Promise.resolve(""):Object.values(_E).includes(i)?(iy.setPanelistChatPrivilege(i),Ni(Zo,v=>v.panelistChatPrivilege===p)):Promise.reject({type:kr,reason:"Panelist privilege value is invalid"})}deleteMessage(i){const l=this[lr](),{chat:{chatHistory:u},meeting:{meetingOptions:p,userId:v}}=l;if(null!=p&&p.isEnableDeleteChatMsg){const y=Hu(l),C=u.find(w=>w.id===i);if(C){const{sender:w}=C;if(y)iy.chatCmdReq(i,Dv.Delete);else{if(w.userId!==v)return Promise.reject({type:rc,reason:"can not delete message"});iy.chatCmdReq(i,Dv.Delete)}return Ni(wE,D=>D.id===i).then(()=>({id:i}))}return Promise.reject({type:kr,reason:"msgId is wrong"})}return Promise.reject({type:Hn,reason:"can not delete messages"})}lockChat(i){const l=this[lr](),{meeting:{meetingOptions:u}}=l;return this.setPrivilege(i?Vi.NoOne:null!=u&&u.isPrivateChatEnabled?Vi.All:Vi.EveryonePublicly)}getPrivilege(){const{chat:{chatPrivilege:i,isAllowAttendeeChat:l}}=this[lr]();return l?i:Vi.NoAttendee}getReceivers(){const i=this[lr](),{chat:{chatPrivilege:l,panelistChatPrivilege:u,isAllowAttendeeChat:p},meeting:{isWebinar:v}}=i;if(!v&&!p)return[];const y=ii(i),C=Hu(i);if(y)if(v)if(Fa(y.userRole)){if(!p)return[];if(l===Vi.All)return[tm,vE];if(l===Vi.AllPanelist)return[tm];if(l===Vi.NoOne)return[]}else{if(C||u===as.Everyone){const w=cw(i,y.userId,{includeAttendee:!0});return[tm,vE,...w]}if(u===as.AllPanelist){const w=cw(i,y.userId);return[tm,...w]}}else{const w=Hu(i);if(l===Vi.All||w){const D=cw(i,y.userId);return[vE,...D]}if(l===Vi.Host)return cw(i,y.userId,{host:!0});if(l===Vi.EveryonePublicly){const D=cw(i,y.userId,{host:!0});return[vE,...D]}if(l===Vi.NoOne)return[]}return[]}getHistory(){return this[lr]().chat.chatHistory.map(i=>Dr(i,uw))}isAllowToDeleteMessages(){const i=this[lr](),{meeting:{meetingOptions:l}}=i;return l?.isEnableDeleteChatMsg}}).prototype,"send",[Yn],Object.getOwnPropertyDescriptor(ca.prototype,"send"),ca.prototype),jn(ca.prototype,"setPrivilege",[$s,Yn],Object.getOwnPropertyDescriptor(ca.prototype,"setPrivilege"),ca.prototype),jn(ca.prototype,"setPanelistPrivilege",[$s,Yn,function(i,l,u){const p=u.value;u.value=function(){const v=this[Us];if(v){const{meeting:{isWebinar:D}}=v.getState();if(!D)return Promise.reject({type:hm,reason:"non-webinar"})}for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];return p.apply(this,C)}}],Object.getOwnPropertyDescriptor(ca.prototype,"setPanelistPrivilege"),ca.prototype),jn(ca.prototype,"deleteMessage",[Yn],Object.getOwnPropertyDescriptor(ca.prototype,"deleteMessage"),ca.prototype),jn(ca.prototype,"lockChat",[$s,Yn],Object.getOwnPropertyDescriptor(ca.prototype,"lockChat"),ca.prototype),ca);const eD=Ms(aw);var lw=Object.freeze({__proto__:null,handleRecordingEnableEpic:i=>i.pipe(fi(`${Cv}`),_t(l=>{const{payload:{recordingEnable:u}}=l;return FC(u)})),receiveCloudRecordIndication:(i,l)=>ar(i,tc).pipe(kn(u=>{var p,v,y;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.cmrServerStatus)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.disAllowClientStopAutoCmr)||void 0!==(null===(y=u.payload.body)||void 0===y?void 0:y.enableAutomicRecordingCloud)}),Un(l),$n(u=>{let[p,v]=u;const{cmrServerStatus:y,disAllowClientStopAutoCmr:C,enableAutomicRecordingCloud:w}=p.payload.body,D=[];return void 0!==y&&(y!==cs.Init&&(vt(ep,{cmrServerStatus:y}),v.recording.recordingIsoEnable&&y===cs.Start&&vt(mT,{status:K.RecordingStatus.Ask})),D.push(gR(y))),void 0!==C&&D.push(UC(!C)),void 0!==w&&D.push(cA(w)),Mn(D)})),receiveIsoCloudRecordIndication:i=>ar(i,tc).pipe(kn(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.bCmrIsoEnble)}),_t(l=>{const{bCmrIsoEnble:u}=l.payload.body;return Tm(u)})),receiveLocalRecordingIndicationEpic:i=>ar(i,Mo).pipe(kn(l=>{const{payload:{body:{update:u}}}=l;return u?.some(p=>void 0!==p.bLocalRecordStatus)}),sr(l=>{const{payload:{body:{update:u}}}=l;u.filter(p=>void 0!==p.bLocalRecordStatus).forEach(p=>{vt(G2,{userId:p.id,bLocalRecord:1===p.bLocalRecordStatus})})}),Qr(qt)),receiveUserISORecordingStatusEpic:i=>ar(i,Mo).pipe(kn(l=>{const{payload:{body:{update:u}}}=l;return u?.some(p=>void 0!==p.bAllowISORecord)}),sr(l=>{const{payload:{body:{update:u}}}=l;u.filter(p=>void 0!==p.bAllowISORecord).forEach(p=>{vt(mT,{userId:p.id,status:p.bAllowISORecord?K.RecordingStatus.Accept:K.RecordingStatus.Decline})})}),Qr(qt)),receiveIQResponseIndication:i=>ar(i,tc).pipe(kn(l=>{var u;return void 0!==(null===(u=l.payload.body)||void 0===u?void 0:u.SalesRecordingAnalytics)}),_t(l=>{const{SalesRecordingAnalytics:u}=l.payload.body;return vt(zn,{isZoomIQ:u}),uA(u)})),receiveIQOperationResponse:(i,l)=>ar(i,4319).pipe(Un(l),kn(u=>{var p;let[v]=u;return void 0!==(null===(p=v.payload.body)||void 0===p?void 0:p.success)}),$n(u=>{let[p,v]=u;const y=[],{success:C}=p.payload.body,{recording:{zoomIQChanging:w}}=v;return vt(W2,{success:C}),C&&y.push(_R(!w)),Mn(y)}))});const qN={cmrStatus:cs.Stop,recordingEnable:!1,recordingIsoEnable:!1,allowStopAutoRecording:!1,automaticCloudRecordingEnable:!1,isZoomIQ:!1,zoomIQChanging:!1},tD=Fr({[`${gR}`]:It((i,l)=>{let{payload:u}=l;i.cmrStatus=u}),[`${FC}`]:It((i,l)=>{let{payload:u}=l;i.recordingEnable=u}),[`${Tm}`]:It((i,l)=>{let{payload:u}=l;i.recordingIsoEnable=u}),[`${UC}`]:It((i,l)=>{let{payload:u}=l;i.allowStopAutoRecording=u}),[`${cA}`]:It((i,l)=>{let{payload:u}=l;i.automaticCloudRecordingEnable=u}),[`${uA}`]:It((i,l)=>{let{payload:u}=l;i.isZoomIQ=u}),[`${_R}`]:It((i,l)=>{let{payload:u}=l;i.zoomIQChanging=u}),[`${ib}`]:()=>cn({},qN)},qN);var dw,hw,F_,nD,oy,ua;const xl=Wo.createAgent();let ZB=(dw=Rr("recording"),hw=Rr("recording"),F_=Rr("recording"),nD=Rr("recording"),oy=Rr("recording"),jn((ua=class extends Gm{startRecording(){const i=this[lr](),{meeting:{bIbDisableRecording:l,recordingEnable:u},recording:{cmrStatus:p}}=i;return l?Promise.reject({type:Hn,reason:"Rejected by Information Barrier"}):u?p===cs.Start?Promise.resolve(""):(xl.recordMeeting(!0,!1),Ni(ep,v=>v.cmrServerStatus===cs.Start)):Promise.reject({type:Hn,reason:"The account of the meeting disabled the cloud recording"})}pauseRecording(){const i=this[lr](),{recording:{cmrStatus:l}}=i;return l===cs.Pause?Promise.resolve(""):l!==cs.Start?Promise.reject({type:Hn,reason:"Recording is not started"}):(xl.recordMeeting(!1,!0),Ni(ep,u=>u.cmrServerStatus===cs.Pause))}stopRecording(){const i=this[lr](),{recording:{cmrStatus:l}}=i;return l===cs.Stop?Promise.resolve(""):(xl.recordMeeting(!1,!1),Ni(ep,u=>u.cmrServerStatus===cs.Stop))}accept(){const i=this[lr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=i,p=ii(i);return u?l!==cs.Start&&l!==cs.Pause?Promise.reject({type:Hn,reason:"Recording is not started"}):null!=p&&p.bAllowISORecord?Promise.resolve("You accepted ISO recording"):(xl.allowSelfRecord(!0),Ni(mT,v=>v?.userId===p?.userId&&v?.status===K.RecordingStatus.Accept)):Promise.reject({type:Hn,reason:"ISO Recording is not enabled"})}decline(){const i=this[lr](),{recording:{cmrStatus:l,recordingIsoEnable:u}}=i,p=ii(i);return u?l!==cs.Start&&l!==cs.Pause?Promise.reject({type:Hn,reason:"Recording is not started"}):!0===p?.bAllowISORecord?Promise.reject({type:Hn,reason:"You had accept ISO recording, cant change it"}):(xl.allowSelfRecord(!1),Promise.resolve("")):Promise.reject({type:Hn,reason:"ISO Recording is not enabled"})}getRecordingStatus(){const i=this[lr](),{recording:{cmrStatus:l}}=i;return l===cs.Start?K.RecordingStatus.Recording:l===cs.Pause?K.RecordingStatus.Paused:K.RecordingStatus.Stopped}isRecordingEnabled(){const i=this[lr](),{recording:{recordingEnable:l}}=i;return l}isAllowedToStopAutoRecording(){const i=this[lr](),{recording:{allowStopAutoRecording:l}}=i;return l}isAutomaticCloudRecordingEnabled(){const i=this[lr](),{recording:{automaticCloudRecordingEnable:l}}=i;return l}enableRecordingWithIQ(i){const{[lr]:l,[Oc]:u}=this,p=l(),{recording:{isZoomIQ:v,zoomIQChanging:y},meeting:{meetingOptions:C}}=l();return C.isEnableKiwiRecording?Hu(p)?y?Promise.reject({type:Hn,reason:"We are changing, please wait"}):i===v?Promise.reject({type:Hn,reason:`You have ${i?"enable":"disable"} Zoom IQ, don't need change`}):(u(_R(!y)),u(uA(!v)),xl.enableZoomIQRecord(i),Ni(W2,w=>w?.success)):Promise.reject({type:Hn,reason:"Only Host or co-host can enable/disable Zoom IQ"}):Promise.reject({type:Hn,reason:"You not have zoom IQ license or not enable zoom IQ, please check and retry"})}}).prototype,"startRecording",[$s,Yn,dw],Object.getOwnPropertyDescriptor(ua.prototype,"startRecording"),ua.prototype),jn(ua.prototype,"pauseRecording",[$s,Yn,hw],Object.getOwnPropertyDescriptor(ua.prototype,"pauseRecording"),ua.prototype),jn(ua.prototype,"stopRecording",[$s,Yn,F_],Object.getOwnPropertyDescriptor(ua.prototype,"stopRecording"),ua.prototype),jn(ua.prototype,"accept",[Yn,nD],Object.getOwnPropertyDescriptor(ua.prototype,"accept"),ua.prototype),jn(ua.prototype,"decline",[Yn,oy],Object.getOwnPropertyDescriptor(ua.prototype,"decline"),ua.prototype),ua);const sy=Ms(lw);let la,a0;(function(i){i[i.All=1]="All",i[i.Private=2]="Private"})(la||(la={})),function(i){i.SUCCESS="success"}(a0||(a0={}));var pw=Object.freeze({__proto__:null,receiveCmdChannelResponseXMPPEpic:(i,l)=>sh(i,24577).pipe(Un(l),bd(u=>{let[p]=u;const{payload:{body:{status:v}}}=p;if(v===a0.SUCCESS)return vt(Gp,K.ConnectionState.Connected),vR(v)})),receiveCmdChannelMessageFromXMPPEpic:(i,l)=>sh(i,24583).pipe(Un(l),sr(u=>{let[p,v]=u;const{meeting:{userId:y,encType:C},cmd:{jids:w}}=v,{payload:{body:{senderName:D,senderJid:P,text:L,type:W,receiver:re,msgid:ee,sn:te}}}=p,oe=uE(w,re),Ee=C===ra.AES_GCM,Te=uE(w,P),De=(new Date).getTime();let Le=Promise.resolve({message:L});return Ee&&(Le=ld.beginDecrypt({decryptedText:L,type:ec.XMPP_CHAT,zoomId:te})),Le.then(et=>{let{message:lt}=et;(W===la.Private&&parseInt(oe,10)===y||W===la.All)&&vt(am,{senderId:Te,senderName:D,text:Up(lt),timestamp:De,msgid:ee})})}),Qr(qt)),receiveUserJidUpdateFromXMPPEpic:i=>sh(i,24595).pipe($n(l=>{const{payload:{body:{action:u,data:p}}}=l,v=[];return[Sd.List,Sd.Add,Sd.update].includes(u)&&p&&v.push(VC(p)),u===Sd.Remove&&p&&v.push(Rm(p)),Mn(v)}))});const vp={connectionStatus:"initial",jids:{}},eF=Fr({[`${AR}`]:()=>cn({},vp),[`${VC}`]:It((i,l)=>{let{payload:u}=l;u.map(p=>{const{jid:v,node:y}=p;i.jids[y]=v})}),[`${Rm}`]:It((i,l)=>{let{payload:u}=l;u.map(p=>{const{jid:v}=p,y=uE(i.jids,v);delete i.jids[y]})}),[`${vR}`]:It((i,l)=>{let{payload:u}=l;i.connectionStatus=u})},vp);var fw;const rD=f_.getInstance(),iD=(i,l,u)=>{const p=l,v=cE(i),y=p?la.Private:la.All;return u?ld.beginEncrypt({text:v,type:ec.XMPP_CHAT}).then(C=>{rD.sendWebinarMseeage(C,p,y,!0)}):rD.sendWebinarMseeage(v,p,y,!1)};let oD=(jn((fw=class extends Gm{send(i,l){if(!i)return Promise.reject({type:kr,reason:"Text is empty"});if("string"!=typeof i)return Promise.reject({type:kr,reason:"Text is not a string"});if(i.length>512)return Promise.reject({type:kr,reason:"Text exceeds the max length(512)."});const{[lr]:u}=this,p=u(),{socket:{xmppSocketStatus:v},meeting:{userId:y,encType:C},cmd:{connectionStatus:w}}=p,D=C===ra.AES_GCM;return v!==Co.Connected?Promise.reject({type:hm,reason:"Command channel is not ready"}):(w===a0.SUCCESS?Promise.resolve(!0):zs(Gp,1).toPromise().then(P=>P===K.ConnectionState.Connected||Promise.reject({type:Hn,reason:"Cannot establish the command channel"}))).then(()=>{if(l){const P=u(),{cmd:{jids:L}}=P;return-1!==Zi(P).findIndex(W=>W.userId===l)?(Object.prototype.hasOwnProperty.call(L,l)?Promise.resolve():zs(Fu).pipe(xi(re=>-1!==re.findIndex(ee=>ee.userId===l)),Ns(1),Gt(nd)).toPromise()).then(()=>(iD(i,L[l],D),{timestamp:(new Date).getTime(),text:i,receiverId:l,senderId:y})):Promise.reject({type:kr,reason:"Cannot find the user"})}return iD(i,"",D),{timestamp:(new Date).getTime(),text:i,receiverId:0,senderId:y}})}getJids(){const{[lr]:i}=this,l=i(),{cmd:{jids:u}}=l;return u}}).prototype,"send",[Yn],Object.getOwnPropertyDescriptor(fw.prototype,"send"),fw.prototype),fw);const JN=Ms(pw),c0=(i,l,u,p)=>{const{getState:v,dispatch:y}=u,C=v(),{participants:{attendeesList:w},audio:{localShareAudioUserMutedList:D},share:{isReceiveSharingFromMainSession:P},breakoutRoom:L}=C,W=(P?L?.mainSessionAttendeeList:w).find(re=>re.userId==i);if(W){if(W.bShareAudioOn){const re=D.find(ee=>ee.userId===i);return re&&re.muted===!l&&y(Cb(p,i,l,C)),Promise.resolve("")}return Promise.reject({type:Hn,reason:`Cannot ${l?"mute":"unmute"} share audio when the user's share audio is not enable.`})}return Promise.reject({type:kr,reason:"Cannot find the user"})},u0=(i,l)=>{const{store:{getState:u},rwgAgent:p}=i,{share:{sharePrivilege:v}}=u();return v===l?Promise.resolve(""):Object.values(Uu).includes(l)?(p.lockSharing(l),Ni(FS,y=>y.lockShare===l)):Promise.reject({type:kr})},sD=Ys([Zi],i=>i.filter(l=>l.bVideoOn)),aD=Ys([sD],i=>i.filter(l=>262144==(262144&l.caps)));var U_,mw,l0,gw,ay,_w,cD,d0,$m,V_,vw,$N,tF,XN,uD,nF,cy,Oh,h0,Aw,rF,iF,oF,ZN,p0,lD,uy,dD,hD,yw,Ef,Ew,bw,f0,pD,Sw,Cw,j_,fD,sF,aF,cF,mD,gD,eM,_D,tM,m0,vD,AD,Iw,nM,g0,_0,uF,ww,ly,rM,iM,lF,dF,Zt;let oM=(U_=Rr("audio"),mw=tl("start_audio"),l0=Rr("audio"),gw=tl("stop_audio"),ay=Rr("audio"),_w=tl("mute_audio"),cD=Rr("audio"),d0=tl("unmute_audio"),$m=Rr("audio"),V_=Rr("audio"),vw=Rr("audio"),$N=Rr("audio"),tF=Rr("audio"),XN=Rr("audio"),uD=Rr("share"),nF=tl("mute_sharing-audio"),cy=Rr("audio"),Oh=Rr("share"),h0=tl("unmute_sharing-audio"),Aw=Rr("audio"),rF=Rr("audio"),iF=Rr("video"),oF=tl("start_video"),ZN=Rr("video"),p0=tl("stop_video"),lD=Rr("video"),uy=Rr("video"),dD=Rr("video"),hD=Rr("video"),yw=Rr("video"),Ef=Rr("video"),Ew=Rr("video"),bw=Rr("video"),f0=Rr("video"),pD=Rr("video"),Sw=Rr("video"),Cw=Rr("video"),j_=Rr("video"),fD=Rr("video"),sF=Rr("video"),aF=Rr("video"),cF=Rr("video"),mD=Rr("video"),gD=Rr("video"),eM=Rr("share"),_D=Rr("share"),tM=Rr("share"),m0=Rr("share"),vD=Rr("share"),AD=tl("start_sharing-screen"),Iw=Rr("share"),nM=tl("stop_sharing-screen"),g0=Rr("share"),_0=tl("pause_sharing-screen"),uF=Rr("share"),ww=tl("resume_sharing-screen"),ly=Ml("isShareOptionLocked"),rM=Ml("isShareOptionLocked"),iM=Rr("share"),lF=Rr("share"),dF=Rr("share"),Zt=class extends Gm{constructor(i){super(i),this[Us].dispatch(_l()),this[Wn]={store:i,mediaAgent:gp(kR(ji.getInstance())),rwgAgent:Wo.createAgent()}}startAudio(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y,mediaAgent:C}=l,w=p(),{speakerOnly:D,autoStartAudioInSafari:P}=u||{},L=ii(w);if("computer"===L?.audio)return Promise.resolve();if("phone"===L?.audio)return Promise.reject({type:Hn,reason:"joined by phone"});{const{audio:{isAllowToTalk:W,isComputerAudioLoading:re,canPlayAudio:ee,isSpeakerOnly:te},media:{audioDecodeStatus:oe,audioEncodeStatus:Ee}}=w;if(re)return Promise.reject({type:Hn,reason:"Computer audio has been loading, please wait."});if(te!==!!D&&v(iP(!!D)),!L)return Promise.reject({type:Hn,reason:"Please call `startAudio` method after the `join` has been resolved"});{const{userRole:Te}=L,De=Fa(Te),Le=De&&!W||D||km()?"success":Ee,et=km()?"success":oe;if(wb()&&("success"!==et||"success"!==Le))return Promise.reject({type:Hn,reason:"It is required to wait for the audio encoding and decoding to be ready before calling `startAudio` method"});v(ym(!0)),mu("audio",Le,et).subscribe(lt=>{let[pt,ht]=lt;if(pt&&ht){let gt=ee||(wb()||jp())&&!P?Promise.resolve():function(){const Yt=URL.createObjectURL($L),Xt=new Audio(Yt);return Xt.muted=!1,jp()?new Promise((un,Tt)=>{var yn;Xt.addEventListener("canplaythrough",()=>{Xt.play().then(()=>{un(!0)}).catch(Kn=>{Tt(Kn)}).finally(()=>{URL.revokeObjectURL(Yt)})}),null===(yn=Xt.load)||void 0===yn||yn.call(Xt)}):Promise.race([Xt.play(),new Promise((un,Tt)=>{window.setTimeout(()=>{Tt()},3e3)})]).finally(()=>{URL.revokeObjectURL(Yt)})}();void 0===gt&&(gt=Promise.resolve()),gt.then(()=>{const Yt=p(),{audio:{isSharingAudio:Xt}}=Yt;y.joinOrLeaveVoip(!0),Xt||__(C,Yt,!(De&&!W||D)),De&&W&&v(jT(!0)),v(_C(!0))}).catch(()=>{v(_C(!1)),v(ym(!1))})}else v(ym(!1))})}return"failed"===Ee||"failed"===oe?(v(ym(!1)),Promise.reject({type:rp,reason:"audio encode or decode error"})):new Promise((Te,De)=>{id(zs(nc.JoinComputerAudio.success,1),Ss(...nc.JoinComputerAudio.fail.map(Le=>zs(Le,1).pipe($n(()=>Ki({type:rc,reason:Le}))))),yc(45e3).pipe($n(()=>Ki({type:Kg})))).subscribe(()=>{v(ym(!1)),Te("")},Le=>{(Le.type===rc||p().audio.canPlayAudio)&&y.joinOrLeaveVoip(!1),v(ym(!1)),De(Le)})})}})(this[Wn],i)}stopAudio(){return function(){var i=F(function*(l){const{store:{getState:u,dispatch:p},mediaAgent:v,rwgAgent:y}=l,C=u(),{audio:{isComputerAudioLoading:w,isShareAudioEnabled:D,isSharingAudio:P}}=C,L=ii(C);if(w)return Promise.reject({type:Hn,reason:"Computer audio has not finished joining, please wait."});if(D){if(P)return Promise.reject({type:Hn,reason:"Cannot stop audio during sharing with audio"});p(ef(void 0)),p($g(void 0))}return"computer"===L?.audio?(yield v.leaveComputerAudio(),y.joinOrLeaveVoip(!1),p(UT(0)),Ni(Hg)):Promise.resolve("")});return function(l){return i.apply(this,arguments)}}()(this[Wn])}muteAudio(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y}=l,C=p(),w=ii(C);if(null==u||u===w?.userId)return""===w?.audio||null===w?.audio?Promise.reject({type:Hn,reason:"no audio joined"}):!0===w?.muted?Promise.resolve(""):(C.audio.isShareAudioEnabled&&v($g(!0)),v(Wu(!0)),y.mute(w.userId,!0),Ni(qS).then(()=>""));if(Hu(C)){const{participants:{allowTalkAttendeesList:D,attendeesList:P}}=C,L=D.concat(P).find(W=>W.userId===u);return L?""===L.audio||null===L?Promise.reject({type:Hn,reason:"no audio joined"}):!1===L.muted?(y.mute(u,!0),Ni($2,W=>W.id===u&&1==W.muted)):Promise.resolve(""):Promise.reject({type:kr,reason:"no matching user"})}return Promise.reject({type:rc})})(this[Wn],i)}unmuteAudio(i){return(l=F(function*(u,p){const{store:{getState:v,dispatch:y},rwgAgent:C,mediaAgent:w}=u,D=v(),P=ii(D);if(void 0===p||p===P?.userId){if(""===P?.audio||null===P?.audio)return Promise.reject({type:Hn,reason:"no audio joined"});if(!1===P?.muted)return Promise.resolve("");if(D.audio.isShareAudioEnabled){if(D.audio.isSharingAudio)return Promise.reject({type:Hn,reason:"Cannot unmute audio during sharing with audio"});y($g(!1))}if(y(Wu(!0)),D.audio.bCanUnmute||null!=P&&P.isHost||null!=P&&P.bCoHost){if(Fa(P.userRole)){const{audio:{isAllowToTalk:L,isAllowToTalkAttendeeConnected:W}}=D;L?W||(yield w.leaveComputerAudio(),yield __(w,D,!0),y(jT(!0))):Promise.reject({type:Hn,reason:"Webinar attendee cannot unmute self audio."})}return C.mute(P.userId,!1),Ni(J2).then(()=>"")}return Promise.reject({type:rc,reason:"host not allow unmute themselves"})}if(Hu(D)){const{participants:{allowTalkAttendeesList:L,attendeesList:W}}=D,re=L.concat(W).find(ee=>ee.userId===p);return re?""===re.audio||null===re?Promise.reject({type:Hn,reason:"no audio joined"}):(!0===re.muted&&C.mute(p,!1),Promise.resolve("")):Promise.reject({type:kr,reason:"no matching user"})}return Promise.reject({type:rc})}),function(u,p){return l.apply(this,arguments)})(this[Wn],i);var l}dialOut(i,l,u,p){return((v,y,C,w,D)=>{const{store:{getState:P,dispatch:L},rwgAgent:W}=v,re=P(),{meeting:{callOutCountry:ee,isSupportCallOut:te}}=re;if(te&&Array.isArray(ee)&&ee.findIndex(oe=>oe.code===y)>-1){const{seq:oe}=W.audioDialout(y+C,w,!(null==D||!D.callMe),!(null==D||!D.pressingOne),!(null==D||!D.greeting));return L(rP(oe)),Gv(nc.JoinAudioByCallMe)}return Promise.reject({type:kr,reason:"no matching country code"})})(this[Wn],i,l,u,p)}cancelDialOut(i,l,u){return((p,v,y,C)=>{const{rwgAgent:w}=p;return w.audioCancelDialout(v+y,!(null==C||!C.callMe)),Gv(nc.cancelDialOut)})(this[Wn],i,l,u)}hangup(){return(i=>{const{store:{getState:l},rwgAgent:u}=i,p=l(),v=ii(p);return"phone"===v?.audio&&null!==v.userId?(u.audioDrop(v.userId),Gv(nc.hangup)):Promise.reject({type:Hn,reason:"not joined audio by phone"})})(this[Wn])}switchMicrophone(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,{audio:{microphoneDevicesList:C,activeMicrophone:w}}=p();return"default"!==u&&-1==C.findIndex(D=>D.deviceId===u)?Promise.reject({type:eC}):(u!==w&&(y.changeMicrophone(u),v(eA(u))),Promise.resolve(""))})(this[Wn],i)}switchSpeaker(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,{audio:{speakerDevicesList:C,activeSpeaker:w}}=p();return"default"!==u&&-1==C.findIndex(D=>D.deviceId===u)?Promise.reject({type:eC}):(u!==w&&(y.changeSpeaker(u),v($E(u))),Promise.resolve(""))})(this[Wn],i)}muteShareAudio(i){return((l,u)=>{const{mediaAgent:p,rwgAgent:v,store:{getState:y,dispatch:C}}=l,w=y(),{meeting:{userId:D}}=w;if(u&&u!==D)return c0(u,!0,l.store,p);{const{audio:{isSharingAudio:L,isShareAudioEnabled:W,isShareAudioMuted:re}}=w;if(!W)return Promise.reject({type:Hn,reason:"Cannot mute sharing audio when sharing audio is not enable"});if(re)return Promise.resolve("");{v.muteShareAudio(!0);let ee=Promise.resolve();var P;return L&&(ee=null===(P=p.leaveSharingAudio(!0))||void 0===P?void 0:P.then(()=>zR(p,v,w).then(te=>{te.forEach(oe=>C(oe))}))),Cb(p,D,!0,w),Promise.all([Ni({event:uh,operations:[kn(te=>void 0!==te.bShareAudioOn),Ns(1)]},te=>!1===te.bShareAudioOn),ee]).then(()=>(C(tA(!0)),L&&(C(op(!1)),vt(dm,{state:"off"})),""))}}})(this[Wn],i)}unmuteShareAudio(i){return((l,u)=>{const{mediaAgent:p,rwgAgent:v,store:{getState:y,dispatch:C}}=l,w=y(),{meeting:{userId:D}}=w;if(u&&u!==D)return c0(u,!1,l.store,p);{const{audio:{isSharingAudio:P,isShareAudioEnabled:L,isShareAudioMuted:W},share:{status:re}}=w;if(!L)return Promise.reject({type:Hn,reason:"Cannot unmute sharing audio when sharing audio is not enable"});if(!1===W)return Promise.resolve("");{v.muteShareAudio(!1);let ee=Promise.resolve();return!1===P&&re===K.ShareStatus.Sharing&&(ee=JR(p,v,w).then(te=>{te.forEach(oe=>C(oe))})),Cb(p,D,!1,w),Promise.all([Ni({event:uh,operations:[kn(te=>void 0!==te.bShareAudioOn),Ns(1)]},te=>!0===te.bShareAudioOn),ee]).then(()=>(C(tA(!1)),!1===P&&re===K.ShareStatus.Sharing&&(C(op(!0)),vt(dm,{state:"on"})),""))}}})(this[Wn],i)}subscribeAudioStatisticData(i){return(l=F(function*(u,p){const{mediaAgent:v,store:{getState:y}}=u,C=y(),{media:{audioDecodeStatus:w,audioEncodeStatus:D},audio:{isAllowToTalk:P}}=y(),L=ii(C),W=!p||p.decode,re=!p||p.encode;if(!L)return Promise.reject({type:Hn,reason:"Call this function after the 'join' method resolved."});{const{userRole:ee}=L,te=Fa(ee)&&!P||km()?"success":D,oe=km()?"success":w;mu("audio",te,oe).subscribe(Ee=>{let[Te,De]=Ee;Te&&De&&(W&&v.subscribeToQos([ia.AudioDecode],1e3),re&&v.subscribeToQos([ia.AudioEncode],1e3))})}return""}),function(u,p){return l.apply(this,arguments)})(this[Wn],i);var l}unsubscribeAudioStatisticData(i){return(l=F(function*(u,p){const{mediaAgent:v,store:{dispatch:y}}=u,w=!p||p.encode;return(!p||p.decode)&&(v.unsubscribeFromQos([ia.AudioDecode]),y(eo(jS))),w&&(v.unsubscribeFromQos([ia.AudioEncode]),y(AC(jS))),null}),function(u,p){return l.apply(this,arguments)})(this[Wn],i);var l}getMicList(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?[...u.audio.microphoneDevicesList]:[]})(this[Wn])}getSpeakerList(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?[...u.audio.speakerDevicesList]:[]})(this[Wn])}getAudioState(i){return((l,u)=>{let{store:{getState:p}}=l;const v=p(),{meeting:{isWebinar:y}}=v;let C=null;return null==u?C=ii(v):(C=v.participants.attendeesList.find(w=>w.userId===u),y&&!C&&(C=v.participants.xmppAttendeeList.find(w=>w.userId===u))),C?C.audio:null})(this[Wn],i)}isAudioMuted(i){return((l,u)=>{let{store:{getState:p}}=l;const v=p(),{meeting:{isWebinar:y}}=v;let C=null;return void 0===u?C=ii(v):(C=v.participants.attendeesList.find(w=>w.userId===u),y&&!C&&(C=v.participants.xmppAttendeeList.find(w=>w.userId===u))),!!C&&!!C.muted})(this[Wn],i)}getActiveMicrophone(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?u.audio.activeMicrophone:null})(this[Wn])}getActiveSpeaker(){return(i=>{let{store:{getState:l}}=i;const u=l();return u.audio?u.audio.activeSpeaker:null})(this[Wn])}isSupportCallOut(){return(i=>{let{store:{getState:l}}=i;const{meeting:{isSupportCallOut:u,callOutCountry:p}}=l();return u&&Array.isArray(p)&&p?.length>0})(this[Wn])}getDialOutStatus(){return(i=>{let{store:{getState:l}}=i;const{audio:u}=l();return u?.dialout.returnCode})(this[Wn])}getDialOutCountries(){return(i=>{let{store:{getState:l}}=i;const{meeting:{callOutCountry:u}}=l();return Array.isArray(u)?u:[]})(this[Wn])}getShareAudioStatus(){return(i=>{let{store:{getState:l}}=i;const{audio:{isShareAudioEnabled:u,isShareAudioMuted:p,isSharingAudio:v}}=l();return{isShareAudioEnabled:u,isShareAudioMuted:p,isSharingAudio:v}})(this[Wn])}isOthersShareAudioMutedLocally(i){return((l,u)=>{var p;let{store:{getState:v}}=l;const{audio:{localShareAudioUserMutedList:y}}=v();return null===(p=y.find(C=>C.userId===u))||void 0===p?void 0:p.muted})(this[Wn],i)}getAudioStatisticData(){return(i=>{let{store:{getState:l}}=i;const{audio:{statistic:u}}=l();return cn({},u)})(this[Wn])}startVideo(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,C=p(),{media:{videoDecodeStatus:w,videoEncodeStatus:D},video:{isCaptureCameraLoading:P,isCurrentUserStartedVideo:L,isVideoMuted:W}}=C;return L?Promise.reject({type:Hn,reason:"Video is started"}):P?Promise.reject({type:Hn,reason:"Camera is starting,please wait."}):W&&!Hu(C)?Promise.reject({type:Hn,reason:"Video is muted by the host"}):!QN()||null!=u&&u.videoElement?!PR()&&null!=u&&u.virtualBackground?Promise.reject({type:kr,reason:"Virtual background only compatible with Chrome and Edge with SharedArrayBuffer enabled."}):(v(iA(!0)),mu("video",D,w).subscribe(re=>{let[ee]=re;if(ee){const te=p(),{video:{activeCamera:oe,isSupportHDVideo:Ee,virtualBackground:{isVBConfigured:Te,isVBPreloadReady:De,imageSrc:Le}}}=te,{cameraId:et=oe,captureWidth:lt=0,captureHeight:pt=0,mirrored:ht,hd:gt,virtualBackground:Yt}=u||{};if(ht&&y.mirrorVideo(ht),gt&&(console.log("HD support is currently limited, and comes with a number of restrictions and limitations. Please visit https://marketplace.zoom.us/docs/sdk/overview/720p for more details"),Ee&&ji.isCompatibleHardwareForEncode()?ji.isSupportVideoEncodeHardwareAcceleration().then(Xt=>{Xt?(y.enableHardwareAccelerationForVideoEncode(!0),v(yd({encode:Xt}))):console.warn("Cannot capture HD video due to hardware limitation")}):console.warn("Cannot capture HD video due to either account restriction and/or hardware limitation")),Yt||void 0===Yt&&Le){const Xt=Yt||{imageUrl:void 0,cropped:void 0};QO(De).subscribe(un=>{if(un){let Tt;Tt=Te?Xt.imageUrl!==Le?VN(Xt.imageUrl,Xt.cropped,y):Promise.resolve():WO(cn(cn({},Xt),{},{captureWidth:lt,captureHeight:pt,cameraId:et}),y,te).then(yn=>zs(um,1).toPromise().then(Kn=>{var Pt;return y.stopVirtualBackgroundSetting(),Kn?(null==yn||null===(Pt=yn.parentNode)||void 0===Pt||Pt.removeChild(yn),!0):Promise.reject("vb setting error")})),Tt.then(()=>{jN(y,te,u).forEach(yn=>{v(yn)}),v(ap({imageSrc:Xt.imageUrl,cropped:Xt.cropped}))}).catch(()=>{vt(NE,{reason:"Cannot access the virtual background image."})})}else vt(NE,{reason:"Cannot load virtual background model."})})}else jN(y,te,u).forEach(Xt=>{v(Xt)})}else v(iA(!1))}),Gv(eB.startCaptureVideo).then(()=>{v(Cm(!1)),v(ZE(!1))}).finally(()=>{v(iA(!1))})):Promise.reject({type:kr,reason:"You must pass a <video> element to start video capture for Chromium browser, Android browser, and Chrome without SharedArrayBuffer support."})})(this[Wn],i)}stopVideo(){return(i=>{const{store:{getState:l},mediaAgent:u}=i,{video:{isCaptureCameraLoading:p,isCurrentUserStartedVideo:v}}=l();return p?Promise.reject({type:Hn,reason:"Camera is starting,please wait."}):v?(u.stopCaptureVideo(),Ni(Qg,y=>!0!==y?.failed)):Promise.reject({type:Hn,reason:"camera is closed"})})(this[Wn])}switchCamera(i){return((l,u)=>{const{store:{getState:p},mediaAgent:y}=l,C=p(),{video:{cameraDevicesList:w,isCurrentUserStartedVideo:D,virtualBackground:P}}=C;return zO(u,w)?((D||null!=P&&P.isVBConfigured)&&y.changeCamera(u),Promise.resolve()):Promise.reject({type:kr,reason:"Cannot find cameraDeviceId in camera devices list."})})(this[Wn],i)}renderVideo(i,l,u,p,v,y,C,w,D){return((P,L,W,re,ee,te,oe,Ee,Te,De)=>{const{store:{getState:Le,dispatch:et},mediaAgent:lt,rwgAgent:pt}=P,ht=Le(),{meeting:{userId:gt},media:{enforceMultipleVideos:Yt},video:{subscribedVideoList:Xt,renderedVideoList:un}}=ht;if(!L)return Promise.reject({type:kr,reason:"Received canvas is falsy"});const Tt=mE(!!Yt);if(!Xt.includes(W)&&Xt.length>=Tt&&new Set(un.map(Pt=>Pt.canvasId)).has(L.id))return Promise.reject({type:Hn,reason:`subscribe video counts greater than maximum size (${Tt})`});if(-1===sD(ht).findIndex(Pt=>Pt.userId===W))return Promise.reject({type:kr,reason:"user is not send video"});const yn=!!De,{media:{videoDecodeStatus:Kn}}=ht;return L.id||(L.id="__ZOOM_SDK_VIDEO_CANVAS_@__".replace("@",`${Math.floor(1e4*Math.random())}`)),mu("video","success",Kn).subscribe(Pt=>{let[mt]=Pt;if(mt){const{video:{isVerifiedVideoRenderCanvasAfterFailover:Ve,maximumNumbeOfHDSubscriptions:tt,isSupportHDVideo:Rt,renderedVideoList:st,receivedVideoMaxQuality:Bt}}=Le();let pe=L;!1===Ve&&(pe=fA(L),et(qT(!0)));const ye=W===gt,wn=Te||cm;let Kr=Ee;if(Ee===K.VideoQuality.Video_720P)if(Rt){const bo=st.filter(rs=>rs.videoQuality===K.VideoQuality.Video_720P).map(rs=>rs.userId);bo.length>=(tt??1)&&(bo.includes(W)||ye||(console.warn("Warning: Web Video SDK currently only supports subscribing to one 720p video stream, so quality has been downgraded to 360p"),Kr=K.VideoQuality.Video_360P))}else console.warn("Can not subscribe 720P video stream,will downgrade to 360P stream"),Kr=K.VideoQuality.Video_360P;st.some(bo=>bo.userId===W&&bo.key===wn&&bo.canvasId===pe.id)||lt.renderVideo(pe.id,W,wn,re,ee,te,oe,Kr,ye,De||"",yn);const Jo=Math.max(Bt,K.VideoQuality.Video_360P),bu=Math.min(Kr,Jo);W!==gt&&pt.subscribeVideo(W,bu,!1),Xt.includes(W)||et(fP(W)),et($T({userId:W,key:wn,canvasId:pe.id,videoQuality:Kr}))}}),"failed"===Kn?Promise.reject({type:rp,reason:"Video  decode status is failed"}):Promise.resolve("")})(this[Wn],i,l,u,p,v,y,C,w,D)}stopRenderVideo(i,l,u,p){return function(y,C,w,D,P){let L=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{store:{getState:W,dispatch:re},mediaAgent:ee,rwgAgent:te}=y,oe=W(),{video:{subscribedVideoList:Ee,renderedVideoList:Te},meeting:{userId:De}}=oe;if(!C||!C.id)return Promise.reject({type:kr,reason:"canvas is falsy"});if(Ee.includes(w)){const Le=D||cm;Te.find(et=>et.userId===w&&et.key===Le)&&(ee.stopRenderVideo(C.id,w,Le,jO(P),L),1==Te.filter(et=>et.userId===w).length&&(w!==De&&te.unsubscribeVideo(w),re(wC(w))),re(sp({userId:w,key:Le,canvasId:C.id})))}return Promise.resolve("")}(this[Wn],i,l,u,p,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}updateVideoCanvasDimension(i,l,u){return((p,v,y,C)=>{const{mediaAgent:w}=p;return v&&v.id?(w.updateRenderedVideoCanvasDimension(v.id,y,C),Promise.resolve("")):Promise.reject({type:kr,reason:"canvas is falsy"})})(this[Wn],i,l,u)}adjustRenderedVideoPosition(i,l,u,p,v,y,C){return((w,D,P,L,W,re,ee,te)=>{const{store:{getState:oe},mediaAgent:Ee}=w;if(!D||!D.id)return Promise.reject({type:kr,reason:"canvas is falsy"});const{video:{subscribedVideoList:Te}}=oe();return Te.includes(P)?(Ee.adjustRenderedVideoPosition(D.id,P,te||cm,re,ee,L,W,jO("#000")),Promise.resolve("")):Promise.reject({type:kr,reason:"userId is not correct"})})(this[Wn],i,l,u,p,v,y,C)}clearVideoCanvas(i,l){return((u,p,v)=>{const{mediaAgent:y}=u;return p&&p.id?(y.clearVideoCanvas(p.id,jO(v)),Promise.resolve("")):Promise.reject({type:kr,reason:"canvas is falsy"})})(this[Wn],i,l)}mirrorVideo(i){return((l,u)=>{const{store:{getState:p},mediaAgent:v}=l,{video:{isCurrentUserStartedVideo:y,virtualBackground:C}}=p();return(y||null!=C&&C.isVBConfigured)&&v.mirrorVideo(u),Promise.resolve("")})(this[Wn],i)}enableHardwareAcceleration(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,{video:{isSupportHDVideo:C}}=p();if("boolean"==typeof u||void 0!==u.decode){const w="boolean"==typeof u?u:!!u.decode;return w?ji.isSupportVideoDecodeHardwareAcceleration().then(D=>(D&&y.enableHardwareAccelerationForVideoDecode(D),v(yd({decode:D})),D)):(y.enableHardwareAccelerationForVideoDecode(w),v(yd({decode:w})),Promise.resolve(!0))}if("boolean"==typeof u||void 0!==u.encode){const w="boolean"==typeof u?u:!!u.encode;if(C){if(!w)return y.enableHardwareAccelerationForVideoEncode(!1),v(yd({encode:!1})),Promise.resolve(!0);if(ji.isCompatibleHardwareForEncode())return ji.isSupportVideoEncodeHardwareAcceleration().then(D=>(D&&y.enableHardwareAccelerationForVideoEncode(D),v(yd({encode:D})),D));console.warn("Can not turn on hardware acceleration with your graphic card due to the technical limitation")}else"boolean"!=typeof u&&null!=u&&u.encode&&console.warn("Can not use the hardware acceleration for video encoding due to the account restriction")}return Promise.resolve(!1)})(this[Wn],i)}subscribeVideoStatisticData(i){return(l=F(function*(u,p){const{mediaAgent:v,store:{getState:y}}=u,{media:{videoDecodeStatus:C,videoEncodeStatus:w}}=y(),D=!p||p.decode,P=!p||p.encode;return mu("video",w,C).subscribe(L=>{let[W,re]=L;D&&re&&v.subscribeToQos([ia.VideoDecode],1e3),P&&W&&v.subscribeToQos([ia.VideoEncode],1e3),null!=p&&p.detailed&&re&&v.enableVideoObserver(!0)}),null}),function(u,p){return l.apply(this,arguments)})(this[Wn],i);var l}unsubscribeVideoStatisticData(i){return(l=F(function*(u,p){const{mediaAgent:v,store:{dispatch:y}}=u,w=!p||p.encode;return(!p||p.decode)&&(v.unsubscribeFromQos([ia.VideoDecode]),y(ki(QS))),w&&(v.unsubscribeFromQos([ia.VideoEncode]),y(OC(QS))),null!=p&&p.detailed&&v.enableVideoObserver(!1),null}),function(u,p){return l.apply(this,arguments)})(this[Wn],i);var l}previewVirtualBackground(i,l,u){return((p,v,y,C)=>{const{store:{getState:w,dispatch:D},mediaAgent:P}=p,L=w(),{video:{activeCamera:W,virtualBackground:{isVBPreloadReady:re},isCurrentUserStartedVideo:ee}}=L;let te;return QO(re).subscribe(oe=>{oe&&WO({imageUrl:y,cropped:C,captureWidth:0,captureHeight:0,cameraId:W},P,L,v).then(Ee=>{te=Ee})}),(ee?Promise.resolve(!0).then(()=>(D(RC(!0)),!0)):zs(um,1).toPromise()).then(oe=>{var Ee,Te;return null===(Ee=te)||void 0===Ee||null===(Te=Ee.parentNode)||void 0===Te||Te.removeChild(te),oe?(D(ap({imageSrc:y,cropped:C})),!0):Promise.reject({type:Hn,reason:"Cannot preview virtual background"})})})(this[Wn],i,l,u)}updateVirtualBackgroundImage(i,l){return((u,p,v)=>{const{store:{getState:y,dispatch:C},mediaAgent:w}=u,D=y(),{video:{virtualBackground:{isVBConfigured:P,imageSrc:L,cropped:W}}}=D;return P?p===L&&v===W?Promise.resolve(!0):VN(p,v,w).then(()=>(C(ap({imageSrc:p,cropped:v})),!0)).catch(()=>Promise.reject({type:kr,reason:"Cannot load the image"})):Promise.reject({type:Hn,reason:"Cannot update vitrual background image, please preview or start video with virtual background first."})})(this[Wn],i,l)}stopPreviewVirtualBackground(){return(i=>{const{store:{getState:l},mediaAgent:u}=i,{video:{virtualBackground:{isVBConfigured:p}}}=l();return p?(u.stopVirtualBackgroundSetting(),Promise.resolve(!0)):Promise.reject({type:Hn,reason:"Cannot stop preview virtual background before start"})})(this[Wn])}requestFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p},rwgAgent:v}=l,y=p(),{meeting:{userId:C},video:{farEndCameraControlStatus:{controlledUserList:w}}}=y;return C===u?Promise.reject({type:Hn,reason:'Using "stream.controlCamera" method to control self camera'}):-1!==aD(y).findIndex(D=>D.userId===u)?(w.includes(u)||v.sendFarEndCameraControl(wc.Request,u),Promise.resolve("")):Promise.reject({type:kr,reason:"Cannot request control camera with video off"})})(this[Wn],i)}approveFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y}=l,{video:{currentCameraControlStatus:{isRequested:C,isInControl:w,controllingUserId:D},ptz:P,activeCamera:L}}=p();if(C){if(w&&(!D||u===D))return Promise.resolve("");y.sendFarEndCameraControl(wc.Approve,u);const W=P?.[L];return void 0!==W&&y.sendCameraAblity({pan:!!W.pan,tilt:!!W.tilt,zoom:!!W.zoom}),v(nf(!1)),v(DC({isInControl:!0,userId:u})),vt(lm,{isControlled:!0,userId:u}),Promise.resolve("")}return Promise.reject({type:Hn,reason:"Cannot approve before request"})})(this[Wn],i)}declineFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y}=l,{video:{currentCameraControlStatus:{isInControl:C,isRequested:w}}}=p();return w||C?(y.sendFarEndCameraControl(wc.Decline,u),v(nf(!1)),v(DC({isInControl:!1,userId:0})),vt(lm,{isControlled:!1}),Promise.resolve("")):Promise.reject({type:Hn,reason:"Cannot decline before request"})})(this[Wn],i)}giveUpFarEndCameraControl(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y}=l,{video:{farEndCameraControlStatus:{controlledUserList:C}}}=p();return C.includes(u)?(y.sendFarEndCameraControl(wc.GiveUp,u),v(oA(u)),Promise.resolve("")):Promise.reject({type:Hn,reason:"Cannot give up control befire aquired"})})(this[Wn],i)}controlCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,{video:{isCurrentUserStartedVideo:C,ptz:w,activeCamera:D}}=p();if(C){const{cmd:P,range:L,reset:W}=u,re=w[D];if(re){const ee=ow(re)||{},{key:te,range:oe}=iw(P,L);if(re[te])return Object.assign(ee,{[te]:W?0:rw(re[te].capability,re[te].value,oe)}),y.movePTZCamera(ee).then(()=>{v(tb({constraints:ee,deviceId:D}))}).catch(Ee=>Promise.reject({type:Hn,reason:Ee}))}return Promise.resolve("")}return Promise.reject({type:Hn,reason:"Cannot control the camera before it's started"})})(this[Wn],i)}controlFarEndCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y}=l,C=p(),{video:{farEndCameraControlStatus:{controlledUserList:w,isControlling:D}}}=C,{userId:P,cmd:L,range:W}=u;if(D)return Promise.reject({type:Hn,reason:"Cannot send new command while the previous control is not done"});if(w.includes(P)){if(L===np.SwitchCamera)return y.sendFarEndCameraControl(wc.SwitchCamera,P,np.SwitchCamera),Promise.resolve("");{const ee=aD(C).find(te=>te.userId===P);if(null==ee||!ee.nFECC)return Promise.reject({type:Hn,reason:"The far end camera does not support PTZ"});if(W&&W>0){const te=W/100*1e4;return y.sendFarEndCameraControl(wc.StartControl,P,L),v(Sl(!0)),Ig(200).pipe((re=yc(te-100),function(oe){return oe.lift(new Xy(re))})).subscribe(()=>{y.sendFarEndCameraControl(wc.ContinueControl,P,L)}),yc(te).pipe(sr(()=>{y.sendFarEndCameraControl(wc.StopControl,P,L),v(Sl(!1))})).toPromise().then(()=>"")}return Promise.reject({type:kr,reason:"Range cannot be negative or 0"})}}return Promise.reject({type:Hn,reason:"Cannot control before request granted"});var re})(this[Wn],i)}isCapturingVideo(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCurrentUserStartedVideo})(this[Wn])}isCameraTaken(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCameraTaken})(this[Wn])}isCaptureForbidden(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.video&&u.video.isCaptureForbidden})(this[Wn])}getCameraList(){return(i=>{const{store:{getState:l}}=i,u=l();if(!u.video)return[];const{video:{cameraDevicesList:p}}=u;return p.map(v=>Object.assign({},v))})(this[Wn])}getActiveCamera(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.activeCamera:""})(this[Wn])}getActiveVideoId(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.activeVideoId:0})(this[Wn])}getVideoMaxQuality(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.receivedVideoMaxQuality:K.VideoQuality.Video_90P})(this[Wn])}getReceivedVideoDimension(){return(i=>{const{store:{getState:l}}=i,u=l();return u.video?u.video.receivedVideoDimension:null})(this[Wn])}isSupportMultipleVideos(){return Rv()}isSupportHDVideo(){return(i=>{var l;const{store:{getState:u}}=i;return null===(l=u().video)||void 0===l?void 0:l.isSupportHDVideo})(this[Wn])}getHardwareAccelerationStatus(){return(i=>{var l;const{store:{getState:u}}=i;return null===(l=u().video)||void 0===l?void 0:l.hardwareAcceleration})(this[Wn])}getVideoStatisticData(){return(i=>{let{store:{getState:l}}=i;const{video:{statistic:u}}=l();return cn({},u)})(this[Wn])}isSupportVirtualBackground(){return PR()}getVirtualbackgroundStatus(){return(i=>{const{store:{getState:l}}=i;return cn({},l().video.virtualBackground)})(this[Wn])}isRenderSelfViewWithVideoElement(){return QN()}getNetworkQuality(i){return((l,u)=>{var p;const{store:{getState:v}}=l,y=v(),{video:C,meeting:{userId:w}}=y,P=null==C||null===(p=C.networkQuality)||void 0===p?void 0:p[`${u??w}`];if(P){const L={};return P.uplink&&Object.assign(L,{uplink:P.uplink.level}),P.downlink&&Object.assign(L,{downlink:P.downlink.level}),L}return null})(this[Wn],i)}getFarEndCameraPTZCapability(i){return((l,u)=>{const{store:{getState:p}}=l,v=aD(p()).find(y=>y.userId===u);return void 0!==v?.nFECC?YO(v?.nFECC):{pan:!1,tilt:!1,zoom:!1}})(this[Wn],i)}getCameraPTZCapability(i){return((l,u)=>{const{store:{getState:p}}=l,{video:{ptz:v,activeCamera:y}}=p(),C=v[u??y];return{pan:!(null==C||!C.pan),tilt:!(null==C||!C.tilt),zoom:!(null==C||!C.zoom)}})(this[Wn],i)}isBrowserSupportPTZ(){const{pan:i,tilt:l,zoom:u}=ji.getPTZCapability();return i||l||u}startShareView(i,l,u){return((p,v,y,C)=>{const{store:{getState:w,dispatch:D},mediaAgent:P,rwgAgent:L}=p,{share:{isReceiveSharing:W,isRemoteSharingActive:re,activeNodeId:ee,activeSsrc:te,shareQuality:oe,status:Ee,isVerifiedRenderCanvasAfterFailover:Te,isReceiveSharingFromMainSession:De},media:{sharingDecodeStatus:Le}}=w();if(!v||y!==ee)return Promise.reject({type:kr,reason:""});if(!re||W||Ee!==K.ShareStatus.End)return Promise.reject({type:Hn,reason:""});const et=!!C;return mu("sharing","success",Le).subscribe(lt=>{let[,pt]=lt;if(pt){let ht=v;!1===Te&&(ht=fA(v),D(dP(!0))),D(ph(!0)),L.subscribeSharing(y,oe,De),P.renderSharing(te,ht,et,C,De);const{audio:gt}=w();if(null!=gt&&gt.localShareAudioUserMutedList){const Yt=gt.localShareAudioUserMutedList.find(Xt=>Xt.userId===y);Yt&&P.setSharingAudioVolume(y,Yt.muted,Yt.isFromMainSession)}}}),"failed"===Le?Promise.reject({type:rp,reason:""}):Ni(sa,lt=>!!lt,6e4)})(this[Wn],i,l,u)}stopShareView(){return(i=>{const{store:{dispatch:l,getState:u},rwgAgent:p,mediaAgent:v}=i,{share:{isReceiveSharing:y,activeNodeId:C},breakoutRoom:w}=u();if(!y)return Promise.resolve("");let D=!1;return w?.currentRoom.status===ur.InRoom&&w.mainSessionAttendeeList.length>0&&(D=w.mainSessionAttendeeList.findIndex(P=>P.userId===C)>-1),v.stopRenderSharing(),p.unsubscribeSharing(C,D),l(ph(!1)),Promise.resolve("")})(this[Wn])}switchShareView(i){return((l,u)=>{const{store:{getState:p,dispatch:v},rwgAgent:y,mediaAgent:C}=l,w=p(),{share:{isReceiveSharing:D,activeNodeId:P,isRemoteControlApproved:L,isGrabRemoteControl:W,shareQuality:re,isReceiveSharingFromMainSession:ee},audio:te,breakoutRoom:oe}=w;if(!D)return Promise.reject({type:Hn});if(u===P)return Promise.resolve("");let Ee=[];return Ee=ee?oe.mainSessionAttendeeList.filter(Te=>Te.bShareToBORooms&&Te.sharerOn):rf(w),Ee.findIndex(Te=>Te.userId===P)>-1?(L&&(W&&y.subscribeGrabRemoteControl(P,!1),y.sharingRequestRemoteControl(P,!1)),y.unsubscribeSharing(P,ee),y.subscribeSharing(u,re,ee),C.switchSharingSource(u,ee),te?.localShareAudioUserMutedList.forEach(Te=>{C.setSharingAudioVolume(u,Te.userId!==u||Te.muted,Te.isFromMainSession)}),v(bC({bStatus:1,activeNodeID:u,ssrc:u})),Promise.resolve("")):Promise.reject({type:kr,reason:"no matching user id"})})(this[Wn],i)}updateSharingCanvasDimension(i,l){return((u,p,v)=>{const{store:{getState:y},mediaAgent:C}=u,w=y(),{share:{isReceiveSharing:D}}=w;return D&&C.updateRenderedSharingDimension(p,v),Promise.resolve("")})(this[Wn],i,l)}startShareScreen(i,l){return((u,p,v)=>{var y;const{store:{getState:C,dispatch:w},mediaAgent:D}=u,P=C(),{meeting:{bIbDisableShare:L,meetingOptions:W},share:{sharePrivilege:re,ssrc:ee,isChromeExtensionInstalled:te,isVerifiedCaptureCanvasAfterFailover:oe,isReceiveSharingFromMainSession:Ee},media:{sharingEncodeStatus:Te},breakoutRoom:De}=P;if(L)return Promise.reject({type:Hn,reason:"information barrier"});if("function"!=typeof(null===(y=navigator.mediaDevices)||void 0===y?void 0:y.getDisplayMedia))return Promise.reject({type:Hn,reason:"Unable to share your screen due to the technical limitation"});if(Ee)return Promise.reject({type:Hn,reason:"Unable to share your screen while someone is sharing from the main session"});if(Xh()&&!(p instanceof HTMLVideoElement))return Promise.reject({type:kr,reason:"Use Video element instead of Canvas element when WebCodecs enabled"});const Le=Hu(P);if(null!=v&&v.broadcastToBreakoutRoom){if(!Le||De?.currentRoom.status===ur.InRoom)return Promise.reject(Le?{type:Hn,reason:"Unable to share screen to breakout room when in the room"}:{type:rc});w(rA(!0))}else w(rA(!1));void 0!==v?.requestReadReceipt&&w(IC(v?.requestReadReceipt));const et=rf(P);if(re===Uu.OnlyHost&&!Le)return Promise.reject({type:rc,reason:"only host can start screen share"});if(re===Uu.HostGrab&&!Le&&et.length>0)return Promise.reject({type:rc,reason:"only host can grab screen share"});if(!0===ii(P)?.sharerOn)return Promise.reject({type:Hn,reason:"you have already started screen share."});let pt=or(!0);return NS()&&"function"!=typeof(null===(ht=navigator.mediaDevices)||void 0===ht?void 0:ht.getDisplayMedia)&&!te&&(D.checkChromeSharingExtension(),pt=zs(Uv,1)),p.id||(p.id="__ZOOM_SDK_SHARE_CANVAS_@__".replace("@",`${Math.floor(1e4*Math.random())}`)),Cg([mu("sharing",Te,"success"),pt]).subscribe(ht=>{let[gt,Yt]=ht;const[Xt]=gt;if(Xt&&Yt){!1===oe&&(fA(p),w(nA(!0)));let un=document.querySelector(`#${Kp}`);un&&"VIDEO"===un.tagName||(un=document.createElement("video"),un.id=Kp,un.style.display="none",document.body.appendChild(un));const Tt=null!=v&&v.secondaryCameraId?{cameraId:v.secondaryCameraId,width:v.captureWidth,height:v.captureHeight}:void 0;D.startDesktopSharing(ee,p.id,Kp,Tt,null==W||!W.isDisableShareAudioIntoBo||!(null!=v&&v.broadcastToBreakoutRoom)),w(CC(!!Tt))}}),new Promise((ht,gt)=>{id(zs(uh,1),zs(Uv).pipe(kn(Yt=>!Yt),Ns(1),Qr(Ki({reason:"required extension",extensionUrl:"https://chrome.google.com/webstore/detail/zoom-scheduler/kgjfgplpablkjnlkjmjdecgdpfankdle"}))),zs(rC,1).pipe($n(Yt=>Ki({reason:Yt.reason||"user deny screen share"})))).subscribe(Yt=>{if(!0===Yt.sharerOn){const{share:{isSharingToBreakoutRoom:Xt},meeting:{meetingOptions:un}}=C();D.enableShareAudioToBreakoutRoom(!(null!=un&&un.isDisableShareAudioIntoBo||!Xt)),ht("")}else gt({type:rp})},Yt=>{gt(cn({type:Hn},Yt))})});var ht})(this[Wn],i,l)}stopShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:v}=i,{share:{status:y},meeting:{userId:C}}=l();return y===K.ShareStatus.End?Promise.resolve(""):(u(Ku(K.ShareStatus.End)),p.stopSharing(C),v.stopDesktopSharing(),Ni(uh,w=>!1===w.sharerOn))})(this[Wn])}pauseShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:v}=i,{share:{status:y}}=l();return y===K.ShareStatus.Sharing?(p.pauseSharing(),v.pauseDesktopSharing(),Ni(uh,C=>!0===C.sharerPause).then(()=>(u(Ku(K.ShareStatus.Paused)),""))):Promise.reject({type:Hn})})(this[Wn])}resumeShareScreen(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:v}=i,{share:{status:y}}=l();return y===K.ShareStatus.Paused?(p.resumeSharing(),v.resumeDesktopSharing(),Ni(uh,C=>!0===C.sharerOn&&!1===C.sharerPause).then(()=>(u(Ku(K.ShareStatus.Sharing)),""))):Promise.reject({type:Hn})})(this[Wn])}setSharePrivilege(i){return u0(this[Wn],i)}lockShare(i){return u0(this[Wn],i?Uu.OnlyHost:Uu.HostGrab)}shareToBreakoutRoom(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:v}=i,{meeting:{userId:y},breakoutRoom:C,share:{isSharingToBreakoutRoom:w,status:D}}=l();return D===K.ShareStatus.End?Promise.reject({type:Hn,reason:"Invalid sharing status"}):w?Promise.resolve(""):C.currentRoom.status===ur.InRoom?Promise.reject({type:Hn,reason:"Unable to share screen to breakout room when in the room"}):(p.startShareToBreakoutRoom(y),u(rA(!0)),v.enableShareAudioToBreakoutRoom(!0),Promise.resolve(""))})(this[Wn])}stopShareToBreakoutRoom(){return(i=>{const{store:{getState:l,dispatch:u},rwgAgent:p,mediaAgent:v}=i,{meeting:{userId:y},share:{isSharingToBreakoutRoom:C}}=l();return C&&(p.stopShareToBreakoutRoom(y),u(rA(!1)),v.enableShareAudioToBreakoutRoom(!1)),Promise.resolve("")})(this[Wn])}muteOthersScreenShare(i){return((l,u)=>{const{store:{getState:p},rwgAgent:v}=l,y=p(),{meeting:{userId:C}}=y,w=rf(y);return u===C?Promise.reject({type:Hn,reason:"Cannot mute self share, use 'stopScreenShare' instead"}):-1===w.findIndex(D=>D.userId===u)?Promise.reject({type:kr,reason:"Target user is not sharing"}):(v.stopSharing(u),Ni(hd,D=>D.some(P=>P.userId===u&&!1===P.sharerOn)))})(this[Wn],i)}getShareUserList(){return(i=>{const{store:{getState:l}}=i,u=l();if(!u.share)return[];const{share:{isReceiveSharingFromMainSession:p}}=u;if(p){const{breakoutRoom:{mainSessionAttendeeList:v}}=u;return v.filter(y=>y.bShareToBORooms&&(y.sharerOn||y.sharerPause)).map(y=>({userId:y.userId,displayName:y.displayName,audio:y.audio,muted:y.muted,isHost:y.isHost,isCoHost:y.bCoHost,avatar:y.avatar,bVideoOn:y.bVideoOn,sharerOn:y.sharerOn,sharePause:y.sharerPause,shareToBORooms:y.bShareToBORooms}))}return rf(u).map(v=>({userId:v.userId,displayName:v.displayName,audio:v.audio,muted:v.muted,isHost:v.isHost,isCoHost:v.bCoHost,avatar:v.avatar,bVideoOn:v.bVideoOn,sharerOn:v.sharerOn,sharePause:v.sharerPause}))})(this[Wn])}getActiveShareUserId(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share&&u.share.isRemoteSharingActive?u.share.activeNodeId:0})(this[Wn])}isReceiveSharing(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.isReceiveSharing})(this[Wn])}getShareViewDimension(){return(i=>{const{store:{getState:l}}=i,u=l();if(u.share){if(u.share.status!==K.ShareStatus.End)return cn({},u.share.shareDimension);{const{share:{receivedShareDimension:p}}=u;return{width:p.width,height:p.height}}}return null})(this[Wn])}getShareStatus(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share?u.share.status:null})(this[Wn])}isShareLocked(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.sharePrivilege===Uu.OnlyHost})(this[Wn])}isReceiveSharingFromMainSession(){return(i=>{const{store:{getState:l}}=i,u=l();return!!u.share&&u.share.isReceiveSharingFromMainSession})(this[Wn])}getSharePrivilege(){return(i=>{const{store:{getState:l}}=i,u=l();return u.share?u.share.sharePrivilege:null})(this[Wn])}isStartShareScreenWithVideoElement(){return Xh()}},jn(Zt.prototype,"startAudio",[Yn,U_,mw],Object.getOwnPropertyDescriptor(Zt.prototype,"startAudio"),Zt.prototype),jn(Zt.prototype,"stopAudio",[Yn,l0,gw],Object.getOwnPropertyDescriptor(Zt.prototype,"stopAudio"),Zt.prototype),jn(Zt.prototype,"muteAudio",[Yn,ay,_w],Object.getOwnPropertyDescriptor(Zt.prototype,"muteAudio"),Zt.prototype),jn(Zt.prototype,"unmuteAudio",[Yn,cD,d0],Object.getOwnPropertyDescriptor(Zt.prototype,"unmuteAudio"),Zt.prototype),jn(Zt.prototype,"dialOut",[Yn,$m],Object.getOwnPropertyDescriptor(Zt.prototype,"dialOut"),Zt.prototype),jn(Zt.prototype,"cancelDialOut",[Yn,V_],Object.getOwnPropertyDescriptor(Zt.prototype,"cancelDialOut"),Zt.prototype),jn(Zt.prototype,"hangup",[Yn,vw],Object.getOwnPropertyDescriptor(Zt.prototype,"hangup"),Zt.prototype),jn(Zt.prototype,"switchMicrophone",[Yn,$N],Object.getOwnPropertyDescriptor(Zt.prototype,"switchMicrophone"),Zt.prototype),jn(Zt.prototype,"switchSpeaker",[Yn,tF],Object.getOwnPropertyDescriptor(Zt.prototype,"switchSpeaker"),Zt.prototype),jn(Zt.prototype,"muteShareAudio",[Yn,XN,uD,nF],Object.getOwnPropertyDescriptor(Zt.prototype,"muteShareAudio"),Zt.prototype),jn(Zt.prototype,"unmuteShareAudio",[Yn,cy,Oh,h0],Object.getOwnPropertyDescriptor(Zt.prototype,"unmuteShareAudio"),Zt.prototype),jn(Zt.prototype,"subscribeAudioStatisticData",[Yn,Aw],Object.getOwnPropertyDescriptor(Zt.prototype,"subscribeAudioStatisticData"),Zt.prototype),jn(Zt.prototype,"unsubscribeAudioStatisticData",[Yn,rF],Object.getOwnPropertyDescriptor(Zt.prototype,"unsubscribeAudioStatisticData"),Zt.prototype),jn(Zt.prototype,"startVideo",[Yn,iF,oF],Object.getOwnPropertyDescriptor(Zt.prototype,"startVideo"),Zt.prototype),jn(Zt.prototype,"stopVideo",[Yn,ZN,p0],Object.getOwnPropertyDescriptor(Zt.prototype,"stopVideo"),Zt.prototype),jn(Zt.prototype,"switchCamera",[Yn,lD],Object.getOwnPropertyDescriptor(Zt.prototype,"switchCamera"),Zt.prototype),jn(Zt.prototype,"renderVideo",[Yn,uy],Object.getOwnPropertyDescriptor(Zt.prototype,"renderVideo"),Zt.prototype),jn(Zt.prototype,"stopRenderVideo",[Yn,dD],Object.getOwnPropertyDescriptor(Zt.prototype,"stopRenderVideo"),Zt.prototype),jn(Zt.prototype,"updateVideoCanvasDimension",[Yn,hD],Object.getOwnPropertyDescriptor(Zt.prototype,"updateVideoCanvasDimension"),Zt.prototype),jn(Zt.prototype,"adjustRenderedVideoPosition",[Yn,yw],Object.getOwnPropertyDescriptor(Zt.prototype,"adjustRenderedVideoPosition"),Zt.prototype),jn(Zt.prototype,"clearVideoCanvas",[Yn,Ef],Object.getOwnPropertyDescriptor(Zt.prototype,"clearVideoCanvas"),Zt.prototype),jn(Zt.prototype,"mirrorVideo",[Yn,Ew],Object.getOwnPropertyDescriptor(Zt.prototype,"mirrorVideo"),Zt.prototype),jn(Zt.prototype,"enableHardwareAcceleration",[Yn,bw],Object.getOwnPropertyDescriptor(Zt.prototype,"enableHardwareAcceleration"),Zt.prototype),jn(Zt.prototype,"subscribeVideoStatisticData",[Yn,f0],Object.getOwnPropertyDescriptor(Zt.prototype,"subscribeVideoStatisticData"),Zt.prototype),jn(Zt.prototype,"unsubscribeVideoStatisticData",[Yn,pD],Object.getOwnPropertyDescriptor(Zt.prototype,"unsubscribeVideoStatisticData"),Zt.prototype),jn(Zt.prototype,"previewVirtualBackground",[Yn,Sw],Object.getOwnPropertyDescriptor(Zt.prototype,"previewVirtualBackground"),Zt.prototype),jn(Zt.prototype,"updateVirtualBackgroundImage",[Yn,Cw],Object.getOwnPropertyDescriptor(Zt.prototype,"updateVirtualBackgroundImage"),Zt.prototype),jn(Zt.prototype,"stopPreviewVirtualBackground",[Yn,j_],Object.getOwnPropertyDescriptor(Zt.prototype,"stopPreviewVirtualBackground"),Zt.prototype),jn(Zt.prototype,"requestFarEndCameraControl",[Yn,fD],Object.getOwnPropertyDescriptor(Zt.prototype,"requestFarEndCameraControl"),Zt.prototype),jn(Zt.prototype,"approveFarEndCameraControl",[Yn,sF],Object.getOwnPropertyDescriptor(Zt.prototype,"approveFarEndCameraControl"),Zt.prototype),jn(Zt.prototype,"declineFarEndCameraControl",[Yn,aF],Object.getOwnPropertyDescriptor(Zt.prototype,"declineFarEndCameraControl"),Zt.prototype),jn(Zt.prototype,"giveUpFarEndCameraControl",[Yn,cF],Object.getOwnPropertyDescriptor(Zt.prototype,"giveUpFarEndCameraControl"),Zt.prototype),jn(Zt.prototype,"controlCamera",[Yn,mD],Object.getOwnPropertyDescriptor(Zt.prototype,"controlCamera"),Zt.prototype),jn(Zt.prototype,"controlFarEndCamera",[Yn,gD],Object.getOwnPropertyDescriptor(Zt.prototype,"controlFarEndCamera"),Zt.prototype),jn(Zt.prototype,"startShareView",[Yn,eM],Object.getOwnPropertyDescriptor(Zt.prototype,"startShareView"),Zt.prototype),jn(Zt.prototype,"stopShareView",[Yn,_D],Object.getOwnPropertyDescriptor(Zt.prototype,"stopShareView"),Zt.prototype),jn(Zt.prototype,"switchShareView",[Yn,tM],Object.getOwnPropertyDescriptor(Zt.prototype,"switchShareView"),Zt.prototype),jn(Zt.prototype,"updateSharingCanvasDimension",[Yn,m0],Object.getOwnPropertyDescriptor(Zt.prototype,"updateSharingCanvasDimension"),Zt.prototype),jn(Zt.prototype,"startShareScreen",[Yn,vD,AD],Object.getOwnPropertyDescriptor(Zt.prototype,"startShareScreen"),Zt.prototype),jn(Zt.prototype,"stopShareScreen",[Yn,Iw,nM],Object.getOwnPropertyDescriptor(Zt.prototype,"stopShareScreen"),Zt.prototype),jn(Zt.prototype,"pauseShareScreen",[Yn,g0,_0],Object.getOwnPropertyDescriptor(Zt.prototype,"pauseShareScreen"),Zt.prototype),jn(Zt.prototype,"resumeShareScreen",[Yn,uF,ww],Object.getOwnPropertyDescriptor(Zt.prototype,"resumeShareScreen"),Zt.prototype),jn(Zt.prototype,"setSharePrivilege",[$s,ly,Yn],Object.getOwnPropertyDescriptor(Zt.prototype,"setSharePrivilege"),Zt.prototype),jn(Zt.prototype,"lockShare",[$s,rM,Yn],Object.getOwnPropertyDescriptor(Zt.prototype,"lockShare"),Zt.prototype),jn(Zt.prototype,"shareToBreakoutRoom",[Yn,$s,iM],Object.getOwnPropertyDescriptor(Zt.prototype,"shareToBreakoutRoom"),Zt.prototype),jn(Zt.prototype,"stopShareToBreakoutRoom",[Yn,$s,lF],Object.getOwnPropertyDescriptor(Zt.prototype,"stopShareToBreakoutRoom"),Zt.prototype),jn(Zt.prototype,"muteOthersScreenShare",[Yn,$s,dF],Object.getOwnPropertyDescriptor(Zt.prototype,"muteOthersScreenShare"),Zt.prototype),Zt);var Q_,hF,pF,fF,Ll;let dV=(Q_=Rr("share"),hF=Rr("audio"),pF=Rr("audio"),fF=Rr("audio"),jn((Ll=class extends oM{switchSharingSecondaryCamera(i){return((l,u)=>{const{store:{getState:p,dispatch:v},mediaAgent:y}=l,C=p(),{video:{cameraDevicesList:w},share:{status:D,isSharingWithSecondCamera:P}}=C;return"default"!==u&&-1===w.map(L=>L.deviceId).indexOf(u)?Promise.reject({type:kr,reason:"Cannot find cameraDeviceId in camera devices list."}):(D===K.ShareStatus.Sharing&&P&&y.changeSharingSecondCamera(u),v(hP(u)),Promise.resolve())})(this[Wn],i)}muteUserAudioLocally(i){return((l,u)=>{const{mediaAgent:p,store:{getState:v,dispatch:y}}=l,C=v(),{audio:{locallyMutedAudioList:w}}=C,D=Zi(C).filter(P=>"computer"===P.audio);return w.includes(u)||-1===D.findIndex(P=>P.userId===u)||(p.muteOrUnmuteOtherAudio(u,!0),y(sP(u))),Promise.resolve("")})(this[Wn],i)}unmuteUserAudioLocally(i){return((l,u)=>{const{mediaAgent:p,store:{getState:v,dispatch:y}}=l,{audio:{locallyMutedAudioList:C}}=v();return C.includes(u)&&(p.muteOrUnmuteOtherAudio(u,!1),y(yC(u))),Promise.resolve("")})(this[Wn],i)}adjustUserAudioVolumeLocally(i,l){return((u,p,v)=>{const{mediaAgent:y,store:{getState:C,dispatch:w}}=u,D=C();return-1!==Zi(D).findIndex(P=>P.userId===p)&&(y.adjustOtherAudioVolume(p,v),w(EC({userId:p,volume:v}))),Promise.resolve("")})(this[Wn],i,l)}isUserAudioMutedLocally(i){return((l,u)=>{let{store:{getState:p}}=l;const{audio:{locallyMutedAudioList:v}}=p();return v.includes(u)})(this[Wn],i)}getUserVolumeLocally(i){return((l,u)=>{var p,v;let{store:{getState:y}}=l;const{audio:{localUserAudioVolumeList:C,locallyMutedAudioList:w}}=y();return null!==(p=null===(v=C.find(D=>D.userId===u))||void 0===v?void 0:v.volume)&&void 0!==p?p:w.includes(u)?0:100})(this[Wn],i)}}).prototype,"switchSharingSecondaryCamera",[Yn,Q_],Object.getOwnPropertyDescriptor(Ll.prototype,"switchSharingSecondaryCamera"),Ll.prototype),jn(Ll.prototype,"muteUserAudioLocally",[Yn,hF],Object.getOwnPropertyDescriptor(Ll.prototype,"muteUserAudioLocally"),Ll.prototype),jn(Ll.prototype,"unmuteUserAudioLocally",[Yn,pF],Object.getOwnPropertyDescriptor(Ll.prototype,"unmuteUserAudioLocally"),Ll.prototype),jn(Ll.prototype,"adjustUserAudioVolumeLocally",[Yn,fF],Object.getOwnPropertyDescriptor(Ll.prototype,"adjustUserAudioVolumeLocally"),Ll.prototype),Ll);const Tw={controlStatus:hi.NotStarted,sequenceId:1,rooms:[],isHugeBO:!1,allocationPattern:vm.Automatically,currentRoom:{status:ur.Initial,boStatus:JE.NoToken,boConfId:"",boId:"",name:"",boToken:""},options:{isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},mainSessionAttendeeList:[],preAssignedRooms:[],meetingElapsedTime:0,startRoomElapsedTime:0,closingRoomTime:0,broadcastMessage:"",hostReplyToQuestionerType:void 0,hostReplyToRequestId:void 0,isUserRoleUpdated:!1,mainSessionConfId:"",isEnableBOBroadcast:!1,isEnableBreakoutRoom:!1},v0=Fr({[`${aR}`]:It((i,l)=>{let{payload:u}=l;Array.isArray(u)?i.rooms.push(...u):i.rooms.push(u)}),[`${cR}`]:It((i,l)=>{let{payload:u}=l;i.allocationPattern=u}),[`${nb}`]:It((i,l)=>{let{payload:u}=l;i.sequenceId=u}),[`${uR}`]:It((i,l)=>{let{payload:u}=l;i.meetingElapsedTime=u}),[`${lR}`]:It((i,l)=>{let{payload:u}=l;i.startRoomElapsedTime=u}),[`${dR}`]:It((i,l)=>{let{payload:u}=l;const{options:p}=i;Object.assign(p,u)}),[`${wm}`]:It((i,l)=>{let{payload:u}=l;i.controlStatus=u}),[`${n_}`]:It((i,l)=>{let{payload:u}=l;i.rooms=u}),[`${NC}`]:It((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;Object.assign(p,u)}),[`${aA}`]:It((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.status=u}),[`${MC}`]:It((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.boConfId=u}),[`${xC}`]:It((i,l)=>{let{payload:u}=l;const{currentRoom:p}=i;p.boToken=u}),[`${hR}`]:It((i,l)=>{let{payload:u}=l;i.closingRoomTime=u}),[`${LC}`]:It((i,l)=>{let{payload:u}=l;i.broadcastMessage=u}),[`${rb}`]:It((i,l)=>{let{payload:u}=l;i.hostReplyToQuestionerType=u}),[`${yP}`]:It((i,l)=>{let{payload:u}=l;i.hostReplyToRequestId=u}),[`${BC}`]:It((i,l)=>{let{payload:u}=l;void 0!==u.add&&u.add.length>0&&u.add.forEach(p=>{const v=i.mainSessionAttendeeList.find(y=>y.userId===p.userId);void 0!==v?Object.assign(v,p):Bs(p.userRole)||i.mainSessionAttendeeList.push(p)}),void 0!==u.update&&u.update.length>0&&u.update.forEach(p=>{const v=i.mainSessionAttendeeList.find(y=>y.userId===p.userId);void 0!==v&&Object.assign(v,p)}),void 0!==u.remove&&u.remove.length>0&&u.remove.forEach(p=>{const v=i.mainSessionAttendeeList.findIndex(y=>y.userId===p.userId);-1!==v&&i.mainSessionAttendeeList.splice(v,1)})}),[`${pR}`]:It((i,l)=>{let{payload:u}=l;i.isHugeBO=u}),[`${fR}`]:It((i,l)=>{let{payload:u}=l;i.isUserRoleUpdated=u}),[`${EP}`]:It((i,l)=>{let{payload:u}=l;i.preAssignedRooms=u}),[`${mR}`]:It((i,l)=>{let{payload:u}=l;i.isEnableBreakoutRoom=u.isEnableBreakoutRoom,i.isEnableBOBroadcast=u.isEnableBOBroadcast}),[`${Qc}`]:i=>{const{currentRoom:{status:l}}=i;return cn(cn({},Tw),{},l===ur.Joining?{preAssignedRooms:i.preAssignedRooms,currentRoom:i.currentRoom,closingRoomTime:i.closingRoomTime}:l===ur.Leaving?{preAssignedRooms:i.preAssignedRooms,closingRoomTime:i.closingRoomTime}:{preAssignedRooms:i.preAssignedRooms})}},Tw);var Xm={};!function(i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function u(y,C){return Object.prototype.hasOwnProperty.call(y,C)}i.assign=function(y){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var w=C.shift();if(w){if("object"!=typeof w)throw new TypeError(w+"must be non-object");for(var D in w)u(w,D)&&(y[D]=w[D])}}return y},i.shrinkBuf=function(y,C){return y.length===C?y:y.subarray?y.subarray(0,C):(y.length=C,y)};var p={arraySet:function(y,C,w,D,P){if(C.subarray&&y.subarray)y.set(C.subarray(w,w+D),P);else for(var L=0;L<D;L++)y[P+L]=C[w+L]},flattenChunks:function(y){var C,w,D,P,L,W;for(D=0,C=0,w=y.length;C<w;C++)D+=y[C].length;for(W=new Uint8Array(D),P=0,C=0,w=y.length;C<w;C++)W.set(L=y[C],P),P+=L.length;return W}},v={arraySet:function(y,C,w,D,P){for(var L=0;L<D;L++)y[P+L]=C[w+L]},flattenChunks:function(y){return[].concat.apply([],y)}};i.setTyped=function(y){y?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,p)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,v))},i.setTyped(l)}(Xm);var Rw={},bf={},A0={},hV=Xm;function Dh(i){for(var l=i.length;--l>=0;)i[l]=0}var kd=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],yD=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mF=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ow=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oi=new Array(576);Dh(oi);var H_=new Array(60);Dh(H_);var y0=new Array(512);Dh(y0);var E0=new Array(256);Dh(E0);var Dw=new Array(29);Dh(Dw);var ED,sM,bD,G_=new Array(30);function ol(i,l,u,p,v){this.static_tree=i,this.extra_bits=l,this.extra_base=u,this.elems=p,this.max_length=v,this.has_stree=i&&i.length}function dy(i,l){this.dyn_tree=i,this.max_code=0,this.stat_desc=l}function aM(i){return i<256?y0[i]:y0[256+(i>>>7)]}function b0(i,l){i.pending_buf[i.pending++]=255&l,i.pending_buf[i.pending++]=l>>>8&255}function Bl(i,l,u){i.bi_valid>16-u?(i.bi_buf|=l<<i.bi_valid&65535,b0(i,i.bi_buf),i.bi_buf=l>>16-i.bi_valid,i.bi_valid+=u-16):(i.bi_buf|=l<<i.bi_valid&65535,i.bi_valid+=u)}function kh(i,l,u){Bl(i,u[2*l],u[2*l+1])}function SD(i,l){var u=0;do{u|=1&i,i>>>=1,u<<=1}while(--l>0);return u>>>1}function cM(i,l,u){var p,v,y=new Array(16),C=0;for(p=1;p<=15;p++)y[p]=C=C+u[p-1]<<1;for(v=0;v<=l;v++){var w=i[2*v+1];0!==w&&(i[2*v]=SD(y[w]++,w))}}function kw(i){var l;for(l=0;l<286;l++)i.dyn_ltree[2*l]=0;for(l=0;l<30;l++)i.dyn_dtree[2*l]=0;for(l=0;l<19;l++)i.bl_tree[2*l]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function CD(i){i.bi_valid>8?b0(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function zc(i,l,u,p){var v=2*l,y=2*u;return i[v]<i[y]||i[v]===i[y]&&p[l]<=p[u]}function Xs(i,l,u){for(var p=i.heap[u],v=u<<1;v<=i.heap_len&&(v<i.heap_len&&zc(l,i.heap[v+1],i.heap[v],i.depth)&&v++,!zc(l,p,i.heap[v],i.depth));)i.heap[u]=i.heap[v],u=v,v<<=1;i.heap[u]=p}function Zs(i,l,u){var p,v,y,C,w=0;if(0!==i.last_lit)do{p=i.pending_buf[i.d_buf+2*w]<<8|i.pending_buf[i.d_buf+2*w+1],v=i.pending_buf[i.l_buf+w],w++,0===p?kh(i,v,l):(kh(i,(y=E0[v])+256+1,l),0!==(C=kd[y])&&Bl(i,v-=Dw[y],C),kh(i,y=aM(--p),u),0!==(C=yD[y])&&Bl(i,p-=G_[y],C))}while(w<i.last_lit);kh(i,256,l)}function Mi(i,l){var u,p,v,y=l.dyn_tree,C=l.stat_desc.static_tree,w=l.stat_desc.has_stree,D=l.stat_desc.elems,P=-1;for(i.heap_len=0,i.heap_max=573,u=0;u<D;u++)0!==y[2*u]?(i.heap[++i.heap_len]=P=u,i.depth[u]=0):y[2*u+1]=0;for(;i.heap_len<2;)y[2*(v=i.heap[++i.heap_len]=P<2?++P:0)]=1,i.depth[v]=0,i.opt_len--,w&&(i.static_len-=C[2*v+1]);for(l.max_code=P,u=i.heap_len>>1;u>=1;u--)Xs(i,y,u);v=D;do{u=i.heap[1],i.heap[1]=i.heap[i.heap_len--],Xs(i,y,1),p=i.heap[1],i.heap[--i.heap_max]=u,i.heap[--i.heap_max]=p,y[2*v]=y[2*u]+y[2*p],i.depth[v]=(i.depth[u]>=i.depth[p]?i.depth[u]:i.depth[p])+1,y[2*u+1]=y[2*p+1]=v,i.heap[1]=v++,Xs(i,y,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(L,W){var re,ee,te,oe,Ee,Te,De=W.dyn_tree,Le=W.max_code,et=W.stat_desc.static_tree,lt=W.stat_desc.has_stree,pt=W.stat_desc.extra_bits,ht=W.stat_desc.extra_base,gt=W.stat_desc.max_length,Yt=0;for(oe=0;oe<=15;oe++)L.bl_count[oe]=0;for(De[2*L.heap[L.heap_max]+1]=0,re=L.heap_max+1;re<573;re++)(oe=De[2*De[2*(ee=L.heap[re])+1]+1]+1)>gt&&(oe=gt,Yt++),De[2*ee+1]=oe,ee>Le||(L.bl_count[oe]++,Ee=0,ee>=ht&&(Ee=pt[ee-ht]),L.opt_len+=(Te=De[2*ee])*(oe+Ee),lt&&(L.static_len+=Te*(et[2*ee+1]+Ee)));if(0!==Yt){do{for(oe=gt-1;0===L.bl_count[oe];)oe--;L.bl_count[oe]--,L.bl_count[oe+1]+=2,L.bl_count[gt]--,Yt-=2}while(Yt>0);for(oe=gt;0!==oe;oe--)for(ee=L.bl_count[oe];0!==ee;)(te=L.heap[--re])>Le||(De[2*te+1]!==oe&&(L.opt_len+=(oe-De[2*te+1])*De[2*te],De[2*te+1]=oe),ee--)}}(i,l),cM(y,P,i.bl_count)}function Rs(i,l,u){var p,v,y=-1,C=l[1],w=0,D=7,P=4;for(0===C&&(D=138,P=3),l[2*(u+1)+1]=65535,p=0;p<=u;p++)v=C,C=l[2*(p+1)+1],++w<D&&v===C||(w<P?i.bl_tree[2*v]+=w:0!==v?(v!==y&&i.bl_tree[2*v]++,i.bl_tree[32]++):w<=10?i.bl_tree[34]++:i.bl_tree[36]++,w=0,y=v,0===C?(D=138,P=3):v===C?(D=6,P=3):(D=7,P=4))}function Vr(i,l,u){var p,v,y=-1,C=l[1],w=0,D=7,P=4;for(0===C&&(D=138,P=3),p=0;p<=u;p++)if(v=C,C=l[2*(p+1)+1],!(++w<D&&v===C)){if(w<P)do{kh(i,v,i.bl_tree)}while(0!=--w);else 0!==v?(v!==y&&(kh(i,v,i.bl_tree),w--),kh(i,16,i.bl_tree),Bl(i,w-3,2)):w<=10?(kh(i,17,i.bl_tree),Bl(i,w-3,3)):(kh(i,18,i.bl_tree),Bl(i,w-11,7));w=0,y=v,0===C?(D=138,P=3):v===C?(D=6,P=3):(D=7,P=4)}}Dh(G_);var uM=!1;function ID(i,l,u,p){var v,y,C;Bl(i,0+(p?1:0),3),y=l,C=u,CD(v=i),b0(v,C),b0(v,~C),hV.arraySet(v.pending_buf,v.window,y,C,v.pending),v.pending+=C}A0._tr_init=function(i){uM||(function(){var l,u,p,v,y,C=new Array(16);for(p=0,v=0;v<28;v++)for(Dw[v]=p,l=0;l<1<<kd[v];l++)E0[p++]=v;for(E0[p-1]=v,y=0,v=0;v<16;v++)for(G_[v]=y,l=0;l<1<<yD[v];l++)y0[y++]=v;for(y>>=7;v<30;v++)for(G_[v]=y<<7,l=0;l<1<<yD[v]-7;l++)y0[256+y++]=v;for(u=0;u<=15;u++)C[u]=0;for(l=0;l<=143;)oi[2*l+1]=8,l++,C[8]++;for(;l<=255;)oi[2*l+1]=9,l++,C[9]++;for(;l<=279;)oi[2*l+1]=7,l++,C[7]++;for(;l<=287;)oi[2*l+1]=8,l++,C[8]++;for(cM(oi,287,C),l=0;l<30;l++)H_[2*l+1]=5,H_[2*l]=SD(l,5);ED=new ol(oi,kd,257,286,15),sM=new ol(H_,yD,0,30,15),bD=new ol(new Array(0),mF,0,19,7)}(),uM=!0),i.l_desc=new dy(i.dyn_ltree,ED),i.d_desc=new dy(i.dyn_dtree,sM),i.bl_desc=new dy(i.bl_tree,bD),i.bi_buf=0,i.bi_valid=0,kw(i)},A0._tr_stored_block=ID,A0._tr_flush_block=function(i,l,u,p){var v,y,C=0;i.level>0?(2===i.strm.data_type&&(i.strm.data_type=function(w){var D,P=4093624447;for(D=0;D<=31;D++,P>>>=1)if(1&P&&0!==w.dyn_ltree[2*D])return 0;if(0!==w.dyn_ltree[18]||0!==w.dyn_ltree[20]||0!==w.dyn_ltree[26])return 1;for(D=32;D<256;D++)if(0!==w.dyn_ltree[2*D])return 1;return 0}(i)),Mi(i,i.l_desc),Mi(i,i.d_desc),C=function(w){var D;for(Rs(w,w.dyn_ltree,w.l_desc.max_code),Rs(w,w.dyn_dtree,w.d_desc.max_code),Mi(w,w.bl_desc),D=18;D>=3&&0===w.bl_tree[2*Ow[D]+1];D--);return w.opt_len+=3*(D+1)+5+5+4,D}(i),(y=i.static_len+3+7>>>3)<=(v=i.opt_len+3+7>>>3)&&(v=y)):v=y=u+5,u+4<=v&&-1!==l?ID(i,l,u,p):4===i.strategy||y===v?(Bl(i,2+(p?1:0),3),Zs(i,oi,H_)):(Bl(i,4+(p?1:0),3),function(w,D,P,L){var W;for(Bl(w,D-257,5),Bl(w,P-1,5),Bl(w,L-4,4),W=0;W<L;W++)Bl(w,w.bl_tree[2*Ow[W]+1],3);Vr(w,w.dyn_ltree,D-1),Vr(w,w.dyn_dtree,P-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,C+1),Zs(i,i.dyn_ltree,i.dyn_dtree)),kw(i),p&&CD(i)},A0._tr_tally=function(i,l,u){return i.pending_buf[i.d_buf+2*i.last_lit]=l>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&l,i.pending_buf[i.l_buf+i.last_lit]=255&u,i.last_lit++,0===l?i.dyn_ltree[2*u]++:(i.matches++,l--,i.dyn_ltree[2*(E0[u]+256+1)]++,i.dyn_dtree[2*aM(l)]++),i.last_lit===i.lit_bufsize-1},A0._tr_align=function(i){var l;Bl(i,2,3),kh(i,256,oi),16===(l=i).bi_valid?(b0(l,l.bi_buf),l.bi_buf=0,l.bi_valid=0):l.bi_valid>=8&&(l.pending_buf[l.pending++]=255&l.bi_buf,l.bi_buf>>=8,l.bi_valid-=8)};var hy,Ap=function(i,l,u,p){for(var v=65535&i|0,y=i>>>16&65535|0,C=0;0!==u;){u-=C=u>2e3?2e3:u;do{y=y+(v=v+l[p++]|0)|0}while(--C);v%=65521,y%=65521}return v|y<<16|0},py=function(){for(var i,l=[],u=0;u<256;u++){i=u;for(var p=0;p<8;p++)i=1&i?3988292384^i>>>1:i>>>1;l[u]=i}return l}(),lM=function(i,l,u,p){var v=py,y=p+u;i^=-1;for(var C=p;C<y;C++)i=i>>>8^v[255&(i^l[C])];return-1^i},dM={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sl=Xm,ac=A0,fy=Ap,Pd=lM,Nd=dM,xd=262;function Sf(i,l){return i.msg=Nd[l],l}function Cf(i){return(i<<1)-(i>4?9:0)}function eg(i){for(var l=i.length;--l>=0;)i[l]=0}function tg(i){var l=i.state,u=l.pending;u>i.avail_out&&(u=i.avail_out),0!==u&&(sl.arraySet(i.output,l.pending_buf,l.pending_out,u,i.next_out),i.next_out+=u,l.pending_out+=u,i.total_out+=u,i.avail_out-=u,l.pending-=u,0===l.pending&&(l.pending_out=0))}function Do(i,l){ac._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,l),i.block_start=i.strstart,tg(i.strm)}function to(i,l){i.pending_buf[i.pending++]=l}function C0(i,l){i.pending_buf[i.pending++]=l>>>8&255,i.pending_buf[i.pending++]=255&l}function hM(i,l){var u,p,v=i.max_chain_length,y=i.strstart,C=i.prev_length,w=i.nice_match,D=i.strstart>i.w_size-xd?i.strstart-(i.w_size-xd):0,P=i.window,L=i.w_mask,W=i.prev,re=i.strstart+258,ee=P[y+C-1],te=P[y+C];i.prev_length>=i.good_match&&(v>>=2),w>i.lookahead&&(w=i.lookahead);do{if(P[(u=l)+C]===te&&P[u+C-1]===ee&&P[u]===P[y]&&P[++u]===P[y+1]){y+=2,u++;do{}while(P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&P[++y]===P[++u]&&y<re);if(p=258-(re-y),y=re-258,p>C){if(i.match_start=l,C=p,p>=w)break;ee=P[y+C-1],te=P[y+C]}}}while((l=W[l&L])>D&&0!=--v);return C<=i.lookahead?C:i.lookahead}function W_(i){var l,u,p,v,y,C,w,D,P,L,W=i.w_size;do{if(v=i.window_size-i.lookahead-i.strstart,i.strstart>=W+(W-xd)){sl.arraySet(i.window,i.window,W,W,0),i.match_start-=W,i.strstart-=W,i.block_start-=W,l=u=i.hash_size;do{p=i.head[--l],i.head[l]=p>=W?p-W:0}while(--u);l=u=W;do{p=i.prev[--l],i.prev[l]=p>=W?p-W:0}while(--u);v+=W}if(0===i.strm.avail_in)break;if(w=i.window,D=i.strstart+i.lookahead,L=void 0,(L=(C=i.strm).avail_in)>(P=v)&&(L=P),u=0===L?0:(C.avail_in-=L,sl.arraySet(w,C.input,C.next_in,L,D),1===C.state.wrap?C.adler=fy(C.adler,w,L,D):2===C.state.wrap&&(C.adler=Pd(C.adler,w,L,D)),C.next_in+=L,C.total_in+=L,L),i.lookahead+=u,i.lookahead+i.insert>=3)for(i.ins_h=i.window[y=i.strstart-i.insert],i.ins_h=(i.ins_h<<i.hash_shift^i.window[y+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[y+3-1])&i.hash_mask,i.prev[y&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=y,y++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<xd&&0!==i.strm.avail_in)}function TD(i,l){for(var u,p;;){if(i.lookahead<xd){if(W_(i),i.lookahead<xd&&0===l)return 1;if(0===i.lookahead)break}if(u=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),0!==u&&i.strstart-u<=i.w_size-xd&&(i.match_length=hM(i,u)),i.match_length>=3)if(p=ac._tr_tally(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do{i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart}while(0!=--i.match_length);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else p=ac._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(p&&(Do(i,!1),0===i.strm.avail_out))return 1}return i.insert=i.strstart<2?i.strstart:2,4===l?(Do(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Do(i,!1),0===i.strm.avail_out)?1:2}function yp(i,l){for(var u,p,v;;){if(i.lookahead<xd){if(W_(i),i.lookahead<xd&&0===l)return 1;if(0===i.lookahead)break}if(u=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,0!==u&&i.prev_length<i.max_lazy_match&&i.strstart-u<=i.w_size-xd&&(i.match_length=hM(i,u),i.match_length<=5&&(1===i.strategy||3===i.match_length&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){v=i.strstart+i.lookahead-3,p=ac._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do{++i.strstart<=v&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,u=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart)}while(0!=--i.prev_length);if(i.match_available=0,i.match_length=2,i.strstart++,p&&(Do(i,!1),0===i.strm.avail_out))return 1}else if(i.match_available){if((p=ac._tr_tally(i,0,i.window[i.strstart-1]))&&Do(i,!1),i.strstart++,i.lookahead--,0===i.strm.avail_out)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(p=ac._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,4===l?(Do(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Do(i,!1),0===i.strm.avail_out)?1:2}function Ph(i,l,u,p,v){this.good_length=i,this.max_lazy=l,this.nice_length=u,this.max_chain=p,this.func=v}function Va(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new sl.Buf16(1146),this.dyn_dtree=new sl.Buf16(122),this.bl_tree=new sl.Buf16(78),eg(this.dyn_ltree),eg(this.dyn_dtree),eg(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new sl.Buf16(16),this.heap=new sl.Buf16(573),eg(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new sl.Buf16(573),eg(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Gr(i){var l;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=2,(l=i.state).pending=0,l.pending_out=0,l.wrap<0&&(l.wrap=-l.wrap),l.status=l.wrap?42:113,i.adler=2===l.wrap?0:1,l.last_flush=0,ac._tr_init(l),0):Sf(i,-2)}function _i(i){var u,l=Gr(i);return 0===l&&((u=i.state).window_size=2*u.w_size,eg(u.head),u.max_lazy_match=hy[u.level].max_lazy,u.good_match=hy[u.level].good_length,u.nice_match=hy[u.level].nice_length,u.max_chain_length=hy[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=2,u.match_available=0,u.ins_h=0),l}function RD(i,l,u,p,v,y){if(!i)return-2;var C=1;if(-1===l&&(l=6),p<0?(C=0,p=-p):p>15&&(C=2,p-=16),v<1||v>9||8!==u||p<8||p>15||l<0||l>9||y<0||y>4)return Sf(i,-2);8===p&&(p=9);var w=new Va;return i.state=w,w.strm=i,w.wrap=C,w.gzhead=null,w.w_bits=p,w.w_size=1<<w.w_bits,w.w_mask=w.w_size-1,w.hash_bits=v+7,w.hash_size=1<<w.hash_bits,w.hash_mask=w.hash_size-1,w.hash_shift=~~((w.hash_bits+3-1)/3),w.window=new sl.Buf8(2*w.w_size),w.head=new sl.Buf16(w.hash_size),w.prev=new sl.Buf16(w.w_size),w.lit_bufsize=1<<v+6,w.pending_buf_size=4*w.lit_bufsize,w.pending_buf=new sl.Buf8(w.pending_buf_size),w.d_buf=1*w.lit_bufsize,w.l_buf=3*w.lit_bufsize,w.level=l,w.strategy=y,w.method=u,_i(i)}hy=[new Ph(0,0,0,0,function(i,l){var u=65535;for(u>i.pending_buf_size-5&&(u=i.pending_buf_size-5);;){if(i.lookahead<=1){if(W_(i),0===i.lookahead&&0===l)return 1;if(0===i.lookahead)break}i.strstart+=i.lookahead,i.lookahead=0;var p=i.block_start+u;if((0===i.strstart||i.strstart>=p)&&(i.lookahead=i.strstart-p,i.strstart=p,Do(i,!1),0===i.strm.avail_out)||i.strstart-i.block_start>=i.w_size-xd&&(Do(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,4===l?(Do(i,!0),0===i.strm.avail_out?3:4):(i.strstart>i.block_start&&Do(i,!1),1)}),new Ph(4,4,8,4,TD),new Ph(4,5,16,8,TD),new Ph(4,6,32,32,TD),new Ph(4,4,16,16,yp),new Ph(8,16,32,32,yp),new Ph(8,16,128,128,yp),new Ph(8,32,128,256,yp),new Ph(32,128,258,1024,yp),new Ph(32,258,258,4096,yp)],bf.deflateInit=function(i,l){return RD(i,l,8,15,8,0)},bf.deflateInit2=RD,bf.deflateReset=_i,bf.deflateResetKeep=Gr,bf.deflateSetHeader=function(i,l){return i&&i.state?2!==i.state.wrap?-2:(i.state.gzhead=l,0):-2},bf.deflate=function(i,l){var u,p,v,y;if(!i||!i.state||l>5||l<0)return i?Sf(i,-2):-2;if(p=i.state,!i.output||!i.input&&0!==i.avail_in||666===p.status&&4!==l)return Sf(i,0===i.avail_out?-5:-2);if(p.strm=i,u=p.last_flush,p.last_flush=l,42===p.status)if(2===p.wrap)i.adler=0,to(p,31),to(p,139),to(p,8),p.gzhead?(to(p,(p.gzhead.text?1:0)+(p.gzhead.hcrc?2:0)+(p.gzhead.extra?4:0)+(p.gzhead.name?8:0)+(p.gzhead.comment?16:0)),to(p,255&p.gzhead.time),to(p,p.gzhead.time>>8&255),to(p,p.gzhead.time>>16&255),to(p,p.gzhead.time>>24&255),to(p,9===p.level?2:p.strategy>=2||p.level<2?4:0),to(p,255&p.gzhead.os),p.gzhead.extra&&p.gzhead.extra.length&&(to(p,255&p.gzhead.extra.length),to(p,p.gzhead.extra.length>>8&255)),p.gzhead.hcrc&&(i.adler=Pd(i.adler,p.pending_buf,p.pending,0)),p.gzindex=0,p.status=69):(to(p,0),to(p,0),to(p,0),to(p,0),to(p,0),to(p,9===p.level?2:p.strategy>=2||p.level<2?4:0),to(p,3),p.status=113);else{var C=8+(p.w_bits-8<<4)<<8;C|=(p.strategy>=2||p.level<2?0:p.level<6?1:6===p.level?2:3)<<6,0!==p.strstart&&(C|=32),C+=31-C%31,p.status=113,C0(p,C),0!==p.strstart&&(C0(p,i.adler>>>16),C0(p,65535&i.adler)),i.adler=1}if(69===p.status)if(p.gzhead.extra){for(v=p.pending;p.gzindex<(65535&p.gzhead.extra.length)&&(p.pending!==p.pending_buf_size||(p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),tg(i),v=p.pending,p.pending!==p.pending_buf_size));)to(p,255&p.gzhead.extra[p.gzindex]),p.gzindex++;p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),p.gzindex===p.gzhead.extra.length&&(p.gzindex=0,p.status=73)}else p.status=73;if(73===p.status)if(p.gzhead.name){v=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),tg(i),v=p.pending,p.pending===p.pending_buf_size)){y=1;break}y=p.gzindex<p.gzhead.name.length?255&p.gzhead.name.charCodeAt(p.gzindex++):0,to(p,y)}while(0!==y);p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),0===y&&(p.gzindex=0,p.status=91)}else p.status=91;if(91===p.status)if(p.gzhead.comment){v=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),tg(i),v=p.pending,p.pending===p.pending_buf_size)){y=1;break}y=p.gzindex<p.gzhead.comment.length?255&p.gzhead.comment.charCodeAt(p.gzindex++):0,to(p,y)}while(0!==y);p.gzhead.hcrc&&p.pending>v&&(i.adler=Pd(i.adler,p.pending_buf,p.pending-v,v)),0===y&&(p.status=103)}else p.status=103;if(103===p.status&&(p.gzhead.hcrc?(p.pending+2>p.pending_buf_size&&tg(i),p.pending+2<=p.pending_buf_size&&(to(p,255&i.adler),to(p,i.adler>>8&255),i.adler=0,p.status=113)):p.status=113),0!==p.pending){if(tg(i),0===i.avail_out)return p.last_flush=-1,0}else if(0===i.avail_in&&Cf(l)<=Cf(u)&&4!==l)return Sf(i,-5);if(666===p.status&&0!==i.avail_in)return Sf(i,-5);if(0!==i.avail_in||0!==p.lookahead||0!==l&&666!==p.status){var w=2===p.strategy?function(D,P){for(var L;;){if(0===D.lookahead&&(W_(D),0===D.lookahead)){if(0===P)return 1;break}if(D.match_length=0,L=ac._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,L&&(Do(D,!1),0===D.strm.avail_out))return 1}return D.insert=0,4===P?(Do(D,!0),0===D.strm.avail_out?3:4):D.last_lit&&(Do(D,!1),0===D.strm.avail_out)?1:2}(p,l):3===p.strategy?function(D,P){for(var L,W,re,ee,te=D.window;;){if(D.lookahead<=258){if(W_(D),D.lookahead<=258&&0===P)return 1;if(0===D.lookahead)break}if(D.match_length=0,D.lookahead>=3&&D.strstart>0&&(W=te[re=D.strstart-1])===te[++re]&&W===te[++re]&&W===te[++re]){ee=D.strstart+258;do{}while(W===te[++re]&&W===te[++re]&&W===te[++re]&&W===te[++re]&&W===te[++re]&&W===te[++re]&&W===te[++re]&&W===te[++re]&&re<ee);D.match_length=258-(ee-re),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=3?(L=ac._tr_tally(D,1,D.match_length-3),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(L=ac._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),L&&(Do(D,!1),0===D.strm.avail_out))return 1}return D.insert=0,4===P?(Do(D,!0),0===D.strm.avail_out?3:4):D.last_lit&&(Do(D,!1),0===D.strm.avail_out)?1:2}(p,l):hy[p.level].func(p,l);if(3!==w&&4!==w||(p.status=666),1===w||3===w)return 0===i.avail_out&&(p.last_flush=-1),0;if(2===w&&(1===l?ac._tr_align(p):5!==l&&(ac._tr_stored_block(p,0,0,!1),3===l&&(eg(p.head),0===p.lookahead&&(p.strstart=0,p.block_start=0,p.insert=0))),tg(i),0===i.avail_out))return p.last_flush=-1,0}return 4!==l?0:p.wrap<=0?1:(2===p.wrap?(to(p,255&i.adler),to(p,i.adler>>8&255),to(p,i.adler>>16&255),to(p,i.adler>>24&255),to(p,255&i.total_in),to(p,i.total_in>>8&255),to(p,i.total_in>>16&255),to(p,i.total_in>>24&255)):(C0(p,i.adler>>>16),C0(p,65535&i.adler)),tg(i),p.wrap>0&&(p.wrap=-p.wrap),0!==p.pending?0:1)},bf.deflateEnd=function(i){var l;return i&&i.state?42!==(l=i.state.status)&&69!==l&&73!==l&&91!==l&&103!==l&&113!==l&&666!==l?Sf(i,-2):(i.state=null,113===l?Sf(i,-3):0):-2},bf.deflateSetDictionary=function(i,l){var u,p,v,y,C,w,D,P,L=l.length;if(!i||!i.state||2===(y=(u=i.state).wrap)||1===y&&42!==u.status||u.lookahead)return-2;for(1===y&&(i.adler=fy(i.adler,l,L,0)),u.wrap=0,L>=u.w_size&&(0===y&&(eg(u.head),u.strstart=0,u.block_start=0,u.insert=0),P=new sl.Buf8(u.w_size),sl.arraySet(P,l,L-u.w_size,u.w_size,0),l=P,L=u.w_size),C=i.avail_in,w=i.next_in,D=i.input,i.avail_in=L,i.next_in=0,i.input=l,W_(u);u.lookahead>=3;){p=u.strstart,v=u.lookahead-2;do{u.ins_h=(u.ins_h<<u.hash_shift^u.window[p+3-1])&u.hash_mask,u.prev[p&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=p,p++}while(--v);u.strstart=p,u.lookahead=2,W_(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,i.next_in=w,i.input=D,i.avail_in=C,u.wrap=y,0},bf.deflateInfo="pako deflate (from Nodeca project)";var Nh={},Fl=Xm,my=!0,Ul=!0;try{String.fromCharCode.apply(null,[0])}catch{my=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ul=!1}for(var gy=new Fl.Buf8(256),Lo=0;Lo<256;Lo++)gy[Lo]=Lo>=252?6:Lo>=248?5:Lo>=240?4:Lo>=224?3:Lo>=192?2:1;function Pw(i,l){if(l<65534&&(i.subarray&&Ul||!i.subarray&&my))return String.fromCharCode.apply(null,Fl.shrinkBuf(i,l));for(var u="",p=0;p<l;p++)u+=String.fromCharCode(i[p]);return u}gy[254]=gy[254]=1,Nh.string2buf=function(i){var l,u,p,v,y,C=i.length,w=0;for(v=0;v<C;v++)55296==(64512&(u=i.charCodeAt(v)))&&v+1<C&&56320==(64512&(p=i.charCodeAt(v+1)))&&(u=65536+(u-55296<<10)+(p-56320),v++),w+=u<128?1:u<2048?2:u<65536?3:4;for(l=new Fl.Buf8(w),y=0,v=0;y<w;v++)55296==(64512&(u=i.charCodeAt(v)))&&v+1<C&&56320==(64512&(p=i.charCodeAt(v+1)))&&(u=65536+(u-55296<<10)+(p-56320),v++),u<128?l[y++]=u:u<2048?(l[y++]=192|u>>>6,l[y++]=128|63&u):u<65536?(l[y++]=224|u>>>12,l[y++]=128|u>>>6&63,l[y++]=128|63&u):(l[y++]=240|u>>>18,l[y++]=128|u>>>12&63,l[y++]=128|u>>>6&63,l[y++]=128|63&u);return l},Nh.buf2binstring=function(i){return Pw(i,i.length)},Nh.binstring2buf=function(i){for(var l=new Fl.Buf8(i.length),u=0,p=l.length;u<p;u++)l[u]=i.charCodeAt(u);return l},Nh.buf2string=function(i,l){var u,p,v,y,C=l||i.length,w=new Array(2*C);for(p=0,u=0;u<C;)if((v=i[u++])<128)w[p++]=v;else if((y=gy[v])>4)w[p++]=65533,u+=y-1;else{for(v&=2===y?31:3===y?15:7;y>1&&u<C;)v=v<<6|63&i[u++],y--;y>1?w[p++]=65533:v<65536?w[p++]=v:(w[p++]=55296|(v-=65536)>>10&1023,w[p++]=56320|1023&v)}return Pw(w,p)},Nh.utf8border=function(i,l){var u;for((l=l||i.length)>i.length&&(l=i.length),u=l-1;u>=0&&128==(192&i[u]);)u--;return u<0||0===u?l:u+gy[i[u]]>l?u:l};var Bo=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},_y=bf,If=Xm,Wr=Nh,K_=dM,Nw=Bo,Mw=Object.prototype.toString;function Mh(i){if(!(this instanceof Mh))return new Mh(i);this.options=If.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},i||{});var l=this.options;l.raw&&l.windowBits>0?l.windowBits=-l.windowBits:l.gzip&&l.windowBits>0&&l.windowBits<16&&(l.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nw,this.strm.avail_out=0;var u=_y.deflateInit2(this.strm,l.level,l.method,l.windowBits,l.memLevel,l.strategy);if(0!==u)throw new Error(K_[u]);if(l.header&&_y.deflateSetHeader(this.strm,l.header),l.dictionary){var p;if(p="string"==typeof l.dictionary?Wr.string2buf(l.dictionary):"[object ArrayBuffer]"===Mw.call(l.dictionary)?new Uint8Array(l.dictionary):l.dictionary,0!==(u=_y.deflateSetDictionary(this.strm,p)))throw new Error(K_[u]);this._dict_set=!0}}function da(i,l){var u=new Mh(l);if(u.push(i,!0),u.err)throw u.msg||K_[u.err];return u.result}Mh.prototype.push=function(i,l){var u,p,v=this.strm,y=this.options.chunkSize;if(this.ended)return!1;p=l===~~l?l:!0===l?4:0,v.input="string"==typeof i?Wr.string2buf(i):"[object ArrayBuffer]"===Mw.call(i)?new Uint8Array(i):i,v.next_in=0,v.avail_in=v.input.length;do{if(0===v.avail_out&&(v.output=new If.Buf8(y),v.next_out=0,v.avail_out=y),1!==(u=_y.deflate(v,p))&&0!==u)return this.onEnd(u),this.ended=!0,!1;0!==v.avail_out&&(0!==v.avail_in||4!==p&&2!==p)||this.onData("string"===this.options.to?Wr.buf2binstring(If.shrinkBuf(v.output,v.next_out)):If.shrinkBuf(v.output,v.next_out))}while((v.avail_in>0||0===v.avail_out)&&1!==u);return 4===p?(u=_y.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,0===u):2!==p||(this.onEnd(0),v.avail_out=0,!0)},Mh.prototype.onData=function(i){this.chunks.push(i)},Mh.prototype.onEnd=function(i){0===i&&(this.result="string"===this.options.to?this.chunks.join(""):If.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},Rw.Deflate=Mh,Rw.deflate=da,Rw.deflateRaw=function(i,l){return(l=l||{}).raw=!0,da(i,l)},Rw.gzip=function(i,l){return(l=l||{}).gzip=!0,da(i,l)};var z_={},Ld={},xw=Xm,OD=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],pM=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],fM=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gF=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],cc=Xm,DD=Ap,Bd=lM,I0=function(i,l){var u,p,v,y,C,w,D,P,L,W,re,ee,te,oe,Ee,Te,De,Le,et,lt,pt,ht,gt,Yt,Xt;Yt=i.input,v=(p=i.next_in)+(i.avail_in-5),Xt=i.output,C=(y=i.next_out)-(l-i.avail_out),w=y+(i.avail_out-257),D=(u=i.state).dmax,P=u.wsize,L=u.whave,W=u.wnext,re=u.window,ee=u.hold,te=u.bits,oe=u.lencode,Ee=u.distcode,Te=(1<<u.lenbits)-1,De=(1<<u.distbits)-1;e:do{te<15&&(ee+=Yt[p++]<<te,ee+=Yt[p++]<<(te+=8),te+=8),Le=oe[ee&Te];t:for(;;){if(ee>>>=et=Le>>>24,te-=et,0==(et=Le>>>16&255))Xt[y++]=65535&Le;else{if(!(16&et)){if(0==(64&et)){Le=oe[(65535&Le)+(ee&(1<<et)-1)];continue t}if(32&et){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}lt=65535&Le,(et&=15)&&(te<et&&(ee+=Yt[p++]<<te,te+=8),lt+=ee&(1<<et)-1,ee>>>=et,te-=et),te<15&&(ee+=Yt[p++]<<te,ee+=Yt[p++]<<(te+=8),te+=8),Le=Ee[ee&De];n:for(;;){if(ee>>>=et=Le>>>24,te-=et,!(16&(et=Le>>>16&255))){if(0==(64&et)){Le=Ee[(65535&Le)+(ee&(1<<et)-1)];continue n}i.msg="invalid distance code",u.mode=30;break e}if(pt=65535&Le,te<(et&=15)&&(ee+=Yt[p++]<<te,(te+=8)<et&&(ee+=Yt[p++]<<te,te+=8)),(pt+=ee&(1<<et)-1)>D){i.msg="invalid distance too far back",u.mode=30;break e}if(ee>>>=et,te-=et,pt>(et=y-C)){if((et=pt-et)>L&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(ht=0,gt=re,0===W){if(ht+=P-et,et<lt){lt-=et;do{Xt[y++]=re[ht++]}while(--et);ht=y-pt,gt=Xt}}else if(W<et){if(ht+=P+W-et,(et-=W)<lt){lt-=et;do{Xt[y++]=re[ht++]}while(--et);if(ht=0,W<lt){lt-=et=W;do{Xt[y++]=re[ht++]}while(--et);ht=y-pt,gt=Xt}}}else if(ht+=W-et,et<lt){lt-=et;do{Xt[y++]=re[ht++]}while(--et);ht=y-pt,gt=Xt}for(;lt>2;)Xt[y++]=gt[ht++],Xt[y++]=gt[ht++],Xt[y++]=gt[ht++],lt-=3;lt&&(Xt[y++]=gt[ht++],lt>1&&(Xt[y++]=gt[ht++]))}else{ht=y-pt;do{Xt[y++]=Xt[ht++],Xt[y++]=Xt[ht++],Xt[y++]=Xt[ht++],lt-=3}while(lt>2);lt&&(Xt[y++]=Xt[ht++],lt>1&&(Xt[y++]=Xt[ht++]))}break}}break}}while(p<v&&y<w);p-=lt=te>>3,ee&=(1<<(te-=lt<<3))-1,i.next_in=p,i.next_out=y,i.avail_in=p<v?v-p+5:5-(p-v),i.avail_out=y<w?w-y+257:257-(y-w),u.hold=ee,u.bits=te},wf=function(i,l,u,p,v,y,C,w){var D,P,L,W,re,ee,te,oe,Ee,Te=w.bits,De=0,Le=0,et=0,lt=0,pt=0,ht=0,gt=0,Yt=0,Xt=0,un=0,Tt=null,yn=0,Kn=new xw.Buf16(16),Pt=new xw.Buf16(16),mt=null,Ve=0;for(De=0;De<=15;De++)Kn[De]=0;for(Le=0;Le<p;Le++)Kn[l[u+Le]]++;for(pt=Te,lt=15;lt>=1&&0===Kn[lt];lt--);if(pt>lt&&(pt=lt),0===lt)return v[y++]=20971520,v[y++]=20971520,w.bits=1,0;for(et=1;et<lt&&0===Kn[et];et++);for(pt<et&&(pt=et),Yt=1,De=1;De<=15;De++)if(Yt<<=1,(Yt-=Kn[De])<0)return-1;if(Yt>0&&(0===i||1!==lt))return-1;for(Pt[1]=0,De=1;De<15;De++)Pt[De+1]=Pt[De]+Kn[De];for(Le=0;Le<p;Le++)0!==l[u+Le]&&(C[Pt[l[u+Le]]++]=Le);if(0===i?(Tt=mt=C,ee=19):1===i?(Tt=OD,yn-=257,mt=pM,Ve-=257,ee=256):(Tt=fM,mt=gF,ee=-1),un=0,Le=0,De=et,re=y,ht=pt,gt=0,L=-1,W=(Xt=1<<pt)-1,1===i&&Xt>852||2===i&&Xt>592)return 1;for(;;){te=De-gt,C[Le]<ee?(oe=0,Ee=C[Le]):C[Le]>ee?(oe=mt[Ve+C[Le]],Ee=Tt[yn+C[Le]]):(oe=96,Ee=0),D=1<<De-gt,et=P=1<<ht;do{v[re+(un>>gt)+(P-=D)]=te<<24|oe<<16|Ee|0}while(0!==P);for(D=1<<De-1;un&D;)D>>=1;if(0!==D?(un&=D-1,un+=D):un=0,Le++,0==--Kn[De]){if(De===lt)break;De=l[u+C[Le]]}if(De>pt&&(un&W)!==L){for(0===gt&&(gt=pt),re+=et,Yt=1<<(ht=De-gt);ht+gt<lt&&!((Yt-=Kn[ht+gt])<=0);)ht++,Yt<<=1;if(Xt+=1<<ht,1===i&&Xt>852||2===i&&Xt>592)return 1;v[L=un&W]=pt<<24|ht<<16|re-y|0}}return 0!==un&&(v[re+un]=De-gt<<24|64<<16|0),w.bits=pt,0};function Lw(i){return(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24)}function mM(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new cc.Buf16(320),this.work=new cc.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function vy(i){var l;return i&&i.state?(i.total_in=i.total_out=(l=i.state).total=0,i.msg="",l.wrap&&(i.adler=1&l.wrap),l.mode=1,l.last=0,l.havedict=0,l.dmax=32768,l.head=null,l.hold=0,l.bits=0,l.lencode=l.lendyn=new cc.Buf32(852),l.distcode=l.distdyn=new cc.Buf32(592),l.sane=1,l.back=-1,0):-2}function kD(i){var l;return i&&i.state?((l=i.state).wsize=0,l.whave=0,l.wnext=0,vy(i)):-2}function PD(i,l){var u,p;return i&&i.state?(p=i.state,l<0?(u=0,l=-l):(u=1+(l>>4),l<48&&(l&=15)),l&&(l<8||l>15)?-2:(null!==p.window&&p.wbits!==l&&(p.window=null),p.wrap=u,p.wbits=l,kD(i))):-2}function ND(i,l){var u,p;return i?(p=new mM,i.state=p,p.window=null,0!==(u=PD(i,l))&&(i.state=null),u):-2}var Ay,Bw,MD=!0;function gM(i){if(MD){var l;for(Ay=new cc.Buf32(512),Bw=new cc.Buf32(32),l=0;l<144;)i.lens[l++]=8;for(;l<256;)i.lens[l++]=9;for(;l<280;)i.lens[l++]=7;for(;l<288;)i.lens[l++]=8;for(wf(1,i.lens,0,288,Ay,0,i.work,{bits:9}),l=0;l<32;)i.lens[l++]=5;wf(2,i.lens,0,32,Bw,0,i.work,{bits:5}),MD=!1}i.lencode=Ay,i.lenbits=9,i.distcode=Bw,i.distbits=5}function w0(i,l,u,p){var v,y=i.state;return null===y.window&&(y.wsize=1<<y.wbits,y.wnext=0,y.whave=0,y.window=new cc.Buf8(y.wsize)),p>=y.wsize?(cc.arraySet(y.window,l,u-y.wsize,y.wsize,0),y.wnext=0,y.whave=y.wsize):((v=y.wsize-y.wnext)>p&&(v=p),cc.arraySet(y.window,l,u-p,v,y.wnext),(p-=v)?(cc.arraySet(y.window,l,u-p,p,0),y.wnext=p,y.whave=y.wsize):(y.wnext+=v,y.wnext===y.wsize&&(y.wnext=0),y.whave<y.wsize&&(y.whave+=v))),0}Ld.inflateReset=kD,Ld.inflateReset2=PD,Ld.inflateResetKeep=vy,Ld.inflateInit=function(i){return ND(i,15)},Ld.inflateInit2=ND,Ld.inflate=function(i,l){var u,p,v,y,C,w,D,P,L,W,re,ee,te,oe,Ee,Te,De,Le,et,lt,pt,ht,gt,Yt,Xt=0,un=new cc.Buf8(4),Tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&0!==i.avail_in)return-2;12===(u=i.state).mode&&(u.mode=13),C=i.next_out,v=i.output,y=i.next_in,p=i.input,P=u.hold,L=u.bits,W=w=i.avail_in,re=D=i.avail_out,ht=0;e:for(;;)switch(u.mode){case 1:if(0===u.wrap){u.mode=13;break}for(;L<16;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(2&u.wrap&&35615===P){u.check=0,un[0]=255&P,un[1]=P>>>8&255,u.check=Bd(u.check,un,2,0),P=0,L=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&P)<<8)+(P>>8))%31){i.msg="incorrect header check",u.mode=30;break}if(8!=(15&P)){i.msg="unknown compression method",u.mode=30;break}if(L-=4,pt=8+(15&(P>>>=4)),0===u.wbits)u.wbits=pt;else if(pt>u.wbits){i.msg="invalid window size",u.mode=30;break}u.dmax=1<<pt,i.adler=u.check=1,u.mode=512&P?10:12,P=0,L=0;break;case 2:for(;L<16;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(u.flags=P,8!=(255&u.flags)){i.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){i.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=P>>8&1),512&u.flags&&(un[0]=255&P,un[1]=P>>>8&255,u.check=Bd(u.check,un,2,0)),P=0,L=0,u.mode=3;case 3:for(;L<32;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.head&&(u.head.time=P),512&u.flags&&(un[0]=255&P,un[1]=P>>>8&255,un[2]=P>>>16&255,un[3]=P>>>24&255,u.check=Bd(u.check,un,4,0)),P=0,L=0,u.mode=4;case 4:for(;L<16;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.head&&(u.head.xflags=255&P,u.head.os=P>>8),512&u.flags&&(un[0]=255&P,un[1]=P>>>8&255,u.check=Bd(u.check,un,2,0)),P=0,L=0,u.mode=5;case 5:if(1024&u.flags){for(;L<16;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.length=P,u.head&&(u.head.extra_len=P),512&u.flags&&(un[0]=255&P,un[1]=P>>>8&255,u.check=Bd(u.check,un,2,0)),P=0,L=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&((ee=u.length)>w&&(ee=w),ee&&(u.head&&(pt=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),cc.arraySet(u.head.extra,p,y,ee,pt)),512&u.flags&&(u.check=Bd(u.check,p,ee,y)),w-=ee,y+=ee,u.length-=ee),u.length))break e;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(0===w)break e;ee=0;do{pt=p[y+ee++],u.head&&pt&&u.length<65536&&(u.head.name+=String.fromCharCode(pt))}while(pt&&ee<w);if(512&u.flags&&(u.check=Bd(u.check,p,ee,y)),w-=ee,y+=ee,pt)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(0===w)break e;ee=0;do{pt=p[y+ee++],u.head&&pt&&u.length<65536&&(u.head.comment+=String.fromCharCode(pt))}while(pt&&ee<w);if(512&u.flags&&(u.check=Bd(u.check,p,ee,y)),w-=ee,y+=ee,pt)break e}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;L<16;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(P!==(65535&u.check)){i.msg="header crc mismatch",u.mode=30;break}P=0,L=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),i.adler=u.check=0,u.mode=12;break;case 10:for(;L<32;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}i.adler=u.check=Lw(P),P=0,L=0,u.mode=11;case 11:if(0===u.havedict)return i.next_out=C,i.avail_out=D,i.next_in=y,i.avail_in=w,u.hold=P,u.bits=L,2;i.adler=u.check=1,u.mode=12;case 12:if(5===l||6===l)break e;case 13:if(u.last){P>>>=7&L,L-=7&L,u.mode=27;break}for(;L<3;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}switch(u.last=1&P,L-=1,3&(P>>>=1)){case 0:u.mode=14;break;case 1:if(gM(u),u.mode=20,6===l){P>>>=2,L-=2;break e}break;case 2:u.mode=17;break;case 3:i.msg="invalid block type",u.mode=30}P>>>=2,L-=2;break;case 14:for(P>>>=7&L,L-=7&L;L<32;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if((65535&P)!=(P>>>16^65535)){i.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&P,P=0,L=0,u.mode=15,6===l)break e;case 15:u.mode=16;case 16:if(ee=u.length){if(ee>w&&(ee=w),ee>D&&(ee=D),0===ee)break e;cc.arraySet(v,p,y,ee,C),w-=ee,y+=ee,D-=ee,C+=ee,u.length-=ee;break}u.mode=12;break;case 17:for(;L<14;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(u.nlen=257+(31&P),L-=5,u.ndist=1+(31&(P>>>=5)),L-=5,u.ncode=4+(15&(P>>>=5)),P>>>=4,L-=4,u.nlen>286||u.ndist>30){i.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;L<3;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.lens[Tt[u.have++]]=7&P,P>>>=3,L-=3}for(;u.have<19;)u.lens[Tt[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,ht=wf(0,u.lens,0,19,u.lencode,0,u.work,gt={bits:u.lenbits}),u.lenbits=gt.bits,ht){i.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;Te=(Xt=u.lencode[P&(1<<u.lenbits)-1])>>>16&255,De=65535&Xt,!((Ee=Xt>>>24)<=L);){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(De<16)P>>>=Ee,L-=Ee,u.lens[u.have++]=De;else{if(16===De){for(Yt=Ee+2;L<Yt;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(P>>>=Ee,L-=Ee,0===u.have){i.msg="invalid bit length repeat",u.mode=30;break}pt=u.lens[u.have-1],ee=3+(3&P),P>>>=2,L-=2}else if(17===De){for(Yt=Ee+3;L<Yt;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}L-=Ee,pt=0,ee=3+(7&(P>>>=Ee)),P>>>=3,L-=3}else{for(Yt=Ee+7;L<Yt;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}L-=Ee,pt=0,ee=11+(127&(P>>>=Ee)),P>>>=7,L-=7}if(u.have+ee>u.nlen+u.ndist){i.msg="invalid bit length repeat",u.mode=30;break}for(;ee--;)u.lens[u.have++]=pt}}if(30===u.mode)break;if(0===u.lens[256]){i.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,ht=wf(1,u.lens,0,u.nlen,u.lencode,0,u.work,gt={bits:u.lenbits}),u.lenbits=gt.bits,ht){i.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,ht=wf(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,gt={bits:u.distbits}),u.distbits=gt.bits,ht){i.msg="invalid distances set",u.mode=30;break}if(u.mode=20,6===l)break e;case 20:u.mode=21;case 21:if(w>=6&&D>=258){i.next_out=C,i.avail_out=D,i.next_in=y,i.avail_in=w,u.hold=P,u.bits=L,I0(i,re),C=i.next_out,v=i.output,D=i.avail_out,y=i.next_in,p=i.input,w=i.avail_in,P=u.hold,L=u.bits,12===u.mode&&(u.back=-1);break}for(u.back=0;Te=(Xt=u.lencode[P&(1<<u.lenbits)-1])>>>16&255,De=65535&Xt,!((Ee=Xt>>>24)<=L);){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(Te&&0==(240&Te)){for(Le=Ee,et=Te,lt=De;Te=(Xt=u.lencode[lt+((P&(1<<Le+et)-1)>>Le)])>>>16&255,De=65535&Xt,!(Le+(Ee=Xt>>>24)<=L);){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}P>>>=Le,L-=Le,u.back+=Le}if(P>>>=Ee,L-=Ee,u.back+=Ee,u.length=De,0===Te){u.mode=26;break}if(32&Te){u.back=-1,u.mode=12;break}if(64&Te){i.msg="invalid literal/length code",u.mode=30;break}u.extra=15&Te,u.mode=22;case 22:if(u.extra){for(Yt=u.extra;L<Yt;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.length+=P&(1<<u.extra)-1,P>>>=u.extra,L-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;Te=(Xt=u.distcode[P&(1<<u.distbits)-1])>>>16&255,De=65535&Xt,!((Ee=Xt>>>24)<=L);){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(0==(240&Te)){for(Le=Ee,et=Te,lt=De;Te=(Xt=u.distcode[lt+((P&(1<<Le+et)-1)>>Le)])>>>16&255,De=65535&Xt,!(Le+(Ee=Xt>>>24)<=L);){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}P>>>=Le,L-=Le,u.back+=Le}if(P>>>=Ee,L-=Ee,u.back+=Ee,64&Te){i.msg="invalid distance code",u.mode=30;break}u.offset=De,u.extra=15&Te,u.mode=24;case 24:if(u.extra){for(Yt=u.extra;L<Yt;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}u.offset+=P&(1<<u.extra)-1,P>>>=u.extra,L-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){i.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(0===D)break e;if(u.offset>(ee=re-D)){if((ee=u.offset-ee)>u.whave&&u.sane){i.msg="invalid distance too far back",u.mode=30;break}te=ee>u.wnext?u.wsize-(ee-=u.wnext):u.wnext-ee,ee>u.length&&(ee=u.length),oe=u.window}else oe=v,te=C-u.offset,ee=u.length;ee>D&&(ee=D),D-=ee,u.length-=ee;do{v[C++]=oe[te++]}while(--ee);0===u.length&&(u.mode=21);break;case 26:if(0===D)break e;v[C++]=u.length,D--,u.mode=21;break;case 27:if(u.wrap){for(;L<32;){if(0===w)break e;w--,P|=p[y++]<<L,L+=8}if(i.total_out+=re-=D,u.total+=re,re&&(i.adler=u.check=u.flags?Bd(u.check,v,re,C-re):DD(u.check,v,re,C-re)),re=D,(u.flags?P:Lw(P))!==u.check){i.msg="incorrect data check",u.mode=30;break}P=0,L=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;L<32;){if(0===w)break e;w--,P+=p[y++]<<L,L+=8}if(P!==(4294967295&u.total)){i.msg="incorrect length check",u.mode=30;break}P=0,L=0}u.mode=29;case 29:ht=1;break e;case 30:ht=-3;break e;case 31:return-4;default:return-2}return i.next_out=C,i.avail_out=D,i.next_in=y,i.avail_in=w,u.hold=P,u.bits=L,(u.wsize||re!==i.avail_out&&u.mode<30&&(u.mode<27||4!==l))&&w0(i,i.output,i.next_out,re-i.avail_out),re-=i.avail_out,i.total_in+=W-=i.avail_in,i.total_out+=re,u.total+=re,u.wrap&&re&&(i.adler=u.check=u.flags?Bd(u.check,v,re,i.next_out-re):DD(u.check,v,re,i.next_out-re)),i.data_type=u.bits+(u.last?64:0)+(12===u.mode?128:0)+(20===u.mode||15===u.mode?256:0),(0===W&&0===re||4===l)&&0===ht&&(ht=-5),ht},Ld.inflateEnd=function(i){if(!i||!i.state)return-2;var l=i.state;return l.window&&(l.window=null),i.state=null,0},Ld.inflateGetHeader=function(i,l){var u;return i&&i.state?0==(2&(u=i.state).wrap)?-2:(u.head=l,l.done=!1,0):-2},Ld.inflateSetDictionary=function(i,l){var u,p=l.length;return i&&i.state?0!==(u=i.state).wrap&&11!==u.mode?-2:11===u.mode&&DD(1,l,p,0)!==u.check?-3:w0(i,l,p,p)?(u.mode=31,-4):(u.havedict=1,0):-2},Ld.inflateInfo="pako inflate (from Nodeca project)";var T0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},ng=Ld,yy=Xm,Fw=Nh,Vs=T0,Ey=dM,_M=Bo,xD=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Uw=Object.prototype.toString;function rg(i){if(!(this instanceof rg))return new rg(i);this.options=yy.assign({chunkSize:16384,windowBits:0,to:""},i||{});var l=this.options;l.raw&&l.windowBits>=0&&l.windowBits<16&&(l.windowBits=-l.windowBits,0===l.windowBits&&(l.windowBits=-15)),!(l.windowBits>=0&&l.windowBits<16)||i&&i.windowBits||(l.windowBits+=32),l.windowBits>15&&l.windowBits<48&&0==(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _M,this.strm.avail_out=0;var u=ng.inflateInit2(this.strm,l.windowBits);if(u!==Vs.Z_OK)throw new Error(Ey[u]);if(this.header=new xD,ng.inflateGetHeader(this.strm,this.header),l.dictionary&&("string"==typeof l.dictionary?l.dictionary=Fw.string2buf(l.dictionary):"[object ArrayBuffer]"===Uw.call(l.dictionary)&&(l.dictionary=new Uint8Array(l.dictionary)),l.raw&&(u=ng.inflateSetDictionary(this.strm,l.dictionary))!==Vs.Z_OK))throw new Error(Ey[u])}function R0(i,l){var u=new rg(l);if(u.push(i,!0),u.err)throw u.msg||Ey[u.err];return u.result}rg.prototype.push=function(i,l){var u,p,v,y,C,w=this.strm,D=this.options.chunkSize,P=this.options.dictionary,L=!1;if(this.ended)return!1;p=l===~~l?l:!0===l?Vs.Z_FINISH:Vs.Z_NO_FLUSH,w.input="string"==typeof i?Fw.binstring2buf(i):"[object ArrayBuffer]"===Uw.call(i)?new Uint8Array(i):i,w.next_in=0,w.avail_in=w.input.length;do{if(0===w.avail_out&&(w.output=new yy.Buf8(D),w.next_out=0,w.avail_out=D),(u=ng.inflate(w,Vs.Z_NO_FLUSH))===Vs.Z_NEED_DICT&&P&&(u=ng.inflateSetDictionary(this.strm,P)),u===Vs.Z_BUF_ERROR&&!0===L&&(u=Vs.Z_OK,L=!1),u!==Vs.Z_STREAM_END&&u!==Vs.Z_OK)return this.onEnd(u),this.ended=!0,!1;w.next_out&&(0!==w.avail_out&&u!==Vs.Z_STREAM_END&&(0!==w.avail_in||p!==Vs.Z_FINISH&&p!==Vs.Z_SYNC_FLUSH)||("string"===this.options.to?(v=Fw.utf8border(w.output,w.next_out),y=w.next_out-v,C=Fw.buf2string(w.output,v),w.next_out=y,w.avail_out=D-y,y&&yy.arraySet(w.output,w.output,v,y,0),this.onData(C)):this.onData(yy.shrinkBuf(w.output,w.next_out)))),0===w.avail_in&&0===w.avail_out&&(L=!0)}while((w.avail_in>0||0===w.avail_out)&&u!==Vs.Z_STREAM_END);return u===Vs.Z_STREAM_END&&(p=Vs.Z_FINISH),p===Vs.Z_FINISH?(u=ng.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Vs.Z_OK):p!==Vs.Z_SYNC_FLUSH||(this.onEnd(Vs.Z_OK),w.avail_out=0,!0)},rg.prototype.onData=function(i){this.chunks.push(i)},rg.prototype.onEnd=function(i){i===Vs.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):yy.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},z_.Inflate=rg,z_.inflate=R0,z_.inflateRaw=function(i,l){return(l=l||{}).raw=!0,R0(i,l)},z_.ungzip=R0;var LD={};(0,Xm.assign)(LD,Rw,z_,T0);var vM=LD;const{WebclientBreakoutRoomAttendeeStatus:ig,WebclientBreakoutRoomCommand:AM}=Ur;function jl(i,l){let u=0;for(;u<i.length;u++){const p=i[u],{attendeeGuidList:v}=p;if(null!=v&&v.includes(l))break}return u<i.length?i[u]:void 0}function og(){ni.remove(ig),ni.remove(AM)}function Y_(){return Wo.createAgent().leaveBO(1),vt(Fc,{reason:Ws.BackToMainSession}),og(),[aA(ur.Leaving),Ca(xa.NormalCase)]}function q_(i,l){return vt(Fc,{reason:Ws.JoinBreakoutRoom,roomName:i}),l===ur.InRoom&&Wo.createAgent().leaveBO(1),[aA(ur.Joining),Ca(xa.NormalCase)]}function BD(i){return vt(Fc,{reason:Ws.MoveToBreakoutRoom,roomName:i}),Wo.createAgent().leaveBO(1),[aA(ur.Joining),Ca(xa.NormalCase)]}function FD(i){const u=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?ur.InRoom:ur.Invited;return ni.set(ig,JSON.stringify({status:u,boId:i.boId}),mi.SessionStorage),NC({status:u,boId:i.boId,name:i.name,boStatus:i.boStatus})}function Vw(i){const{breakoutRoom:{isUserRoleUpdated:l,currentRoom:{boConfId:u}}}=i.value,p=ii(i.value);return p&&(!u||u&&l)?or(p.isHost):(u?zs(hu,1):zs(rm,2).pipe(function(v){return v.lift(new UL(1))})).pipe(Gt(Ps),Un(i),_t(v=>{let[,y]=v;return ii(y).isHost}))}function UD(i){return Cg({boIdList:zs(OT).pipe(F4((l,u)=>[...l,u],[]),Ns(i))}).pipe(K1(1e4))}const xh=Wo.createAgent(),jw=["userRole","bCoHost","bCCEditor","bHold"];var pV=Object.freeze({__proto__:null,handleBreakoutRoomOptionEpic:(i,l)=>i.pipe(fi(`${xg}`),io(u=>{const{breakoutRoom:p,meeting:{meetingOptions:v}}=l.value,{payload:{hugeBO:y,elapsed:C}}=u,w=[];return p&&(v&&(w.push(pR(y&&!0===v.isBO100Enabled)),w.push(mR({isEnableBreakoutRoom:v.isEnableBreakoutRoom,isEnableBOBroadcast:v.isEnableBOBroadcast}))),p.currentRoom.boConfId&&w.push(kg()),void 0!==C&&w.push(uR(C))),Mn(w)})),addRoomEpic:i=>ar(i,4174).pipe(sr(l=>{vt(OT,l.payload.body.bid)}),Qr(qt)),handleBoAttributeIndicationEpic:(i,l)=>xs(i,7950).pipe(Un(l),io(u=>{let[p,v]=u;const{payload:{body:{proto:y}}}=p,{breakoutRoom:{isHugeBO:C,currentRoom:{status:w,boId:D}},meeting:{userGUID:P}}=v;let L=y;C&&(L=vM.ungzip(vl(y),{to:"string"}));const re=JSON.parse(Up(L)),ee=[];let te;const{ControlStatus:oe,NameIndex:Ee,IsAutoJoinEnabled:Te,IsBackToMainSessionEnabled:De,IsTimerEnabled:Le,TimerDuration:et,IsTimerAutoEndEnabled:lt,WaitSeconds:pt,StartTimeOnMMR:ht,ItemList:gt}=re,Yt={isAutoJoinRoom:Te,isBackToMainSessionEnabled:De,isTimerEnabled:Le,timerDuration:et,isTimerAutoEnabled:lt,waitSeconds:pt};ee.push(dR(Yt)),ee.push(lR(ht)),ee.push(nb(Ee)),ee.push(wm(oe));const Xt=gt&&gt.map(un=>({boId:un.BID,name:un.MeetingTitle,boStatus:un.Status,hostId:un.HostID,attendeeGuidList:un.ParticipantList||[]}))||[];switch(ee.push(n_(Xt)),vt(pm,{controlStatus:oe,roomList:Xt}),oe){case hi.InProgress:if(w!==ur.InRoom&&w!==ur.Joining){const un=function(Tt,yn){const{meeting:{isHost:Kn,userGUID:Pt}}=yn.value,mt=ni.get(ig),Ve=[];if(mt){const{status:tt,boId:Rt}=JSON.parse(mt);if(tt===ur.Invited)if(Kn)og();else{const st=jl(Tt,Pt);st&&(Ve.push(FD(st)),vt(sC,{roomId:st.boId,name:st.name}))}else if(tt===ur.InRoom){let st;if(st=Kn?Tt.find(Bt=>Bt.boId===Rt):jl(Tt,Pt),st){Ve.push(FD(st));const Bt=st.boId;Dm(yn).subscribe(()=>{Wo.createAgent().joinBO(Bt)})}og()}}return Ve}(Xt,l);if(0===un.length){const Tt=jl(Xt,P);Tt&&ee.push(FD(Tt))}else ee.push(...un)}else if(w===ur.InRoom&&p.type===`${gl}`){const un=jl(Xt,P);un&&Vw(l).subscribe(Tt=>{D===un.boId||Tt||xh.joinBO(un.boId)})}Yt.isTimerEnabled&&Yt.timerDuration>0&&(Tt=Yt.timerDuration,yn=ht,te=Vw(un=l).pipe(Un(un),io(Kn=>{let[Pt,mt]=Kn;const{breakoutRoom:{currentRoom:{status:Ve},meetingElapsedTime:tt},meeting:{joinMeetingTimeStamp:Rt}}=mt,st=Rt-1e3*tt+1e3*yn+1e3*Tt;if(performance.now()<st){if(Pt)return Ig(1e3).pipe(_t(()=>Math.floor((st-performance.now())/1e3)),Un(un),th(Bt=>{let[pe,ye]=Bt;const{breakoutRoom:{controlStatus:wn,currentRoom:{status:Kr}},socket:{zoomSocketStatus:Jo},meeting:{isHost:bu}}=ye;return pe>=0&&bu&&wn===hi.InProgress&&(Kr===ur.InRoom||Kr===ur.MainSession||Kr===ur.Initial)&&Jo===Co.Connected}),sr(Bt=>{let[pe]=Bt;vt(DT,{countdown:pe})}),kn(Bt=>{let[pe]=Bt;return 0===pe}),sr(Bt=>{let[,pe]=Bt;const{breakoutRoom:{options:ye}}=pe;ye.isTimerAutoEnabled?Wo.createAgent().stopBO(hi.Closing):vt(aC)}),Qr(qt));if(Ve===ur.InRoom)return Ig(1e3).pipe(_t(()=>Math.floor((st-performance.now())/1e3)),Un(un),th(Bt=>{let[pe,ye]=Bt;const{breakoutRoom:{currentRoom:{status:wn}},meeting:{isHost:Kr},socket:{zoomSocketStatus:Jo}}=ye;return pe>=0&&wn===ur.InRoom&&!Kr&&Jo===Co.Connected}),sr(Bt=>{let[pe]=Bt;vt(DT,{countdown:pe})}),Qr(qt))}return qt})));break;case hi.Closing:te=Vw(l).pipe(kn(un=>un),$n(()=>{const un=[],{breakoutRoom:{closingRoomTime:Tt,currentRoom:{status:yn}},participants:{attendeesList:Kn}}=v;let Pt=Yt.waitSeconds;if(0!==Tt&&Yt.waitSeconds>0){const mt=Math.floor((performance.now()-Tt)/1e3);Pt=Math.max(Yt.waitSeconds-mt,0)}if(0===Pt)return xh.stopBO(hi.Closed),qt;{if(yn!==ur.InRoom&&Kn.length>1&&Kn.every(Ve=>!Ve.bid))return xh.stopBO(hi.Closed),qt;Tt||un.push(hR(performance.now()));const mt=performance.now()+1e3*Pt;return Ss(Mn(un),Ig(1e3).pipe(_t(()=>Math.floor((mt-performance.now())/1e3)),Un(l),th(Ve=>{let[tt,Rt]=Ve;const{breakoutRoom:{controlStatus:st},meeting:{isHost:Bt},socket:{zoomSocketStatus:pe}}=Rt;return tt>=0&&st===hi.Closing&&pe===Co.Connected&&Bt}),sr(Ve=>{let[tt]=Ve;tt>=0&&vt(gd,{countdown:tt})}),kn(Ve=>{let[tt]=Ve;return 0===tt}),sr(()=>{xh.stopBO(hi.Closed)}),Qr(qt)))}}));break;case hi.Closed:ee.push(hR(0)),w===ur.Leaving?ee.push(aA(ur.MainSession)):w===ur.Invited?ee.push(aA(ur.Initial)):w!==ur.InRoom&&w!==ur.Joining||ee.push(...Y_()),og()}var un,Tt,yn;return te?Ss(Mn(ee),te):Mn(ee)})),handleBoJoinResponseEpic:(i,l)=>xs(i,4194).pipe(Un(l),io(u=>{let[p,v]=u;const{payload:{body:{bid:y,botoken:C,confID:w}}}=p,{meeting:{isHost:D},breakoutRoom:{rooms:P,currentRoom:{status:L}}}=v,W=[],re=P.find(ee=>ee.boId===y);return re&&(W.push(FD(re,D)),W.push(MC(w)),W.push(xC(C)),D||L!==ur.InRoom?W.push(...q_(re.name,L)):W.push(...BD(re.name))),vt(Z2,{boId:y}),Mn(W)})),handleBoCommandIndicationEpic:(i,l)=>i.pipe(fi(`${cd}`,`${gl}`),kn(u=>7949===u.payload.evt),Un(l),$n(u=>{let[p,v]=u;const{payload:{body:y}}=p,{meeting:{userGUID:C},breakoutRoom:{rooms:w,options:{isAutoJoinRoom:D},currentRoom:{status:P}}}=v,{commandType:L}=y,W=[];let re;switch(L){case Am.Join:{const{targetBID:te,botoken:oe,confID:Ee}=y,Te=jl(w,C);Te&&Te.boId===te&&(W.push(MC(Ee)),W.push(xC(oe)),D?W.push(...q_(Te.name)):(ni.set(Ur.WebclientBreakoutRoomCommand,L,mi.SessionStorage),vt(sC,{roomId:te,name:Te.name})));break}case Am.Switch:{const{targetBID:te,botoken:oe,confID:Ee}=y,Te=jl(w,C);Te&&Te.boId===te&&(W.push(NC({boId:Te.boId,boToken:oe,boConfId:Ee,name:Te.name})),P===ur.Invited?(ni.set(Ur.WebclientBreakoutRoomCommand,L,mi.SessionStorage),D?W.push(...q_(Te.name)):vt(sC,{roomId:te,name:Te.name})):W.push(...BD(Te.name)));break}case Am.Leave:{const{waitTime:te}=y;if((ee=P)!==ur.InRoom&&ee!==ur.Joining&&ee!==ur.Leaving)W.push(NC({boId:"",boToken:"",boConfId:"",status:ur.Initial}));else{const oe=Number(te);if(oe>0){const Ee=performance.now()+1e3*oe;re=Ig(1e3).pipe(_t(()=>Math.floor((Ee-performance.now())/1e3)),Un(l),th(Te=>{let[De,Le]=Te;const{breakoutRoom:{controlStatus:et,currentRoom:{status:lt}},meeting:{isHost:pt},socket:{zoomSocketStatus:ht}}=Le;return De>=0&&ht===Co.Connected&&et===hi.Closing&&lt===ur.InRoom&&!pt}),sr(Te=>{let[De]=Te;De>=0&&vt(gd,{countdown:De})}),Qr(qt))}else W.push(...Y_());og()}break}case Am.Broadcast:{const{textContent:te}=y;if(te){const{meeting:{encType:oe},participants:{attendeesList:Ee},breakoutRoom:{mainSessionAttendeeList:Te}}=v;let De="";if(oe===ra.AES_GCM){const Le=Ee.concat(Te).find(et=>LT(et.userRole));Le&&(De=Le.zoomID)}re=Mn(ld.beginDecrypt({decryptedText:te,type:ec.BO_BROADCAST,zoomId:De}).then(Le=>{let{message:et}=Le;return vt(Qu,{message:et}),LC(et)}))}break}case Am.HelpReq:{const{requestID:te}=y,{breakoutRoom:{mainSessionAttendeeList:oe,rooms:Ee,currentRoom:{boId:Te},hostReplyToQuestionerType:De,hostReplyToRequestId:Le},participants:{attendeesList:et}}=v;if(te){if(P===ur.InRoom){const lt=oe.find(pt=>pt.userId===te);if(lt&&lt.bid===Te){xh.askForHelpResultBO(te,K.AskHostHelpResponse.AlreadyInRoom);break}}if(De===K.AskHostHelpResponse.Received&&Le!==te)xh.askForHelpResultBO(te,K.AskHostHelpResponse.Busy);else{xh.askForHelpResultBO(te,K.AskHostHelpResponse.Received),W.push(rb(K.AskHostHelpResponse.Received),yP(te));const lt=(P===ur.InRoom?oe:et).find(pt=>pt.userId===te);if(lt){const pt=lt.bid,ht=Ee.find(gt=>gt.boId===pt);ht&&vt(ip,{userId:te,displayName:lt.displayName,roomName:ht.name,roomId:ht.boId})}}}break}case Am.HelpRes:{const{helpResult:te}=y;vt(GE,{result:Number(te)});break}}var ee;return re?Ss(Mn(W),re):Mn(W)})),handleMainSessionJoinResponseEpic:(i,l)=>Fp(i,4098).pipe(Un(l),io(u=>{let[p,v]=u;const{payload:{body:{res:y,elapsed:C}}}=p,w=[];return y===ud.CONF_FAIL_MEETING_HAS_CLOSED||y===ud.CONF_FAIL_HAS_BEEN_REMOVED?(og(),w.push(...Om(v,!1))):y===ud.CONF_SUCCESS&&(w.push(uR(C)),w.push(aA(ur.InRoom)),ni.set(Ur.WebclientBreakoutRoomAttendeeStatus,JSON.stringify({status:ur.InRoom,boId:v.breakoutRoom.currentRoom.boId}),mi.SessionStorage)),Mn(w)})),handleMainSessionRosterUpdateResponse:(i,l)=>Fp(i,Mo).pipe(_t(u=>wA(u.payload.body)),Un(l),$n(u=>{let[p,v]=u;const y=[BC(p)],{participants:{attendeesList:C},breakoutRoom:{mainSessionAttendeeList:w,isUserRoleUpdated:D},meeting:{userId:P}}=v;let L=[];return["add","update"].forEach(W=>p[W]&&L.push(...p[W])),L=L.filter(W=>jw.some(re=>void 0!==W[re])).map(W=>{const re=w.find(ee=>ee.userId===W.userId);if(re){const ee=C.find(te=>te.zoomID===re.zoomID);if(ee)return void 0===W.userRole||D||ee.userId!==P||(y.push(fR(!0)),vt(hu,W)),void 0!==W.bCCEditor&&y.push(sR({editorId:W.bCCEditor?ee.userId:"",isEditor:!!W.bCCEditor,editorZoomId:W.bCCEditor?ee.zoomID:""})),delete W.bRaiseHand,delete W.bCapsPinMultiVideo,cn(cn({},W),{},{userId:ee.userId})}return null}).filter(W=>!!W),L.length>0&&(vt(hd,L),y.push(qg({update:L}))),vt(WE),Mn(y)})),handleMainSessionMeetingAttributeEpic:i=>Fp(i,tc).pipe(kn(l=>{const{payload:{body:u}}=l;return void 0!==u?.bAllowAttendeeRename||void 0!==u?.chatPriviledge||void 0!==u?.lockShare}),_t(l=>{const{payload:{body:u}}=l;return void 0!==u.bAllowAttendeeRename?qf(l.payload.body):void 0!==u.chatPriviledge?kC(u.chatPriviledge):void 0!==u.lockShare?QT(u.lockShare):void 0})),handleClosingRoomAttendeeUpdateEpic:(i,l)=>ar(i,Mo).pipe(Un(l),kn(u=>{let[,p]=u;const{meeting:{isHost:v},breakoutRoom:{controlStatus:y,currentRoom:{status:C}}}=p;return v&&y===hi.Closing&&C!==ur.InRoom}),Gt(Ps),sr(()=>{const{participants:{attendeesList:u}}=l.value;u.every(p=>!p.bid)&&u.length>1&&xh.stopBO(hi.Closed)}),Qr(qt)),handlePreAssignedRoomRespEpic:(i,l)=>ar(i,4214).pipe(Un(l),io(u=>{let[p,v]=u;const{payload:{body:{proto:y}}}=p,{breakoutRoom:{rooms:C,isHugeBO:w}}=v;try{const D=JSON.parse(Up(y)),P=[];if(D&&D.PreAssignBoList&&Array.isArray(D.PreAssignBoList)){const L=D.PreAssignBoList.map(re=>({name:re.BoName,emails:re.email}));if(P.push(EP(L)),C.length+L.length<(w?100:50)){const re=L.map(ee=>ee.name);return xh.batchCreateBOToken(re),Ss(Mn(P),UD(re.length).pipe(Un(l),$n(ee=>{let[{boIdList:te},oe]=ee;const Ee=Zi(oe),Te=L.map((Le,et)=>{const{emails:lt,name:pt}=Le;let ht=[];return lt&&Array.isArray(lt)&&(ht=lt.map(gt=>Ee.filter(Yt=>Yt.userEmail===gt).map(Yt=>Yt.userGUID)).reduce((gt,Yt)=>[...gt,...Yt],[])),{boId:te[et],name:pt,attendeeGuidList:ht}}),De=Te.map((Le,et)=>({roomId:Le.boId,name:Le.name,emails:L[et].emails}));return vt(Xp,{rooms:De}),Mn([n_(Te),EP(De)])})))}return Mn(P)}}catch{console.error("pre assign proto is not valid")}return qt})),handlePreAssignedUserJoinMeetingEpic:(i,l)=>xs(i,Mo).pipe(Un(l),kn(u=>{let[p,v]=u;const{meeting:{isHost:y,meetingStatus:C,meetingOptions:w},breakoutRoom:{controlStatus:D}}=v,{payload:{body:P}}=p;return C===Bi.Joined&&w?.isAllowBreakoutRoomPreAssign&&y&&(D===hi.NotStarted||D===hi.InProgress)&&Array.isArray(P.add)}),$n(u=>{let[p,v]=u;const{breakoutRoom:{controlStatus:y,rooms:C,preAssignedRooms:w,currentRoom:{status:D}},participants:{failoverAttendeesList:P}}=v,L=w?.filter(ee=>C.findIndex(te=>te.boId===ee.roomId)>-1),{payload:{body:{add:W}}}=p,re=[];return L.length>0&&W.filter(ee=>ee.userEmail&&ee.userGUID).filter(ee=>-1===P.findIndex(te=>te.zoomID===ee.zoomID)).forEach(ee=>{if(!jl(C,ee.userGUID))for(let te=0;te<L?.length;te++){const oe=L[te];if(oe.emails.includes(ee.userEmail)){if(y===hi.NotStarted){const Ee=It(C,Te=>{Te.find(Le=>Le.boId===oe.roomId)?.attendeeGuidList.push(ee.userGUID)});re.push(n_(Ee))}else y===hi.InProgress&&(D===ur.InRoom&&p.type===`${gl}`?xh.assignToBO(ee.id,String(oe.roomId)):D!==ur.Initial&&D!==ur.MainSession||xh.assignToBO(ee.id,String(oe.roomId)));break}}}),Mn(re)})),handleInconsistentPropertiesInBOUserEpic:(i,l)=>ar(i,Mo).pipe(kn(u=>{const{breakoutRoom:{mainSessionAttendeeList:p}}=l.value,{payload:{body:v}}=u;return p.length>0&&(void 0!==v.add||void 0!==v.update)}),Gt(nd),_t(u=>wA(u.payload.body)),$n(u=>{const{breakoutRoom:{mainSessionAttendeeList:p,isUserRoleUpdated:v},participants:{attendeesList:y}}=l.value;let C=[];const w=[];["add","update"].forEach(L=>u[L]&&C.push(...u[L]));const D=[...jw,"isHost"];C=C.filter(L=>D.some(W=>void 0!==L[W]));const P=C.filter(L=>void 0!==L.zoomID);return C=C.map(L=>{var W,re,ee,te;const oe=null!==(W=null!==(re=L.zoomID)&&void 0!==re?re:null===(ee=P.find(Ee=>Ee.userId===L.userId))||void 0===ee?void 0:ee.zoomID)&&void 0!==W?W:null===(te=y.find(Ee=>Ee.userId===L.userId))||void 0===te?void 0:te.zoomID;if(oe){const Ee=p.find(Te=>Te.zoomID===oe);if(Ee)return v||(w.push(fR(!0)),vt(hu,Ee)),Object.keys(L).filter(Te=>Object.prototype.hasOwnProperty.call(L,Te)).filter(Te=>D.includes(Te)).reduce((Te,De)=>(void 0===Ee[De]&&"bCoHost"!==De||Object.assign(Te,{[De]:"boolean"==typeof L[De]?!!Ee[De]:Ee[De]}),Te),{userId:L.userId})}}).filter(Boolean),C.length>0&&(vt(hd,C),w.push(qg({update:C}))),Mn(w)}))});const Lh=Wo.createAgent();var VD=Object.freeze({__proto__:null,handleMainSessionReceivingSharingEpic:(i,l)=>Fp(i,Mo).pipe(kn(u=>{var p;const{payload:{body:v}}=u;return null==v||null===(p=v.update)||void 0===p?void 0:p.some(y=>void 0!==y.bShareToBORooms||void 0!==y.bShareOn)}),Un(l),_t(u=>{let[p,v]=u;const{payload:{body:{update:y}}}=p,{breakoutRoom:{mainSessionAttendeeList:C}}=v,w=y.filter(L=>L.bShareOn&&L.bShareToBORooms),D=y.filter(L=>!L.bShareOn||!L.bShareToBORooms),P=C.filter(L=>L.sharerOn&&L.bShareToBORooms);return w.length>0&&w.forEach(L=>{-1===P.findIndex(W=>W.userId===L.id)&&vt(wT,cn(cn({},L),{},{isFromMainSession:!0}))}),D.length>0&&D.forEach(L=>{vt(Wg,cn(cn({},L),{},{isFromMainSession:!0}))}),y.map(L=>{if(L.bShareOn&&L.bShareToBORooms){if(0===C.filter(W=>W.sharerOn&&W.bShareToBORooms&&W.userId!==L.id).length)return{activeNodeID:L.id,bStatus:1,ssrc:L.shareSsrc};{const W=C.find(re=>re.userId===L.id);if(null!=W&&W.isHost)return{activeNodeID:L.id,bStatus:1,ssrc:L.shareSsrc}}}else if(!L.bShareOn||!L.bShareToBORooms){const W=C.filter(re=>re.bShareToBORooms&&re.sharerOn);if(1===W.length&&W[0].userId===L.id)return{activeNodeID:L.id,bStatus:0,ssrc:0};{const re=W.filter(te=>te.userId!==L.id),ee=re.find(te=>te.isHost);if(ee)return{activeNodeID:ee.userId,bStatus:1,ssrc:ee.shareSsrc};{const te=re[0];if(te)return{activeNodeID:te.userId,bStatus:1,ssrc:te.shareSsrc}}}}}).filter(Boolean)}),$n(u=>{const{share:{status:p},meeting:{userId:v}}=l.value,y=ji.getInstance(),C=[];return u.map(w=>{const{activeNodeID:D,bStatus:P,ssrc:L}=w,W=1===P;C.push(SC(W)),W&&p!==K.ShareStatus.End&&(Lh.stopSharing(v),y.stopDesktopSharing(),C.push(Ku(K.ShareStatus.End)),vt(ju));let re={activeNodeID:D,bStatus:P,ssrc:L,fromMainSession:!0};if(!W){const{participants:{attendeesList:ee}}=l.value,te=ee.filter(oe=>oe.sharerOn);if(te.length>0){const oe=te[0];re={activeNodeID:oe.userId,bStatus:1,ssrc:oe.shareSsrc||0}}}C.push(cd({evt:20225,body:re}))}),Mn(C)})),handleMainSessionCreateExtraChannelEpic:(i,l)=>Fp(i,4098).pipe(io(u=>{const{payload:{body:{userID:p,confID:v}}}=u;return Ss(...["sharing","audio"].map(y=>{return D=l,P=p,L=v,Fp(i,"audio"===(C=y)?Ov:Bg).pipe(Ns(1),sr(W=>{const{payload:{body:{encryptKey:re,additionalType:ee}}}=W,{media:{sharingDecodeStatus:te,audioDecodeStatus:oe},meeting:{svcUrl:Ee,meetingNumber:Te,conId:De,zoomId:Le,meetingId:et}}=D.value;mu(C,"success","audio"===C?oe:te).subscribe(lt=>{let[,pt]=lt;const ht=ji.getInstance();if(pt){ht.createMainSessionChannel(C,`wss://${Ee}/wc/media/${Te}?type=${"audio"===C?"ma":"ms"}&cid=${De}&mode=1`),ht.updateMediaParams({iVType:"audio"===C?La.AUDIO_DECODE:La.SHARING_DECODE,isFromMainSession:!0,updateParams:{userId:P,sn:vl(Le),confId:L,encryptType:ee,encryptKey:vl(re),meetingId:et,meetingNumber:Te}});const{breakoutRoom:{mainSessionAttendeeList:Yt}}=D.value;if(Yt?.length>0){const Xt=Yt.map(un=>({userid:un.userId,sn:un.zoomID&&vl(un.zoomID)}));ht.updateUserMediaSN({added:Xt,isFromMainSession:!0,iVType:"audio"===C?La.AUDIO_DECODE:La.SHARING_DECODE})}}})}),Qr(qt));var C,D,P,L}))}))});const sg=Ys([i=>{let{breakoutRoom:{controlStatus:l}}=i;return l},i=>{let{breakoutRoom:{currentRoom:{status:l}}}=i;return l},i=>{let{breakoutRoom:{currentRoom:{boId:l}}}=i;return l}],(i,l,u)=>!(i!==hi.InProgress&&i!==hi.Closing||l!==ur.InRoom&&l!==ur.TimeUp||!u)),jD=Ys([i=>{let{breakoutRoom:{rooms:l}}=i;return l},hh,i=>{let{meeting:{zoomId:l}}=i;return l},i=>{let{breakoutRoom:{mainSessionAttendeeList:l}}=i;return l},sg,i=>{let{breakoutRoom:{isHugeBO:l}}=i;return l}],(i,l,u,p,v,y)=>{const C=i.reduce((w,D)=>{const{attendeeGuidList:P}=D;return w.concat(P)},[]);return(v?p:l).filter(w=>{return!(w.bHold||w.isHost||w.zoomID===u||w.bid||C.includes(w.userGUID)||y&&(D=w.caps,4!=(4&D)));var D})});var Hi;const yu=Wo.createAgent();let Qw=(jn((Hi=class extends Gm{createRooms(i,l){const u=this[lr](),p=this[Oc],{breakoutRoom:{isHugeBO:v,sequenceId:y,rooms:C,controlStatus:w,isEnableBreakoutRoom:D}}=u;if(!D)return Promise.reject({type:Hn,reason:"Breakout room feature is not enabled."});if(w===hi.InProgress||w===hi.Closing)return Promise.resolve({type:Hn,reason:"breakout room has started!"});let P;return P="string"==typeof i?[i]:"number"==typeof i?Array.from({length:i}).map((W,re)=>`Subsession ${re+y}`):i,P.length<1||C.length+P.length>(v?100:50)?Promise.reject({type:kr,reason:"exceed maximum size"}):(yu.batchCreateBOToken(P),new Promise((W,re)=>{UD(P.length).subscribe(ee=>{let{boIdList:te}=ee,oe=te.map((Te,De)=>({boId:Te,name:P[De]}));if(l===vm.Automatically){const Te=jD(u),De=oe.length,Le=Te.length;oe=oe.map((et,lt)=>{const pt=[];let ht=lt;for(;ht<Le;)pt.push(Te[ht]),ht+=De;return cn(cn({},et),{},{attendeeList:pt})})}const Ee=oe.map(Te=>{let{boId:De,name:Le,attendeeList:et}=Te;return{boId:De,name:Le,attendeeGuidList:et&&et.map(lt=>lt.userGUID)}});if(p(aR(Ee)),p(cR(l)),p(nb(y+oe.length)),l===vm.Automatically){const Te=oe.map(De=>({roomId:De.boId,name:De.name,attendeeList:De.attendeeList.map(Le=>({userId:Le.userId,avatar:Le.avatar,displayName:Le.displayName}))}));W(Te)}else W(oe.map(Te=>({roomId:Te.boId,name:Te.name,attendeeList:[]})))},()=>{re({type:rp})})}))}openRooms(i,l){const u=this[lr](),p={isAutoJoinRoom:!1,isBackToMainSessionEnabled:!0,isTimerEnabled:!1,timerDuration:1800,isTimerAutoEnabled:!1,waitSeconds:60},{breakoutRoom:{controlStatus:v,rooms:y,sequenceId:C,isHugeBO:w}}=u;if(v===hi.InProgress||v===hi.Closing)return Promise.resolve({type:Hn,reason:"breakout room has started!"});if(i.some(te=>-1===y.findIndex(oe=>oe.boId===te.roomId)))return Promise.reject({type:kr,reason:"roomId is wrong"});const D=Zi(u);if(i.reduce((te,oe)=>te.concat(oe.attendeeList),[]).some(te=>-1===D.findIndex(oe=>oe.userId===te.userId)))return Promise.reject({type:kr,reason:"bad user"});const P=i.map(te=>{const{attendeeList:oe}=te,Ee=oe.map(Te=>D.find(Le=>Le.userId===Te.userId)?.userGUID);return{BID:te.roomId,MeetingTitle:te.name,MeetingToken:void 0,Status:JE.Started,HostID:"",ParticipantList:Ee}}),L=l?cn(cn({},p),l):p;let re=cE(JSON.stringify({ControlStatus:hi.InProgress,NameIndex:C,IsAutoJoinEnabled:+L.isAutoJoinRoom,IsBackToMainSessionEnabled:+L.isBackToMainSessionEnabled,IsTimerEnabled:+L.isTimerEnabled,TimerDuration:L.timerDuration,IsTimerAutoEndEnabled:+L.isTimerAutoEnabled,WaitSeconds:L.waitSeconds<0?0:L.waitSeconds,StartTimeOnMMR:void 0,ItemList:P}));return w&&(re=bv.exports.Base64.fromUint8Array(vM.gzip(re))),yu.startBO(re),Ni(pm,te=>te.controlStatus===hi.InProgress)}joinRoom(i){const l=this[lr](),u=ii(l),{breakoutRoom:{controlStatus:p,rooms:v,mainSessionAttendeeList:y,currentRoom:{status:C,boId:w}},meeting:{userGUID:D}}=l;if(p!==hi.InProgress)return Promise.reject({type:hm,reason:"breakout room is not started"});if(null!=u&&u.isHost){const P=v.find(L=>L.boId===i);if(!P)return Promise.reject({type:kr,reason:"room id is not correct"});yu.joinBO(P.boId)}else if(null!=u&&u.bCoHost&&C===ur.InRoom){if(!v.find(P=>P.boId===i))return Promise.reject({type:kr,reason:"room id is not correct"});{const P=y.find(L=>L.isHost);P&&yu.wantJoinBO(P?.userId,i)}}else{if(C===ur.InRoom&&w===i)return Promise.reject({type:Hn,reason:"You are in room"});{const P=jl(v,D);if(!P||P.boId!==i)return Promise.reject({type:kr,reason:"room id is not correct"});yu.joinBO(P.boId)}}return Ni(Z2,P=>P.boId===i)}leaveRoom(){const i=this[lr](),l=this[Oc],{breakoutRoom:{controlStatus:u,options:p,currentRoom:{status:v}}}=i;if(u!==hi.InProgress&&u!==hi.Closing||v!==ur.InRoom)return Promise.reject({type:Hn});{const y=Hu(i);if(!p.isBackToMainSessionEnabled&&!y)return Promise.reject({type:rc,reason:"can not return main session during the breakout room"});Y_().forEach(C=>l(C))}return Promise.resolve("")}askForHelp(){const i=this[lr](),{breakoutRoom:{controlStatus:l,mainSessionAttendeeList:u,currentRoom:{status:p}},participants:{attendeesList:v}}=i,y=Hu(i);if(l!==hi.InProgress||p!==ur.InRoom)return Promise.reject({type:Hn,reason:"you are not in breakout room"});if(y)return Promise.reject({type:Hn,reason:"host or co-host can not ask for help"});{const C=u.find(w=>w.isHost);if(C){if(v.findIndex(w=>w.zoomID===C.zoomID)>-1)return Promise.reject({type:Hn,reason:"host is in room"});yu.askForHelpBO(C.userId)}}return Ni(GE,C=>C.result===K.AskHostHelpResponse.Received)}postponeHelping(i){const l=this[lr](),u=this[Oc],{breakoutRoom:{mainSessionAttendeeList:p,currentRoom:{status:v}},participants:{attendeesList:y}}=l;let C=y;return v===ur.InRoom&&(C=p),C.findIndex(w=>w.userId===i)>-1?(yu.askForHelpResultBO(i,K.AskHostHelpResponse.Ignore),u(rb(K.AskHostHelpResponse.Ignore)),Promise.resolve("")):Promise.reject({type:kr,reason:"user id is not correct"})}broadcast(i){const{breakoutRoom:{isEnableBOBroadcast:l}}=this[lr]();return l?i?ld.beginEncrypt({text:i,type:ec.BO_BROADCAST}).then(u=>(yu.broadcastBO(u),Promise.resolve(""))):Promise.reject({type:kr,reason:"content empty"}):Promise.reject({type:Hn,reason:"Cannot broadcast message due to the feature is not enable"})}assignUserToRoom(i,l){const u=this[lr](),{breakoutRoom:{rooms:p}}=u,v=jD(u).find(y=>y.userId===i);return v&&p.findIndex(y=>y.boId===l)>-1?(yu.assignToBO(i,l),Ni(pm,y=>{const{controlStatus:C,roomList:w}=y,D=w.find(P=>P.boId===l);return C===hi.InProgress&&D&&D.attendeeGuidList.includes(v.userGUID)})):Promise.reject({type:kr,reason:""})}moveUserToRoom(i,l){const u=this[lr](),{breakoutRoom:{rooms:p,mainSessionAttendeeList:v},participants:{attendeesList:y}}=u,C=(sg(u)?v:y).find(w=>w.userId===i);if(!C)return Promise.reject({type:kr,reason:"user id not correct"});{const w=jl(p,C.userGUID);if(!w)return Promise.reject({type:Hn,reason:"user not in a room"});if(w.boId===l)return Promise.reject({type:Hn,reason:"user already in the target room"});{const D=p.find(P=>P.boId===l);if(!D)return Promise.reject({type:kr,reason:"invalid room id"});yu.switchBO(i,D.boId)}}return Ni(pm,w=>{const{controlStatus:D,roomList:P}=w,L=P.find(W=>W.boId===l);return D===hi.InProgress&&L&&L.attendeeGuidList.includes(C.userGUID)})}closeRoom(){const i=this[lr](),{breakoutRoom:{controlStatus:l}}=i;return l!==hi.InProgress?Promise.reject({type:Hn,reason:"room is not started"}):(yu.stopBO(hi.Closing),Ni(pm,u=>u.controlStatus===hi.Closing))}loadPreAssignedRooms(){const i=this[lr](),{meeting:{meetingOptions:l},breakoutRoom:{controlStatus:u}}=i;return!l.isAllowBreakoutRoomPreAssign||u!==hi.NotStarted&&u!==hi.Closed?Promise.reject({type:Hn}):(yu.preAssignBreakoutRoom(),Ni(Xp))}getUnassignedAttendeeList(){const i=this[lr](),{meeting:{isHost:l}}=i;return l?jD(i):[]}getRoomList(){const i=this[lr](),{breakoutRoom:{rooms:l,currentRoom:{status:u,boId:p},mainSessionAttendeeList:v},participants:{attendeesList:y}}=i,C=ii(i);if(C&&(C.isHost||u===ur.InRoom&&C.bCoHost)){const w=u===ur.InRoom,D=w?v:y;return l.map(P=>{const{attendeeGuidList:L,boId:W,name:re}=P,ee=(L||[]).map(te=>D.find(oe=>oe.userGUID===te)).filter(te=>!!te&&te.userGUID!==C.userGUID);return w&&C.isHost&&W===p&&ee.unshift(C),{roomId:W,name:re,attendeeList:ee.filter(te=>!!te).map(te=>({userId:te.userId,displayName:te.displayName,avatar:te.avatar,isInRoom:te.bid===W,userGuid:te.userGUID}))}})}return i.breakoutRoom.rooms.map(w=>{const{boId:D,name:P}=w;return{roomId:D,name:P,attendeeList:[]}})}getAttendeeStatus(){return this[lr]().breakoutRoom.currentRoom.status}getRoomStatus(){return this[lr]().breakoutRoom.controlStatus}getCurrentRoom(){const i=this[lr](),{breakoutRoom:{currentRoom:{status:l,name:u,boId:p}}}=i;return{attendeeStatus:l,name:u,roomId:p}}getRoomOptions(){const i=this[lr](),{breakoutRoom:{options:l}}=i;return cn({},l)}}).prototype,"createRooms",[Yn,Dc],Object.getOwnPropertyDescriptor(Hi.prototype,"createRooms"),Hi.prototype),jn(Hi.prototype,"openRooms",[Yn,Dc],Object.getOwnPropertyDescriptor(Hi.prototype,"openRooms"),Hi.prototype),jn(Hi.prototype,"joinRoom",[Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"joinRoom"),Hi.prototype),jn(Hi.prototype,"leaveRoom",[Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"leaveRoom"),Hi.prototype),jn(Hi.prototype,"askForHelp",[Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"askForHelp"),Hi.prototype),jn(Hi.prototype,"postponeHelping",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"postponeHelping"),Hi.prototype),jn(Hi.prototype,"broadcast",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"broadcast"),Hi.prototype),jn(Hi.prototype,"assignUserToRoom",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"assignUserToRoom"),Hi.prototype),jn(Hi.prototype,"moveUserToRoom",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"moveUserToRoom"),Hi.prototype),jn(Hi.prototype,"closeRoom",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"closeRoom"),Hi.prototype),jn(Hi.prototype,"loadPreAssignedRooms",[Dc,Yn],Object.getOwnPropertyDescriptor(Hi.prototype,"loadPreAssignedRooms"),Hi.prototype),Hi);const O0=Ms(pV,VD);let Ep,Yc,Fd,J_;K.LiveTranscriptionMessageSource=void 0,function(i){i[i.Ready=0]="Ready",i[i.UserSub=1]="UserSub",i[i.ManualCaptionerEnabled=2]="ManualCaptionerEnabled",i[i.ManualCaptionerDisabled=3]="ManualCaptionerDisabled"}(Ep||(Ep={})),function(i){i[i.Unspecified=-1]="Unspecified",i[i.English=0]="English",i[i["Chinese (Simplified)"]=1]="Chinese (Simplified)",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput",i[i.Customized=500]="Customized"}(Yc||(Yc={})),function(i){i[i.Unknown=0]="Unknown",i[i.Close=1]="Close",i[i.New=2]="New",i[i.Insert=3]="Insert",i[i.Delete=4]="Delete",i[i.Reset=5]="Reset",i[i.Audiodesc=6]="Audiodesc",i[i.Speaker=7]="Speaker",i[i.Error=8]="Error"}(Fd||(Fd={})),function(i){i[i.TranslateNotSupport=1]="TranslateNotSupport"}(J_||(J_={})),function(i){i[i.Unspecified=0]="Unspecified",i[i.InMeetingManual=1]="InMeetingManual",i[i.ExternalCaptioner=2]="ExternalCaptioner",i[i.ASR=4]="ASR"}(K.LiveTranscriptionMessageSource||(K.LiveTranscriptionMessageSource={}));const D0={en:0,zh:1,ja:2,de:3,fr:4,ru:5,pt:6,es:7,ko:8,it:9,en1:10,vi:11,nl:12,uk:13,ar:14,bn:15,"zh-hant":16,cs:17,et:18,fi:19,el:20,he:21,hi:22,hu:23,id:24,ms:25,fa:26,pl:27,ro:28,sv:29,ta:30,te:31,tl:32,tr:33},ds=Object.keys(Yc).filter(i=>/\d+/.test(Yc[i])).reduce((i,l)=>cn(cn({},i),{},{[`${Yc[l]}`]:l}),{}),Ii=Object.keys(D0).reduce((i,l)=>(Object.assign(i,{[`${D0[`${l}`]}`]:l}),i),{}),by="zoom-sdk-live-trasncription",Bh="live-trasncription";let bp;function wi(i){const l=i===Yc.Unspecified?Yc.Reserved:i;ji.getInstance().selectLanguageChannelForNewLTT(l)}K.LiveTranscriptionLanguageCode=void 0,K.LiveTranscriptionLanguage=void 0,function(i){i[i.Unknown=0]="Unknown",i[i.ZoomKits=1]="ZoomKits",i[i.AISense=2]="AISense"}(bp||(bp={})),function(i){i[i.English=0]="English",i[i.Chinese=1]="Chinese",i[i.Japanese=2]="Japanese",i[i.German=3]="German",i[i.French=4]="French",i[i.Russian=5]="Russian",i[i.Portuguese=6]="Portuguese",i[i.Spanish=7]="Spanish",i[i.Korean=8]="Korean",i[i.Italian=9]="Italian",i[i.Reserved=10]="Reserved",i[i.Vietnamese=11]="Vietnamese",i[i.Dutch=12]="Dutch",i[i.Ukrainian=13]="Ukrainian",i[i.Arabic=14]="Arabic",i[i.Bengali=15]="Bengali",i[i["Chinese (Traditional)"]=16]="Chinese (Traditional)",i[i.Czech=17]="Czech",i[i.Estonian=18]="Estonian",i[i.Finnish=19]="Finnish",i[i.Greek=20]="Greek",i[i.Hebrew=21]="Hebrew",i[i.Hindi=22]="Hindi",i[i.Hungarian=23]="Hungarian",i[i.Indonesian=24]="Indonesian",i[i.Malay=25]="Malay",i[i.Persian=26]="Persian",i[i.Polish=27]="Polish",i[i.Romanian=28]="Romanian",i[i.Swedish=29]="Swedish",i[i.Tamil=30]="Tamil",i[i.Telugu=31]="Telugu",i[i.Tagalog=32]="Tagalog",i[i.Turkish=33]="Turkish",i[i.NoTranslation=400]="NoTranslation",i[i.DefaultManualInput=401]="DefaultManualInput"}(K.LiveTranscriptionLanguageCode||(K.LiveTranscriptionLanguageCode={})),function(i){i.English="en",i["Chinese (Simplified)"]="zh",i.Japanese="ja",i.German="de",i.French="fr",i.Russian="ru",i.Portuguese="pt",i.Spanish="es",i.Korean="ko",i.Italian="it",i.Reserved="en1",i.Vietnamese="vi",i.Dutch="nl",i.Ukrainian="uk",i.Arabic="ar",i.Bengali="bn",i["Chinese (Traditional)"]="zh-hant",i.Czech="cs",i.Estonian="et",i.Finnish="fi",i.Greek="el",i.Hebrew="he",i.Hindi="hi",i.Hungarian="hu",i.Indonesian="id",i.Malay="ms",i.Persian="fa",i.Polish="pl",i.Romanian="ro",i.Swedish="sv",i.Tamil="ta",i.Telugu="te",i.Tagalog="tl",i.Turkish="tr"}(K.LiveTranscriptionLanguage||(K.LiveTranscriptionLanguage={}));const _F=qE(zv,function(i,l){return ZA(i,l)})([Zi,i=>{let{meeting:{gatewayUserList:l}}=i;return l}],(i,l)=>{const u={};return i.forEach(p=>{Object.assign(u,{[`${p.userId}`]:p.zoomID})}),l?.forEach(p=>{Object.assign(u,{[`${p.userId}`]:p.sn})}),u}),QD=Ys([Zi],i=>i.find(l=>!0===l.bCCEditor)),vF=Ys([Zi,hC],(i,l)=>i.some(u=>!0===u.bCCEditor&&u.userId===l)),HD=Wo.createAgent();var Hw=Object.freeze({__proto__:null,handleLiveTranscriptionMeetingOptionEpic:i=>i.pipe(fi(`${Cv}`),_t(l=>{const{payload:{liveTranscription:u}}=l;return jC(u)})),handleLiveTranscriptionEnableEpic:(i,l)=>ar(i,tc).pipe(kn(u=>{var p,v;return void 0!==(null===(p=u.payload.body)||void 0===p?void 0:p.NewLttAvaliable)||void 0!==(null===(v=u.payload.body)||void 0===v?void 0:v.LiveTransEngineType)}),_t(u=>{const{payload:{body:{NewLttAvaliable:p,LiveTransEngineType:v}}}=u,{liveTranscription:{isEnableAutomatedCaptions:y}}=l.value;return void 0!==p?(vt(fT,!!p),yR(y&&!!p)):SR(v)})),handleLiveTranscriptionStatusEpic:(i,l)=>ar(i,7982).pipe($n(u=>{const{payload:{body:{status:p,gwId:v}}}=u,y=[];switch(p){case Ep.Ready:y.push(lA(v));break;case Ep.ManualCaptionerEnabled:vt(yl,{autoCaption:!1}),y.push(ER(!0));break;case Ep.ManualCaptionerDisabled:vt(yl,{autoCaption:!0}),y.push(sR({editorId:"",isEditor:!1,editorZoomId:""})),y.push(ER(!1));break;case Ep.UserSub:{vt(yl,{autoCaption:l.value.liveTranscription.isLiveTranscriptionEnabled});const{liveTranscription:{stateBeforeFailover:w}}=l.value;if(null!=w&&w.isLiveTranscriptionSubscribed){var C;HD.enableNewLLT();const D=null!==(C=w.currentTranscriptionLang)&&void 0!==C?C:Yc.Unspecified;wi(D),y.push(At(D)),void 0!==w.currentTranslationLang&&HD.setTranslationLanguage(w.currentTranslationLang),y.push(r_())}break}}return Mn(y)})),handleLiveTranscriptionSupportedLanguageEpic:i=>ar(i,7984).pipe(_t(l=>{const{payload:{body:{langs:u}}}=l;return SP(u)})),handleLiveTranscriptionSubStatusEpic:i=>ar(i,7985).pipe(kn(l=>{var u;return!0===(null===(u=l.payload.body)||void 0===u?void 0:u.success)}),$n(l=>{const{payload:{body:{src:u,lang:p,success:v}}}=l,y=[];return v&&y.push(QC(!0)),u===K.LiveTranscriptionMessageSource.ASR?(y.push(dA(p===Yc.NoTranslation?void 0:p)),vt(yl,{autoCaption:!0,lang:p})):[K.LiveTranscriptionMessageSource.InMeetingManual,K.LiveTranscriptionMessageSource.ExternalCaptioner].includes(u)&&vt(yl,{autoCaption:!1}),Mn(y)})),handleLiveTranscriptionSpeakingLanguageChangeEpic:(i,l)=>ar(i,7986).pipe(Un(l),$n(u=>{let[p,v]=u;const y=ii(v),{liveTranscription:{currentTranscriptionLang:C}}=v,{payload:{body:w}}=p,D=[];if(void 0!==w?.lang){const{lang:P}=w;"computer"===y?.audio&&C!==P&&wi(P),D.push(At(P))}return Mn(D)})),handleComputerAudioCompleteChangeLTLanguageEpic:(i,l)=>bi(i,Jn.JoinComputerAudioComplete).pipe(kn(()=>l.value.liveTranscription.isLiveTranscriptionSubscribed),sr(()=>{const{liveTranscription:{currentTranscriptionLang:u}}=l.value;u&&wi(u)}),Qr(qt)),handleLiveTranscriptionTextEpic:(i,l)=>ar(i,7983).pipe(kn(u=>void 0!==u.payload.body),$n(u=>{const{payload:{body:{msgType:p,errorCode:v,language:y,source:C,content:w,keyNodeId:D,msgId:P,nodeId:L,pos:W,size:re,audioLanguage:ee}}}=u;if(p===Fd.Error){if(v===J_.TranslateNotSupport){const{liveTranscription:{currentTranslationLang:te}}=l.value;te&&vt(SE,{error:J_.TranslateNotSupport,errorMessage:`${ds[ee]} to ${ds[te]} translation is not supported!`,audioLanguage:ee,translationLang:te})}}else{const te=l.value,oe=Zi(te),{liveTranscription:{isManualCaptionerEnabled:Ee}}=te;if(Ee&&C===K.LiveTranscriptionMessageSource.ASR)return Promise.resolve();if(function(Te,De){const{liveTranscription:{isEnableTranslatedCaptions:Le,isLiveTranscriptionEnabled:et},meeting:{meetingOptions:lt}}=De,{isEnableManualCaptions:pt,isEnableAllowHostAssignTypeCC:ht,isEnableClosedCaption:gt,isEnableAllowThirdPartyCCToken:Yt}=lt;return Te===K.LiveTranscriptionMessageSource.ASR?Le||et:Te===K.LiveTranscriptionMessageSource.InMeetingManual?pt&&ht||void 0===pt&&gt:Te===K.LiveTranscriptionMessageSource.ExternalCaptioner?Yt:void 0}(C,te)&&w&&D){const Te=_F(te)[D];if(Te)return ld.beginDecrypt({decryptedText:w,type:ec.CC_MESSAGE,zoomId:Te}).then(De=>{let{message:Le}=De;const{liveTranscription:{messageRecords:et}}=l.value,lt=[],pt=et.find(ht=>ht.msgId===P);if(pt){const{text:ht}=pt,gt=((Xt,un)=>{if(!Xt||0===un)return"";let Tt=0;for(let yn=0;yn<Xt.length;yn++)if(Tt+=Al(Xt[yn]),Tt===un)return Xt.slice(0,yn+1);return Xt})(ht,W);let Yt;p===Fd.Insert&&0===re||p===Fd.Delete&&0===re?Yt=cn(cn({},pt),{},{text:gt+Le,msgType:p}):p===Fd.Close&&(Yt=cn(cn({},pt),{},{text:Le,msgType:p,done:!0})),Yt&&(lt.push(bR(Yt)),vt(SE,Yt))}else if([Fd.New,Fd.Close].includes(p)||Ee&&p===Fd.Insert){const ht=oe.find(Yt=>Yt.userId===L),gt={msgId:P,userId:L,displayName:ht?.displayName,avatar:ht?.avatar,text:Le,source:C,language:y,timestamp:(new Date).getTime(),done:p===Fd.Close};lt.push(HC(cn(cn({},gt),{},{msgType:p}))),vt(SE,gt)}return lt})}}return Promise.resolve()}),$n(u=>Array.isArray(u)?Mn(u):qt)),handlePersistLargeRecordsEpic:(i,l)=>i.pipe(fi(`${HC}`),Gt(Ps),$n(()=>{const{liveTranscription:{messageRecords:u}}=l.value;return u.length>=1e5?function(p){const{meeting:{meetingId:v},liveTranscription:{messageRecords:y,reducedRecordsCount:C}}=p;return void 0!==window.indexedDB?new Promise(w=>{const D=window.indexedDB.open(by,1);D.addEventListener("upgradeneeded",()=>{const P=D.result;if(!P.objectStoreNames.contains(Bh)){const L=P.createObjectStore(Bh,{keyPath:["startIndex","mid"],autoIncrement:!1});L.createIndex("mid","mid",{unique:!1}),L.transaction.oncomplete=()=>{console.log(`Create objectStore [${Bh}] complete`)}}}),D.addEventListener("success",()=>{const P=D.result,L=y.length,W=.9*L,re=L-W,ee=y.slice(0,W),te=C+ee.length,oe=P.transaction([Bh],"readwrite");oe.objectStore(Bh).put({startIndex:C,mid:v,records:ee}),oe.oncomplete=()=>{w(GC({remains:re,reducedRecordsCount:te})),P.close()},oe.onerror=()=>{w(""),P.close()}})}):Promise.resolve("")}(l.value):Promise.resolve("")}),kn(u=>"object"==typeof u)),handleClearRecordsInDBEpic:(i,l)=>i.pipe(fi(`${dE}`,`${Yf}`),kn(()=>l.value.liveTranscription.isRecordsReduced),sr(()=>{!function(){if(void 0!==window.indexedDB){const u=window.indexedDB.open(by,1);u.addEventListener("success",()=>{const p=u.result;p.objectStoreNames.contains(Bh)&&(window.indexedDB.deleteDatabase(by),p.close())})}}()}),Qr(qt))});const GD=["transcriptionLang","translatedSetting"],k0={isEnableTranslatedCaptions:!1,isHostLockSpeakingLanguage:!1,transcriptionLang:[],isEnableAutomatedCaptions:!1,supportedTranscriptionLanguage:[],isLiveTranscriptionEnabled:!1,isManualCaptionerEnabled:!1,gatewayId:void 0,isLiveTranscriptionSubscribed:!1,messageRecords:[],isRecordsReduced:!1,reducedRecordsCount:0},WD=Fr({[`${yR}`]:It((i,l)=>{let{payload:u}=l;i.isLiveTranscriptionEnabled=u}),[`${jC}`]:It((i,l)=>{let{payload:u}=l;const{transcriptionLang:p,translatedSetting:v}=u,y=Dr(u,GD);p&&(i.transcriptionLang=p.split(";").map(C=>{const w=C&&D0[C];return void 0!==w?{lang:C,code:w}:null}).filter(Boolean)),v&&(i.translatedSetting=Object.keys(v).map(C=>{const w=v[C];if(w){const D=w.split(";").map(P=>{const L=P&&D0[P];return void 0!==L?{lang:P,code:L}:null}).filter(Boolean);return{lang:C,code:D0[C],translatedToLanguage:D}}return null}).filter(Boolean)),Object.assign(i,y)}),[`${ER}`]:It((i,l)=>{let{payload:u}=l;i.isManualCaptionerEnabled=u}),[`${lA}`]:It((i,l)=>{let{payload:u}=l;i.gatewayId=u}),[`${SP}`]:It((i,l)=>{let{payload:u}=l;i.supportedTranscriptionLanguage=u}),[`${At}`]:It((i,l)=>{let{payload:u}=l;i.currentTranscriptionLang=u}),[`${dA}`]:It((i,l)=>{let{payload:u}=l;i.currentTranslationLang=u}),[`${HC}`]:It((i,l)=>{let{payload:u}=l;i.messageRecords.push(u)}),[`${bR}`]:It((i,l)=>{let{payload:u}=l;const p=i.messageRecords.find(v=>v.msgId===u.msgId);p&&Object.assign(p,u)}),[`${GC}`]:It((i,l)=>{let{payload:u}=l;const{remains:p,reducedRecordsCount:v}=u,y=i.messageRecords.length-p;i.isRecordsReduced=!0,i.reducedRecordsCount=v,i.messageRecords.splice(0,y)}),[`${QC}`]:It((i,l)=>{let{payload:u}=l;i.isLiveTranscriptionSubscribed=u}),[`${SR}`]:It((i,l)=>{let{payload:u}=l;i.liveTransEngineType=u}),[`${r_}`]:It(i=>{i.stateBeforeFailover=void 0}),[`${i_}`]:It((i,l)=>{let{payload:u}=l;i.lastManualCaption=u}),[`${WC}`]:It((i,l)=>{let{payload:u}=l;return u?cn(cn({},k0),{},{stateBeforeFailover:{currentTranscriptionLang:i.currentTranscriptionLang,currentTranslationLang:i.currentTranslationLang,isLiveTranscriptionSubscribed:i.isLiveTranscriptionSubscribed},messageRecords:i.messageRecords,isRecordsReduced:i.isRecordsReduced,reducedRecordsCount:i.reducedRecordsCount}):cn({},k0)})},k0),Ql={userId:0,displayName:"everyone",zoomID:"",isHost:!1,bCoHost:!1},hs={userId:1,displayName:"All panelists",zoomID:"",isHost:!1,bCoHost:!1},qc=["text"];var qo;const Eu=Wo.createAgent();let yM=(jn((qo=class extends Gm{startLiveTranscription(){const{[lr]:i,[Oc]:l}=this,{liveTranscription:{isLiveTranscriptionEnabled:u,isEnableTranslatedCaptions:p,isLiveTranscriptionSubscribed:v,isHostLockSpeakingLanguage:y}}=i();return v?Promise.resolve(""):u?(Eu.enableNewLLT(),Ni(yl).then(()=>{y?Eu.setSpokenLanguage(Yc.English):wi(Yc.Unspecified),l(At(Yc.English)),p&&Eu.setTranslationLanguage()})):Promise.reject({type:Hn,reason:"Live transcription is not enabled."})}setSpeakingLanguage(i){const{[lr]:l,[Oc]:u}=this,{liveTranscription:{isLiveTranscriptionSubscribed:p,isHostLockSpeakingLanguage:v,transcriptionLang:y}}=l(),C=y.find(w=>w.lang===i);if(C){const{code:w}=C;return p?(v?Eu.setSpokenLanguage(w):wi(w),u(At(w)),Promise.resolve("")):Promise.reject({type:Hn,reason:"Cannot set speaking language before starting live transcription"})}return Promise.reject({type:kr,reason:"Unsupported transcription language"})}setTranslationLanguage(i){const{[lr]:l,[Oc]:u}=this,p=l(),{liveTranscription:{isEnableTranslatedCaptions:v,isLiveTranscriptionSubscribed:y,translatedSetting:C,currentTranscriptionLang:w}}=p;if(!v)return Promise.reject({type:Hn,reason:"Live translation is not enabled."});if(!y)return Promise.reject({type:Hn,reason:"Cannot set translation language before starting live transcription"});if(i){const D=C?.find(P=>P.code===w);if(D){const{translatedToLanguage:P}=D,L=P.find(W=>W.lang===i);if(L)return Eu.setTranslationLanguage(L.code),Ni({event:yl,operations:[kn(W=>!0===W.autoCaption&&W.lang===L.code),Ns(1)]},W=>{let{lang:re}=W;return re===L.code})}return Promise.reject({type:Hn,reason:`Cannot support translating ${ds[w||0]} to ${i}`})}return Eu.setTranslationLanguage(),u(dA(void 0)),Promise.resolve("")}enableManualCaptioner(){const{[lr]:i}=this,{meeting:{meetingOptions:l},liveTranscription:{isManualCaptionerEnabled:u}}=i(),{isEnableManualCaptions:p,isEnableClosedCaption:v}=l;return p??v?u?Promise.resolve():(Eu.enableManualCaption(!0),Ni(yl,y=>{let{autoCaption:C}=y;return!1===C})):Promise.reject({type:Hn,reason:"Manual caption is not enabled."})}disableManualCaptioner(){const{[lr]:i}=this,{liveTranscription:{isManualCaptionerEnabled:l}}=i();return l?(Eu.enableManualCaption(!1),Ni(yl,u=>{let{autoCaption:p}=u;return!0===p})):Promise.resolve()}assignManualCaption(i){var l;const{[lr]:u}=this,p=u(),{liveTranscription:{isManualCaptionerEnabled:v},participants:{attendeesList:y},meeting:{userId:C}}=p;return v?(null===(l=QD(p))||void 0===l?void 0:l.userId)===i?Promise.resolve(""):y.find(D=>D.userId===i)?(Eu.assignCC(i,!0),Ni({event:C===i?uh:hd,operations:[kn(D=>D.userId===i),Ns(1)]},D=>!0===D.bCCEditor)):Promise.reject({type:kr,reason:"Cannot find the user"}):Promise.reject({type:Hn,reason:"Cannot assign caption editor due to the manual captioner is not enabled."})}sendCaptionTextManually(i,l){var u;const{[lr]:p,[Oc]:v}=this,y=p(),{liveTranscription:{lastManualCaption:C},meeting:{userId:w}}=y,D=ii(y);let P=Promise.resolve();const L=null===(u=QD(y))||void 0===u?void 0:u.userId;return null!=D&&D.isHost&&L!==w&&(P=this.assignManualCaption(w)),P.then(()=>vF(p())?function(W,re,ee){const te=W.length,oe=[];var Ee;if(ee)oe.push({op:"close",text:W,msgId:null!==(Ee=re?.msgId)&&void 0!==Ee?Ee:eT()});else if(re&&null!=re&&re.text){const Te=re.text.length;let De=0,Le=0;for(;W[De]===re.text[De]&&De<te;)Le+=Al(W[De]),De+=1;De===Te&&De===te?oe.push({op:"same"}):De===Te&&De<te?oe.push({op:"insert",text:W.slice(De),size:0,pos:Le,msgId:re.msgId}):De<Te&&De===te?oe.push({op:"delete",size:0,pos:Le,msgId:re.msgId}):(oe.push({op:"delete",size:0,pos:Le,msgId:re.msgId}),oe.push({op:"insert",text:W.slice(De),pos:Le,msgId:re.msgId}))}else te>0&&oe.push({op:"start",text:W,pos:0,size:0,msgId:eT()});return oe.filter(Te=>"same"!==Te.op)}(i,C,l):Promise.reject({type:rc,reason:"Cannot type caption "})).then(W=>Array.isArray(W)?(W.forEach(re=>{const{text:ee}=re,te=Dr(re,qc);ld.beginEncrypt({text:ee??"",type:ec.CC_MESSAGE}).then(oe=>{Eu.sendManualCaption(cn({text:oe},te)),v(i_(l?void 0:{text:ee,msgId:re.msgId}))})}),Ni(SE,re=>re.source===K.LiveTranscriptionMessageSource.InMeetingManual)):"")}getLiveTranscriptionStatus(){const{[lr]:i}=this,{liveTranscription:{isLiveTranscriptionEnabled:l,isEnableTranslatedCaptions:u,isManualCaptionerEnabled:p,transcriptionLang:v,translatedSetting:y}}=i();return{isLiveTranscriptionEnabled:l,isLiveTranslationEnabled:u,isManualCaptionerEnabled:p,transcriptionLanguage:v.map(C=>C.lang).join(";"),translationLanguage:y?.map(C=>({speakingLanguage:C.lang,translatedToLanguage:C.translatedToLanguage.map(w=>w.lang).join(";")}))}}getLiveTranscriptionSetting(){const{[lr]:i}=this,{meeting:{meetingOptions:l}}=i(),{isEnableManualCaptions:u,isEnableLiveTranscription:p,isEnableClosedCaption:v,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:w}=l||{};return{isEnableManualCaptions:u,isEnableLiveTranscription:p,isEnableClosedCaption:v,isEnableAllowThirdPartyCCToken:y,isEnableViewFullTranscript:C,isEnableSaveCaptions:w}}getCurrentTranscriptionLanguage(){const{[lr]:i}=this,{liveTranscription:{currentTranscriptionLang:l}}=i();return void 0!==l?{code:Ii[l],name:ds[l]}:null}getCurrentTranslationLanguage(){const{[lr]:i}=this,{liveTranscription:{currentTranslationLang:l}}=i();return void 0!==l?{code:Ii[l],name:ds[l]}:null}getLatestTranscription(){const{[lr]:i}=this,{liveTranscription:{messageRecords:l,isManualCaptionerEnabled:u}}=i(),p=u?Yc.DefaultManualInput:Yc.NoTranslation,v=l.filter(y=>y.language===p);return v.length?v[v.length-1].text:""}getLatestTranslation(){const{[lr]:i}=this,{liveTranscription:{messageRecords:l,currentTranslationLang:u,isEnableTranslatedCaptions:p}}=i();if(p||void 0!==u){const v=l.filter(y=>y.language===u);return v.length?v[v.length-1].text:""}return""}getFullTranscriptionHistory(){const{[lr]:i}=this,l=i(),{liveTranscription:{messageRecords:u,isRecordsReduced:p}}=l;return p?(v=l,void 0!==window.indexedDB?new Promise(y=>{const C=window.indexedDB.open(by,1);C.addEventListener("success",()=>{const w=C.result;if(w.objectStoreNames.contains(Bh)){const D=w.transaction([Bh],"readonly").objectStore(Bh),P=[],L=v.meeting.meetingId,W=D.openCursor();W.onsuccess=()=>{const re=W.result;re?(re.value.mid===L&&P.push(...re.value.records),re.continue()):(y(P),w.close())}}else y("")})}):Promise.resolve("")).then(v=>Array.isArray(v)?v.concat(u):[...u]):[...u];var v}getManualCaptionEditor(){const{[lr]:i}=this,l=i(),{closedCaption:{editorId:u}}=l;let p;if(!u)return{};if(p=((L,W)=>{let re;if("string"==typeof W)re=L.participants.xmppAttendeeList.find(ee=>ee.jid===W);else{if(W===Yi.All)return Ql;if(W===Yi.Panelist)return hs;re=L.participants.attendeesList.find(ee=>ee.userId===W)||L.participants.xmppAttendeeList.find(ee=>ee.userId===W)}return re||{}})(l,u),!p)return{};const{userId:v,isHost:y,displayName:C,avatar:w,bCoHost:D,zoomID:P}=p;return{userId:v,isHost:y,displayName:C,avatar:w,bCoHost:D,zoomID:P}}getManualCaptionUrl(){const{[lr]:i}=this,{meeting:{meetingOptions:l,ccUrl:u}}=i(),{isEnableManualCaptions:p}=l||{};return p?u:(console.warn("you not enable manual caption"),"")}}).prototype,"startLiveTranscription",[Yn],Object.getOwnPropertyDescriptor(qo.prototype,"startLiveTranscription"),qo.prototype),jn(qo.prototype,"setSpeakingLanguage",[Yn],Object.getOwnPropertyDescriptor(qo.prototype,"setSpeakingLanguage"),qo.prototype),jn(qo.prototype,"setTranslationLanguage",[Yn],Object.getOwnPropertyDescriptor(qo.prototype,"setTranslationLanguage"),qo.prototype),jn(qo.prototype,"enableManualCaptioner",[Dc,Yn],Object.getOwnPropertyDescriptor(qo.prototype,"enableManualCaptioner"),qo.prototype),jn(qo.prototype,"disableManualCaptioner",[Dc,Yn],Object.getOwnPropertyDescriptor(qo.prototype,"disableManualCaptioner"),qo.prototype),jn(qo.prototype,"assignManualCaption",[Yn,Dc],Object.getOwnPropertyDescriptor(qo.prototype,"assignManualCaption"),qo.prototype),jn(qo.prototype,"sendCaptionTextManually",[Yn],Object.getOwnPropertyDescriptor(qo.prototype,"sendCaptionTextManually"),qo.prototype),jn(qo.prototype,"getManualCaptionUrl",[Yn,Dc],Object.getOwnPropertyDescriptor(qo.prototype,"getManualCaptionUrl"),qo.prototype),qo);const EM=Ms(Hw);var Sy;const ag={chat:{epic:eD,reducer:ZO,Client:XB},logger:{epic:QI,reducer:null,Client:class extends Gm{getLogs(i){return AO.getLogs(this[Us],i)}getStore(){return AO.doNotUseDirtyGetStore()}reportToGlobalTracing(i){return AO.reportToGlobalTracing(this[Us],i)}}},recording:{epic:sy,reducer:tD,Client:ZB},cmd:{epic:JN,reducer:eF,Client:oD},breakoutRoom:{epic:O0,reducer:v0,Client:Qw},liveTranscription:{epic:EM,reducer:WD,Client:yM}},AF=Wo.createAgent();let yF=(jn((Sy=class extends $B{constructor(i){super(i),this.mediaStream=void 0,this[jI]=ag}getMediaStream(){return void 0===this.mediaStream&&(this.mediaStream=new dV(this[Us])),this.mediaStream}joinInstant(i,l,u,p,v,y){const{[lr]:C,[Oc]:w}=this,{meeting:{lang:D,meetingStatus:P},socket:{zoomSocketStatus:L}}=C();return l?P!==Bi.Joined&&L===Co.Closed?(w(nT({topic:i,password:v||"",userName:u,zlk:l,lang:D,cv:p})),y&&w(j2(y)),Gv(Zh.JoinMeeting)):Promise.reject({type:Hn,reason:"duplicated operation"}):Promise.reject({type:Hn,reason:"invalid  signature"})}removeUser(i){const l=this[Us].getState(),{participants:{attendeesList:u}}=l;return u.find(v=>v.userId===i)?(AF.expel(i),Ni(pd,v=>v.some(y=>y.userId===i))):Promise.reject({type:kr,reason:"no matched user"})}}).prototype,"removeUser",[$s,Yn],Object.getOwnPropertyDescriptor(Sy.prototype,"removeUser"),Sy.prototype),Sy);class P0{constructor(l){this.instant=void 0,this.context=void 0,this.script=void 0,this.mic=void 0,this.instant=0,this.context=l,this.mic=null,this.script=l.createScriptProcessor(2048,1,1),this.script.onaudioprocess=u=>{const p=u.inputBuffer.getChannelData(0);let v,y=0;for(v=0;v<p.length;++v)y+=p[v]*p[v];this.instant=Math.sqrt(y/p.length)}}connectToSource(l){console.log("InputMicDetector is listening");try{var u;this.mic=this.context.createMediaStreamSource(l),this.mic.connect(this.script),null===(u=this.script)||void 0===u||u.connect(this.context.destination)}catch(p){console.error(p)}}stop(){var l,u;console.log("Audio Previewer stopped"),null===(l=this.mic)||void 0===l||l.disconnect(),this.mic=null,null===(u=this.script)||void 0===u||u.disconnect(),this.script=null}getMicVolume(){return this.instant}}const EF="https://st1.zoom.us/web_client/4qu8baa/audio/ring.mp3";class KD{constructor(){this.sampleAudio=void 0,this.audioCtx=void 0,this.destinationNode=void 0,this.audioPlayer=void 0,this.analyzserInterval=void 0,this.analyserNode=void 0,this.analyserNodeBufferDataArray=void 0,this.analyserCallback=void 0,this.sourceNode=void 0,this.mAudioStream=void 0,this.mSourceNode=void 0,this.mediaRecorder=void 0,this.isRecording=void 0,this.recorderChunks=[],this.recorderObjUrl=void 0,this.recorderPlayer=void 0,this.maximumRecordingTimer=void 0,this.shouldPlayAfterRecording=!0,this.isRunning=!1}testSpeaker(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||!AudioContext.prototype.decodeAudioData)return void console.warn("Cannot test the speaker due to the browser capability");const{speakerId:p,sampleAudioUrl:v=EF,onAnalyseFrequency:y}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext(),((null===(u=this.sampleAudio)||void 0===u?void 0:u.url)===v&&this.sampleAudio.data?Promise.resolve(this.sampleAudio.data):window.fetch(v).then(w=>w.arrayBuffer()).then(w=>this.audioCtx.decodeAudioData(w)).then(w=>(this.sampleAudio={url:v,data:w},w))).then(w=>{var D,P,L;this.sourceNode=this.audioCtx.createBufferSource(),this.sourceNode.buffer=w,this.sourceNode.loop=!0,p&&null!==(D=this.audioPlayer)&&void 0!==D&&D.setSinkId&&this.audioPlayer.setSinkId(p),y?"function"==typeof AudioContext.prototype.createAnalyser?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=y,this.initAnalyserNode(),this.analyserNode&&this.sourceNode.connect(this.analyserNode)):(this.sourceNode.connect(this.destinationNode),console.warn("Cannot analyze the stream due to the browser capability")):(this.analyserCallback=void 0,this.sourceNode.connect(this.destinationNode)),this.sourceNode.start(0),"running"!==(null===(P=this.audioCtx)||void 0===P?void 0:P.state)&&(null===(L=this.audioCtx)||void 0===L||L.resume()),this.audioPlayer&&(this.audioPlayer.muted=!1,this.audioPlayer.currentTime=0,this.audioPlayer.play())});const C=()=>{this.isRunning=!1,this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.sourceNode&&(this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode.buffer=null,this.sourceNode=void 0)};return{stop:C,destroy:()=>{var w;C(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(w=this.audioCtx)||void 0===w||w.close(),this.audioCtx=void 0}}}testMicrophone(l){var u;if("function"!=typeof AudioContext||"function"!=typeof MediaStreamAudioDestinationNode||"function"!=typeof AudioContext.prototype.createMediaStreamSource||"function"!=typeof(null===(u=navigator.mediaDevices)||void 0===u?void 0:u.getUserMedia))return void console.warn("Cannot test the microphone due to the browser capability");const{microphoneId:p,speakerId:v,recordAndPlay:y,maxRecordDuration:C,onAnalyseFrequency:w,onStartRecording:D,onStopRecording:P,onStartPlayRecording:L,onStopPlayRecording:W}=l||{};if(this.isRunning)return void console.warn("A tester is running,please stop it first");this.isRunning=!0,this.initAudioContext();const re=()=>{y&&this.mediaRecorder&&this.isRecording&&(this.shouldPlayAfterRecording=!0,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop())};window.navigator.mediaDevices.getUserMedia({audio:!p||{deviceId:p}}).then(te=>{var oe,Ee,Te,De;this.mAudioStream=te,this.mSourceNode=null===(oe=this.audioCtx)||void 0===oe?void 0:oe.createMediaStreamSource(te),this.audioPlayer.muted=!0,w?(this.analyzserInterval&&window.clearInterval(this.analyzserInterval),this.analyserCallback=w,this.initAnalyserNode(),this.analyserNode&&(null===(Te=this.mSourceNode)||void 0===Te||Te.connect(this.analyserNode))):this.analyserCallback=void 0,y&&("function"==typeof MediaRecorder?(this.recorderObjUrl&&window.URL.revokeObjectURL(this.recorderObjUrl),this.mediaRecorder=new MediaRecorder(this.mAudioStream),this.mediaRecorder.ondataavailable=Le=>{Le.data&&this.recorderChunks.push(Le.data)},this.mediaRecorder.onstop=()=>{if(this.isRecording=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),P?.(),this.recorderChunks.length>0){var Le;const et=new Blob(this.recorderChunks,{type:(null===(Le=this.recorderChunks[0])||void 0===Le?void 0:Le.type)||"audio/ogg; codecs=opus"});this.recorderObjUrl=window.URL.createObjectURL(et),this.shouldPlayAfterRecording&&this.playRecording(this.recorderObjUrl,v,L,W),this.recorderChunks=[],this.mediaRecorder&&(this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,this.mediaRecorder=void 0)}},this.mediaRecorder.start(),this.isRecording=!0,D?.(),this.maximumRecordingTimer=window.setTimeout(()=>{re()},C||1e4)):console.warn("Cannot record the sound due to the browser capability")),"running"!==(null===(Ee=this.audioCtx)||void 0===Ee?void 0:Ee.state)&&(null===(De=this.audioCtx)||void 0===De||De.resume()),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.play())});const ee=()=>{this.isRunning=!1,this.maximumRecordingTimer&&(window.clearTimeout(this.maximumRecordingTimer),this.maximumRecordingTimer=void 0),this.audioPlayer&&(this.audioPlayer.currentTime=0,this.audioPlayer.pause()),this.analyserNode&&this.analyzserInterval&&(window.clearInterval(this.analyzserInterval),this.analyzserInterval=void 0,this.analyserNodeBufferDataArray=void 0),this.mSourceNode&&(w&&this.analyserNode&&this.mSourceNode.disconnect(this.analyserNode),this.mSourceNode=void 0),this.mAudioStream&&(this.mAudioStream.getAudioTracks().forEach(te=>{te.stop()}),this.mAudioStream=void 0),this.mediaRecorder&&(this.shouldPlayAfterRecording=!1,this.mediaRecorder.ondataavailable=null,this.mediaRecorder.onstop=null,"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.isRecording=!1,this.mediaRecorder=void 0,this.recorderChunks=[]),this.recorderPlayer&&(this.recorderPlayer.currentTime=0,this.recorderPlayer.pause())};return{stop:ee,stopRecording:re,destroy:()=>{var te;ee(),this.analyserNode&&this.destinationNode&&(this.analyserNode.disconnect(this.destinationNode),this.analyserNode=void 0),null===(te=this.audioCtx)||void 0===te||te.close(),this.audioCtx=void 0}}}initAudioContext(){this.audioCtx&&this.audioPlayer||(this.audioCtx=new AudioContext,this.destinationNode=new MediaStreamAudioDestinationNode(this.audioCtx),this.audioPlayer=new Audio,this.audioPlayer.loop=!0,this.audioPlayer.srcObject=this.destinationNode.stream)}initAnalyserNode(){this.analyserNode||(this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.connect(this.destinationNode),this.analyserNode.fftSize=1024),this.analyserNodeBufferDataArray=new Uint8Array(this.analyserNode.frequencyBinCount),this.analyzserInterval=window.setInterval(this.audioAnalyserCallback.bind(this),20)}audioAnalyserCallback(){if(this.analyserNodeBufferDataArray&&this.analyserNode&&this.analyserCallback){this.analyserNode.getByteFrequencyData(this.analyserNodeBufferDataArray);let l=0;for(const p of this.analyserNodeBufferDataArray)l+=p;this.analyserCallback(l/this.analyserNodeBufferDataArray.length)}}playRecording(l,u,p,v){this.recorderPlayer=new Audio,this.recorderPlayer.src=l,this.recorderPlayer.currentTime=0,this.recorderPlayer.setSinkId&&u&&this.recorderPlayer.setSinkId(u);const y=()=>{v?.(),this.recorderPlayer&&(this.recorderPlayer.onpause=null,this.recorderPlayer.onended=null,this.recorderPlayer=void 0,this.isRunning=!1)};this.recorderPlayer.onpause=()=>{y()},this.recorderPlayer.onended=()=>{y()},p?.(),this.recorderPlayer.play().finally(()=>{window.URL.revokeObjectURL(l)})}}const zD="AudioNotStartedError";class fV{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.audioContext=void 0,this.inputMicDetector=void 0,this.isMicUnmuted=void 0,this.isAudioStarted=void 0,this.audioStream=void 0,this.deviceId=void 0,this.tester=void 0,this.audioContext=null,this.inputMicDetector=null,this.isMicUnmuted=!1,this.isAudioStarted=!1,this.audioStream=null,this.deviceId=l,this.tester=new KD}start(){var l=this;return F(function*(){if(l.audioStream||l.isAudioStarted)throw new Error("AudioAlreadyStartedError");try{const u=yield navigator.mediaDevices.getUserMedia(l.getAudioConstraints());l.audioStream=u,l.isAudioStarted=!0}catch(u){throw u}})()}unmute(){var l=this;return F(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(zD);if(l.isMicUnmuted)throw new Error("AudioAlreadyUnmutedError");return l.toggleMicIsMuted(!0)})()}mute(){var l=this;return F(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(zD);if(!l.isMicUnmuted)throw new Error("AudioAlreadyMutedError");return l.toggleMicIsMuted(!1)})()}getCurrentVolume(){return this.inputMicDetector?this.inputMicDetector.getMicVolume():0}stop(){var l=this;return F(function*(){if(!l.audioStream||!l.isAudioStarted)throw new Error(zD);l.audioStream.getAudioTracks().forEach(u=>u.stop()),l.audioStream=null,l.isAudioStarted=!1})()}toggleMicIsMuted(l){var u=this;return F(function*(){if(l){if(!u.audioContext){const p=window.AudioContext||window.webkitAudioContext;u.audioContext=new p}u.inputMicDetector=new P0(u.audioContext),u.inputMicDetector.connectToSource(u.audioStream)}else u.inputMicDetector&&u.inputMicDetector.stop(),u.inputMicDetector=null;u.isMicUnmuted=l})()}getAudioConstraints(){return{audio:""===this.deviceId||{deviceId:this.deviceId},video:!1}}testSpeaker(l){return this.tester.testSpeaker(l)}testMicrophone(l){return this.tester.testMicrophone(l)}}const YD={width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080},aspectRatio:{ideal:1.777777778}};class bF{constructor(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isVideoStarted=void 0,this.videoStream=void 0,this.deviceId=void 0,this.isVideoStarted=!1,this.videoStream=null,this.deviceId=l}start(l){var u=this;return F(function*(){if(!l)throw new Error("Video DOM element is falsy");if(u.isVideoStarted||u.videoStream)throw new Error("VideoAlreadyStartedError");const p=function(){var v=F(function*(y){if(!y||"OverconstrainedError"!==y.name&&"ConstraintNotSatisfiedError"!==y.name)throw y;console.log(`Warning: detected ${y.name} -- trying to fall back to lower aspect ratio`);try{const C=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints(!0));return u.tryPlayVideo(l,C)}catch(C){throw C}});return function(C){return v.apply(this,arguments)}}();try{const v=yield navigator.mediaDevices.getUserMedia(u.getVideoConstraints());return u.tryPlayVideo(l,v)}catch(v){return p(v)}})()}stop(){var l=this;return F(function*(){if(!l.videoStream||!l.isVideoStarted)throw new Error("VideoNotStartedError");l.videoStream.getVideoTracks().forEach(u=>u.stop()),l.videoStream=null,l.isVideoStarted=!1})()}getVideoConstraints(){let l=YD;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?l=""===this.deviceId||{deviceId:this.deviceId}:""!==this.deviceId&&(l.deviceId=this.deviceId),{audio:!1,video:l}}tryPlayVideo(l,u){var p=this;return F(function*(){if(!l)throw new Error("Video DOM element is falsy");try{p.videoStream=u,l.srcObject=p.videoStream,yield l.play(),p.isVideoStarted=!0}catch(v){throw v}})()}}class Fh{static createClient(){if(!this.meetingClient){const l=function(){const u=function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=new en.constructor(en.SchedulerAction),P=new je,L=void 0,W=function(re){L=re;var ee=(new je).pipe(Gt(D)),te=(new je).pipe(Gt(D)),oe=new eE(ee),Ee=new Rg(te,L.getState());return P.pipe(_t(function(Te){var De="dependencies"in w?Te(oe,Ee,w.dependencies):Te(oe,Ee);if(!De)throw new TypeError('Your root Epic "'+(Te.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return De}),$n(function(Te){return Mn(Te).pipe(eh(D),Gt(D))})).subscribe(L.dispatch),function(Te){return function(De){var Le=Te(De);return te.next(L.getState()),ee.next(De),Le}}};return W.run=function(re){P.next(re)},W}(),{epicSubject:p,rootEpic:v}=function(){const w=new Pe(xu(cf,HP,dI,$O));return{epicSubject:w,rootEpic:(D,P,L)=>w.pipe($n(W=>W(D,P,L)))}}(),y=[u],C=b2(KN(),sw(function(){for(var w=arguments.length,D=new Array(w),P=0;P<w;P++)D[P]=arguments[P];return function(L){return function(){var W=L.apply(void 0,arguments),re=function(){throw new Error(Da(15))},ee={getState:W.getState,dispatch:function(){return re.apply(void 0,arguments)}},te=D.map(function(oe){return oe(ee)});return re=Jy.apply(void 0,te)(W.dispatch),vn(vn({},W),{},{dispatch:re})}}}(...y)));return C.asyncReducers={},C.injectReducer=(w,D)=>{void 0===C.asyncReducers[w]&&(C.asyncReducers[w]=D,C.replaceReducer(KN(C.asyncReducers)))},C.injectEpic=w=>{p.next(w)},u.run(v),C}();this.meetingClient=new yF(l)}return this.meetingClient}static destroyClient(){this.meetingClient&&(this.meetingClient.leave().then(()=>{yc(500).subscribe(()=>{KE()})}),this.meetingClient=null)}static checkSystemRequirements(){var l;return{audio:$h()&&Lg(),video:$h()&&void 0!==navigator.mediaDevices,screen:$h()&&"function"==typeof(null===(l=navigator.mediaDevices)||void 0===l?void 0:l.getDisplayMedia)}}static getDevices(l){return l?navigator.mediaDevices.enumerateDevices():navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(u=>(u.getTracks().forEach(p=>p.stop()),navigator.mediaDevices.enumerateDevices()))}static createLocalAudioTrack(){return new fV(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static createLocalVideoTrack(){return new bF(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}static preloadDependentAssets(l){var u;(u=F(function*(p){var v;const y=p||pA,C=`${y}/${YL}`,w=[],D=[],P=`${y}/`;if(DR()){const{workers:re,wasms:ee}=lp("audio","simd",P);w.push(...re),D.push(...ee)}else{const{workers:re,wasms:ee}=lp("audio","",P);w.push(...re),D.push(...ee)}if(DR()&&cb()){const{workers:re,wasms:ee}=lp(["video","sharing"],"simd,thread",P);w.push(...re),D.push(...ee)}else if(cb()){const{workers:re,wasms:ee}=lp(["video","sharing"],"thread",P);w.push(...re),D.push(...ee)}else if(DR()){const{workers:re,wasms:ee}=lp(["video","sharing"],"simd",P);w.push(...re),D.push(...ee)}else{const{workers:re,wasms:ee}=lp(["video","sharing"],"",P);w.push(...re),D.push(...ee)}const L=[Il(C,"script")];w.forEach(re=>{L.push(Il(re,"fetch"))});let W=!1;if(null!==(v=window.indexedDB)&&void 0!==v&&v.databases)try{const re=yield window.indexedDB.databases(),ee='"audio:2034;video:2034"'.split(";").map(te=>{const[oe,Ee]=te.split(":");return{[`${oe}`]:Number(Ee)}}).reduce((te,oe)=>cn(cn({},te),oe),{});ee&&(W=["AUDIO_FILE","VIDEO_FILE"].every(te=>{const oe="AUDIO_FILE"===te?ee.audio:ee.video;return-1!==re.findIndex(Ee=>Ee.name===te&&Ee.version===oe)}))}catch{}W||D.forEach(re=>{L.push(Il(re,"fetch"))});try{document.head.append(...L)}catch{}}),function(p){return u.apply(this,arguments)})(l)}}Fh.meetingClient=void 0,Fh.VERSION=up;var Cy,J,Iy,Hl,Rf,cg,cl,wy="1.6.0",N0="INVALID_PARAMETERS",SF="https://dmogdx0jrul3u.cloudfront.net/videosdk/".concat(wy,"/lib"),Gw="https://source.zoom.us/videosdk/".concat(wy,"/lib"),Gl="https://jssdk.zoomus.cn/videosdk/".concat(wy,"/lib"),Fn=Symbol("stream"),bM=function(){function i(l){k(this,i),this[Fn]=void 0,this[Fn]=l}return x(i,[{key:"startAudio",value:function(l){return this[Fn].startAudio(l)}},{key:"stopAudio",value:function(){return this[Fn].stopAudio()}},{key:"muteAudio",value:function(l){return this[Fn].muteAudio(l)}},{key:"unmuteAudio",value:function(l){return this[Fn].unmuteAudio(l)}},{key:"inviteByPhone",value:function(l,u,p,v){return this[Fn].dialOut(l,u,p,v)}},{key:"cancelInviteByPhone",value:function(l,u,p){return this[Fn].cancelDialOut(l,u,p)}},{key:"hangup",value:function(){return this[Fn].hangup()}},{key:"muteShareAudio",value:function(l){return this[Fn].muteShareAudio(l)}},{key:"unmuteShareAudio",value:function(l){return this[Fn].unmuteShareAudio(l)}},{key:"subscribeAudioStatisticData",value:function(l){return this[Fn].subscribeAudioStatisticData(l)}},{key:"unsubscribeAudioStatisticData",value:function(l){return this[Fn].unsubscribeAudioStatisticData(l)}},{key:"muteUserAudioLocally",value:function(l){return this[Fn].muteUserAudioLocally(l)}},{key:"unmuteUserAudioLocally",value:function(l){return this[Fn].unmuteUserAudioLocally(l)}},{key:"adjustUserAudioVolumeLocally",value:function(l,u){return this[Fn].adjustUserAudioVolumeLocally(l,u)}},{key:"isAudioMuted",value:function(l){return this[Fn].isAudioMuted(l)}},{key:"getMicList",value:function(){return this[Fn].getMicList()}},{key:"getSpeakerList",value:function(){return this[Fn].getSpeakerList()}},{key:"getActiveMicrophone",value:function(){return this[Fn].getActiveMicrophone()}},{key:"getActiveSpeaker",value:function(){return this[Fn].getActiveSpeaker()}},{key:"switchMicrophone",value:function(l){return this[Fn].switchMicrophone(l)}},{key:"switchSpeaker",value:function(l){return this[Fn].switchSpeaker(l)}},{key:"isSupportPhoneFeature",value:function(){return this[Fn].isSupportCallOut()}},{key:"getSupportCountryInfo",value:function(){return this[Fn].getDialOutCountries()}},{key:"getInviteByPhoneStatus",value:function(){return this[Fn].getDialOutStatus()}},{key:"getShareAudioStatus",value:function(){return this[Fn].getShareAudioStatus()}},{key:"isOthersShareAudioMutedLocally",value:function(l){return this[Fn].isOthersShareAudioMutedLocally(l)}},{key:"getAudioStatisticData",value:function(){return this[Fn].getAudioStatisticData()}},{key:"isUserAudioMutedLocally",value:function(l){return this[Fn].isUserAudioMutedLocally(l)}},{key:"getUserVolumeLocally",value:function(l){return this[Fn].getUserVolumeLocally(l)}},{key:"startVideo",value:function(l){return this[Fn].startVideo(l)}},{key:"stopVideo",value:function(){return this[Fn].stopVideo()}},{key:"renderVideo",value:function(l,u,p,v,y,C,w,D){return this[Fn].renderVideo(l,u,p,v,y,C,w,D)}},{key:"stopRenderVideo",value:function(l,u,p,v){return this[Fn].stopRenderVideo(l,u,p,v,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"updateVideoCanvasDimension",value:function(l,u,p){return this[Fn].updateVideoCanvasDimension(l,u,p)}},{key:"adjustRenderedVideoPosition",value:function(l,u,p,v,y,C,w){return this[Fn].adjustRenderedVideoPosition(l,u,p,v,y,C,w)}},{key:"clearVideoCanvas",value:function(l,u){return this[Fn].clearVideoCanvas(l,u)}},{key:"mirrorVideo",value:function(l){return this[Fn].mirrorVideo(l)}},{key:"enableHardwareAcceleration",value:function(l){return this[Fn].enableHardwareAcceleration(l)}},{key:"previewVirtualBackground",value:function(l,u,p){return this[Fn].previewVirtualBackground(l,u,p)}},{key:"updateVirtualBackgroundImage",value:function(l,u){return this[Fn].updateVirtualBackgroundImage(l,u)}},{key:"stopPreviewVirtualBackground",value:function(){return this[Fn].stopPreviewVirtualBackground()}},{key:"switchCamera",value:function(l){return this[Fn].switchCamera(l)}},{key:"subscribeVideoStatisticData",value:function(l){return this[Fn].subscribeVideoStatisticData(l)}},{key:"unsubscribeVideoStatisticData",value:function(l){return this[Fn].unsubscribeVideoStatisticData(l)}},{key:"isCapturingVideo",value:function(){return this[Fn].isCapturingVideo()}},{key:"isCameraTaken",value:function(){return this[Fn].isCameraTaken()}},{key:"getActiveVideoId",value:function(){return this[Fn].getActiveVideoId()}},{key:"getActiveCamera",value:function(){return this[Fn].getActiveCamera()}},{key:"getCameraList",value:function(){return this[Fn].getCameraList()}},{key:"isCaptureForbidden",value:function(){return this[Fn].isCaptureForbidden()}},{key:"getVideoMaxQuality",value:function(){return this[Fn].getVideoMaxQuality()}},{key:"getReceivedVideoDimension",value:function(){return this[Fn].getReceivedVideoDimension()}},{key:"isSupportMultipleVideos",value:function(){return this[Fn].isSupportMultipleVideos()}},{key:"isSupportHDVideo",value:function(){return this[Fn].isSupportHDVideo()}},{key:"isSupportVirtualBackground",value:function(){return this[Fn].isSupportVirtualBackground()}},{key:"getVirtualbackgroundStatus",value:function(){return this[Fn].getVirtualbackgroundStatus()}},{key:"getVideoStatisticData",value:function(){return this[Fn].getVideoStatisticData()}},{key:"isRenderSelfViewWithVideoElement",value:function(){return this[Fn].isRenderSelfViewWithVideoElement()}},{key:"startShareView",value:function(l,u){return this[Fn].startShareView(l,u)}},{key:"stopShareView",value:function(){return this[Fn].stopShareView()}},{key:"switchShareView",value:function(l){return this[Fn].switchShareView(l)}},{key:"startShareScreen",value:function(l,u){return void 0!==u?.broadcastToSubsession&&Object.assign(u||{},{broadcastToBreakoutRoom:u?.broadcastToSubsession}),this[Fn].startShareScreen(l,u)}},{key:"pauseShareScreen",value:function(){return this[Fn].pauseShareScreen()}},{key:"resumeShareScreen",value:function(){return this[Fn].resumeShareScreen()}},{key:"stopShareScreen",value:function(){return this[Fn].stopShareScreen()}},{key:"lockShare",value:function(l){return this[Fn].lockShare(l)}},{key:"updateSharingCanvasDimension",value:function(l,u){return this[Fn].updateSharingCanvasDimension(l,u)}},{key:"switchSharingSecondaryCamera",value:function(l){return this[Fn].switchSharingSecondaryCamera(l)}},{key:"setSharePrivilege",value:function(l){return this[Fn].setSharePrivilege(l)}},{key:"shareToSubsession",value:function(){return this[Fn].shareToBreakoutRoom()}},{key:"stopShareToSubsession",value:function(){return this[Fn].stopShareToBreakoutRoom()}},{key:"isShareLocked",value:function(){return this[Fn].isShareLocked()}},{key:"getSharePrivilege",value:function(){return this[Fn].getSharePrivilege()}},{key:"getActiveShareUserId",value:function(){return this[Fn].getActiveShareUserId()}},{key:"getShareStatus",value:function(){return this[Fn].getShareStatus()}},{key:"getShareUserList",value:function(){return this[Fn].getShareUserList()}},{key:"isStartShareScreenWithVideoElement",value:function(){return this[Fn].isStartShareScreenWithVideoElement()}},{key:"requestFarEndCameraControl",value:function(l){return this[Fn].requestFarEndCameraControl(l)}},{key:"approveFarEndCameraControl",value:function(l){return this[Fn].approveFarEndCameraControl(l)}},{key:"declineFarEndCameraControl",value:function(l){return this[Fn].declineFarEndCameraControl(l)}},{key:"giveUpFarEndCameraControl",value:function(l){return this[Fn].giveUpFarEndCameraControl(l)}},{key:"controlCamera",value:function(l){return this[Fn].controlCamera(l)}},{key:"controlFarEndCamera",value:function(l){return this[Fn].controlFarEndCamera(l)}},{key:"getFarEndCameraPTZCapability",value:function(l){return this[Fn].getFarEndCameraPTZCapability(l)}},{key:"getCameraPTZCapability",value:function(l){return this[Fn].getCameraPTZCapability(l)}},{key:"isBrowserSupportPTZ",value:function(){return this[Fn].isBrowserSupportPTZ()}},{key:"getNetworkQuality",value:function(l){return this[Fn].getNetworkQuality(l)}}]),i}(),CF=["isCoHost"],ug=Symbol("chat"),Ww=function(){function i(l){k(this,i),this[ug]=void 0,this[ug]=l}return x(i,[{key:"send",value:function(l,u){return this[ug].send(l,u)}},{key:"sendToAll",value:function(l){return this[ug].send(l,Yi.All)}},{key:"setPrivilege",value:function(l){return this[ug].setPrivilege(l)}},{key:"getPrivilege",value:function(){return this[ug].getPrivilege()}},{key:"getReceivers",value:function(){return this[ug].getReceivers().map(function(l){return G({isManager:l.isCoHost},$(l,CF))})}},{key:"getHistory",value:function(){return this[ug].getHistory()}}]),i}(),Sp=Symbol("recording"),IF=function(){function i(l){k(this,i),this[Sp]=void 0,this[Sp]=l}return x(i,[{key:"canStartRecording",value:function(){return this[Sp].isRecordingEnabled()}},{key:"startCloudRecording",value:function(){return this[Sp].startRecording()}},{key:"pauseCloudRecording",value:function(){return this[Sp].pauseRecording()}},{key:"resumeCloudRecording",value:function(){return this[Sp].startRecording()}},{key:"stopCloudRecording",value:function(){return this[Sp].stopRecording()}},{key:"getCloudRecordingStatus",value:function(){return this[Sp].getRecordingStatus()}},{key:"acceptIndividualRecording",value:function(){return this[Sp].accept()}},{key:"declineIndividualRecording",value:function(){return this[Sp].decline()}}]),i}(),qD=Symbol("command"),wF=function(){function i(l){k(this,i),this[qD]=void 0,this[qD]=l}return x(i,[{key:"send",value:function(l,u){return this[qD].send(l,u)}}]),i}(),TF=["isInRoom"],SM=["isAutoJoinRoom"],uc=Symbol("breakout-room"),CM=function(){function i(l){k(this,i),this[uc]=void 0,this[uc]=l}return x(i,[{key:"createSubsessions",value:function(l,u){return this[uc].createRooms(l,u).then(function(p){return p.map(function(v){return{subsessionId:v.roomId,subsessionName:v.name,userList:v.attendeeList}})})}},{key:"openSubsessions",value:function(l,u){var p=u?G(G({},u),{},{isAutoJoinRoom:u.isAutoJoinSubsession}):void 0,v=l.map(function(y){return{roomId:y.subsessionId,name:y.subsessionName,attendeeList:y.userList}});return this[uc].openRooms(v,p)}},{key:"joinSubsession",value:function(l){return this[uc].joinRoom(l)}},{key:"leaveSubsession",value:function(){return this[uc].leaveRoom()}},{key:"askForHelp",value:function(){return this[uc].askForHelp()}},{key:"postponeHelping",value:function(l){return this[uc].postponeHelping(l)}},{key:"broadcast",value:function(l){return this[uc].broadcast(l)}},{key:"assignUserToSubsession",value:function(l,u){return this[uc].assignUserToRoom(l,u)}},{key:"moveUserToSubsession",value:function(l,u){return this[uc].moveUserToRoom(l,u)}},{key:"closeAllSubsessions",value:function(){return this[uc].closeRoom()}},{key:"getUnassignedUserList",value:function(){return this[uc].getUnassignedAttendeeList()}},{key:"getSubsessionList",value:function(){return this[uc].getRoomList().map(function(l){return{subsessionId:l.roomId,subsessionName:l.name,userList:l.attendeeList.map(function(u){return G({isInSubsession:u.isInRoom},$(u,TF))})}})}},{key:"getUserStatus",value:function(){return this[uc].getAttendeeStatus()}},{key:"getSubsessionStatus",value:function(){return this[uc].getRoomStatus()}},{key:"getCurrentSubsession",value:function(){var l=this[uc].getCurrentRoom();return{userStatus:l.attendeeStatus,subsessionName:l.name,subsessionId:l.roomId}}},{key:"getSubsessionOptions",value:function(){var l=this[uc].getRoomOptions();return G({isAutoJoinSubsession:l.isAutoJoinRoom},$(l,SM))}}]),i}(),Uh=Symbol("liveTranscription"),Ia=function(){function i(l){k(this,i),this[Uh]=void 0,this[Uh]=l}return x(i,[{key:"startLiveTranscription",value:function(){return this[Uh].startLiveTranscription()}},{key:"setSpeakingLanguage",value:function(l){return this[Uh].setSpeakingLanguage(l)}},{key:"setTranslationLanguage",value:function(l){return this[Uh].setTranslationLanguage(l)}},{key:"getLiveTranscriptionStatus",value:function(){return this[Uh].getLiveTranscriptionStatus()}},{key:"getCurrentTranscriptionLanguage",value:function(){return this[Uh].getCurrentTranscriptionLanguage()}},{key:"getCurrentTranslationLanguage",value:function(){return this[Uh].getCurrentTranslationLanguage()}},{key:"getLatestTranscription",value:function(){return this[Uh].getLatestTranscription()}},{key:"getLatestTranslation",value:function(){return this[Uh].getLatestTranslation()}},{key:"getFullTranscriptionHistory",value:function(){return this[Uh].getFullTranscriptionHistory()}}]),i}(),Kw=Symbol("logger"),JD=function(){function i(l){k(this,i),this[Kw]=void 0,this[Kw]=l}return x(i,[{key:"getLogs",value:function(l){return this[Kw].getLogs(l)}},{key:"getStore",value:function(){return this[Kw].getStore()}},{key:"reportToGlobalTracing",value:function(l){return this[Kw].reportToGlobalTracing(l)}}]),i}(),$D=function(i){return"string"==typeof i&&i.length>0},XD=function(i){var l="";switch(i){case"Global":l=Gw;break;case"CN":l=Gl;break;case"CDN":l=SF;break;default:l=i}return l},mV=["roomName"],RF=[{event:"connection-change",originalEvent:"connection-change",payloadTransform:function(i){var l=i.roomName,u=$(i,mV);return l?G(G({},u),{},{subsessionName:l}):i}},{event:"subsession-invite-to-join",originalEvent:"invite-to-join",payloadTransform:function(i){return{subsessionId:i.roomId,subsessionName:i.name}}},{event:"subsession-countdown",originalEvent:"room-countdown"},{event:"subsession-time-up",originalEvent:"room-time-up"},{event:"closing-subsession-countdown",originalEvent:"closing-room-countdown"},{event:"subsession-broadcast-message",originalEvent:"broadcast-message"},{event:"subsession-ask-for-help",originalEvent:"ask-for-help",payloadTransform:function(i){return{userId:i.userId,displayName:i.displayName,subsessionId:i.roomId,subsessionName:i.roomName}}},{event:"subsession-ask-for-help-response",originalEvent:"ask-for-help-response"},{event:"subsession-state-change",originalEvent:"room-state-change"},{event:"host-ask-unmute-audio",originalEvent:"unmute-audio-consent"}],Eo=Symbol("Client"),ZD=new WeakMap,IM=function(){function i(){k(this,i),this[Eo]=void 0,this.stream=void 0,this.chat=void 0,this.command=void 0,this.recording=void 0,this.subsession=void 0,this.liveTranscription=void 0,this.logger=void 0,this[Eo]=Fh.createClient(),ZD.set(this,new Map)}return x(i,[{key:"init",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",p=arguments.length>2?arguments[2]:void 0,v=XD(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global");return!1===window.isSecureContext&&console.warn("The page is not in a secure context, to use audio, video, screen, a secure context must be enabled."),this[Eo].init("","",{language:l,dependentAssets:v,constraints:G(G({},Fh.checkSystemRequirements()),{},{screen:"object"===(typeof WebAssembly>"u"?"undefined":V(WebAssembly))&&"function"==typeof Worker}),additionalFeatures:["chat","cmd","recording","breakoutRoom","liveTranscription","logger"],webEndpoint:p?.webEndpoint||"zoom.us",skipJsMedia:p?.skipJsMedia,enforceMultipleVideos:p?.enforceMultipleVideos,stayAwake:p?.stayAwake})}},{key:"join",value:function(l,u,p,v,y){return $D(l)&&$D(u)&&$D(p)?l.length>200?Promise.reject({type:N0,reason:"The maximum length of topic is 200"}):p.length>200?Promise.reject({type:N0,reason:"The maximum length of username is 200"}):!v||$D(v)&&!void/^([!@#$%^&*?=]|\w|\d){1,10}$/gi.test(v)?this[Eo].joinInstant(l,u,p,wy,v,y):Promise.reject({type:N0,reason:"The password can only contain letters, numbers, and specific characters which in !@#$%^&*?=, and the maximum length is 10"}):Promise.reject({type:N0,reason:"Topic, token and userName must be string and required"})}},{key:"leave",value:function(){var l;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(null===(l=ZD.get(this))||void 0===l||l.clear(),this[Eo].end()):this[Eo].leave()}},{key:"getSessionInfo",value:function(){var l=this[Eo].getMeetingInfo();return{isInMeeting:l.isInMeeting||!1,password:l.password||"",topic:l.topic,userName:l.userName,userId:l.userId,sessionId:l.meetingId}}},{key:"on",value:function(l,u){var p=RF.find(function(P){return P.event===l});if(p){var v=p.originalEvent,y=p.payloadTransform;if(y){var C=function(P){var L=y(P);u(L)};this[Eo].on(v,C);var w=ZD.get(this);w&&(w.has(l)||w.set(l,[]),w.get(l)?.push({originalCb:u,newCb:C}))}else this[Eo].on(v,u)}else this[Eo].on(l,u)}},{key:"off",value:function(l,u){var p=RF.find(function(P){return P.event===l});if(p){var v=p.originalEvent;if(p.payloadTransform){var y=ZD.get(this);if(y){var C=y.get(l),w=C?.find(function(P){return P.originalCb===u});if(w&&C){this[Eo].off(v,w.newCb);var D=C?.filter(function(P){return P.originalCb!==u});y.set(l,D)}}}else this[Eo].off(v,u)}else this[Eo].off(l,u)}},{key:"getMediaStream",value:function(){return this.stream||(this.stream=new bM(this[Eo].getMediaStream())),this.stream}},{key:"getChatClient",value:function(){return this.chat||(this.chat=new Ww(this[Eo].getFeatureModule("chat"))),this.chat}},{key:"getRecordingClient",value:function(){return this.recording||(this.recording=new IF(this[Eo].getFeatureModule("recording"))),this.recording}},{key:"getCommandClient",value:function(){return this.command||(this.command=new wF(this[Eo].getFeatureModule("cmd"))),this.command}},{key:"getSubsessionClient",value:function(){return this.subsession||(this.subsession=new CM(this[Eo].getFeatureModule("breakoutRoom"))),this.subsession}},{key:"getLiveTranscriptionClient",value:function(){return this.liveTranscription||(this.liveTranscription=new Ia(this[Eo].getFeatureModule("liveTranscription"))),this.liveTranscription}},{key:"getLoggerClient",value:function(){return this.logger||(this.logger=new JD(this[Eo].getFeatureModule("logger"))),this.logger}},{key:"coverntUser",value:function(l){return{userId:l.userId,avatar:l.avatar||"",displayName:l.displayName,isHost:l.isHost,isManager:l.isCoHost||!1,audio:l.audio,muted:l.muted,bVideoOn:l.bVideoOn,sharerOn:l.sharerOn,sharerPause:l.sharePause,userGuid:l.userGuid,isAllowIndividualRecording:l.bAllowISORecord,isVideoConnect:l.bVideoConnect}}},{key:"getCurrentUserInfo",value:function(){var l=this[Eo].getCurrentUserInfo();if(l)return this.coverntUser(l)}},{key:"getUser",value:function(l){var u=this[Eo].getParticipantsList().find(function(p){return p.userId===l});if(u)return this.coverntUser(u)}},{key:"getAllUser",value:function(){var l=this;return this[Eo].getParticipantsList().map(function(u){return l.coverntUser(u)})}},{key:"changeName",value:function(l,u){return this[Eo].changeName(l,u)}},{key:"makeHost",value:function(l){return this[Eo].makeHost(l)}},{key:"removeUser",value:function(l){return this[Eo].removeUser(l)}},{key:"isHost",value:function(){return this[Eo].isHost()}},{key:"getSessionHost",value:function(){var l=this[Eo].getMeetingHost();return l?this.coverntUser(l):void 0}},{key:"makeManager",value:function(l){return this[Eo].makeCoHost(l)}},{key:"revokeManager",value:function(l){return this[Eo].revokeCoHost(l)}},{key:"isManager",value:function(){return this[Eo].isCoHost()}}]),i}(),wM=function(){function i(){k(this,i)}return x(i,null,[{key:"createClient",value:function(){return this.videoClient||(this.videoClient=new IM),this.videoClient}},{key:"destroyClient",value:function(){this.videoClient&&(this.videoClient.leave(),this.videoClient=null)}},{key:"checkSystemRequirements",value:function(){return Fh.checkSystemRequirements()}},{key:"getDevices",value:function(l){return Fh.getDevices(l)}},{key:"createLocalAudioTrack",value:function(){return Fh.createLocalAudioTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"createLocalVideoTrack",value:function(){return Fh.createLocalVideoTrack(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},{key:"preloadDependentAssets",value:function(){Fh.preloadDependentAssets(XD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global"))}}]),i}();wM.videoClient=void 0,wM.VERSION=wy,K.ChatPrivilege=void 0,(Cy=K.ChatPrivilege||(K.ChatPrivilege={}))[Cy.All=1]="All",Cy[Cy.NoOne=4]="NoOne",Cy[Cy.EveryonePublicly=5]="EveryonePublicly",K.ChatMsgType=void 0,(J=K.ChatMsgType||(K.ChatMsgType={}))[J.All=0]="All",K.SubsessionAllocationPattern=void 0,(Iy=K.SubsessionAllocationPattern||(K.SubsessionAllocationPattern={}))[Iy.Automatically=vm.Automatically]="Automatically",Iy[Iy.Manually=vm.Manually]="Manually",K.SubsessionUserStatus=void 0,(Hl=K.SubsessionUserStatus||(K.SubsessionUserStatus={}))[Hl.Initial=ur.Initial]="Initial",Hl[Hl.Invited=ur.Invited]="Invited",Hl[Hl.Joining=ur.Joining]="Joining",Hl[Hl.InSubsession=ur.InRoom]="InSubsession",Hl[Hl.Leaving=ur.Leaving]="Leaving",Hl[Hl.MainSession=ur.MainSession]="MainSession",K.SubsessionStatus=void 0,(Rf=K.SubsessionStatus||(K.SubsessionStatus={}))[Rf.NotStarted=hi.NotStarted]="NotStarted",Rf[Rf.InProgress=hi.InProgress]="InProgress",Rf[Rf.Closing=hi.Closing]="Closing",Rf[Rf.Closed=hi.Closed]="Closed",K.ReconnectReason=void 0,(cg=K.ReconnectReason||(K.ReconnectReason={}))[cg.Failover=Ws.Failover]="Failover",cg[cg.JoinSubsession=Ws.JoinBreakoutRoom]="JoinSubsession",cg[cg.MoveToSubsession=Ws.MoveToBreakoutRoom]="MoveToSubsession",cg[cg.BackToMainSession=Ws.BackToMainSession]="BackToMainSession",K.SharePrivilege=void 0,(cl=K.SharePrivilege||(K.SharePrivilege={}))[cl.Unlocked=Uu.HostGrab]="Unlocked",cl[cl.Locked=Uu.OnlyHost]="Locked",cl[cl.MultipleShare=Uu.MultipleShare]="MultipleShare",K.default=wM,Object.defineProperty(K,"__esModule",{value:!0})}(Me)},3890:function(Oe,Me,q){var F=q(7156).default;Oe.exports=function(){"use strict";var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie=function(n){return n&&n.Math==Math&&n},G=ie("object"==typeof globalThis&&globalThis)||ie("object"==typeof window&&window)||ie("object"==typeof self&&self)||ie("object"==typeof K&&K)||function(){return this}()||Function("return this")(),V={},k=function(n){try{return!!n()}catch{return!0}},O=!k(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),x=!k(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),$=Function.prototype.call,ae=x?$.bind($):function(){return $.apply($,arguments)},de={},he={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,Y=X&&!he.call({1:2},1);de.f=Y?function(n){var o=X(this,n);return!!o&&o.enumerable}:he;var z,ce,be=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}},ke=x,me=Function.prototype,Ce=me.call,_e=ke&&me.bind.bind(Ce,Ce),ue=ke?function(n){return n&&_e(n)}:function(n){return n&&function(){return Ce.apply(n,arguments)}},fe=ue,we=fe({}.toString),He=fe("".slice),Ue=function(n){return He(we(n),8,-1)},Ze=k,Xe=Ue,Be=G.Object,jt=ue("".split),Kt=Ze(function(){return!Be("z").propertyIsEnumerable(0)})?function(n){return"String"==Xe(n)?jt(n,""):Be(n)}:Be,St=G.TypeError,Ye=function(n){if(null==n)throw St("Can't call method on "+n);return n},je=Kt,ze=Ye,Pe=function(n){return je(ze(n))},rt=function(n){return"function"==typeof n},Ut=rt,$t=function(n){return"object"==typeof n?null!==n:Ut(n)},Mt=G,en=rt,Zn=function(n){return en(n)?n:void 0},qt=function(n,o){return arguments.length<2?Zn(Mt[n]):Mt[n]&&Mt[n][o]},Mr=ue({}.isPrototypeOf),xr=qt("navigator","userAgent")||"",Ir=xr,Cr=G.process,Ui=G.Deno,or=Cr&&Cr.versions||Ui&&Ui.version,Ki=or&&or.v8;Ki&&(ce=(z=Ki.split("."))[0]>0&&z[0]<4?1:+(z[0]+z[1])),!ce&&Ir&&(!(z=Ir.match(/Edge\/(\d+)/))||z[1]>=74)&&(z=Ir.match(/Chrome\/(\d+)/))&&(ce=+z[1]);var ya=ce,Ct=ya,on=!!Object.getOwnPropertySymbols&&!k(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&Ct&&Ct<41}),qe=on&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Fe=qt,ut=rt,Ln=Mr,no=G.Object,jo=qe?function(n){return"symbol"==typeof n}:function(n){var o=Fe("Symbol");return ut(o)&&Ln(o.prototype,no(n))},ta=G.String,Io=function(n){try{return ta(n)}catch{return"Object"}},Ps=rt,wo=Io,nd=G.TypeError,Vn=function(n){if(Ps(n))return n;throw nd(wo(n)+" is not a function")},fn=Vn,$e=function(n,o){var s=n[o];return null==s?void 0:fn(s)},ft=ae,_t=rt,sn=$t,_n=G.TypeError,gi={exports:{}},To=G,bs=Object.defineProperty,Gs=function(n,o){try{bs(To,n,{value:o,configurable:!0,writable:!0})}catch{To[n]=o}return o},ao="__core-js_shared__",Tr=G[ao]||Gs(ao,{}),Mn=Tr;(gi.exports=function(n,o){return Mn[n]||(Mn[n]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var ru=Ye,ku=G.Object,rd=function(n){return ku(ru(n))},$n=rd,N4=ue({}.hasOwnProperty),Ac=Object.hasOwn||function(n,o){return N4($n(n),o)},Q1=ue,H1=0,Yy=Math.random(),Cg=Q1(1..toString),vv=function(n){return"Symbol("+(void 0===n?"":n)+")_"+Cg(++H1+Yy,36)},qa=G,Np=Ac,hS=vv,Ig=on,y2=qe,Ss=(0,gi.exports)("wks"),wg=qa.Symbol,kn=wg&&wg.for,Tg=y2?wg:wg&&wg.withoutSetter||hS,Po=function(n){if(!Np(Ss,n)||!Ig&&"string"!=typeof Ss[n]){var o="Symbol."+n;Ss[n]=Ig&&Np(wg,n)?wg[n]:y2&&kn?kn(o):Tg(o)}return Ss[n]},fl=ae,id=$t,pS=jo,Qo=$e,fS=G.TypeError,cn=Po("toPrimitive"),$o=function(n,o){if(!id(n)||pS(n))return n;var s,c=Qo(n,cn);if(c){if(void 0===o&&(o="default"),s=fl(c,n,o),!id(s)||pS(s))return s;throw fS("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(n,o){var s,c;if("string"===o&&_t(s=n.toString)&&!sn(c=ft(s,n))||_t(s=n.valueOf)&&!sn(c=ft(s,n))||"string"!==o&&_t(s=n.toString)&&!sn(c=ft(s,n)))return c;throw _n("Can't convert object to primitive value")}(n,o)},Dr=jo,jn=function(n){var o=$o(n,"string");return Dr(o)?o:o+""},Gf=$t,E2=G.document,qy=Gf(E2)&&Gf(E2.createElement),vn=function(n){return qy?E2.createElement(n):{}},Da=vn,ci=!O&&!k(function(){return 7!=Object.defineProperty(Da("div"),"a",{get:function(){return 7}}).a}),mS=ae,M4=de,b2=be,Jy=Pe,xc=jn,x4=Ac,xL=ci,S2=Object.getOwnPropertyDescriptor;V.f=O?S2:function(n,o){if(n=Jy(n),o=xc(o),xL)try{return S2(n,o)}catch{}if(x4(n,o))return b2(!mS(M4.f,n,o),n[o])};var fo={},LL=O&&k(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),L4=$t,Ns=G.String,FL=G.TypeError,iu=function(n){if(L4(n))return n;throw FL(Ns(n)+" is not an object")},B4=ci,ro=iu,VL=jn,F4=G.TypeError,C2=Object.defineProperty,vr=Object.getOwnPropertyDescriptor;fo.f=O?LL?function(n,o,s){if(ro(n),o=VL(o),ro(s),"function"==typeof n&&"prototype"===o&&"value"in s&&"writable"in s&&!s.writable){var c=vr(n,o);c&&c.writable&&(n[o]=s.value,s={configurable:"configurable"in s?s.configurable:c.configurable,enumerable:"enumerable"in s?s.enumerable:c.enumerable,writable:!1})}return C2(n,o,s)}:C2:function(n,o,s){if(ro(n),o=VL(o),ro(s),B4)try{return C2(n,o,s)}catch{}if("get"in s||"set"in s)throw F4("Accessors not supported");return"value"in s&&(n[o]=s.value),n};var U4=fo,Yh=be,od=O?function(n,o,s){return U4.f(n,o,Yh(1,s))}:function(n,o,s){return n[o]=s,n},eh={exports:{}},I2=rt,io=Tr,W1=ue(Function.toString);I2(io.inspectSource)||(io.inspectSource=function(n){return W1(n)});var $y,Xy,Zr,th=io.inspectSource,sd=th,sr=G.WeakMap,V4=rt(sr)&&/native code/.test(sd(sr)),j4=vv,QL=(0,gi.exports)("keys"),K1=function(n){return QL[n]||(QL[n]=j4(n))},Un={},_S=ue,fi=$t,w2=od,eE=Ac,Av=K1,vS=Un,rn="Object already initialized",qh=G.TypeError;if(V4||Tr.state){var nh=Tr.state||(Tr.state=new(0,G.WeakMap)),AS=_S(nh.get),rh=_S(nh.has),Og=_S(nh.set);$y=function(n,o){if(rh(nh,n))throw new qh(rn);return o.facade=n,Og(nh,n,o),o},Xy=function(n){return AS(nh,n)||{}},Zr=function(n){return rh(nh,n)}}else{var Dg=Av("state");vS[Dg]=!0,$y=function(n,o){if(eE(n,Dg))throw new qh(rn);return o.facade=n,w2(n,Dg,o),o},Xy=function(n){return eE(n,Dg)?n[Dg]:{}},Zr=function(n){return eE(n,Dg)}}var Pu={set:$y,get:Xy,has:Zr,enforce:function(n){return Zr(n)?Xy(n):$y(n,{})},getterFor:function(n){return function(o){var s;if(!fi(o)||(s=Xy(o)).type!==n)throw qh("Incompatible receiver, "+n+" required");return s}}},ml=O,T2=Function.prototype,Cs=ml&&Object.getOwnPropertyDescriptor,Ja=Ac(T2,"name"),ad={EXISTS:Ja,PROPER:Ja&&"something"===function(){}.name,CONFIGURABLE:Ja&&(!ml||ml&&Cs(T2,"name").configurable)},uo=G,tE=rt,Y1=Ac,yS=od,R2=Gs,Mp=th,nE=ad.CONFIGURABLE,HL=Pu.get,ka=Pu.enforce,O2=String(String).split("String");(eh.exports=function(n,o,s,c){var h,g=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,A=!!c&&!!c.noTargetGet,_=c&&void 0!==c.name?c.name:o;tE(s)&&("Symbol("===String(_).slice(0,7)&&(_="["+String(_).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Y1(s,"name")||nE&&s.name!==_)&&yS(s,"name",_),(h=ka(s)).source||(h.source=O2.join("string"==typeof _?_:""))),n!==uo?(g?!A&&n[o]&&(f=!0):delete n[o],f?n[o]=s:yS(n,o,s)):f?n[o]=s:R2(o,s)})(Function.prototype,"toString",function(){return tE(this)&&HL(this).source||Mp(this)});var Wf={},rE=Math.ceil,Li=Math.floor,xp=function(n){var o=+n;return o!=o||0===o?0:(o>0?Li:rE)(o)},q1=xp,_r=Math.max,$a=Math.min,oo=function(n,o){var s=q1(n);return s<0?_r(s+o,0):$a(s,o)},mo=xp,ou=Math.min,ih=function(n){return n>0?ou(mo(n),9007199254740991):0},Nu=ih,bc=function(n){return Nu(n.length)},gr=Pe,Fr=oo,ss=bc,Mu=function(n){return function(o,s,c){var h,g=gr(o),f=ss(g),A=Fr(c,f);if(n&&s!=s){for(;f>A;)if((h=g[A++])!=h)return!0}else for(;f>A;A++)if((n||A in g)&&g[A]===s)return n||A||0;return!n&&-1}},oh={includes:Mu(!0),indexOf:Mu(!1)},Pa=Ac,cd=Pe,na=oh.indexOf,iE=Un,kg=ue([].push),Ei=function(n,o){var s,c=cd(n),h=0,g=[];for(s in c)!Pa(iE,s)&&Pa(c,s)&&kg(g,s);for(;o.length>h;)Pa(c,s=o[h++])&&(~na(g,s)||kg(g,s));return g},gl=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lp=Ei,J1=gl.concat("length","prototype");Wf.f=Object.getOwnPropertyNames||function(n){return Lp(n,J1)};var Kf={};Kf.f=Object.getOwnPropertySymbols;var Na=qt,zf=Wf,Pg=Kf,_l=iu,yv=ue([].concat),ES=Na("Reflect","ownKeys")||function(n){var o=zf.f(_l(n)),s=Pg.f;return s?yv(o,s(n)):o},No=Ac,$1=ES,Ev=V,bS=fo,Bp=function(n,o,s){for(var c=$1(o),h=bS.f,g=Ev.f,f=0;f<c.length;f++){var A=c[f];No(n,A)||s&&No(s,A)||h(n,A,g(o,A))}},oE=k,Ng=rt,Lc=/#|\.prototype\./,sE=function(n,o){var s=Ms[xu(n)];return s==Fp||s!=ar&&(Ng(o)?oE(o):!!o)},xu=sE.normalize=function(n){return String(n).replace(Lc,".").toLowerCase()},Ms=sE.data={},ar=sE.NATIVE="N",Fp=sE.POLYFILL="P",sh=sE,xs=G,bi=V.f,D2=od,SS=eh.exports,CS=Gs,IS=Bp,ud=sh,ba=function(n,o){var s,c,h,g,f,A=n.target,_=n.global,E=n.stat;if(s=_?xs:E?xs[A]||CS(A,{}):(xs[A]||{}).prototype)for(c in o){if(g=o[c],h=n.noTargetGet?(f=bi(s,c))&&f.value:s[c],!ud(_?c:A+(E?".":"#")+c,n.forced)&&void 0!==h){if(typeof g==typeof h)continue;IS(g,h)}(n.sham||h&&h.sham)&&D2(g,"sham",!0),SS(s,c,g,n)}},X1=G.Promise,GL=eh.exports,aE=function(n,o,s){for(var c in o)GL(n,c,o[c],s);return n},Q4=rt,wS=G.String,WL=G.TypeError,P2=ue,N2=iu,ah=Object.setPrototypeOf||("__proto__"in{}?function(){var n,o=!1,s={};try{(n=P2(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(s,[]),o=s instanceof Array}catch{}return function(c,h){return N2(c),function(n){if("object"==typeof n||Q4(n))return n;throw WL("Can't set "+wS(n)+" as a prototype")}(h),o?n(c,h):c.__proto__=h,c}}():void 0),bv=fo.f,Sa=Ac,Up=Po("toStringTag"),cE=function(n,o,s){n&&!s&&(n=n.prototype),n&&!Sa(n,Up)&&bv(n,Up,{configurable:!0,value:o})},Mg=qt,vl=fo,Al=O,uE=Po("species"),lE=function(n){var o=Mg(n);Al&&o&&!o[uE]&&(0,vl.f)(o,uE,{configurable:!0,get:function(){return this}})},eT=Mr,TS=G.TypeError,Sv=function(n,o){if(eT(o,n))return n;throw TS("Incorrect invocation")},M2=Vn,tT=x,nT=ue(ue.bind),Sc=function(n,o){return M2(n),void 0===o?n:tT?nT(n,o):function(){return n.apply(o,arguments)}},Ca={},dE=Ca,Yf=Po("iterator"),x2=Array.prototype,Cv=function(n){return void 0!==n&&(dE.Array===n||x2[Yf]===n)},Xa={};Xa[Po("toStringTag")]="z";var L2=G,H4="[object z]"===String(Xa),RS=rt,Bc=Ue,B2=Po("toStringTag"),xg=L2.Object,qf="Arguments"==Bc(function(){return arguments}()),Ma=H4?Bc:function(n){var o,s,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(s=function(h,g){try{return h[g]}catch{}}(o=xg(n),B2))?s:qf?Bc(o):"Object"==(c=Bc(o))&&RS(o.callee)?"Arguments":c},F2=Ma,Iv=$e,wv=Ca,Vp=Po("iterator"),hE=function(n){if(null!=n)return Iv(n,Vp)||Iv(n,"@@iterator")||wv[F2(n)]},OS=ae,ui=Vn,rT=iu,KL=Io,zL=hE,U2=G.TypeError,iT=function(n,o){var s=arguments.length<2?zL(n):o;if(ui(s))return rT(OS(s,n));throw U2(KL(n)+" is not iterable")},V2=ae,Tv=iu,j2=$e,An=Sc,zi=ae,Cc=iu,Ic=Io,Za=Cv,oT=bc,Jf=Mr,ch=iT,DS=hE,Ws=function(n,o,s){var c,h;Tv(n);try{if(!(c=j2(n,"return"))){if("throw"===o)throw s;return s}c=V2(c,n)}catch(g){h=!0,c=g}if("throw"===o)throw s;if(h)throw c;return Tv(c),s},YL=G.TypeError,$f=function(n,o){this.stopped=n,this.result=o},pE=$f.prototype,kS=Po("iterator"),Bi=!1;try{var Lu=0,xa={next:function(){return{done:!!Lu++}},return:function(){Bi=!0}};xa[kS]=function(){return this},Array.from(xa,function(){throw 2})}catch{}var mi=function(n,o){if(!o&&!Bi)return!1;var s=!1;try{var c={};c[kS]=function(){return{next:function(){return{done:s=!0}}}},n(c)}catch{}return s},Jh=ue,ni=k,fE=rt,sT=Ma,$h=th,Lg=function(){},PS=[],NS=qt("Reflect","construct"),jp=/^\s*(?:class|function)\b/,Q2=Jh(jp.exec),aT=!jp.exec(Lg),Bu=function(n){if(!fE(n))return!1;try{return NS(Lg,PS,n),!0}catch{return!1}},Rv=function(n){if(!fE(n))return!1;switch(sT(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return aT||!!Q2(jp,$h(n))}catch{return!0}};Rv.sham=!0;var Xh,Xf,mE,Qp,cT=!NS||ni(function(){var n;return Bu(Bu.call)||!Bu(Object)||!Bu(function(){n=!0})||n})?Rv:Bu,La=cT,ra=Io,ec=G.TypeError,Ur=function(n){if(La(n))return n;throw ec(ra(n)+" is not a constructor")},Hp=iu,gE=Ur,Zf=Po("species"),uT=function(n,o){var s,c=Hp(n).constructor;return void 0===c||null==(s=Hp(c)[Zf])?o:gE(s)},MS=Function.prototype,Bg=MS.apply,Mo=MS.call,tc="object"==typeof Reflect&&Reflect.apply||(x?Mo.bind(Bg):function(){return Mo.apply(Bg,arguments)}),Ov=qt("document","documentElement"),lT=ue([].slice),xS=/(?:ipad|iphone|ipod).*applewebkit/i.test(xr),Vi="process"==Ue(G.process),as=G,Yi=tc,Dv=Sc,em=rt,dT=Ac,qL=k,_E=Ov,G4=lT,vE=vn,tm=xS,H2=Vi,su=as.setImmediate,nm=as.clearImmediate,Wo=as.process,LS=as.Dispatch,AE=as.Function,hT=as.MessageChannel,BS=as.String,yE=0,ia={};try{Xh=as.location}catch{}var ji=function(n){if(dT(ia,n)){var o=ia[n];delete ia[n],o()}},rm=function(n){return function(){ji(n)}},uh=function(n){ji(n.data)},dd=function(n){as.postMessage(BS(n),Xh.protocol+"//"+Xh.host)};su&&nm||(su=function(n){var o=G4(arguments,1);return ia[++yE]=function(){Yi(em(n)?n:AE(n),void 0,o)},Xf(yE),yE},nm=function(n){delete ia[n]},H2?Xf=function(n){Wo.nextTick(rm(n))}:LS&&LS.now?Xf=function(n){LS.now(rm(n))}:hT&&!tm?(Qp=(mE=new hT).port2,mE.port1.onmessage=uh,Xf=Dv(Qp.postMessage,Qp)):as.addEventListener&&em(as.postMessage)&&!as.importScripts&&Xh&&"file:"!==Xh.protocol&&!qL(dd)?(Xf=dd,as.addEventListener("message",uh,!1)):Xf="onreadystatechange"in vE("script")?function(n){_E.appendChild(vE("script")).onreadystatechange=function(){_E.removeChild(this),ji(n)}}:function(n){setTimeout(rm(n),0)});var hd,pd,Fu,im,kv,Ks,Fc,om,bE={set:su,clear:nm},FS=G,pT=/ipad|iphone|ipod/i.test(xr)&&void 0!==FS.Pebble,fd=/web0s(?!.*chrome)/i.test(xr),Zh=G,Fg=Sc,yl=bE.set,fT=xS,Pv=pT,CE=fd,Zo=Vi,IE=Zh.MutationObserver||Zh.WebKitMutationObserver,wE=Zh.document,Ug=Zh.process,sm=Zh.Promise,am=(0,V.f)(Zh,"queueMicrotask"),Gp=am&&am.value;Gp||(hd=function(){var n,o;for(Zo&&(n=Ug.domain)&&n.exit();pd;){o=pd.fn,pd=pd.next;try{o()}catch(s){throw pd?im():Fu=void 0,s}}Fu=void 0,n&&n.enter()},fT||Zo||CE||!IE||!wE?!Pv&&sm&&sm.resolve?((Fc=sm.resolve(void 0)).constructor=sm,om=Fg(Fc.then,Fc),im=function(){om(hd)}):Zo?im=function(){Ug.nextTick(hd)}:(yl=Fg(yl,Zh),im=function(){yl(hd)}):(kv=!0,Ks=wE.createTextNode(""),new IE(hd).observe(Ks,{characterData:!0}),im=function(){Ks.data=kv=!kv}));var Wp=Gp||function(n){var o={fn:n,next:void 0};Fu&&(Fu.next=o),pd||(pd=o,im()),Fu=o},US={},cs=Vn,ep=function(n){var o,s;this.promise=new n(function(c,h){if(void 0!==o||void 0!==s)throw TypeError("Bad Promise constructor");o=c,s=h}),this.resolve=cs(o),this.reject=cs(s)};US.f=function(n){return new ep(n)};var mT=iu,G2=$t,zn=US,W2=function(n,o){if(mT(n),G2(o)&&o.constructor===n)return o;var s=zn.f(n);return(0,s.resolve)(o),s.promise},TE=G,JL=function(){this.head=null,this.tail=null};JL.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var Jn,es,RE,$L,W4="object"==typeof window,Uu=ba,lo=G,VS=qt,Vu=ae,Nv=X1,gT=eh.exports,au=aE,tp=ah,_T=cE,Vg=lE,Kp=Vn,cm=rt,jS=$t,QS=Sv,wc=th,np=function(n,o,s){var c,h,g,f,A,_,E,I=!(!s||!s.AS_ENTRIES),R=!(!s||!s.IS_ITERATOR),M=!(!s||!s.INTERRUPTED),Q=An(o,s&&s.that),H=function(le){return c&&Ws(c,"normal",le),new $f(!0,le)},Z=function(le){return I?(Cc(le),M?Q(le[0],le[1],H):Q(le[0],le[1])):M?Q(le,H):Q(le)};if(R)c=n;else{if(!(h=DS(n)))throw YL(Ic(n)+" is not iterable");if(Za(h)){for(g=0,f=oT(n);f>g;g++)if((A=Z(n[g]))&&Jf(pE,A))return A;return new $f(!1)}c=ch(n,h)}for(_=c.next;!(E=zi(_,c)).done;){try{A=Z(E.value)}catch(le){Ws(c,"throw",le)}if("object"==typeof A&&A&&Jf(pE,A))return A}return new $f(!1)},zp=mi,cu=uT,DE=bE.set,Yp=Wp,XL=W2,HS=US,kE=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}},K2=JL,PE=Pu,AT=sh,z2=W4,jg=Vi,Mv=ya,xv=Po("species"),Uc="Promise",GS=PE.getterFor(Uc),Lv=PE.set,Y2=PE.getterFor(Uc),qp=Nv&&Nv.prototype,uu=Nv,Jp=qp,WS=lo.TypeError,KS=lo.document,NE=lo.process,El=HS.f,Bv=El,yT=!!(KS&&KS.createEvent&&lo.dispatchEvent),Qg=cm(lo.PromiseRejectionEvent),ME="unhandledrejection",ET=!1,xE=AT(Uc,function(){var n=wc(uu),o=n!==String(uu);if(!o&&66===Mv)return!0;if(Mv>=51&&/native code/.test(n))return!1;var s=new uu(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(s.constructor={})[xv]=c,!(ET=s.then(function(){})instanceof c)||!o&&z2&&!Qg}),q2=xE||!zp(function(n){uu.all(n).catch(function(){})}),LE=function(n){var o;return!(!jS(n)||!cm(o=n.then))&&o},BE=function(n,o){var s,c,h,g=o.value,f=1==o.state,A=f?n.ok:n.fail,_=n.resolve,E=n.reject,S=n.domain;try{A?(f||(2===o.rejection&&ZL(o),o.rejection=1),!0===A?s=g:(S&&S.enter(),s=A(g),S&&(S.exit(),h=!0)),s===n.promise?E(WS("Promise-chain cycle")):(c=LE(s))?Vu(c,s,_,E):_(s)):E(g)}catch(I){S&&!h&&S.exit(),E(I)}},um=function(n,o){n.notified||(n.notified=!0,Yp(function(){for(var s,c=n.reactions;s=c.get();)BE(s,n);n.notified=!1,o&&!n.rejection&&bT(n)}))},FE=function(n,o,s){var c,h;yT?((c=KS.createEvent("Event")).promise=o,c.reason=s,c.initEvent(n,!1,!0),lo.dispatchEvent(c)):c={promise:o,reason:s},!Qg&&(h=lo["on"+n])?h(c):n===ME&&function(n,o){var s=TE.console;s&&s.error&&(1==arguments.length?s.error(n):s.error(n,o))}("Unhandled promise rejection",s)},bT=function(n){Vu(DE,lo,function(){var o,s=n.facade,c=n.value;if(UE(n)&&(o=kE(function(){jg?NE.emit("unhandledRejection",c,s):FE(ME,s,c)}),n.rejection=jg||UE(n)?2:1,o.error))throw o.value})},UE=function(n){return 1!==n.rejection&&!n.parent},ZL=function(n){Vu(DE,lo,function(){var o=n.facade;jg?NE.emit("rejectionHandled",o):FE("rejectionhandled",o,n.value)})},$p=function(n,o,s){return function(c){n(o,c,s)}},lm=function(n,o,s){n.done||(n.done=!0,s&&(n=s),n.value=o,n.state=2,um(n,!0))},zS=function(n,o,s){if(!n.done){n.done=!0,s&&(n=s);try{if(n.facade===o)throw WS("Promise can't be resolved itself");var c=LE(o);c?Yp(function(){var h={done:!1};try{Vu(c,o,$p(zS,h,n),$p(lm,h,n))}catch(g){lm(h,g,n)}}):(n.value=o,n.state=1,um(n,!1))}catch(h){lm({done:!1},h,n)}}};if(xE&&(Jp=(uu=function(n){QS(this,Jp),Kp(n),Vu(Jn,this);var o=GS(this);try{n($p(zS,o),$p(lm,o))}catch(s){lm(o,s)}}).prototype,(Jn=function(n){Lv(this,{type:Uc,done:!1,notified:!1,parent:!1,reactions:new K2,rejection:!1,state:0,value:void 0})}).prototype=au(Jp,{then:function(n,o){var s=Y2(this),c=El(cu(this,uu));return s.parent=!0,c.ok=!cm(n)||n,c.fail=cm(o)&&o,c.domain=jg?NE.domain:void 0,0==s.state?s.reactions.add(c):Yp(function(){BE(c,s)}),c.promise},catch:function(n){return this.then(void 0,n)}}),es=function(){var n=new Jn,o=GS(n);this.promise=n,this.resolve=$p(zS,o),this.reject=$p(lm,o)},HS.f=El=function(n){return n===uu||n===RE?new es(n):Bv(n)},cm(Nv)&&qp!==Object.prototype)){$L=qp.then,ET||(gT(qp,"then",function(n,o){var s=this;return new uu(function(c,h){Vu($L,s,c,h)}).then(n,o)},{unsafe:!0}),gT(qp,"catch",Jp.catch,{unsafe:!0}));try{delete qp.constructor}catch{}tp&&tp(qp,Jp)}Uu({global:!0,wrap:!0,forced:xE},{Promise:uu}),_T(uu,Uc,!1),Vg(Uc),RE=VS(Uc),Uu({target:Uc,stat:!0,forced:xE},{reject:function(n){var o=El(this);return Vu(o.reject,void 0,n),o.promise}}),Uu({target:Uc,stat:!0,forced:xE},{resolve:function(n){return XL(this,n)}}),Uu({target:Uc,stat:!0,forced:q2},{all:function(n){var o=this,s=El(o),c=s.resolve,h=s.reject,g=kE(function(){var f=Kp(o.resolve),A=[],_=0,E=1;np(n,function(S){var I=_++,R=!1;E++,Vu(f,o,S).then(function(M){R||(R=!0,A[I]=M,--E||c(A))},h)}),--E||c(A)});return g.error&&h(g.value),s.promise},race:function(n){var o=this,s=El(o),c=s.reject,h=kE(function(){var g=Kp(o.resolve);np(n,function(f){Vu(g,o,f).then(s.resolve,c)})});return h.error&&c(h.value),s.promise}});var eB=ba,K4=tc,VE=ue,Fv=k,YS=G.Array,jE=qt("JSON","stringify"),Hg=VE(/./.exec),qS=VE("".charAt),J2=VE("".charCodeAt),$2=VE("".replace),JS=VE(1..toString),$S=/[\uD800-\uDFFF]/g,XS=/^[\uD800-\uDBFF]$/,ZS=/^[\uDC00-\uDFFF]$/,ST=function(n,o,s){var c=qS(s,o-1),h=qS(s,o+1);return Hg(XS,n)&&!Hg(ZS,h)||Hg(ZS,n)&&!Hg(XS,c)?"\\u"+JS(J2(n,0),16):n},lu=Fv(function(){return'"\\udf06\\ud834"'!==jE("\udf06\ud834")||'"\\udead"'!==jE("\udead")});jE&&eB({target:"JSON",stat:!0,forced:lu},{stringify:function(n,o,s){for(var c=0,h=arguments.length,g=YS(h);c<h;c++)g[c]=arguments[c];var f=K4(jE,null,g);return"string"==typeof f?$2(f,$S,ST):f}});var Ls=function(n){try{return!!n()}catch{return!0}},QE=!Ls(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}),CT=QE,eC=Function.prototype,dm=eC.call,IT=CT&&eC.bind.bind(dm,dm),Qi=CT?function(n){return n&&IT(n)}:function(n){return n&&function(){return dm.apply(n,arguments)}},nc=Qi({}.isPrototypeOf),nC=function(n){return n&&n.Math==Math&&n},ri=nC("object"==typeof globalThis&&globalThis)||nC("object"==typeof window&&window)||nC("object"==typeof self&&self)||nC("object"==typeof K&&K)||function(){return this}()||Function("return this")(),Uv=Function.prototype,rC=Uv.apply,HE=Uv.call,sa="object"==typeof Reflect&&Reflect.apply||(QE?HE.bind(rC):function(){return HE.apply(rC,arguments)}),Is=function(n){return"function"==typeof n},Gg={},ju=!Ls(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Wg=Function.prototype.call,du=QE?Wg.bind(Wg):function(){return Wg.apply(Wg,arguments)},Vv={},iC={}.propertyIsEnumerable,oC=Object.getOwnPropertyDescriptor,X2=oC&&!iC.call({1:2},1);Vv.f=X2?function(n){var o=oC(this,n);return!!o&&o.enumerable}:iC;var Ba,jv,lh=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}},TT=Qi,RT=TT({}.toString),dh=TT("".slice),md=function(n){return dh(RT(n),8,-1)},Hn=Ls,rp=md,Kg=ri.Object,rc=Qi("".split),hm=Hn(function(){return!Kg("z").propertyIsEnumerable(0)})?function(n){return"String"==rp(n)?rc(n,""):Kg(n)}:Kg,kr=ri.TypeError,Qv=function(n){if(null==n)throw kr("Can't call method on "+n);return n},OT=hm,sC=Qv,gd=function(n){return OT(sC(n))},DT=Is,Qu=function(n){return"object"==typeof n?null!==n:DT(n)},ip={},GE=ip,pm=ri,Z2=Is,aC=function(n){return Z2(n)?n:void 0},hu=function(n,o){return arguments.length<2?aC(GE[n])||aC(pm[n]):GE[n]&&GE[n][o]||pm[n]&&pm[n][o]},Xp=hu("navigator","userAgent")||"",bl=Xp,eP=ri.process,Hv=ri.Deno,kT=eP&&eP.versions||Hv&&Hv.version,_d=kT&&kT.v8;_d&&(jv=(Ba=_d.split("."))[0]>0&&Ba[0]<4?1:+(Ba[0]+Ba[1])),!jv&&bl&&(!(Ba=bl.match(/Edge\/(\d+)/))||Ba[1]>=74)&&(Ba=bl.match(/Chrome\/(\d+)/))&&(jv=+Ba[1]);var zg=jv,cC=zg,fm=!!Object.getOwnPropertySymbols&&!Ls(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&cC&&cC<41}),Yg=fm&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,vt=hu,Gv=Is,Ni=nc,KE=ri.Object,qg=Yg?function(n){return"symbol"==typeof n}:function(n){var o=vt("Symbol");return Gv(o)&&Ni(o.prototype,KE(n))},PT=ri.String,mm=function(n){try{return PT(n)}catch{return"Object"}},NT=Is,zE=mm,uC=ri.TypeError,vd=function(n){if(NT(n))return n;throw uC(zE(n)+" is not a function")},Wv=vd,lC=function(n,o){var s=n[o];return null==s?void 0:Wv(s)},YE=du,dC=Is,Kv=Qu,nB=ri.TypeError,zv={exports:{}},MT=ri,qE=Object.defineProperty,hh="__core-js_shared__",hC=ri[hh]||function(n,o){try{qE(MT,n,{value:o,configurable:!0,writable:!0})}catch{MT[n]=o}return o}(hh,{}),pC=hC;(zv.exports=function(n,o){return pC[n]||(pC[n]=void 0!==o?o:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var gm=Qv,xT=ri.Object,pu=function(n){return xT(gm(n))},LT=pu,_m=Qi({}.hasOwnProperty),Bs=Object.hasOwn||function(n,o){return _m(LT(n),o)},Fa=Qi,vm=0,hi=Math.random(),JE=Fa(1..toString),ur=function(n){return"Symbol("+(void 0===n?"":n)+")_"+JE(++vm+hi,36)},Am=ri,Hu=Bs,rB=ur,Yv=fm,Gu=Yg,Zi=(0,zv.exports)("wks"),Jg=Am.Symbol,fC=Jg&&Jg.for,tP=Gu?Jg:Jg&&Jg.withoutSetter||rB,Fs=function(n){if(!Hu(Zi,n)||!Yv&&"string"!=typeof Zi[n]){var o="Symbol."+n;Zi[n]=Yv&&Hu(Jg,n)?Jg[n]:Gu&&fC?fC(o):tP(o)}return Zi[n]},Co=du,qv=Qu,mC=qg,nP=lC,FT=ri.TypeError,Jv=Fs("toPrimitive"),Wu=function(n,o){if(!qv(n)||mC(n))return n;var s,c=nP(n,Jv);if(c){if(void 0===o&&(o="default"),s=Co(c,n,o),!qv(s)||mC(s))return s;throw FT("Can't convert object to primitive value")}return void 0===o&&(o="number"),function(n,o){var s,c;if("string"===o&&dC(s=n.toString)&&!Kv(c=YE(s,n))||dC(s=n.valueOf)&&!Kv(c=YE(s,n))||"string"!==o&&dC(s=n.toString)&&!Kv(c=YE(s,n)))return c;throw nB("Can't convert object to primitive value")}(n,o)},$v=qg,Xv=function(n){var o=Wu(n,"string");return $v(o)?o:o+""},gC=Qu,Zv=ri.document,UT=gC(Zv)&&gC(Zv.createElement),VT=function(n){return UT?Zv.createElement(n):{}},iB=VT,eA=!ju&&!Ls(function(){return 7!=Object.defineProperty(iB("div"),"a",{get:function(){return 7}}).a}),_C=du,oB=Vv,ym=lh,iP=gd,jT=Xv,$g=Bs,oP=eA,vC=Object.getOwnPropertyDescriptor;Gg.f=ju?vC:function(n,o){if(n=iP(n),o=jT(o),oP)try{return vC(n,o)}catch{}if($g(n,o))return ym(!_C(oB.f,n,o),n[o])};var ef=Ls,XE=Is,tA=/#|\.prototype\./,op=function(n,o){var s=AC[eo(n)];return s==yC||s!=sP&&(XE(o)?ef(o):!!o)},eo=op.normalize=function(n){return String(n).replace(tA,".").toLowerCase()},AC=op.data={},sP=op.NATIVE="N",yC=op.POLYFILL="P",EC=op,aP=vd,QT=QE,bC=Qi(Qi.bind),ph=function(n,o){return aP(n),void 0===o?n:QT?bC(n,o):function(){return n.apply(o,arguments)}},Ad={},cP=ju&&Ls(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ku=Qu,HT=ri.String,GT=ri.TypeError,jc=function(n){if(Ku(n))return n;throw GT(HT(n)+" is not an object")},sB=eA,nA=jc,WT=Xv,SC=ri.TypeError,rA=Object.defineProperty,CC=Object.getOwnPropertyDescriptor;Ad.f=ju?cP?function(n,o,s){if(nA(n),o=WT(o),nA(s),"function"==typeof n&&"prototype"===o&&"value"in s&&"writable"in s&&!s.writable){var c=CC(n,o);c&&c.writable&&(n[o]=s.value,s={configurable:"configurable"in s?s.configurable:c.configurable,enumerable:"enumerable"in s?s.enumerable:c.enumerable,writable:!1})}return rA(n,o,s)}:rA:function(n,o,s){if(nA(n),o=WT(o),nA(s),sB)try{return rA(n,o,s)}catch{}if("get"in s||"set"in s)throw SC("Accessors not supported");return"value"in s&&(n[o]=s.value),n};var zT=Ad,Em=lh,tf=ju?function(n,o,s){return zT.f(n,o,Em(1,s))}:function(n,o,s){return n[o]=s,n},bm=ri,Xg=sa,YT=Qi,ZE=Is,eb=Gg.f,Zg=EC,Sm=ip,iA=ph,Cm=tf,qT=Bs,JT=function(n){var o=function(s,c,h){if(this instanceof o){switch(arguments.length){case 0:return new n;case 1:return new n(s);case 2:return new n(s,c)}return new n(s,c,h)}return Xg(n,this,arguments)};return o.prototype=n.prototype,o},us=function(n,o){var s,c,h,g,f,A,_,E,S=n.target,I=n.global,R=n.stat,M=n.proto,Q=I?bm:R?bm[S]:(bm[S]||{}).prototype,H=I?Sm:Sm[S]||Cm(Sm,S,{})[S],Z=H.prototype;for(h in o)s=!Zg(I?h:S+(R?".":"#")+h,n.forced)&&Q&&qT(Q,h),f=H[h],s&&(A=n.noTargetGet?(E=eb(Q,h))&&E.value:Q[h]),g=s&&A?A:o[h],s&&typeof f==typeof g||(_=n.bind&&s?iA(g,bm):n.wrap&&s?JT(g):M&&ZE(g)?YT(g):g,(n.sham||g&&g.sham||f&&f.sham)&&Cm(_,"sham",!0),Cm(H,h,_),M&&(qT(Sm,c=S+"Prototype")||Cm(Sm,c,{}),Cm(Sm[c],h,g),n.real&&Z&&!Z[h]&&Cm(Z,h,g)))},pP=Math.ceil,fP=Math.floor,wC=function(n){var o=+n;return o!=o||0===o?0:(o>0?fP:pP)(o)},TC=wC,mP=Math.min,sp=function(n){return function(n){return n>0?mP(TC(n),9007199254740991):0}(n.length)},XT=vd,aB=pu,gP=hm,Im=sp,RC=ri.TypeError,ap=function(n){return function(o,s,c,h){XT(s);var g=aB(o),f=gP(g),A=Im(g),_=n?A-1:0,E=n?-1:1;if(c<2)for(;;){if(_ in f){h=f[_],_+=E;break}if(_+=E,n?_<0:A<=_)throw RC("Reduce of empty array with no initial value")}for(;n?_>=0:A>_;_+=E)_ in f&&(h=s(h,f[_],_,g));return h}},ki={left:ap(!1),right:ap(!0)},OC=Ls,yd=function(n,o){var s=[][n];return!!s&&OC(function(){s.call(null,o||function(){throw 1},1)})},Ed="process"==md(ri.process),ZT=ki.left,eR=zg,nf=Ed;us({target:"Array",proto:!0,forced:!yd("reduce")||!nf&&eR>79&&eR<83},{reduce:function(n){var o=arguments.length;return ZT(this,n,o,o>1?arguments[1]:void 0)}});var DC=ip,fh=function(n){return DC[n+"Prototype"]},oA=fh("Array").reduce,tR=nc,tb=oA,Sl=Array.prototype,cB=function(n){var o=n.reduce;return n===Sl||tR(Sl,n)&&o===Sl.reduce?tb:o},e_=cB,z4=Ma,Y4=G.String,sA=function(n){if("Symbol"===z4(n))throw TypeError("Cannot convert a Symbol value to a string");return Y4(n)},q4=iu,uB=function(){var n=q4(this),o="";return n.global&&(o+="g"),n.ignoreCase&&(o+="i"),n.multiline&&(o+="m"),n.dotAll&&(o+="s"),n.unicode&&(o+="u"),n.sticky&&(o+="y"),o},t_=k,cp=G.RegExp,_P=t_(function(){var n=cp("a","y");return n.lastIndex=2,null!=n.exec("abcd")}),J4=_P||t_(function(){return!cp("a","y").sticky}),lB={BROKEN_CARET:_P||t_(function(){var n=cp("^r","gy");return n.lastIndex=2,null!=n.exec("str")}),MISSED_STICKY:J4,UNSUPPORTED_Y:_P},kC={},nR=Ei,rR=gl,PC=fo,sR=iu,$4=Pe,X4=Object.keys||function(n){return nR(n,rR)};kC.f=O&&!LL?Object.defineProperties:function(n,o){sR(n);for(var s,c=$4(o),h=X4(o),g=h.length,f=0;g>f;)PC.f(n,s=h[f++],c[s]);return n};var Cl,Z4=iu,hB=kC,pB=gl,eV=Un,tV=Ov,nV=vn,vP=K1("IE_PROTO"),AP=function(){},fB=function(n){return"<script>"+n+"<\/script>"},mB=function(n){n.write(fB("")),n.close();var o=n.parentWindow.Object;return n=null,o},li=function(){try{Cl=new ActiveXObject("htmlfile")}catch{}var n,o;li=typeof document<"u"?document.domain&&Cl?mB(Cl):((o=nV("iframe")).style.display="none",tV.appendChild(o),o.src=String("javascript:"),(n=o.contentWindow.document).open(),n.write(fB("document.F=Object")),n.close(),n.F):mB(Cl);for(var s=pB.length;s--;)delete li.prototype[pB[s]];return li()};eV[vP]=!0;var n,o,Cn=Object.create||function(n,o){var s;return null!==n?(AP.prototype=Z4(n),s=new AP,AP.prototype=null,s[vP]=n):s=li(),void 0===o?s:hB.f(s,o)},cR=G.RegExp,nb=k(function(){var n=cR(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}),lR=G.RegExp,dR=k(function(){var n=lR("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}),wm=ae,n_=ue,NC=sA,aA=uB,MC=lB,Qc=Cn,hR=Pu.get,LC=nb,rb=dR,yP=(0,gi.exports)("native-string-replace",String.prototype.replace),BC=RegExp.prototype.exec,pR=BC,EP=n_("".charAt),fR=n_("".indexOf),mR=n_("".replace),gR=n_("".slice),FC=(o=/b*/g,wm(BC,n=/a/,"a"),wm(BC,o,"a"),0!==n.lastIndex||0!==o.lastIndex),Tm=MC.BROKEN_CARET,UC=void 0!==/()??/.exec("")[1];(FC||UC||Tm||LC||rb)&&(pR=function(n){var o,s,c,h,g,f,A,_=this,E=hR(_),S=NC(n),I=E.raw;if(I)return I.lastIndex=_.lastIndex,o=wm(pR,I,S),_.lastIndex=I.lastIndex,o;var R=E.groups,M=Tm&&_.sticky,Q=wm(aA,_),H=_.source,Z=0,le=S;if(M&&(Q=mR(Q,"y",""),-1===fR(Q,"g")&&(Q+="g"),le=gR(S,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==EP(S,_.lastIndex-1))&&(H="(?: "+H+")",le=" "+le,Z++),s=new RegExp("^(?:"+H+")",Q)),UC&&(s=new RegExp("^"+H+"$(?!\\s)",Q)),FC&&(c=_.lastIndex),h=wm(BC,M?s:_,le),M?h?(h.input=gR(h.input,Z),h[0]=gR(h[0],Z),h.index=_.lastIndex,_.lastIndex+=h[0].length):_.lastIndex=0:FC&&h&&(_.lastIndex=_.global?h.index+h[0].length:c),UC&&h&&h.length>1&&wm(yP,h[0],s,function(){for(g=1;g<arguments.length-2;g++)void 0===arguments[g]&&(h[g]=void 0)}),h&&R)for(h.groups=f=Qc(null),g=0;g<R.length;g++)f[(A=R[g])[0]]=h[A[1]];return h});var cA=pR;ba({target:"RegExp",proto:!0,forced:/./.exec!==cA},{exec:cA});var uA=Cn,_R=fo,ib=Po("unscopables"),VC=Array.prototype;null==VC[ib]&&_R.f(VC,ib,{configurable:!0,value:uA(null)});var Rm,vR,AR,rV=!k(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),gB=G,iV=Ac,bP=rt,yR=rd,jC=rV,ER=K1("IE_PROTO"),lA=gB.Object,SP=lA.prototype,QC=jC?lA.getPrototypeOf:function(n){var o=yR(n);if(iV(o,ER))return o[ER];var s=o.constructor;return bP(s)&&o instanceof s?s.prototype:o instanceof lA?SP:null},At=k,dA=rt,HC=QC,bR=eh.exports,GC=Po("iterator"),SR=!1;[].keys&&("next"in(AR=[].keys())?(vR=HC(HC(AR)))!==Object.prototype&&(Rm=vR):SR=!0),(null==Rm||At(function(){var n={};return Rm[GC].call(n)!==n}))&&(Rm={}),dA(Rm[GC])||bR(Rm,GC,function(){return this});var r_={IteratorPrototype:Rm,BUGGY_SAFARI_ITERATORS:SR},i_=r_.IteratorPrototype,WC=Cn,KC=be,CP=cE,CR=Ca,_B=function(){return this},IP=ba,wP=ae,TP=rt,ob=QC,bd=ah,wR=cE,RP=od,hA=eh.exports,OP=Ca,vB=ad.PROPER,TR=ad.CONFIGURABLE,fu=r_.IteratorPrototype,rf=r_.BUGGY_SAFARI_ITERATORS,sb=Po("iterator"),up="values",ab="entries",pA=function(){return this},RR=Pe,mu=function(n){VC[ib][n]=!0},Dm=Ca,fA=fo.f,DR=O,km="Array Iterator",DP=Pu.set,kR=Pu.getterFor(km),PR=function(n,o,s,c,h,g,f){!function(n,o,s,c){var h=o+" Iterator";n.prototype=WC(i_,{next:KC(+!c,s)}),CP(n,h,!1),CR[h]=_B}(s,o,c);var A,_,E,S=function(le){if(le===h&&H)return H;if(!rf&&le in M)return M[le];switch(le){case"keys":case up:case ab:return function(){return new s(this,le)}}return function(){return new s(this)}},I=o+" Iterator",R=!1,M=n.prototype,Q=M[sb]||M["@@iterator"]||h&&M[h],H=!rf&&Q||S(h),Z="Array"==o&&M.entries||Q;if(Z&&(A=ob(Z.call(new n)))!==Object.prototype&&A.next&&(ob(A)!==fu&&(bd?bd(A,fu):TP(A[sb])||hA(A,sb,pA)),wR(A,I,!0)),vB&&h==up&&Q&&Q.name!==up&&(TR?RP(M,"name",up):(R=!0,H=function(){return wP(Q,this)})),h)if(_={values:S(up),keys:g?H:S("keys"),entries:S(ab)},f)for(E in _)(rf||R||!(E in M))&&hA(M,E,_[E]);else IP({target:o,proto:!0,forced:rf||R},_);return M[sb]!==H&&hA(M,sb,H,{name:h}),OP[o]=H,_}(Array,"Array",function(n,o){DP(this,{type:km,target:RR(n),index:0,kind:o})},function(){var n=kR(this),o=n.target,s=n.kind,c=n.index++;return!o||c>=o.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==s?{value:c,done:!1}:"values"==s?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),Il=Dm.Arguments=Dm.Array;if(mu("keys"),mu("values"),mu("entries"),DR&&"values"!==Il.name)try{fA(Il,"name",{value:"values"})}catch{}var lp=vn("span").classList,mh=lp&&lp.constructor&&lp.constructor.prototype,wl=G,o_={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},s_=mh===Object.prototype?void 0:mh,sf=PR,dp=od,YC=Po,qC=YC("iterator"),a_=YC("toStringTag"),c_=sf.values,gh=function(n,o){if(n){if(n[qC]!==c_)try{dp(n,qC,c_)}catch{n[qC]=c_}if(n[a_]||dp(n,a_,o),o_[o])for(var s in sf)if(n[s]!==sf[s])try{dp(n,s,sf[s])}catch{n[s]=sf[s]}}};for(var JC in o_)gh(wl[JC]&&wl[JC].prototype,JC);gh(s_,"DOMTokenList");var ub=rt,oV=$t,lb=ah,zu=function(n,o,s){var c,h;return lb&&ub(c=o.constructor)&&c!==s&&oV(h=c.prototype)&&h!==s.prototype&&lb(n,h),n},NR=sA,u_=function(n,o){return void 0===n?arguments.length<2?"":o:NR(n)},mA=$t,_h=od,db=ue("".replace),$C=String(Error("zxcasd").stack),Pm=/\n\s*at [^:]*:[^\n]*/,XC=Pm.test($C),hb=function(n,o){if(XC&&"string"==typeof n)for(;o--;)n=db(n,Pm,"");return n},pb=be,MR=!k(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",pb(1,7)),7!==n.stack)}),xR=qt,l_=Ac,fb=od,kP=Mr,LR=ah,BR=Bp,mb=zu,FR=u_,yB=function(n,o){mA(o)&&"cause"in o&&_h(n,"cause",o.cause)},EB=hb,PP=MR,ZC=ba,Lr=tc,Yu=function(n,o,s,c){var h=c?2:1,g=n.split("."),f=g[g.length-1],A=xR.apply(null,g);if(A){var _=A.prototype;if(l_(_,"cause")&&delete _.cause,!s)return A;var E=xR("Error"),S=o(function(I,R){var M=FR(c?R:I,void 0),Q=c?new A(I):new A;return void 0!==M&&fb(Q,"message",M),PP&&fb(Q,"stack",EB(Q.stack,2)),this&&kP(_,this)&&mb(Q,this,S),arguments.length>h&&yB(Q,arguments[h]),Q});S.prototype=_,"Error"!==f&&(LR?LR(S,E):BR(S,E,{name:!0})),BR(S,A);try{_.name!==f&&fb(_,"name",f),_.constructor=S}catch{}return S}},eI=G.WebAssembly,tI=7!==Error("e",{cause:7}).cause,d_=function(n,o){var s={};s[n]=Yu(n,o,tI),ZC({global:!0,forced:tI},s)},gb=function(n,o){if(eI&&eI[n]){var s={};s[n]=Yu("WebAssembly."+n,o,tI),ZC({target:"WebAssembly",stat:!0,forced:tI},s)}};d_("Error",function(n){return function(o){return Lr(n,this,arguments)}}),d_("EvalError",function(n){return function(o){return Lr(n,this,arguments)}}),d_("RangeError",function(n){return function(o){return Lr(n,this,arguments)}}),d_("ReferenceError",function(n){return function(o){return Lr(n,this,arguments)}}),d_("SyntaxError",function(n){return function(o){return Lr(n,this,arguments)}}),d_("TypeError",function(n){return function(o){return Lr(n,this,arguments)}}),d_("URIError",function(n){return function(o){return Lr(n,this,arguments)}}),gb("CompileError",function(n){return function(o){return Lr(n,this,arguments)}}),gb("LinkError",function(n){return function(o){return Lr(n,this,arguments)}}),gb("RuntimeError",function(n){return function(o){return Lr(n,this,arguments)}});let gA=!0,NP=!0;function Tc(n,o,s){const c=n.match(o);return c&&c.length>=s&&parseInt(c[s],10)}function It(n,o,s){if(!n.RTCPeerConnection)return;const c=n.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(f,A){if(f!==o)return h.apply(this,arguments);const _=E=>{const S=s(E);S&&(A.handleEvent?A.handleEvent(S):A(S))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(A,_),h.apply(this,[f,_])};const g=c.removeEventListener;c.removeEventListener=function(f,A){if(f!==o||!this._eventMap||!this._eventMap[o])return g.apply(this,arguments);if(!this._eventMap[o].has(A))return g.apply(this,arguments);const _=this._eventMap[o].get(A);return this._eventMap[o].delete(A),0===this._eventMap[o].size&&delete this._eventMap[o],0===Object.keys(this._eventMap).length&&delete this._eventMap,g.apply(this,[f,_])},Object.defineProperty(c,"on"+o,{get(){return this["_on"+o]},set(f){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),f&&this.addEventListener(o,this["_on"+o]=f)},enumerable:!0,configurable:!0})}function VR(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(gA=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function bB(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(NP=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function MP(){if("object"==typeof window){if(gA)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function qu(n,o){NP&&console.warn(n+" is deprecated, please use "+o+" instead.")}function nI(n){const o={browser:null,version:null};if(void 0===n||!n.navigator)return o.browser="Not a browser.",o;const{navigator:s}=n;if(s.mozGetUserMedia)o.browser="firefox",o.version=Tc(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)o.browser="chrome",o.version=Tc(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.mediaDevices&&s.userAgent.match(/Edge\/(\d+).(\d+)$/))o.browser="edge",o.version=Tc(s.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return o.browser="Not a supported browser.",o;o.browser="safari",o.version=Tc(s.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return o}function af(n){return"[object Object]"===Object.prototype.toString.call(n)}function Sd(n){var o;return af(n)?e_(o=Object.keys(n)).call(o,function(s,c){const h=af(n[c]),g=h?Sd(n[c]):n[c],f=h&&!Object.keys(g).length;return void 0===g||f?s:Object.assign(s,{[c]:g})},{}):n}function h_(n,o,s){const c=s?"outbound-rtp":"inbound-rtp",h=new Map;if(null===o)return h;const g=[];return n.forEach(f=>{"track"===f.type&&f.trackIdentifier===o.id&&g.push(f)}),g.forEach(f=>{n.forEach(A=>{A.type===c&&A.trackId===f.id&&function _(E,S,I){S&&!I.has(S.id)&&(I.set(S.id,S),Object.keys(S).forEach(R=>{R.endsWith("Id")?_(E,E.get(S[R]),I):R.endsWith("Ids")&&S[R].forEach(M=>{_(E,E.get(M),I)})}))}(n,A,h)})}),h}var p_=ur,_b=(0,zv.exports)("keys"),f_=function(n){return _b[n]||(_b[n]=p_(n))},hp=!Ls(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),vb=ri,Hc=Bs,aa=Is,rI=pu,Cd=hp,so=f_("IE_PROTO"),Nm=vb.Object,Ua=Nm.prototype,Mm=Cd?Nm.getPrototypeOf:function(n){var o=rI(n);if(Hc(o,so))return o[so];var s=o.constructor;return aa(s)&&o instanceof s?s.prototype:o instanceof Nm?Ua:null},_A=Is,vA=ri.String,AA=ri.TypeError,yA=Qi,EA=jc,xP=Object.setPrototypeOf||("__proto__"in{}?function(){var n,o=!1,s={};try{(n=yA(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(s,[]),o=s instanceof Array}catch{}return function(c,h){return EA(c),function(n){if("object"==typeof n||_A(n))return n;throw AA("Can't set "+vA(n)+" as a prototype")}(h),o?n(c,h):c.__proto__=h,c}}():void 0),Ab={},iI=wC,jR=Math.max,LP=Math.min,oI=function(n,o){var s=iI(n);return s<0?jR(s+o,0):LP(s,o)},QR=gd,sI=oI,BP=sp,HR=function(n){return function(o,s,c){var h,g=QR(o),f=BP(g),A=sI(c,f);if(n&&s!=s){for(;f>A;)if((h=g[A++])!=h)return!0}else for(;f>A;A++)if((n||A in g)&&g[A]===s)return n||A||0;return!n&&-1}},hr={includes:HR(!0),indexOf:HR(!1)},aI={},cf=Bs,Bn=gd,yb=hr.indexOf,SB=aI,Rn=Qi([].push),Gn=function(n,o){var s,c=Bn(n),h=0,g=[];for(s in c)!cf(SB,s)&&cf(c,s)&&Rn(g,s);for(;o.length>h;)cf(c,s=o[h++])&&(~yb(g,s)||Rn(g,s));return g},go=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],CB=Gn,ls=go.concat("length","prototype");Ab.f=Object.getOwnPropertyNames||function(n){return CB(n,ls)};var Ju={};Ju.f=Object.getOwnPropertySymbols;var bA=hu,Tl=Ab,Eb=Ju,FP=jc,UP=Qi([].concat),_o=bA("Reflect","ownKeys")||function(n){var o=Tl.f(FP(n)),s=Eb.f;return s?UP(o,s(n)):o},cI=Bs,IB=_o,VP=Gg,GR=Ad,SA={},ai=Gn,CA=go,ic=Object.keys||function(n){return ai(n,CA)},IA=Ad,jP=jc,g_=gd,bb=ic;SA.f=ju&&!cP?Object.defineProperties:function(n,o){jP(n);for(var s,c=g_(o),h=bb(o),g=h.length,f=0;g>f;)IA.f(n,s=h[f++],c[s]);return n};var Sb,uI=hu("document","documentElement"),QP=jc,HP=SA,WR=go,wA=aI,Bm=uI,KR=VT,GP=f_("IE_PROTO"),TA=function(){},Gc=function(n){return"<script>"+n+"<\/script>"},lI=function(n){n.write(Gc("")),n.close();var o=n.parentWindow.Object;return n=null,o},dI=function(){try{Sb=new ActiveXObject("htmlfile")}catch{}var n,o;dI=typeof document<"u"?document.domain&&Sb?lI(Sb):((o=KR("iframe")).style.display="none",Bm.appendChild(o),o.src=String("javascript:"),(n=o.contentWindow.document).open(),n.write(Gc("document.F=Object")),n.close(),n.F):lI(Sb);for(var s=WR.length;s--;)delete dI.prototype[WR[s]];return dI()};wA[GP]=!0;var Fm=Object.create||function(n,o){var s;return null!==n?(TA.prototype=QP(n),s=new TA,TA.prototype=null,s[GP]=n):s=dI(),void 0===o?s:HP.f(s,o)},sV=Qi("".replace),WP=String(Error("zxcasd").stack),hI=/\n\s*at [^:]*:[^\n]*/,Cb=hI.test(WP),__=Qu,zR=tf,ts={},YR=ts,qR=Fs("iterator"),JR=Array.prototype,Ib=function(n){return void 0!==n&&(YR.Array===n||JR[qR]===n)},wb={};wb[Fs("toStringTag")]="z";var zo="[object z]"===String(wb),ns=ri,Wc=zo,$R=Is,RA=md,pI=Fs("toStringTag"),XR=ns.Object,KP="Arguments"==RA(function(){return arguments}()),pp=Wc?RA:function(n){var o,s,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(s=function(h,g){try{return h[g]}catch{}}(o=XR(n),pI))?s:KP?RA(o):"Object"==(c=RA(o))&&$R(o.callee)?"Arguments":c},fp=pp,ws=lC,Id=ts,zP=Fs("iterator"),v_=function(n){if(null!=n)return ws(n,zP)||ws(n,"@@iterator")||Id[fp(n)]},Ah=du,wd=vd,$u=jc,YP=mm,ZR=v_,wB=ri.TypeError,Tb=function(n,o){var s=arguments.length<2?ZR(n):o;if(wd(s))return $u(Ah(s,n));throw wB(YP(n)+" is not iterable")},fI=du,qP=jc,yh=lC,A_=function(n,o,s){var c,h;qP(n);try{if(!(c=yh(n,"return"))){if("throw"===o)throw s;return s}c=fI(c,n)}catch(g){h=!0,c=g}if("throw"===o)throw s;if(h)throw c;return qP(c),s},JP=ph,Xu=du,gu=jc,OA=mm,Rb=Ib,y_=sp,mI=nc,eO=Tb,Hr=v_,uf=A_,Zu=ri.TypeError,E_=function(n,o){this.stopped=n,this.result=o},DA=E_.prototype,Ro=function(n,o,s){var c,h,g,f,A,_,E,I=!(!s||!s.AS_ENTRIES),R=!(!s||!s.IS_ITERATOR),M=!(!s||!s.INTERRUPTED),Q=JP(o,s&&s.that),H=function(le){return c&&uf(c,"normal",le),new E_(!0,le)},Z=function(le){return I?(gu(le),M?Q(le[0],le[1],H):Q(le[0],le[1])):M?Q(le,H):Q(le)};if(R)c=n;else{if(!(h=Hr(n)))throw Zu(OA(n)+" is not iterable");if(Rb(h)){for(g=0,f=y_(n);f>g;g++)if((A=Z(n[g]))&&mI(DA,A))return A;return new E_(!1)}c=eO(n,h)}for(_=c.next;!(E=Xu(_,c)).done;){try{A=Z(E.value)}catch(le){uf(c,"throw",le)}if("object"==typeof A&&A&&mI(DA,A))return A}return new E_(!1)},Um=pp,lf=ri.String,Rc=function(n){if("Symbol"===Um(n))throw TypeError("Cannot convert a Symbol value to a string");return lf(n)},b_=Rc,tO=lh,nO=!Ls(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",tO(1,7)),7!==n.stack)}),rO=us,iO=ri,TB=nc,$P=Mm,Rl=xP,Ob=Fm,S_=tf,Db=lh,PA=function(n,o){if(Cb&&"string"==typeof n)for(;o--;)n=sV(n,hI,"");return n},gI=function(n,o){__(o)&&"cause"in o&&zR(n,"cause",o.cause)},oO=Ro,XP=function(n,o){return void 0===n?arguments.length<2?"":o:b_(n)},_I=nO,ZP=Fs("toStringTag"),kb=iO.Error,eN=[].push,Vm=function(n,o){var s,c=arguments.length>2?arguments[2]:void 0,h=TB(Pb,this);Rl?s=Rl(new kb,h?$P(this):Pb):(s=h?this:Ob(Pb),S_(s,ZP,"Error")),void 0!==o&&S_(s,"message",XP(o)),_I&&S_(s,"stack",PA(s.stack,1)),gI(s,c);var g=[];return oO(n,eN,{that:g}),S_(s,"errors",g),s};Rl?Rl(Vm,kb):function(n,o,s){for(var c=IB(o),h=GR.f,g=VP.f,f=0;f<c.length;f++){var A=c[f];cI(n,A)||s&&cI(s,A)||h(n,A,g(o,A))}}(Vm,kb,{name:!0});var Pb=Vm.prototype=Ob(kb.prototype,{constructor:Db(1,Vm),message:Db(1,""),name:Db(1,"AggregateError")});rO({global:!0},{AggregateError:Vm});var Nb=Is,vI=hC,tN=Qi(Function.toString);Nb(vI.inspectSource)||(vI.inspectSource=function(n){return tN(n)});var NA,df,MA,Mb=vI.inspectSource,sO=Mb,hf=ri.WeakMap,nN=Is(hf)&&/native code/.test(sO(hf)),Td=Qi,Lb=Qu,_u=tf,iN=Bs,aO=f_,RB=aI,dr="Object already initialized",yI=ri.TypeError;if(nN||hC.state){var jm=hC.state||(hC.state=new(0,ri.WeakMap)),Ol=Td(jm.get),cO=Td(jm.has),xA=Td(jm.set);NA=function(n,o){if(cO(jm,n))throw new yI(dr);return o.facade=n,xA(jm,n,o),o},df=function(n){return Ol(jm,n)||{}},MA=function(n){return cO(jm,n)}}else{var Dl=aO("state");RB[Dl]=!0,NA=function(n,o){if(iN(n,Dl))throw new yI(dr);return o.facade=n,_u(n,Dl,o),o},df=function(n){return iN(n,Dl)?n[Dl]:{}},MA=function(n){return iN(n,Dl)}}var Oo,DB,EI,pf={set:NA,get:df,has:MA,enforce:function(n){return MA(n)?df(n):NA(n,{})},getterFor:function(n){return function(o){var s;if(!Lb(o)||(s=df(o)).type!==n)throw yI("Incompatible receiver, "+n+" required");return s}}},bI=ju,SI=Function.prototype,el=bI&&Object.getOwnPropertyDescriptor,LA=Bs(SI,"name"),CI={EXISTS:LA,PROPER:LA&&"something"===function(){}.name,CONFIGURABLE:LA&&(!bI||bI&&el(SI,"name").configurable)},BA=tf,FA=function(n,o,s,c){c&&c.enumerable?n[o]=s:BA(n,o,s)},Ts=Ls,kB=Is,PB=Fm,Fb=Mm,II=FA,Ub=Fs("iterator"),ff=!1;[].keys&&("next"in(EI=[].keys())?(DB=Fb(Fb(EI)))!==Object.prototype&&(Oo=DB):ff=!0);var wI=null==Oo||Ts(function(){var n={};return Oo[Ub].call(n)!==n});kB((Oo=wI?{}:PB(Oo))[Ub])||II(Oo,Ub,function(){return this});var Vb={IteratorPrototype:Oo,BUGGY_SAFARI_ITERATORS:ff},vu=pp,uO=zo,Eh=Ad.f,lO=tf,UA=Bs,mf=zo?{}.toString:function(){return"[object "+vu(this)+"]"},TI=Fs("toStringTag"),mp=function(n,o,s,c){if(n){var h=s?n:n.prototype;UA(h,TI)||Eh(h,TI,{configurable:!0,value:o}),c&&!uO&&lO(h,"toString",mf)}},RI=Vb.IteratorPrototype,NB=Fm,dO=lh,MB=mp,C_=ts,OI=function(){return this},oN=function(n,o,s,c){var h=o+" Iterator";return n.prototype=NB(RI,{next:dO(+!c,s)}),MB(n,h,!1,!0),C_[h]=OI,n},hO=us,DI=du,sN=oN,jb=Mm,aN=mp,cN=FA,kI=ts,I_=CI.PROPER,VA=Vb.BUGGY_SAFARI_ITERATORS,PI=Fs("iterator"),NI="values",lN="entries",dN=function(){return this},hN=function(n,o,s,c,h,g,f){sN(s,o,c);var A,_,E,S=function(le){if(le===h&&H)return H;if(!VA&&le in M)return M[le];switch(le){case"keys":case NI:case lN:return function(){return new s(this,le)}}return function(){return new s(this)}},I=o+" Iterator",R=!1,M=n.prototype,Q=M[PI]||M["@@iterator"]||h&&M[h],H=!VA&&Q||S(h),Z="Array"==o&&M.entries||Q;if(Z&&(A=jb(Z.call(new n)))!==Object.prototype&&A.next&&(aN(A,I,!0,!0),kI[I]=dN),I_&&h==NI&&Q&&Q.name!==NI&&(R=!0,H=function(){return DI(Q,this)}),h)if(_={values:S(NI),keys:g?H:S("keys"),entries:S(lN)},f)for(E in _)(VA||R||!(E in M))&&cN(M,E,_[E]);else hO({target:o,proto:!0,forced:VA||R},_);return f&&M[PI]!==H&&cN(M,PI,H,{name:h}),kI[o]=H,_},xB=gd,jA=ts,fN=hN,mN="Array Iterator",gN=pf.set,pO=pf.getterFor(mN);fN(Array,"Array",function(n,o){gN(this,{type:mN,target:xB(n),index:0,kind:o})},function(){var n=pO(this),o=n.target,s=n.kind,c=n.index++;return!o||c>=o.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==s?{value:c,done:!1}:"values"==s?{value:o[c],done:!1}:{value:[c,o[c]],done:!1}},"values"),jA.Arguments=jA.Array;var QA=ri.Promise,_N=FA,MI=function(n,o,s){for(var c in o)s&&s.unsafe&&n[c]?n[c]=o[c]:_N(n,c,o[c],s);return n},LB=hu,fO=Ad,vN=ju,AN=Fs("species"),yN=nc,EN=ri.TypeError,HA=function(n,o){if(yN(o,n))return n;throw EN("Incorrect invocation")},xI=Fs("iterator"),LI=!1;try{var mO=0,BI={next:function(){return{done:!!mO++}},return:function(){LI=!0}};BI[xI]=function(){return this},Array.from(BI,function(){throw 2})}catch{}var qs=Qi,Au=Ls,kl=Is,BB=pp,GA=Mb,Qb=function(){},Hb=[],FI=hu("Reflect","construct"),tl=/^\s*(?:class|function)\b/,gO=qs(tl.exec),Gb=!tl.exec(Qb),WA=function(n){if(!kl(n))return!1;try{return FI(Qb,Hb,n),!0}catch{return!1}},Wb=function(n){if(!kl(n))return!1;switch(BB(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Gb||!!gO(tl,GA(n))}catch{return!0}};Wb.sham=!0;var Kb,gp,gf,Pl,bh=!FI||Au(function(){var n;return WA(WA.call)||!WA(Object)||!WA(function(){n=!0})||n})?Wb:WA,Hm=bh,bN=mm,UI=ri.TypeError,VI=jc,w_=Fs("species"),_O=function(n,o){var s,c=VI(n).constructor;return void 0===c||null==(s=VI(c)[w_])?o:function(n){if(Hm(n))return n;throw UI(bN(n)+" is not a constructor")}(s)},vO=Qi([].slice),Us=/(?:ipad|iphone|ipod).*applewebkit/i.test(Xp),lr=ri,Oc=sa,jI=ph,Wn=Is,Gm=Bs,AO=Ls,QI=uI,Wm=vO,nl=VT,yO=Us,SN=Ed,T_=lr.setImmediate,Km=lr.clearImmediate,FB=lr.process,HI=lr.Dispatch,EO=lr.Function,UB=lr.MessageChannel,zb=lr.String,bO=0,Yb={};try{Kb=lr.location}catch{}var SO=function(n){if(Gm(Yb,n)){var o=Yb[n];delete Yb[n],o()}},Sh=function(n){return function(){SO(n)}},R_=function(n){SO(n.data)},CO=function(n){lr.postMessage(zb(n),Kb.protocol+"//"+Kb.host)};T_&&Km||(T_=function(n){var o=Wm(arguments,1);return Yb[++bO]=function(){Oc(Wn(n)?n:EO(n),void 0,o)},gp(bO),bO},Km=function(n){delete Yb[n]},SN?gp=function(n){FB.nextTick(Sh(n))}:HI&&HI.now?gp=function(n){HI.now(Sh(n))}:UB&&!yO?(Pl=(gf=new UB).port2,gf.port1.onmessage=R_,gp=jI(Pl.postMessage,Pl)):lr.addEventListener&&Wn(lr.postMessage)&&!lr.importScripts&&Kb&&"file:"!==Kb.protocol&&!AO(CO)?(gp=CO,lr.addEventListener("message",R_,!1)):gp="onreadystatechange"in nl("script")?function(n){QI.appendChild(nl("script")).onreadystatechange=function(){QI.removeChild(this),SO(n)}}:function(n){setTimeout(Sh(n),0)});var qb,O_,_f,KA,GI,D_,k_,zA,P_={set:T_,clear:Km},IO=ri,wO=/ipad|iphone|ipod/i.test(Xp)&&void 0!==IO.Pebble,WI=/web0s(?!.*chrome)/i.test(Xp),vf=ri,TO=ph,RO=P_.set,aV=Us,CN=wO,jB=WI,OO=Ed,IN=vf.MutationObserver||vf.WebKitMutationObserver,N_=vf.document,Ym=vf.process,KI=vf.Promise,zI=(0,Gg.f)(vf,"queueMicrotask"),qi=zI&&zI.value;qi||(qb=function(){var n,o;for(OO&&(n=Ym.domain)&&n.exit();O_;){o=O_.fn,O_=O_.next;try{o()}catch(s){throw O_?KA():_f=void 0,s}}_f=void 0,n&&n.enter()},aV||OO||jB||!IN||!N_?!CN&&KI&&KI.resolve?((k_=KI.resolve(void 0)).constructor=KI,zA=TO(k_.then,k_),KA=function(){zA(qb)}):OO?KA=function(){Ym.nextTick(qb)}:(RO=TO(RO,vf),KA=function(){RO(qb)}):(GI=!0,D_=N_.createTextNode(""),new IN(qb).observe(D_,{characterData:!0}),KA=function(){D_.data=GI=!GI}));var wN=qi||function(n){var o={fn:n,next:void 0};_f&&(_f.next=o),O_||(O_=o,KA()),_f=o},Rd={},Nl=vd,TN=function(n){var o,s;this.promise=new n(function(c,h){if(void 0!==o||void 0!==s)throw TypeError("Bad Promise constructor");o=c,s=h}),this.resolve=Nl(o),this.reject=Nl(s)};Rd.f=function(n){return new TN(n)};var RN=jc,ON=Qu,YI=Rd,rl=function(n,o){if(RN(n),ON(o)&&o.constructor===n)return o;var s=YI.f(n);return(0,s.resolve)(o),s.promise},DN=ri,Jb=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}},qI=function(){this.head=null,this.tail=null};qI.prototype={add:function(n){var o={item:n,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var $b,M_,xo,kN="object"==typeof window,Xb=us,Od=ri,Zb=hu,Ch=du,e0=QA,t0=MI,DO=mp,kO=vd,n0=Is,HB=Qu,YA=HA,PO=Mb,Ao=Ro,oc=_O,yo=P_.set,Ih=wN,qA=rl,qm=Rd,wh=Jb,NO=qI,sc=pf,JA=EC,PN=kN,$A=Ed,MO=zg,NN=Fs("species"),Dd="Promise",JI=sc.getterFor(Dd),XA=sc.set,MN=sc.getterFor(Dd),_p=e0,o0=e0&&e0.prototype,xN=Od.TypeError,xO=Od.document,LO=Od.process,il=qm.f,XI=il,BO=!!(xO&&xO.createEvent&&Od.dispatchEvent),Jm=n0(Od.PromiseRejectionEvent),ZI="unhandledrejection",ew=JA(Dd,function(){var n=PO(_p),o=n!==String(_p);if(!o&&66===MO||!o0.finally)return!0;if(MO>=51&&/native code/.test(n))return!1;var s=new _p(function(h){h(1)}),c=function(h){h(function(){},function(){})};return(s.constructor={})[NN]=c,!(s.then(function(){})instanceof c)||!o&&PN&&!Jm}),LN=ew||!function(n,o){if(!o&&!LI)return!1;var s=!1;try{var c={};c[xI]=function(){return{next:function(){return{done:s=!0}}}},n(c)}catch{}return s}(function(n){_p.all(n).catch(function(){})}),BN=function(n){var o;return!(!HB(n)||!n0(o=n.then))&&o},tw=function(n,o){var s,c,h,g=o.value,f=1==o.state,A=f?n.ok:n.fail,_=n.resolve,E=n.reject,S=n.domain;try{A?(f||(2===o.rejection&&UO(o),o.rejection=1),!0===A?s=g:(S&&S.enter(),s=A(g),S&&(S.exit(),h=!0)),s===n.promise?E(xN("Promise-chain cycle")):(c=BN(s))?Ch(c,s,_,E):_(s)):E(g)}catch(I){S&&!h&&S.exit(),E(I)}},Af=function(n,o){n.notified||(n.notified=!0,Ih(function(){for(var s,c=n.reactions;s=c.get();)tw(s,n);n.notified=!1,o&&!n.rejection&&FO(n)}))},FN=function(n,o,s){var c,h;BO?((c=xO.createEvent("Event")).promise=o,c.reason=s,c.initEvent(n,!1,!0),Od.dispatchEvent(c)):c={promise:o,reason:s},!Jm&&(h=Od["on"+n])?h(c):n===ZI&&function(n,o){var s=DN.console;s&&s.error&&(1==arguments.length?s.error(n):s.error(n,o))}("Unhandled promise rejection",s)},FO=function(n){Ch(yo,Od,function(){var o,s=n.facade,c=n.value;if(s0(n)&&(o=wh(function(){$A?LO.emit("unhandledRejection",c,s):FN(ZI,s,c)}),n.rejection=$A||s0(n)?2:1,o.error))throw o.value})},s0=function(n){return 1!==n.rejection&&!n.parent},UO=function(n){Ch(yo,Od,function(){var o=n.facade;$A?LO.emit("rejectionHandled",o):FN("rejectionhandled",o,n.value)})},x_=function(n,o,s){return function(c){n(o,c,s)}},ZA=function(n,o,s){n.done||(n.done=!0,s&&(n=s),n.value=o,n.state=2,Af(n,!0))},VO=function(n,o,s){if(!n.done){n.done=!0,s&&(n=s);try{if(n.facade===o)throw xN("Promise can't be resolved itself");var c=BN(o);c?Ih(function(){var h={done:!1};try{Ch(c,o,x_(VO,h,n),x_(ZA,h,n))}catch(g){ZA(h,g,n)}}):(n.value=o,n.state=1,Af(n,!1))}catch(h){ZA({done:!1},h,n)}}};ew&&(o0=(_p=function(n){YA(this,o0),kO(n),Ch($b,this);var o=JI(this);try{n(x_(VO,o),x_(ZA,o))}catch(s){ZA(o,s)}}).prototype,($b=function(n){XA(this,{type:Dd,done:!1,notified:!1,parent:!1,reactions:new NO,rejection:!1,state:0,value:void 0})}).prototype=t0(o0,{then:function(n,o){var s=MN(this),c=il(oc(this,_p));return s.parent=!0,c.ok=!n0(n)||n,c.fail=n0(o)&&o,c.domain=$A?LO.domain:void 0,0==s.state?s.reactions.add(c):Ih(function(){tw(c,s)}),c.promise},catch:function(n){return this.then(void 0,n)}}),M_=function(){var n=new $b,o=JI(n);this.promise=n,this.resolve=x_(VO,o),this.reject=x_(ZA,o)},qm.f=il=function(n){return n===_p||n===xo?new M_(n):XI(n)}),Xb({global:!0,wrap:!0,forced:ew},{Promise:_p}),DO(_p,Dd,!1,!0),function(n){var o=LB(n);vN&&o&&!o[AN]&&(0,fO.f)(o,AN,{configurable:!0,get:function(){return this}})}(Dd),xo=Zb(Dd),Xb({target:Dd,stat:!0,forced:ew},{reject:function(n){var o=il(this);return Ch(o.reject,void 0,n),o.promise}}),Xb({target:Dd,stat:!0,forced:!0},{resolve:function(n){return qA(this===xo?_p:this,n)}}),Xb({target:Dd,stat:!0,forced:LN},{all:function(n){var o=this,s=il(o),c=s.resolve,h=s.reject,g=wh(function(){var f=kO(o.resolve),A=[],_=0,E=1;Ao(n,function(S){var I=_++,R=!1;E++,Ch(f,o,S).then(function(M){R||(R=!0,A[I]=M,--E||c(A))},h)}),--E||c(A)});return g.error&&h(g.value),s.promise},race:function(n){var o=this,s=il(o),c=s.reject,h=wh(function(){var g=kO(o.resolve);Ao(n,function(f){Ch(g,o,f).then(s.resolve,c)})});return h.error&&c(h.value),s.promise}});var UN=du,jO=vd,QO=Rd,HO=Jb,GO=Ro;us({target:"Promise",stat:!0},{allSettled:function(n){var o=this,s=QO.f(o),c=s.resolve,h=s.reject,g=HO(function(){var f=jO(o.resolve),A=[],_=0,E=1;GO(n,function(S){var I=_++,R=!1;E++,UN(f,o,S).then(function(M){R||(R=!0,A[I]={status:"fulfilled",value:M},--E||c(A))},function(M){R||(R=!0,A[I]={status:"rejected",reason:M},--E||c(A))})}),--E||c(A)});return g.error&&h(g.value),s.promise}});var WO=vd,nw=hu,VN=du,KO=Rd,zO=Jb,jN=Ro,rw="No one promise resolved";us({target:"Promise",stat:!0},{any:function(n){var o=this,s=nw("AggregateError"),c=KO.f(o),h=c.resolve,g=c.reject,f=zO(function(){var A=WO(o.resolve),_=[],E=0,S=1,I=!1;jN(n,function(R){var M=E++,Q=!1;S++,VN(A,o,R).then(function(H){Q||I||(I=!0,h(H))},function(H){Q||I||(Q=!0,_[M]=H,--S||g(new s(_,rw)))})}),--S||g(new s(_,rw))});return f.error&&g(f.value),c.promise}});var iw=QA,ow=hu,YO=Is,QN=_O,L_=rl;us({target:"Promise",proto:!0,real:!0,forced:!!iw&&Ls(function(){iw.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var o=QN(this,ow("Promise")),s=YO(n);return this.then(s?function(c){return L_(o,n()).then(function(){return c})}:n,s?function(c){return L_(o,n()).then(function(){throw c})}:n)}});var ey=Qi,HN=wC,cV=Rc,uV=Qv,GB=ey("".charAt),WB=ey("".charCodeAt),KB=ey("".slice),zB=function(n){return function(o,s){var c,h,g=cV(uV(o)),f=HN(s),A=g.length;return f<0||f>=A?n?"":void 0:(c=WB(g,f))<55296||c>56319||f+1===A||(h=WB(g,f+1))<56320||h>57343?n?GB(g,f):c:n?KB(g,f,f+2):h-56320+(c-55296<<10)+65536}},YB={codeAt:zB(!1),charAt:zB(!0)},GN=YB.charAt,ty=Rc,JO=hN,ny="String Iterator",B_=pf.set,yf=pf.getterFor(ny);JO(String,"String",function(n){B_(this,{type:ny,string:ty(n),index:0})},function(){var n,o=yf(this),s=o.string,c=o.index;return c>=s.length?{value:void 0,done:!0}:(n=GN(s,c),o.index+=n.length,{value:n,done:!1})});var lV=ip.Promise,WN=ri,sw=pp,KN=tf,Yn=ts,$s=Fs("toStringTag");for(var Dc in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Rr=WN[Dc],Ml=Rr&&Rr.prototype;Ml&&sw(Ml)!==$s&&KN(Ml,$s,Dc),Yn[Dc]=Yn.Array}var Th=lV,Qn=Th,qB=Vi,JB=O,Kc=iu,ry=Cn,$B=u_,aw=Error.prototype.toString,XO=k(function(){if(JB){var n=ry(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==aw.call(n))return!0}return"2: 1"!==aw.call({message:1,name:2})||"Error"!==aw.call({})})?function(){var n=Kc(this),o=$B(n.name,"Error"),s=$B(n.message);return o?s?o+": "+s:o:s}:aw,ZO={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},cw=ba,uw=qt,ca=k,iy=Cn,YN=be,zr=fo.f,XB=kC.f,eD=eh.exports,lw=Ac,qN=Sv,tD=iu,dw=XO,hw=u_,F_=ZO,nD=hb,oy=Pu,ua=O,xl="DOMException",sy=uw("Error"),la=uw(xl)||function(){try{(new(uw("MessageChannel")||function(n){try{if(qB)return Function('return require("'+n+'")')()}catch{}}("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(n){if("DATA_CLONE_ERR"==n.name&&25==n.code)return n.constructor}}(),pw=sy.prototype,vp=oy.set,eF=oy.getterFor(xl),fw="stack"in sy(xl),rD=function(n){return lw(F_,n)&&F_[n].m?F_[n].c:0},iD=function(){qN(this,oD);var n=arguments.length,o=hw(n<1?void 0:arguments[0]),s=hw(n<2?void 0:arguments[1],"Error"),c=rD(s);if(vp(this,{type:xl,name:s,message:o,code:c}),ua||(this.name=s,this.message=o,this.code=c),fw){var h=sy(o);h.name=xl,zr(this,"stack",YN(1,nD(h.stack,1)))}},oD=iD.prototype=iy(pw),JN=function(n){return{enumerable:!0,configurable:!0,get:n}},c0=function(n){return JN(function(){return eF(this)[n]})};ua&&XB(oD,{name:c0("name"),message:c0("message"),code:c0("code")}),zr(oD,"constructor",YN(1,iD));var u0=ca(function(){return!(new la instanceof sy)}),sD=u0||ca(function(){return pw.toString!==dw||"2: 1"!==String(new la(1,2))}),aD=u0||ca(function(){return 25!==new la(1,"DataCloneError").code});cw({global:!0,forced:u0},{DOMException:u0?iD:la});var U_=uw(xl),mw=U_.prototype;for(var l0 in sD&&la===U_&&eD(mw,"toString",dw),aD&&ua&&la===U_&&zr(mw,"code",JN(function(){return rD(tD(this).name)})),F_)if(lw(F_,l0)){var gw=F_[l0],ay=gw.s,_w=YN(6,gw.c);lw(U_,ay)||zr(U_,ay,_w),lw(mw,ay)||zr(mw,ay,_w)}var cD=ba,d0=qt,$m=be,V_=fo.f,vw=Ac,$N=Sv,tF=zu,XN=u_,uD=ZO,nF=hb,cy="DOMException",Oh=d0("Error"),h0=d0(cy),Aw=function(){$N(this,rF);var n=arguments.length,o=XN(n<1?void 0:arguments[0]),s=XN(n<2?void 0:arguments[1],"Error"),c=new h0(o,s),h=Oh(o);return h.name=cy,V_(c,"stack",$m(1,nF(h.stack,1))),tF(c,this,Aw),c},rF=Aw.prototype=h0.prototype,iF="stack"in Oh(cy),oF="stack"in new h0(1,2),ZN=iF&&!oF;cD({global:!0,forced:ZN},{DOMException:ZN?Aw:h0});var p0=d0(cy),lD=p0.prototype;if(lD.constructor!==p0)for(var uy in V_(lD,"constructor",$m(1,p0)),uD)if(vw(uD,uy)){var dD=uD[uy],hD=dD.s;vw(p0,hD)||V_(p0,hD,$m(6,dD.c))}var yw="DOMException";cE(qt(yw),yw);var Ef=ue,Ew=eh.exports,bw=cA,f0=k,pD=Po,Sw=od,Cw=pD("species"),j_=RegExp.prototype,fD=ue,sF=xp,aF=sA,cF=Ye,mD=fD("".charAt),gD=fD("".charCodeAt),eM=fD("".slice),_D=function(n){return function(o,s){var c,h,g=aF(cF(o)),f=sF(s),A=g.length;return f<0||f>=A?n?"":void 0:(c=gD(g,f))<55296||c>56319||f+1===A||(h=gD(g,f+1))<56320||h>57343?n?mD(g,f):c:n?eM(g,f,f+2):h-56320+(c-55296<<10)+65536}},tM=(_D(!1),_D(!0)),m0=ue,vD=rd,AD=Math.floor,Iw=m0("".charAt),nM=m0("".replace),g0=m0("".slice),_0=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uF=/\$([$&'`]|\d{1,2})/g,ww=ae,ly=iu,rM=rt,iM=Ue,lF=cA,dF=G.TypeError,Zt=tc,oM=ae,Q_=ue,pF=k,fF=iu,Ll=rt,dV=xp,Tw=ih,v0=sA,Xm=Ye,Rw=function(n,o,s){return o+(s?tM(n,o).length:1)},bf=$e,A0=function(n,o,s,c,h,g){var f=s+n.length,A=c.length,_=uF;return void 0!==h&&(h=vD(h),_=_0),nM(g,_,function(E,S){var I;switch(Iw(S,0)){case"$":return"$";case"&":return n;case"`":return g0(o,0,s);case"'":return g0(o,f);case"<":I=h[g0(S,1,-1)];break;default:var R=+S;if(0===R)return E;if(R>A){var M=AD(R/10);return 0===M?E:M<=A?void 0===c[M-1]?Iw(S,1):c[M-1]+Iw(S,1):E}I=c[R-1]}return void 0===I?"":I})},hV=function(n,o){var s=n.exec;if(rM(s)){var c=ww(s,n,o);return null!==c&&ly(c),c}if("RegExp"===iM(n))return ww(lF,n,o);throw dF("RegExp#exec called on incompatible receiver")},Dh=Po("replace"),kd=Math.max,yD=Math.min,mF=Q_([].concat),Ow=Q_([].push),oi=Q_("".indexOf),H_=Q_("".slice),y0="$0"==="a".replace(/./,"$0"),E0=!!/./[Dh]&&""===/./[Dh]("a","$0");!function(n,o,s,c){var h=pD(n),g=!f0(function(){var E={};return E[h]=function(){return 7},7!=""[n](E)}),f=g&&!f0(function(){var E=!1,S=/a/;return"split"===n&&((S={}).constructor={},S.constructor[Cw]=function(){return S},S.flags="",S[h]=/./[h]),S.exec=function(){return E=!0,null},S[h](""),!E});if(!g||!f||s){var A=Ef(/./[h]),_=o(h,""[n],function(E,S,I,R,M){var Q=Ef(E),H=S.exec;return H===bw||H===j_.exec?g&&!M?{done:!0,value:A(S,I,R)}:{done:!0,value:Q(I,S,R)}:{done:!1}});Ew(String.prototype,n,_[0]),Ew(j_,h,_[1])}c&&Sw(j_[h],"sham",!0)}("replace",function(n,o,s){var c=E0?"$":"$0";return[function(h,g){var f=Xm(this),A=null==h?void 0:bf(h,Dh);return A?oM(A,h,f,g):oM(o,v0(f),h,g)},function(h,g){var f=fF(this),A=v0(h);if("string"==typeof g&&-1===oi(g,c)&&-1===oi(g,"$<")){var _=s(o,f,A,g);if(_.done)return _.value}var E=Ll(g);E||(g=v0(g));var S=f.global;if(S){var I=f.unicode;f.lastIndex=0}for(var R=[];;){var M=hV(f,A);if(null===M||(Ow(R,M),!S))break;""===v0(M[0])&&(f.lastIndex=Rw(A,Tw(f.lastIndex),I))}for(var Q,H="",Z=0,le=0;le<R.length;le++){for(var ge=v0((M=R[le])[0]),Se=kd(yD(dV(M.index),A.length),0),Ne=[],nt=1;nt<M.length;nt++)Ow(Ne,void 0===(Q=M[nt])?Q:String(Q));var Nt=M.groups;if(E){var Vt=mF([ge],Ne,Se,A);void 0!==Nt&&Ow(Vt,Nt);var Dt=v0(Zt(g,void 0,Vt))}else Dt=A0(ge,A,Se,Ne,Nt,g);Se>=Z&&(H+=H_(A,Z,Se)+Dt,Z=Se+ge.length)}return H+H_(A,Z)}]},!!pF(function(){var n=/./;return n.exec=function(){var o=[];return o.groups={a:"7"},o},"7"!=="".replace(n,"$<a>")})||!y0||E0);var Dw=$t,ED=Ue,sM=Po("match"),bD=O,G_=G,ol=ue,dy=sh,aM=zu,b0=od,Bl=fo.f,kh=Wf.f,SD=Mr,kw=sA,CD=uB,zc=lB,Xs=eh.exports,Zs=k,Mi=Ac,Rs=Pu.enforce,Vr=lE,uM=nb,ID=dR,hy=Po("match"),Ap=G_.RegExp,py=Ap.prototype,lM=G_.SyntaxError,dM=ol(CD),sl=ol(py.exec),ac=ol("".charAt),fy=ol("".replace),Pd=ol("".indexOf),Nd=ol("".slice),al=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Md=/a/g,xd=/a/g,wD=new Ap(Md)!==Md,Zm=zc.MISSED_STICKY,S0=zc.UNSUPPORTED_Y;if(dy("RegExp",bD&&(!wD||Zm||uM||ID||Zs(function(){return xd[hy]=!1,Ap(Md)!=Md||Ap(xd)==xd||"/a/i"!=Ap(Md,"i")})))){for(var Cf=function(n,o){var s,c,h,g,f,A,_=SD(py,this),E=function(n){var o;return Dw(n)&&(void 0!==(o=n[sM])?!!o:"RegExp"==ED(n))}(n),S=void 0===o,I=[],R=n;if(!_&&E&&S&&n.constructor===Cf)return n;if((E||SD(py,n))&&(n=n.source,S&&(o="flags"in R?R.flags:dM(R))),n=void 0===n?"":kw(n),o=void 0===o?"":kw(o),R=n,uM&&"dotAll"in Md&&(c=!!o&&Pd(o,"s")>-1)&&(o=fy(o,/s/g,"")),s=o,Zm&&"sticky"in Md&&(h=!!o&&Pd(o,"y")>-1)&&S0&&(o=fy(o,/y/g,"")),ID&&(n=(g=function(M){for(var Q,H=M.length,Z=0,le="",ge=[],Se={},Ne=!1,nt=!1,Nt=0,Vt="";Z<=H;Z++){if("\\"===(Q=ac(M,Z)))Q+=ac(M,++Z);else if("]"===Q)Ne=!1;else if(!Ne)switch(!0){case"["===Q:Ne=!0;break;case"("===Q:sl(al,Nd(M,Z+1))&&(Z+=2,nt=!0),le+=Q,Nt++;continue;case">"===Q&&nt:if(""===Vt||Mi(Se,Vt))throw new lM("Invalid capture group name");Se[Vt]=!0,ge[ge.length]=[Vt,Nt],nt=!1,Vt="";continue}nt?Vt+=Q:le+=Q}return[le,ge]}(n))[0],I=g[1]),f=aM(Ap(n,o),_?this:py,Cf),(c||h||I.length)&&(A=Rs(f),c&&(A.dotAll=!0,A.raw=Cf(function(M){for(var Q,H=M.length,Z=0,le="",ge=!1;Z<=H;Z++)"\\"!==(Q=ac(M,Z))?ge||"."!==Q?("["===Q?ge=!0:"]"===Q&&(ge=!1),le+=Q):le+="[\\s\\S]":le+=Q+ac(M,++Z);return le}(n),s)),h&&(A.sticky=!0),I.length&&(A.groups=I)),n!==R)try{b0(f,"source",""===R?"(?:)":R)}catch{}return f},eg=function(n){n in Cf||Bl(Cf,n,{configurable:!0,get:function(){return Ap[n]},set:function(o){Ap[n]=o}})},tg=kh(Ap),Do=0;tg.length>Do;)eg(tg[Do++]);py.constructor=Cf,Cf.prototype=py,Xs(G_,"RegExp",Cf)}Vr("RegExp");var W_=Ue,yp=Pu.get,Ph=RegExp.prototype,Va=G.TypeError;O&&nb&&(0,fo.f)(Ph,"dotAll",{configurable:!0,get:function(){if(this!==Ph){if("RegExp"===W_(this))return!!yp(this).dotAll;throw Va("Incompatible receiver, RegExp required")}}});const Gr=MP;function _i(n,o){const s=n&&n.navigator;if(!s.mediaDevices)return;const c=function(f){if("object"!=typeof f||f.mandatory||f.optional)return f;const A={};return Object.keys(f).forEach(_=>{if("require"===_||"advanced"===_||"mediaSource"===_)return;const E="object"==typeof f[_]?f[_]:{ideal:f[_]};void 0!==E.exact&&"number"==typeof E.exact&&(E.min=E.max=E.exact);const S=function(I,R){return I?I+R.charAt(0).toUpperCase()+R.slice(1):"deviceId"===R?"sourceId":R};if(void 0!==E.ideal){A.optional=A.optional||[];let I={};"number"==typeof E.ideal?(I[S("min",_)]=E.ideal,A.optional.push(I),I={},I[S("max",_)]=E.ideal,A.optional.push(I)):(I[S("",_)]=E.ideal,A.optional.push(I))}void 0!==E.exact&&"number"!=typeof E.exact?(A.mandatory=A.mandatory||{},A.mandatory[S("",_)]=E.exact):["min","max"].forEach(I=>{void 0!==E[I]&&(A.mandatory=A.mandatory||{},A.mandatory[S(I,_)]=E[I])})}),f.advanced&&(A.optional=(A.optional||[]).concat(f.advanced)),A},h=function(f,A){if(o.version>=61)return A(f);if((f=JSON.parse(JSON.stringify(f)))&&"object"==typeof f.audio){const _=function(E,S,I){S in E&&!(I in E)&&(E[I]=E[S],delete E[S])};_((f=JSON.parse(JSON.stringify(f))).audio,"autoGainControl","googAutoGainControl"),_(f.audio,"noiseSuppression","googNoiseSuppression"),f.audio=c(f.audio)}if(f&&"object"==typeof f.video){let _=f.video.facingMode;_=_&&("object"==typeof _?_:{ideal:_});const E=o.version<66;if(_&&("user"===_.exact||"environment"===_.exact||"user"===_.ideal||"environment"===_.ideal)&&(!s.mediaDevices.getSupportedConstraints||!s.mediaDevices.getSupportedConstraints().facingMode||E)){let S;if(delete f.video.facingMode,"environment"===_.exact||"environment"===_.ideal?S=["back","rear"]:"user"!==_.exact&&"user"!==_.ideal||(S=["front"]),S)return s.mediaDevices.enumerateDevices().then(I=>{let R=(I=I.filter(M=>"videoinput"===M.kind)).find(M=>S.some(Q=>M.label.toLowerCase().includes(Q)));return!R&&I.length&&S.includes("back")&&(R=I[I.length-1]),R&&(f.video.deviceId=_.exact?{exact:R.deviceId}:{ideal:R.deviceId}),f.video=c(f.video),Gr("chrome: "+JSON.stringify(f)),A(f)})}f.video=c(f.video)}return Gr("chrome: "+JSON.stringify(f)),A(f)},g=function(f){return o.version>=64?f:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[f.name]||f.name,message:f.message,constraint:f.constraint||f.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(s.getUserMedia=function(f,A,_){h(f,E=>{s.webkitGetUserMedia(E,A,S=>{_&&_(g(S))})})}.bind(s),s.mediaDevices.getUserMedia){const f=s.mediaDevices.getUserMedia.bind(s.mediaDevices);s.mediaDevices.getUserMedia=function(A){return h(A,_=>f(_).then(E=>{if(_.audio&&!E.getAudioTracks().length||_.video&&!E.getVideoTracks().length)throw E.getTracks().forEach(S=>{S.stop()}),new DOMException("","NotFoundError");return E},E=>Qn.reject(g(E))))}}}function RD(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Nh(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(s){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=s)},enumerable:!0,configurable:!0});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(f=>f.track&&f.track.id===c.track.id):{track:c.track};const g=new Event("track");g.track=c.track,g.receiver=h,g.transceiver={receiver:h},g.streams=[s.stream],this.dispatchEvent(g)}),s.stream.getTracks().forEach(c=>{let h;h=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(f=>f.track&&f.track.id===c.id):{track:c};const g=new Event("track");g.track=c,g.receiver=h,g.transceiver={receiver:h},g.streams=[s.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),o.apply(this,arguments)}}else It(n,"track",o=>(o.transceiver||Object.defineProperty(o,"transceiver",{value:{receiver:o.receiver}}),o))}function Fl(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const o=function(h,g){return{track:g,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===g.kind?h.createDTMFSender(g):null),this._dtmf},_pc:h}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(f,A){let _=h.apply(this,arguments);return _||(_=o(this,f),this._senders.push(_)),_};const g=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(f){g.apply(this,arguments);const A=this._senders.indexOf(f);-1!==A&&this._senders.splice(A,1)}}const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],s.apply(this,[h]),h.getTracks().forEach(g=>{this._senders.push(o(this,g))})};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],c.apply(this,[h]),h.getTracks().forEach(g=>{const f=this._senders.find(A=>A.track===g);f&&this._senders.splice(this._senders.indexOf(f),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const s=o.apply(this,[]);return s.forEach(c=>c._pc=this),s},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function my(n){if(!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,c,h]=arguments;if(arguments.length>0&&"function"==typeof s)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof s))return o.apply(this,[]);const g=function(A){const _={};return A.result().forEach(E=>{const S={id:E.id,timestamp:E.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[E.type]||E.type};E.names().forEach(I=>{S[I]=E.stat(I)}),_[S.id]=S}),_},f=function(A){return new Map(Object.keys(A).map(_=>[_,A[_]]))};return arguments.length>=2?o.apply(this,[function(_){c(f(g(_)))},s]):new Qn((A,_)=>{o.apply(this,[function(E){A(f(g(E)))},_])}).then(c,h)}}function Ul(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const s=n.RTCPeerConnection.prototype.getSenders;s&&(n.RTCPeerConnection.prototype.getSenders=function(){const h=s.apply(this,[]);return h.forEach(g=>g._pc=this),h});const c=n.RTCPeerConnection.prototype.addTrack;c&&(n.RTCPeerConnection.prototype.addTrack=function(){const h=c.apply(this,arguments);return h._pc=this,h}),n.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(g=>h_(g,h.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const s=n.RTCPeerConnection.prototype.getReceivers;s&&(n.RTCPeerConnection.prototype.getReceivers=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c}),It(n,"track",c=>(c.receiver._pc=c.srcElement,c)),n.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>h_(h,c.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const o=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const s=arguments[0];let c,h,g;return this.getSenders().forEach(f=>{f.track===s&&(c?g=!0:c=f)}),this.getReceivers().forEach(f=>(f.track===s&&(h?g=!0:h=f),f.track===s)),g||c&&h?Qn.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():Qn.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}function gy(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(g,f){if(!f)return o.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=o.apply(this,arguments);return this._shimmedLocalStreams[f.id]?-1===this._shimmedLocalStreams[f.id].indexOf(A)&&this._shimmedLocalStreams[f.id].push(A):this._shimmedLocalStreams[f.id]=[f,A],A};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(_=>{if(this.getSenders().find(E=>E.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const f=this.getSenders();s.apply(this,arguments);const A=this.getSenders().filter(_=>-1===f.indexOf(_));this._shimmedLocalStreams[g.id]=[g].concat(A)};const c=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],c.apply(this,arguments)};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(f=>{const A=this._shimmedLocalStreams[f].indexOf(g);-1!==A&&this._shimmedLocalStreams[f].splice(A,1),1===this._shimmedLocalStreams[f].length&&delete this._shimmedLocalStreams[f]}),h.apply(this,arguments)}}function Lo(n,o){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&o.version>=65)return gy(n);const s=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const E=s.apply(this);return this._reverseStreams=this._reverseStreams||{},E.map(S=>this._reverseStreams[S.id])};const c=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(E){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},E.getTracks().forEach(S=>{if(this.getSenders().find(I=>I.track===S))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[E.id]){const S=new n.MediaStream(E.getTracks());this._streams[E.id]=S,this._reverseStreams[S.id]=E,E=S}c.apply(this,[E])};const h=n.RTCPeerConnection.prototype.removeStream;function g(E,S){let I=S.sdp;return Object.keys(E._reverseStreams||[]).forEach(R=>{const M=E._reverseStreams[R];I=I.replace(new RegExp(E._streams[M.id].id,"g"),M.id)}),new RTCSessionDescription({type:S.type,sdp:I})}function f(E,S){let I=S.sdp;return Object.keys(E._reverseStreams||[]).forEach(R=>{const M=E._reverseStreams[R],Q=E._streams[M.id];I=I.replace(new RegExp(M.id,"g"),Q.id)}),new RTCSessionDescription({type:S.type,sdp:I})}n.RTCPeerConnection.prototype.removeStream=function(E){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[E.id]||E]),delete this._reverseStreams[this._streams[E.id]?this._streams[E.id].id:E.id],delete this._streams[E.id]},n.RTCPeerConnection.prototype.addTrack=function(E,S){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const I=[].slice.call(arguments,1);if(1!==I.length||!I[0].getTracks().find(Q=>Q===E))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Q=>Q.track===E))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const M=this._streams[S.id];if(M)M.addTrack(E),Qn.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Q=new n.MediaStream([E]);this._streams[S.id]=Q,this._reverseStreams[Q.id]=S,this.addStream(Q)}return this.getSenders().find(Q=>Q.track===E)},["createOffer","createAnswer"].forEach(function(E){const S=n.RTCPeerConnection.prototype[E],I={[E](){const R=arguments;return arguments.length&&"function"==typeof arguments[0]?S.apply(this,[M=>{const Q=g(this,M);R[0].apply(null,[Q])},M=>{R[1]&&R[1].apply(null,M)},arguments[2]]):S.apply(this,arguments).then(M=>g(this,M))}};n.RTCPeerConnection.prototype[E]=I[E]});const A=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=f(this,arguments[0]),A.apply(this,arguments)):A.apply(this,arguments)};const _=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const E=_.get.apply(this);return""===E.type?E:g(this,E)}}),n.RTCPeerConnection.prototype.removeTrack=function(E){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!E._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(E._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let S;this._streams=this._streams||{},Object.keys(this._streams).forEach(I=>{this._streams[I].getTracks().find(R=>E.track===R)&&(S=this._streams[I])}),S&&(1===S.getTracks().length?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(E.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Pw(n,o){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const c=n.RTCPeerConnection.prototype[s],h={[s](){return arguments[0]=new("addIceCandidate"===s?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};n.RTCPeerConnection.prototype[s]=h[s]})}function Bo(n,o){It(n,"negotiationneeded",s=>{const c=s.target;if(!(o.version<72||c.getConfiguration&&"plan-b"===c.getConfiguration().sdpSemantics)||"stable"===c.signalingState)return s})}var _y=Object.freeze({__proto__:null,shimMediaStream:RD,shimOnTrack:Nh,shimGetSendersWithDtmf:Fl,shimGetStats:my,shimSenderReceiverGetStats:Ul,shimAddTrackRemoveTrackWithNative:gy,shimAddTrackRemoveTrack:Lo,shimPeerConnection:Pw,fixNegotiationNeeded:Bo,shimGetUserMedia:_i,shimGetDisplayMedia:function(n,o){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&("function"==typeof o?n.navigator.mediaDevices.getDisplayMedia=function(s){return o(s).then(c=>{const h=s.video&&s.video.width,g=s.video&&s.video.height;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:s.video&&s.video.frameRate||3}},h&&(s.video.mandatory.maxWidth=h),g&&(s.video.mandatory.maxHeight=g),n.navigator.mediaDevices.getUserMedia(s)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),If={exports:{}};!function(n){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(s){return s.trim().split("\n").map(function(c){return c.trim()})},o.splitSections=function(s){return s.split("\nm=").map(function(c,h){return(h>0?"m="+c:c).trim()+"\r\n"})},o.getDescription=function(s){var c=o.splitSections(s);return c&&c[0]},o.getMediaSections=function(s){var c=o.splitSections(s);return c.shift(),c},o.matchPrefix=function(s,c){return o.splitLines(s).filter(function(h){return 0===h.indexOf(c)})},o.parseCandidate=function(s){for(var c,h={foundation:(c=0===s.indexOf("a=candidate:")?s.substring(12).split(" "):s.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},o.writeCandidate=function(s){var c=[];c.push(s.foundation),c.push(s.component),c.push(s.protocol.toUpperCase()),c.push(s.priority),c.push(s.address||s.ip),c.push(s.port);var h=s.type;return c.push("typ"),c.push(h),"host"!==h&&s.relatedAddress&&s.relatedPort&&(c.push("raddr"),c.push(s.relatedAddress),c.push("rport"),c.push(s.relatedPort)),s.tcpType&&"tcp"===s.protocol.toLowerCase()&&(c.push("tcptype"),c.push(s.tcpType)),(s.usernameFragment||s.ufrag)&&(c.push("ufrag"),c.push(s.usernameFragment||s.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(s){return s.substr(14).split(" ")},o.parseRtpMap=function(s){var c=s.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},o.writeRtpMap=function(s){var c=s.payloadType;void 0!==s.preferredPayloadType&&(c=s.preferredPayloadType);var h=s.channels||s.numChannels||1;return"a=rtpmap:"+c+" "+s.name+"/"+s.clockRate+(1!==h?"/"+h:"")+"\r\n"},o.parseExtmap=function(s){var c=s.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(s){return"a=extmap:"+(s.id||s.preferredId)+(s.direction&&"sendrecv"!==s.direction?"/"+s.direction:"")+" "+s.uri+"\r\n"},o.parseFmtp=function(s){for(var c,h={},g=s.substr(s.indexOf(" ")+1).split(";"),f=0;f<g.length;f++)h[(c=g[f].trim().split("="))[0].trim()]=c[1];return h},o.writeFmtp=function(s){var c="",h=s.payloadType;if(void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.parameters&&Object.keys(s.parameters).length){var g=[];Object.keys(s.parameters).forEach(function(f){g.push(s.parameters[f]?f+"="+s.parameters[f]:f)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},o.parseRtcpFb=function(s){var c=s.substr(s.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(s){var c="",h=s.payloadType;return void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.rtcpFeedback&&s.rtcpFeedback.length&&s.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(s){var c=s.indexOf(" "),h={ssrc:parseInt(s.substr(7,c-7),10)},g=s.indexOf(":",c);return g>-1?(h.attribute=s.substr(c+1,g-c-1),h.value=s.substr(g+1)):h.attribute=s.substr(c+1),h},o.parseSsrcGroup=function(s){var c=s.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},o.getMid=function(s){var c=o.matchPrefix(s,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(s){var c=s.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(s,c){return{role:"auto",fingerprints:o.matchPrefix(s+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(s,c){var h="a=setup:"+c+"\r\n";return s.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},o.getIceParameters=function(s,c){var h=o.splitLines(s);return{usernameFragment:(h=h.concat(o.splitLines(c))).filter(function(g){return 0===g.indexOf("a=ice-ufrag:")})[0].substr(12),password:h.filter(function(g){return 0===g.indexOf("a=ice-pwd:")})[0].substr(10)}},o.writeIceParameters=function(s){return"a=ice-ufrag:"+s.usernameFragment+"\r\na=ice-pwd:"+s.password+"\r\n"},o.parseRtpParameters=function(s){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=o.splitLines(s)[0].split(" "),g=3;g<h.length;g++){var f=h[g],A=o.matchPrefix(s,"a=rtpmap:"+f+" ")[0];if(A){var _=o.parseRtpMap(A),E=o.matchPrefix(s,"a=fmtp:"+f+" ");switch(_.parameters=E.length?o.parseFmtp(E[0]):{},_.rtcpFeedback=o.matchPrefix(s,"a=rtcp-fb:"+f+" ").map(o.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return o.matchPrefix(s,"a=extmap:").forEach(function(S){c.headerExtensions.push(o.parseExtmap(S))}),c},o.writeRtpDescription=function(s,c){var h="";h+="m="+s+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(f){return void 0!==f.preferredPayloadType?f.preferredPayloadType:f.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(f){h+=o.writeRtpMap(f),h+=o.writeFmtp(f),h+=o.writeRtcpFb(f)});var g=0;return c.codecs.forEach(function(f){f.maxptime>g&&(g=f.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(f){h+=o.writeExtmap(f)}),h},o.parseRtpEncodingParameters=function(s){var c,h=[],g=o.parseRtpParameters(s),f=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=o.matchPrefix(s,"a=ssrc:").map(function(R){return o.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),E=_.length>0&&_[0].ssrc,S=o.matchPrefix(s,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(M){return parseInt(M,10)})});S.length>0&&S[0].length>1&&S[0][0]===E&&(c=S[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var M={ssrc:E,codecPayloadType:parseInt(R.parameters.apt,10)};E&&c&&(M.rtx={ssrc:c}),h.push(M),f&&((M=JSON.parse(JSON.stringify(M))).fec={ssrc:E,mechanism:A?"red+ulpfec":"red"},h.push(M))}}),0===h.length&&E&&h.push({ssrc:E});var I=o.matchPrefix(s,"b=");return I.length&&(I=0===I[0].indexOf("b=TIAS:")?parseInt(I[0].substr(7),10):0===I[0].indexOf("b=AS:")?1e3*parseInt(I[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=I})),h},o.parseRtcpParameters=function(s){var c={},h=o.matchPrefix(s,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=o.matchPrefix(s,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var f=o.matchPrefix(s,"a=rtcp-mux");return c.mux=f.length>0,c},o.parseMsid=function(s){var c,h=o.matchPrefix(s,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=o.matchPrefix(s,"a=ssrc:").map(function(f){return o.parseSsrcMedia(f)}).filter(function(f){return"msid"===f.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(s,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(s||o.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(s,c,h,g){var f=o.writeRtpDescription(s.kind,c);if(f+=o.writeIceParameters(s.iceGatherer.getLocalParameters()),f+=o.writeDtlsParameters(s.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),f+="a=mid:"+s.mid+"\r\n",f+=s.direction?"a="+s.direction+"\r\n":s.rtpSender&&s.rtpReceiver?"a=sendrecv\r\n":s.rtpSender?"a=sendonly\r\n":s.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",s.rtpSender){var A="msid:"+g.id+" "+s.rtpSender.track.id+"\r\n";f+="a="+A,f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" "+A,s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" "+A,f+="a=ssrc-group:FID "+s.sendEncodingParameters[0].ssrc+" "+s.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",s.rtpSender&&s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),f},o.getDirection=function(s,c){for(var h=o.splitLines(s),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(s){return o.splitLines(s)[0].split(" ")[0].substr(2)},o.isRejected=function(s){return"0"===s.split(" ",2)[1]},o.parseMLine=function(s){var c=o.splitLines(s)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(s){var c=o.matchPrefix(s,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(s){if("string"!=typeof s||0===s.length)return!1;for(var c=o.splitLines(s),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=o}(If);var Wr=If.exports;function K_(n,o,s,c,h){var g=Wr.writeRtpDescription(n.kind,o);if(g+=Wr.writeIceParameters(n.iceGatherer.getLocalParameters()),g+=Wr.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),"offer"===s?"actpass":h||"active"),g+="a=mid:"+n.mid+"\r\n",g+=n.rtpSender&&n.rtpReceiver?"a=sendrecv\r\n":n.rtpSender?"a=sendonly\r\n":n.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",n.rtpSender){var f=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=f;var A="msid:"+(c?c.id:"-")+" "+f+"\r\n";g+="a="+A,g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+A,n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+A,g+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return g+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+Wr.localCName+"\r\n",n.rtpSender&&n.sendEncodingParameters[0].rtx&&(g+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+Wr.localCName+"\r\n"),g}function Nw(n,o){var s={codecs:[],headerExtensions:[],fecMechanisms:[]},c=function(g,f){g=parseInt(g,10);for(var A=0;A<f.length;A++)if(f[A].payloadType===g||f[A].preferredPayloadType===g)return f[A]},h=function(g,f,A,_){var E=c(g.parameters.apt,A),S=c(f.parameters.apt,_);return E&&S&&E.name.toLowerCase()===S.name.toLowerCase()};return n.codecs.forEach(function(g){for(var f=0;f<o.codecs.length;f++){var A=o.codecs[f];if(g.name.toLowerCase()===A.name.toLowerCase()&&g.clockRate===A.clockRate){if("rtx"===g.name.toLowerCase()&&g.parameters&&A.parameters.apt&&!h(g,A,n.codecs,o.codecs))continue;(A=JSON.parse(JSON.stringify(A))).numChannels=Math.min(g.numChannels,A.numChannels),s.codecs.push(A),A.rtcpFeedback=A.rtcpFeedback.filter(function(_){for(var E=0;E<g.rtcpFeedback.length;E++)if(g.rtcpFeedback[E].type===_.type&&g.rtcpFeedback[E].parameter===_.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(g){for(var f=0;f<o.headerExtensions.length;f++){var A=o.headerExtensions[f];if(g.uri===A.uri){s.headerExtensions.push(A);break}}}),s}function Mw(n,o,s){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[o][n].indexOf(s)}function Mh(n,o){var s=n.getRemoteCandidates().find(function(c){return o.foundation===c.foundation&&o.ip===c.ip&&o.port===c.port&&o.priority===c.priority&&o.protocol===c.protocol&&o.type===c.type});return s||n.addRemoteCandidate(o),!s}function da(n,o){var s=new Error(o);return s.name=n,s.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],s}function Ld(n){const o=n&&n.navigator,s=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(c){return s(c).catch(h=>{return Qn.reject({name:{PermissionDeniedError:"NotAllowedError"}[(g=h).name]||g.name,message:g.message,constraint:g.constraint,toString(){return this.name}});var g})}}function xw(n){"getDisplayMedia"in n.navigator&&n.navigator.mediaDevices&&(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function OD(n,o){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(c){return c}),n.RTCSessionDescription||(n.RTCSessionDescription=function(c){return c}),o.version<15025)){const c=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(h){c.set.call(this,h);const g=new Event("enabled");g.enabled=h,this.dispatchEvent(g)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const s=function(n,o){function s(f,A){A.addTrack(f),A.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:f}))}function c(f,A,_,E){var S=new Event("track");S.track=A,S.receiver=_,S.transceiver={receiver:_},S.streams=E,n.setTimeout(function(){f._dispatchEvent("track",S)})}var h=function(f){var S,I,R,A=this,_=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(S){A[S]=_[S].bind(_)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",f=JSON.parse(JSON.stringify(f||{})),this.usingBundle="max-bundle"===f.bundlePolicy,"negotiate"===f.rtcpMuxPolicy)throw da("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(f.rtcpMuxPolicy||(f.rtcpMuxPolicy="require"),f.iceTransportPolicy){case"all":case"relay":break;default:f.iceTransportPolicy="all"}switch(f.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:f.bundlePolicy="balanced"}if(f.iceServers=(S=f.iceServers||[],I=o,R=!1,(S=JSON.parse(JSON.stringify(S))).filter(function(M){if(M&&(M.urls||M.url)){var Q=M.urls||M.url;M.url&&!M.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var H="string"==typeof Q;return H&&(Q=[Q]),Q=Q.filter(function(Z){return 0!==Z.indexOf("turn:")||-1===Z.indexOf("transport=udp")||-1!==Z.indexOf("turn:[")||R?0===Z.indexOf("stun:")&&I>=14393&&-1===Z.indexOf("?transport=udp"):(R=!0,!0)}),delete M.url,M.urls=H?Q[0]:Q,!!Q.length}})),this._iceGatherers=[],f.iceCandidatePoolSize)for(var E=f.iceCandidatePoolSize;E>0;E--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:f.iceServers,gatherPolicy:f.iceTransportPolicy}));else f.iceCandidatePoolSize=0;this._config=f,this.transceivers=[],this._sdpSessionId=Wr.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(h.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(h.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),h.prototype.onicecandidate=null,h.prototype.onaddstream=null,h.prototype.ontrack=null,h.prototype.onremovestream=null,h.prototype.onsignalingstatechange=null,h.prototype.oniceconnectionstatechange=null,h.prototype.onconnectionstatechange=null,h.prototype.onicegatheringstatechange=null,h.prototype.onnegotiationneeded=null,h.prototype.ondatachannel=null,h.prototype._dispatchEvent=function(f,A){this._isClosed||(this.dispatchEvent(A),"function"==typeof this["on"+f]&&this["on"+f](A))},h.prototype._emitGatheringStateChange=function(){var f=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",f)},h.prototype.getConfiguration=function(){return this._config},h.prototype.getLocalStreams=function(){return this.localStreams},h.prototype.getRemoteStreams=function(){return this.remoteStreams},h.prototype._createTransceiver=function(f,A){var E={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:f,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)E.iceTransport=this.transceivers[0].iceTransport,E.dtlsTransport=this.transceivers[0].dtlsTransport;else{var S=this._createIceAndDtlsTransports();E.iceTransport=S.iceTransport,E.dtlsTransport=S.dtlsTransport}return A||this.transceivers.push(E),E},h.prototype.addTrack=function(f,A){if(this._isClosed)throw da("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var _;if(this.transceivers.find(function(S){return S.track===f}))throw da("InvalidAccessError","Track already exists.");for(var E=0;E<this.transceivers.length;E++)this.transceivers[E].track||this.transceivers[E].kind!==f.kind||(_=this.transceivers[E]);return _||(_=this._createTransceiver(f.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(A)&&this.localStreams.push(A),_.track=f,_.stream=A,_.rtpSender=new n.RTCRtpSender(f,_.dtlsTransport),_.rtpSender},h.prototype.addStream=function(f){var A=this;if(o>=15025)f.getTracks().forEach(function(E){A.addTrack(E,f)});else{var _=f.clone();f.getTracks().forEach(function(E,S){var I=_.getTracks()[S];E.addEventListener("enabled",function(R){I.enabled=R.enabled})}),_.getTracks().forEach(function(E){A.addTrack(E,_)})}},h.prototype.removeTrack=function(f){if(this._isClosed)throw da("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(f instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var A=this.transceivers.find(function(E){return E.rtpSender===f});if(!A)throw da("InvalidAccessError","Sender was not created by this connection.");var _=A.stream;A.rtpSender.stop(),A.rtpSender=null,A.track=null,A.stream=null,-1===this.transceivers.map(function(E){return E.stream}).indexOf(_)&&this.localStreams.indexOf(_)>-1&&this.localStreams.splice(this.localStreams.indexOf(_),1),this._maybeFireNegotiationNeeded()},h.prototype.removeStream=function(f){var A=this;f.getTracks().forEach(function(_){var E=A.getSenders().find(function(S){return S.track===_});E&&A.removeTrack(E)})},h.prototype.getSenders=function(){return this.transceivers.filter(function(f){return!!f.rtpSender}).map(function(f){return f.rtpSender})},h.prototype.getReceivers=function(){return this.transceivers.filter(function(f){return!!f.rtpReceiver}).map(function(f){return f.rtpReceiver})},h.prototype._createIceGatherer=function(f,A){var _=this;if(A&&f>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var E=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(E,"state",{value:"new",writable:!0}),this.transceivers[f].bufferedCandidateEvents=[],this.transceivers[f].bufferCandidates=function(S){var I=!S.candidate||0===Object.keys(S.candidate).length;E.state=I?"completed":"gathering",null!==_.transceivers[f].bufferedCandidateEvents&&_.transceivers[f].bufferedCandidateEvents.push(S)},E.addEventListener("localcandidate",this.transceivers[f].bufferCandidates),E},h.prototype._gather=function(f,A){var _=this,E=this.transceivers[A].iceGatherer;if(!E.onlocalcandidate){var S=this.transceivers[A].bufferedCandidateEvents;this.transceivers[A].bufferedCandidateEvents=null,E.removeEventListener("localcandidate",this.transceivers[A].bufferCandidates),E.onlocalcandidate=function(I){if(!(_.usingBundle&&A>0)){var R=new Event("icecandidate");R.candidate={sdpMid:f,sdpMLineIndex:A};var M=I.candidate,Q=!M||0===Object.keys(M).length;if(Q)"new"!==E.state&&"gathering"!==E.state||(E.state="completed");else{"new"===E.state&&(E.state="gathering"),M.component=1,M.ufrag=E.getLocalParameters().usernameFragment;var H=Wr.writeCandidate(M);R.candidate=Object.assign(R.candidate,Wr.parseCandidate(H)),R.candidate.candidate=H,R.candidate.toJSON=function(){return{candidate:R.candidate.candidate,sdpMid:R.candidate.sdpMid,sdpMLineIndex:R.candidate.sdpMLineIndex,usernameFragment:R.candidate.usernameFragment}}}var Z=Wr.getMediaSections(_._localDescription.sdp);Z[R.candidate.sdpMLineIndex]+=Q?"a=end-of-candidates\r\n":"a="+R.candidate.candidate+"\r\n",_._localDescription.sdp=Wr.getDescription(_._localDescription.sdp)+Z.join("");var le=_.transceivers.every(function(ge){return ge.iceGatherer&&"completed"===ge.iceGatherer.state});"gathering"!==_.iceGatheringState&&(_.iceGatheringState="gathering",_._emitGatheringStateChange()),Q||_._dispatchEvent("icecandidate",R),le&&(_._dispatchEvent("icecandidate",new Event("icecandidate")),_.iceGatheringState="complete",_._emitGatheringStateChange())}},n.setTimeout(function(){S.forEach(function(I){E.onlocalcandidate(I)})},0)}},h.prototype._createIceAndDtlsTransports=function(){var f=this,A=new n.RTCIceTransport(null);A.onicestatechange=function(){f._updateIceConnectionState(),f._updateConnectionState()};var _=new n.RTCDtlsTransport(A);return _.ondtlsstatechange=function(){f._updateConnectionState()},_.onerror=function(){Object.defineProperty(_,"state",{value:"failed",writable:!0}),f._updateConnectionState()},{iceTransport:A,dtlsTransport:_}},h.prototype._disposeIceAndDtlsTransports=function(f){var A=this.transceivers[f].iceGatherer;A&&(delete A.onlocalcandidate,delete this.transceivers[f].iceGatherer);var _=this.transceivers[f].iceTransport;_&&(delete _.onicestatechange,delete this.transceivers[f].iceTransport);var E=this.transceivers[f].dtlsTransport;E&&(delete E.ondtlsstatechange,delete E.onerror,delete this.transceivers[f].dtlsTransport)},h.prototype._transceive=function(f,A,_){var E=Nw(f.localCapabilities,f.remoteCapabilities);A&&f.rtpSender&&(E.encodings=f.sendEncodingParameters,E.rtcp={cname:Wr.localCName,compound:f.rtcpParameters.compound},f.recvEncodingParameters.length&&(E.rtcp.ssrc=f.recvEncodingParameters[0].ssrc),f.rtpSender.send(E)),_&&f.rtpReceiver&&E.codecs.length>0&&("video"===f.kind&&f.recvEncodingParameters&&o<15019&&f.recvEncodingParameters.forEach(function(S){delete S.rtx}),E.encodings=f.recvEncodingParameters.length?f.recvEncodingParameters:[{}],E.rtcp={compound:f.rtcpParameters.compound},f.rtcpParameters.cname&&(E.rtcp.cname=f.rtcpParameters.cname),f.sendEncodingParameters.length&&(E.rtcp.ssrc=f.sendEncodingParameters[0].ssrc),f.rtpReceiver.receive(E))},h.prototype.setLocalDescription=function(f){var A,_,E=this;if(-1===["offer","answer"].indexOf(f.type))return Promise.reject(da("TypeError",'Unsupported type "'+f.type+'"'));if(!Mw("setLocalDescription",f.type,E.signalingState)||E._isClosed)return Promise.reject(da("InvalidStateError","Can not set local "+f.type+" in state "+E.signalingState));if("offer"===f.type)A=Wr.splitSections(f.sdp),_=A.shift(),A.forEach(function(I,R){var M=Wr.parseRtpParameters(I);E.transceivers[R].localCapabilities=M}),E.transceivers.forEach(function(I,R){E._gather(I.mid,R)});else if("answer"===f.type){A=Wr.splitSections(E._remoteDescription.sdp),_=A.shift();var S=Wr.matchPrefix(_,"a=ice-lite").length>0;A.forEach(function(I,R){var M=E.transceivers[R],Q=M.iceGatherer,H=M.iceTransport,Z=M.dtlsTransport,le=M.localCapabilities,ge=M.remoteCapabilities;if(!(Wr.isRejected(I)&&0===Wr.matchPrefix(I,"a=bundle-only").length||M.rejected)){var Se=Wr.getIceParameters(I,_),Ne=Wr.getDtlsParameters(I,_);S&&(Ne.role="server"),E.usingBundle&&0!==R||(E._gather(M.mid,R),"new"===H.state&&H.start(Q,Se,S?"controlling":"controlled"),"new"===Z.state&&Z.start(Ne));var nt=Nw(le,ge);E._transceive(M,nt.codecs.length>0,!1)}})}return E._localDescription={type:f.type,sdp:f.sdp},E._updateSignalingState("offer"===f.type?"have-local-offer":"stable"),Promise.resolve()},h.prototype.setRemoteDescription=function(f){var A=this;if(-1===["offer","answer"].indexOf(f.type))return Promise.reject(da("TypeError",'Unsupported type "'+f.type+'"'));if(!Mw("setRemoteDescription",f.type,A.signalingState)||A._isClosed)return Promise.reject(da("InvalidStateError","Can not set remote "+f.type+" in state "+A.signalingState));var _={};A.remoteStreams.forEach(function(H){_[H.id]=H});var E=[],S=Wr.splitSections(f.sdp),I=S.shift(),R=Wr.matchPrefix(I,"a=ice-lite").length>0,M=Wr.matchPrefix(I,"a=group:BUNDLE ").length>0;A.usingBundle=M;var Q=Wr.matchPrefix(I,"a=ice-options:")[0];return A.canTrickleIceCandidates=!!Q&&Q.substr(14).split(" ").indexOf("trickle")>=0,S.forEach(function(H,Z){var le=Wr.splitLines(H),ge=Wr.getKind(H),Se=Wr.isRejected(H)&&0===Wr.matchPrefix(H,"a=bundle-only").length,Ne=le[0].substr(2).split(" ")[2],nt=Wr.getDirection(H,I),Nt=Wr.parseMsid(H),Vt=Wr.getMid(H)||Wr.generateIdentifier();if(Se||"application"===ge&&("DTLS/SCTP"===Ne||"UDP/DTLS/SCTP"===Ne))A.transceivers[Z]={mid:Vt,kind:ge,protocol:Ne,rejected:!0};else{var Dt,In,dn,hn,wt,We,ct,bt,bn;!Se&&A.transceivers[Z]&&A.transceivers[Z].rejected&&(A.transceivers[Z]=A._createTransceiver(ge,!0));var Je,dt,xt=Wr.parseRtpParameters(H);Se||(Je=Wr.getIceParameters(H,I),(dt=Wr.getDtlsParameters(H,I)).role="client"),ct=Wr.parseRtpEncodingParameters(H);var pn=Wr.parseRtcpParameters(H),Dn=Wr.matchPrefix(H,"a=end-of-candidates",I).length>0,Wt=Wr.matchPrefix(H,"a=candidate:").map(function(xe){return Wr.parseCandidate(xe)}).filter(function(xe){return 1===xe.component});if(("offer"===f.type||"answer"===f.type)&&!Se&&M&&Z>0&&A.transceivers[Z]&&(A._disposeIceAndDtlsTransports(Z),A.transceivers[Z].iceGatherer=A.transceivers[0].iceGatherer,A.transceivers[Z].iceTransport=A.transceivers[0].iceTransport,A.transceivers[Z].dtlsTransport=A.transceivers[0].dtlsTransport,A.transceivers[Z].rtpSender&&A.transceivers[Z].rtpSender.setTransport(A.transceivers[0].dtlsTransport),A.transceivers[Z].rtpReceiver&&A.transceivers[Z].rtpReceiver.setTransport(A.transceivers[0].dtlsTransport)),"offer"!==f.type||Se)"answer"===f.type&&!Se&&(In=(Dt=A.transceivers[Z]).iceGatherer,dn=Dt.iceTransport,hn=Dt.dtlsTransport,wt=Dt.rtpReceiver,We=Dt.sendEncodingParameters,bt=Dt.localCapabilities,A.transceivers[Z].recvEncodingParameters=ct,A.transceivers[Z].remoteCapabilities=xt,A.transceivers[Z].rtcpParameters=pn,Wt.length&&"new"===dn.state&&(!R&&!Dn||M&&0!==Z?Wt.forEach(function(xe){Mh(Dt.iceTransport,xe)}):dn.setRemoteCandidates(Wt)),M&&0!==Z||("new"===dn.state&&dn.start(In,Je,"controlling"),"new"===hn.state&&hn.start(dt)),!Nw(Dt.localCapabilities,Dt.remoteCapabilities).codecs.filter(function(xe){return"rtx"===xe.name.toLowerCase()}).length&&Dt.sendEncodingParameters[0].rtx&&delete Dt.sendEncodingParameters[0].rtx,A._transceive(Dt,"sendrecv"===nt||"recvonly"===nt,"sendrecv"===nt||"sendonly"===nt),!wt||"sendrecv"!==nt&&"sendonly"!==nt?delete Dt.rtpReceiver:(bn=wt.track,Nt?(_[Nt.stream]||(_[Nt.stream]=new n.MediaStream),s(bn,_[Nt.stream]),E.push([bn,wt,_[Nt.stream]])):(_.default||(_.default=new n.MediaStream),s(bn,_.default),E.push([bn,wt,_.default]))));else{(Dt=A.transceivers[Z]||A._createTransceiver(ge)).mid=Vt,Dt.iceGatherer||(Dt.iceGatherer=A._createIceGatherer(Z,M)),Wt.length&&"new"===Dt.iceTransport.state&&(!Dn||M&&0!==Z?Wt.forEach(function(xe){Mh(Dt.iceTransport,xe)}):Dt.iceTransport.setRemoteCandidates(Wt)),bt=n.RTCRtpReceiver.getCapabilities(ge),o<15019&&(bt.codecs=bt.codecs.filter(function(xe){return"rtx"!==xe.name})),We=Dt.sendEncodingParameters||[{ssrc:1001*(2*Z+2)}];var j,Ae=!1;"sendrecv"===nt||"sendonly"===nt?(Ae=!Dt.rtpReceiver,wt=Dt.rtpReceiver||new n.RTCRtpReceiver(Dt.dtlsTransport,ge),Ae&&(bn=wt.track,Nt&&"-"===Nt.stream||(Nt?(_[Nt.stream]||(_[Nt.stream]=new n.MediaStream,Object.defineProperty(_[Nt.stream],"id",{get:function(){return Nt.stream}})),Object.defineProperty(bn,"id",{get:function(){return Nt.track}}),j=_[Nt.stream]):(_.default||(_.default=new n.MediaStream),j=_.default)),j&&(s(bn,j),Dt.associatedRemoteMediaStreams.push(j)),E.push([bn,wt,j]))):Dt.rtpReceiver&&Dt.rtpReceiver.track&&(Dt.associatedRemoteMediaStreams.forEach(function(xe){var Tn,Sr,Ft=xe.getTracks().find(function(Tn){return Tn.id===Dt.rtpReceiver.track.id});Ft&&((Sr=xe).removeTrack(Tn=Ft),Sr.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:Tn})))}),Dt.associatedRemoteMediaStreams=[]),Dt.localCapabilities=bt,Dt.remoteCapabilities=xt,Dt.rtpReceiver=wt,Dt.rtcpParameters=pn,Dt.sendEncodingParameters=We,Dt.recvEncodingParameters=ct,A._transceive(A.transceivers[Z],!1,Ae)}}}),void 0===A._dtlsRole&&(A._dtlsRole="offer"===f.type?"active":"passive"),A._remoteDescription={type:f.type,sdp:f.sdp},A._updateSignalingState("offer"===f.type?"have-remote-offer":"stable"),Object.keys(_).forEach(function(H){var Z=_[H];if(Z.getTracks().length){if(-1===A.remoteStreams.indexOf(Z)){A.remoteStreams.push(Z);var le=new Event("addstream");le.stream=Z,n.setTimeout(function(){A._dispatchEvent("addstream",le)})}E.forEach(function(ge){Z.id===ge[2].id&&c(A,ge[0],ge[1],[Z])})}}),E.forEach(function(H){H[2]||c(A,H[0],H[1],[])}),n.setTimeout(function(){A&&A.transceivers&&A.transceivers.forEach(function(H){H.iceTransport&&"new"===H.iceTransport.state&&H.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),H.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},h.prototype.close=function(){this.transceivers.forEach(function(f){f.iceTransport&&f.iceTransport.stop(),f.dtlsTransport&&f.dtlsTransport.stop(),f.rtpSender&&f.rtpSender.stop(),f.rtpReceiver&&f.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},h.prototype._updateSignalingState=function(f){this.signalingState=f;var A=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",A)},h.prototype._maybeFireNegotiationNeeded=function(){var f=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,n.setTimeout(function(){if(f.needNegotiation){f.needNegotiation=!1;var A=new Event("negotiationneeded");f._dispatchEvent("negotiationneeded",A)}},0))},h.prototype._updateIceConnectionState=function(){var f,A={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&!E.rejected&&A[E.iceTransport.state]++}),f="new",A.failed>0?f="failed":A.checking>0?f="checking":A.disconnected>0?f="disconnected":A.new>0?f="new":A.connected>0?f="connected":A.completed>0&&(f="completed"),f!==this.iceConnectionState){this.iceConnectionState=f;var _=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",_)}},h.prototype._updateConnectionState=function(){var f,A={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&E.dtlsTransport&&!E.rejected&&(A[E.iceTransport.state]++,A[E.dtlsTransport.state]++)}),A.connected+=A.completed,f="new",A.failed>0?f="failed":A.connecting>0?f="connecting":A.disconnected>0?f="disconnected":A.new>0?f="new":A.connected>0&&(f="connected"),f!==this.connectionState){this.connectionState=f;var _=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",_)}},h.prototype.createOffer=function(){var f=this;if(f._isClosed)return Promise.reject(da("InvalidStateError","Can not call createOffer after close"));var A=f.transceivers.filter(function(R){return"audio"===R.kind}).length,_=f.transceivers.filter(function(R){return"video"===R.kind}).length,E=arguments[0];if(E){if(E.mandatory||E.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==E.offerToReceiveAudio&&(A=!0===E.offerToReceiveAudio?1:!1===E.offerToReceiveAudio?0:E.offerToReceiveAudio),void 0!==E.offerToReceiveVideo&&(_=!0===E.offerToReceiveVideo?1:!1===E.offerToReceiveVideo?0:E.offerToReceiveVideo)}for(f.transceivers.forEach(function(R){"audio"===R.kind?--A<0&&(R.wantReceive=!1):"video"===R.kind&&--_<0&&(R.wantReceive=!1)});A>0||_>0;)A>0&&(f._createTransceiver("audio"),A--),_>0&&(f._createTransceiver("video"),_--);var S=Wr.writeSessionBoilerplate(f._sdpSessionId,f._sdpSessionVersion++);f.transceivers.forEach(function(R,M){var Q=R.track,H=R.kind,Z=R.mid||Wr.generateIdentifier();R.mid=Z,R.iceGatherer||(R.iceGatherer=f._createIceGatherer(M,f.usingBundle));var le=n.RTCRtpSender.getCapabilities(H);o<15019&&(le.codecs=le.codecs.filter(function(Se){return"rtx"!==Se.name})),le.codecs.forEach(function(Se){"H264"===Se.name&&void 0===Se.parameters["level-asymmetry-allowed"]&&(Se.parameters["level-asymmetry-allowed"]="1"),R.remoteCapabilities&&R.remoteCapabilities.codecs&&R.remoteCapabilities.codecs.forEach(function(Ne){Se.name.toLowerCase()===Ne.name.toLowerCase()&&Se.clockRate===Ne.clockRate&&(Se.preferredPayloadType=Ne.payloadType)})}),le.headerExtensions.forEach(function(Se){(R.remoteCapabilities&&R.remoteCapabilities.headerExtensions||[]).forEach(function(Ne){Se.uri===Ne.uri&&(Se.id=Ne.id)})});var ge=R.sendEncodingParameters||[{ssrc:1001*(2*M+1)}];Q&&o>=15019&&"video"===H&&!ge[0].rtx&&(ge[0].rtx={ssrc:ge[0].ssrc+1}),R.wantReceive&&(R.rtpReceiver=new n.RTCRtpReceiver(R.dtlsTransport,H)),R.localCapabilities=le,R.sendEncodingParameters=ge}),"max-compat"!==f._config.bundlePolicy&&(S+="a=group:BUNDLE "+f.transceivers.map(function(R){return R.mid}).join(" ")+"\r\n"),S+="a=ice-options:trickle\r\n",f.transceivers.forEach(function(R,M){S+=K_(R,R.localCapabilities,"offer",R.stream,f._dtlsRole),S+="a=rtcp-rsize\r\n",!R.iceGatherer||"new"===f.iceGatheringState||0!==M&&f.usingBundle||(R.iceGatherer.getLocalCandidates().forEach(function(Q){Q.component=1,S+="a="+Wr.writeCandidate(Q)+"\r\n"}),"completed"===R.iceGatherer.state&&(S+="a=end-of-candidates\r\n"))});var I=new n.RTCSessionDescription({type:"offer",sdp:S});return Promise.resolve(I)},h.prototype.createAnswer=function(){var f=this;if(f._isClosed)return Promise.reject(da("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==f.signalingState&&"have-local-pranswer"!==f.signalingState)return Promise.reject(da("InvalidStateError","Can not call createAnswer in signalingState "+f.signalingState));var A=Wr.writeSessionBoilerplate(f._sdpSessionId,f._sdpSessionVersion++);f.usingBundle&&(A+="a=group:BUNDLE "+f.transceivers.map(function(S){return S.mid}).join(" ")+"\r\n"),A+="a=ice-options:trickle\r\n";var _=Wr.getMediaSections(f._remoteDescription.sdp).length;f.transceivers.forEach(function(S,I){if(!(I+1>_)){if(S.rejected)return"application"===S.kind?A+="DTLS/SCTP"===S.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+S.protocol+" webrtc-datachannel\r\n":"audio"===S.kind?A+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===S.kind&&(A+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(A+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+S.mid+"\r\n");var R;S.stream&&("audio"===S.kind?R=S.stream.getAudioTracks()[0]:"video"===S.kind&&(R=S.stream.getVideoTracks()[0]),R&&o>=15019&&"video"===S.kind&&!S.sendEncodingParameters[0].rtx&&(S.sendEncodingParameters[0].rtx={ssrc:S.sendEncodingParameters[0].ssrc+1}));var M=Nw(S.localCapabilities,S.remoteCapabilities);!M.codecs.filter(function(Q){return"rtx"===Q.name.toLowerCase()}).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,A+=K_(S,M,"answer",S.stream,f._dtlsRole),S.rtcpParameters&&S.rtcpParameters.reducedSize&&(A+="a=rtcp-rsize\r\n")}});var E=new n.RTCSessionDescription({type:"answer",sdp:A});return Promise.resolve(E)},h.prototype.addIceCandidate=function(f){var A,_=this;return f&&void 0===f.sdpMLineIndex&&!f.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(E,S){if(!_._remoteDescription)return S(da("InvalidStateError","Can not add ICE candidate without a remote description"));if(f&&""!==f.candidate){var I=f.sdpMLineIndex;if(f.sdpMid)for(var R=0;R<_.transceivers.length;R++)if(_.transceivers[R].mid===f.sdpMid){I=R;break}var M=_.transceivers[I];if(!M)return S(da("OperationError","Can not add ICE candidate"));if(M.rejected)return E();var Q=Object.keys(f.candidate).length>0?Wr.parseCandidate(f.candidate):{};if("tcp"===Q.protocol&&(0===Q.port||9===Q.port)||Q.component&&1!==Q.component)return E();if((0===I||I>0&&M.iceTransport!==_.transceivers[0].iceTransport)&&!Mh(M.iceTransport,Q))return S(da("OperationError","Can not add ICE candidate"));var H=f.candidate.trim();0===H.indexOf("a=")&&(H=H.substr(2)),(A=Wr.getMediaSections(_._remoteDescription.sdp))[I]+="a="+(Q.type?H:"end-of-candidates")+"\r\n",_._remoteDescription.sdp=Wr.getDescription(_._remoteDescription.sdp)+A.join("")}else for(var Z=0;Z<_.transceivers.length&&(_.transceivers[Z].rejected||(_.transceivers[Z].iceTransport.addRemoteCandidate({}),(A=Wr.getMediaSections(_._remoteDescription.sdp))[Z]+="a=end-of-candidates\r\n",_._remoteDescription.sdp=Wr.getDescription(_._remoteDescription.sdp)+A.join(""),!_.usingBundle));Z++);E()})},h.prototype.getStats=function(f){if(f&&f instanceof n.MediaStreamTrack){var A=null;if(this.transceivers.forEach(function(E){E.rtpSender&&E.rtpSender.track===f?A=E.rtpSender:E.rtpReceiver&&E.rtpReceiver.track===f&&(A=E.rtpReceiver)}),!A)throw da("InvalidAccessError","Invalid selector.");return A.getStats()}var _=[];return this.transceivers.forEach(function(E){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(S){E[S]&&_.push(E[S].getStats())})}),Promise.all(_).then(function(E){var S=new Map;return E.forEach(function(I){I.forEach(function(R){S.set(R.id,R)})}),S})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(f){var A=n[f];if(A&&A.prototype&&A.prototype.getStats){var _=A.prototype.getStats;A.prototype.getStats=function(){return _.apply(this).then(function(E){var S=new Map;return Object.keys(E).forEach(function(I){var R;E[I].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(R=E[I]).type]||R.type,S.set(I,E[I])}),S})}}});var g=["createOffer","createAnswer"];return g.forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var _=arguments;return"function"==typeof _[0]||"function"==typeof _[1]?A.apply(this,[arguments[2]]).then(function(E){"function"==typeof _[0]&&_[0].apply(null,[E])},function(E){"function"==typeof _[1]&&_[1].apply(null,[E])}):A.apply(this,arguments)}}),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var _=arguments;return"function"==typeof _[1]||"function"==typeof _[2]?A.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)},function(E){"function"==typeof _[2]&&_[2].apply(null,[E])}):A.apply(this,arguments)}}),["getStats"].forEach(function(f){var A=h.prototype[f];h.prototype[f]=function(){var _=arguments;return"function"==typeof _[1]?A.apply(this,arguments).then(function(){"function"==typeof _[1]&&_[1].apply(null)}):A.apply(this,arguments)}}),h}(n,o.version);n.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=function(h,g){let f=!1;return(h=JSON.parse(JSON.stringify(h))).filter(A=>{if(A&&(A.urls||A.url)){let _=A.urls||A.url;A.url&&!A.urls&&qu("RTCIceServer.url","RTCIceServer.urls");const E="string"==typeof _;return E&&(_=[_]),_=_.filter(S=>{if(0===S.indexOf("stun:"))return!1;const I=S.startsWith("turn")&&!S.startsWith("turn:[")&&S.includes("transport=udp");return I&&!f?(f=!0,!0):I&&!f}),delete A.url,A.urls=E?_[0]:_,!!_.length}})}(c.iceServers),MP("ICE servers after filtering:",c.iceServers)),new s(c)},n.RTCPeerConnection.prototype=s.prototype}function pM(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}var fM=Object.freeze({__proto__:null,shimPeerConnection:OD,shimReplaceTrack:pM,shimGetUserMedia:Ld,shimGetDisplayMedia:xw}),cc=X1,Bd=qt,I0=rt,wf=uT,Vl=W2,Tf=eh.exports;if(ba({target:"Promise",proto:!0,real:!0,forced:!!cc&&k(function(){cc.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var o=wf(this,Bd("Promise")),s=I0(n);return this.then(s?function(c){return Vl(o,n()).then(function(){return c})}:n,s?function(c){return Vl(o,n()).then(function(){throw c})}:n)}}),I0(cc)){var Yo=Bd("Promise").prototype.finally;cc.prototype.finally!==Yo&&Tf(cc.prototype,"finally",Yo,{unsafe:!0})}function Lw(n,o){const s=n&&n.navigator,c=n&&n.MediaStreamTrack;if(s.getUserMedia=function(h,g,f){qu("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),s.mediaDevices.getUserMedia(h).then(g,f)},!(o.version>55&&"autoGainControl"in s.mediaDevices.getSupportedConstraints())){const h=function(f,A,_){A in f&&!(_ in f)&&(f[_]=f[A],delete f[A])},g=s.mediaDevices.getUserMedia.bind(s.mediaDevices);if(s.mediaDevices.getUserMedia=function(f){return"object"==typeof f&&"object"==typeof f.audio&&(f=JSON.parse(JSON.stringify(f)),h(f.audio,"autoGainControl","mozAutoGainControl"),h(f.audio,"noiseSuppression","mozNoiseSuppression")),g(f)},c&&c.prototype.getSettings){const f=c.prototype.getSettings;c.prototype.getSettings=function(){const A=f.apply(this,arguments);return h(A,"mozAutoGainControl","autoGainControl"),h(A,"mozNoiseSuppression","noiseSuppression"),A}}if(c&&c.prototype.applyConstraints){const f=c.prototype.applyConstraints;c.prototype.applyConstraints=function(A){return"audio"===this.kind&&"object"==typeof A&&(A=JSON.parse(JSON.stringify(A)),h(A,"autoGainControl","mozAutoGainControl"),h(A,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[A])}}}}function mM(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function vy(n,o){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const g=n.RTCPeerConnection.prototype[h],f={[h](){return arguments[0]=new("addIceCandidate"===h?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};n.RTCPeerConnection.prototype[h]=f[h]});const s={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[h,g,f]=arguments;return c.apply(this,[h||null]).then(A=>{if(o.version<53&&!g)try{A.forEach(_=>{_.type=s[_.type]||_.type})}catch(_){if("TypeError"!==_.name)throw _;A.forEach((E,S)=>{A.set(S,Object.assign({},E,{type:s[E.type]||E.type}))})}return A}).then(g,f)}}function kD(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const c=o.apply(this,[]);return c.forEach(h=>h._pc=this),c});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const c=s.apply(this,arguments);return c._pc=this,c}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Qn.resolve(new Map)}}function PD(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=o.apply(this,[]);return s.forEach(c=>c._pc=this),s}),It(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ND(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(o){qu("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&o.getTracks().includes(s.track)&&this.removeTrack(s)})})}function Ay(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function Bw(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.addTransceiver;o&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const s=arguments[1],c=s&&"sendEncodings"in s;c&&s.sendEncodings.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=o.apply(this,arguments);if(c){const{sender:g}=h,f=g.getParameters();(!("encodings"in f)||1===f.encodings.length&&0===Object.keys(f.encodings[0]).length)&&(f.encodings=s.sendEncodings,g.sendEncodings=s.sendEncodings,this.setParametersPromises.push(g.setParameters(f).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return h})}function MD(n){if("object"!=typeof n||!n.RTCRtpSender)return;const o=n.RTCRtpSender.prototype.getParameters;o&&(n.RTCRtpSender.prototype.getParameters=function(){const s=o.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function gM(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Qn.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}function w0(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Qn.all(this.setParametersPromises).then(()=>o.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):o.apply(this,arguments)}}var T0=Object.freeze({__proto__:null,shimOnTrack:mM,shimPeerConnection:vy,shimSenderGetStats:kD,shimReceiverGetStats:PD,shimRemoveStream:ND,shimRTCDataChannel:Ay,shimAddTransceiver:Bw,shimGetParameters:MD,shimCreateOffer:gM,shimCreateAnswer:w0,shimGetUserMedia:Lw,shimGetDisplayMedia:function(n,o){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(s){if(!s||!s.video){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,Qn.reject(c)}return!0===s.video?s.video={mediaSource:o}:s.video.mediaSource=o,n.navigator.mediaDevices.getUserMedia(s)})}});function ng(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(c=>o.call(this,c,s)),s.getVideoTracks().forEach(c=>o.call(this,c,s))},n.RTCPeerConnection.prototype.addTrack=function(s){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];return h&&h.forEach(f=>{this._localStreams?this._localStreams.includes(f)||this._localStreams.push(f):this._localStreams=[f]}),o.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(o);if(-1===s)return;this._localStreams.splice(s,1);const c=o.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function yy(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(s){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=s),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,this.dispatchEvent(g)})})}});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(h)>=0)return;s._remoteStreams.push(h);const g=new Event("addstream");g.stream=h,s.dispatchEvent(g)})}),o.apply(s,arguments)}}}function Fw(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype,s=o.createOffer,c=o.createAnswer,h=o.setLocalDescription,g=o.setRemoteDescription,f=o.addIceCandidate;o.createOffer=function(_,E){const I=s.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return E?(I.then(_,E),Qn.resolve()):I},o.createAnswer=function(_,E){const I=c.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return E?(I.then(_,E),Qn.resolve()):I};let A=function(_,E,S){const I=h.apply(this,[_]);return S?(I.then(E,S),Qn.resolve()):I};o.setLocalDescription=A,A=function(_,E,S){const I=g.apply(this,[_]);return S?(I.then(E,S),Qn.resolve()):I},o.setRemoteDescription=A,A=function(_,E,S){const I=f.apply(this,[_]);return S?(I.then(E,S),Qn.resolve()):I},o.addIceCandidate=A}function Vs(n){const o=n&&n.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){const s=o.mediaDevices,c=s.getUserMedia.bind(s);o.mediaDevices.getUserMedia=h=>c(Ey(h))}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=function(s,c,h){o.mediaDevices.getUserMedia(s).then(c,h)}.bind(o))}function Ey(n){return n&&void 0!==n.video?Object.assign({},n,{video:Sd(n.video)}):n}function _M(n){if(!n.RTCPeerConnection)return;const o=n.RTCPeerConnection;n.RTCPeerConnection=function(s,c){if(s&&s.iceServers){const h=[];for(let g=0;g<s.iceServers.length;g++){let f=s.iceServers[g];!f.hasOwnProperty("urls")&&f.hasOwnProperty("url")?(qu("RTCIceServer.url","RTCIceServer.urls"),f=JSON.parse(JSON.stringify(f)),f.urls=f.url,delete f.url,h.push(f)):h.push(s.iceServers[g])}s.iceServers=h}return new o(s,c)},n.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>o.generateCertificate})}function xD(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Uw(n){const o=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(s){if(s){void 0!==s.offerToReceiveAudio&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const c=this.getTransceivers().find(g=>"audio"===g.receiver.track.kind);!1===s.offerToReceiveAudio&&c?"sendrecv"===c.direction?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":"recvonly"===c.direction&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):!0!==s.offerToReceiveAudio||c||this.addTransceiver("audio"),void 0!==s.offerToReceiveVideo&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const h=this.getTransceivers().find(g=>"video"===g.receiver.track.kind);!1===s.offerToReceiveVideo&&h?"sendrecv"===h.direction?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":"recvonly"===h.direction&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):!0!==s.offerToReceiveVideo||h||this.addTransceiver("video")}return o.apply(this,arguments)}}function rg(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var R0=Object.freeze({__proto__:null,shimLocalStreamsAPI:ng,shimRemoteStreamsAPI:yy,shimCallbacksAPI:Fw,shimGetUserMedia:Vs,shimConstraints:Ey,shimRTCIceServerUrls:_M,shimTrackEventTransceiver:xD,shimCreateOfferLegacy:Uw,shimAudioContext:rg}),vM=Qv,ig=Rc,AM=Qi("".replace),jl="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",og=RegExp("^"+jl+jl+"*"),Y_=RegExp(jl+jl+"*$"),q_=function(n){return function(o){var s=ig(vM(o));return 1&n&&(s=AM(s,og,"")),2&n&&(s=AM(s,Y_,"")),s}},BD={start:q_(1),end:q_(2),trim:q_(3)},FD=CI.PROPER,Vw=Ls,UD="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",xh=BD.trim;us({target:"String",proto:!0,forced:function(n){return Vw(function(){return!!UD[n]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[n]()||FD&&UD[n].name!==n})}("trim")},{trim:function(){return xh(this)}});var jw=fh("String").trim,pV=nc,Lh=jw,VD=String.prototype,sg=function(n){var o=n.trim;return"string"==typeof n||n===VD||pV(VD,n)&&o===VD.trim?Lh:o},jD=ae;ba({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return jD(URL.prototype.toString,this)}});var Hi={exports:{}};!function(n){var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(s){return sg(s).call(s).split("\n").map(function(c){return sg(c).call(c)})},o.splitSections=function(s){return s.split("\nm=").map(function(c,h){var g;return sg(g=h>0?"m="+c:c).call(g)+"\r\n"})},o.getDescription=function(s){var c=o.splitSections(s);return c&&c[0]},o.getMediaSections=function(s){var c=o.splitSections(s);return c.shift(),c},o.matchPrefix=function(s,c){return o.splitLines(s).filter(function(h){return 0===h.indexOf(c)})},o.parseCandidate=function(s){for(var c,h={foundation:(c=0===s.indexOf("a=candidate:")?s.substring(12).split(" "):s.substring(10).split(" "))[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},g=8;g<c.length;g+=2)switch(c[g]){case"raddr":h.relatedAddress=c[g+1];break;case"rport":h.relatedPort=parseInt(c[g+1],10);break;case"tcptype":h.tcpType=c[g+1];break;case"ufrag":h.ufrag=c[g+1],h.usernameFragment=c[g+1];break;default:h[c[g]]=c[g+1]}return h},o.writeCandidate=function(s){var c=[];c.push(s.foundation),c.push(s.component),c.push(s.protocol.toUpperCase()),c.push(s.priority),c.push(s.address||s.ip),c.push(s.port);var h=s.type;return c.push("typ"),c.push(h),"host"!==h&&s.relatedAddress&&s.relatedPort&&(c.push("raddr"),c.push(s.relatedAddress),c.push("rport"),c.push(s.relatedPort)),s.tcpType&&"tcp"===s.protocol.toLowerCase()&&(c.push("tcptype"),c.push(s.tcpType)),(s.usernameFragment||s.ufrag)&&(c.push("ufrag"),c.push(s.usernameFragment||s.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(s){return s.substr(14).split(" ")},o.parseRtpMap=function(s){var c=s.substr(9).split(" "),h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=3===c.length?parseInt(c[2],10):1,h.numChannels=h.channels,h},o.writeRtpMap=function(s){var c=s.payloadType;void 0!==s.preferredPayloadType&&(c=s.preferredPayloadType);var h=s.channels||s.numChannels||1;return"a=rtpmap:"+c+" "+s.name+"/"+s.clockRate+(1!==h?"/"+h:"")+"\r\n"},o.parseExtmap=function(s){var c=s.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},o.writeExtmap=function(s){return"a=extmap:"+(s.id||s.preferredId)+(s.direction&&"sendrecv"!==s.direction?"/"+s.direction:"")+" "+s.uri+"\r\n"},o.parseFmtp=function(s){for(var c,h={},g=s.substr(s.indexOf(" ")+1).split(";"),f=0;f<g.length;f++){var A,_;c=sg(A=g[f]).call(A).split("="),h[sg(_=c[0]).call(_)]=c[1]}return h},o.writeFmtp=function(s){var c="",h=s.payloadType;if(void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.parameters&&Object.keys(s.parameters).length){var g=[];Object.keys(s.parameters).forEach(function(f){g.push(s.parameters[f]?f+"="+s.parameters[f]:f)}),c+="a=fmtp:"+h+" "+g.join(";")+"\r\n"}return c},o.parseRtcpFb=function(s){var c=s.substr(s.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(s){var c="",h=s.payloadType;return void 0!==s.preferredPayloadType&&(h=s.preferredPayloadType),s.rtcpFeedback&&s.rtcpFeedback.length&&s.rtcpFeedback.forEach(function(g){c+="a=rtcp-fb:"+h+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+"\r\n"}),c},o.parseSsrcMedia=function(s){var c=s.indexOf(" "),h={ssrc:parseInt(s.substr(7,c-7),10)},g=s.indexOf(":",c);return g>-1?(h.attribute=s.substr(c+1,g-c-1),h.value=s.substr(g+1)):h.attribute=s.substr(c+1),h},o.parseSsrcGroup=function(s){var c=s.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(h){return parseInt(h,10)})}},o.getMid=function(s){var c=o.matchPrefix(s,"a=mid:")[0];if(c)return c.substr(6)},o.parseFingerprint=function(s){var c=s.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},o.getDtlsParameters=function(s,c){return{role:"auto",fingerprints:o.matchPrefix(s+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(s,c){var h="a=setup:"+c+"\r\n";return s.fingerprints.forEach(function(g){h+="a=fingerprint:"+g.algorithm+" "+g.value+"\r\n"}),h},o.parseCryptoLine=function(s){var c=s.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},o.writeCryptoLine=function(s){return"a=crypto:"+s.tag+" "+s.cryptoSuite+" "+("object"==typeof s.keyParams?o.writeCryptoKeyParams(s.keyParams):s.keyParams)+(s.sessionParams?" "+s.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(s){if(0!==s.indexOf("inline:"))return null;var c=s.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(s){return s.keyMethod+":"+s.keySalt+(s.lifeTime?"|"+s.lifeTime:"")+(s.mkiValue&&s.mkiLength?"|"+s.mkiValue+":"+s.mkiLength:"")},o.getCryptoParameters=function(s,c){return o.matchPrefix(s+c,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(s,c){var h=o.matchPrefix(s+c,"a=ice-ufrag:")[0],g=o.matchPrefix(s+c,"a=ice-pwd:")[0];return h&&g?{usernameFragment:h.substr(12),password:g.substr(10)}:null},o.writeIceParameters=function(s){return"a=ice-ufrag:"+s.usernameFragment+"\r\na=ice-pwd:"+s.password+"\r\n"},o.parseRtpParameters=function(s){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=o.splitLines(s)[0].split(" "),g=3;g<h.length;g++){var f=h[g],A=o.matchPrefix(s,"a=rtpmap:"+f+" ")[0];if(A){var _=o.parseRtpMap(A),E=o.matchPrefix(s,"a=fmtp:"+f+" ");switch(_.parameters=E.length?o.parseFmtp(E[0]):{},_.rtcpFeedback=o.matchPrefix(s,"a=rtcp-fb:"+f+" ").map(o.parseRtcpFb),c.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(_.name.toUpperCase())}}}return o.matchPrefix(s,"a=extmap:").forEach(function(S){c.headerExtensions.push(o.parseExtmap(S))}),c},o.writeRtpDescription=function(s,c){var h="";h+="m="+s+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(function(f){return void 0!==f.preferredPayloadType?f.preferredPayloadType:f.payloadType}).join(" ")+"\r\n",h+="c=IN IP4 0.0.0.0\r\n",h+="a=rtcp:9 IN IP4 0.0.0.0\r\n",c.codecs.forEach(function(f){h+=o.writeRtpMap(f),h+=o.writeFmtp(f),h+=o.writeRtcpFb(f)});var g=0;return c.codecs.forEach(function(f){f.maxptime>g&&(g=f.maxptime)}),g>0&&(h+="a=maxptime:"+g+"\r\n"),h+="a=rtcp-mux\r\n",c.headerExtensions&&c.headerExtensions.forEach(function(f){h+=o.writeExtmap(f)}),h},o.parseRtpEncodingParameters=function(s){var c,h=[],g=o.parseRtpParameters(s),f=-1!==g.fecMechanisms.indexOf("RED"),A=-1!==g.fecMechanisms.indexOf("ULPFEC"),_=o.matchPrefix(s,"a=ssrc:").map(function(R){return o.parseSsrcMedia(R)}).filter(function(R){return"cname"===R.attribute}),E=_.length>0&&_[0].ssrc,S=o.matchPrefix(s,"a=ssrc-group:FID").map(function(R){return R.substr(17).split(" ").map(function(M){return parseInt(M,10)})});S.length>0&&S[0].length>1&&S[0][0]===E&&(c=S[0][1]),g.codecs.forEach(function(R){if("RTX"===R.name.toUpperCase()&&R.parameters.apt){var M={ssrc:E,codecPayloadType:parseInt(R.parameters.apt,10)};E&&c&&(M.rtx={ssrc:c}),h.push(M),f&&((M=JSON.parse(JSON.stringify(M))).fec={ssrc:E,mechanism:A?"red+ulpfec":"red"},h.push(M))}}),0===h.length&&E&&h.push({ssrc:E});var I=o.matchPrefix(s,"b=");return I.length&&(I=0===I[0].indexOf("b=TIAS:")?parseInt(I[0].substr(7),10):0===I[0].indexOf("b=AS:")?1e3*parseInt(I[0].substr(5),10)*.95-16e3:void 0,h.forEach(function(R){R.maxBitrate=I})),h},o.parseRtcpParameters=function(s){var c={},h=o.matchPrefix(s,"a=ssrc:").map(function(A){return o.parseSsrcMedia(A)}).filter(function(A){return"cname"===A.attribute})[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);var g=o.matchPrefix(s,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=0===g.length;var f=o.matchPrefix(s,"a=rtcp-mux");return c.mux=f.length>0,c},o.parseMsid=function(s){var c,h=o.matchPrefix(s,"a=msid:");if(1===h.length)return{stream:(c=h[0].substr(7).split(" "))[0],track:c[1]};var g=o.matchPrefix(s,"a=ssrc:").map(function(f){return o.parseSsrcMedia(f)}).filter(function(f){return"msid"===f.attribute});return g.length>0?{stream:(c=g[0].value.split(" "))[0],track:c[1]}:void 0},o.parseSctpDescription=function(s){var c,h=o.parseMLine(s),g=o.matchPrefix(s,"a=max-message-size:");g.length>0&&(c=parseInt(g[0].substr(19),10)),isNaN(c)&&(c=65536);var f=o.matchPrefix(s,"a=sctp-port:");if(f.length>0)return{port:parseInt(f[0].substr(12),10),protocol:h.fmt,maxMessageSize:c};if(o.matchPrefix(s,"a=sctpmap:").length>0){var A=o.matchPrefix(s,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:c}}},o.writeSctpDescription=function(s,c){var h=[];return h="DTLS/SCTP"!==s.protocol?["m="+s.kind+" 9 "+s.protocol+" "+c.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+c.port+"\r\n"]:["m="+s.kind+" 9 "+s.protocol+" "+c.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+c.port+" "+c.protocol+" 65535\r\n"],void 0!==c.maxMessageSize&&h.push("a=max-message-size:"+c.maxMessageSize+"\r\n"),h.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(s,c,h){var g=void 0!==c?c:2;return"v=0\r\no="+(h||"thisisadapterortc")+" "+(s||o.generateSessionId())+" "+g+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(s,c,h,g){var f=o.writeRtpDescription(s.kind,c);if(f+=o.writeIceParameters(s.iceGatherer.getLocalParameters()),f+=o.writeDtlsParameters(s.dtlsTransport.getLocalParameters(),"offer"===h?"actpass":"active"),f+="a=mid:"+s.mid+"\r\n",f+=s.direction?"a="+s.direction+"\r\n":s.rtpSender&&s.rtpReceiver?"a=sendrecv\r\n":s.rtpSender?"a=sendonly\r\n":s.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",s.rtpSender){var A="msid:"+g.id+" "+s.rtpSender.track.id+"\r\n";f+="a="+A,f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" "+A,s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" "+A,f+="a=ssrc-group:FID "+s.sendEncodingParameters[0].ssrc+" "+s.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return f+="a=ssrc:"+s.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",s.rtpSender&&s.sendEncodingParameters[0].rtx&&(f+="a=ssrc:"+s.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),f},o.getDirection=function(s,c){for(var h=o.splitLines(s),g=0;g<h.length;g++)switch(h[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[g].substr(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(s){return o.splitLines(s)[0].split(" ")[0].substr(2)},o.isRejected=function(s){return"0"===s.split(" ",2)[1]},o.parseMLine=function(s){var c=o.splitLines(s)[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(s){var c=o.matchPrefix(s,"o=")[0].substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(s){if("string"!=typeof s||0===s.length)return!1;for(var c=o.splitLines(s),h=0;h<c.length;h++)if(c[h].length<2||"="!==c[h].charAt(1))return!1;return!0},n.exports=o}(Hi);var yu=Hi.exports;function Qw(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const o=n.RTCIceCandidate;n.RTCIceCandidate=function(s){if("object"==typeof s&&s.candidate&&0===s.candidate.indexOf("a=")&&((s=JSON.parse(JSON.stringify(s))).candidate=s.candidate.substr(2)),s.candidate&&s.candidate.length){const c=new o(s),h=yu.parseCandidate(s.candidate),g=Object.assign(c,h);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new o(s)},n.RTCIceCandidate.prototype=o.prototype,It(n,"icecandidate",s=>(s.candidate&&Object.defineProperty(s,"candidate",{value:new n.RTCIceCandidate(s.candidate),writable:"false"}),s))}function O0(n,o){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const s=function(A){if(!A||!A.sdp)return!1;const _=yu.splitSections(A.sdp);return _.shift(),_.some(E=>{const S=yu.parseMLine(E);return S&&"application"===S.kind&&-1!==S.protocol.indexOf("SCTP")})},c=function(A){const _=A.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===_||_.length<2)return-1;const E=parseInt(_[1],10);return E!=E?-1:E},h=function(A){let _=65536;return"firefox"===o.browser&&(_=o.version<57?-1===A?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637),_},g=function(A,_){let E=65536;"firefox"===o.browser&&57===o.version&&(E=65535);const S=yu.matchPrefix(A.sdp,"a=max-message-size:");return S.length>0?E=parseInt(S[0].substr(19),10):"firefox"===o.browser&&-1!==_&&(E=2147483637),E},f=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===o.browser&&o.version>=76){const{sdpSemantics:A}=this.getConfiguration();"plan-b"===A&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(s(arguments[0])){const A=c(arguments[0]),_=h(A),E=g(arguments[0],A);let S;S=0===_&&0===E?Number.POSITIVE_INFINITY:0===_||0===E?Math.max(_,E):Math.min(_,E);const I={};Object.defineProperty(I,"maxMessageSize",{get:()=>S}),this._sctp=I}return f.apply(this,arguments)}}function Ep(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function o(c,h){const g=c.send;c.send=function(){const f=arguments[0];if("open"===c.readyState&&h.sctp&&(f.length||f.size||f.byteLength)>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const s=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const c=s.apply(this,arguments);return o(c,this),c},It(n,"datachannel",c=>(o(c.channel,c.target),c))}function Yc(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype;Object.defineProperty(o,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(o,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(s){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),s&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=s)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(s=>{const c=o[s];o[s]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const g=h.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const f=new Event("connectionstatechange",h);g.dispatchEvent(f)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function Fd(n,o){if(!n.RTCPeerConnection||"chrome"===o.browser&&o.version>=71||"safari"===o.browser&&o.version>=605)return;const s=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&-1!==c.sdp.indexOf("\na=extmap-allow-mixed")){const h=c.sdp.split("\n").filter(g=>"a=extmap-allow-mixed"!==sg(g).call(g)).join("\n");n.RTCSessionDescription&&c instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return s.apply(this,arguments)}}function J_(n,o){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const s=n.RTCPeerConnection.prototype.addIceCandidate;s&&0!==s.length&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===o.browser&&o.version<78||"firefox"===o.browser&&o.version<68||"safari"===o.browser)&&arguments[0]&&""===arguments[0].candidate?Qn.resolve():s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Qn.resolve())})}var D0=Object.freeze({__proto__:null,shimRTCIceCandidate:Qw,shimMaxMessageSize:O0,shimSendThrowTypeError:Ep,shimConnectionState:Yc,removeExtmapAllowMixed:Fd,shimAddIceCandidateNullOrEmpty:J_});let ds,Ii;(function(){let{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const s=MP,c=nI(n),h={browserDetails:c,commonShim:D0,extractVersion:Tc,disableLog:VR,disableWarnings:bB};switch(c.browser){case"chrome":if(!_y||!Pw||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),h;if(null===c.version)return s("Chrome shim can not determine version, not shimming."),h;s("adapter.js shimming chrome."),h.browserShim=_y,J_(n,c),_i(n,c),RD(n),Pw(n,c),Nh(n),Lo(n,c),Fl(n),my(n),Ul(n),Bo(n,c),Qw(n),Yc(n),O0(n,c),Ep(n),Fd(n,c);break;case"firefox":if(!T0||!vy||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),h;s("adapter.js shimming firefox."),h.browserShim=T0,J_(n,c),Lw(n,c),vy(n,c),mM(n),ND(n),kD(n),PD(n),Ay(n),Bw(n),MD(n),gM(n),w0(n),Qw(n),Yc(n),O0(n,c),Ep(n);break;case"edge":if(!fM||!OD||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),h;s("adapter.js shimming edge."),h.browserShim=fM,Ld(n),xw(n),OD(n,c),pM(n),O0(n,c),Ep(n);break;case"safari":if(!R0||!o.shimSafari)return s("Safari shim is not included in this adapter release."),h;s("adapter.js shimming safari."),h.browserShim=R0,J_(n,c),_M(n),Uw(n),Fw(n),ng(n),yy(n),xD(n),Vs(n),rg(n),Qw(n),O0(n,c),Ep(n),Fd(n,c);break;default:s("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(ds||(ds={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(Ii||(Ii={}));var by={exports:{}};!function(n,o){!function(s,c){var h="function",g="object",f="string",A="model",_="name",E="type",S="vendor",I="version",R="architecture",M="console",Q="mobile",H="tablet",Z="smarttv",le="wearable",ge="embedded",Se={extend:function(dn,hn){var wt={};for(var We in dn)wt[We]=hn[We]&&hn[We].length%2==0?hn[We].concat(dn[We]):dn[We];return wt},has:function(dn,hn){return typeof dn===f&&-1!==hn.toLowerCase().indexOf(dn.toLowerCase())},lowerize:function(dn){return dn.toLowerCase()},major:function(dn){return typeof dn===f?dn.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(dn,hn){return dn=dn.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===hn?dn:dn.substring(0,255)}},Ne={rgx:function(dn,hn){for(var wt,We,ct,bt,bn,Je,dt=0;dt<hn.length&&!bn;){var xt=hn[dt],pn=hn[dt+1];for(wt=We=0;wt<xt.length&&!bn;)if(bn=xt[wt++].exec(dn))for(ct=0;ct<pn.length;ct++)Je=bn[++We],typeof(bt=pn[ct])===g&&bt.length>0?2==bt.length?this[bt[0]]=typeof bt[1]==h?bt[1].call(this,Je):bt[1]:3==bt.length?this[bt[0]]=typeof bt[1]!==h||bt[1].exec&&bt[1].test?Je?Je.replace(bt[1],bt[2]):c:Je?bt[1].call(this,Je,bt[2]):c:4==bt.length&&(this[bt[0]]=Je?bt[3].call(this,Je.replace(bt[1],bt[2])):c):this[bt]=Je||c;dt+=2}},str:function(dn,hn){for(var wt in hn)if(typeof hn[wt]===g&&hn[wt].length>0){for(var We=0;We<hn[wt].length;We++)if(Se.has(hn[wt][We],dn))return"?"===wt?c:wt}else if(Se.has(hn[wt],dn))return"?"===wt?c:wt;return dn}},nt={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},Nt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[_,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[_,I],[/opios[\/\s]+([\w\.]+)/i],[I,[_,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[I,[_,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,I],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[I,[_,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[I,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[I,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[_,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[I,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[I,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure Browser"],I],[/focus\/([\w\.]+)/i],[I,[_,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[I,[_,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[I,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[_,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[I,[_,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[I,[_,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[_,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 Browser"],I],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],I],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[_,I],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[_],[/;fbav\/([\w\.]+);/i],[I,[_,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[_,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[_,I],[/\bgsa\/([\w\.]+)\s.*safari\//i],[I,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[I,[_,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[_,"Chrome WebView"],I],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[I,[_,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[_,I],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[I,[_,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[I,_],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[_,[I,Ne.str,nt.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[_,I],[/(navigator|netscape)\/([\w\.-]+)/i],[[_,"Netscape"],I],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[I,[_,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[_,I]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,Se.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[R,/ower/,"",Se.lowerize]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,Se.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[A,[S,"Samsung"],[E,H]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[A,[S,"Samsung"],[E,Q]],[/\((ip(?:hone|od)[\s\w]*);/i],[A,[S,"Apple"],[E,Q]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[A,[S,"Apple"],[E,H]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[A,[S,"Huawei"],[E,H]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[A,[S,"Huawei"],[E,Q]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[A,/_/g," "],[S,"Xiaomi"],[E,Q]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[A,/_/g," "],[S,"Xiaomi"],[E,H]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[A,[S,"OPPO"],[E,Q]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[A,[S,"Vivo"],[E,Q]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[A,[S,"Realme"],[E,Q]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[A,[S,"Motorola"],[E,Q]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[A,[S,"Motorola"],[E,H]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[A,[S,"LG"],[E,H]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[A,[S,"LG"],[E,Q]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[A,[S,"Lenovo"],[E,H]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[A,/_/g," "],[S,"Nokia"],[E,Q]],[/droid.+;\s(pixel\sc)[\s)]/i],[A,[S,"Google"],[E,H]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[A,[S,"Google"],[E,Q]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[A,[S,"Sony"],[E,Q]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[A,"Xperia Tablet"],[S,"Sony"],[E,H]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[A,[S,"OnePlus"],[E,Q]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[A,[S,"Amazon"],[E,H]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[A,"Fire Phone"],[S,"Amazon"],[E,Q]],[/\((playbook);[\w\s\),;-]+(rim)/i],[A,S,[E,H]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[A,[S,"BlackBerry"],[E,Q]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[A,[S,"ASUS"],[E,H]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[A,[S,"ASUS"],[E,Q]],[/(nexus\s9)/i],[A,[S,"HTC"],[E,H]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[S,[A,/_/g," "],[E,Q]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[A,[S,"Acer"],[E,H]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[A,[S,"Meizu"],[E,Q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[S,A,[E,Q]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[S,A,[E,H]],[/\s(surface\sduo)\s/i],[A,[S,"Microsoft"],[E,H]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[A,[S,"Fairphone"],[E,Q]],[/\s(u304aa)\sbuild/i],[A,[S,"AT&T"],[E,Q]],[/sie-(\w*)/i],[A,[S,"Siemens"],[E,Q]],[/[;\/]\s?(rct\w+)\sbuild/i],[A,[S,"RCA"],[E,H]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[A,[S,"Dell"],[E,H]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[A,[S,"Verizon"],[E,H]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[A,[S,"Barnes & Noble"],[E,H]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[A,[S,"NuVision"],[E,H]],[/;\s(k88)\sbuild/i],[A,[S,"ZTE"],[E,H]],[/;\s(nx\d{3}j)\sbuild/i],[A,[S,"ZTE"],[E,Q]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[A,[S,"Swiss"],[E,Q]],[/[;\/]\s?(zur\d{3})\sbuild/i],[A,[S,"Swiss"],[E,H]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[A,[S,"Zeki"],[E,H]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[S,"Dragon Touch"],A,[E,H]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[A,[S,"Insignia"],[E,H]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[A,[S,"NextBook"],[E,H]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[S,"Voice"],A,[E,Q]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[S,"LvTel"],A,[E,Q]],[/;\s(ph-1)\s/i],[A,[S,"Essential"],[E,Q]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[A,[S,"Envizen"],[E,H]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[A,[S,"MachSpeed"],[E,H]],[/[;\/]\s?tu_(1491)\sbuild/i],[A,[S,"Rotor"],[E,H]],[/(shield[\w\s]+)\sbuild/i],[A,[S,"Nvidia"],[E,H]],[/(sprint)\s(\w+)/i],[S,A,[E,Q]],[/(kin\.[onetw]{3})/i],[[A,/\./g," "],[S,"Microsoft"],[E,Q]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[A,[S,"Zebra"],[E,H]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[A,[S,"Zebra"],[E,Q]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[S,A,[E,M]],[/droid.+;\s(shield)\sbuild/i],[A,[S,"Nvidia"],[E,M]],[/(playstation\s[345portablevi]+)/i],[A,[S,"Sony"],[E,M]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[A,[S,"Microsoft"],[E,M]],[/smart-tv.+(samsung)/i],[S,[E,Z]],[/hbbtv.+maple;(\d+)/i],[[A,/^/,"SmartTV"],[S,"Samsung"],[E,Z]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[S,"LG"],[E,Z]],[/(apple)\s?tv/i],[S,[A,"Apple TV"],[E,Z]],[/crkey/i],[[A,"Chromecast"],[S,"Google"],[E,Z]],[/droid.+aft([\w])(\sbuild\/|\))/i],[A,[S,"Amazon"],[E,Z]],[/\(dtv[\);].+(aquos)/i],[A,[S,"Sharp"],[E,Z]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[S,Se.trim],[A,Se.trim],[E,Z]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[E,Z]],[/((pebble))app\/[\d\.]+\s/i],[S,A,[E,le]],[/droid.+;\s(glass)\s\d/i],[A,[S,"Google"],[E,le]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[A,[S,"Zebra"],[E,le]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[S,[E,ge]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[A,[E,Q]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[A,[E,H]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[E,Se.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[A,[S,"Generic"]],[/(phone)/i],[[E,Q]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[I,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[_,I],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,_]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[_,I],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[_,[I,Ne.str,nt.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[_,"Windows"],[I,Ne.str,nt.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[_,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[_,"Mac OS"],[I,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[_,I],[/\(bb(10);/i],[I,[_,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[I,[_,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[_,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[I,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[I,[_,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[_,"Chromium OS"],I],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[_,I],[/(sunos)\s?([\w\.\d]*)/i],[[_,"Solaris"],I],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[_,I]]},Vt=function(dn,hn){if("object"==typeof dn&&(hn=dn,dn=c),!(this instanceof Vt))return new Vt(dn,hn).getResult();var wt=dn||(void 0!==s&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:""),We=hn?Se.extend(Nt,hn):Nt;return this.getBrowser=function(){var ct={name:c,version:c};return Ne.rgx.call(ct,wt,We.browser),ct.major=Se.major(ct.version),ct},this.getCPU=function(){var ct={architecture:c};return Ne.rgx.call(ct,wt,We.cpu),ct},this.getDevice=function(){var ct={vendor:c,model:c,type:c};return Ne.rgx.call(ct,wt,We.device),ct},this.getEngine=function(){var ct={name:c,version:c};return Ne.rgx.call(ct,wt,We.engine),ct},this.getOS=function(){var ct={name:c,version:c};return Ne.rgx.call(ct,wt,We.os),ct},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return wt},this.setUA=function(ct){return wt=typeof ct===f&&ct.length>255?Se.trim(ct,255):ct,this},this.setUA(wt),this};Vt.VERSION="0.7.28",Vt.BROWSER={NAME:_,MAJOR:"major",VERSION:I},Vt.CPU={ARCHITECTURE:R},Vt.DEVICE={MODEL:A,VENDOR:S,TYPE:E,CONSOLE:M,MOBILE:Q,SMARTTV:Z,TABLET:H,WEARABLE:le,EMBEDDED:ge},Vt.ENGINE={NAME:_,VERSION:I},Vt.OS={NAME:_,VERSION:I},n.exports&&(o=n.exports=Vt),o.UAParser=Vt;var Dt=void 0!==s&&(s.jQuery||s.Zepto);if(Dt&&!Dt.ua){var In=new Vt;Dt.ua=In.getResult(),Dt.ua.get=function(){return In.getUA()},Dt.ua.set=function(dn){In.setUA(dn);var hn=In.getResult();for(var wt in hn)Dt.ua[wt]=hn[wt]}}}("object"==typeof window?window:K)}(by,by.exports);const Bh=new by.exports;let bp=Bh.getResult();function wi(n){return n&&Bh.setUA(n),bp=Bh.getResult(),{name:_F(bp),version:QD(bp),os:vF(bp),osVersion:bp.os.version}}function _F(n){if("Blink"===n.engine.name&&"WeChat"!==n.browser.name)return Ii.CHROME;switch(n.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Ii.CHROME;case"Safari":case"Mobile Safari":return Ii.SAFARI;case"Edge":return Ii.EDGE;case"Firefox":return Ii.FIREFOX;case"QQBrowser":return Ii.QQ;case"Opera":return Ii.OPERA;case"WeChat":return Ii.WECHAT;default:return n.browser.name||""}}function QD(n){let o;return o="Blink"===n.engine.name?n.engine.version||"":n.browser.version||"",o.split(".")[0]}function vF(n){return"Windows"===n.os.name?n.os.version?n.os.name+" "+n.os.version:n.os.name:n.os.name||""}function HD(){return wi().os}function Hw(){const n=wi();return!!("WebKit"===bp.engine.name&&n.os===ds.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==Ii.SAFARI||qc()&&n.name!==Ii.SAFARI)}function WD(){return wi().name===Ii.CHROME}function Ql(){return wi().name===Ii.SAFARI}function hs(){return wi().name===Ii.FIREFOX}function qc(){return wi().os===ds.IOS}function qo(){const n=wi();if(n.os!==ds.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 13===Number(o[0])}function Eu(){const n=wi();if(n.os!==ds.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])}function yM(){const n=wi();if(n.os!==ds.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&0===Number(o[1])}function EM(){const n=wi();if(n.os!==ds.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=1}function Sy(){const n=wi();if(n.os!==ds.IOS||!n.osVersion)return!1;const o=n.osVersion.split(".");return 15===Number(o[0])&&Number(o[1])>=2}function ag(){return Ql()&&navigator.maxTouchPoints>0}function AF(){return wi().name===Ii.WECHAT}function yF(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function P0(){const n=wi();return n.name!==Ii.EDGE&&n.name!==Ii.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function EF(){return wi().os===ds.ANDROID}var KD={exports:{}},YD=Ad.f;us({target:"Object",stat:!0,forced:Object.defineProperty!==YD,sham:!ju},{defineProperty:YD});var bF=ip.Object,Fh=KD.exports=function(n,o,s){return bF.defineProperty(n,o,s)};bF.defineProperty.sham&&(Fh.sham=!0);var Cy=KD.exports;function J(n,o,s){return o in n?Cy(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s,n}var Iy={exports:{}},Hl=function(n,o){return function(){for(var s=new Array(arguments.length),c=0;c<s.length;c++)s[c]=arguments[c];return n.apply(o,s)}},Rf=Hl,cl=Object.prototype.toString;function wy(n){return"[object Array]"===cl.call(n)}function N0(n){return null!==n&&"object"==typeof n}function SF(n){return"[object Function]"===cl.call(n)}function Gw(n,o){if(null!=n)if("object"!=typeof n&&(n=[n]),wy(n))for(var s=0,c=n.length;s<c;s++)o.call(null,n[s],s,n);else for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&o.call(null,n[h],h,n)}var Gl={isArray:wy,isArrayBuffer:function(n){return"[object ArrayBuffer]"===cl.call(n)},isBuffer:function(n){return null!=n&&null!=n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)},isFormData:function(n){return typeof FormData<"u"&&n instanceof FormData},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n},isObject:N0,isUndefined:function(n){return void 0===n},isDate:function(n){return"[object Date]"===cl.call(n)},isFile:function(n){return"[object File]"===cl.call(n)},isBlob:function(n){return"[object Blob]"===cl.call(n)},isFunction:SF,isStream:function(n){return N0(n)&&SF(n.pipe)},isURLSearchParams:function(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:Gw,merge:function n(){var o={};function s(g,f){o[f]="object"==typeof o[f]&&"object"==typeof g?n(o[f],g):g}for(var c=0,h=arguments.length;c<h;c++)Gw(arguments[c],s);return o},deepMerge:function n(){var o={};function s(g,f){o[f]="object"==typeof o[f]&&"object"==typeof g?n(o[f],g):"object"==typeof g?n({},g):g}for(var c=0,h=arguments.length;c<h;c++)Gw(arguments[c],s);return o},extend:function(n,o,s){return Gw(o,function(c,h){n[h]=s&&"function"==typeof c?Rf(c,s):c}),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")}},Fn=Gl;function bM(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var CF=function(n,o,s){if(!o)return n;var c;if(s)c=s(o);else if(Fn.isURLSearchParams(o))c=o.toString();else{var h=[];Fn.forEach(o,function(f,A){null!=f&&(Fn.isArray(f)?A+="[]":f=[f],Fn.forEach(f,function(_){Fn.isDate(_)?_=_.toISOString():Fn.isObject(_)&&(_=JSON.stringify(_)),h.push(bM(A)+"="+bM(_))}))}),c=h.join("&")}if(c){var g=n.indexOf("#");-1!==g&&(n=n.slice(0,g)),n+=(-1===n.indexOf("?")?"?":"&")+c}return n},ug=Gl;function Ww(){this.handlers=[]}Ww.prototype.use=function(n,o){return this.handlers.push({fulfilled:n,rejected:o}),this.handlers.length-1},Ww.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},Ww.prototype.forEach=function(n){ug.forEach(this.handlers,function(o){null!==o&&n(o)})};var Sp=Ww,IF=Gl,qD=function(n){return!(!n||!n.__CANCEL__)},wF=Gl,SM=function(n,o,s,c,h){return function(n,o,s,c,h){return n.config=o,s&&(n.code=s),n.request=c,n.response=h,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}(new Error(n),o,s,c,h)},uc=SM,CM=Gl,Uh=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ia=Gl,Kw=Ia.isStandardBrowserEnv()?function(){var n,o=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function c(h){var g=h;return o&&(s.setAttribute("href",g),g=s.href),s.setAttribute("href",g),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return n=c(window.location.href),function(h){var g=Ia.isString(h)?c(h):h;return g.protocol===n.protocol&&g.host===n.host}}():function(){return!0},JD=Gl,$D=JD.isStandardBrowserEnv()?{write:function(n,o,s,c,h,g){var f=[];f.push(n+"="+encodeURIComponent(o)),JD.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),JD.isString(c)&&f.push("path="+c),JD.isString(h)&&f.push("domain="+h),!0===g&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},XD=Gl,RF=CF,ZD=Kw,IM=SM,i=Gl,l=function(n,o){wF.forEach(n,function(s,c){c!==o&&c.toUpperCase()===o.toUpperCase()&&(n[o]=s,delete n[c])})},u={"Content-Type":"application/x-www-form-urlencoded"};function p(n,o){!i.isUndefined(n)&&i.isUndefined(n["Content-Type"])&&(n["Content-Type"]=o)}var v,y={adapter:((typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)||typeof XMLHttpRequest<"u")&&(v=function(n){return new Promise(function(o,s){var c=n.data,h=n.headers;XD.isFormData(c)&&delete h["Content-Type"];var g=new XMLHttpRequest;if(n.auth&&(h.Authorization="Basic "+btoa((n.auth.username||"")+":"+(n.auth.password||""))),g.open(n.method.toUpperCase(),RF(n.url,n.params,n.paramsSerializer),!0),g.timeout=n.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var S="getAllResponseHeaders"in g?function(n){var o,s,c,h={};return n&&CM.forEach(n.split("\n"),function(g){if(c=g.indexOf(":"),o=CM.trim(g.substr(0,c)).toLowerCase(),s=CM.trim(g.substr(c+1)),o){if(h[o]&&Uh.indexOf(o)>=0)return;h[o]="set-cookie"===o?(h[o]?h[o]:[]).concat([s]):h[o]?h[o]+", "+s:s}}),h}(g.getAllResponseHeaders()):null;(function(n,o,s){var c=s.config.validateStatus;!c||c(s.status)?n(s):o(uc("Request failed with status code "+s.status,s.config,null,s.request,s))})(o,s,{data:n.responseType&&"text"!==n.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:S,config:n,request:g}),g=null}},g.onabort=function(){g&&(s(IM("Request aborted",n,"ECONNABORTED",g)),g=null)},g.onerror=function(){s(IM("Network Error",n,null,g)),g=null},g.ontimeout=function(){s(IM("timeout of "+n.timeout+"ms exceeded",n,"ECONNABORTED",g)),g=null},XD.isStandardBrowserEnv()){var _=$D,E=(n.withCredentials||ZD(n.url))&&n.xsrfCookieName?_.read(n.xsrfCookieName):void 0;E&&(h[n.xsrfHeaderName]=E)}if("setRequestHeader"in g&&XD.forEach(h,function(S,I){void 0===c&&"content-type"===I.toLowerCase()?delete h[I]:g.setRequestHeader(I,S)}),n.withCredentials&&(g.withCredentials=!0),n.responseType)try{g.responseType=n.responseType}catch(S){if("json"!==n.responseType)throw S}"function"==typeof n.onDownloadProgress&&g.addEventListener("progress",n.onDownloadProgress),"function"==typeof n.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then(function(S){g&&(g.abort(),s(S),g=null)}),void 0===c&&(c=null),g.send(c)})}),v),transformRequest:[function(n,o){return l(o,"Accept"),l(o,"Content-Type"),i.isFormData(n)||i.isArrayBuffer(n)||i.isBuffer(n)||i.isStream(n)||i.isFile(n)||i.isBlob(n)?n:i.isArrayBufferView(n)?n.buffer:i.isURLSearchParams(n)?(p(o,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):i.isObject(n)?(p(o,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch{}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(n){y.headers[n]={}}),i.forEach(["post","put","patch"],function(n){y.headers[n]=i.merge(u)});var C=y,w=Gl,D=function(n,o,s){return IF.forEach(s,function(c){n=c(n,o)}),n},P=qD,L=C;function ee(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var te=Gl,oe=function(n,o){o=o||{};var s={};return te.forEach(["url","method","params","data"],function(c){void 0!==o[c]&&(s[c]=o[c])}),te.forEach(["headers","auth","proxy"],function(c){te.isObject(o[c])?s[c]=te.deepMerge(n[c],o[c]):void 0!==o[c]?s[c]=o[c]:te.isObject(n[c])?s[c]=te.deepMerge(n[c]):void 0!==n[c]&&(s[c]=n[c])}),te.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(c){void 0!==o[c]?s[c]=o[c]:void 0!==n[c]&&(s[c]=n[c])}),s},Ee=Gl,Te=CF,De=Sp,Le=function(n){return ee(n),n.baseURL&&!function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}(n.url)&&(n.url=function(n,o){return o?n.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):n}(n.baseURL,n.url)),n.headers=n.headers||{},n.data=D(n.data,n.headers,n.transformRequest),n.headers=w.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),w.forEach(["delete","get","head","post","put","patch","common"],function(o){delete n.headers[o]}),(n.adapter||L.adapter)(n).then(function(o){return ee(n),o.data=D(o.data,o.headers,n.transformResponse),o},function(o){return P(o)||(ee(n),o&&o.response&&(o.response.data=D(o.response.data,o.response.headers,n.transformResponse))),Promise.reject(o)})},et=oe;function lt(n){this.defaults=n,this.interceptors={request:new De,response:new De}}lt.prototype.request=function(n){"string"==typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=et(this.defaults,n)).method=n.method?n.method.toLowerCase():"get";var o=[Le,void 0],s=Promise.resolve(n);for(this.interceptors.request.forEach(function(c){o.unshift(c.fulfilled,c.rejected)}),this.interceptors.response.forEach(function(c){o.push(c.fulfilled,c.rejected)});o.length;)s=s.then(o.shift(),o.shift());return s},lt.prototype.getUri=function(n){return n=et(this.defaults,n),Te(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},Ee.forEach(["delete","get","head","options"],function(n){lt.prototype[n]=function(o,s){return this.request(Ee.merge(s||{},{method:n,url:o}))}}),Ee.forEach(["post","put","patch"],function(n){lt.prototype[n]=function(o,s,c){return this.request(Ee.merge(c||{},{method:n,url:o,data:s}))}});var pt=lt;function ht(n){this.message=n}ht.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ht.prototype.__CANCEL__=!0;var gt=ht,Yt=gt;function Xt(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(c){o=c});var s=this;n(function(c){s.reason||(s.reason=new Yt(c),o(s.reason))})}Xt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Xt.source=function(){var n;return{token:new Xt(function(o){n=o}),cancel:n}};var un=Xt,Tt=Gl,yn=Hl,Kn=pt,Pt=oe;function mt(n){var o=new Kn(n),s=yn(Kn.prototype.request,o);return Tt.extend(s,Kn.prototype,o),Tt.extend(s,o),s}var Ve=mt(C);Ve.Axios=Kn,Ve.create=function(n){return mt(Pt(Ve.defaults,n))},Ve.Cancel=gt,Ve.CancelToken=un,Ve.isCancel=qD,Ve.all=function(n){return Promise.all(n)},Ve.spread=function(n){return function(o){return n.apply(null,o)}},Iy.exports=Ve,Iy.exports.default=Ve;var tt=Iy.exports;class Rt{constructor(o){J(this,"logger",void 0),J(this,"prefixLists",[]),this.logger=o}debug(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.debug(...this.prefixLists,...s)}info(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.info(...this.prefixLists,...s)}warning(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.warning(...this.prefixLists,...s)}error(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];this.logger.error(...this.prefixLists,...s)}prefix(o){return this.prefixLists.push(o),this}popPrefix(){return this.prefixLists.pop(),this}}class st{constructor(){J(this,"_events",{}),J(this,"addListener",this.on)}getListeners(o){return this._events[o]?this._events[o].map(s=>s.listener):[]}on(o,s){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,s)&&c.push({listener:s,once:!1})}once(o,s){this._events[o]||(this._events[o]=[]);const c=this._events[o];-1===this._indexOfListener(c,s)&&c.push({listener:s,once:!0})}off(o,s){if(!this._events[o])return;const c=this._events[o],h=this._indexOfListener(c,s);-1!==h&&c.splice(h,1),0===this._events[o].length&&delete this._events[o]}removeAllListeners(o){o?delete this._events[o]:this._events={}}emit(o){this._events[o]||(this._events[o]=[]);const s=this._events[o].map(f=>f);for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];for(let f=0;f<s.length;f+=1){const A=s[f];A.once&&this.off(o,A.listener),A.listener.apply(this,h||[])}}_indexOfListener(o,s){let c=o.length;for(;c--;)if(o[c].listener===s)return c;return-1}}const Bt=new class extends st{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let pe;!function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED"}(pe||(pe={}));class ye extends Error{constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;super(s),J(this,"code",void 0),J(this,"message",void 0),J(this,"data",void 0),J(this,"name","AgoraRTCException"),this.code=o,this.message="AgoraRTCError ".concat(this.code,": ").concat(s),this.data=c}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}print(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===o&&se.error(this.toString()),"warning"===o&&se.warning(this.toString()),this}throw(){throw this.print(),this}}const wn={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Kr(n,o){const s=Math.floor(o.timeout*Math.pow(o.timeoutFactor,n));return Math.min(o.maxRetryTimeout,s)}function Jo(n,o,s,c){const h=Object.assign({},wn,c);let g=h.timeout;const f=function(){var E=F(function*(){var S;yield(S=g,new Qn(I=>{window.setTimeout(I,S)})),g*=h.timeoutFactor,g=Math.min(h.maxRetryTimeout,g)});return function(){return E.apply(this,arguments)}}();let A=!1;const _=new Qn(function(){var E=F(function*(S,I){o=o||(()=>!1),s=s||(()=>!0);for(let R=0;R<h.maxRetryCount;R+=1){if(A)return I(new ye(pe.OPERATION_ABORTED));try{const M=yield n();if(!o(M,R)||R+1===h.maxRetryCount)return S(M);yield f()}catch(M){if(!s(M,R)||R+1===h.maxRetryCount)return I(M);yield f()}}});return function(S,I){return E.apply(this,arguments)}}());return _.cancel=()=>A=!0,_}function bu(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const bo={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},ps=Date.now(),rs=n=>{for(const o in bo)if(Object.prototype.hasOwnProperty.call(bo,o)&&bo[o]===n)return o;return"DEFAULT"},se=new class{constructor(){J(this,"proxyServerURL",void 0),J(this,"logLevel",bo.DEBUG),J(this,"uploadState","collecting"),J(this,"uploadLogWaitingList",[]),J(this,"uploadLogUploadingList",[]),J(this,"uploadErrorCount",0),J(this,"currentLogID",0),J(this,"url",void 0),J(this,"extLog",(n,o)=>{this.appendLogToWaitingList(n,o)})}debug(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[bo.DEBUG].concat(o);this.log.apply(this,c)}info(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[bo.INFO].concat(o);this.log.apply(this,c)}warning(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[bo.WARNING].concat(o);this.log.apply(this,c)}error(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[bo.ERROR].concat(o);this.log.apply(this,c)}upload(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];const c=[bo.DEBUG].concat(o);this.uploadLog.apply(this,c)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){kc("UPLOAD_LOG",!0)}disableLogUpload(){kc("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new Rt(this).prefix(n)}log(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];if(Date.now()-ps<100)return void setTimeout(()=>{this.log(...o)},Date.now()-ps);const c=Math.max(0,Math.min(4,o[0]));if(o[0]=bu()+" Agora-SDK [".concat(rs(c),"]:"),this.appendLogToWaitingList(c,o),c<this.logLevel)return;const h=bu()+" %cAgora-SDK [".concat(rs(c),"]:");let g=[];if(!Qt("USE_NEW_LOG"))switch(c){case bo.DEBUG:g=[h,"color: #64B5F6;"].concat(o.slice(1)),console.log.apply(console,g);break;case bo.INFO:g=[h,"color: #1E88E5; font-weight: bold;"].concat(o.slice(1)),console.log.apply(console,g);break;case bo.WARNING:g=[h,"color: #FB8C00; font-weight: bold;"].concat(o.slice(1)),console.warn.apply(console,g);break;case bo.ERROR:g=[h,"color: #B00020; font-weight: bold;"].concat(o.slice(1)),console.error.apply(console,g)}}uploadLog(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];if(Date.now()-ps<100)return void setTimeout(()=>{this.uploadLog(...o)},Date.now()-ps);const c=Math.max(0,Math.min(4,o[0]));o[0]=bu()+" Agora-SDK [".concat(rs(c),"]:"),this.appendLogToWaitingList(c,o)}appendLogToWaitingList(n){if(!Qt("UPLOAD_LOG"))return;let o="";for(var s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];c.forEach(g=>{"object"==typeof g&&(g=JSON.stringify(g)),o+="".concat(g," ")}),this.uploadLogWaitingList.push({payload_str:o,log_level:n,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}uploadLogs(){var n=this;return F(function*(){const o=n.uploadLogUploadingList,s={sdk_version:Wl,process_id:Qt("PROCESS_ID"),payload:JSON.stringify(o)};return Jo(F(function*(){const c=yield tt.post(n.url||(n.proxyServerURL?"https://".concat(n.proxyServerURL,"/ls/?h=").concat(Qt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Qt("LOG_UPLOAD_SERVER"),"/upload/v1")),s,{responseType:"text"});if("OK"!==c.data){const h=new Error("unexpected upload log response");throw h.response=c,h}}),()=>(n.uploadLogUploadingList=[],!1),c=>(Bt.reportLogUploadError(c.response?{status:c.response.status,data:c.response.data,headers:c.response.headers,message:c.message}:c.request?{status:c.request.status,message:c.message}:{status:-1,message:c.message}),!0),{timeout:Qt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Qt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})})()}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Qt("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Qt("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Qt("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Qt("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},wa={debug:console.log,info:console.log,warning:console.warn,error:console.error},Su={debug:"color: #64B5F6;",info:"color: #1E88E5; font-weight: bold;",warning:"color: #FB8C00; font-weight: bold;",error:"color: #B00020; font-weight: bold;"},Ht={debug:0,info:1,warning:2,error:3},kt=[];let ot,nn=0,Sn=0,Xn=!1;function fr(){const n=new Date;return[n.getTime(),n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()]}function Yr(n){if(!Qt("UPLOAD_LOG"))return;let o;switch(n.type){case Ji.MISC:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.msg]];break;case Ji.INTERNAL_EVENT:case Ji.PUBLIC_EVENT:case Ji.WEB_EVENT:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.event,n.msg]];break;case Ji.INTERNAL_API:case Ji.PUBLIC_API:case Ji.WEB_API:o=[n.timestamp,n.level,n.type,n.module,n.instanceId,[n.api,n.args,n.result]]}kt.push(o)}function qr(n,o){const[s,c]=fr(),h="warning",g="".concat(c," %cAgora-SDK [").concat(h,"] [INTERNAL API]:"),f={[Ji.WEB_API]:"logWebAPI",[Ji.PUBLIC_API]:"logPublicAPI",[Ji.INTERNAL_API]:"logInternalAPI",[Ji.WEB_EVENT]:"logWebEvent",[Ji.PUBLIC_EVENT]:"logPublicEvent",[Ji.INTERNAL_EVENT]:"logInternalEvent",[Ji.MISC]:"logMisc"}[n],A=[g,Su.warning,"Log.".concat(f),o];Qt("USE_NEW_LOG")&&(Si(h)&&wa.warning.apply(console,A),Yr({timestamp:s,level:h,module:"Log",instanceId:void 0,type:Ji.INTERNAL_API,api:f,args:void 0,result:o.toString()}))}function Ti(n){if(Array.isArray(n)){let[c,h]=n;return c||(c="Global"),{module:c,instanceId:h}}let o,s;if("string"!=typeof n.__moduleName)throw new Error("Cannot get __moduleName from log instance.");o=n.__moduleName;try{s=n.__instanceId}catch{throw new Error("Cannot get __instanceId from log instance.")}return{module:o,instanceId:s}}function Si(n){return Ht[n]>=Sn}function is(n,o,s,c,h,g){if(n===Ji.PUBLIC_API||n===Ji.WEB_API||n===Ji.INTERNAL_API)try{const{module:f,instanceId:A}=Ti(s);h=h&&JSON.stringify(h),g=g instanceof Error?g.toString():g&&JSON.stringify(g);const[_,E]=fr(),S=["".concat(E," %cAgora-SDK [").concat(o,"] [").concat({[Ji.PUBLIC_API]:"PUBLIC API",[Ji.WEB_API]:"WEB API",[Ji.INTERNAL_API]:"INTERNAL API"}[n],"]:"),Su[o],"".concat(f).concat(A?"<".concat(A,">"):"",".").concat(c),h,g];Qt("USE_NEW_LOG")&&(Si(o)&&wa[o].apply(console,S),Yr({timestamp:_,level:o,module:f,instanceId:A,type:n,api:c,args:h,result:g}))}catch(f){qr(n,f)}}function ja(n,o,s,c,h){if(n===Ji.WEB_EVENT||n===Ji.INTERNAL_EVENT||n===Ji.PUBLIC_EVENT)try{const{module:g,instanceId:f}=Ti(s);"string"!=typeof h&&(h=h instanceof Error?h.toString():JSON.stringify(h));const[A,_]=fr(),E=["".concat(_," %cAgora-SDK [").concat(o,"] [").concat({[Ji.WEB_EVENT]:"WEB EVENT",[Ji.PUBLIC_EVENT]:"PUBLIC EVENT",[Ji.INTERNAL_EVENT]:"INTERNAL EVENT"}[n],"]:"),Su[o],"".concat(g).concat(f?"<".concat(f,">"):"",".on(").concat(c,")"),h||""];Qt("USE_NEW_LOG")&&(Si(o)&&wa[o].apply(console,E),Yr({timestamp:A,level:o,module:g,instanceId:f,type:n,event:c,msg:h}))}catch(g){qr(n,g)}}function lc(n){ot=n}function En(n,o,s){try{const{module:c,instanceId:h}=Ti(o),[g,f]=fr(),A=["".concat(f," %cAgora-SDK [").concat(n,"] [MISC]:"),Su[n],"".concat(c).concat(h?"<".concat(h,">"):""),'"'.concat(s,'"')];Qt("USE_NEW_LOG")&&(Si(n)&&wa[n].apply(console,A),Yr({timestamp:g,level:n,module:c,instanceId:h,type:Ji.MISC,msg:s}))}catch(c){zt("warning",["log"],"logMisc",void 0,c)}}function Pi(n,o,s,c){ja(Ji.INTERNAL_EVENT,n,o,s,c)}function fs(n,o,s,c){ja(Ji.PUBLIC_EVENT,n,o,s,c)}function js(n,o,s,c){ja(Ji.WEB_EVENT,n,o,s,c)}function zt(n,o,s,c,h){is(Ji.INTERNAL_API,n,o,s,c,h)}function Cu(n,o,s,c,h){is(Ji.WEB_API,n,o,s,c,h)}function nr(n,o,s,c,h){is(Ji.PUBLIC_API,n,o,s,c,h)}function Qs(n,o){return function(s){return class extends s{get __moduleName(){return n}get __instanceId(){if(o){if("function"==typeof this[o])return this[o]();{const c=o.split(".");return c.length>0?e_(c).call(c,(h,g)=>{try{return h&&h[g]}catch{return}},this):this[o]}}}}}}function M0(n){return x0.apply(this,arguments)}function x0(){return x0=F(function*(n){if(!n&&Xn)return;if(Xn=!0,!Qt("UPLOAD_LOG"))return void setTimeout(()=>M0(!0),Qt("UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF"));if(0===kt.length)return void setTimeout(()=>M0(!0),Qt("UPLOAD_LOG_INTERVAL"));const o=kt.slice(0,Qt("UPLOAD_LOG_LENGTH_EACH_TIME")),s={sdk_version:Wl,log_version:Qt("LOG_VERSION"),process_id:Qt("PROCESS_ID"),index:nn,logs:JSON.stringify(o)};yield Jo(F(function*(){const c=yield tt.post(ot?"https://".concat(ot,"/ls/?h=").concat(Qt("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Qt("LOG_UPLOAD_SERVER"),"/upload/v1"),s,{responseType:"text"});if("OK"!==c.data)throw new Error("Log service response error ".concat(c.data));return c}),void 0,void 0,{timeout:Qt("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Qt("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}),kt.splice(0,Qt("UPLOAD_LOG_LENGTH_EACH_TIME")),nn+=o.length,setTimeout(()=>M0(!0),Qt("UPLOAD_LOG_INTERVAL"))}),x0.apply(this,arguments)}const OF="v4.12.1-0-gd73db17d-dirty(6/27/2022, 3:58:00 PM)",Wl=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(o&&o[1]&&o[2]){const h=o[2];return"".concat(o[1],".").concat(h)}const s=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(s&&s[1]&&s[2]){const h=s[2];return"".concat(s[1],".").concat(100*(Number(h)+1))}return"4.0.0.999"}("4.12.1"),TM=function(){try{return!0===JSON.parse("true")}catch{return!0}}(),Ta={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},r7={"90p":si(160,90),"90p_1":si(160,90),"120p":si(160,120,15,30,65),"120p_1":si(160,120,15,30,65),"120p_3":si(120,120,15,30,50),"120p_4":si(212,120),"180p":si(320,180,15,30,140),"180p_1":si(320,180,15,30,140),"180p_3":si(180,180,15,30,100),"180p_4":si(240,180,15,30,120),"240p":si(320,240,15,40,200),"240p_1":si(320,240,15,40,200),"240p_3":si(240,240,15,40,140),"240p_4":si(424,240,15,40,220),"360p":si(640,360,15,80,400),"360p_1":si(640,360,15,80,400),"360p_3":si(360,360,15,80,260),"360p_4":si(640,360,30,80,600),"360p_6":si(360,360,30,80,400),"360p_7":si(480,360,15,80,320),"360p_8":si(480,360,30,80,490),"360p_9":si(640,360,15,80,800),"360p_10":si(640,360,24,80,800),"360p_11":si(640,360,24,80,1e3),"480p":si(640,480,15,100,500),"480p_1":si(640,480,15,100,500),"480p_2":si(640,480,30,100,1e3),"480p_3":si(480,480,15,100,400),"480p_4":si(640,480,30,100,750),"480p_6":si(480,480,30,100,600),"480p_8":si(848,480,15,100,610),"480p_9":si(848,480,30,100,930),"480p_10":si(640,480,10,100,400),"720p":si(1280,720,15,120,1130),"720p_1":si(1280,720,15,120,1130),"720p_2":si(1280,720,30,120,2e3),"720p_3":si(1280,720,30,120,1710),"720p_5":si(960,720,15,120,910),"720p_6":si(960,720,30,120,1380),"1080p":si(1920,1080,15,120,2080),"1080p_1":si(1920,1080,15,120,2080),"1080p_2":si(1920,1080,30,120,3e3),"1080p_3":si(1920,1080,30,120,3150),"1080p_5":si(1920,1080,60,120,4780),"1440p":si(2560,1440,30,120,4850),"1440p_1":si(2560,1440,30,120,4850),"1440p_2":si(2560,1440,60,120,7350),"4k":si(3840,2160,30,120,8910),"4k_1":si(3840,2160,30,120,8910),"4k_3":si(3840,2160,60,120,13500)},i7={"480p":Cp(640,480,5),"480p_1":Cp(640,480,5),"480p_2":Cp(640,480,30),"480p_3":Cp(640,480,15),"720p":Cp(1280,720,5),"720p_1":Cp(1280,720,5),"720p_2":Cp(1280,720,30),"720p_3":Cp(1280,720,15),"1080p":Cp(1920,1080,5),"1080p_1":Cp(1920,1080,5),"1080p_2":Cp(1920,1080,30),"1080p_3":Cp(1920,1080,15)},o7={"1SL1TL":kF(1,1),"3SL3TL":kF(3,3),"2SL3TL":kF(2,3)};function L0(n){return"string"==typeof n?Object.assign({},r7[n]):n}function DF(n){return"string"==typeof n?Object.assign({},i7[n]):n}function ek(n){return"string"==typeof n?Object.assign({},o7[n]):n}const gV={speech_low_quality:nk(16e3,!1),speech_standard:nk(32e3,!1,18),music_standard:nk(48e3,!1),standard_stereo:nk(48e3,!0,56),high_quality:nk(48e3,!1,128),high_quality_stereo:nk(48e3,!0,192)};function tk(n){return"string"==typeof n?Object.assign({},gV[n]):n}function kc(n,o,s){Object.keys(ul).includes(n)&&(!s&&Object.keys(_V).includes(n)||(ul[n]=o))}function Qt(n){return ul[n]}const ul={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10},_V={};function nk(n,o,s){return{sampleRate:n,stereo:o,bitrate:s}}function si(n,o,s,c,h){return{width:n,height:o,frameRate:s,bitrateMin:c,bitrateMax:h}}function Cp(n,o,s,c,h){return{width:{max:n},height:{max:o},frameRate:s,bitrateMin:c,bitrateMax:h}}function kF(n,o){return{numSpatialLayers:n,numTemporalLayers:o}}TM||(ul.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],ul.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],ul.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],ul.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ul.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],ul.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],ul.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",ul.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",ul.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",ul.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",ul.AREAS=["NORTH_AMERICA","OVERSEA"]);const EW=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],rk=[],zw=[];var Ty=Xv,s7=Ad,a7=lh,Yw=function(n,o,s){var c=Ty(o);c in n?s7.f(n,c,a7(0,s)):n[c]=s},PF=oI,bW=sp,SW=Yw,CW=ri.Array,c7=Math.max,vV=function(n,o,s){for(var c=bW(n),h=PF(o,c),g=PF(void 0===s?c:s,c),f=CW(c7(g-h,0)),A=0;h<g;h++,A++)SW(f,A,n[h]);return f.length=A,f},u7=vV,IW=Math.floor,AV=function(n,o){var s=n.length,c=IW(s/2);return s<8?wW(n,o):l7(n,AV(u7(n,0,c),o),AV(u7(n,c),o),o)},wW=function(n,o){for(var s,c,h=n.length,g=1;g<h;){for(c=g,s=n[g];c&&o(n[c-1],s)>0;)n[c]=n[--c];c!==g++&&(n[c]=s)}return n},l7=function(n,o,s,c){for(var h=o.length,g=s.length,f=0,A=0;f<h||A<g;)n[f+A]=f<h&&A<g?c(o[f],s[A])<=0?o[f++]:s[A++]:f<h?o[f++]:s[A++];return n},d7=AV,h7=Xp.match(/firefox\/(\d+)/i),TW=!!h7&&+h7[1],RW=/MSIE|Trident/.test(Xp),p7=Xp.match(/AppleWebKit\/(\d+)\./),NF=us,yV=Qi,EV=vd,DW=pu,f7=sp,bV=Rc,MF=Ls,m7=d7,SV=yd,CV=TW,g7=RW,IV=zg,RM=!!p7&&+p7[1],$_=[],xF=yV($_.sort),wV=yV($_.push),B0=MF(function(){$_.sort(void 0)}),lg=MF(function(){$_.sort(null)}),_7=SV("sort"),LF=!MF(function(){if(IV)return IV<70;if(!(CV&&CV>3)){if(g7)return!0;if(RM)return RM<603;var n,o,s,c,h="";for(n=65;n<76;n++){switch(o=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:s=3;break;case 68:case 71:s=4;break;default:s=2}for(c=0;c<47;c++)$_.push({k:o+c,v:s})}for($_.sort(function(g,f){return f.v-g.v}),c=0;c<$_.length;c++)o=$_[c].k.charAt(0),h.charAt(h.length-1)!==o&&(h+=o);return"DGBEFHACIJK"!==h}});NF({target:"Array",proto:!0,forced:B0||!lg||!_7||!LF},{sort:function(n){void 0!==n&&EV(n);var o=DW(this);if(LF)return void 0===n?xF(o):xF(o,n);var s,c,h=[],g=f7(o);for(c=0;c<g;c++)c in o&&wV(h,o[c]);for(m7(h,function(f){return function(A,_){return void 0===_?-1:void 0===A?1:void 0!==f?+f(A,_)||0:bV(A)>bV(_)?1:-1}}(n)),s=h.length,c=0;c<s;)o[c]=h[c++];for(;c<g;)delete o[c++];return o}});var v7=fh("Array").sort,A7=nc,y7=v7,qw=Array.prototype,BF=function(n){var o=n.sort;return n===qw||A7(qw,n)&&o===qw.sort?y7:o};function Of(n,o){if("boolean"!=typeof n)throw new ye(pe.INVALID_PARAMS,"Invalid ".concat(o,": The value is of the boolean type."))}function Qa(n,o,s){if(!s.includes(n))throw new ye(pe.INVALID_PARAMS,"".concat(o," can only be set as ").concat(JSON.stringify(s)))}function Jr(n,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(n<s||n>c||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!TV(n))throw new ye(pe.INVALID_PARAMS,"invalid ".concat(o,": the value range is [").concat(s,", ").concat(c,"]. integer only"))}function dg(n,o){if("number"!=typeof n){if(!(n.min||n.max||n.ideal||n.exact))throw new ye(pe.INVALID_PARAMS,"".concat(o," is not a valid ConstrainLong"));void 0!==n.min&&Jr(n.min,"".concat(o,".min"),0,1/0),void 0!==n.max&&Jr(n.max,"".concat(o,".max"),1,1/0),void 0!==n.exact&&Jr(n.exact,"".concat(o,".exact"),1,1/0),void 0!==n.ideal&&Jr(n.ideal,"".concat(o,".ideal"),1,1/0)}else Jr(n,o,1,1/0)}function Jc(n,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==n)throw new ye(pe.INVALID_PARAMS,"".concat(o||"param"," cannot be empty"));if(!FF(n,s,c,h))throw new ye(pe.INVALID_PARAMS,"Invalid ".concat(o||"string param",": Length of the string: [").concat(s,",").concat(c,"].").concat(h?" ASCII characters only.":""))}function Jw(n,o){if(!Array.isArray(n))throw new ye(pe.INVALID_PARAMS,"".concat(o," should be an array"))}function OM(n){if("string"!=typeof n||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw se.error("Invalid Channel Name ".concat(n)),new ye(pe.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function DM(n){if(!("number"==typeof(o=n)&&Math.floor(o)===o&&0<=o&&o<=4294967295||FF(n,1,255)))throw se.error("Invalid UID ".concat(n," ").concat(typeof n)),new ye(pe.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var o;"string"==typeof n&&se.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function ho(n){return null==n}function FF(n){return"string"==typeof n&&n.length<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:255)&&n.length>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)&&(!(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])||RV(n))}function TV(n){return"number"==typeof n&&n%1==0}function RV(n){if("string"!=typeof n)return!1;for(let o=0;o<n.length;o+=1){const s=n.charCodeAt(o);if(s<0||s>255)return!1}return!0}let UF,Ji,Ra;(function(n){n.FREE="free",n.UPLOADING="uploading"})(UF||(UF={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(Ji||(Ji={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Ra||(Ra={}));const kM={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function OV(n){return Jc(n.reportId,"params.reportId",0,100,!1),Jc(n.category,"params.category",0,100,!1),Jc(n.event,"params.event",0,100,!1),Jc(n.label,"params.label",0,100,!1),Jr(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const DV={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Ha,Fo,VF,PM,pr,cr,X_,hg,F0,$w,ll,ha,Ar,NM,pa,yr,Os,fa,ei,di,Iu,Fi,MM,$c;function kV(n){return Jr(n.timeout,"config.timeout",0,1e5),Jr(n.timeoutFactor,"config.timeoutFactor",0,100,!1),Jr(n.maxRetryCount,"config.maxRetryConfig",0,1/0),Jr(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function jF(n){return Qa(n.codec,"config.codec",["vp8","vp9","av1","h264"]),Qa(n.mode,"config.mode",["rtc","live"]),void 0!==n.audioCodec&&Qa(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==n.proxyServer&&Jc(n.proxyServer,"config.proxyServer",1,1e4),void 0!==n.turnServer&&E7(n.turnServer),void 0!==n.httpRetryConfig&&kV(n.httpRetryConfig),void 0!==n.websocketRetryConfig&&kV(n.websocketRetryConfig),!0}function QF(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(o=>{if(!o.urls)throw Error()})}catch{return!1}return!0}function E7(n){return Jc(n.turnServerURL,"turnServerURL"),Jc(n.username,"username"),Jc(n.password,"password"),n.udpport&&Jr(n.udpport,"udpport",1,99999,!0),n.forceturn&&Of(n.forceturn,"forceturn"),n.security&&Of(n.security,"security"),n.tcpport&&Jr(n.tcpport,"tcpport",1,99999,!0),!0}function b7(n){return void 0!==n.level&&Qa(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics"})(Ha||(Ha={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Fo||(Fo={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(VF||(VF={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(PM||(PM={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(pr||(pr={})),function(n){n.TRACER="tracer"}(cr||(cr={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(X_||(X_={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(hg||(hg={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(F0||(F0={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}($w||($w={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(ll||(ll={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(ha||(ha={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ar||(Ar={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(NM||(NM={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK"}(pa||(pa={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result"}(yr||(yr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Os||(Os={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(fa||(fa={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response"}(ei||(ei={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile"}(di||(di={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats"}(Iu||(Iu={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Fi||(Fi={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(MM||(MM={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}($c||($c={}));const PV={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},NV={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},S7={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},kW={uplinkNetworkQuality:0,downlinkNetworkQuality:0},C7={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Pr,ms,Ry;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection"})(Pr||(Pr={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(ms||(ms={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Ry||(Ry={}));const I7={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},HF={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function ik(n,o){Jc(n.url,"".concat(o,".url"),1,1e3,!1),ho(n.x)||Jr(n.x,"".concat(o,".x"),0,1e4),ho(n.y)||Jr(n.y,"".concat(o,".y"),0,1e4),ho(n.width)||Jr(n.width,"".concat(o,".width"),0,1e4),ho(n.height)||Jr(n.height,"".concat(o,".height"),0,1e4),ho(n.zOrder)||Jr(n.zOrder,"".concat(o,".zOrder"),0,255),ho(n.alpha)||Jr(n.alpha,"".concat(o,".alpha"),0,1,!1)}const ok={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},xM={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let wu,pg,ko,MV,dc,Df,hc,Z_,gs,Ds,Uo,mr,Xc,GF,xV,Vh,ev,pi;function Xw(n){if(!n.channelName)throw new ye(pe.INVALID_PARAMS,"invalid channelName in info");if(!n.uid||"number"!=typeof n.uid)throw new ye(pe.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Jc(n.token,"info.token",1,2047),DM(n.uid),OM(n.channelName),!0}function sk(n){return Qa(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(wu||(wu={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(pg||(pg={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(ko||(ko={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(MV||(MV={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(dc||(dc={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Df||(Df={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(hc||(hc={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Z_||(Z_={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(gs||(gs={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response"}(Ds||(Ds={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Uo||(Uo={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(mr||(mr={})),function(n){n.SCREEN_TRACK="screen_track",n.LOW_STREAM="low_stream"}(Xc||(Xc={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(GF||(GF={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(xV||(xV={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Vh||(Vh={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(ev||(ev={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(pi||(pi={}));const LM=[pi.AFRICA,pi.ASIA,pi.CHINA,pi.EUROPE,pi.GLOBAL,pi.INDIA,pi.JAPAN,pi.NORTH_AMERICA,pi.OCEANIA,pi.OVERSEA,pi.SOUTH_AMERICA];let ma;!function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL"}(ma||(ma={}));const ak={CHINA:{},ASIA:{CODE:ma.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ma.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ma.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ma.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ma.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ma.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ma.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ma.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ma.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ma.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ma.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ma.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ma.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};let Oy,LV,ti,xn,Ud,vi,dl,Zw;TM&&(ak.CHINA={CODE:ma.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Oy||(Oy={}));class BV extends st{constructor(o,s){super(),J(this,"onICEConnectionStateChange",void 0),J(this,"onConnectionStateChange",void 0),J(this,"onDTLSTransportStateChange",void 0),J(this,"onDTLSTransportError",void 0),J(this,"onICETransportStateChange",void 0),J(this,"onFirstAudioReceived",void 0),J(this,"onFirstVideoReceived",void 0),J(this,"onFirstAudioDecoded",void 0),J(this,"onFirstVideoDecoded",void 0),J(this,"onSelectedLocalCandidateChanged",void 0),J(this,"onSelectedRemoteCandidateChanged",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(LV||(LV={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(ti||(ti={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(xn||(xn={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(Ud||(Ud={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter"}(vi||(vi={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(dl||(dl={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Zw||(Zw={}));const WF={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]};let jh,Kl,hl,zl,os;(function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"})(jh||(jh={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(Kl||(Kl={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(hl||(hl={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(zl||(zl={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(os||(os={}));const Pc={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Zc(){return Pc}var w7=typeof ArrayBuffer<"u"&&typeof DataView<"u",T7=xp,ck=ih,uk=G.RangeError,KF=function(n){if(void 0===n)return 0;var o=T7(n),s=ck(o);if(o!==s)throw uk("Wrong length or index");return s},FV=G.Array,zF=Math.abs,Ip=Math.pow,R7=Math.floor,UV=Math.log,PW=Math.LN2,MW=rd,O7=oo,D7=bc,VV=jn,k7=fo,jV=be,YF=oo,QV=bc,P7=function(n,o,s){var c=VV(o);c in n?k7.f(n,c,jV(0,s)):n[c]=s},HV=G.Array,N7=Math.max,M7=function(n,o,s){for(var c=QV(n),h=YF(o,c),g=YF(void 0===s?c:s,c),f=HV(N7(g-h,0)),A=0;h<g;h++,A++)P7(f,A,n[h]);return f.length=A,f},qF=ue,BM=O,x7=w7,FM=od,GV=aE,UM=k,VM=Sv,e1=xp,L7=ih,t1=KF,WV_pack=function(n,o,s){var c,h,g,f=FV(s),A=8*s-o-1,_=(1<<A)-1,E=_>>1,S=23===o?Ip(2,-24)-Ip(2,-77):0,I=n<0||0===n&&1/n<0?1:0,R=0;for((n=zF(n))!=n||n===1/0?(h=n!=n?1:0,c=_):(c=R7(UV(n)/PW),n*(g=Ip(2,-c))<1&&(c--,g*=2),(n+=c+E>=1?S/g:S*Ip(2,1-E))*g>=2&&(c++,g/=2),c+E>=_?(h=0,c=_):c+E>=1?(h=(n*g-1)*Ip(2,o),c+=E):(h=n*Ip(2,E-1)*Ip(2,o),c=0));o>=8;)f[R++]=255&h,h/=256,o-=8;for(c=c<<o|h,A+=o;A>0;)f[R++]=255&c,c/=256,A-=8;return f[--R]|=128*I,f},WV_unpack=function(n,o){var s,c=n.length,h=8*c-o-1,g=(1<<h)-1,f=g>>1,A=h-7,_=c-1,E=n[_--],S=127&E;for(E>>=7;A>0;)S=256*S+n[_--],A-=8;for(s=S&(1<<-A)-1,S>>=-A,A+=o;A>0;)s=256*s+n[_--],A-=8;if(0===S)S=1-f;else{if(S===g)return s?NaN:E?-1/0:1/0;s+=Ip(2,o),S-=f}return(E?-1:1)*s*Ip(2,S-o)},$F=QC,XF=ah,B7=Wf.f,ZF=fo.f,KV=M7,zV=cE,e3=ad.PROPER,YV=ad.CONFIGURABLE,n1=Pu.get,t3=Pu.set,n3="ArrayBuffer",jM="Wrong index",kf=G.ArrayBuffer,wp=kf,U0=wp&&wp.prototype,Yl=G.DataView,V0=Yl&&Yl.prototype,r3=Object.prototype,U7=G.Array,dk=G.RangeError,V7=qF(function(n){for(var o=MW(this),s=D7(o),c=arguments.length,h=O7(c>1?arguments[1]:void 0,s),g=c>2?arguments[2]:void 0,f=void 0===g?s:O7(g,s);f>h;)o[h++]=n;return o}),j7=qF([].reverse),QM=WV_pack,i3=WV_unpack,qV=function(n){return[255&n]},o3=function(n){return[255&n,n>>8&255]},JV=function(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]},s3=function(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},Q7=function(n){return QM(n,23,4)},$V=function(n){return QM(n,52,8)},HM=function(n,o){ZF(n.prototype,o,{get:function(){return n1(this)[o]}})},tv=function(n,o,s,c){var h=t1(s),g=n1(n);if(h+o>g.byteLength)throw dk(jM);var f=n1(g.buffer).bytes,A=h+g.byteOffset,_=KV(f,A,A+o);return c?_:j7(_)},j0=function(n,o,s,c,h,g){var f=t1(s),A=n1(n);if(f+o>A.byteLength)throw dk(jM);for(var _=n1(A.buffer).bytes,E=f+A.byteOffset,S=c(+h),I=0;I<o;I++)_[E+I]=S[g?I:o-I-1]};if(x7){var H7=e3&&kf.name!==n3;if(UM(function(){kf(1)})&&UM(function(){new kf(-1)})&&!UM(function(){return new kf,new kf(1.5),new kf(NaN),H7&&!YV}))H7&&YV&&FM(kf,"name",n3);else{(wp=function(n){return VM(this,U0),new kf(t1(n))}).prototype=U0;for(var XV,a3=B7(kf),ZV=0;a3.length>ZV;)(XV=a3[ZV++])in wp||FM(wp,XV,kf[XV]);U0.constructor=wp}XF&&$F(V0)!==r3&&XF(V0,r3);var GM=new Yl(new wp(2)),e5=qF(V0.setInt8);GM.setInt8(0,2147483648),GM.setInt8(1,2147483649),!GM.getInt8(0)&&GM.getInt8(1)||GV(V0,{setInt8:function(n,o){e5(this,n,o<<24>>24)},setUint8:function(n,o){e5(this,n,o<<24>>24)}},{unsafe:!0})}else U0=(wp=function(n){VM(this,U0);var o=t1(n);t3(this,{bytes:V7(U7(o),0),byteLength:o}),BM||(this.byteLength=o)}).prototype,V0=(Yl=function(n,o,s){VM(this,V0),VM(n,U0);var c=n1(n).byteLength,h=e1(o);if(h<0||h>c)throw dk("Wrong offset");if(h+(s=void 0===s?c-h:L7(s))>c)throw dk("Wrong length");t3(this,{buffer:n,byteLength:s,byteOffset:h}),BM||(this.buffer=n,this.byteLength=s,this.byteOffset=h)}).prototype,BM&&(HM(wp,"byteLength"),HM(Yl,"buffer"),HM(Yl,"byteLength"),HM(Yl,"byteOffset")),GV(V0,{getInt8:function(n){return tv(this,1,n)[0]<<24>>24},getUint8:function(n){return tv(this,1,n)[0]},getInt16:function(n){var o=tv(this,2,n,arguments.length>1?arguments[1]:void 0);return(o[1]<<8|o[0])<<16>>16},getUint16:function(n){var o=tv(this,2,n,arguments.length>1?arguments[1]:void 0);return o[1]<<8|o[0]},getInt32:function(n){return s3(tv(this,4,n,arguments.length>1?arguments[1]:void 0))},getUint32:function(n){return s3(tv(this,4,n,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(n){return i3(tv(this,4,n,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(n){return i3(tv(this,8,n,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(n,o){j0(this,1,n,qV,o)},setUint8:function(n,o){j0(this,1,n,qV,o)},setInt16:function(n,o){j0(this,2,n,o3,o,arguments.length>2?arguments[2]:void 0)},setUint16:function(n,o){j0(this,2,n,o3,o,arguments.length>2?arguments[2]:void 0)},setInt32:function(n,o){j0(this,4,n,JV,o,arguments.length>2?arguments[2]:void 0)},setUint32:function(n,o){j0(this,4,n,JV,o,arguments.length>2?arguments[2]:void 0)},setFloat32:function(n,o){j0(this,4,n,Q7,o,arguments.length>2?arguments[2]:void 0)},setFloat64:function(n,o){j0(this,8,n,$V,o,arguments.length>2?arguments[2]:void 0)}});zV(wp,n3),zV(Yl,"DataView");var c3={ArrayBuffer:wp,DataView:Yl},LW=ba,t5=ue,BW=k,G7=iu,W7=oo,FW=ih,K7=uT,u3=c3.ArrayBuffer,l3=c3.DataView,n5=l3.prototype,r5=t5(u3.prototype.slice),d3=t5(n5.getUint8),eu=t5(n5.setUint8);LW({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:BW(function(){return!new u3(2).slice(1,void 0).byteLength})},{slice:function(n,o){if(r5&&void 0===o)return r5(G7(this),n);for(var s=G7(this).byteLength,c=W7(n,s),h=W7(void 0===o?s:o,s),g=new(K7(this,u3))(FW(h-c)),f=new l3(this),A=new l3(g),_=0;c<h;)eu(A,_++,d3(f,c++));return g}});var Vd,Pf,hk,Nf={exports:{}},pk=w7,h3=O,Nc=G,fk=rt,nv=$t,Q0=Ac,i5=Ma,p3=Io,f3=od,m3=eh.exports,UW=fo.f,H0=Mr,mk=QC,ql=ah,z7=Po,Mf=vv,G0=Nc.Int8Array,gk=G0&&G0.prototype,fg=Nc.Uint8ClampedArray,Y7=fg&&fg.prototype,mg=G0&&mk(G0),xf=gk&&mk(gk),q7=Object.prototype,g3=Nc.TypeError,_3=z7("toStringTag"),r1=Mf("TYPED_ARRAY_TAG"),gg=Mf("TYPED_ARRAY_CONSTRUCTOR"),Dy=pk&&!!ql&&"Opera"!==i5(Nc.opera),o5=!1,rv={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},WM={BigInt64Array:8,BigUint64Array:8},v3=function(n){if(!nv(n))return!1;var o=i5(n);return Q0(rv,o)||Q0(WM,o)};for(Vd in rv)(hk=(Pf=Nc[Vd])&&Pf.prototype)?f3(hk,gg,Pf):Dy=!1;for(Vd in WM)(hk=(Pf=Nc[Vd])&&Pf.prototype)&&f3(hk,gg,Pf);if((!Dy||!fk(mg)||mg===Function.prototype)&&(mg=function(){throw g3("Incorrect invocation")},Dy))for(Vd in rv)Nc[Vd]&&ql(Nc[Vd],mg);if((!Dy||!xf||xf===q7)&&(xf=mg.prototype,Dy))for(Vd in rv)Nc[Vd]&&ql(Nc[Vd].prototype,xf);if(Dy&&mk(Y7)!==xf&&ql(Y7,xf),h3&&!Q0(xf,_3))for(Vd in o5=!0,UW(xf,_3,{get:function(){return nv(this)?this[r1]:void 0}}),rv)Nc[Vd]&&f3(Nc[Vd],r1,Vd);var ky={NATIVE_ARRAY_BUFFER_VIEWS:Dy,TYPED_ARRAY_CONSTRUCTOR:gg,TYPED_ARRAY_TAG:o5&&r1,aTypedArray:function(n){if(v3(n))return n;throw g3("Target is not a typed array")},aTypedArrayConstructor:function(n){if(fk(n)&&(!ql||H0(mg,n)))return n;throw g3(p3(n)+" is not a typed array constructor")},exportTypedArrayMethod:function(n,o,s,c){if(h3){if(s)for(var h in rv){var g=Nc[h];if(g&&Q0(g.prototype,n))try{delete g.prototype[n]}catch{try{g.prototype[n]=o}catch{}}}xf[n]&&!s||m3(xf,n,s?o:Dy&&gk[n]||o,c)}},exportTypedArrayStaticMethod:function(n,o,s){var c,h;if(h3){if(ql){if(s)for(c in rv)if((h=Nc[c])&&Q0(h,n))try{delete h[n]}catch{}if(mg[n]&&!s)return;try{return m3(mg,n,s?o:Dy&&mg[n]||o)}catch{}}for(c in rv)!(h=Nc[c])||h[n]&&!s||m3(h,n,o)}},isView:function(n){if(!nv(n))return!1;var o=i5(n);return"DataView"===o||Q0(rv,o)||Q0(WM,o)},isTypedArray:v3,TypedArray:mg,TypedArrayPrototype:xf},W0=k,pc=mi,y3=G.ArrayBuffer,_g=G.Int8Array,a5=!ky.NATIVE_ARRAY_BUFFER_VIEWS||!W0(function(){_g(1)})||!W0(function(){new _g(-1)})||!pc(function(n){new _g,new _g(null),new _g(1.5),new _g(n)},!0)||W0(function(){return 1!==new _g(new y3(2),1,void 0).length}),E3=$t,KM=Math.floor,c5=Number.isInteger||function(n){return!E3(n)&&isFinite(n)&&KM(n)===n},J7=xp,$7=G.RangeError,_k=G.RangeError,u5=function(n,o){var s=function(n){var o=J7(n);if(o<0)throw $7("The argument can't be less than 0");return o}(n);if(s%o)throw _k("Wrong offset");return s},l5=Sc,VW=ae,jW=Ur,QW=rd,HW=bc,GW=iT,WW=hE,Z7=Cv,e9=ky.aTypedArrayConstructor,d5=Ue,t9=G,n9=Array.isArray||function(n){return"Array"==d5(n)},r9=cT,i9=$t,h5=Po("species"),zM=t9.Array,f5=Sc,m5=Kt,g5=rd,_5=bc,o9=function(n,o){return new(function(n){var o;return n9(n)&&(r9(o=n.constructor)&&(o===zM||n9(o.prototype))||i9(o)&&null===(o=o[h5]))&&(o=void 0),void 0===o?zM:o}(n))(0===o?0:o)},v5=ue([].push),K0=function(n){var o=1==n,s=2==n,c=3==n,h=4==n,g=6==n,f=7==n,A=5==n||g;return function(_,E,S,I){for(var R,M,Q=g5(_),H=m5(Q),Z=f5(E,S),le=_5(H),ge=0,Se=I||o9,Ne=o?Se(_,le):s||f?Se(_,0):void 0;le>ge;ge++)if((A||ge in H)&&(M=Z(R=H[ge],ge,Q),n))if(o)Ne[ge]=M;else if(M)switch(n){case 3:return!0;case 5:return R;case 6:return ge;case 2:v5(Ne,R)}else switch(n){case 4:return!1;case 7:v5(Ne,R)}return g?-1:c||h?h:Ne}},Ga={forEach:K0(0),map:K0(1),filter:K0(2),some:K0(3),every:K0(4),find:K0(5),findIndex:K0(6),filterReject:K0(7)},z0=ba,A5=G,s9=ae,a9=a5,u9=Sv,KW=be,vk=od,l9=c5,zW=ih,d9=KF,b3=u5,h9=jn,YM=Ac,p9=Ma,E5=$t,qM=jo,f9=Cn,m9=Mr,JM=ah,YW=Wf.f,g9=function(n){var o,s,c,h,g,f,A=jW(this),_=QW(n),E=arguments.length,S=E>1?arguments[1]:void 0,I=void 0!==S,R=WW(_);if(R&&!Z7(R))for(f=(g=GW(_,R)).next,_=[];!(h=VW(f,g)).done;)_.push(h.value);for(I&&E>2&&(S=l5(S,arguments[2])),s=HW(_),c=new(e9(A))(s),o=0;s>o;o++)c[o]=I?S(_[o],o):_[o];return c},b5=Ga.forEach,$M=lE,S5=fo,_9=zu,S3=Pu.get,XM=Pu.set,o1=S5.f,ZM=V.f,ex=Math.round,I5=A5.RangeError,v9=c3.ArrayBuffer,qW=v9.prototype,JW=c3.DataView,tx=ky.NATIVE_ARRAY_BUFFER_VIEWS,$W=ky.TYPED_ARRAY_CONSTRUCTOR,A9=ky.TYPED_ARRAY_TAG,y9=ky.TypedArray,nx=ky.TypedArrayPrototype,XW=ky.aTypedArrayConstructor,w5=ky.isTypedArray,C3="BYTES_PER_ELEMENT",T5="Wrong length",R5=function(n,o){XW(n);for(var s=0,c=o.length,h=new n(c);c>s;)h[s]=o[s++];return h},I3=function(n,o){o1(n,o,{get:function(){return S3(this)[o]}})},E9=function(n){var o;return m9(qW,n)||"ArrayBuffer"==(o=p9(n))||"SharedArrayBuffer"==o},b9=function(n,o){return w5(n)&&!qM(o)&&o in n&&l9(+o)&&o>=0},S9=function(n,o){return o=h9(o),b9(n,o)?KW(2,n[o]):ZM(n,o)},w3=function(n,o,s){return o=h9(o),!(b9(n,o)&&E5(s)&&YM(s,"value"))||YM(s,"get")||YM(s,"set")||s.configurable||YM(s,"writable")&&!s.writable||YM(s,"enumerable")&&!s.enumerable?o1(n,o,s):(n[o]=s.value,n)};O?(tx||(V.f=S9,S5.f=w3,I3(nx,"buffer"),I3(nx,"byteOffset"),I3(nx,"byteLength"),I3(nx,"length")),z0({target:"Object",stat:!0,forced:!tx},{getOwnPropertyDescriptor:S9,defineProperty:w3}),Nf.exports=function(n,o,s){var c=n.match(/\d+$/)[0]/8,h=n+(s?"Clamped":"")+"Array",g="get"+n,f="set"+n,A=A5[h],_=A,E=_&&_.prototype,S={},I=function(R,M){o1(R,M,{get:function(){return H=M,(Z=S3(this)).view[g](H*c+Z.byteOffset,!0);var H,Z},set:function(Q){return Z=M,le=Q,ge=S3(this),s&&(le=(le=ex(le))<0?0:le>255?255:255&le),void ge.view[f](Z*c+ge.byteOffset,le,!0);var Z,le,ge},enumerable:!0})};tx?a9&&(_=o(function(R,M,Q,H){return u9(R,E),_9(E5(M)?E9(M)?void 0!==H?new A(M,b3(Q,c),H):void 0!==Q?new A(M,b3(Q,c)):new A(M):w5(M)?R5(_,M):s9(g9,_,M):new A(d9(M)),R,_)}),JM&&JM(_,y9),b5(YW(A),function(R){R in _||vk(_,R,A[R])}),_.prototype=E):(_=o(function(R,M,Q,H){u9(R,E);var Z,le,ge,Se=0,Ne=0;if(E5(M)){if(!E9(M))return w5(M)?R5(_,M):s9(g9,_,M);Z=M,Ne=b3(Q,c);var nt=M.byteLength;if(void 0===H){if(nt%c||(le=nt-Ne)<0)throw I5(T5)}else if((le=zW(H)*c)+Ne>nt)throw I5(T5);ge=le/c}else ge=d9(M),Z=new v9(le=ge*c);for(XM(R,{buffer:Z,byteOffset:Ne,byteLength:le,length:ge,view:new JW(Z)});Se<ge;)I(R,Se++)}),JM&&JM(_,y9),E=_.prototype=f9(nx)),E.constructor!==_&&vk(E,"constructor",_),vk(E,$W,_),A9&&vk(E,A9,h),S[h]=_,z0({global:!0,forced:_!=A,sham:!tx},S),C3 in _||vk(_,C3,c),C3 in E||vk(E,C3,c),$M(h)}):Nf.exports=function(){},(0,Nf.exports)("Uint8",function(n){return function(o,s,c){return n(this,o,s,c)}});var ZW=bc,eK=xp,tK=ky.aTypedArray;(0,ky.exportTypedArrayMethod)("at",function(n){var o=tK(this),s=ZW(o),c=eK(n),h=c>=0?c:s+c;return h<0||h>=s?void 0:o[h]});var I9=ae,O5=ky,nK=bc,rK=u5,iK=rd,w9=k,oK=G.RangeError,D5=G.Int8Array,T9=D5&&D5.prototype,R9=T9&&T9.set,sK=O5.aTypedArray,aK=O5.exportTypedArrayMethod,k5=!w9(function(){var n=new Uint8ClampedArray(2);return I9(R9,n,{length:1,0:3},1),3!==n[1]}),cK=k5&&O5.NATIVE_ARRAY_BUFFER_VIEWS&&w9(function(){var n=new D5(2);return n.set(1),n.set("2",1),0!==n[0]||2!==n[1]});aK("set",function(n){sK(this);var o=rK(arguments.length>1?arguments[1]:void 0,1),s=iK(n);if(k5)return I9(R9,this,s,o);var c=this.length,h=nK(s),g=0;if(h+o>c)throw oK("Wrong length");for(;g<h;)this[o+g]=s[g++]},!k5||cK);var O9=M7,uK=Math.floor,P5=function(n,o){var s=n.length,c=uK(s/2);return s<8?lK(n,o):dK(n,P5(O9(n,0,c),o),P5(O9(n,c),o),o)},lK=function(n,o){for(var s,c,h=n.length,g=1;g<h;){for(c=g,s=n[g];c&&o(n[c-1],s)>0;)n[c]=n[--c];c!==g++&&(n[c]=s)}return n},dK=function(n,o,s,c){for(var h=o.length,g=s.length,f=0,A=0;f<h||A<g;)n[f+A]=f<h&&A<g?c(o[f],s[A])<=0?o[f++]:s[A++]:f<h?o[f++]:s[A++];return n},hK=P5,N5=xr.match(/firefox\/(\d+)/i),D9=!!N5&&+N5[1],pK=/MSIE|Trident/.test(xr),k9=xr.match(/AppleWebKit\/(\d+)\./),M5=k,gK=Vn,_K=hK,M9=D9,vK=pK,x9=ya,L9=!!k9&&+k9[1],AK=G.Array,yK=ky.aTypedArray,EK=ky.exportTypedArrayMethod,rx=G.Uint16Array,Ak=rx&&ue(rx.prototype.sort),bK=!(!Ak||M5(function(){Ak(new rx(2),null)})&&M5(function(){Ak(new rx(2),{})})),B9=!!Ak&&!M5(function(){if(x9)return x9<74;if(M9)return M9<67;if(vK)return!0;if(L9)return L9<602;var n,o,s=new rx(516),c=AK(516);for(n=0;n<516;n++)o=n%4,s[n]=515-n,c[n]=n-2*o+3;for(Ak(s,function(h,g){return(h/4|0)-(g/4|0)}),n=0;n<516;n++)if(s[n]!==c[n])return!0});EK("sort",function(n){return void 0!==n&&gK(n),B9?Ak(this,n):_K(yK(this),function(o){return function(s,c){return void 0!==o?+o(s,c)||0:c!=c?-1:s!=s?1:0===s&&0===c?1/s>0&&1/c<0?1:-1:s>c}}(n))},!B9||bK);var SK=lE,F9=c3.ArrayBuffer;let ga;ba({global:!0,forced:G.ArrayBuffer!==F9},{ArrayBuffer:F9}),SK("ArrayBuffer"),function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(ga||(ga={}));var IK=md,ix=Array.isArray||function(n){return"Array"==IK(n)},wK=ri,U9=ix,TK=bh,RK=Qu,OK=Fs("species"),V9=wK.Array,j9=function(n,o){return new(function(n){var o;return U9(n)&&(TK(o=n.constructor)&&(o===V9||U9(o.prototype))||RK(o)&&null===(o=o[OK]))&&(o=void 0),void 0===o?V9:o}(n))(0===o?0:o)},kK=ph,PK=hm,NK=pu,MK=sp,xK=j9,Q9=Qi([].push),q0=function(n){var o=1==n,s=2==n,c=3==n,h=4==n,g=6==n,f=7==n,A=5==n||g;return function(_,E,S,I){for(var R,M,Q=NK(_),H=PK(Q),Z=kK(E,S),le=MK(H),ge=0,Se=I||xK,Ne=o?Se(_,le):s||f?Se(_,0):void 0;le>ge;ge++)if((A||ge in H)&&(M=Z(R=H[ge],ge,Q),n))if(o)Ne[ge]=M;else if(M)switch(n){case 3:return!0;case 5:return R;case 6:return ge;case 2:Q9(Ne,R)}else switch(n){case 4:return!1;case 7:Q9(Ne,R)}return g?-1:c||h?h:Ne}},H9={forEach:q0(0),map:q0(1),filter:q0(2),some:q0(3),every:q0(4),find:q0(5),findIndex:q0(6),filterReject:q0(7)},LK=H9.forEach,G9=yd("forEach")?[].forEach:function(n){return LK(this,n,arguments.length>1?arguments[1]:void 0)};us({target:"Array",proto:!0,forced:[].forEach!=G9},{forEach:G9});var BK=fh("Array").forEach,FK=pp,UK=Bs,VK=nc,jK=BK,x5=Array.prototype,QK={DOMTokenList:!0,NodeList:!0},GK=pu,L5=ic;us({target:"Object",stat:!0,forced:Ls(function(){L5(1)})},{keys:function(n){return L5(GK(n))}});var s1=ip.Object.keys,ox=cB,W9=us,sx=ix,T3=Qi([].reverse),R3=[1,2];W9({target:"Array",proto:!0,forced:String(R3)===String(R3.reverse())},{reverse:function(){return sx(this)&&(this.length=this.length),T3(this)}});var yk=fh("Array").reverse,O3=nc,D3=yk,ax=Array.prototype,B5=Ls,F5=zg,K9=Fs("species"),Tu=function(n){return F5>=51||!B5(function(){var o=[];return(o.constructor={})[K9]=function(){return{foo:1}},1!==o[n](Boolean).foo})},Oa=us,iv=ri,U5=ix,cx=bh,fc=Qu,vg=oI,WK=sp,V5=gd,z9=Yw,Y9=Fs,j5=vO,q9=Tu("slice"),J9=Y9("species"),ux=iv.Array,$9=Math.max;Oa({target:"Array",proto:!0,forced:!q9},{slice:function(n,o){var s,c,h,g=V5(this),f=WK(g),A=vg(n,f),_=vg(void 0===o?f:o,f);if(U5(g)&&((cx(s=g.constructor)&&(s===ux||U5(s.prototype))||fc(s)&&null===(s=s[J9]))&&(s=void 0),s===ux||void 0===s))return j5(g,A,_);for(c=new(void 0===s?ux:s)($9(_-A,0)),h=0;A<_;A++,h++)A in g&&z9(c,h,g[A]);return c.length=h,c}});var lx=fh("Array").slice,a1=nc,KK=lx,dx=Array.prototype;function rr(n,o,s,c,h){var g,f,A,_={};return function(n){var o=n.forEach;return n===x5||VK(x5,n)&&o===x5.forEach||UK(QK,FK(n))?jK:o}(g=s1(c)).call(g,function(E){_[E]=c[E]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=ox(f=function(n){var o=n.reverse;return n===ax||O3(ax,n)&&o===ax.reverse?D3:o}(A=function(n){var o=n.slice;return n===dx||a1(dx,n)&&o===dx.slice?KK:o}(s).call(s)).call(A)).call(f,function(E,S){return S(n,o,E)||E},_),h&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(h):void 0,_.initializer=void 0),void 0===_.initializer&&(Cy(n,o,_),_=null),_}var X9=fh("Array").values,Z9=pp,P3=Bs,Q5=nc,eQ=X9,hx=Array.prototype,tQ={DOMTokenList:!0,NodeList:!0},ov=function(n){var o=n.values;return n===hx||Q5(hx,n)&&o===hx.values||P3(tQ,Z9(n))?eQ:o},px=fh("Array").keys,zK=pp,H5=Bs,fx=nc,N3=px,M3=Array.prototype,x3={DOMTokenList:!0,NodeList:!0},Py=function(n){var o=n.keys;return n===M3||fx(M3,n)&&o===M3.keys||H5(x3,zK(n))?N3:o};function L3(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function G5(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?L3(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):L3(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let mx=0,W5=0;function Qh(n,o,s){return new Qn((c,h)=>{o.timeout=o.timeout||Qt("HTTP_CONNECT_TIMEOUT"),o.responseType=o.responseType||"json",o.data&&!s?(o.data=JSON.stringify(o.data),mx+=Rk(o.data)):s&&(o.data.size?mx+=o.data.size:o.data instanceof FormData?mx+=function(g){let f=0;return/DingTalk/i.test(navigator.userAgent)&&g.realFormData&&(g=g.realFormData),g.forEach(A=>{f+="string"==typeof A?Rk(A):A.size}),f+138}(o.data):mx+=Rk(JSON.stringify(o.data))),o.headers=o.headers||{},o.headers["Content-Type"]=o.headers["Content-Type"]||"application/json",o.method="POST",o.url=n,tt.request(o).then(g=>{"string"==typeof g.data?W5+=Rk(g.data):g.data instanceof ArrayBuffer||g.data instanceof Uint8Array?W5+=g.data.byteLength:W5+=Rk(JSON.stringify(g.data)),c(g.data)}).catch(g=>{tt.isCancel(g)?h(new ye(pe.OPERATION_ABORTED,"cancel token canceled")):h("ECONNABORTED"===g.code?new ye(pe.NETWORK_TIMEOUT,g.message):g.response?new ye(pe.NETWORK_RESPONSE_ERROR,g.response.status):new ye(pe.NETWORK_ERROR,g.message))})})}function YK(n,o){return K5.apply(this,arguments)}function K5(){return K5=F(function*(n,o){const s=new Blob([o.data],{type:"buffer"});return yield Qh(n,G5(G5({},o),{},{data:s,headers:{"Content-Type":"application/octet-stream"}}),!0)}),K5.apply(this,arguments)}const _a=new class extends st{set networkState(n){se.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(Zw.NETWORK_STATE_CHANGE,n,this._networkState),n===dl.ONLINE?this.emit(Zw.ONLINE):n===dl.OFFLINE&&(this.onlineWaiter=new Qn(o=>{this.once(Zw.ONLINE,()=>{this.onlineWaiter=void 0,o(dl.ONLINE)})}),this.emit(Zw.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),J(this,"_moduleName","network-indicator"),J(this,"_networkState",dl.ONLINE),J(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=dl.ONLINE}),window.addEventListener("offline",()=>{this.networkState=dl.OFFLINE})}};let B3=!1;const jd=new class extends st{constructor(){super(...arguments),J(this,"onAutoplayFailed",void 0),J(this,"onAudioAutoplayFailed",void 0)}};function z5(){const n=wi();if(!B3){const o=s=>{s.preventDefault(),B3=!1,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ii.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0)};B3=!0,"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ii.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),se.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),jd.onAutoplayFailed?jd.onAutoplayFailed():se.warning(jd.onAudioAutoplayFailed?"AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .":"We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),jd.emit("autoplay-failed")}}function F3(n){return(new TextEncoder).encode(n)}const U3=function(n,o){const s=new Uint8Array(n.byteLength+o.byteLength);return s.set(new Uint8Array(n),0),s.set(new Uint8Array(o),n.byteLength),s},qK=function(){var n=F(function*(o){return function(s,c){let h="";return new Uint8Array(s).forEach(g=>{h+=g.toString(16).padStart(2,"0")}),h}(yield crypto.subtle.digest("SHA-256",F3(o)))});return function(s){return n.apply(this,arguments)}}();var nQ;function rQ(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function $r(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?rQ(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):rQ(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function Ek(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Jt};return function(o,s,c){const h=o[s];if("function"==typeof h){const g="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=function(){for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];const E=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(s),options:A,tag:cr.TRACER,reportResult:n.reportResult});try{const S=h.apply(this,A);return E.onSuccess(n.reportResult&&S),S}catch(S){throw E.onError(S),S}}}return c}}function bk(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{report:Jt};return function(o,s,c){const h=o[s];if("function"==typeof h){const g="AgoraRTCClient"===o.constructor.name?"Client":o.constructor.name;c.value=F(function*(){for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];const E=n.report.reportApiInvoke(this._sessionId||null,{name:"".concat(g,".").concat(s),options:A,tag:cr.TRACER});try{const S=yield h.apply(this,A);return E.onSuccess(),S}catch(S){throw E.onError(S),S}})}return c}}const Jt=new(Qs("AgoraRTCEventReport")(nQ=class{constructor(){var n=this;J(this,"baseInfoMap",new Map),J(this,"proxyServer",void 0),J(this,"clientList",rk),J(this,"eventUploadTimer",void 0),J(this,"setSessionIdTimer",void 0),J(this,"url",void 0),J(this,"backupUrl",void 0),J(this,"_appId",void 0),J(this,"keyEventUploadPendingItems",[]),J(this,"normalEventUploadPendingItems",[]),J(this,"apiInvokeUploadPendingItems",[]),J(this,"apiInvokeCount",0),J(this,"ltsList",[]),J(this,"lastSendNormalEventTime",Date.now()),J(this,"customReportCounterTimer",void 0),J(this,"customReportCount",0),J(this,"extApiInvoke",function(){var o=F(function*(s){for(const c of s){const h=$r($r({},c),{},{sid:null,invokeId:++n.apiInvokeCount,tag:cr.TRACER});n.sendApiInvoke(h)}});return function(s){return o.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Qt("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Qt("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return se.error("adjust session ".concat(n," start time, sid is not exist or info is undefined")),void zt("error",this,"adjustSessionStartTime","adjust session ".concat(n," start time, sid is not exist or info is undefined"));const o=this.baseInfoMap.get(n),s=Date.now(),c=o.startTime;o.startTime=s,se.debug("rewrite session ".concat(n," startTime: ").concat(s," , ").concat(s-c,"ms")),zt("debug",this,"adjustSessionStartTime",void 0,"rewrite session ".concat(n," startTime: ").concat(s," , ").concat(s-c,"ms")),this.baseInfoMap.set(n,o)}setAppId(n){this._appId=n}reportApiInvoke(n,o,s){o.timeout=o.timeout||6e4,o.reportResult=void 0===o.reportResult||o.reportResult;const c=Date.now();this.apiInvokeCount+=1;const h=this.apiInvokeCount,g=()=>({tag:o.tag,invokeId:h,sid:n,name:o.name,apiInvokeTime:c,options:o.options,states:o.states||null}),f=!!Qt("SHOW_REPORT_INVOKER_LOG");f&&se.info("".concat(o.name," start"),o.options);let A=!1;Mc(o.timeout).then(()=>{A||(this.sendApiInvoke($r($r({},g()),{},{error:pe.API_INVOKE_TIMEOUT,success:!1})),se.debug("".concat(o.name," timeout")))});const _=new ye(pe.UNEXPECTED_ERROR,"".concat(o.name,": this api invoke is end"));return{onSuccess:E=>{const S=()=>{if(A)throw _;return A=!0,this.sendApiInvoke($r($r({},g()),{},{success:!0},o.reportResult&&{result:E})),f&&se.info("".concat(o.name," onSuccess")),E};return s?lj(S,o.name+"Success",s,()=>A=!0):S()},onError:E=>{const S=()=>{if(A)throw E;A=!0,this.sendApiInvoke($r($r({},g()),{},{success:!1,error:E})),f&&se.info("".concat(o.name," onFailure"),E.toString())};return s?lj(S,o.name+"Error",s,()=>A=!0):S()}}}sessionInit(n,o){if(this.baseInfoMap.has(n))return;const s=Date.now(),c=this.createBaseInfo(n,s);c.cname=o.cname;const h=Object.assign({},{willUploadConsoleLog:Qt("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:TM?"global":"oversea",areas:Qt("AREAS")&&Qt("AREAS").join(",")},o.extend),g=Date.now(),f=$r($r({},c),{},{eventType:Ha.SESSION_INIT,appid:o.appid,browser:navigator.userAgent,build:OF,lts:g,elapse:g-s,extend:JSON.stringify(h),mode:o.mode,process:Qt("PROCESS_ID"),success:!0,version:Wl});this.send({type:Fo.SESSION,data:f},!0)}joinChooseServer(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.JOIN_CHOOSE_SERVER,lts:h,eventElapse:h-o.lts,chooseServerAddr:o.csAddr,errorCode:o.ec,elapse:h-s.startTime,success:o.succ,chooseServerAddrList:JSON.stringify(o.serverList),uid:o.uid?parseInt(o.uid):null,cid:o.cid?parseInt(o.cid):null,chooseServerIp:o.csIp||"",opid:o.opid,unilbsServerIds:o.unilbsServerIds,extend:o.extend||void 0});this.send({type:Fo.JOIN_CHOOSE_SERVER,data:g},!0)}reqUserAccount(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.REQ_USER_ACCOUNT,lts:h,success:o.success,serverAddress:o.serverAddr,stringUid:o.stringUid,uid:o.uid,errorCode:o.errorCode,elapse:h-s.startTime,eventElapse:h-o.lts,extend:JSON.stringify(o.extend)});this.send({type:Fo.REQ_USER_ACCOUNT,data:g},!0)}joinGateway(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info;o.vid&&(c.vid=o.vid),c.uid=o.uid,c.cid=o.cid;const h=Date.now(),{firstSuccess:g,avoidJoinStartTime:f,isProxy:A,addr:_}=o,E=h-(g&&f?f:s.startTime),S=$r($r({},c),{},{eventType:Ha.JOIN_GATEWAY,lts:h,gatewayAddr:o.addr,success:o.succ,errorCode:o.ec,elapse:E,eventElapse:h-o.lts,firstSuccess:g}),I=S.success?1:0;if(o.succ&&(s.lastJoinSuccessTime=h),g)this.send({type:Fo.JOIN_GATEWAY,data:S},!0);else{let R;if(_)if(A){const Q=_.match(/h=(\d{1,3}-){3}\d{1,3}/g),H=_.match(/p=[0-9]{1,6}/g);R={isSuccess:I,gatewayIp:Q&&Q.length?Q[0].split("=")[1].replace(/-/g,"."):"",port:H&&H.length?H[0].split("=")[1]:"",isProxy:A?1:0}}else{const Q=_.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),H=_.match(/:[0-9]{1,6}/g);R={isSuccess:I,gatewayIp:Q&&Q.length?Q[0].split("//")[1].replace(/-/g,"."):"",port:H&&H.length?H[0].split(":")[1]:"",isProxy:A?1:0}}else R={isSuccess:I,gatewayIp:"",port:"",isProxy:A?1:0};delete S.success,delete S.eventType,delete S.firstSuccess,S.vid=Number(S.vid);const M=Object.assign({},S,R,{eventType:Ha.REJOIN_GATEWAY});this.send({type:Fo.RE_JOIN_GATEWAY,data:M},!0)}}joinChannelTimeout(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=Date.now(),h=$r($r({},s.info),{},{lts:c,timeout:o,elapse:c-s.startTime});this.send({type:Fo.JOIN_CHANNEL_TIMEOUT,data:h},!0)}publish(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.PUBLISH,lts:h,eventElapse:o.eventElapse,elapse:h-s.startTime,success:o.succ,errorCode:o.ec,videoName:o.videoName,audioName:o.audioName,screenName:o.screenName,screenshare:o.screenshare,audio:o.audio,video:o.video,p2pid:o.p2pid,publishRequestid:o.publishRequestid});this.send({type:Fo.PUBLISH,data:g},!0)}subscribe(n,o,s){const c=this.baseInfoMap.get(n);if(!c)return;const h=c.info,g=Date.now(),f=$r($r({},h),{},{eventType:Ha.SUBSCRIBE,lts:g,eventElapse:o.eventElapse,elapse:g-c.startTime,success:o.succ,errorCode:o.ec,video:o.video,audio:o.audio,subscribeRequestid:o.subscribeRequestid,p2pid:o.p2pid},s&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof o.peerid?f.peerSuid=o.peerid:f.peer=o.peerid,this.send({type:Fo.SUBSCRIBE,data:f},!0)}wsCompressorInit(n){var o;const s=[...Py(o=this.baseInfoMap).call(o)],h=this.baseInfoMap.get(s.length?s[0]:"UnableToGetSid");if(!h)return;const g=h.info,f=Date.now(),A=$r($r({},g),{},{eventType:Ha.WS_COMPRESSOR_INIT,lts:f,eventElapse:n.eventElapse,elapse:f-h.startTime,status:n.status?1:2});this.send({type:Fo.WS_COMPRESSOR_INIT,data:A},!0)}firstRemoteFrame(n,o,s,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=$r($r($r({},g),c),{},{elapse:f-h.startTime,eventType:o,lts:f});this.send({type:s,data:A},!0)}onGatewayStream(n,o,s,c){const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=$r($r($r({},g),c),{},{eventType:o,lts:f});this.send({type:s,data:A},!0)}streamSwitch(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.STREAM_SWITCH,lts:h,isDual:o.isdual,elapse:h-s.startTime,success:o.succ});this.send({type:Fo.STREAM_SWITCH,data:g},!0)}requestProxyAppCenter(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.REQUEST_PROXY_APPCENTER,lts:h,eventElapse:h-o.lts,elapse:h-s.startTime,APAddr:o.APAddr,workerManagerList:o.workerManagerList,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:Fo.REQUEST_PROXY_APPCENTER,data:g},!0)}requestProxyWorkerManager(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{eventType:Ha.REQUEST_PROXY_WORKER_MANAGER,lts:h,eventElapse:h-o.lts,elapse:h-s.startTime,workerManagerAddr:o.workerManagerAddr,response:o.response,errorCode:o.ec,success:o.succ});this.send({type:Fo.REQUEST_PROXY_WORKER_MANAGER,data:g},!0)}setProxyServer(n){this.proxyServer=n,se.debug(n?"reportProxyServerurl: ".concat(n):"disable reportProxyServerurl: ".concat(n)),zt("debug",this,"setProxyServer",n)}peerPublishStatus(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r({},c),{},{subscribeElapse:o.subscribeElapse,peer:o.peer,peerPublishDuration:Math.max(o.audioPublishDuration,o.videoPublishDuration),audiotag:o.audioPublishDuration>0?1:-1,videotag:o.videoPublishDuration>0?1:-1,lts:h,elapse:h-s.startTime,joinChannelSuccessElapse:h-(s.lastJoinSuccessTime||h)});this.send({type:Fo.PEER_PUBLISH_STATUS,data:g},!0)}workerEvent(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now();(function(g,f,A){const _=g[f];if(!_||"string"!=typeof _)return[g];g[f]="";const E=Rk(JSON.stringify(g));let S=0;const I=[];let R=0;for(let M=0;M<_.length;M++)R+=_.charCodeAt(M)<=127?1:3,R<=1300-E||(I[I.length]=h1(h1({},g),{},{[f]:_.substring(S,M)}),S=M,R=_.charCodeAt(M)<=127?1:3);return S!==_.length-1&&(I[I.length]=h1(h1({},g),{},{[f]:_.substring(S)})),I})($r($r($r({},c),o),{},{elapse:h-s.startTime,lts:h,productType:"WebRTC"}),"payload").forEach(g=>this.send({type:Fo.WORKER_EVENT,data:g},!0))}apworkerEvent(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r($r({},c),o),{},{elapse:h-s.startTime,lts:h});this.send({type:Fo.AP_WORKER_EVENT,data:g},!0)}joinWebProxyAP(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r($r({},c),o),{},{elapse:h-s.startTime,lts:h,extend:o.extend||void 0});this.send({type:Fo.JOIN_WEB_PROXY_AP,data:g},!0)}WebSocketQuit(n,o){const s=this.baseInfoMap.get(n);if(!s)return;const c=s.info,h=Date.now(),g=$r($r($r({},c),o),{},{elapse:h-s.startTime,lts:h});this.send({type:Fo.WEBSOCKET_QUIT,data:g},!0)}sendCustomReportMessage(n,o){var s=this;return F(function*(){if(s.customReportCount+=o.length,s.customReportCount>Qt("CUSTOM_REPORT_LIMIT"))throw new ye(pe.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);s.customReportCounterTimer||(s.customReportCounterTimer=window.setInterval(()=>{s.customReportCount=0},5e3));const c=o.map(h=>({type:Fo.USER_ANALYTICS,data:$r({sid:n},h)}));try{Qt("NEW_REPORT_SERVER")?yield s.postDataToStatsCollector2(c):yield s.postDataToStatsCollector(c)}catch(h){throw se.error("send custom report message failed",h.toString()),new ye(pe.CUSTOM_REPORT_SEND_FAILED,h.message)}})()}autoplayFailed(n,o,s,c){if(!n)return;const h=this.baseInfoMap.get(n);if(!h)return;const g=h.info,f=Date.now(),A=$r($r({},g),{},{vid:void 0===g.vid?0:Number(g.vid),lts:f,elapse:f-h.startTime,cbRegistered:jd.onAutoplayFailed||jd.onAudioAutoplayFailed?1:-1,errorMsg:s,mediaType:o,trackId:c,extend:void 0});this.send({type:Fo.AUTOPLAY_FAILED,data:A},!0)}sendApiInvoke(n){const o=Qt("NOT_REPORT_EVENT");if(n.tag&&o.includes&&o.includes(n.tag))return!1;if(null===n.sid)return this.apiInvokeUploadPendingItems.push(n),!1;const s=this.baseInfoMap.get(n.sid);if(!s)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:c,uid:h,cid:g}=s.info;let f;if(n.lts=n.lts||Date.now(),n.error)if(n.error instanceof ye){const{code:_,message:E}=n.error;f=_||E||n.error.toString()}else f=n.error.toString();const A={invokeId:n.invokeId,sid:n.sid,cname:c,cid:g,uid:h,lts:n.lts,success:n.success,elapse:n.lts-s.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?f:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:Fo.API_INVOKE,data:A},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const o=this.apiInvokeUploadPendingItems.length;for(let s=0;s<o;s++){const c=this.apiInvokeUploadPendingItems.shift();c&&(c.sid=n._sessionId,this.sendApiInvoke(Object.assign({},c)))}}})}send(n,o){if(o)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>Qt("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,o){const s=[],c=[];for(;n.length;){const g=n.shift();s.length<20?s.push(g):c.push(g)}n.push(...c);for(const g of[...s]){var h;-1!==this.ltsList.indexOf(g.data.lts)?(g.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(g.data.lts)):(this.ltsList.push(g.data.lts),BF(h=this.ltsList).call(h,(f,A)=>f-A))}return o||(this.lastSendNormalEventTime=Date.now()),s.length&&(Qt("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(s):this.postDataToStatsCollector(s)).catch((g=>f=>{Qt("EVENT_REPORT_RETRY")&&(o?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(g):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(g),this.normalEventUploadPendingItems.length>Qt("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Qt("NORMAL_EVENT_QUEUE_CAPACITY")),se.warning("report: drop normal events"))))})(s)),n}postDataToStatsCollector2(n){var o=this;return F(function*(){_a.networkState===dl.OFFLINE&&(yield Qn.race([_a.onlineWaiter,Mc(2*wn.maxRetryTimeout)]));const s=g=>{let f=new Uint8Array;return g.forEach(A=>{const _=F3(JSON.stringify(A.data)),E=new ArrayBuffer(5),S=(R=>{let M=0;return Object.entries(Fo).forEach(Q=>{let[H,Z]=Q;Z===R.type&&(M=PM[H])}),M})(A),I=new DataView(E);I.setUint16(0,_.byteLength,!0),I.setUint8(2,255&S),I.setUint8(3,S>>>8&255),I.setUint8(4,S>>>16&255),f=U3(f,new Uint8Array(E)),f=U3(f,_)}),f},c="event";let h=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Qt("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(c):"https://".concat(Qt("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(c);for(let g=0;g<2;g+=1){1===g&&(h=o.proxyServer?"https://".concat(o.proxyServer,"/rs/?h=").concat(Qt("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(c):"https://".concat(Qt("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(c));try{yield Qh(h,{timeout:1e4,data:s(n),headers:{token:"32f24ab2ddb74f508aa9286c356cec84",biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false",appid:o._appId,"Content-Type":"application/octet-stream"}},!0)}catch(f){if(1===g)throw f;continue}return}})()}postDataToStatsCollector(n){var o=arguments,s=this;return F(function*(){let c=o.length>1&&void 0!==o[1]&&o[1];const h={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(A=>JSON.stringify(A)),vid:(A=>{const _=A&&A.data.sid&&s.baseInfoMap.get(A.data.sid);return _&&_.info.vid&&+_.info.vid||0})(n[0])};_a.networkState===dl.OFFLINE&&(yield Qn.race([_a.onlineWaiter,Mc(2*wn.maxRetryTimeout)]));const g=c?"/events/proto-raws":"/events/messages";let f=s.url||(s.proxyServer?"https://".concat(s.proxyServer,"/rs/?h=").concat(Qt("EVENT_REPORT_DOMAIN"),"&p=").concat(Qt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Qt("EVENT_REPORT_DOMAIN"),":").concat(Qt("STATS_COLLECTOR_PORT")).concat(g));for(let A=0;A<2;A+=1){1===A&&(f=s.backupUrl||(s.proxyServer?"https://".concat(s.proxyServer,"/rs/?h=").concat(Qt("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Qt("STATS_COLLECTOR_PORT"),"&d=").concat(g):"https://".concat(Qt("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Qt("STATS_COLLECTOR_PORT")).concat(g)));try{c?yield YK(f,{timeout:1e4,data:h}):yield Qh(f,{timeout:1e4,data:h})}catch(_){if(1===A)throw _;continue}return}})()}createBaseInfo(n,o){const s=Object.assign({},DV);return s.sid=n,this.baseInfoMap.set(n,{info:s,startTime:o}),s}reportResourceTiming(n,o){const s=performance.getEntriesByName(n),c=s[s.length-1];c&&this.reportApiInvoke(o,{name:"Client.resourceTiming",options:c,tag:cr.TRACER}).onSuccess()}})||nQ);Bt.on("REPORT_LOG_UPLOAD",n=>{n.networkState=_a.networkState,Jt.reportApiInvoke(null,{name:"logUploadError",options:n,tag:cr.TRACER})});class iQ extends st{constructor(o,s){super(),J(this,"trackMediaType",void 0),J(this,"_ID",void 0),J(this,"_hints",[]),J(this,"_isClosed",!1),J(this,"_originMediaStreamTrack",void 0),J(this,"_mediaStreamTrack",void 0),J(this,"_external",{}),this._ID=s||vs(8,"track-"),this._originMediaStreamTrack=o,this._mediaStreamTrack=o,zw.includes(this)||zw.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(o){if(!o){Jt.reportApiInvoke(null,{name:pr.GET_MEDIA_STREAM_TRACK,options:[],tag:cr.TRACER}).onSuccess(this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?this._mediaStreamTrack.label:"")}return this._mediaStreamTrack}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,function(o){const s=zw.indexOf(o);-1!==s&&zw.splice(s,1)}(this),this.emit(Vh.CLOSED)}}let va,Y5,oQ,JK=1;class Ru{constructor(o){J(this,"lockingPromise",Qn.resolve()),J(this,"locks",0),J(this,"name",""),J(this,"lockId",void 0),this.lockId=JK++,o&&(this.name=o),se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(o){let s;this.locks+=1,se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:""));const c=new Qn(g=>{s=()=>{this.locks-=1,se.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat("string"==typeof o?o:"")),g()}}),h=this.lockingPromise.then(()=>s);return this.lockingPromise=this.lockingPromise.then(()=>c),h}}function Ny(n,o){return function(s,c,h){const g=s[c];if("function"!=typeof g)throw new Error("Cannot use mutex on object property.");return h.value=F(function*(){const f=this[o];if(!f)throw new Error("mutex property key ".concat(o," doesn't exist on ").concat(n));const A=yield f.lock("From ".concat(n,".").concat(c));try{for(var _=arguments.length,E=new Array(_),S=0;S<_;S++)E[S]=arguments[S];return yield g.apply(this,E)}finally{A()}}),h}}class V3 extends iQ{get muted(){return this._muted}get enabled(){return this._enabled}constructor(o,s){super(o,s),J(this,"_enabled",!0),J(this,"_muted",!1),J(this,"_isClosed",!1),J(this,"_trackProcessors",[]),J(this,"_enabledMutex",void 0),J(this,"processor",void 0),J(this,"processorContext",void 0),J(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Ru("".concat(s)),o.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){return this._originMediaStreamTrack.label}close(){this._isClosed||(this.stop(),this._trackProcessors.forEach(o=>o.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,se.debug("[".concat(this.getTrackId(),"] close")),zt("debug",this,"close"),this.emit(mr.NEED_CLOSE),super.close())}_registerTrackProcessor(o){var s=this;return F(function*(){if(-1!==s._trackProcessors.indexOf(o))return;const c=s._trackProcessors[s._trackProcessors.length-1];s._trackProcessors.push(o),o.onOutputChange=F(function*(){s._mediaStreamTrack=o.output||s._originMediaStreamTrack,s._updatePlayerSource(),yield Vo(s,mr.NEED_REPLACE_TRACK,s)}),c?(c.onOutputChange=F(function*(){c.output&&(yield o.setInput(c.output))}),yield o.setInput(c.output||c.input||s._originMediaStreamTrack)):yield o.setInput(s._originMediaStreamTrack)})()}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const o=this._trackProcessors[this._trackProcessors.length-1];return o.output||o.input||this._originMediaStreamTrack}_updateOriginMediaStreamTrack(o,s){var c=this;return F(function*(){if(o!==c._originMediaStreamTrack){if(c._originMediaStreamTrack.removeEventListener("ended",c._handleTrackEnded),s&&c._originMediaStreamTrack.stop(),o.addEventListener("ended",c._handleTrackEnded),c._originMediaStreamTrack=o,c._trackProcessors.length>0){yield c._trackProcessors[0].setInput(o);const h=c._getOutputFromProcessors();c._mediaStreamTrack=h}else c._mediaStreamTrack=c._originMediaStreamTrack;c._updatePlayerSource(),yield Vo(c,mr.NEED_REPLACE_TRACK,c),c.processor&&c.processor.updateInput({track:c._originMediaStreamTrack,context:c.processorContext})}})()}_getDefaultPlayerConfig(){return{}}onTrackEnded(){se.debug("[".concat(this.getTrackId(),"] track ended")),js("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Vh.TRACK_ENDED)}stateCheck(o,s){if(se.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(o,": ").concat(s,"]")),zt("debug",this,"stateCheck",{stateName:o,state:s,muted:this._muted,enabled:this._enabled}),Of(s,o),this._enabled&&this._muted&&"enabled"===o&&!1===s)throw new ye(pe.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===o&&!0===s)throw new ye(pe.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}}(function(n){n.IOS_15_INTERRUPTION_START="ios15-interruption-start",n.IOS_15_INTERRUPTION_END="ios15-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(va||(va={})),function(n){n.AUDIO_CONTEXT_CREATED="audio_context_created"}(Y5||(Y5={})),function(n){n.AIDenoiser="AIDenoiser"}(oQ||(oQ={}));const j3={audioContextInitOptions:{}},Sk=new class extends st{constructor(){super(),J(this,"registeredPlugins",[])}setOptions(n,o){j3[n]&&(j3[n]=o)}getOptions(n){return j3[n]}installPlugin(n){n instanceof Object&&n.name&&this.registeredPlugins.push(n.name)}},J0=window.AudioContext||window.webkitAudioContext;let Qd=null;const Xr=new class extends st{constructor(){var n;super(...arguments),n=this,J(this,"prevState",void 0),J(this,"curState",void 0),J(this,"currentTime",void 0),J(this,"currentTimeStuckAt",void 0),J(this,"interruptDetectorTrack",void 0),J(this,"onLocalAudioTrackMute",()=>{se.info("ios15-interruption-start"),Pi("info",["WebAudio"],"ios15-interruption-start"),this.emit(va.IOS_15_INTERRUPTION_START)}),J(this,"onLocalAudioTrackUnmute",F(function*(){se.info("ios15-interruption-end"),Pi("info",["WebAudio"],"ios15-interruption-end"),"running"!==n.curState||n.duringInterruption?se.info("ios15-interruption-end-canceled"):(Qd&&(yield Qd.suspend()),n.emit(va.IOS_15_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(n){se.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),zt("debug",["WebAudio"],"bindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){se.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),zt("debug",["WebAudio"],"unbindInterruptDetectorTrack",n.getTrackId()),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Ck(){if(!Qd){if(function sQ(){if(!J0)return se.error("your browser is not support web audio"),void En("error",["WebAudio"],"your browser is not support web audio");se.info("create audio context"),Cu("info",["WebAudio"],"WebAudioContext");const n=Sk.getOptions("audioContextInitOptions");se.debug("audio content init option:",JSON.stringify(n)),Qd=new J0(n),Sk.emit(Y5.AUDIO_CONTEXT_CREATED,Qd),Xr.curState=Qd.state,Qd.onstatechange=()=>{Xr.prevState=Xr.curState,Xr.curState=Qd?Qd.state:void 0,(qc()||ag())&&"running"===Xr.prevState&&"interrupted"===Xr.curState&&(se.info("ios-interruption-start"),Pi("info",["AudioState"],"ios-interruption-start"),Xr.emit(va.IOS_INTERRUPTION_START)),(qc()||ag())&&"interrupted"===Xr.prevState&&"running"===Xr.curState&&(se.info("ios-interruption-end"),Pi("info",["AudioState"],"ios-interruption-end"),Xr.emit(va.IOS_INTERRUPTION_END)),Xr.prevState!==Xr.curState&&(se.debug("AudioContext State Change","".concat(Xr.prevState,"=>").concat(Xr.curState)),js("debug",["AudioContext",void 0],"statechange","".concat(Xr.prevState,"=>").concat(Xr.curState)),Xr.emit(va.STATE_CHANGE))},setInterval(()=>{var o;const s=null===(o=Qd)||void 0===o?void 0:o.currentTime;Xr.currentTime!==s?(Xr.currentTimeStuckAt&&(se.debug("AudioContext current time resume at ".concat(s)),Xr.currentTimeStuckAt=void 0),Xr.currentTime=s):(s!==Xr.currentTimeStuckAt&&se.warning("AudioContext current time stuck at ".concat(s)),Xr.currentTimeStuckAt=s)},5e3),function(){var o=F(function*(s){const c=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let h,g=!1,f=!1,A=!1;function _(le){"running"===s.state?E(!1):qc()||ag()?"suspended"===s.state&&(E(!0),le&&s.resume().then(I,I)):"closed"!==s.state&&(E(!0),le&&s.resume().then(I,I))}function E(le){if(g!==le){g=le;for(let ge=0,Se=c;ge<Se.length;ge+=1){const Ne=Se[ge];le?window.addEventListener(Ne,R,{capture:!0,passive:!0}):window.removeEventListener(Ne,R,{capture:!0,passive:!0})}}}function I(){_(!1)}function R(){_(!0)}function M(le){if(!A)if(h.paused)if(le){let ge;Q(!1),A=!0;try{ge=h.play(),ge?ge.then(H,H):(h.addEventListener("playing",H),h.addEventListener("abort",H),h.addEventListener("error",H))}catch{H()}}else Q(!0);else Q(!1)}function Q(le){if(f!==le){f=le;for(let ge=0,Se=c;ge<Se.length;ge++){const Ne=Se[ge];le?window.addEventListener(Ne,Z,{capture:!0,passive:!0}):window.removeEventListener(Ne,Z,{capture:!0,passive:!0})}}}function H(){h.removeEventListener("playing",H),h.removeEventListener("abort",H),h.removeEventListener("error",H),A=!1,M(!1)}function Z(){M(!0)}if(qc()){const le=s.createMediaStreamDestination(),ge=document.createElement("div");ge.innerHTML="<audio x-webkit-airplay='deny'></audio>",h=ge.children.item(0),h.controls=!1,h.disableRemotePlayback=!0,h.preload="auto",h.srcObject=le.stream,M(!0)}Xr.on(va.STATE_CHANGE,function S(){_(!0)}),_(!1)});return function(s){return o.apply(this,arguments)}}()(Qd)}(),!Qd)throw new ye(pe.NOT_SUPPORTED,"can not create audio context");return Qd}return Qd}function Ik(n){if(function(){if(null!==wk)return wk;const c=Ck(),h=c.createBufferSource(),g=c.createGain(),f=c.createGain();h.connect(g),h.connect(f),h.disconnect(g);let A=!1;try{h.disconnect(g)}catch{A=!0}return h.disconnect(),wk=A,A}())return;zt("debug",["WebAudio"],"polyfillAudioNode");const o=n.connect,s=n.disconnect;n.connect=(c,h,g)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(c)||(c instanceof AudioNode?(n._inputNodes.push(c),o.call(n,c,h,g)):o.call(n,c,h)),n),n.disconnect=(c,h,g)=>{s.call(n),c?eU(n._inputNodes,c):n._inputNodes=[];for(const f of n._inputNodes)o.call(n,f)}}let wk=null;function q5(n,o){const s=1/o,c=Ck();let h=c.createGain();h.gain.value=0,h.connect(c.destination);let g=!1;const f=()=>{if(g)return void(h=null);const A=c.createOscillator();A.onended=f,A.connect(h),A.start(0),A.stop(c.currentTime+s),n(c.currentTime)};return f(),()=>{g=!0}}const My=se.prefix("[inject-node]");class gx{constructor(){J(this,"nodeLists",[]),J(this,"prevNode",void 0),J(this,"nextNode",void 0)}get firstNode(){return this.nodeLists[0]}get lastNode(){return this.nodeLists[this.nodeLists.length-1]}get isActive(){return!!this.nodeLists.length}get isConnected(){return!(!this.prevNode||!this.nextNode)}connect(o,s){My.debug("connect audio node, current list:"+this.nodeLists.length),this.nodeLists.length?(this.prevNode&&this.prevNode.disconnect(),o.connect(this.firstNode),this.nextNode&&this.lastNode&&this.lastNode.disconnect(),this.lastNode.connect(s),this.nodeLists.forEach((c,h)=>{const g=this.nodeLists[h+1];g&&c.connect(g)})):o.connect(s),this.nextNode=s,this.prevNode=o}disconnect(){var o;My.debug("disconnect audio node, current list:"+this.nodeLists.length),this.nodeLists.forEach(s=>{s.disconnect()}),null===(o=this.prevNode)||void 0===o||o.disconnect(),this.prevNode=void 0,this.nextNode=void 0}addNode(o){My.debug("add node in inject node, current list:",this.nodeLists.length),this.prevNode&&this.nextNode?(this.firstNode||(My.debug("new node is the first node"),this.prevNode.disconnect(),this.prevNode.connect(o),o.connect(this.nextNode)),this.nextNode&&this.lastNode&&(this.lastNode.disconnect(this.nextNode),this.lastNode.connect(o),o.connect(this.nextNode)),this.nodeLists.push(o)):My.debug("add node is called before inject node connected")}removeNode(o){My.debug("remove node in inject node, current list:",this.nodeLists.length);const s=this.nodeLists.indexOf(o);if(-1===s)return void My.debug("$[inject-node] cannot find the node to be removed");const c=this.nodeLists[s+1],h=this.nodeLists[s-1];0===s&&this.prevNode&&this.nextNode&&(this.prevNode.disconnect(o),this.prevNode.connect(c||this.nextNode)),s===this.nodeLists.length-1&&this.nextNode&&h&&(h.disconnect(o),h.connect(this.nextNode)),0!==s&&s!==this.nodeLists.length-1&&(h.disconnect(o),h.connect(c)),My.debug("remove node in inject node success, current list:",this.nodeLists.length)}}class _x extends st{get processSourceNode(){return this.sourceNode}set processedNode(o){var s;if(!this.isDestroyed&&this._processedNode!==o){try{var c;null===(c=this.sourceNode)||void 0===c||c.disconnect(this.outputNode)}catch{}null===(s=this._processedNode)||void 0===s||s.disconnect(),this._processedNode=o,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),J(this,"outputNode",void 0),J(this,"outputTrack",void 0),J(this,"isPlayed",!1),J(this,"sourceNode",void 0),J(this,"analyserNode",void 0),J(this,"context",void 0),J(this,"audioBufferNode",void 0),J(this,"destNode",void 0),J(this,"injectNode",void 0),J(this,"audioOutputLevel",0),J(this,"_processedNode",void 0),J(this,"playNode",void 0),J(this,"isDestroyed",!1),J(this,"onNoAudioInput",void 0),J(this,"isNoAudioInput",!1),J(this,"_noAudioInputCount",0),this.context=Ck(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Ik(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,this.injectNode=new gx}startGetAudioBuffer(o){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(o),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=s=>{this.emit($c.ON_AUDIO_BUFFER,function(c){for(let h=0;h<c.outputBuffer.numberOfChannels;h+=1){const g=c.outputBuffer.getChannelData(h);for(let f=0;f<g.length;f+=1)g[f]=0}return c.inputBuffer}(s))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Zc().webAudioMediaStreamDest)throw new ye(pe.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(o){"running"!==this.context.state&&Tp(()=>{Xr.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=o||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||qc()||ag()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const o=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(o);let s=0;for(let c=0;c<o.length;c++)s+=c<64?Math.abs(10*o[c]):Math.abs(6*o[c]/15);return s/o.length/255}checkHasAudioInput(){var o=arguments,s=this;return F(function*(){let c=o.length>0&&void 0!==o[0]?o[0]:0;if(c>5)return s.isNoAudioInput=!0,s.onNoAudioInput&&s.onNoAudioInput(),!1;if(qc()||ag()?"suspended"===s.context.state&&s.context.resume():"running"!==s.context.state&&s.context.resume(),!s.analyserNode)return!1;const h=new Uint8Array(s.analyserNode.frequencyBinCount);s.analyserNode.getByteFrequencyData(h);let g=!1;for(let f=0;f<h.length;f++)0!==h[f]&&(g=!0);return g?(s.isNoAudioInput=!1,!0):(yield Mc(200),(yield s.checkHasAudioInput(c?c+1:1))&&g)})()}getAudioVolume(){return this.outputNode.gain.value}setVolume(o){this.outputNode.gain.setValueAtTime(o,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}injectAudioNode(o){this.injectNode.addNode(o)}removeAudioNode(o){this.injectNode.removeNode(o)}disconnect(){var o,s;null===(o=this.processedNode)||void 0===o||o.disconnect(),null===(s=this.sourceNode)||void 0===s||s.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var o;this.processedNode?null===(o=this.processedNode)||void 0===o||o.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class aQ extends _x{get isFreeze(){return!1}constructor(o,s){var c,h;if(super(),c=this,J(this,"sourceNode",void 0),J(this,"track",void 0),J(this,"audioElement",void 0),J(this,"isCurrentTrackCloned",!1),J(this,"isRemoteTrack",!1),J(this,"rebuildWebAudio",F(function*(){if(se.debug("ready to rebuild web audio, state:",c.context.state),c.isNoAudioInput&&(yield c.checkHasAudioInput()),!c.isNoAudioInput||c.isDestroyed)return document.body.removeEventListener("click",c.rebuildWebAudio,!0),void se.debug("rebuild web audio success, current volume status",c.getAccurateVolumeLevel());c.context.resume().then(()=>se.info("resume success")),se.debug("rebuild web audio because of ios 12 bugs"),c.disconnect();const A=c.track;c.track=c.track.clone(),c.isCurrentTrackCloned?A.stop():c.isCurrentTrackCloned=!0;const _=new MediaStream([c.track]);c.sourceNode=c.context.createMediaStreamSource(_),Ik(c.sourceNode),c.analyserNode=c.context.createAnalyser();const E=c.outputNode.gain.value;c.outputNode=c.context.createGain(),c.outputNode.gain.setValueAtTime(E,c.context.currentTime),Ik(c.outputNode),c.emit($c.UPDATE_SOURCE),c.connect(),c.audioElement.srcObject=_,c.isPlayed&&c.play(c.playNode),c.checkHasAudioInput()})),"audio"!==o.kind)throw new ye(pe.UNEXPECTED_ERROR);this.track=o;const g=new MediaStream([this.track]);this.isRemoteTrack=!!s,this.sourceNode=this.context.createMediaStreamSource(g),Ik(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=g;const f=wi();s&&f.os===ds.IOS&&Number(null===(h=f.osVersion)||void 0===h?void 0:h.split(".")[0])<15&&(Xr.on(va.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(A=>{A||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(o){this.sourceNode.disconnect(),this.track=o,this.isCurrentTrackCloned=!1;const s=new MediaStream([o]);this.sourceNode=this.context.createMediaStreamSource(s),Ik(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit($c.UPDATE_SOURCE),this.audioElement.srcObject=s}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),Xr.off("state-change",this.rebuildWebAudio),super.destroy()}}function Q3(n,o){return vx.apply(this,arguments)}function vx(){return vx=F(function*(n,o){const s=(h,g)=>h?"number"!=typeof h?h.max||h.exact||h.ideal||h.min||g:h:g,c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:s(o.height,1080),maxWidth:s(o.width,1920)}}};return o.frameRate&&"number"!=typeof o.frameRate?(c.video.mandatory.maxFrameRate=o.frameRate.max,c.video.mandatory.minFrameRate=o.frameRate.min):"number"==typeof o.frameRate&&(c.video.mandatory.maxFrameRate=o.frameRate),yield navigator.mediaDevices.getUserMedia(c)}),vx.apply(this,arguments)}function H3(n){return Ax.apply(this,arguments)}function Ax(){return Ax=F(function*(n){const o=yield J5(n.mediaSource),s=yield(c=o,new Qn((h,g)=>{const f=document.createElement("div");f.innerText="share screen",f.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const _=document.createElement("div");_.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",_.setAttribute("style","height: 12%;");const E=document.createElement("div");E.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const S=document.createElement("div");S.setAttribute("style","text-align: right; padding: 16px 0;");const I=document.createElement("button");I.innerHTML="cancel",I.setAttribute("style","width: 85px;"),I.onclick=()=>{document.body.removeChild(R);const M=new Error("NotAllowedError");M.name="NotAllowedError",g(M)},S.appendChild(I),A.appendChild(_),A.appendChild(E),A.appendChild(S);const R=document.createElement("div");R.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),R.appendChild(f),R.appendChild(A),document.body.appendChild(R),c.map(M=>{if(M.id){const Q=document.createElement("div");Q.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let H=M.thumbnail;const{width:Z}=H.getSize();Z>1920&&(H=H.resize({width:1920})),Q.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+H.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+M.name.replace(/[\u00A0-\u9999<>\&]/g,function(le){return"&#"+le.charCodeAt(0)+";"})+"</span>",Q.onclick=()=>{document.body.removeChild(R),h(M.id)},E.appendChild(Q)}})}));var c;return yield Q3(s,n)}),Ax.apply(this,arguments)}function J5(n){return G3.apply(this,arguments)}function G3(){return G3=F(function*(n){let o=["window","screen"];"application"!==n&&"window"!==n||(o=["window"]),"screen"===n&&(o=["screen"]);const s=$5();if(!s)throw new ye(pe.ELECTRON_IS_NULL);let c=null;try{c=s.desktopCapturer.getSources({types:o})}catch{c=null}c&&c.then||(c=new Qn((h,g)=>{s.desktopCapturer.getSources({types:o},(f,A)=>{f?g(f):h(A)})}));try{return yield c}catch(h){throw new ye(pe.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}),G3.apply(this,arguments)}let yx=null;function $5(){if(yx)return yx;try{return yx=window.require("electron"),yx}catch{return null}}const W3=new Ru("safari");let $0=!1,cQ=!1;function pl(n,o){return Ex.apply(this,arguments)}function Ex(){return Ex=F(function*(n,o){let s=0,c=null;for(;s<2;)try{c=yield $K(n,o,s>0);break}catch(h){if(h instanceof ye)throw se.error("[".concat(o,"] ").concat(h.toString())),zt("error",[],"getLocalStream",{config:n,id:o},h.toString()),h;const g=bx(h.name||h.code||h,h.message);if(g.code===pe.MEDIA_OPTION_INVALID){se.debug("[".concat(o,"] detect media option invalid, retry")),En("debug",[],"[".concat(o,"] detect media option invalid, retry")),s+=1,yield Mc(500);continue}throw se.error("[".concat(o,"] ").concat(g.toString())),zt("error",[],"getLocalStream",{config:n,id:o},g.toString()),g}if(!c)throw new ye(pe.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return c}),Ex.apply(this,arguments)}function $K(n,o,s){return X5.apply(this,arguments)}function X5(){return X5=F(function*(n,o,s){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new ye(pe.NOT_SUPPORTED,"can not find getUserMedia");s&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const c=Zc(),h=new MediaStream;if(n.audioSource&&h.addTrack(n.audioSource),n.videoSource&&h.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return se.debug("Using Video Source/ Audio Source"),En("debug",[],"Using Video Source/ Audio Source"),h;if(n.screen)if($5())u1(h,n.screen.sourceId?yield Q3(n.screen.sourceId,n.screen):yield H3(n.screen));else if(WD()&&n.screen.extensionId&&n.screen.mandatory){if(!c.getStreamFromExtension)throw new ye(pe.NOT_SUPPORTED,"This browser does not support screen sharing");se.debug("[".concat(o,'] Screen access on chrome stable, looking for extension"')),En("debug",[],"[".concat(o,'] Screen access on chrome stable, looking for extension"'));const I=yield(g=n.screen.extensionId,f=o,new Qn((R,M)=>{try{chrome.runtime.sendMessage(g,{getStream:!0},Q=>{if(!Q||!Q.streamId)return se.error("[".concat(f,"] No response from Chrome Plugin. Plugin not installed properly"),Q),zt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:f},"No response from Chrome Plugin. Plugin not installed properly, ".concat(Q)),void M(new ye(pe.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));R(Q.streamId)})}catch(Q){se.error("[".concat(f,"] AgoraRTC screensharing plugin is not accessible(").concat(g,")"),Q.toString()),zt("error",[],"getSourceIdFromExtension",{extensionId:g,streamId:f},"AgoraRTC screensharing plugin is not accessible(".concat(g,"), ").concat(Q.toString())),M(new ye(pe.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=I,u1(h,yield navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(c.getDisplayMedia){n.screen.mediaSource&&sk(n.screen.mediaSource);const I={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:"screen"===n.screen.mediaSource?"monitor":n.screen.mediaSource};se.debug("[".concat(o,"] getDisplayMedia:"),JSON.stringify({video:I,audio:!!n.screenAudio})),Cu("debug",["mediaDevices",o],"getDisplayMedia",{video:I,audio:!!n.screenAudio,trackId:o}),u1(h,yield navigator.mediaDevices.getDisplayMedia({video:I,audio:!!n.screenAudio}))}else{if(!hs())throw se.error("[".concat(o,"] This browser does not support screenSharing")),new ye(pe.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&sk(n.screen.mediaSource);const I={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};se.debug("[".concat(o,"] getUserMedia: ").concat(JSON.stringify(I))),Cu("debug",["mediaDevices",o],"getUserMedia",I),u1(h,yield navigator.mediaDevices.getUserMedia(I))}}var g,f;if(!n.video&&!n.audio)return h;let A={video:n.video,audio:n.audio},_=Qt("MEDIA_DEVICE_CONSTRAINTS");if(_)try{"string"==typeof _&&(_=JSON.parse(_)),A=function I(R,M){if(!LQ(R)||!LQ(M)||Array.isArray(R)&&!Array.isArray(M)||!Array.isArray(R)&&Array.isArray(M))return M;if(Array.isArray(M)&&Array.isArray(R)){const Q=[...R];for(let H=0;H<M.length;H++)Q[H]=I(R[H],M[H]);return Q}{const Q=h1({},R);for(const H in M)Object.prototype.hasOwnProperty.call(M,H)&&(Q[H]=Object.prototype.hasOwnProperty.call(R,H)?I(R[H],M[H]):M[H]);return Q}}(A,_),En("debug",["mediaDevices",o],"merge configConstraints ".concat(JSON.stringify(_)))}catch{}se.debug("[".concat(o,"] GetUserMedia"),JSON.stringify(A)),Cu("debug",["mediaDevices",o],"getUserMedia",A),wi();let E,S=null;(Ql()||qc()||Hw())&&(S=yield W3.lock());try{E=yield navigator.mediaDevices.getUserMedia(A)}catch(I){throw S&&S(),I}return A.audio&&($0=!0),A.video&&(cQ=!0),u1(h,E),S&&S(),h}),X5.apply(this,arguments)}function bx(n,o){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new ye(pe.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(o));case"NotFoundError":case"DevicesNotFoundError":return new ye(pe.DEVICE_NOT_FOUND,"".concat(n,": ").concat(o));case"NotSupportedError":return new ye(pe.NOT_SUPPORTED,"".concat(n,": ").concat(o));case"NotReadableError":return new ye(pe.NOT_READABLE,"".concat(n,": ").concat(o));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new ye(pe.PERMISSION_DENIED,"".concat(n,": ").concat(o));case"ConstraintNotSatisfiedError":return new ye(pe.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(o));default:return se.error("getUserMedia unexpected error",n),zt("error",[],"handleGetUserMediaError",void 0,n),new ye(pe.UNEXPECTED_ERROR,"".concat(n,": ").concat(o))}}function u1(n,o){const s=n.getVideoTracks()[0],c=n.getAudioTracks()[0],h=o.getVideoTracks()[0],g=o.getAudioTracks()[0];g&&(c&&n.removeTrack(c),n.addTrack(g)),h&&(s&&n.removeTrack(s),n.addTrack(h))}const Jl=new class extends st{get state(){return this._state}set state(n){n!==this._state&&(this.emit(hg.STATE_CHANGE,n),this._state=n)}constructor(){super(),J(this,"_state",X_.IDLE),J(this,"isAccessMicrophonePermission",!1),J(this,"isAccessCameraPermission",!1),J(this,"lastAccessMicrophonePermission",!1),J(this,"lastAccessCameraPermission",!1),J(this,"checkdeviceMatched",!1),J(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Qt("ENUMERATE_DEVICES_INTERVAL")||EF()&&P0())&&this.updateDevicesInfo()},Qt("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>se.error(n.toString()))}enumerateDevices(n,o){var s=arguments,c=this;return F(function*(){let h=s.length>2&&void 0!==s[2]&&s[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new ye(pe.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const g=yield navigator.mediaDevices.enumerateDevices(),f=c.checkMediaDeviceInfoIsOk(g);let A=!c.isAccessMicrophonePermission&&n,_=!c.isAccessCameraPermission&&o;f.audio&&(A=!1),f.video&&(_=!1);let E=null,S=null,I=null;if(!h&&(A||_)){if(W3.isLocked&&(se.debug("[device manager] wait GUM lock"),(yield W3.lock())(),se.debug("[device manager] GUM unlock")),$0&&(A=!1,c.isAccessMicrophonePermission=!0),cQ&&(_=!1,c.isAccessCameraPermission=!0),se.debug("[device manager] check media device permissions",n,o,A,_),A&&_){try{I=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(R){const M=bx(R.name||R.code||R,R.message);if(M.code===pe.PERMISSION_DENIED)throw M;se.warning("getUserMedia failed in getDevices",M)}c.isAccessCameraPermission=!0,c.isAccessMicrophonePermission=!0}else if(A){try{E=yield navigator.mediaDevices.getUserMedia({audio:n})}catch(R){const M=bx(R.name||R.code||R,R.message);if(M.code===pe.PERMISSION_DENIED)throw M;se.warning("getUserMedia failed in getDevices",M)}c.isAccessMicrophonePermission=!0}else if(_){try{S=yield navigator.mediaDevices.getUserMedia({video:o})}catch(R){const M=bx(R.name||R.code||R,R.message);if(M.code===pe.PERMISSION_DENIED)throw M;se.warning("getUserMedia failed in getDevices",M)}c.isAccessCameraPermission=!0}se.debug("[device manager] mic permission",n,"cam permission",o)}try{const R=yield navigator.mediaDevices.enumerateDevices();return E&&E.getTracks().forEach(M=>M.stop()),S&&S.getTracks().forEach(M=>M.stop()),I&&I.getTracks().forEach(M=>M.stop()),E=null,S=null,I=null,R}catch(R){return E&&E.getTracks().forEach(M=>M.stop()),S&&S.getTracks().forEach(M=>M.stop()),I&&I.getTracks().forEach(M=>M.stop()),E=null,S=null,I=null,new ye(pe.ENUMERATE_DEVICES_FAILED,R.toString()).throw()}})()}getRecordingDevices(){var n=arguments,o=this;return F(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!0,!1,s)).filter(c=>"audioinput"===c.kind)})()}getCamerasDevices(){var n=arguments,o=this;return F(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!1,!0,s)).filter(c=>"videoinput"===c.kind)})()}getSpeakers(){var n=arguments,o=this;return F(function*(){let s=n.length>0&&void 0!==n[0]&&n[0];return(yield o.enumerateDevices(!0,!1,s)).filter(c=>"audiooutput"===c.kind)})()}searchDeviceIdByName(n){let o=null;return this.deviceInfoMap.forEach(s=>{s.device.label===n&&(o=s.device.deviceId)}),o}getDeviceById(n){var o=this;return F(function*(){const s=(yield o.enumerateDevices(!0,!0,!0)).find(c=>c.deviceId===n);if(!s)throw new ye(pe.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return s})()}init(){var n=this;return F(function*(){n.state=X_.INITING;try{yield n.updateDevicesInfo(),n.state=X_.INITEND}catch(o){throw se.warning("Device Detection functionality cannot start properly.",o.toString()),n.state=X_.IDLE,!("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)&&new ye(pe.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),o}})()}updateDevicesInfo(){var n=this;return F(function*(){const o=yield n.enumerateDevices(!0,!0,!0),s=Date.now(),c=[];if(o[0]&&o[0].label&&!1===n.checkdeviceMatched){n.checkdeviceMatched=!0;const g=o.find(A=>"audioinput"===A.kind&&"default"===A.deviceId),f=o.find(A=>"audiooutput"===A.kind&&"default"===A.deviceId);g&&f?f.groupId===g.groupId?se.debug("[device-check] default input ".concat(g.label," and output ").concat(f.label," is the same group")):se.warning("[device-check] default input ".concat(g.label," and output ").concat(f.label," is not the same group")):se.debug("[device-check] default input or output not found")}const h=n.checkMediaDeviceInfoIsOk(o);if(o.forEach(g=>{if(!g.deviceId)return;const f=n.deviceInfoMap.get("".concat(g.kind,"_").concat(g.deviceId));if("ACTIVE"!==(f?f.state:"INACTIVE")){const A={initAt:s,updateAt:s,device:g,state:"ACTIVE"};n.deviceInfoMap.set("".concat(g.kind,"_").concat(g.deviceId),A),c.push(A)}f&&(f.updateAt=s)}),n.deviceInfoMap.forEach((g,f)=>{"ACTIVE"===g.state&&g.updateAt!==s&&(g.state="INACTIVE",c.push(g))}),n.state!==X_.INITEND)return h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),void(h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0));c.forEach(g=>{switch(g.device.kind){case"audioinput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(hg.RECORDING_DEVICE_CHANGED,g);break;case"videoinput":n.lastAccessCameraPermission&&n.isAccessCameraPermission&&n.emit(hg.CAMERA_DEVICE_CHANGED,g);break;case"audiooutput":n.lastAccessMicrophonePermission&&n.isAccessMicrophonePermission&&n.emit(hg.PLAYOUT_DEVICE_CHANGED,g)}}),h.audio&&(n.lastAccessMicrophonePermission=!0,n.isAccessMicrophonePermission=!0),h.video&&(n.lastAccessCameraPermission=!0,n.isAccessCameraPermission=!0)})()}checkMediaDeviceInfoIsOk(n){const o=n.filter(h=>"audioinput"===h.kind),s=n.filter(h=>"videoinput"===h.kind),c={audio:!1,video:!1};for(const h of o)if(h.label&&h.deviceId){c.audio=!0;break}for(const h of s)if(h.label&&h.deviceId){c.video=!0;break}return c}};var Z5;let uQ=Qs("AudioElementPlayCenter")(Z5=class{constructor(){J(this,"onAutoplayFailed",void 0),J(this,"elementMap",new Map),J(this,"elementStateMap",new Map),J(this,"elementsNeedToResume",[]),J(this,"sinkIdMap",new Map),J(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[o,s]=n;const c=this.elementStateMap.get(o),h=s.srcObject.getAudioTracks()[0];Eu()?h&&"live"===h.readyState&&"running"===Xr.curState&&(se.debug("auto resume after interruption for iOS 15"),En("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS15"),s.pause(),s.play()):c&&"paused"===c&&h&&"live"===h.readyState&&"running"===Xr.curState&&(se.debug("auto resume after interruption for iOS"),En("debug",["AudioElementPlayCenter",o],"auto resume after interruption for iOS"),s.play())})}),J(this,"autoResumeAfterInterruptionOnIOS15",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[o,s]=n;const c=s.srcObject.getAudioTracks()[0];c&&"live"===c.readyState&&(se.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),zt("debug",["AudioElementPlayCenter",o],"autoResumeAfterInterruptionOnIOS15"),s.pause(),s.play())})}),this.autoResumeAudioElement(),Xr.on(va.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Xr.on(va.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),Xr.on(va.STATE_CHANGE,()=>{qc()&&"suspended"===Xr.prevState&&"running"===Xr.curState&&this.autoResumeAfterInterruption()})}setSinkID(n,o){var s=this;return F(function*(){const c=s.elementMap.get(n);if(s.sinkIdMap.set(n,o),c)try{yield c.setSinkId(o)}catch(h){throw new ye(pe.PERMISSION_DENIED,"can not set sink id: "+h.toString())}})()}play(n,o,s,c){if(this.elementMap.has(o))return;const h=document.createElement("audio");h.autoplay=!0,h.srcObject=new MediaStream([n]),this.bindAudioElementEvents(o,h),this.elementMap.set(o,h),this.elementStateMap.set(o,Ra.INIT),this.setVolume(o,s);const g=this.sinkIdMap.get(o);if(g)try{h.setSinkId(g).catch(A=>{se.warning("[".concat(o,"] set sink id failed"),A.toString()),Cu("warning",["HTMLAudioElement",o],"setSinkId",A.toString())})}catch(A){se.warning("[".concat(o,"] set sink id failed"),A.toString())}const f=h.play();f&&f.then&&f.catch(A=>{c&&Jt.autoplayFailed(c,"audio",A.message,o),se.warning("audio element play warning",A.toString()),Cu("warning",["HTMLAudioElement",o],"play",A.toString()),this.elementMap.has(o)&&"NotAllowedError"===A.name&&(se.warning("detected audio element autoplay failed"),zt("warning",["AudioElementPlayCenter",o],"play",A.toString()),this.elementsNeedToResume.push(h),Tp(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),z5()}))})}updateTrack(n,o){const s=this.elementMap.get(n);s&&(s.srcObject=new MediaStream([o]))}isPlaying(n){return this.elementMap.has(n)}setVolume(n,o){const s=this.elementMap.get(n);s&&(o=Math.max(0,Math.min(100,o)),s.volume=o/100)}stop(n){const o=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!o)return;const s=this.elementsNeedToResume.indexOf(o);this.elementsNeedToResume.splice(s,1),o.srcObject=null,o.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,o){ej.forEach(s=>{o.addEventListener(s,c=>{const h=this.elementStateMap.get(n),g="pause"===c.type?"paused":c.type;se.debug("[".concat(n,"] audio-element-status change ").concat(h," => ").concat(g)),js("debug",["HTMLAudioElement",n],"statusChange","".concat(h," => ").concat(g)),this.elementStateMap.set(n,g)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(o=>{o.play().then(s=>{se.debug("Auto resume audio element success"),zt("debug",["AudioElementPlayCenter"],"autoResumeAudioElement")}).catch(s=>{se.warning("Auto resume audio element failed!",s),zt("warning",["AudioElementPlayCenter"],"autoResumeAudioElement",s.toString())})}),this.elementsNeedToResume=[]};new Qn(o=>{document.body?o():window.addEventListener("load",()=>o())}).then(()=>{const o=wi();"Android"!==o.os||"Chrome"!==o.name&&o.name!==Ii.WECHAT?(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)):document.body.addEventListener("click",n,!0)})}})||Z5;const ej=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],Hd=new uQ;function _s(){return function(n,o,s){const c=n[o];"function"==typeof c&&(s.value=function(){this._isClosed&&new ye(pe.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var h=arguments.length,g=new Array(h),f=0;f<h;f++)g[f]=arguments[f];const A=c.apply(this,g);return A instanceof Qn?new Qn((_,E)=>{A.then(_).catch(E)}):A})}}var tj,nj,ks,lQ,dQ,hQ,Tk,Sx,Cx,rj,K3,pQ,Wa,ij,fQ,mQ,gQ,_Q,l1,vQ,AQ,yQ,EQ,z3,bQ,SQ,mc,Y3;function oj(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Ix(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?oj(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):oj(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let gc=(tj=Qs("LocalAudioTrack","getTrackId"),nj=_s(),ks=Ny("LocalAudioTrack","_enabledMutex"),lQ=_s(),dQ=Ny("LocalAudioTrack","_enabledMutex"),hQ=_s(),Tk=bk({report:Jt}),Sx=_s(),Cx=_s(),rj=_s(),K3=_s(),tj((rr((Wa=class extends V3{get isPlaying(){return this._useAudioElement?Hd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,o,s){super(n,s),J(this,"trackMediaType","audio"),J(this,"_encoderConfig",void 0),J(this,"_source",void 0),J(this,"_enabled",!0),J(this,"_volume",100),J(this,"_useAudioElement",!1),J(this,"_bypassWebAudio",!1),J(this,"processor",void 0),J(this,"processorContext",void 0),J(this,"processorDestination",void 0),this._encoderConfig=o,this._source=new aQ(n),Qt("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),this.processorContext=new IQ(this._source.context,this.getTrackId()),this.processorDestination=new CQ(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on($c.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setVolume(n){Jr(n,"volume",0,1e3);const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&Hd.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return se.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void o.onSuccess();const s=this._source.createOutputTrack();this._mediaStreamTrack!==s&&(this._mediaStreamTrack=s,Vo(this,mr.NEED_REPLACE_TRACK,this).then(()=>{se.debug("[".concat(this.getTrackId(),"] replace web audio track success")),En("debug",this,"replace web audio track success")}).catch(c=>{se.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),c),En("warning",this,"replace web audio track failed ".concat(c.toString()))}))}catch{}o.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setPlaybackDevice(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),n]});if(!o._useAudioElement)throw new ye(pe.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Hd.setSinkID(o.getTrackId(),n)}catch(c){throw s.onError(c),c}s.onSuccess()})()}setEnabled(n,o,s){var c=this;return F(function*(){if(!s){if(n===c._enabled)return;c.stateCheck("enabled",n)}if(se.info("[".concat(c.getTrackId(),"] start setEnabled"),n),zt("info",c,"setEnabled",n),n){c._originMediaStreamTrack.enabled=!0;try{s||(c._enabled=!0),yield Vo(c,mr.NEED_ENABLE_TRACK,c),se.info("[".concat(c.getTrackId(),"] setEnabled to ").concat(n," success")),zt("info",c,"setEnabled",n,"success")}catch(h){throw s||(c._enabled=!1),se.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),zt("error",c,"setEnabled",n,h.toString()),h}}else{c._originMediaStreamTrack.enabled=!1,s||(c._enabled=!1);try{yield Vo(c,mr.NEED_DISABLE_TRACK,c)}catch(h){throw s||(c._enabled=!0),se.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),zt("info",c,"setEnabled",n,h.toString()),h}}})()}setMuted(n){var o=this;return F(function*(){n!==o._muted&&(o.stateCheck("muted",n),o._muted=n,o._originMediaStreamTrack.enabled=!n,se.debug("[".concat(o.getTrackId(),"] start set muted: ").concat(n)),zt("debug",o,"setMuted",n),n?yield Vo(o,mr.NEED_MUTE_TRACK,o):yield Vo(o,mr.NEED_UNMUTE_TRACK,o))})()}getStats(){return Ok(()=>{se.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead"),En("warning",this,"LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ly(this,mr.GET_STATS)||Ix({},PV)}setAudioFrameCallback(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners($c.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners($c.ON_AUDIO_BUFFER),this._source.on($c.ON_AUDIO_BUFFER,s=>n(s))}play(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] start audio playback")),zt("debug",this,"play"),this._useAudioElement?(se.debug("[".concat(this.getTrackId(),"] start audio playback in element")),En("debug",this,"start audio playback in element"),Hd.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),n.onSuccess()}stop(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] stop audio playback")),zt("debug",this,"stop"),this._useAudioElement?Hd.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),zt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Hd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}_updateOriginMediaStreamTrack(n,o){var s=this;return F(function*(){s._originMediaStreamTrack!==n&&(s._originMediaStreamTrack.removeEventListener("ended",s._handleTrackEnded),n.addEventListener("ended",s._handleTrackEnded),o&&s._originMediaStreamTrack.stop(),s._originMediaStreamTrack=n,s.processor&&s.processor.updateInput({track:n,context:s.processorContext}),s._mediaStreamTrack!==s._source.outputTrack?(s._mediaStreamTrack=s._originMediaStreamTrack,s._updatePlayerSource(),yield Vo(s,mr.NEED_REPLACE_TRACK,s)):s._source.updateTrack(s._originMediaStreamTrack))})()}renewMediaStreamTrack(n){return Qn.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new ye(pe.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new ye(pe.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const o=this.processor;null===(n=this._source.processSourceNode)||void 0===n||n.disconnect(),this.processor._source=!1,this.processor=void 0,o.reset()}bindProcessorDestinationEvents(){var n=this;this.processorDestination.on(jh.ON_TRACK,function(){var o=F(function*(s){s?s!==n._mediaStreamTrack&&(n._mediaStreamTrack=s,n._updatePlayerSource(),yield Vo(n,mr.NEED_REPLACE_TRACK,n)):n._mediaStreamTrack!==n._originMediaStreamTrack&&(n._mediaStreamTrack=n._originMediaStreamTrack,n._updatePlayerSource(),yield Vo(n,mr.NEED_REPLACE_TRACK,n))});return function(s){return o.apply(this,arguments)}}()),this.processorDestination.on(jh.ON_NODE,o=>{this._source.processedNode=o})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(jh.ON_TRACK),this.processorDestination.removeAllListeners(jh.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Kl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Kl.REQUEST_CONSTRAINTS)}}).prototype,"setPlaybackDevice",[nj],Object.getOwnPropertyDescriptor(Wa.prototype,"setPlaybackDevice"),Wa.prototype),rr(Wa.prototype,"setEnabled",[ks,lQ],Object.getOwnPropertyDescriptor(Wa.prototype,"setEnabled"),Wa.prototype),rr(Wa.prototype,"setMuted",[dQ,hQ,Tk],Object.getOwnPropertyDescriptor(Wa.prototype,"setMuted"),Wa.prototype),rr(Wa.prototype,"getStats",[Sx],Object.getOwnPropertyDescriptor(Wa.prototype,"getStats"),Wa.prototype),rr(Wa.prototype,"setAudioFrameCallback",[Cx],Object.getOwnPropertyDescriptor(Wa.prototype,"setAudioFrameCallback"),Wa.prototype),rr(Wa.prototype,"play",[rj],Object.getOwnPropertyDescriptor(Wa.prototype,"play"),Wa.prototype),rr(Wa.prototype,"stop",[K3],Object.getOwnPropertyDescriptor(Wa.prototype,"stop"),Wa.prototype),pQ=Wa))||pQ),X0=(ij=Qs("MicrophoneAudioTrack","getTrackId"),fQ=_s(),mQ=Ny("MicrophoneAudioTrack","_enabledMutex"),gQ=_s(),ij((rr((l1=class extends gc{constructor(n,o,s,c){super(n,o.encoderConfig?tk(o.encoderConfig):{},c),J(this,"_config",void 0),J(this,"_deviceName","default"),J(this,"_constraints",void 0),J(this,"_originalConstraints",void 0),J(this,"_enabled",!0),nr("info",this,"constructor",{trackId:c,deviceId:n.label,constraints:s}),this._config=o,this._constraints=s,this._originalConstraints=s,this._deviceName=n.label,"boolean"==typeof o.bypassWebAudio&&(this._bypassWebAudio=o.bypassWebAudio),Eu()&&Xr.bindInterruptDetectorTrack(this),this.bindProcessorContextEvents()}setDevice(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.MIC_AUDIO_TRACK_SET_DEVICE,options:[o.getTrackId(),n]});if(se.info("[".concat(o.getTrackId(),"] start set device to ").concat(n)),zt("info",o,"setDevice",n),o._enabled)try{const c=yield Jl.getDeviceById(n),h={};h.audio=Ix({},o._constraints),h.audio.deviceId={exact:n},o._originMediaStreamTrack.stop();let g=null;try{g=yield pl(h,o.getTrackId())}catch(f){throw se.error("[".concat(o.getTrackId(),"] setDevice failed"),f.toString()),zt("error",o,"setDevice",n,f.toString()),g=yield pl({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),f}yield o._updateOriginMediaStreamTrack(g.getAudioTracks()[0],!1),o._deviceName=c.label,o._config.microphoneId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),zt("error",o,"setDevice",n,c.toString()),c}else try{const c=yield Jl.getDeviceById(n);o._deviceName=c.label,o._config.microphoneId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),zt("error",o,"setDevice",n,c.toString()),c}s.onSuccess(),se.info("[".concat(o.getTrackId(),"] set device to ").concat(n," success")),zt("info",o,"setDevice",n,"success")})()}setEnabled(n,o,s){var c=()=>super.setEnabled,h=this;return F(function*(){if(o)return se.debug("[".concat(h.getTrackId,"] setEnabled false (do not close microphone)")),En("debug",h,"setEnabled false (do not close microphone)"),yield c().call(h,n);if(!s){if(n===h._enabled)return;h.stateCheck("enabled",n)}if(se.info("[".concat(h.getTrackId(),"] start setEnabled"),n),zt("info",h,"setEnabled",n),!n){h._originMediaStreamTrack.onended=null,h._originMediaStreamTrack.stop(),s||(h._enabled=!1);try{yield Vo(h,mr.NEED_DISABLE_TRACK,h)}catch(A){throw se.error("[".concat(h.getTrackId(),"] setEnabled false failed"),A.toString()),zt("error",h,"setEnabled",n,A.toString()),A}return}const g=Ix({},h._constraints),f=Jl.searchDeviceIdByName(h._deviceName);f&&!g.deviceId&&(g.deviceId=f);try{s||(h._enabled=!0);const A=yield pl({audio:h._constraints},h.getTrackId());yield h._updateOriginMediaStreamTrack(A.getAudioTracks()[0],!1),yield Vo(h,mr.NEED_ENABLE_TRACK,h)}catch(A){throw s||(h._enabled=!1),se.error("[".concat(h.getTrackId(),"] setEnabled true failed"),A.toString()),zt("error",h,"setEnabled",n,A.toString()),A}se.info("[".concat(h.getTrackId(),"] setEnabled success")),zt("info",h,"setEnabled",n,"success")})()}close(){super.close(),Eu()&&Xr.unbindInterruptDetectorTrack(this)}onTrackEnded(){var n=this;if((qc()||ag())&&this._enabled&&!this._isClosed&&Xr.duringInterruption){const o=function(){var s=F(function*(){Xr.off(va.IOS_INTERRUPTION_END,o),n._enabled&&!n._isClosed&&(se.debug("[".concat(n.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),En("debug",n,"try capture microphone media device for interrupted iOS device"),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return s.apply(this,arguments)}}();Xr.on(va.IOS_INTERRUPTION_END,o)}else se.debug("[".concat(this.getTrackId(),"] track ended")),js("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Vh.TRACK_ENDED)}renewMediaStreamTrack(n){var o=this;return F(function*(){const s=n||o._constraints,c=Jl.searchDeviceIdByName(o._deviceName);c&&!s.deviceId&&(s.deviceId=c),o._constraints=s,o._originMediaStreamTrack.stop();const h=yield pl({audio:o._constraints},o.getTrackId());yield o._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!0)})()}bindProcessorContextEvents(){var n=this;this.processorContext.on(Kl.REQUEST_UPDATE_CONSTRAINTS,function(){var o=F(function*(s,c,h){try{const g=Object.assign({},n._originalConstraints,...s);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this.processorContext.on(Kl.REQUEST_CONSTRAINTS,function(){var o=F(function*(s){s(n._originMediaStreamTrack.getSettings())});return function(s){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[fQ],Object.getOwnPropertyDescriptor(l1.prototype,"setDevice"),l1.prototype),rr(l1.prototype,"setEnabled",[mQ,gQ],Object.getOwnPropertyDescriptor(l1.prototype,"setEnabled"),l1.prototype),_Q=l1))||_Q),sj=(vQ=Qs("BufferSourceAudioTrack","getTrackId"),AQ=_s(),yQ=_s(),EQ=_s(),z3=_s(),bQ=_s(),vQ((rr((mc=class extends gc{constructor(n,o,s,c){super(o.createOutputTrack(),s,c),J(this,"source",void 0),J(this,"_bufferSource",void 0),nr("info",this,"constructor",{trackId:c}),this.source=n,this._bufferSource=o,this._bufferSource.on($c.AUDIO_SOURCE_STATE_CHANGE,h=>{this.emit(Vh.SOURCE_STATE_CHANGE,h)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),n,this.duration]});n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer(),o.onSuccess()}pauseProcessAudioBuffer(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),n.onSuccess()}seekAudioBuffer(n){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(n),o.onSuccess()}resumeProcessAudioBuffer(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),n.onSuccess()}stopProcessAudioBuffer(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),n.onSuccess()}}).prototype,"startProcessAudioBuffer",[AQ],Object.getOwnPropertyDescriptor(mc.prototype,"startProcessAudioBuffer"),mc.prototype),rr(mc.prototype,"pauseProcessAudioBuffer",[yQ],Object.getOwnPropertyDescriptor(mc.prototype,"pauseProcessAudioBuffer"),mc.prototype),rr(mc.prototype,"seekAudioBuffer",[EQ],Object.getOwnPropertyDescriptor(mc.prototype,"seekAudioBuffer"),mc.prototype),rr(mc.prototype,"resumeProcessAudioBuffer",[z3],Object.getOwnPropertyDescriptor(mc.prototype,"resumeProcessAudioBuffer"),mc.prototype),rr(mc.prototype,"stopProcessAudioBuffer",[bQ],Object.getOwnPropertyDescriptor(mc.prototype,"stopProcessAudioBuffer"),mc.prototype),SQ=mc))||SQ),Gd=Qs("MixingAudioTrack","getTrackId")(Y3=class extends gc{get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=Ck().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,vs(8,"track-mix-")),J(this,"trackList",void 0),J(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return-1!==this.trackList.indexOf(n)}addAudioTrack(n){if(-1!==this.trackList.indexOf(n))return se.debug("track ".concat(n.getTrackId()," is already added")),void En("debug",this,"track already added");se.debug("add ".concat(n.getTrackId()," to mixing track")),zt("debug",this,"addAudioTrack",n.getTrackId()),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()}removeAudioTrack(n){if(-1!==this.trackList.indexOf(n)){se.debug("remove ".concat(n.getTrackId()," from mixing track")),zt("debug",this,"removeAudioTrack",n.getTrackId());try{n._source.outputNode.disconnect(this.destNode)}catch{}eU(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}})||Y3;class CQ extends st{constructor(o){super(),J(this,"name","AudioProcessorDestination"),J(this,"ID","0"),J(this,"inputTrack",void 0),J(this,"inputNode",void 0),J(this,"audioProcessorContext",void 0),J(this,"_source",void 0),this.audioProcessorContext=o}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new ye(pe.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new ye(pe.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.emit(jh.ON_TRACK,void 0),this.emit(jh.ON_NODE,void 0)}updateInput(o){if(o.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");o.track&&this.inputTrack!==o.track&&(this.inputTrack=o.track,this.emit(jh.ON_TRACK,this.inputTrack)),o.node&&this.inputNode!==o.node&&(this.inputNode=o.node,this.emit(jh.ON_NODE,this.inputNode))}}class IQ extends st{constructor(o,s){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"audioContext",void 0),J(this,"trackId",void 0),this.audioContext=o,this.trackId=s}getConstraints(){var o=this;return F(function*(){return Hh(o,Kl.REQUEST_CONSTRAINTS)})()}getAudioContext(){return this.audioContext}requestApplyConstraints(o,s){var c=this;return F(function*(){var h;return se.info("processor ".concat(s.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(s,o),Vo(c,Kl.REQUEST_UPDATE_CONSTRAINTS,Array.from(ov(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(o){var s=this;return F(function*(){var c;if(s.constraintsMap.has(o))return s.constraintsMap.delete(o),Vo(s,Kl.REQUEST_UPDATE_CONSTRAINTS,Array.from(ov(c=s.constraintsMap).call(c)))})()}registerStats(o,s,c){this.statsRegistry.find(h=>h.processorID===o.ID&&h.processorName===o.name&&h.type===s)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:s,cb:c})}unregisterStats(o,s){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:s,processorName:c,type:h,cb:g}=o;return{processorID:s,processorName:c,type:h,stats:g()}})}}class wQ extends st{constructor(){super(...arguments),J(this,"resultStorage",new Map)}setLocalAudioStats(o,s,c){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",o,this.checkAudioInputLevel(c,s)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",o,this.checkSendAudioBitrate(c,s))}setLocalVideoStats(o,s,c){this.record("SEND_VIDEO_BITRATE_TOO_LOW",o,this.checkSendVideoBitrate(c,s)),this.record("FRAMERATE_INPUT_TOO_LOW",o,this.checkFramerateInput(c,s)),this.record("FRAMERATE_SENT_TOO_LOW",o,this.checkFramerateSent(c))}setRemoteAudioStats(o,s){const c=o.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",c,this.checkAudioOutputLevel(s))}setRemoteVideoStats(o,s){const c=o.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",c,this.checkVideoDecode(s))}record(o,s,c){this.resultStorage.has(o)||this.resultStorage.set(o,{result:[],isPrevNormal:!0});const h=this.resultStorage.get(o);if(h&&(h.result.push(c),h.result.length>=5)){const g=h.result.includes(!0);h.isPrevNormal&&!g&&this.emit("exception",d1[o],o,s),!h.isPrevNormal&&g&&this.emit("exception",d1[o]+2e3,o+"_RECOVER",s),h.isPrevNormal=g,h.result=[]}}checkAudioOutputLevel(o){return!(o.receiveBitrate>0&&0===o.receiveLevel)}checkAudioInputLevel(o,s){return s instanceof Gd&&!s.isActive||!!s.muted||0!==o.sendVolumeLevel}checkFramerateInput(o,s){let c=null;s._encoderConfig&&s._encoderConfig.frameRate&&(c=xy(s._encoderConfig.frameRate));const h=o.captureFrameRate;return!c||!h||!(c>10&&h<5||c<10&&c>=5&&h<=1)}checkFramerateSent(o){return!(o.captureFrameRate&&o.sendFrameRate&&o.captureFrameRate>5&&o.sendFrameRate<=1)}checkSendVideoBitrate(o,s){return!!s.muted||0!==o.sendBitrate}checkSendAudioBitrate(o,s){return s instanceof Gd&&!s.isActive||!!s.muted||0!==o.sendBitrate}checkVideoDecode(o){return 0===o.receiveBitrate||0!==o.decodeFrameRate}}const d1={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},$l=new class{markSubscribeStart(n,o){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(o))}markPublishStart(n,o){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(o))}measureFromSubscribeStart(n,o){const s=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(o));if(s.length>0){const c=s[s.length-1];return Math.round(performance.now()-c.startTime)}return 0}measureFromPublishStart(n,o){const s=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(o));if(s.length>0){const c=s[s.length-1];return Math.round(performance.now()-c.startTime)}return 0}};function aj(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Z0(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?aj(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):aj(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class eS{constructor(o){J(this,"store",void 0),J(this,"onStatsException",void 0),J(this,"onUploadPublishDuration",void 0),J(this,"localStats",new Map),J(this,"remoteStats",new Map),J(this,"updateStatsInterval",void 0),J(this,"trafficStats",void 0),J(this,"trafficStatsPeerList",[]),J(this,"uplinkStats",void 0),J(this,"exceptionMonitor",void 0),J(this,"p2pChannel",void 0),J(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=o,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new wQ,this.exceptionMonitor.on("exception",(s,c,h)=>{this.onStatsException&&this.onStatsException(s,c,h)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(xn.LocalAudioTrack)||Z0({},PV)}getLocalVideoTrackStats(){return this.localStats.get(xn.LocalVideoTrack)||Z0({},NV)}getRemoteAudioTrackStats(o){const s=(g,f)=>{if(!this.trafficStats)return f;const A=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return A&&(f.publishDuration=A.B_ppad+(Date.now()-this.trafficStats.timestamp)),f},c={};if(o){var h;const g=null===(h=this.remoteStats.get(o))||void 0===h?void 0:h.audioStats;g&&(c[o]=s(o,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[f,{audioStats:A}]=g;A&&(c[f]=s(f,A))});return c}getRemoteNetworkQualityStats(o){const s={};if(o){var c;const h=null===(c=this.remoteStats.get(o))||void 0===c?void 0:c.networkStats;h&&(s[o]=h)}else Array.from(this.remoteStats.entries()).forEach(h=>{let[g,{networkStats:f}]=h;f&&(s[g]=f)});return s}getRemoteVideoTrackStats(o){const s=(g,f)=>{if(!this.trafficStats)return f;const A=this.trafficStats.peer_delay.find(_=>_.peer_uid===g);return A&&(f.publishDuration=A.B_ppvd+(Date.now()-this.trafficStats.timestamp)),f},c={};if(o){var h;const g=null===(h=this.remoteStats.get(o))||void 0===h?void 0:h.videoStats;g&&(c[o]=s(o,g))}else Array.from(this.remoteStats.entries()).forEach(g=>{let[f,{videoStats:A}]=g;A&&(c[f]=s(f,A))});return c}getRTCStats(){let o=0,s=0,c=0,h=0;const g=this.localStats.get(xn.LocalAudioTrack);g&&(o+=g.sendBytes,s+=g.sendBitrate);const f=this.localStats.get(xn.LocalVideoTrack);f&&(o+=f.sendBytes,s+=f.sendBitrate);const A=this.localStats.get(xn.LocalVideoLowTrack);A&&(o+=A.sendBytes,s+=A.sendBitrate),this.remoteStats.forEach(E=>{let{audioStats:S,videoStats:I}=E;S&&(c+=S.receiveBytes,h+=S.receiveBitrate),I&&(c+=I.receiveBytes,h+=I.receiveBitrate)});let _=1;return this.trafficStats&&(_+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:_,SendBitrate:s,SendBytes:o,RecvBytes:c,RecvBitrate:h,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(o){this.localStats.set(o,void 0)}removeLocalStats(o){o?this.localStats.delete(o):this.localStats.clear()}addRemoteStats(o){this.remoteStats.set(o,{})}removeRemoteStats(o){o?this.remoteStats.delete(o):this.remoteStats.clear()}addP2PChannel(o){this.p2pChannel=o}updateTrafficStats(o){o.peer_delay=o.peer_delay.filter(s=>void 0!==s.B_ppad||void 0!==s.B_ppvd),o.peer_delay.filter(s=>-1===this.trafficStatsPeerList.indexOf(s.peer_uid)).forEach(s=>{var c;const h=null===(c=this.p2pChannel)||void 0===c?void 0:c.getRemoteMedia(s.peer_uid),g=null!=h&&h.videoSSRC?$l.measureFromSubscribeStart(this.store.clientId,h.videoSSRC):0,f=null!=h&&h.audioSSRC?$l.measureFromSubscribeStart(this.store.clientId,h.audioSSRC):0;void 0!==s.B_ppad&&void 0!==s.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(s.peer_uid,s.B_ppad,s.B_ppvd,g>f?g:f),this.trafficStatsPeerList.push(s.peer_uid))}),this.trafficStats=o}updateUplinkStats(o){this.uplinkStats&&this.uplinkStats.B_fir!==o.B_fir&&se.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(o.B_fir)),this.uplinkStats=o}static isRemoteVideoFreeze(o,s,c){return!!o&&(!!c&&s.framesDecodeFreezeTime>c.framesDecodeFreezeTime||!(!c||s.framesDecodeCount>c.framesDecodeCount))}static isRemoteAudioFreeze(o){return!!o&&o._isFreeze()}isLocalVideoFreeze(o){return!(!o.inputFrame||!o.sentFrame)&&o.inputFrame.frameRate>5&&o.sentFrame.frameRate<3}updateLocalStats(o){Array.from(this.localStats.entries()).forEach(s=>{let[c,h]=s;switch(c){case xn.LocalVideoTrack:case xn.LocalVideoLowTrack:{const g=h,f=Z0({},NV),A=o.getStats(),_=o.getLocalMedia(c);if(A){const E=A.videoSend.find(S=>S.ssrc===_?.ssrcs[0].ssrcId);if(E){const S=o.getLocalVideoSize(),I=o.getEncoderConfig(xn.LocalVideoTrack);"H264"!==E.codec&&"VP8"!==E.codec&&"VP9"!==E.codec&&"AV1X"!==E.codec&&"AV1"!==E.codec||(f.codecType=E.codec),f.sendBytes=E.bytes,f.sendBitrate=g?8*Math.max(0,f.sendBytes-g.sendBytes):0,E.inputFrame?(f.captureFrameRate=E.inputFrame.frameRate,f.captureResolutionHeight=E.inputFrame.height,f.captureResolutionWidth=E.inputFrame.width):S&&(f.captureResolutionWidth=S.width,f.captureResolutionHeight=S.height),E.sentFrame?(f.sendFrameRate=E.sentFrame.frameRate,f.sendResolutionHeight=E.sentFrame.height,f.sendResolutionWidth=E.sentFrame.width):S&&(f.sendResolutionWidth=S.width,f.sendResolutionHeight=S.height),E.avgEncodeMs&&(f.encodeDelay=E.avgEncodeMs),I&&I.bitrateMax&&(f.targetSendBitrate=1e3*I.bitrateMax),f.sendPackets=E.packets,f.sendPacketsLost=E.packetsLost,f.totalDuration=g?g.totalDuration+1:1,f.totalFreezeTime=g?g.totalFreezeTime:0,this.isLocalVideoFreeze(E)&&(f.totalFreezeTime+=1)}this.trafficStats&&(f.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(c,f),f&&_&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,_.track,f);break}case xn.LocalAudioTrack:{const g=h,f=Z0({},PV),A=o.getStats(),_=o.getLocalMedia(c);if(A){const E=A.audioSend.find(S=>S.ssrc===_?.ssrcs[0].ssrcId);if(E){if("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(f.codecType=E.codec),E.inputLevel)f.sendVolumeLevel=Math.round(32767*E.inputLevel);else{const S=o.getLocalAudioVolume();S&&(f.sendVolumeLevel=Math.round(32767*S))}f.sendBytes=E.bytes,f.sendPackets=E.packets,f.sendPacketsLost=E.packetsLost,f.sendBitrate=g?8*Math.max(0,f.sendBytes-g.sendBytes):0}}this.trafficStats&&(f.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(xn.LocalAudioTrack,f),f&&_&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,_.track,f);break}}})}updateRemoteStats(o){Array.from(this.remoteStats.entries()).forEach(s=>{let[c,{videoStats:h,audioStats:g,videoPcStats:f}]=s;const A=g,_=h,E=f,S=Z0({},S7),I=Z0({},C7),R=Z0({},kW),{audioTrack:M,videoTrack:Q,audioSSRC:H,videoSSRC:Z}=o.getRemoteMedia(c),le=o.getStats(),ge=le?.audioRecv.find(nt=>nt.ssrc===H),Se=le?.videoRecv.find(nt=>nt.ssrc===Z),Ne=this.trafficStats&&this.trafficStats.peer_delay.find(nt=>nt.peer_uid===c);if(ge&&("opus"!==ge.codec&&"aac"!==ge.codec&&"PCMU"!==ge.codec&&"PCMA"!==ge.codec&&"G722"!==ge.codec||(S.codecType=ge.codec),ge.outputLevel?S.receiveLevel=Math.round(32767*ge.outputLevel):M&&(S.receiveLevel=Math.round(32767*M.getVolumeLevel())),S.receiveBytes=ge.bytes,S.receivePackets=ge.packets,S.receivePacketsLost=ge.packetsLost,S.packetLossRate=S.receivePacketsLost/(S.receivePackets+S.receivePacketsLost),S.receiveBitrate=A?8*Math.max(0,S.receiveBytes-A.receiveBytes):0,S.totalDuration=A?A.totalDuration+1:1,S.totalFreezeTime=A?A.totalFreezeTime:0,S.freezeRate=S.totalFreezeTime/S.totalDuration,S.receiveDelay=ge.jitterBufferMs,S.totalDuration>10&&eS.isRemoteAudioFreeze(M)&&(S.totalFreezeTime+=1)),Se){"H264"!==Se.codec&&"VP8"!==Se.codec&&"VP9"!==Se.codec&&"AV1X"!==Se.codec&&"AV1"!==Se.codec||(I.codecType=Se.codec),I.receiveBytes=Se.bytes,I.receiveBitrate=_?8*Math.max(0,I.receiveBytes-_.receiveBytes):0,I.decodeFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,I.renderFrameRate=Se.decodeFrameRate<0?0:Se.decodeFrameRate,Se.outputFrame&&(I.renderFrameRate=Se.outputFrame.frameRate),Se.receivedFrame?(I.receiveFrameRate=Se.receivedFrame.frameRate,I.receiveResolutionHeight=Se.receivedFrame.height,I.receiveResolutionWidth=Se.receivedFrame.width):Q&&(I.receiveResolutionHeight=Q._videoHeight||0,I.receiveResolutionWidth=Q._videoWidth||0),void 0!==Se.framesRateFirefox&&(I.receiveFrameRate=Math.round(Se.framesRateFirefox)),I.receivePackets=Se.packets,I.receivePacketsLost=Se.packetsLost,I.packetLossRate=I.receivePacketsLost/(I.receivePackets+I.receivePacketsLost),I.totalDuration=_?_.totalDuration+1:1,I.totalFreezeTime=_?_.totalFreezeTime:0,I.receiveDelay=Se.jitterBufferMs||0;const nt=!!Z&&o.getRemoteVideoIsReady(Z);Q&&nt&&eS.isRemoteVideoFreeze(Q,Se,E)&&(I.totalFreezeTime+=1),I.freezeRate=I.totalFreezeTime/I.totalDuration}Ne&&(S.end2EndDelay=Ne.B_ad,I.end2EndDelay=Ne.B_vd,S.transportDelay=Ne.B_ed,I.transportDelay=Ne.B_ed,S.currentPacketLossRate=Ne.B_ealr4/100,I.currentPacketLossRate=Ne.B_evlr4/100,R.uplinkNetworkQuality=Ne.B_punq?Ne.B_punq:0,R.downlinkNetworkQuality=Ne.B_pdnq?Ne.B_pdnq:0),this.remoteStats.set(c,{audioStats:S,videoStats:I,videoPcStats:Se,networkStats:R}),M&&this.exceptionMonitor.setRemoteAudioStats(M,S),Q&&this.exceptionMonitor.setRemoteVideoStats(Q,I)})}}function TQ(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function q3(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?TQ(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):TQ(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function XK(n){if(!n.address||!n.tcp)throw new ye(pe.UNEXPECTED_RESPONSE,"Invalid address format ".concat(n));return n.address.match(/^[\.\:\d]+$/)?"".concat(n.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(se.info("Cannot recognized as IP address ".concat(n.address,". Used As Host instead")),"".concat(n.address,":").concat(n.tcp))}function wx(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(Qt("TURN_DOMAIN")):(se.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function RQ(n,o){const s=Qt("GATEWAY_DOMAINS");let c=s[1]&&-1!==o.indexOf(s[1])?1:0;return n.addresses=n.addresses||[],{gatewayAddrs:n.addresses.map(h=>h.domain_prefix?{address:"".concat(h.domain_prefix,".").concat(s[c++%s.length],":").concat(h.port)}:h.ip.match(/^[\.\:\d]+$/)?{ip:h.ip,port:h.port,address:"".concat(h.ip.replace(/[^\d]/g,"-"),".").concat(s[c++%s.length],":").concat(h.port)}:(se.info("Cannot recognized as IP address ".concat(h.ip,". Used As Host instead")),{ip:h.ip,port:h.port,address:"".concat(h.ip,":").concat(h.port)})),uid:n.uid,cid:n.cid,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function xy(n){return"number"==typeof n?n:n.exact||n.ideal||n.max||n.min||0}function cj(n){const o=n._encoderConfig;if(!o)return{};const s={resolution:o.width&&o.height?"".concat(xy(o.width),"x").concat(xy(o.height)):void 0,maxVideoBW:o.bitrateMax,minVideoBW:o.bitrateMin};return"number"==typeof o.frameRate?(s.maxFrameRate=o.frameRate,s.minFrameRate=o.frameRate):o.frameRate&&(s.maxFrameRate=o.frameRate.max||o.frameRate.ideal||o.frameRate.exact||o.frameRate.min,s.minFrameRate=o.frameRate.min||o.frameRate.ideal||o.frameRate.exact||o.frameRate.max),s}function uj(n,o,s){var c;const h=o.videoSend.find(A=>A.ssrc===n);if(!h)return null;const g=null==s||null===(c=s.videoSend.find(A=>A.ssrc===n))||void 0===c?void 0:c.inputFrame,f={id:vs(10,""),timestamp:new Date(o.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:h.ssrc.toString()};return h.inputFrame&&(g&&h.inputFrame.height===g.height||(f.A_fhi=h.inputFrame.height?h.inputFrame.height.toString():"0"),g&&h.inputFrame.width===g.width||(f.A_fwi=h.inputFrame.width?h.inputFrame.width.toString():"0"),g&&h.inputFrame.frameRate===g.frameRate||(f.A_fri=h.inputFrame.frameRate?h.inputFrame.frameRate.toString():"0")),f}function J3(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function $3(n,o){let s,c,h;switch(o){case ga.CHOOSE_SERVER:s=4096,c="choose server";break;case ga.CLOUD_PROXY:s=1048576,c="proxy";break;case ga.CLOUD_PROXY_5:s=4194304,c="proxy5";break;case ga.CLOUD_PROXY_FALLBACK:s=4194310,c="proxy fallback";break;default:throw new ye(pe.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(g=>{g.buffer&&g.buffer.flag===s&&(h={code:g.buffer.code,addresses:(g.buffer.edges_services||[]).map(f=>q3(q3({},f),{},{ticket:g.buffer.cert})),server_ts:n.enter_ts,uid:g.buffer.uid,cid:g.buffer.cid,cname:g.buffer.cname,detail:q3(q3({},g.buffer.detail),n.detail),flag:g.buffer.flag,opid:n.opid})}),!h)throw new ye(pe.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(c," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return h}function OQ(n,o){return Tx.apply(this,arguments)}function Tx(){return Tx=F(function*(n,o){return yield Qn.all(n.addresses.map(function(){var s=F(function*(c){return{address:wx(c.ip),tcpport:c.port,udpport:c.port,username:o&&Qt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?o.toString():Ta.username,password:o&&Qt("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?yield qK(o.toString()):Ta.password}});return function(c){return s.apply(this,arguments)}}()))}),Tx.apply(this,arguments)}function DQ(n,o){const s=o._videoHeight||o.getMediaStreamTrack(!0).getSettings().height;return s?s/xy(n.height):4}function sv(n){let{candidateType:o,relayProtocol:s,type:c,address:h,port:g,protocol:f}=n;return"local-candidate"===c?{candidateType:o,relayProtocol:s,protocol:f}:{candidateType:o,relayProtocol:s,address:h,port:g,protocol:f}}function X3(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function h1(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?X3(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):X3(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function Rk(n){return window.TextEncoder?(new TextEncoder).encode(n).length:n.length}function Mc(n){return new Qn(o=>{window.setTimeout(o,n)})}function ZK(n){const o=new ye(pe.TIMEOUT,"timeout");return new Qn((s,c)=>{window.setTimeout(()=>c(o),n)})}function vs(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,o=arguments.length>1?arguments[1]:void 0;const s=Math.random().toString(16).substr(2,n).toLowerCase();return s.length===n?"".concat(o).concat(s):"".concat(o).concat(s)+vs(n-s.length,"")}function kQ(){return vs(32,"").toUpperCase()}const Z3=()=>{};function PQ(n){return new Qn((o,s)=>{let c=!1;const h=document.createElement("video");h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.muted=!0,h.autoplay=!0,h.setAttribute("playsinline",""),h.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(h);const g=qc()?"canplay":"playing";h.addEventListener(g,()=>{const f=h.videoWidth,A=h.videoHeight;!f&&hs()||(c=!0,h.srcObject=null,h.remove(),o([f,A]))}),h.srcObject=new MediaStream([n]),h.play().catch(Z3),setTimeout(()=>{c||(h.srcObject=null,h.remove(),o([h.videoWidth,h.videoHeight]))},4e3)})}function p1(n){return Qn.all(n.map(o=>o.then(s=>{throw s},s=>s))).then(o=>{throw o},o=>o)}function Hh(n,o){for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return 0===n.getListeners(o).length?Qn.reject(new ye(pe.UNEXPECTED_ERROR,"can not emit promise")):new Qn((g,f)=>{n.emit(o,...c,g,f)})}function Vo(n,o){if(0===n.getListeners(o).length)return Qn.resolve();for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return Hh(n,o,...c)}function Ly(n,o){if(0===n.getListeners(o).length)return null;for(var s=arguments.length,c=new Array(s>2?s-2:0),h=2;h<s;h++)c[h-2]=arguments[h];return f1(n,o,...c)}function f1(n,o){let s=null,c=null;for(var h=arguments.length,g=new Array(h>2?h-2:0),f=2;f<h;f++)g[f-2]=arguments[f];if(n.emit(o,...g,A=>{s=A},A=>{c=A}),null!==c)throw c;if(null===s)throw new ye(pe.UNEXPECTED_ERROR,"handler is not sync");return s}function eU(n,o){const s=n.indexOf(o);-1!==s&&n.splice(s,1)}function NQ(n){const o=[];return n.forEach(s=>{-1===o.indexOf(s)&&o.push(s)}),o}function Tp(n){Qn.resolve().then(n)}function _c(n){return JSON.parse(JSON.stringify(n))}const MQ={};function Ok(n,o){MQ[o]||(MQ[o]=!0,n())}function Rx(n){const o=window.atob(n),s=new Uint8Array(new ArrayBuffer(o.length));for(let c=0;c<o.length;c+=1)s[c]=o.charCodeAt(c);return s}function Dk(n){let o="";for(let s=0;s<n.length;s+=1)o+=String.fromCharCode(n[s]);return window.btoa(o)}const xQ=new class{constructor(){J(this,"fnMap",new Map)}throttleByKey(n,o,s,c){for(var h=arguments.length,g=new Array(h>4?h-4:0),f=4;f<h;f++)g[f-4]=arguments[f];if(this.fnMap.has(o)){const A=this.fnMap.get(o);if(A.threshold!==s){A.fn(...A.args),clearTimeout(A.timer);const _=window.setTimeout(()=>{const E=this.fnMap.get(o);E&&E.fn(...E.args),this.fnMap.delete(o)},s);this.fnMap.set(o,{fn:n,threshold:s,timer:_,args:g,skipFn:c})}else A.skipFn&&A.skipFn(...A.args),this.fnMap.set(o,h1(h1({},A),{},{fn:n,args:g,skipFn:c}))}else{const A=window.setTimeout(()=>{const _=this.fnMap.get(o);_&&_.fn(..._.args),this.fnMap.delete(o)},s);this.fnMap.set(o,{fn:n,threshold:s,timer:A,args:g,skipFn:c})}}},lj=xQ.throttleByKey.bind(xQ),m1=function(){var n=F(function*(o){let{fragementLength:s,referenceList:c,asyncMapHandler:h,allFailedhandler:g,promisesCollector:f}=o,A=0;const _=s;let E,S=0;const I=function(){var R=F(function*(){const M=(()=>{const Q=A*_;return c.slice(Q,Q+_).map(h)})();f&&f.push(...M);try{E=yield p1(M)}catch(Q){if(S+=_,A++,!(S>=c.length))return void(yield I());g(Q)}M.forEach(Q=>Q.cancel())});return function(){return R.apply(this,arguments)}}();return yield I(),E});return function(s){return n.apply(this,arguments)}}();function LQ(n){return"object"==typeof n&&null!==n&&!(n instanceof RegExp)}var ez=Ls,tz=Fs("iterator"),BQ=!ez(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),o=n.searchParams,s="";return n.pathname="c%20d",o.forEach(function(c,h){o.delete("b"),s+=h+c}),!n.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[tz]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host}),tU=ju,FQ=du,av=Ls,By=ic,Fy=Ju,nz=Vv,hj=pu,Xl=hm,Lf=Object.assign,UQ=Object.defineProperty,cv=Qi([].concat),rz=!Lf||av(function(){if(tU&&1!==Lf({b:1},Lf(UQ({},"a",{enumerable:!0,get:function(){UQ(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},o={},s=Symbol(),c="abcdefghijklmnopqrst";return n[s]=7,c.split("").forEach(function(h){o[h]=h}),7!=Lf({},n)[s]||By(Lf({},o)).join("")!=c})?function(n,o){for(var s=hj(n),c=arguments.length,h=1,g=Fy.f,f=nz.f;c>h;)for(var A,_=Xl(arguments[h++]),E=g?cv(By(_),g(_)):By(_),S=E.length,I=0;S>I;)A=E[I++],tU&&!FQ(f,_,A)||(s[A]=_[A]);return s}:Lf,VQ=jc,iz=A_,jQ=ph,oz=du,pj=pu,kk=function(n,o,s,c){try{return c?o(VQ(s)[0],s[1]):o(s)}catch(h){iz(n,"throw",h)}},fj=Ib,nU=bh,sz=sp,QQ=Yw,az=Tb,cz=v_,HQ=ri.Array,g1=Qi,Pk=2147483647,rU=/[^\0-\u007E]/,Nk=/[.\u3002\uFF0E\uFF61]/g,mj="Overflow: input needs wider integers to process",Ox=ri.RangeError,uz=g1(Nk.exec),_1=Math.floor,gj=String.fromCharCode,GQ=g1("".charCodeAt),WQ=g1([].join),uv=g1([].push),lz=g1("".replace),_j=g1("".split),dz=g1("".toLowerCase),vj=function(n){return n+22+75*(n<26)},KQ=function(n,o,s){var c=0;for(n=s?_1(n/700):n>>1,n+=_1(n/o);n>455;)n=_1(n/35),c+=36;return _1(c+36*n/(n+38))},zQ=function(n){var o,s,c=[],h=(n=function(le){for(var ge=[],Se=0,Ne=le.length;Se<Ne;){var nt=GQ(le,Se++);if(nt>=55296&&nt<=56319&&Se<Ne){var Nt=GQ(le,Se++);56320==(64512&Nt)?uv(ge,((1023&nt)<<10)+(1023&Nt)+65536):(uv(ge,nt),Se--)}else uv(ge,nt)}return ge}(n)).length,g=128,f=0,A=72;for(o=0;o<n.length;o++)(s=n[o])<128&&uv(c,gj(s));var _=c.length,E=_;for(_&&uv(c,"-");E<h;){var S=Pk;for(o=0;o<n.length;o++)(s=n[o])>=g&&s<S&&(S=s);var I=E+1;if(S-g>_1((Pk-f)/I))throw Ox(mj);for(f+=(S-g)*I,g=S,o=0;o<n.length;o++){if((s=n[o])<g&&++f>Pk)throw Ox(mj);if(s==g){for(var R=f,M=36;;){var Q=M<=A?1:M>=A+26?26:M-A;if(R<Q)break;var H=R-Q,Z=36-Q;uv(c,gj(vj(Q+H%Z))),R=_1(H/Z),M+=36}uv(c,gj(vj(R))),A=KQ(f,I,E==_),f=0,E++}}f++,g++}return WQ(c,"")},iU=ri.TypeError,Dx=us,kx=ri,oU=hu,Px=du,Wd=Qi,Aj=BQ,yj=FA,YQ=MI,hz=mp,qQ=oN,Mk=pf,xk=HA,Nx=Is,JQ=Bs,pz=ph,$Q=pp,XQ=jc,Lk=Qu,Gh=Rc,ZQ=Fm,Mx=lh,Ej=Tb,eH=v_,v1=function(n,o){if(n<o)throw iU("Not enough arguments");return n},bj=d7,Sj=Fs("iterator"),sU="URLSearchParams",tH="URLSearchParamsIterator",nH=Mk.set,Ag=Mk.getterFor(sU),fz=Mk.getterFor(tH),rH=oU("fetch"),xx=oU("Request"),Bk=oU("Headers"),Cj=xx&&xx.prototype,Ij=Bk&&Bk.prototype,aU=kx.RegExp,mz=kx.TypeError,iH=kx.decodeURIComponent,gz=kx.encodeURIComponent,_z=Wd("".charAt),oH=Wd([].join),A1=Wd([].push),wj=Wd("".replace),vz=Wd([].shift),sH=Wd([].splice),Fk=Wd("".split),Tj=Wd("".slice),aH=/\+/g,cU=Array(4),cH=function(n){return cU[n-1]||(cU[n-1]=aU("((?:%[\\da-f]{2}){"+n+"})","gi"))},Az=function(n){try{return iH(n)}catch{return n}},Rj=function(n){var o=wj(n,aH," "),s=4;try{return iH(o)}catch{for(;s;)o=wj(o,cH(s--),Az);return o}},Oj=/[!'()~]|%20/g,uU={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Dj=function(n){return uU[n]},kj=function(n){return wj(gz(n),Oj,Dj)},lU=qQ(function(n,o){nH(this,{type:tH,iterator:Ej(Ag(n).entries),kind:o})},"Iterator",function(){var n=fz(this),o=n.kind,s=n.iterator.next(),c=s.value;return s.done||(s.value="keys"===o?c.key:"values"===o?c.value:[c.key,c.value]),s},!0),Uk=function(n){this.entries=[],this.url=null,void 0!==n&&(Lk(n)?this.parseObject(n):this.parseQuery("string"==typeof n?"?"===_z(n,0)?Tj(n,1):n:Gh(n)))};Uk.prototype={type:sU,bindURL:function(n){this.url=n,this.update()},parseObject:function(n){var o,s,c,h,g,f,A,_=eH(n);if(_)for(s=(o=Ej(n,_)).next;!(c=Px(s,o)).done;){if(g=(h=Ej(XQ(c.value))).next,(f=Px(g,h)).done||(A=Px(g,h)).done||!Px(g,h).done)throw mz("Expected sequence with length 2");A1(this.entries,{key:Gh(f.value),value:Gh(A.value)})}else for(var E in n)JQ(n,E)&&A1(this.entries,{key:E,value:Gh(n[E])})},parseQuery:function(n){if(n)for(var o,s,c=Fk(n,"&"),h=0;h<c.length;)(o=c[h++]).length&&(s=Fk(o,"="),A1(this.entries,{key:Rj(vz(s)),value:Rj(oH(s,"="))}))},serialize:function(){for(var n,o=this.entries,s=[],c=0;c<o.length;)n=o[c++],A1(s,kj(n.key)+"="+kj(n.value));return oH(s,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var dU=function(){xk(this,Lx),nH(this,new Uk(arguments.length>0?arguments[0]:void 0))},Lx=dU.prototype;if(YQ(Lx,{append:function(n,o){v1(arguments.length,2);var s=Ag(this);A1(s.entries,{key:Gh(n),value:Gh(o)}),s.updateURL()},delete:function(n){v1(arguments.length,1);for(var o=Ag(this),s=o.entries,c=Gh(n),h=0;h<s.length;)s[h].key===c?sH(s,h,1):h++;o.updateURL()},get:function(n){v1(arguments.length,1);for(var o=Ag(this).entries,s=Gh(n),c=0;c<o.length;c++)if(o[c].key===s)return o[c].value;return null},getAll:function(n){v1(arguments.length,1);for(var o=Ag(this).entries,s=Gh(n),c=[],h=0;h<o.length;h++)o[h].key===s&&A1(c,o[h].value);return c},has:function(n){v1(arguments.length,1);for(var o=Ag(this).entries,s=Gh(n),c=0;c<o.length;)if(o[c++].key===s)return!0;return!1},set:function(n,o){v1(arguments.length,1);for(var s,c=Ag(this),h=c.entries,g=!1,f=Gh(n),A=Gh(o),_=0;_<h.length;_++)(s=h[_]).key===f&&(g?sH(h,_--,1):(g=!0,s.value=A));g||A1(h,{key:f,value:A}),c.updateURL()},sort:function(){var n=Ag(this);bj(n.entries,function(o,s){return o.key>s.key?1:-1}),n.updateURL()},forEach:function(n){for(var o,s=Ag(this).entries,c=pz(n,arguments.length>1?arguments[1]:void 0),h=0;h<s.length;)c((o=s[h++]).value,o.key,this)},keys:function(){return new lU(this,"keys")},values:function(){return new lU(this,"values")},entries:function(){return new lU(this,"entries")}},{enumerable:!0}),yj(Lx,Sj,Lx.entries,{name:"entries"}),yj(Lx,"toString",function(){return Ag(this).serialize()},{enumerable:!0}),hz(dU,sU),Dx({global:!0,forced:!Aj},{URLSearchParams:dU}),!Aj&&Nx(Bk)){var uH=Wd(Ij.has),yz=Wd(Ij.set),lH=function(n){if(Lk(n)){var o,s=n.body;if($Q(s)===sU)return o=n.headers?new Bk(n.headers):new Bk,uH(o,"content-type")||yz(o,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),ZQ(n,{body:Mx(0,Gh(s)),headers:Mx(0,o)})}return n};if(Nx(rH)&&Dx({global:!0,enumerable:!0,forced:!0},{fetch:function(n){return rH(n,arguments.length>1?lH(arguments[1]):{})}}),Nx(xx)){var Bx=function(n){return xk(this,Cj),new xx(n,arguments.length>1?lH(arguments[1]):{})};Cj.constructor=Bx,Bx.prototype=Cj,Dx({global:!0,forced:!0},{Request:Bx})}}var Rp,Pj=us,hU=ju,Nj=BQ,pU=ri,Mj=ph,tu=Qi,xj=SA.f,Vk=FA,Ez=HA,Lj=Bs,Fx=rz,y1=function(n){var o=pj(n),s=nU(this),c=arguments.length,h=c>1?arguments[1]:void 0,g=void 0!==h;g&&(h=jQ(h,c>2?arguments[2]:void 0));var f,A,_,E,S,I,R=cz(o),M=0;if(!R||this==HQ&&fj(R))for(f=sz(o),A=s?new this(f):HQ(f);f>M;M++)I=g?h(o[M],M):o[M],QQ(A,M,I);else for(S=(E=az(o,R)).next,A=s?new this:[];!(_=oz(S,E)).done;M++)I=g?kk(E,h,[_.value,M],!0):_.value,QQ(A,M,I);return A.length=M,A},Bf=vV,hH=YB.codeAt,lv=Rc,Bj=mp,Ux={URLSearchParams:dU,getState:Ag},pH=pf.set,Vx=pf.getterFor("URL"),mU=Ux.URLSearchParams,bz=Ux.getState,jk=pU.URL,gU=pU.TypeError,jx=pU.parseInt,fH=Math.floor,Qx=Math.pow,Wh=tu("".charAt),Kd=tu(/./.exec),Qk=tu([].join),mH=tu(1..toString),gH=tu([].pop),E1=tu([].push),Fj=tu("".replace),_H=tu([].shift),vH=tu("".split),b1=tu("".slice),Hx=tu("".toLowerCase),Uj=tu([].unshift),_U="Invalid scheme",tS="Invalid host",vU="Invalid port",AH=/[a-z]/i,Sz=/[\d+-.a-z]/i,AU=/\d/,yH=/^0x/i,EH=/^[0-7]+$/,Vj=/^\d+$/,yU=/^[\da-f]+$/i,Cz=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Iz=/[\0\t\n\r #/:<>?@[\\\]^|]/,wz=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Tz=/[\t\n\r]/g,Hk=function(n){var o,s,c,h;if("number"==typeof n){for(o=[],s=0;s<4;s++)Uj(o,n%256),n=fH(n/256);return Qk(o,".")}if("object"==typeof n){for(o="",c=function(g){for(var f=null,A=1,_=null,E=0,S=0;S<8;S++)0!==g[S]?(E>A&&(f=_,A=E),_=null,E=0):(null===_&&(_=S),++E);return E>A&&(f=_,A=E),f}(n),s=0;s<8;s++)h&&0===n[s]||(h&&(h=!1),c===s?(o+=s?":":"::",h=!0):(o+=mH(n[s],16),s<7&&(o+=":")));return"["+o+"]"}return n},S1={},jj=Fx({},S1,{" ":1,'"':1,"<":1,">":1,"`":1}),Qj=Fx({},jj,{"#":1,"?":1,"{":1,"}":1}),EU=Fx({},Qj,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),zd=function(n,o){var s=hH(n,0);return s>32&&s<127&&!Lj(o,n)?n:encodeURIComponent(n)},Gk={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Wk=function(n,o){var s;return 2==n.length&&Kd(AH,Wh(n,0))&&(":"==(s=Wh(n,1))||!o&&"|"==s)},Hj=function(n){var o;return n.length>1&&Wk(b1(n,0,2))&&(2==n.length||"/"===(o=Wh(n,2))||"\\"===o||"?"===o||"#"===o)},bH=function(n){return"."===n||"%2e"===Hx(n)},Gj={},Wj={},bU={},Kj={},zj={},SU={},Yj={},qj={},Gx={},Wx={},CU={},IU={},wU={},TU={},Jj={},RU={},C1={},yg={},$j={},nS={},dv={},OU=function(n,o,s){var c,h,g,f=lv(n);if(o){if(h=this.parse(f))throw gU(h);this.searchParams=null}else{if(void 0!==s&&(c=new OU(s,!0)),h=this.parse(f,null,c))throw gU(h);(g=bz(new mU)).bindURL(this),this.searchParams=g}};OU.prototype={type:"URL",parse:function(n,o,s){var c,h,g,f,A,_=this,E=o||Gj,S=0,I="",R=!1,M=!1,Q=!1;for(n=lv(n),o||(_.scheme="",_.username="",_.password="",_.host=null,_.port=null,_.path=[],_.query=null,_.fragment=null,_.cannotBeABaseURL=!1,n=Fj(n,wz,"")),n=Fj(n,Tz,""),c=y1(n);S<=c.length;){switch(h=c[S],E){case Gj:if(!h||!Kd(AH,h)){if(o)return _U;E=bU;continue}I+=Hx(h),E=Wj;break;case Wj:if(h&&(Kd(Sz,h)||"+"==h||"-"==h||"."==h))I+=Hx(h);else{if(":"!=h){if(o)return _U;I="",E=bU,S=0;continue}if(o&&(_.isSpecial()!=Lj(Gk,I)||"file"==I&&(_.includesCredentials()||null!==_.port)||"file"==_.scheme&&!_.host))return;if(_.scheme=I,o)return void(_.isSpecial()&&Gk[_.scheme]==_.port&&(_.port=null));I="","file"==_.scheme?E=TU:_.isSpecial()&&s&&s.scheme==_.scheme?E=Kj:_.isSpecial()?E=qj:"/"==c[S+1]?(E=zj,S++):(_.cannotBeABaseURL=!0,E1(_.path,""),E=$j)}break;case bU:if(!s||s.cannotBeABaseURL&&"#"!=h)return _U;if(s.cannotBeABaseURL&&"#"==h){_.scheme=s.scheme,_.path=Bf(s.path),_.query=s.query,_.fragment="",_.cannotBeABaseURL=!0,E=dv;break}E="file"==s.scheme?TU:SU;continue;case Kj:if("/"!=h||"/"!=c[S+1]){E=SU;continue}E=Gx,S++;break;case zj:if("/"==h){E=Wx;break}E=yg;continue;case SU:if(_.scheme=s.scheme,h==Rp)_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=Bf(s.path),_.query=s.query;else if("/"==h||"\\"==h&&_.isSpecial())E=Yj;else if("?"==h)_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=Bf(s.path),_.query="",E=nS;else{if("#"!=h){_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=Bf(s.path),_.path.length--,E=yg;continue}_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,_.path=Bf(s.path),_.query=s.query,_.fragment="",E=dv}break;case Yj:if(!_.isSpecial()||"/"!=h&&"\\"!=h){if("/"!=h){_.username=s.username,_.password=s.password,_.host=s.host,_.port=s.port,E=yg;continue}E=Wx}else E=Gx;break;case qj:if(E=Gx,"/"!=h||"/"!=Wh(I,S+1))continue;S++;break;case Gx:if("/"!=h&&"\\"!=h){E=Wx;continue}break;case Wx:if("@"==h){R&&(I="%40"+I),R=!0,g=y1(I);for(var H=0;H<g.length;H++){var Z=g[H];if(":"!=Z||Q){var le=zd(Z,EU);Q?_.password+=le:_.username+=le}else Q=!0}I=""}else if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(R&&""==I)return"Invalid authority";S-=y1(I).length+1,I="",E=CU}else I+=h;break;case CU:case IU:if(o&&"file"==_.scheme){E=RU;continue}if(":"!=h||M){if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()){if(_.isSpecial()&&""==I)return tS;if(o&&""==I&&(_.includesCredentials()||null!==_.port))return;if(f=_.parseHost(I))return f;if(I="",E=C1,o)return;continue}"["==h?M=!0:"]"==h&&(M=!1),I+=h}else{if(""==I)return tS;if(f=_.parseHost(I))return f;if(I="",E=wU,o==IU)return}break;case wU:if(!Kd(AU,h)){if(h==Rp||"/"==h||"?"==h||"#"==h||"\\"==h&&_.isSpecial()||o){if(""!=I){var ge=jx(I,10);if(ge>65535)return vU;_.port=_.isSpecial()&&ge===Gk[_.scheme]?null:ge,I=""}if(o)return;E=C1;continue}return vU}I+=h;break;case TU:if(_.scheme="file","/"==h||"\\"==h)E=Jj;else{if(!s||"file"!=s.scheme){E=yg;continue}if(h==Rp)_.host=s.host,_.path=Bf(s.path),_.query=s.query;else if("?"==h)_.host=s.host,_.path=Bf(s.path),_.query="",E=nS;else{if("#"!=h){Hj(Qk(Bf(c,S),""))||(_.host=s.host,_.path=Bf(s.path),_.shortenPath()),E=yg;continue}_.host=s.host,_.path=Bf(s.path),_.query=s.query,_.fragment="",E=dv}}break;case Jj:if("/"==h||"\\"==h){E=RU;break}s&&"file"==s.scheme&&!Hj(Qk(Bf(c,S),""))&&(Wk(s.path[0],!0)?E1(_.path,s.path[0]):_.host=s.host),E=yg;continue;case RU:if(h==Rp||"/"==h||"\\"==h||"?"==h||"#"==h){if(!o&&Wk(I))E=yg;else if(""==I){if(_.host="",o)return;E=C1}else{if(f=_.parseHost(I))return f;if("localhost"==_.host&&(_.host=""),o)return;I="",E=C1}continue}I+=h;break;case C1:if(_.isSpecial()){if(E=yg,"/"!=h&&"\\"!=h)continue}else if(o||"?"!=h)if(o||"#"!=h){if(h!=Rp&&(E=yg,"/"!=h))continue}else _.fragment="",E=dv;else _.query="",E=nS;break;case yg:if(h==Rp||"/"==h||"\\"==h&&_.isSpecial()||!o&&("?"==h||"#"==h)){if(".."===(A=Hx(A=I))||"%2e."===A||".%2e"===A||"%2e%2e"===A?(_.shortenPath(),"/"==h||"\\"==h&&_.isSpecial()||E1(_.path,"")):bH(I)?"/"==h||"\\"==h&&_.isSpecial()||E1(_.path,""):("file"==_.scheme&&!_.path.length&&Wk(I)&&(_.host&&(_.host=""),I=Wh(I,0)+":"),E1(_.path,I)),I="","file"==_.scheme&&(h==Rp||"?"==h||"#"==h))for(;_.path.length>1&&""===_.path[0];)_H(_.path);"?"==h?(_.query="",E=nS):"#"==h&&(_.fragment="",E=dv)}else I+=zd(h,Qj);break;case $j:"?"==h?(_.query="",E=nS):"#"==h?(_.fragment="",E=dv):h!=Rp&&(_.path[0]+=zd(h,S1));break;case nS:o||"#"!=h?h!=Rp&&("'"==h&&_.isSpecial()?_.query+="%27":_.query+="#"==h?"%23":zd(h,S1)):(_.fragment="",E=dv);break;case dv:h!=Rp&&(_.fragment+=zd(h,jj))}S++}},parseHost:function(n){var o,s,c;if("["==Wh(n,0)){if("]"!=Wh(n,n.length-1)||!(o=function(h){var g,f,A,_,E,S,I,R=[0,0,0,0,0,0,0,0],M=0,Q=null,H=0,Z=function(){return Wh(h,H)};if(":"==Z()){if(":"!=Wh(h,1))return;H+=2,Q=++M}for(;Z();){if(8==M)return;if(":"!=Z()){for(g=f=0;f<4&&Kd(yU,Z());)g=16*g+jx(Z(),16),H++,f++;if("."==Z()){if(0==f||(H-=f,M>6))return;for(A=0;Z();){if(_=null,A>0){if(!("."==Z()&&A<4))return;H++}if(!Kd(AU,Z()))return;for(;Kd(AU,Z());){if(E=jx(Z(),10),null===_)_=E;else{if(0==_)return;_=10*_+E}if(_>255)return;H++}R[M]=256*R[M]+_,2!=++A&&4!=A||M++}if(4!=A)return;break}if(":"==Z()){if(H++,!Z())return}else if(Z())return;R[M++]=g}else{if(null!==Q)return;H++,Q=++M}}if(null!==Q)for(S=M-Q,M=7;0!=M&&S>0;)I=R[M],R[M--]=R[Q+S-1],R[Q+--S]=I;else if(8!=M)return;return R}(b1(n,1,-1))))return tS;this.host=o}else if(this.isSpecial()){if(n=function(n){var o,s,c=[],h=_j(lz(dz(n),Nk,"."),".");for(o=0;o<h.length;o++)uv(c,uz(rU,s=h[o])?"xn--"+zQ(s):s);return WQ(c,".")}(n),Kd(Cz,n)||null===(o=function(h){var g,f,A,_,E,S,I,R=vH(h,".");if(R.length&&""==R[R.length-1]&&R.length--,(g=R.length)>4)return h;for(f=[],A=0;A<g;A++){if(""==(_=R[A]))return h;if(E=10,_.length>1&&"0"==Wh(_,0)&&(E=Kd(yH,_)?16:8,_=b1(_,8==E?1:2)),""===_)S=0;else{if(!Kd(10==E?Vj:8==E?EH:yU,_))return h;S=jx(_,E)}E1(f,S)}for(A=0;A<g;A++)if(S=f[A],A==g-1){if(S>=Qx(256,5-g))return null}else if(S>255)return null;for(I=gH(f),A=0;A<f.length;A++)I+=f[A]*Qx(256,3-A);return I}(n)))return tS;this.host=o}else{if(Kd(Iz,n))return tS;for(o="",s=y1(n),c=0;c<s.length;c++)o+=zd(s[c],S1);this.host=o}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return Lj(Gk,this.scheme)},shortenPath:function(){var n=this.path,o=n.length;!o||"file"==this.scheme&&1==o&&Wk(n[0],!0)||n.length--},serialize:function(){var n=this,o=n.scheme,s=n.username,c=n.password,h=n.host,g=n.port,f=n.path,A=n.query,_=n.fragment,E=o+":";return null!==h?(E+="//",n.includesCredentials()&&(E+=s+(c?":"+c:"")+"@"),E+=Hk(h),null!==g&&(E+=":"+g)):"file"==o&&(E+="//"),E+=n.cannotBeABaseURL?f[0]:f.length?"/"+Qk(f,"/"):"",null!==A&&(E+="?"+A),null!==_&&(E+="#"+_),E},setHref:function(n){var o=this.parse(n);if(o)throw gU(o);this.searchParams.update()},getOrigin:function(){var n=this.scheme,o=this.port;if("blob"==n)try{return new I1(n.path[0]).origin}catch{return"null"}return"file"!=n&&this.isSpecial()?n+"://"+Hk(this.host)+(null!==o?":"+o:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(n){this.parse(lv(n)+":",Gj)},getUsername:function(){return this.username},setUsername:function(n){var o=y1(lv(n));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var s=0;s<o.length;s++)this.username+=zd(o[s],EU)}},getPassword:function(){return this.password},setPassword:function(n){var o=y1(lv(n));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var s=0;s<o.length;s++)this.password+=zd(o[s],EU)}},getHost:function(){var n=this.host,o=this.port;return null===n?"":null===o?Hk(n):Hk(n)+":"+o},setHost:function(n){this.cannotBeABaseURL||this.parse(n,CU)},getHostname:function(){var n=this.host;return null===n?"":Hk(n)},setHostname:function(n){this.cannotBeABaseURL||this.parse(n,IU)},getPort:function(){var n=this.port;return null===n?"":lv(n)},setPort:function(n){this.cannotHaveUsernamePasswordPort()||(""==(n=lv(n))?this.port=null:this.parse(n,wU))},getPathname:function(){var n=this.path;return this.cannotBeABaseURL?n[0]:n.length?"/"+Qk(n,"/"):""},setPathname:function(n){this.cannotBeABaseURL||(this.path=[],this.parse(n,C1))},getSearch:function(){var n=this.query;return n?"?"+n:""},setSearch:function(n){""==(n=lv(n))?this.query=null:("?"==Wh(n,0)&&(n=b1(n,1)),this.query="",this.parse(n,nS)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var n=this.fragment;return n?"#"+n:""},setHash:function(n){""!=(n=lv(n))?("#"==Wh(n,0)&&(n=b1(n,1)),this.fragment="",this.parse(n,dv)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var I1=function(n){var o=Ez(this,Kx),c=pH(o,new OU(n,!1,arguments.length>1?arguments[1]:void 0));hU||(o.href=c.serialize(),o.origin=c.getOrigin(),o.protocol=c.getProtocol(),o.username=c.getUsername(),o.password=c.getPassword(),o.host=c.getHost(),o.hostname=c.getHostname(),o.port=c.getPort(),o.pathname=c.getPathname(),o.search=c.getSearch(),o.searchParams=c.getSearchParams(),o.hash=c.getHash())},Kx=I1.prototype,Op=function(n,o){return{get:function(){return Vx(this)[n]()},set:o&&function(s){return Vx(this)[o](s)},configurable:!0,enumerable:!0}};if(hU&&xj(Kx,{href:Op("serialize","setHref"),origin:Op("getOrigin"),protocol:Op("getProtocol","setProtocol"),username:Op("getUsername","setUsername"),password:Op("getPassword","setPassword"),host:Op("getHost","setHost"),hostname:Op("getHostname","setHostname"),port:Op("getPort","setPort"),pathname:Op("getPathname","setPathname"),search:Op("getSearch","setSearch"),searchParams:Op("getSearchParams"),hash:Op("getHash","setHash")}),Vk(Kx,"toJSON",function(){return Vx(this).serialize()},{enumerable:!0}),Vk(Kx,"toString",function(){return Vx(this).serialize()},{enumerable:!0}),jk){var zx=jk.createObjectURL,SH=jk.revokeObjectURL;zx&&Vk(I1,"createObjectURL",Mj(zx,jk)),SH&&Vk(I1,"revokeObjectURL",Mj(SH,jk))}Bj(I1,"URL"),Pj({global:!0,forced:!Nj,sham:!hU},{URL:I1});var Xj=ip.URL;const Rz={[F0.ACCESS_POINT]:{[ha.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[ha.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[ha.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[ha.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[ha.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[ha.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[ha.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[F0.UNILBS]:{[ll.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ll.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ll.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ll.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ll.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ll.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ll.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ll.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ll.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ll.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ll.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ll.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[F0.STRING_UID_ALLOCATOR]:{[$w.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[$w.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[$w.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Kk(n){const o=Rz[Math.floor(n/1e4)];if(!o)return{desc:"unkonw error",retry:!1};const s=o[n%1e4];if(!s){if(Math.floor(n/1e4)===F0.ACCESS_POINT){const c=n%1e4;if("1"===c.toString()[0])return{desc:n.toString(),retry:!1};if("2"===c.toString()[0])return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return s}const Zj={[Ar.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ar.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ar.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ar.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ar.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ar.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ar.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ar.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ar.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ar.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ar.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ar.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ar.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ar.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ar.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ar.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ar.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ar.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ar.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ar.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ar.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ar.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ar.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ar.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ar.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ar.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ar.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ar.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ar.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ar.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ar.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ar.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ar.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ar.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ar.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ar.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ar.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ar.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ar.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ar.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ar.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ar.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ar.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ar.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ar.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ar.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ar.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ar.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ar.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ar.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ar.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ar.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ar.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ar.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ar.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ar.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ar.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ar.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}};function DU(n){return Zj[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}var CH={exports:{}};(function(n,o){n.exports=function(){var s={d:function(yt,Ie){for(var it in Ie)s.o(Ie,it)&&!s.o(yt,it)&&Object.defineProperty(yt,it,{enumerable:!0,get:Ie[it]})},o:function(yt,Ie){return Object.prototype.hasOwnProperty.call(yt,Ie)},r:function(yt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(yt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(yt,"__esModule",{value:!0})}},c={};s.r(c),s.d(c,{DataViewIndexOutOfBoundsError:function(){return Ft},DecodeError:function(){return Ne},Decoder:function(){return Er},EXT_TIMESTAMP:function(){return nt},Encoder:function(){return bt},ExtData:function(){return ge},ExtensionCodec:function(){return wt},decode:function(){return Gi},decodeArrayStream:function(){return Hf},decodeAsync:function(){return zh},decodeMulti:function(){return nu},decodeMultiStream:function(){return Hs},decodeStream:function(){return AW},decodeTimestampExtension:function(){return dn},decodeTimestampToTimeSpec:function(){return In},encode:function(){return Je},encodeDateToTimeSpec:function(){return Vt},encodeTimeSpecToTimestamp:function(){return Nt},encodeTimestampExtension:function(){return Dt}});var h=4294967295;function g(yt,Ie,it){var Lt=Math.floor(it/4294967296),Et=it;yt.setUint32(Ie,Lt),yt.setUint32(Ie+4,Et)}function f(yt,Ie){return 4294967296*yt.getInt32(Ie)+yt.getUint32(Ie+4)}var A=function(yt,Ie){var it="function"==typeof Symbol&&yt[Symbol.iterator];if(!it)return yt;var Lt,Et,gn=it.call(yt),ln=[];try{for(;(void 0===Ie||Ie-- >0)&&!(Lt=gn.next()).done;)ln.push(Lt.value)}catch(qn){Et={error:qn}}finally{try{Lt&&!Lt.done&&(it=gn.return)&&it.call(gn)}finally{if(Et)throw Et.error}}return ln},_=function(yt,Ie){for(var it=0,Lt=Ie.length,Et=yt.length;it<Lt;it++,Et++)yt[Et]=Ie[it];return yt},E=typeof TextEncoder<"u"&&typeof TextDecoder<"u";function S(yt){for(var Ie=yt.length,it=0,Lt=0;Lt<Ie;){var Et=yt.charCodeAt(Lt++);if(0!=(4294967168&Et))if(0==(4294965248&Et))it+=2;else{if(Et>=55296&&Et<=56319&&Lt<Ie){var gn=yt.charCodeAt(Lt);56320==(64512&gn)&&(++Lt,Et=((1023&Et)<<10)+(1023&gn)+65536)}it+=0==(4294901760&Et)?3:4}else it++}return it}var I=E?new TextEncoder:void 0,R=E?typeof process<"u"?200:0:h,M=I?.encodeInto?function(yt,Ie,it){I.encodeInto(yt,Ie.subarray(it))}:function(yt,Ie,it){Ie.set(I.encode(yt),it)};function Q(yt,Ie,it){for(var Lt=Ie,Et=Lt+it,gn=[],ln="";Lt<Et;){var qn=yt[Lt++];if(0==(128&qn))gn.push(qn);else if(192==(224&qn)){var Or=63&yt[Lt++];gn.push((31&qn)<<6|Or)}else if(224==(240&qn)){Or=63&yt[Lt++];var jr=63&yt[Lt++];gn.push((31&qn)<<12|Or<<6|jr)}else if(240==(248&qn)){var On=(7&qn)<<18|(Or=63&yt[Lt++])<<12|(jr=63&yt[Lt++])<<6|63&yt[Lt++];On>65535&&(gn.push((On-=65536)>>>10&1023|55296),On=56320|1023&On),gn.push(On)}else gn.push(qn);gn.length>=4096&&(ln+=String.fromCharCode.apply(String,_([],A(gn))),gn.length=0)}return gn.length>0&&(ln+=String.fromCharCode.apply(String,_([],A(gn)))),ln}var H,Z=E?new TextDecoder:null,le=E?typeof process<"u"?200:0:h,ge=function(yt,Ie){this.type=yt,this.data=Ie},Se=(H=function(yt,Ie){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,Lt){it.__proto__=Lt}||function(it,Lt){for(var Et in Lt)Object.prototype.hasOwnProperty.call(Lt,Et)&&(it[Et]=Lt[Et])})(yt,Ie)},function(yt,Ie){if("function"!=typeof Ie&&null!==Ie)throw new TypeError("Class extends value "+String(Ie)+" is not a constructor or null");function it(){this.constructor=yt}H(yt,Ie),yt.prototype=null===Ie?Object.create(Ie):(it.prototype=Ie.prototype,new it)}),Ne=function(yt){function Ie(it){var Lt=yt.call(this,it)||this,Et=Object.create(Ie.prototype);return Object.setPrototypeOf(Lt,Et),Object.defineProperty(Lt,"name",{configurable:!0,enumerable:!1,value:Ie.name}),Lt}return Se(Ie,yt),Ie}(Error),nt=-1;function Nt(yt){var Ie,it=yt.sec,Lt=yt.nsec;if(it>=0&&Lt>=0&&it<=17179869183){if(0===Lt&&it<=4294967295){var Et=new Uint8Array(4);return(Ie=new DataView(Et.buffer)).setUint32(0,it),Et}var gn=it/4294967296,ln=4294967295&it;return Et=new Uint8Array(8),(Ie=new DataView(Et.buffer)).setUint32(0,Lt<<2|3&gn),Ie.setUint32(4,ln),Et}return Et=new Uint8Array(12),(Ie=new DataView(Et.buffer)).setUint32(0,Lt),g(Ie,4,it),Et}function Vt(yt){var Ie=yt.getTime(),it=Math.floor(Ie/1e3),Lt=1e6*(Ie-1e3*it),Et=Math.floor(Lt/1e9);return{sec:it+Et,nsec:Lt-1e9*Et}}function Dt(yt){return yt instanceof Date?Nt(Vt(yt)):null}function In(yt){var Ie=new DataView(yt.buffer,yt.byteOffset,yt.byteLength);switch(yt.byteLength){case 4:return{sec:Ie.getUint32(0),nsec:0};case 8:var it=Ie.getUint32(0);return{sec:4294967296*(3&it)+Ie.getUint32(4),nsec:it>>>2};case 12:return{sec:f(Ie,4),nsec:Ie.getUint32(0)};default:throw new Ne("Unrecognized data size for timestamp (expected 4, 8, or 12): "+yt.length)}}function dn(yt){var Ie=In(yt);return new Date(1e3*Ie.sec+Ie.nsec/1e6)}var hn={type:nt,encode:Dt,decode:dn},wt=function(){function yt(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(hn)}return yt.prototype.register=function(Ie){var it=Ie.type,Lt=Ie.encode,Et=Ie.decode;if(it>=0)this.encoders[it]=Lt,this.decoders[it]=Et;else{var gn=1+it;this.builtInEncoders[gn]=Lt,this.builtInDecoders[gn]=Et}},yt.prototype.tryToEncode=function(Ie,it){for(var Lt=0;Lt<this.builtInEncoders.length;Lt++)if(null!=(Et=this.builtInEncoders[Lt])&&null!=(gn=Et(Ie,it)))return new ge(-1-Lt,gn);for(Lt=0;Lt<this.encoders.length;Lt++){var Et,gn;if(null!=(Et=this.encoders[Lt])&&null!=(gn=Et(Ie,it)))return new ge(Lt,gn)}return Ie instanceof ge?Ie:null},yt.prototype.decode=function(Ie,it,Lt){var Et=it<0?this.builtInDecoders[-1-it]:this.decoders[it];return Et?Et(Ie,it,Lt):new ge(it,Ie)},yt.defaultCodec=new yt,yt}();function We(yt){return yt instanceof Uint8Array?yt:ArrayBuffer.isView(yt)?new Uint8Array(yt.buffer,yt.byteOffset,yt.byteLength):yt instanceof ArrayBuffer?new Uint8Array(yt):Uint8Array.from(yt)}var ct=function(yt){var Ie="function"==typeof Symbol&&Symbol.iterator,it=Ie&&yt[Ie],Lt=0;if(it)return it.call(yt);if(yt&&"number"==typeof yt.length)return{next:function(){return yt&&Lt>=yt.length&&(yt=void 0),{value:yt&&yt[Lt++],done:!yt}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")},bt=function(){function yt(Ie,it,Lt,Et,gn,ln,qn,Or){void 0===Ie&&(Ie=wt.defaultCodec),void 0===it&&(it=void 0),void 0===Lt&&(Lt=100),void 0===Et&&(Et=2048),void 0===gn&&(gn=!1),void 0===ln&&(ln=!1),void 0===qn&&(qn=!1),void 0===Or&&(Or=!1),this.extensionCodec=Ie,this.context=it,this.maxDepth=Lt,this.initialBufferSize=Et,this.sortKeys=gn,this.forceFloat32=ln,this.ignoreUndefined=qn,this.forceIntegerToFloat=Or,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return yt.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},yt.prototype.reinitializeState=function(){this.pos=0},yt.prototype.encode=function(Ie){return this.reinitializeState(),this.doEncode(Ie,1),this.getUint8Array()},yt.prototype.doEncode=function(Ie,it){if(it>this.maxDepth)throw new Error("Too deep objects in depth "+it);null==Ie?this.encodeNil():"boolean"==typeof Ie?this.encodeBoolean(Ie):"number"==typeof Ie?this.encodeNumber(Ie):"string"==typeof Ie?this.encodeString(Ie):this.encodeObject(Ie,it)},yt.prototype.ensureBufferSizeToWrite=function(Ie){var it=this.pos+Ie;this.view.byteLength<it&&this.resizeBuffer(2*it)},yt.prototype.resizeBuffer=function(Ie){var it=new ArrayBuffer(Ie),Lt=new Uint8Array(it),Et=new DataView(it);Lt.set(this.bytes),this.view=Et,this.bytes=Lt},yt.prototype.encodeNil=function(){this.writeU8(192)},yt.prototype.encodeBoolean=function(Ie){this.writeU8(!1===Ie?194:195)},yt.prototype.encodeNumber=function(Ie){Number.isSafeInteger(Ie)&&!this.forceIntegerToFloat?Ie>=0?Ie<128?this.writeU8(Ie):Ie<256?(this.writeU8(204),this.writeU8(Ie)):Ie<65536?(this.writeU8(205),this.writeU16(Ie)):Ie<4294967296?(this.writeU8(206),this.writeU32(Ie)):(this.writeU8(207),this.writeU64(Ie)):Ie>=-32?this.writeU8(224|Ie+32):Ie>=-128?(this.writeU8(208),this.writeI8(Ie)):Ie>=-32768?(this.writeU8(209),this.writeI16(Ie)):Ie>=-2147483648?(this.writeU8(210),this.writeI32(Ie)):(this.writeU8(211),this.writeI64(Ie)):this.forceFloat32?(this.writeU8(202),this.writeF32(Ie)):(this.writeU8(203),this.writeF64(Ie))},yt.prototype.writeStringHeader=function(Ie){if(Ie<32)this.writeU8(160+Ie);else if(Ie<256)this.writeU8(217),this.writeU8(Ie);else if(Ie<65536)this.writeU8(218),this.writeU16(Ie);else{if(!(Ie<4294967296))throw new Error("Too long string: "+Ie+" bytes in UTF-8");this.writeU8(219),this.writeU32(Ie)}},yt.prototype.encodeString=function(Ie){if(Ie.length>R){var it=S(Ie);this.ensureBufferSizeToWrite(5+it),this.writeStringHeader(it),M(Ie,this.bytes,this.pos),this.pos+=it}else it=S(Ie),this.ensureBufferSizeToWrite(5+it),this.writeStringHeader(it),function(Lt,Et,gn){for(var ln=Lt.length,qn=gn,Or=0;Or<ln;){var jr=Lt.charCodeAt(Or++);if(0!=(4294967168&jr)){if(0==(4294965248&jr))Et[qn++]=jr>>6&31|192;else{if(jr>=55296&&jr<=56319&&Or<ln){var On=Lt.charCodeAt(Or);56320==(64512&On)&&(++Or,jr=((1023&jr)<<10)+(1023&On)+65536)}0==(4294901760&jr)?(Et[qn++]=jr>>12&15|224,Et[qn++]=jr>>6&63|128):(Et[qn++]=jr>>18&7|240,Et[qn++]=jr>>12&63|128,Et[qn++]=jr>>6&63|128)}Et[qn++]=63&jr|128}else Et[qn++]=jr}}(Ie,this.bytes,this.pos),this.pos+=it},yt.prototype.encodeObject=function(Ie,it){var Lt=this.extensionCodec.tryToEncode(Ie,this.context);if(null!=Lt)this.encodeExtension(Lt);else if(Array.isArray(Ie))this.encodeArray(Ie,it);else if(ArrayBuffer.isView(Ie))this.encodeBinary(Ie);else{if("object"!=typeof Ie)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(Ie));this.encodeMap(Ie,it)}},yt.prototype.encodeBinary=function(Ie){var it=Ie.byteLength;if(it<256)this.writeU8(196),this.writeU8(it);else if(it<65536)this.writeU8(197),this.writeU16(it);else{if(!(it<4294967296))throw new Error("Too large binary: "+it);this.writeU8(198),this.writeU32(it)}var Lt=We(Ie);this.writeU8a(Lt)},yt.prototype.encodeArray=function(Ie,it){var Lt,Et,gn=Ie.length;if(gn<16)this.writeU8(144+gn);else if(gn<65536)this.writeU8(220),this.writeU16(gn);else{if(!(gn<4294967296))throw new Error("Too large array: "+gn);this.writeU8(221),this.writeU32(gn)}try{for(var ln=ct(Ie),qn=ln.next();!qn.done;qn=ln.next())this.doEncode(qn.value,it+1)}catch(jr){Lt={error:jr}}finally{try{qn&&!qn.done&&(Et=ln.return)&&Et.call(ln)}finally{if(Lt)throw Lt.error}}},yt.prototype.countWithoutUndefined=function(Ie,it){var Lt,Et,gn=0;try{for(var ln=ct(it),qn=ln.next();!qn.done;qn=ln.next())void 0!==Ie[qn.value]&&gn++}catch(Or){Lt={error:Or}}finally{try{qn&&!qn.done&&(Et=ln.return)&&Et.call(ln)}finally{if(Lt)throw Lt.error}}return gn},yt.prototype.encodeMap=function(Ie,it){var Lt,Et,gn=Object.keys(Ie);this.sortKeys&&gn.sort();var ln=this.ignoreUndefined?this.countWithoutUndefined(Ie,gn):gn.length;if(ln<16)this.writeU8(128+ln);else if(ln<65536)this.writeU8(222),this.writeU16(ln);else{if(!(ln<4294967296))throw new Error("Too large map object: "+ln);this.writeU8(223),this.writeU32(ln)}try{for(var qn=ct(gn),Or=qn.next();!Or.done;Or=qn.next()){var jr=Or.value,On=Ie[jr];this.ignoreUndefined&&void 0===On||(this.encodeString(jr),this.doEncode(On,it+1))}}catch(tr){Lt={error:tr}}finally{try{Or&&!Or.done&&(Et=qn.return)&&Et.call(qn)}finally{if(Lt)throw Lt.error}}},yt.prototype.encodeExtension=function(Ie){var it=Ie.data.length;if(1===it)this.writeU8(212);else if(2===it)this.writeU8(213);else if(4===it)this.writeU8(214);else if(8===it)this.writeU8(215);else if(16===it)this.writeU8(216);else if(it<256)this.writeU8(199),this.writeU8(it);else if(it<65536)this.writeU8(200),this.writeU16(it);else{if(!(it<4294967296))throw new Error("Too large extension object: "+it);this.writeU8(201),this.writeU32(it)}this.writeI8(Ie.type),this.writeU8a(Ie.data)},yt.prototype.writeU8=function(Ie){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,Ie),this.pos++},yt.prototype.writeU8a=function(Ie){var it=Ie.length;this.ensureBufferSizeToWrite(it),this.bytes.set(Ie,this.pos),this.pos+=it},yt.prototype.writeI8=function(Ie){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,Ie),this.pos++},yt.prototype.writeU16=function(Ie){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,Ie),this.pos+=2},yt.prototype.writeI16=function(Ie){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,Ie),this.pos+=2},yt.prototype.writeU32=function(Ie){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,Ie),this.pos+=4},yt.prototype.writeI32=function(Ie){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,Ie),this.pos+=4},yt.prototype.writeF32=function(Ie){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,Ie),this.pos+=4},yt.prototype.writeF64=function(Ie){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,Ie),this.pos+=8},yt.prototype.writeU64=function(Ie){var it,Lt,Et,ln;this.ensureBufferSizeToWrite(8),ln=Et=Ie,(it=this.view).setUint32(Lt=this.pos,Et/4294967296),it.setUint32(Lt+4,ln),this.pos+=8},yt.prototype.writeI64=function(Ie){this.ensureBufferSizeToWrite(8),g(this.view,this.pos,Ie),this.pos+=8},yt}(),bn={};function Je(yt,Ie){return void 0===Ie&&(Ie=bn),new bt(Ie.extensionCodec,Ie.context,Ie.maxDepth,Ie.initialBufferSize,Ie.sortKeys,Ie.forceFloat32,Ie.ignoreUndefined,Ie.forceIntegerToFloat).encode(yt)}function dt(yt){return(yt<0?"-":"")+"0x"+Math.abs(yt).toString(16).padStart(2,"0")}var xt=function(){function yt(Ie,it){void 0===Ie&&(Ie=16),void 0===it&&(it=16),this.maxKeyLength=Ie,this.maxLengthPerKey=it,this.hit=0,this.miss=0,this.caches=[];for(var Lt=0;Lt<this.maxKeyLength;Lt++)this.caches.push([])}return yt.prototype.canBeCached=function(Ie){return Ie>0&&Ie<=this.maxKeyLength},yt.prototype.find=function(Ie,it,Lt){var Et,gn,ln=this.caches[Lt-1];try{e:for(var qn=function(br){var Ci="function"==typeof Symbol&&Symbol.iterator,Es=Ci&&br[Ci],Du=0;if(Es)return Es.call(br);if(br&&"number"==typeof br.length)return{next:function(){return br&&Du>=br.length&&(br=void 0),{value:br&&br[Du++],done:!br}}};throw new TypeError(Ci?"Object is not iterable.":"Symbol.iterator is not defined.")}(ln),Or=qn.next();!Or.done;Or=qn.next()){for(var jr=Or.value,On=jr.bytes,tr=0;tr<Lt;tr++)if(On[tr]!==Ie[it+tr])continue e;return jr.str}}catch(br){Et={error:br}}finally{try{Or&&!Or.done&&(gn=qn.return)&&gn.call(qn)}finally{if(Et)throw Et.error}}return null},yt.prototype.store=function(Ie,it){var Lt=this.caches[Ie.length-1],Et={bytes:Ie,str:it};Lt.length>=this.maxLengthPerKey?Lt[Math.random()*Lt.length|0]=Et:Lt.push(Et)},yt.prototype.decode=function(Ie,it,Lt){var Et=this.find(Ie,it,Lt);if(null!=Et)return this.hit++,Et;this.miss++;var gn=Q(Ie,it,Lt),ln=Uint8Array.prototype.slice.call(Ie,it,it+Lt);return this.store(ln,gn),gn},yt}(),pn=function(yt,Ie){var it,Lt,Et,gn,ln={label:0,sent:function(){if(1&Et[0])throw Et[1];return Et[1]},trys:[],ops:[]};return gn={next:qn(0),throw:qn(1),return:qn(2)},"function"==typeof Symbol&&(gn[Symbol.iterator]=function(){return this}),gn;function qn(Or){return function(jr){return function(On){if(it)throw new TypeError("Generator is already executing.");for(;ln;)try{if(it=1,Lt&&(Et=2&On[0]?Lt.return:On[0]?Lt.throw||((Et=Lt.return)&&Et.call(Lt),0):Lt.next)&&!(Et=Et.call(Lt,On[1])).done)return Et;switch(Lt=0,Et&&(On=[2&On[0],Et.value]),On[0]){case 0:case 1:Et=On;break;case 4:return ln.label++,{value:On[1],done:!1};case 5:ln.label++,Lt=On[1],On=[0];continue;case 7:On=ln.ops.pop(),ln.trys.pop();continue;default:if(!((Et=(Et=ln.trys).length>0&&Et[Et.length-1])||6!==On[0]&&2!==On[0])){ln=0;continue}if(3===On[0]&&(!Et||On[1]>Et[0]&&On[1]<Et[3])){ln.label=On[1];break}if(6===On[0]&&ln.label<Et[1]){ln.label=Et[1],Et=On;break}if(Et&&ln.label<Et[2]){ln.label=Et[2],ln.ops.push(On);break}Et[2]&&ln.ops.pop(),ln.trys.pop();continue}On=Ie.call(yt,ln)}catch(tr){On=[6,tr],Lt=0}finally{it=Et=0}if(5&On[0])throw On[1];return{value:On[0]?On[1]:void 0,done:!0}}([Or,jr])}}},Dn=function(yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,it=yt[Symbol.asyncIterator];return it?it.call(yt):(yt="function"==typeof __values?__values(yt):yt[Symbol.iterator](),Ie={},Lt("next"),Lt("throw"),Lt("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function Lt(Et){Ie[Et]=yt[Et]&&function(gn){return new Promise(function(ln,qn){var Or,jr,On;Or=ln,jr=qn,On=(gn=yt[Et](gn)).done,Promise.resolve(gn.value).then(function(br){Or({value:br,done:On})},jr)})}}},Wt=function(yt){return this instanceof Wt?(this.v=yt,this):new Wt(yt)},j=function(yt,Ie,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt,Et=it.apply(yt,Ie||[]),gn=[];return Lt={},ln("next"),ln("throw"),ln("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt;function ln(tr){Et[tr]&&(Lt[tr]=function(br){return new Promise(function(Ci,Es){gn.push([tr,br,Ci,Es])>1||qn(tr,br)})})}function qn(tr,br){try{(Ci=Et[tr](br)).value instanceof Wt?Promise.resolve(Ci.value.v).then(Or,jr):On(gn[0][2],Ci)}catch(Es){On(gn[0][3],Es)}var Ci}function Or(tr){qn("next",tr)}function jr(tr){qn("throw",tr)}function On(tr,br){tr(br),gn.shift(),gn.length&&qn(gn[0][0],gn[0][1])}},Ae=new DataView(new ArrayBuffer(0)),xe=new Uint8Array(Ae.buffer),Ft=function(){try{Ae.getInt8(0)}catch(yt){return yt.constructor}throw new Error("never reached")}(),Tn=new Ft("Insufficient data"),Sr=new xt,Er=function(){function yt(Ie,it,Lt,Et,gn,ln,qn,Or){void 0===Ie&&(Ie=wt.defaultCodec),void 0===it&&(it=void 0),void 0===Lt&&(Lt=h),void 0===Et&&(Et=h),void 0===gn&&(gn=h),void 0===ln&&(ln=h),void 0===qn&&(qn=h),void 0===Or&&(Or=Sr),this.extensionCodec=Ie,this.context=it,this.maxStrLength=Lt,this.maxBinLength=Et,this.maxArrayLength=gn,this.maxMapLength=ln,this.maxExtLength=qn,this.keyDecoder=Or,this.totalPos=0,this.pos=0,this.view=Ae,this.bytes=xe,this.headByte=-1,this.stack=[]}return yt.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},yt.prototype.setBuffer=function(Ie){this.bytes=We(Ie),this.view=function(it){if(it instanceof ArrayBuffer)return new DataView(it);var Lt=We(it);return new DataView(Lt.buffer,Lt.byteOffset,Lt.byteLength)}(this.bytes),this.pos=0},yt.prototype.appendBuffer=function(Ie){if(-1!==this.headByte||this.hasRemaining(1)){var it=this.bytes.subarray(this.pos),Lt=We(Ie),Et=new Uint8Array(it.length+Lt.length);Et.set(it),Et.set(Lt,it.length),this.setBuffer(Et)}else this.setBuffer(Ie)},yt.prototype.hasRemaining=function(Ie){return this.view.byteLength-this.pos>=Ie},yt.prototype.createExtraByteError=function(Ie){var it=this.view;return new RangeError("Extra "+(it.byteLength-this.pos)+" of "+it.byteLength+" byte(s) found at buffer["+Ie+"]")},yt.prototype.decode=function(Ie){this.reinitializeState(),this.setBuffer(Ie);var it=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return it},yt.prototype.decodeMulti=function(Ie){return pn(this,function(it){switch(it.label){case 0:this.reinitializeState(),this.setBuffer(Ie),it.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return it.sent(),[3,1];case 3:return[2]}})},yt.prototype.decodeAsync=function(Ie){var it,Lt,Et,gn,ln,Or,jr;return ln=this,void 0,jr=function(){var On,tr,br,Ci,Es,Du,Nn,er;return pn(this,function(Br){switch(Br.label){case 0:On=!1,Br.label=1;case 1:Br.trys.push([1,6,7,12]),it=Dn(Ie),Br.label=2;case 2:return[4,it.next()];case 3:if((Lt=Br.sent()).done)return[3,5];if(br=Lt.value,On)throw this.createExtraByteError(this.totalPos);this.appendBuffer(br);try{tr=this.doDecodeSync(),On=!0}catch(Wi){if(!(Wi instanceof Ft))throw Wi}this.totalPos+=this.pos,Br.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Ci=Br.sent(),Et={error:Ci},[3,12];case 7:return Br.trys.push([7,,10,11]),Lt&&!Lt.done&&(gn=it.return)?[4,gn.call(it)]:[3,9];case 8:Br.sent(),Br.label=9;case 9:return[3,11];case 10:if(Et)throw Et.error;return[7];case 11:return[7];case 12:if(On){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,tr]}throw Du=(Es=this).headByte,Nn=Es.pos,er=Es.totalPos,new RangeError("Insufficient data in parsing "+dt(Du)+" at "+er+" ("+Nn+" in the current buffer)")}})},new((Or=void 0)||(Or=Promise))(function(On,tr){function br(Du){try{Es(jr.next(Du))}catch(Nn){tr(Nn)}}function Ci(Du){try{Es(jr.throw(Du))}catch(Nn){tr(Nn)}}function Es(Du){var Nn;Du.done?On(Du.value):(Nn=Du.value,Nn instanceof Or?Nn:new Or(function(er){er(Nn)})).then(br,Ci)}Es((jr=jr.apply(ln,[])).next())})},yt.prototype.decodeArrayStream=function(Ie){return this.decodeMultiAsync(Ie,!0)},yt.prototype.decodeStream=function(Ie){return this.decodeMultiAsync(Ie,!1)},yt.prototype.decodeMultiAsync=function(Ie,it){return j(this,arguments,function(){var Lt,Et,gn,ln,qn,Or,jr,On,tr;return pn(this,function(br){switch(br.label){case 0:Lt=it,Et=-1,br.label=1;case 1:br.trys.push([1,13,14,19]),gn=Dn(Ie),br.label=2;case 2:return[4,Wt(gn.next())];case 3:if((ln=br.sent()).done)return[3,12];if(qn=ln.value,it&&0===Et)throw this.createExtraByteError(this.totalPos);this.appendBuffer(qn),Lt&&(Et=this.readArraySize(),Lt=!1,this.complete()),br.label=4;case 4:br.trys.push([4,9,,10]),br.label=5;case 5:return[4,Wt(this.doDecodeSync())];case 6:return[4,br.sent()];case 7:return br.sent(),0==--Et?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((Or=br.sent())instanceof Ft))throw Or;return[3,10];case 10:this.totalPos+=this.pos,br.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return jr=br.sent(),On={error:jr},[3,19];case 14:return br.trys.push([14,,17,18]),ln&&!ln.done&&(tr=gn.return)?[4,Wt(tr.call(gn))]:[3,16];case 15:br.sent(),br.label=16;case 16:return[3,18];case 17:if(On)throw On.error;return[7];case 18:return[7];case 19:return[2]}})})},yt.prototype.doDecodeSync=function(){e:for(;;){var Ie=this.readHeadByte(),it=void 0;if(Ie>=224)it=Ie-256;else if(Ie<192)if(Ie<128)it=Ie;else if(Ie<144){if(0!=(Et=Ie-128)){this.pushMapState(Et),this.complete();continue e}it={}}else if(Ie<160){if(0!=(Et=Ie-144)){this.pushArrayState(Et),this.complete();continue e}it=[]}else{var Lt=Ie-160;it=this.decodeUtf8String(Lt,0)}else if(192===Ie)it=null;else if(194===Ie)it=!1;else if(195===Ie)it=!0;else if(202===Ie)it=this.readF32();else if(203===Ie)it=this.readF64();else if(204===Ie)it=this.readU8();else if(205===Ie)it=this.readU16();else if(206===Ie)it=this.readU32();else if(207===Ie)it=this.readU64();else if(208===Ie)it=this.readI8();else if(209===Ie)it=this.readI16();else if(210===Ie)it=this.readI32();else if(211===Ie)it=this.readI64();else if(217===Ie)Lt=this.lookU8(),it=this.decodeUtf8String(Lt,1);else if(218===Ie)Lt=this.lookU16(),it=this.decodeUtf8String(Lt,2);else if(219===Ie)Lt=this.lookU32(),it=this.decodeUtf8String(Lt,4);else if(220===Ie){if(0!==(Et=this.readU16())){this.pushArrayState(Et),this.complete();continue e}it=[]}else if(221===Ie){if(0!==(Et=this.readU32())){this.pushArrayState(Et),this.complete();continue e}it=[]}else if(222===Ie){if(0!==(Et=this.readU16())){this.pushMapState(Et),this.complete();continue e}it={}}else if(223===Ie){if(0!==(Et=this.readU32())){this.pushMapState(Et),this.complete();continue e}it={}}else if(196===Ie){var Et=this.lookU8();it=this.decodeBinary(Et,1)}else if(197===Ie)Et=this.lookU16(),it=this.decodeBinary(Et,2);else if(198===Ie)Et=this.lookU32(),it=this.decodeBinary(Et,4);else if(212===Ie)it=this.decodeExtension(1,0);else if(213===Ie)it=this.decodeExtension(2,0);else if(214===Ie)it=this.decodeExtension(4,0);else if(215===Ie)it=this.decodeExtension(8,0);else if(216===Ie)it=this.decodeExtension(16,0);else if(199===Ie)Et=this.lookU8(),it=this.decodeExtension(Et,1);else if(200===Ie)Et=this.lookU16(),it=this.decodeExtension(Et,2);else{if(201!==Ie)throw new Ne("Unrecognized type byte: "+dt(Ie));Et=this.lookU32(),it=this.decodeExtension(Et,4)}this.complete();for(var gn=this.stack;gn.length>0;){var ln=gn[gn.length-1];if(0===ln.type){if(ln.array[ln.position]=it,ln.position++,ln.position!==ln.size)continue e;gn.pop(),it=ln.array}else{if(1===ln.type){if("string"!=(qn=typeof it)&&"number"!==qn)throw new Ne("The type of key must be string or number but "+typeof it);if("__proto__"===it)throw new Ne("The key __proto__ is not allowed");ln.key=it,ln.type=2;continue e}if(ln.map[ln.key]=it,ln.readCount++,ln.readCount!==ln.size){ln.key=null,ln.type=1;continue e}gn.pop(),it=ln.map}}return it}var qn},yt.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},yt.prototype.complete=function(){this.headByte=-1},yt.prototype.readArraySize=function(){var Ie=this.readHeadByte();switch(Ie){case 220:return this.readU16();case 221:return this.readU32();default:if(Ie<160)return Ie-144;throw new Ne("Unrecognized array type byte: "+dt(Ie))}},yt.prototype.pushMapState=function(Ie){if(Ie>this.maxMapLength)throw new Ne("Max length exceeded: map length ("+Ie+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:Ie,key:null,readCount:0,map:{}})},yt.prototype.pushArrayState=function(Ie){if(Ie>this.maxArrayLength)throw new Ne("Max length exceeded: array length ("+Ie+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:Ie,array:new Array(Ie),position:0})},yt.prototype.decodeUtf8String=function(Ie,it){var Lt;if(Ie>this.maxStrLength)throw new Ne("Max length exceeded: UTF-8 byte length ("+Ie+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+it+Ie)throw Tn;var Et,qn,jr,gn=this.pos+it;return Et=this.stateIsMapKey()&&(null===(Lt=this.keyDecoder)||void 0===Lt?void 0:Lt.canBeCached(Ie))?this.keyDecoder.decode(this.bytes,gn,Ie):Ie>le?(jr=this.bytes.subarray(qn=gn,qn+Ie),Z.decode(jr)):Q(this.bytes,gn,Ie),this.pos+=it+Ie,Et},yt.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},yt.prototype.decodeBinary=function(Ie,it){if(Ie>this.maxBinLength)throw new Ne("Max length exceeded: bin length ("+Ie+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(Ie+it))throw Tn;var Lt=this.pos+it,Et=this.bytes.subarray(Lt,Lt+Ie);return this.pos+=it+Ie,Et},yt.prototype.decodeExtension=function(Ie,it){if(Ie>this.maxExtLength)throw new Ne("Max length exceeded: ext length ("+Ie+") > maxExtLength ("+this.maxExtLength+")");var Lt=this.view.getInt8(this.pos+it),Et=this.decodeBinary(Ie,it+1);return this.extensionCodec.decode(Et,Lt,this.context)},yt.prototype.lookU8=function(){return this.view.getUint8(this.pos)},yt.prototype.lookU16=function(){return this.view.getUint16(this.pos)},yt.prototype.lookU32=function(){return this.view.getUint32(this.pos)},yt.prototype.readU8=function(){var Ie=this.view.getUint8(this.pos);return this.pos++,Ie},yt.prototype.readI8=function(){var Ie=this.view.getInt8(this.pos);return this.pos++,Ie},yt.prototype.readU16=function(){var Ie=this.view.getUint16(this.pos);return this.pos+=2,Ie},yt.prototype.readI16=function(){var Ie=this.view.getInt16(this.pos);return this.pos+=2,Ie},yt.prototype.readU32=function(){var Ie=this.view.getUint32(this.pos);return this.pos+=4,Ie},yt.prototype.readI32=function(){var Ie=this.view.getInt32(this.pos);return this.pos+=4,Ie},yt.prototype.readU64=function(){var Ie,it,Lt=4294967296*(Ie=this.view).getUint32(it=this.pos)+Ie.getUint32(it+4);return this.pos+=8,Lt},yt.prototype.readI64=function(){var Ie=f(this.view,this.pos);return this.pos+=8,Ie},yt.prototype.readF32=function(){var Ie=this.view.getFloat32(this.pos);return this.pos+=4,Ie},yt.prototype.readF64=function(){var Ie=this.view.getFloat64(this.pos);return this.pos+=8,Ie},yt}(),Nr={};function Gi(yt,Ie){return void 0===Ie&&(Ie=Nr),new Er(Ie.extensionCodec,Ie.context,Ie.maxStrLength,Ie.maxBinLength,Ie.maxArrayLength,Ie.maxMapLength,Ie.maxExtLength).decode(yt)}function nu(yt,Ie){return void 0===Ie&&(Ie=Nr),new Er(Ie.extensionCodec,Ie.context,Ie.maxStrLength,Ie.maxBinLength,Ie.maxArrayLength,Ie.maxMapLength,Ie.maxExtLength).decodeMulti(yt)}var za=function(yt,Ie){var it,Lt,Et,gn,ln={label:0,sent:function(){if(1&Et[0])throw Et[1];return Et[1]},trys:[],ops:[]};return gn={next:qn(0),throw:qn(1),return:qn(2)},"function"==typeof Symbol&&(gn[Symbol.iterator]=function(){return this}),gn;function qn(Or){return function(jr){return function(On){if(it)throw new TypeError("Generator is already executing.");for(;ln;)try{if(it=1,Lt&&(Et=2&On[0]?Lt.return:On[0]?Lt.throw||((Et=Lt.return)&&Et.call(Lt),0):Lt.next)&&!(Et=Et.call(Lt,On[1])).done)return Et;switch(Lt=0,Et&&(On=[2&On[0],Et.value]),On[0]){case 0:case 1:Et=On;break;case 4:return ln.label++,{value:On[1],done:!1};case 5:ln.label++,Lt=On[1],On=[0];continue;case 7:On=ln.ops.pop(),ln.trys.pop();continue;default:if(!((Et=(Et=ln.trys).length>0&&Et[Et.length-1])||6!==On[0]&&2!==On[0])){ln=0;continue}if(3===On[0]&&(!Et||On[1]>Et[0]&&On[1]<Et[3])){ln.label=On[1];break}if(6===On[0]&&ln.label<Et[1]){ln.label=Et[1],Et=On;break}if(Et&&ln.label<Et[2]){ln.label=Et[2],ln.ops.push(On);break}Et[2]&&ln.ops.pop(),ln.trys.pop();continue}On=Ie.call(yt,ln)}catch(tr){On=[6,tr],Lt=0}finally{it=Et=0}if(5&On[0])throw On[1];return{value:On[0]?On[1]:void 0,done:!0}}([Or,jr])}}},So=function(yt){return this instanceof So?(this.v=yt,this):new So(yt)},Xi=function(yt,Ie,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt,Et=it.apply(yt,Ie||[]),gn=[];return Lt={},ln("next"),ln("throw"),ln("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt;function ln(tr){Et[tr]&&(Lt[tr]=function(br){return new Promise(function(Ci,Es){gn.push([tr,br,Ci,Es])>1||qn(tr,br)})})}function qn(tr,br){try{(Ci=Et[tr](br)).value instanceof So?Promise.resolve(Ci.value.v).then(Or,jr):On(gn[0][2],Ci)}catch(Es){On(gn[0][3],Es)}var Ci}function Or(tr){qn("next",tr)}function jr(tr){qn("throw",tr)}function On(tr,br){tr(br),gn.shift(),gn.length&&qn(gn[0][0],gn[0][1])}};function Aa(yt){if(null==yt)throw new Error("Assertion Failure: value must not be null nor undefined")}function Qf(yt){return null!=yt[Symbol.asyncIterator]?yt:function(Ie){return Xi(this,arguments,function(){var it,Lt,gn;return za(this,function(ln){switch(ln.label){case 0:it=Ie.getReader(),ln.label=1;case 1:ln.trys.push([1,,9,10]),ln.label=2;case 2:return[4,So(it.read())];case 3:return Lt=ln.sent(),gn=Lt.value,Lt.done?[4,So(void 0)]:[3,5];case 4:return[2,ln.sent()];case 5:return Aa(gn),[4,So(gn)];case 6:return[4,ln.sent()];case 7:return ln.sent(),[3,2];case 8:return[3,10];case 9:return it.releaseLock(),[7];case 10:return[2]}})})}(yt)}function zh(yt,Ie){return void 0===Ie&&(Ie=Nr),it=this,void 0,gn=function(){var ln;return function(qn,Or){var jr,On,tr,br,Ci={label:0,sent:function(){if(1&tr[0])throw tr[1];return tr[1]},trys:[],ops:[]};return br={next:Es(0),throw:Es(1),return:Es(2)},"function"==typeof Symbol&&(br[Symbol.iterator]=function(){return this}),br;function Es(Du){return function(Nn){return function(er){if(jr)throw new TypeError("Generator is already executing.");for(;Ci;)try{if(jr=1,On&&(tr=2&er[0]?On.return:er[0]?On.throw||((tr=On.return)&&tr.call(On),0):On.next)&&!(tr=tr.call(On,er[1])).done)return tr;switch(On=0,tr&&(er=[2&er[0],tr.value]),er[0]){case 0:case 1:tr=er;break;case 4:return Ci.label++,{value:er[1],done:!1};case 5:Ci.label++,On=er[1],er=[0];continue;case 7:er=Ci.ops.pop(),Ci.trys.pop();continue;default:if(!((tr=(tr=Ci.trys).length>0&&tr[tr.length-1])||6!==er[0]&&2!==er[0])){Ci=0;continue}if(3===er[0]&&(!tr||er[1]>tr[0]&&er[1]<tr[3])){Ci.label=er[1];break}if(6===er[0]&&Ci.label<tr[1]){Ci.label=tr[1],tr=er;break}if(tr&&Ci.label<tr[2]){Ci.label=tr[2],Ci.ops.push(er);break}tr[2]&&Ci.ops.pop(),Ci.trys.pop();continue}er=Or.call(qn,Ci)}catch(Br){er=[6,Br],On=0}finally{jr=tr=0}if(5&er[0])throw er[1];return{value:er[0]?er[1]:void 0,done:!0}}([Du,Nn])}}}(this,function(qn){return ln=Qf(yt),[2,new Er(Ie.extensionCodec,Ie.context,Ie.maxStrLength,Ie.maxBinLength,Ie.maxArrayLength,Ie.maxMapLength,Ie.maxExtLength).decodeAsync(ln)]})},new((Et=void 0)||(Et=Promise))(function(ln,qn){function Or(tr){try{On(gn.next(tr))}catch(br){qn(br)}}function jr(tr){try{On(gn.throw(tr))}catch(br){qn(br)}}function On(tr){var br;tr.done?ln(tr.value):(br=tr.value,br instanceof Et?br:new Et(function(Ci){Ci(br)})).then(Or,jr)}On((gn=gn.apply(it,[])).next())});var it,Et,gn}function Hf(yt,Ie){void 0===Ie&&(Ie=Nr);var it=Qf(yt);return new Er(Ie.extensionCodec,Ie.context,Ie.maxStrLength,Ie.maxBinLength,Ie.maxArrayLength,Ie.maxMapLength,Ie.maxExtLength).decodeArrayStream(it)}function Hs(yt,Ie){void 0===Ie&&(Ie=Nr);var it=Qf(yt);return new Er(Ie.extensionCodec,Ie.context,Ie.maxStrLength,Ie.maxBinLength,Ie.maxArrayLength,Ie.maxMapLength,Ie.maxExtLength).decodeStream(it)}function AW(yt,Ie){return void 0===Ie&&(Ie=Nr),Hs(yt,Ie)}return c}()})(CH),(0,Nf.exports)("Int8",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Int16",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Int32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Uint16",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Uint32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Float32",function(n){return function(o,s,c){return n(this,o,s,c)}}),(0,Nf.exports)("Float64",function(n){return function(o,s,c){return n(this,o,s,c)}});const e8=()=>function(n){const o=window.atob("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==").split("").map(s=>s.charCodeAt(0));return new Uint8Array(o,0,o.length/Uint8Array.BYTES_PER_ELEMENT)}();let kU,Eg;function Yx(){return Yx=F(function*(){if(kU)return kU;const n={};let o,s={};for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o]);let c=!1,h=!1;c="object"==typeof window,h="function"==typeof importScripts,"object"==typeof process&&"object"==typeof process.versions&&process;let g="";(c||h)&&(h?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):""),n.print||console.log.bind(console);const f=n.printErr||console.warn.bind(console);for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o]);let A;s=null,"object"!=typeof WebAssembly&&nt("no native wasm support detected");let _=!1;function E(Je){const dt=n["_"+Je];return dt||nt("Assertion failed: Cannot call unknown function "+Je+", make sure it is exported"),dt}function S(Je,dt,xt,pn,Dn){const Wt={string:function(Tn){let Sr=0;if(null!=Tn&&0!==Tn){const Er=1+(Tn.length<<2);Sr=bt(Er),function(za,So,Xi,Aa){if(!(Aa>0))return 0;const zh=Xi+Aa-1;for(let Hf=0;Hf<za.length;++Hf){let Hs=za.charCodeAt(Hf);if(Hs>=55296&&Hs<=57343&&(Hs=65536+((1023&Hs)<<10)|1023&za.charCodeAt(++Hf)),Hs<=127){if(Xi>=zh)break;So[Xi++]=Hs}else if(Hs<=2047){if(Xi+1>=zh)break;So[Xi++]=192|Hs>>6,So[Xi++]=128|63&Hs}else if(Hs<=65535){if(Xi+2>=zh)break;So[Xi++]=224|Hs>>12,So[Xi++]=128|Hs>>6&63,So[Xi++]=128|63&Hs}else{if(Xi+3>=zh)break;So[Xi++]=240|Hs>>18,So[Xi++]=128|Hs>>12&63,So[Xi++]=128|Hs>>6&63,So[Xi++]=128|63&Hs}}So[Xi]=0}(Tn,M,Sr,Er)}return Sr},array:function(Tn){const Sr=bt(Tn.length);return R.set(Tn,Sr),Sr}},j=E(Je),Ae=[];let xe=0;if(pn)for(let Tn=0;Tn<pn.length;Tn++){const Sr=Wt[xt[Tn]];Sr?(0===xe&&(xe=We()),Ae[Tn]=Sr(pn[Tn])):Ae[Tn]=pn[Tn]}let Ft=j.apply(null,Ae);return Tn=Ft,Ft="string"===dt?(Sr=Tn)?function(Nr,Gi,nu){const za=Gi+undefined;let So=Gi,Xi="";for(;Nr[So]&&!(So>=za);)++So;if(So-Gi>16&&Nr.subarray&&I)return I.decode(Nr.subarray(Gi,So));for(;Gi<So;){let Aa=Nr[Gi++];if(!(128&Aa)){Xi+=String.fromCharCode(Aa);continue}const Qf=63&Nr[Gi++];if(192==(224&Aa)){Xi+=String.fromCharCode((31&Aa)<<6|Qf);continue}const zh=63&Nr[Gi++];if(Aa=224==(240&Aa)?(15&Aa)<<12|Qf<<6|zh:(7&Aa)<<18|Qf<<12|zh<<6|63&Nr[Gi++],Aa<65536)Xi+=String.fromCharCode(Aa);else{const Hf=Aa-65536;Xi+=String.fromCharCode(55296|Hf>>10,56320|1023&Hf)}}return Xi}(M,Sr):"":"boolean"===dt?Boolean(Tn):Tn,0!==xe&&ct(xe),Ft;var Tn,Sr}const I=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;let R,M,Q;typeof TextDecoder<"u"&&new TextDecoder("utf-16le");const H=[],Z=[],le=[],ge=[];Z.push({func:function(){dn()}});let Se=0,Ne=null;function nt(Je){throw n.onAbort&&n.onAbort(Je),f(Je+=""),_=!0,Je="abort("+Je+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(Je)}n.preloadedImages={},n.preloadedAudios={};let Nt="deflate.wasm";var Je;function Dt(Je){for(;Je.length>0;){const dt=Je.shift();if("function"==typeof dt){dt(n);continue}const xt=dt.func;"number"==typeof xt?void 0===dt.arg?Q.get(xt)():Q.get(xt)(dt.arg):xt(void 0===dt.arg?null:dt.arg)}}Nt.startsWith("data:application/octet-stream;base64,")||(Je=Nt,Nt=n.locateFile?n.locateFile(Je,g):g+Je);const In={emscripten_memcpy_big:function(Je,dt,xt){M.copyWithin(Je,dt,dt+xt)},emscripten_resize_heap:function(Je){nt("OOM")}};yield F(function*(){const Je={env:In,wasi_snapshot_preview1:In};function dt(Dn,Wt){var Ae;n.asm=Dn.exports,A=n.asm.memory,Ae=A.buffer,n.HEAP8=R=new Int8Array(Ae),n.HEAP16=new Int16Array(Ae),n.HEAP32=new Int32Array(Ae),n.HEAPU8=M=new Uint8Array(Ae),n.HEAPU16=new Uint16Array(Ae),n.HEAPU32=new Uint32Array(Ae),n.HEAPF32=new Float32Array(Ae),n.HEAPF64=new Float64Array(Ae),Q=n.asm.__indirect_function_table,function(xe){if(Se--,n.monitorRunDependencies&&n.monitorRunDependencies(Se),0==Se&&Ne){const Ft=Ne;Ne=null,Ft()}}()}if(Se++,n.monitorRunDependencies&&n.monitorRunDependencies(Se),n.instantiateWasm)try{return n.instantiateWasm(Je,dt)}catch(Dn){return f("Module.instantiateWasm callback failed with error: "+Dn),!1}return yield function pn(Dn){return new Qn((Wt,j)=>{Wt(e8().buffer)}).then(function(Wt){return WebAssembly.instantiate(Wt,Je)}).then(Dn,function(Wt){f("failed to asynchronously prepare wasm: "+Wt),nt(Wt)})}(function xt(Dn){dt(Dn.instance)}),{}})();let dn=n.___wasm_call_ctors=function(){return(dn=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},hn=n._malloc=function(){return(hn=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n.___errno_location=function(){return(n.___errno_location=n.asm.__errno_location).apply(null,arguments)},n._zlibCompress=function(){return(n._zlibCompress=n.asm.zlibCompress).apply(null,arguments)};let wt,We=n.stackSave=function(){return(We=n.stackSave=n.asm.stackSave).apply(null,arguments)},ct=n.stackRestore=function(){return(ct=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},bt=n.stackAlloc=function(){return(bt=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};function bn(Je){function dt(){wt||(wt=!0,n.calledRun=!0,_||(Dt(Z),Dt(le),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)xt=n.postRun.shift(),ge.unshift(xt);var xt;Dt(ge)}()))}Se>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)xt=n.preRun.shift(),H.unshift(xt);var xt;Dt(H)}(),Se>0||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),dt()},1)):dt()))}if(n.ccall=S,n.cwrap=function(Je,dt,xt,pn){const Dn=(xt=xt||[]).every(function(Wt){return"number"===Wt});return"string"!==dt&&Dn&&!pn?E(Je):function(){return S(Je,dt,xt,arguments)}},n.allocate=function(Je,dt){let xt;return xt=1==dt?bt(Je.length):hn(Je.length),M.set(Je.subarray||Je.slice?Je:new Uint8Array(Je),xt),xt},Ne=function Je(){wt||bn(),wt||(Ne=Je)},n.run=bn,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return bn(),kU=n,n}),Yx.apply(this,arguments)}const zk=Uint8Array.BYTES_PER_ELEMENT,t8={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},n8={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},wH={_message:"m",_type:"t",_id:"id"},PU={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let r8;class Oz{constructor(){J(this,"zlibCompress",void 0)}init(){var o=this;return F(function*(){r8||(r8=(yield F(function*(){return Eg||(Eg=yield function IH(){return Yx.apply(this,arguments)}()),{zlibCompress:c=>{const h=new Uint8Array(c),g=zk*h.byteLength,f=Eg._malloc(g),A=Eg._malloc(3*g);for(let S=0;S<g;S++)Eg.HEAP8[f/zk+S]=h[S];const _=Eg._zlibCompress(f,g,A),E=new Uint8Array(Eg.HEAP8.slice(A,A+_));return Eg._free(f),Eg._free(A),E}}})()).zlibCompress),o.zlibCompress=r8})()}msgPackCompress(o){return CH.exports.encode(o)}compress(o){const s=Date.now(),c=this.compressKeyAndValue(JSON.parse(JSON.stringify(o))),h=this.msgPackCompress(c),g=this.zlibCompress(h),f=new Uint8Array([49,49,49,50,...Array.from(g)]);return{origin:Object.assign({},o),originLength:JSON.stringify(o).length,shortKeyAndValue:c,msgpackSer:h,compressed:f,compressedLength:f.length,time:Date.now()-s}}compressKeyAndValue(o){return this._ObjectKeyCompress(this._typeCompress(o))}_typeCompress(o){const s=o._type;return s?(o._type=PU[s]||s,o):o}_ObjectKeyCompress(o){const s=o._message;if(s){const c=s.stats;c&&(s.stats=this._statsCompress(c)),o._message=this._messageCompress(s)}return this._reportCompress(o)}_statsCompress(o){return this._keyCompress(o,t8)}_messageCompress(o){return this._keyCompress(o,n8)}_reportCompress(o){return this._keyCompress(o,wH)}_keyCompress(o,s){const c={},h=Object.keys(o);return e_(h).call(h,(g,f)=>{const A=o[f];return s[f]?c[s[f]]=A:c[f]=A,c},c),c}}class Dz extends st{get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}constructor(o){super(),J(this,"lowPriorityQueue",[]),J(this,"highPriorityQueue",[]),J(this,"AgoraWebSocketManager",void 0),this.AgoraWebSocketManager=o}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(o){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.highPriorityQueue.push(o):this.lowPriorityQueue.push(o),this.sendMessage()}sendMessage(){const o=this.queue.length;let s=0;s=o<5?15*o:60+3*(o-4),setTimeout(()=>{this._sendMessage()},s)}_sendMessage(){if(!this.queue.length)return;const o=this.AgoraWebSocketManager.getConnection();if(!o||1!==o.readyState)return;const s=this.queue.shift();return this.lowPriorityQueue.includes(s)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),o.send(s.compressed),s}}var qx;function i8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}let rS=Qs("AgoraWebSocketManager","connectionID")(qx=class extends st{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){["tryNext","recover"].includes(n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,"reconnecting"===this._state?this.emit(Pr.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(Pr.CONNECTED):"closed"===this._state?this.emit(Pr.CLOSED):"failed"===this._state&&this.emit(Pr.FAILED))}resetReconnectCount(n){se.debug("websocket reset reconnect count, reason: "+n),zt("debug",this,"resetReconnectCount",n,"websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,o){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),J(this,"connectionID",0),J(this,"currentURLIndex",0),J(this,"urls",void 0),J(this,"_reconnectMode","tryNext"),J(this,"reconnectReason",void 0),J(this,"_initMutex",new Ru("websocket")),J(this,"name",void 0),J(this,"_state","closed"),J(this,"reconnectInterrupter",void 0),J(this,"websocket",void 0),J(this,"retryConfig",void 0),J(this,"reconnectCount",0),J(this,"forceCloseTimeout",5e3),J(this,"onlineReconnectListener",void 0),J(this,"compressor",new Oz),J(this,"compressorInitStatus","initializing"),J(this,"compress",void 0),J(this,"messageSender",void 0),J(this,"useCompress",void 0),J(this,"tryDoubleDomain",!1),J(this,"wsInflateLength",0),J(this,"wsDeflateLength",0),J(this,"closeEstablishingWs",()=>{}),J(this,"store",void 0),J(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(S){for(var I=1;I<arguments.length;I++){var R=null!=arguments[I]?arguments[I]:{};I%2?i8(Object(R),!0).forEach(function(M){J(S,M,R[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(R)):i8(Object(R)).forEach(function(M){Object.defineProperty(S,M,Object.getOwnPropertyDescriptor(R,M))})}return S}({},o),this.useCompress=s,this.tryDoubleDomain=c;const{timeout:g,timeoutFactor:f}=o,A=Math.max(300,Math.floor(3*g/5)),_=Math.max(1.2,Math.floor(8*f)/10);dl.ONLINE&&(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=_),_a.on(Zw.NETWORK_STATE_CHANGE,(S,I)=>{S!==I&&(this.resetReconnectCount("network state change: ".concat(I," -> ").concat(S)),S===dl.ONLINE?(this.retryConfig.timeout=A,this.retryConfig.timeoutFactor=_):(this.retryConfig.timeout=g,this.retryConfig.timeoutFactor=f))});const E=Date.now();this.compressor.init().then(()=>{this.compressorInitStatus="initialized";const S=Date.now()-E;se.debug("websocket compressor initialized successfully in ".concat(S,"ms")),zt("debug",this.compressor,"init",void 0,"websocket compressor initialized successfully in ".concat(S,"ms")),Jt.wsCompressorInit({status:!0,ec:null,eventElapse:S}),this.compress=this.compressor.compress.bind(this.compressor)}).catch(S=>{this.compressorInitStatus="failed";const I=S?S.message||S.toString():"Empty Error";se.debug("websocket compressor failed to initialize because of ".concat(I)),zt("debug",this.compressor,"init",void 0,"websocket compressor failed to initialize because of ".concat(I)),Jt.wsCompressorInit({status:!1,ec:I,eventElapse:1})})}getConnection(){return this.websocket||void 0}init(n){this.forceCloseTimeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const s=(c,h)=>{this.urls=n;const g=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Dz(this),this.createWebSocketConnection(g).then(c).catch(h),this.once(Pr.CLOSED,()=>h(new ye(pe.WS_DISCONNECT))),this.once(Pr.CONNECTED,()=>c())};return this._initMutex.lock().then(c=>new Qn((h,g)=>{s(h,g)}).then(()=>{c()}).catch(()=>{c()}))}close(n,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;o?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,o){if(!this.websocket)return se.warning("[".concat(this.name,"] can not reconnect, no websocket")),void zt("warning",this,"reconnect","can not reconnect, no websocket");var s;void 0!==n&&(this.reconnectMode=n),se.debug("[".concat(this.name,"] reconnect is triggered initiative")),zt("debug",this,"reconnect"),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(s=this.store)||void 0===s||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const c=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),c&&c.bind(this.websocket)({code:9999,reason:o})}sendMessageWithJSON(n){const o=JSON.stringify(n);return{compressed:o,compressedLength:o.length,origin:n}}sendMessageWithUint8Array(n){return{compressed:n,compressedLength:n.byteLength,origin:n}}sendMessage(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new ye(pe.WS_ABORT,"websocket is not ready");try{let c=null;if(s)c=this.sendMessageWithUint8Array(n);else if("initialized"===this.compressorInitStatus&&this.useCompress&&Qt("WEBSOCKET_COMPRESS"))try{c=this.compress(n),this.setWsInflateData(c)}catch{c=this.sendMessageWithJSON(n)}else c=this.sendMessageWithJSON(n);o?this.websocket.send(c.compressed):this.messageSender.pushMessage(c)}catch(c){throw new ye(pe.WS_ERR,"send websocket message error"+c.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}createWebSocketConnection(n,o){var s=this;return F(function*(){return s.connectionID+=1,s.joinChannelServiceRecordIndex=void 0,new Qn((c,h)=>{var g;const f=()=>{se.debug("[".concat(s.name,"] websocket opened:"),n),js("debug",["WebSocket",s.connectionID],"open",n),s.reconnectMode="retry",s.state="connected",s.resetReconnectCount("opened"),c()},A=function(){var S=F(function*(I){if(se.debug("[".concat(s.name,"] websocket close ").concat(s.websocket&&s.websocket.url,", code: ").concat(I.code,", reason: ").concat(I.reason,", current mode: ").concat(s.reconnectMode)),js("debug",["WebSocket",s.connectionID],"close",{code:I.code,reason:I.reason,url:s.websocket&&s.websocket.url,reconnectMode:s.reconnectMode}),s.reconnectCount<s.retryConfig.maxRetryCount){"connected"===s.state&&(s.reconnectReason=I.reason,s.state="reconnecting");const R=Ly(s,Pr.WILL_RECONNECT,s.reconnectMode)||s.reconnectMode,M=yield s.reconnectWithAction(R);if("closed"===s.state)return se.debug("[".concat(s.connectionID,"] ws is closed, no need to reconnect")),void En("debug",s,"ws is closed, no need to reconnect");if(!M)return h(new ye(pe.WS_DISCONNECT,"websocket reconnect failed: ".concat(I.code))),void s.close(!0);c()}else h(new ye(pe.WS_DISCONNECT,"websocket close: ".concat(I.code))),s.close()});return function(R){return S.apply(this,arguments)}}(),_=S=>{s.emit(Pr.ON_MESSAGE,S)};s.websocket&&(s.websocket.onclose=null,s.websocket.close()),Qt("GATEWAY_WSS_ADDRESS")&&s.name.startsWith("gateway")&&(n=Qt("GATEWAY_WSS_ADDRESS")),se.debug("[".concat(s.name,"] start connect, url: ").concat(n)),En("debug",s,"start connect, url: ".concat(n));const E=null===(g=s.store)||void 0===g?void 0:g.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});s.chooseBestWebsocketConnection(n,!!o,E).then(S=>{var I;s.websocket=S,f&&f(),S.onclose=A,S.onmessage=_,null===(I=s.store)||void 0===I||I.recordJoinChannelService({endTs:Date.now(),status:"success"},E),s.joinChannelServiceRecordIndex=E}).catch(S=>{var I;if(null===(I=s.store)||void 0===I||I.recordJoinChannelService({endTs:Date.now(),status:S instanceof ye&&S.code===pe.WS_ABORT?"aborted":"error",errors:[S]},E),"closed"!==s.state){if(S instanceof ye&&S.code===pe.WS_ERR){const R=new ye(pe.WS_ERR,"init websocket failed! Error: ".concat(S.toString()));return se.error("[".concat(s.name,"]").concat(R)),zt("error",s,"chooseBestWebsocketConnection",void 0,S.toString()),void h(R)}A&&A(S)}else h(new ye(pe.WS_DISCONNECT,"websocket is closed: ".concat(S.toString())))})})})()}reconnectWithAction(n){var o=arguments,s=this;return F(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];if(s.reconnectCount>=s.retryConfig.maxRetryCount||!s.urls||"closed"===s.state)return!1;s.onlineReconnectListener||_a.networkState!==dl.OFFLINE||(s.onlineReconnectListener=_a.onlineWaiter&&_a.onlineWaiter.then(()=>{s.onlineReconnectListener=void 0}));let h=!0;if(s.reconnectInterrupter=()=>{h=!1},c){const f=Kr(s.reconnectCount,s.retryConfig);se.debug("[".concat(s.name,"] wait ").concat(f,"ms to reconnect websocket, mode: ").concat(n)),zt("debug",s,"reconnectWithAction",{timeout:f,action:n}),yield Qn.race([Mc(f),s.onlineReconnectListener||new Qn(()=>{})])}if("closed"===s.state||!h)return!1;s.reconnectCount+=1;const g=function(){var f=F(function*(A,_){s.emit(Pr.RECONNECT_CREATE_CONNECTION,_),yield s.createWebSocketConnection(A)});return function(_,E){return f.apply(this,arguments)}}();try{if("retry"===n){const f=s.urls[s.currentURLIndex];s.emit(Pr.RECONNECT_WAITTING_FINISH,n),yield g(f,n)}else if("tryNext"===n){if(s.currentURLIndex+=1,s.currentURLIndex>=s.urls.length)return yield s.reconnectWithAction("recover",!1);se.debug("[".concat(s.name,"] websocket url length: ").concat(s.urls.length," current index: ").concat(s.currentURLIndex)),En("debug",s,"websocket url length: ".concat(s.urls.length," current index: ").concat(s.currentURLIndex));const f=s.urls[s.currentURLIndex];s.emit(Pr.RECONNECT_WAITTING_FINISH,n),yield g(f,n)}else if("recover"===n){se.debug("[".concat(s.name,"] request new urls")),En("debug",s,"request new urls"),s.resetReconnectCount("recover mode"),s.emit(Pr.RECONNECT_WAITTING_FINISH,n),s.urls=yield Hh(s,Pr.REQUEST_NEW_URLS),s.currentURLIndex=0;const f=s.urls[s.currentURLIndex];yield g(f,n)}return!0}catch(f){return se.error("[".concat(s.name,"] reconnect failed"),f.toString()),zt("error",s,"reconnectWithAction",void 0,f.toString()),yield s.reconnectWithAction(n,c)}})()}chooseBestWebsocketConnection(n,o,s){var c=this;return F(function*(){return new Qn((h,g)=>{let f=!1;const A=[];c.closeEstablishingWs=()=>{se.debug("[choose-best-ws] close establishing websockets"),A.forEach(H=>{H.onclose=null,H.onopen=null,H.onmessage=null,H.close()}),g(new ye(pe.WS_ABORT,"choose best websocket aborted"))};const _=Qt("GATEWAY_DOMAINS");let E;const S=n.indexOf("?h="),I=_.find(H=>-1!==S?n.includes(H,S):n.includes(H));se.debug("[choose-best-ws] currentDomain: ",I,", domains: ",_),zt("debug",c,"chooseBestWebsocketConnection",{currentDomain:I,domains:_});let R=!c.tryDoubleDomain||o||!I;if(!R&&I){var M;const H=Date.now();try{_.forEach(Z=>{const le=-1===S?n.replace(I,Z):n.substr(0,S)+n.substr(S).replace(I,Z),ge=new WebSocket(le);ge.binaryType="arraybuffer",A.push(ge),se.debug("[choose-best-ws] ws is connecting:",ge.url),En("debug",c,"ws is connecting: ".concat(ge.url))})}catch{for(se.debug("[choose-best-ws] ws create failed, fallback to single url"),En("debug",c,"ws create failed, fallback to single url"),A.forEach(le=>le.close());A.length;)A.pop();R=!0}null===(M=c.store)||void 0===M||M.recordJoinChannelService({urls:A.map(Z=>Z.url),service:"gateway"},s),A.forEach(Z=>{Z.onopen=()=>{if(f)return;const le=Date.now()-H;se.debug("[choose-best-ws] ws open cost ".concat(le,"ms")),A.filter(ge=>ge!==Z).forEach(ge=>{se.debug("[choose-best-ws]close backup websocket: ".concat(ge.url)),En("debug",c,"close backup websocket: ".concat(ge.url)),ge.close()}),f=!0,h(Z)},Z.onclose=le=>{E=le,!f&&(A.find(ge=>!(ge.readyState===WebSocket.CLOSED||ge.readyState===WebSocket.CLOSING))||(se.debug("[choose-best-ws] all websocket is closed"),En("debug",c,"all websocket is closed"),f=!0,g(E)))},Z.onmessage=le=>{se.debug("[choose-best-ws]".concat(Z.url," onmessage: ").concat(le.data)),En("debug",c,"".concat(Z.url," onmessage: ").concat(le.data))}}),Mc(c.forceCloseTimeout).then(()=>{A.forEach(Z=>{Z.readyState!==WebSocket.OPEN&&Z.close()})})}if(R){var Q;let H;se.debug("[choose-best-ws] use single url: ",n),En("debug",c,"use single url: ".concat(n)),null===(Q=c.store)||void 0===Q||Q.recordJoinChannelService({urls:[n],service:"gateway"},s);try{H=new WebSocket(n),A.push(H),H.binaryType="arraybuffer"}catch(Z){const le=new ye(pe.WS_ERR,"init websocket failed! Error: ".concat(Z.toString()));return se.error("[".concat(c.name,"]").concat(le)),zt("error",c,"chooseBestWebsocketConnection",void 0,Z.toString()),void g(le)}H.onopen=()=>{h(H)},H.onclose=Z=>{g(Z)},H.onmessage=Z=>{se.debug("[choose-best-ws]".concat(H.url," onmessage: ").concat(Z.data)),En("debug",c,"".concat(H.url," onmessage: ").concat(Z.data))},Mc(c.forceCloseTimeout).then(()=>{H&&H.readyState!==WebSocket.OPEN&&H.close()})}}).then(h=>(c.closeEstablishingWs=void 0,h)).catch(h=>{throw c.closeEstablishingWs=void 0,h})})()}})||qx;class o8{constructor(o){J(this,"input",[]),J(this,"size",void 0),this.size=o}add(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)}mean(){var o;return 0===this.input.length?0:e_(o=this.input).call(o,(s,c)=>s+c)/this.input.length}}var s8;let a8=Qs("AgoraRTCSignal","websocket.connectionID")(s8=class extends st{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===fa.CONNECTED?this.emit(ei.WS_CONNECTED):n===fa.RECONNECTING?this.emit(ei.WS_RECONNECTING,this._websocketReconnectReason):n===fa.CLOSED&&this.emit(ei.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(n,o){super(),J(this,"_disconnectedReason",void 0),J(this,"_websocketReconnectReason",void 0),J(this,"_connectionState",fa.CLOSED),J(this,"reconnectToken",void 0),J(this,"websocket",void 0),J(this,"openConnectionTime",void 0),J(this,"clientId",void 0),J(this,"lastMsgTime",Date.now()),J(this,"uploadCache",[]),J(this,"uploadCacheInterval",void 0),J(this,"rttRolling",new o8(5)),J(this,"pingpongTimer",void 0),J(this,"wsInflateDataTimer",void 0),J(this,"pingpongTimeoutCount",0),J(this,"joinResponse",void 0),J(this,"multiIpOption",void 0),J(this,"initError",void 0),J(this,"spec",void 0),J(this,"store",void 0),J(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(ei.ON_BINARY_DATA,s.data);const c=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(c,"_id")){const h="res-@".concat(c._id);this.emit(h,c._result,c._message)}else if(Object.prototype.hasOwnProperty.call(c,"_type")&&(this.emit(c._type,c._message),c._type===Fi.ON_NOTIFICATION&&this.handleNotification(c._message),c._type===Fi.ON_USER_BANNED))switch(c._message.error_code){case 14:this.close(pa.UID_BANNED);break;case 15:this.close(pa.IP_BANNED);break;case 16:this.close(pa.CHANNEL_BANNED)}}),this.clientId=n.clientId,this.spec=n,this.store=o,this.websocket=new rS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===fa.CONNECTED&&this.reconnect("retry",Os.OFFLINE)})}request(n,o,s,c){var h=this;return F(function*(){const g=vs(6,""),f={_id:g,_type:n,_message:o},A=h.websocket.connectionID,_=()=>new Qn((Q,H)=>{if(h.connectionState===fa.CONNECTED)return Q();const Z=()=>{h.off(ei.WS_CLOSED,le),Q()},le=()=>{h.off(ei.WS_CONNECTED,Z),H(new ye(pe.WS_ABORT))};h.once(ei.WS_CONNECTED,Z),h.once(ei.WS_CLOSED,le),n!==di.PUBLISH&&n!==di.SUBSCRIBE&&n!==di.UNSUBSCRIBE&&n!==di.UNPUBLISH&&n!==di.CONTROL||h.once(ei.DISCONNECT_P2P,()=>{H(new ye(pe.DISCONNECT_P2P))}),n===di.PUBLISH&&h.once(ei.ABORT_P2P_EXECUTION,()=>{H(new ye(pe.DISCONNECT_P2P))})});if(h.connectionState!==fa.CONNECTING&&h.connectionState!==fa.RECONNECTING||n===di.JOIN||n===di.REJOIN||(yield _()),h.websocket.sendMessage(f,!0),c)return;const E=new Qn((Q,H)=>{let Z=!1;const le=(Se,Ne)=>{Z=!0,Q({isSuccess:"success"===Se,message:Ne||{}}),h.off(ei.WS_CLOSED,ge),h.off(ei.WS_RECONNECTING,ge),h.emit(ei.REQUEST_SUCCESS,n,o)};h.once("res-@".concat(g),le);const ge=()=>{H(new ye(pe.WS_ABORT,"type: ".concat(n))),h.off(ei.WS_CLOSED,ge),h.off(ei.WS_RECONNECTING,ge),h.off("res-@".concat(g),le)};h.once(ei.WS_CLOSED,ge),h.once(ei.WS_RECONNECTING,ge),Mc(Qt("SIGNAL_REQUEST_TIMEOUT")).then(()=>{h.websocket.connectionID!==A||Z||(se.warning("ws request timeout, type: ".concat(n)),En("warning",h,"ws request timeout, type: ".concat(n)),h.emit(ei.REQUEST_TIMEOUT,n,o))})});let S=null;try{S=yield E}catch(Q){if(h.connectionState===fa.CLOSED||n===di.LEAVE)throw new ye(pe.WS_ABORT);return!h.spec.forceWaitGatewayResponse||s?Q.throw():n===di.JOIN||n===di.REJOIN?null:(yield _(),yield h.request(n,o))}if(S.isSuccess)return S.message;const I=Number(S.message.error_code||S.message.code),R=DU(I),M=new ye(pe.UNEXPECTED_RESPONSE,"".concat(R.desc,": ").concat(S.message.error_str),{code:I,data:S.message});return"success"===R.action?S.message:(se.warning("[".concat(h.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(I,", message: ").concat(R.desc,", action: ").concat(R.action)),En("warning",h,"unexpected response from type ".concat(n,", error_code: ").concat(I,", message: ").concat(R.desc,", action: ").concat(R.action)),I===Ar.ERR_TOO_MANY_BROADCASTERS?((n===di.JOIN||n===di.REJOIN)&&(h.initError=M,h.close()),M.throw()):"failed"===R.action?M.throw():"quit"===R.action?(h.initError=M,h.close(),M.throw()):(I===Ar.ERR_JOIN_BY_MULTI_IP?(h.multiIpOption=S.message.option,se.warning("[".concat(h.clientId,"] detect multi ip, recover")),En("warning",h,"detect multi ip, recover"),h.reconnect("recover",Os.MULTI_IP)):h.reconnect(R.action,Os.SERVER_ERROR),n===di.JOIN||n===di.REJOIN?null:yield h.request(n,o)))})()}waitMessage(n,o){return new Qn(s=>{const c=h=>{(!o||o(h))&&(this.off(n,c),s(h))};this.on(n,c)})}upload(n,o){const s={_type:n,_message:o};try{this.websocket.sendMessage(s)}catch{const h=Qt("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==fa.CONNECTED)return;const g=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(g._type,g._message)},Qt("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,o){this.websocket.sendMessage({_type:n,_message:o})}init(n,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Qn((s,c)=>{this.once(ei.WS_CONNECTED,()=>s(this.joinResponse)),this.once(ei.WS_CLOSED,()=>c(this.initError||new ye(pe.WS_ABORT))),this.connectionState=fa.CONNECTING,this.websocket.init(n).catch(c),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&void 0===this.openConnectionTime&&(se.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),c(new ye(pe.INIT_WEBSOCKET_TIMEOUT)))},Qt("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||pa.LEAVE,this.connectionState=fa.CLOSED,se.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),n===pa.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new rS("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}join(){var n=this;return F(function*(){if(!n.joinResponse){n.emit(ei.ABORT_P2P_EXECUTION);const o=yield Hh(n,ei.REQUEST_JOIN_INFO),s=yield n.request(di.JOIN,o);if(!s)return n.emit(ei.REPORT_JOIN_GATEWAY,pe.TIMEOUT,n.url||""),!1;n.joinResponse=s,n.emit(ei.JOIN_RESPONSE,n.joinResponse),n.reconnectToken=n.joinResponse.rejoin_token}return n.connectionState=fa.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),!0})()}rejoin(){var n=this;return F(function*(){if(!n.reconnectToken)throw new ye(pe.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const o=f1(n,ei.REQUEST_REJOIN_INFO);o.token=n.reconnectToken;const s=yield n.request(di.REJOIN,o);return!!s&&(n.connectionState=fa.CONNECTED,n.pingpongTimer&&window.clearInterval(n.pingpongTimer),n.pingpongTimer=window.setInterval(n.handlePingPong.bind(n),3e3),s.peers&&s.peers.forEach(c=>{n.emit(Fi.ON_USER_ONLINE,{uid:c.uid}),c.audio&&n.emit(Fi.ON_ADD_AUDIO_STREAM,{uid:c.uid,uint_id:c.uint_id,audio:!0,ssrcId:c.audio_ssrc}),c.video&&n.emit(Fi.ON_ADD_VIDEO_STREAM,{uid:c.uid,uint_id:c.uint_id,video:!0,ssrcId:c.video_ssrc}),n.emit(c.audio_mute?Fi.MUTE_AUDIO:Fi.UNMUTE_AUDIO,{uid:c.uid}),n.emit(c.video_mute?Fi.MUTE_VIDEO:Fi.UNMUTE_VIDEO,{uid:c.uid}),n.emit(c.audio_enable_local?Fi.ENABLE_LOCAL_AUDIO:Fi.DISABLE_LOCAL_AUDIO,{uid:c.uid}),n.emit(c.video_enable_local?Fi.ENABLE_LOCAL_VIDEO:Fi.DISABLE_LOCAL_VIDEO,{uid:c.uid}),c.audio||c.video||n.emit(Fi.ON_REMOVE_STREAM,{uid:c.uid,uint_id:c.uint_id})}),!0)})()}reconnect(n,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,o)}handleNotification(n){se.debug("[".concat(this.clientId,"] receive notification: "),n),zt("debug",this,"handleNotification",n);const o=DU(n.code);if("success"!==o.action)return"failed"===o.action?(se.error("[".concat(this.clientId,"] ignore error: "),o.desc),void En("error",this,"ignore error: ".concat(o.desc))):"quit"===o.action?("ERR_REPEAT_JOIN_CHANNEL"===o.desc&&this.close(pa.UID_BANNED),void this.close()):void this.reconnect(o.action,Os.SERVER_ERROR)}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Qt("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=n&&(se.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),En("warning",this,"PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>Qt("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Os.TIMEOUT):this.request(di.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),Qt("REPORT_STATS")&&this.send(di.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:o}=this.websocket.getWsInflateData();0!==n&&0!==o&&this.upload(Iu.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(Pr.RECONNECT_WAITTING_FINISH,n=>{this.emit(ei.WS_RECONNECT_WAITTING_FINISH,n)}),this.websocket.on(Pr.RECONNECT_CREATE_CONNECTION,n=>{this.emit(ei.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(Pr.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Pr.CLOSED,()=>{this.connectionState=fa.CLOSED}),this.websocket.on(Pr.FAILED,()=>{this._disconnectedReason=pa.NETWORK_ERROR,this.connectionState=fa.CLOSED}),this.websocket.on(Pr.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState=this.connectionState===fa.CONNECTED?fa.RECONNECTING:fa.CONNECTING}),this.websocket.on(Pr.WILL_RECONNECT,(n,o)=>{if(f1(this,ei.IS_P2P_DISCONNECTED)&&"retry"===n)return se.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),En("debug",this,"".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(ei.NEED_RENEW_SESSION),this.emit(ei.DISCONNECT_P2P),o("tryNext");"retry"!==n&&(se.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),En("debug",this,"".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0,this.emit(ei.NEED_RENEW_SESSION),this.emit(ei.DISCONNECT_P2P)),o(n)}),this.websocket.on(Pr.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{se.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),zt("warning",this,"rejoin",void 0,n.toString()),this.reconnect("tryNext",Os.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(ei.REPORT_JOIN_GATEWAY,n.message||n.code,this.url||""),n instanceof ye&&n.code===pe.UNEXPECTED_RESPONSE&&n.data.code===Ar.ERR_NO_AUTHORIZED)return se.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),En("warning",this,"reconnect no authorized, recover"),void this.reconnect("recover",Os.SERVER_ERROR);se.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),zt("error",this,"join",void 0,n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Os.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(Pr.REQUEST_NEW_URLS,(n,o)=>{Hh(this,ei.REQUEST_RECOVER,this.multiIpOption).then(n).catch(o)})}})||s8;var c8;function u8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function hv(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?u8(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):u8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}const l8=new Map;let kz=Qs("AgoraRTCGateway","store.clientId")(c8=class extends st{get state(){return this._state}set state(n){if(n===this._state)return;const o=this._state;this._state=n,"DISCONNECTED"===n&&this._disconnectedReason?this.emit(Ds.CONNECTION_STATE_CHANGE,n,o,this._disconnectedReason):this.emit(Ds.CONNECTION_STATE_CHANGE,n,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){se.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),zt("debug",this,"joinGatewayStartTime",n,"[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,o){super(),J(this,"store",void 0),J(this,"joinInfo",void 0),J(this,"key",void 0),J(this,"signal",void 0),J(this,"role",void 0),J(this,"inChannelInfo",{joinAt:null,duration:0}),J(this,"spec",void 0),J(this,"_state","DISCONNECTED"),J(this,"_statsCollector",void 0),J(this,"_disconnectedReason",void 0),J(this,"isSignalRecover",!1),J(this,"hasChangeBGPAddress",!1),J(this,"trafficStatsInterval",void 0),J(this,"networkQualityInterval",void 0),J(this,"_joinGatewayStartTime",0),J(this,"_signalTimeout",!1),J(this,"_clientRoleOptions",void 0),J(this,"_isProactiveJoin",!1),this.store=n,this.spec=o,this.signal=new a8(hv(hv({},o),{},{retryConfig:o.websocketRetryConfig}),n),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}join(n,o,s){var c=this;return F(function*(){c.store.joinGatewayStart(),"disabled"!==n.cloudProxyServer&&(c.hasChangeBGPAddress=!0);const h=Date.now();let g=l8.get(n.cname);if(g||(g=new Map,l8.set(n.cname,g)),c._isProactiveJoin=!0,g.has(n.uid)){const E=new ye(pe.UID_CONFLICT);throw Jt.joinGateway(n.sid,{lts:h,succ:!1,ec:E.message,addr:null,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!n.proxyServer}),c._isProactiveJoin=!1,E}g.set(n.uid,!0),c.joinInfo=n,c.key=o;const f=n.proxyServer,A=n.gatewayAddrs.map(f?E=>{const S=E.address.split(":");return"wss://".concat(f,"/ws/?h=").concat(S[0],"&p=").concat(S[1])}:E=>"wss://".concat(E.address));let _=0;c.joinGatewayStartTime=h;try{_=(yield c.signal.init(A,s)).uid}catch(E){throw E&&E.code===pe.INIT_WEBSOCKET_TIMEOUT?(se.warning("[".concat(c.store.clientId,"] User join failed"),E.toString()),E):(se.error("[".concat(c.store.clientId,"] User join failed"),E.toString()),zt("error",c,"join",void 0,E.toString()),Jt.joinGateway(n.sid,{lts:h,succ:!1,ec:E.message,addr:c.signal.url,uid:n.uid,cid:n.cid,firstSuccess:c._isProactiveJoin,avoidJoinStartTime:c.store.avoidJoinStart,isProxy:!!f}),c._isProactiveJoin=!1,g.delete(n.uid),c.signal.close(),E)}return c.state="CONNECTED",c.inChannelInfo.joinAt=Date.now(),se.debug("[".concat(c.store.clientId,"] Connected to gateway server")),zt("debug",c,"join",void 0,"success"),c.trafficStatsInterval=window.setInterval(()=>{c.updateTrafficStats().catch(E=>{se.warning("[".concat(c.store.clientId,"] get traffic stats error"),E.toString()),zt("warning",c,"trafficStatsInterval",void 0,E.toString())})},3e3),c.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?c.emit(Ds.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):c.emit(Ds.NETWORK_QUALITY,c._signalTimeout?{downlinkNetworkQuality:5,uplinkNetworkQuality:5}:"CONNECTED"===c.state&&c._statsCollector.trafficStats?{uplinkNetworkQuality:J3(c._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:J3(c._statsCollector.trafficStats.B_dnq)}:{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),c.store.joinGatewayEnd(),_})()}leave(){var n=arguments,o=this;return F(function*(){let s=n.length>0&&void 0!==n[0]&&n[0],c=n.length>1?n[1]:void 0;if("DISCONNECTED"!==o.state){c!==pa.FALLBACK&&(o.state="DISCONNECTING");try{s||o.signal.connectionState!==fa.CONNECTED||(yield(h=o.signal.request(di.LEAVE,void 0,!0),3e3,Qn.race([h,ZK(3e3)])))}catch(h){se.warning("[".concat(o.store.clientId,"] leave request failed, ignore"),h),En("warning",o,"leave request failed, ignore, ".concat(h.toString()))}o.signal.close(c),c!==pa.FALLBACK&&(o.state="DISCONNECTED"),o.reset()}var h})()}publish(n,o,s){var c=this;return F(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new ye(pe.INVALID_OPERATION,"can not publish when connection state is ".concat(c.state));const h={state:"offer",p2p_id:c.store.p2pId,ortc:o,mode:c.spec.mode,extend:Qt("PUB_EXTEND")};try{return(yield c.signal.request(di.PUBLISH,h,!0))._message}catch(g){if(s&&g.data&&g.data.code===Ar.ERR_PUBLISH_REQUEST_INVALID)return se.warning("[".concat(c.store.clientId,"] receive publish error code, retry"),g.toString()),En("warning",c,"receive publish error code, retry, ".concat(g.toString())),yield c.tryUnpubBeforeRepub(n,o),c.publish(n,o,!1);throw g}})()}unpublish(n,o){var s=this;return F(function*(){try{if("CONNECTED"!==s.state&&"RECONNECTING"!==s.state)throw new ye(pe.INVALID_OPERATION,"can not publish when connection state is ".concat(s.state));yield s.signal.request(di.UNPUBLISH,{stream_id:o,ortc:n},!0)}catch(c){se.warning("unpublish warning: ",c),zt("warning",s,"unpublish",void 0,c.toString())}})()}subscribe(n,o,s){var c=this;return F(function*(){if("CONNECTED"!==c.state&&"RECONNECTING"!==c.state)throw new ye(pe.INVALID_OPERATION,"can not subscribe when connection state is ".concat(c.state));const h={stream_id:n,stream_type:o.stream_type,mode:c.spec.mode,codec:c.spec.codec,p2p_id:c.store.p2pId,tcc:!!Qt("SUBSCRIBE_TCC"),extend:Qt("SUB_EXTEND"),ssrcId:o.ssrcId};try{return(yield c.signal.request(di.SUBSCRIBE,h,!0))._message}catch(g){if(s&&g.data&&g.data.code===Ar.ERR_SUBSCRIBE_REQUEST_INVALID)return se.warning("[".concat(c.store.clientId,"] receiver subscribe error code, retry"),g.toString()),En("warning",c,"receiver subscribe error code, retry"),yield c.tryUnsubBeforeResub(n,o),yield c.subscribe(n,o,!1);throw g}})()}subscribeAll(n,o){var s=this;return F(function*(){if("CONNECTED"!==s.state&&"RECONNECTING"!==s.state)throw new ye(pe.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(s.state));const c={p2p_id:s.store.p2pId,users:n,dtx:!1};try{return yield s.signal.request(di.SUBSCRIBE_STREAMS,c,!0)}catch(h){if(o&&h.data&&h.data.code===Ar.ERR_SUBSCRIBE_REQUEST_INVALID)return se.warning("[".concat(s.store.clientId,"] receiver massSubscribe error code, retry"),h.toString()),En("warning",s,"receiver massSubscribe error code, retry"),yield s.tryMassUnsubBeforeResub(n),yield s.subscribeAll(n,!1);throw h}})()}setVideoProfile(n){var o=this;return F(function*(){const s=function(c){if(!(c.bitrateMax&&c.bitrateMin&&c.frameRate&&c.height&&c.width))return;let h=c.frameRate,g=c.width,f=c.height,A=!0;return"number"!=typeof h&&(h=h.exact||h.ideal||h.max||h.min||0,h||(A=!1)),"number"!=typeof g&&(g=g.exact||g.ideal||g.max||g.min||0,g||(A=!1)),"number"!=typeof f&&(f=f.exact||f.ideal||f.max||f.min||0,h||(A=!1)),A?{stream_type:0,width:g,height:f,fps:h,start_bps:1e3*c.bitrateMax,min_bps:1e3*c.bitrateMin,target_bps:1e3*c.bitrateMax}:void 0}(n);return s?o.signal.request(di.SET_VIDEO_PROFILE,s):(se.debug("[".concat(o.store.clientId,"] encoder config is not complete, do not report to gateway")),void En("debug",o,"encoder config is not complete, do not report to gateway"))})()}unsubscribe(n,o){var s=this;return F(function*(){try{yield s.signal.request(di.UNSUBSCRIBE,{p2p_id:s.store.p2pId,ortc:n,stream_id:o},!0)}catch(c){se.warning("unsubscribe warning: ",c),zt("warning",s,"unsubscribe",void 0,c.toString())}})()}massUnsubscribe(n){var o=this;return F(function*(){try{yield o.signal.request(di.UNSUBSCRIBE_STREAMS,n,!0)}catch(s){se.warning("unsubscribeAll warning: ",s),zt("warning",o,"unsubscribeAll",void 0,s.toString())}})()}reconnectPC(n){var o=this;return F(function*(){const{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}=n,g=yield o.signal.request(di.CONNECT_PC,{p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}},!0),f=o.getGatewayIpPort();return{gatewayEstablishParams:g,gatewayIP:f?.ip,gatewayPort:f?.port}})()}getGatewayInfo(){return this.signal.request(di.GATEWAY_INFO)}renewToken(n){return this.signal.request(di.RENEW_TOKEN,n)}setClientRole(n,o){var s=this;return F(function*(){if(o&&(s._clientRoleOptions=Object.assign({},o)),"CONNECTED"!==s.state)return void(s.role=n);let c;c="audience"===n?s._clientRoleOptions&&s._clientRoleOptions.level?s._clientRoleOptions.level:2:0,yield s.signal.request(di.SET_CLIENT_ROLE,{role:n,level:c,client_ts:Date.now()}),s.role=n})()}setRemoteVideoStreamType(n,o){var s=this;return F(function*(){yield s.signal.request(di.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:o})})()}setDefaultRemoteVideoStreamType(n){var o=this;return F(function*(){yield o.signal.request(di.DEFAULT_VIDEO_STREAM,{stream_type:n})})()}setStreamFallbackOption(n,o){var s=this;return F(function*(){yield s.signal.request(di.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:o})})()}pickSVCLayer(n,o){var s=this;return F(function*(){yield s.signal.request(di.PICK_SVC_LAYER,{stream_id:n,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})})()}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),hv({},this.inChannelInfo)}getGatewayVersion(){var n=this;return F(function*(){return(yield n.signal.request(di.GATEWAY_INFO)).version})()}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=l8.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(o){const s=o.match(/(wss\:\/\/)?([^:]+):(\d+)/);return s?{username:Ta.username,password:Ta.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(hv(hv({},Ta),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}updateTrafficStats(){var n=this;return F(function*(){if("CONNECTED"!==n.state)return;const o=yield n.signal.request(di.TRAFFIC_STATS,void 0,!0);o.timestamp=Date.now(),o.peer_delay.forEach(s=>{const c=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find(h=>h.peer_uid===s.peer_uid);c&&c.B_st!==s.B_st&&Tp(()=>{n.emit(Ds.STREAM_TYPE_CHANGE,s.peer_uid,s.B_st)})}),n._statsCollector.updateTrafficStats(o)})()}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new ye(pe.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let s=Qt("REPORT_APP_SCENARIO");if("string"!=typeof s)try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const c=hv({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Wl,browser:navigator.userAgent,process_id:Qt("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:Qt("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:Qt("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Qt("MAX_SUBSCRIPTION")}},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(c.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(c.aes_mode=this.joinInfo.aesmode,Qt("ENCRYPT_AES")?(c.aes_secret=this.joinInfo.aespassword,c.aes_encrypt=!0):c.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(c.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(c.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),void 0!==this.joinInfo.defaultVideoStream&&(c.default_video_stream=this.joinInfo.defaultVideoStream),c}getRejoinMessage(){if(!this.joinInfo)throw new ye(pe.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){var n=this;this.signal.on(ei.WS_RECONNECT_WAITTING_FINISH,o=>{["tryNext","recover"].includes(o)&&this.joinInfo&&Jt.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(ei.WS_RECONNECT_CREATE_CONNECTION,o=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(ei.WS_RECONNECTING,o=>{this.joinInfo&&Jt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o||Os.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Jt.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(ei.WS_CLOSED,o=>{let s;switch(o){case pa.LEAVE:s=Os.LEAVE;break;case pa.UID_BANNED:case pa.IP_BANNED:case pa.CHANNEL_BANNED:case pa.SERVER_ERROR:s=Os.SERVER_ERROR;break;case pa.FALLBACK:s=Os.FALLBACK;break;default:s=Os.NETWORK_ERROR}se.debug("[signal] websocket closed, reason: ".concat(s||"undefined -> "+Os.NETWORK_ERROR)),Pi("debug",this,"ws_closed","reason: ".concat(o)),this.joinInfo&&Jt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:o===pa.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:s}),this._disconnectedReason=o,o!==pa.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(ei.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(se.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),En("debug",this,"patch to send set client role, role: ".concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Jt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint)){const o=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!o)return se.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(o)),void En("error",this,"set local access point after joined failed: ".concat(o));kc("EVENT_REPORT_DOMAIN",o[1]),kc("EVENT_REPORT_BACKUP_DOMAIN",o[1]),kc("LOG_UPLOAD_SERVER","".concat(o[1],":6444"))}}),this.signal.on(Fi.ON_UPLINK_STATS,o=>{this._statsCollector.updateUplinkStats(o)}),this.signal.on(ei.REQUEST_RECOVER,(o,s,c)=>{if(!this.joinInfo)return c(new ye(pe.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));o&&(this.joinInfo.multiIP=o,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Hh(this,Ds.REQUEST_NEW_GATEWAY_LIST).then(s).catch(c)}),this.signal.on(ei.REQUEST_JOIN_INFO,function(){var o=F(function*(s){var c;n.updateTurnConfigFromSignal();const{iceParameters:h,dtlsParameters:g,rtpCapabilities:f}=yield Hh(n,Ds.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(c=n.joinInfo)||void 0===c?void 0:c.turnServer});s(n.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:g,rtpCapabilities:f,version:"2"}}))});return function(s){return o.apply(this,arguments)}}()),this.signal.on(ei.REQUEST_REJOIN_INFO,o=>{o(this.getRejoinMessage())}),this.signal.on(ei.REPORT_JOIN_GATEWAY,(o,s)=>{this.joinInfo&&(Jt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:o,addr:s,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer}),this._isProactiveJoin=!1)}),this.signal.on(ei.IS_P2P_DISCONNECTED,o=>{o(f1(this,Ds.IS_P2P_DISCONNECTED))}),this.signal.on(ei.DISCONNECT_P2P,()=>{this.emit(Ds.DISCONNECT_P2P)}),this.signal.on(ei.NEED_RENEW_SESSION,()=>{this.emit(Ds.NEED_RENEW_SESSION)}),this.signal.on(ei.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(ei.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(ei.JOIN_RESPONSE,o=>{const s=this.getGatewayIpPort();s?this.emit(Ds.JOIN_RESPONSE,o,s.ip,s.port):this.emit(Ds.JOIN_RESPONSE,o)})}tryUnsubBeforeResub(n,o){var s=this;return F(function*(){try{yield s.signal.request(di.UNSUBSCRIBE,{p2p_id:s.store.p2pId,stream_id:n,ortc:[o]},!0)}catch(c){throw se.warning("unsubscribe warning",c),zt("warning",s,"tryUnsubBeforeResub",n,c.toString()),c}})()}tryUnpubBeforeRepub(n,o){var s=this;return F(function*(){try{yield s.signal.request(di.UNPUBLISH,{stream_id:n,ortc:o},!0)}catch(c){throw se.warning("unpublish warning: ",c),zt("warning",s,"tryUnpubBeforeRepub",n,c.toString()),c}})()}tryMassUnsubBeforeResub(n){var o=this;return F(function*(){const s={users:n.map(c=>({stream_id:c.stream_id,stream_type:c.stream_type}))};try{yield o.signal.request(di.UNSUBSCRIBE_STREAMS,s,!0)}catch(c){throw se.warning("massUnsubscribe warning",c),zt("warning",o,"tryUnsubAllBeforeResub",n.map(h=>h.stream_id),c.toString()),c}})()}muteLocal(n,o){var s=this;return F(function*(){const c={action:n.find(h=>h.stream_type===gs.Audio)?"mute_local_audio":"mute_local_video",p2p_id:s.store.p2pId,ortc:n,stream_id:o};try{yield s.signal.request(di.CONTROL,c,!0,!0)}catch(h){throw se.warning("gateway unmuteLocal warning: ",h),zt("warning",s,"muteLocal",o,h.toString()),h}})()}unmuteLocal(n,o){var s=this;return F(function*(){const c={action:n.find(h=>h.stream_type===gs.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:s.store.p2pId,ortc:n,stream_id:o};try{yield s.signal.request(di.CONTROL,c,!0,!0)}catch(h){throw se.warning("gateway muteLocal warning: ",h),zt("warning",s,"unmuteLocal",o,h.toString()),h}})()}uploadStats(n,o){this.signal.upload(n,o)}getSignalRTT(){return this.signal.rtt}restartICE(n){var o=this;return F(function*(){const s={p2p_id:o.store.p2pId,stream_id:o.store.uid,ortc:n};try{const c=yield o.signal.request(di.RESTART_ICE,s,!0),h=o.getGatewayIpPort();return{restartICEResponse:c,gatewayIP:h?.ip,gatewayPort:h?.port}}catch(c){throw se.warning("P2PChannel.restartICE warning: ",c),zt("warning",o,"restartICE",void 0,c.toString()),c}})()}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Os.P2P_FAILED)}getGatewayIpPort(){var n;if(!Qt("GATEWAY_WSS_ADDRESS")&&null!==(n=this.joinInfo)&&void 0!==n&&n.gatewayAddrs){const o=this.joinInfo.gatewayAddrs[this.signal.currentURLIndex];return(o.ip||o.ip6)&&o.port?o.ip6?{ip:o.ip6,port:o.port}:{ip:o.ip,port:o.port}:void 0}}})||c8;function TH(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function RH(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?TH(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):TH(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}!function(){var n;function o(Je){var dt=0;return function(){return dt<Je.length?{done:!1,value:Je[dt++]}:{done:!0}}}var c,s="function"==typeof Object.defineProperties?Object.defineProperty:function(Je,dt,xt){return Je==Array.prototype||Je==Object.prototype||(Je[dt]=xt.value),Je},h=function(Je){Je=["object"==typeof globalThis&&globalThis,Je,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof K&&K];for(var dt=0;dt<Je.length;++dt){var xt=Je[dt];if(xt&&xt.Math==Math)return xt}throw Error("Cannot find global object")}(this);function g(Je,dt){if(dt)e:{var xt=h;Je=Je.split(".");for(var pn=0;pn<Je.length-1;pn++){var Dn=Je[pn];if(!(Dn in xt))break e;xt=xt[Dn]}(dt=dt(pn=xt[Je=Je[Je.length-1]]))!=pn&&null!=dt&&s(xt,Je,{configurable:!0,writable:!0,value:dt})}}function f(Je){return(Je={next:Je})[Symbol.iterator]=function(){return this},Je}function A(Je){var dt=typeof Symbol<"u"&&Symbol.iterator&&Je[Symbol.iterator];return dt?dt.call(Je):{next:o(Je)}}if(g("Symbol",function(Je){function dt(Dn,Wt){this.A=Dn,s(this,"description",{configurable:!0,writable:!0,value:Wt})}if(Je)return Je;dt.prototype.toString=function(){return this.A};var xt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",pn=0;return function Dn(Wt){if(this instanceof Dn)throw new TypeError("Symbol is not a constructor");return new dt(xt+(Wt||"")+"_"+pn++,Wt)}}),g("Symbol.iterator",function(Je){if(Je)return Je;Je=Symbol("Symbol.iterator");for(var dt="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),xt=0;xt<dt.length;xt++){var pn=h[dt[xt]];"function"==typeof pn&&"function"!=typeof pn.prototype[Je]&&s(pn.prototype,Je,{configurable:!0,writable:!0,value:function(){return f(o(this))}})}return Je}),"function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var _;e:{var E={};try{E.__proto__={a:!0},_=E.a;break e}catch{}_=!1}c=_?function(Je,dt){if(Je.__proto__=dt,Je.__proto__!==dt)throw new TypeError(Je+" is not extensible");return Je}:null}var S=c;function I(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function R(Je){if(Je.m)throw new TypeError("Generator is already running");Je.m=!0}function M(Je,dt){return Je.h=3,{value:dt}}function Q(Je){this.g=new I,this.G=Je}function H(Je,dt,xt,pn){try{var Dn=dt.call(Je.g.j,xt);if(!(Dn instanceof Object))throw new TypeError("Iterator result "+Dn+" is not an object");if(!Dn.done)return Je.g.m=!1,Dn;var Wt=Dn.value}catch(j){return Je.g.j=null,Je.g.s(j),Z(Je)}return Je.g.j=null,pn.call(Je.g,Wt),Z(Je)}function Z(Je){for(;Je.g.h;)try{var dt=Je.G(Je.g);if(dt)return Je.g.m=!1,{value:dt.value,done:!1}}catch(xt){Je.g.v=void 0,Je.g.s(xt)}if(Je.g.m=!1,Je.g.l){if(dt=Je.g.l,Je.g.l=null,dt.F)throw dt.D;return{value:dt.return,done:!0}}return{value:void 0,done:!0}}function le(Je){this.next=function(dt){return Je.o(dt)},this.throw=function(dt){return Je.s(dt)},this.return=function(dt){return function(xt,pn){R(xt.g);var Dn=xt.g.j;return Dn?H(xt,"return"in Dn?Dn.return:function(Wt){return{value:Wt,done:!0}},pn,xt.g.return):(xt.g.return(pn),Z(xt))}(Je,dt)},this[Symbol.iterator]=function(){return this}}function ge(Je,dt){return dt=new le(new Q(dt)),S&&Je.prototype&&S(dt,Je.prototype),dt}if(I.prototype.o=function(Je){this.v=Je},I.prototype.s=function(Je){this.l={D:Je,F:!0},this.h=this.C||this.u},I.prototype.return=function(Je){this.l={return:Je},this.h=this.u},Q.prototype.o=function(Je){return R(this.g),this.g.j?H(this,this.g.j.next,Je,this.g.o):(this.g.o(Je),Z(this))},Q.prototype.s=function(Je){return R(this.g),this.g.j?H(this,this.g.j.throw,Je,this.g.o):(this.g.s(Je),Z(this))},g("Array.prototype.entries",function(Je){return Je||function(){return function(dt,xt){dt instanceof String&&(dt+="");var pn=0,Dn=!1,Wt={next:function(){if(!Dn&&pn<dt.length){var j=pn++;return{value:xt(j,dt[j]),done:!1}}return Dn=!0,{done:!0,value:void 0}}};return Wt[Symbol.iterator]=function(){return Wt},Wt}(this,function(dt,xt){return[dt,xt]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Se=function(Je,dt){for(var xt=0;xt<Je.length;xt++)dt(Je[xt])},Ne=function(Je){return Je.replace(/\r?\n|\r/g,"\r\n")},nt=function(Je,dt,xt){return dt instanceof Blob?(xt=void 0!==xt?String(xt+""):"string"==typeof dt.name?dt.name:"blob",dt.name===xt&&"[object Blob]"!==Object.prototype.toString.call(dt)||(dt=new File([dt],xt)),[String(Je),dt]):[String(Je),String(dt)]},Nt=function(Je,dt){if(Je.length<dt)throw new TypeError(dt+" argument required, but only "+Je.length+" present.")},Vt="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,Dt=Vt.FormData,In=Vt.XMLHttpRequest&&Vt.XMLHttpRequest.prototype.send,dn=Vt.Request&&Vt.fetch,hn=Vt.navigator&&Vt.navigator.sendBeacon,wt=Vt.Element&&Vt.Element.prototype,We=Vt.Symbol&&Symbol.toStringTag;We&&(Blob.prototype[We]||(Blob.prototype[We]="Blob"),"File"in Vt&&!File.prototype[We]&&(File.prototype[We]="File"));try{new File([],"")}catch{Vt.File=function(dt,xt,pn){return dt=new Blob(dt,pn||{}),Object.defineProperties(dt,{name:{value:xt},lastModified:{value:+(pn&&void 0!==pn.lastModified?new Date(pn.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),We&&Object.defineProperty(dt,We,{value:"File"}),dt}}var ct=function(Je){return Je.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},bt=function(Je){this.i=[];var dt=this;Je&&Se(Je.elements,function(xt){if(xt.name&&!xt.disabled&&"submit"!==xt.type&&"button"!==xt.type&&!xt.matches("form fieldset[disabled] *"))if("file"===xt.type){var pn=xt.files&&xt.files.length?xt.files:[new File([],"",{type:"application/octet-stream"})];Se(pn,function(Dn){dt.append(xt.name,Dn)})}else"select-multiple"===xt.type||"select-one"===xt.type?Se(xt.options,function(Dn){!Dn.disabled&&Dn.selected&&dt.append(xt.name,Dn.value)}):"checkbox"===xt.type||"radio"===xt.type?xt.checked&&dt.append(xt.name,xt.value):(pn="textarea"===xt.type?Ne(xt.value):xt.value,dt.append(xt.name,pn))})};if((n=bt.prototype).append=function(Je,dt,xt){Nt(arguments,2),this.i.push(nt(Je,dt,xt))},n.delete=function(Je){Nt(arguments,1);var dt=[];Je=String(Je),Se(this.i,function(xt){xt[0]!==Je&&dt.push(xt)}),this.i=dt},n.entries=function Je(){var dt,xt=this;return ge(Je,function(pn){if(1==pn.h&&(dt=0),3!=pn.h)return dt<xt.i.length?pn=M(pn,xt.i[dt]):(pn.h=0,pn=void 0),pn;dt++,pn.h=2})},n.forEach=function(Je,dt){Nt(arguments,1);for(var xt=A(this),pn=xt.next();!pn.done;pn=xt.next()){var Dn=A(pn.value);pn=Dn.next().value,Dn=Dn.next().value,Je.call(dt,Dn,pn,this)}},n.get=function(Je){Nt(arguments,1);var dt=this.i;Je=String(Je);for(var xt=0;xt<dt.length;xt++)if(dt[xt][0]===Je)return dt[xt][1];return null},n.getAll=function(Je){Nt(arguments,1);var dt=[];return Je=String(Je),Se(this.i,function(xt){xt[0]===Je&&dt.push(xt[1])}),dt},n.has=function(Je){Nt(arguments,1),Je=String(Je);for(var dt=0;dt<this.i.length;dt++)if(this.i[dt][0]===Je)return!0;return!1},n.keys=function Je(){var dt,xt,Wt=this;return ge(Je,function(j){if(1==j.h&&(dt=A(Wt),xt=dt.next()),3!=j.h)return xt.done?void(j.h=0):M(j,A(xt.value).next().value);xt=dt.next(),j.h=2})},n.set=function(Je,dt,xt){Nt(arguments,2),Je=String(Je);var pn=[],Dn=nt(Je,dt,xt),Wt=!0;Se(this.i,function(j){j[0]===Je?Wt&&(Wt=!pn.push(Dn)):pn.push(j)}),Wt&&pn.push(Dn),this.i=pn},n.values=function Je(){var dt,xt,Dn,Wt=this;return ge(Je,function(j){if(1==j.h&&(dt=A(Wt),xt=dt.next()),3!=j.h)return xt.done?void(j.h=0):((Dn=A(xt.value)).next(),M(j,Dn.next().value));xt=dt.next(),j.h=2})},bt.prototype._asNative=function(){for(var Je=new Dt,dt=A(this),xt=dt.next();!xt.done;xt=dt.next()){var pn=A(xt.value);xt=pn.next().value,pn=pn.next().value,Je.append(xt,pn)}return Je},bt.prototype._blob=function(){var Je="----formdata-polyfill-"+Math.random(),dt=[],xt="--"+Je+'\r\nContent-Disposition: form-data; name="';return this.forEach(function(pn,Dn){return"string"==typeof pn?dt.push(xt+ct(Ne(Dn))+'"\r\n\r\n'+Ne(pn)+"\r\n"):dt.push(xt+ct(Ne(Dn))+'"; filename="'+ct(pn.name)+'"\r\nContent-Type: '+(pn.type||"application/octet-stream")+"\r\n\r\n",pn,"\r\n")}),dt.push("--"+Je+"--"),new Blob(dt,{type:"multipart/form-data; boundary="+Je})},bt.prototype[Symbol.iterator]=function(){return this.entries()},bt.prototype.toString=function(){return"[object FormData]"},wt&&!wt.matches&&(wt.matches=wt.matchesSelector||wt.mozMatchesSelector||wt.msMatchesSelector||wt.oMatchesSelector||wt.webkitMatchesSelector||function(Je){for(var dt=(Je=(this.document||this.ownerDocument).querySelectorAll(Je)).length;0<=--dt&&Je.item(dt)!==this;);return-1<dt}),We&&(bt.prototype[We]="FormData"),In){var bn=Vt.XMLHttpRequest.prototype.setRequestHeader;Vt.XMLHttpRequest.prototype.setRequestHeader=function(Je,dt){bn.call(this,Je,dt),"content-type"===Je.toLowerCase()&&(this.B=!0)},Vt.XMLHttpRequest.prototype.send=function(Je){Je instanceof bt?(Je=Je._blob(),this.B||this.setRequestHeader("Content-Type",Je.type),In.call(this,Je)):In.call(this,Je)}}dn&&(Vt.fetch=function(Je,dt){return dt&&dt.body&&dt.body instanceof bt&&(dt.body=dt.body._blob()),dn.call(this,Je,dt)}),hn&&(Vt.navigator.sendBeacon=function(Je,dt){return dt instanceof bt&&(dt=dt._asNative()),hn.call(this,Je,dt)}),Vt.FormData=bt}}();let d8=1;function OH(n,o,s,c,h){d8+=1;const g={sid:s.sid,command:"convergeAllocateEdge",uid:"666",appId:s.appId,ts:Math.floor(Date.now()/1e3),seq:d8,requestId:d8,version:Wl,cname:s.cname},f={service_name:o,json_body:JSON.stringify(g)};let A,_,E=n[0];return Jo(F(function*(){A=Date.now();const S=yield Qh(E,{data:f,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(_=Date.now()-A,0!==S.code){const M=new ye(pe.UNEXPECTED_RESPONSE,"live streaming ap error, code"+S.code,{retry:!0,responseTime:_});throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,M.toString()),M}const I=JSON.parse(S.json_body);if(200!==I.code){const M=new ye(pe.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(I.code,", reason: ").concat(I.reason),{code:I.code,responseTime:_});throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,M.toString()),M}if(!I.servers||0===I.servers.length){const M=new ye(pe.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:I.code,responseTime:_});throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestLiveStreamingWorkerManager",void 0,M.toString()),M}const R=(Q=o,{addressList:(M=I).servers.map(H=>"wss://".concat(H.address.replace(/\./g,"-"),".").concat(Qt("WORKER_DOMAIN"),":").concat(H.wss,"?serviceName=").concat(encodeURIComponent(Q))),workerToken:M.workerToken,vid:M.vid});var M,Q;return Qt("LIVE_STREAMING_ADDRESS")&&(R.addressList=Qt("LIVE_STREAMING_ADDRESS")instanceof Array?Qt("LIVE_STREAMING_ADDRESS"):[Qt("LIVE_STREAMING_ADDRESS")]),RH(RH({},R),{},{responseTime:_})}),(S,I)=>(Jt.apworkerEvent(s.sid,{success:!0,sc:200,serviceName:o,responseDetail:JSON.stringify(S.addressList),firstSuccess:0===I,responseTime:_,serverIp:n[I%n.length]}),!1),(S,I)=>(Jt.apworkerEvent(s.sid,{success:!1,sc:S.data&&S.data.code||200,serviceName:o,responseTime:_,serverIp:n[I%n.length]}),!!(S.code!==pe.OPERATION_ABORTED&&S.code!==pe.UNEXPECTED_RESPONSE||S.data&&S.data.retry)&&(E=n[(I+1)%n.length],!0)),h)}let h8=1;function DH(n,o,s,c){let{url:h,areaCode:g}=n;zt("debug",["AjaxAPI",o.clientId],"requestChooseServer",{url:h,areaCode:g});const f=Date.now(),[A,_]=f8(o,g,[ga.CHOOSE_SERVER]);let E=_a.networkState;return Jo(F(function*(){E&&_a.networkState===dl.OFFLINE&&_a.onlineWaiter&&(yield Qn.race([_a.onlineWaiter,Mc(c&&c.maxRetryTimeout||wn.maxRetryTimeout)])),E=_a.networkState;const S=yield Qh(h,{data:A,cancelToken:s,headers:{"Content-Type":"multipart/form-data;"}},!0);Jt.reportResourceTiming(h,o.sid),p8(S,h,o,f,[ga.CHOOSE_SERVER]);const I=$3(S,ga.CHOOSE_SERVER);return Yk(I),RQ(I,h)}),S=>(S&&Jt.joinChooseServer(o.sid,{lts:f,succ:!0,csAddr:h,opid:_,serverList:S.gatewayAddrs.map(I=>I.address),ec:null,cid:S.cid.toString(),uid:S.uid.toString(),csIp:S.csIp,unilbsServerIds:[ga.CHOOSE_SERVER].toString()}),!1),S=>S.code!==pe.OPERATION_ABORTED&&(S.code===pe.CAN_NOT_GET_GATEWAY_SERVER?S.data.retry:(Jt.joinChooseServer(o.sid,{lts:f,succ:!1,csAddr:h,serverList:null,opid:_,ec:S.code,csIp:S.data&&S.data.csIp,unilbsServerIds:[ga.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:E})}),se.warning("[".concat(o.clientId,"] Choose server network error, retry"),S),En("warning",["AjaxAPI",o.clientId],"Choose server network error, retry, ".concat(S)),!0)),c)}function kH(n,o,s,c){let{url:h,areaCode:g,serviceIds:f}=n;zt("debug",["AjaxAPI",o.clientId],"requestMultiUnilbs",{url:h,areaCode:g,serviceIds:f});const A=Date.now(),[_,E]=f8(o,g,f);let S;return Jo(F(function*(){S&&_a.networkState===dl.OFFLINE&&_a.onlineWaiter&&(yield Qn.race([_a.onlineWaiter,Mc(c&&c.maxRetryTimeout||wn.maxRetryTimeout)])),S=_a.networkState;const I=yield Qh(h,{data:_,cancelToken:s,headers:{"Content-Type":"multipart/form-data;"}},!0);Jt.reportResourceTiming(h,o.sid),p8(I,h,o,A,f);const R=$3(I,ga.CHOOSE_SERVER),M=$3(I,"proxy5"===o.cloudProxyServer?ga.CLOUD_PROXY_5:"proxy3"===o.cloudProxyServer||"proxy4"===o.cloudProxyServer?ga.CLOUD_PROXY:ga.CLOUD_PROXY_FALLBACK);return Yk(R),{gatewayInfo:RQ(R,h),proxyInfo:M,url:h}}),I=>(I.gatewayInfo&&Jt.joinChooseServer(o.sid,{lts:A,succ:!0,csAddr:h,serverList:I.gatewayInfo.gatewayAddrs.map(R=>R.address),ec:null,opid:E,cid:I.gatewayInfo.cid.toString(),uid:I.gatewayInfo.uid.toString(),csIp:I.gatewayInfo.csIp,unilbsServerIds:f.toString()}),I.proxyInfo&&Jt.joinWebProxyAP(o.sid,{lts:A,sucess:1,apServerAddr:h,turnServerAddrList:I.proxyInfo.addresses.map(R=>R.ip).join(","),errorCode:null,eventType:o.cloudProxyServer,unilbsServerIds:f.toString()}),!1),I=>I.code!==pe.OPERATION_ABORTED&&(I.code===pe.CAN_NOT_GET_GATEWAY_SERVER?I.data.retry:(Jt.joinWebProxyAP(o.sid,{lts:A,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:I.code,eventType:o.cloudProxyServer,unilbsServerIds:f.toString(),extend:JSON.stringify({networkState:S})}),se.warning("[".concat(o.clientId,"] multi unilbs network error, retry"),I),En("warning",["AjaxAPI",o.clientId],"multi unilbs network error, retry, ".concat(I)),!0)),c)}const p8=(n,o,s,c,h)=>{const g=[],f=A=>{4096===A.flag?Jt.joinChooseServer(s.sid,{lts:c,succ:!1,csAddr:o,opid:n.opid,serverList:null,ec:A.error.message,csIp:A.error.data&&A.error.data.csIp,unilbsServerIds:h.toString()}):1048576!==A.flag&&4194304!==A.flag&&4194310!==A.flag||Jt.joinWebProxyAP(s.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:A.error.code,eventType:s.cloudProxyServer,unilbsServerIds:h.toString()})};if(n.response_body.forEach(A=>{const _=A.buffer.code;if(23===A.uri&&0===_&&!A.buffer.edges_services)if(4194310===A.buffer.flag)se.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),A.buffer.edges_services=[];else{const E={error:new ye(pe.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:A.buffer.flag};g.push(E),f(E)}if(0!==_){const E=Kk(_),S={error:new ye(pe.CAN_NOT_GET_GATEWAY_SERVER,E.desc,{retry:E.retry,csIp:n.detail[502]}),flag:A.buffer.flag};4194310===A.buffer.flag?se.warning(S.error.toString()):g.push(S),f(S)}}),g.length)throw se.warning("[".concat(s.clientId,"] multi unilbs ").concat(o," failed, ").concat(g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message,", retry: ").concat(A.error.data.retry)).join(" | "))),zt("warning",["AjaxAPI",s.clientId],"checkMultiUnilbsResponseValid",{url:o},g.map(A=>({flag:A.flag,message:A.error.message,retry:A.error.data.retry}))),new ye(pe.CAN_NOT_GET_GATEWAY_SERVER,g.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message)).join(" | "),{retry:!!g.find(A=>A.error.data.retry),csIp:n.detail[502]})},Yk=n=>{if(n.addresses&&0===n.addresses.length&&0===n.code)throw new ye(pe.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(Qt("GATEWAY_ADDRESS")&&Qt("GATEWAY_ADDRESS").length>0){se.debug("assign gateway address to",Qt("GATEWAY_ADDRESS")),En("debug",["AjaxAPI"],"assign gateway address to ".concat(JSON.stringify(Qt("GATEWAY_ADDRESS"))));const o=Qt("GATEWAY_ADDRESS").map(s=>({ip:s.ip,port:s.port,ticket:n.addresses[0]&&n.addresses[0].ticket}));n.addresses=o}},PH=(n,o)=>{if(n.response_body&&n.response_body.length){const s=n.response_body[0];if(0!==s.buffer.code){const c=Kk(s.buffer.code);throw new ye(pe.UPDATE_TICKET_FAILED,"[".concat(s.buffer.code,"]: ").concat(c.desc),{retry:c.retry})}return s.buffer.ticket}throw se.debug("update ticket request received ap response without response body:",o),En("debug",["AjaxAPI"],"update ticket request received ap response without response body: ".concat(o)),new ye(pe.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},f8=(n,o,s)=>{const c=Math.floor(1e12*Math.random()),h={appid:n.appId,client_ts:Date.now(),opid:c,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:o,12:Qt("USE_NEW_TOKEN")?"1":void 0},key:n.token,service_ids:s,uid:n.uid||0}}]};h.request_bodies.forEach(f=>{n.multiIP&&n.multiIP.gateway_ip&&(f.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const g=new FormData;return g.append("request",JSON.stringify(h)),[g,c]},NH=(n,o)=>{const s=Math.floor(1e12*Math.random()),c={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:o,uid:n.uid||0,edges_services:n.apResponse.addresses.map(g=>({ip:g.ip,port:g.port}))}}]},h=new FormData;return h.append("request",JSON.stringify(c)),[h,s]};let NU=0;const qk=()=>{const n=Qt("AREAS");return 0===n.length&&n.push(pi.GLOBAL),e_(n).call(n,(o,s,c)=>{const h=MH(s);return h?0===c?h:"".concat(o,",").concat(h):o},"")},MH=n=>n===pi.OVERSEA?"".concat(ma.ASIA,",").concat(ma.EUROPE,",").concat(ma.AFRICA,",").concat(ma.NORTH_AMERICA,",").concat(ma.SOUTH_AMERICA,",").concat(ma.OCEANIA):ma[n],Jx={GLOBAL:{ASIA:[pi.CHINA,pi.JAPAN,pi.INDIA,pi.KOREA,pi.HKMC],EUROPE:[],NORTH_AMERICA:[pi.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},MU=Object.keys(Jx[pi.GLOBAL]),m8=[pi.CHINA,pi.NORTH_AMERICA,pi.EUROPE,pi.ASIA,pi.JAPAN,pi.INDIA,pi.OCEANIA,pi.SOUTH_AMERICA,pi.AFRICA,pi.KOREA,pi.HKMC,pi.US];function Jk(n,o,s,c){return g8.apply(this,arguments)}function g8(){return g8=F(function*(n,o,s,c){return{gatewayInfo:yield(g=F(function*(f,A,_,E){let S=null;const I=[],R=function(){var Q=F(function*(){const H=Qt("WEBCS_DOMAIN").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map(ge=>({url:f.proxyServer?"https://".concat(f.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:qk()})),Z=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:H.map(ge=>ge.url)}),le=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:H,asyncMapHandler:ge=>(se.debug("[".concat(f.clientId,"] Connect to choose_server:"),ge.url),DH(ge,f,A,_)),allFailedhandler:ge=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},Z),ge[0]},promisesCollector:I});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),le});return function(){return Q.apply(this,arguments)}}(),M=function(){var Q=F(function*(){if(yield Mc(1e3),null!==S)return S;const H=Qt("WEBCS_DOMAIN_BACKUP_LIST").map(ge=>({url:f.proxyServer?"https://".concat(f.proxyServer,"/ap/?url=").concat(ge+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ge,"/api/v2/transpond/webrtc?v=2"),areaCode:qk()})),Z=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:H.map(ge=>ge.url)}),le=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:H,asyncMapHandler:ge=>(se.debug("[".concat(f.clientId,"] Connect to backup choose_server:"),ge.url),DH(ge,f,A,_)),allFailedhandler:ge=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:ge},Z),ge[0]},promisesCollector:I});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Z),le});return function(){return Q.apply(this,arguments)}}();try{return S=yield p1([R(),M()]),I.length&&I.forEach(Q=>Q.cancel&&"function"==typeof Q.cancel&&Q.cancel()),S}catch(Q){throw Q[0]}}),function(f,A,_,E){return g.apply(this,arguments)})(n,o,s,c)};var g}),g8.apply(this,arguments)}function _8(n,o,s,c,h){return $x.apply(this,arguments)}function $x(){return $x=F(function*(n,o,s,c,h){const g=n.cloudProxyServer;if("disabled"===g){if(!c)return;if(n.useLocalAccessPoint)return yield Jk(n,o,s,h);if(Qt("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:_}=yield v8(n,o,s,h);return n.turnServer&&"auto"!==n.turnServer.mode?(En("debug",["Server",n.clientId],"do not set fallback turn because of already having turnserver"),{gatewayInfo:A}):(n.turnServer={mode:"manual",servers:_.map(E=>({turnServerURL:E.address,tcpport:E.tcpport||Ta.tcpport,udpport:E.udpport||Ta.udpport,username:E.username||Ta.username,password:E.password||Ta.password,forceturn:Qt("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE"),security:!0}))},{gatewayInfo:A})}return yield Jk(n,o,s,h)}let f;if(["443only","normal"].includes(g)){let A;c?"normal"!==g?[A,f]=yield Qn.all([Zx(n,o,s),Jk(n,o,s,h)]):(A=yield Zx(n,o,s),n.proxyServer=A.addresses[0],Jt.setProxyServer(n.proxyServer),se.setProxyServer(n.proxyServer),lc(n.proxyServer),f=yield Jk(n,o,s,h)):(f=void 0,"normal"!==g?A=yield Zx(n,o,s):(A=yield Zx(n,o,s),n.proxyServer=A.addresses[0],Jt.setProxyServer(n.proxyServer),se.setProxyServer(n.proxyServer),lc(n.proxyServer))),n.turnServer={mode:"manual",servers:A.addresses.map(_=>({turnServerURL:_,tcpport:A.serverResponse.tcpport?A.serverResponse.tcpport:Ta.tcpport,udpport:A.serverResponse.udpport?A.serverResponse.udpport:Ta.udpport,username:A.serverResponse.username||Ta.username,password:A.serverResponse.password||Ta.password,forceturn:!0,security:!1}))}}else{const{proxyInfo:A,gatewayInfo:_}=yield v8(n,o,s,h);f={gatewayInfo:_},n.turnServer={mode:"manual",servers:A.map(E=>({turnServerURL:E.address,tcpport:"proxy3"===g?void 0:E.tcpport?E.tcpport:Ta.tcpport,udpport:"proxy4"===g?void 0:E.udpport?E.udpport:Ta.udpport,username:E.username||Ta.username,password:E.password||Ta.password,forceturn:"proxy4"!==g,security:"proxy5"===g}))}}return se.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(g)),zt("debug",["Server",n.clientId],"setCloudProxyServerAndGetServerInfo",{proxyServer:n.proxyServer,mode:n.cloudProxyServer}),f}),$x.apply(this,arguments)}function Xx(n,o,s,c,h){return xU.apply(this,arguments)}function xU(){return xU=F(function*(n,o,s,c,h){let f=[];f=Qt("ACCOUNT_REGISTER").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map(o.proxyServer?_=>"https://".concat(o.proxyServer,"/ap/?url=").concat(_+"/api/v1"):_=>"https://".concat(_,"/api/v1"));const A=h?.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:f});try{const _=yield(E=F(function*(S,I,R,M,Q){const H=Date.now(),Z={sid:R.sid,opid:10,appid:R.appId,string_uid:I};let le=S[0];const ge=yield Jo(()=>Qh(le+"".concat(-1===le.indexOf("?")?"?":"&","action=stringuid"),{data:Z,cancelToken:M,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Se,Ne)=>{if(0===Se.code){if(Se.uid<=0||Se.uid>=Math.pow(2,32))throw se.error("Invalid Uint Uid ".concat(I," => ").concat(Se.uid),Se),zt("error",["AjaxAPI"],"requestUserAccount","Invalid Uint Uid ".concat(I," => ").concat(Se.uid,", ").concat(Se)),Jt.reqUserAccount(Z.sid,{lts:H,success:!1,serverAddr:le,stringUid:Z.string_uid,uid:Se.uid,errorCode:pe.INVALID_UINT_UID_FROM_STRING_UID,extend:Z}),new ye(pe.INVALID_UINT_UID_FROM_STRING_UID);return Jt.reqUserAccount(Z.sid,{lts:H,success:!0,serverAddr:le,stringUid:Z.string_uid,uid:Se.uid,errorCode:null,extend:Z}),!1}const nt=Kk(Se.code);return nt.retry&&(le=S[(Ne+1)%S.length]),Jt.reqUserAccount(Z.sid,{lts:H,success:!1,serverAddr:le,stringUid:Z.string_uid,uid:Se.uid,errorCode:nt.desc,extend:Z}),nt.retry},(Se,Ne)=>Se.code!==pe.OPERATION_ABORTED&&(Jt.reqUserAccount(Z.sid,{lts:H,success:!1,serverAddr:le,stringUid:Z.string_uid,uid:null,errorCode:Se.code,extend:Z}),le=S[(Ne+1)%S.length],!0),Q);if(0!==ge.code){const Se=Kk(ge.code);throw new ye(pe.UNEXPECTED_RESPONSE,Se.desc)}return ge}),function(S,I,R,M,Q){return E.apply(this,arguments)})(f,n,o,s,c);return h?.recordJoinChannelService({status:"success",endTs:Date.now()},A),_.uid}catch(_){throw h?.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[_]},A),_}var E}),xU.apply(this,arguments)}function Zx(n,o,s){return LU.apply(this,arguments)}function LU(){return LU=F(function*(n,o,s){let c=Date.now();const h=n.cloudProxyServer,g=Qt("normal"===h?"PROXY_CS":"WEBCS_DOMAIN").map(S=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(S+"/api/v1"):"https://".concat(S,"/api/v1"));if(["proxy3","proxy4","proxy5"].includes(h)){const S=g.map(M=>({url:M,areaCode:qk()}));let I=null;I=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:S,asyncMapHandler:M=>function(Q,H,Z,le){let{url:ge,areaCode:Se}=Q;const Ne=Date.now(),nt={opid:133,flag:"proxy5"===H.cloudProxyServer?4194304:1048576,ts:+new Date,key:H.token,cname:H.cname,sid:H.sid,detail:{6:H.stringUid,11:Se},uid:H.uid||0};return Jo(F(function*(){return yield Qh(ge,{data:nt,cancelToken:Z,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})}),Nt=>{if(0===Nt.code)return Jt.joinWebProxyAP(H.sid,{lts:Ne,sucess:1,apServerAddr:ge,turnServerAddrList:Nt.addresses.map(Dt=>Dt.ip).join(","),errorCode:null,eventType:H.cloudProxyServer}),!1;const Vt=Kk(Nt.code);throw new ye(pe.CAN_NOT_GET_GATEWAY_SERVER,Vt.desc,{retry:Vt.retry})},Nt=>Nt.code!==pe.OPERATION_ABORTED&&(Nt.code===pe.CAN_NOT_GET_GATEWAY_SERVER?(Jt.joinWebProxyAP(nt.sid,{lts:Ne,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:Nt.code,eventType:H.cloudProxyServer}),se.warning("[".concat(H.clientId,"] proxy ap server ").concat(ge," failed, message: ").concat(Nt.message,", retry: ").concat(Nt.data.retry)),En("warning",["AjaxAPI",H.clientId],"proxy ap server ".concat(ge," failed, message: ").concat(Nt.message,", retry: ").concat(Nt.data.retry)),Nt.data.retry):(Jt.joinWebProxyAP(nt.sid,{lts:Ne,sucess:0,apServerAddr:ge,turnServerAddrList:null,errorCode:Nt.code,eventType:H.cloudProxyServer}),!0)),le)}(M,n,o,s),allFailedhandler:()=>{throw se.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new ye(pe.CAN_NOT_GET_PROXY_SERVER)}});const R=I.addresses;if(!R||0===R.length)throw se.error("[".concat(n.clientId,"] can not get proxy server, empty proxy server list")),new ye(pe.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:R.map(M=>M.ip).map(wx),serverResponse:{tcpport:R[0].port||443,udpport:R[0].port||Ta.udpport,username:Ta.username,password:Ta.password}}}let f=null;f=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:S=>function(I,R,M,Q){const H=Date.now(),Z={command:"convergeAllocateEdge",sid:R.sid,appId:R.appId,token:R.token,uid:R.uid,cname:R.cname,ts:Math.floor(Date.now()/1e3),version:Wl,seq:0,requestId:1};return Jo(F(function*(){return{res:yield Qh(I,{data:{service_name:"webrtc_proxy",json_body:JSON.stringify(Z)},cancelToken:M,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:I}}),le=>{if(!le.res.json_body)throw se.debug("[".concat(R.clientId,"] Get proxy server failed: no json_body")),zt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: no json_body"),new ye(pe.UNEXPECTED_RESPONSE,JSON.stringify(le.res));const ge=JSON.parse(le.res.json_body);if(200!==ge.code)throw se.debug("[".concat(R.clientId,"] Get proxy server failed: response code [").concat(ge.code,"], reason [").concat(ge.reason,"]")),zt("error",["AjaxAPI",R.clientId],"requestProxyServerList","Get proxy server failed: response code [".concat(ge.code,"], reason [").concat(ge.reason,"]")),new ye(pe.UNEXPECTED_RESPONSE,JSON.stringify(le.res));return se.debug("[".concat(R.clientId,"] App return server length"),ge.servers.length),zt("debug",["AjaxAPI",R.clientId],"requestProxyServerList","",{length:ge.servers.length}),!1},le=>le.code!==pe.OPERATION_ABORTED&&(Jt.requestProxyAppCenter(Z.sid,{lts:H,succ:!1,APAddr:I,workerManagerList:null,ec:le.code,response:le.message}),!0),Q)}(S,n,o,s),allFailedhandler:()=>{throw se.error("[".concat(n.clientId,"] can not get proxy server after trying several times")),new ye(pe.CAN_NOT_GET_PROXY_SERVER)}});const A=JSON.parse(f.res.json_body).servers.map(XK);if("443only"===n.cloudProxyServer)return{addresses:A,serverResponse:{tcpport:443,udpport:Ta.udpport,username:Ta.username,password:Ta.password}};Jt.requestProxyAppCenter(n.sid,{lts:c,succ:!0,APAddr:f.url,workerManagerList:JSON.stringify(A),ec:null,response:JSON.stringify(f.res)}),c=Date.now();const _=A.map(S=>function(I,R,M,Q){const H=Date.now();let Z=I;I.startsWith("http")||(Z="https://".concat(I,":4000/v2/machine"));const le={command:"request",gatewayType:"http",appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sdkVersion:"2.3.1",sid:R.sid,seq:1,ts:Date.now(),requestId:3,clientRequest:{appId:R.appId,cname:R.cname,uid:(R.uid||"").toString(),sid:R.sid}};return Jo(F(function*(){return{res:yield Qh(Z,{data:le,cancelToken:M}),url:I}}),ge=>{if(!ge.res.serverResponse)throw new ye(pe.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},ge=>ge.code!==pe.OPERATION_ABORTED&&(Jt.requestProxyWorkerManager(le.sid,{lts:H,succ:!1,workerManagerAddr:I,ec:ge.code,response:ge.message}),!0),Q)}(S,n,o,s));let E=null;try{E=yield p1(_)}catch{throw se.error("[".concat(n.clientId,"] can not get worker manager after trying several times")),new ye(pe.CAN_NOT_GET_PROXY_SERVER)}return _.forEach(S=>S.cancel()),Jt.requestProxyWorkerManager(n.sid,{lts:c,succ:!0,workerManagerAddr:E.url,ec:null,response:JSON.stringify(E.res)}),{addresses:[E.url],serverResponse:E.res.serverResponse}}),LU.apply(this,arguments)}function BU(){return BU=F(function*(n,o,s){const c=Qt("CDS_AP").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map(A=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(A+"/api/v1"):"https://".concat(A,"/api/v1?action=config")).map(A=>function(_,E,S,I){const R=wi(),M={flag:64,cipher_method:0,features:{device:R.name,system:R.os,system_general:navigator.userAgent,vendor:E.appId,version:Wl,cname:E.cname,sid:E.sid,session_id:E.sid,detail:"",proxyServer:E.proxyServer}};return Jo(()=>Qh(_,{data:M,timeout:1e3,cancelToken:S,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,Q=>Q.code!==pe.OPERATION_ABORTED,I)}(A,n,o,s));let h=null,g=null,f={};try{h=yield p1(c)}catch(A){if(A.code===pe.OPERATION_ABORTED)throw A;g=A}if(c.forEach(A=>A.cancel()),Jt.reportApiInvoke(n.sid,{name:pr.REQUEST_CONFIG_DISTRIBUTE,options:{error:g,res:h}}).onSuccess(),h&&h.test_tags)try{f=function(A){if(!A.test_tags)return{};const _=A.test_tags,E=Object.keys(_),S={};return E.forEach(I=>{var R;const M=sg(R=I.slice(4)).call(R),Q=JSON.parse(_[I])[1];S[M]=Q}),S}(h)}catch{}return f}),BU.apply(this,arguments)}function v8(n,o,s,c){return FU.apply(this,arguments)}function FU(){return FU=F(function*(n,o,s,c){const h=Qt("PROXY_SERVER_TYPE3"),g=(M,Q)=>{let H=h;return Array.isArray(H)&&(H=Q%2==0?h[1]:h[0]),"https://".concat(H,"/ap/?url=").concat(M)};let f=null;const A=[],_=function(){var M=F(function*(){const Q=Qt("WEBCS_DOMAIN").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map((le,ge)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(le,"/api/v2/transpond/webrtc?v=2"):g("".concat(le,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:qk(),serviceIds:[ga.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?ga.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?ga.CLOUD_PROXY:ga.CLOUD_PROXY_FALLBACK]})),H=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:Q.map(le=>le.url)}),Z=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:Q,asyncMapHandler:le=>(se.debug("[".concat(n.clientId,"] Connect to choose_server:"),le.url),kH(le,n,o,s)),allFailedhandler:le=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:le},H),le[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},H),Z});return function(){return M.apply(this,arguments)}}(),E=function(){var M=F(function*(){if(yield Mc(1e3),null!==f)return f;const Q=Qt("WEBCS_DOMAIN_BACKUP_LIST").map((le,ge)=>({url:"disabled"===n.cloudProxyServer||"fallback"===n.cloudProxyServer?"https://".concat(le,"/api/v2/transpond/webrtc?v=2"):g("".concat(le,"/api/v2/transpond/webrtc?v=2"),ge),areaCode:qk(),serviceIds:[ga.CHOOSE_SERVER,"proxy5"===n.cloudProxyServer?ga.CLOUD_PROXY_5:"proxy3"===n.cloudProxyServer||"proxy4"===n.cloudProxyServer?ga.CLOUD_PROXY:ga.CLOUD_PROXY_FALLBACK]})),H=c.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:Q.map(le=>le.url)}),Z=yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:Q,asyncMapHandler:le=>(se.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),le.url),kH(le,n,o,s)),allFailedhandler:le=>{throw c.recordJoinChannelService({endTs:Date.now(),status:"error",errors:le},H),le[0]},promisesCollector:A});return c.recordJoinChannelService({endTs:Date.now(),status:"success"},H),Z});return function(){return M.apply(this,arguments)}}();let S,I,R;try{({gatewayInfo:S,proxyInfo:I,url:R}=yield p1([_(),E()]))}catch(M){throw M[0]}if(A.length&&A.forEach(M=>M.cancel&&"function"==typeof M.cancel&&M.cancel()),!S||!I)throw new ye(pe.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=R,"disabled"!==n.cloudProxyServer&&Array.isArray(h)&&R){const M=new Xj(R).host;h.includes(M)&&(n.proxyServer=M,se.setProxyServer(M),Jt.setProxyServer(M),lc(M))}return f={gatewayInfo:S,proxyInfo:yield OQ(I,S.uid)},f}),FU.apply(this,arguments)}function BH(n,o,s,c){return UU.apply(this,arguments)}function UU(){return UU=F(function*(n,o,s,c){const h=Qt("UAP_AP").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map(g=>o.proxyServer?"https://".concat(o.proxyServer,"/ap/?url=").concat(g+"/api/v1?action=uap"):"https://".concat(g,"/api/v1?action=uap"));return yield OH(h,n,o,s,c)}),UU.apply(this,arguments)}function eL(){return eL=F(function*(n,o,s){const c=Qt("UAP_AP").slice(0,Qt("AJAX_REQUEST_CONCURRENT")).map(h=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap")).map(h=>function(g,f,A,_){const E={command:"convergeAllocateEdge",sid:f.sid,appId:f.appId,token:f.token,ts:Date.now(),version:Wl,cname:f.cname,uid:f.uid.toString(),requestId:h8,seq:h8};h8+=1;const S={service_name:"tele_channel",json_body:JSON.stringify(E)};return Jo(F(function*(){const I=yield Qh(g,{data:S,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==I.code){const M=new ye(pe.UNEXPECTED_RESPONSE,"cross channel ap error, code"+I.code,{retry:!0});throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,M.toString()),M}const R=JSON.parse(I.json_body);if(200!==R.code){const M=new ye(pe.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(R.code,", reason: ").concat(R.reason));throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,M.toString()),M}if(!R.servers||0===R.servers.length){const M=new ye(pe.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw se.error(M.toString()),zt("error",["AjaxAPI"],"requestChannelMediaRelayWorkerManager",void 0,M.toString()),M}return{vid:R.vid,workerToken:R.workerToken,addressList:R.servers.map(M=>"wss://".concat(M.address.replace(/\./g,"-"),".").concat(Qt("WORKER_DOMAIN"),":").concat(M.wss))}}),void 0,I=>!!(I.code!==pe.OPERATION_ABORTED&&I.code!==pe.UNEXPECTED_RESPONSE||I.data&&I.data.retry),_)}(h,n,o,s));try{const h=yield p1(c);return c.forEach(g=>g.cancel()),h}catch(h){throw h[0]}}),eL.apply(this,arguments)}function A8(){return A8=F(function*(n,o,s){let c=null;const h=[],g=function(){var f=F(function*(A){const _=Qt(A?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return A&&(yield Mc(1e3),null!==c)?c:yield m1({fragementLength:Qt("FRAGEMENT_LENGTH"),referenceList:_,asyncMapHandler:E=>(se.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(A?"backup":""," choose_server:"),E),function(S,I,R,M){const[Q]=NH(I,[ga.CHOOSE_SERVER]);let H=_a.networkState;return Jo(F(function*(){H&&_a.networkState===dl.OFFLINE&&_a.onlineWaiter&&(yield Qn.race([_a.onlineWaiter,Mc(M&&M.maxRetryTimeout||wn.maxRetryTimeout)])),H=_a.networkState;const Z=yield Qh(S,{data:Q,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return PH(Z,S)}),()=>!1,Z=>Z.code!==pe.OPERATION_ABORTED&&(Z.code===pe.UPDATE_TICKET_FAILED?Z.data.retry:(se.warning("[".concat(I.clientId,"] update ticket network error, retry"),Z),En("warning",["AjaxAPI",I.clientId],"update ticket network error, retry, ".concat(Z)),!0)),M)}(E,n,o,s)),allFailedhandler:E=>{throw E[0]},promisesCollector:h})});return function(_){return f.apply(this,arguments)}}();try{return c=yield p1([g(!1),g(!0)]),h.length&&h.forEach(f=>f.cancel&&"function"==typeof f.cancel&&f.cancel()),c}catch(f){throw f[0]}}),A8.apply(this,arguments)}var VH;function y8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function jH(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?y8(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):y8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let QH=Qs("ConfigDistributeManager")(VH=class extends st{constructor(){super(),J(this,"configs",void 0),J(this,"joinInfo",void 0),J(this,"cancelToken",void 0),J(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),J(this,"interval",void 0),J(this,"mutex",new Ru("config-distribute")),J(this,"mutableParamsRead",!1)}startGetConfigDistribute(n,o){this.joinInfo=n,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Qt("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}awaitConfigDistributeComplete(){var n=this;return F(function*(){!n.mutex.isLocked||(yield n.mutex.lock())()})()}updateConfigDistribute(){var n=this;return F(function*(){if(n.mutableParamsRead||(n.mutableParamsRead=!0,Jt.reportApiInvoke(null,{options:void 0,name:pr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:cr.TRACER}).onSuccess(JSON.stringify(_V))),!n.joinInfo||!n.cancelToken||!n.retryConfig)return se.debug("[config-distribute] get config distribute interrupted have no joininfo"),void zt("debug",n,"updateConfigDistribute",void 0,"get config distribute interrupted have no joininfo");let o;const s=yield n.mutex.lock();try{o=yield function LH(n,o,s){return BU.apply(this,arguments)}(n.joinInfo,n.cancelToken,n.retryConfig),se.debug("[config-distribute] get config distribute",JSON.stringify(o)),zt("debug",n,"updateConfigDistribute",o),o.limit_bitrate&&n.handleBitrateLimit(o.limit_bitrate),n.cacheGlobalParameterConfig(o),n.configs=o}catch(c){const h=new ye(pe.NETWORK_RESPONSE_ERROR,c);se.warning("[config-distribute] ".concat(h.toString())),zt("warning",n,"updateConfigDistribute",void 0,c.toString())}finally{s()}})()}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(n){var o;(o=n)&&o.uplink&&o.id&&void 0!==o.uplink.max_bitrate&&void 0!==o.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==n.id&&this.emit(Oy.UPDATE_BITRATE_LIMIT,n):this.emit(Oy.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&jH({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(n){var o;const s=BF(o=Object.keys(n).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(o);for(let h=0;h<s.length;h++)for(let g=s.length-1;g>h;g--){const f=s[g];if("number"==typeof n[f].__priority){const A=n[f].__priority,_=s[g-1];if("number"==typeof n[_].__priority){if(!(A>n[_].__priority))continue;{const E=f;s[g]=s[g-1],s[g-1]=E}}else{const E=f;s[g]=s[g-1],s[g-1]=E}}}const c={};s.forEach(h=>{const g=n[h],f=g.__expires;Object.keys(g).forEach(A=>{"__priority"===A||"__expires"===A||Object.prototype.hasOwnProperty.call(c,A)||(c[A]=jH({value:g[A]},f&&{expires:f}))})});try{const h=JSON.stringify(c),g=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",g),se.debug("Caching global parameters ".concat(h)),zt("debug",this,"cacheGlobalParameterConfig",h)}catch(h){se.error("Error caching global parameters:",h.message),zt("error",this,"cacheGlobalParameterConfig",void 0,h.message)}}})||VH;function E8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function $k(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?E8(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):E8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class HH extends st{constructor(o,s,c,h){super(),J(this,"spec",void 0),J(this,"token",void 0),J(this,"websocket",void 0),J(this,"pingpongTimer",void 0),J(this,"reconnectMode","retry"),J(this,"serviceMode",void 0),J(this,"reqId",0),J(this,"commandReqId",0),J(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),J(this,"handleWebSocketMessage",g=>{if(!g.data)return;const f=JSON.parse(g.data);f.requestId?this.emit("@".concat(f.requestId,"-").concat(f.sid),f):this.serviceMode===ms.INJECT?this.emit(wu.INJECT_STREAM_STATUS,f):(Jt.workerEvent(this.spec.sid,{actionType:"status",serverCode:f.code,workerType:this.serviceMode===ms.TRANSCODE?1:2}),this.emit(wu.PUBLISH_STREAM_STATUS,f))}),this.spec=s,this.token=o,this.serviceMode=h,this.websocket=new rS("live-streaming",c),this.websocket.on(Pr.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Pr.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Pr.REQUEST_NEW_URLS,(g,f)=>{Hh(this,wu.REQUEST_NEW_ADDRESS).then(g).catch(f)}),this.websocket.on(Pr.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(o){return this.websocket.init(o)}request(o,s,c,h){var g=this;return F(function*(){g.reqId+=1,"request"===o&&(g.commandReqId+=1);const f=g.commandReqId,A=g.reqId;if(!A||!g.websocket)throw new ye(pe.UNEXPECTED_ERROR);const _=$k({command:o,sdkVersion:"4.12.1"===Wl?"0.0.1":Wl,seq:A,requestId:A,allocate:c,cname:g.spec.cname,appId:g.spec.appId,sid:g.spec.sid,uid:g.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},s);if("closed"===g.websocket.state)throw new ye(pe.WS_DISCONNECT);const E=()=>new Qn((M,Q)=>{g.websocket.once(Pr.CLOSED,()=>Q(new ye(pe.WS_ABORT))),g.websocket.once(Pr.CONNECTED,M)});"connected"!==g.websocket.state&&(yield E()),_.clientRequest&&(_.clientRequest.workerToken=g.token);const S=new Qn((M,Q)=>{const H=()=>{Q(new ye(pe.WS_ABORT))};g.websocket.once(Pr.RECONNECTING,H),g.websocket.once(Pr.CLOSED,H),g.once("@".concat(A,"-").concat(g.spec.sid),Z=>{M(Z)})});h&&Jt.workerEvent(g.spec.sid,$k($k({},h),{},{requestId:f,actionType:"request",payload:JSON.stringify(s.clientRequest),serverCode:0,code:0}));const I=Date.now();g.websocket.sendMessage(_);let R=null;try{R=yield S}catch(M){if("closed"===g.websocket.state)throw M;return yield E(),yield g.request(o,s,c)}return h&&Jt.workerEvent(g.spec.sid,$k($k({},h),{},{requestId:f,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:200===R.code,responseTime:Date.now()-I})),200!==R.code&&g.handleResponseError(R),R})()}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const o="4.12.1"===Wl?"0.0.1":Wl;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:o,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(o){switch(o.code){case ko.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void se.warning("live stream response already exists stream");case ko.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case ko.LIVE_STREAM_RESPONSE_BAD_STREAM:case ko.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new ye(pe.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:o.code}).throw();case ko.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ko.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new ye(pe.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:o.code}).throw();case ko.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const s=new ye(pe.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(wu.WARNING,s,o.serverResponse.url)}case ko.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const s=new ye(pe.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(wu.WARNING,s,o.serverResponse.url)}case ko.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ko.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new ye(pe.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:o.code}).throw();case ko.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const s=new ye(pe.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(wu.WARNING,s,o.serverResponse.url)}case ko.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code}).throw();case ko.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case ko.LIVE_STREAM_RESPONSE_WORKER_LOST:case ko.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;throw new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ko.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===o.serverResponse.command||"UninjectStream"===o.serverResponse.command)return;if("UpdateTranscoding"===o.serverResponse.command||"ControlStream"===o.serverResponse.command)return new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:o.code}).throw();throw new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ko.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new ye(pe.LIVE_STREAMING_CDN_ERROR,"",{code:o.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Z3)},6e3)}}function b8(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Ou(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?b8(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):b8(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class GH extends st{constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wn;super(),J(this,"onLiveStreamWarning",void 0),J(this,"onLiveStreamError",void 0),J(this,"onInjectStatusChange",void 0),J(this,"spec",void 0),J(this,"retryTimeout",1e4),J(this,"connection",void 0),J(this,"httpRetryConfig",void 0),J(this,"wsRetryConfig",void 0),J(this,"streamingTasks",new Map),J(this,"isStartingStreamingTask",!1),J(this,"taskMutex",new Ru("live-streaming")),J(this,"cancelToken",tt.CancelToken.source()),J(this,"transcodingConfig",void 0),J(this,"injectConfig",Ou({},xM)),J(this,"injectLoopTimes",0),J(this,"uapResponse",void 0),J(this,"lastTaskId",1),J(this,"statusError",new Map),this.spec=o,this.httpRetryConfig=c,this.wsRetryConfig=s}setTranscodingConfig(o){var s=this;return F(function*(){const c=Ou(Ou({},ok),o);var A;66!==c.videoCodecProfile&&77!==c.videoCodecProfile&&100!==c.videoCodecProfile&&(se.debug("[".concat(s.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(c.videoCodecProfile," -> 100")),c.videoCodecProfile=100),c.transcodingUsers||(c.transcodingUsers=c.userConfigs),c.transcodingUsers&&(c.transcodingUsers=c.transcodingUsers.map(A=>Ou(Ou(Ou({},I7),A),{},{zOrder:A.zOrder?A.zOrder+1:1}))),ho((A=c).width)||Jr(A.width,"config.width",0,1e4),ho(A.height)||Jr(A.height,"config.height",0,1e4),ho(A.videoBitrate)||Jr(A.videoBitrate,"config.videoBitrate",1,1e6),ho(A.videoFrameRate)||Jr(A.videoFrameRate,"config.videoFrameRate"),ho(A.lowLatency)||Of(A.lowLatency,"config.lowLatency"),ho(A.audioSampleRate)||Qa(A.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),ho(A.audioBitrate)||Jr(A.audioBitrate,"config.audioBitrate",1,128),ho(A.audioChannels)||Qa(A.audioChannels,"config.audioChannels",[1,2,3,4,5]),ho(A.videoGop)||Jr(A.videoGop,"config.videoGop"),ho(A.videoCodecProfile)||Qa(A.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),ho(A.userCount)||Jr(A.userCount,"config.userCount",0,17),ho(A.backgroundColor)||Jr(A.backgroundColor,"config.backgroundColor",0,16777215),ho(A.userConfigExtraInfo)||Jc(A.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),A.transcodingUsers&&!ho(A.transcodingUsers)&&(Jw(A.transcodingUsers,"config.transcodingUsers"),A.transcodingUsers.forEach((_,E)=>{DM(_.uid),ho(_.x)||Jr(_.x,"transcodingUser[".concat(E,"].x"),0,1e4),ho(_.y)||Jr(_.y,"transcodingUser[".concat(E,"].y"),0,1e4),ho(_.width)||Jr(_.width,"transcodingUser[".concat(E,"].width"),0,1e4),ho(_.height)||Jr(_.height,"transcodingUser[".concat(E,"].height"),0,1e4),ho(_.zOrder)||Jr(_.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),ho(_.alpha)||Jr(_.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),ho(A.watermark)||ik(A.watermark,"watermark"),ho(A.backgroundImage)||ik(A.backgroundImage,"backgroundImage"),A.images&&!ho(A.images)&&(Jw(A.images,"config.images"),A.images.forEach((_,E)=>{ik(_,"images[".concat(E,"]"))}));const h=[];c.images&&h.push(...c.images.map(A=>Ou(Ou(Ou({},HF),A),{},{zOrder:255}))),c.backgroundImage&&(h.push(Ou(Ou(Ou({},HF),c.backgroundImage),{},{zOrder:0})),delete c.backgroundImage),c.watermark&&(h.push(Ou(Ou(Ou({},HF),c.watermark),{},{zOrder:255})),delete c.watermark),c.images=h,c.transcodingUsers&&(c.userConfigs=c.transcodingUsers.map(A=>Ou({},A)),c.userCount=c.transcodingUsers.length,delete c.transcodingUsers);const g=(c.userConfigs||[]).map(A=>"number"==typeof A.uid?Qn.resolve(A.uid):Xx(A.uid,s.spec,s.cancelToken.token,s.httpRetryConfig));if((yield Qn.all(g)).forEach((A,_)=>{c.userConfigs&&c.userConfigs[_]&&(c.userConfigs[_].uid=A)}),s.transcodingConfig=c,s.connection)try{var f;const A=yield s.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:s.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(ov(f=s.streamingTasks).call(f)).map(_=>_.taskId).join("#")});se.debug("[".concat(s.spec.clientId,"] update live transcoding config success, code: ").concat(A.code,", config:"),JSON.stringify(s.transcodingConfig))}catch(A){if(!A.data||!A.data.retry)throw A;A.data.changeAddress&&s.connection.tryNextAddress(),s.streamingTasks.forEach(_=>{se.warning("[".concat(s.spec.clientId,"] live streaming receive error"),A.toString(),"try to republish",_.url),s.startLiveStreamingTask(_.url,_.mode,A).then(()=>{se.debug("[".concat(s.spec.clientId,"] live streaming republish ").concat(_.url," success"))}).catch(E=>{se.error("[".concat(s.spec.clientId,"] live streaming republish failed"),_.url,E.toString()),s.onLiveStreamError&&s.onLiveStreamError(_.url,E)})})}})()}setInjectStreamConfig(o,s){this.injectConfig=Object.assign({},this.injectConfig,o),this.injectLoopTimes=s}startLiveStreamingTask(o,s,c){var h=this;return F(function*(){var g;if(Array.from(ov(g=h.streamingTasks).call(g)).find(E=>E.mode===ms.INJECT)&&s===ms.INJECT)return new ye(pe.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!h.transcodingConfig&&s===ms.TRANSCODE)throw new ye(pe.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let f={command:"PublishStream",ts:Date.now(),url:o,uid:h.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};se.debug("[".concat(h.spec.clientId,"] start live streaming ").concat(o,", mode: ").concat(s));const A=yield h.taskMutex.lock();if(!h.connection&&c)return void A();if(h.streamingTasks.get(o)&&!c)return A(),new ye(pe.LIVE_STREAMING_TASK_CONFLICT).throw();try{h.connection||(h.connection=yield h.connect(s))}catch(E){throw A(),E}switch(s){case ms.TRANSCODE:f.transcodingConfig=Ou({},h.transcodingConfig);break;case ms.RAW:break;case ms.INJECT:f={cname:h.spec.cname,command:"InjectStream",sid:h.spec.sid,transcodingConfig:h.injectConfig,ts:Date.now(),url:o,loopTimes:h.injectLoopTimes}}h.uapResponse&&h.uapResponse.vid&&(f.vid=h.uapResponse.vid),h.isStartingStreamingTask=!0;const _=h.lastTaskId++;try{const E=new Qn((I,R)=>{Mc(h.retryTimeout).then(()=>{if(c)return R(c);const M=h.statusError.get(o);return M?(h.statusError.delete(o),R(M)):void 0})}),S=yield Qn.race([h.connection.request("request",{clientRequest:f},!0,{url:o,command:"PublishStream",workerType:s===ms.TRANSCODE?1:2,requestByUser:!c,tid:_.toString()}),E]);h.isStartingStreamingTask=!1,se.debug("[".concat(h.spec.clientId,"] live streaming started, code: ").concat(S.code)),h.streamingTasks.set(o,{clientRequest:f,mode:s,url:o,taskId:_}),A()}catch(E){if(A(),h.isStartingStreamingTask=!1,!E.data||!E.data.retry||c)throw E;return E.data.changeAddress?(h.connection.tryNextAddress(),yield h.startLiveStreamingTask(o,s,E)):yield h.startLiveStreamingTask(o,s,E)}})()}stopLiveStreamingTask(o){return new Qn((s,c)=>{const h=this.streamingTasks.get(o);if(!h||!this.connection)return new ye(pe.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const g=h.mode;h.abortTask=()=>{se.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(o),s()},this.connection.request("request",{clientRequest:{command:g===ms.INJECT?"UninjectStream":"UnpublishStream",url:h.url}},!1,{url:o,command:"UnPublishStream",workerType:g===ms.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(f=>{se.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(f.code)),this.streamingTasks.delete(o),0===this.streamingTasks.size&&g!==ms.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),s(),g===ms.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,o)}).catch(c)})}controlInjectStream(o,s,c,h){var g=this;return F(function*(){const f=g.streamingTasks.get(o);if(!f||!g.connection||f.mode!==ms.INJECT)throw new ye(pe.INVALID_OPERATION,"can not find inject stream task to control");return(yield g.connection.request("request",{clientRequest:{command:"ControlStream",url:o,control:s,audioVolume:c,position:h}})).serverResponse})()}resetAllTask(){var o;const s=Array.from(ov(o=this.streamingTasks).call(o));this.terminate();for(const c of s)this.startLiveStreamingTask(c.url,c.mode).catch(h=>{this.onLiveStreamError&&this.onLiveStreamError(c.url,h)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=tt.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}connect(o){var s=this;return F(function*(){if(s.connection)throw new ye(pe.UNEXPECTED_ERROR,"live streaming connection has already connected");const c=yield Hh(s,pg.REQUEST_WORKER_MANAGER_LIST,o);return s.uapResponse=c,s.connection=new HH(c.workerToken,s.spec,s.wsRetryConfig,o),s.connection.on(wu.WARNING,(h,g)=>s.onLiveStreamWarning&&s.onLiveStreamWarning(g,h)),s.connection.on(wu.PUBLISH_STREAM_STATUS,h=>s.handlePublishStreamServer(h)),s.connection.on(wu.INJECT_STREAM_STATUS,h=>s.handleInjectStreamServerStatus(h)),s.connection.on(wu.REQUEST_NEW_ADDRESS,(h,g)=>{if(!s.connection)return g(new ye(pe.UNEXPECTED_ERROR,"can not get new live streaming address list"));Hh(s,pg.REQUEST_WORKER_MANAGER_LIST,o).then(f=>{s.uapResponse=f,h(f.addressList)}).catch(g)}),yield s.connection.init(c.addressList),s.connection})()}handlePublishStreamServer(o){const s=o.serverStatus&&o.serverStatus.url||"empty_url",c=this.streamingTasks.get(s),h=o.reason;switch(o.code){case ko.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ko.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const f=new ye(pe.LIVE_STREAMING_CDN_ERROR,"",{code:o.code});if(c)return se.error(f.toString()),this.onLiveStreamError&&this.onLiveStreamError(s,f);if(!this.isStartingStreamingTask)return;this.statusError.set(s,f)}case ko.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const f=new ye(pe.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,h);return this.onLiveStreamWarning&&this.onLiveStreamWarning(s,f)}case ko.LIVE_STREAM_RESPONSE_WORKER_LOST:case ko.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var g;if(!this.connection)return;this.connection.tryNextAddress();const f=Array.from(ov(g=this.streamingTasks).call(g));for(const A of f)A.abortTask?A.abortTask():(se.warning("[".concat(this.spec.clientId,"] publish stream status code"),o.code,"try to republish",A.url),this.startLiveStreamingTask(A.url,A.mode,new ye(pe.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:o.code})).then(()=>{se.debug("[".concat(this.spec.clientId,"] republish live stream success"),A.url)}).catch(_=>{se.error(_.toString()),this.onLiveStreamError&&this.onLiveStreamError(A.url,_)}));return}}}handleInjectStreamServerStatus(o){const s=Number(o.uid),c=o.serverStatus&&o.serverStatus.url;switch(o.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_START_SUCCESS,s,c));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,s,c),void this.streamingTasks.delete(c);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_START_UNAUTHORIZED,s,c),void this.streamingTasks.delete(c);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_BROKEN,s,c),void this.streamingTasks.delete(c);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Ry.INJECT_STREAM_STATUS_START_TIMEOUT,s,c),void this.streamingTasks.delete(c);default:return void se.debug("inject stream server status",o)}}hasUrl(o){return this.streamingTasks.has(o)}}class VU{constructor(){J(this,"destChannelMediaInfos",new Map),J(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(o){Xw(o),this.srcChannelMediaInfo=o}addDestChannelInfo(o){Xw(o),this.destChannelMediaInfos.set(o.channelName,o)}removeDestChannelInfo(o){OM(o),this.destChannelMediaInfos.delete(o)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function S8(n){if(!(n instanceof VU))return new ye(pe.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const o=n.getSrcChannelMediaInfo(),s=n.getDestChannelMediaInfo();return o?0===s.size?new ye(pe.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new ye(pe.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class WH extends st{constructor(o,s,c){super(),J(this,"ws",void 0),J(this,"requestId",1),J(this,"heartBeatTimer",void 0),J(this,"joinInfo",void 0),J(this,"clientId",void 0),J(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),J(this,"onClose",h=>{this.emit("close"),this.dispose()}),J(this,"onMessage",h=>{const g=JSON.parse(h.data);if(!g||"serverResponse"!==g.command||!g.requestId)return g&&"serverStatus"===g.command&&g.serverStatus&&g.serverStatus.command?(this.emit("status",g.serverStatus),void this.emit(g.serverStatus.command,g.serverStatus)):void 0;this.emit("req_".concat(g.requestId),g)}),this.joinInfo=o,this.clientId=s,this.ws=new rS("cross-channel-".concat(this.clientId),c),this.ws.on(Pr.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Pr.CONNECTED,this.onOpen),this.ws.on(Pr.ON_MESSAGE,this.onMessage),this.ws.on(Pr.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(o){const s=this.requestId++;return o.requestId=s,o.seq=s,this.ws.sendMessage(o),s}waitStatus(o){return new Qn((s,c)=>{const h=window.setTimeout(()=>{c(new ye(pe.TIMEOUT,"wait status timeout, status: ".concat(o)))},5e3);this.once(o,g=>{window.clearTimeout(h),g.state&&0!==g.state?c(new ye(pe.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(o))):s(void 0)}),this.once("dispose",()=>{window.clearTimeout(h),c(new ye(pe.WS_ABORT))})})}request(o){var s=this;return F(function*(){if("closed"===s.ws.state)throw new ye(pe.WS_DISCONNECT);"connected"!==s.ws.state&&(yield new Qn((A,_)=>{s.ws.once(Pr.CLOSED,()=>_(new ye(pe.WS_ABORT))),s.ws.once(Pr.CONNECTED,A)}));const h=s.sendMessage(o),g=new Qn((A,_)=>{const E=()=>{_(new ye(pe.WS_ABORT))};s.ws.once(Pr.RECONNECTING,E),s.ws.once(Pr.CLOSED,E),s.once("req_".concat(h),A),Mc(3e3).then(()=>{s.removeAllListeners("req_".concat(h)),s.ws.off(Pr.RECONNECTING,E),s.ws.off(Pr.CLOSED,E),_(new ye(pe.TIMEOUT,"cross channel ws request timeout"))})}),f=yield g;if(!f||200!==f.code)throw new ye(pe.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(f)));return f})()}connect(o){var s=this;return F(function*(){s.ws.removeAllListeners(Pr.REQUEST_NEW_URLS),s.ws.on(Pr.REQUEST_NEW_URLS,c=>{c(o)}),yield s.ws.init(o)})()}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(o){const s=this.requestId++;return o.requestId=s,this.ws.sendMessage(o),s}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class tL extends st{set state(o){o!==this._state&&(o!==hc.RELAY_STATE_FAILURE&&(this.errorCode=Z_.RELAY_OK),this.emit("state",o,this.errorCode),this._state=o)}get state(){return this._state}constructor(o,s,c,h){var g;super(),g=this,J(this,"joinInfo",void 0),J(this,"clientId",void 0),J(this,"cancelToken",tt.CancelToken.source()),J(this,"workerToken",void 0),J(this,"requestId",0),J(this,"signal",void 0),J(this,"prevChannelMediaConfig",void 0),J(this,"httpRetryConfig",void 0),J(this,"_state",hc.RELAY_STATE_IDLE),J(this,"errorCode",Z_.RELAY_OK),J(this,"onStatus",f=>{se.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(f))),f&&f.command&&("onAudioPacketReceived"===f.command&&this.emit("event",Df.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===f.command&&this.emit("event",Df.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===f.command&&(this.errorCode=Z_.SRC_TOKEN_EXPIRED,this.state=hc.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===f.command&&(this.errorCode=Z_.DEST_TOKEN_EXPIRED,this.state=hc.RELAY_STATE_FAILURE))}),J(this,"onReconnect",F(function*(){se.debug("[".concat(g.clientId,"] ChannelMediaSocket disconnect, reconnecting")),g.emit("event",Df.NETWORK_DISCONNECTED),g.state=hc.RELAY_STATE_IDLE,g.prevChannelMediaConfig&&g.sendStartRelayMessage(g.prevChannelMediaConfig).catch(f=>{g.state!==hc.RELAY_STATE_IDLE&&(se.error("auto restart channel media relay failed",f.toString()),g.errorCode=Z_.SERVER_CONNECTION_LOST,g.state=hc.RELAY_STATE_FAILURE)})})),this.joinInfo=o,this.clientId=s,this.signal=new WH(this.joinInfo,this.clientId,c),this.httpRetryConfig=h}startChannelMediaRelay(o){var s=this;return F(function*(){if(s.state!==hc.RELAY_STATE_IDLE)throw new ye(pe.INVALID_OPERATION);s.state=hc.RELAY_STATE_CONNECTING,yield s.connect(),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: connect success"));try{yield s.sendStartRelayMessage(o)}catch(c){throw c.data&&c.data.serverResponse&&"SetSourceChannel"===c.data.serverResponse.command?new ye(pe.CROSS_CHANNEL_FAILED_JOIN_SRC):c.data&&c.data.serverResponse&&"SetDestChannelStatus"===c.serverResponse.command?new ye(pe.CROSS_CHANNEL_FAILED_JOIN_DEST):c.data&&c.data.serverResponse&&"StartPacketTransfer"===c.serverResponse.command?new ye(pe.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):c}s.prevChannelMediaConfig=o})()}updateChannelMediaRelay(o){var s=this;return F(function*(){if(s.state!==hc.RELAY_STATE_RUNNING)throw new ye(pe.INVALID_OPERATION);yield s.sendUpdateMessage(o),s.prevChannelMediaConfig=o})()}stopChannelMediaRelay(){var o=this;return F(function*(){yield o.sendStopRelayMessage(),se.debug("[".concat(o.clientId,"] stopChannelMediaRelay: send stop message success")),o.state=hc.RELAY_STATE_IDLE,o.dispose()})()}dispose(){se.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=tt.CancelToken.source(),this.state=hc.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}connect(){var o=this;return F(function*(){const s=yield function FH(n,o,s){return eL.apply(this,arguments)}(o.joinInfo,o.cancelToken.token,o.httpRetryConfig);o.workerToken=s.workerToken,yield o.signal.connect(s.addressList),o.emit("event",Df.NETWORK_CONNECTED),o.signal.on("status",o.onStatus),o.signal.on("reconnecting",o.onReconnect)})()}sendStartRelayMessage(o){var s=this;return F(function*(){const c=s.genMessage(dc.StopPacketTransfer);yield s.signal.request(c),yield s.signal.waitStatus("Normal Quit"),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const h=s.genMessage(dc.SetSdkProfile,o);yield s.signal.request(h),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const g=s.genMessage(dc.SetSourceChannel,o);yield s.signal.request(g),yield s.signal.waitStatus("SetSourceChannelStatus"),s.emit("event",Df.PACKET_JOINED_SRC_CHANNEL),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const f=s.genMessage(dc.SetSourceUserId,o);yield s.signal.request(f),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const A=s.genMessage(dc.SetDestChannel,o);yield s.signal.request(A),yield s.signal.waitStatus("SetDestChannelStatus"),s.emit("event",Df.PACKET_JOINED_DEST_CHANNEL),se.debug("[".concat(s.clientId,"] startChannelMediaRelay: SetDestChannel success"));const _=s.genMessage(dc.StartPacketTransfer,o);yield s.signal.request(_),s.emit("event",Df.PACKET_SENT_TO_DEST_CHANNEL),s.state=hc.RELAY_STATE_RUNNING,se.debug("[".concat(s.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))})()}sendUpdateMessage(o){var s=this;return F(function*(){const c=s.genMessage(dc.UpdateDestChannel,o);yield s.signal.request(c),s.emit("event",Df.PACKET_UPDATE_DEST_CHANNEL),se.debug("[".concat(s.clientId,"] sendUpdateMessage: UpdateDestChannel success"))})()}sendStopRelayMessage(){var o=this;return F(function*(){const s=o.genMessage(dc.StopPacketTransfer);yield o.signal.request(s),se.debug("[".concat(o.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))})()}genMessage(o,s){const c=[],h=[],g=[];this.requestId+=1;const f={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Wl,sid:this.joinInfo.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.12.1"===f.sdkVersion&&(f.sdkVersion="0.0.1");let A=null,_=null;switch(o){case dc.SetSdkProfile:return f.clientRequest={command:"SetSdkProfile",type:"multi_channel"},f;case dc.SetSourceChannel:if(_=s&&s.getSrcChannelMediaInfo(),!_)throw new ye(pe.UNEXPECTED_ERROR,"can not find source config");return f.clientRequest={command:"SetSourceChannel",uid:"0",channelName:_.channelName,token:_.token||this.joinInfo.appId},f;case dc.SetSourceUserId:if(_=s&&s.getSrcChannelMediaInfo(),!_)throw new ye(pe.UNEXPECTED_ERROR,"can not find source config");return f.clientRequest={command:"SetSourceUserId",uid:_.uid+""},f;case dc.SetDestChannel:if(A=s&&s.getDestChannelMediaInfo(),!A)throw new ye(pe.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(E=>{c.push(E.channelName),h.push(E.uid+""),g.push(E.token||this.joinInfo.appId)}),f.clientRequest={command:"SetDestChannel",channelName:c,uid:h,token:g},f;case dc.StartPacketTransfer:return f.clientRequest={command:"StartPacketTransfer"},f;case dc.Reconnect:return f.clientRequest={command:"Reconnect"},f;case dc.StopPacketTransfer:return f.clientRequest={command:"StopPacketTransfer"},f;case dc.UpdateDestChannel:if(A=s&&s.getDestChannelMediaInfo(),!A)throw new ye(pe.UNEXPECTED_ERROR,"can not find dest config");return A.forEach(E=>{c.push(E.channelName),h.push(E.uid+""),g.push(E.token||this.joinInfo.appId)}),f.clientRequest={command:"UpdateDestChannel",channelName:c,uid:h,token:g},f}return f}}const jU=n=>{const o=document.createElement("canvas");return o.width=2,o.height=2,new Qn((s,c)=>{o.toBlob(function(){var h=F(function*(g){if(o.remove(),g){const f=yield w1(g);s({buffer:f,width:o.width,height:o.height})}else c(new ye(pe.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(g){return h.apply(this,arguments)}}(),n,1)})},w1=function(){var n=F(function*(o){const s=yield o.arrayBuffer();return new Uint8Array(s)});return function(s){return n.apply(this,arguments)}}();var QU;let C8=Qs("AgoraRTCPlayer","trackId")(QU=class{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(se.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),js("debug",["HTMLVideoElement",this.trackId],"statusChange","".concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}constructor(n){J(this,"trackId",void 0),J(this,"config",void 0),J(this,"onFirstVideoFrameDecoded",void 0),J(this,"freezeTimeCounterList",[]),J(this,"timeUpdatedCount",0),J(this,"freezeTime",0),J(this,"playbackTime",0),J(this,"lastTimeUpdatedTime",0),J(this,"videoTrack",void 0),J(this,"container",void 0),J(this,"videoElement",void 0),J(this,"videoElementCheckInterval",void 0),J(this,"_videoElementStatus",Ra.NONE),J(this,"slot",void 0),J(this,"isGettingVideoDimensions",!1),J(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Ra.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Ra.CANPLAY;break;case"stalled":this.videoElementStatus=Ra.STALLED;break;case"suspend":this.videoElementStatus=Ra.SUSPEND;break;case"pause":this.videoElementStatus=Ra.PAUSED,!qc()&&!ag()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),En("debug",this,"video element paused, auto resume"),this.videoElement.play());break;case"waiting":this.videoElementStatus=Ra.WAITING;break;case"abort":this.videoElementStatus=Ra.ABORT;break;case"ended":this.videoElementStatus=Ra.ENDED;break;case"emptied":this.videoElementStatus=Ra.EMPTIED;break;case"timeupdate":{const s=Date.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const c=s-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=s,c>500&&(this.freezeTime+=c),this.playbackTime+=c;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}}),J(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return se.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),zt("debug",this,"startGetVideoDimensions",{videoWidth:this.videoElement.videoWidth,videoHeight:this.videoElement.videoHeight}),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),J(this,"autoResumeAfterInterruption",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Xr.curState&&(Sy()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):EM()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):yM()&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),J(this,"autoResumeAfterInterruptionOnIOS15",()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Sy()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.2")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):EM()?(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):yM()&&(se.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()))}),this.slot=n.element,this.trackId=n.trackId,this.updateConfig(n),Xr.on(va.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Xr.on(va.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}updateConfig(n){this.config=n,this.trackId=n.trackId;const o=n.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){if(this.videoElement){const o=this.videoElement.play();o&&o.catch&&o.catch(c=>{n&&Jt.autoplayFailed(n,"video",c.message,this.trackId),zt("warning",this,"play",c.toString(),"error"),"NotAllowedError"===c.name?(se.warning("detected video element autoplay failed",c),this.handleAutoPlayFailed()):se.warning("[".concat(this.trackId,"] play warning: "),c)});const s=wi();if(("Safari"===s.name&&15===Number(s.version)||Eu())&&o&&o.then&&o.catch){const c=()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(c).catch(c)}}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const o=n.getContext("2d");if(!o)return se.error("create canvas context failed!"),zt("error",this,"getCurrentFrame","create canvas context failed!","error"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,n.width,n.height);const s=o.getImageData(0,0,n.width,n.height);return n.remove(),s}getCurrentFrameToUint8Array(n){var o=arguments,s=this;return F(function*(){let c=o.length>1&&void 0!==o[1]?o[1]:1;if(!s.videoElement)return yield jU(n);const h=document.createElement("canvas");h.width=s.videoElement.videoWidth,h.height=s.videoElement.videoHeight;const g=h.getContext("2d");return g?(g.drawImage(s.videoElement,0,0,h.width,h.height),new Qn((f,A)=>{h.toBlob(function(){var _=F(function*(E){if(h.remove(),E){const S=yield w1(E);f({buffer:S,width:h.width,height:h.height})}else A(new ye(pe.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))});return function(E){return _.apply(this,arguments)}}(),n,c<0?.1:c>1?1:c)})):yield jU(n)})()}destroy(){if(Xr.off(va.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Xr.off(va.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Ra.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Ra.ERROR,this.container&&this.container.appendChild(this.videoElement),HU.forEach(s=>{this.videoElement&&this.videoElement.addEventListener(s,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Ra.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const n=wi();"Safari"===n.name&&15===Number(n.version)||Eu()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.videoElement.style.objectFit=this.config.fit?this.config.fit:"cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,hs()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,hs()&&this.videoElement.load());const o=this.videoElement.play();void 0!==o&&o.catch(s=>{se.debug("[".concat(this.trackId,"] playback interrupted"),s.toString()),En("debug",this,"play back interrupted: ".concat(s.toString()))})}removeVideoElement(){if(this.videoElement){HU.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=void 0,this.videoElementStatus=Ra.NONE}}handleAutoPlayFailed(){const n=wi();if(this.videoElement){const o=s=>{s.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{se.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed.")),En("debug",this,"video element autoplay resumed")}).catch(c=>{se.error(c)}),"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ii.WECHAT?(document.body.removeEventListener("touchstart",o,!0),document.body.removeEventListener("mousedown",o,!0)):document.body.removeEventListener("click",o,!0))};"Android"!==n.os||"Chrome"!==n.name&&n.name!==Ii.WECHAT?(document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("mousedown",o,!0)):document.body.addEventListener("click",o,!0),z5()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}})||QU;const HU=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];var I8,GU={exports:{}};function iS(n,o,s){const c=n.createShader(s);if(!c)return new ye(pe.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(n.shaderSource(c,o),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){const h=n.getShaderInfoLog(c);return n.deleteShader(c),new ye(pe.WEBGL_INTERNAL_ERROR,"error compiling shader:"+h).throw()}return c}(function(n,o){n.exports=(()=>{var s={3476:(f,A,_)=>{f.exports=_(7460)},4341:(f,A,_)=>{f.exports=_(3685)},3536:(f,A,_)=>{var E=_(1910);f.exports=E},8171:(f,A,_)=>{_(6450);var E=_(4058).Object,S=f.exports=function(I,R,M){return E.defineProperty(I,R,M)};E.defineProperty.sham&&(S.sham=!0)},2956:(f,A,_)=>{_(7627),_(6274),_(5967),_(8881),_(4560),_(7206),_(4349),_(7971);var E=_(4058);f.exports=E.Promise},3685:(f,A,_)=>{var E=_(3536);f.exports=E},4883:(f,A,_)=>{var E=_(1899),S=_(7475),I=_(9826),R=E.TypeError;f.exports=function(M){if(S(M))return M;throw R(I(M)+" is not a function")}},174:(f,A,_)=>{var E=_(1899),S=_(4284),I=_(9826),R=E.TypeError;f.exports=function(M){if(S(M))return M;throw R(I(M)+" is not a constructor")}},1851:(f,A,_)=>{var E=_(1899),S=_(7475),I=E.String,R=E.TypeError;f.exports=function(M){if("object"==typeof M||S(M))return M;throw R("Can't set "+I(M)+" as a prototype")}},8479:f=>{f.exports=function(){}},5743:(f,A,_)=>{var E=_(1899),S=_(7046),I=E.TypeError;f.exports=function(R,M){if(S(M,R))return R;throw I("Incorrect invocation")}},6059:(f,A,_)=>{var E=_(1899),S=_(941),I=E.String,R=E.TypeError;f.exports=function(M){if(S(M))return M;throw R(I(M)+" is not an object")}},1692:(f,A,_)=>{var E=_(4529),S=_(9413),I=_(623),R=function(M){return function(Q,H,Z){var le,ge=E(Q),Se=I(ge),Ne=S(Z,Se);if(M&&H!=H){for(;Se>Ne;)if((le=ge[Ne++])!=le)return!0}else for(;Se>Ne;Ne++)if((M||Ne in ge)&&ge[Ne]===H)return M||Ne||0;return!M&&-1}};f.exports={includes:R(!0),indexOf:R(!1)}},3765:(f,A,_)=>{var E=_(5329);f.exports=E([].slice)},1385:(f,A,_)=>{var E=_(9813)("iterator"),S=!1;try{var I=0,R={next:function(){return{done:!!I++}},return:function(){S=!0}};R[E]=function(){return this},Array.from(R,function(){throw 2})}catch{}f.exports=function(M,Q){if(!Q&&!S)return!1;var H=!1;try{var Z={};Z[E]=function(){return{next:function(){return{done:H=!0}}}},M(Z)}catch{}return H}},2532:(f,A,_)=>{var E=_(5329),S=E({}.toString),I=E("".slice);f.exports=function(R){return I(S(R),8,-1)}},9697:(f,A,_)=>{var E=_(1899),S=_(2885),I=_(7475),R=_(2532),M=_(9813)("toStringTag"),Q=E.Object,H="Arguments"==R(function(){return arguments}());f.exports=S?R:function(Z){var le,ge,Se;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(ge=function(Ne,nt){try{return Ne[nt]}catch{}}(le=Q(Z),M))?ge:H?R(le):"Object"==(Se=R(le))&&I(le.callee)?"Arguments":Se}},8694:(f,A,_)=>{var E=_(5329)("".replace),S=String(Error("zxcasd").stack),I=/\n\s*at [^:]*:[^\n]*/,R=I.test(S);f.exports=function(M,Q){if(R&&"string"==typeof M)for(;Q--;)M=E(M,I,"");return M}},3489:(f,A,_)=>{var E=_(953),S=_(1136),I=_(9677),R=_(5988);f.exports=function(M,Q,H){for(var Z=S(Q),le=R.f,ge=I.f,Se=0;Se<Z.length;Se++){var Ne=Z[Se];E(M,Ne)||H&&E(H,Ne)||le(M,Ne,ge(Q,Ne))}}},4160:(f,A,_)=>{var E=_(5981);f.exports=!E(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},1046:(f,A,_)=>{var E=_(5143).IteratorPrototype,S=_(9290),I=_(1887),R=_(904),M=_(2077),Q=function(){return this};f.exports=function(H,Z,le,ge){var Se=Z+" Iterator";return H.prototype=S(E,{next:I(+!ge,le)}),R(H,Se,!1,!0),M[Se]=Q,H}},2029:(f,A,_)=>{var E=_(5746),S=_(5988),I=_(1887);f.exports=E?function(R,M,Q){return S.f(R,M,I(1,Q))}:function(R,M,Q){return R[M]=Q,R}},1887:f=>{f.exports=function(A,_){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:_}}},7771:(f,A,_)=>{var E=_(6887),S=_(8834),I=_(2529),R=_(9417),M=_(7475),Q=_(1046),H=_(249),Z=_(8929),le=_(904),ge=_(2029),Se=_(9754),Ne=_(9813),nt=_(2077),Nt=_(5143),Vt=R.PROPER,Dt=R.CONFIGURABLE,In=Nt.IteratorPrototype,dn=Nt.BUGGY_SAFARI_ITERATORS,hn=Ne("iterator"),We="values",ct="entries",bt=function(){return this};f.exports=function(bn,Je,dt,xt,pn,Dn,Wt){Q(dt,Je,xt);var j,Ae,xe,Ft=function(za){if(za===pn&&Gi)return Gi;if(!dn&&za in Er)return Er[za];switch(za){case"keys":case We:case ct:return function(){return new dt(this,za)}}return function(){return new dt(this)}},Tn=Je+" Iterator",Sr=!1,Er=bn.prototype,Nr=Er[hn]||Er["@@iterator"]||pn&&Er[pn],Gi=!dn&&Nr||Ft(pn),nu="Array"==Je&&Er.entries||Nr;if(nu&&(j=H(nu.call(new bn)))!==Object.prototype&&j.next&&(I||H(j)===In||(Z?Z(j,In):M(j[hn])||Se(j,hn,bt)),le(j,Tn,!0,!0),I&&(nt[Tn]=bt)),Vt&&pn==We&&Nr&&Nr.name!==We&&(!I&&Dt?ge(Er,"name",We):(Sr=!0,Gi=function(){return S(Nr,this)})),pn)if(Ae={values:Ft(We),keys:Dn?Gi:Ft("keys"),entries:Ft(ct)},Wt)for(xe in Ae)(dn||Sr||!(xe in Er))&&Se(Er,xe,Ae[xe]);else E({target:Je,proto:!0,forced:dn||Sr},Ae);return I&&!Wt||Er[hn]===Gi||Se(Er,hn,Gi,{name:pn}),nt[Je]=Gi,Ae}},5746:(f,A,_)=>{var E=_(5981);f.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:(f,A,_)=>{var E=_(1899),S=_(941),I=E.document,R=S(I)&&S(I.createElement);f.exports=function(M){return R?I.createElement(M):{}}},3281:f=>{f.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:f=>{f.exports="object"==typeof window},4470:(f,A,_)=>{var E=_(2861),S=_(1899);f.exports=/ipad|iphone|ipod/i.test(E)&&void 0!==S.Pebble},2749:(f,A,_)=>{var E=_(2861);f.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},6049:(f,A,_)=>{var E=_(2532),S=_(1899);f.exports="process"==E(S.process)},8045:(f,A,_)=>{var E=_(2861);f.exports=/web0s(?!.*chrome)/i.test(E)},2861:(f,A,_)=>{var E=_(626);f.exports=E("navigator","userAgent")||""},3385:(f,A,_)=>{var E,S,I=_(1899),R=_(2861),M=I.process,Q=I.Deno,H=M&&M.versions||Q&&Q.version,Z=H&&H.v8;Z&&(S=(E=Z.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!S&&R&&(!(E=R.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=R.match(/Chrome\/(\d+)/))&&(S=+E[1]),f.exports=S},6759:f=>{f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:(f,A,_)=>{var E=_(5981),S=_(1887);f.exports=!E(function(){var I=Error("a");return!("stack"in I)||(Object.defineProperty(I,"stack",S(1,7)),7!==I.stack)})},6887:(f,A,_)=>{var E=_(1899),S=_(9730),I=_(5329),R=_(7475),M=_(9677).f,Q=_(7252),H=_(4058),Z=_(6843),le=_(2029),ge=_(953),Se=function(Ne){var nt=function(Nt,Vt,Dt){if(this instanceof nt){switch(arguments.length){case 0:return new Ne;case 1:return new Ne(Nt);case 2:return new Ne(Nt,Vt)}return new Ne(Nt,Vt,Dt)}return S(Ne,this,arguments)};return nt.prototype=Ne.prototype,nt};f.exports=function(Ne,nt){var Nt,Vt,Dt,In,dn,hn,wt,We,ct=Ne.target,bt=Ne.global,bn=Ne.stat,Je=Ne.proto,dt=bt?E:bn?E[ct]:(E[ct]||{}).prototype,xt=bt?H:H[ct]||le(H,ct,{})[ct],pn=xt.prototype;for(Dt in nt)Nt=!Q(bt?Dt:ct+(bn?".":"#")+Dt,Ne.forced)&&dt&&ge(dt,Dt),dn=xt[Dt],Nt&&(hn=Ne.noTargetGet?(We=M(dt,Dt))&&We.value:dt[Dt]),In=Nt&&hn?hn:nt[Dt],Nt&&typeof dn==typeof In||(wt=Ne.bind&&Nt?Z(In,E):Ne.wrap&&Nt?Se(In):Je&&R(In)?I(In):In,(Ne.sham||In&&In.sham||dn&&dn.sham)&&le(wt,"sham",!0),le(xt,Dt,wt),Je&&(ge(H,Vt=ct+"Prototype")||le(H,Vt,{}),le(H[Vt],Dt,In),Ne.real&&pn&&!pn[Dt]&&le(pn,Dt,In)))}},5981:f=>{f.exports=function(A){try{return!!A()}catch{return!0}}},9730:(f,A,_)=>{var E=_(8285),S=Function.prototype,I=S.apply,R=S.call;f.exports="object"==typeof Reflect&&Reflect.apply||(E?R.bind(I):function(){return R.apply(I,arguments)})},6843:(f,A,_)=>{var E=_(5329),S=_(4883),I=_(8285),R=E(E.bind);f.exports=function(M,Q){return S(M),void 0===Q?M:I?R(M,Q):function(){return M.apply(Q,arguments)}}},8285:(f,A,_)=>{var E=_(5981);f.exports=!E(function(){var S=function(){}.bind();return"function"!=typeof S||S.hasOwnProperty("prototype")})},8834:(f,A,_)=>{var E=_(8285),S=Function.prototype.call;f.exports=E?S.bind(S):function(){return S.apply(S,arguments)}},9417:(f,A,_)=>{var E=_(5746),S=_(953),I=Function.prototype,R=E&&Object.getOwnPropertyDescriptor,M=S(I,"name"),Q=M&&"something"===function(){}.name,H=M&&(!E||E&&R(I,"name").configurable);f.exports={EXISTS:M,PROPER:Q,CONFIGURABLE:H}},5329:(f,A,_)=>{var E=_(8285),S=Function.prototype,R=S.call,M=E&&S.bind.bind(R,R);f.exports=E?function(Q){return Q&&M(Q)}:function(Q){return Q&&function(){return R.apply(Q,arguments)}}},626:(f,A,_)=>{var E=_(4058),S=_(1899),I=_(7475),R=function(M){return I(M)?M:void 0};f.exports=function(M,Q){return arguments.length<2?R(E[M])||R(S[M]):E[M]&&E[M][Q]||S[M]&&S[M][Q]}},2902:(f,A,_)=>{var E=_(9697),S=_(4229),I=_(2077),R=_(9813)("iterator");f.exports=function(M){if(null!=M)return S(M,R)||S(M,"@@iterator")||I[E(M)]}},429:(f,A,_)=>{var E=_(1899),S=_(8834),I=_(4883),R=_(6059),M=_(9826),Q=_(2902),H=E.TypeError;f.exports=function(Z,le){var ge=arguments.length<2?Q(Z):le;if(I(ge))return R(S(ge,Z));throw H(M(Z)+" is not iterable")}},4229:(f,A,_)=>{var E=_(4883);f.exports=function(S,I){var R=S[I];return null==R?void 0:E(R)}},1899:(f,A,_)=>{var E=function(S){return S&&S.Math==Math&&S};f.exports=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},953:(f,A,_)=>{var E=_(5329),S=_(9678),I=E({}.hasOwnProperty);f.exports=Object.hasOwn||function(R,M){return I(S(R),M)}},7748:f=>{f.exports={}},4845:(f,A,_)=>{var E=_(1899);f.exports=function(S,I){var R=E.console;R&&R.error&&(1==arguments.length?R.error(S):R.error(S,I))}},5463:(f,A,_)=>{var E=_(626);f.exports=E("document","documentElement")},2840:(f,A,_)=>{var E=_(5746),S=_(5981),I=_(1333);f.exports=!E&&!S(function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a})},7026:(f,A,_)=>{var E=_(1899),S=_(5329),I=_(5981),R=_(2532),M=E.Object,Q=S("".split);f.exports=I(function(){return!M("z").propertyIsEnumerable(0)})?function(H){return"String"==R(H)?Q(H,""):M(H)}:M},1302:(f,A,_)=>{var E=_(5329),S=_(7475),I=_(3030),R=E(Function.toString);S(I.inspectSource)||(I.inspectSource=function(M){return R(M)}),f.exports=I.inspectSource},3794:(f,A,_)=>{var E=_(941),S=_(2029);f.exports=function(I,R){E(R)&&"cause"in R&&S(I,"cause",R.cause)}},5402:(f,A,_)=>{var E,S,I,R=_(8019),M=_(1899),Q=_(5329),H=_(941),Z=_(2029),le=_(953),ge=_(3030),Se=_(4262),Ne=_(7748),nt="Object already initialized",Nt=M.TypeError;if(R||ge.state){var Dt=ge.state||(ge.state=new(0,M.WeakMap)),In=Q(Dt.get),dn=Q(Dt.has),hn=Q(Dt.set);E=function(We,ct){if(dn(Dt,We))throw new Nt(nt);return ct.facade=We,hn(Dt,We,ct),ct},S=function(We){return In(Dt,We)||{}},I=function(We){return dn(Dt,We)}}else{var wt=Se("state");Ne[wt]=!0,E=function(We,ct){if(le(We,wt))throw new Nt(nt);return ct.facade=We,Z(We,wt,ct),ct},S=function(We){return le(We,wt)?We[wt]:{}},I=function(We){return le(We,wt)}}f.exports={set:E,get:S,has:I,enforce:function(We){return I(We)?S(We):E(We,{})},getterFor:function(We){return function(ct){var bt;if(!H(ct)||(bt=S(ct)).type!==We)throw Nt("Incompatible receiver, "+We+" required");return bt}}}},6782:(f,A,_)=>{var E=_(9813),S=_(2077),I=E("iterator"),R=Array.prototype;f.exports=function(M){return void 0!==M&&(S.Array===M||R[I]===M)}},7475:f=>{f.exports=function(A){return"function"==typeof A}},4284:(f,A,_)=>{var E=_(5329),S=_(5981),I=_(7475),R=_(9697),M=_(626),Q=_(1302),H=function(){},Z=[],le=M("Reflect","construct"),ge=/^\s*(?:class|function)\b/,Se=E(ge.exec),Ne=!ge.exec(H),nt=function(Vt){if(!I(Vt))return!1;try{return le(H,Z,Vt),!0}catch{return!1}},Nt=function(Vt){if(!I(Vt))return!1;switch(R(Vt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ne||!!Se(ge,Q(Vt))}catch{return!0}};Nt.sham=!0,f.exports=!le||S(function(){var Vt;return nt(nt.call)||!nt(Object)||!nt(function(){Vt=!0})||Vt})?Nt:nt},7252:(f,A,_)=>{var E=_(5981),S=_(7475),I=/#|\.prototype\./,R=function(le,ge){var Se=Q[M(le)];return Se==Z||Se!=H&&(S(ge)?E(ge):!!ge)},M=R.normalize=function(le){return String(le).replace(I,".").toLowerCase()},Q=R.data={},H=R.NATIVE="N",Z=R.POLYFILL="P";f.exports=R},941:(f,A,_)=>{var E=_(7475);f.exports=function(S){return"object"==typeof S?null!==S:E(S)}},2529:f=>{f.exports=!0},6664:(f,A,_)=>{var E=_(1899),S=_(626),I=_(7475),R=_(7046),M=_(2302),Q=E.Object;f.exports=M?function(H){return"symbol"==typeof H}:function(H){var Z=S("Symbol");return I(Z)&&R(Z.prototype,Q(H))}},3091:(f,A,_)=>{var E=_(1899),S=_(6843),I=_(8834),R=_(6059),M=_(9826),Q=_(6782),H=_(623),Z=_(7046),le=_(429),ge=_(2902),Se=_(7609),Ne=E.TypeError,nt=function(Vt,Dt){this.stopped=Vt,this.result=Dt},Nt=nt.prototype;f.exports=function(Vt,Dt,In){var dn,hn,wt,We,ct,bt,bn,dt=!(!In||!In.AS_ENTRIES),xt=!(!In||!In.IS_ITERATOR),pn=!(!In||!In.INTERRUPTED),Dn=S(Dt,In&&In.that),Wt=function(Ae){return dn&&Se(dn,"normal",Ae),new nt(!0,Ae)},j=function(Ae){return dt?(R(Ae),pn?Dn(Ae[0],Ae[1],Wt):Dn(Ae[0],Ae[1])):pn?Dn(Ae,Wt):Dn(Ae)};if(xt)dn=Vt;else{if(!(hn=ge(Vt)))throw Ne(M(Vt)+" is not iterable");if(Q(hn)){for(wt=0,We=H(Vt);We>wt;wt++)if((ct=j(Vt[wt]))&&Z(Nt,ct))return ct;return new nt(!1)}dn=le(Vt,hn)}for(bt=dn.next;!(bn=I(bt,dn)).done;){try{ct=j(bn.value)}catch(Ae){Se(dn,"throw",Ae)}if("object"==typeof ct&&ct&&Z(Nt,ct))return ct}return new nt(!1)}},7609:(f,A,_)=>{var E=_(8834),S=_(6059),I=_(4229);f.exports=function(R,M,Q){var H,Z;S(R);try{if(!(H=I(R,"return"))){if("throw"===M)throw Q;return Q}H=E(H,R)}catch(le){Z=!0,H=le}if("throw"===M)throw Q;if(Z)throw H;return S(H),Q}},5143:(f,A,_)=>{var E,S,I,R=_(5981),M=_(7475),Q=_(9290),H=_(249),Z=_(9754),le=_(9813),ge=_(2529),Se=le("iterator"),Ne=!1;[].keys&&("next"in(I=[].keys())?(S=H(H(I)))!==Object.prototype&&(E=S):Ne=!0),null==E||R(function(){var nt={};return E[Se].call(nt)!==nt})?E={}:ge&&(E=Q(E)),M(E[Se])||Z(E,Se,function(){return this}),f.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:Ne}},2077:f=>{f.exports={}},623:(f,A,_)=>{var E=_(3057);f.exports=function(S){return E(S.length)}},6132:(f,A,_)=>{var E,S,I,R,M,Q,H,Z,le=_(1899),ge=_(6843),Se=_(9677).f,Ne=_(2941).set,nt=_(2749),Nt=_(4470),Vt=_(8045),Dt=_(6049),In=le.MutationObserver||le.WebKitMutationObserver,dn=le.document,hn=le.process,wt=le.Promise,We=Se(le,"queueMicrotask"),ct=We&&We.value;ct||(E=function(){var bt,bn;for(Dt&&(bt=hn.domain)&&bt.exit();S;){bn=S.fn,S=S.next;try{bn()}catch(Je){throw S?R():I=void 0,Je}}I=void 0,bt&&bt.enter()},nt||Dt||Vt||!In||!dn?!Nt&&wt&&wt.resolve?((H=wt.resolve(void 0)).constructor=wt,Z=ge(H.then,H),R=function(){Z(E)}):Dt?R=function(){hn.nextTick(E)}:(Ne=ge(Ne,le),R=function(){Ne(E)}):(M=!0,Q=dn.createTextNode(""),new In(E).observe(Q,{characterData:!0}),R=function(){Q.data=M=!M})),f.exports=ct||function(bt){var bn={fn:bt,next:void 0};I&&(I.next=bn),S||(S=bn,R()),I=bn}},9297:(f,A,_)=>{var E=_(1899);f.exports=E.Promise},2497:(f,A,_)=>{var E=_(3385),S=_(5981);f.exports=!!Object.getOwnPropertySymbols&&!S(function(){var I=Symbol();return!String(I)||!(Object(I)instanceof Symbol)||!Symbol.sham&&E&&E<41})},8019:(f,A,_)=>{var E=_(1899),S=_(7475),I=_(1302),R=E.WeakMap;f.exports=S(R)&&/native code/.test(I(R))},9520:(f,A,_)=>{var E=_(4883),S=function(I){var R,M;this.promise=new I(function(Q,H){if(void 0!==R||void 0!==M)throw TypeError("Bad Promise constructor");R=Q,M=H}),this.resolve=E(R),this.reject=E(M)};f.exports.f=function(I){return new S(I)}},4649:(f,A,_)=>{var E=_(5803);f.exports=function(S,I){return void 0===S?arguments.length<2?"":I:E(S)}},9290:(f,A,_)=>{var E,S=_(6059),I=_(9938),R=_(6759),M=_(7748),Q=_(5463),H=_(1333),Z=_(4262)("IE_PROTO"),le=function(){},ge=function(nt){return"<script>"+nt+"<\/script>"},Se=function(nt){nt.write(ge("")),nt.close();var Nt=nt.parentWindow.Object;return nt=null,Nt},Ne=function(){try{E=new ActiveXObject("htmlfile")}catch{}var nt,Nt;Ne=typeof document<"u"?document.domain&&E?Se(E):((Nt=H("iframe")).style.display="none",Q.appendChild(Nt),Nt.src=String("javascript:"),(nt=Nt.contentWindow.document).open(),nt.write(ge("document.F=Object")),nt.close(),nt.F):Se(E);for(var Vt=R.length;Vt--;)delete Ne.prototype[R[Vt]];return Ne()};M[Z]=!0,f.exports=Object.create||function(nt,Nt){var Vt;return null!==nt?(le.prototype=S(nt),Vt=new le,le.prototype=null,Vt[Z]=nt):Vt=Ne(),void 0===Nt?Vt:I.f(Vt,Nt)}},9938:(f,A,_)=>{var E=_(5746),S=_(3937),I=_(5988),R=_(6059),M=_(4529),Q=_(4771);A.f=E&&!S?Object.defineProperties:function(H,Z){R(H);for(var le,ge=M(Z),Se=Q(Z),Ne=Se.length,nt=0;Ne>nt;)I.f(H,le=Se[nt++],ge[le]);return H}},5988:(f,A,_)=>{var E=_(1899),S=_(5746),I=_(2840),R=_(3937),M=_(6059),Q=_(3894),H=E.TypeError,Z=Object.defineProperty,le=Object.getOwnPropertyDescriptor;A.f=S?R?function(ge,Se,Ne){if(M(ge),Se=Q(Se),M(Ne),"function"==typeof ge&&"prototype"===Se&&"value"in Ne&&"writable"in Ne&&!Ne.writable){var nt=le(ge,Se);nt&&nt.writable&&(ge[Se]=Ne.value,Ne={configurable:"configurable"in Ne?Ne.configurable:nt.configurable,enumerable:"enumerable"in Ne?Ne.enumerable:nt.enumerable,writable:!1})}return Z(ge,Se,Ne)}:Z:function(ge,Se,Ne){if(M(ge),Se=Q(Se),M(Ne),I)try{return Z(ge,Se,Ne)}catch{}if("get"in Ne||"set"in Ne)throw H("Accessors not supported");return"value"in Ne&&(ge[Se]=Ne.value),ge}},9677:(f,A,_)=>{var E=_(5746),S=_(8834),I=_(6760),R=_(1887),M=_(4529),Q=_(3894),H=_(953),Z=_(2840),le=Object.getOwnPropertyDescriptor;A.f=E?le:function(ge,Se){if(ge=M(ge),Se=Q(Se),Z)try{return le(ge,Se)}catch{}if(H(ge,Se))return R(!S(I.f,ge,Se),ge[Se])}},946:(f,A,_)=>{var E=_(5629),S=_(6759).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(I){return E(I,S)}},7857:(f,A)=>{A.f=Object.getOwnPropertySymbols},249:(f,A,_)=>{var E=_(1899),S=_(953),I=_(7475),R=_(9678),M=_(4262),Q=_(4160),H=M("IE_PROTO"),Z=E.Object,le=Z.prototype;f.exports=Q?Z.getPrototypeOf:function(ge){var Se=R(ge);if(S(Se,H))return Se[H];var Ne=Se.constructor;return I(Ne)&&Se instanceof Ne?Ne.prototype:Se instanceof Z?le:null}},7046:(f,A,_)=>{var E=_(5329);f.exports=E({}.isPrototypeOf)},5629:(f,A,_)=>{var E=_(5329),S=_(953),I=_(4529),R=_(1692).indexOf,M=_(7748),Q=E([].push);f.exports=function(H,Z){var le,ge=I(H),Se=0,Ne=[];for(le in ge)!S(M,le)&&S(ge,le)&&Q(Ne,le);for(;Z.length>Se;)S(ge,le=Z[Se++])&&(~R(Ne,le)||Q(Ne,le));return Ne}},4771:(f,A,_)=>{var E=_(5629),S=_(6759);f.exports=Object.keys||function(I){return E(I,S)}},6760:(f,A)=>{var _={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,S=E&&!_.call({1:2},1);A.f=S?function(I){var R=E(this,I);return!!R&&R.enumerable}:_},8929:(f,A,_)=>{var E=_(5329),S=_(6059),I=_(1851);f.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,M=!1,Q={};try{(R=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Q,[]),M=Q instanceof Array}catch{}return function(H,Z){return S(H),I(Z),M?R(H,Z):H.__proto__=Z,H}}():void 0)},5623:(f,A,_)=>{var E=_(2885),S=_(9697);f.exports=E?{}.toString:function(){return"[object "+S(this)+"]"}},9811:(f,A,_)=>{var E=_(1899),S=_(8834),I=_(7475),R=_(941),M=E.TypeError;f.exports=function(Q,H){var Z,le;if("string"===H&&I(Z=Q.toString)&&!R(le=S(Z,Q))||I(Z=Q.valueOf)&&!R(le=S(Z,Q))||"string"!==H&&I(Z=Q.toString)&&!R(le=S(Z,Q)))return le;throw M("Can't convert object to primitive value")}},1136:(f,A,_)=>{var E=_(626),S=_(5329),I=_(946),R=_(7857),M=_(6059),Q=S([].concat);f.exports=E("Reflect","ownKeys")||function(H){var Z=I.f(M(H)),le=R.f;return le?Q(Z,le(H)):Z}},4058:f=>{f.exports={}},2:f=>{f.exports=function(A){try{return{error:!1,value:A()}}catch(_){return{error:!0,value:_}}}},6584:(f,A,_)=>{var E=_(6059),S=_(941),I=_(9520);f.exports=function(R,M){if(E(R),S(M)&&M.constructor===R)return M;var Q=I.f(R);return(0,Q.resolve)(M),Q.promise}},8397:f=>{var A=function(){this.head=null,this.tail=null};A.prototype={add:function(_){var E={item:_,next:null};this.head?this.tail.next=E:this.head=E,this.tail=E},get:function(){var _=this.head;if(_)return this.head=_.next,this.tail===_&&(this.tail=null),_.item}},f.exports=A},7524:(f,A,_)=>{var E=_(9754);f.exports=function(S,I,R){for(var M in I)R&&R.unsafe&&S[M]?S[M]=I[M]:E(S,M,I[M],R);return S}},9754:(f,A,_)=>{var E=_(2029);f.exports=function(S,I,R,M){M&&M.enumerable?S[I]=R:E(S,I,R)}},8219:(f,A,_)=>{var E=_(1899).TypeError;f.exports=function(S){if(null==S)throw E("Can't call method on "+S);return S}},4911:(f,A,_)=>{var E=_(1899),S=Object.defineProperty;f.exports=function(I,R){try{S(E,I,{value:R,configurable:!0,writable:!0})}catch{E[I]=R}return R}},4431:(f,A,_)=>{var E=_(626),S=_(5988),I=_(9813),R=_(5746),M=I("species");f.exports=function(Q){var H=E(Q);R&&H&&!H[M]&&(0,S.f)(H,M,{configurable:!0,get:function(){return this}})}},904:(f,A,_)=>{var E=_(2885),S=_(5988).f,I=_(2029),R=_(953),M=_(5623),Q=_(9813)("toStringTag");f.exports=function(H,Z,le,ge){if(H){var Se=le?H:H.prototype;R(Se,Q)||S(Se,Q,{configurable:!0,value:Z}),ge&&!E&&I(Se,"toString",M)}}},4262:(f,A,_)=>{var E=_(8726),S=_(9418),I=E("keys");f.exports=function(R){return I[R]||(I[R]=S(R))}},3030:(f,A,_)=>{var E=_(1899),S=_(4911),I="__core-js_shared__",R=E[I]||S(I,{});f.exports=R},8726:(f,A,_)=>{var E=_(2529),S=_(3030);(f.exports=function(I,R){return S[I]||(S[I]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:E?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},487:(f,A,_)=>{var E=_(6059),S=_(174),I=_(9813)("species");f.exports=function(R,M){var Q,H=E(R).constructor;return void 0===H||null==(Q=E(H)[I])?M:S(Q)}},4620:(f,A,_)=>{var E=_(5329),S=_(2435),I=_(5803),R=_(8219),M=E("".charAt),Q=E("".charCodeAt),H=E("".slice),Z=function(le){return function(ge,Se){var Ne,nt,Nt=I(R(ge)),Vt=S(Se),Dt=Nt.length;return Vt<0||Vt>=Dt?le?"":void 0:(Ne=Q(Nt,Vt))<55296||Ne>56319||Vt+1===Dt||(nt=Q(Nt,Vt+1))<56320||nt>57343?le?M(Nt,Vt):Ne:le?H(Nt,Vt,Vt+2):nt-56320+(Ne-55296<<10)+65536}};f.exports={codeAt:Z(!1),charAt:Z(!0)}},2941:(f,A,_)=>{var E,S,I,R,M=_(1899),Q=_(9730),H=_(6843),Z=_(7475),le=_(953),ge=_(5981),Se=_(5463),Ne=_(3765),nt=_(1333),Nt=_(2749),Vt=_(6049),Dt=M.setImmediate,In=M.clearImmediate,dn=M.process,hn=M.Dispatch,wt=M.Function,We=M.MessageChannel,ct=M.String,bt=0,bn={};try{E=M.location}catch{}var Je=function(Dn){if(le(bn,Dn)){var Wt=bn[Dn];delete bn[Dn],Wt()}},dt=function(Dn){return function(){Je(Dn)}},xt=function(Dn){Je(Dn.data)},pn=function(Dn){M.postMessage(ct(Dn),E.protocol+"//"+E.host)};Dt&&In||(Dt=function(Dn){var Wt=Ne(arguments,1);return bn[++bt]=function(){Q(Z(Dn)?Dn:wt(Dn),void 0,Wt)},S(bt),bt},In=function(Dn){delete bn[Dn]},Vt?S=function(Dn){dn.nextTick(dt(Dn))}:hn&&hn.now?S=function(Dn){hn.now(dt(Dn))}:We&&!Nt?(R=(I=new We).port2,I.port1.onmessage=xt,S=H(R.postMessage,R)):M.addEventListener&&Z(M.postMessage)&&!M.importScripts&&E&&"file:"!==E.protocol&&!ge(pn)?(S=pn,M.addEventListener("message",xt,!1)):S="onreadystatechange"in nt("script")?function(Dn){Se.appendChild(nt("script")).onreadystatechange=function(){Se.removeChild(this),Je(Dn)}}:function(Dn){setTimeout(dt(Dn),0)}),f.exports={set:Dt,clear:In}},9413:(f,A,_)=>{var E=_(2435),S=Math.max,I=Math.min;f.exports=function(R,M){var Q=E(R);return Q<0?S(Q+M,0):I(Q,M)}},4529:(f,A,_)=>{var E=_(7026),S=_(8219);f.exports=function(I){return E(S(I))}},2435:f=>{var A=Math.ceil,_=Math.floor;f.exports=function(E){var S=+E;return S!=S||0===S?0:(S>0?_:A)(S)}},3057:(f,A,_)=>{var E=_(2435),S=Math.min;f.exports=function(I){return I>0?S(E(I),9007199254740991):0}},9678:(f,A,_)=>{var E=_(1899),S=_(8219),I=E.Object;f.exports=function(R){return I(S(R))}},6935:(f,A,_)=>{var E=_(1899),S=_(8834),I=_(941),R=_(6664),M=_(4229),Q=_(9811),H=_(9813),Z=E.TypeError,le=H("toPrimitive");f.exports=function(ge,Se){if(!I(ge)||R(ge))return ge;var Ne,nt=M(ge,le);if(nt){if(void 0===Se&&(Se="default"),Ne=S(nt,ge,Se),!I(Ne)||R(Ne))return Ne;throw Z("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),Q(ge,Se)}},3894:(f,A,_)=>{var E=_(6935),S=_(6664);f.exports=function(I){var R=E(I,"string");return S(R)?R:R+""}},2885:(f,A,_)=>{var E={};E[_(9813)("toStringTag")]="z",f.exports="[object z]"===String(E)},5803:(f,A,_)=>{var E=_(1899),S=_(9697),I=E.String;f.exports=function(R){if("Symbol"===S(R))throw TypeError("Cannot convert a Symbol value to a string");return I(R)}},9826:(f,A,_)=>{var E=_(1899).String;f.exports=function(S){try{return E(S)}catch{return"Object"}}},9418:(f,A,_)=>{var E=_(5329),S=0,I=Math.random(),R=E(1..toString);f.exports=function(M){return"Symbol("+(void 0===M?"":M)+")_"+R(++S+I,36)}},2302:(f,A,_)=>{var E=_(2497);f.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:(f,A,_)=>{var E=_(5746),S=_(5981);f.exports=E&&S(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9813:(f,A,_)=>{var E=_(1899),S=_(8726),I=_(953),R=_(9418),M=_(2497),Q=_(2302),H=S("wks"),Z=E.Symbol,le=Z&&Z.for,ge=Q?Z:Z&&Z.withoutSetter||R;f.exports=function(Se){if(!I(H,Se)||!M&&"string"!=typeof H[Se]){var Ne="Symbol."+Se;H[Se]=M&&I(Z,Se)?Z[Se]:Q&&le?le(Ne):ge(Ne)}return H[Se]}},7627:(f,A,_)=>{var E=_(6887),S=_(1899),I=_(7046),R=_(249),M=_(8929),Q=_(3489),H=_(9290),Z=_(2029),le=_(1887),ge=_(8694),Se=_(3794),Ne=_(3091),nt=_(4649),Nt=_(9813),Vt=_(8780),Dt=Nt("toStringTag"),In=S.Error,dn=[].push,hn=function(We,ct){var bt,bn=arguments.length>2?arguments[2]:void 0,Je=I(wt,this);M?bt=M(new In,Je?R(this):wt):(bt=Je?this:H(wt),Z(bt,Dt,"Error")),void 0!==ct&&Z(bt,"message",nt(ct)),Vt&&Z(bt,"stack",ge(bt.stack,1)),Se(bt,bn);var dt=[];return Ne(We,dn,{that:dt}),Z(bt,"errors",dt),bt};M?M(hn,In):Q(hn,In,{name:!0});var wt=hn.prototype=H(In.prototype,{constructor:le(1,hn),message:le(1,""),name:le(1,"AggregateError")});E({global:!0},{AggregateError:hn})},6274:(f,A,_)=>{var E=_(4529),S=_(8479),I=_(2077),R=_(5402),M=_(5988).f,Q=_(7771),H=_(2529),Z=_(5746),le="Array Iterator",ge=R.set,Se=R.getterFor(le);f.exports=Q(Array,"Array",function(nt,Nt){ge(this,{type:le,target:E(nt),index:0,kind:Nt})},function(){var nt=Se(this),Nt=nt.target,Vt=nt.kind,Dt=nt.index++;return!Nt||Dt>=Nt.length?(nt.target=void 0,{value:void 0,done:!0}):"keys"==Vt?{value:Dt,done:!1}:"values"==Vt?{value:Nt[Dt],done:!1}:{value:[Dt,Nt[Dt]],done:!1}},"values");var Ne=I.Arguments=I.Array;if(S("keys"),S("values"),S("entries"),!H&&Z&&"values"!==Ne.name)try{M(Ne,"name",{value:"values"})}catch{}},6450:(f,A,_)=>{var E=_(6887),S=_(5746),I=_(5988).f;E({target:"Object",stat:!0,forced:Object.defineProperty!==I,sham:!S},{defineProperty:I})},5967:()=>{},4560:(f,A,_)=>{var E=_(6887),S=_(8834),I=_(4883),R=_(9520),M=_(2),Q=_(3091);E({target:"Promise",stat:!0},{allSettled:function(H){var Z=this,le=R.f(Z),ge=le.resolve,Se=le.reject,Ne=M(function(){var nt=I(Z.resolve),Nt=[],Vt=0,Dt=1;Q(H,function(In){var dn=Vt++,hn=!1;Dt++,S(nt,Z,In).then(function(wt){hn||(hn=!0,Nt[dn]={status:"fulfilled",value:wt},--Dt||ge(Nt))},function(wt){hn||(hn=!0,Nt[dn]={status:"rejected",reason:wt},--Dt||ge(Nt))})}),--Dt||ge(Nt)});return Ne.error&&Se(Ne.value),le.promise}})},7206:(f,A,_)=>{var E=_(6887),S=_(4883),I=_(626),R=_(8834),M=_(9520),Q=_(2),H=_(3091),Z="No one promise resolved";E({target:"Promise",stat:!0},{any:function(le){var ge=this,Se=I("AggregateError"),Ne=M.f(ge),nt=Ne.resolve,Nt=Ne.reject,Vt=Q(function(){var Dt=S(ge.resolve),In=[],dn=0,hn=1,wt=!1;H(le,function(We){var ct=dn++,bt=!1;hn++,R(Dt,ge,We).then(function(bn){bt||wt||(wt=!0,nt(bn))},function(bn){bt||wt||(bt=!0,In[ct]=bn,--hn||Nt(new Se(In,Z)))})}),--hn||Nt(new Se(In,Z))});return Vt.error&&Nt(Vt.value),Ne.promise}})},4349:(f,A,_)=>{var E=_(6887),S=_(2529),I=_(9297),R=_(5981),M=_(626),Q=_(7475),H=_(487),Z=_(6584),le=_(9754);if(E({target:"Promise",proto:!0,real:!0,forced:!!I&&R(function(){I.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Se){var Ne=H(this,M("Promise")),nt=Q(Se);return this.then(nt?function(Nt){return Z(Ne,Se()).then(function(){return Nt})}:Se,nt?function(Nt){return Z(Ne,Se()).then(function(){throw Nt})}:Se)}}),!S&&Q(I)){var ge=M("Promise").prototype.finally;I.prototype.finally!==ge&&le(I.prototype,"finally",ge,{unsafe:!0})}},8881:(f,A,_)=>{var E,S,I,R,M=_(6887),Q=_(2529),H=_(1899),Z=_(626),le=_(8834),ge=_(9297),Se=_(9754),Ne=_(7524),nt=_(8929),Nt=_(904),Vt=_(4431),Dt=_(4883),In=_(7475),dn=_(941),hn=_(5743),wt=_(1302),We=_(3091),ct=_(1385),bt=_(487),bn=_(2941).set,Je=_(6132),dt=_(6584),xt=_(4845),pn=_(9520),Dn=_(2),Wt=_(8397),j=_(5402),Ae=_(7252),xe=_(9813),Ft=_(3321),Tn=_(6049),Sr=_(3385),Er=xe("species"),Nr="Promise",Gi=j.getterFor(Nr),nu=j.set,za=j.getterFor(Nr),So=ge&&ge.prototype,Xi=ge,Aa=So,Qf=H.TypeError,zh=H.document,Hf=H.process,Hs=pn.f,AW=Hs,yt=!!(zh&&zh.createEvent&&H.dispatchEvent),Ie=In(H.PromiseRejectionEvent),it="unhandledrejection",Lt=!1,Et=Ae(Nr,function(){var Nn=wt(Xi),er=Nn!==String(Xi);if(!er&&66===Sr||Q&&!Aa.finally)return!0;if(Sr>=51&&/native code/.test(Nn))return!1;var Br=new Xi(function(Ya){Ya(1)}),Wi=function(Ya){Ya(function(){},function(){})};return(Br.constructor={})[Er]=Wi,!(Lt=Br.then(function(){})instanceof Wi)||!er&&Ft&&!Ie}),gn=Et||!ct(function(Nn){Xi.all(Nn).catch(function(){})}),ln=function(Nn){var er;return!(!dn(Nn)||!In(er=Nn.then))&&er},qn=function(Nn,er){var Br,Wi,Ya,zy=er.value,ML=1==er.state,A2=ML?Nn.ok:Nn.fail,e7=Nn.resolve,V1=Nn.reject,j1=Nn.domain;try{A2?(ML||(2===er.rejection&&br(er),er.rejection=1),!0===A2?Br=zy:(j1&&j1.enter(),Br=A2(zy),j1&&(j1.exit(),Ya=!0)),Br===Nn.promise?V1(Qf("Promise-chain cycle")):(Wi=ln(Br))?le(Wi,Br,e7,V1):e7(Br)):V1(zy)}catch(yW){j1&&!Ya&&j1.exit(),V1(yW)}},Or=function(Nn,er){Nn.notified||(Nn.notified=!0,Je(function(){for(var Br,Wi=Nn.reactions;Br=Wi.get();)qn(Br,Nn);Nn.notified=!1,er&&!Nn.rejection&&On(Nn)}))},jr=function(Nn,er,Br){var Wi,Ya;yt?((Wi=zh.createEvent("Event")).promise=er,Wi.reason=Br,Wi.initEvent(Nn,!1,!0),H.dispatchEvent(Wi)):Wi={promise:er,reason:Br},!Ie&&(Ya=H["on"+Nn])?Ya(Wi):Nn===it&&xt("Unhandled promise rejection",Br)},On=function(Nn){le(bn,H,function(){var er,Br=Nn.facade,Wi=Nn.value;if(tr(Nn)&&(er=Dn(function(){Tn?Hf.emit("unhandledRejection",Wi,Br):jr(it,Br,Wi)}),Nn.rejection=Tn||tr(Nn)?2:1,er.error))throw er.value})},tr=function(Nn){return 1!==Nn.rejection&&!Nn.parent},br=function(Nn){le(bn,H,function(){var er=Nn.facade;Tn?Hf.emit("rejectionHandled",er):jr("rejectionhandled",er,Nn.value)})},Ci=function(Nn,er,Br){return function(Wi){Nn(er,Wi,Br)}},Es=function(Nn,er,Br){Nn.done||(Nn.done=!0,Br&&(Nn=Br),Nn.value=er,Nn.state=2,Or(Nn,!0))},Du=function(Nn,er,Br){if(!Nn.done){Nn.done=!0,Br&&(Nn=Br);try{if(Nn.facade===er)throw Qf("Promise can't be resolved itself");var Wi=ln(er);Wi?Je(function(){var Ya={done:!1};try{le(Wi,er,Ci(Du,Ya,Nn),Ci(Es,Ya,Nn))}catch(zy){Es(Ya,zy,Nn)}}):(Nn.value=er,Nn.state=1,Or(Nn,!1))}catch(Ya){Es({done:!1},Ya,Nn)}}};if(Et&&(Aa=(Xi=function(Nn){hn(this,Aa),Dt(Nn),le(E,this);var er=Gi(this);try{Nn(Ci(Du,er),Ci(Es,er))}catch(Br){Es(er,Br)}}).prototype,(E=function(Nn){nu(this,{type:Nr,done:!1,notified:!1,parent:!1,reactions:new Wt,rejection:!1,state:0,value:void 0})}).prototype=Ne(Aa,{then:function(Nn,er){var Br=za(this),Wi=Hs(bt(this,Xi));return Br.parent=!0,Wi.ok=!In(Nn)||Nn,Wi.fail=In(er)&&er,Wi.domain=Tn?Hf.domain:void 0,0==Br.state?Br.reactions.add(Wi):Je(function(){qn(Wi,Br)}),Wi.promise},catch:function(Nn){return this.then(void 0,Nn)}}),S=function(){var Nn=new E,er=Gi(Nn);this.promise=Nn,this.resolve=Ci(Du,er),this.reject=Ci(Es,er)},pn.f=Hs=function(Nn){return Nn===Xi||Nn===I?new S(Nn):AW(Nn)},!Q&&In(ge)&&So!==Object.prototype)){R=So.then,Lt||(Se(So,"then",function(Nn,er){var Br=this;return new Xi(function(Wi,Ya){le(R,Br,Wi,Ya)}).then(Nn,er)},{unsafe:!0}),Se(So,"catch",Aa.catch,{unsafe:!0}));try{delete So.constructor}catch{}nt&&nt(So,Aa)}M({global:!0,wrap:!0,forced:Et},{Promise:Xi}),Nt(Xi,Nr,!1,!0),Vt(Nr),I=Z(Nr),M({target:Nr,stat:!0,forced:Et},{reject:function(Nn){var er=Hs(this);return le(er.reject,void 0,Nn),er.promise}}),M({target:Nr,stat:!0,forced:Q||Et},{resolve:function(Nn){return dt(Q&&this===I?Xi:this,Nn)}}),M({target:Nr,stat:!0,forced:gn},{all:function(Nn){var er=this,Br=Hs(er),Wi=Br.resolve,Ya=Br.reject,zy=Dn(function(){var ML=Dt(er.resolve),A2=[],e7=0,V1=1;We(Nn,function(j1){var yW=e7++,Lz=!1;V1++,le(ML,er,j1).then(function(Fz){Lz||(Lz=!0,A2[yW]=Fz,--V1||Wi(A2))},Ya)}),--V1||Wi(A2)});return zy.error&&Ya(zy.value),Br.promise},race:function(Nn){var er=this,Br=Hs(er),Wi=Br.reject,Ya=Dn(function(){var zy=Dt(er.resolve);We(Nn,function(ML){le(zy,er,ML).then(Br.resolve,Wi)})});return Ya.error&&Wi(Ya.value),Br.promise}})},7971:(f,A,_)=>{var E=_(4620).charAt,S=_(5803),I=_(5402),R=_(7771),M="String Iterator",Q=I.set,H=I.getterFor(M);R(String,"String",function(Z){Q(this,{type:M,string:S(Z),index:0})},function(){var Z,le=H(this),ge=le.string,Se=le.index;return Se>=ge.length?{value:void 0,done:!0}:(Z=E(ge,Se),le.index+=Z.length,{value:Z,done:!1})})},7634:(f,A,_)=>{_(6274);var E=_(3281),S=_(1899),I=_(9697),R=_(2029),M=_(2077),Q=_(9813)("toStringTag");for(var H in E){var Z=S[H],le=Z&&Z.prototype;le&&I(le)!==Q&&R(le,Q,H),M[H]=M.Array}},1910:(f,A,_)=>{var E=_(8171);f.exports=E},7460:(f,A,_)=>{var E=_(2956);_(7634),f.exports=E},9662:(f,A,_)=>{var E=_(7854),S=_(614),I=_(6330),R=E.TypeError;f.exports=function(M){if(S(M))return M;throw R(I(M)+" is not a function")}},6077:(f,A,_)=>{var E=_(7854),S=_(614),I=E.String,R=E.TypeError;f.exports=function(M){if("object"==typeof M||S(M))return M;throw R("Can't set "+I(M)+" as a prototype")}},1223:(f,A,_)=>{var E=_(5112),S=_(30),I=_(3070),R=E("unscopables"),M=Array.prototype;null==M[R]&&I.f(M,R,{configurable:!0,value:S(null)}),f.exports=function(Q){M[R][Q]=!0}},9670:(f,A,_)=>{var E=_(7854),S=_(111),I=E.String,R=E.TypeError;f.exports=function(M){if(S(M))return M;throw R(I(M)+" is not an object")}},1318:(f,A,_)=>{var E=_(5656),S=_(1400),I=_(6244),R=function(M){return function(Q,H,Z){var le,ge=E(Q),Se=I(ge),Ne=S(Z,Se);if(M&&H!=H){for(;Se>Ne;)if((le=ge[Ne++])!=le)return!0}else for(;Se>Ne;Ne++)if((M||Ne in ge)&&ge[Ne]===H)return M||Ne||0;return!M&&-1}};f.exports={includes:R(!0),indexOf:R(!1)}},4326:(f,A,_)=>{var E=_(1702),S=E({}.toString),I=E("".slice);f.exports=function(R){return I(S(R),8,-1)}},648:(f,A,_)=>{var E=_(7854),S=_(1694),I=_(614),R=_(4326),M=_(5112)("toStringTag"),Q=E.Object,H="Arguments"==R(function(){return arguments}());f.exports=S?R:function(Z){var le,ge,Se;return void 0===Z?"Undefined":null===Z?"Null":"string"==typeof(ge=function(Ne,nt){try{return Ne[nt]}catch{}}(le=Q(Z),M))?ge:H?R(le):"Object"==(Se=R(le))&&I(le.callee)?"Arguments":Se}},7741:(f,A,_)=>{var E=_(1702)("".replace),S=String(Error("zxcasd").stack),I=/\n\s*at [^:]*:[^\n]*/,R=I.test(S);f.exports=function(M,Q){if(R&&"string"==typeof M)for(;Q--;)M=E(M,I,"");return M}},9920:(f,A,_)=>{var E=_(2597),S=_(3887),I=_(1236),R=_(3070);f.exports=function(M,Q,H){for(var Z=S(Q),le=R.f,ge=I.f,Se=0;Se<Z.length;Se++){var Ne=Z[Se];E(M,Ne)||H&&E(H,Ne)||le(M,Ne,ge(Q,Ne))}}},8544:(f,A,_)=>{var E=_(7293);f.exports=!E(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},4994:(f,A,_)=>{var E=_(3383).IteratorPrototype,S=_(30),I=_(9114),R=_(8003),M=_(7497),Q=function(){return this};f.exports=function(H,Z,le,ge){var Se=Z+" Iterator";return H.prototype=S(E,{next:I(+!ge,le)}),R(H,Se,!1,!0),M[Se]=Q,H}},8880:(f,A,_)=>{var E=_(9781),S=_(3070),I=_(9114);f.exports=E?function(R,M,Q){return S.f(R,M,I(1,Q))}:function(R,M,Q){return R[M]=Q,R}},9114:f=>{f.exports=function(A,_){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:_}}},654:(f,A,_)=>{var E=_(2109),S=_(6916),I=_(1913),R=_(6530),M=_(614),Q=_(4994),H=_(9518),Z=_(7674),le=_(8003),ge=_(8880),Se=_(1320),Ne=_(5112),nt=_(7497),Nt=_(3383),Vt=R.PROPER,Dt=R.CONFIGURABLE,In=Nt.IteratorPrototype,dn=Nt.BUGGY_SAFARI_ITERATORS,hn=Ne("iterator"),We="values",ct="entries",bt=function(){return this};f.exports=function(bn,Je,dt,xt,pn,Dn,Wt){Q(dt,Je,xt);var j,Ae,xe,Ft=function(za){if(za===pn&&Gi)return Gi;if(!dn&&za in Er)return Er[za];switch(za){case"keys":case We:case ct:return function(){return new dt(this,za)}}return function(){return new dt(this)}},Tn=Je+" Iterator",Sr=!1,Er=bn.prototype,Nr=Er[hn]||Er["@@iterator"]||pn&&Er[pn],Gi=!dn&&Nr||Ft(pn),nu="Array"==Je&&Er.entries||Nr;if(nu&&(j=H(nu.call(new bn)))!==Object.prototype&&j.next&&(I||H(j)===In||(Z?Z(j,In):M(j[hn])||Se(j,hn,bt)),le(j,Tn,!0,!0),I&&(nt[Tn]=bt)),Vt&&pn==We&&Nr&&Nr.name!==We&&(!I&&Dt?ge(Er,"name",We):(Sr=!0,Gi=function(){return S(Nr,this)})),pn)if(Ae={values:Ft(We),keys:Dn?Gi:Ft("keys"),entries:Ft(ct)},Wt)for(xe in Ae)(dn||Sr||!(xe in Er))&&Se(Er,xe,Ae[xe]);else E({target:Je,proto:!0,forced:dn||Sr},Ae);return I&&!Wt||Er[hn]===Gi||Se(Er,hn,Gi,{name:pn}),nt[Je]=Gi,Ae}},9781:(f,A,_)=>{var E=_(7293);f.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:(f,A,_)=>{var E=_(7854),S=_(111),I=E.document,R=S(I)&&S(I.createElement);f.exports=function(M){return R?I.createElement(M):{}}},8324:f=>{f.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(f,A,_)=>{var E=_(317)("span").classList,S=E&&E.constructor&&E.constructor.prototype;f.exports=S===Object.prototype?void 0:S},8113:(f,A,_)=>{var E=_(5005);f.exports=E("navigator","userAgent")||""},7392:(f,A,_)=>{var E,S,I=_(7854),R=_(8113),M=I.process,Q=I.Deno,H=M&&M.versions||Q&&Q.version,Z=H&&H.v8;Z&&(S=(E=Z.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!S&&R&&(!(E=R.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=R.match(/Chrome\/(\d+)/))&&(S=+E[1]),f.exports=S},748:f=>{f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(f,A,_)=>{var E=_(7293),S=_(9114);f.exports=!E(function(){var I=Error("a");return!("stack"in I)||(Object.defineProperty(I,"stack",S(1,7)),7!==I.stack)})},2109:(f,A,_)=>{var E=_(7854),S=_(1236).f,I=_(8880),R=_(1320),M=_(3505),Q=_(9920),H=_(4705);f.exports=function(Z,le){var ge,Se,Ne,nt,Nt,Vt=Z.target,Dt=Z.global,In=Z.stat;if(ge=Dt?E:In?E[Vt]||M(Vt,{}):(E[Vt]||{}).prototype)for(Se in le){if(nt=le[Se],Ne=Z.noTargetGet?(Nt=S(ge,Se))&&Nt.value:ge[Se],!H(Dt?Se:Vt+(In?".":"#")+Se,Z.forced)&&void 0!==Ne){if(typeof nt==typeof Ne)continue;Q(nt,Ne)}(Z.sham||Ne&&Ne.sham)&&I(nt,"sham",!0),R(ge,Se,nt,Z)}}},7293:f=>{f.exports=function(A){try{return!!A()}catch{return!0}}},2104:(f,A,_)=>{var E=_(4374),S=Function.prototype,I=S.apply,R=S.call;f.exports="object"==typeof Reflect&&Reflect.apply||(E?R.bind(I):function(){return R.apply(I,arguments)})},4374:(f,A,_)=>{var E=_(7293);f.exports=!E(function(){var S=function(){}.bind();return"function"!=typeof S||S.hasOwnProperty("prototype")})},6916:(f,A,_)=>{var E=_(4374),S=Function.prototype.call;f.exports=E?S.bind(S):function(){return S.apply(S,arguments)}},6530:(f,A,_)=>{var E=_(9781),S=_(2597),I=Function.prototype,R=E&&Object.getOwnPropertyDescriptor,M=S(I,"name"),Q=M&&"something"===function(){}.name,H=M&&(!E||E&&R(I,"name").configurable);f.exports={EXISTS:M,PROPER:Q,CONFIGURABLE:H}},1702:(f,A,_)=>{var E=_(4374),S=Function.prototype,R=S.call,M=E&&S.bind.bind(R,R);f.exports=E?function(Q){return Q&&M(Q)}:function(Q){return Q&&function(){return R.apply(Q,arguments)}}},5005:(f,A,_)=>{var E=_(7854),S=_(614),I=function(R){return S(R)?R:void 0};f.exports=function(R,M){return arguments.length<2?I(E[R]):E[R]&&E[R][M]}},8173:(f,A,_)=>{var E=_(9662);f.exports=function(S,I){var R=S[I];return null==R?void 0:E(R)}},7854:(f,A,_)=>{var E=function(S){return S&&S.Math==Math&&S};f.exports=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof _.g&&_.g)||function(){return this}()||Function("return this")()},2597:(f,A,_)=>{var E=_(1702),S=_(7908),I=E({}.hasOwnProperty);f.exports=Object.hasOwn||function(R,M){return I(S(R),M)}},3501:f=>{f.exports={}},490:(f,A,_)=>{var E=_(5005);f.exports=E("document","documentElement")},4664:(f,A,_)=>{var E=_(9781),S=_(7293),I=_(317);f.exports=!E&&!S(function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a})},8361:(f,A,_)=>{var E=_(7854),S=_(1702),I=_(7293),R=_(4326),M=E.Object,Q=S("".split);f.exports=I(function(){return!M("z").propertyIsEnumerable(0)})?function(H){return"String"==R(H)?Q(H,""):M(H)}:M},9587:(f,A,_)=>{var E=_(614),S=_(111),I=_(7674);f.exports=function(R,M,Q){var H,Z;return I&&E(H=M.constructor)&&H!==Q&&S(Z=H.prototype)&&Z!==Q.prototype&&I(R,Z),R}},2788:(f,A,_)=>{var E=_(1702),S=_(614),I=_(5465),R=E(Function.toString);S(I.inspectSource)||(I.inspectSource=function(M){return R(M)}),f.exports=I.inspectSource},8340:(f,A,_)=>{var E=_(111),S=_(8880);f.exports=function(I,R){E(R)&&"cause"in R&&S(I,"cause",R.cause)}},9909:(f,A,_)=>{var E,S,I,R=_(8536),M=_(7854),Q=_(1702),H=_(111),Z=_(8880),le=_(2597),ge=_(5465),Se=_(6200),Ne=_(3501),nt="Object already initialized",Nt=M.TypeError;if(R||ge.state){var Dt=ge.state||(ge.state=new(0,M.WeakMap)),In=Q(Dt.get),dn=Q(Dt.has),hn=Q(Dt.set);E=function(We,ct){if(dn(Dt,We))throw new Nt(nt);return ct.facade=We,hn(Dt,We,ct),ct},S=function(We){return In(Dt,We)||{}},I=function(We){return dn(Dt,We)}}else{var wt=Se("state");Ne[wt]=!0,E=function(We,ct){if(le(We,wt))throw new Nt(nt);return ct.facade=We,Z(We,wt,ct),ct},S=function(We){return le(We,wt)?We[wt]:{}},I=function(We){return le(We,wt)}}f.exports={set:E,get:S,has:I,enforce:function(We){return I(We)?S(We):E(We,{})},getterFor:function(We){return function(ct){var bt;if(!H(ct)||(bt=S(ct)).type!==We)throw Nt("Incompatible receiver, "+We+" required");return bt}}}},614:f=>{f.exports=function(A){return"function"==typeof A}},4705:(f,A,_)=>{var E=_(7293),S=_(614),I=/#|\.prototype\./,R=function(le,ge){var Se=Q[M(le)];return Se==Z||Se!=H&&(S(ge)?E(ge):!!ge)},M=R.normalize=function(le){return String(le).replace(I,".").toLowerCase()},Q=R.data={},H=R.NATIVE="N",Z=R.POLYFILL="P";f.exports=R},111:(f,A,_)=>{var E=_(614);f.exports=function(S){return"object"==typeof S?null!==S:E(S)}},1913:f=>{f.exports=!1},2190:(f,A,_)=>{var E=_(7854),S=_(5005),I=_(614),R=_(7976),M=_(3307),Q=E.Object;f.exports=M?function(H){return"symbol"==typeof H}:function(H){var Z=S("Symbol");return I(Z)&&R(Z.prototype,Q(H))}},3383:(f,A,_)=>{var E,S,I,R=_(7293),M=_(614),Q=_(30),H=_(9518),Z=_(1320),le=_(5112),ge=_(1913),Se=le("iterator"),Ne=!1;[].keys&&("next"in(I=[].keys())?(S=H(H(I)))!==Object.prototype&&(E=S):Ne=!0),null==E||R(function(){var nt={};return E[Se].call(nt)!==nt})?E={}:ge&&(E=Q(E)),M(E[Se])||Z(E,Se,function(){return this}),f.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:Ne}},7497:f=>{f.exports={}},6244:(f,A,_)=>{var E=_(7466);f.exports=function(S){return E(S.length)}},133:(f,A,_)=>{var E=_(7392),S=_(7293);f.exports=!!Object.getOwnPropertySymbols&&!S(function(){var I=Symbol();return!String(I)||!(Object(I)instanceof Symbol)||!Symbol.sham&&E&&E<41})},8536:(f,A,_)=>{var E=_(7854),S=_(614),I=_(2788),R=E.WeakMap;f.exports=S(R)&&/native code/.test(I(R))},6277:(f,A,_)=>{var E=_(1340);f.exports=function(S,I){return void 0===S?arguments.length<2?"":I:E(S)}},30:(f,A,_)=>{var E,S=_(9670),I=_(6048),R=_(748),M=_(3501),Q=_(490),H=_(317),Z=_(6200)("IE_PROTO"),le=function(){},ge=function(nt){return"<script>"+nt+"<\/script>"},Se=function(nt){nt.write(ge("")),nt.close();var Nt=nt.parentWindow.Object;return nt=null,Nt},Ne=function(){try{E=new ActiveXObject("htmlfile")}catch{}var nt,Nt;Ne=typeof document<"u"?document.domain&&E?Se(E):((Nt=H("iframe")).style.display="none",Q.appendChild(Nt),Nt.src=String("javascript:"),(nt=Nt.contentWindow.document).open(),nt.write(ge("document.F=Object")),nt.close(),nt.F):Se(E);for(var Vt=R.length;Vt--;)delete Ne.prototype[R[Vt]];return Ne()};M[Z]=!0,f.exports=Object.create||function(nt,Nt){var Vt;return null!==nt?(le.prototype=S(nt),Vt=new le,le.prototype=null,Vt[Z]=nt):Vt=Ne(),void 0===Nt?Vt:I.f(Vt,Nt)}},6048:(f,A,_)=>{var E=_(9781),S=_(3353),I=_(3070),R=_(9670),M=_(5656),Q=_(1956);A.f=E&&!S?Object.defineProperties:function(H,Z){R(H);for(var le,ge=M(Z),Se=Q(Z),Ne=Se.length,nt=0;Ne>nt;)I.f(H,le=Se[nt++],ge[le]);return H}},3070:(f,A,_)=>{var E=_(7854),S=_(9781),I=_(4664),R=_(3353),M=_(9670),Q=_(4948),H=E.TypeError,Z=Object.defineProperty,le=Object.getOwnPropertyDescriptor;A.f=S?R?function(ge,Se,Ne){if(M(ge),Se=Q(Se),M(Ne),"function"==typeof ge&&"prototype"===Se&&"value"in Ne&&"writable"in Ne&&!Ne.writable){var nt=le(ge,Se);nt&&nt.writable&&(ge[Se]=Ne.value,Ne={configurable:"configurable"in Ne?Ne.configurable:nt.configurable,enumerable:"enumerable"in Ne?Ne.enumerable:nt.enumerable,writable:!1})}return Z(ge,Se,Ne)}:Z:function(ge,Se,Ne){if(M(ge),Se=Q(Se),M(Ne),I)try{return Z(ge,Se,Ne)}catch{}if("get"in Ne||"set"in Ne)throw H("Accessors not supported");return"value"in Ne&&(ge[Se]=Ne.value),ge}},1236:(f,A,_)=>{var E=_(9781),S=_(6916),I=_(5296),R=_(9114),M=_(5656),Q=_(4948),H=_(2597),Z=_(4664),le=Object.getOwnPropertyDescriptor;A.f=E?le:function(ge,Se){if(ge=M(ge),Se=Q(Se),Z)try{return le(ge,Se)}catch{}if(H(ge,Se))return R(!S(I.f,ge,Se),ge[Se])}},8006:(f,A,_)=>{var E=_(6324),S=_(748).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(I){return E(I,S)}},5181:(f,A)=>{A.f=Object.getOwnPropertySymbols},9518:(f,A,_)=>{var E=_(7854),S=_(2597),I=_(614),R=_(7908),M=_(6200),Q=_(8544),H=M("IE_PROTO"),Z=E.Object,le=Z.prototype;f.exports=Q?Z.getPrototypeOf:function(ge){var Se=R(ge);if(S(Se,H))return Se[H];var Ne=Se.constructor;return I(Ne)&&Se instanceof Ne?Ne.prototype:Se instanceof Z?le:null}},7976:(f,A,_)=>{var E=_(1702);f.exports=E({}.isPrototypeOf)},6324:(f,A,_)=>{var E=_(1702),S=_(2597),I=_(5656),R=_(1318).indexOf,M=_(3501),Q=E([].push);f.exports=function(H,Z){var le,ge=I(H),Se=0,Ne=[];for(le in ge)!S(M,le)&&S(ge,le)&&Q(Ne,le);for(;Z.length>Se;)S(ge,le=Z[Se++])&&(~R(Ne,le)||Q(Ne,le));return Ne}},1956:(f,A,_)=>{var E=_(6324),S=_(748);f.exports=Object.keys||function(I){return E(I,S)}},5296:(f,A)=>{var _={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,S=E&&!_.call({1:2},1);A.f=S?function(I){var R=E(this,I);return!!R&&R.enumerable}:_},7674:(f,A,_)=>{var E=_(1702),S=_(9670),I=_(6077);f.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R,M=!1,Q={};try{(R=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Q,[]),M=Q instanceof Array}catch{}return function(H,Z){return S(H),I(Z),M?R(H,Z):H.__proto__=Z,H}}():void 0)},2140:(f,A,_)=>{var E=_(7854),S=_(6916),I=_(614),R=_(111),M=E.TypeError;f.exports=function(Q,H){var Z,le;if("string"===H&&I(Z=Q.toString)&&!R(le=S(Z,Q))||I(Z=Q.valueOf)&&!R(le=S(Z,Q))||"string"!==H&&I(Z=Q.toString)&&!R(le=S(Z,Q)))return le;throw M("Can't convert object to primitive value")}},3887:(f,A,_)=>{var E=_(5005),S=_(1702),I=_(8006),R=_(5181),M=_(9670),Q=S([].concat);f.exports=E("Reflect","ownKeys")||function(H){var Z=I.f(M(H)),le=R.f;return le?Q(Z,le(H)):Z}},1320:(f,A,_)=>{var E=_(7854),S=_(614),I=_(2597),R=_(8880),M=_(3505),Q=_(2788),H=_(9909),Z=_(6530).CONFIGURABLE,le=H.get,ge=H.enforce,Se=String(String).split("String");(f.exports=function(Ne,nt,Nt,Vt){var Dt,In=!!Vt&&!!Vt.unsafe,dn=!!Vt&&!!Vt.enumerable,hn=!!Vt&&!!Vt.noTargetGet,wt=Vt&&void 0!==Vt.name?Vt.name:nt;S(Nt)&&("Symbol("===String(wt).slice(0,7)&&(wt="["+String(wt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!I(Nt,"name")||Z&&Nt.name!==wt)&&R(Nt,"name",wt),(Dt=ge(Nt)).source||(Dt.source=Se.join("string"==typeof wt?wt:""))),Ne!==E?(In?!hn&&Ne[nt]&&(dn=!0):delete Ne[nt],dn?Ne[nt]=Nt:R(Ne,nt,Nt)):dn?Ne[nt]=Nt:M(nt,Nt)})(Function.prototype,"toString",function(){return S(this)&&le(this).source||Q(this)})},2261:(f,A,_)=>{var E,S,I=_(6916),R=_(1702),M=_(1340),Q=_(7066),H=_(2999),Z=_(2309),le=_(30),ge=_(9909).get,Se=_(9441),Ne=_(7168),nt=Z("native-string-replace",String.prototype.replace),Nt=RegExp.prototype.exec,Vt=Nt,Dt=R("".charAt),In=R("".indexOf),dn=R("".replace),hn=R("".slice),wt=(S=/b*/g,I(Nt,E=/a/,"a"),I(Nt,S,"a"),0!==E.lastIndex||0!==S.lastIndex),We=H.BROKEN_CARET,ct=void 0!==/()??/.exec("")[1];(wt||ct||We||Se||Ne)&&(Vt=function(bt){var bn,Je,dt,xt,pn,Dn,Wt,j=this,Ae=ge(j),xe=M(bt),Ft=Ae.raw;if(Ft)return Ft.lastIndex=j.lastIndex,bn=I(Vt,Ft,xe),j.lastIndex=Ft.lastIndex,bn;var Tn=Ae.groups,Sr=We&&j.sticky,Er=I(Q,j),Nr=j.source,Gi=0,nu=xe;if(Sr&&(Er=dn(Er,"y",""),-1===In(Er,"g")&&(Er+="g"),nu=hn(xe,j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&"\n"!==Dt(xe,j.lastIndex-1))&&(Nr="(?: "+Nr+")",nu=" "+nu,Gi++),Je=new RegExp("^(?:"+Nr+")",Er)),ct&&(Je=new RegExp("^"+Nr+"$(?!\\s)",Er)),wt&&(dt=j.lastIndex),xt=I(Nt,Sr?Je:j,nu),Sr?xt?(xt.input=hn(xt.input,Gi),xt[0]=hn(xt[0],Gi),xt.index=j.lastIndex,j.lastIndex+=xt[0].length):j.lastIndex=0:wt&&xt&&(j.lastIndex=j.global?xt.index+xt[0].length:dt),ct&&xt&&xt.length>1&&I(nt,xt[0],Je,function(){for(pn=1;pn<arguments.length-2;pn++)void 0===arguments[pn]&&(xt[pn]=void 0)}),xt&&Tn)for(xt.groups=Dn=le(null),pn=0;pn<Tn.length;pn++)Dn[(Wt=Tn[pn])[0]]=xt[Wt[1]];return xt}),f.exports=Vt},7066:(f,A,_)=>{var E=_(9670);f.exports=function(){var S=E(this),I="";return S.global&&(I+="g"),S.ignoreCase&&(I+="i"),S.multiline&&(I+="m"),S.dotAll&&(I+="s"),S.unicode&&(I+="u"),S.sticky&&(I+="y"),I}},2999:(f,A,_)=>{var E=_(7293),S=_(7854).RegExp,I=E(function(){var Q=S("a","y");return Q.lastIndex=2,null!=Q.exec("abcd")}),R=I||E(function(){return!S("a","y").sticky}),M=I||E(function(){var Q=S("^r","gy");return Q.lastIndex=2,null!=Q.exec("str")});f.exports={BROKEN_CARET:M,MISSED_STICKY:R,UNSUPPORTED_Y:I}},9441:(f,A,_)=>{var E=_(7293),S=_(7854).RegExp;f.exports=E(function(){var I=S(".","s");return!(I.dotAll&&I.exec("\n")&&"s"===I.flags)})},7168:(f,A,_)=>{var E=_(7293),S=_(7854).RegExp;f.exports=E(function(){var I=S("(?<a>b)","g");return"b"!==I.exec("b").groups.a||"bc"!=="b".replace(I,"$<a>c")})},4488:(f,A,_)=>{var E=_(7854).TypeError;f.exports=function(S){if(null==S)throw E("Can't call method on "+S);return S}},3505:(f,A,_)=>{var E=_(7854),S=Object.defineProperty;f.exports=function(I,R){try{S(E,I,{value:R,configurable:!0,writable:!0})}catch{E[I]=R}return R}},8003:(f,A,_)=>{var E=_(3070).f,S=_(2597),I=_(5112)("toStringTag");f.exports=function(R,M,Q){R&&!Q&&(R=R.prototype),R&&!S(R,I)&&E(R,I,{configurable:!0,value:M})}},6200:(f,A,_)=>{var E=_(2309),S=_(9711),I=E("keys");f.exports=function(R){return I[R]||(I[R]=S(R))}},5465:(f,A,_)=>{var E=_(7854),S=_(3505),I="__core-js_shared__",R=E[I]||S(I,{});f.exports=R},2309:(f,A,_)=>{var E=_(1913),S=_(5465);(f.exports=function(I,R){return S[I]||(S[I]=void 0!==R?R:{})})("versions",[]).push({version:"3.20.3",mode:E?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(f,A,_)=>{var E=_(9303),S=Math.max,I=Math.min;f.exports=function(R,M){var Q=E(R);return Q<0?S(Q+M,0):I(Q,M)}},5656:(f,A,_)=>{var E=_(8361),S=_(4488);f.exports=function(I){return E(S(I))}},9303:f=>{var A=Math.ceil,_=Math.floor;f.exports=function(E){var S=+E;return S!=S||0===S?0:(S>0?_:A)(S)}},7466:(f,A,_)=>{var E=_(9303),S=Math.min;f.exports=function(I){return I>0?S(E(I),9007199254740991):0}},7908:(f,A,_)=>{var E=_(7854),S=_(4488),I=E.Object;f.exports=function(R){return I(S(R))}},7593:(f,A,_)=>{var E=_(7854),S=_(6916),I=_(111),R=_(2190),M=_(8173),Q=_(2140),H=_(5112),Z=E.TypeError,le=H("toPrimitive");f.exports=function(ge,Se){if(!I(ge)||R(ge))return ge;var Ne,nt=M(ge,le);if(nt){if(void 0===Se&&(Se="default"),Ne=S(nt,ge,Se),!I(Ne)||R(Ne))return Ne;throw Z("Can't convert object to primitive value")}return void 0===Se&&(Se="number"),Q(ge,Se)}},4948:(f,A,_)=>{var E=_(7593),S=_(2190);f.exports=function(I){var R=E(I,"string");return S(R)?R:R+""}},1694:(f,A,_)=>{var E={};E[_(5112)("toStringTag")]="z",f.exports="[object z]"===String(E)},1340:(f,A,_)=>{var E=_(7854),S=_(648),I=E.String;f.exports=function(R){if("Symbol"===S(R))throw TypeError("Cannot convert a Symbol value to a string");return I(R)}},6330:(f,A,_)=>{var E=_(7854).String;f.exports=function(S){try{return E(S)}catch{return"Object"}}},9711:(f,A,_)=>{var E=_(1702),S=0,I=Math.random(),R=E(1..toString);f.exports=function(M){return"Symbol("+(void 0===M?"":M)+")_"+R(++S+I,36)}},3307:(f,A,_)=>{var E=_(133);f.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(f,A,_)=>{var E=_(9781),S=_(7293);f.exports=E&&S(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5112:(f,A,_)=>{var E=_(7854),S=_(2309),I=_(2597),R=_(9711),M=_(133),Q=_(3307),H=S("wks"),Z=E.Symbol,le=Z&&Z.for,ge=Q?Z:Z&&Z.withoutSetter||R;f.exports=function(Se){if(!I(H,Se)||!M&&"string"!=typeof H[Se]){var Ne="Symbol."+Se;H[Se]=M&&I(Z,Se)?Z[Se]:Q&&le?le(Ne):ge(Ne)}return H[Se]}},9191:(f,A,_)=>{var E=_(5005),S=_(2597),I=_(8880),R=_(7976),M=_(7674),Q=_(9920),H=_(9587),Z=_(6277),le=_(8340),ge=_(7741),Se=_(2914),Ne=_(1913);f.exports=function(nt,Nt,Vt,Dt){var In=Dt?2:1,dn=nt.split("."),hn=dn[dn.length-1],wt=E.apply(null,dn);if(wt){var We=wt.prototype;if(!Ne&&S(We,"cause")&&delete We.cause,!Vt)return wt;var ct=E("Error"),bt=Nt(function(bn,Je){var dt=Z(Dt?Je:bn,void 0),xt=Dt?new wt(bn):new wt;return void 0!==dt&&I(xt,"message",dt),Se&&I(xt,"stack",ge(xt.stack,2)),this&&R(We,this)&&H(xt,this,bt),arguments.length>In&&le(xt,arguments[In]),xt});if(bt.prototype=We,"Error"!==hn&&(M?M(bt,ct):Q(bt,ct,{name:!0})),Q(bt,wt),!Ne)try{We.name!==hn&&I(We,"name",hn),We.constructor=bt}catch{}return bt}}},6992:(f,A,_)=>{var E=_(5656),S=_(1223),I=_(7497),R=_(9909),M=_(3070).f,Q=_(654),H=_(1913),Z=_(9781),le="Array Iterator",ge=R.set,Se=R.getterFor(le);f.exports=Q(Array,"Array",function(nt,Nt){ge(this,{type:le,target:E(nt),index:0,kind:Nt})},function(){var nt=Se(this),Nt=nt.target,Vt=nt.kind,Dt=nt.index++;return!Nt||Dt>=Nt.length?(nt.target=void 0,{value:void 0,done:!0}):"keys"==Vt?{value:Dt,done:!1}:"values"==Vt?{value:Nt[Dt],done:!1}:{value:[Dt,Nt[Dt]],done:!1}},"values");var Ne=I.Arguments=I.Array;if(S("keys"),S("values"),S("entries"),!H&&Z&&"values"!==Ne.name)try{M(Ne,"name",{value:"values"})}catch{}},1703:(f,A,_)=>{var E=_(2109),S=_(7854),I=_(2104),R=_(9191),M=S.WebAssembly,Q=7!==Error("e",{cause:7}).cause,H=function(le,ge){var Se={};Se[le]=R(le,ge,Q),E({global:!0,forced:Q},Se)},Z=function(le,ge){if(M&&M[le]){var Se={};Se[le]=R("WebAssembly."+le,ge,Q),E({target:"WebAssembly",stat:!0,forced:Q},Se)}};H("Error",function(le){return function(ge){return I(le,this,arguments)}}),H("EvalError",function(le){return function(ge){return I(le,this,arguments)}}),H("RangeError",function(le){return function(ge){return I(le,this,arguments)}}),H("ReferenceError",function(le){return function(ge){return I(le,this,arguments)}}),H("SyntaxError",function(le){return function(ge){return I(le,this,arguments)}}),H("TypeError",function(le){return function(ge){return I(le,this,arguments)}}),H("URIError",function(le){return function(ge){return I(le,this,arguments)}}),Z("CompileError",function(le){return function(ge){return I(le,this,arguments)}}),Z("LinkError",function(le){return function(ge){return I(le,this,arguments)}}),Z("RuntimeError",function(le){return function(ge){return I(le,this,arguments)}})},4916:(f,A,_)=>{var E=_(2109),S=_(2261);E({target:"RegExp",proto:!0,forced:/./.exec!==S},{exec:S})},3948:(f,A,_)=>{var E=_(7854),S=_(8324),I=_(8509),R=_(6992),M=_(8880),Q=_(5112),H=Q("iterator"),Z=Q("toStringTag"),le=R.values,ge=function(Ne,nt){if(Ne){if(Ne[H]!==le)try{M(Ne,H,le)}catch{Ne[H]=le}if(Ne[Z]||M(Ne,Z,nt),S[nt])for(var Nt in R)if(Ne[Nt]!==R[Nt])try{M(Ne,Nt,R[Nt])}catch{Ne[Nt]=R[Nt]}}};for(var Se in S)ge(E[Se]&&E[Se].prototype,Se);ge(I,"DOMTokenList")}},c={};function h(f){var A=c[f];if(void 0!==A)return A.exports;var _=c[f]={exports:{}};return s[f](_,_.exports,h),_.exports}h.n=f=>{var A=f&&f.__esModule?()=>f.default:()=>f;return h.d(A,{a:A}),A},h.d=(f,A)=>{for(var _ in A)h.o(A,_)&&!h.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:A[_]})},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),h.o=(f,A)=>Object.prototype.hasOwnProperty.call(f,A),h.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var g={};return(()=>{h.r(g),h.d(g,{AudioExtension:()=>In,AudioProcessor:()=>Vt,Extension:()=>Dt,Ticker:()=>hn,VideoProcessor:()=>Nt,logger:()=>H,reporter:()=>ge});var f=h(4341);function A(wt,We,ct){return We in wt?f(wt,We,{value:ct,enumerable:!0,configurable:!0,writable:!0}):wt[We]=ct,wt}h(1703),h(6992),h(3948);var _=h(3476),E=h.n(_);function S(){let wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,We=arguments.length>1?arguments[1]:void 0;const ct=Math.random().toString(16).substr(2,wt).toLowerCase();return ct.length===wt?"".concat(We).concat(ct):"".concat(We).concat(ct)+S(wt-ct.length,"")}h(4916);const I=Date.now(),R={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4};function M(){const wt=new Date;return wt.toTimeString().split(" ")[0]+":"+wt.getMilliseconds()}const Q=wt=>{for(const We in R)if(Object.prototype.hasOwnProperty.call(R,We)&&R[We]===wt)return We;return"DEFAULT"},H=new class{constructor(){A(this,"logLevel",R.DEBUG),A(this,"hookLog",void 0)}debug(){for(var wt=arguments.length,We=new Array(wt),ct=0;ct<wt;ct++)We[ct]=arguments[ct];const bt=[R.DEBUG].concat(We);this.log.apply(this,bt)}info(){for(var wt=arguments.length,We=new Array(wt),ct=0;ct<wt;ct++)We[ct]=arguments[ct];const bt=[R.INFO].concat(We);this.log.apply(this,bt)}warning(){for(var wt=arguments.length,We=new Array(wt),ct=0;ct<wt;ct++)We[ct]=arguments[ct];const bt=[R.WARNING].concat(We);this.log.apply(this,bt)}error(){for(var wt=arguments.length,We=new Array(wt),ct=0;ct<wt;ct++)We[ct]=arguments[ct];const bt=[R.ERROR].concat(We);this.log.apply(this,bt)}log(){for(var wt,We=arguments.length,ct=new Array(We),bt=0;bt<We;bt++)ct[bt]=arguments[bt];if(Date.now()-I<100)return void setTimeout(()=>{this.log(...ct)},Date.now()-I);const bn=Math.max(0,Math.min(4,ct[0]));if(ct[0]=M()+" Agora-Extension [".concat(Q(bn),"]:"),bn<this.logLevel)return;const Je=M()+" %cAgora-Extension [".concat(Q(bn),"]:");let dt=[];switch(bn){case R.DEBUG:dt=[Je,"color: #64B5F6;"].concat(ct.slice(1)),console.log.apply(console,dt);break;case R.INFO:dt=[Je,"color: #1E88E5; font-weight: bold;"].concat(ct.slice(1)),console.log.apply(console,dt);break;case R.WARNING:dt=[Je,"color: #FB8C00; font-weight: bold;"].concat(ct.slice(1)),console.warn.apply(console,dt);break;case R.ERROR:dt=[Je,"color: #B00020; font-weight: bold;"].concat(ct.slice(1)),console.error.apply(console,dt)}null===(wt=this.hookLog)||void 0===wt||wt.call(this,bn,dt)}};function Z(wt,We){var ct=Object.keys(wt);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(wt);We&&(bt=bt.filter(function(bn){return Object.getOwnPropertyDescriptor(wt,bn).enumerable})),ct.push.apply(ct,bt)}return ct}function le(wt){for(var We=1;We<arguments.length;We++){var ct=null!=arguments[We]?arguments[We]:{};We%2?Z(Object(ct),!0).forEach(function(bt){A(wt,bt,ct[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(wt,Object.getOwnPropertyDescriptors(ct)):Z(Object(ct)).forEach(function(bt){Object.defineProperty(wt,bt,Object.getOwnPropertyDescriptor(ct,bt))})}return wt}const ge=new class{constructor(){A(this,"apiInvokeMsgQueue",[]),A(this,"hookApiInvoke",void 0)}reportApiInvoke(wt){wt.timeout=wt.timeout||6e4,wt.reportResult=void 0===wt.reportResult||wt.reportResult;const We=Date.now(),ct=()=>({name:wt.name,apiInvokeTime:We,options:wt.options});let bt=!1;var bn;(bn=wt.timeout,new(E())(dt=>{window.setTimeout(dt,bn)})).then(()=>{bt||(this.sendApiInvoke(le(le({},ct()),{},{error:"API_INVOKE_TIMEOUT",success:!1})),H.debug("".concat(wt.name," timeout")))});const Je=new Error("".concat(wt.name,": this api invoke is end"));return{onSuccess:dt=>{if(bt)throw Je;bt=!0,this.sendApiInvoke(le(le({},ct()),{},{success:!0},wt.reportResult&&{result:dt}))},onError:dt=>{if(bt)throw dt;bt=!0,this.sendApiInvoke(le(le({},ct()),{},{success:!1,error:dt.toString()}))}}}sendApiInvoke(wt){this.hookApiInvoke?(this.hookApiInvoke([...this.apiInvokeMsgQueue,wt]),this.apiInvokeMsgQueue=[]):this.apiInvokeMsgQueue.push(wt)}};function Se(wt,We){var ct=Object.keys(wt);if(Object.getOwnPropertySymbols){var bt=Object.getOwnPropertySymbols(wt);We&&(bt=bt.filter(function(bn){return Object.getOwnPropertyDescriptor(wt,bn).enumerable})),ct.push.apply(ct,bt)}return ct}function Ne(wt){for(var We=1;We<arguments.length;We++){var ct=null!=arguments[We]?arguments[We]:{};We%2?Se(Object(ct),!0).forEach(function(bt){A(wt,bt,ct[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(wt,Object.getOwnPropertyDescriptors(ct)):Se(Object(ct)).forEach(function(bt){Object.defineProperty(wt,bt,Object.getOwnPropertyDescriptor(ct,bt))})}return wt}class nt extends class{constructor(){A(this,"_events",{}),A(this,"addListener",this.on)}getListeners(We){return this._events[We]?this._events[We].map(ct=>ct.listener):[]}on(We,ct){this._events[We]||(this._events[We]=[]);const bt=this._events[We];-1===this._indexOfListener(bt,ct)&&bt.push({listener:ct,once:!1})}once(We,ct){this._events[We]||(this._events[We]=[]);const bt=this._events[We];-1===this._indexOfListener(bt,ct)&&bt.push({listener:ct,once:!0})}off(We,ct){if(!this._events[We])return;const bt=this._events[We],bn=this._indexOfListener(bt,ct);-1!==bn&&bt.splice(bn,1),0===this._events[We].length&&delete this._events[We]}removeAllListeners(We){We?delete this._events[We]:this._events={}}emit(We){this._events[We]||(this._events[We]=[]);const ct=this._events[We].map(dt=>dt);for(var bt=arguments.length,bn=new Array(bt>1?bt-1:0),Je=1;Je<bt;Je++)bn[Je-1]=arguments[Je];for(let dt=0;dt<ct.length;dt+=1){const xt=ct[dt];xt.once&&this.off(We,xt.listener),xt.listener.apply(this,bn||[])}}_indexOfListener(We,ct){let bt=We.length;for(;bt--;)if(We[bt].listener===ct)return bt;return-1}emitAsPromise(We){for(var ct=arguments.length,bt=new Array(ct>1?ct-1:0),bn=1;bn<ct;bn++)bt[bn-1]=arguments[bn];return 0===this.getListeners(We).length?E().reject(new Error("No promise event handler.")):new(E())((Je,dt)=>{this.emit(We,...bt,Je,dt)})}emitAsPromiseNoResponse(We){for(var ct=arguments.length,bt=new Array(ct>1?ct-1:0),bn=1;bn<ct;bn++)bt[bn-1]=arguments[bn];return 0===this.getListeners(We).length?E().resolve():new(E())((Je,dt)=>{this.emit(We,...bt,Je,dt)})}}{get enabled(){return this._enabled}output(We,ct){if(this.outputTrack===We)return;const bt=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:{track:We?.toString()}});this.outputTrack=We,this.destination&&this.destination.updateInput({track:We,context:ct}),bt.onSuccess()}constructor(){super(),A(this,"inputTrack",void 0),A(this,"outputTrack",void 0),A(this,"_enabled",!0),A(this,"_source",void 0),A(this,"ID",S(6,"")),A(this,"destination",void 0),A(this,"context",void 0),A(this,"name",void 0)}enable(){if(this._enabled)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!0});H.info("".concat(this.name,"-").concat(this.ID," enabled")),this._enabled=!0;try{var ct;const bt=null===(ct=this.onEnableChange)||void 0===ct?void 0:ct.call(this,this._enabled);if(bt instanceof E())return bt.then(()=>{We.onSuccess()}).catch(bn=>{throw We.onError(bn),bn});We.onSuccess()}catch(bt){throw We.onError(bt),bt}}disable(){if(!this._enabled)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".setEnabled"),options:!1});H.info("".concat(this.name,"-").concat(this.ID," disabled")),this._enabled=!1;try{var ct;const bt=null===(ct=this.onEnableChange)||void 0===ct?void 0:ct.call(this,this._enabled);if(bt instanceof E())return bt.then(()=>{We.onSuccess()}).catch(bn=>{throw We.onError(bn),bn});We.onSuccess()}catch(bt){throw We.onError(bt),bt}}}class Nt extends nt{get kind(){return"video"}pipe(We){const ct=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:We.name}});if(this.destination===We)return ct.onSuccess(),We;if(We._source){const bt=new Error("Processor ".concat(We.name," already piped, please call unpipe beforehand."));throw ct.onError(bt),bt}return this.destination&&this.unpipe(),this.destination=We,We._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,context:this.context}),ct.onSuccess(),We}unpipe(){if(!this.destination)return;const We=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});H.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));try{const ct=this.destination;this.destination._source=void 0,this.destination=void 0,ct.reset()}finally{We.onSuccess()}}updateInput(We){var ct,bt;We.context!==this.context&&(this.context=We.context,null===(ct=this.onPiped)||void 0===ct||ct.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,context:We.context})),We.track&&this.inputTrack!==We.track&&(this.inputTrack=We.track,null===(bt=this.onTrack)||void 0===bt||bt.call(this,We.track,this.context))}reset(){var We;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.context=void 0,null===(We=this.onUnpiped)||void 0===We||We.call(this),this.destination&&this.destination.reset()}}class Vt extends nt{constructor(){super(...arguments),A(this,"inputNode",void 0),A(this,"outputNode",void 0),A(this,"destination",void 0),A(this,"context",void 0)}get kind(){return"audio"}pipe(We){const ct=ge.reportApiInvoke({name:"".concat(this.name,".pipe"),options:{processor:We.name}});if(this.destination===We)return ct.onSuccess(),We;if(We._source){const bt=new Error("Processor ".concat(We.name," already piped, please call unpipe beforehand."));throw ct.onError(bt),bt}return this.destination&&this.unpipe(),this.destination=We,We._source=this,this.context&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:this.context}),ct.onSuccess(),We}unpipe(){if(!this.destination)return;H.info("unpiping processor ".concat(this.destination.name,"-").concat(this.destination.ID));const We=ge.reportApiInvoke({name:"".concat(this.name,".unpipe"),options:{processor:this.destination.name}});try{var ct;let bt=this.destination;null===(ct=this.outputNode)||void 0===ct||ct.disconnect(),this.destination._source=void 0,this.destination=void 0,bt.reset()}finally{We.onSuccess()}}output(We,ct){if(We instanceof MediaStreamTrack)super.output(We,ct);else if(We instanceof AudioNode){if(this.outputNode===We)return;const bt=ge.reportApiInvoke({name:"".concat(this.name,".output"),options:Ne(Ne({},We instanceof MediaStreamTrack&&{track:We.toString()}),We instanceof AudioNode&&{audioNode:We.toString()})});this.outputNode=We,this.destination&&this.destination.updateInput({node:We,context:ct}),bt.onSuccess()}}updateInput(We){var ct,bt,bn;We.context!==this.context&&(this.context=We.context,null===(ct=this.onPiped)||void 0===ct||ct.call(this,this.context),this.destination&&this.destination.updateInput({track:this.outputTrack,node:this.outputNode,context:We.context})),We.track&&this.inputTrack!==We.track&&(this.inputTrack=We.track,null===(bt=this.onTrack)||void 0===bt||bt.call(this,We.track,this.context)),We.node&&this.inputNode!==We.node&&(this.inputNode=We.node,null===(bn=this.onNode)||void 0===bn||bn.call(this,We.node,this.context))}reset(){var We;this.context&&this.context.requestRevertConstraints(this),this.inputTrack=void 0,this.inputNode=void 0,this.context=void 0,null===(We=this.onUnpiped)||void 0===We||We.call(this),this.destination&&this.destination.reset()}}class Dt{constructor(){A(this,"__registered__",!1),A(this,"logger",H),A(this,"reporter",ge),A(this,"parameters",{})}createProcessor(){if(!this.__registered__)throw new Error("Extension not registered yet!");return this._createProcessor()}}class In extends Dt{}let dn;class hn{get running(){return this._running}constructor(We,ct){if(A(this,"type",void 0),A(this,"interval",void 0),A(this,"fn",void 0),A(this,"_running",!1),A(this,"_osc",void 0),!We)throw new Error;if(ct<=0)throw new Error;this.type=We,this.interval=ct}add(We){this.fn=We}remove(){this.fn=void 0}start(){if(!this._running)switch(this._running=!0,this.type){case"Timer":{const We=()=>{setTimeout(()=>{this.fn&&this.fn(),this._running&&We()},this.interval)};We();break}case"RAF":{const We=ct=>{requestAnimationFrame(bt=>{bt-ct<this.interval?this._running&&We(ct):(this.fn&&this.fn(),this._running&&We(bt))})};We(performance.now());break}case"Oscillator":{dn||(dn=new AudioContext);const We=dn.createGain();let ct;We.gain.value=0,We.connect(dn.destination);const bt=()=>{this.fn&&this.fn(),ct&&ct.disconnect(),ct=dn.createOscillator(),this._osc=ct,ct.connect(We),this._running&&(ct.onended=bt,ct.start(0),ct.stop(dn.currentTime+this.interval/1e3))};bt();break}}}stop(){this._running=!1,this._osc&&(this._osc.onended=null,this._osc=void 0)}}})(),g})()})(GU),!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(I8=HTMLCanvasElement.prototype.getContext,function(){let n=arguments;return"webgl"===n[0]&&(n=[].slice.call(arguments),n[0]="experimental-webgl"),I8.apply(null,n)}));const Pz=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function Xk(n){const o=new Uint8Array([99,114,121,112,116,105,105]),s=o.length,c=n,h=c.length,g=new Uint8Array(h),f=new Uint8Array(256);for(let I=0;I<256;I++)f[I]=I;let A=0;for(let I=0;I<256;I++)A=(A+f[I]+o[I%s])%256,[f[I],f[A]]=[f[A],f[I]];let _,E=0;A=0;for(let I=0;I<0+h;I++)E=(E+1)%256,A=(A+f[E])%256,[f[E],f[A]]=[f[A],f[E]],_=f[(f[E]+f[A])%256],I>=0&&(g[I-0]=c[I-0]^_);const S=String.fromCharCode.apply(null,Array.from(g));return Function("var winSize = 5; return `"+S+"`")()}const w8=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class T8{constructor(o,s){J(this,"program",void 0),J(this,"gl",void 0),J(this,"kernel",void 0),this.gl=o,this.kernel=s||w8,this.program=function(c,h){const g=Xk(h),f=function nL(n,o,s,c){const h=[];for(let g=0;g<o.length;++g)h.push(iS(n,o[g],0===g?n.VERTEX_SHADER:n.FRAGMENT_SHADER));return function(g,f,A,_){const E=g.createProgram();if(!E)throw new ye(pe.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(f.forEach(S=>{g.attachShader(E,S)}),A&&A.forEach((S,I)=>{g.bindAttribLocation(E,_?_[I]:I,S)}),g.linkProgram(E),!g.getProgramParameter(E,g.LINK_STATUS)){const S=g.getProgramInfoLog(E);throw g.deleteProgram(E),new ye(pe.WEBGL_INTERNAL_ERROR,"error in program linking:"+S)}return E}(n,h,s,c)}(c,[Xk(Pz),g]);{const A=c.getAttribLocation(f,"a_position"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}{const A=c.getAttribLocation(f,"a_texCoord"),_=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,_),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),c.STATIC_DRAW),c.enableVertexAttribArray(A),c.vertexAttribPointer(A,2,c.FLOAT,!1,0,0)}return f}(this.gl,this.kernel)}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(o,1)}}class pv extends T8{constructor(o,s,c,h){super(o,s),J(this,"xOffset",void 0),J(this,"yOffset",void 0),J(this,"denoiseLevel",5),this.xOffset=1/c,this.yOffset=1/h}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),s=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),c=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(s,this.xOffset,this.yOffset),this.gl.uniform1f(c,this.denoiseLevel),this.gl.uniform1f(o,1)}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel)}setSize(o,s){this.xOffset=1/o,this.yOffset=1/s}}const KH=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class zH extends pv{constructor(o,s,c){super(o,KH,s,c)}}const YH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class R8 extends pv{constructor(o,s,c){super(o,YH,s,c)}}const qH=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class JH extends pv{constructor(o,s,c){super(o,qH,s,c)}}const $H=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],XH=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],O8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],ZH=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class eG extends pv{constructor(o,s,c,h){super(o,$H,c,h),J(this,"inputTexture",void 0),J(this,"lightLevel",.1),J(this,"rednessLevel",.5),J(this,"mskin_he_max",175/180*3.141593),J(this,"mskin_he_min",115/180*3.141593),J(this,"mskin_hc_max",173/180*3.141593),J(this,"mskin_hc_min",116/180*3.141593),J(this,"mskin_hc_axis",2.04203545),J(this,"mfacts_rotate_c",0),J(this,"mfacts_rotate_le",0),J(this,"mfacts_rotate_ge",0),J(this,"tab_addr",null),J(this,"lutTextures",[]),this.inputTexture=s,this.init()}setUniforms(){const o=this.gl.getUniformLocation(this.program,"u_flipY"),s=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(s,this.denoiseLevel),this.gl.uniform1f(o,1);const c=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(c,this.lightLevel);const h=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(h,this.rednessLevel);const g=this.gl.getUniformLocation(this.program,"skin_he_max"),f=this.gl.getUniformLocation(this.program,"skin_he_min"),A=this.gl.getUniformLocation(this.program,"skin_hc_max"),_=this.gl.getUniformLocation(this.program,"skin_hc_min"),E=this.gl.getUniformLocation(this.program,"skin_hc_axis"),S=this.gl.getUniformLocation(this.program,"facts_rotate_c"),I=this.gl.getUniformLocation(this.program,"facts_rotate_le"),R=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(g,this.mskin_he_max),this.gl.uniform1f(f,this.mskin_he_min),this.gl.uniform1f(A,this.mskin_hc_max),this.gl.uniform1f(_,this.mskin_hc_min),this.gl.uniform1f(E,this.mskin_hc_axis),this.gl.uniform1f(S,this.mfacts_rotate_c),this.gl.uniform1f(I,this.mfacts_rotate_le),this.gl.uniform1f(R,this.mfacts_rotate_ge);const M=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(M,2);const Q=["lighten_lut"],H=[this.gl.TEXTURE3];for(let Z=0;Z<Q.length;Z++){const le=this.gl.getUniformLocation(this.program,Q[Z]);this.gl.activeTexture(H[Z]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[Z]),this.gl.uniform1i(le,Z+3)}}setParameters(o){void 0!==o.denoiseLevel&&(this.denoiseLevel=o.denoiseLevel),void 0!==o.lightLevel&&(this.lightLevel=o.lightLevel),void 0!==o.rednessLevel&&(this.rednessLevel=o.rednessLevel,this.updateRedness(this.rednessLevel)),o.lighteningContrastLevel&&this.updateLut(o.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(O8);const o=[this.tab_addr],s=[256],c=[1];for(let h=0;h<o.length;h++){const g=this.gl.createTexture();if(!g)throw new ye(pe.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,g),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,s[h],c[h],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,o[h]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(g)}}updateRedness(o){let c,h,g=o,f=g;g>1&&(g=1),g<0&&(g=0),f>1&&(f=1),f<0&&(f=0),this.mfacts_rotate_c=.8*g,f<.8&&(f=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*f)/180*3.141593,this.mskin_hc_min=(116-4*f)/180*3.141593,this.mskin_hc_axis=(117-4*f)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<1.5707965&&(this.mskin_hc_min=1.5707965),this.mskin_hc_axis<1.5707965&&(this.mskin_hc_axis=1.5707965),this.mskin_he_min<1.5707965&&(this.mskin_he_min=1.5707965),this.mskin_hc_max>3.141593&&(this.mskin_hc_max=3.141593),this.mskin_hc_axis>3.141593&&(this.mskin_hc_axis=3.141593),this.mskin_he_max>3.141593&&(this.mskin_he_max=3.141593),c=this.mskin_he_max-this.mskin_hc_max,h=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c,c=this.mskin_hc_min-this.mskin_he_min,h=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=c>.01?this.mfacts_rotate_c*h/c:this.mfacts_rotate_c}updateLut(o){let s=null;if(0===o&&(s=O8),1===o&&(s=ZH),2===o&&(s=XH),!s)throw new ye(pe.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+o);this.tab_addr=new Uint8Array(s);const c=[this.tab_addr],h=[256],g=[1];for(let f=0;f<c.length;f++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[f]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,h[f],g[f],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,c[f])}}class tG{constructor(){J(this,"gl",null),J(this,"canvas",null),J(this,"programs",[]),J(this,"commonProgram",null),J(this,"inputTexture",null),J(this,"outputTextures",[]),J(this,"fbos",[]),J(this,"originalFrameWidth",0),J(this,"originalFrameHeight",0),J(this,"enableBeauty",!1),J(this,"denoiseLevel",5),J(this,"lightLevel",.35),J(this,"rednessLevel",.5),J(this,"lighteningContrastLevel",1)}setEnableBeauty(o){this.enableBeauty=!!o}init(o,s,c){if(!Zc().supportWebGL)throw new ye(pe.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=c.getContext("webgl"),!this.gl)throw new ye(pe.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(o,s),!this.inputTexture)throw new ye(pe.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=c,this.programs.push(new T8(this.gl)),this.programs.push(new zH(this.gl,o,s)),this.programs.push(new R8(this.gl,o,s)),this.programs.push(new JH(this.gl,o,s)),this.programs.push(new eG(this.gl,this.inputTexture,o,s)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(o){if(!this.gl||!this.commonProgram||!this.canvas)return void se.warning("video effect manager is not init!");let s=0;if(this.originalFrameHeight===o.videoWidth&&this.originalFrameWidth===o.videoHeight)s=2;else if(this.originalFrameHeight!==o.videoHeight||this.originalFrameWidth!==o.videoWidth){if(se.debug("beauty effect: resolution changed ".concat(this.originalFrameWidth,"x").concat(this.originalFrameHeight," -> ").concat(o.videoWidth,"x").concat(o.videoHeight)),0===o.videoHeight||0===o.videoWidth)return void se.debug("beauty effect: skip 0 resolution frame");this.canvas.width=o.videoWidth,this.canvas.height=o.videoHeight,o.setAttribute("width",o.videoWidth.toString()),o.setAttribute("height",o.videoHeight.toString()),this.release(),this.init(o.videoWidth,o.videoHeight,this.canvas)}this.gl.viewport(0,0,o.videoWidth,o.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o);const c=this.enableBeauty?this.programs.length-1:0;for(let g=0;g<=c;g++){const f=this.programs[g].program;this.gl.useProgram(f);const A=this.gl.getUniformLocation(f,"u_image");this.programs[g].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[s+g%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[s+g%2]),this.gl.uniform1i(A,0)}this.gl.useProgram(this.commonProgram);const h=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(h,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(o){this.programs.forEach(s=>{s instanceof pv&&s.setParameters({denoiseLevel:o})}),this.denoiseLevel=o}setLightLevel(o){this.programs.forEach(s=>{s instanceof pv&&s.setParameters({lightLevel:o})}),this.lightLevel=o}setRednessLevel(o){this.programs.forEach(s=>{s instanceof pv&&s.setParameters({rednessLevel:o})}),this.rednessLevel=o}setContrastLevel(o){this.programs.forEach(s=>{s instanceof pv&&s.setParameters({lighteningContrastLevel:o})}),this.lighteningContrastLevel=o}setSize(o,s){this.programs.forEach(c=>{c instanceof pv&&c.setSize(o,s)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(o,s){if(!this.gl)throw new ye(pe.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let c=0;c<4;c++){const h=this.gl.createTexture();if(!h)throw new ye(pe.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),c<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,o,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,s,o,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const g=this.gl.createFramebuffer();if(!g)throw new ye(pe.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,g),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,h,0),this.outputTextures.push(h),this.fbos.push(g)}this.gl.viewport(0,0,o,s),this.originalFrameWidth=o,this.originalFrameHeight=s}}class nG{constructor(){J(this,"targetFrameRate",0),J(this,"recordedFrameCount",0),J(this,"recordingTime",2),J(this,"recordID",void 0)}startRecordBeautyEffectOutput(o){var s=arguments,c=this;return F(function*(){let h=s.length>1&&void 0!==s[1]?s[1]:4;if(c.recordID)throw new ye(pe.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const g=vs(6,"");return c.recordID=g,c.targetFrameRate=o,c.recordedFrameCount=0,c.recordingTime=h,yield Mc(1e3*c.recordingTime),c.recordID!==g?(c.recordID=void 0,!0):(c.recordID=void 0,c.recordedFrameCount<c.targetFrameRate*c.recordingTime/2?(se.warning("detect beauty effect overload, current framerate",c.recordedFrameCount/2),!1):(se.debug("beauty effect current framerate",c.recordedFrameCount/2),!0))})()}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class D8 extends GU.exports.VideoProcessor{constructor(){super(),J(this,"name","BeautyProcessor"),J(this,"fps",15),J(this,"canvas",void 0),J(this,"video",void 0),J(this,"manager",void 0),J(this,"overloadDetector",new nG),J(this,"stopChromeBackgroundLoop",null),J(this,"onOverload",void 0),J(this,"stopLoop",void 0),J(this,"lastRenderTime",0),this.fps=30,this.manager=new tG,this._enabled=!1}onEnableChange(o){var s=this;return F(function*(){s.manager.setEnableBeauty(o),s.context&&s.inputTrack&&(o?yield s.startEffect(s.inputTrack,s.context):yield s.stopEffect(s.inputTrack,s.context))})()}setBeautyEffectOptions(o){var s=this;return F(function*(){if(void 0!==(c=o).smoothnessLevel&&Jr(c.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==c.lighteningLevel&&Jr(c.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==c.rednessLevel&&Jr(c.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==c.lighteningContrastLevel&&Qa(c.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==o.smoothnessLevel){const c=Math.max(.1,10*o.smoothnessLevel);s.manager.setDenoiseLevel(c)}var c;if(void 0!==o.lighteningLevel){const c=Math.max(.1,o.lighteningLevel/2);s.manager.setLightLevel(c)}if(void 0!==o.rednessLevel){const c=Math.max(.01,o.rednessLevel);s.manager.setRednessLevel(c)}void 0!==o.lighteningContrastLevel&&s.manager.setContrastLevel(o.lighteningContrastLevel)})()}onTrack(o,s){var c=this;return F(function*(){var h;c.video&&c.enabled&&(null===(h=c.stopLoop)||void 0===h||h.call(c),yield c.stopEffect(o,s)),yield c.startEffect(o,s)})()}startEffect(o,s){var c=this;return F(function*(){if(!c.enabled)return;const h=wi(),g=yield c.renderWithWebGL(o);c.output(g,s),se.info("start video effect, output:",c.outputTrack),c.overloadDetector.startRecordBeautyEffectOutput(c.fps).then(_=>{_||c.onOverload&&c.onOverload()});let f=!1;c.stopLoop=()=>{f=!0};const A=()=>{c.enabled&&!f&&requestAnimationFrame(A);const _=Date.now(),E=1e3/c.fps,S=c.lastRenderTime?_-c.lastRenderTime:E;S<E||(c.lastRenderTime=_-(S-E),c.video&&c.video.paused&&c.video.play(),c.enabled&&c.video&&(c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()))};requestAnimationFrame(A),h.name===Ii.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?c.stopChromeBackgroundLoop=q5(()=>{c.enabled&&c.video&&c.manager.render(c.video),c.outputTrack&&c.outputTrack.requestFrame&&c.outputTrack.requestFrame(),c.overloadDetector.addFrame()},c.fps):c.stopChromeBackgroundLoop&&(c.stopChromeBackgroundLoop(),c.stopChromeBackgroundLoop=null)},!1)})()}renderWithWebGL(o){var s=this;return F(function*(){s.canvas&&(s.canvas.remove(),s.canvas=void 0),s.video&&(s.video.remove(),s.video=void 0),s.canvas=document.createElement("canvas"),s.video=document.createElement("video"),s.video.setAttribute("autoplay",""),s.video.setAttribute("muted",""),s.video.muted=!0,s.video.setAttribute("playsinline",""),s.video.setAttribute("style","display:none"),s.video.srcObject=new MediaStream([o]);const c=new Qn(_=>{const E=()=>{s.video&&s.video.removeEventListener("playing",E),_(void 0)};s.video&&s.video.addEventListener("playing",E)});s.video.play(),yield c;const h=o.getSettings(),g=h.width||s.video.videoWidth,f=h.height||s.video.videoHeight;if(h.frameRate&&s.fps!==h.frameRate&&(s.fps=h.frameRate,se.debug("beauty video processor: set fps to",s.fps)),se.debug("beauty video processor: width ".concat(g," height ").concat(f)),!g||!f)throw new ye(pe.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");s.canvas.width=g,s.canvas.height=f,s.video.setAttribute("width",g.toString()),s.video.setAttribute("height",f.toString()),s.manager.init(g,f,s.canvas);const A=Zc();return s.canvas.captureStream(A.supportRequestFrame?0:s.fps).getVideoTracks()[0]})()}stopEffect(o,s){var c=this;return F(function*(){se.info("stop video effect"),c.overloadDetector.stopRecordBeautyEffectOutput(),c.manager.release(),c.canvas&&c.canvas.remove(),c.video&&c.video.remove(),c.canvas=void 0,c.video=void 0,c.output(o,s)})()}}function WU(n){const o={};if(n.facingMode&&(o.facingMode=n.facingMode),n.cameraId&&(o.deviceId={exact:n.cameraId}),!n.encoderConfig)return o;const s=L0(n.encoderConfig);return o.width=s.width,o.height=s.height,!yF()&&s.frameRate&&(o.frameRate=s.frameRate),wi().name===Ii.EDGE&&"object"==typeof o.frameRate&&(o.frameRate.max=60),hs()&&(o.frameRate={ideal:30,max:30}),o}function rG(n){const o={};n.screenSourceType&&(o.mediaSource=n.screenSourceType),n.extensionId&&WD()&&(o.extensionId=n.extensionId),n.electronScreenSourceId&&(o.sourceId=n.electronScreenSourceId);const s=n.encoderConfig?DF(n.encoderConfig):null;return o.mandatory={chromeMediaSource:"desktop",maxWidth:s?s.width:void 0,maxHeight:s?s.height:void 0},s&&s.frameRate&&("number"==typeof s.frameRate?(o.mandatory.maxFrameRate=s.frameRate,o.mandatory.minFrameRate=s.frameRate):(o.mandatory.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||void 0,o.mandatory.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||void 0),o.frameRate=s.frameRate),s&&s.width&&(o.width=s.width),s&&s.height&&(o.height=s.height),o}function iG(n){const o={};if(yF()||(void 0!==n.AGC&&(o.autoGainControl=n.AGC),void 0!==n.AEC&&(o.echoCancellation=n.AEC),void 0!==n.ANS&&(o.noiseSuppression=n.ANS,WD()&&n.ANS&&(o.googHighpassFilter=n.ANS))),n.encoderConfig){const s=tk(n.encoderConfig);o.channelCount=s.stereo?2:1,o.sampleRate=s.sampleRate,o.sampleSize=s.sampleSize}return n.microphoneId&&(o.deviceId={exact:n.microphoneId}),EF()&&(o.sampleRate=void 0),o}var T1,rL;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(T1||(T1={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(rL||(rL={}));var k8,KU,P8,N8,M8,x8,zU,YU,L8,B8,F8,U8,V8,j8,iL,Q8,$i,oG,sG,aG,H8,cG,uG,Kh,lG=new class{constructor(){J(this,"_clientSize",null),J(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),J(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),J(this,"getStyle",n=>window.getComputedStyle(n,null)),J(this,"checkCssVisibleProperty",n=>{let o=!0;const s=this.getStyle(n),{display:c,visibility:h,opacity:g,filter:f}=s;return("none"===c||["hidden","collapse"].includes(h)||Number(g)<.1)&&(o=!1),!!o&&(f&&f.split(" ").filter(A=>{const _=A.split("(")[0];return["brightness","blur","opacity"].includes(_)}).map(A=>{const[_,E]=A.split(/\(|\)/);return[_,Number(E.match(/^[0-9\.]+/))]}).forEach(A=>{const[_,E]=A;switch(_){case"brightness":(E<.1||E>3)&&(o=!1);break;case"blur":E>3&&(o=!1);break;case"opacity":E<.1&&(o=!1)}}),o)}),J(this,"checkPropertyUpToAllParentNodes",(n,o)=>{let s=!0,c=!0;let g=n;for(;g&&c;)o(g)||(s=!1,c=!1),g=g.parentElement,g||(c=!1);return s}),J(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),J(this,"getSizeAboutClient",n=>{const{width:o,height:s,left:c,right:h,top:g,bottom:f}=n.getBoundingClientRect(),A=this.getClientWidth(),_=this.getClientHeight();return{width:o,height:s,left:c,right:h,top:g,bottom:f,clientWidth:A,clientHeight:_,clientMin:Math.min(A,_)}}),J(this,"checkActualSize",()=>{const{width:n,height:o,clientMin:s}=this._clientSize;return this.checkSizeIsVisible(n,o,s)}),J(this,"elementFromPoint",(n,o)=>document.elementFromPoint?document.elementFromPoint(n,o):null),J(this,"checkCoverForAPoint",(n,o,s)=>{const c=this.elementFromPoint(n,o);return null!==c&&c!==s}),J(this,"getPointPositionList",()=>{const{width:n,height:o,left:s,top:c}=this._clientSize,h=n/6,g=o/6,f=[],A=10**6;for(let _=0;_<5;_++)for(let E=0;E<5;E++)f.push({x:(s*A+(0===_?.1:4===_?(h*_*A-1e5)/A:h*_)*A)/A,y:(c*A+(0===E?.1:4===E?(g*E*A-1e5)/A:g*E)*A)/A});return[...f]}),J(this,"checkElementCover",n=>this.getPointPositionList().map(o=>this.checkCoverForAPoint(o.x,o.y,n)).filter(o=>!!o).length>6),J(this,"checkSizeIsVisible",(n,o,s)=>(n>50||s/n<=10)&&(o>50||s/o<=10)),J(this,"checkSizeOfPartInClient",()=>{const{left:n,right:o,top:s,bottom:c,clientHeight:h,clientWidth:g,clientMin:f}=this._clientSize;let A,_,E,S;if(n<0)A=0;else{if(!(n<g))return!1;A=n}if(o<0)return!1;if(_=o<g?o:g,s<0)E=0;else{if(!(s<h))return!1;E=s}return!(c<0)&&(S=c<h?c:h,this.checkSizeIsVisible(_-A,S-E,f))}),J(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),J(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(T1.COVERED);{const o=this.checkActualSize(),s=this.checkSizeOfPartInClient();return o&&!s?this.returnHiddenResult(T1.POSITION):o?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(T1.SIZE)}}return this.returnHiddenResult(T1.STYLE)}return this.returnHiddenResult(rL.UNMOUNTED)}return this.returnHiddenResult(rL.INVALID_HTML_ELEMENT)}),J(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,o=>"HTML"!==o.nodeName.toUpperCase()?null!==o.parentElement:!!document.documentElement))}};function dG(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function R1(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?dG(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):dG(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let ea=(k8=Qs("LocalVideoTrack","getTrackId"),KU=_s(),P8=Ny("LocalVideoTrack","_enabledMutex"),N8=_s(),M8=Ny("LocalVideoTrack","_enabledMutex"),x8=_s(),zU=bk({report:Jt}),YU=_s(),L8=_s(),B8=_s(),F8=_s(),U8=_s(),V8=_s(),j8=_s(),iL=_s(),k8((rr(($i=class Bz extends V3{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ra.PLAYING)}constructor(o,s,c,h,g,f){super(o,g),J(this,"trackMediaType","video"),J(this,"_player",void 0),J(this,"_videoBeautyProcessor",void 0),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"_encoderConfig",void 0),J(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),J(this,"_optimizationMode",void 0),J(this,"_videoHeight",void 0),J(this,"_videoWidth",void 0),J(this,"_forceBitrateLimit",void 0),J(this,"_enabled",!0),J(this,"processorDestination",void 0),J(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this._encoderConfig=s,this._scalabiltyMode=c,this._optimizationMode=h,this._hints=f||[],-1===this._hints.indexOf(Xc.SCREEN_TRACK)&&this.updateBitrateFromProfile(),this.processorContext=new hG(this.getTrackId()),this.processorDestination=new Zk(this.processorContext),this.bindProcessorDestinationEvents()}play(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof o?o:"HTMLElement",s]});if("string"==typeof o){const g=document.getElementById(o);g?o=g:(se.warning("[".concat(this.getTrackId(),'] can not find "#').concat(o,'" element, use document.body')),En("warning",this,'can not find "#'.concat(o,'" element, use document.body')),o=document.body)}se.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(s)),zt("debug",this,"play",s);const h=R1(R1(R1({},this._getDefaultPlayerConfig()),s),{},{trackId:this.getTrackId(),element:o});this._player?this._player.updateConfig(h):(this._player=new C8(h),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const g=this.getVideoElementVisibleStatus();this.emit(Vh.VIDEO_ELEMENT_VISIBLE_STATUS,g)}catch{}},Qt("CHECK_VIDEO_VISIBLE_INTERVAL")),c.onSuccess()}stop(){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return o.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,se.debug("[".concat(this.getTrackId(),"] stop video playback")),zt("debug",this,"stop"),o.onSuccess()}setEnabled(o,s){var c=this;return F(function*(){if(!s){if(o===c._enabled)return;c.stateCheck("enabled",o)}if(se.info("[".concat(c.getTrackId(),"] start setEnabled"),o),zt("info",c,"setEnabled",o),!o){c._originMediaStreamTrack.enabled=!1;try{yield Vo(c,mr.NEED_DISABLE_TRACK,c)}catch(h){throw se.error("[".concat(c.getTrackId(),"] setEnabled to false error"),h.toString()),zt("error",c,"setEnabled",o,h.toString()),h}return s||(c._enabled=!1),se.info("[".concat(c.getTrackId(),"] setEnabled to false success")),void zt("info",c,"setEnabled",o,"success")}c._originMediaStreamTrack.enabled=!0;try{yield Vo(c,mr.NEED_ENABLE_TRACK,c)}catch(h){throw se.error("[".concat(c.getTrackId(),"] setEnabled to true error"),h.toString()),zt("error",c,"setEnabled",o,h.toString()),h}se.info("[".concat(c.getTrackId(),"] setEnabled to true success")),zt("info",c,"setEnabled",o,"success"),s||(c._enabled=!0)})()}setMuted(o){var s=this;return F(function*(){o!==s._muted&&(s.stateCheck("muted",o),s._muted=o,s._originMediaStreamTrack.enabled=!o,se.debug("[".concat(s.getTrackId(),"] start set muted: ").concat(o)),zt("debug",s,"setMuted",o),o?yield Vo(s,mr.NEED_MUTE_TRACK,s):yield Vo(s,mr.NEED_UNMUTE_TRACK,s))})()}getStats(){return Ok(()=>{se.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead"),En("warning",this,"[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ly(this,mr.GET_STATS)||R1({},NV)}setBeautyEffect(o){var s=arguments,c=this;return F(function*(){let h=s.length>1&&void 0!==s[1]?s[1]:{};const g=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_VIDEO_TRACK_BEAUTY,options:[c.getTrackId(),o,h]});if(o||c._videoBeautyProcessor){if(HD()===ds.IOS||HD()===ds.ANDROID){const f=new ye(pe.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw g.onError(f),f}if(!c._enabled&&o){const f=new ye(pe.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw g.onError(f),f}if(se.info("[".concat(c.getTrackId(),"] start setBeautyEffect"),o,JSON.stringify(h)),zt("info",c,"setBeautyEffect",[o,h]),c._videoBeautyProcessor||o){try{if(!c._videoBeautyProcessor)if(c._videoBeautyProcessor=new D8,c.processor){const f=c.processor;c.pipe(c._videoBeautyProcessor).pipe(f)}else c.pipe(c._videoBeautyProcessor).pipe(c.processorDestination);yield c._videoBeautyProcessor.setBeautyEffectOptions(h),o?yield c._videoBeautyProcessor.enable():yield c._videoBeautyProcessor.disable()}catch(f){throw se.error("[".concat(c.getTrackId(),"] setBeautyEffect error"),f.toString()),zt("info",c,"setBeautyEffect",[o,h]),g.onError(f),f}se.info("[".concat(c.getTrackId(),"] setBeautyEffect success")),zt("info",c,"setBeautyEffect",[o,h],"success"),g.onSuccess()}else g.onSuccess()}})()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}getCurrentFrameImage(o){var s=arguments,c=this;return F(function*(){return c._player?c._player.getCurrentFrameToUint8Array(o,s.length>1&&void 0!==s[1]?s[1]:1):yield jU(o)})()}clone(o,s,c,h){const g=this._mediaStreamTrack.clone();return new Bz(g,o,s,c,h)}setBitrateLimit(o){var s=this;return F(function*(){if(se.debug("[".concat(s.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(o))),zt("debug",s,"setBitrateLimit",o),o){s._forceBitrateLimit=o,s._encoderConfig&&(s._encoderConfig.bitrateMax=s._encoderConfig.bitrateMax&&s._encoderConfig.bitrateMax<o.max_bitrate?s._encoderConfig.bitrateMax:o.max_bitrate,s._encoderConfig.bitrateMin=o.min_bitrate);try{yield Vo(s,mr.NEED_UPDATE_VIDEO_ENCODER,s)}catch(c){return c.throw()}}})()}setOptimizationMode(o){var s=this;return F(function*(){if("motion"!==o&&"detail"!==o&&"balanced"!==o)return se.error(pe.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"),void zt("error",s,"setOptimizationMode",o,pe.INVALID_PARAMS);const c=s._optimizationMode;try{s._optimizationMode=o,yield Vo(s,mr.SET_OPTIMIZATION_MODE,s)}catch(h){throw s._optimizationMode=c,se.error("[".concat(s.getTrackId(),"] set optimization mode failed"),h.toString()),zt("error",s,"setOptimizationMode",o,h.toString()),h}se.info("[".concat(s.getTrackId(),"] set optimization mode success (").concat(o,")")),zt("info",s,"setOptimizationMode",o,"success")})()}setScalabiltyMode(o){if(1===o.numSpatialLayers&&1!==o.numTemporalLayers)return se.error(pe.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),zt("error",this,"setScalabiltyMode",o,pe.INVALID_PARAMS),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=o,se.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(o,")")),zt("info",this,"setScalabiltyMode",o,"success")}updateMediaStreamTrackResolution(){PQ(this._originMediaStreamTrack).then(o=>{let[s,c]=o;this._videoHeight=c,this._videoWidth=s}).catch(Z3)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:o,height:s,frameRate:c}=this.getMediaStreamTrackSettings();if(!o||!s||!c)return;const[h,g]=function(f,A,_){const E=Qt("BITRATE_ADAPTER_TYPE");let S;const I=200*Math.pow(_/15,.6)*Math.pow(f*A/640/360,.75),R=I;if("STANDARD_BITRATE"===E)S=4*I;else{if("COMPATIABLE_BITRATE"!==E)return;S=2*I}return[Math.floor(S),Math.floor(R)]}(o,s,c)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=g,this._encoderConfig.bitrateMax=h,se.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(o,", h: ").concat(s,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")),zt("debug",this,"updateBitrateFromProfile",void 0,"[w: ".concat(o,", h: ").concat(s,", fps: ").concat(c,"] => [brMax: ").concat(h,", brMin: ").concat(g,"]")))}getVideoElementVisibleStatus(){try{var o,s;const c=null==this||null===(o=this._player)||void 0===o?void 0:o.getContainerElement(),h={track:this,element:null==this||null===(s=this._player)||void 0===s?void 0:s.getVideoElement(),slot:c?.parentElement},{element:g,slot:f}=h;if(this.isPlaying&&g instanceof HTMLVideoElement&&f instanceof HTMLElement){const A=lG.checkOneElementVisible(g),_=Object.assign({},A);if(_.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=_.visible;Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(_.visible?"Video is visible":"Invisible because of ".concat(_.reason))}return _}return}catch(c){throw new ye(pe.GET_VIDEO_ELEMENT_VISIBLE_ERROR,c.message)}}renewMediaStreamTrack(o){return F(function*(){})()}pipe(o){if(this._videoBeautyProcessor&&o!==this._videoBeautyProcessor)return this._videoBeautyProcessor.pipe(o);if(this.processor===o)return o;if(o._source)throw new ye(pe.INVALID_OPERATION,"Processor ".concat(o.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=o,this.processor._source=this,o.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),o}unpipe(){if(!this.processor)return;const o=this.processor;this.processor._source=void 0,this.processor=void 0,o.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}bindProcessorDestinationEvents(){var o=this;this.processorDestination.on(jh.ON_TRACK,function(){var s=F(function*(c){c?c!==o._mediaStreamTrack&&(o._mediaStreamTrack=c,o._updatePlayerSource(),yield Vo(o,mr.NEED_REPLACE_TRACK,o)):o._mediaStreamTrack!==o._originMediaStreamTrack&&(o._mediaStreamTrack=o._originMediaStreamTrack,o._updatePlayerSource(),yield Vo(o,mr.NEED_REPLACE_TRACK,o))});return function(c){return s.apply(this,arguments)}}())}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(jh.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Kl.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Kl.REQUEST_CONSTRAINTS)}}).prototype,"play",[KU],Object.getOwnPropertyDescriptor($i.prototype,"play"),$i.prototype),rr($i.prototype,"setEnabled",[P8,N8],Object.getOwnPropertyDescriptor($i.prototype,"setEnabled"),$i.prototype),rr($i.prototype,"setMuted",[M8,x8,zU],Object.getOwnPropertyDescriptor($i.prototype,"setMuted"),$i.prototype),rr($i.prototype,"getStats",[YU],Object.getOwnPropertyDescriptor($i.prototype,"getStats"),$i.prototype),rr($i.prototype,"setBeautyEffect",[L8],Object.getOwnPropertyDescriptor($i.prototype,"setBeautyEffect"),$i.prototype),rr($i.prototype,"getCurrentFrameData",[B8],Object.getOwnPropertyDescriptor($i.prototype,"getCurrentFrameData"),$i.prototype),rr($i.prototype,"getCurrentFrameImage",[F8],Object.getOwnPropertyDescriptor($i.prototype,"getCurrentFrameImage"),$i.prototype),rr($i.prototype,"setBitrateLimit",[U8],Object.getOwnPropertyDescriptor($i.prototype,"setBitrateLimit"),$i.prototype),rr($i.prototype,"setOptimizationMode",[V8],Object.getOwnPropertyDescriptor($i.prototype,"setOptimizationMode"),$i.prototype),rr($i.prototype,"setScalabiltyMode",[j8],Object.getOwnPropertyDescriptor($i.prototype,"setScalabiltyMode"),$i.prototype),rr($i.prototype,"updateMediaStreamTrackResolution",[iL],Object.getOwnPropertyDescriptor($i.prototype,"updateMediaStreamTrackResolution"),$i.prototype),Q8=$i))||Q8),G8=(oG=Qs("CameraVideoTrack","getTrackId"),sG=_s(),aG=Ny("CameraVideoTrack","_enabledMutex"),H8=_s(),cG=_s(),oG((rr((Kh=class extends ea{constructor(n,o,s,c,h,g){var f;super(n,o.encoderConfig?L0(o.encoderConfig):{},c,h,g),f=this,J(this,"_config",void 0),J(this,"_originalConstraints",void 0),J(this,"_constraints",void 0),J(this,"_enabled",!0),J(this,"_deviceName","default"),J(this,"tryResumeVideoForIOS15WeChat",F(function*(){Eu()&&!Sy()&&AF()&&f._enabled&&!f._isClosed&&(se.debug("[".concat(f.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),yield f.renewMediaStreamTrack())})),nr("info",this,"constructor",{trackId:g,deviceId:n.label,constraints:s,config:o}),this._config=o,this._originalConstraints=s,this._constraints=s,this._deviceName=n.label,this._config.encoderConfig&&(this._encoderConfig=L0(this._config.encoderConfig)),Xr.on(va.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Xr.on(va.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),this.bindProcessorContextEvents()}setDevice(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CAM_VIDEO_TRACK_SET_DEVICE,options:[o.getTrackId(),n]});if(se.info("[".concat(o.getTrackId(),"] set device to ").concat(n)),zt("info",o,"setDevice",n),o._enabled)try{const c=yield Jl.getDeviceById(n),h={};h.video=R1({},o._constraints),h.video.deviceId={exact:n},h.video.facingMode=void 0,o._originMediaStreamTrack.stop();let g=null;try{g=yield pl(h,o.getTrackId())}catch(f){throw se.error("[".concat(o.getTrackId(),"] setDevice failed"),f.toString()),zt("error",o,"setDevice",n,f.toString()),g=yield pl({video:o._constraints},o.getTrackId()),yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),f}yield o._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),o.updateMediaStreamTrackResolution(),o._deviceName=c.label,o._config.cameraId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),zt("error",o,"setDevice",n,c.toString()),c}else try{const c=yield Jl.getDeviceById(n);o._deviceName=c.label,o._config.cameraId=n,o._constraints.deviceId={exact:n}}catch(c){throw s.onError(c),se.error("[".concat(o.getTrackId(),"] setDevice error"),c.toString()),zt("error",o,"setDevice",n,c.toString()),c}se.info("[".concat(o.getTrackId(),"] setDevice success")),zt("info",o,"setDevice",n,"success"),s.onSuccess()})()}setEnabled(n,o){var s=this;return F(function*(){if(!o){if(n===s._enabled)return;s.stateCheck("enabled",n)}if(se.info("[".concat(s.getTrackId(),"] start setEnabled"),n),zt("info",s,"setEnabled",n),!n){s._originMediaStreamTrack.onended=null,s._originMediaStreamTrack.stop(),o||(s._enabled=!1);try{yield Vo(s,mr.NEED_DISABLE_TRACK,s)}catch(g){throw se.error("[".concat(s.getTrackId(),"] setEnabled to false error"),g.toString()),zt("error",s,"setEnabled",n,g.toString()),g}return se.info("[".concat(s.getTrackId(),"] setEnabled to false success")),void zt("info",s,"setEnabled",n,"success")}const c=R1({},s._constraints),h=Jl.searchDeviceIdByName(s._deviceName);h&&!c.deviceId&&(c.deviceId={exact:h});try{const g=yield pl({video:s._constraints},s.getTrackId());yield s._updateOriginMediaStreamTrack(g.getVideoTracks()[0],!1),yield Vo(s,mr.NEED_ENABLE_TRACK,s)}catch(g){throw se.error("[".concat(s.getTrackId(),"] setEnabled true error"),g.toString()),zt("error",s,"setEnabled",n,g.toString()),g}s.updateMediaStreamTrackResolution(),se.info("[".concat(s.getTrackId(),"] setEnabled to true success")),zt("info",s,"setEnabled",n,"success"),o||(s._enabled=!0)})()}setEncoderConfiguration(n,o){var s=this;return F(function*(){const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[s.getTrackId(),n]});if(!s._enabled){const f=new ye(pe.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw c.onError(f),f}n=L0(n),s._forceBitrateLimit&&(n.bitrateMax=s._forceBitrateLimit.max_bitrate?s._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=s._forceBitrateLimit.min_bitrate?s._forceBitrateLimit.min_bitrate:n.bitrateMin);const h=_c(s._config);h.encoderConfig=n;const g=WU(h);(Ql()||qc()||ag())&&(g.deviceId=void 0),se.debug("[".concat(s.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(g)),zt("debug",s,"setEncoderConfiguration",n);try{yield s._originMediaStreamTrack.applyConstraints(g),s.updateMediaStreamTrackResolution()}catch(f){const A=new ye(pe.UNEXPECTED_ERROR,f.toString());throw se.error("[".concat(s.getTrackId(),"] applyConstraints error"),A.toString()),zt("error",s,"setEncoderConfiguration",f.toString()),c.onError(A),A}s._config=h,s._constraints=g,s._originalConstraints=g,s._encoderConfig=n,-1===s._hints.indexOf(Xc.SCREEN_TRACK)&&s.updateBitrateFromProfile();try{yield Vo(s,mr.NEED_UPDATE_VIDEO_ENCODER,s)}catch(f){return c.onError(f),f.throw()}c.onSuccess()})()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){var n=this;if((qc()||ag())&&this._enabled&&!this._isClosed&&Xr.duringInterruption){const o=function(){var s=F(function*(){Xr.off(va.IOS_INTERRUPTION_END,o),n._enabled&&!n._isClosed&&(se.debug("[".concat(n.getTrackId(),"] try capture camera media device for interrupted iOS device.")),En("debug",n,"try capture camera media device for interrupted iOS device."),yield n.setEnabled(!1),yield n.setEnabled(!0))});return function(){return s.apply(this,arguments)}}();Xr.on(va.IOS_INTERRUPTION_END,o)}else se.debug("[".concat(this.getTrackId(),"] track ended")),js("debug",["MediaStreamTrack",this.getTrackId()],"ended"),this.emit(Vh.TRACK_ENDED)}renewMediaStreamTrack(n){var o=this;return F(function*(){const s=n||o._constraints,c=Jl.searchDeviceIdByName(o._deviceName);c&&!s.deviceId&&(s.deviceId={exact:c});const h=yield pl({video:s},o.getTrackId());o._constraints=s,yield o._updateOriginMediaStreamTrack(h.getVideoTracks()[0],!0),o.updateMediaStreamTrackResolution()})()}close(){super.close(),Xr.off(va.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),Xr.off(va.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}bindProcessorContextEvents(){var n=this;this.processorContext.on(Kl.REQUEST_UPDATE_CONSTRAINTS,function(){var o=F(function*(s,c,h){try{const g=Object.assign({},n._originalConstraints,...s);yield n.renewMediaStreamTrack(g),c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this.processorContext.on(Kl.REQUEST_CONSTRAINTS,function(){var o=F(function*(s){s(n._originMediaStreamTrack.getSettings())});return function(s){return o.apply(this,arguments)}}())}}).prototype,"setDevice",[sG],Object.getOwnPropertyDescriptor(Kh.prototype,"setDevice"),Kh.prototype),rr(Kh.prototype,"setEnabled",[aG,H8],Object.getOwnPropertyDescriptor(Kh.prototype,"setEnabled"),Kh.prototype),rr(Kh.prototype,"setEncoderConfiguration",[cG],Object.getOwnPropertyDescriptor(Kh.prototype,"setEncoderConfiguration"),Kh.prototype),uG=Kh))||uG);class Zk extends st{constructor(o){super(),J(this,"name","VideoProcessorDestination"),J(this,"ID","0"),J(this,"_source",void 0),J(this,"videoContext",void 0),J(this,"inputTrack",void 0),this.videoContext=o}get kind(){return"video"}get enabled(){return!0}pipe(){throw new ye(pe.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new ye(pe.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(o){if(o.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");o.track&&o.track!==this.inputTrack&&(this.inputTrack=o.track,this.emit(jh.ON_TRACK,o.track))}reset(){this.inputTrack=void 0,this.emit(jh.ON_TRACK,void 0)}}class hG extends st{constructor(o){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"trackId",void 0),this.trackId=o}getConstraints(){var o=this;return F(function*(){return yield Hh(o,Kl.REQUEST_CONSTRAINTS)})()}requestApplyConstraints(o,s){var c=this;return F(function*(){var h;return se.info("processor ".concat(s.name," requestApplyConstraints for ").concat(c.trackId)),o&&c.constraintsMap.set(s,o),Vo(c,Kl.REQUEST_UPDATE_CONSTRAINTS,Array.from(ov(h=c.constraintsMap).call(h)))})()}requestRevertConstraints(o){var s=this;return F(function*(){var c;if(s.constraintsMap.has(o))return se.info("processor ".concat(o.name," requestRevertConstraints for ").concat(s.trackId)),s.constraintsMap.delete(o),Vo(s,Kl.REQUEST_UPDATE_CONSTRAINTS,Array.from(ov(c=s.constraintsMap).call(c)))})()}registerStats(o,s,c){this.statsRegistry.find(h=>h.processorID===o.ID&&h.processorName===o.name&&h.type===s)||this.statsRegistry.push({processorName:o.name,processorID:o.ID,type:s,cb:c})}unregisterStats(o,s){}gatherStats(){return this.statsRegistry.map(o=>{let{processorID:s,processorName:c,type:h,cb:g}=o;return{processorID:s,processorName:c,type:h,stats:g()}})}}class oL{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(o,s){J(this,"uid",void 0),J(this,"_uintid",void 0),J(this,"_trust_in_room_",!0),J(this,"_trust_audio_enabled_state_",!0),J(this,"_trust_video_enabled_state_",!0),J(this,"_trust_audio_mute_state_",!0),J(this,"_trust_video_mute_state_",!0),J(this,"_audio_muted_",!1),J(this,"_video_muted_",!1),J(this,"_audio_enabled_",!0),J(this,"_video_enabled_",!0),J(this,"_audio_added_",!1),J(this,"_video_added_",!1),J(this,"_trust_video_stream_added_state_",!0),J(this,"_trust_audio_stream_added_state_",!0),J(this,"_audioTrack",void 0),J(this,"_videoTrack",void 0),J(this,"_audioSSRC",void 0),J(this,"_videoSSRC",void 0),J(this,"_audioOrtc",void 0),J(this,"_videoOrtc",void 0),J(this,"_cname",void 0),J(this,"_rtxSsrcId",void 0),this.uid=o,this._uintid=s}}var pG=Th,fG=Rd,W8=Jb;us({target:"Promise",stat:!0},{try:function(n){var o=fG.f(this),s=W8(n);return(s.error?o.reject:o.resolve)(s.value),o.promise}});var K8=pG,mG=us,gG=ri,_G=Ls,sL=ix,vG=Qu,AG=pu,yG=sp,z8=Yw,EG=j9,bG=Tu,SG=zg,Y8=Fs("isConcatSpreadable"),q8=9007199254740991,J8="Maximum allowed index exceeded",$8=gG.TypeError,CG=SG>=51||!_G(function(){var n=[];return n[Y8]=!1,n.concat()[0]!==n}),IG=bG("concat"),wG=function(n){if(!vG(n))return!1;var o=n[Y8];return void 0!==o?!!o:sL(n)};mG({target:"Array",proto:!0,forced:!CG||!IG},{concat:function(n){var o,s,c,h,g,f=AG(this),A=EG(f,0),_=0;for(o=-1,c=arguments.length;o<c;o++)if(wG(g=-1===o?f:arguments[o])){if(_+(h=yG(g))>q8)throw $8(J8);for(s=0;s<h;s++,_++)s in g&&z8(A,_,g[s])}else{if(_>=q8)throw $8(J8);z8(A,_++,g)}return A.length=_,A}});var X8={},TG=md,RG=gd,Z8=Ab.f,OG=vV,e6="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];X8.f=function(n){return e6&&"Window"==TG(n)?function(o){try{return Z8(o)}catch{return OG(e6)}}(n):Z8(RG(n))};var e2={};e2.f=Fs;var t6=ip,kG=Bs,PG=e2,NG=Ad.f,Ka=function(n){var o=t6.Symbol||(t6.Symbol={});kG(o,n)||NG(o,n,{value:PG.f(n)})},O1=us,qU=ri,MG=hu,xG=sa,t2=du,LG=Qi,D1=ju,oS=fm,JU=Ls,vc=Bs,BG=ix,FG=Is,UG=Qu,VG=nc,k1=qg,n6=jc,r6=pu,aL=gd,$U=Xv,i6=Rc,XU=lh,n2=Fm,o6=ic,jG=Ab,s6=X8,ZU=Ju,a6=Gg,QG=Ad,HG=SA,c6=Vv,GG=vO,e4=FA,r2=zv.exports,u6=aI,l6=ur,d6=Fs,WG=e2,KG=Ka,zG=mp,h6=pf,cL=H9.forEach,Yd=f_("hidden"),uL="Symbol",p6=d6("toPrimitive"),YG=h6.set,f6=h6.getterFor(uL),Ff=Object.prototype,Vy=qU.Symbol,sS=Vy&&Vy.prototype,m6=qU.TypeError,g6=qU.QObject,o2=MG("JSON","stringify"),_6=a6.f,jy=QG.f,lL=s6.f,Qy=c6.f,t4=LG([].push),Uf=r2("symbols"),aS=r2("op-symbols"),s2=r2("string-to-symbol-registry"),Zl=r2("symbol-to-string-registry"),v6=r2("wks"),a2=!g6||!g6.prototype||!g6.prototype.findChild,dL=D1&&JU(function(){return 7!=n2(jy({},"a",{get:function(){return jy(this,"a",{value:7}).a}})).a})?function(n,o,s){var c=_6(Ff,o);c&&delete Ff[o],jy(n,o,s),c&&n!==Ff&&jy(Ff,o,c)}:jy,hL=function(n,o){var s=Uf[n]=n2(sS);return YG(s,{type:uL,tag:n,description:o}),D1||(s.description=o),s},P1=function(n,o,s){n===Ff&&P1(aS,o,s),n6(n);var c=$U(o);return n6(s),vc(Uf,c)?(s.enumerable?(vc(n,Yd)&&n[Yd][c]&&(n[Yd][c]=!1),s=n2(s,{enumerable:XU(0,!1)})):(vc(n,Yd)||jy(n,Yd,XU(1,{})),n[Yd][c]=!0),dL(n,c,s)):jy(n,c,s)},A6=function(n,o){n6(n);var s=aL(o),c=o6(s).concat(r4(s));return cL(c,function(h){D1&&!t2(y6,s,h)||P1(n,h,s[h])}),n},y6=function(n){var o=$U(n),s=t2(Qy,this,o);return!(this===Ff&&vc(Uf,o)&&!vc(aS,o))&&(!(s||!vc(this,o)||!vc(Uf,o)||vc(this,Yd)&&this[Yd][o])||s)},Hy=function(n,o){var s=aL(n),c=$U(o);if(s!==Ff||!vc(Uf,c)||vc(aS,c)){var h=_6(s,c);return!h||!vc(Uf,c)||vc(s,Yd)&&s[Yd][c]||(h.enumerable=!0),h}},n4=function(n){var o=lL(aL(n)),s=[];return cL(o,function(c){vc(Uf,c)||vc(u6,c)||t4(s,c)}),s},r4=function(n){var o=n===Ff,s=lL(o?aS:aL(n)),c=[];return cL(s,function(h){!vc(Uf,h)||o&&!vc(Ff,h)||t4(c,Uf[h])}),c};if(oS||(e4(sS=(Vy=function(){if(VG(sS,this))throw m6("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?i6(arguments[0]):void 0,o=l6(n),s=function(c){this===Ff&&t2(s,aS,c),vc(this,Yd)&&vc(this[Yd],o)&&(this[Yd][o]=!1),dL(this,o,XU(1,c))};return D1&&a2&&dL(Ff,o,{configurable:!0,set:s}),hL(o,n)}).prototype,"toString",function(){return f6(this).tag}),e4(Vy,"withoutSetter",function(n){return hL(l6(n),n)}),c6.f=y6,QG.f=P1,HG.f=A6,a6.f=Hy,jG.f=s6.f=n4,ZU.f=r4,WG.f=function(n){return hL(d6(n),n)},D1&&jy(sS,"description",{configurable:!0,get:function(){return f6(this).description}})),O1({global:!0,wrap:!0,forced:!oS,sham:!oS},{Symbol:Vy}),cL(o6(v6),function(n){KG(n)}),O1({target:uL,stat:!0,forced:!oS},{for:function(n){var o=i6(n);if(vc(s2,o))return s2[o];var s=Vy(o);return s2[o]=s,Zl[s]=o,s},keyFor:function(n){if(!k1(n))throw m6(n+" is not a symbol");if(vc(Zl,n))return Zl[n]},useSetter:function(){a2=!0},useSimple:function(){a2=!1}}),O1({target:"Object",stat:!0,forced:!oS,sham:!D1},{create:function(n,o){return void 0===o?n2(n):A6(n2(n),o)},defineProperty:P1,defineProperties:A6,getOwnPropertyDescriptor:Hy}),O1({target:"Object",stat:!0,forced:!oS},{getOwnPropertyNames:n4,getOwnPropertySymbols:r4}),O1({target:"Object",stat:!0,forced:JU(function(){ZU.f(1)})},{getOwnPropertySymbols:function(n){return ZU.f(r6(n))}}),o2&&O1({target:"JSON",stat:!0,forced:!oS||JU(function(){var n=Vy();return"[null]"!=o2([n])||"{}"!=o2({a:n})||"{}"!=o2(Object(n))})},{stringify:function(n,o,s){var c=GG(arguments),h=o;if((UG(o)||void 0!==n)&&!k1(n))return BG(o)||(o=function(g,f){if(FG(h)&&(f=t2(h,this,g,f)),!k1(f))return f}),c[1]=o,xG(o2,null,c)}}),!sS[p6]){var Nz=sS.valueOf;e4(sS,p6,function(n){return t2(Nz,this)})}zG(Vy,uL),u6[Yd]=!0,Ka("asyncIterator"),Ka("hasInstance"),Ka("isConcatSpreadable"),Ka("iterator"),Ka("match"),Ka("matchAll"),Ka("replace"),Ka("search"),Ka("species"),Ka("split"),Ka("toPrimitive"),Ka("toStringTag"),Ka("unscopables"),mp(ri.JSON,"JSON",!0);var qG=ip.Symbol;Ka("asyncDispose"),Ka("dispose"),Ka("matcher"),Ka("metadata"),Ka("observable"),Ka("patternMatch"),Ka("replaceAll");var i4=qG,o4=e2.f("asyncIterator");function s4(n){this.wrapped=n}function cS(n){var o,s;function c(g,f){try{var A=n[g](f),_=A.value,E=_ instanceof s4;K8.resolve(E?_.wrapped:_).then(function(S){E?c("return"===g?"return":"next",S):h(A.done?"return":"normal",S)},function(S){c("throw",S)})}catch(S){h("throw",S)}}function h(g,f){switch(g){case"return":o.resolve({value:f,done:!0});break;case"throw":o.reject(f);break;default:o.resolve({value:f,done:!1})}(o=o.next)?c(o.key,o.arg):s=null}this._invoke=function(g,f){return new K8(function(A,_){var E={key:g,arg:f,resolve:A,reject:_,next:null};s?s=s.next=E:(o=s=E,c(g,f))})},"function"!=typeof n.return&&(this.return=void 0)}function c2(n){return function(){return new cS(n.apply(this,arguments))}}function As(n){return new s4(n)}cS.prototype["function"==typeof i4&&o4||"@@asyncIterator"]=function(){return this},cS.prototype.next=function(n){return this._invoke("next",n)},cS.prototype.throw=function(n){return this._invoke("throw",n)},cS.prototype.return=function(n){return this._invoke("return",n)};var JG=e2.f("iterator");function pL(n,o){var s={},c=!1;function h(g,f){return c=!0,f=new K8(function(A){A(n[g](f))}),{done:!1,value:o(f)}}return s[void 0!==i4&&JG||"@@iterator"]=function(){return this},s.next=function(g){return c?(c=!1,g):h("next",g)},"function"==typeof n.throw&&(s.throw=function(g){if(c)throw c=!1,g;return h("throw",g)}),"function"==typeof n.return&&(s.return=function(g){return c?(c=!1,g):h("return",g)}),s}var fL=o4,mL=ba,N1=ue,fv=Ac,_L=Mr,$G=sA,u2=fo.f,b6=Bp,mv=G.Symbol,Gy=mv&&mv.prototype;if(O&&rt(mv)&&(!("description"in Gy)||void 0!==mv().description)){var gv={},l2=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:$G(arguments[0]),o=_L(Gy,this)?new mv(n):void 0===n?mv():mv(n);return""===n&&(gv[o]=!0),o};b6(l2,mv),l2.prototype=Gy,Gy.constructor=l2;var S6="Symbol(test)"==String(mv("test")),bg=N1(Gy.toString),uS=N1(Gy.valueOf),d2=/^Symbol\((.*)\)[^)]+$/,XG=N1("".replace),c4=N1("".slice);u2(Gy,"description",{configurable:!0,get:function(){var n=uS(this),o=bg(n);if(fv(gv,n))return"";var s=S6?c4(o,7,-1):XG(o,d2,"$1");return""===s?void 0:s}}),mL({global:!0,forced:!0},{Symbol:l2})}var qd={exports:{}};function M1(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function h2(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?M1(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):M1(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function u4(n,o,s,c,h,g){let f=[],A=[],_=[],E=[],S=!1,I=!1;if(qd.exports.parse(n).mediaDescriptions.forEach(R=>{g&&g!==R.attributes.direction||("video"!==R.media.mediaType||S||(A=R.attributes.payloads,E=R.attributes.extmaps,S=!0),"audio"!==R.media.mediaType||I||(f=R.attributes.payloads,_=R.attributes.extmaps,I=!0))}),!E||0===A.length)throw new Error("Cannot get video capabilities from SDP.");if(!_||0===f.length)throw new Error("Cannot get audio capabilities from SDP.");return A.forEach(R=>{var M;null!==(M=R.rtpMap)&&void 0!==M&&M.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),f.forEach(R=>{var M;null!==(M=R.rtpMap)&&void 0!==M&&M.clockRate&&(R.rtpMap.clockRate=parseInt(R.rtpMap.clockRate))}),o&&(f=f.filter(R=>{var M;return"rtx"!==(null===(M=R.rtpMap)||void 0===M?void 0:M.encodingName.toLowerCase())}),A=A.filter(R=>{var M;return"rtx"!==(null===(M=R.rtpMap)||void 0===M?void 0:M.encodingName.toLowerCase())})),s&&(A=A.filter(R=>{var M;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(M=R.rtpMap)||void 0===M?void 0:M.encodingName)||"")})),c&&c?.length>0&&(f=f.filter(R=>{var M;return c.includes((null===(M=R.rtpMap)||void 0===M?void 0:M.encodingName.toLowerCase())||"")})),h&&h?.length>0&&(A=A.filter(R=>{var M;return h.includes((null===(M=R.rtpMap)||void 0===M?void 0:M.encodingName.toLowerCase())||"")})),{audioCodecs:f,videoCodecs:A,audioExtensions:_,videoExtensions:E}}function x1(n){const o=qd.exports.parse(n);let s,c;for(const h of o.mediaDescriptions){if(!s){const g=h.attributes.iceUfrag,f=h.attributes.icePwd;if(!g||!f)throw new Error("Cannot get iceUfrag or icePwd from SDP.");s={iceUfrag:g,icePwd:f}}if(!c){const g=h.attributes.fingerprints;g.length>0&&(c={fingerprints:g})}}if(!c&&o.attributes.fingerprints.length>0&&(c={fingerprints:o.attributes.fingerprints}),!c||!s)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:s,dtlsParameters:c}}function C6(n,o,s){const{cname:c}=n;let h;void 0!==o&&void 0!==s?(h=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:o,port:s.toString(),type:"host",extension:{}}],se.debug("Using remote candidate from AP ".concat(o,":").concat(s)),En("debug",[],"Using remote candidate from AP ".concat(o,":").concat(s))):h=n.iceParameters.candidates.map(_=>({foundation:_.foundation,componentId:"1",transport:_.protocol,priority:_.priority.toString(),connectionAddress:_.ip,port:_.port.toString(),type:_.type,extension:{}}));const g={fingerprints:n.dtlsParameters.fingerprints.map(_=>({hashFunction:_.algorithm,fingerprint:_.fingerprint}))},f={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let A;switch(n.dtlsParameters.role){case"server":A="passive";break;case"client":A="active";break;case"auto":A="actpass"}return{dtlsParameters:g,iceParameters:f,candidates:h,rtpCapabilities:I6(n.rtpCapabilities),setup:A,cname:c}}function L1(n,o,s){const c=[],h=[];return n.forEach(g=>{let{ssrcId:f,rtx:A}=g;const _=vs(8,"track-"),E={ssrcId:f,attributes:h2({label:_,mslabel:s=s||vs(10,""),msid:"".concat(s," ").concat(_)},o&&{cname:o})};if(c.push(E),void 0!==A){const S={ssrcId:A,attributes:h2({label:_,mslabel:s,msid:"".concat(s," ").concat(_)},o&&{cname:o})};c.push(S),h.push({semantic:"FID",ssrcIds:[f,A]})}}),n.length>1&&h.push({semantic:"SIM",ssrcIds:n.map(g=>{let{ssrcId:f}=g;return f})}),{ssrcs:c,ssrcGroups:h}}function vL(n,o){o instanceof gc&&n.attributes.payloads.forEach(s=>{var c;const h=null===(c=s.rtpMap)||void 0===c?void 0:c.encodingName.toLowerCase();if(!h||-1===["opus","pcmu","pcma","g722"].indexOf(h))return;s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters.minptime="10",s.fmtp.parameters.useinbandfec="1";const g=o._encoderConfig;g&&("pcmu"!==h&&"pcma"!==h&&"g722"!==h&&(g.bitrate&&!hs()&&(s.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*g.bitrate))),g.sampleRate&&(s.fmtp.parameters.maxplaybackrate="".concat(g.sampleRate),s.fmtp.parameters["sprop-maxcapturerate"]="".concat(g.sampleRate))),g.stereo&&(s.fmtp.parameters.stereo="1",s.fmtp.parameters["sprop-stereo"]="1"))})}function Jd(n){const o=n.attributes.unrecognized.findIndex(s=>"x-google-flag"===s.attField&&"conference"===s.attValue);-1!==o&&n.attributes.unrecognized.splice(o,1)}function l4(n,o){if(!(o instanceof ea&&o._encoderConfig&&-1===o._hints.indexOf(Xc.SCREEN_TRACK)))return;const s=o._encoderConfig;Zc().supportMinBitrate&&s.bitrateMin&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-min-bitrate"]="".concat(s.bitrateMin))}),Zc().supportMinBitrate&&!o._hints.includes(Xc.LOW_STREAM)&&s.bitrateMax&&n.attributes.payloads.forEach(c=>{var h;["h264","vp8","vp9","av1"].includes((null===(h=c.rtpMap)||void 0===h?void 0:h.encodingName.toLowerCase())||"")&&(c.fmtp||(c.fmtp={parameters:{}}),c.fmtp.parameters["x-google-start-bitrate"]="".concat(Qt("X_GOOGLE_START_BITRATE")||Math.floor(s.bitrateMax)))})}function p2(n,o,s){if(!o)return;let c,h;if("video"===n.media.mediaType?(c=s.videoExtensions,h=s.videoCodecs):(c=s.audioExtensions,h=s.audioCodecs),!0===o.tcc){const g=c.find(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName);g&&(n.attributes.extmaps.find(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),(f=h,A=n.attributes.payloads,A.filter(_=>!!f.find(E=>E.payloadType===_.payloadType&&!!E.rtcpFeedbacks.find(S=>"transport-cc"===S.type)))).forEach(f=>{f.rtcpFeedbacks.find(A=>"transport-cc"===A.type)||f.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(!1===o.tcc){const g=n.attributes.extmaps.findIndex(f=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===f.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(f=>{const A=f.rtcpFeedbacks.findIndex(_=>"transport-cc"===_.type);-1!==A&&f.rtcpFeedbacks.splice(A,1)})}var f,A;if(!0===o.remb){const g=c.find(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName);g&&(n.attributes.extmaps.find(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName)||n.attributes.extmaps.push({entry:g.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(f,A){return A.filter(_=>!!f.find(E=>E.payloadType===_.payloadType&&!!E.rtcpFeedbacks.find(S=>"goog-remb"===S.type)))}(h,n.attributes.payloads).forEach(f=>{f.rtcpFeedbacks.find(A=>"goog-remb"===A.type)||f.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(!1===o.remb){const g=n.attributes.extmaps.findIndex(f=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===f.extensionName);-1!==g&&n.attributes.extmaps.splice(g,1),n.attributes.payloads.forEach(f=>{const A=f.rtcpFeedbacks.findIndex(_=>"goog-remb"===_.type);-1!==A&&f.rtcpFeedbacks.splice(A,1)})}}function lS(n,o,s,c,h,g){if("videoExtensions"===s||"audioExtensions"===s){const f=[];return n[s].forEach(A=>{o[s].some((_,E)=>{if(A.entry===_.entry&&A.extensionName===_.extensionName)return f.push(E),!0})?g[s].push(A):c[s].push(A)}),void o[s].forEach((A,_)=>{-1===f.indexOf(_)&&h[s].push(A)})}if("videoCodecs"===s||"audioCodecs"===s){const f=[];return n[s].forEach(A=>{o[s].some((_,E)=>{if(A.payloadType===_.payloadType&&JSON.stringify(A)===JSON.stringify(_))return f.push(E),!0})?g[s].push(A):c[s].push(A)}),void o[s].forEach((A,_)=>{-1===f.indexOf(_)&&h[s].push(A)})}}function I6(n){const{send:o,recv:s,sendrecv:c}=n;if(!c){if(!o||!s)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:o,recv:s}}let h,g;return o?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...o.audioCodecs,...c.audioCodecs],h.videoCodecs=[...o.videoCodecs,...c.videoCodecs],h.audioExtensions=[...o.audioExtensions,...c.audioExtensions],h.videoExtensions=[...o.videoExtensions,...c.videoExtensions]):h=c,s?(g={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},g.audioCodecs=[...s.audioCodecs,...c.audioCodecs],g.videoCodecs=[...s.videoCodecs,...c.videoCodecs],g.audioExtensions=[...s.audioExtensions,...c.audioExtensions],g.videoExtensions=[...s.videoExtensions,...c.videoExtensions]):g=c,{send:h,recv:g}}!function(n,o){n.exports=(()=>{var s={8:(g,f,A)=>{A.r(f),A.d(f,{Parser:()=>hn,Printer:()=>bn,parse:()=>pn,print:()=>Dn});const _="\n",E="".concat("\r").concat(_),S=" ";let I;function R(Wt){return Wt>="0"&&Wt<="9"}function M(Wt){return Wt>="!"&&Wt<="~"}function Q(Wt){return M(Wt)||Wt>="\x80"&&Wt<="\xff"}function H(Wt){return"!"===Wt||Wt>="#"&&Wt<="'"||Wt>="*"&&Wt<="+"||Wt>="-"&&Wt<="."||Wt>="0"&&Wt<="9"||Wt>="A"&&Wt<="Z"||Wt>="^"&&Wt<="~"}function Z(Wt){return Wt>="1"&&Wt<="9"}function le(Wt){return Wt>="A"&&Wt<="Z"||Wt>="a"&&Wt<="z"}function ge(Wt){return"d"===Wt||"h"===Wt||"m"===Wt||"s"===Wt}function Se(Wt){return Wt>"\x01"&&Wt<"\t"||Wt>"\v"&&Wt<"\f"||Wt>"\x0e"&&Wt<"\xff"}function Ne(Wt){return le(Wt)||R(Wt)||"+"===Wt||"/"===Wt}function nt(Wt){return R(Wt)||le(Wt)||"+"===Wt||"/"===Wt||"-"===Wt||"_"===Wt}function Nt(Wt){return le(Wt)||R(Wt)||"+"===Wt||"/"===Wt}function Vt(Wt,j){var Ae=Object.keys(Wt);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(Wt);j&&(xe=xe.filter(function(Ft){return Object.getOwnPropertyDescriptor(Wt,Ft).enumerable})),Ae.push.apply(Ae,xe)}return Ae}function Dt(Wt){for(var j=1;j<arguments.length;j++){var Ae=null!=arguments[j]?arguments[j]:{};j%2?Vt(Object(Ae),!0).forEach(function(xe){In(Wt,xe,Ae[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Wt,Object.getOwnPropertyDescriptors(Ae)):Vt(Object(Ae)).forEach(function(xe){Object.defineProperty(Wt,xe,Object.getOwnPropertyDescriptor(Ae,xe))})}return Wt}function In(Wt,j,Ae){return j in Wt?Object.defineProperty(Wt,j,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Wt[j]=Ae,Wt}var Wt;(Wt=I||(I={})).VERSION="v",Wt.ORIGIN="o",Wt.SESSION_NAME="s",Wt.INFORMATION="i",Wt.URI="u",Wt.EMAIL="e",Wt.PHONE="p",Wt.CONNECTION="c",Wt.BANDWIDTH="b",Wt.TIME="t",Wt.REPEAT="r",Wt.ZONE_ADJUSTMENTS="z",Wt.KEY="k",Wt.ATTRIBUTE="a",Wt.MEDIA="m";class dn{consumeText(j,Ae){let xe=Ae;for(;xe<j.length;){const Ft=j[xe];if("\0"===Ft||"\r"===Ft||Ft===_)break;xe+=1}if(xe-Ae==0)throw new Error("Invalid text, at ".concat(j));return xe}consumeUnicastAddress(j,Ae,xe){return this.consumeTill(j,Ae,S)}consumeOneOrMore(j,Ae,xe){let Ft=Ae;for(;xe(j[Ft]);)Ft++;if(Ft-Ae==0)throw new Error("Invalid rule at ".concat(Ae,"."));return Ft}consumeSpace(j,Ae){if(j[Ae]===S)return Ae+1;throw new Error("Invalid space at ".concat(Ae,"."))}consumeIP4Address(j,Ae){let xe=Ae;for(let Ft=0;Ft<4;Ft++)if(xe=this.consumeDecimalUChar(j,xe),3!==Ft){if("."!==j[xe])throw new Error("Invalid IP4 address.");xe++}return xe}consumeDecimalUChar(j,Ae){let xe=Ae;for(let Tn=0;Tn<3&&R(j[xe]);Tn++,xe++);if(xe-Ae==0)throw new Error("Invalid decimal uchar.");const Ft=parseInt(j.slice(Ae,xe));if(Ft>=0&&Ft<=255)return xe;throw new Error("Invalid decimal uchar")}consumeIP6Address(j,Ae){let xe=this.consumeHexpart(j,Ae);return":"===j[xe]&&(xe+=1,xe=this.consumeIP4Address(j,xe)),xe}consumeHexpart(j,Ae){let xe=Ae;if(":"===j[xe]&&":"===j[xe+1]){xe+=2;try{xe=this.consumeHexseq(j,xe)}catch{}return xe}if(xe=this.consumeHexseq(j,xe),":"===j[xe]&&":"===j[xe+1]){xe+=2;try{xe=this.consumeHexseq(j,xe)}catch{}return xe}return xe}consumeHexseq(j,Ae){let xe=Ae;for(;xe=this.consumeHex4(j,xe),":"===j[xe]&&":"!==j[xe+1];)xe+=1;return xe}consumeHex4(j,Ae){let xe=0;for(;xe<4;xe++)if(!((Ft=j[Ae+xe])>="0"&&Ft<="9"||Ft>="a"&&Ft<="f"||Ft>="A"&&Ft<="F")){if(0===xe)throw new Error("Invalid hex 4");break}var Ft;return Ae+xe}consumeFQDN(j,Ae){let xe=Ae;for(;R(j[xe])||le(j[xe])||"-"===j[xe]||"."===j[xe];)xe+=1;if(xe-Ae<4)throw new Error("Invalid FQDN");return xe}consumeExtnAddr(j,Ae){return this.consumeOneOrMore(j,Ae,Q)}consumeMulticastAddress(j,Ae,xe){switch(xe){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(j,Ae);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(j,Ae);default:try{return this.consumeFQDN(j,Ae)}catch{return this.consumeExtnAddr(j,Ae)}}}consumeIP6MulticastAddress(j,Ae){const xe=this.consumeHexpart(j,Ae);return"/"===j[xe]?this.consumeInteger(j,xe+1):xe}consumeIP4MulticastAddress(j,Ae){let xe=Ae+3;const Ft=j.slice(Ae,xe),Tn=parseInt(Ft);if(Tn<224||Tn>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Sr=0;Sr<3;Sr++){if("."!==j[xe])throw new Error("Invalid IP4 multicast address.");xe+=1,xe=this.consumeDecimalUChar(j,xe)}return"/"===j[xe]&&(xe+=1),xe=this.consumeTTL(j,xe),"/"===j[xe]&&(xe=this.consumeInteger(j,xe)),xe}consumeInteger(j,Ae){if(!Z(j[Ae]))throw new Error("Invalid integer.");for(Ae+=1;R(j[Ae]);)Ae+=1;return Ae}consumeTTL(j,Ae){if("0"===j[Ae])return Ae+1;if(!Z(j[Ae]))throw new Error("Invalid TTL.");Ae+=1;for(let xe=0;xe<2&&R(j[Ae]);xe++)Ae+=1;return Ae}consumeToken(j,Ae){return this.consumeOneOrMore(j,Ae,H)}consumeTime(j,Ae){let xe=Ae;if("0"===j[xe])return xe+1;for(Z(j[xe])&&(xe+=1);R(j[xe]);)xe++;if(xe-Ae<10)throw new Error("Invalid time");return xe}consumeAddress(j,Ae){return this.consumeTill(j,Ae,S)}consumeTypedTime(j,Ae){let xe=Ae;return xe=this.consumeOneOrMore(j,xe,R),ge(j[xe])?xe+1:xe}consumeRepeatInterval(j,Ae){if(!Z(j[Ae]))throw new Error("Invalid repeat interval");for(Ae+=1;R(j[Ae]);)Ae+=1;return ge(j[Ae])&&(Ae+=1),Ae}consumePort(j,Ae){return this.consumeOneOrMore(j,Ae,R)}consume(j,Ae,xe){for(let Ft=0;Ft<xe.length;Ft++){if(Ae+Ft>=j.length)throw new Error("consume exceeding value length");if(j[Ae+Ft]!==xe[Ft])throw new Error("consume ".concat(xe," failed at ").concat(Ft))}return Ae+xe.length}consumeTill(j,Ae,xe){let Ft=Ae;for(;Ft<j.length&&("string"!=typeof xe||j[Ft]!==xe)&&("function"!=typeof xe||!xe(j[Ft]));)Ft++;return Ft}}class hn extends dn{constructor(){super(),In(this,"records",[]),In(this,"currentLine",0)}parse(j){const Ae=this.probeEOL(j);this.records=j.split(Ae).filter(zh=>!!zh.trim()).map(this.parseLine),this.currentLine=0;const xe=this.parseVersion(),Ft=this.parseOrigin(),Tn=this.parseSessionName(),Sr=this.parseInformation(),Er=this.parseUri(),Nr=this.parseEmail(),Gi=this.parsePhone(),nu=this.parseConnection(),za=this.parseBandWidth(),So=this.parseTimeFields(),Xi=this.parseKey(),Aa=this.parseSessionAttribute(),Qf=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:xe,origin:Ft,sessionName:Tn,information:Sr,uri:Er,emails:Nr,phones:Gi,connection:nu,bandwidths:za,timeFields:So,key:Xi,attributes:Aa,mediaDescriptions:Qf}}getCurrentRecord(){const j=this.records[this.currentLine];if(!j)throw new Error("Record doesn't exit.");return j}probeEOL(j){for(let Ae=0;Ae<j.length;Ae++)if(j[Ae]===_)return"\r"===j[Ae-1]?E:_;throw new Error("Invalid newline character.")}parseLine(j,Ae){if(j.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const xe=j[0];if("="!==j[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:xe,value:j.slice(2),line:Ae,cur:0}}parseSessionAttribute(){const j=new We;for(;this.currentLine<this.records.length;){const Ae=this.getCurrentRecord();if(Ae.type!==I.ATTRIBUTE)break;const xe={attField:this.extractOneOrMore(Ae,Ft=>H(Ft)&&":"!==Ft),_cur:0};":"===Ae.value[Ae.cur]&&(Ae.cur+=1,xe.attValue=this.extractOneOrMore(Ae,Se)),j.parse(xe),this.currentLine++}return j.digest()}parseMediaAttributes(j){const Ae=new ct(j);for(;this.currentLine<this.records.length;){const xe=this.getCurrentRecord();if(xe.type!==I.ATTRIBUTE)break;const Ft={attField:this.extractOneOrMore(xe,Tn=>H(Tn)&&":"!==Tn),_cur:0};":"===xe.value[xe.cur]&&(xe.cur+=1,Ft.attValue=this.extractOneOrMore(xe,Se)),Ae.parse(Ft),this.currentLine++}return Ae.digest()}parseKey(){const j=this.getCurrentRecord();if(j.type===I.KEY){if("prompt"===j.value||"clear:"===j.value||"base64:"===j.value||"uri:"===j.value)return j.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const j=this.getCurrentRecord();if(j.type===I.ZONE_ADJUSTMENTS){const Ae=[];for(;;)try{const xe=this.extract(j,this.consumeTime);this.consumeSpaceForRecord(j);let Ft=!1;"-"===j.value[j.cur]&&(Ft=!0,j.cur+=1);const Tn=this.extract(j,this.consumeTypedTime);Ae.push({time:xe,typedTime:Tn,back:Ft})}catch{break}if(0===Ae.length)throw new Error("Invalid zone adjustments");return this.currentLine++,Ae}return[]}parseRepeat(){const j=[];for(;;){const Ae=this.getCurrentRecord();if(Ae.type!==I.REPEAT)break;{const xe=this.extract(Ae,this.consumeRepeatInterval),Ft=this.parseTypedTime(Ae);j.push({repeatInterval:xe,typedTimes:Ft}),this.currentLine++}}return j}parseTypedTime(j){const Ae=[];for(;;)try{this.consumeSpaceForRecord(j),Ae.push(this.extract(j,this.consumeTypedTime))}catch{break}if(0===Ae.length)throw new Error("Invalid typed time.");return Ae}parseTime(){const j=this.getCurrentRecord(),Ae=this.extract(j,this.consumeTime);this.consumeSpaceForRecord(j);const xe=this.extract(j,this.consumeTime);return this.currentLine++,{startTime:Ae,stopTime:xe}}parseBandWidth(){const j=[];for(;this.currentLine<this.records.length;){const Ae=this.getCurrentRecord();if(Ae.type!==I.BANDWIDTH)break;{const xe=this.extractOneOrMore(Ae,H);if(":"!==Ae.value[Ae.cur])throw new Error("Invalid bandwidth field.");Ae.cur++;const Ft=this.extractOneOrMore(Ae,R);j.push({bwtype:xe,bandwidth:Ft}),this.currentLine++}}return j}parseVersion(){const j=this.getCurrentRecord();if(j.type!==I.VERSION)throw new Error("first sdp record must be version");const Ae=j.value.slice(0,this.consumeOneOrMore(j.value,0,R));if(Ae.length!==j.value.length)throw new Error('invalid proto version, "v='.concat(j.value,'"'));return this.currentLine++,Ae}parseOrigin(){const j=this.getCurrentRecord();if(j.type!==I.ORIGIN)throw new Error("second line of sdp must be origin");const Ae=this.extractOneOrMore(j,Q);this.consumeSpaceForRecord(j);const xe=this.extractOneOrMore(j,R);this.consumeSpaceForRecord(j);const Ft=this.extractOneOrMore(j,R);this.consumeSpaceForRecord(j);const Tn=this.extractOneOrMore(j,H);this.consumeSpaceForRecord(j);const Sr=this.extractOneOrMore(j,H);this.consumeSpaceForRecord(j);const Er=this.extract(j,this.consumeUnicastAddress);return this.currentLine++,{username:Ae,sessId:xe,sessVersion:Ft,nettype:Tn,addrtype:Sr,unicastAddress:Er}}parseSessionName(){const j=this.getCurrentRecord();if(j.type===I.SESSION_NAME){const Ae=this.extract(j,this.consumeText);return this.currentLine++,Ae}}parseInformation(){const j=this.getCurrentRecord();if(j.type!==I.INFORMATION)return;const Ae=this.extract(j,this.consumeText);return this.currentLine++,Ae}parseUri(){const j=this.getCurrentRecord();if(j.type===I.URI)return this.currentLine++,j.value}parseEmail(){const j=[];for(;;){const Ae=this.getCurrentRecord();if(Ae.type!==I.EMAIL)break;j.push(Ae.value),this.currentLine++}return j}parsePhone(){const j=[];for(;;){const Ae=this.getCurrentRecord();if(Ae.type!==I.PHONE)break;j.push(Ae.value),this.currentLine++}return j}parseConnection(){const j=this.getCurrentRecord();if(j.type===I.CONNECTION){const Ae=this.extractOneOrMore(j,H);this.consumeSpaceForRecord(j);const xe=this.extractOneOrMore(j,H);this.consumeSpaceForRecord(j);const Ft=this.extract(j,this.consumeAddress);return this.currentLine++,{nettype:Ae,addrtype:xe,address:Ft}}}parseMedia(){const j=this.getCurrentRecord(),Ae=this.extract(j,this.consumeToken);this.consumeSpaceForRecord(j);let xe=this.extract(j,this.consumePort);"/"===j.value[j.cur]&&(j.cur+=1,xe+=this.extract(j,this.consumeInteger)),this.consumeSpaceForRecord(j);const Ft=[];for(Ft.push(this.extract(j,this.consumeToken));"/"===j.value[j.cur];)j.cur+=1,Ft.push(this.extract(j,this.consumeToken));if(0===Ft.length)throw new Error("Invalid proto");const Tn=this.parseFmt(j);return this.currentLine++,{mediaType:Ae,port:xe,protos:Ft,fmts:Tn}}parseTimeFields(){const j=[];for(;this.getCurrentRecord().type===I.TIME;){const Ae=this.parseTime(),xe=this.parseRepeat(),Ft=this.parseZone();j.push({time:Ae,repeats:xe,zones:Ft})}return j}parseMediaDescription(){const j=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.MEDIA;){const Ae=this.parseMedia(),xe=this.parseInformation(),Ft=this.parseConnections(),Tn=this.parseBandWidth(),Sr=this.parseKey(),Er=this.parseMediaAttributes(Ae);j.push({media:Ae,information:xe,connections:Ft,bandwidths:Tn,key:Sr,attributes:Er})}return j}parseConnections(){const j=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.CONNECTION;)j.push(this.parseConnection());return j}parseFmt(j){const Ae=[];for(;;)try{this.consumeSpaceForRecord(j),Ae.push(this.extract(j,this.consumeToken))}catch{break}if(0===Ae.length)throw new Error("Invalid fmts");return Ae}extract(j,Ae,...xe){const Ft=Ae.call(this,j.value,j.cur,...xe),Tn=j.value.slice(j.cur,Ft);return j.cur=Ft,Tn}extractOneOrMore(j,Ae){const xe=this.consumeOneOrMore(j.value,j.cur,Ae),Ft=j.value.slice(j.cur,xe);return j.cur=xe,Ft}consumeSpaceForRecord(j){if(j.value[j.cur]!==S)throw new Error("Invalid space at ".concat(j.cur,"."));j.cur+=1}}class wt extends dn{constructor(...j){super(...j),In(this,"attributes",void 0),In(this,"digested",!1)}extractOneOrMore(j,Ae,xe){const Ft=this.consumeOneOrMore(j.attValue,j._cur,Ae),Tn=j.attValue.slice(j._cur,Ft),[Sr,Er]=xe||[];if("number"==typeof Sr&&Tn.length<Sr)throw new Error("error in length, should be more or equal than ".concat(Sr," characters."));if("number"==typeof Er&&Tn.length>Er)throw new Error("error in length, should be less or equal than ".concat(Er," characters."));return j._cur=Ft,Tn}consumeAttributeSpace(j){if(j.attValue[j._cur]!==S)throw new Error("Invalid space at ".concat(j._cur,"."));j._cur+=1}extract(j,Ae,...xe){if(!j.attValue)throw new Error("Nothing to extract from attValue.");const Ft=Ae.call(this,j.attValue,j._cur,...xe),Tn=j.attValue.slice(j._cur,Ft);return j._cur=Ft,Tn}atEnd(j){if(!j.attValue)throw new Error;return j._cur>=j.attValue.length}peekChar(j){if(!j.attValue)throw new Error;return j.attValue[j._cur]}peek(j,Ae){if(!j.attValue)throw new Error;for(let xe=0;xe<Ae.length;xe++)if(Ae[xe]!==j.attValue[j._cur+xe])return!1;return!0}parseIceUfrag(j){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(j,Ne,[4,256])}parseIcePwd(j){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(j,Ne,[22,256])}parseIceOptions(j){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const Ae=[];for(;!this.atEnd(j);){Ae.push(this.extractOneOrMore(j,Ne));try{this.consumeAttributeSpace(j)}catch(xe){if(this.atEnd(j))break;throw xe}}this.attributes.iceOptions=Ae}parseFingerprint(j){const Ae=this.extract(j,this.consumeToken);this.consumeAttributeSpace(j);const xe=this.extract(j,this.consumeTill);this.attributes.fingerprints.push({hashFunction:Ae,fingerprint:xe})}parseExtmap(j){const Ae=this.extractOneOrMore(j,R);let xe;"/"===this.peekChar(j)&&(this.extract(j,this.consume,"/"),xe=this.extract(j,this.consumeToken)),this.consumeAttributeSpace(j);const Ft=this.extract(j,this.consumeTill,S),Tn=Dt(Dt({entry:parseInt(Ae,10)},xe&&{direction:xe}),{},{extensionName:Ft});this.peekChar(j)===S&&(this.consumeAttributeSpace(j),Tn.extensionAttributes=this.extract(j,this.consumeTill)),this.attributes.extmaps.push(Tn)}parseSetup(j){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const Ae=this.extract(j,this.consumeTill);if("active"!==Ae&&"passive"!==Ae&&"actpass"!==Ae&&"holdconn"!==Ae)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=Ae}}class We extends wt{constructor(...j){super(...j),In(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(j){if(this.digested)throw new Error("already digested");try{switch(j.attField){case"group":this.parseGroup(j);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(j);break;case"ice-pwd":this.parseIcePwd(j);break;case"ice-options":this.parseIceOptions(j);break;case"fingerprint":this.parseFingerprint(j);break;case"setup":this.parseSetup(j);break;case"tls-id":this.parseTlsId(j);break;case"identity":this.parseIdentity(j);break;case"extmap":this.parseExtmap(j);break;case"msid-semantic":this.parseMsidSemantic(j);break;default:j.ignored=!0,this.attributes.unrecognized.push(j)}}catch(Ae){throw console.error("parsing session attribute ".concat(j.attField,' error, "a=').concat(j.attField,":").concat(j.attValue,'"')),Ae}if(!j.ignored&&j.attValue&&!this.atEnd(j))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(j){const Ae=this.extract(j,this.consumeToken),xe=[];for(;!this.atEnd(j)&&this.peekChar(j)===S;)this.consumeAttributeSpace(j),xe.push(this.extract(j,this.consumeToken));this.attributes.groups.push({semantic:Ae,identificationTag:xe})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(j){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(j,nt)}parseIdentity(j){const Ae=this.extractOneOrMore(j,Nt),xe=[];for(;!this.atEnd(j)&&this.peekChar(j)===S;){this.consumeAttributeSpace(j);const Ft=this.extract(j,this.consumeToken);this.extract(j,this.consume,"=");const Tn=this.extractOneOrMore(j,Sr=>Sr!==S&&Se(Sr));xe.push({name:Ft,value:Tn})}this.attributes.identities.push({assertionValue:Ae,extensions:xe})}parseMsidSemantic(j){this.peekChar(j)===S&&this.consumeAttributeSpace(j);const Ae={semantic:this.extract(j,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(j)}catch{break}if("*"===this.peekChar(j)){this.extract(j,this.consume,"*"),Ae.applyForAll=!0;break}{const xe=this.extract(j,this.consumeTill,S);Ae.identifierList.push(xe)}}this.attributes.msidSemantic=Ae}}class ct extends wt{constructor(j){super(),In(this,"attributes",void 0),-1!==j.protos.indexOf("RTP")||j.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(j){if(this.digested)throw new Error("already digested");try{switch(j.attField){case"extmap":this.parseExtmap(j);break;case"setup":this.parseSetup(j);break;case"ice-ufrag":this.parseIceUfrag(j);break;case"ice-pwd":this.parseIcePwd(j);break;case"ice-options":this.parseIceOptions(j);break;case"candidate":this.parseCandidate(j);break;case"remote-candidate":this.parseRemoteCandidate(j);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(j);break;case"rtpmap":this.parseRtpmap(j);break;case"ptime":this.parsePtime(j);break;case"maxptime":this.parseMaxPtime(j);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(j);break;case"ssrc":this.parseSSRC(j);break;case"fmtp":this.parseFmtp(j);break;case"rtcp-fb":this.parseRtcpFb(j);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(j);break;case"mid":this.parseMid(j);break;case"msid":this.parseMsid(j);break;case"imageattr":this.parseImageAttr(j);break;case"rid":this.parseRid(j);break;case"simulcast":this.parseSimulcast(j);break;case"sctp-port":this.parseSctpPort(j);break;case"max-message-size":this.parseMaxMessageSize(j);break;case"ssrc-group":this.parseSSRCGroup(j);break;default:j.ignored=!0,this.attributes.unrecognized.push(j)}}catch(Ae){throw console.error("parsing media attribute ".concat(j.attField,' error, "a=').concat(j.attField,":").concat(j.attValue,'"')),Ae}if(!j.ignored&&j.attValue&&!this.atEnd(j))throw new Error("attribute parsing error")}parseCandidate(j){const Ae=this.extractOneOrMore(j,Ne,[1,32]);this.consumeAttributeSpace(j);const xe=this.extractOneOrMore(j,R,[1,5]);this.consumeAttributeSpace(j);const Ft=this.extract(j,this.consumeToken);this.consumeAttributeSpace(j);const Tn=this.extractOneOrMore(j,R,[1,10]);this.consumeAttributeSpace(j);const Sr=this.extract(j,this.consumeAddress);this.consumeAttributeSpace(j);const Er=this.extract(j,this.consumePort);this.consumeAttributeSpace(j),this.extract(j,this.consume,"typ"),this.consumeAttributeSpace(j);const Nr={foundation:Ae,componentId:xe,transport:Ft,priority:Tn,connectionAddress:Sr,port:Er,type:this.extract(j,this.consumeToken),extension:{}};for(this.peek(j," raddr")&&(this.extract(j,this.consume," raddr"),this.consumeAttributeSpace(j),Nr.relAddr=this.extract(j,this.consumeAddress)),this.peek(j," rport")&&(this.extract(j,this.consume," rport"),this.consumeAttributeSpace(j),Nr.relPort=this.extract(j,this.consumePort));this.peekChar(j)===S;){this.consumeAttributeSpace(j);const Gi=this.extract(j,this.consumeToken);this.consumeAttributeSpace(j),Nr.extension[Gi]=this.extractOneOrMore(j,M)}this.attributes.candidates.push(Nr)}parseRemoteCandidate(j){const Ae=[];for(;;){const xe=this.extractOneOrMore(j,R,[1,5]);this.consumeAttributeSpace(j);const Ft=this.extract(j,this.consumeAddress);this.consumeAttributeSpace(j);const Tn=this.extract(j,this.consumePort);Ae.push({componentId:xe,connectionAddress:Ft,port:Tn});try{this.consumeAttributeSpace(j)}catch{break}}this.attributes.remoteCandidatesList.push(Ae)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(j){const Ae=this.extract(j,this.consumeToken);this.consumeAttributeSpace(j);const xe=this.extract(j,this.consumeTill,"/");this.extract(j,this.consume,"/");const Ft={encodingName:xe,clockRate:this.extractOneOrMore(j,R)};this.atEnd(j)||"/"!==this.peekChar(j)||(this.extract(j,this.consume,"/"),Ft.encodingParameters=parseInt(this.extract(j,this.consumeTill),10));const Tn=this.attributes.payloads.find(Sr=>Sr.payloadType===parseInt(Ae,10));Tn?Tn.rtpMap=Ft:this.attributes.payloads.push({payloadType:parseInt(Ae,10),rtpMap:Ft,rtcpFeedbacks:[]})}parsePtime(j){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(j,this.consumeTill)}parseMaxPtime(j){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(j,this.consumeTill)}parseDirection(j){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=j.attField}parseSSRC(j){const Ae=this.extractOneOrMore(j,R);this.consumeAttributeSpace(j);const xe=this.extract(j,this.consumeTill,":");let Ft;":"===this.peekChar(j)&&(this.extract(j,this.consume,":"),Ft=this.extract(j,this.consumeTill));const Tn=this.attributes.ssrcs.find(Sr=>Sr.ssrcId===parseInt(Ae,10));Tn?Tn.attributes[xe]=Ft:this.attributes.ssrcs.push({ssrcId:parseInt(Ae,10),attributes:{[xe]:Ft}})}parseFmtp(j){const Ae=this.extract(j,this.consumeTill,S);this.consumeAttributeSpace(j);const xe=this.extract(j,this.consumeTill),Ft={};xe.split(";").forEach(Sr=>{let[Er,Nr]=Sr.split("=");Er=Er.trim(),Nr="string"==typeof Nr?Nr.trim():Nr,"string"==typeof Er&&Er.length>0&&(Ft[Er]=Nr)});const Tn=this.attributes.payloads.find(Sr=>Sr.payloadType===parseInt(Ae,10));Tn?Tn.fmtp={parameters:Ft}:this.attributes.payloads.push({payloadType:parseInt(Ae,10),rtcpFeedbacks:[],fmtp:{parameters:Ft}})}parseFmtParameters(j){const Ae={},xe=this.extract(j,this.consumeTill,"=");j._cur++;const Ft=this.extract(j,this.consumeTill,";");for(Ae[xe]=Ft;";"===j.attValue[j._cur];){const Tn=this.extract(j,this.consumeTill,"=");j._cur++;const Sr=this.extract(j,this.consumeTill,";");Ae[Tn]=Sr}return Ae}parseRtcpFb(j){let Ae="";Ae="*"===this.peekChar(j)?this.extract(j,this.consume,"*"):this.extract(j,this.consumeTill,S),this.consumeAttributeSpace(j);const xe=this.extract(j,this.consumeTill,S);let Ft;if("trr-int"===xe)Ft={type:xe,interval:this.extract(j,this.consumeTill)};else{const Tn={type:xe};this.peekChar(j)===S&&(this.consumeAttributeSpace(j),Tn.parameter=this.extract(j,this.consumeToken),this.peekChar(j)===S&&(Tn.additional=this.extract(j,this.consumeTill))),Ft=Tn}if("*"===Ae)this.attributes.rtcpFeedbackWildcards.push(Ft);else{const Tn=this.attributes.payloads.find(Sr=>Sr.payloadType===parseInt(Ae,10));Tn?Tn.rtcpFeedbacks.push(Ft):this.attributes.payloads.push({payloadType:parseInt(Ae,10),rtcpFeedbacks:[Ft]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(j){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const Ae={port:this.extract(j,this.consumePort)};this.peekChar(j)===S&&(this.consumeAttributeSpace(j),Ae.netType=this.extractOneOrMore(j,H),this.consumeAttributeSpace(j),Ae.addressType=this.extractOneOrMore(j,H),this.consumeAttributeSpace(j),Ae.address=this.extract(j,this.consumeAddress)),this.attributes.rtcp=Ae}parseMsid(j){const Ae={id:this.extractOneOrMore(j,H,[1,64])};this.peekChar(j)===S&&(this.consumeAttributeSpace(j),Ae.appdata=this.extractOneOrMore(j,H,[1,64])),this.attributes.msids.push(Ae)}parseImageAttr(j){this.attributes.imageattr.push(j.attValue)}parseRid(j){const Ae=this.extractOneOrMore(j,Ft=>le(Ft)||R(Ft)||"_"===Ft||"-"===Ft);this.consumeAttributeSpace(j);const xe={id:Ae,direction:this.extract(j,this.consumeToken),params:[]};if(this.peekChar(j)===S){if(this.consumeAttributeSpace(j),this.peek(j,"pt=")){this.extract(j,this.consume,"pt=");const Ft=[];for(;;){const Tn=this.extract(j,this.consumeToken);Ft.push(Tn);try{this.extract(j,this.consume,",")}catch{break}}xe.payloads=Ft,this.peekChar(j)===S&&this.extract(j,this.consume,S)}for(;;){const Ft=this.extract(j,this.consumeToken);switch(Ft){case"depend":{const Tn={type:Ft,rids:this.extract(j,this.consume,"=").split(",")};xe.params.push(Tn);break}default:{const Tn={type:Ft};"="===this.peekChar(j)&&(this.extract(j,this.consume,"="),Tn.val=this.extract(j,this.consumeTill,";")),xe.params.push(Tn)}}try{this.extract(j,this.consume,";")}catch{break}}}this.attributes.rids.push(xe)}parseSimulcast(j){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=j.attValue,this.extract(j,this.consumeTill)}parseSctpPort(j){this.attributes.sctpPort=this.extractOneOrMore(j,R,[1,5])}parseMaxMessageSize(j){this.attributes.maxMessageSize=this.extractOneOrMore(j,R,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(j){this.attributes.mid=this.extract(j,this.consumeToken)}parseSSRCGroup(j){const Ae=this.extract(j,this.consumeToken),xe=[];for(;;)try{this.consumeAttributeSpace(j);const Ft=this.extract(j,this.consumeInteger);xe.push(parseInt(Ft,10))}catch{break}this.attributes.ssrcGroups.push({semantic:Ae,ssrcIds:xe})}}function bt(Wt,j,Ae){return j in Wt?Object.defineProperty(Wt,j,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Wt[j]=Ae,Wt}class bn{constructor(){bt(this,"eol",E)}print(j,Ae){let xe="";return Ae&&(this.eol=Ae),xe+=this.printVersion(j.version),xe+=this.printOrigin(j.origin),xe+=this.printSessionName(j.sessionName),xe+=this.printInformation(j.information),xe+=this.printUri(j.uri),xe+=this.printEmail(j.emails),xe+=this.printPhone(j.phones),xe+=this.printConnection(j.connection),xe+=this.printBandwidth(j.bandwidths),xe+=this.printTimeFields(j.timeFields),xe+=this.printKey(j.key),xe+=this.printSessionAttributes(j.attributes),xe+=this.printMediaDescription(j.mediaDescriptions),xe}printVersion(j){return"v=".concat(j).concat(this.eol)}printOrigin(j){return"o=".concat(j.username," ").concat(j.sessId," ").concat(j.sessVersion," ").concat(j.nettype," ").concat(j.addrtype," ").concat(j.unicastAddress).concat(this.eol)}printSessionName(j){return j?"s=".concat(j).concat(this.eol):""}printInformation(j){return j?"i=".concat(j).concat(this.eol):""}printUri(j){return j?"u=".concat(j).concat(this.eol):""}printEmail(j){let Ae="";for(const xe of j)Ae+="e=".concat(xe).concat(this.eol);return Ae}printPhone(j){let Ae="";for(const xe of j)Ae+="e=".concat(xe).concat(this.eol);return Ae}printConnection(j){return j?"c=".concat(j.nettype," ").concat(j.addrtype," ").concat(j.address).concat(this.eol):""}printBandwidth(j){let Ae="";for(const xe of j)Ae+="b=".concat(xe.bwtype,":").concat(xe.bandwidth).concat(this.eol);return Ae}printTimeFields(j){let Ae="";for(const xe of j){Ae+="t=".concat(xe.time.startTime," ").concat(xe.time.startTime).concat(this.eol);for(const Ft of xe.repeats)Ae+="r=".concat(Ft.repeatInterval," ").concat(Ft.typedTimes.join(" ")).concat(this.eol);xe.zoneAdjustments&&(Ae+="z=",Ae+="z=".concat(xe.zoneAdjustments.map(Ft=>"".concat(Ft.time," ").concat(Ft.back?"-":""," ").concat(Ft.typedTime)).join(" ")).concat(this.eol),Ae+=this.eol)}return Ae}printKey(j){return j?"k=".concat(j).concat(this.eol):""}printAttributes(j){let Ae="";for(const xe of j)Ae+="a=".concat(xe.attField).concat(xe.attValue?":".concat(xe.attValue):"").concat(this.eol);return Ae}printMediaDescription(j){let Ae="";for(const xe of j)Ae+=this.printMedia(xe.media),Ae+=this.printInformation(xe.information),Ae+=this.printConnections(xe.connections),Ae+=this.printBandwidth(xe.bandwidths),Ae+=this.printKey(xe.key),Ae+=this.printMediaAttributes(xe);return Ae}printConnections(j){let Ae="";for(const xe of j)Ae+=this.printConnection(xe);return Ae}printMedia(j){return"m=".concat(j.mediaType," ").concat(j.port," ").concat(j.protos.join("/")," ").concat(j.fmts.join(" ")).concat(this.eol)}printSessionAttributes(j){return new dt(this.eol).print(j)}printMediaAttributes(j){return new xt(this.eol).print(j)}}class Je{constructor(j){bt(this,"eol",void 0),this.eol=j}printIceUfrag(j){return void 0===j?"":"a=ice-ufrag:".concat(j).concat(this.eol)}printIcePwd(j){return void 0===j?"":"a=ice-pwd:".concat(j).concat(this.eol)}printIceOptions(j){return void 0===j?"":"a=ice-options:".concat(j.join(S)).concat(this.eol)}printFingerprints(j){return j.length>0?j.map(Ae=>"a=fingerprint:".concat(Ae.hashFunction).concat(S).concat(Ae.fingerprint)).join(this.eol)+this.eol:""}printExtmap(j){return j.map(Ae=>"a=extmap:".concat(Ae.entry).concat(Ae.direction?"/".concat(Ae.direction):"").concat(S).concat(Ae.extensionName).concat(Ae.extensionAttributes?"".concat(S).concat(Ae.extensionAttributes):"").concat(this.eol)).join("")}printSetup(j){return void 0===j?"":"a=setup:".concat(j).concat(this.eol)}printUnrecognized(j){return j.map(Ae=>"a=".concat(Ae.attField).concat(Ae.attValue?":".concat(Ae.attValue):"").concat(this.eol)).join("")}}class dt extends Je{print(j){let Ae="";return Ae+=this.printGroups(j.groups),Ae+=this.printMsidSemantic(j.msidSemantic),Ae+=this.printIceLite(j.iceLite),Ae+=this.printIceUfrag(j.iceUfrag),Ae+=this.printIcePwd(j.icePwd),Ae+=this.printIceOptions(j.iceOptions),Ae+=this.printFingerprints(j.fingerprints),Ae+=this.printSetup(j.setup),Ae+=this.printTlsId(j.tlsId),Ae+=this.printIdentity(j.identities),Ae+=this.printExtmap(j.extmaps),Ae+=this.printUnrecognized(j.unrecognized),Ae}printGroups(j){let Ae="";return j.length>0&&(Ae+=j.map(xe=>"a=group:".concat(xe.semantic).concat(xe.identificationTag.map(Ft=>"".concat(S).concat(Ft)).join("")).concat(this.eol)).join("")),Ae}printIceLite(j){return void 0===j?"":"a=ice-lite"+this.eol}printTlsId(j){return j?"a=tls-id:".concat(j).concat(this.eol):""}printIdentity(j){return 0===j.length?"":j.map(Ae=>"a=identity:".concat(Ae.assertionValue).concat(Ae.extensions.map(xe=>"".concat(S).concat(xe.name).concat(xe.value?"=".concat(xe.value):"")))).join(this.eol)+this.eol}printMsidSemantic(j){if(!j)return"";let Ae="a=msid-semantic:".concat(j.semantic);return j.applyForAll?Ae+="".concat(S,"*"):j.identifierList.length>0&&(Ae+=j.identifierList.map(xe=>"".concat(S).concat(xe))),Ae+this.eol}}class xt extends Je{print(j){const Ae=j.attributes;let xe="";return xe+=this.printRTCP(Ae.rtcp),xe+=this.printIceUfrag(Ae.iceUfrag),xe+=this.printIcePwd(Ae.icePwd),xe+=this.printIceOptions(Ae.iceOptions),xe+=this.printCandidates(Ae.candidates),xe+=this.printRemoteCandidatesList(Ae.remoteCandidatesList),xe+=this.printEndOfCandidates(Ae.endOfCandidates),xe+=this.printFingerprints(Ae.fingerprints),xe+=this.printSetup(Ae.setup),xe+=this.printMid(Ae.mid),xe+=this.printExtmap(Ae.extmaps),xe+=this.printRTPRelated(Ae),xe+=this.printPtime(Ae.ptime),xe+=this.printMaxPtime(Ae.maxPtime),xe+=this.printDirection(Ae.direction),xe+=this.printSSRCGroups(Ae.ssrcGroups),xe+=this.printSSRC(Ae.ssrcs),xe+=this.printRTCPMux(Ae.rtcpMux),xe+=this.printRTCPMuxOnly(Ae.rtcpMuxOnly),xe+=this.printRTCPRsize(Ae.rtcpRsize),xe+=this.printMSId(Ae.msids),xe+=this.printImageattr(Ae.imageattr),xe+=this.printRid(Ae.rids),xe+=this.printSimulcast(Ae.simulcast),xe+=this.printSCRPPort(Ae.sctpPort),xe+=this.printMaxMessageSize(Ae.maxMessageSize),xe+=this.printUnrecognized(Ae.unrecognized),xe}printCandidates(j){return j.map(Ae=>"a=candidate:".concat(Ae.foundation).concat(S).concat(Ae.componentId).concat(S).concat(Ae.transport).concat(S).concat(Ae.priority).concat(S).concat(Ae.connectionAddress).concat(S).concat(Ae.port).concat(S,"typ").concat(S).concat(Ae.type).concat(Ae.relAddr?"".concat(S,"raddr").concat(S).concat(Ae.relAddr):"").concat(Ae.relPort?"".concat(S,"rport").concat(S).concat(Ae.relPort):"").concat(Object.keys(Ae.extension).map(xe=>"".concat(S).concat(xe).concat(S).concat(Ae.extension[xe])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(j){return j.map(Ae=>"a=remote-candidates:".concat(Ae.join(S)).concat(this.eol)).join("")}printEndOfCandidates(j){return void 0===j?"":"a=end-of-candidates"+this.eol}printRTPRelated(j){if(!j.payloads)return"";const Ae=j.payloads;let xe="";xe+=j.rtcpFeedbackWildcards.map(Ft=>this.printRTCPFeedback("*",Ft)).join("");for(const Ft of Ae)xe+=this.printRtpMap(Ft.payloadType,Ft.rtpMap),xe+=this.printFmtp(Ft.payloadType,Ft.fmtp),xe+=Ft.rtcpFeedbacks.map(Tn=>this.printRTCPFeedback(Ft.payloadType,Tn)).join("");return xe}printFmtp(j,Ae){if(!Ae)return"";const xe=Object.keys(Ae.parameters);return 1===xe.length&&void 0===Ae.parameters[xe[0]]?"a=fmtp:".concat(j).concat(S).concat(xe[0]).concat(this.eol):"a=fmtp:".concat(j).concat(S).concat(Object.keys(Ae.parameters).map(Ft=>"".concat(Ft,"=").concat(Ae.parameters[Ft])).join(";")).concat(this.eol)}printRtpMap(j,Ae){return Ae?"a=rtpmap:".concat(j).concat(S).concat(Ae.encodingName,"/").concat(Ae.clockRate).concat(Ae.encodingParameters?"/".concat(Ae.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(j,Ae){let xe="a=rtcp-fb:".concat(j).concat(S),Ft=Ae;return"trr-int"===Ft.type?xe+="ttr-int".concat(S).concat(Ft.interval):(xe+="".concat(Ft.type),Ft.parameter&&(xe+="".concat(S).concat(Ft.parameter),Ft.additional&&(xe+="".concat(S).concat(Ft.additional)))),xe+this.eol}printPtime(j){return void 0===j?"":"a=ptime:".concat(j).concat(this.eol)}printMaxPtime(j){return void 0===j?"":"a=maxptime:".concat(j).concat(this.eol)}printDirection(j){return void 0===j?"":"a=".concat(j).concat(this.eol)}printSSRC(j){return j.map(Ae=>Object.keys(Ae.attributes).map(xe=>"a=ssrc:".concat(Ae.ssrcId.toString(10)).concat(S).concat(xe).concat(Ae.attributes[xe]?":".concat(Ae.attributes[xe]):"").concat(this.eol)).join("")).join("")}printRTCPMux(j){return void 0===j?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(j){return void 0===j?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(j){return void 0===j?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(j){if(void 0===j)return"";let Ae="a=rtcp:".concat(j.port);return j.netType&&(Ae+="".concat(S).concat(j.netType)),j.addressType&&(Ae+="".concat(S).concat(j.addressType)),j.address&&(Ae+="".concat(S).concat(j.address)),Ae+this.eol}printMSId(j){return j.map(Ae=>"a=msid:".concat(Ae.id).concat(Ae.appdata?"".concat(S).concat(Ae.appdata):"").concat(this.eol)).join("")}printImageattr(j){return j.map(Ae=>"a=imageattr:".concat(Ae).concat(this.eol)).join("")}printRid(j){return j.map(Ae=>{let xe="a=rid:".concat(Ae.id).concat(S).concat(Ae.direction);return Ae.payloads&&(xe+="".concat(S,"pt=").concat(Ae.payloads.join(","))),Ae.params.length>0&&(xe+="".concat(S).concat(Ae.params.map(Ft=>"depend"===Ft.type?"depend=".concat(Ft.rids.join(",")):"".concat(Ft.type,"=").concat(Ft.val)).join(";"))),xe+this.eol}).join("")}printSimulcast(j){return void 0===j?"":"a=simulcast:".concat(j).concat(this.eol)}printSCRPPort(j){return void 0===j?"":"a=sctp-port:".concat(j).concat(this.eol)}printMaxMessageSize(j){return void 0===j?"":"a=max-message-size:".concat(j)}printMid(j){return void 0===j?"":"a=mid:".concat(j).concat(this.eol)}printSSRCGroups(j){return j.map(Ae=>"a=ssrc-group:".concat(Ae.semantic).concat(Ae.ssrcIds.map(xe=>"".concat(S).concat(xe.toString(10))).join("")).concat(this.eol)).join("")}}function pn(Wt){return(new hn).parse(Wt)}function Dn(Wt,j){return(new bn).print(Wt,j)}}},c={};function h(g){if(c[g])return c[g].exports;var f=c[g]={exports:{}};return s[g](f,f.exports,h),f.exports}return h.d=(g,f)=>{for(var A in f)h.o(f,A)&&!h.o(g,A)&&Object.defineProperty(g,A,{enumerable:!0,get:f[A]})},h.o=(g,f)=>Object.prototype.hasOwnProperty.call(g,f),h.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h(8)})()}(qd);class ZG{constructor(o){J(this,"sessionDesc",void 0),J(this,"localCapabilities",void 0),J(this,"rtpCapabilities",void 0),J(this,"candidates",void 0),J(this,"iceParameters",void 0),J(this,"dtlsParameters",void 0),J(this,"setup",void 0),J(this,"currentMidIndex",void 0),J(this,"cname",void 0),o=_c(o);const{remoteIceParameters:s,remoteDtlsParameters:c,candidates:h,remoteRTPCapabilities:g,remoteSetup:f,localCapabilities:A,sdkCodec:_,cname:E}=o,S=qd.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=g,this.candidates=h,this.iceParameters=s,this.dtlsParameters=c,this.setup=f,this.localCapabilities=A,this.cname=E;for(let I=0;I<S.mediaDescriptions.length;I++){const R=S.mediaDescriptions[I];if(R.attributes.iceUfrag=s.iceUfrag,R.attributes.icePwd=s.icePwd,R.attributes.fingerprints=c.fingerprints,R.attributes.candidates=h,R.attributes.setup=f,"video"===R.media.mediaType){R.media.fmts=g.videoCodecs.map(Q=>Q.payloadType.toString(10));const M=g.videoCodecs.filter(Q=>{var H;return null===(H=Q.rtpMap)||void 0===H?void 0:H.encodingName.toLowerCase().includes(_)});if(0===M.length)throw new Error("Codec ".concat(_," not supported by remote SDP."));R.attributes.payloads=M,R.attributes.extmaps=g.videoExtensions}"audio"===R.media.mediaType&&(R.media.fmts=g.audioCodecs.map(M=>M.payloadType.toString(10)),R.attributes.payloads=g.audioCodecs,R.attributes.extmaps=g.audioExtensions),S.mediaDescriptions[I]=this.mungMediaDesc(R)}this.sessionDesc=S,this.currentMidIndex=S.mediaDescriptions.length-1}toString(){return qd.exports.print(this.sessionDesc)}send(o,s,c){const{ssrcs:h,ssrcGroups:g}=L1(s,this.cname),f=this.sessionDesc.mediaDescriptions.find(E=>o===ti.VIDEO?"video"===E.media.mediaType:"audio"===E.media.mediaType),A=h[0].attributes.label,_=h[0].attributes.mslabel;return f.attributes.ssrcs=f.attributes.ssrcs.concat(h),f.attributes.ssrcGroups=f.attributes.ssrcGroups.concat(g),{id:A,mslabel:_}}batchSend(o){return o.map(s=>{let{kind:c,ssrcMsg:h}=s;return this.send(c,h,void 0)})}stopSending(o){this.sessionDesc.mediaDescriptions.forEach(s=>{const c=[],h=[],g=[];s.attributes.ssrcs.forEach(f=>{o.includes(f.attributes.label||"")?g.push(f):c.push(f)}),s.attributes.ssrcGroups.forEach(f=>{g.map(A=>A.ssrcId).includes(f.ssrcIds[0])||h.push(f)}),s.attributes.ssrcs=c,s.attributes.ssrcGroups=h})}mute(o){const s=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!s)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.mute."));s.attributes.direction="inactive"}unmute(o){const s=this.sessionDesc.mediaDescriptions.find(c=>c.attributes.mid===o);if(!s)throw new Error("mediaDescription not found with ".concat(o," in remote SDP when calling RemoteSDP.unmute."));s.attributes.direction="sendonly"}receive(o,s,c){o.forEach((h,g)=>{const f=h._mediaStreamTrack,A=this.sessionDesc.mediaDescriptions.findIndex(E=>E.attributes.mid===f.kind),_=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[A],h);this.sessionDesc.mediaDescriptions[A]=_})}stopReceiving(o){}restartICE(o,s){o=_c(o),s=_c(s),this.iceParameters=o,this.candidates=s,this.sessionDesc.mediaDescriptions.forEach(c=>{c.attributes.iceUfrag=o.iceUfrag,c.attributes.icePwd=o.icePwd,c.attributes.candidates=this.candidates})}predictReceivingMids(o){const s=[];for(let c=0;c<o;c++)s.push((this.currentMidIndex+c+1).toString(10));return s}mungRecvMediaDsec(o,s){const c=_c(o);return vL(c,s),l4(c,s),c}updateRecvMedia(o,s){const c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===o);if(-1!==c){const h=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],s);this.sessionDesc.mediaDescriptions[c]=h}}bumpMid(o){this.currentMidIndex+=o}updateTrackLabel(o,s,c){const h=this.sessionDesc.mediaDescriptions.find(f=>o===ti.VIDEO?"video"===f.attributes.mid:"audio"===f.attributes.mid);if(h){const f=h.attributes.ssrcs.find(A=>A.attributes.label===s);var g;f&&(f.attributes.label=c,null===(g=f.attributes.msid)||void 0===g||g.replace(s,c))}}mungMediaDesc(o){const s=_c(o);return Jd(s),function(c){const h=c.attributes.extmaps.find(g=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===g.extensionName);h&&c.attributes.extmaps.splice(c.attributes.extmaps.indexOf(h),1),c.attributes.payloads.forEach(g=>{const f=g.rtcpFeedbacks.findIndex(A=>"transport-cc"===A.type);-1!==f&&g.rtcpFeedbacks.splice(f,1)})}(s),s}getSSRC(o){for(const s of this.sessionDesc.mediaDescriptions)for(const c of s.attributes.ssrcs)if(c.attributes.label===o)return[c]}}function Dp(n){if(Array.isArray(n))return n.map(function(c){return c});if(!eW(n))return n;var o={};for(var s in n)o[s]=eW(n[s])||Array.isArray(n[s])?Dp(n[s]):n[s];return o}function eW(n){return!("object"!=typeof n||Array.isArray(n)||!n)}var w6=function(){function n(o){this.input=[],this.size=o}return n.prototype.add=function(o){this.input.push(o),this.input.length>this.size&&this.input.splice(0,1)},n.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},n}(),f2=function(n,o){return(f2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)c.hasOwnProperty(h)&&(s[h]=c[h])})(n,o)};function d4(n,o){function s(){this.constructor=n}f2(n,o),n.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}var dS=function(){return(dS=Object.assign||function(n){for(var o,s=1,c=arguments.length;s<c;s++)for(var h in o=arguments[s])Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h]);return n}).apply(this,arguments)};function h4(n,o,s,c){return new(s||(s=Promise))(function(h,g){function f(E){try{_(c.next(E))}catch(S){g(S)}}function A(E){try{_(c.throw(E))}catch(S){g(S)}}function _(E){E.done?h(E.value):new s(function(S){S(E.value)}).then(f,A)}_((c=c.apply(n,o||[])).next())})}function B1(n,o){var s,c,h,g,f={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return g={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function A(_){return function(E){return function(S){if(s)throw new TypeError("Generator is already executing.");for(;f;)try{if(s=1,c&&(h=2&S[0]?c.return:S[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,S[1])).done)return h;switch(c=0,h&&(S=[2&S[0],h.value]),S[0]){case 0:case 1:h=S;break;case 4:return f.label++,{value:S[1],done:!1};case 5:f.label++,c=S[1],S=[0];continue;case 7:S=f.ops.pop(),f.trys.pop();continue;default:if(!((h=(h=f.trys).length>0&&h[h.length-1])||6!==S[0]&&2!==S[0])){f=0;continue}if(3===S[0]&&(!h||S[1]>h[0]&&S[1]<h[3])){f.label=S[1];break}if(6===S[0]&&f.label<h[1]){f.label=h[1],h=S;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(S);break}h[2]&&f.ops.pop(),f.trys.pop();continue}S=o.call(n,f)}catch(I){S=[6,I],c=0}finally{s=h=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([_,E])}}}var ed,p4={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},F1={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:p4,remoteCandidate:p4}},T6={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},AL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},f4={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},R6={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},m4=function(){function n(o,s){var c=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=Dp(F1),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=o,this.options=s,this.intervalTimer=window.setInterval(function(){return h4(c,void 0,void 0,function(){return B1(this,function(h){return this.updateStats(),[2]})})},this.options.updateInterval)}return n.prototype.getStats=function(){return this.stats},n.prototype.setVideoIsReady=function(o){this.videoIsReady=o},n.prototype.setVideoIsReady2=function(o,s){this.videoIsReady2[o]=s},n.prototype.getVideoIsReady=function(o){return this.videoIsReady2[o]||!1},n.prototype.setIsFirstAudioDecoded=function(o){},n.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},n.prototype.calcLossRate=function(o){var s=this;this.lossRateWindowStats.push(o),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var c=this.lossRateWindowStats.length,h=0,g=0,f=0,A=0,_=function(I){o[I].forEach(function(R,M){if(s.lossRateWindowStats[c-1][I][M]&&s.lossRateWindowStats[0][I][M]){var Q=s.lossRateWindowStats[c-1][I][M].packets-s.lossRateWindowStats[0][I][M].packets,H=s.lossRateWindowStats[c-1][I][M].packetsLost-s.lossRateWindowStats[0][I][M].packetsLost;"videoSend"===I||"audioSend"===I?(h+=Q,f+=H):(g+=Q,A+=H),R.packetLostRate=Number.isNaN(Q)||Number.isNaN(Q)||Q<=0||H<=0?0:H/(Q+H)}})},E=0,S=["videoSend","audioSend","videoRecv","audioRecv"];E<S.length;E++)_(S[E]);o.sendPacketLossRate=h<=0||f<=0?0:f/(h+f),o.recvPacketLossRate=g<=0||A<=0?0:A/(g+A)},n}(),tW=function(n){function o(){var s=null!==n&&n.apply(this,arguments)||this;return s._stats=F1,s.lastDecodeVideoReceiverStats=new Map,s}return d4(o,n),o.prototype.updateStats=function(){return h4(this,void 0,void 0,function(){var s,c,h,g;return B1(this,function(f){switch(f.label){case 0:return[4,this._getStats()];case 1:return s=f.sent(),c=this.statsResponsesToObjects(s),this._stats=Dp(F1),h=c.filter(function(A){return"ssrc"===A.type}),this.processSSRCStats(h),(g=c.find(function(A){return"VideoBwe"===A.type}))&&this.processBandwidthStats(g),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processBandwidthStats=function(s){this._stats.bitrate={actualEncoded:Number(s.googActualEncBitrate),targetEncoded:Number(s.googTargetEncBitrate),retransmit:Number(s.googRetransmitBitrate),transmit:Number(s.googTransmitBitrate)},this._stats.sendBandwidth=Number(s.googAvailableSendBandwidth)},o.prototype.processSSRCStats=function(s){var c=this;s.forEach(function(h){var g=h.id.includes("send");switch(h.mediaType+"_"+(g?"send":"recv")){case"video_send":var f=Dp(AL);f.codec=h.googCodecName,f.adaptionChangeReason="none",h.googCpuLimitedResolution&&(f.adaptionChangeReason="cpu"),h.googBandwidthLimitedResolution&&(f.adaptionChangeReason="bandwidth"),f.avgEncodeMs=Number(h.googAvgEncodeMs),f.inputFrame={width:Number(h.googFrameWidthInput)||Number(h.googFrameWidthSent),height:Number(h.googFrameHeightInput)||Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},f.sentFrame={width:Number(h.googFrameWidthSent),height:Number(h.googFrameHeightSent),frameRate:Number(h.googFrameRateInput)},f.firsCount=Number(h.googFirReceived),f.nacksCount=Number(h.googNacksReceived),f.plisCount=Number(h.googPlisReceived),f.frameCount=Number(h.framesEncoded),f.bytes=Number(h.bytesSent),f.packets=Number(h.packetsSent),f.packetsLost=Number(h.packetsLost),f.ssrc=Number(h.ssrc),f.rttMs=Number(h.googRtt||0),c._stats.videoSend.push(f),c._stats.rtt=f.rttMs;break;case"video_recv":var A=Dp(T6),_=c.lastDecodeVideoReceiverStats.get(Number(h.ssrc));if(A.codec=h.googCodecName,A.targetDelayMs=Number(h.googTargetDelayMs),A.renderDelayMs=Number(h.googRenderDelayMs),A.currentDelayMs=Number(h.googCurrentDelayMs),A.minPlayoutDelayMs=Number(h.googMinPlayoutDelayMs),A.decodeMs=Number(h.googDecodeMs),A.maxDecodeMs=Number(h.googMaxDecodeMs),A.receivedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateReceived)},A.decodedFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateDecoded)},A.outputFrame={width:Number(h.googFrameWidthReceived),height:Number(h.googFrameHeightReceived),frameRate:Number(h.googFrameRateOutput)},A.jitterBufferMs=Number(h.googJitterBufferMs),A.firsCount=Number(h.googFirsSent),A.nacksCount=Number(h.googNacksSent),A.plisCount=Number(h.googPlisSent),A.framesDecodeCount=Number(h.framesDecoded),A.bytes=Number(h.bytesReceived),A.packets=Number(h.packetsReceived),A.packetsLost=Number(h.packetsLost),A.ssrc=Number(h.ssrc),A.packets>0&&!c.isFirstVideoReceived[A.ssrc]&&(c.onFirstVideoReceived&&c.onFirstVideoReceived(A.ssrc),c.isFirstVideoReceived[A.ssrc]=!0),A.framesDecodeCount>0&&!c.isFirstVideoDecoded[A.ssrc]&&(c.onFirstVideoDecoded&&c.onFirstVideoDecoded(A.ssrc,A.decodedFrame.width,A.decodedFrame.height),c.isFirstVideoDecoded[A.ssrc]=!0),_){var E=_.stats,S=Date.now()-_.lts;A.framesDecodeFreezeTime=E.framesDecodeFreezeTime,A.framesDecodeInterval=E.framesDecodeInterval,A.framesDecodeCount>E.framesDecodeCount&&c.isFirstVideoDecoded?(_.lts=Date.now(),A.framesDecodeInterval=S,A.framesDecodeInterval>=c.options.freezeRateLimit&&(c.getVideoIsReady(parseInt(h.ssrc,10))?A.framesDecodeFreezeTime+=A.framesDecodeInterval:c.setVideoIsReady2(parseInt(h.ssrc,10),!0))):A.framesDecodeCount<_.stats.framesDecodeCount&&(A.framesDecodeInterval=0)}c.lastDecodeVideoReceiverStats.set(A.ssrc,{stats:dS({},A),lts:Date.now()}),c._stats.videoRecv.push(A);break;case"audio_recv":var I=Dp(R6);I.codec=h.googCodecName,I.outputLevel=Math.abs(Number(h.audioOutputLevel))/32767,I.decodingCNG=Number(h.googDecodingCNG),I.decodingCTN=Number(h.googDecodingCTN),I.decodingCTSG=Number(h.googDecodingCTSG),I.decodingNormal=Number(h.googDecodingNormal),I.decodingPLC=Number(h.googDecodingPLC),I.decodingPLCCNG=Number(h.googDecodingPLCCNG),I.expandRate=Number(h.googExpandRate),I.accelerateRate=Number(h.googAccelerateRate),I.preemptiveExpandRate=Number(h.googPreemptiveExpandRate),I.secondaryDecodedRate=Number(h.googSecondaryDecodedRate),I.speechExpandRate=Number(h.googSpeechExpandRate),I.preferredJitterBufferMs=Number(h.googPreferredJitterBufferMs),I.jitterBufferMs=Number(h.googJitterBufferMs),I.jitterMs=Number(h.googJitterReceived),I.bytes=Number(h.bytesReceived),I.packets=Number(h.packetsReceived),I.packetsLost=Number(h.packetsLost),I.ssrc=Number(h.ssrc),I.receivedFrames=Number(h.googDecodingCTN)||Number(h.packetsReceived),I.droppedFrames=Number(h.googDecodingPLC)+Number(h.googDecodingPLCCNG)||Number(h.packetsLost),I.receivedFrames>0&&!c.isFirstAudioReceived[I.ssrc]&&(c.onFirstAudioReceived&&c.onFirstAudioReceived(I.ssrc),c.isFirstAudioReceived[I.ssrc]=!0),I.decodingNormal>0&&!c.isFirstAudioDecoded[I.ssrc]&&(c.onFirstAudioDecoded&&c.onFirstAudioDecoded(I.ssrc),c.isFirstAudioDecoded[I.ssrc]=!0),c._stats.audioRecv.push(I);break;case"audio_send":var R=Dp(f4);R.codec=h.googCodecName,R.inputLevel=Math.abs(Number(h.audioInputLevel))/32767,R.aecReturnLoss=Number(h.googEchoCancellationReturnLoss||0),R.aecReturnLossEnhancement=Number(h.googEchoCancellationReturnLossEnhancement||0),R.residualEchoLikelihood=Number(h.googResidualEchoLikelihood||0),R.residualEchoLikelihoodRecentMax=Number(h.googResidualEchoLikelihoodRecentMax||0),R.bytes=Number(h.bytesSent),R.packets=Number(h.packetsSent),R.packetsLost=Number(h.packetsLost),R.ssrc=Number(h.ssrc),R.rttMs=Number(h.googRtt||0),c._stats.rtt=R.rttMs,c._stats.audioSend.push(R)}})},o.prototype._getStats=function(){var s=this;return new Promise(function(c,h){s.pc.getStats(c,h)})},o.prototype.statsResponsesToObjects=function(s){var c=[];return s.result().forEach(function(h){var g={id:h.id,timestamp:h.timestamp.valueOf().toString(),type:h.type};h.names().forEach(function(f){g[f]=h.stat(f)}),c.push(g)}),c},o}(m4);!function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(ed||(ed={}));var Ri,O6=function(n){function o(){var s=null!==n&&n.apply(this,arguments)||this;return s._stats=F1,s.lastDecodeVideoReceiverStats=new Map,s.lastVideoFramesRecv=new Map,s.lastVideoFramesSent=new Map,s.lastVideoFramesDecode=new Map,s.lastVideoJBDelay=new Map,s.lastAudioJBDelay=new Map,s.mediaBytesSent=new Map,s.mediaBytesRetransmit=new Map,s.mediaBytesTargetEncode=new Map,s.lastEncoderMs=new Map,s}return d4(o,n),o.prototype.updateStats=function(){return h4(this,void 0,void 0,function(){var s,c=this;return B1(this,function(h){switch(h.label){case 0:return s=this,[4,this.pc.getStats()];case 1:return s.report=h.sent(),this._stats=Dp(F1),this.report.forEach(function(g){switch(g.type){case ed.OUTBOUND:"audio"===g.mediaType?c.processAudioOutboundStats(g):"video"===g.mediaType&&c.processVideoOutboundStats(g);break;case ed.INBOUND:"audio"===g.mediaType?c.processAudioInboundStats(g):"video"===g.mediaType&&c.processVideoInboundStats(g);break;case ed.TRANSPORT:var f=c.report.get(g.selectedCandidatePairId);f&&c.processCandidatePairStats(f);break;case ed.CANDIDATE_PAIR:g.selected&&c.processCandidatePairStats(g)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}})})},o.prototype.processCandidatePairStats=function(s){if(this._stats.sendBandwidth=s.availableOutgoingBitrate||0,s.currentRoundTripTime&&(this._stats.rtt=1e3*s.currentRoundTripTime),this._stats.videoSend.forEach(function(g){!g.rttMs&&s.currentRoundTripTime&&(g.rttMs=1e3*s.currentRoundTripTime)}),this._stats.audioSend.forEach(function(g){!g.rttMs&&s.currentRoundTripTime&&(g.rttMs=1e3*s.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=s.id,s.localCandidateId){var c=this.report.get(s.localCandidateId);c&&this.processCandidateStats(c)}if(s.remoteCandidateId){var h=this.report.get(s.remoteCandidateId);h&&this.processCandidateStats(h)}},o.prototype.processCandidateStats=function(s){var c;s.type===ed.LOCAL_CANDIDATE&&(c=this._stats.selectedCandidatePair.localCandidate),s.type===ed.REMOTE_CANDIDATE&&(c=this._stats.selectedCandidatePair.remoteCandidate),c&&(c.type=s.type,c.id=s.id,s.address&&(c.address=s.address),s.candidateType&&(c.candidateType=s.candidateType),s.port&&(c.port=s.port),s.priority&&(c.priority=s.priority),s.protocol&&(c.protocol=s.protocol),s.relayProtocol&&(c.relayProtocol=s.relayProtocol),s.type===ed.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==c.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(dS({},c),dS({},this.stats.selectedCandidatePair.localCandidate)),s.type===ed.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==c.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(dS({},c),dS({},this.stats.selectedCandidatePair.remoteCandidate)))},o.prototype.processAudioInboundStats=function(s){var c=this._stats.audioRecv.find(function(h){return h.ssrc===s.ssrc});c||(c=Dp(R6),this._stats.audioRecv.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsReceived,c.packetsLost=s.packetsLost,c.bytes=s.bytesReceived,c.jitterMs=1e3*s.jitter,s.trackId&&this.processAudioTrackReceiverStats(s.trackId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),c.receivedFrames||(c.receivedFrames=s.packetsReceived),c.droppedFrames||(c.droppedFrames=s.packetsLost),c.receivedFrames>0&&!this.isFirstAudioReceived[c.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(c.ssrc),this.isFirstAudioReceived[c.ssrc]=!0),c.outputLevel&&c.outputLevel>0&&!this.isFirstAudioDecoded[c.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(c.ssrc),this.isFirstAudioDecoded[c.ssrc]=!0)},o.prototype.processVideoInboundStats=function(s){var c=this._stats.videoRecv.find(function(I){return I.ssrc===s.ssrc});c||(c=Dp(T6),this._stats.videoRecv.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsReceived,c.packetsLost=s.packetsLost,c.bytes=s.bytesReceived,c.firsCount=s.firCount,c.nacksCount=s.nackCount,c.plisCount=s.pliCount,c.framesDecodeCount=s.framesDecoded;var h=this.lastDecodeVideoReceiverStats.get(c.ssrc),g=this.lastVideoFramesDecode.get(c.ssrc),f=Date.now();if(c.framesDecodeCount>0&&!this.isFirstVideoDecoded[c.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c.ssrc,c.decodedFrame?c.decodedFrame.width:0,c.decodedFrame?c.decodedFrame.height:0),this.isFirstVideoDecoded[c.ssrc]=!0),h){var E=h.stats,S=f-h.lts;c.framesDecodeFreezeTime=E.framesDecodeFreezeTime,c.framesDecodeInterval=E.framesDecodeInterval,c.framesDecodeCount>E.framesDecodeCount&&this.isFirstVideoDecoded?(h.lts=Date.now(),c.framesDecodeInterval=S,c.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(s.ssrc))?c.framesDecodeFreezeTime+=c.framesDecodeInterval:this.setVideoIsReady2(parseInt(s.ssrc,10),!0))):c.framesDecodeCount<E.framesDecodeCount&&(c.framesDecodeInterval=0),s.framesDecoded&&s.qpSum&&(c.qpSumPerFrame=h.stats.framesDecodeCount>s.framesDecoded?s.qpSum/s.framesDecoded:(s.qpSum-h.qpSum)/(s.framesDecoded-h.stats.framesDecodeCount))}g&&f-g.lts>=800?(c.decodeFrameRate=Math.round((c.framesDecodeCount-g.count)/((f-g.lts)/1e3)),this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:f,rate:c.decodeFrameRate})):g?c.decodeFrameRate=g.rate:this.lastVideoFramesDecode.set(c.ssrc,{count:c.framesDecodeCount,lts:f,rate:0}),s.totalDecodeTime&&(c.decodeMs=1e3*s.totalDecodeTime),s.trackId&&this.processVideoTrackReceiverStats(s.trackId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.framerateMean&&(c.framesRateFirefox=s.framerateMean),c.packets>0&&!this.isFirstVideoReceived[c.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(c.ssrc),this.isFirstVideoReceived[c.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(c.ssrc,{stats:dS({},c),lts:h?h.lts:Date.now(),qpSum:s.qpSum})},o.prototype.processVideoOutboundStats=function(s){var c=this._stats.videoSend.find(function(R){return R.ssrc===s.ssrc});c||(c=Dp(AL),this._stats.videoSend.push(c));var h,g=this.mediaBytesSent.get(s.ssrc);if(g?g.add(s.bytesSent):((A=new w6(10)).add(s.bytesSent),this.mediaBytesSent.set(s.ssrc,A)),void 0!==s.retransmittedBytesSent){var f=this.mediaBytesRetransmit.get(s.ssrc);f?f.add(s.retransmittedBytesSent):((A=new w6(10)).add(s.retransmittedBytesSent),this.mediaBytesRetransmit.set(s.ssrc,A))}if(s.totalEncodedBytesTarget){var A,_=this.mediaBytesTargetEncode.get(s.ssrc);_?_.add(s.totalEncodedBytesTarget):((A=new w6(10)).add(s.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(s.ssrc,A))}if(c.ssrc=s.ssrc,c.bytes=s.bytesSent,c.packets=s.packetsSent,c.firsCount=s.firCount,c.nacksCount=s.nackCount,c.plisCount=s.pliCount,c.frameCount=s.framesEncoded,c.adaptionChangeReason=s.qualityLimitationReason,s.totalEncodeTime&&s.framesEncoded&&(c.avgEncodeMs=!(h=this.lastEncoderMs.get(s.ssrc))||h.lastFrameCount>s.framesEncoded?1e3*s.totalEncodeTime/s.framesEncoded:1e3*(s.totalEncodeTime-h.lastEncoderTime)/(s.framesEncoded-h.lastFrameCount)),s.framesEncoded&&s.qpSum&&(c.qpSumPerFrame=!(h=this.lastEncoderMs.get(s.ssrc))||h.lastFrameCount>s.framesEncoded?s.qpSum/s.framesEncoded:(s.qpSum-h.lastQpSum)/(s.framesEncoded-h.lastFrameCount)),this.lastEncoderMs.set(s.ssrc,{lastFrameCount:s.framesEncoded,lastEncoderTime:s.totalEncodeTime,lastQpSum:s.qpSum,lts:Date.now()}),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.mediaSourceId&&this.processVideoMediaSource(s.mediaSourceId,c),s.trackId&&this.processVideoTrackSenderStats(s.trackId,c),s.remoteId)this.processRemoteInboundStats(s.remoteId,c);else{var I=this.findRemoteStatsId(s.ssrc,ed.REMOTE_INBOUND);I&&this.processRemoteInboundStats(I,c)}},o.prototype.processAudioOutboundStats=function(s){var c=this._stats.audioSend.find(function(g){return g.ssrc===s.ssrc});if(c||(c=Dp(f4),this._stats.audioSend.push(c)),c.ssrc=s.ssrc,c.packets=s.packetsSent,c.bytes=s.bytesSent,s.mediaSourceId&&this.processAudioMediaSource(s.mediaSourceId,c),s.codecId&&(c.codec=this.getCodecFromCodecStats(s.codecId)),s.trackId&&this.processAudioTrackSenderStats(s.trackId,c),s.remoteId)this.processRemoteInboundStats(s.remoteId,c);else{var h=this.findRemoteStatsId(s.ssrc,ed.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,c)}},o.prototype.findRemoteStatsId=function(s,c){var h=Array.from(this.report.values()).find(function(g){return g.type===c&&g.ssrc===s});return h?h.id:null},o.prototype.processVideoMediaSource=function(s,c){var h=this.report.get(s);h&&h.width&&h.height&&h.framesPerSecond&&(c.inputFrame={width:h.width,height:h.height,frameRate:h.framesPerSecond})},o.prototype.processAudioMediaSource=function(s,c){var h=this.report.get(s);h&&(c.inputLevel=h.audioLevel)},o.prototype.processVideoTrackSenderStats=function(s,c){var h=this.report.get(s);if(h){var g=0,f=Date.now(),A=this.lastVideoFramesSent.get(c.ssrc);A&&f-A.lts>=800?(g=Math.round((h.framesSent-A.count)/((f-A.lts)/1e3)),this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:f,rate:g})):A?g=A.rate:this.lastVideoFramesSent.set(c.ssrc,{count:h.framesSent,lts:f,rate:0}),c.sentFrame={width:h.frameWidth,height:h.frameHeight,frameRate:g}}},o.prototype.processVideoTrackReceiverStats=function(s,c){var h=this.report.get(s);if(h){var g=this.lastVideoFramesRecv.get(c.ssrc),f=Date.now();c.framesReceivedCount=h.framesReceived;var A=0;if(g&&f-g.lts>=800?(A=Math.round((h.framesReceived-g.count)/((f-g.lts)/1e3)),this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:f,rate:A})):g?A=g.rate:this.lastVideoFramesRecv.set(c.ssrc,{count:h.framesReceived,lts:f,rate:0}),c.receivedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:A||0},c.decodedFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},c.outputFrame={width:h.frameWidth||0,height:h.frameHeight||0,frameRate:c.decodeFrameRate||0},h.jitterBufferDelay&&h.jitterBufferEmittedCount){var _=this.lastVideoJBDelay.get(c.ssrc);this.lastVideoJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),_||(_={jitterBufferDelay:0,jitterBufferEmittedCount:0});var E=1e3*(h.jitterBufferDelay-_.jitterBufferDelay)/(h.jitterBufferEmittedCount-_.jitterBufferEmittedCount);c.jitterBufferMs=E,c.currentDelayMs=Math.round(E)}}},o.prototype.processAudioTrackSenderStats=function(s,c){var h=this.report.get(s);h&&(c.aecReturnLoss=h.echoReturnLoss||0,c.aecReturnLossEnhancement=h.echoReturnLossEnhancement||0)},o.prototype.processAudioTrackReceiverStats=function(s,c){var h=this.report.get(s);if(h){if(h.removedSamplesForAcceleration&&h.totalSamplesReceived&&(c.accelerateRate=h.removedSamplesForAcceleration/h.totalSamplesReceived),h.jitterBufferDelay&&h.jitterBufferEmittedCount){var g=this.lastAudioJBDelay.get(c.ssrc);this.lastAudioJBDelay.set(c.ssrc,{jitterBufferDelay:h.jitterBufferDelay,jitterBufferEmittedCount:h.jitterBufferEmittedCount}),g||(g={jitterBufferDelay:0,jitterBufferEmittedCount:0}),c.jitterBufferMs=Math.round(1e3*(h.jitterBufferDelay-g.jitterBufferDelay)/(h.jitterBufferEmittedCount-g.jitterBufferEmittedCount))}c.outputLevel=h.audioLevel;var A=1920;h.totalSamplesDuration&&h.totalSamplesReceived&&(A=h.totalSamplesReceived/h.totalSamplesDuration/50,c.receivedFrames=Math.round(h.totalSamplesReceived/A)),h.concealedSamples&&(c.droppedFrames=Math.round(h.concealedSamples/A))}},o.prototype.processRemoteInboundStats=function(s,c){var h=this.report.get(s);h&&(c.packetsLost=h.packetsLost,h.roundTripTime&&(c.rttMs=1e3*h.roundTripTime))},o.prototype.getCodecFromCodecStats=function(s){var c=this.report.get(s);if(!c)return"";var h=c.mimeType.match(/\/(.*)$/);return h&&h[1]?h[1]:""},o.prototype.updateSendBitrate=function(){var s=0,c=null,h=null;this.mediaBytesSent.forEach(function(f){s+=f.diffMean()}),this.mediaBytesRetransmit.forEach(function(f){c=null===c?f.diffMean():c+f.diffMean()}),this.mediaBytesTargetEncode.forEach(function(f){h=null===h?f.diffMean():h+f.diffMean()}),this._stats.bitrate={actualEncoded:8*(null!==c?s-c:s)/(this.options.updateInterval/1e3),transmit:8*s/(this.options.updateInterval/1e3)},null!==c&&(this._stats.bitrate.retransmit=8*c/(this.options.updateInterval/1e3)),null!==h&&(this._stats.bitrate.targetEncoded=8*h/(this.options.updateInterval/1e3))},o}(m4),nW=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return d4(o,n),o.prototype.updateStats=function(){return Promise.resolve()},o}(m4);function Wy(n,o,s,c){void 0===o&&(o=250),void 0===s&&(s=8),void 0===c&&(c=500);var h,g=(h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i))&&h[0]?Number(h[0].split("/")[1]):null;return g?g<76?new tW(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):new O6(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):window.RTCStatsReport&&n.getStats()instanceof Promise?new O6(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c}):new nW(n,{updateInterval:o,lossRateInterval:s,freezeRateLimit:c})}function yL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function EL(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?yL(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):yL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let bL=(rr((Ri=class t7 extends BV{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(o,s){super(o,s),J(this,"store",void 0),J(this,"peerConnection",void 0),J(this,"remoteSDP",void 0),J(this,"initialOffer",void 0),J(this,"statsFilter",void 0),J(this,"useRTX",!1),J(this,"localCapabilities",void 0),J(this,"localCandidateCount",0),J(this,"allCandidatesReceived",!1),J(this,"mutex",new Ru("P2PConnection-mutex")),this.store=s,this.peerConnection=new RTCPeerConnection(t7.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=Wy(this.peerConnection,void 0,void 0,hs()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return F(function*(){try{const s=yield o.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=x1(s.sdp),h=u4(s.sdp,!o.useRTX,!1,["opus"]);return o.localCapabilities=h,o.initialOffer=s,EL(EL({},c),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:h},offerSDP:s.sdp})}catch(s){throw new ye(pe.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}})()}connect(o,s,c,h,g,f){var A=this;return F(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new ZG({remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h.send,remoteSetup:g,localCapabilities:A.localCapabilities,sdkCodec:A.store.codec,cname:f});const _=A.remoteSDP.toString();yield A.peerConnection.setLocalDescription(A.initialOffer),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(_){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(o,s){var c=this;return c2(function*(){const h=yield As(c.mutex.lock());try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const g=o.map(R=>c.peerConnection.addTrack(R._mediaStreamTrack)),f=yield As(c.peerConnection.createOffer()),A=qd.exports.parse(f.sdp),_=o.map(R=>{const M=R._mediaStreamTrack,Q=A.mediaDescriptions.find(H=>H.attributes.mid===M.kind);if(!Q)throw new Error("Cannot extract ssrc from mediaDescription.");return function(H,Z,le){const ge=H.attributes.ssrcs.filter(Ne=>Ne.attributes.label===Z),Se=H.attributes.ssrcGroups;if(0===ge.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Se&&ge.length>1){const Ne=Se.find(nt=>-1!==nt.ssrcIds.indexOf(ge[0].ssrcId));return Ne?[{ssrcId:Ne.ssrcIds[0],rtx:le?Ne.ssrcIds[1]:void 0}]:[{ssrcId:ge[0].ssrcId}]}return[{ssrcId:ge[0].ssrcId}]}(Q,M.id,c.useRTX)});let E;try{E=yield _}catch(R){throw g.forEach(M=>{Ql()&&M.replaceTrack(null),c.peerConnection.removeTrack(M)}),R}const S=c.mungSendOfferSDP(f.sdp,o);c.remoteSDP.receive(o,s,E);const I=c.remoteSDP.toString();return yield As(c.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield As(c.applySendEncodings(g,o)),yield As(c.peerConnection.setRemoteDescription({type:"answer",sdp:I})),o.map((R,M)=>({localSSRC:_[M],id:R._mediaStreamTrack.id}))}catch(g){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(g.toString()))}finally{h()}})()}stopSending(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const c=s.peerConnection.getSenders().filter(f=>{var A;return-1!==o.indexOf((null===(A=f.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");c.map(f=>{Ql()&&f.replaceTrack(null),s.peerConnection.removeTrack(f)});const h=yield s.peerConnection.createOffer();yield s.peerConnection.setLocalDescription(h),s.remoteSDP.stopReceiving(o);const g=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(c.toString()))}})()}receive(o,s,c,h){var g=this;return F(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{id:f,mslabel:A}=g.remoteSDP.send(o,s,h),_=new Qn((I,R)=>{const M=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(f)))},1e4),Q=H=>{const Z=wi();if(("Safari"===Z.name&&11===Number(Z.version)||qc())&&H.track.id!==f&&H.streams[0].id===A){var le;const ge=H.streams[0].getTracks()[0];return null===(le=g.remoteSDP)||void 0===le||le.updateTrackLabel(o,f,H.track.id),g.peerConnection.removeEventListener("track",Q),clearTimeout(M),void I(ge)}if(H.track.id===f)return g.peerConnection.removeEventListener("track",Q),clearTimeout(M),void I(H.track)};g.peerConnection.addEventListener("track",Q)}),E=g.remoteSDP.toString();yield g.peerConnection.setRemoteDescription({type:"offer",sdp:E});const S=yield g.peerConnection.createAnswer();return yield g.peerConnection.setLocalDescription(S),{track:yield _,id:f}}catch(f){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(f.toString()))}})()}stopReceiving(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");s.remoteSDP.stopSending(o);const c=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const h=yield s.peerConnection.createAnswer();yield s.peerConnection.setLocalDescription(h)}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){return F(function*(){})()}unmuteRemote(o){return F(function*(){})()}muteLocal(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=s.peerConnection.getSenders().filter(h=>{var g;return-1!==o.indexOf((null===(g=h.track)||void 0===g?void 0:g.id)||"")});if(c.length!==o.length)throw new Error("sender' length doesn't match mids' length.");c.map(h=>{if(Ql()&&h.track)h.track.enabled=!1;else{const g=h.getParameters();g.encodings.forEach(f=>f.active=!1),h.setParameters(g)}})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=s.peerConnection.getSenders().filter(f=>{var A;return-1!==o.indexOf((null===(A=f.track)||void 0===A?void 0:A.id)||"")});if(c.length!==o.length)throw new Error("Senders' length doesn't match mids' length.");c.map(function(){var f=F(function*(A){if(Ql()&&A.track)A.track.enabled=!0;else{const _=A.getParameters();_.encodings.forEach(E=>E.active=!0),yield A.setParameters(_)}});return function(A){return f.apply(this,arguments)}}());const h=yield s.peerConnection.createOffer();yield s.peerConnection.setLocalDescription(h);const g=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return F(function*(){const s=yield o.peerConnection.createOffer({iceRestart:!0});if(!s.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:x1(s.sdp).iceParameters,restartICE:(c=F(function*(h,g){return o.restartICE(s,h,g)}),function(g,f){return c.apply(this,arguments)}),restartOfferSDP:s.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,s){var c=this;return F(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[s]);c.remoteSDP.updateRecvMedia(s._mediaStreamTrack.kind,s);const f=c.remoteSDP.toString();yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(h){throw new ye(pe.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(o,s){var c=this;return F(function*(){const h=c.peerConnection.getSenders().filter(g=>{var f;return(null===(f=g.track)||void 0===f?void 0:f.id)===o});1===h.length&&(yield c.applySendEncodings(h,[s]))})()}setStatsRemoteVideoIsReady(o,s){this.statsFilter.setVideoIsReady2(o,s)}replaceTrack(o,s){var c=this;return F(function*(){const h=c.peerConnection.getSenders().find(g=>{var f;return(null===(f=g.track)||void 0===f?void 0:f.id)===s});h&&(yield h.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,s,c){var h=this;return F(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(s,c);const g=h.remoteSDP.toString();yield h.peerConnection.setLocalDescription(o),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Qt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const s={iceServers:[],sdpSemantics:"plan-b"};return o.iceServers?s.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(QF(o.turnServer.servers)?s.iceServers=o.turnServer.servers:(s.iceServers&&s.iceServers.push(...t7.turnServerConfigToIceServers(o.turnServer.servers)),Qt("USE_TURN_SERVER_OF_GATEWAY")&&s.iceServers&&o.turnServer.serversFromGateway&&s.iceServers.push(...t7.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(s.iceTransportPolicy="relay")}))),s}static turnServerConfigToIceServers(o){const s=[];return o.forEach(c=>{c.security?c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),s}applySendEncodings(o,s){return F(function*(){try{if(!Zc().supportSetRtpSenderParameters||o.length!==s.length)return;for(let h=0;h<o.length;h++){var c;const g=o[h],f=s[h];if(!f)continue;const A={},_={};if(f instanceof ea)switch(f._optimizationMode){case"motion":A.degradationPreference="maintain-framerate";break;case"detail":A.degradationPreference="maintain-resolution";break;default:A.degradationPreference="balanced"}if(Qt("DSCP_TYPE")&&P0()){const I=Qt("DSCP_TYPE");["very-low","low","medium","high"].includes(I)&&(_.networkPriority=I)}const E=g.getParameters(),S=null===(c=E.encodings)||void 0===c?void 0:c[0];S&&Object.assign(S,_),Object.assign(E,A),yield g.setParameters(E)}}catch{se.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,s){const c=qd.exports.parse(o);return s.forEach((h,g)=>{const f=h._mediaStreamTrack,A=c.mediaDescriptions.find(_=>_.attributes.mid===f.kind);A&&vL(A,h)}),qd.exports.print(c)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var s;null===(s=this.onFirstAudioReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var s;null===(s=this.onFirstVideoReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var s;null===(s=this.onFirstAudioDecoded)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,s,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,o,s,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,s)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}batchReceive(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const c=s.remoteSDP.batchSend(o).map((f,A)=>{let{id:_,mslabel:E}=f;const{kind:S}=o[A];return new Qn((I,R)=>{const M=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(_)))},1e4),Q=H=>{const Z=wi();if("Safari"===Z.name&&11===Number(Z.version)&&H.track.id!==_&&H.streams[0].id===E){var le;const ge=H.streams[0].getTracks()[0];return null===(le=s.remoteSDP)||void 0===le||le.updateTrackLabel(S,_,H.track.id),s.peerConnection.removeEventListener("track",Q),clearTimeout(M),void I({track:ge,id:_})}if(H.track.id===_)return s.peerConnection.removeEventListener("track",Q),clearTimeout(M),void I({track:H.track,id:_})};s.peerConnection.addEventListener("track",Q)})}),h=s.remoteSDP.toString();yield s.peerConnection.setRemoteDescription({type:"offer",sdp:h});const g=yield s.peerConnection.createAnswer();return yield s.peerConnection.setLocalDescription(g),yield Qn.all(c)}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"connect"),Ri.prototype),rr(Ri.prototype,"stopSending",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"stopSending"),Ri.prototype),rr(Ri.prototype,"receive",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"receive"),Ri.prototype),rr(Ri.prototype,"stopReceiving",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"stopReceiving"),Ri.prototype),rr(Ri.prototype,"muteRemote",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"muteRemote"),Ri.prototype),rr(Ri.prototype,"unmuteRemote",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"unmuteRemote"),Ri.prototype),rr(Ri.prototype,"muteLocal",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"muteLocal"),Ri.prototype),rr(Ri.prototype,"unmuteLocal",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"unmuteLocal"),Ri.prototype),rr(Ri.prototype,"reEstablish",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"reEstablish"),Ri.prototype),rr(Ri.prototype,"close",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"close"),Ri.prototype),rr(Ri.prototype,"updateEncoderConfig",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"updateEncoderConfig"),Ri.prototype),rr(Ri.prototype,"updateSendParameters",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"updateSendParameters"),Ri.prototype),rr(Ri.prototype,"replaceTrack",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"replaceTrack"),Ri.prototype),rr(Ri.prototype,"restartICE",[$d],Object.getOwnPropertyDescriptor(Ri.prototype,"restartICE"),Ri.prototype),Ri);function $d(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=F(function*(){const h=this.mutex,g=yield h.lock("Locking from P2PConnection.".concat(o));try{for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),s}var D6;let rW=Qs("RemoteSDP")(D6=class{get localCapabilities(){return _c(this._localCapabilities)}get rtpCapabilities(){return _c(this._rtpCapabilities)}get candidates(){return _c(this._candidates)}get iceParameters(){return _c(this._iceParameters)}get dtlsParameters(){return _c(this._dtlsParameters)}constructor(n){J(this,"sessionDesc",void 0),J(this,"_localCapabilities",void 0),J(this,"_rtpCapabilities",void 0),J(this,"_candidates",void 0),J(this,"_iceParameters",void 0),J(this,"_dtlsParameters",void 0),J(this,"setup",void 0),J(this,"currentMidIndex",void 0),J(this,"cname",void 0),J(this,"firefoxSsrcMidMap",new Map),n=_c(n);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:f,cname:A}=n,_=qd.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=h,this._candidates=c,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=f,this.setup=g,this.cname=A;const E=this.rtpCapabilities.send;for(const S of _.mediaDescriptions){if(S.attributes.iceUfrag=o.iceUfrag,S.attributes.icePwd=o.icePwd,S.attributes.fingerprints=s.fingerprints,S.attributes.candidates=c,S.attributes.setup=g,"video"===S.media.mediaType&&(S.media.fmts=E.videoCodecs.map(I=>I.payloadType.toString(10)),S.attributes.payloads=E.videoCodecs,S.attributes.extmaps=E.videoExtensions,Qt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:I,ssrcGroups:R}=L1([{ssrcId:4e4,rtx:Qt("USE_RTX")?40001:void 0}],this.cname);S.attributes.ssrcs=I,S.attributes.ssrcGroups=R}if("audio"===S.media.mediaType&&(S.media.fmts=E.audioCodecs.map(I=>I.payloadType.toString(10)),S.attributes.payloads=E.audioCodecs,S.attributes.extmaps=E.audioExtensions,Qt("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:I,ssrcGroups:R}=L1([{ssrcId:2e4}],this.cname);S.attributes.ssrcs=I,S.attributes.ssrcGroups=R}}this.sessionDesc=_,this.currentMidIndex=_.mediaDescriptions.length-1}preloadRemoteMedia(){const n=Qt("PRELOAD_MEDIA_COUNT");zt("debug",this,"preloadRemoteMedia",n);const o=this.candidates,s=this.dtlsParameters,c=this.iceParameters,h=this.rtpCapabilities.send;for(let g=1;g<n;g++){const f=2*g+2e4,A=2*g+4e4,{ssrcs:_,ssrcGroups:E}=L1([{ssrcId:f}],this.cname),{ssrcs:S,ssrcGroups:I}=L1([{ssrcId:A,rtx:Qt("USE_RTX")?A+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:S,ssrcGroups:I,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:c.iceUfrag,icePwd:c.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:_,ssrcGroups:E,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*g+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return qd.exports.print(this.sessionDesc)}send(n,o,s,c){const{ssrcs:h,ssrcGroups:g}=L1(o,this.cname,s),f=this.findPreloadMediaDesc(h);if(f){if(hs()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,f.attributes.mid),c&&(c.tcc||c.remb)){const A=this.sessionDesc.mediaDescriptions.indexOf(f);return this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(f,c),{mid:f.attributes.mid,needExchangeSDP:!0}}return{mid:f.attributes.mid,needExchangeSDP:!1}}{const A=this.findAvailableMediaIndex(n,h);if(Ql()||qo()){if(-1!==A&&1!==A){const _=_c(this.sessionDesc.mediaDescriptions[A]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(_,c),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),{mid:_.attributes.mid,needExchangeSDP:!0}}}if(-1!==A){const _=_c(this.sessionDesc.mediaDescriptions[A]);return _.attributes.direction="sendonly",_.attributes.ssrcs=h,_.attributes.ssrcGroups=g,this.sessionDesc.mediaDescriptions[A]=this.mungSendMediaDesc(_,c),hs()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}{const _=this.createOrRecycleSendMedia(n,h,g,"sendonly",c);return this.updateBundleMids(),hs()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,_.attributes.mid),{mid:_.attributes.mid,needExchangeSDP:!0}}}}batchSend(n){const o=n.map(h=>{let{kind:g,ssrcMsg:f,mslabel:A}=h;return this.send(g,f,A)}),s=[];let c=!1;return o.forEach(h=>{let{mid:g,needExchangeSDP:f}=h;f&&(c=!0),s.push(g)}),{mids:s,needExchangeSDP:c}}stopSending(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&-1!==n.indexOf(s.attributes.mid));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{"0"===s.attributes.mid||hs()||Ql()||qo()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(n){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(n){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n);if(!o)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>n.includes(s.attributes.mid||""));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>n.includes(s.attributes.mid||""));if(o.length!==n.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(n,o,s,c){n.forEach((h,g)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,c[g])}),this.updateBundleMids()}stopReceiving(n){const o=this.sessionDesc.mediaDescriptions.filter(s=>-1!==n.indexOf(s.attributes.mid));if(o.length!==n.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(n,o){n=_c(n),o=_c(o),this._iceParameters=n,this._candidates=o,this.sessionDesc.mediaDescriptions.forEach(s=>{s.attributes.iceUfrag=n.iceUfrag,s.attributes.icePwd=n.icePwd,s.attributes.candidates=this.candidates})}predictReceivingMids(n){const o=[];for(let s=0;s<n;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(n,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const c=s.media.mediaType===n&&"0"!==s.media.port&&("sendonly"===s.attributes.direction||"sendrecv"===s.attributes.direction)&&0===s.attributes.ssrcs.length;if(hs()){if(c){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||"0"!==s.attributes.mid&&"1"!==s.attributes.mid)||!(!h||h!==s.attributes.mid)}return!1}return c})}createOrRecycleRecvMedia(n,o,s,c,h,g){const f=n._mediaStreamTrack.kind,A=this.rtpCapabilities.recv,_=this.localCapabilities.send;let E=[];if(f===ti.VIDEO){var S,I;if(Qt("H264_PROFILE_LEVEL_ID")&&"h264"===c&&(E=A.videoCodecs.filter(Z=>{var le,ge;return((null===(le=Z.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes(c)&&(null==Z||null===(ge=Z.fmtp)||void 0===ge?void 0:ge.parameters["profile-level-id"])===Qt("H264_PROFILE_LEVEL_ID")})),!E||0===(null===(S=E)||void 0===S?void 0:S.length)){const Z=_.videoCodecs.filter(le=>{var ge;return((null===(ge=le.rtpMap)||void 0===ge?void 0:ge.encodingName.toLowerCase())||"").includes(c)});0!==Z.length&&(E=A.videoCodecs.filter(le=>Z.some(ge=>ge.payloadType===le.payloadType)))}if(Qt("USE_RTX")){const Z=E.map(ge=>ge.payloadType.toString()),le=A.videoCodecs.filter(ge=>{var Se,Ne;return"rtx"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName)&&Z.includes((null===(Ne=ge.fmtp)||void 0===Ne?void 0:Ne.parameters.apt)||"")});E=[...E,...le]}0===E.length&&(se.warning("codec ".concat(c," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(I=A.videoCodecs[0].rtpMap)||void 0===I?void 0:I.encodingName)),E=A.videoCodecs)}else E=A.audioCodecs.filter(Z=>{var le;return((null===(le=Z.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes(h)}),0===E.length&&(se.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),E=A.audioCodecs.filter(Z=>{var le;return((null===(le=Z.rtpMap)||void 0===le?void 0:le.encodingName.toLowerCase())||"").includes("opus")}));const R=f===ti.VIDEO?A.videoExtensions:A.audioExtensions;this.currentMidIndex+=1;const M="".concat(this.currentMidIndex);let Q={media:{mediaType:f,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:E.map(Z=>Z.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:R,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:E,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(M)}};Q=this.mungRecvMediaDsec(Q,n,g);const H=this.findFirstClosedMedia(f);if(H){const Z=this.sessionDesc.mediaDescriptions.indexOf(H);this.sessionDesc.mediaDescriptions[Z]=Q}else this.sessionDesc.mediaDescriptions.push(Q);return Q}createOrRecycleSendMedia(n,o,s,c,h){const g=this.rtpCapabilities.send,f=n===ti.VIDEO?g.videoCodecs:g.audioCodecs,A=n===ti.VIDEO?g.videoExtensions:g.audioExtensions;this.currentMidIndex+=1;const _="".concat(this.currentMidIndex);let E={media:{mediaType:n,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:f.map(I=>I.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:A,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:f,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:c,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(_)}};E=this.mungSendMediaDesc(E,h);const S=this.findFirstClosedMedia(n);if(S){const I=this.sessionDesc.mediaDescriptions.indexOf(S);this.sessionDesc.mediaDescriptions[I]=E}else this.sessionDesc.mediaDescriptions.push(E);return E}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(n=>"0"!==n.media.port).map(n=>n.attributes.mid)}mungRecvMediaDsec(n,o,s){const c=_c(n);return Jd(c),vL(c,o),l4(c,o),function(h){if("video"!==h.media.mediaType)return;const g=wi();if(g.name!==Ii.SAFARI&&g.os!==ds.IOS)return;const f=h.attributes.extmaps.findIndex(A=>/video-orientation/g.test(A.extensionName));-1!==f&&h.attributes.extmaps.splice(f,1)}(c),p2(c,s,this.localCapabilities.send),c}mungSendMediaDesc(n,o){const s=_c(n);return p2(s,o,this.localCapabilities.recv),s}updateRecvMedia(n,o){const s=this.sessionDesc.mediaDescriptions.findIndex(c=>c.attributes.mid===n);if(-1!==s){const c=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=c}}bumpMid(n){this.currentMidIndex+=n}findFirstClosedMedia(n){return this.sessionDesc.mediaDescriptions.find(o=>hs()?"0"===o.media.port&&o.media.mediaType===n:"0"===o.media.port)}findPreloadMediaDesc(n){return this.sessionDesc.mediaDescriptions.find(o=>{var s,c;return(null===(s=o.attributes)||void 0===s||null===(c=s.ssrcs[0])||void 0===c?void 0:c.ssrcId)===n[0].ssrcId})}getSSRC(n){var o;return null===(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===n))||void 0===o?void 0:o.attributes.ssrcs}})||D6;var CL,Oi;function m2(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function IL(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?m2(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):m2(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let wL=Qs("P2PConnection","store.p2pId")((rr((Oi=class n7 extends BV{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(o,s){super(o,s),J(this,"store",void 0),J(this,"peerConnection",void 0),J(this,"remoteSDP",void 0),J(this,"initialOffer",void 0),J(this,"transportEventReceiver",void 0),J(this,"statsFilter",void 0),J(this,"useRTX",Qt("USE_RTX")),J(this,"localCapabilities",void 0),J(this,"localCandidateCount",0),J(this,"allCandidatesReceived",!1),J(this,"mutex",new Ru("P2PConnection-mutex")),this.store=s,this.peerConnection=new RTCPeerConnection(n7.resolvePCConfiguration(o),{optional:[{googDscp:!0}]}),this.statsFilter=Wy(this.peerConnection,void 0,void 0,hs()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}establish(){var o=this;return F(function*(){try{o.peerConnection.addTransceiver("video",{direction:"recvonly"}),o.peerConnection.addTransceiver("audio",{direction:"recvonly"});const s=yield o.peerConnection.createOffer();if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const c=x1(s.sdp),h=yield(g=F(function*(f,A,_,E){const S=new RTCPeerConnection;S.addTransceiver("video",{direction:"sendonly"}),S.addTransceiver("audio",{direction:"sendonly"}),S.addTransceiver("video",{direction:"recvonly"}),S.addTransceiver("audio",{direction:"recvonly"});const I=(yield S.createOffer()).sdp,R=u4(I,f,A,_,E,"sendonly"),M=u4(I,f,A,_,E,"recvonly"),Q={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},H={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},Z={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(lS(R,M,"videoExtensions",Q,H,Z),lS(R,M,"videoCodecs",Q,H,Z),lS(R,M,"audioExtensions",Q,H,Z),lS(R,M,"audioCodecs",Q,H,Z),Qt("RAISE_H264_BASELINE_PRIORITY")){const le=Z.videoCodecs.findIndex(ge=>{var Se,Ne;return"h264"===(null===(Se=ge.rtpMap)||void 0===Se?void 0:Se.encodingName.toLocaleLowerCase())&&"42001f"===(null===(Ne=ge.fmtp)||void 0===Ne?void 0:Ne.parameters["profile-level-id"])});if(-1!==le){const ge=Z.videoCodecs.findIndex(Se=>{var Ne;return"h264"===(null===(Ne=Se.rtpMap)||void 0===Ne?void 0:Ne.encodingName.toLocaleLowerCase())});if(ge<le){se.debug("raising H264 baseline profile priority");const Se=Z.videoCodecs[le];Z.videoCodecs.splice(le,1),Z.videoCodecs.splice(ge,0,Se)}-1!==ge&&(H.videoCodecs=H.videoCodecs.filter(Se=>{var Ne,nt;return!("h264"===(null===(Ne=Se.rtpMap)||void 0===Ne?void 0:Ne.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(nt=Se.fmtp)||void 0===nt?void 0:nt.parameters["profile-level-id"]))})),-1!==ge&&Qt("FILTER_SEND_H264_BASELINE")&&(Q.videoCodecs=Q.videoCodecs.filter(Se=>{var Ne,nt;return!("h264"===(null===(Ne=Se.rtpMap)||void 0===Ne?void 0:Ne.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(nt=Se.fmtp)||void 0===nt?void 0:nt.parameters["profile-level-id"]))}))}}try{S.close()}catch{}return{send:Q,recv:H,sendrecv:Z}}),function(f,A,_,E){return g.apply(this,arguments)})(!o.useRTX,!1);return o.localCapabilities=I6(h),o.initialOffer=s,IL(IL({},c),{},{rtpCapabilities:h,offerSDP:s.sdp})}catch(s){throw new ye(pe.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}var g})()}connect(o,s,c,h,g,f){var A=this;return F(function*(){try{if(!A.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");A.remoteSDP=new rW({remoteIceParameters:o,remoteDtlsParameters:s,candidates:c,remoteRTPCapabilities:h,remoteSetup:g,localCapabilities:A.localCapabilities,cname:f});const _=A.remoteSDP.toString(),E=A.logSDPExchange(A.initialOffer.sdp||"","offer","local","connect");yield A.peerConnection.setLocalDescription(A.initialOffer),E?.(_),yield A.peerConnection.setRemoteDescription({type:"answer",sdp:_});const S=A.peerConnection.getTransceivers()[0];if(null!=S&&S.receiver&&A.tryBindTransportEvents(S.receiver),Qt("PRELOAD_MEDIA_COUNT")>0){A.remoteSDP.preloadRemoteMedia();const I=A.remoteSDP.toString();yield A.peerConnection.setRemoteDescription({type:"offer",sdp:I});const R=yield A.peerConnection.createAnswer();yield A.peerConnection.setLocalDescription(R)}}catch(_){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(_.toString()))}})()}send(o,s,c){var h=this;return c2(function*(){const g=yield As(h.mutex.lock());try{if(!h.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const f=[];o.forEach(H=>{const Z=h.peerConnection.addTransceiver(H._mediaStreamTrack,{direction:"sendonly"});f.push(Z)}),hs()&&!0===Qt("SIMULCAST")&&(En("debug",h,"apply simulcast for firefox"),yield As(h.applySimulcastForFirefox(f,o)));const A=yield As(h.peerConnection.createOffer()),_=h.remoteSDP.predictReceivingMids(o.length),E=h.mungSendOfferSDP(A.sdp,o,_),S=qd.exports.parse(E),I=_.map(H=>{const Z=S.mediaDescriptions.find(le=>le.attributes.mid===H);if(!Z)throw new Error("Cannot extract ssrc from mediaDescription.");return function(le,ge){const Se=[],Ne=le.attributes.ssrcGroups.filter(Vt=>"FID"===Vt.semantic),nt=le.attributes.ssrcGroups.find(Vt=>"SIM"===Vt.semantic),Nt=le.attributes.ssrcs;if(nt)nt.ssrcIds.forEach(Vt=>{var Dt;const In=null===(Dt=Ne.find(dn=>dn.ssrcIds[0]===Vt))||void 0===Dt?void 0:Dt.ssrcIds[1];Se.push({ssrcId:Vt,rtx:ge?In:void 0})});else if(Ne.length>0){const Dt=Ne[0].ssrcIds[1];Se.push({ssrcId:Ne[0].ssrcIds[0],rtx:ge?Dt:void 0})}else{if(0===Nt.length)throw new Error("No ssrcs found on local media description.");Se.push({ssrcId:Nt[0].ssrcId})}return Se}(Z,h.useRTX)});let R;try{R=yield I}catch(H){R=[],h.remoteSDP.receive(o,s,c,R);const Z=h.remoteSDP.toString();throw yield As(h.peerConnection.setLocalDescription({type:"offer",sdp:E})),yield As(h.peerConnection.setRemoteDescription({type:"answer",sdp:Z})),yield As(h.stopSending(_,!0)),H}h.remoteSDP.receive(o,s,c,R);const M=h.remoteSDP.toString(),Q=h.logSDPExchange(E,"offer","local","send");return yield As(h.peerConnection.setLocalDescription({type:"offer",sdp:E})),yield As(h.applySimulcastEncodings(f,o)),yield As(h.applySendEncodings(f,o)),Q?.(M),yield As(h.peerConnection.setRemoteDescription({type:"answer",sdp:M})),f.map((H,Z)=>({localSSRC:I[Z],id:_[Z],transceiver:H}))}catch(f){throw f instanceof ye?f:new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(f.toString()))}finally{g()}})()}stopSending(o,s){var c=this;return F(function*(){const h=s?void 0:yield c.mutex.lock("From P2PConnection.stopSending");try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const g=c.peerConnection.getTransceivers().filter(E=>-1!==o.indexOf(E.mid));if(g.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");g.map(E=>{var S;E.direction="inactive",null===(S=E.stop)||void 0===S||S.call(E)});const f=yield c.peerConnection.createOffer(),A=c.logSDPExchange(f.sdp||"","offer","local","stopSending");yield c.peerConnection.setLocalDescription(f),c.remoteSDP.stopReceiving(o);const _=c.remoteSDP.toString();A?.(_),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:_})}catch(g){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(g.toString()))}finally{h&&h()}})()}receive(o,s,c,h){var g=this;return F(function*(){try{if(!g.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(o," before remoteSDP created."));const{mid:f,needExchangeSDP:A}=g.remoteSDP.send(o,s,c,h);if(A){const E=g.remoteSDP.toString(),S=g.logSDPExchange(E,"offer","remote","receive");yield g.peerConnection.setRemoteDescription({type:"offer",sdp:E});const I=yield g.peerConnection.createAnswer();S?.(I.sdp||""),yield g.peerConnection.setLocalDescription(I),se.debug("[P2PConnection] receive ".concat(o," by exchanging SDP."))}else se.debug("[P2PConnection] receive ".concat(o," no need to exchange SDP."));const _=g.peerConnection.getTransceivers().find(E=>E.mid===f);if(!_)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:_.receiver.track,id:f}}catch(f){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(f.toString()))}})()}batchReceive(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:c,needExchangeSDP:h}=s.remoteSDP.batchSend(o);if(h){const g=s.remoteSDP.toString(),f=s.logSDPExchange(g,"offer","remote","receive");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:g});const A=yield s.peerConnection.createAnswer();f?.(A.sdp||""),yield s.peerConnection.setLocalDescription(A),se.debug("[P2PConnection] batchReceive by exchanging SDP.")}else se.debug("[P2PConnection] batchReceive no need to exchange SDP.");return c.map(g=>{const f=s.peerConnection.getTransceivers().find(A=>A.mid===g);if(!f)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:f.receiver.track,id:g}})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(c.toString()))}})()}stopReceiving(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");s.remoteSDP.stopSending(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","stopReceiving");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(c.toString()))}})()}muteRemote(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(o," before remote SDP created."));s.remoteSDP.mute(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","muteRemote");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(c.toString()))}})()}unmuteRemote(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(o," before remote SDP created."));s.remoteSDP.unmute(o);const c=s.remoteSDP.toString(),h=s.logSDPExchange(c,"offer","remote","unmuteRemote");yield s.peerConnection.setRemoteDescription({type:"offer",sdp:c});const g=yield s.peerConnection.createAnswer();h?.(g.sdp||""),yield s.peerConnection.setLocalDescription(g)}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(c.toString()))}})()}muteLocal(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const c=s.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(A=>{A.direction="inactive"});const h=yield s.peerConnection.createOffer(),g=s.logSDPExchange(h.sdp||"","offer","local","muteLocal");yield s.peerConnection.setLocalDescription(h),s.remoteSDP.muteRemote(o);const f=s.remoteSDP.toString();g?.(f),yield s.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(c.toString()))}})()}unmuteLocal(o){var s=this;return F(function*(){try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const c=s.peerConnection.getTransceivers().filter(A=>A.mid&&-1!==o.indexOf(A.mid));if(c.length!==o.length)throw new Error("Transceivers' length doesn't match mids' length.");c.map(function(){var A=F(function*(_,E){_.direction="sendonly"});return function(_,E){return A.apply(this,arguments)}}());const h=yield s.peerConnection.createOffer(),g=s.logSDPExchange(h.sdp||"","offer","local","unmuteLocal");yield s.peerConnection.setLocalDescription(h),s.remoteSDP.unmuteRemote(o);const f=s.remoteSDP.toString();g?.(f),yield s.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(c){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(c.toString()))}})()}reEstablish(){var o=this;return F(function*(){const s=yield o.peerConnection.createOffer({iceRestart:!0});if(!s.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:x1(s.sdp).iceParameters,restartICE:(c=F(function*(h,g){return o.restartICE(s,h,g)}),function(g,f){return c.apply(this,arguments)}),restartOfferSDP:s.sdp};var c})()}close(){var o;this.peerConnection.close(),null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(o){return this.statsFilter.getVideoIsReady(o)}updateEncoderConfig(o,s){var c=this;return F(function*(){try{if(!c.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const h=yield c.peerConnection.createOffer(),g=c.mungSendOfferSDP(h.sdp,[s],[o]);c.remoteSDP.updateRecvMedia(o,s);const f=c.remoteSDP.toString(),A=c.logSDPExchange(g,"offer","local","updateEncoderConfig");yield c.peerConnection.setLocalDescription({type:"offer",sdp:g}),A?.(f),yield c.peerConnection.setRemoteDescription({type:"answer",sdp:f})}catch(h){throw new ye(pe.EXCHANGE_SDP_FAILED,h.toString())}})()}updateSendParameters(o,s){var c=this;return F(function*(){const h=c.peerConnection.getTransceivers().filter(g=>g.mid===o);1===h.length&&(c.isVP8Simulcast(s)?hs()||(yield c.applySimulcastEncodings(h,[s])):yield c.applySendEncodings(h,[s]))})()}setStatsRemoteVideoIsReady(o,s){this.statsFilter.setVideoIsReady2(o,s)}replaceTrack(o,s){var c=this;return F(function*(){const h=c.peerConnection.getTransceivers().find(g=>g.mid===s);h&&(yield h.sender.replaceTrack(o._mediaStreamTrack))})()}restartICE(o,s,c){var h=this;return F(function*(){try{if(!h.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");h.remoteSDP.restartICE(s,c);const g=h.remoteSDP.toString(),f=h.logSDPExchange(o.sdp||"","offer","local","restartICE");yield h.peerConnection.setLocalDescription(o),f?.(g),yield h.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new ye(pe.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(g.toString()))}})()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var o;null===(o=this.onICEConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var o;null===(o=this.onConnectionStateChange)||void 0===o||o.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=o=>{o.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,se.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Qt("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(o){const s={iceServers:[]};return o.iceServers?s.iceServers=o.iceServers:o.turnServer&&"off"!==o.turnServer.mode&&(QF(o.turnServer.servers)?s.iceServers=o.turnServer.servers:(s.iceServers&&s.iceServers.push(...n7.turnServerConfigToIceServers(o.turnServer.servers)),Qt("USE_TURN_SERVER_OF_GATEWAY")&&s.iceServers&&o.turnServer.serversFromGateway&&s.iceServers.push(...n7.turnServerConfigToIceServers(o.turnServer.serversFromGateway)),o.turnServer.servers.concat(o.turnServer.serversFromGateway||[]).forEach(c=>{c.forceturn&&(s.iceTransportPolicy="relay")}))),s}static turnServerConfigToIceServers(o){const s=[];return o.forEach(c=>{c.security?c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(wx(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}):(c.udpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.udpport,"?transport=udp")}),c.tcpport&&s.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(c.turnServerURL,":").concat(c.tcpport,"?transport=tcp")}))}),s}tryBindTransportEvents(o){o.transport&&(this.transportEventReceiver=o,o.transport.onstatechange=()=>{var s,c;null!==(s=o.transport)&&void 0!==s&&s.state&&(null===(c=this.onDTLSTransportStateChange)||void 0===c||c.call(this,o.transport.state))},o.transport.onerror=s=>{var c;null===(c=this.onDTLSTransportError)||void 0===c||c.call(this,s.error)},o.transport.iceTransport&&(o.transport.iceTransport.onstatechange=()=>{var s,c,h;null!==(s=o.transport)&&void 0!==s&&s.iceTransport.state&&(null===(c=this.onICETransportStateChange)||void 0===c||c.call(this,null===(h=o.transport)||void 0===h?void 0:h.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}applySendEncodings(o,s){var c=this;return F(function*(){try{if(!Zc().supportSetRtpSenderParameters||o.length!==s.length)return;for(let S=0;S<o.length;S++){const I=o[S],R=s[S];if(R&&R instanceof ea){var h,g;if(c.isVP8Simulcast(R))continue;const M={},Q={};switch(R._optimizationMode){case"motion":M.degradationPreference="maintain-framerate";break;case"detail":M.degradationPreference="maintain-resolution";break;default:M.degradationPreference="balanced"}var f,A,_,E;if(null!==(h=R._encoderConfig)&&void 0!==h&&h.bitrateMax&&(Q.maxBitrate=1e3*(null===(f=R._encoderConfig)||void 0===f?void 0:f.bitrateMax)),R._hints.includes(Xc.LOW_STREAM)&&(null!==(A=R._encoderConfig)&&void 0!==A&&A.frameRate&&(Q.maxFramerate=xy(R._encoderConfig.frameRate)),null!==(_=R._encoderConfig)&&void 0!==_&&_.scaleResolutionDownBy&&(null===(E=R._encoderConfig)||void 0===E?void 0:E.scaleResolutionDownBy)>1&&(Q.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),Qt("DSCP_TYPE")&&P0()){const le=Qt("DSCP_TYPE");["very-low","low","medium","high"].includes(le)&&(Q.networkPriority=le)}const H=I.sender.getParameters(),Z=null===(g=H.encodings)||void 0===g?void 0:g[0];hs()&&!Z&&(M.encodings=[Q]),Z&&Object.assign(Z,Q),Object.assign(H,M),yield I.sender.setParameters(H)}}}catch{se.debug("Apply RTPSendEncodings failed.")}})()}mungSendOfferSDP(o,s,c){const h=qd.exports.parse(o);return s.forEach((g,f)=>{const A=c[f],_=h.mediaDescriptions.find(E=>E.attributes.mid===A);_&&(vL(_,g),function(E,S,I){if(hs()||"video"!==E.media.mediaType||!(S instanceof ea)||"vp9"!==I&&"vp8"!==I||"vp8"===I&&!Qt("SIMULCAST")||void 0===S._scalabiltyMode||S._scalabiltyMode.numSpatialLayers<=1)return;const R="vp8"===I?2:S._scalabiltyMode.numSpatialLayers,M=E.attributes.ssrcs[0],Q=E.attributes.ssrcGroups.find(Z=>"FID"===Z.semantic&&Z.ssrcIds[0]===M.ssrcId),H={semantic:"SIM",ssrcIds:[M.ssrcId]};for(let Z=1;Z<R;Z++)E.attributes.ssrcs.push({ssrcId:M.ssrcId+Z,attributes:_c(M.attributes)}),H.ssrcIds.push(M.ssrcId+Z),Q&&(E.attributes.ssrcs.push({ssrcId:Q.ssrcIds[1]+Z,attributes:_c(M.attributes)}),E.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[M.ssrcId+Z,Q.ssrcIds[1]+Z]}));E.attributes.ssrcGroups.unshift(H)}(_,g,this.store.codec))}),qd.exports.print(h)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=o=>{var s;null===(s=this.onFirstAudioReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoReceived=o=>{var s;null===(s=this.onFirstVideoReceived)||void 0===s||s.call(this,o)},this.statsFilter.onFirstAudioDecoded=o=>{var s;null===(s=this.onFirstAudioDecoded)||void 0===s||s.call(this,o)},this.statsFilter.onFirstVideoDecoded=(o,s,c)=>{var h;null===(h=this.onFirstVideoDecoded)||void 0===h||h.call(this,o,s,c)},this.statsFilter.onSelectedLocalCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedLocalCandidateChanged)||void 0===c||c.call(this,o,s)},this.statsFilter.onSelectedRemoteCandidateChanged=(o,s)=>{var c;null===(c=this.onSelectedRemoteCandidateChanged)||void 0===c||c.call(this,o,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}applySimulcastForFirefox(o,s){var c=this;return F(function*(){if(o.length===s.length)for(let _=0;_<o.length;_++){var h,g,f,A;const E=o[_],S=s[_];if(S instanceof ea&&!S._hints.includes(Xc.LOW_STREAM)&&null!==(h=S._encoderConfig)&&void 0!==h&&h.bitrateMax&&(null===(g=S._encoderConfig)||void 0===g?void 0:g.bitrateMax)>200&&null!==(f=S._scalabiltyMode)&&void 0!==f&&f.numSpatialLayers&&(null===(A=S._scalabiltyMode)||void 0===A?void 0:A.numSpatialLayers)>1&&"vp8"===c.store.codec){const I={},R={high:1e3*(S._encoderConfig.bitrateMax-50),medium:5e4};I.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const M=E.sender.getParameters();yield E.sender.setParameters(Object.assign(M,I))}}})()}applySimulcastEncodings(o,s){var c=this;return F(function*(){if(!hs()&&o.length===s.length)for(let h=0;h<o.length;h++){const g=s[h];if(g instanceof ea&&c.isVP8Simulcast(g)){const f=o[h],A={},_={high:1e3*(g._encoderConfig.bitrateMax-50),medium:5e4};A.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:_.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:_.medium,scaleResolutionDownBy:4}];const E=f.sender.getParameters();yield f.sender.setParameters(Object.assign(E,A))}}})()}isVP8Simulcast(o){var s,c,h,g;return!!(o instanceof ea&&Qt("SIMULCAST")&&"vp8"===this.store.codec&&!o._hints.includes(Xc.LOW_STREAM)&&null!==(s=o._encoderConfig)&&void 0!==s&&s.bitrateMax&&(null===(c=o._encoderConfig)||void 0===c?void 0:c.bitrateMax)>200&&null!==(h=o._scalabiltyMode)&&void 0!==h&&h.numSpatialLayers&&(null===(g=o._scalabiltyMode)||void 0===g?void 0:g.numSpatialLayers)>1)}logSDPExchange(o,s,c,h){if(Qt("SDP_LOGGING"))return se.upload("exchanging ".concat(c," ").concat(s," SDP during P2PConnection.").concat(h,"\n"),o),"offer"===s?g=>{this.logSDPExchange(g,"answer","local"===c?"remote":"local",h)}:void 0}getRemoteSSRC(o){if(this.remoteSDP)return this.remoteSDP.getSSRC(o)?.[0].ssrcId}}).prototype,"connect",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"connect"),Oi.prototype),rr(Oi.prototype,"receive",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"receive"),Oi.prototype),rr(Oi.prototype,"batchReceive",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"batchReceive"),Oi.prototype),rr(Oi.prototype,"stopReceiving",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"stopReceiving"),Oi.prototype),rr(Oi.prototype,"muteRemote",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"muteRemote"),Oi.prototype),rr(Oi.prototype,"unmuteRemote",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"unmuteRemote"),Oi.prototype),rr(Oi.prototype,"muteLocal",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"muteLocal"),Oi.prototype),rr(Oi.prototype,"unmuteLocal",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"unmuteLocal"),Oi.prototype),rr(Oi.prototype,"reEstablish",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"reEstablish"),Oi.prototype),rr(Oi.prototype,"close",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"close"),Oi.prototype),rr(Oi.prototype,"updateEncoderConfig",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"updateEncoderConfig"),Oi.prototype),rr(Oi.prototype,"updateSendParameters",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"updateSendParameters"),Oi.prototype),rr(Oi.prototype,"replaceTrack",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"replaceTrack"),Oi.prototype),rr(Oi.prototype,"restartICE",[Xd],Object.getOwnPropertyDescriptor(Oi.prototype,"restartICE"),Oi.prototype),CL=Oi))||CL;function Xd(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=F(function*(){const h=this.mutex,g=yield h.lock("From P2PConnection.".concat(o));try{for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),s}function g4(n,o){let s=document.createElement("video"),c=document.createElement("canvas");s.setAttribute("style","display:none"),c.setAttribute("style","display:none"),s.setAttribute("muted",""),s.muted=!0,s.setAttribute("autoplay",""),s.autoplay=!0,s.setAttribute("playsinline",""),c.width=xy(o.width),c.height=xy(o.height);const h=xy(o.framerate||15);document.body.append(s),document.body.append(c);let g=n._mediaStreamTrack;s.srcObject=new MediaStream([g]),s.play();const f=c.getContext("2d");if(!f)throw new ye(pe.UNEXPECTED_ERROR,"can not get canvas context");const A=Zc(),_=c.captureStream(A.supportRequestFrame?0:h).getVideoTracks()[0],E=q5(()=>(()=>{if(s.paused&&s.play(),s.videoHeight>2&&s.videoWidth>2){const M=c.width*(s.videoHeight/s.videoWidth);Math.abs(M-c.height)>=2&&(se.debug("adjust low stream resolution","".concat(c.width,"x").concat(c.height," -> ").concat(c.width,"x").concat(M)),c.height=M)}f.drawImage(s,0,0,c.width,c.height),_.requestFrame&&_.requestFrame(),g!==n._mediaStreamTrack&&(g=n._mediaStreamTrack,s.srcObject=new MediaStream([g]))})(),h),S=_.stop;return _.stop=()=>{S.call(_),E(),s&&(s.remove(),s=null),c&&(c.width=0,c.remove(),c=null),se.debug("clean low stream renderer")},_}var P6,iW;function TL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function _4(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?TL(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):TL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class N6 extends iQ{getUserId(){return this._userId}constructor(o,s,c,h){super(o,"track-".concat(o.kind,"-").concat(s,"-").concat(h.clientId,"_").concat(vs(5,""))),J(this,"_userId",void 0),J(this,"_uintId",void 0),J(this,"_isDestroyed",!1),J(this,"store",void 0),this._userId=s,this._uintId=c,this.store=h}_updateOriginMediaStreamTrack(o){this._originMediaStreamTrack=o,this._mediaStreamTrack=o,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,se.info("[".concat(this.getTrackId(),"] is destroyed")),zt("info",this,"_destroy"),this.stop(),super.close()}}let RL=Qs("RemoteVideoTrack","getTrackId")(P6=class extends N6{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ra.PLAYING)}constructor(n,o,s,c){super(n,o,s,c),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"trackMediaType","video"),J(this,"_videoWidth",void 0),J(this,"_videoHeight",void 0),J(this,"_player",void 0),zt("info",this,"constructor",{userId:o}),this.updateMediaStreamTrackResolution()}getStats(){return Ok(()=>{se.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead"),En("warning",this,"[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ly(this,mr.GET_STATS)||_4({},C7)}play(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof n?n:"HTMLElement",o]});if("string"==typeof n){const h=document.getElementById(n);h?n=h:(se.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),En("warning",this,'can not find "#'.concat(n,'" element, use document.body')),n=document.body)}se.debug("[".concat(this.getTrackId(),"] start video playback"),JSON.stringify(o)),zt("debug",this,"play",o);const c=_4(_4({fit:"cover"},o),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(c):(this._player=new C8(c),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(ev.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const h=this.getVideoElementVisibleStatus();this.emit(ev.VIDEO_ELEMENT_VISIBLE_STATUS,h)}catch{}},Qt("CHECK_VIDEO_VISIBLE_INTERVAL")),s.onSuccess()}stop(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return n.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,se.debug("[".concat(this.getTrackId(),"] stop video playback")),zt("debug",this,"stop"),n.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){PQ(this._originMediaStreamTrack).then(n=>{let[o,s]=n;this._videoHeight=s,this._videoWidth=o}).catch(Z3)}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),zt("debug",this,"_updatePlayerSource"),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,o;const s=null==this||null===(n=this._player)||void 0===n?void 0:n.getContainerElement(),c={track:this,element:null==this||null===(o=this._player)||void 0===o?void 0:o.getVideoElement(),slot:s?.parentElement},{element:h,slot:g}=c;if(this.isPlaying&&h instanceof HTMLVideoElement&&g instanceof HTMLElement){const f=lG.checkOneElementVisible(h),A=Object.assign({},f);if(A.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=A.visible;Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess(A.visible?"Video is visible":"Invisible because of ".concat(A.reason))}return A}return}catch(s){throw new ye(pe.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}})||P6,g2=Qs("RemoteAudioTrack","getTrackId")(iW=class extends N6{get isPlaying(){return this._useAudioElement?Hd.isPlaying(this.getTrackId()):this._source.isPlayed}constructor(n,o,s,c){super(n,o,s,c),J(this,"trackMediaType","audio"),J(this,"_source",void 0),J(this,"_useAudioElement",!0),J(this,"_volume",100),zt("info",this,"constructor",{userId:o}),Qt("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),this._source=new aQ(n,!0),this._source.once($c.RECEIVE_TRACK_BUFFER,()=>{this.emit(ev.FIRST_FRAME_DECODED)})}setAudioFrameCallback(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!n)return this._source.removeAllListeners($c.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(o),this._source.removeAllListeners($c.ON_AUDIO_BUFFER),this._source.on($c.ON_AUDIO_BUFFER,s=>n(s))}setVolume(n){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),n]},300);this._volume=n,this._useAudioElement?Hd.setVolume(this.getTrackId(),n):this._source.setVolume(n/100),o.onSuccess()}setPlaybackDevice(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[o.getTrackId(),n]});if(!o._useAudioElement)throw new ye(pe.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{yield Hd.setSinkID(o.getTrackId(),n)}catch(c){throw s.onError(c),c}s.onSuccess()})()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Ok(()=>{se.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead"),En("warning",this,"[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ly(this,mr.GET_STATS)||_4({},S7)}play(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] start audio playback")),zt("debug",this,"play"),this._useAudioElement?(se.debug("[".concat(this.getTrackId(),"] use audio element to play")),En("debug",this,"use audio element to play"),Hd.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),n.onSuccess()}stop(){const n=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});se.debug("[".concat(this.getTrackId(),"] stop audio playback")),zt("debug",this,"stop"),this._useAudioElement?Hd.stop(this.getTrackId()):this._source.stop(),n.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){se.debug("[".concat(this.getTrackId(),"] update player source track")),zt("debug",this,"_updatePlayerSource"),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Hd.updateTrack(this.getTrackId(),this._mediaStreamTrack)}})||iW;function OL(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function v4(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?OL(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):OL(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}class xz extends st{constructor(){super(),J(this,"uplinkStatsUploadInterval",void 0),J(this,"uplinkStatsUploadSlowInterval",void 0),J(this,"uplinkRelatedStatsUploadInterval",void 0),J(this,"uplinkDenoiserStatsUploadInterval",void 0),J(this,"transportStatsUploadInterval",void 0),J(this,"extensionStatsUploadInterval",void 0),J(this,"downlinkStatsUploadInterval",void 0),J(this,"downlinkStatsUploadSlowInterval",void 0),J(this,"downlinkRelatedStatsUploadInterval",void 0),J(this,"lastStats",void 0),J(this,"uploadUnplinkStarted",!1),J(this,"uploadDownlinkStarted",!1),J(this,"uploadTransportStarted",!1),J(this,"requestStats",void 0),J(this,"requestLocalMedia",void 0),J(this,"requestRemoteMedia",void 0),J(this,"requestAllTracks",void 0),J(this,"requestVideoIsReady",void 0),J(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadTransportStats(s)},6e3))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadUplinkStats(s,this.lastStats),this.lastStats=s)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadSlowUplinkStats(s)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadRelatedUplinkStats(s,this.lastStats),this.lastStats=s},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);s&&this.uploadDenoiserStats(s)},2e3),this.extensionStatsUploadInterval&&window.clearInterval(this.extensionStatsUploadInterval),this.extensionStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestAllTracks)||void 0===o?void 0:o.call(this);s&&this.uploadExtensionStats(s)},2e3))}uploadTransportStats(o){Tp(()=>{var s;null===(s=this.requestUpload)||void 0===s||s.call(this,Iu.TRANSPORT_STATS,function(c){const h={connectionType:100};if("relay"===c.selectedCandidatePair.localCandidate.candidateType){const g=c.selectedCandidatePair.localCandidate.relayProtocol;"udp"===g&&(h.connectionType=101),"tcp"===g&&(h.connectionType=103),"tls"===g&&(h.connectionType=104)}return h}(o))})}uploadUplinkStats(o,s){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,{track:f,ssrcs:A}]=h;switch(g){case xn.LocalVideoLowTrack:case xn.LocalVideoTrack:{const E=function(I,R,M){var Q;const H=R.videoSend.find(le=>le.ssrc===I);if(!H)return null;const Z={id:vs(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:H.ssrc.toString()};switch(Z.A_vstd=M._originMediaStreamTrack&&!M._originMediaStreamTrack.enabled||!M._mediaStreamTrack.enabled?"1":"0",H.sentFrame&&(Z.A_fhs=H.sentFrame.height.toString(),Z.A_frs=H.sentFrame.frameRate.toString(),Z.A_fws=H.sentFrame.width.toString()),H.adaptionChangeReason){case"none":Z.A_ac="0";break;case"cpu":Z.A_ac="1";break;case"bandwidth":Z.A_ac="2";break;case"other":Z.A_ac="3"}return Z.A_lvps=kM[M._player?M._player.videoElementStatus:"uninit"].toString(),Z.A_nr=null===(Q=H.nacksCount)||void 0===Q?void 0:Q.toString(),H.avgEncodeMs&&(Z.A_aem=H.avgEncodeMs.toFixed(0).toString()),Z}(A[0].ssrcId,o,f),S=uj(A[0].ssrcId,o,s);E&&Tp(()=>{var I;return null===(I=this.requestUpload)||void 0===I?void 0:I.call(this,Iu.PUBLISH_STATS,{stream_type:g===xn.LocalVideoLowTrack?"low":"high",stats:v4(v4({},E),S)})});break}case xn.LocalAudioTrack:{const E=function(S,I,R){const M=I.audioSend.find(H=>H.ssrc===S);if(!M)return null;const Q={id:vs(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:M.ssrc.toString()};return Q.A_astd=R._originMediaStreamTrack.enabled&&R._mediaStreamTrack.enabled?"0":"1",Q.A_ail=M.inputLevel?Math.round(100*M.inputLevel).toString():Math.round(100*R._source.getAccurateVolumeLevel()).toString(),Q.A_apil=Math.round(100*R._source.getAccurateVolumeLevel()).toString(),M.aecReturnLoss&&(Q.A_ecrl=Math.round(M.aecReturnLoss).toString()),M.aecReturnLossEnhancement&&(Q.A_ecrle=Math.round(M.aecReturnLossEnhancement).toString()),Q}(A[0].ssrcId,o,f);E&&Tp(()=>{var S;return null===(S=this.requestUpload)||void 0===S?void 0:S.call(this,Iu.PUBLISH_STATS,{stream_type:"high",stats:E})});break}}const _=function(E){const S={id:"bweforvideo",timestamp:new Date(E.timestamp).toISOString(),type:"VideoBwe"};return E.bitrate.retransmit&&(S.A_rb=E.bitrate.retransmit.toString()),E.bitrate.targetEncoded&&(S.A_teb=E.bitrate.targetEncoded.toString()),S.A_aeb=E.bitrate.actualEncoded.toString(),S.A_tb=E.bitrate.transmit.toString(),void 0!==E.sendBandwidth&&(S.A_asb=E.sendBandwidth.toString()),S}(o);_&&Tp(()=>{var E;return null===(E=this.requestUpload)||void 0===E?void 0:E.call(this,Iu.PUBLISH_STATS,{stream_type:g===xn.LocalVideoLowTrack?"low":"high",stats:_})})})}uploadSlowUplinkStats(o){var s;((null===(s=this.requestLocalMedia)||void 0===s?void 0:s.call(this))||[]).filter(c=>{let[h]=c;return h===xn.LocalVideoLowTrack||h===xn.LocalVideoTrack}).forEach(c=>{let[h,{ssrcs:g}]=c;const f=uj(g[0].ssrcId,o);f&&Tp(()=>{var A;return null===(A=this.requestUpload)||void 0===A?void 0:A.call(this,Iu.PUBLISH_STATS,{stream_type:h===xn.LocalVideoLowTrack?"low":"high",stats:f})})})}uploadRelatedUplinkStats(o,s){var c;((null===(c=this.requestLocalMedia)||void 0===c?void 0:c.call(this))||[]).filter(h=>{let[g]=h;return g===xn.LocalVideoLowTrack||g===xn.LocalVideoTrack}).forEach(h=>{let[g,{ssrcs:f}]=h;const A=function(_,E){const S=E.videoSend.find(I=>I.ssrc===_);return S?{mediaType:"video",isVideoMute:!1,frameRateInput:S.inputFrame&&S.inputFrame.frameRate.toString(),frameRateSent:S.sentFrame&&S.sentFrame.frameRate.toString(),googRtt:S.rttMs.toString(),qpSumPerFrame:Math.floor(S.qpSumPerFrame).toString()}:null}(f[0].ssrcId,o);A&&Tp(()=>{var _;null===(_=this.requestUpload)||void 0===_||_.call(this,Iu.PUBLISH_RELATED_STATS,{stream_type:g===xn.LocalVideoLowTrack?"low":"high",stats:A})})})}uploadDenoiserStats(o){for(let g=0;g<o.length;g++){const f=o[g];if(f instanceof X0){var s,c,h;const A=null===(s=(c=f._external).getDenoiserStats)||void 0===s?void 0:s.call(c);return void(A&&(null===(h=this.requestUpload)||void 0===h||h.call(this,Iu.DENOISER_STATS,A)))}}}uploadExtensionStats(o){for(let s=0;s<o.length;s++){const c=o[s];if(c instanceof X0)return void c.getProcessorStats().forEach(h=>{var g;h.type===Iu.DENOISER_STATS&&(null===(g=this.requestUpload)||void 0===g||g.call(this,Iu.DENOISER_STATS,h.stats))})}}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadDownlinkStats(s,this.lastStats),this.lastStats=s)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&this.uploadSlowDownlinkStats(s)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var o;const s=null===(o=this.requestStats)||void 0===o?void 0:o.call(this);s&&(this.uploadRelatedDownlinkStats(s,this.lastStats),this.lastStats=s)},1e3))}uploadDownlinkStats(o,s){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,f]=h;if(f.has(ti.VIDEO)&&g.videoTrack){const A=g.videoTrack?function(_,E,S){const I=E.videoRecv.find(H=>H.ssrc===_);if(!I)return null;const R={id:vs(10,""),timestamp:new Date(E.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:I.ssrc.toString()};var M,Q;return R.bytesReceived=I.bytes.toString(),R.packetsLost=I.packetsLost.toString(),R.packetsReceived=I.packets.toString(),I.framesRateFirefox&&(R.A_frr=I.framesRateFirefox.toString()),I.receivedFrame?(R.A_frr=I.receivedFrame.frameRate.toString(),R.A_fhr=I.receivedFrame.height.toString(),R.A_fwr=I.receivedFrame.width.toString()):(R.A_fhr=null===(M=S._videoHeight)||void 0===M?void 0:M.toString(),R.A_fwr=null===(Q=S._videoWidth)||void 0===Q?void 0:Q.toString()),R.A_frd=I.decodeFrameRate.toString(),I.outputFrame&&(R.A_fro=I.outputFrame.frameRate.toString()),void 0!==I.jitterBufferMs&&(R.A_jbm=Math.floor(I.jitterBufferMs).toString()),void 0!==I.currentDelayMs&&(R.A_cdm=Math.floor(I.currentDelayMs).toString()),R.A_fs=I.firsCount.toString(),R.A_ns=I.nacksCount.toString(),R.A_ps=I.plisCount.toString(),S&&(R.A_vrtd=S._originMediaStreamTrack.enabled&&S._mediaStreamTrack.enabled?"0":"1"),S._player&&S._player.freezeTimeCounterList.length>0&&(R.A_vrft=S._player.freezeTimeCounterList.splice(0,1)[0].toString()),R.A_rvps=kM[S._player?S._player.videoElementStatus:"uninit"].toString(),R}(g._videoSSRC,o,g.videoTrack):void 0;A&&Tp(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,Iu.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}if(f.has(ti.AUDIO)&&g.audioTrack){const A=g.audioTrack?function(_,E,S){const I=E.audioRecv.find(M=>M.ssrc===_);if(!I)return null;const R={id:vs(10,""),timestamp:new Date(E.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:I.ssrc.toString()};return R.bytesReceived=I.bytes.toString(),R.packetsLost=I.packetsLost.toString(),R.packetsReceived=I.packets.toString(),R.A_aol=I.outputLevel?Math.round(100*I.outputLevel).toString():Math.round(100*S._source.getAccurateVolumeLevel()).toString(),R.A_apol=Math.round(100*S._source.getAccurateVolumeLevel()).toString(),S&&(R.A_artd=S._originMediaStreamTrack.enabled&&S._mediaStreamTrack.enabled?"0":"1"),R.A_jr=I.jitterMs.toString(),R.A_jbm=Math.floor(I.jitterBufferMs).toString(),R.A_cdm=Math.floor(I.jitterBufferMs).toString(),R.A_raps=kM[Hd.getPlayerState(S.getTrackId())].toString(),R}(g._audioSSRC,o,g.audioTrack):void 0;A&&Tp(()=>{var _;return null===(_=this.requestUpload)||void 0===_?void 0:_.call(this,Iu.SUBSCRIBE_STATS,{stream_id:g.uid,stats:A})})}})}uploadSlowDownlinkStats(o){}uploadRelatedDownlinkStats(o,s){var c;((null===(c=this.requestRemoteMedia)||void 0===c?void 0:c.call(this))||[]).forEach(h=>{let[g,f]=h;if(f.has(ti.VIDEO)&&g.videoTrack){var A;const _=!0===(g._videoSSRC&&(null===(A=this.requestVideoIsReady)||void 0===A?void 0:A.call(this,g._videoSSRC))||!1),E=function(S,I,R,M,Q,H){const Z=R.videoRecv.find(Ne=>Ne.ssrc===S),le=Q?Q.videoRecv.find(Ne=>Ne.ssrc===S):void 0;if(!Z)return null;const ge=eS.isRemoteVideoFreeze(H,Z,le)&&I,Se={mediaType:"video",isVideoMute:!1,peerId:M,frameRateReceived:Z.receivedFrame&&Z.receivedFrame.frameRate.toString(),frameRateDecoded:Z.decodedFrame&&Z.decodedFrame.frameRate.toString(),isFreeze:ge,bytesReceived:Z.bytes.toString(),packetsReceived:Z.packets.toString(),packetsLost:Z.packetsLost.toString(),qpSumPerFrame:Math.floor(Z.qpSumPerFrame).toString()};return Z.framesRateFirefox&&(Se.frameRateDecoded=Z.framesRateFirefox.toString(),Se.frameRateReceived=Z.framesRateFirefox.toString()),Se}(g._videoSSRC,_,o,g.uid,s,g.videoTrack);E&&Tp(()=>{var S;null===(S=this.requestUpload)||void 0===S||S.call(this,Iu.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:E})})}if(f.has(ti.AUDIO)&&g.audioTrack){const _=function(E,S,I,R){const M=S.audioRecv.find(H=>H.ssrc===E);if(!M)return null;const Q=eS.isRemoteAudioFreeze(R);return{mediaType:"audio",isAudioMute:!1,peerId:I,googJitterReceived:M.jitterMs.toString(),isFreeze:Q,bytesReceived:M.bytes.toString(),packetsReceived:M.packets.toString(),packetsLost:M.packetsLost.toString(),frameReceived:M.receivedFrames.toString(),frameDropped:M.droppedFrames.toString()}}(g._audioSSRC,o,g.uid,g.audioTrack);_&&Tp(()=>{var E;null===(E=this.requestUpload)||void 0===E||E.call(this,Iu.SUBSCRIBE_RELATED_STATS,{stream_id:g.uid,stats:_})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}}var M6,Di;function x6(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function Ky(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?x6(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):x6(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function L6(n){var o,s,c,h=2;for(typeof Symbol<"u"&&(s=fL,c=Symbol.iterator);h--;){if(s&&null!=(o=n[s]))return o.call(n);if(c&&null!=(o=n[c]))return new A4(o.call(n));s="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function A4(n){function o(s){if(Object(s)!==s)return Qn.reject(new TypeError(s+" is not an object."));var c=s.done;return Qn.resolve(s.value).then(function(h){return{value:h,done:c}})}return(A4=function(s){this.s=s,this.n=s.next}).prototype={s:null,n:null,next:function(){return o(this.n.apply(this.s,arguments))},return:function(s){var c=this.s.return;return void 0===c?Qn.resolve({value:s,done:!0}):o(c.apply(this.s,arguments))},throw:function(s){var c=this.s.return;return void 0===c?Qn.reject(s):o(c.apply(this.s,arguments))}},new A4(n)}let B6=Qs("P2PChannel","store.p2pId")((rr((Di=class extends st{get state(){return this._state}set state(n){const o=this._state;this._state=n,this.emit(vi.StateChange,o,this._state)}constructor(n,o){var s;super(),s=this,J(this,"store",void 0),J(this,"statsUploader",void 0),J(this,"connection",void 0),J(this,"localTrackMap",new Map),J(this,"remoteUserMap",new Map),J(this,"pendingLocalTracks",[]),J(this,"pendingRemoteTracks",[]),J(this,"statsCollector",void 0),J(this,"isPlanB",!1),J(this,"iceFailedCount",0),J(this,"dtlsFailedCount",0),J(this,"mutex",new Ru("P2PChannel-mutex")),J(this,"_state",Ud.Disconnected),J(this,"handleMuteLocalTrack",function(){var c=F(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!s.connection)return void f(new ye(pe.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));zt("debug",s,"handleMuteLocalTrack",h.getTrackId()),yield s.waitTillConnected();const _=s.filterTobeMutedTracks(h);if(0===_.length)return void g();const E=_.find(I=>"videoLowTrack"===I[0]);E&&E[1].track._originMediaStreamTrack.stop(),yield s.connection.muteLocal(_.map(I=>{let[,{id:R}]=I;return R}));const S=s.createMuteMessage(_);yield Vo(s,vi.RequestMuteLocal,S),g()}catch(_){f(_)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),J(this,"handleUnmuteLocalTrack",function(){var c=F(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!s.connection)return void f(new ye(pe.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));zt("debug",s,"handleUnmuteLocalTrack",h.getTrackId()),yield s.waitTillConnected();const _=s.filterTobeUnmutedTracks(h);if(0===_.length)return void g();const E=_.find(I=>"videoLowTrack"===I[0]);if(E){const I=E[1];if(I.track._originMediaStreamTrack.stop(),Zc().supportDualStreamEncoding){const R=h._mediaStreamTrack.clone();I.track._mediaStreamTrack=R,I.track._originMediaStreamTrack=R}else{const R=g4(h,f1(s,vi.RequestLowStreamParameter));I.track._mediaStreamTrack=R,I.track._originMediaStreamTrack=R}yield new Qn((R,M)=>{s.handleReplaceTrack(I.track,R,M,!0)})}yield s.connection.unmuteLocal(_.map(I=>{let[,{id:R}]=I;return R}));const S=s.createUnmuteMessage(_);yield Vo(s,vi.RequestUnmuteLocal,S),g()}catch(_){f(_)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),J(this,"handleUpdateVideoEncoder",function(){var c=F(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const _=s.localTrackMap.get(xn.LocalVideoTrack);if(!s.connection||!_||_.track!==h)return void g();yield s.waitTillConnected();const{id:E,track:S}=_;yield s.connection.updateSendParameters(E,S),yield s.connection.updateEncoderConfig(E,S),s.emit(vi.UpdateVideoEncoder,S),g()}catch(_){f(_)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),J(this,"handleSetOptimizationMode",function(){var c=F(function*(h,g,f){const A=yield s.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const _=s.localTrackMap.get(xn.LocalVideoTrack);if(!s.connection||!_||_.track!==h)return;yield s.waitTillConnected();const{id:E,track:S}=_;yield s.connection.updateSendParameters(E,S),g()}catch(_){f(_)}finally{A()}});return function(h,g,f){return c.apply(this,arguments)}}()),J(this,"handleReplaceTrack",function(){var c=F(function*(h,g,f,A){let _;se.debug("P2PChannel handleReplaceTrack for [track-id-".concat(h.getTrackId(),"]")),"boolean"==typeof A&&A||(_=yield s.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var E;const I=Array.from(s.localTrackMap.entries()).find(R=>{let[,{track:M}]=R;return h===M});if(!s.connection||!I)return void g();if(yield s.waitTillConnected(),yield null===(E=s.connection)||void 0===E?void 0:E.replaceTrack(h,I[1].id),s.isPlanB){const R=I[1];R.id=h._mediaStreamTrack.id,s.localTrackMap.set(I[0],R)}if(I[0]===xn.LocalVideoTrack&&Zc().supportDualStreamEncoding){const R=s.localTrackMap.get(xn.LocalVideoLowTrack);if(R){const M=h._mediaStreamTrack.clone();R.track._originMediaStreamTrack.stop(),R.track._mediaStreamTrack=M,R.track._originMediaStreamTrack=M,yield new Qn((Q,H)=>{s.handleReplaceTrack(R.track,Q,H,!0)})}}g()}catch(I){f(I)}finally{var S;null===(S=_)||void 0===S||S()}});return function(h,g,f,A){return c.apply(this,arguments)}}()),J(this,"handleGetLocalVideoStats",c=>{c(this.statsCollector.getLocalVideoTrackStats())}),J(this,"handleGetLocalAudioStats",c=>{c(this.statsCollector.getLocalAudioTrackStats())}),J(this,"handleGetRemoteVideoStats",c=>this.statsCollector.getRemoteVideoTrackStats(c.uid)[c.uid]),J(this,"handleGetRemoteAudioStats",c=>this.statsCollector.getRemoteAudioTrackStats(c.uid)[c.uid]),this.store=n,this.statsCollector=o,this.statsCollector.addP2PChannel(this),this.statsUploader=new xz,this.bindStatsUploaderEvents(),this.isPlanB=!Zc().supportUnifiedPlan||Qt("CHROME_FORCE_PLAN_B")&&P0()}startP2PConnection(n){var o=this;return F(function*(){return o.state=Ud.New,o.connection=o.isPlanB?new bL(n,o.store):new wL(n,o.store),o.bindConnectionEvents(o.connection),o.connection.establish()})()}connect(n,o,s,c,h,g){var f=this;return F(function*(){if(!f.connection)throw new ye(pe.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");f.store.peerConnectionStart(),yield f.connection.connect(n,o,s,c,h,g),f.statsUploader.startUploadTransportStats(),f.state=Ud.Connected})()}publish(n,o,s){var c=this;return c2(function*(){const h=yield As(c.mutex.lock("From P2PChannel.publish"));try{if(!c.connection){if(c.state===Ud.Disconnected)throw new ye(pe.UNEXPECTED_ERROR,"PeerConnection already disconnected.");c.throwIfTrackTypeNotMatch(n);const f=n.filter(A=>-1===c.pendingLocalTracks.indexOf(A));return void(c.pendingLocalTracks=c.pendingLocalTracks.concat(f))}c.store.pubId=c.store.pubId+1,$l.markPublishStart(c.store.clientId,c.store.pubId),yield As(c.waitTillConnected());const g=c.filterTobePublishedTracks(n,o,s);if(0===g.length)return void(yield As(c.tryToUnmuteAudio(n)));yield*pL(L6(c.doPublish(c.connection,g)),As)}finally{h()}})()}doPublish(n,o){var s=this;return c2(function*(){o.forEach(E=>{let{track:S,type:I}=E;const R=performance.now();s.store.publish(S.getTrackId(),I===xn.LocalAudioTrack?"audio":"video",R)}),s.bindLocalTrackEvents(o);const c=yield As(n.send(o.map(E=>{let{track:S}=E;return S}),s.store.codec,s.store.audioCodec)),h=(yield As(c.next())).value,g=s.createGatewayPublishMessage(o,h);let f;try{f=yield g}catch(E){throw En("error",s,"doPublish yield error: ".concat(E.toString())),c.throw(E),E?.code===pe.WS_ABORT&&o.forEach(S=>{let{track:I}=S;-1===s.pendingLocalTracks.indexOf(I)&&s.pendingLocalTracks.push(I)}),s.unbindLocalTrackEvents(o),E}const A=s.mapPubResToRemoteConfig(g,f);zt("debug",s,"doPublish",{remoteConfigs:A,tracks:o.map(E=>{let{track:S}=E;return S.getTrackId()}),pubMsg:g,pubAns:f});const _=(yield As(c.next(A))).value;o.forEach(E=>{let{type:S}=E;s.statsCollector.addLocalStats(S)}),s.assignLocalTracks(o,_),s.statsUploader.startUploadUplinkStats(),o.forEach(E=>{let{track:S,type:I}=E;const R=performance.now();s.store.publish(S.getTrackId(),I===xn.LocalAudioTrack?"audio":"video",void 0,R)})})()}publishLowStream(n){var o=this;return c2(function*(){if(!o.connection)return;zt("debug",o,"publishLowStream",n);const s=yield As(o.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const h=o.localTrackMap.get(xn.LocalVideoTrack);if(!h)throw new ye(pe.UNEXPECTED_ERROR,"Could not find high stream");if(o.localTrackMap.has(xn.LocalVideoLowTrack))throw new ye(pe.UNEXPECTED_ERROR,"[".concat(o.store.clientId,"] Can't publish low stream when stream already publish"));yield As(o.waitTillConnected());const g=[{track:o.getLowVideoTrack(h.track,n),type:xn.LocalVideoLowTrack}];if(yield*pL(L6(o.doPublish(o.connection,g)),As),h.track.muted||!h.track.enabled){var c;const f=null===(c=o.localTrackMap.get(xn.LocalVideoLowTrack))||void 0===c?void 0:c.id;void 0!==f&&(yield As(o.connection.muteLocal([f])))}}finally{s()}})()}republish(){var n=this;return F(function*(){n.pendingLocalTracks.length>0&&(se.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),zt("debug",n,"republish",n.pendingLocalTracks.map(o=>o.getTrackId())),yield Hh(n,vi.RequestRePublish,n.pendingLocalTracks),n.emit(vi.MediaReconnectEnd,n.store.uid),n.pendingLocalTracks=[])})()}reSubscribe(n){var o=this;return F(function*(){zt("debug",o,"reSubscribe",o.pendingRemoteTracks.map(s=>{let{user:c}=s;return c.uid}));for(let s=o.pendingRemoteTracks.length-1;s>=0;s--){const{user:c,kind:h}=o.pendingRemoteTracks[s];(h!==ti.AUDIO||c._audio_added_&&c._audioSSRC)&&(h!==ti.VIDEO||c._video_added_&&c._videoSSRC)||o.pendingRemoteTracks.splice(s,1)}if(n)yield Hh(o,vi.RequestReSubscribe,o.pendingRemoteTracks);else for(const{user:s,kind:c}of o.pendingRemoteTracks)yield o.subscribe(s,c,c===ti.VIDEO?s._videoSSRC:s._audioSSRC);o.pendingRemoteTracks.forEach(s=>{let{user:c}=s;o.emit(vi.MediaReconnectEnd,c.uid)}),o.pendingRemoteTracks=[]})()}unpublish(n){var o=this;return F(function*(){if(!o.connection)return void n.forEach(h=>{const g=o.pendingLocalTracks.indexOf(h);-1!==g&&o.pendingLocalTracks.splice(g,1)});yield o.waitTillConnected();const s=o.filterTobeUnpublishedTracks(n);if(0===s.length)return;const c=s.find(h=>"videoLowTrack"===h[0]);return c&&c[1].track.close(),zt("debug",o,"unpublish"),o.doUnpublish(o.connection,s)})()}unpublishLowStream(){var n=this;return F(function*(){if(!n.connection)return;zt("debug",n,"unpublishLowStream");const o=n.localTrackMap.get(xn.LocalVideoLowTrack);return o?(yield n.waitTillConnected(),o.track.close(),n.doUnpublish(n.connection,[[xn.LocalVideoLowTrack,o]])):void 0})()}doUnpublish(n,o){var s=this;return F(function*(){const c=s.createGatewayUnpublishMessage(o);return yield n.stopSending(o.map(h=>{let[,{id:g}]=h;return g})),s.withdrawLocalTracks(o),s.unbindLocalTrackEvents(o.map(h=>{let[g,{track:f}]=h;return{type:g,track:f}})),o.forEach(h=>{let[g]=h;s.statsCollector.removeLocalStats(g)}),0===s.localTrackMap.size&&s.statsUploader.stopUploadUplinkStats(),c})()}subscribe(n,o,s,c,h){var g=this;return F(function*(){var f;if(!g.connection)throw new ye(pe.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(zt("debug",g,"subscribe",{uid:n.uid,mediaType:o,ssrcId:s}),null!==(f=g.remoteUserMap.get(n))&&void 0!==f&&f.has(o))return;let A,_;if(yield g.waitTillConnected(),h){const I=h.find(M=>{let{stream_type:Q}=M;return Q===o});if(!I)throw new ye(pe.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(o," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(o,"."));const R=yield g.connection.receive(o,I.ssrcs,String(n._uintid),I.attributes);A=R.track,_=R.id}else{const I=yield g.connection.receive(o,[{ssrcId:s,rtx:c}],String(n._uintid),void 0);A=I.track,_=I.id}o===ti.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(A):(n._audioTrack=new g2(A,n.uid,n._uintid,g.store),se.info("[".concat(g.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(A):(n._videoTrack=new RL(A,n.uid,n._uintid,g.store),se.info("[".concat(g.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),g.bindRemoteTrackEvents(n,n._videoTrack));const E=g.remoteUserMap.get(n);E?E.set(o,_):g.remoteUserMap.set(n,new Map([[o,_]])),g.statsCollector.addRemoteStats(n.uid),g.statsUploader.startUploadDownlinkStats();const S=g.pendingRemoteTracks.findIndex(I=>{let{user:R,kind:M}=I;return R.uid===n.uid&&o===M});-1!==S&&(g.pendingRemoteTracks.splice(S,1),g.emit(vi.MediaReconnectEnd,n.uid))})()}massSubscribe(n){var o=this;return F(function*(){return o.massSubscribeNoLock(n)})()}massSubscribeNoLock(n){var o=this;return F(function*(){if(!o.connection)throw new ye(pe.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");zt("debug",o,"subscribeAll",n.map(c=>{let{user:h,mediaType:g,ssrcId:f}=c;return{uid:h.uid,mediaType:g,ssrcId:f}})),n=n.filter(c=>{var h;let{user:g,mediaType:f}=c;return!(null!==(h=o.remoteUserMap.get(g))&&void 0!==h&&h.has(f))}),yield o.waitTillConnected();const s=yield o.connection.batchReceive(n.map(c=>{let{user:h,mediaType:g,ssrcId:f,rtxSsrcId:A}=c;return{kind:g,ssrcMsg:[{ssrcId:f,rtx:A}],mslabel:String(h._uintid)}}));n.forEach((c,h)=>{let{user:g,mediaType:f}=c;const{track:A,id:_}=s[h];f===ti.AUDIO?(g._audioTrack?g._audioTrack._updateOriginMediaStreamTrack(A):(g._audioTrack=new g2(A,g.uid,g._uintid,o.store),se.info("[".concat(o.store.p2pId,"] create remote audio track: ").concat(g._audioTrack.getTrackId()))),o.bindRemoteTrackEvents(g,g._audioTrack)):(g._videoTrack?g._videoTrack._updateOriginMediaStreamTrack(A):(g._videoTrack=new RL(A,g.uid,g._uintid,o.store),se.info("[".concat(o.store.p2pId,"] create remote video track: ").concat(g._videoTrack.getTrackId()))),o.bindRemoteTrackEvents(g,g._videoTrack));const E=o.remoteUserMap.get(g);E?E.set(f,_):o.remoteUserMap.set(g,new Map([[f,_]])),o.statsCollector.addRemoteStats(g.uid),o.statsUploader.startUploadDownlinkStats();const S=o.pendingRemoteTracks.findIndex(I=>{let{user:R,kind:M}=I;return R.uid===g.uid&&f===M});-1!==S&&(o.pendingRemoteTracks.splice(S,1),o.emit(vi.MediaReconnectEnd,g.uid))})})()}unsubscribe(n,o,s){var c=this;return F(function*(){const h=c.pendingRemoteTracks.filter(A=>{let{user:_,kind:E}=A;return void 0!==o?_.uid===n.uid&&o===E:_.uid===n.uid});if(h.forEach(A=>{const _=c.pendingRemoteTracks.indexOf(A);c.pendingRemoteTracks.splice(_,1)}),!c.connection)return void h.forEach(A=>{let{kind:_}=A;var E;if(_===ti.AUDIO)null===(E=n._audioTrack)||void 0===E||E._destroy(),n._audioTrack=void 0;else if(_===ti.VIDEO){var S;null===(S=n._videoTrack)||void 0===S||S._destroy(),n._videoTrack=void 0}});zt("debug",c,"unsubscribe",{uid:n.uid,mediaType:o});const g=c.filterTobeUnSubscribedTracks(n,o);if(0===g.length)return;yield c.connection.stopReceiving(g.map(A=>{let[,{id:_}]=A;return _}));const f=c.createUnsubscribeMessage(g);return c.withdrawRemoteTracks(g),0===c.remoteUserMap.size&&c.statsUploader.stopUploadDownlinkStats(),g.forEach(A=>{let[_,{kind:E}]=A;var S,I;if(E===ti.VIDEO&&_._videoSSRC&&(null===(S=c.connection)||void 0===S||S.setStatsRemoteVideoIsReady(_._videoSSRC,!1)),E===ti.VIDEO)c.unbindRemoteTrackEvents(_._videoTrack),s||(null===(I=_._videoTrack)||void 0===I||I._destroy(),_._videoTrack=void 0);else if(E===ti.AUDIO){var R;c.unbindRemoteTrackEvents(_._audioTrack),!s&&(null===(R=_._audioTrack)||void 0===R||R._destroy(),_._audioTrack=void 0)}}),f})()}massUnsubscribe(n){var o=this;return F(function*(){return o.massUnsubscribeNoLock(n)})()}massUnsubscribeNoLock(n){var o=this;return F(function*(){let s=[];for(const{user:g,mediaType:f}of n){const A=o.pendingRemoteTracks.filter(_=>{let{user:E,kind:S}=_;return void 0!==f?E.uid===g.uid&&f===S:E.uid===g.uid});A.forEach(_=>{const E=o.pendingRemoteTracks.indexOf(_);o.pendingRemoteTracks.splice(E,1)}),s=s.concat(A)}if(!o.connection)return void s.forEach(g=>{let{user:f,kind:A}=g;var _;if(A===ti.AUDIO)null===(_=f._audioTrack)||void 0===_||_._destroy(),f._audioTrack=void 0;else if(A===ti.VIDEO){var E;null===(E=f._videoTrack)||void 0===E||E._destroy(),f._videoTrack=void 0}});zt("debug",o,"batchUnsubscribe",n.map(g=>{let{user:f,mediaType:A}=g;return{uid:f.uid,mediaType:A}}));const c=e_(n).call(n,(g,f)=>{let{user:A,mediaType:_}=f;const E=o.filterTobeUnSubscribedTracks(A,_);return g.concat(E)},[]);if(0===c.length)return;yield o.connection.stopReceiving(c.map(g=>{let[,{id:f}]=g;return f}));const h=o.createUnsubscribeAllMessage(c);return o.withdrawRemoteTracks(c),0===o.remoteUserMap.size&&o.statsUploader.stopUploadDownlinkStats(),c.forEach(g=>{let[f,{kind:A}]=g;var _,E;if(A===ti.VIDEO&&f._videoSSRC&&(null===(_=o.connection)||void 0===_||_.setStatsRemoteVideoIsReady(f._videoSSRC,!1)),A===ti.VIDEO)o.unbindRemoteTrackEvents(f._videoTrack),null===(E=f._videoTrack)||void 0===E||E._destroy(),f._videoTrack=void 0;else if(A===ti.AUDIO){var S;o.unbindRemoteTrackEvents(f._audioTrack),null===(S=f._audioTrack)||void 0===S||S._destroy(),f._audioTrack=void 0}}),h})()}muteRemote(n,o){var s=this;return F(function*(){if(!s.connection)return;zt("debug",s,"muteRemote",{uid:n.uid,kind:o});const c=s.remoteUserMap.get(n);if(!c)return se.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid,".")),void En("warning",s,"P2PChannel.muteRemote has no remote user ".concat(n.uid,"."));if(!c.get(o))return se.warning("P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(o,".")),void En("warning",s,"P2PChannel.muteRemote has no remote user ".concat(n.uid," media type ").concat(o,"."));const h=o===ti.VIDEO?n._videoSSRC:n._audioSSRC;void 0!==h&&s.connection.setStatsRemoteVideoIsReady(h,!1)})()}unmuteRemote(n,o){var s=this;return F(function*(){return s.unmuteRemoteNoLock(n,o)})()}unmuteRemoteNoLock(n,o){var s=this;return F(function*(){if(!s.connection)return;zt("debug",s,"unmuteRemote",{uid:n.uid,kind:o});const c=s.remoteUserMap.get(n);return c?c.get(o)?void 0:(se.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid," media type ").concat(o,".")),void En("warning",s,"unmuteRemote has no remote user ".concat(n.uid," media type ").concat(o))):(se.warning("P2PChannel.unmuteRemote has no remote user ".concat(n.uid,".")),void En("warning",s,"unmuteRemote has no remote user ".concat(n.uid)))})()}getAllTracks(n){const o=this.localTrackMap.get(xn.LocalAudioTrack);if(o?.track instanceof Gd){const s=o.track;return Array.from(this.localTrackMap.entries()).filter(c=>{let[h]=c;return h!==xn.LocalAudioTrack}).filter(c=>{let[h]=c;return!(n&&h===xn.LocalVideoLowTrack)}).map(c=>{let[,{track:h}]=c;return h}).concat(s.trackList)}return Array.from(this.localTrackMap.entries()).filter(s=>{let[c]=s;return!(n&&c===xn.LocalVideoLowTrack)}).map(s=>{let[,{track:c}]=s;return c})}reportPublishEvent(n,o,s,c,h){if(n){const f=this.localTrackMap.get(xn.LocalAudioTrack),A=this.localTrackMap.get(c?xn.LocalVideoLowTrack:xn.LocalVideoTrack);Jt.publish(this.store.sessionId,{eventElapse:$l.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:o,audioName:f?.track.getTrackLabel(),videoName:A?.track.getTrackLabel(),screenshare:-1!==A?.track._hints.indexOf(Xc.SCREEN_TRACK),audio:!!f,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}else{var g;s||(s=[]);const f=s.find(_=>_ instanceof gc),A=c?null===(g=this.localTrackMap.get(xn.LocalVideoTrack))||void 0===g?void 0:g.track:s.find(_=>_ instanceof ea);Jt.publish(this.store.sessionId,{eventElapse:$l.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:o,audioName:f?.getTrackLabel(),videoName:A?.getTrackLabel(),screenshare:-1!==A?._hints.indexOf(Xc.SCREEN_TRACK),audio:!!f,video:!!A,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:h})}}reportSubscribeEvent(n,o,s,c){const h=c===ti.VIDEO?s._videoSSRC:s._audioSSRC;h&&Jt.subscribe(this.store.sessionId,{succ:n,ec:o,video:c===ti.VIDEO,audio:c===ti.AUDIO,peerid:s.uid,subscribeRequestid:c===ti.VIDEO?s._videoSSRC:s._audioSSRC,p2pid:this.store.p2pId,eventElapse:$l.measureFromSubscribeStart(this.store.clientId,h)})}reset(){se.debug("P2PChannel.reset"),this.mutex=new Ru("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Ud.Disconnected}getStats(){var n;return null===(n=this.connection)||void 0===n?void 0:n.getStats()}getRemoteVideoIsReady(n){var o;return(null===(o=this.connection)||void 0===o?void 0:o.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(xn.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(xn.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const o=this.localTrackMap.get(n);return o&&o.track instanceof ea||o&&o.track instanceof gc?o.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,o){if(!n)return this.remoteUserMap.size>0;const s=this.remoteUserMap.get(n);return!!s&&(!o||s.has(o))}hasRemoteMediaWithLock(n,o){var s=this;return F(function*(){if(!n)return s.remoteUserMap.size>0;const c=s.remoteUserMap.get(n);return!!c&&(!o||c.has(o))})()}getRemoteMedia(n){var o;const s=Array.from(Py(o=this.remoteUserMap).call(o)).find(c=>c.uid===n);return s?{audioTrack:s.audioTrack,audioSSRC:s._audioSSRC,videoTrack:s.videoTrack,videoSSRC:s._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(s=>{let[c]=s;return{uid:c.uid,level:c.audioTrack?100*c.audioTrack._source.getAccurateVolumeLevel():0}});const o=this.localTrackMap.get(xn.LocalAudioTrack);return o&&n.push({level:100*o.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=BF(n).call(n,(s,c)=>s.level-c.level),n}disconnectForReconnect(){var n=this;return F(function*(){n.connection&&(zt("debug",n,"disconnectForReconnect"),se.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),n.state=Ud.Reconnecting,n.connection.close(),n.unbindConnectionEvents(n.connection),n.connection=void 0,0!==n.localTrackMap.size&&(Array.from(n.localTrackMap.entries()).forEach(o=>{let[s,{track:c}]=o;switch(s){case xn.LocalVideoTrack:c._hints.includes(Xc.LOW_STREAM)?c.close():n.pendingLocalTracks.push(c);break;case xn.LocalAudioTrack:c instanceof Gd?n.pendingLocalTracks=n.pendingLocalTracks.concat(c.trackList):n.pendingLocalTracks.push(c)}}),n.emit(vi.MediaReconnectStart,n.store.uid)),n.unbindLocalTrackEvents(),n.localTrackMap.clear(),0!==n.remoteUserMap.size&&Array.from(n.remoteUserMap.entries()).forEach(o=>{let[s,c]=o;Array.from(Py(c).call(c)).forEach(h=>{n.setPendingRemoteMedia(s,h)}),n.emit(vi.MediaReconnectStart,s.uid)}),n.unbindAllRemoteTrackEvents(),n.remoteUserMap.clear(),n.statsUploader.stopUploadUplinkStats(),n.statsUploader.stopUploadDownlinkStats(),n.statsUploader.stopUploadTransportStats(),se.debug("P2PChannel disconnected, waiting to reconnect."))})()}hasPendingRemoteMedia(n,o){for(const s of this.pendingRemoteTracks){const{user:c,kind:h}=s;if((n instanceof oL?n.uid:n)===c.uid&&o===h)return!0}return!1}setPendingRemoteMedia(n,o){this.hasPendingRemoteMedia(n,o)||this.pendingRemoteTracks.push({user:n,kind:o})}reEstablish(){var n=this;return F(function*(){if(n.connection)return n.connection.reEstablish()})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),o=this.localTrackMap.get(xn.LocalVideoTrack),s=this.localTrackMap.get(xn.LocalAudioTrack),c=n.videoSend.find(M=>M.ssrc===o?.ssrcs[0].ssrcId),h=n.audioSend.find(M=>M.ssrc===s?.ssrcs[0].ssrcId);if(!c||!h)return 1;const g=Ly(this,vi.NeedSignalRTT),f=c?c.rttMs:void 0,A=h?h.rttMs:void 0,_=f&&A?(f+A)/2:f||A,S=100*n.sendPacketLossRate*.7/50+.3*((_&&g?(_+g)/2:_||g)||0)/1500,I=S<.17?1:S<.36?2:S<.59?3:S<.1?4:5,R=o?.track;if(R&&R._encoderConfig&&-1===R._hints.indexOf(Xc.SCREEN_TRACK)){const M=R._encoderConfig.bitrateMax,Q=n.bitrate.actualEncoded;if(M&&Q){const H=(1e3*M-Q)/(1e3*M);return EW[H<.15?0:H<.3?1:H<.45?2:H<.6?3:4][I]}}return I}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let o=0;return Array.from(this.remoteUserMap.entries()).forEach(s=>{let[c]=s;const h=c._audioSSRC,g=c._videoSSRC,f=n.audioRecv.find(Q=>Q.ssrc===h),A=n.videoRecv.find(Q=>Q.ssrc===g);if(!f&&!A)return void(o+=1);const _=Ly(this,vi.NeedSignalRTT),E=n.rtt,S=(E&&_?(E+_)/2:E||_)||0,I=f?f.jitterMs:void 0,R=n.recvPacketLossRate;let M=.7*R*100/50+.3*S/1500;I&&(M=.6*R*100/50+.2*S/1500+.2*I/400),o+=M<.1?1:M<.17?2:M<.36?3:M<.59?4:5}),this.remoteUserMap.size>0?Math.round(o/this.remoteUserMap.size):o}muteLocalTrack(n){var o=this;return F(function*(){return new Qn((s,c)=>{o.handleMuteLocalTrack(n,s,c)})})()}filterTobePublishedTracks(n,o,s){const c=[],h=Zc(),g=this.getAllTracks();n=NQ(n=n.filter(_=>-1===g.indexOf(_)));let f=!1,A=!1;for(const _ of n){if(_ instanceof ea&&(this.localTrackMap.has(xn.LocalVideoTrack)||f?new ye(pe.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(c.push({track:_,type:xn.LocalVideoTrack}),f=!0),o)){const E=this.getLowVideoTrack(_,s);c.push({track:E,type:xn.LocalVideoLowTrack})}if(_ instanceof gc){const E=this.localTrackMap.get(xn.LocalAudioTrack);if(E){if(!(E.track instanceof Gd))throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");E.track.addAudioTrack(_),this.bindLocalAudioTrackEvents(_,!0)}else if(A){const S=c.find(I=>{let{type:R}=I;return R===xn.LocalAudioTrack});if(!(S.track instanceof Gd))throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(_._bypassWebAudio)throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(_)}else{if(!h.webAudioMediaStreamDest||_ instanceof Gd||_._bypassWebAudio)c.push({track:_,type:xn.LocalAudioTrack});else{const S=new Gd;S.addAudioTrack(_),c.push({track:S,type:xn.LocalAudioTrack})}A=!0}}}return c}filterTobeUnpublishedTracks(n){const o=[],s=this.getAllTracks();n=NQ(n=n.filter(c=>-1!==s.indexOf(c)));for(const c of n){if(c instanceof gc){const h=this.localTrackMap.get(xn.LocalAudioTrack);if(!h)continue;h.track instanceof Gd?(h.track.removeAudioTrack(c),this.unbindLocalAudioTrackEvents(c),0===h.track.trackList.length&&(o.push([xn.LocalAudioTrack,h]),h.track.close())):o.push([xn.LocalAudioTrack,h])}if(c instanceof ea){const h=this.localTrackMap.get(xn.LocalVideoTrack);if(!h)continue;o.push([xn.LocalVideoTrack,h]);const g=this.localTrackMap.get(xn.LocalVideoLowTrack);g&&o.push([xn.LocalVideoLowTrack,g])}}return o}bindLocalTrackEvents(n){n.forEach(o=>{let{track:s,type:c}=o;switch(c){case xn.LocalVideoTrack:s.addListener(mr.GET_STATS,this.handleGetLocalVideoStats),s.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(mr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),s.addListener(mr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),s.addListener(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case xn.LocalAudioTrack:this.bindLocalAudioTrackEvents(s)}})}bindLocalAudioTrackEvents(n,o){n instanceof Gd?n.trackList.forEach(s=>{s.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(mr.GET_STATS,this.handleGetLocalAudioStats),s.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(mr.GET_STATS,this.handleGetLocalAudioStats),n.addListener(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),o||n.addListener(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(o=>{let[s,{track:c}]=o;return{track:c,type:s}})),n.forEach(o=>{let{track:s,type:c}=o;switch(c){case xn.LocalVideoTrack:s.off(mr.GET_STATS,this.handleGetLocalVideoStats),s.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.off(mr.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),s.off(mr.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),s.off(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case xn.LocalAudioTrack:this.unbindLocalAudioTrackEvents(s)}})}unbindLocalAudioTrackEvents(n){n instanceof Gd?n.trackList.forEach(o=>{o.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(mr.GET_STATS,this.handleGetLocalAudioStats),o.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(mr.GET_STATS,this.handleGetLocalAudioStats),n.off(mr.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(mr.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(mr.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(mr.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(mr.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,o){o instanceof RL&&o.addListener(mr.GET_STATS,s=>{s(this.handleGetRemoteVideoStats(n))}),o instanceof g2&&o.addListener(mr.GET_STATS,s=>{s(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(mr.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[o,s]=n;s.has(ti.AUDIO)&&this.unbindRemoteTrackEvents(o._audioTrack),s.has(ti.VIDEO)&&this.unbindRemoteTrackEvents(o._videoTrack)})}createGatewayPublishMessage(n,o){return n.map((s,c)=>{let h,g,{track:f,type:A}=s;switch(A){case xn.LocalAudioTrack:h=gs.Audio,g={dtx:f instanceof X0&&f._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case xn.LocalVideoTrack:h=f._hints.includes(Xc.SCREEN_TRACK)?gs.Screen:gs.High,g=Ky(Ky({},cj(f)),{},{codec:this.store.codec});break;case xn.LocalVideoLowTrack:h=gs.Low,g=Ky(Ky({},cj(f)),{},{codec:this.store.codec})}return{stream_type:h,attributes:g,ssrcs:o[c]}})}createGatewayUnpublishMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case xn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?gs.Screen:gs.High;break;case xn.LocalAudioTrack:s=gs.Audio;break;case xn.LocalVideoLowTrack:s=gs.Low}return{stream_type:s,ssrcs:g,mid:f}})}assignLocalTracks(n,o){n.forEach((s,c)=>{let{track:h,type:g}=s;this.localTrackMap.set(g,{track:h,id:o[c].id,ssrcs:o[c].localSSRC})})}withdrawLocalTracks(n){n.forEach(o=>{let[s]=o;this.localTrackMap.delete(s)})}waitTillConnected(){var n=this;return F(function*(){return new Qn((o,s)=>{switch(n.state){case Ud.New:case Ud.Reconnecting:{const c=(h,g)=>g===Ud.Disconnected?(n.off(vi.StateChange,c),void s(new ye(pe.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):g===Ud.Connected?(n.off(vi.StateChange,c),void o(void 0)):void 0;n.on(vi.StateChange,c);break}case Ud.Connected:o(void 0);break;case Ud.Disconnected:s(new ye(pe.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})})()}bindConnectionEvents(n){var o=this;n.onConnectionStateChange=function(){var s=F(function*(c){se.info("[p2pId: ".concat(o.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(c,")")),Pi("info",o,"connectionStateChange",c),o.emit(vi.PeerConnectionStateChange,c),"connected"!==c||o.store.keyMetrics.peerConnectionEnd||o.store.peerConnectionEnd(),"failed"===c&&(yield o.requestReconnect())});return function(c){return s.apply(this,arguments)}}(),n.onICEConnectionStateChange=s=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(s,")")),Pi("info",this,"iceConnectionStateChange",s),Jt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:s,tag:cr.TRACER}).onSuccess(),this.emit(vi.IceConnectionStateChange,s)},n.onICETransportStateChange=s=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(s,")")),Pi("info",this,"ICETransportStateChange",s)},n.onDTLSTransportStateChange=s=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(s,")")),Pi("info",this,"DTLSTransportStateChange",s)},n.onDTLSTransportError=s=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(s,")")),Pi("info",this,"DTLSTransportError",s)},n.onFirstAudioDecoded=s=>{var c;const h=Array.from(Py(c=this.remoteUserMap).call(c)).find(f=>f._audioSSRC===s);var g;h&&(null===(g=h.audioTrack)||void 0===g||g.emit(ev.FIRST_FRAME_DECODED),Jt.firstRemoteFrame(this.store.sessionId,Ha.FIRST_AUDIO_DECODE,Fo.FIRST_AUDIO_DECODE,{peer:h._uintid,subscribeElapse:$l.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=s=>{var c;const h=Array.from(Py(c=this.remoteUserMap).call(c)).find(g=>g._audioSSRC===s);h&&Jt.firstRemoteFrame(this.store.sessionId,Ha.FIRST_AUDIO_RECEIVED,Fo.FIRST_AUDIO_RECEIVED,{peer:h._uintid,subscribeElapse:$l.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(s,c,h)=>{var g;const f=Array.from(Py(g=this.remoteUserMap).call(g)).find(A=>A._videoSSRC===s);f&&Jt.firstRemoteFrame(this.store.sessionId,Ha.FIRST_VIDEO_DECODE,Fo.FIRST_VIDEO_DECODE,{peer:f._uintid,videowidth:c,videoheight:h,subscribeElapse:$l.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onFirstVideoReceived=s=>{var c;const h=Array.from(Py(c=this.remoteUserMap).call(c)).find(g=>g._videoSSRC===s);h&&Jt.firstRemoteFrame(this.store.sessionId,Ha.FIRST_VIDEO_RECEIVED,Fo.FIRST_VIDEO_RECEIVED,{peer:h._uintid,subscribeElapse:$l.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(s,c)=>{const h="relay"===s.candidateType;"unknown"!==c.candidateType&&h===("relay"===c.candidateType)||this.emit(vi.ConnectionTypeChange,h),se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(sv(c))," -> ").concat(JSON.stringify(sv(s)),")")),Pi("info",this,"SelectedLocalCandidateChanged","".concat(JSON.stringify(sv(c))," -> ").concat(JSON.stringify(sv(s))))},n.onSelectedRemoteCandidateChanged=(s,c)=>{se.info("[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(sv(c))," -> ").concat(JSON.stringify(sv(s)),")")),Pi("info",this,"SelectedRemoteCandidateChanged","".concat(JSON.stringify(sv(c))," -> ").concat(JSON.stringify(sv(s))))}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0}filterTobeMutedTracks(n){const o=[];if(-1===this.getAllTracks().indexOf(n))return o;const s=this.localTrackMap.get(xn.LocalAudioTrack);if(n instanceof gc&&s?.track instanceof Gd)return s.track.isActive||o.push([xn.LocalAudioTrack,s]),o;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c&&(o.push(c),c[0]===xn.LocalVideoTrack)){const h=this.localTrackMap.get(xn.LocalVideoLowTrack);h&&o.push([xn.LocalVideoLowTrack,h])}return o}filterTobeUnmutedTracks(n){const o=[],s=this.localTrackMap.get(xn.LocalAudioTrack);if(n instanceof gc&&s?.track instanceof Gd)return s.track.isActive&&o.push([xn.LocalAudioTrack,s]),o;const c=Array.from(this.localTrackMap.entries()).find(h=>{let[,{track:g}]=h;return n===g});if(c)if(c[0]===xn.LocalVideoTrack){o.push(c);const h=this.localTrackMap.get(xn.LocalVideoLowTrack);h&&o.push([xn.LocalVideoLowTrack,h])}else o.push(c);return o}createMuteMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case xn.LocalAudioTrack:s=gs.Audio;break;case xn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?gs.Screen:gs.High;break;case xn.LocalVideoLowTrack:s=gs.Low}return{stream_type:s,ssrcs:g,mid:f}})}createUnmuteMessage(n){return n.map(o=>{let s,[c,{track:h,ssrcs:g,id:f}]=o;switch(c){case xn.LocalAudioTrack:s=gs.Audio;break;case xn.LocalVideoTrack:s=h._hints.includes(Xc.SCREEN_TRACK)?gs.Screen:gs.High;break;case xn.LocalVideoLowTrack:s=gs.Low}return{stream_type:s,ssrcs:g,mid:f}})}filterTobeUnSubscribedTracks(n,o){const s=[],c=this.remoteUserMap.get(n);if(!c)return s;if(o){const h=c.get(o);if(!h)return s;s.push([n,{kind:o,id:h}])}else Array.from(c.entries()).forEach(h=>{let[g,f]=h;s.push([n,{kind:g,id:f}])});return s}createUnsubscribeMessage(n){const o=[];return n.forEach(s=>{let[c,{kind:h}]=s;switch(h){case ti.VIDEO:return void(c._videoSSRC&&o.push({stream_type:ti.VIDEO,ssrcId:c._videoSSRC}));case ti.AUDIO:return void(c._audioSSRC&&o.push({stream_type:ti.AUDIO,ssrcId:c._audioSSRC}))}}),o}createUnsubscribeAllMessage(n){const o=new Map;return n.forEach(s=>{let[c,{kind:h}]=s;if(o.has(c)){let g=o.get(c);g|=h===ti.VIDEO?Uo.Video:Uo.Audio,o.set(c,g)}else o.set(c,h===ti.VIDEO?Uo.Video:Uo.Audio)}),{users:Array.from(o.entries()).map(s=>{let[c,h]=s;return{stream_id:c.uid,stream_type:h}})}}withdrawRemoteTracks(n){n.forEach(o=>{let[s,{kind:c}]=o;const h=this.remoteUserMap.get(s);h&&(h.delete(c),0===Array.from(h.entries()).length&&this.remoteUserMap.delete(s))})}updateBitrateLimit(n){var o=this;return F(function*(){const s=o.localTrackMap.get(xn.LocalVideoTrack),c=o.localTrackMap.get(xn.LocalVideoLowTrack);s&&(yield s.track.setBitrateLimit(n.uplink)),c&&n.low_stream_uplink&&(yield c.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0}))})()}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(n,o){return n.map((s,c)=>{var h;let{stream_type:g}=s;return null===(h=o.find(f=>{let{stream_type:A}=f;return g===A}))||void 0===h?void 0:h.attributes})}tryToUnmuteAudio(n){var o=this;return F(function*(){for(let c=0;c<n.length;c++)if(n[c]instanceof gc){var s;const h=o.filterTobeUnmutedTracks(n[c]);if(0===h.length)continue;yield null===(s=o.connection)||void 0===s?void 0:s.unmuteLocal(h.map(f=>{let[,{id:A}]=f;return A}));const g=o.createUnmuteMessage(h);return void(yield Vo(o,vi.RequestUnmuteLocal,g))}})()}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var o;return!(null===(o=this.connection)||void 0===o||!o.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,o)=>this.emit(vi.RequestUploadStats,n,o),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}requestReconnect(){var n=this;return F(function*(){n.dtlsFailedCount+=1,yield Mc(Kr(n.dtlsFailedCount,wn)),n.emit(vi.RequestReconnect)})()}reconnectP2P(){var n=this;return F(function*(){const o=Array.from(n.localTrackMap.entries()),s=n.createGatewayUnpublishMessage(o);Array.from(n.remoteUserMap.entries()),s.length>0&&(yield Hh(n,vi.RequestUnpublishForReconnectPC,s)),n.disconnectForReconnect(),n.emit(vi.RequestReconnectPC)})()}canPublishLowStream(){return this.localTrackMap.has(xn.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof ea)}throwIfTrackTypeNotMatch(n){if(n.filter(o=>o instanceof ea).length>1)throw new ye(pe.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(o=>o instanceof gc).length>1&&(n.some(o=>o instanceof gc&&o._bypassWebAudio)||!Zc().webAudioMediaStreamDest))throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const o of n){if(o instanceof ea&&this.pendingLocalTracks.some(s=>s instanceof ea))throw new ye(pe.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(o instanceof gc&&this.pendingLocalTracks.some(s=>s instanceof gc)&&(!Zc().webAudioMediaStreamDest||o._bypassWebAudio||this.pendingLocalTracks.some(s=>s instanceof gc&&s._bypassWebAudio)))throw new ye(pe.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,o){const s=Zc().supportDualStreamEncoding,c=Ky(Ky({},{width:160,height:120,framerate:15,bitrate:50}),o);let h;h=s?n._mediaStreamTrack.clone():g4(n,c);const g=new ea(h,Ky(Ky({},s&&{scaleResolutionDownBy:DQ(c,n)}),{},{frameRate:c.framerate,bitrateMax:c.bitrate,bitrateMin:c.bitrate}));return g._hints.push(Xc.LOW_STREAM),n.addListener(mr.NEED_CLOSE,()=>{g.close()}),g}globalLock(){var n=this;return F(function*(){return n.mutex.lock("From P2PChannel.globalLock")})()}remoteMediaSsrcChanged(n,o,s){if(!this.connection)return!1;const c=this.remoteUserMap.get(n);if(!c)return!1;const h=c.get(o);if(!h)return!1;const g=this.connection.getRemoteSSRC(h);return void 0!==g&&g!==s}}).prototype,"startP2PConnection",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"startP2PConnection"),Di.prototype),rr(Di.prototype,"connect",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"connect"),Di.prototype),rr(Di.prototype,"unpublish",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"unpublish"),Di.prototype),rr(Di.prototype,"unpublishLowStream",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"unpublishLowStream"),Di.prototype),rr(Di.prototype,"subscribe",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"subscribe"),Di.prototype),rr(Di.prototype,"massSubscribe",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"massSubscribe"),Di.prototype),rr(Di.prototype,"unsubscribe",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"unsubscribe"),Di.prototype),rr(Di.prototype,"massUnsubscribe",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"massUnsubscribe"),Di.prototype),rr(Di.prototype,"muteRemote",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"muteRemote"),Di.prototype),rr(Di.prototype,"unmuteRemote",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"unmuteRemote"),Di.prototype),rr(Di.prototype,"hasRemoteMediaWithLock",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"hasRemoteMediaWithLock"),Di.prototype),rr(Di.prototype,"disconnectForReconnect",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"disconnectForReconnect"),Di.prototype),rr(Di.prototype,"reEstablish",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"reEstablish"),Di.prototype),rr(Di.prototype,"updateBitrateLimit",[Zd],Object.getOwnPropertyDescriptor(Di.prototype,"updateBitrateLimit"),Di.prototype),M6=Di))||M6;function Zd(n,o,s){const c=n[o];if("function"!=typeof c)throw new Error("Cannot use mutex on object property.");return s.value=F(function*(){const h=this.mutex,g=yield h.lock("From P2PChannel.".concat(o));try{for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];return yield c.apply(this,A)}finally{g()}}),s}function kp(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Ai,F6="function"==typeof Symbol&&Symbol.observable||"@@observable",_2=function(){return Math.random().toString(36).substring(7).split("").join(".")},U6={INIT:"@@redux/INIT"+_2(),REPLACE:"@@redux/REPLACE"+_2(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_2()}};function oW(n){if("object"!=typeof n||null===n)return!1;for(var o=n;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(n)===o}function V6(n,o,s){var c;if("function"==typeof o&&"function"==typeof s||"function"==typeof s&&"function"==typeof arguments[3])throw new Error(kp(0));if("function"==typeof o&&void 0===s&&(s=o,o=void 0),void 0!==s){if("function"!=typeof s)throw new Error(kp(1));return s(V6)(n,o)}if("function"!=typeof n)throw new Error(kp(2));var h=n,g=o,f=[],A=f,_=!1;function E(){A===f&&(A=f.slice())}function S(){if(_)throw new Error(kp(3));return g}function I(H){if("function"!=typeof H)throw new Error(kp(4));if(_)throw new Error(kp(5));var Z=!0;return E(),A.push(H),function(){if(Z){if(_)throw new Error(kp(6));Z=!1,E();var le=A.indexOf(H);A.splice(le,1),f=null}}}function R(H){if(!oW(H))throw new Error(kp(7));if(void 0===H.type)throw new Error(kp(8));if(_)throw new Error(kp(9));try{_=!0,g=h(g,H)}finally{_=!1}for(var Z=f=A,le=0;le<Z.length;le++)(0,Z[le])();return H}function M(H){if("function"!=typeof H)throw new Error(kp(10));h=H,R({type:U6.REPLACE})}function Q(){var H,Z=I;return(H={subscribe:function(le){if("object"!=typeof le||null===le)throw new Error(kp(11));function ge(){le.next&&le.next(S())}return ge(),{unsubscribe:Z(ge)}}})[F6]=function(){return this},H}return R({type:U6.INIT}),(c={dispatch:R,subscribe:I,getState:S,replaceReducer:M})[F6]=Q,c}function j6(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function ir(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?j6(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):j6(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}!function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS"}(Ai||(Ai={}));class sW{constructor(o,s,c,h){J(this,"store",void 0),J(this,"reducer",void 0);const g={codec:o,audioCodec:s,mode:c,clientId:h,sessionId:null,p2pId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled"};this.reducer=function(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case Ai.SET_SESSION_ID:return ir(ir({},f),{},{sessionId:A.sessionId});case Ai.SET_P2P_ID:return ir(ir({},f),{},{p2pId:A.p2pId});case Ai.SET_UID:return ir(ir({},f),{},{uid:A.uid});case Ai.SET_PUB_ID:return ir(ir({},f),{},{pubId:A.pubId});case Ai.KEY_METRIC_CLIENT_CREATED:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{clientCreated:A.metric})});case Ai.KEY_METRIC_JOIN_START:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{joinStart:A.metric})});case Ai.AVOID_JOIN_START:return ir(ir({},f),{},{avoidJoinStart:A.avoidJoinStart});case Ai.KEY_METRIC_JOIN_END:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{joinEnd:A.metric})});case Ai.KEY_METRIC_REQUEST_AP_START:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{requestAPStart:A.metric})});case Ai.KEY_METRIC_REQUEST_AP_END:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{requestAPEnd:A.metric})});case Ai.KEY_METRIC_JOIN_GATEWAY_START:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{joinGatewayStart:A.metric})});case Ai.KEY_METRIC_JOIN_GATEWAY_END:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{joinGatewayEnd:A.metric})});case Ai.KEY_METRIC_PEER_CONNECTION_START:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{peerConnectionStart:A.metric})});case Ai.KEY_METRIC_PEER_CONNECTION_END:return ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{peerConnectionEnd:A.metric})});case Ai.KEY_METRIC_PUBLISH:{const _=f.keyMetrics.publish,E=_.findIndex(S=>S.trackId===A.metric.trackId);return-1!==E?(_[E]=ir(ir({},_[E]),A.metric),ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{publish:[..._]})})):ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{publish:[...f.keyMetrics.publish,A.metric]})})}case Ai.KEY_METRIC_SUBSCRIBE:{const _=f.keyMetrics.subscribe,E=_.findIndex(S=>S.userId===A.metric.userId&&S.type===A.metric.type);return-1!==E?(_[E]=ir(ir({},_[E]),A.metric),ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{subscribe:[..._]})})):ir(ir({},f),{},{keyMetrics:ir(ir({},f.keyMetrics),{},{subscribe:[...f.keyMetrics.subscribe,A.metric]})})}case Ai.SET_CLOUD_PROXY_SERVER_MODE:return f.cloudProxyServerMode=A.mode,f;case Ai.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof A.index?f.joinChannelServiceRecords=[...f.joinChannelServiceRecords,A.record]:(f.joinChannelServiceRecords[A.index]=ir(ir({},f.joinChannelServiceRecords[A.index]),A.record),f.joinChannelServiceRecords=[...f.joinChannelServiceRecords]),f;case Ai.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return f.joinChannelServiceRecords=[],f;case Ai.RESET_KEY_METRICS:return f.keyMetrics={publish:[],subscribe:[]},f;default:return f}},this.store=V6(this.reducer)}set sessionId(o){this.store.dispatch({type:Ai.SET_SESSION_ID,sessionId:o})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get audioCodec(){return this.store.getState().audioCodec}get clientId(){return this.store.getState().clientId}set p2pId(o){this.store.dispatch({type:Ai.SET_P2P_ID,p2pId:o})}get p2pId(){return this.store.getState().p2pId}set uid(o){this.store.dispatch({type:Ai.SET_UID,uid:o})}get uid(){return this.store.getState().uid}set pubId(o){this.store.dispatch({type:Ai.SET_PUB_ID,pubId:o})}get pubId(){return this.store.getState().pubId}set cloudProxyServerMode(o){this.store.dispatch({type:Ai.SET_CLOUD_PROXY_SERVER_MODE,mode:o})}get cloudProxyServerMode(){return this.store.getState().cloudProxyServerMode}clientCreated(){this.store.dispatch({type:Ai.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:Ai.KEY_METRIC_JOIN_START,metric:performance.now()})}get avoidJoinStart(){return this.store.getState().avoidJoinStart}set avoidJoinStart(o){this.store.dispatch({type:Ai.AVOID_JOIN_START,avoidJoinStart:o})}joinEnd(){this.store.dispatch({type:Ai.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:Ai.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:Ai.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:Ai.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:Ai.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:Ai.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:Ai.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(o,s,c,h){this.store.dispatch({type:Ai.KEY_METRIC_PUBLISH,metric:ir(ir({trackId:o,type:s},c&&{publishStart:c}),h&&{publishEnd:h})})}subscribe(o,s,c,h,g){this.store.dispatch({type:Ai.KEY_METRIC_SUBSCRIBE,metric:ir(ir(ir({userId:o,type:s},c&&{subscribeStart:c}),h&&{subscribeEnd:h}),g&&{firstFrame:g})})}massSubscribe(o,s,c,h){o.forEach(g=>{this.store.dispatch({type:Ai.KEY_METRIC_SUBSCRIBE,metric:ir(ir(ir({userId:g.userId,type:g.type},s&&{subscribeStart:s}),c&&{subscribeEnd:c}),h&&{firstFrame:h})})})}get keyMetrics(){return this.store.getState().keyMetrics}recordJoinChannelService(o,s){"gateway"===o.service&&Array.isArray(o.urls)&&(o.urls=o.urls.map(c=>c.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return"number"!=typeof s?(this.store.dispatch({type:Ai.RECORD_JOIN_CHANNEL_SERVICE,record:ir(ir({},o),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.store.getState().joinChannelServiceRecords.length-1):(s<0||s>=this.store.getState().joinChannelServiceRecords.length||this.store.dispatch({type:Ai.RECORD_JOIN_CHANNEL_SERVICE,record:o,index:s}),s)}catch{return 0}}resetJoinChannelServiceRecords(){this.store.dispatch({type:Ai.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.store.dispatch({type:Ai.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.store.getState().joinChannelServiceRecords}catch{return[]}}}let td;const U1=()=>void 0!==window.isSecureContext;class E4{constructor(o,s){J(this,"time",void 0),J(this,"sequence",void 0),J(this,"name",void 0),J(this,"elapse",void 0),this.name=o,this.time=performance.now(),this.sequence=WF[s].indexOf(o)}setElapse(o){this.elapse=o}}const aW=new Map;class cW{constructor(o,s){J(this,"records",[]),J(this,"_id",void 0),J(this,"_group",void 0),J(this,"_localTimeStamp",void 0),J(this,"_performanceTimeStamp",void 0),this._id=o,this._group=s,this._localTimeStamp=Date.now(),this._performanceTimeStamp=performance.now()}checkPoint(o){const s=new E4(o,this._group);-1===s.sequence&&se.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(s);const c=this.records.find(h=>h.sequence===s.sequence-1);c&&s.setElapse(s.time-c.time)}getRecord(o){return this.records.find(s=>s&&s.name===o)}resetRecords(){this.records.length=0}}function lW(n){let o={};e:for(;!I4(n);){let s=Sg(n);switch(s>>>3){case 0:break e;case 1:o.requestId=K6(n,Sg(n));break;case 2:o.requestType=Sg(n)>>>0;break;case 3:o.scorePorn=R4(n);break;case 4:o.scoreSexy=R4(n);break;case 5:o.scoreNeutral=R4(n);break;case 6:o.requestScene=Sg(n)>>>0;break;case 7:o.scene=Sg(n)>>>0;break;default:S4(n,7&s)}}return o}function DL(n,o){let s=n.service;void 0!==s&&(yi(o,8),yi(o,s));let c=n.vendor;void 0!==c&&(yi(o,16),yi(o,c));let h=n.token;void 0!==h&&(yi(o,26),Pp(o,h));let g=n.callbackUrl;void 0!==g&&(yi(o,34),Pp(o,g))}function dW(n){let o=Sg(n),s=n.limit;return n.limit=n.offset+o,s}function S4(n,o){switch(o){case 0:for(;128&T4(n););break;case 2:C4(n,Sg(n));break;case 5:C4(n,4);break;case 1:C4(n,8);break;default:throw new Error("Unimplemented type: "+o)}}let Q6=new Float32Array(1);new Uint8Array(Q6.buffer);let kL=new Float64Array(1),ys=new Uint8Array(kL.buffer);function Vf(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let H6=[];function G6(){const n=H6.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function W6(n){H6.push(n)}function C4(n,o){if(n.offset+o>n.limit)throw new Error("Skip past limit");n.offset+=o}function I4(n){return n.offset>=n.limit}function _v(n,o){let s=n.bytes,c=n.offset,h=n.limit,g=c+o;if(g>s.length){let f=new Uint8Array(2*g);f.set(s),n.bytes=f}return n.offset=g,g>h&&(n.limit=g),c}function w4(n,o){let s=n.offset;if(s+o>n.limit)throw new Error("Read past limit");return n.offset+=o,s}function K6(n,o){let s=w4(n,o),c=String.fromCharCode,h=n.bytes,g="\ufffd",f="";for(let A=0;A<o;A++){let _,E,S,I,R=h[A+s];0==(128&R)?f+=c(R):192==(224&R)?A+1>=o?f+=g:(_=h[A+s+1],128!=(192&_)?f+=g:(I=(31&R)<<6|63&_,I<128?f+=g:(f+=c(I),A++))):224==(240&R)?A+2>=o?f+=g:(_=h[A+s+1],E=h[A+s+2],32896!=(49344&(_|E<<8))?f+=g:(I=(15&R)<<12|(63&_)<<6|63&E,I<2048||I>=55296&&I<=57343?f+=g:(f+=c(I),A+=2))):240==(248&R)?A+3>=o?f+=g:(_=h[A+s+1],E=h[A+s+2],S=h[A+s+3],8421504!=(12632256&(_|E<<8|S<<16))?f+=g:(I=(7&R)<<18|(63&_)<<12|(63&E)<<6|63&S,I<65536||I>1114111?f+=g:(I-=65536,f+=c(55296+(I>>10),56320+(1023&I)),A+=3))):f+=g}return f}function Pp(n,o){let s=o.length,c=0;for(let f=0;f<s;f++){let A=o.charCodeAt(f);A>=55296&&A<=56319&&f+1<s&&(A=(A<<10)+o.charCodeAt(++f)-56613888),c+=A<128?1:A<2048?2:A<65536?3:4}yi(n,c);let h=_v(n,c),g=n.bytes;for(let f=0;f<s;f++){let A=o.charCodeAt(f);A>=55296&&A<=56319&&f+1<s&&(A=(A<<10)+o.charCodeAt(++f)-56613888),A<128?g[h++]=A:(A<2048?g[h++]=A>>6&31|192:(A<65536?g[h++]=A>>12&15|224:(g[h++]=A>>18&7|240,g[h++]=A>>12&63|128),g[h++]=A>>6&63|128),g[h++]=63&A|128)}}function hW(n,o){let s=_v(n,o.limit),c=n.bytes,h=o.bytes;for(let g=0,f=o.limit;g<f;g++)c[g+s]=h[g]}function T4(n){return n.bytes[w4(n,1)]}function z6(n,o){let s=_v(n,1);n.bytes[s]=o}function R4(n){let o=w4(n,8),s=n.bytes;return ys[0]=s[o++],ys[1]=s[o++],ys[2]=s[o++],ys[3]=s[o++],ys[4]=s[o++],ys[5]=s[o++],ys[6]=s[o++],ys[7]=s[o++],kL[0]}function O4(n,o){let s=_v(n,8),c=n.bytes;kL[0]=o,c[s++]=ys[0],c[s++]=ys[1],c[s++]=ys[2],c[s++]=ys[3],c[s++]=ys[4],c[s++]=ys[5],c[s++]=ys[6],c[s++]=ys[7]}function Sg(n){let o,s=0,c=0;do{o=T4(n),s<32&&(c|=(127&o)<<s),s+=7}while(128&o);return c}function yi(n,o){for(o>>>=0;o>=128;)z6(n,127&o|128),o>>>=7;z6(n,o)}function jf(n,o){let s=o.low>>>0,c=(o.low>>>28|o.high<<4)>>>0,h=o.high>>>24,g=0===h?0===c?s<16384?s<128?1:2:s<1<<21?3:4:c<16384?c<128?5:6:c<1<<21?7:8:h<128?9:10,f=_v(n,g),A=n.bytes;switch(g){case 10:A[f+9]=h>>>7&1;case 9:A[f+8]=9!==g?128|h:127&h;case 8:A[f+7]=8!==g?c>>>21|128:c>>>21&127;case 7:A[f+6]=7!==g?c>>>14|128:c>>>14&127;case 6:A[f+5]=6!==g?c>>>7|128:c>>>7&127;case 5:A[f+4]=5!==g?128|c:127&c;case 4:A[f+3]=4!==g?s>>>21|128:s>>>21&127;case 3:A[f+2]=3!==g?s>>>14|128:s>>>14&127;case 2:A[f+1]=2!==g?s>>>7|128:s>>>7&127;case 1:A[f]=1!==g?128|s:127&s}}var D4={};Object.defineProperty(D4,"__esModule",{value:!0});var Y6=function(){function n(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return n.hashStr=function(o,s){return void 0===s&&(s=!1),this.onePassHasher.start().appendStr(o).end(s)},n.hashAsciiStr=function(o,s){return void 0===s&&(s=!1),this.onePassHasher.start().appendAsciiStr(o).end(s)},n._hex=function(o){var s,c,h,g,f=n.hexChars,A=n.hexOut;for(g=0;g<4;g+=1)for(c=8*g,s=o[g],h=0;h<8;h+=2)A[c+1+h]=f.charAt(15&s),A[c+0+h]=f.charAt(15&(s>>>=4)),s>>>=4;return A.join("")},n._md5cycle=function(o,s){var c=o[0],h=o[1],g=o[2],f=o[3];h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[0]-680876936|0)<<7|c>>>25)+h|0)&h|~c&g)+s[1]-389564586|0)<<12|f>>>20)+c|0)&c|~f&h)+s[2]+606105819|0)<<17|g>>>15)+f|0)&f|~g&c)+s[3]-1044525330|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[4]-176418897|0)<<7|c>>>25)+h|0)&h|~c&g)+s[5]+1200080426|0)<<12|f>>>20)+c|0)&c|~f&h)+s[6]-1473231341|0)<<17|g>>>15)+f|0)&f|~g&c)+s[7]-45705983|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[8]+1770035416|0)<<7|c>>>25)+h|0)&h|~c&g)+s[9]-1958414417|0)<<12|f>>>20)+c|0)&c|~f&h)+s[10]-42063|0)<<17|g>>>15)+f|0)&f|~g&c)+s[11]-1990404162|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&g|~h&f)+s[12]+1804603682|0)<<7|c>>>25)+h|0)&h|~c&g)+s[13]-40341101|0)<<12|f>>>20)+c|0)&c|~f&h)+s[14]-1502002290|0)<<17|g>>>15)+f|0)&f|~g&c)+s[15]+1236535329|0)<<22|h>>>10)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[1]-165796510|0)<<5|c>>>27)+h|0)&g|h&~g)+s[6]-1069501632|0)<<9|f>>>23)+c|0)&h|c&~h)+s[11]+643717713|0)<<14|g>>>18)+f|0)&c|f&~c)+s[0]-373897302|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[5]-701558691|0)<<5|c>>>27)+h|0)&g|h&~g)+s[10]+38016083|0)<<9|f>>>23)+c|0)&h|c&~h)+s[15]-660478335|0)<<14|g>>>18)+f|0)&c|f&~c)+s[4]-405537848|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[9]+568446438|0)<<5|c>>>27)+h|0)&g|h&~g)+s[14]-1019803690|0)<<9|f>>>23)+c|0)&h|c&~h)+s[3]-187363961|0)<<14|g>>>18)+f|0)&c|f&~c)+s[8]+1163531501|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h&f|g&~f)+s[13]-1444681467|0)<<5|c>>>27)+h|0)&g|h&~g)+s[2]-51403784|0)<<9|f>>>23)+c|0)&h|c&~h)+s[7]+1735328473|0)<<14|g>>>18)+f|0)&c|f&~c)+s[12]-1926607734|0)<<20|h>>>12)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[5]-378558|0)<<4|c>>>28)+h|0)^h^g)+s[8]-2022574463|0)<<11|f>>>21)+c|0)^c^h)+s[11]+1839030562|0)<<16|g>>>16)+f|0)^f^c)+s[14]-35309556|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[1]-1530992060|0)<<4|c>>>28)+h|0)^h^g)+s[4]+1272893353|0)<<11|f>>>21)+c|0)^c^h)+s[7]-155497632|0)<<16|g>>>16)+f|0)^f^c)+s[10]-1094730640|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[13]+681279174|0)<<4|c>>>28)+h|0)^h^g)+s[0]-358537222|0)<<11|f>>>21)+c|0)^c^h)+s[3]-722521979|0)<<16|g>>>16)+f|0)^f^c)+s[6]+76029189|0)<<23|h>>>9)+g|0,h=((h+=((g=((g+=((f=((f+=((c=((c+=(h^g^f)+s[9]-640364487|0)<<4|c>>>28)+h|0)^h^g)+s[12]-421815835|0)<<11|f>>>21)+c|0)^c^h)+s[15]+530742520|0)<<16|g>>>16)+f|0)^f^c)+s[2]-995338651|0)<<23|h>>>9)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[0]-198630844|0)<<6|c>>>26)+h|0)|~g))+s[7]+1126891415|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[14]-1416354905|0)<<15|g>>>17)+f|0)|~c))+s[5]-57434055|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[12]+1700485571|0)<<6|c>>>26)+h|0)|~g))+s[3]-1894986606|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[10]-1051523|0)<<15|g>>>17)+f|0)|~c))+s[1]-2054922799|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[8]+1873313359|0)<<6|c>>>26)+h|0)|~g))+s[15]-30611744|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[6]-1560198380|0)<<15|g>>>17)+f|0)|~c))+s[13]+1309151649|0)<<21|h>>>11)+g|0,h=((h+=((f=((f+=(h^((c=((c+=(g^(h|~f))+s[4]-145523070|0)<<6|c>>>26)+h|0)|~g))+s[11]-1120210379|0)<<10|f>>>22)+c|0)^((g=((g+=(c^(f|~h))+s[2]+718787259|0)<<15|g>>>17)+f|0)|~c))+s[9]-343485551|0)<<21|h>>>11)+g|0,o[0]=c+o[0]|0,o[1]=h+o[1]|0,o[2]=g+o[2]|0,o[3]=f+o[3]|0},n.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this},n.prototype.appendStr=function(o){var s,c,h=this._buffer8,g=this._buffer32,f=this._bufferLength;for(c=0;c<o.length;c+=1){if((s=o.charCodeAt(c))<128)h[f++]=s;else if(s<2048)h[f++]=192+(s>>>6),h[f++]=63&s|128;else if(s<55296||s>56319)h[f++]=224+(s>>>12),h[f++]=s>>>6&63|128,h[f++]=63&s|128;else{if((s=1024*(s-55296)+(o.charCodeAt(++c)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");h[f++]=240+(s>>>18),h[f++]=s>>>12&63|128,h[f++]=s>>>6&63|128,h[f++]=63&s|128}f>=64&&(this._dataLength+=64,n._md5cycle(this._state,g),f-=64,g[0]=g[16])}return this._bufferLength=f,this},n.prototype.appendAsciiStr=function(o){for(var s,c=this._buffer8,h=this._buffer32,g=this._bufferLength,f=0;;){for(s=Math.min(o.length-f,64-g);s--;)c[g++]=o.charCodeAt(f++);if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.appendByteArray=function(o){for(var s,c=this._buffer8,h=this._buffer32,g=this._bufferLength,f=0;;){for(s=Math.min(o.length-f,64-g);s--;)c[g++]=o[f++];if(g<64)break;this._dataLength+=64,n._md5cycle(this._state,h),g=0}return this._bufferLength=g,this},n.prototype.getState=function(){var o=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[o[0],o[1],o[2],o[3]]}},n.prototype.setState=function(o){var s,c=o.buffer,h=o.state,g=this._state;for(this._dataLength=o.length,this._bufferLength=o.buflen,g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],s=0;s<c.length;s+=1)this._buffer8[s]=c.charCodeAt(s)},n.prototype.end=function(o){void 0===o&&(o=!1);var s=this._bufferLength,c=this._buffer8,h=this._buffer32,g=1+(s>>2);this._dataLength+=s;var f=8*this._dataLength;if(c[s]=128,c[s+1]=c[s+2]=c[s+3]=0,h.set(n.buffer32Identity.subarray(g),g),s>55&&(n._md5cycle(this._state,h),h.set(n.buffer32Identity)),f<=4294967295)h[14]=f;else{var A=f.toString(16).match(/(.*?)(.{0,8})$/);if(null===A)return;var _=parseInt(A[2],16),E=parseInt(A[1],16)||0;h[14]=_,h[15]=E}return n._md5cycle(this._state,h),o?this._state:n._hex(this._state)},n.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),n.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.hexChars="0123456789abcdef",n.hexOut=[],n.onePassHasher=new n,n}(),q6=D4.Md5=Y6;if("5d41402abc4b2a76b9719d911017c592"!==Y6.hashStr("hello"))throw new Error("Md5 self test failed.");const pW=function(){var n=F(function*(o,s,c){return yield(h=F(function*(g,f,A){const E=new Uint8Array(q6.hashStr(""+f+A,!0).buffer).slice(0,16),S=E.slice(0,12),I=yield window.crypto.subtle.importKey("raw",E,"AES-GCM",!0,["encrypt"]);return new Uint8Array(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:S},I,g))}),function(g,f,A){return h.apply(this,arguments)})(o.buffer,s,c);var h});return function(s,c,h){return n.apply(this,arguments)}}();function J6(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}const fW=new Map([["moderation",1],["supervise",2],["all",3]]);class PL extends st{get connectionState(){return this._connectionState}set connectionState(o){if(this._connectionState===o)return;const s=this._connectionState;this._connectionState=o,this.emit(os.CONNECTION_STATE_CHANGE,s,o)}get quality(){return this._quality}set quality(o){this._quality=o>1?1:o<.1?.1:o,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(o){super(),J(this,"name","AgoraRTCVideoContentInspect"),J(this,"_connectionState",hl.CONNECTING),J(this,"_innerConnectionState",void 0),J(this,"sequence",0),J(this,"inspectStartTime",void 0),J(this,"workerManagerConnection",void 0),J(this,"workerConnection",void 0),J(this,"workerMessageLengthLimit",void 0),J(this,"inspectIntervalMinimum",void 0),J(this,"qualityRatio",void 0),J(this,"_connectInfo",void 0),J(this,"_cancelTokenSource",tt.CancelToken.source()),J(this,"_retryConfig",void 0),J(this,"wmSequence",0),J(this,"inspectInterval",void 0),J(this,"inspectTimer",null),J(this,"ossFilePrefix",void 0),J(this,"extraInfo",void 0),J(this,"inspectType","all"),J(this,"_quality",1),J(this,"qualityTimer",null),J(this,"_inspectId",void 0),J(this,"_needWorkUrlOnly",!1),J(this,"inspectImage",()=>{if(this.connectionState!==hl.CONNECTED)throw new ye(pe.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{if(this.connectionState!==hl.CONNECTED)return se.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState),void En("debug",this,"Inspect State is not connected , ".concat(this.connectionState));this.requestToInspectImage()},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=vs(5,"inspect-"),this.workerMessageLengthLimit=Qt("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Qt("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Qt("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=o.interval,this.ossFilePrefix=o.ossFilePrefix,this.extraInfo=o.extraInfo,this.inspectType=o.inspectType||"all",this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new rS("worker-manager-"+this._inspectId,wn),this.on(os.STATE_CHANGE,(s,c)=>{this._innerConnectionState=s,se.debug("[".concat(this._inspectId,"] Inspect operation :").concat(zl[s]," ").concat(c||"")),js("debug",["Inspect",this._inspectId],os.STATE_CHANGE,"".concat(zl[s]," ").concat(c||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new rS("worker-"+this._inspectId,wn),this.handleWorkerEvents()}init(o,s){var c=this;return F(function*(){c.emit(os.STATE_CHANGE,zl.CONNECT_AP),c._connectInfo=o;const h=c._cancelTokenSource.token;return c._retryConfig=s,new Qn((g,f)=>{c.on(os.CONNECTION_STATE_CHANGE,(A,_)=>{_===hl.CONNECTED&&g()}),c.requestAP(o,h,s).then(A=>{c.connectWorkerManager(A)}).catch(A=>{f(A)})})})()}requestAP(o,s,c){var h=this;return F(function*(){const g=Qt("WEBCS_DOMAIN").map(_=>"https://".concat(_,"/api/v1")),f=yield function(_,E,S,I){let{appId:R,areaCode:M,cname:Q,sid:H,token:Z,uid:le}=E;NU++;const ge="image_moderation_api",Se={service_name:ge,json_body:JSON.stringify({appId:R,areaCode:M,cname:Q,command:"allocateEdge",requestId:NU,seq:NU,sid:H,token:Z,ts:Date.now(),uid:le+""})};let Ne,nt,Nt=_[0];return Jo(F(function*(){Ne=Date.now();const Vt=yield Qh(Nt,{data:Se,cancelToken:S,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(nt=Date.now()-Ne,0!==Vt.code){const hn=new ye(pe.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Vt.code,{retry:!0,responseTime:nt});throw se.error(hn.toString()),zt("error",["AjaxAPI"],"requestImageInspectAP",void 0,hn.toString()),hn}const Dt=JSON.parse(Vt.json_body);if(200!==Dt.code){const hn=new ye(pe.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Dt.code,", reason: ").concat(Dt.reason),{code:Dt.code,responseTime:nt});throw se.error(hn.toString()),zt("error",["AjaxAPI"],"requestImageInspectAP",void 0,hn.toString()),hn}if(!Dt.servers||!Array.isArray(Dt.servers)||0===Dt.servers.length){const hn=new ye(pe.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Dt.code,responseTime:nt});throw se.error(hn.toString()),zt("error",["AjaxAPI"],"requestImageInspectAP",void 0,hn.toString()),hn}const In=Qt("VIDEO_INSPECT_WORKER_MANAGER_HOST"),dn=Qt("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Dt.servers.map(hn=>{let{address:wt,wss:We}=hn;if(wt&&We)return"wss://".concat(wt.replace(/\./g,"-"),".").concat(In,":").concat(dn||We)}).filter(hn=>!!hn),workerToken:Dt.workerToken,vid:Dt.vid,responseTime:nt}}),(Vt,Dt)=>(Jt.apworkerEvent(H,{success:!0,sc:200,serviceName:ge,responseDetail:JSON.stringify(Vt.addressList),firstSuccess:0===Dt,responseTime:nt,serverIp:_[Dt%_.length]}),!1),(Vt,Dt)=>(Jt.apworkerEvent(H,{success:!1,sc:Vt.data&&Vt.data.code||200,serviceName:ge,responseTime:nt,serverIp:_[Dt%_.length]}),!!(Vt.code!==pe.OPERATION_ABORTED&&Vt.code!==pe.UNEXPECTED_RESPONSE||Vt.data&&Vt.data.retry)&&(Nt=_[(Dt+1)%_.length],!0)),I)}(g,o,s,c);h.emit(os.STATE_CHANGE,zl.AP_CONNECTED);const{addressList:A}=f;return h.wmSequence++,A})()}connectWorkerManager(o){var s=arguments,c=this;return F(function*(){c._needWorkUrlOnly=s.length>1&&void 0!==s[1]&&s[1],c.emit(os.STATE_CHANGE,zl.CONNECT_WORKER_MANAGER),yield c.workerManagerConnection.init(o,1e4)})()}connectWorker(o){var s=this;return F(function*(){yield s.workerConnection.init([o])})()}handleWorkerManagerEvents(){var o=this;this.workerManagerConnection.on(Pr.CONNECTED,F(function*(){o.emit(os.STATE_CHANGE,zl.WORKER_MANAGER_CONNECTED,o.workerManagerConnection.url),o.workerManagerConnection.sendMessage({appId:o._connectInfo.appId,cname:o._connectInfo.cname,uid:o._connectInfo.uid+"",sdkVersion:"4.12.1",sid:o._connectInfo.sid,seq:o.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(Pr.CLOSED,()=>{this._innerConnectionState<zl.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker")),js("debug",["Inspect",this._inspectId],"workerManagerConnectionClosed"))}),this.workerManagerConnection.on(Pr.FAILED,()=>{this._innerConnectionState<zl.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker")),js("debug",["Inspect",this._inspectId],"workerManagerConnectionFailed"))}),this.workerManagerConnection.on(Pr.RECONNECTING,()=>{this._innerConnectionState<zl.GET_WORKER_MANAGER_RESPONSE&&(se.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker")),js("debug",["Inspect",this._inspectId],"workerManagerConnectionReconnecting"))}),this.workerManagerConnection.on(Pr.ON_MESSAGE,function(){var s=F(function*(c){o.emit(os.STATE_CHANGE,zl.GET_WORKER_MANAGER_RESPONSE);const h=o.workerManagerConnection.url;o.workerManagerConnection.close();const g=JSON.parse(c.data);if(200!==g.code)throw se.error("[".concat(o._inspectId,"] Unexpected code ").concat(g.code," from worker manager")),En("error",o,"Unexpected code ".concat(g.code," from worker manager")),new ye(pe.UNEXPECTED_RESPONSE,"response code of worker is unexpected",g);if(!(g.serverResponse&&g.serverResponse.portWss&&h))throw se.error("[".concat(o._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(g))),En("error",o,"Unexpected content from worker manager : "+JSON.stringify(g)),new ye(pe.UNEXPECTED_RESPONSE,"response content of worker is unexpected",g);{const f=Qt("VIDEO_INSPECT_WORKER_PORT")||g.serverResponse.portWss,A=h.replace(/:\d+\/?$/,":".concat(f));o.emit(os.STATE_CHANGE,zl.CONNECT_WORKER,A),o._needWorkUrlOnly?o.emit(os.REQUEST_NEW_WORKER_URL,A):yield o.connectWorker(A)}});return function(c){return s.apply(this,arguments)}}()),this.workerManagerConnection.on(Pr.WILL_RECONNECT,(s,c)=>{c(s)}),this.workerManagerConnection.on(Pr.REQUEST_NEW_URLS,(s,c)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s).catch(c)})}handleWorkerEvents(){var o=this;this.workerConnection.on(Pr.CONNECTED,F(function*(){o.emit(os.STATE_CHANGE,zl.WORKER_CONNECTED,o.workerConnection.url),o.connectionState=hl.CONNECTED})),this.workerConnection.on(Pr.ON_MESSAGE,function(){var s=F(function*(c){if(c.data instanceof ArrayBuffer){const g=function uW(n){return function(s){let c={};e:for(;!I4(s);){let h=Sg(s);switch(h>>>3){case 0:break e;case 1:c.code=Sg(s);break;case 2:c.msg=K6(s,Sg(s));break;case 3:{let g=dW(s);c.data=lW(s),s.limit=g;break}default:S4(s,7&h)}}return c}({bytes:o=n,offset:0,limit:o.length});var o}(new Uint8Array(c.data));if(Qt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&se.debug("[".concat(o._inspectId,"] Response message for worker of inspect content "),JSON.stringify(g)),200===g.code){if("supervise"===o.inspectType)return void o.emit(os.INSPECT_RESULT,void 0,void 0);if(g.data&&g.data.scorePorn&&g.data.scoreSexy&&g.data.scoreNeutral){var h;const f={porn:g.data.scorePorn,sexy:g.data.scoreSexy,neutral:g.data.scoreNeutral},A=e_(h=Object.keys(f)).call(h,(E,S)=>f[E]>f[S]?E:S,"porn"),_=Object.keys(f).find(E=>E===A);o.emit(os.INSPECT_RESULT,_)}else o.emit(os.INSPECT_RESULT,void 0,new ye(pe.UNEXPECTED_RESPONSE,g.code+"","There is an unexpected data on message"))}else o.emit(os.INSPECT_RESULT,void 0,new ye(pe.UNEXPECTED_RESPONSE,g.code+"",g.msg))}else se.error("[".concat(o._inspectId,"] Unexpected message type from worker")),En("error",o,"Unexpected message type from worker"),o.emit(os.INSPECT_RESULT,void 0,new ye(pe.UNEXPECTED_RESPONSE,"invalid worker message type"))});return function(c){return s.apply(this,arguments)}}()),this.workerConnection.on(Pr.CLOSED,()=>{this.connectionState=hl.CLOSED}),this.workerConnection.on(Pr.FAILED,()=>{this.connectionState=hl.CLOSED}),this.workerConnection.on(Pr.RECONNECTING,()=>{this.connectionState=this.connectionState===hl.CONNECTED?hl.RECONNECTING:hl.CONNECTING}),this.workerConnection.on(Pr.WILL_RECONNECT,(s,c)=>{"recover"===s&&c(s),c("tryNext")}),this.workerConnection.on(Pr.REQUEST_NEW_URLS,(s,c)=>{this.workerManagerConnection.close(),this.once(os.REQUEST_NEW_WORKER_URL,h=>{s([h])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(h=>{this.connectWorkerManager(h,!0)}).catch(h=>{c(h)})})}static intToLong(o){return{low:o|=0,high:o>>31,unsigned:o>=0}}requestToInspectImage(){var o=this;return F(function*(){o.sequence++;const s=Ly(o,os.CLIENT_LOCAL_VIDEO_TRACK),c={appId:o._connectInfo.appId,cname:o._connectInfo.cname,cid:o._connectInfo.cid,sid:o._connectInfo.sid,uid:o._connectInfo.uid,vid:o._connectInfo.vid};if(s){if(!s.isPlaying)return void o.emit(os.INSPECT_RESULT,void 0,new ye(pe.INVALID_OPERATION,"Only the track being played can be inspected"));const h=yield o.generateRequestData(s,c);o.workerConnection.sendMessage(h,!0,!0)}else o.emit(os.INSPECT_RESULT,void 0,new ye(pe.INVALID_OPERATION,"Only the track being published can be inspected"))})()}generateRequestData(o,s){var c=this;return F(function*(){let{appId:h,cname:g,cid:f,vid:A,sid:_,uid:E}=s;const S=Date.now(),I=yield o.getCurrentFrameImage("image/jpeg",c.quality),R=yield pW(I,h,g),M=c.sequence+"-"+f+"-"+E+"-"+S+"-"+vs(12,""),Q={appId:h,cid:f,cname:g,deviceId:"",elapse:PL.intToLong(Number(S-c.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:I.height,width:I.width,jpg:R,networkType:6,osType:7,requestId:M,sdkVersion:"4.12.1",sequence:c.sequence,sid:_,timestamp:PL.intToLong(S),uid:E,vid:A,service:fW.get(c.inspectType)||3,callbackData:c.extraInfo,ossFilePrefix:c.ossFilePrefix};void 0===c.extraInfo&&delete Q.callbackData,void 0===c.ossFilePrefix&&delete Q.ossFilePrefix;const H=function b4(n){let o=G6();return function(s,c){let h=s.appId;void 0!==h&&(yi(c,10),Pp(c,h));let g=s.cid;void 0!==g&&(yi(c,16),yi(c,g));let f=s.cname;void 0!==f&&(yi(c,26),Pp(c,f));let A=s.deviceId;void 0!==A&&(yi(c,34),Pp(c,A));let _=s.elapse;void 0!==_&&(yi(c,40),jf(c,_));let E=s.fileSize;void 0!==E&&(yi(c,48),jf(c,Vf(E)));let S=s.height;void 0!==S&&(yi(c,56),jf(c,Vf(S)));let I=s.jpg;void 0!==I&&(yi(c,66),yi(c,I.length),function(bn,Je){let dt=_v(bn,Je.length);bn.bytes.set(Je,dt)}(c,I));let R=s.networkType;void 0!==R&&(yi(c,72),jf(c,Vf(R)));let M=s.osType;void 0!==M&&(yi(c,80),jf(c,Vf(M)));let Q=s.requestId;void 0!==Q&&(yi(c,90),Pp(c,Q));let H=s.sdkVersion;void 0!==H&&(yi(c,98),Pp(c,H));let Z=s.sequence;void 0!==Z&&(yi(c,104),jf(c,Vf(Z)));let le=s.sid;void 0!==le&&(yi(c,114),Pp(c,le));let ge=s.timestamp;void 0!==ge&&(yi(c,120),jf(c,ge));let Se=s.uid;void 0!==Se&&(yi(c,128),yi(c,Se));let Ne=s.vid;void 0!==Ne&&(yi(c,136),yi(c,Ne));let nt=s.width;void 0!==nt&&(yi(c,144),jf(c,Vf(nt)));let Nt=s.service;void 0!==Nt&&(yi(c,152),yi(c,Nt));let Vt=s.callbackData;void 0!==Vt&&(yi(c,162),Pp(c,Vt));let Dt=s.jpgEncryption;void 0!==Dt&&(yi(c,168),yi(c,Dt));let In=s.requestType;void 0!==In&&(yi(c,176),yi(c,In));let dn=s.scorePorn;void 0!==dn&&(yi(c,185),O4(c,dn));let hn=s.scoreSexy;void 0!==hn&&(yi(c,193),O4(c,hn));let wt=s.scoreNeutral;void 0!==wt&&(yi(c,201),O4(c,wt));let We=s.scene;void 0!==We&&(yi(c,208),yi(c,We));let ct=s.ossFilePrefix;void 0!==ct&&(yi(c,218),Pp(c,ct));let bt=s.serviceVendor;if(void 0!==bt)for(let bn of bt){yi(c,226);let Je=G6();DL(bn,Je),yi(c,Je.limit),hW(c,Je),W6(Je)}}(n,o),function(s){let c=s.bytes,h=s.limit;return c.length===h?c:c.subarray(0,h)}(o)}(Q);if(H.byteLength<c.workerMessageLengthLimit){if(Qt("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const Z=function(le){for(var ge=1;ge<arguments.length;ge++){var Se=null!=arguments[ge]?arguments[ge]:{};ge%2?J6(Object(Se),!0).forEach(function(Ne){J(le,Ne,Se[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(Se)):J6(Object(Se)).forEach(function(Ne){Object.defineProperty(le,Ne,Object.getOwnPropertyDescriptor(Se,Ne))})}return le}({},Q);delete Z.jpg,se.debug("[".concat(c._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Z)),En("debug",c,"Request message for worker of inspect content ".concat(JSON.stringify(Z)))}return H}return c.quality=c.quality*c.qualityRatio,yield c.generateRequestData(o,{appId:h,cname:g,cid:f,vid:A,sid:_,uid:E})})()}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=tt.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=hl.CLOSED,this.emit(os.STATE_CHANGE,zl.CLOSED)}}var $6,X6,k4,NL,P4,Z6,mW,gW,_W,v2,vW,r;function t(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function e(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?t(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}let a=($6=Qs("AgoraRTCClient","store.clientId"),X6=Ek({report:Jt}),k4=Ek(),NL=Ek({report:Jt}),P4=bk(),Z6=Ek({report:Jt}),mW=bk({report:Jt}),gW=bk({report:Jt}),_W=bk({report:Jt}),v2=Ek({reportResult:!0,report:Jt}),$6((rr((r=class extends st{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}constructor(n){var o;let s;if(super(),o=this,J(this,"store",void 0),J(this,"_uid",void 0),J(this,"_channelName",void 0),J(this,"_uintUid",void 0),J(this,"_users",[]),J(this,"_codec",void 0),J(this,"_mode",void 0),J(this,"_config",void 0),J(this,"_clientId",void 0),J(this,"_appId",void 0),J(this,"_sessionId",null),J(this,"_key",void 0),J(this,"_joinInfo",void 0),J(this,"_gateway",void 0),J(this,"_statsCollector",void 0),J(this,"_configDistribute",void 0),J(this,"_leaveMutex",new Ru("client-leave")),J(this,"_publishMutex",new Ru("client-publish")),J(this,"_renewTokenMutex",new Ru("client-renewtoken")),J(this,"_subscribeMutex",new Ru("client-subscribe")),J(this,"_encryptionMode","none"),J(this,"_encryptionSecret",null),J(this,"_encryptionSalt",null),J(this,"_proxyServer",void 0),J(this,"_performanceRecorder",void 0),J(this,"_turnServer",{servers:[],mode:"auto"}),J(this,"_cloudProxyServerMode","disabled"),J(this,"_isDualStreamEnabled",!1),J(this,"_defaultStreamFallbackType",void 0),J(this,"_lowStreamParameter",void 0),J(this,"_streamFallbackTypeCacheMap",new Map),J(this,"_remoteStreamTypeCacheMap",new Map),J(this,"_axiosCancelSource",tt.CancelToken.source()),J(this,"_audioVolumeIndicationInterval",void 0),J(this,"_networkQualityInterval",void 0),J(this,"_userOfflineTimeout",void 0),J(this,"_streamRemovedTimeout",void 0),J(this,"_injectStreamingClient",void 0),J(this,"_liveTranscodeStreamingClient",void 0),J(this,"_liveRawStreamingClient",void 0),J(this,"_channelMediaRelayClient",void 0),J(this,"_networkQualitySensitivity","normal"),J(this,"_p2pChannel",void 0),J(this,"_useLocalAccessPoint",!1),J(this,"_joinAndNotLeaveYet",!1),J(this,"_numberOfJoinCount",0),J(this,"_remoteDefaultVideoStreamType",void 0),J(this,"_inspect",void 0),J(this,"_handleLocalTrackEnable",(c,h,g)=>{this.publish(c,!1).then(h).catch(g)}),J(this,"_handleLocalTrackDisable",(c,h,g)=>{this.unpublish(c).then(h).catch(g)}),J(this,"_handleUserOnline",c=>{this.isStringUID&&"string"!=typeof c.uid&&(se.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID")),En("error",this,"StringUID is Mixed with UintUID"));const h=this._users.find(g=>g.uid===c.uid);if(h)h._trust_in_room_=!0;else{const g=new oL(c.uid,c.uint_id||c.uid);this._users.push(g),se.debug("[".concat(this._clientId,"] user online"),c.uid),fs("info",this,"user-joined",{uid:c.uid}),this.emit(yr.USER_JOINED,g)}}),J(this,"_handleUserOffline",c=>{const h=this._users.find(g=>g.uid===c.uid);h&&(this._handleRemoveStream(c),eU(this._users,h),this._remoteStreamTypeCacheMap.delete(h.uid),this._streamFallbackTypeCacheMap.delete(h.uid),se.debug("[".concat(this._clientId,"] user offline"),c.uid,"reason:",c.reason),fs("info",this,"user-left",{reason:c.reason,uid:c.uid}),this.emit(yr.USER_LEAVED,h,c.reason))}),J(this,"_handleAddAudioOrVideoStream",(c,h,g,f,A,_,E)=>{const S=this._users.find(R=>R.uid===h);if(!S)return se.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)")),void Pi("error",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),"can not find target user!");se.debug("[".concat(this._clientId,"] stream added with uid ").concat(h,", type ").concat(c)),Pi("debug",["AgoraRTCGateway",this._clientId],"add_".concat(c,"_stream"),{uid:h,mediaType:c});const I="audio"===c?S.hasAudio:S.hasVideo;S._uintid||(S._uintid=A||h),"audio"===c?S._trust_audio_stream_added_state_=!0:S._trust_video_stream_added_state_=!0,"audio"===c?(S._audio_added_=!0,void 0!==g&&(S._audioSSRC=g),void 0!==f&&(S._cname=f),_&&(S._audioOrtc=_)):(S._video_added_=!0,void 0!==g&&(S._videoSSRC=g),void 0!==f&&(S._cname=f),void 0!==E&&(S._rtxSsrcId=E),_&&(S._videoOrtc=_)),("audio"===c?S.hasAudio:S.hasVideo)&&!I&&(se.info("[".concat(this._clientId,"] remote user ").concat(S.uid," published ").concat(c)),En("info",this,"remote user ".concat(S.uid," published ").concat(c)),fs("info",this,"user-published",{uid:S.uid,mediaType:c}),this.emit(yr.USER_PUBLISHED,S,c)),"video"===c?Jt.onGatewayStream(this._sessionId,Ha.ON_ADD_VIDEO_STREAM,Fo.ON_ADD_VIDEO_STREAM,{peer:A||h}):Jt.onGatewayStream(this._sessionId,Ha.ON_ADD_AUDIO_STREAM,Fo.ON_ADD_AUDIO_STREAM,{peer:A||h}),this._p2pChannel.remoteMediaSsrcChanged(S,c,g)&&this._p2pChannel.unsubscribe(S,c,!0).then(()=>{se.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(S.uid," after rejoin because SSRC id changed.")),this._subscribe(S,c,!0).catch(R=>{se.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),En("error",this,"resubscribe error: ".concat(R.toString()))})}),this._p2pChannel.hasPendingRemoteMedia(S,c)&&(se.debug("[".concat(this._clientId,"] resubscribe ").concat(c," for user ").concat(S.uid," after reconnect.")),this._subscribe(S,c,!0).catch(R=>{se.error("[".concat(this._clientId,"] resubscribe error"),R.toString()),En("error",this,"resubscribe error: ".concat(R.toString()))}))}),J(this,"_handleRemoveStream",c=>{const h=this._users.find(f=>f.uid===c.uid);if(!h)return se.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)")),void Pi("warning",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid,info:"can not find target user!"});se.debug("[".concat(this._clientId,"] stream removed with uid ").concat(c.uid)),Pi("debug",["AgoraRTCGateway",this._clientId],"remove_stream",{uid:c.uid});let g=()=>{};h.hasAudio&&h.hasVideo?g=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),fs("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(yr.USER_UNPUBLISHED,h,"audio"),se.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),fs("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(yr.USER_UNPUBLISHED,h,"video")}:h.hasVideo?g=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished video track")),fs("info",this,"user-unpublished",{uid:h.uid,mediaType:"video"}),this.emit(yr.USER_UNPUBLISHED,h,"video")}:h.hasAudio&&(g=()=>{se.info("[".concat(this._clientId,"] remote user ").concat(h.uid," unpublished audio track")),fs("info",this,"user-unpublished",{uid:h.uid,mediaType:"audio"}),this.emit(yr.USER_UNPUBLISHED,h,"audio")}),h._trust_audio_stream_added_state_=!0,h._trust_video_stream_added_state_=!0,h._audio_added_=!1,h._video_added_=!1,this._p2pChannel.unsubscribe(h).then(f=>{if(f)return this._gateway.unsubscribe(f,h.uid)}),h._audioSSRC=void 0,h._videoSSRC=void 0,h._audioOrtc=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0,Jt.onGatewayStream(this._sessionId,Ha.ON_REMOVE_STREAM,Fo.ON_REMOVE_STREAM,{peer:c.uint_id||c.uid}),g()}),J(this,"_handleSetStreamLocalEnable",(c,h,g)=>{const f=this._users.find(E=>E.uid===h);if(!f)return se.error("[".concat(this._clientId,"] can not find target user!(disable_local)")),void Pi("error",this,"disable_local_video","can not find target user!(disable_local)");se.debug("[".concat(this._clientId,"] local ").concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h)),Pi("debug",this,"disable_local_video","local ".concat(c," ").concat(g?"enabled":"disabled"," with uid ").concat(h));const A="audio"===c?f.hasAudio:f.hasVideo;if("audio"===c){f._trust_audio_enabled_state_=!0;const E=f._audio_enabled_;if(f._audio_enabled_=g,f._audio_enabled_===E)return;{const S=f._audio_enabled_?"enable-local-audio":"disable-local-audio";se.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(h,", msg: ").concat(S)),nr("debug",this,"user-info-updated",{uid:h,msg:S}),this.emit(yr.USER_INFO_UPDATED,h,S)}}else{f._trust_video_enabled_state_=!0;const E=f._video_enabled_;if(f._video_enabled_=g,f._video_enabled_===E)return;{const S=f._video_enabled_?"enable-local-video":"disable-local-video";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(h,", msg: ").concat(S)),nr("debug",this,"user-info-updated",{uid:h,msg:S}),this.emit(yr.USER_INFO_UPDATED,h,S)}}const _="audio"===c?f.hasAudio:f.hasVideo;return A!==_?!A&&_?(se.info("[".concat(this._clientId,"] remote user ").concat(h," published ").concat(c)),fs("info",this,"user-published",{uid:h,mediaType:c}),void this.emit(yr.USER_PUBLISHED,f,c)):("video"===c&&f._videoTrack&&f._videoTrack._destroy(),this._p2pChannel.muteRemote(f,c),se.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished ").concat(c)),fs("info",this,"user-unpublished",{uid:h,mediaType:c}),void this.emit(yr.USER_UNPUBLISHED,f,c)):void 0}),J(this,"_handleMuteStream",(c,h,g)=>{se.debug("[".concat(this._clientId,"] receive mute message"),c,h,g),Pi("debug",this,"mute_".concat(h),g);const f=this._users.find(E=>E.uid===c);if(!f)return se.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(c)),void Pi("warning",this,"mute_".concat(h),"can not find remote user, ignore mute event, uid: ".concat(c));const A="audio"===h?f.hasAudio:f.hasVideo;if("audio"===h){f._trust_audio_mute_state_=!0;const E=f._audio_muted_;if(f._audio_muted_=g,f._audio_muted_===E)return;{const S=f._audio_muted_?"mute-audio":"unmute-audio";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(S)),nr("debug",this,"user-info-updated",{uid:c,msg:S}),this.emit(yr.USER_INFO_UPDATED,c,S)}}else{f._trust_video_mute_state_=!0;const E=f._video_muted_;if(f._video_muted_=g,f._video_muted_===E)return;{const S=f._video_muted_?"mute-video":"unmute-video";se.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(c,", msg: ").concat(S)),nr("debug",this,"user-info-updated",{uid:c,msg:S}),this.emit(yr.USER_INFO_UPDATED,c,S)}}const _="audio"===h?f.hasAudio:f.hasVideo;if(A!==_){if(!A&&_)return("audio"===h?f._audioSSRC:f._videoSSRC)?(se.info("[".concat(this._clientId,"] remote user ").concat(c," published ").concat(h)),fs("info",this,"user-published",{uid:f.uid,mediaType:h}),void this.emit(yr.USER_PUBLISHED,f,h)):void se.warning("[".concat(this._clientId,"] remote user ").concat(c," receive ").concat(h," unmute message  before add stream message, ").concat(h," SSRC doesn't exist yet."));"video"===h&&f._videoTrack&&f._videoTrack._destroy(),this._p2pChannel.muteRemote(f,h),se.info("[".concat(this._clientId,"] remote user ").concat(c," unpublished ").concat(h)),fs("info",this,"user-unpublished",{uid:c,mediaType:h}),this.emit(yr.USER_UNPUBLISHED,f,h)}}),J(this,"_handleP2PLost",function(){var c=F(function*(h){if(se.debug("[".concat(o._clientId,"] receive p2p lost"),h),Pi("debug",o,"p2p_lost",h),parseInt(h.p2pid,10)!==o.store.p2pId)return se.warning("P2PLost stream not found",h),void Pi("warning",o,"p2p_lost","P2PLost stream not found, ".concat(h));yield o._p2pChannel.requestReconnect()});return function(h){return c.apply(this,arguments)}}()),J(this,"_handleTokenWillExpire",()=>{se.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),Pi("debug",this,"token_privilege_will_expire"),this.emit(yr.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),J(this,"_handleBeforeUnload",c=>{"beforeunload"===c.type&&void 0!==c.returnValue&&""!==c.returnValue||(this.leave(),se.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")),js("info",["window",this.store.clientId],Ql()?"beforeunload":"pagehide"))}),J(this,"_handleUpdateNetworkQuality",()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(yr.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const c={downlinkNetworkQuality:0,uplinkNetworkQuality:0};c.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),c.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(yr.NETWORK_QUALITY,c)}),this._codec=n.codec,this._mode=n.mode,this._clientId=vs(5,"client-"),this.store=new sW(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),se.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Wl," build: ").concat(OF,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),nr("info",this,"constructor",{version:Wl,build:OF,mode:this._mode,codec:this._codec}),this._performanceRecorder=function(c,h){const g=new cW(c,"join");return aW.set(c,g),g}(this._clientId),n.clientRoleOptions)try{b7(n.clientRoleOptions),s=Object.assign({},n.clientRoleOptions)}catch(c){se.warning("[".concat(this._clientId,"] ").concat(c.toString())),En("warning",this,c.toString())}this._statsCollector=new eS(this.store),this._statsCollector.onStatsException=(c,h,g)=>{se.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(c,", msg: ").concat(h,", uid: ").concat(g)),fs("debug",this,yr.EXCEPTION,{code:c,message:h,uid:g}),this.emit(yr.EXCEPTION,{code:c,msg:h,uid:g})},this._statsCollector.onUploadPublishDuration=(c,h,g,f)=>{const A=this._users.find(_=>_.uid===c);A&&Jt.peerPublishStatus(this._sessionId,{subscribeElapse:f,audioPublishDuration:h,videoPublishDuration:g,peer:A._uintid})},this._gateway=new kz(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:n.websocketRetryConfig||wn,httpRetryConfig:n.httpRetryConfig||wn,forceWaitGatewayResponse:void 0===n.forceWaitGatewayResponse||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:s}),this._config=n,this._configDistribute=new QH,this._p2pChannel=new B6(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}join(n,o,s,c,h){var g=this;return F(function*(){const f=++g._numberOfJoinCount;g._performanceRecorder.checkPoint("startJoin"),g.store.joinStart(),c&&(g.store.uid=c);const A="HTTPS"===(td||td||(td=(window.location.protocol.split(":")[0]||"").toUpperCase(),td)),_=U1()?window.isSecureContext:"Browser Not Support";if(!U1()&&!A||!window.isSecureContext){const Q="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";se.warning(Q),zt("warning",g,Q)}const E=kQ();"DISCONNECTED"===g.connectionState&&(g.store.avoidJoinStart=Math.round(Date.now()),se.debug("[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)),zt("debug",g,"join",void 0,"[".concat(g._clientId,"] set avoidJoinStart to ").concat(g.store.avoidJoinStart)));const S=Jt.reportApiInvoke(E,{name:pr.JOIN,options:[n,o,s,c],states:{isHttps:A,isSecureContext:_},tag:cr.TRACER});Jt.setAppId(n);try{if(!s&&null!==s)throw new ye(pe.INVALID_PARAMS,"Invalid token: ".concat(s,". If you don not use token, set it to null"));s&&Jc(s,"token",1,2047),Jc(n,"appid",1,2047),OM(o),c&&DM(c),h&&Jc(h,"optionalInfo",1,2047)}catch(Q){throw S.onError(Q),Q}if(se.info("[".concat(g._clientId,"] start join channel ").concat(o,", join number: ").concat(f)),nr("info",g,"join",{channel:o}),g._leaveMutex.isLocked&&(se.debug("[".concat(g._clientId,"] join: waiting leave operation")),En("debug",g,"join: waiting leave operation"),(yield g._leaveMutex.lock())(),se.debug("[".concat(g._clientId,"] join: continue")),En("debug",g,"join: continue")),g._joinAndNotLeaveYet=!0,"DISCONNECTED"!==g.connectionState){const Q=new ye(pe.INVALID_OPERATION,"[".concat(g._clientId,"] Client already in connecting/connected state"));throw S.onError(Q),Q}g._sessionId||(g._sessionId=E,g.store.sessionId=g._sessionId),g._gateway.state="CONNECTING";const I=e({clientId:g._clientId,appId:n,sid:g._sessionId,cname:o,uid:"string"!=typeof c?c:null,turnServer:g._turnServer,proxyServer:g._proxyServer,token:s||n,cloudProxyServer:g._cloudProxyServerMode,optionalInfo:h,useLocalAccessPoint:g._useLocalAccessPoint},void 0!==g._remoteDefaultVideoStreamType&&{defaultVideoStream:g._remoteDefaultVideoStreamType});if("string"==typeof c&&(I.stringUid=c,g._uintUid?(I.uid=g._uintUid,g._uintUid=void 0):I.uid=0),"none"!==g._encryptionMode&&g._encryptionSecret){if(I.aesmode=g._encryptionMode,I.aespassword=yield(Q=F(function*(H){const Z=Rx("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),le=yield window.crypto.subtle.importKey("spki",Z,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),ge=F3(H),Se=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},le,ge);return Dk(new Uint8Array(Se))}),function(H){return Q.apply(this,arguments)})(g._encryptionSecret),!g._joinAndNotLeaveYet)throw new ye(pe.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g._encryptionSalt&&(I.aessalt=g._encryptionSalt)}var Q;g._startSession(g._sessionId,{channel:o,appId:n});const R=g._sessionId;setTimeout(()=>{"CONNECTING"===g.connectionState&&R===g._sessionId&&Jt.joinChannelTimeout(g._sessionId,5)},5e3);try{let Q;const H=I.cloudProxyServer;if("443only"===H)I.proxyServer=Qt("PROXY_SERVER_TYPE2");else if(["proxy3","proxy4","proxy5"].includes(H)){const ge=Qt("PROXY_SERVER_TYPE3");I.proxyServer=Array.isArray(ge)?ge[0]:ge}if(Jt.setProxyServer(I.proxyServer),se.setProxyServer(I.proxyServer),lc(I.proxyServer),g._performanceRecorder.checkPoint("startRequestAp"),g.store.requestAPStart(),I.stringUid&&!I.uid&&"normal"===H){yield _8(I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,!1,g.store);const ge=yield Xx(I.stringUid,I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,g.store);se.debug("getUserAccount Success ".concat(I.stringUid," => ").concat(ge)),En("debug",g,"getUserAccount Success ".concat(I.stringUid," => ").concat(ge)),I.uid=ge,Q=yield Jk(I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,g.store)}else if(I.stringUid&&!I.uid){const ge=yield Xx(I.stringUid,I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,g.store);se.debug("getUserAccount Success ".concat(I.stringUid," => ").concat(ge)),En("debug",g,"getUserAccount Success ".concat(I.stringUid," => ").concat(ge)),I.uid=ge,Q=yield _8(I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,!0,g.store)}else Q=yield _8(I,g._axiosCancelSource.token,g._config.httpRetryConfig||wn,!0,g.store);if(!g._joinAndNotLeaveYet)throw new ye(pe.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));g.store.requestAPEnd(),g._performanceRecorder.checkPoint("startJoinGateway"),setTimeout(()=>{g._configDistribute.startGetConfigDistribute(I,g._axiosCancelSource.token),g._configDistribute.on(Oy.UPDATE_BITRATE_LIMIT,ge=>{g._p2pChannel.updateBitrateLimit(ge)})},0),g._key=s||n;const Z=Q.gatewayInfo;g._joinInfo=e(e({},I),{},{cid:Z.cid,uid:I.uid?I.uid:Z.uid,vid:Z.vid,apResponse:Z.res,uni_lbs_ip:Z.uni_lbs_ip,gatewayAddrs:Z.gatewayAddrs});const le=yield g._joinGateway();if(!g._joinAndNotLeaveYet)throw new ye(pe.INVALID_OPERATION,"[".concat(g._clientId,"] Client already left"));return S.onSuccess(le),g._appId=n,g._channelName=I.cname,g._uid=le,g.store.uid=le,setTimeout(()=>{g._networkQualityInterval&&window.clearInterval(g._networkQualityInterval),g._networkQualityInterval=window.setInterval(g._handleUpdateNetworkQuality,2e3),window.addEventListener(Ql()?"beforeunload":"pagehide",g._handleBeforeUnload)},0),se.info("[".concat(g._clientId,"] Joining channel success: ").concat(o)),nr("info",g,"join",o,"success"),setTimeout(()=>{Qt("USE_NEW_LOG")?M0():se.startUpload()},5e3),g._performanceRecorder.checkPoint("finishJoin"),g.store.joinEnd(),rk.includes(M=g)||rk.push(M),le}catch(Q){const H=Array.isArray(Q)?Q[0]:Q;throw se.error("[".concat(g._clientId,"] join number: ").concat(f,", Joining channel failed, rollback"),H),nr("error",g,"join",o,H.toString()),H.code!==pe.OPERATION_ABORTED&&g._numberOfJoinCount===f&&(g._gateway.state="DISCONNECTED",g._reset()),S.onError(H),H}var M})()}_joinGateway(){if(!this._joinInfo||!this._key)throw new ye(pe.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||!Qt("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===pe.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,pa.FALLBACK);throw n}).then(n=>{if(n)return n;if(se.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new ye(pe.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const o=Qt("PROXY_SERVER_TYPE3");if(Array.isArray(o))if(this._joinInfo.apUrl){const s=new Xj(this._joinInfo.apUrl).host.split("."),c=s.slice(s.length-2).join(".");o.forEach(h=>{this._joinInfo&&h.includes(c)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=o[0])}else this._joinInfo.proxyServer=o[0];else this._joinInfo.proxyServer=o;return se.setProxyServer(this._joinInfo.proxyServer),Jt.setProxyServer(this._joinInfo.proxyServer),lc(this._joinInfo.proxyServer),Jt.reportApiInvoke(this._sessionId,{name:pr.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:cr.TRACER}).onSuccess(),this.emit(yr.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),this._gateway.join(this._joinInfo,this._key)}).then(n=>n)}leave(){var n=this;return F(function*(){const o=Jt.reportApiInvoke(n._sessionId,{name:pr.LEAVE,options:[],tag:cr.TRACER});se.info("[".concat(n._clientId,"] Leaving channel")),nr("info",n,"leave"),window.removeEventListener(Ql()?"beforeunload":"pagehide",n._handleBeforeUnload),n._reset(),function(c){const h=rk.indexOf(c);-1!==h&&rk.splice(h,1)}(n);const s=yield n._leaveMutex.lock();if("DISCONNECTED"===n.connectionState)return se.info("[".concat(n._clientId,"] Leaving channel repeated, success")),s(),o.onSuccess();yield n._gateway.leave("CONNECTED"!==n.connectionState),se.info("[".concat(n._clientId,"] Leaving channel success")),nr("info",n,"leave",void 0,"success"),n._joinAndNotLeaveYet=!1,n.store.resetJoinChannelServiceRecords(),s(),o.onSuccess()})()}publish(n){var o=arguments,s=this;return F(function*(){let c=!(o.length>1&&void 0!==o[1])||o[1];Array.isArray(n)||(n=[n]);const h=Jt.reportApiInvoke(s._sessionId,{name:pr.PUBLISH,options:n.map(f=>f?Object(f).toString():"null"),tag:cr.TRACER});if(0===n.length){const f=new ye(pe.INVALID_PARAMS,"track list is empty");return h.onError(f),f.throw()}if("audience"===s._gateway.role){const f=new ye(pe.INVALID_OPERATION,"audience can not publish stream");return h.onError(f),f.throw()}for(const f of n){if(!(f instanceof V3)){const A=new ye(pe.INVALID_PARAMS,"parameter is not local track");return h.onError(A),A.throw()}if(!f._enabled&&c){const A=new ye(pe.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(f.getTrackId()));return h.onError(A),A.throw()}}se.info("[".concat(s._clientId,"] Publishing tracks, id ").concat(n.map(f=>"".concat(f.getTrackId()," ")))),nr("info",s,"publish",n.map(f=>"".concat(f.getTrackId()))),yield s._configDistribute.awaitConfigDistributeComplete(),c&&n.forEach(f=>{const A=s._configDistribute.getBitrateLimit();f instanceof ea&&A&&f.setBitrateLimit(A.uplink)});const g=yield s._publishMutex.lock();try{yield s._publishHighStream(n),h.onSuccess(n.map(f=>f.trackMediaType+":"+f.getTrackLabel()).toString()),se.info("[".concat(s._clientId,"] Publish success, id ").concat(n.map(f=>"".concat(f.getTrackId()," ")))),nr("info",s,"publish",n.map(f=>"".concat(f.getTrackId())),"success")}catch(f){throw h.onError(f),se.error("[".concat(s._clientId,"] publish error"),f.toString()),nr("error",s,"publish",void 0,f.toString()),f}finally{g()}})()}unpublish(n){var o=this;return F(function*(){if(!o._joinInfo||void 0===o._uid)throw new ye(pe.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=o._p2pChannel.getAllTracks(!0);const s=Jt.reportApiInvoke(o._sessionId,{name:pr.UNPUBLISH,options:n.map(h=>h.getTrackId()),tag:cr.TRACER});se.info("[".concat(o._clientId,"] Unpublish tracks, tracks ").concat(n.map(h=>"".concat(h.getTrackId()," "))," ")),nr("info",o,"unpublish",n.map(h=>"".concat(h.getTrackId())));const c=yield o._publishMutex.lock();try{const h=yield o._p2pChannel.unpublish(n);h&&(yield o._gateway.unpublish(h,o._uid)),se.info("[".concat(o._clientId,"] Unpublish success,tracks ").concat(n.map(g=>"".concat(g.getTrackId())))),nr("info",o,"unpublish",n.map(g=>"".concat(g.getTrackId())),"success"),s.onSuccess()}catch(h){throw s.onError(h),se.error("[".concat(o._clientId,"] unpublish error"),h.toString()),nr("error",o,"unpublish",void 0,h.toString()),h}finally{c&&c()}})()}subscribe(n,o){var s=this;return F(function*(){return s._subscribe(n,o)})()}_subscribe(n,o,s){var c=this;return F(function*(){Qa(o,"mediaType",["audio","video"]);const h=Jt.reportApiInvoke(c._sessionId,{name:pr.SUBSCRIBE,options:[n.uid,o],tag:cr.TRACER});if(!c._joinInfo){const S=new ye(pe.INVALID_OPERATION,"Can't subscribe stream, not joined");throw h.onError(S),S}if("CONNECTED"!==c.connectionState&&"RECONNECTING"!==c.connectionState){const S=new ye(pe.INVALID_OPERATION,"Can't subscribe stream in ".concat(c.connectionState," state"));throw h.onError(S),S}if(!c._users.find(S=>S===n)){const S=new ye(pe.INVALID_REMOTE_USER,"user is not in the channel");throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),nr("error",c,"subscribe",n.uid,"this user is not in the channel"),h.onError(S),S}if(!n.hasAudio&&!n.hasVideo){const S=new ye(pe.INVALID_REMOTE_USER,"user is not published");throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),nr("error",c,"subscribe",n.uid,"this user is not published"),h.onError(S),S}if(!(s||("audio"!==o||n.hasAudio&&void 0!==n._audioSSRC)&&("video"!==o||n.hasVideo&&void 0!==n._videoSSRC))){const S=new ye(pe.REMOTE_USER_IS_NOT_PUBLISHED);throw se.error("[".concat(c._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(o,", remote track is not published")),nr("error",c,"subscribe",n.uid,"mediaType ".concat(o,", remote track is not published")),h.onError(S),S}const g="audio"===o?n._audioSSRC:n._videoSSRC,f="audio"===o?n._audioOrtc:n._videoOrtc,A="video"===o?n._rtxSsrcId:void 0,_={stream_type:"audio"===o?ti.AUDIO:ti.VIDEO,ssrcId:g},E=yield c._subscribeMutex.lock();se.info("[".concat(c._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(o)),nr("info",c,"subscribe",{uid:n.uid,mediaType:o});try{if(yield c._p2pChannel.hasRemoteMediaWithLock(n,o))yield c._p2pChannel.unmuteRemote(n,o);else try{$l.markSubscribeStart(c.store.clientId,g),c.store.subscribe(n.uid,o,performance.now()),yield c._p2pChannel.subscribe(n,o,g,A,f);try{yield c._gateway.subscribe(n.uid,_,!0)}catch(I){throw yield c._p2pChannel.unsubscribe(n,o),I}c.store.subscribe(n.uid,o,void 0,performance.now()),c._p2pChannel.reportSubscribeEvent(!0,null,n,o)}catch(I){throw c._p2pChannel.reportSubscribeEvent(!1,I?.code,n,o),I}se.info("[".concat(c._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(o)),nr("info",c,"subscribe",{uid:n.uid,mediaType:o},"success"),c._defaultStreamFallbackType&&c.setStreamFallbackOption(n.uid,c._defaultStreamFallbackType).catch(I=>{se.warning("[".concat(c._clientId,"] auto set fallback failed"),I),En("warning",c,"auto set fallback failed, ".concat(I.toString()))});const S="audio"===o?n._audioTrack:n._videoTrack;if(!S){const I=new ye(pe.UNEXPECTED_ERROR,"can not find remote track in user object");return h.onError(I),I.throw()}return h.onSuccess(S.getTrackId()),S}catch(S){throw h.onError(S),se.error("[".concat(c._clientId,"] subscribe user ").concat(n.uid," error"),S),nr("error",c,"subscribe",{uid:n.uid,mediaType:o},S.toString()),S}finally{E()}})()}massSubscribe(n){var o=this;return F(function*(){Jw(n,"subscribeList");const s=Jt.reportApiInvoke(o._sessionId,{name:pr.MASS_SUBSCRIBE,options:n.map(E=>{let{user:S,mediaType:I}=E;return[S?.uid,I]}),tag:cr.TRACER});if(!o._joinInfo){const E=new ye(pe.INVALID_OPERATION,"Can't subscribe stream, not joined");throw s.onError(E),E}if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState){const E=new ye(pe.INVALID_OPERATION,"Can't subscribe stream in ".concat(o.connectionState," state"));throw s.onError(E),E}const c=performance.now(),h=new Map,g=yield o._subscribeMutex.lock();se.info("[".concat(o._clientId,"]start massSubscribe user ").concat(n.map(E=>{let{user:S,mediaType:I}=E;return"user: ".concat(S?.uid,", mediaType: ").concat(I)}).join("; "))),nr("info",o,"massSubscribe",n);const f=(n=[...n]).map(E=>{let{user:S,mediaType:I}=E;return{user:S,mediaType:I}}),A=yield o._p2pChannel.globalLock();try{var _;for(let S=n.length-1;S>=0;S--){const I=n[S],{user:R,mediaType:M}=I;if(Qa(M,"mediaType",["audio","video"]),!R){const Z=new ye(pe.INVALID_PARAMS,"user property does not exist in subscribeList item");throw se.error("[".concat(o._clientId,"] user property does not exist in subscribeList item")),s.onError(Z),Z}if(!o._users.find(Z=>Z===R)){const Z=new ye(pe.INVALID_REMOTE_USER,"user is not in the channel");se.error("[".concat(o._clientId,"] can not massSubscribe ").concat(R.uid,", this user is not in the channel")),nr("error",o,"massSubscribe",R.uid,"this user is not in the channel"),f[S].error=Z,n.splice(S,1);continue}if("audio"===M&&(!R.hasAudio||void 0===R._audioSSRC)||"video"===M&&(!R.hasVideo||void 0===R._videoSSRC)){const Z=new ye(pe.REMOTE_USER_IS_NOT_PUBLISHED);se.error("[".concat(o._clientId,"] can not subscribe ").concat(R.uid," with mediaType ").concat(M,", remote user is not published")),nr("error",o,"subscribe",R.uid,"mediaType ".concat(M,", remote user is not published")),f[S].error=Z,n.splice(S,1);continue}const Q=Uo.Video|Uo.LwoVideo,H=h.get(R);if(H){if("video"===M?H&Q:H&Uo.Audio){n.splice(S,1),se.warning("repeat massSubscribe user:".concat(R.uid,", mediaType:").concat(M," twice"));continue}h.set(R,H|("video"===M?Q:Uo.Audio))}else h.set(R,"video"===M?Q:Uo.Audio)}for(let S=n.length-1;S>=0;S--){const I=n[S],{user:R,mediaType:M}=I,Q=Uo.Video|Uo.LwoVideo;if(o._p2pChannel.hasRemoteMedia(R,M)){yield o._p2pChannel.unmuteRemoteNoLock(R,M);const H=h.get(R);h.set(R,"video"===M?H^Q:H^Uo.Audio),n.splice(S,1)}}o.store.massSubscribe(n.map(S=>({userId:S.user.uid,type:S.mediaType})),c);const E=e_(_=Array.from(h.entries())).call(_,(S,I)=>{let[R,M]=I;if(0===M)return S;const Q={stream_id:R.uid,stream_type:M};return M&Uo.Audio&&(Q.audio_ssrc=R._audioSSRC),M&Uo.Video&&(Q.video_ssrc=R._videoSSRC),S.push(Q),S},[]);try{n.length>0&&(yield o._p2pChannel.massSubscribeNoLock(n.map(I=>{let{user:R,mediaType:M}=I;return{user:R,mediaType:M,ssrcId:M===ti.VIDEO?R._videoSSRC:R._audioSSRC,rtxSsrcId:R._rtxSsrcId}})));const S=new Map;if(E.length>0&&((yield o._gateway.subscribeAll(E,!0))?.users||[]).forEach(R=>{let{stream_id:M,video_error_code:Q,audio_error_code:H,error_code:Z}=R;(Q||H||Z)&&S.set(M,{video_error_code:Q,audio_error_code:H,error_code:Z})}),Array.from(S.entries()).length>0){const I=Array.from(S.entries()).map(R=>{let M,[Q,H]=R;return H.error_code||H.video_error_code&&H.audio_error_code?M=void 0:H.video_error_code?M=ti.VIDEO:H.audio_error_code&&(M=ti.AUDIO),{user:o.remoteUsers.find(Z=>Z.uid===Q),mediaType:M}});yield o._p2pChannel.massUnsubscribeNoLock(I)}for(const I of f){const R=S.get(I.user.uid);if(R){const M=R.error_code||"audio"===I.mediaType&&R.audio_error_code||"video"===I.mediaType&&R.video_error_code;if(M){const Q=DU(M);se.error("user:".concat(I.user.uid," mediaType:").concat(I.mediaType," has massSubscribe error ").concat(Q.desc)),I.error=new ye(pe.SUBSCRIBE_FAILED,"code ".concat(M,": ").concat(Q.desc))}}I.error||(I.track="video"===I.mediaType?I.user.videoTrack:I.user.audioTrack)}return o.store.massSubscribe(f.filter(I=>!I.error).map(I=>({userId:I.user.uid,type:I.mediaType})),void 0,performance.now()),f.forEach(I=>{var R;Jt.subscribe(o.store.sessionId,{succ:!!I.error,ec:(null===(R=I.error)||void 0===R?void 0:R.code)||null,video:I.mediaType===ti.VIDEO,audio:I.mediaType===ti.AUDIO,peerid:I.user.uid,subscribeRequestid:I.mediaType===ti.VIDEO?I.user._videoSSRC:I.user._audioSSRC,p2pid:o.store.p2pId,eventElapse:Math.floor(performance.now()-c)},!0)}),s.onSuccess(),se.info("[".concat(o._clientId,"] massSubscribe success ").concat(n.map(I=>{let{user:R,mediaType:M}=I;return"user: ".concat(R?.uid,", mediaType: ").concat(M)}).join("; "))),nr("info",o,"massSubscribe",n,"success"),f}catch(S){throw yield o._p2pChannel.massUnsubscribeNoLock(n),s.onError(S),S}}finally{A(),g()}})()}unsubscribe(n,o){var s=this;return F(function*(){if(o&&Qa(o,"mediaType",["audio","video"]),!s._joinInfo)throw new ye(pe.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const c=Jt.reportApiInvoke(s._sessionId,{name:pr.UNSUBSCRIBE,options:[n.uid,o],tag:cr.TRACER});if(!s._users.find(h=>h===n)){const h=new ye(pe.INVALID_REMOTE_USER,"user is not in the channel");throw se.error("[".concat(s._clientId,"] can not subscribe ").concat(n.uid,", user is not in the channel")),nr("error",s,"unsubscribe",{uid:n.uid,mediaType:o},"user is not in the channel"),c.onError(h),h}se.info("[".concat(s._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(o)),nr("info",s,"unsubscribe",{uid:n.uid,mediaType:o});try{const h=yield s._p2pChannel.unsubscribe(n,o);h&&(yield s._gateway.unsubscribe(h,n.uid)),se.info("[".concat(s._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(o)),nr("info",s,"unsubscribe",{uid:n.uid,mediaType:o},"success"),c.onSuccess()}catch(h){if(h.code===pe.DISCONNECT_P2P)return se.warning("disconnecting p2p, abort unsubscribe request."),void c.onSuccess();throw se.error("[".concat(s._clientId,"] unsubscribe user ").concat(n.uid," error"),h.toString()),nr("error",s,"unsubscribe",{uid:n.uid,mediaType:o},h.toString()),c.onError(h),h}})()}massUnsubscribe(n){var o=this;return F(function*(){Jw(n,"unsubscribeList");const s=Jt.reportApiInvoke(o._sessionId,{name:pr.UNSUBSCRIBE,options:n.map(h=>{let{user:g,mediaType:f}=h;return{uid:g?.uid,mediaType:f}}),tag:cr.TRACER});if(!o._joinInfo){const h=new ye(pe.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");throw s.onError(h),h}se.info("[".concat(o._clientId,"] start massUnsubscribe ").concat(n.map(h=>{let{user:g,mediaType:f}=h;return"user: ".concat(g?.uid,", mediaType: ").concat(f,";")}).join())),nr("info",o,"massUnsubscribe",n),n=[...n];const c=new Map;for(let h=n.length-1;h>=0;h--){const{user:g,mediaType:f}=n[h];if(!g){const _=new ye(pe.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw se.error("[".concat(o._clientId,"] user property does not exist in unsubscribeList item")),s.onError(_),_}if(Qa(f,"mediaType",["video","audio",void 0]),!o._users.find(_=>_===g)){se.warning("[".concat(o._clientId,"] can not subscribe ").concat(g.uid,", user is not in the channel")),nr("error",o,"unsubscribe",{uid:g.uid,mediaType:f},"user is not in the channel"),n.splice(h,1);continue}const A=Uo.Video|Uo.LwoVideo;if(c.has(g)){const _=c.get(g);let E;switch(f){case"video":E=_&A;break;case"audio":E=_&Uo.Audio;break;default:E=_&(Uo.Audio|A)}if(E){se.warning("repeat massUnsubscribe user:".concat(g.uid,",mediaType:").concat(f," twice.")),n.splice(h,1);continue}f?"audio"===f?c.set(g,_|Uo.Audio):"video"===f&&c.set(g,_|A):c.set(g,_|Uo.Audio|A)}else f?"audio"===f?c.set(g,Uo.Audio):"video"===f&&c.set(g,A):c.set(g,Uo.Audio|A)}try{const h=yield o._p2pChannel.massUnsubscribe(n);h&&(yield o._gateway.massUnsubscribe(h)),se.info("[".concat(o._clientId,"] massUnsubscribe success ").concat(n.map(g=>{let{user:f,mediaType:A}=g;return"user: ".concat(f?.uid,", mediaType: ").concat(A,";")}).join())),nr("info",o,"massUnsubscribe",n,"success"),s.onSuccess()}catch(h){if(h.code===pe.DISCONNECT_P2P)return se.warning("disconnecting p2p, abort unsubscribe request."),void s.onSuccess();throw se.error("[".concat(o._clientId,"] massUnsubscribe error"),h.toString()),nr("error",o,"massUnsubscribe",n,h.toString()),s.onError(h),h}})()}setLowStreamParameter(n){!function(c){if(!c)throw new ye(pe.INVALID_PARAMS);ho(c.width)||dg(c.width,"streamParameter.width"),ho(c.height)||dg(c.height,"streamParameter.height"),ho(c.framerate)||dg(c.framerate,"streamParameter.framerate"),ho(c.bitrate)||Jr(c.bitrate,"streamParameter.bitrate")}(n);const o=Jt.reportApiInvoke(this._sessionId,{name:pr.SET_LOW_STREAM_PARAMETER,options:[n],tag:cr.TRACER});(!n.width&&n.height||n.width&&!n.height)&&(se.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),En("warning",this,"The width and height parameters take effect only when both are set")),se.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n)),nr("info",this,"setLowStreamParameter",n);const s=this._configDistribute.getLowStreamConfigDistribute();s&&s.bitrate&&n.bitrate&&s.bitrate<n.bitrate&&(n.bitrate=s.bitrate),this._lowStreamParameter=n,o.onSuccess()}enableDualStream(){var n=this;return F(function*(){const o=Jt.reportApiInvoke(n._sessionId,{name:pr.ENABLE_DUAL_STREAM,options:[],tag:cr.TRACER});if(!Zc().supportDualStream){Jt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1});const s=new ye(pe.NOT_SUPPORTED,"Your browser is not support dual stream");throw o.onError(s),s}if(n._isDualStreamEnabled){const s=new ye(pe.INVALID_OPERATION,"Dual stream is already enabled");throw o.onError(s),s}if(n._p2pChannel.canPublishLowStream())try{yield n._publishLowStream()}catch(s){throw Jt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),o.onError(s),s}n._isDualStreamEnabled=!0,Jt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),se.info("[".concat(n._clientId,"] enable dual stream")),nr("info",n,"enableDualStream"),o.onSuccess()})()}disableDualStream(){var n=this;return F(function*(){if(!n._isDualStreamEnabled)return;if(!n._joinInfo)throw new ye(pe.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const o=Jt.reportApiInvoke(n._sessionId,{name:pr.DISABLE_DUAL_STREAM,options:[],tag:cr.TRACER});if(n._p2pChannel.getLocalMedia(xn.LocalVideoLowTrack))try{const s=yield n._p2pChannel.unpublishLowStream();s&&(yield n._gateway.unpublish(s,n._joinInfo.stringUid||n._joinInfo.uid))}catch(s){throw Jt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),o.onError(s),s}n._isDualStreamEnabled=!1,Jt.streamSwitch(n._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),se.info("[".concat(n._clientId,"] disable dual stream")),nr("info",n,"disableDualStream"),o.onSuccess()})()}setClientRole(n,o){var s=this;return F(function*(){var h;Qa(h=n,"role",["audience","host"]),o&&b7(o);const c=Jt.reportApiInvoke(s._sessionId,{name:pr.SET_CLIENT_ROLE,options:[n,o],tag:cr.TRACER});if("rtc"===s._mode){se.warning("[".concat(s._clientId,"]rtc mode can not use setClientRole")),nr("warning",s,"setClientRole",n,"rtc mode can not use setClientRole");const h=new ye(pe.INVALID_OPERATION,"rtc mode can not use setClientRole");return c.onError(h),h.throw()}if(o&&o.level&&"host"===n){const h=new ye(pe.INVALID_OPERATION,"host mode can not set audience latency level");return c.onError(h),h.throw()}try{if("audience"===n&&s._p2pChannel.hasLocalMedia()){const h=new ye(pe.INVALID_OPERATION,"can not set client role to audience when publishing stream");return c.onError(h),h.throw()}yield s._gateway.setClientRole(n,o),se.info("[".concat(s._clientId,"] set client role to ").concat(n,", level: ").concat(o&&o.level)),nr("info",s,"setClientRole",{role:n,level:o&&o.level}),c.onSuccess()}catch(h){throw c.onError(h),h}})()}setProxyServer(n,o){if(Jc(n,"proxyServer"),!o){if("DISCONNECTED"!==this.connectionState)throw new ye(pe.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ye(pe.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Jt.setProxyServer(this._proxyServer),se.setProxyServer(this._proxyServer),lc(this._proxyServer),se.info("[".concat(this._clientId,"] Set proxy server ").concat(o?"by initialize call":""," success.")),nr("info",this,"setProxyServer",[...arguments],"success")}setTurnServer(n,o){if(Array.isArray(n)||(n=[n]),!o){if("DISCONNECTED"!==this.connectionState)throw new ye(pe.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new ye(pe.INVALID_OPERATION,"You have already set the proxy")}if(QF(n))return this._turnServer={servers:n,mode:"original-manual"},se.info("[".concat(this._clientId,"] Set original turnserver ").concat(o?"by initialize call":""," success: ").concat(n.map(s=>s.urls).join(","),".")),void nr("info",this,"setOriginalTurnServer",[...arguments],"success");n.forEach(s=>E7(s)),this._turnServer={servers:n,mode:"manual"},se.info("[".concat(this._clientId,"] Set turnserver ").concat(o?"by initialize call":""," success.")),nr("info",this,"setTurnServer",[...arguments],"success")}startProxyServer(n){const o=Jt.reportApiInvoke(this._sessionId,{name:pr.START_PROXY_SERVER,options:[],tag:cr.TRACER});if("DISCONNECTED"!==this.connectionState){const h=new ye(pe.INVALID_OPERATION,"Start proxy server before join channel");throw o.onError(h),h}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const h=new ye(pe.INVALID_OPERATION,"You have already set the proxy");throw o.onError(h),h}const s=[1,2,3,4,5];let c;switch(void 0===n&&(n=1),n){case 1:c="normal";break;case 2:c="443only";break;case 3:c="proxy3";break;case 4:c="proxy4";break;case 5:c="proxy5";break;default:{const h=new ye(pe.INVALID_PARAMS,"proxy server mode must be ".concat(s.join("|")));throw o.onError(h),h}}this._cloudProxyServerMode=c,this.store.cloudProxyServerMode=c,se.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),nr("info",this,"startProxyServer",this._cloudProxyServerMode),o.onSuccess()}stopProxyServer(){const n=Jt.reportApiInvoke(this._sessionId,{name:pr.STOP_PROXY_SERVER,options:[],tag:cr.TRACER});if("DISCONNECTED"!==this.connectionState)throw new ye(pe.INVALID_OPERATION,"Stop proxy server after leave channel");Jt.setProxyServer(),se.setProxyServer(),lc(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",se.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),nr("info",this,"stopProxyServer",this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},n.onSuccess()}setLocalAccessPoints(n,o){if(Jw(n,"serverList"),Jc(o,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new ye(pe.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(c=>s.test(c)?"".concat(c.replace(/\./g,"-"),".").concat(o):c),this._useLocalAccessPoint=!0,kc("WEBCS_DOMAIN",n),kc("WEBCS_DOMAIN_BACKUP_LIST",n),kc("GATEWAY_DOMAINS",[o]),kc("EVENT_REPORT_DOMAIN",n[0]),kc("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),kc("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),se.info("set local access point success"),nr("info",this,"setLocalAccessPoints")}setRemoteDefaultVideoStreamType(n){var o=this;return F(function*(){if(Qa(n,"streamType",[0,1]),o._remoteDefaultVideoStreamType=n,o._joinInfo)try{yield o._gateway.setDefaultRemoteVideoStreamType(n),o._joinInfo.defaultVideoStream=o._remoteDefaultVideoStreamType}catch(s){throw se.error("[".concat(o._clientId,"] set default remote video stream type error"),s.toString()),s}else se.debug("haven't joined yet, cache remoteDefaultVideoStreamType ".concat(n))})()}setRemoteVideoStreamType(n,o){var s=this;return F(function*(){Qa(o,"streamType",[0,1]);const c=Jt.reportApiInvoke(s._sessionId,{name:pr.SET_REMOTE_VIDEO_STREAM_TYPE,options:[n,o],tag:cr.TRACER});try{yield s._gateway.setRemoteVideoStreamType(n,o),setTimeout(()=>{const h=s._users.find(g=>g.uid===n);h&&h.videoTrack&&h.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(h){throw c.onError(h),se.error("[".concat(s._clientId,"] set remote video stream type error"),h.toString()),nr("error",s,"setRemoteVideoStreamType",void 0,h.toString()),h}se.info("[".concat(s._clientId,"] set remote ").concat(n," video stream type to ").concat(o)),nr("info",s,"setRemoteVideoStreamType",{uid:n,streamType:o}),s._remoteStreamTypeCacheMap.set(n,o),c.onSuccess()})()}setStreamFallbackOption(n,o){var s=this;return F(function*(){Qa(o,"fallbackType",[0,1,2]);const c=Jt.reportApiInvoke(s._sessionId,{name:pr.SET_STREAM_FALLBACK_OPTION,options:["too long to show",o],tag:cr.TRACER});try{yield s._gateway.setStreamFallbackOption(n,o)}catch(h){throw c.onError(h),se.error("[".concat(s._clientId,"] set stream fallback option"),h.toString()),nr("error",s,"setStreamFallbackOption",void 0,h.toString()),h}se.info("[".concat(s._clientId,"] set remote ").concat(n," stream fallback type to ").concat(o)),nr("info",s,"setStreamFallbackOption",{uid:n,fallbackType:o}),s._streamFallbackTypeCacheMap.set(n,o),c.onSuccess()})()}setEncryptionConfig(n,o,s){if(Qa(n,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),Jc(o,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!s||!(s instanceof Uint8Array&&32===s.length))throw new ye(pe.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(s)throw new ye(pe.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(o)||(se.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),En("warning",this,"The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      ")),this._encryptionMode=n,this._encryptionSecret=o,s&&(this._encryptionSalt=Dk(s))}renewToken(n){var o=this;return F(function*(){Jc(n,"token",1,2047);const s=Jt.reportApiInvoke(o._sessionId,{name:pr.RENEW_TOKEN,options:[n],tag:cr.TRACER});if(!o._key||!o._joinInfo){const g=new ye(pe.INVALID_OPERATION,"renewToken should not be called before user join");return s.onError(g),g.throw()}const c=o._key;o._key=n,o._joinInfo&&(o._joinInfo.token=n);const h=yield o._renewTokenMutex.lock();try{if(Qt("USE_NEW_TOKEN")){se.debug("start renew token with ticket from unilbs"),nr("debug",o,"renewToken","unilbs");const g=yield function UH(n,o,s){return A8.apply(this,arguments)}(o._joinInfo,o._axiosCancelSource.token,o._config.httpRetryConfig||wn);se.debug("[".concat(o._clientId,"] get ticket from unilbs success")),nr("debug",o,"renewToken","unilbs","success"),yield o._gateway.renewToken({token:n,ticket:g})}else se.debug("start renew token without ticket"),nr("debug",o,"renewToken"),yield o._gateway.renewToken({token:n});se.debug("[".concat(o._clientId,"] renewToken success")),nr("debug",o,"renewToken",void 0,"success"),s.onSuccess()}catch(g){throw o._key=c,o._joinInfo.token=c,s.onError(g),se.error("[".concat(o._clientId,"] renewToken failed"),g.toString()),nr("error",o,"renewToken",void 0,g.toString()),g}finally{h()}})()}enableAudioVolumeIndicator(){const n=Jt.reportApiInvoke(this._sessionId,{name:pr.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:cr.TRACER});if(this._audioVolumeIndicationInterval)return se.warning("you have already enabled audio volume indicator!"),nr("warning",this,"enableAudioVolumeIndicator","you have already enabled audio volume indicator!"),n.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const o=this._p2pChannel.getAudioLevels();this.emit(yr.VOLUME_INDICATOR,o)},Qt("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),n.onSuccess()}getRTCStats(){const n=this._statsCollector.getRTCStats(),o=this._gateway.getInChannelInfo();return n.Duration=Math.round(o.duration/1e3),n}startLiveStreaming(n,o){const s=Jt.reportApiInvoke(this._sessionId,{name:pr.START_LIVE_STREAMING,options:[n,o],tag:cr.TRACER});if(!o){if("h264"!==this._codec){const h=new ye(pe.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return s.onError(h),Qn.reject(h)}if(!this._p2pChannel.hasLocalMedia()){const h=new ye(pe.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return s.onError(h),Qn.reject(h)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n)){const h=new ye(pe.LIVE_STREAMING_TASK_CONFLICT);return s.onError(h),Qn.reject(h)}const c=o?ms.TRANSCODE:ms.RAW;return this._createLiveStreamingClient(c).startLiveStreamingTask(n,c).then(()=>s.onSuccess()).catch(h=>{throw s.onError(h),h})}setLiveTranscoding(n){const o=Jt.reportApiInvoke(this._sessionId,{name:pr.SET_LIVE_TRANSCODING,options:[n],tag:cr.TRACER});return this._createLiveStreamingClient(ms.TRANSCODE).setTranscodingConfig(n).then(()=>o.onSuccess()).catch(s=>{throw o.onError(s),s})}stopLiveStreaming(n){const o=Jt.reportApiInvoke(this._sessionId,{name:pr.STOP_LIVE_STREAMING,options:[n],tag:cr.TRACER}),s=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(c=>c&&c.hasUrl(n));if(!s.length){const c=new ye(pe.INVALID_PARAMS,"can not find live streaming url to stop");return o.onError(c),Qn.reject(c)}return Qn.all(s.map(c=>c&&c.stopLiveStreamingTask(n))).then(()=>o.onSuccess()).catch(c=>{throw o.onError(c),c})}addInjectStreamUrl(n,o){var s=this;return F(function*(){const c=Jt.reportApiInvoke(s._sessionId,{name:pr.ADD_INJECT_STREAM_URL,options:[n,o],tag:cr.TRACER});try{if(!s._joinInfo)throw new ye(pe.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const h=s._createLiveStreamingClient(ms.INJECT);h.setInjectStreamConfig(o,0),yield h.startLiveStreamingTask(n,ms.INJECT)}catch(h){throw c.onError(h),h}c.onSuccess()})()}removeInjectStreamUrl(){var n=this;return F(function*(){const o=Jt.reportApiInvoke(n._sessionId,{name:pr.REMOVE_INJECT_STREAM_URL,options:[],tag:cr.TRACER});try{var s;const c=n._createLiveStreamingClient(ms.INJECT),h=Array.from(ov(s=c.streamingTasks).call(s)).find(g=>g.mode===ms.INJECT);if(!n._joinInfo||!h)throw new ye(pe.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");yield c.stopLiveStreamingTask(h.url)}catch(c){throw o.onError(c),c}o.onSuccess()})()}startChannelMediaRelay(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(o._sessionId,{name:pr.START_CHANNEL_MEDIA_RELAY,options:[n],tag:cr.TRACER});try{S8(n),yield o._createChannelMediaRelayClient().startChannelMediaRelay(n)}catch(c){return s.onError(c),c.throw()}s.onSuccess()})()}updateChannelMediaRelay(n){var o=this;return F(function*(){const s=Jt.reportApiInvoke(o._sessionId,{name:pr.UPDATE_CHANNEL_MEDIA_RELAY,options:[n],tag:cr.TRACER});try{S8(n),yield o._createChannelMediaRelayClient().updateChannelMediaRelay(n)}catch(c){return s.onError(c),c.throw()}s.onSuccess()})()}stopChannelMediaRelay(){var n=this;return F(function*(){const o=Jt.reportApiInvoke(n._sessionId,{name:pr.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:cr.TRACER});try{yield n._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(s){return o.onError(s),s.throw()}o.onSuccess()})()}sendStreamMessage(n){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new ye(pe.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof n&&(n=(new TextEncoder).encode(n)),new Blob([n]).size>1024)throw new ye(pe.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(di.DATA_STREAM,{payload:Dk(n)},!o)}sendMetadata(n){if(!this._joinInfo)throw new ye(pe.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new ye(pe.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(di.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Dk(n)})}sendCustomReportMessage(n){var o=this;return F(function*(){Array.isArray(n)||(n=[n]),n.forEach(OV);const s=Jt.reportApiInvoke(o._sessionId,{name:pr.SEND_CUSTOM_REPORT_MESSAGE,options:[JSON.stringify(n)],tag:cr.TRACER});if(!o._joinInfo){const c=new ye(pe.INVALID_OPERATION,"can not send custom report, not joined");return s.onError(c),c.throw()}yield Jt.sendCustomReportMessage(o._joinInfo.sid,n),s.onSuccess()})()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}pickSVCLayer(n,o){var s=this;return F(function*(){Qa(o.spatialLayer,"spatialLayer",[0,1,2,3]),Qa(o.temporalLayer,"temporalLayer",[0,1,2,3]);try{yield s._gateway.pickSVCLayer(n,o)}catch(c){throw se.error("[".concat(s._clientId,"] pick SVC layer failed"),c.toString()),zt("error",s,"pickSVCLayer",o,c.toString()),c}})()}_reset(){if(se.debug("[".concat(this._clientId,"] reset client")),zt("debug",this,"_reset"),this._axiosCancelSource.cancel(),this._axiosCancelSource=tt.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Ru("client-publish"),this._subscribeMutex=new Ru("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(n,o){const s=n||kQ();se.debug(n?"[".concat(this._clientId,"] new Session ").concat(s):"[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(s)),zt("debug",this,"_startSession",{newSid:s,sid:this._sessionId}),this._sessionId=s,this.store.sessionId=s,o?Jt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:o.channel,appid:o.appId,mode:this._mode}):this._joinInfo?Jt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Jt.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=s),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=s)}_publishHighStream(n){var o=this;return F(function*(){if(!o._joinInfo||void 0===o._uid)throw new ye(pe.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==o.connectionState&&"RECONNECTING"!==o.connectionState)throw new ye(pe.INVALID_OPERATION,"can not publish stream in ".concat(o.connectionState," state"));if("auto"===o._turnServer.mode&&Qt("FORCE_TURN")&&!Qt("TURN_ENABLE_TCP")&&!Qt("TURN_ENABLE_UDP"))throw new ye(pe.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");se.debug("[".concat(o._clientId,"] publish high stream")),zt("debug",o,"_publishHighStream");try{const c=yield o._p2pChannel.publish(n,o._isDualStreamEnabled,o._lowStreamParameter),h=(yield c.next()).value;if(h){var s;let g;try{g=yield o._gateway.publish(o._uid,h,!0)}catch(f){if(f.code!==pe.DISCONNECT_P2P)throw c.throw(f),f}yield c.next((null===(s=g)||void 0===s?void 0:s.ortc)||[])}o._p2pChannel.reportPublishEvent(!0,null);for(const g of n)g instanceof ea&&g._encoderConfig&&o._gateway.setVideoProfile(g._encoderConfig),!g.muted&&g.enabled||(yield o._p2pChannel.muteLocalTrack(g))}catch(c){if(o._p2pChannel.reportPublishEvent(!1,c?.code,n),c?.code===pe.WS_ABORT)return;throw c}})()}_publishLowStream(){var n=this;return F(function*(){if(!n._joinInfo||void 0===n._uid)throw new ye(pe.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==n.connectionState&&"RECONNECTING"!==n.connectionState)throw new ye(pe.INVALID_OPERATION,"can not publish stream in ".concat(n.connectionState," state"));se.debug("[".concat(n._clientId,"] publish low stream")),zt("debug",n,"_publishLowStream");const o=n._configDistribute.getLowStreamConfigDistribute();o&&o.bitrate&&(n._lowStreamParameter||(n._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),n._lowStreamParameter&&n._lowStreamParameter.bitrate&&o.bitrate<n._lowStreamParameter.bitrate&&(n._lowStreamParameter.bitrate=o.bitrate));try{const c=yield n._p2pChannel.publishLowStream(n._lowStreamParameter),h=(yield c.next()).value;if(h){var s;let g;try{g=yield n._gateway.publish(n._uid,h,!0)}catch(f){if(f.code!==pe.DISCONNECT_P2P)throw c.throw(f),f}c.next((null===(s=g)||void 0===s?void 0:s.ortc)||[]),n._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(c){if(n._p2pChannel.reportPublishEvent(!1,c?.code,void 0,!0),c?.code===pe.WS_ABORT)return;throw c}})()}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new ye(pe.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const o=()=>new GH(this._joinInfo,this._config.websocketRetryConfig||wn,this._config.httpRetryConfig||wn),s=c=>{c.onLiveStreamError=(h,g)=>{Jt.reportApiInvoke(this._sessionId,{name:pr.ON_LIVE_STREAM_ERROR,options:[h,g],tag:cr.TRACER}).onSuccess(),this.emit(yr.LIVE_STREAMING_ERROR,h,g)},c.onLiveStreamWarning=(h,g)=>{Jt.reportApiInvoke(this._sessionId,{name:pr.ON_LIVE_STREAM_WARNING,options:[h,g],tag:cr.TRACER}).onSuccess(),this.emit(yr.LIVE_STREAMING_WARNING,h,g)},c.on(pg.REQUEST_WORKER_MANAGER_LIST,(h,g,f)=>{if(!this._joinInfo)return f(new ye(pe.INVALID_OPERATION,"can not find join info to get worker manager"));BH(h,this._joinInfo,this._axiosCancelSource.token,wn).then(g).catch(f)})};switch(n){case ms.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=o(),s(this._liveRawStreamingClient)),this._liveRawStreamingClient;case ms.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=o(),s(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case ms.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=o(),this._injectStreamingClient.on(pg.REQUEST_WORKER_MANAGER_LIST,(c,h,g)=>{if(!this._joinInfo)return g(new ye(pe.INVALID_OPERATION,"can not find join info to get worker manager"));BH(c,this._joinInfo,this._axiosCancelSource.token,wn).then(h).catch(g)}),this._injectStreamingClient.onInjectStatusChange=(c,h,g)=>{this.emit(yr.INJECT_STREAM_STATUS,c,h,g)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new tL(this._joinInfo,this._clientId,this._config.websocketRetryConfig||wn,this._config.httpRetryConfig||wn),this._channelMediaRelayClient.on("state",n=>{n===hc.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(yr.CHANNEL_MEDIA_RELAY_STATE,n)}),this._channelMediaRelayClient.on("event",n=>{this.emit(yr.CHANNEL_MEDIA_RELAY_EVENT,n)})),this._channelMediaRelayClient):new ye(pe.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){var n=this;this._gateway.on(Ds.DISCONNECT_P2P,F(function*(){yield n._p2pChannel.disconnectForReconnect()})),this._gateway.on(Ds.CONNECTION_STATE_CHANGE,(o,s,c)=>{var h;if(c===pa.FALLBACK)return;const g=()=>{this.emit(yr.CONNECTION_STATE_CHANGE,o,s,c)};if(Jt.reportApiInvoke(this._sessionId||(null===(h=this._gateway.joinInfo)||void 0===h?void 0:h.sid)||null,{name:pr.CONNECTION_STATE_CHANGE,options:[o,s,c],tag:cr.TRACER}).onSuccess(JSON.stringify({cur:o,prev:s,reason:c})),se.info("[".concat(this._clientId,"] connection state change: ").concat(s," -> ").concat(o)),Pi("info",this,"connection-state-change","".concat(s," -> ").concat(o)),"DISCONNECTED"===o)return this._reset(),void g();if("RECONNECTING"===o)this._users.forEach(A=>{A._trust_in_room_=!1,A._trust_audio_enabled_state_=!1,A._trust_video_enabled_state_=!1,A._trust_audio_mute_state_=!1,A._trust_video_mute_state_=!1,A._trust_audio_stream_added_state_=!1,A._trust_video_stream_added_state_=!1,A._audioSSRC=void 0,A._videoSSRC=void 0,A._videoOrtc=void 0,A._audioOrtc=void 0,A._cname=void 0,A._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===o){var f;this._streamFallbackTypeCacheMap.forEach((A,_)=>{this._gateway.setStreamFallbackOption(_,A).catch(E=>{se.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E),En("warning",this,"auto set stream fallback option failed, ".concat(E.toString()))})}),this._remoteStreamTypeCacheMap.forEach((A,_)=>{this._gateway.setRemoteVideoStreamType(_,A).catch(E=>{se.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E),En("warning",this,"auto set remote stream type failed, ".concat(E.toString()))})}),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(f=this._joinInfo)||void 0===f?void 0:f.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{se.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(A=>{se.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(A))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter(A=>!A._trust_in_room_).forEach(A=>{se.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(A.uid)),En("debug",this,"user offline timeout, emit user offline ".concat(A.uid)),this._handleUserOffline({uid:A.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach(A=>{A._trust_audio_mute_state_||(se.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(A.uid)),En("debug",this,"auto dispatch audio unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"audio",!1)),A._trust_video_mute_state_||(se.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(A.uid)),En("debug",this,"auto dispatch video unmute event ".concat(A.uid)),this._handleMuteStream(A.uid,"video",!1)),A._trust_audio_enabled_state_||(se.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(A.uid)),En("debug",this,"auto dispatch enable local audio ".concat(A.uid)),this._handleSetStreamLocalEnable("audio",A.uid,!0)),A._trust_video_enabled_state_||(se.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(A.uid)),En("debug",this,"auto dispatch enable local video ".concat(A.uid)),this._handleSetStreamLocalEnable("video",A.uid,!0)),A._trust_video_stream_added_state_||(se.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(A.uid)),this._handleResetAddStream(A,"video")),A._trust_audio_stream_added_state_||(se.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(A.uid)),this._handleResetAddStream(A,"audio")),A._video_added_||A._audio_added_||(se.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(A.uid)),En("debug",this,"auto dispatch stream remove ".concat(A.uid)),this._handleRemoveStream({uid:A.uid,uint_id:A._uintid}))}))},1e3)}g()}),this._gateway.on(Ds.REQUEST_NEW_GATEWAY_LIST,(o,s)=>{if(!this._joinInfo)return s(new ye(pe.UNEXPECTED_ERROR,"can not recover, no join info"));Jk(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||wn,this.store).then(c=>{this._joinInfo&&(this._joinInfo.apResponse=c.gatewayInfo.res,this._joinInfo.gatewayAddrs=c.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=c.gatewayInfo.uni_lbs_ip),o(c.gatewayInfo.gatewayAddrs.map(h=>{if(this._joinInfo&&this._joinInfo.proxyServer){const g=h.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(g[0],"&p=").concat(g[1])}return"wss://".concat(h.address)}))}).catch(s)}),this._gateway.on(Ds.NETWORK_QUALITY,o=>{"normal"===this._networkQualitySensitivity&&this.emit(yr.NETWORK_QUALITY,o)}),this._gateway.on(Ds.STREAM_TYPE_CHANGE,(o,s)=>{this.emit(yr.STREAM_TYPE_CHANGED,o,s),Jt.reportApiInvoke(this._sessionId,{name:pr.STREAM_TYPE_CHANGE,options:[o,s],tag:cr.TRACER}).onSuccess(JSON.stringify({uid:o,streamType:s}))}),this._gateway.on(Ds.IS_P2P_DISCONNECTED,o=>{this._p2pChannel.isP2PDisconnected()?o(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?o(!1):o(!0)}),this._gateway.on(Ds.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Ds.REQUEST_P2P_CONNECTION_PARAMS,function(){var o=F(function*(s,c,h){try{c(yield n._p2pChannel.startP2PConnection(s))}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this._gateway.on(Ds.JOIN_RESPONSE,(o,s,c)=>{const{dtlsParameters:h,iceParameters:g,candidates:f,rtpCapabilities:A,setup:_,cname:E}=C6(o.ortc,s,c);this._p2pChannel.connect(g,h,f,A,_,E)}),this._gateway.signal.on(Fi.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Fi.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Fi.ON_ADD_AUDIO_STREAM,o=>this._handleAddAudioOrVideoStream("audio",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc)),this._gateway.signal.on(Fi.ON_ADD_VIDEO_STREAM,o=>this._handleAddAudioOrVideoStream("video",o.uid,o.ssrcId,o.cname,o.uint_id,o.ortc,o.rtxSsrcId)),this._gateway.signal.on(Fi.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Fi.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Fi.MUTE_AUDIO,o=>(Pi("debug",["AgoraRTCGateway",this._clientId],"mute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!0))),this._gateway.signal.on(Fi.UNMUTE_AUDIO,o=>(Pi("debug",["AgoraRTCGateway",this._clientId],"unmute_audio",{uid:o.uid}),this._handleMuteStream(o.uid,"audio",!1))),this._gateway.signal.on(Fi.MUTE_VIDEO,o=>(Pi("debug",["AgoraRTCGateway",this._clientId],"mute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!0))),this._gateway.signal.on(Fi.UNMUTE_VIDEO,o=>(Pi("debug",["AgoraRTCGateway",this._clientId],"unmute_video",{uid:o.uid}),this._handleMuteStream(o.uid,"video",!1))),this._gateway.signal.on(Fi.RECEIVE_METADATA,o=>{const s=Rx(o.metadata);this.emit(yr.RECEIVE_METADATA,o.uid,s)}),this._gateway.signal.on(Fi.ON_DATA_STREAM,o=>{o.seq&&delete o.seq,o.payload=Rx(o.payload),this.emit(yr.STREAM_MESSAGE,o.uid,o.payload),this.onStreamMessage&&this.onStreamMessage(o)}),this._gateway.signal.on(Fi.ON_CRYPT_ERROR,()=>{Ok(()=>{se.warning("[".concat(this._clientId,"] on crypt error")),Pi("warning",this,"crypt_error"),this.emit(yr.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Fi.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Fi.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{se.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),Pi("warning",this,"token_privilege_did_expire"),this._gateway.leave(!0),this.emit(yr.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Fi.ON_STREAM_FALLBACK_UPDATE,o=>{se.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(o.stream_id,", attr: ").concat(o.stream_type)),Pi("debug",this,"stream_fallback_update",{peerId:o.stream_id,attr:o.stream_type}),this.emit(yr.STREAM_FALLBACK,o.stream_id,1===o.stream_type?"fallback":"recover")}),this._gateway.signal.on(Fi.ON_PUBLISH_STREAM,o=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:o.proxy})),se.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(o))),Pi("info",this,"publish_stream",o))}),this._gateway.signal.on(Fi.ENABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!0)}),this._gateway.signal.on(Fi.DISABLE_LOCAL_VIDEO,o=>{this._handleSetStreamLocalEnable("video",o.uid,!1)}),this._gateway.signal.on(ei.REQUEST_TIMEOUT,(o,s)=>{if(this._joinInfo)switch(o){case di.PUBLISH:{if(!s)return;const A=s.ortc;if(A){var c,h,g,f;const _=A.some(I=>{let{stream_type:R}=I;return R===gs.Audio}),E=A.some(I=>{let{stream_type:R}=I;return R!==gs.Audio}),S=A.some(I=>{let{stream_type:R}=I;return R===gs.Screen||R===gs.ScreenLow});"offer"===s.state&&Jt.publish(this._joinInfo.sid,{eventElapse:$l.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:pe.TIMEOUT,audio:_,video:E,p2pid:s.p2p_id,publishRequestid:this.store.pubId,screenshare:S,audioName:_?null===(c=A.find(I=>{let{stream_type:R}=I;return R===gs.Audio}))||void 0===c||null===(h=c.ssrcs[0])||void 0===h?void 0:h.ssrcId.toString():void 0,videoName:E?null===(g=A.find(I=>{let{stream_type:R}=I;return R!==gs.Audio}))||void 0===g||null===(f=g.ssrcs[0])||void 0===f?void 0:f.ssrcId.toString():void 0})}break}case di.SUBSCRIBE:s&&Jt.subscribe(this._joinInfo.sid,{succ:!1,ec:pe.TIMEOUT,audio:s.stream_type===ti.AUDIO,video:s.stream_type===ti.VIDEO,peerid:s.stream_id,subscribeRequestid:s.ssrcId,p2pid:this.store.p2pId,eventElapse:$l.measureFromSubscribeStart(this.store.clientId,s.ssrcId)})}}),this._gateway.signal.on(Fi.ON_P2P_OK,o=>{}),this._gateway.signal.on(Fi.ON_PUBLISHED_USER_LIST,o=>{if(null==o||!o.users)return;const s=[],c=[];for(const h of o.users){let g=this._users.find(S=>S.uid===h.stream_id);g?g._trust_in_room_=!0:(g=new oL(h.stream_id,h.stream_id),this._users.push(g),0===this.getListeners(yr.PUBLISHED_USER_LIST).length&&(se.debug("[".concat(this._clientId,"] user online"),h.stream_id),fs("info",this,"user-joined",{uid:h.stream_id}),this.emit(yr.USER_JOINED,g)));const f=Uo.Audio&h.stream_type,A=(Uo.Video|Uo.LwoVideo)&h.stream_type,_=f&&g.hasAudio,E=A&&g.hasVideo;A&&(g._trust_video_stream_added_state_=!0,g._video_added_=!0,g._videoSSRC=h.video_ssrc),f&&(g._trust_audio_stream_added_state_=!0,g._audio_added_=!0,g._audioSSRC=h.audio_ssrc),f&&!_&&0===this.getListeners(yr.PUBLISHED_USER_LIST).length&&(se.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published audio")),En("info",this,"remote user ".concat(g.uid," published audio")),this.emit(yr.USER_PUBLISHED,g,"audio")),A&&!E&&0===this.getListeners(yr.PUBLISHED_USER_LIST).length&&(se.info("[".concat(this._clientId,"] remote user ").concat(g.uid," published video")),En("info",this,"remote user ".concat(g.uid," published video")),this.emit(yr.USER_PUBLISHED,g,"video")),(f&&!_||A&&!E)&&s.push(g),A&&this._p2pChannel.hasPendingRemoteMedia(g,"video")&&c.push({user:g,mediaType:"video"}),f&&this._p2pChannel.hasPendingRemoteMedia(g,"audio")&&c.push({user:g,mediaType:"audio"})}c.length>0&&(se.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(c.map(h=>"user: ".concat(h.user.uid,", mediaType: ").concat(h.mediaType)).join("; ")," ")),this.massSubscribe(c).catch(h=>{se.error("[".concat(this._clientId,"] mass resubscribe error"),h.toString())})),this.getListeners(yr.PUBLISHED_USER_LIST).length>0?(se.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(s.map(h=>h.uid).join(", "))),this.emit(yr.PUBLISHED_USER_LIST,s)):se.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(s.map(h=>h.uid).join(", ")))})}_handleP2PChannelEvents(){var n=this;this._p2pChannel.on(vi.RequestMuteLocal,function(){var o=F(function*(s,c,h){if(n._joinInfo)try{yield n._gateway.muteLocal(s,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===pe.DISCONNECT_P2P?c():h(g)}else c()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(vi.RequestUnmuteLocal,function(){var o=F(function*(s,c,h){if(n._joinInfo)try{yield n._gateway.unmuteLocal(s,n._joinInfo.stringUid||n._joinInfo.uid),c()}catch(g){g.code===pe.DISCONNECT_P2P?c():h(g)}else c()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(vi.RequestRePublish,(o,s,c)=>{this.publish(o,!1).then(s).catch(c)}),this._p2pChannel.on(vi.RequestReSubscribe,function(){var o=F(function*(s,c,h){try{for(const{user:g,kind:f}of s)f===ti.VIDEO?yield n.subscribe(g,"video"):yield n.subscribe(g,"audio");c()}catch(g){h(g)}});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(vi.RequestUploadStats,(o,s)=>{this._gateway.uploadStats(o,s)}),this._p2pChannel.on(vi.MediaReconnectStart,o=>{this.emit(yr.MEDIA_RECONNECT_START,o)}),this._p2pChannel.on(vi.MediaReconnectEnd,o=>{this.emit(yr.MEDIA_RECONNECT_END,o)}),this._p2pChannel.on(vi.NeedSignalRTT,o=>{o(this._gateway.getSignalRTT())}),this._p2pChannel.on(vi.RequestRestartICE,F(function*(){const o=yield n._p2pChannel.reEstablish();if(o){const{restartICEResponse:s,gatewayIP:c,gatewayPort:h}=yield n._gateway.restartICE({iceParameters:o.iceParameters}),{candidates:g,iceParameters:f}=function(A,_,E){const S=A.iceParameters;let I;return void 0!==_&&void 0!==E?(I=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:_,port:E.toString(),type:"host",extension:{}}],se.debug("Using remote candidate from AP ".concat(_,":").concat(E)),En("debug",[],"Using remote candidate from AP ".concat(_,":").concat(E))):I=S.candidates.map(R=>({foundation:R.foundation,componentId:"1",transport:R.protocol,priority:R.priority.toString(),connectionAddress:R.ip,port:R.port.toString(),type:R.type,extension:{}})),{candidates:I,iceParameters:{iceUfrag:S.iceUfrag,icePwd:S.icePwd}}}(s,c,h);yield o.restartICE(f,g)}})),this._p2pChannel.on(vi.RequestReconnect,F(function*(){n._gateway.reconnect()})),this._p2pChannel.on(vi.RequestReconnectPC,F(function*(){var o;const{iceParameters:s,dtlsParameters:c,rtpCapabilities:h}=yield n._p2pChannel.startP2PConnection({turnServer:null===(o=n._joinInfo)||void 0===o?void 0:o.turnServer}),{gatewayEstablishParams:g,gatewayIP:f,gatewayPort:A}=yield n._gateway.reconnectPC({iceParameters:s,dtlsParameters:c,rtpCapabilities:h}),{dtlsParameters:_,iceParameters:E,candidates:S,rtpCapabilities:I,setup:R,cname:M}=C6(g,f,A);yield n._p2pChannel.connect(E,_,S,I,R,M),yield n._p2pChannel.republish(),yield n._p2pChannel.reSubscribe()})),this._p2pChannel.on(vi.RequestUnpublishForReconnectPC,function(){var o=F(function*(s,c,h){n._joinInfo&&void 0!==n._uid?(yield n._gateway.unpublish(s,n._uid),c()):h()});return function(s,c,h){return o.apply(this,arguments)}}()),this._p2pChannel.on(vi.P2PLost,()=>{this.emit(yr.P2P_LOST,this.store.uid)}),this._p2pChannel.on(vi.UpdateVideoEncoder,o=>{o._encoderConfig&&this._gateway.setVideoProfile(o._encoderConfig)}),this._p2pChannel.on(vi.ConnectionTypeChange,o=>{this.emit(yr.IS_USING_CLOUD_PROXY,o)}),this._p2pChannel.on(vi.RequestLowStreamParameter,o=>{o(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})}getKeyMetrics(){return this.store.keyMetrics}enableContentInspect(n){var o=this;return F(function*(){if("CONNECTED"!==o.connectionState||!o._joinInfo)throw new ye(pe.INVALID_OPERATION,"[".concat(o._clientId,"] Client did not join channel"));if(o._inspect)throw new ye(pe.INVALID_OPERATION,"[".concat(o._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new ye(pe.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig is necessary"));if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new ye(pe.INVALID_PARAMS,"[".concat(o._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const s=new PL(n);o._inspect=s,o.handleVideoInspectEvents(o._inspect),yield s.init({appId:o._joinInfo.appId,areaCode:"",cname:o._joinInfo.cname,sid:o._joinInfo.sid,token:o._joinInfo.token,uid:o._joinInfo.uid,cid:o._joinInfo.cid,vid:o._joinInfo.vid?Number(o._joinInfo.vid):0},wn)}catch(s){throw Array.isArray(s)?s[0]:s}})()}disableContentInspect(){var n=this;return F(function*(){if(!n._inspect)throw new ye(pe.INVALID_OPERATION,"[".concat(n._clientId,"] inspectVideoContent not started"));try{n._inspect.close(),n._inspect=void 0}catch(o){throw Array.isArray(o)?o[0]:o}})()}handleVideoInspectEvents(n){n.on(os.CONNECTION_STATE_CHANGE,(o,s)=>{if(this.emit(yr.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,o,s),s===hl.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.emit(yr.CONTENT_INSPECT_ERROR,new ye(pe.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(os.INSPECT_RESULT,(o,s)=>{var c;if(s?.code===pe.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return se.debug("Stop inspect content because that has left channel"),null==this||null===(c=this._inspect)||void 0===c||c.close(),void(this._inspect=void 0);this.emit(yr.CONTENT_INSPECT_RESULT,o,s)}),n.on(os.CLIENT_LOCAL_VIDEO_TRACK,o=>{o(this.localTracks.filter(s=>"video"===s.trackMediaType)[0])})}getJoinChannelServiceRecords(){return se.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}_handleResetAddStream(n,o){switch(o){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"setProxyServer",[X6],Object.getOwnPropertyDescriptor(r.prototype,"setProxyServer"),r.prototype),rr(r.prototype,"setTurnServer",[k4],Object.getOwnPropertyDescriptor(r.prototype,"setTurnServer"),r.prototype),rr(r.prototype,"setLocalAccessPoints",[NL],Object.getOwnPropertyDescriptor(r.prototype,"setLocalAccessPoints"),r.prototype),rr(r.prototype,"setRemoteDefaultVideoStreamType",[P4],Object.getOwnPropertyDescriptor(r.prototype,"setRemoteDefaultVideoStreamType"),r.prototype),rr(r.prototype,"setEncryptionConfig",[Z6],Object.getOwnPropertyDescriptor(r.prototype,"setEncryptionConfig"),r.prototype),rr(r.prototype,"pickSVCLayer",[mW],Object.getOwnPropertyDescriptor(r.prototype,"pickSVCLayer"),r.prototype),rr(r.prototype,"enableContentInspect",[gW],Object.getOwnPropertyDescriptor(r.prototype,"enableContentInspect"),r.prototype),rr(r.prototype,"disableContentInspect",[_W],Object.getOwnPropertyDescriptor(r.prototype,"disableContentInspect"),r.prototype),rr(r.prototype,"getJoinChannelServiceRecords",[v2],Object.getOwnPropertyDescriptor(r.prototype,"getJoinChannelServiceRecords"),r.prototype),vW=r))||vW);class d extends _x{set currentState(o){o!==this._currentState&&(this._currentState=o,this.emit($c.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),J(this,"audioBuffer",void 0),J(this,"sourceNode",void 0),J(this,"startPlayTime",0),J(this,"startPlayOffset",0),J(this,"pausePlayTime",0),J(this,"options",void 0),J(this,"currentLoopCount",0),J(this,"_currentState","stopped"),this.audioBuffer=o,this.options=s,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(o){"stopped"===this.currentState?(this.options=o,this.startPlayOffset=this.options.startPlayTime||0):se.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(o){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=o,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=o))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const o=this.context.createBufferSource();return o.buffer=this.audioBuffer,o.loop=!!this.options.loop,o.connect(this.outputNode),o}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const m=new Map;function T(){return T=F(function*(n,o){let s=null;if("string"==typeof n){const h=m.get(n);if(h)return se.debug("use cached audio resource: ",n),h;try{s=(yield Jo(()=>tt.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(g){throw new ye(pe.FETCH_AUDIO_FILE_FAILED,g.toString())}}else s=yield new Qn((g,f)=>{const A=new FileReader;A.onload=_=>{_.target?g(_.target.result):f(new ye(pe.READ_LOCAL_AUDIO_FILE_ERROR))},A.onerror=()=>{f(new ye(pe.READ_LOCAL_AUDIO_FILE_ERROR))},A.readAsArrayBuffer(n)});const c=yield function(h){const g=Ck();return new Qn((f,A)=>{g.decodeAudioData(h,_=>{f(_)},_=>{A(new ye(pe.DECODE_AUDIO_FILE_FAILED,_.toString()))})})}(s);return"string"==typeof n&&o&&m.set(n,c),c}),T.apply(this,arguments)}function N(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable})),s.push.apply(s,c)}return s}function U(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?N(Object(s),!0).forEach(function(c){J(n,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(s,c))})}return n}function ne(n,o,s,c){s.optimizationMode&&(c&&c.width&&c.height?(s.encoderConfig=U(U({},c),{},{bitrateMin:c.bitrateMin,bitrateMax:c.bitrateMax}),"motion"!==s.optimizationMode&&"detail"!==s.optimizationMode||(o.contentHint=s.optimizationMode,o.contentHint===s.optimizationMode?(se.debug("[".concat(n,"] set content hint to"),s.optimizationMode),nr("debug",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,s,c])):(se.debug("[".concat(n,"] set content hint failed")),nr("warning",["AgoraRTC"],"videoTrackOptimizationModeProcess",[n,s,c],"failed")))):(se.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")),En("warning",["AgoraRTC"],"[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig"))))}const ve=wi().name;function Qe(n,o,s,c){let h,g=0,f=null;return new Qn((A,_)=>{setTimeout(()=>{h&&(h(),A(g))},o),h=q5(()=>{!function(){g>c&&h&&(h(),A(g));const E=s.getContext("2d");if(!E){const R=new ye(pe.UNEXPECTED_ERROR,"can not get canvas 2d context.");return se.error(R.toString()),void _(R)}E.drawImage(n,0,0,160,120);const S=E.getImageData(0,0,s.width,s.height),I=Math.floor(S.data.length/3);if(f){for(let R=0;R<I;R+=3)if(S.data[R]!==f[R])return g+=1,void(f=S.data);f=S.data}else f=S.data}()},30)})}class Ke{constructor(o,s){J(this,"id",0),J(this,"element",void 0),J(this,"peerPair",void 0),J(this,"context",void 0),J(this,"audioPlayerElement",void 0),J(this,"audioTrack",void 0),Ke.count+=1,this.id=Ke.count,this.element=o,this.context=s}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=o=>{const s=document.createElement("audio");s.srcObject=new MediaStream([o.track]),s.play(),this.audioPlayerElement=s}}switchSdp(){var o=this;return F(function*(){if(!o.peerPair)return;const s=function(){var h=F(function*(g,f){const A="offer"===f?yield g.createOffer():yield g.createAnswer();return yield g.setLocalDescription(A),"complete"===g.iceGatheringState?g.localDescription:new Qn(_=>{g.onicegatheringstatechange=()=>{"complete"===g.iceGatheringState&&_(g.localDescription)}})});return function(f,A){return h.apply(this,arguments)}}(),c=function(){var h=F(function*(g,f){return yield g.setRemoteDescription(f)});return function(f,A){return h.apply(this,arguments)}}();try{const h=yield s(o.peerPair[0],"offer");yield c(o.peerPair[1],h);const g=yield s(o.peerPair[1],"answer");yield c(o.peerPair[0],g)}catch(h){throw new ye(pe.LOCAL_AEC_ERROR,h.toString()).print()}})()}getTracksFromMediaElement(o){var s=this;return F(function*(){if(s.audioTrack)return s.audioTrack;let c;try{o instanceof HTMLVideoElement&&(o.captureStream?o.captureStream():o.mozCaptureStream()),c=s.context.createMediaStreamDestination(),s.context.createMediaElementSource(o).connect(c)}catch(g){throw new ye(pe.LOCAL_AEC_ERROR,g.toString()).print()}if(!c)throw new ye(pe.LOCAL_AEC_ERROR,"no dest node when local aec").print();const h=c.stream.getAudioTracks()[0];return s.audioTrack=h,h})()}getElement(){return this.element}startEchoCancellation(){var o=this;return F(function*(){o.context.resume(),o.peerPair&&o.close(),o.initPeers();const s=o.element,c=yield o.getTracksFromMediaElement(s);o.peerPair&&o.peerPair[0].addTrack(c),yield o.switchSdp()})()}close(){se.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(o=>{o.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var at,Ot;J(Ke,"count",0);const tn=window.AudioContext||window.webkitAudioContext,an=new(at=Ek({report:Jt}),rr((Ot=class{constructor(){J(this,"units",[]),J(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return se.debug("the system does not need to process local aec"),-1;this.context||(this.context=new tn);let o=this.units.find(s=>s&&s.getElement()===n);return o||(o=new Ke(n,this.context),this.units.push(o)),o.startEchoCancellation(),se.debug("start processing local audio echo cancellation, id is",o.id),o.id}_doesEnvironmentNeedAEC(){return wi().name!==Ii.SAFARI}}).prototype,"processExternalMediaAEC",[at],Object.getOwnPropertyDescriptor(Ot.prototype,"processExternalMediaAEC"),Ot.prototype),Ot);kc("PROCESS_ID","process-".concat(vs(8,""),"-").concat(vs(4,""),"-").concat(vs(4,""),"-").concat(vs(4,""),"-").concat(vs(12,""))),function(){const n=wi();Pc.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Pc.getStreamFromExtension=n.name===Ii.CHROME&&Number(n.version)>34,Pc.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const o=new RTCPeerConnection;let s=!1;try{o.addTransceiver("audio"),s=!0}catch{}return o.close(),s}(),Pc.supportMinBitrate=n.name===Ii.CHROME||n.name===Ii.EDGE,Pc.supportSetRtpSenderParameters=function(){const o=wi();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!P0()||!(!Ql()&&!Hw())||o.name===Ii.FIREFOX&&Number(o.version)>=64)}(),n.name===Ii.SAFARI&&(Pc.supportDualStream=Number(n.version)>=14),Pc.webAudioMediaStreamDest=function(){const o=wi();return!(o.name===Ii.SAFARI&&Number(o.version)<12)}(),Pc.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Pc.supportWebGL=typeof WebGLRenderingContext<"u",Pc.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,P0()||(Pc.webAudioWithAEC=!0),Pc.supportShareAudio=function(){const o=wi();return(o.os===ds.WIN_10||o.os===ds.WIN_81||o.os===ds.WIN_7||o.os===ds.LINUX||o.os===ds.MAC_OS)&&o.name===Ii.CHROME&&Number(o.version)>=74}(),Pc.supportDualStreamEncoding=function(){const o=wi();return"Safari"===o.name&&Number(o.version)>=14}(),se.info("browser compatibility",JSON.stringify(Pc),JSON.stringify(n)),zt("info",[],"updateAgoraRTCCompatibility",{browserCompatibility:Pc,browserInfo:n})}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(o){return void se.error("Error loading sdk config",o.message)}if(n)try{const o=JSON.parse(window.atob(n)),s=Date.now();se.debug("Loading global parameters from cache",o),zt("debug",[],"loadConfigFromLocalStorage",o),Object.keys(o).forEach(c=>{if(Object.prototype.hasOwnProperty.call(ul,c)){const{value:h,expires:g}=o[c];if(g&&g<=s)return;_V[c]=h,ul[c]=h}})}catch(o){se.error("Error loading mutableParamsCache: ".concat(n),o.message)}}();const Pn={__CLIENT_LIST__:rk,__TRACK_LIST__:zw,VERSION:Wl,BUILD:OF,setParameter:kc,getParameter:Qt,getSupportedCodec:function(){var n=F(function*(){let o={audio:[],video:[]};try{let s=new RTCPeerConnection;s.addTransceiver("video",{direction:"recvonly"}),s.addTransceiver("audio",{direction:"recvonly"});const c=(yield s.createOffer()).sdp;if(!c)return o;s.close(),s=null,o=function(h){const g={video:[],audio:[]};return h.match(/ VP8/i)&&g.video.push("VP8"),h.match(/ VP9/i)&&g.video.push("VP9"),h.match(/ AV1/i)&&g.video.push("AV1"),h.match(/ H264/i)&&g.video.push("H264"),h.match(/ opus/i)&&g.audio.push("OPUS"),h.match(/ PCMU/i)&&g.audio.push("PCMU"),h.match(/ PCMA/i)&&g.audio.push("PCMA"),h.match(/ G722/i)&&g.audio.push("G722"),g}(c)}catch(s){throw new ye(pe.CREATE_OFFER_FAILED,s.toString&&s.toString()).print()}return o});return function(){return n.apply(this,arguments)}}(),checkSystemRequirements:function(){const n=Jt.reportApiInvoke(null,{name:pr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:cr.TRACER});let o=!1;try{const g=window.RTCPeerConnection,f=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,A=window.WebSocket;o=!!(g&&f&&A)}catch(g){return se.error("check system requirement failed: ",g),!1}let s=!1;const c=wi();c.name===Ii.CHROME&&Number(c.version)>=58&&(!function k0(){return"WebKit"===bp.engine.name}()||function GD(){const n=wi();if(Hw()){if(n.os===ds.MAC_OS)return!0;if(n.os===ds.IOS){const o=bp.os.version&&bp.os.version.split(".");if(o&&14===Number(o[0])&&o[1]&&Number(o[1])>=3||o&&Number(o[0])>14)return!0}}return!1}())&&(s=!0),c.name===Ii.FIREFOX&&Number(c.version)>=56&&(s=!0),c.name===Ii.OPERA&&Number(c.version)>=45&&(s=!0),c.name===Ii.SAFARI&&Number(c.version)>=11&&(s=!0),(AF()||wi().name===Ii.QQ)&&(s=!0),se.debug("checkSystemRequirements, api:",o,"browser",s);const h=o&&s;return n.onSuccess(h),h},getDevices:function(n){return Jl.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return Jl.getRecordingDevices(n)},getCameras:function(n){return Jl.getCamerasDevices(n)},getElectronScreenSources:J5,getPlaybackDevices:function(n){return Jl.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const o=Jt.reportApiInvoke(null,{name:pr.CREATE_CLIENT,options:[n],tag:cr.TRACER});try{jF(n)}catch(s){throw o.onError(s),s}return void 0===n.audioCodec&&(n.audioCodec="opus"),o.onSuccess(),new a(e(e({forceWaitGatewayResponse:!0},n),{},{role:"rtc"===n.mode?"host":n.role}))},createCameraVideoTrack:function(){var n=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{encoderConfig:"480p_1"};const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_CAM_VIDEO_TRACK,options:[U({},o)]}),c=WU(o),h=vs(8,"track-cam-");let g=null;se.info("start create camera video track with config",JSON.stringify(o),"trackId",h),nr("info",["AgoraRTC"],"createCameraVideoTrack",o);try{g=(yield pl({video:c},h)).getVideoTracks()[0]||null}catch(A){throw s.onError(A),A}if(!g){const A=new ye(pe.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(A),A.throw()}o.optimizationMode&&ne(h,g,o,o.encoderConfig&&L0(o.encoderConfig));const f=new G8(g,o,c,o.scalabiltyMode?ek(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,h);return s.onSuccess(f.getTrackId()),se.info("create camera video success, trackId:",h),nr("info",["AgoraRTC"],"createCameraVideoTrack",void 0,h),f});return function(){return n.apply(this,arguments)}}(),createCustomVideoTrack:function(n){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),s=new ea(n.mediaStreamTrack,{bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?ek(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode);return o.onSuccess(s.getTrackId()),se.info("create custom video track success with config",n,"trackId",s.getTrackId()),nr("info",["AgoraRTC"],"createCustomVideoTrack",n,s.getTrackId()),s},createScreenVideoTrack:function(){var n=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_SCREEN_VIDEO_TRACK,options:[U({},o),s]});o.encoderConfig?"string"==typeof o.encoderConfig||o.encoderConfig.width&&o.encoderConfig.height||(o.encoderConfig.width={max:1920},o.encoderConfig.height={max:1080}):o.encoderConfig="1080p_2";const h=rG(o),g=vs(8,"track-scr");let f=null,A=null;const _=Zc();if(!_.supportShareAudio&&"enable"===s){const I=new ye(pe.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return c.onError(I),I.throw()}se.info("start create screen video track with config",o,"withAudio",s,"trackId",g),nr("info",["AgoraRTC"],"createScreenVideoTrack",[o,s]);try{const I=yield pl({screen:h,screenAudio:"auto"===s?_.supportShareAudio:"enable"===s},g);f=I.getVideoTracks()[0]||null,A=I.getAudioTracks()[0]||null}catch(I){throw c.onError(I),I}if(!f){const I=new ye(pe.UNEXPECTED_ERROR,"can not find track in media stream");return c.onError(I),I.throw()}if(!A&&"enable"===s){f&&f.stop();const I=new ye(pe.SHARE_AUDIO_NOT_ALLOWED);return c.onError(I),I.throw()}o.optimizationMode||(o.optimizationMode="detail"),o.optimizationMode&&(ne(g,f,o,o.encoderConfig&&DF(o.encoderConfig)),o.encoderConfig&&"string"!=typeof o.encoderConfig&&(o.encoderConfig.bitrateMin=o.encoderConfig.bitrateMax));const E=new ea(f,o.encoderConfig?DF(o.encoderConfig):{},o.scalabiltyMode?ek(o.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},o.optimizationMode,g,[Xc.SCREEN_TRACK]);if(!A)return c.onSuccess(E.getTrackId()),se.info("create screen video track success","video:",E.getTrackId()),nr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:E.getTrackId()}),E;const S=new gc(A);return c.onSuccess([E.getTrackId(),S.getTrackId()]),se.info("create screen video track success","video:",E.getTrackId(),"audio:",S.getTrackId()),nr("info",["AgoraRTC"],"createScreenVideoTrack",void 0,{videoTrack:E.getTrackId(),audioTrack:S.getTrackId()}),[E,S]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAndCameraTracks:function(){var n=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoderConfig:"480p_1"};const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_MIC_AND_CAM_TRACKS,options:[o,s]}),h=WU(s),g=iG(o),f=vs(8,"track-mic-"),A=vs(8,"track-cam-");let _=null,E=null;se.info("start create camera video track(".concat(A,") and microphone audio track(").concat(f,") with config, audio: ").concat(JSON.stringify(o),", video: ").concat(JSON.stringify(s))),nr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",{videoConfig:s,audioConfig:o});try{const R=yield pl({audio:g,video:h},"".concat(f,"-").concat(A));_=R.getAudioTracks()[0],E=R.getVideoTracks()[0]}catch(R){throw c.onError(R),R}if(!_||!E){const R=new ye(pe.UNEXPECTED_ERROR,"can not find tracks in media stream");return c.onError(R),R.throw()}s.optimizationMode&&ne(A,E,s,s.encoderConfig&&L0(s.encoderConfig));const S=new X0(_,o,g,f),I=new G8(E,s,h,s.scalabiltyMode?ek(s.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},s.optimizationMode,A);return c.onSuccess([S.getTrackId(),I.getTrackId()]),se.info("create camera video track(".concat(A,") and microphone audio track(").concat(f,") success")),nr("info",["AgoraRTC"],"createMicrophoneAndCameraTracks",void 0,{videoTrackId:A,audioTrackId:f}),[S,I]});return function(){return n.apply(this,arguments)}}(),createMicrophoneAudioTrack:function(){var n=F(function*(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_MIC_AUDIO_TRACK,options:[o]}),c=iG(o),h=vs(8,"track-mic-");let g=null;se.info("start create microphone audio track with config",JSON.stringify(o),"trackId",h),nr("info",["AgoraRTC"],"createMicrophoneAudioTrack",o);try{g=(yield pl({audio:c},h)).getAudioTracks()[0]||null}catch(A){throw s.onError(A),A}if(!g){const A=new ye(pe.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(A),A.throw()}const f=new X0(g,o,c,h);return s.onSuccess(f.getTrackId()),se.info("create microphone audio track success, trackId:",h),nr("info",["AgoraRTC"],"createMicrophoneAudioTrack",o,h),f});return function(){return n.apply(this,arguments)}}(),createCustomAudioTrack:function(n){const o=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),s=new gc(n.mediaStreamTrack,n.encoderConfig?tk(n.encoderConfig):{});return se.info("create custom audio track success with config",n,"trackId",s.getTrackId()),nr("info",["AgoraRTC"],"createCustomAudioTrack",n,s.getTrackId()),o.onSuccess(s.getTrackId()),s},createBufferSourceAudioTrack:function(){var n=F(function*(o){const s=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CREATE_BUFFER_AUDIO_TRACK,options:[o]}),c=vs(8,"track-buf-");se.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",c),nr("info",[],"createBufferSourceAudioTrack",o);const h=o.source;if(!(o.source instanceof AudioBuffer))try{o.source=yield function b(n,o){return T.apply(this,arguments)}(o.source,o.cacheOnlineFile)}catch(A){return s.onError(A),A.throw()}const g=new d(o.source),f=new sj(h,g,o.encoderConfig?tk(o.encoderConfig):{},c);return se.info("create buffer source audio track success, trackId:",c),nr("info",["AgoraRTC"],"createBufferSourceAudioTrack",void 0,c),s.onSuccess(f.getTrackId()),f});return function(s){return n.apply(this,arguments)}}(),setLogLevel:function(n){Qt("USE_NEW_LOG")?function(o){o=Math.min(Math.max(0,o),4),Sn=o}(n):se.setLogLevel(n)},enableLogUpload:function(){Qt("USE_NEW_LOG")?kc("UPLOAD_LOG",!0):se.enableLogUpload()},disableLogUpload:function(){Qt("USE_NEW_LOG")?kc("UPLOAD_LOG",!1):se.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new VU},checkAudioTrackIsActive:function(){var n=F(function*(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[s]});if(!(o instanceof gc||o instanceof g2)){const E=new ye(pe.INVALID_TRACK,"the parameter is not a audio track");return c.onError(E),E.throw()}s&&s<1e3&&(s=1e3);const h=o instanceof gc?o.getTrackLabel():"remote_track",g=o.getVolumeLevel();let f=g,A=g;const _=Date.now();return new Qn(E=>{const S=setInterval(()=>{const I=o.getVolumeLevel();f=I>f?I:f,A=I<A?I:A;const R=f-A>1e-4,M=Date.now()-_;if(R||M>s){clearInterval(S);const Q=R,H={duration:M,deviceLabel:h,maxVolumeLevel:f,result:Q};se.info("[track-".concat(o.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(H))),c.onSuccess(H),E(Q)}},200)})});return function(s){return n.apply(this,arguments)}}(),checkVideoTrackIsActive:function(){var n=F(function*(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const c=Jt.reportApiInvoke(null,{tag:cr.TRACER,name:pr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[s]});if(!(o instanceof ea||o instanceof RL)){const M=new ye(pe.INVALID_TRACK,"the parameter is not a video track");return c.onError(M),M.throw()}const h=4;s&&s<1e3&&(s=1e3);const g=o instanceof ea?o.getTrackLabel():"remote_track",f=o.getMediaStreamTrack(!0),A=document.createElement("video");A.style.width="1px",A.style.height="1px",A.setAttribute("muted",""),A.muted=!0,A.setAttribute("playsinline",""),A.controls=!1,(Ql()||Hw())&&(A.style.opacity="0.01",A.style.position="fixed",A.style.left="0",A.style.top="0",document.body.appendChild(A)),A.srcObject=new MediaStream([f]),A.play();const _=document.createElement("canvas");_.width=160,_.height=120;let E=0,S=0;try{const M=Date.now();E=yield Qe(A,s,_,h),S=Date.now()-M}catch(M){throw c.onError(M),M}ve===Ii.SAFARI&&(A.pause(),A.remove()),A.srcObject=null;const I=E>h,R={duration:S,changedPicNum:E,deviceLabel:g,result:I};return se.info("[track-".concat(o.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),c.onSuccess(R),I});return function(s){return n.apply(this,arguments)}}(),setArea:function(n){const o=Jt.reportApiInvoke(null,{name:pr.SET_AREA,options:n,tag:cr.TRACER});try{let s=[];if("string"==typeof n&&(s=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!LM.includes(h))throw new ye(pe.INVALID_PARAMS,"invalid area code")}),s=n),"[object Object]"===Object.prototype.toString.call(n)){const{areaCode:h,excludedArea:g}=n;if(!h)throw new ye(pe.INVALID_PARAMS,"area code is needed");let f=h;"string"==typeof h&&(f=[h]),s=g?function(n,o){let s=[];if(n.includes(pi.GLOBAL)){const g=[pi.GLOBAL,pi.OVERSEA],f=Object.keys(ak);if(o===pi.GLOBAL)throw new ye(pe.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(o===pi.CHINA)s=[pi.OVERSEA];else if(MU.includes(o)){const A=Jx[pi.GLOBAL][o]||[],_=[...g,o,...A];s=f.filter(E=>!_.includes(E))}else if(function(A){let _=!1;return MU.forEach(E=>{Jx[pi.GLOBAL][E].includes(A)&&(_=!0)}),_}(o)){const A=function(E){let S;return MU.forEach(I=>{Jx[pi.GLOBAL][I].includes(E)&&(S=I)}),S}(o),_=[...g,A,o];s=f.filter(E=>!_.includes(E))}else s=n;s=function(A){const _=[];return m8.forEach(E=>{A.includes(E)&&_.push(E)}),_.concat(A.filter(E=>!m8.includes(E)))}(s)}else s=n;return s}(f,g):f}kc("AREAS",s);const c=(h=>{const g={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return h.map(f=>{const A=ak[f],_=Object.keys(A);_&&_.map(E=>{"CODE"!==E&&(g[E]=g[E].concat(A[E]))})}),g})(s);Object.keys(c).map(h=>{kc(h,"LOG_UPLOAD_SERVER"===h||"EVENT_REPORT_DOMAIN"===h||"EVENT_REPORT_BACKUP_DOMAIN"===h||"PROXY_SERVER_TYPE3"===h?c[h][0]:c[h])}),se.debug("set area success:",s.join(","))}catch(s){throw o.onError(s),s}o.onSuccess()},loadModule:function(){var n=F(function*(o,s){if(se.debug("loadModule: ".concat(o.name,", loadOption: ").concat(JSON.stringify(s))),!o.moduleInit)throw se.debug("Invalid Plugin"),new ye(pe.INVALID_PLUGIN,"invalid plugin");try{Sk.installPlugin(o),yield o.moduleInit({logger:se,report:Jt,pluginCenter:Sk,getParameter:Qt},s)}catch(c){throw new ye(pe.UNEXPECTED_ERROR,"unexpected error in loadModule",c)}});return function(s,c){return n.apply(this,arguments)}}(),audioElementPlayCenter:Hd,processExternalMediaAEC:function(n){an.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(o=>{const s=o;s.__registered__=!0,s.logger.hookLog=se.extLog,s.reporter.hookApiInvoke=Jt.extApiInvoke,s.parameters&&Object.keys(s.parameters).forEach(c=>{s.parameters[c]=Qt(c)})})},ChannelMediaRelayError:Z_,ChannelMediaRelayEvent:Df,ChannelMediaRelayState:hc,RemoteStreamFallbackType:xV,RemoteStreamType:GF,ConnectionDisconnectedReason:pa,AudienceLatencyLevelType:NM,AREAS:pi};return Object.defineProperties(Pn,{onAudioAutoplayFailed:{get:()=>jd.onAudioAutoplayFailed,set:n=>{jd.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>jd.onAutoplayFailed,set:n=>{jd.onAutoplayFailed=n}}}),Jl.on(hg.CAMERA_DEVICE_CHANGED,n=>{se.info("camera device changed",JSON.stringify(n)),Pn.onCameraChanged&&Pn.onCameraChanged(n)}),Jl.on(hg.RECORDING_DEVICE_CHANGED,n=>{se.info("microphone device changed",JSON.stringify(n)),Pn.onMicrophoneChanged&&Pn.onMicrophoneChanged(n)}),Jl.on(hg.PLAYOUT_DEVICE_CHANGED,n=>{se.debug("playout device changed",JSON.stringify(n)),Pn.onPlaybackDeviceChanged&&Pn.onPlaybackDeviceChanged(n)}),Hd.onAutoplayFailed=()=>{se.info("detect audio element autoplay failed"),jd.onAudioAutoplayFailed&&jd.onAudioAutoplayFailed()},Xr.on("autoplay-failed",()=>{se.info("detect webaudio autoplay failed"),jd.onAudioAutoplayFailed&&jd.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Pn),Pn}()},9069:Oe=>{"use strict";var F,Me="object"==typeof Reflect?Reflect:null,q=Me&&"function"==typeof Me.apply?Me.apply:function(me,Re,Ce){return Function.prototype.apply.call(me,Re,Ce)};F=Me&&"function"==typeof Me.ownKeys?Me.ownKeys:Object.getOwnPropertySymbols?function(me){return Object.getOwnPropertyNames(me).concat(Object.getOwnPropertySymbols(me))}:function(me){return Object.getOwnPropertyNames(me)};var ie=Number.isNaN||function(me){return me!=me};function G(){G.init.call(this)}Oe.exports=G,Oe.exports.once=function z(ke,me){return new Promise(function(Re,Ce){function _e(fe){ke.removeListener(me,ue),Ce(fe)}function ue(){"function"==typeof ke.removeListener&&ke.removeListener("error",_e),Re([].slice.call(arguments))}be(ke,me,ue,{once:!0}),"error"!==me&&function ce(ke,me,Re){"function"==typeof ke.on&&be(ke,"error",me,Re)}(ke,_e,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var V=10;function k(ke){if("function"!=typeof ke)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ke)}function O(ke){return void 0===ke._maxListeners?G.defaultMaxListeners:ke._maxListeners}function x(ke,me,Re,Ce){var _e,ue,fe;if(k(Re),void 0===(ue=ke._events)?(ue=ke._events=Object.create(null),ke._eventsCount=0):(void 0!==ue.newListener&&(ke.emit("newListener",me,Re.listener?Re.listener:Re),ue=ke._events),fe=ue[me]),void 0===fe)fe=ue[me]=Re,++ke._eventsCount;else if("function"==typeof fe?fe=ue[me]=Ce?[Re,fe]:[fe,Re]:Ce?fe.unshift(Re):fe.push(Re),(_e=O(ke))>0&&fe.length>_e&&!fe.warned){fe.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String(me)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=ke,we.type=me,we.count=fe.length,function K(ke){console&&console.warn&&console.warn(ke)}(we)}return ke}function B(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $(ke,me,Re){var Ce={fired:!1,wrapFn:void 0,target:ke,type:me,listener:Re},_e=B.bind(Ce);return _e.listener=Re,Ce.wrapFn=_e,_e}function ae(ke,me,Re){var Ce=ke._events;if(void 0===Ce)return[];var _e=Ce[me];return void 0===_e?[]:"function"==typeof _e?Re?[_e.listener||_e]:[_e]:Re?function Y(ke){for(var me=new Array(ke.length),Re=0;Re<me.length;++Re)me[Re]=ke[Re].listener||ke[Re];return me}(_e):he(_e,_e.length)}function de(ke){var me=this._events;if(void 0!==me){var Re=me[ke];if("function"==typeof Re)return 1;if(void 0!==Re)return Re.length}return 0}function he(ke,me){for(var Re=new Array(me),Ce=0;Ce<me;++Ce)Re[Ce]=ke[Ce];return Re}function be(ke,me,Re,Ce){if("function"==typeof ke.on)Ce.once?ke.once(me,Re):ke.on(me,Re);else{if("function"!=typeof ke.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ke);ke.addEventListener(me,function _e(ue){Ce.once&&ke.removeEventListener(me,_e),Re(ue)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(ke){if("number"!=typeof ke||ke<0||ie(ke))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ke+".");V=ke}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(me){if("number"!=typeof me||me<0||ie(me))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+me+".");return this._maxListeners=me,this},G.prototype.getMaxListeners=function(){return O(this)},G.prototype.emit=function(me){for(var Re=[],Ce=1;Ce<arguments.length;Ce++)Re.push(arguments[Ce]);var _e="error"===me,ue=this._events;if(void 0!==ue)_e=_e&&void 0===ue.error;else if(!_e)return!1;if(_e){var fe;if(Re.length>0&&(fe=Re[0]),fe instanceof Error)throw fe;var we=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw we.context=fe,we}var He=ue[me];if(void 0===He)return!1;if("function"==typeof He)q(He,this,Re);else{var Ue=He.length,Ge=he(He,Ue);for(Ce=0;Ce<Ue;++Ce)q(Ge[Ce],this,Re)}return!0},G.prototype.on=G.prototype.addListener=function(me,Re){return x(this,me,Re,!1)},G.prototype.prependListener=function(me,Re){return x(this,me,Re,!0)},G.prototype.once=function(me,Re){return k(Re),this.on(me,$(this,me,Re)),this},G.prototype.prependOnceListener=function(me,Re){return k(Re),this.prependListener(me,$(this,me,Re)),this},G.prototype.off=G.prototype.removeListener=function(me,Re){var Ce,_e,ue,fe,we;if(k(Re),void 0===(_e=this._events))return this;if(void 0===(Ce=_e[me]))return this;if(Ce===Re||Ce.listener===Re)0==--this._eventsCount?this._events=Object.create(null):(delete _e[me],_e.removeListener&&this.emit("removeListener",me,Ce.listener||Re));else if("function"!=typeof Ce){for(ue=-1,fe=Ce.length-1;fe>=0;fe--)if(Ce[fe]===Re||Ce[fe].listener===Re){we=Ce[fe].listener,ue=fe;break}if(ue<0)return this;0===ue?Ce.shift():function X(ke,me){for(;me+1<ke.length;me++)ke[me]=ke[me+1];ke.pop()}(Ce,ue),1===Ce.length&&(_e[me]=Ce[0]),void 0!==_e.removeListener&&this.emit("removeListener",me,we||Re)}return this},G.prototype.removeAllListeners=function(me){var Re,Ce,_e;if(void 0===(Ce=this._events))return this;if(void 0===Ce.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ce[me]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ce[me]),this;if(0===arguments.length){var fe,ue=Object.keys(Ce);for(_e=0;_e<ue.length;++_e)"removeListener"!==(fe=ue[_e])&&this.removeAllListeners(fe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Re=Ce[me]))this.removeListener(me,Re);else if(void 0!==Re)for(_e=Re.length-1;_e>=0;_e--)this.removeListener(me,Re[_e]);return this},G.prototype.listeners=function(me){return ae(this,me,!0)},G.prototype.rawListeners=function(me){return ae(this,me,!1)},G.listenerCount=function(ke,me){return"function"==typeof ke.listenerCount?ke.listenerCount(me):de.call(ke,me)},G.prototype.listenerCount=de,G.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},302:(Oe,Me,q)=>{"use strict";var F=q(8126);Oe.exports=function K(ie,G,V,k){var O,x=new Error("Canceled");return new F(function($,ae,de){var he;ie(function(Y){return de()?F.reject(x):(he=G(Y),V(he).then(function(ce){if(de())throw x;return O=ce()}))}).then(function(Y){if(de())throw Y.disconnect(),x;$(k(he,Y))}).catch(function(Y){ae(Y)})},function(){O&&O.cancel()})}},5769:(Oe,Me,q)=>{"use strict";var F=q(1647).MediaStreamTrack,K=q(7627),ie=K.guessBrowser,G=K.guessBrowserVersion,V=q(302),k=q(8130),O=q(3383),x=q(3744),B=q(4920),$=q(7379),ae=$.LocalAudioTrack,de=$.LocalDataTrack,he=$.LocalVideoTrack,X=q(4621),Y=q(7406),z=q(448),ce=q(9739),be=ce.asLocalTrack,ke=ce.buildLogLevels,me=ce.filterObject,Re=ce.isNonArrayObject,Ce=q(8701),_e=Ce.DEFAULT_ENVIRONMENT,ue=Ce.DEFAULT_LOG_LEVEL,fe=Ce.DEFAULT_LOGGER_NAME,we=Ce.DEFAULT_REALM,He=Ce.DEFAULT_REGION,Ue=Ce.WS_SERVER,Ge=Ce.SDK_NAME,Ze=Ce.SDK_VERSION,Xe=Ce.typeErrors,Be=q(8126),jt=q(8606),Kt=q(1458),St=q(1501).kG,Ye="safari"===ie()&&G(),je=0,ze=!1,Pe=!1;if(Ye){var rt=Ye.major;Pe=rt<12||12===rt&&Ye.minor<1}var $t=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),Mt=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function Ct(Ln,mn,no){no.forEach(function(jo){var ta=jo.didWarn,Io=jo.name,Ps=jo.newName,wo=jo.shouldDelete;Io in Ln&&typeof Ln[Io]<"u"&&(Ps&&wo&&(Ln[Ps]=Ln[Io]),wo&&delete Ln[Io],!ta&&!["error","off"].includes(mn.level)&&(mn.warn('The ConnectOptions "'+Io+'" is '+(Ps?'deprecated and scheduled for removal. Please use "'+Ps+'" instead.':"no longer applicable and will be ignored.")),jo.didWarn=!0))})}function Gt(Ln,mn,no,jo,ta,Io){var Ps=Ln.createLocalParticipantSignaling(no,jo);return mn.debug("Creating a new LocalParticipant:",Ps),new ta.LocalParticipant(Ps,Io,ta)}function on(Ln,mn,no){var jo=new Y(mn,no,Ln),ta=Ln.log;return ta.debug("Creating a new Room:",jo),no.on("stateChanged",function Io(Ps){"disconnected"===Ps&&(ta.info("Disconnected from Room:",jo.toString()),no.removeListener("stateChanged",Io))}),jo}function qe(Ln,mn,no,jo,ta,Io){return mn.log.debug("Creating a new RoomSignaling"),no.connect(Io._signaling,Ln,jo,ta,mn)}function Fe(Ln,mn){var no=Ln.log;return Ln.shouldStopLocalTracks=!Ln.tracks,Ln.shouldStopLocalTracks?no.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(no.info("Getting LocalTracks"),no.debug("Options:",Ln)),Ln.createLocalTracks(Ln).then(function(ta){var Io=mn(ta);return Io.catch(function(){Ln.shouldStopLocalTracks&&(no.info("The automatically acquired LocalTracks will now be stopped"),ta.forEach(function(wo){wo.stop()}))}),Io})}function ut(Ln){var mn="string"==typeof Ln?{codec:Ln}:Ln;switch(mn.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},mn);case"vp8":return Object.assign({simulcast:!1},mn);default:return mn}}Oe.exports=function en(Ln,mn){if(typeof mn>"u"&&(mn={}),!Re(mn))return Be.reject(Xe.INVALID_TYPE("options","object"));var wo,no=mn.Log||Kt,jo=mn.loggerName||fe,ta=mn.logLevel||ue,Io=ke(ta),Ps="[connect #"+ ++je+"]";try{wo=new no("default",Ps,Io,jo)}catch(Tr){return Be.reject(Tr)}Ct(mn,wo,$t);var nd="auto"===mn.preferredVideoCodecs;if(nd&&(mn.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),mn.maxVideoBitrate&&nd)return wo.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),Be.reject(Xe.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var Vn={};"string"==typeof(mn=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:_e,eventListener:null,insights:!0,LocalAudioTrack:ae,LocalDataTrack:de,LocalParticipant:O,LocalVideoTrack:he,Log:no,MediaStreamTrack:F,loggerName:jo,logLevel:ta,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:we,region:He,signaling:z},me(mn))).wsServerInsights&&(Vn.gateway=mn.wsServerInsights);var $e=new(mn.insights?x:B)(Ln,Ge,Ze,mn.environment,mn.realm,Vn),ft=Ue(mn.environment,mn.region),_t=new jt($e,Date.now(),wo,mn.eventListener);if((mn=Object.assign({eventObserver:_t,wsServer:ft},mn)).log=wo,Pe&&!ze&&"error"!==wo.logLevel&&"off"!==wo.logLevel&&(ze=!0,wo.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof Ln)return Be.reject(Xe.INVALID_TYPE("token","string"));var sn=Object.assign({},mn);if(delete sn.name,"tracks"in mn){if(!Array.isArray(mn.tracks))return Be.reject(Xe.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{mn.tracks=mn.tracks.map(function(Tr){return be(Tr,sn)})}catch(Tr){return Be.reject(Tr)}}var _n=St(mn.bandwidthProfile);if(_n)return Be.reject(_n);mn.clientTrackSwitchOffControl="disabled",mn.contentPreferencesMode="disabled",mn.bandwidthProfile&&(mn.clientTrackSwitchOffControl="auto",mn.contentPreferencesMode="auto",mn.bandwidthProfile.video&&(Ct(mn.bandwidthProfile.video,wo,Mt),mn.clientTrackSwitchOffControl="maxTracks"in mn.bandwidthProfile.video?"disabled":"manual"===mn.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",mn.contentPreferencesMode="renderDimensions"in mn.bandwidthProfile.video?"disabled":"manual"===mn.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var To=new(0,mn.signaling)(mn.wsServer,mn);wo.info("Connecting to a Room"),wo.debug("Options:",mn);var bs=new k({maxAudioBitrate:mn.maxAudioBitrate,maxVideoBitrate:mn.maxVideoBitrate},nd),Gs={audio:mn.preferredAudioCodecs.map(ut),video:mn.preferredVideoCodecs.map(ut)},po=new X(Re(mn.networkQuality)?mn.networkQuality:{}),ao=V(Fe.bind(null,mn),Gt.bind(null,To,wo,bs,po,mn),qe.bind(null,Ln,mn,To,bs,Gs),on.bind(null,mn));return ao.then(function(Tr){return $e.connect(Tr.sid,Tr.localParticipant.sid),wo.info("Connected to Room:",Tr.toString()),wo.info("Room name:",Tr.name),wo.debug("Room:",Tr),Tr.once("disconnected",function(){return $e.disconnect()}),Tr},function(Tr){$e.disconnect(),ao._isCanceled?wo.info("Attempt to connect to a Room was canceled"):wo.info("Error while connecting to a Room:",Tr)}),ao}},8765:(Oe,Me,q)=>{"use strict";var F=q(8701),K=F.DEFAULT_LOG_LEVEL,ie=F.DEFAULT_LOGGER_NAME;function G(O,x){x=Object.assign({loggerName:ie,logLevel:K},x);var B={};B.loggerName=x.loggerName,B.logLevel=x.logLevel,delete x.loggerName,delete x.logLevel;var $=x.createLocalTracks;return delete x.createLocalTracks,B[O]=!(Object.keys(x).length>0)||x,$(B).then(function(ae){return ae[0]})}Oe.exports={audio:function V(O){return G("audio",O)},video:function k(O){return G("video",O)}}},7124:function(Oe,Me,q){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(_e){for(var ue,fe=1,we=arguments.length;fe<we;fe++)for(var He in ue=arguments[fe])Object.prototype.hasOwnProperty.call(ue,He)&&(_e[He]=ue[He]);return _e},F.apply(this,arguments)},K=this&&this.__awaiter||function(_e,ue,fe,we){return new(fe||(fe=Promise))(function(Ue,Ge){function Ze(jt){try{Be(we.next(jt))}catch(Kt){Ge(Kt)}}function Xe(jt){try{Be(we.throw(jt))}catch(Kt){Ge(Kt)}}function Be(jt){jt.done?Ue(jt.value):function He(Ue){return Ue instanceof fe?Ue:new fe(function(Ge){Ge(Ue)})}(jt.value).then(Ze,Xe)}Be((we=we.apply(_e,ue||[])).next())})},ie=this&&this.__generator||function(_e,ue){var we,He,Ue,Ge,fe={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return Ge={next:Ze(0),throw:Ze(1),return:Ze(2)},"function"==typeof Symbol&&(Ge[Symbol.iterator]=function(){return this}),Ge;function Ze(Be){return function(jt){return function Xe(Be){if(we)throw new TypeError("Generator is already executing.");for(;fe;)try{if(we=1,He&&(Ue=2&Be[0]?He.return:Be[0]?He.throw||((Ue=He.return)&&Ue.call(He),0):He.next)&&!(Ue=Ue.call(He,Be[1])).done)return Ue;switch(He=0,Ue&&(Be=[2&Be[0],Ue.value]),Be[0]){case 0:case 1:Ue=Be;break;case 4:return fe.label++,{value:Be[1],done:!1};case 5:fe.label++,He=Be[1],Be=[0];continue;case 7:Be=fe.ops.pop(),fe.trys.pop();continue;default:if(!(Ue=(Ue=fe.trys).length>0&&Ue[Ue.length-1])&&(6===Be[0]||2===Be[0])){fe=0;continue}if(3===Be[0]&&(!Ue||Be[1]>Ue[0]&&Be[1]<Ue[3])){fe.label=Be[1];break}if(6===Be[0]&&fe.label<Ue[1]){fe.label=Ue[1],Ue=Be;break}if(Ue&&fe.label<Ue[2]){fe.label=Ue[2],fe.ops.push(Be);break}Ue[2]&&fe.ops.pop(),fe.trys.pop();continue}Be=ue.call(_e,fe)}catch(jt){Be=[6,jt],He=0}finally{we=Ue=0}if(5&Be[0])throw Be[1];return{value:Be[0]?Be[1]:void 0,done:!0}}([Be,jt])}}},G=this&&this.__read||function(_e,ue){var fe="function"==typeof Symbol&&_e[Symbol.iterator];if(!fe)return _e;var He,Ge,we=fe.call(_e),Ue=[];try{for(;(void 0===ue||ue-- >0)&&!(He=we.next()).done;)Ue.push(He.value)}catch(Ze){Ge={error:Ze}}finally{try{He&&!He.done&&(fe=we.return)&&fe.call(we)}finally{if(Ge)throw Ge.error}}return Ue},V=this&&this.__spreadArray||function(_e,ue){for(var fe=0,we=ue.length,He=_e.length;fe<we;fe++,He++)_e[He]=ue[fe];return _e};Object.defineProperty(Me,"__esModule",{value:!0}),Me.createLocalTracks=void 0;var k=q(9739),O=k.asLocalTrack,x=k.buildLogLevels,B=q(1647),$=B.getUserMedia,ae=B.MediaStreamTrack,de=q(7379),he=de.LocalAudioTrack,X=de.LocalDataTrack,Y=de.LocalVideoTrack,z=q(1458),ce=q(8701),be=ce.DEFAULT_LOG_LEVEL,ke=ce.DEFAULT_LOGGER_NAME,me=q(3830),Re=0;Me.createLocalTracks=function Ce(_e){return K(this,void 0,void 0,function(){var ue,fe,we,He,Ue,Ge,Ze,Xe,Be,jt,Kt,St;return ie(this,function(Ye){switch(Ye.label){case 0:if(fe=F({audio:ue=!(_e&&("audio"in _e||"video"in _e)),getUserMedia:$,loggerName:ke,logLevel:be,LocalAudioTrack:he,LocalDataTrack:X,LocalVideoTrack:Y,MediaStreamTrack:ae,Log:z,video:ue},_e),we="[createLocalTracks #"+ ++Re+"]",He=x(fe.logLevel),Ue=new fe.Log("default",we,He,fe.loggerName),delete(Ge=Object.assign({log:Ue},fe)).name,!1===fe.audio&&!1===fe.video)return Ue.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(fe.tracks)return Ue.info("Adding user-provided LocalTracks"),Ue.debug("LocalTracks:",fe.tracks),[2,fe.tracks];(Ze={audio:"object"==typeof fe.audio&&fe.audio.name?{name:fe.audio.name}:{},video:"object"==typeof fe.video&&fe.video.name?{name:fe.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,Ze.video.isCreatedByCreateLocalTracks=!0,"object"==typeof fe.audio&&"boolean"==typeof fe.audio.workaroundWebKitBug1208516&&(Ze.audio.workaroundWebKitBug1208516=fe.audio.workaroundWebKitBug1208516),"object"==typeof fe.video&&"boolean"==typeof fe.video.workaroundWebKitBug1208516&&(Ze.video.workaroundWebKitBug1208516=fe.video.workaroundWebKitBug1208516),"object"==typeof fe.audio&&delete fe.audio.name,"object"==typeof fe.video&&delete fe.video.name,Xe={audio:fe.audio,video:fe.video},Be="object"==typeof fe.audio&&fe.audio.workaroundWebKitBug180748,Ye.label=1;case 1:return Ye.trys.push([1,3,,4]),[4,Be?me(Ue,fe.getUserMedia,Xe):fe.getUserMedia(Xe)];case 2:return jt=Ye.sent(),Kt=V(V([],G(jt.getAudioTracks())),G(jt.getVideoTracks())),Ue.info("Call to getUserMedia successful; got MediaStreamTracks:",Kt),[2,Kt.map(function(je){return O(je,F(F({},Ze[je.kind]),Ge))})];case 3:throw St=Ye.sent(),Ue.warn("Call to getUserMedia failed:",St),St;case 4:return[2]}})})}},2498:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(5295),ie=q(9020),G=function(V){function k(O){var x=V.call(this,O.label,O.maxPacketLifeTime,O.maxRetransmits,O.ordered)||this;return Object.defineProperties(x,{_dataChannel:{value:O}}),O.binaryType="arraybuffer",O.addEventListener("message",function(B){x.emit("message",B.data)}),O.addEventListener("close",function(){x.emit("close")}),x}return F(k,V),k.prototype.stop=function(){this._dataChannel.close(),V.prototype.stop.call(this)},k.prototype.toDataTransport=function(){return new ie(this._dataChannel)},k}(K);Oe.exports=G},1866:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(5295),ie=q(9739).makeUUID,G=function(V){function k(O,x,B){var $=V.call(this,ie(),O,x,B)||this;return Object.defineProperties($,{_clones:{value:new Set},_dataChannels:{value:new Set}}),$}return F(k,V),k.prototype._addClone=function(O){this._clones.add(O)},k.prototype.removeClone=function(O){this._clones.delete(O)},k.prototype.addDataChannel=function(O){return this._dataChannels.add(O),this},k.prototype.clone=function(){var O=this,x=new k(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(x),x.once("stopped",function(){return O.removeClone(x)}),x},k.prototype.removeDataChannel=function(O){return this._dataChannels.delete(O),this},k.prototype.send=function(O){return this._dataChannels.forEach(function(x){try{x.send(O)}catch{}}),this._clones.forEach(function(x){try{x.send(O)}catch{}}),this},k.prototype.stop=function(){this._dataChannels.forEach(function(O){return O.close()}),this._clones.forEach(function(O){return O.stop()}),V.prototype.stop.call(this)},k}(K);Oe.exports=G},5295:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B){var $=G.call(this,k,"data")||this;return Object.defineProperties($,{maxPacketLifeTime:{enumerable:!0,value:O},maxRetransmits:{enumerable:!0,value:x},ordered:{enumerable:!0,value:B}}),$}return F(V,G),V}(q(4605));Oe.exports=ie},9020:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k){var O=G.call(this)||this;return Object.defineProperties(O,{_dataChannel:{value:k},_messageQueue:{value:[]}}),k.addEventListener("open",function(){O._messageQueue.splice(0).forEach(function(x){return O._publish(x)})}),k.addEventListener("message",function(x){var B=x.data;try{var $=JSON.parse(B);O.emit("message",$)}catch{}}),O.publish({type:"ready"}),O}return F(V,G),V.prototype._publish=function(k){var O=JSON.stringify(k);try{this._dataChannel.send(O)}catch{}},V.prototype.publish=function(k){var O=this._dataChannel;return"closing"!==O.readyState&&"closed"!==O.readyState&&("connecting"===O.readyState?(this._messageQueue.push(k),!0):(this._publish(k),!0))},V}(q(9069).EventEmitter);Oe.exports=ie},8130:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this)||this;return k=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},k),Object.defineProperties(x,{maxAudioBitrate:{value:k.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:k.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:O}}),x}return F(V,G),V.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},V.prototype.update=function(k){var O=this;k=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},k),["maxAudioBitrate","maxVideoBitrate"].reduce(function(B,$){return O[$]!==k[$]&&(O[$]=k[$],B=!0),B},!1)&&this.emit("changed")},V}(q(9069).EventEmitter);Oe.exports=ie},133:(Oe,Me,q)=>{"use strict";var F=q(9069).EventEmitter,K=q(9739).hidePrivateAndCertainPublicPropertiesInClass;Oe.exports=K(F,["domain"])},6021:function(Oe,Me,q){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(X){for(var Y,z=1,ce=arguments.length;z<ce;z++)for(var be in Y=arguments[z])Object.prototype.hasOwnProperty.call(Y,be)&&(X[be]=Y[be]);return X},F.apply(this,arguments)};Object.defineProperty(Me,"__esModule",{value:!0});var K=q(7124),ie=q(8682),G={connect:q(5769),createLocalAudioTrack:q(8765).audio,createLocalVideoTrack:q(8765).video,isSupported:q(8592)(),version:q(1730).version,Logger:q(7846),LocalAudioTrack:q(7379).LocalAudioTrack,LocalDataTrack:q(7379).LocalDataTrack,LocalVideoTrack:q(7379).LocalVideoTrack};Oe.exports={connect:function V(X,Y){var z=F({createLocalTracks:K.createLocalTracks},Y);return G.connect(X,z)},createLocalAudioTrack:function k(X){var Y=F({createLocalTracks:K.createLocalTracks},X);return G.createLocalAudioTrack(Y)},createLocalVideoTrack:function O(X){var Y=F({createLocalTracks:K.createLocalTracks},X);return G.createLocalVideoTrack(Y)},createLocalTracks:K.createLocalTracks,runPreflight:ie.runPreflight,isSupported:G.isSupported,version:G.version,Logger:G.Logger,LocalAudioTrack:G.LocalAudioTrack,LocalVideoTrack:G.LocalVideoTrack,LocalDataTrack:G.LocalDataTrack}},3383:function(Oe,Me,q){"use strict";var Re,F=this&&this.__extends||(Re=function(Ce,_e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,fe){ue.__proto__=fe}||function(ue,fe){for(var we in fe)Object.prototype.hasOwnProperty.call(fe,we)&&(ue[we]=fe[we])})(Ce,_e)},function(Ce,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function ue(){this.constructor=Ce}Re(Ce,_e),Ce.prototype=null===_e?Object.create(_e):(ue.prototype=_e.prototype,new ue)}),K=q(1647).MediaStreamTrack,ie=q(9739),G=ie.asLocalTrack,V=ie.asLocalTrackPublication,k=ie.trackClass,O=q(8701),x=O.typeErrors,B=O.trackPriority,$=q(1501).Wv,ae=q(7379),de=ae.LocalAudioTrack,he=ae.LocalDataTrack,X=ae.LocalVideoTrack,Y=q(3925),z=q(5229),ce=q(9565),ke=function(Re){function Ce(_e,ue,fe){var we=this,He=(fe=Object.assign({LocalAudioTrack:de,LocalVideoTrack:X,LocalDataTrack:he,MediaStreamTrack:K,LocalAudioTrackPublication:Y,LocalVideoTrackPublication:ce,LocalDataTrackPublication:z,shouldStopLocalTracks:!1,tracks:ue},fe)).shouldStopLocalTracks?new Set(ue.filter(function(Ue){return"data"!==Ue.kind})):new Set;return we=Re.call(this,_e,fe)||this,Object.defineProperties(we,{_eventObserver:{value:fe.eventObserver},_LocalAudioTrack:{value:fe.LocalAudioTrack},_LocalDataTrack:{value:fe.LocalDataTrack},_LocalVideoTrack:{value:fe.LocalVideoTrack},_MediaStreamTrack:{value:fe.MediaStreamTrack},_LocalAudioTrackPublication:{value:fe.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:fe.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:fe.LocalVideoTrackPublication},_tracksToStop:{value:He},signalingRegion:{enumerable:!0,get:function(){return _e.signalingRegion}}}),we._handleTrackSignalingEvents(),we}return F(Ce,Re),Ce.prototype._addTrack=function(_e,ue,fe){var we=Re.prototype._addTrack.call(this,_e,ue);return we&&"disconnected"!==this.state&&this._addLocalTrack(_e,fe),we},Ce.prototype._addLocalTrack=function(_e,ue){this._signaling.addTrack(_e._trackSender,_e.name,ue),this._log.info("Added a new "+k(_e,!0)+":",_e.id),this._log.debug(k(_e,!0)+":",_e)},Ce.prototype._removeTrack=function(_e,ue){var fe=Re.prototype._removeTrack.call(this,_e,ue);return fe&&"disconnected"!==this.state&&(this._signaling.removeTrack(_e._trackSender),this._log.info("Removed a "+k(_e,!0)+":",_e.id),this._log.debug(k(_e,!0)+":",_e)),fe},Ce.prototype._getTrackEvents=function(){return Re.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},Ce.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},Ce.prototype._handleTrackSignalingEvents=function(){var _e=this,ue=this._log;if("disconnected"!==this.state){var fe=this._signaling;this.on("trackDisabled",we),this.on("trackEnabled",He),this.on("trackStopped",Ue),this._tracks.forEach(function(Ze){_e._addLocalTrack(Ze,B.PRIORITY_STANDARD),_e._getOrCreateLocalTrackPublication(Ze).catch(function(Xe){ue.warn("Failed to get or create LocalTrackPublication for "+Ze+":",Xe)})});var Ge=this;fe.on("stateChanged",function Ze(Xe){ue.debug("Transitioned to state:",Xe),"disconnected"===Xe?(ue.debug("Removing LocalTrack event listeners"),fe.removeListener("stateChanged",Ze),Ge.removeListener("trackDisabled",we),Ge.removeListener("trackEnabled",He),Ge.removeListener("trackStopped",Ue),Ge._tracks.forEach(function(Be){var jt=Ue(Be);jt&&Be._trackSender.removeClone(jt._trackTransceiver)}),ue.info("LocalParticipant disconnected. Stopping "+Ge._tracksToStop.size+" automatically-acquired LocalTracks"),Ge._tracksToStop.forEach(function(Be){Be.stop()})):"connected"===Xe&&(ue.info("reconnected"),setTimeout(function(){return Ge.emit("reconnected")},0))})}function we(Ze){var Xe=fe.getPublication(Ze._trackSender);Xe&&(Xe.disable(),ue.debug("Disabled the "+k(Ze,!0)+":",Ze.id))}function He(Ze){var Xe=fe.getPublication(Ze._trackSender);Xe&&(Xe.enable(),ue.debug("Enabled the "+k(Ze,!0)+":",Ze.id))}function Ue(Ze){var Xe=fe.getPublication(Ze._trackSender);return Xe&&Xe.stop(),Xe}},Ce.prototype._getOrCreateLocalTrackPublication=function(_e){var ue=me(this.tracks,_e);if(ue)return Promise.resolve(ue);var fe=this._log,we=this,He=this._signaling.getPublication(_e._trackSender);if(!He)return Promise.reject(new Error("Unexpected error: The "+_e+" cannot be published"));function Ue(Ge){we.unpublishTrack(Ge.track)}return new Promise(function(Ge,Ze){He.on("updated",function Xe(){var Be=He.error;if(Be)return He.removeListener("updated",Xe),fe.warn("Failed to publish the "+k(_e,!0)+": "+Be.message),we._removeTrack(_e,_e.id),setTimeout(function(){we.emit("trackPublicationFailed",Be,_e)}),void Ze(Be);if(!we._tracks.has(_e.id))return He.removeListener("updated",Xe),void Ze(new Error("The "+_e+" was unpublished"));if(He.sid){He.removeListener("updated",Xe);var Kt={log:fe,LocalAudioTrackPublication:we._LocalAudioTrackPublication,LocalDataTrackPublication:we._LocalDataTrackPublication,LocalVideoTrackPublication:we._LocalVideoTrackPublication};(ue=me(we.tracks,_e))||(ue=V(_e,He,Ue,Kt),we._addTrackPublication(ue));var St=we._signaling.state;("connected"===St||"connecting"===St)&&(_e._processorEventObserver&&_e._processorEventObserver.on("event",function(Ye){we._eventObserver.emit("event",{name:Ye.name,payload:Ye.data,group:"video-processor",level:"info"})}),_e.processedTrack&&(_e._captureFrames(),_e._setSenderMediaStreamTrack(!0))),"connected"===St&&setTimeout(function(){we.emit("trackPublished",ue)}),Ge(ue)}})})},Ce.prototype.publishTrack=function(_e,ue){var we,fe=me(this.tracks,_e);if(fe)return Promise.resolve(fe);ue=Object.assign({log:this._log,priority:B.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},ue);try{we=G(_e,ue)}catch(Ge){return Promise.reject(Ge)}var He=Object.values(B);if(!He.includes(ue.priority))return Promise.reject(x.INVALID_VALUE("LocalTrackPublishOptions.priority",He));var Ue=this._addTrack(we,we.id,ue.priority)||this._tracks.get(we.id);return this._getOrCreateLocalTrackPublication(Ue)},Ce.prototype.publishTracks=function(_e){if(!Array.isArray(_e))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(_e.map(this.publishTrack,this))},Ce.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},Ce.prototype.setNetworkQualityConfiguration=function(_e){if("object"!=typeof _e||null===_e)throw x.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(ue){if(ue in _e&&("number"!=typeof _e[ue]||isNaN(_e[ue])))throw x.INVALID_TYPE("networkQualityConfiguration."+ue,"number")}),this._signaling.setNetworkQualityConfiguration(_e),this},Ce.prototype.setParameters=function(_e){if(typeof _e<"u"&&"object"!=typeof _e)throw x.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(_e){if(this._signaling.getParameters().adaptiveSimulcast&&_e.maxVideoBitrate)throw x.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(ue){if(typeof _e[ue]<"u"&&"number"!=typeof _e[ue]&&null!==_e[ue])throw x.INVALID_TYPE("encodingParameters."+ue,"number, null or undefined")})}else null===_e&&(_e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(_e),this},Ce.prototype.unpublishTrack=function(_e){$(_e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var ue=this._tracks.get(_e.id);if(!ue)return null;if(this._signaling.getPublication(ue._trackSender).publishFailed(new Error("The "+ue+" was unpublished")),!(ue=this._removeTrack(ue,ue.id)))return null;var we=me(this.tracks,ue);return we&&this._removeTrackPublication(we),we},Ce.prototype.unpublishTracks=function(_e){var ue=this;if(!Array.isArray(_e))throw x.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return _e.reduce(function(fe,we){var He=ue.unpublishTrack(we);return He?fe.concat(He):fe},[])},Ce}(q(9218));function me(Re,Ce){return Array.from(Re.values()).find(function(_e){return _e.track===Ce||_e.track.mediaStreamTrack===Ce})||null}Oe.exports=ke},1534:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k,O)||this}return F(V,G),V.prototype._start=function(){G.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},V.prototype.attach=function(){return G.prototype.attach.apply(this,arguments)},V.prototype.detach=function(){return G.prototype.detach.apply(this,arguments)},V}(q(5366));Oe.exports=ie},7379:(Oe,Me,q)=>{"use strict";Oe.exports={LocalAudioTrack:q(2954),LocalVideoTrack:q(1),LocalDataTrack:q(1560)}},2954:(Oe,Me,q)=>{"use strict";var F=q(1905),K=q(6213);function ie(G,V){var k=new K(G,V);return Object.setPrototypeOf(k,ie.prototype),k}F(ie,K),Oe.exports=ie},1560:(Oe,Me,q)=>{"use strict";var F=q(1905),K=q(212);function ie(G){var V=new K(G);return Object.setPrototypeOf(V,ie.prototype),V}F(ie,K),Oe.exports=ie},1:(Oe,Me,q)=>{"use strict";var F=q(1905),K=q(4847);function ie(G,V){var k=new K(G,V);return Object.setPrototypeOf(k,ie.prototype),k}F(ie,K),Oe.exports=ie},1703:function(Oe,Me,q){"use strict";var $,F=this&&this.__extends||($=function(ae,de){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,X){he.__proto__=X}||function(he,X){for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(he[Y]=X[Y])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}$(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),K=q(133),ie=q(9739),G=ie.buildLogLevels,V=ie.valueToJSON,k=q(8701).DEFAULT_LOG_LEVEL,O=q(1458),x=0,B=function($){function ae(de,he,X){var Y;X=Object.assign({name:de,log:null,logLevel:k},X),Y=$.call(this)||this;var z=String(X.name),ce=G(X.logLevel),be=X.log?X.log.createLog("media",Y):new O("media",Y,ce,X.loggerName);return Object.defineProperties(Y,{_instanceId:{value:++x},_log:{value:be},kind:{enumerable:!0,value:he},name:{enumerable:!0,value:z}}),Y}return F(ae,$),ae.prototype.toJSON=function(){return V(this)},ae}(K);Oe.exports=B},6213:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(1534),V=function(k){function O(x,B){return k.call(this,x,B)||this}return F(O,k),O.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},O.prototype.attach=function(x){return(x=k.prototype.attach.call(this,x)).muted=!0,x},O.prototype._end=function(){return k.prototype._end.apply(this,arguments)},O.prototype.disable=function(){return k.prototype.disable.apply(this,arguments)},O.prototype.enable=function(){return k.prototype.enable.apply(this,arguments)},O.prototype.restart=function(){return k.prototype.restart.apply(this,arguments)},O.prototype.stop=function(){return k.prototype.stop.apply(this,arguments)},O}(q(8275)(K));Oe.exports=V},3925:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B){return G.call(this,k,O,x,B)||this}return F(V,G),V.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(3335));Oe.exports=ie},212:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(1703),ie=q(1866),G=function(V){function k(O){var x,$=new(0,(O=Object.assign({DataTrackSender:ie,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},O)).DataTrackSender)(O.maxPacketLifeTime,O.maxRetransmits,O.ordered);return x=V.call(this,$.id,"data",O)||this,Object.defineProperties(x,{_trackSender:{value:$},id:{enumerable:!0,value:$.id},maxPacketLifeTime:{enumerable:!0,value:O.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:O.maxRetransmits},ordered:{enumerable:!0,value:O.ordered},reliable:{enumerable:!0,value:null===O.maxPacketLifeTime&&null===O.maxRetransmits}}),x}return F(k,V),k.prototype.send=function(O){this._trackSender.send(O)},k}(K);Oe.exports=G},5229:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B){return G.call(this,k,O,x,B)||this}return F(V,G),V.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(3335));Oe.exports=ie},8275:function(Oe,Me,q){"use strict";var Re,F=this&&this.__extends||(Re=function(Ce,_e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,fe){ue.__proto__=fe}||function(ue,fe){for(var we in fe)Object.prototype.hasOwnProperty.call(fe,we)&&(ue[we]=fe[we])})(Ce,_e)},function(Ce,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function ue(){this.constructor=Ce}Re(Ce,_e),Ce.prototype=null===_e?Object.create(_e):(ue.prototype=_e.prototype,new ue)}),K=q(1647).getUserMedia,ie=q(7627),G=ie.guessBrowser,V=ie.isIOSChrome,k=q(9739),O=k.capitalize,x=k.defer,B=k.isUserMediaTrack,$=k.waitForSometime,ae=k.waitForEvent,de=q(8701).typeErrors.ILLEGAL_INVOKE,he=q(9059),X=q(1741),Y=q(2181),z=q(6396),ce=q(3830),be=q(808);function me(Re){var Ce=Re._log,_e=Re.kind,ue={audio:he,video:X}[_e],fe=Re._dummyEl,we=Re.mediaStreamTrack,He=null;function Ze(){return Promise.race([ae(we,"unmute"),$(50)]).then(function(){return function Ge(){var je=Re.mediaStreamTrack.muted,ze=Re.isStopped&&!!Re._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!He&&(je||ze||function Ue(){return fe.play().then(function(){return ue(fe)}).then(function(St){return St?Ce.warn("Silence detected"):Ce.info("Non-silence detected"),St}).catch(function(St){Ce.warn("Failed to detect silence:",St)}).finally(function(){fe.pause()})}())})}()}).then(function(St){return St&&!He&&(He=x(),Re._restart().finally(function(){fe=Re._dummyEl,jt(),we=Re.mediaStreamTrack,Be(),He.resolve(),He=null}).catch(function(je){Ce.error("failed to restart track: ",je)})),(He&&He.promise||Promise.resolve()).finally(function(){return z.resolveDeferred(_e)})}).catch(function(St){Ce.error("error in maybeRestart: "+St.message)})}function Xe(){var St=Re._log,Ye=Re.kind;St.info("Muted"),St.debug("LocalMediaTrack:",Re),z.startDeferred(Ye)}function Be(){we.addEventListener("ended",Ze),we.addEventListener("mute",Xe),we.addEventListener("unmute",Ze)}function jt(){we.removeEventListener("ended",Ze),we.removeEventListener("mute",Xe),we.removeEventListener("unmute",Ze)}var Kt=function(St){return!!St&&Ze()};return Y.onVisibilityChange(1,Kt),Be(),function(){Y.offVisibilityChange(1,Kt),jt()}}Oe.exports=function ke(Re){return function(Ce){function _e(ue,fe){var we=this,He=("safari"===G()||V())&&B(ue)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;fe=Object.assign({getUserMedia:K,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:He,gUMSilentTrackWorkaround:ce},fe);var Ue=new be(ue),Ge=Ue.kind;return we=Ce.call(this,Ue,fe)||this,Object.defineProperties(we,{_constraints:{value:"object"==typeof fe[Ge]?fe[Ge]:{},writable:!0},_getUserMedia:{value:fe.getUserMedia},_gUMSilentTrackWorkaround:{value:fe.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:fe.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:fe.isCreatedByCreateLocalTracks},_trackSender:{value:Ue},id:{enumerable:!0,value:Ue.id},isEnabled:{enumerable:!0,get:function(){return Ue.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===Ue.readyState}}}),we._workaroundWebKitBug1208516&&(we._workaroundWebKitBug1208516Cleanup=me(we)),we}return F(_e,Ce),_e.prototype._end=function(){this._didCallEnd||(Ce.prototype._end.call(this),this._didCallEnd=!0,this.emit("stopped",this))},_e.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),Ce.prototype._initialize.call(this)},_e.prototype._reacquireTrack=function(ue){var fe,He=this._getUserMedia,Ue=this._gUMSilentTrackWorkaround,Ge=this._log,Ze=this.mediaStreamTrack.kind;Ge.info("Re-acquiring the MediaStreamTrack"),Ge.debug("Constraints:",ue);var Xe=Object.assign({audio:!1,video:!1},((fe={})[Ze]=ue,fe));return(this._workaroundWebKitBug1208516Cleanup?Ue(Ge,He,Xe):He(Xe)).then(function(jt){return jt.getTracks()[0]})},_e.prototype._restart=function(ue){var fe=this,we=this._log;return ue=ue||this._constraints,this._stop(),this._reacquireTrack(ue).catch(function(He){throw we.error("Failed to re-acquire the MediaStreamTrack:",{error:He,constraints:ue}),He}).then(function(He){return we.info("Re-acquired the MediaStreamTrack"),we.debug("MediaStreamTrack:",He),fe._constraints=Object.assign({},ue),fe._setMediaStreamTrack(He)})},_e.prototype._setMediaStreamTrack=function(ue){var fe=this;return ue.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){fe._unprocessedTrack=ue}):this._trackSender.setMediaStreamTrack(ue).catch(function(we){fe._log.warn("setMediaStreamTrack failed:",{error:we,mediaStreamTrack:ue})})).then(function(){fe._initialize(),fe._getAllAttachedElements().forEach(function(we){return fe._attach(we)})})},_e.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},_e.prototype.enable=function(ue){return(ue="boolean"!=typeof ue||ue)!==this.mediaStreamTrack.enabled&&(this._log.info((ue?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=ue,this.emit(ue?"enabled":"disabled",this)),this},_e.prototype.disable=function(){return this.enable(!1)},_e.prototype.restart=function(ue){var fe=this,we=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(de("restart","can only be called on a Local"+O(we)+"Track that is created using createLocalTracks or createLocal"+O(we)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var He=this._restart(ue);return this._workaroundWebKitBug1208516&&(He=He.finally(function(){fe._workaroundWebKitBug1208516Cleanup=me(fe)})),He},_e.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},_e}(Re)}},3335:function(Oe,Me,q){"use strict";var O,F=this&&this.__extends||(O=function(x,B){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ae){$.__proto__=ae}||function($,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&($[de]=ae[de])})(x,B)},function(x,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=x}O(x,B),x.prototype=null===B?Object.create(B):($.prototype=B.prototype,new $)}),K=q(9222),ie=q(8701),G=ie.typeErrors,V=ie.trackPriority,k=function(O){function x(B,$,ae,de){var he=O.call(this,$.name,B.sid,de)||this;return Object.defineProperties(he,{_reemitTrackEvent:{value:function(){return he.emit(he.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:B},_unpublish:{value:ae},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:$.kind},priority:{enumerable:!0,get:function(){return B.updatedPriority}},track:{enumerable:!0,value:$}}),$.on("disabled",he._reemitTrackEvent),$.on("enabled",he._reemitTrackEvent),he}return F(x,O),x.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},x.prototype.setPriority=function(B){var $=Object.values(V);if(!$.includes(B))throw G.INVALID_VALUE("priority",$);return this._signaling.setPriority(B),this},x.prototype.unpublish=function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this},x}(K);Oe.exports=k},4847:function(Oe,Me,q){"use strict";var de,F=this&&this.__extends||(de=function(he,X){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,z){Y.__proto__=z}||function(Y,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(Y[ce]=z[ce])})(he,X)},function(he,X){if("function"!=typeof X&&null!==X)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function Y(){this.constructor=he}de(he,X),he.prototype=null===X?Object.create(X):(Y.prototype=X.prototype,new Y)}),K=q(7627),ie=K.guessBrowser,G=K.isIOSChrome,V=q(1741),k=q(8275),O=q(4332),x=q(9739).isUserMediaTrack,$=function(de){function he(X,Y){var z=this;return Y=Object.assign({workaroundSilentLocalVideo:("safari"===ie()||G())&&x(X)&&typeof document<"u"&&"function"==typeof document.createElement},Y),z=de.call(this,X,Y)||this,Object.defineProperties(z,{_workaroundSilentLocalVideo:{value:Y.workaroundSilentLocalVideo?ae:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),z._workaroundSilentLocalVideo&&(z._workaroundSilentLocalVideoCleanup=z._workaroundSilentLocalVideo(z,document)),z}return F(he,de),he.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},he.prototype._checkIfCanCaptureFrames=function(){return de.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},he.prototype._end=function(){return de.prototype._end.apply(this,arguments)},he.prototype._setSenderMediaStreamTrack=function(X){var Y=this,z=this.mediaStreamTrack,ce=X?this.processedTrack:z;return this._trackSender.setMediaStreamTrack(ce).catch(function(be){return Y._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:be,mediaStreamTrack:ce})}).then(function(){Y._unprocessedTrack=X?z:null})},he.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var X=de.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),X):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},he.prototype.removeProcessor=function(){var X=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var Y=de.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return X._updateElementsMediaStreamTrack()}),Y},he.prototype.disable=function(){var X=de.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),X},he.prototype.enable=function(X){void 0===X&&(X=!0);var Y=de.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=X,X&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),Y},he.prototype.restart=function(){var X=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var Y=de.prototype.restart.apply(this,arguments);return this.processor&&Y.then(function(){X._restartProcessor()}),this._workaroundSilentLocalVideo&&Y.finally(function(){X._workaroundSilentLocalVideoCleanup=X._workaroundSilentLocalVideo(X,document)}),Y},he.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),de.prototype.stop.apply(this,arguments)},he}(k(O));function ae(de,he){var X=de._log,Y=de._dummyEl,z=de.mediaStreamTrack;function ce(){!de.isEnabled||(X.info("Unmuted, checking silence"),Y.play().then(function(){return V(Y,he)}).then(function(be){if(be)return X.warn("Silence detected, restarting"),de._stop(),de._restart();X.info("Non-silent frames detected, so no need to restart")}).catch(function(be){X.warn("Failed to detect silence and restart:",be)}).finally(function(){(Y=de._dummyEl).paused||Y.pause(),z.removeEventListener("unmute",ce),(z=de.mediaStreamTrack).addEventListener("unmute",ce)}))}return z.addEventListener("unmute",ce),function(){z.removeEventListener("unmute",ce)}}Oe.exports=$},9565:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B){return G.call(this,k,O,x,B)||this}return F(V,G),V.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(3335));Oe.exports=ie},5366:function(Oe,Me,q){"use strict";var X,F=this&&this.__extends||(X=function(Y,z){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,be){ce.__proto__=be}||function(ce,be){for(var ke in be)Object.prototype.hasOwnProperty.call(be,ke)&&(ce[ke]=be[ke])})(Y,z)},function(Y,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ce(){this.constructor=Y}X(Y,z),Y.prototype=null===z?Object.create(z):(ce.prototype=z.prototype,new ce)}),K=q(7627),ie=K.guessBrowser,G=K.isIOSChrome,V=q(1647).MediaStream,k=q(9739),O=k.waitForEvent,x=k.waitForSometime,B=q(6396),ae=function(X){function Y(z,ce){var be=this;ce=Object.assign({playPausedElementsIfNotBackgrounded:("safari"===ie()||G())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},ce),be=X.call(this,z.id,z.kind,ce)||this;var ke=!1;return ce=Object.assign({MediaStream:V},ce),Object.defineProperties(be,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return ke},set:function(me){ke=me}},_playPausedElementsIfNotBackgrounded:{value:ce.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:ce.workaroundWebKitBug212780||ce.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:ce.MediaStream},isStarted:{enumerable:!0,get:function(){return ke}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||z.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),be._initialize(),be}return F(Y,X),Y.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},Y.prototype._initialize=function(){var z=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function ce(){z._end(),z.mediaStreamTrack.removeEventListener("ended",ce)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},Y.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},Y.prototype.attach=function(z){var ce=this;if("string"==typeof z?z=this._selectElement(z):z||(z=this._createElement()),this._log.debug("Attempting to attach to element:",z),z=this._attach(z),this._shouldShimAttachedElements&&!this._elShims.has(z)){var be=this._playPausedElementsIfNotBackgrounded?function(){return function de(X,Y){var z=X.tagName.toLowerCase();Y.warn("Unintentionally paused:",X),Promise.race([O(document,"visibilitychange"),x(1e3)]).then(function(){"visible"===document.visibilityState&&B.whenResolved("audio").then(function(){return Y.info("Playing unintentionally paused <"+z+"> element"),Y.debug("Element:",X),X.play()}).then(function(){Y.info("Successfully played unintentionally paused <"+z+"> element"),Y.debug("Element:",X)}).catch(function(ce){Y.warn("Error while playing unintentionally paused <"+z+"> element:",{error:ce,el:X})})})}(z,ce._log)}:null;this._elShims.set(z,function he(X,Y){void 0===Y&&(Y=null);var z=X.pause,ce=X.play,be=!1;X.pause=function(){return be=!0,z.call(X)},X.play=function(){return be=!1,ce.call(X)};var ke=Y?function(){be||Y()}:null;return ke&&X.addEventListener("pause",ke),{pausedIntentionally:function(){return be},unShim:function(){X.pause=z,X.play=ce,ke&&X.removeEventListener("pause",ke)}}}(z,be))}return z},Y.prototype._attach=function(z,ce){void 0===ce&&(ce=this.processedTrack||this.mediaStreamTrack);var be=z.srcObject;return be instanceof this._MediaStream||(be=new this._MediaStream),be["audio"===ce.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(me){be.removeTrack(me)}),be.addTrack(ce),z.srcObject=be,z.autoplay=!0,z.playsInline=!0,this._attachments.has(z)||this._attachments.add(z),z},Y.prototype._selectElement=function(z){var ce=document.querySelector(z);if(!ce)throw new Error("Selector matched no element: "+z);return ce},Y.prototype._updateElementsMediaStreamTrack=function(){var z=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(ce){return z._attach(ce)})},Y.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},Y.prototype.detach=function(z){var ce;return ce="string"==typeof z?[this._selectElement(z)]:z?[z]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",ce),this._detachElements(ce),z?ce[0]:ce},Y.prototype._detachElements=function(z){return z.map(this._detachElement.bind(this))},Y.prototype._detachElement=function(z){if(!this._attachments.has(z))return z;var ce=z.srcObject;return ce instanceof this._MediaStream&&ce.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(z),this._shouldShimAttachedElements&&this._elShims.has(z)&&(this._elShims.get(z).unShim(),this._elShims.delete(z)),z},Y.prototype._getAllAttachedElements=function(){var z=[];return this._attachments.forEach(function(ce){z.push(ce)}),z},Y}(q(1703));Oe.exports=ae},3501:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k,O)||this}return F(V,G),V}(q(1639));Oe.exports=ie},8797:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(1534),V=function(k){function O(x,B,$,ae,de,he,X){return k.call(this,x,B,$,ae,de,he,X)||this}return F(O,k),O.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},O.prototype.setPriority=function(x){return k.prototype.setPriority.call(this,x)},O}(q(1628)(K));Oe.exports=V},8661:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k,O)||this}return F(V,G),V.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(1521));Oe.exports=ie},5606:function(Oe,Me,q){"use strict";var B,F=this&&this.__extends||(B=function($,ae){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,he){de.__proto__=he}||function(de,he){for(var X in he)Object.prototype.hasOwnProperty.call(he,X)&&(de[X]=he[X])})($,ae)},function($,ae){if("function"!=typeof ae&&null!==ae)throw new TypeError("Class extends value "+String(ae)+" is not a constructor or null");function de(){this.constructor=$}B($,ae),$.prototype=null===ae?Object.create(ae):(de.prototype=ae.prototype,new de)}),K=this&&this.__read||function(B,$){var ae="function"==typeof Symbol&&B[Symbol.iterator];if(!ae)return B;var he,Y,de=ae.call(B),X=[];try{for(;(void 0===$||$-- >0)&&!(he=de.next()).done;)X.push(he.value)}catch(z){Y={error:z}}finally{try{he&&!he.done&&(ae=de.return)&&ae.call(de)}finally{if(Y)throw Y.error}}return X},ie=this&&this.__spreadArray||function(B,$){for(var ae=0,de=$.length,he=B.length;ae<de;ae++,he++)B[he]=$[ae];return B},G=q(1703),V=q(8701),k=V.typeErrors,O=V.trackPriority,x=function(B){function $(ae,de,he){var X=B.call(this,de.id,"data",he)||this;return Object.defineProperties(X,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:de.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:de.maxRetransmits},ordered:{enumerable:!0,value:de.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===de.maxPacketLifeTime&&null===de.maxRetransmits},sid:{enumerable:!0,value:ae}}),de.on("message",function(Y){X.emit("message",Y,X)}),X}return F($,B),$.prototype.setPriority=function(ae){var de=ie([null],K(Object.values(O)));if(!de.includes(ae))throw k.INVALID_VALUE("priority",de);return this._priority=ae,this},$.prototype._setEnabled=function(){},$.prototype._setSwitchedOff=function(ae){this._isSwitchedOff!==ae&&(this._isSwitchedOff=ae,this.emit(ae?"switchedOff":"switchedOn",this))},$}(G);Oe.exports=x},8459:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k,O)||this}return F(V,G),V.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(1521));Oe.exports=ie},1628:function(Oe,Me,q){"use strict";var he,F=this&&this.__extends||(he=function(X,Y){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var be in ce)Object.prototype.hasOwnProperty.call(ce,be)&&(z[be]=ce[be])})(X,Y)},function(X,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function z(){this.constructor=X}he(X,Y),X.prototype=null===Y?Object.create(Y):(z.prototype=Y.prototype,new z)}),K=this&&this.__read||function(he,X){var Y="function"==typeof Symbol&&he[Symbol.iterator];if(!Y)return he;var ce,ke,z=Y.call(he),be=[];try{for(;(void 0===X||X-- >0)&&!(ce=z.next()).done;)be.push(ce.value)}catch(me){ke={error:me}}finally{try{ce&&!ce.done&&(Y=z.return)&&Y.call(z)}finally{if(ke)throw ke.error}}return be},ie=this&&this.__spreadArray||function(he,X){for(var Y=0,z=X.length,ce=he.length;Y<z;Y++,ce++)he[ce]=X[Y];return he},G=q(8701),V=G.typeErrors,k=G.trackPriority,O=q(7627),x=O.guessBrowser,B=O.isIOSChrome,$=q(2181);Oe.exports=function ae(he){return function(X){function Y(z,ce,be,ke,me,Re,Ce){var _e=this;return Ce=Object.assign({workaroundWebKitBug212780:("safari"===x()||B())&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},Ce),_e=X.call(this,ce,Ce)||this,Object.defineProperties(_e,{_isEnabled:{value:be,writable:!0},_isSwitchedOff:{value:ke,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:me},_setRenderHint:{value:function(ue){_e._log.debug("updating render hint:",ue),Re(ue)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:z},_workaroundWebKitBug212780:{value:Ce.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),_e}return F(Y,X),Y.prototype.setPriority=function(z){var ce=ie([null],K(Object.values(k)));if(!ce.includes(z))throw V.INVALID_VALUE("priority",ce);return this._priority!==z&&(this._priority=z,this._setPriority(z)),this},Y.prototype._setEnabled=function(z){this._isEnabled!==z&&(this._isEnabled=z,this.emit(this._isEnabled?"enabled":"disabled",this))},Y.prototype._setSwitchedOff=function(z){this._isSwitchedOff!==z&&(this._isSwitchedOff=z,this.emit(z?"switchedOff":"switchedOn",this))},Y.prototype.attach=function(z){var ce=X.prototype.attach.call(this,z);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function de(he){var X=he._log,Y=he.kind;function z(ce){!ce||he._attachments.forEach(function(be){var ke=he._elShims.get(be);be.paused&&ke&&!ke.pausedIntentionally()&&(X.info("Playing inadvertently paused <"+Y+"> element"),X.debug("Element:",be),X.debug("RemoteMediaTrack:",he),be.play().then(function(){X.info("Successfully played inadvertently paused <"+Y+"> element"),X.debug("Element:",be),X.debug("RemoteMediaTrack:",he)}).catch(function(Re){X.warn("Error while playing inadvertently paused <"+Y+"> element:",{err:Re,el:be,remoteMediaTrack:he})}))})}return $.onVisibilityChange(2,z),function(){$.offVisibilityChange(2,z)}}(this)),ce},Y.prototype.detach=function(z){var ce=X.prototype.detach.call(this,z);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),ce},Y}(he)}},1521:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k.name,k.sid,O)||this;Object.defineProperties(x,{_signaling:{value:k},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return k.isEnabled}},kind:{enumerable:!0,value:k.kind},publishPriority:{enumerable:!0,get:function(){return k.priority}},track:{enumerable:!0,get:function(){return this._track}}});var B=k.error,$=k.isEnabled,ae=k.isSwitchedOff,de=k.priority;return k.on("updated",function(){if(B!==k.error)return B=k.error,void x.emit("subscriptionFailed",k.error);$!==k.isEnabled&&($=k.isEnabled,x.track&&x.track._setEnabled(k.isEnabled),x.emit(k.isEnabled?"trackEnabled":"trackDisabled")),ae!==k.isSwitchedOff&&(x._log.debug(x.trackSid+": "+(ae?"OFF":"ON")+" => "+(k.isSwitchedOff?"OFF":"ON")),ae=k.isSwitchedOff,x.track?(x.track._setSwitchedOff(k.isSwitchedOff),x.emit(ae?"trackSwitchedOff":"trackSwitchedOn",x.track)):ae&&x._log.warn("Track was not subscribed when switched Off.")),de!==k.priority&&x.emit("publishPriorityChanged",de=k.priority)}),x}return F(V,G),V.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V.prototype._subscribed=function(k){!this._track&&k&&(this._track=k,this.emit("subscribed",k))},V.prototype._unsubscribe=function(){if(this._track){var k=this._track;this._track=null,this.emit("unsubscribed",k)}},V}(q(9222));Oe.exports=ie},1629:function(Oe,Me,q){"use strict";var X,F=this&&this.__extends||(X=function(Y,z){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,be){ce.__proto__=be}||function(ce,be){for(var ke in be)Object.prototype.hasOwnProperty.call(be,ke)&&(ce[ke]=be[ke])})(Y,z)},function(Y,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ce(){this.constructor=Y}X(Y,z),Y.prototype=null===z?Object.create(z):(ce.prototype=z.prototype,new ce)}),K=this&&this.__read||function(X,Y){var z="function"==typeof Symbol&&X[Symbol.iterator];if(!z)return X;var be,me,ce=z.call(X),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(be=ce.next()).done;)ke.push(be.value)}catch(Re){me={error:Re}}finally{try{be&&!be.done&&(z=ce.return)&&z.call(ce)}finally{if(me)throw me.error}}return ke},ie=q(1628),G=q(4332),V=q(2181),k=q(5318).NullObserver,O=q(6543),$=function(X){function Y(z,ce,be,ke,me,Re,Ce){var _e=this;return Ce=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},Ce),Ce=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==Ce.clientTrackSwitchOffControl?k:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==Ce.contentPreferencesMode?k:ResizeObserver},Ce),_e=X.call(this,z,ce,be,ke,me,Re,Ce)||this,Object.defineProperties(_e,{_enableDocumentVisibilityTurnOff:{value:!0===Ce.enableDocumentVisibilityTurnOff&&"auto"===Ce.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:Ce.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Ce.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new O(function(){_e._setRenderHint({enabled:!1})},50,!1)},_resizeObserver:{value:new Ce.ResizeObserver(function(ue){ue.find(function(we){return!_e._invisibleElements.has(we.target)})&&he(_e)})},_intersectionObserver:{value:new Ce.IntersectionObserver(function(ue){var fe=!1;ue.forEach(function(we){!_e._invisibleElements.has(we.target)!==we.isIntersecting&&(we.isIntersecting?(_e._log.debug("intersectionObserver detected: Off => On"),_e._invisibleElements.delete(we.target)):(_e._log.debug("intersectionObserver detected: On => Off"),_e._invisibleElements.add(we.target)),fe=!0)}),fe&&(de(_e),he(_e))},{threshold:.25})}}),_e}return F(Y,X),Y.prototype._start=function(z){var ce=X.prototype._start.call(this,z);return de(this),ce},Y.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},Y.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},Y.prototype.setContentPreferences=function(z){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return z.renderDimensions&&this._setRenderHint({renderDimensions:z.renderDimensions}),this},Y.prototype._unObservePip=function(z){var ce=this._elToPipCallbacks.get(z);ce&&(z.removeEventListener("enterpictureinpicture",ce.onEnterPip),z.removeEventListener("leavepictureinpicture",ce.onLeavePip),this._elToPipCallbacks.delete(z))},Y.prototype._observePip=function(z){var ce=this;if(!this._elToPipCallbacks.get(z)){var ke=function(Ce){return ce._onEnterPip(Ce,z)},me=function(Ce){return ce._onLeavePip(Ce,z)};z.addEventListener("enterpictureinpicture",ke),z.addEventListener("leavepictureinpicture",me),this._elToPipCallbacks.set(z,{onEnterPip:ke,onLeavePip:me,onResizePip:function(Ce){return ce._onResizePip(Ce,z)}})}},Y.prototype._onEnterPip=function(z,ce){this._log.debug("onEnterPip");var be=z.pictureInPictureWindow;this._elToPipWindows.set(ce,be);var ke=this._elToPipCallbacks.get(ce).onResizePip;be.addEventListener("resize",ke),de(this)},Y.prototype._onLeavePip=function(z,ce){this._log.debug("onLeavePip"),this._elToPipWindows.delete(ce);var be=this._elToPipCallbacks.get(ce).onResizePip;z.pictureInPictureWindow.removeEventListener("resize",be),de(this)},Y.prototype._onResizePip=function(){he(this)},Y.prototype.attach=function(z){var ce=X.prototype.attach.call(this,z);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(ce),this._intersectionObserver.observe(ce),this._resizeObserver.observe(ce),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function ae(X){function Y(){de(X)}return V.onVisibilityChange(1,Y),function(){V.offVisibilityChange(1,Y)}}(this)),this._observePip(ce),ce},Y.prototype.detach=function(z){var ce=this,be=X.prototype.detach.call(this,z);return(Array.isArray(be)?be:[be]).forEach(function(me){ce._intersectionObserver.unobserve(me),ce._resizeObserver.unobserve(me),ce._invisibleElements.delete(me),ce._unObservePip(me)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),de(this),he(this),be},Y.prototype.addProcessor=function(){return X.prototype.addProcessor.apply(this,arguments)},Y.prototype.removeProcessor=function(){return X.prototype.removeProcessor.apply(this,arguments)},Y.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},Y.prototype.setPriority=function(z){return X.prototype.setPriority.call(this,z)},Y}(ie(G));function de(X){if("auto"===X._clientTrackSwitchOffControl){var Y=X._getAllAttachedElements().filter(function(be){return!X._invisibleElements.has(be)});!0==(X._getAllAttachedElements().filter(function(be){return X._elToPipWindows.has(be)}).length>0||"visible"===document.visibilityState&&Y.length>0)?(X._turnOffTimer.clear(),X._setRenderHint({enabled:!0})):X._turnOffTimer.isSet||X._turnOffTimer.start()}}function he(X){if("auto"===X._contentPreferencesMode){var Y=X._getAllAttachedElements().filter(function(_e){return!X._invisibleElements.has(_e)}),z=X._getAllAttachedElements().map(function(_e){var ue=X._elToPipWindows.get(_e);return ue?{clientHeight:ue.height,clientWidth:ue.width}:{clientHeight:0,clientWidth:0}}),ce=Y.concat(z);if(ce.length>0){var ke=K(ce.sort(function(_e,ue){return ue.clientHeight+ue.clientWidth-_e.clientHeight-_e.clientWidth-1}),1)[0];X._setRenderHint({renderDimensions:{height:ke.clientHeight,width:ke.clientWidth}})}}}Oe.exports=$},1768:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k,O)||this}return F(V,G),V.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},V}(q(1521));Oe.exports=ie},808:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=this&&this.__read||function(V,k){var O="function"==typeof Symbol&&V[Symbol.iterator];if(!O)return V;var B,ae,x=O.call(V),$=[];try{for(;(void 0===k||k-- >0)&&!(B=x.next()).done;)$.push(B.value)}catch(de){ae={error:de}}finally{try{B&&!B.done&&(O=x.return)&&O.call(x)}finally{if(ae)throw ae.error}}return $},G=function(V){function k(O){var x=V.call(this,O.id,O)||this;return Object.defineProperties(x,{_clones:{value:new Set},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{get:function(){return!!this._clones.size}}}),x}return F(k,V),k.prototype.clone=function(){var O=new k(this.track.clone());return this._clones.add(O),O},k.prototype.removeClone=function(O){this._clones.delete(O)},k.prototype.setMediaStreamTrack=function(O){var x=this,B=Array.from(this._clones),$=Array.from(this._senders);return Promise.all(B.map(function(ae){return ae.setMediaStreamTrack(O.clone())}).concat($.map(function(ae){return x._replaceTrack(ae,O)}))).finally(function(){x._track=O})},k.prototype.addSender=function(O,x){return this._senders.add(O),x&&this._senderToPublisherHintCallbacks.set(O,x),this},k.prototype.removeSender=function(O){return this._senders.delete(O),this._senderToPublisherHintCallbacks.delete(O),this},k.prototype.setPublisherHint=function(O){var B=K(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return B?B(O):Promise.resolve("COULD_NOT_APPLY_HINT")},k.prototype._replaceTrack=function(O,x){var B=this;return O.replaceTrack(x).then(function($){return B.setPublisherHint(null).catch(function(){}),B.emit("replaced"),$})},k}(q(1639));Oe.exports=G},9222:function(Oe,Me,q){"use strict";var $,F=this&&this.__extends||($=function(ae,de){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,X){he.__proto__=X}||function(he,X){for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(he[Y]=X[Y])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}$(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),K=q(133),ie=q(9739),G=ie.buildLogLevels,V=ie.valueToJSON,k=q(8701).DEFAULT_LOG_LEVEL,O=q(1458),x=0,B=function($){function ae(de,he,X){var Y=$.call(this)||this;X=Object.assign({logLevel:k},X);var z=G(X.logLevel);return Object.defineProperties(Y,{_instanceId:{value:x++},_log:{value:X.log?X.log.createLog("default",Y):new O("default",Y,z,X.loggerName)},trackName:{enumerable:!0,value:de},trackSid:{enumerable:!0,value:he}}),Y}return F(ae,$),ae.prototype.toJSON=function(){return V(this)},ae.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},ae}(K);Oe.exports=B},1639:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,O.kind)||this;return Object.defineProperties(x,{_track:{value:O,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),x}return F(V,G),V.prototype.stop=function(){this.track.stop(),G.prototype.stop.call(this)},V}(q(4605));Oe.exports=ie},9062:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(9069).EventEmitter,ie=q(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,G=function(V){function k(O){var x=V.call(this)||this;return Object.defineProperties(x,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:O},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),x.on("add",function(B){x._lastStatsSaveTime=Date.now(),x._lastStatsPublishTime=Date.now(),x._processorInfo=B,x._stats=[],x._reemitEvent("add",x._getEventData())}),x.on("remove",function(){var B=x._getEventData();x._lastStatsSaveTime=null,x._lastStatsPublishTime=null,x._processorInfo=null,x._stats=null,x._reemitEvent("remove",B)}),x.on("start",function(){x._reemitEvent("start",x._getEventData())}),x.on("stop",function(B){x._reemitEvent("stop",Object.assign({message:B},x._getEventData()))}),x.on("stats",function(){return x._maybeEmitStats()}),x}return F(k,V),k.prototype._getEventData=function(){if(!this._processorInfo)return{};var O=this._processorInfo,x=O.processor,he={captureHeight:O.captureHeight,captureWidth:O.captureWidth,inputFrameRate:O.inputFrameRate,isRemoteVideoTrack:O.isRemoteVideoTrack};return he.name=x._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(X){var Y=x["_"+X];typeof Y<"u"&&(he[X]=Y)}),Object.keys(he).forEach(function(X){var Y=he[X];"boolean"==typeof Y&&(he[X]=Y?"true":"false")}),he},k.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var O=this._processorInfo.processor._benchmark;if(O){var x=Date.now();if(!(x-this._lastStatsSaveTime<1e3)){var B={outputFrameRate:O.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(de){B[de]=O.getAverageDelay(de)}),this._lastStatsSaveTime=x,this._stats.push(B),!(x-this._lastStatsPublishTime<ie)){this._lastStatsPublishTime=x;var ae=this._stats.splice(0).reduce(function(de,he,X){return Object.keys(B).forEach(function(Y){de[Y]||(de[Y]=0),de[Y]=(de[Y]*X+he[Y])/(X+1)}),de},{});Object.keys(ae).forEach(function(de){ae[de]=parseFloat(ae[de].toFixed(2))}),this._reemitEvent("stats",Object.assign({},ae,this._getEventData()))}}}}},k.prototype._reemitEvent=function(O,x){this._log.debug("VideoProcessor:"+O,x),this.emit("event",{name:O,data:x})},k}(K);Oe.exports=G},4332:function(Oe,Me,q){"use strict";var O,F=this&&this.__extends||(O=function(x,B){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ae){$.__proto__=ae}||function($,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&($[de]=ae[de])})(x,B)},function(x,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=x}O(x,B),x.prototype=null===B?Object.create(B):($.prototype=B.prototype,new $)}),K=q(5366),ie=q(9062),G=q(8701).DEFAULT_FRAME_RATE,V=function(O){function x(B,$){var ae=O.call(this,B,$)||this;return Object.defineProperties(ae,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),ae._processorEventObserver=new($.VideoProcessorEventObserver||ie)(ae._log),ae}return F(x,O),x.prototype._checkIfCanCaptureFrames=function(B){void 0===B&&(B=!1);var $=!0,ae="",de=this.mediaStreamTrack;return de.enabled||($=!1,ae="MediaStreamTrack is disabled"),"ended"===de.readyState&&($=!1,ae="MediaStreamTrack is ended"),this.processor||($=!1,ae="VideoProcessor not detected."),!this._attachments.size&&!B&&($=!1,ae="VideoTrack is not publishing and there is no attached element."),ae&&this._log.debug(ae),{canCaptureFrames:$,message:ae}},x.prototype._captureFrames=function(){var B=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var ae,$=Date.now();this._dummyEl.play().then(function(){var de=function(X){clearTimeout(B._captureTimeoutId);var Y=B.mediaStreamTrack.getSettings().frameRate,be=Math.floor(1e3/(void 0===Y?G:Y))-ae;(be<0||"number"!=typeof ae)&&(be=0),B._captureTimeoutId=setTimeout(X,be)},he=function(){var X=B._checkIfCanCaptureFrames();if(!X.canCaptureFrames)return B._isCapturing=!1,B._processorEventObserver.emit("stop",X.message),void B._log.debug("Cannot capture frames. Stopping capturing frames.");$=Date.now();var Y=B.mediaStreamTrack.getSettings(),z=Y.width,ce=void 0===z?0:z,be=Y.height,ke=void 0===be?0:be;B._inputFrame.width!==ce&&(B._inputFrame.width=ce,B._inputFrame.height=ke,B._outputFrame&&(B._outputFrame.width=ce,B._outputFrame.height=ke)),B._inputFrame.getContext("2d").drawImage(B._dummyEl,0,0,ce,ke);var me=null;try{me=B.processor.processFrame(B._inputFrame,B._outputFrame)}catch(Re){B._log.debug("Exception detected after calling processFrame.",Re)}(me instanceof Promise?me:Promise.resolve(me)).then(function(){B._outputFrame&&(B.processedTrack.requestFrame(),B._processorEventObserver.emit("stats"))}).finally(function(){ae=Date.now()-$,de(he)})};de(he)}).catch(function(de){return B._log.error("Video element cannot be played",{error:de,track:B})})}},x.prototype._initialize=function(){var B=this;O.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){k(B,B._dummyEl)&&(B.dimensions.width=B._dummyEl.videoWidth,B.dimensions.height=B._dummyEl.videoHeight)},this._dummyEl.onresize=function(){k(B,B._dummyEl)&&(B.dimensions.width=B._dummyEl.videoWidth,B.dimensions.height=B._dummyEl.videoHeight,B.isStarted&&(B._log.debug("Dimensions changed:",B.dimensions),B.emit(x.DIMENSIONS_CHANGED,B)))})},x.prototype._restartProcessor=function(){var B=this.processor;B&&(this.removeProcessor(B),this.addProcessor(B))},x.prototype._start=function(B){return this.dimensions.width=B.videoWidth,this.dimensions.height=B.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(x.DIMENSIONS_CHANGED,this),O.prototype._start.call(this,B)},x.prototype.addProcessor=function(B){var $=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!B||"function"!=typeof B.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",B),this._unmuteHandler||(this._unmuteHandler=function(){$._log.debug("mediaStreamTrack unmuted"),$.processedTrack.muted&&($._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),$._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var ae=this.mediaStreamTrack.getSettings(),de=ae.width,he=void 0===de?0:de,X=ae.height,Y=void 0===X?0:X,z=ae.frameRate,ce=void 0===z?G:z;return this._inputFrame=new OffscreenCanvas(he,Y),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=he,this._outputFrame.height=Y,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=B,this._processorEventObserver.emit("add",{processor:B,captureHeight:Y,captureWidth:he,inputFrameRate:ce,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},x.prototype.attach=function(){var B=O.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),B},x.prototype.detach=function(){return O.prototype.detach.apply(this,arguments)},x.prototype.removeProcessor=function(B){if(!B)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(B!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",B),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},x}(K);function k(O,x){return O.dimensions.width!==x.videoWidth||O.dimensions.height!==x.videoHeight}V.DIMENSIONS_CHANGED="dimensionsChanged",Oe.exports=V},4621:function(Oe,Me,q){"use strict";var $,F=this&&this.__extends||($=function(ae,de){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,X){he.__proto__=X}||function(he,X){for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(he[Y]=X[Y])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}$(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),K=this&&this.__read||function($,ae){var de="function"==typeof Symbol&&$[Symbol.iterator];if(!de)return $;var X,z,he=de.call($),Y=[];try{for(;(void 0===ae||ae-- >0)&&!(X=he.next()).done;)Y.push(X.value)}catch(ce){z={error:ce}}finally{try{X&&!X.done&&(de=he.return)&&de.call(he)}finally{if(z)throw z.error}}return Y},ie=q(9069).EventEmitter,G=q(8701),V=G.DEFAULT_NQ_LEVEL_LOCAL,k=G.DEFAULT_NQ_LEVEL_REMOTE,O=G.MAX_NQ_LEVEL,x=q(9739).inRange,B=function($){function ae(de){var he=$.call(this)||this;return de=Object.assign({local:V,remote:k},de),Object.defineProperties(he,{local:{value:x(de.local,V,O)?de.local:V,writable:!0},remote:{value:x(de.remote,k,O)?de.remote:k,writable:!0}}),he}return F(ae,$),ae.prototype.update=function(de){var he=this;de=Object.assign({local:this.local,remote:this.remote},de),[["local",V,3],["remote",k,3]].forEach(function(X){var Y=K(X,3),z=Y[0],ce=Y[1];he[z]="number"==typeof de[z]&&x(de[z],ce,Y[2])?de[z]:ce})},ae}(ie);Oe.exports=B},9218:function(Oe,Me,q){"use strict";var be,F=this&&this.__extends||(be=function(ke,me){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ce){Re.__proto__=Ce}||function(Re,Ce){for(var _e in Ce)Object.prototype.hasOwnProperty.call(Ce,_e)&&(Re[_e]=Ce[_e])})(ke,me)},function(ke,me){if("function"!=typeof me&&null!==me)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function Re(){this.constructor=ke}be(ke,me),ke.prototype=null===me?Object.create(me):(Re.prototype=me.prototype,new Re)}),K=this&&this.__read||function(be,ke){var me="function"==typeof Symbol&&be[Symbol.iterator];if(!me)return be;var Ce,ue,Re=me.call(be),_e=[];try{for(;(void 0===ke||ke-- >0)&&!(Ce=Re.next()).done;)_e.push(Ce.value)}catch(fe){ue={error:fe}}finally{try{Ce&&!Ce.done&&(me=Re.return)&&me.call(Re)}finally{if(ue)throw ue.error}}return _e},ie=this&&this.__spreadArray||function(be,ke){for(var me=0,Re=ke.length,Ce=be.length;me<Re;me++,Ce++)be[Ce]=ke[me];return be},G=q(133),V=q(8797),k=q(8661),O=q(5606),x=q(8459),B=q(1629),$=q(1768),ae=q(9739),de=0,he=function(be){function ke(me,Re){var Ce=be.call(this)||this,_e=function X(be){var ke=be.map(function(_e){return[_e.id,_e]}),me=ke.filter(function(_e){return"audio"===_e[1].kind}),Re=ke.filter(function(_e){return"video"===_e[1].kind}),Ce=ke.filter(function(_e){return"data"===_e[1].kind});return{audioTracks:me,dataTracks:Ce,tracks:ke,videoTracks:Re}}((Re=Object.assign({RemoteAudioTrack:V,RemoteAudioTrackPublication:k,RemoteDataTrack:O,RemoteDataTrackPublication:x,RemoteVideoTrack:B,RemoteVideoTrackPublication:$,tracks:[]},Re)).tracks),ue=Re.log.createLog("default",Ce),fe=new Map(_e.audioTracks),we=new Map(_e.dataTracks),He=new Map(_e.tracks),Ue=new Map(_e.videoTracks);return Object.defineProperties(Ce,{_RemoteAudioTrack:{value:Re.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:Re.RemoteAudioTrackPublication},_RemoteDataTrack:{value:Re.RemoteDataTrack},_RemoteDataTrackPublication:{value:Re.RemoteDataTrackPublication},_RemoteVideoTrack:{value:Re.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:Re.RemoteVideoTrackPublication},_audioTracks:{value:fe},_dataTracks:{value:we},_instanceId:{value:++de},_clientTrackSwitchOffControl:{value:Re.clientTrackSwitchOffControl},_contentPreferencesMode:{value:Re.contentPreferencesMode},_log:{value:ue},_signaling:{value:me},_tracks:{value:He},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:Ue},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return me.identity}},networkQualityLevel:{enumerable:!0,get:function(){return me.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return me.networkQualityStats}},sid:{enumerable:!0,get:function(){return me.sid}},state:{enumerable:!0,get:function(){return me.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),Ce._tracks.forEach(z.bind(null,Ce)),me.on("networkQualityLevelChanged",function(){return Ce.emit("networkQualityLevelChanged",Ce.networkQualityLevel,Ce.networkQualityStats&&(Ce.networkQualityStats.audio||Ce.networkQualityStats.video)?Ce.networkQualityStats:null)}),function Y(be,ke){var me=be._log;"disconnected"!==be.state&&ke.on("stateChanged",function Re(Ce){me.debug("Transitioned to state:",Ce),be.emit(Ce,be),"disconnected"===Ce&&(me.debug("Removing Track event reemitters"),ke.removeListener("stateChanged",Re),be._tracks.forEach(function(_e){var ue=be._trackEventReemitters.get(_e.id);_e&&ue&&ue.forEach(function(fe,we){_e.removeListener(we,fe)})}),ke.tracks.forEach(function(_e){var ue=be._tracks.get(_e.id),fe=be._trackEventReemitters.get(_e.id);ue&&fe&&fe.forEach(function(we,He){ue.removeListener(He,we)})}),be._trackEventReemitters.clear(),be.tracks.forEach(function(_e){be._trackPublicationEventReemitters.get(_e.trackSid).forEach(function(ue,fe){_e.removeListener(fe,ue)})}),be._trackPublicationEventReemitters.clear())})}(Ce,me),ue.info("Created a new Participant"+(Ce.identity?": "+Ce.identity:"")),Ce}return F(ke,be),ke.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},ke.prototype._getTrackPublicationEvents=function(){return[]},ke.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},ke.prototype._addTrack=function(me,Re){var Ce=this._log;return this._tracks.has(Re)?null:(this._tracks.set(Re,me),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[me.kind].set(Re,me),z(this,me,Re),Ce.info("Added a new "+ae.trackClass(me)+":",Re),Ce.debug(ae.trackClass(me)+":",me),me)},ke.prototype._addTrackPublication=function(me){var Re=this._log;return this.tracks.has(me.trackSid)?null:(this.tracks.set(me.trackSid,me),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[me.kind].set(me.trackSid,me),function ce(be,ke){var me=new Map;"disconnected"!==be.state&&(be._getTrackPublicationEvents().forEach(function(Re){var Ce=K(Re,2),_e=Ce[0],ue=Ce[1];me.set(_e,function(){for(var fe=[],we=0;we<arguments.length;we++)fe[we]=arguments[we];be.emit.apply(be,ie(ie([ue],K(fe)),[ke]))}),ke.on(_e,me.get(_e))}),be._trackPublicationEventReemitters.set(ke.trackSid,me))}(this,me),Re.info("Added a new "+ae.trackPublicationClass(me)+":",me.trackSid),Re.debug(ae.trackPublicationClass(me)+":",me),me)},ke.prototype._handleTrackSignalingEvents=function(){var Re=this._log,Ce=this._clientTrackSwitchOffControl,_e=this._contentPreferencesMode,ue=this;if("disconnected"!==this.state){var fe=this._RemoteAudioTrack,we=this._RemoteAudioTrackPublication,He=this._RemoteVideoTrack,Ue=this._RemoteVideoTrackPublication,Ge=this._RemoteDataTrack,Ze=this._RemoteDataTrackPublication,Xe=this._signaling;Xe.on("trackAdded",Be),Xe.on("trackRemoved",jt),Xe.tracks.forEach(Be),Xe.on("stateChanged",function Ye(je){"disconnected"===je?(Re.debug("Removing event listeners"),Xe.removeListener("stateChanged",Ye),Xe.removeListener("trackAdded",Be),Xe.removeListener("trackRemoved",jt)):"connected"===je&&(Re.info("reconnected"),setTimeout(function(){return ue.emit("reconnected")},0))})}function Be(Ye){var ze=new(0,{audio:we,data:Ze,video:Ue}[Ye.kind])(Ye,{log:Re});ue._addTrackPublication(ze);var Pe=Ye.isSubscribed;Pe&&Kt(Ye),ue._trackSignalingUpdatedEventCallbacks.set(Ye.sid,function(){if(Pe!==Ye.isSubscribed){if(Pe=Ye.isSubscribed)return void Kt(Ye);!function St(Ye){var je=K(Array.from(ue._tracks.entries()).find(function(Ut){return K(Ut,2)[1].sid===Ye.sid}),2),ze=je[0],Pe=je[1],rt=ue.tracks.get(Ye.sid);Pe&&ue._removeTrack(Pe,rt,ze)}(Ye)}}),Ye.on("updated",ue._trackSignalingUpdatedEventCallbacks.get(Ye.sid))}function jt(Ye){Ye.isSubscribed&&Ye.setTrackTransceiver(null);var je=ue._trackSignalingUpdatedEventCallbacks.get(Ye.sid);je&&(Ye.removeListener("updated",je),ue._trackSignalingUpdatedEventCallbacks.delete(Ye.sid));var ze=ue.tracks.get(Ye.sid);ze&&ue._removeTrackPublication(ze)}function Kt(Ye){var je=Ye.isEnabled,ze=Ye.name,Pe=Ye.kind,rt=Ye.sid,Ut=Ye.trackTransceiver,$t=Ye.isSwitchedOff,Mt={audio:fe,video:He,data:Ge}[Pe],en=ue.tracks.get(rt);if(Mt&&Pe===Ut.kind){var Zn={log:Re,name:ze,clientTrackSwitchOffControl:Ce,contentPreferencesMode:_e},xr="data"===Pe?new Mt(rt,Ut,Zn):new Mt(rt,Ut,je,$t,function(wr){return Xe.updateSubscriberTrackPriority(rt,wr)},function(wr){Ye.isSubscribed&&Xe.updateTrackRenderHint(rt,wr)},Zn);ue._addTrack(xr,en,Ut.id)}}},ke.prototype._removeTrack=function(me,Re){if(!this._tracks.has(Re))return null;this._tracks.delete(Re),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[me.kind].delete(Re),(this._trackEventReemitters.get(Re)||new Map).forEach(function(fe,we){me.removeListener(we,fe)});var ue=this._log;return ue.info("Removed a "+ae.trackClass(me)+":",Re),ue.debug(ae.trackClass(me)+":",me),me},ke.prototype._removeTrackPublication=function(me){if(!(me=this.tracks.get(me.trackSid)))return null;this.tracks.delete(me.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[me.kind].delete(me.trackSid),(this._trackPublicationEventReemitters.get(me.trackSid)||new Map).forEach(function(ue,fe){me.removeListener(fe,ue)});var _e=this._log;return _e.info("Removed a "+ae.trackPublicationClass(me)+":",me.trackSid),_e.debug(ae.trackPublicationClass(me)+":",me),me},ke.prototype.toJSON=function(){return ae.valueToJSON(this)},ke}(G);function z(be,ke,me){var Re=new Map;"disconnected"!==be.state&&(be._getTrackEvents().forEach(function(Ce){var _e=Ce[0],ue=Ce[1];Re.set(_e,function(){var fe=[ue].concat([].slice.call(arguments));return be.emit.apply(be,ie([],K(fe)))}),ke.on(_e,Re.get(_e))}),be._trackEventReemitters.set(me,Re))}Oe.exports=he},9305:function(Oe,Me){"use strict";var q=this&&this.__awaiter||function(O,x,B,$){return new(B||(B=Promise))(function(de,he){function X(ce){try{z($.next(ce))}catch(be){he(be)}}function Y(ce){try{z($.throw(ce))}catch(be){he(be)}}function z(ce){ce.done?de(ce.value):function ae(de){return de instanceof B?de:new B(function(he){he(de)})}(ce.value).then(X,Y)}z(($=$.apply(O,x||[])).next())})},F=this&&this.__generator||function(O,x){var $,ae,de,he,B={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return he={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(he[Symbol.iterator]=function(){return this}),he;function X(z){return function(ce){return function Y(z){if($)throw new TypeError("Generator is already executing.");for(;B;)try{if($=1,ae&&(de=2&z[0]?ae.return:z[0]?ae.throw||((de=ae.return)&&de.call(ae),0):ae.next)&&!(de=de.call(ae,z[1])).done)return de;switch(ae=0,de&&(z=[2&z[0],de.value]),z[0]){case 0:case 1:de=z;break;case 4:return B.label++,{value:z[1],done:!1};case 5:B.label++,ae=z[1],z=[0];continue;case 7:z=B.ops.pop(),B.trys.pop();continue;default:if(!(de=(de=B.trys).length>0&&de[de.length-1])&&(6===z[0]||2===z[0])){B=0;continue}if(3===z[0]&&(!de||z[1]>de[0]&&z[1]<de[3])){B.label=z[1];break}if(6===z[0]&&B.label<de[1]){B.label=de[1],de=z;break}if(de&&B.label<de[2]){B.label=de[2],B.ops.push(z);break}de[2]&&B.ops.pop(),B.trys.pop();continue}z=x.call(O,B)}catch(ce){z=[6,ce],ae=0}finally{$=de=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([z,ce])}}},K=this&&this.__read||function(O,x){var B="function"==typeof Symbol&&O[Symbol.iterator];if(!B)return O;var ae,he,$=B.call(O),de=[];try{for(;(void 0===x||x-- >0)&&!(ae=$.next()).done;)de.push(ae.value)}catch(X){he={error:X}}finally{try{ae&&!ae.done&&(B=$.return)&&B.call($)}finally{if(he)throw he.error}}return de};function ie(O,x,B,$){var ae=[];return O.forEach(function(de){(0===$.length||$.includes(de.type))&&(0===B.length||B.includes(de.kind))&&"number"==typeof de[x]&&ae.push(de[x])}),ae}function V(O){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(B,$){var ae=[$.key];$.altKeys&&(ae=ae.concat($.altKeys));var de=ae.find(function(he){return he in O});return de&&typeof O[de]===$.type&&(B[$.key]=O[de]),B},{})}Object.defineProperty(Me,"__esModule",{value:!0}),Me.getCombinedConnectionStats=void 0,Me.getCombinedConnectionStats=function G(O){var x=O.publisher,B=O.subscriber;return q(this,void 0,void 0,function(){var $,ae,de,he,X,Y,z,ce,be,ke,me,Re,Ce,_e,ue;return F(this,function(fe){switch(fe.label){case 0:return[4,Promise.all([x,B].map(function(we){return we.getStats()}))];case 1:return $=K.apply(void 0,[fe.sent(),2]),ae=$[0],he=ie(de=$[1],"timestamp",["audio"],["inbound-rtp"]),X=he.length>0?he[0]:0,Y=ie(de,"jitter",["audio"],["inbound-rtp"]).reduce(function(we,He){return Math.max(we,He)},0),z=ie(de,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(we,He){return we+He},0),ce=ie(de,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(we,He){return we+He},0),be=ie(ae,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(we,He){return Math.max(we,He)},0),ke=ie(de,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(we,He){return Math.max(we,He)},0),me=1e3*(ke||be),Re=ie(ae,"bytesSent",[],["candidate-pair"]).reduce(function(we,He){return we+He},0),Ce=ie(de,"bytesReceived",[],["candidate-pair"]).reduce(function(we,He){return we+He},0),_e=function k(O){var x=null,B=[];O.forEach(function(X){"transport"===X.type&&X.selectedCandidatePairId?x=X.selectedCandidatePairId:"candidate-pair"===X.type&&B.push(X)});var $=B.find(function(X){return X.selected||x&&X.id===x});if(!$)return null;var ae=$,de=O.get(ae.localCandidateId),he=O.get(ae.remoteCandidateId);return de&&he?{localCandidate:V(de),remoteCandidate:V(he)}:null}(de),ue=[],de.forEach(function(we){("local-candidate"===we.type||"remote-candidate"===we.type)&&ue.push(V(we))}),[2,{timestamp:X,jitter:Y,packets:z,packetsLost:ce,roundTripTime:me,bytesSent:Re,bytesReceived:Ce,selectedIceCandidatePairStats:_e,iceCandidateStats:ue}]}})})}},2449:(Oe,Me,q)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0}),Me.getTurnCredentials=void 0;var F=q(5330),K=q(8701).ICE_VERSION,ie=q(8380),G=ie.createTwilioError,V=ie.SignalingConnectionError,k=q(9069);Me.getTurnCredentials=function O(x,B){return new Promise(function($,ae){var de=new k.EventEmitter,X=new F(B,{networkMonitor:null,eventObserver:de,helloBody:{edge:"roaming",preflight:!0,token:x,type:"ice",version:K}}),Y=!1;X.once("close",function(){Y||(Y=!0,ae(new V))}),X.on("message",function(z){var ce=z.code,be=z.message,me=z.type;("iced"===me||"error"===me)&&!Y&&(Y=!0,"iced"===me?$(z.ice_servers):ae(G(ce,be)),X.close())})})}},5359:function(Oe,Me){"use strict";var q=this&&this.__read||function(ie,G){var V="function"==typeof Symbol&&ie[Symbol.iterator];if(!V)return ie;var O,B,k=V.call(ie),x=[];try{for(;(void 0===G||G-- >0)&&!(O=k.next()).done;)x.push(O.value)}catch($){B={error:$}}finally{try{O&&!O.done&&(V=k.return)&&V.call(k)}finally{if(B)throw B.error}}return x},F=this&&this.__spreadArray||function(ie,G){for(var V=0,k=G.length,O=ie.length;V<k;V++,O++)ie[O]=G[V];return ie};Object.defineProperty(Me,"__esModule",{value:!0}),Me.makeStat=void 0,Me.makeStat=function K(ie){return ie&&ie.length?{min:Math.min.apply(Math,F([],q(ie))),max:Math.max.apply(Math,F([],q(ie))),average:ie.reduce(function(O,x){return O+x},0)/ie.length}:null}},2436:(Oe,Me)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0}),Me.mosToScore=Me.calculateMOS=void 0;var q=94.768;Me.calculateMOS=function F(ie,G,V){var k=ie+2*G+10,O=0;switch(!0){case k<160:O=q-k/40;break;case k<1e3:O=q-(k-120)/10}return 1+.035*(O=1==V<=O/2.5?Math.max(O-2.5*V,6.52):0)+7e-6*O*(O-60)*(100-O)},Me.mosToScore=function K(ie){return ie?ie>4.2?5:ie>4?4:ie>3.6?3:ie>3?2:1:0}},8682:function(Oe,Me,q){"use strict";var Kt,F=this&&this.__extends||(Kt=function(St,Ye){return(Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(je,ze){je.__proto__=ze}||function(je,ze){for(var Pe in ze)Object.prototype.hasOwnProperty.call(ze,Pe)&&(je[Pe]=ze[Pe])})(St,Ye)},function(St,Ye){if("function"!=typeof Ye&&null!==Ye)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function je(){this.constructor=St}Kt(St,Ye),St.prototype=null===Ye?Object.create(Ye):(je.prototype=Ye.prototype,new je)}),K=this&&this.__assign||function(){return K=Object.assign||function(Kt){for(var St,Ye=1,je=arguments.length;Ye<je;Ye++)for(var ze in St=arguments[Ye])Object.prototype.hasOwnProperty.call(St,ze)&&(Kt[ze]=St[ze]);return Kt},K.apply(this,arguments)},ie=this&&this.__awaiter||function(Kt,St,Ye,je){return new(Ye||(Ye=Promise))(function(Pe,rt){function Ut(en){try{Mt(je.next(en))}catch(Zn){rt(Zn)}}function $t(en){try{Mt(je.throw(en))}catch(Zn){rt(Zn)}}function Mt(en){en.done?Pe(en.value):function ze(Pe){return Pe instanceof Ye?Pe:new Ye(function(rt){rt(Pe)})}(en.value).then(Ut,$t)}Mt((je=je.apply(Kt,St||[])).next())})},G=this&&this.__generator||function(Kt,St){var je,ze,Pe,rt,Ye={label:0,sent:function(){if(1&Pe[0])throw Pe[1];return Pe[1]},trys:[],ops:[]};return rt={next:Ut(0),throw:Ut(1),return:Ut(2)},"function"==typeof Symbol&&(rt[Symbol.iterator]=function(){return this}),rt;function Ut(Mt){return function(en){return function $t(Mt){if(je)throw new TypeError("Generator is already executing.");for(;Ye;)try{if(je=1,ze&&(Pe=2&Mt[0]?ze.return:Mt[0]?ze.throw||((Pe=ze.return)&&Pe.call(ze),0):ze.next)&&!(Pe=Pe.call(ze,Mt[1])).done)return Pe;switch(ze=0,Pe&&(Mt=[2&Mt[0],Pe.value]),Mt[0]){case 0:case 1:Pe=Mt;break;case 4:return Ye.label++,{value:Mt[1],done:!1};case 5:Ye.label++,ze=Mt[1],Mt=[0];continue;case 7:Mt=Ye.ops.pop(),Ye.trys.pop();continue;default:if(!(Pe=(Pe=Ye.trys).length>0&&Pe[Pe.length-1])&&(6===Mt[0]||2===Mt[0])){Ye=0;continue}if(3===Mt[0]&&(!Pe||Mt[1]>Pe[0]&&Mt[1]<Pe[3])){Ye.label=Mt[1];break}if(6===Mt[0]&&Ye.label<Pe[1]){Ye.label=Pe[1],Pe=Mt;break}if(Pe&&Ye.label<Pe[2]){Ye.label=Pe[2],Ye.ops.push(Mt);break}Pe[2]&&Ye.ops.pop(),Ye.trys.pop();continue}Mt=St.call(Kt,Ye)}catch(en){Mt=[6,en],ze=0}finally{je=Pe=0}if(5&Mt[0])throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}([Mt,en])}}};Object.defineProperty(Me,"__esModule",{value:!0}),Me.runPreflight=Me.PreflightTest=void 0;var V=q(8701),k=q(1567),O=q(2436),x=q(9305),B=q(2449),$=q(5359),ae=q(5237),de=q(3519),he=q(9739),X=q(8701).WS_SERVER,Y=q(1458),z=q(133),ce=q(8218),be=q(8606),ke=q(3744),me=q(8066),Re=me.createSID,Ce=me.sessionSID,_e=q(8380),ue=_e.SignalingConnectionTimeoutError,fe=_e.MediaConnectionError;function Ge(Kt){return null!==Kt&&typeof Kt<"u"}var Ze=0,Xe=function(Kt){function St(Ye,je){var ze=Kt.call(this)||this;ze._testTiming=new k.Timer,ze._dtlsTiming=new k.Timer,ze._iceTiming=new k.Timer,ze._peerConnectionTiming=new k.Timer,ze._mediaTiming=new k.Timer,ze._connectTiming=new k.Timer,ze._sentBytesMovingAverage=new ce,ze._packetLossMovingAverage=new ce,ze._progressEvents=[],ze._receivedBytesMovingAverage=new ce;var rt=je.environment,Ut=void 0===rt?"prod":rt,$t=je.region,en=je.duration,Zn=void 0===en?1e4:en,qt=je.wsServer||X(Ut,void 0===$t?"gll":$t);return ze._log=new Y("default",ze,V.DEFAULT_LOG_LEVEL,V.DEFAULT_LOGGER_NAME),ze._testDuration=Zn,ze._instanceId=Ze++,ze._testTiming.start(),ze._runPreflightTest(Ye,Ut,qt),ze}return F(St,Kt),St.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},St.prototype.stop=function(){this._stopped=!0},St.prototype._generatePreflightReport=function(Ye){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:$.makeStat(Ye?.jitter),rtt:$.makeStat(Ye?.rtt),packetLoss:$.makeStat(Ye?.packetLoss)},selectedIceCandidatePairStats:Ye?Ye.selectedIceCandidatePairStats:null,iceCandidateStats:Ye?Ye.iceCandidateStats:[],progressEvents:this._progressEvents,mos:$.makeStat(Ye?.mos)}},St.prototype._executePreflightStep=function(Ye,je,ze){return ie(this,void 0,void 0,function(){var Pe,rt,Ut,$t;return G(this,function(en){switch(en.label){case 0:if(this._log.debug("Executing step: ",Ye),Pe=this._testDuration+1e4,this._stopped)throw new Error("stopped");rt=Promise.resolve().then(je),Ut=null,$t=new Promise(function(Zn,qt){Ut=setTimeout(function(){qt(ze||new Error(Ye+" timeout."))},Pe)}),en.label=1;case 1:return en.trys.push([1,,3,4]),[4,Promise.race([$t,rt])];case 2:return[2,en.sent()];case 3:return null!==Ut&&clearTimeout(Ut),[7];case 4:return[2]}})})},St.prototype._collectNetworkTimings=function(Ye){var je=this;return new Promise(function(ze){var Pe;Ye.addEventListener("iceconnectionstatechange",function(){"checking"===Ye.iceConnectionState&&je._iceTiming.start(),"connected"===Ye.iceConnectionState&&(je._iceTiming.stop(),je._updateProgress("iceConnected"),(!Pe||Pe&&"connected"===Pe.state)&&ze())}),Ye.addEventListener("connectionstatechange",function(){"connecting"===Ye.connectionState&&je._peerConnectionTiming.start(),"connected"===Ye.connectionState&&(je._peerConnectionTiming.stop(),je._updateProgress("peerConnectionConnected"))});var Ut=Ye.getSenders().map(function($t){return $t.transport}).find(Ge);typeof Ut<"u"&&(Pe=Ut).addEventListener("statechange",function(){"connecting"===Pe.state&&je._dtlsTiming.start(),"connected"===Pe.state&&(je._dtlsTiming.stop(),je._updateProgress("dtlsConnected"),"connected"===Ye.iceConnectionState&&ze())})})},St.prototype._setupInsights=function(Ye){var ze=Ye.environment,rt=Ye.realm,Mt=new ke(Ye.token,V.SDK_NAME,V.SDK_VERSION,void 0===ze?V.DEFAULT_ENVIRONMENT:ze,void 0===rt?V.DEFAULT_REALM:rt,{});Mt.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var en=new be(Mt,Date.now(),this._log),Zn=void 0;return{reportToInsights:function(qt){var Mr,xr,wr=qt.report,Ir=wr.stats.jitter||Zn,Cr=wr.stats.rtt||Zn,Ui=wr.stats.packetLoss||Zn,or=wr.mos||Zn,Ki=new Map;wr.iceCandidateStats.forEach(function(Gt){if(Gt.candidateType&&Gt.protocol){var on=Ki.get(Gt.candidateType)||[];on.indexOf(Gt.protocol)<0&&on.push(Gt.protocol),Ki.set(Gt.candidateType,on)}});var ya=JSON.stringify(Object.fromEntries(Ki)),Ct={name:"report",group:"preflight",level:wr.error?"error":"info",payload:{sessionSID:Ce,preflightSID:Re("PF"),progressEvents:JSON.stringify(wr.progressEvents),testTiming:wr.testTiming,dtlsTiming:wr.networkTiming.dtls,iceTiming:wr.networkTiming.ice,peerConnectionTiming:wr.networkTiming.peerConnection,connectTiming:wr.networkTiming.connect,mediaTiming:wr.networkTiming.media,selectedLocalCandidate:null===(Mr=wr.selectedIceCandidatePairStats)||void 0===Mr?void 0:Mr.localCandidate,selectedRemoteCandidate:null===(xr=wr.selectedIceCandidatePairStats)||void 0===xr?void 0:xr.remoteCandidate,iceCandidateStats:ya,jitterStats:Ir,rttStats:Cr,packetLossStats:Ui,mosStats:or,error:wr.error}};en.emit("event",Ct),setTimeout(function(){return Mt.disconnect()},2e3)}}},St.prototype._runPreflightTest=function(Ye,je,ze){return ie(this,void 0,void 0,function(){var Pe,rt,Ut,$t,Mt,en,Zn,qt,Mr,xr,wr,Ir,Cr=this;return G(this,function(Ui){switch(Ui.label){case 0:Pe=[],rt=[],Ut=this._setupInsights({token:Ye,environment:je}).reportToInsights,Ui.label=1;case 1:return Ui.trys.push([1,8,9,10]),$t=[],[4,this._executePreflightStep("Acquire media",function(){return[ae.syntheticAudio(),de.syntheticVideo({width:640,height:480})]})];case 2:return Pe=Ui.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:Pe}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return B.getTurnCredentials(Ye,ze)},new ue)];case 3:return Mt=Ui.sent(),this._connectTiming.stop(),this._updateProgress("connected"),en=new RTCPeerConnection({iceServers:Mt,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Zn=new RTCPeerConnection({iceServers:Mt,bundlePolicy:"max-bundle"}),rt.push(en),rt.push(Zn),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return ie(Cr,void 0,void 0,function(){var or,Ki,ya,Ct;return G(this,function(Gt){switch(Gt.label){case 0:return en.addEventListener("icecandidate",function(on){return on.candidate&&Zn.addIceCandidate(on.candidate)}),Zn.addEventListener("icecandidate",function(on){return on.candidate&&en.addIceCandidate(on.candidate)}),Pe.forEach(function(on){return en.addTrack(on)}),or=new Promise(function(on){var qe=[];Zn.addEventListener("track",function(Fe){qe.push(Fe.track),qe.length===Pe.length&&on(qe)})}),[4,en.createOffer()];case 1:return Ki=Gt.sent(),[4,en.setLocalDescription(ya=Ki)];case 2:return Gt.sent(),[4,Zn.setRemoteDescription(ya)];case 3:return Gt.sent(),[4,Zn.createAnswer()];case 4:return Ct=Gt.sent(),[4,Zn.setLocalDescription(Ct)];case 5:return Gt.sent(),[4,en.setRemoteDescription(Ct)];case 6:return Gt.sent(),[4,this._collectNetworkTimings(en)];case 7:return Gt.sent(),[2,or]}})})},new fe)];case 4:return qt=Ui.sent(),this.emit("debug",{remoteTracks:qt}),qt.forEach(function(or){or.addEventListener("ended",function(){return Cr._log.warn(or.kind+":ended")}),or.addEventListener("mute",function(){return Cr._log.warn(or.kind+":muted")}),or.addEventListener("unmute",function(){return Cr._log.warn(or.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(or){var Ki=document.createElement("video");Ki.autoplay=!0,Ki.playsInline=!0,Ki.muted=!0,Ki.srcObject=new MediaStream(qt),$t.push(Ki),Cr.emit("debugElement",Ki),Ki.oncanplay=or})},new fe)];case 5:return Ui.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return Cr._collectRTCStatsForDuration(Cr._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},en,Zn)})];case 6:return Mr=Ui.sent(),[4,this._executePreflightStep("Generate report",function(){return Cr._generatePreflightReport(Mr)})];case 7:return xr=Ui.sent(),Ut({report:xr}),this.emit("completed",xr),[3,10];case 8:return wr=Ui.sent(),Ir=this._generatePreflightReport(),Ut({report:K(K({},Ir),{error:wr?.toString()})}),this.emit("failed",wr,Ir),[3,10];case 9:return rt.forEach(function(or){return or.close()}),Pe.forEach(function(or){return or.stop()}),[7];case 10:return[2]}})})},St.prototype._collectRTCStats=function(Ye,je,ze){return ie(this,void 0,void 0,function(){var Pe,rt,Ut,$t,Mt,en,Zn,qt,Mr,xr,wr,Ir,Cr,Ui;return G(this,function(or){switch(or.label){case 0:return[4,x.getCombinedConnectionStats({publisher:je,subscriber:ze})];case 1:return Pe=or.sent(),rt=Pe.timestamp,Ut=Pe.bytesSent,$t=Pe.bytesReceived,Mt=Pe.packets,en=Pe.packetsLost,Zn=Pe.roundTripTime,Mr=Pe.selectedIceCandidatePairStats,xr=Pe.iceCandidateStats,wr=Ye.jitter.length>0,Ye.jitter.push(qt=Pe.jitter),Ye.rtt.push(Zn),this._sentBytesMovingAverage.putSample(Ut,rt),this._receivedBytesMovingAverage.putSample($t,rt),this._packetLossMovingAverage.putSample(en,Mt),wr&&(Ye.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),Ye.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),Ir=this._packetLossMovingAverage.get(),Cr=Math.min(100,100*Ir),Ye.packetLoss.push(Cr),Ui=O.calculateMOS(Zn,qt,Ir),Ye.mos.push(Ui)),Ye.selectedIceCandidatePairStats||(Ye.selectedIceCandidatePairStats=Mr),0===Ye.iceCandidateStats.length&&(Ye.iceCandidateStats=xr),[2]}})})},St.prototype._collectRTCStatsForDuration=function(Ye,je,ze,Pe){return ie(this,void 0,void 0,function(){var rt,Ut,$t;return G(this,function(Mt){switch(Mt.label){case 0:return rt=Date.now(),Ut=Math.min(1e3,Ye),[4,he.waitForSometime(Ut)];case 1:return Mt.sent(),[4,this._collectRTCStats(je,ze,Pe)];case 2:return Mt.sent(),($t=Ye-(Date.now()-rt))>0?[4,this._collectRTCStatsForDuration($t,je,ze,Pe)]:[3,4];case 3:je=Mt.sent(),Mt.label=4;case 4:return[2,je]}})})},St.prototype._updateProgress=function(Ye){var je=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:je,name:Ye}),this.emit("progress",Ye)},St}(z);Me.PreflightTest=Xe,Me.runPreflight=function jt(Kt,St){return void 0===St&&(St={}),new Xe(Kt,St)}},5237:(Oe,Me,q)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0}),Me.syntheticAudio=void 0,Me.syntheticAudio=function F(){var K=q(7708),ie={},G=K.getOrCreate(ie),V=G.createOscillator(),k=V.connect(G.createMediaStreamDestination());V.start();var O=k.stream.getAudioTracks()[0],x=O.stop;return O.stop=function(){x.call(O),K.release(ie)},O}},3519:(Oe,Me)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0}),Me.syntheticVideo=void 0,Me.syntheticVideo=function q(F){var K=void 0===F?{}:F,ie=K.width,G=void 0===ie?640:ie,V=K.height,k=void 0===V?480:V,O=Object.assign(document.createElement("canvas"),{width:G,height:k}),x=O.getContext("2d");x.fillStyle="green",x.fillRect(0,0,O.width,O.height);var B=!1;requestAnimationFrame(function he(){if(!B){var X=Math.round(255*Math.random()),Y=Math.round(255*Math.random()),z=Math.round(255*Math.random()),ce=Math.round(255*Math.random());x.fillStyle="rgba("+X+", "+Y+", "+z+", "+ce+")",x.fillRect(Math.random()*G,Math.random()*k,50,50),requestAnimationFrame(he)}});var ae=O.captureStream(30).getTracks()[0],de=ae.stop;return ae.stop=function(){B=!0,de.call(ae)},ae}},1567:(Oe,Me)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0}),Me.Timer=void 0;var q=function(){function F(){this._end=void 0,this.start()}return F.prototype.start=function(){return this._start=Date.now(),this},F.prototype.stop=function(){return this._end=Date.now(),this},F.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},F}();Me.Timer=q},7772:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=this&&this.__read||function(k,O){var x="function"==typeof Symbol&&k[Symbol.iterator];if(!x)return k;var $,de,B=x.call(k),ae=[];try{for(;(void 0===O||O-- >0)&&!($=B.next()).done;)ae.push($.value)}catch(he){de={error:he}}finally{try{$&&!$.done&&(x=B.return)&&x.call(B)}finally{if(de)throw de.error}}return ae},ie=this&&this.__spreadArray||function(k,O){for(var x=0,B=O.length,$=k.length;x<B;x++,$++)k[$]=O[x];return k},V=function(k){function O(){var x=k.call(this)||this;return Object.defineProperties(x,{_queuedEvents:{value:new Map}}),x}return F(O,k),O.prototype.dequeue=function(x){var B=this,$=!0;if(!x)return this._queuedEvents.forEach(function(de,he){$=this.dequeue(he)&&$},this),$;var ae=this._queuedEvents.get(x)||[];return this._queuedEvents.delete(x),ae.reduce(function(de,he){return B.emit.apply(B,ie([],K([x].concat(he))))&&de},$)},O.prototype.queue=function(){var x=[].slice.call(arguments);if(this.emit.apply(this,ie([],K(x))))return!0;var B=x[0];return this._queuedEvents.has(B)||this._queuedEvents.set(B,[]),this._queuedEvents.get(B).push(x.slice(1)),!1},O}(q(9069).EventEmitter);Oe.exports=V},3609:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=this&&this.__read||function(k,O){var x="function"==typeof Symbol&&k[Symbol.iterator];if(!x)return k;var $,de,B=x.call(k),ae=[];try{for(;(void 0===O||O-- >0)&&!($=B.next()).done;)ae.push($.value)}catch(he){de={error:he}}finally{try{$&&!$.done&&(x=B.return)&&x.call(B)}finally{if(de)throw de.error}}return ae},ie=this&&this.__spreadArray||function(k,O){for(var x=0,B=O.length,$=k.length;x<B;x++,$++)k[$]=O[x];return k},V=function(k){function O(x,B){var $=k.call(this,x,B)||this;return $._handleTrackSignalingEvents(),$.once("disconnected",$._unsubscribeTracks.bind($)),$}return F(O,k),O.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},O.prototype._addTrack=function(x,B,$){return k.prototype._addTrack.call(this,x,$)?(B._subscribed(x),this.emit("trackSubscribed",x,B),x):null},O.prototype._addTrackPublication=function(x){var B=k.prototype._addTrackPublication.call(this,x);return B?(this.emit("trackPublished",B),B):null},O.prototype._getTrackPublicationEvents=function(){return ie(ie([],K(k.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},O.prototype._unsubscribeTracks=function(){var x=this;this.tracks.forEach(function(B){if(B.isSubscribed){var $=B.track;B._unsubscribe(),x.emit("trackUnsubscribed",$,B)}})},O.prototype._removeTrack=function(x,B,$){var ae=this._tracks.get($);return ae?(k.prototype._removeTrack.call(this,ae,$),B._unsubscribe(),this.emit("trackUnsubscribed",ae,B),ae):null},O.prototype._removeTrackPublication=function(x){this._signaling.clearTrackHint(x.trackSid);var B=k.prototype._removeTrackPublication.call(this,x);return B?(this.emit("trackUnpublished",B),B):null},O}(q(9218));Oe.exports=V},7406:function(Oe,Me,q){"use strict";var X,F=this&&this.__extends||(X=function(Y,z){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,be){ce.__proto__=be}||function(ce,be){for(var ke in be)Object.prototype.hasOwnProperty.call(be,ke)&&(ce[ke]=be[ke])})(Y,z)},function(Y,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ce(){this.constructor=Y}X(Y,z),Y.prototype=null===z?Object.create(z):(ce.prototype=z.prototype,new ce)}),K=this&&this.__read||function(X,Y){var z="function"==typeof Symbol&&X[Symbol.iterator];if(!z)return X;var be,me,ce=z.call(X),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(be=ce.next()).done;)ke.push(be.value)}catch(Re){me={error:Re}}finally{try{be&&!be.done&&(z=ce.return)&&z.call(ce)}finally{if(me)throw me.error}}return ke},ie=this&&this.__spreadArray||function(X,Y){for(var z=0,ce=Y.length,be=X.length;z<ce;z++,be++)X[be]=Y[z];return X},G=q(133),V=q(3609),k=q(7805),O=q(9739).valueToJSON,x=0,B=function(X){function Y(z,ce,be){var ke=X.call(this)||this,me=be.log.createLog("default",ke),Re=new Map;return Object.defineProperties(ke,{_log:{value:me},_clientTrackSwitchOffControl:{value:be.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:be.contentPreferencesMode||"disabled"},_instanceId:{value:++x},_options:{value:be},_participants:{value:Re},_signaling:{value:ce},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(ce.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return ce.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:z},name:{enumerable:!0,value:ce.name},participants:{enumerable:!0,value:Re},sid:{enumerable:!0,value:ce.sid},state:{enumerable:!0,get:function(){return ce.state}},mediaRegion:{enumerable:!0,value:ce.mediaRegion}}),function de(X,Y){Y.on("updated",function(){var ce=Y.isEnabled;X._log.info("Recording "+(ce?"started":"stopped")),X.emit("recording"+(ce?"Started":"Stopped"))})}(ke,ce.recording),function he(X,Y){var z=X._log;z.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),Y.participants.forEach(ae.bind(null,X)),z.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),Y.on("participantConnected",ae.bind(null,X)),Y.on("dominantSpeakerChanged",function(){return X.emit("dominantSpeakerChanged",X.dominantSpeaker)}),Y.on("stateChanged",function ce(be,ke){switch(z.info("Transitioned to state:",be),be){case"disconnected":X.participants.forEach(function(me){me._unsubscribeTracks()}),X.emit(be,X,ke),X.localParticipant.tracks.forEach(function(me){me.unpublish()}),Y.removeListener("stateChanged",ce);break;case"reconnecting":setTimeout(function(){return X.emit("reconnecting",ke)},0);break;default:setTimeout(function(){return X.emit("reconnected")},0)}})}(ke,ce),me.info("Created a new Room:",ke.name),me.debug("Initial RemoteParticipants:",Array.from(ke._participants.values())),ke}return F(Y,X),Y.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},Y.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},Y.prototype.getStats=function(){var z=this;return this._signaling.getStats().then(function(ce){return Array.from(ce).map(function(be){var ke=K(be,2),Re=ke[1];return new k(ke[0],Object.assign({},Re,{localAudioTrackStats:$(z,Re.localAudioTrackStats),localVideoTrackStats:$(z,Re.localVideoTrackStats)}))})})},Y.prototype.toJSON=function(){return O(this)},Y}(G);function $(X,Y){var z=X.localParticipant._signaling;return Y.reduce(function(ce,be){var ke=z.tracks.get(be.trackId),me=z.getSender(ke);return me?[Object.assign({},be,{trackId:me.id})].concat(ce):ce},[])}function ae(X,Y){var z=X._log,ke=new V(Y,{log:z,clientTrackSwitchOffControl:X._clientTrackSwitchOffControl,contentPreferencesMode:X._contentPreferencesMode});z.info("A new RemoteParticipant connected:",ke),X._participants.set(ke.sid,ke),X.emit("participantConnected",ke);var me=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(Re){var Ce=K(Array.isArray(Re)?Re:[Re,Re],2),_e=Ce[0],ue=Ce[1];function fe(){var we=[].slice.call(arguments);we.unshift(ue),we.push(ke),X.emit.apply(X,ie([],K(we)))}return ke.on(_e,fe),[_e,fe]});ke.once("disconnected",function(){var Ce=X.dominantSpeaker;z.info("RemoteParticipant disconnected:",ke),X._participants.delete(ke.sid),me.forEach(function(_e){ke.removeListener(_e[0],_e[1])}),X.emit("participantDisconnected",ke),ke===Ce&&X.emit("dominantSpeakerChanged",X.dominantSpeaker)})}Oe.exports=B},8043:function(Oe,Me,q){"use strict";var O,F=this&&this.__extends||(O=function(x,B){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ae){$.__proto__=ae}||function($,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&($[de]=ae[de])})(x,B)},function(x,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=x}O(x,B),x.prototype=null===B?Object.create(B):($.prototype=B.prototype,new $)}),K=q(9285),ie=q(8343),G=q(8675),V={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},k=function(O){function x(){return O.call(this,"closed",V)||this}return F(x,O),x.prototype._close=function(B){return this.transition("closing",B),this.transition("closed",B),Promise.resolve(this)},x.prototype._connect=function(B,$,ae,de,he){B.connect("PA00000000000000000000000000000000","test");var Y=Promise.resolve(new ie(B,"RM00000000000000000000000000000000",he));return Y.cancel=function(){},Y},x.prototype._open=function(B){return this.transition("opening",B),this.transition("open",B),Promise.resolve(this)},x.prototype.close=function(){var B=this;return this.bracket("close",function($){switch(B.state){case"closed":return B;case"open":return B._close($);default:throw new Error('Unexpected Signaling state "'+B.state+'"')}})},x.prototype.connect=function(B,$,ae,de,he){var X=this;return this.bracket("connect",function Y(z){switch(X.state){case"closed":return X._open(z).then(Y.bind(null,z));case"open":return X.releaseLockCompletely(z),X._connect(B,$,ae,de,he);default:throw new Error('Unexpected Signaling state "'+X.state+'"')}})},x.prototype.createLocalParticipantSignaling=function(){return new K},x.prototype.open=function(){var B=this;return this.bracket("open",function($){switch(B.state){case"closed":return B._open($);case"open":return B;default:throw new Error('Unexpected Signaling state "'+B.state+'"')}})},x}(G);Oe.exports=k},5677:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(){var k=G.call(this)||this;return Object.defineProperties(k,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),k}return F(V,G),V.prototype.addTrack=function(k,O,x){var B=this._createLocalTrackPublicationSignaling(k,O,x);return this._trackSendersToPublications.set(k,B),this._publicationsToTrackSenders.set(B,k),G.prototype.addTrack.call(this,B),this},V.prototype.getPublication=function(k){return this._trackSendersToPublications.get(k)||null},V.prototype.getSender=function(k){return this._publicationsToTrackSenders.get(k)||null},V.prototype.removeTrack=function(k){var O=this._trackSendersToPublications.get(k);return O?(this._trackSendersToPublications.delete(k),this._publicationsToTrackSenders.delete(O),G.prototype.removeTrack.call(this,O)&&O.stop(),O):null},V}(q(9285));Oe.exports=ie},3157:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),ie=function(V){function k(O,x,B){var $=this;return O=O.clone(),($=V.call(this,x,O.kind,"data"===O.kind||O.track.enabled,B)||this).setTrackTransceiver(O),Object.defineProperties($,{_updatedPriority:{value:B,writable:!0},id:{enumerable:!0,value:O.id}}),$}return F(k,V),Object.defineProperty(k.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),k.prototype.enable=function(O){return this.trackTransceiver.track.enabled=O="boolean"!=typeof O||O,V.prototype.enable.call(this,O)},k.prototype.publishFailed=function(O){return function G(V,k){return null===V._sid&&!V._error&&(V._error=k,!0)}(this,O)&&this.emit("updated"),this},k.prototype.setPriority=function(O){return this._updatedPriority!==O&&(this._updatedPriority=O,this.emit("updated")),this},k.prototype.setSid=function(O){return this._error?this:V.prototype.setSid.call(this,O)},k.prototype.stop=function(){this.trackTransceiver.stop()},k}(q(8194));Oe.exports=ie},9285:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(8675),ie=q(669),G={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},V=function(k){function O(){var x=k.call(this,"connecting",G)||this;return Object.defineProperties(x,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),x}return F(O,k),Object.defineProperty(O.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),O.prototype.addTrack=function(x){return this.tracks.set(x.id||x.sid,x),this.emit("trackAdded",x),this},O.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},O.prototype.removeTrack=function(x){var B=this.tracks.get(x.id||x.sid);return this.tracks.delete(x.id||x.sid),B&&this.emit("trackRemoved",x),B||null},O.prototype.setNetworkQualityLevel=function(x,B){this._networkQualityLevel!==x&&(this._networkQualityLevel=x,this._networkQualityStats=B&&(B.audio||B.video)?new ie(B):null,this.emit("networkQualityLevelChanged"))},O.prototype.connect=function(x,B){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=x),this._identity||(this._identity=B),this.preempt("connected"),!0)},O.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},O}(K);Oe.exports=V},9987:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(){var k=G.call(this)||this;return Object.defineProperties(k,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),k}return F(V,G),V.prototype.disable=function(){return this.enable(!1)},V.prototype.enable=function(k){return this.isEnabled!==(k="boolean"!=typeof k||k)&&(this._isEnabled=k,this.emit("updated")),this},V}(q(9069).EventEmitter);Oe.exports=ie},2184:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this)||this;return x.connect(k,O),x}return F(V,G),V}(q(9285));Oe.exports=ie},8956:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B,$,ae){var de=G.call(this,O,x,B,$)||this;return Object.defineProperties(de,{_isSwitchedOff:{value:ae,writable:!0}}),de.setSid(k),de}return F(V,G),Object.defineProperty(V.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),V.prototype.subscribeFailed=function(k){return this.error||(this._error=k,this.emit("updated")),this},V.prototype.setPriority=function(k){return this._priority!==k&&(this._priority=k,this.emit("updated")),this},V.prototype.setSwitchedOff=function(k){return this._isSwitchedOff!==k&&(this._isSwitchedOff=k,this.emit("updated")),this},V}(q(8194));Oe.exports=ie},8343:function(Oe,Me,q){"use strict";var z,F=this&&this.__extends||(z=function(ce,be){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,me){ke.__proto__=me}||function(ke,me){for(var Re in me)Object.prototype.hasOwnProperty.call(me,Re)&&(ke[Re]=me[Re])})(ce,be)},function(ce,be){if("function"!=typeof be&&null!==be)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function ke(){this.constructor=ce}z(ce,be),ce.prototype=null===be?Object.create(be):(ke.prototype=be.prototype,new ke)}),K=q(9987),ie=q(8675),G=q(6543),V=q(9739).buildLogLevels,k=q(8701).DEFAULT_LOG_LEVEL,O=q(1458),x=q(8380),B=x.MediaConnectionError,$=x.MediaDTLSTransportFailedError,ae=x.SignalingConnectionDisconnectedError,de=0,he={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},X=function(z){function ce(be,ke,me,Re){var Ce=this;Re=Object.assign({logLevel:k,RecordingSignaling:K,Timeout:G},Re);var _e=V(Re.logLevel);Ce=z.call(this,"connected",he)||this;var ue=Re.RecordingSignaling,fe=new Re.Timeout(function(){Ce._disconnect(Ce._reconnectingError)},Re.sessionTimeout,!1);return Object.defineProperties(Ce,{_instanceId:{value:de++},_log:{value:Re.log?Re.log.createLog("default",Ce):new O("default",Ce,_e,Re.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:Re},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:fe},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:be},name:{enumerable:!0,value:me},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new ue},sid:{enumerable:!0,value:ke}}),Ce.on("connectionStateChanged",function(){"failed"===Ce.connectionState&&!["disconnected","failed"].includes(Ce.iceConnectionState)&&Ce._disconnect(new $)}),Ce.on("iceConnectionStateChanged",function(){return Y(Ce)}),Ce.on("signalingConnectionStateChanged",function(){return Y(Ce)}),setTimeout(function(){return Y(Ce)}),Ce}return F(ce,z),ce.prototype._disconnect=function(be){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[be]),!0)},ce.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},ce.prototype.connectParticipant=function(be){var ke=this;return"disconnected"!==be.state&&!this.participants.has(be.sid)&&(this.participants.set(be.sid,be),be.on("stateChanged",function me(Re){"disconnected"===Re&&(be.removeListener("stateChanged",me),ke.participants.delete(be.sid),ke.emit("participantDisconnected",be))}),this.emit("participantConnected",be),!0)},ce.prototype.disconnect=function(){return this._disconnect()},ce.prototype.setDominantSpeaker=function(be){this.dominantSpeakerSid=be,this.emit("dominantSpeakerChanged")},ce}(ie);function Y(z){var ce;"disconnected"!==z.state&&"disconnected"!==z.signalingConnectionState?("reconnecting"===z.signalingConnectionState?ce=z.signalingConnectionState:"failed"===z.iceConnectionState?(z._mediaConnectionIsReconnecting=!0,ce="reconnecting"):"new"===z.iceConnectionState||"checking"===z.iceConnectionState?ce=z._mediaConnectionIsReconnecting?"reconnecting":"connected":(z._mediaConnectionIsReconnecting=!1,z._reconnectingError=null,z._sessionTimeout.clear(),ce="connected"),ce!==z.state&&("reconnecting"===ce?(z._reconnectingError="reconnecting"===z.signalingConnectionState?new ae:new B,z._sessionTimeout.start(),z.preempt(ce,null,[z._reconnectingError])):z.preempt(ce))):z._sessionTimeout.clear()}Oe.exports=X},8194:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x,B){var $=G.call(this)||this,ae=null;return Object.defineProperties($,{_error:{value:null,writable:!0},_isEnabled:{value:x,writable:!0},_priority:{value:B,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return ae},set:function(de){null===ae&&(ae=de)}},kind:{enumerable:!0,value:O},name:{enumerable:!0,value:k}}),$}return F(V,G),Object.defineProperty(V.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),V.prototype.disable=function(){return this.enable(!1)},V.prototype.enable=function(k){return this.isEnabled!==(k="boolean"!=typeof k||k)&&(this._isEnabled=k,this.emit("updated")),this},V.prototype.setTrackTransceiver=function(k){return this.trackTransceiver!==(k=k||null)&&(this._trackTransceiver=k,this.emit("updated")),this},V.prototype.setSid=function(k){return null===this.sid&&(this._sid=k,this.emit("updated")),this},V}(q(9069).EventEmitter);Oe.exports=ie},7697:(Oe,Me,q)=>{"use strict";var F=q(8126),K=q(6603),ie=q(2112),G=q(4892),V=q(8380),k=V.SignalingConnectionDisconnectedError,O=V.SignalingIncomingMessageInvalidError,x=q(9739),B=x.flatMap,$=x.createRoomConnectEventPayload;Oe.exports=function ae(de,he,X,Y,z,ce){ce=Object.assign({PeerConnectionManager:K,RoomV2:ie,Transport:G},ce);var be=z.video[0]&&!0===z.video[0].adaptiveSimulcast,me=ce.RoomV2,Re=ce.Transport,Ce=ce.iceServers,_e=ce.log,ue=new(0,ce.PeerConnectionManager)(Y,z,ce),fe=B(X.tracks,function(Ge){return[Ge.trackTransceiver]});ue.setTrackSenders(fe);var He,we=new Error("Canceled"),Ue=new F(function(Ge,Ze,Xe){var Kt=ce.bandwidthProfile,je=ce.eventObserver,rt=ce.name,xr=Object.assign({adaptiveSimulcast:be,automaticSubscription:ce.automaticSubscription,dominantSpeaker:ce.dominantSpeaker,environment:ce.environment,eventObserver:je,loggerName:ce.loggerName,logLevel:ce.logLevel,networkMonitor:ce.networkMonitor,networkQuality:ce.networkQuality,iceServers:Ce,onIced:function(Ir){return Xe()?(Ze(we),Promise.reject(we)):(_e.debug("Got ICE servers:",Ir),ce.iceServers=Ir,ue.setConfiguration(ce),ue.createAndOffer().then(function(){if(Xe())throw Ze(we),we;_e.debug("createAndOffer() succeeded."),ue.dequeue("description")}).catch(function(Cr){throw _e.error("createAndOffer() failed:",Cr),Ze(Cr),Cr}))},realm:ce.realm,renderHints:!!Kt&&("disabled"!==ce.clientTrackSwitchOffControl||"disabled"!==ce.contentPreferencesMode),sdpSemantics:ce.sdpSemantics,trackPriority:!!Kt,trackSwitchOff:!!Kt},Kt?{bandwidthProfile:Kt}:{});He=new Re(rt,de,X,ue,he,xr);var wr=$(ce);je.emit("event",wr),He.once("connected",function(Ir){_e.debug("Transport connected:",Ir),Xe()?Ze(we):Ir.participant?(X.setSignalingRegion(Ir.options.signaling_region),Ge(new me(X,Ir,He,ue,ce))):Ze(new O)}),He.once("stateChanged",function(Ir,Cr){"disconnected"===Ir?(He=null,Ze(Cr||new k)):_e.debug("Transport state changed:",Ir)})},function(){He&&(He.disconnect(),He=null)});return Ue.catch(function(){He&&(He.disconnect(),He=null),ue.close()}),Ue}},2314:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,"active_speaker",O)||this;return Object.defineProperties(x,{_loudestParticipantSid:{value:null,writable:!0}}),x.on("ready",function(B){B.on("message",function($){"active_speaker"===$.type&&x._setLoudestParticipantSid($.participant)})}),x}return F(V,G),Object.defineProperty(V.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),V.prototype._setLoudestParticipantSid=function(k){this.loudestParticipantSid!==k&&(this._loudestParticipantSid=k,this.emit("updated"))},V}(q(4071));Oe.exports=ie},380:(Oe,Me,q)=>{"use strict";var F=q(3826),K=function(){function ie(){Object.defineProperties(this,{_filter:{value:new F({getKey:function(V){return V.ufrag},isLessThanOrEqualTo:function(V,k){return V.revision<=k.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return ie.prototype.setUfrag=function(G){this._ufrag=G;var V=this._filter.toMap().get(G);return V?V.candidates:[]},ie.prototype.update=function(G){G.candidates=G.candidates||[];var V=this._filter.toMap().get(G.ufrag),k=V?V.candidates:[];return this._filter.update(G)&&this._ufrag===G.ufrag?G.candidates.slice(k.length):[]},ie}();Oe.exports=K},2282:(Oe,Me,q)=>{"use strict";var F=q(8701),K=F.ICE_ACTIVITY_CHECK_PERIOD_MS,ie=F.ICE_INACTIVITY_THRESHOLD_MS,G=function(){function V(k,O){O=Object.assign({activityCheckPeriodMs:K,inactivityThresholdMs:ie},O),Object.defineProperties(this,{_activityCheckPeriodMs:{value:O.activityCheckPeriodMs},_inactivityThresholdMs:{value:O.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:k},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return V.prototype._getActivePairStat=function(k){return Array.from(k.values()).find(function(B){return"candidate-pair"===B.type&&B.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},V.prototype._getIceConnectionStats=function(){var k=this;return this._peerConnection.getStats().then(function(O){return k._getActivePairStat(O)}).catch(function(){return null})},V.prototype._scheduleInactivityCallback=function(k){var O=this;k&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===O._peerConnection.iceConnectionState&&k()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!k&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},V.prototype.start=function(k){var O=this;this.stop(),this._timer=setInterval(function(){O._getIceConnectionStats().then(function(x){!x||((!O._lastActivity||O._lastActivity.bytesReceived!==x.bytesReceived)&&(O._lastActivity=x,O._scheduleInactivityCallback(null)),x.timestamp-O._lastActivity.timestamp>=O._inactivityThresholdMs&&("disconnected"===O._peerConnection.iceConnectionState?k():null===O._onIceConnectionStateChanged&&O._scheduleInactivityCallback(k)))})},this._activityCheckPeriodMs)},V.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},V}();Oe.exports=G},448:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(7697),ie=q(523),V=function(k){function O(x,B){var $;return B=Object.assign({createCancelableRoomSignalingPromise:K},B),$=k.call(this)||this,Object.defineProperties($,{_createCancelableRoomSignalingPromise:{value:B.createCancelableRoomSignalingPromise},_options:{value:B},_wsServer:{value:x}}),$}return F(O,k),O.prototype._connect=function(x,B,$,ae,de){return de=Object.assign({},this._options,de),this._createCancelableRoomSignalingPromise.bind(null,B,this._wsServer,x,$,ae,de)},O.prototype.createLocalParticipantSignaling=function(x,B){return new ie(x,B)},O}(q(8043));Oe.exports=V},523:function(Oe,Me,q){"use strict";var $,F=this&&this.__extends||($=function(ae,de){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,X){he.__proto__=X}||function(he,X){for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(he[Y]=X[Y])})(ae,de)},function(ae,de){if("function"!=typeof de&&null!==de)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");function he(){this.constructor=ae}$(ae,de),ae.prototype=null===de?Object.create(de):(he.prototype=de.prototype,new he)}),K=q(5677),ie=q(5771),G=q(8701).DEFAULT_LOG_LEVEL,V=q(1458),k=q(9739),O=k.buildLogLevels,x=k.isDeepEqual,B=function($){function ae(de,he,X){var Y;X=Object.assign({logLevel:G,LocalTrackPublicationV2:ie},X),Y=$.call(this)||this;var z=O(X.logLevel);return Object.defineProperties(Y,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:de},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:X.LocalTrackPublicationV2},_log:{value:X.log?X.log.createLog("default",Y):new V("default",Y,z,X.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:he},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),Y}return F(ae,$),ae.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},ae.prototype.setSignalingRegion=function(de){this._signalingRegion||(this._signalingRegion=de)},ae.prototype.setBandwidthProfile=function(de){x(this._bandwidthProfile,de)||(this._bandwidthProfile=JSON.parse(JSON.stringify(de)),this._bandwidthProfileRevision++,this.didUpdate())},ae.prototype.getParameters=function(){return this._encodingParameters},ae.prototype.setParameters=function(de){return this._encodingParameters.update(de),this},ae.prototype.update=function(de){return this._publishedRevision>=de.revision||(this._publishedRevision=de.revision,de.tracks.forEach(function(he){var X=this.tracks.get(he.id);X&&X.update(he)},this)),this},ae.prototype._createLocalTrackPublicationSignaling=function(de,he,X){return new this._LocalTrackPublicationV2(de,he,X)},ae.prototype.addTrack=function(de,he,X){var Y=this;$.prototype.addTrack.call(this,de,he,X);var z=this.getPublication(de),ce=z.isEnabled,be=z.updatedPriority,ke=function(){(ce!==z.isEnabled||be!==z.updatedPriority)&&(Y.didUpdate(),ce=z.isEnabled,be=z.updatedPriority)};return z.on("updated",ke),this._removeListener(z),this._removeListeners.set(z,function(){return z.removeListener("updated",ke)}),this.didUpdate(),this},ae.prototype._removeListener=function(de){var he=this._removeListeners.get(de);he&&he()},ae.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(de){return de.getState()})}},ae.prototype.didUpdate=function(){this._revision++,this.emit("updated")},ae.prototype.removeTrack=function(de){var he=$.prototype.removeTrack.call(this,de);return he&&(de.removeClone(he.trackTransceiver),this._removeListener(he),this.didUpdate()),he},ae.prototype.setNetworkQualityConfiguration=function(de){this.networkQualityConfiguration.update(de)},ae.prototype.setPublisherHint=function(de,he){var X=Array.from(this.tracks.values()).find(function(Y){return Y.sid===de});return X?X.trackTransceiver.setPublisherHint(he):(this._log.warn("track:"+de+" not found"),Promise.resolve("UNKNOWN_TRACK"))},ae}(K);Oe.exports=B},5771:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(3157),ie=q(8380).createTwilioError,G=function(V){function k(O,x,B){return V.call(this,O,x,B)||this}return F(k,V),k.prototype.getState=function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}},k.prototype.update=function(O){switch(O.state){case"ready":this.setSid(O.sid);break;case"failed":var x=O.error;this.publishFailed(ie(x.code,x.message))}return this},k}(K);Oe.exports=G},4071:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(9069),ie=0,G=function(V){function k(O,x,B){var $=V.call(this)||this;return Object.defineProperties($,{_instanceId:{value:ie++},channel:{value:x},_log:{value:B.log.createLog("default",$)},_getReceiver:{value:O},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),$}return F(k,V),Object.defineProperty(k.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),k.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},k.prototype.setup=function(O){var x=this;this._teardown(),this._log.info("setting up msp transport for id:",O);var B=this._getReceiver(O).then(function($){if("data"!==$.kind&&x._log.error("Expected a DataTrackReceiver"),x._receiverPromise===B){try{x._transport=$.toDataTransport(),x.emit("ready",x._transport)}catch(ae){x._log.error("Failed to toDataTransport: "+ae.message)}$.once("close",function(){return x._teardown()})}});this._receiverPromise=B},k.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},k}(K);Oe.exports=G},9056:function(Oe,Me,q){"use strict";var O,F=this&&this.__extends||(O=function(x,B){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ae){$.__proto__=ae}||function($,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&($[de]=ae[de])})(x,B)},function(x,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=x}O(x,B),x.prototype=null===B?Object.create(B):($.prototype=B.prototype,new $)}),K=this&&this.__read||function(O,x){var B="function"==typeof Symbol&&O[Symbol.iterator];if(!B)return O;var ae,he,$=B.call(O),de=[];try{for(;(void 0===x||x-- >0)&&!(ae=$.next()).done;)de.push(ae.value)}catch(X){he={error:X}}finally{try{ae&&!ae.done&&(B=$.return)&&B.call($)}finally{if(he)throw he.error}}return de},ie=q(9069),G=q(8753),V=function(O){function x(B,$){var ae=O.call(this)||this;return Object.defineProperties(ae,{_factories:{value:new WeakMap},_manager:{value:B},_signaling:{value:$}}),$.on("updated",function(){return ae.emit("updated")}),ae}return F(x,O),Object.defineProperty(x.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),x.prototype.start=function(){var B=this;this.stop();var $=setTimeout(function(){B._timeout===$&&function k(O){var ae=(O._manager._peerConnections?Array.from(O._manager._peerConnections.values()):[]).map(function(de){return de._peerConnection}).filter(function(de){return"closed"!==de.signalingState}).map(function(de){if(O._factories.has(de))return O._factories.get(de);var he=new G(de);return O._factories.set(de,he),he}).map(function(de){return de.next().catch(function(){return null})});return Promise.all(ae).then(function(de){return de.filter(function(he){return he}).map(function(he){return he.summarize()})})}(B).then(function(ae){if(B._timeout===$){if(ae.length){var de=K(ae,1);B._signaling.put(de[0])}B.start()}})},200);this._timeout=$},x.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},x}(ie);Oe.exports=V},5775:function(Oe,Me,q){"use strict";var x,F=this&&this.__extends||(x=function(B,$){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,de){ae.__proto__=de}||function(ae,de){for(var he in de)Object.prototype.hasOwnProperty.call(de,he)&&(ae[he]=de[he])})(B,$)},function(B,$){if("function"!=typeof $&&null!==$)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function ae(){this.constructor=B}x(B,$),B.prototype=null===$?Object.create($):(ae.prototype=$.prototype,new ae)}),K=q(4071),ie=q(6412),G=q(6543),k=function(x){function B($,ae,de){var he=x.call(this,$,"network_quality",de)||this;return Object.defineProperties(he,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new ie},_resendTimer:{value:new G(function(){he._resendTimer.setDelay(1.5*he._resendTimer.delay),he._sendNetworkQualityInputs()},5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:ae.local,remoteReportLevel:ae.remote}}}}),he.on("ready",function(X){X.on("message",function(Y){"network_quality"===(he._log.debug("Incoming: ",Y),Y.type)&&he._handleNetworkQualityMessage(Y)})}),he._sendNetworkQualityInputs(),he}return F(B,x),Object.defineProperty(B.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),B.prototype._handleNetworkQualityMessage=function($){var ae=this,de=!1,he=null,X=$?$.local:null;"number"==typeof X?(he=X,this._levels=null):"object"==typeof X&&X&&(this._levels=X,he="number"==typeof X.level?X.level:Math.min(X.audio.send,X.audio.recv,X.video.send,X.video.recv)),null!==he&&this.level!==he&&(this._level=he,de=!0),this._remoteLevels=$&&$.remotes?$.remotes.reduce(function(Y,z){return(ae._remoteLevels.get(z.sid)||{}).level!==z.level&&(de=!0),Y.set(z.sid,z)},new Map):this._remoteLevels,de&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout(function(){return ae._sendNetworkQualityInputs()},1e3)},B.prototype._sendNetworkQualityInputs=function(){var $=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(ae){$._transport&&$._transport.publish(function O(x,B){return Object.assign({type:"network_quality"},x,B)}(ae,$._networkQualityReportLevels))}).finally(function(){$._resendTimer.start()})},B.prototype.put=function($){this._networkQualityInputs.put($)},B}(K);Oe.exports=k},1058:function(Oe,Me,q){"use strict";var Vn,F=this&&this.__extends||(Vn=function(fn,$e){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,_t){ft.__proto__=_t}||function(ft,_t){for(var sn in _t)Object.prototype.hasOwnProperty.call(_t,sn)&&(ft[sn]=_t[sn])})(fn,$e)},function(fn,$e){if("function"!=typeof $e&&null!==$e)throw new TypeError("Class extends value "+String($e)+" is not a constructor or null");function ft(){this.constructor=fn}Vn(fn,$e),fn.prototype=null===$e?Object.create($e):(ft.prototype=$e.prototype,new ft)}),K=this&&this.__read||function(Vn,fn){var $e="function"==typeof Symbol&&Vn[Symbol.iterator];if(!$e)return Vn;var _t,_n,ft=$e.call(Vn),sn=[];try{for(;(void 0===fn||fn-- >0)&&!(_t=ft.next()).done;)sn.push(_t.value)}catch(gi){_n={error:gi}}finally{try{_t&&!_t.done&&($e=ft.return)&&$e.call(ft)}finally{if(_n)throw _n.error}}return sn},ie=this&&this.__spreadArray||function(Vn,fn){for(var $e=0,ft=fn.length,_t=Vn.length;$e<ft;$e++,_t++)Vn[_t]=fn[$e];return Vn},G=q(2606),V=q(1647),k=V.RTCIceCandidate,O=V.RTCPeerConnection,x=V.RTCSessionDescription,B=V.getStats,$=q(7627),ae=q(8701),de=ae.DEFAULT_ICE_GATHERING_TIMEOUT_MS,he=ae.DEFAULT_LOG_LEVEL,X=ae.DEFAULT_SESSION_TIMEOUT_SEC,Y=ae.iceRestartBackoffConfig,z=q(3898),ce=z.addOrRewriteNewTrackIds,be=z.addOrRewriteTrackIds,ke=z.createCodecMapForMediaSection,me=z.disableRtx,Re=z.enableDtxForOpus,Ce=z.filterLocalCodecs,_e=z.getMediaSections,ue=z.removeSSRCAttributes,fe=z.revertSimulcast,we=z.setCodecPreferences,He=z.setSimulcast,Ue=q(6543),Ge=q(8380),Ze=Ge.MediaClientLocalDescFailedError,Xe=Ge.MediaClientRemoteDescFailedError,Be=q(9739),jt=Be.buildLogLevels,Kt=Be.getPlatform,St=Be.isChromeScreenShareTrack,Ye=Be.oncePerTick,je=Be.defer,ze=q(380),Pe=q(2282),rt=q(2498),Ut=q(3501),$t=q(8675),Mt=q(1458),en=q(1057),Zn=q(3073),qt=$.guessBrowser(),Mr=Kt(),xr=/android/.test(Mr),wr="chrome"===qt,Ir="firefox"===qt,Cr="safari"===qt,Ui=0,or={open:["closed","updating"],updating:["closed","open"],closed:[]},Ki=function(Vn){function fn($e,ft,_t,sn){var _n=Vn.call(this,"open",or)||this,gi=qe(sn=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:St,iceServers:[],logLevel:he,offerOptions:{},revertSimulcast:fe,sessionTimeout:1e3*X,setCodecPreferences:we,setSimulcast:He,Backoff:G,IceConnectionMonitor:Pe,RTCIceCandidate:k,RTCPeerConnection:O,RTCSessionDescription:x,Timeout:Ue},sn)),To=jt(sn.logLevel),bs=sn.RTCPeerConnection;!0===sn.enableDscp&&(sn.chromeSpecificConstraints=sn.chromeSpecificConstraints||{},sn.chromeSpecificConstraints.optional=sn.chromeSpecificConstraints.optional||[],sn.chromeSpecificConstraints.optional.push({googDscp:!0}));var Gs=sn.log?sn.log.createLog("webrtc",_n):new Mt("webrtc",_n,To,sn.loggerName),po=new bs(gi,sn.chromeSpecificConstraints);sn.dummyAudioMediaStreamTrack&&po.addTrack(sn.dummyAudioMediaStreamTrack),Object.defineProperties(_n,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:sn.enableDscp},_encodingParameters:{value:ft},_isChromeScreenShareTrack:{value:sn.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new sn.Timeout(function(){return _n._handleIceGatheringTimeout()},de,!1)},_iceRestartBackoff:{value:new sn.Backoff(Y)},_instanceId:{value:++Ui},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:Gs},_eventObserver:{value:sn.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new sn.IceConnectionMonitor(po)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:sn.offerOptions},_onEncodingParametersChanged:{value:Ye(function(){_n._needsAnswer||Ps(_n)})},_peerConnection:{value:po},_preferredAudioCodecs:{value:_t.audio},_preferredVideoCodecs:{value:_t.video},_shouldApplyDtx:{value:_t.audio.every(function(Tr){return"opus"!==Tr.codec})||_t.audio.some(function(Tr){return"opus"===Tr.codec&&Tr.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new sn.Timeout(function(){Gs.debug("ICE reconnect timed out"),_n.close()},sn.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new ze},_setCodecPreferences:{value:Ir&&xr&&_t.video[0]&&"h264"!==_t.video[0].codec.toLowerCase()?function(Tr){return Tr}:sn.setCodecPreferences},_setSimulcast:{value:sn.setSimulcast},_revertSimulcast:{value:sn.revertSimulcast},_RTCIceCandidate:{value:sn.RTCIceCandidate},_RTCPeerConnection:{value:sn.RTCPeerConnection},_RTCSessionDescription:{value:sn.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:$e}}),ft.on("changed",_n._onEncodingParametersChanged),po.addEventListener("connectionstatechange",_n._handleConnectionStateChange.bind(_n)),po.addEventListener("datachannel",_n._handleDataChannelEvent.bind(_n)),po.addEventListener("icecandidate",_n._handleIceCandidateEvent.bind(_n)),po.addEventListener("iceconnectionstatechange",_n._handleIceConnectionStateChange.bind(_n)),po.addEventListener("icegatheringstatechange",_n._handleIceGatheringStateChange.bind(_n)),po.addEventListener("signalingstatechange",_n._handleSignalingStateChange.bind(_n)),po.addEventListener("track",_n._handleTrackEvent.bind(_n));var ao=_n;return _n.on("stateChanged",function Tr(Mn){"closed"===Mn&&(ao.removeListener("stateChanged",Tr),ao._dataChannels.forEach(function(ru,ku){ao.removeDataTrackSender(ku)}))}),_n}return F(fn,Vn),fn.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},fn.prototype.setEffectiveAdaptiveSimulcast=function($e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",$e),this._preferredVideoCodecs.forEach(function(ft){"adaptiveSimulcast"in ft&&(ft.adaptiveSimulcast=$e)})},Object.defineProperty(fn.prototype,"_shouldApplySimulcast",{get:function(){return!(!wr&&!Cr)&&this._preferredVideoCodecs.some(function(ft){return"vp8"===ft.codec.toLowerCase()&&ft.simulcast&&!1!==ft.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&_e(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var $e=this._preferredVideoCodecs.find(function(ft){return"adaptiveSimulcast"in ft});return $e&&!0===$e.adaptiveSimulcast},enumerable:!1,configurable:!0}),fn.prototype._maybeUpdateEncodings=function($e,ft,_t){if(void 0===_t&&(_t=!1),"video"!==$e.kind||"ended"===$e.readyState)return!1;var sn=$.guessBrowser();return!!("safari"===sn||"chrome"===sn&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings($e,ft,_t),!0)},fn.prototype._updateEncodings=function($e,ft,_t){if(this._isChromeScreenShareTrack($e)){var sn=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];ft.forEach(function(Tr,Mn){var ru=sn[Mn];ru?(Tr.scaleResolutionDownBy=ru.scaleResolutionDownBy,_t&&delete Tr.active):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}else{var _n=$e.getSettings(),Gs=_n.width*_n.height,po=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(Tr){return Gs>=Tr.pixels}),ao=Math.min(ft.length,po.maxActiveLayers);ft.forEach(function(Tr,Mn){Mn<ao?(Tr.scaleResolutionDownBy=1<<ao-Mn-1,_t&&(Tr.active=!0)):(Tr.active=!1,delete Tr.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",ft.map(function(Tr,Mn){return"["+Mn+": "+Tr.active+", "+(Tr.scaleResolutionDownBy||0)+"]"}).join(", "))},fn.prototype._addIceCandidate=function($e){var ft=this;return Promise.resolve().then(function(){return $e=new ft._RTCIceCandidate($e),ft._peerConnection.addIceCandidate($e)}).catch(function(_t){ft._log.warn("Failed to add RTCIceCandidate "+($e?'"'+$e.candidate+'"':"null")+": "+_t.message)})},fn.prototype._addIceCandidates=function($e){return Promise.all($e.map(this._addIceCandidate,this)).then(function(){})},fn.prototype._addOrUpdateTransceiver=function($e){var ft=this,_t=function mn(Vn,fn){var $e={audio:Vn._preferredAudioCodecs.map(function(_n){return _n.codec.toLowerCase()}),video:Vn._preferredVideoCodecs.map(function(_n){return _n.codec.toLowerCase()})}[fn],ft=Vn._recycledTransceivers[fn],_t=$e.find(function(_n){return Vn._localCodecs.has(_n)});if(!_t)return ft.shift();var sn=ft.find(function(_n){var gi=Vn._remoteCodecMaps.get(_n.mid);return gi&&gi.has(_t)});return sn&&ft.splice(ft.indexOf(sn),1),sn}(this,$e.kind);if(_t&&_t.sender){var sn=_t.sender.track?_t.sender.track.id:null;return sn&&this._log.warn("Reusing transceiver: "+_t.mid+"] "+sn+" => "+$e.id),this._replaceTrackPromises.set(_t,_t.sender.replaceTrack($e).then(function(){_t.direction="sendrecv"},function(){}).finally(function(){ft._replaceTrackPromises.delete(_t)})),_t}return this._peerConnection.addTransceiver($e)},fn.prototype._checkIceBox=function($e){var ft=on($e);if(!ft)return Promise.resolve();var _t=this._remoteCandidates.setUfrag(ft);return this._addIceCandidates(_t)},fn.prototype._answer=function($e){var ft=this;return Promise.resolve().then(function(){return ft._negotiationRole||(ft._negotiationRole="answerer"),ft._setRemoteDescription($e)}).catch(function(){throw new Xe}).then(function(){return ft._peerConnection.createAnswer()}).then(function(_t){_t=Ir?new ft._RTCSessionDescription({sdp:me(_t.sdp),type:_t.type}):Zn(_t);var sn=ue(_t.sdp,["mslabel","label"]);if(ft._shouldApplySimulcast){var _n=sn;sn=ft._setSimulcast(_n,ft._trackIdsToAttributes),sn=ft._revertSimulcast(sn,_n,$e.sdp)}return sn=sn.replace(/42e015/g,"42e01f"),ft._setLocalDescription({type:_t.type,sdp:sn})}).then(function(){return ft._checkIceBox($e)}).then(function(){return ft._queuedDescription&&ft._updateDescription(ft._queuedDescription)}).then(function(){return ft._queuedDescription=null,ft._maybeReoffer(ft._peerConnection.localDescription)}).catch(function(_t){var sn=_t instanceof Xe?_t:new Ze;throw ft._publishMediaWarning({message:"Failed to _answer",code:sn.code,error:_t}),sn})},fn.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},fn.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},fn.prototype._handleDataChannelEvent=function($e){var ft=this,_t=$e.channel,sn=new rt(_t);this._dataTrackReceivers.add(sn),_t.addEventListener("close",function(){ft._dataTrackReceivers.delete(sn)}),this.emit("trackAdded",sn)},fn.prototype._handleGlare=function($e){var ft=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return ft._trackIdsToAttributes=new Map(ft._appliedTrackIdsToAttributes),ft._setLocalDescription({type:"rollback"})}).then(function(){return ft._needsAnswer=!1,ft._answer($e)}).then(function(_t){return _t?Promise.resolve():ft._offer()})},fn.prototype._publishMediaWarning=function($e){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:$e.message,code:$e.code,context:JSON.stringify({error:$e.error.message,sdp:$e.sdp})}})},fn.prototype._handleIceCandidateEvent=function($e){$e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push($e.candidate));var ft={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};$e.candidate||(ft.ice.complete=!0),this._isIceLite&&$e.candidate||(ft.ice.revision=this._localCandidatesRevision++,this.emit("candidates",ft))},fn.prototype._handleIceConnectionStateChange=function(){var $e=this,ft=this._peerConnection.iceConnectionState,_t=["connected","completed"].includes(ft),sn=this._log;sn.debug('ICE connection state is "'+ft+'"'),_t&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==ft||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&_t&&sn.debug("ICE reconnected"):(sn.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===ft?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){$e._iceConnectionMonitor.stop(),!$e._shouldRestartIce&&!$e._isRestartingIce&&(sn.warn("ICE Connection Monitor detected inactivity"),$e._isIceConnectionInactive=!0,$e._initiateIceRestartBackoff(),$e.emit("iceConnectionStateChanged"),$e.emit("connectionStateChanged"))})):["disconnected","completed"].includes(ft)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=ft,this.emit("iceConnectionStateChanged")},fn.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},fn.prototype._handleIceGatheringStateChange=function(){var $e=this._peerConnection.iceGatheringState,ft=this._log;ft.debug('ICE gathering state is "'+$e+'"');var _t=this._iceGatheringTimeout;"gathering"===$e&&!this._didGenerateLocalCandidates&&!_t.isSet&&(ft.debug("Starting ICE gathering timeout: "+_t.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},fn.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},fn.prototype._handleTrackEvent=function($e){var ft=this,_t=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new en,this._trackMatcher.update(_t);var sn=$e.track,_n=this._trackMatcher.match($e)||sn.id,gi=new Ut(_n,sn);this._mediaTrackReceivers.forEach(function(To){To.track.id===gi.track.id&&ft._mediaTrackReceivers.delete(To)}),this._mediaTrackReceivers.add(gi),sn.addEventListener("ended",function(){return ft._mediaTrackReceivers.delete(gi)}),this.emit("trackAdded",gi)},fn.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var $e=this._log;$e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var ft=this._iceReconnectTimeout;ft.isSet||($e.debug("Starting ICE reconnect timeout: "+ft.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(_n){$e.error("offer failed in _initiateIceRestart with: "+_n.message)})}},fn.prototype._initiateIceRestartBackoff=function(){var $e=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return $e._initiateIceRestart()}))},fn.prototype._maybeReoffer=function($e){var ft=this._shouldOffer;if($e&&$e.sdp){var _t=this._peerConnection.getSenders().filter(function(bs){return bs.track});ft=["audio","video"].reduce(function(bs,Gs){var po=_e($e.sdp,Gs,"(sendrecv|sendonly)"),ao=_t.filter(Fe.bind(null,Gs));return bs||po.length<ao.length},ft);var sn=this._dataChannels.size>0,_n=_e($e.sdp,"application").length>0;ft=ft||sn&&!_n}return(ft?this._offer():Promise.resolve()).then(function(){return ft})},fn.prototype._offer=function(){var $e=this,ft=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,ft.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return $e._peerConnection.createOffer(ft)}).catch(function(_t){var sn=new Ze;throw $e._publishMediaWarning({message:"Failed to create offer",code:sn.code,error:_t}),sn}).then(function(_t){_t=Ir?new $e._RTCSessionDescription({sdp:me(_t.sdp),type:_t.type}):Zn(_t);var sn=ue(_t.sdp,["mslabel","label"]);sn=$e._peerConnection.remoteDescription?Ce(sn,$e._peerConnection.remoteDescription.sdp):sn;var _n=$e._setCodecPreferences(sn,$e._preferredAudioCodecs,$e._preferredVideoCodecs);return $e._shouldOffer=!1,$e._negotiationRole||($e._negotiationRole="offerer"),$e._shouldApplySimulcast&&($e._localDescriptionWithoutSimulcast={type:"offer",sdp:_n},_n=$e._setSimulcast(_n,$e._trackIdsToAttributes)),$e._setLocalDescription({type:"offer",sdp:_n})})},fn.prototype._getMediaTrackSenderId=function($e){var ft=Array.from(this._rtpSenders.keys()).find(function(_t){return _t.track.id===$e});return ft?ft.id:$e},fn.prototype._addOrRewriteLocalTrackIds=function($e){var ft=this,sn=this._peerConnection.getTransceivers().filter(function(ao){var Tr=ao.sender;return!ao.stopped&&Tr&&Tr.track}),_n=sn.filter(function(ao){return ao.mid}),gi=new Map(_n.map(function(ao){return[ao.mid,ft._getMediaTrackSenderId(ao.sender.track.id)]})),To=be($e.sdp,gi),bs=sn.filter(function(ao){return!ao.mid}),Gs=new Map(["audio","video"].map(function(ao){return[ao,bs.filter(function(Tr){return Tr.sender.track.kind===ao}).map(function(Tr){return ft._getMediaTrackSenderId(Tr.sender.track.id)})]})),po=ce(To,gi,Gs);return new this._RTCSessionDescription({sdp:po,type:$e.type})},fn.prototype._rollbackAndApplyOffer=function($e){var ft=this;return this._setLocalDescription({type:"rollback"}).then(function(){return ft._setLocalDescription($e)})},fn.prototype._setLocalDescription=function($e){var ft=this;return"rollback"!==$e.type&&this._shouldApplyDtx&&($e=new this._RTCSessionDescription({sdp:Re($e.sdp),type:$e.type})),this._peerConnection.setLocalDescription($e).catch(function(_t){ft._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+$e.type+'" failed with the error "'+_t.message+'".',_t);var sn=new Ze,_n={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+$e.type+'" failed',code:sn.code,error:_t};throw $e.sdp&&(ft._log.warn("The SDP was "+$e.sdp),_n.sdp=$e.sdp),ft._publishMediaWarning(_n),sn}).then(function(){"rollback"!==$e.type&&(ft._localDescription=ft._addOrRewriteLocalTrackIds($e),ft._shouldApplyDtx&&(ft._localDescription=new ft._RTCSessionDescription({sdp:Re(ft._localDescription.sdp,[]),type:ft._localDescription.type})),ft._localCandidates=[],"offer"===$e.type?ft._descriptionRevision++:"answer"===$e.type&&(ft._lastStableDescriptionRevision=ft._descriptionRevision,Io(ft)),ft._localUfrag=on($e),ft.emit("description",ft.getState()))})},fn.prototype._setRemoteDescription=function($e){var ft=this;return $e.sdp&&($e.sdp=this._setCodecPreferences($e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),$e.sdp=this._shouldApplyDtx?Re($e.sdp):Re($e.sdp,[]),Ir&&($e.sdp=function ut(Vn){return Vn.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}($e.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test($e.sdp))),$e=new this._RTCSessionDescription($e),Promise.resolve().then(function(){if("answer"===$e.type&&ft._localDescriptionWithoutSimulcast){var _t=ft._preferredVideoCodecs.find(function(gi){return"adaptiveSimulcast"in gi}),_n=ft._revertSimulcast(ft._localDescription.sdp,ft._localDescriptionWithoutSimulcast.sdp,$e.sdp,!!_t&&!1===_t.adaptiveSimulcast);if(ft._localDescriptionWithoutSimulcast=null,_n!==ft._localDescription.sdp)return ft._rollbackAndApplyOffer({type:ft._localDescription.type,sdp:_n})}}).then(function(){return ft._peerConnection.setRemoteDescription($e)}).then(function(){"answer"===$e.type&&(ft._isRestartingIce&&(ft._log.debug("An ICE restart was in-progress and is now completed"),ft._isRestartingIce=!1),Io(ft))},function(_t){throw ft._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+$e.type+'" failed with the error "'+_t.message+'".',_t),$e.sdp&&ft._log.warn("The SDP was "+$e.sdp),_t})},fn.prototype._updateDescription=function($e){var ft=this;switch($e.type){case"answer":case"pranswer":if($e.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=$e.revision;break;case"close":return this._close();case"create-offer":return $e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=$e,Promise.resolve()):(this._descriptionRevision=$e.revision,this._offer());case"offer":return $e.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=$e,Promise.resolve()):(this._descriptionRevision=$e.revision,this._handleGlare($e)):(this._descriptionRevision=$e.revision,this._answer($e).then(function(){}))}var _t=$e.revision;return Promise.resolve().then(function(){return ft._setRemoteDescription($e)}).catch(function(sn){var _n=new Xe;throw ft._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+$e.type+'" failed',code:_n.code,error:sn,sdp:$e.sdp}),_n}).then(function(){return ft._lastStableDescriptionRevision=_t,ft._needsAnswer=!1,ft._checkIceBox($e)}).then(function(){return ft._queuedDescription&&ft._updateDescription(ft._queuedDescription)}).then(function(){return ft._queuedDescription=null,ft._maybeReoffer(ft._peerConnection.localDescription).then(function(){})})},fn.prototype._updateIce=function($e){var ft=this._remoteCandidates.update($e);return this._addIceCandidates(ft)},fn.prototype.addDataTrackSender=function($e){if(!this._dataChannels.has($e))try{var ft={ordered:$e.ordered};null!==$e.maxPacketLifeTime&&(ft.maxPacketLifeTime=$e.maxPacketLifeTime),null!==$e.maxRetransmits&&(ft.maxRetransmits=$e.maxRetransmits);var _t=this._peerConnection.createDataChannel($e.id,ft);$e.addDataChannel(_t),this._dataChannels.set($e,_t)}catch(sn){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+$e.id+'": '+sn.message)}},fn.prototype._handleQueuedPublisherHints=function(){var $e=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(ft,_t){var sn=ft.deferred,_n=ft.encodings;$e._mediaTrackSenderToPublisherHints.delete(_t),$e._setPublisherHint(_t,_n).then(function(gi){return sn.resolve(gi)}).catch(function(gi){return sn.reject(gi)})})},fn.prototype._setPublisherHint=function($e,ft){var _t=this;if(Ir)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has($e)&&(this._mediaTrackSenderToPublisherHints.get($e).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete($e));var _n=this._rtpSenders.get($e);if(!_n)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var gi=je();return this._mediaTrackSenderToPublisherHints.set($e,{deferred:gi,encodings:ft}),gi.promise}var To=_n.getParameters();return null!==ft&&ft.forEach(function(bs){var Gs=bs.enabled,po=bs.layer_index;To.encodings.length>po?(_t._log.debug("layer:"+po+", active:"+To.encodings[po].active+" => "+Gs),To.encodings[po].active=Gs):_t._log.warn("invalid layer:"+po+", active:"+Gs)}),this._maybeUpdateEncodings(_n.track,To.encodings,null===ft),_n.setParameters(To).then(function(){return"OK"}).catch(function(bs){return _t._log.error("Failed to apply publisher hints:",bs),"COULD_NOT_APPLY_HINT"})},fn.prototype.addMediaTrackSender=function($e){var ft=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has($e)){var sn=this._addOrUpdateTransceiver($e.track).sender;$e.addSender(sn,function(_n){return ft._setPublisherHint($e,_n)}),this._rtpNewSenders.add(sn),this._rtpSenders.set($e,sn)}},fn.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},fn.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},fn.prototype.getState=function(){if(!this._localDescription)return null;var ft={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(ft.sdp=this._localDescription.sdp),{description:ft,id:this.id}},fn.prototype.offer=function(){var $e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(ft){return $e.transition("updating",ft),($e._needsAnswer||$e._isRestartingIce?Promise.resolve():$e._offer()).then(function(){$e.tryTransition("open",ft)},function(sn){throw $e.tryTransition("open",ft),sn})})},fn.prototype.removeDataTrackSender=function($e){var ft=this._dataChannels.get($e);ft&&($e.removeDataChannel(ft),this._dataChannels.delete($e),ft.close())},fn.prototype.removeMediaTrackSender=function($e){var ft=this._rtpSenders.get($e);ft&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(ft),$e.removeSender(ft),this._mediaTrackSenderToPublisherHints.has($e)&&(this._mediaTrackSenderToPublisherHints.get($e).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete($e)),this._rtpNewSenders.delete(ft),this._rtpSenders.delete($e))},fn.prototype.setConfiguration=function($e){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(qe($e))},fn.prototype.setIceReconnectTimeout=function($e){return this._iceReconnectTimeout.setDelay($e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},fn.prototype.update=function($e){var ft=this;return this.bracket("updating",function(_t){if("closed"===ft.state)return Promise.resolve();ft.transition("updating",_t);var sn=[];return $e.ice&&sn.push(ft._updateIce($e.ice)),$e.description&&sn.push(ft._updateDescription($e.description)),Promise.all(sn).then(function(){ft.tryTransition("open",_t)},function(_n){throw ft.tryTransition("open",_t),_n})})},fn.prototype.getStats=function(){var $e=this;return B(this._peerConnection).then(function(ft){return function Gt(Vn,fn){return Object.assign(fn,{remoteAudioTrackStats:fn.remoteAudioTrackStats.map(function($e){return Ct(Vn,$e)}),remoteVideoTrackStats:fn.remoteVideoTrackStats.map(function($e){return Ct(Vn,$e)}),localAudioTrackStats:fn.localAudioTrackStats.map(function($e){return ya(Vn,$e)}),localVideoTrackStats:fn.localVideoTrackStats.map(function($e){return ya(Vn,$e)})})}($e,ft)})},fn}($t);function ya(Vn,fn){var $e=Vn._getMediaTrackSenderId(fn.trackId);return Object.assign(fn,{trackId:$e})}function Ct(Vn,fn){var $e=ie([],K(Vn._mediaTrackReceivers)).find(function(_t){return _t.track.id===fn.trackId});return Object.assign(fn,{trackId:$e?$e.id:null})}function on(Vn){if(Vn.sdp){var fn=Vn.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(fn)return fn[1]}return null}function qe(Vn){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},Vn)}function Fe(Vn,fn){var $e=fn.track;return $e&&$e.kind===Vn&&"ended"!==$e.readyState}function Io(Vn){(function ta(Vn){Vn._recycledTransceivers.audio=[],Vn._recycledTransceivers.video=[],Vn._peerConnection.getTransceivers().forEach(function(fn){(function Ln(Vn,fn){return!Vn.stopped&&!fn._replaceTrackPromises.has(Vn)&&["inactive","recvonly"].includes(Vn.direction)})(fn,Vn)&&Vn._recycledTransceivers[fn.receiver.track.kind].push(fn)})})(Vn),function no(Vn){var fn=Vn._peerConnection.localDescription;!fn||!fn.sdp||_e(fn.sdp).forEach(function($e){ke($e).forEach(function(_t,sn){return Vn._localCodecs.add(sn)})})}(Vn),function jo(Vn){var fn=Vn._peerConnection.remoteDescription;!fn||!fn.sdp||_e(fn.sdp).forEach(function($e){var ft=$e.match(/^a=mid:(.+)$/m);if(ft&&ft[1]){var _t=ft[1],sn=ke($e);Vn._remoteCodecMaps.set(_t,sn)}})}(Vn),Ps(Vn).then(function(){Vn._handleQueuedPublisherHints()})}function Ps(Vn){var fn=Vn._encodingParameters,_t=new Map([["audio",fn.maxAudioBitrate],["video",fn.maxVideoBitrate]]),sn=[];return Vn._peerConnection.getSenders().filter(function(_n){return _n.track}).forEach(function(_n){var gi=_t.get(_n.track.kind),To=_n.getParameters();null===gi||0===gi?function wo(Vn){Array.isArray(Vn.encodings)&&Vn.encodings.forEach(function(fn){return delete fn.maxBitrate})}(To):Vn._isChromeScreenShareTrack(_n.track)?Vn._log.warn("Not setting maxBitrate for "+_n.track.kind+" Track "+_n.track.id+" because it appears to be screen share track: "+_n.track.label):function nd(Vn,fn){Ir?Vn.encodings=[{maxBitrate:fn}]:Vn.encodings.forEach(function($e){$e.maxBitrate=fn})}(To,gi),!Ir&&Vn._enableDscp&&To.encodings.length>0&&(To.encodings[0].networkPriority="high");var bs=Vn._rtpNewSenders.has(_n);Vn._maybeUpdateEncodings(_n.track,To.encodings,bs),Vn._rtpNewSenders.delete(_n);var Gs=_n.setParameters(To).catch(function(po){Vn._log.warn("Error while setting encodings parameters for "+_n.track.kind+" Track "+_n.track.id+": "+(po.message||po.name))});sn.push(Gs)}),Promise.all(sn)}Oe.exports=Ki},6603:function(Oe,Me,q){"use strict";var _e,F=this&&this.__extends||(_e=function(ue,fe){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,He){we.__proto__=He}||function(we,He){for(var Ue in He)Object.prototype.hasOwnProperty.call(He,Ue)&&(we[Ue]=He[Ue])})(ue,fe)},function(ue,fe){if("function"!=typeof fe&&null!==fe)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function we(){this.constructor=ue}_e(ue,fe),ue.prototype=null===fe?Object.create(fe):(we.prototype=fe.prototype,new we)}),K=this&&this.__read||function(_e,ue){var fe="function"==typeof Symbol&&_e[Symbol.iterator];if(!fe)return _e;var He,Ge,we=fe.call(_e),Ue=[];try{for(;(void 0===ue||ue-- >0)&&!(He=we.next()).done;)Ue.push(He.value)}catch(Ze){Ge={error:Ze}}finally{try{He&&!He.done&&(fe=we.return)&&fe.call(we)}finally{if(Ge)throw Ge.error}}return Ue},ie=this&&this.__spreadArray||function(_e,ue){for(var fe=0,we=ue.length,He=_e.length;fe<we;fe++,He++)_e[He]=ue[fe];return _e},G=q(7627).guessBrowser,V=q(1058),k=q(808),O=q(7772),x=q(9739),B=q(8380).MediaConnectionError,$="firefox"===G(),ae=function(_e){function ue(fe,we,He){var Ue=_e.call(this)||this,Ge=(He=Object.assign({audioContextFactory:$?q(7708):null,PeerConnectionV2:V},He)).audioContextFactory?He.audioContextFactory.getOrCreate(Ue):null,Ze=Ge?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(Ue,{_audioContextFactory:{value:He.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:x.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:Ge?new k(de(Ge)):null},_encodingParameters:{value:fe},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:Ze},_peerConnections:{value:new Map},_preferredCodecs:{value:we},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:He.PeerConnectionV2}}),Ue}return F(ue,_e),ue.prototype.setEffectiveAdaptiveSimulcast=function(fe){this._peerConnections.forEach(function(we){return we.setEffectiveAdaptiveSimulcast(fe)}),this._preferredCodecs.video.forEach(function(we){"adaptiveSimulcast"in we&&(we.adaptiveSimulcast=fe)})},Object.defineProperty(ue.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),ue.prototype._closeAbsentPeerConnections=function(fe){var we=new Set(fe.map(function(He){return He.id}));return this._peerConnections.forEach(function(He){we.has(He.id)||He._close()}),this},ue.prototype._getConfiguration=function(){return this._configurationDeferred.promise},ue.prototype._getOrCreate=function(fe,we){var He=this,Ue=this,Ge=this._peerConnections.get(fe);if(!Ge){var Ze=this._PeerConnectionV2,Xe=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},we);try{Ge=new Ze(fe,this._encodingParameters,this._preferredCodecs,Xe)}catch{throw new B}this._peerConnections.set(Ge.id,Ge),Ge.on("candidates",this.queue.bind(this,"candidates")),Ge.on("description",this.queue.bind(this,"description")),Ge.on("trackAdded",this.queue.bind(this,"trackAdded")),Ge.on("stateChanged",function Be(jt){"closed"===jt&&(Ge.removeListener("stateChanged",Be),Ue._dataTrackSenders.forEach(function(Kt){return Ge.removeDataTrackSender(Kt)}),Ue._mediaTrackSenders.forEach(function(Kt){return Ge.removeMediaTrackSender(Kt)}),Ue._peerConnections.delete(Ge.id),Ue._closedPeerConnectionIds.add(Ge.id),Ce(Ue),Re(Ue))}),Ge.on("connectionStateChanged",function(){return Ce(He)}),Ge.on("iceConnectionStateChanged",function(){return Re(He)}),this._dataTrackSenders.forEach(Ge.addDataTrackSender,Ge),this._mediaTrackSenders.forEach(Ge.addMediaTrackSender,Ge),Re(this)}return Ge},ue.prototype.close=function(){return this._peerConnections.forEach(function(fe){fe.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Re(this),this},ue.prototype.createAndOffer=function(){var fe=this;return this._getConfiguration().then(function(we){var He;do{He=x.makeUUID()}while(fe._peerConnections.has(He));return fe._getOrCreate(He,we)}).then(function(we){return we.offer()}).then(function(){return fe})},ue.prototype.getTrackReceivers=function(){return x.flatMap(this._peerConnections,function(fe){return fe.getTrackReceivers()})},ue.prototype.getStates=function(){var fe=[];return this._peerConnections.forEach(function(we){var He=we.getState();He&&fe.push(He)}),fe},ue.prototype.setConfiguration=function(fe){return this._configuration&&(this._configurationDeferred=x.defer(),this._peerConnections.forEach(function(we){we.setConfiguration(fe)})),this._configuration=fe,this._configurationDeferred.resolve(fe),this},ue.prototype.setIceReconnectTimeout=function(fe){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(we){we.setIceReconnectTimeout(fe)}),this._sessionTimeout=fe),this},ue.prototype.setTrackSenders=function(fe){var we=new Set(fe.filter(function(Ge){return"data"===Ge.kind})),He=new Set(fe.filter(function(Ge){return Ge&&("audio"===Ge.kind||"video"===Ge.kind)})),Ue=function Y(_e,ue,fe){return{data:X(_e,ue),media:z(_e,fe)}}(this,we,He);return this._dataTrackSenders=we,this._mediaTrackSenders=He,function he(_e,ue){(ue.data.add.size||ue.data.remove.size||ue.media.add.size||ue.media.remove.size)&&_e._peerConnections.forEach(function(fe){ue.data.remove.forEach(fe.removeDataTrackSender,fe),ue.media.remove.forEach(fe.removeMediaTrackSender,fe),ue.data.add.forEach(fe.addDataTrackSender,fe),ue.media.add.forEach(fe.addMediaTrackSender,fe),(ue.media.add.size||ue.media.remove.size||ue.data.add.size&&!fe.isApplicationSectionNegotiated)&&fe.offer()})}(this,Ue),this},ue.prototype.update=function(fe,we){var He=this;return void 0===we&&(we=!1),we&&this._closeAbsentPeerConnections(fe),this._getConfiguration().then(function(Ue){return Promise.all(fe.map(function(Ge){return He._closedPeerConnectionIds.has(Ge.id)?null:He._getOrCreate(Ge.id,Ue).update(Ge)}))}).then(function(){return He})},ue.prototype.getStats=function(){var fe=Array.from(this._peerConnections.values());return Promise.all(fe.map(function(we){return we.getStats().then(function(He){return[we.id,He]})})).then(function(we){return new Map(we)})},ue}(O);function de(_e){return _e.createMediaStreamDestination().stream.getAudioTracks()[0]}function X(_e,ue){return{add:x.difference(ue,_e._dataTrackSenders),remove:x.difference(_e._dataTrackSenders,ue)}}function z(_e,ue){return{add:x.difference(ue,_e._mediaTrackSenders),remove:x.difference(_e._mediaTrackSenders,ue)}}var be,ce={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function me(_e){return _e.length?(be=be||function ke(){return Object.keys(ce).reduce(function(_e,ue){var fe;return Object.assign(_e,((fe={})[ce[ue]]=ue,fe))},{})}(),_e.reduce(function(ue,fe){return be[Math.max(ce[ue],ce[fe])]})):"new"}function Re(_e){_e._lastIceConnectionState=_e.iceConnectionState,_e._iceConnectionState=me(ie([],K(_e._peerConnections.values())).map(function(ue){return ue.iceConnectionState})),_e.iceConnectionState!==_e._lastIceConnectionState&&_e.emit("iceConnectionStateChanged")}function Ce(_e){_e._lastConnectionState=_e.connectionState,_e._connectionState=me(ie([],K(_e._peerConnections.values())).map(function(ue){return ue.connectionState})),_e.connectionState!==_e._lastConnectionState&&_e.emit("connectionStateChanged")}Oe.exports=ae},8069:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(4071),ie=1,G=function(V){function k(O,x){var B=V.call(this,O,"publisher_hints",x)||this;return B.on("ready",function($){B._log.debug("publisher_hints transport ready:",$),$.on("message",function(ae){"publisher_hints"===(B._log.debug("Incoming: ",ae),ae.type)?ae.publisher&&ae.publisher.hints&&ae.publisher.id&&B._processPublisherHints(ae.publisher.hints,ae.publisher.id):B._log.warn("Unknown message type: ",ae.type)})}),B}return F(k,V),k.prototype.sendTrackReplaced=function(O){if(this._transport){var B={type:"client_reset",track:O.trackSid,id:ie++};this._log.debug("Outgoing: ",B),this._transport.publish(B)}},k.prototype.sendHintResponse=function(O){if(this._transport){var $={type:"publisher_hints",id:O.id,hints:O.hints};this._log.debug("Outgoing: ",$),this._transport.publish($)}},k.prototype._processPublisherHints=function(O,x){try{this.emit("updated",O,x)}catch(B){this._log.error("error processing hints:",B)}},k}(K);Oe.exports=G},8930:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(){var k=G.call(this)||this;return Object.defineProperties(k,{_revision:{value:1,writable:!0}}),k}return F(V,G),V.prototype.update=function(k){return k.revision<this._revision?this:(this._revision=k.revision,this.enable(k.is_recording))},V}(q(9987));Oe.exports=ie},1118:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(2184),ie=q(467),G=function(V){function k(O,x,B,$,ae,de){var he=V.call(this,O.sid,O.identity)||this;return de=Object.assign({RemoteTrackPublicationV2:ie},de),Object.defineProperties(he,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:de.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:x},updateSubscriberTrackPriority:{value:function(X,Y){return B(X,Y)}},updateTrackRenderHint:{value:function(X,Y){return $(X,Y)}},clearTrackHint:{value:function(X){return ae(X)}},revision:{enumerable:!0,get:function(){return this._revision}}}),he.update(O)}return F(k,V),k.prototype._getOrCreateTrack=function(O){var x=this._RemoteTrackPublicationV2,B=this.tracks.get(O.sid);return B||(B=new x(O,this._getInitialTrackSwitchOffState(O.sid)),this.addTrack(B)),B},k.prototype.update=function(O){var x=this;if(null!==this.revision&&O.revision<=this.revision)return this;this._revision=O.revision;var B=new Set;switch(O.tracks.forEach(function($){var ae=x._getOrCreateTrack($);ae.update($),B.add(ae)}),this.tracks.forEach(function($){B.has($)||x.removeTrack($)}),O.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},k}(K);Oe.exports=G},467:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){return G.call(this,k.sid,k.name,k.kind,k.enabled,k.priority,O)||this}return F(V,G),V.prototype.update=function(k){return this.enable(k.enabled),this.setPriority(k.priority),this},V}(q(8956));Oe.exports=ie},7818:function(Oe,Me,q){"use strict";var x,F=this&&this.__extends||(x=function(B,$){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,de){ae.__proto__=de}||function(ae,de){for(var he in de)Object.prototype.hasOwnProperty.call(de,he)&&(ae[he]=de[he])})(B,$)},function(B,$){if("function"!=typeof $&&null!==$)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function ae(){this.constructor=B}x(B,$),B.prototype=null===$?Object.create($):(ae.prototype=$.prototype,new ae)}),K=q(4071),ie=q(6543),G=q(9739).isDeepEqual,k=1,O=function(x){function B($,ae){var de=x.call(this,$,"render_hints",ae)||this;return Object.defineProperties(de,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new ie(function(){de._sendAllHints(),de._responseTimer.setDelay(2*de._responseTimer.delay)},2e3,!1)}}),de.on("ready",function(he){he.on("message",function(X){"render_hints"===(de._log.debug("Incoming: ",X),X.type)?de._processHintResults(X&&X.subscriber&&X.subscriber.hints||[]):de._log.warn("Unknown message type: ",X.type)}),de._sendAllHints()}),de}return F(B,x),B.prototype._sendAllHints=function(){var $=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(ae){var de=$._trackSidsToRenderHints.get(ae);de.renderDimensions&&(de.isDimensionDirty=!0),"enabled"in de&&(de.isEnabledDirty=!0)}),this._sendHints()},B.prototype._processHintResults=function($){var ae=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),$.forEach(function(de){"OK"!==de.result&&ae._log.debug("Server error processing hint:",de)}),this._sendHints()},B.prototype._sendHints=function(){var $=this;if(this._transport&&!this._responseTimer.isSet){var ae=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(he){var X=$._trackSidsToRenderHints.get(he);if(X.isEnabledDirty||X.isDimensionDirty){var Y={track:he};X.isEnabledDirty&&(Y.enabled=X.enabled,X.isEnabledDirty=!1),X.isDimensionDirty&&(Y.render_dimensions=X.renderDimensions,X.isDimensionDirty=!1),ae.push(Y)}}),ae.length>0){var de={type:"render_hints",subscriber:{id:k++,hints:ae}};this._log.debug("Outgoing: ",de),this._transport.publish(de),this._responseTimer.start()}}},B.prototype.setTrackHint=function($,ae){var de=this._trackSidsToRenderHints.get($)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in ae&&de.enabled!==ae.enabled&&(de.enabled=!!ae.enabled,de.isEnabledDirty=!0),ae.renderDimensions&&!G(ae.renderDimensions,de.renderDimensions)&&(de.renderDimensions=ae.renderDimensions,de.isDimensionDirty=!0),this._trackSidsToRenderHints.set($,de),this._sendHints()},B.prototype.clearTrackHint=function($){this._trackSidsToRenderHints.delete($)},B}(K);Oe.exports=O},2112:function(Oe,Me,q){"use strict";var je,F=this&&this.__extends||(je=function(ze,Pe){return(je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,Ut){rt.__proto__=Ut}||function(rt,Ut){for(var $t in Ut)Object.prototype.hasOwnProperty.call(Ut,$t)&&(rt[$t]=Ut[$t])})(ze,Pe)},function(ze,Pe){if("function"!=typeof Pe&&null!==Pe)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function rt(){this.constructor=ze}je(ze,Pe),ze.prototype=null===Pe?Object.create(Pe):(rt.prototype=Pe.prototype,new rt)}),K=this&&this.__read||function(je,ze){var Pe="function"==typeof Symbol&&je[Symbol.iterator];if(!Pe)return je;var Ut,Mt,rt=Pe.call(je),$t=[];try{for(;(void 0===ze||ze-- >0)&&!(Ut=rt.next()).done;)$t.push(Ut.value)}catch(en){Mt={error:en}}finally{try{Ut&&!Ut.done&&(Pe=rt.return)&&Pe.call(rt)}finally{if(Mt)throw Mt.error}}return $t},ie=q(2314),G=q(9056),V=q(5775),k=q(8930),O=q(8343),x=q(1118),B=q(7805),$=q(8004),ae=q(5210),de=q(7818),he=q(8069),X=q(9739),Y=X.constants.DEFAULT_SESSION_TIMEOUT_SEC,z=X.createBandwidthProfilePayload,ce=X.defer,be=X.difference,ke=X.filterObject,me=X.flatMap,Re=X.oncePerTick,Ce=q(8218),_e=q(8380).createTwilioError,fe=function(je){function ze(Pe,rt,Ut,$t,Mt){var en=this;rt.options=Object.assign({session_timeout:Y},rt.options),Mt=Object.assign({DominantSpeakerSignaling:ie,NetworkQualityMonitor:G,NetworkQualitySignaling:V,RecordingSignaling:k,RemoteParticipantV2:x,TrackPrioritySignaling:$,TrackSwitchOffSignaling:ae,bandwidthProfile:null,sessionTimeout:1e3*rt.options.session_timeout,statsPublishIntervalMs:1e4},Mt),Pe.setBandwidthProfile(Mt.bandwidthProfile),$t.setIceReconnectTimeout(Mt.sessionTimeout);var Zn=function(Mr){return en._getTrackReceiver(Mr)},qt=(en=je.call(this,Pe,rt.sid,rt.name,Mt)||this)._log;return Object.defineProperties(en,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:Mt.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:Pe.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:Pe.networkQualityConfiguration},_peerConnectionManager:{value:$t},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:Mt.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new Mt.DominantSpeakerSignaling(Zn,{log:qt})},_networkQualitySignaling:{value:new Mt.NetworkQualitySignaling(Zn,Pe.networkQualityConfiguration,{log:qt})},_renderHintsSignaling:{value:new de(Zn,{log:qt})},_publisherHintsSignaling:{value:new he(Zn,{log:qt})},_trackPrioritySignaling:{value:new Mt.TrackPrioritySignaling(Zn,{log:qt})},_trackSwitchOffSignaling:{value:new Mt.TrackSwitchOffSignaling(Zn,{log:qt})},_pendingSwitchOffStates:{value:new Map},_transport:{value:Ut},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:rt.options.media_region||null}}),en._initTrackSwitchOffSignaling(),en._initDominantSpeakerSignaling(),en._initNetworkQualityMonitorSignaling(),en._initPublisherHintSignaling(),function Ge(je,ze){var Pe=Re(function(){je._publishNewLocalParticipantState()}),rt=Re(function(){var Ut=me(ze.tracks,function($t){return $t.trackTransceiver});je._peerConnectionManager.setTrackSenders(Ut)});ze.on("trackAdded",rt),ze.on("trackRemoved",rt),ze.on("updated",Pe),je.on("stateChanged",function Ut($t){"disconnected"===$t&&(ze.removeListener("trackAdded",rt),ze.removeListener("trackRemoved",rt),ze.removeListener("updated",Pe),je.removeListener("stateChanged",Ut),ze.disconnect())}),je.on("signalingConnectionStateChanged",function(){var Ut=je.localParticipant,Mt=Ut.identity,en=Ut.sid;switch(je.signalingConnectionState){case"connected":Ut.connect(en,Mt);break;case"reconnecting":Ut.reconnecting()}})}(en,Pe),function Ze(je,ze){ze.on("description",function(rt){je._publishPeerConnectionState(rt)}),ze.dequeue("description"),ze.on("candidates",function(rt){je._publishPeerConnectionState(rt)}),ze.dequeue("candidates"),ze.on("trackAdded",je._addTrackReceiver.bind(je)),ze.dequeue("trackAdded"),ze.getTrackReceivers().forEach(je._addTrackReceiver,je),ze.on("connectionStateChanged",function(){je.emit("connectionStateChanged")}),ze.on("iceConnectionStateChanged",function(){je.emit("iceConnectionStateChanged"),"failed"===je.iceConnectionState&&(null!==je.localParticipant.networkQualityLevel&&je.localParticipant.setNetworkQualityLevel(0),je.participants.forEach(function(Pe){null!==Pe.networkQualityLevel&&Pe.setNetworkQualityLevel(0)}))})}(en,$t),function Xe(je,ze){ze.on("message",je._update.bind(je)),ze.on("stateChanged",function Pe(rt,Ut){"disconnected"===rt&&("disconnected"!==je.state&&je._disconnect(Ut),ze.removeListener("stateChanged",Pe)),je.emit("signalingConnectionStateChanged")})}(en,Ut),function Be(je,ze,Pe){var rt=new Map,Ut=!1,$t=setInterval(function(){je.getStats().then(function(Mt){Ut=!Ut,Mt.forEach(function(en,Zn){var qt=new B(Zn,en,!0);ze.publishEvent("quality","stats-report","info",{audioTrackStats:qt.remoteAudioTrackStats.map(function(Ir,Cr){return St(Ir,en.remoteAudioTrackStats[Cr],rt)}),localAudioTrackStats:qt.localAudioTrackStats.map(function(Ir,Cr){return Kt(Ir,en.localAudioTrackStats[Cr],rt)}),localVideoTrackStats:qt.localVideoTrackStats.map(function(Ir,Cr){return Kt(Ir,en.localVideoTrackStats[Cr],rt)}),peerConnectionId:qt.peerConnectionId,videoTrackStats:qt.remoteVideoTrackStats.map(function(Ir,Cr){return St(Ir,en.remoteVideoTrackStats[Cr],rt)})});var Mr=me(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Ir){return qt[Ir].map(function(Cr){return Cr.trackSid+"+"+Cr.ssrc})});if(be(Array.from(rt.keys()),Mr).forEach(function(Ir){return rt.delete(Ir)}),Ut){var wr=function Ye(je,ze){return(je=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:ze,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},ke(je||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},ke(je.localCandidate||{},null)),je.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},ke(je.remoteCandidate||{},null)),je}(en.activeIceCandidatePair,qt.peerConnectionId);ze.publishEvent("quality","active-ice-candidate-pair","info",wr)}})},function(){})},Pe);je.on("stateChanged",function Mt(en){"disconnected"===en&&(clearInterval($t),je.removeListener("stateChanged",Mt))})}(en,Ut,Mt.statsPublishIntervalMs),en._update(rt),en._peerConnectionManager.setEffectiveAdaptiveSimulcast(en._publisherHintsSignaling.isSetup),en}return F(ze,je),Object.defineProperty(ze.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),ze.prototype._deleteTrackReceiverDeferred=function(Pe){return this._trackReceiverDeferreds.delete(Pe)},ze.prototype._getOrCreateTrackReceiverDeferred=function(Pe){var rt=this._trackReceiverDeferreds.get(Pe)||ce(),$t=this._peerConnectionManager.getTrackReceivers().find(function(Mt){return Mt.id===Pe&&"ended"!==Mt.readyState});return $t?rt.resolve($t):this._trackReceiverDeferreds.set(Pe,rt),rt},ze.prototype._addTrackReceiver=function(Pe){return this._getOrCreateTrackReceiverDeferred(Pe.id).resolve(Pe),this},ze.prototype._disconnect=function(Pe){var rt=je.prototype._disconnect.call(this,Pe);return rt&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(Ut){Ut.publishFailed(Pe||new Error("LocalParticipant disconnected"))}),rt},ze.prototype._getTrackReceiver=function(Pe){var rt=this;return this._getOrCreateTrackReceiverDeferred(Pe).promise.then(function(Ut){return rt._deleteTrackReceiverDeferred(Pe),Ut})},ze.prototype._getInitialTrackSwitchOffState=function(Pe){var rt=this._pendingSwitchOffStates.get(Pe)||!1;return this._pendingSwitchOffStates.delete(Pe),rt&&this._log.warn("["+Pe+"] was initially switched off! "),rt},ze.prototype._getTrackSidsToTrackSignalings=function(){var Pe=me(this.participants,function(rt){return Array.from(rt.tracks)});return new Map(Pe)},ze.prototype._getOrCreateRemoteParticipant=function(Pe){var rt=this,Ut=this._RemoteParticipantV2,$t=this.participants.get(Pe.sid),Mt=this;return $t||(($t=new Ut(Pe,function(en){return rt._getInitialTrackSwitchOffState(en)},function(en,Zn){return rt._trackPrioritySignaling.sendTrackPriorityUpdate(en,"subscribe",Zn)},function(en,Zn){return rt._renderHintsSignaling.setTrackHint(en,Zn)},function(en){return rt._renderHintsSignaling.clearTrackHint(en)})).on("stateChanged",function en(Zn){"disconnected"===Zn&&($t.removeListener("stateChanged",en),Mt.participants.delete($t.sid),Mt._disconnectedParticipantRevisions.set($t.sid,$t.revision))}),this.connectParticipant($t)),$t},ze.prototype._getState=function(){return{participant:this.localParticipant.getState()}},ze.prototype._maybeAddBandwidthProfile=function(Pe){var rt=this.localParticipant,Ut=rt.bandwidthProfile,$t=rt.bandwidthProfileRevision;return Ut&&this._lastBandwidthProfileRevision<$t?(this._lastBandwidthProfileRevision=$t,Object.assign({bandwidth_profile:z(Ut)},Pe)):Pe},ze.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},ze.prototype._publishPeerConnectionState=function(Pe){this._transport.publish(Object.assign({peer_connections:[Pe]},this._getState()))},ze.prototype._update=function(Pe){var rt=this;if(Pe.subscribed&&Pe.subscribed.revision>this._subscribedRevision){this._subscribedRevision=Pe.subscribed.revision,Pe.subscribed.tracks.forEach(function(Mt){Mt.id?(rt._subscriptionFailures.delete(Mt.sid),rt._subscribed.set(Mt.sid,Mt.id)):Mt.error&&!rt._subscriptionFailures.has(Mt.sid)&&rt._subscriptionFailures.set(Mt.sid,Mt.error)});var Ut=new Set(Pe.subscribed.tracks.filter(function(Mt){return!!Mt.id}).map(function(Mt){return Mt.sid}));this._subscribed.forEach(function(Mt,en){Ut.has(en)||rt._subscribed.delete(en)})}var $t=new Set;return(Pe.participants||[]).forEach(function(Mt){if(Mt.sid!==rt.localParticipant.sid){var en=rt._disconnectedParticipantRevisions.get(Mt.sid);if(!(en&&Mt.revision<=en)){en&&rt._disconnectedParticipantRevisions.delete(Mt.sid);var Zn=rt._getOrCreateRemoteParticipant(Mt);Zn.update(Mt),$t.add(Zn)}}}),"synced"===Pe.type&&this.participants.forEach(function(Mt){$t.has(Mt)||Mt.disconnect()}),function jt(je){var ze=je._getTrackSidsToTrackSignalings();je._subscriptionFailures.forEach(function(Pe,rt){var Ut=ze.get(rt);Ut&&(je._subscriptionFailures.delete(rt),Ut.subscribeFailed(_e(Pe.code,Pe.message)))}),ze.forEach(function(Pe){var rt=je._subscribed.get(Pe.sid);(!rt||Pe.isSubscribed&&Pe.trackTransceiver.id!==rt)&&Pe.setTrackTransceiver(null),rt&&je._getTrackReceiver(rt).then(function(Ut){return Pe.setTrackTransceiver(Ut)})})}(this),Pe.peer_connections&&this._peerConnectionManager.update(Pe.peer_connections,"synced"===Pe.type),Pe.recording&&this.recording.update(Pe.recording),Pe.published&&Pe.published.revision>this._publishedRevision&&(this._publishedRevision=Pe.published.revision,Pe.published.tracks.forEach(function(Mt){Mt.sid&&rt._published.set(Mt.id,Mt.sid)}),this.localParticipant.update(Pe.published)),Pe.participant&&this.localParticipant.connect(Pe.participant.sid,Pe.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(Mt){var en=Mt.channel;!Mt.isSetup&&Pe.media_signaling&&Pe.media_signaling[en]&&Pe.media_signaling[en].transport&&"data-channel"===Pe.media_signaling[en].transport.type&&Mt.setup(Pe.media_signaling[en].transport.label)}),this},ze.prototype._initPublisherHintSignaling=function(){var Pe=this;this._publisherHintsSignaling.on("updated",function(Ut,$t){Promise.all(Ut.map(function(Mt){return Pe.localParticipant.setPublisherHint(Mt.track,Mt.encodings).then(function(en){return{track:Mt.track,result:en}})})).then(function(Mt){Pe._publisherHintsSignaling.sendHintResponse({id:$t,hints:Mt})})});var rt=function(Ut){"video"===Ut.kind&&Ut.trackTransceiver.on("replaced",function(){Pe._publisherHintsSignaling.sendTrackReplaced({trackSid:Ut.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(Ut){return rt(Ut)}),this.localParticipant.on("trackAdded",function(Ut){return rt(Ut)})},ze.prototype._initTrackSwitchOffSignaling=function(){var Pe=this;this._trackSwitchOffSignaling.on("updated",function(rt,Ut){try{Pe._log.debug("received trackSwitch: ",{tracksOn:Ut,tracksOff:rt});var $t=new Map;Ut.forEach(function(Mt){return $t.set(Mt,!0)}),rt.forEach(function(Mt){$t.get(Mt)&&Pe._log.warn(Mt+" is DUPLICATED in both tracksOff and tracksOn list"),$t.set(Mt,!1)}),Pe.participants.forEach(function(Mt){Mt.tracks.forEach(function(en){var Zn=$t.get(en.sid);typeof Zn<"u"&&(en.setSwitchedOff(!Zn),$t.delete(en.sid))})}),$t.forEach(function(Mt,en){return Pe._pendingSwitchOffStates.set(en,!Mt)})}catch(Mt){Pe._log.error("error processing track switch off:",Mt)}})},ze.prototype._initDominantSpeakerSignaling=function(){var Pe=this;this._dominantSpeakerSignaling.on("updated",function(){return Pe.setDominantSpeaker(Pe._dominantSpeakerSignaling.loudestParticipantSid)})},ze.prototype._initNetworkQualityMonitorSignaling=function(){var Pe=this;this._networkQualitySignaling.on("ready",function(){var rt=new Pe._NetworkQualityMonitor(Pe._peerConnectionManager,Pe._networkQualitySignaling);Pe._networkQualityMonitor=rt,rt.on("updated",function(){"failed"!==Pe.iceConnectionState&&(Pe.localParticipant.setNetworkQualityLevel(rt.level,rt.levels),Pe.participants.forEach(function(Ut){var $t=rt.remoteLevels.get(Ut.sid);$t&&Ut.setNetworkQualityLevel($t.level,$t)}))}),rt.start()}),this._networkQualitySignaling.on("teardown",function(){return Pe._teardownNetworkQualityMonitor()})},ze.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},ze.prototype.getStats=function(){var Pe=this;return this._peerConnectionManager.getStats().then(function(rt){return new Map(Array.from(rt).map(function(Ut){var $t=K(Ut,2),en=$t[1];return[$t[0],Object.assign({},en,{localAudioTrackStats:He(Pe,en.localAudioTrackStats),localVideoTrackStats:He(Pe,en.localVideoTrackStats),remoteAudioTrackStats:Ue(Pe,en.remoteAudioTrackStats),remoteVideoTrackStats:Ue(Pe,en.remoteVideoTrackStats)})]}))})},ze}(O);function we(je,ze){return ze.reduce(function(Pe,rt){var Ut=je.get(rt.trackId);return Ut?[Object.assign({},rt,{trackSid:Ut})].concat(Pe):Pe},[])}function He(je,ze){return we(je._published,ze)}function Ue(je,ze){return we(new Map(Array.from(je._subscribed.entries()).map(function(rt){var Ut=K(rt,2);return[Ut[1],Ut[0]]})),ze)}function Kt(je,ze,Pe){var rt=ze.framesEncoded,Ut=ze.packetsSent,$t=ze.totalEncodeTime,Mt=ze.totalPacketSendDelay,en=Object.assign({},je),Zn=je.trackSid+"+"+je.ssrc,qt=Pe.get(Zn)||new Map;if("number"==typeof $t&&"number"==typeof rt){var Mr=qt.get("avgEncodeDelay")||new Ce;Mr.putSample(1e3*$t,rt),en.avgEncodeDelay=Math.round(Mr.get()),qt.set("avgEncodeDelay",Mr)}if("number"==typeof Mt&&"number"==typeof Ut){var xr=qt.get("avgPacketSendDelay")||new Ce;xr.putSample(1e3*Mt,Ut),en.avgPacketSendDelay=Math.round(xr.get()),qt.set("avgPacketSendDelay",xr)}return Pe.set(Zn,qt),en}function St(je,ze,Pe){var rt=ze.estimatedPlayoutTimestamp,Ut=ze.framesDecoded,$t=ze.jitterBufferDelay,Mt=ze.jitterBufferEmittedCount,en=ze.totalDecodeTime,Zn=Object.assign({},je),qt=je.trackSid+"+"+je.ssrc,Mr=Pe.get(qt)||new Map;if("number"==typeof rt&&(Zn.estimatedPlayoutTimestamp=rt),"number"==typeof Ut&&"number"==typeof en){var xr=Mr.get("avgDecodeDelay")||new Ce;xr.putSample(1e3*en,Ut),Zn.avgDecodeDelay=Math.round(xr.get()),Mr.set("avgDecodeDelay",xr)}if("number"==typeof $t&&"number"==typeof Mt){var wr=Mr.get("avgJitterBufferDelay")||new Ce;wr.putSample(1e3*$t,Mt),Zn.avgJitterBufferDelay=Math.round(wr.get()),Mr.set("avgJitterBufferDelay",wr)}return Pe.set(qt,Mr),Zn}Oe.exports=fe},8004:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,"track_priority",O)||this;return Object.defineProperties(x,{_enqueuedPriorityUpdates:{value:new Map}}),x.on("ready",function(B){Array.from(x._enqueuedPriorityUpdates.keys()).forEach(function($){B.publish({type:"track_priority",track:$,subscribe:x._enqueuedPriorityUpdates.get($)})})}),x}return F(V,G),V.prototype.sendTrackPriorityUpdate=function(k,O,x){if("subscribe"!==O)throw new Error("only subscribe priorities are supported, found: "+O);this._enqueuedPriorityUpdates.set(k,x),this._transport&&this._transport.publish({type:"track_priority",track:k,subscribe:x})},V}(q(4071));Oe.exports=ie},5210:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,"track_switch_off",O)||this;return x.on("ready",function(B){B.on("message",function($){"track_switch_off"===$.type&&x._setTrackSwitchOffUpdates($.off||[],$.on||[])})}),x}return F(V,G),V.prototype._setTrackSwitchOffUpdates=function(k,O){this.emit("updated",k,O)},V}(q(4071));Oe.exports=ie},4892:function(Oe,Me,q){"use strict";var Ge,F=this&&this.__extends||(Ge=function(Ze,Xe){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Be,jt){Be.__proto__=jt}||function(Be,jt){for(var Kt in jt)Object.prototype.hasOwnProperty.call(jt,Kt)&&(Be[Kt]=jt[Kt])})(Ze,Xe)},function(Ze,Xe){if("function"!=typeof Xe&&null!==Xe)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function Be(){this.constructor=Ze}Ge(Ze,Xe),Ze.prototype=null===Xe?Object.create(Xe):(Be.prototype=Xe.prototype,new Be)}),K=q(8675),ie=q(5330),G=q(2606),V=q(8701).reconnectBackoffConfig,k=q(6543),O=q(8701),x=O.SDK_NAME,B=O.SDK_VERSION,$=O.SDP_FORMAT,ae=q(9739),de=ae.createBandwidthProfilePayload,he=ae.createMediaSignalingPayload,X=ae.createSubscribePayload,Y=ae.getUserAgent,z=ae.isNonArrayObject,ce=q(8380),be=ce.createTwilioError,ke=ce.RoomCompletedError,me=ce.SignalingConnectionError,Re=ce.SignalingServerBusyError,ue={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},fe=function(Ge){function Ze(Xe,Be,jt,Kt,St,Ye){var je;return Ye=Object.assign({Backoff:G,TwilioConnection:ie,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:Y()},Ye),je=Ge.call(this,"connecting",ue)||this,Object.defineProperties(je,{_accessToken:{value:Be},_automaticSubscription:{value:Ye.automaticSubscription},_bandwidthProfile:{value:Ye.bandwidthProfile},_dominantSpeaker:{value:Ye.dominantSpeaker},_adaptiveSimulcast:{value:Ye.adaptiveSimulcast},_eventObserver:{value:Ye.eventObserver,writable:!1},_renderHints:{value:Ye.renderHints},_iceServersStatus:{value:Array.isArray(Ye.iceServers)?"overrode":"acquire"},_localParticipant:{value:jt},_name:{value:Xe},_networkQuality:{value:z(Ye.networkQuality)||Ye.networkQuality},_options:{value:Ye},_peerConnectionManager:{value:Kt},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new Ye.Backoff(V)},_session:{value:null,writable:!0},_trackPriority:{value:Ye.trackPriority},_trackSwitchOff:{value:Ye.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:Ye.userAgent},_wsServer:{value:St}}),function Ue(Ge){function Ze(){if("disconnected"!==Ge.state){Ge._twilioConnection&&Ge._twilioConnection.removeListener("message",Be);var ze=Ge._options,Ut=ze.TwilioConnection,$t=new Ut(Ge._wsServer,Object.assign({helloBody:"connecting"===Ge.state&&"acquire"===Ge._iceServersStatus?Ge._createIceMessage():Ge._createConnectOrSyncOrDisconnectMessage()},ze));$t.once("close",function(Mt){Mt===Ut.CloseReason.LOCAL?Xe():Xe(new Error(Mt))}),$t.on("message",Be),Ge._twilioConnection=$t}}function Xe(je){if("disconnected"!==Ge.state){if(!je)return void Ge.disconnect();var ze=Ge._getReconnectTimer();if(!ze){var Pe=je.message===ie.CloseReason.BUSY?new Re:new me;return void Ge.disconnect(Pe)}"connected"===Ge.state&&Ge.preempt("syncing"),ze.then(Ze)}}function Be(je){if("disconnected"!==Ge.state){if("error"===je.type)return void Ge.disconnect(be(je.code,je.message));switch(Ge.state){case"connected":switch(je.type){case"connected":case"synced":case"update":return void Ge.emit("message",je);case"disconnected":return void Ge.disconnect("completed"===je.status?new ke:null);default:return}case"connecting":switch(je.type){case"iced":return void Ge._options.onIced(je.ice_servers).then(function(){Ge._sendConnectOrSyncOrDisconnectMessage()});case"connected":return Ge._setSession(je.session,je.options.session_timeout),Ge.emit("connected",je),void Ge.preempt("connected");case"synced":case"update":return void Ge._updatesReceived.push(je);case"disconnected":return void Ge.disconnect("completed"===je.status?new ke:null);default:return}case"syncing":switch(je.type){case"connected":case"update":return void Ge._updatesReceived.push(je);case"synced":return Ge._clearReconnectTimer(),Ge.emit("message",je),void Ge.preempt("connected");case"disconnected":return void Ge.disconnect("completed"===je.status?new ke:null);default:return}default:return}}}Ge.on("stateChanged",function je(ze){switch(ze){case"connected":var Pe=Ge._updatesToSend.splice(0);return Pe.length&&Ge.publish(function He(Ge){return Ge.reduce(function(Ze,Xe){return(!Ze.participant&&Xe.participant||Ze.participant&&Xe.participant&&Xe.participant.revision>Ze.participant.revision)&&(Ze.participant=Xe.participant),!Ze.peer_connections&&Xe.peer_connections?Ze.peer_connections=we(Xe.peer_connections):Ze.peer_connections&&Xe.peer_connections&&(Ze.peer_connections=we(Ze.peer_connections.concat(Xe.peer_connections))),Ze},{})}(Pe)),void Ge._updatesReceived.splice(0).forEach(function(rt){return Ge.emit("message",rt)});case"disconnected":return Ge._twilioConnection.removeListener("message",Be),void Ge.removeListener("stateChanged",je);default:return}});var jt=Ge._options;"overrode"===Ge._iceServersStatus?(0,jt.onIced)(jt.iceServers).then(Ze):Ze()}(je),je}return F(Ze,Ge),Ze.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Xe={connecting:"connect",syncing:"sync"}[this.state],Be={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Xe,version:2};return"connect"===Be.type?(Be.ice_servers=this._iceServersStatus,Be.publisher={name:x,sdk_version:B,user_agent:this._userAgent},this._bandwidthProfile&&(Be.bandwidth_profile=de(this._bandwidthProfile)),Be.media_signaling=he(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),Be.subscribe=X(this._automaticSubscription),Be.format=$,Be.token=this._accessToken):"sync"===Be.type?(Be.session=this._session,Be.token=this._accessToken):"update"===Be.type&&(Be.session=this._session),Be},Ze.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},Ze.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Xe=this._createConnectOrSyncOrDisconnectMessage();Xe&&this._twilioConnection.sendMessage(Xe)},Ze.prototype.disconnect=function(Xe){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Xe]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},Ze.prototype.publish=function(Xe){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Xe)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Xe),!0;default:return!1}},Ze.prototype.publishEvent=function(Xe,Be,jt,Kt){this._eventObserver.emit("event",{group:Xe,name:Be,level:jt,payload:Kt})},Ze.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},Ze.prototype._setSession=function(Xe,Be){this._session=Xe,this._sessionTimeoutMS=1e3*Be},Ze.prototype._getReconnectTimer=function(){var Xe=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new k(function(){Xe._sessionTimer&&(Xe._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(Be){Xe._reconnectBackoff.backoff(Be)}))},Ze.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},Ze}(K);function we(Ge){return Array.from(Ge.reduce(function(Ze,Xe){var Be=Ze.get(Xe.id)||Xe;return(!Be.description&&Xe.description||Be.description&&Xe.description&&Xe.description.revision>Be.description.revision)&&(Be.description=Xe.description),(!Be.ice&&Xe.ice||Be.ice&&Xe.ice&&Xe.ice.revision>Be.ice.revision)&&(Be.ice=Xe.ice),Ze.set(Be.id,Be),Ze},new Map).values())}Oe.exports=fe},8675:function(Oe,Me,q){"use strict";var he,F=this&&this.__extends||(he=function(X,Y){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var be in ce)Object.prototype.hasOwnProperty.call(ce,be)&&(z[be]=ce[be])})(X,Y)},function(X,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function z(){this.constructor=X}he(X,Y),X.prototype=null===Y?Object.create(Y):(z.prototype=Y.prototype,new z)}),K=this&&this.__read||function(he,X){var Y="function"==typeof Symbol&&he[Symbol.iterator];if(!Y)return he;var ce,ke,z=Y.call(he),be=[];try{for(;(void 0===X||X-- >0)&&!(ce=z.next()).done;)be.push(ce.value)}catch(me){ke={error:me}}finally{try{ce&&!ce.done&&(Y=z.return)&&Y.call(z)}finally{if(ke)throw ke.error}}return be},ie=this&&this.__spreadArray||function(he,X){for(var Y=0,z=X.length,ce=he.length;Y<z;Y++,ce++)he[ce]=X[Y];return he},G=q(9069).EventEmitter,V=q(9739),k=function(he){function X(Y,z){var ce=he.call(this)||this,be=null,ke=Y;return z=function ae(he){var X=new Map;for(var Y in he)X.set(Y,new Set(he[Y]));return X}(z),Object.defineProperties(ce,{_lock:{get:function(){return be},set:function(me){be=me}},_reachableStates:{value:B(z)},_state:{get:function(){return ke},set:function(me){ke=me}},_states:{value:z},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==be}},state:{enumerable:!0,get:function(){return ke}}}),ce.on("stateChanged",function(me){ce._whenDeferreds.forEach(function(Re){Re.when(me,Re.resolve,Re.reject)})}),ce}return F(X,he),X.prototype._whenPromise=function(Y){var z=this;if("function"!=typeof Y)return Promise.reject(new Error("when() executor must be a function"));var ce=V.defer();return ce.when=Y,this._whenDeferreds.add(ce),ce.promise.then(function(be){return z._whenDeferreds.delete(ce),be},function(be){throw z._whenDeferreds.delete(ce),be})},X.prototype.bracket=function(Y,z){var ce,be=this;function ke(me){if(be.hasLock(ce)&&be.releaseLockCompletely(ce),me)throw me}return this.takeLock(Y).then(function(Re){return z(ce=Re)}).then(function(Re){return ke(),Re},ke)},X.prototype.hasLock=function(Y){return this._lock===Y},X.prototype.preempt=function(Y,z,ce){if(!O(this._states,this.state,Y))throw new Error('Cannot transition from "'+this.state+'" to "'+Y+'"');var be;this.isLocked&&(be=this._lock,this._lock=null);var ke=null;z&&(ke=this.takeLockSync(z));var me=ke?null:this.takeLockSync("preemption");return this.transition(Y,ke||me,ce),be&&be.resolve(),me&&this.releaseLock(me),ke},X.prototype.releaseLock=function(Y){if(!this.isLocked)throw new Error("Could not release the lock for "+Y.name+" because the StateMachine is not locked");if(!this.hasLock(Y))throw new Error("Could not release the lock for "+Y.name+" because "+this._lock.name+" has the lock");0===Y.depth?(this._lock=null,Y.resolve()):Y.depth--},X.prototype.releaseLockCompletely=function(Y){if(!this.isLocked)throw new Error("Could not release the lock for "+Y.name+" because the StateMachine is not locked");if(!this.hasLock(Y))throw new Error("Could not release the lock for "+Y.name+" because "+this._lock.name+" has the lock");Y.depth=0,this._lock=null,Y.resolve()},X.prototype.takeLock=function(Y){var z=this;if("object"==typeof Y){var ce=Y;return new Promise(function(me){me(z.takeLockSync(ce))})}var be=Y;if(this.isLocked){var ke=this.takeLock.bind(this,be);return this._lock.promise.then(ke)}return Promise.resolve(this.takeLockSync(be))},X.prototype.takeLockSync=function(Y){var z="string"==typeof Y?null:Y,ce=z?z.name:Y;if(z&&!this.hasLock(z)||!z&&this.isLocked)throw new Error("Could not take the lock for "+ce+" because the lock for "+this._lock.name+" was not released");if(z)return z.depth++,z;var be=function x(he){var X=V.defer();return X.name=he,X.depth=0,X}(ce);return this._lock=be,be},X.prototype.transition=function(Y,z,ce){if(ce=ce||[],this.isLocked){if(!z)throw new Error("You must provide the key in order to transition");if(!this.hasLock(z))throw new Error("Could not transition using the key for "+z.name+" because "+this._lock.name+" has the lock")}else if(z)throw new Error("Key provided for "+z.name+", but the StateMachine was not locked (possibly due to preemption)");if(!O(this._states,this.state,Y))throw new Error('Cannot transition from "'+this.state+'" to "'+Y+'"');this._state=Y,this.emit.apply(this,ie([],K(["stateChanged",Y].concat(ce))))},X.prototype.tryTransition=function(Y,z,ce){try{this.transition(Y,z,ce)}catch{return!1}return!0},X.prototype.when=function(Y){var z=this;return this.state===Y?Promise.resolve(this):O(this._reachableStates,this.state,Y)?this._whenPromise(function(ce,be,ke){ce===Y?be(z):O(z._reachableStates,ce,Y)||ke(de(ce,Y))}):Promise.reject(de(this.state,Y))},X}(G);function O(he,X,Y){return he.get(X).has(Y)}function B(he){return Array.from(he.keys()).reduce(function(X,Y){return X.set(Y,$(he,Y))},new Map)}function $(he,X,Y){return Y=Y||new Set,he.get(X).forEach(function(z){Y.has(z)||(Y.add(z),$(he,z,Y).forEach(Y.add,Y))}),Y}function de(he,X){return new Error('"'+X+'" cannot be reached from "'+he+'"')}Oe.exports=k},7704:Oe=>{"use strict";Oe.exports=function Me(q){return(q=q.filter(function(F){return"number"==typeof F})).length<1?void 0:q.reduce(function(F,K){return K+F})/q.length}},4239:Oe=>{"use strict";var Me=function(){function q(F,K,ie,G){Object.defineProperties(this,{availableSend:{enumerable:!0,value:ie},recv:{enumerable:!0,value:K},rtt:{enumerable:!0,value:G},send:{enumerable:!0,value:F}})}return q.of=function(F,K){var ie=(K.timestamp-F.timestamp)/1e3;return new q(ie>0?(K.bytesSent-F.bytesSent)/ie*8:0,ie>0?(K.bytesReceived-F.bytesReceived)/ie*8:0,K.availableOutgoingBitrate,K.currentRoundTripTime)},q}();Oe.exports=Me},2483:(Oe,Me,q)=>{"use strict";var F=q(4239),K=function(){function ie(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new F(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return ie.prototype.next=function(G){var V=this.lastStats;if(this.lastStats=G,V){var k=V.id===G.id?F.of(V,G):new F(0,0);this.lastReport=k}return this.lastReport},ie}();Oe.exports=K},6719:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x){var B=G.call(this,k,O,x)||this;return Object.defineProperties(B,{audioLevel:{value:"number"==typeof O.audioInputLevel?O.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),B}return F(V,G),V}(q(3840));Oe.exports=ie},3840:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x){var B=G.call(this,k,O)||this;return Object.defineProperties(B,{bytesSent:{value:"number"==typeof O.bytesSent?O.bytesSent:x?0:null,enumerable:!0},packetsSent:{value:"number"==typeof O.packetsSent?O.packetsSent:x?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof O.roundTripTime?O.roundTripTime:x?0:null,enumerable:!0}}),B}return F(V,G),V}(q(9078));Oe.exports=ie},1371:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O,x){var B=G.call(this,k,O,x)||this,$=null;"number"==typeof O.frameWidthInput&&"number"==typeof O.frameHeightInput&&($={},Object.defineProperties($,{width:{value:O.frameWidthInput,enumerable:!0},height:{value:O.frameHeightInput,enumerable:!0}}));var ae=null;return"number"==typeof O.frameWidthSent&&"number"==typeof O.frameHeightSent&&(ae={},Object.defineProperties(ae,{width:{value:O.frameWidthSent,enumerable:!0},height:{value:O.frameHeightSent,enumerable:!0}})),Object.defineProperties(B,{captureDimensions:{value:$,enumerable:!0},dimensions:{value:ae,enumerable:!0},captureFrameRate:{value:"number"==typeof O.frameRateInput?O.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateSent?O.frameRateSent:null,enumerable:!0}}),B}return F(V,G),V}(q(3840));Oe.exports=ie},1908:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k){return G.call(this,k)||this}return F(V,G),V}(q(4976));Oe.exports=ie},4661:Oe=>{"use strict";Oe.exports=function q(F){var K=F.actual,G=F.available,k=F.level;Object.defineProperties(this,{actual:{value:void 0===K?null:K,enumerable:!0},available:{value:void 0===G?null:G,enumerable:!0},level:{value:void 0===k?null:k,enumerable:!0}})}},2165:Oe=>{"use strict";Oe.exports=function q(F){var K=F.fractionLost,G=F.level;Object.defineProperties(this,{fractionLost:{value:void 0===K?null:K,enumerable:!0},level:{value:void 0===G?null:G,enumerable:!0}})}},2590:Oe=>{"use strict";Oe.exports=function q(F){var K=F.jitter,G=F.rtt,k=F.level;Object.defineProperties(this,{jitter:{value:void 0===K?null:K,enumerable:!0},rtt:{value:void 0===G?null:G,enumerable:!0},level:{value:void 0===k?null:k,enumerable:!0}})}},4976:(Oe,Me,q)=>{"use strict";var F=q(220),K=q(5206);Oe.exports=function G(V){var x=V.sendStats,B=void 0===x?null:x,$=V.recvStats,ae=void 0===$?null:$;Object.defineProperties(this,{send:{value:V.send,enumerable:!0},recv:{value:V.recv,enumerable:!0},sendStats:{value:B?new F(B):null,enumerable:!0},recvStats:{value:ae?new K(ae):null,enumerable:!0}})}},5206:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k){return G.call(this,k)||this}return F(V,G),V}(q(4236));Oe.exports=ie},4236:(Oe,Me,q)=>{"use strict";var F=q(4661),K=q(2165),ie=q(2590);Oe.exports=function V(k){var O=k.bandwidth,x=void 0===O?null:O,B=k.fractionLost,$=void 0===B?null:B,ae=k.latency,de=void 0===ae?null:ae;Object.defineProperties(this,{bandwidth:{value:x?new F(x):null,enumerable:!0},fractionLost:{value:$?new K($):null,enumerable:!0},latency:{value:de?new ie(de):null,enumerable:!0}})}},220:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k){return G.call(this,k)||this}return F(V,G),V}(q(4236));Oe.exports=ie},669:(Oe,Me,q)=>{"use strict";var F=q(1908),K=q(2003);Oe.exports=function G(V){var O=V.audio,x=V.video;Object.defineProperties(this,{level:{value:V.level,enumerable:!0},audio:{value:O?new F(O):null,enumerable:!0},video:{value:x?new K(x):null,enumerable:!0}})}},2003:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k){return G.call(this,k)||this}return F(V,G),V}(q(4976));Oe.exports=ie},5055:(Oe,Me,q)=>{"use strict";var F=q(8020),K=q(775),ie=function(){function G(V,k,O){Object.defineProperties(this,{ice:{enumerable:!0,value:V},audio:{enumerable:!0,value:k},video:{enumerable:!0,value:O}})}return G.prototype.summarize=function(){var V=this.audio.send.concat(this.video.send),k=K.summarize(V),O=this.audio.recv.concat(this.video.recv),x=F.summarize(O);return{ice:this.ice,send:k,recv:x,audio:{send:K.summarize(this.audio.send),recv:F.summarize(this.audio.recv)},video:{send:K.summarize(this.video.send),recv:F.summarize(this.video.recv)}}},G}();Oe.exports=ie},8753:function(Oe,Me,q){"use strict";var F=this&&this.__read||function(ue,fe){var we="function"==typeof Symbol&&ue[Symbol.iterator];if(!we)return ue;var Ue,Ze,He=we.call(ue),Ge=[];try{for(;(void 0===fe||fe-- >0)&&!(Ue=He.next()).done;)Ge.push(Ue.value)}catch(Xe){Ze={error:Xe}}finally{try{Ue&&!Ue.done&&(we=He.return)&&we.call(He)}finally{if(Ze)throw Ze.error}}return Ge},K=this&&this.__spreadArray||function(ue,fe){for(var we=0,He=fe.length,Ue=ue.length;we<He;we++,Ue++)ue[Ue]=fe[we];return ue},ie=this&&this.__values||function(ue){var fe="function"==typeof Symbol&&Symbol.iterator,we=fe&&ue[fe],He=0;if(we)return we.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&He>=ue.length&&(ue=void 0),{value:ue&&ue[He++],done:!ue}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")},G=q(7627).guessBrowser,V=q(2483),k=q(5055),O=q(1013),x=q(1031),B=function(){function ue(fe){Object.defineProperties(this,{pc:{enumerable:!0,value:fe},ice:{enumerable:!0,value:new V},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return ue.prototype.next=function(){var fe=this,we="firefox"===G()?function Ce(ue){var fe=ue.pc.getTransceivers().filter(function(He){return He.currentDirection&&He.currentDirection.match(/send/)&&He.sender.track}).map(function(He){return He.sender}),we=ue.pc.getTransceivers().filter(function(He){return He.currentDirection&&He.currentDirection.match(/recv/)}).map(function(He){return He.receiver});return Promise.all([$(fe),$(we),ue.pc.getStats()]).then(function(He){var Ue=F(He,3),Ge=Ue[0],Ze=Ue[1],Xe=Ue[2],Be=de(ue),jt=z(ue);Ge.forEach(function(Ye,je){return be(ue,Ye,jt,je)}),me(Be,jt);var Kt=he(ue),St=ce(ue);Ze.forEach(function(Ye,je){return ke(ue,Ye,St,je)}),me(Kt,St),Re(ue.ice,Xe)})}(this):function _e(ue){return ue.pc.getStats().then(function(fe){var we=de(ue),He=z(ue);be(ue,fe,He),me(we,He);var Ue=he(ue),Ge=ce(ue);ke(ue,fe,Ge),me(Ue,Ge),Re(ue.ice,fe)})}(this);return we.then(function(){var He=K([],F(fe.audio.send.values())),Ue=K([],F(fe.video.send.values())),Ge=K([],F(fe.audio.recv.values())),Ze=K([],F(fe.video.recv.values())),Xe=new k(fe.ice.lastReport,{send:He.map(function(Be){return Be.lastReport}).filter(function(Be){return Be}),recv:Ge.map(function(Be){return Be.lastReport}).filter(function(Be){return Be})},{send:Ue.map(function(Be){return Be.lastReport}).filter(function(Be){return Be}),recv:Ze.map(function(Be){return Be.lastReport}).filter(function(Be){return Be})});return fe.lastReport=Xe,Xe})},ue}();function $(ue){return Promise.all(ue.map(function(fe){var we=fe.track.id;return fe.getStats().then(function(He){var Ue,Ge;try{for(var Ze=ie(He.values()),Xe=Ze.next();!Xe.done;Xe=Ze.next()){var Be=Xe.value;"inbound-rtp"===Be.type&&(Be.id=we+"-"+Be.id)}}catch(jt){Ue={error:jt}}finally{try{Xe&&!Xe.done&&(Ge=Ze.return)&&Ge.call(Ze)}finally{if(Ue)throw Ue.error}}return[we,He]})})).then(function(fe){return new Map(fe)})}function ae(ue,fe,we,He,Ue){var Ge=fe[He.mediaType];if(!Ue){var Ze=we.get(He.trackId);Ze&&(Ue=Ze.trackIdentifier)}if(Ge&&Ue){if(Ge.has(He.id))return Ge.get(He.id);var Xe=new ue(Ue,He);Ge.set(He.id,Xe)}return null}function de(ue){return{audio:ue.audio.send,video:ue.video.send}}function he(ue){return{audio:ue.audio.recv,video:ue.video.recv}}function X(ue,fe,we,He){return ae(x,de(ue),fe,we,He)}function Y(ue,fe,we,He){return ae(O,he(ue),fe,we,He)}function z(ue){return{audio:new Set(ue.audio.send.keys()),video:new Set(ue.video.send.keys())}}function ce(ue){return{audio:new Set(ue.audio.recv.keys()),video:new Set(ue.video.recv.keys())}}function be(ue,fe,we,He){var Ue,Ge;try{for(var Ze=ie(fe.values()),Xe=Ze.next();!Xe.done;Xe=Ze.next()){var Be=Xe.value;if("outbound-rtp"===Be.type&&!Be.isRemote){if("firefox"!==G()&&!Be.trackId)continue;var jt=we[Be.mediaType];jt&&jt.delete(Be.id);var Kt=X(ue,fe,Be,He);if(Kt){var St=fe.get(Be.remoteId);Kt.next(He||Kt.trackId,Be,St)}}}}catch(Ye){Ue={error:Ye}}finally{try{Xe&&!Xe.done&&(Ge=Ze.return)&&Ge.call(Ze)}finally{if(Ue)throw Ue.error}}}function ke(ue,fe,we,He){var Ue,Ge;try{for(var Ze=ie(fe.values()),Xe=Ze.next();!Xe.done;Xe=Ze.next()){var Be=Xe.value;if("inbound-rtp"===Be.type&&!Be.isRemote){var jt=we[Be.mediaType];jt&&jt.delete(Be.id);var Kt=Y(ue,fe,Be,He);Kt&&Kt.next(He||Kt.trackId,Be)}}}catch(St){Ue={error:St}}finally{try{Xe&&!Xe.done&&(Ge=Ze.return)&&Ge.call(Ze)}finally{if(Ue)throw Ue.error}}}function me(ue,fe){var we=function(Ue){var Ge=ue[Ue];fe[Ue].forEach(function(Xe){return Ge.delete(Xe)})};for(var He in fe)we(He)}function Re(ue,fe){var we,He,Ue,Ge,Ze;try{for(var Xe=ie(fe.values()),Be=Xe.next();!Be.done;Be=Xe.next())"transport"===(jt=Be.value).type&&(Ze=fe.get(jt.selectedCandidatePairId))}catch(Ye){we={error:Ye}}finally{try{Be&&!Be.done&&(He=Xe.return)&&He.call(Xe)}finally{if(we)throw we.error}}if(Ze)ue.next(Ze);else try{for(var Kt=ie(fe.values()),St=Kt.next();!St.done;St=Kt.next()){var jt;"candidate-pair"===(jt=St.value).type&&jt.nominated&&(!("selected"in jt)||jt.selected)&&ue.next(jt)}}catch(Ye){Ue={error:Ye}}finally{try{St&&!St.done&&(Ge=Kt.return)&&Ge.call(Kt)}finally{if(Ue)throw Ue.error}}}Oe.exports=B},8020:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(7704),ie=q(7176),G=q(7483),V=function(k){function O(x,B,$,ae,de,he,X){var Y=k.call(this,x,B,$)||this;return Object.defineProperties(Y,{deltaPacketsLost:{enumerable:!0,value:ae},deltaPacketsReceived:{enumerable:!0,value:de},fractionLost:{enumerable:!0,value:he},jitter:{enumerable:!0,value:X},phonyFractionLost:{enumerable:!0,value:de>0?ae/de:0}}),Y}return F(O,k),O.of=function(x,B,$){if(B.id!==$.id)throw new Error("RTCStats IDs must match");var ae=($.timestamp-B.timestamp)/1e3,he=ae>0?($.bytesReceived-B.bytesReceived)/ae*8:0,X=Math.max($.packetsLost-B.packetsLost,0);return new O(B.id,x,he,X,$.packetsReceived-B.packetsReceived,$.fractionLost,$.jitter)},O.summarize=function(x){var B=x.map(function(he){return he.summarize()});return{bitrate:G(B.map(function(he){return he.bitrate})),fractionLost:K(B.map(function(he){return he.fractionLost})),jitter:K(B.map(function(he){return he.jitter}))}},O.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},O}(ie);Oe.exports=V},1013:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(8020),G=function(V){function k(O,x){var B=V.call(this,x.id,O,x)||this;return Object.defineProperties(B,{lastReport:{enumerable:!0,value:null,writable:!0}}),B}return F(k,V),k.prototype.next=function(O,x){var B=this.lastStats;this.lastStats=x,this.trackId=O;var $=K.of(O,B,x);return this.lastReport=$,$},k}(q(6986));Oe.exports=G},5180:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,O)||this;return Object.defineProperties(x,{audioLevel:{value:"number"==typeof O.audioOutputLevel?O.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof O.jitter?O.jitter:null,enumerable:!0}}),x}return F(V,G),V}(q(2613));Oe.exports=ie},2613:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,O)||this;return Object.defineProperties(x,{bytesReceived:{value:"number"==typeof O.bytesReceived?O.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof O.packetsReceived?O.packetsReceived:null,enumerable:!0}}),x}return F(V,G),V}(q(9078));Oe.exports=ie},993:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this,k,O)||this,B=null;return"number"==typeof O.frameWidthReceived&&"number"==typeof O.frameHeightReceived&&(B={},Object.defineProperties(B,{width:{value:O.frameWidthReceived,enumerable:!0},height:{value:O.frameHeightReceived,enumerable:!0}})),Object.defineProperties(x,{dimensions:{value:B,enumerable:!0},frameRate:{value:"number"==typeof O.frameRateReceived?O.frameRateReceived:null,enumerable:!0}}),x}return F(V,G),V}(q(2613));Oe.exports=ie},7176:Oe=>{"use strict";Oe.exports=function q(F,K,ie){Object.defineProperties(this,{id:{enumerable:!0,value:F},trackId:{enumerable:!0,value:K},bitrate:{enumerable:!0,value:ie}})}},6986:Oe=>{"use strict";Oe.exports=function q(F,K,ie){Object.defineProperties(this,{id:{enumerable:!0,value:F,writable:!0},trackId:{enumerable:!0,value:K,writable:!0},lastStats:{enumerable:!0,value:ie,writable:!0}})}},775:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(7704),ie=q(7176),G=q(7483),V=function(k){function O(x,B,$,ae){var de=k.call(this,x,B,$)||this;return Object.defineProperties(de,{rtt:{enumerable:!0,value:ae}}),de}return F(O,k),O.of=function(x,B,$,ae){if(B.id!==$.id)throw new Error("RTCStats IDs must match");var de=($.timestamp-B.timestamp)/1e3;return new O(B.id,x,de>0?($.bytesSent-B.bytesSent)/de*8:0,ae&&"number"==typeof ae.roundTripTime?ae.roundTripTime/1e3:void 0)},O.summarize=function(x){return{bitrate:G(x.map(function(ae){return ae.bitrate})),rtt:K(x.map(function(ae){return ae.rtt}))}},O}(ie);Oe.exports=V},1031:function(Oe,Me,q){"use strict";var V,F=this&&this.__extends||(V=function(k,O){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(x[$]=B[$])})(k,O)},function(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=k}V(k,O),k.prototype=null===O?Object.create(O):(x.prototype=O.prototype,new x)}),K=q(6986),ie=q(775),G=function(V){function k(O,x){var B=V.call(this,x.id,O,x)||this;return Object.defineProperties(B,{lastReport:{enumerable:!0,value:null,writable:!0}}),B}return F(k,V),k.prototype.next=function(O,x,B){var $=this.lastStats;this.lastStats=x,this.trackId=O;var ae=ie.of(O,$,x,B);return this.lastReport=ae,ae},k}(K);Oe.exports=G},7805:(Oe,Me,q)=>{"use strict";var F=q(6719),K=q(1371),ie=q(5180),G=q(993);Oe.exports=function k(O,x,B){if("string"!=typeof O)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:O,enumerable:!0},localAudioTrackStats:{value:x.localAudioTrackStats.map(function($){return new F($.trackId,$,B)}),enumerable:!0},localVideoTrackStats:{value:x.localVideoTrackStats.map(function($){return new K($.trackId,$,B)}),enumerable:!0},remoteAudioTrackStats:{value:x.remoteAudioTrackStats.map(function($){return new ie($.trackId,$)}),enumerable:!0},remoteVideoTrackStats:{value:x.remoteVideoTrackStats.map(function($){return new G($.trackId,$)}),enumerable:!0}})}},7483:Oe=>{"use strict";Oe.exports=function Me(q){return q.reduce(function(F,K){return"number"==typeof K?K+F:F},0)}},9078:Oe=>{"use strict";Oe.exports=function q(F,K){if("string"!=typeof F)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:F,enumerable:!0},trackSid:{value:K.trackSid,enumerable:!0},timestamp:{value:K.timestamp,enumerable:!0},ssrc:{value:K.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof K.packetsLost?K.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof K.codecName?K.codecName:null,enumerable:!0}})}},4605:function(Oe,Me,q){"use strict";var G,F=this&&this.__extends||(G=function(V,k){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(O[B]=x[B])})(V,k)},function(V,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=V}G(V,k),V.prototype=null===k?Object.create(k):(O.prototype=k.prototype,new O)}),ie=function(G){function V(k,O){var x=G.call(this)||this;return Object.defineProperties(x,{id:{enumerable:!0,value:k},kind:{enumerable:!0,value:O}}),x}return F(V,G),V.prototype.stop=function(){this.emit("stopped")},V}(q(9069).EventEmitter);Oe.exports=ie},5330:function(Oe,Me,q){"use strict";var St,F=this&&this.__extends||(St=function(Ye,je){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Pe){ze.__proto__=Pe}||function(ze,Pe){for(var rt in Pe)Object.prototype.hasOwnProperty.call(Pe,rt)&&(ze[rt]=Pe[rt])})(Ye,je)},function(Ye,je){if("function"!=typeof je&&null!==je)throw new TypeError("Class extends value "+String(je)+" is not a constructor or null");function ze(){this.constructor=Ye}St(Ye,je),Ye.prototype=null===je?Object.create(je):(ze.prototype=je.prototype,new ze)}),K=this&&this.__read||function(St,Ye){var je="function"==typeof Symbol&&St[Symbol.iterator];if(!je)return St;var Pe,Ut,ze=je.call(St),rt=[];try{for(;(void 0===Ye||Ye-- >0)&&!(Pe=ze.next()).done;)rt.push(Pe.value)}catch($t){Ut={error:$t}}finally{try{Pe&&!Pe.done&&(je=ze.return)&&je.call(ze)}finally{if(Ut)throw Ut.error}}return rt},ie=this&&this.__spreadArray||function(St,Ye){for(var je=0,ze=Ye.length,Pe=St.length;je<ze;je++,Pe++)St[Pe]=Ye[je];return St},G=q(8675),V=q(9739),k=V.buildLogLevels,O=V.makeUUID,x=q(1458),B=q(2643),$=q(6543),ae=0,de={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},he={closed:"close",open:"open",waiting:"waiting"},Ze=globalThis,Xe=Ze.WebSocket?Ze.WebSocket:q(3332),Be={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},jt=new Map([[3e3,Be.TIMEOUT],[3001,Be.TIMEOUT],[3002,Be.FAILED],[3003,Be.FAILED],[3004,Be.TIMEOUT],[3006,Be.BUSY],[3007,Be.TIMEOUT]]),Kt=function(St){function Ye(je,ze){var Pe=St.call(this,"early",de)||this;ze=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:x,WebSocket:Xe},ze);var rt=k(ze.logLevel),Ut=new ze.Log("default",Pe,rt,ze.loggerName),$t=ze.networkMonitor?new B(function(){var en=$t.type,Zn="Network changed"+(en?" to "+en:"");Ut.debug(Zn),Pe._close({code:3004,reason:Zn})}):null;Object.defineProperties(Pe,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:ze.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:ze.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++ae},_log:{value:Ut},_messageQueue:{value:[]},_networkMonitor:{value:$t},_options:{value:ze},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:je},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var Mt={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return Pe.on("stateChanged",function(en){for(var Zn=[],qt=1;qt<arguments.length;qt++)Zn[qt-1]=arguments[qt];en in he&&Pe.emit.apply(Pe,ie([he[en]],K(Zn)));var Mr={name:en,group:"signaling",level:Mt[Pe.state]};if("closed"===en){var xr=K(Zn,1),wr=xr[0];Mr.payload={reason:wr},Mr.level=wr===Be.LOCAL?"info":"error"}Pe._eventObserver.emit("event",Mr)}),Pe._eventObserver.emit("event",{name:Pe.state,group:"signaling",level:Mt[Pe.state]}),Pe._connect(),Pe}return F(Ye,St),Ye.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},Ye.prototype._close=function(je){var ze=je.code,Pe=je.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&3005!==ze&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var rt=this._log;1e3===ze?(rt.debug("Closed"),this.transition("closed",null,[Be.LOCAL])):(rt.warn("Closed: "+ze+" - "+Pe),3005!==ze&&this.transition("closed",null,[jt.get(ze)||Be.REMOTE]));var Ut=this._ws.readyState,$t=this._options.WebSocket;Ut!==$t.CLOSING&&Ut!==$t.CLOSED&&this._ws.close(ze,Pe)}},Ye.prototype._connect=function(){var je=this,ze=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void ze.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var Pe=this._ws;ze.debug("Created a new WebSocket:",Pe),Pe.addEventListener("close",function(Ut){return je._close(Ut)});var rt=this._options.openTimeout;this._openTimeout=new $(function(){je._close({code:3007,reason:"Failed to open in "+rt+" ms"})},rt),Pe.addEventListener("open",function(){ze.debug("WebSocket opened:",Pe),je._openTimeout.clear(),je._startHandshake(),je._networkMonitor&&je._networkMonitor.start()}),Pe.addEventListener("message",function(Ut){ze.debug("Incoming: "+Ut.data);try{Ut=JSON.parse(Ut.data)}catch($t){return void je.emit("error",$t)}switch(Ut.type){case"bad":je._handleBad(Ut);break;case"busy":je._handleBusy(Ut);break;case"bye":break;case"msg":je._handleMessage(Ut);case"heartbeat":je._handleHeartbeat();break;case"welcome":je._handleWelcome(Ut);break;default:je._log.debug("Unknown message type: "+Ut.type),je.emit("error",new Error("Unknown message type: "+Ut.type))}})},Ye.prototype._handleBad=function(je){var ze=je.reason,Pe=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(Pe.warn("Closing: 3002 - "+ze),void this._close({code:3002,reason:ze})):(Pe.debug("Error: "+ze),void this.emit("error",new Error(ze)));Pe.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},Ye.prototype._handleBusy=function(je){var ze=this,Pe=je.cookie,rt=je.keepAlive,Ut=je.retryAfter,$t=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var Mt=Ut<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+Ut+" ms";if(Ut<0)return $t.warn("Closing: 3006 - "+Mt),void this._close({code:3006,reason:Mt});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=Pe||null,rt?($t.warn(Mt),this._busyWaitTimeout=new $(function(){return ze._startHandshake()},Ut)):($t.warn("Closing: 3005 - "+Mt),this._close({code:3005,reason:Mt}),this._busyWaitTimeout=new $(function(){return ze._connect()},Ut)),this.transition("waiting",null,[rt,Ut])}else $t.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},Ye.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},Ye.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var je=this._log,ze=this._options.maxConsecutiveMissedHeartbeats;je.debug("Consecutive heartbeats missed: "+ze);var Pe="Missed "+ze+' "heartbeat" messages';je.warn("Closing: 3001 - "+Pe),this._close({code:3001,reason:Pe})}},Ye.prototype._handleMessage=function(je){"open"===this.state?this.emit("message",je.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},Ye.prototype._handleWelcome=function(je){var ze=this,Pe=je.negotiatedTimeout,rt=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(rt.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var $t=Pe*this._options.maxConsecutiveMissedHeartbeats,Mt=Pe-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new $(function(){return ze._handleHeartbeatTimeout()},$t),this._messageQueue.splice(0).forEach(function(en){return ze._send(en)}),this._sendHeartbeatTimeout=new $(function(){return ze._sendHeartbeat()},Mt),this.transition("open")}else rt.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},Ye.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var je=this._log;if(this._hellosLeft<=0){var ze="All handshake attempts failed";return je.warn("Closing: 3000 - "+ze),void this._close({code:3e3,reason:ze})}je.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},Ye.prototype._send=function(je){if(this._ws.readyState===this._options.WebSocket.OPEN){var rt=JSON.stringify(je);this._log.debug("Outgoing: "+rt);try{this._ws.send(rt),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var Ut="Failed to send message";this._log.warn("Closing: 3003 - "+Ut),this._close({code:3003,reason:Ut})}}},Ye.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},Ye.prototype._sendHello=function(){var je=this._options,ze=je.helloBody,Pe=je.requestedHeartbeatTimeout,rt={id:O(),timeout:Pe,type:"hello",version:2};this._cookie&&(rt.cookie=this._cookie),ze&&(rt.body=ze),this._send(rt)},Ye.prototype._sendOrEnqueue=function(je){var ze=this;"closed"!==this.state&&("open"===this.state?function(rt){return ze._send(rt)}:function(rt){return ze._messageQueue.push(rt)})(je)},Ye.prototype._startHandshake=function(){var je=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new $(function(){return je._handleWelcomeTimeout()},this._options.welcomeTimeout))},Ye.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},Ye.prototype.sendMessage=function(je){this._sendOrEnqueue({body:je,type:"msg"})},Ye}(G);Kt.CloseReason=Be,Oe.exports=Kt},6412:(Oe,Me,q)=>{"use strict";var F=q(9739).defer,K=function(){function ie(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return ie.prototype.put=function(G){this._hasValue=!0,this._value=G;var V=this._deferreds.shift();return V&&V.resolve(G),this},ie.prototype.take=function(){var G=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var V=F();return this._deferreds.push(V),V.promise.then(function(k){return G._hasValue=!1,k})},ie}();Oe.exports=K},2606:Oe=>{var Me=function(){function q(F){Object.defineProperties(this,{_min:{value:F.min||100},_max:{value:F.max||1e4},_jitter:{value:F.jitter>0&&F.jitter<=1?F.jitter:0},_factor:{value:F.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var K=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var ie=Math.random(),G=Math.floor(ie*this._jitter*K);K=0==(1&Math.floor(10*ie))?K-G:K+G}return 0|Math.min(K,this._max)}},_timeoutID:{value:null,writable:!0}})}return q.prototype.backoff=function(F){var K=this,ie=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){K._attempts++,F()},ie)},q.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},q}();Oe.exports=Me},3948:function(Oe){"use strict";var Me=this&&this.__read||function($,ae){var de="function"==typeof Symbol&&$[Symbol.iterator];if(!de)return $;var X,z,he=de.call($),Y=[];try{for(;(void 0===ae||ae-- >0)&&!(X=he.next()).done;)Y.push(X.value)}catch(ce){z={error:ce}}finally{try{X&&!X.done&&(de=he.return)&&de.call(he)}finally{if(z)throw z.error}}return Y};function K(){return navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}Oe.exports={isAndroid:function q(){return/Android/.test(navigator.userAgent)},isIOS:function F(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isIpad:function ie(){return K()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))},isIphone:function G(){return K()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))},isMobile:function V(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function k($){return"chrome"===$&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function x($){return"safari"!==$?null:"brave"in navigator?"brave":["edge","edg"].find(function(ae){return navigator.userAgent.toLowerCase().includes(ae)})||null},rebrandedChromeBrowser:function O($){if("chrome"!==$)return null;if("brave"in navigator)return"brave";var ae=function B($){for(var ae=[],de=[],he=0;he<$.length;he++)if("("===$[he])ae.push(he);else if(")"===$[he]&&ae.length>0){var X=ae.pop();0===ae.length&&de.push($.substring(X,he+1))}return de}(navigator.userAgent),he=ae.reduce(function(z,ce){return z.replace(ce,"")},navigator.userAgent).match(/[^\s]+/g)||[];return Me(he.map(function(z){return z.split("/")[0].toLowerCase()})).slice(2).find(function(z){return!["chrome","mobile","safari"].includes(z)})||null}}},8126:function(Oe){"use strict";var Me=this&&this.__read||function(K,ie){var G="function"==typeof Symbol&&K[Symbol.iterator];if(!G)return K;var k,x,V=G.call(K),O=[];try{for(;(void 0===ie||ie-- >0)&&!(k=V.next()).done;)O.push(k.value)}catch(B){x={error:B}}finally{try{k&&!k.done&&(G=V.return)&&G.call(V)}finally{if(x)throw x.error}}return O},q=this&&this.__spreadArray||function(K,ie){for(var G=0,V=ie.length,k=K.length;G<V;G++,k++)K[k]=ie[G];return K},F=function(){function K(ie,G){var V=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:G}}),Object.defineProperty(this,"_promise",{value:new Promise(function(k,O){ie(function(x){V._isCancelable=!1,k(x)},function(x){V._isCancelable=!1,O(x)},function(){return V._isCanceled})})})}return K.reject=function(ie){return new K(function(V,k){k(ie)},function(){})},K.resolve=function(ie){return new K(function(V){V(ie)},function(){})},K.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},K.prototype.catch=function(){var ie=[].slice.call(arguments),G=this._promise;return new K(function(k,O){G.catch.apply(G,q([],Me(ie))).then(k,O)},this._onCancel)},K.prototype.then=function(){var ie=[].slice.call(arguments),G=this._promise;return new K(function(k,O){G.then.apply(G,q([],Me(ie))).then(k,O)},this._onCancel)},K.prototype.finally=function(){var ie=[].slice.call(arguments),G=this._promise;return new K(function(k,O){G.finally.apply(G,q([],Me(ie))).then(k,O)},this._onCancel)},K}();Oe.exports=F},8701:(Oe,Me,q)=>{"use strict";var F=q(1730);Oe.exports.SDK_NAME=F.name+".js",Oe.exports.SDK_VERSION=F.version,Oe.exports.SDP_FORMAT="unified",Oe.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},Oe.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},Oe.exports.DEFAULT_ENVIRONMENT="prod",Oe.exports.DEFAULT_REALM="us1",Oe.exports.DEFAULT_REGION="gll",Oe.exports.DEFAULT_LOG_LEVEL="warn",Oe.exports.DEFAULT_LOGGER_NAME="twilio-video",Oe.exports.WS_SERVER=function(ie,G){return G="gll"===G?"global":encodeURIComponent(G),"prod"===ie?"wss://"+G+".vss.twilio.com/signaling":"wss://"+G+".vss."+ie+".twilio.com/signaling"},Oe.exports.PUBLISH_MAX_ATTEMPTS=5,Oe.exports.PUBLISH_BACKOFF_JITTER=10,Oe.exports.PUBLISH_BACKOFF_MS=20,Oe.exports.typeErrors={ILLEGAL_INVOKE:function(ie,G){return new TypeError("Illegal call to "+ie+": "+G)},INVALID_TYPE:function(ie,G){return new TypeError(ie+" must be "+function K(ie){return["a","e","i","o","u"].includes(ie.toLowerCase()[0])?"an":"a"}(G)+" "+G)},INVALID_VALUE:function(ie,G){return new RangeError(ie+" must be one of "+G.join(", "))},REQUIRED_ARGUMENT:function(ie){return new TypeError(ie+" must be specified")}},Oe.exports.DEFAULT_FRAME_RATE=24,Oe.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,Oe.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,Oe.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,Oe.exports.DEFAULT_NQ_LEVEL_LOCAL=1,Oe.exports.DEFAULT_NQ_LEVEL_REMOTE=0,Oe.exports.MAX_NQ_LEVEL=3,Oe.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,Oe.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,Oe.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*Oe.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},Oe.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},Oe.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},Oe.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},Oe.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},Oe.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},Oe.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:(Oe,Me,q)=>{"use strict";var F=q(4687);Oe.exports=function G(V){var k=q(7708),O={},x=k.getOrCreate(O),B=3;return function $(){return B--,F(x,V.srcObject,250).then(function(ae){return!!ae&&(!(B>0)||$())}).catch(function(){return!0})}().finally(function(){k.release(O)})}},1741:Oe=>{"use strict";var Me=null;Oe.exports=function V(k){return Me=Me||document.createElement("canvas"),new Promise(function(O){var x=3;setTimeout(function B(){return x--,function G(k){try{var O=Me.getContext("2d");O.drawImage(k,0,0,50,50);var B=O.getImageData(0,0,50,50).data.filter(function(ae,de){return(de+1)%4});return 0===Math.max.apply(Math,B)}catch(ae){return console.log("Error checking silence: ",ae),!1}}(k)?x>0?setTimeout(B,250):O(!0):O(!1)},250)})}},2181:Oe=>{"use strict";var Me=function(){function q(F){var K=this;void 0===F&&(F=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){K._emitVisible("visible"===document.visibilityState)}}});for(var ie=0;ie<F;ie++)this._listeners.push([])}return q.prototype.clear=function(){for(var F=this._listeners.length,K=0;K<F;K++)this._listeners[K]=[]},q.prototype._listenerCount=function(){return this._listeners.reduce(function(F,K){return F+K.length},0)},q.prototype._emitVisible=function(F){for(var K=this,ie=Promise.resolve(),G=function(k){ie=ie.then(function(){return K._emitVisiblePhase(k,F)})},V=1;V<=this._listeners.length;V++)G(V);return ie},q.prototype._emitVisiblePhase=function(F,K){return Promise.all(this._listeners[F-1].map(function(G){var V=G(K);return V instanceof Promise?V:Promise.resolve(V)}))},q.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},q.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},q.prototype.onVisibilityChange=function(F,K){if("number"!=typeof F||F<=0||F>this._listeners.length)throw new Error("invalid phase: ",F);return this._listeners[F-1].push(K),1===this._listenerCount()&&this._start(),this},q.prototype.offVisibilityChange=function(F,K){if("number"!=typeof F||F<=0||F>this._listeners.length)throw new Error("invalid phase: ",F);var ie=this._listeners[F-1],G=ie.indexOf(K);return-1!==G&&(ie.splice(G,1),0===this._listenerCount()&&this._stop()),this},q}();Oe.exports=new Me(2)},8606:function(Oe,Me,q){"use strict";var k,F=this&&this.__extends||(k=function(O,x){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(B[ae]=$[ae])})(O,x)},function(O,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=O}k(O,x),O.prototype=null===x?Object.create(x):(B.prototype=x.prototype,new B)}),K=q(9069).EventEmitter,ie=["signaling","room","media","quality","video-processor","preflight"],G=["debug","error","info","warning"],V=function(k){function O(x,B,$,ae){void 0===ae&&(ae=null);var de=k.call(this)||this;return de.on("event",function(he){var X=he.name,Y=he.group,z=he.level,ce=he.payload;if("string"!=typeof X)throw $.error("Unexpected name: ",X),new Error("Unexpected name: ",X);if(!ie.includes(Y))throw $.error("Unexpected group: ",Y),new Error("Unexpected group: ",Y);if(!G.includes(z))throw $.error("Unexpected level: ",z),new Error("Unexpected level: ",z);var be=Date.now(),ke=be-B,me=Object.assign({elapsedTime:ke,level:z},ce||{});x.publish(Y,X,me);var Re=Object.assign({elapsedTime:ke,group:Y,level:z,name:X,timestamp:be},ce?{payload:ce}:{});$[{debug:"debug",error:"error",info:"info",warning:"warn"}[z]]("event",Re),ae&&"signaling"===Y&&ae.emit("event",Re)}),de}return F(O,k),O}(K);Oe.exports=V},3826:Oe=>{"use strict";var Me=function(){function q(F){F=Object.assign({getKey:function(ie){return ie},getValue:function(ie){return ie},isLessThanOrEqualTo:function(ie,G){return ie<=G}},F),Object.defineProperties(this,{_getKey:{value:F.getKey},_getValue:{value:F.getValue},_isLessThanOrEqualTo:{value:F.isLessThanOrEqualTo},_map:{value:new Map}})}return q.prototype.toMap=function(){return new Map(this._map)},q.prototype.updateAndFilter=function(F){return F.filter(this.update,this)},q.prototype.update=function(F){var K=this._getKey(F),ie=this._getValue(F);return!(this._map.has(K)&&this._isLessThanOrEqualTo(ie,this._map.get(K))||(this._map.set(K,ie),0))},q}();Oe.exports=Me},9739:function(Oe,Me,q){"use strict";var Ct,F=this&&this.__extends||(Ct=function(Gt,on){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(qe,Fe){qe.__proto__=Fe}||function(qe,Fe){for(var ut in Fe)Object.prototype.hasOwnProperty.call(Fe,ut)&&(qe[ut]=Fe[ut])})(Gt,on)},function(Gt,on){if("function"!=typeof on&&null!==on)throw new TypeError("Class extends value "+String(on)+" is not a constructor or null");function qe(){this.constructor=Gt}Ct(Gt,on),Gt.prototype=null===on?Object.create(on):(qe.prototype=on.prototype,new qe)}),K=this&&this.__read||function(Ct,Gt){var on="function"==typeof Symbol&&Ct[Symbol.iterator];if(!on)return Ct;var Fe,Ln,qe=on.call(Ct),ut=[];try{for(;(void 0===Gt||Gt-- >0)&&!(Fe=qe.next()).done;)ut.push(Fe.value)}catch(mn){Ln={error:mn}}finally{try{Fe&&!Fe.done&&(on=qe.return)&&on.call(qe)}finally{if(Ln)throw Ln.error}}return ut},ie=this&&this.__spreadArray||function(Ct,Gt){for(var on=0,qe=Gt.length,Fe=Ct.length;on<qe;on++,Fe++)Ct[Fe]=Gt[on];return Ct},G=q(8701),V=G.typeErrors,k=G.trackPriority,O=q(7627),x=q(8066).sessionSID;function z(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function _e(Ct,Gt,on,qe){if(!(qe in Gt)&&!qe.match(/^on[a-z]+$/)){var Fe;try{Fe=typeof Ct[qe]}catch{}"function"===Fe&&(Gt[qe]=function(){for(var ut,Ln=[],mn=0;mn<arguments.length;mn++)Ln[mn]=arguments[mn];return(ut=this[on])[qe].apply(ut,ie([],K(Ln)))})}}function we(Ct){return"object"==typeof Ct&&!Array.isArray(Ct)}function jt(Ct){Object.getOwnPropertyNames(Ct).forEach(function(Gt){Gt.startsWith("_")&&St(Ct,Gt)})}function St(Ct,Gt){var on=Object.getOwnPropertyDescriptor(Ct,Gt);on.enumerable=!1,Object.defineProperty(Ct,Gt,on)}function Ye(Ct,Gt){void 0===Gt&&(Gt=[]),Gt.forEach(function(on){Ct.hasOwnProperty(on)&&St(Ct,on)})}function je(Ct){return Ct.map(Ut)}function Ut(Ct){return Array.isArray(Ct)?je(Ct):Ct instanceof Set?function ze(Ct){return je(ie([],K(Ct)))}(Ct):Ct instanceof Map?function Pe(Ct){return ie([],K(Ct.entries())).reduce(function(Gt,on){var qe,Fe=K(on,2);return Object.assign(((qe={})[Fe[0]]=Ut(Fe[1]),qe),Gt)},{})}(Ct):Ct&&"object"==typeof Ct?function rt(Ct){return Object.entries(Ct).reduce(function(Gt,on){var qe,Fe=K(on,2);return Object.assign(((qe={})[Fe[0]]=Ut(Fe[1]),qe),Gt)},{})}(Ct):Ct}function en(Ct){return xr(Ct,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Mr},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function qt(Ct){return xr(Ct,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Mr(Ct){return xr(Ct,[{prop:k.PRIORITY_HIGH,type:"object",transform:qt},{prop:k.PRIORITY_LOW,type:"object",transform:qt},{prop:k.PRIORITY_STANDARD,type:"object",transform:qt}])}function xr(Ct,Gt){return Gt.reduce(function(on,qe){var Fe,ut=qe.prop,mn=qe.payloadProp,jo=qe.transform;return typeof Ct[ut]===qe.type?Object.assign(((Fe={})[void 0===mn?ut:mn]=(void 0===jo?function(Io){return Io}:jo)(Ct[ut]),Fe),on):on},{})}Me.constants=G,Me.createBandwidthProfilePayload=function Mt(Ct){return xr(Ct,[{prop:"video",type:"object",transform:en}])},Me.createMediaSignalingPayload=function Zn(Ct,Gt,on,qe,Fe,ut){var Ln={transports:[{type:"data-channel"}]};return Object.assign(Ct?{active_speaker:Ln}:{},Gt?{network_quality:Ln}:{},ut?{render_hints:Ln}:{},Fe?{publisher_hints:Ln}:{},on?{track_priority:Ln}:{},qe?{track_switch_off:Ln}:{})},Me.createRoomConnectEventPayload=function $t(Ct){function Gt(Fe){return Fe?"true":"false"}var on={sessionSID:x,iceServers:(Ct.iceServers||[]).length,audioTracks:(Ct.tracks||[]).filter(function(Fe){return"audio"===Fe.kind}).length,videoTracks:(Ct.tracks||[]).filter(function(Fe){return"video"===Fe.kind}).length,dataTracks:(Ct.tracks||[]).filter(function(Fe){return"data"===Fe.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Fe){var ut=K(Fe,2),Ln=ut[0],mn=ut[1];on[mn=mn||Ln]=Gt(!!Ct[Ln])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Fe){var ut=K(Fe,2),Ln=ut[0],mn=ut[1];mn=mn||Ln,"number"==typeof Ct[Ln]?on[mn]=Ct[Ln]:isNaN(Number(Ct[Ln]))||(on[mn]=Number(Ct[Ln]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Fe){var ut=K(Fe,2),Ln=ut[0],mn=ut[1];mn=mn||Ln,"string"==typeof Ct[Ln]?on[mn]=Ct[Ln]:"number"==typeof Ct[Ln]&&"name"===Ln&&(on[mn]=Ct[Ln].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Fe){Fe in Ct&&(on[Fe]=JSON.stringify(Ct[Fe]))}),"networkQuality"in Ct&&(on.networkQualityConfiguration={},we(Ct.networkQuality)?["local","remote"].forEach(function(Fe){"number"==typeof Ct.networkQuality[Fe]&&(on.networkQualityConfiguration[Fe]=Ct.networkQuality[Fe])}):(on.networkQualityConfiguration.remote=0,on.networkQualityConfiguration.local=Ct.networkQuality?1:0)),Ct.bandwidthProfile&&Ct.bandwidthProfile.video){var qe=Ct.bandwidthProfile.video||{};on.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Fe){"number"==typeof qe[Fe]||"string"==typeof qe[Fe]?on.bandwidthProfileOptions[Fe]=qe[Fe]:"boolean"==typeof qe[Fe]?on.bandwidthProfileOptions[Fe]=Gt(qe[Fe]):"object"==typeof qe[Fe]&&(on.bandwidthProfileOptions[Fe]=JSON.stringify(qe[Fe]))})}return{group:"room",name:"connect",level:"info",payload:on}},Me.createSubscribePayload=function wr(Ct){return{rules:[{type:Ct?"include":"exclude",all:!0}],revision:1}},Me.asLocalTrack=function B(Ct,Gt){if(Ct instanceof Gt.LocalAudioTrack||Ct instanceof Gt.LocalVideoTrack||Ct instanceof Gt.LocalDataTrack)return Ct;if(Ct instanceof Gt.MediaStreamTrack)return"audio"===Ct.kind?new Gt.LocalAudioTrack(Ct,Gt):new Gt.LocalVideoTrack(Ct,Gt);throw V.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},Me.asLocalTrackPublication=function $(Ct,Gt,on,qe){return new(0,{audio:qe.LocalAudioTrackPublication,video:qe.LocalVideoTrackPublication,data:qe.LocalDataTrackPublication}[Ct.kind])(Gt,Ct,on,qe)},Me.capitalize=function ae(Ct){return Ct[0].toUpperCase()+Ct.slice(1)},Me.deprecateEvents=function de(Ct,Gt,on,qe){var Fe=new Set;Gt.on("newListener",function ut(Ln){on.has(Ln)&&!Fe.has(Ln)&&(qe.deprecated(Ct+"#"+Ln+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(on.get(Ln)?" Use "+Ct+"#"+on.get(Ln)+" instead.":"")),Fe.add(Ln)),Fe.size>=on.size&&Gt.removeListener("newListener",ut)})},Me.difference=function he(Ct,Gt){Ct=Array.isArray(Ct)?new Set(Ct):new Set(Ct.values()),Gt=Array.isArray(Gt)?new Set(Gt):new Set(Gt.values());var on=new Set;return Ct.forEach(function(qe){Gt.has(qe)||on.add(qe)}),on},Me.filterObject=function X(Ct,Gt){return Object.keys(Ct).reduce(function(on,qe){return Ct[qe]!==Gt&&(on[qe]=Ct[qe]),on},{})},Me.flatMap=function Y(Ct,Gt){var on=Ct instanceof Map||Ct instanceof Set?Array.from(Ct.values()):Ct;return Gt=Gt||function(Fe){return Fe},on.reduce(function(qe,Fe){var ut=Gt(Fe);return qe.concat(ut)},[])},Me.getPlatform=function ce(){var Ct=z(),on=K(Ct.match(/\(([^)]+)\)/)||[],2)[1];return K((void 0===on?"unknown":on).split(";").map(function(Ln){return Ln.trim()}),1)[0].toLowerCase()},Me.getUserAgent=z,Me.hidePrivateProperties=jt,Me.hidePrivateAndCertainPublicPropertiesInClass=function Kt(Ct,Gt){return function(on){function qe(){for(var Fe=[],ut=0;ut<arguments.length;ut++)Fe[ut]=arguments[ut];var Ln=on.apply(this,ie([],K(Fe)))||this;return jt(Ln),Ye(Ln,Gt),Ln}return F(qe,on),qe}(Ct)},Me.isDeepEqual=function fe(Ct,Gt){if(Ct===Gt)return!0;if(typeof Ct!=typeof Gt)return!1;if(null===Ct)return null===Gt;if(null===Gt)return!1;if(Array.isArray(Ct))return Array.isArray(Gt)&&Ct.length===Gt.length&&Ct.every(function(Fe,ut){return fe(Fe,Gt[ut])});if("object"==typeof Ct){var on=Object.keys(Ct).sort(),qe=Object.keys(Gt).sort();return!Array.isArray(Gt)&&fe(on,qe)&&on.every(function(Fe){return fe(Ct[Fe],Gt[Fe])})}return!1},Me.isNonArrayObject=we,Me.inRange=function Cr(Ct,Gt,on){return Gt<=Ct&&Ct<=on},Me.makeUUID=function be(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ct){var Gt=16*Math.random()|0;return("x"===Ct?Gt:3&Gt|8).toString(16)})},Me.oncePerTick=function ke(Ct){var Gt=null;function on(){Gt=null,Ct()}return function(){Gt&&clearTimeout(Gt),Gt=setTimeout(on)}},Me.promiseFromEvents=function me(Ct,Gt,on,qe){return new Promise(function(Fe,ut){function Ln(){var no=[].slice.call(arguments);qe&&Gt.removeListener(qe,mn),Fe.apply(void 0,ie([],K(no)))}function mn(){var no=[].slice.call(arguments);Gt.removeListener(on,Ln),ut.apply(void 0,ie([],K(no)))}Gt.once(on,Ln),qe&&Gt.once(qe,mn),Ct()})},Me.getOrNull=function Re(Ct,Gt){return Gt.split(".").reduce(function(on,qe){return on?on[qe]:null},Ct)},Me.defer=function Ce(){var Ct={};return Ct.promise=new Promise(function(Gt,on){Ct.resolve=Gt,Ct.reject=on}),Ct},Me.delegateMethods=function ue(Ct,Gt,on){for(var qe in Ct)_e(Ct,Gt,on,qe)},Me.proxyProperties=function He(Ct,Gt,on){Object.getOwnPropertyNames(Ct).forEach(function(qe){!function Ue(Ct,Gt,on,qe){if(!(qe in Gt)){if(qe.match(/^on[a-z]+$/))return Object.defineProperty(Gt,qe,{value:null,writable:!0}),void on.addEventListener(qe.slice(2),function(){for(var Fe=[],ut=0;ut<arguments.length;ut++)Fe[ut]=arguments[ut];Gt.dispatchEvent.apply(Gt,ie([],K(Fe)))});Object.defineProperty(Gt,qe,{enumerable:!0,get:function(){return on[qe]}})}}(0,Gt,on,qe)})},Me.legacyPromise=function Ge(Ct,Gt,on){return Gt?Ct.then(function(qe){Gt(qe)},function(qe){on(qe)}):Ct},Me.buildLogLevels=function Ze(Ct){return"string"==typeof Ct?{default:Ct,media:Ct,signaling:Ct,webrtc:Ct}:Ct},Me.trackClass=function Xe(Ct,Gt){return(Gt=Gt?"Local":"")+(Ct.kind||"").replace(/\w{1}/,function(on){return on.toUpperCase()})+"Track"},Me.trackPublicationClass=function Be(Ct,Gt){return(Gt=Gt?"Local":"")+(Ct.kind||"").replace(/\w{1}/,function(on){return on.toUpperCase()})+"TrackPublication"},Me.valueToJSON=Ut,Me.withJitter=function Ir(Ct,Gt){var on=Math.random();return Ct-Gt+Math.floor(2*Gt*on+.5)},Me.isChromeScreenShareTrack=function Ui(Ct){return"chrome"===O.guessBrowser()&&"video"===Ct.kind&&"displaySurface"in Ct.getSettings()},Me.isUserMediaTrack=function or(Ct){return"string"==typeof Ct.getSettings().deviceId},Me.waitForSometime=function Ki(Ct){return void 0===Ct&&(Ct=10),new Promise(function(Gt){return setTimeout(Gt,Ct)})},Me.waitForEvent=function ya(Ct,Gt){return new Promise(function(on){Ct.addEventListener(Gt,function qe(Fe){Ct.removeEventListener(Gt,qe),on(Fe)})})}},3744:function(Oe,Me,q){"use strict";var me,F=this&&this.__extends||(me=function(Re,Ce){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,ue){_e.__proto__=ue}||function(_e,ue){for(var fe in ue)Object.prototype.hasOwnProperty.call(ue,fe)&&(_e[fe]=ue[fe])})(Re,Ce)},function(Re,Ce){if("function"!=typeof Ce&&null!==Ce)throw new TypeError("Class extends value "+String(Ce)+" is not a constructor or null");function _e(){this.constructor=Re}me(Re,Ce),Re.prototype=null===Ce?Object.create(Ce):(_e.prototype=Ce.prototype,new _e)}),K=this&&this.__assign||function(){return K=Object.assign||function(me){for(var Re,Ce=1,_e=arguments.length;Ce<_e;Ce++)for(var ue in Re=arguments[Ce])Object.prototype.hasOwnProperty.call(Re,ue)&&(me[ue]=Re[ue]);return me},K.apply(this,arguments)},ie=q(9069).EventEmitter,G=q(9739).getUserAgent,x=globalThis,B=x.WebSocket?x.WebSocket:q(3332),$=q(8701),ae=$.hardwareDevicePublisheriPad,de=$.hardwareDevicePublisheriPhone,he=q(9739),X=q(3948),Y=function(me){function Re(Ce,_e,ue,fe,we,He){var Ue=me.call(this)||this;return He=Object.assign({gateway:ce(fe,we)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:G(),WebSocket:B},He),Object.defineProperties(Ue,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:he.defer()},_reconnectAttemptsLeft:{value:He.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:He.WebSocket}}),Ue._readyToConnect.promise.then(function(Ge){var Ze=Ge.roomSid,Xe=Ge.participantSid,Be=Ue;Ue.on("disconnected",function jt(Kt){if(Be._session=null,Kt&&Be._reconnectAttemptsLeft>0)return Be.emit("reconnecting"),void function ke(me,Re,Ce,_e,ue,fe,we){var He=Date.now()-me._connectTimestamp,Ue=we.reconnectIntervalMs-He;Ue>0?setTimeout(function(){z(me,Re,Ce,_e,ue,fe,we)},Ue):z(me,Re,Ce,_e,ue,fe,we)}(Be,Ce,_e,ue,Ze,Xe,He);Be.removeListener("disconnected",jt)}),z(Ue,Ce,_e,ue,Ze,Xe,He)}).catch(function(){}),Ue}return F(Re,me),Re.prototype.connect=function(Ce,_e){this._readyToConnect.resolve({roomSid:Ce,participantSid:_e})},Re.prototype._publish=function(Ce){Ce.session=this._session,this._ws.send(JSON.stringify(Ce))},Re.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},Re.prototype.publish=function(Ce,_e,ue){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:Ce,name:_e,payload:ue,timestamp:Date.now(),type:"event",version:1}),!0)},Re}(ie);function z(me,Re,Ce,_e,ue,fe,we){me._connectTimestamp=Date.now(),me._reconnectAttemptsLeft--,me._ws=new we.WebSocket(we.gateway);var He=me._ws;He.addEventListener("close",function(Ue){1e3!==Ue.code?me.emit("disconnected",new Error("WebSocket Error "+Ue.code+": "+Ue.reason)):me.emit("disconnected")}),He.addEventListener("message",function(Ue){!function be(me,Re,Ce){switch(Re.type){case"connected":me._session=Re.session,me._reconnectAttemptsLeft=Ce.maxReconnectAttempts,me._eventQueue.splice(0).forEach(me._publish,me),me.emit("connected");break;case"error":me._ws.close(),me.emit("disconnected",new Error(Re.message))}}(me,JSON.parse(Ue.data),we)}),He.addEventListener("open",function(){var Ue={type:"connect",token:Re,version:1};Ue.publisher={name:Ce,sdkVersion:_e,userAgent:we.userAgent,participantSid:fe,roomSid:ue},X.isIpad()?Ue.publisher=K(K({},Ue.publisher),ae):X.isIphone()&&(Ue.publisher=K(K({},Ue.publisher),de)),He.send(JSON.stringify(Ue))})}function ce(me,Re){return"prod"===me?"wss://sdkgw."+Re+".twilio.com":"wss://sdkgw."+me+"-"+Re+".twilio.com"}Oe.exports=Y},4920:Oe=>{"use strict";var Me=function(){function q(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return q.prototype.connect=function(){},q.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},q.prototype.publish=function(){return this._connected},q}();Oe.exports=Me},6396:(Oe,Me,q)=>{"use strict";var F=q(9739).defer,K=function(){function ie(){Object.defineProperties(this,{_audio:{value:F(),writable:!0},_video:{value:F(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return ie.prototype.resolveDeferred=function(G){"audio"===G?this._audio.resolve():this._video.resolve()},ie.prototype.startDeferred=function(G){"audio"===G?this._audio=F():this._video=F()},ie.prototype.whenResolved=function(G){return"audio"===G?this._audio.promise:this._video.promise},ie}();Oe.exports=new K},1458:function(Oe,Me,q){"use strict";var x,F=this&&this.__read||function(z,ce){var be="function"==typeof Symbol&&z[Symbol.iterator];if(!be)return z;var me,Ce,ke=be.call(z),Re=[];try{for(;(void 0===ce||ce-- >0)&&!(me=ke.next()).done;)Re.push(me.value)}catch(_e){Ce={error:_e}}finally{try{me&&!me.done&&(be=ke.return)&&be.call(ke)}finally{if(Ce)throw Ce.error}}return Re},K=this&&this.__spreadArray||function(z,ce){for(var be=0,ke=ce.length,me=z.length;be<ke;be++,me++)z[me]=ce[be];return z},ie=q(7846).getLogger,G=q(8701),V=G.DEFAULT_LOG_LEVEL,k=G.DEFAULT_LOGGER_NAME,O=q(8701).typeErrors,$=function(){function z(ce,be,ke,me,Re){if("string"!=typeof ce)throw O.INVALID_TYPE("moduleName","string");if(!be)throw O.REQUIRED_ARGUMENT("component");"object"!=typeof ke&&(ke={}),Re=Re||ie,Y(ke),Object.defineProperties(this,{_component:{value:be},_logLevels:{value:ke},_warnings:{value:new Set},_loggerName:{get:function(){var _e=me&&"string"==typeof me?me:k;return this._logLevelsEqual||(_e=_e+"-"+ce),_e}},_logger:{get:function(){var _e=Re(this._loggerName),ue=this._logLevels[ce]||V;return _e.setDefaultLevel(ue="off"===ue?"silent":ue),_e}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return z.getLevelByName(ke[ce]||V)}},name:{get:be.toString.bind(be)}})}return z.getLevelByName=function(ce){return isNaN(ce)?(X(ce=ce.toUpperCase()),z[ce]):parseInt(ce,10)},z.prototype.createLog=function(ce,be){var ke=this._loggerName;return this._logLevelsEqual||(ke=ke.substring(0,ke.lastIndexOf("-"))),new z(ce,be,this._logLevels,ke)},z.prototype.setLevels=function(ce){return Y(ce),Object.assign(this._logLevels,ce),this},z.prototype.log=function(ce,be){var ke=z._levels[ce];if(!ke)throw O.INVALID_VALUE("logLevel",de);ke=ke.toLowerCase();var me=[(new Date).toISOString(),ke,this.name];return(this._logger[ke]||function(){}).apply(void 0,K([],F(me.concat(be)))),this},z.prototype.debug=function(){return this.log(z.DEBUG,[].slice.call(arguments))},z.prototype.deprecated=function(ce){var be=function B(z){if((x=x||new Map).has(z))return x.get(z);var ce=new Set;return x.set(z,ce),ce}(this._component.constructor);return be.has(ce)?this:(be.add(ce),this.warn(ce))},z.prototype.info=function(){return this.log(z.INFO,[].slice.call(arguments))},z.prototype.warn=function(){return this.log(z.WARN,[].slice.call(arguments))},z.prototype.warnOnce=function(ce){return this._warnings.has(ce)?this:(this._warnings.add(ce),this.warn(ce))},z.prototype.error=function(){return this.log(z.ERROR,[].slice.call(arguments))},z.prototype.throw=function(ce,be){throw ce.clone&&(ce=ce.clone(be)),this.log(z.ERROR,ce),ce},z}();Object.defineProperties($,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var ae={},de=[],he=$._levels.map(function(z,ce){return ae[z]=!0,de.push(ce),z});function X(z){if(!(z in ae))throw O.INVALID_VALUE("level",he)}function Y(z){Object.keys(z).forEach(function(ce){X(z[ce].toUpperCase())})}Oe.exports=$},8218:Oe=>{"use strict";var Me=function(){function q(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return q.prototype.get=function(){var F=this._samples;return(F[1].numerator-F[0].numerator)/(F[1].denominator-F[0].denominator||1/0)},q.prototype.putSample=function(F,K){var ie=this._samples;ie.shift(),ie.push({denominator:K,numerator:F})},q}();Oe.exports=Me},2643:Oe=>{"use strict";var Me=function(){function q(F,K){var ie=this,G=(K=Object.assign({navigator,window},K)).navigator,V=G.connection||{type:null},k=V.type,O=V.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var ae=k!==ie.type&&ie.isOnline;k=ie.type,ae&&F()}},_target:{value:V}}:{_events:{value:["online"]},_listener:{value:F},_target:{value:K.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof G.onLine||G.onLine}},type:{enumerable:!0,get:function(){return V.type||null}},_listener:O._listener,_events:O._events,_target:O._target})}return q.prototype.start=function(){var F=this;this._events.forEach(function(K){F._target.addEventListener(K,F._listener)})},q.prototype.stop=function(){var F=this;this._events.forEach(function(K){F._target.removeEventListener(K,F._listener)})},q}();Oe.exports=Me},5318:function(Oe){"use strict";var ie,Me=this&&this.__extends||(ie=function(G,V){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,O){k.__proto__=O}||function(k,O){for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(k[x]=O[x])})(G,V)},function(G,V){if("function"!=typeof V&&null!==V)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function k(){this.constructor=G}ie(G,V),G.prototype=null===V?Object.create(V):(k.prototype=V.prototype,new k)}),q=function(){function ie(G){Object.defineProperties(this,{_callback:{value:G}})}return ie.prototype.observe=function(){},ie.prototype.unobserve=function(){},ie.prototype.makeVisible=function(G){var V=this._makeFakeEntry(G,!0);this._callback([V])},ie.prototype.makeInvisible=function(G){var V=this._makeFakeEntry(G,!1);this._callback([V])},ie.prototype._makeFakeEntry=function(G,V){return{target:G,isIntersecting:V}},ie}(),F=function(ie){function G(){return null!==ie&&ie.apply(this,arguments)||this}return Me(G,ie),G}(q),K=function(ie){function G(){return null!==ie&&ie.apply(this,arguments)||this}return Me(G,ie),G.prototype.resize=function(V){var k=this._makeFakeEntry(V,!0);this._callback([k])},G}(q);Oe.exports={NullIntersectionObserver:F,NullResizeObserver:K,NullObserver:q}},3898:function(Oe,Me,q){"use strict";var F=this&&this.__read||function(Ue,Ge){var Ze="function"==typeof Symbol&&Ue[Symbol.iterator];if(!Ze)return Ue;var Be,Kt,Xe=Ze.call(Ue),jt=[];try{for(;(void 0===Ge||Ge-- >0)&&!(Be=Xe.next()).done;)jt.push(Be.value)}catch(St){Kt={error:St}}finally{try{Be&&!Be.done&&(Ze=Xe.return)&&Ze.call(Xe)}finally{if(Kt)throw Kt.error}}return jt},K=q(9739),ie=K.difference,G=K.flatMap,V=q(570),k={0:"PCMU",8:"PCMA"};function O(Ue){return Array.from(B(Ue)).reduce(function(Ge,Ze){var Xe=Ze[0],Be=Ze[1],jt=Ge.get(Be)||[];return Ge.set(Be,jt.concat(Xe))},new Map)}function x(Ue){return de(Ue).reduce(function(Ge,Ze){var Xe=ae(Ze);return Xe?Ge.set(Xe,Ze):Ge},new Map)}function B(Ue){return he(Ue).reduce(function(Ge,Ze){var Xe=new RegExp("a=rtpmap:"+Ze+" ([^/]+)"),Be=Ue.match(Xe),jt=Be?Be[1].toLowerCase():k[Ze]?k[Ze].toLowerCase():"";return Ge.set(Ze,jt)},new Map)}function $(Ue,Ge){var Ze=new RegExp("^a=fmtp:"+Ue+" (.+)$","m"),Xe=Ge.match(Ze);return Xe&&Xe[1].split(";").reduce(function(Be,jt){var Kt=F(jt.split("="),2),Ye=Kt[1];return Be[Kt[0]]=isNaN(Ye)?Ye:parseInt(Ye,10),Be},{})}function ae(Ue){var Ge=Ue.match(/^a=mid:(.+)$/m);return Ge&&Ge[1]}function de(Ue,Ge,Ze){return Ue.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(Xe){return"m="+Xe}).filter(function(Xe){var Be=new RegExp("m="+(Ge||".*"),"gm"),jt=new RegExp("a="+(Ze||".*"),"gm");return Be.test(Xe)&&jt.test(Xe)})}function he(Ue){var Ze=Ue.split("\r\n")[0].match(/([0-9]+)/g);return Ze?Ze.slice(1).map(function(Xe){return parseInt(Xe,10)}):[]}function Y(Ue,Ge){var Ze=Ge.split("\r\n"),Xe=Ze[0],Be=Ze.slice(1);return[Xe=Xe.replace(/([0-9]+\s?)+$/,Ue.join(" "))].concat(Be).join("\r\n")}function _e(Ue,Ge){var Ze=de(Ue);return[Ue.split("\r\nm=")[0]].concat(Ze.map(function(Be){if(!/^m=(audio|video)/.test(Be))return Be;var jt=ae(Be);if(!jt)return Be;var Kt=Ge.get(jt);if(!Kt)return Be;var St=(Be.match(/^a=msid:(.+)$/m)||[])[1];if(!St)return Be;var Ye=F(St.split(" "),2),je=Ye[0],ze=Ye[1],Pe=new RegExp("msid:"+je+(ze?" "+ze:"")+"$","gm");return Be.replace(Pe,"msid:"+je+" "+Kt)})).join("\r\n")}function we(Ue,Ge){return"a=fmtp:"+Ue+" "+Object.entries(Ge).map(function(Xe){var Be=F(Xe,2);return Be[0]+"="+Be[1]}).join(";")}Me.addOrRewriteNewTrackIds=function Ce(Ue,Ge,Ze){var Xe=Array.from(Ze).reduce(function(Be,jt){var Kt=F(jt,2),Ye=Kt[1];return de(Ue,Kt[0],"send(only|recv)").map(ae).filter(function(Pe){return!Ge.has(Pe)}).forEach(function(Pe,rt){return Be.set(Pe,Ye[rt])}),Be},new Map);return _e(Ue,Xe)},Me.addOrRewriteTrackIds=_e,Me.createCodecMapForMediaSection=O,Me.createPtToCodecName=B,Me.disableRtx=function fe(Ue){var Ge=de(Ue);return[Ue.split("\r\nm=")[0]].concat(Ge.map(function(Xe){if(!/^m=video/.test(Xe))return Xe;var jt=O(Xe).get("rtx");if(!jt)return Xe;var Kt=new Set(he(Xe));jt.forEach(function(ze){return Kt.delete(ze)});var St=Xe.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),Ye=St&&St[1],je=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(Ye?[new RegExp("^a=ssrc:"+Ye+" .+$")]:[]);return Xe=Xe.split("\r\n").filter(function(ze){return je.every(function(Pe){return!Pe.test(ze)})}).join("\r\n"),Y(Array.from(Kt),Xe)})).join("\r\n")},Me.enableDtxForOpus=function He(Ue,Ge){var Ze=de(Ue),Xe=Ue.split("\r\nm=")[0];return Ge=Ge||Ze.filter(function(Be){return/^m=audio/.test(Be)}).map(ae),[Xe].concat(Ze.map(function(Be){if(!/^m=audio/.test(Be))return Be;var Kt=O(Be).get("opus");if(!Kt)return Be;var St=$(Kt,Be);if(!St)return Be;var Ye=we(Kt,St),je=new RegExp(Ye),ze=ae(Be);Ge.includes(ze)?St.usedtx=1:delete St.usedtx;var Pe=we(Kt,St);return Be.replace(je,Pe)})).join("\r\n")},Me.filterLocalCodecs=function me(Ue,Ge){var Ze=de(Ue),Xe=Ue.split("\r\nm=")[0],Be=x(Ge);return[Xe].concat(Ze.map(function(jt){return function ke(Ue,Ge,Ze){if(!/^m=(audio|video)/.test(Ue))return Ue;var Xe=ae(Ue),Be=Xe&&Ge.get(Xe);if(!Be)return Ue;var jt=B(Be),Kt=O(Ue),St=G(Array.from(jt),function(Pe){var rt=F(Pe,2),Ut=rt[0],$t=rt[1];return"rtx"===$t||Ze.includes($t)?[]:function be(Ue,Ge,Ze,Xe,Be){var jt=Ze.get(Ue)||[];if(jt.length<=1)return jt;var Kt=$(Ge,Be);if(!Kt)return jt;var St=jt.find(function(Ye){var je=$(Ye,Xe);return je&&Object.keys(Kt).every(function(ze){return Kt[ze]===je[ze]})});return"number"==typeof St?[St]:jt}($t,Ut,Kt,Ue,Be)}),Ye=Kt.get("rtx")||[];St=St.concat(Ye.filter(function(Pe){var rt=$(Pe,Ue);return rt&&St.includes(rt.apt)}));var je=Ue.split("\r\n").filter(function(Pe){var rt=Pe.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),Ut=rt&&rt[2];return!rt||Ut&&St.includes(parseInt(Ut,10))});return Y(he(Ue).filter(function(Pe){return St.includes(Pe)}),je.join("\r\n"))}(jt,Be,[])})).join("\r\n")},Me.getMediaSections=de,Me.removeSSRCAttributes=function ue(Ue,Ge){return Ue.split("\r\n").filter(function(Ze){return!Ge.find(function(Xe){return new RegExp("a=ssrc:.*"+Xe+":","g").test(Ze)})}).join("\r\n")},Me.revertSimulcast=function Re(Ue,Ge,Ze,Xe){void 0===Xe&&(Xe=!1);var Be=x(Ze),jt=x(Ge),Kt=de(Ue);return[Ue.split("\r\nm=")[0]].concat(Kt.map(function(Ye){if(Ye=Ye.replace(/\r\n$/,""),!/^m=video/.test(Ye))return Ye;var je=Ye.match(/^a=mid:(.+)$/m),ze=je&&je[1];if(!ze)return Ye;var Pe=Be.get(ze),rt=B(Pe),Ut=he(Pe),$t=Ut.length&&"vp8"===rt.get(Ut[0]);return Xe||!$t?jt.get(ze).replace(/\r\n$/,""):Ye})).concat("").join("\r\n")},Me.setCodecPreferences=function z(Ue,Ge,Ze){var Xe=de(Ue);return[Ue.split("\r\nm=")[0]].concat(Xe.map(function(jt){if(!/^m=(audio|video)/.test(jt))return jt;var Kt=jt.match(/^m=(audio|video)/)[1],St=O(jt),je=function X(Ue,Ge){Ge=Ge.map(function(jt){return jt.codec.toLowerCase()});var Ze=G(Ge,function(jt){return Ue.get(jt)||[]}),Xe=ie(Array.from(Ue.keys()),Ge),Be=G(Xe,function(jt){return Ue.get(jt)});return Ze.concat(Be)}(St,"audio"===Kt?Ge:Ze),ze=Y(je,jt),Pe=St.get("pcma")||[],rt=St.get("pcmu")||[];return("audio"===Kt?new Set(Pe.concat(rt)):new Set).has(je[0])?ze.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):ze})).join("\r\n")},Me.setSimulcast=function ce(Ue,Ge){var Ze=de(Ue);return[Ue.split("\r\nm=")[0]].concat(Ze.map(function(Be){if(Be=Be.replace(/\r\n$/,""),!/^m=video/.test(Be))return Be;var jt=O(Be),Kt=he(Be),St=new Set(jt.get("vp8")||[]);return Kt.some(function(je){return St.has(je)})?V(Be,Ge):Be})).concat("").join("\r\n")}},3073:(Oe,Me,q)=>{"use strict";var F=q(1647).RTCSessionDescription,K=q(3898),ie=K.createPtToCodecName,G=K.getMediaSections;function O(Y){var z=ie(Y);Y=function x(Y,z){return Array.from(z.keys()).reduce(function(ce,be){var ke=new RegExp("^a=rtpmap:"+be+" rtx.+$","gm");return(ce.match(ke)||[]).slice("rtx"===z.get(be)?1:0).reduce(function(me,Re){var Ce=new RegExp("\r\n"+Re),_e=new RegExp("\r\na=fmtp:"+be+" apt=[0-9]+");return me.replace(Ce,"").replace(_e,"")},ce)},Y)}(Y,z);var ce=function B(Y){var z=new Map;return Y.forEach(function(ce,be){var ke=z.get(ce)||new Set;return z.set(ce,ke.add(be))}),z}(z),be=ce.get("rtx")||new Set,ke=new Set,me=function $(Y,z,ce,be){return Array.from(ce).reduce(function(ke,me){var Re=new RegExp("a=fmtp:"+me+" apt=(\\d+)"),Ce=Y.match(Re);if(!Ce)return be.add(me),ke;var _e=Number.parseInt(Ce[1]);return z.has(_e)?"rtx"===z.get(_e)?(be.add(me),ke):ke.set(me,_e):(be.add(me),ke)},new Map)}(Y,z,be,ke),Re=function ae(Y,z){var ce=Array.from(Y).reduce(function(be,ke){var me=ke[0],Re=ke[1],Ce=be.get(Re)||new Set;return be.set(Re,Ce.add(me))},new Map);return Array.from(ce).reduce(function(be,ke){var me=ke[0],Re=Array.from(ke[1]);return Re.length>1?(Re.forEach(function(Ce){z.add(Ce)}),be):be.set(me,Re[0])},new Map)}(me,ke),Ce=Array.from(ke);return["h264","vp8","vp9"].reduce(function(fe,we){var He=ce.get(we)||new Set;return Array.from(He).reduce(function(Ue,Ge){return Re.has(Ge)?Ue:Ue.add(Ge)},fe)},new Set).forEach(function(fe){if(Ce.length){var we=Ce.shift();Y=function X(Y,z,ce){return Y.endsWith("\r\n")?Y+"a=fmtp:"+z+" apt="+ce+"\r\n":Y+"\r\na=fmtp:"+z+" apt="+ce}(Y=de(Y,we),we,fe)}}),Ce.forEach(function(fe){Y=function he(Y,z){var ce=new RegExp("a=rtpmap:"+z+".*\r\n","gm");return Y.replace(ce,"")}(Y=de(Y,fe),fe)}),Y}function de(Y,z){var ce=new RegExp("a=fmtp:"+z+".*\r\n","gm");return Y.replace(ce,"")}Oe.exports=function V(Y){var z={type:Y.type};return"rollback"!==Y.type&&(z.sdp=function k(Y){var z=G(Y);return[Y.split("\r\nm=")[0]].concat(z.map(O)).join("\r\n")}(Y.sdp)),new F(z)}},570:function(Oe,Me,q){"use strict";var F=this&&this.__read||function(X,Y){var z="function"==typeof Symbol&&X[Symbol.iterator];if(!z)return X;var be,me,ce=z.call(X),ke=[];try{for(;(void 0===Y||Y-- >0)&&!(be=ce.next()).done;)ke.push(be.value)}catch(Re){me={error:Re}}finally{try{be&&!be.done&&(z=ce.return)&&z.call(ce)}finally{if(me)throw me.error}}return ke},K=q(9739),ie=K.difference,G=K.flatMap;function V(){return String(Math.floor(4294967295*Math.random()))}var k=function(){function X(Y,z,ce){Object.defineProperties(this,{cName:{enumerable:!0,value:ce},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:z},trackId:{enumerable:!0,value:Y}})}return X.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var Y=[V(),V()];Y.forEach(function(z){this.primarySSRCs.add(z)},this),this.rtxPairs.size&&Y.forEach(function(z){this.rtxPairs.set(V(),z)},this)}},X.prototype.addSSRC=function(Y,z,ce){z?this.rtxPairs.set(Y,z):this.primarySSRCs.add(Y),this.isSimulcastEnabled=this.isSimulcastEnabled||ce},X.prototype.toSdpLines=function(Y){var z=this,ce=Y?[]:Array.from(this.rtxPairs.entries()).map(function(_e){return _e.reverse()}),be=Array.from(this.primarySSRCs.values()),ke=ce.length?G(ce):be,me=G(ke,function(_e){return["a=ssrc:"+_e+" cname:"+z.cName,"a=ssrc:"+_e+" msid:"+z.streamId+" "+z.trackId]}),Re=ce.map(function(_e){return"a=ssrc-group:FID "+_e.join(" ")}),Ce=["a=ssrc-group:SIM "+be.join(" ")];return Re.concat(me).concat(Ce)},X}();function O(X,Y){return(X.match(new RegExp(Y,"gm"))||[]).map(function(ce){return(ce.match(new RegExp(Y))||[]).slice(1)})}Oe.exports=function he(X,Y){var z=function de(X){var Y=function x(X){return new Set(G(O(X,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(X),z=function $(X){return new Map(O(X,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(z){return z.reverse()}))}(X),ce=function ae(X){var Y=F(G(O(X,"^a=msid:(.+) (.+)$")),2),z=Y[0],ce=Y[1];return G(O(X,"^a=ssrc:(.+) cname:.+$")).map(function(ke){return[ke,z,ce]})}(X);return ce.reduce(function(be,ke){var me=ke[0],Re=ke[1],Ce=ke[2],_e=be.get(Ce)||new k(Ce,Re,function B(X,Y,z){return X.match(new RegExp("a=ssrc:"+Y+" "+z+":(.+)"))[1]}(X,me,"cname")),ue=z.get(me)||null;return _e.addSSRC(me,ue,Y.has(me)),be.set(Ce,_e)},new Map)}(X),ce=Array.from(z.keys()),be=Array.from(Y.keys()),ke=ie(ce,be),me=ie(be,ce);G(ke,function(Ue){return z.get(Ue)}).forEach(function(Ue){Ue.addSimulcastSSRCs(),Y.set(Ue.trackId,Ue)}),be=Array.from(Y.keys());var Ce=ie(be,me),_e=G(Ce,function(Ue){return Y.get(Ue)}),ue=!X.match(/a=rtpmap:[0-9]+ rtx/),fe=G(_e,function(Ue){return Ue.toSdpLines(ue)}),we=G(new Set(X.split("\r\n").concat(fe))),He="a=x-google-flag:conference";return X.match(He)||we.push(He),we.join("\r\n")}},1057:(Oe,Me,q)=>{"use strict";var F=q(3898).getMediaSections,K=function(){function ie(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return ie.prototype.match=function(G){return this._midsToTrackIds.get(G.transceiver.mid)||null},ie.prototype.update=function(G){var V=F(G,"(audio|video)");this._midsToTrackIds=V.reduce(function(k,O){var x=O.match(/^a=mid:(.+)$/m)||[],B=O.match(/^a=msid:.+ (.+)$/m)||[],$=x[1],ae=B[1];return $&&ae?k.set($,ae):k},this._midsToTrackIds)},ie}();Oe.exports=K},8066:(Oe,Me)=>{var q="1234567890abcdef";function K(ie){for(var G="",V=0;V<32;V++)G+=q.charAt(Math.floor(Math.random()*q.length));return""+ie+G}Me.sessionSID=K("SS"),Me.createSID=K},8592:(Oe,Me,q)=>{"use strict";var F=q(7627),K=F.guessBrowser,ie=F.support,G=q(3948),V=G.isAndroid,k=G.isMobile,O=G.isNonChromiumEdge,x=G.rebrandedChromeBrowser,B=G.mobileWebKitBrowser,$=["crios","edg","edge","electron","headlesschrome"],ae=["chrome","firefox"],de=["chrome","safari"],he=[];Oe.exports=function X(){var Y=K();if(!Y)return!1;var z=x(Y),ce=B(Y),be=V()?ae:de;return!!Y&&ie()&&(!z||$.includes(z))&&!O(Y)&&(!ce||he.includes(ce))&&(!k()||be.includes(Y))}},6543:Oe=>{"use strict";var Me=function(){function q(F,K,ie){void 0===ie&&(ie=!0),Object.defineProperties(this,{_delay:{value:K,writable:!0},_fn:{value:F},_timeout:{value:null,writable:!0}}),ie&&this.start()}return Object.defineProperty(q.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),q.prototype.setDelay=function(F){this._delay=F},q.prototype.start=function(){var F=this;this.isSet||(this._timeout=setTimeout(function(){var K=F._fn;F.clear(),K()},this._delay))},q.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},q.prototype.reset=function(){this.clear(),this.start()},q}();Oe.exports=Me},8380:function(Oe,Me,q){"use strict";var qe,F=this&&this.__extends||(qe=function(Fe,ut){return(qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ln,mn){Ln.__proto__=mn}||function(Ln,mn){for(var no in mn)Object.prototype.hasOwnProperty.call(mn,no)&&(Ln[no]=mn[no])})(Fe,ut)},function(Fe,ut){if("function"!=typeof ut&&null!==ut)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function Ln(){this.constructor=Fe}qe(Fe,ut),Fe.prototype=null===ut?Object.create(ut):(Ln.prototype=ut.prototype,new Ln)}),K=q(9318),ie={};Me.createTwilioError=function(Fe,ut){return ut="string"==typeof ut&&ut?ut:"Unknown error",ie[Fe="number"==typeof Fe?Fe:0]?new ie[Fe]:new K(Fe,ut)};var G=function(qe){function Fe(){var ut=qe.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenInvalidError=G,Object.defineProperty(ie,20101,{value:G});var V=function(qe){function Fe(){var ut=qe.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenHeaderInvalidError=V,Object.defineProperty(ie,20102,{value:V});var k=function(qe){function Fe(){var ut=qe.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenIssuerInvalidError=k,Object.defineProperty(ie,20103,{value:k});var O=function(qe){function Fe(){var ut=qe.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenExpiredError=O,Object.defineProperty(ie,20104,{value:O});var x=function(qe){function Fe(){var ut=qe.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenNotYetValidError=x,Object.defineProperty(ie,20105,{value:x});var B=function(qe){function Fe(){var ut=qe.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenGrantsInvalidError=B,Object.defineProperty(ie,20106,{value:B});var $=function(qe){function Fe(){var ut=qe.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.AccessTokenSignatureInvalidError=$,Object.defineProperty(ie,20107,{value:$});var ae=function(qe){function Fe(){var ut=qe.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingConnectionError=ae,Object.defineProperty(ie,53e3,{value:ae});var de=function(qe){function Fe(){var ut=qe.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingConnectionDisconnectedError=de,Object.defineProperty(ie,53001,{value:de});var he=function(qe){function Fe(){var ut=qe.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingConnectionTimeoutError=he,Object.defineProperty(ie,53002,{value:he});var X=function(qe){function Fe(){var ut=qe.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingIncomingMessageInvalidError=X,Object.defineProperty(ie,53003,{value:X});var Y=function(qe){function Fe(){var ut=qe.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingOutgoingMessageInvalidError=Y,Object.defineProperty(ie,53004,{value:Y});var z=function(qe){function Fe(){var ut=qe.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.SignalingServerBusyError=z,Object.defineProperty(ie,53006,{value:z});var ce=function(qe){function Fe(){var ut=qe.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomNameInvalidError=ce,Object.defineProperty(ie,53100,{value:ce});var be=function(qe){function Fe(){var ut=qe.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomNameTooLongError=be,Object.defineProperty(ie,53101,{value:be});var ke=function(qe){function Fe(){var ut=qe.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomNameCharsInvalidError=ke,Object.defineProperty(ie,53102,{value:ke});var me=function(qe){function Fe(){var ut=qe.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomCreateFailedError=me,Object.defineProperty(ie,53103,{value:me});var Re=function(qe){function Fe(){var ut=qe.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomConnectFailedError=Re,Object.defineProperty(ie,53104,{value:Re});var Ce=function(qe){function Fe(){var ut=qe.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomMaxParticipantsExceededError=Ce,Object.defineProperty(ie,53105,{value:Ce});var _e=function(qe){function Fe(){var ut=qe.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomNotFoundError=_e,Object.defineProperty(ie,53106,{value:_e});var ue=function(qe){function Fe(){var ut=qe.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomMaxParticipantsOutOfRangeError=ue,Object.defineProperty(ie,53107,{value:ue});var fe=function(qe){function Fe(){var ut=qe.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomTypeInvalidError=fe,Object.defineProperty(ie,53108,{value:fe});var we=function(qe){function Fe(){var ut=qe.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomTimeoutOutOfRangeError=we,Object.defineProperty(ie,53109,{value:we});var He=function(qe){function Fe(){var ut=qe.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomStatusCallbackMethodInvalidError=He,Object.defineProperty(ie,53110,{value:He});var Ue=function(qe){function Fe(){var ut=qe.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomStatusCallbackInvalidError=Ue,Object.defineProperty(ie,53111,{value:Ue});var Ge=function(qe){function Fe(){var ut=qe.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomStatusInvalidError=Ge,Object.defineProperty(ie,53112,{value:Ge});var Ze=function(qe){function Fe(){var ut=qe.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomRoomExistsError=Ze,Object.defineProperty(ie,53113,{value:Ze});var Xe=function(qe){function Fe(){var ut=qe.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomInvalidParametersError=Xe,Object.defineProperty(ie,53114,{value:Xe});var Be=function(qe){function Fe(){var ut=qe.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomMediaRegionInvalidError=Be,Object.defineProperty(ie,53115,{value:Be});var jt=function(qe){function Fe(){var ut=qe.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomMediaRegionUnavailableError=jt,Object.defineProperty(ie,53116,{value:jt});var Kt=function(qe){function Fe(){var ut=qe.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomSubscriptionOperationNotSupportedError=Kt,Object.defineProperty(ie,53117,{value:Kt});var St=function(qe){function Fe(){var ut=qe.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomCompletedError=St,Object.defineProperty(ie,53118,{value:St});var Ye=function(qe){function Fe(){var ut=qe.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomAudioOnlyFlagNotSupportedError=Ye,Object.defineProperty(ie,53124,{value:Ye});var je=function(qe){function Fe(){var ut=qe.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.RoomTrackKindNotSupportedError=je,Object.defineProperty(ie,53125,{value:je});var ze=function(qe){function Fe(){var ut=qe.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantIdentityInvalidError=ze,Object.defineProperty(ie,53200,{value:ze});var Pe=function(qe){function Fe(){var ut=qe.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantIdentityTooLongError=Pe,Object.defineProperty(ie,53201,{value:Pe});var rt=function(qe){function Fe(){var ut=qe.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantIdentityCharsInvalidError=rt,Object.defineProperty(ie,53202,{value:rt});var Ut=function(qe){function Fe(){var ut=qe.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantMaxTracksExceededError=Ut,Object.defineProperty(ie,53203,{value:Ut});var $t=function(qe){function Fe(){var ut=qe.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantNotFoundError=$t,Object.defineProperty(ie,53204,{value:$t});var Mt=function(qe){function Fe(){var ut=qe.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ParticipantDuplicateIdentityError=Mt,Object.defineProperty(ie,53205,{value:Mt});var en=function(qe){function Fe(){var ut=qe.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackInvalidError=en,Object.defineProperty(ie,53300,{value:en});var Zn=function(qe){function Fe(){var ut=qe.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackNameInvalidError=Zn,Object.defineProperty(ie,53301,{value:Zn});var qt=function(qe){function Fe(){var ut=qe.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackNameTooLongError=qt,Object.defineProperty(ie,53302,{value:qt});var Mr=function(qe){function Fe(){var ut=qe.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackNameCharsInvalidError=Mr,Object.defineProperty(ie,53303,{value:Mr});var xr=function(qe){function Fe(){var ut=qe.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackNameIsDuplicatedError=xr,Object.defineProperty(ie,53304,{value:xr});var wr=function(qe){function Fe(){var ut=qe.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.TrackServerTrackCapacityReachedError=wr,Object.defineProperty(ie,53305,{value:wr});var Ir=function(qe){function Fe(){var ut=qe.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaClientLocalDescFailedError=Ir,Object.defineProperty(ie,53400,{value:Ir});var Cr=function(qe){function Fe(){var ut=qe.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaServerLocalDescFailedError=Cr,Object.defineProperty(ie,53401,{value:Cr});var Ui=function(qe){function Fe(){var ut=qe.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaClientRemoteDescFailedError=Ui,Object.defineProperty(ie,53402,{value:Ui});var or=function(qe){function Fe(){var ut=qe.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaServerRemoteDescFailedError=or,Object.defineProperty(ie,53403,{value:or});var Ki=function(qe){function Fe(){var ut=qe.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaNoSupportedCodecError=Ki,Object.defineProperty(ie,53404,{value:Ki});var ya=function(qe){function Fe(){var ut=qe.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaConnectionError=ya,Object.defineProperty(ie,53405,{value:ya});var Ct=function(qe){function Fe(){var ut=qe.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.MediaDTLSTransportFailedError=Ct,Object.defineProperty(ie,53407,{value:Ct});var Gt=function(qe){function Fe(){var ut=qe.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ConfigurationAcquireFailedError=Gt,Object.defineProperty(ie,53500,{value:Gt});var on=function(qe){function Fe(){var ut=qe.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(ut,Fe.prototype),ut}return F(Fe,qe),Fe}(K);Me.ConfigurationAcquireTurnFailedError=on,Object.defineProperty(ie,53501,{value:on})},9318:function(Oe){"use strict";var ie,Me=this&&this.__extends||(ie=function(G,V){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,O){k.__proto__=O}||function(k,O){for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(k[x]=O[x])})(G,V)},function(G,V){if("function"!=typeof V&&null!==V)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function k(){this.constructor=G}ie(G,V),G.prototype=null===V?Object.create(V):(k.prototype=V.prototype,new k)}),q=this&&this.__read||function(ie,G){var V="function"==typeof Symbol&&ie[Symbol.iterator];if(!V)return ie;var O,B,k=V.call(ie),x=[];try{for(;(void 0===G||G-- >0)&&!(O=k.next()).done;)x.push(O.value)}catch($){B={error:$}}finally{try{O&&!O.done&&(V=k.return)&&V.call(k)}finally{if(B)throw B.error}}return x},F=this&&this.__spreadArray||function(ie,G){for(var V=0,k=G.length,O=ie.length;V<k;V++,O++)ie[O]=G[V];return ie},K=function(ie){function G(V){var k=this,O=[].slice.call(arguments,1);k=ie.apply(this,F([],q(O)))||this,Object.setPrototypeOf(k,G.prototype);var x=Error.apply(k,O);return x.name="TwilioError",Object.defineProperty(k,"code",{value:V,enumerable:!0}),Object.getOwnPropertyNames(x).forEach(function(B){Object.defineProperty(this,B,{value:x[B],enumerable:!0})},k),k}return Me(G,ie),G.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},G}(Error);Oe.exports=K},1501:(Oe,Me,q)=>{"use strict";var K=q(9739).isNonArrayObject,ie=q(8701),G=ie.typeErrors,V=ie.clientTrackSwitchOffControl,k=ie.videoContentPreferencesMode,O=ie.subscriptionMode,x=ie.trackPriority,B=ie.trackSwitchOffMode;function de(X,Y,z){return void 0===z&&(z=[]),typeof X>"u"?null:null!==X&&K(X)?z.reduce(function(ce,be){var ke=be.prop,me=be.type,Re=be.values;if(ce||!(ke in X))return ce;var Ce=X[ke];return me&&typeof Ce!==me||"number"===me&&isNaN(Ce)?G.INVALID_TYPE(Y+"."+ke,me):Array.isArray(Re)&&!Re.includes(Ce)?G.INVALID_VALUE(Y+"."+ke,Re):ce},null):G.INVALID_TYPE(Y,"object")}Me.kG=function $(X){var Y=de(X,"options.bandwidthProfile");return!X||Y||(Y=de(X.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(k)},{prop:"dominantSpeakerPriority",values:Object.values(x)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(O)},{prop:"clientTrackSwitchOffControl",values:Object.values(V)},{prop:"trackSwitchOffMode",values:Object.values(B)}]))?Y:X.video?"maxTracks"in X.video&&"clientTrackSwitchOffControl"in X.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in X.video&&"contentPreferencesMode"in X.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function he(X){var Y="options.bandwidthProfile.video.renderDimensions",z=de(X,Y);return X?z||Object.values(x).reduce(function(ce,be){return ce||de(X[be],Y+"."+be,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):z}(X.video.renderDimensions):null},Me.Wv=function ae(X,Y){if(!(X instanceof Y.LocalAudioTrack||X instanceof Y.LocalDataTrack||X instanceof Y.LocalVideoTrack||X instanceof Y.MediaStreamTrack))throw G.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:Oe=>{Oe.exports=function(q,F){if(q&&F)if(q.super_=F,"function"==typeof Object.create)q.prototype=Object.create(F.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}});else{var K=function ie(){};K.prototype=F.prototype,q.prototype=new K,q.prototype.constructor=q}}},7846:Oe=>{var Me=function(){},q="undefined",F=typeof window!==q&&typeof window.navigator!==q&&/Trident\/|MSIE /.test(window.navigator.userAgent),K=["trace","debug","info","warn","error"];function ie(he,X){var Y=he[X];if("function"==typeof Y.bind)return Y.bind(he);try{return Function.prototype.bind.call(Y,he)}catch{return function(){return Function.prototype.apply.apply(Y,[he,arguments])}}}function G(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function V(he){return"debug"===he&&(he="log"),typeof console!==q&&("trace"===he&&F?G:void 0!==console[he]?ie(console,he):void 0!==console.log?ie(console,"log"):Me)}function k(he,X){for(var Y=0;Y<K.length;Y++){var z=K[Y];this[z]=Y<he?Me:this.methodFactory(z,he,X)}this.log=this.debug}function O(he,X,Y){return function(){typeof console!==q&&(k.call(this,X,Y),this[he].apply(this,arguments))}}function x(he,X,Y){return V(he)||O.apply(this,arguments)}function B(he,X,Y){var ce,z=this,be="loglevel";function me(){var Ce;if(typeof window!==q&&be){try{Ce=window.localStorage[be]}catch{}if(typeof Ce===q)try{var _e=window.document.cookie,ue=_e.indexOf(encodeURIComponent(be)+"=");-1!==ue&&(Ce=/^([^;]+)/.exec(_e.slice(ue))[1])}catch{}return void 0===z.levels[Ce]&&(Ce=void 0),Ce}}"string"==typeof he?be+=":"+he:"symbol"==typeof he&&(be=void 0),z.name=he,z.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},z.methodFactory=Y||x,z.getLevel=function(){return ce},z.setLevel=function(Ce,_e){if("string"==typeof Ce&&void 0!==z.levels[Ce.toUpperCase()]&&(Ce=z.levels[Ce.toUpperCase()]),!("number"==typeof Ce&&Ce>=0&&Ce<=z.levels.SILENT))throw"log.setLevel() called with invalid level: "+Ce;if(ce=Ce,!1!==_e&&function ke(Ce){var _e=(K[Ce]||"silent").toUpperCase();if(typeof window!==q&&be){try{return void(window.localStorage[be]=_e)}catch{}try{window.document.cookie=encodeURIComponent(be)+"="+_e+";"}catch{}}}(Ce),k.call(z,Ce,he),typeof console===q&&Ce<z.levels.SILENT)return"No console available for logging"},z.setDefaultLevel=function(Ce){me()||z.setLevel(Ce,!1)},z.enableAll=function(Ce){z.setLevel(z.levels.TRACE,Ce)},z.disableAll=function(Ce){z.setLevel(z.levels.SILENT,Ce)};var Re=me();null==Re&&(Re=X??"WARN"),z.setLevel(Re,!1)}var $=new B,ae={};$.getLogger=function(X){if("symbol"!=typeof X&&"string"!=typeof X||""===X)throw new TypeError("You must supply a name when creating a logger.");var Y=ae[X];return Y||(Y=ae[X]=new B(X,$.getLevel(),$.methodFactory)),Y};var de=typeof window!==q?window.log:void 0;$.noConflict=function(){return typeof window!==q&&window.log===$&&(window.log=de),$},$.getLoggers=function(){return ae},$.default=$,Oe.exports=$},7708:Oe=>{"use strict";var Me=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,q=function(){function F(K){K=Object.assign({AudioContext:Me},K),Object.defineProperties(this,{_AudioContext:{value:K.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:F}})}return F.prototype.getOrCreate=function(K){if(!this._holders.has(K)&&(this._holders.add(K),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},F.prototype.release=function(K){this._holders.has(K)&&(this._holders.delete(K),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},F}();Oe.exports=new q},4687:Oe=>{"use strict";Oe.exports=function q(F,K,ie){ie="number"==typeof ie?ie:250;var G=F.createMediaStreamSource(K),V=F.createAnalyser();V.fftSize=2048,G.connect(V);var k=new Uint8Array(V.fftSize),O=!1;return setTimeout(function(){O=!0},ie),function x(){return O?Promise.resolve(!0):(V.getByteTimeDomainData(k),k.some(function(B){return 128!==B&&0!==B})?Promise.resolve(!1):function Me(F){return F="number"==typeof F?F:0,new Promise(function(K){return setTimeout(K,F)})}().then(x))}().then(function(B){return G.disconnect(),B},function(B){throw G.disconnect(),B})}},3830:(Oe,Me,q)=>{"use strict";var F=q(4687);Oe.exports=function K(ie,G,V,k,O){k="number"==typeof k?k:3;var x=0,B=q(7708),$={},ae=B.getOrCreate($);return function de(){return G(V).then(function(he){return(V.audio?F(ae,he,O).catch(function(Y){return ie.warn("Encountered an error while detecting silence",Y),!0}):Promise.resolve(!1)).then(function(Y){return Y?k<=0?(ie.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),he):(ie.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++x+"."),he.getTracks().forEach(function(z){return z.stop()}),k--,de()):(ie.info("Got a non-silent audio MediaStreamTrack; returning it."),he)})})}().then(function(he){return B.release($),he},function(he){throw B.release($),he})}},9611:(Oe,Me,q)=>{"use strict";var F=q(7627).flatMap,K=q(7627).guessBrowser,ie=q(7627).guessBrowserVersion,G=q(3236).getSdpFormat,V=K(),k=ie(),O="chrome"===V,x="firefox"===V,B="safari"===V,$=O?k.major:null;function Y(ue){var fe=Array.from(ue.values()).find(function(Be){return"candidate-pair"===Be.type&&Be.nominated});if(!fe)return null;var we=ue.get(fe.localCandidateId),He=ue.get(fe.remoteCandidateId),Ue=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Ge=Ue.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),Ze=we?Ge.reduce(function(Be,jt){return Be[jt.key]=typeof we[jt.key]===jt.type?we[jt.key]:"deleted"!==jt.key&&null,Be},{}):null,Xe=He?Ue.reduce(function(Be,jt){return Be[jt.key]=typeof He[jt.key]===jt.type?He[jt.key]:null,Be},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(Be){return"inprogress"===Be?"in-progress":Be}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(Be,jt){return Be[jt.key]=typeof fe[jt.key]===jt.type?jt.fixup?jt.fixup(fe[jt.key]):fe[jt.key]:null,Be},{localCandidate:Ze,remoteCandidate:Xe})}function z(ue){var fe=Array.from(ue.values()).find(function(jt){return"candidate-pair"===jt.type&&jt.nominated});if(!fe)return null;var we=ue.get(fe.localCandidateId),He=ue.get(fe.remoteCandidateId),Ue=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Ge=Ue.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),Ze={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},Xe=we?Ge.reduce(function(jt,Kt){var St=Kt.ffKeys&&Kt.ffKeys.find(function(Ye){return Ye in we})||Kt.key;return jt[Kt.key]=typeof we[St]===Kt.type?"candidateType"===St&&Ze[we[St]]||we[St]:"deleted"!==St&&null,jt},{}):null,Be=He?Ue.reduce(function(jt,Kt){var St=Kt.ffKeys&&Kt.ffKeys.find(function(Ye){return Ye in He})||Kt.key;return jt[Kt.key]=typeof He[St]===Kt.type?"candidateType"===St&&Ze[He[St]]||He[St]:null,jt},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(jt,Kt){return jt[Kt.key]=typeof fe[Kt.key]===Kt.type?fe[Kt.key]:null,jt},{localCandidate:Xe,remoteCandidate:Be})}function ce(ue,fe,we){var He="local"===we?"getSenders":"getReceivers";return ue[He]?ue[He]().map(function(Ge){return Ge.track}).filter(function(Ge){return Ge&&Ge.kind===fe}):F(ue["local"===we?"getLocalStreams":"getRemoteStreams"](),function(Ge){return Ge["audio"===fe?"getAudioTracks":"getVideoTracks"]()})}function ke(ue,fe){return new Promise(function(we,He){$&&$<67?ue.getStats(function(Ue){we([Re(Ue,fe)])},null,He):ue.getStats(fe).then(function(Ue){we(function Ce(ue){var fe=null,we=[],He=null,Ue=null,Ge=null,Ze=null,Xe=null;ue.forEach(function(Ye){switch(Ye.type){case"inbound-rtp":fe=Ye;break;case"outbound-rtp":we.push(Ye);break;case"media-source":Xe=Ye;break;case"track":Ge=Ye;break;case"codec":Ze=Ye;break;case"remote-inbound-rtp":He=Ye;break;case"remote-outbound-rtp":Ue=Ye}});var Be=Ge&&Ge.remoteSource,Kt=[],St=Be?Ue:He;return(Be?[fe]:we).forEach(function(Ye){var je={},ze=[Ye,Xe,Ge,Ze,St&&St.ssrc===Ye.ssrc?St:null];function Pe(Ln){var mn=ze.find(function(no){return no&&typeof no[Ln]<"u"})||null;return mn?mn[Ln]:null}var rt=Pe("ssrc");"number"==typeof rt&&(je.ssrc=String(rt));var Ut=Pe("timestamp");je.timestamp=Math.round(Ut);var $t=Pe("mimeType");"string"==typeof $t&&($t=$t.split("/"),je.codecName=$t[$t.length-1]);var Mt=Pe("roundTripTime");"number"==typeof Mt&&(je.roundTripTime=Math.round(1e3*Mt));var en=Pe("jitter");"number"==typeof en&&(je.jitter=Math.round(1e3*en));var Zn=Pe("frameWidth");"number"==typeof Zn&&(Be?je.frameWidthReceived=Zn:(je.frameWidthSent=Zn,je.frameWidthInput=Ge.frameWidth));var qt=Pe("frameHeight");"number"==typeof qt&&(Be?je.frameHeightReceived=qt:(je.frameHeightSent=qt,je.frameHeightInput=Ge.frameHeight));var Mr=Pe("framesPerSecond");"number"==typeof Mr&&(je[Be?"frameRateReceived":"frameRateSent"]=Mr);var xr=Pe("bytesReceived");"number"==typeof xr&&(je.bytesReceived=xr);var wr=Pe("bytesSent");"number"==typeof wr&&(je.bytesSent=wr);var Ir=Pe("packetsLost");"number"==typeof Ir&&(je.packetsLost=Ir);var Cr=Pe("packetsReceived");"number"==typeof Cr&&(je.packetsReceived=Cr);var Ui=Pe("packetsSent");"number"==typeof Ui&&(je.packetsSent=Ui);var or=Pe("audioLevel");"number"==typeof or&&(or=Math.round(32767*or),Be?je.audioOutputLevel=or:je.audioInputLevel=or);var Ki=Pe("totalPacketSendDelay");"number"==typeof Ki&&(je.totalPacketSendDelay=Ki);var ya=Pe("totalEncodeTime");"number"==typeof ya&&(je.totalEncodeTime=ya);var Ct=Pe("framesEncoded");"number"==typeof Ct&&(je.framesEncoded=Ct);var Gt=Pe("estimatedPlayoutTimestamp");"number"==typeof Gt&&(je.estimatedPlayoutTimestamp=Gt);var on=Pe("totalDecodeTime");"number"==typeof on&&(je.totalDecodeTime=on);var qe=Pe("framesDecoded");"number"==typeof qe&&(je.framesDecoded=qe);var Fe=Pe("jitterBufferDelay");"number"==typeof Fe&&(je.jitterBufferDelay=Fe);var ut=Pe("jitterBufferEmittedCount");"number"==typeof ut&&(je.jitterBufferEmittedCount=ut),Kt.push(je)}),Kt}(Ue))},He)})}function Re(ue,fe){var we=ue.result().find(function(Ue){return"ssrc"===Ue.type&&Ue.stat("googTrackId")===fe.id}),He={};return we&&(He.timestamp=Math.round(Number(we.timestamp)),He=we.names().reduce(function(Ue,Ge){switch(Ge){case"googCodecName":Ue.codecName=we.stat(Ge);break;case"googRtt":Ue.roundTripTime=Number(we.stat(Ge));break;case"googJitterReceived":Ue.jitter=Number(we.stat(Ge));break;case"googFrameWidthInput":Ue.frameWidthInput=Number(we.stat(Ge));break;case"googFrameHeightInput":Ue.frameHeightInput=Number(we.stat(Ge));break;case"googFrameWidthSent":Ue.frameWidthSent=Number(we.stat(Ge));break;case"googFrameHeightSent":Ue.frameHeightSent=Number(we.stat(Ge));break;case"googFrameWidthReceived":Ue.frameWidthReceived=Number(we.stat(Ge));break;case"googFrameHeightReceived":Ue.frameHeightReceived=Number(we.stat(Ge));break;case"googFrameRateInput":Ue.frameRateInput=Number(we.stat(Ge));break;case"googFrameRateSent":Ue.frameRateSent=Number(we.stat(Ge));break;case"googFrameRateReceived":Ue.frameRateReceived=Number(we.stat(Ge));break;case"ssrc":Ue[Ge]=we.stat(Ge);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":Ue[Ge]=Number(we.stat(Ge))}return Ue},He)),He}function _e(ue,fe){var we=null,He=null;(ue=ue||new Map).forEach(function(Cr){if(!Cr.isRemote)switch(Cr.type){case"inbound-rtp":we=Cr,He=ue.get(Cr.remoteId);break;case"outbound-rtp":He=Cr,we=ue.get(Cr.remoteId)}});var Ue=fe?we:He,Ge=fe?He:we;function Ze(Cr){return Ue&&typeof Ue[Cr]<"u"?Ue[Cr]:Ge&&typeof Ge[Cr]<"u"?Ge[Cr]:null}var Xe={},Be=Ze("timestamp");Xe.timestamp=Math.round(Be);var jt=Ze("ssrc");"number"==typeof jt&&(Xe.ssrc=String(jt));var Kt=Ze("bytesSent");"number"==typeof Kt&&(Xe.bytesSent=Kt);var St=Ze("packetsLost");"number"==typeof St&&(Xe.packetsLost=St);var Ye=Ze("packetsSent");"number"==typeof Ye&&(Xe.packetsSent=Ye);var je=Ze("roundTripTime");"number"==typeof je&&(Xe.roundTripTime=Math.round(1e3*je));var ze=Ze("jitter");"number"==typeof ze&&(Xe.jitter=Math.round(1e3*ze));var Pe=Ze("framerateMean");"number"==typeof Pe&&(Xe.frameRateSent=Math.round(Pe));var rt=Ze("bytesReceived");"number"==typeof rt&&(Xe.bytesReceived=rt);var Ut=Ze("packetsReceived");"number"==typeof Ut&&(Xe.packetsReceived=Ut);var $t=Ze("framerateMean");"number"==typeof $t&&(Xe.frameRateReceived=Math.round($t));var Mt=Ze("totalPacketSendDelay");"number"==typeof Mt&&(Xe.totalPacketSendDelay=Mt);var en=Ze("totalEncodeTime");"number"==typeof en&&(Xe.totalEncodeTime=en);var Zn=Ze("framesEncoded");"number"==typeof Zn&&(Xe.framesEncoded=Zn);var qt=Ze("estimatedPlayoutTimestamp");"number"==typeof qt&&(Xe.estimatedPlayoutTimestamp=qt);var Mr=Ze("totalDecodeTime");"number"==typeof Mr&&(Xe.totalDecodeTime=Mr);var xr=Ze("framesDecoded");"number"==typeof xr&&(Xe.framesDecoded=xr);var wr=Ze("jitterBufferDelay");"number"==typeof wr&&(Xe.jitterBufferDelay=wr);var Ir=Ze("jitterBufferEmittedCount");return"number"==typeof Ir&&(Xe.jitterBufferEmittedCount=Ir),Xe}Oe.exports=function de(ue,fe){return ue&&"function"==typeof ue.getStats?function he(ue,fe){var we=ce(ue,"audio","local"),He=ce(ue,"video","local"),Ue=ce(ue,"audio"),Ge=ce(ue,"video"),Ze={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},Xe=F([[we,"localAudioTrackStats",!1],[He,"localVideoTrackStats",!1],[Ue,"remoteAudioTrackStats",!0],[Ge,"remoteVideoTrackStats",!0]],function(Be){var Kt=Be[1],St=Be[2];return Be[0].map(function(Ye){return function be(ue,fe,we){return typeof(we=we||{}).testForChrome<"u"||O?ke(ue,fe):typeof we.testForFirefox<"u"||x?function me(ue,fe,we){return new Promise(function(He,Ue){ue.getStats(fe).then(function(Ge){He([_e(Ge,we)])},Ue)})}(ue,fe,we.isRemote):typeof we.testForSafari<"u"||B?typeof we.testForSafari<"u"||"unified"===G()?ke(ue,fe):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ue,Ye,Object.assign({isRemote:St},fe)).then(function(je){je.forEach(function(ze){ze.trackId=Ye.id,Ze[Kt].push(ze)})})})});return Promise.all(Xe).then(function(){return function X(ue,fe){return typeof(fe=fe||{}).testForChrome<"u"||O||typeof fe.testForSafari<"u"||B?ue.getStats().then(Y):typeof fe.testForFirefox<"u"||x?ue.getStats().then(z):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(ue,fe)}).then(function(Be){return Ze.activeIceCandidatePair=Be,Ze})}(ue,fe):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:Oe=>{"use strict";Oe.exports=function Me(q){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(q=q||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(q)):Promise.reject(new Error("getUserMedia is not supported"))}},1647:(Oe,Me,q)=>{"use strict";var F={};Object.defineProperties(F,{getStats:{enumerable:!0,value:q(9611)},getUserMedia:{enumerable:!0,value:q(7370)},MediaStream:{enumerable:!0,value:q(4946)},MediaStreamTrack:{enumerable:!0,value:q(6240)},RTCIceCandidate:{enumerable:!0,value:q(5219)},RTCPeerConnection:{enumerable:!0,value:q(7061)},RTCSessionDescription:{enumerable:!0,value:q(5481)}}),Oe.exports=F},4946:Oe=>{"use strict";Oe.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:Oe=>{"use strict";Oe.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:Oe=>{"use strict";Oe.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:(Oe,Me,q)=>{"use strict";var F=q(4326),K=q(7590),ie=q(1905),G=q(3688),V=q(4946),k=q(7121),O=q(3236),x=q(7627),B=q(7627).isIOSChrome,$="unified"===O.getSdpFormat();function ae(me,Re){if(!(this instanceof ae))return new ae(me,Re);K.call(this),me=me||{};var Ce=Object.assign(me.iceTransportPolicy?{iceTransports:me.iceTransportPolicy}:{},me);x.interceptEvent(this,"datachannel"),x.interceptEvent(this,"signalingstatechange");var _e=O.getSdpFormat(Ce.sdpSemantics),ue=new RTCPeerConnection(Ce,Re);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new V},_peerConnection:{value:ue},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:_e},_senders:{value:new Map},_signalingStateLatch:{value:new G},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:ue.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:ue.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":ue.signalingState}}});var fe=this;ue.addEventListener("datachannel",function(He){be(He.channel),fe.dispatchEvent(He)}),ue.addEventListener("signalingstatechange",function(){"stable"===ue.signalingState&&(fe._appliedTracksToSSRCs=new Map(fe._tracksToSSRCs)),!fe._pendingLocalOffer&&!fe._pendingRemoteOffer&&fe.dispatchEvent.apply(fe,arguments)}),ue.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&ue.addStream(this._localStream),x.proxyProperties(RTCPeerConnection.prototype,this,ue)}function de(me,Re,Ce){var Ge,fe=Re?me._pendingLocalOffer:me._pendingRemoteOffer,He=Re?"have-local-offer":"have-remote-offer",Ue=Re?"setLocalDescription":"setRemoteDescription";if(!Re&&(Re?me._pendingRemoteOffer:me._pendingLocalOffer)&&"answer"===Ce.type)Ge=function he(me,Re){return me._peerConnection.setLocalDescription(me._pendingLocalOffer).then(function(){return me._pendingLocalOffer=null,me.setRemoteDescription(Re)}).then(function(){me._signalingStateLatch.lower()})}(me,Ce);else if("offer"===Ce.type){if(me.signalingState!==He&&"stable"!==me.signalingState)return Promise.reject(new Error("Cannot set "+(Re?"local":"remote")+" offer in state "+me.signalingState));!fe&&"low"===me._signalingStateLatch.state&&me._signalingStateLatch.raise();var Ze=me.signalingState;(function _e(Xe){Re?me._pendingLocalOffer=Xe:me._pendingRemoteOffer=Xe})(Y(Ce)),Ge=Promise.resolve(),me.signalingState!==Ze&&Ge.then(function(){me.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===Ce.type&&(me.signalingState!==He?Ge=Promise.reject(new Error("Cannot rollback "+(Re?"local":"remote")+" description in "+me.signalingState)):(function ue(){Re?me._pendingLocalOffer=null:me._pendingRemoteOffer=null}(),me._rolledBackTracksToSSRCs=new Map(me._tracksToSSRCs),me._tracksToSSRCs=new Map(me._appliedTracksToSSRCs),(Ge=Promise.resolve()).then(function(){me.dispatchEvent(new Event("signalingstatechange"))})));return Ge||me._peerConnection[Ue](Y(Ce))}function X(me,Re){return!!me.getTransceivers().find(function(Ce){return Ce.receiver&&Ce.receiver.track&&Ce.receiver.track.kind===Re})}function Y(me){return me instanceof F&&me._description?me._description:new RTCSessionDescription(me)}function z(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function be(me){return Object.defineProperty(me,"maxRetransmits",{value:65535===me.maxRetransmits?null:me.maxRetransmits}),z()&&Object.defineProperty(me,"maxPacketLifeTime",{value:65535===me.maxRetransmitTime?null:me.maxRetransmitTime}),me}function ke(me,Re,Ce){return"unified"===me?O.updateUnifiedPlanTrackIdsToSSRCs(Re,Ce):O.updatePlanBTrackIdsToSSRCs(Re,Ce)}ie(ae,K),"function"!=typeof RTCPeerConnection.prototype.addTrack?(ae.prototype.addTrack=function(){var Re=[].slice.call(arguments),Ce=Re[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+Ce.id+", "+Ce.kind+"]: RTCPeerConnection is closed");var _e=this._senders.get(Ce);if(_e&&_e.track)throw new Error("Cannot add MediaStreamTrack ["+Ce.id+", "+Ce.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(Ce),this._peerConnection.addStream(this._localStream),_e=new k(Ce),this._senders.set(Ce,_e),_e},ae.prototype.removeTrack=function(Re){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var Ce=Re.track;!Ce||(Re=this._senders.get(Ce))&&Re.track&&(Re.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Ce),this._peerConnection.addStream(this._localStream))},ae.prototype.getSenders=function(){return Array.from(this._senders.values())}):ae.prototype.removeTrack=function(Re){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(Re)}catch{}},ae.prototype.addIceCandidate=function(Re){var _e,Ce=[].slice.call(arguments),ue=this;return _e="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return ue._peerConnection.addIceCandidate(Re)}):this._peerConnection.addIceCandidate(Re),Ce.length>1?x.legacyPromise(_e,Ce[1],Ce[2]):_e},ae.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},ae.prototype.createAnswer=function(){var Ce,Re=[].slice.call(arguments),_e=this;return Ce=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return _e._signalingStateLatch.lower(),_e._peerConnection.createAnswer()}).then(function(fe){return _e._pendingRemoteOffer=null,_e._rolledBackTracksToSSRCs.clear(),new F({type:"answer",sdp:ke(_e._sdpFormat,_e._tracksToSSRCs,fe.sdp)})},function(fe){throw _e._pendingRemoteOffer=null,fe}):this._peerConnection.createAnswer().then(function(ue){return _e._rolledBackTracksToSSRCs.clear(),new F({type:"answer",sdp:ke(_e._sdpFormat,_e._tracksToSSRCs,ue.sdp)})}),Re.length>1?x.legacyPromise(Ce,Re[0],Re[1]):Ce},ae.prototype.createOffer=function(){var Re=[].slice.call(arguments),Ce=(Re.length>1?Re[2]:Re[0])||{},_e=this;if(B()){if(Ce.offerToReceiveVideo&&!this._audioTransceiver&&(!$||!X(this,"audio"))){delete Ce.offerToReceiveAudio;try{this._audioTransceiver=$?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(fe){return Promise.reject(fe)}}if(Ce.offerToReceiveVideo&&!this._videoTransceiver&&(!$||!X(this,"video"))){delete Ce.offerToReceiveVideo;try{this._videoTransceiver=$?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(fe){return Promise.reject(fe)}}}var ue=this._peerConnection.createOffer(Ce).then(function(fe){return _e._rolledBackTracksToSSRCs.clear(),new F({type:fe.type,sdp:ke(_e._sdpFormat,_e._tracksToSSRCs,fe.sdp)})});return Re.length>1?x.legacyPromise(ue,Re[0],Re[1]):ue},ae.prototype.createDataChannel=function(Re,Ce){Ce=function ce(me){return me=Object.assign({},me),z()&&"maxPacketLifeTime"in me&&(me.maxRetransmitTime=me.maxPacketLifeTime),me}(Ce);var _e=this._peerConnection.createDataChannel(Re,Ce);return be(_e),_e},ae.prototype.setLocalDescription=function(){var Re=[].slice.call(arguments),Ce=Re[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var _e=de(this,!0,Ce);return Re.length>1?x.legacyPromise(_e,Re[1],Re[2]):_e},ae.prototype.setRemoteDescription=function(){var Re=[].slice.call(arguments),Ce=Re[0];this._rolledBackTracksToSSRCs.clear();var _e=de(this,!1,Ce);return Re.length>1?x.legacyPromise(_e,Re[1],Re[2]):_e},x.delegateMethods(RTCPeerConnection.prototype,ae.prototype,"_peerConnection"),Oe.exports=ae},7111:(Oe,Me,q)=>{"use strict";var F=q(7590),K=q(3657),ie=q(1905),G=q(3236).updateUnifiedPlanTrackIdsToSSRCs,V=q(7627),k="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function O(ae){if(!(this instanceof O))return new O(ae);F.call(this),V.interceptEvent(this,"signalingstatechange");var de=new RTCPeerConnection(ae);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:de},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return $(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var X,he=this;de.addEventListener("signalingstatechange",function(){if(!he._rollingBack&&he.signalingState!==X){X=he.signalingState;var z=he.dispatchEvent.apply.bind(he.dispatchEvent,he,arguments);he._isClosed?setTimeout(z):z()}}),V.proxyProperties(RTCPeerConnection.prototype,this,de)}function x(ae,de,he){var X=de?"setLocalDescription":"setRemoteDescription";return ae._rollingBack=!0,ae._peerConnection[X](new K({type:"rollback"})).then(he).then(function(z){return ae._rollingBack=!1,z},function(z){throw ae._rollingBack=!1,z})}function B(ae,de,he){if(!ae._initiallyNegotiatedDtlsRole&&"offer"!==de.type){var X=de.sdp.match(/a=setup:([a-z]+)/);if(X){var Y=X[1];ae._initiallyNegotiatedDtlsRole=he?{active:"passive",passive:"active"}[Y]:Y}}}function $(ae,de){return ae&&"answer"===ae.type&&de?new K({type:ae.type,sdp:ae.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+de)}):ae}ie(O,F),Object.defineProperty(O.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),k&&(O.prototype.addTrack=function(){var de=arguments[0],he=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return he.replaceTrack(de),he}),O.prototype.createAnswer=function(){var he,de=[].slice.call(arguments),X=this;return he=this._peerConnection.createAnswer().then(function(z){return B(X,z),$(z,X._initiallyNegotiatedDtlsRole)}),"function"==typeof de[0]?V.legacyPromise(he,de[0],de[1]):he},O.prototype.createOffer=function(){var X,de=[].slice.call(arguments),he=(de.length>1?de[2]:de[0])||{},Y=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var z="have-local-offer"===this.signalingState;X=x(this,z,function(){return Y.createOffer(he)})}else X=Y._peerConnection.createOffer(he);return X=X.then(function(ce){return new K({type:ce.type,sdp:G(Y._tracksToSSRCs,ce.sdp)})}),de.length>1?V.legacyPromise(X,de[0],de[1]):X},O.prototype.setLocalDescription=function(){var X,de=[].slice.call(arguments),he=de[0];return he&&"answer"===he.type&&"have-local-offer"===this.signalingState&&(X=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),X?de.length>1?V.legacyPromise(X,de[1],de[2]):X:this._peerConnection.setLocalDescription.apply(this._peerConnection,de)},O.prototype.setRemoteDescription=function(){var X,de=[].slice.call(arguments),he=de[0],Y=this;return he&&"have-remote-offer"===this.signalingState&&("answer"===he.type?X=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===he.type&&(X=x(this,!1,function(){return Y._peerConnection.setRemoteDescription(he)}))),X||(X=this._peerConnection.setRemoteDescription(he)),X=X.then(function(){B(Y,he,!0)}),de.length>1?V.legacyPromise(X,de[1],de[2]):X},O.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},V.delegateMethods(RTCPeerConnection.prototype,O.prototype,"_peerConnection"),Oe.exports=O},7061:(Oe,Me,q)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,q(7627).guessBrowser)()){case"chrome":Oe.exports=q(5431);break;case"firefox":Oe.exports=q(7111);break;case"safari":Oe.exports=q(7548);break;default:Oe.exports=RTCPeerConnection}else Oe.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:(Oe,Me,q)=>{"use strict";var F=q(7590),K=q(1905),ie=q(3688),G=q(3236),V=q(7627),k="unified"===G.getSdpFormat(),O=k?G.updateUnifiedPlanTrackIdsToSSRCs:G.updatePlanBTrackIdsToSSRCs;function x(he){if(!(this instanceof x))return new x(he);F.call(this),V.interceptEvent(this,"datachannel"),V.interceptEvent(this,"iceconnectionstatechange"),V.interceptEvent(this,"signalingstatechange"),V.interceptEvent(this,"track");var X=new RTCPeerConnection(he);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:X},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new ie},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var Y=this;X.addEventListener("datachannel",function(ce){de(ce.channel),Y.dispatchEvent(ce)}),X.addEventListener("iceconnectionstatechange",function(){Y._isClosed||Y.dispatchEvent.apply(Y,arguments)}),X.addEventListener("signalingstatechange",function(){Y._isClosed||("stable"===X.signalingState&&(Y._appliedTracksToSSRCs=new Map(Y._tracksToSSRCs)),!Y._pendingLocalOffer&&!Y._pendingRemoteOffer&&Y.dispatchEvent.apply(Y,arguments))}),X.addEventListener("track",function(ce){Y._pendingRemoteOffer=null,Y.dispatchEvent(ce)}),V.proxyProperties(RTCPeerConnection.prototype,this,X)}function B(he,X,Y){var be=X?he._pendingLocalOffer:he._pendingRemoteOffer,me=X?"have-local-offer":"have-remote-offer",Re=X?"setLocalDescription":"setRemoteDescription";if(!X&&(X?he._pendingRemoteOffer:he._pendingLocalOffer)&&"answer"===Y.type)return function $(he,X){return he._peerConnection.setLocalDescription(he._pendingLocalOffer).then(function(){return he._pendingLocalOffer=null,he.setRemoteDescription(X)}).then(function(){he._signalingStateLatch.lower()})}(he,Y);if("offer"===Y.type){if(he.signalingState!==me&&"stable"!==he.signalingState)return Promise.reject(new Error("Cannot set "+(X?"local":"remote")+" offer in state "+he.signalingState));!be&&"low"===he._signalingStateLatch.state&&he._signalingStateLatch.raise();var Ce=he.signalingState;return function z(_e){X?he._pendingLocalOffer=_e:he._pendingRemoteOffer=_e}(Y),he.signalingState!==Ce?Promise.resolve().then(function(){he.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===Y.type?he.signalingState!==me?Promise.reject(new Error("Cannot rollback "+(X?"local":"remote")+" description in "+he.signalingState)):(function ce(){X?he._pendingLocalOffer=null:he._pendingRemoteOffer=null}(),he._rolledBackTracksToSSRCs=new Map(he._tracksToSSRCs),he._tracksToSSRCs=new Map(he._appliedTracksToSSRCs),Promise.resolve().then(function(){he.dispatchEvent(new Event("signalingstatechange"))})):he._peerConnection[Re](Y)}function ae(he,X){return!!he.getTransceivers().find(function(Y){return Y.receiver&&Y.receiver.track&&Y.receiver.track.kind===X})}function de(he){return Object.defineProperties(he,{maxPacketLifeTime:{value:65535===he.maxPacketLifeTime?null:he.maxPacketLifeTime},maxRetransmits:{value:65535===he.maxRetransmits?null:he.maxRetransmits}})}K(x,F),x.prototype.addIceCandidate=function(X){var Y=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return Y._peerConnection.addIceCandidate(X)}):this._peerConnection.addIceCandidate(X)},x.prototype.createOffer=function(X){X=Object.assign({},X);var Y=this;if(X.offerToReceiveVideo&&!this._audioTransceiver&&(!k||!ae(this,"audio"))){delete X.offerToReceiveAudio;try{this._audioTransceiver=k?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(z){return Promise.reject(z)}}if(X.offerToReceiveVideo&&!this._videoTransceiver&&(!k||!ae(this,"video"))){delete X.offerToReceiveVideo;try{this._videoTransceiver=k?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(z){return Promise.reject(z)}}return this._peerConnection.createOffer(X).then(function(z){return Y._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:z.type,sdp:O(Y._tracksToSSRCs,z.sdp)})})},x.prototype.createAnswer=function(X){var Y=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return Y._signalingStateLatch.lower(),Y._peerConnection.createAnswer()}).then(function(ce){return Y._pendingRemoteOffer=null,Y._rolledBackTracksToSSRCs.clear(),k?new RTCSessionDescription({type:ce.type,sdp:O(Y._tracksToSSRCs,ce.sdp)}):ce},function(ce){throw Y._pendingRemoteOffer=null,ce}):this._peerConnection.createAnswer(X).then(function(ce){return Y._rolledBackTracksToSSRCs.clear(),k?new RTCSessionDescription({type:ce.type,sdp:O(Y._tracksToSSRCs,ce.sdp)}):ce})},x.prototype.createDataChannel=function(X,Y){var z=this._peerConnection.createDataChannel(X,Y);return de(z),z},x.prototype.removeTrack=function(X){X.replaceTrack(null),this._peerConnection.removeTrack(X)},x.prototype.setLocalDescription=function(X){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),B(this,!0,X)},x.prototype.setRemoteDescription=function(X){return this._rolledBackTracksToSSRCs.clear(),B(this,!1,X)},x.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var X=this;setTimeout(function(){X.dispatchEvent(new Event("iceconnectionstatechange")),X.dispatchEvent(new Event("signalingstatechange"))})}},V.delegateMethods(RTCPeerConnection.prototype,x.prototype,"_peerConnection"),Oe.exports=x},7121:Oe=>{"use strict";Oe.exports=function Me(q){Object.defineProperties(this,{track:{enumerable:!0,value:q,writable:!0}})}},4326:Oe=>{"use strict";Oe.exports=function Me(q){if(!(this instanceof Me))return new Me(q);var F=q&&"rollback"===q.type?null:new RTCSessionDescription(q);Object.defineProperties(this,{_description:{get:function(){return F}},sdp:{enumerable:!0,value:F?F.sdp:q.sdp},type:{enumerable:!0,value:F?F.type:q.type}})}},3657:Oe=>{"use strict";Oe.exports=RTCSessionDescription},5481:(Oe,Me,q)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,q(7627).guessBrowser)()){case"chrome":Oe.exports=q(4326);break;case"firefox":Oe.exports=q(3657);break;default:Oe.exports=RTCSessionDescription}else Oe.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7590:(Oe,Me,q)=>{"use strict";var F=q(9069).EventEmitter;function K(){Object.defineProperties(this,{_eventEmitter:{value:new F}})}K.prototype.dispatchEvent=function(G){return this._eventEmitter.emit(G.type,G)},K.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},K.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},Oe.exports=K},7627:(Oe,Me)=>{"use strict";function F(Y,z,ce,be){if(!(be in z)&&!be.match(/^on[a-z]+$/)){var ke=!1;try{var me=Object.getOwnPropertyDescriptor(Y,be);ke=me&&!!me.get}catch{}if(!ke){var Re;try{Re=typeof Y[be]}catch{}"function"===Re&&(z[be]=function(){return this[ce][be].apply(this[ce],arguments)})}}}function V(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function k(Y){return typeof Y>"u"&&(Y=V()),/Chrome|CriOS/.test(Y)?"chrome":/Firefox|FxiOS/.test(Y)?"firefox":/Safari|iPhone|iPad|iPod/.test(Y)?"safari":null}Me.defer=function q(){var Y={};return Y.promise=new Promise(function(z,ce){Y.resolve=z,Y.reject=ce}),Y},Me.delegateMethods=function K(Y,z,ce){for(var be in Y)F(Y,z,ce,be)},Me.difference=function ie(Y,z){Y=Array.isArray(Y)?new Set(Y):new Set(Y.values()),z=Array.isArray(z)?new Set(z):new Set(z.values());var ce=new Set;return Y.forEach(function(be){z.has(be)||ce.add(be)}),ce},Me.flatMap=function G(Y,z){return(Y instanceof Map||Y instanceof Set?Array.from(Y.values()):Y).reduce(function(be,ke){var me=z(ke);return be.concat(me)},[])},Me.guessBrowser=k,Me.guessBrowserVersion=function O(Y){typeof Y>"u"&&(Y=V());var z={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[k(Y)];if(!z)return null;var ce=new RegExp("("+z+")/([^\\s]+)"),be=(Y.match(ce)||[])[2];if(!be)return null;var ke=be.split(".").map(Number);return{major:isNaN(ke[0])?null:ke[0],minor:isNaN(ke[1])?null:ke[1]}},Me.isIOSChrome=function x(Y){return typeof Y>"u"&&(Y=V()),/Mobi/.test(Y)&&"chrome"===k()&&/iPad|iPhone|iPod/.test(Y)},Me.interceptEvent=function B(Y,z){var ce=null;Object.defineProperty(Y,"on"+z,{get:function(){return ce},set:function(be){ce&&this.removeEventListener(z,ce),"function"==typeof be?this.addEventListener(z,ce=be):ce=null}})},Me.legacyPromise=function $(Y,z,ce){return z?Y.then(function(be){z(be)},function(be){ce(be)}):Y},Me.makeUUID=function ae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){var z=16*Math.random()|0;return("x"===Y?z:3&z|8).toString(16)})},Me.proxyProperties=function de(Y,z,ce){Object.getOwnPropertyNames(Y).forEach(function(be){!function he(Y,z,ce,be){if(!(be in z)){if(be.match(/^on[a-z]+$/))return Object.defineProperty(z,be,{value:null,writable:!0}),void ce.addEventListener(be.slice(2),function(){z.dispatchEvent.apply(z,arguments)});Object.defineProperty(z,be,{enumerable:!0,get:function(){return ce[be]}})}}(0,z,ce,be)})},Me.support=function X(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:(Oe,Me,q)=>{"use strict";var F=q(7627).defer,K={high:new Set(["low"]),low:new Set(["high"])};function ie(V){if(!(this instanceof ie))return new ie(V);var k=V||"low";Object.defineProperties(this,{_state:{set:function(O){if(k!==O){var x=this._whenDeferreds.get(k=O);x.forEach(function(B){B.resolve(this)},this),x.clear()}},get:function(){return k}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function G(V,k){return new Error('Cannot transition from "'+V+'" to "'+k+'"')}ie.prototype.lower=function(){return this.transition("low")},ie.prototype.raise=function(){return this.transition("high")},ie.prototype.transition=function(k){if(!K[this.state].has(k))throw G(this.state,k);return this._state=k,this},ie.prototype.when=function(k){if(this.state===k)return Promise.resolve(this);if(!K[this.state].has(k))return Promise.reject(G(this.state,k));var O=F();return this._whenDeferreds.get(k).add(O),O.promise},Oe.exports=ie},3236:(Oe,Me,q)=>{"use strict";var F=q(7627).flatMap,K=q(7627).guessBrowser,ie=null,V=null;function O(ue){return ue&&function G(){if("boolean"==typeof ie)return ie;if(typeof RTCPeerConnection>"u")return ie=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),ie=!1}catch{ie=!0}return ie}()?{"plan-b":"planb","unified-plan":"unified"}[ue]:function k(){if(!V)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),V="unified"}catch{V="planb"}else V="planb";return V}()}function $(ue,fe){return(fe.match(new RegExp(ue,"gm"))||[]).reduce(function(He,Ue){var Ge=Ue.match(new RegExp(ue));return Ge?He.add(Ge[1]):He},new Set)}function ae(ue,fe){return $(ue,fe)}function de(ue){return ae("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",ue)}function he(ue){return ae("^a=msid:.+ +(.+) *$",ue)}function X(ue,fe){return $("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+fe+" *$",ue)}function Y(ue,fe,we){return fe=fe||".*",we=we||".*",ue.split("\r\nm=").slice(1).map(function(He){return"m="+He}).filter(function(He){var Ue=new RegExp("m="+fe,"gm"),Ge=new RegExp("a="+we,"gm");return Ue.test(He)&&Ge.test(He)})}function z(ue){return Array.from($("^a=ssrc:([0-9]+) +.*$",ue))}function ce(ue,fe){var we=Y(ue),He=new RegExp("^a=msid:[^ ]+ +"+fe+" *$","gm"),Ue=we.filter(function(Ge){return Ge.match(He)});return new Set(F(Ue,z))}function be(ue,fe,we){return new Map(Array.from(ue(we)).map(function(He){return[He,fe(we,He)]}))}function ke(ue){return be(de,X,ue)}function me(ue){return be(he,ce,ue)}function Re(ue,fe,we){var He=ue(we),Ue=new Map;He.forEach(function(Xe,Be){if(fe.has(Be)){var jt=Array.from(fe.get(Be)),Kt=Array.from(Xe);jt.forEach(function(St,Ye){var je=Kt[Ye];Ue.set(je,St);var Pe="a=ssrc:"+St+" $1";we=we.replace(new RegExp("^a=ssrc:"+je+" (.*)$","gm"),Pe)})}else fe.set(Be,Xe)});var Ge="^(a=ssrc-group:[^ ]+ +)(.*)$";return(we.match(new RegExp(Ge,"gm"))||[]).forEach(function(Xe){var Be=Xe.match(new RegExp(Ge));if(Be){var jt=Be[1],St=Be[2].split(" ").map(function(Ye){return Ue.get(Ye)||Ye}).join(" ");we=we.replace(Be[0],jt+St)}}),we}Me.getSdpFormat=function B(ue){return{chrome:O(ue),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[K()]||null},Me.getMediaSections=Y,Me.getPlanBTrackIds=de,Me.getUnifiedPlanTrackIds=he,Me.getPlanBSSRCs=X,Me.getUnifiedPlanSSRCs=ce,Me.updatePlanBTrackIdsToSSRCs=function Ce(ue,fe){return Re(ke,ue,fe)},Me.updateUnifiedPlanTrackIdsToSSRCs=function _e(ue,fe){return Re(me,ue,fe)}},3332:Oe=>{Oe.exports=WebSocket},7156:Oe=>{function Me(F,K,ie,G,V,k,O){try{var x=F[k](O),B=x.value}catch($){return void ie($)}x.done?K(B):Promise.resolve(B).then(G,V)}Oe.exports=function q(F){return function(){var K=this,ie=arguments;return new Promise(function(G,V){var k=F.apply(K,ie);function O(B){Me(k,G,V,O,x,"next",B)}function x(B){Me(k,G,V,O,x,"throw",B)}O(void 0)})}},Oe.exports.__esModule=!0,Oe.exports.default=Oe.exports},1730:Oe=>{"use strict";Oe.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.21.3","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@5.5.0","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc ","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},Oe=>{Oe(Oe.s=9358)}]);